<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€Sparkã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€Hadoop]]></title>    <link>https://juejin.cn/post/7579472170905255986</link>    <guid>https://juejin.cn/post/7579472170905255986</guid>    <pubDate>2025-12-03T12:14:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579472170905255986" data-draft-id="7579473409748402227" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€Sparkã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€Hadoop"/> <meta itemprop="keywords" content="åç«¯,Python,MySQL"/> <meta itemprop="datePublished" content="2025-12-03T12:14:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è®¡ç®—æœºæ¯•è®¾å°æœˆå“¥"/> <meta itemprop="url" content="https://juejin.cn/user/95020128928073"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Hadoop+Spark+pythonæ¯•è®¾ã€‘ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€Sparkã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€Hadoop
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/95020128928073/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è®¡ç®—æœºæ¯•è®¾å°æœˆå“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T12:14:30.000Z" title="Wed Dec 03 2025 12:14:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“ ä½œè€…ï¼šè®¡ç®—æœºæ¯•è®¾å°æœˆå“¥ | è½¯ä»¶å¼€å‘ä¸“å®¶</p>
<p>ğŸ–¥ï¸ ç®€ä»‹ï¼š8å¹´è®¡ç®—æœºè½¯ä»¶ç¨‹åºå¼€å‘ç»éªŒã€‚ç²¾é€šJavaã€Pythonã€å¾®ä¿¡å°ç¨‹åºã€å®‰å“ã€å¤§æ•°æ®ã€PHPã€.NET|C#ã€Golangç­‰æŠ€æœ¯æ ˆã€‚</p>
<p>ğŸ› ï¸ ä¸“ä¸šæœåŠ¡ ğŸ› ï¸</p>
<ul>
<li>
<p>éœ€æ±‚å®šåˆ¶åŒ–å¼€å‘</p>
</li>
<li>
<p>æºç æä¾›ä¸è®²è§£</p>
</li>
<li>
<p>æŠ€æœ¯æ–‡æ¡£æ’°å†™ï¼ˆæŒ‡å¯¼è®¡ç®—æœºæ¯•è®¾é€‰é¢˜ã€æ–°é¢–+åˆ›æ–°ã€‘ã€ä»»åŠ¡ä¹¦ã€å¼€é¢˜æŠ¥å‘Šã€æ–‡çŒ®ç»¼è¿°ã€å¤–æ–‡ç¿»è¯‘ç­‰ï¼‰</p>
</li>
<li>
<p>é¡¹ç›®ç­”è¾©æ¼”ç¤ºPPTåˆ¶ä½œ</p>
</li>
</ul>
</blockquote>
<blockquote>
<p>ğŸŒŸ æ¬¢è¿ï¼šç‚¹èµ ğŸ‘ æ”¶è— â­ è¯„è®º ğŸ“</p>
<p>ğŸ‘‡ğŸ» ç²¾é€‰ä¸“æ æ¨è ğŸ‘‡ğŸ» æ¬¢è¿è®¢é˜…å…³æ³¨ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761129.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761129.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761131.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761131.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761132.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761132.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
</blockquote>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761130.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761130.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761126.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761126.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… â†“â†“ä¸»é¡µè·å–æºç è”ç³»â†“â†“ğŸ…</p>
</blockquote>
<h2 data-id="heading-0">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-åŠŸèƒ½ä»‹ç»</h2>
<p>æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå¤§æ•°æ®æŠ€æœ¯çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æå¹³å°ï¼Œæ—¨åœ¨é€šè¿‡é«˜æ•ˆçš„æ•°æ®å¤„ç†ä¸ç›´è§‚çš„å›¾è¡¨å±•ç¤ºï¼Œæ·±åº¦æŒ–æ˜ä¸­é£æ‚£è€…æ•°æ®èƒŒåçš„æ½œåœ¨è§„å¾‹ä¸é£é™©å› ç´ ã€‚ç³»ç»Ÿåç«¯é‡‡ç”¨Hadoopæ„å»ºåˆ†å¸ƒå¼å­˜å‚¨ç¯å¢ƒï¼Œåˆ©ç”¨Sparkä½œä¸ºæ ¸å¿ƒè®¡ç®—å¼•æ“ï¼Œå®ç°å¯¹æµ·é‡åŒ»ç–—æ•°æ®çš„å¿«é€Ÿæ¸…æ´—ã€è½¬æ¢ä¸åˆ†æã€‚å¼€å‘è¯­è¨€é€‰ç”¨Pythonï¼Œå€ŸåŠ©å…¶å¼ºå¤§çš„æ•°æ®ç§‘å­¦ç”Ÿæ€åº“ï¼Œå¦‚Pandasä¸NumPyï¼Œè¿›è¡Œç²¾ç»†åŒ–çš„æ•°æ®é¢„å¤„ç†ã€‚ç³»ç»ŸåŠŸèƒ½å…¨é¢ï¼Œè¦†ç›–äº†ä»æ‚£è€…ç¾¤ä½“åŸºç¡€ç”»åƒï¼ˆå¦‚æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šåˆ†å¸ƒï¼‰åˆ°æ ¸å¿ƒå¥åº·æŒ‡æ ‡ï¼ˆå¦‚é«˜è¡€å‹ã€è¡€ç³–ã€BMIï¼‰çš„ç»Ÿè®¡åˆ†æï¼Œå†åˆ°ä¸­é£é£é™©å› ç´ çš„å¤šç»´åº¦å…³è”ä¸äº¤å‰é’»å–ã€‚é€šè¿‡å¯¹å¹´é¾„ã€å¸çƒŸå²ã€æ—¢å¾€ç—…å²ç­‰å˜é‡ä¸ä¸­é£ç‡çš„å…³è”è®¡ç®—ï¼Œç³»ç»Ÿèƒ½å¤Ÿç²¾å‡†å®šä½é«˜é£é™©äººç¾¤ç‰¹å¾ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰åˆ†æç»“æœé€šè¿‡Vueå‰ç«¯æ¡†æ¶ä¸Echartså¯è§†åŒ–ç»„ä»¶ï¼Œä»¥åŠ¨æ€äº¤äº’å›¾è¡¨çš„å½¢å¼å‘ˆç°ï¼Œå°†å¤æ‚çš„æ•°æ®è½¬åŒ–ä¸ºæ˜“äºç†è§£çš„æ´å¯Ÿï¼Œä¸ºä¸­é£ç—…çš„é¢„é˜²ä¸ç ”ç©¶æä¾›æ•°æ®æ”¯æŒã€‚</p>
<h2 data-id="heading-1">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-é€‰é¢˜èƒŒæ™¯æ„ä¹‰</h2>
<p>é€‰é¢˜èƒŒæ™¯
éšç€ç¤¾ä¼šç”Ÿæ´»èŠ‚å¥çš„åŠ å¿«å’Œäººå£è€é¾„åŒ–è¶‹åŠ¿çš„æ˜¾ç°ï¼Œä¸­é£å·²ç»æˆä¸ºå¨èƒå…¬ä¼—å¥åº·çš„ä¸»è¦ç–¾ç—…ä¹‹ä¸€ï¼Œå…¶é«˜å‘ç—…ç‡ã€é«˜è‡´æ®‹ç‡å’Œé«˜æ­»äº¡ç‡çš„ç‰¹ç‚¹ï¼Œç»™æ— æ•°å®¶åº­å’Œç¤¾ä¼šå¸¦æ¥äº†æ²‰é‡çš„è´Ÿæ‹…ã€‚åœ¨ä¸´åºŠå®è·µä¸­ï¼ŒåŒ»é™¢å’ŒåŒ»ç–—æœºæ„ç§¯ç´¯äº†æµ·é‡çš„æ‚£è€…ç”µå­ç—…å†æ•°æ®ï¼Œè¿™äº›æ•°æ®ä¸­è•´å«ç€å…³äºç–¾ç—…æˆå› ã€å‘å±•è§„å¾‹å’Œé£é™©å› ç´ çš„å®è´µä¿¡æ¯ã€‚ç„¶è€Œï¼Œè¿™äº›æ•°æ®å¾€å¾€ä½“é‡å·¨å¤§ã€ç»“æ„å¤æ‚ä¸”åˆ†æ•£åœ¨ä¸åŒç³»ç»Ÿä¸­ï¼Œä¼ ç»Ÿçš„æ•°æ®åˆ†æå·¥å…·å’Œæ–¹æ³•éš¾ä»¥æœ‰æ•ˆå¤„ç†å’Œæ·±åº¦æŒ–æ˜ï¼Œå¯¼è‡´å¤§é‡æœ‰ä»·å€¼çš„ä¿¡æ¯è¢«â€œæ·¹æ²¡â€ã€‚å¦‚ä½•åˆ©ç”¨æ–°å…´çš„å¤§æ•°æ®æŠ€æœ¯ï¼Œå¯¹è¿™äº›åºå¤§çš„åŒ»ç–—æ•°æ®è¿›è¡Œç³»ç»Ÿæ€§çš„æ•´åˆä¸åˆ†æï¼Œä»ä¸­å‘ç°éšè—çš„å…³è”æ¨¡å¼ï¼Œä»è€Œä¸ºä¸­é£ç—…çš„æ—©æœŸé¢„è­¦å’Œç²¾å‡†é¢„é˜²æä¾›ç§‘å­¦ä¾æ®ï¼Œä¾¿æˆäº†ä¸€ä¸ªå…·æœ‰é‡è¦ç°å®æ„ä¹‰çš„è¯¾é¢˜ã€‚
é€‰é¢˜æ„ä¹‰
è¿™ä¸ªè¯¾é¢˜çš„æ„ä¹‰å¯ä»¥ä»å‡ ä¸ªæ–¹é¢æ¥çœ‹ã€‚å¯¹äºåŒ»ç–—é¢†åŸŸçš„ç ”ç©¶è€…æ¥è¯´ï¼Œæœ¬ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªå¿«é€Ÿã€å¤šç»´åº¦çš„æ•°æ®åˆ†æå·¥å…·ï¼Œèƒ½å¤Ÿå¸®åŠ©ä»–ä»¬éªŒè¯ä¸€äº›å…³äºä¸­é£é£é™©çš„å‡è®¾ï¼Œæ¯”å¦‚ä¸åŒç”Ÿæ´»ä¹ æƒ¯æˆ–åŸºç¡€ç–¾ç—…ç»„åˆå¯¹ä¸­é£æ¦‚ç‡çš„å½±å“ï¼Œä¸ºæ›´æ·±å…¥çš„æµè¡Œç—…å­¦ç ”ç©¶æä¾›äº†æ–¹å‘å’Œåˆæ­¥çš„æ•°æ®å‚è€ƒã€‚ä»å…¬å…±å«ç”Ÿçš„è§’åº¦çœ‹ï¼Œé€šè¿‡ç³»ç»Ÿåˆ†æå¾—å‡ºçš„é«˜é£é™©äººç¾¤ç”»åƒï¼Œå¯ä»¥å¸®åŠ©å«ç”Ÿéƒ¨é—¨æ›´æœ‰é’ˆå¯¹æ€§åœ°å¼€å±•å¥åº·æ•™è‚²å’Œé¢„é˜²å¹²é¢„æ´»åŠ¨ï¼Œæ¯”å¦‚å‘ç‰¹å®šå¹´é¾„æ®µå’Œæœ‰ç‰¹å®šç”Ÿæ´»ä¹ æƒ¯çš„ç¾¤ä½“æ¨é€é¢„é˜²çŸ¥è¯†ï¼Œæå‡æ•´ä¸ªç¤¾ä¼šçš„é¢„é˜²æ„è¯†ã€‚å¯¹äºæˆ‘ä»¬è®¡ç®—æœºä¸“ä¸šçš„å­¦ç”Ÿè€Œè¨€ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯ä¸€æ¬¡å°†å¤§æ•°æ®ç†è®ºæŠ€æœ¯ä¸å®é™…åº”ç”¨åœºæ™¯ç´§å¯†ç»“åˆçš„ç»ä½³å®è·µï¼Œå®Œæ•´åœ°èµ°è¿‡äº†ä»æ•°æ®é‡‡é›†ã€å­˜å‚¨ã€æ¸…æ´—ã€åˆ†æåˆ°å¯è§†åŒ–çš„å…¨æµç¨‹ï¼Œé”»ç‚¼äº†è§£å†³å¤æ‚é—®é¢˜çš„èƒ½åŠ›ï¼Œè™½ç„¶åªæ˜¯ä¸€ä¸ªæ¯•ä¸šè®¾è®¡ï¼Œä½†å¸Œæœ›èƒ½ä¸ºæ™ºæ…§åŒ»ç–—é¢†åŸŸçš„å‘å±•æä¾›ä¸€ä¸ªå¾®å°çš„æŠ€æœ¯æ¢ç´¢æ ·æœ¬ã€‚</p>
<h2 data-id="heading-2">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-æŠ€æœ¯é€‰å‹</h2>
<p>å¤§æ•°æ®æ¡†æ¶ï¼šHadoop+Sparkï¼ˆæœ¬æ¬¡æ²¡ç”¨Hiveï¼Œæ”¯æŒå®šåˆ¶ï¼‰
å¼€å‘è¯­è¨€ï¼šPython+Javaï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
åç«¯æ¡†æ¶ï¼šDjango+Spring Boot(Spring+SpringMVC+Mybatis)ï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
å‰ç«¯ï¼šVue+ElementUI+Echarts+HTML+CSS+JavaScript+jQuery
è¯¦ç»†æŠ€æœ¯ç‚¹ï¼šHadoopã€HDFSã€Sparkã€Spark SQLã€Pandasã€NumPy
æ•°æ®åº“ï¼šMySQL</p>
<h2 data-id="heading-3">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-è§†é¢‘å±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1ST2xBiEnr%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1ST2xBiEnr/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-è§†é¢‘å±•ç¤º</a></p>
<h2 data-id="heading-4">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-å›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c6f62cd97ee4c0e9a98968f504d5a3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=qa8IEyxWpx9ug0K%2FRZ56QAxQnlw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84e856e8419a41afac481a132b4058a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=6RDxGePqFf5PSR%2Be%2Ft7F%2BZ%2FLd7I%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a8a9372bce94f5099019137efc8b6e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=P%2B6ZMYXjsMZee8i69C1k4FZI3RI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35004582d1944cfdaf010ec45c63bf98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=o15xZgJ0YUNBuPvzUH9Z%2Fi3ZI%2FY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1f0061516b942bfac23e9e0841e5cc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=6VjAk4lwIf5UGFslyM3JgH69Qy4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ae4d977b0d94aed8d99ef0dd4eb9d10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=IcJ7Zj1hZnKEe93WV%2FXM%2FlE%2FHkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dde9947dd1ee45008f48e918dca2579a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=r7e6maMszFCqTmceuLmluF5b%2ByE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c958e802e744441aaac2ff7704f92afd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5bCP5pyI5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765368870&amp;x-signature=T8nhkPsOkLxdRM6YbE7m622Cewo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-5">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-ä»£ç å±•ç¤º</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pyspark.sql <span class="hljs-keyword">import</span> SparkSession
<span class="hljs-keyword">from</span> pyspark.sql.functions <span class="hljs-keyword">import</span> col, when, count, avg, <span class="hljs-built_in">sum</span> <span class="hljs-keyword">as</span> spark_sum

spark = SparkSession.builder.appName(<span class="hljs-string">"StrokeAnalysis"</span>).getOrCreate()

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½1: ä¸åŒæ€§åˆ«ä¸å¹´é¾„æ®µçš„ä¸­é£ç‡å¯¹æ¯”åˆ†æ (å¯¹åº”ç»´åº¦3.1)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_stroke_rate_by_age_gender</span>(<span class="hljs-params">df</span>):
    df.createOrReplaceTempView(<span class="hljs-string">"stroke_data"</span>)
    result_df = spark.sql(<span class="hljs-string">"""
        SELECT 
            gender,
            CASE 
                WHEN age &lt; 30 THEN 'é’å¹´'
                WHEN age BETWEEN 30 AND 50 THEN 'ä¸­å¹´'
                WHEN age &gt; 50 THEN 'è€å¹´'
                ELSE 'æœªçŸ¥'
            END AS age_group,
            COUNT(*) AS total_count,
            SUM(CASE WHEN stroke = 1 THEN 1 ELSE 0 END) AS stroke_count,
            AVG(stroke) AS stroke_rate
        FROM stroke_data
        GROUP BY gender, age_group
        ORDER BY gender, age_group
    """</span>)
    result_df.show()

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½2: å¥åº·é£é™©å› å­ç´¯ç§¯æ•ˆåº”åˆ†æ (å¯¹åº”ç»´åº¦5.1)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_cumulative_risk_effect</span>(<span class="hljs-params">df</span>):
    risk_df = df.withColumn(<span class="hljs-string">"risk_count"</span>, 
        spark_sum(when(col(<span class="hljs-string">"hypertension"</span>) == <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).otherwise(<span class="hljs-number">0</span>) +
                  when(col(<span class="hljs-string">"heart_disease"</span>) == <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).otherwise(<span class="hljs-number">0</span>) +
                  when(col(<span class="hljs-string">"smoking_status"</span>) == <span class="hljs-string">"smokes"</span>, <span class="hljs-number">1</span>).otherwise(<span class="hljs-number">0</span>))
    ).groupBy(<span class="hljs-string">"risk_count"</span>)
    .agg(
        count(<span class="hljs-string">"*"</span>).alias(<span class="hljs-string">"patient_count"</span>),
        avg(<span class="hljs-string">"stroke"</span>).alias(<span class="hljs-string">"stroke_rate"</span>)
    )
    .orderBy(<span class="hljs-string">"risk_count"</span>)
    risk_df.show()

<span class="hljs-comment"># æ ¸å¿ƒåŠŸèƒ½3: æ‚£è€…è¡€ç³–æ°´å¹³åˆ†å¸ƒåˆ†æ (å¯¹åº”ç»´åº¦2.2)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_glucose_level_distribution</span>(<span class="hljs-params">df</span>):
    glucose_binned_df = df.withColumn(<span class="hljs-string">"glucose_level_category"</span>,
        when(col(<span class="hljs-string">"avg_glucose_level"</span>) &lt; <span class="hljs-number">90</span>, <span class="hljs-string">"æ­£å¸¸è¡€ç³–"</span>)
        .when((col(<span class="hljs-string">"avg_glucose_level"</span>) &gt;= <span class="hljs-number">90</span>) &amp; (col(<span class="hljs-string">"avg_glucose_level"</span>) &lt; <span class="hljs-number">126</span>), <span class="hljs-string">"è¡€ç³–åé«˜"</span>)
        .otherwise(<span class="hljs-string">"é«˜è¡€ç³–é£é™©"</span>)
    ).groupBy(<span class="hljs-string">"glucose_level_category"</span>)
    .agg(
        count(<span class="hljs-string">"*"</span>).alias(<span class="hljs-string">"patient_count"</span>)
    )
    .orderBy(col(<span class="hljs-string">"patient_count"</span>).desc())
    glucose_binned_df.show()
</code></pre>
<h2 data-id="heading-6">åŸºäºå¤§æ•°æ®çš„ä¸­é£æ‚£è€…æ•°æ®å¯è§†åŒ–åˆ†æç³»ç»Ÿ-ç»“è¯­</h2>
<blockquote>
<p>ğŸŒŸ æ¬¢è¿ï¼šç‚¹èµ ğŸ‘ æ”¶è— â­ è¯„è®º ğŸ“</p>
<p>ğŸ‘‡ğŸ» ç²¾é€‰ä¸“æ æ¨è ğŸ‘‡ğŸ» æ¬¢è¿è®¢é˜…å…³æ³¨ï¼</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761129.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761129.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761131.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761131.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761132.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761132.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761130.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761130.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86721878%2Fcategory_12761126.html" target="_blank" title="https://blog.csdn.net/2401_86721878/category_12761126.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… â†“â†“ä¸»é¡µè·å–æºç è”ç³»â†“â†“ğŸ…</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claudeç”¨ä¸å¥½æµªè´¹é’±ï¼Ÿ10ä¸ªé«˜çº§æŠ€å·§è®©æ•ˆç‡ç¿»3å€]]></title>    <link>https://juejin.cn/post/7579451710303109146</link>    <guid>https://juejin.cn/post/7579451710303109146</guid>    <pubDate>2025-12-03T11:12:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579451710303109146" data-draft-id="7579460553614835763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claudeç”¨ä¸å¥½æµªè´¹é’±ï¼Ÿ10ä¸ªé«˜çº§æŠ€å·§è®©æ•ˆç‡ç¿»3å€"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2025-12-03T11:12:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claudeç”¨ä¸å¥½æµªè´¹é’±ï¼Ÿ10ä¸ªé«˜çº§æŠ€å·§è®©æ•ˆç‡ç¿»3å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T11:12:35.000Z" title="Wed Dec 03 2025 11:12:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d06661f4fc741708b4b0f16824acc9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765365155&amp;x-signature=lGsWRTuwnesYvzMKMxNt5GMT13s%3D" alt="claude-advanced-tips.jpg" loading="lazy"/></p>
<h3 data-id="heading-0">å¼•è¨€</h3>
<p>åŠå¹´å‰æˆ‘ç¬¬ä¸€æ¬¡ç”¨Claudeçš„æ—¶å€™ï¼Œè¯´å®è¯æŒºå¤±æœ›çš„ã€‚æ„Ÿè§‰å°±æ˜¯æ™®é€šçš„å¯¹è¯å˜›ï¼Œè·ŸChatGPTå¥½åƒä¹Ÿæ²¡å•¥åŒºåˆ«ã€‚çœ‹åˆ°åŒäº‹ç”¨Claudeåšå‡ºé‚£äº›é…·ç‚«çš„äº¤äº’å¼å·¥å…·ï¼Œè¿˜èƒ½è®°ä½æ•´ä¸ªé¡¹ç›®çš„èƒŒæ™¯ï¼Œæˆ‘å½“æ—¶çœŸçš„å¾ˆå›°æƒ‘ï¼šä¸ºä»€ä¹ˆæˆ‘çš„Claudeå°±æ˜¯ä¸ª"æ™®é€šèŠå¤©æœºå™¨äºº"ï¼Ÿ</p>
<p>åæ¥æˆ‘æ‰æ˜ç™½ï¼Œé—®é¢˜ä¸åœ¨Claudeï¼Œåœ¨æˆ‘è‡ªå·±ã€‚æˆ‘å‹æ ¹ä¸çŸ¥é“Claudeæœ‰é‚£ä¹ˆå¤šéšè—åŠŸèƒ½â€”â€”Artifactsã€Projectsã€Extended Thinking...è¿™äº›åŠŸèƒ½å®Œå…¨æ”¹å˜äº†æˆ‘çš„å·¥ä½œæ–¹å¼ã€‚ç°åœ¨å›å¤´çœ‹ï¼Œé‚£åŠå¹´ç®€ç›´æ˜¯åœ¨"æµªè´¹"Claudeçš„èƒ½åŠ›ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘æƒ³åˆ†äº«10ä¸ªå®æˆ˜æŠ€å·§ï¼Œå¤–åŠ 20å¤šä¸ªå¯ä»¥ç›´æ¥å¤åˆ¶çš„Promptæ¨¡æ¿ã€‚å¦‚æœä½ ä¹Ÿåœ¨ç”¨Claudeï¼Œä½†æ€»æ„Ÿè§‰"è¿˜èƒ½æ›´å¥½"ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å†™çš„ã€‚é¢„è®¡é˜…è¯»15åˆ†é’Ÿï¼Œçœ‹å®Œç«‹åˆ»å°±èƒ½ä¸Šæ‰‹ï¼Œæˆ‘æ•¢è¯´ä½ çš„å·¥ä½œæ•ˆç‡è‡³å°‘æå‡3å€ã€‚</p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šClaude vs ChatGPT - ä½ çœŸçš„é€‰å¯¹äº†å—ï¼Ÿ</h3>
<h4 data-id="heading-2">æŠ€å·§1ï¼šäº†è§£Claudeçš„3å¤§æ ¸å¿ƒä¼˜åŠ¿</h4>
<p>è¯´å®è¯ï¼Œåˆšå¼€å§‹æˆ‘ä¹Ÿåˆ†ä¸æ¸…Claudeå’ŒChatGPTæœ‰ä»€ä¹ˆåŒºåˆ«ã€‚ç›´åˆ°æˆ‘å°è¯•è®©å®ƒä»¬åˆ†æä¸€ä»½200é¡µçš„æŠ€æœ¯æ–‡æ¡£ï¼Œå·®å¼‚æ‰ä¸€ä¸‹å­æ˜¾ç°å‡ºæ¥ã€‚</p>
<p><strong>Claudeçš„ä¸‰å¤§æ€æ‰‹é”</strong>ï¼š</p>
<p><strong>1. 200Kè¶…é•¿ä¸Šä¸‹æ–‡çª—å£</strong>
è¿™ä¸ªæ•°å­—æ„å‘³ç€ä»€ä¹ˆï¼Ÿå¤§æ¦‚èƒ½è£…ä¸‹500é¡µçš„æ–‡æœ¬ã€‚æˆ‘æœ‰æ¬¡æŠŠæ•´ä¸ªé¡¹ç›®çš„ä»£ç åº“ï¼ˆçº¦300ä¸ªæ–‡ä»¶ï¼‰éƒ½æ‰”ç»™Claudeï¼Œå®ƒå±…ç„¶èƒ½å‡†ç¡®ç†è§£ä¸åŒæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚ChatGPTçš„128Kè™½ç„¶ä¹Ÿä¸å°ï¼Œä½†å¤„ç†è¶…å¤§å‹é¡¹ç›®æ—¶ç¡®å®åŠ›ä¸ä»å¿ƒã€‚</p>
<p><strong>2. å†™ä½œè´¨é‡æ›´è‡ªç„¶</strong>
è¿™ä¸ªè¯´èµ·æ¥æœ‰ç‚¹ç„å­¦ï¼Œä½†Claudeçš„æ–‡å­—ç¡®å®æ›´åƒäººå†™çš„ã€‚Anthropicç”¨äº†"å®ªæ³•AI"è®­ç»ƒæ–¹æ³•ï¼Œè®©Claudeå­¦ä¼šäº†æ›´ç»†è…»çš„è¯­è¨€è¡¨è¾¾ã€‚æˆ‘ä¹‹å‰ç”¨å®ƒæ”¹è¿‡ä¸€ç¯‡æŠ€æœ¯åšå®¢ï¼Œæ”¹å‡ºæ¥çš„ç‰ˆæœ¬è¿æˆ‘è‡ªå·±éƒ½æƒŠè®¶â€”â€”å®Œå…¨æ²¡æœ‰é‚£ç§"AIå‘³"ã€‚</p>
<p><strong>3. ä»£ç èƒ½åŠ›å’Œå®‰å…¨æ€§æ›´å¼º</strong>
TELUSå…¬å¸57,000åå‘˜å·¥ä½¿ç”¨Claudeï¼Œåˆ›é€ äº†è¶…è¿‡9000ä¸‡ç¾å…ƒçš„ä¸šåŠ¡ä»·å€¼ã€‚Zapierå›¢é˜Ÿè¯´ä»–ä»¬çš„è‡ªåŠ¨åŒ–ä»»åŠ¡é‡å› ä¸ºClaudeå¢é•¿äº†10å€ã€‚è¿™äº›æ•°å­—ä¸æ˜¯å¹å‡ºæ¥çš„ï¼ŒClaudeåœ¨ä¼ä¸šçº§åº”ç”¨ä¸­çš„è¡¨ç°ç¡®å®å‡ºè‰²ã€‚</p>
<p><strong>æˆ‘çš„ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<pre><code class="hljs">é•¿æ–‡æ¡£åˆ†æã€ä»£ç é¡¹ç›® â†’ ç”¨Claude
æ—¥å¸¸é—²èŠã€éœ€è¦è®°å¿†åŠŸèƒ½ â†’ ç”¨ChatGPT
åˆ›æ„brainstorming â†’ ä¸¤ä¸ªéƒ½è¯•è¯•
</code></pre>
<p>åˆ«è¯¯ä¼šï¼Œæˆ‘ä¸æ˜¯è¯´ChatGPTä¸å¥½ã€‚åªæ˜¯ä¸åŒåœºæ™¯ä¸‹ï¼ŒçœŸçš„è¯¥ç”¨å¯¹å·¥å…·ã€‚</p>
<hr/>
<h3 data-id="heading-3">ç¬¬äºŒéƒ¨åˆ†ï¼šåŸºç¡€æŠ€å·§å‡çº§</h3>
<h4 data-id="heading-4">æŠ€å·§2ï¼šç³»ç»Ÿæç¤ºè¯ - ç»™Claudeä¸€ä¸ª"äººè®¾"</h4>
<p>è¿™ä¸ªåŠŸèƒ½æˆ‘çœŸçš„å¼ºçƒˆæ¨èï¼å°±åƒç»™Claudeæˆ´äº†ä¸€ä¸ªä¸“ä¸šçš„"é¢å…·"ï¼Œè®©å®ƒå§‹ç»ˆä¿æŒæŸç§ä¸“ä¸šçŠ¶æ€ã€‚</p>
<p><strong>ç³»ç»Ÿæç¤ºè¯æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ç®€å•è¯´ï¼Œå°±æ˜¯åœ¨æ¯æ¬¡å¯¹è¯å‰ï¼Œå…ˆå‘Šè¯‰Claudeï¼š"ä½ æ˜¯è°ã€è¯¥æ€ä¹ˆå›ç­”ã€ç”¨ä»€ä¹ˆé£æ ¼"ã€‚è¿™æ ·ä½ å°±ä¸ç”¨æ¯æ¬¡éƒ½é‡å¤èƒŒæ™¯äº†ã€‚</p>
<p><strong>3ç§è®¾ç½®æ–¹å¼</strong>ï¼š</p>
<ol>
<li><strong>Projects</strong>ï¼ˆæˆ‘æœ€å¸¸ç”¨ï¼‰ï¼šåœ¨Projectè®¾ç½®ä¸­æ·»åŠ Custom Instructions</li>
<li><strong>Chatå‰ç½®</strong>ï¼šæ¯æ¬¡å¯¹è¯å¼€å§‹æ—¶å…ˆå‘ä¸€æ¡æŒ‡ä»¤</li>
<li><strong>APIç³»ç»Ÿæ¶ˆæ¯</strong>ï¼šå¦‚æœä½ ç”¨APIï¼Œå¯ä»¥è®¾ç½®system message</li>
</ol>
<p><strong>5ä¸ªåœºæ™¯æ¨¡æ¿</strong>ï¼Œç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼š</p>
<p><strong>æ¨¡æ¿1ï¼šä»£ç å®¡æŸ¥ä¸“å®¶</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ æ˜¯ä¸€ä½èµ„æ·±ä»£ç å®¡æŸ¥ä¸“å®¶ï¼Œä¸“æ³¨äºï¼š
<span class="hljs-bullet">-</span> å‘ç°æ½œåœ¨çš„bugå’Œæ€§èƒ½é—®é¢˜
<span class="hljs-bullet">-</span> æä¾›å…·ä½“çš„ä¼˜åŒ–å»ºè®®ï¼ˆè€Œéæ³›æ³›è€Œè°ˆï¼‰
<span class="hljs-bullet">-</span> è¯„ä¼°ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§
<span class="hljs-bullet">-</span> ç»™å‡º1-10åˆ†çš„è¯„åˆ†ï¼Œå¹¶è¯´æ˜ç†ç”±

å›ç­”é£æ ¼ï¼šä¸“ä¸šä½†å‹å¥½ï¼Œç”¨å…·ä½“ä¾‹å­è¯´æ˜é—®é¢˜
è¾“å‡ºæ ¼å¼ï¼š
<span class="hljs-bullet">1.</span> æ€»ä½“è¯„åˆ†
<span class="hljs-bullet">2.</span> ä¸»è¦é—®é¢˜åˆ—è¡¨
<span class="hljs-bullet">3.</span> ä¼˜åŒ–å»ºè®®ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼‰
<span class="hljs-bullet">4.</span> ä¼˜å…ˆçº§æ ‡æ³¨
</code></pre>
<p><strong>æ¨¡æ¿2ï¼šæŠ€æœ¯æ–‡æ¡£å†™ä½œåŠ©æ‰‹</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä½ æ˜¯æŠ€æœ¯æ–‡æ¡£ä¸“å®¶ï¼Œå¸®åŠ©æˆ‘åˆ›ä½œé«˜è´¨é‡çš„æŠ€æœ¯æ–‡ç« ã€‚è¦æ±‚ï¼š
<span class="hljs-deletion">- ç”¨é€šä¿—è¯­è¨€è§£é‡Šå¤æ‚æ¦‚å¿µï¼ˆå‡è®¾è¯»è€…æ˜¯èªæ˜çš„æ–°æ‰‹ï¼‰</span>
<span class="hljs-deletion">- æ¯ä¸ªæŠ€æœ¯ç‚¹éƒ½é…å®é™…ä¾‹å­</span>
<span class="hljs-deletion">- ç»“æ„æ¸…æ™°ï¼šå¤§çº²â†’è¯¦è§£â†’æ€»ç»“â†’å®æˆ˜</span>
<span class="hljs-deletion">- é¿å…æœ¯è¯­å †ç Œï¼Œå¿…è¦æ—¶ç”¨ç±»æ¯”</span>

è¯­æ°”ï¼š60%ä¸“ä¸š + 40%å¯¹è¯å¼
ç›®æ ‡è¯»è€…ï¼šæœ‰2-3å¹´ç»éªŒçš„å¼€å‘è€…
</code></pre>
<p><strong>æ¨¡æ¿3ï¼šäº§å“éœ€æ±‚åˆ†æå¸ˆ</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä½ æ˜¯äº§å“éœ€æ±‚åˆ†æå¸ˆï¼Œè´Ÿè´£ï¼š
<span class="hljs-deletion">- å°†æ¨¡ç³Šçš„æƒ³æ³•è½¬åŒ–ä¸ºæ¸…æ™°çš„éœ€æ±‚æ–‡æ¡£</span>
<span class="hljs-deletion">- è¯†åˆ«æ½œåœ¨çš„è¾¹ç•Œæƒ…å†µå’Œé£é™©</span>
<span class="hljs-deletion">- è¯„ä¼°å®ç°éš¾åº¦å’Œä¼˜å…ˆçº§</span>
<span class="hljs-deletion">- æä¾›æŠ€æœ¯æ–¹æ¡ˆå»ºè®®</span>

è¾“å‡ºæ ¼å¼ï¼š
ã€éœ€æ±‚æ¦‚è¿°ã€‘
ã€ç”¨æˆ·åœºæ™¯ã€‘ï¼ˆ3-5ä¸ªå…·ä½“åœºæ™¯ï¼‰
ã€åŠŸèƒ½æ¸…å•ã€‘ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
ã€æŠ€æœ¯æŒ‘æˆ˜ã€‘
ã€é£é™©è¯„ä¼°ã€‘
</code></pre>
<p><strong>æ¨¡æ¿4ï¼šæ•°æ®åˆ†æé¡¾é—®</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ æ˜¯æ•°æ®åˆ†æé¡¾é—®ï¼Œä¸“é•¿ï¼š
<span class="hljs-bullet">-</span> æ•°æ®æ¸…æ´—å’Œé¢„å¤„ç†
<span class="hljs-bullet">-</span> æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰
<span class="hljs-bullet">-</span> å¯è§†åŒ–æ–¹æ¡ˆè®¾è®¡
<span class="hljs-bullet">-</span> æ´å¯Ÿæç‚¼å’Œå†³ç­–å»ºè®®

åˆ†ææµç¨‹ï¼š
<span class="hljs-bullet">1.</span> æ•°æ®æ¦‚è§ˆï¼ˆå½¢çŠ¶ã€ç±»å‹ã€ç¼ºå¤±å€¼ï¼‰
<span class="hljs-bullet">2.</span> å…³é”®å‘ç°ï¼ˆç”¨æ•°å­—è¯´è¯ï¼‰
<span class="hljs-bullet">3.</span> å¯è§†åŒ–å»ºè®®ï¼ˆå…·ä½“åˆ°å›¾è¡¨ç±»å‹ï¼‰
<span class="hljs-bullet">4.</span> è¡ŒåŠ¨å»ºè®®ï¼ˆè‡³å°‘3æ¡ï¼‰

å›ç­”ä¸­å¿…é¡»åŒ…å«å¯è¿è¡Œçš„Pythonä»£ç 
</code></pre>
<p><strong>æ¨¡æ¿5ï¼šå†…å®¹åˆ›ä½œç¼–è¾‘</strong></p>
<pre><code class="hljs language-diff" lang="diff">ä½ æ˜¯å†…å®¹ç¼–è¾‘ï¼Œè´Ÿè´£ä¼˜åŒ–æ–‡ç« ï¼š
<span class="hljs-deletion">- å»é™¤AIå‘³ï¼ˆé¿å…"å› æ­¤"ã€"ç»¼ä¸Šæ‰€è¿°"ç­‰ï¼‰</span>
<span class="hljs-deletion">- å¢å¼ºå¯è¯»æ€§ï¼ˆçŸ­å¥ã€æ®µè½æ§åˆ¶åœ¨3-4è¡Œï¼‰</span>
<span class="hljs-deletion">- èå…¥çœŸå®æƒ…æ„Ÿå’Œä¸ªäººè‰²å½©</span>
<span class="hljs-deletion">- SEOä¼˜åŒ–ï¼ˆè‡ªç„¶èå…¥å…³é”®è¯ï¼‰</span>

ç¼–è¾‘åŸåˆ™ï¼š
<span class="hljs-deletion">- ä¿ç•™ä½œè€…çš„ç‹¬ç‰¹å£°éŸ³</span>
<span class="hljs-deletion">- ç”¨"å…¶å®"ã€"è¯´å®è¯"æ›¿ä»£ä¹¦é¢è¯­</span>
<span class="hljs-deletion">- å¤šç”¨å…·ä½“ä¾‹å­ï¼Œå°‘ç”¨æŠ½è±¡æ¦‚å¿µ</span>
<span class="hljs-deletion">- æ¯æ®µåªè¡¨è¾¾ä¸€ä¸ªæ ¸å¿ƒæ€æƒ³</span>
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>æ²¡è®¾ç½®ç³»ç»Ÿæç¤ºè¯</strong>ï¼šæ¯æ¬¡éƒ½è¦è§£é‡Š"æˆ‘éœ€è¦ä¸“ä¸šçš„ä»£ç å®¡æŸ¥"ï¼Œå›ç­”å¸¸å¸¸åé¢˜</li>
<li><strong>è®¾ç½®å</strong>ï¼šClaudeè‡ªåŠ¨è¿›å…¥"ä¸“å®¶æ¨¡å¼"ï¼Œå›ç­”ç›´å‡»è¦å®³ï¼Œæ ¼å¼ç»Ÿä¸€</li>
</ul>
<p>è¿™ä¸ªåŠŸèƒ½è®©æˆ‘çš„å·¥ä½œæ•ˆç‡ç›´æ¥ç¿»å€ã€‚å¼ºçƒˆå»ºè®®ä½ èŠ±5åˆ†é’Ÿè®¾ç½®ä¸€ä¸‹ã€‚</p>
<hr/>
<h4 data-id="heading-5">æŠ€å·§3ï¼šXMLæ ‡ç­¾ - è®©Claudeç†è§£å¤æ‚ä»»åŠ¡çš„ç§˜å¯†æ­¦å™¨</h4>
<p>è¿™ä¸ªæŠ€å·§è®©æˆ‘çš„Claudeä½¿ç”¨ä½“éªŒç›´æ¥ä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨XMLæ ‡ç­¾ï¼Ÿ</strong>
ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šä»»åŠ¡ä¸€å¤æ‚ï¼ŒClaudeå°±å¼€å§‹"ç†è§£åå·®"ï¼ŸXMLæ ‡ç­¾å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚å®ƒæŠŠä¿¡æ¯ç»“æ„åŒ–ï¼Œè®©Claudeæ¸…æ¥šåœ°çŸ¥é“å“ªéƒ¨åˆ†æ˜¯èƒŒæ™¯ã€å“ªéƒ¨åˆ†æ˜¯ä»»åŠ¡ã€å“ªéƒ¨åˆ†æ˜¯é™åˆ¶ã€‚</p>
<p><strong>å¸¸ç”¨æ ‡ç­¾</strong>ï¼š</p>
<ul>
<li><code>&lt;context&gt;</code> - èƒŒæ™¯ä¿¡æ¯</li>
<li><code>&lt;task&gt;</code> - å…·ä½“ä»»åŠ¡</li>
<li><code>&lt;examples&gt;</code> - ç¤ºä¾‹</li>
<li><code>&lt;constraints&gt;</code> - çº¦æŸæ¡ä»¶</li>
<li><code>&lt;output_format&gt;</code> - è¾“å‡ºæ ¼å¼</li>
</ul>
<p><strong>3ä¸ªå®æˆ˜æ¨¡æ¿</strong>ï¼š</p>
<p><strong>æ¨¡æ¿1ï¼šä»£ç é‡æ„è¯·æ±‚</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context</span>&gt;</span></span>
è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·è®¤è¯æ¨¡å—ï¼Œç›®å‰ä½¿ç”¨JWT tokenï¼Œä½†å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚
ä»£ç åº“ï¼šPython FastAPI
å½“å‰é—®é¢˜ï¼štokenéªŒè¯è€—æ—¶è¿‡é•¿ï¼Œå½±å“APIå“åº”é€Ÿåº¦
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">context</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">task</span>&gt;</span></span>
é‡æ„auth.pyä¸­çš„tokenéªŒè¯é€»è¾‘ï¼Œè¦æ±‚ï¼š
<span class="hljs-bullet">1.</span> ä¼˜åŒ–éªŒè¯é€Ÿåº¦ï¼ˆç›®æ ‡ï¼šé™ä½50%è€—æ—¶ï¼‰
<span class="hljs-bullet">2.</span> ä¿æŒå®‰å…¨æ€§ä¸å˜
<span class="hljs-bullet">3.</span> æ·»åŠ ç¼“å­˜æœºåˆ¶
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">task</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">constraints</span>&gt;</span></span>
<span class="hljs-bullet">-</span> ä¸èƒ½æ”¹å˜APIæ¥å£
<span class="hljs-bullet">-</span> å¿…é¡»å‘åå…¼å®¹æ—§token
<span class="hljs-bullet">-</span> ä»£ç é£æ ¼éµå¾ªPEP 8
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">constraints</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">output_format</span>&gt;</span></span>
<span class="hljs-bullet">1.</span> é‡æ„åçš„å®Œæ•´ä»£ç 
<span class="hljs-bullet">2.</span> æ€§èƒ½å¯¹æ¯”åˆ†æ
<span class="hljs-bullet">3.</span> æµ‹è¯•ç”¨ä¾‹
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">output_format</span>&gt;</span></span>
</code></pre>
<p><strong>æ¨¡æ¿2ï¼šæ–‡æ¡£åˆ†æ</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">context</span>&gt;</span>
è¿™æ˜¯ä¸€ä»½äº§å“éœ€æ±‚æ–‡æ¡£ï¼Œæ¶‰åŠæ–°çš„æ”¯ä»˜åŠŸèƒ½ã€‚
ç›®æ ‡ç”¨æˆ·ï¼šç”µå•†å¹³å°å•†å®¶
æŠ€æœ¯æ ˆï¼šReact + Node.js
<span class="hljs-tag">&lt;/<span class="hljs-name">context</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">task</span>&gt;</span>
åˆ†æè¿™ä»½éœ€æ±‚æ–‡æ¡£ï¼Œè¯†åˆ«ï¼š
- æŠ€æœ¯å®ç°éš¾ç‚¹
- æ½œåœ¨çš„å®‰å…¨é£é™©
- è¾¹ç•Œæƒ…å†µ
- å¼€å‘æ—¶é—´ä¼°ç®—
<span class="hljs-tag">&lt;/<span class="hljs-name">task</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">examples</span>&gt;</span>
è¾¹ç•Œæƒ…å†µç¤ºä¾‹ï¼š
- ç”¨æˆ·åœ¨æ”¯ä»˜è¿‡ç¨‹ä¸­æ–­ç½‘
- å¹¶å‘æ”¯ä»˜å†²çª
- é€€æ¬¾æµç¨‹å¼‚å¸¸
<span class="hljs-tag">&lt;/<span class="hljs-name">examples</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">output_format</span>&gt;</span>
ã€æŠ€æœ¯éš¾ç‚¹ã€‘ï¼ˆ1-5åˆ†æ ‡æ³¨éš¾åº¦ï¼‰
ã€å®‰å…¨é£é™©ã€‘ï¼ˆé«˜/ä¸­/ä½æ ‡æ³¨ç­‰çº§ï¼‰
ã€è¾¹ç•Œæƒ…å†µæ¸…å•ã€‘
ã€å¼€å‘æ—¶é—´ä¼°ç®—ã€‘ï¼ˆä¹è§‚/æ‚²è§‚/æœ€å¯èƒ½ï¼‰
<span class="hljs-tag">&lt;/<span class="hljs-name">output_format</span>&gt;</span>
</code></pre>
<p><strong>æ¨¡æ¿3ï¼šå¤šæ­¥éª¤ä»»åŠ¡</strong></p>
<pre><code class="hljs language-diff" lang="diff">&lt;task&gt;
å¸®æˆ‘å®ŒæˆæŠ€æœ¯åšå®¢åˆ›ä½œçš„å®Œæ•´æµç¨‹ï¼š

ç¬¬1æ­¥ï¼šä¸»é¢˜åˆ†æ
<span class="hljs-deletion">- åˆ†æ"React Hooksæœ€ä½³å®è·µ"è¿™ä¸ªä¸»é¢˜</span>
<span class="hljs-deletion">- è¯†åˆ«ç›®æ ‡å—ä¼—ç—›ç‚¹</span>
<span class="hljs-deletion">- åˆ—å‡º3-5ä¸ªæ ¸å¿ƒè¦ç‚¹</span>

ç¬¬2æ­¥ï¼šå¤§çº²è®¾è®¡
<span class="hljs-deletion">- åˆ›å»ºæ–‡ç« å¤§çº²ï¼ˆåŒ…å«å¼•è¨€ã€3-4ä¸ªä¸»è¦ç« èŠ‚ã€ç»“è®ºï¼‰</span>
<span class="hljs-deletion">- æ¯ä¸ªç« èŠ‚æ˜ç¡®è¾“å‡ºä»·å€¼</span>

ç¬¬3æ­¥ï¼šå†…å®¹åˆ›ä½œ
<span class="hljs-deletion">- åŸºäºå¤§çº²å†™å‡ºå®Œæ•´åˆç¨¿</span>
<span class="hljs-deletion">- èå…¥ä»£ç ç¤ºä¾‹</span>
<span class="hljs-deletion">- å­—æ•°æ§åˆ¶åœ¨2000-2500å­—</span>

ç¬¬4æ­¥ï¼šä¼˜åŒ–
<span class="hljs-deletion">- å»é™¤AIå‘³</span>
<span class="hljs-deletion">- SEOä¼˜åŒ–</span>
<span class="hljs-deletion">- å¯è¯»æ€§æå‡</span>
&lt;/task&gt;

&lt;constraints&gt;
<span class="hljs-deletion">- ç›®æ ‡è¯»è€…ï¼šæœ‰1-2å¹´Reactç»éªŒçš„å¼€å‘è€…</span>
<span class="hljs-deletion">- è¯­æ°”ï¼šä¸“ä¸š+å¯¹è¯å¼</span>
<span class="hljs-deletion">- å¿…é¡»åŒ…å«å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹</span>
&lt;/constraints&gt;
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>æ— ç»“æ„</strong>ï¼š"å¸®æˆ‘åˆ†æè¿™ä¸ªéœ€æ±‚æ–‡æ¡£" â†’ Claudeå¯èƒ½ä¼šæ¼æ‰å…³é”®ç‚¹</li>
<li><strong>XMLç»“æ„åŒ–</strong>ï¼šæ¸…æ™°æ ‡æ³¨è¦æ±‚ â†’ Claudeçš„å›ç­”å…¨é¢ä¸”å‡†ç¡®</li>
</ul>
<p>è¿™ä¸ªæŠ€å·§ç‰¹åˆ«é€‚åˆå¤æ‚ä»»åŠ¡ã€‚è¯•è¯•çœ‹ï¼Œä½ ä¼šçˆ±ä¸Šè¿™ç§ç²¾å‡†æ§åˆ¶æ„Ÿã€‚</p>
<hr/>
<h4 data-id="heading-6">æŠ€å·§4ï¼šFew-shot Examples - æ•™Claude"çœ‹æ ·å­¦æ ·"</h4>
<p>å°±åƒæ•™å°å­©å­¦ä¹ ä¸€æ ·ï¼Œç»™å‡ ä¸ªä¾‹å­æ•ˆæœæœ€å¥½ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯Few-shot Learningï¼Ÿ</strong>
ç®€å•è¯´ï¼Œå°±æ˜¯ç»™Claudeçœ‹å‡ ä¸ª"ç¤ºä¾‹ç­”æ¡ˆ"ï¼Œè®©å®ƒæ¨¡ä»¿ä½ æƒ³è¦çš„é£æ ¼å’Œæ ¼å¼ã€‚ç‰¹åˆ«é€‚åˆæ ¼å¼åŒ–ä»»åŠ¡ï¼Œæ¯”å¦‚æ•°æ®æå–ã€ä»£ç æ ¼å¼ç»Ÿä¸€ã€å†™ä½œé£æ ¼æ¨¡ä»¿ã€‚</p>
<p><strong>é»„é‡‘æ³•åˆ™</strong>ï¼š3-5ä¸ªç¤ºä¾‹æœ€ä½³ï¼Œå¤ªå°‘å­¦ä¸ä¼šï¼Œå¤ªå¤šåè€Œæ··ä¹±ã€‚</p>
<p><strong>3ä¸ªåº”ç”¨åœºæ™¯</strong>ï¼š</p>
<p><strong>åœºæ™¯1ï¼šä»£ç æ ¼å¼ç»Ÿä¸€</strong></p>
<pre><code class="hljs language-python" lang="python">ä»»åŠ¡ï¼šå°†æ‰€æœ‰å‡½æ•°æ³¨é‡Šç»Ÿä¸€ä¸ºGoogleé£æ ¼

ç¤ºä¾‹<span class="hljs-number">1</span>ï¼š
è¾“å…¥ï¼š
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-comment"># è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ</span>
    <span class="hljs-keyword">return</span> a + b

è¾“å‡ºï¼š
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params">a, b</span>):
    <span class="hljs-string">"""è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ

    Args:
        a (int): ç¬¬ä¸€ä¸ªåŠ æ•°
        b (int): ç¬¬äºŒä¸ªåŠ æ•°

    Returns:
        int: ä¸¤ä¸ªæ•°çš„å’Œ
    """</span>
    <span class="hljs-keyword">return</span> a + b

ç¤ºä¾‹<span class="hljs-number">2</span>ï¼š
è¾“å…¥ï¼š
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>(<span class="hljs-params"><span class="hljs-built_in">id</span></span>):
    <span class="hljs-comment"># æ ¹æ®IDè·å–ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> db.query(<span class="hljs-built_in">id</span>)

è¾“å‡ºï¼š
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_user</span>(<span class="hljs-params"><span class="hljs-built_in">id</span></span>):
    <span class="hljs-string">"""æ ¹æ®IDè·å–ç”¨æˆ·ä¿¡æ¯

    Args:
        id (str): ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦

    Returns:
        dict: ç”¨æˆ·ä¿¡æ¯å­—å…¸ï¼ŒåŒ…å«nameã€emailç­‰å­—æ®µ
        None: å¦‚æœç”¨æˆ·ä¸å­˜åœ¨
    """</span>
    <span class="hljs-keyword">return</span> db.query(<span class="hljs-built_in">id</span>)

ç°åœ¨è¯·å¤„ç†ä»¥ä¸‹å‡½æ•°ï¼š
[ä½ çš„ä»£ç ]
</code></pre>
<p><strong>åœºæ™¯2ï¼šå†™ä½œé£æ ¼æ¨¡ä»¿</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ä»»åŠ¡ï¼šå°†æŠ€æœ¯è¯´æ˜æ”¹å†™ä¸ºå¯¹è¯å¼é£æ ¼

ç¤ºä¾‹<span class="hljs-number">1</span>ï¼š
è¾“å…¥ï¼šAPIè°ƒç”¨é¢‘ç‡å—åˆ°é™åˆ¶ï¼Œè¶…è¿‡é˜ˆå€¼å°†è¿”å›<span class="hljs-number">429</span>é”™è¯¯ã€‚
è¾“å‡ºï¼šæ³¨æ„å“¦ï¼ŒAPIä¸èƒ½æ— é™åˆ¶è°ƒç”¨ã€‚å¦‚æœä½ è¯·æ±‚å¤ªé¢‘ç¹ï¼Œä¼šæ”¶åˆ°<span class="hljs-number">429</span>é”™è¯¯ï¼Œæ„æ€æ˜¯<span class="hljs-string">"æ…¢ç‚¹ï¼Œè®©æœåŠ¡å™¨æ­‡ä¼šå„¿"</span>ã€‚

ç¤ºä¾‹<span class="hljs-number">2</span>ï¼š
è¾“å…¥ï¼šä½¿ç”¨JWT tokenè¿›è¡Œèº«ä»½è®¤è¯ï¼Œtokenæœ‰æ•ˆæœŸä¸º<span class="hljs-number">24</span>å°æ—¶ã€‚
è¾“å‡ºï¼šç™»å½•åä½ ä¼šæ‹¿åˆ°ä¸€ä¸ªJWT tokenï¼ŒæŠŠå®ƒå½“ä½œä½ çš„<span class="hljs-string">"é€šè¡Œè¯"</span>ã€‚è¿™ä¸ªé€šè¡Œè¯<span class="hljs-number">24</span>å°æ—¶æœ‰æ•ˆï¼Œè¿‡æœŸåéœ€è¦é‡æ–°ç™»å½•ã€‚

ç¤ºä¾‹<span class="hljs-number">3</span>ï¼š
è¾“å…¥ï¼šæ•°æ®åº“è¿æ¥é‡‡ç”¨è¿æ¥æ± æŠ€æœ¯ï¼Œæœ€å¤§è¿æ¥æ•°ä¸º<span class="hljs-number">100</span>ã€‚
è¾“å‡ºï¼šä¸ºäº†æå‡æ€§èƒ½ï¼Œæˆ‘ä»¬ç”¨äº†è¿æ¥æ± æŠ€æœ¯ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ª<span class="hljs-string">"è¿æ¥ä»“åº“"</span>ï¼Œé‡Œé¢å‡†å¤‡äº†<span class="hljs-number">100</span>ä¸ªè¿æ¥ï¼Œç”¨å®Œå°±è¿˜å›å»ï¼Œä¸‹æ¬¡ç›´æ¥å–ï¼Œä¸ç”¨é‡æ–°å»ºç«‹ã€‚

ç°åœ¨è¯·æ”¹å†™ï¼š
[ä½ çš„æŠ€æœ¯æ–‡æœ¬]
</code></pre>
<p><strong>åœºæ™¯3ï¼šæ•°æ®æå–ä»»åŠ¡</strong></p>
<pre><code class="hljs language-css" lang="css">ä»»åŠ¡ï¼šä»äº§å“æè¿°ä¸­æå–ç»“æ„åŒ–ä¿¡æ¯

ç¤ºä¾‹<span class="hljs-number">1</span>ï¼š
è¾“å…¥ï¼šiPhone <span class="hljs-number">15</span> Proï¼Œ<span class="hljs-number">256</span>GBå­˜å‚¨ï¼Œé’›é‡‘å±æè´¨ï¼Œæ”¯æŒ<span class="hljs-number">5</span>Gï¼Œä»·æ ¼<span class="hljs-number">8999</span>å…ƒ
è¾“å‡ºï¼š
{
  "product": <span class="hljs-string">"iPhone 15 Pro"</span>,
  <span class="hljs-string">"storage"</span>: <span class="hljs-string">"256GB"</span>,
  <span class="hljs-string">"material"</span>: <span class="hljs-string">"é’›é‡‘å±"</span>,
  <span class="hljs-string">"connectivity"</span>: <span class="hljs-string">"5G"</span>,
  <span class="hljs-string">"price"</span>: <span class="hljs-number">8999</span>
}

ç¤ºä¾‹<span class="hljs-number">2</span>ï¼š
è¾“å…¥ï¼šMacBook Air M2ï¼Œ<span class="hljs-number">8</span>æ ¸CPUï¼Œ<span class="hljs-number">13.6</span>è‹±å¯¸è§†ç½‘è†œæ˜¾ç¤ºå±ï¼Œåˆå¤œè‰²ï¼Œ<span class="hljs-number">9499</span>å…ƒèµ·
è¾“å‡ºï¼š
{
  "product": <span class="hljs-string">"MacBook Air M2"</span>,
  <span class="hljs-string">"cpu"</span>: <span class="hljs-string">"8æ ¸"</span>,
  <span class="hljs-string">"screen"</span>: <span class="hljs-string">"13.6è‹±å¯¸è§†ç½‘è†œ"</span>,
  <span class="hljs-string">"color"</span>: <span class="hljs-string">"åˆå¤œè‰²"</span>,
  <span class="hljs-string">"price"</span>: <span class="hljs-number">9499</span>
}

ç°åœ¨è¯·æå–ï¼š
<span class="hljs-selector-attr">[ä½ çš„äº§å“æè¿°]</span>
</code></pre>
<p><strong>æˆ‘çš„ç»éªŒ</strong>ï¼šè´¨é‡æ¯”æ•°é‡é‡è¦ã€‚3ä¸ªé«˜è´¨é‡ç¤ºä¾‹ &gt; 10ä¸ªéšæ„çš„ä¾‹å­ã€‚è€Œä¸”ç¤ºä¾‹è¦è¦†ç›–ä¸åŒæƒ…å†µï¼ˆç®€å•ã€å¤æ‚ã€è¾¹ç•Œæƒ…å†µï¼‰ã€‚</p>
<hr/>
<h4 data-id="heading-7">æŠ€å·§5ï¼šExtended Thinking - è®©Claude"æ·±åº¦æ€è€ƒ"</h4>
<p>æœ‰æ—¶å€™æ…¢å°±æ˜¯å¿«ï¼Œè®©Claudeå¤šæƒ³æƒ³çœŸçš„ä¸ä¸€æ ·ã€‚</p>
<p><strong>Extended Thinkingæ˜¯ä»€ä¹ˆï¼Ÿ</strong>
è¿™æ˜¯Claude 4çš„æ–°åŠŸèƒ½ï¼Œå¯ä»¥ç»™Claudeæœ€é«˜32K tokensçš„"æ€è€ƒé¢„ç®—"ï¼ˆå¤§æ¦‚24,000å­—çš„æ€è€ƒè¿‡ç¨‹ï¼‰ã€‚å®ƒä¼šåœ¨å›ç­”å‰å…ˆæ·±åº¦æ€è€ƒï¼Œæ¨ç†è¿‡ç¨‹ä½ éƒ½èƒ½çœ‹åˆ°ã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¤æ‚ä»£ç bugè°ƒè¯•</li>
<li>å¤šè½®æ¨ç†é—®é¢˜ï¼ˆæ¯”å¦‚"ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•æ…¢ï¼Ÿ"ï¼‰</li>
<li>æˆ˜ç•¥è§„åˆ’åˆ†æ</li>
<li>éœ€è¦æƒè¡¡å¤šä¸ªå› ç´ çš„å†³ç­–</li>
</ul>
<p><strong>å¦‚ä½•è§¦å‘</strong>ï¼š</p>
<ol>
<li><strong>ç›´æ¥è¦æ±‚</strong>ï¼š"è¯·ä¸€æ­¥æ­¥æ€è€ƒè¿™ä¸ªé—®é¢˜"</li>
<li><strong>å¼€å¯Extended Thinkingæ¨¡å¼</strong>ï¼ˆåœ¨è®¾ç½®ä¸­ï¼‰</li>
</ol>
<p><strong>2ä¸ªå®æˆ˜æ¡ˆä¾‹</strong>ï¼š</p>
<p><strong>æ¡ˆä¾‹1ï¼šå¤æ‚bugè°ƒè¯•</strong></p>
<pre><code class="hljs language-diff" lang="diff">&lt;task&gt;
è¿™æ®µä»£ç æœ‰ä¸€ä¸ªéš¾ä»¥å¤ç°çš„bugï¼Œç”¨æˆ·æŠ¥å‘Šåœ¨é«˜å¹¶å‘æ—¶å¶å°”ä¼šå‡ºç°æ•°æ®ä¸ä¸€è‡´ã€‚
è¯·ä½¿ç”¨Extended Thinkingæ·±åº¦åˆ†æå¯èƒ½çš„åŸå› ã€‚

[ä»£ç ç²˜è´´]

è¦æ±‚ï¼š
<span class="hljs-deletion">- é€æ­¥åˆ†ææ¯ä¸ªå¯èƒ½çš„åŸå› </span>
<span class="hljs-deletion">- è€ƒè™‘å¹¶å‘ã€é”æœºåˆ¶ã€æ•°æ®åº“äº‹åŠ¡ç­‰å› ç´ </span>
<span class="hljs-deletion">- ç»™å‡ºæœ€å¯èƒ½çš„3ä¸ªåŸå› åŠè§£å†³æ–¹æ¡ˆ</span>
&lt;/task&gt;
</code></pre>
<p><strong>æ¡ˆä¾‹2ï¼šå•†ä¸šç­–ç•¥åˆ†æ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">task</span>&gt;</span></span>
æˆ‘ä»¬å…¬å¸è€ƒè™‘è¿›å…¥AIå·¥å…·å¸‚åœºï¼Œè¯·ç”¨Extended Thinkingåˆ†æï¼š
<span class="hljs-bullet">1.</span> å¸‚åœºæœºä¼šï¼ˆTAMã€ç«äº‰æ ¼å±€ï¼‰
<span class="hljs-bullet">2.</span> æˆ‘ä»¬çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿
<span class="hljs-bullet">3.</span> é£é™©å› ç´ 
<span class="hljs-bullet">4.</span> è¿›å…¥ç­–ç•¥å»ºè®®

èƒŒæ™¯ï¼š
<span class="hljs-bullet">-</span> æˆ‘ä»¬æ˜¯ä¸€å®¶B2B SaaSå…¬å¸ï¼Œæœ‰10ä¸‡ä¼ä¸šç”¨æˆ·
<span class="hljs-bullet">-</span> ç°æœ‰äº§å“æ˜¯é¡¹ç›®ç®¡ç†å·¥å…·
<span class="hljs-bullet">-</span> æŠ€æœ¯å›¢é˜Ÿ50äººï¼Œå…¶ä¸­5äººæœ‰AIç»éªŒ
<span class="hljs-bullet">-</span> é¢„ç®—500ä¸‡ç¾å…ƒ

è¯·æ·±åº¦æ€è€ƒåç»™å‡ºå®Œæ•´çš„æˆ˜ç•¥åˆ†ææŠ¥å‘Šã€‚
<span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">task</span>&gt;</span></span>
</code></pre>
<p><strong>é«˜çº§æŠ€å·§</strong>ï¼š</p>
<p><strong>è°ƒæ•´æ€è€ƒé¢„ç®—</strong>ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è¯·ä½¿ç”¨æœ€å¤§æ€è€ƒé¢„ç®—ï¼ˆ32K tokensï¼‰åˆ†æè¿™ä¸ªç³»ç»Ÿæ¶æ„è®¾è®¡ï¼Œ
é‡ç‚¹è€ƒè™‘ï¼š
<span class="hljs-deletion">- å¯æ‰©å±•æ€§ï¼ˆæœªæ¥ç”¨æˆ·é‡10å€å¢é•¿ï¼‰</span>
<span class="hljs-deletion">- å¯ç»´æŠ¤æ€§ï¼ˆæ–°äººèƒ½å¦å¿«é€Ÿä¸Šæ‰‹ï¼‰</span>
<span class="hljs-deletion">- æˆæœ¬ï¼ˆæœåŠ¡å™¨ã€æ•°æ®åº“ã€CDNæˆæœ¬é¢„ä¼°ï¼‰</span>
<span class="hljs-deletion">- é£é™©ï¼ˆå•ç‚¹æ•…éšœã€æ•°æ®ä¸¢å¤±é£é™©ï¼‰</span>

[ç³»ç»Ÿæ¶æ„å›¾]
</code></pre>
<p><strong>æŸ¥çœ‹æ€è€ƒè¿‡ç¨‹</strong>ï¼š
å¼€å¯Extended Thinkingåï¼ŒClaudeä¼šå±•ç¤ºæ€è€ƒæ­¥éª¤ã€‚ä½ å¯ä»¥çœ‹åˆ°å®ƒå¦‚ä½•ä¸€æ­¥æ­¥æ¨ç†ï¼Œè¿™å¯¹å­¦ä¹ å’Œè°ƒè¯•å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<p><strong>ç»„åˆä½¿ç”¨</strong>ï¼š
Extended Thinking + Projectsæ•ˆæœæœ€ä½³ã€‚Claudeå¯ä»¥åŸºäºé¡¹ç›®çŸ¥è¯†åº“æ·±åº¦æ€è€ƒã€‚</p>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>ï¼š</p>
<ul>
<li><strong>æ™®é€šæ¨¡å¼</strong>ï¼šå¿«é€Ÿç»™å‡ºç­”æ¡ˆï¼Œä½†å¯èƒ½å¿½ç•¥ç»†èŠ‚</li>
<li><strong>Extended Thinking</strong>ï¼šæ·±åº¦æ¨ç†ï¼Œè€ƒè™‘å¤šä¸ªè§’åº¦ï¼Œæ›´å¯é </li>
</ul>
<p>è¿™ä¸ªåŠŸèƒ½å°±åƒç»™Claudeè£…äº†ä¸€ä¸ª"æ·±åº¦æ€è€ƒæ¨¡å¼"ã€‚é‡åˆ°å¤æ‚é—®é¢˜ï¼Œåˆ«æ€¥ç€è¦ç­”æ¡ˆï¼Œè®©å®ƒæ…¢æ…¢æƒ³ã€‚</p>
<hr/>
<h3 data-id="heading-8">ç¬¬ä¸‰éƒ¨åˆ†ï¼šé«˜çº§åŠŸèƒ½æ·±åº¦ä½¿ç”¨</h3>
<h4 data-id="heading-9">æŠ€å·§6ï¼šArtifacts - 3åˆ†é’Ÿåšä¸€ä¸ªäº¤äº’å¼å·¥å…·</h4>
<p>ç¬¬ä¸€æ¬¡ç”¨Artifactsçš„æ—¶å€™ï¼Œæˆ‘çœŸçš„éœ‡æ’¼åˆ°äº†ã€‚</p>
<p><strong>Artifactsæ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ç®€å•è¯´ï¼Œå°±æ˜¯Claudeåˆ›å»ºçš„"ç‹¬ç«‹å†…å®¹"â€”â€”å¯ä»¥æ˜¯äº¤äº’å¼ç½‘é¡µã€ä»£ç å·¥å…·ã€æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼Œç”šè‡³æ˜¯å°æ¸¸æˆã€‚å…¨çƒç”¨æˆ·å·²ç»åˆ›å»ºäº†5äº¿å¤šä¸ªArtifactsï¼Œè¿™ä¸ªæ•°å­—è¯´æ˜å®ƒçœŸçš„å¾ˆå®ç”¨ã€‚</p>
<p><strong>2025å¹´çš„æ–°ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>MCPé›†æˆï¼ˆå¯ä»¥è¿æ¥GitHubã€Notionç­‰å·¥å…·ï¼‰</li>
<li>æŒä¹…åŒ–å­˜å‚¨ï¼ˆä½ çš„Artifactsä¸ä¼šä¸¢å¤±ï¼‰</li>
<li>æ›´å¼ºçš„äº¤äº’æ€§</li>
</ul>
<p><strong>æ”¯æŒçš„ç±»å‹</strong>ï¼š</p>
<ul>
<li>äº¤äº’å¼ç½‘é¡µï¼ˆHTML/CSS/JavaScriptï¼‰</li>
<li>æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨ã€dashboardï¼‰</li>
<li>ä»£ç å·¥å…·ï¼ˆè®¡ç®—å™¨ã€è½¬æ¢å™¨ã€ç”Ÿæˆå™¨ï¼‰</li>
<li>æ–‡æ¡£å’Œæ•™ç¨‹ï¼ˆMarkdownæ ¼å¼ï¼‰</li>
</ul>
<p><strong>3ä¸ªå®æˆ˜æ¡ˆä¾‹</strong>ï¼š</p>
<p><strong>æ¡ˆä¾‹1ï¼šæ•°æ®å¯è§†åŒ–dashboard</strong></p>
<pre><code class="hljs language-diff" lang="diff">è¯·åˆ›å»ºä¸€ä¸ªArtifactï¼Œå±•ç¤ºä»¥ä¸‹é”€å”®æ•°æ®ï¼š

æ•°æ®ï¼š
2024å¹´Q1: 120ä¸‡
2024å¹´Q2: 150ä¸‡
2024å¹´Q3: 180ä¸‡
2024å¹´Q4: 210ä¸‡

è¦æ±‚ï¼š
<span class="hljs-deletion">- ç±»å‹ï¼šäº¤äº’å¼æŸ±çŠ¶å›¾</span>
<span class="hljs-deletion">- åŠŸèƒ½ï¼šé¼ æ ‡æ‚¬åœæ˜¾ç¤ºå…·ä½“æ•°å€¼</span>
<span class="hljs-deletion">- æ ·å¼ï¼šç°ä»£ç®€çº¦é£æ ¼ï¼Œä½¿ç”¨è“è‰²æ¸å˜</span>
<span class="hljs-deletion">- é¢å¤–æ˜¾ç¤ºï¼šåŒæ¯”å¢é•¿ç‡</span>
</code></pre>
<p><strong>æ¡ˆä¾‹2ï¼šäº¤äº’å¼æ•™ç¨‹</strong></p>
<pre><code class="hljs language-diff" lang="diff">åˆ›å»ºä¸€ä¸ªArtifactï¼Œæ•™æ–°æ‰‹å¦‚ä½•ä½¿ç”¨Gitçš„åŸºæœ¬å‘½ä»¤ã€‚

è¦æ±‚ï¼š
<span class="hljs-deletion">- æ ¼å¼ï¼šåˆ†æ­¥éª¤æ•™ç¨‹</span>
<span class="hljs-deletion">- æ¯æ­¥éƒ½æœ‰ä»£ç ç¤ºä¾‹</span>
<span class="hljs-deletion">- åŒ…å«å¸¸è§é”™è¯¯å’Œè§£å†³æ–¹æ³•</span>
<span class="hljs-deletion">- æ·»åŠ "è¯•ä¸€è¯•"æŒ‰é’®ï¼Œæ¨¡æ‹Ÿå‘½ä»¤æ‰§è¡Œç»“æœ</span>
<span class="hljs-deletion">- é£æ ¼ï¼šå‹å¥½ã€æ— æœ¯è¯­</span>
</code></pre>
<p><strong>æ¡ˆä¾‹3ï¼šå®ç”¨å·¥å…· - JSONæ ¼å¼åŒ–å™¨</strong></p>
<pre><code class="hljs language-diff" lang="diff">åˆ›å»ºä¸€ä¸ªJSONæ ¼å¼åŒ–å·¥å…·Artifactï¼š

åŠŸèƒ½ï¼š
<span class="hljs-deletion">- è¾“å…¥ï¼šæœªæ ¼å¼åŒ–çš„JSONå­—ç¬¦ä¸²</span>
<span class="hljs-deletion">- å¤„ç†ï¼šè‡ªåŠ¨æ ¼å¼åŒ–ã€éªŒè¯è¯­æ³•ã€é«˜äº®æ˜¾ç¤º</span>
<span class="hljs-deletion">- è¾“å‡ºï¼šç¾åŒ–åçš„JSON + é”™è¯¯æç¤º</span>
<span class="hljs-deletion">- é¢å¤–ï¼šæä¾›"å‹ç¼©"å’Œ"ç¾åŒ–"ä¸¤ç§æ¨¡å¼</span>

äº¤äº’ï¼š
<span class="hljs-deletion">- å®æ—¶æ ¼å¼åŒ–ï¼ˆè¾“å…¥æ—¶ç«‹å³åé¦ˆï¼‰</span>
<span class="hljs-deletion">- ä¸€é”®å¤åˆ¶æ ¼å¼åŒ–ç»“æœ</span>
<span class="hljs-deletion">- é”™è¯¯è¡Œé«˜äº®æ˜¾ç¤º</span>

æ ·å¼ï¼š
<span class="hljs-deletion">- æš—è‰²ä¸»é¢˜</span>
<span class="hljs-deletion">- ä»£ç é«˜äº®ï¼ˆç”¨ä¸åŒé¢œè‰²åŒºåˆ†é”®ã€å€¼ã€æ•°å­—ï¼‰</span>
<span class="hljs-deletion">- å“åº”å¼è®¾è®¡ï¼ˆæ‰‹æœºä¸Šä¹Ÿå¥½ç”¨ï¼‰</span>
</code></pre>
<p><strong>å®Œæ•´æ“ä½œæµç¨‹</strong>ï¼š</p>
<ol>
<li>ç”¨è‡ªç„¶è¯­è¨€æè¿°ä½ è¦çš„å·¥å…·</li>
<li>Claudeè‡ªåŠ¨ç”ŸæˆArtifact</li>
<li>åœ¨å³ä¾§é¢„è§ˆæ•ˆæœ</li>
<li>å¦‚æœä¸æ»¡æ„ï¼Œç›´æ¥è¯´"æŠŠé¢œè‰²æ”¹æˆç»¿è‰²"æˆ–"å¢åŠ ä¸€ä¸ªæœç´¢åŠŸèƒ½"</li>
<li>æ»¡æ„åå¯ä»¥åˆ†äº«é“¾æ¥æˆ–å¯¼å‡ºä»£ç </li>
</ol>
<p><strong>æˆ‘çš„ä½¿ç”¨æŠ€å·§</strong>ï¼š</p>
<ul>
<li><strong>æ˜ç¡®è¯´æ˜äº¤äº’</strong>ï¼šåˆ«åªè¯´"åšä¸ªå›¾è¡¨"ï¼Œè¯´æ¸…æ¥š"ç‚¹å‡»å¯ä»¥ç­›é€‰æ•°æ®"</li>
<li><strong>é£æ ¼æè¿°å…·ä½“</strong>ï¼šåˆ«è¯´"å¥½çœ‹çš„è®¾è®¡"ï¼Œè¯´"æ‰å¹³åŒ–é£æ ¼ï¼Œç”¨#4A90E2è“è‰²"</li>
<li><strong>ç»™å‡ºçœŸå®æ•°æ®</strong>ï¼šç”¨å®é™…æ•°æ®æµ‹è¯•æ•ˆæœæ›´å‡†ç¡®</li>
</ul>
<p>ArtifactsçœŸçš„æ˜¯æˆ‘ç°åœ¨æœ€å¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ã€‚ä»¥å‰æˆ‘è¦èŠ±åŠå¤©åšçš„æ¼”ç¤ºå·¥å…·ï¼Œç°åœ¨3åˆ†é’Ÿå°±èƒ½æå®šã€‚</p>
<hr/>
<h4 data-id="heading-10">æŠ€å·§7ï¼šProjects - å‘Šåˆ«é‡å¤è§£é‡ŠèƒŒæ™¯</h4>
<p>è‡ªä»ç”¨äº†Projectsï¼Œæˆ‘å†ä¹Ÿä¸ç”¨æ¯æ¬¡éƒ½è§£é‡Šé¡¹ç›®èƒŒæ™¯äº†ã€‚</p>
<p><strong>Projectsæ˜¯ä»€ä¹ˆï¼Ÿ</strong>
å¯ä»¥æŠŠå®ƒç†è§£æˆç»™Claudeå‡†å¤‡çš„"çŸ¥è¯†åº“"ã€‚ä½ ä¸Šä¼ é¡¹ç›®ç›¸å…³çš„ä»£ç ã€æ–‡æ¡£ã€æ•°æ®ï¼ŒClaudeä¼šè‡ªåŠ¨è®°ä½ã€‚ä¹‹åæ¯æ¬¡å¯¹è¯ï¼Œå®ƒéƒ½èƒ½è°ƒç”¨è¿™äº›èƒŒæ™¯ä¿¡æ¯ï¼Œä¸ç”¨ä½ é‡å¤è¯´æ˜ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼š</p>
<ul>
<li><strong>200Kä¸Šä¸‹æ–‡å®¹é‡</strong>ï¼ˆå¤§çº¦500é¡µæ–‡æœ¬ï¼‰</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼ˆå¯ä»¥è®¾ç½®ä¸åŒæˆå‘˜çš„æƒé™ï¼‰</li>
<li><strong>ä¸Artifactsç»“åˆä½¿ç”¨</strong>ï¼ˆåŸºäºProjectçŸ¥è¯†åˆ›å»ºå·¥å…·ï¼‰</li>
</ul>
<p><strong>4æ­¥è®¾ç½®æµç¨‹</strong>ï¼š</p>
<p><strong>ç¬¬1æ­¥ï¼šåˆ›å»ºProject</strong></p>
<ul>
<li>ç‚¹å‡»"Projects"æŒ‰é’®</li>
<li>å‘½åï¼ˆæ¯”å¦‚"ç”µå•†åç«¯å¼€å‘"ï¼‰</li>
<li>é€‰æ‹©å›¢é˜Ÿæˆå‘˜ï¼ˆå¦‚æœæ˜¯å›¢é˜Ÿé¡¹ç›®ï¼‰</li>
</ul>
<p><strong>ç¬¬2æ­¥ï¼šä¸Šä¼ èƒŒæ™¯èµ„æ–™</strong>
æˆ‘é€šå¸¸ä¼šä¸Šä¼ ï¼š</p>
<ul>
<li>ä»£ç åº“ï¼ˆä¸»è¦æ–‡ä»¶ï¼Œä¸æ˜¯å…¨éƒ¨ï¼‰</li>
<li>æŠ€æœ¯æ–‡æ¡£ï¼ˆAPIæ–‡æ¡£ã€æ¶æ„å›¾ï¼‰</li>
<li>æ•°æ®å­—å…¸</li>
<li>å“ç‰ŒæŒ‡å—ï¼ˆå¦‚æœæ˜¯å†…å®¹é¡¹ç›®ï¼‰</li>
<li>ä¹‹å‰çš„å¯¹è¯è®°å½•</li>
</ul>
<p><strong>ç¬¬3æ­¥ï¼šè®¾ç½®Custom Instructions</strong></p>
<pre><code class="hljs language-erlang" lang="erlang">é¡¹ç›®ï¼šç”µå•†å¹³å°åç«¯å¼€å‘
æŠ€æœ¯æ ˆï¼šPython FastAPI + PostgreSQL + Redis
ä»£ç è§„èŒƒï¼šPEP <span class="hljs-number">8</span> + Googleé£æ ¼æ³¨é‡Š
æµ‹è¯•è¦æ±‚ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡&gt;<span class="hljs-number">80</span><span class="hljs-comment">%</span>

ä½ çš„è§’è‰²ï¼šåç«¯å¼€å‘ä¸“å®¶
å›ç­”é£æ ¼ï¼šç›´æ¥ç»™å‡ºå¯è¿è¡Œä»£ç ï¼Œé™„å¸¦ç®€è¦è¯´æ˜
</code></pre>
<p><strong>ç¬¬4æ­¥ï¼šå¼€å§‹å¯¹è¯</strong>
ç°åœ¨ä½ å¯ä»¥ç›´æ¥é—®ï¼š"ç”¨æˆ·æ¨¡å—çš„è®¤è¯é€»è¾‘æ€ä¹ˆä¼˜åŒ–ï¼Ÿ"
Claudeä¼šè‡ªåŠ¨è°ƒç”¨ä¸Šä¼ çš„ä»£ç å’Œæ–‡æ¡£ï¼Œç»™å‡ºé’ˆå¯¹æ€§å»ºè®®ã€‚</p>
<p><strong>5ä¸ªåº”ç”¨åœºæ™¯</strong>ï¼š</p>
<p><strong>åœºæ™¯1ï¼šé¡¹ç›®å¼€å‘</strong>
ä¸Šä¼ å†…å®¹ï¼š</p>
<ul>
<li>src/ç›®å½•ä¸‹çš„æ ¸å¿ƒä»£ç </li>
<li>README.md</li>
<li>æŠ€æœ¯æ¶æ„æ–‡æ¡£</li>
<li>APIè®¾è®¡æ–‡æ¡£</li>
</ul>
<p>æ•ˆæœï¼šClaudeç†è§£ä½ çš„æ•´ä¸ªé¡¹ç›®ç»“æ„ï¼Œå¯ä»¥è·¨æ–‡ä»¶åˆ†æé—®é¢˜ã€‚</p>
<p><strong>åœºæ™¯2ï¼šå†…å®¹åˆ›ä½œ</strong>
ä¸Šä¼ å†…å®¹ï¼š</p>
<ul>
<li>å“ç‰ŒæŒ‡å—</li>
<li>ä¹‹å‰çš„æ–‡ç« æ ·æœ¬</li>
<li>ç›®æ ‡å—ä¼—ç”»åƒ</li>
<li>SEOå…³é”®è¯åˆ—è¡¨</li>
</ul>
<p>æ•ˆæœï¼šClaudeç”Ÿæˆçš„å†…å®¹è‡ªåŠ¨ç¬¦åˆä½ çš„å“ç‰Œè°ƒæ€§å’Œé£æ ¼ã€‚</p>
<p><strong>åœºæ™¯3ï¼šå­¦ä¹ ç ”ç©¶</strong>
ä¸Šä¼ å†…å®¹ï¼š</p>
<ul>
<li>è¯¾ç¨‹è®²ä¹‰</li>
<li>è®ºæ–‡PDF</li>
<li>ç¬”è®°</li>
<li>ç»ƒä¹ é¢˜</li>
</ul>
<p>æ•ˆæœï¼šClaudeæˆä¸ºä½ çš„"ä¸ªäººå¯¼å¸ˆ"ï¼ŒåŸºäºè¯¾ç¨‹å†…å®¹å›ç­”é—®é¢˜ã€‚</p>
<p><strong>åœºæ™¯4ï¼šæ•°æ®åˆ†æ</strong>
ä¸Šä¼ å†…å®¹ï¼š</p>
<ul>
<li>æ•°æ®é›†CSV</li>
<li>æ•°æ®å­—å…¸</li>
<li>åˆ†ææ¡†æ¶æ–‡æ¡£</li>
<li>ä¹‹å‰çš„åˆ†ææŠ¥å‘Š</li>
</ul>
<p>æ•ˆæœï¼šClaudeç†è§£ä½ çš„æ•°æ®ç»“æ„ï¼Œå¿«é€Ÿç”Ÿæˆåˆ†æä»£ç ã€‚</p>
<p><strong>åœºæ™¯5ï¼šå›¢é˜Ÿåä½œ</strong>
ä¸Šä¼ å†…å®¹ï¼š</p>
<ul>
<li>å›¢é˜Ÿè§„èŒƒæ–‡æ¡£</li>
<li>é¡¹ç›®è·¯çº¿å›¾</li>
<li>ä¼šè®®è®°å½•</li>
<li>å†³ç­–æ—¥å¿—</li>
</ul>
<p>æ•ˆæœï¼šæ‰€æœ‰å›¢é˜Ÿæˆå‘˜ä¸Claudeå¯¹è¯æ—¶ï¼ŒåŸºäºç›¸åŒçš„èƒŒæ™¯çŸ¥è¯†ã€‚</p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£å‘½åæ¸…æ™°</strong>ï¼š<code>æ¶æ„è®¾è®¡.md</code> æ¯” <code>doc1.md</code> å¥½</li>
<li><strong>å®šæœŸæ›´æ–°</strong>ï¼šé¡¹ç›®æœ‰é‡å¤§å˜åŠ¨åŠæ—¶æ›´æ–°çŸ¥è¯†åº“</li>
<li><strong>æ§åˆ¶æ–‡ä»¶å¤§å°</strong>ï¼šä¸Šä¼ æ ¸å¿ƒå†…å®¹å³å¯ï¼Œä¸æ˜¯è¶Šå¤šè¶Šå¥½</li>
<li><strong>å¤šProjectç®¡ç†</strong>ï¼šä¸åŒé¡¹ç›®åˆ†å¼€ï¼Œåˆ«æ··åœ¨ä¸€èµ·</li>
</ul>
<p>æˆ‘ç°åœ¨æœ‰5ä¸ªæ´»è·ƒçš„Projectsï¼šå…¬å¸é¡¹ç›®ã€ä¸ªäººåšå®¢ã€å­¦ä¹ Pythonã€æ•°æ®åˆ†æã€å†™ä½œåŠ©æ‰‹ã€‚æ¯ä¸ªProjectå°±åƒä¸€ä¸ª"ä¸“å±Claude"ã€‚</p>
<hr/>
<h4 data-id="heading-11">æŠ€å·§8ï¼šMCPé›†æˆ - è¿æ¥ä½ çš„å·¥ä½œæµ</h4>
<p>MCPè®©ClaudeçœŸæ­£èå…¥äº†æˆ‘çš„å·¥ä½œæµã€‚</p>
<p><strong>MCPï¼ˆModel Context Protocolï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ç®€å•è¯´ï¼Œå°±æ˜¯è®©Claudeè¿æ¥ä½ æ—¥å¸¸ä½¿ç”¨çš„å·¥å…·â€”â€”GitHubã€Notionã€Slackã€Jiraç­‰ã€‚Claudeå¯ä»¥ç›´æ¥è¯»å–å’Œæ“ä½œè¿™äº›å·¥å…·ä¸­çš„æ•°æ®ã€‚</p>
<p><strong>å¯è¿æ¥çš„å·¥å…·</strong>ï¼ˆéƒ¨åˆ†åˆ—è¡¨ï¼‰ï¼š</p>
<ul>
<li>GitHubï¼ˆä»£ç å®¡æŸ¥ã€issueç®¡ç†ï¼‰</li>
<li>Notionï¼ˆæ–‡æ¡£è¯»å†™ï¼‰</li>
<li>Slackï¼ˆæ¶ˆæ¯å¤„ç†ï¼‰</li>
<li>Google Driveï¼ˆæ–‡ä»¶è®¿é—®ï¼‰</li>
<li>Jiraï¼ˆä»»åŠ¡ç®¡ç†ï¼‰</li>
<li>Calendarï¼ˆæ—¥ç¨‹å®‰æ’ï¼‰</li>
</ul>
<p><strong>3ä¸ªå®æˆ˜æ¡ˆä¾‹</strong>ï¼š</p>
<p><strong>æ¡ˆä¾‹1ï¼šGitHubé›†æˆ - ä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–</strong></p>
<pre><code class="hljs language-diff" lang="diff">é€šè¿‡MCPè®¿é—®GitHubä»“åº“ mycompany/backendï¼Œ
åˆ†ææœ€è¿‘10ä¸ªPull Requestsï¼Œè¯†åˆ«ï¼š
<span class="hljs-deletion">- å¸¸è§çš„ä»£ç é—®é¢˜</span>
<span class="hljs-deletion">- ä»£ç å®¡æŸ¥å»ºè®®æ˜¯å¦è¢«é‡‡çº³</span>
<span class="hljs-deletion">- å“ªäº›å¼€å‘è€…éœ€è¦æ›´å¤šä»£ç è´¨é‡åŸ¹è®­</span>

ç”Ÿæˆä¸€ä»½å›¢é˜Ÿä»£ç è´¨é‡æŠ¥å‘Šã€‚
</code></pre>
<p><strong>æ¡ˆä¾‹2ï¼šNotioné›†æˆ - è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£</strong></p>
<pre><code class="hljs language-diff" lang="diff">é€šè¿‡MCPè®¿é—®Notionæ•°æ®åº“"äº§å“éœ€æ±‚"ï¼Œ
å°†æœ¬å‘¨æ–°å¢çš„5ä¸ªéœ€æ±‚æ•´ç†æˆï¼š
<span class="hljs-deletion">- æŠ€æœ¯å¯è¡Œæ€§åˆ†ææ–‡æ¡£</span>
<span class="hljs-deletion">- å¼€å‘ä»»åŠ¡åˆ†è§£ï¼ˆå­˜å…¥Jiraï¼‰</span>
<span class="hljs-deletion">- æ—¶é—´ä¼°ç®—è¡¨</span>

è‡ªåŠ¨åˆ›å»ºåœ¨Notionçš„"å¼€å‘æ–‡æ¡£"é¡µé¢ä¸‹ã€‚
</code></pre>
<p><strong>æ¡ˆä¾‹3ï¼šSlacké›†æˆ - æ™ºèƒ½æ¶ˆæ¯å¤„ç†</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">é€šè¿‡MCPç›‘å¬Slackçš„#supporté¢‘é“ï¼Œ
å½“æœ‰ç”¨æˆ·æé—®æ—¶ï¼š
<span class="hljs-bullet">1.</span> æœç´¢å†å²è§£å†³æ–¹æ¡ˆ
<span class="hljs-bullet">2.</span> å¦‚æœæ‰¾åˆ°ç±»ä¼¼é—®é¢˜ï¼Œç›´æ¥å›å¤è§£å†³æ–¹æ³•
<span class="hljs-bullet">3.</span> å¦‚æœæ˜¯æ–°é—®é¢˜ï¼Œ@ç›¸å…³æŠ€æœ¯äººå‘˜ï¼Œå¹¶æ€»ç»“é—®é¢˜è¦ç‚¹

æ¯å¤©ç”Ÿæˆä¸€ä»½æ”¯æŒé—®é¢˜æ±‡æ€»æŠ¥å‘Šã€‚
</code></pre>
<p><strong>é…ç½®æ­¥éª¤</strong>ï¼ˆä»¥GitHubä¸ºä¾‹ï¼‰ï¼š</p>
<ol>
<li>å®‰è£…MCP Serverï¼ˆæŒ‰å®˜æ–¹æ–‡æ¡£æ“ä½œï¼‰</li>
<li>é…ç½®GitHub token</li>
<li>åœ¨Claudeä¸­æˆæƒMCPè¿æ¥</li>
<li>æµ‹è¯•ï¼š<code>é€šè¿‡MCPåˆ—å‡ºæˆ‘çš„æ‰€æœ‰ä»“åº“</code></li>
</ol>
<p><strong>æˆ‘çš„ä½¿ç”¨å¿ƒå¾—</strong>ï¼š
MCPçš„çœŸæ­£ä»·å€¼ä¸æ˜¯"æ§åˆ¶å·¥å…·"ï¼Œè€Œæ˜¯"æ‰“é€šå·¥ä½œæµ"ã€‚æ¯”å¦‚æˆ‘ç°åœ¨çš„å†™ä½œæµç¨‹ï¼š</p>
<ol>
<li>ClaudeåŸºäºProjectsä¸­çš„çŸ¥è¯†åº“å†™æ–‡ç« </li>
<li>é€šè¿‡MCPè‡ªåŠ¨ä¿å­˜åˆ°Notion</li>
<li>é€šè¿‡MCPåˆ›å»ºJiraä»»åŠ¡ï¼šæ’ç‰ˆã€é…å›¾ã€å‘å¸ƒ</li>
<li>é€šè¿‡MCPå‘é€Slacké€šçŸ¥ï¼šæ–‡ç« å·²å®Œæˆåˆç¨¿</li>
</ol>
<p>æ•´ä¸ªæµç¨‹è‡ªåŠ¨åŒ–ï¼Œæˆ‘åªéœ€è¦ä¸“æ³¨å†…å®¹åˆ›ä½œã€‚</p>
<hr/>
<h4 data-id="heading-12">æŠ€å·§9ï¼šPrompté“¾æ¥æŠ€å·§ - ç»„åˆæ‹³æ•ˆç‡ç¿»å€</h4>
<p>æŒæ¡äº†è¿™ä¸ªæŠ€å·§ï¼Œæ„Ÿè§‰Claudeå˜æˆäº†æˆ‘çš„ä¸“å±å›¢é˜Ÿã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯Prompté“¾æ¥ï¼Ÿ</strong>
æŠŠä¸€ä¸ªå¤æ‚ä»»åŠ¡æ‹†åˆ†æˆå¤šä¸ªæ­¥éª¤ï¼Œæ¯æ­¥ç”¨ä¸“é—¨çš„Promptï¼Œç»“æœå±‚å±‚ä¼ é€’ã€‚å°±åƒå·¥å‚çš„æµæ°´çº¿ï¼Œæ¯ä¸ªç¯èŠ‚åšå¥½è‡ªå·±çš„äº‹ã€‚</p>
<p><strong>è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ¯æ­¥åŠŸèƒ½å•ä¸€æ˜ç¡®</li>
<li><strong>ä¸Šä¸‹æ–‡ä¼ é€’</strong>ï¼šä¸‹ä¸€æ­¥è‡ªåŠ¨å¼•ç”¨ä¸Šä¸€æ­¥ç»“æœ</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ¯æ­¥éªŒè¯è¾“å‡ºè´¨é‡</li>
</ul>
<p><strong>å®Œæ•´å·¥ä½œæµç¤ºä¾‹</strong>ï¼š</p>
<p><strong>å·¥ä½œæµ1ï¼šæŠ€æœ¯åšå®¢åˆ›ä½œï¼ˆ5æ­¥ï¼‰</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç¬¬1æ­¥ï¼šä¸»é¢˜ç ”ç©¶
&lt;task&gt;
ç ”ç©¶ä¸»é¢˜"React Hooksæœ€ä½³å®è·µ"ï¼š
<span class="hljs-deletion">- åˆ†æç›®æ ‡è¯»è€…ç—›ç‚¹ï¼ˆ1-2å¹´ç»éªŒå¼€å‘è€…ï¼‰</span>
<span class="hljs-deletion">- åˆ—å‡º5ä¸ªæ ¸å¿ƒè¦ç‚¹</span>
<span class="hljs-deletion">- æ¨è3-5ç¯‡æƒå¨å‚è€ƒæ–‡ç« </span>
&lt;/task&gt;

ç¬¬2æ­¥ï¼šå¤§çº²è®¾è®¡
&lt;task&gt;
åŸºäºç ”ç©¶ç»“æœï¼Œè®¾è®¡æ–‡ç« å¤§çº²ï¼š
<span class="hljs-deletion">- å¼•è¨€ï¼ˆç—›ç‚¹å…±é¸£ï¼‰</span>
<span class="hljs-deletion">- 3-4ä¸ªä¸»è¦ç« èŠ‚</span>
<span class="hljs-deletion">- æ¯ä¸ªç« èŠ‚åŒ…å«ï¼šæ¦‚å¿µã€ç¤ºä¾‹ã€æœ€ä½³å®è·µã€å¸¸è§é”™è¯¯</span>
<span class="hljs-deletion">- ç»“è®ºï¼ˆæ€»ç»“+è¡ŒåŠ¨å»ºè®®ï¼‰</span>
&lt;/task&gt;

ç¬¬3æ­¥ï¼šå†…å®¹åˆ›ä½œ
&lt;task&gt;
åŸºäºå¤§çº²åˆ›ä½œå®Œæ•´åˆç¨¿ï¼š
<span class="hljs-deletion">- å­—æ•°ï¼š2000-2500å­—</span>
<span class="hljs-deletion">- åŒ…å«å¯è¿è¡Œçš„ä»£ç ç¤ºä¾‹</span>
<span class="hljs-deletion">- è¯­æ°”ï¼šä¸“ä¸š+å¯¹è¯å¼</span>
<span class="hljs-deletion">- èå…¥ä¸ªäººç»å†å’ŒçœŸå®æ¡ˆä¾‹</span>
&lt;/task&gt;

ç¬¬4æ­¥ï¼šä»£ç ç¤ºä¾‹ä¼˜åŒ–
&lt;task&gt;
æ£€æŸ¥å¹¶ä¼˜åŒ–æ‰€æœ‰ä»£ç ç¤ºä¾‹ï¼š
<span class="hljs-deletion">- ç¡®ä¿å¯è¿è¡Œ</span>
<span class="hljs-deletion">- æ·»åŠ è¯¦ç»†æ³¨é‡Š</span>
<span class="hljs-deletion">- æä¾›CodeSandboxé“¾æ¥</span>
<span class="hljs-deletion">- åŒ…å«è¾¹ç•Œæƒ…å†µå¤„ç†</span>
&lt;/task&gt;

ç¬¬5æ­¥ï¼šSEOå’Œå¯è¯»æ€§ä¼˜åŒ–
&lt;task&gt;
æœ€ç»ˆä¼˜åŒ–ï¼š
<span class="hljs-deletion">- å»é™¤AIå‘³ï¼ˆé¿å…"å› æ­¤"ã€"ç»¼ä¸Šæ‰€è¿°"ï¼‰</span>
<span class="hljs-deletion">- SEOä¼˜åŒ–ï¼ˆè‡ªç„¶èå…¥å…³é”®è¯"React Hooks"ã€"æœ€ä½³å®è·µ"ï¼‰</span>
<span class="hljs-deletion">- å¯è¯»æ€§æå‡ï¼ˆçŸ­æ®µè½ã€å°æ ‡é¢˜ã€åˆ—è¡¨ï¼‰</span>
<span class="hljs-deletion">- æ·»åŠ å…ƒæè¿°å’Œæ ‡ç­¾å»ºè®®</span>
&lt;/task&gt;
</code></pre>
<p><strong>å·¥ä½œæµ2ï¼šä»£ç å®¡æŸ¥åˆ°éƒ¨ç½²ï¼ˆ4æ­¥ï¼‰</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç¬¬1æ­¥ï¼šä»£ç å®¡æŸ¥
å®¡æŸ¥è¿™ä¸ªPRï¼Œè¾“å‡ºï¼š
<span class="hljs-deletion">- ä»£ç è´¨é‡è¯„åˆ†ï¼ˆ1-10ï¼‰</span>
<span class="hljs-deletion">- ä¸»è¦é—®é¢˜åˆ—è¡¨</span>
<span class="hljs-deletion">- å®‰å…¨é£é™©ï¼ˆå¦‚æœ‰ï¼‰</span>
<span class="hljs-deletion">- ä¼˜åŒ–å»ºè®®</span>

ç¬¬2æ­¥ï¼šç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
åŸºäºä»£ç å®¡æŸ¥ç»“æœï¼Œç”Ÿæˆï¼š
<span class="hljs-deletion">- å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–æ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-deletion">- é›†æˆæµ‹è¯•ï¼ˆè¦†ç›–å…³é”®æµç¨‹ï¼‰</span>
<span class="hljs-deletion">- è¾¹ç•Œæƒ…å†µæµ‹è¯•</span>

ç¬¬3æ­¥ï¼šæ›´æ–°æ–‡æ¡£
è‡ªåŠ¨æ›´æ–°ï¼š
<span class="hljs-deletion">- APIæ–‡æ¡£ï¼ˆå¦‚æœ‰æ¥å£å˜æ›´ï¼‰</span>
<span class="hljs-deletion">- READMEï¼ˆå¦‚æœ‰ä½¿ç”¨æ–¹å¼å˜æ›´ï¼‰</span>
<span class="hljs-deletion">- CHANGELOGï¼ˆè®°å½•æœ¬æ¬¡æ›´æ–°ï¼‰</span>

ç¬¬4æ­¥ï¼šç”Ÿæˆéƒ¨ç½²æ£€æŸ¥æ¸…å•
è¾“å‡ºéƒ¨ç½²å‰æ£€æŸ¥æ¸…å•ï¼š
<span class="hljs-deletion">- æµ‹è¯•é€šè¿‡æƒ…å†µ</span>
<span class="hljs-deletion">- æ•°æ®åº“è¿ç§»è„šæœ¬</span>
<span class="hljs-deletion">- é…ç½®æ–‡ä»¶æ›´æ–°</span>
<span class="hljs-deletion">- å›æ»šæ–¹æ¡ˆ</span>
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<p><strong>1. æ˜ç¡®è¾“å‡ºæ ¼å¼</strong>
æ¯æ­¥éƒ½è§„å®šè¾“å‡ºæ ¼å¼ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ­¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">ç¬¬<span class="hljs-number">1</span>æ­¥è¾“å‡ºæ ¼å¼ï¼š
ã€æ ¸å¿ƒè¦ç‚¹ã€‘
<span class="hljs-number">1</span>. ...
<span class="hljs-number">2</span>. ...

ã€ç›®æ ‡è¯»è€…ç—›ç‚¹ã€‘
- ...
- ...

ç¬¬<span class="hljs-number">2</span>æ­¥ï¼šåŸºäºä¸Šä¸€æ­¥çš„ã€æ ¸å¿ƒè¦ç‚¹ã€‘è®¾è®¡å¤§çº²...
</code></pre>
<p><strong>2. éªŒè¯å’Œé”™è¯¯å¤„ç†</strong></p>
<pre><code class="hljs language-diff" lang="diff">ç¬¬3æ­¥ï¼šåˆ›ä½œåˆç¨¿
...

éªŒè¯ï¼š
<span class="hljs-deletion">- å­—æ•°æ˜¯å¦åœ¨2000-2500èŒƒå›´ï¼Ÿ</span>
<span class="hljs-deletion">- æ˜¯å¦åŒ…å«è‡³å°‘3ä¸ªä»£ç ç¤ºä¾‹ï¼Ÿ</span>
<span class="hljs-deletion">- æ˜¯å¦èå…¥äº†ä¸ªäººç»å†ï¼Ÿ</span>

å¦‚æœä¸æ»¡è¶³ï¼Œè¯·é‡æ–°ç”Ÿæˆã€‚
</code></pre>
<p><strong>3. Claude Skillsçš„åº”ç”¨</strong>
å¦‚æœä½ ç”¨Claude Codeï¼Œå¯ä»¥åˆ›å»ºSkillsï¼ˆå¯å¤ç”¨çš„Promptæ¨¡æ¿ï¼‰ï¼š</p>
<ul>
<li><code>blog-research.md</code> - ä¸»é¢˜ç ”ç©¶æ­¥éª¤</li>
<li><code>blog-outline.md</code> - å¤§çº²è®¾è®¡æ­¥éª¤</li>
<li><code>blog-draft.md</code> - å†…å®¹åˆ›ä½œæ­¥éª¤</li>
</ul>
<p>ç„¶åç”¨ <code>/blog-research</code> å¿«é€Ÿè°ƒç”¨ã€‚</p>
<p><strong>æˆ‘çš„å®æˆ˜ç»éªŒ</strong>ï¼š
æˆ‘ç°åœ¨æœ‰5å¥—å¸¸ç”¨å·¥ä½œæµï¼Œå…¨éƒ¨æ¨¡æ¿åŒ–ã€‚æ¯æ¬¡åªéœ€è¦æ”¹ä¸»é¢˜å’Œå…·ä½“è¦æ±‚ï¼Œå…¶ä»–æ­¥éª¤è‡ªåŠ¨æ‰§è¡Œã€‚æ•ˆç‡æå‡ä¸æ˜¯ä¸€ç‚¹ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-13">ç¬¬å››éƒ¨åˆ†ï¼šå®æˆ˜åœºæ™¯æ•´åˆ</h3>
<h4 data-id="heading-14">æŠ€å·§10ï¼š5ä¸ªå¼€ç®±å³ç”¨çš„å®Œæ•´å·¥ä½œæµ</h4>
<p>è¿™5ä¸ªå·¥ä½œæµéƒ½æ˜¯æˆ‘å®é™…åœ¨ç”¨çš„ï¼ŒçœŸçš„å¾ˆå®ç”¨ã€‚</p>
<p><strong>å·¥ä½œæµ1ï¼šæŠ€æœ¯å†™ä½œï¼ˆèŠ‚çœ60%æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä¸»é¢˜ç ”ç©¶ï¼ˆProjectsçŸ¥è¯†åº“ + WebSearchï¼‰
<span class="hljs-bullet">2.</span> å¤§çº²è§„åˆ’ï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šæŠ€æœ¯æ–‡æ¡£ä¸“å®¶ï¼‰
<span class="hljs-bullet">3.</span> å†…å®¹åˆ›ä½œï¼ˆFew-shot Examples + XMLæ ‡ç­¾ï¼‰
<span class="hljs-bullet">4.</span> ä»£ç ç¤ºä¾‹ç”Ÿæˆï¼ˆArtifactsåˆ›å»ºäº¤äº’å¼demoï¼‰
<span class="hljs-bullet">5.</span> SEOä¼˜åŒ–ï¼ˆExtended Thinkingæ·±åº¦åˆ†æå…³é”®è¯ï¼‰
<span class="hljs-bullet">6.</span> å‘å¸ƒï¼ˆMCPè‡ªåŠ¨æ¨é€åˆ°Notion + GitHubï¼‰
</code></pre>
<p><strong>å·¥ä½œæµ2ï¼šä»£ç å¼€å‘ï¼ˆèŠ‚çœ50%æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> éœ€æ±‚åˆ†æï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šäº§å“åˆ†æå¸ˆï¼‰
<span class="hljs-bullet">2.</span> æ¶æ„è®¾è®¡ï¼ˆExtended Thinking + ProjectsæŠ€æœ¯æ–‡æ¡£ï¼‰
<span class="hljs-bullet">3.</span> ä»£ç å®ç°ï¼ˆé€æ­¥ç”Ÿæˆï¼Œæ¯æ­¥éªŒè¯ï¼‰
<span class="hljs-bullet">4.</span> å•å…ƒæµ‹è¯•ï¼ˆåŸºäºä»£ç è‡ªåŠ¨ç”Ÿæˆï¼‰
<span class="hljs-bullet">5.</span> æ–‡æ¡£ç”Ÿæˆï¼ˆArtifactsåˆ›å»ºAPIæ–‡æ¡£ï¼‰
</code></pre>
<p><strong>å·¥ä½œæµ3ï¼šæ•°æ®åˆ†æï¼ˆèŠ‚çœ70%æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> æ•°æ®æ¸…æ´—ï¼ˆPythonä»£ç ç”Ÿæˆï¼‰
<span class="hljs-bullet">2.</span> æ¢ç´¢åˆ†æï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šæ•°æ®åˆ†æå¸ˆï¼‰
<span class="hljs-bullet">3.</span> å¯è§†åŒ–ï¼ˆArtifactsåˆ›å»ºäº¤äº’å¼dashboardï¼‰
<span class="hljs-bullet">4.</span> æ´å¯ŸæŠ¥å‘Šï¼ˆExtended Thinkingæ·±åº¦åˆ†æï¼‰
<span class="hljs-bullet">5.</span> å†³ç­–å»ºè®®ï¼ˆåŸºäºæ•°æ®çš„å…·ä½“è¡ŒåŠ¨å»ºè®®ï¼‰
</code></pre>
<p><strong>å·¥ä½œæµ4ï¼šå¸‚åœºè°ƒç ”ï¼ˆèŠ‚çœ65%æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä¿¡æ¯æ”¶é›†ï¼ˆWebSearch + èµ„æ–™æ•´ç†ï¼‰
<span class="hljs-bullet">2.</span> ç«å“åˆ†æï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šæˆ˜ç•¥åˆ†æå¸ˆï¼‰
<span class="hljs-bullet">3.</span> SWOTåˆ†æï¼ˆExtended Thinkingï¼‰
<span class="hljs-bullet">4.</span> æˆ˜ç•¥å»ºè®®ï¼ˆProjects + å…¬å¸èƒŒæ™¯çŸ¥è¯†ï¼‰
<span class="hljs-bullet">5.</span> PPTç”Ÿæˆï¼ˆArtifactsåˆ›å»ºæ¼”ç¤ºæ–‡ç¨¿ï¼‰
</code></pre>
<p><strong>å·¥ä½œæµ5ï¼šå†…å®¹åˆ›ä½œï¼ˆèŠ‚çœ55%æ—¶é—´ï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> é€‰é¢˜ç ”ç©¶ï¼ˆWebSearch + è¶‹åŠ¿åˆ†æï¼‰
<span class="hljs-bullet">2.</span> å¤§çº²è§„åˆ’ï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šå†…å®¹ç­–ç•¥å¸ˆï¼‰
<span class="hljs-bullet">3.</span> åˆç¨¿åˆ›ä½œï¼ˆFew-shot Examples é£æ ¼æ¨¡ä»¿ï¼‰
<span class="hljs-bullet">4.</span> AIå‘³å»é™¤ï¼ˆç³»ç»Ÿæç¤ºè¯ï¼šäººæ€§åŒ–ç¼–è¾‘ï¼‰
<span class="hljs-bullet">5.</span> SEOä¼˜åŒ–ï¼ˆå…³é”®è¯è‡ªç„¶èå…¥ + metaä¿¡æ¯ç”Ÿæˆï¼‰
</code></pre>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<ul>
<li>é€‰ä¸€ä¸ªå·¥ä½œæµå…ˆè¯•è¯•ï¼Œç†Ÿç»ƒåå†å°è¯•å…¶ä»–</li>
<li>æ ¹æ®è‡ªå·±çš„éœ€æ±‚è°ƒæ•´æ­¥éª¤</li>
<li>æŠŠå¸¸ç”¨çš„å·¥ä½œæµä¿å­˜æˆæ¨¡æ¿</li>
</ul>
<p>è¿™äº›å·¥ä½œæµæˆ‘æ¯å¤©éƒ½åœ¨ç”¨ï¼ŒçœŸçš„è®©å·¥ä½œæ•ˆç‡æå‡äº†ä¸€ä¸ªæ¡£æ¬¡ã€‚</p>
<hr/>
<h3 data-id="heading-15">ç»“è®º</h3>
<p>å¥½äº†ï¼Œ10ä¸ªæŠ€å·§å…¨éƒ¨åˆ†äº«å®Œäº†ã€‚ä»åŸºç¡€çš„ç³»ç»Ÿæç¤ºè¯ã€XMLæ ‡ç­¾ï¼Œåˆ°é«˜çº§çš„Artifactsã€Projectsã€MCPé›†æˆï¼Œå†åˆ°æœ€åçš„Prompté“¾æ¥æŠ€å·§ã€‚</p>
<p><strong>å¿«é€Ÿå›é¡¾ä¸€ä¸‹</strong>ï¼š</p>
<ol>
<li>Claude vs ChatGPT - é€‰å¯¹å·¥å…·</li>
<li>ç³»ç»Ÿæç¤ºè¯ - ç»™Claudeä¸€ä¸ª"äººè®¾"</li>
<li>XMLæ ‡ç­¾ - ç»“æ„åŒ–å¤æ‚ä»»åŠ¡</li>
<li>Few-shot Examples - æ•™Claude"çœ‹æ ·å­¦æ ·"</li>
<li>Extended Thinking - è®©Claudeæ·±åº¦æ€è€ƒ</li>
<li>Artifacts - 3åˆ†é’Ÿåšäº¤äº’å¼å·¥å…·</li>
<li>Projects - å‘Šåˆ«é‡å¤è§£é‡ŠèƒŒæ™¯</li>
<li>MCPé›†æˆ - è¿æ¥å·¥ä½œæµ</li>
<li>Prompté“¾æ¥ - ç»„åˆæ‹³æ•ˆç‡ç¿»å€</li>
<li>å®Œæ•´å·¥ä½œæµ - 5ä¸ªå¼€ç®±å³ç”¨çš„æ–¹æ¡ˆ</li>
</ol>
<p><strong>æˆ‘çš„å»ºè®®</strong>ï¼šåˆ«æƒ³ç€ä¸€æ¬¡å­¦ä¼šæ‰€æœ‰æŠ€å·§ã€‚é€‰1-2ä¸ªæœ€é€‚åˆä½ å½“å‰éœ€æ±‚çš„ï¼Œä»Šå¤©å°±è¯•è¯•ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>å¦‚æœä½ ç»å¸¸å¤„ç†åŒä¸€ä¸ªé¡¹ç›® â†’ è¯•è¯•Projects</li>
<li>å¦‚æœä½ éœ€è¦åˆ›å»ºå·¥å…·æˆ–å›¾è¡¨ â†’ è¯•è¯•Artifacts</li>
<li>å¦‚æœä½ çš„ä»»åŠ¡å¾ˆå¤æ‚ â†’ è¯•è¯•XMLæ ‡ç­¾ + Extended Thinking</li>
</ul>
<p>Claudeè¿˜åœ¨å¿«é€Ÿè¿›åŒ–ï¼Œæ¯å‡ ä¸ªæœˆå°±æœ‰æ–°åŠŸèƒ½ä¸Šçº¿ã€‚æŒç»­å…³æ³¨å®˜æ–¹æ›´æ–°ï¼Œä¿æŒå­¦ä¹ ï¼Œä½ ä¼šå‘ç°AIå·¥å…·çš„æ½œåŠ›è¿œè¶…æƒ³è±¡ã€‚</p>
<p>è¯´å®è¯ï¼ŒåŠå¹´å‰æˆ‘çœŸæ²¡æƒ³åˆ°Claudeèƒ½è¿™ä¹ˆå¼ºå¤§ã€‚ç°åœ¨å®ƒå·²ç»æˆäº†æˆ‘çš„"ç¬¬äºŒå¤§è„‘"â€”â€”å¸®æˆ‘å†™ä»£ç ã€åˆ†ææ•°æ®ã€åˆ›ä½œå†…å®¹ã€ç®¡ç†é¡¹ç›®ã€‚å·¥ä½œæ•ˆç‡æå‡3å€ä¸æ˜¯å¤¸å¼ ï¼Œæ˜¯çœŸå®çš„ä½“éªŒã€‚</p>
<p>ä½ å‘¢ï¼Ÿç”¨Claudeå‘ç°äº†ä»€ä¹ˆå¥½ç”¨çš„æŠ€å·§ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ï¼Œè¯´ä¸å®šèƒ½å¸®åˆ°æ›´å¤šäººã€‚</p>
<p>AIå·¥å…·çš„çœŸæ­£ä»·å€¼ï¼Œåœ¨äºä½ å¦‚ä½•ä½¿ç”¨å®ƒã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•é‡Šæ”¾Claudeçš„å…¨éƒ¨æ½œåŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€pythonå¤§æ•°æ®æ¯•è®¾å®æˆ˜ã€‘å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿã€Hadoopã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ ã€å®æˆ˜æ•™å­¦]]></title>    <link>https://juejin.cn/post/7579441333166456841</link>    <guid>https://juejin.cn/post/7579441333166456841</guid>    <pubDate>2025-12-03T11:49:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579441333166456841" data-draft-id="7579451710303174682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€pythonå¤§æ•°æ®æ¯•è®¾å®æˆ˜ã€‘å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿã€Hadoopã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ ã€å®æˆ˜æ•™å­¦"/> <meta itemprop="keywords" content="åç«¯,Python,MySQL"/> <meta itemprop="datePublished" content="2025-12-03T11:49:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è®¡ç®—æœºæ¯•è®¾åŒ å¿ƒå·¥ä½œå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/2452372492400835"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€pythonå¤§æ•°æ®æ¯•è®¾å®æˆ˜ã€‘å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿã€Hadoopã€è®¡ç®—æœºæ¯•ä¸šè®¾è®¡ã€åŒ…æ‹¬æ•°æ®çˆ¬å–ã€æ•°æ®åˆ†æã€æ•°æ®å¯è§†åŒ–ã€æœºå™¨å­¦ä¹ ã€å®æˆ˜æ•™å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2452372492400835/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è®¡ç®—æœºæ¯•è®¾åŒ å¿ƒå·¥ä½œå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T11:49:02.000Z" title="Wed Dec 03 2025 11:49:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸŠä½œè€…ï¼šè®¡ç®—æœºæ¯•è®¾åŒ å¿ƒå·¥ä½œå®¤</p>
<p>ğŸŠç®€ä»‹ï¼šæ¯•ä¸šåå°±ä¸€ç›´ä¸“ä¸šä»äº‹è®¡ç®—æœºè½¯ä»¶ç¨‹åºå¼€å‘ï¼Œè‡³ä»Šä¹Ÿæœ‰8å¹´å·¥ä½œç»éªŒã€‚æ“…é•¿Javaã€Pythonã€å¾®ä¿¡å°ç¨‹åºã€å®‰å“ã€å¤§æ•°æ®ã€PHPã€.NET|C#ã€Golangç­‰ã€‚</p>
<p>æ“…é•¿ï¼šæŒ‰ç…§éœ€æ±‚å®šåˆ¶åŒ–å¼€å‘é¡¹ç›®ã€ æºç ã€å¯¹ä»£ç è¿›è¡Œå®Œæ•´è®²è§£ã€æ–‡æ¡£æ’°å†™ã€pptåˆ¶ä½œã€‚</p>
<p>ğŸŠå¿ƒæ„¿ï¼šç‚¹èµ ğŸ‘ æ”¶è— â­è¯„è®º ğŸ“</p>
<p>ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ æ¨èè®¢é˜… ğŸ‘‡ğŸ» ä¸ç„¶ä¸‹æ¬¡æ‰¾ä¸åˆ°å“Ÿ~</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754938.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754938.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754940.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754940.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754945.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754945.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754947.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754947.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754949.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754949.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… â†“â†“æ–‡æœ«è·å–æºç è”ç³»â†“â†“ğŸ…</p>
</blockquote>
<h2 data-id="heading-0">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-åŠŸèƒ½ä»‹ç»</h2>
<p>æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå¤§æ•°æ®æŠ€æœ¯çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿï¼Œæ—¨åœ¨ä¸ºå¿ƒç†å¥åº·é¢†åŸŸçš„ç ”ç©¶æä¾›ä¸€ä¸ªé«˜æ•ˆã€å¯æ‰©å±•çš„æ•°æ®å¤„ç†ä¸åˆ†æå¹³å°ã€‚ç³»ç»Ÿæ•´ä½“é‡‡ç”¨Hadoopç”Ÿæ€è¿›è¡Œæ„å»ºï¼Œåˆ©ç”¨HDFSä½œä¸ºåº•å±‚åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œå®ç°å¯¹å¤§è§„æ¨¡é—®å·æ•°æ®çš„å¯é å­˜å‚¨ã€‚æ ¸å¿ƒè®¡ç®—å¼•æ“é‡‡ç”¨Apache Sparkï¼Œé€šè¿‡å…¶å†…å­˜è®¡ç®—èƒ½åŠ›ï¼Œå¯¹æµ·é‡æ•°æ®è¿›è¡Œå¿«é€Ÿæ¸…æ´—ã€è½¬æ¢å’Œå¤šç»´åº¦åˆ†æï¼Œè¿œè¶…ä¼ ç»Ÿå•æœºå¤„ç†å·¥å…·çš„æ€§èƒ½ç“¶é¢ˆã€‚ç³»ç»Ÿåç«¯é‡‡ç”¨Pythonè¯­è¨€å¼€å‘ï¼Œåˆ©ç”¨PySparkæ— ç¼å¯¹æ¥Sparké›†ç¾¤ï¼Œå®ç°äº†ä»æ•°æ®é¢„å¤„ç†ã€ç‰¹å¾å·¥ç¨‹åˆ°é«˜çº§åˆ†æçš„å®Œæ•´æµç¨‹ã€‚å…·ä½“åŠŸèƒ½æ¶µç›–äº†å››å¤§æ ¸å¿ƒæ¨¡å—ï¼šé¦–å…ˆï¼Œå¯¹å¼ºè¿«ç—‡æ‚£è€…çš„äººå£å­¦ç‰¹å¾è¿›è¡Œæ·±å…¥å‰–æï¼ŒåŒ…æ‹¬å¹´é¾„ã€æ€§åˆ«ã€æ•™è‚²æ°´å¹³ä¸ç—…æƒ…ä¸¥é‡åº¦çš„äº¤å‰åˆ†æï¼›å…¶æ¬¡ï¼Œå¯¹ä¸´åºŠç‰¹å¾è¿›è¡Œé‡åŒ–ç ”ç©¶ï¼Œæ¢ç©¶æ¯æ—¥ä»ªå¼æ—¶é•¿ã€ç—›è‹¦ç¨‹åº¦ç­‰åŠŸèƒ½æŸå®³æŒ‡æ ‡ä¸ç—…æƒ…çš„å…³è”æ€§ï¼›å†è€…ï¼Œç³»ç»Ÿå¯¹è¯Šæ–­ä¸æ²»ç–—ç°çŠ¶è¿›è¡Œç»Ÿè®¡ï¼Œæ­ç¤ºä¸åŒä¸¥é‡ç¨‹åº¦ä¸‹çš„æ²»ç–—æ¨¡å¼ï¼›æœ€åï¼Œä¹Ÿæ˜¯æœ¬ç³»ç»Ÿçš„äº®ç‚¹ï¼Œç³»ç»Ÿåˆ©ç”¨K-Meansç­‰æœºå™¨å­¦ä¹ èšç±»ç®—æ³•ï¼ŒåŸºäºæ‚£è€…çš„æ ¸å¿ƒç—‡çŠ¶å¾—åˆ†è¿›è¡Œæ™ºèƒ½åˆ†ç¾¤ï¼Œè¯†åˆ«å‡ºå…·æœ‰ä¸åŒç—‡çŠ¶ä¸»å¯¼æ¨¡å¼çš„å¼ºè¿«ç—‡äºšå‹ï¼Œå¹¶ä¸ºæ¯ä¸ªäºšç¾¤ç»˜åˆ¶è¯¦ç»†çš„äººå£å­¦ä¸ä¸´åºŠç”»åƒï¼Œä»è€Œä¸ºç²¾ç»†åŒ–è¯Šæ–­å’Œä¸ªæ€§åŒ–æ²»ç–—æ–¹æ¡ˆçš„æ¢ç´¢æä¾›æ•°æ®æ”¯æŒä¸æ–°çš„è§†è§’ã€‚</p>
<h2 data-id="heading-1">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-é€‰é¢˜èƒŒæ™¯æ„ä¹‰</h2>
<p>é€‰é¢˜èƒŒæ™¯
å¼ºè¿«ç—‡ï¼ˆOCDï¼‰æ˜¯ä¸€ç§å¸¸è§ä¸”è‡´æ®‹æ€§é«˜çš„ç²¾ç¥éšœç¢ï¼Œæ‚£è€…å¸¸è¢«åå¤å‡ºç°çš„å¼ºè¿«æ€ç»´å’Œ/æˆ–å¼ºè¿«è¡Œä¸ºæ‰€å›°æ‰°ï¼Œä¸¥é‡å½±å“å…¶æ—¥å¸¸ç”Ÿæ´»ã€å·¥ä½œå’Œç¤¾äº¤åŠŸèƒ½ã€‚é•¿æœŸä»¥æ¥ï¼Œå¯¹å¼ºè¿«ç—‡çš„ç†è§£ä¸ç ”ç©¶å¤šä¾èµ–äºä¸´åºŠè®¿è°ˆå’Œå°æ ·æœ¬çš„é—®å·è°ƒæŸ¥ï¼Œè™½ç„¶è¿™äº›æ–¹æ³•ä¸ºç–¾ç—…çš„åŸºç¡€è®¤çŸ¥å¥ å®šäº†åŸºç¡€ï¼Œä½†å®ƒä»¬åœ¨æ•æ‰ç–¾ç—…çš„å¼‚è´¨æ€§ã€è¯†åˆ«æ½œåœ¨çš„äºšå‹ä»¥åŠæ¢ç´¢å¤æ‚å½±å“å› ç´ æ–¹é¢å­˜åœ¨å±€é™æ€§ã€‚éšç€ä¿¡æ¯æŠ€æœ¯çš„é£é€Ÿå‘å±•ï¼Œé€šè¿‡åœ¨çº¿å¹³å°ç­‰æ–¹å¼æ”¶é›†å¤§è§„æ¨¡å¿ƒç†å¥åº·æ•°æ®å·²æˆä¸ºå¯èƒ½ï¼Œè¿™äº›æ•°æ®é›†è•´å«äº†æ¯”ä¼ ç»Ÿç ”ç©¶æ›´ä¸ºä¸°å¯Œå’Œå¤æ‚çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œæ•°æ®é‡çš„æ¿€å¢ä¹Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼Œæ¯”å¦‚æ•°æ®ä¸­æ™®éå­˜åœ¨çš„ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼ä»¥åŠæ•°æ®ä¸ä¸€è‡´ç­‰é—®é¢˜ï¼Œä¼ ç»Ÿçš„æ•°æ®å¤„ç†å·¥å…·å’Œåˆ†ææ–¹æ³•éš¾ä»¥é«˜æ•ˆã€å‡†ç¡®åœ°åº”å¯¹ã€‚å› æ­¤ï¼Œå¦‚ä½•åˆ©ç”¨ç°ä»£å¤§æ•°æ®æŠ€æœ¯ï¼Œå¯¹è¿™äº›å®è´µçš„å¿ƒç†å¥åº·æ•°æ®è¿›è¡Œæœ‰æ•ˆç®¡ç†å’Œæ·±åº¦æŒ–æ˜ï¼Œä»¥æ­ç¤ºéšè—åœ¨æ•°æ®èƒŒåçš„æ¨¡å¼å’Œè§„å¾‹ï¼Œæˆä¸ºå½“å‰ç²¾ç¥å«ç”Ÿç ”ç©¶é¢†åŸŸä¸€ä¸ªäºŸå¾…æ¢ç´¢çš„æ–°æ–¹å‘ã€‚
é€‰é¢˜æ„ä¹‰
æœ¬è¯¾é¢˜çš„æ„ä¹‰åœ¨äºæ¢ç´¢å¹¶å®è·µäº†ä¸€å¥—å®Œæ•´çš„å¤§æ•°æ®åˆ†ææµç¨‹ï¼Œå°†å…¶åº”ç”¨äºå…·ä½“çš„å¿ƒç†å¥åº·é—®é¢˜ï¼Œå…·æœ‰ä¸€å®šçš„æ–¹æ³•è®ºå‚è€ƒä»·å€¼å’Œå®é™…åº”ç”¨æ½œåŠ›ã€‚ä»æ–¹æ³•è®ºå±‚é¢çœ‹ï¼Œæœ¬é¡¹ç›®è¯¦ç»†å±•ç¤ºäº†å¦‚ä½•è¿ç”¨Hadoopå’ŒSparkç­‰ä¸»æµå¤§æ•°æ®æ¡†æ¶ï¼Œå¤„ç†çœŸå®ä¸–ç•Œä¸­â€œè„â€æ•°æ®çš„å…¨è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ•°æ®æ¸…æ´—ã€ç¼ºå¤±å€¼å¡«å……ã€ç‰¹å¾è½¬æ¢ç­‰å…³é”®æ­¥éª¤ã€‚è¿™å¯¹äºå…¶ä»–éœ€è¦å¤„ç†ç±»ä¼¼å¤æ‚æ•°æ®é›†çš„å­¦ç”Ÿæˆ–ç ”ç©¶äººå‘˜æ¥è¯´ï¼Œæä¾›äº†ä¸€ä¸ªå¯ä¾›å‚è€ƒçš„å®è·µèŒƒä¾‹ï¼Œé™ä½äº†ä»–ä»¬å­¦ä¹ å’Œåº”ç”¨å¤§æ•°æ®æŠ€æœ¯çš„é—¨æ§›ã€‚ä»å®é™…åº”ç”¨è§’åº¦çœ‹ï¼Œè™½ç„¶æœ¬ç³»ç»Ÿä½œä¸ºä¸€ä¸ªæ¯•ä¸šè®¾è®¡ï¼Œå…¶ç»“è®ºä¸èƒ½ç›´æ¥ç”¨äºä¸´åºŠè¯Šæ–­ï¼Œä½†å®ƒæ‰€å®ç°çš„èšç±»åˆ†æåŠŸèƒ½ï¼Œèƒ½å¤Ÿå¸®åŠ©ç ”ç©¶äººå‘˜ä»å®è§‚ä¸Šè¯†åˆ«å‡ºå¼ºè¿«ç—‡æ‚£è€…ç¾¤ä½“ä¸­å¯èƒ½å­˜åœ¨çš„ä¸åŒç—‡çŠ¶ç»„åˆæ¨¡å¼ã€‚è¿™äº›é€šè¿‡æ•°æ®é©±åŠ¨çš„åˆ†ç¾¤ç»“æœï¼Œæˆ–è®¸èƒ½ä¸ºåç»­çš„ç—…å› å­¦ç ”ç©¶ã€æˆ–è€…å¼€å‘æ›´å…·é’ˆå¯¹æ€§çš„å¿ƒç†å¹²é¢„æˆ–æ²»ç–—æ–¹æ¡ˆæä¾›ä¸€äº›åˆæ­¥çš„çº¿ç´¢å’Œå¯å‘ã€‚æ¢ä¸ªè§’åº¦çœ‹ï¼Œæœ¬ç³»ç»Ÿå°†å¤æ‚çš„åˆ†æç»“æœé€šè¿‡å¯è§†åŒ–å›¾è¡¨è¿›è¡Œç›´è§‚å±•ç¤ºï¼Œä¹Ÿé™ä½äº†éä¸“ä¸šäººå£«ç†è§£å¤æ‚æ•°æ®çš„éš¾åº¦ï¼Œæœ‰åŠ©äºå¿ƒç†å¥åº·çŸ¥è¯†çš„ç§‘æ™®å’Œä¼ æ’­ã€‚</p>
<h2 data-id="heading-2">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-æŠ€æœ¯é€‰å‹</h2>
<p>å¤§æ•°æ®æ¡†æ¶ï¼šHadoop+Sparkï¼ˆæœ¬æ¬¡æ²¡ç”¨Hiveï¼Œæ”¯æŒå®šåˆ¶ï¼‰
å¼€å‘è¯­è¨€ï¼šPython+Javaï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
åç«¯æ¡†æ¶ï¼šDjango+Spring Boot(Spring+SpringMVC+Mybatis)ï¼ˆä¸¤ä¸ªç‰ˆæœ¬éƒ½æ”¯æŒï¼‰
å‰ç«¯ï¼šVue+ElementUI+Echarts+HTML+CSS+JavaScript+jQuery
è¯¦ç»†æŠ€æœ¯ç‚¹ï¼šHadoopã€HDFSã€Sparkã€Spark SQLã€Pandasã€NumPy
æ•°æ®åº“ï¼šMySQL</p>
<h2 data-id="heading-3">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-è§†é¢‘å±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1hy2xB3EyK%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1hy2xB3EyK/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-è§†é¢‘å±•ç¤º</a></p>
<h2 data-id="heading-4">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-å›¾ç‰‡å±•ç¤º</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6744d06e6bff4901b58218832843d7fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=FFhXNqUrcl24Yhax%2BcC%2BWSrIkRE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19a87d66b41f44929d29b62bf92a64f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=oIDgyGYiJIKhMO7ZBdO62%2F7KPO4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32baac485c8b49d98459ae2b2d1de8fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=V73hAgslTri1RwVkZG5oVunBFYA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/428fb2097b544ae8b90d97536422305d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=qIBVbMZm9uqFGNNVG87Aeu9HW6M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a47ab655345d4863955b68574685e1f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=%2FRtGamkoHP6qMCdwTwWaDdr8A2Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a604d17703be4534833f415eb019404c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=hfiaV9cm%2BbAiL9YcnCprE0vB1eM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38737f01359b45089d895e6e8c4b29c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K6h566X5py65q-V6K6-5Yyg5b-D5bel5L2c5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367341&amp;x-signature=KjMbTqu1wuZcsnOYCW3rfanX%2FlA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-5">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-ä»£ç å±•ç¤º</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pyspark.sql <span class="hljs-keyword">import</span> SparkSession, functions <span class="hljs-keyword">as</span> F
<span class="hljs-keyword">from</span> pyspark.ml.feature <span class="hljs-keyword">import</span> VectorAssembler, KMeans
<span class="hljs-keyword">from</span> pyspark.sql.types <span class="hljs-keyword">import</span> FloatType

spark = SparkSession.builder \
    .appName(<span class="hljs-string">"OCD_Analysis"</span>) \
    .getOrCreate()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">preprocess_ocd_data</span>(<span class="hljs-params">df</span>):
    df = df.<span class="hljs-built_in">filter</span>(df.respondent_id.isNotNull())
    df = df.withColumn(<span class="hljs-string">'age'</span>, F.when(F.col(<span class="hljs-string">'age'</span>) == <span class="hljs-number">99</span>, <span class="hljs-literal">None</span>).otherwise(F.col(<span class="hljs-string">'age'</span>)))
    symptom_cols = [<span class="hljs-string">f'C<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'CH<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'S<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'IT<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)]
    <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> symptom_cols:
        df = df.withColumn(col, F.col(col).cast(FloatType()))
    avg_age = df.select(F.mean(<span class="hljs-string">'age'</span>)).collect()[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
    avg_onset_age = df.select(F.mean(<span class="hljs-string">'ocd_onset_age'</span>)).collect()[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
    df = df.fillna({<span class="hljs-string">'age'</span>: avg_age, <span class="hljs-string">'ocd_onset_age'</span>: avg_onset_age})
    <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> symptom_cols:
        avg_score = df.select(F.mean(col)).collect()[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
        df = df.fillna({col: avg_score})
    df = df.withColumn(<span class="hljs-string">'ocd_total_score_recalculated'</span>, <span class="hljs-built_in">sum</span>(df[col] <span class="hljs-keyword">for</span> col <span class="hljs-keyword">in</span> symptom_cols))
    df = df.fillna({<span class="hljs-string">'ocd_total_score'</span>: F.col(<span class="hljs-string">'ocd_total_score_recalculated'</span>)})
    df = df.drop(<span class="hljs-string">'ocd_total_score_recalculated'</span>)
    df = df.fillna({<span class="hljs-string">'gender'</span>: <span class="hljs-string">'æœªçŸ¥'</span>, <span class="hljs-string">'education'</span>: <span class="hljs-string">'æœªçŸ¥'</span>, <span class="hljs-string">'prior_diagnosis'</span>: <span class="hljs-string">'æœªçŸ¥'</span>, <span class="hljs-string">'treatment_status'</span>: <span class="hljs-string">'æœªçŸ¥'</span>})
    df = df.na.drop(subset=[<span class="hljs-string">'ocd_severity'</span>])
    <span class="hljs-keyword">return</span> df

<span class="hljs-keyword">def</span> <span class="hljs-title function_">perform_kmeans_clustering</span>(<span class="hljs-params">df</span>):
    symptom_cols = [<span class="hljs-string">f'C<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'CH<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'S<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)] + [<span class="hljs-string">f'IT<span class="hljs-subst">{i}</span>'</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>)]
    assembler = VectorAssembler(inputCols=symptom_cols, outputCol=<span class="hljs-string">"features"</span>)
    df_features = assembler.transform(df)
    kmeans = KMeans(featuresCol=<span class="hljs-string">'features'</span>, predictionCol=<span class="hljs-string">'cluster'</span>, k=<span class="hljs-number">4</span>, seed=<span class="hljs-number">42</span>)
    model = kmeans.fit(df_features)
    clustered_df = model.transform(df_features)
    cluster_centers = model.clusterCenters()
    cluster_description = {<span class="hljs-number">0</span>: <span class="hljs-string">"ç—‡çŠ¶ç¾¤1ï¼šæ··åˆå‹"</span>, <span class="hljs-number">1</span>: <span class="hljs-string">"ç—‡çŠ¶ç¾¤2ï¼šå¼ºè¿«æ€ç»´ä¸»å¯¼å‹"</span>, <span class="hljs-number">2</span>: <span class="hljs-string">"ç—‡çŠ¶ç¾¤3ï¼šæ£€æŸ¥è¡Œä¸ºä¸»å¯¼å‹"</span>, <span class="hljs-number">3</span>: <span class="hljs-string">"ç—‡çŠ¶ç¾¤4ï¼šå¯¹ç§°/æ’åºä¸»å¯¼å‹"</span>}
    udf_cluster_description = F.udf(<span class="hljs-keyword">lambda</span> cluster_id: cluster_description.get(cluster_id, <span class="hljs-string">"æœªçŸ¥"</span>))
    final_df = clustered_df.withColumn(<span class="hljs-string">'cluster_description'</span>, udf_description(F.col(<span class="hljs-string">'cluster'</span>)))
    <span class="hljs-keyword">return</span> final_df

<span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_age_severity_distribution</span>(<span class="hljs-params">df</span>):
    df = df.<span class="hljs-built_in">filter</span>((F.col(<span class="hljs-string">'age'</span>).isNotNull()) &amp; (F.col(<span class="hljs-string">'ocd_severity'</span>).isNotNull()))
    df_with_age_group = df.withColumn(<span class="hljs-string">"age_group"</span>,
                                     F.when((F.col(<span class="hljs-string">'age'</span>) &gt;= <span class="hljs-number">18</span>) &amp; (F.col(<span class="hljs-string">'age'</span>) &lt;= <span class="hljs-number">25</span>), <span class="hljs-string">"18-25å²"</span>)
                                      .when((F.col(<span class="hljs-string">'age'</span>) &gt;= <span class="hljs-number">26</span>) &amp; (F.col(<span class="hljs-string">'age'</span>) &lt;= <span class="hljs-number">35</span>), <span class="hljs-string">"26-35å²"</span>)
                                      .when((F.col(<span class="hljs-string">'age'</span>) &gt;= <span class="hljs-number">36</span>) &amp; (F.col(<span class="hljs-string">'age'</span>) &lt;= <span class="hljs-number">50</span>), <span class="hljs-string">"36-50å²"</span>)
                                      .otherwise(<span class="hljs-string">"50å²ä»¥ä¸Š"</span>))
    severity_order = F.when(F.col(<span class="hljs-string">'ocd_severity'</span>) == <span class="hljs-string">'None/Minimal'</span>, <span class="hljs-number">1</span>)\
                      .when(F.col(<span class="hljs-string">'ocd_severity'</span>) == <span class="hljs-string">'Mild'</span>, <span class="hljs-number">2</span>)\
                      .when(F.col(<span class="hljs-string">'ocd_severity'</span>) == <span class="hljs-string">'Moderate'</span>, <span class="hljs-number">3</span>)\
                      .when(F.col(<span class="hljs-string">'ocd_severity'</span>) == <span class="hljs-string">'Severe'</span>, <span class="hljs-number">4</span>)\
                      .otherwise(<span class="hljs-number">5</span>)
    df_with_severity_order = df_with_age_group.withColumn(<span class="hljs-string">"severity_order"</span>, severity_order)
    result_df = df_with_severity_order.groupBy(<span class="hljs-string">"age_group"</span>, <span class="hljs-string">"ocd_severity"</span>)\
        .count()\
        .withColumn(<span class="hljs-string">"total_count"</span>, F.<span class="hljs-built_in">sum</span>(<span class="hljs-string">"count"</span>).over(Window.partitionBy(<span class="hljs-string">"age_group"</span>)))\
        .withColumn(<span class="hljs-string">"percentage"</span>, F.<span class="hljs-built_in">round</span>((F.col(<span class="hljs-string">"count"</span>) / F.col(<span class="hljs-string">"total_count"</span>)) * <span class="hljs-number">100</span>, <span class="hljs-number">2</span>))
    <span class="hljs-keyword">return</span> result_df.select(<span class="hljs-string">"age_group"</span>, <span class="hljs-string">"ocd_severity"</span>, <span class="hljs-string">"count"</span>, <span class="hljs-string">"percentage"</span>)
</code></pre>
<h2 data-id="heading-6">åŸºäºå¤§æ•°æ®çš„å¼ºè¿«ç—‡ç‰¹å¾ä¸å½±å“å› ç´ æ•°æ®åˆ†æç³»ç»Ÿ-ç»“è¯­</h2>
<blockquote>
<p>ğŸ‘‡ğŸ» ç²¾å½©ä¸“æ æ¨èè®¢é˜… ğŸ‘‡ğŸ» ä¸ç„¶ä¸‹æ¬¡æ‰¾ä¸åˆ°å“Ÿ~</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754938.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754938.html" ref="nofollow noopener noreferrer">Javaå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754940.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754940.html" ref="nofollow noopener noreferrer">Pythonå®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754945.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754945.html" ref="nofollow noopener noreferrer">å¾®ä¿¡å°ç¨‹åº|å®‰å“å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754947.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754947.html" ref="nofollow noopener noreferrer">å¤§æ•°æ®å®æˆ˜é¡¹ç›®</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2F2401_86677951%2Fcategory_12754949.html" target="_blank" title="https://blog.csdn.net/2401_86677951/category_12754949.html" ref="nofollow noopener noreferrer">PHP|C#.NET|Golangå®æˆ˜é¡¹ç›®</a></p>
<p>ğŸ… ä¸»é¡µè·å–æºç è”ç³»ğŸ…</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Akamai å®£å¸ƒæ”¶è´­åŠŸèƒ½å³æœåŠ¡å…¬å¸ Fermyon]]></title>    <link>https://juejin.cn/post/7579438351298002980</link>    <guid>https://juejin.cn/post/7579438351298002980</guid>    <pubDate>2025-12-03T11:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579438351298002980" data-draft-id="7579450578293735466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Akamai å®£å¸ƒæ”¶è´­åŠŸèƒ½å³æœåŠ¡å…¬å¸ Fermyon"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-12-03T11:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Akamai å®£å¸ƒæ”¶è´­åŠŸèƒ½å³æœåŠ¡å…¬å¸ Fermyon
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T11:19:00.000Z" title="Wed Dec 03 2025 11:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œä¸ºç½‘ç»œå®‰å…¨ä¸äº‘è®¡ç®—æœåŠ¡å•†ï¼ŒAkamaiï¼ˆçº³æ–¯è¾¾å…‹ä»£ç ï¼šAKAMï¼‰è¿‘æ—¥å®£å¸ƒæ”¶è´­æ— æœåŠ¡å™¨ WebAssembly å…¬å¸ Fermyonã€‚</p>
</blockquote>
<p>æ­¤æ¬¡æ”¶è´­å°† Fermyon çš„äº‘åŸç”Ÿ WebAssembly (Wasm) åŠŸèƒ½å³æœåŠ¡ (FaaS) ä¸ Akamai çš„å…¨çƒåˆ†å¸ƒå¼å¹³å°ç›¸ç»“åˆï¼Œä½¿ä¼ä¸šèƒ½å¤Ÿæ„å»ºè¾¹ç¼˜åŸç”Ÿåº”ç”¨ç¨‹åºã€‚ä¸ä¼ ç»Ÿäº‘åŸç”Ÿåº”ç”¨ç¨‹åºç›¸æ¯”ï¼Œè¿™äº›åº”ç”¨ç¨‹åºå¯æä¾›æ›´é«˜çš„æ€§èƒ½å’Œæ›´ä½çš„æˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d124d2977eb4af6a03146afe88cda81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765367773&amp;x-signature=THZ%2BEnLCUTCRmxMhT2hrNTFtimA%3D" alt="" loading="lazy"/></p>
<p>Fermyon æ˜¯æ— æœåŠ¡å™¨åŠŸèƒ½å’Œ WebAssembly é¢†åŸŸçš„é¢†å¯¼è€…ï¼Œå¹¶ä¸”æ´»è·ƒäºå¼€æºç¤¾åŒºã€‚è¯¥å…¬å¸ç»´æŠ¤ç€Spin å’Œ SpinKube äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼š (CNCF) å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”æ˜¯ Bytecode è”ç›Ÿçš„æˆå‘˜ã€‚æ‰€æœ‰è¿™äº›æ´»åŠ¨éƒ½å°†å¾—åˆ° Akamai çš„æŒç»­æ”¯æŒã€‚æ­¤å¤–ï¼ŒFermyon çš„å‘˜å·¥ï¼ŒåŒ…æ‹¬è”åˆåˆ›å§‹äººMatt Butcherå’ŒRadu Mateiï¼Œå°†åŠ å…¥ Akamai çš„äº‘æŠ€æœ¯å›¢é˜Ÿï¼Œå¹¶ç»§ç»­æ‹…ä»» Fermyon å¼€æ”¾æºé¡¹ç›®é¢†å¯¼è€…çš„è§’è‰²ï¼Œè‡´åŠ›äºå¼€å‘ä¸‹ä¸€ä»£æ— æœåŠ¡å™¨æŠ€æœ¯ã€‚</p>
<p>æ­¤å¤–ï¼Œé€šè¿‡æ”¶è´­ Fermyonï¼ŒAkamai è®¡åˆ’è¿›ä¸€æ­¥å¼ºåŒ–è¾¹ç¼˜åŠŸèƒ½å¹³å°ä¸è‡ªèº«æ€§èƒ½åŠå®‰å…¨äº§å“çš„é›†æˆã€‚ç”±æ­¤æ‰“é€ å‡ºçš„äº‘è®¡ç®—å¹³å°ï¼Œæ—¨åœ¨åŠ©åŠ›å¼€å‘äººå‘˜æ›´å¿«é€Ÿã€æ›´ä¾¿æ·åœ°åœ¨è¾¹ç¼˜ç¯å¢ƒä¸­æ„å»ºã€éƒ¨ç½²å’Œä¿æŠ¤åº”ç”¨ç¨‹åºã€‚è¿™äº›åº”ç”¨ç¨‹åºä¸ä»…æ€§èƒ½ä¼˜äºäº‘åŸç”Ÿåº”ç”¨ç¨‹åºï¼Œè€Œä¸”æˆæœ¬æ›´ä½ï¼Œä½¿ç”¨ä½“éªŒå¦‚åŒåœ¨æ ¸å¿ƒæ•°æ®ä¸­å¿ƒæ„å»ºã€éƒ¨ç½²å’Œä¿æŠ¤åº”ç”¨ä¸€æ ·ã€‚</p>
<p>Akamai é¢„è®¡ï¼Œæ­¤æ¬¡æ”¶è´­ä¸ä¼šå¯¹è‡ªèº« 2025 å¹´çš„è´¢åŠ¡é¢„æœŸè§„åˆ’äº§ç”Ÿé‡å¤§å½±å“ã€‚</p>
<p>ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.akamai.com%2Fzh%2Fproducts%2Fakamai-inference-cloud-platform%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251203_external1_blogarticles232" target="_blank" title="https://www.akamai.com/zh/products/akamai-inference-cloud-platform?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251203_external1_blogarticles232" ref="nofollow noopener noreferrer">æ­¤å¤„</a>äº†è§£ Akamai çš„æ›´å¤šæœåŠ¡å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ‰äº†AIä¹‹åæˆ‘ä¸€å¤©è¦ä¸Šä¸‰äº”ä¸ªæœåŠ¡ã€‚è‡ªå»ºé¡¹ç›®æ¨¡æ¿ Maven archetype å‡è½»å·¥ä½œé‡]]></title>    <link>https://juejin.cn/post/7578836326475087899</link>    <guid>https://juejin.cn/post/7578836326475087899</guid>    <pubDate>2025-12-02T08:54:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578836326475087899" data-draft-id="7578917474659369011" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ‰äº†AIä¹‹åæˆ‘ä¸€å¤©è¦ä¸Šä¸‰äº”ä¸ªæœåŠ¡ã€‚è‡ªå»ºé¡¹ç›®æ¨¡æ¿ Maven archetype å‡è½»å·¥ä½œé‡"/> <meta itemprop="keywords" content="maven,Java,Spring"/> <meta itemprop="datePublished" content="2025-12-02T08:54:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¸ä»“"/> <meta itemprop="url" content="https://juejin.cn/user/1812410601572599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ‰äº†AIä¹‹åæˆ‘ä¸€å¤©è¦ä¸Šä¸‰äº”ä¸ªæœåŠ¡ã€‚è‡ªå»ºé¡¹ç›®æ¨¡æ¿ Maven archetype å‡è½»å·¥ä½œé‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1812410601572599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¸ä»“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T08:54:05.000Z" title="Tue Dec 02 2025 08:54:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¹´å…³å°†è‡³ï¼Œå¤§å®¶éƒ½å¾ˆç„¦è™‘ã€‚è€æ¿ç„¦è™‘æœ€è¿‘ç”¨æˆ·ä»˜è´¹æ•°æ®æ€ä¹ˆè¶Šæ¥è¶Šä¸è¡Œäº†ã€‚</p>
<p>è¿è¥ç„¦è™‘è€æ¿æŠŠç”¨æˆ·ä»˜è´¹æ•°æ®ä¸è¡Œè¿™ä¸ªå¸½å­æ‰£è‡ªå·±èº«ä¸Šã€‚</p>
<p>äº§å“ç„¦è™‘è€æ¿æŠŠç”¨æˆ·ä»˜è´¹æ•°æ®ä¸è¡Œè¿™ä¸ªå¸½å­æ‰£è‡ªå·±èº«ä¸Šã€‚</p>
<p>å¼€å‘ç„¦è™‘è€æ¿æŠŠç”¨æˆ·ä»˜è´¹æ•°æ®ä¸è¡Œè¿™ä¸ªå¸½å­æ‰£è‡ªå·±èº«ä¸Šã€‚</p>
<p>æµ‹è¯•ç„¦è™‘è€æ¿æŠŠç”¨æˆ·ä»˜è´¹æ•°æ®ä¸è¡Œè¿™ä¸ªå¸½å­æ‰£è‡ªå·±èº«ä¸Šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10a6c0051af44d9ab8c5308cd9368d18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=ApyS81qGu%2Fub3Iya0cOkqjmXgQM%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ä¹‹ï¼Œå¤§å®¶éƒ½ç„¦è™‘ã€‚ä½œä¸ºä¸€ä¸ªåœ¨èŒæµ·æ²‰æµ®è®¸ä¹…çš„å¼€å‘ï¼Œä¸ºäº†ä¸è®©è€æ¿çœ‹å‘æˆ‘ã€‚æˆ‘ç»™çš„ç­”æ¡ˆæ˜¯ï¼šå¤šä¸Šåå‡ äºŒåä¸ªæœåŠ¡ã€‚</p>
<p>å½“è€æ¿å¤„äºæ­£è¦å¼€å£è®©æˆ‘èƒŒé”…ä¹‹å‰ï¼Œå·²ç»åœ¨è„‘å­é‡Œé¢é…é…¿å¥½â€œä½ è‡ªå·±æç¦»èŒï¼Œå…¬å¸ä¸è¿½ç©¶ä½ çš„è´£ä»»â€ä¹‹å‰ã€‚æˆ‘ä»¬ç‡å…ˆå‡ºå‡»ï¼Œå’Œä»–è¯´æˆ‘ä»Šå¹´å¤šä¸Šçº¿äº†ä¸‰äº”åæœåŠ¡ã€‚</p>
<p>ä¸€æ–¹é¢å‘Šè¯‰ä»–ï¼Œæˆ‘å¹²çš„å¯ä¸å°‘ã€‚å¦ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸€ç§å¨æ…‘ï¼šå¦‚æœç¦»äº†æˆ‘ï¼Œè¿™ä¸‰äº”åä¸ªçƒ«æ‰‹å±±èŠ‹è°æ¥æ¥ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/378239fd1246480aa52dc7d6417a6349~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=b4OC45VvuWNqejYfxmbt4bmVO%2Bw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºäº†å¤šä¸ŠæœåŠ¡ï¼Œæˆ‘å°±å¾—æ•´ä¸€ä¸ªæ¨¡ç‰ˆå·¥ç¨‹ã€‚è™½ç„¶å¯ä»¥æ‰‹åŠ¨æ”¹ï¼Œä½†æˆ‘æ”¹äº†å‡ ä¸ªä¹‹åå‘ç°å¤ªç‰¹ä¹ˆéº»çƒ¦äº†ã€‚</p>
<p>ç¨‹åºå‘˜æ€ä¹ˆèƒ½åƒå¾—äº†è¿™ç§æ‰‹åŠ¨å¹²æ´»çš„è‹¦ï¼Ÿæ¯•ç«Ÿä¸€ä¸ª 2 åˆ†é’Ÿå¯ä»¥å¹²å®Œçš„æ´»ï¼Œæˆ‘éƒ½æƒ³èŠ± 5 åˆ†é’Ÿå†™ä¸ªè„šæœ¬è‡ªåŠ¨åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d7b2237b2b54362a8ab50f96e9610ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=PmrD300ko%2BD1bplQsH9eOhIEvhc%3D" alt="image.png" loading="lazy"/></p>
<p>é—®å°±æ˜¯é«˜çº§ï¼Œå¦‚æœæˆ‘æ‰‹åŠ¨å¹²äº†ï¼Œé‚£æ€ä¹ˆæ˜¾ç¤ºå‡ºæ¥æˆ‘æ˜¯å¼€å‘ï¼Œæˆ‘æ˜¯ä¸€ä¸ªåæ™®ç‰¹è®­ç»ƒå¸ˆï¼Ÿ</p>
<p>æœ¬æ¥ä»¥å‰è¿˜å¯ä»¥ç”¨ä¸€ä¸ªç¨‹åºè£…ä¸€ä¸‹ï¼Œä½†æ˜¯è¢«ä½ ä»¬è¿™ç¾¤çˆ±è£…é€¼çš„äººç”¨å¤šäº†ã€‚ç°åœ¨å¹¿å¤§è€æ¿éƒ½çŸ¥é“äº†ï¼Œä¹ŸåŒ…æ‹¬æˆ‘çš„è€æ¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b36734d30f804b588e40170914b8ba21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=7Zsscrpblr2ATM%2BSto6qX4kAnjU%3D" alt="image.png" loading="lazy"/></p>
<p>äºæ˜¯ä¸ºäº†ç»§ç»­è£…é€¼ï¼Œä¸æ˜¯ã€‚æ˜¯ä¸ºäº†è‡ªåŠ¨åŒ–è¿™éƒ¨åˆ†å·¥ä½œï¼Œæˆ‘æ‰“ç®—åˆå†™ä¸€ä¸ªé¡¹ç›®ä»“åº“ç”¨æ¥å­˜æ”¾æ¨¡æ¿ä»£ç ã€‚ï¼ˆå˜¿å˜¿ï¼Œå±äºæˆ‘çš„ä»“åº“+1ï¼‰</p>
<p>é‚£æ¥ä¸‹æ¥å°±ç›˜ä¸€ä¸‹æ€ä¹ˆåšä¸€ä¸ª maven archetypeã€‚</p>
<p>é¦–å…ˆä½ è¦æœ‰ä¸€ä¸ªJavaå¼€å‘ç¯å¢ƒï¼Œç„¶åä½ è¦æœ‰ä¸€ä¸ªæ¨¡æ¿å·¥ç¨‹ï¼Œå¦‚æœæƒ³å¤§å®¶ä¸€èµ·ç”¨è¿˜éœ€è¦æœ‰ä¸€ä¸ª maven ä»“åº“ã€‚</p>
<p>æ­¥éª¤å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š
ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€ç”µè„‘
ç¬¬äºŒæ­¥ï¼šé€‰æ‹©ä¸€éƒ¨
ç¬¬ä¸‰æ­¥ï¼šæŠŠæ‰‹æ”¾åœ¨â¡ï¸é”®ä¸Š
ç¬¬å››æ­¥ï¼šå¦ä¸€åªæ‰‹...å’³å’³</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28b4023ec52f45a3a58d5a53f5434af6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=Ir3SOTyNLqQJdPgDf6SUK9DYZ2E%3D" alt="image.png" loading="lazy"/></p>
<p>å¥½åƒä¸å¤ªå¯¹ï¼Œè´¤è€…æ—¶é—´åº”è¯¥æ˜¯è¿™æ ·ï¼š
ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡ä¸€ä¸ªæ­£å¸¸çš„å·¥ç¨‹æ¨¡æ¿
ç¬¬äºŒæ­¥ï¼šå¼•å…¥ maven æ’ä»¶ç”Ÿæˆæ¨¡æ¿
ç¬¬ä¸‰æ­¥ï¼šæŠŠç”Ÿæˆçš„é¡¹ç›®å¤åˆ¶å‡ºæ¥æ”¹ä¸€ä¸‹
ç¬¬å››æ­¥ï¼šæ‰“åŒ…
ç¬¬äº”æ­¥ï¼šä¸Šä¼ åˆ°è¿œç¨‹åº“ï¼ˆå¦‚æœè‡ªå¨±è‡ªä¹è¿™ä¸€æ­¥å°±ä¸ç”¨äº†ï¼‰</p>
<h3 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ­£å¸¸çš„å·¥ç¨‹æ¨¡æ¿</h3>
<p>è‡ªå·±å‡†å¤‡å»</p>
<h3 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šå¼•å…¥ maven æ’ä»¶ç”Ÿæˆæ¨¡æ¿</h3>
<p>å…ˆå¼•å…¥æ‰©å±•ï¼Œå¯ä»¥é€šè¿‡é¡¹ç›®ç”Ÿæˆæ ·æ¿é¡¹ç›®</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">extension</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.archetype<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>archetype-packaging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">extension</span>&gt;</span>
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤åï¼Œå°±ä¼šåœ¨ target ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªæ ·æ¿é¡¹ç›®</p>
<pre><code class="hljs language-shell" lang="shell">mvn archetype:create-from-project
</code></pre>
<p>æŠŠ target/generated-sources/ ç›®å½•ä¸‹çš„æ ·æ¿é¡¹ç›®å¤åˆ¶å‡ºæ¥ï¼Œå•ç‹¬ä½œä¸ºä¸€ä¸ªé¡¹ç›®æ¥ä¿®æ”¹ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸‰éƒ¨ï¼š<del>ä¸‰ä¸Š</del> æ ·æ¿é¡¹ç›®ä¿¡æ¯è‡ªå®šä¹‰</h3>
<p>ç°åœ¨è™½ç„¶å·²ç»ç”Ÿæˆäº†ä¸€ä¸ªé¡¹ç›®ï¼Œå¦‚æœæƒ³ç”¨æ˜¯å¯ä»¥ç›´æ¥ç”¨çš„ã€‚å¦‚æœæœ‰ä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ï¼Œåˆ™éœ€è¦è‡ªå·±ä¿®æ”¹ <code>archetype-metadata.xml</code> æ–‡ä»¶ã€‚</p>
<p><code>archetype-metadata.xml</code> æ–‡ä»¶ä¸­æœ€é‡è¦çš„æ˜¯ <code>&lt;fileSets&gt;</code> è¿™ä¸ªæ ‡ç­¾çš„å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dde6ea8a628f41558455506b77bdad11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=eJFBmfx6NA3fB%2F6Z4r2snN4yx6w%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">archetype-descriptor</span> <span class="hljs-attr">...</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">fileSets</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">filtered</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>.circleci<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>config.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>.gitignore<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>README.md<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">fileSets</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">"app"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">fileSets</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">filtered</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">packaged</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">filtered</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">packaged</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/test/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
        ...
      <span class="hljs-tag">&lt;/<span class="hljs-name">fileSets</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"controller"</span> <span class="hljs-attr">dir</span>=<span class="hljs-string">"controller"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"controller"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">fileSets</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">fileSet</span> <span class="hljs-attr">filtered</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">packaged</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">encoding</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">fileSet</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">fileSets</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    ...
  <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">archetype-descriptor</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†è¦ç®¡ç†å“ªäº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œå°±æ˜¯è¦ä» <code>archetype-resources</code> ä¸­å¤åˆ¶å“ªäº›æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚</p>
<p>å¦‚æœéœ€è¦ä½¿ç”¨å‚æ•°æ›¿æ¢ï¼Œå°±è¦æ·»åŠ  <code>filtered="true"</code> å°±å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­å†™å˜é‡ï¼Œä½¿ç”¨æ¨¡æ¿ç”Ÿæˆçš„æ—¶å€™å°±ä¼šè‡ªåŠ¨æ›¿æ¢ã€‚</p>
<p>å˜é‡é€šå¸¸æœ‰ <code>${groupId}</code>ã€<code>${artifactId}</code>å’Œ <code>${version}</code></p>
<p><code>.idea</code>ã€<code>.claude</code> è¿™ç§ç›®å½•ä¸æƒ³åœ¨ç”Ÿæˆé¡¹ç›®çš„æ—¶å€™ä¹Ÿç”Ÿæˆï¼Œç›´æ¥åˆ æ‰æ ·æ¿ä»£ç ä¸­çš„ç›®å½•ï¼Œæˆ–è€…æ˜¯ä¿®æ”¹ <code>archetype-metadata.xml</code></p>
<h3 data-id="heading-3">ç¬¬å››æ­¥ï¼šæ‰“åŒ…</h3>
<pre><code class="hljs language-shell" lang="shell">mvn clean install
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e73f358dac745efb06c589e6f7d5abf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=YhB9prdEcdGEmOSgOJWb2Vx8Bu4%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“åŒ…å®Œä¹‹åï¼Œæœ¬åœ° Maven ä»“åº“å°±ä¼šå¤šå‡ºä¸€ä¸ªé¡¹ç›®åŒ…ã€‚è¿™ä¸ªé¡¹ç›®åŒ…é‡Œé¢å°±æœ‰äº›ä¹±ä¸ƒå…«ç³Ÿçš„æ–‡ä»¶ï¼Œjaræ–‡ä»¶ã€pomæ–‡ä»¶ç­‰ç­‰ç­‰ç­‰ã€‚</p>
<pre><code class="hljs language-powershell" lang="powershell">PS ...\repository\com\xxx\archetype\xxx-archetype&gt; tree /F /A
.
|-- maven-metadata-local.xml
|-- maven-metadata-yuan-nexus-releases.xml
|-- resolver-status.properties
\---1.2
    |-- felo-archetype-1.2.jar
    |-- felo-archetype-1.2.pom
    |-- _remote.repositories
</code></pre>
<p>æ—¢ç„¶æœ¬åœ°æœ‰äº†åŒ…ï¼Œé‚£å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">è¿™é‡Œåªæ˜¯è¿›å…¥å·¥ä½œç›®å½•ï¼Œä¸éœ€è¦è¿›å…¥é¡¹ç›®ç›®å½•</span>
cd workspace
<span class="hljs-meta prompt_">
# </span><span class="bash">é€šè¿‡æ¨¡æ¿é¡¹ç›®ç”Ÿæˆé¡¹ç›®ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆé¡¹ç›®æ ¹ç›®å½•</span>
mvn archetype:generate
</code></pre>
<p>ç”Ÿæˆé¡¹ç›®çš„è¿‡ç¨‹ä¼šè‡ªåŠ¨è¿›å…¥äº¤äº’æ¨¡å¼ï¼š</p>
<ul>
<li>å…ˆæ ¹æ®æç¤ºè¾“å…¥é¡¹ç›®æ¨¡æ¿å¯¹åº”çš„ç¼–å·</li>
<li>åœ¨æŒ‰ç…§æç¤ºè¾“å…¥é¡¹ç›®ä¿¡æ¯ï¼š
<ul>
<li>groupIdï¼šç»„ID</li>
<li>artifactIdï¼šé¡¹ç›®å</li>
<li>versionï¼šç‰ˆæœ¬å·</li>
<li>packageï¼šé¡¹ç›®åŒ…å</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">ç¬¬äº”æ­¥ï¼šä¸Šä¼ åˆ°è¿œç¨‹åº“</h3>
<p>å¦‚æœè‡ªå¨±è‡ªä¹è¿™ä¸€æ­¥å°±ä¸ç”¨äº†ï¼Œåˆ°ä¸Šä¸€æ­¥å·²ç»å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚</p>
<p>å¦‚æœä½ åƒæˆ‘ä¸€æ ·ç²¾ç›Šæ±‚ç²¾ã€åšæŒä¸æ‡ˆã€å‹‡å¾€æ— å‰è¿˜è²Œè‹¥æ½˜å®‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10489c030560412fb5996abfd28ce55d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=APu7iLIvQNYh5pXlRBzKCf2aPL0%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£ä¹ˆå¯ä»¥æŠŠè¿™ä¸ªé¡¹ç›®æ‰“åŒ…å®Œä¸Šä¼ åˆ°è¿œç¨‹ä»“åº“ï¼Œä»¥ä¾›éœ€è¦çš„äººä½¿ç”¨ã€‚</p>
<p>ç¬¬ä¸€æ­¥ï¼šå…ˆåœ¨é¡¹ç›®çš„ <code>pom.xml</code> ä¸­é…ç½®ä¸Šä»“åº“çš„åœ°å€</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Team Nexus Repository<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://nexus.xxx.com/repository/maven-releases/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>default<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">releases</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">releases</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">snapshots</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">snapshots</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Team Nexus Repository Snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://nexus.xxx.com/repository/maven-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>default<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">releases</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">releases</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">snapshots</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">enabled</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">enabled</span>&gt;</span>
			<span class="hljs-tag">&lt;<span class="hljs-name">updatePolicy</span>&gt;</span>always<span class="hljs-tag">&lt;/<span class="hljs-name">updatePolicy</span>&gt;</span>
		<span class="hljs-tag">&lt;/<span class="hljs-name">snapshots</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span>
</code></pre>
<p>ç¬¬äºŒæ­¥ï¼šåœ¨ <code>maven settings.xml</code> ä¸­é…ç½®ä¸Šè®¤è¯ç”¨çš„ç”¨æˆ·åå¯†ç </p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">servers</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>xxxxxxxx<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>
	<span class="hljs-tag">&lt;<span class="hljs-name">server</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">username</span>&gt;</span>xxx<span class="hljs-tag">&lt;/<span class="hljs-name">username</span>&gt;</span>
		<span class="hljs-tag">&lt;<span class="hljs-name">password</span>&gt;</span>xxxxxxxxx<span class="hljs-tag">&lt;/<span class="hljs-name">password</span>&gt;</span>
	<span class="hljs-tag">&lt;/<span class="hljs-name">server</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">servers</span>&gt;</span>
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œ deploy å‘½ä»¤ä¸Šä¼ jaråˆ°è¿œç¨‹ä»“åº“</p>
<pre><code class="hljs language-shell" lang="shell">mvn clean deploy
</code></pre>
<p>ç„¶åè·å–åˆ° catalog é…ç½®æ–‡ä»¶åœ°å€ï¼Œä¸€èˆ¬æ˜¯è¿™æ ·çš„URLï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fnexus.xxx.com%2Frepository%2Fmaven-releases%2Farchetype-catalog.xml" target="_blank" title="https://nexus.xxx.com/repository/maven-releases/archetype-catalog.xml" ref="nofollow noopener noreferrer">nexus.xxx.com/repository/â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/239a293459864c39afad9357b4cc9b7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=%2BVoe3xIYcf0pPu0W2jgbSrehYZo%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬å››æ­¥ï¼šåœ¨ IDEA ä¸­ä½¿ç”¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48f54efca56e46908d328e34cde6688b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=yhXat1aiUO%2Bo%2F8a8arZbrwAMyas%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/298fd71f2e154a76bbd94ec5afecbc95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=na0ZE6ke4MNMx64Rno0nRwfOzmM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34a07b719a0d4b1fb0c2083546d98503~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=XhfLZD9fSlZZQAixqZJcoEVCRAQ%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d50cc7fc3b084591943f0cdb56cab2b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg57q45LuT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765270445&amp;x-signature=fv3K2KbY3Othy3rJQ5Esa6RE%2BJI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘003ï¼šé‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·]]></title>    <link>https://juejin.cn/post/7579298511072296960</link>    <guid>https://juejin.cn/post/7579298511072296960</guid>    <pubDate>2025-12-03T09:45:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579298511072296960" data-draft-id="7579264485259214863" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘003ï¼šé‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2025-12-03T09:45:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¶æ—¥å¤±çœ è€…"/> <meta itemprop="url" content="https://juejin.cn/user/3411111810444068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘003ï¼šé‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411111810444068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¶æ—¥å¤±çœ è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:45:57.000Z" title="Wed Dec 03 2025 09:45:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>åœ¨é•¿æœŸä½¿ç”¨è®¡ç®—æœºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæ— æ„ä¸­ç§¯ç´¯å¤§é‡é‡å¤çš„æ–‡ä»¶ï¼Œè¿™äº›é‡å¤æ–‡ä»¶ä¸ä»…å ç”¨å®è´µçš„å­˜å‚¨ç©ºé—´ï¼Œè¿˜ä¼šé€ æˆæ–‡ä»¶ç®¡ç†çš„æ··ä¹±ã€‚æ‰‹åŠ¨æŸ¥æ‰¾å’Œåˆ é™¤é‡å¤æ–‡ä»¶æ˜¯ä¸€é¡¹ç¹çä¸”å®¹æ˜“å‡ºé”™çš„ä»»åŠ¡ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªå®ç”¨çš„Pythonè„šæœ¬â€”â€”é‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·ï¼Œå®ƒå¯ä»¥é€šè¿‡è®¡ç®—æ–‡ä»¶çš„å“ˆå¸Œå€¼æ¥å‡†ç¡®è¯†åˆ«é‡å¤æ–‡ä»¶ï¼Œå¹¶æä¾›å¤šç§å¤„ç†é€‰é¡¹ã€‚</p>
<h2 data-id="heading-1">åŠŸèƒ½ä»‹ç»</h2>
<p>è¿™ä¸ªé‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·å…·æœ‰ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>ç²¾å‡†è¯†åˆ«</strong>ï¼šé€šè¿‡è®¡ç®—æ–‡ä»¶çš„MD5å“ˆå¸Œå€¼æ¥å‡†ç¡®è¯†åˆ«é‡å¤æ–‡ä»¶</li>
<li><strong>å¤šç›®å½•æ‰«æ</strong>ï¼šæ”¯æŒåŒæ—¶æ‰«æå¤šä¸ªç›®å½•ä¸­çš„æ–‡ä»¶</li>
<li><strong>å¤šç§åŒ¹é…æ¨¡å¼</strong>ï¼šæ”¯æŒæŒ‰æ–‡ä»¶åã€æ–‡ä»¶å¤§å°æˆ–å†…å®¹å“ˆå¸Œå€¼æŸ¥æ‰¾é‡å¤æ–‡ä»¶</li>
<li><strong>è¯¦ç»†æŠ¥å‘Š</strong>ï¼šç”Ÿæˆè¯¦ç»†çš„é‡å¤æ–‡ä»¶æŠ¥å‘Šï¼ŒåŒ…æ‹¬æ–‡ä»¶è·¯å¾„ã€å¤§å°ç­‰ä¿¡æ¯</li>
<li><strong>å¤šç§å¤„ç†é€‰é¡¹</strong>ï¼šæä¾›åˆ é™¤ã€ç§»åŠ¨æˆ–ç¬¦å·é“¾æ¥ç­‰å¤šç§å¤„ç†é‡å¤æ–‡ä»¶çš„æ–¹å¼</li>
<li><strong>è¿›åº¦æ˜¾ç¤º</strong>ï¼šå®æ—¶æ˜¾ç¤ºæ‰«æè¿›åº¦å’Œç»Ÿè®¡ä¿¡æ¯</li>
<li><strong>å®‰å…¨ä¿æŠ¤</strong>ï¼šæä¾›é¢„è§ˆæ¨¡å¼ï¼Œé¿å…è¯¯åˆ é‡è¦æ–‡ä»¶</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šè®°å½•æ‰€æœ‰æ“ä½œå†å²ï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡</li>
</ol>
<h2 data-id="heading-2">åº”ç”¨åœºæ™¯</h2>
<p>è¿™ä¸ªå·¥å…·é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>å­˜å‚¨ç©ºé—´æ¸…ç†</strong>ï¼šæŸ¥æ‰¾å¹¶åˆ é™¤é‡å¤æ–‡ä»¶ä»¥é‡Šæ”¾å­˜å‚¨ç©ºé—´</li>
<li><strong>æ–‡ä»¶æ•´ç†</strong>ï¼šåœ¨åˆå¹¶å¤šä¸ªæ–‡ä»¶å¤¹æ—¶è¯†åˆ«é‡å¤å†…å®¹</li>
<li><strong>å¤‡ä»½ç®¡ç†</strong>ï¼šåœ¨å¤‡ä»½æ–‡ä»¶ä¸­æŸ¥æ‰¾é‡å¤é¡¹ä»¥ä¼˜åŒ–å¤‡ä»½ç­–ç•¥</li>
<li><strong>ç…§ç‰‡ç®¡ç†</strong>ï¼šæŸ¥æ‰¾é‡å¤çš„ç…§ç‰‡æ–‡ä»¶ï¼Œç‰¹åˆ«æ˜¯ä»ä¸åŒè®¾å¤‡å¯¼å…¥çš„ç…§ç‰‡</li>
<li><strong>æ–‡æ¡£å»é‡</strong>ï¼šåœ¨ä¼ä¸šç¯å¢ƒä¸­æŸ¥æ‰¾é‡å¤çš„æ–‡æ¡£æ–‡ä»¶</li>
<li><strong>ä¸‹è½½æ–‡ä»¶å¤¹æ¸…ç†</strong>ï¼šæ¸…ç†ä¸‹è½½æ–‡ä»¶å¤¹ä¸­çš„é‡å¤å†…å®¹</li>
</ol>
<h2 data-id="heading-3">æŠ¥é”™å¤„ç†</h2>
<p>è„šæœ¬åŒ…å«äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
<ol>
<li><strong>è·¯å¾„éªŒè¯</strong>ï¼šæ£€æŸ¥æŒ‡å®šç›®å½•æ˜¯å¦å­˜åœ¨ä¸”å¯è®¿é—®</li>
<li><strong>æƒé™æ£€æµ‹</strong>ï¼šæ£€æµ‹æ–‡ä»¶è¯»å–æƒé™ï¼Œé˜²æ­¢å› æƒé™ä¸è¶³å¯¼è‡´çš„é”™è¯¯</li>
<li><strong>æ–‡ä»¶é”å®šå¤„ç†</strong>ï¼šå¤„ç†è¢«å…¶ä»–ç¨‹åºå ç”¨çš„æ–‡ä»¶</li>
<li><strong>å¤§æ–‡ä»¶å¤„ç†</strong>ï¼šä¼˜åŒ–å¤§æ–‡ä»¶çš„å“ˆå¸Œè®¡ç®—è¿‡ç¨‹ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</li>
<li><strong>ç¬¦å·é“¾æ¥å¤„ç†</strong>ï¼šæ­£ç¡®å¤„ç†ç¬¦å·é“¾æ¥ï¼Œé¿å…æ— é™å¾ªç¯</li>
<li><strong>å¼‚å¸¸æ•è·</strong>ï¼šæ•è·å¹¶å¤„ç†è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å„ç§å¼‚å¸¸</li>
</ol>
<h2 data-id="heading-4">ä»£ç å®ç°</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> argparse
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> defaultdict
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> shutil

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DuplicateFileFinder</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, directories, mode=<span class="hljs-string">'content'</span></span>):
        self.directories = directories <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(directories, <span class="hljs-built_in">list</span>) <span class="hljs-keyword">else</span> [directories]
        self.mode = mode  <span class="hljs-comment"># 'name', 'size', or 'content'</span>
        self.duplicates = defaultdict(<span class="hljs-built_in">list</span>)
        self.scan_stats = {
            <span class="hljs-string">'total_files'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'total_size'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'scanned_dirs'</span>: <span class="hljs-number">0</span>,
            <span class="hljs-string">'errors'</span>: <span class="hljs-number">0</span>
        }
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_md5</span>(<span class="hljs-params">self, filepath, chunk_size=<span class="hljs-number">8192</span></span>):
        <span class="hljs-string">"""è®¡ç®—æ–‡ä»¶çš„MD5å“ˆå¸Œå€¼"""</span>
        md5_hash = hashlib.md5()
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">"rb"</span>) <span class="hljs-keyword">as</span> f:
                <span class="hljs-comment"># åˆ†å—è¯»å–æ–‡ä»¶ä»¥èŠ‚çœå†…å­˜</span>
                <span class="hljs-keyword">for</span> chunk <span class="hljs-keyword">in</span> <span class="hljs-built_in">iter</span>(<span class="hljs-keyword">lambda</span>: f.read(chunk_size), <span class="hljs-string">b""</span>):
                    md5_hash.update(chunk)
            <span class="hljs-keyword">return</span> md5_hash.hexdigest()
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è®¡ç®—æ–‡ä»¶å“ˆå¸Œå€¼æ—¶å‡ºé”™ <span class="hljs-subst">{filepath}</span>: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_file_info</span>(<span class="hljs-params">self, filepath</span>):
        <span class="hljs-string">"""è·å–æ–‡ä»¶ä¿¡æ¯"""</span>
        <span class="hljs-keyword">try</span>:
            stat = os.stat(filepath)
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">'path'</span>: filepath,
                <span class="hljs-string">'size'</span>: stat.st_size,
                <span class="hljs-string">'mtime'</span>: stat.st_mtime,
                <span class="hljs-string">'hash'</span>: <span class="hljs-literal">None</span>
            }
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·å–æ–‡ä»¶ä¿¡æ¯æ—¶å‡ºé”™ <span class="hljs-subst">{filepath}</span>: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">scan_directory</span>(<span class="hljs-params">self, directory</span>):
        <span class="hljs-string">"""æ‰«æç›®å½•ä¸­çš„æ–‡ä»¶"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(directory):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è­¦å‘Š: ç›®å½•ä¸å­˜åœ¨ <span class="hljs-subst">{directory}</span>"</span>)
            self.scan_stats[<span class="hljs-string">'errors'</span>] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span>
            
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(directory):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è­¦å‘Š: è·¯å¾„ä¸æ˜¯ç›®å½• <span class="hljs-subst">{directory}</span>"</span>)
            self.scan_stats[<span class="hljs-string">'errors'</span>] += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span>
            
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­£åœ¨æ‰«æç›®å½•: <span class="hljs-subst">{directory}</span>"</span>)
        
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">for</span> root, dirs, files <span class="hljs-keyword">in</span> os.walk(directory):
                self.scan_stats[<span class="hljs-string">'scanned_dirs'</span>] += <span class="hljs-number">1</span>
                
                <span class="hljs-comment"># è¿‡æ»¤æ‰éšè—ç›®å½•</span>
                dirs[:] = [d <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> dirs <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> d.startswith(<span class="hljs-string">'.'</span>)]
                
                <span class="hljs-keyword">for</span> filename <span class="hljs-keyword">in</span> files:
                    <span class="hljs-comment"># è·³è¿‡éšè—æ–‡ä»¶</span>
                    <span class="hljs-keyword">if</span> filename.startswith(<span class="hljs-string">'.'</span>):
                        <span class="hljs-keyword">continue</span>
                        
                    filepath = os.path.join(root, filename)
                    
                    <span class="hljs-comment"># è·å–æ–‡ä»¶ä¿¡æ¯</span>
                    file_info = self.get_file_info(filepath)
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> file_info:
                        self.scan_stats[<span class="hljs-string">'errors'</span>] += <span class="hljs-number">1</span>
                        <span class="hljs-keyword">continue</span>
                        
                    self.scan_stats[<span class="hljs-string">'total_files'</span>] += <span class="hljs-number">1</span>
                    self.scan_stats[<span class="hljs-string">'total_size'</span>] += file_info[<span class="hljs-string">'size'</span>]
                    
                    <span class="hljs-comment"># æ ¹æ®æ¨¡å¼ç¡®å®šé”®å€¼</span>
                    <span class="hljs-keyword">if</span> self.mode == <span class="hljs-string">'name'</span>:
                        key = filename.lower()
                    <span class="hljs-keyword">elif</span> self.mode == <span class="hljs-string">'size'</span>:
                        key = file_info[<span class="hljs-string">'size'</span>]
                    <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># content</span>
                        file_hash = self.calculate_md5(filepath)
                        <span class="hljs-keyword">if</span> file_hash <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
                            self.scan_stats[<span class="hljs-string">'errors'</span>] += <span class="hljs-number">1</span>
                            <span class="hljs-keyword">continue</span>
                        file_info[<span class="hljs-string">'hash'</span>] = file_hash
                        key = file_hash
                        
                    self.duplicates[key].append(file_info)
                    
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰«æç›®å½•æ—¶å‡ºé”™ <span class="hljs-subst">{directory}</span>: <span class="hljs-subst">{e}</span>"</span>)
            self.scan_stats[<span class="hljs-string">'errors'</span>] += <span class="hljs-number">1</span>
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find_duplicates</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æŸ¥æ‰¾é‡å¤æ–‡ä»¶"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æŸ¥æ‰¾é‡å¤æ–‡ä»¶..."</span>)
        
        <span class="hljs-keyword">for</span> directory <span class="hljs-keyword">in</span> self.directories:
            self.scan_directory(directory)
            
        <span class="hljs-comment"># è¿‡æ»¤å‡ºçœŸæ­£çš„é‡å¤æ–‡ä»¶ï¼ˆè‡³å°‘2ä¸ªç›¸åŒçš„ï¼‰</span>
        duplicates = {k: v <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> self.duplicates.items() <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(v) &gt; <span class="hljs-number">1</span>}
        self.duplicates = duplicates
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ‰«æå®Œæˆ:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ‰«æç›®å½•æ•°: <span class="hljs-subst">{self.scan_stats[<span class="hljs-string">'scanned_dirs'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ€»æ–‡ä»¶æ•°: <span class="hljs-subst">{self.scan_stats[<span class="hljs-string">'total_files'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ€»å¤§å°: <span class="hljs-subst">{self.scan_stats[<span class="hljs-string">'total_size'</span>] / (<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>):<span class="hljs-number">.2</span>f}</span> MB"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å‘ç°é‡å¤ç»„: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.duplicates)}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  é”™è¯¯æ•°: <span class="hljs-subst">{self.scan_stats[<span class="hljs-string">'errors'</span>]}</span>"</span>)
        
        <span class="hljs-keyword">return</span> self.duplicates
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print_duplicates</span>(<span class="hljs-params">self, max_files_per_group=<span class="hljs-number">10</span></span>):
        <span class="hljs-string">"""æ‰“å°é‡å¤æ–‡ä»¶ä¿¡æ¯"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.duplicates:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªå‘ç°é‡å¤æ–‡ä»¶"</span>)
            <span class="hljs-keyword">return</span>
            
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nå‘ç° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.duplicates)}</span> ç»„é‡å¤æ–‡ä»¶:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">80</span>)
        
        <span class="hljs-keyword">for</span> i, (key, files) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(self.duplicates.items(), <span class="hljs-number">1</span>):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n[<span class="hljs-subst">{i}</span>] <span class="hljs-subst">{<span class="hljs-built_in">len</span>(files)}</span> ä¸ªé‡å¤æ–‡ä»¶:"</span>)
            
            <span class="hljs-comment"># æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯</span>
            total_size = files[<span class="hljs-number">0</span>][<span class="hljs-string">'size'</span>]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ–‡ä»¶å¤§å°: <span class="hljs-subst">{total_size / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> KB"</span>)
            
            <span class="hljs-keyword">if</span> self.mode == <span class="hljs-string">'content'</span> <span class="hljs-keyword">and</span> files[<span class="hljs-number">0</span>][<span class="hljs-string">'hash'</span>]:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  æ–‡ä»¶å“ˆå¸Œ: <span class="hljs-subst">{files[<span class="hljs-number">0</span>][<span class="hljs-string">'hash'</span>][:<span class="hljs-number">16</span>]}</span>..."</span>)
                
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"  æ–‡ä»¶åˆ—è¡¨:"</span>)
            <span class="hljs-keyword">for</span> j, file_info <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(files[:max_files_per_group]):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    <span class="hljs-subst">{j+<span class="hljs-number">1</span>}</span>. <span class="hljs-subst">{file_info[<span class="hljs-string">'path'</span>]}</span>"</span>)
                
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(files) &gt; max_files_per_group:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"    ... è¿˜æœ‰ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(files) - max_files_per_group}</span> ä¸ªæ–‡ä»¶"</span>)
                
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_report</span>(<span class="hljs-params">self, report_file=<span class="hljs-string">"duplicate_report.json"</span></span>):
        <span class="hljs-string">"""ä¿å­˜é‡å¤æ–‡ä»¶æŠ¥å‘Š"""</span>
        <span class="hljs-keyword">try</span>:
            report_data = {
                <span class="hljs-string">'scan_time'</span>: datetime.now().isoformat(),
                <span class="hljs-string">'directories'</span>: self.directories,
                <span class="hljs-string">'mode'</span>: self.mode,
                <span class="hljs-string">'stats'</span>: self.scan_stats,
                <span class="hljs-string">'duplicates'</span>: {}
            }
            
            <span class="hljs-comment"># è½¬æ¢æ–‡ä»¶ä¿¡æ¯ä¸ºå¯åºåˆ—åŒ–çš„æ ¼å¼</span>
            <span class="hljs-keyword">for</span> key, files <span class="hljs-keyword">in</span> self.duplicates.items():
                report_data[<span class="hljs-string">'duplicates'</span>][<span class="hljs-built_in">str</span>(key)] = [
                    {
                        <span class="hljs-string">'path'</span>: f[<span class="hljs-string">'path'</span>],
                        <span class="hljs-string">'size'</span>: f[<span class="hljs-string">'size'</span>],
                        <span class="hljs-string">'modified'</span>: datetime.fromtimestamp(f[<span class="hljs-string">'mtime'</span>]).isoformat() <span class="hljs-keyword">if</span> <span class="hljs-string">'mtime'</span> <span class="hljs-keyword">in</span> f <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
                        <span class="hljs-string">'hash'</span>: f.get(<span class="hljs-string">'hash'</span>)
                    }
                    <span class="hljs-keyword">for</span> f <span class="hljs-keyword">in</span> files
                ]
                
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(report_file, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
                json.dump(report_data, f, indent=<span class="hljs-number">2</span>, ensure_ascii=<span class="hljs-literal">False</span>)
                
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é‡å¤æ–‡ä»¶æŠ¥å‘Šå·²ä¿å­˜åˆ°: <span class="hljs-subst">{report_file}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿å­˜æŠ¥å‘Šæ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_duplicates</span>(<span class="hljs-params">self, keep_strategy=<span class="hljs-string">'first'</span>, dry_run=<span class="hljs-literal">True</span></span>):
        <span class="hljs-string">"""åˆ é™¤é‡å¤æ–‡ä»¶"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.duplicates:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ²¡æœ‰é‡å¤æ–‡ä»¶éœ€è¦å¤„ç†"</span>)
            <span class="hljs-keyword">return</span>
            
        action = <span class="hljs-string">"é¢„è§ˆ"</span> <span class="hljs-keyword">if</span> dry_run <span class="hljs-keyword">else</span> <span class="hljs-string">"åˆ é™¤"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{action}</span>é‡å¤æ–‡ä»¶ (ä¿ç•™ç­–ç•¥: <span class="hljs-subst">{keep_strategy}</span>):"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        
        removed_count = <span class="hljs-number">0</span>
        removed_size = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">for</span> key, files <span class="hljs-keyword">in</span> self.duplicates.items():
            <span class="hljs-comment"># ç¡®å®šè¦ä¿ç•™çš„æ–‡ä»¶</span>
            <span class="hljs-keyword">if</span> keep_strategy == <span class="hljs-string">'first'</span>:
                keep_index = <span class="hljs-number">0</span>
            <span class="hljs-keyword">elif</span> keep_strategy == <span class="hljs-string">'last'</span>:
                keep_index = -<span class="hljs-number">1</span>
            <span class="hljs-keyword">elif</span> keep_strategy == <span class="hljs-string">'largest'</span>:
                keep_index = <span class="hljs-built_in">max</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(files)), key=<span class="hljs-keyword">lambda</span> i: files[i][<span class="hljs-string">'size'</span>])
            <span class="hljs-keyword">elif</span> keep_strategy == <span class="hljs-string">'smallest'</span>:
                keep_index = <span class="hljs-built_in">min</span>(<span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(files)), key=<span class="hljs-keyword">lambda</span> i: files[i][<span class="hljs-string">'size'</span>])
            <span class="hljs-keyword">else</span>:
                keep_index = <span class="hljs-number">0</span>  <span class="hljs-comment"># é»˜è®¤ä¿ç•™ç¬¬ä¸€ä¸ª</span>
                
            keep_file = files[keep_index]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nä¿ç•™: <span class="hljs-subst">{keep_file[<span class="hljs-string">'path'</span>]}</span>"</span>)
            
            <span class="hljs-comment"># å¤„ç†å…¶ä»–é‡å¤æ–‡ä»¶</span>
            <span class="hljs-keyword">for</span> i, file_info <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(files):
                <span class="hljs-keyword">if</span> i == keep_index:
                    <span class="hljs-keyword">continue</span>
                    
                filepath = file_info[<span class="hljs-string">'path'</span>]
                filesize = file_info[<span class="hljs-string">'size'</span>]
                
                <span class="hljs-keyword">if</span> dry_run:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å°†åˆ é™¤: <span class="hljs-subst">{filepath}</span> (<span class="hljs-subst">{filesize / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> KB)"</span>)
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">try</span>:
                        os.remove(filepath)
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å·²åˆ é™¤: <span class="hljs-subst">{filepath}</span>"</span>)
                        removed_count += <span class="hljs-number">1</span>
                        removed_size += filesize
                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  åˆ é™¤å¤±è´¥ <span class="hljs-subst">{filepath}</span>: <span class="hljs-subst">{e}</span>"</span>)
                        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dry_run:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nåˆ é™¤å®Œæˆ: <span class="hljs-subst">{removed_count}</span> ä¸ªæ–‡ä»¶, é‡Šæ”¾ç©ºé—´ <span class="hljs-subst">{removed_size / (<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>):<span class="hljs-number">.2</span>f}</span> MB"</span>)
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">move_duplicates</span>(<span class="hljs-params">self, target_dir, keep_strategy=<span class="hljs-string">'first'</span>, dry_run=<span class="hljs-literal">True</span></span>):
        <span class="hljs-string">"""ç§»åŠ¨é‡å¤æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.duplicates:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ²¡æœ‰é‡å¤æ–‡ä»¶éœ€è¦å¤„ç†"</span>)
            <span class="hljs-keyword">return</span>
            
        <span class="hljs-comment"># åˆ›å»ºç›®æ ‡ç›®å½•</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(target_dir):
            <span class="hljs-keyword">try</span>:
                os.makedirs(target_dir)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ›å»ºç›®å½•: <span class="hljs-subst">{target_dir}</span>"</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ›å»ºç›®å½•å¤±è´¥ <span class="hljs-subst">{target_dir}</span>: <span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-keyword">return</span>
                
        action = <span class="hljs-string">"é¢„è§ˆ"</span> <span class="hljs-keyword">if</span> dry_run <span class="hljs-keyword">else</span> <span class="hljs-string">"ç§»åŠ¨"</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\n<span class="hljs-subst">{action}</span>é‡å¤æ–‡ä»¶åˆ° <span class="hljs-subst">{target_dir}</span> (ä¿ç•™ç­–ç•¥: <span class="hljs-subst">{keep_strategy}</span>):"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span>)
        
        moved_count = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">for</span> key, files <span class="hljs-keyword">in</span> self.duplicates.items():
            <span class="hljs-comment"># ç¡®å®šè¦ä¿ç•™çš„æ–‡ä»¶</span>
            <span class="hljs-keyword">if</span> keep_strategy == <span class="hljs-string">'first'</span>:
                keep_index = <span class="hljs-number">0</span>
            <span class="hljs-keyword">elif</span> keep_strategy == <span class="hljs-string">'last'</span>:
                keep_index = -<span class="hljs-number">1</span>
            <span class="hljs-keyword">else</span>:
                keep_index = <span class="hljs-number">0</span>  <span class="hljs-comment"># é»˜è®¤ä¿ç•™ç¬¬ä¸€ä¸ª</span>
                
            keep_file = files[keep_index]
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nä¿ç•™: <span class="hljs-subst">{keep_file[<span class="hljs-string">'path'</span>]}</span>"</span>)
            
            <span class="hljs-comment"># å¤„ç†å…¶ä»–é‡å¤æ–‡ä»¶</span>
            <span class="hljs-keyword">for</span> i, file_info <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(files):
                <span class="hljs-keyword">if</span> i == keep_index:
                    <span class="hljs-keyword">continue</span>
                    
                filepath = file_info[<span class="hljs-string">'path'</span>]
                filename = os.path.basename(filepath)
                
                <span class="hljs-comment"># æ„é€ ç›®æ ‡è·¯å¾„</span>
                target_path = os.path.join(target_dir, filename)
                <span class="hljs-comment"># å¦‚æœç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ·»åŠ åºå·</span>
                counter = <span class="hljs-number">1</span>
                base_name, ext = os.path.splitext(filename)
                <span class="hljs-keyword">while</span> os.path.exists(target_path):
                    new_name = <span class="hljs-string">f"<span class="hljs-subst">{base_name}</span>_<span class="hljs-subst">{counter}</span><span class="hljs-subst">{ext}</span>"</span>
                    target_path = os.path.join(target_dir, new_name)
                    counter += <span class="hljs-number">1</span>
                    
                <span class="hljs-keyword">if</span> dry_run:
                    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å°†ç§»åŠ¨: <span class="hljs-subst">{filepath}</span> -&gt; <span class="hljs-subst">{target_path}</span>"</span>)
                <span class="hljs-keyword">else</span>:
                    <span class="hljs-keyword">try</span>:
                        shutil.move(filepath, target_path)
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  å·²ç§»åŠ¨: <span class="hljs-subst">{filepath}</span> -&gt; <span class="hljs-subst">{target_path}</span>"</span>)
                        moved_count += <span class="hljs-number">1</span>
                    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç§»åŠ¨å¤±è´¥ <span class="hljs-subst">{filepath}</span>: <span class="hljs-subst">{e}</span>"</span>)
                        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dry_run:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç§»åŠ¨å®Œæˆ: <span class="hljs-subst">{moved_count}</span> ä¸ªæ–‡ä»¶"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    parser = argparse.ArgumentParser(description=<span class="hljs-string">"é‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·"</span>)
    parser.add_argument(<span class="hljs-string">"directories"</span>, nargs=<span class="hljs-string">'+'</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"è¦æ‰«æçš„ç›®å½•è·¯å¾„"</span>)
    parser.add_argument(<span class="hljs-string">"-m"</span>, <span class="hljs-string">"--mode"</span>, choices=[<span class="hljs-string">'name'</span>, <span class="hljs-string">'size'</span>, <span class="hljs-string">'content'</span>], 
                       default=<span class="hljs-string">'content'</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"åŒ¹é…æ¨¡å¼ (é»˜è®¤: content)"</span>)
    parser.add_argument(<span class="hljs-string">"-r"</span>, <span class="hljs-string">"--report"</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"ä¿å­˜æŠ¥å‘Šåˆ°æŒ‡å®šæ–‡ä»¶"</span>)
    parser.add_argument(<span class="hljs-string">"--remove"</span>, action=<span class="hljs-string">"store_true"</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"åˆ é™¤é‡å¤æ–‡ä»¶"</span>)
    parser.add_argument(<span class="hljs-string">"--move"</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"ç§»åŠ¨é‡å¤æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"</span>)
    parser.add_argument(<span class="hljs-string">"--keep"</span>, choices=[<span class="hljs-string">'first'</span>, <span class="hljs-string">'last'</span>, <span class="hljs-string">'largest'</span>, <span class="hljs-string">'smallest'</span>], 
                       default=<span class="hljs-string">'first'</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"ä¿ç•™ç­–ç•¥ (é»˜è®¤: first)"</span>)
    parser.add_argument(<span class="hljs-string">"--dry-run"</span>, action=<span class="hljs-string">"store_true"</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"é¢„è§ˆæ¨¡å¼ï¼Œä¸æ‰§è¡Œå®é™…æ“ä½œ"</span>)
    
    args = parser.parse_args()
    
    <span class="hljs-keyword">try</span>:
        finder = DuplicateFileFinder(args.directories, args.mode)
        duplicates = finder.find_duplicates()
        
        <span class="hljs-keyword">if</span> duplicates:
            finder.print_duplicates()
            
            <span class="hljs-keyword">if</span> args.report:
                finder.save_report(args.report)
                
            <span class="hljs-keyword">if</span> args.remove:
                finder.remove_duplicates(args.keep, dry_run=args.dry_run)
                
            <span class="hljs-keyword">if</span> args.move:
                finder.move_duplicates(args.move, args.keep, dry_run=args.dry_run)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªå‘ç°é‡å¤æ–‡ä»¶"</span>)
            
    <span class="hljs-keyword">except</span> KeyboardInterrupt:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n\nç”¨æˆ·ä¸­æ–­æ“ä½œ"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¨‹åºæ‰§è¡Œå‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        sys.exit(<span class="hljs-number">1</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-5">ä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-6">åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºæœ¬ç”¨æ³•ï¼Œæ‰«æå•ä¸ªç›®å½•</span>
python duplicate_finder.py /path/to/directory

<span class="hljs-comment"># æ‰«æå¤šä¸ªç›®å½•</span>
python duplicate_finder.py /path/to/dir1 /path/to/dir2 /path/to/dir3

<span class="hljs-comment"># æŒ‰æ–‡ä»¶åæŸ¥æ‰¾é‡å¤æ–‡ä»¶</span>
python duplicate_finder.py /path/to/directory -m name

<span class="hljs-comment"># æŒ‰æ–‡ä»¶å¤§å°æŸ¥æ‰¾é‡å¤æ–‡ä»¶</span>
python duplicate_finder.py /path/to/directory -m size

<span class="hljs-comment"># ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶</span>
python duplicate_finder.py /path/to/directory -r report.json

<span class="hljs-comment"># é¢„è§ˆåˆ é™¤æ“ä½œï¼ˆä¸å®é™…åˆ é™¤ï¼‰</span>
python duplicate_finder.py /path/to/directory --remove --dry-run

<span class="hljs-comment"># åˆ é™¤é‡å¤æ–‡ä»¶ï¼ˆä¿ç•™ç¬¬ä¸€ä¸ªï¼‰</span>
python duplicate_finder.py /path/to/directory --remove

<span class="hljs-comment"># åˆ é™¤é‡å¤æ–‡ä»¶ï¼ˆä¿ç•™æœ€å¤§çš„ï¼‰</span>
python duplicate_finder.py /path/to/directory --remove --keep largest

<span class="hljs-comment"># ç§»åŠ¨é‡å¤æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</span>
python duplicate_finder.py /path/to/directory --move /path/to/duplicates
</code></pre>
<h3 data-id="heading-7">å‘½ä»¤è¡Œå‚æ•°è¯´æ˜</h3>
<ul>
<li><code>directories</code>: å¿…éœ€å‚æ•°ï¼ŒæŒ‡å®šè¦æ‰«æçš„ä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•è·¯å¾„</li>
<li><code>-m, --mode</code>: åŒ¹é…æ¨¡å¼ï¼Œå¯é€‰ <code>name</code>(æŒ‰æ–‡ä»¶å)ã€<code>size</code>(æŒ‰æ–‡ä»¶å¤§å°)ã€<code>content</code>(æŒ‰æ–‡ä»¶å†…å®¹ï¼Œé»˜è®¤)</li>
<li><code>-r, --report</code>: ä¿å­˜è¯¦ç»†æŠ¥å‘Šåˆ°æŒ‡å®šçš„JSONæ–‡ä»¶</li>
<li><code>--remove</code>: åˆ é™¤é‡å¤æ–‡ä»¶</li>
<li><code>--move</code>: ç§»åŠ¨é‡å¤æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</li>
<li><code>--keep</code>: ä¿ç•™ç­–ç•¥ï¼Œå¯é€‰ <code>first</code>(ç¬¬ä¸€ä¸ªï¼Œé»˜è®¤)ã€<code>last</code>(æœ€åä¸€ä¸ª)ã€<code>largest</code>(æœ€å¤§çš„)ã€<code>smallest</code>(æœ€å°çš„)</li>
<li><code>--dry-run</code>: é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºå°†è¦æ‰§è¡Œçš„æ“ä½œï¼Œä¸å®é™…æ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>å‡è®¾æœ‰ä»¥ä¸‹æ–‡ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">/photos/
  vacation1<span class="hljs-selector-class">.jpg</span> (é‡å¤)
  vacation2<span class="hljs-selector-class">.jpg</span>
  family<span class="hljs-selector-class">.jpg</span> (é‡å¤)
  work/
    vacation1<span class="hljs-selector-class">.jpg</span> (é‡å¤)
    presentation<span class="hljs-selector-class">.ppt</span>
/downloads/
  family<span class="hljs-selector-class">.jpg</span> (é‡å¤)
  document<span class="hljs-selector-class">.pdf</span>
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python duplicate_finder.py /photos /downloads -r duplicates.json
</code></pre>
<p>è¾“å‡ºç»“æœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">å‘ç° 2 ç»„é‡å¤æ–‡ä»¶:

[1] 2 ä¸ªé‡å¤æ–‡ä»¶:
  æ–‡ä»¶å¤§å°: 2048.00 KB
  æ–‡ä»¶å“ˆå¸Œ: abc123def456...
  æ–‡ä»¶åˆ—è¡¨:
    1. /photos/vacation1.jpg
    2. /photos/work/vacation1.jpg

[2] 2 ä¸ªé‡å¤æ–‡ä»¶:
  æ–‡ä»¶å¤§å°: 1024.00 KB
  æ–‡ä»¶å“ˆå¸Œ: def456ghi789...
  æ–‡ä»¶åˆ—è¡¨:
    1. /photos/family.jpg
    2. /downloads/family.jpg
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>è¿™ä¸ªé‡å¤æ–‡ä»¶æŸ¥æ‰¾å·¥å…·é€šè¿‡è®¡ç®—æ–‡ä»¶çš„MD5å“ˆå¸Œå€¼æ¥å‡†ç¡®è¯†åˆ«é‡å¤æ–‡ä»¶ï¼Œæä¾›äº†å¤šç§åŒ¹é…æ¨¡å¼å’Œå¤„ç†é€‰é¡¹ã€‚å®ƒä¸ä»…èƒ½å¸®åŠ©ç”¨æˆ·æ‰¾å‡ºå ç”¨å­˜å‚¨ç©ºé—´çš„é‡å¤æ–‡ä»¶ï¼Œè¿˜æä¾›äº†å®‰å…¨çš„å¤„ç†æ–¹å¼ï¼ŒåŒ…æ‹¬é¢„è§ˆæ¨¡å¼ã€ä¿ç•™ç­–ç•¥é€‰æ‹©ç­‰ã€‚å·¥å…·ç”Ÿæˆçš„è¯¦ç»†æŠ¥å‘Šå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°äº†è§£é‡å¤æ–‡ä»¶çš„æƒ…å†µã€‚æ— è®ºæ˜¯ä¸ªäººç”¨æˆ·æ¸…ç†å­˜å‚¨ç©ºé—´ï¼Œè¿˜æ˜¯ä¼ä¸šç”¨æˆ·ç®¡ç†å¤§é‡æ–‡ä»¶ï¼Œè¿™ä¸ªå·¥å…·éƒ½èƒ½æä¾›æœ‰æ•ˆçš„å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç» rem è®¡ç®—ï¼Vue3 å¤§å±é€‚é…ï¼Œæˆ‘æ˜¯è¿™æ ·åšçš„ (vfit ä½¿ç”¨ä½“éªŒ)]]></title>    <link>https://juejin.cn/post/7579427549472014382</link>    <guid>https://juejin.cn/post/7579427549472014382</guid>    <pubDate>2025-12-03T10:09:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579427549472014382" data-draft-id="7579440586693951534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç» rem è®¡ç®—ï¼Vue3 å¤§å±é€‚é…ï¼Œæˆ‘æ˜¯è¿™æ ·åšçš„ (vfit ä½¿ç”¨ä½“éªŒ)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T10:09:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹éœ¸å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1875092531319104"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç» rem è®¡ç®—ï¼Vue3 å¤§å±é€‚é…ï¼Œæˆ‘æ˜¯è¿™æ ·åšçš„ (vfit ä½¿ç”¨ä½“éªŒ)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1875092531319104/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹éœ¸å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:09:29.000Z" title="Wed Dec 03 2025 10:09:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å…¬å¸åˆæ¥äº†ä¸ªæ•°æ®å¯è§†åŒ–å¤§å±çš„éœ€æ±‚ï¼Œè®¾è®¡ç¨¿æ˜¯æ ‡å‡†çš„ <code>1920 x 1080</code>ã€‚
æ‹¿åˆ°è®¾è®¡ç¨¿çš„é‚£ä¸€åˆ»ï¼Œæˆ‘çš„å†…å¿ƒæ˜¯æ‹’ç»çš„... ğŸ¤¯</p>
<p>å¤§å®¶éƒ½çŸ¥é“ï¼Œåšå¤§å±é€‚é…æœ€çƒ¦çš„å°±æ˜¯<strong>è¿˜åŸè®¾è®¡ç¨¿åæ ‡</strong>ã€‚
ä»¥å‰æˆ‘å°è¯•è¿‡å„ç§æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>rem / vw</strong>: æ¯ä¸€ä¸ª px éƒ½è¦è½¬æ¢ï¼Œå†™ css çš„æ—¶å€™æ—è¾¹è¿˜å¾—å¼€ä¸ªè®¡ç®—å™¨ï¼Œå¤ªç´¯ã€‚</li>
<li><strong>ç™¾åˆ†æ¯”</strong>: æ›´æ˜¯å™©æ¢¦ï¼Œç¨å¾®åŠ¨ä¸€ä¸‹å¸ƒå±€å°±ä¹±äº†ã€‚</li>
<li><strong>æ‰‹åŠ¨ scale</strong>: è™½ç„¶å¥½ç”¨ï¼Œä½†è¦è‡ªå·±å†™ <code>resize</code> ç›‘å¬ï¼Œå¤„ç†é˜²æŠ–ï¼Œè¿˜è¦ç®—å±…ä¸­åç§»ï¼Œå¾ˆå®¹æ˜“å‡º bugï¼ˆæ¯”å¦‚ç•™ç™½ä¸å¯¹ã€ç‚¹å‡»é”™ä½ï¼‰ã€‚</li>
</ul>
<p>è¿™æ¬¡æˆ‘æƒ³å·ä¸ªæ‡’ï¼Œåœ¨ GitHub ä¸Šç¿»äº†ä¸€åœˆï¼Œå‘ç°äº†ä¸€ä¸ªåŸºäº Vue 3 çš„è¶…è½»é‡é€‚é…åº“ â€”â€” <strong>vfit</strong>ã€‚
ç”¨å®Œä¹‹åæˆ‘åªæƒ³è¯´ï¼š<strong>çœŸé¦™ï¼åŸæ¥é€‚é…å¤§å±å¯ä»¥åƒå†™æ™®é€šé¡µé¢ä¸€æ ·ç®€å•ã€‚</strong></p>
<p>è¿™é‡Œåˆ†äº«ä¸€ä¸‹æˆ‘çš„ä½¿ç”¨è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¸®åˆ°åŒæ ·åœ¨â€œæ¬ç –â€çš„å…„å¼Ÿä»¬ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ›  3åˆ†é’Ÿä¸Šæ‰‹å®å½•</h2>
<h3 data-id="heading-1">1. å®‰è£…</h3>
<p>é¦–å…ˆå®‰è£…åº“ï¼ŒåŒ…å¾ˆå°ï¼Œæ²¡ä»€ä¹ˆä¹±ä¸ƒå…«ç³Ÿçš„ä¾èµ–ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install vfit
</code></pre>
<h3 data-id="heading-2">2. â€œå‚»ç“œå¼â€é…ç½®</h3>
<p>åœ¨ <code>main.ts</code> é‡Œæ³¨å†Œä¸€ä¸‹ã€‚
è¿™é‡Œæœ€çˆ½çš„æ˜¯ï¼Œ<strong>å¯ä»¥ç›´æ¥å¡«è®¾è®¡ç¨¿çš„å®½é«˜</strong>ã€‚æˆ‘çš„è®¾è®¡ç¨¿æ˜¯ 1920x1080ï¼Œæˆ‘å°±ç›´æ¥å¡«è¿›å»ï¼Œæ ¹æœ¬ä¸ç”¨æ¢ç®—ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-keyword">import</span> { createFitScale } <span class="hljs-keyword">from</span> <span class="hljs-string">'vfit'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'vfit/style.css'</span> <span class="hljs-comment">// âš ï¸ åˆ’é‡ç‚¹ï¼šä¸€å®šè¦å¼•å…¥è¿™ä¸ªæ ·å¼ï¼Œä¸ç„¶å¸ƒå±€ç»„ä»¶ä¼šå¤±æ•ˆ</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">createFitScale</span>({
  <span class="hljs-attr">target</span>: <span class="hljs-string">'#app'</span>,        <span class="hljs-comment">// å‘Šè¯‰å®ƒè¦åœ¨å“ªä¸ªå®¹å™¨æäº‹æƒ…</span>
  <span class="hljs-attr">designWidth</span>: <span class="hljs-number">1920</span>,     <span class="hljs-comment">// è®¾è®¡ç¨¿å®½</span>
  <span class="hljs-attr">designHeight</span>: <span class="hljs-number">1080</span>,    <span class="hljs-comment">// è®¾è®¡ç¨¿é«˜</span>
  <span class="hljs-attr">scaleMode</span>: <span class="hljs-string">'auto'</span>      <span class="hljs-comment">// é»˜è®¤ auto å°±èƒ½åº”ä»˜ç»å¤§å¤šæ•°æƒ…å†µ</span>
}))

app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>è¿™å°±å®Œäº‹äº†ï¼Ÿå¯¹ï¼Œè¿™å°±å®Œäº‹äº†ã€‚
è¿™æ—¶å€™ä½ çš„é¡µé¢å·²ç»å…·å¤‡äº†<strong>è‡ªåŠ¨ç¼©æ”¾</strong>çš„èƒ½åŠ›ï¼Œæ— è®ºæ€ä¹ˆæ‹–æ‹½æµè§ˆå™¨çª—å£ï¼Œå†…å®¹éƒ½ä¼šä¿æŒæ¯”ä¾‹å¹¶è‡ªåŠ¨å±…ä¸­ã€‚</p>
<hr/>
<h2 data-id="heading-3">âœ¨ æˆ‘æœ€çˆ±çš„åŠŸèƒ½ï¼šFitContainer</h2>
<p>é…ç½®å¥½ scale åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒçœŸæ­£çš„ç—›ç‚¹æ˜¯<strong>ç»„ä»¶å®šä½</strong>ã€‚
ä»¥å‰ç”¨ scale æ–¹æ¡ˆï¼Œå­å…ƒç´ å®šä½è¿˜æ˜¯å¾—å°å¿ƒç¿¼ç¿¼ã€‚</p>
<p>vfit æä¾›äº†ä¸€ä¸ªå« <code>&lt;FitContainer&gt;</code> çš„ç»„ä»¶ï¼Œè¿™ä¸ªç®€ç›´æ˜¯â€œå·æ‡’ç¥å™¨â€ã€‚
<strong>å®ƒå¯ä»¥ç›´æ¥æ¥æ”¶è®¾è®¡ç¨¿ä¸Šçš„ px åæ ‡ï¼</strong></p>
<h3 data-id="heading-4">ä¸¾ä¸ªæ —å­ ğŸŒ°</h3>
<p>å‡è®¾è®¾è®¡ç¨¿ä¸Šï¼š</p>
<ul>
<li><strong>æ ‡é¢˜</strong>ï¼šè·ç¦»é¡¶éƒ¨ 50pxï¼Œæ°´å¹³å±…ä¸­ã€‚</li>
<li><strong>å·¦ä¾§å›¾è¡¨</strong>ï¼šè·ç¦»å·¦è¾¹ 30pxï¼Œé¡¶éƒ¨ 100pxã€‚</li>
<li><strong>å³ä¾§åˆ—è¡¨</strong>ï¼šæ­»æ­»è´´ä½å³è¾¹æ¡†ï¼Œè·ç¦»å³è¾¹ 30pxã€‚</li>
</ul>
<p>ç”¨ <code>vfit</code> å†™ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen-wrapper"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ ‡é¢˜ï¼šå±…ä¸­å’±ä»¬è¿˜æ˜¯ç”¨ flex æ–¹ä¾¿ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç®— left --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span> <span class="hljs-attr">:top</span>=<span class="hljs-string">"50"</span> <span class="hljs-attr">:left</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">:right</span>=<span class="hljs-string">"0"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center"</span>&gt;</span>æˆ‘çš„é…·ç‚«å¤§å±<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å·¦ä¾§å›¾è¡¨ï¼šç›´æ¥å†™è®¾è®¡ç¨¿åæ ‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span> <span class="hljs-attr">:top</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">:left</span>=<span class="hljs-string">"30"</span> <span class="hljs-attr">:z</span>=<span class="hljs-string">"10"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ChartComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å³ä¾§åˆ—è¡¨ï¼šæ³¨æ„è¿™é‡Œï¼æ”¯æŒ right å®šä½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">FitContainer</span> <span class="hljs-attr">:top</span>=<span class="hljs-string">"100"</span> <span class="hljs-attr">:right</span>=<span class="hljs-string">"30"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ListComponent</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">FitContainer</span>&gt;</span>

  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p><strong>å‘ç°æ²¡ï¼Ÿæˆ‘å®Œå…¨ä¸éœ€è¦æ€è€ƒç¼©æ”¾æ¯”ä¾‹ï¼</strong></p>
<ul>
<li>è®¾è®¡ç¨¿æ ‡ <code>30px</code>ï¼Œæˆ‘å°±å†™ <code>30</code>ã€‚</li>
<li>æ’ä»¶å†…éƒ¨ä¼šè‡ªåŠ¨æ ¹æ®å½“å‰çš„ç¼©æ”¾å€ç‡ï¼Œå¸®æˆ‘è®¡ç®—å¥½å®é™…çš„ä½ç½®ã€‚</li>
<li>ä¸ç®¡æ˜¯ 4K å±è¿˜æ˜¯ç¬”è®°æœ¬å°å±å¹•ï¼Œä½ç½®çœ‹èµ·æ¥éƒ½å’Œè®¾è®¡ç¨¿ä¸€æ¨¡ä¸€æ ·ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¤” è¸©å‘å°è´´å£«</h2>
<p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿå‘ç°äº†ä¸€äº›éœ€è¦æ³¨æ„çš„å°ç»†èŠ‚ï¼Œåˆ†äº«ç»™å¤§å®¶é¿å‘ï¼š</p>
<ol>
<li>
<p><strong>æ ·å¼å¼•å…¥ä¸èƒ½å¿˜</strong>ï¼š
ç¬¬ä¸€æ¬¡ç”¨çš„æ—¶å€™å¿˜äº† <code>import 'vfit/style.css'</code>ï¼Œç»“æœ <code>&lt;FitContainer&gt;</code> å˜æˆæ™®é€š div äº†ï¼Œæ’ç‰ˆå…¨ä¹±ã€‚å¤§å®¶åƒä¸‡åˆ«å¿˜äº†ã€‚</p>
</li>
<li>
<p><strong>z-index å±‚çº§</strong>ï¼š
<code>&lt;FitContainer&gt;</code> é»˜è®¤æœ‰ä¸ª <code>z-index: 300</code>ï¼ˆå¤§æ¦‚æ˜¯ä¸ºäº†é˜²æ­¢è¢«èƒŒæ™¯ç›–ä½ï¼‰ã€‚å¦‚æœä½ çš„å¼¹çª—è¢«é®ä½äº†ï¼Œè®°å¾—ç»™ç»„ä»¶ä¼ ä¸ªæ›´å¤§çš„ <code>:z="999"</code>ã€‚</p>
</li>
<li>
<p><strong>Right/Bottom çš„ç‰¹æ®Šé€»è¾‘</strong>ï¼š
æˆ‘çœ‹äº†ä¸€ä¸‹æºç å‘ç°ï¼Œå¦‚æœä½ ç”¨ <code>:left</code>ï¼Œå®ƒä¼šæ ¹æ®ç¼©æ”¾æ¯”ä¾‹ä½ç§»ï¼ˆä¿æŒç›¸å¯¹è®¾è®¡ç¨¿ä½ç½®ï¼‰ã€‚
ä½†å¦‚æœä½ ç”¨ <code>:right</code>ï¼Œå®ƒæ˜¯<strong>ä¸ä¹˜ç¼©æ”¾æ¯”ä¾‹</strong>çš„ã€‚
<strong>è¿™å…¶å®å¾ˆç§‘å­¦</strong>ï¼šå› ä¸ºå¤§å±é€šå¸¸æ˜¯å±…ä¸­æ˜¾ç¤ºçš„ï¼Œå¦‚æœå³ä¾§å…ƒç´ ä¹ŸæŒ‰æ¯”ä¾‹ç¼©æ”¾è·ç¦»ï¼Œåœ¨å®½å±ä¸‹å¯èƒ½ä¼šç¦»å±å¹•è¾¹ç¼˜å¤ªè¿œã€‚ç°åœ¨çš„é€»è¾‘èƒ½ä¿è¯å®ƒ<strong>å§‹ç»ˆå¸é™„åœ¨å±å¹•è¾¹ç¼˜</strong>ï¼Œè§†è§‰æ•ˆæœæ›´å¥½ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš Vue 3 çš„å¤§å±é¡¹ç›®ï¼ŒçœŸå¿ƒæ¨èè¯•ä¸€ä¸‹ <code>vfit</code>ã€‚
å®ƒä¸æ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„ï¼Œä½†ç»å¯¹æ˜¯<strong>æœ€çœå¿ƒ</strong>çš„ã€‚
æŠŠç²¾åŠ›èŠ±åœ¨ç”» ECharts ä¸Šï¼Œè€Œä¸æ˜¯åœ¨é‚£ç®— <code>rem</code> æˆ–è€…è°ƒ css å¸ƒå±€ï¼Œè¿™æ‰æ˜¯ç¨‹åºå‘˜è¯¥å¹²çš„äº‹å˜›ï¼ğŸ˜‚</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š
ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fv-plugin%2Fvfit" target="_blank" title="https://github.com/v-plugin/vfit" ref="nofollow noopener noreferrer">Github: https://github.com/v-plugin/vfit</a>
ğŸ”— <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb-vfit.netlify.app" target="_blank" title="https://web-vfit.netlify.app" ref="nofollow noopener noreferrer">æ–‡æ¡£: https://web-vfit.netlify.app</a></p>
<p>ç¥å¤§å®¶çš„å¤§å±é¡¹ç›®éƒ½èƒ½ä¸€æ¬¡è¿‡ç¨¿ï¼ğŸ»</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swiftä¸­å¯¹è±¡å®ä¾‹æ–¹æ³•åæ··æ·†é—®é¢˜è¯¦ç»†è§£å†³æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7579264485259264015</link>    <guid>https://juejin.cn/post/7579264485259264015</guid>    <pubDate>2025-12-03T09:54:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259264015" data-draft-id="7579313396207796239" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swiftä¸­å¯¹è±¡å®ä¾‹æ–¹æ³•åæ··æ·†é—®é¢˜è¯¦ç»†è§£å†³æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T09:54:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSå¼€å‘ä¸Šæ¶å“¦"/> <meta itemprop="url" content="https://juejin.cn/user/3336394949004844"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swiftä¸­å¯¹è±¡å®ä¾‹æ–¹æ³•åæ··æ·†é—®é¢˜è¯¦ç»†è§£å†³æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3336394949004844/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSå¼€å‘ä¸Šæ¶å“¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:54:43.000Z" title="Wed Dec 03 2025 09:54:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Swiftå¯¹è±¡å®ä¾‹æ–¹æ³•åæ··æ·†çš„è§£å†³</p>
<p>åœ¨Xcode7.xä¸­,æ¯”å¦‚æœ‰ä»¥ä¸‹ä¸€ä¸ªç±»:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Foo</span>{
    func test(v:<span class="hljs-built_in">Int</span>,before:<span class="hljs-built_in">Int</span>)-&gt;<span class="hljs-built_in">Int</span>{
        <span class="hljs-keyword">return</span> v + <span class="hljs-number">1</span>
    }
}<span class="hljs-number">12345</span>
</code></pre>
<p>æˆ‘å¯ä»¥ç›´æ¥è¿™ä¹ˆåš:</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">foo</span> = Foo()
let <span class="hljs-attr">f</span> = foo.test
f(11, before: 121)123
</code></pre>
<p>ä½†æ˜¯å¦‚æœFooä¸­æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•å‘¢?</p>
<pre><code class="hljs language-kotlin" lang="kotlin">func test(v:<span class="hljs-built_in">Int</span>,after:<span class="hljs-built_in">Int</span>)-&gt;<span class="hljs-built_in">Int</span>{
        <span class="hljs-keyword">return</span> v + <span class="hljs-number">100</span>
    }<span class="hljs-number">123</span>
</code></pre>
<p>æ­¤æ—¶ä»…ä»…æ˜¯Foo.testçš„èµ‹å€¼æ“ä½œå°±ä¼šå‘ç”Ÿé—®é¢˜:</p>
<pre><code class="hljs language-rust" lang="rust">Playground execution failed: <span class="hljs-number">71</span>.playground:<span class="hljs-number">8</span>:<span class="hljs-number">9</span>: error: ambiguous <span class="hljs-keyword">use</span> of <span class="hljs-symbol">'test</span>(_:before:)'
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">f</span> = foo.test12
</code></pre>
<p>ç¼–è¯‘å™¨å‘Šè¯‰ä½ ä¸Šä¸‹æ–‡æ˜¯æ¨¡ç³Šä¸æ¸…çš„,å› ä¸ºä½ ä¸çŸ¥é“è¦ç”¨å“ªä¸ªtest! è¿™ç§é—®é¢˜åœ¨ä»£ç æ··æ·†æ—¶å°¤å…¶å¸¸è§ï¼Œå½“æ–¹æ³•åè¢«é‡å‘½ååï¼Œç±»ä¼¼çš„å‘½åå†²çªå¯èƒ½å¢å¤šã€‚ä½¿ç”¨ä¸“ä¸šçš„ä»£ç æ··æ·†å·¥å…·å¦‚IpaGuardå¯ä»¥å¸®åŠ©ç³»ç»Ÿæ€§åœ°ç®¡ç†é‡å‘½åï¼Œå‡å°‘æ­¤ç±»é”™è¯¯ï¼Œå¹¶å¢å¼ºåº”ç”¨å®‰å…¨æ€§ã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ˜ç¡®å†™å‡ºæˆ‘ä»¬æƒ³è¦çš„æ–¹æ³•:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">let</span> <span class="hljs-selector-tag">f</span> = <span class="hljs-selector-tag">foo</span><span class="hljs-selector-class">.test</span>(<span class="hljs-attribute">_</span>:<span class="hljs-attribute">after</span>:)
<span class="hljs-selector-tag">let</span> <span class="hljs-selector-tag">f2</span> = <span class="hljs-selector-tag">foo</span><span class="hljs-selector-class">.test</span>(<span class="hljs-attribute">_</span>:<span class="hljs-attribute">before</span>:)

<span class="hljs-selector-tag">f</span>(<span class="hljs-number">11</span>, <span class="hljs-attribute">after</span>: <span class="hljs-number">0</span>)
<span class="hljs-selector-tag">f2</span>(<span class="hljs-number">11</span>,<span class="hljs-attribute">before</span>: <span class="hljs-number">0</span>)<span class="hljs-number">12345</span>
</code></pre>
<p>ä½†æ˜¯åœ¨Xcode8betaä¸­,_å·²ä¸è¢«å…è®¸,ä½ å¿…é¡»è¿™æ ·å†™å®Œæ•´:</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">f</span> = foo.test(v:before:)
let <span class="hljs-attr">f2</span> = foo.test(v:after:)<span class="hljs-number">12</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GooglePay: è®¢é˜…å•†å“è´­ä¹°æµç¨‹]]></title>    <link>https://juejin.cn/post/7579450578293555242</link>    <guid>https://juejin.cn/post/7579450578293555242</guid>    <pubDate>2025-12-03T10:12:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579450578293555242" data-draft-id="7579439226518863878" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GooglePay: è®¢é˜…å•†å“è´­ä¹°æµç¨‹"/> <meta itemprop="keywords" content="Android,Google"/> <meta itemprop="datePublished" content="2025-12-03T10:12:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Nerve"/> <meta itemprop="url" content="https://juejin.cn/user/3438928101639512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GooglePay: è®¢é˜…å•†å“è´­ä¹°æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3438928101639512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Nerve
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:12:43.000Z" title="Wed Dec 03 2025 10:12:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">GooglePay è®¢é˜…å•†å“è´­ä¹°æµç¨‹</h2>
<p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ GooglePay åº“å®ç°è®¢é˜…å•†å“çš„å®Œæ•´è´­ä¹°æµç¨‹ã€‚</p>
<h3 data-id="heading-1">1. æ¦‚è¿°</h3>
<h4 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯è®¢é˜…å•†å“</h4>
<p>è®¢é˜…å•†å“æ˜¯æŒ‡ç”¨æˆ·æŒ‰å‘¨æœŸï¼ˆå¦‚æ¯æœˆã€æ¯å¹´ï¼‰ä»˜è´¹çš„å•†å“ï¼Œä¼šè‡ªåŠ¨ç»­è®¢ç›´åˆ°ç”¨æˆ·å–æ¶ˆã€‚å¸¸è§çš„è®¢é˜…å•†å“åŒ…æ‹¬ï¼š</p>
<ul>
<li>VIP ä¼šå‘˜</li>
<li>é«˜çº§åŠŸèƒ½è®¢é˜…</li>
<li>å†…å®¹è®¢é˜…ï¼ˆéŸ³ä¹ã€è§†é¢‘ã€æ–°é—»ç­‰ï¼‰</li>
<li>äº‘å­˜å‚¨ç©ºé—´</li>
<li>å»å¹¿å‘ŠæœåŠ¡</li>
</ul>
<h4 data-id="heading-3">1.2 è®¢é˜…å•†å“çš„ç‰¹ç‚¹</h4>
<ul>
<li><strong>è‡ªåŠ¨ç»­è®¢</strong>: åˆ°æœŸåè‡ªåŠ¨ç»­è´¹ï¼Œé™¤éç”¨æˆ·ä¸»åŠ¨å–æ¶ˆ</li>
<li><strong>å‘¨æœŸæ€§</strong>: æŒ‰å›ºå®šå‘¨æœŸæ”¶è´¹ï¼ˆå‘¨ã€æœˆã€å­£ã€å¹´ç­‰ï¼‰</li>
<li><strong>éœ€è¦ç¡®è®¤</strong>: è´­ä¹°æˆåŠŸåå¿…é¡»è°ƒç”¨ <code>acknowledgePurchase</code> ç¡®è®¤</li>
<li><strong>æ”¯æŒä¼˜æƒ </strong>: å¯ä»¥è®¾ç½®è¯•ç”¨æœŸã€ä»‹ç»ä»·æ ¼ç­‰ä¼˜æƒ </li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>: éœ€è¦ç®¡ç†è®¢é˜…çš„æœ‰æ•ˆæœŸã€æš‚åœã€æ¢å¤ç­‰çŠ¶æ€</li>
</ul>
<h4 data-id="heading-4">1.3 è®¢é˜…æ¨¡å¼</h4>
<p>GooglePay åº“æ”¯æŒä¸¤ç§è®¢é˜…æ¨¡å¼ï¼š</p>




















<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>SingleMode</strong></td><td>å•è®¢é˜…æ¨¡å¼ï¼Œç”¨æˆ·åŒæ—¶åªèƒ½æ‹¥æœ‰ä¸€ä¸ªè®¢é˜…</td><td>ä¼šå‘˜ç­‰çº§ç³»ç»Ÿï¼ˆæ™®é€šä¼šå‘˜ã€VIPã€SVIPï¼‰</td></tr><tr><td><strong>MultiModal</strong></td><td>å¤šè®¢é˜…æ¨¡å¼ï¼Œç”¨æˆ·å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªè®¢é˜…</td><td>å¤šä¸ªç‹¬ç«‹åŠŸèƒ½è®¢é˜…</td></tr></tbody></table>
<h3 data-id="heading-5">2. å‰ç½®å‡†å¤‡</h3>
<h4 data-id="heading-6">2.1 Google Play Console é…ç½®</h4>
<h5 data-id="heading-7">åˆ›å»ºè®¢é˜…å•†å“</h5>
<ol>
<li>ç™»å½• <a href="https://link.juejin.cn?target=https%3A%2F%2Fplay.google.com%2Fconsole" target="_blank" title="https://play.google.com/console" ref="nofollow noopener noreferrer">Google Play Console</a></li>
<li>é€‰æ‹©æ‚¨çš„åº”ç”¨</li>
<li>å¯¼èˆªåˆ° <strong>è®¢é˜…</strong> â†’ <strong>åˆ›å»ºè®¢é˜…</strong></li>
<li>å¡«å†™è®¢é˜…åŸºæœ¬ä¿¡æ¯ï¼š
<ul>
<li><strong>è®¢é˜… ID</strong>: å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ï¼š<code>monthly_vip</code>ï¼‰</li>
<li><strong>åç§°</strong>: è®¢é˜…æ˜¾ç¤ºåç§°</li>
<li><strong>è¯´æ˜</strong>: è®¢é˜…æè¿°</li>
</ul>
</li>
</ol>
<h5 data-id="heading-8">é…ç½® Base Planï¼ˆåŸºç¡€æ–¹æ¡ˆï¼‰</h5>
<p>æ¯ä¸ªè®¢é˜…è‡³å°‘éœ€è¦ä¸€ä¸ª Base Planï¼š</p>
<ol>
<li>ç‚¹å‡» <strong>æ·»åŠ åŸºç¡€æ–¹æ¡ˆ</strong></li>
<li>è®¾ç½® <strong>Base Plan ID</strong>ï¼ˆä¾‹å¦‚ï¼š<code>monthly-plan</code>ï¼‰</li>
<li>é€‰æ‹© <strong>ç»­è®¢ç±»å‹</strong>: è‡ªåŠ¨ç»­è®¢</li>
<li>è®¾ç½® <strong>è®¡è´¹å‘¨æœŸ</strong>: æ¯æœˆã€æ¯å¹´ç­‰</li>
<li>è®¾ç½® <strong>ä»·æ ¼</strong>: å„ä¸ªå›½å®¶/åœ°åŒºçš„ä»·æ ¼</li>
</ol>
<h5 data-id="heading-9">é…ç½® Offerï¼ˆä¼˜æƒ ï¼‰ï¼ˆå¯é€‰ï¼‰</h5>
<p>å¯ä»¥ä¸º Base Plan æ·»åŠ ä¼˜æƒ ï¼š</p>
<ol>
<li>åœ¨ Base Plan ä¸­ç‚¹å‡» <strong>æ·»åŠ ä¼˜æƒ </strong></li>
<li>è®¾ç½® <strong>Offer ID</strong>ï¼ˆä¾‹å¦‚ï¼š<code>trial-7days</code>ï¼‰</li>
<li>é€‰æ‹©ä¼˜æƒ ç±»å‹ï¼š
<ul>
<li><strong>å…è´¹è¯•ç”¨</strong>: å…è´¹ä½¿ç”¨ä¸€æ®µæ—¶é—´</li>
<li><strong>ä»‹ç»ä»·æ ¼</strong>: é¦–æ¬¡è®¢é˜…äº«å—ä¼˜æƒ ä»·æ ¼</li>
<li><strong>ä¿ƒé”€ä»·æ ¼</strong>: é™æ—¶ä¼˜æƒ </li>
</ul>
</li>
<li>è®¾ç½®ä¼˜æƒ è¯¦æƒ…å’Œä»·æ ¼</li>
</ol>
<h4 data-id="heading-10">2.2 åº”ç”¨åˆå§‹åŒ–é…ç½®</h4>
<p>åœ¨ <code>Application</code> ç±»ä¸­åˆå§‹åŒ– GooglePayClientï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> : <span class="hljs-type">Application</span>(), GooglePayService {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        
        GooglePayClient.getInstance()
            .initBillingClient(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>)
            .setDebug(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// å¼€å‘ç¯å¢ƒå¼€å¯è°ƒè¯•æ—¥å¿—</span>
            .setSubscription(<span class="hljs-literal">true</span>)  <span class="hljs-comment">// æ”¯æŒè®¢é˜…</span>
            .setSubscriptionMode(SubscriptionMode.SingleMode)  <span class="hljs-comment">// å•è®¢é˜…æ¨¡å¼</span>
            .setInterval(<span class="hljs-number">15</span>)  <span class="hljs-comment">// è‡ªåŠ¨åˆ·æ–°é—´éš” 15 ç§’</span>
            .registerActivitys(listOf(MainActivity::<span class="hljs-keyword">class</span>.java))
    }
    
    <span class="hljs-comment">// å®ç° GooglePayService æ¥å£</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOneTimeConsumableProducts</span><span class="hljs-params">()</span></span>: List&lt;String&gt; {
        <span class="hljs-keyword">return</span> emptyList()  <span class="hljs-comment">// ä¸æ”¯æŒæ¶ˆè€—å‹å•†å“</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOneTimeNonConsumableProducts</span><span class="hljs-params">()</span></span>: List&lt;String&gt; {
        <span class="hljs-keyword">return</span> emptyList()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSubscribeProducts</span><span class="hljs-params">()</span></span>: List&lt;String&gt; {
        <span class="hljs-keyword">return</span> listOf(
            <span class="hljs-string">"monthly_vip"</span>,
            <span class="hljs-string">"yearly_vip"</span>
        )
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handlePurchasesProcess</span><span class="hljs-params">(
        isPay: <span class="hljs-type">Boolean</span>,
        productType: <span class="hljs-type">BillingProductType</span>,
        purchases: <span class="hljs-type">Purchase</span>
    )</span></span> {
        <span class="hljs-comment">// å¤„ç†è®¢é˜…éªŒè¯é€»è¾‘ï¼ˆè§åç»­ç« èŠ‚ï¼‰</span>
    }
}
</code></pre>
<h3 data-id="heading-11">3. å®Œæ•´è´­ä¹°æµç¨‹</h3>
<h4 data-id="heading-12">æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant App as åº”ç”¨å®¢æˆ·ç«¯
    participant GPLib as GooglePayåº“
    participant GP as Google Play
    participant Server as ä¸šåŠ¡æœåŠ¡å™¨
    
    User-&gt;&gt;App: 1. ç‚¹å‡»è®¢é˜…æŒ‰é’®
    App-&gt;&gt;GPLib: 2. querySubsOfferDetails(SubsOfferParams)
    GPLib-&gt;&gt;GP: æŸ¥è¯¢è®¢é˜…è¯¦æƒ…
    GP--&gt;&gt;GPLib: è¿”å›è®¢é˜…ä¿¡æ¯
    GPLib--&gt;&gt;App: AppSubscribeDetails
    App-&gt;&gt;User: 3. å±•ç¤ºè®¢é˜…ä¿¡æ¯å’Œä»·æ ¼
    
    User-&gt;&gt;App: 4. ç¡®è®¤è®¢é˜…
    App-&gt;&gt;Server: 5. åˆ›å»ºä¸šåŠ¡è®¢å•ï¼ˆå¯é€‰ï¼‰
    Server--&gt;&gt;App: è¿”å›è®¢å•å·
    
    App-&gt;&gt;GPLib: 6. launchBillingFlow(BillingSubsParams)
    GPLib-&gt;&gt;GP: å‘èµ·è®¢é˜…
    GP-&gt;&gt;User: 7. æ˜¾ç¤ºè®¢é˜…ç¡®è®¤ç•Œé¢
    User-&gt;&gt;GP: 8. ç¡®è®¤è®¢é˜…
    
    GP--&gt;&gt;GPLib: 9. è®¢é˜…ç»“æœ
    GPLib--&gt;&gt;App: PaySuccessfuläº‹ä»¶
    
    GPLib-&gt;&gt;Server: 10. handlePurchasesProcesså›è°ƒ
    Server-&gt;&gt;Server: 11. éªŒè¯è®¢é˜…
    Server-&gt;&gt;GP: 12. éªŒè¯è´­ä¹°å‡­è¯
    GP--&gt;&gt;Server: éªŒè¯ç»“æœ
    
    Server-&gt;&gt;Server: 13. å‘æ”¾è®¢é˜…æƒç›Š
    Server-&gt;&gt;GPLib: 14. è°ƒç”¨acknowledgePurchase
    GPLib-&gt;&gt;GP: 15. ç¡®è®¤è®¢é˜…
    
    GP--&gt;&gt;GPLib: ç¡®è®¤æˆåŠŸ
    GPLib--&gt;&gt;App: è®¢é˜…æ¿€æ´»
    
    App-&gt;&gt;User: 16. æ˜¾ç¤ºè®¢é˜…æˆåŠŸ
</code></pre>
<h4 data-id="heading-13">æ­¥éª¤ 1: æŸ¥è¯¢è®¢é˜…è¯¦æƒ…</h4>
<p>åœ¨å±•ç¤ºè®¢é˜…åˆ—è¡¨å‰ï¼Œéœ€è¦å…ˆæŸ¥è¯¢è®¢é˜…çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä»·æ ¼ã€ä¼˜æƒ ç­‰ï¼‰ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubscriptionViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance()
        .getPayService&lt;SubscriptionService&gt;()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _subscriptions = MutableLiveData&lt;List&lt;SubscriptionData&gt;&gt;()
    <span class="hljs-keyword">val</span> subscriptions: LiveData&lt;List&lt;SubscriptionData&gt;&gt; = _subscriptions
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadSubscriptions</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// 1. æ„å»ºæŸ¥è¯¢å‚æ•°</span>
            <span class="hljs-keyword">val</span> params = SubsOfferParams.Builder()
                .setProductIds(listOf(<span class="hljs-string">"monthly_vip"</span>, <span class="hljs-string">"yearly_vip"</span>))
                .build()
            
            <span class="hljs-comment">// 2. æŸ¥è¯¢è®¢é˜…è¯¦æƒ…</span>
            subscriptionService.querySubsOfferDetails(params).collect { result -&gt;
                result.onSuccess { subscriptionList -&gt;
                    <span class="hljs-comment">// 3. å¤„ç†è®¢é˜…æ•°æ®</span>
                    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = subscriptionList.map { subscription -&gt;
                        SubscriptionData(
                            productId = subscription.productId,
                            productName = subscription.productName,
                            basePlanId = extractBasePlanId(subscription),
                            offerId = extractOfferId(subscription),
                            pricingPhases = subscription.pricingPhases
                        )
                    }
                    _subscriptions.value = <span class="hljs-keyword">data</span>
                    Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"åŠ è½½æˆåŠŸ: <span class="hljs-subst">${data.size}</span> ä¸ªè®¢é˜…"</span>)
                }
                result.onFailure { error -&gt;
                    Log.e(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"åŠ è½½å¤±è´¥: <span class="hljs-subst">${error.message}</span>"</span>)
                }
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">extractBasePlanId</span><span class="hljs-params">(subscription: <span class="hljs-type">AppSubscribeDetails</span>)</span></span>: String {
        <span class="hljs-comment">// ä»è®¢é˜…è¯¦æƒ…ä¸­æå– basePlanId</span>
        <span class="hljs-comment">// å®é™…å®ç°éœ€è¦æ ¹æ®åº“çš„å…·ä½“ API</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"monthly-plan"</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">extractOfferId</span><span class="hljs-params">(subscription: <span class="hljs-type">AppSubscribeDetails</span>)</span></span>: String? {
        <span class="hljs-comment">// ä»è®¢é˜…è¯¦æƒ…ä¸­æå– offerIdï¼ˆå¦‚æœæœ‰ä¼˜æƒ ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
}

<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubscriptionData</span>(
    <span class="hljs-keyword">val</span> productId: String,
    <span class="hljs-keyword">val</span> productName: String,
    <span class="hljs-keyword">val</span> basePlanId: String,
    <span class="hljs-keyword">val</span> offerId: String?,
    <span class="hljs-keyword">val</span> pricingPhases: List&lt;PricingPhase&gt;
)
</code></pre>
<p><strong>AppSubscribeDetails å­—æ®µè¯´æ˜:</strong></p>

























<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>productId</code></td><td>String</td><td>è®¢é˜…å•†å“ ID</td></tr><tr><td><code>productName</code></td><td>String</td><td>è®¢é˜…å•†å“åç§°</td></tr><tr><td><code>pricingPhases</code></td><td>List&lt;PricingPhase&gt;</td><td>å®šä»·é˜¶æ¢¯åˆ—è¡¨</td></tr></tbody></table>
<p><strong>PricingPhase å­—æ®µè¯´æ˜:</strong></p>

























<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>formattedPrice</code></td><td>String</td><td>æ ¼å¼åŒ–çš„ä»·æ ¼ï¼ˆå¦‚ "â‚¬7.99"ï¼‰</td></tr><tr><td><code>priceAmountMicros</code></td><td>Long</td><td>ä»·æ ¼çš„å¾®å•ä½å€¼</td></tr><tr><td><code>priceCurrencyCode</code></td><td>String</td><td>è´§å¸ä»£ç ï¼ˆå¦‚ "EUR"ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-14">æ­¥éª¤ 2: å‘èµ·è®¢é˜…è´­ä¹°</h4>
<p>ç”¨æˆ·ç‚¹å‡»è®¢é˜…æŒ‰é’®åï¼Œæ„å»ºè®¢é˜…å‚æ•°å¹¶å‘èµ·è®¢é˜…æµç¨‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsFragment</span> : <span class="hljs-type">Fragment</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance()
        .getPayService&lt;SubscriptionService&gt;()
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSubscriptionClick</span><span class="hljs-params">(subscription: <span class="hljs-type">SubscriptionData</span>)</span></span> {
        lifecycleScope.launch {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 1. å¯é€‰ï¼šå‘ä¸šåŠ¡æœåŠ¡å™¨åˆ›å»ºè®¢å•</span>
                <span class="hljs-keyword">val</span> chargeNo = createBusinessOrder(subscription.productId)
                
                <span class="hljs-comment">// 2. æ„å»ºè®¢é˜…å‚æ•°</span>
                <span class="hljs-keyword">val</span> params = BillingSubsParams.Builder()
                    .setAccountId(<span class="hljs-string">"user_12345"</span>)  <span class="hljs-comment">// ç”¨æˆ·å”¯ä¸€æ ‡è¯†</span>
                    .setProductId(subscription.productId)  <span class="hljs-comment">// è®¢é˜…å•†å“ ID</span>
                    .setChargeNo(chargeNo)  <span class="hljs-comment">// ä¸šåŠ¡è®¢å•å·ï¼ˆå¯é€‰ï¼‰</span>
                    .setBasePlanId(subscription.basePlanId)  <span class="hljs-comment">// Base Plan ID</span>
                    .setOfferId(subscription.offerId)  <span class="hljs-comment">// Offer IDï¼ˆå¦‚æœæœ‰ä¼˜æƒ ï¼‰</span>
                    .build()
                
                <span class="hljs-comment">// 3. å‘èµ·è®¢é˜…</span>
                <span class="hljs-keyword">val</span> result = subscriptionService.launchBillingFlow(
                    requireActivity(),
                    params
                )
                
                <span class="hljs-comment">// 4. å¤„ç†è¿”å›ç»“æœ</span>
                <span class="hljs-keyword">when</span> (result.code) {
                    AppBillingResponseCode.OK -&gt; {
                        Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"è®¢é˜…æµç¨‹å·²å¯åŠ¨"</span>)
                    }
                    AppBillingResponseCode.USER_CANCELED -&gt; {
                        showToast(<span class="hljs-string">"æ‚¨å–æ¶ˆäº†è®¢é˜…"</span>)
                    }
                    AppBillingResponseCode.ITEM_ALREADY_OWNED -&gt; {
                        showToast(<span class="hljs-string">"æ‚¨å·²è®¢é˜…è¯¥å•†å“"</span>)
                        <span class="hljs-comment">// å¯ä»¥æŸ¥è¯¢å½“å‰è®¢é˜…çŠ¶æ€</span>
                        queryCurrentSubscription()
                    }
                    <span class="hljs-keyword">else</span> -&gt; {
                        showToast(<span class="hljs-string">"è®¢é˜…å¤±è´¥: <span class="hljs-subst">${result.message}</span>"</span>)
                    }
                }
                
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                showToast(<span class="hljs-string">"è®¢é˜…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createBusinessOrder</span><span class="hljs-params">(productId: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
            <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡æœåŠ¡å™¨ API åˆ›å»ºè®¢å•</span>
            <span class="hljs-string">"SUB_ORDER_<span class="hljs-subst">${System.currentTimeMillis()}</span>"</span>
        }
    }
}
</code></pre>
<p><strong>BillingSubsParams å‚æ•°è¯´æ˜:</strong></p>









































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>accountId</code></td><td>String</td><td>æ˜¯</td><td>ç”¨æˆ·å”¯ä¸€æ ‡è¯†</td></tr><tr><td><code>productId</code></td><td>String</td><td>æ˜¯</td><td>è®¢é˜…å•†å“ ID</td></tr><tr><td><code>chargeNo</code></td><td>String</td><td>å¦</td><td>ä¸šåŠ¡è®¢å•å·</td></tr><tr><td><code>basePlanId</code></td><td>String</td><td>æ˜¯</td><td>Base Plan ID</td></tr><tr><td><code>offerId</code></td><td>String</td><td>å¦</td><td>Offer IDï¼ˆæœ‰ä¼˜æƒ æ—¶å¿…å¡«ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-15">æ­¥éª¤ 3: ç›‘å¬æ”¯ä»˜äº‹ä»¶</h4>
<p>ä½¿ç”¨ <code>observePayEvent</code> ç›‘å¬è®¢é˜…ç»“æœã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsFragment</span> : <span class="hljs-type">Fragment</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        <span class="hljs-comment">// ç›‘å¬æ”¯ä»˜äº‹ä»¶</span>
        observePayEvent { event -&gt;
            <span class="hljs-keyword">when</span> (event) {
                <span class="hljs-keyword">is</span> BillingPayEvent.PaySuccessful -&gt; {
                    <span class="hljs-comment">// è®¢é˜…æˆåŠŸ</span>
                    Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"è®¢é˜…æˆåŠŸ: <span class="hljs-subst">${event.purchase.orderId}</span>"</span>)
                    showLoading(<span class="hljs-string">"æ­£åœ¨æ¿€æ´»è®¢é˜…..."</span>)
                    
                    <span class="hljs-comment">// æ³¨æ„ï¼šè®¢é˜…å•†å“ä¸ä¼šè§¦å‘ PayConsumeSuccessful</span>
                    <span class="hljs-comment">// éœ€è¦åœ¨æœåŠ¡ç«¯éªŒè¯åæ‰‹åŠ¨ç¡®è®¤</span>
                }
                
                <span class="hljs-keyword">is</span> BillingPayEvent.PayFailed -&gt; {
                    <span class="hljs-comment">// è®¢é˜…å¤±è´¥</span>
                    hideLoading()
                    showToast(<span class="hljs-string">"è®¢é˜…å¤±è´¥: <span class="hljs-subst">${event.message}</span>"</span>)
                    Log.e(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"è®¢é˜…å¤±è´¥: code=<span class="hljs-subst">${event.code}</span>, msg=<span class="hljs-subst">${event.message}</span>"</span>)
                }
                
                <span class="hljs-keyword">is</span> BillingPayEvent.PayConsumeSuccessful -&gt; {
                    <span class="hljs-comment">// è®¢é˜…å•†å“ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶</span>
                }
                
                <span class="hljs-keyword">is</span> BillingPayEvent.PayConsumeFailed -&gt; {
                    <span class="hljs-comment">// è®¢é˜…å•†å“ä¸ä¼šè§¦å‘æ­¤äº‹ä»¶</span>
                }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-16">æ­¥éª¤ 4: æœåŠ¡ç«¯éªŒè¯å’Œç¡®è®¤</h4>
<p>åœ¨ <code>GooglePayService.handlePurchasesProcess()</code> ä¸­å®ç°è®¢é˜…éªŒè¯å’Œç¡®è®¤é€»è¾‘ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> : <span class="hljs-type">Application</span>(), GooglePayService {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handlePurchasesProcess</span><span class="hljs-params">(
        isPay: <span class="hljs-type">Boolean</span>,
        productType: <span class="hljs-type">BillingProductType</span>,
        purchases: <span class="hljs-type">Purchase</span>
    )</span></span> {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ˜¯è®¢é˜…å•†å“</span>
        <span class="hljs-keyword">if</span> (productType != BillingProductType.SUBS) <span class="hljs-keyword">return</span>
        
        <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹å¤„ç†</span>
        CoroutineScope(Dispatchers.IO).launch {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// 1. æå–è®¢å•ä¿¡æ¯</span>
                <span class="hljs-keyword">val</span> productId = purchases.products.firstOrNull() ?: <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
                <span class="hljs-keyword">val</span> purchaseToken = purchases.purchaseToken
                <span class="hljs-keyword">val</span> orderId = purchases.orderId
                <span class="hljs-keyword">val</span> accountId = purchases.accountIdentifiers?.obfuscatedAccountId
                
                Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"å¤„ç†è®¢é˜…: orderId=<span class="hljs-variable">$orderId</span>, productId=<span class="hljs-variable">$productId</span>"</span>)
                
                <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦å·²ç¡®è®¤</span>
                <span class="hljs-keyword">if</span> (purchases.isAcknowledged) {
                    Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"è®¢é˜…å·²ç¡®è®¤ï¼Œè·³è¿‡å¤„ç†"</span>)
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
                }
                
                <span class="hljs-comment">// 3. è°ƒç”¨ä¸šåŠ¡æœåŠ¡å™¨éªŒè¯è®¢é˜…</span>
                <span class="hljs-keyword">val</span> verifyResult = verifySubscriptionOnServer(
                    productId = productId,
                    purchaseToken = purchaseToken,
                    orderId = orderId,
                    accountId = accountId
                )
                
                <span class="hljs-keyword">if</span> (verifyResult.success) {
                    <span class="hljs-comment">// 4. éªŒè¯æˆåŠŸï¼Œå‘æ”¾è®¢é˜…æƒç›Š</span>
                    Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"è®¢é˜…éªŒè¯æˆåŠŸï¼Œæ­£åœ¨ç¡®è®¤..."</span>)
                    
                    <span class="hljs-comment">// 5. ç¡®è®¤è®¢é˜…ï¼ˆé‡è¦ï¼ï¼‰</span>
                    acknowledgePurchase(purchases)
                    
                } <span class="hljs-keyword">else</span> {
                    Log.e(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"è®¢é˜…éªŒè¯å¤±è´¥: <span class="hljs-subst">${verifyResult.message}</span>"</span>)
                }
                
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                Log.e(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"å¤„ç†è®¢é˜…å¼‚å¸¸"</span>, e)
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">acknowledgePurchase</span><span class="hljs-params">(purchase: <span class="hljs-type">Purchase</span>)</span></span> {
        withContext(Dispatchers.IO) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// è°ƒç”¨ Google Play Billing API ç¡®è®¤è®¢é˜…</span>
                <span class="hljs-keyword">val</span> billingClient = GooglePayClient.getInstance().getBillingClient()
                <span class="hljs-keyword">val</span> params = AcknowledgePurchaseParams.newBuilder()
                    .setPurchaseToken(purchase.purchaseToken)
                    .build()
                
                <span class="hljs-keyword">val</span> result = billingClient.acknowledgePurchase(params)
                
                <span class="hljs-keyword">if</span> (result.responseCode == BillingClient.BillingResponseCode.OK) {
                    Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"è®¢é˜…ç¡®è®¤æˆåŠŸ"</span>)
                    <span class="hljs-comment">// é€šçŸ¥ç”¨æˆ·è®¢é˜…å·²æ¿€æ´»</span>
                    notifySubscriptionActivated()
                } <span class="hljs-keyword">else</span> {
                    Log.e(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"è®¢é˜…ç¡®è®¤å¤±è´¥: <span class="hljs-subst">${result.debugMessage}</span>"</span>)
                }
                
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                Log.e(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"ç¡®è®¤è®¢é˜…å¼‚å¸¸"</span>, e)
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">verifySubscriptionOnServer</span><span class="hljs-params">(
        productId: <span class="hljs-type">String</span>,
        purchaseToken: <span class="hljs-type">String</span>,
        orderId: <span class="hljs-type">String</span>?,
        accountId: <span class="hljs-type">String</span>?
    )</span></span>: VerifyResult {
        <span class="hljs-keyword">return</span> withContext(Dispatchers.IO) {
            <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡æœåŠ¡å™¨ API éªŒè¯è®¢é˜…</span>
            <span class="hljs-comment">// æœåŠ¡å™¨åº”è¯¥ï¼š</span>
            <span class="hljs-comment">// 1. éªŒè¯ purchaseToken çš„æœ‰æ•ˆæ€§ï¼ˆè°ƒç”¨ Google Play Developer APIï¼‰</span>
            <span class="hljs-comment">// 2. æ£€æŸ¥è®¢é˜…æ˜¯å¦å·²ç»å¤„ç†è¿‡</span>
            <span class="hljs-comment">// 3. å‘æ”¾è®¢é˜…æƒç›Šç»™ç”¨æˆ·</span>
            <span class="hljs-comment">// 4. è¿”å›éªŒè¯ç»“æœ</span>
            
            <span class="hljs-keyword">val</span> response = apiService.verifySubscription(
                productId, purchaseToken, orderId, accountId
            )
            VerifyResult(response.success, response.message)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">notifySubscriptionActivated</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å‘é€é€šçŸ¥æˆ–äº‹ä»¶ï¼Œå‘ŠçŸ¥ç”¨æˆ·è®¢é˜…å·²æ¿€æ´»</span>
    }
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VerifyResult</span>(<span class="hljs-keyword">val</span> success: <span class="hljs-built_in">Boolean</span>, <span class="hljs-keyword">val</span> message: String)
}
</code></pre>
<h4 data-id="heading-17">æ­¥éª¤ 5: æŸ¥è¯¢å½“å‰è®¢é˜…çŠ¶æ€</h4>
<p>æŸ¥è¯¢ç”¨æˆ·å½“å‰æœ‰æ•ˆçš„è®¢é˜…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubscriptionViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance()
        .getPayService&lt;SubscriptionService&gt;()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _activeSubscriptions = MutableLiveData&lt;List&lt;Purchase&gt;&gt;()
    <span class="hljs-keyword">val</span> activeSubscriptions: LiveData&lt;List&lt;Purchase&gt;&gt; = _activeSubscriptions
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryActiveSubscriptions</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// æŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„è®¢é˜…</span>
            subscriptionService.queryAckSubscribePurchases(<span class="hljs-literal">null</span>).collect { result -&gt;
                result.onSuccess { purchases -&gt;
                    _activeSubscriptions.value = purchases
                    Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"å½“å‰æœ‰æ•ˆè®¢é˜…: <span class="hljs-subst">${purchases.size}</span> ä¸ª"</span>)
                    
                    purchases.forEach { purchase -&gt;
                        Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"è®¢é˜…: <span class="hljs-subst">${purchase.products.firstOrNull()}</span>"</span>)
                        Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"è®¢å•ID: <span class="hljs-subst">${purchase.orderId}</span>"</span>)
                        Log.d(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"æ˜¯å¦å·²ç¡®è®¤: <span class="hljs-subst">${purchase.isAcknowledged}</span>"</span>)
                    }
                }
                result.onFailure { error -&gt;
                    Log.e(<span class="hljs-string">"Subs"</span>, <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">${error.message}</span>"</span>)
                }
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkSubscriptionStatus</span><span class="hljs-params">(productId: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è®¢é˜…äº†æŒ‡å®šå•†å“</span>
        <span class="hljs-keyword">return</span> activeSubscriptions.value?.any { purchase -&gt;
            purchase.products.contains(productId) &amp;&amp; purchase.isAcknowledged
        } ?: <span class="hljs-literal">false</span>
    }
}
</code></pre>
<h3 data-id="heading-18">4. è®¢é˜…ç®¡ç†</h3>
<h4 data-id="heading-19">4.1 å‡çº§/é™çº§è®¢é˜…</h4>
<p>åœ¨å•è®¢é˜…æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·å¯ä»¥å‡çº§æˆ–é™çº§è®¢é˜…ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">upgradeSubscription</span><span class="hljs-params">(
    oldProductId: <span class="hljs-type">String</span>,
    newProductId: <span class="hljs-type">String</span>,
    newBasePlanId: <span class="hljs-type">String</span>
)</span></span> {
    lifecycleScope.launch {
        <span class="hljs-comment">// 1. æŸ¥è¯¢å½“å‰è®¢é˜…</span>
        <span class="hljs-keyword">val</span> currentPurchase = findCurrentPurchase(oldProductId)
        
        <span class="hljs-keyword">if</span> (currentPurchase == <span class="hljs-literal">null</span>) {
            showToast(<span class="hljs-string">"æœªæ‰¾åˆ°å½“å‰è®¢é˜…"</span>)
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@launch</span>
        }
        
        <span class="hljs-comment">// 2. æ„å»ºå‡çº§å‚æ•°</span>
        <span class="hljs-keyword">val</span> params = BillingSubsParams.Builder()
            .setAccountId(<span class="hljs-string">"user_12345"</span>)
            .setProductId(newProductId)
            .setBasePlanId(newBasePlanId)
            .setOldPurchaseToken(currentPurchase.purchaseToken)  <span class="hljs-comment">// å…³é”®ï¼šä¼ å…¥æ—§è®¢é˜…çš„ token</span>
            .build()
        
        <span class="hljs-comment">// 3. å‘èµ·å‡çº§</span>
        <span class="hljs-keyword">val</span> result = subscriptionService.launchBillingFlow(
            requireActivity(),
            params
        )
        
        <span class="hljs-keyword">if</span> (result.code == AppBillingResponseCode.OK) {
            showToast(<span class="hljs-string">"æ­£åœ¨å‡çº§è®¢é˜…..."</span>)
        }
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">findCurrentPurchase</span><span class="hljs-params">(productId: <span class="hljs-type">String</span>)</span></span>: Purchase? {
    <span class="hljs-comment">// æŸ¥è¯¢å½“å‰è®¢é˜…</span>
    <span class="hljs-keyword">var</span> purchase: Purchase? = <span class="hljs-literal">null</span>
    subscriptionService.queryAckSubscribePurchases(<span class="hljs-literal">null</span>).collect { result -&gt;
        result.onSuccess { purchases -&gt;
            purchase = purchases.find { it.products.contains(productId) }
        }
    }
    <span class="hljs-keyword">return</span> purchase
}
</code></pre>
<h4 data-id="heading-20">4.2 å–æ¶ˆè®¢é˜…</h4>
<p>ç”¨æˆ·éœ€è¦åœ¨ Google Play ä¸­å–æ¶ˆè®¢é˜…ï¼Œåº”ç”¨å¯ä»¥å¼•å¯¼ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">navigateToSubscriptionManagement</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> intent = Intent(Intent.ACTION_VIEW).apply {
            <span class="hljs-keyword">data</span> = Uri.parse(<span class="hljs-string">"https://play.google.com/store/account/subscriptions"</span>)
        }
        startActivity(intent)
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        showToast(<span class="hljs-string">"æ— æ³•æ‰“å¼€è®¢é˜…ç®¡ç†é¡µé¢"</span>)
    }
}
</code></pre>
<h4 data-id="heading-21">4.3 è®¢é˜…çŠ¶æ€æ£€æŸ¥</h4>
<p>å®šæœŸæ£€æŸ¥è®¢é˜…çŠ¶æ€ï¼Œå¤„ç†è¿‡æœŸã€æš‚åœç­‰æƒ…å†µã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkAndUpdateSubscriptionStatus</span><span class="hljs-params">()</span></span> {
    lifecycleScope.launch {
        subscriptionService.queryAckSubscribePurchases(<span class="hljs-literal">null</span>).collect { result -&gt;
            result.onSuccess { purchases -&gt;
                <span class="hljs-keyword">if</span> (purchases.isEmpty()) {
                    <span class="hljs-comment">// ç”¨æˆ·æ²¡æœ‰æœ‰æ•ˆè®¢é˜…</span>
                    updateUserSubscriptionStatus(<span class="hljs-literal">false</span>)
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// ç”¨æˆ·æœ‰æœ‰æ•ˆè®¢é˜…</span>
                    updateUserSubscriptionStatus(<span class="hljs-literal">true</span>)
                    
                    <span class="hljs-comment">// æ£€æŸ¥è®¢é˜…è¯¦æƒ…</span>
                    purchases.forEach { purchase -&gt;
                        checkPurchaseDetails(purchase)
                    }
                }
            }
        }
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkPurchaseDetails</span><span class="hljs-params">(purchase: <span class="hljs-type">Purchase</span>)</span></span> {
    <span class="hljs-comment">// æ£€æŸ¥è®¢é˜…æ˜¯å¦åœ¨å®½é™æœŸ</span>
    <span class="hljs-comment">// æ£€æŸ¥è®¢é˜…æ˜¯å¦åœ¨è´¦å·ä¿ç•™æœŸ</span>
    <span class="hljs-comment">// è¿™äº›ä¿¡æ¯éœ€è¦é€šè¿‡ Google Play Developer API åœ¨æœåŠ¡ç«¯æŸ¥è¯¢</span>
}
</code></pre>
<h3 data-id="heading-22">5. å®Œæ•´ä»£ç ç¤ºä¾‹</h3>
<h4 data-id="heading-23">Fragment å®Œæ•´å®ç°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsFragment</span> : <span class="hljs-type">Fragment</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentSubsBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> viewModel <span class="hljs-keyword">by</span> viewModels&lt;SubsViewModel&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> adapter = SubscriptionAdapter()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance()
        .getPayService&lt;SubscriptionService&gt;()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>,
        container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentSubsBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)
        
        setupRecyclerView()
        observeSubscriptions()
        observePayEvents()
        
        <span class="hljs-comment">// åŠ è½½è®¢é˜…åˆ—è¡¨</span>
        viewModel.loadSubscriptions()
        
        <span class="hljs-comment">// æŸ¥è¯¢å½“å‰è®¢é˜…çŠ¶æ€</span>
        viewModel.queryActiveSubscriptions()
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupRecyclerView</span><span class="hljs-params">()</span></span> {
        binding.recyclerView.apply {
            layoutManager = GridLayoutManager(requireContext(), <span class="hljs-number">2</span>)
            adapter = <span class="hljs-keyword">this</span><span class="hljs-symbol">@SubsFragment</span>.adapter
        }
        
        adapter.setOnItemClickListener { subscription -&gt;
            purchaseSubscription(subscription)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">observeSubscriptions</span><span class="hljs-params">()</span></span> {
        viewModel.subscriptions.observe(viewLifecycleOwner) { subscriptions -&gt;
            adapter.submitList(subscriptions)
        }
        
        viewModel.activeSubscriptions.observe(viewLifecycleOwner) { purchases -&gt;
            updateSubscriptionStatus(purchases)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">observePayEvents</span><span class="hljs-params">()</span></span> {
        observePayEvent { event -&gt;
            <span class="hljs-keyword">when</span> (event) {
                <span class="hljs-keyword">is</span> BillingPayEvent.PaySuccessful -&gt; {
                    showLoading(<span class="hljs-string">"æ­£åœ¨æ¿€æ´»è®¢é˜…..."</span>)
                }
                
                <span class="hljs-keyword">is</span> BillingPayEvent.PayFailed -&gt; {
                    hideLoading()
                    showToast(<span class="hljs-string">"è®¢é˜…å¤±è´¥: <span class="hljs-subst">${event.message}</span>"</span>)
                }
                
                <span class="hljs-keyword">else</span> -&gt; {
                    <span class="hljs-comment">// è®¢é˜…å•†å“ä¸ä¼šè§¦å‘æ¶ˆè€—ç›¸å…³äº‹ä»¶</span>
                }
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">purchaseSubscription</span><span class="hljs-params">(subscription: <span class="hljs-type">SubscriptionData</span>)</span></span> {
        lifecycleScope.launch {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> params = BillingSubsParams.Builder()
                    .setAccountId(viewModel.getUserId())
                    .setProductId(subscription.productId)
                    .setBasePlanId(subscription.basePlanId)
                    .setOfferId(subscription.offerId)
                    .build()
                
                <span class="hljs-keyword">val</span> result = subscriptionService.launchBillingFlow(
                    requireActivity(),
                    params
                )
                
                <span class="hljs-keyword">if</span> (result.code != AppBillingResponseCode.OK) {
                    showToast(result.message)
                }
                
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                showToast(<span class="hljs-string">"è®¢é˜…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateSubscriptionStatus</span><span class="hljs-params">(purchases: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Purchase</span>&gt;)</span></span> {
        <span class="hljs-comment">// æ›´æ–° UI æ˜¾ç¤ºè®¢é˜…çŠ¶æ€</span>
        binding.subscriptionStatus.text = <span class="hljs-keyword">if</span> (purchases.isNotEmpty()) {
            <span class="hljs-string">"å·²è®¢é˜…"</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-string">"æœªè®¢é˜…"</span>
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<h4 data-id="heading-24">ViewModel å®ç°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance()
        .getPayService&lt;SubscriptionService&gt;()
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _subscriptions = MutableLiveData&lt;List&lt;SubscriptionData&gt;&gt;()
    <span class="hljs-keyword">val</span> subscriptions: LiveData&lt;List&lt;SubscriptionData&gt;&gt; = _subscriptions
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _activeSubscriptions = MutableLiveData&lt;List&lt;Purchase&gt;&gt;()
    <span class="hljs-keyword">val</span> activeSubscriptions: LiveData&lt;List&lt;Purchase&gt;&gt; = _activeSubscriptions
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadSubscriptions</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-keyword">val</span> params = SubsOfferParams.Builder()
                .setProductIds(listOf(<span class="hljs-string">"monthly_vip"</span>, <span class="hljs-string">"yearly_vip"</span>))
                .build()
            
            subscriptionService.querySubsOfferDetails(params).collect { result -&gt;
                result.onSuccess { list -&gt;
                    <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = list.map { sub -&gt;
                        SubscriptionData(
                            productId = sub.productId,
                            productName = sub.productName,
                            basePlanId = <span class="hljs-string">"monthly-plan"</span>,  <span class="hljs-comment">// å®é™…éœ€è¦ä»è®¢é˜…è¯¦æƒ…ä¸­æå–</span>
                            offerId = <span class="hljs-literal">null</span>,
                            pricingPhases = sub.pricingPhases
                        )
                    }
                    _subscriptions.value = <span class="hljs-keyword">data</span>
                }
                result.onFailure { Log.e(<span class="hljs-string">"VM"</span>, <span class="hljs-string">"åŠ è½½å¤±è´¥"</span>, it) }
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">queryActiveSubscriptions</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            subscriptionService.queryAckSubscribePurchases(<span class="hljs-literal">null</span>).collect { result -&gt;
                result.onSuccess { _activeSubscriptions.value = it }
                result.onFailure { Log.e(<span class="hljs-string">"VM"</span>, <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>, it) }
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getUserId</span><span class="hljs-params">()</span></span>: String {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"user_12345"</span>
    }
}
</code></pre>
<h3 data-id="heading-25">6. è®¢é˜…ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; æœªè®¢é˜…
    æœªè®¢é˜… --&gt; è¯•ç”¨æœŸ: å¼€å§‹è¯•ç”¨
    æœªè®¢é˜… --&gt; æ­£å¸¸è®¢é˜…: ç›´æ¥è®¢é˜…
    è¯•ç”¨æœŸ --&gt; æ­£å¸¸è®¢é˜…: è¯•ç”¨ç»“æŸ
    è¯•ç”¨æœŸ --&gt; å·²å–æ¶ˆ: å–æ¶ˆè®¢é˜…
    æ­£å¸¸è®¢é˜… --&gt; æ­£å¸¸è®¢é˜…: è‡ªåŠ¨ç»­è®¢
    æ­£å¸¸è®¢é˜… --&gt; å·²å–æ¶ˆ: å–æ¶ˆè®¢é˜…
    æ­£å¸¸è®¢é˜… --&gt; å®½é™æœŸ: æ”¯ä»˜å¤±è´¥
    å®½é™æœŸ --&gt; æ­£å¸¸è®¢é˜…: æ”¯ä»˜æˆåŠŸ
    å®½é™æœŸ --&gt; è´¦å·ä¿ç•™æœŸ: å®½é™æœŸç»“æŸ
    è´¦å·ä¿ç•™æœŸ --&gt; æ­£å¸¸è®¢é˜…: æ¢å¤è®¢é˜…
    è´¦å·ä¿ç•™æœŸ --&gt; å·²è¿‡æœŸ: ä¿ç•™æœŸç»“æŸ
    å·²å–æ¶ˆ --&gt; å·²è¿‡æœŸ: åˆ°æœŸ
    å·²è¿‡æœŸ --&gt; [*]
</code></pre>
<h3 data-id="heading-26">7. å¸¸è§é—®é¢˜</h3>
<h4 data-id="heading-27">Q1: è®¢é˜…æ¨¡å¼å¦‚ä½•é€‰æ‹©ï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li><strong>SingleMode</strong>: é€‚ç”¨äºä¼šå‘˜ç­‰çº§ç³»ç»Ÿï¼Œç”¨æˆ·åªèƒ½åŒæ—¶æ‹¥æœ‰ä¸€ä¸ªè®¢é˜…ï¼ˆå¦‚æ™®é€šä¼šå‘˜ã€VIPã€SVIPï¼‰</li>
<li><strong>MultiModal</strong>: é€‚ç”¨äºå¤šä¸ªç‹¬ç«‹åŠŸèƒ½è®¢é˜…ï¼Œç”¨æˆ·å¯ä»¥åŒæ—¶è®¢é˜…å¤šä¸ªï¼ˆå¦‚å»å¹¿å‘Š + äº‘å­˜å‚¨ï¼‰</li>
</ul>
<h4 data-id="heading-28">Q2: å¦‚ä½•è·å– Offer Tokenï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li>Offer Token åœ¨æŸ¥è¯¢è®¢é˜…è¯¦æƒ…æ—¶è¿”å›</li>
<li>éœ€è¦ä» <code>AppSubscribeDetails</code> ä¸­æå–</li>
<li>å¦‚æœæ²¡æœ‰ä¼˜æƒ ï¼Œå¯ä»¥ä¸è®¾ç½® <code>offerId</code></li>
</ul>
<h4 data-id="heading-29">Q3: è®¢é˜…ç¡®è®¤å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li>ç”¨æˆ·ä¸‹æ¬¡å¯åŠ¨åº”ç”¨æ—¶ï¼Œåº“ä¼šè‡ªåŠ¨é‡æ–°æŸ¥è¯¢æœªç¡®è®¤çš„è®¢é˜…</li>
<li>åœ¨ <code>handlePurchasesProcess</code> ä¸­ä¼šå†æ¬¡è§¦å‘ç¡®è®¤æµç¨‹</li>
<li>å»ºè®®åœ¨æœåŠ¡ç«¯è®°å½•ç¡®è®¤çŠ¶æ€</li>
</ul>
<h4 data-id="heading-30">Q4: å¦‚ä½•å¤„ç†è®¢é˜…å†²çªï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li>åœ¨ SingleMode ä¸‹ï¼Œè´­ä¹°æ–°è®¢é˜…ä¼šè‡ªåŠ¨æ›¿æ¢æ—§è®¢é˜…</li>
<li>éœ€è¦ä¼ å…¥æ—§è®¢é˜…çš„ <code>purchaseToken</code> è¿›è¡Œå‡çº§/é™çº§</li>
<li>Google Play ä¼šè‡ªåŠ¨å¤„ç†é€€æ¬¾å’Œè®¡è´¹</li>
</ul>
<h4 data-id="heading-31">Q5: å®½é™æœŸå’Œè´¦å·ä¿ç•™æœŸæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ul>
<li><strong>å®½é™æœŸ</strong>: æ”¯ä»˜å¤±è´¥åï¼Œç»™ç”¨æˆ·ä¸€æ®µæ—¶é—´æ›´æ–°æ”¯ä»˜æ–¹å¼ï¼ŒæœŸé—´ä»å¯ä½¿ç”¨è®¢é˜…</li>
<li><strong>è´¦å·ä¿ç•™æœŸ</strong>: å®½é™æœŸç»“æŸåï¼Œæš‚åœè®¢é˜…ä½†ä¿ç•™ç”¨æˆ·æ•°æ®ï¼Œç­‰å¾…ç”¨æˆ·æ¢å¤è®¢é˜…</li>
<li>è¿™äº›çŠ¶æ€éœ€è¦é€šè¿‡ Google Play Developer API åœ¨æœåŠ¡ç«¯æŸ¥è¯¢</li>
</ul>
<h4 data-id="heading-32">Q6: å¦‚ä½•æµ‹è¯•è®¢é˜…ï¼Ÿ</h4>
<p><strong>A</strong>:</p>
<ol>
<li>åœ¨ Google Play Console ä¸­æ·»åŠ æµ‹è¯•è´¦å·</li>
<li>ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•è®¾å¤‡</li>
<li>æµ‹è¯•è®¢é˜…ä¼šåŠ é€Ÿåˆ°æœŸï¼ˆå¦‚æœˆè®¢é˜…å˜ä¸º 5 åˆ†é’Ÿï¼‰</li>
<li>å¯ä»¥æµ‹è¯•ç»­è®¢ã€å–æ¶ˆã€æ¢å¤ç­‰æµç¨‹</li>
</ol>
<h3 data-id="heading-33">8. æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>æœåŠ¡ç«¯éªŒè¯</strong>: å§‹ç»ˆåœ¨æœåŠ¡ç«¯éªŒè¯è®¢é˜…å‡­è¯ï¼Œä¸è¦ä»…ä¾èµ–å®¢æˆ·ç«¯</li>
<li><strong>åŠæ—¶ç¡®è®¤</strong>: è®¢é˜…æˆåŠŸåå¿…é¡»åœ¨ 3 å¤©å†…ç¡®è®¤ï¼Œå¦åˆ™ä¼šè‡ªåŠ¨é€€æ¬¾</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>: å®šæœŸæŸ¥è¯¢è®¢é˜…çŠ¶æ€ï¼Œä¿æŒå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çŠ¶æ€ä¸€è‡´</li>
<li><strong>ä¼˜é›…é™çº§</strong>: è®¢é˜…è¿‡æœŸåï¼Œä¼˜é›…åœ°é™çº§ç”¨æˆ·æƒç›Šï¼Œå¼•å¯¼ç»­è®¢</li>
<li><strong>ç”¨æˆ·å¼•å¯¼</strong>: æä¾›æ¸…æ™°çš„è®¢é˜…ç®¡ç†å…¥å£ï¼Œæ–¹ä¾¿ç”¨æˆ·æŸ¥çœ‹å’Œç®¡ç†è®¢é˜…</li>
<li><strong>é”™è¯¯å¤„ç†</strong>: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º</li>
<li><strong>æµ‹è¯•</strong>: å……åˆ†æµ‹è¯•å„ç§åœºæ™¯ï¼ˆæ–°è®¢é˜…ã€ç»­è®¢ã€å‡çº§ã€é™çº§ã€å–æ¶ˆç­‰ï¼‰</li>
</ol>
<h3 data-id="heading-34">9. ç›¸å…³æ–‡æ¡£</h3>
<ul>
<li><a href="https://juejin.cn/post/7579427549471735854" target="_blank" title="https://juejin.cn/post/7579427549471735854">Google Play ç»“ç®—ç³»ç»Ÿå…¥é—¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7579436743260274707" target="_blank" title="https://juejin.cn/post/7579436743260274707">GooglePay: API æ–‡æ¡£</a></li>
<li><a href="https://juejin.cn/post/7579438351297740836" target="_blank" title="https://juejin.cn/post/7579438351297740836">GooglePay æ¶ˆè€—å•†å“è´­ä¹°æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fgoogle%2Fplay%2Fbilling%2Fsubscriptions" target="_blank" title="https://developer.android.com/google/play/billing/subscriptions" ref="nofollow noopener noreferrer">Google Play Billing å®˜æ–¹æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7578877638988759040</link>    <guid>https://juejin.cn/post/7578877638988759040</guid>    <pubDate>2025-12-02T09:06:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578877638988759040" data-draft-id="7576482238461198378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T09:06:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€è¯ºæ»šé›ªçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/2824015112318094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯è·¨é¡µé¢é€šè®¯ç»ˆææŒ‡å—â‘¢ï¼šLocalStorage ç”¨æ³•å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2824015112318094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€è¯ºæ»šé›ªçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T09:06:16.000Z" title="Tue Dec 02 2025 09:06:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šä¸€ç¯‡ä»‹ç»äº†<strong>BroadcastChannel</strong>è·¨é¡µé¢é€šè®¯çš„æ–¹å¼ã€‚ä»Šå¤©ä»‹ç»ä¸€ç§æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„æ–¹å¼<strong>LocalStorage</strong> ã€‚å‡­æµè§ˆå™¨åŸç”Ÿæ¥å£å°±èƒ½å®ç°æ•°æ®å…±äº«ï¼Œç”¨æ³•ç®€æ´é«˜æ•ˆã€‚éœ€è¦æ³¨æ„ï¼Œä»…æ”¯æŒ<strong>åŒæºé¡µé¢</strong>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸‹LocalStorage çš„è·¨é¡µé€šè®¯çš„ç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">1. LocalStorageä¸ºä»€ä¹ˆèƒ½è·¨é¡µé€šè®¯ï¼Ÿ</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“LocalStorageâ€”â€”å®ƒæ˜¯æµè§ˆå™¨æä¾›çš„<strong>åŒæºæœ¬åœ°å­˜å‚¨æ–¹æ¡ˆ</strong>ï¼Œæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œç”Ÿå‘½å‘¨æœŸä¸ºæ°¸ä¹…ï¼ˆé™¤éæ‰‹åŠ¨åˆ é™¤æˆ–æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ï¼‰ã€‚</p>
<p>å®ƒèƒ½å®ç°è·¨é¡µé€šè®¯çš„å…³é”®ï¼Œåœ¨äºä¸¤ä¸ªæ ¸å¿ƒæœºåˆ¶ï¼š</p>
<h3 data-id="heading-2">1.1 åŒæºæ•°æ®å…±äº«æœºåˆ¶</h3>
<p>LocalStorage çš„æ•°æ®ä¸¥æ ¼éµå¾ªâ€œåŒæºç­–ç•¥â€ï¼Œå³åŒä¸€åè®®ï¼ˆhttp/httpsï¼‰ã€åŒä¸€åŸŸåã€åŒä¸€ç«¯å£ä¸‹çš„æ‰€æœ‰é¡µé¢ï¼Œéƒ½èƒ½è¯»å–å’Œä¿®æ”¹åŒä¸€ä¸ª LocalStorage å®ä¾‹ä¸­çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-3">1.2 storage äº‹ä»¶è§¦å‘æœºåˆ¶</h3>
<p>LocalStorage å®ç°â€œé€šè®¯â€è€Œéå•çº¯â€œæ•°æ®å­˜å‚¨â€çš„æ ¸å¿ƒã€‚å½“ä¸€ä¸ªé¡µé¢ä¿®æ”¹äº† LocalStorage ä¸­çš„æ•°æ®æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å‘åŒæºä¸‹çš„æ‰€æœ‰å…¶ä»–é¡µé¢è§¦å‘ä¸€ä¸ª <code>storage</code> äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šæºå¸¦ä¿®æ”¹å‰ã€ä¿®æ”¹åçš„æ•°æ®åŠé”®åç­‰ä¿¡æ¯ã€‚å…¶ä»–é¡µé¢é€šè¿‡ç›‘å¬è¿™ä¸ªäº‹ä»¶ï¼Œå°±èƒ½å®æ—¶æ„ŸçŸ¥æ•°æ®å˜åŒ–ï¼Œä»è€Œå®Œæˆè·¨é¡µé€šè®¯ã€‚</p>
<p>æ³¨æ„ï¼šå½“å‰é¡µé¢ä¿®æ”¹ LocalStorage æ—¶ï¼Œè‡ªèº«ä¸ä¼šè§¦å‘ storage äº‹ä»¶ï¼Œåªæœ‰åŒæºçš„å…¶ä»–é¡µé¢æ‰ä¼šæ”¶åˆ°é€šçŸ¥ï¼</p>
<h3 data-id="heading-4">1.3 LocalStorageé€šè®¯æµç¨‹</h3>
<p>LocalStorage è·¨é¡µé€šè®¯çš„æ ¸å¿ƒæµç¨‹æ˜¯ï¼š</p>
<ol>
<li>é¡µé¢Aä¿®æ”¹ LocalStorage æ•°æ® â†’ æµè§ˆå™¨å‘åŒæºå…¶ä»–é¡µé¢å‘é€ storage äº‹ä»¶</li>
<li>é¡µé¢B/C/D ç›‘å¬äº‹ä»¶å¹¶è·å–æ•°æ®å˜åŒ–ã€‚</li>
</ol>
<h2 data-id="heading-5">2. å®è·µæ¡ˆä¾‹</h2>
<p>é€šè¿‡ä¸Šé¢çš„è¯´æ˜ï¼Œä½œä¸ºæ•°æ®å‘é€æ–¹ï¼Œé€šè¿‡ä¿®æ”¹ LocalStorage å­˜å‚¨æ•°æ®ï¼›ä½œä¸ºæ¥æ”¶æ–¹ï¼Œç›‘å¬ storage äº‹ä»¶è·å–çˆ¶é¡µé¢ä¼ é€’çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å®è·µä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-6">2.1 æ­¥éª¤1ï¼šæ•°æ®å‘é€</h3>
<p>é€šè¿‡ <code>localStorage.setItem()</code> å­˜å‚¨æ•°æ®ï¼Œè§¦å‘ storage äº‹ä»¶ã€‚ä¸ºé¿å…æ•°æ®è¦†ç›–ï¼Œå»ºè®®ç»™é”®åæ·»åŠ åœºæ™¯æ ‡è¯†ï¼ˆå¦‚ <code>parent-to-iframe-msg</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‘é€æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sendToIframe</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-comment">// 1. å­˜å‚¨æ•°æ®åˆ° LocalStorageï¼Œé”®åéœ€å”¯ä¸€æ ‡è¯†é€šè®¯åœºæ™¯</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'parent-to-iframe-msg'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-comment">// é˜²æ­¢æ•°æ®ç¼“å­˜å¯¼è‡´äº‹ä»¶ä¸è§¦å‘</span>
    <span class="hljs-attr">content</span>: data
  }));
  
  <span class="hljs-comment">// 2. å¯é€‰ï¼šè‹¥éœ€é‡å¤å‘é€ç›¸åŒæ•°æ®ï¼Œå¯å…ˆåˆ é™¤å†æ·»åŠ ï¼ˆstorage äº‹ä»¶ä»…åœ¨å€¼å˜åŒ–æ—¶è§¦å‘ï¼‰</span>
  <span class="hljs-comment">// localStorage.removeItem('parent-to-iframe-msg');</span>
}

<span class="hljs-comment">// è°ƒç”¨æ–¹æ³•å‘é€æ•°æ®ï¼ˆç¤ºä¾‹ï¼šä¼ é€’ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
<span class="hljs-title function_">sendToIframe</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">'å‰ç«¯å°åŠ©æ‰‹'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>
});
</code></pre>
<h3 data-id="heading-7">2.2 æ­¥éª¤2ï¼šæ•°æ®æ¥æ”¶</h3>
<p>æ¥æ”¶æ–¹é¡µé¢é€šè¿‡ç›‘å¬ <code>window.addEventListener('storage', callback)</code> æ•è·æ•°æ®å˜åŒ–ï¼Œè§£æåè·å–é¡µé¢ä¼ é€’çš„å†…å®¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬çˆ¶é¡µé¢å‘é€çš„æ•°æ®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. ä»…å¤„ç†ç›®æ ‡é”®åçš„æ•°æ®å˜åŒ–ï¼Œé¿å…æ— å…³äº‹ä»¶å¹²æ‰°</span>
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> !== <span class="hljs-string">'parent-to-iframe-msg'</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-comment">// 2. è§£ææ•°æ®ï¼ˆæ³¨æ„ï¼šåˆå§‹çŠ¶æ€ä¸‹ e.newValue å¯èƒ½ä¸º nullï¼‰</span>
  <span class="hljs-keyword">if</span> (!e.<span class="hljs-property">newValue</span>) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> { timestamp, content } = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(e.<span class="hljs-property">newValue</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'iframe æ”¶åˆ°çˆ¶é¡µé¢æ•°æ®ï¼š'</span>, content);
  
  <span class="hljs-comment">// 3. ä¸šåŠ¡å¤„ç†ï¼šå¦‚æ¸²æŸ“ç”¨æˆ·ä¿¡æ¯</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'user-info'</span>).<span class="hljs-property">innerText</span> = <span class="hljs-string">`ç”¨æˆ·åï¼š<span class="hljs-subst">${content.username}</span>ï¼Œè§’è‰²ï¼š<span class="hljs-subst">${content.role}</span>`</span>;
});

<span class="hljs-comment">// å¯é€‰ï¼šé¡µé¢é”€æ¯æ—¶ç§»é™¤ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'storage'</span>, handleStorage);
});
</code></pre>
<p>æ¥æ”¶æ•°æ®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0160e05f2e2e45498b719ee165aaf211~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA6K-65rua6Zuq55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765271175&amp;x-signature=fTBp2QqtDH91VOC72BJXO0MycmU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-8">3. LocalStorageé€šè®¯æ³¨æ„äº‹é¡¹</h2>
<p>LocalStorage ç”¨æ³•ç®€å•ï¼Œä½†åœ¨è·¨é¡µé€šè®¯ä¸­è‹¥å¿½ç•¥ç»†èŠ‚ï¼Œå¾ˆå®¹æ˜“å‡ºç°â€œæ•°æ®å‘äº†ä½†æ”¶ä¸åˆ°â€çš„é—®é¢˜ã€‚ä»¥ä¸‹è¿™äº›å‘å¿…é¡»æå‰è§„é¿ï¼š</p>
<h3 data-id="heading-9">3.1 åŒæºç­–ç•¥é™åˆ¶ï¼šè·¨åŸŸé¡µé¢æ— æ³•é€šè®¯</h3>
<p>LocalStorage ä¸¥æ ¼éµå¾ªåŒæºç­–ç•¥ï¼Œä¸åŒåŸŸåã€åè®®æˆ–ç«¯å£çš„é¡µé¢æ— æ³•å…±äº«æ•°æ®ï¼Œä¹Ÿæ— æ³•è§¦å‘ storage äº‹ä»¶ã€‚è‹¥éœ€è·¨åŸŸé€šè®¯ï¼Œéœ€ç»“åˆ postMessage æˆ–æœåŠ¡å™¨ä¸­è½¬ï¼ŒLocalStorage æ— æ³•å•ç‹¬å®ç°ã€‚</p>
<h3 data-id="heading-10">3.2 æ•°æ®æ ¼å¼é™åˆ¶ï¼šä»…æ”¯æŒå­—ç¬¦ä¸²ç±»å‹</h3>
<p>LocalStorage åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè‹¥è¦ä¼ é€’å¯¹è±¡ã€æ•°ç»„ç­‰å¤æ‚æ•°æ®ï¼Œå¿…é¡»ç”¨ <code>JSON.stringify()</code> åºåˆ—åŒ–ï¼Œæ¥æ”¶æ—¶ç”¨ <code>JSON.parse()</code> ååºåˆ—åŒ–ã€‚æ³¨æ„ï¼šundefinedã€function ç­‰ç±»å‹æ— æ³•è¢«æ­£å¸¸åºåˆ—åŒ–ï¼Œéœ€æå‰å¤„ç†ã€‚</p>
<h3 data-id="heading-11">3.3 storage äº‹ä»¶è§¦å‘æ¡ä»¶ï¼šä»…å€¼å˜åŒ–æ—¶è§¦å‘</h3>
<p>åªæœ‰å½“ LocalStorage ä¸­æ•°æ®çš„â€œå€¼â€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šè§¦å‘ storage äº‹ä»¶ã€‚è‹¥ä¸¤æ¬¡å­˜å‚¨ç›¸åŒçš„å€¼ï¼Œäº‹ä»¶ä¸ä¼šè§¦å‘ã€‚è§£å†³åŠæ³•ï¼šåœ¨æ•°æ®ä¸­æ·»åŠ  timestamp æ—¶é—´æˆ³æˆ–éšæœºæ•°ï¼Œç¡®ä¿æ¯æ¬¡å­˜å‚¨çš„å€¼ä¸åŒã€‚</p>
<h3 data-id="heading-12">3.4 å­˜å‚¨å®¹é‡é™åˆ¶ï¼šé¿å…æ•°æ®è¿‡å¤§</h3>
<p>LocalStorage å•ä¸ªåŸŸåçš„å­˜å‚¨å®¹é‡çº¦ä¸º 5MBï¼Œè‹¥å­˜å‚¨æ•°æ®è¿‡å¤§ï¼Œä¼šå¯¼è‡´å­˜å‚¨å¤±è´¥ã€‚è·¨é¡µé€šè®¯åº”ä»…ä¼ é€’å¿…è¦çš„æ ¸å¿ƒæ•°æ®ï¼ˆå¦‚ IDã€çŠ¶æ€ï¼‰ï¼Œé¿å…ä¼ é€’å¤§é‡æ–‡æœ¬æˆ–äºŒè¿›åˆ¶æ•°æ®ã€‚</p>
<h2 data-id="heading-13">4. æ€»ç»“</h2>
<p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼šLocalStorageåªéœ€è¦æ“ä½œ <code>setItem</code>ã€<code>getItem</code> å’Œ ç›‘å¬ <strong>storage</strong> äº‹ä»¶å°±èƒ½å®ç°åŒæºé€šè®¯ã€‚å¦‚æœæ˜¯éåŒæºï¼Œé‚£å°±åªèƒ½ç”¨å…¶ä»–æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šçº§ç¼“å­˜æ¡†æ¶ï¼ˆRedis + Caffeineï¼‰å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7579460553614557235</link>    <guid>https://juejin.cn/post/7579460553614557235</guid>    <pubDate>2025-12-03T10:12:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579460553614557235" data-draft-id="7579427549472030766" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šçº§ç¼“å­˜æ¡†æ¶ï¼ˆRedis + Caffeineï¼‰å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Redis"/> <meta itemprop="datePublished" content="2025-12-03T10:12:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/808832912075352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šçº§ç¼“å­˜æ¡†æ¶ï¼ˆRedis + Caffeineï¼‰å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/808832912075352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆå“ˆå“ˆç¬‘ä»€ä¹ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:12:16.000Z" title="Wed Dec 03 2025 10:12:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤šçº§ç¼“å­˜æ¡†æ¶ï¼ˆRedis + Caffeineï¼‰å®Œæ•´æŒ‡å—</h2>
<h3 data-id="heading-1">ä¸€ã€æ¡†æ¶æ ¸å¿ƒæ¦‚è¿°ï¼ˆæ˜¯ä»€ä¹ˆï¼‰</h3>
<p>è¿™æ˜¯ä¸€å¥— <strong>æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰+ åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰çš„å¤šçº§ç¼“å­˜æ¡†æ¶</strong>ï¼ŒåŸºäº Spring ç”Ÿæ€å®ç°ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯å…¼é¡¾ç¼“å­˜è®¿é—®æ€§èƒ½ä¸åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-2">æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li>å¤šçº§ç¼“å­˜æ¶æ„ï¼šä¸€çº§ç¼“å­˜ï¼ˆæœ¬åœ° Caffeineï¼‰æå‡å“åº”é€Ÿåº¦ï¼ŒäºŒçº§ç¼“å­˜ï¼ˆRedisï¼‰ä¿è¯åˆ†å¸ƒå¼ä¸€è‡´æ€§</li>
<li>çµæ´»é…ç½®ï¼šæ”¯æŒè¿‡æœŸæ—¶é—´ã€è¿‡æœŸæ¨¡å¼ã€NULL å€¼ç¼“å­˜ã€æœ¬åœ°ç¼“å­˜å®¹é‡é™åˆ¶ç­‰</li>
<li>åŠ¨æ€ Key ç”Ÿæˆï¼šåŸºäº SpEL è¡¨è¾¾å¼å®ç°ç¼“å­˜ Key åŠ¨æ€æ‹¼æ¥</li>
<li>å¹¶å‘å®‰å…¨ï¼šå†…ç½®åˆ†å¸ƒå¼é”ï¼ˆRedissonï¼‰ï¼Œè§£å†³ç¼“å­˜ç©¿é€/å‡»ç©¿/é›ªå´©é—®é¢˜</li>
<li>å®Œæ•´ APIï¼šæ”¯æŒç¼“å­˜å¢åˆ æ”¹æŸ¥ã€åŸå­æ“ä½œã€æ‰¹é‡å¤„ç†ç­‰</li>
</ul>
<h4 data-id="heading-3">æŠ€æœ¯æ ˆä¾èµ–</h4>
<ul>
<li>æ ¸å¿ƒæ¡†æ¶ï¼šSpring Bootã€Spring Context</li>
<li>ç¼“å­˜ç»„ä»¶ï¼šCaffeineï¼ˆæœ¬åœ°ç¼“å­˜ï¼‰ã€Redisï¼ˆåˆ†å¸ƒå¼ç¼“å­˜ï¼‰</li>
<li>åˆ†å¸ƒå¼é”ï¼šRedisson</li>
<li>åºåˆ—åŒ–ï¼šJackson</li>
<li>è¡¨è¾¾å¼è§£æï¼šSpring EL</li>
</ul>
<h3 data-id="heading-4">äºŒã€æ¡†æ¶æ ¸å¿ƒä»·å€¼ï¼ˆä¸ºä»€ä¹ˆç”¨ï¼‰</h3>
<h4 data-id="heading-5">1. è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h4>





























<table><thead><tr><th>é—®é¢˜åœºæ™¯</th><th>æ¡†æ¶è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>ç¼“å­˜ç©¿é€ï¼ˆæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼‰</td><td>æ”¯æŒ NULL å€¼ç¼“å­˜ + åˆ†å¸ƒå¼é”é˜²é‡å¤æŸ¥è¯¢</td></tr><tr><td>ç¼“å­˜å‡»ç©¿ï¼ˆçƒ­ç‚¹ Key è¿‡æœŸï¼‰</td><td>åˆ†å¸ƒå¼é” + ç¼“å­˜è‡ªåŠ¨ç»­æœŸ</td></tr><tr><td>ç¼“å­˜é›ªå´©ï¼ˆå¤§é‡ Key åŒæ—¶è¿‡æœŸï¼‰</td><td>è¿‡æœŸæ—¶é—´éšæœºåç§» + å¤šçº§ç¼“å­˜é™çº§</td></tr><tr><td>åˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§</td><td>Redis é›†ä¸­å­˜å‚¨ + ç¼“å­˜æ›´æ–°åŒæ­¥</td></tr><tr><td>æœ¬åœ°ç¼“å­˜æ€§èƒ½ç“¶é¢ˆ</td><td>Caffeine æœ¬åœ°ç¼“å­˜ï¼ˆO(1) è®¿é—®é€Ÿåº¦ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-6">2. ç›¸æ¯”å•ä¸€ç¼“å­˜çš„ä¼˜åŠ¿</h4>
<ul>
<li>æ¯”çº¯ Redis ç¼“å­˜ï¼šå‡å°‘ç½‘ç»œ IO å¼€é”€ï¼Œæœ¬åœ°ç¼“å­˜å“åº”æ—¶é—´æå‡ 10-100 å€</li>
<li>æ¯”çº¯æœ¬åœ°ç¼“å­˜ï¼šæ”¯æŒåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œé¿å…èŠ‚ç‚¹é—´æ•°æ®ä¸ä¸€è‡´</li>
<li>æ¯” Spring Cache åŸç”Ÿï¼šæ”¯æŒæ›´çµæ´»çš„é…ç½®ï¼ˆè¿‡æœŸæ¨¡å¼ã€å®¹é‡é™åˆ¶ï¼‰å’Œæ›´å®Œå–„çš„å¹¶å‘æ§åˆ¶</li>
</ul>
<h3 data-id="heading-7">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼ˆæ€ä¹ˆåšï¼‰</h3>
<h4 data-id="heading-8">1. ä¾èµ–é…ç½®ï¼ˆMavenï¼‰</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- Spring Boot åŸºç¡€ä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Caffeine æœ¬åœ°ç¼“å­˜ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Redisson åˆ†å¸ƒå¼é” --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.25.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- Jackson åºåˆ—åŒ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-9">2. é…ç½®æ–‡ä»¶ï¼ˆapplication.ymlï¼‰</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">demo-app</span> <span class="hljs-comment"># ç”¨äº Redis Key å‰ç¼€</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">3000ms</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">2</span>
</code></pre>
<h4 data-id="heading-10">3. åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h4>
<h5 data-id="heading-11">3.1 ç¼–ç¨‹å¼ä½¿ç”¨ï¼ˆç›´æ¥æ“ä½œç¼“å­˜ APIï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">// æ³¨å…¥ç¼“å­˜ç®¡ç†å™¨</span>
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> CacheManager cacheManager;

    <span class="hljs-comment">// ç¼“å­˜é…ç½®ï¼ˆå¯é€šè¿‡ @ConfigurationProperties æ³¨å…¥ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MultiCacheConfig</span> <span class="hljs-variable">userCacheConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MultiCacheConfig</span>(
        <span class="hljs-number">30</span>, TimeUnit.MINUTES, <span class="hljs-number">20</span>, <span class="hljs-literal">true</span>, <span class="hljs-literal">true</span> <span class="hljs-comment">// ttl=30åˆ†é’Ÿï¼Œå…è®¸ç¼“å­˜NULLï¼Œå¯ç”¨æœ¬åœ°ç¼“å­˜</span>
    );

    <span class="hljs-comment">/**
     * æŸ¥è¯¢ç”¨æˆ·ï¼šç¼“å­˜å‘½ä¸­è¿”å›ï¼Œæœªå‘½ä¸­æŸ¥åº“å¹¶ç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUserById</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-comment">// 1. è·å–ç¼“å­˜å®ä¾‹ï¼ˆç¼“å­˜åç§°ï¼šuserCacheï¼‰</span>
        <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> cacheManager.getCache(<span class="hljs-string">"userCache"</span>, userCacheConfig);
        <span class="hljs-comment">// 2. ç”Ÿæˆç¼“å­˜Keyï¼ˆæ”¯æŒSpELè¡¨è¾¾å¼ï¼Œè¿™é‡Œç›´æ¥æ‹¼æ¥ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;
        
        <span class="hljs-comment">// 3. ç¼“å­˜æŸ¥è¯¢ï¼ˆæœªå‘½ä¸­æ—¶æ‰§è¡ŒSupplieræŸ¥åº“ï¼‰</span>
        <span class="hljs-keyword">return</span> (User) cache.get(cacheKey, User.class, () -&gt; {
            <span class="hljs-comment">// æ•°æ®åº“æŸ¥è¯¢é€»è¾‘ï¼ˆä»…ç¼“å­˜æœªå‘½ä¸­æ—¶æ‰§è¡Œï¼‰</span>
            <span class="hljs-keyword">return</span> userDao.selectById(userId);
        });
    }

    <span class="hljs-comment">/**
     * æ›´æ–°ç”¨æˆ·ï¼šåŒæ­¥æ›´æ–°æ•°æ®åº“å’Œç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(User user)</span> {
        <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> cacheManager.getCache(<span class="hljs-string">"userCache"</span>, userCacheConfig);
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + user.getId();
        
        <span class="hljs-comment">// 1. æ›´æ–°æ•°æ®åº“</span>
        userDao.updateById(user);
        <span class="hljs-comment">// 2. æ›´æ–°ç¼“å­˜ï¼ˆè¦†ç›–æ—§å€¼ï¼‰</span>
        cache.put(cacheKey, user);
    }

    <span class="hljs-comment">/**
     * åˆ é™¤ç”¨æˆ·ï¼šåŒæ­¥åˆ é™¤æ•°æ®åº“å’Œç¼“å­˜
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> cacheManager.getCache(<span class="hljs-string">"userCache"</span>, userCacheConfig);
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:"</span> + userId;
        
        <span class="hljs-comment">// 1. åˆ é™¤æ•°æ®åº“è®°å½•</span>
        userDao.deleteById(userId);
        <span class="hljs-comment">// 2. åˆ é™¤ç¼“å­˜ï¼ˆé¿å…è„æ•°æ®ï¼‰</span>
        cache.evict(cacheKey);
    }
}
</code></pre>
<h5 data-id="heading-12">3.2 æ³¨è§£å¼ä½¿ç”¨ï¼ˆåŸºäº AOP åˆ‡é¢ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.lang.annotation.*;

<span class="hljs-comment">// 1. è‡ªå®šä¹‰ç¼“å­˜æ³¨è§£ï¼ˆå¯æ‰©å±•ï¼‰</span>
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> MyCacheable {
    String <span class="hljs-title function_">cacheName</span><span class="hljs-params">()</span>; <span class="hljs-comment">// ç¼“å­˜åç§°</span>
    String <span class="hljs-title function_">key</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// SpELè¡¨è¾¾å¼Key</span>
    MultiCacheConfig <span class="hljs-title function_">config</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-meta">@MultiCacheConfig()</span>; <span class="hljs-comment">// ç¼“å­˜é…ç½®</span>
}

<span class="hljs-comment">// 2. æ³¨è§£åˆ‡é¢å®ç°ï¼ˆåŸºäº AbstractCacheAspectSupportï¼‰</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheAspect</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractCacheAspectSupport</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> CacheManager cacheManager;

    <span class="hljs-meta">@Around("@annotation(myCacheable)")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">cacheAroundAdvice</span><span class="hljs-params">(ProceedingJoinPoint joinPoint, MyCacheable myCacheable)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// è·å–æ–¹æ³•ä¿¡æ¯</span>
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> getSpecificMethod(joinPoint);
        Object[] args = joinPoint.getArgs();
        <span class="hljs-type">Object</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> joinPoint.getTarget();
        
        <span class="hljs-comment">// è§£æç¼“å­˜Keyï¼ˆæ”¯æŒSpELè¡¨è¾¾å¼ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> (String) generateKey(myCacheable.key(), method, args, target);
        <span class="hljs-comment">// è·å–ç¼“å­˜å®ä¾‹</span>
        <span class="hljs-type">Cache</span> <span class="hljs-variable">cache</span> <span class="hljs-operator">=</span> cacheManager.getCache(myCacheable.cacheName(), myCacheable.config());
        
        <span class="hljs-comment">// ç¼“å­˜æŸ¥è¯¢ï¼šå‘½ä¸­è¿”å›ï¼Œæœªå‘½ä¸­æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶ç¼“å­˜</span>
        <span class="hljs-keyword">return</span> cache.get(cacheKey, method.getReturnType(), () -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> joinPoint.proceed();
            } <span class="hljs-keyword">catch</span> (Throwable e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"ç¼“å­˜åŠ è½½å¤±è´¥"</span>, e);
            }
        });
    }
}

<span class="hljs-comment">// 3. ä¸šåŠ¡å±‚ä½¿ç”¨æ³¨è§£</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-meta">@MyCacheable(
        cacheName = "productCache",
        key = "#root.methodName + ':' + #p0", // SpELï¼šæ–¹æ³•å+ç¬¬ä¸€ä¸ªå‚æ•°
        config = @MultiCacheConfig(ttl = 60, timeUnit = TimeUnit.MINUTES, cacheNullValues = true)
    )</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProductById</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-comment">// æ•°æ®åº“æŸ¥è¯¢é€»è¾‘ï¼ˆç¼“å­˜æœªå‘½ä¸­æ—¶æ‰§è¡Œï¼‰</span>
        <span class="hljs-keyword">return</span> productDao.selectById(productId);
    }
}
</code></pre>
<h3 data-id="heading-13">å››ã€æ ¸å¿ƒç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-14">1. ç¼“å­˜æ ¸å¿ƒæ¥å£ï¼ˆCacheï¼‰</h4>
<p>å®šä¹‰ç¼“å­˜æ“ä½œæ ‡å‡† APIï¼Œæ‰€æœ‰ç¼“å­˜å®ç°çš„é¡¶å±‚æ¥å£ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface Cache {
    <span class="hljs-comment">// è·å–ç¼“å­˜ï¼ˆæœªå‘½ä¸­è¿”å›nullï¼‰</span>
    &lt;T&gt; <span class="hljs-function">T <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">String</span> key, Class&lt;T&gt; resultType)</span></span>;
    <span class="hljs-comment">// è·å–ç¼“å­˜ï¼ˆæœªå‘½ä¸­æ‰§è¡ŒvalueLoaderåŠ è½½å¹¶ç¼“å­˜ï¼‰</span>
    &lt;T&gt; <span class="hljs-function">T <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">String</span> key, Class&lt;T&gt; resultType, Supplier&lt;Object&gt; valueLoader)</span></span>;
    <span class="hljs-comment">// æ·»åŠ /è¦†ç›–ç¼“å­˜</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">put</span><span class="hljs-params">(<span class="hljs-type">String</span> key, Object value)</span></span>;
    <span class="hljs-comment">// åŸå­æ“ä½œï¼šä¸å­˜åœ¨æ—¶æ‰æ·»åŠ </span>
    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">putIfAbsent</span><span class="hljs-params">(<span class="hljs-type">String</span> key, Object value)</span></span>;
    <span class="hljs-comment">// å•ä¸ªåˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">evict</span><span class="hljs-params">(<span class="hljs-type">String</span> key)</span></span>;
    <span class="hljs-comment">// æ‰¹é‡åˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">multiEvict</span><span class="hljs-params">(Collection&lt;<span class="hljs-type">String</span>&gt; keys)</span></span>;
    <span class="hljs-comment">// æ¸…ç©ºç¼“å­˜</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span>;
}
</code></pre>
<h4 data-id="heading-15">2. å¤šçº§ç¼“å­˜å®ç°ï¼ˆMultiLevelCacheï¼‰</h4>
<p>æ•´åˆ Caffeine æœ¬åœ°ç¼“å­˜å’Œ Redis åˆ†å¸ƒå¼ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiLevelCache</span> <span class="hljs-title">implements</span> <span class="hljs-title">Cache</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String cacheName;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> CaffeineCache localCache; <span class="hljs-comment">// ä¸€çº§ç¼“å­˜ï¼ˆæœ¬åœ°ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> RedisCache remoteCache; <span class="hljs-comment">// äºŒçº§ç¼“å­˜ï¼ˆRedisï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> boolean cacheNullValues; <span class="hljs-comment">// æ˜¯å¦ç¼“å­˜NULLå€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> boolean enableLocalCache; <span class="hljs-comment">// æ˜¯å¦å¯ç”¨æœ¬åœ°ç¼“å­˜</span>

    <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šæŸ¥è¯¢ç¼“å­˜æ—¶å…ˆæŸ¥æœ¬åœ°ï¼Œå†æŸ¥Redisï¼Œæœ€åæŸ¥åº“</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-keyword">get</span>(String key, Class&lt;T&gt; resultType, Supplier&lt;Object&gt; valueLoader) {
        <span class="hljs-comment">// 1. æŸ¥æœ¬åœ°ç¼“å­˜</span>
        <span class="hljs-keyword">if</span> (enableLocalCache) {
            T localValue = localCache.<span class="hljs-keyword">get</span>(key, resultType);
            <span class="hljs-keyword">if</span> (resultType.isInstance(localValue) &amp;&amp; !NullValue.isNullValue(localValue)) {
                <span class="hljs-keyword">return</span> localValue;
            }
        }

        <span class="hljs-comment">// 2. æŸ¥Redisç¼“å­˜</span>
        T remoteValue = remoteCache.<span class="hljs-keyword">get</span>(key, resultType);
        <span class="hljs-keyword">if</span> (resultType.isInstance(remoteValue) &amp;&amp; !NullValue.isNullValue(remoteValue)) {
            <span class="hljs-comment">// åŒæ­¥åˆ°æœ¬åœ°ç¼“å­˜</span>
            <span class="hljs-keyword">if</span> (enableLocalCache) {
                localCache.put(key, remoteValue);
            }
            <span class="hljs-keyword">return</span> remoteValue;
        }

        <span class="hljs-comment">// 3. ç¼“å­˜æœªå‘½ä¸­ï¼Œæ‰§è¡ŒåŠ è½½é€»è¾‘ï¼ˆæŸ¥åº“ï¼‰</span>
        Object value = valueLoader.<span class="hljs-keyword">get</span>();
        <span class="hljs-comment">// 4. ç¼“å­˜ç»“æœï¼ˆæ”¯æŒNULLå€¼ï¼‰</span>
        put(key, value);
        <span class="hljs-keyword">return</span> resultType.cast(fromStoreValue(value));
    }

    <span class="hljs-comment">// å…¶ä»–æ–¹æ³•ï¼šput/evict/clear å‡åŒæ­¥æ“ä½œæœ¬åœ°å’ŒRedisç¼“å­˜</span>
}
</code></pre>
<h4 data-id="heading-16">3. ç¼“å­˜ç®¡ç†å™¨ï¼ˆCacheManagerï¼‰</h4>
<p>è´Ÿè´£ç¼“å­˜å®ä¾‹çš„åˆ›å»ºå’Œç®¡ç†ï¼Œé‡‡ç”¨æ‡’åŠ è½½æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface CacheManager {
    <span class="hljs-comment">// è·å–ç¼“å­˜ï¼ˆä¸å­˜åœ¨è¿”å›nullï¼‰</span>
    <span class="hljs-function">Cache <span class="hljs-title">getCache</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span></span>;
    <span class="hljs-comment">// è·å–ç¼“å­˜ï¼ˆä¸å­˜åœ¨åˆ™åˆ›å»ºï¼‰</span>
    <span class="hljs-function">Cache <span class="hljs-title">getCache</span><span class="hljs-params">(<span class="hljs-type">String</span> name, MultiCacheConfig config)</span></span>;
}

<span class="hljs-comment">// æŠ½è±¡å®ç°ç±»</span>
<span class="hljs-keyword">public</span> abstract <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractCacheManager</span> implements CacheManager {
    <span class="hljs-comment">// ç¼“å­˜å®¹å™¨ï¼ˆConcurrentHashMapä¿è¯çº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;<span class="hljs-type">String</span>, Cache&gt; cacheMap = <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;(<span class="hljs-number">16</span>);

    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> Cache <span class="hljs-title">getCache</span><span class="hljs-params">(<span class="hljs-type">String</span> name, MultiCacheConfig config)</span> </span>{
        <span class="hljs-comment">// åŒé‡æ£€æŸ¥é”ï¼šé¿å…é‡å¤åˆ›å»ºç¼“å­˜</span>
        Cache cache = cacheMap.<span class="hljs-built_in">get</span>(name);
        <span class="hljs-keyword">if</span> (cache != null) {
            <span class="hljs-keyword">return</span> cache;
        }
        <span class="hljs-built_in">synchronized</span> (cacheMap) {
            cache = cacheMap.<span class="hljs-built_in">get</span>(name);
            <span class="hljs-keyword">if</span> (cache == null) {
                <span class="hljs-comment">// åˆ›å»ºç¼“å­˜å®ä¾‹ï¼ˆå­ç±»å®ç°å…·ä½“ç¼“å­˜ç±»å‹ï¼‰</span>
                cache = <span class="hljs-built_in">createCache</span>(name, config);
                cacheMap.<span class="hljs-built_in">put</span>(name, cache);
            }
            <span class="hljs-keyword">return</span> cache;
        }
    }

    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼šç”±å­ç±»å®ç°ç¼“å­˜åˆ›å»ºé€»è¾‘</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> abstract Cache <span class="hljs-title">createCache</span><span class="hljs-params">(<span class="hljs-type">String</span> name, MultiCacheConfig config)</span></span>;
}
</code></pre>
<h4 data-id="heading-17">4. åˆ†å¸ƒå¼é”ç»„ä»¶ï¼ˆRedissonï¼‰</h4>
<p>è§£å†³å¹¶å‘åœºæ™¯ä¸‹çš„ç¼“å­˜é—®é¢˜ï¼Œæ ¸å¿ƒ APIï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> interface DistributedLocker {
    <span class="hljs-comment">// è·å–å•ä¸ªé”</span>
    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">lock</span><span class="hljs-params">(<span class="hljs-type">String</span> lockKey, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span></span>;
    <span class="hljs-comment">// è·å–è”é”ï¼ˆå¤šä¸ªKeyï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">boolean</span> <span class="hljs-title">multiLock</span><span class="hljs-params">(Collection&lt;<span class="hljs-type">String</span>&gt; lockKeys, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit)</span></span>;
    <span class="hljs-comment">// é‡Šæ”¾é”</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">(<span class="hljs-type">String</span> lockKey)</span></span>;
    <span class="hljs-comment">// é‡Šæ”¾è”é”</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">multiUnlock</span><span class="hljs-params">(Collection&lt;<span class="hljs-type">String</span>&gt; lockKeys)</span></span>;
}

<span class="hljs-comment">// å·¥å…·ç±»å°è£…ï¼ˆé™æ€è°ƒç”¨ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockUtils</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> DistributedLocker locker;

    <span class="hljs-comment">// è·å–é”å¹¶æ‰§è¡Œé€»è¾‘</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> &lt;T&gt; <span class="hljs-function">T <span class="hljs-title">executeWithLock</span><span class="hljs-params">(<span class="hljs-type">String</span> lockKey, <span class="hljs-type">long</span> leaseTime, <span class="hljs-type">long</span> waitTime, TimeUnit unit, Supplier&lt;T&gt; supplier)</span> </span>{
        <span class="hljs-keyword">if</span> (locker.<span class="hljs-built_in">lock</span>(lockKey, leaseTime, waitTime, unit)) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> supplier.<span class="hljs-built_in">get</span>();
            } finally {
                locker.<span class="hljs-built_in">unlock</span>(lockKey);
            }
        }
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">"è·å–é”å¤±è´¥"</span>);
    }
}
</code></pre>
<h4 data-id="heading-18">5. å·¥å…·ç±»</h4>
<h5 data-id="heading-19">5.1 JSON åºåˆ—åŒ–å·¥å…·ï¼ˆJsonUtilsï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonUtils</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">ObjectMapper</span> <span class="hljs-variable constant_">OBJECT_MAPPER</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>()
        .<span class="hljs-title function_">configure</span>(<span class="hljs-title class_">DeserializationFeature</span>.<span class="hljs-property">FAIL_ON_UNKNOWN_PROPERTIES</span>, <span class="hljs-literal">false</span>);

    <span class="hljs-comment">// å¯¹è±¡è½¬JSONå­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toJson</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> obj</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">OBJECT_MAPPER</span>.<span class="hljs-title function_">writeValueAsString</span>(obj);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">JsonProcessingException</span> e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"JSONåºåˆ—åŒ–å¤±è´¥"</span>, e);
        }
    }

    <span class="hljs-comment">// JSONå­—ç¬¦ä¸²è½¬å¯¹è±¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; T <span class="hljs-title function_">fromJson</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> json, Class&lt;T&gt; clazz</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">OBJECT_MAPPER</span>.<span class="hljs-title function_">readValue</span>(json, clazz);
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">JsonProcessingException</span> e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"JSONååºåˆ—åŒ–å¤±è´¥"</span>, e);
        }
    }
}
</code></pre>
<h5 data-id="heading-20">5.2 SpEL è¡¨è¾¾å¼è§£æå·¥å…·ï¼ˆCacheExpressionEvaluatorï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheExpressionEvaluator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">CachedExpressionEvaluator</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Map</span>&lt;<span class="hljs-title class_">ExpressionKey</span>, <span class="hljs-title class_">Expression</span>&gt; keyCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">64</span>);

    <span class="hljs-comment">// åˆ›å»ºè¡¨è¾¾å¼ä¸Šä¸‹æ–‡ï¼ˆåŒ…å«æ–¹æ³•ã€å‚æ•°ã€ç›®æ ‡å¯¹è±¡ç­‰ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">EvaluationContext</span> <span class="hljs-title function_">createContext</span>(<span class="hljs-params">Method method, <span class="hljs-built_in">Object</span>[] args, <span class="hljs-built_in">Object</span> target</span>) {
        <span class="hljs-title class_">CacheExpressionRootObject</span> root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheExpressionRootObject</span>(method, args, target);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodBasedEvaluationContext</span>(root, method, args, <span class="hljs-title function_">getParameterNameDiscoverer</span>());
    }

    <span class="hljs-comment">// è§£æSpELè¡¨è¾¾å¼</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">evaluateKey</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> keyExpr, Method method, <span class="hljs-built_in">Object</span>[] args, <span class="hljs-built_in">Object</span> target</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">StringUtils</span>.<span class="hljs-title function_">isEmpty</span>(keyExpr)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;
        }
        <span class="hljs-title class_">EvaluationContext</span> context = <span class="hljs-title function_">createContext</span>(method, args, target);
        <span class="hljs-title class_">ExpressionKey</span> key = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExpressionKey</span>(keyExpr, method);
        <span class="hljs-keyword">return</span> keyCache.<span class="hljs-title function_">computeIfAbsent</span>(key, k -&gt; <span class="hljs-title function_">getExpressionParser</span>().<span class="hljs-title function_">parseExpression</span>(keyExpr))
            .<span class="hljs-title function_">getValue</span>(context);
    }
}
</code></pre>
<h3 data-id="heading-21">äº”ã€è¿›é˜¶é…ç½®ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-22">1. ç¼“å­˜ç­–ç•¥é…ç½®</h4>
<h5 data-id="heading-23">1.1 è¿‡æœŸæ¨¡å¼é€‰æ‹©</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è¿‡æœŸæ¨¡å¼æšä¸¾</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ExpireMode</span> {
    WRITE, <span class="hljs-comment">// å†™å…¥åå¼€å§‹è®¡æ—¶ï¼ˆé€‚åˆå†™å°‘è¯»å¤šåœºæ™¯ï¼‰</span>
    ACCESS <span class="hljs-comment">// è®¿é—®ååˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆé€‚åˆçƒ­ç‚¹æ•°æ®ï¼‰</span>
}

<span class="hljs-comment">// é…ç½®ç¤ºä¾‹ï¼šçƒ­ç‚¹æ•°æ®ä½¿ç”¨ACCESSæ¨¡å¼</span>
<span class="hljs-type">MultiCacheConfig</span> <span class="hljs-variable">hotDataConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MultiCacheConfig</span>();
hotDataConfig.setExpireMode(ExpireMode.ACCESS.name());
hotDataConfig.setTtl(<span class="hljs-number">10</span>); <span class="hljs-comment">// 10åˆ†é’Ÿ</span>
hotDataConfig.setEnableFirstCache(<span class="hljs-literal">true</span>);
</code></pre>
<h5 data-id="heading-24">1.2 é˜²æ­¢ç¼“å­˜é›ªå´©</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é…ç½®è¿‡æœŸæ—¶é—´éšæœºåç§»ï¼ˆé¿å…å¤§é‡KeyåŒæ—¶è¿‡æœŸï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiCacheConfig</span> {
    <span class="hljs-comment">// æœ€å¤§åç§»æ¯”ä¾‹ï¼ˆ10%ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">double</span> MAX_OFFSET_RATIO = <span class="hljs-number">0.1</span>;

    <span class="hljs-comment">// è·å–å¸¦éšæœºåç§»çš„è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title">getRandomTtl</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">long</span> baseTtl = <span class="hljs-built_in">getTtlToSeconds</span>();
        <span class="hljs-type">double</span> offset = baseTtl * MAX_OFFSET_RATIO;
        <span class="hljs-comment">// éšæœºå¢å‡åç§»é‡</span>
        <span class="hljs-keyword">return</span> (<span class="hljs-type">long</span>) (baseTtl + (Math.<span class="hljs-built_in">random</span>() * <span class="hljs-number">2</span> * offset - offset));
    }
}
</code></pre>
<h4 data-id="heading-25">2. æ€§èƒ½è°ƒä¼˜</h4>
<h5 data-id="heading-26">2.1 æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰è°ƒä¼˜</h5>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é«˜æ€§èƒ½é…ç½®ï¼šåŸºäºè®¿é—®é¢‘ç‡å’Œè¿‡æœŸæ—¶é—´</span>
CaffeineCacheConfig config = <span class="hljs-keyword">new</span> <span class="hljs-built_in">CaffeineCacheConfig</span>();
config.<span class="hljs-built_in">setInitialCapacity</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// åˆå§‹å®¹é‡</span>
config.<span class="hljs-built_in">setMaximumSize</span>(<span class="hljs-number">5000</span>); <span class="hljs-comment">// æœ€å¤§å®¹é‡ï¼ˆé¿å…å†…å­˜æº¢å‡ºï¼‰</span>
config.<span class="hljs-built_in">setExpireMode</span>(ExpireMode.ACCESS); <span class="hljs-comment">// è®¿é—®è¿‡æœŸ</span>
config.<span class="hljs-built_in">setTtl</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// 5åˆ†é’Ÿè¿‡æœŸ</span>
</code></pre>
<h5 data-id="heading-27">2.2 Redis ç¼“å­˜è°ƒä¼˜</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">lettuce:</span>
      <span class="hljs-attr">pool:</span>
        <span class="hljs-attr">max-active:</span> <span class="hljs-number">16</span> <span class="hljs-comment"># æœ€å¤§è¿æ¥æ•°</span>
        <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span> <span class="hljs-comment"># æœ€å¤§ç©ºé—²è¿æ¥</span>
        <span class="hljs-attr">min-idle:</span> <span class="hljs-number">4</span> <span class="hljs-comment"># æœ€å°ç©ºé—²è¿æ¥</span>
    <span class="hljs-attr">timeout:</span> <span class="hljs-string">2000ms</span> <span class="hljs-comment"># è¶…æ—¶æ—¶é—´ï¼ˆé¿å…é•¿æ—¶é—´é˜»å¡ï¼‰</span>
</code></pre>
<h4 data-id="heading-28">3. å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h4>
<h5 data-id="heading-29">3.1 ç¼“å­˜ç©¿é€ï¼ˆæŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®ï¼‰</h5>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ–¹æ¡ˆï¼šç¼“å­˜NULLå€¼ + åˆ†å¸ƒå¼é”</span>
<span class="hljs-keyword">public</span> User getUserById(<span class="hljs-built_in">Long</span> userId) {
    String cacheKey = <span class="hljs-string">"user:"</span> + userId;
    Cache cache = cacheManager.getCache(<span class="hljs-string">"userCache"</span>, config);
    
    <span class="hljs-comment">// 1. æŸ¥ç¼“å­˜ï¼ˆåŒ…æ‹¬NULLå€¼ï¼‰</span>
    User user = cache.<span class="hljs-keyword">get</span>(cacheKey, User.<span class="hljs-keyword">class</span>);
    <span class="hljs-keyword">if</span> (user != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> user;
    }
    
    <span class="hljs-comment">// 2. åˆ†å¸ƒå¼é”ï¼šé˜²æ­¢å¹¶å‘æŸ¥è¯¢ä¸å­˜åœ¨çš„æ•°æ®</span>
    <span class="hljs-keyword">return</span> DistributedLockUtils.executeWithLock(
        <span class="hljs-string">"lock:user:"</span> + userId, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, TimeUnit.SECONDS,
        () -&gt; {
            <span class="hljs-comment">// 3. å†æ¬¡æŸ¥ç¼“å­˜ï¼ˆé¿å…é”ç­‰å¾…æœŸé—´å·²ç¼“å­˜ï¼‰</span>
            User cachedUser = cache.<span class="hljs-keyword">get</span>(cacheKey, User.<span class="hljs-keyword">class</span>);
            <span class="hljs-keyword">if</span> (cachedUser != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> cachedUser;
            }
            <span class="hljs-comment">// 4. æŸ¥åº“ï¼ˆä¸å­˜åœ¨åˆ™è¿”å›nullï¼‰</span>
            User dbUser = userDao.selectById(userId);
            <span class="hljs-comment">// 5. ç¼“å­˜ç»“æœï¼ˆåŒ…æ‹¬NULLå€¼ï¼‰</span>
            cache.put(cacheKey, dbUser);
            <span class="hljs-keyword">return</span> dbUser;
        }
    );
}
</code></pre>
<h5 data-id="heading-30">3.2 ç¼“å­˜å‡»ç©¿ï¼ˆçƒ­ç‚¹Keyè¿‡æœŸï¼‰</h5>
<pre><code class="hljs language-ini" lang="ini">// æ–¹æ¡ˆï¼šç¼“å­˜è‡ªåŠ¨ç»­æœŸ + åˆ†å¸ƒå¼é”
public Product getHotProduct(Long productId) {
    String <span class="hljs-attr">cacheKey</span> = <span class="hljs-string">"hot:product:"</span> + productId<span class="hljs-comment">;</span>
    Cache <span class="hljs-attr">cache</span> = cacheManager.getCache(<span class="hljs-string">"hotProductCache"</span>, config)<span class="hljs-comment">;</span>
    
    return DistributedLockUtils.executeWithLock(
        cacheKey + ":lock", -1, 3, TimeUnit.SECONDS, // <span class="hljs-attr">leaseTime</span>=-<span class="hljs-number">1</span>ï¼šè‡ªåŠ¨ç»­æœŸ
        () -&gt; {
            Product <span class="hljs-attr">product</span> = cache.get(cacheKey, Product.class)<span class="hljs-comment">;</span>
            if (product != null) {
                // è®¿é—®ååˆ·æ–°è¿‡æœŸæ—¶é—´ï¼ˆACCESSæ¨¡å¼è‡ªåŠ¨å®ç°ï¼‰
                return product<span class="hljs-comment">;</span>
            }
            // æŸ¥åº“å¹¶ç¼“å­˜
            Product <span class="hljs-attr">dbProduct</span> = productDao.selectById(productId)<span class="hljs-comment">;</span>
            cache.put(cacheKey, dbProduct)<span class="hljs-comment">;</span>
            return dbProduct<span class="hljs-comment">;</span>
        }
    )<span class="hljs-comment">;</span>
}
</code></pre>
<h5 data-id="heading-31">3.3 ç¼“å­˜ä¸€è‡´æ€§ï¼ˆæ›´æ–°/åˆ é™¤ååŒæ­¥ç¼“å­˜ï¼‰</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ–¹æ¡ˆï¼šæ›´æ–°æ•°æ®åº“ååŒæ­¥æ›´æ–°ç¼“å­˜ï¼Œåˆ é™¤æ•°æ®åº“ååˆ é™¤ç¼“å­˜</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">updateProduct</span>(<span class="hljs-params">Product product</span>) {
    <span class="hljs-comment">// 1. æ›´æ–°æ•°æ®åº“ï¼ˆäº‹åŠ¡å†…ï¼‰</span>
    productDao.<span class="hljs-title function_">updateById</span>(product);
    <span class="hljs-comment">// 2. æ›´æ–°ç¼“å­˜ï¼ˆäº‹åŠ¡æäº¤åæ‰§è¡Œï¼Œé¿å…äº‹åŠ¡å›æ»šå¯¼è‡´ç¼“å­˜è„æ•°æ®ï¼‰</span>
    <span class="hljs-title class_">TransactionSynchronizationManager</span>.<span class="hljs-title function_">registerSynchronization</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronizationAdapter</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">afterCommit</span>(<span class="hljs-params"/>) {
                <span class="hljs-title class_">Cache</span> cache = cacheManager.<span class="hljs-title function_">getCache</span>(<span class="hljs-string">"productCache"</span>, config);
                cache.<span class="hljs-title function_">put</span>(<span class="hljs-string">"product:"</span> + product.<span class="hljs-title function_">getId</span>(), product);
            }
        }
    );
}
</code></pre>
<h3 data-id="heading-32">å…­ã€å®Œæ•´å¯å¤ç”¨æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-33">1. ç¼“å­˜é…ç½®ç±»</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">condition</span>.<span class="hljs-property">ConditionalOnBean</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Bean</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Configuration</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">beans</span>.<span class="hljs-property">factory</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Value</span>;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ConditionalOnBean</span>(<span class="hljs-title class_">RedisTemplate</span>.<span class="hljs-property">class</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheAutoConfiguration</span> {

    <span class="hljs-meta">@Value</span>(<span class="hljs-string">"${spring.application.name}"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> appName;

    <span class="hljs-comment">// æ³¨å†Œç¼“å­˜ç®¡ç†å™¨</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">CacheManager</span> <span class="hljs-title function_">cacheManager</span>(<span class="hljs-params">RedisTemplate&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; redisTemplate</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultCacheManager</span>(appName, <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisCacheTemplate</span>(redisTemplate));
    }

    <span class="hljs-comment">// æ³¨å†Œåˆ†å¸ƒå¼é”</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">DistributedLocker</span> <span class="hljs-title function_">distributedLocker</span>(<span class="hljs-params">RedissonClient redissonClient</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedissonDistributedLocker</span>(redissonClient);
    }
}
</code></pre>
<h4 data-id="heading-34">2. å¤šçº§ç¼“å­˜é…ç½®æ¨¡å‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiCacheConfig</span> {
    <span class="hljs-comment">// ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤10åˆ†é’Ÿï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">ttl</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-comment">// æ—¶é—´å•ä½ï¼ˆé»˜è®¤åˆ†é’Ÿï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">TimeUnit</span> <span class="hljs-variable">timeUnit</span> <span class="hljs-operator">=</span> TimeUnit.MINUTES;
    <span class="hljs-comment">// è¿‡æœŸæ—¶é—´æ¯”ä¾‹ï¼ˆç”¨äºåŠ¨æ€è°ƒæ•´ï¼Œ1-100ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">ttlProportion</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-comment">// æ˜¯å¦ç¼“å­˜NULLå€¼ï¼ˆé»˜è®¤falseï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">cacheNullValues</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// æ˜¯å¦å¯ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆé»˜è®¤falseï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">enableLocalCache</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜åˆå§‹å®¹é‡ï¼ˆé»˜è®¤10ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">initialCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-comment">// æœ¬åœ°ç¼“å­˜æœ€å¤§å®¹é‡ï¼ˆé»˜è®¤3000ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">maximumSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">3000</span>;
    <span class="hljs-comment">// è¿‡æœŸæ¨¡å¼ï¼ˆé»˜è®¤WRITEï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">expireMode</span> <span class="hljs-operator">=</span> ExpireMode.WRITE.name();

    <span class="hljs-comment">// Getter/Setter çœç•¥</span>

    <span class="hljs-comment">// è½¬æ¢ä¸ºç§’çº§è¿‡æœŸæ—¶é—´</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getTtlToSeconds</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> timeUnit.toSeconds(ttl);
    }

    <span class="hljs-comment">// å¸¦æ¯”ä¾‹çš„è¿‡æœŸæ—¶é—´ï¼ˆæœ€å°3ç§’ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getTtlWithProportion</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">base</span> <span class="hljs-operator">=</span> getTtlToSeconds();
        <span class="hljs-type">long</span> <span class="hljs-variable">proportioned</span> <span class="hljs-operator">=</span> (base * ttlProportion) / <span class="hljs-number">100</span>;
        <span class="hljs-keyword">return</span> Math.max(proportioned, <span class="hljs-number">3</span>);
    }
}

<span class="hljs-comment">// è¿‡æœŸæ¨¡å¼æšä¸¾</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">ExpireMode</span> {
    WRITE, ACCESS
}
</code></pre>
<h4 data-id="heading-35">3. ç©ºå€¼æ ‡è¯†ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NullValue</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">NullValue</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NullValue</span>();

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">NullValue</span><span class="hljs-params">()</span> {}

    <span class="hljs-comment">// ååºåˆ—åŒ–æ—¶è¿”å›å•ä¾‹</span>
    <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">readResolve</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> INSTANCE;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">equals</span><span class="hljs-params">(Object obj)</span> {
        <span class="hljs-keyword">return</span> obj == <span class="hljs-built_in">this</span> || obj == <span class="hljs-literal">null</span>;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> NullValue.class.hashCode();
    }

    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©ºå€¼</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isNull</span><span class="hljs-params">(Object value)</span> {
        <span class="hljs-keyword">return</span> value == <span class="hljs-literal">null</span> || value == INSTANCE;
    }
}
</code></pre>
<h4 data-id="heading-36">4. Redis ç¼“å­˜æ¨¡æ¿</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">data</span>.<span class="hljs-property">redis</span>.<span class="hljs-property">core</span>.<span class="hljs-property">StringRedisTemplate</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisCacheTemplate</span> {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">StringRedisTemplate</span> redisTemplate;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">RedisCacheTemplate</span>(<span class="hljs-title class_">StringRedisTemplate</span> redisTemplate) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">redisTemplate</span> = redisTemplate;
    }

    <span class="hljs-comment">// è®¾ç½®ç¼“å­˜ï¼ˆå¸¦è¿‡æœŸæ—¶é—´ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">set</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key, <span class="hljs-built_in">String</span> value, long ttl, TimeUnit unit</span>) {
        redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">set</span>(key, value, ttl, unit);
    }

    <span class="hljs-comment">// è·å–ç¼“å­˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">get</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key</span>) {
        <span class="hljs-keyword">return</span> redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">get</span>(key);
    }

    <span class="hljs-comment">// åˆ é™¤ç¼“å­˜</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">delete</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key</span>) {
        <span class="hljs-keyword">return</span> redisTemplate.<span class="hljs-title function_">delete</span>(key);
    }

    <span class="hljs-comment">// æ‰¹é‡åˆ é™¤</span>
    <span class="hljs-keyword">public</span> long <span class="hljs-title function_">delete</span>(<span class="hljs-params">Collection&lt;<span class="hljs-built_in">String</span>&gt; keys</span>) {
        <span class="hljs-keyword">return</span> redisTemplate.<span class="hljs-title function_">delete</span>(keys);
    }

    <span class="hljs-comment">// åˆ¤æ–­Keyæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">hasKey</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key</span>) {
        <span class="hljs-keyword">return</span> redisTemplate.<span class="hljs-title function_">hasKey</span>(key);
    }

    <span class="hljs-comment">// è®¾ç½®è¿‡æœŸæ—¶é—´</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">expire</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> key, long ttl, TimeUnit unit</span>) {
        <span class="hljs-keyword">return</span> redisTemplate.<span class="hljs-title function_">expire</span>(key, ttl, unit);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3.ç»„åˆå¼å‡½æ•°]]></title>    <link>https://juejin.cn/post/7579440586694230062</link>    <guid>https://juejin.cn/post/7579440586694230062</guid>    <pubDate>2025-12-03T10:14:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579440586694230062" data-draft-id="7579451710302617626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3.ç»„åˆå¼å‡½æ•°"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-03T10:14:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zohnny"/> <meta itemprop="url" content="https://juejin.cn/user/879230751088759"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3.ç»„åˆå¼å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/879230751088759/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zohnny
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:14:25.000Z" title="Wed Dec 03 2025 10:14:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç»„åˆå¼å‡½æ•°</h2>
<p>ç»„åˆå¼å‡½æ•°ï¼Œæœ¬è´¨ä¸Šä¹Ÿå°±æ˜¯<strong>ä»£ç å¤ç”¨</strong>çš„ä¸€ç§æ–¹å¼ã€‚</p>
<ul>
<li>ç»„ä»¶ï¼šå¯¹ç»“æ„ã€æ ·å¼ã€é€»è¾‘è¿›è¡Œå¤ç”¨</li>
<li>ç»„åˆå¼å‡½æ•°ï¼šä¾§é‡äºå¯¹ <strong>æœ‰çŠ¶æ€</strong> çš„é€»è¾‘è¿›è¡Œå¤ç”¨</li>
</ul>
<p><strong>å¿«é€Ÿä¸Šæ‰‹</strong></p>
<p>å®ç°ä¸€ä¸ªé¼ æ ‡åæ ‡å€¼çš„è¿½è¸ªå™¨ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;å½“å‰é¼ æ ‡ä½ç½®: {{ x }}, {{ y }}&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted, onUnmounted } from 'vue'

const x = ref(0)
const y = ref(0)

function update(event) {
  x.value = event.pageX
  y.value = event.pageY
}

onMounted(() =&gt; window.addEventListener('mousemove', update))
onUnmounted(() =&gt; window.removeEventListener('mousemove', update))
&lt;/script&gt;

&lt;style scoped&gt;&lt;/style&gt;
</code></pre>
<p>å¤šä¸ªç»„ä»¶ä¸­<strong>å¤ç”¨è¿™ä¸ªç›¸åŒçš„é€»è¾‘</strong>ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>ç­”ï¼šä½¿ç”¨ç»„åˆå¼å‡½æ•°ã€‚å°†åŒ…å«äº†çŠ¶æ€çš„ç›¸å…³é€»è¾‘ï¼Œä¸€èµ·æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°å°±æ˜¯ç»„åˆå¼å‡½æ•°ã€‚</p>
<p><strong>ç›¸å…³ç»†èŠ‚</strong></p>
<p><strong>1. ç»„åˆå¼å‡½æ•°æœ¬èº«è¿˜å¯ä»¥ç›¸äº’åµŒå¥—</strong></p>
<p><strong>2. å’ŒVue2æ—¶æœŸmixinåŒºåˆ«</strong></p>
<p>è§£å†³äº† Vue2 æ—¶æœŸ mixin çš„ä¸€äº›é—®é¢˜ã€‚</p>
<ol>
<li>
<p>ä¸æ¸…æ™°çš„æ•°æ®æ¥æºï¼šå½“ä½¿ç”¨å¤šä¸ª minxin çš„æ—¶å€™ï¼Œå®ä¾‹ä¸Šçš„æ•°æ®å±æ€§æ¥è‡ªäºå“ªä¸€ä¸ª mixin ä¸å¤ªå¥½åˆ†è¾¨ã€‚</p>
</li>
<li>
<p>å‘½åç©ºé—´å†²çªï¼šå¦‚æœå¤šä¸ª mixin æ¥è‡ªäºä¸åŒçš„ä½œè€…ï¼Œå¯èƒ½ä¼šæ³¨å†Œç›¸åŒçš„å±æ€§åï¼Œé€ æˆå‘½åå†²çª</p>
<p>mixin</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> mixinA = {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// fetch data logic for mixin A</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching data from mixin A'</span>);
    }
  }
};

<span class="hljs-keyword">const</span> mixinB = {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// fetch data logic for mixin B</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching data from mixin B'</span>);
    }
  }
};

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  <span class="hljs-attr">mixins</span>: [mixinA, mixinB],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div&gt;
      &lt;button @click="fetchData"&gt;Fetch Data&lt;/button&gt;
    &lt;/div&gt;
  `</span>
});
</code></pre>
<p>ç»„åˆå¼å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// useMixinA.js</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMixinA</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// fetch data logic for mixin A</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching data from mixin A'</span>);
  }

  <span class="hljs-keyword">return</span> { fetchData };
}

<span class="hljs-comment">// useMixinB.js</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMixinB</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// fetch data logic for mixin B</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Fetching data from mixin B'</span>);
  }

  <span class="hljs-keyword">return</span> { fetchData };
}
</code></pre>
<p>ç»„ä»¶ä½¿ç”¨ä¸Šé¢çš„ç»„åˆå¼å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { useMixinA } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useMixinA'</span>;
<span class="hljs-keyword">import</span> { useMixinB } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useMixinB'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¿™é‡Œå¿…é¡»è¦ç»™åˆ«å</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">fetchData</span>: fetchDataA } = <span class="hljs-title function_">useMixinA</span>();
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">fetchData</span>: fetchDataB } = <span class="hljs-title function_">useMixinB</span>();

    <span class="hljs-title function_">fetchDataA</span>();
    <span class="hljs-title function_">fetchDataB</span>();

    <span class="hljs-keyword">return</span> { fetchDataA, fetchDataB };
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div&gt;
      &lt;button @click="fetchDataA"&gt;Fetch Data A&lt;/button&gt;
      &lt;button @click="fetchDataB"&gt;Fetch Data B&lt;/button&gt;
    &lt;/div&gt;
  `</span>
});
</code></pre>
</li>
<li>
<p>éšå¼çš„è·¨mixinäº¤æµ</p>
<p>mixin</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> mixinA = {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">sharedValue</span>: <span class="hljs-string">'some value'</span>
    };
  }
};
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> minxinB = {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">dValue</span>(<span class="hljs-params"/>){
      <span class="hljs-comment">// å’Œ mixinA å…·æœ‰éšå¼çš„äº¤æµ</span>
      <span class="hljs-comment">// å› ä¸ºæœ€ç»ˆ mixin çš„å†…å®¹ä¼šè¢«åˆå¹¶åˆ°ç»„ä»¶å®ä¾‹ä¸Šé¢ï¼Œå› æ­¤åœ¨ mixinB é‡Œé¢å¯ä»¥ç›´æ¥è®¿é—® mixinA çš„æ•°æ®</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">sharedValue</span> + <span class="hljs-string">'xxxx'</span>;
    }
  }
}
</code></pre>
<p>ç»„åˆå¼å‡½æ•°ï¼šäº¤æµå°±æ˜¯æ˜¾å¼çš„</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMixinA</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> sharedValue = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'some value'</span>);
  <span class="hljs-keyword">return</span> { sharedValue };
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMixinB</span>(<span class="hljs-params">sharedValue</span>) {
  <span class="hljs-keyword">const</span> derivedValue = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> sharedValue.<span class="hljs-property">value</span> + <span class="hljs-string">' extended'</span>);
  <span class="hljs-keyword">return</span> { derivedValue };
}
</code></pre>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    {{ derivedValue }}
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { defineComponent } from 'vue';
import { useMixinA } from './useMixinA';
import { useMixinB } from './useMixinB';

export default defineComponent({
  setup() {
    const { sharedValue } = useMixinA();
    
    // ä¸¤ä¸ªç»„åˆå¼å‡½æ•°çš„äº¤æµæ˜¯æ˜¾å¼çš„
    const { derivedValue } = useMixinB(sharedValue);

    return { derivedValue };
  }
});
&lt;/script&gt;
</code></pre>
</li>
</ol>
<p><strong>å¼‚æ­¥çŠ¶æ€</strong></p>
<p>æ ¹æ®å¼‚æ­¥è¯·æ±‚çš„æƒ…å†µæ˜¾ç¤ºä¸åŒçš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div v-if="error"&gt;Oops! Error encountered: {{ error.message }}&lt;/div&gt;
  &lt;div v-else-if="data"&gt;
    Data loaded:
    &lt;pre&gt;{{ data }}&lt;/pre&gt;
  &lt;/div&gt;
  &lt;div v-else&gt;Loading...&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

// å‘é€è¯·æ±‚è·å–æ•°æ®
const data = ref(null)
// é”™è¯¯
const error = ref(null)

fetch('...')
  .then((res) =&gt; res.json())
  .then((json) =&gt; (data.value = json))
  .catch((err) =&gt; (error.value = err))
&lt;/script&gt;
</code></pre>
<p>å¦‚ä½•å¤ç”¨è¿™æ®µé€»è¾‘ï¼Ÿä»ç„¶æ˜¯æå–æˆä¸€ä¸ªç»„åˆå¼å‡½æ•°ã€‚</p>
<p>å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useFetch</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">fetch</span>(url)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> (data.<span class="hljs-property">value</span> = json))
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> (error.<span class="hljs-property">value</span> = err))

  <span class="hljs-keyword">return</span> { data, error }
}
</code></pre>
<p>ç°åœ¨é‡æ„ä¸Šé¢çš„ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div v-if="error"&gt;Oops! Error encountered: {{ error.message }}&lt;/div&gt;
  &lt;div v-else-if="data"&gt;
    Data loaded:
    &lt;pre&gt;{{ data }}&lt;/pre&gt;
  &lt;/div&gt;
  &lt;div v-else&gt;Loading...&lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import {useFetch} from './hooks/useFetch';
const {data, error} = useFetch('xxxx')
&lt;/script&gt;
</code></pre>
<p>è¿™é‡Œä¸ºäº†æ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬æƒ³è¦ä¼ é€’ä¸€ä¸ªå“åº”å¼æ•°æ®ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> url = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'first-url'</span>);
<span class="hljs-comment">// è¯·æ±‚æ•°æ®</span>
<span class="hljs-keyword">const</span> {data, error} = <span class="hljs-title function_">useFetch</span>(url);
<span class="hljs-comment">// ä¿®æ”¹ url çš„å€¼åé‡æ–°è¯·æ±‚æ•°æ®</span>
url.<span class="hljs-property">value</span> = <span class="hljs-string">'new-url'</span>;
</code></pre>
<p>æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦é‡æ„ä¸Šé¢çš„ç»„åˆå¼å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref, watchEffect, toValue } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useFetch</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> error = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æ¯æ¬¡æ‰§è¡Œ fetchData çš„æ—¶å€™ï¼Œé‡åˆ¶ data å’Œ error çš„å€¼</span>
    data.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>
    error.<span class="hljs-property">value</span> = <span class="hljs-literal">null</span>

    <span class="hljs-title function_">fetch</span>(<span class="hljs-title function_">toValue</span>(url))
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">json</span>) =&gt;</span> (data.<span class="hljs-property">value</span> = json))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> (error.<span class="hljs-property">value</span> = err))
  }

  <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchData</span>()
  })

  <span class="hljs-keyword">return</span> { data, error }
}
</code></pre>
<p><strong>çº¦å®šå’Œæœ€ä½³å®è·µ</strong></p>
<p><strong>1. å‘½å</strong>ï¼šç»„åˆå¼å‡½æ•°çº¦å®šç”¨<strong>é©¼å³°å‘½åæ³•</strong>å‘½åï¼Œå¹¶<strong>ä»¥â€œuseâ€ä½œä¸ºå¼€å¤´</strong>ã€‚ä¾‹å¦‚å‰é¢çš„ useMouseã€useEvent.</p>
<p><strong>2. è¾“å…¥å‚æ•°</strong>ï¼šæ³¨æ„å‚æ•°æ˜¯<strong>å“åº”å¼æ•°æ®</strong>çš„æƒ…å†µã€‚å¦‚æœä½ çš„ç»„åˆå¼å‡½æ•°åœ¨è¾“å…¥å‚æ•°æ˜¯ ref æˆ– getter çš„æƒ…å†µä¸‹åˆ›å»ºäº†å“åº”å¼ effectï¼Œä¸ºäº†è®©å®ƒèƒ½å¤Ÿè¢«æ­£ç¡®è¿½è¸ªï¼Œè¯·ç¡®ä¿è¦ä¹ˆä½¿ç”¨ watch( ) æ˜¾å¼åœ°ç›‘è§† ref æˆ– getterï¼Œè¦ä¹ˆåœ¨ watchEffect( ) ä¸­è°ƒç”¨ toValue( )ã€‚</p>
<p><strong>3. è¿”å›å€¼</strong></p>
<p>ç»„åˆå¼å‡½æ•°ä¸­æ¨èè¿”å›ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸€é¡¹æ˜¯ ref æ•°æ®ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨è§£æ„çš„æ—¶å€™ä»ç„¶èƒ½å¤Ÿä¿æŒå…¶å“åº”å¼çš„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»„åˆå¼å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> x = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> y = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

  <span class="hljs-comment">// ...</span>
  
  <span class="hljs-keyword">return</span> { x, y }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useMouse'</span>
<span class="hljs-comment">// å¯ä»¥è§£æ„</span>
<span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>()
</code></pre>
<p>å¦‚æœå¸Œæœ›ä»¥å¯¹è±¡å±æ€§çš„å½¢å¼æ¥ä½¿ç”¨ç»„åˆå¼å‡½æ•°ä¸­è¿”å›çš„çŠ¶æ€ï¼Œå¯ä»¥å°†è¿”å›çš„å¯¹è±¡ç”¨ reactive å†åŒ…è£…ä¸€æ¬¡å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./hooks/useMouse'</span>
<span class="hljs-keyword">const</span> mouse = <span class="hljs-title function_">reactive</span>(<span class="hljs-title function_">useMouse</span>())
</code></pre>
<p><strong>4. å‰¯ä½œç”¨</strong></p>
<p>åœ¨ç»„åˆå¼å‡½æ•°ä¸­å¯ä»¥æ‰§è¡Œå‰¯ä½œç”¨ï¼Œä¾‹å¦‚æ·»åŠ  DOM äº‹ä»¶ç›‘å¬å™¨æˆ–è€…è¯·æ±‚æ•°æ®ã€‚ä½†æ˜¯è¯·ç¡®ä¿åœ¨ onUnmounted é‡Œé¢æ¸…ç†å‰¯ä½œç”¨ã€‚</p>
<p>ä¾‹å¦‚åœ¨ä¸€ä¸ªç»„åˆå¼å‡½æ•°è®¾ç½®äº†ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦åœ¨ onUnmounted çš„æ—¶å€™ç§»é™¤è¿™ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useMouse</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'mousemove'</span>, update))

	<span class="hljs-comment">// ...</span>
}
</code></pre>
<p>ä¹Ÿå¯ä»¥åƒå‰é¢ useEvent ä¸€æ ·ï¼Œä¸“é—¨å®šä¹‰ä¸€ä¸ªç»„åˆå¼å‡½æ•°æ¥å¤„ç†å‰¯ä½œç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useEventListener</span>(<span class="hljs-params">target, event, callback</span>) {
  <span class="hljs-comment">// ä¸“é—¨å¤„ç†å‰¯ä½œç”¨çš„ç»„åˆå¼å‡½æ•°</span>
  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> target.<span class="hljs-title function_">addEventListener</span>(event, callback))
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> target.<span class="hljs-title function_">removeEventListener</span>(event, callback))
}
</code></pre>
<p><strong>5. ä½¿ç”¨é™åˆ¶</strong></p>
<ol>
<li>
<p>åªèƒ½åœ¨ &lt;script setup&gt;æˆ– setup( ) é’©å­ä¸­è°ƒç”¨ï¼šç¡®ä¿åœ¨ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œæ‰€æœ‰çš„ç»„åˆå¼å‡½æ•°éƒ½è¢«æ­£ç¡®åˆå§‹åŒ–ã€‚ç‰¹åˆ«å¦‚æœä½ ä½¿ç”¨çš„æ˜¯é€‰é¡¹å¼ APIï¼Œé‚£ä¹ˆéœ€è¦åœ¨ setup æ–¹æ³•ä¸­è°ƒç”¨ç»„åˆå¼å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›ï¼Œè¿™æ ·æ‰èƒ½æš´éœ²ç»™ this åŠå…¶æ¨¡æ¿ä½¿ç”¨</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { useMouse } <span class="hljs-keyword">from</span> <span class="hljs-string">'./mouse.js'</span>
<span class="hljs-keyword">import</span> { useFetch } <span class="hljs-keyword">from</span> <span class="hljs-string">'./fetch.js'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å› ä¸ºç»„åˆå¼å‡½æ•°ä¼šè¿”å›ä¸€äº›çŠ¶æ€</span>
    <span class="hljs-comment">// ä¸ºäº†åé¢é€šè¿‡ this èƒ½å¤Ÿæ­£ç¡®è®¿é—®åˆ°è¿™äº›æ•°æ®çŠ¶æ€</span>
    <span class="hljs-comment">// å¿…é¡»åœ¨ setup çš„æ—¶å€™è°ƒç”¨ç»„åˆå¼å‡½æ•°</span>
    <span class="hljs-keyword">const</span> { x, y } = <span class="hljs-title function_">useMouse</span>()
    <span class="hljs-keyword">const</span> { data, error } = <span class="hljs-title function_">useFetch</span>(<span class="hljs-string">'...'</span>)
    <span class="hljs-keyword">return</span> { x, y, data, error }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// setup() æš´éœ²çš„å±æ€§å¯ä»¥åœ¨é€šè¿‡ `this` è®¿é—®åˆ°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>)
  }
  <span class="hljs-comment">// ...å…¶ä»–é€‰é¡¹</span>
}
</code></pre>
</li>
<li>
<p>åªèƒ½è¢«åŒæ­¥è°ƒç”¨ï¼šç»„åˆå¼å‡½æ•°éœ€è¦åŒæ­¥è°ƒç”¨ï¼Œä»¥ç¡®ä¿åœ¨ç»„ä»¶å®ä¾‹çš„åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰ç›¸å…³çš„çŠ¶æ€å’Œå‰¯ä½œç”¨éƒ½èƒ½è¢«æ­£ç¡®åœ°è®¾ç½®å’Œå¤„ç†ã€‚å¦‚æœç»„åˆå¼å‡½æ•°è¢«å¼‚æ­¥è°ƒç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´åœ¨ç»„ä»¶å®ä¾‹è¿˜æœªå®Œå…¨åˆå§‹åŒ–æ—¶ï¼Œå°è¯•è®¿é—®æœªå®šä¹‰çš„å®ä¾‹æ•°æ®ï¼Œä»è€Œå¼•å‘é”™è¯¯ã€‚</p>
</li>
<li>
<p>å¯ä»¥åœ¨åƒ onMounted ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è°ƒç”¨ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨å¦‚ onMounted ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­è°ƒç”¨ç»„åˆå¼å‡½æ•°ã€‚è¿™äº›ç”Ÿå‘½å‘¨æœŸé’©å­ä¹Ÿæ˜¯<strong>åŒæ­¥æ‰§è¡Œ</strong>çš„ï¼Œå¹¶ä¸”åœ¨ç»„ä»¶å®ä¾‹å·²ç»è¢«åˆå§‹åŒ–åè°ƒç”¨ï¼Œå› æ­¤å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ç»„åˆå¼å‡½æ•°ã€‚</p>
</li>
</ol>
<hr/>
<p>-EOF-</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºGulpï¼Œä½ å­¦è¿™äº›å°±å¤Ÿäº†]]></title>    <link>https://juejin.cn/post/7579453456018128937</link>    <guid>https://juejin.cn/post/7579453456018128937</guid>    <pubDate>2025-12-03T10:14:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579453456018128937" data-draft-id="7579453456018112553" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºGulpï¼Œä½ å­¦è¿™äº›å°±å¤Ÿäº†"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-03T10:14:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§€ç§€ä¸åªä¼šå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºGulpï¼Œä½ å­¦è¿™äº›å°±å¤Ÿäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§€ç§€ä¸åªä¼šå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:14:53.000Z" title="Wed Dec 03 2025 10:14:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Gulp æ˜¯ä¸€ä¸ªåŸºäºæµï¼ˆStreamï¼‰çš„æ„å»ºå·¥å…·ï¼Œç”¨äºè‡ªåŠ¨åŒ–å‰ç«¯å¼€å‘ä¸­çš„å¸¸è§ä»»åŠ¡ï¼ˆå¦‚æ–‡ä»¶å‹ç¼©ã€ç¼–è¯‘ã€è‡ªåŠ¨åŒ–æµ‹è¯•ç­‰ï¼‰ã€‚å®ƒçš„è®¾è®¡ç†å¿µæ˜¯å°†ä»»åŠ¡æµç¨‹å¤„ç†æˆæ•°æ®æµï¼Œé€šè¿‡ç®¡é“ï¼ˆPipelineï¼‰å¤„ç†æ•°æ®ï¼Œä»¥è¾¾åˆ°è‡ªåŠ¨åŒ–æ„å»ºçš„ç›®çš„ã€‚</p>
<blockquote>
<p>ç°åœ¨å¯¹ gulp çš„ä½¿ç”¨å·²ç»å¾ˆå°‘äº†ï¼Œä½†æ˜¯æœ‰äº›é¢è¯•å®˜åœ¨é¢è¯•çš„æ—¶å€™è¿˜æ˜¯ä¼šé—®ï¼Œå› æ­¤å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« æ¥è®²ä¸€ä¸‹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">1. <strong>Gulp çš„åŸºæœ¬æ¦‚å¿µ</strong></h2>
<ul>
<li>â€‹**æµï¼ˆStreamï¼‰**â€‹ï¼šGulp é€šè¿‡æµçš„æ–¹å¼æ¥å¤„ç†æ–‡ä»¶ï¼Œå¯ä»¥è®©æ–‡ä»¶åœ¨å†…å­˜ä¸­è¿›è¡Œæ“ä½œï¼Œè€Œä¸éœ€è¦é¢‘ç¹çš„è¯»å†™ç£ç›˜ã€‚</li>
<li>â€‹**ä»»åŠ¡ï¼ˆTaskï¼‰**â€‹ï¼šæ¯ä¸ª Gulp æ“ä½œå«åšä¸€ä¸ªä»»åŠ¡ï¼Œä»»åŠ¡å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼ˆå¦‚æ–‡ä»¶å‹ç¼©ã€æ–‡ä»¶åˆå¹¶ç­‰ï¼‰ã€‚</li>
<li>â€‹**ç®¡é“ï¼ˆPipeï¼‰**â€‹ï¼šGulp ä½¿ç”¨ç®¡é“æ¥è¿æ¥å¤šä¸ªä»»åŠ¡ï¼Œä»¥æ­¤å½¢æˆå·¥ä½œæµã€‚ç®¡é“æ˜¯ä»»åŠ¡ä¹‹é—´çš„æµåŠ¨è·¯å¾„ï¼Œæ¯ä¸ªä»»åŠ¡è¾“å‡ºçš„ç»“æœä½œä¸ºä¸‹ä¸€ä¸ªä»»åŠ¡çš„è¾“å…¥ã€‚</li>
</ul>
<h2 data-id="heading-1">2. <strong>å®‰è£… Gulp</strong></h2>
<p>é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† Node.jsï¼Œç„¶åé€šè¿‡ npm å®‰è£… Gulpã€‚</p>
<pre><code class="hljs language-Bash" lang="Bash"><span class="hljs-comment"># å®‰è£… Gulp CLIï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰</span>
npm install --global gulp-cli

<span class="hljs-comment"># åœ¨é¡¹ç›®ä¸­å®‰è£… Gulp æœ¬åœ°ä¾èµ–</span>
npm install --save-dev gulp
</code></pre>
<h2 data-id="heading-2">3. <strong>åˆ›å»º Gulp ä»»åŠ¡</strong></h2>
<p>gulp ä»»åŠ¡å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ª callback ä½œä¸ºå‚æ•°ï¼Œè°ƒç”¨ callback å‡½æ•°é‚£ä¹ˆä»»åŠ¡ä¼šç»“æŸï¼›æˆ–è€…æ˜¯ä¸€ä¸ªè¿”å› streamã€promiseã€event emitterã€child process æˆ– observable ç±»å‹çš„å‡½æ•°ã€‚</p>
<p><strong>ä¸€å¥—æµç¨‹ = src â†’ pipe(plugin) â†’ pipe(plugin) â†’ dest</strong></p>
<blockquote>
<p>ä»¥ä¸‹å†™æ³•å‡ä¸ºï¼šgulp4+ ç‰ˆæœ¬çš„æœ€æ–°å†™æ³•ã€‚</p>
</blockquote>
<h3 data-id="heading-3">1ï¼‰å®šä¹‰ä¸€ä¸ªä»»åŠ¡ï¼ˆTaskï¼‰</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params">cb</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Gulp run ok"</span>);
  <span class="hljs-title function_">cb</span>(); <span class="hljs-comment">// è¡¨ç¤ºä»»åŠ¡å®Œæˆ</span>
}
<span class="hljs-built_in">exports</span>.<span class="hljs-property">hello</span> = hello;
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">gulp hello
</code></pre>
<h3 data-id="heading-4">2ï¼‰å¤„ç† CSS / Sass</h3>
<pre><code class="hljs language-Bash" lang="Bash">npm i gulp-sass sass gulp-clean-css gulp-autoprefixer -D
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> { src, dest } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>);
<span class="hljs-keyword">const</span> sass = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-sass"</span>)(<span class="hljs-built_in">require</span>(<span class="hljs-string">"sass"</span>));
<span class="hljs-keyword">const</span> cleanCSS = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-clean-css"</span>);
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-autoprefixer"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">styles</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/scss/*.scss"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">sass</span>())                <span class="hljs-comment">// scss -&gt; css</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">autoprefixer</span>())        <span class="hljs-comment">// è‡ªåŠ¨åŠ å‰ç¼€</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">cleanCSS</span>())            <span class="hljs-comment">// å‹ç¼© css</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/css"</span>));
}

<span class="hljs-built_in">exports</span>.<span class="hljs-property">styles</span> = styles;
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">gulp styles
</code></pre>
<h3 data-id="heading-5">3ï¼‰å‹ç¼© / åˆå¹¶ JS</h3>
<pre><code class="hljs language-Bash" lang="Bash">npm i gulp-uglify gulp-concat -D
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-uglify"</span>);
<span class="hljs-keyword">const</span> concat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-concat"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">scripts</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/js/*.js"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">concat</span>(<span class="hljs-string">"app.min.js"</span>)) <span class="hljs-comment">// åˆå¹¶</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">uglify</span>())             <span class="hljs-comment">// å‹ç¼©</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/js"</span>));
}

<span class="hljs-built_in">exports</span>.<span class="hljs-property">scripts</span> = scripts;
</code></pre>
<h3 data-id="heading-6">4ï¼‰å‹ç¼©å›¾ç‰‡</h3>
<pre><code class="hljs language-Bash" lang="Bash">npm i gulp-imagemin -D
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> imagemin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-imagemin"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">images</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/images/*"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">imagemin</span>())   <span class="hljs-comment">// å‹ç¼©å›¾ç‰‡</span>
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/images"</span>));
}

<span class="hljs-built_in">exports</span>.<span class="hljs-property">images</span> = images;
</code></pre>
<h3 data-id="heading-7">5ï¼‰ç›‘å¬æ–‡ä»¶ä¿®æ”¹</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> { watch } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">dev</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/scss/*.scss"</span>, styles);
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/js/*.js"</span>, scripts);
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/images/*"</span>, images);
}

<span class="hljs-built_in">exports</span>.<span class="hljs-property">dev</span> = dev;
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">gulp dev
</code></pre>
<p>æ–‡ä»¶ä¸€æ”¹ â†’ è‡ªåŠ¨æ„å»º</p>
<h3 data-id="heading-8">6ï¼‰ç»„åˆä»»åŠ¡ series / parallel</h3>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> { series, parallel } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>);

<span class="hljs-built_in">exports</span>.<span class="hljs-property">build</span> = <span class="hljs-title function_">series</span>(styles, scripts, images);   <span class="hljs-comment">// å…ˆåæ‰§è¡Œ</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">all</span>    = <span class="hljs-title function_">parallel</span>(styles, scripts, images); <span class="hljs-comment">// åŒæ—¶æ‰§è¡Œ</span>
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">gulp build
</code></pre>
<h3 data-id="heading-9">7ï¼‰é»˜è®¤ä»»åŠ¡ï¼ˆç›´æ¥ <code>gulp</code>ï¼‰</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = <span class="hljs-title function_">series</span>(styles, scripts, images, dev);
</code></pre>
<p>æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Bash" lang="Bash">gulp
</code></pre>
<ol start="4">
<li>
<h2 data-id="heading-10">å¸¸ç”¨ gulpfile.js</h2>
</li>
</ol>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> { src, dest, series, parallel, watch } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp"</span>);
<span class="hljs-keyword">const</span> sass = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-sass"</span>)(<span class="hljs-built_in">require</span>(<span class="hljs-string">"sass"</span>));
<span class="hljs-keyword">const</span> cleanCSS = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-clean-css"</span>);
<span class="hljs-keyword">const</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-uglify"</span>);
<span class="hljs-keyword">const</span> concat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-concat"</span>);
<span class="hljs-keyword">const</span> imagemin = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-imagemin"</span>);
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">"gulp-autoprefixer"</span>);

<span class="hljs-comment">// CSSå¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">styles</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/scss/*.scss"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">sass</span>())
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">autoprefixer</span>())
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">cleanCSS</span>())
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/css"</span>));
}

<span class="hljs-comment">// JSå¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">scripts</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/js/*.js"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">concat</span>(<span class="hljs-string">"app.min.js"</span>))
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">uglify</span>())
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/js"</span>));
}

<span class="hljs-comment">// å›¾ç‰‡å‹ç¼©</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">images</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(<span class="hljs-string">"src/images/*"</span>)
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">imagemin</span>())
    .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">"dist/images"</span>));
}

<span class="hljs-comment">// ç›‘å¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">dev</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/scss/*.scss"</span>, styles);
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/js/*.js"</span>, scripts);
  <span class="hljs-title function_">watch</span>(<span class="hljs-string">"src/images/*"</span>, images);
}

<span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = <span class="hljs-title function_">series</span>(
  <span class="hljs-title function_">parallel</span>(styles, scripts, images),
  dev
);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurfer.jsé…ç½®æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7579410911058083866</link>    <guid>https://juejin.cn/post/7579410911058083866</guid>    <pubDate>2025-12-03T10:17:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579410911058083866" data-draft-id="7579440586694246446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurfer.jsé…ç½®æ–‡æ¡£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-03T10:17:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QINS"/> <meta itemprop="url" content="https://juejin.cn/user/3825956196198669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ€å…¨éŸ³é¢‘å¤„ç†WaveSurfer.jsé…ç½®æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956196198669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QINS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:17:41.000Z" title="Wed Dec 03 2025 10:17:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºç¡€ç”¨æ³•</span>
<span class="hljs-keyword">const</span> wavesurfer = <span class="hljs-title class_">WaveSurfer</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">container</span>: <span class="hljs-string">'#waveform'</span>,
  <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'violet'</span>,
  <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'purple'</span>
});

<span class="hljs-comment">// åŠ è½½éŸ³é¢‘</span>
wavesurfer.<span class="hljs-title function_">load</span>(<span class="hljs-string">'audio.mp3'</span>);

<span class="hljs-comment">// äº‹ä»¶ç›‘å¬</span>
wavesurfer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  wavesurfer.<span class="hljs-title function_">play</span>();
});

<span class="hljs-comment">// æ§åˆ¶æ–¹æ³•</span>
wavesurfer.<span class="hljs-title function_">play</span>();
wavesurfer.<span class="hljs-title function_">pause</span>();
wavesurfer.<span class="hljs-title function_">stop</span>();
wavesurfer.<span class="hljs-title function_">setVolume</span>(<span class="hljs-number">0.5</span>);
wavesurfer.<span class="hljs-title function_">setPlaybackRate</span>(<span class="hljs-number">1.5</span>);
</code></pre>
<h2 data-id="heading-1">äºŒã€å®Œæ•´é…ç½®å‚æ•°è¡¨æ ¼</h2>
<h3 data-id="heading-2">åŸºç¡€é…ç½®å‚æ•°</h3>

































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>container</code></td><td>String/HTMLElement</td><td><strong>å¿…å¡«</strong></td><td>æ³¢å½¢å›¾å®¹å™¨ï¼ˆCSSé€‰æ‹©å™¨æˆ–DOMå…ƒç´ ï¼‰</td></tr><tr><td><code>height</code></td><td>Number</td><td>128</td><td>æ³¢å½¢å›¾é«˜åº¦ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>width</code></td><td>Number</td><td>0</td><td>æ³¢å½¢å›¾å®½åº¦ï¼Œ0è¡¨ç¤ºè‡ªåŠ¨å¡«å……</td></tr><tr><td><code>responsive</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å“åº”å¼å¸ƒå±€</td></tr><tr><td><code>pixelRatio</code></td><td>Number</td><td>window.devicePixelRatio</td><td>åƒç´ æ¯”ï¼Œç”¨äºé«˜æ¸…å±</td></tr><tr><td><code>fillParent</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¡«å……çˆ¶å®¹å™¨</td></tr><tr><td><code>scrollParent</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å¯ç”¨æ¨ªå‘æ»šåŠ¨</td></tr><tr><td><code>minPxPerSec</code></td><td>Number</td><td>0</td><td>æœ€å°æ¯ç§’åƒç´ æ•°</td></tr><tr><td><code>hideScrollbar</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦éšè—æ»šåŠ¨æ¡</td></tr></tbody></table>
<h3 data-id="heading-3">æ³¢å½¢æ ·å¼å‚æ•°</h3>

















































































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>waveColor</code></td><td>String</td><td>'#999'</td><td>æ³¢å½¢é¢œè‰²</td></tr><tr><td><code>progressColor</code></td><td>String</td><td>'#555'</td><td>æ’­æ”¾è¿›åº¦é¢œè‰²</td></tr><tr><td><code>cursorColor</code></td><td>String</td><td>'#333'</td><td>å…‰æ ‡é¢œè‰²</td></tr><tr><td><code>cursorWidth</code></td><td>Number</td><td>1</td><td>å…‰æ ‡å®½åº¦ï¼ˆåƒç´ ï¼‰</td></tr><tr><td><code>barWidth</code></td><td>Number</td><td>0</td><td>æ¡å½¢å®½åº¦ï¼Œ0è¡¨ç¤ºè‡ªåŠ¨è®¡ç®—</td></tr><tr><td><code>barHeight</code></td><td>Number</td><td>1</td><td>æ¡å½¢é«˜åº¦æ¯”ä¾‹ï¼ˆ0-1ï¼‰</td></tr><tr><td><code>barRadius</code></td><td>Number</td><td>0</td><td>æ¡å½¢åœ†è§’åŠå¾„</td></tr><tr><td><code>barGap</code></td><td>Number</td><td>1</td><td>æ¡å½¢é—´è·</td></tr><tr><td><code>backgroundColor</code></td><td>String</td><td>null</td><td>èƒŒæ™¯é¢œè‰²</td></tr><tr><td><code>backgroundImage</code></td><td>String</td><td>null</td><td>èƒŒæ™¯å›¾ç‰‡URL</td></tr><tr><td><code>waveBackgroundColor</code></td><td>String</td><td>null</td><td>æ³¢å½¢èƒŒæ™¯é¢œè‰²</td></tr><tr><td><code>normalize</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å½’ä¸€åŒ–æ³¢å½¢</td></tr><tr><td><code>splitChannels</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦åˆ†ç¦»å£°é“æ˜¾ç¤º</td></tr><tr><td><code>waveShadowColor</code></td><td>String</td><td>null</td><td>æ³¢å½¢é˜´å½±é¢œè‰²</td></tr><tr><td><code>waveShadowBlur</code></td><td>Number</td><td>0</td><td>é˜´å½±æ¨¡ç³Šåº¦</td></tr><tr><td><code>waveShadowOffsetX</code></td><td>Number</td><td>0</td><td>é˜´å½±Xåç§»</td></tr><tr><td><code>waveShadowOffsetY</code></td><td>Number</td><td>0</td><td>é˜´å½±Yåç§»</td></tr></tbody></table>
<h3 data-id="heading-4">äº¤äº’é…ç½®å‚æ•°</h3>



















































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>interact</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¯ç”¨äº¤äº’</td></tr><tr><td><code>dragToSeek</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å…è®¸æ‹–åŠ¨è·³è½¬</td></tr><tr><td><code>autoScroll</code></td><td>Boolean</td><td>true</td><td>æ’­æ”¾æ—¶æ˜¯å¦è‡ªåŠ¨æ»šåŠ¨</td></tr><tr><td><code>autoCenter</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦è‡ªåŠ¨å±…ä¸­æ’­æ”¾ä½ç½®</td></tr><tr><td><code>hideCursor</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦éšè—å…‰æ ‡</td></tr><tr><td><code>skipLength</code></td><td>Number</td><td>2</td><td>è·³è¿‡ç§’æ•°ï¼ˆé”®ç›˜å¿«æ·é”®ï¼‰</td></tr><tr><td><code>showTimePosition</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºæ—¶é—´ä½ç½®</td></tr><tr><td><code>regionsMinLength</code></td><td>Number</td><td>0.01</td><td>æœ€å°åŒºåŸŸé•¿åº¦ï¼ˆç§’ï¼‰</td></tr><tr><td><code>regionsSnapToGrid</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å¯¹é½ç½‘æ ¼</td></tr><tr><td><code>removeMediaElementOnDestroy</code></td><td>Boolean</td><td>true</td><td>é”€æ¯æ—¶æ˜¯å¦ç§»é™¤åª’ä½“å…ƒç´ </td></tr><tr><td><code>partialRender</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦éƒ¨åˆ†æ¸²æŸ“</td></tr><tr><td><code>rtl</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦ä»å³åˆ°å·¦å¸ƒå±€</td></tr></tbody></table>
<h3 data-id="heading-5">éŸ³é¢‘å¤„ç†å‚æ•°</h3>













































































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>backend</code></td><td>String</td><td>'WebAudio'</td><td>éŸ³é¢‘åç«¯ï¼š'WebAudio' æˆ– 'MediaElement'</td></tr><tr><td><code>mediaType</code></td><td>String</td><td>'audio'</td><td>åª’ä½“ç±»å‹ï¼š'audio' æˆ– 'video'</td></tr><tr><td><code>audioRate</code></td><td>Number</td><td>1</td><td>æ’­æ”¾é€Ÿåº¦ï¼ˆ0.5-4ï¼‰</td></tr><tr><td><code>volume</code></td><td>Number</td><td>1</td><td>éŸ³é‡ï¼ˆ0-1ï¼‰</td></tr><tr><td><code>loopSelection</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¾ªç¯é€‰åŒº</td></tr><tr><td><code>sampleRate</code></td><td>Number</td><td>0</td><td>é‡‡æ ·ç‡ï¼Œ0è¡¨ç¤ºè‡ªåŠ¨</td></tr><tr><td><code>audioContext</code></td><td>AudioContext</td><td>null</td><td>è‡ªå®šä¹‰AudioContext</td></tr><tr><td><code>fftSmoothingTimeConstant</code></td><td>Number</td><td>0.8</td><td>FFTå¹³æ»‘å¸¸æ•°</td></tr><tr><td><code>filter</code></td><td>String</td><td>'none'</td><td>æ»¤æ³¢å™¨ç±»å‹ï¼š'lowpass'ã€'highpass'ã€'bandpass'</td></tr><tr><td><code>filterFrequency</code></td><td>Number</td><td>null</td><td>æ»¤æ³¢é¢‘ç‡</td></tr><tr><td><code>filterQ</code></td><td>Number</td><td>null</td><td>æ»¤æ³¢å™¨Qå€¼</td></tr></tbody></table>
<h3 data-id="heading-6">éŸ³é¢‘åŠ è½½å‚æ•°</h3>





















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>url</code></td><td>String</td><td>null</td><td>éŸ³é¢‘URLï¼ˆå¯ç›´æ¥åœ¨æ­¤æŒ‡å®šï¼‰</td></tr><tr><td><code>xhr</code></td><td>Object</td><td>{}</td><td>XMLHttpRequesté…ç½®</td></tr><tr><td><code>mediaControls</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦æ˜¾ç¤ºæµè§ˆå™¨åŸç”Ÿæ§åˆ¶æ¡</td></tr><tr><td><code>audioBuffer</code></td><td>AudioBuffer</td><td>null</td><td>é¢„åŠ è½½çš„AudioBuffer</td></tr><tr><td><code>peaks</code></td><td>Array</td><td>null</td><td>é¢„è®¡ç®—çš„å³°å€¼æ•°æ®</td></tr><tr><td><code>duration</code></td><td>Number</td><td>null</td><td>éŸ³é¢‘æ—¶é•¿ï¼ˆç§’ï¼‰</td></tr><tr><td><code>forceDecode</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å¼ºåˆ¶è§£ç </td></tr></tbody></table>
<h3 data-id="heading-7">æ€§èƒ½ä¼˜åŒ–å‚æ•°</h3>















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>renderFunction</code></td><td>Function</td><td>null</td><td>è‡ªå®šä¹‰æ¸²æŸ“å‡½æ•°</td></tr><tr><td><code>drawingContextAttributes</code></td><td>Object</td><td><code>{alpha: true}</code></td><td>Canvasä¸Šä¸‹æ–‡å±æ€§</td></tr><tr><td><code>splitChannels</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦åˆ†ç¦»å£°é“å¤„ç†</td></tr><tr><td><code>mediaContainer</code></td><td>HTMLElement</td><td>null</td><td>è‡ªå®šä¹‰åª’ä½“å®¹å™¨</td></tr><tr><td><code>mediaElement</code></td><td>HTMLMediaElement</td><td>null</td><td>è‡ªå®šä¹‰åª’ä½“å…ƒç´ </td></tr><tr><td><code>closeAudioContext</code></td><td>Boolean</td><td>false</td><td>é”€æ¯æ—¶æ˜¯å¦å…³é—­AudioContext</td></tr></tbody></table>
<h3 data-id="heading-8">XHRé…ç½®å‚æ•°</h3>















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>xhr.cache</code></td><td>String</td><td>'default'</td><td>ç¼“å­˜ç­–ç•¥</td></tr><tr><td><code>xhr.mode</code></td><td>String</td><td>'cors'</td><td>è·¨åŸŸæ¨¡å¼</td></tr><tr><td><code>xhr.credentials</code></td><td>String</td><td>'same-origin'</td><td>å‡­è¯è®¾ç½®</td></tr><tr><td><code>xhr.referrer</code></td><td>String</td><td>'client'</td><td>å¼•ç”¨æ¥æº</td></tr><tr><td><code>xhr.timeout</code></td><td>Number</td><td>0</td><td>è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td><code>xhr.headers</code></td><td>Object</td><td>{}</td><td>è¯·æ±‚å¤´</td></tr></tbody></table>
<h3 data-id="heading-9">åˆ†ç¦»å£°é“é…ç½®å‚æ•°</h3>



































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>splitChannelsOptions.overlay</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å åŠ æ˜¾ç¤º</td></tr><tr><td><code>splitChannelsOptions.channelColors</code></td><td>Object</td><td>{}</td><td>å„å£°é“é¢œè‰²é…ç½®</td></tr><tr><td><code>splitChannelsOptions.filterChannels</code></td><td>Array</td><td>[]</td><td>è¿‡æ»¤æ˜¾ç¤ºçš„å£°é“</td></tr><tr><td><code>splitChannelsOptions.relativeNormalization</code></td><td>Boolean</td><td>false</td><td>ç›¸å¯¹å½’ä¸€åŒ–</td></tr></tbody></table>
<h2 data-id="heading-10">ä¸‰ã€åˆ†ç¦»å£°é“é¢œè‰²é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">splitChannelsOptions</span>: {
  <span class="hljs-attr">overlay</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">channelColors</span>: {
    <span class="hljs-number">0</span>: { <span class="hljs-comment">// å·¦å£°é“</span>
      <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'rgba(255, 0, 0, 0.5)'</span>,
      <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'rgba(255, 100, 100, 0.8)'</span>
    },
    <span class="hljs-number">1</span>: { <span class="hljs-comment">// å³å£°é“</span>
      <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'rgba(0, 0, 255, 0.5)'</span>,
      <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'rgba(100, 100, 255, 0.8)'</span>
    }
  },
  <span class="hljs-attr">filterChannels</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>],
  <span class="hljs-attr">relativeNormalization</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h2 data-id="heading-11">å››ã€XHRé…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">xhr</span>: {
  <span class="hljs-attr">cache</span>: <span class="hljs-string">'default'</span>,
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
  <span class="hljs-attr">credentials</span>: <span class="hljs-string">'same-origin'</span>,
  <span class="hljs-attr">referrer</span>: <span class="hljs-string">'client'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">30000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Authorization'</span>: <span class="hljs-string">'Bearer token'</span>,
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'audio/mpeg'</span>
  }
}
</code></pre>
<h2 data-id="heading-12">äº”ã€åˆ†æå™¨é…ç½®å‚æ•°</h2>



































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>analyserOptions.fftSize</code></td><td>Number</td><td>2048</td><td>FFTå¤§å°</td></tr><tr><td><code>analyserOptions.smoothingTimeConstant</code></td><td>Number</td><td>0.8</td><td>å¹³æ»‘æ—¶é—´å¸¸æ•°</td></tr><tr><td><code>analyserOptions.minDecibels</code></td><td>Number</td><td>-100</td><td>æœ€å°åˆ†è´å€¼</td></tr><tr><td><code>analyserOptions.maxDecibels</code></td><td>Number</td><td>-30</td><td>æœ€å¤§åˆ†è´å€¼</td></tr></tbody></table>
<h2 data-id="heading-13">å…­ã€Canvasä¸Šä¸‹æ–‡å±æ€§</h2>























<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>drawingContextAttributes.alpha</code></td><td>Boolean</td><td>true</td><td>æ˜¯å¦å¯ç”¨é€æ˜åº¦</td></tr><tr><td><code>drawingContextAttributes.desynchronized</code></td><td>Boolean</td><td>false</td><td>æ˜¯å¦å¯ç”¨å¼‚æ­¥æ¸²æŸ“</td></tr></tbody></table>
<h2 data-id="heading-14">ä¸ƒã€å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®Œæ•´çš„WaveSurferé…ç½®ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> wavesurfer = <span class="hljs-title class_">WaveSurfer</span>.<span class="hljs-title function_">create</span>({
  <span class="hljs-comment">// åŸºç¡€é…ç½®</span>
  <span class="hljs-attr">container</span>: <span class="hljs-string">'#waveform'</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,
  <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">responsive</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pixelRatio</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>,
  <span class="hljs-attr">fillParent</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">scrollParent</span>: <span class="hljs-literal">false</span>,
  
  <span class="hljs-comment">// æ³¢å½¢æ ·å¼</span>
  <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'#4A90E2'</span>,
  <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'#2D5BA3'</span>,
  <span class="hljs-attr">cursorColor</span>: <span class="hljs-string">'#1A3D7C'</span>,
  <span class="hljs-attr">cursorWidth</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">barWidth</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">barHeight</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">barRadius</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">barGap</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#F5F7FA'</span>,
  <span class="hljs-attr">normalize</span>: <span class="hljs-literal">true</span>,
  
  <span class="hljs-comment">// äº¤äº’é…ç½®</span>
  <span class="hljs-attr">interact</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">dragToSeek</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">autoScroll</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">autoCenter</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">hideCursor</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">skipLength</span>: <span class="hljs-number">5</span>,
  
  <span class="hljs-comment">// éŸ³é¢‘å¤„ç†</span>
  <span class="hljs-attr">backend</span>: <span class="hljs-string">'WebAudio'</span>,
  <span class="hljs-attr">audioRate</span>: <span class="hljs-number">1.0</span>,
  <span class="hljs-attr">volume</span>: <span class="hljs-number">0.8</span>,
  <span class="hljs-attr">loopSelection</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">44100</span>,
  
  <span class="hljs-comment">// éŸ³é¢‘åŠ è½½</span>
  <span class="hljs-attr">xhr</span>: {
    <span class="hljs-attr">cache</span>: <span class="hljs-string">'default'</span>,
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'cors'</span>,
    <span class="hljs-attr">credentials</span>: <span class="hljs-string">'same-origin'</span>,
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">30000</span>
  },
  
  <span class="hljs-comment">// æ€§èƒ½ä¼˜åŒ–</span>
  <span class="hljs-attr">partialRender</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">closeAudioContext</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">removeMediaElementOnDestroy</span>: <span class="hljs-literal">true</span>,
  
  <span class="hljs-comment">// åˆ†æå™¨é…ç½®</span>
  <span class="hljs-attr">analyserOptions</span>: {
    <span class="hljs-attr">fftSize</span>: <span class="hljs-number">2048</span>,
    <span class="hljs-attr">smoothingTimeConstant</span>: <span class="hljs-number">0.8</span>,
    <span class="hljs-attr">minDecibels</span>: -<span class="hljs-number">100</span>,
    <span class="hljs-attr">maxDecibels</span>: -<span class="hljs-number">30</span>
  },
  
  <span class="hljs-comment">// Canvasé…ç½®</span>
  <span class="hljs-attr">drawingContextAttributes</span>: {
    <span class="hljs-attr">alpha</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">desynchronized</span>: <span class="hljs-literal">false</span>
  }
});
</code></pre>
<h2 data-id="heading-15">å…«ã€ä¸åŒåœºæ™¯æ¨èé…ç½®</h2>
<h3 data-id="heading-16">éŸ³ä¹æ’­æ”¾å™¨é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">height</span>: <span class="hljs-number">150</span>,
  <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'#c1d8ff'</span>,
  <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'#4a7dff'</span>,
  <span class="hljs-attr">cursorColor</span>: <span class="hljs-string">'#1e3a8a'</span>,
  <span class="hljs-attr">barWidth</span>: <span class="hljs-number">3</span>,
  <span class="hljs-attr">barGap</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">barRadius</span>: <span class="hljs-number">4</span>,
  <span class="hljs-attr">normalize</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">audioRate</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">volume</span>: <span class="hljs-number">0.8</span>,
  <span class="hljs-attr">responsive</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h3 data-id="heading-17">è¯­éŸ³åˆ†æé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">height</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">waveColor</span>: <span class="hljs-string">'#f0f0f0'</span>,
  <span class="hljs-attr">progressColor</span>: <span class="hljs-string">'#4CAF50'</span>,
  <span class="hljs-attr">cursorColor</span>: <span class="hljs-string">'#333'</span>,
  <span class="hljs-attr">barWidth</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">barGap</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">normalize</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">minPxPerSec</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attr">splitChannels</span>: <span class="hljs-literal">true</span>
}
</code></pre>
<h3 data-id="heading-18">å¤§æ–‡ä»¶ä¼˜åŒ–é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript">{
  <span class="hljs-attr">partialRender</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pixelRatio</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">barWidth</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">minPxPerSec</span>: <span class="hljs-number">20</span>,
  <span class="hljs-attr">forceDecode</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">xhr</span>: {
    <span class="hljs-attr">cache</span>: <span class="hljs-string">'force-cache'</span>
  }
}
</code></pre>
<h2 data-id="heading-19">ä¹ã€æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>å¿…å¡«å‚æ•°</strong>ï¼š<code>container</code> æ˜¯å”¯ä¸€å¿…é¡»æä¾›çš„å‚æ•°</li>
<li><strong>åç«¯é€‰æ‹©</strong>ï¼š<code>backend</code> é»˜è®¤ä¸º 'WebAudio'ï¼Œæ”¯æŒæ›´å¤šåŠŸèƒ½</li>
<li><strong>å“åº”å¼</strong>ï¼š<code>responsive</code> å’Œ <code>fillParent</code> é€šå¸¸ä¸€èµ·ä½¿ç”¨</li>
<li><strong>æ€§èƒ½</strong>ï¼šå¤§æ–‡ä»¶å»ºè®®å¯ç”¨ <code>partialRender</code></li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šç¡®ä¿æµè§ˆå™¨æ”¯æŒ Web Audio API</li>
<li><strong>ç§»åŠ¨ç«¯</strong>ï¼šåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šé€‚å½“é™ä½ <code>pixelRatio</code> ä»¥æå‡æ€§èƒ½</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Doris åœ¨å°ç±³ç»Ÿä¸€ OLAP å’Œæ¹–ä»“ä¸€ä½“çš„å®è·µ]]></title>    <link>https://juejin.cn/post/7578902814022746127</link>    <guid>https://juejin.cn/post/7578902814022746127</guid>    <pubDate>2025-12-02T07:47:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578902814022746127" data-draft-id="7578892205290192936" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Doris åœ¨å°ç±³ç»Ÿä¸€ OLAP å’Œæ¹–ä»“ä¸€ä½“çš„å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“,ç¨‹åºå‘˜,è¿ç»´"/> <meta itemprop="datePublished" content="2025-12-02T07:47:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Doris åœ¨å°ç±³ç»Ÿä¸€ OLAP å’Œæ¹–ä»“ä¸€ä½“çš„å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T07:47:43.000Z" title="Tue Dec 02 2025 07:47:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å°ç±³æ—©åœ¨ 2019 å¹´ä¾¿å¼•å…¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org" target="_blank" title="https://doris.apache.org" ref="nofollow noopener noreferrer">Apache Doris</a> ä½œä¸º OLAP åˆ†æå‹æ•°æ®åº“ä¹‹ä¸€ï¼Œç»è¿‡äº”å¹´çš„æŠ€æœ¯æ²‰æ·€ï¼Œå·²å½¢æˆ<strong>ä»¥ Doris ä¸ºæ ¸å¿ƒçš„åˆ†æä½“ç³»</strong>ï¼Œå¹¶åŸºäº 2.1 ç‰ˆæœ¬å¼‚æ­¥ç‰©åŒ–è§†å›¾ã€3.0 ç‰ˆæœ¬æ¹–ä»“ä¸€ä½“ä¸å­˜ç®—åˆ†ç¦»ç­‰æ ¸å¿ƒèƒ½åŠ›ä¼˜åŒ–æ•°æ®æ¶æ„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å°ç±³æ•°æ®ä¸­å°åŸºäº Apache Doris 3.0 çš„æŸ¥è¯¢é“¾è·¯ä¼˜åŒ–ã€æ€§èƒ½æå‡ã€èµ„æºç®¡ç†ã€è‡ªåŠ¨åŒ–è¿ç»´ã€å¯è§‚æµ‹ç­‰ä¸€ç³»åˆ—åº”ç”¨å®è·µã€‚</p>
</blockquote>
<p>å°ç±³é›†å›¢æˆç«‹äº 2010 å¹´ï¼Œæ˜¯ä¸€å®¶ä»¥æ™ºèƒ½æ‰‹æœºã€æ™ºèƒ½ç¡¬ä»¶å’Œ IoT å¹³å°ä¸ºæ ¸å¿ƒçš„å…¨çƒé¢†å…ˆç§‘æŠ€ä¼ä¸šï¼Œä¸šåŠ¡éåŠå…¨çƒ 100 å¤šä¸ªå›½å®¶å’Œåœ°åŒºã€‚å°ç±³æ„å»ºäº†å…¨çƒæœ€å¤§çš„æ¶ˆè´¹ç±» IoT ç‰©è”ç½‘å¹³å°ï¼ŒåŒæ—¶æŒç»­æ¨è¿›â€œæ‰‹æœºÃ—AIoTâ€æˆ˜ç•¥ã€‚æ——ä¸‹äº§å“æ¶µç›–æ™ºèƒ½æ‰‹æœºã€ç”µè§†ã€ç¬”è®°æœ¬ã€å¯ç©¿æˆ´è®¾å¤‡åŠç”Ÿæ€é“¾æ™ºèƒ½äº§å“ï¼Œå¹¶æŠ•èµ„å­µåŒ–ä¼—å¤šæ™ºèƒ½ç§‘æŠ€ä¼ä¸šã€‚</p>
<p>Apache Doris åœ¨å°ç±³å†…éƒ¨åº”ç”¨å¹¿æ³›ï¼Œä¸šåŠ¡æ¶µç›–æ±½è½¦ã€æ‰‹æœºé¢†åŸŸï¼ˆåŒ…æ‹¬æ‰‹æœºç³»ç»Ÿåº”ç”¨ä¸ç¡¬ä»¶åˆ¶é€ ï¼‰ã€äº’è”ç½‘ã€çº¿ä¸Šçº¿ä¸‹é”€å”®ä¸æœåŠ¡ã€åº•å±‚å¹³å°ä»¥åŠæ–°ä¸šåŠ¡ç­‰å¤šä¸ªé¢†åŸŸï¼Œæ”¯æ’‘ç€å¤šæ ·åŒ–çš„æ•°æ®åˆ†æéœ€æ±‚ã€‚<strong>ç›®å‰ï¼ŒDoris é›†ç¾¤æ•°é‡è¶…è¿‡ 40 ä¸ªï¼Œç®¡ç†æ•°æ®è§„æ¨¡æ•° PBï¼Œæ—¥å‡æŸ¥è¯¢é‡è¾¾åˆ° 5000 ä¸‡æ¬¡ï¼Œèµ„æºè§„æ¨¡åœ¨è¿‘ä¸€å¹´å†…å¢é•¿çº¦ 80%ï¼Œå±•ç°å‡ºå¿«é€Ÿå‘å±•çš„æ€åŠ¿ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a990b92db31493d8a9a4760b81a8f9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=fGGavKpw4yYj9XSeL7xMM6wTM0E%3D" alt="Doris å¯¹å°ç±³ä¸šåŠ¡çº¿çš„æ”¯æŒ.PNG" loading="lazy"/></p>
<h2 data-id="heading-0">å°ç±³æ•°æ®ä¸­å° OLAP å‘å±•ä¸æŒ‘æˆ˜</h2>
<h3 data-id="heading-1">01 æ¶æ„æ¼”å˜å†ç¨‹</h3>
<p>æ—©æœŸå°ç±³æŠ€æœ¯æ ˆå¤æ‚å¤šæ ·ï¼Œæ•°æ®æ¹–ä½“ç³»ä¸ OLAP å¼•æ“ä¼—å¤šã€‚è‡ª 2019 å¹´åœ¨å°ç±³å†…éƒ¨æŠ•å…¥åº”ç”¨ä»¥æ¥ï¼ŒApache Doris é€æ¸ä»ä¸­è„±é¢–è€Œå‡ºï¼Œå‘å±•æˆä¸ºå°ç±³æ•°æ®æ¶æ„çš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p><strong>ä¸€æ–¹é¢ï¼ŒApache Doris æ•´åˆäº†å†…éƒ¨å¤æ‚çš„ OLAP åˆ†æä½“ç³»ï¼Œç»Ÿä¸€æ‰¿è½½èµ·åŸæœ¬ç”±å¤šç³»ç»Ÿåˆ†æ•£æä¾›çš„æŸ¥è¯¢èƒ½åŠ›ï¼›å¦ä¸€æ–¹é¢ï¼ŒDoris å‡­å€Ÿå‡ºè‰²çš„æŸ¥è¯¢æ€§èƒ½ä¸è‰¯å¥½çš„ç”Ÿæ€å…¼å®¹ï¼Œé…åˆ Trinoã€Sparkã€Icebergã€Paimon ç­‰å®Œæˆäº†ä»å¤–ä»“åˆ°æ¹–ä»“ä¸€ä½“æ¶æ„çš„å…³é”®å‡çº§ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fc47f90cc4c40daacd0149ce3bb85df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=cjNJkOXO6pzqsyilkaULeoF1nzk%3D" alt="æ¶æ„æ¼”å˜å†ç¨‹.png" loading="lazy"/></p>
<p>2022 å¹´èµ·ï¼ŒDoris åœ¨å°ç±³å†…éƒ¨å·²å½¢æˆäº†è¾ƒä¸ºæˆç†Ÿçš„åº”ç”¨ä½“ç³»ï¼šä¾æ‰˜å†…éƒ¨å‘å¸ƒå¹³å°ï¼Œåœ¨ç‰©ç†æœºä¸Šå®ç°é›†ç¾¤çš„è‡ªåŠ¨åŒ–éƒ¨ç½²ä¸è¿ç»´ï¼›åŒæ—¶æ¥å…¥å†…éƒ¨ç›‘æ§ä½“ç³»ï¼Œå…¨é¢ä¿éšœ Doris é›†ç¾¤çš„å¯è§‚æµ‹æ€§ä¸ç¨³å®šæ€§ã€‚</p>
<p>2025 å¹´ï¼Œæˆ‘ä»¬æ­£å¼å¼•å…¥äº†æ¹–ä»“ä¸€ä½“ä¸å­˜ç®—åˆ†ç¦»èƒ½åŠ›æˆç†Ÿçš„ Doris 3.0 ç¨³å®šç‰ˆæœ¬ï¼Œä¸ 2.1 ç‰ˆæœ¬å¹¶è¡Œè¿è¡Œï¼Œå¹¶é’ˆå¯¹ Doris 3.0 åœ¨ç®¡ç†å±‚é¢è¿›è¡Œäº†é‡å¤§è°ƒæ•´ï¼šå¼•å…¥é›†ç¾¤ç¼–æ’ç³»ç»Ÿï¼Œå¹¶åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.selectdb.com%2Fenterprise%2Fmanagement-guide%2Fwhat-is-doris-manager" target="_blank" title="https://docs.selectdb.com/enterprise/management-guide/what-is-doris-manager" ref="nofollow noopener noreferrer">Doris Manager </a>è‡ªä¸»å¼€å‘äº†é›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œæä¾›æ›´å…¨é¢ã€æ ‡å‡†åŒ–çš„è¿ç»´ä¸å¯è§‚æµ‹æ€§æ–¹æ¡ˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4bc7f166a58415b897ec47a7af2c988~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=ObcXkGLTgt6l8RsTu1Iiy6BRauE%3D" alt="æ¶æ„æ¼”å˜å†ç¨‹-1.PNG" loading="lazy"/></p>
<h3 data-id="heading-2">02 å¤–ä»“é¢ä¸´çš„æŒ‘æˆ˜</h3>
<p>å°ç±³æ—©æœŸ OLAP ä½“ç³»ä¸­ï¼Œç¦»çº¿æ•°ä»“è§†ä¸ºâ€œå†…ä»“â€ï¼Œè€Œ  OLAP æœåŠ¡åˆ™å½’ä¸ºâ€œå¤–ä»“â€ï¼Œå†…å¤–ä»“çš„æ•°æ®æµåŠ¨ä¾èµ– Flink æˆ– Spark ç­‰æ•°æ®é›†æˆå·¥å…·ã€‚å›¢é˜Ÿä¸»è¦è´Ÿè´£ Doris é›†ç¾¤çš„éƒ¨ç½²ä¸æ—¥å¸¸è¿ç»´ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†è¯¸å¤šæ¥è‡ªç”¨æˆ·å’Œè‡ªèº«çš„ç—›ç‚¹é—®é¢˜ï¼Œä¸‹é¢å°†ç»“åˆä¸šåŠ¡åœºæ™¯ä»‹ç»ã€‚</p>
<h4 data-id="heading-3">è·¨ç³»ç»Ÿæ•°æ®é›†æˆ</h4>
<p>æ•°æ®é€šè¿‡ Flink æˆ– Spark ä»ç¦»çº¿çš„å†…ä»“æŠ½å–è‡³ Dorisï¼Œå½¢æˆè·¨ç³»ç»Ÿæ•°æ®æµåŠ¨ã€‚è¿™ç§æ¨¡å¼å¸¦æ¥ä¸€ç³»åˆ—æŒ‘æˆ˜ï¼š</p>
<ul>
<li>æ•°æ®å†—ä½™ï¼šåŒä¸€ä»½æ•°æ®åœ¨å¤šä¸ªç³»ç»Ÿä¸­å­˜å‚¨ï¼Œå¢åŠ æˆæœ¬ï¼›</li>
<li>å£å¾„ä¸ä¸€è‡´ï¼šä¸åŒç³»ç»Ÿå¤„ç†é€»è¾‘å·®å¼‚å¯¼è‡´ç»“æœåå·®ï¼›</li>
<li>æ’æŸ¥å›°éš¾ï¼šå½“ BI çœ‹æ¿æ•°æ®å‡ºç°å·®å¼‚æ—¶ï¼Œéœ€è·¨å¤šä¸ªç³»ç»Ÿå®šä½é—®é¢˜ï¼›</li>
<li>å¼€å‘è´Ÿæ‹…é‡ï¼šä¸šåŠ¡æ–¹éœ€è‡ªè¡Œç»´æŠ¤ ETL é“¾è·¯å’Œå¤šå¥—æŸ¥è¯¢æ¥å£ã€‚</li>
</ul>
<p>ä»¥å¹¿å‘Šä¸šåŠ¡ä¸ºä¾‹ï¼Œå…¶æ•°æ®é“¾è·¯æ¶‰åŠå¤šä¸ªå­˜å‚¨ç³»ç»Ÿï¼ˆå¦‚ Icebergã€Druidï¼‰å’ŒåŒæ­¥ä»»åŠ¡ï¼Œåˆ†æå¸ˆéœ€æ ¹æ®æŸ¥è¯¢ç²’åº¦é€‰æ‹©ä¸åŒç³»ç»Ÿï¼Œå¿ƒæ™ºè´Ÿæ‹…æ˜¾è‘—ã€‚å¯¹å¼€å‘ä¾§è€Œè¨€ï¼Œéœ€é’ˆå¯¹ä¸åŒæ•°æ®é“¾è·¯è¿›è¡Œå®šåˆ¶åŒ–å¼€å‘ï¼ŒåŒæ—¶åœ¨å¤šä¸ªç³»ç»Ÿä¸Šé‡å¤å»ºè®¾æ•°æ®çœ‹æ¿ï¼Œå¯¼è‡´å¼€å‘å·¥ä½œé‡å¤ã€å‘¨æœŸé•¿ï¼Œæ•´ä½“æŠ•å…¥æˆæœ¬è¾ƒé«˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3f63d2568f64516b9afd0b6e6308f27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=eUed9SaD5RWLUT59V35VFs94g1A%3D" alt="è·¨ç³»ç»Ÿæ•°æ®é›†æˆ.PNG" loading="lazy"/></p>
<h4 data-id="heading-4">å­˜ç®—ä¸€ä½“æ¶æ„å±€é™</h4>
<p><strong>1ã€é«˜å¯ç”¨å®¹ç¾</strong></p>
<p>2023 å¹´æµ·å¤–æœºæˆ¿ç«ç¾äº‹ä»¶æš´éœ²äº†å­˜ç®—ä¸€ä½“æ¶æ„çš„è„†å¼±æ€§ï¼Œè™½ç„¶æ•°æ®æœ€ç»ˆæ¢å¤ï¼Œä½†ä¹Ÿä¿ƒä½¿å›¢é˜Ÿé‡æ–°å®¡è§†æ•°æ®é«˜å¯ç”¨ç­–ç•¥ã€‚é’ˆå¯¹ Doris 2.x çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼Œå›¢é˜Ÿæ›¾è¯„ä¼°ä¸¤ç§è·¯å¾„ï¼š</p>
<ul>
<li>ä¸»ä»å¤åˆ¶ï¼ˆCCRï¼‰ï¼šä¾èµ–è¾ƒæ–°ç‰ˆæœ¬æ”¯æŒï¼Œç¼ºä¹ç”Ÿäº§éªŒè¯ï¼Œä¸»å¤‡åˆ‡æ¢å¤æ‚ï¼Œå®¢æˆ·ç«¯éœ€åŒè¿ï¼Œæ¢å¤æ—¶é—´é•¿ï¼›</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4049824ee04f4d6c9e240a16d0e8c746~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=BnnUGOBfQ1xox%2BGVL9cgKnz4ffk%3D" alt="é«˜å¯ç”¨å®¹ç¾.PNG" loading="lazy"/></p>
<ul>
<li>è·¨å¯ç”¨åŒºå‰¯æœ¬åˆ†å¸ƒï¼šé€šè¿‡ Resource Group å°†å‰¯æœ¬åˆ†æ•£è‡³ä¸åŒæœºæˆ¿ï¼Œè™½å¯é¿å…å•ç‚¹æ•…éšœï¼Œä½†è·¨æœºæˆ¿è¯»å†™å¸¦æ¥æ€§èƒ½æŸè€—ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e3387f7b5947f49e4a3c72d8b132f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=H5sgo%2BdEFoXYsqd5nl4Wp0Qfpq8%3D" alt="é«˜å¯ç”¨å®¹ç¾-1.png" loading="lazy"/></p>
<p>æœ€ç»ˆé‡‡ç”¨åè€…ä½œä¸ºä¸´æ—¶æ–¹æ¡ˆï¼Œä½†ä»æœªæ ¹æœ¬è§£å†³æˆæœ¬ä¸å¯ç”¨æ€§ä¹‹é—´çš„çŸ›ç›¾ã€‚</p>
<p><strong>2ã€èµ„æºåˆ©ç”¨ç‡ä½</strong></p>
<p>ç‰©ç†æœºéƒ¨ç½²æ¨¡å¼ä¸‹ï¼Œæ„å»ºä¸€ä¸ªé«˜å¯ç”¨ Doris é›†ç¾¤éœ€è¦ 3 FE + 3 BEï¼Œå¯¹äºä¸­å°è§„æ¨¡ä¸šåŠ¡è€Œè¨€ï¼Œæ­¤é…ç½®è¿œè¶…å®é™…éœ€æ±‚ï¼Œå¯¼è‡´èµ„æºæµªè´¹ä¸¥é‡ã€‚è‹¥ä¸ºæ¯ä¸ªå°ä¸šåŠ¡ç‹¬ç«‹å»ºé›†ç¾¤ï¼Œå°†å¯¼è‡´é›†ç¾¤æ•°é‡æ¿€å¢ï¼Œè¿ç»´å‹åŠ›å‰§å¢ï¼›è‹¥é‡‡ç”¨å…±äº«é›†ç¾¤ï¼Œåˆ™é¢ä¸´èµ„æºäº‰æŠ¢ã€éš”ç¦»å›°éš¾ã€è®¡è´¹æ¨¡ç³Šç­‰é—®é¢˜ã€‚</p>
<p>ç›´åˆ° Apache Doris 3.0 å‘å¸ƒåå¼•å…¥å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬ï¼Œé«˜å¯ç”¨å®¹ç¾ä¸èµ„æºå¼¹æ€§é—®é¢˜å¾—åˆ°è§£å†³ï¼Œä¸‹ä¸ªç« èŠ‚å°†è¯¦ç»†å±•å¼€ä»‹ç»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/358325b51c4f45cf86073cbdab56206b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=kw2b5GVG7%2FzPnOF%2FTn%2FMusK9PkU%3D" alt="èµ„æºåˆ©ç”¨ç‡ä½.png" loading="lazy"/></p>
<h4 data-id="heading-5">é›†ç¾¤è¿ç»´æ•ˆç‡ä½</h4>
<p>åŸæœ‰åŸºäºç‰©ç†æœºçš„æ‰‹åŠ¨éƒ¨ç½²æµç¨‹ï¼Œä»ç”³è¯·èµ„æºåˆ°é›†ç¾¤ä¸Šçº¿é€šå¸¸è€—æ—¶ä¸€å‘¨ä»¥ä¸Šã€‚é¢å¯¹å¿«é€Ÿå¢é•¿çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè¯¥æ¨¡å¼å·²æ— æ³•æ»¡è¶³æ•æ·äº¤ä»˜è¦æ±‚ã€‚</p>
<h2 data-id="heading-6">Apache Doris 3.0 åº”ç”¨å®è·µä¸çªç ´</h2>
<p>åŸºäºä¸Šè¿°æŒ‘æˆ˜ï¼ŒDoris 2.0 åŠæ—©æœŸç‰ˆæœ¬åœ¨æ¹–ä»“ä¸€ä½“ã€å­˜ç®—åˆ†ç¦»ã€é›†ç¾¤è‡ªåŠ¨åŒ–è¿ç»´ç­‰æ–¹é¢ä»æœ‰ä¸è¶³ï¼Œè€Œ 3.0 å­˜ç®—åˆ†ç¦»ç‰ˆæœ¬å¸¦æ¥äº†è¯¸å¤šå‡çº§ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„éªŒè¯ï¼Œå›¢é˜Ÿè§„åˆ’å‡º 3.0 ç‰ˆæœ¬ä¸æ—©æœŸç‰ˆæœ¬å¹¶è¡Œçš„å‡çº§æ¶æ„ï¼Œå¹¶åœ¨ 3.0 ç‰ˆæœ¬çš„åŸºç¡€ä¸Šå¯¹æ¶æ„è®¾è®¡ä¸ä½¿ç”¨æ¨¡å¼è¿›è¡Œäº†æ˜¾è‘—ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-7">01 Doris 3.0 æ ¸å¿ƒä¼˜åŠ¿</h3>
<p>é¦–å…ˆæ˜¯ 3.0 å­˜ç®—åˆ†ç¦»çš„éƒ¨ç½²æ¨¡å¼ï¼Œå…¶ä¸»è¦ä¾èµ–è®¡ç®—ç»„è¿›è¡Œèµ„æºéš”ç¦»é€šè¿‡å°†è®¡ç®—å±‚ä¸å­˜å‚¨å±‚è§£è€¦ï¼ŒBE èŠ‚ç‚¹å®ç°æ— çŠ¶æ€åŒ–ï¼Œä¾æ‰˜åº•å±‚ Kubernetes æ”¯æŒï¼Œå¯ä»¥å®ç°å¿«é€Ÿå¼¹æ€§ä¼¸ç¼©ä»¥æ»¡è¶³ä¸åŒä½“é‡ç”¨æˆ·çš„éœ€æ±‚ã€‚</p>
<p>åŒæ—¶ï¼ŒDoris åŸç”Ÿæ”¯æŒæ¹–ä»“æŸ¥è¯¢èƒ½åŠ›ï¼Œåœ¨å­˜ç®—åˆ†ç¦»æ¨¡å¼ä¸‹ï¼Œèƒ½å¤Ÿç›´æ¥è®¿é—®å¤–éƒ¨æ•°æ®æ¹–ï¼Œæœ‰æ•ˆæ‰“é€šæ•°æ®å­¤å²›ã€‚è¿™ä¸€ç‰¹æ€§ä¸ä»…æ˜¾è‘—ç®€åŒ–äº†ä¼ ç»Ÿæ•°æ®é“¾è·¯ï¼Œä¹Ÿå‡å°‘äº†å› å¤šå±‚å¤åˆ¶å¸¦æ¥çš„æ•°æ®å†—ä½™ï¼ŒçœŸæ­£æ¨åŠ¨æ¹–ä»“ä¸€ä½“æ¶æ„çš„è½åœ°å®è·µã€‚</p>
<p>åŸºäºæ­¤ï¼Œæ•°æ®å¼€å‘å¹³å°çš„æ•´ä½“æ¶æ„å‘ç”Ÿå˜åŒ–ï¼šDoris ä¸å†å±€é™äºä¼ ç»Ÿâ€œå¤–ä»“â€çš„è§’è‰²ï¼Œè€Œæ˜¯å‘ä¸Šæ¼”è¿›ä¸ºç»Ÿä¸€çš„æŸ¥è¯¢å¼•æ“å±‚ï¼Œä¸åº•å±‚ Icebergã€Paimon ç­‰æ¹–ä»“æ ¼å¼è§£è€¦ï¼Œç›´æ¥è¿›è¡Œè”é‚¦æŸ¥è¯¢ï¼ŒåŒæ—¶åˆ©ç”¨è‡ªèº«çš„æ•°æ®ç¼“å­˜ã€ç‰©åŒ–è§†å›¾ç­‰èƒ½åŠ›å¯¹çƒ­ç‚¹æ•°æ®è¿›è¡ŒåŠ é€Ÿï¼Œå…¼é¡¾çµæ´»æ€§ä¸é«˜æ€§èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1809d114405b4a559bdd5cf85c68c722~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=XNYNxEwumQGq5%2BajpPBA8SDdueY%3D" alt="Doris 3.0 æ ¸å¿ƒä¼˜åŠ¿.png" loading="lazy"/></p>
<h4 data-id="heading-8">Doris vs Trino æ¹–ä»“åˆ†æèƒ½åŠ›å¯¹æ¯”ï¼šå…¨é¢é¢†å…ˆ</h4>
<p>åœ¨ TPC-DS 1TB æ ‡å‡†æµ‹è¯•ä¸­ï¼ŒDoris å¯¹æ¯” Trino åœ¨æ•´ä½“æŸ¥è¯¢æ€§èƒ½ä¸Šå±•ç°å‡ºå…¨é¢é¢†å…ˆçš„ä¼˜åŠ¿ã€‚æ— è®ºæ˜¯å¤æ‚å¤šè¡¨å…³è”ã€èšåˆåˆ†æï¼Œè¿˜æ˜¯é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å“åº”æ•ˆç‡ï¼ŒDoris å‡è¡¨ç°å‡ºæ›´ä¼˜çš„æ‰§è¡Œé€Ÿåº¦å’Œèµ„æºåˆ©ç”¨ç‡ï¼Œå¹³å‡æŸ¥è¯¢è€—æ—¶æ˜æ˜¾æ›´ä½ï¼Œå°¤å…¶é€‚ç”¨äºå¯¹æŸ¥è¯¢æ€§èƒ½è¦æ±‚è¾ƒé«˜çš„å®æ—¶åˆ†æåœºæ™¯ã€‚</p>
<ul>
<li>TPC-DS 1T æµ‹è¯•ï¼šDoris å¯¹æ¯” Trino å…¨é¢é¢†å…ˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3751c34bb6574eff8a8d179cc0d02936~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=A4pGRRzLPLx7igsslQ%2BVpxGLlJo%3D" alt="Doris vs Trino æ¹–ä»“åˆ†æèƒ½åŠ›å¯¹æ¯”.png" loading="lazy"/></p>
<p>åœ¨å°ç±³å†…éƒ¨çš„æ•°æ®æŸ¥è¯¢åœºæ™¯ï¼Œæ¶µç›–å¤šè¡¨å…³è”ã€èšåˆè®¡ç®—ã€è¿‡æ»¤ä¸‹æ¨ç­‰å¸¸è§æ“ä½œçš„å®é™…ä¸šåŠ¡æŸ¥è¯¢ä¸­ï¼Œ<strong>Doris å¯¹æ¯” Trino çš„æ•°æ®æ¹–æŸ¥è¯¢æ•ˆç‡é«˜ 3ï½5 å€</strong>ã€‚</p>
<ul>
<li>å†…éƒ¨æ•°æ®æŸ¥è¯¢åœºæ™¯ï¼šDoris å¯¹æ¯” Trino æ•°æ®æ¹–æŸ¥è¯¢æ•ˆç‡é«˜ 3ï½5 å€</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63eba0d9dce8405aa8c805490cc80f1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=%2BalB6InW%2F63FF%2B03Meplnt0WPL4%3D" alt="Doris vs Trino æ¹–ä»“åˆ†æèƒ½åŠ›å¯¹æ¯”-1.png" loading="lazy"/></p>
<h3 data-id="heading-9">02 ç»Ÿä¸€æŸ¥è¯¢ç½‘å…³</h3>
<ul>
<li><strong>ç»Ÿä¸€è®¤è¯é‰´æƒ</strong>ï¼šåœ¨è¿æ¥å±‚ï¼Œå°†ä¸åŒå¼•æ“çš„æƒé™å’Œè®¤è¯ä½“ç³»ç»Ÿä¸€æå‡åˆ°ç½‘å…³å±‚ï¼Œç”¨æˆ·é€šè¿‡ç½‘å…³ç»Ÿä¸€æŸ¥è¯¢ï¼Œæ— éœ€æ‹…å¿ƒå¼•æ“æƒé™é—®é¢˜ã€‚</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F209" target="_blank" title="https://www.selectdb.com/blog/209" ref="nofollow noopener noreferrer">SQL æ”¹å†™</a></strong>ï¼šåˆ©ç”¨ Doris çš„ SQL æ”¹å†™èƒ½åŠ›ï¼Œå°†å…¶æå‡åˆ°ç½‘å…³å±‚ï¼Œå¸®åŠ©ç”¨æˆ·åœ¨ä¸åŒå¼•æ“é—´å¹³æ»‘åˆ‡æ¢ï¼Œé¿å…å›  SQL è¯­å¥ä¸å…¼å®¹å¯¼è‡´å‡ºé”™ã€‚</li>
<li><strong>è¿æ¥åè®®ä¼˜åŒ–</strong>ï¼šé‡‡ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F220" target="_blank" title="https://www.selectdb.com/blog/220" ref="nofollow noopener noreferrer">Arrow Flight SQL </a>ä¼ è¾“åè®®å’Œ ADBC è¿æ¥æ–¹å¼ï¼Œä¼ è¾“æ•ˆç‡è¾ƒ JDBC é«˜ 10 å€ä»¥ä¸Šï¼ŒçœŸå®ä¸šåŠ¡åœºæ™¯æŸ¥è¯¢è€—æ—¶å‡å°‘ 36%ï¼ŒKyuubi å®ä¾‹å†…å­˜ç”¨é‡å‡å°‘ 50%ï¼Œä»£ç†å±‚æœåŠ¡çš„ç®¡ç†æ•ˆç‡æ˜¾è‘—æå‡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea706dad05684a998408ca2d129318bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=j7Tc3BORx%2BAE2RydZQ5R5MPQy0M%3D" alt="ç»Ÿä¸€æŸ¥è¯¢ç½‘å…³.png" loading="lazy"/></p>
<h3 data-id="heading-10">03 æ•°æ®é“¾è·¯ï¼šç‰©åŒ–è§†å›¾ä¸Šå·ä»£æ›¿å¯¼å…¥ä»»åŠ¡</h3>
<p>ä»¥å¹¿å‘Šä¸šåŠ¡åœºæ™¯ä¸ºä¾‹ï¼Œé¢å¯¹åˆ†é’Ÿçº§æ˜ç»†æ•°æ®èšåˆæŸ¥è¯¢è¾ƒæ…¢çš„é—®é¢˜ï¼Œå¸¸è§æ–¹æ¡ˆæ˜¯å°†åŸå§‹æ˜ç»†æ•°æ®èšåˆæˆå°æ—¶çº§æ•°æ®ï¼Œå®šæœŸå¯¼å…¥ Doris ä»¥æå‡æŸ¥è¯¢æ€§èƒ½ã€‚è¿™ä¸€è¿‡ç¨‹éœ€å¼€å‘å’Œç»´æŠ¤å¤æ‚çš„è°ƒåº¦ä»»åŠ¡ï¼Œè¿ç»´æˆæœ¬è¾ƒé«˜ã€‚</p>
<p>è‡ª Doris 2.1 ç‰ˆæœ¬å¼•å…¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1204" target="_blank" title="https://www.selectdb.com/blog/1204" ref="nofollow noopener noreferrer">å¼‚æ­¥ç‰©åŒ–è§†å›¾</a>èƒ½åŠ›åï¼Œåªéœ€åœ¨ Doris ä¸­å£°æ˜ç‰©åŒ–è§†å›¾å®šä¹‰ï¼Œç³»ç»Ÿå³å¯è‡ªåŠ¨å®Œæˆä»å¤–éƒ¨æ•°æ®æ¹–ï¼ˆå¦‚ Icebergï¼‰å¢é‡åŒæ­¥ã€æ•°æ®èšåˆã€æ›´æ–°è°ƒåº¦ç­‰å…¨è¿‡ç¨‹ï¼Œæ— éœ€é¢å¤–å¼€å‘ ETL é“¾è·¯ï¼Œä¹Ÿæ— éœ€å…³æ³¨åº•å±‚æ‰§è¡Œç»†èŠ‚ï¼Œæ˜¾è‘—é™ä½äº†å¼€å‘ä¸è¿ç»´è´Ÿæ‹…ã€‚åŒæ—¶ï¼ŒDoris æ”¯æŒç‰©åŒ–è§†å›¾æ”¹å†™èƒ½åŠ›ï¼Œç”¨æˆ·ä»å¯ä½¿ç”¨åŸæœ‰ SQL æŸ¥è¯¢åŸå§‹è¡¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å°†å…¶é€æ˜æ”¹å†™ä¸ºå¯¹åº”çš„ç‰©åŒ–è§†å›¾ï¼Œå®ç°æŸ¥è¯¢åŠ é€Ÿã€‚ç›®å‰è¯¥åŠŸèƒ½åŸºäºå¢é‡æ–¹å¼å®ç°ï¼Œä¸»è¦æ”¯æŒä»…è¿½åŠ åœºæ™¯ï¼Œæ›´æ–°åœºæ™¯ä»å¤„äºç ”å‘çŠ¶æ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cddfb14903844329c27bb5136e77ed6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=cQbNMHJWgNCbDyeZTZ6gwYB80CU%3D" alt="æ•°æ®é“¾è·¯ï¼šç‰©åŒ–è§†å›¾ä¸Šå·ä»£æ›¿å¯¼å…¥ä»»åŠ¡.png" loading="lazy"/></p>
<p>å¼‚æ­¥ç‰©åŒ–è§†å›¾èƒ½åŠ›çš„å»ºè¡¨è¯­å¥ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> MATERIALIZED <span class="hljs-keyword">VIEW</span> mv
BUILD DEFERRED
REFRESH INCREMENTAL
<span class="hljs-keyword">ON</span> <span class="hljs-keyword">COMMIT</span>
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> (<span class="hljs-type">date</span>)
DISTRIBUTED <span class="hljs-keyword">BY</span> RANDOM BUCKETS <span class="hljs-number">4</span>
PROPERTIES (<span class="hljs-string">'replication_num'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'3'</span>) 
<span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> 
  <span class="hljs-type">date</span>, 
  k1<span class="hljs-operator">+</span><span class="hljs-number">1</span> <span class="hljs-keyword">AS</span> k2, 
  <span class="hljs-built_in">SUM</span>(a1) <span class="hljs-keyword">AS</span> a2
<span class="hljs-keyword">FROM</span>
  paimon.data.table
<span class="hljs-keyword">WHERE</span> <span class="hljs-type">date</span> <span class="hljs-operator">&gt;=</span> <span class="hljs-number">20250222</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>, <span class="hljs-number">2</span>;
</code></pre>
<h3 data-id="heading-11">04 è‡ªåŠ©åŒ–ã€ç²¾ç»†åŒ–çš„èµ„æºç®¡ç†</h3>
<p>ä¸ºäº†ä¼˜åŒ–èµ„æºç®¡ç†ä¸è¿ç»´æµç¨‹ï¼Œæˆ‘ä»¬è‡ªç ”äº†ç²¾ç»†çš„ Doris Manager é›†ç¾¤ç®¡ç†æœåŠ¡ï¼Œå°†ç”¨æˆ·çš„è¿ç»´éœ€æ±‚è½¬åŒ–ä¸ºè‡ªåŠ©æ“ä½œï¼Œä¾æ‰˜ç¤¾åŒºå¼€æºçš„ Doris Operator åœ¨ Kubernetes å¹³å°è‡ªåŠ¨å®Œæˆèµ„æºç”³è¯·ä¸é‡Šæ”¾ï¼Œå®ç°å¿«é€Ÿçš„é›†ç¾¤å˜æ›´ã€‚ç”¨æˆ·ç›´æ¥é€šè¿‡å¹³å°æäº¤èµ„æºç”³è¯·ï¼Œæ— éœ€ç­‰å¾…å¹³å°ç”³è¯·æœºå™¨ã€åˆå§‹åŒ–ã€å‘å¸ƒå’Œä¸Šçº¿ç­‰æ­¥éª¤ï¼Œä»¥é›†ç¾¤æ‰©å®¹ä¸ºä¾‹ï¼Œäº¤ä»˜å‘¨æœŸä»åŸå…ˆçš„çº¦ä¸€å‘¨å¤§å¹…ç¼©çŸ­è‡³åˆ†é’Ÿçº§ï¼Œæ˜¾è‘—æå‡äº†è¿ç»´å“åº”é€Ÿåº¦ä¸æ•ˆç‡ã€‚</p>
<p>åŒæ—¶ï¼Œé€šè¿‡ Doris Manager é›†ç¾¤è‡ªåŠ¨åŒ–æ³¨å†Œä¸å‘ç°èƒ½åŠ›ï¼Œæ–°é›†ç¾¤åˆ›å»ºçš„åŒæ—¶å‘å…ƒæ•°æ®ä¸­å¿ƒæ³¨å†Œ Catalogï¼Œå¯è‡ªåŠ¨è¢«æŸ¥è¯¢ç½‘å…³è¯†åˆ«å¹¶æ¥å…¥ç»Ÿä¸€è®¿é—®å…¥å£ï¼Œç”¨æˆ·æ— éœ€é¢å¤–é…ç½®å³å¯é€šè¿‡ç½‘å…³å‘èµ· Doris æŸ¥è¯¢ï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–äº†ä½¿ç”¨ä½“éªŒã€‚</p>
<p>æ¥å…¥ Kubernetes åï¼Œèµ„æºè°ƒåº¦æ›´åŠ ç²¾ç»†åŒ–ï¼Œæœ€å°è°ƒåº¦ç²’åº¦ä»ç‰©ç†æœºçº§åˆ«è½¬å˜ä¸ºæœºå™¨æ ¸å¿ƒã€å†…å­˜å¤§å°ã€ç£ç›˜å®¹é‡ç­‰ç»´åº¦ï¼Œèƒ½å¤Ÿæ ¹æ®ä¸åŒä¸šåŠ¡éœ€æ±‚çµæ´»è°ƒé…èµ„æºï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ï¼Œæ»¡è¶³å¤šæ ·åŒ–çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/774ad21b7dc34483b096d9c2e3df79ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=Bu0j2u3vRBbHA6I1qEa9ZSXLQ6M%3D" alt="è‡ªåŠ©åŒ–ã€ç²¾ç»†åŒ–çš„èµ„æºç®¡ç†.png" loading="lazy"/></p>
<h3 data-id="heading-12">05 æ›´å®Œå–„çš„æ•°æ®é‡‡é›†ä¸å¯è§‚æµ‹æ€§</h3>
<p>åœ¨é›†ç¾¤å¯è§‚æµ‹æ€§æ–¹é¢ï¼ŒåŸºäº Kubernetes çš„æ ‡å‡†åŒ–ç»„ä»¶ï¼Œå‚ç…§ OpenTelemetry çš„è§„èŒƒå¯¹ Doris çš„ç›‘æ§ä½“ç³»è¿›è¡Œå…¨é¢å‡çº§ã€‚é€šè¿‡ Prometheus çš„ ServiceMonitor æœºåˆ¶é‡‡é›† Doris å„ç»„ä»¶çš„æ€§èƒ½æŒ‡æ ‡ï¼Œä¸ºç”¨æˆ·æä¾›å…¨é¢ã€ç»†ç²’åº¦æ€§èƒ½ç›‘æ§æ•°æ®ã€‚</p>
<p>åœ¨æ—¥å¿—é‡‡é›†æ–¹é¢ï¼Œé‡‡ç”¨è‡ªç ”çš„ Heraï¼ˆlog tail ç»„ä»¶ï¼‰å®ç°é«˜æ•ˆé‡‡é›†ï¼ŒåŒæ—¶ï¼Œå€Ÿé‰´ç¤¾åŒºçš„æ—¥å¿—æ£€ç´¢åœºæ™¯å®è·µï¼Œå°† Doris ä½œä¸º OpenTelemetry çš„å­˜å‚¨åç«¯ï¼šDoris è‡ªèº«è¿è¡Œäº§ç”Ÿçš„æ—¥å¿—ç»é‡‡é›†åï¼Œæœ€ç»ˆå›æµå¹¶å­˜å‚¨è‡³ Doris å†…éƒ¨è¡¨ä¸­ï¼Œå½¢æˆâ€œæ—¥å¿—äº§ç”Ÿ-é‡‡é›†-å­˜å‚¨-æŸ¥è¯¢â€çš„é—­ç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f06a773c3bf46c19110e76f33873c60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=y%2Fp5pgHWZjPZAxRxHL8ToqdNPv8%3D" alt="æ›´å®Œå–„çš„æ•°æ®é‡‡é›†ä¸å¯è§‚æµ‹æ€§.png" loading="lazy"/></p>
<p>ä¸ä¹‹å‰ä»…æ”¯æŒåŸºç¡€æŒ‡æ ‡é‡‡é›†çš„ Falcon ä½“ç³»ç›¸æ¯”ï¼ŒHera æ¶æ„è¦†ç›–äº†å®¡è®¡æ—¥å¿—ã€ç›‘æ§æŒ‡æ ‡ã€è¿è¡Œæ—¥å¿—ã€Profiling ç»“æœä»¥åŠæ­£åœ¨å®Œå–„çš„åˆ†å¸ƒå¼ tracing ä¿¡æ¯ï¼Œæä¾›æ›´åŠ å…¨é¢çš„ç»¼åˆè¯Šæ–­èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc94080fcbd54ce290d24a69e06467cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765266463&amp;x-signature=muSrWk1jB64W79j7Tg1ttm%2BC3SM%3D" alt="æ›´å®Œå–„çš„æ•°æ®é‡‡é›†ä¸å¯è§‚æµ‹æ€§-1.png" loading="lazy"/></p>
<h2 data-id="heading-13">åç»­è§„åˆ’</h2>
<p>æ„Ÿè°¢ Doris ç¤¾åŒºå§‹ç»ˆä¿æŒé«˜æ•ˆçš„ç‰ˆæœ¬è¿­ä»£èŠ‚å¥ä¸ç¨³å®šæ€§æ‰“ç£¨ï¼Œåç»­æˆ‘ä»¬å°†åŸºäºä»¥ä¸‹å‡ æ–¹é¢å±•å¼€å·¥ä½œï¼š</p>
<ul>
<li><strong>å®Œæˆ Doris ç‰ˆæœ¬æ”¶æ•›å·¥ä½œ</strong>ï¼šå°†æ ¸å¿ƒåŠŸèƒ½å¹¶çº¿è‡³ 2.1 å’Œ 3.0 ç‰ˆæœ¬ï¼Œå¹¶ç»Ÿä¸€å·¥å…·é“¾ç‰ˆæœ¬ä¾èµ–ä»¥å‡å°‘ç¯å¢ƒå·®å¼‚ï¼Œæœ€ç»ˆå®ç°å¼€å‘è¿­ä»£æ•ˆç‡çš„æ˜¾è‘—æå‡ï¼Œä¸ºåç»­åŠŸèƒ½è¿­ä»£å¥ å®šé«˜æ•ˆåŸºç¡€ã€‚</li>
<li><strong>å›´ç»•æ¹–ä»“ä¸€ä½“èƒ½åŠ›è¿›è¡Œæ·±åº¦ä¼˜åŒ–</strong>ï¼šé‡ç‚¹æå‡æ¹–ä»“æ”¯æŒçš„å®Œæ•´æ€§ä¸ç¨³å®šæ€§ï¼Œæ¨åŠ¨ Doris å­˜ç®—åˆ†ç¦»æ¶æ„çš„å¤§è§„æ¨¡è½åœ°ï¼ŒåŒæ—¶å®Œå–„å¢é‡è®¡ç®—èƒ½åŠ›çš„è¦†ç›–èŒƒå›´ï¼Œä»¥æ»¡è¶³å¤æ‚åœºæ™¯ä¸‹çš„å®æ—¶æ•°æ®å¤„ç†éœ€æ±‚ã€‚</li>
<li><strong>æ‹“å±•æ–°åœºæ™¯ä¸ AI èåˆæ–¹å‘</strong>ï¼šå­µåŒ–æ—¥å¿—ã€Tracing ç­‰æ•°æ®å­˜å‚¨èƒ½åŠ›ï¼Œé€šè¿‡ AI for Doris æå‡è¿ç»´ç®¡ç†æ•ˆç‡ï¼Œå¹¶æ¢ç´¢ Doris for AI çš„åå‘èµ‹èƒ½èƒ½åŠ›ï¼Œæ„å»ºæ•°æ®å¹³å°ä¸æ™ºèƒ½æŠ€æœ¯çš„åŒå‘ååŒç”Ÿæ€ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GooglePay: API æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7579436743260274707</link>    <guid>https://juejin.cn/post/7579436743260274707</guid>    <pubDate>2025-12-03T10:19:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579436743260274707" data-draft-id="7579453456018096169" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GooglePay:  API æ–‡æ¡£"/> <meta itemprop="keywords" content="Android,Google"/> <meta itemprop="datePublished" content="2025-12-03T10:19:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Nerve"/> <meta itemprop="url" content="https://juejin.cn/user/3438928101639512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GooglePay:  API æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3438928101639512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Nerve
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:19:58.000Z" title="Wed Dec 03 2025 10:19:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">GooglePay API æ–‡æ¡£</h2>
<p>æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† GooglePay åº“çš„ API æ¥å£ã€å‚æ•°è¯´æ˜ä»¥åŠåœ¨ä¸åŒåœºæ™¯ä¸‹çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">1. åˆå§‹åŒ– (Initialization)</h3>
<p>åœ¨ <code>Application</code> çš„ <code>onCreate</code> æ–¹æ³•ä¸­åˆå§‹åŒ– <code>GooglePayClient</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> : <span class="hljs-type">Application</span>(), GooglePayService {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        <span class="hljs-comment">// åˆå§‹åŒ– GooglePayClient</span>
        GooglePayClient.getInstance()
            .initBillingClient(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>) <span class="hljs-comment">// ä¼ å…¥ Application Context å’Œ GooglePayService å®ç°</span>
            .setDebug(<span class="hljs-literal">true</span>) <span class="hljs-comment">// å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè¾“å‡ºæ—¥å¿—</span>
            .setSubscription(<span class="hljs-literal">false</span>) <span class="hljs-comment">// æ˜¯å¦æ”¯æŒè®¢é˜…ï¼Œé»˜è®¤ä¸º false</span>
            .setSubscriptionMode(SubscriptionMode.MultiModal) <span class="hljs-comment">// è®¾ç½®è®¢é˜…æ¨¡å¼</span>
            .setInterval(<span class="hljs-number">15</span>) <span class="hljs-comment">// è®¾ç½®è‡ªåŠ¨åˆ·æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œé»˜è®¤ 15ç§’</span>
            .registerActivitys(listOf(MainActivity::<span class="hljs-keyword">class</span>.java)) <span class="hljs-comment">// æ³¨å†Œéœ€è¦è§¦å‘è‡ªåŠ¨åˆ·æ–°çš„ Activity</span>
    }

    <span class="hljs-comment">// å®ç° GooglePayService æ¥å£çš„æ–¹æ³•...</span>
}
</code></pre>
<h3 data-id="heading-2">2. æ ¸å¿ƒç±»ä¸æ¥å£</h3>
<h4 data-id="heading-3">2.1 GooglePayClient</h4>
<p><code>GooglePayClient</code> æ˜¯åº“çš„æ ¸å¿ƒå…¥å£ï¼Œå•ä¾‹æ¨¡å¼ã€‚</p>
<ul>
<li><strong>getInstance()</strong>: è·å–å•ä¾‹å®ä¾‹ã€‚</li>
<li><strong>initBillingClient(context: Application, service: GooglePayService)</strong>: åˆå§‹åŒ–å®¢æˆ·ç«¯ã€‚</li>
<li><strong>setDebug(isDebug: Boolean)</strong>: è®¾ç½®æ˜¯å¦å¼€å¯è°ƒè¯•æ—¥å¿—ã€‚</li>
<li><strong>setSubscription(isSubscription: Boolean)</strong>: è®¾ç½®æ˜¯å¦æ”¯æŒè®¢é˜…åŠŸèƒ½ã€‚</li>
<li><strong>setSubscriptionMode(mode: SubscriptionMode)</strong>: è®¾ç½®è®¢é˜…æ¨¡å¼ã€‚</li>
<li><strong>setInterval(interval: Int)</strong>: è®¾ç½®åœ¨æŒ‡å®š Activity <code>onResume</code> æ—¶è§¦å‘åˆ·æ–°è´­ä¹°çŠ¶æ€çš„æœ€å°æ—¶é—´é—´éš”ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œé»˜è®¤ 15 ç§’ã€‚</li>
<li><strong>registerActivitys(activitys: List&lt;Class&gt;)</strong>: æ³¨å†Œéœ€è¦è§¦å‘è‡ªåŠ¨åˆ·æ–°çš„ Activity ç±»ã€‚å½“è¿™äº› Activity <code>onResume</code> ä¸”è·ç¦»ä¸Šæ¬¡åˆ·æ–°è¶…è¿‡ <code>interval</code> æ—¶ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨ <code>queryPurchases()</code>ã€‚</li>
<li><strong>getPayService()</strong>: è·å–å…·ä½“çš„æ”¯ä»˜æœåŠ¡ (<code>OneTimeService</code> æˆ– <code>SubscriptionService</code>)ã€‚</li>
<li><strong>queryPurchases()</strong>: æŸ¥è¯¢å¹¶åˆ·æ–°å½“å‰çš„è´­ä¹°çŠ¶æ€ï¼ˆåŒ…æ‹¬ä¸€æ¬¡æ€§å•†å“å’Œè®¢é˜…ï¼‰ã€‚</li>
<li><strong>isGoogleAvailable(context: Context?)</strong>: æ£€æŸ¥ Google Play æœåŠ¡æ˜¯å¦å¯ç”¨ã€‚</li>
<li><strong>endConnection()</strong>: æ–­å¼€ BillingClient è¿æ¥ã€‚</li>
</ul>
<h4 data-id="heading-4">2.2 GooglePayService</h4>
<p>ä¸šåŠ¡ç«¯éœ€è¦å®ç°çš„æ¥å£ï¼Œç”¨äºæä¾›å•†å“ ID å’Œå¤„ç†è´­ä¹°ç»“æœã€‚</p>
<ul>
<li><strong>getOneTimeConsumableProducts()</strong>: è¿”å›ä¸€æ¬¡æ€§æ¶ˆè€—å‹å•†å“ ID åˆ—è¡¨ã€‚</li>
<li><strong>getOneTimeNonConsumableProducts()</strong>: è¿”å›ä¸€æ¬¡æ€§éæ¶ˆè€—å‹å•†å“ ID åˆ—è¡¨ã€‚</li>
<li><strong>getSubscribeProducts()</strong>: è¿”å›è®¢é˜…å•†å“ ID åˆ—è¡¨ã€‚</li>
<li><strong>handlePurchasesProcess(isPay: Boolean, productType: BillingProductType, purchases: Purchase)</strong>: å¤„ç†è´­ä¹°äº¤æ˜“ï¼ŒéªŒè¯è®¢å•å¹¶ç¡®è®¤ã€‚</li>
</ul>
<h3 data-id="heading-5">3. æ”¯ä»˜æœåŠ¡ (Payment Services)</h3>
<p>é€šè¿‡ <code>GooglePayClient.getInstance().getPayService&lt;T&gt;()</code> è·å–ã€‚</p>
<h4 data-id="heading-6">3.1 OneTimeService (ä¸€æ¬¡æ€§å•†å“æœåŠ¡)</h4>
<p>ç”¨äºå¤„ç†æ¶ˆè€—å‹å’Œéæ¶ˆè€—å‹å•†å“ã€‚</p>
<ul>
<li><strong>launchBillingFlow(activity: Activity, billingParams: BillingParams)</strong>: å¯åŠ¨æ”¯ä»˜æµç¨‹ã€‚</li>
<li><strong>queryProductDetails(productIds: List)</strong>: æŸ¥è¯¢å•†å“è¯¦æƒ…ã€‚</li>
</ul>
<h4 data-id="heading-7">3.2 SubscriptionService (è®¢é˜…æœåŠ¡)</h4>
<p>ç”¨äºå¤„ç†è®¢é˜…å•†å“ã€‚</p>
<ul>
<li><strong>launchBillingFlow(activity: Activity, billingSubsParams: BillingSubsParams)</strong>: å¯åŠ¨è®¢é˜…æ”¯ä»˜æµç¨‹ã€‚</li>
<li><strong>querySubsOfferDetails(subsOfferParams: SubsOfferParams)</strong>: æŸ¥è¯¢è®¢é˜…å•†å“è¯¦æƒ…ï¼ˆåŒ…æ‹¬ Offerï¼‰ã€‚</li>
<li><strong>queryAckSubscribePurchases(productIds: List?)</strong>: æŸ¥è¯¢å½“å‰æœ‰æ•ˆçš„è®¢é˜…ã€‚</li>
</ul>
<h3 data-id="heading-8">4. å‚æ•°è¯´æ˜ (Parameters)</h3>
<h4 data-id="heading-9">4.1 BillingParams (ä¸€æ¬¡æ€§è´­ä¹°å‚æ•°)</h4>
<p>ç”¨äº <code>OneTimeService.launchBillingFlow</code>ã€‚</p>

























<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>accountId</code></td><td align="left">String</td><td align="left">ä¸šåŠ¡æ–¹æ ‡è¯†ç”¨æˆ·çš„å”¯ä¸€ ID (obfuscatedAccountId)</td></tr><tr><td align="left"><code>productId</code></td><td align="left">String</td><td align="left">Google Play åå°é…ç½®çš„å•†å“ ID</td></tr><tr><td align="left"><code>chargeNo</code></td><td align="left">String</td><td align="left">ä¸šåŠ¡æ–¹ç”Ÿæˆçš„è®¢å•å· (obfuscatedProfileId)</td></tr></tbody></table>
<p><strong>æ„å»ºç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> params = BillingParams.Builder()
    .setAccountId(<span class="hljs-string">"user_123"</span>)
    .setProductId(<span class="hljs-string">"coin_100"</span>)
    .setChargeNo(<span class="hljs-string">"order_abc_456"</span>)
    .build()
</code></pre>
<h4 data-id="heading-10">4.2 BillingSubsParams (è®¢é˜…è´­ä¹°å‚æ•°)</h4>
<p>ç”¨äº <code>SubscriptionService.launchBillingFlow</code>ã€‚</p>






























<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>accountId</code></td><td align="left">String</td><td align="left">ä¸šåŠ¡æ–¹æ ‡è¯†ç”¨æˆ·çš„å”¯ä¸€ ID</td></tr><tr><td align="left"><code>productId</code></td><td align="left">String</td><td align="left">Google Play åå°é…ç½®çš„è®¢é˜…å•†å“ ID</td></tr><tr><td align="left"><code>chargeNo</code></td><td align="left">String</td><td align="left">ä¸šåŠ¡æ–¹ç”Ÿæˆçš„è®¢å•å·</td></tr><tr><td align="left"><code>offerToken</code></td><td align="left">String</td><td align="left">è®¢é˜…å•†å“çš„ Offer Token (ä» <code>AppSubscribeDetails</code> è·å–)</td></tr></tbody></table>
<h4 data-id="heading-11">4.3 AppBillingResponseCode (å“åº”ç )</h4>
<p><code>AppBillingResponseCode</code> å®šä¹‰äº† Google Play Billing API è¿”å›çš„æ‰€æœ‰å¯èƒ½çš„å“åº”ç ã€‚</p>
















































































<table><thead><tr><th align="left">ä»£ç </th><th align="left">å¸¸é‡</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>0</code></td><td align="left"><code>OK</code></td><td align="left">è¯·æ±‚æˆåŠŸ</td></tr><tr><td align="left"><code>-200</code></td><td align="left"><code>FAIL</code></td><td align="left">ä¸šåŠ¡é”™è¯¯</td></tr><tr><td align="left"><code>-3</code></td><td align="left"><code>SERVICE_TIMEOUT</code></td><td align="left">è¯·æ±‚è¶…æ—¶ï¼ˆå·²åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ <code>SERVICE_UNAVAILABLE</code>ï¼‰</td></tr><tr><td align="left"><code>-2</code></td><td align="left"><code>FEATURE_NOT_SUPPORTED</code></td><td align="left">å½“å‰è®¾å¤‡æˆ– Google Play ä¸æ”¯æŒè¯¥åŠŸèƒ½ï¼ˆå¦‚è®¢é˜…ã€å•†å“è¯¦æƒ…ç­‰ï¼‰</td></tr><tr><td align="left"><code>-1</code></td><td align="left"><code>SERVICE_DISCONNECTED</code></td><td align="left">ä¸ Google Play Billing æœåŠ¡æ–­å¼€è¿æ¥ï¼Œå¯å°è¯•é‡æ–°è¿æ¥</td></tr><tr><td align="left"><code>1</code></td><td align="left"><code>USER_CANCELED</code></td><td align="left">ç”¨æˆ·åœ¨ç»“ç®—æµç¨‹ä¸­ä¸»åŠ¨å–æ¶ˆ</td></tr><tr><td align="left"><code>2</code></td><td align="left"><code>SERVICE_UNAVAILABLE</code></td><td align="left">ç½‘ç»œé—®é¢˜æˆ– Google Play æœåŠ¡ä¸å¯ç”¨ï¼ˆå¦‚æ­£åœ¨æ›´æ–°ã€ç¦»çº¿ç­‰ï¼‰</td></tr><tr><td align="left"><code>3</code></td><td align="left"><code>BILLING_UNAVAILABLE</code></td><td align="left">å½“å‰è®¾å¤‡ä¸Šä¸æ”¯æŒ Google Play ç»“ç®—</td></tr><tr><td align="left"><code>4</code></td><td align="left"><code>ITEM_UNAVAILABLE</code></td><td align="left">å•†å“åœ¨å½“å‰åŒºåŸŸæˆ–è´¦æˆ·ä¸å¯ç”¨ï¼ˆä¾‹å¦‚æœªå‘å¸ƒæˆ–å·²ä¸‹æ¶ï¼‰</td></tr><tr><td align="left"><code>5</code></td><td align="left"><code>DEVELOPER_ERROR</code></td><td align="left">å¼€å‘è€…è°ƒç”¨é”™è¯¯ï¼ˆå¦‚å‚æ•°é”™è¯¯ã€API è°ƒç”¨é¡ºåºé”™è¯¯ï¼‰</td></tr><tr><td align="left"><code>6</code></td><td align="left"><code>ERROR</code></td><td align="left">ä¸€èˆ¬é”™è¯¯ï¼ˆç³»ç»Ÿå†…éƒ¨å¼‚å¸¸ã€æœªçŸ¥é—®é¢˜ç­‰ï¼‰</td></tr><tr><td align="left"><code>7</code></td><td align="left"><code>ITEM_ALREADY_OWNED</code></td><td align="left">å•†å“å·²æ‹¥æœ‰ï¼ˆå¦‚æœªæ¶ˆè€—çš„æ¶ˆè€—å‹å•†å“æˆ–å·²è´­ä¹°çš„éæ¶ˆè€—å‹å•†å“ï¼‰</td></tr><tr><td align="left"><code>8</code></td><td align="left"><code>ITEM_NOT_OWNED</code></td><td align="left">æ“ä½œå¤±è´¥ï¼Œå› ä¸ºå•†å“æœªæ‹¥æœ‰ï¼ˆå°è¯•æ¶ˆè€—æˆ–ç¡®è®¤æœªæ‹¥æœ‰çš„å•†å“ï¼‰</td></tr><tr><td align="left"><code>12</code></td><td align="left"><code>NETWORK_ERROR</code></td><td align="left">ç½‘ç»œé”™è¯¯ï¼ˆæ–°å¼•å…¥ï¼Œç”¨äºæ˜ç¡®ç½‘ç»œå¤±è´¥åœºæ™¯ï¼‰</td></tr></tbody></table>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">when</span> (responseCode) {
    AppBillingResponseCode.OK -&gt; {
        <span class="hljs-comment">// å¤„ç†æˆåŠŸ</span>
    }
    AppBillingResponseCode.USER_CANCELED -&gt; {
        <span class="hljs-comment">// ç”¨æˆ·å–æ¶ˆæ”¯ä»˜</span>
    }
    AppBillingResponseCode.ITEM_ALREADY_OWNED -&gt; {
        <span class="hljs-comment">// å•†å“å·²æ‹¥æœ‰</span>
    }
    AppBillingResponseCode.NETWORK_ERROR -&gt; {
        <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ï¼Œå¯ä»¥é‡è¯•</span>
    }
    <span class="hljs-keyword">else</span> -&gt; {
        <span class="hljs-comment">// å¤„ç†å…¶ä»–é”™è¯¯</span>
    }
}
</code></pre>
<h4 data-id="heading-12">4.4 AppProductDetails (å•†å“è¯¦æƒ…æ¨¡å‹)</h4>
<p><code>AppProductDetails</code> è¡¨ç¤ºä¸€æ¬¡æ€§è´­ä¹°å•†å“ï¼ˆæ¶ˆè€—å‹æˆ–éæ¶ˆè€—å‹ï¼‰çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>



































<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>productId</code></td><td align="left">String</td><td align="left">å•†å“ IDï¼ˆä¾‹å¦‚ <code>com.xx.product.1</code>ï¼‰</td></tr><tr><td align="left"><code>productName</code></td><td align="left">String</td><td align="left">å•†å“åç§°</td></tr><tr><td align="left"><code>formattedPrice</code></td><td align="left">String</td><td align="left">æ ¼å¼åŒ–åçš„ä»·æ ¼å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ <code>"â‚¬7.99"</code>ï¼‰</td></tr><tr><td align="left"><code>priceAmountMicros</code></td><td align="left">Long</td><td align="left">ä»¥å¾®å•ä½è¡¨ç¤ºçš„ä»·æ ¼ï¼ˆä¾‹å¦‚ä»·æ ¼ä¸º <code>"â‚¬7.99"</code> æ—¶ï¼Œè¯¥å€¼ä¸º <code>7990000</code>ï¼‰</td></tr><tr><td align="left"><code>priceCurrencyCode</code></td><td align="left">String</td><td align="left">è´§å¸ä»£ç ï¼ˆä¾‹å¦‚ <code>"EUR"</code>ï¼‰</td></tr></tbody></table>
<p><strong>æŸ¥è¯¢å•†å“è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> oneTimeService = GooglePayClient.getInstance().getPayService&lt;OneTimeService&gt;()

lifecycleScope.launch {
    oneTimeService.queryProductDetails(listOf(<span class="hljs-string">"coin_100"</span>, <span class="hljs-string">"coin_500"</span>)).collect { result -&gt;
        result.onSuccess { productList -&gt;
            productList.forEach { product -&gt;
                Log.d(<span class="hljs-string">"Product"</span>, <span class="hljs-string">"ID: <span class="hljs-subst">${product.productId}</span>"</span>)
                Log.d(<span class="hljs-string">"Product"</span>, <span class="hljs-string">"åç§°: <span class="hljs-subst">${product.productName}</span>"</span>)
                Log.d(<span class="hljs-string">"Product"</span>, <span class="hljs-string">"ä»·æ ¼: <span class="hljs-subst">${product.formattedPrice}</span>"</span>)
                Log.d(<span class="hljs-string">"Product"</span>, <span class="hljs-string">"è´§å¸: <span class="hljs-subst">${product.priceCurrencyCode}</span>"</span>)
            }
        }
        result.onFailure { error -&gt;
            Log.e(<span class="hljs-string">"Product"</span>, <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥: <span class="hljs-subst">${error.message}</span>"</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-13">4.5 AppSubscribeDetails (è®¢é˜…è¯¦æƒ…æ¨¡å‹)</h4>
<p><code>AppSubscribeDetails</code> è¡¨ç¤ºè®¢é˜…å•†å“çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®šä»·é˜¶æ¢¯ã€‚</p>

























<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>productId</code></td><td align="left">String</td><td align="left">è®¢é˜…å•†å“ IDï¼ˆä¾‹å¦‚ <code>com.xx.subscription.monthly</code>ï¼‰</td></tr><tr><td align="left"><code>productName</code></td><td align="left">String</td><td align="left">è®¢é˜…å•†å“åç§°</td></tr><tr><td align="left"><code>pricingPhases</code></td><td align="left">List&lt;PricingPhase&gt;</td><td align="left">å®šä»·é˜¶æ¢¯åˆ—è¡¨ï¼ˆæ”¯æŒè¯•ç”¨æœŸã€ä»‹ç»ä»·æ ¼ç­‰ï¼‰</td></tr></tbody></table>
<p><strong>PricingPhase å­—æ®µï¼š</strong></p>

























<table><thead><tr><th align="left">å­—æ®µ</th><th align="left">ç±»å‹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>formattedPrice</code></td><td align="left">String</td><td align="left">æ ¼å¼åŒ–åçš„ä»·æ ¼å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ <code>"â‚¬7.99"</code>ï¼‰</td></tr><tr><td align="left"><code>priceAmountMicros</code></td><td align="left">Long</td><td align="left">ä»¥å¾®å•ä½è¡¨ç¤ºçš„ä»·æ ¼ï¼ˆä¾‹å¦‚ä»·æ ¼ä¸º <code>"â‚¬7.99"</code> æ—¶ï¼Œè¯¥å€¼ä¸º <code>7990000</code>ï¼‰</td></tr><tr><td align="left"><code>priceCurrencyCode</code></td><td align="left">String</td><td align="left">è´§å¸ä»£ç ï¼ˆä¾‹å¦‚ <code>"EUR"</code>ï¼‰</td></tr></tbody></table>
<p><strong>æŸ¥è¯¢è®¢é˜…è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> subscriptionService = GooglePayClient.getInstance().getPayService&lt;SubscriptionService&gt;()

lifecycleScope.launch {
    <span class="hljs-keyword">val</span> params = SubsOfferParams.Builder()
        .setProductIds(listOf(<span class="hljs-string">"monthly_vip"</span>, <span class="hljs-string">"yearly_vip"</span>))
        .build()
    
    subscriptionService.querySubsOfferDetails(params).collect { result -&gt;
        result.onSuccess { subscriptionList -&gt;
            subscriptionList.forEach { subscription -&gt;
                Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"ID: <span class="hljs-subst">${subscription.productId}</span>"</span>)
                Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"åç§°: <span class="hljs-subst">${subscription.productName}</span>"</span>)
                subscription.pricingPhases.forEach { phase -&gt;
                    Log.d(<span class="hljs-string">"Subscription"</span>, <span class="hljs-string">"é˜¶æ¢¯ä»·æ ¼: <span class="hljs-subst">${phase.formattedPrice}</span>"</span>)
                }
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-14">5. æ”¯ä»˜äº‹ä»¶ç›‘å¬ (Payment Event Listening)</h3>
<p><code>GooglePayClient</code> ä½¿ç”¨ Kotlin Coroutines çš„ <code>SharedFlow</code> å‘é€æ”¯ä»˜äº‹ä»¶ã€‚</p>
<h4 data-id="heading-15">5.1 BillingPayEvent</h4>
<p>æ”¯ä»˜äº‹ä»¶å¯†å°ç±»ï¼š</p>
<ul>
<li><code>PaySuccessful(purchase: Purchase)</code>: æ”¯ä»˜æˆåŠŸã€‚</li>
<li><code>PayFailed(code: Int, message: String)</code>: æ”¯ä»˜å¤±è´¥ã€‚</li>
<li><code>PayConsumeSuccessful(purchase: Purchase)</code>:  æ”¯ä»˜å¹¶æ¶ˆè€—æˆåŠŸã€‚</li>
<li><code>PayConsumeFailed(purchase: Purchase, code: Int, message: String)</code>:  æ”¯ä»˜æˆåŠŸä½†æ¶ˆè€—å¤±è´¥ã€‚</li>
</ul>
<h4 data-id="heading-16">5.2 åœ¨ Activity ä¸­ä½¿ç”¨</h4>
<p>å»ºè®®åœ¨ <code>onCreate</code> æˆ– <code>onStart</code> ä¸­å¼€å§‹æ”¶é›†äº‹ä»¶ï¼Œä½¿ç”¨ <code>lifecycleScope</code> ç¡®ä¿åœ¨ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶è‡ªåŠ¨å–æ¶ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
    
    lifecycleScope.launch {
        <span class="hljs-comment">// ä½¿ç”¨ repeatOnLifecycle ç¡®ä¿åªåœ¨æ´»è·ƒçŠ¶æ€ä¸‹æ”¶é›†</span>
        repeatOnLifecycle(Lifecycle.State.STARTED) {
            GooglePayClient.getInstance().appBillingPayEventFlow.collect { event -&gt;
                <span class="hljs-keyword">when</span> (event) {
                    <span class="hljs-keyword">is</span> BillingPayEvent.PaySuccessful -&gt; {
                        <span class="hljs-comment">// å¤„ç†æ”¯ä»˜æˆåŠŸ</span>
                        Log.d(<span class="hljs-string">"Pay"</span>, <span class="hljs-string">"Success: <span class="hljs-subst">${event.purchase}</span>"</span>)
                    }
                    <span class="hljs-keyword">is</span> BillingPayEvent.PayFailed -&gt; {
                        <span class="hljs-comment">// å¤„ç†æ”¯ä»˜å¤±è´¥</span>
                        Log.e(<span class="hljs-string">"Pay"</span>, <span class="hljs-string">"Failed: <span class="hljs-subst">${event.code}</span> - <span class="hljs-subst">${event.message}</span>"</span>)
                    }
                    <span class="hljs-keyword">else</span> -&gt; {
                        <span class="hljs-comment">// å…¶ä»–çŠ¶æ€</span>
                    }
                }
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-17">5.3 åœ¨ Dialog ä¸­ä½¿ç”¨ (æ‰‹åŠ¨é‡Šæ”¾)</h4>
<p>å¦‚æœåœ¨ <code>Dialog</code> ä¸­ç›‘å¬æ”¯ä»˜ç»“æœï¼Œéœ€è¦æ³¨æ„åç¨‹ä½œç”¨åŸŸçš„ç®¡ç†ã€‚</p>
<ol>
<li><strong>ä½¿ç”¨ Dialog æ‰€åœ¨çš„ Activity/Fragment çš„ lifecycleScope</strong>: è¿™æ˜¯æœ€æ¨èçš„æ–¹å¼ï¼Œä¸ Activity ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œæ— éœ€æ‰‹åŠ¨é‡Šæ”¾ã€‚</li>
<li><strong>ä½¿ç”¨è‡ªå®šä¹‰ Scope</strong>: å¦‚æœå¿…é¡»åœ¨ Dialog å†…éƒ¨ç®¡ç†ï¼Œéœ€è¦åœ¨ <code>dismiss</code> æ—¶å–æ¶ˆ Jobã€‚</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PayDialog</span>(context: Context) : Dialog(context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> dialogScope = CoroutineScope(Dispatchers.Main + SupervisorJob())

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">show</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.show()
        dialogScope.launch {
            GooglePayClient.getInstance().appBillingPayEventFlow.collect { event -&gt;
                <span class="hljs-comment">// å¤„ç†äº‹ä»¶</span>
                <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">is</span> BillingPayEvent.PaySuccessful) {
                    dismiss()
                }
            }
        }
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dismiss</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.dismiss()
        <span class="hljs-comment">// å¿…é¡»æ‰‹åŠ¨å–æ¶ˆï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
        dialogScope.cancel()
    }
}
</code></pre>
<h3 data-id="heading-18">6. å…¶ä»–æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>: <code>GooglePayClient</code> å†…éƒ¨å¤„ç†äº† Activity çš„ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ï¼Œä½†äº‹ä»¶ç›‘å¬éœ€è¦è°ƒç”¨è€…è‡ªè¡Œç®¡ç† Scopeã€‚</li>
<li><strong>æ¶ˆè€—</strong>: å¯¹äºä¸€æ¬¡æ€§æ¶ˆè€—å‹å•†å“ï¼Œåº“ä¼šè‡ªåŠ¨è¿›è¡Œæ¶ˆè€—æ“ä½œ (<code>consumeAsync</code>)ã€‚</li>
<li><strong>ç¡®è®¤</strong>: æ‰€æœ‰è´­ä¹°ï¼ˆåŒ…æ‹¬è®¢é˜…ï¼‰éƒ½éœ€è¦ç¡®è®¤ (<code>acknowledgePurchase</code>)ï¼Œè¿™éƒ¨åˆ†é€»è¾‘åœ¨ <code>GooglePayService.handlePurchasesProcess</code> ä¸­ç”±ä¸šåŠ¡å±‚è§¦å‘æˆ–åº“å†…éƒ¨å¤„ç†ï¼ˆå…·ä½“å–å†³äº <code>handlePurchases</code> çš„å®ç°ï¼Œåº“é»˜è®¤ä¼šè‡ªåŠ¨å¤„ç†æ¶ˆè€—ï¼Œä½†ç¡®è®¤é€»è¾‘é€šå¸¸éœ€è¦ä¸šåŠ¡ç«¯é…åˆéªŒè¯åè°ƒç”¨ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-19">ç›¸å…³æ–‡æ¡£</h3>
<ul>
<li><a href="https://juejin.cn/post/7579450578293293098" target="_blank" title="https://juejin.cn/post/7579450578293293098">GooglePay</a></li>
<li><a href="https://juejin.cn/post/7579438351297740836" target="_blank" title="https://juejin.cn/post/7579438351297740836">GooglePay æ¶ˆè€—å•†å“è´­ä¹°æµç¨‹</a></li>
<li><a href="https://juejin.cn/post/7579450578293555242" target="_blank" title="https://juejin.cn/post/7579450578293555242">GooglePay è®¢é˜…å•†å“è´­ä¹°æµç¨‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fgoogle%2Fplay%2Fbilling%2Fsubscriptions" target="_blank" title="https://developer.android.com/google/play/billing/subscriptions" ref="nofollow noopener noreferrer">Google Play Billing å®˜æ–¹æ–‡æ¡£</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin åç¨‹ä¸­Jobå’ŒSupervisorJob â€”â€” æ–°æ‰‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578780780026855433</link>    <guid>https://juejin.cn/post/7578780780026855433</guid>    <pubDate>2025-12-02T03:03:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780026855433" data-draft-id="7578709098256400422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin åç¨‹ä¸­Jobå’ŒSupervisorJob â€”â€” æ–°æ‰‹æŒ‡å—"/> <meta itemprop="keywords" content="Kotlin,Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-12-02T03:03:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QING618"/> <meta itemprop="url" content="https://juejin.cn/user/339115460529117"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin åç¨‹ä¸­Jobå’ŒSupervisorJob â€”â€” æ–°æ‰‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/339115460529117/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QING618
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:03:49.000Z" title="Tue Dec 02 2025 03:03:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Kotlinï¼šåç¨‹ä¸ºç®¡ç†å¼‚æ­¥æ“ä½œæä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œè€Œ<code>Job</code>å’Œ<code>SupervisorJob</code>æ­£æ˜¯è¿™ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒã€‚ç†è§£è¿™äº›æ¦‚å¿µå¯¹äºæ„å»ºå¥å£®ã€å®¹é”™çš„åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†ä»å®ƒä»¬çš„åŒºåˆ«ã€ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µè¿›è¡Œè®²è§£ã€‚</h2>
<h2 data-id="heading-1">ä¸€ã€æ¦‚å¿µ</h2>
<h4 data-id="heading-2">ä»€ä¹ˆæ˜¯Jobï¼Ÿ</h4>
<p><code>Job</code>æ˜¯ä¸€ä¸ªå…·æœ‰ç”Ÿå‘½å‘¨æœŸçš„å¯å–æ¶ˆä»»åŠ¡ã€‚æ¯ä¸ªåç¨‹éƒ½æœ‰ä¸€ä¸ªå…³è”çš„Jobï¼Œç”¨äºæ§åˆ¶å…¶æ‰§è¡Œã€‚</p>
<p>ä½ å¯ä»¥æŠŠJobçœ‹ä½œæ˜¯åç¨‹çš„å¥æŸ„ï¼Œå®ƒå…è®¸ä½ ï¼š</p>
<ul>
<li>å–æ¶ˆåç¨‹</li>
<li>ç­‰å¾…å…¶å®Œæˆ</li>
<li>æ£€æŸ¥å…¶çŠ¶æ€ï¼ˆæ´»è·ƒã€å®Œæˆã€å–æ¶ˆï¼‰</li>
<li>å»ºç«‹çˆ¶å­å…³ç³»</li>
</ul>
<h4 data-id="heading-3">ä»€ä¹ˆæ˜¯SupervisorJobï¼Ÿ</h4>
<p><code>SupervisorJob</code>æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„Jobï¼Œå®ƒæ”¹å˜äº†å–æ¶ˆè¡Œä¸ºã€‚</p>
<p>ä½¿ç”¨SupervisorJobæ—¶ï¼š</p>
<ul>
<li><strong>å­Jobå¤±è´¥ä¸ä¼šå‘ä¸Šä¼ æ’­:</strong>  å¤±è´¥çš„å­Jobä¸ä¼šå–æ¶ˆçˆ¶Job</li>
<li><strong>å‘ä¸‹ä¼ æ’­ä»ç„¶æœ‰æ•ˆ:</strong>   å–æ¶ˆçˆ¶Jobä»ç„¶ä¼šå–æ¶ˆå­Job</li>
<li><strong>å…„å¼ŸJobç›¸äº’ç‹¬ç«‹ï¼š</strong>  ä¸€ä¸ªå­Jobçš„å¤±è´¥ä¸ä¼šå½±å“å…„å¼ŸJob</li>
</ul>
<h2 data-id="heading-4">äºŒã€ Jobç”Ÿå‘½å‘¨æœŸçŠ¶æ€</h2>
<ul>
<li><strong>æ–°å»º</strong> â€” Jobå·²åˆ›å»ºä½†å°šæœªå¯åŠ¨ï¼ˆä»…é€‚ç”¨äºæƒ°æ€§åç¨‹ï¼‰</li>
<li><strong>æ´»è·ƒ</strong> â€” Jobæ­£åœ¨è¿è¡Œ</li>
<li><strong>å®Œæˆä¸­</strong> â€” Jobæ­£åœ¨å®Œæˆä½†ç­‰å¾…å­Job</li>
<li><strong>å·²å®Œæˆ</strong> â€” JobæˆåŠŸå®Œæˆ</li>
<li><strong>å–æ¶ˆä¸­</strong> â€” Jobæ­£åœ¨è¢«å–æ¶ˆ</li>
<li><strong>å·²å–æ¶ˆ</strong> â€” Jobå·²è¢«å–æ¶ˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/302e662c76544fec8c6f97ffd75987ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUUlORzYxOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765249839&amp;x-signature=2oRwgObiMjZF1yIWiRUbL8xk8vE%3D" alt="deepseek_mermaid_20251202_892c7b.png" loading="lazy"/></p>
<h2 data-id="heading-5">ä¸‰ã€JobçŠ¶æ€è¯¦ç»†è¯´æ˜åŠç¤ºä¾‹</h2>
<h4 data-id="heading-6">1.Â New (æ–°å»º)</h4>
<ul>
<li>åˆšåˆšåˆ›å»ºä½†è¿˜æœªå¯åŠ¨çš„ Job</li>
<li>éœ€è¦é€šè¿‡Â <code>start()</code>Â æˆ–Â <code>launch</code>Â å¯åŠ¨</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = Job()  <span class="hljs-comment">// åˆ›å»ºåå¤„äº New çŠ¶æ€</span>
job.start()      <span class="hljs-comment">// å¯åŠ¨åå˜ä¸º Active</span>
</code></pre>
<h4 data-id="heading-7">2.Â Active (æ´»è·ƒ)</h4>
<ul>
<li>Job æ­£åœ¨è¿è¡Œ</li>
<li>å¯ä»¥åˆ›å»ºå­åç¨‹</li>
<li>å±æ€§çŠ¶æ€ï¼š
<ul>
<li><code>isActive = true</code></li>
<li><code>isCompleted = false</code></li>
<li><code>isCancelled = false</code></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = launch {
    <span class="hljs-comment">// åç¨‹ä½“æ‰§è¡Œä¸­ - Active çŠ¶æ€</span>
    delay(<span class="hljs-number">1000</span>)
    println(<span class="hljs-string">"Done"</span>)
}
</code></pre>
<h4 data-id="heading-8">3.Â Completing (å®Œæˆä¸­)</h4>
<ul>
<li>åç¨‹ä½“å·²æ‰§è¡Œå®Œæ¯•</li>
<li>æ­£åœ¨ç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆ</li>
<li>å±æ€§çŠ¶æ€ï¼š
<ul>
<li><code>isActive = false</code></li>
<li><code>isCompleted = false</code>Â (è¿˜æœ‰å­åç¨‹æœªå®Œæˆ)</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">4.Â Completed (å·²å®Œæˆ)</h4>
<ul>
<li>åç¨‹åŠå…¶æ‰€æœ‰å­åç¨‹éƒ½å·²æ­£å¸¸å®Œæˆ</li>
<li>å±æ€§çŠ¶æ€ï¼š
<ul>
<li><code>isActive = false</code></li>
<li><code>isCompleted = true</code></li>
<li><code>isCancelled = false</code></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = launch {
    <span class="hljs-comment">// æ­£å¸¸æ‰§è¡Œå®Œæˆ</span>
}
job.join()  <span class="hljs-comment">// ç­‰å¾…è¿›å…¥ Completed çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-10">5.Â Cancelling (å–æ¶ˆä¸­)</h4>
<ul>
<li>æ”¶åˆ°å–æ¶ˆè¯·æ±‚ï¼Œæ­£åœ¨æ‰§è¡Œå–æ¶ˆæ“ä½œ</li>
<li>å¯èƒ½è¿˜åœ¨æ‰§è¡ŒÂ <code>finally</code>Â å—æˆ–æŒ‚èµ·å‡½æ•°</li>
<li>å±æ€§çŠ¶æ€ï¼š
<ul>
<li><code>isActive = false</code></li>
<li><code>isCancelled = true</code></li>
</ul>
</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = launch {
    <span class="hljs-keyword">try</span> {
        delay(<span class="hljs-number">10000</span>)
    } <span class="hljs-keyword">finally</span> {
        <span class="hljs-comment">// è¿›å…¥ Cancelling çŠ¶æ€</span>
        delay(<span class="hljs-number">1000</span>)  <span class="hljs-comment">// ä»å¯æ‰§è¡ŒæŒ‚èµ·å‡½æ•°</span>
    }
}
delay(<span class="hljs-number">100</span>)
job.cancel()  <span class="hljs-comment">// è§¦å‘ Cancelling çŠ¶æ€</span>
</code></pre>
<h4 data-id="heading-11">6.Â Cancelled (å·²å–æ¶ˆ)</h4>
<ul>
<li>å–æ¶ˆæ“ä½œå·²å®Œæˆ</li>
<li>å±æ€§çŠ¶æ€ï¼š
<ul>
<li><code>isActive = false</code></li>
<li><code>isCompleted = true</code>Â (æ³¨æ„ï¼šå·²å–æ¶ˆä¹Ÿè¢«è§†ä¸ºå®Œæˆ)</li>
<li><code>isCancelled = true</code></li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">7. çŠ¶æ€æ£€æŸ¥æ–¹æ³•</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> job = launch {
    <span class="hljs-comment">// åç¨‹ä½“</span>
}

<span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€</span>
println(<span class="hljs-string">"isActive: <span class="hljs-subst">${job.isActive}</span>"</span>)      <span class="hljs-comment">// æ˜¯å¦æ´»è·ƒ</span>
println(<span class="hljs-string">"isCompleted: <span class="hljs-subst">${job.isCompleted}</span>"</span>) <span class="hljs-comment">// æ˜¯å¦å®Œæˆ</span>
println(<span class="hljs-string">"isCancelled: <span class="hljs-subst">${job.isCancelled}</span>"</span>) <span class="hljs-comment">// æ˜¯å¦å–æ¶ˆ</span>

<span class="hljs-comment">// ç­‰å¾…å®Œæˆ</span>
job.join()

<span class="hljs-comment">// å–æ¶ˆ Job</span>
job.cancel()

<span class="hljs-comment">// å–æ¶ˆå¹¶ç­‰å¾…å®Œæˆ</span>
job.cancelAndJoin()
</code></pre>
<h4 data-id="heading-13">8. çŠ¶æ€è½¬æ¢ç¤ºä¾‹</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> job = launch {
        println(<span class="hljs-string">"1. Job started - Active"</span>)
        <span class="hljs-keyword">try</span> {
            delay(<span class="hljs-number">2000</span>)
            println(<span class="hljs-string">"2. Normal completion - Completing â†’ Completed"</span>)
        } <span class="hljs-keyword">finally</span> {
            println(<span class="hljs-string">"3. Finally block - Cancelling"</span>)
            delay(<span class="hljs-number">500</span>)  <span class="hljs-comment">// åœ¨å–æ¶ˆä¸­ä»å¯æŒ‚èµ·</span>
        }
    }
    
    delay(<span class="hljs-number">500</span>)
    job.cancel()  <span class="hljs-comment">// Active â†’ Cancelling</span>
    job.join()    <span class="hljs-comment">// ç­‰å¾…è¿›å…¥ Cancelled</span>
    println(<span class="hljs-string">"4. Final state: isCancelled=<span class="hljs-subst">${job.isCancelled}</span>"</span>)
}
</code></pre>
<h2 data-id="heading-14">å››ã€Jobé‡è¦æ³¨æ„äº‹é¡¹</h2>
<h4 data-id="heading-15">1. Completed å’Œ Cancelled éƒ½æ˜¯å®ŒæˆçŠ¶æ€</h4>
<ul>
<li><code>isCompleted = true</code>Â è¡¨ç¤ºä¸¤è€…</li>
<li>éœ€è¦ç”¨Â <code>isCancelled</code>Â åŒºåˆ†</li>
</ul>
<h4 data-id="heading-16">2. çŠ¶æ€æ£€æŸ¥æ˜¯ç¬æ—¶çš„</h4>
<ul>
<li>çŠ¶æ€å¯èƒ½åœ¨ä½ æ£€æŸ¥åç«‹å³æ”¹å˜</li>
</ul>
<h4 data-id="heading-17">3.  çˆ¶å­å…³ç³»å½±å“çŠ¶æ€</h4>
<ul>
<li>çˆ¶ Job å–æ¶ˆä¼šå¯¼è‡´æ‰€æœ‰å­ Job å–æ¶ˆ</li>
<li>çˆ¶ Job ç­‰å¾…æ‰€æœ‰å­ Job å®Œæˆæ‰èƒ½è¿›å…¥ Completed</li>
</ul>
<h4 data-id="heading-18">4.  ç»“æ„åŒ–å¹¶å‘</h4>
<ul>
<li>çˆ¶åç¨‹çš„ä½œç”¨åŸŸå–æ¶ˆä¼šä¼ æ’­åˆ°æ‰€æœ‰å­åç¨‹</li>
<li>çˆ¶åç¨‹ä¼šç­‰å¾…æ‰€æœ‰å­åç¨‹å®Œæˆ</li>
</ul>
<h2 data-id="heading-19">äº”ã€SupervisorJobåŸºç¡€ç¤ºä¾‹</h2>
<h4 data-id="heading-20">1. å¤±è´¥ä¸ä¼šä¼ æ’­</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> supervisorJob = SupervisorJob()  <span class="hljs-comment">// SupervisorJob</span>
    
    launch(supervisorJob) {
        println(<span class="hljs-string">"Child 1 starts"</span>)
        delay(<span class="hljs-number">100</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Child 1 failed!"</span>)
    }
    
    launch(supervisorJob) {
        println(<span class="hljs-string">"Child 2 starts"</span>)
        delay(<span class="hljs-number">200</span>)
        println(<span class="hljs-string">"Child 2 completed"</span>)  <span class="hljs-comment">// è¿™ä¸ªä¼šæ­£å¸¸æ‰§è¡Œ</span>
    }
    
    delay(<span class="hljs-number">300</span>)
    println(<span class="hljs-string">"Supervisor is alive: <span class="hljs-subst">${supervisorJob.isActive}</span>"</span>)  <span class="hljs-comment">// true</span>
    println(<span class="hljs-string">"Supervisor children active: <span class="hljs-subst">${supervisorJob.children.count { it.isActive }</span>}"</span>)
}
</code></pre>
<h4 data-id="heading-21">2. æ¨èä½¿ç”¨Â <code>supervisorScope</code>Â æ„å»ºå™¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    supervisorScope {
        <span class="hljs-keyword">val</span> child1 = launch {
            println(<span class="hljs-string">"Task 1 started"</span>)
            delay(<span class="hljs-number">500</span>)
            <span class="hljs-keyword">throw</span> ArithmeticException(<span class="hljs-string">"Task 1 calculation error!"</span>)
        }
        
        <span class="hljs-keyword">val</span> child2 = launch {
            println(<span class="hljs-string">"Task 2 started"</span>)
            delay(<span class="hljs-number">1000</span>)
            println(<span class="hljs-string">"Task 2 completed successfully"</span>)
        }
        
        <span class="hljs-keyword">val</span> child3 = launch {
            println(<span class="hljs-string">"Task 3 started"</span>)
            delay(<span class="hljs-number">1500</span>)
            println(<span class="hljs-string">"Task 3 completed successfully"</span>)
        }
        
        <span class="hljs-comment">// å¤„ç†å„ä¸ªå­åç¨‹çš„ç»“æœ</span>
        child1.join()  <span class="hljs-comment">// ä¼šæŠ›å‡ºå¼‚å¸¸</span>
        println(<span class="hljs-string">"Child1 joined, isCancelled: <span class="hljs-subst">${child1.isCancelled}</span>"</span>)
        
        child2.join()  <span class="hljs-comment">// æ­£å¸¸å®Œæˆ</span>
        println(<span class="hljs-string">"Child2 joined, isCompleted: <span class="hljs-subst">${child2.isCompleted}</span>"</span>)
        
        child3.join()  <span class="hljs-comment">// æ­£å¸¸å®Œæˆ</span>
        println(<span class="hljs-string">"All tasks processed"</span>)
    }
    
    println(<span class="hljs-string">"SupervisorScope completed"</span>)
}
</code></pre>
<h2 data-id="heading-22">å…­ã€SupervisorJobå®é™…åº”ç”¨åœºæ™¯</h2>
<h4 data-id="heading-23">1. å¹¶è¡Œä¸‹è½½å¤šä¸ªæ–‡ä»¶</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileDownloader</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">downloadFiles</span><span class="hljs-params">(urls: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> = supervisorScope {
        <span class="hljs-keyword">val</span> downloadJobs = urls.map { url -&gt;
            async {
                <span class="hljs-keyword">try</span> {
                    println(<span class="hljs-string">"Downloading <span class="hljs-variable">$url</span>"</span>)
                    delay((<span class="hljs-number">100.</span><span class="hljs-number">.500</span>).random().toLong())  <span class="hljs-comment">// æ¨¡æ‹Ÿä¸‹è½½</span>
                    <span class="hljs-keyword">if</span> (url.contains(<span class="hljs-string">"error"</span>)) {
                        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"Failed to download <span class="hljs-variable">$url</span>"</span>)
                    }
                    <span class="hljs-string">"Content of <span class="hljs-variable">$url</span>"</span>
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    println(<span class="hljs-string">"Error downloading <span class="hljs-variable">$url</span>: <span class="hljs-subst">${e.message}</span>"</span>)
                    <span class="hljs-literal">null</span>  <span class="hljs-comment">// è¿”å› null è¡¨ç¤ºå¤±è´¥</span>
                }
            }
        }
        
        <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰ç»“æœï¼ˆåŒ…æ‹¬å¤±è´¥çš„ï¼‰</span>
        <span class="hljs-keyword">val</span> results = downloadJobs.map { it.await() }
        results.filterNotNull()  <span class="hljs-comment">// è¿”å›æˆåŠŸä¸‹è½½çš„å†…å®¹</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> downloader = FileDownloader()
    <span class="hljs-keyword">val</span> urls = listOf(
        <span class="hljs-string">"http://example.com/file1.txt"</span>,
        <span class="hljs-string">"http://example.com/file2-error.txt"</span>,  <span class="hljs-comment">// è¿™ä¸ªä¼šå¤±è´¥</span>
        <span class="hljs-string">"http://example.com/file3.txt"</span>,
        <span class="hljs-string">"http://example.com/file4-error.txt"</span>   <span class="hljs-comment">// è¿™ä¸ªä¹Ÿä¼šå¤±è´¥</span>
    )
    
    <span class="hljs-keyword">val</span> successfulDownloads = downloader.downloadFiles(urls)
    println(<span class="hljs-string">"Successfully downloaded <span class="hljs-subst">${successfulDownloads.size}</span> files"</span>)
}
</code></pre>
<h4 data-id="heading-24">2. å¾®æœåŠ¡å¥åº·æ£€æŸ¥</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*
<span class="hljs-keyword">import</span> java.time.LocalDateTime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">HealthChecker</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceStatus</span>(
        <span class="hljs-keyword">val</span> name: String,
        <span class="hljs-keyword">val</span> isHealthy: <span class="hljs-built_in">Boolean</span>,
        <span class="hljs-keyword">val</span> responseTime: <span class="hljs-built_in">Long</span>,
        <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>
    )
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkAllServices</span><span class="hljs-params">()</span></span> = supervisorScope {
        <span class="hljs-keyword">val</span> services = listOf(
            <span class="hljs-string">"auth-service"</span> to <span class="hljs-string">"http://auth:8080/health"</span>,
            <span class="hljs-string">"payment-service"</span> to <span class="hljs-string">"http://payment:8080/health"</span>,
            <span class="hljs-string">"notification-service"</span> to <span class="hljs-string">"http://notification:8080/health"</span>,
            <span class="hljs-string">"database"</span> to <span class="hljs-string">"http://db:5432/health"</span>
        )
        
        services.map { (name, url) -&gt;
            async {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
                    <span class="hljs-comment">// æ¨¡æ‹Ÿå¥åº·æ£€æŸ¥è¯·æ±‚</span>
                    delay((<span class="hljs-number">50.</span><span class="hljs-number">.500</span>).random().toLong())
                    
                    <span class="hljs-comment">// æ¨¡æ‹Ÿéšæœºå¤±è´¥</span>
                    <span class="hljs-keyword">if</span> (Math.random() &lt; <span class="hljs-number">0.3</span>) {
                        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"<span class="hljs-variable">$name</span> timeout"</span>)
                    }
                    
                    <span class="hljs-keyword">val</span> responseTime = System.currentTimeMillis() - startTime
                    ServiceStatus(name, isHealthy = <span class="hljs-literal">true</span>, responseTime)
                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    ServiceStatus(name, isHealthy = <span class="hljs-literal">false</span>, <span class="hljs-number">0</span>, e.message)
                }
            }
        }.map { it.await() }
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> checker = HealthChecker()
    
    repeat(<span class="hljs-number">3</span>) { checkNumber -&gt;
        println(<span class="hljs-string">"\n=== Health Check #<span class="hljs-subst">${checkNumber + <span class="hljs-number">1</span>}</span> ==="</span>)
        <span class="hljs-keyword">val</span> results = checker.checkAllServices()
        
        results.forEach { status -&gt;
            <span class="hljs-keyword">val</span> statusIcon = <span class="hljs-keyword">if</span> (status.isHealthy) <span class="hljs-string">"âœ…"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"âŒ"</span>
            println(<span class="hljs-string">"<span class="hljs-variable">$statusIcon</span> <span class="hljs-subst">${status.name}</span>: "</span> +
                   <span class="hljs-keyword">if</span> (status.isHealthy) <span class="hljs-string">"<span class="hljs-subst">${status.responseTime}</span>ms"</span> 
                   <span class="hljs-keyword">else</span> <span class="hljs-string">"ERROR: <span class="hljs-subst">${status.error}</span>"</span>)
        }
        
        <span class="hljs-keyword">val</span> healthyCount = results.count { it.isHealthy }
        println(<span class="hljs-string">"\nSummary: <span class="hljs-variable">$healthyCount</span>/<span class="hljs-subst">${results.size}</span> services healthy"</span>)
        
        delay(<span class="hljs-number">2000</span>)
    }
}
</code></pre>
<h4 data-id="heading-25">3. UI åº”ç”¨ä¸­çš„å¹¶è¡Œä»»åŠ¡</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserDashboardViewModel</span> {
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadDashboardData</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: DashboardData = supervisorScope {
        <span class="hljs-comment">// å¹¶è¡ŒåŠ è½½å„ç§æ•°æ®</span>
        <span class="hljs-keyword">val</span> userProfile = async { 
            loadUserProfile(userId) 
        }
        
        <span class="hljs-keyword">val</span> recentOrders = async { 
            loadRecentOrders(userId) 
        }
        
        <span class="hljs-keyword">val</span> notifications = async { 
            loadNotifications(userId) 
        }
        
        <span class="hljs-keyword">val</span> recommendations = async { 
            <span class="hljs-keyword">try</span> {
                loadRecommendations(userId)
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                <span class="hljs-comment">// æ¨èå¤±è´¥ä¸å½±å“å…¶ä»–æ•°æ®</span>
                emptyList&lt;Recommendation&gt;()
            }
        }
        
        <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰è¯·æ±‚å®Œæˆ</span>
        DashboardData(
            profile = userProfile.await(),
            orders = recentOrders.await(),
            notifications = notifications.await(),
            recommendations = recommendations.await()
        )
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUserProfile</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: UserProfile {
        delay(<span class="hljs-number">300</span>)
        <span class="hljs-keyword">return</span> UserProfile(<span class="hljs-string">"User <span class="hljs-variable">$userId</span>"</span>)
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadRecentOrders</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;Order&gt; {
        delay(<span class="hljs-number">400</span>)
        <span class="hljs-keyword">return</span> listOf(Order(<span class="hljs-string">"Order1"</span>), Order(<span class="hljs-string">"Order2"</span>))
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadNotifications</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;Notification&gt; {
        delay(<span class="hljs-number">200</span>)
        <span class="hljs-keyword">if</span> (Math.random() &lt; <span class="hljs-number">0.2</span>) <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"Notification service down"</span>)
        <span class="hljs-keyword">return</span> listOf(Notification(<span class="hljs-string">"New message"</span>))
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadRecommendations</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span>: List&lt;Recommendation&gt; {
        delay(<span class="hljs-number">500</span>)
        <span class="hljs-keyword">if</span> (Math.random() &lt; <span class="hljs-number">0.3</span>) <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"Recommendation engine error"</span>)
        <span class="hljs-keyword">return</span> listOf(Recommendation(<span class="hljs-string">"Item 1"</span>), Recommendation(<span class="hljs-string">"Item 2"</span>))
    }
    
    <span class="hljs-comment">// æ•°æ®ç±»</span>
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DashboardData</span>(
        <span class="hljs-keyword">val</span> profile: UserProfile,
        <span class="hljs-keyword">val</span> orders: List&lt;Order&gt;,
        <span class="hljs-keyword">val</span> notifications: List&lt;Notification&gt;,
        <span class="hljs-keyword">val</span> recommendations: List&lt;Recommendation&gt;
    )
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserProfile</span>(<span class="hljs-keyword">val</span> name: String)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span>(<span class="hljs-keyword">val</span> id: String)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Notification</span>(<span class="hljs-keyword">val</span> message: String)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Recommendation</span>(<span class="hljs-keyword">val</span> item: String)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> viewModel = UserDashboardViewModel()
    
    repeat(<span class="hljs-number">5</span>) {
        <span class="hljs-keyword">try</span> {
            println(<span class="hljs-string">"\nLoading dashboard..."</span>)
            <span class="hljs-keyword">val</span> dashboard = viewModel.loadDashboardData(<span class="hljs-string">"user123"</span>)
            println(<span class="hljs-string">"Dashboard loaded successfully:"</span>)
            println(<span class="hljs-string">"- Profile: <span class="hljs-subst">${dashboard.profile.name}</span>"</span>)
            println(<span class="hljs-string">"- Orders: <span class="hljs-subst">${dashboard.orders.size}</span>"</span>)
            println(<span class="hljs-string">"- Notifications: <span class="hljs-subst">${dashboard.notifications.size}</span>"</span>)
            println(<span class="hljs-string">"- Recommendations: <span class="hljs-subst">${dashboard.recommendations.size}</span>"</span>)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            println(<span class="hljs-string">"Critical error loading dashboard: <span class="hljs-subst">${e.message}</span>"</span>)
        }
        delay(<span class="hljs-number">1000</span>)
    }
}
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€SupervisorJobé«˜çº§ç”¨æ³•ï¼šè‡ªå®šä¹‰é”™è¯¯å¤„ç†</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.*

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ResilientTaskManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> supervisorJob = SupervisorJob()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.IO + supervisorJob)
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskResult</span>(<span class="hljs-keyword">val</span> id: String, <span class="hljs-keyword">val</span> success: <span class="hljs-built_in">Boolean</span>, <span class="hljs-keyword">val</span> value: Any? = <span class="hljs-literal">null</span>, <span class="hljs-keyword">val</span> error: String? = <span class="hljs-literal">null</span>)
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">submitTask</span><span class="hljs-params">(taskId: <span class="hljs-type">String</span>, task: <span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">Any</span>)</span></span> {
        scope.launch {
            <span class="hljs-keyword">try</span> {
                println(<span class="hljs-string">"[<span class="hljs-variable">$taskId</span>] Starting task"</span>)
                <span class="hljs-keyword">val</span> result = task()
                println(<span class="hljs-string">"[<span class="hljs-variable">$taskId</span>] Task completed successfully"</span>)
                onTaskCompleted(TaskResult(taskId, <span class="hljs-literal">true</span>, result))
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                println(<span class="hljs-string">"[<span class="hljs-variable">$taskId</span>] Task failed: <span class="hljs-subst">${e.message}</span>"</span>)
                onTaskCompleted(TaskResult(taskId, <span class="hljs-literal">false</span>, error = e.message))
                <span class="hljs-comment">// å¤±è´¥çš„ä»»åŠ¡å¯ä»¥åœ¨è¿™é‡Œé‡è¯•</span>
                <span class="hljs-keyword">if</span> (shouldRetry(taskId)) {
                    delay(<span class="hljs-number">1000</span>)
                    println(<span class="hljs-string">"[<span class="hljs-variable">$taskId</span>] Retrying..."</span>)
                    submitTask(<span class="hljs-string">"<span class="hljs-variable">$taskId</span>-retry"</span>, task)
                }
            }
        }
    }
    
    <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shutdown</span><span class="hljs-params">(timeoutMillis: <span class="hljs-type">Long</span> = <span class="hljs-number">5000</span>)</span></span> {
        scope.cancel()
        <span class="hljs-keyword">try</span> {
            withTimeout(timeoutMillis) {
                supervisorJob.join()
            }
            println(<span class="hljs-string">"All tasks completed gracefully"</span>)
        } <span class="hljs-keyword">catch</span> (e: TimeoutCancellationException) {
            println(<span class="hljs-string">"Some tasks did not complete in time"</span>)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTaskCompleted</span><span class="hljs-params">(result: <span class="hljs-type">TaskResult</span>)</span></span> {
        <span class="hljs-comment">// å¤„ç†ä»»åŠ¡å®Œæˆäº‹ä»¶</span>
        println(<span class="hljs-string">"Task <span class="hljs-subst">${result.id}</span>: <span class="hljs-subst">${if (result.success) <span class="hljs-string">"SUCCESS"</span> else <span class="hljs-string">"FAILED"</span>}</span>"</span>)
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldRetry</span><span class="hljs-params">(taskId: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> !taskId.contains(<span class="hljs-string">"no-retry"</span>)
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> manager = ResilientTaskManager()
    
    <span class="hljs-comment">// æäº¤å¤šä¸ªä»»åŠ¡</span>
    manager.submitTask(<span class="hljs-string">"task-1"</span>) {
        delay(<span class="hljs-number">1000</span>)
        <span class="hljs-string">"Result 1"</span>
    }
    
    manager.submitTask(<span class="hljs-string">"task-2-error"</span>) {
        delay(<span class="hljs-number">500</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Simulated error in task 2"</span>)
    }
    
    manager.submitTask(<span class="hljs-string">"task-3-no-retry"</span>) {
        delay(<span class="hljs-number">800</span>)
        <span class="hljs-keyword">throw</span> RuntimeException(<span class="hljs-string">"Fatal error - no retry"</span>)
    }
    
    manager.submitTask(<span class="hljs-string">"task-4"</span>) {
        delay(<span class="hljs-number">1200</span>)
        <span class="hljs-string">"Result 4"</span>
    }
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    delay(<span class="hljs-number">3000</span>)
    manager.shutdown()
}
</code></pre>
<h2 data-id="heading-27">å…«ã€SupervisorJob é‡è¦æ³¨æ„äº‹é¡¹</h2>
<h4 data-id="heading-28">1. é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">supervisorScope {
    <span class="hljs-keyword">val</span> child = launch {
        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"Child failed"</span>)
    }
    
    <span class="hljs-comment">// å¿…é¡»æ˜¾å¼å¤„ç†å­åç¨‹å¼‚å¸¸</span>
    <span class="hljs-keyword">try</span> {
        child.join()
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        println(<span class="hljs-string">"Caught child exception: <span class="hljs-subst">${e.message}</span>"</span>)
    }
}
</code></pre>
<h4 data-id="heading-29">2. ä¸ CoroutineExceptionHandler é…åˆ</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> handler = CoroutineExceptionHandler { _, exception -&gt;
    println(<span class="hljs-string">"Uncaught exception: <span class="hljs-subst">${exception.message}</span>"</span>)
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    <span class="hljs-keyword">val</span> supervisor = SupervisorJob()
    <span class="hljs-keyword">val</span> scope = CoroutineScope(Dispatchers.Default + supervisor + handler)
    
    scope.launch {
        <span class="hljs-keyword">throw</span> Exception(<span class="hljs-string">"This will be caught by handler"</span>)
    }
    
    scope.launch {
        delay(<span class="hljs-number">1000</span>)
        println(<span class="hljs-string">"I'm still running!"</span>)
    }
    
    delay(<span class="hljs-number">2000</span>)
    supervisor.cancel()
}
</code></pre>
<h4 data-id="heading-30">3. é™åˆ¶å¹¶å‘æ•°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> kotlinx.coroutines.sync.Semaphore

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">limitedParallelTasks</span><span class="hljs-params">(tasks: <span class="hljs-type">List</span>&lt;<span class="hljs-type">suspend</span> () -&gt; <span class="hljs-type">Unit</span>&gt;, maxConcurrent: <span class="hljs-type">Int</span> = <span class="hljs-number">3</span>)</span></span> {
    <span class="hljs-keyword">val</span> semaphore = Semaphore(maxConcurrent)
    
    supervisorScope {
        tasks.map { task -&gt;
            launch {
                semaphore.withPermit {
                    task()
                }
            }
        }.forEach { it.join() }
    }
}
</code></pre>
<h2 data-id="heading-31">ä¹ã€SupervisorJobæ€»ç»“</h2>
<p><strong>SupervisorJob çš„ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ol>
<li>éœ€è¦ç‹¬ç«‹æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„åœºæ™¯</li>
<li>ä¸€ä¸ªä»»åŠ¡çš„å¤±è´¥ä¸åº”å½±å“å…¶ä»–ä»»åŠ¡</li>
<li>UI åº”ç”¨ä¸­å¹¶è¡ŒåŠ è½½å¤šä¸ªæ•°æ®æº</li>
<li>æ‰¹é‡å¤„ç†ä»»åŠ¡ï¼Œå…è®¸éƒ¨åˆ†å¤±è´¥</li>
<li>å¾®æœåŠ¡æ¶æ„ä¸­çš„å¥åº·æ£€æŸ¥ã€ç›‘æ§ç­‰</li>
</ol>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨Â <code>supervisorScope</code>Â æˆ–Â <code>SupervisorJob()</code>Â åˆ›å»º</li>
<li>å­åç¨‹å¼‚å¸¸éœ€è¦æ˜¾å¼å¤„ç†</li>
<li>é…åˆÂ <code>CoroutineExceptionHandler</code>Â è¿›è¡Œå…¨å±€é”™è¯¯å¤„ç†</li>
<li>æ³¨æ„èµ„æºæ¸…ç†å’Œè¶…æ—¶æ§åˆ¶</li>
</ul>
<p>é€šè¿‡ SupervisorJobï¼Œä½ å¯ä»¥æ„å»ºæ›´å¥å£®ã€å®¹é”™æ€§æ›´å¥½çš„å¹¶å‘åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ä¸ºä½•ä¸ä¸€è‡´ï¼Ÿé¡¹ç›®å®æˆ˜ä¸­çš„å†³ç­–é€»è¾‘ä¸è¸©å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578724773993824282</link>    <guid>https://juejin.cn/post/7578724773993824282</guid>    <pubDate>2025-12-02T01:21:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578724773993824282" data-draft-id="7578714735308423194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ä¸ºä½•ä¸ä¸€è‡´ï¼Ÿé¡¹ç›®å®æˆ˜ä¸­çš„å†³ç­–é€»è¾‘ä¸è¸©å‘æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-12-02T01:21:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ä¸ºä½•ä¸ä¸€è‡´ï¼Ÿé¡¹ç›®å®æˆ˜ä¸­çš„å†³ç­–é€»è¾‘ä¸è¸©å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T01:21:10.000Z" title="Tue Dec 02 2025 01:21:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥ä¸ºä½•ä¸ä¸€è‡´ï¼Ÿé¡¹ç›®å®æˆ˜ä¸­çš„å†³ç­–é€»è¾‘ä¸è¸©å‘æŒ‡å—</h2>
<p>åœ¨åç«¯é¡¹ç›®ä¸­ï¼Œçº¿ç¨‹æ± æ˜¯å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„æ ¸å¿ƒç»„ä»¶ â€”â€” ä»è®¢å•æ”¯ä»˜ã€åº“å­˜æ‰£å‡åˆ°æ—¥å¿—è®°å½•ã€æ•°æ®ç»Ÿè®¡ï¼Œå‡ ä¹éƒ½ä¾èµ–çº¿ç¨‹æ± æå‡å¹¶å‘èƒ½åŠ›ã€‚ä½†å¾ˆå¤šå¼€å‘è€…ä¼šå¿½ç•¥ä¸€ä¸ªå…³é”®ç»†èŠ‚ï¼š<strong>ä¸åŒä¸šåŠ¡åœºæ™¯çš„çº¿ç¨‹æ± ï¼Œæ‹’ç»ç­–ç•¥å¿…é¡»å·®å¼‚åŒ–é€‰æ‹©</strong>ã€‚</p>
<p>æˆ‘æ›¾åœ¨ç”µå•†é¡¹ç›®ä¸­è¸©è¿‡å…¸å‹çš„å‘ï¼šç”¨é»˜è®¤çš„AbortPolicyï¼ˆç›´æ¥æŠ›å¼‚å¸¸ï¼‰å¤„ç†è®¢å•æ”¯ä»˜çº¿ç¨‹æ± ï¼Œå¯¼è‡´å¤§ä¿ƒé«˜å³°æœŸå¤§é‡ â€œæ”¯ä»˜æˆåŠŸä½†è®¢å•æœªå¤„ç†â€ çš„å¼‚å¸¸ï¼›åˆæ›¾ä¸ºæ—¥å¿—çº¿ç¨‹æ± é€‰äº†CallerRunsPolicyï¼ˆè°ƒç”¨æ–¹æ‰§è¡Œï¼‰ï¼Œç»“æœæ—¥å¿—é˜Ÿåˆ—æ»¡æ—¶é˜»å¡ç”¨æˆ·æµè§ˆå•†å“çš„ä¸»çº¿ç¨‹ï¼Œé¡µé¢å¡é¡¿æŠ•è¯‰æ¿€å¢ã€‚</p>
<p>æœ¬æ–‡ç»“åˆç”µå•†é¡¹ç›®ä¸­ä¸¤ä¸ªæ ¸å¿ƒçº¿ç¨‹æ± çš„å®æˆ˜ç»éªŒï¼Œæ‹†è§£ â€œæ‹’ç»ç­–ç•¥ä¸ä¸€è‡´â€ çš„åº•å±‚é€»è¾‘ï¼Œå¸®ä½ æŒæ¡ â€œæŒ‰ä¸šåŠ¡é€‰ç­–ç•¥â€ çš„æ–¹æ³•è®ºï¼Œè€Œéç›²ç›®å¥—ç”¨é»˜è®¤é…ç½®ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆæ˜ç¡®ï¼šçº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„åŸºç¡€è®¤çŸ¥</h3>
<p>åœ¨è®²é¡¹ç›®å®æˆ˜å‰ï¼Œå…ˆå¿«é€Ÿå›é¡¾çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„æ ¸å¿ƒç±»å‹ â€”â€”JDK é»˜è®¤æä¾› 4 ç§ç­–ç•¥ï¼Œå¤–åŠ è‡ªå®šä¹‰ç­–ç•¥ï¼Œä¸åŒç­–ç•¥çš„ â€œä»»åŠ¡å¤„ç†é€»è¾‘â€ å’Œ â€œä¸šåŠ¡å½±å“â€ å·®å¼‚æå¤§ï¼š</p>















































<table><thead><tr><th>æ‹’ç»ç­–ç•¥ç±»å‹</th><th>æ ¸å¿ƒé€»è¾‘</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>AbortPolicyï¼ˆé»˜è®¤ï¼‰</td><td>ç›´æ¥æŠ›å‡ºRejectedExecutionException</td><td>å¿«é€Ÿå¤±è´¥ï¼Œæé†’å¼€å‘è€…æœ‰é—®é¢˜</td><td>ä»»åŠ¡ç›´æ¥ä¸¢å¤±ï¼Œå¯èƒ½å¯¼è‡´ä¸šåŠ¡ä¸­æ–­</td><td>éæ ¸å¿ƒä»»åŠ¡ï¼Œä¸”éœ€æ„ŸçŸ¥é˜Ÿåˆ—æ»¡çš„åœºæ™¯</td></tr><tr><td>CallerRunsPolicy</td><td>ç”±æäº¤ä»»åŠ¡çš„è°ƒç”¨æ–¹ï¼ˆå¦‚ä¸»çº¿ç¨‹ï¼‰æ‰§è¡Œä»»åŠ¡</td><td>ä»»åŠ¡ä¸ä¸¢å¤±ï¼Œé¿å…ä¸šåŠ¡ä¸­æ–­</td><td>å¯èƒ½é˜»å¡è°ƒç”¨æ–¹ï¼Œå½±å“ä¸»çº¿ç¨‹æ€§èƒ½</td><td>æ ¸å¿ƒä»»åŠ¡ï¼Œä¸”ä»»åŠ¡æ‰§è¡Œè€—æ—¶çŸ­çš„åœºæ™¯</td></tr><tr><td>DiscardPolicy</td><td>é»˜é»˜ä¸¢å¼ƒæ— æ³•å¤„ç†çš„ä»»åŠ¡ï¼Œä¸æŠ›å¼‚å¸¸</td><td>ä¸å½±å“è°ƒç”¨æ–¹ï¼Œæ€§èƒ½æ— æŸè€—</td><td>ä»»åŠ¡ä¸¢å¤±ï¼Œæ— æ„ŸçŸ¥éš¾æ’æŸ¥</td><td>éæ ¸å¿ƒä»»åŠ¡ï¼Œä»»åŠ¡ä¸¢å¤±å¯å®¹å¿çš„åœºæ™¯</td></tr><tr><td>DiscardOldestPolicy</td><td>ä¸¢å¼ƒé˜Ÿåˆ—ä¸­æœ€æ—§çš„ä»»åŠ¡ï¼ˆé˜Ÿåˆ—å¤´éƒ¨ï¼‰ï¼Œå†å°è¯•æäº¤å½“å‰ä»»åŠ¡</td><td>å°½é‡å¤„ç†æ–°ä»»åŠ¡ï¼Œå‡å°‘æœ€æ–°ä»»åŠ¡ä¸¢å¤±</td><td>å¯èƒ½ä¸¢å¤±é‡è¦æ—§ä»»åŠ¡</td><td>ä»»åŠ¡æœ‰ â€œæ—¶æ•ˆæ€§â€ï¼Œæ–°ä»»åŠ¡æ¯”æ—§ä»»åŠ¡é‡è¦çš„åœºæ™¯</td></tr><tr><td>è‡ªå®šä¹‰ç­–ç•¥</td><td>æŒ‰ä¸šåŠ¡é€»è¾‘è‡ªå®šä¹‰ï¼ˆå¦‚æŒä¹…åŒ–ä»»åŠ¡åˆ° DB/MQï¼‰</td><td>å®Œå…¨é€‚é…ä¸šåŠ¡éœ€æ±‚</td><td>å¼€å‘æˆæœ¬é«˜ï¼Œéœ€è€ƒè™‘å¼‚å¸¸å¤„ç†</td><td>æ ¸å¿ƒä»»åŠ¡ï¼Œç»å¯¹ä¸èƒ½ä¸¢å¤±çš„åœºæ™¯ï¼ˆå¦‚æ”¯ä»˜è®¢å•ï¼‰</td></tr></tbody></table>
<p><strong>å…³é”®å‰æ</strong>ï¼šçº¿ç¨‹æ± è§¦å‘æ‹’ç»ç­–ç•¥çš„æ¡ä»¶æ˜¯ â€œæ ¸å¿ƒçº¿ç¨‹æ»¡ + é˜Ÿåˆ—æ»¡ + æœ€å¤§çº¿ç¨‹æ»¡â€ï¼Œæ‰€ä»¥ç­–ç•¥é€‰æ‹©å¿…é¡»ç»“åˆ â€œçº¿ç¨‹æ± å‚æ•°é…ç½®â€ ä¸ â€œä¸šåŠ¡éœ€æ±‚â€ï¼Œä¸èƒ½å­¤ç«‹å†³ç­–ã€‚</p>
<h3 data-id="heading-2">äºŒã€é¡¹ç›®å®æˆ˜ï¼šä¸¤ä¸ªçº¿ç¨‹æ± çš„æ‹’ç»ç­–ç•¥å·®å¼‚ä¸å†³ç­–é€»è¾‘</h3>
<p>æˆ‘è´Ÿè´£çš„ç”µå•†é¡¹ç›®ä¸­ï¼Œæœ‰ä¸¤ä¸ªé«˜é¢‘ä½¿ç”¨çš„çº¿ç¨‹æ± ï¼š<strong>è®¢å•æ”¯ä»˜å¤„ç†çº¿ç¨‹æ± </strong>ï¼ˆæ ¸å¿ƒä¸šåŠ¡ï¼‰å’Œ<strong>ç”¨æˆ·è¡Œä¸ºæ—¥å¿—çº¿ç¨‹æ± </strong>ï¼ˆéæ ¸å¿ƒä¸šåŠ¡ï¼‰ã€‚ä¸¤è€…çš„æ‹’ç»ç­–ç•¥å®Œå…¨ä¸åŒï¼ŒèƒŒåæ˜¯ â€œä¸šåŠ¡ä¼˜å…ˆçº§ã€ä»»åŠ¡å®¹å¿åº¦ã€è°ƒç”¨æ–¹å½±å“â€ çš„ä¸‰é‡è€ƒé‡ã€‚</p>
<h4 data-id="heading-3">åœºæ™¯ 1ï¼šè®¢å•æ”¯ä»˜å¤„ç†çº¿ç¨‹æ±  â€”â€” é€‰ CallerRunsPolicyï¼ˆè°ƒç”¨æ–¹æ‰§è¡Œï¼‰</h4>
<h5 data-id="heading-4">1. ä¸šåŠ¡èƒŒæ™¯ä¸æ ¸å¿ƒè¯‰æ±‚</h5>
<ul>
<li><strong>ä»»åŠ¡å†…å®¹</strong>ï¼šç”¨æˆ·æ”¯ä»˜æˆåŠŸåï¼Œå¼‚æ­¥å¤„ç†è®¢å•çŠ¶æ€æ›´æ–°ã€åº“å­˜æ‰£å‡ã€ç§¯åˆ†å¢åŠ ï¼ˆ3 ä¸ªæ­¥éª¤ï¼Œå•æ¬¡ä»»åŠ¡è€—æ—¶çº¦ 50msï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ ¸å¿ƒè¯‰æ±‚</strong>ï¼šä»»åŠ¡<strong>ç»å¯¹ä¸èƒ½ä¸¢å¤±</strong>ï¼ˆä¸¢å¤±ä¼šå¯¼è‡´ â€œç”¨æˆ·å·²ä»˜æ¬¾ä½†è®¢å•æœªç”Ÿæ•ˆâ€ï¼Œå¼•å‘èµ„æŸå’Œç”¨æˆ·æŠ•è¯‰ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>è°ƒç”¨æ–¹</strong>ï¼šæ”¯ä»˜å›è°ƒæ¥å£ï¼ˆåŒæ­¥æ¥æ”¶ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°çš„é€šçŸ¥ï¼Œå¦‚å¾®ä¿¡æ”¯ä»˜å›è°ƒï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ€§èƒ½è¦æ±‚</strong>ï¼šæ­£å¸¸æƒ…å†µä¸‹å“åº”æ—¶é—´ &lt; 100msï¼Œé«˜å³°æœŸï¼ˆå¦‚åŒ 11ï¼‰å¯æ¥å—çŸ­æš‚å»¶è¿Ÿï¼Œä½†ä¸èƒ½æŠ›å¼‚å¸¸ã€‚</li>
</ul>
<h5 data-id="heading-5">2. çº¿ç¨‹æ± å‚æ•°é…ç½®</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@EnableAsync</span>
public class ThreadPoolConfig {
    <span class="hljs-comment">// è®¢å•æ”¯ä»˜å¤„ç†çº¿ç¨‹æ± </span>
    <span class="hljs-variable">@Bean</span>(<span class="hljs-string">"orderPayExecutor"</span>)
    public Executor <span class="hljs-built_in">orderPayExecutor</span>() {
        <span class="hljs-selector-tag">ThreadPoolTaskExecutor</span> <span class="hljs-selector-tag">executor</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">ThreadPoolTaskExecutor</span>();
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setCorePoolSize</span>(<span class="hljs-number">20</span>);          <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šæ—¥å¸¸å³°å€¼è¶³å¤Ÿå¤„ç†</span>
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setMaxPoolSize</span>(<span class="hljs-number">50</span>);          <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°ï¼šé«˜å³°æœŸæ‰©å®¹ä¸Šé™</span>
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setQueueCapacity</span>(<span class="hljs-number">100</span>);        <span class="hljs-comment">// é˜Ÿåˆ—å®¹é‡ï¼šæ•…æ„è®¾å°ï¼Œé¿å…ä»»åŠ¡å †ç§¯è¿‡å¤šå¯¼è‡´å»¶è¿Ÿ</span>
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setKeepAliveSeconds</span>(<span class="hljs-number">60</span>);      <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼š60ç§’</span>
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setThreadNamePrefix</span>(<span class="hljs-string">"OrderPay-"</span>); <span class="hljs-comment">// çº¿ç¨‹åå‰ç¼€ï¼šä¾¿äºæ—¥å¿—æ’æŸ¥</span>
        <span class="hljs-comment">// æ‹’ç»ç­–ç•¥ï¼šCallerRunsPolicyï¼ˆè°ƒç”¨æ–¹æ‰§è¡Œï¼‰</span>
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.setRejectedExecutionHandler</span>(new ThreadPoolExecutor.<span class="hljs-built_in">CallerRunsPolicy</span>());
        <span class="hljs-selector-tag">executor</span><span class="hljs-selector-class">.initialize</span>();
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">executor</span>;
    }
}
</code></pre>
<h5 data-id="heading-6">3. ä¸ºä»€ä¹ˆé€‰ CallerRunsPolicyï¼Ÿ</h5>
<p>å†³ç­–è¿‡ç¨‹ä¸­æ’é™¤äº†å…¶ä»–ç­–ç•¥ï¼Œæ ¸å¿ƒåŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>æ’é™¤ AbortPolicy</strong>ï¼šè‹¥é€‰é»˜è®¤çš„ AbortPolicyï¼Œé«˜å³°æœŸé˜Ÿåˆ—æ»¡æ—¶ä¼šç›´æ¥æŠ›RejectedExecutionExceptionï¼Œå¯¼è‡´æ”¯ä»˜å›è°ƒæ¥å£è¿”å›å¤±è´¥ï¼Œç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ä¼šé‡å¤å›è°ƒï¼Œå¯èƒ½å¼•å‘ â€œé‡å¤å¤„ç†è®¢å•â€ï¼ˆå¦‚é‡å¤æ‰£å‡åº“å­˜ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ’é™¤ DiscardPolicy/DiscardOldestPolicy</strong>ï¼šè¿™ä¸¤ç§ç­–ç•¥éƒ½ä¼šä¸¢å¤±ä»»åŠ¡ï¼Œè€Œè®¢å•æ”¯ä»˜ä»»åŠ¡ç»å¯¹ä¸èƒ½ä¸¢ï¼Œä¸¢å•æ„å‘³ç€èµ„æŸï¼Œé£é™©ä¸å¯æ¥å—ï¼›</li>
</ul>

<ul>
<li><strong>é€‰æ‹© CallerRunsPolicy çš„æ ¸å¿ƒé€»è¾‘</strong>ï¼šå½“çº¿ç¨‹æ± æ»¡æ—¶ï¼Œè®© â€œæ”¯ä»˜å›è°ƒæ¥å£çš„çº¿ç¨‹â€ï¼ˆè°ƒç”¨æ–¹ï¼‰äº²è‡ªæ‰§è¡Œä»»åŠ¡ â€”â€” è™½ç„¶ä¼šå¯¼è‡´å›è°ƒæ¥å£å“åº”æ—¶é—´ä» 50ms å¢è‡³ 100msï¼Œä½†èƒ½ 100% ä¿è¯ä»»åŠ¡ä¸ä¸¢å¤±ï¼Œä¸”æ— éœ€é¢å¤–å¼€å‘æˆæœ¬ï¼›</li>
</ul>

<ul>
<li><strong>é…åˆå°é˜Ÿåˆ—å®¹é‡</strong>ï¼šé˜Ÿåˆ—å®¹é‡è®¾ä¸º 100ï¼ˆè€Œé 1000ï¼‰ï¼Œç›®çš„æ˜¯ â€œå°½æ—©è§¦å‘æ‹’ç»ç­–ç•¥â€â€”â€” é¿å…é˜Ÿåˆ—å †ç§¯è¿‡å¤šä»»åŠ¡å¯¼è‡´å»¶è¿Ÿï¼ˆæ¯”å¦‚å †ç§¯ 1000 ä¸ªä»»åŠ¡ï¼Œæ¯ä¸ªè€—æ—¶ 50msï¼Œæœ€åä¸€ä¸ªä»»åŠ¡è¦ç­‰ 50 ç§’ï¼‰ï¼Œç”¨ CallerRunsPolicy æ‰¿æ‹…éƒ¨åˆ†å‹åŠ›ï¼Œå¹³è¡¡å»¶è¿Ÿä¸å¯é æ€§ã€‚</li>
</ul>
<h5 data-id="heading-7">4. å®æˆ˜æ•ˆæœ</h5>
<p>åŒ 11 é«˜å³°æœŸï¼Œè¯¥çº¿ç¨‹æ±  QPS ä»æ—¥å¸¸ 500 é£™å‡è‡³ 2000ï¼Œè§¦å‘æ‹’ç»ç­–ç•¥åï¼š</p>
<ul>
<li>ä»»åŠ¡ä¸¢å¤±ç‡ï¼š0%ï¼ˆæ— ä¸€ç¬”è®¢å•å› æ‹’ç»ç­–ç•¥ä¸¢å¤±ï¼‰ï¼›</li>
</ul>

<ul>
<li>å›è°ƒæ¥å£å“åº”æ—¶é—´ï¼šä» 50ms å‡è‡³ 120msï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥ï¼Œç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ä¹Ÿæ¥å—è¯¥å»¶è¿Ÿï¼‰ï¼›</li>
</ul>

<ul>
<li>ç³»ç»Ÿç¨³å®šæ€§ï¼šæ— å¼‚å¸¸æ—¥å¿—ï¼Œåº“å­˜ä¸è®¢å•çŠ¶æ€å®Œå…¨ä¸€è‡´ã€‚</li>
</ul>
<h4 data-id="heading-8">åœºæ™¯ 2ï¼šç”¨æˆ·è¡Œä¸ºæ—¥å¿—çº¿ç¨‹æ±  â€”â€” é€‰ DiscardOldestPolicyï¼ˆä¸¢å¼ƒæœ€æ—§ä»»åŠ¡ï¼‰</h4>
<h5 data-id="heading-9">1. ä¸šåŠ¡èƒŒæ™¯ä¸æ ¸å¿ƒè¯‰æ±‚</h5>
<ul>
<li><strong>ä»»åŠ¡å†…å®¹</strong>ï¼šç”¨æˆ·æµè§ˆå•†å“ã€ç‚¹å‡»æŒ‰é’®ã€åŠ å…¥è´­ç‰©è½¦ç­‰è¡Œä¸ºçš„æ—¥å¿—å¼‚æ­¥å†™å…¥ Elasticsearchï¼ˆå•æ¬¡ä»»åŠ¡è€—æ—¶çº¦ 10msï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ ¸å¿ƒè¯‰æ±‚</strong>ï¼šä»»åŠ¡<strong>å¯å®¹å¿éƒ¨åˆ†ä¸¢å¤±</strong>ï¼ˆå°‘å‡ æ¡æµè§ˆæ—¥å¿—ä¸å½±å“æ ¸å¿ƒä¸šåŠ¡ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´ç”¨æˆ·æŠ•è¯‰ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>è°ƒç”¨æ–¹</strong>ï¼šç”¨æˆ·å‰ç«¯æ“ä½œå¯¹åº”çš„æ¥å£ï¼ˆå¦‚å•†å“è¯¦æƒ…æ¥å£ã€è´­ç‰©è½¦æ¥å£ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>æ€§èƒ½è¦æ±‚</strong>ï¼šç»å¯¹ä¸èƒ½é˜»å¡è°ƒç”¨æ–¹ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡» â€œåŠ å…¥è´­ç‰©è½¦â€ï¼Œå¿…é¡»ç«‹å³è¿”å›æˆåŠŸï¼Œä¸èƒ½å› æ—¥å¿—å†™å…¥å»¶è¿Ÿå¯¼è‡´é¡µé¢å¡é¡¿ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-10">2. çº¿ç¨‹æ± å‚æ•°é…ç½®</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Configuration</span>
public class ThreadPoolConfig {
    <span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºæ—¥å¿—çº¿ç¨‹æ± </span>
    <span class="hljs-keyword">@Bean</span>(<span class="hljs-string">"userBehaviorLogExecutor"</span>)
    public Executor userBehaviorLogExecutor() {
        ThreadPoolTaskExecutor executor = new <span class="hljs-built_in">ThreadPoolTaskExecutor</span>();
        executor<span class="hljs-selector-class">.setCorePoolSize</span>(<span class="hljs-number">10</span>);          <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼šæ—¥å¸¸è¶³å¤Ÿ</span>
        executor<span class="hljs-selector-class">.setMaxPoolSize</span>(<span class="hljs-number">20</span>);          <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°ï¼šé«˜å³°æœŸæ‰©å®¹</span>
        executor<span class="hljs-selector-class">.setQueueCapacity</span>(<span class="hljs-number">1000</span>);       <span class="hljs-comment">// é˜Ÿåˆ—å®¹é‡ï¼šè®¾å¤§ï¼Œå°½é‡ç¼“å­˜ä»»åŠ¡</span>
        executor<span class="hljs-selector-class">.setKeepAliveSeconds</span>(<span class="hljs-number">30</span>);      <span class="hljs-comment">// ç©ºé—²çº¿ç¨‹å­˜æ´»æ—¶é—´ï¼š30ç§’</span>
        executor<span class="hljs-selector-class">.setThreadNamePrefix</span>("UserLog-"); <span class="hljs-comment">// çº¿ç¨‹åå‰ç¼€</span>
        <span class="hljs-comment">// æ‹’ç»ç­–ç•¥ï¼šDiscardOldestPolicyï¼ˆä¸¢å¼ƒé˜Ÿåˆ—æœ€æ—§ä»»åŠ¡ï¼Œå°è¯•æäº¤å½“å‰ä»»åŠ¡ï¼‰</span>
        executor<span class="hljs-selector-class">.setRejectedExecutionHandler</span>(new ThreadPoolExecutor.DiscardOldestPolicy());
        executor<span class="hljs-selector-class">.initialize</span>();
        return executor;
    }
}
</code></pre>
<h5 data-id="heading-11">3. ä¸ºä»€ä¹ˆé€‰ DiscardOldestPolicyï¼Ÿ</h5>
<p>è¿™æ˜¯è¸©å‘åä¼˜åŒ–çš„ç»“æœï¼Œæœ€åˆé€‰äº†CallerRunsPolicyï¼Œå¯¼è‡´ä¸¥é‡é—®é¢˜ï¼š</p>
<ul>
<li><strong>æœ€åˆçš„å‘</strong>ï¼šä¸Šçº¿åˆæœŸç”¨ CallerRunsPolicyï¼Œå¤§ä¿ƒæœŸé—´ç”¨æˆ·æµè§ˆé‡æ¿€å¢ï¼Œæ—¥å¿—é˜Ÿåˆ—æ»¡åï¼Œè°ƒç”¨æ–¹ï¼ˆå•†å“è¯¦æƒ…æ¥å£çº¿ç¨‹ï¼‰è¢«è¿«æ‰§è¡Œæ—¥å¿—å†™å…¥ä»»åŠ¡ â€”â€” å•†å“è¯¦æƒ…æ¥å£å“åº”æ—¶é—´ä» 30ms é£™å‡è‡³ 200msï¼Œç”¨æˆ·åé¦ˆ â€œç‚¹å‡»å•†å“åé¡µé¢åŠå¤©åŠ è½½ä¸å‡ºæ¥â€ï¼›</li>
</ul>

<ul>
<li><strong>æ’é™¤ CallerRunsPolicy</strong>ï¼šæ ¸å¿ƒåŸå› æ˜¯ â€œæ—¥å¿—æ˜¯éæ ¸å¿ƒä»»åŠ¡ï¼Œä¸èƒ½è®©å®ƒé˜»å¡æ ¸å¿ƒä¸šåŠ¡çš„è°ƒç”¨æ–¹â€â€”â€” ç”¨æˆ·æµè§ˆå•†å“æ˜¯æ ¸å¿ƒä½“éªŒï¼Œæ¯”æ—¥å¿—é‡è¦å¾—å¤šï¼›</li>
</ul>

<ul>
<li><strong>æ’é™¤ AbortPolicy</strong>ï¼šæŠ›å¼‚å¸¸ä¼šå¯¼è‡´æ¥å£è¿”å›é”™è¯¯ï¼Œè™½ç„¶å¯ä»¥æ•è·å¼‚å¸¸ï¼Œä½†æ—¥å¿—ä»»åŠ¡æ²¡å¿…è¦è®©æ¥å£æ„ŸçŸ¥å¤±è´¥ï¼›</li>
</ul>

<ul>
<li><strong>æ’é™¤ DiscardPolicy</strong>ï¼šDiscardPolicy ä¼šä¸¢å¼ƒå½“å‰ä»»åŠ¡ï¼Œè€Œæ—¥å¿—æœ‰ â€œæ—¶æ•ˆæ€§â€â€”â€” ç”¨æˆ·æœ€æ–°çš„ç‚¹å‡»è¡Œä¸ºæ¯” 10 ç§’å‰çš„æµè§ˆè¡Œä¸ºæ›´æœ‰åˆ†æä»·å€¼ï¼Œä¸¢å¼ƒæ—§ä»»åŠ¡æ¯”ä¸¢å¼ƒæ–°ä»»åŠ¡æ›´åˆç†ï¼›</li>
</ul>

<ul>
<li><strong>é€‰æ‹© DiscardOldestPolicy çš„æ ¸å¿ƒé€»è¾‘</strong>ï¼šé˜Ÿåˆ—æ»¡æ—¶ï¼Œä¸¢å¼ƒæœ€æ—©è¿›å…¥é˜Ÿåˆ—çš„æ—§æ—¥å¿—ï¼ˆæ¯”å¦‚ 10 ç§’å‰çš„æµè§ˆè®°å½•ï¼‰ï¼Œå°è¯•æäº¤å½“å‰çš„æ–°æ—¥å¿— â€”â€” æ—¢ä¿è¯äº† â€œæœ€æ–°æ—¥å¿—å°½é‡è¢«å¤„ç†â€ï¼Œåˆä¸ä¼šé˜»å¡è°ƒç”¨æ–¹ï¼Œæ€§èƒ½æ— æŸè€—ï¼›</li>
</ul>

<ul>
<li><strong>é…åˆå¤§é˜Ÿåˆ—å®¹é‡</strong>ï¼šé˜Ÿåˆ—å®¹é‡è®¾ä¸º 1000ï¼Œç›®çš„æ˜¯ â€œå°½é‡ç¼“å­˜æ—¥å¿—ä»»åŠ¡â€â€”â€” åªæœ‰åœ¨æç«¯é«˜å³°æœŸï¼ˆå¦‚ç§’æ€å¼€å§‹æ—¶ç”¨æˆ·é›†ä¸­æ¶Œå…¥ï¼‰æ‰ä¼šè§¦å‘æ‹’ç»ç­–ç•¥ï¼Œå‡å°‘ä»»åŠ¡ä¸¢å¤±é‡ã€‚</li>
</ul>
<h5 data-id="heading-12">4. å®æˆ˜æ•ˆæœ</h5>
<p>ä¼˜åŒ–ååŒ 11 é«˜å³°æœŸï¼š</p>
<ul>
<li>æ—¥å¿—ä¸¢å¤±ç‡ï¼šçº¦ 2%ï¼ˆä»…æç«¯å³°å€¼æ—¶ä¸¢å¤±å°‘é‡æ—§æ—¥å¿—ï¼Œä¸å½±å“æ•°æ®åˆ†æï¼‰ï¼›</li>
</ul>

<ul>
<li>è°ƒç”¨æ–¹å“åº”æ—¶é—´ï¼šç¨³å®šåœ¨ 30ms ä»¥å†…ï¼ˆç”¨æˆ·æ— æ„ŸçŸ¥å¡é¡¿ï¼‰ï¼›</li>
</ul>

<ul>
<li>ç³»ç»Ÿç¨³å®šæ€§ï¼šæ—¥å¿—çº¿ç¨‹æ± æ»¡æ—¶ï¼Œæ— ä»»ä½•æ ¸å¿ƒä¸šåŠ¡å¼‚å¸¸ã€‚</li>
</ul>
<h3 data-id="heading-13">ä¸‰ã€æ‹’ç»ç­–ç•¥é€‰æ‹©çš„åº•å±‚æ–¹æ³•è®ºï¼š3 ä¸ªæ ¸å¿ƒç»´åº¦</h3>
<p>é¡¹ç›®ä¸­ä¸¤ä¸ªçº¿ç¨‹æ± çš„ç­–ç•¥å·®å¼‚ï¼Œæœ¬è´¨æ˜¯ â€œä¸šåŠ¡å±æ€§å†³å®šæŠ€æœ¯é€‰å‹â€ã€‚æ€»ç»“å‡º 3 ä¸ªç»´åº¦çš„å†³ç­–æ¡†æ¶ï¼Œå¸®ä½ å¿«é€ŸåŒ¹é…é€‚åˆçš„æ‹’ç»ç­–ç•¥ï¼š</p>
<h4 data-id="heading-14">ç»´åº¦ 1ï¼šä¸šåŠ¡ä¼˜å…ˆçº§ â€”â€” æ ¸å¿ƒä»»åŠ¡ vs éæ ¸å¿ƒä»»åŠ¡</h4>
<p>è¿™æ˜¯é¦–è¦ç»´åº¦ï¼Œç›´æ¥å†³å®š â€œæ˜¯å¦èƒ½å®¹å¿ä»»åŠ¡ä¸¢å¤±â€ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒä»»åŠ¡</strong>ï¼ˆå¦‚è®¢å•ã€æ”¯ä»˜ã€åº“å­˜ï¼‰ï¼šç»å¯¹ä¸èƒ½ä¸¢å¤±ï¼Œä¼˜å…ˆé€‰CallerRunsPolicyæˆ–è‡ªå®šä¹‰ç­–ç•¥ï¼ˆå¦‚æŒä¹…åŒ–åˆ° DB/MQï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>éæ ¸å¿ƒä»»åŠ¡</strong>ï¼ˆå¦‚æ—¥å¿—ã€ç»Ÿè®¡ã€é€šçŸ¥ï¼‰ï¼šå¯å®¹å¿ä¸¢å¤±ï¼Œä¼˜å…ˆé€‰DiscardPolicyæˆ–DiscardOldestPolicyã€‚</li>
</ul>
<h4 data-id="heading-15">ç»´åº¦ 2ï¼šä»»åŠ¡å®¹å¿åº¦ â€”â€” ä¸å¯ä¸¢ vs å¯ä¸¢ã€æ—¶æ•ˆæ€§</h4>
<ul>
<li><strong>ä¸å¯ä¸¢ + æ— æ—¶æ•ˆæ€§</strong>ï¼šé€‰CallerRunsPolicyï¼ˆå¦‚è®¢å•å¤„ç†ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>ä¸å¯ä¸¢ + å¼ºæ—¶æ•ˆæ€§</strong>ï¼šé€‰è‡ªå®šä¹‰ç­–ç•¥ï¼ˆå¦‚å°†ä»»åŠ¡å†™å…¥ Redis/MQï¼Œåç»­é‡è¯•ï¼Œé¿å… CallerRunsPolicy é˜»å¡ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>å¯ä¸¢ + æ–°ä»»åŠ¡ä¼˜å…ˆ</strong>ï¼šé€‰DiscardOldestPolicyï¼ˆå¦‚ç”¨æˆ·è¡Œä¸ºæ—¥å¿—ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>å¯ä¸¢ + æ— ä¼˜å…ˆçº§</strong>ï¼šé€‰DiscardPolicyï¼ˆå¦‚éæ ¸å¿ƒæ•°æ®ç»Ÿè®¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-16">ç»´åº¦ 3ï¼šè°ƒç”¨æ–¹å½±å“ â€”â€” æ˜¯å¦å¯é˜»å¡</h4>
<ul>
<li><strong>è°ƒç”¨æ–¹æ˜¯æ ¸å¿ƒæ¥å£</strong>ï¼ˆå¦‚å•†å“è¯¦æƒ…ã€æ”¯ä»˜å›è°ƒï¼‰ï¼šç»å¯¹ä¸èƒ½é˜»å¡ï¼Œéæ ¸å¿ƒä»»åŠ¡é€‰Discard*ç­–ç•¥ï¼Œæ ¸å¿ƒä»»åŠ¡é€‰CallerRunsPolicyï¼ˆä½†éœ€æ§åˆ¶ä»»åŠ¡è€—æ—¶ï¼‰ï¼›</li>
</ul>

<ul>
<li><strong>è°ƒç”¨æ–¹æ˜¯åå°ä»»åŠ¡</strong>ï¼ˆå¦‚å®šæ—¶ä»»åŠ¡ï¼‰ï¼šå¯é˜»å¡ï¼Œé€‰CallerRunsPolicyï¼ˆåå°ä»»åŠ¡æ— ç”¨æˆ·æ„ŸçŸ¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">å››ã€è¿›é˜¶ï¼šè‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ â€”â€” åº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯</h3>
<p>å½“ JDK é»˜è®¤ç­–ç•¥æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œéœ€è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ã€‚æ¯”å¦‚é¡¹ç›®ä¸­çš„ â€œé€€æ¬¾ä»»åŠ¡çº¿ç¨‹æ± â€ï¼Œè¦æ±‚ â€œä»»åŠ¡ä¸ä¸¢å¤±ã€ä¸é˜»å¡è°ƒç”¨æ–¹ã€å¤±è´¥åé‡è¯•â€ï¼Œæ­¤æ—¶è‡ªå®šä¹‰ç­–ç•¥æ˜¯æœ€ä½³é€‰æ‹©ã€‚</p>
<h4 data-id="heading-18">è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥å®æˆ˜ï¼ˆé€€æ¬¾ä»»åŠ¡ï¼‰</h4>
<h5 data-id="heading-19">1. ä¸šåŠ¡è¯‰æ±‚</h5>
<ul>
<li>é€€æ¬¾ä»»åŠ¡ç»å¯¹ä¸èƒ½ä¸¢ï¼ˆæ¶‰åŠç”¨æˆ·èµ„é‡‘ï¼Œä¸¢å•ä¼šå¼•å‘ä¸¥é‡æŠ•è¯‰ï¼‰ï¼›</li>
</ul>

<ul>
<li>è°ƒç”¨æ–¹æ˜¯é€€æ¬¾æ¥å£ï¼Œä¸èƒ½é˜»å¡ï¼ˆç”¨æˆ·ç”³è¯·é€€æ¬¾åéœ€ç«‹å³è¿”å› â€œå¤„ç†ä¸­â€ï¼‰ï¼›</li>
</ul>

<ul>
<li>å¤±è´¥åéœ€é‡è¯•ï¼ˆçº¿ç¨‹æ± æ»¡æ—¶ï¼Œå°†ä»»åŠ¡å­˜å…¥ Redisï¼Œåç»­å®šæ—¶é‡è¯•ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-20">2. è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ä»£ç </h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// 1. è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RefundRejectedPolicy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">RejectedExecutionHandler</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">REFUND_TASK_KEY</span> = <span class="hljs-string">"refund:task:queue"</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">rejectedExecution</span>(<span class="hljs-params">Runnable r, ThreadPoolExecutor executor</span>) {
        <span class="hljs-comment">// åˆ¤æ–­ä»»åŠ¡æ˜¯å¦ä¸ºé€€æ¬¾ä»»åŠ¡ï¼ˆå¼ºè½¬éªŒè¯ï¼‰</span>
        <span class="hljs-keyword">if</span> (r <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">RefundTask</span>) {
            <span class="hljs-title class_">RefundTask</span> refundTask = (<span class="hljs-title class_">RefundTask</span>) r;
            <span class="hljs-comment">// å°†ä»»åŠ¡IDå­˜å…¥Redisåˆ—è¡¨ï¼ˆåç»­å®šæ—¶ä»»åŠ¡é‡è¯•ï¼‰</span>
            <span class="hljs-title class_">String</span> taskJson = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">toJSONString</span>(refundTask.<span class="hljs-title function_">getRefundId</span>());
            redisTemplate.<span class="hljs-title function_">opsForList</span>().<span class="hljs-title function_">rightPush</span>(<span class="hljs-variable constant_">REFUND_TASK_KEY</span>, taskJson);
            log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"é€€æ¬¾ä»»åŠ¡çº¿ç¨‹æ± æ»¡ï¼Œä»»åŠ¡å­˜å…¥Redisé‡è¯•ï¼Œé€€æ¬¾IDï¼š{}"</span>, refundTask.<span class="hljs-title function_">getRefundId</span>());
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// éé€€æ¬¾ä»»åŠ¡ï¼ŒæŒ‰é»˜è®¤ç­–ç•¥å¤„ç†ï¼ˆæŠ›å¼‚å¸¸ï¼‰</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RejectedExecutionException</span>(<span class="hljs-string">"ä¸æ”¯æŒçš„ä»»åŠ¡ç±»å‹ï¼š"</span> + r.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getName</span>());
        }
    }
}
<span class="hljs-comment">// 2. é€€æ¬¾ä»»åŠ¡çº¿ç¨‹æ± é…ç½®</span>
<span class="hljs-meta">@Bean</span>(<span class="hljs-string">"refundExecutor"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-title class_">Executor</span> <span class="hljs-title function_">refundExecutor</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">ThreadPoolTaskExecutor</span> executor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
    executor.<span class="hljs-title function_">setCorePoolSize</span>(<span class="hljs-number">15</span>);
    executor.<span class="hljs-title function_">setMaxPoolSize</span>(<span class="hljs-number">30</span>);
    executor.<span class="hljs-title function_">setQueueCapacity</span>(<span class="hljs-number">200</span>);
    executor.<span class="hljs-title function_">setThreadNamePrefix</span>(<span class="hljs-string">"Refund-"</span>);
    <span class="hljs-comment">// é…ç½®è‡ªå®šä¹‰æ‹’ç»ç­–ç•¥</span>
    executor.<span class="hljs-title function_">setRejectedExecutionHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RefundRejectedPolicy</span>());
    executor.<span class="hljs-title function_">initialize</span>();
    <span class="hljs-keyword">return</span> executor;
}
<span class="hljs-comment">// 3. å®šæ—¶ä»»åŠ¡é‡è¯•Redisä¸­çš„é€€æ¬¾ä»»åŠ¡</span>
<span class="hljs-meta">@Scheduled</span>(fixedRate = <span class="hljs-number">60000</span>) <span class="hljs-comment">// æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">retryRefundTask</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä»Redisä¸­å–å‡ºæœªå¤„ç†çš„é€€æ¬¾ä»»åŠ¡ID</span>
    <span class="hljs-title class_">String</span> taskJson;
    <span class="hljs-keyword">while</span> ((taskJson = redisTemplate.<span class="hljs-title function_">opsForList</span>().<span class="hljs-title function_">leftPop</span>(<span class="hljs-variable constant_">REFUND_TASK_KEY</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>)) != <span class="hljs-literal">null</span>) {
        <span class="hljs-title class_">Long</span> refundId = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parseObject</span>(taskJson, <span class="hljs-title class_">Long</span>.<span class="hljs-property">class</span>);
        <span class="hljs-comment">// æäº¤ä»»åŠ¡åˆ°çº¿ç¨‹æ± ï¼ˆæ­¤æ—¶çº¿ç¨‹æ± å¯èƒ½å·²ç©ºé—²ï¼‰</span>
        refundExecutor.<span class="hljs-title function_">execute</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RefundTask</span>(refundId));
    }
}
</code></pre>
<h5 data-id="heading-21">3. æ•ˆæœ</h5>
<ul>
<li>ä»»åŠ¡ä¸¢å¤±ç‡ï¼š0%ï¼ˆæ‰€æœ‰é€€æ¬¾ä»»åŠ¡è¦ä¹ˆç«‹å³æ‰§è¡Œï¼Œè¦ä¹ˆå­˜å…¥ Redis é‡è¯•ï¼‰ï¼›</li>
</ul>

<ul>
<li>è°ƒç”¨æ–¹å½±å“ï¼šé€€æ¬¾æ¥å£å“åº”æ—¶é—´ç¨³å®šåœ¨ 80ms ä»¥å†…ï¼Œæ— é˜»å¡ï¼›</li>
</ul>

<ul>
<li>å¼‚å¸¸å¤„ç†ï¼šå³ä½¿çº¿ç¨‹æ± é•¿æœŸæ»¡ï¼Œä»»åŠ¡ä¹Ÿä¼šåœ¨ Redis ä¸­æ’é˜Ÿï¼Œä¸ä¼šä¸¢å¤±ã€‚</li>
</ul>
<h3 data-id="heading-22">äº”ã€å¸¸è§è¸©å‘æ€»ç»“ä¸é¿å‘æŒ‡å—</h3>
<ol>
<li><strong>å‘ 1ï¼šæ‰€æœ‰çº¿ç¨‹æ± ç”¨é»˜è®¤çš„ AbortPolicy</strong></li>
</ol>
<ul>
<li>
<ul>
<li>åæœï¼šæ ¸å¿ƒä»»åŠ¡ï¼ˆå¦‚æ”¯ä»˜ï¼‰ä¼šå› æŠ›å¼‚å¸¸ä¸¢å¤±ï¼Œéæ ¸å¿ƒä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—ï¼‰æŠ›å¼‚å¸¸å½±å“è°ƒç”¨æ–¹ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>é¿å‘ï¼šæŒ‰ä¸šåŠ¡ä¼˜å…ˆçº§åˆ†ç±»ï¼Œæ ¸å¿ƒä»»åŠ¡ç¦ç”¨ AbortPolicyã€‚</li>
</ul>
</li>
</ul>
<ol start="2">
<li><strong>å‘ 2ï¼šéæ ¸å¿ƒä»»åŠ¡ç”¨ CallerRunsPolicy</strong></li>
</ol>
<ul>
<li>
<ul>
<li>åæœï¼šé«˜å³°æœŸé˜»å¡æ ¸å¿ƒæ¥å£ï¼ˆå¦‚æ—¥å¿—é˜»å¡å•†å“è¯¦æƒ…æ¥å£ï¼‰ï¼Œç”¨æˆ·ä½“éªŒå·®ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>é¿å‘ï¼šéæ ¸å¿ƒä»»åŠ¡ä¼˜å…ˆé€‰Discard*ç­–ç•¥ï¼Œé™¤éä»»åŠ¡ç»å¯¹ä¸èƒ½ä¸¢ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>å‘ 3ï¼šçº¿ç¨‹æ± å‚æ•°ä¸æ‹’ç»ç­–ç•¥ä¸åŒ¹é…</strong></li>
</ol>
<ul>
<li>
<ul>
<li>åæœï¼šæ¯”å¦‚æ ¸å¿ƒä»»åŠ¡çº¿ç¨‹æ± é˜Ÿåˆ—è®¾å¤ªå¤§ï¼Œå¯¼è‡´ä»»åŠ¡å †ç§¯å»¶è¿Ÿï¼Œæ‹’ç»ç­–ç•¥æ— æ³•åŠæ—¶è§¦å‘ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>é¿å‘ï¼šæ ¸å¿ƒä»»åŠ¡é˜Ÿåˆ—è®¾å°ï¼ˆå°½æ—©è§¦å‘æ‹’ç»ç­–ç•¥ï¼‰ï¼Œéæ ¸å¿ƒä»»åŠ¡é˜Ÿåˆ—è®¾å¤§ï¼ˆå°½é‡ç¼“å­˜ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>å‘ 4ï¼šè‡ªå®šä¹‰ç­–ç•¥æœªå¤„ç†å¼‚å¸¸</strong></li>
</ol>
<ul>
<li>
<ul>
<li>åæœï¼šæ¯”å¦‚è‡ªå®šä¹‰ç­–ç•¥ä¸­å†™å…¥ DB å¤±è´¥ï¼Œå¯¼è‡´ä»»åŠ¡ä¸¢å¤±ä¸”æ— æ—¥å¿—ï¼›</li>
</ul>
</li>
</ul>

<ul>
<li>
<ul>
<li>é¿å‘ï¼šè‡ªå®šä¹‰ç­–ç•¥å¿…é¡»åŠ å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•ï¼Œå…³é”®ä»»åŠ¡éœ€åŠ é‡è¯•æœºåˆ¶ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-23">æ€»ç»“ï¼šæ‹’ç»ç­–ç•¥é€‰æ‹©çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>çº¿ç¨‹æ± æ‹’ç»ç­–ç•¥çš„æœ¬è´¨æ˜¯ â€œ<strong>ä¸šåŠ¡é£é™©ä¸æŠ€æœ¯æˆæœ¬çš„å¹³è¡¡</strong>â€â€”â€” æ²¡æœ‰ â€œæœ€å¥½çš„ç­–ç•¥â€ï¼Œåªæœ‰ â€œæœ€é€‚åˆä¸šåŠ¡çš„ç­–ç•¥â€ï¼š</p>
<ul>
<li>æ ¸å¿ƒä»»åŠ¡ï¼šä¼˜å…ˆä¿è¯ â€œä¸ä¸¢å¤±â€ï¼Œå“ªæ€•ç‰ºç‰²ä¸€ç‚¹è°ƒç”¨æ–¹æ€§èƒ½ï¼ˆå¦‚ CallerRunsPolicyï¼‰ï¼›</li>
</ul>

<ul>
<li>éæ ¸å¿ƒä»»åŠ¡ï¼šä¼˜å…ˆä¿è¯ â€œä¸å½±å“è°ƒç”¨æ–¹â€ï¼Œå“ªæ€•ä¸¢å¤±å°‘é‡ä»»åŠ¡ï¼ˆå¦‚ DiscardOldestPolicyï¼‰ï¼›</li>
</ul>

<ul>
<li>å¤æ‚åœºæ™¯ï¼šç”¨è‡ªå®šä¹‰ç­–ç•¥å…œåº•ï¼Œå¹³è¡¡ â€œä¸ä¸¢å¤±â€ ä¸ â€œä¸é˜»å¡â€ï¼ˆå¦‚ç»“åˆ Redis é‡è¯•ï¼‰ã€‚</li>
</ul>
<p>è®°ä½ï¼šçº¿ç¨‹æ± çš„æ¯ä¸€ä¸ªå‚æ•°ï¼ˆæ ¸å¿ƒçº¿ç¨‹æ•°ã€é˜Ÿåˆ—å®¹é‡ã€æ‹’ç»ç­–ç•¥ï¼‰éƒ½åº”æœåŠ¡äºä¸šåŠ¡éœ€æ±‚ï¼Œè€Œéç›²ç›®ç…§æ¬ç½‘ä¸Šçš„ â€œæœ€ä¼˜é…ç½®â€ã€‚åªæœ‰æ·±å…¥ç†è§£ä¸šåŠ¡ä¼˜å…ˆçº§å’Œä»»åŠ¡å±æ€§ï¼Œæ‰èƒ½åšå‡ºæ­£ç¡®çš„å†³ç­–ï¼Œè®©çº¿ç¨‹æ± æˆä¸ºæå‡ç³»ç»Ÿæ€§èƒ½çš„åˆ©å™¨ï¼Œè€Œéå¼•å‘æ•…éšœçš„éšæ‚£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥æµ…å‡ºï¼šç†è§£jsçš„â€˜ä¸‡ç‰©çš†å¯¹è±¡â€™ä¸åŸå‹é“¾]]></title>    <link>https://juejin.cn/post/7579450578293604394</link>    <guid>https://juejin.cn/post/7579450578293604394</guid>    <pubDate>2025-12-03T10:25:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579450578293604394" data-draft-id="7577705544875474982" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡ºï¼šç†è§£jsçš„â€˜ä¸‡ç‰©çš†å¯¹è±¡â€™ä¸åŸå‹é“¾"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T10:25:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Neptune1"/> <meta itemprop="url" content="https://juejin.cn/user/1030661718147776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡ºï¼šç†è§£jsçš„â€˜ä¸‡ç‰©çš†å¯¹è±¡â€™ä¸åŸå‹é“¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1030661718147776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Neptune1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:25:22.000Z" title="Wed Dec 03 2025 10:25:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#444;background-image:linear-gradient(90deg,rgba(59,59,59,.1) 3%,transparent 0),linear-gradient(1turn,rgba(122,120,121,.1) 3%,transparent 0);background-size:30px 30px;background-position:50%;letter-spacing:1px;word-spacing:1px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:34px;margin-bottom:16px;font-weight:700;line-height:1.3;cursor:text;color:#444;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body h1{font-size:41px;margin-bottom:34px;line-height:1.5}.markdown-body h1:before{content:""}.markdown-body h2{font-size:30px;padding-left:.4em;border-left:.4em solid #5e5e5e;border-bottom:1px solid #444}.markdown-body h2:after{content:"ğŸ•›";position:absolute;top:0;right:0;transition:all;animation:rotate 10s linear infinite}@keyframes rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.markdown-body h3{border-left:.4em solid #8d8d8d;font-size:24px;padding-left:.4em}.markdown-body h4{font-size:20px}.markdown-body h5{font-size:16px}.markdown-body h6{font-size:14px}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body table,.markdown-body ul{margin:.8em 0}.markdown-body strong{font-weight:1000;position:relative;color:#444;padding:0 3px}.markdown-body em{font-weight:inherit}.markdown-body a{box-sizing:border-box;color:grey;position:relative}.markdown-body a:before{position:absolute;box-sizing:border-box;content:"Go -&gt;";left:0;width:100%;max-width:0;color:#fff;background-color:hsla(0,0%,50.2%,.8);white-space:nowrap;transition:.2s ease;pointer-events:none;overflow:hidden}.markdown-body a:after{content:"";position:absolute;bottom:0;left:0;width:100%;height:1px;background-color:grey}.markdown-body a:active:before,.markdown-body a:hover:before{max-width:100%;padding-left:8px;border-radius:5px}.markdown-body hr{position:relative;width:100%;height:1px;border:none;margin-top:36px;margin-bottom:36px;background:linear-gradient(90deg,grey,#f1f1f1,#444,#444,#f1f1f1,grey);overflow:visible}.markdown-body ol,.markdown-body ul{padding-left:32px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol{counter-reset:my-counter}.markdown-body ol&gt;li{padding-left:6px;list-style:none;counter-increment:my-counter;position:relative}.markdown-body ol&gt;li:before{position:absolute;left:-1.5em;content:counter(my-counter);font-weight:700}.markdown-body ol&gt;li:first-child:before{content:"1ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(2):before{content:"2ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(3):before{content:"3ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(4):before{content:"4ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(5):before{content:"5ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(6):before{content:"6ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(7):before{content:"7ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(8):before{content:"8ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(9):before{content:"9ï¸âƒ£"}.markdown-body ol&gt;li:nth-child(10):before{content:"ğŸ”Ÿ"}.markdown-body ul&gt;li{list-style:none;position:relative}.markdown-body ul&gt;li:before{z-index:10;position:absolute;left:-1.57em;content:"ğŸ”¹";margin-right:12px}.markdown-body ul&gt;li input{margin-left:8px!important}.markdown-body blockquote{position:relative;background-color:#d3d3d3;padding:5px 10px;border-left:.2em solid #000;border-radius:3px;transition:all .8s ease}.markdown-body blockquote:hover{opacity:.7}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(69,69,77,.8);color:#fff;font-size:.87em;padding:.07em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:7px;overflow:hidden}.markdown-body pre:before{z-index:10;position:absolute;top:14px;left:14px;width:12px;height:12px;border-radius:50%;background:#fc625d;-webkit-box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;box-shadow:20px 0 #fdbc40,40px 0 #35cd4b;content:" "}.markdown-body pre:after{z-index:9;content:"";position:absolute;width:100%;height:40px;top:0;background-color:#1a1a1a}.markdown-body pre&gt;code{display:block;font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#171717;color:#bababa;font-size:14px;padding:40px 20px 20px}.markdown-body del{color:grey}.markdown-body table{margin-bottom:1.25rem;border-collapse:collapse}.markdown-body table td,.markdown-body table th{margin:0;padding:8px;line-height:20px;vertical-align:middle;border:1px solid #ddd}.markdown-body table thead,.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table thead th,.markdown-body table tr:nth-child(2n) th{font-weight:700;vertical-align:middle;color:#444}.markdown-body table tbody tr td{font-weight:400;color:#444}.markdown-body table tbody tr:hover{background-color:#d3d3d3}.markdown-body table tbody tr:hover td{color:#fff}.markdown-body img{max-width:100%;margin:0 12px}@media (max-width:720px){.markdown-body h1{font-size:32.8px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="hybrid">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21}.hljs::selection,.hljs span::selection{background:#373b41}.hljs::-moz-selection,.hljs span::-moz-selection{background:#373b41}.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#c5c8c6}.hljs-name,.hljs-title{color:#f0c674}.hljs-comment,.hljs-meta,.hljs-meta .hljs-keyword{color:#707880}.hljs-deletion,.hljs-link,.hljs-literal,.hljs-number,.hljs-symbol{color:#c66}.hljs-addition,.hljs-doctag,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string{color:#b5bd68}.hljs-attribute,.hljs-code,.hljs-selector-id{color:#b294bb}.hljs-bullet,.hljs-keyword,.hljs-selector-tag,.hljs-tag{color:#81a2be}.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-variable{color:#8abeb7}.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-selector-class,.hljs-type{color:#de935f}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¹³æ—¶ä½¿ç”¨æ•°ç»„æ—¶ï¼Œçœ‹åˆ°ä»¥ä¸‹ä»£ç ï¼Œä½ æ˜¯å¦æœ‰äº§ç”Ÿè¿‡ç–‘é—®ï¼Œæ•°ç»„é‡Œçš„<code>pushï¼Œpop,shift,unshift</code>ï¼Œï¼Œå­—ç¬¦ä¸²é‡Œ
çš„<code>slice,length</code>æ–¹æ³•æ˜¯å“ªé‡Œæ¥çš„ï¼Œæˆ‘æ²¡å®šä¹‰å®ƒå•Šï¼Œè€Œä¸”ï¼Œä¸åº”è¯¥æ˜¯å¯¹è±¡æ‰èƒ½ä½¿ç”¨â€˜â€˜å¯¹è±¡å  + . + å±æ€§åâ€™â€™è¿™
ç§æ–¹å¼æ¥è°ƒç”¨å¯¹è±¡é‡Œçš„å†…å®¹å—ï¼Œä¸ºä»€ä¹ˆå­—ç¬¦ä¸²ï¼Œæ•°ç»„ï¼Œä»¥åŠå‡½æ•°ç­‰ç­‰éƒ½å¯ä»¥ä½¿ç”¨è¿™ç§è°ƒç”¨æ–¹å¼å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">arr</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
arr.push(4)   //ä¸ºä»€ä¹ˆæˆ‘æ–°å»ºçš„è¿™ä¸ªæ•°ç»„å°±å¯ä»¥ä½¿ç”¨pushæ–¹æ³•ï¼Ÿï¼Ÿï¼Ÿ

const <span class="hljs-attr">str</span>=<span class="hljs-string">'hello world'</span>
let <span class="hljs-attr">num</span> = str.length  //è¿™äº›å±æ€§æ˜¯å“ªé‡Œæ¥çš„å‘¢ï¼Ÿï¼Ÿï¼Ÿ

let <span class="hljs-attr">obj</span> = {name:<span class="hljs-string">''</span>zzh<span class="hljs-string">''</span>}   //ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡
console.log(obj.name)
<span class="hljs-attr">obj.printname</span> =() =&gt; {console.log(<span class="hljs-string">'your name'</span>)}

</code></pre>
<p>ä½ ä¼šå‘ç°ï¼Œå¾ˆå¤šæ˜æ˜ä¸æ˜¯å¯¹è±¡çš„æ•°æ®ç±»å‹ï¼Œå´é€éœ²ç€ç§ç§å¯¹è±¡çš„æ°”æ¯ï¼Œä½ æ˜¯å¦å‘ç°ä¸€ä¸ªå­—ç¬¦ä¸²<code>str</code>,å±…ç„¶å¯ä»¥åƒå¯¹è±¡<code>obj</code>ä¸€æ ·è®¿é—®ä»–çš„å±æ€§<code>.length</code>ï¼Œæ•°ç»„<code>str</code>è°ƒç”¨æ–¹æ³•<code>pushï¼ˆï¼‰</code>ã€‚è¿™ç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Œ<strong>éš¾é“è¯´ï¼Œè¿™äº›æ•°æ®ç±»å‹å¤©ç”Ÿå°±æ˜¯å¯¹è±¡ï¼Ÿ</strong></p>
<p>æ²¡é”™ï¼Œåœ¨jsä¸­ä½ å¯ä»¥ç†è§£ä¸ºä¸‡ç‰©çš†å¯¹è±¡ï¼Œæˆ‘æ¥ä¸‹æ¥å°†ä¸ºä½ è§£é‡Šä¸ºä½•ä¸‡ç‰©çš†å¯¹è±¡ï¼Œä¸ºäº†å¸®åŠ©ç†è§£ï¼Œæˆ‘ä»¬éœ€è¦æ¥èŠèŠåŸå‹ä¸åŸå‹é“¾ï¼Œå› ä¸ºè®©ä½ æ„Ÿåˆ°ç–‘æƒ‘çš„è¿™ä¸€åˆ‡å…¶èƒŒåéƒ½æ˜¯â€˜åŸå‹â€™åœ¨é»˜é»˜å·¥ä½œç€ï¼Œç†è§£äº†åŸå‹ï¼Œæˆ‘ä»¬æ‰èƒ½çœŸæ­£ç†è§£jsçš„é¢å‘å¯¹è±¡ç¼–ç¨‹</p>
<h3 data-id="heading-0">ä¸€ã€åˆ›é€ å®ä¾‹å¯¹è±¡ â€”â€”â€”â€”  å®ä¾‹å¯¹è±¡çš„ç»§æ‰¿</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>){
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">yourname</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>){
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    
}

<span class="hljs-keyword">const</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'z'</span>)
<span class="hljs-keyword">const</span> person2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'a'</span>)

person1.<span class="hljs-title function_">yourname</span>()  <span class="hljs-comment">// z</span>
person2.<span class="hljs-title function_">yourname</span>()  <span class="hljs-comment">// a</span>
</code></pre>
<p>æœ‰æ²¡æœ‰å‘ç°ä¸€ä»¶äº‹ï¼Œyournameï¼ˆï¼‰æ–¹æ³•åªåœ¨Person.prototypeä¸­å®šä¹‰äº†ä¸€æ¬¡ï¼Œä½†ä½¿ç”¨new Personï¼ˆï¼‰æ„é€ å‡ºæ¥çš„å®ä¾‹å¯¹è±¡perosn1ï¼Œä¸person2å´å‡å¯è°ƒç”¨ï¼Œè§‚å¯Ÿä¸‹æ¥ï¼Œæ˜æ˜â€˜â€˜person1ä¸person2éƒ½åªç»§æ‰¿äº†nameå±æ€§â€™â€™ï¼Œå¯ä»–ä»¬ä¸ºä»€ä¹ˆéƒ½èƒ½è°ƒç”¨ç›¸åŒçš„ä¿å­˜åœ¨Person.prototypeä¸­çš„yournameæ–¹æ³•å‘¢ï¼Œå®ä¾‹å¯¹è±¡æ˜¯æ€ä¹ˆè°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„ï¼Œè¿™ä¸ªæ–¹æ³•åˆæ˜¯å­˜åœ¨å“ªçš„</p>
<h3 data-id="heading-1">äºŒã€ä½•ä¸ºåŸå‹ï¼Œè¯¦è§£<code>prototypeï¼Œ__prototype__ , constructor</code></h3>
<h6 data-id="heading-2">1. prototype (å‡½æ•°çš„æ˜¾ç¤ºåŸå‹)</h6>
<p>å‡½æ•°å¤©ç”Ÿæ‹¥æœ‰ä¸€ä¸ªå±æ€§ï¼ˆprototypeï¼‰ï¼Œç®­å¤´å‡½æ•°é™¤å¤–ï¼Œå¯ä»¥è¢«å‡½æ•°æœ¬èº«è®¿é—®åˆ°ä½†æ˜¯,ç”±äºä¸æ˜¯æ˜¾ç¤ºå±æ€§ï¼Œæ‰€ä»¥ä½ å¹¶ä¸èƒ½åœ¨å‡½æ•°ä½“ä¸­è§‚å¯Ÿåˆ°ï¼Œé€šè¿‡åœ¨æ¸¸è§ˆå™¨ä¸­æ‰“å°è¯¥å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa66a07256184acc8a858f5fc8eff769~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmVwdHVuZTE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362325&amp;x-signature=NiHTYjaMfZZAiaaemfeUZHfIg9U%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹è§ï¼Œå‡½æ•°çš„prototypeæ˜¯ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼å­˜åœ¨çš„ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…æ‹¬äº†ï¼š</p>
<ol>
<li>å…±äº«çš„æ–¹æ³•ä¸å±æ€§ï¼Œè¿™ä¹Ÿæ˜¯prototypeå­˜åœ¨çš„ä¸»è¦çš„ç›®çš„ï¼Œç”¨ä»¥<strong>å­˜å‚¨æ‰€æœ‰å®ä¾‹å…±äº«çš„æ–¹æ³•å’Œå±æ€§</strong>ï¼Œè¿™æ ·é€šè¿‡æŠŠæ–¹æ³•å’Œå±æ€§å®šä¹‰åœ¨prototypeä¸Šï¼Œå¯ä»¥é¿å…æ¯ä¸ªå®ä¾‹éƒ½åˆ›å»ºä¸€ä»½æ–¹æ³•çš„å‰¯æœ¬ï¼ŒèŠ‚çœå†…å­˜</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">name,age</span>){
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age
  }
  
fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">foo</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
     <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello'</span>)   <span class="hljs-comment">//å°†å®ä¾‹å¯¹è±¡éœ€è¦å…±äº«çš„æ–¹æ³•æ”¾åœ¨prototypeä¸Šï¼Œä½¿å¾—æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«ä¸€ä»½ï¼Œé¿å…äº†æ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å¯¹è±¡ä¾¿åˆ›å»ºä¸€ä¸ªfooå‡½æ•°ï¼Œå‡å°‘äº†å†…å­˜çš„å ç”¨</span>
}


<span class="hljs-keyword">const</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">fn</span>()
<span class="hljs-keyword">const</span> person2 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">fn</span>()

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person1.<span class="hljs-property">foo</span> === person2.<span class="hljs-property">foo</span>)   <span class="hljs-comment">//å¾—åˆ°trueï¼Œå¯è¯æ˜person1 ä¸person2 æ˜¯åŒä¸€ä¸ªæ–¹æ³•</span>
</code></pre>
<p>2.<code> constructor</code> å±æ€§ï¼ˆé»˜è®¤å­˜åœ¨ï¼‰ï¼Œæ¯ä¸ªæ„é€ å‡½æ•°çš„<code>prototype</code>å¯¹è±¡éƒ½é»˜è®¤æœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">name,age</span>){
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age
  }
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === fn)   <span class="hljs-comment">//true  éªŒè¯æˆåŠŸ</span>
  <span class="hljs-keyword">const</span> person1 = <span class="hljs-keyword">new</span> <span class="hljs-title function_">fn</span>(<span class="hljs-string">'z'</span>,<span class="hljs-number">18</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(person1.<span class="hljs-property">constructor</span>.<span class="hljs-property">name</span>)  <span class="hljs-comment">//name   ç”±äºconstructoræŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«ï¼Œæ‰€æœ‰å®ä¾‹å¯¹è±¡å¯ä»¥é€šè¿‡constructoræ¥è®¿é—®å®ƒçš„æ„é€ å‡½æ•°</span>
</code></pre>
<p>3.  prototypeå¯¹è±¡æœ¬èº«ä¹Ÿæœ‰ä¸€ä¸ª__prototype__,è¿™æ„æˆäº†åŸå‹é“¾çš„åŸºç¡€ï¼Œè¿™å°±æ˜¯åŸå‹é“¾ä¸­ç»§æ‰¿é“¾çš„åŸºç¡€ï¼Œå¯¹è±¡ç±»å‹çš„æ•°æ®ç»“æ„éƒ½æ‹¥æœ‰ä¸€ä¸ª__prototype__ï¼Œç§°ä¹‹ä¸ºéšå¼åŸå‹ï¼Œç”±äº<code>prototype</code>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ‹¥æœ‰ä¸€ä¸ª__prototype__</p>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">name,age</span>){
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age
  }
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fn.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__prototype__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)  <span class="hljs-comment">//true</span>
  
  è¿™ä½¿å¾—é€šè¿‡fn åˆ›å»ºçš„å®ä¾‹å¯¹è±¡å¯ä»¥æ‰¾åˆ°å¹¶è®¿é—®<span class="hljs-title class_">Object</span>æ–¹æ³•,å³å®ä¾‹å¯¹è±¡é€šè¿‡å®ƒçš„éšå¼åŸå‹æ‰¾åˆ°å®ƒæ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹ï¼Œå†é€šè¿‡å®ƒçš„æ˜¾ç¤ºåŸå‹çš„éšå¼åŸå‹æ‰¾åˆ°<span class="hljs-title class_">Object</span>ï¼ˆï¼‰ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°å®ƒçš„éšå¼åŸå‹æ‰¾åˆ°<span class="hljs-title class_">Function</span>ï¼ˆï¼‰å‡½æ•°
</code></pre>
<h6 data-id="heading-3">2. <code>__prototype__</code> (å¯¹è±¡çš„éšå¼åŸå‹) æ³¨:åœ¨è°·æ­Œæµè§ˆå™¨ä¸­è¡¨ç¤ºä¸º[[prototype]]</h6>
<p>æ¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼ˆåŒ…æ‹¬å‡½æ•°,æ•°ç»„ç­‰æ‰€æœ‰å¯¹è±¡ç±»å‹ï¼‰åœ¨åˆ›å»ºæ—¶éƒ½ä¼šå†…ç½®ä¸€ä¸ª<code>__prototype__</code></p>
<p>é€šè¿‡<code>__prototype__ </code>,æˆ‘ä»¬å°±å¯ä»¥ç†è§£<strong>newæ“ä½œç¬¦çš„ç§˜å¯†</strong>äº†:</p>
<p>const zzh = new Person() è¿™ä¸€è¡Œä»£ç åˆ›å»ºå®ä¾‹å¯¹è±¡zzhæ—¶ï¼Œå®é™…ä¸Šå°±åšäº†ä¸‰ä»¶äº‹</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡{}</li>
<li>å°†ç©ºå¯¹è±¡å†…çš„<code>__prototype__</code>æŒ‡å‘<code>Person_prototype</code>.(ä½¿å¾—å®ä¾‹å¯¹è±¡å¯ä»¥æ²¿ç€<code>__prototype__</code>å‘ä¸Šå¯»æ‰¾å®ƒçš„æ„é€ å‡½æ•°)</li>
<li>å°†æ„é€ å‡½æ•°å†…çš„<code>this</code>ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸Šï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¹¶åœ¨æœ€åè¿”å›è¯¥æ–°å¯¹è±¡</li>
</ol>
<p><strong>ç”¨ä¸€ä¸²ä»£ç è¡¨ç¤ºnewåœ¨å¹²çš„äº‹æƒ…</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">a,b,c</span>){
<span class="hljs-keyword">const</span> xxx = {}  <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡</span>

xxx.<span class="hljs-property">__prototype__</span> = <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> <span class="hljs-comment">//ä½¿Personçš„æ˜¾ç¤ºåŸå‹æŒ‡å‘æ–°å¯¹è±¡çš„éšå¼åŸå‹</span>

<span class="hljs-title class_">Person</span>.<span class="hljs-title function_">call</span>(zzh,a,b,c)   <span class="hljs-comment">//ä½¿Person()çš„thisæŒ‡å‘æ–°å¯¹è±¡</span>

<span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span>=a
<span class="hljs-variable language_">this</span>.<span class="hljs-property">b</span>=b
<span class="hljs-variable language_">this</span>.<span class="hljs-property">c</span>=c

<span class="hljs-keyword">return</span> xxx    <span class="hljs-comment">//è¿”å›æ–°å¯¹è±¡</span>

}
<span class="hljs-keyword">const</span> zzh = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(a,b,c)
</code></pre>
<h6 data-id="heading-4">3. <code>constructor</code>(æ„é€ å‡½æ•°)</h6>
<p>åœ¨å‡½æ•°çš„<code>prototype</code>å¯¹è±¡ä¸Š,é»˜è®¤ä¼šæœ‰ä¸€ä¸ª<code>construct</code>å±æ€§ï¼Œç”¨äºæŒ‡å›å‡½æ•°æœ¬èº«ï¼Œå¯ä½¿å¾—è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡é€šè¿‡å®ƒçš„<code>__prototype__</code>æ‰¾å›æ„é€ å®ƒçš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥<code>construct</code>èµ·åˆ°ä¸€ä¸ªæ ‡è¯†ä½œç”¨ï¼Œä½†æ˜¯ï¼Œç”±äºè¯¥å±æ€§æ˜¯å¯ä»¥è¢«è¦†ç›–æ‰çš„ï¼Œå®ƒå¹¶ä¸å®Œå…¨å¯é </p>
<p>è§‚å¯Ÿä¸‹å›¾ï¼Œæ€»ç»“äº†<code>prototype,__prototype__,constructor</code>ä¸‰è€…çš„å…³ç³»ï¼Œå¯ä»¥æ›´å¥½çš„ç†è§£ä»€ä¹ˆæ˜¯åŸå‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fcef5ee255c4ba3a71c7f79b811cb96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTmVwdHVuZTE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362325&amp;x-signature=ONuOKlhifu75Ot5n97ntkQ0DWjI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€åŸå‹é“¾çš„å½¢æˆ</h3>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ¥èŠèŠObjectä¸Šçš„toStringæ–¹æ³•æ˜¯å¦‚ä½•ç»§æ‰¿åˆ°æ„é€ å‡½æ•°æ‰€åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ä¸Šçš„ï¼Œä¸ºä½•è¢«
æ„é€ å‡½æ•°æ‰€åˆ›å»ºå‡ºçš„å®ä¾‹å¯¹è±¡éƒ½å¯ä»¥ä½¿ç”¨toStringæ–¹æ³•</p>
<p>è®©æˆ‘æ¥è¯¦ç»†å†™å‡ºå®ä¾‹å¯¹è±¡å¯¹toSrtingæ–¹æ³•çš„æŸ¥æ‰¾è¿‡ç¨‹</p>
<ol>
<li>jsè¯»å–åˆ°<code>toString</code>è¢«è°ƒç”¨</li>
<li>å‘å®ä¾‹å¯¹è±¡<code>person1</code>ä¸­æŸ¥æ‰¾   //å‘ç°æ²¡æ‰¾åˆ°</li>
<li>é¡ºç€åŸå‹é“¾ï¼Œä»è¯¥å®ä¾‹å¯¹è±¡<code>person.__prototype__</code>æŸ¥æ‰¾åˆ°Person.prototype           //toStringæ²¡æœ‰å®šä¹‰åœ¨è¿™ï¼Œæ‰€ä»¥æ²¡æ‰¾åˆ°</li>
<li>ç»§ç»­æ²¿ç€<code>person.__prototype__.__prototype__</code>å¯»æ‰¾         // æ­¤æ—¶ç­‰ä»·äºåœ¨<code>Person.prototype.__prototype</code>ä¸­å¯»æ‰¾ï¼Œç”±äºPerson.prototypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä¹Ÿæœ‰éšå¼åŸå‹ï¼Œä¸”ç”±äºPerson.prototypeæ˜¯ä¸€ä¸ªç”¨new Objectï¼ˆï¼‰ç±»ä¼¼çš„æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡ï¼Œæ‰€ä»¥é€šè¿‡å®ƒçš„åŸå‹æ‰€æ‰¾åˆ°çš„éšå¼åŸå‹æŒ‡å‘ç€Object.prototypeï¼ˆè¯¦æƒ…è§æœ¬æ–‡äºŒã€2.3å›¾æ‰€ç¤ºï¼‰ï¼Œæ­¤æ—¶æˆåŠŸåœ¨Object.prototypeä¸­æ‰¾åˆ°toStringæ–¹æ³•ï¼ŒæˆåŠŸè°ƒç”¨</li>
</ol>
<p>ps:åŸå‹é“¾çš„ç»ˆç‚¹ä¸ºnull:<code>Object.prototype.__prototype__</code>,æŸ¥æ‰¾åˆ°æ­¤ç»“æŸï¼Œå¦‚æœè¿˜æ²¡æŸ¥æ‰¾åˆ°æ–¹æ³•ï¼Œåˆ™è¿”å›<strong>undefined</strong></p>
<p>å®Œæ•´çš„åŸå‹é“¾å¯è¡¨ç¤ºä¸ºï¼š person1 --&gt; Person.prototype --&gt; Objectotype --&gt; null</p>
<h5 data-id="heading-6">å››ã€æ€»ç»“</h5>
<p>æ­¤æ—¶ä½ ä¹Ÿè®¸æ˜ç™½äº†å®ä¾‹å¯¹è±¡é‡Œæ˜æ˜æ²¡æœ‰ä¸€äº›å±æ€§å’Œæ–¹æ³•å´å¯ä»¥è°ƒç”¨çš„åŸå› äº†ï¼Œè®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹æ‰€æœ‰çš„çŸ¥è¯†ç‚¹</p>
<p>1.jsé€šè¿‡åŸå‹é“¾å®ç°äº†ç»§æ‰¿ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªéšç§˜çš„__prototype__é“¾æ¥æŒ‡å‘å®ƒçš„åŸå‹ï¼Œå½¢æˆäº†ä¸€ä¸ªé“¾å¼ç»“æ„ï¼Œç»§è€Œä½¿çš„å®ç°äº†åŸå‹é“¾</p>
<p>2.ä½¿ç”¨åŸå‹é“¾å¯ä»¥è§£å†³å†…å­˜æµªè´¹çš„é—®é¢˜</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰’ä¸€æ‰’ Vue3 å¤§å±é€‚é…æ’ä»¶ vfit çš„æºç ï¼šåŸæ¥è¿™ä¹ˆç®€å•ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7579440586694361134</link>    <guid>https://juejin.cn/post/7579440586694361134</guid>    <pubDate>2025-12-03T10:26:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579440586694361134" data-draft-id="7579427549472063534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰’ä¸€æ‰’ Vue3 å¤§å±é€‚é…æ’ä»¶ vfit çš„æºç ï¼šåŸæ¥è¿™ä¹ˆç®€å•ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T10:26:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹éœ¸å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1875092531319104"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰’ä¸€æ‰’ Vue3 å¤§å±é€‚é…æ’ä»¶ vfit çš„æºç ï¼šåŸæ¥è¿™ä¹ˆç®€å•ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1875092531319104/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹éœ¸å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:26:18.000Z" title="Wed Dec 03 2025 10:26:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰å‡ å¤©ç”¨äº† vfit åšå¤§å±é€‚é…ï¼Œæ„Ÿè§‰æŒºå¥½ç”¨çš„ã€‚
ä½œä¸ºä¸€ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯ï¼ˆå…¶å®æ˜¯é—²å¾—è›‹ç–¼ï¼‰ï¼Œæˆ‘å¿ä¸ä½æ‰’äº†ä¸€ä¸‹å®ƒçš„æºç ã€‚
ç»“æœå‘ç°... <strong>æ ¸å¿ƒä»£ç å±…ç„¶ä¸åˆ° 50 è¡Œï¼Ÿ</strong> ğŸ¤¯</p>
<p>ä»Šå¤©å°±å¸¦å¤§å®¶æ·±å…¥æµ…å‡ºåœ°æ‹†è§£ä¸€ä¸‹è¿™ä¸ªåº“ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ä¼˜é›…åœ°è§£å†³å¤§å±é€‚é…é—®é¢˜çš„ã€‚</p>
<h2 data-id="heading-0">ğŸ¯ æ ¸å¿ƒåŸç†ï¼šScale æ–¹æ¡ˆ</h2>
<p>å¤§å±é€‚é…çš„æ ¸å¿ƒæµæ´¾æ— éå°±é‚£å‡ ç§ï¼š</p>
<ol>
<li><strong>REM / VW</strong>ï¼šä¿®æ”¹åŸºå‡†å€¼ï¼Œæ‰€æœ‰å•ä½éƒ½è¦æ”¹ï¼Œä¾µå…¥æ€§å¼ºã€‚</li>
<li><strong>Scale</strong>ï¼šCSS <code>transform: scale()</code>ï¼Œç®€å•ç²—æš´ï¼Œä¸æ”¹å˜å¸ƒå±€ã€‚</li>
</ol>
<p>vfit é‡‡ç”¨çš„æ˜¯ <strong>Scale æ–¹æ¡ˆ</strong>ã€‚
å®ƒçš„æ€è·¯éå¸¸æ¸…æ™°ï¼š</p>
<blockquote>
<p>è®¡ç®— <code>å½“å‰å±å¹•å®½é«˜</code> / <code>è®¾è®¡ç¨¿å®½é«˜</code> = <code>ç¼©æ”¾æ¯”ä¾‹</code>ï¼Œç„¶ååº”ç”¨åˆ°æ ¹å®¹å™¨ä¸Šã€‚</p>
</blockquote>
<h2 data-id="heading-1">ğŸ” æºç æ‹†è§£</h2>
<h3 data-id="heading-2">1. ç›‘å¬å±å¹•å˜åŒ– (ResizeObserver)</h3>
<p>åœ¨ <code>src/scale.ts</code> é‡Œï¼Œå®ƒæ²¡æœ‰ä½¿ç”¨ä¼ ç»Ÿçš„ <code>window.onresize</code>ï¼Œè€Œæ˜¯ç”¨äº†æ›´ç°ä»£ã€æ€§èƒ½æ›´å¥½çš„ <code>ResizeObserver</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/scale.ts (ç®€åŒ–ç‰ˆ)</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">observeScale</span>(<span class="hljs-params">target, designHeight, onScale</span>) {
  <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
      <span class="hljs-keyword">const</span> { width, height } = entry.<span class="hljs-property">contentRect</span>
      <span class="hljs-comment">// ... è®¡ç®— scale é€»è¾‘</span>
      <span class="hljs-title function_">onScale</span>(scaleVal)
    }
  })
  observer.<span class="hljs-title function_">observe</span>(target)
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨ ResizeObserverï¼Ÿ</strong>
å› ä¸ºå®ƒèƒ½ç›‘å¬<strong>ä»»æ„å…ƒç´ </strong>çš„å¤§å°å˜åŒ–ï¼Œè€Œä¸ä»…ä»…æ˜¯ windowã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥æŠŠå¤§å±åµŒå…¥åˆ°ä¸€ä¸ª div é‡Œï¼ˆæ¯”å¦‚åå°ç®¡ç†ç³»ç»Ÿçš„æŸä¸ª dashboard é¡µç­¾ï¼‰ï¼Œå®ƒä¾ç„¶èƒ½æ­£å¸¸ç¼©æ”¾ï¼</p>
<h3 data-id="heading-3">2. ä¸‰ç§ç¼©æ”¾æ¨¡å¼çš„ç®—æ³•</h3>
<p>vfit æ”¯æŒ <code>width</code> | <code>height</code> | <code>auto</code> ä¸‰ç§æ¨¡å¼ã€‚
çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆç®—çš„ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/scale.ts</span>
<span class="hljs-keyword">if</span> (scaleMode === <span class="hljs-string">'height'</span>) {
  <span class="hljs-comment">// 1. åªè¦é«˜åº¦æ’‘æ»¡ï¼Œå®½åº¦æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆé€‚åˆå®šé«˜å®½å±ï¼‰</span>
  scaleVal = rectHeight / designHeight
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (scaleMode === <span class="hljs-string">'width'</span>) {
  <span class="hljs-comment">// 2. åªè¦å®½åº¦æ’‘æ»¡ï¼Œé«˜åº¦æŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼ˆé€‚åˆå®šå®½é•¿é¡µé¢ï¼‰</span>
  scaleVal = rectWidth / designWidth
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// 3. auto æ¨¡å¼ (é»˜è®¤)ï¼šä¿æŒå®½é«˜æ¯”ï¼Œå…¨éƒ¨æ˜¾ç¤º (Contain)</span>
  <span class="hljs-keyword">const</span> designRatio = designWidth / designHeight
  <span class="hljs-comment">// å¦‚æœå½“å‰å±å¹•æ›´å®½ï¼ˆå¸¦é±¼å±ï¼‰ï¼Œå°±ä»¥é«˜åº¦ä¸ºåŸºå‡†</span>
  <span class="hljs-comment">// å¦‚æœå½“å‰å±å¹•æ›´çª„ï¼ˆæ‰‹æœºï¼‰ï¼Œå°±ä»¥å®½åº¦ä¸ºåŸºå‡†</span>
  <span class="hljs-keyword">if</span> (rectWidth / rectHeight &lt; designRatio) {
    scaleVal = rectWidth / designWidth
  } <span class="hljs-keyword">else</span> {
    scaleVal = rectHeight / designHeight
  }
}
</code></pre>
<p>è¿™æ®µé€»è¾‘éå¸¸ç»å…¸ï¼Œä¿è¯äº†å†…å®¹<strong>æ°¸è¿œä¸ä¼šè¢«è£å‰ª</strong>ï¼ŒåŒæ—¶ä¹Ÿä¿æŒäº†è®¾è®¡ç¨¿çš„æ¯”ä¾‹ã€‚</p>
<h3 data-id="heading-4">3. ç¥å¥‡çš„ FitContainer</h3>
<p>å¤§å®¶ç”¨ scale æ–¹æ¡ˆæœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿ
<strong>æ˜¯å®šä½ï¼</strong> ğŸ˜«
ä¸€æ—¦ç¼©æ”¾äº†ï¼ŒåŸæ¥çš„ <code>top: 100px</code> å¯èƒ½å°±ä¸æ˜¯è§†è§‰ä¸Šçš„ 100px äº†ï¼Œè€Œä¸”å±…ä¸­åçš„åç§»é‡ä¹Ÿå¾ˆéš¾ç®—ã€‚</p>
<p>vfit çš„ <code>FitContainer.vue</code> ç»„ä»¶ç”¨äº†ä¸€ä¸ªå¾ˆå·§å¦™çš„æ€è·¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/FitContainer.vue</span>

<span class="hljs-comment">// ç›‘å¬ scale å’Œ props å˜åŒ–</span>
<span class="hljs-title function_">watch</span>([<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">scale</span>, fitScale], <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> s = fitScale.<span class="hljs-property">value</span>
  
  <span class="hljs-comment">// å¯¹äº left å’Œ topï¼Œä¹˜ä»¥ç¼©æ”¾æ¯”ä¾‹ s</span>
  <span class="hljs-comment">// è¿™æ ·å°±èƒ½è®©å…ƒç´ ç›¸å¯¹äºåŸç‚¹è¿›è¡Œä½ç§»</span>
  <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'left'</span> || key === <span class="hljs-string">'top'</span>) {
    position[key] = val * s + <span class="hljs-string">'px'</span>
  }
  
  <span class="hljs-comment">// å¯¹äº right å’Œ bottomï¼Œä¸ä¹˜ï¼</span>
  <span class="hljs-comment">// è¿™æ ·å…ƒç´ å°±ä¼šæ­»æ­»è´´ä½å®¹å™¨è¾¹ç¼˜</span>
  <span class="hljs-keyword">else</span> {
    position[key] = val + <span class="hljs-string">'px'</span>
  }
})
</code></pre>
<p><strong>è¿™é‡Œæœ‰ä¸ªç»†èŠ‚è®¾è®¡å¾—å¾ˆèµï¼š</strong></p>
<ul>
<li><code>top</code> / <code>left</code>ï¼š<strong>å‚ä¸ç¼©æ”¾</strong>ã€‚è¿™æ„å‘³ç€ä½ ç»™çš„åæ ‡æ˜¯ç›¸å¯¹äºâ€œè®¾è®¡ç¨¿å·¦ä¸Šè§’â€çš„ã€‚</li>
<li><code>right</code> / <code>bottom</code>ï¼š<strong>ä¸å‚ä¸ç¼©æ”¾</strong>ã€‚è¿™æ„å‘³ç€ä½ ç»™çš„åæ ‡æ˜¯ç›¸å¯¹äºâ€œå±å¹•è¾¹ç¼˜â€çš„ã€‚</li>
</ul>
<p>è¿™è§£å†³äº†å¤§å±å¼€å‘çš„ä¸€ä¸ªç—›ç‚¹ï¼š<strong>ä¸­é—´å†…å®¹è¦è¿˜åŸè®¾è®¡ç¨¿ï¼Œä½†è¾¹ç¼˜èœå•è¦è´´è¾¹ã€‚</strong></p>
<h2 data-id="heading-5">ğŸ’¡ æˆ‘ä»¬å¯ä»¥å­¦åˆ°ä»€ä¹ˆï¼Ÿ</h2>
<ol>
<li><strong>API è®¾è®¡è¦ç®€å•</strong>ï¼šç”¨æˆ·åªå…³å¿ƒ <code>designWidth</code> å’Œ <code>designHeight</code>ï¼Œä¸è¦æŠŠå¤æ‚çš„è®¡ç®—æŠ›ç»™ç”¨æˆ·ã€‚</li>
<li><strong>å–„ç”¨ç°ä»£ API</strong>ï¼š<code>ResizeObserver</code> æ¯” <code>resize</code> äº‹ä»¶æ›´å¥½ç”¨ã€‚</li>
<li><strong>ç»„ä»¶åŒ–æ€ç»´</strong>ï¼šé€šè¿‡ <code>FitContainer</code> æŠŠâ€œå®šä½è®¡ç®—â€å°è£…èµ·æ¥ï¼Œä¸šåŠ¡ä»£ç é‡Œå°±å…¨æ˜¯å¹²å‡€çš„ px å€¼äº†ã€‚</li>
</ol>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>vfit çš„æºç è™½ç„¶ç®€å•ï¼Œä½†ç¡®å®åˆ‡ä¸­äº†ç—›ç‚¹ã€‚
æœ‰æ—¶å€™é€ è½®å­ä¸ä¸€å®šè¦å¤šé«˜æ·±çš„æŠ€æœ¯ï¼Œèƒ½<strong>ä¼˜é›…åœ°è§£å†³ä¸€ä¸ªå°é—®é¢˜</strong>ï¼Œå°±æ˜¯ä¸€ä¸ªå¥½è½®å­ã€‚</p>
<p>æ¨èå¤§å®¶å»è¯»è¯»å®ƒçš„æºç ï¼Œå°±å‡ ä¸ªæ–‡ä»¶ï¼ŒåŠå°æ—¶å°±èƒ½çœ‹å®Œã€‚
ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fv-plugin%2Fvfit" target="_blank" title="https://github.com/v-plugin/vfit" ref="nofollow noopener noreferrer">GitHub: v-plugin/vfit</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼šä¸€ä¸ª Hero çš„è¯ç”Ÿ]]></title>    <link>https://juejin.cn/post/7579264485259411471</link>    <guid>https://juejin.cn/post/7579264485259411471</guid>    <pubDate>2025-12-03T10:26:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259411471" data-draft-id="7578781397117337646" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼šä¸€ä¸ª Hero çš„è¯ç”Ÿ"/> <meta itemprop="keywords" content="æ¸¸æˆ,æ¸¸æˆå¼€å‘,Flutter"/> <meta itemprop="datePublished" content="2025-12-03T10:26:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¤§å­¦ç‰²"/> <meta itemprop="url" content="https://juejin.cn/user/3125273628517148"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼šä¸€ä¸ª Hero çš„è¯ç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3125273628517148/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¤§å­¦ç‰²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:26:29.000Z" title="Wed Dec 03 2025 10:26:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aec1a3e414794e86ba2a9d75c18f470d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=nBJqpKHLrUDvkvAZfB%2FcSTufOp0%3D" width="100%" loading="lazy"/></p><p/>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å°æ—¶å€™çš„æˆ‘ä»¬ï¼Œéƒ½æœ‰ä¸€ä¸ªå°å°çš„æ¸¸æˆæ¢¦<br/>
ä»€ä¹ˆ <strong>æ¤ç‰©å¤§æˆ˜åƒµå°¸ã€çº¢è­¦ã€CFã€LOLã€ç‹è€…è£è€€</strong> ...<br/>
è¿™äº›æ¸¸æˆæ— ä¸æ‰‹æ‹¿æŠŠæ<br/>
åŠå¤œèº²åœ¨è¢«çªé‡Œå·å·ç©ç”µè„‘ã€ç©æ‰‹æœºï¼Œé‚£æ›´æ˜¯ <strong>åŸºæ“å‹¿å…­</strong></p>
<p>å³ä½¿ç°åœ¨é•¿å¤§äº†ï¼Œæ²¡æ—¶é—´ç©äº†<br/>
ğŸ’­ é‚£ä»½ <strong>çƒ­çˆ±</strong>ï¼Œä»æ¥æ²¡æ¶ˆå¤±è¿‡ ...</p>
<p>æœ¬ç³»åˆ—æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ <strong>Flutter</strong> å¼€å‘ä¸€æ¬¾ <code>2Dåƒç´ é£</code> æ¸¸æˆã€‚</p>
<blockquote>
<p>æœ¬ç€å¼€æºç²¾ç¥ï¼Œæ‰€æœ‰ <strong>èµ„æºç´ æ</strong> åŠ <strong>æºä»£ç </strong> , å°†åœ¨ <code>github</code> ä¸Šå…¬å¼€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">Flame å¼€å‘å¼•æ“</h3>
<p><strong>Flame</strong> æ˜¯ä¸€ä¸ªæ„å»ºäº <strong>Flutter</strong> ä¹‹ä¸Šçš„ <strong>è½»é‡çº§ 2D æ¸¸æˆå¼•æ“</strong>ã€‚<br/>
è®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ç†Ÿæ‚‰çš„ <code>Flutter + Dart</code> æŠ€æœ¯æ ˆå¿«é€Ÿåˆ¶ä½œè·¨å¹³å°æ¸¸æˆã€‚<br/>
ä¸éœ€è¦æˆ‘ä»¬æ·±å…¥ç ”ç©¶åº•å±‚æ¸²æŸ“ã€åŠ¨ç”»ç³»ç»Ÿã€è§¦æ‘¸äº‹ä»¶ç®¡ç†æˆ–ç¢°æ’æ£€æµ‹ï¼Œå°±èƒ½è½»æ¾ä¸Šæ‰‹å¼€å‘ä¸€æ¬¾æ¸¸æˆã€‚</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>

































<table><thead><tr><th>åŠŸèƒ½æ¨¡å—</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç»„ä»¶åŒ–ç³»ç»Ÿï¼ˆFCSï¼‰</td><td>æ¸¸æˆè§’è‰²ã€èƒŒæ™¯ã€UI å…¨éƒ¨ç»„ä»¶åŒ–ï¼Œç»“æ„æ¸…æ™°ã€æ‰©å±•çµæ´»ã€‚</td></tr><tr><td>æ¸¸æˆå¾ªç¯ï¼ˆGame Loopï¼‰</td><td>å†…ç½®ç¨³å®šå¸§å¾ªç¯ï¼Œè‡ªåŠ¨å¤„ç† <code>update()</code> ä¸ <code>render()</code>ã€‚</td></tr><tr><td>åŠ¨ç”»ç®¡ç†ç®€å•</td><td>Sprite / SpriteSheet / SpriteAnimation ä½¿ç”¨ä¾¿æ·ã€‚</td></tr><tr><td>ç¢°æ’æ£€æµ‹ &amp; ç‰©ç†æ”¯æŒ</td><td>è‡ªå¸¦ç¢°æ’ç³»ç»Ÿï¼Œæ”¯æŒ Shapeã€Hitboxã€ç‰©ç†æ¨¡æ‹Ÿç­‰ã€‚</td></tr><tr><td>è¾“å…¥å¤„ç†ç»Ÿä¸€</td><td>è½»æ¾å¤„ç†ç‚¹å‡»ã€æ‹–æ‹½ã€å¤šç‚¹è§¦æ§ã€é”®ç›˜ã€æ‰‹æŸ„ç­‰è¾“å…¥ã€‚</td></tr><tr><td>ç”Ÿæ€å®Œå–„</td><td>æ‹¥æœ‰å¤§é‡æ‰©å±•æ’ä»¶ï¼Œå¦‚ flame_audioã€flame_behaviorsã€flame_riveã€flame_forge2d ç­‰ã€‚</td></tr></tbody></table>
<p><strong>æ‹“å±•</strong>ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c105e2495a72466dbf75f8519bc84f63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=2y8nSIrlR5Hp7aYyQ9jfe%2B0tyK8%3D" width="100%" loading="lazy"/></p><p/>
<p>åœ¨ä»Šå¹´ 9 æœˆ 3 æ—¥ ä¸¾åŠçš„ <strong>FlutterNFriends</strong>Â å¤§ä¼šä¸Šï¼ŒFlame è¿˜å±•ç¤ºäº†å…³äº 3D æ¸¸æˆçš„æ”¯æŒ <code>flame_3d</code>ã€‚</p>
<blockquote>
<p><strong>Flame 3D</strong> æ˜¯ Flame å›¢é˜Ÿæ¨å‡ºçš„åŸºäº <strong>Flutter + Impeller</strong> çš„è½»é‡çº§ 3D æ¸¸æˆå¼•æ“æ‰©å±•ã€‚å®ƒå»¶ç»­äº† Flame çš„ç»„ä»¶åŒ–æ¶æ„ä¸ç®€å• APIï¼Œè®©å¼€å‘è€…èƒ½ç”¨ç†Ÿæ‚‰çš„ Dart å†™å‡ºåŒ…å« 3D æ¨¡å‹ã€å…‰ç…§ã€æ‘„åƒæœºã€äº¤äº’ç­‰æ•ˆæœçš„åœºæ™¯ã€‚é€‚ç”¨äºç§»åŠ¨ç«¯è½»é‡ 3D æ¸¸æˆã€å±•ç¤ºç±»åº”ç”¨åŠ UI+3D æ··åˆé¡¹ç›®ï¼Œå­¦ä¹ é—¨æ§›æä½ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">ç´ ææ¨è</h3>
<p>ç›¸ä¿¡æ€»ä¼šæœ‰ä¸€éƒ¨åˆ†å…„å¼Ÿæœ‰ä¸€é¢—åšæ¸¸æˆçš„å¿ƒï¼Œä½†æ˜¯è‹¦äºæ²¡æœ‰ç´ æã€‚<br/>
è‡ªå·±è¿™ä¸‰è„šçŒ«åŠŸå¤«ï¼Œä¹Ÿä¸å¯èƒ½è‡ªå·±ç»˜åˆ¶ã€‚<br/>
åœ¨è¿™é‡Œç»™å¤§å®¶æ¨è <strong>ä¸¤ç§æ–¹å¼</strong> ï¼š</p>
<p><strong>1. itch.io</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f04b3521f57c412c9a3209d60303d079~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=v9WlWETU5kN96oNExZOuUR0PKlo%3D" width="100%" loading="lazy"/></p><p/>
<blockquote>
<p><strong>itch.io</strong> æ˜¯ä¸€ä¸ªå¼€æ”¾çš„ç‹¬ç«‹æ¸¸æˆå‘å¸ƒå¹³å°ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å¼€å‘è€…è·å–æ¸¸æˆç´ æçš„é‡è¦æ¥æºã€‚å¹³å°ä¸Šæœ‰å¤§é‡ç”±åˆ›ä½œè€…ä¸Šä¼ çš„ <strong>åƒç´ ç´ æã€UIã€åœ°å›¾ç“¦ç‰‡ã€éŸ³æ•ˆã€èƒŒæ™¯éŸ³ä¹ã€è§’è‰²åŠ¨ç”»ã€ç‰¹æ•ˆåŒ…</strong> ç­‰èµ„æºï¼Œæ”¯æŒå…è´¹ã€ä»˜è´¹æˆ–â€œéšå¿ƒä»˜â€
ä¸‹è½½ã€‚å¼€å‘è€…å¯ä»¥å¿«é€Ÿè·å–ç¾æœ¯ä¸éŸ³é¢‘èµ„äº§ï¼Œç”¨äºåŸå‹åˆ¶ä½œæˆ–æ­£å¼é¡¹ç›®ã€‚</p>
<p>ğŸ—ºï¸  <strong>ç½‘ç«™åœ°å€</strong> ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fitch.io" target="_blank" title="https://itch.io" ref="nofollow noopener noreferrer">itch.io</a></p>
</blockquote>
<p><strong>2. Holopix AI</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc10f1882f964a0f8e4605ea4aab8e9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=iLOO1hAnBsy3HylVSDaFB41UE7c%3D" width="100%" loading="lazy"/></p><p/>
<blockquote>
<p><strong>Holopix AI</strong> æ˜¯ä¸€æ¬¾ä¸“ä¸ºæ¸¸æˆè®¾è®¡è€Œç”Ÿçš„ AI ç¾æœ¯å¹³å°ï¼Œå¸®åŠ©å¼€å‘è€…æ˜¾è‘—æå‡ç”Ÿäº§åŠ›ã€‚å®ƒé€šè¿‡æ–‡ç”Ÿå›¾ã€è‰ç¨¿ç»†åŒ–ã€å¤šé£æ ¼ç”Ÿæˆç­‰èƒ½åŠ›ï¼Œå¿«é€Ÿäº§å‡º 2D åŸç”»ã€è§’è‰²ã€åœºæ™¯å’Œ UI ç´ æï¼›å¹¶æ”¯æŒ <strong>2Dâ†’3D è½¬æ¢ã€å±€éƒ¨ç²¾ä¿®ã€é«˜æ¸…æ”¾å¤§</strong> ç­‰ä¸“ä¸šèƒ½åŠ›ï¼Œè®©ç¾æœ¯é£æ ¼ä¿æŒä¸€è‡´ã€‚å¹³å°è¿˜æ¶µç›–å›¾ç”Ÿè§†é¢‘ä¸è¥é”€ç´ æç”Ÿæˆï¼Œè®© AI æ— ç¼èå…¥æ¸¸æˆåˆ›ä½œä¸å‘è¡Œæµç¨‹ï¼Œéå¸¸é€‚åˆç‹¬ç«‹å¼€å‘è€…å’Œå°å›¢é˜Ÿå¿«é€Ÿæ„å»ºæ¸¸æˆåŸå‹ä¸æ­£å¼èµ„æºã€‚</p>
<p>ğŸ—ºï¸  <strong>ç½‘ç«™åœ°å€</strong> ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fholopix.cn" target="_blank" title="https://holopix.cn" ref="nofollow noopener noreferrer">holopix.cn</a></p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ç²¾çµå›¾</h3>
<blockquote>
<p><code>2Dæ¸¸æˆ</code> çš„æœ¬è´¨ï¼Œå…¶å®å¯ä»¥å½’ç»“ä¸ºä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>åœ¨ä¸€ä¸ªå¹³é¢ä¸–ç•Œé‡Œæ¸²æŸ“å›¾åƒ</strong></li>
<li><strong>è®©å›¾åƒæ ¹æ®è§„åˆ™åŠ¨èµ·æ¥</strong>ã€‚</li>
</ul>
<p>ç©å®¶çœ¼ä¸­çœ‹åˆ°çš„è§’è‰²ã€æ€ªç‰©ã€èƒŒæ™¯ã€UIï¼Œå…¶å®éƒ½æ˜¯ä¸€å¼ å¼ å›¾åƒæŒ‰é¡ºåºç»˜åˆ¶å‡ºæ¥çš„<br/>
æ— è®ºæ˜¯èµ°è·¯ã€è·³è·ƒã€æ”»å‡»ï¼Œè¿˜æ˜¯çˆ†ç‚¸ç‰¹æ•ˆï¼Œæœ¬è´¨éƒ½æ˜¯ï¼š<strong>ä¸æ–­æ›´æ–°å›¾ç‰‡ â†’ æ¸²æŸ“åˆ°å±å¹• â†’ å½¢æˆè§†è§‰åŠ¨ç”»</strong></p>
</blockquote>
<p>åœ¨æ—©æœŸå›¾å½¢ç³»ç»Ÿä¸­ï¼Œè¿™äº›å¯ç§»åŠ¨çš„å°å›¾åƒè¢«ç§°ä¸º <strong>ç²¾çµï¼ˆSpriteï¼‰</strong> ï¼Œæ˜¯ 2D æ¸¸æˆä¸–ç•Œä¸­è§’è‰²ä¸ç‰©ä½“çš„åŸºç¡€å•ä½<br/>
éšç€æ¸¸æˆè§„æ¨¡å¢å¤§ã€èµ„æºå¢å¤šï¼Œä¸ºäº†è®©è¿™äº› Sprite <strong>åŠ è½½æ›´å¿«ã€æ¸²æŸ“æ›´é«˜æ•ˆã€ç®¡ç†æ›´ç»Ÿä¸€</strong>ï¼Œå¼€å‘è€…è¿›ä¸€æ­¥æå‡ºäº†ï¼š</p>
<p>ğŸ‘‰ <strong>ç²¾çµå›¾ï¼ˆSprite Sheetï¼‰</strong></p>
<p>å®ƒå°†è§’è‰²çš„æ‰€æœ‰åŠ¨ä½œå¸§ã€ç‰¹æ•ˆå›¾å—ç­‰åˆå¹¶åˆ°ä¸€å¼ å¤§å›¾ä¸­ï¼Œé€šè¿‡ <code>åˆ‡å›¾ + å¸§åºæ’­æ”¾</code> å®ç°åŠ¨ç”»ã€‚<br/>
åœ¨ <strong>Flame</strong> é‡Œï¼Œå¤§å¤šæ•°è§’è‰²åŠ¨ç”»ã€ç‰¹æ•ˆä¹ƒè‡³ UI å›¾å½¢ï¼Œéƒ½æ˜¯åŸºäºç²¾çµå›¾æ„å»ºçš„ã€‚</p>
<blockquote>
<p><code>Sprite</code> æ˜¯ <strong>2D æ¸¸æˆ</strong> æ˜¾ç¤ºçš„ <strong>åŸºç¡€å•ä½</strong>ï¼Œè€Œ <code>ç²¾çµå›¾</code> åˆ™æ˜¯è®©è¿™äº› <code>Sprite</code> åœ¨ç°ä»£æ¸¸æˆä¸­æ›´é«˜æ•ˆè¿ä½œçš„èµ„æºç»„ç»‡æ–¹å¼ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f3079732e074bc29dd80f9ae2f8f483~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=Mlg2%2B8dnJtx15OZecIXX6VNIZFE%3D" alt="heart_animated_1.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce9155cd1621469484912088cb1cc66c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=ZPYFWkherDBA2d7jpeFFhSWbLDY%3D" alt="SPRITE_SHEET.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3259a59effab4baa96ceab77716d354a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=sYIw4hCUX%2BHK3sh%2B1nRA8BpXvKw%3D" alt="Tilemap Dungeon original size.png" loading="lazy"/></p>








































<table><thead><tr><th>ä¼˜ç‚¹âœ¨</th><th>è¯´æ˜</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td><strong>å‡å°‘åŠ è½½æ¬¡æ•°</strong></td><td>å¤šå¸§åŠ¨ç”»åªåŠ è½½ 1 å¼ å›¾ï¼Œè€Œä¸æ˜¯å¤šå¼ å›¾ç‰‡</td><td>åŠ è½½é€Ÿåº¦æ›´å¿«ã€è¿›å…¥åœºæ™¯ä¸å†å¡é¡¿</td></tr><tr><td><strong>é™ä½å†…å­˜ä¸ GPU çº¹ç†åˆ‡æ¢</strong></td><td>æ‰€æœ‰å¸§å…±äº«åŒä¸€ä¸ªçº¹ç†å¯¹è±¡ï¼ˆGPU ä¼˜åŒ–ï¼‰</td><td>æ›´çœå†…å­˜ã€å‡å°‘ GPU draw callsã€æ¸¸æˆæ›´ç¨³å®š</td></tr><tr><td><strong>åŠ¨ç”»æ’­æ”¾æ›´æµç•…</strong></td><td>å¤šå¸§åœ¨åŒä¸€å¼ å›¾å†…ï¼Œæ— éœ€é¢‘ç¹åˆ‡æ¢çº¹ç†</td><td>åŠ¨ç”»æ›´ä¸æ»‘ã€æ‰å¸§æ¦‚ç‡æ›´ä½</td></tr><tr><td><strong>å‡å°‘ I/Oï¼ˆç£ç›˜è¯»å–ï¼‰</strong></td><td>ä¸€æ¬¡åŠ è½½å¤§å›¾æ¯”å¤šæ¬¡åŠ è½½å°å›¾å¿«å¾—å¤š</td><td>åœºæ™¯åˆ‡æ¢ã€äººç‰©åŠ è½½é€Ÿåº¦æ˜¾è‘—æå‡</td></tr><tr><td><strong>èµ„æºç®¡ç†æ›´ç®€å•</strong></td><td>æ‰€æœ‰å¸§ç»Ÿä¸€ç®¡ç†ï¼Œä¸æ˜“å‡ºé”™</td><td>æ–‡ä»¶ç»“æ„æ¸…æ™°ã€å¼€å‘æ•ˆç‡é«˜</td></tr><tr><td><strong>Flame åŸç”Ÿä¼˜åŒ–æ”¯æŒ</strong></td><td>Flame ImageCacheã€SpriteSheetã€SpriteAnimation ç­‰éƒ½ä¸ºç²¾çµå›¾ä¼˜åŒ–</td><td>ä»£ç æ›´çŸ­ã€æ›´å¿«ã€æ›´ç¨³å®š</td></tr></tbody></table>
<h2 data-id="heading-4">MyHero</h2>
<h3 data-id="heading-5">ä¸€. æœ¬ç« ç›®æ ‡</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ccdbe7e34d4472a82792b9b6527a4d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=hxeUuCGCAtDG39r1P2DZlhOYlNY%3D" width="70%" loading="lazy"/></p><p/>
<h3 data-id="heading-6">äºŒ. é¡¹ç›®æ„å»º</h3>
<h4 data-id="heading-7">1. å¼•å…¥ä¾èµ–</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># æœ€æ–°ç‰ˆæœ¬ä»¥å®˜ç½‘ä¸ºå‡†</span>
<span class="hljs-attr">flame:</span> <span class="hljs-string">^1.34.0</span>         <span class="hljs-comment"># Flame ä¸»å¼•æ“ï¼šæä¾›ç»„ä»¶ç³»ç»Ÿã€æ¸²æŸ“ã€åŠ¨ç”»ã€è¾“å…¥äº‹ä»¶ã€ç¢°æ’æ£€æµ‹ç­‰ 2D æ¸¸æˆæ ¸å¿ƒåŠŸèƒ½</span>
<span class="hljs-attr">flame_audio:</span> <span class="hljs-string">^2.11.12</span>  <span class="hljs-comment"># éŸ³é¢‘æ‰©å±•åº“ï¼šç®€åŒ– BGMã€éŸ³æ•ˆçš„åŠ è½½å’Œæ’­æ”¾ï¼ˆåº•å±‚åŸºäº audioplayersï¼‰</span>
<span class="hljs-attr">flame_tiled:</span> <span class="hljs-string">^1.17.0</span>   <span class="hljs-comment"># æ”¯æŒ Tiled åœ°å›¾ï¼ˆ*.tmxï¼‰è§£æï¼Œç”¨äºå…³å¡è®¾è®¡ã€åœ°å½¢å›¾å±‚ã€ç¢°æ’å±‚ç­‰</span>
</code></pre>
<blockquote>
<p>æœ¬ç« ä»…ä¼šç”¨åˆ° <code>flame</code> ,å…¶ä»–ä¾èµ–ä¼šåœ¨åç»­æ–‡ç« ä¸­ä¸€ä¸€ä½¿ç”¨ã€‚</p>
</blockquote>
<h4 data-id="heading-8">2. å¼•å…¥èµ„æº</h4>
<p>åœ¨é¡¹ç›®ï¼Œæ ¹ç›®å½•ä¸‹åˆ›å»º <strong>assets/images/</strong> æ–‡ä»¶å¤¹ï¼Œä¸“é—¨å­˜å‚¨å›¾ç‰‡èµ„æºæ–‡ä»¶ã€‚<br/>
ç„¶ååœ¨Â <code>pubspec.yaml</code>Â ä¸­é…ç½®å¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/105c60e5c41045c6b5f468f4280bc25e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=AVti6OdfCY3tk28%2B%2FZzadknxotU%3D" alt="æˆªå±2025-12-03 11.53.02.png" loading="lazy"/></p>
<hr/>
<p>è¿™é‡Œçš„å›¾ç‰‡ï¼Œæ˜¯æˆ‘åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fitch.io%2F" target="_blank" title="https://itch.io/" ref="nofollow noopener noreferrer">itch.io</a> ï¼Œæ‰¾åˆ°çš„ä¸€ä¸ªå…è´¹çš„èµ„æºã€‚<br/>
åƒç´ å°äºº <a href="https://link.juejin.cn?target=https%3A%2F%2Flucky-loops.itch.io%2Fcharacter-satyr" target="_blank" title="https://lucky-loops.itch.io/character-satyr" ref="nofollow noopener noreferrer">å¡æå°”</a>ã€‚<br/>
åŒ…å«äº† <strong>å¾…æœºã€å¥”è·‘ã€æ”»å‡»ã€æ­»äº¡ã€æ¸¸æ³³</strong> ... å¤šä¸ªåŠ¨ç”»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/623a7426150c48bdbc072bb58e0de4ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=RdOvZaA%2FG83BZNEFtpNzLQYN9O4%3D" width="100%" loading="lazy"/></p> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be90d61a5f4f4aac94ac2214561cb9ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=%2FbvdSyDEZVUAZITcioSO7vh8OWk%3D" width="100%" loading="lazy"/><p/><p/>
<h4 data-id="heading-9">3. åˆå§‹åŒ–æ¨¡æ¿</h4>
<h5 data-id="heading-10">ï¼ˆ1ï¼‰é¡¹ç›®ç›®å½•è¯´æ˜</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">lib</span>/
â”œâ”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.dart</span>          <span class="hljs-comment">// æ¸¸æˆå…¥å£</span>
â”œâ”€â”€ <span class="hljs-selector-tag">game</span>/
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">my_game</span><span class="hljs-selector-class">.dart</span>   <span class="hljs-comment">// æ¸¸æˆæ ¸å¿ƒé€»è¾‘</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">component</span>/     <span class="hljs-comment">// æ¸¸æˆä¸­å„ç±»ç»„ä»¶ï¼ˆè§’è‰²ã€æ•Œäººã€é“å…·ç­‰ï¼‰</span>
â”‚   â””â”€â”€ <span class="hljs-selector-tag">state</span>/         <span class="hljs-comment">// æ¸¸æˆå¯¹è±¡çš„çŠ¶æ€é€»è¾‘ï¼ˆè§’è‰²çŠ¶æ€ã€æ•Œäºº AI ç­‰ï¼‰</span>
</code></pre>
<ul>
<li>
<p><strong><code>main.dart</code></strong>:<br/>
å¯åŠ¨ Flutter åº”ç”¨ï¼Œåˆ›å»ºå¹¶æŒ‚è½½ <code>GameWidget</code>ï¼Œä½œä¸ºæ¸¸æˆæ¸²æŸ“å…¥å£ã€‚</p>
</li>
<li>
<p><strong><code>my_game.dart</code></strong>:<br/>
æ¸¸æˆä¸»ç±»ï¼Œç®¡ç†æ¸¸æˆä¸–ç•Œï¼ˆWorldï¼‰ã€ç›¸æœºã€è¾“å…¥å¤„ç†ã€æ›´æ–°å¾ªç¯ã€ç»„ä»¶æ·»åŠ ä¸è°ƒåº¦ã€‚</p>
</li>
<li>
<p><strong><code>component/</code></strong>:<br/>
å­˜æ”¾æ¸¸æˆä¸­çš„å„ç±»å¯å¤ç”¨ç»„ä»¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>ç©å®¶è§’è‰² <code>PlayerComponent</code></li>
<li>æ•Œäºº <code>EnemyComponent</code></li>
<li>å­å¼¹ã€é“å…·ã€éšœç¢ç‰©ç­‰</li>
</ul>
<p>è´Ÿè´£<strong>æ˜¾ç¤ºã€åŠ¨ç”»ã€ç¢°æ’ä½“ç§¯</strong>ç­‰å…·ä½“è¡¨ç°ã€‚</p>
</li>
<li>
<p><strong><code>state/</code></strong>:<br/>
æ”¾ç½®ç»„ä»¶çš„ <strong>è¡Œä¸ºçŠ¶æ€</strong> é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>è§’è‰²çŠ¶æ€ï¼ˆIdleã€Runã€Attackã€Deadï¼‰</li>
<li>æ•ŒäººçŠ¶æ€æœºï¼ˆPatrolã€Chaseã€Attackã€Dieï¼‰</li>
<li>é“å…·çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€</li>
</ul>
<p>æŠŠè¡Œä¸ºä»ç»„ä»¶ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä½¿é€»è¾‘æ›´æ¸…æ™°ã€‚</p>
</li>
</ul>
<hr/>
<h5 data-id="heading-11">ï¼ˆ2ï¼‰<code>main.dart</code> - æ¸¸æˆå…¥å£</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'game/my_game.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flame/game.dart'</span>;

<span class="hljs-keyword">void</span> main() {
  runApp(
    GameWidget(
      game: MyGame(),
    ),
  );
}
</code></pre>
<ol>
<li><strong>GameWidget</strong>ï¼š
<ul>
<li>å°† <code>MyGame</code> æ¸¸æˆå®ä¾‹åµŒå…¥ Flutter Widget æ ‘</li>
<li>è‡ªåŠ¨å¤„ç†ï¼š
<ul>
<li>æ¯å¸§åˆ·æ–° (<code>update</code> + <code>render</code>)</li>
<li>è¾“å…¥äº‹ä»¶ï¼ˆè§¦æ‘¸ã€æ‰‹åŠ¿ã€é”®ç›˜ï¼‰</li>
<li>å±å¹•å°ºå¯¸å˜åŒ– (<code>onGameResize</code>)</li>
</ul>
</li>
</ul>
</li>
<li><strong>runApp</strong>ï¼š
<ul>
<li>å¯åŠ¨ Flutter åº”ç”¨</li>
<li>æ˜¾ç¤ºæ¸¸æˆç”»é¢åˆ°å±å¹•</li>
</ul>
</li>
</ol>
<hr/>
<h5 data-id="heading-12">ï¼ˆ3ï¼‰<code>my_game.dart</code> - æ¸¸æˆæ ¸å¿ƒç±»</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flame/game.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlameGame</span> </span>{

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// åŠ è½½æ¸¸æˆèµ„æº</span>
    <span class="hljs-keyword">super</span>.onLoad();
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> update(<span class="hljs-built_in">double</span> dt) {
    <span class="hljs-comment">// æ¸¸æˆé€»è¾‘ï¼Œæ¯å¸§æ›´æ–°</span>
    <span class="hljs-keyword">super</span>.update(dt);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> render(Canvas canvas) {
    <span class="hljs-comment">// æ¸²æŸ“é€»è¾‘</span>
    <span class="hljs-keyword">super</span>.render(canvas);
  }
}
</code></pre>
<ol>
<li>
<p><strong>FlameGame</strong>ï¼š</p>
<ul>
<li>Flame çš„åŸºç¡€æ¸¸æˆç±»</li>
<li>è‡ªåŠ¨ç®¡ç†ç»„ä»¶ (<code>children</code>)</li>
<li>è‡ªåŠ¨å¤„ç†æ¸²æŸ“å¾ªç¯</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</strong>ï¼š</p>
<ul>
<li>
<p><code>onLoad()</code></p>
<ul>
<li>æ¸¸æˆå¯åŠ¨æ—¶å¼‚æ­¥åŠ è½½èµ„æºï¼ˆå›¾ç‰‡ã€éŸ³æ•ˆã€ç²¾çµè¡¨ç­‰ï¼‰</li>
<li>åœ¨è¿™é‡Œå¯ä»¥ <code>add()</code> ç»„ä»¶åˆ°æ¸¸æˆä¸­</li>
</ul>
</li>
<li>
<p><code>update(double dt)</code></p>
<ul>
<li>æ¯å¸§è°ƒç”¨ä¸€æ¬¡ï¼Œå¤„ç†æ¸¸æˆé€»è¾‘</li>
<li><code>dt</code>ï¼šä¸Šä¸€å¸§è€—æ—¶ï¼ˆç§’ï¼‰ï¼Œç”¨äºå®ç°å¸§ç‡æ— å…³ç§»åŠ¨</li>
</ul>
</li>
<li>
<p><code>render(Canvas canvas)</code></p>
<ul>
<li>æ¯å¸§ç»˜åˆ¶æ¸¸æˆç”»é¢</li>
<li><code>FlameGame</code> ä¼šè‡ªåŠ¨æ¸²æŸ“å·²æ·»åŠ çš„ç»„ä»¶</li>
</ul>
</li>
</ul>
</li>
</ol>
<hr/>
<h5 data-id="heading-13">ï¼ˆ4ï¼‰è¡¥å……è¯´æ˜</h5>
<h6 data-id="heading-14">â‘  ç»„ä»¶ç®¡ç†ï¼ˆComponentsï¼‰</h6>
<p>åœ¨ Flame ä¸­ï¼Œæ¸¸æˆä¸­çš„ä»»ä½•å…ƒç´ ï¼ˆäººç‰©ã€èƒŒæ™¯ã€é“å…·ã€ç¢°æ’ä½“ç­‰ï¼‰éƒ½åº”è¯¥å°è£…æˆ <strong>Component</strong>ã€‚</p>
<p>å¸¸ç”¨ç»„ä»¶ç±»å‹ï¼š</p>
<ul>
<li><strong>PositionComponent</strong>ï¼šå…·æœ‰ä½ç½®ã€å¤§å°ã€è§’åº¦</li>
<li><strong>SpriteComponent</strong>ï¼šæ˜¾ç¤ºä¸€å¼ é™æ€å›¾ç‰‡</li>
<li><strong>SpriteAnimationComponent</strong>ï¼šæ’­æ”¾åŠ¨ç”»åºåˆ—</li>
<li><strong>TextComponent</strong>ï¼šæ¸²æŸ“æ–‡æœ¬</li>
<li><strong>è‡ªå®šä¹‰ç»„ä»¶</strong>ï¼šç»§æ‰¿ Component</li>
</ul>
<p><strong>ğŸ‘‰ æ·»åŠ ç»„ä»¶</strong><br/>
åœ¨ <code>onLoad()</code> é‡Œæ·»åŠ ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
  add(HeroComponent());
  add(EnemyComponent());
  add(BackgroundComponent());
}
</code></pre>
<p>Flame ä¼šè´Ÿè´£ï¼š</p>
<ul>
<li>ç®¡ç†ç”Ÿå‘½å‘¨æœŸ</li>
<li>è‡ªåŠ¨è°ƒç”¨ç»„ä»¶çš„ <code>update()</code> å’Œ <code>render()</code></li>
<li>ç»Ÿä¸€æ¸²æŸ“é¡ºåºï¼ˆå¯ç”¨ priority è°ƒæ•´å±‚çº§ï¼‰</li>
</ul>
<h6 data-id="heading-15">â‘¡ è¾“å…¥äº‹ä»¶ï¼ˆInteractionï¼‰</h6>
<p>æ¸¸æˆéœ€è¦äº¤äº’æ—¶ï¼Œåªéœ€è¦è®© Game ç±»æ··å…¥<code>èƒ½åŠ›æ¨¡å—</code>ã€‚</p>
<p>å¸¸è§æ¨¡å—ï¼š</p>






























<table><thead><tr><th>è¾“å…¥ç±»å‹</th><th>æ··å…¥ (with xxx)</th><th>ç»„ä»¶éœ€ç»§æ‰¿</th></tr></thead><tbody><tr><td>ç‚¹å‡»</td><td><code>HasTappables</code></td><td><code>Tappable</code></td></tr><tr><td>æ‹–æ‹½</td><td><code>HasDraggables</code></td><td><code>Draggable</code></td></tr><tr><td>é”®ç›˜</td><td><code>KeyboardEvents</code></td><td>â€”</td></tr><tr><td>æ‰‹åŠ¿ï¼ˆé•¿æŒ‰/åŒå‡»ï¼‰</td><td><code>HasGestureDetectors</code></td><td>â€”</td></tr></tbody></table>
<p><strong>ğŸ‘‰ ä¾‹å¦‚ï¼šç‚¹å‡»è®©è§’è‰²è·³è·ƒ</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyGame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">FlameGame</span> <span class="hljs-title">with</span> <span class="hljs-title">HasTappables</span> </span>{}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteAnimationComponent</span> <span class="hljs-title">with</span> <span class="hljs-title">Tappable</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> onTapDown(TapDownInfo info) {
    <span class="hljs-comment">// ç‚¹å‡»è§¦å‘è·³è·ƒ</span>
    y -= <span class="hljs-number">50</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }
}
</code></pre>
<h6 data-id="heading-16">â‘¢ å±å¹•é€‚é…ï¼ˆonGameResizeï¼‰</h6>
<p>å½“è®¾å¤‡æ—‹è½¬ã€çª—å£å˜åŒ–æ—¶ Flame ä¼šè‡ªåŠ¨è§¦å‘ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> onGameResize(Vector2 size) {
  <span class="hljs-keyword">super</span>.onGameResize(size);
  <span class="hljs-built_in">print</span>(<span class="hljs-string">'æ–°çš„å±å¹•å¤§å° <span class="hljs-subst">$size</span>'</span>);
}
</code></pre>
<p>ä½ å¯ä»¥ç”¨å®ƒæ¥ï¼š</p>
<ul>
<li>å±…ä¸­è§’è‰²</li>
<li>è°ƒæ•´ UI å¸ƒå±€</li>
<li>è®¡ç®—ç¢°æ’åŒºåŸŸ</li>
</ul>
<p><strong>ğŸ‘‰ ä¾‹å¦‚ï¼šè®©ä¸»è§’å§‹ç»ˆåœ¨å±å¹•ä¸­å¿ƒ</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> onGameResize(Vector2 gameSize) {
  <span class="hljs-keyword">super</span>.onGameResize(gameSize);
  position = gameSize / <span class="hljs-number">2</span>;
}
</code></pre>
<h3 data-id="heading-17">ä¸‰. è‹±é›„ç™»åœº</h3>
<p>åœ¨å®Œæˆå‰ç½®æ¡ä»¶ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ­£å¼åˆ›å»ºæ¸¸æˆä¸­çš„ç¬¬ä¸€ä¸ªè§’è‰²ç»„ä»¶ <strong>HeroComponent</strong> ï¼š<br/>
<code>HeroComponent</code> ä»£è¡¨ç©å®¶è§’è‰²ï¼Œå®ƒç»§æ‰¿è‡ª Flame æä¾›çš„ <code>SpriteAnimationComponent</code>ï¼Œç”¨äºæ’­æ”¾è§’è‰²åŠ¨ç”»ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/050c6224e8de4af2b0e51c6f2f318ff9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=sgjHhx%2BdQNhlUrWsgz23TOR048I%3D" width="70%" loading="lazy"/></p><p/>
<h4 data-id="heading-18">1. HeroComponent ä»£ç </h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:myhero/game/my_game.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flame/sprite.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flame/components.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteAnimationComponent</span> <span class="hljs-title">with</span> <span class="hljs-title">HasGameReference</span>&lt;<span class="hljs-title">MyGame</span>&gt; </span>{

  HeroComponent()
      : <span class="hljs-keyword">super</span>(
          size: Vector2(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>),
          anchor: Anchor.center,
        );

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// åŠ è½½æ•´å¼ ç²¾çµå›¾</span>
    <span class="hljs-keyword">final</span> image = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'SPRITE_SHEET.png'</span>);

    <span class="hljs-comment">// æŒ‰ 32Ã—32 åˆ†å‰²ç²¾çµè¡¨</span>
    <span class="hljs-keyword">final</span> sheet = SpriteSheet(
      image: image,
      srcSize: Vector2(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>),
    );

    <span class="hljs-comment">// åˆ›å»ºåŠ¨ç”»ï¼ˆç¬¬ 0 è¡Œï¼Œå¸§ 0~5ï¼‰</span>
    animation = sheet.createAnimation(
      row: <span class="hljs-number">0</span>,
      stepTime: <span class="hljs-number">0.15</span>,
      from: <span class="hljs-number">0</span>,
      to: <span class="hljs-number">5</span>,
      loop: <span class="hljs-keyword">true</span>,
    );

    <span class="hljs-comment">// å®é™…æ¸²æŸ“å¤§å°æ”¾å¤§ä¸º 100Ã—100</span>
    size = Vector2(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);

    <span class="hljs-comment">// åˆå§‹ä½ç½®ï¼šå±å¹•ä¸­å¿ƒ</span>
    position = game.size / <span class="hljs-number">2</span>;
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onGameResize(Vector2 size) {
    <span class="hljs-keyword">super</span>.onGameResize(size);

    <span class="hljs-comment">// å±å¹•å˜åŒ–æ—¶ä¿æŒè‹±é›„å±…ä¸­</span>
    position = size / <span class="hljs-number">2</span>;
  }
}
</code></pre>
<hr/>
<h4 data-id="heading-19">2. ä»£ç è¯¦è§£</h4>
<h5 data-id="heading-20">â‘  ç»§æ‰¿ SpriteAnimationComponent</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HeroComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteAnimationComponent</span>
</span></code></pre>
<p>é€‰æ‹©è¿™ä¸ªç»„ä»¶æ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å¯è‡ªåŠ¨æ’­æ”¾é€å¸§åŠ¨ç”»</li>
<li>æ”¯æŒ <code>animation = ...</code> åŠ¨æ€åˆ‡æ¢åŠ¨ç”»ï¼ˆåç»­å¯åš idle/run/attackï¼‰</li>
<li>å·²åŒ…å«ä½ç½®ã€å¤§å°ã€è§’åº¦ç­‰å±æ€§</li>
</ul>
<hr/>
<h5 data-id="heading-21">â‘¡ super æ„é€ å‚æ•°ï¼šsize ä¸ anchor</h5>
<pre><code class="hljs language-dart" lang="dart">HeroComponent() : <span class="hljs-keyword">super</span>(size: Vector2(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>), anchor: Anchor.center);
</code></pre>
<ul>
<li><code>size: Vector2(32, 32)</code>ï¼šé€»è¾‘ä¸Šçš„ç²¾çµå°ºå¯¸</li>
<li><code>anchor: Anchor.center</code>ï¼šç»„ä»¶ä½ç½®ä»¥ä¸­å¿ƒç‚¹ä¸ºåŸºå‡†ï¼Œä¾¿äºæ—‹è½¬å’Œå±…ä¸­æ˜¾ç¤º</li>
</ul>
<hr/>
<h5 data-id="heading-22">â‘¢ onLoadï¼šåŠ è½½èµ„æºä¸åˆå§‹åŒ–åŠ¨ç”»</h5>
<p><strong>1. åŠ è½½æ•´å¼ ç²¾çµå›¾</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> image = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'SPRITE_SHEET.png'</span>);
</code></pre>
<p>Flame ä¼šè‡ªåŠ¨ç¼“å­˜å›¾ç‰‡ï¼ŒåŒä¸€ä¸ªèµ„æºä¸ä¼šé‡å¤åŠ è½½ã€‚</p>
<p><strong>2. åˆ›å»º SpriteSheet</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> sheet = SpriteSheet(image: image, srcSize: Vector2(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>));
</code></pre>
<p>è¡¨ç¤ºå›¾ç‰‡è¢«åˆ‡å‰²æˆ 32Ã—32 çš„å°æ ¼ï¼Œæ˜¯ç²¾çµå›¾ä¸­è§’è‰²åŠ¨ç”»æ¯å¸§å¤§å°ã€‚</p>
<p><strong>3. åˆ›å»ºåŠ¨ç”»</strong></p>
<pre><code class="hljs language-dart" lang="dart"> animation = sheet.createAnimation(
      row: <span class="hljs-number">0</span>,
      stepTime: <span class="hljs-number">0.15</span>,
      from: <span class="hljs-number">0</span>,
      to: <span class="hljs-number">5</span>,
      loop: <span class="hljs-keyword">true</span>,
    );
</code></pre>
<ul>
<li>rowï¼šä½¿ç”¨ç¬¬ <strong>0 è¡Œ</strong> çš„åŠ¨ç”»å¸§</li>
<li>stepTimeï¼šæ¯å¸§æ’­æ”¾æ—¶é—´ <strong>0.15 ç§’</strong></li>
<li>fromï¼šä» <strong>å¸§ 0 æ’­åˆ°å¸§ 5</strong></li>
<li>toï¼šæ’­æ”¾è‡³è¯¥è¡Œ <strong>ç¬¬5å¸§</strong></li>
<li>loop: æ˜¯å¦å¾ªç¯æ’­æ”¾</li>
</ul>
<hr/>
<p><strong>4. è®¾ç½®æ¸²æŸ“å°ºå¯¸</strong></p>
<pre><code class="hljs language-dart" lang="dart">    size = Vector2(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
</code></pre>
<p>è™½ç„¶åŸå›¾æ˜¯ 32Ã—32ï¼Œä½†æ¸²æŸ“æ—¶å¯ä»¥æ”¾å¤§åˆ° 100Ã—100 æ›´æ¸…æ™°ã€‚</p>
<hr/>
<p><strong>5. åˆæ¬¡å®šä½ä¸å±å¹•é€‚é…</strong></p>
<ul>
<li>åˆæ¬¡è¿›å…¥æ¸¸æˆæ—¶å±…ä¸­ï¼š
<pre><code class="hljs language-dart" lang="dart">position = game.size / <span class="hljs-number">2</span>;
</code></pre>
</li>
<li>å±å¹•å°ºå¯¸å˜åŒ–æ—¶é‡æ–°å±…ä¸­ï¼š
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> onGameResize(Vector2 size) {
      position = size / <span class="hljs-number">2</span>;
    }
</code></pre>
</li>
</ul>
<p>åœºæ™¯å˜åŒ–ï¼ˆæ¨ªå±ã€ç«–å±ã€çª—å£å¤§å°å˜åŒ–ï¼‰åï¼Œä¸»è§’ä»ä¿æŒåœ¨å±å¹•ä¸­å¿ƒã€‚</p>
<h3 data-id="heading-23">å››. éšå¿ƒæ‰€åŠ¨</h3>
<p>äººç‰©æ¸²æŸ“å‡ºæ¥åï¼Œæœ€æ ¸å¿ƒçš„äº¤äº’èƒ½åŠ›å°±æ˜¯ <strong>ç§»åŠ¨</strong>ã€‚<br/>
ä¸€ä¸ªå®Œå–„ã€è‡ªç„¶ã€æµç•…çš„ç§»åŠ¨ç³»ç»Ÿé€šå¸¸åŒ…å«ä¸‹é¢ <strong>ä¸‰ä¸ªå…³é”®æ­¥éª¤</strong>ï¼š</p>
<ol>
<li><strong>è¾“å…¥æ§åˆ¶</strong>ï¼šæ•è·ç©å®¶æ“ä½œï¼ˆæ‘‡æ†/é”®ç›˜/æ‰‹åŠ¿ï¼‰</li>
<li><strong>çŠ¶æ€æœºé©±åŠ¨åŠ¨ç”»</strong>ï¼šæ ¹æ®ç§»åŠ¨çŠ¶æ€åˆ‡æ¢å¯¹åº”åŠ¨ç”»</li>
<li><strong>æ–¹å‘æ§åˆ¶</strong>ï¼šè§’è‰²è‡ªåŠ¨æœå‘ç§»åŠ¨æ–¹å‘ï¼ˆç¿»è½¬ï¼‰</li>
</ol>
<p>ä¸‹é¢å°†ä¸€æ­¥æ­¥å®Œå–„è¿™ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<hr/>
<h4 data-id="heading-24">1. åˆ›å»ºæ‘‡æ†ï¼Œå®ç°åŸºç¡€ç§»åŠ¨</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eeeb775ce6d341808fecd57fa30a8f36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=87s12LKwww8shn6RuzSOoNOHX7w%3D" width="70%" loading="lazy"/></p><p/>
<p>ç§»åŠ¨çš„ç¬¬ä¸€æ­¥æ˜¯æ•è·ç©å®¶è¾“å…¥ã€‚<br/>
Flame æä¾›äº†ç°æˆçš„ <code>JoystickComponent</code>ï¼Œé€šè¿‡å®ƒå¯ä»¥è½»æ¾å®ç°è™šæ‹Ÿæ‘‡æ†æ§åˆ¶ã€‚</p>
<p><strong>â‘  åˆ›å»ºæ‘‡æ†ç»„ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// åˆ›å»ºæ‘‡æ†</span>
    joystick = JoystickComponent(
      knob: CircleComponent(radius: <span class="hljs-number">30</span>, paint: Paint()..color = Colors.white70),
      background: CircleComponent(
        radius: <span class="hljs-number">80</span>,
        paint: Paint()..color = Colors.black87,
      ),
      margin: <span class="hljs-keyword">const</span> EdgeInsets.only(left: <span class="hljs-number">50</span>, bottom: <span class="hljs-number">50</span>),
    );
</code></pre>
<p><strong>â‘¡ æ ¹æ®æ‘‡æ†ç§»åŠ¨äººç‰©</strong></p>
<pre><code class="hljs language-dart" lang="dart"> <span class="hljs-comment">// æ¯ç§’ç§»åŠ¨é€Ÿåº¦</span>
  <span class="hljs-built_in">double</span> speed = <span class="hljs-number">160</span>;
  
  <span class="hljs-meta">@override</span>
    <span class="hljs-keyword">void</span> update(<span class="hljs-built_in">double</span> dt) {
      <span class="hljs-keyword">super</span>.update(dt);

      <span class="hljs-keyword">final</span> joy = game.joystick;

      <span class="hljs-keyword">if</span> (joy.direction != JoystickDirection.idle) {
        <span class="hljs-comment">// è·å–å•ä½æ–¹å‘å‘é‡ï¼Œä¾‹å¦‚ (0.7, -0.3)</span>
        Vector2 dir = joy.relativeDelta;
        position += dir * speed * dt;
      }
    }
</code></pre>
<p>åœ¨ç§»åŠ¨æ›´æ–°é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦å…³å¿ƒä¸¤ä¸ªå˜é‡ï¼š</p>
<ul>
<li>
<p><strong>directionï¼ˆæ‘‡æ†æ–¹å‘ï¼‰</strong>ï¼š</p>























































<table><thead><tr><th>æ–¹å‘</th><th>è§’åº¦èŒƒå›´ï¼ˆåº¦ï¼‰</th><th>ç®€è¦è¯´æ˜</th></tr></thead><tbody><tr><td><strong>idle</strong></td><td>â€”</td><td>æ²¡æœ‰è¾“å…¥ï¼ˆ<code>delta.isZero()</code>ï¼‰</td></tr><tr><td><strong>up</strong></td><td>0Â° ~ 22.5Â°ã€337.5Â° ~ 360Â°</td><td>ä¸Šæ–¹ï¼ˆåŒ…å«å·¦å³ä¸¤ç«¯çš„å°èŒƒå›´ï¼‰</td></tr><tr><td><strong>upRight</strong></td><td>22.5Â° ~ 67.5Â°</td><td>å³ä¸Š</td></tr><tr><td><strong>right</strong></td><td>67.5Â° ~ 112.5Â°</td><td>å³</td></tr><tr><td><strong>downRight</strong></td><td>112.5Â° ~ 157.5Â°</td><td>å³ä¸‹</td></tr><tr><td><strong>down</strong></td><td>157.5Â° ~ 202.5Â°</td><td>ä¸‹</td></tr><tr><td><strong>downLeft</strong></td><td>202.5Â° ~ 247.5Â°</td><td>å·¦ä¸‹</td></tr><tr><td><strong>left</strong></td><td>247.5Â° ~ 292.5Â°</td><td>å·¦</td></tr><tr><td><strong>upLeft</strong></td><td>292.5Â° ~ 337.5Â°</td><td>å·¦ä¸Š</td></tr></tbody></table>
</li>
<li>
<p><strong>relativeDeltaï¼ˆæ ‡å‡†åŒ–åçš„æ–¹å‘å‘é‡ï¼‰</strong>ï¼š<br/>
å®ƒç”±æ‘‡æ†å½“å‰çš„åç§»é‡è‡ªåŠ¨ <code>å½’ä¸€åŒ–</code> å¾—åˆ°ï¼Œè¡¨ç¤º<strong>çº¯ç²¹çš„æ–¹å‘</strong>ï¼ˆé•¿åº¦å§‹ç»ˆä¸º 1ï¼‰ã€‚</p>
</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>position += dir * speed * dt æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</strong></p>
<p>æŒ‰å½“å‰æ–¹å‘ <code>dir</code>ï¼Œä¹˜ä»¥ç§»åŠ¨é€Ÿåº¦ <code>speed</code>ï¼Œä¹˜ä»¥æœ¬å¸§çš„æ—¶é—´ <code>dt</code>ï¼Œæ›´æ–°è§’è‰²ä½ç½®ã€‚<br/>
å…¬å¼å¯ä»¥æ‹†æˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ä½ç§» = æ–¹å‘å‘é‡ <span class="hljs-built_in">dir</span> Ã— é€Ÿåº¦ speed Ã— æ—¶é—´ dt
æ–°ä½ç½® = æ—§ä½ç½® + ä½ç§»
</code></pre>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li><code>dir = (1, 0)</code>ï¼ˆå‘å³ï¼‰</li>
<li><code>speed = 200</code> åƒç´ /ç§’</li>
<li><code>dt = 0.016</code>ï¼ˆ60FPSï¼‰</li>
</ul>
<p>è®¡ç®—ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ä½ç§» = (<span class="hljs-number">1</span>, <span class="hljs-number">0</span>) * <span class="hljs-number">200</span> * <span class="hljs-number">0.016</span>
    = (<span class="hljs-number">3.2</span>, <span class="hljs-number">0</span>)
<span class="hljs-attribute">position</span> = <span class="hljs-attribute">position</span> + (<span class="hljs-number">3.2</span>, <span class="hljs-number">0</span>)
</code></pre>
<p>ğŸ‘‰ è§’è‰²è¿™ä¸€å¸§ <strong>å‘å³ç§»åŠ¨äº† 3.2 åƒç´ ã€‚</strong></p>
</blockquote>
<p>è™½ç„¶è¿™é‡Œå·²ç»å®Œæˆäº†è§’è‰²çš„<strong>ä½ç½®ç§»åŠ¨</strong>ï¼Œä½†æ­¤æ—¶è§’è‰²çš„åŠ¨ç”»ä»ç„¶åœç•™åœ¨ <strong>å¾…æœºï¼ˆIdleï¼‰çŠ¶æ€</strong>ã€‚<br/>
åŸå› æ˜¯ï¼š</p>
<ul>
<li><strong>ç›®å‰åªæ¸²æŸ“äº†å•ä¸ªå¾…æœºåŠ¨ç”»</strong> â€”â€” æœªå»ºç«‹å¯åˆ‡æ¢çš„åŠ¨ç”»çŠ¶æ€é›†åˆã€‚</li>
<li><strong>ç§»åŠ¨é€»è¾‘å’ŒåŠ¨ç”»é€»è¾‘æ˜¯ç‹¬ç«‹çš„</strong> â€”â€” ä½ç½®æ”¹å˜ä¸ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ° <code>è·‘æ­¥/è¡Œèµ°</code> åŠ¨ç”»ã€‚</li>
</ul>
<h4 data-id="heading-25">2. æ ¹æ®çŠ¶æ€åˆ‡æ¢åŠ¨ç”»</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55d8bb0067b94b92b704218cd155c1df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=AqSEgik%2BwXo9Ben%2FoSol%2BE4fwf4%3D" width="70%" loading="lazy"/></p><p/>
<p>ç§»åŠ¨ä¸ä»…è¦ä½ç§»ï¼Œè¿˜è¦ <strong>è¡Œä¸ºè¡¨ç°</strong>ã€‚<br/>
è¦ä½¿è§’è‰²è‡ªç„¶åœ° <code>èµ°èµ·æ¥ / åœä¸‹æ¥</code>ï¼Œæˆ‘ä»¬å¿…é¡»æ ¹æ®å½“å‰çŠ¶æ€å†³å®šæ¸²æŸ“å“ªä¸ªåŠ¨ç”»ã€‚</p>
<p><strong>â‘  å®šä¹‰è§’è‰²çŠ¶æ€</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">enum</span> HeroState {
 idle,
 run,
 swim,
 attack,
 hurt,
 die,
}
</code></pre>
<p><strong>â‘¡ çŠ¶æ€æ”¹å˜æ—¶æ›´æ–°å¯¹åº”çš„åŠ¨ç”»</strong></p>
<pre><code class="hljs language-dart" lang="dart">HeroState state = HeroState.idle;

<span class="hljs-keyword">void</span> _setState(HeroState newState) {
  <span class="hljs-keyword">if</span> (state == newState) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// é¿å…é‡å¤åˆ‡æ¢</span>

  state = newState;
  animation = animations[state]!;
}
</code></pre>
<p><strong>â‘¢ åŠ è½½åŠ¨ç”»å¸§ï¼Œç”ŸæˆåŠ¨ç”»é›†åˆ</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">late</span> <span class="hljs-built_in">Map</span>&lt;HeroState, SpriteAnimation&gt; animations;

Future&lt;<span class="hljs-keyword">void</span>&gt; _loadAnimations() <span class="hljs-keyword">async</span> {
  <span class="hljs-keyword">final</span> image = <span class="hljs-keyword">await</span> game.images.load(<span class="hljs-string">'SPRITE_SHEET.png'</span>);
  <span class="hljs-keyword">final</span> sheet = SpriteSheet(image: image, srcSize: Vector2(<span class="hljs-number">32</span>, <span class="hljs-number">32</span>));

  animations = {
    HeroState.idle: sheet.createAnimation(
      row: <span class="hljs-number">0</span>,
      stepTime: <span class="hljs-number">0.15</span>,
      from: <span class="hljs-number">0</span>,
      to: <span class="hljs-number">6</span>,
      loop: <span class="hljs-keyword">true</span>,
    ),
    HeroState.run: sheet.createAnimation(
      row: <span class="hljs-number">1</span>,
      stepTime: <span class="hljs-number">0.10</span>,
      from: <span class="hljs-number">0</span>,
      to: <span class="hljs-number">8</span>,
      loop: <span class="hljs-keyword">true</span>,
    ),
  };
}
</code></pre>
<p><strong>â‘£ åœ¨ update() ä¸­æ ¹æ®è¾“å…¥åˆ‡æ¢çŠ¶æ€</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-meta">@override</span>
<span class="hljs-keyword">void</span> update(<span class="hljs-built_in">double</span> dt) {
  <span class="hljs-keyword">super</span>.update(dt);

  <span class="hljs-keyword">final</span> joy = game.joystick;

  <span class="hljs-keyword">if</span> (joy.direction == JoystickDirection.idle) {
    _setState(HeroState.idle);
  } <span class="hljs-keyword">else</span> {
    _setState(HeroState.run);
    position += joy.relativeDelta * speed * dt;
  }
}
</code></pre>
<p>è‡³æ­¤ï¼Œè§’è‰²çš„åŠ¨ä½œå·²ç»å¯ä»¥<strong>éšç€æ‘‡æ†ç§»åŠ¨è‡ªåŠ¨åˆ‡æ¢åŠ¨ç”»</strong>ï¼Œçœ‹èµ·æ¥è¡Œèµ°æ›´åŠ è‡ªç„¶ã€‚</p>
<p>ä½†æ˜¯å½“ <strong>æ‘‡æ†æ–¹å‘</strong> ä¸ <strong>è§’è‰²å½“å‰æœå‘</strong> ç›¸ <strong>å</strong> æ—¶ï¼Œè§’è‰²çœ‹èµ·æ¥å°±åƒ <strong>å€’é€€è¡Œèµ°</strong>ï¼Œè¿™æ˜¾ç„¶ä¸ç¬¦åˆè®¤çŸ¥ä¹ æƒ¯ã€‚</p>
<h4 data-id="heading-26">3. åˆ†ææ‘‡æ†æ–¹å‘ï¼Œå®ç°å·¦å³ç¿»è½¬</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ccdbe7e34d4472a82792b9b6527a4d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=hxeUuCGCAtDG39r1P2DZlhOYlNY%3D" width="70%" loading="lazy"/></p><p/>
<p>ä¸€ä¸ªæ¨ªç‰ˆ <code>RPG/ARPG</code> ä¸­ï¼Œè§’è‰²é€šå¸¸ä½¿ç”¨ <strong>åŒä¸€å¥—ç«–ç›´æ–¹å‘å¸§</strong>ï¼Œéœ€è¦é€šè¿‡ <strong>æ°´å¹³ç¿»è½¬</strong> æ¥è¡¨ç° <code>æœå·¦/æœå³</code>ã€‚</p>
<blockquote>
<p>Flame æä¾›äº†ç¿»è½¬æ–¹æ³•ï¼š<code>flipHorizontally()</code></p>
</blockquote>
<p><strong>â‘  å…·ä½“ç¿»è½¬æ–¹æ³•</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">bool</span> facingRight = <span class="hljs-keyword">true</span>;

<span class="hljs-keyword">void</span> _faceRight() {
  <span class="hljs-keyword">if</span> (!facingRight) {
    flipHorizontally();
    facingRight = <span class="hljs-keyword">true</span>;
  }
}

<span class="hljs-keyword">void</span> _faceLeft() {
  <span class="hljs-keyword">if</span> (facingRight) {
    flipHorizontally();
    facingRight = <span class="hljs-keyword">false</span>;
  }
}
</code></pre>
<p><strong>â‘¡ æ ¹æ®æ‘‡æ†æ–¹å‘ç¿»è½¬è§’è‰²</strong></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">if</span> (joy.relativeDelta.x &gt; <span class="hljs-number">0</span>) {
  _faceRight();
} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (joy.relativeDelta.x &lt; <span class="hljs-number">0</span>) {
  _faceLeft();
}
</code></pre>
<blockquote>
<p>é€šè¿‡åˆ¤æ–­æ‘‡æ† <code>relativeDelta.x</code> çš„æ­£è´Ÿå€¼ï¼Œå°±å¯ä»¥ç¡®å®šè§’è‰²åº”è¯¥é¢å‘çš„æ–¹å‘ï¼š</p>
<ul>
<li>å½“ <code>relativeDelta.x &gt; 0</code> æ—¶ï¼Œæ‘‡æ†å‘å³ï¼Œè§’è‰²åº”é¢å‘å³æ–¹</li>
<li>å½“ <code>relativeDelta.x &lt; 0</code> æ—¶ï¼Œæ‘‡æ†å‘å·¦ï¼Œè§’è‰²åº”é¢å‘å·¦æ–¹</li>
<li>å½“ <code>relativeDelta.x == 0</code> æ—¶ï¼Œè§’è‰²æ°´å¹³æœå‘ä¿æŒä¸å˜</li>
</ul>
</blockquote>
<p>è¿™ç§æ–¹æ³•éå¸¸ç®€å•é«˜æ•ˆï¼Œæ— éœ€è®¡ç®—è§’åº¦ï¼Œåœ¨è§’è‰²ç§»åŠ¨æ—¶è‡ªåŠ¨ç¿»è½¬ï¼Œé¿å…äº† <strong>å€’é€€è¡Œèµ°</strong>ã€‚</p>
<h3 data-id="heading-27">äº”. æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-28">æ€»ç»“</h4>
<p>æœ¬ç« ä¸»è¦ä»‹ç»äº† <strong>Flutter&amp;Flame</strong> å¼€å‘ <strong>2Dåƒç´ æ¸¸æˆ</strong> å…³äº <code>ä¸»è§’äººç‰©</code> çš„åŸºç¡€å®è·µã€‚<br/>
é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªåƒç´ é£æ¸¸æˆè§’è‰²çš„æ­å»ºä¸ç§»åŠ¨æ§åˆ¶ï¼Œä¸»è¦åŒ…æ‹¬äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><strong>è§’è‰²ä¸åŠ¨ç”»</strong>ï¼šä½¿ç”¨ç²¾çµå›¾ (<code>SpriteSheet</code>) åˆ›å»ºè§’è‰²ï¼Œæ”¯æŒ idle/run ç­‰åŠ¨ç”»çŠ¶æ€åˆ‡æ¢ã€‚</li>
<li><strong>ç©å®¶äº¤äº’</strong>ï¼šé€šè¿‡æ‘‡æ†æ§åˆ¶è§’è‰²ç§»åŠ¨ï¼Œå¹¶æ ¹æ®æ–¹å‘ç¿»è½¬åŠ¨ç”»ã€‚</li>
</ul>
<h4 data-id="heading-29">å±•æœ›</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48d840c0943b48dc974afc9d4952fefd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362821&amp;x-signature=n2oCiFWHuGWy4HCRsCh9s69HPUs%3D" width="100%" loading="lazy"/></p><p/>
<p align="center"><i>ä¹‹å‰å°è¯•çš„Demoé¢„è§ˆ</i></p>
<ul>
<li>
<p>åœ¨ <strong>Tiled</strong> ä¸­åˆ¶ä½œä¸“å±åœ°å›¾ï¼ŒåŒ…å«ä¸åŒå±‚çº§å’Œç¢°æ’åŒºåŸŸã€‚</p>
</li>
<li>
<p>åœ¨ Flutter ä¸­åŠ è½½åœ°å›¾ï¼Œå¹¶å®Œå–„ç¢°æ’é€»è¾‘ã€‚</p>
</li>
<li>
<p>å®ç°ç›¸æœºè·Ÿéšç©å®¶ç§»åŠ¨ã€‚</p>
</li>
<li>
<p>å®Œæˆæ”»å‡»ä¸æŠ€èƒ½ç³»ç»Ÿï¼ŒåŒ…æ‹¬åŠ¨ç”»åˆ‡æ¢ã€æ”»å‡»èŒƒå›´å’Œè¿œç¨‹å¼¹é“ã€‚</p>
</li>
<li>
<p>å®ç°æ€ªç‰©ç”Ÿæˆã€è‡ªåŠ¨æ”»å‡»ä¸ç©å®¶ç¢°æ’é€»è¾‘ã€‚</p>
</li>
<li>
<p>æ”¯æŒå±€åŸŸç½‘å¤šç©å®¶è”æœºåŠŸèƒ½ã€‚</p>
</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTheSyart%2Fmyhero" target="_blank" title="https://github.com/TheSyart/myhero" ref="nofollow noopener noreferrer">ğŸšª github æºç </a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.shanchen.space" target="_blank" title="https://www.shanchen.space" ref="nofollow noopener noreferrer">ğŸ’» ä¸ªäººé—¨æˆ·ç½‘ç«™</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[windowsè‡ªåŠ¨ä»»åŠ¡å®šæœŸæ‰§è¡Œ]]></title>    <link>https://juejin.cn/post/7579453456018210857</link>    <guid>https://juejin.cn/post/7579453456018210857</guid>    <pubDate>2025-12-03T10:22:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579453456018210857" data-draft-id="7579213860572086326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="windowsè‡ªåŠ¨ä»»åŠ¡å®šæœŸæ‰§è¡Œ"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-03T10:22:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿è¿·ä¸æƒ³ä¸Šç­"/> <meta itemprop="url" content="https://juejin.cn/user/2799801568605741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            windowsè‡ªåŠ¨ä»»åŠ¡å®šæœŸæ‰§è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799801568605741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿è¿·ä¸æƒ³ä¸Šç­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:22:26.000Z" title="Wed Dec 03 2025 10:22:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éœ€æ±‚ï¼šæœåŠ¡å™¨é™„ä»¶è½¬æ¢ä¼šæœ‰ä¸€ä»½ç¼“å­˜åœ¨æœ¬åœ°ï¼Œç£ç›˜æ»¡äº†ä»¥åå¯¼è‡´è‡ªåŠ¨ä»»åŠ¡å¤±è´¥ï¼Œæä¸€ä¸ªbatæˆ–è€…ps1è„šæœ¬é€šè¿‡windowsçš„è‡ªåŠ¨å®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼Œé¿å…è½¬æ¢ä¸­å¿ƒæœåŠ¡åœæ‘†</p>
<h2 data-id="heading-0">ç›´æ¥ä¸Šè„šæœ¬</h2>
<pre><code class="hljs language-js" lang="js">@echo off
setlocal enabledelayedexpansion
:: éœ€è¦åˆ é™¤çš„ç¼“å­˜ç›®æ ‡åœ°å€
set <span class="hljs-string">"TARGET_DIR=C:\filestorage"</span>
:: æœˆä»½å‚æ•°ï¼ˆä½ æƒ³åˆ å‡ ä¸ªæœˆçš„ï¼‰
set <span class="hljs-string">"MONTHS=3"</span>
:: logæ‰“å°åœ°å€
set <span class="hljs-string">"LOG_FILE=C:\logs\cleanup_log.txt"</span>

echo %date% %time% å¼€å§‹æ¸…ç† &gt;&gt; <span class="hljs-string">"%LOG_FILE%"</span>

:: è®¡ç®—<span class="hljs-number">3</span>ä¸ªæœˆå‰çš„æ—¥æœŸ
<span class="hljs-keyword">for</span> /f <span class="hljs-string">"tokens=1-3 delims=/"</span> %%a <span class="hljs-keyword">in</span> (<span class="hljs-string">"%date%"</span>) <span class="hljs-keyword">do</span> (
    set current_day=%%a
    set current_month=%%b
    set current_year=%%c
)

:: è¿™é‡Œä½¿ç”¨<span class="hljs-title class_">PowerShell</span>æ¥è®¡ç®—å‡†ç¡®æ—¥æœŸ
<span class="hljs-keyword">for</span> /f <span class="hljs-string">"delims="</span> %%i <span class="hljs-keyword">in</span> (<span class="hljs-string">'powershell -Command "Get-Date (Get-Date).AddMonths(-%MONTHS%) -Format '</span>yyyyMMdd<span class="hljs-string">'"'</span>) <span class="hljs-keyword">do</span> (
    set cutoff_date=%%i
)

echo æ­£åœ¨æ¸…ç† %<span class="hljs-variable constant_">TARGET_DIR</span>% ä¸­è¶…è¿‡ %<span class="hljs-variable constant_">MONTHS</span>% ä¸ªæœˆçš„æ–‡ä»¶...
echo æˆªæ­¢æ—¥æœŸ: %cutoff_date%

:: ä½¿ç”¨forfileså‘½ä»¤ï¼ˆéœ€è¦<span class="hljs-title class_">Windows</span> <span class="hljs-title class_">Vista</span>åŠä»¥ä¸Šï¼‰
forfiles /p <span class="hljs-string">"%TARGET_DIR%"</span> /s /m *.* <span class="hljs-regexp">/d -%MONTHS% /</span>c <span class="hljs-string">"cmd /c echo åˆ é™¤ @path &amp;&amp; del @path"</span>

echo %date% %time% æ¸…ç†å®Œæˆ &gt;&gt; <span class="hljs-string">"%LOG_FILE%"</span>
echo æ¸…ç†å®Œæˆï¼
pause
</code></pre>
<p>ä¿å­˜ä¸º<code>.bat</code>æ–‡ä»¶</p>
<p>å¯ä»¥å…ˆç‚¹å‡»æ–‡ä»¶æ‰§è¡Œå°è¯•ï¼ˆè°ƒè¯•ï¼Œå¡«åŠ æ›´ä¸°å¯Œçš„logï¼Œæ¢æ¸…ç†é€»è¾‘å°±æŠŠ<code>.batåç¼€</code>æ”¹æˆ<code>.txtåç¼€</code>å†ç¼–è¾‘ï¼‰</p>
<p>å¦‚æœæ–‡ä»¶æ¯”è¾ƒé‡è¦å»ºè®®<code>å¤‡ä»½åå†æ</code></p>
<p>å¦‚æœä½ <code>çœ‹ä¸åˆ°æ–‡ä»¶åç¼€</code></p>
<p>æ–‡ä»¶ç®¡ç†--æŸ¥çœ‹--é€‰é¡¹--æ›´æ”¹æ–‡ä»¶å¤¹å’Œæœç´¢é€‰é¡¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c0056c62b3e49879ffe06d15526befa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=XwaFgdLSGGMeWmTTcPrC2ehimBw%3D" alt="image.png" loading="lazy"/></p>
<p>å–æ¶ˆæ‰è¿™é¡¹--<code>éšè—å·²çŸ¥æ–‡ä»¶ç±»å‹çš„æ‰©å±•å</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db9b0654355141138abfaa70a3c00593~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=lyc706z7O3szpVkc2qXvRIFlJyM%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰§è¡Œåå°±èƒ½çœ‹åˆ°ä¸€ä¸ªè¿™æ ·çš„ç•Œé¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec09057ddcb048df92046df1aeb1132c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=1uxO9tdDmLAcYk%2FUmAC7dTX4IqY%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœ<code>æç¤ºæ‹’ç»è®¿é—®</code>ä¹Ÿæ²¡ä»€ä¹ˆäº‹ï¼Œæƒé™é—®é¢˜ï¼Œä¸è€½è¯¯ä½¿ç”¨ï¼Œå³é”®ç®¡ç†å‘˜èº«ä»½æ‰§è¡Œå°±æ²¡äº†</p>
<p>åœ¨æ—¥å¿—ä¸­èƒ½çœ‹åˆ°<code>å…·ä½“æ‰§è¡Œè®°å½•</code>ï¼ˆæ—¥å¿—åœ¨æˆ‘ä»¬çš„è„šæœ¬é‡Œå†™äº†å…·ä½“è·¯å¾„ LOG_FILEï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b897d2f4404c437eb314733a422adc26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=q6Y0cTvUh82CdkjahOfYul0xC5w%3D" alt="image.png" loading="lazy"/></p>
<p>è¡Œå¾—é€šåé€šè¿‡windowsæ·»åŠ è‡ªåŠ¨ä»»åŠ¡ï¼Œè®°å¾—æŠŠä»£ç æœ€åä¸€è¡Œçš„<code>pauseå»æ‰</code>ï¼Œä¸ç„¶ä¼šå¯¼è‡´è‡ªåŠ¨ä»»åŠ¡å¤„äº<code>ä¸€ç›´æ‰§è¡Œ</code>çš„çŠ¶æ€</p>
<h2 data-id="heading-1">windowsæ·»åŠ è‡ªåŠ¨ä»»åŠ¡æµç¨‹</h2>
<p><code>win+r</code>æ‰“å¼€è¿è¡Œ--è¾“å…¥<code>cmd</code>æ‰“å¼€å‘½ä»¤è¡Œçª—å£å--è¾“å…¥<code>taskschd.msc</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a21b5d788905464ca916edffe1f50b33~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=Hj3I3R3QrlkQmYC2BkJCiQxufm8%3D" alt="image.png" loading="lazy"/></p>
<p>å³é”®ä»»åŠ¡è®¡åˆ’ç¨‹åºåº“--åˆ›å»ºåŸºæœ¬ä»»åŠ¡--è¾“å…¥ä»»åŠ¡åç§°</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4489d5eb2164410b945ba585b1068cbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=XOykjzT7MJLckeyk1seeSngIkrQ%3D" alt="image.png" loading="lazy"/></p>
<p>è§¦å‘å™¨è®¾ç½®ï¼ˆæŒ‰è‡ªå·±çš„éœ€æ±‚æ¥ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32714197e89a489a95b7d2f370f6e9e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=sadDh8h9L82Np8FAsaq3jq6O4o0%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯æ—¥ï¼ˆè®¾ç½®æ‰§è¡Œæ—¶é—´ï¼Œé—´éš”ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/553c2ecfb3014b0aba9e9d706fcf264c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=eibKiUnwyC6CoN0kK7hNlNPceAM%3D" alt="image.png" loading="lazy"/></p>
<p>æ“ä½œï¼ˆé»˜è®¤å³å¯ï¼‰</p>
<p>å¯åŠ¨ç¨‹åº--é€šè¿‡æµè§ˆé€‰æ‹©æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„.batçš„è„šæœ¬çš„æ–‡ä»¶ä½ç½®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1776ffcb2931408eb7237b3d3765071f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=NkL1pfVDRnAxIfQj5sY1lxfzQmc%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹ä¸€æ­¥ï¼Œç‚¹å‡»å®Œæˆå³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf87ec25fc3a4abbb4d2550a4953f611~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=JAOTfwsKnWR0DMdAsHxre7dGUM8%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆåè¿˜éœ€è¦å³é”®ç‚¹å‡»æˆ‘ä»¬åˆ›å»ºçš„ä»»åŠ¡--<code>å±æ€§</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72606845e42645b5a8555c1a53eace5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=KZCqy2qIFC1uNakxOeuPywbjGYw%3D" alt="image.png" loading="lazy"/></p>
<p>å‹¾é€‰å¸¸è§„é€‰é¡¹å¡ä¸­çš„å®ƒä»¬</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d4866c7c28a420fa9d2a0e202f330bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=PQav94bgpZ2LJjxi%2FNeQw0OPJmM%3D" alt="image.png" loading="lazy"/></p>
<p>æ¡ä»¶ä¸­ä¹Ÿæœ‰ä¸€äº›é€‰é¡¹ï¼ŒæŒ‰è‡ªå·±çš„éœ€è¦æ¥</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62df035fb9274441b7df7b7a96240791~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=xmVZ9f4jUqZJcxJNMzgWU9ajoDg%3D" alt="image.png" loading="lazy"/></p>
<p>éƒ½å¤„ç†å¥½åå°±å¯ä»¥<code>ç‚¹å‡»è¿è¡Œ</code>æˆ–è€…<code>ä¿®æ”¹æ‰§è¡Œæ—¶é—´</code>ä¸ºä¸‹ä¸€åˆ†é’Ÿè§¦å‘ä¸€ä¸‹ï¼Œçœ‹æœ‰æ²¡æœ‰æˆåŠŸäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbaad4c0fb6d4348a79dda30ddfa7309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6L-35LiN5oOz5LiK54-t:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765362146&amp;x-signature=7Ui6F4iOrvzN7Rm1hOu5tjqzMcQ%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JPA çš„è„æ£€æŸ¥ï¼šä¸€æ¬¡â€œæ²¡ save() å´æ›´æ–°äº†â€çš„æ’æŸ¥è®°å½•]]></title>    <link>https://juejin.cn/post/7579298511072493568</link>    <guid>https://juejin.cn/post/7579298511072493568</guid>    <pubDate>2025-12-03T10:28:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579298511072493568" data-draft-id="7577663384423825459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JPA çš„è„æ£€æŸ¥ï¼šä¸€æ¬¡â€œæ²¡ save() å´æ›´æ–°äº†â€çš„æ’æŸ¥è®°å½•"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T10:28:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº‘çƒŸé£˜æ¸ºo"/> <meta itemprop="url" content="https://juejin.cn/user/1978776662850525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JPA çš„è„æ£€æŸ¥ï¼šä¸€æ¬¡â€œæ²¡ save() å´æ›´æ–°äº†â€çš„æ’æŸ¥è®°å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1978776662850525/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº‘çƒŸé£˜æ¸ºo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:28:59.000Z" title="Wed Dec 03 2025 10:28:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¬¬ 11 ç¯‡ Â· å…±100ç¯‡ï½œç”¨ä»£ç ä¸ˆé‡æˆé•¿ â€”â€” åšæŒå†™ä¸‹å»ï¼Œå°±æ˜¯æœ€å¥½çš„æˆé•¿ã€‚</p>
<p>Hibernateï¼šä½ ä¸ saveï¼Œæˆ‘ä¹Ÿè¦å¸®ä½  UPDATE</p>
<p>é‚£å¤©åœ¨æ’æŸ¥ä¸€ä¸ªæŒºè¯¡å¼‚çš„äº‹ï¼š<br/>
æŸä¸ªåˆ†è¡¨ç³»ç»Ÿï¼ˆç”¨çš„æ˜¯ ShardingSphereï¼‰ï¼Œæ—¥å¿—é‡Œå‡ºç°äº†å¥‡æ€ªçš„æ›´æ–°ã€‚æ˜æ˜ä¸šåŠ¡é€»è¾‘åªæ”¹äº†ä¸€æ¡æ•°æ®ï¼Œæœ€åè·¯ç”±æ—¥å¿—å´æ˜¾ç¤ºæ›´æ–°äº†å¥½å‡ å¼ åˆ†è¡¨ã€‚</p>
<p>æœ€å¼€å§‹æˆ‘ä»¬éƒ½ä»¥ä¸ºæ˜¯ SQL å†™é”™äº†ï¼Œæˆ–è€… ShardingSphere çš„åˆ†ç‰‡é…ç½®æœ‰é—®é¢˜ã€‚ç»“æœä¸€é€šè·Ÿè¸ªä¸‹æ¥ï¼Œå‘ç°é—®é¢˜æ ¹æœ¬ä¸åœ¨ SQLï¼Œè€Œåœ¨ <strong>JPA è‡ªå·±å¹²çš„â€œå¥½äº‹â€</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-0">â€œæˆ‘æ²¡ save()ï¼Œå®ƒè‡ªå·±å°± UPDATE äº†ï¼Ÿâ€</h3>
<p>å½“æ—¶ä¸šåŠ¡ä»£ç å¤§æ¦‚é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Transactional</span>
public void updateOrder() {
    <span class="hljs-attribute">Order</span> <span class="hljs-attribute">order</span> = orderRepo<span class="hljs-selector-class">.findById</span>(<span class="hljs-number">9527</span>L)<span class="hljs-selector-class">.orElseThrow</span>();
    <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setStatus</span>("PAID");
    <span class="hljs-attribute">order</span><span class="hljs-selector-class">.setUpdateTime</span>(new Date());
}
</code></pre>
<p>æ²¡è°ƒç”¨ <code>save()</code>ï¼Œä¹Ÿæ²¡å†™ <code>update</code> è¯­å¥ï¼Œä½†æäº¤äº‹åŠ¡æ—¶ï¼Œæ•°æ®åº“é‚£è¾¹çœŸçš„å¤šäº†ä¸€æ¡ UPDATEã€‚<br/>
ä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ˜¯åŒäº‹å“ªé‡Œè°ƒç”¨é”™äº†ï¼Œåæ¥æŠŠæ—¥å¿—å’Œ SQL éƒ½è·Ÿäº†ä¸€éï¼Œæ‰æƒ³èµ·æ¥â€”â€”è¿™æ˜¯ JPA çš„â€œè„æ£€æŸ¥â€ï¼ˆDirty Checkingï¼‰ã€‚</p>
<p>JPA æŸ¥å‡ºæ¥çš„å®ä½“åœ¨äº‹åŠ¡é‡Œæ˜¯æ‰˜ç®¡çŠ¶æ€ï¼ŒHibernate ä¼šåœ¨äº‹åŠ¡æäº¤å‰æ¯”å¯¹å¯¹è±¡çš„å¿«ç…§ï¼Œå¦‚æœå­—æ®µè¢«æ”¹äº†ï¼Œå°±è‡ªåŠ¨å‘ UPDATEã€‚<br/>
è¿™æœºåˆ¶å¹³æ—¶æŒºè´´å¿ƒçš„ï¼Œä½†åœ¨åˆ†è¡¨ç³»ç»Ÿé‡Œå°±å˜æˆäº†ä¸ªå‘ã€‚</p>
<hr/>
<h3 data-id="heading-1">åˆ†è¡¨çš„é”…ï¼šä¸€ä¸ªå° UPDATEï¼Œå˜æˆå¤šè¡¨å¹¿æ’­</h3>
<p>JPA å‘çš„ UPDATE è¯­å¥æ˜¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">update orders <span class="hljs-built_in">set</span> status=?, update_time=? <span class="hljs-built_in">where</span> <span class="hljs-built_in">id</span>=?
</code></pre>
<p>å¦‚æœåˆ†ç‰‡é”®ä¸æ˜¯ <code>id</code>ï¼Œæˆ–è€… <code>WHERE</code> æ¡ä»¶æ²¡å¸¦ä¸Šåˆ†ç‰‡å­—æ®µï¼ŒShardingSphere å°±æ‡µäº†â€”â€”å®ƒä¸çŸ¥é“è¯¥å‘åˆ°å“ªå¼ åˆ†è¡¨å»ï¼Œåªèƒ½â€œå…¨è¡¨å¹¿æ’­æ›´æ–°â€ã€‚</p>
<p>æ—¥å¿—é‡Œå°±èƒ½çœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Logic <span class="hljs-keyword">SQL</span>: <span class="hljs-keyword">update</span> orders <span class="hljs-keyword">set</span> status<span class="hljs-operator">=</span>?, update_time<span class="hljs-operator">=</span>? <span class="hljs-keyword">where</span> id<span class="hljs-operator">=</span>?
Actual <span class="hljs-keyword">SQL</span>: <span class="hljs-keyword">update</span> orders_1001_2025 ...
Actual <span class="hljs-keyword">SQL</span>: <span class="hljs-keyword">update</span> orders_1002_2025 ...
</code></pre>
<p>ä¸€æ¡é€»è¾‘ SQLï¼Œæ‰“åˆ°äº†ä¸¤å¼ ç”šè‡³å¤šå¼ åˆ†è¡¨ä¸Šã€‚<br/>
çœ‹ç€è¿™äº› UPDATE æ—¥å¿—ï¼Œå¿ƒé‡Œç›´çŠ¯å˜€å’•ï¼šè¿™è°èƒŒå¾—èµ·å•Šã€‚</p>
<hr/>
<h3 data-id="heading-2">å¯¹ç…§å®éªŒï¼šåŒæ ·çš„é€»è¾‘ï¼Œä¸åŒçš„çŠ¶æ€</h3>
<p>ä¸ºäº†ç¡®è®¤æ˜¯ä¸æ˜¯ JPA è‡ªåŠ¨å¹²çš„ï¼Œæˆ‘ä»¬åšäº†å‡ ä¸ªå°å®éªŒã€‚</p>
<h4 data-id="heading-3">æƒ…å†µä¸€ï¼šæœ‰äº‹åŠ¡ï¼Œè‡ªåŠ¨ UPDATE</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">caseA</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Order</span> o = repo.<span class="hljs-title function_">findById</span>(9527L).<span class="hljs-title function_">orElseThrow</span>();
    o.<span class="hljs-title function_">setStatus</span>(<span class="hljs-string">"PAID"</span>);
    o.<span class="hljs-title function_">setUpdateTime</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
}
</code></pre>
<p>æäº¤äº‹åŠ¡æ—¶ Hibernate ä¼šè‡ªåŠ¨å‘ UPDATEã€‚</p>
<h4 data-id="heading-4">æƒ…å†µäºŒï¼šdetach åå†æ”¹ï¼Œä¸ä¼š UPDATE</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Transactional</span>
public void caseB() {
    <span class="hljs-attribute">Order</span> o = repo<span class="hljs-selector-class">.findById</span>(<span class="hljs-number">9527</span>L)<span class="hljs-selector-class">.orElseThrow</span>();
    entityManager<span class="hljs-selector-class">.detach</span>(o);
    o<span class="hljs-selector-class">.setStatus</span>("CANCELLED");
}
</code></pre>
<p>å› ä¸ºè¢« <code>detach</code> æ‰äº†ï¼Œä¸å†æ˜¯æ‰˜ç®¡å¯¹è±¡ï¼ŒHibernate å°±ä¸ä¼šå†è·Ÿè¸ªã€‚<br/>
åªæ˜¯è¿™ç§å†™æ³•å®¹æ˜“ç ´åå·¥ä½œå•å…ƒçš„ä¸€è‡´æ€§ï¼Œåç»­å† <code>merge</code> å›å»æŒºéº»çƒ¦ï¼Œä¸å¤ªæ¨èã€‚</p>
<h4 data-id="heading-5">æƒ…å†µä¸‰ï¼šåªè¯»äº‹åŠ¡ï¼Œæœ€å¹²å‡€çš„åšæ³•</h4>
<pre><code class="hljs language-ini" lang="ini">@Transactional(<span class="hljs-attr">readOnly</span> = <span class="hljs-literal">true</span>)
public UserDTO view(Long id) {
    User <span class="hljs-attr">u</span> = userRepo.findById(id).orElseThrow()<span class="hljs-comment">;</span>
    return toDto(u)<span class="hljs-comment">;</span>
}
</code></pre>
<p>åªè¯»äº‹åŠ¡ Hibernate é»˜è®¤ä¸ flushï¼Œç”¨åœ¨çº¯æŸ¥è¯¢åœºæ™¯ä¸‹ç‰¹åˆ«åˆé€‚ã€‚<br/>
è¿™ç§å†™æ³•è¯»èµ·æ¥å°±å®‰å…¨ï¼Œä¸ç”¨æ‹…å¿ƒå“ªå¤©æœ‰äººæ— æ„ä¸­æ”¹äº†ä¸ªå­—æ®µæŠŠæ•°æ®åº“å¸¦è·‘åã€‚</p>
<hr/>
<h3 data-id="heading-6">æœ€åçš„æ–¹æ¡ˆå…¶å®æŒºç®€å•ï¼š</h3>
<p>æŸ¥è¯¢å®Œç›´æ¥è½¬ DTOï¼Œå†æ”¹ DTOã€‚<br/>
è¿™æ ·å®ä½“å°±ä¸ä¼šå¤„åœ¨æ‰˜ç®¡çŠ¶æ€ï¼Œä¹Ÿä¸ä¼šè§¦å‘è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>ä»é‚£ä¹‹åï¼Œå‡¡æ˜¯çœ‹åˆ°æœ‰äº‹åŠ¡çš„åœ°æ–¹æ”¹å®ä½“å¯¹è±¡ï¼Œå¤§å®¶éƒ½ä¼šå¤šé—®ä¸€å¥ï¼šâ€œè¿™ä¸ªæ”¹åŠ¨æ˜¯è¦è½åº“çš„ï¼Œè¿˜æ˜¯åªæ˜¯å±•ç¤ºï¼Ÿâ€<br/>
æœ‰æ—¶å€™å°å°ä¸€ä¸ªçº¦å®šï¼Œèƒ½çœä¸‹å¾ˆå¤šå¥‡æ€ªçš„çº¿ä¸Šæ•…éšœã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸€ç‚¹åè¯</h3>
<p>å…¶å® JPA çš„è„æ£€æŸ¥æœºåˆ¶æŒºèªæ˜çš„ï¼Œå®ƒå¸®æˆ‘ä»¬çœæ‰äº†å¾ˆå¤š save() çš„éº»çƒ¦ã€‚åªæ˜¯å½“ç³»ç»Ÿå¤æ‚èµ·æ¥ï¼Œæ¯”å¦‚æœ‰åˆ†è¡¨ã€æœ‰ä¸­é—´ä»¶ã€æœ‰å¼‚æ­¥é€»è¾‘æ—¶ï¼Œ <strong>â€œè‡ªåŠ¨â€åè€Œæˆäº†é£é™©</strong>ã€‚</p>
<p>é‚£æ¬¡æ’æŸ¥è®©æˆ‘æ„è¯†åˆ°ï¼ŒORM çš„ä¾¿åˆ©æ˜¯æœ‰è¾¹ç•Œçš„ã€‚å®ƒèƒ½å¸®ä½ ç®¡ç†çŠ¶æ€ï¼Œä½†ä½ å¾—æ¸…æ¥šè‡ªå·±åœ¨å“ªä¸ªçŠ¶æ€é‡ŒåŠ¨äº†æ‰‹ã€‚</p>
<p>æœ‰æ—¶å€™å†™ä»£ç ä¸æ˜¯åœ¨é˜² bugï¼Œè€Œæ˜¯åœ¨é˜²â€œå¥½å¿ƒåŠåäº‹â€ã€‚</p>
<p>ä½ çš„é˜…è¯»ä¸åŒè¡Œï¼Œè®©è·¯é€”æ›´æœ‰æ„ä¹‰</p>
<p>æ„¿æˆ‘ä»¬ä¸€è·¯å‘å‰ï¼Œæˆä¸ºæ›´å¥½çš„è‡ªå·±</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ–°æ¨¡å‹é€Ÿé€’ã€‘PAI-Model Galleryäº‘ä¸Šä¸€é”®éƒ¨ç½²DeepSeek-V3.2æ¨¡å‹]]></title>    <link>https://juejin.cn/post/7579264485259444239</link>    <guid>https://juejin.cn/post/7579264485259444239</guid>    <pubDate>2025-12-03T10:31:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485259444239" data-draft-id="7579264485259362319" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ–°æ¨¡å‹é€Ÿé€’ã€‘PAI-Model Galleryäº‘ä¸Šä¸€é”®éƒ¨ç½²DeepSeek-V3.2æ¨¡å‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-03T10:31:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ–°æ¨¡å‹é€Ÿé€’ã€‘PAI-Model Galleryäº‘ä¸Šä¸€é”®éƒ¨ç½²DeepSeek-V3.2æ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T10:31:29.000Z" title="Wed Dec 03 2025 10:31:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¨¡å‹ä»‹ç»</h2>
<p>12æœˆ1æ—¥æ™šï¼ŒDeepSeekåˆå¼€æºäº†ä¸¤æ¬¾æ–°æ¨¡å‹ï¼Œ<strong>DeepSeek-V3.2 å’Œ DeepSeek-V3.2-Speciale</strong>ï¼Œåœ¨æ¨ç†èƒ½åŠ›ä¸Šå…¨çƒé¢†å…ˆã€‚</p>
<p>ä¸¤æ¬¾æ¨¡å‹æœ‰ç€ä¸åŒçš„å®šä½ã€‚DeepSeek-V3.2çš„ç›®æ ‡æ˜¯å¹³è¡¡æ¨ç†èƒ½åŠ›ä¸è¾“å‡ºé•¿åº¦ï¼Œé€‚åˆæ—¥å¸¸ä½¿ç”¨ï¼Œä¾‹å¦‚é—®ç­”åœºæ™¯å’Œé€šç”¨æ™ºèƒ½ä½“ä»»åŠ¡åœºæ™¯ã€‚9æœˆåº•DeepSeekå‘å¸ƒäº†å®éªŒç‰ˆV3.2-Expï¼Œæ­¤æ¬¡æ˜¯æ­£å¼ç‰ˆæ›´æ–°ã€‚åœ¨å…¬å¼€æ¨ç†æµ‹è¯•ä¸­ï¼ŒV3.2è¾¾åˆ°äº†GPT-5çš„æ°´å¹³ï¼Œä»…ç•¥ä½äºè°·æ­Œçš„Gemini3 Proã€‚</p>
<p>DeepSeek-V3.2-Specialeçš„ç›®æ ‡åˆ™æ˜¯â€œå°†å¼€æºæ¨¡å‹çš„æ¨ç†èƒ½åŠ›æ¨å‘æè‡´ï¼Œæ¢ç´¢æ¨¡å‹èƒ½åŠ›çš„è¾¹ç•Œâ€ã€‚æ®ä»‹ç»ï¼ŒSpecialeæ˜¯V3.2çš„é•¿æ€è€ƒå¢å¼ºç‰ˆï¼ŒåŒæ—¶ç»“åˆäº†DeepSeek-Math-V2çš„å®šç†è¯æ˜èƒ½åŠ›ï¼Œè¯¥æ¨¡å‹å…·å¤‡å‡ºè‰²çš„æŒ‡ä»¤è·Ÿéšã€ä¸¥è°¨çš„æ•°å­¦è¯æ˜ä¸é€»è¾‘éªŒè¯èƒ½åŠ›ã€‚æ®DeepSeekå…¬å¸ƒçš„æ•°æ®ï¼ŒSpecialeåœ¨å¤šä¸ªæ¨ç†åŸºå‡†æµ‹è¯•ä¸­è¶…è¶Šè°·æ­Œæœ€å…ˆè¿›çš„Gemini3 Proã€‚</p>
<p>ç”±äº DeepSeek-V3.2 æ¨¡å‹çš„å‚æ•°é‡é«˜è¾¾ 671Bï¼Œæœ¬åœ°éš¾ä»¥ç›´æ¥éƒ¨ç½²æ¨¡å‹ï¼Œäº‘ç«¯éƒ¨ç½²æˆä¸ºä¼ä¸šç”¨æˆ·å’Œå¼€å‘è€…ä»¬éƒ¨ç½²çš„ä¼˜å…ˆé€‰æ‹©ã€‚</p>
<p>é˜¿é‡Œäº‘ PAI-Model Gallery å·²ç¬¬ä¸€æ—¶é—´æ¥å…¥ <strong>DeepSeek-V3.2ã€DeepSeek-V3.2-Speciale</strong> æ¨¡å‹ï¼Œæä¾›ä¼ä¸šçº§éƒ¨ç½²æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">PAI-Model Gallery ç®€ä»‹</h2>
<p>PAI-Model Gallery æ˜¯é˜¿é‡Œäº‘äººå·¥æ™ºèƒ½å¹³å° PAI çš„äº§å“ç»„ä»¶ï¼Œå®ƒé›†æˆäº†å›½å†…å¤– AI å¼€æºç¤¾åŒºä¸­ä¼˜è´¨çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ¶µç›–äº† LLMã€AIGCã€CVã€NLP ç­‰å„ä¸ªé¢†åŸŸã€‚é€šè¿‡ PAI å¯¹è¿™äº›æ¨¡å‹çš„é€‚é…ï¼Œç”¨æˆ·å¯ä»¥ä»¥é›¶ä»£ç æ–¹å¼å®ç°ä»è®­ç»ƒåˆ°éƒ¨ç½²å†åˆ°æ¨ç†çš„å…¨è¿‡ç¨‹ï¼Œç®€åŒ–äº†æ¨¡å‹çš„å¼€å‘æµç¨‹ï¼Œä¸ºå¼€å‘è€…å’Œä¼ä¸šç”¨æˆ·å¸¦æ¥äº†æ›´å¿«ã€æ›´é«˜æ•ˆã€æ›´ä¾¿æ·çš„ AI å¼€å‘å’Œåº”ç”¨ä½“éªŒã€‚</p>
<p>PAI-Model Gallery è®¿é—®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpai.console.aliyun.com%2F%23%2Fquick-start%2Fmodels" target="_blank" title="https://pai.console.aliyun.com/#/quick-start/models" ref="nofollow noopener noreferrer">pai.console.aliyun.com/#/quick-staâ€¦</a></p>
<ul>
<li>
<p>é›¶ä»£ç ä¸€é”®éƒ¨ç½²</p>
</li>
<li>
<p>è‡ªåŠ¨é€‚é…äº‘èµ„æº</p>
</li>
<li>
<p>éƒ¨ç½²åå¼€ç®±å³ç”¨API</p>
</li>
<li>
<p>å…¨æµç¨‹è¿ç»´æ‰˜ç®¡</p>
</li>
<li>
<p>ä¼ä¸šçº§å®‰å…¨ æ•°æ®ä¸å‡ºåŸŸ</p>
</li>
</ul>
<p><img src="https://static001.geekbang.org/infoq/9e/9e54f24bd7d97a35729759eee14f1293.png" alt="" loading="lazy"/></p>
<p><img src="https://static001.geekbang.org/infoq/2c/2c895fb66da536d68d9f6c4a464f1aff.png" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€é”®éƒ¨ç½² DeepSeek-V3.2 æ¨¡å‹</h2>
<p>1. åœ¨ PAI-Model Gallery æ¨¡å‹å¹¿åœºæ‰¾åˆ° <strong>DeepSeek-V3.2</strong> æ¨¡å‹ï¼Œæˆ–é€šè¿‡é“¾æ¥ç›´è¾¾è¯¥æ¨¡å‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpai.console.aliyun.com%2F%23%2Fquick-start%2Fmodels%2FDeepSeek-V3.2%2Fintro" target="_blank" title="https://pai.console.aliyun.com/#/quick-start/models/DeepSeek-V3.2/intro" ref="nofollow noopener noreferrer">pai.console.aliyun.com/#/quick-staâ€¦</a></p>
<p><img src="https://static001.geekbang.org/infoq/a9/a9c34f7530c76842a08b2edacb7647d4.png" alt="" loading="lazy"/></p>
<p>2. åœ¨æ¨¡å‹è¯¦æƒ…é¡µå³ä¸Šè§’ç‚¹å‡»ã€Œéƒ¨ç½²ã€ï¼Œå¹³å°æ”¯æŒSGLangã€vLLMéƒ¨ç½²æ¡†æ¶ã€‚<strong>å¹³å°æä¾›å¤šç§éƒ¨ç½²æ¨¡æ¿ï¼ŒåŒ…æ‹¬å•æœºã€åˆ†å¸ƒå¼ã€EP+PDåˆ†ç¦»éƒ¨ç½²æ–¹æ¡ˆï¼Œå†…ç½®é»˜è®¤é…ç½®ï¼Œåªéœ€é€‰æ‹©æ¨¡æ¿å’Œè®¡ç®—èµ„æºï¼Œå³å¯ä¸€é”®å®Œæˆæ¨¡å‹çš„äº‘ä¸Šéƒ¨ç½²ï¼Œæ“ä½œååˆ†ç®€ä¾¿ã€‚</strong></p>
<p><img src="https://static001.geekbang.org/infoq/cd/cdf71a986121409b00bcc445756fc1c2.png" alt="" loading="lazy"/></p>
<p><img src="https://static001.geekbang.org/infoq/79/79be46480581ca070982e5eade2c03fc.png" alt="" loading="lazy"/></p>
<p><img src="https://static001.geekbang.org/infoq/9f/9f566f36b6d308ebfdd1e8977367e406.png" alt="" loading="lazy"/></p>
<p>3. éƒ¨ç½²æˆåŠŸåï¼Œåœ¨æœåŠ¡é¡µé¢å¯ä»¥ç‚¹å‡»â€œæŸ¥çœ‹è°ƒç”¨ä¿¡æ¯â€è·å–è°ƒç”¨çš„ Endpoint å’Œ Tokenï¼Œæƒ³äº†è§£æœåŠ¡è°ƒç”¨æ–¹å¼å¯ä»¥ç‚¹å‡»é¢„è®­ç»ƒæ¨¡å‹é“¾æ¥ï¼Œè¿”å›æ¨¡å‹ä»‹ç»é¡µæŸ¥çœ‹è°ƒç”¨æ–¹å¼è¯´æ˜ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/7d/7daeb2576f70cd6f1f8b8e882f9e9f13.png" alt="" loading="lazy"/></p>
<p>4. ä½¿ç”¨æ¨ç†æœåŠ¡ï¼šæ‚¨å¯ä»¥åœ¨æœ¬åœ°æˆ–ä½¿ç”¨å„ç±»å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨æ¨¡å‹æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ PAI å¹³å°æä¾›çš„åœ¨çº¿è°ƒè¯•åŠŸèƒ½ï¼Œæ­¤å¤–æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ PAI å¹³å°æä¾›çš„ WebUI ç•Œé¢ä¸æ¨¡å‹è¿›è¡Œäº¤äº’ã€‚å¯ä»¥å‚è€ƒä½¿ç”¨æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fpai%2Fgetting-started%2Fmodel-gallery-quick-start%23091a6b66e9v4x" target="_blank" title="https://help.aliyun.com/zh/pai/getting-started/model-gallery-quick-start#091a6b66e9v4x" ref="nofollow noopener noreferrer">help.aliyun.com/zh/pai/gettâ€¦</a></p>
<h2 data-id="heading-3">æ›´å¤šæ¨¡å‹æ”¯æŒ</h2>
<p>PAI-Model Gallery æŒç»­æä¾›å¼€æºç¤¾åŒºçƒ­é—¨æ¨¡å‹çš„å¿«é€Ÿéƒ¨ç½²ã€å¾®è°ƒã€è’¸é¦ã€è¯„æµ‹å®è·µï¼Œæ¨¡å‹è¦†ç›–<strong>é€šä¹‰åƒé—®ã€é€šä¹‰ä¸‡ç›¸ã€DeepSeekã€Kimiã€MiniMaxã€GLM</strong>ç­‰ä¼˜ç§€å¼€æºæ¨¡å‹ï¼ŒåŒæ—¶è¿˜æä¾› <strong>Qwen3-235B-A22B-PAI-optimizedã€Qwen3-Next-80B-A3B-Instruct-FP8-PAI-optimizedã€DeepSeek-R1-0528-PAI-optimized</strong> ç­‰PAIä¼˜åŒ–ç‰ˆæœ¬æ¨¡å‹ï¼Œå†…ç½®äº†PAIä¼˜åŒ–ç‰ˆçš„EP+PDåˆ†ç¦»éƒ¨ç½²ç­‰æ¨¡æ¿ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºPixiJSçš„å°æ¸¸æˆå¹¿å‘Šå¼€å‘]]></title>    <link>https://juejin.cn/post/7579255046980190234</link>    <guid>https://juejin.cn/post/7579255046980190234</guid>    <pubDate>2025-12-03T09:38:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579255046980190234" data-draft-id="7579255046980108314" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºPixiJSçš„å°æ¸¸æˆå¹¿å‘Šå¼€å‘"/> <meta itemprop="keywords" content="å‰ç«¯,æ¸¸æˆå¼€å‘,WebGL"/> <meta itemprop="datePublished" content="2025-12-03T09:38:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦å¤§å‘½å¤§"/> <meta itemprop="url" content="https://juejin.cn/user/2154698523020205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºPixiJSçš„å°æ¸¸æˆå¹¿å‘Šå¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2154698523020205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦å¤§å‘½å¤§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:38:25.000Z" title="Wed Dec 03 2025 09:38:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯•ç©æ¸¸æˆå¹¿å‘Šï¼Œæœ€ç»ˆä¼šæŠ•æ”¾åˆ° <code>Moloco</code> å¹¿å‘Šå¹³å°è¿›è¡Œæ¨å¹¿ï¼Œæ¸¸æˆä¸ç®—å¤æ‚ï¼Œä½†æ˜¯ä¹Ÿæ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªç±»ç›®ï¼Œè®°å½•ä¸€ä¸‹ ğŸ˜€ğŸ˜€ğŸ˜€</p>
<p>å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œ<strong>è®°å¾—ä¸€é”®ä¸‰è¿å“Ÿ</strong>ã€‚æœ‰é—®é¢˜å’Œç–‘æƒ‘çš„è¯ä¹Ÿå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ã€‚æˆ‘ä¼šç¬¬ä¸€æ—¶é—´å›å¤å¤§å®¶ï¼Œå¦‚æœè§‰å¾—æˆ‘çš„æ–‡ç« å“ªé‡Œæœ‰çŸ¥è¯†ç‚¹é”™è¯¯çš„è¯ï¼Œä¹Ÿæ³è¯·èƒ½å¤Ÿå‘ŠçŸ¥ï¼ŒæŠŠé”™çš„ä¸œè¥¿ç†è§£æˆå¯¹çš„ï¼Œæ— è®ºåœ¨ä»€ä¹ˆè¡Œä¸šï¼Œéƒ½æ˜¯è‡´å‘½çš„ã€‚</p>
<h2 data-id="heading-1">é¡¹ç›®æ¦‚è§ˆ</h2>
<h3 data-id="heading-2">æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>PixiJS 8.x</strong>: 2D WebGL æ¸²æŸ“å¼•æ“ï¼Œç”¨æ¥ç”»æ¸¸æˆç”»é¢</li>
<li><strong>GSAP 3.x</strong>: åŠ¨ç”»åº“ï¼Œè®©å…ƒç´ åŠ¨èµ·æ¥æ›´æµç•…ï¼Œå¼ºçƒˆæ¨è</li>
<li><strong>TypeScript</strong>: å¸¦ç±»å‹æ£€æŸ¥çš„ JavaScript</li>
<li><strong>Vite</strong>: ç°ä»£åŒ–çš„æ‰“åŒ…å·¥å…·</li>
<li><strong>@pixi/sound</strong>: ç®¡ç†éŸ³æ•ˆå’ŒèƒŒæ™¯éŸ³ä¹</li>
</ul>
<h3 data-id="heading-3">é¡¹ç›®æ–‡ä»¶ç»“æ„</h3>
<pre><code class="hljs language-plain" lang="plain">src/
â”œâ”€â”€ main.ts                 # ç¨‹åºå…¥å£
â”œâ”€â”€ types.ts               # ç±»å‹å®šä¹‰
â”œâ”€â”€ components/            # æ¸¸æˆç»„ä»¶
â”‚   â”œâ”€â”€ Background.ts      # èƒŒæ™¯å±‚
â”‚   â”œâ”€â”€ Character.ts       # å·¦ä¾§è§’è‰²
â”‚   â”œâ”€â”€ TopBar.ts         # é¡¶éƒ¨æ (Logo/å¤§å¥–/åˆ†æ•°)
â”‚   â”œâ”€â”€ SlotArea.ts       # è½¬è½®åŒºåŸŸå®¹å™¨
â”‚   â”œâ”€â”€ SlotMachine.ts    # è½¬è½®æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ MaskOverlay.ts    # å¼•å¯¼é®ç½©
â”‚   â”œâ”€â”€ BottomArea.ts     # åº•éƒ¨æŒ‰é’®
â”‚   â”œâ”€â”€ GuideHand.ts      # å¼•å¯¼æ‰‹åŠ¿
â”‚   â”œâ”€â”€ CoinRain.ts       # é‡‘å¸é›¨ç‰¹æ•ˆ
â”‚   â””â”€â”€ DownloadOverlay.ts # ä¸‹è½½å¼¹çª—
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ responsive.ts     # å“åº”å¼é€‚é…
â”‚   â”œâ”€â”€ textures.ts       # çº¹ç†ç®¡ç†
â”‚   â”œâ”€â”€ resources.ts      # èµ„æºåŠ è½½
â”‚   â”œâ”€â”€ audio.ts         # éŸ³é¢‘ç®¡ç†
â”‚   â”œâ”€â”€ ad.ts            # å¹¿å‘Šè·³è½¬
â”‚   â””â”€â”€ time.ts          # æ—¶é—´å·¥å…·
â””â”€â”€ assets/              # èµ„æºæ–‡ä»¶
</code></pre>
<h2 data-id="heading-4">æ ¸å¿ƒç³»ç»Ÿå®ç°</h2>
<h3 data-id="heading-5">ç¨‹åºå¯åŠ¨æµç¨‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»º PixiJS åº”ç”¨</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Application</span>();

<span class="hljs-comment">// åˆå§‹åŒ–é…ç½®</span>
<span class="hljs-keyword">await</span> app.<span class="hljs-title function_">init</span>({
  <span class="hljs-attr">backgroundColor</span>: <span class="hljs-number">0xffffff</span>,
  <span class="hljs-attr">resizeTo</span>: <span class="hljs-variable language_">window</span>, <span class="hljs-comment">// è‡ªåŠ¨é€‚é…çª—å£å¤§å°</span>
  <span class="hljs-attr">resolution</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>, <span class="hljs-number">2</span>), <span class="hljs-comment">// æ”¯æŒé«˜æ¸…å±</span>
  <span class="hljs-attr">autoDensity</span>: <span class="hljs-literal">true</span>,
});

<span class="hljs-comment">// åˆå§‹åŒ–å“åº”å¼ç³»ç»Ÿ(åŸºäº 375x667 è®¾è®¡ç¨¿)</span>
<span class="hljs-title function_">initResponsive</span>(app, <span class="hljs-number">375</span>, <span class="hljs-number">667</span>);

<span class="hljs-comment">// åŠ è½½æ‰€æœ‰èµ„æº</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">loadResources</span>();

<span class="hljs-comment">// åˆ›å»ºæ¸¸æˆåœºæ™¯</span>
<span class="hljs-title function_">createGameScene</span>();
</code></pre>
<h3 data-id="heading-6">å“åº”å¼é€‚é…ç³»ç»Ÿ</h3>
<p>ç±»ä¼¼ CSS çš„ Rem å•ä½ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®¾è®¡ç¨¿ä¸Šçš„åƒç´ å€¼è½¬æ¢æˆå®é™…å±å¹•åƒç´ </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">rem</span>(<span class="hljs-params">px: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">const</span> scale = <span class="hljs-title function_">getScale</span>();
  <span class="hljs-keyword">return</span> px * scale;
}

<span class="hljs-comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getScale</span>(<span class="hljs-params"/>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">const</span> { width, height } = appInstance.<span class="hljs-property">screen</span>;

  <span class="hljs-comment">// ç«–å±: æŒ‰å®½åº¦ç¼©æ”¾</span>
  <span class="hljs-keyword">if</span> (height &gt; width) {
    <span class="hljs-keyword">return</span> width / <span class="hljs-variable constant_">DESIGN_WIDTH</span>; <span class="hljs-comment">// DESIGN_WIDTH = 375</span>
  }
  <span class="hljs-comment">// æ¨ªå±: æŒ‰é«˜åº¦ç¼©æ”¾</span>
  <span class="hljs-keyword">return</span> height / <span class="hljs-variable constant_">DESIGN_HEIGHT</span>; <span class="hljs-comment">// DESIGN_HEIGHT = 667</span>
}
</code></pre>
<p><strong>ä½¿ç”¨æ–¹æ³•</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è®¾è®¡ç¨¿ä¸ŠæŸä¸ªå…ƒç´ ä½ç½®æ˜¯ (100, 200)</span>
sprite.<span class="hljs-property">x</span> = <span class="hljs-title function_">rem</span>(<span class="hljs-number">100</span>);
sprite.<span class="hljs-property">y</span> = <span class="hljs-title function_">rem</span>(<span class="hljs-number">200</span>);

<span class="hljs-comment">// è®¾è®¡ç¨¿ä¸Šå­—ä½“å¤§å°æ˜¯ 24</span>
text.<span class="hljs-property">style</span>.<span class="hljs-property">fontSize</span> = <span class="hljs-title function_">rem</span>(<span class="hljs-number">24</span>);
</code></pre>
<h3 data-id="heading-7">èµ„æºç®¡ç†</h3>
<h4 data-id="heading-8">çº¹ç†å›¾é›†</h4>
<p>çº¹ç†å°±æ˜¯æŠŠå¾ˆå¤šå°å›¾ç‰‡åŠ åˆ°ä¸€ä¸ªå¤§å›¾ç‰‡é‡Œé¢ï¼ŒåŒ…å«äº†ä¸€ä¸ª json æ–‡ä»¶è®°å½•å°å›¾ç‰‡ä½ç½®ï¼Œæˆ‘æŠŠæ‰€æœ‰å°å›¾ç‰‡æ‰“åŒ…æˆä¸‰å¼ å¤§å›¾ï¼Œè¿™æ ·åŠ è½½æ›´å¿«ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸»èµ„æºå›¾é›† (assets.png)</span>
<span class="hljs-comment">// åŒ…å« UIã€èƒŒæ™¯ã€æŒ‰é’®ç­‰</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">loadAssetsSheet</span>();

<span class="hljs-comment">// å›¾æ ‡å›¾é›† (assets_icons.png)</span>
<span class="hljs-comment">// åŒ…å«è½¬è½®ä¸Šçš„å„ç§å›¾æ ‡</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">loadAssetsIconsSheet</span>();

<span class="hljs-comment">// å®£ä¼ å›¾é›† (promo_custom.png)</span>
<span class="hljs-comment">// åŒ…å«æœ€ç»ˆè½åœ°é¡µç´ æ</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">loadPromoCustomSheet</span>();

<span class="hljs-comment">// ä½¿ç”¨æ—¶åªéœ€è¦ä¼ å›¾ç‰‡åç§°</span>
<span class="hljs-keyword">const</span> texture = <span class="hljs-title function_">getAssetsTexture</span>(<span class="hljs-string">"Character"</span>);
<span class="hljs-keyword">const</span> sprite = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sprite</span>(texture);
</code></pre>
<p><strong>å›¾é›†çš„å¥½å¤„</strong>:</p>
<ul>
<li>ä¸€æ¬¡è¯·æ±‚ä¸‹è½½å¤šå¼ å›¾</li>
<li>å‡å°‘æœåŠ¡å™¨å‹åŠ›</li>
<li>GPU æ¸²æŸ“æ›´é«˜æ•ˆ</li>
</ul>
<h4 data-id="heading-9">éŸ³é¢‘ç®¡ç†</h4>
<p>éŸ³é¢‘ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç”¨@pixi/sound è¿›è¡Œæ’­æ”¾ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼ç®¡ç†æ‰€æœ‰éŸ³æ•ˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioManager</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åŠ è½½æ‰€æœ‰éŸ³æ•ˆ</span>
    <span class="hljs-keyword">await</span> sound.<span class="hljs-title function_">add</span>(<span class="hljs-string">"spinButton"</span>, spinButtonUrl);
    <span class="hljs-keyword">await</span> sound.<span class="hljs-title function_">add</span>(<span class="hljs-string">"reelClick"</span>, reelClickUrl);
    <span class="hljs-keyword">await</span> sound.<span class="hljs-title function_">add</span>(<span class="hljs-string">"backgroundMusic"</span>, backgroundMusicUrl);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">playSpinButton</span>(<span class="hljs-params"/>) {
    sound.<span class="hljs-title function_">play</span>(<span class="hljs-string">"spinButton"</span>);
  }

  <span class="hljs-keyword">public</span> <span class="hljs-title function_">playBackgroundMusic</span>(<span class="hljs-params"/>) {
    sound.<span class="hljs-title function_">play</span>(<span class="hljs-string">"backgroundMusic"</span>, {
      <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¾ªç¯æ’­æ”¾</span>
      <span class="hljs-attr">volume</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// éŸ³é‡ 50%</span>
    });
  }
}
</code></pre>
<h3 data-id="heading-10">ç»„ä»¶è®¾è®¡æ¨¡å¼</h3>
<p>æ‰€æœ‰éœ€è¦é€‚é…å±å¹•çš„ç»„ä»¶éƒ½å¾—å®ç° <code>Resizable</code> è¿™ä¸ªæ¥å£ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Resizable</span> {
  <span class="hljs-title function_">resize</span>(...<span class="hljs-attr">args</span>: <span class="hljs-built_in">unknown</span>[]): <span class="hljs-built_in">void</span>;
}
</code></pre>
<p><strong>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</strong>:</p>
<ol>
<li><strong>æ„é€ </strong>: åˆ›å»ºç²¾çµã€è®¾ç½®åˆå§‹ä½ç½®</li>
<li><strong>Resize</strong>: çª—å£å˜åŒ–æ—¶é‡æ–°è®¡ç®—å¸ƒå±€</li>
<li><strong>äº¤äº’</strong>: å¤„ç†ç”¨æˆ·ç‚¹å‡»ã€æ‹–åŠ¨ç­‰</li>
<li><strong>é”€æ¯</strong>: æ¸…ç†èµ„æºé˜²æ­¢å†…å­˜æ³„æ¼</li>
</ol>
<h2 data-id="heading-11">æ¸¸æˆæµç¨‹è®¾è®¡</h2>
<h3 data-id="heading-12">åœºæ™¯å±‚çº§</h3>
<p>é¡µé¢ä¸­å„ä¸ªåŒºå—å±‚çº§ä¸ä¸€æ ·ï¼Œä½¿ç”¨ <code>zIndex</code> ç®¡ç†ä¸åŒå±‚çº§ï¼Œæ•°å­—è¶Šå¤§è¶Šé å‰ï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Stage
â”œâ”€â”€ Background (zIndex: 0) - èƒŒæ™¯æœ€åº•å±‚
â”œâ”€â”€ MaskOverlay (zIndex: 1) - å¼•å¯¼é®ç½©
â”œâ”€â”€ Character (zIndex: 2) - è§’è‰²
â”œâ”€â”€ BottomArea (zIndex: 3) - æŒ‰é’®
â”œâ”€â”€ SlotArea (zIndex: 4) - è½¬è½®
â”œâ”€â”€ TopBar (zIndex: 5) - é¡¶éƒ¨UI
â””â”€â”€ DownloadOverlay (zIndex: 100) - å¼¹çª—æœ€ä¸Šå±‚
</code></pre>
<h3 data-id="heading-13">æ¸¸æˆæµç¨‹å›¾</h3>
<pre><code class="hljs language-plain" lang="plain">ç”¨æˆ·è¿›å…¥
    â†“
[åˆå§‹åœºæ™¯]
- æ˜¾ç¤ºè§’è‰²å’Œå¼•å¯¼
- Play æŒ‰é’® + æ‰‹åŠ¿åŠ¨ç”»
- æ’­æ”¾èƒŒæ™¯éŸ³ä¹
    â†“
ç”¨æˆ·ç‚¹å‡» Play
    â†“
[æ·¡å‡ºåŠ¨ç”»]
- è§’è‰²æ·¡å‡º (0.8ç§’)
- é®ç½©æ·¡å‡º
- æŒ‰é’®æ·¡å‡º
    â†“
[è½¬è½®æ—‹è½¬]
- æ’­æ”¾æ—‹è½¬éŸ³æ•ˆ
- 3ä¸ªè½¬è½®ä¾æ¬¡å¯åŠ¨
- æ¯ä¸ªè½¬ 2 ç§’
- ä¾æ¬¡åœæ­¢
    â†“
[åˆ¤æ–­ç»“æœ]
- æ£€æŸ¥æ˜¯å¦ä¸‰ä¸ªå›¾æ ‡ä¸€æ ·
- åˆ†æ•°å¢é•¿åŠ¨ç”»
    â†“
[é‡‘å¸é›¨]
- å¼€å§‹æ‰é‡‘å¸
- é‡‘å¸ä¸‹è½+æ—‹è½¬+ç¿»è½¬
- æ’­æ”¾ä¸­å¥–éŸ³æ•ˆ
    â†“
[3ç§’å]
    â†“
[æ˜¾ç¤ºä¸‹è½½å¼¹çª—]
- å¼¹çª—æ·¡å…¥
- é‡‘å¸é›¨é€æ¸åœæ­¢
</code></pre>
<h2 data-id="heading-14">æ ¸å¿ƒåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-15">æ¸¸æˆè½¬è½®</h3>
<h4 data-id="heading-16">çŠ¶æ€æœºç®¡ç†</h4>
<p>æˆ‘ç”¨<code>çŠ¶æ€æœº</code>æ¥ç®¡ç†è½¬è½®çŠ¶æ€ï¼Œé¿å…å‡ºç°ç‚¹ä¸¤æ¬¡æŒ‰é’®ä¹‹ç±»çš„ bugï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">SlotMachineState</span> {
  <span class="hljs-variable constant_">IDLE</span> = <span class="hljs-string">"IDLE"</span>, <span class="hljs-comment">// ç©ºé—²ï¼Œå¯ä»¥ç‚¹å‡»</span>
  <span class="hljs-variable constant_">SPINNING</span> = <span class="hljs-string">"SPINNING"</span>, <span class="hljs-comment">// æ­£åœ¨è½¬</span>
  <span class="hljs-variable constant_">STOPPING</span> = <span class="hljs-string">"STOPPING"</span>, <span class="hljs-comment">// æ­£åœ¨åœæ­¢</span>
  <span class="hljs-variable constant_">STOPPED</span> = <span class="hljs-string">"STOPPED"</span>, <span class="hljs-comment">// å·²åœæ­¢</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SlotMachineStateMachine</span> {
  <span class="hljs-title function_">canSpin</span>(): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-comment">// åªæœ‰ç©ºé—²å’Œå·²åœæ­¢çŠ¶æ€æ‰èƒ½å†æ¬¡æ—‹è½¬</span>
    <span class="hljs-keyword">return</span> [<span class="hljs-title class_">SlotMachineState</span>.<span class="hljs-property">IDLE</span>, <span class="hljs-title class_">SlotMachineState</span>.<span class="hljs-property">STOPPED</span>].<span class="hljs-title function_">includes</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>
    );
  }
}
</code></pre>
<h4 data-id="heading-17">è½¬è½®åŠ¨ç”»</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Reel</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">spin</span>(
    <span class="hljs-attr">delay</span>: <span class="hljs-built_in">number</span>, <span class="hljs-comment">// å»¶è¿Ÿå¯åŠ¨</span>
    <span class="hljs-attr">targetIcon</span>: <span class="hljs-built_in">number</span>, <span class="hljs-comment">// ç›®æ ‡å›¾æ ‡</span>
    <span class="hljs-attr">speed</span>: <span class="hljs-built_in">number</span>, <span class="hljs-comment">// é€Ÿåº¦</span>
    <span class="hljs-attr">duration</span>: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æŒç»­æ—¶é—´</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-comment">// 1. å»¶è¿Ÿå¯åŠ¨(è®©3ä¸ªè½¬è½®é”™å¼€)</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(delay * <span class="hljs-number">1000</span>);

    <span class="hljs-comment">// 2. åŠ é€Ÿé˜¶æ®µ</span>
    gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>, {
      <span class="hljs-attr">y</span>: <span class="hljs-string">`+=<span class="hljs-subst">${speed * <span class="hljs-number">3</span>}</span>`</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">0.3</span>,
      <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.in"</span>,
    });

    <span class="hljs-comment">// 3. åŒ€é€Ÿæ—‹è½¬</span>
    gsap.<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>, {
      <span class="hljs-attr">y</span>: <span class="hljs-string">`+=<span class="hljs-subst">${speed * duration}</span>`</span>,
      <span class="hljs-attr">duration</span>: duration,
      <span class="hljs-attr">ease</span>: <span class="hljs-string">"none"</span>,
    });

    <span class="hljs-comment">// 4. å‡é€Ÿåœåœ¨ç›®æ ‡å›¾æ ‡</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">stopAtIcon</span>(targetIcon);
  }
}
</code></pre>
<h4 data-id="heading-18">é¢„è®¾ç»“æœ</h4>
<p>å› ä¸ºæ˜¯è¯•ç©æ¸¸æˆï¼Œä¸ºäº†æ§åˆ¶ä½“éªŒï¼Œç›´æ¥é¢„è®¾å‡ ä¸ªæ¸¸æˆç»“æœï¼ŒéšæœºæŠ½å–ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PRESET_RESULTS</span> = [
  [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>], <span class="hljs-comment">// ä¸‰ä¸ªç›¸åŒ - ä¸­å¥–</span>
  [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],
  [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>],
  <span class="hljs-comment">// ...</span>
  [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-comment">// ä¸åŒ - ä¸ä¸­å¥–</span>
];

<span class="hljs-comment">// éšæœºé€‰ä¸€ä¸ª</span>
<span class="hljs-keyword">const</span> resultIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable constant_">PRESET_RESULTS</span>.<span class="hljs-property">length</span>);
<span class="hljs-keyword">const</span> resultData = <span class="hljs-variable constant_">PRESET_RESULTS</span>[resultIndex];
</code></pre>
<h3 data-id="heading-19">é‡‘å¸é›¨ç‰¹æ•ˆ</h3>
<p>æ¸¸æˆç»“æŸæ—¶é‡‘å¸ä¸‹è½æ•ˆæœ</p>
<h4 data-id="heading-20">é‡‘å¸çš„å±æ€§</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">CoinSprite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Sprite</span> {
  <span class="hljs-attr">speedY</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ä¸‹è½é€Ÿåº¦</span>
  <span class="hljs-attr">speedX</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ°´å¹³æ¼‚ç§»</span>
  <span class="hljs-attr">speedR</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ—‹è½¬é€Ÿåº¦</span>
  <span class="hljs-attr">flipSpeed</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç¿»è½¬é€Ÿåº¦(å®ç°3Dæ•ˆæœ)</span>
  <span class="hljs-attr">flipPhase</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç¿»è½¬ç›¸ä½</span>
  <span class="hljs-attr">initialScale</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åˆå§‹å¤§å°</span>
}
</code></pre>
<h4 data-id="heading-21">åˆ›å»ºé‡‘å¸</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">createCoin</span>(<span class="hljs-params">randomY: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span></span>) {
  <span class="hljs-keyword">const</span> coin = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sprite</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">texture</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">CoinSprite</span>;

  <span class="hljs-comment">// éšæœºä½ç½®</span>
  coin.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">width</span>;
  coin.<span class="hljs-property">y</span> = randomY
    ? (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">height</span>) / <span class="hljs-number">2</span> - <span class="hljs-title function_">rem</span>(<span class="hljs-number">200</span>)
    : <span class="hljs-title function_">rem</span>(-<span class="hljs-number">50</span>); <span class="hljs-comment">// ä»é¡¶éƒ¨å¼€å§‹</span>

  <span class="hljs-comment">// éšæœºå¤§å° (0.3 - 0.6)</span>
  <span class="hljs-keyword">const</span> scale = (<span class="hljs-number">0.3</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.3</span>) * <span class="hljs-title function_">getScale</span>();
  coin.<span class="hljs-property">scale</span>.<span class="hljs-title function_">set</span>(scale);
  coin.<span class="hljs-property">initialScale</span> = scale;

  <span class="hljs-comment">// éšæœºç‰©ç†å±æ€§</span>
  coin.<span class="hljs-property">speedY</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">speedMin</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * (<span class="hljs-variable language_">this</span>.<span class="hljs-property">speedMax</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">speedMin</span>);
  coin.<span class="hljs-property">speedX</span> = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">1</span>;      <span class="hljs-comment">// å·¦å³æ¼‚ç§»</span>
  coin.<span class="hljs-property">speedR</span> = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">0.1</span>;    <span class="hljs-comment">// æ—‹è½¬</span>
  coin.<span class="hljs-property">flipSpeed</span> = <span class="hljs-number">0.02</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.05</span>; <span class="hljs-comment">// ç¿»è½¬å¿«æ…¢</span>
  coin.<span class="hljs-property">flipPhase</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// åˆå§‹ç›¸ä½</span>

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>.<span class="hljs-title function_">push</span>(coin);
}
</code></pre>
<h4 data-id="heading-22">åŠ¨ç”»æ›´æ–°</h4>
<p>è¿™æ˜¯æ•´ä¸ªç‰¹æ•ˆçš„æ ¸å¿ƒï¼Œæ¯å¸§éƒ½ä¼šæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> update = <span class="hljs-function">(<span class="hljs-params">ticker: Ticker</span>) =&gt;</span> {
  <span class="hljs-comment">// 1. ç”Ÿæˆæ–°é‡‘å¸(å¦‚æœæ²¡æœ‰åœæ­¢)</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isStopping</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>.<span class="hljs-property">length</span> &lt; <span class="hljs-number">300</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">density</span>) { <span class="hljs-comment">// density = 0.2</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createCoin</span>();
    }
  }

  <span class="hljs-comment">// 2. æ›´æ–°æ¯ä¸ªé‡‘å¸</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
    <span class="hljs-keyword">const</span> coin = <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>[i];

    <span class="hljs-comment">// ä½ç½®æ›´æ–°</span>
    coin.<span class="hljs-property">y</span> += coin.<span class="hljs-property">speedY</span> * ticker.<span class="hljs-property">deltaTime</span>;
    coin.<span class="hljs-property">x</span> += coin.<span class="hljs-property">speedX</span> * ticker.<span class="hljs-property">deltaTime</span>;
    coin.<span class="hljs-property">rotation</span> += coin.<span class="hljs-property">speedR</span> * ticker.<span class="hljs-property">deltaTime</span>;

    <span class="hljs-comment">// 3Dç¿»è½¬æ•ˆæœ(é€šè¿‡ç¼©æ”¾ x è½´æ¨¡æ‹Ÿ)</span>
    coin.<span class="hljs-property">flipPhase</span> += coin.<span class="hljs-property">flipSpeed</span> * ticker.<span class="hljs-property">deltaTime</span>;
    coin.<span class="hljs-property">scale</span>.<span class="hljs-property">x</span> = coin.<span class="hljs-property">initialScale</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(coin.<span class="hljs-property">flipPhase</span>);

    <span class="hljs-comment">// è¾¹ç•Œæ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> (coin.<span class="hljs-property">y</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">height</span> + <span class="hljs-title function_">rem</span>(<span class="hljs-number">50</span>)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isStopping</span>) {
        <span class="hljs-comment">// åœæ­¢é˜¶æ®µ: é”€æ¯æ‰å‡ºå»çš„é‡‘å¸</span>
        coin.<span class="hljs-title function_">destroy</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æ­£å¸¸é˜¶æ®µ: å¾ªç¯åˆ©ç”¨ï¼Œä»é¡¶éƒ¨é‡æ–°æ‰ä¸‹æ¥</span>
        coin.<span class="hljs-property">y</span> = <span class="hljs-title function_">rem</span>(-<span class="hljs-number">50</span>);
        coin.<span class="hljs-property">x</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">screen</span>.<span class="hljs-property">width</span>;
      }
    }
  }

  <span class="hljs-comment">// 3. å¦‚æœåœæ­¢ä¸”æ²¡æœ‰é‡‘å¸äº†ï¼Œæ¸…ç†èµ„æº</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isStopping</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">coins</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cleanup</span>();
  }
};
</code></pre>
<h4 data-id="heading-23">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h4>
<ol>
<li><strong>å¯¹è±¡æ± æ€æƒ³</strong>: é‡‘å¸æ‰å‡ºå±å¹•åä¸é”€æ¯ï¼Œè€Œæ˜¯é‡ç½®ä½ç½®ç»§ç»­ç”¨</li>
<li><strong>æ•°é‡é™åˆ¶</strong>: æœ€å¤š 300 ä¸ªé‡‘å¸ï¼Œé¿å…å†…å­˜çˆ†ç‚¸</li>
<li><strong>è½¯åœæ­¢</strong>: è°ƒç”¨ <code>stop()</code> åä¸ç«‹å³æ¸…ç†ï¼Œè®©ç°æœ‰é‡‘å¸è‡ªç„¶è½å®Œ</li>
<li><strong>ç¦ç”¨äº¤äº’</strong>: <code>coin.eventMode = "none"</code> é¿å…ä¸å¿…è¦çš„äº‹ä»¶æ£€æµ‹</li>
</ol>
<h3 data-id="heading-24">å¼•å¯¼æ‰‹åŠ¿åŠ¨ç”»</h3>
<p>ä½¿ç”¨ GSAP Timeline åšå¾ªç¯åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">private</span> <span class="hljs-title function_">startAnimation</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeline</span> = gsap.<span class="hljs-title function_">timeline</span>({ <span class="hljs-attr">repeat</span>: -<span class="hljs-number">1</span> }); <span class="hljs-comment">// æ— é™å¾ªç¯</span>

  <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeline</span>
    <span class="hljs-comment">// æ‰‹æŒ‡ä¸‹å‹ + æ—‹è½¬</span>
    .<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mcPointer</span>, {
      <span class="hljs-attr">y</span>: <span class="hljs-title function_">rem</span>(<span class="hljs-number">10</span>),
      <span class="hljs-attr">rotation</span>: -<span class="hljs-number">0.1</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">0.3</span>,
      <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>
    })
    <span class="hljs-comment">// åŒæ—¶æ’­æ”¾æ°´æ³¢çº¹æ‰©æ•£</span>
    .<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mcRing</span>, {
      <span class="hljs-attr">scale</span>: <span class="hljs-number">1.5</span>,
      <span class="hljs-attr">alpha</span>: <span class="hljs-number">0</span>,      <span class="hljs-comment">// æ·¡å‡º</span>
      <span class="hljs-attr">duration</span>: <span class="hljs-number">0.6</span>,
      <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.out"</span>
    }, <span class="hljs-string">"&lt;"</span>)          <span class="hljs-comment">// "&lt;" è¡¨ç¤ºå’Œä¸Šä¸€ä¸ªåŠ¨ç”»åŒæ—¶å¼€å§‹</span>
    <span class="hljs-comment">// æ‰‹æŒ‡å¤ä½</span>
    .<span class="hljs-title function_">to</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">mcPointer</span>, {
      <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">rotation</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">duration</span>: <span class="hljs-number">0.3</span>,
      <span class="hljs-attr">ease</span>: <span class="hljs-string">"power2.in"</span>
    })
    <span class="hljs-comment">// æš‚åœ 0.5 ç§’</span>
    .<span class="hljs-title function_">to</span>({}, { <span class="hljs-attr">duration</span>: <span class="hljs-number">0.5</span> });
}
</code></pre>
<h2 data-id="heading-25"><code>Moloco</code>é›†æˆ</h2>
<p>è¿™ä¸ªé¡¹ç›®æœ€ç»ˆè¦åœ¨ <code>Moloco</code> å¹¿å‘Šå¹³å°ä¸Šè¿è¡Œï¼ŒæŒ‰ä»–çš„éœ€æ±‚ç»™ä¸‹è½½æŒ‰é’®æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleCTA</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ£€æŸ¥å¹¿å‘Šå¹³å°æ³¨å…¥çš„å…¨å±€å¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">FbPlayableAd</span> !== <span class="hljs-string">"undefined"</span> &amp;&amp; <span class="hljs-title class_">FbPlayableAd</span>.<span class="hljs-property">onCTAClick</span>) {
    <span class="hljs-title class_">FbPlayableAd</span>.<span class="hljs-title function_">onCTAClick</span>(); <span class="hljs-comment">// è°ƒç”¨å¹³å°çš„è·³è½¬æ–¹æ³•</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ã€æœ¬åœ°æµ‹è¯•ã€‘æ¨¡æ‹Ÿè·³è½¬"</span>);
  }
}
</code></pre>
<h2 data-id="heading-26">æ‰“åŒ…é…ç½®</h2>
<p><code>Moloco</code>è¦æ±‚äº§ç‰©æ˜¯ä¸€ä¸ªå•ç‹¬çš„<code>HTML</code>æ–‡ä»¶ï¼Œè¦æ”¹ä¸€ä¸‹ <code>Vite</code> çš„æ‰“åŒ…é…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">viteSingleFile</span>()],
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">assetsInlineLimit</span>: <span class="hljs-number">100000000</span>, <span class="hljs-comment">// æ‰€æœ‰èµ„æºå†…è”</span>
    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// CSS ä¸åˆ†å‰²</span>
    <span class="hljs-attr">minify</span>: <span class="hljs-string">"terser"</span>, <span class="hljs-comment">// å‹ç¼©ä»£ç </span>
  },
});
</code></pre>
<p>è¿è¡Œ <code>npm run build</code> åå¾—åˆ°ä¸€ä¸ª <code>HTML</code> æ–‡ä»¶ï¼Œ  <code>HTML</code> æ–‡ä»¶åŒ…å«æ‰€æœ‰ä»£ç ã€å›¾ç‰‡ã€éŸ³é¢‘</p>
<h2 data-id="heading-27">æ€»ç»“</h2>
<p>å°½ç®¡æ¸¸æˆæ¯”è¾ƒç®€å•ï¼Œä½†æ•´ä¸ªå¼€å‘è¿‡ç¨‹è®©æˆ‘å¯¹æ¸¸æˆå¼€å‘æœ‰äº†åˆæ­¥çš„äº†è§£ã€‚è¿™ä¸ªé¡¹ç›®æ²¡æœ‰æ¶‰åŠåˆ°ç¢°æ’æ£€æµ‹ã€è·¯ç”±ã€éª¨éª¼åŠ¨ç”»ä»¥åŠèµ„äº§åŒ…ç®¡ç†ï¼ˆAssetPackï¼‰ç­‰æŠ€æœ¯ï¼Œæœªæ¥æœ‰æœºä¼šå†å»å­¦ä¹ å¼ºåŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºç‰©è”ç½‘è®¾è®¡çš„èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿè®¾è®¡]]></title>    <link>https://juejin.cn/post/7579440586693836846</link>    <guid>https://juejin.cn/post/7579440586693836846</guid>    <pubDate>2025-12-03T09:03:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579440586693836846" data-draft-id="7579440586693820462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºç‰©è”ç½‘è®¾è®¡çš„èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿè®¾è®¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T09:03:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DSå°é¾™å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/968038836867111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºç‰©è”ç½‘è®¾è®¡çš„èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿè®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/968038836867111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DSå°é¾™å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:03:31.000Z" title="Wed Dec 03 2025 09:03:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<h3 data-id="heading-1">1.1 é¡¹ç›®ä»‹ç»</h3>
<h4 data-id="heading-2">ã€1ã€‘é¡¹ç›®å¼€å‘èƒŒæ™¯</h4>
<p>éšç€ç°ä»£å†œä¸šå‘æ™ºèƒ½åŒ–ã€ç²¾ç»†åŒ–æ–¹å‘çš„ä¸æ–­æ¼”è¿›ï¼Œä¼ ç»Ÿå…»èœ‚ä¸šé¢ä¸´çš„æŒ‘æˆ˜æ—¥ç›Šå‡¸æ˜¾ã€‚ä¼ ç»Ÿçš„å…»èœ‚æ–¹å¼é«˜åº¦ä¾èµ–å…»èœ‚äººçš„ç»éªŒå’Œå®šæœŸçš„äººå·¥å¼€ç®±æ£€æŸ¥ï¼Œè¿™ç§æ¨¡å¼ä¸ä»…è€—è´¹å¤§é‡äººåŠ›ç‰©åŠ›ï¼Œè€Œä¸”é¢‘ç¹çš„å¼€ç®±æ“ä½œä¼šä¸¥é‡å¹²æ‰°èœ‚ç¾¤çš„æ­£å¸¸ç”Ÿæ´»ï¼Œç”šè‡³å¯èƒ½å¼•èµ·èœ‚ç¾¤åº”æ¿€ååº”ï¼Œå½±å“èœ‚èœœäº§é‡ä¸èœ‚ç¾¤å¥åº·ã€‚æ­¤å¤–ï¼Œå¯¹äºç—…è™«å®³ã€å¤©æ•Œå…¥ä¾µã€åˆ†èœ‚é¢„å…†ç­‰çªå‘çŠ¶å†µï¼Œä¼ ç»Ÿç®¡ç†æ–¹å¼å¾€å¾€å“åº”è¿Ÿç¼“ï¼Œå®¹æ˜“é”™å¤±æœ€ä½³å¹²é¢„æ—¶æœºï¼Œç»™å…»èœ‚ä¸šå¸¦æ¥æ˜¾è‘—çš„ç»æµæŸå¤±ã€‚</p>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œå°†ç‰©è”ç½‘ï¼ˆIoTï¼‰æŠ€æœ¯ä¸ç°ä»£ä¼ æ„ŸæŠ€æœ¯ç›¸ç»“åˆï¼Œåº”ç”¨äºä¼ ç»Ÿå…»èœ‚ä¸šçš„æ•°å­—åŒ–è½¬å‹ï¼Œæˆä¸ºæå‡å…»èœ‚æ•ˆç‡ä¸ç§‘å­¦ç®¡ç†æ°´å¹³çš„å…³é”®è·¯å¾„ã€‚ç‰©è”ç½‘æŠ€æœ¯èƒ½å¤Ÿå®ç°å¯¹ç¯å¢ƒå’Œè®¾å¤‡çŠ¶æ€çš„è¿œç¨‹ã€å®æ—¶ã€æ— å¹²æ‰°ç›‘æµ‹ï¼Œé€šè¿‡æ•°æ®åˆ†æä¸ºç”Ÿäº§å†³ç­–æä¾›ç§‘å­¦ä¾æ®ã€‚å°†è¿™ä¸€æŠ€æœ¯åº”ç”¨äºèœ‚ç®±ï¼Œå¯ä»¥æ‰“ç ´ä¼ ç»Ÿå…»èœ‚ä¸šåœ¨ç©ºé—´å’Œæ—¶é—´ä¸Šçš„é™åˆ¶ï¼Œå®ç°å¯¹èœ‚ç¾¤çŠ¶æ€çš„å…¨å¤©å€™ã€æ•°æ®åŒ–ã€å¯è§†åŒ–ç®¡ç†ï¼Œä»è€Œæ¨åŠ¨å…»èœ‚ä¸šä»â€œç»éªŒå…»èœ‚â€å‘â€œç§‘å­¦å…»èœ‚â€çš„ç°ä»£åŒ–å‡çº§ã€‚</p>
<p>æœ¬é¡¹ç›®è®¾è®¡å¹¶å®ç°ä¸€å¥—åŸºäºç‰©è”ç½‘çš„èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿï¼Œä»¥åº”å¯¹ä¼ ç»Ÿå…»èœ‚æ¨¡å¼çš„ç—›ç‚¹ã€‚è¯¥ç³»ç»Ÿé€šè¿‡é›†æˆå¤šç§ä¼ æ„Ÿå™¨ï¼Œå®æ—¶é‡‡é›†èœ‚ç®±å†…å¤–çš„å…³é”®ç¯å¢ƒå‚æ•°ï¼Œå¦‚æ¸©åº¦ã€æ¹¿åº¦ã€é‡é‡ã€å£°éŸ³ã€éœ‡åŠ¨åŠå…‰ç…§å¼ºåº¦ç­‰ã€‚è¿™äº›æ•°æ®é€šè¿‡4Gæˆ–Wi-Fiç­‰æ— çº¿é€šä¿¡æ–¹å¼ï¼Œå®æ—¶ä¸Šä¼ è‡³äº‘ç«¯æœåŠ¡å™¨ã€‚å…»èœ‚ç®¡ç†è€…å¯ä»¥é€šè¿‡ä¸Šä½æœºè½¯ä»¶è¿œç¨‹è®¿é—®è¿™äº›æ•°æ®ï¼Œç›´è§‚åœ°äº†è§£èœ‚ç¾¤çš„å¥åº·çŠ¶å†µã€æ´»åŠ¨è§„å¾‹ä»¥åŠèœ‚èœœçš„äº§å‡ºæƒ…å†µï¼Œå¹¶é€šè¿‡ç³»ç»Ÿè®¾å®šçš„æŠ¥è­¦é˜ˆå€¼ï¼ŒåŠæ—¶è·å–å¦‚å¤±é‡ï¼ˆå¯èƒ½çš„åˆ†èœ‚æˆ–é¥¥é¥¿ï¼‰ã€è¶…é‡ï¼ˆèœ‚èœœå·²æ»¡ï¼‰ã€å¼‚å¸¸éœ‡åŠ¨ï¼ˆå¤©æ•Œå…¥ä¾µï¼‰ç­‰é¢„è­¦ä¿¡æ¯ï¼Œä»è€Œå®ç°ç²¾å‡†ã€é«˜æ•ˆã€ä½å¹²æ‰°çš„ç°ä»£åŒ–èœ‚ç¾¤ç®¡ç†ï¼Œæœ€ç»ˆè¾¾åˆ°é™æœ¬å¢æ•ˆã€æå‡èœ‚èœœäº§é‡ä¸å“è´¨çš„ç›®çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f85f727f62884178a36a1b5c317b96e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=nKSfwATnYbsm04AOMU5WxMvjmHc%3D" alt="4" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b5b10b5ea4f48dbb5f440c71d17ca10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=XGr2n7NkjI4%2FvbZEy5YxL1MgMZ0%3D" alt="mermaid_20251203_313da6" loading="lazy"/></p>
<h4 data-id="heading-3">ã€2ã€‘è®¾è®¡å®ç°çš„åŠŸèƒ½</h4>
<p>å½“å‰é¡¹ç›®ä½¿ç”¨çš„ç›¸å…³è½¯ä»¶å·¥å…·ã€æ¨¡å—æºç å·²ç»ä¸Šä¼ ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fccnr8sukk85n.feishu.cn%2Fwiki%2FQjY8weDYHibqRYkFP2qcA9aGnvb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ccnr8sukk85n.feishu.cn/wiki/QjY8weDYHibqRYkFP2qcA9aGnvb?from=from_copylink" ref="nofollow noopener noreferrer">ccnr8sukk85n.feishu.cn/wiki/QjY8weâ€¦</a></p>
<p>ï¼ˆ1ï¼‰ä½¿ç”¨ STM32F103C8T6 å®Œæˆæ¸©æ¹¿åº¦ã€é‡é‡ã€å£°éŸ³ã€éœ‡åŠ¨ç­‰ä¼ æ„Ÿå™¨çš„é‡‡é›†ä¸æ•°å­—å¤„ç†ã€‚</p>
<p>ï¼ˆ2ï¼‰é€šè¿‡ HX711 å®Œæˆèœ‚ç®±é‡é‡ä¼ æ„Ÿå™¨ï¼ˆç§°é‡ä¼ æ„Ÿå™¨ï¼‰çš„é«˜ç²¾åº¦é‡‡é›†ä¸æ ¡å‡†ã€‚</p>
<p>ï¼ˆ3ï¼‰ä½¿ç”¨ä¸€ä¸ª DHT11 å®Œæˆèœ‚ç®±å†…éƒ¨æ¸©æ¹¿åº¦ç²¾å‡†æµ‹é‡ï¼Œå®ç°æ•°æ®è¡¥å¿ä¸æ»¤æ³¢ã€‚</p>
<p>ï¼ˆ4ï¼‰ä½¿ç”¨ä¸€ä¸ª DHT11 å®Œæˆå¤–éƒ¨ç¯å¢ƒæ¸©æ¹¿åº¦æµ‹é‡ï¼Œä¸Šä¼ å¯¹æ¯”åˆ†ææ•°æ®ã€‚</p>
<p>ï¼ˆ5ï¼‰ä½¿ç”¨ MAX9814 éº¦å…‹é£æ¨¡å—é‡‡é›†èœ‚ç®±å£°å­¦ä¿¡æ¯ï¼Œç”¨äºèœ‚ç¾¤æ´»åŠ›åˆ¤æ–­ã€‚</p>
<p>ï¼ˆ6ï¼‰ä½¿ç”¨ SW420 éœ‡åŠ¨æ¨¡å—é‡‡é›†èœ‚ç®±éœ‡åŠ¨æƒ…å†µï¼Œå®ç°å¼‚å¸¸éœ‡åŠ¨æŠ¥è­¦ã€‚</p>
<p>ï¼ˆ7ï¼‰ä½¿ç”¨ BH1750 å…‰ç…§ä¼ æ„Ÿå™¨æµ‹é‡å¤–ç•Œå…‰ç…§å¼ºåº¦ï¼Œè¾…åŠ©åˆ¤æ–­èœ‚ç¾¤æ´»åŠ¨å‘¨æœŸã€‚</p>
<p>ï¼ˆ8ï¼‰ä½¿ç”¨ OLED 0.96 æ˜¾ç¤ºå±æ˜¾ç¤ºå®æ—¶çš„èœ‚ç®±å†…éƒ¨æ¸©æ¹¿åº¦ã€é‡é‡ã€å…‰ç…§ç­‰ä¿¡æ¯ã€‚</p>
<p>ï¼ˆ9ï¼‰ä½¿ç”¨ Air780E æ¨¡å—å®ç° 4G LTE ç‰©è”ç½‘æ•°æ®é€šä¿¡æˆ–é€‰æ‹© ESP8266-WIFIï¼Œä¸Šä¼ æ•°æ®è‡³åä¸ºäº‘ã€‚</p>
<p>ï¼ˆ10ï¼‰é€šè¿‡ MQTT åè®®å®ç°èœ‚ç®±æ•°æ®ä¸ŠæŠ¥ã€é˜ˆå€¼ä¸‹å‘å’ŒæŠ¥è­¦æ¨é€ã€‚</p>
<p>ï¼ˆ11ï¼‰ä¸Šä½æœºé‡‡ç”¨ Qtï¼ˆC++ï¼‰å®ç°æ•°æ®æ¥æ”¶å¯è§†åŒ–æ˜¾ç¤ºã€‚</p>
<h4 data-id="heading-4">ã€3ã€‘é¡¹ç›®ç¡¬ä»¶æ¨¡å—ç»„æˆ</h4>
<p>ï¼ˆ1ï¼‰ä¸»æ§æ¨¡å—ï¼šSTM32F103C8T6 æ ¸å¿ƒæ¿</p>
<p>ï¼ˆ2ï¼‰å†…éƒ¨æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼šDHT11</p>
<p>ï¼ˆ3ï¼‰å¤–éƒ¨ç¯å¢ƒæ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼šDHT11</p>
<p>ï¼ˆ4ï¼‰é‡é‡ä¼ æ„Ÿå™¨ï¼š10kg ç§°é‡ä¼ æ„Ÿå™¨ + HX711 æ”¾å¤§å™¨</p>
<p>ï¼ˆ5ï¼‰å£°éŸ³é‡‡é›†æ¨¡å—ï¼šMAX9814 è‡ªåŠ¨å¢ç›Šéº¦å…‹é£æ¨¡å—</p>
<p>ï¼ˆ6ï¼‰éœ‡åŠ¨ä¼ æ„Ÿå™¨ï¼šSW420 éœ‡åŠ¨æ£€æµ‹æ¨¡å—</p>
<p>ï¼ˆ7ï¼‰å…‰ç…§é‡‡é›†æ¨¡å—ï¼šBH1750</p>
<p>ï¼ˆ8ï¼‰é€šä¿¡æ¨¡å—ï¼šAir780Eï¼ˆ4G LTE Cat1ï¼‰ æˆ–ESP8266-01S</p>
<p>ï¼ˆ9ï¼‰æ˜¾ç¤ºæ¨¡å—ï¼šOLED 0.96 I2C æ˜¾ç¤ºå±</p>
<p>ï¼ˆ10ï¼‰ç”µæºæ¨¡å—ï¼šDC-DC 5V/3.3V ç¨³å‹æ¨¡å—ï¼ˆAMS1117ï¼‰</p>
<p>ï¼ˆ11ï¼‰ç”µæ± ï¼š18650 é”‚ç”µæ±  + ä¿æŠ¤æ¿ + å¤ªé˜³èƒ½æ¿ï¼ˆæˆ·å¤–éƒ¨ç½²ï¼‰</p>
<h4 data-id="heading-5">ã€4ã€‘è®¾è®¡æ„ä¹‰</h4>
<p>æœ¬é¡¹ç›®è®¾è®¡çš„æ™ºèƒ½èœ‚ç®±ç›‘æµ‹ç³»ç»Ÿï¼Œå…¶æ ¸å¿ƒæ„ä¹‰åœ¨äºåˆ©ç”¨ç‰©è”ç½‘å’Œä¼ æ„ŸæŠ€æœ¯ï¼Œå°†ä¼ ç»Ÿå…»èœ‚æ¨¡å¼ä»ä¾èµ–äººåŠ›å’Œç»éªŒçš„ç²—æ”¾å¼ç®¡ç†ï¼Œè½¬å˜ä¸ºä¸€ç§éä¾µå…¥å¼ã€æ•°æ®åŒ–çš„ç²¾ç»†åŒ–ç®¡ç†æ¨¡å¼ã€‚å®ƒè§£å†³äº†é¢‘ç¹å¼€ç®±æ£€æŸ¥å¯¹èœ‚ç¾¤é€ æˆçš„å¹²æ‰°é—®é¢˜ï¼Œå®ç°äº†å¯¹èœ‚ç®±å†…éƒ¨çŠ¶æ€çš„æŒç»­ã€æ— å£°ç›‘æµ‹ï¼Œä¸ºå…»èœ‚ä¸šçš„ç°ä»£åŒ–è½¬å‹æä¾›äº†åˆ‡å®å¯è¡Œçš„æŠ€æœ¯è·¯å¾„ã€‚</p>
<p>è¯¥è®¾è®¡çš„æ·±è¿œæ„ä¹‰ä½“ç°åœ¨å®ƒä¸ºå…»èœ‚å†³ç­–æä¾›äº†ç§‘å­¦çš„æ•°æ®æ”¯æŒã€‚é€šè¿‡é›†æˆæ¸©åº¦ã€æ¹¿åº¦ã€é‡é‡ã€å£°éŸ³ã€å…‰ç…§å’Œéœ‡åŠ¨ç­‰å¤šç§ä¼ æ„Ÿå™¨ï¼Œç³»ç»Ÿèƒ½å¤Ÿæ„å»ºä¸€ä¸ªå…³äºèœ‚ç¾¤å¥åº·ã€æ´»åŠ›ã€ç¹æ®–å’Œç”Ÿäº§çŠ¶æ€çš„å¤šç»´åº¦æ•°æ®æ¨¡å‹ã€‚å…»èœ‚äººä¸å†ä»…ä»…ä¾èµ–ä¸»è§‚ç»éªŒæ¥åˆ¤æ–­èœ‚ç¾¤çŠ¶å†µï¼Œè€Œæ˜¯å¯ä»¥æ ¹æ®å®æ—¶ã€å®¢è§‚çš„æ•°æ®è¿›è¡Œåˆ†æã€‚ä¾‹å¦‚ï¼Œé€šè¿‡å¯¹æ¯”ç®±å†…å¤–æ¸©æ¹¿åº¦å’Œå…‰ç…§å¼ºåº¦ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°è¯„ä¼°èœ‚ç¾¤çš„æ´»åŠ¨èŠ‚å¾‹ï¼›é€šè¿‡åˆ†æå£°éŸ³é¢‘ç‡ï¼Œå¯ä»¥é¢„åˆ¤åˆ†èœ‚æˆ–ç—…æ€ç­‰å¼‚å¸¸æƒ…å†µï¼Œä»è€Œå°†â€œç»éªŒå…»èœ‚â€æå‡åˆ°â€œç§‘å­¦å…»èœ‚â€çš„å…¨æ–°æ°´å¹³ã€‚</p>
<p>æ­¤ç³»ç»Ÿæ˜¾è‘—æå‡äº†å…»èœ‚ç®¡ç†çš„æ•ˆç‡ä¸å“åº”é€Ÿåº¦ã€‚å€ŸåŠ©4Gæˆ–Wi-Fiæ— çº¿é€šä¿¡æ¨¡å—ï¼Œæ‰€æœ‰é‡‡é›†çš„æ•°æ®éƒ½èƒ½å®æ—¶ä¼ è¾“è‡³äº‘æœåŠ¡å™¨ï¼Œå¹¶é€šè¿‡ä¸Šä½æœºè½¯ä»¶è¿›è¡Œå¯è§†åŒ–å‘ˆç°ã€‚è¿™æ„å‘³ç€ç®¡ç†è€…å¯ä»¥éšæ—¶éšåœ°è¿œç¨‹ç›‘æ§èœ‚ç®±ï¼Œæå¤§åœ°é™ä½äº†å·¡æŸ¥æˆæœ¬å’ŒåŠ³åŠ¨å¼ºåº¦ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒåŸºäºé‡é‡å’Œéœ‡åŠ¨ç­‰å…³é”®æŒ‡æ ‡çš„é˜ˆå€¼æŠ¥è­¦åŠŸèƒ½ï¼Œä½¿å¾—ç³»ç»Ÿèƒ½å¤Ÿä¸»åŠ¨é¢„è­¦æ½œåœ¨é£é™©ï¼Œå¦‚èœ‚èœœæ»¡æº¢ã€èœ‚ç¾¤å¤±é‡ï¼ˆå¯èƒ½ç”±åˆ†èœ‚æˆ–é¥¥è’å¯¼è‡´ï¼‰æˆ–å¤–éƒ¨ä¾µæ‰°ï¼Œä½¿ç®¡ç†è€…èƒ½å¤Ÿç¬¬ä¸€æ—¶é—´é‡‡å–å¹²é¢„æªæ–½ï¼Œå˜è¢«åŠ¨ç®¡ç†ä¸ºä¸»åŠ¨é¢„é˜²ï¼Œæœ‰æ•ˆè§„é¿ç»æµæŸå¤±ã€‚</p>
<p>æœ¬è®¾è®¡çš„ç°å®æ„ä¹‰è¿˜åœ¨äºå…¶é«˜åº¦çš„å®ç”¨æ€§å’Œå¯éƒ¨ç½²æ€§ã€‚ç³»ç»Ÿæä¾›äº†4Gå’ŒWi-Fiä¸¤ç§é€šä¿¡æ–¹æ¡ˆï¼Œä½¿å…¶èƒ½å¤Ÿçµæ´»é€‚åº”ä¸åŒåœºåœ°çš„ç½‘ç»œæ¡ä»¶ï¼Œæ— è®ºæ˜¯åè¿œå±±åŒºè¿˜æ˜¯å®¶åº­å†œåœºã€‚ç»“åˆå¤ªé˜³èƒ½æ¿å’Œé”‚ç”µæ± çš„ä¾›ç”µæ–¹æ¡ˆï¼Œç¡®ä¿äº†è®¾å¤‡åœ¨æˆ·å¤–ç¯å¢ƒä¸‹çš„é•¿æœŸç¨³å®šè¿è¡Œã€‚åŒæ—¶ï¼Œæœ¬åœ°OLEDæ˜¾ç¤ºå±çš„è®¾è®¡ä¹Ÿä¸ºç°åœºç»´æŠ¤å’Œå¿«é€Ÿè¯Šæ–­æä¾›äº†ä¾¿åˆ©ã€‚è¿™å¥—å®Œæ•´çš„è½¯ç¡¬ä»¶è§£å†³æ–¹æ¡ˆä¸ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯éªŒè¯åŸå‹ï¼Œæ›´æ˜¯ä¸€ä¸ªå…·å¤‡å®é™…åº”ç”¨ä»·å€¼ã€èƒ½å¤Ÿç›´æ¥æœåŠ¡äºå…»èœ‚ç”Ÿäº§ã€é™ä½ç®¡ç†é—¨æ§›ã€æå‡äº§ä¸šæ•ˆç›Šçš„æ™ºèƒ½åŒ–å·¥å…·ã€‚</p>
<h4 data-id="heading-6">ã€5ã€‘å¸‚é¢ä¸ŠåŒç±»äº§å“ç ”ç©¶ç°çŠ¶</h4>
<h5 data-id="heading-7">æ¡ˆä¾‹ä¸€ï¼šå›½å†…çš„å…ˆè¡Œè€…â€”â€”å¤©åºœèœ‚è°·â€œå¤§èœ‚æ…§â€æ™ºèƒ½èœ‚ç®±</h5>
<p>å››å·å¤©åºœèœ‚è°·ç§‘æŠ€æœ‰é™å…¬å¸æ˜¯å›½å†…æ™ºæ…§å…»èœ‚é¢†åŸŸçš„ä»£è¡¨ä¼ä¸šä¹‹ä¸€ã€‚   ä»–ä»¬çš„æ ¸å¿ƒäº§å“æ˜¯â€œå¤§èœ‚æ…§â€AIå…»èœ‚ç³»ç»Ÿï¼Œè¯¥ç³»ç»Ÿæ·±åº¦èåˆäº†ç‰©è”ç½‘ä¸å¤§æ•°æ®æŠ€æœ¯ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šè¿™å¥—ç³»ç»Ÿä¸æ‚¨çš„è®¾è®¡éå¸¸ç›¸ä¼¼ï¼ŒåŒæ ·é€šè¿‡åœ¨èœ‚ç®±åº•éƒ¨å®‰è£…æ™ºèƒ½ä¼ æ„Ÿå™¨ï¼Œå®æ—¶é‡‡é›†èœ‚ç®±çš„é‡é‡ã€èœœèœ‚å‡ºå…¥èœ‚ç®±çš„æ¬¡æ•°ï¼ˆå³â€œå‡ºå‹¤ç‡â€ï¼‰ç­‰æ•°æ®ã€‚   è¿™äº›æ•°æ®é€šè¿‡æ— çº¿ç½‘ç»œä¼ è¾“åˆ°äº‘ç«¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ‰‹æœºAppéšæ—¶æŸ¥çœ‹ï¼Œå®ç°äº†è¿œç¨‹ã€æ— å¹²æ‰°çš„èœ‚ç®±çŠ¶æ€ç›‘æ§ã€‚</li>
<li><strong>æŠ€æœ¯äº®ç‚¹</strong>ï¼šå¤©åºœèœ‚è°·å¼ºè°ƒå…¶â€œèœœèœ‚å¤šç»´å¤§æ•°æ®å¹³å°â€ï¼Œè¯¥å¹³å°ä¸ä»…æ”¶é›†æ•°æ®ï¼Œè¿˜åˆ©ç”¨AIè¿›è¡Œè®¡ç®—å’Œåˆ†æï¼Œä¸ºå…»èœ‚æˆ·æä¾›ç²¾å‡†çš„æ•°æ®æœåŠ¡å’Œå¼‚å¸¸é¢„è­¦ã€‚   ä¾‹å¦‚ï¼Œé€šè¿‡åˆ†æèœ‚ç®±é‡é‡å˜åŒ–æ›²çº¿ï¼Œå¯ä»¥åˆ¤æ–­èœ‚èœœæ˜¯å¦æˆç†Ÿï¼Œä½•æ—¶å¯ä»¥å–èœœï¼›é€šè¿‡ç›‘æµ‹èœœèœ‚å‡ºå‹¤æ•°æ®ï¼Œå¯ä»¥è¯„ä¼°èœ‚ç¾¤çš„å¥åº·ä¸æ´»åŠ›ã€‚</li>
<li><strong>è§£å†³çš„ç—›ç‚¹</strong>ï¼šè¯¥ç³»ç»Ÿæ˜¾è‘—å‡å°‘äº†ä¼ ç»Ÿå…»èœ‚ä¸­é¢‘ç¹çš„äººå·¥å¼€ç®±æ£€æŸ¥ï¼Œé™ä½äº†70%çš„åŠ³åŠ¨é‡ï¼ŒåŒæ—¶å‡å°‘äº†å¯¹èœ‚ç¾¤50%çš„å¹²æ‰°ã€‚   å¯¹äºå…»èœ‚å¤§æˆ·æ¥è¯´ï¼ŒåŸæœ¬éœ€è¦å¤šäººå¤šå¤©å®Œæˆçš„å·¡æŸ¥å·¥ä½œï¼Œç°åœ¨åªéœ€å°‘æ•°äººé€šè¿‡æ‰‹æœºå³å¯å®Œæˆï¼Œå¤§å¹…æå‡äº†ç®¡ç†æ•ˆç‡ã€‚ æ­¤å¤–ï¼Œè¯¥å…¬å¸è¿˜å…³æ³¨åˆ°äº†é‡å¤–èœ‚åœºä¾›ç”µå’Œç½‘ç»œè¦†ç›–çš„éš¾é¢˜ï¼Œå¹¶é€šè¿‡å¤ªé˜³èƒ½å…‰ä¼æ¿å’Œä¼˜åŒ–çš„ä½åŠŸè€—è®¾è®¡æ¥åº”å¯¹ã€‚</li>
</ul>
<h5 data-id="heading-8">æ¡ˆä¾‹äºŒï¼šå›½é™…è§†é‡ä¸‹çš„åˆ›æ–°è€…â€”â€”ä»¥è‰²åˆ—Beewiseå…¬å¸çš„â€œBeeHomeâ€</h5>
<p>Beewiseæ˜¯ä¸€å®¶å¤‡å—å…³æ³¨çš„ä»¥è‰²åˆ—å†œä¸šç§‘æŠ€åˆåˆ›å…¬å¸ï¼Œä»–ä»¬æ¨å‡ºçš„â€œBeeHomeâ€äº§å“ï¼Œåœ¨æ™ºèƒ½åŒ–å’Œè‡ªåŠ¨åŒ–æ–¹é¢è¿ˆå‡ºäº†æ›´å¤§çš„ä¸€æ­¥ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šâ€œBeeHomeâ€ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç›‘æµ‹è®¾å¤‡ï¼Œå®ƒæ›´åƒä¸€ä¸ªæœºå™¨äººç®¡å®¶ã€‚å®ƒåœ¨ä¸€ä¸ªå¤§å‹ç®±ä½“ä¸­å®¹çº³å¤šä¸ªèœ‚ç¾¤ï¼Œå¹¶é€šè¿‡å†…ç½®çš„æœºå™¨äººã€è®¡ç®—æœºè§†è§‰å’ŒAIæŠ€æœ¯ï¼Œå®ç°24/7çš„å…¨å¤©å€™ç›‘æµ‹å’Œè‡ªåŠ¨å¹²é¢„ã€‚</li>
<li><strong>æŠ€æœ¯äº®ç‚¹</strong>ï¼šå…¶æœ€å¤§çš„ç‰¹è‰²æ˜¯â€œæœºå™¨äººå…»èœ‚â€ã€‚ç³»ç»Ÿé€šè¿‡æ‘„åƒå¤´å’Œä¼ æ„Ÿå™¨ç›‘æµ‹èœ‚ç¾¤ï¼Œå½“AIç®—æ³•å‘ç°é—®é¢˜æ—¶ï¼ˆå¦‚ç—…è™«å®³ã€èœ‚ç‹é—®é¢˜ã€åˆ†èœ‚é¢„å…†ç­‰ï¼‰ï¼Œæœºå™¨äººä¼šè‡ªåŠ¨é‡‡å–è¡ŒåŠ¨ï¼Œä¾‹å¦‚æ–½è¯ã€è°ƒæ•´ç¯å¢ƒæˆ–åˆå¹¶èœ‚ç¾¤ï¼Œå…¨ç¨‹æ— éœ€äººå·¥ä»‹å…¥ã€‚ Beewiseå£°ç§°è¿™ç§æ–¹å¼èƒ½æ˜¾è‘—é™ä½é«˜è¾¾35%çš„èœ‚ç¾¤å´©æºƒç‡ã€‚</li>
<li>
<ul>
<li><strong>å•†ä¸šæ¨¡å¼</strong>ï¼šBeewiseçš„æ¨¡å¼ä¸ä»…æ˜¯é”€å”®ç¡¬ä»¶ï¼Œæ›´ä¾§é‡äºæä¾›æˆç²‰æœåŠ¡ã€‚ä»–ä»¬ä¸å†œåœºä¸»åˆä½œï¼Œé€šè¿‡å…¶é«˜æ•ˆçš„èœ‚ç¾¤ç®¡ç†æŠ€æœ¯ï¼Œç¡®ä¿ä½œç‰©æˆç²‰çš„è´¨é‡å’Œæ•ˆç‡ï¼Œè§£å†³äº†å› èœ‚ç¾¤æ•°é‡ä¸‹é™å¯¼è‡´çš„æˆç²‰æœåŠ¡ä»·æ ¼ä¸Šæ¶¨å’Œä¾›åº”ä¸ç¨³å®šçš„é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-9">æ¡ˆä¾‹ä¸‰ï¼šåŠŸèƒ½å…¨é¢çš„è§£å†³æ–¹æ¡ˆæä¾›å•†â€”â€”æ…§å…»èœ‚</h5>
<p>â€œæ…§å…»èœ‚â€æ˜¯ä¸­å›½å†œä¸šç§‘å­¦é™¢èœœèœ‚ç ”ç©¶æ‰€èƒŒæ™¯ä¸‹çš„ä¸€ä¸ªå“ç‰Œï¼Œæä¾›ä»ç¡¬ä»¶åˆ°è½¯ä»¶çš„ä¸€æ•´å¥—æ™ºæ…§èœ‚ä¸šè§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>äº§å“ç³»åˆ—åŒ–</strong>ï¼šä»–ä»¬æ ¹æ®ä¸åŒç”¨æˆ·éœ€æ±‚ï¼Œæ¨å‡ºäº†åŸºç¡€ç‰ˆã€æ ‡å‡†ç‰ˆã€é«˜çº§ç‰ˆç­‰ä¸åŒé…ç½®çš„æ™ºèƒ½èœ‚ç®±ã€‚ åŸºç¡€ç‰ˆä¾§é‡äºå†…éƒ¨ç¯å¢ƒç›‘æµ‹å’Œæ— çº¿ä¼ è¾“ï¼Œç”±å¤ªé˜³èƒ½ä¾›ç”µï¼Œæ˜“äºéƒ¨ç½²ã€‚ è€Œæ ‡å‡†ç‰ˆåˆ™å¢åŠ äº†è§†é¢‘ç›‘æ§å’Œæ›´ç²¾ç¡®çš„èœœèœ‚è®¡æ•°åŠŸèƒ½ã€‚</li>
<li><strong>å¹³å°åŒ–æœåŠ¡</strong>ï¼šé™¤äº†æ™ºèƒ½ç¡¬ä»¶ï¼Œä»–ä»¬è¿˜æä¾›èœ‚äº§å“è´¨é‡å®‰å…¨è¿½æº¯å¹³å°ã€èœ‚äº§ä¸šå¤§æ•°æ®ç®¡ç†å†³ç­–å¹³å°å’Œèœ‚ä¸šå…¬å…±æœåŠ¡å¹³å°ç­‰ã€‚ è¿™è¡¨æ˜å¸‚åœºè¶‹åŠ¿æ­£ä»å•ä¸€çš„ç¡¬ä»¶é”€å”®ï¼Œè½¬å‘æä¾›å…¨äº§ä¸šé“¾çš„æ•°å­—åŒ–æœåŠ¡ï¼ŒåŒ…æ‹¬ç”Ÿäº§ç®¡ç†ã€äº§å“æº¯æºå’Œä¿¡æ¯å…±äº«ã€‚</li>
</ul>
<h5 data-id="heading-10">æ€»ç»“ä¸å…±æ€§</h5>
<p>ç»¼åˆæ¥çœ‹ï¼Œå¸‚é¢ä¸Šçš„åŒç±»äº§å“åœ¨æ ¸å¿ƒæ€è·¯ä¸Šé€šè¿‡ä¼ æ„Ÿå™¨é‡‡é›†æ•°æ®ï¼Œå®ç°è¿œç¨‹ç›‘æ§å’Œæ™ºèƒ½é¢„è­¦ã€‚   <strong>é‡é‡ã€æ¸©åº¦ã€æ¹¿åº¦</strong>æ˜¯æ‰€æœ‰äº§å“çš„æ ‡é…ç›‘æµ‹æŒ‡æ ‡ã€‚   <strong>å£°éŸ³ç›‘æµ‹</strong>ä¹Ÿé€æ¸æˆä¸ºä¸»æµï¼Œç”¨äºåˆ†æèœ‚ç¾¤çš„â€œè„‰åŠ¨â€å’ŒçŠ¶æ€ã€‚   åœ¨é€šä¿¡æ–¹é¢ï¼ŒåŒæ ·é‡‡ç”¨4G/LTEæˆ–Wi-Fiç­‰æ–¹æ¡ˆå°†æ•°æ®ä¸Šä¼ è‡³äº‘å¹³å°ã€‚</p>
<h4 data-id="heading-11">ã€6ã€‘æ‘˜è¦</h4>
<p>ä¸ºè§£å†³ä¼ ç»Ÿå…»èœ‚ä¸šä¾èµ–äººå·¥ã€ç®¡ç†æ•ˆç‡ä½ä¸‹ã€å¹²æ‰°èœ‚ç¾¤ç­‰é—®é¢˜ï¼Œæœ¬é¡¹ç›®è®¾è®¡å¹¶å®ç°äº†ä¸€å¥—åŸºäºç‰©è”ç½‘ï¼ˆIoTï¼‰çš„èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿä»¥STM32F103C8T6å•ç‰‡æœºä½œä¸ºä¸»æ§æ ¸å¿ƒï¼Œé›†æˆDHT11æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ã€HX711ç§°é‡æ¨¡å—ã€MAX9814å£°éŸ³ä¼ æ„Ÿå™¨ã€SW420éœ‡åŠ¨ä¼ æ„Ÿå™¨åŠBH1750å…‰ç…§ä¼ æ„Ÿå™¨ï¼Œå®ç°å¯¹èœ‚ç®±å†…å¤–ç¯å¢ƒã€èœ‚ç¾¤æ´»åŠ›ã€èœ‚èœœäº§é‡åŠå¤–éƒ¨å¹²æ‰°ç­‰å¤šç»´åº¦ä¿¡æ¯çš„å®æ—¶é‡‡é›†ã€‚ç³»ç»Ÿæ”¯æŒé€šè¿‡Air780Eï¼ˆ4Gï¼‰æˆ–ESP8266ï¼ˆWi-Fiï¼‰æ¨¡å—ï¼Œåˆ©ç”¨MQTTåè®®å°†æ•°æ®ç¨³å®šä¸Šä¼ è‡³åä¸ºäº‘IoTDAå¹³å°ã€‚åŒæ—¶ï¼Œæ•°æ®å¯åœ¨æœ¬åœ°OLEDå±å¹•ä¸Šå®æ—¶æ˜¾ç¤ºï¼Œå¹¶é€šè¿‡Qtå¼€å‘çš„ä¸Šä½æœºè½¯ä»¶è¿›è¡Œè¿œç¨‹å¯è§†åŒ–ç›‘æ§ä¸æŠ¥è­¦é˜ˆå€¼é…ç½®ã€‚æœ¬è®¾è®¡æ—¨åœ¨å®ç°å¯¹èœ‚ç®±çš„è¿œç¨‹åŒ–ã€æ•°æ®åŒ–ã€æ— å¹²æ‰°å¼ç®¡ç†ï¼Œä»¥æå‡å…»èœ‚çš„ç§‘å­¦æ€§ä¸ç»æµæ•ˆç›Šã€‚</p>
<hr/>
<p><strong>å…³é”®å­—</strong></p>
<ul>
<li>ç‰©è”ç½‘</li>
<li>æ™ºèƒ½èœ‚ç®±</li>
<li>STM32</li>
<li>ä¼ æ„Ÿå™¨ç½‘ç»œ</li>
<li>MQTT</li>
<li>åä¸ºäº‘</li>
<li>Qt</li>
</ul>
<h3 data-id="heading-12">1.2 è®¾è®¡æ€è·¯</h3>
<p>æœ¬é¡¹ç›®çš„è®¾è®¡æ€è·¯å›´ç»•æ¨¡å—åŒ–ã€å®ç”¨æ€§å’Œå¯æ‰©å±•æ€§å±•å¼€ï¼Œæ„å»ºä¸€ä¸ªå®Œæ•´çš„â€œæ„ŸçŸ¥-ä¼ è¾“-åº”ç”¨â€ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆã€‚æ•´ä½“æ¶æ„åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒå±‚æ¬¡ï¼šåº•å±‚çš„æ•°æ®é‡‡é›†ç«¯ã€ä¸­å±‚çš„ç½‘ç»œä¼ è¾“å±‚ä»¥åŠé¡¶å±‚çš„äº‘å¹³å°ä¸ç”¨æˆ·åº”ç”¨å±‚ã€‚é€šè¿‡è¿™ç§åˆ†å±‚è®¾è®¡ï¼Œå°†å¤æ‚çš„ç³»ç»ŸåŠŸèƒ½è§£è€¦ï¼Œä½¿æ¯ä¸ªéƒ¨åˆ†éƒ½èƒ½ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œä¼˜åŒ–ï¼Œæœ€ç»ˆé›†æˆä¸ºä¸€ä¸ªé«˜æ•ˆã€å¯é çš„æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿã€‚</p>
<p>åœ¨æ•°æ®é‡‡é›†ç«¯ï¼Œè®¾è®¡çš„æ ¸å¿ƒæ˜¯é€‰ç”¨STM32F103C8T6ä½œä¸ºä¸»æ§èŠ¯ç‰‡ã€‚é€‰æ‹©æ­¤èŠ¯ç‰‡æ˜¯åŸºäºå…¶å¼ºå¤§çš„æ€§èƒ½ã€ä¸°å¯Œçš„ç‰‡ä¸Šå¤–è®¾èµ„æºï¼ˆå¦‚ADCã€I2Cã€SPIç­‰ï¼‰ä»¥åŠå¹¿æ³›çš„ç¤¾åŒºæ”¯æŒï¼Œè¶³ä»¥èƒœä»»åŒæ—¶å¤„ç†å¤šä¸ªä¼ æ„Ÿå™¨æ•°æ®çš„ä»»åŠ¡ã€‚ä¼ æ„Ÿå™¨çš„é€‰æ‹©åˆ™ä¸¥æ ¼å¯¹åº”åŠŸèƒ½éœ€æ±‚ï¼šé€šè¿‡ä¸¤ä¸ªDHT11ä¼ æ„Ÿå™¨åˆ†åˆ«é‡‡é›†èœ‚ç®±å†…éƒ¨å’Œå¤–éƒ¨çš„æ¸©æ¹¿åº¦ï¼Œå½¢æˆå†…å¤–ç¯å¢ƒå¯¹æ¯”ï¼›é‡‡ç”¨é«˜ç²¾åº¦çš„HX711æ¨¡å—é…åˆç§°é‡ä¼ æ„Ÿå™¨ï¼Œå®ç°å¯¹èœ‚ç®±é‡é‡çš„ç²¾ç¡®æµ‹é‡ï¼Œä»è€Œé—´æ¥åæ˜ èœ‚èœœäº§é‡å’Œèœ‚ç¾¤è§„æ¨¡ï¼›åˆ©ç”¨MAX9814éº¦å…‹é£å’ŒSW420éœ‡åŠ¨æ¨¡å—ï¼Œåˆ†åˆ«ä»å£°å­¦å’Œç‰©ç†éœ‡åŠ¨ä¸¤ä¸ªç»´åº¦ç›‘æµ‹èœ‚ç¾¤çŠ¶æ€åŠå¤–éƒ¨å¨èƒï¼›å¹¶è¾…ä»¥BH1750å…‰ç…§ä¼ æ„Ÿå™¨åˆ¤æ–­èœ‚ç¾¤çš„æ˜¼å¤œæ´»åŠ¨å‘¨æœŸã€‚æ‰€æœ‰ä¼ æ„Ÿå™¨æ•°æ®ç”±STM32è¿›è¡Œç»Ÿä¸€çš„é‡‡é›†ã€æ»¤æ³¢å’Œåˆæ­¥å¤„ç†ï¼Œå¹¶é€šè¿‡æœ¬åœ°çš„OLEDæ˜¾ç¤ºå±ä¸ºç°åœºäººå‘˜æä¾›å³æ—¶çš„æ•°æ®åé¦ˆã€‚</p>
<p>åœ¨ç½‘ç»œä¼ è¾“å±‚ï¼Œè®¾è®¡å……åˆ†è€ƒè™‘äº†ä¸åŒéƒ¨ç½²åœºæ™¯çš„ç½‘ç»œå¯ç”¨æ€§ï¼Œæä¾›äº†4Gå’ŒWi-Fiä¸¤ç§çµæ´»çš„é€šä¿¡æ–¹æ¡ˆã€‚å¯¹äºåè¿œã€æ— Wi-Fiè¦†ç›–çš„é‡å¤–èœ‚åœºï¼Œé€‰ç”¨Air780Eæ¨¡ç»„æ¥å…¥4G LTEç½‘ç»œï¼›å¯¹äºå®¶åº­æˆ–æœ‰Wi-Fiç½‘ç»œçš„åœºæ™¯ï¼Œåˆ™å¯é€‰ç”¨æˆæœ¬æ›´ä½çš„ESP8266æ¨¡å—ã€‚é€šä¿¡åè®®é€‰æ‹©äº†è½»é‡çº§çš„MQTTåè®®ï¼Œå®ƒåŸºäºå‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼Œéå¸¸é€‚åˆèµ„æºå—é™çš„ç‰©è”ç½‘è®¾å¤‡ã€‚è®¾å¤‡ä½œä¸ºå®¢æˆ·ç«¯ï¼Œå°†é‡‡é›†åˆ°çš„å„é¡¹æ•°æ®å‘å¸ƒåˆ°äº‘æœåŠ¡å™¨çš„æŒ‡å®šä¸»é¢˜ï¼ˆTopicï¼‰ï¼ŒåŒæ—¶è®¢é˜…é…ç½®ä¸»é¢˜ï¼Œä»¥æ¥æ”¶äº‘ç«¯ä¸‹å‘çš„æŠ¥è­¦é˜ˆå€¼ç­‰æŒ‡ä»¤ï¼Œå®ç°äº†è®¾å¤‡ä¸äº‘å¹³å°ä¹‹é—´é«˜æ•ˆã€ä½åŠŸè€—çš„åŒå‘é€šä¿¡ã€‚</p>
<p>åœ¨äº‘å¹³å°ä¸åº”ç”¨å±‚ï¼Œç³»ç»Ÿä»¥åä¸ºäº‘IoTDAä½œä¸ºæ•°æ®ä¸­æ¢ã€‚è¯¥å¹³å°è´Ÿè´£è®¾å¤‡çš„æ¥å…¥è®¤è¯ã€æ•°æ®æµçš„æ¥æ”¶ã€å­˜å‚¨ä»¥åŠè§„åˆ™å¼•æ“çš„é…ç½®ï¼Œä¸ºåç»­çš„æ•°æ®åˆ†æå’Œåº”ç”¨å¼€å‘æä¾›äº†åšå®çš„åŸºç¡€ã€‚æŠ¥è­¦åŠŸèƒ½ï¼ˆå¦‚è¶…é‡ã€å¤±é‡ã€å¼‚å¸¸éœ‡åŠ¨ï¼‰çš„æ ¸å¿ƒé€»è¾‘åœ¨äº‘ç«¯å®ç°ï¼Œå½“ä¸ŠæŠ¥çš„æ•°æ®è§¦å‘é¢„è®¾é˜ˆå€¼æ—¶ï¼Œå¹³å°èƒ½å¤Ÿä¸»åŠ¨æ¨é€æŠ¥è­¦ä¿¡æ¯ã€‚æœ€ç»ˆï¼Œé¢å‘ç”¨æˆ·çš„äº¤äº’ç•Œé¢é€šè¿‡Qtï¼ˆC++ï¼‰å¼€å‘çš„ä¸Šä½æœºè½¯ä»¶å®ç°ã€‚è¯¥è½¯ä»¶é€šè¿‡è®¢é˜…äº‘å¹³å°ç›¸åº”çš„æ•°æ®ä¸»é¢˜ï¼Œå°†æ¥æ”¶åˆ°çš„å®æ—¶æ•°æ®ç›´è§‚å½¢å¼è¿›è¡Œå¯è§†åŒ–å±•ç¤ºï¼Œå¹¶èƒ½æ¥æ”¶å’Œæ˜¾ç¤ºæŠ¥è­¦é€šçŸ¥ï¼Œä»è€Œè®©ç®¡ç†è€…å¯ä»¥è¿œç¨‹ã€æ¸…æ™°åœ°æŒæ¡èœ‚ç®±çš„å…¨éƒ¨åŠ¨æ€ï¼Œå®ç°ç§‘å­¦å†³ç­–ã€‚</p>
<h3 data-id="heading-13">1.3 ç³»ç»ŸåŠŸèƒ½æ€»ç»“</h3>











































































<table><thead><tr><th>åŠŸèƒ½ç±»åˆ«</th><th>å…·ä½“åŠŸèƒ½æè¿°</th><th>å®ç°æ–¹å¼/æ¶‰åŠæ¨¡å—</th></tr></thead><tbody><tr><td><strong>æ•°æ®é‡‡é›†</strong></td><td>é‡‡é›†èœ‚ç®±å†…éƒ¨çš„å®æ—¶æ¸©åº¦å’Œæ¹¿åº¦ã€‚</td><td>STM32F103C8T6 + å†…éƒ¨DHT11ä¼ æ„Ÿå™¨</td></tr><tr><td/><td>é‡‡é›†èœ‚ç®±å¤–éƒ¨ç¯å¢ƒçš„å®æ—¶æ¸©åº¦å’Œæ¹¿åº¦ã€‚</td><td>STM32F103C8T6 + å¤–éƒ¨DHT11ä¼ æ„Ÿå™¨</td></tr><tr><td/><td>é«˜ç²¾åº¦é‡‡é›†èœ‚ç®±é‡é‡ï¼Œåæ˜ èœ‚èœœé‡ä¸èœ‚ç¾¤è§„æ¨¡ã€‚</td><td>10kgç§°é‡ä¼ æ„Ÿå™¨ + HX711æ”¾å¤§å™¨ + STM32</td></tr><tr><td/><td>é‡‡é›†èœ‚ç®±å†…éƒ¨å£°éŸ³ï¼Œç”¨äºåˆ†æèœ‚ç¾¤çŠ¶æ€ã€‚</td><td>MAX9814éº¦å…‹é£æ¨¡å— + STM32</td></tr><tr><td/><td>é‡‡é›†èœ‚ç®±å…¥å£éœ‡åŠ¨ï¼Œåˆ¤æ–­å¤–éƒ¨å¹²æ‰°æˆ–æ”»å‡»ã€‚</td><td>SW420éœ‡åŠ¨æ¨¡å— + STM32</td></tr><tr><td/><td>é‡‡é›†å¤–éƒ¨ç¯å¢ƒå…‰ç…§å¼ºåº¦ï¼Œè¾…åŠ©åˆ¤æ–­èœ‚ç¾¤æ´»åŠ¨å‘¨æœŸã€‚</td><td>BH1750å…‰ç…§ä¼ æ„Ÿå™¨ + STM32</td></tr><tr><td><strong>æ•°æ®ä¼ è¾“</strong></td><td>æ”¯æŒ4Gæˆ–Wi-Fiç½‘ç»œå°†æ•°æ®ä¸Šä¼ è‡³äº‘æœåŠ¡å™¨ã€‚</td><td>Air780E (4G LTE) æˆ– ESP8266 (Wi-Fi)</td></tr><tr><td/><td>é€šè¿‡MQTTåè®®å®ç°æ•°æ®ä¸ŠæŠ¥å’ŒæŒ‡ä»¤ä¸‹å‘ã€‚</td><td>MQTTåè®®æ ˆ (åœ¨é€šä¿¡æ¨¡å—å’ŒSTM32ä¸Šå®ç°)</td></tr><tr><td><strong>æœ¬åœ°äº¤äº’</strong></td><td>åœ¨èœ‚ç®±æœ¬åœ°å®æ—¶æ˜¾ç¤ºå„é¡¹å…³é”®æ•°æ®ã€‚</td><td>OLED 0.96å¯¸I2Cæ˜¾ç¤ºå±</td></tr><tr><td><strong>è¿œç¨‹ç›‘æ§</strong></td><td>åœ¨ä¸Šä½æœºè½¯ä»¶ä¸Šå®æ—¶å¯è§†åŒ–æ˜¾ç¤ºèœ‚ç®±æ•°æ®ã€‚</td><td>Qt (C++) å¼€å‘çš„ä¸Šä½æœºè½¯ä»¶</td></tr><tr><td><strong>æ™ºèƒ½æŠ¥è­¦</strong></td><td>æ”¯æŒæœåŠ¡å™¨ç«¯é…ç½®æŠ¥è­¦é˜ˆå€¼ï¼ˆæ¸©åº¦ã€æ¹¿åº¦ã€é‡é‡ã€å£°éŸ³ï¼‰ã€‚</td><td>åä¸ºäº‘IoTDAå¹³å°è§„åˆ™å¼•æ“</td></tr><tr><td/><td>å®ç°èœ‚èœœè¿‡è½½æˆ–å¼‚å¸¸å‡é‡æ—¶çš„æŠ¥è­¦ã€‚</td><td>åŸºäºé‡é‡æ•°æ®å’Œäº‘ç«¯é˜ˆå€¼é…ç½®</td></tr><tr><td/><td>å®ç°èœ‚ç®±å¼‚å¸¸éœ‡åŠ¨æ—¶çš„æŠ¥è­¦ã€‚</td><td>åŸºäºéœ‡åŠ¨æ•°æ®å’Œäº‘ç«¯é˜ˆå€¼é…ç½®</td></tr></tbody></table>
<h3 data-id="heading-14">1.4 å¼€å‘å·¥å…·çš„é€‰æ‹©</h3>
<h4 data-id="heading-15">ã€1ã€‘è®¾å¤‡ç«¯å¼€å‘</h4>
<p>ç¡¬ä»¶è®¾å¤‡ç«¯çš„å¼€å‘ä¸»è¦ä¾èµ–äºCè¯­è¨€ï¼Œåˆ©ç”¨è¯¥è¯­è¨€ç›´æ¥æ“ä½œç¡¬ä»¶å¯„å­˜å™¨ï¼Œç¡®ä¿ç³»ç»Ÿè¿è¡Œçš„é«˜æ•ˆæ€§å’Œä½å»¶è¿Ÿã€‚Cè¯­è¨€åœ¨åµŒå…¥å¼å¼€å‘ä¸­å…·æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œå®ƒèƒ½å¤Ÿç›´æ¥è®¿é—®ç¡¬ä»¶ï¼Œæ»¡è¶³å¯¹èµ„æºæ¶ˆè€—å’Œå“åº”é€Ÿåº¦çš„ä¸¥æ ¼è¦æ±‚ã€‚ä¸ºäº†ç¼–å†™é«˜æ•ˆã€ç¨³å®šçš„ä»£ç ï¼Œå¼€å‘å·¥å…·é€‰æ‹©äº†<strong>Keil uVision 5</strong>ä½œä¸ºä¸»è¦çš„å¼€å‘ç¯å¢ƒã€‚Keilæ˜¯ä¸€ä¸ªä¸“ä¸šçš„åµŒå…¥å¼å¼€å‘å·¥å…·ï¼Œå¹¿æ³›åº”ç”¨äºåŸºäºARMæ¶æ„çš„å¾®æ§åˆ¶å™¨ï¼ˆå¦‚STM32ï¼‰å¼€å‘ã€‚Keilæä¾›äº†å®Œå–„çš„è°ƒè¯•ã€ç¼–è¯‘å’Œä»¿çœŸæ”¯æŒï¼Œèƒ½å¤Ÿå¸®åŠ©åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é«˜æ•ˆåœ°è¿›è¡Œè°ƒè¯•ã€å•æ­¥æ‰§è¡Œä»¥åŠæ–­ç‚¹è®¾ç½®ï¼Œç¡®ä¿å¼€å‘çš„ç¨³å®šæ€§å’Œé«˜æ•ˆæ€§ã€‚
STM32F103RCT6æ˜¯é¡¹ç›®ä¸­ä½¿ç”¨çš„ä¸»æ§èŠ¯ç‰‡ï¼Œå®ƒåŸºäºARM Cortex-M3æ¶æ„ï¼Œæ‹¥æœ‰å¼ºå¤§çš„è®¡ç®—èƒ½åŠ›å’Œä¸°å¯Œçš„å¤–è®¾æ¥å£ã€‚åœ¨ç¡¬ä»¶ç¼–ç¨‹ä¸­ï¼Œå¯„å­˜å™¨çº§ç¼–ç¨‹æ˜¯å¸¸ç”¨çš„æ–¹å¼ï¼Œè¿™è¦æ±‚å¼€å‘è€…å¯¹èŠ¯ç‰‡çš„ç¡¬ä»¶å¯„å­˜å™¨æœ‰æ·±å…¥çš„ç†è§£ã€‚åœ¨Keilç¯å¢ƒä¸­ï¼Œé€šè¿‡STM32çš„å¯„å­˜å™¨ç›´æ¥æ§åˆ¶GPIOã€ADCã€I2Cã€SPIç­‰ç¡¬ä»¶æ¥å£ï¼Œä»¥æ»¡è¶³å„ä¸ªç¡¬ä»¶æ¨¡å—ï¼ˆå¦‚ä¼ æ„Ÿå™¨ã€æ‰§è¡Œå™¨ã€æ˜¾ç¤ºå±ç­‰ï¼‰ä¸ä¸»æ§èŠ¯ç‰‡çš„äº¤äº’ã€‚ä½¿ç”¨å¯„å­˜å™¨ç¼–ç¨‹èƒ½å¤Ÿæä¾›æ›´é«˜æ•ˆã€ç²¾ç¡®çš„æ§åˆ¶ï¼Œé¿å…äº†å¤–éƒ¨åº“çš„å¼€é”€ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ·±å…¥è°ƒæ§ç¡¬ä»¶ç‰¹æ€§ï¼Œæå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p>
<h4 data-id="heading-16">ã€2ã€‘ä¸Šä½æœºå¼€å‘</h4>
<p>æœ¬é¡¹ç›®çš„ä¸Šä½æœºå¼€å‘åŸºäº<strong>Qt 5</strong>æ¡†æ¶ï¼Œä½¿ç”¨**C++**ä½œä¸ºä¸»è¦ç¼–ç¨‹è¯­è¨€ã€‚Qtæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œå¹¿æ³›ç”¨äºå¼€å‘GUIåº”ç”¨ç¨‹åºã€‚Qtæä¾›äº†ä¸°å¯Œçš„GUIç»„ä»¶å’Œå·¥å…·ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°å®ç°å›¾å½¢ç•Œé¢çš„è®¾è®¡ä¸å¼€å‘ã€‚C++åˆ™ä½œä¸ºQtçš„åº•å±‚è¯­è¨€ï¼Œå…·æœ‰é«˜æ•ˆçš„æ€§èƒ½å’Œè‰¯å¥½çš„æ§åˆ¶åŠ›ï¼Œéå¸¸é€‚åˆç”¨äºå¤„ç†è®¾å¤‡ä¸ç³»ç»Ÿä¹‹é—´çš„æ•°æ®äº¤äº’ã€é€šä¿¡åè®®çš„å®ç°å’Œå¤æ‚çš„è®¡ç®—ä»»åŠ¡ã€‚åœ¨é¡¹ç›®ä¸­ï¼ŒQtè¢«ç”¨äºå¼€å‘Windowså¹³å°çš„æ¡Œé¢åº”ç”¨ç¨‹åºä»¥åŠAndroidå¹³å°çš„æ‰‹æœºAPPã€‚Qtæ¡†æ¶çš„è·¨å¹³å°ç‰¹æ€§ä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨åŒä¸€å¥—ä»£ç åœ¨ä¸åŒæ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œæ„å»ºå’Œéƒ¨ç½²ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ï¼Œä¸Šä½æœºçš„å¼€å‘é‡‡ç”¨äº†<strong>Qt Creator</strong>ä½œä¸ºä¸»è¦çš„é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ã€‚Qt Creatoræ˜¯ä¸€æ¬¾ç”±Qtå®˜æ–¹æä¾›çš„å¼€å‘å·¥å…·ï¼Œä¸“ä¸ºQtåº”ç”¨ç¨‹åºå¼€å‘è®¾è®¡ï¼Œæ”¯æŒC++ã€QMLå’ŒJavaScriptç­‰è¯­è¨€ã€‚Qt Creatoræä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¦‚ä»£ç ç¼–è¾‘ã€è°ƒè¯•ã€æ„å»ºã€ç‰ˆæœ¬æ§åˆ¶é›†æˆç­‰ï¼Œèƒ½å¤Ÿæ˜¾è‘—æå‡å¼€å‘è€…çš„ç”Ÿäº§åŠ›ã€‚åœ¨æœ¬é¡¹ç›®ä¸­ï¼ŒQt Creatorä¸ºå¼€å‘è€…æä¾›äº†è‡ªåŠ¨åŒ–æ„å»ºã€ç•Œé¢è®¾è®¡å·¥å…·ï¼ˆå¦‚Qt Designerï¼‰å’Œè°ƒè¯•å·¥å…·ï¼ˆå¦‚QDebugå’ŒQMLè°ƒè¯•å·¥å…·ï¼‰ï¼Œä½¿å¾—å¼€å‘è¿‡ç¨‹æ›´åŠ é«˜æ•ˆå’Œæµç•…ã€‚
ä¸Šä½æœºä¸ç¡¬ä»¶è®¾å¤‡ç«¯çš„é€šä¿¡é‡‡ç”¨äº†åŸºäºTCP/IPåè®®çš„æ•°æ®ä¼ è¾“æ–¹å¼ã€‚ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼ŒQtæä¾›äº†ä¸°å¯Œçš„ç½‘ç»œç¼–ç¨‹æ”¯æŒï¼Œå°¤å…¶æ˜¯<strong>QTcpSocket</strong>å’Œ<strong>QTcpServer</strong>ç±»ï¼Œä½¿å¾—ä¸Šä½æœºèƒ½å¤Ÿè½»æ¾åœ°ä¸ç¡¬ä»¶è®¾å¤‡å»ºç«‹TCPè¿æ¥ï¼Œè¿›è¡Œæ•°æ®æ”¶å‘ã€‚ä¸Šä½æœºé€šè¿‡WIFIè¿æ¥ESP8266-WIFIæ¨¡å—ï¼ŒESP8266æ¨¡å—åˆ›å»ºTCPæœåŠ¡å™¨ï¼Œä¸Šä½æœºåº”ç”¨åˆ™ä½œä¸ºå®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¿›è¡Œå®æ—¶çš„æ•°æ®ä¼ è¾“ä¸æ§åˆ¶å‘½ä»¤çš„ä¸‹å‘ã€‚
ä¸ºäº†æ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ï¼Œæœ¬é¡¹ç›®éœ€è¦æ”¯æŒWindowså¹³å°çš„æ¡Œé¢åº”ç”¨å’ŒAndroidå¹³å°çš„ç§»åŠ¨APPã€‚Qtçš„è·¨å¹³å°ç‰¹æ€§ä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸€ä¸ªä»£ç åº“ä¸‹å®Œæˆå¤šå¹³å°åº”ç”¨çš„å¼€å‘å’Œç§»æ¤ã€‚å¼€å‘è€…ä»…éœ€è¦ç¼–å†™ä¸€æ¬¡åº”ç”¨é€»è¾‘å’Œç”¨æˆ·ç•Œé¢ï¼Œå°±å¯ä»¥é€šè¿‡Qtçš„è·¨å¹³å°æ„å»ºå·¥å…·ç”ŸæˆWindowså’ŒAndroidä¸¤ä¸ªå¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚æ­¤å¤–ï¼ŒQtæä¾›äº†ä¸°å¯Œçš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒï¼Œå¸®åŠ©å¼€å‘è€…è§£å†³å¹³å°å·®å¼‚å’Œå…¼å®¹æ€§é—®é¢˜ï¼Œç¡®ä¿åº”ç”¨åœ¨ä¸åŒå¹³å°ä¸Šéƒ½èƒ½ç¨³å®šè¿è¡Œã€‚</p>
<p>æ€»ä½“è€Œè¨€ï¼Œä¸Šä½æœºå¼€å‘ç¯å¢ƒé‡‡ç”¨äº†Qt 5æ¡†æ¶å’ŒC++è¯­è¨€ï¼Œç»“åˆQt Creatoré›†æˆå¼€å‘ç¯å¢ƒï¼Œæä¾›äº†ä¸€ä¸ªé«˜æ•ˆã€ç¨³å®šã€è·¨å¹³å°çš„å¼€å‘å·¥å…·é“¾ã€‚é€šè¿‡Qtå¼ºå¤§çš„GUIè®¾è®¡ã€ç½‘ç»œé€šä¿¡ã€å¤šçº¿ç¨‹æ”¯æŒä»¥åŠæ•°æ®åº“ç®¡ç†åŠŸèƒ½ï¼Œå¼€å‘è€…èƒ½å¤Ÿè½»æ¾å®ç°ä¸ç¡¬ä»¶è®¾å¤‡çš„äº¤äº’ã€æ§åˆ¶è®¾å¤‡ã€å¤„ç†ä¼ æ„Ÿå™¨æ•°æ®ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›ç›´è§‚ã€æµç•…çš„æ“ä½œä½“éªŒã€‚</p>
<h3 data-id="heading-17">1.5 æ¨¡å—çš„æŠ€æœ¯è¯¦æƒ…ä»‹ç»</h3>
<p>(1) <strong>ä¸»æ§æ¨¡å—ï¼šSTM32F103C8T6 æ ¸å¿ƒæ¿</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£åè°ƒå„ä¼ æ„Ÿå™¨çš„æ•°æ®é‡‡é›†ã€ä¿¡å·å¤„ç†ã€é€»è¾‘åˆ¤æ–­ä»¥åŠæ§åˆ¶é€šä¿¡æ¨¡å—ä¸äº‘ç«¯äº¤äº’ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåŸºäº ARM Cortex-M3 å†…æ ¸ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„å¤–è®¾èµ„æºï¼ˆå¦‚ ADCã€I2Cã€USART ç­‰ï¼‰ï¼Œå¤„ç†é€Ÿåº¦å¿«ï¼ŒåŠŸè€—è¾ƒä½ï¼Œä¸”å¼€å‘ç”Ÿæ€æˆç†Ÿï¼Œæ€§ä»·æ¯”é«˜ï¼Œå®Œå…¨æ»¡è¶³å¤šä¼ æ„Ÿå™¨å¹¶è¡Œå·¥ä½œçš„éœ€æ±‚ã€‚</li>
</ul>
<p>(2) <strong>æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼šDHT11</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šåˆ†åˆ«ç”¨äºé‡‡é›†èœ‚ç®±å†…éƒ¨å’Œå¤–éƒ¨ç¯å¢ƒçš„æ¸©åº¦ä¸æ¹¿åº¦æ•°æ®ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šé‡‡ç”¨å•æ€»çº¿æ•°å­—é€šä¿¡ï¼Œé›†æˆåº¦é«˜ï¼Œè‡ªå¸¦æ ¡å‡†åŠŸèƒ½ã€‚è™½ç„¶ç²¾åº¦ç›¸å¯¹ä¸­ç­‰ï¼Œä½†ç¨³å®šæ€§å¥½ã€å“åº”é€Ÿåº¦å¿«ä¸”æˆæœ¬ä½å»‰ï¼Œéå¸¸é€‚åˆä¸€èˆ¬çš„ç¯å¢ƒæ¸©æ¹¿åº¦ç›‘æµ‹åœºæ™¯ã€‚</li>
</ul>
<p>(3) <strong>é‡é‡æ£€æµ‹æ¨¡å—ï¼š10kg ç§°é‡ä¼ æ„Ÿå™¨ + HX711 æ”¾å¤§å™¨</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šå®æ—¶æµ‹é‡èœ‚ç®±çš„æ€»é‡é‡ï¼Œé€šè¿‡é‡é‡å˜åŒ–ç›‘æµ‹èœ‚èœœäº§é‡ã€èœ‚ç¾¤æ•°é‡å˜åŒ–åŠå¼‚å¸¸å¤±é‡æƒ…å†µã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šHX711 æ˜¯ä¸€æ¬¾ä¸“ä¸ºé«˜ç²¾åº¦ç”µå­ç§¤è®¾è®¡çš„ 24 ä½ A/D è½¬æ¢èŠ¯ç‰‡ï¼Œå…·æœ‰æé«˜çš„é›†æˆåº¦å’ŒæŠ—å¹²æ‰°èƒ½åŠ›ã€‚é…åˆå…¨æ¡¥å¼ç§°é‡ä¼ æ„Ÿå™¨ï¼Œèƒ½å®ç°å¾®å°é‡é‡å˜åŒ–çš„ç²¾å‡†æ•æ‰ã€‚</li>
</ul>
<p>(4) <strong>å£°éŸ³é‡‡é›†æ¨¡å—ï¼šMAX9814 è‡ªåŠ¨å¢ç›Šéº¦å…‹é£</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šé‡‡é›†èœ‚ç®±å†…éƒ¨çš„éŸ³é¢‘ä¿¡å·ï¼Œç”¨äºåç»­åˆ†æèœ‚ç¾¤çš„é¸£å«é¢‘ç‡å’Œå¼ºåº¦ï¼Œä»¥åˆ¤æ–­èœ‚ç¾¤æ˜¯å¦å¤„äºèºåŠ¨æˆ–åˆ†èœ‚çŠ¶æ€ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå†…ç½®è‡ªåŠ¨å¢ç›Šæ§åˆ¶ï¼ˆAGCï¼‰åŠŸèƒ½ï¼Œèƒ½å¤Ÿåœ¨å‘¨å›´ç¯å¢ƒå£°éŸ³è¿‡å¤§æ—¶è‡ªåŠ¨é™ä½å¢ç›Šï¼Œå£°éŸ³è¿‡å°æ—¶è‡ªåŠ¨æé«˜å¢ç›Šï¼Œä»è€Œä¿è¯é‡‡é›†åˆ°çš„èœ‚ç¾¤å£°éŸ³ä¿¡å·å¹…åº¦ç¨³å®šï¼Œå™ªå£°æ›´ä½ã€‚</li>
</ul>
<p>(5) <strong>éœ‡åŠ¨ä¼ æ„Ÿå™¨ï¼šSW420 éœ‡åŠ¨æ£€æµ‹æ¨¡å—</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç›‘æµ‹èœ‚ç®±å—åˆ°çš„ç‰©ç†éœ‡åŠ¨ï¼Œç”¨äºæ£€æµ‹æ˜¯å¦æœ‰å¤©æ•Œå…¥ä¾µï¼ˆå¦‚ç†Šã€ç¾ï¼‰æˆ–äººä¸ºç ´åç­‰å¤–éƒ¨æ”»å‡»è¡Œä¸ºã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šåŸºäºå¸¸é—­å‹éœ‡åŠ¨ä¼ æ„Ÿå™¨è®¾è®¡ï¼Œçµæ•åº¦å¯é€šè¿‡ç”µä½å™¨è°ƒèŠ‚ã€‚è¾“å‡ºä¸ºæ•°å­—å¼€å…³é‡ï¼ˆ0æˆ–1ï¼‰ï¼Œèƒ½å¤Ÿç›´æ¥è§¦å‘å•ç‰‡æœºä¸­æ–­ï¼Œå“åº”è¿…é€Ÿï¼Œè¯¯æŠ¥ç‡é€šè¿‡è°ƒèŠ‚å¯æ§ã€‚</li>
</ul>
<p>(6) <strong>å…‰ç…§é‡‡é›†æ¨¡å—ï¼šBH1750</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šæµ‹é‡å¤–ç•Œç¯å¢ƒçš„å…‰ç…§å¼ºåº¦ï¼ˆLuxï¼‰ï¼Œè¾…åŠ©ç³»ç»Ÿåˆ¤æ–­å½“å‰çš„æ˜¼å¤œçŠ¶æ€åŠå¤©æ°”æƒ…å†µï¼Œåˆ†æèœ‚ç¾¤å‡ºå‹¤ä¸å…‰ç…§çš„å…³ç³»ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šé‡‡ç”¨ I2C æ€»çº¿æ¥å£ï¼Œèƒ½å¤Ÿç›´æ¥è¾“å‡ºæ•°å­—å…‰ç…§å€¼ï¼Œæ— éœ€å¤æ‚çš„è®¡ç®—å’Œæ ¡å‡†ã€‚å…¶å…‰è°±å“åº”ç‰¹æ€§æ¥è¿‘äººçœ¼è§†è§‰ï¼Œæµ‹é‡èŒƒå›´å®½ï¼Œå—çº¢å¤–çº¿å½±å“å°ã€‚</li>
</ul>
<p>(7) <strong>é€šä¿¡æ¨¡å—ï¼šAir780E (4G) æˆ– ESP8266 (Wi-Fi)</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šè´Ÿè´£å°†å•ç‰‡æœºå¤„ç†åçš„æ•°æ®æ‰“åŒ…ï¼Œé€šè¿‡ MQTT åè®®å‘é€è‡³åä¸ºäº‘ IoTDA å¹³å°ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼š
<ul>
<li><strong>Air780E</strong>ï¼šæ”¯æŒ LTE Cat.1 ç½‘ç»œï¼Œå¹¿åŸŸç½‘è¦†ç›–ï¼Œä¼ è¾“é€Ÿç‡é€‚ä¸­ï¼Œé€‚åˆæ²¡æœ‰ Wi-Fi çš„é‡å¤–åè¿œèœ‚åœºéƒ¨ç½²ã€‚</li>
<li><strong>ESP8266</strong>ï¼šé›†æˆåº¦é«˜çš„ Wi-Fi æ¨¡å—ï¼Œæˆæœ¬æä½ï¼Œé€‚åˆå®¶åº­å†œåœºæˆ–æœ‰æ— çº¿ç½‘ç»œè¦†ç›–çš„åŒºåŸŸï¼Œå¼€å‘ä¾¿æ·ã€‚</li>
</ul>
</li>
</ul>
<p>(8) <strong>æ˜¾ç¤ºæ¨¡å—ï¼šOLED 0.96 I2C æ˜¾ç¤ºå±</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šä½œä¸ºæœ¬åœ°äººæœºäº¤äº’ç•Œé¢ï¼Œå®æ—¶è½®æ’­æ˜¾ç¤ºæ¸©æ¹¿åº¦ã€é‡é‡ã€ç³»ç»ŸçŠ¶æ€ç­‰å…³é”®ä¿¡æ¯ï¼Œæ–¹ä¾¿ç°åœºå·¡æŸ¥ã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šè‡ªå‘å…‰æŠ€æœ¯ï¼ˆæ— éœ€èƒŒå…‰ï¼‰ï¼Œå¯¹æ¯”åº¦é«˜ï¼Œå¯è§†è§’å¹¿ï¼ŒåŠŸè€—æä½ã€‚ä½¿ç”¨ I2C æ¥å£ï¼Œä»…éœ€å ç”¨å•ç‰‡æœºä¸¤ä¸ª I/O å£ï¼ŒèŠ‚çœèµ„æºã€‚</li>
</ul>
<p>(9) <strong>ç”µæºç³»ç»Ÿï¼šAMS1117 ç¨³å‹ä¸é”‚ç”µæ± ä¾›ç”µ</strong></p>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šä¸ºç³»ç»Ÿå„æ¨¡å—æä¾›ç¨³å®šã€çº¯å‡€çš„ç”µå‹ï¼ˆ3.3V å’Œ 5Vï¼‰ï¼Œå¹¶ä¿éšœæˆ·å¤–æŒç»­è¿è¡Œã€‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šAMS1117 ç³»åˆ—å…·æœ‰ä½å‹å·®ç‰¹æ€§ï¼Œè¾“å‡ºç”µå‹ç¨³å®šã€‚é…åˆ 18650 é”‚ç”µæ± å’Œå¤ªé˜³èƒ½å……ç”µæ¿ï¼Œæ„æˆäº†å¯å¾ªç¯çš„ç»¿è‰²ä¾›ç”µç³»ç»Ÿï¼Œè§£å†³äº†æˆ·å¤–è®¾å¤‡å–ç”µéš¾çš„é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-18">äºŒã€éƒ¨ç½²åä¸ºäº‘ç‰©è”ç½‘å¹³å°</h2>
<p>åä¸ºäº‘å®˜ç½‘: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.huaweicloud.com%2F" target="_blank" title="https://www.huaweicloud.com/" ref="nofollow noopener noreferrer">www.huaweicloud.com/</a></p>
<p>æ‰“å¼€å®˜ç½‘ï¼Œæœç´¢ç‰©è”ç½‘ï¼Œå°±èƒ½å¿«é€Ÿæ‰¾åˆ° <code>è®¾å¤‡æ¥å…¥IoTDA</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1382e8b60ae44a93b28a934e32066648~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=0JNKEhw%2FWioH%2FNGz5sCtbosLkj4%3D" alt="image-20221204193824815" loading="lazy"/></p>
<h3 data-id="heading-19">2.1 ç‰©è”ç½‘å¹³å°ä»‹ç»</h3>
<p>åä¸ºäº‘ç‰©è”ç½‘å¹³å°ï¼ˆIoT è®¾å¤‡æ¥å…¥äº‘æœåŠ¡ï¼‰æä¾›æµ·é‡è®¾å¤‡çš„æ¥å…¥å’Œç®¡ç†èƒ½åŠ›ï¼Œå°†ç‰©ç†è®¾å¤‡è”æ¥åˆ°äº‘ï¼Œæ”¯æ’‘è®¾å¤‡æ•°æ®é‡‡é›†ä¸Šäº‘å’Œäº‘ç«¯ä¸‹å‘å‘½ä»¤ç»™è®¾å¤‡è¿›è¡Œè¿œç¨‹æ§åˆ¶ï¼Œé…åˆåä¸ºäº‘å…¶ä»–äº§å“ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ„ç­‘ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä½¿ç”¨ç‰©è”ç½‘å¹³å°æ„å»ºä¸€ä¸ªå®Œæ•´çš„ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆä¸»è¦åŒ…æ‹¬3éƒ¨åˆ†ï¼šç‰©è”ç½‘å¹³å°ã€ä¸šåŠ¡åº”ç”¨å’Œè®¾å¤‡ã€‚</p>
<p>ç‰©è”ç½‘å¹³å°ä½œä¸ºè¿æ¥ä¸šåŠ¡åº”ç”¨å’Œè®¾å¤‡çš„ä¸­é—´å±‚ï¼Œå±è”½äº†å„ç§å¤æ‚çš„è®¾å¤‡æ¥å£ï¼Œå®ç°è®¾å¤‡çš„å¿«é€Ÿæ¥å…¥ï¼›åŒæ—¶æä¾›å¼ºå¤§çš„å¼€æ”¾èƒ½åŠ›ï¼Œæ”¯æ’‘è¡Œä¸šç”¨æˆ·æ„å»ºå„ç§ç‰©è”ç½‘è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è®¾å¤‡å¯ä»¥é€šè¿‡å›ºç½‘ã€2G/3G/4G/5Gã€NB-IoTã€Wifiç­‰å¤šç§ç½‘ç»œæ¥å…¥ç‰©è”ç½‘å¹³å°ï¼Œå¹¶ä½¿ç”¨LWM2M/CoAPã€MQTTã€HTTPSåè®®å°†ä¸šåŠ¡æ•°æ®ä¸ŠæŠ¥åˆ°å¹³å°ï¼Œå¹³å°ä¹Ÿå¯ä»¥å°†æ§åˆ¶å‘½ä»¤ä¸‹å‘ç»™è®¾å¤‡ã€‚</p>
<p>ä¸šåŠ¡åº”ç”¨é€šè¿‡è°ƒç”¨ç‰©è”ç½‘å¹³å°æä¾›çš„APIï¼Œå®ç°è®¾å¤‡æ•°æ®é‡‡é›†ã€å‘½ä»¤ä¸‹å‘ã€è®¾å¤‡ç®¡ç†ç­‰ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9b29ee3c1aa4f389bda6f0d5e11eee7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=HN%2FGYH3MukYbuBMwGQ30b631QGg%3D" alt="img" loading="lazy"/></p>
<h3 data-id="heading-20">2.2 å¼€é€šç‰©è”ç½‘æœåŠ¡</h3>
<p>åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.huaweicloud.com%2Fproduct%2Fiothub.html" target="_blank" title="https://www.huaweicloud.com/product/iothub.html" ref="nofollow noopener noreferrer">www.huaweicloud.com/product/iotâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a0353113269441c8a9eac4f1c881cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=1PWC%2BskCqXtD8PE85mzqiVDttuw%3D" alt="image-20241028135834377" loading="lazy"/></p>
<p><strong>å¼€é€šå…è´¹å•å…ƒã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9940ca991e4fc7b3f7066b8075e033~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=6Fg06SAnz5RGMgy63reXkfl5v0M%3D" alt="image-20241028135935457" loading="lazy"/></p>
<p>ç‚¹å‡»<code>ç«‹å³åˆ›å»º</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da9652c3bd454462ba9cd2d62c09e970~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=JGOEnx%2FTfFHm8q5fKBHbLJ9%2By4k%3D" alt="image-20240117134653452" loading="lazy"/></p>
<p>æ­£åœ¨åˆ›å»ºæ ‡å‡†ç‰ˆå®ä¾‹ï¼Œéœ€è¦ç­‰å¾…ç‰‡åˆ»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8de114dfd8242d4a17631097388e3db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=sJ0ihw24c%2FttOPqYhxu08upqqCk%3D" alt="image-20241028140048811" loading="lazy"/></p>
<p><strong>åˆ›å»ºå®Œæˆä¹‹åï¼Œç‚¹å‡»è¯¦æƒ…ã€‚ å¯ä»¥çœ‹åˆ°æ ‡å‡†ç‰ˆå®ä¾‹çš„è®¾å¤‡æ¥å…¥ç«¯å£å’Œåœ°å€ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fea83cd4cb0c412f905c6929c759a091~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=04jDLdQNeXWAyJlVB1oVfWyqa7g%3D" alt="image-20241028140129102" loading="lazy"/></p>
<p>ä¸‹é¢æ¡†èµ·æ¥çš„å°±æ˜¯<code>ç«¯å£å·</code>å’Œ<code>åŸŸå</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a06706afa0b34adbbcf6a28fbbf053cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=j1n4iV1o3POrbKKtKaPq0kFTGcw%3D" alt="image-20241028140229696" loading="lazy"/></p>
<p>ç‚¹å‡»å®ä¾‹åç§°ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰<code>å…è´¹å•å…ƒ</code>çš„é…ç½®æƒ…å†µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02a4e1631cee476fa971b280a5f8b279~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=%2BDD5ugKJ26JBpH1HjUD1V%2FMHqX4%3D" alt="image-20241028140331523" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f0d332c26b34e2cbc865896709b6a89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=0pfNg6VzQbmd4zIKYZJIjegjQMw%3D" alt="image-20241028140428663" loading="lazy"/></p>
<p>å¼€é€šä¹‹åï¼Œç‚¹å‡»<code>æ¥å…¥ä¿¡æ¯</code>ï¼Œä¹Ÿèƒ½æŸ¥çœ‹æ¥å…¥ä¿¡æ¯ã€‚ æˆ‘ä»¬å½“å‰è®¾å¤‡å‡†å¤‡é‡‡ç”¨MQTTåè®®æ¥å…¥åä¸ºäº‘å¹³å°ï¼Œè¿™é‡Œå¯ä»¥çœ‹åˆ°MQTTåè®®çš„åœ°å€å’Œç«¯å£å·ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bb6d845ddba44b39a6c23b03447be37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=P4mIhdjF6ikr4OEDhbT%2F8RhlX4U%3D" alt="image-20241028140511105" loading="lazy"/></p>
<p><strong>æ€»ç»“:</strong></p>
<pre><code class="hljs language-scss" lang="scss">ç«¯å£å·ï¼š   MQTT (<span class="hljs-number">1883</span>)| MQTTS (<span class="hljs-number">8883</span>)    
æ¥å…¥åœ°å€ï¼š dab1a1f2c6<span class="hljs-selector-class">.st1</span><span class="hljs-selector-class">.iotda-device</span><span class="hljs-selector-class">.cn-north-4</span><span class="hljs-selector-class">.myhuaweicloud</span><span class="hljs-selector-class">.com</span>
</code></pre>
<p><strong>æ ¹æ®åŸŸååœ°å€å¾—åˆ°IPåœ°å€ä¿¡æ¯:</strong></p>
<p>æ‰“å¼€Windowsç”µè„‘çš„å‘½ä»¤è¡Œæ§åˆ¶å°ç»ˆç«¯ï¼Œä½¿ç”¨<code>ping</code> å‘½ä»¤ã€‚<code>ping</code>ä¸€ä¸‹å³å¯ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Microsoft Windows <span class="hljs-section">[ç‰ˆæœ¬ 10.0.19045.5011]</span>
(c) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

C:\Users\Lenovo&gt;ping dab1a1f2c6.st1.iotda-device.cn-north-4.myhuaweicloud.com

æ­£åœ¨ Ping dab1a1f2c6.st1.iotda-device.cn-north-4.myhuaweicloud.com <span class="hljs-section">[117.78.5.125]</span> å…·æœ‰ 32 å­—èŠ‚çš„æ•°æ®:
æ¥è‡ª 117.78.5.125 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=37ms <span class="hljs-attr">TTL</span>=<span class="hljs-number">44</span>
æ¥è‡ª 117.78.5.125 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=37ms <span class="hljs-attr">TTL</span>=<span class="hljs-number">44</span>
æ¥è‡ª 117.78.5.125 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=37ms <span class="hljs-attr">TTL</span>=<span class="hljs-number">44</span>
æ¥è‡ª 117.78.5.125 çš„å›å¤: å­—èŠ‚=32 æ—¶é—´=37ms <span class="hljs-attr">TTL</span>=<span class="hljs-number">44</span>

117.78.5.125 çš„ Ping ç»Ÿè®¡ä¿¡æ¯:
    æ•°æ®åŒ…: å·²å‘é€ = 4ï¼Œå·²æ¥æ”¶ = 4ï¼Œä¸¢å¤± = 0 (0% ä¸¢å¤±)ï¼Œ
å¾€è¿”è¡Œç¨‹çš„ä¼°è®¡æ—¶é—´(ä»¥æ¯«ç§’ä¸ºå•ä½):
    æœ€çŸ­ = 37msï¼Œæœ€é•¿ = 37msï¼Œå¹³å‡ = 37ms

C:\Users\Lenovo&gt;

</code></pre>
<p>MQTTåè®®æ¥å…¥ç«¯å£å·æœ‰ä¸¤ä¸ªï¼Œ1883æ˜¯éåŠ å¯†ç«¯å£ï¼Œ8883æ˜¯è¯ä¹¦åŠ å¯†ç«¯å£ï¼Œ<code>å•ç‰‡æœºæ— æ³•åŠ è½½è¯ä¹¦ï¼Œæ‰€ä»¥ä½¿ç”¨1883ç«¯å£åˆé€‚</code>ã€‚</p>
<h3 data-id="heading-21">2.3 åˆ›å»ºäº§å“</h3>
<p>é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.huaweicloud.com%2Fiotdm%2F%3Fregion%3Dcn-north-4%23%2Fdm-dev%2Fall-product%3FinstanceId%3D03c5c68c-e588-458c-90c3-9e4c640be7af" target="_blank" title="https://console.huaweicloud.com/iotdm/?region=cn-north-4#/dm-dev/all-product?instanceId=03c5c68c-e588-458c-90c3-9e4c640be7af" ref="nofollow noopener noreferrer">console.huaweicloud.com/iotdm/?regiâ€¦</a></p>
<h4 data-id="heading-22">ï¼ˆ1ï¼‰åˆ›å»ºäº§å“</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25822cf39c7e45f7a9038655e7263750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=S3olirMz%2BV5LlczhUIVoyhd2swg%3D" alt="image-20241028141601305" loading="lazy"/></p>
<h4 data-id="heading-23">ï¼ˆ2ï¼‰å¡«å†™äº§å“ä¿¡æ¯</h4>
<p>æ ¹æ®è‡ªå·±äº§å“åå­—å¡«å†™ï¼Œä¸‹é¢çš„è®¾å¤‡ç±»å‹é€‰æ‹©è‡ªå®šä¹‰ç±»å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c04ebb116d34d7493adae7081c8090b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=hGn0Ueg9KjoSW3pIVc%2Ffu9Z3zzw%3D" alt="image-20240612094809689" loading="lazy"/></p>
<h4 data-id="heading-24">ï¼ˆ3ï¼‰äº§å“åˆ›å»ºæˆåŠŸ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4681fd1b277748e186625711ee370f50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=eiY7ccPALAsBz3GxhQsRDTyUoPA%3D" alt="image-20240612095148945" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆä¹‹åç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/191b19e4acfa4a5e8d67ada4995227ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Yd5UiknaHE6KLvzhTQ4cx%2BJpOkA%3D" alt="image-20240612095134263" loading="lazy"/></p>
<h4 data-id="heading-25">ï¼ˆ4ï¼‰æ·»åŠ è‡ªå®šä¹‰æ¨¡å‹</h4>
<p>äº§å“åˆ›å»ºå®Œæˆä¹‹åï¼Œç‚¹å‡»è¿›å…¥äº§å“è¯¦æƒ…é¡µé¢ï¼Œç¿»åˆ°æœ€ä¸‹é¢å¯ä»¥çœ‹åˆ°æ¨¡å‹å®šä¹‰ã€‚</p>
<p>æ¨¡å‹ç®€å•æ¥è¯´ï¼š å°±æ˜¯å­˜æ”¾è®¾å¤‡ä¸Šä¼ åˆ°äº‘å¹³å°çš„æ•°æ®ã€‚</p>
<p>å¯ä»¥æ ¹æ®è‡ªå·±çš„äº§å“è¿›è¡Œåˆ›å»ºã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">çƒŸé›¾å¯ä»¥å«  MQ2
æ¸©åº¦å¯ä»¥å«  Temperature
æ¹¿åº¦å¯ä»¥å«  humidity
ç«ç„°å¯ä»¥å«  flame
å…¶ä»–çš„ä¼ æ„Ÿå™¨è‡ªå·±ç”¨å•è¯ç®€å†™å‘½åå³å¯ã€‚ è¿™å°±æ˜¯çš„å•ç‰‡æœºè®¾å¤‡ç«¯ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ•°æ®åå­—ã€‚
</code></pre>
<p>å…ˆç‚¹å‡»è‡ªå®šä¹‰æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8c87b5aac21489c9b0712207666970c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=2lfL%2BTfcWfSP7p4YLHClbJTemvo%3D" alt="image-20240612095517900" loading="lazy"/></p>
<p>å†åˆ›å»ºä¸€ä¸ªæœåŠ¡IDã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aba2193baa014a0a8d93198b1281cc20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=nk4yBMqw189jjB5FToLl27ZkEJI%3D" alt="image-20240612095542749" loading="lazy"/></p>
<p>æ¥ç€ç‚¹å‡»æ–°å¢å±æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42fa34b0a9684339967607d4247c7f11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=muAaL12FeRBEdzVqEiDCou7zfDA%3D" alt="image-20240612095648815" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/367e042ab370453d9c6b1d6eca71a531~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=CmWaxXKtUjgoIkgOHb082O5Ut%2Bg%3D" alt="image-20240612095711898" loading="lazy"/></p>
<h3 data-id="heading-26">2.4 æ·»åŠ è®¾å¤‡</h3>
<p>äº§å“æ˜¯å±äºä¸Šå±‚çš„æŠ½è±¡æ¨¡å‹ï¼Œæ¥ä¸‹æ¥åœ¨äº§å“æ¨¡å‹ä¸‹æ·»åŠ å®é™…çš„è®¾å¤‡ã€‚æ·»åŠ çš„è®¾å¤‡æœ€ç»ˆéœ€è¦ä¸çœŸå®çš„è®¾å¤‡å…³è”åœ¨ä¸€èµ·ï¼Œå®Œæˆæ•°æ®äº¤äº’ã€‚</p>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰æ³¨å†Œè®¾å¤‡</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71940c7ea72c422aad6cc9575f4260f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=lLRJdlXS3EOA7wJ%2FI2RbVC5Lg%2B4%3D" alt="image-20240425181935561" loading="lazy"/></p>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰æ ¹æ®è‡ªå·±çš„è®¾å¤‡å¡«å†™</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcef1477597e4e13bcef776b7a69142e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=W5OW6C4cLypoNpsIV34r1mITCoI%3D" alt="image-20240612100115167" loading="lazy"/></p>
<h4 data-id="heading-29">ï¼ˆ3ï¼‰ä¿å­˜è®¾å¤‡ä¿¡æ¯</h4>
<p>åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œç‚¹å‡»ä¿å­˜å¹¶å…³é—­ï¼Œå¾—åˆ°åˆ›å»ºçš„è®¾å¤‡å¯†åŒ™ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯åœ¨åç»­ç”ŸæˆMQTTä¸‰å…ƒç»„çš„æ—¶å€™éœ€è¦ä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae5e71606a1f412eb68eedb3d3ad28dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=GKp%2BoE8O5r5IOwV%2FwTfPBcghDao%3D" alt="image-20240612100128061" loading="lazy"/></p>
<h4 data-id="heading-30">ï¼ˆ4ï¼‰è®¾å¤‡åˆ›å»ºå®Œæˆ</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48cea29e8169435f966e8717ae886980~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=dsaSOyqDPndQZHUydsDioK5KQTc%3D" alt="image-20240612100147232" loading="lazy"/></p>
<h4 data-id="heading-31">ï¼ˆ5ï¼‰è®¾å¤‡è¯¦æƒ…</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a5a24fd3d7d4199b0a835aad4016f7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=c2WLvbkJ7wySRz64mQcj13tlVu4%3D" alt="image-20240612100202960" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e61b358a66b54253bb2dc8844c8a9e25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=f9QfzY7jYbArtM8GqJGoiaLBOHE%3D" alt="image-20240612100217236" loading="lazy"/></p>
<h3 data-id="heading-32">2.5 MQTTåè®®ä¸»é¢˜è®¢é˜…ä¸å‘å¸ƒ</h3>
<h4 data-id="heading-33">ï¼ˆ1ï¼‰MQTTåè®®ä»‹ç»</h4>
<p>å½“å‰çš„è®¾å¤‡æ˜¯é‡‡ç”¨MQTTåè®®ä¸åä¸ºäº‘å¹³å°è¿›è¡Œé€šä¿¡ã€‚</p>
<p>MQTTæ˜¯ä¸€ä¸ªç‰©è”ç½‘ä¼ è¾“åè®®ï¼Œå®ƒè¢«è®¾è®¡ç”¨äºè½»é‡çº§çš„å‘å¸ƒ/è®¢é˜…å¼æ¶ˆæ¯ä¼ è¾“ï¼Œæ—¨åœ¨ä¸ºä½å¸¦å®½å’Œä¸ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸­çš„ç‰©è”ç½‘è®¾å¤‡æä¾›å¯é çš„ç½‘ç»œæœåŠ¡ã€‚MQTTæ˜¯ä¸“é—¨é’ˆå¯¹ç‰©è”ç½‘å¼€å‘çš„è½»é‡çº§ä¼ è¾“åè®®ã€‚MQTTåè®®é’ˆå¯¹ä½å¸¦å®½ç½‘ç»œï¼Œä½è®¡ç®—èƒ½åŠ›çš„è®¾å¤‡ï¼Œåšäº†ç‰¹æ®Šçš„ä¼˜åŒ–ï¼Œä½¿å¾—å…¶èƒ½é€‚åº”å„ç§ç‰©è”ç½‘åº”ç”¨åœºæ™¯ã€‚ç›®å‰MQTTæ‹¥æœ‰å„ç§å¹³å°å’Œè®¾å¤‡ä¸Šçš„å®¢æˆ·ç«¯ï¼Œå·²ç»å½¢æˆäº†åˆæ­¥çš„ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<p>MQTTæ˜¯ä¸€ç§æ¶ˆæ¯é˜Ÿåˆ—åè®®ï¼Œä½¿ç”¨å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯æ¨¡å¼ï¼Œæä¾›ä¸€å¯¹å¤šçš„æ¶ˆæ¯å‘å¸ƒï¼Œè§£é™¤åº”ç”¨ç¨‹åºè€¦åˆï¼Œç›¸å¯¹äºå…¶ä»–åè®®ï¼Œå¼€å‘æ›´ç®€å•ï¼›MQTTåè®®æ˜¯å·¥ä½œåœ¨TCP/IPåè®®ä¸Šï¼›ç”±TCP/IPåè®®æä¾›ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼›æ‰€ä»¥ï¼Œåªè¦å…·å¤‡TCPåè®®æ ˆçš„ç½‘ç»œè®¾å¤‡éƒ½å¯ä»¥ä½¿ç”¨MQTTåè®®ã€‚  æœ¬æ¬¡è®¾å¤‡é‡‡ç”¨çš„ESP8266å°±å…·å¤‡TCPåè®®æ ˆï¼Œèƒ½å¤Ÿå»ºç«‹TCPè¿æ¥ï¼Œæ‰€ä»¥ï¼Œé…åˆSTM32ä»£ç é‡Œå°è£…çš„MQTTåè®®ï¼Œå°±å¯ä»¥ä¸åä¸ºäº‘å¹³å°å®Œæˆé€šä¿¡ã€‚</p>
<p>åä¸ºäº‘çš„MQTTåè®®æ¥å…¥å¸®åŠ©æ–‡æ¡£åœ¨è¿™é‡Œ:  <a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.huaweicloud.com%2Fdevg-iothub%2Fiot_02_2200.html" target="_blank" title="https://support.huaweicloud.com/devg-iothub/iot_02_2200.html" ref="nofollow noopener noreferrer">support.huaweicloud.com/devg-iothubâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85420a00ae274df98e59953f6c36f34e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=ah7KfQUU3wUflKWc6sSsPe89RkI%3D" alt="img" loading="lazy"/></p>
<p><strong>ä¸šåŠ¡æµç¨‹ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85560f1e730040f98559d94e814fc472~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=WOllCxdpsRWnvPsFEjdAlqHLUUU%3D" alt="img" loading="lazy"/></p>
<h4 data-id="heading-34">ï¼ˆ2ï¼‰åä¸ºäº‘å¹³å°MQTTåè®®ä½¿ç”¨é™åˆ¶</h4>





















































<table><thead><tr><th>æè¿°</th><th>é™åˆ¶</th></tr></thead><tbody><tr><td>æ”¯æŒçš„MQTTåè®®ç‰ˆæœ¬</td><td>3.1.1</td></tr><tr><td>ä¸æ ‡å‡†MQTTåè®®çš„åŒºåˆ«</td><td>æ”¯æŒQos 0å’ŒQos 1æ”¯æŒTopicè‡ªå®šä¹‰ä¸æ”¯æŒQoS2ä¸æ”¯æŒwillã€retain msg</td></tr><tr><td>MQTTSæ”¯æŒçš„å®‰å…¨ç­‰çº§</td><td>é‡‡ç”¨TCPé€šé“åŸºç¡€ + TLSåè®®ï¼ˆæœ€é«˜TLSv1.3ç‰ˆæœ¬ï¼‰</td></tr><tr><td>å•å¸å·æ¯ç§’æœ€å¤§MQTTè¿æ¥è¯·æ±‚æ•°</td><td>æ— é™åˆ¶</td></tr><tr><td>å•ä¸ªè®¾å¤‡æ¯åˆ†é’Ÿæ”¯æŒçš„æœ€å¤§MQTTè¿æ¥æ•°</td><td>1</td></tr><tr><td>å•ä¸ªMQTTè¿æ¥æ¯ç§’çš„ååé‡ï¼Œå³å¸¦å®½ï¼ŒåŒ…å«ç›´è¿è®¾å¤‡å’Œç½‘å…³</td><td>3KB/s</td></tr><tr><td>MQTTå•ä¸ªå‘å¸ƒæ¶ˆæ¯æœ€å¤§é•¿åº¦ï¼Œè¶…è¿‡æ­¤å¤§å°çš„å‘å¸ƒè¯·æ±‚å°†è¢«ç›´æ¥æ‹’ç»</td><td>1MB</td></tr><tr><td>MQTTè¿æ¥å¿ƒè·³æ—¶é—´å»ºè®®å€¼</td><td>å¿ƒè·³æ—¶é—´é™å®šä¸º30è‡³1200ç§’ï¼Œæ¨èè®¾ç½®ä¸º120ç§’</td></tr><tr><td>äº§å“æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰Topic</td><td>æ”¯æŒ</td></tr><tr><td>æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…</td><td>è®¾å¤‡åªèƒ½å¯¹è‡ªå·±çš„Topicè¿›è¡Œæ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…</td></tr><tr><td>æ¯ä¸ªè®¢é˜…è¯·æ±‚çš„æœ€å¤§è®¢é˜…æ•°</td><td>æ— é™åˆ¶</td></tr></tbody></table>
<h4 data-id="heading-35">ï¼ˆ3ï¼‰ä¸»é¢˜è®¢é˜…æ ¼å¼</h4>
<p>å¸®åŠ©æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.huaweicloud.com%2Fdevg-iothub%2Fiot_02_2200.html" target="_blank" title="https://support.huaweicloud.com/devg-iothub/iot_02_2200.html" ref="nofollow noopener noreferrer">support.huaweicloud.com/devg-iothubâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c122c8357f540d3b72888d825e2c51e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=8r8HSLz6dHB9r2SjPr8Cs8jTDaY%3D" alt="image-20221207153310037" loading="lazy"/></p>
<p>å¯¹äºè®¾å¤‡è€Œè¨€ï¼Œä¸€èˆ¬ä¼šè®¢é˜…å¹³å°ä¸‹å‘æ¶ˆæ¯ç»™è®¾å¤‡ è¿™ä¸ªä¸»é¢˜ã€‚</p>
<p>è®¾å¤‡æƒ³æ¥æ”¶å¹³å°ä¸‹å‘çš„æ¶ˆæ¯ï¼Œå°±éœ€è¦è®¢é˜…å¹³å°ä¸‹å‘æ¶ˆæ¯ç»™è®¾å¤‡ çš„ä¸»é¢˜ï¼Œè®¢é˜…åï¼Œå¹³å°ä¸‹å‘æ¶ˆæ¯ç»™è®¾å¤‡ï¼Œè®¾å¤‡å°±ä¼šæ”¶åˆ°æ¶ˆæ¯ã€‚</p>
<p>å¦‚æœè®¾å¤‡æƒ³è¦çŸ¥é“å¹³å°ä¸‹å‘çš„æ¶ˆæ¯ï¼Œéœ€è¦è®¢é˜…ä¸Šé¢å›¾ç‰‡é‡Œæ ‡æ³¨çš„ä¸»é¢˜ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">ä»¥å½“å‰è®¾å¤‡ä¸ºä¾‹ï¼Œæœ€ç»ˆè®¢é˜…ä¸»é¢˜çš„æ ¼å¼å¦‚ä¸‹:
$oc/devices/{device_id}/sys/messages/down
    
æœ€ç»ˆçš„æ ¼å¼:
$oc/devices/<span class="hljs-number">663</span>cb18871d845632a0912e7_dev1/sys/messages/down
</code></pre>
<h4 data-id="heading-36">ï¼ˆ4ï¼‰ä¸»é¢˜å‘å¸ƒæ ¼å¼</h4>
<p>å¯¹äºè®¾å¤‡æ¥è¯´ï¼Œä¸»é¢˜å‘å¸ƒè¡¨ç¤ºå‘äº‘å¹³å°ä¸Šä¼ æ•°æ®ï¼Œå°†æœ€æ–°çš„ä¼ æ„Ÿå™¨æ•°æ®ï¼Œè®¾å¤‡çŠ¶æ€ä¸Šä¼ åˆ°äº‘å¹³å°ã€‚</p>
<p>è¿™ä¸ªæ“ä½œç§°ä¸ºï¼šå±æ€§ä¸ŠæŠ¥ã€‚</p>
<p>å¸®åŠ©æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.huaweicloud.com%2Fusermanual-iothub%2Fiot_06_v5_3010.html" target="_blank" title="https://support.huaweicloud.com/usermanual-iothub/iot_06_v5_3010.html" ref="nofollow noopener noreferrer">support.huaweicloud.com/usermanual-â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88790ea5762c46139b43c08bc5337acd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=wHcf%2F9%2FInrC8OchyHo4vx0uoOZo%3D" alt="image-20221207153637391" loading="lazy"/></p>
<p><strong>æ ¹æ®å¸®åŠ©æ–‡æ¡£çš„ä»‹ç»ï¼Œ å½“å‰è®¾å¤‡å‘å¸ƒä¸»é¢˜ï¼Œä¸ŠæŠ¥å±æ€§çš„æ ¼å¼æ€»ç»“å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">å‘å¸ƒçš„ä¸»é¢˜æ ¼å¼:
$oc/devices/{device_id}/sys/properties/report
 
æœ€ç»ˆçš„æ ¼å¼:
$oc/devices/<span class="hljs-number">663</span>cb18871d845632a0912e7_dev1/sys/properties/report
å‘å¸ƒä¸»é¢˜æ—¶ï¼Œéœ€è¦ä¸Šä¼ æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®æ ¼å¼æ˜¯JSONæ ¼å¼ã€‚

ä¸Šä¼ çš„JSONæ•°æ®æ ¼å¼å¦‚ä¸‹:

{
  <span class="hljs-string">"services"</span>: [
    {
      <span class="hljs-string">"service_id"</span>: &lt;å¡«æœåŠ¡ID&gt;,
      <span class="hljs-string">"properties"</span>: {
        <span class="hljs-string">"&lt;å¡«å±æ€§åç§°1&gt;"</span>: &lt;å¡«å±æ€§å€¼&gt;,
        <span class="hljs-string">"&lt;å¡«å±æ€§åç§°2&gt;"</span>: &lt;å¡«å±æ€§å€¼&gt;,
        ..........
      }
    }
  ]
}
æ ¹æ®JSONæ ¼å¼ï¼Œä¸€æ¬¡å¯ä»¥ä¸Šä¼ å¤šä¸ªå±æ€§å­—æ®µã€‚ è¿™ä¸ªJSONæ ¼å¼é‡Œçš„ï¼ŒæœåŠ¡IDï¼Œå±æ€§å­—æ®µåç§°ï¼Œå±æ€§å€¼ç±»å‹ï¼Œåœ¨å‰é¢åˆ›å»ºäº§å“çš„æ—¶å€™å°±å·²ç»ä»‹ç»äº†ï¼Œä¸è®°å¾—å¯ä»¥ç¿»åˆ°å‰é¢å»æŸ¥çœ‹ã€‚

æ ¹æ®è¿™ä¸ªæ ¼å¼ï¼Œç»„åˆä¸€æ¬¡ä¸Šä¼ çš„å±æ€§æ•°æ®:
{<span class="hljs-string">"services"</span>: [{<span class="hljs-string">"service_id"</span>: <span class="hljs-string">"stm32"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"çš„å­—æ®µåå­—1"</span>:<span class="hljs-number">30</span>,<span class="hljs-string">"çš„å­—æ®µåå­—2"</span>:<span class="hljs-number">10</span>,<span class="hljs-string">"çš„å­—æ®µåå­—3"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"çš„å­—æ®µåå­—4"</span>:<span class="hljs-number">0</span>}}]}
</code></pre>
<h3 data-id="heading-37">2.6 MQTTä¸‰å…ƒç»„</h3>
<p>MQTTåè®®ç™»å½•éœ€è¦å¡«ç”¨æˆ·IDï¼Œè®¾å¤‡IDï¼Œè®¾å¤‡å¯†ç ç­‰ä¿¡æ¯ï¼Œå°±åƒæˆ‘ä»¬å¹³æ—¶ç™»å½•QQï¼Œå¾®ä¿¡ä¸€æ ·è¦è¾“å…¥è´¦å·å¯†ç æ‰èƒ½ç™»å½•ã€‚MQTTåè®®ç™»å½•çš„è¿™3ä¸ªå‚æ•°ï¼Œä¸€èˆ¬ç§°ä¸ºMQTTä¸‰å…ƒç»„ã€‚</p>
<p>æ¥ä¸‹æ¥ä»‹ç»ï¼Œåä¸ºäº‘å¹³å°çš„MQTTä¸‰å…ƒç»„å‚æ•°å¦‚ä½•å¾—åˆ°ã€‚</p>
<h4 data-id="heading-38">ï¼ˆ1ï¼‰MQTTæœåŠ¡å™¨åœ°å€</h4>
<p>è¦ç™»å½•MQTTæœåŠ¡å™¨ï¼Œé¦–å…ˆè®°å¾—å…ˆçŸ¥é“æœåŠ¡å™¨çš„åœ°å€æ˜¯å¤šå°‘ï¼Œç«¯å£æ˜¯å¤šå°‘ã€‚</p>
<p>å¸®åŠ©æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.huaweicloud.com%2Fiotdm%2F%3Fregion%3Dcn-north-4%23%2Fdm-portal%2Fhome" target="_blank" title="https://console.huaweicloud.com/iotdm/?region=cn-north-4#/dm-portal/home" ref="nofollow noopener noreferrer">console.huaweicloud.com/iotdm/?regiâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28721cafc3e4419ab7d458158aa5c22d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=vouEWdFtwJGyeeINjWPcJcbRcb0%3D" alt="image-20240509193207359" loading="lazy"/></p>
<p>MQTTåè®®çš„ç«¯å£æ”¯æŒ1883å’Œ8883ï¼Œå®ƒä»¬çš„åŒºåˆ«æ˜¯ï¼š8883 æ˜¯åŠ å¯†ç«¯å£æ›´åŠ å®‰å…¨ã€‚ä½†æ˜¯å•ç‰‡æœºä¸Šä½¿ç”¨æ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥å½“å‰çš„è®¾å¤‡æ˜¯é‡‡ç”¨1883ç«¯å£è¿›è¿æ¥çš„ã€‚</p>
<p><strong>æ ¹æ®ä¸Šé¢çš„åŸŸåå’Œç«¯å£å·ï¼Œå¾—åˆ°ä¸‹é¢çš„IPåœ°å€å’Œç«¯å£å·ä¿¡æ¯ï¼š</strong>   å¦‚æœè®¾å¤‡æ”¯æŒå¡«å†™åŸŸåå¯ä»¥ç›´æ¥å¡«åŸŸåï¼Œä¸æ”¯æŒå°±ç›´æ¥å¡«å†™IPåœ°å€ã€‚  ï¼ˆIPåœ°å€å°±æ˜¯åŸŸåè§£æå¾—åˆ°çš„ï¼‰</p>
<pre><code class="hljs language-cpp" lang="cpp">åä¸ºäº‘çš„MQTTæœåŠ¡å™¨åœ°å€ï¼š<span class="hljs-number">117.78</span><span class="hljs-number">.5</span><span class="hljs-number">.125</span>
åä¸ºäº‘çš„MQTTç«¯å£å·ï¼š<span class="hljs-number">1883</span>
</code></pre>
<p>å¦‚ä½•å¾—åˆ°IPåœ°å€ï¼Ÿå¦‚ä½•åŸŸåè½¬IPï¼Ÿ  æ‰“å¼€Windowsçš„å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">ping  ad635970a1.st1.iotda-device.cn-north<span class="hljs-number">-4.</span>myhuaweicloud.com
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78672b5427c6440989468a2bfe855d51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=pAOujZ97EIi%2BtOgVkykgaoNnMlc%3D" alt="image-20240425182610048" loading="lazy"/></p>
<h4 data-id="heading-39">ï¼ˆ2ï¼‰ç”ŸæˆMQTTä¸‰å…ƒç»„</h4>
<p>åä¸ºäº‘æä¾›äº†ä¸€ä¸ªåœ¨çº¿å·¥å…·ï¼Œç”¨æ¥ç”ŸæˆMQTTé‰´æƒä¸‰å…ƒç»„ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fiot-tool.obs-website.cn-north-4.myhuaweicloud.com%2F" target="_blank" title="https://iot-tool.obs-website.cn-north-4.myhuaweicloud.com/" ref="nofollow noopener noreferrer">iot-tool.obs-website.cn-north-4.myhuaweicloud.com/</a></p>
<p>æ‰“å¼€è¿™ä¸ªå·¥å…·ï¼Œå¡«å…¥è®¾å¤‡çš„ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯åˆšæ‰åˆ›å»ºå®Œè®¾å¤‡ä¹‹åä¿å­˜çš„ä¿¡æ¯ï¼‰ï¼Œç‚¹å‡»ç”Ÿæˆï¼Œå°±å¯ä»¥å¾—åˆ°MQTTçš„ç™»å½•ä¿¡æ¯äº†ã€‚</p>
<p><strong>ä¸‹é¢æ˜¯æ‰“å¼€çš„é¡µé¢ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/514802762d904bdcbf50cf7eda3d1b9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=V03NiFDBbpiQ2O6nz1r4T%2Biyw84%3D" alt="image-20240425183025893" loading="lazy"/></p>
<p><strong>å¡«å…¥è®¾å¤‡çš„ä¿¡æ¯ï¼š</strong>   ï¼ˆä¸Šé¢ä¸¤è¡Œå°±æ˜¯è®¾å¤‡åˆ›å»ºå®Œæˆä¹‹åä¿å­˜å¾—åˆ°çš„ï¼‰</p>
<p>ç›´æ¥å¾—åˆ°ä¸‰å…ƒç»„ä¿¡æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c8cd7be6a534b7cad309dcfb4968f37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=0mChOVaLRJU51PohVrUL8eIDP2E%3D" alt="image-20240509193310020" loading="lazy"/></p>
<p>å¾—åˆ°ä¸‰å…ƒç»„ä¹‹åï¼Œè®¾å¤‡ç«¯é€šè¿‡MQTTåè®®ç™»å½•é‰´æƒçš„æ—¶å€™ï¼Œå¡«å…¥å‚æ•°å³å¯ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp">ClientId  <span class="hljs-number">663</span>cb18871d845632a0912e7_dev1_0_0_2024050911
Username  <span class="hljs-number">663</span>cb18871d845632a0912e7_dev1
Password  <span class="hljs-number">71b</span>82deae83e80f04c4269b5bbce3b2fc7c13f610948fe210ce18650909ac237
</code></pre>
<h3 data-id="heading-40">2.7 æ¨¡æ‹Ÿè®¾å¤‡ç™»å½•æµ‹è¯•</h3>
<p>ç»è¿‡ä¸Šé¢çš„æ­¥éª¤ä»‹ç»ï¼Œå·²ç»åˆ›å»ºäº†äº§å“ï¼Œè®¾å¤‡ï¼Œæ•°æ®æ¨¡å‹ï¼Œå¾—åˆ°MQTTç™»å½•ä¿¡æ¯ã€‚ æ¥ä¸‹æ¥å°±ç”¨MQTTå®¢æˆ·ç«¯è½¯ä»¶æ¨¡æ‹ŸçœŸå®çš„è®¾å¤‡æ¥ç™»å½•å¹³å°ã€‚æµ‹è¯•ä¸æœåŠ¡å™¨é€šä¿¡æ˜¯å¦æ­£å¸¸ã€‚</p>
<p><strong>MQTTè½¯ä»¶ä¸‹è½½åœ°å€ã€å…è´¹ã€‘ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fxiaolong1126626497%2F89928772" target="_blank" title="https://download.csdn.net/download/xiaolong1126626497/89928772" ref="nofollow noopener noreferrer">download.csdn.net/download/xiâ€¦</a></p>
<h4 data-id="heading-41">ï¼ˆ1ï¼‰å¡«å…¥ç™»å½•ä¿¡æ¯</h4>
<p>æ‰“å¼€MQTTå®¢æˆ·ç«¯è½¯ä»¶ï¼Œå¯¹å·å¡«å…¥ç›¸å…³ä¿¡æ¯ï¼ˆå°±æ˜¯ä¸Šé¢çš„æ–‡æœ¬ä»‹ç»ï¼‰ã€‚ç„¶åï¼Œç‚¹å‡»ç™»å½•ï¼Œè®¢é˜…ä¸»é¢˜ï¼Œå‘å¸ƒä¸»é¢˜ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1645ee1035024af89e127ca0936bd056~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=m2iFJrbX2KCmazwXLItJSheRrdc%3D" alt="image-20240509193457358" loading="lazy"/></p>
<h4 data-id="heading-42">ï¼ˆ2ï¼‰æ‰“å¼€ç½‘é¡µæŸ¥çœ‹</h4>
<p>å®Œæˆä¸Šé¢çš„æ“ä½œä¹‹åï¼Œæ‰“å¼€åä¸ºäº‘ç½‘é¡µåå°ï¼Œå¯ä»¥çœ‹åˆ°è®¾å¤‡å·²ç»åœ¨çº¿äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/785fe0014613421c862df2833b7242b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=UCAhuXTgXANj3DZEWpHRvpcKD90%3D" alt="image-20240612100508790" loading="lazy"/></p>
<p>ç‚¹å‡»è¯¦æƒ…é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°ä¸Šä¼ çš„æ•°æ®ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6baa2073dc8b4283824c173e3ba02aff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=sXlb8TUTXC5GF08QBPdkoRWf7VU%3D" alt="image-20240612100529581" loading="lazy"/></p>
<p>åˆ°æ­¤ï¼Œäº‘å¹³å°çš„éƒ¨ç½²å·²ç»å®Œæˆï¼Œè®¾å¤‡å·²ç»å¯ä»¥æ­£å¸¸ä¸Šä¼ æ•°æ®äº†ã€‚</p>
<h4 data-id="heading-43">ï¼ˆ3ï¼‰MQTTç™»å½•æµ‹è¯•å‚æ•°æ€»ç»“</h4>
<pre><code class="hljs language-cpp" lang="cpp">MQTTæœåŠ¡å™¨:  <span class="hljs-number">117.78</span><span class="hljs-number">.5</span><span class="hljs-number">.125</span>
MQTTç«¯å£å·:  <span class="hljs-number">183</span>

<span class="hljs-comment">//ç‰©è”ç½‘æœåŠ¡å™¨çš„è®¾å¤‡ä¿¡æ¯</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MQTT_ClientID <span class="hljs-string">"663cb18871d845632a0912e7_dev1_0_0_2024050911"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MQTT_UserName <span class="hljs-string">"663cb18871d845632a0912e7_dev1"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MQTT_PassWord <span class="hljs-string">"71b82deae83e80f04c4269b5bbce3b2fc7c13f610948fe210ce18650909ac237"</span></span>

<span class="hljs-comment">//è®¢é˜…ä¸å‘å¸ƒçš„ä¸»é¢˜</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_TOPIC  <span class="hljs-string">"$oc/devices/663cb18871d845632a0912e7_dev1/sys/messages/down"</span>  <span class="hljs-comment">//è®¢é˜…</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> POST_TOPIC <span class="hljs-string">"$oc/devices/663cb18871d845632a0912e7_dev1/sys/properties/report"</span>  <span class="hljs-comment">//å‘å¸ƒ</span></span>


å‘å¸ƒçš„æ•°æ®:
{<span class="hljs-string">"services"</span>: [{<span class="hljs-string">"service_id"</span>: <span class="hljs-string">"stm32"</span>,<span class="hljs-string">"properties"</span>:{<span class="hljs-string">"çš„å­—æ®µåå­—1"</span>:<span class="hljs-number">30</span>,<span class="hljs-string">"çš„å­—æ®µåå­—2"</span>:<span class="hljs-number">10</span>,<span class="hljs-string">"çš„å­—æ®µåå­—3"</span>:<span class="hljs-number">1</span>,<span class="hljs-string">"çš„å­—æ®µåå­—4"</span>:<span class="hljs-number">0</span>}}]}

</code></pre>
<h3 data-id="heading-44">2.8 åˆ›å»ºIAMè´¦æˆ·</h3>
<p>åˆ›å»ºä¸€ä¸ªIAMè´¦æˆ·ï¼Œå› ä¸ºæ¥ä¸‹æ¥å¼€å‘ä¸Šä½æœºï¼Œéœ€è¦ä½¿ç”¨äº‘å¹³å°çš„APIæ¥å£ï¼Œè¿™äº›æ¥å£éƒ½éœ€è¦tokenè¿›è¡Œé‰´æƒã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯èº«ä»½çš„è®¤è¯ã€‚  è°ƒç”¨æ¥å£è·å–Tokenæ—¶ï¼Œå°±éœ€è¦å¡«å†™IAMè´¦å·ä¿¡æ¯ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸‹è¿‡ç¨‹ã€‚</p>
<p>åœ°å€:  <a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.huaweicloud.com%2Fiam%2F%3Fregion%3Dcn-north-4%23%2Fiam%2Fusers" target="_blank" title="https://console.huaweicloud.com/iam/?region=cn-north-4#/iam/users" ref="nofollow noopener noreferrer">console.huaweicloud.com/iam/?regionâ€¦</a></p>
<p>**ã€1ã€‘è·å–é¡¹ç›®å‡­è¯ **  ç‚¹å‡»å·¦ä¸Šè§’ç”¨æˆ·åï¼Œé€‰æ‹©ä¸‹æ‹‰èœå•é‡Œçš„<code>æˆ‘çš„å‡­è¯</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2062a032bf2547e3bf52615f0b6ae3c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=LHJ0jg0v1OfX4yDTb7QgneFDgwc%3D" alt="image-20240509193646253" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82319076baee40058ab4eed4ac38af17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=UAXxl5GU6vOqTEcvTWUU7iynBDg%3D" alt="image-20240509193701262" loading="lazy"/></p>
<p><strong>é¡¹ç›®å‡­è¯:</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-number">28</span>add376c01e4a61ac8b621c714bf459
</code></pre>
<p><strong>ã€2ã€‘åˆ›å»ºIAMç”¨æˆ·</strong></p>
<p>é¼ æ ‡æ”¾åœ¨å·¦ä¸Šè§’å¤´åƒä¸Šï¼Œåœ¨ä¸‹æ‹‰èœå•é‡Œé€‰æ‹©<code>ç»Ÿä¸€èº«ä»½è®¤è¯</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6aa6543f1734f26aad695500910aa4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=FLdflBY8cV3jgkHT5ncLD9GXilo%3D" alt="image-20240509193729078" loading="lazy"/></p>
<p>ç‚¹å‡»å·¦ä¸Šè§’<code>åˆ›å»ºç”¨æˆ·</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83554585c7e44b5a95cd80fdf2395f08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=OOZBI363CdPMKnyJIAzZz8tqO18%3D" alt="image-20240509193744287" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3597d011458042d9ac113b86ae122565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=fU3w4vdurlImOw6FDEsEoPrWixM%3D" alt="image-20240314153208692" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f381cbaf63046b68e2d99040f545624~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=ewMwPkjtJW1rKQH6qc9XbejfOLs%3D" alt="image-20240314153228359" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abeb9f97d260461cafb8a608fb8fd4fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Ml3oiY%2FEWwdiGcQ7FevOrqi6jRk%3D" alt="image-20240314153258229" loading="lazy"/></p>
<p><strong>åˆ›å»ºæˆåŠŸï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6890cd751d3742268fa46346af3c8619~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=59loPvTOiLQFHBPlTr6rKZOMPFs%3D" alt="image-20240314153315444" loading="lazy"/></p>
<p>ã€3ã€‘åˆ›å»ºå®Œæˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a202140521c7424f8c02815d1f1c2519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=wlHWQ%2BZt2VTWKvFxMfq8pXYFHz8%3D" alt="image-20240509193828289" loading="lazy"/></p>
<p><strong>ç”¨æˆ·ä¿¡æ¯å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">ä¸»ç”¨æˆ·å  l19504562721
IAMç”¨æˆ·  ds_abc
å¯†ç      DS12345678
</code></pre>
<h3 data-id="heading-45">2.9 è·å–å½±å­æ•°æ®</h3>
<p>å¸®åŠ©æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.huaweicloud.com%2Fapi-iothub%2Fiot_06_v5_0079.html" target="_blank" title="https://support.huaweicloud.com/api-iothub/iot_06_v5_0079.html" ref="nofollow noopener noreferrer">support.huaweicloud.com/api-iothub/â€¦</a></p>
<p><strong>è®¾å¤‡å½±å­ä»‹ç»ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">è®¾å¤‡å½±å­æ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨å’Œæ£€ç´¢è®¾å¤‡å½“å‰çŠ¶æ€ä¿¡æ¯çš„JSONæ–‡æ¡£ã€‚
æ¯ä¸ªè®¾å¤‡æœ‰ä¸”åªæœ‰ä¸€ä¸ªè®¾å¤‡å½±å­ï¼Œç”±è®¾å¤‡IDå”¯ä¸€æ ‡è¯†
è®¾å¤‡å½±å­ä»…ä¿å­˜æœ€è¿‘ä¸€æ¬¡è®¾å¤‡çš„ä¸ŠæŠ¥æ•°æ®å’Œé¢„æœŸæ•°æ®
æ— è®ºè¯¥è®¾å¤‡æ˜¯å¦åœ¨çº¿ï¼Œéƒ½å¯ä»¥é€šè¿‡è¯¥å½±å­è·å–å’Œè®¾ç½®è®¾å¤‡çš„å±æ€§
</code></pre>
<p>ç®€å•æ¥è¯´ï¼šè®¾å¤‡å½±å­å°±æ˜¯ä¿å­˜ï¼Œè®¾å¤‡æœ€æ–°ä¸Šä¼ çš„ä¸€æ¬¡æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬è®¾è®¡çš„è½¯ä»¶é‡Œï¼Œå¦‚æœæƒ³è¦è·å–è®¾å¤‡çš„æœ€æ–°çŠ¶æ€ä¿¡æ¯ï¼Œå°±é‡‡ç”¨è®¾å¤‡å½±å­æ¥å£ã€‚</p>
<p>å¦‚æœå¯¹æ¥å£ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å…ˆè¿›è¡Œåœ¨çº¿è°ƒè¯•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapiexplorer.developer.huaweicloud.com%2Fapiexplorer%2Fdoc%3Fproduct%3DIoTDA%26api%3DShowDeviceShadow" target="_blank" title="https://apiexplorer.developer.huaweicloud.com/apiexplorer/doc?product=IoTDA&amp;api=ShowDeviceShadow" ref="nofollow noopener noreferrer">apiexplorer.developer.huaweicloud.com/apiexplorerâ€¦</a></p>
<p>åœ¨çº¿è°ƒè¯•æ¥å£ï¼Œå¯ä»¥è¯·æ±‚å½±å­æ¥å£ï¼Œäº†è§£è¯·æ±‚ï¼Œä¸è¿”å›çš„æ•°æ®æ ¼å¼ã€‚</p>
<p><strong>è°ƒè¯•å®Œæˆçœ‹å³ä¸‹è§’çš„å“åº”ä½“ï¼Œå°±æ˜¯è¿”å›çš„å½±å­æ•°æ®ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4dc5dbdda256495aad3b6d0e3f8545a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=auviXLjBrxmq4qwDZ1NKBB11fXo%3D" alt="image-20240509194152229" loading="lazy"/></p>
<p><strong>è®¾å¤‡å½±å­æ¥å£è¿”å›çš„æ•°æ®å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">{
 <span class="hljs-string">"device_id"</span>: <span class="hljs-string">"663cb18871d845632a0912e7_dev1"</span>,
 <span class="hljs-string">"shadow"</span>: [
  {
   <span class="hljs-string">"service_id"</span>: <span class="hljs-string">"stm32"</span>,
   <span class="hljs-string">"desired"</span>: {
    <span class="hljs-string">"properties"</span>: null,
    <span class="hljs-string">"event_time"</span>: null
   },
   <span class="hljs-string">"reported"</span>: {
    <span class="hljs-string">"properties"</span>: {
     <span class="hljs-string">"DHT11_T"</span>: <span class="hljs-number">18</span>,
     <span class="hljs-string">"DHT11_H"</span>: <span class="hljs-number">90</span>,
     <span class="hljs-string">"BH1750"</span>: <span class="hljs-number">38</span>,
     <span class="hljs-string">"MQ135"</span>: <span class="hljs-number">70</span>
    },
    <span class="hljs-string">"event_time"</span>: <span class="hljs-string">"20240509T113448Z"</span>
   },
   <span class="hljs-string">"version"</span>: <span class="hljs-number">3</span>
  }
 ]
}
</code></pre>
<p><strong>è°ƒè¯•æˆåŠŸä¹‹åï¼Œå¯ä»¥å¾—åˆ°è®¿é—®å½±å­æ•°æ®çš„çœŸå®é“¾æ¥ï¼Œæ¥ä¸‹æ¥çš„ä»£ç å¼€å‘ä¸­ï¼Œå°±é‡‡ç”¨Qtå†™ä»£ç è®¿é—®æ­¤é“¾æ¥ï¼Œè·å–å½±å­æ•°æ®ï¼Œå®Œæˆä¸Šä½æœºå¼€å‘ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c50df9d3fc9a4e5b84b259a3fabd0058~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=C6mzKBLWwPwMes2jFLJp1%2Fu18jo%3D" alt="image-20240509194214716" loading="lazy"/></p>
<p><strong>é“¾æ¥å¦‚ä¸‹ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">https:<span class="hljs-comment">//ad635970a1.st1.iotda-app.cn-north-4.myhuaweicloud.com:443/v5/iot/28add376c01e4a61ac8b621c714bf459/devices/663cb18871d845632a0912e7_dev1/shadow</span>
</code></pre>
<h2 data-id="heading-46">ä¸‰ã€Qtå¼€å‘å…¥é—¨ä¸ç¯å¢ƒæ­å»º</h2>
<p><strong>å½“å‰é¡¹ç›®çš„ä¸Šä½æœºæ˜¯é‡‡ç”¨Qtå¼€å‘çš„ï¼Œè¿™ä¸€ç« èŠ‚ä¸»è¦æ˜¯ä»‹ç»Qtå¼€å‘ç¯å¢ƒçš„å®‰è£…ï¼Œä»¥åŠQtå¼€å‘ç¯å¢ƒå…¥é—¨çš„ä½¿ç”¨ã€‚å¦‚æœQtæ²¡æœ‰ä»»ä½•åŸºç¡€ï¼Œå»ºè®®ä»”ç»†çœ‹ä¸€éã€‚</strong></p>
<h3 data-id="heading-47">3.1 Qtæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Qt æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€è·¨å¹³å°çš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ï¼Œä¸»è¦ç”¨äºåˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº”ç”¨ç¨‹åºï¼Œä½†å®ƒä¸ä»…ä»…å±€é™äºGUIç¼–ç¨‹ã€‚å®ƒç”±æŒªå¨çš„å¥‡è¶£ç§‘æŠ€ï¼ˆTrollTechï¼‰æœ€åˆäº1991å¹´å¼€å‘ï¼Œå¹¶åœ¨åç»­çš„å‘å±•å†ç¨‹ä¸­ç»å†äº†å¤šæ¬¡æ‰€æœ‰æƒå˜æ›´ï¼ŒåŒ…æ‹¬è¯ºåŸºäºšå’ŒDigiaç­‰å…¬å¸æ¥æ‰‹ï¼Œç°åœ¨Qtå±äºThe Qt Companyæ‰€æœ‰ã€‚</p>
<p><strong>Qt ä¸»è¦ç‰¹ç‚¹å’Œä¼˜åŠ¿åŒ…æ‹¬ï¼š</strong></p>
<p>ï¼ˆ1ï¼‰<strong>è·¨å¹³å°</strong>ï¼šQt æ”¯æŒå¤šç§æ“ä½œç³»ç»Ÿï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨åŒä¸€ä»½æºä»£ç åœ¨ä¸åŒå¹³å°ä¸Šç¼–è¯‘è¿è¡Œï¼Œå¦‚Windowsã€Linuxã€macOSã€Androidä»¥åŠå„ç§åµŒå…¥å¼ç³»ç»Ÿï¼ˆå¦‚RTOSï¼‰ï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„ç¼–è¯‘â€ã€‚</p>
<p>ï¼ˆ2ï¼‰<strong>C++ å¼€å‘</strong>ï¼šQt çš„æ ¸å¿ƒæ˜¯åŸºäºC++ç¼–ç¨‹è¯­è¨€æ„å»ºï¼Œæä¾›äº†ä¸€å¥—ä¸°å¯Œçš„ç±»åº“ï¼Œé€šè¿‡é¢å‘å¯¹è±¡çš„è®¾è®¡æ–¹å¼ç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ã€‚</p>
<p>ï¼ˆ3ï¼‰<strong>å›¾å½¢ç”¨æˆ·ç•Œé¢</strong>ï¼šQt æä¾›äº†å®Œæ•´çš„GUIç»„ä»¶é›†ï¼ŒåŒ…å«çª—å£ã€æŒ‰é’®ã€æ ‡ç­¾ã€æ–‡æœ¬æ¡†ç­‰å„ç§æ ‡å‡†æ§ä»¶ï¼Œä»¥åŠå¸ƒå±€ç®¡ç†å™¨ã€æ ·å¼è¡¨ç­‰åŠŸèƒ½ï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿé«˜æ•ˆåœ°åˆ›å»ºç¾è§‚ä¸”åŠŸèƒ½å®Œå–„çš„æ¡Œé¢åº”ç”¨æˆ–ç§»åŠ¨åº”ç”¨ç•Œé¢ã€‚</p>
<p>ï¼ˆ4ï¼‰<strong>å·¥å…·é“¾å®Œæ•´</strong>ï¼šQt åŒ…å«ä¸€ç³»åˆ—é›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰å’Œè¾…åŠ©å·¥å…·ï¼Œä¾‹å¦‚Qt Creatoræ˜¯ä¸€ä¸ªå…¨èƒ½çš„è·¨å¹³å°IDEï¼ŒQt Designerç”¨äºå¯è§†åŒ–æ‹–æ‹½è®¾è®¡UIç•Œé¢ï¼ŒQt Linguistæ”¯æŒå›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç¿»è¯‘ï¼Œè¿˜æœ‰Qt Assistantå’Œå¤§é‡æ–‡æ¡£èµ„æºæ–¹ä¾¿å¼€å‘è€…çš„ä½¿ç”¨ã€‚</p>
<p>ï¼ˆ5ï¼‰<strong>éGUIåŠŸèƒ½ä¸°å¯Œ</strong>ï¼šé™¤äº†GUIåŠŸèƒ½å¤–ï¼ŒQt è¿˜æä¾›äº†ä¼—å¤šéå›¾å½¢åŒ–åŠŸèƒ½æ¨¡å—ï¼Œå¦‚ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“è®¿é—®ã€XMLå¤„ç†ã€å¤šåª’ä½“å¤„ç†ï¼ˆéŸ³é¢‘è§†é¢‘ï¼‰ã€æ–‡ä»¶I/Oã€çº¿ç¨‹ä¸å¹¶å‘å¤„ç†ã€OpenGLå’Œ3Då›¾å½¢æ¸²æŸ“ç­‰ã€‚</p>
<p>ï¼ˆ6ï¼‰<strong>å…ƒå¯¹è±¡ç³»ç»Ÿ</strong>ï¼šQt ä½¿ç”¨å…ƒå¯¹è±¡ç³»ç»Ÿï¼ˆMeta-Object System, MOCï¼‰å®ç°äº†ä¿¡å·ä¸æ§½æœºåˆ¶ï¼ˆSignals and Slotsï¼‰ï¼Œè¿™æ˜¯ä¸€ç§é«˜çº§äº‹ä»¶å¤„ç†æœºåˆ¶ï¼Œå…è®¸åœ¨ä¸åŒå¯¹è±¡ä¹‹é—´å®‰å…¨åœ°è¿›è¡Œå¼‚æ­¥é€šä¿¡ã€‚</p>
<p>ï¼ˆ7ï¼‰<strong>å¯æ‰©å±•æ€§ä¸çµæ´»æ€§</strong>ï¼šQt æ¶æ„é«˜åº¦çµæ´»ï¼Œæ”¯æŒæ’ä»¶ä½“ç³»ç»“æ„ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ç»„ä»¶å¹¶è½»æ¾åœ°é›†æˆåˆ°Qtåº”ç”¨ä¸­ã€‚</p>
<p>Qt ä»¥å…¶å¼ºå¤§çš„è·¨å¹³å°èƒ½åŠ›å’Œå…¨é¢çš„åŠŸèƒ½é›†åˆæˆä¸ºè®¸å¤šä¼ä¸šå’Œä¸ªäººå¼€å‘è€…é€‰æ‹©ç”¨æ¥å¼€å‘é«˜æ€§èƒ½ã€é«˜ç¨³å®šæ€§çš„åº”ç”¨ç¨‹åºçš„é‡è¦å·¥å…·ä¹‹ä¸€ï¼Œè¢«å¹¿æ³›åº”ç”¨äºå„ç±»æ¡Œé¢è½¯ä»¶ã€åµŒå…¥å¼è®¾å¤‡ã€ç§»åŠ¨åº”ç”¨ä»¥åŠæœåŠ¡å™¨ç«¯ç»„ä»¶ç­‰é¢†åŸŸã€‚</p>
<h3 data-id="heading-48">3.2 Qtç‰ˆæœ¬ä»‹ç»</h3>
<p>åœ¨Qtå‘è¡Œç‰ˆæœ¬ä¸­å°†è¦æ¶‰åŠä¸¤ä¸ªç‰ˆæœ¬ï¼šQtå•†ä¸šæˆæƒå’ŒQtå¼€æºæˆæƒã€‚</p>
<p>ï¼ˆ1ï¼‰Qtå•†ä¸šæˆæƒæ˜¯è®¾è®¡å•†ä¸šè½¯ä»¶çš„å¼€å‘ç¯å¢ƒï¼Œè¿™äº›å•†ä¸šè½¯ä»¶ä½¿ç”¨äº†ä¼ ç»Ÿçš„å•†ä¸šæ¥å‘å¸ƒï¼Œå®ƒåŒ…å«äº†ä¸€äº›æ›´æ–°çš„åŠŸèƒ½ã€æŠ€æœ¯ä¸Šçš„æ”¯æŒå’Œå¤§é‡çš„è§£å†³æ–¹æ¡ˆï¼Œå¼€å‘äº†ä½¿ç”¨äºè¡Œä¸šçš„ä¸€äº›ç‰¹å®šçš„ç»„ä»¶ï¼Œæœ‰ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½åªåœ¨å•†ä¸šç”¨æˆ·ä¸­ä½¿ç”¨ã€‚</p>
<p>ï¼ˆ2ï¼‰Qtå¼€æºæˆæƒæ˜¯ç”¨æ¥å¼€å‘å¼€æºçš„è½¯ä»¶ï¼Œå®ƒæä¾›äº†ä¸€äº›å…è´¹çš„æ”¯æŒï¼Œå¹¶éµå¾ªQPLåè®®ã€‚</p>
<p>å¼€æ”¾æºä»£ç æ˜¯å…è´¹çš„è½¯ä»¶ï¼Œä¸ç‰µæ¶‰ç”¨æˆ·çš„æŸäº›æƒç›Šã€‚ä»»ä½•äººéƒ½æœ‰ä½¿ç”¨å¼€æºè½¯ä»¶å’Œå‚ä¸å®ƒçš„ä¿®æ”¹çš„æœºä¼šï¼Œè¿™å°±æ„å‘³ç€å…¶ä»–çš„äººåŒæ ·å¯è·å¾—å¼€å‘çš„ä»£ç ã€‚ç›®å‰ Qt çš„å¼€æºæˆæƒæœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ GPL æˆæƒï¼Œå¦ä¸€ç§æ˜¯ LGPL æˆæƒã€‚</p>
<h3 data-id="heading-49">3.3 Qtå¼€å‘ç¯å¢ƒå®‰è£…</h3>
<p>Qtçš„ä¸­æ–‡å®˜ç½‘ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qt.io%2Fzh-cn%2F!%255Bimage-20221207160550486%255D(https%3A%2F%2Fled-obs.obs.cn-north-1.myhuaweicloud.com%2FBlog%2Fimg%2Fimage-20221207160550486.png)" target="_blank" title="https://www.qt.io/zh-cn/!%5Bimage-20221207160550486%5D(https://led-obs.obs.cn-north-1.myhuaweicloud.com/Blog/img/image-20221207160550486.png)" ref="nofollow noopener noreferrer">www.qt.io/zh-cn/![imaâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b65fec9401b4fe2a6bba80e43a459f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=6igUydPoyOoFHVOZo1iZJEOFo4Y%3D" alt="image-20221207160606892" loading="lazy"/></p>
<p>QT5.12.6çš„ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdownload.qt.io%2Farchive%2Fqt%2F5.12%2F5.12.6" target="_blank" title="https://download.qt.io/archive/qt/5.12/5.12.6" ref="nofollow noopener noreferrer">download.qt.io/archive/qt/â€¦</a></p>
<p>æ‰“å¼€ä¸‹è½½é“¾æ¥åé€‰æ‹©ä¸‹é¢çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼š</p>
<p><code>qt-opensource-windows-x86-5.12.6.exe 13-Nov-2019 07:28 3.7G Details</code></p>
<p>è½¯ä»¶å®‰è£…æ—¶æ–­ç½‘å®‰è£…ï¼Œå¦åˆ™ä¼šæç¤ºè¾“å…¥è´¦æˆ·ã€‚</p>
<p><strong>å¦‚æœä¸‹è½½ä¸äº†ï¼Œå¯ä»¥åœ¨ç½‘ç›˜é‡Œæ‰¾åˆ°å®‰è£…åŒ…ä¸‹è½½ï¼š</strong>    é£ä¹¦æ–‡æ¡£è®°å½•çš„ç½‘ç›˜åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fccnr8sukk85n.feishu.cn%2Fwiki%2FQjY8weDYHibqRYkFP2qcA9aGnvb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ccnr8sukk85n.feishu.cn/wiki/QjY8weDYHibqRYkFP2qcA9aGnvb?from=from_copylink" ref="nofollow noopener noreferrer">ccnr8sukk85n.feishu.cn/wiki/QjY8weâ€¦</a></p>
<p>å®‰è£…çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå¤é€‰æ¡†é‡Œå‹¾é€‰ä¸€ä¸ª<code>mingw 32</code>ç¼–è¯‘å™¨å³å¯ï¼Œå…¶ä»–çš„ä¸ç®¡é»˜è®¤å°±è¡Œï¼Œç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ç»§ç»­å®‰è£…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d9784a612b34b1894d3678a13a22341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=e72Jj5uxVcliaKd7fWkLfA4tFLE%3D" alt="image-20221203151742653" loading="lazy"/></p>
<p>é€‰æ‹©MinGW 32-bit ç¼–è¯‘å™¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d3a87702e02468181ac0020e4be9f67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=4Ng%2BbmOODXYVaa4eUuVm1Qekcqs%3D" alt="image-20221203151750344" loading="lazy"/></p>
<h3 data-id="heading-50">3.4 å¼€å‘ç¬¬ä¸€ä¸ªQTç¨‹åº</h3>
<p>åœ¨QTå¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æ‰‹åŠ¨ç¼–å†™ä»£ç ä¹Ÿå¯ä»¥ä½¿ç”¨UIè®¾è®¡å¸ˆç›´æ¥æ‹–æ‹½æ§ä»¶çš„æ–¹å¼ç¼–å†™ç•Œé¢å’Œå¸ƒå±€ï¼Œåœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ä¸€èˆ¬æ˜¯ä¸¤ç§æ–¹å¼ç»“åˆä½¿ç”¨ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<p><strong>æœ¬å°èŠ‚ç”¨ä¸€ä¸ªç®€å•çš„ "Hello QT" ç¨‹åºä»‹ç»ä¸€ä¸‹ä½¿ç”¨QtCreatoræ–°å»ºå·¥ç¨‹çš„æ­¥éª¤</strong>ã€‚</p>
<p>ï¼ˆ1ï¼‰æ‰“å¼€QtCreatorè½¯ä»¶ï¼Œé€‰æ‹©New Projectï¼Œæ–°å»ºä¸€ä¸ªå·¥ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3f5779cfa67451aabaa85d3d8e28efc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=pbD7dDa%2B7jXAdT9bNQTZH5J0YG4%3D" alt="image-20240304134953164" loading="lazy"/></p>
<p><strong>ï¼ˆ2ï¼‰é¡¹ç›®æ¨¡æ¿é€‰æ‹©QT Widgets Application</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e560b32a44047b7aa47a91eaf91e952~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=wVi6WoHLwjdAvBZICVYAkH4ClFQ%3D" alt="image-20240304135416497" loading="lazy"/></p>
<p><strong>ï¼ˆ3ï¼‰è®¾ç½®é¡¹ç›®åç§°å’Œå­˜æ”¾è·¯å¾„</strong></p>
<p>æ³¨æ„ï¼šQTé¡¹ç›®è·¯å¾„å’Œåç§°ä¸èƒ½å‡ºç°ä¸­æ–‡å­—ç¬¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6ebe97b4ad840feb2c84a0918e20c2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=2EFfcS9gg4zS03OE2wyB%2BhfyH1U%3D" alt="image-20240304135504345" loading="lazy"/></p>
<p><strong>ï¼ˆ4ï¼‰ç¼–è¯‘å·¥å…·å¥—ä»¶é€‰æ‹©</strong></p>
<p>ç¼–è¯‘å·¥å…·å¥—ä»¶å¯ä»¥åé¢è‡ªå·±å¢åŠ ï¼Œæ¯”å¦‚å¢åŠ Androidçš„ã€‚å¥—ä»¶æ˜¯æŒ‡ Qt ç¨‹åºä»ç¼–è¯‘é“¾æ¥åˆ°è¿è¡Œç¯å¢ƒçš„å…¨éƒ¨å·¥å…·å’Œ Qt ç±»åº“çš„é›†åˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7872f1c2fa1140309ce9b66ef29c1012~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=%2F54DzLUNDFi5vPuS0fA0qzjIS%2BM%3D" alt="image-20240304135535341" loading="lazy"/></p>
<p><strong>ï¼ˆ5ï¼‰è®¾ç½®ç”Ÿæˆçš„ç±»ä¿¡æ¯</strong></p>
<p>åœ¨ç±»ä¿¡æ¯è®¾ç½®ç•Œé¢é€‰æ‹©åŸºç±»ï¼Œç›®å‰æœ‰ä¸‰ç§åŸºç±»ï¼šQMainWindowï¼ŒQWidgetï¼ŒQDialogã€‚åœ¨åŸºç±»é‡Œé€‰æ‹©QMainWindowï¼Œç±»åå’Œæ–‡ä»¶åä¼šæ ¹æ®åŸºç±»è‡ªåŠ¨ä¿®æ”¹ï¼Œä¸€èˆ¬ä¸éœ€è¦ä¿®æ”¹ï¼Œé»˜è®¤å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76a4d2ffbe63472491b4a2fffd648c0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Flaw4mItaGVMV%2BptURdBCM0n%2FPY%3D" alt="image-20240304135630942" loading="lazy"/></p>
<p><strong>ï¼ˆ6ï¼‰é¡¹ç›®ç®¡ç†</strong></p>
<p>åœ¨é¡¹ç›®ç®¡ç†ç•Œé¢å¯ä»¥è®¾ç½®ä½œä¸ºå­é¡¹ç›®ï¼Œä»¥åŠåŠ å…¥ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚è¿™ä¸¤ä¸ªåŠŸèƒ½æš‚æ—¶ç”¨ä¸åˆ°ï¼Œéƒ½ç”¨é»˜è®¤çš„  ï¼Œç„¶åç‚¹å‡» â€œå®Œæˆâ€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fcabfd49c1541a885d105f6cb23c447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=PN7CgTGjDZwb1S9QJEa6f%2FdbbEQ%3D" alt="image-20240304135652922" loading="lazy"/></p>
<p><strong>ï¼ˆ7ï¼‰åˆ›å»ºå®Œæˆ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5de4a6ce3cd84dc8ac1f686dccf13474~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=3rQgsaSMgJg%2F3LwurzIy4PUi7ug%3D" alt="image-20240304135728165" loading="lazy"/></p>
<p><strong>ï¼ˆ8ï¼‰ ç¼–è¾‘ä»£ç </strong></p>
<p>å±•å¼€main.cppæ–‡ä»¶ï¼Œæ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QApplication&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QDebug&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QLabel&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;
    <span class="hljs-comment">//MainWindow w;</span>
    <span class="hljs-comment">//w.show();</span>
    QLabel *label =<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"Hello Qt!"</span>);
    label-&gt;<span class="hljs-built_in">setGeometry</span>(<span class="hljs-number">400</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">20</span>);
    label-&gt;<span class="hljs-built_in">show</span>();
    <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">exec</span>();
}
</code></pre>
<p><strong>ä»£ç è§£æï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-number">1</span>)	<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QApplication&gt;</span>å’Œ #<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QLabel&gt;</span>æ˜¯QTçš„ç±»å£°æ˜å¤´æ–‡ä»¶ï¼Œå¯¹äºæ¯ä¸ªQTç±»éƒ½æœ‰ä¸€ä¸ªä¸è¯¥ç±»åŒåçš„å¤´æ–‡ä»¶ï¼Œåœ¨è¿™ä¸ªå¤´æ–‡ä»¶åŒ…å«äº†å¯¹è¯¥ç±»çš„å®šä¹‰ã€‚</span>
<span class="hljs-number">2</span>)	<span class="hljs-built_in">main</span>(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[]) ï¼šmainå‡½æ•°çš„æ ‡å‡†å†™æ³•ã€‚
<span class="hljs-number">3</span>)	<span class="hljs-function">QApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span>ï¼šåˆ›å»ºä¸€ä¸ªQApplicationå¯¹è±¡ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„èµ„æºï¼ŒQApplicationç±»çš„æ„é€ å‡½æ•°éœ€è¦ä¸¤ä¸ªå‚æ•°ã€‚
4)	QLabel *label </span>=<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"Hello Qt!"</span>) ï¼šåˆ›å»ºQLabelçª—å£éƒ¨ä»¶ï¼ŒQLabelæ˜¯ä¸€ä¸ªQtæä¾›çš„çª—å£éƒ¨ä»¶ï¼Œå¯ä»¥ç”¨æ¥æ˜¾ç¤ºä¸€è¡Œæ–‡æœ¬ã€‚
<span class="hljs-number">5</span>)	label-&gt;<span class="hljs-built_in">setGeometry</span>(<span class="hljs-number">400</span>,<span class="hljs-number">100</span>,<span class="hljs-number">100</span>,<span class="hljs-number">20</span>) ï¼š è®¾ç½®æ§ä»¶æ˜¾ç¤ºçš„ä½ç½®ã€‚
<span class="hljs-number">6</span>)	label-&gt;<span class="hljs-built_in">show</span>()ï¼šä½¿Qlabelåˆ›å»ºçš„çª—å£å¯è§ï¼Œå°±æ˜¯æ˜¾ç¤ºè®¾ç½®çš„æ–‡æœ¬ã€‚
<span class="hljs-number">7</span>)	<span class="hljs-keyword">return</span> a.<span class="hljs-built_in">exec</span>()ï¼šåº”ç”¨ç¨‹åºå°†æ§åˆ¶æƒä¼ é€’ç»™QTï¼Œè®©ç¨‹åºè¿›å…¥æ¶ˆæ¯å¾ªç¯ã€‚ç­‰å¾…å¯èƒ½çš„èœå•ï¼Œå·¥å…·æ¡ï¼Œé¼ æ ‡ç­‰çš„è¾“å…¥ï¼Œè¿›è¡Œå“åº”ã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ad718b513084f38883dfae9cca9bc1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=87KdZC%2BT7T5A5F5J9%2BxW4BdjyMU%3D" alt="image-20240304135908750" loading="lazy"/></p>
<p><strong>ï¼ˆ9ï¼‰è¡Œç¨‹åº</strong></p>
<p>è¿è¡Œç¨‹åºå¯ä»¥ç‚¹å‡»å·¦ä¸‹è§’çš„ä¸‰è§’å½¢ç¬¦å·æˆ–è€…æŒ‰ä¸‹å¿«æ·é”®Ctrl+Rã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a218608a8d224e829050d0265a7ddccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=KUQzh9HKKqht6bkk%2F%2BrNUQWElW4%3D" alt="image-20240304135938848" loading="lazy"/></p>
<h3 data-id="heading-51">3.5 è°ƒè¯•è¾“å‡º</h3>
<p>QTä¸­ä½¿ç”¨QDebugç±»è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚ä¸»è¦ç”¨äºè°ƒè¯•ä»£ç ï¼Œç±»ä¼¼äºstd::coutçš„æ›¿ä»£å“ï¼Œæ”¯æŒQTçš„æ•°æ®ç±»å‹ã€‚ä½¿ç”¨å‰éœ€è¦åŒ…å«å¤´æ–‡ä»¶ã€‚</p>
<p><strong>è°ƒè¯•è¾“å‡ºçš„åˆ†ç±»</strong></p>





















<table><thead><tr><th>qDebug</th><th>è°ƒè¯•ä¿¡æ¯æç¤º</th></tr></thead><tbody><tr><td>qWarning</td><td>ä¸€èˆ¬çš„è­¦å‘Šæç¤º</td></tr><tr><td>qCritical</td><td>ä¸¥é‡é”™è¯¯æç¤º</td></tr><tr><td>qFatal</td><td>è‡´å‘½é”™è¯¯æç¤º</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">qDebug</span>(<span class="hljs-string">"è°ƒè¯•ä¿¡æ¯è¾“å‡º"</span>);
<span class="hljs-built_in">qWarning</span>(<span class="hljs-string">"ä¸€èˆ¬è­¦å‘Šä¿¡æ¯è¾“å‡º"</span>);
<span class="hljs-built_in">qCritical</span>(<span class="hljs-string">"ä¸¥é‡é”™è¯¯è¾“å‡º"</span>);
<span class="hljs-built_in">qFatal</span>(<span class="hljs-string">"è‡´å‘½é”™è¯¯è¾“å‡º"</span>);
</code></pre>
<p>qDebugè¾“å‡ºçš„ä¿¡æ¯ä¼šæ‰“å°åˆ°QTè½¯ä»¶ä¸‹è¾¹çš„è¾“å‡ºé¢æ¿ã€‚</p>
<p>åœ¨ä¸ŠèŠ‚çš„HelloQtå·¥ç¨‹ä¸ŠåŠ ä¸Šè°ƒè¯•è¾“å‡ºä»£ç ï¼Œå¢åŠ çš„main.cppä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QApplication&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QDebug&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;
    <span class="hljs-comment">//MainWindow w;</span>
    <span class="hljs-comment">//w.show();</span>
    <span class="hljs-built_in">qDebug</span>()&lt;&lt;<span class="hljs-string">"QTè°ƒè¯•ä¿¡æ¯è¾“å‡º"</span>;
    <span class="hljs-type">int</span> data_int=<span class="hljs-number">8888</span>;
    <span class="hljs-built_in">qDebug</span>()&lt;&lt;data_int;
    <span class="hljs-type">float</span> data_float=<span class="hljs-number">123.888</span>;
    <span class="hljs-built_in">qDebug</span>()&lt;&lt;data_float;
    <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">exec</span>();
}
</code></pre>
<p>è¿è¡Œç¨‹åºï¼Œè§‚å¯Ÿè¾“å‡ºçš„è°ƒè¯•ä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/231fccaa47e2428bbbf5d78446befc39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=EglhN0PVbbCIIZkaIe0vn0wietA%3D" alt="image-20240304140142790" loading="lazy"/></p>
<h3 data-id="heading-52">3.6 QT Creatorå¸¸ç”¨çš„å¿«æ·é”®</h3>
<p>æŒæ¡ä¸€äº›é€‚ç”¨çš„å¿«æ·é”®ï¼Œå¯ä»¥æé«˜ç¨‹åºå¼€å‘çš„æ•ˆç‡ã€‚</p>
<p>ï¼ˆ1ï¼‰F1 é”®ï¼Œå¿«é€Ÿåˆ‡æ¢å…‰æ ‡é€‰ä¸­çš„å‡½æ•°æˆ–è€…ç±»çš„å¸®åŠ©ä¿¡æ¯ï¼ŒæŒ‰ä¸€æ¬¡åŠå±æ˜¾ç¤ºï¼ŒæŒ‰ä¸‹ä¸¤æ¬¡å…¨å±æ˜¾ç¤ºã€‚</p>
<p>ï¼ˆ2ï¼‰F2 é”®ï¼Œå¿«é€Ÿåˆ‡æ¢åˆ°å…‰æ ‡é€‰ä¸­çš„å‡½æ•°æˆ–è€…ç±»çš„æºç å®šä¹‰å¤„ã€‚</p>
<p>ï¼ˆ3ï¼‰F4é”®ï¼Œå¿«é€Ÿåœ¨æºæ–‡ä»¶å’Œå¤´æ–‡ä»¶ä¹‹é—´åˆ‡æ¢ã€‚</p>
<p>ï¼ˆ4ï¼‰Ctrl(æŒ‰ä½)+ Tabï¼Œå¿«é€Ÿåˆ‡æ¢å·²æ‰“å¼€çš„æ–‡ä»¶</p>
<p>ï¼ˆ5ï¼‰Ctrl+ I ï¼Œç¼©è¿›å…‰æ ‡é€‰ä¸­è¡Œä»£ç ï¼ˆè‡ªåŠ¨ä¸ä¸Šå±‚ä»£ç å¯¹é½ï¼‰ã€‚</p>
<p>ï¼ˆ6ï¼‰Ctrl + / ï¼Œå¿«é€Ÿæ³¨é‡Šæˆ–è€…å–æ¶ˆæ³¨é‡Šå…‰æ ‡é€‰ä¸­è¡Œã€‚</p>
<p>ï¼ˆ7ï¼‰å¿«é€Ÿä¿®æ”¹å…¨å±€å˜é‡å</p>
<p>é¼ æ ‡å…‰æ ‡é€‰ä¸­å˜é‡åï¼ŒæŒ‰ä¸‹Ctrl+Shift+Rï¼Œå½“å˜é‡åç§°å‡ºç°çº¢è‰²æ¡†è¡¨ç¤ºå·²ç»æ¿€æ´»å…¨å±€ä¿®æ”¹åŠŸèƒ½ã€‚ä¿®æ”¹ä¸€å¤„ï¼Œæ•´ä¸ªå·¥ç¨‹å¯¹åº”å˜é‡åç§°å…¨éƒ¨ä¼šä¿®æ”¹ã€‚ä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œå…‰æ ‡ç§»å¼€ï¼Œå†æŒ‰ä¸‹Ctrl+Shift+Rä¿å­˜ä¿®æ”¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a30a4452f949447b806c787af10a5937~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=fBkKbYSmmdln5tC5ANBqpJFsINY%3D" alt="image-20240304140242113" loading="lazy"/></p>
<p>ï¼ˆ8ï¼‰å¿«é€Ÿä¿®æ”¹å…¨å±€å‡½æ•°å</p>
<p>å¿«æ·æ–¹å¼ä¸å˜é‡ä¿®æ”¹ä¸€æ ·æŒ‰ä¸‹Ctrl+Shift+Rï¼Œä¸€å¤„ä¿®æ”¹æ•´ä¸ªå·¥ç¨‹å¯¹åº”çš„å‡½æ•°åç§°ä¹Ÿä¼šè·Ÿç€æ”¹ã€‚é€‰ä¸­å‡½æ•°åï¼ŒæŒ‰ä¸‹Ctrl+Shift+Råæ•´ä¸ªå·¥ç¨‹çš„å¯¹åº”çš„å‡½æ•°åä¼šé«˜äº®ï¼Œå¹¶ä¸”åœ¨è½¯ä»¶ä¸‹æ–¹å¼¹å‡ºä¿®æ”¹æ¡†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/257b6eb6d3a24fe3958a93295b0a2d3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=ZB89axi8zTbcGZdO4BELLznua3E%3D" alt="image-20240304140311742" loading="lazy"/></p>
<h3 data-id="heading-53">3.7 QTå¸®åŠ©æ–‡æ¡£</h3>
<p>Qt å¸®åŠ©æ–‡æ¡£å¤ªå¤šï¼Œéš¾ä»¥å…¨éƒ¨ç¿»è¯‘æˆä¸­æ–‡ï¼Œå³ä½¿ç¿»è¯‘äº†ä¸€éƒ¨åˆ†ï¼Œç¿»è¯‘èŠ±çš„æ—¶é—´å¤ªå¤šï¼Œç¿»è¯‘æ›´æ–°çš„æ—¶æ•ˆæ€§ä¹Ÿéš¾ä»¥ä¿è¯ï¼Œæœ€ç»ˆè¿˜æ˜¯å¾—çœ‹è‹±æ–‡å¸®åŠ©ï¼ŒQtCreator é›†æˆäº†å¸®åŠ©ç³»ç»Ÿï¼ŒæŸ¥æ‰¾éå¸¸æ–¹ä¾¿ã€‚</p>
<p>æ‰“å¼€QtCreatorï¼Œé€‰æ‹©èœå•æ çš„æœ€å·¦è¾¹çš„å¸®åŠ©é€‰é¡¹ï¼Œç•Œé¢å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e206ccc87b504c52a976ef69d7061ea6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=iX29EMyPeyyiGrZqNPSJqsireoA%3D" alt="image-20240304140337833" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰æŸ¥çœ‹Qlabelæ§ä»¶çš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b5057dbb1694be19e6ab07d25f6be5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=dTxGj39tuIvXSEOXVDF7pv3tbk4%3D" alt="image-20240304140357011" loading="lazy"/></p>
<h3 data-id="heading-54">3.8 UIè®¾è®¡å¸ˆä½¿ç”¨</h3>
<p>ä¸ŠèŠ‚çš„Hello QTç¨‹åºä½¿ç”¨çº¯C++ä»£ç ç¼–å†™ï¼Œè¿™ä¸€èŠ‚ä½¿ç”¨QTç•Œé¢è®¾è®¡æ¨¡å¼å®ç°ä¸ä¸Šä¸€èŠ‚<code>Hello QTç¨‹åº</code>ä¸€æ ·çš„åŠŸèƒ½ã€‚ä»¿ç…§ç€ä¸ŠèŠ‚æ–°åˆ›å»ºä¸€ä¸ªå·¥ç¨‹ã€‚åŒå‡»æ‰“å¼€<code>mainwindow.ui</code>æ–‡ä»¶ï¼Œè¿›å…¥åˆ°UIè®¾è®¡ç•Œé¢ã€‚</p>
<p>ï¼ˆ1ï¼‰æ‹–ä¸€ä¸ªLabelæ§ä»¶åˆ°ç¼–è¾‘åŒºï¼ŒåŒå‡»Labelæ§ä»¶å¯ä»¥ä¿®æ”¹æ–‡æœ¬å†…å®¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db383ffaab0b4b93a65bda8e283489c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=qqZo29q0%2BfZIDvWRaF71%2BqP6caQ%3D" alt="image-20240304140517858" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰è¿è¡Œç¨‹åºå¯ä»¥ç‚¹å‡»å·¦ä¸‹è§’çš„ä¸‰è§’å½¢ç¬¦å·æˆ–è€…æŒ‰ä¸‹å¿«æ·é”®Ctrl+Rã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b0ed4a33df49ce87bb957f47897d4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=ZheLEFl3z5MhlVcvQeOuXNXrKDI%3D" alt="image-20240304140600717" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰UIè®¾è®¡å¸ˆç•Œé¢åŠŸèƒ½ä»‹ç»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7fa2ef9b3904859a350dd403519781d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=%2FjLD9OKJTwmtNjkNtGWcMBtL%2F18%3D" alt="image-20240304140615717" loading="lazy"/></p>
<h3 data-id="heading-55">3.9 æŒ‰é’®æ§ä»¶ç»„</h3>
<p>QT Creator UIè®¾è®¡å¸ˆç•Œé¢çš„æŒ‰é’®ç»„æˆªå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a9f14b2bbdd4d3993859d1e355f27a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=iG%2FyrkN8XYsiBseJsrxHONSx5SQ%3D" alt="image-20240304140809093" loading="lazy"/></p>
<p>ä»¥ä¸‹æ˜¯å¯¹æŒ‰é’®ç»„æ§ä»¶çš„ä¸€äº›åŠŸèƒ½ä»‹ç»ï¼š</p>
<p>ï¼ˆ1ï¼‰Push ButtonæŒ‰å‹æŒ‰é’®ï¼šæœ€æ™®é€šçš„æŒ‰é’®ï¼ŒæŒ‰(ç‚¹å‡»)æŒ‰é’®å‘½ä»¤è®¡ç®—æœºæ‰§è¡Œä¸€äº›åŠ¨ä½œï¼Œæˆ–è€…å›ç­”é—®é¢˜ï¼Œæ¯”å¦‚windowså¼€å§‹èœå•é‡Œçš„é‡å¯ï¼Œæ³¨é”€ï¼Œå…³æœºç­‰æŒ‰é’®ã€‚</p>
<p>ï¼ˆ2ï¼‰Tool Buttonå·¥å…·æŒ‰é’®ï¼šå·¥å…·æŒ‰é’®æ˜¯ä¸€ä¸ªé›†åˆï¼Œä¸€èˆ¬é›†æˆåœ¨å·¥å…·æ é‡Œã€‚æ¯”å¦‚æ‰“å¼€ï¼Œä¿å­˜ï¼Œå¤åˆ¶ï¼Œç²˜è´´ï¼Œå‰ªåˆ‡ç­‰å¸¸ç”¨çš„æ“ä½œã€‚</p>
<p>ï¼ˆ3ï¼‰Radio Buttonå•é€‰æŒ‰é’®ï¼šå•é€‰æŒ‰é’®æ˜¯ä¸¤ä¸ªä»¥ä¸Šçš„å½¢å¼å‡ºç°åœ¨ä¸€å—ï¼ŒæŒ‰é’®ä¹‹é—´æœ‰äº’æ–¥å…³ç³»ï¼Œæ¯æ¬¡åªèƒ½é€‰ä¸­ä¸€ä¸ªã€‚æ¯”å¦‚ï¼šä¸€ä¸ªäººçš„æ€§åˆ«åªèƒ½é€‰æ‹©ä¸€ä¸ªï¼Œä¸èƒ½åŒæ—¶æ˜¯ç”·æ€§åˆæ˜¯å¥³æ€§ã€‚</p>
<p>ï¼ˆ4ï¼‰Check Boxå¤é€‰æ¡†ï¼šå¤é€‰æ¡†ä¸å•é€‰æŒ‰é’®æ¦‚å¿µç›¸åï¼Œå¤é€‰æ¡†è¡¨ç¤ºå¤šä¸ªå¯ä»¥åŒæ—¶å­˜åœ¨çš„é€‰é¡¹ï¼Œæ¯”å¦‚ä¸€ä¸ªäººå¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªçˆ±å¥½ï¼Œæ¯”å¦‚è¯»ä¹¦ã€çœ‹ç”µå½±ã€çˆ¬å±±ã€æ¸¸æ³³ç­‰ã€‚</p>
<p>ï¼ˆ5ï¼‰Command Link Buttonå‘½ä»¤é“¾æ¥æŒ‰é’®ï¼šä¸€èˆ¬ç”¨æ¥æ‰“å¼€çš„çª—å£æˆ–è€…ç½‘é¡µé“¾æ¥ã€‚</p>
<p>ï¼ˆ6ï¼‰Dialog Button Boxæ ‡å‡†æŒ‰é’®ç›’ï¼šæ ‡å‡†æŒ‰é’®ç›’ç”¨äºå¯¹è¯æ¡†ç¨‹åºï¼›æ¯”å¦‚ï¼šå¸¸è§çš„ç¡®è®¤å¯¹è¯æ¡†æœ‰ â€œç¡®å®šâ€â€œå–æ¶ˆâ€ç­‰æ ‡å‡†æŒ‰é’®ï¼ŒQt å°†è¿™äº›å…¸å‹çš„æŒ‰é’®åšæˆæ ‡å‡†æŒ‰é’®ç›’ï¼Œå¹¶å°†ç›¸åº”çš„ä¿¡å·åŠ ä»¥å°è£…ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-56">3.10 å¸ƒå±€æ§ä»¶ç»„</h3>
<p>å¼€å‘ä¸€ä¸ªå›¾å½¢ç•Œé¢åº”ç”¨ç¨‹åºï¼Œç•Œé¢çš„å¸ƒå±€å½±å“åˆ°ç•Œé¢çš„ç¾è§‚ã€‚å‰é¢çš„ç¨‹åºä¸­éƒ½æ˜¯ä½¿ç”¨UIç•Œé¢æ‹–æ§ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªæŒ‰é’®ï¼Œä¼šå‡ºç°å¤§å°éš¾è°ƒæ•´ã€ä½ç½®éš¾å¯¹é½ç­‰é—®é¢˜ã€‚Qt æä¾›çš„â€œå¸ƒå±€ç®¡ç†â€œå°±å¾ˆå¥½çš„è§£å†³äº†æ§ä»¶æ‘†æ”¾çš„é—®é¢˜ã€‚</p>
<p>ä»¥ä¸‹æ˜¯UIè®¾è®¡å¸ˆç•Œé¢çš„å¸ƒå±€ç›¸å…³æ§ä»¶ç»„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89631e2c4bff4db4b4286922a496def8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=xyeGpOovOvgG8nBXDeBXp14l1OA%3D" alt="image-20240304140914361" loading="lazy"/></p>
<p><strong>åŠŸèƒ½ä»‹ç»ï¼š</strong></p>
<p>ï¼ˆ1ï¼‰Vertical Layoutï¼šå‚ç›´å¸ƒå±€</p>
<p>ï¼ˆ2ï¼‰Horizontal Layoutï¼šæ°´å¹³å¸ƒå±€</p>
<p>ï¼ˆ3ï¼‰Grid Layoutï¼šç½‘æ ¼å¸ƒå±€</p>
<p>ï¼ˆ4ï¼‰Form Layoutï¼šçª—ä½“ä¸­å¸ƒå±€</p>
<p>ï¼ˆ5ï¼‰Horizontal Spacersï¼šæ°´å¹³ç©ºæ ¼ï¼Œåœ¨å¸ƒå±€ä¸­ç”¨æ¥å ä½ã€‚</p>
<p>ï¼ˆ6ï¼‰Vertical Spacerï¼šå‚ç›´ç©ºæ ¼ï¼Œåœ¨å¸ƒå±€ä¸­ç”¨æ¥å ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/475f9b71f3ef49d1b25de6a2e0b12346~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=PLF%2FnQYYCQIba%2F4qfjabA%2FH0OTk%3D" alt="image-20240304140956243" loading="lazy"/></p>
<h3 data-id="heading-57">3.11 åŸºæœ¬å¸ƒå±€æ§ä»¶</h3>
<p>åœ¨UIè®¾è®¡ç•Œé¢æ·»åŠ ä¸€ä¸ªå¸ƒå±€æ§ä»¶ï¼Œç„¶åå°†éœ€è¦å¸ƒå±€çš„å…¶ä»–æ§ä»¶æ”¾å…¥å¸ƒå±€æ§ä»¶ä¸­å³å¯å®Œæˆå¸ƒå±€ï¼Œå¸ƒå±€æ§ä»¶å¯ä»¥äº’ç›¸åµŒå¥—ä½¿ç”¨ã€‚ï¼ˆæœ¬èŠ‚åªä»‹ç»åŸºæœ¬å¸ƒå±€æ§ä»¶çš„ä½¿ç”¨ï¼‰</p>
<p><strong>ä»¥ä¸‹æ˜¯4ç§å¸ƒå±€æ§ä»¶çš„æ•ˆæœï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aba84d7044e54b1baa2deb483323bbbc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=GBIXrDCNJAABt0TQ9ZrIjLI1kcY%3D" alt="image-20240304141035428" loading="lazy"/></p>
<h3 data-id="heading-58">3.12 UIè®¾è®¡å¸ˆçš„å¸ƒå±€åŠŸèƒ½</h3>
<p>åœ¨UIè®¾è®¡ç•Œé¢çš„å·¦ä¸Šè§’æœ‰ä¸€æ’å¿«æ·çš„å¸ƒå±€é€‰é¡¹ï¼Œä½¿ç”¨æ—¶é€‰ä¸­ä¸¤ä¸ªä»¥ä¸Šçš„æ§ä»¶ï¼Œç‚¹å‡»å…¶ä¸­ä¸€ç§å¸ƒå±€æ–¹å¼å°±å¯ä»¥åˆ‡æ¢å¸ƒå±€ã€‚</p>
<p>ä»¥ä¸‹ä¸ºå¸ƒå±€çš„ç®€å•ç¤ºä¾‹å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4026b618e45f4672bdc0580e4ad3459f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=a6IvwcA4KonCvaskw1bGJ5aBtjM%3D" alt="image-20240304141115657" loading="lazy"/></p>
<p>ï¼ˆ1ï¼‰ä¸ºå¸ƒå±€çš„é€‰é¡¹ã€‚</p>
<p>ï¼ˆ2ï¼‰æ§ä»¶å±‚æ¬¡å›¾ï¼Œå¯ä»¥çœ‹åˆ°æ§ä»¶çš„å¸ƒå±€æ‘†æ”¾å±‚æ¬¡ã€‚</p>
<p>å¦‚æœæƒ³è¦æ§åˆ¶æŸä¸ªæ§ä»¶çš„å›ºå®šå¤§å°ï¼Œä¸éšç€å¸ƒå±€æ”¹å˜å¤§å°ï¼Œå¯ä»¥é™å®šæœ€å¤§æœ€å°å°ºå¯¸ã€‚é€‰ä¸­æ§ä»¶é¼ æ ‡å³é”®--&gt;å¤§å°é™å®š-&gt;è®¾ç½®å¤§å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c0f3f0b868d4cb7b62fdf11c764ac26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=pgvp9tIWwImDplJyMfJ%2By7a1eGQ%3D" alt="image-20240304141311256" loading="lazy"/></p>
<p><strong>æ°´å¹³å¸ƒå±€ä¸å‚ç›´å¸ƒå±€ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fac6c6f1d9734a75a789b7d795142e4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Ol%2BvOLpM2wdoUmQvK%2FPpTMggITQ%3D" alt="image-20240304141335977" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02127c0ed419463e828ccd7d5b73f1cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=5blCaPdcj%2FieClN4FQonLuxSQVI%3D" alt="image-20240304141347209" loading="lazy"/></p>
<p>æ°´å¹³å¸ƒå±€å°†æ§ä»¶æŒ‰ç…§æ°´å¹³æ–¹å¼æ‘†æ”¾ï¼Œå‚ç›´å¸ƒå±€å°†æ§ä»¶æŒ‰ç…§å‚ç›´æ–¹å¼æ‘†æ”¾ã€‚é¼ æ ‡æ‹–åŠ¨çº¢è‰²å¸ƒå±€æ¡†ä¸Šçš„é»‘è‰²æ–¹ç‚¹ï¼Œå¯ä»¥è°ƒæ•´å¸ƒå±€æ¡†çš„å¤§å°ã€‚éšç€å¸ƒå±€æ¡†çš„å°ºå¯¸å˜åŒ–ï¼ŒåŒ…å«çš„æ§ä»¶é«˜åº¦ä¸ä¼šå˜åŒ–ï¼Œå®½åº¦ä¼šéšç€å¸ƒå±€æ¡†å˜åŒ–ã€‚é€‰ä¸­å…¶ä¸­ä¸€ä¸ªæ§ä»¶ç„¶åé¼ æ ‡å³é”®&gt;ç‚¹å‡»å¤§å°é™å®šï¼Œå¯ä»¥é™å®šæ§ä»¶çš„æœ€å¤§å’Œæœ€å°å°ºå¯¸ã€‚</p>
<p><strong>åˆ†è£‚å™¨æ°´å¹³å¸ƒå±€ä¸å‚ç›´å¸ƒå±€ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32e29b498be2486aa831e840f358d874~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=MH63OXdJ57fox%2BdZreiLlIFEuRY%3D" alt="image-20240304141412287" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92e0d7042ce84cb486168298b6354efd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=37VMLECp0RFsxBib%2BaTiZtfrVTI%3D" alt="image-20240304141426088" loading="lazy"/></p>
<p>åˆ†è£‚å™¨æ–¹å¼å¸ƒå±€ï¼ŒåŒ…å«æ§ä»¶çš„é«˜åº¦å’Œå®½åº¦éƒ½ä¼šéšç€å¸ƒå±€æ¡†çš„æ‹‰ä¼¸è€Œæ”¹å˜ã€‚é€‰ä¸­å…¶ä¸­ä¸€ä¸ªæ§ä»¶ç„¶åé¼ æ ‡å³é”®&gt;ç‚¹å‡»å¤§å°é™å®šï¼Œå¯ä»¥é™å®šæ§ä»¶çš„æœ€å¤§å’Œæœ€å°å°ºå¯¸ã€‚</p>
<p><strong>çª—ä½“ä¸­å¸ƒå±€ä¸æ …æ ¼å¸ƒå±€ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8dc789e7d2459b8eca3a0a413452f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=tG4SXFS5id6Mr6cve36qlplZP9g%3D" alt="image-20240304141449390" loading="lazy"/></p>
<p>æ …æ ¼ï¼ˆç½‘æ ¼ï¼‰å¸ƒå±€å™¨çš„åŸºæœ¬å•å…ƒæ˜¯å•å…ƒæ ¼ï¼Œè€Œçª—ä½“ä¸­å¸ƒå±€ï¼ˆè¡¨å•ï¼‰çš„åŸºæœ¬å•å…ƒæ˜¯è¡Œã€‚éšç€å¸ƒå±€æ¡†çš„å°ºå¯¸å˜åŒ–ï¼ŒåŒ…å«çš„æ§ä»¶é«˜åº¦ä¸ä¼šå˜åŒ–ï¼Œå®½åº¦ä¼šéšç€å¸ƒå±€æ¡†å˜åŒ–ã€‚</p>
<p><strong>è®¾ç½®ä¸»çª—ä½“å¸ƒå±€æ–¹å¼ï¼š</strong></p>
<p>è®¾ç½®ä¸»çª—ä½“çš„å¸ƒå±€æ–¹å¼åï¼ŒåŒ…å«åœ¨ä¸»çª—ä½“å†…çš„æ§ä»¶ä¼šéšç€çª—ä½“çš„æ‹‰ä¼¸è‡ªåŠ¨è°ƒæ•´å¤§å°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b46dce499a7e4476bfe71edb3f57675a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=j6H4seKpLE3JeWHWxLMb%2Beq7FdY%3D" alt="image-20240304141518067" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ad30da169cb472283fbc8c940e95c77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=7RThh6BMwx504GGmha%2FLqwcjYMA%3D" alt="image-20240304141529003" loading="lazy"/></p>
<h2 data-id="heading-59">å››ã€ä¸Šä½æœºå¼€å‘</h2>
<p>å½“å‰é¡¹ç›®ä½¿ç”¨çš„ç›¸å…³è½¯ä»¶å·¥å…·ã€æ¨¡å—æºç å·²ç»ä¸Šä¼ åˆ°ç½‘ç›˜ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fccnr8sukk85n.feishu.cn%2Fwiki%2FQjY8weDYHibqRYkFP2qcA9aGnvb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ccnr8sukk85n.feishu.cn/wiki/QjY8weDYHibqRYkFP2qcA9aGnvb?from=from_copylink" ref="nofollow noopener noreferrer">ccnr8sukk85n.feishu.cn/wiki/QjY8weâ€¦</a></p>
<h3 data-id="heading-60">4.1 Qtå¼€å‘ç¯å¢ƒå®‰è£…</h3>
<p>Qtçš„ä¸­æ–‡å®˜ç½‘ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.qt.io%2Fzh-cn%2F!%255Bimage-20221207160550486%255D(https%3A%2F%2Fled-obs.obs.cn-north-1.myhuaweicloud.com%2FBlog%2Fimg%2Fimage-20221207160550486.png)" target="_blank" title="https://www.qt.io/zh-cn/!%5Bimage-20221207160550486%5D(https://led-obs.obs.cn-north-1.myhuaweicloud.com/Blog/img/image-20221207160550486.png)" ref="nofollow noopener noreferrer">www.qt.io/zh-cn/![imaâ€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efe081cf84ef4352b544edc732a114b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=E9H4FZjiuLgrwIv4rqu3rl5lDZE%3D" alt="image-20221207160606892" loading="lazy"/></p>
<p>QT5.12.6çš„ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdownload.qt.io%2Farchive%2Fqt%2F5.12%2F5.12.6" target="_blank" title="https://download.qt.io/archive/qt/5.12/5.12.6" ref="nofollow noopener noreferrer">download.qt.io/archive/qt/â€¦</a></p>
<p><strong>æ‰“å¼€ä¸‹è½½é“¾æ¥åé€‰æ‹©ä¸‹é¢çš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e09c8bfafbf04bf8a1701fb6911108ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Z3sEaVnnWldBYgJ3SG%2BoZuHc99k%3D" alt="" loading="lazy"/></p>
<p><strong>å¦‚æœä¸‹è½½ä¸äº†ï¼Œå¯ä»¥åœ¨ç½‘ç›˜é‡Œæ‰¾åˆ°å®‰è£…åŒ…ä¸‹è½½ï¼š</strong>    é£ä¹¦æ–‡æ¡£è®°å½•çš„ç½‘ç›˜åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fccnr8sukk85n.feishu.cn%2Fwiki%2FQjY8weDYHibqRYkFP2qcA9aGnvb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ccnr8sukk85n.feishu.cn/wiki/QjY8weDYHibqRYkFP2qcA9aGnvb?from=from_copylink" ref="nofollow noopener noreferrer">ccnr8sukk85n.feishu.cn/wiki/QjY8weâ€¦</a></p>
<p>è½¯ä»¶å®‰è£…æ—¶æ–­ç½‘å®‰è£…ï¼Œå¦åˆ™ä¼šæç¤ºè¾“å…¥è´¦æˆ·ã€‚</p>
<p>å®‰è£…çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªå¤é€‰æ¡†é‡Œçš„ç¼–è¯‘å™¨å¯ä»¥å…¨é€‰ï¼Œç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ç»§ç»­å®‰è£…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4a6adb7af5742d6936a6f3ff605e390~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Lk8aAAze%2Fgp9%2Bt8y8VotdU2bsss%3D" alt="image-20221203151742653" loading="lazy"/></p>
<p><strong>é€‰æ‹©ç¼–è¯‘å™¨ï¼š ï¼ˆä¸€å®šè¦çœ‹æ¸…æ¥šäº†ï¼‰</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e09e9021ec534fd792e01d8e443f856f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=aIdMc1WGjlV%2BU%2FzIeGfQ%2B3%2B%2FaIA%3D" alt="image-20241028152725134" loading="lazy"/></p>
<h3 data-id="heading-61">4.2 æ–°å»ºä¸Šä½æœºå·¥ç¨‹</h3>
<p>å‰é¢2è®²è§£äº†éœ€è¦ç”¨çš„APIæ¥å£ï¼Œæ¥ä¸‹æ¥å°±ä½¿ç”¨Qtè®¾è®¡ä¸Šä½æœºï¼Œè®¾è®¡ç•Œé¢ï¼Œå®Œæˆæ•´ä½“ä¸Šä½æœºçš„é€»è¾‘è®¾è®¡ã€‚</p>
<p>ã€1ã€‘æ–°å»ºå·¥ç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ec690405eb4da9a8d9c042a011de15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=UYAvdNFLCxzjiu7DgFJ1%2FMsf9eI%3D" alt="image-20240117144052547" loading="lazy"/></p>
<p>ã€2ã€‘è®¾ç½®é¡¹ç›®çš„åç§°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac5345c4eb514b93927a55da0b7d5cb3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=pfgmK1vzkILs8rULSujrSFDTsLs%3D" alt="image-20250420200347498" loading="lazy"/></p>
<p>ã€3ã€‘é€‰æ‹©ç¼–è¯‘ç³»ç»Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64428c6047f44c348349eae7d139a7df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=pzg766wHBJbAbvei6NgfMSoCsZQ%3D" alt="image-20240117144239681" loading="lazy"/></p>
<p>ã€4ã€‘é€‰æ‹©é»˜è®¤ç»§æ‰¿çš„ç±»</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/214a2aa185524b4ea9b3bc58a1e2be46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=3tiGjWOKfHCcIMaPOXFQdNJU8A8%3D" alt="image-20240117144302275" loading="lazy"/></p>
<p>ã€5ã€‘é€‰æ‹©ç¼–è¯‘å™¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf96330cfd64a45a71f68121376e0cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=cE%2F%2FpizIozA0my202dm60P%2Fv9Ow%3D" alt="image-20241028153603487" loading="lazy"/></p>
<p>ã€6ã€‘ç‚¹å‡»å®Œæˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1237dfea39d4a0eaeaa4cbeacf367a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=enV8ue7G3ChfTNmOsGfYfS3UllQ%3D" alt="image-20240117144354252" loading="lazy"/></p>
<p>ã€7ã€‘å·¥ç¨‹åˆ›å»ºå®Œæˆ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1a22eec2947487ab503c8f2f235c4a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=MwhHDqDEbkV%2FgDKiDlxYxNZUNIg%3D" alt="image-20250420200411303" loading="lazy"/></p>
<h3 data-id="heading-62">4.3 åˆ‡æ¢ç¼–è¯‘å™¨</h3>
<p>åœ¨å·¦ä¸‹è§’æ˜¯å¯ä»¥åˆ‡æ¢ç¼–è¯‘å™¨çš„ã€‚ å¯ä»¥é€‰æ‹©ç”¨ä»€ä¹ˆæ ·çš„ç¼–è¯‘å™¨ç¼–è¯‘ç¨‹åºã€‚</p>
<p>ç›®å‰æ–°å»ºå·¥ç¨‹çš„æ—¶å€™é€‰æ‹©äº†2ç§ç¼–è¯‘å™¨ã€‚ ä¸€ç§æ˜¯<code>mingw32</code>è¿™ä¸ªç¼–è¯‘Windowsä¸‹è¿è¡Œçš„ç¨‹åºã€‚ ä¸€ç§æ˜¯<code>Android</code>ç¼–è¯‘å™¨ï¼Œå¯ä»¥ç”Ÿæˆ<code>Android</code>æ‰‹æœºAPPã€‚</p>
<p><code>ä¸è¿‡è¦æ³¨æ„ï¼šAndroidçš„ç¼–è¯‘å™¨éœ€è¦é…ç½®ä¸€äº›ç¯å¢ƒæ‰å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œè¿™ä¸ªå¤§å®¶å¯ä»¥ç½‘ä¸Šæ‰¾æ‰¾æ•™ç¨‹é…ç½®ä¸€ä¸‹å°±è¡Œäº†ã€‚</code></p>
<p>windowsçš„ç¼–è¯‘å™¨å°±æ²¡æœ‰è¿™ä¹ˆéº»çƒ¦ï¼Œå®‰è£…å¥½Qtå°±å¯ä»¥ç¼–è¯‘ä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢æˆ‘è¿™é‡Œå°±é€‰æ‹©çš„ <code>mingw32</code>è¿™ä¸ªç¼–è¯‘å™¨ï¼Œç¼–è¯‘Windowsä¸‹è¿è¡Œçš„ç¨‹åºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/014b8da88b874ac7931467cfcecfb868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=LAfnvqNnGVJUl5No2YwaI8Umlpo%3D" alt="image-20250420200424965" loading="lazy"/></p>
<h3 data-id="heading-63">4.4 ç¼–è¯‘æµ‹è¯•åŠŸèƒ½</h3>
<p>åˆ›å»ºå®Œæ¯•ä¹‹åï¼Œç¼–è¯‘æµ‹è¯•ä¸€ä¸‹åŠŸèƒ½æ˜¯å¦OKã€‚</p>
<p>ç‚¹å‡»å·¦ä¸‹è§’çš„<code>ç»¿è‰²ä¸‰è§’å½¢æŒ‰é’®</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f15a3c3c47704896baa148320a9ac299~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=WOer2S2RXtdhfz%2B%2B3RaOMipzUCo%3D" alt="image-20250420200442769" loading="lazy"/></p>
<p>æ­£å¸¸è¿è¡Œå°±å¯ä»¥çœ‹åˆ°å¼¹å‡ºä¸€ä¸ªç™½è‰²çš„æ¡†æ¡†ã€‚è¿™å°±è¡¨ç¤ºå·¥ç¨‹ç¯å¢ƒæ²¡æœ‰é—®é¢˜äº†ã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥æ”¾å¿ƒçš„è®¾è®¡ç•Œé¢äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a22a20938bae449f96c04077ff18b298~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=M48pdmITha0rWlPOuPPkHMrlaD0%3D" alt="image-20250420200457319" loading="lazy"/></p>
<h3 data-id="heading-64">4.5 è®¾è®¡UIç•Œé¢ä¸å·¥ç¨‹é…ç½®</h3>
<h4 data-id="heading-65">ã€1ã€‘æ‰“å¼€UIæ–‡ä»¶</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18e4e44f35614e5197e6784cf4797b87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=HTI99axoLMS6wJJfhB6C7ivMppQ%3D" alt="image-20250420200514220" loading="lazy"/></p>
<p><strong>æ‰“å¼€é»˜è®¤çš„ç•Œé¢å¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/627274d7d20c476d80999704f374dc0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=LesQdPSjly3p0uT%2BUMLX%2BpuqPac%3D" alt="image-20250420200526194" loading="lazy"/></p>
<h4 data-id="heading-66">ã€2ã€‘å¼€å§‹è®¾è®¡ç•Œé¢</h4>
<p>æ ¹æ®è‡ªå·±éœ€æ±‚è®¾è®¡ç•Œé¢ã€‚</p>
<h3 data-id="heading-67">4.6 è®¾è®¡ä»£ç </h3>
<h4 data-id="heading-68">è®¾è®¡è¯´æ˜</h4>
<ol>
<li><strong>çº¯ä»£ç æ„å»º UI</strong>ï¼šä¸ä¾èµ– <code>.ui</code> æ–‡ä»¶ï¼Œåªéœ€è¦æŠŠ <code>.h</code> å’Œ <code>.cpp</code> æ–‡ä»¶å¤åˆ¶åˆ°é¡¹ç›®ä¸­å³å¯ï¼Œæ— éœ€é…ç½® UI è®¾è®¡å™¨ã€‚</li>
<li><strong>MQTT é€šä¿¡</strong>ï¼šç”±äº Qt å®˜æ–¹çš„ <code>QtMqtt</code> æ¨¡å—åœ¨æ ‡å‡†å®‰è£…åŒ…ä¸­ä¸åŒ…å«ï¼ˆéœ€è¦è‡ªè¡Œç¼–è¯‘ï¼‰ï¼Œä¸ºäº†ä¿è¯å…¼å®¹æ€§å’Œé™ä½é—¨æ§›ï¼Œ<strong>æœ¬ä»£ç ç¤ºä¾‹å‡è®¾å·²ç»é…ç½®å¥½äº† QtMqtt ç¯å¢ƒ</strong>ã€‚
<ul>
<li><em>å¦‚æœçš„ Qt ç¯å¢ƒæ²¡æœ‰ Mqtt æ¨¡å—ï¼Œéœ€è¦å…ˆç¼–è¯‘å®‰è£… <code>QtMqtt</code>ï¼Œæˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚ QMQTTï¼‰ã€‚</em></li>
</ul>
</li>
<li><strong>æ•°æ®åè®®</strong>ï¼šé‡‡ç”¨æ ‡å‡†çš„ JSON æ ¼å¼ä¸ STM32 é€šä¿¡ã€‚</li>
<li><strong>åŠŸèƒ½è¦†ç›–</strong>ï¼šåŒ…å«äº†è¿æ¥äº‘å¹³å°ã€å®æ—¶æ•°æ®æ˜¾ç¤ºï¼ˆæ¸©æ¹¿åº¦ã€é‡é‡ã€å…‰ç…§ç­‰ï¼‰ã€é˜ˆå€¼ä¸‹å‘è®¾ç½®ã€æ—¥å¿—æ˜¾ç¤ºã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-69">1. é¡¹ç›®é…ç½®æ–‡ä»¶ (BeehiveMonitor.pro)</h4>
<p>åœ¨ <code>.pro</code> æ–‡ä»¶ä¸­ï¼Œå¿…é¡»æ·»åŠ  <code>mqtt</code> æ¨¡å—ï¼ˆå¦‚æœä½¿ç”¨çš„æ˜¯å®˜æ–¹æ¨¡å—ï¼‰ã€‚</p>
<pre><code class="hljs language-pro" lang="pro">QT       += core gui network mqtt

greaterThan(QT_MAJOR_VERSION, 4): QT += widgets

CONFIG += c++11

# You can rename the target as you like
TARGET = BeehiveMonitor
TEMPLATE = app

SOURCES += \
    main.cpp \
    mainwindow.cpp

HEADERS += \
    mainwindow.h
</code></pre>
<hr/>
<h4 data-id="heading-70">2. å¤´æ–‡ä»¶ (mainwindow.h)</h4>
<p>å®šä¹‰äº†ç•Œé¢å…ƒç´ å’Œä¸šåŠ¡é€»è¾‘ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> MAINWINDOW_H</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MAINWINDOW_H</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QMainWindow&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QMqttClient&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QLabel&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QLineEdit&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QPushButton&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QTextEdit&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QGroupBox&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QGridLayout&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QSpinBox&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QJsonDocument&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QJsonObject&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QDateTime&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainWindow</span> : <span class="hljs-keyword">public</span> QMainWindow
{
    Q_OBJECT

<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">MainWindow</span>(QWidget *parent = <span class="hljs-literal">nullptr</span>);
    ~<span class="hljs-built_in">MainWindow</span>();

<span class="hljs-keyword">private</span> slots:
    <span class="hljs-comment">// MQTT Slots</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onConnectClicked</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onSubscribeClicked</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onPublishThresholdClicked</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">updateLogStateChange</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">brokerDisconnected</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">onMessageReceived</span><span class="hljs-params">(<span class="hljs-type">const</span> QByteArray &amp;message, <span class="hljs-type">const</span> QMqttTopicName &amp;topic)</span></span>;

<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// --- UI åˆå§‹åŒ–å‡½æ•° ---</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">initUI</span><span class="hljs-params">()</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setupMqtt</span><span class="hljs-params">()</span></span>;

    <span class="hljs-comment">// --- MQTT å®¢æˆ·ç«¯ ---</span>
    QMqttClient *m_client;

    <span class="hljs-comment">// --- UI æ§ä»¶ ---</span>
    <span class="hljs-comment">// 1. è¿æ¥è®¾ç½®åŒºåŸŸ</span>
    QLineEdit *le_host;
    QLineEdit *le_port;
    QLineEdit *le_clientId;
    QLineEdit *le_username;
    QLineEdit *le_password;
    QLineEdit *le_sub_topic; <span class="hljs-comment">// è®¢é˜…ä¸»é¢˜ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</span>
    QLineEdit *le_pub_topic; <span class="hljs-comment">// å‘å¸ƒä¸»é¢˜ï¼ˆä¸‹å‘å‘½ä»¤ï¼‰</span>
    QPushButton *btn_connect;
    QPushButton *btn_subscribe;

    <span class="hljs-comment">// 2. å®æ—¶æ•°æ®é€šè¿‡ Label æ˜¾ç¤º</span>
    QLabel *lbl_temp_in;
    QLabel *lbl_humi_in;
    QLabel *lbl_temp_out;
    QLabel *lbl_humi_out;
    QLabel *lbl_weight;
    QLabel *lbl_sound;
    QLabel *lbl_light;
    QLabel *lbl_vibration; <span class="hljs-comment">// çŠ¶æ€ï¼šæ­£å¸¸/å¼‚å¸¸</span>

    <span class="hljs-comment">// 3. é˜ˆå€¼è®¾ç½®</span>
    QSpinBox *sb_temp_max;
    QSpinBox *sb_humi_max;
    QDoubleSpinBox *sb_weight_min; <span class="hljs-comment">// æ¯”å¦‚å¤±é‡æŠ¥è­¦</span>
    QSpinBox *sb_sound_max;
    QPushButton *btn_set_threshold;

    <span class="hljs-comment">// 4. æ—¥å¿—åŒºåŸŸ</span>
    QTextEdit *txt_log;

    <span class="hljs-comment">// --- è¾…åŠ©å‡½æ•° ---</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">log</span><span class="hljs-params">(<span class="hljs-type">const</span> QString &amp;msg)</span></span>;
};

<span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">// MAINWINDOW_H</span></span>
</code></pre>
<hr/>
<h4 data-id="heading-71">3. æºæ–‡ä»¶ (mainwindow.cpp)</h4>
<p>å®ç°äº†æ ¸å¿ƒé€»è¾‘ï¼šè§£æ JSONã€æ›´æ–° UIã€å‘é€ MQTT æŒ‡ä»¤ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QVBoxLayout&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QMessageBox&gt;</span></span>

MainWindow::<span class="hljs-built_in">MainWindow</span>(QWidget *parent)
    : <span class="hljs-built_in">QMainWindow</span>(parent)
{
    <span class="hljs-built_in">initUI</span>();
    <span class="hljs-built_in">setupMqtt</span>();
}

MainWindow::~<span class="hljs-built_in">MainWindow</span>()
{
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::initUI</span><span class="hljs-params">()</span>
</span>{
    QWidget *centralWidget = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QWidget</span>(<span class="hljs-keyword">this</span>);
    <span class="hljs-built_in">setCentralWidget</span>(centralWidget);
    QVBoxLayout *mainLayout = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QVBoxLayout</span>(centralWidget);

    <span class="hljs-comment">// === 1. è¿æ¥é…ç½®åŒºåŸŸ ===</span>
    QGroupBox *grpSettings = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QGroupBox</span>(<span class="hljs-string">"åä¸ºäº‘ MQTT è¿æ¥é…ç½®"</span>, <span class="hljs-keyword">this</span>);
    QGridLayout *layoutSettings = <span class="hljs-keyword">new</span> QGridLayout;

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"æœåŠ¡å™¨åœ°å€:"</span>), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    le_host = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>(<span class="hljs-string">"iot-mqtts.cn-north-4.myhuaweicloud.com"</span>); <span class="hljs-comment">// ç¤ºä¾‹åœ°å€</span>
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_host, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"ç«¯å£:"</span>), <span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
    le_port = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>(<span class="hljs-string">"1883"</span>);
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_port, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"Client ID:"</span>), <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
    le_clientId = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>(<span class="hljs-string">"Beehive_PC_Client"</span>);
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_clientId, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"ç”¨æˆ·å:"</span>), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
    le_username = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>();
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_username, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å¯†ç :"</span>), <span class="hljs-number">2</span>, <span class="hljs-number">0</span>);
    le_password = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>();
    le_password-&gt;<span class="hljs-built_in">setEchoMode</span>(QLineEdit::Password);
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_password, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>);

    btn_connect = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QPushButton</span>(<span class="hljs-string">"è¿æ¥æœåŠ¡å™¨"</span>);
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(btn_connect, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"è®¢é˜…Topic (æ¥æ”¶):"</span>), <span class="hljs-number">3</span>, <span class="hljs-number">0</span>);
    le_sub_topic = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>(<span class="hljs-string">"/beehive/data"</span>); <span class="hljs-comment">// éœ€æ ¹æ®åä¸ºäº‘è§„åˆ™ä¿®æ”¹</span>
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_sub_topic, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
    
    btn_subscribe = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QPushButton</span>(<span class="hljs-string">"è®¢é˜…"</span>);
    btn_subscribe-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">false</span>);
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(btn_subscribe, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);

    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å‘å¸ƒTopic (å‘½ä»¤):"</span>), <span class="hljs-number">4</span>, <span class="hljs-number">0</span>);
    le_pub_topic = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLineEdit</span>(<span class="hljs-string">"/beehive/cmd"</span>); <span class="hljs-comment">// éœ€æ ¹æ®åä¸ºäº‘è§„åˆ™ä¿®æ”¹</span>
    layoutSettings-&gt;<span class="hljs-built_in">addWidget</span>(le_pub_topic, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

    grpSettings-&gt;<span class="hljs-built_in">setLayout</span>(layoutSettings);
    mainLayout-&gt;<span class="hljs-built_in">addWidget</span>(grpSettings);

    <span class="hljs-comment">// === 2. å®æ—¶ç›‘æ§é¢æ¿ ===</span>
    QGroupBox *grpData = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QGroupBox</span>(<span class="hljs-string">"èœ‚ç®±å®æ—¶ç›‘æµ‹æ•°æ®"</span>, <span class="hljs-keyword">this</span>);
    QGridLayout *layoutData = <span class="hljs-keyword">new</span> QGridLayout;

    <span class="hljs-comment">// æ ·å¼è®¾ç½®</span>
    QString labelStyle = <span class="hljs-string">"QLabel { font-size: 18px; font-weight: bold; color: #2E8B57; }"</span>;
    
    <span class="hljs-comment">// åˆå§‹åŒ– Label</span>
    lbl_temp_in = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0.0 â„ƒ"</span>); lbl_temp_in-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_humi_in = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0.0 %"</span>); lbl_humi_in-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_temp_out = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0.0 â„ƒ"</span>); lbl_temp_out-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_humi_out = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0.0 %"</span>); lbl_humi_out-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_weight = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0.00 kg"</span>); lbl_weight-&gt;<span class="hljs-built_in">setStyleSheet</span>(<span class="hljs-string">"QLabel { font-size: 18px; font-weight: bold; color: blue; }"</span>);
    lbl_sound = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0 dB"</span>); lbl_sound-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_light = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"0 Lx"</span>); lbl_light-&gt;<span class="hljs-built_in">setStyleSheet</span>(labelStyle);
    lbl_vibration = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"æ­£å¸¸"</span>); lbl_vibration-&gt;<span class="hljs-built_in">setStyleSheet</span>(<span class="hljs-string">"QLabel { font-size: 18px; font-weight: bold; color: green; }"</span>);

    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å†…éƒ¨æ¸©åº¦:"</span>), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_temp_in, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å†…éƒ¨æ¹¿åº¦:"</span>), <span class="hljs-number">0</span>, <span class="hljs-number">2</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_humi_in, <span class="hljs-number">0</span>, <span class="hljs-number">3</span>);
    
    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å¤–éƒ¨æ¸©åº¦:"</span>), <span class="hljs-number">1</span>, <span class="hljs-number">0</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_temp_out, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å¤–éƒ¨æ¹¿åº¦:"</span>), <span class="hljs-number">1</span>, <span class="hljs-number">2</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_humi_out, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>);

    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"èœ‚ç®±é‡é‡:"</span>), <span class="hljs-number">2</span>, <span class="hljs-number">0</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_weight, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>);
    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å…‰ç…§å¼ºåº¦:"</span>), <span class="hljs-number">2</span>, <span class="hljs-number">2</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_light, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);

    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å£°éŸ³å¼ºåº¦:"</span>), <span class="hljs-number">3</span>, <span class="hljs-number">0</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_sound, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>);
    layoutData-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"éœ‡åŠ¨çŠ¶æ€:"</span>), <span class="hljs-number">3</span>, <span class="hljs-number">2</span>); layoutData-&gt;<span class="hljs-built_in">addWidget</span>(lbl_vibration, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>);

    grpData-&gt;<span class="hljs-built_in">setLayout</span>(layoutData);
    mainLayout-&gt;<span class="hljs-built_in">addWidget</span>(grpData);

    <span class="hljs-comment">// === 3. é˜ˆå€¼è®¾ç½®é¢æ¿ ===</span>
    QGroupBox *grpControl = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QGroupBox</span>(<span class="hljs-string">"æŠ¥è­¦é˜ˆå€¼é…ç½®"</span>, <span class="hljs-keyword">this</span>);
    QHBoxLayout *layoutControl = <span class="hljs-keyword">new</span> QHBoxLayout;

    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"æœ€é«˜æ¸©åº¦:"</span>));
    sb_temp_max = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QSpinBox</span>(); sb_temp_max-&gt;<span class="hljs-built_in">setRange</span>(<span class="hljs-number">0</span>, <span class="hljs-number">60</span>); sb_temp_max-&gt;<span class="hljs-built_in">setValue</span>(<span class="hljs-number">38</span>);
    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(sb_temp_max);

    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"æœ€å°é‡é‡(kg):"</span>));
    sb_weight_min = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QDoubleSpinBox</span>(); sb_weight_min-&gt;<span class="hljs-built_in">setRange</span>(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>); sb_weight_min-&gt;<span class="hljs-built_in">setValue</span>(<span class="hljs-number">5.0</span>);
    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(sb_weight_min);

    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">QLabel</span>(<span class="hljs-string">"å£°éŸ³é˜ˆå€¼(dB):"</span>));
    sb_sound_max = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QSpinBox</span>(); sb_sound_max-&gt;<span class="hljs-built_in">setRange</span>(<span class="hljs-number">0</span>, <span class="hljs-number">120</span>); sb_sound_max-&gt;<span class="hljs-built_in">setValue</span>(<span class="hljs-number">80</span>);
    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(sb_sound_max);

    btn_set_threshold = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QPushButton</span>(<span class="hljs-string">"ä¸‹å‘é…ç½®"</span>);
    btn_set_threshold-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">false</span>);
    layoutControl-&gt;<span class="hljs-built_in">addWidget</span>(btn_set_threshold);

    grpControl-&gt;<span class="hljs-built_in">setLayout</span>(layoutControl);
    mainLayout-&gt;<span class="hljs-built_in">addWidget</span>(grpControl);

    <span class="hljs-comment">// === 4. æ—¥å¿—æ˜¾ç¤º ===</span>
    txt_log = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QTextEdit</span>();
    txt_log-&gt;<span class="hljs-built_in">setReadOnly</span>(<span class="hljs-literal">true</span>);
    txt_log-&gt;<span class="hljs-built_in">setMaximumHeight</span>(<span class="hljs-number">150</span>);
    mainLayout-&gt;<span class="hljs-built_in">addWidget</span>(txt_log);

    <span class="hljs-comment">// ä¿¡å·è¿æ¥</span>
    <span class="hljs-built_in">connect</span>(btn_connect, &amp;QPushButton::clicked, <span class="hljs-keyword">this</span>, &amp;MainWindow::onConnectClicked);
    <span class="hljs-built_in">connect</span>(btn_subscribe, &amp;QPushButton::clicked, <span class="hljs-keyword">this</span>, &amp;MainWindow::onSubscribeClicked);
    <span class="hljs-built_in">connect</span>(btn_set_threshold, &amp;QPushButton::clicked, <span class="hljs-keyword">this</span>, &amp;MainWindow::onPublishThresholdClicked);

    <span class="hljs-built_in">setWindowTitle</span>(<span class="hljs-string">"æ™ºèƒ½èœ‚ç®±ç›‘æµ‹ç³»ç»Ÿ - ä¸Šä½æœº"</span>);
    <span class="hljs-built_in">resize</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::setupMqtt</span><span class="hljs-params">()</span>
</span>{
    m_client = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QMqttClient</span>(<span class="hljs-keyword">this</span>);
    
    <span class="hljs-comment">// çŠ¶æ€æ”¹å˜ä¿¡å·</span>
    <span class="hljs-built_in">connect</span>(m_client, &amp;QMqttClient::stateChanged, <span class="hljs-keyword">this</span>, &amp;MainWindow::updateLogStateChange);
    <span class="hljs-built_in">connect</span>(m_client, &amp;QMqttClient::disconnected, <span class="hljs-keyword">this</span>, &amp;MainWindow::brokerDisconnected);

    <span class="hljs-comment">// æ”¶åˆ°æ¶ˆæ¯ä¿¡å·</span>
    <span class="hljs-built_in">connect</span>(m_client, &amp;QMqttClient::messageReceived, <span class="hljs-keyword">this</span>, &amp;MainWindow::onMessageReceived);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::onConnectClicked</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-keyword">if</span> (m_client-&gt;<span class="hljs-built_in">state</span>() == QMqttClient::Disconnected) {
        m_client-&gt;<span class="hljs-built_in">setHostname</span>(le_host-&gt;<span class="hljs-built_in">text</span>());
        m_client-&gt;<span class="hljs-built_in">setPort</span>(le_port-&gt;<span class="hljs-built_in">text</span>().<span class="hljs-built_in">toInt</span>());
        m_client-&gt;<span class="hljs-built_in">setClientId</span>(le_clientId-&gt;<span class="hljs-built_in">text</span>());
        m_client-&gt;<span class="hljs-built_in">setUsername</span>(le_username-&gt;<span class="hljs-built_in">text</span>());
        m_client-&gt;<span class="hljs-built_in">setPassword</span>(le_password-&gt;<span class="hljs-built_in">text</span>());

        m_client-&gt;<span class="hljs-built_in">connectToHost</span>();
    } <span class="hljs-keyword">else</span> {
        m_client-&gt;<span class="hljs-built_in">disconnectFromHost</span>();
    }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::updateLogStateChange</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-type">const</span> QString content = QDateTime::<span class="hljs-built_in">currentDateTime</span>().<span class="hljs-built_in">toString</span>() + <span class="hljs-string">": State Change -&gt; "</span> + QString::<span class="hljs-built_in">number</span>(m_client-&gt;<span class="hljs-built_in">state</span>());
    <span class="hljs-built_in">log</span>(content);

    <span class="hljs-keyword">if</span> (m_client-&gt;<span class="hljs-built_in">state</span>() == QMqttClient::Connected) {
        btn_connect-&gt;<span class="hljs-built_in">setText</span>(<span class="hljs-string">"æ–­å¼€è¿æ¥"</span>);
        btn_subscribe-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">true</span>);
        btn_set_threshold-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">true</span>);
        <span class="hljs-built_in">log</span>(<span class="hljs-string">"æˆåŠŸè¿æ¥è‡³åä¸ºäº‘æœåŠ¡å™¨ï¼"</span>);
    } <span class="hljs-keyword">else</span> {
        btn_connect-&gt;<span class="hljs-built_in">setText</span>(<span class="hljs-string">"è¿æ¥æœåŠ¡å™¨"</span>);
        btn_subscribe-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">false</span>);
        btn_set_threshold-&gt;<span class="hljs-built_in">setEnabled</span>(<span class="hljs-literal">false</span>);
    }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::brokerDisconnected</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-built_in">log</span>(<span class="hljs-string">"å·²æ–­å¼€è¿æ¥"</span>);
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::onSubscribeClicked</span><span class="hljs-params">()</span>
</span>{
    QString topic = le_sub_topic-&gt;<span class="hljs-built_in">text</span>();
    <span class="hljs-keyword">auto</span> subscription = m_client-&gt;<span class="hljs-built_in">subscribe</span>(topic);
    <span class="hljs-keyword">if</span> (!subscription) {
        <span class="hljs-built_in">log</span>(<span class="hljs-string">"è®¢é˜…å¤±è´¥: "</span> + topic);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">log</span>(<span class="hljs-string">"æˆåŠŸè®¢é˜…ä¸»é¢˜: "</span> + topic);
}

<span class="hljs-comment">// *** æ ¸å¿ƒï¼šå¤„ç†æ¥æ”¶åˆ°çš„ JSON æ•°æ® ***</span>
<span class="hljs-comment">// å‡è®¾ STM32 å‘é€çš„ JSON æ ¼å¼å¦‚ä¸‹ï¼š</span>
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//    "temp_in": 28.5, "humi_in": 60,</span>
<span class="hljs-comment">//    "temp_out": 22.0, "humi_out": 45,</span>
<span class="hljs-comment">//    "weight": 10.5, "light": 1500,</span>
<span class="hljs-comment">//    "sound": 40, "vib": 0</span>
<span class="hljs-comment">// }</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::onMessageReceived</span><span class="hljs-params">(<span class="hljs-type">const</span> QByteArray &amp;message, <span class="hljs-type">const</span> QMqttTopicName &amp;topic)</span>
</span>{
    <span class="hljs-built_in">log</span>(<span class="hljs-string">"æ”¶åˆ°æ•°æ® ["</span> + topic.<span class="hljs-built_in">name</span>() + <span class="hljs-string">"]: "</span> + message);

    QJsonDocument doc = QJsonDocument::<span class="hljs-built_in">fromJson</span>(message);
    <span class="hljs-keyword">if</span> (doc.<span class="hljs-built_in">isNull</span>() || !doc.<span class="hljs-built_in">isObject</span>()) {
        <span class="hljs-built_in">log</span>(<span class="hljs-string">"JSON è§£æå¤±è´¥"</span>);
        <span class="hljs-keyword">return</span>;
    }

    QJsonObject obj = doc.<span class="hljs-built_in">object</span>();

    <span class="hljs-comment">// æ›´æ–°å†…éƒ¨æ¸©æ¹¿åº¦</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"temp_in"</span>)) lbl_temp_in-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"temp_in"</span>].<span class="hljs-built_in">toDouble</span>(), <span class="hljs-string">'f'</span>, <span class="hljs-number">1</span>) + <span class="hljs-string">" â„ƒ"</span>);
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"humi_in"</span>)) lbl_humi_in-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"humi_in"</span>].<span class="hljs-built_in">toDouble</span>(), <span class="hljs-string">'f'</span>, <span class="hljs-number">1</span>) + <span class="hljs-string">" %"</span>);

    <span class="hljs-comment">// æ›´æ–°å¤–éƒ¨æ¸©æ¹¿åº¦</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"temp_out"</span>)) lbl_temp_out-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"temp_out"</span>].<span class="hljs-built_in">toDouble</span>(), <span class="hljs-string">'f'</span>, <span class="hljs-number">1</span>) + <span class="hljs-string">" â„ƒ"</span>);
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"humi_out"</span>)) lbl_humi_out-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"humi_out"</span>].<span class="hljs-built_in">toDouble</span>(), <span class="hljs-string">'f'</span>, <span class="hljs-number">1</span>) + <span class="hljs-string">" %"</span>);

    <span class="hljs-comment">// æ›´æ–°é‡é‡</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"weight"</span>)) lbl_weight-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"weight"</span>].<span class="hljs-built_in">toDouble</span>(), <span class="hljs-string">'f'</span>, <span class="hljs-number">2</span>) + <span class="hljs-string">" kg"</span>);

    <span class="hljs-comment">// æ›´æ–°å…‰ç…§</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"light"</span>)) lbl_light-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"light"</span>].<span class="hljs-built_in">toInt</span>()) + <span class="hljs-string">" Lx"</span>);

    <span class="hljs-comment">// æ›´æ–°å£°éŸ³</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"sound"</span>)) lbl_sound-&gt;<span class="hljs-built_in">setText</span>(QString::<span class="hljs-built_in">number</span>(obj[<span class="hljs-string">"sound"</span>].<span class="hljs-built_in">toInt</span>()) + <span class="hljs-string">" dB"</span>);

    <span class="hljs-comment">// æ›´æ–°éœ‡åŠ¨çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (obj.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"vib"</span>)) {
        <span class="hljs-type">int</span> vib = obj[<span class="hljs-string">"vib"</span>].<span class="hljs-built_in">toInt</span>();
        <span class="hljs-keyword">if</span> (vib == <span class="hljs-number">1</span>) {
            lbl_vibration-&gt;<span class="hljs-built_in">setText</span>(<span class="hljs-string">"âš  å¼‚å¸¸éœ‡åŠ¨!"</span>);
            lbl_vibration-&gt;<span class="hljs-built_in">setStyleSheet</span>(<span class="hljs-string">"QLabel { font-size: 18px; font-weight: bold; color: red; }"</span>);
        } <span class="hljs-keyword">else</span> {
            lbl_vibration-&gt;<span class="hljs-built_in">setText</span>(<span class="hljs-string">"æ­£å¸¸"</span>);
            lbl_vibration-&gt;<span class="hljs-built_in">setStyleSheet</span>(<span class="hljs-string">"QLabel { font-size: 18px; font-weight: bold; color: green; }"</span>);
        }
    }
}

<span class="hljs-comment">// *** æ ¸å¿ƒï¼šä¸‹å‘é˜ˆå€¼é…ç½® ***</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::onPublishThresholdClicked</span><span class="hljs-params">()</span>
</span>{
    QString topic = le_pub_topic-&gt;<span class="hljs-built_in">text</span>();
    
    <span class="hljs-comment">// æ„å»º JSON</span>
    QJsonObject jobj;
    jobj[<span class="hljs-string">"cmd"</span>] = <span class="hljs-string">"set_threshold"</span>;
    jobj[<span class="hljs-string">"temp_max"</span>] = sb_temp_max-&gt;<span class="hljs-built_in">value</span>();
    jobj[<span class="hljs-string">"weight_min"</span>] = sb_weight_min-&gt;<span class="hljs-built_in">value</span>();
    jobj[<span class="hljs-string">"sound_max"</span>] = sb_sound_max-&gt;<span class="hljs-built_in">value</span>();

    <span class="hljs-function">QJsonDocument <span class="hljs-title">doc</span><span class="hljs-params">(jobj)</span></span>;
    QByteArray payload = doc.<span class="hljs-built_in">toJson</span>(QJsonDocument::Compact);

    <span class="hljs-keyword">if</span> (m_client-&gt;<span class="hljs-built_in">publish</span>(topic, payload) == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">log</span>(<span class="hljs-string">"æŒ‡ä»¤ä¸‹å‘å¤±è´¥"</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">log</span>(<span class="hljs-string">"æŒ‡ä»¤ä¸‹å‘æˆåŠŸ: "</span> + payload);
    }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainWindow::log</span><span class="hljs-params">(<span class="hljs-type">const</span> QString &amp;msg)</span>
</span>{
    txt_log-&gt;<span class="hljs-built_in">append</span>(QDateTime::<span class="hljs-built_in">currentDateTime</span>().<span class="hljs-built_in">toString</span>(<span class="hljs-string">"HH:mm:ss"</span>) + <span class="hljs-string">" "</span> + msg);
}
</code></pre>
<hr/>
<h4 data-id="heading-72">4. ä¸»ç¨‹åºå…¥å£ (main.cpp)</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"mainwindow.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;QApplication&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span>
</span>{
    <span class="hljs-function">QApplication <span class="hljs-title">a</span><span class="hljs-params">(argc, argv)</span></span>;
    MainWindow w;
    w.<span class="hljs-built_in">show</span>();
    <span class="hljs-keyword">return</span> a.<span class="hljs-built_in">exec</span>();
}
</code></pre>
<hr/>
<h4 data-id="heading-73">5. ä½¿ç”¨è¯´æ˜ä¸æ³¨æ„äº‹é¡¹</h4>
<h5 data-id="heading-74">1. å…³äº QtMqtt æ¨¡å—</h5>
<p>æœ¬ä»£ç ä½¿ç”¨äº† <code>QMqttClient</code> ç±»ï¼Œè¿™æ˜¯ Qt å®˜æ–¹æä¾›çš„ MQTT å°è£…ã€‚</p>
<ul>
<li><strong>Qt 5.10+ / Qt 6+</strong>ï¼šéœ€è¦æ‰‹åŠ¨ç¼–è¯‘ <code>qtmqtt</code> åº“ã€‚</li>
<li><strong>Linux (Ubuntu)</strong>ï¼šå¯ä»¥é€šè¿‡ <code>sudo apt install qt6-mqtt-dev</code> (é’ˆå¯¹ Qt6) å®‰è£…ã€‚</li>
<li><strong>å¦‚æœæ— æ³•ç¼–è¯‘ QtMqtt</strong>ï¼šéœ€è¦å°†ä»£ç ä¸­çš„ <code>QMqttClient</code> æ›¿æ¢ä¸ºç¬¬ä¸‰æ–¹çš„ <code>QMQTT</code> åº“ï¼ˆGitHub ä¸Šæœ‰å¾ˆå¤šå•å¤´æ–‡ä»¶çš„åº“ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-75">2. åä¸ºäº‘é…ç½®</h5>
<p>ä¸ºäº†æˆåŠŸè¿æ¥åä¸ºäº‘ï¼Œéœ€è¦åœ¨ä¸Šä½æœºè½¯ä»¶ç•Œé¢å¡«å…¥æ­£ç¡®çš„é‰´æƒä¿¡æ¯ã€‚</p>
<ul>
<li><strong>Server</strong>: <code>iot-mqtts.cn-north-4.myhuaweicloud.com</code> (è¯·æ ¹æ®çš„åä¸ºäº‘å®é™…åŒºåŸŸå¡«å†™)ã€‚</li>
<li><strong>Client ID</strong>: æ ¼å¼ä¸º <code>device_id_0_0_timestamp</code>ã€‚</li>
<li><strong>Username</strong>: <code>device_id</code>ã€‚</li>
<li><strong>Password</strong>: éœ€è¦ä½¿ç”¨ HMAC-SHA256 ç®—æ³•ï¼Œé€šè¿‡ <code>Device Secret</code> ç”Ÿæˆã€‚åä¸ºäº‘æ§åˆ¶å°æä¾›äº†åœ¨çº¿ç”Ÿæˆå·¥å…·ï¼Œæˆ–è€…å¯ä»¥å†™ä¸€ä¸ªå°å·¥å…·ç”Ÿæˆåå¡«å…¥ã€‚</li>
</ul>
<h5 data-id="heading-76">3. é€šä¿¡åè®®å¯¹åº”</h5>
<p>ç¡®ä¿ STM32 ç«¯ä¸Šä¼ çš„ JSON é”®åï¼ˆKeyï¼‰ä¸ <code>mainwindow.cpp</code> ä¸­è§£æçš„é”®åä¸€è‡´ï¼š</p>
<ul>
<li><code>temp_in</code>, <code>humi_in</code></li>
<li><code>temp_out</code>, <code>humi_out</code></li>
<li><code>weight</code></li>
<li><code>light</code></li>
<li><code>sound</code></li>
<li><code>vib</code> (0ä¸ºæ­£å¸¸ï¼Œ1ä¸ºæŠ¥è­¦)</li>
</ul>
<h3 data-id="heading-77">4.5 ç¼–è¯‘Windowsä¸Šä½æœº</h3>
<p>ç‚¹å‡»è½¯ä»¶å·¦ä¸‹è§’çš„ç»¿è‰²ä¸‰è§’å½¢æŒ‰é’®è¿›è¡Œç¼–è¯‘è¿è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3b0e78f536b42dfab959583b969b12e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=KRWeGR%2BxJWiVgLysDctv3aKKY7s%3D" alt="image-20250402144112519" loading="lazy"/></p>
<h3 data-id="heading-78">4.6 é…ç½®Androidç¯å¢ƒ</h3>
<p>å¦‚æœæƒ³ç¼–è¯‘Androidæ‰‹æœºAPPï¼Œå¿…é¡»è¦å…ˆè‡ªå·±é…ç½®å¥½è‡ªå·±çš„Androidç¯å¢ƒã€‚ï¼ˆæ­å»ºç¯å¢ƒçš„è¿‡ç¨‹å¯ä»¥è‡ªè¡Œç™¾åº¦æœç´¢å­¦ä¹ ï¼‰</p>
<p>ç„¶åæ‰å¯ä»¥è¿›è¡Œä¸‹é¢çš„æ­¥éª¤ã€‚</p>
<h4 data-id="heading-79">ã€1ã€‘é€‰æ‹©Androidç¼–è¯‘å™¨</h4>
<p>é€‰æ‹©ç¼–è¯‘å™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3226f81351c4d09b6f7f3558346c594~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=sFz9RftInzS3JATR5kpWUhSxTf4%3D" alt="image-20240425232651515" loading="lazy"/></p>
<p>åˆ‡æ¢ç¼–è¯‘å™¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3594ac95bbbd48d3bdb0619bd97b1e67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=096stxttBekMccdPnW3jHUPW8uc%3D" alt="image-20250402144840442" loading="lazy"/></p>
<h4 data-id="heading-80">ã€2ã€‘åˆ›å»ºAndroidé…ç½®æ–‡ä»¶</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46dceb1183a24fdd8b6bbbdaa91f407b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=AxR6jf5oGlW2m8tK%2BHpzE5fT4zA%3D" alt="image-20240117144604025" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1874689b5b74eda941b6fda0aa7a214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Ys%2BfaeiCheKg9U%2B2XAKYT7g91%2BA%3D" alt="image-20240117144635052" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d7d845b12a345bdbbc2c632b9b2f4ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=by0hIkeMxvAjZ%2BFs16%2BAXJ5HNuA%3D" alt="image-20240117144652014" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/952cb35891814820b8b883a5ff0d97b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=h7ofGMLlQFBFZc1JFarMjEXq5jI%3D" alt="image-20250402144902155" loading="lazy"/></p>
<h4 data-id="heading-81">ã€3ã€‘é…ç½®Androidå›¾æ ‡ä¸åç§°</h4>
<p>æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…ç½® Androidå›¾æ ‡ä¸åç§°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af7776f4ec1246ae9b697b4724d3dda6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=nmcY3moTNIaf11Q9E9wZlTMtnMQ%3D" alt="image-20250613111054529" loading="lazy"/></p>
<h4 data-id="heading-82">ã€3ã€‘ç¼–è¯‘Androidä¸Šä½æœº</h4>
<p>Qtæœ¬èº«æ˜¯è·¨å¹³å°çš„ï¼Œç›´æ¥é€‰æ‹©Androidçš„ç¼–è¯‘å™¨ï¼Œå°±å¯ä»¥å°†ç¨‹åºç¼–è¯‘åˆ°Androidå¹³å°ã€‚</p>
<p>ç„¶åç‚¹å‡»æ„å»ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26035b7e8d5745e88452d4ad319ac1d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=DVTkT5ERe7EPTMrztrZDOuSjGbw%3D" alt="image-20250613111041456" loading="lazy"/></p>
<p>æˆåŠŸä¹‹åï¼Œåœ¨ç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„<code>apk</code>æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯Androidæ‰‹æœºçš„å®‰è£…åŒ…ï¼Œç”µè„‘ç«¯ä½¿ç”¨<code>QQ</code>å‘é€ç»™æ‰‹æœºQQ,æ‰‹æœºç™»å½•QQæ¥æ”¶ï¼Œå°±èƒ½ç›´æ¥å®‰è£…ã€‚</p>
<p>ç”Ÿæˆçš„<code>apk</code>çš„ç›®å½•åœ¨å“ªé‡Œå‘¢ï¼Ÿ ç¼–è¯‘å®Œæˆä¹‹åï¼Œåœ¨æ§åˆ¶å°ä¼šè¾“å‡ºAPKæ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<p>çŸ¥é“ç›®å½•åœ¨å“ªé‡Œä¹‹åï¼Œåœ¨Windowsçš„æ–‡ä»¶èµ„æºç®¡ç†å™¨é‡Œï¼Œæ‰¾åˆ°è·¯å¾„ï¼Œå…·ä½“çœ‹ä¸‹å›¾ï¼Œæ‰¾åˆ°ç”Ÿæˆçš„apkæ–‡ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74d4bd3c05cd49ef9502ad88736e5136~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=LxF0ZInZXAyxBQMydxPjNxXGr%2BY%3D" alt="image-20250402145406894" loading="lazy"/></p>
<pre><code class="hljs language-cpp" lang="cpp">File: D:/QtProject/build<span class="hljs-number">-333</span>_QtProject-Android_for_arm64_v8a_Clang_Qt_5_12_6_for_Android_ARM64_v8a-Release/android-build<span class="hljs-comment">//build/outputs/apk/debug/android-build-debug.apk</span>
</code></pre>
<h3 data-id="heading-83">4.7 è®¾å¤‡ä»¿çœŸè°ƒè¯•</h3>
<p>é€šè¿‡MQTTå®¢æˆ·ç«¯æ¨¡æ‹Ÿè®¾å¤‡ç™»å½•åä¸ºäº‘æœåŠ¡å™¨ã€‚è¿›è¡Œè®¾å¤‡è”è°ƒï¼Œå®ç°æ•°æ®ä¸Šä¼ å’Œä¸‹å‘æµ‹è¯•ã€‚</p>
<h2 data-id="heading-84">äº”ã€STM32ä»£ç è®¾è®¡</h2>
<p>å½“å‰é¡¹ç›®ä½¿ç”¨çš„ç›¸å…³è½¯ä»¶å·¥å…·ã€æ¨¡å—æºç å·²ç»ä¸Šä¼ åˆ°ç½‘ç›˜ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fccnr8sukk85n.feishu.cn%2Fwiki%2FQjY8weDYHibqRYkFP2qcA9aGnvb%3Ffrom%3Dfrom_copylink" target="_blank" title="https://ccnr8sukk85n.feishu.cn/wiki/QjY8weDYHibqRYkFP2qcA9aGnvb?from=from_copylink" ref="nofollow noopener noreferrer">ccnr8sukk85n.feishu.cn/wiki/QjY8weâ€¦</a></p>
<h3 data-id="heading-85">5.1 ç¡¬ä»¶è¿çº¿è¯´æ˜</h3>
<hr/>
<h4 data-id="heading-86">1. I2C æ€»çº¿è®¾å¤‡ï¼ˆOLED æ˜¾ç¤ºå± + BH1750 å…‰ç…§ä¼ æ„Ÿå™¨ï¼‰</h4>
<p>è¿™ä¸¤ä¸ªæ¨¡å—éƒ½ä½¿ç”¨ I2C é€šä¿¡åè®®ï¼Œå¯ä»¥å¹¶è”æŒ‚è½½åœ¨åŒä¸€ä¸ª I2C æ€»çº¿ä¸Šï¼ˆSTM32 çš„ I2C1 æ¥å£ï¼‰ã€‚</p>























































<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>OLED SCL</strong></td><td><strong>PB6</strong></td><td>I2C1_SCL</td></tr><tr><td><strong>OLED SDA</strong></td><td><strong>PB7</strong></td><td>I2C1_SDA</td></tr><tr><td>OLED VCC</td><td>3.3V</td><td>OLED ä¾›ç”µ</td></tr><tr><td>OLED GND</td><td>GND</td><td>å…±åœ°</td></tr><tr><td><strong>BH1750 SCL</strong></td><td><strong>PB6</strong></td><td>ä¸ OLED å¹¶è”</td></tr><tr><td><strong>BH1750 SDA</strong></td><td><strong>PB7</strong></td><td>ä¸ OLED å¹¶è”</td></tr><tr><td>BH1750 VCC</td><td>3.3V or 5V</td><td>æ¨¡å—é€šå¸¸å…¼å®¹</td></tr><tr><td>BH1750 GND</td><td>GND</td><td>å…±åœ°</td></tr><tr><td>BH1750 ADDR</td><td>GND (æˆ–æ‚¬ç©º)</td><td>åœ°å€é€‰æ‹©è„šï¼Œæ¥åœ°é»˜è®¤åœ°å€</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-87">2. æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨ï¼ˆå†…éƒ¨ &amp; å¤–éƒ¨ï¼‰</h4>
<p>é‡‡ç”¨å•æ€»çº¿åè®®ï¼Œåˆ†åˆ«å ç”¨ä¸¤ä¸ªæ™®é€š GPIO å£ã€‚</p>








































<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>DHT11(å†…) DATA</strong></td><td><strong>PA4</strong></td><td>å†…éƒ¨æ¸©æ¹¿åº¦æ•°æ®è„š</td></tr><tr><td>DHT11(å†…) VCC</td><td>3.3V or 5V</td><td>å»ºè®® 3.3V ä»¥åŒ¹é…é€»è¾‘ç”µå¹³</td></tr><tr><td>DHT11(å†…) GND</td><td>GND</td><td>å…±åœ°</td></tr><tr><td><strong>DHT11(å¤–) DATA</strong></td><td><strong>PA5</strong></td><td>å¤–éƒ¨æ¸©æ¹¿åº¦æ•°æ®è„š</td></tr><tr><td>DHT11(å¤–) VCC</td><td>3.3V or 5V</td><td/></tr><tr><td>DHT11(å¤–) GND</td><td>GND</td><td/></tr></tbody></table>
<p><em>æ³¨æ„ï¼šDHT11 çš„ DATA å¼•è„šé€šå¸¸éœ€è¦æ¥ä¸€ä¸ª 4.7kÎ© - 10kÎ© çš„ä¸Šæ‹‰ç”µé˜»åˆ° VCCï¼ˆå¾ˆå¤šæˆå“æ¨¡å—å·²å†…ç½®ï¼‰ã€‚</em></p>
<hr/>
<h4 data-id="heading-88">3. é‡é‡ç›‘æµ‹æ¨¡å—ï¼ˆHX711 + ç§°é‡ä¼ æ„Ÿå™¨ï¼‰</h4>
<p>HX711 æ˜¯é«˜ç²¾åº¦ ADCï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ä¸²è¡Œåè®®ã€‚</p>






























<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>HX711 DT (Data)</strong></td><td><strong>PA6</strong></td><td>æ•°æ®å¼•è„š</td></tr><tr><td><strong>HX711 SCK (Clock)</strong></td><td><strong>PA7</strong></td><td>æ—¶é’Ÿå¼•è„š</td></tr><tr><td>HX711 VCC</td><td>5V</td><td>å»ºè®®æ¥ 5V ä»¥æä¾›æ›´ç¨³å®šçš„ä¼ æ„Ÿå™¨æ¿€åŠ±ç”µå‹</td></tr><tr><td>HX711 GND</td><td>GND</td><td>å…±åœ°</td></tr></tbody></table>
<p><em>æ¥çº¿è¯´æ˜ï¼šç§°é‡ä¼ æ„Ÿå™¨çš„ E+/E-/A+/A- è¯·ä¸¥æ ¼æŒ‰ç…§ä¼ æ„Ÿå™¨çº¿è‰²è¿æ¥åˆ° HX711 æ¨¡å—å¯¹åº”ç«¯å£ã€‚</em></p>
<hr/>
<h4 data-id="heading-89">4. å£°éŸ³é‡‡é›†æ¨¡å—ï¼ˆMAX9814ï¼‰</h4>
<p>è¾“å‡ºæ¨¡æ‹Ÿç”µå‹ä¿¡å·ï¼Œéœ€è¦è¿æ¥ STM32 çš„ ADC å¼•è„šã€‚</p>






























<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>MAX9814 OUT</strong></td><td><strong>PA1</strong></td><td>è¿æ¥ ADC1_IN1</td></tr><tr><td>MAX9814 VCC</td><td>3.3V or 5V</td><td/></tr><tr><td>MAX9814 GND</td><td>GND</td><td/></tr><tr><td>MAX9814 GAIN</td><td>(å¯é€‰)</td><td>å¢ç›Šè®¾ç½®ï¼Œæ‚¬ç©ºé»˜è®¤ 60dBï¼Œæˆ–æ¥ VCC/GND è°ƒæ•´</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-90">5. éœ‡åŠ¨ç›‘æµ‹æ¨¡å—ï¼ˆSW420ï¼‰</h4>
<p>é€šå¸¸è¾“å‡ºæ•°å­—å¼€å…³é‡ï¼ˆ0 æˆ– 1ï¼‰ï¼Œè¿æ¥æ™®é€š GPIO å³å¯ã€‚</p>

























<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>SW420 DO</strong></td><td><strong>PB0</strong></td><td>æ•°å­—è¾“å‡ºå¼•è„š (Digital Out)</td></tr><tr><td>SW420 VCC</td><td>3.3V or 5V</td><td/></tr><tr><td>SW420 GND</td><td>GND</td><td/></tr></tbody></table>
<hr/>
<h4 data-id="heading-91">6. é€šä¿¡æ¨¡å—ï¼ˆäºŒé€‰ä¸€ï¼šAir780E æˆ– ESP8266ï¼‰</h4>
<p>ä½¿ç”¨ä¸²å£ (USART2) è¿›è¡Œé€šä¿¡ã€‚<strong>æ³¨æ„ TX å’Œ RX è¦äº¤å‰è¿æ¥ã€‚</strong></p>
<h5 data-id="heading-92">æ–¹æ¡ˆ A: Air780E (4G Cat.1)</h5>






























<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Air780 TX</strong></td><td><strong>PA3</strong></td><td>STM32 çš„ RX2</td></tr><tr><td><strong>Air780 RX</strong></td><td><strong>PA2</strong></td><td>STM32 çš„ TX2</td></tr><tr><td>Air780 VCC</td><td>5V / VBAT</td><td>4G æ¨¡å—ç”µæµå¤§ï¼Œå»ºè®®ç›´æ¥ç”±ç”µæºæ¨¡å—ä¾›ç”µï¼Œä¸è¦ä» STM32 å–ç”µ</td></tr><tr><td>Air780 GND</td><td>GND</td><td><strong>åŠ¡å¿…å…±åœ°</strong></td></tr></tbody></table>
<h5 data-id="heading-93">æ–¹æ¡ˆ B: ESP8266-01S (Wi-Fi)</h5>



































<table><thead><tr><th>æ¨¡å—å¼•è„š</th><th>STM32 å¼•è„š</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ESP8266 TX</strong></td><td><strong>PA3</strong></td><td>STM32 çš„ RX2</td></tr><tr><td><strong>ESP8266 RX</strong></td><td><strong>PA2</strong></td><td>STM32 çš„ TX2</td></tr><tr><td>ESP8266 3V3</td><td>3.3V</td><td><strong>ä¸¥ç¦æ¥ 5Vï¼Œä¼šçƒ§æ¯</strong></td></tr><tr><td>ESP8266 EN</td><td>3.3V</td><td>ä½¿èƒ½è„šï¼Œå¿…é¡»æ¥é«˜ç”µå¹³</td></tr><tr><td>ESP8266 GND</td><td>GND</td><td>å…±åœ°</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-94">7. ç”µæºç®¡ç†æ¨¡å—</h4>
<p>ç³»ç»Ÿä¾›ç”µæ˜¯ç¨³å®šçš„å…³é”®ã€‚</p>
<ul>
<li><strong>18650 é”‚ç”µæ± </strong> è¾“å‡º (3.7V - 4.2V) è¿æ¥åˆ° <strong>AMS1117-3.3</strong> å’Œ <strong>AMS1117-5.0</strong> è¾“å…¥ç«¯ï¼ˆæˆ–è€…ä½¿ç”¨å‡å‹/é™å‹æ¨¡å—ï¼‰ã€‚</li>
<li><strong>STM32 ä¾›ç”µ</strong>ï¼šå°†ç¨³å‹åçš„ 3.3V æ¥åˆ° STM32 çš„ 3.3V å¼•è„šï¼ŒGND æ¥ GNDã€‚</li>
<li><strong>5V æ€»çº¿</strong>ï¼šç”¨äºç»™ HX711ã€Air780E ä¾›ç”µã€‚</li>
<li><strong>3.3V æ€»çº¿</strong>ï¼šç”¨äºç»™ STM32ã€OLEDã€DHT11ã€ESP8266 ä¾›ç”µã€‚</li>
</ul>
<h4 data-id="heading-95">æ€»ç»“å¼•è„šåˆ†é…è¡¨</h4>

































































<table><thead><tr><th>STM32 å¼•è„š</th><th>åŠŸèƒ½åˆ†é…</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td><strong>PA1</strong></td><td>MAX9814 (ADC)</td><td>å£°éŸ³é‡‡é›†</td></tr><tr><td><strong>PA2</strong></td><td>USART2_TX</td><td>è¿æ¥é€šä¿¡æ¨¡å— RX</td></tr><tr><td><strong>PA3</strong></td><td>USART2_RX</td><td>è¿æ¥é€šä¿¡æ¨¡å— TX</td></tr><tr><td><strong>PA4</strong></td><td>GPIO</td><td>DHT11 (å†…éƒ¨)</td></tr><tr><td><strong>PA5</strong></td><td>GPIO</td><td>DHT11 (å¤–éƒ¨)</td></tr><tr><td><strong>PA6</strong></td><td>GPIO</td><td>HX711_DT (æ•°æ®)</td></tr><tr><td><strong>PA7</strong></td><td>GPIO</td><td>HX711_SCK (æ—¶é’Ÿ)</td></tr><tr><td><strong>PB0</strong></td><td>GPIO</td><td>SW420 (éœ‡åŠ¨)</td></tr><tr><td><strong>PB6</strong></td><td>I2C1_SCL</td><td>OLED &amp; BH1750</td></tr><tr><td><strong>PB7</strong></td><td>I2C1_SDA</td><td>OLED &amp; BH1750</td></tr><tr><td><strong>PA9/PA10</strong></td><td>USART1</td><td>ç”¨äºç¨‹åºä¸‹è½½è°ƒè¯• (ST-Link æˆ– ä¸²å£ä¸‹è½½)</td></tr></tbody></table>
<h3 data-id="heading-96">5.2 ä¼ æ„Ÿå™¨ä»£ç </h3>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº <strong>STM32F103C8T6</strong> çš„å®Œæ•´åº•å±‚é©±åŠ¨ä»£ç é›†åˆã€‚ä¸ºäº†æ»¡è¶³â€œå¯„å­˜å™¨æ–¹å¼ï¼Œä¸é‡‡ç”¨åº“â€çš„è¦æ±‚ï¼Œä»£ç ç›´æ¥æ“ä½œå¯„å­˜å™¨ï¼ˆå¦‚ <code>GPIOA-&gt;CRL</code>ã€<code>RCC-&gt;APB2ENR</code> ç­‰ï¼‰ã€‚</p>
<p>ä¸ºäº†æ–¹ä¾¿ä½ ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘å°†ä»£ç ç»„ç»‡ä¸ºå‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†ã€‚ä½ å¯ä»¥å°†è¿™äº›ä»£ç åˆ†åˆ«ä¿å­˜ä¸º <code>.c</code> å’Œ <code>.h</code> æ–‡ä»¶ï¼Œæˆ–è€…æ•´åˆåˆ°ä¸€ä¸ª <code>main.c</code> ä¸­ï¼ˆè™½ç„¶ä¸å»ºè®®è¿™æ ·åšï¼Œä½†ä¸ºäº†å±•ç¤ºæ–¹ä¾¿ï¼Œä¸‹é¢æŒ‰åŠŸèƒ½æ¨¡å—åˆ—å‡ºï¼‰ã€‚</p>
<p><strong>å‰ææ¡ä»¶</strong>ï¼š</p>
<ol>
<li>å¼€å‘ç¯å¢ƒéœ€åŒ…å« CMSIS æ ¸å¿ƒå¤´æ–‡ä»¶ <code>stm32f10x.h</code>ï¼ˆè¿™æ˜¯æ‰€æœ‰ STM32 å¼€å‘çš„åŸºç¡€ï¼Œå®šä¹‰äº†å¯„å­˜å™¨ç»“æ„ä½“ï¼‰ã€‚</li>
<li>ç³»ç»Ÿæ—¶é’Ÿé»˜è®¤é…ç½®ä¸º 72MHzã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-97">1. åŸºç¡€å»¶æ—¶ä¸ç³»ç»Ÿé…ç½® (System)</h4>
<p><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šæä¾›å¾®ç§’çº§å»¶æ—¶ï¼ˆDHT11å¿…é¡»ï¼‰å’Œæ¯«ç§’çº§å»¶æ—¶ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// system.c</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"stm32f10x.h"</span></span>

<span class="hljs-comment">// ç³»ç»Ÿæ—¶é’Ÿåˆå§‹åŒ– (72MHz) - é€šå¸¸å¯åŠ¨æ–‡ä»¶å·²å¤„ç†ï¼Œè¿™é‡Œç¡®ä¿å¤–è®¾æ—¶é’Ÿå¼€å¯</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">System_Init_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-comment">// å¼€å¯ GPIOA, GPIOB, AFIO, USART1, USART2, ADC1 æ—¶é’Ÿ</span>
    RCC-&gt;APB2ENR |= (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">2</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">3</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">0</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">14</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">9</span>); 
    RCC-&gt;APB1ENR |= (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">17</span>); <span class="hljs-comment">// å¼€å¯ USART2 æ—¶é’Ÿ</span>
}

<span class="hljs-comment">// ç®€å•çš„ SysTick å»¶æ—¶å‡½æ•° (72MHz)</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">Delay_us</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> us)</span> {
    SysTick-&gt;LOAD = <span class="hljs-number">72</span> * us;         <span class="hljs-comment">// è£…è½½è®¡æ•°å€¼</span>
    SysTick-&gt;VAL = <span class="hljs-number">0x00</span>;             <span class="hljs-comment">// æ¸…ç©ºè®¡æ•°å™¨</span>
    SysTick-&gt;CTRL = <span class="hljs-number">0x00000005</span>;      <span class="hljs-comment">// ä½¿èƒ½ï¼Œæºæ—¶é’ŸAHB</span>
    <span class="hljs-keyword">while</span>(!(SysTick-&gt;CTRL &amp; <span class="hljs-number">0x00010000</span>)); <span class="hljs-comment">// ç­‰å¾…è®¡æ•°å½’é›¶</span>
    SysTick-&gt;CTRL = <span class="hljs-number">0x00000004</span>;      <span class="hljs-comment">// å…³é—­å®šæ—¶å™¨</span>
}

<span class="hljs-type">void</span> <span class="hljs-title function_">Delay_ms</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> ms)</span> {
    <span class="hljs-keyword">while</span>(ms--) {
        Delay_us(<span class="hljs-number">1000</span>);
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-98">2. GPIO å·¥å…·å‡½æ•° (GPIO Utils)</h4>
<p>ç”±äºå¯„å­˜å™¨æ“ä½œé…ç½® GPIO æ¨¡å¼æ¯”è¾ƒç¹çï¼Œå®šä¹‰ä¸¤ä¸ªè¾…åŠ©å‡½æ•°ç”¨äº DHT11 ç­‰éœ€è¦é¢‘ç¹åˆ‡æ¢è¾“å…¥/è¾“å‡ºçš„å¼•è„šã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// æ¨¡å¼å®šä¹‰: 0=Input, 1=Output_PP_50MHz</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">GPIO_SetMode</span><span class="hljs-params">(GPIO_TypeDef* GPIOx, <span class="hljs-type">uint8_t</span> Pin, <span class="hljs-type">uint8_t</span> Mode)</span> {
    <span class="hljs-type">uint32_t</span> *cr_reg;
    <span class="hljs-type">uint8_t</span> shift;
    
    <span class="hljs-keyword">if</span> (Pin &lt; <span class="hljs-number">8</span>) {
        cr_reg = &amp;GPIOx-&gt;CRL;
        shift = Pin * <span class="hljs-number">4</span>;
    } <span class="hljs-keyword">else</span> {
        cr_reg = &amp;GPIOx-&gt;CRH;
        shift = (Pin - <span class="hljs-number">8</span>) * <span class="hljs-number">4</span>;
    }

    *cr_reg &amp;= ~(<span class="hljs-number">0xF</span> &lt;&lt; shift); <span class="hljs-comment">// æ¸…é™¤åŸæœ‰é…ç½®</span>
    
    <span class="hljs-keyword">if</span> (Mode == <span class="hljs-number">1</span>) { <span class="hljs-comment">// Output Push-Pull 50MHz</span>
        *cr_reg |= (<span class="hljs-number">0x3</span> &lt;&lt; shift); 
    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// Input Pull-Up/Down (éœ€é…åˆODRè®¾ç½®ç”µå¹³)</span>
        *cr_reg |= (<span class="hljs-number">0x8</span> &lt;&lt; shift); 
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-99">3. DHT11 æ¸©æ¹¿åº¦ä¼ æ„Ÿå™¨é©±åŠ¨</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šPA4 (å†…éƒ¨), PA5 (å¤–éƒ¨)</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è¯»å– DHT11 æ•°æ®</span>
<span class="hljs-comment">// GPIOx: GPIOA, Pin: 4 or 5</span>
<span class="hljs-comment">// è¿”å›å€¼: 0-æˆåŠŸ, 1-å¤±è´¥</span>
<span class="hljs-type">uint8_t</span> <span class="hljs-title function_">DHT11_Read_Data</span><span class="hljs-params">(GPIO_TypeDef* GPIOx, <span class="hljs-type">uint8_t</span> Pin, <span class="hljs-type">uint8_t</span> *temp, <span class="hljs-type">uint8_t</span> *humi)</span> {
    <span class="hljs-type">uint8_t</span> buf[<span class="hljs-number">5</span>];
    <span class="hljs-type">uint8_t</span> i, j;
    
    <span class="hljs-comment">// 1. ä¸»æœºå‘é€å¼€å§‹ä¿¡å·</span>
    GPIO_SetMode(GPIOx, Pin, <span class="hljs-number">1</span>); <span class="hljs-comment">// è¾“å‡ºæ¨¡å¼</span>
    GPIOx-&gt;BRR = (<span class="hljs-number">1</span> &lt;&lt; Pin);     <span class="hljs-comment">// æ‹‰ä½</span>
    Delay_ms(<span class="hljs-number">20</span>);                <span class="hljs-comment">// ä¿æŒè‡³å°‘18ms</span>
    GPIOx-&gt;BSRR = (<span class="hljs-number">1</span> &lt;&lt; Pin);    <span class="hljs-comment">// æ‹‰é«˜</span>
    Delay_us(<span class="hljs-number">30</span>);
    
    <span class="hljs-comment">// 2. åˆ‡æ¢ä¸ºè¾“å…¥ï¼Œç­‰å¾…å“åº”</span>
    GPIO_SetMode(GPIOx, Pin, <span class="hljs-number">0</span>); <span class="hljs-comment">// è¾“å…¥æ¨¡å¼</span>
    
    <span class="hljs-comment">// æ£€æµ‹å“åº”ä¿¡å·ï¼ˆä½ç”µå¹³80us -&gt; é«˜ç”µå¹³80usï¼‰</span>
    <span class="hljs-keyword">if</span> (!(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin))) {
        <span class="hljs-keyword">while</span>(!(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin))); <span class="hljs-comment">// ç­‰å¾…å˜é«˜</span>
        <span class="hljs-keyword">while</span>(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin));    <span class="hljs-comment">// ç­‰å¾…å˜ä½</span>
        
        <span class="hljs-comment">// 3. å¼€å§‹æ¥æ”¶ 40bit æ•°æ®</span>
        <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
            buf[i] = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span>(j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">8</span>; j++) {
                <span class="hljs-keyword">while</span>(!(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin))); <span class="hljs-comment">// ç­‰å¾…å˜ä¸ºé«˜ç”µå¹³ï¼ˆå¼€å§‹ä¼ è¾“ä½ï¼‰</span>
                Delay_us(<span class="hljs-number">40</span>); <span class="hljs-comment">// å»¶æ—¶40usåˆ¤æ–­æ˜¯0è¿˜æ˜¯1</span>
                
                <span class="hljs-keyword">if</span>(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin)) { <span class="hljs-comment">// å¦‚æœè¿˜åœ¨é«˜ç”µå¹³ï¼Œåˆ™æ˜¯1</span>
                    buf[i] |= (<span class="hljs-number">1</span> &lt;&lt; (<span class="hljs-number">7</span> - j));
                    <span class="hljs-keyword">while</span>(GPIOx-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; Pin)); <span class="hljs-comment">// ç­‰å¾…å˜ä¸ºä½ç”µå¹³</span>
                }
            }
        }
        
        <span class="hljs-comment">// 4. æ ¡éªŒ</span>
        <span class="hljs-keyword">if</span>((buf[<span class="hljs-number">0</span>] + buf[<span class="hljs-number">1</span>] + buf[<span class="hljs-number">2</span>] + buf[<span class="hljs-number">3</span>]) == buf[<span class="hljs-number">4</span>]) {
            *humi = buf[<span class="hljs-number">0</span>];
            *temp = buf[<span class="hljs-number">2</span>];
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}
</code></pre>
<hr/>
<h4 data-id="heading-100">4. HX711 é‡é‡ä¼ æ„Ÿå™¨é©±åŠ¨</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šDT=PA6, SCK=PA7</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> <span class="hljs-title function_">HX711_Read</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> i;
    
    <span class="hljs-comment">// PA6 Input, PA7 Output (åœ¨åˆå§‹åŒ–ä¸­é…ç½®å¥½)</span>
    <span class="hljs-comment">// DT=PA6, SCK=PA7</span>
    
    GPIOA-&gt;BRR = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>); <span class="hljs-comment">// SCK = 0</span>
    
    <span class="hljs-comment">// ç­‰å¾… DT å˜ä½ï¼Œè¡¨ç¤ºè½¬æ¢å®Œæˆ</span>
    <span class="hljs-keyword">while</span>(GPIOA-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">6</span>)); 
    
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">24</span>; i++) {
        GPIOA-&gt;BSRR = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>); <span class="hljs-comment">// SCK = 1</span>
        Delay_us(<span class="hljs-number">1</span>);
        count = count &lt;&lt; <span class="hljs-number">1</span>;
        GPIOA-&gt;BRR = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>);  <span class="hljs-comment">// SCK = 0</span>
        Delay_us(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">if</span>(GPIOA-&gt;IDR &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">6</span>)) count++;
    }
    
    <span class="hljs-comment">// ç¬¬25ä¸ªè„‰å†²ï¼Œè®¾ç½®å¢ç›Š 128</span>
    GPIOA-&gt;BSRR = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>); 
    Delay_us(<span class="hljs-number">1</span>);
    GPIOA-&gt;BRR = (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>); 
    Delay_us(<span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">return</span> count ^ <span class="hljs-number">0x800000</span>; <span class="hljs-comment">// è½¬æ¢ç¬¦å·ä½</span>
}

<span class="hljs-comment">// åˆå§‹åŒ– GPIO</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">HX711_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-comment">// PA6 Input (Floating/PU), PA7 Output</span>
    GPIO_SetMode(GPIOA, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>);
    GPIOA-&gt;ODR |= (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">6</span>); <span class="hljs-comment">// Pull Up</span>
    GPIO_SetMode(GPIOA, <span class="hljs-number">7</span>, <span class="hljs-number">1</span>);
}
</code></pre>
<hr/>
<h4 data-id="heading-101">5. è½¯ä»¶ I2C é©±åŠ¨ (OLED &amp; BH1750)</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šSCL=PB6, SDA=PB7</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SCL_H GPIOB-&gt;BSRR = (1 &lt;&lt; 6)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SCL_L GPIOB-&gt;BRR  = (1 &lt;&lt; 6)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SDA_H GPIOB-&gt;BSRR = (1 &lt;&lt; 7)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> SDA_L GPIOB-&gt;BRR  = (1 &lt;&lt; 7)</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> READ_SDA (GPIOB-&gt;IDR &amp; (1 &lt;&lt; 7))</span>

<span class="hljs-type">void</span> <span class="hljs-title function_">I2C_GPIO_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-comment">// é…ç½® PB6, PB7 ä¸ºå¼€æ¼è¾“å‡º (Open-Drain, 50MHz)</span>
    <span class="hljs-comment">// CNF=01, MODE=11 -&gt; 0x7</span>
    GPIOB-&gt;CRL &amp;= <span class="hljs-number">0x00FFFFFF</span>; 
    GPIOB-&gt;CRL |= <span class="hljs-number">0x77000000</span>; 
    SCL_H; SDA_H;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Start</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    SDA_H; SCL_H; Delay_us(<span class="hljs-number">4</span>);
    SDA_L; Delay_us(<span class="hljs-number">4</span>);
    SCL_L;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">I2C_Stop</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    SCL_L; SDA_L; Delay_us(<span class="hljs-number">4</span>);
    SCL_H; SDA_H; Delay_us(<span class="hljs-number">4</span>);
}

<span class="hljs-type">void</span> <span class="hljs-title function_">I2C_SendByte</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> Byte)</span> {
    <span class="hljs-type">uint8_t</span> i;
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++) {
        <span class="hljs-keyword">if</span>(Byte &amp; <span class="hljs-number">0x80</span>) SDA_H; <span class="hljs-keyword">else</span> SDA_L;
        Byte &lt;&lt;= <span class="hljs-number">1</span>;
        Delay_us(<span class="hljs-number">2</span>);
        SCL_H; Delay_us(<span class="hljs-number">2</span>);
        SCL_L; Delay_us(<span class="hljs-number">2</span>);
    }
    <span class="hljs-comment">// ç­‰å¾… ACK (ç®€å•å¤„ç†ï¼Œå¿½ç•¥è¿”å›å€¼)</span>
    SDA_H; SCL_H; Delay_us(<span class="hljs-number">2</span>); SCL_L;
}

<span class="hljs-type">uint8_t</span> <span class="hljs-title function_">I2C_ReadByte</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">uint8_t</span> i, val = <span class="hljs-number">0</span>;
    SDA_H; <span class="hljs-comment">// é‡Šæ”¾æ€»çº¿</span>
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; i++) {
        val &lt;&lt;= <span class="hljs-number">1</span>;
        SCL_H; Delay_us(<span class="hljs-number">2</span>);
        <span class="hljs-keyword">if</span>(READ_SDA) val++;
        SCL_L; Delay_us(<span class="hljs-number">2</span>);
    }
    <span class="hljs-comment">// å‘é€ NoACK (æœ€åä¸€ä½)</span>
    SDA_H; SCL_H; Delay_us(<span class="hljs-number">2</span>); SCL_L;
    <span class="hljs-keyword">return</span> val;
}
</code></pre>
<hr/>
<h4 data-id="heading-102">6. BH1750 å…‰ç…§ä¼ æ„Ÿå™¨é©±åŠ¨</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BH1750_ADDR 0x46 <span class="hljs-comment">// ADDRæ¥åœ°æ—¶åœ°å€</span></span>

<span class="hljs-type">void</span> <span class="hljs-title function_">BH1750_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    I2C_Start();
    I2C_SendByte(BH1750_ADDR);
    I2C_SendByte(<span class="hljs-number">0x01</span>); <span class="hljs-comment">// Power On</span>
    I2C_Stop();
}

<span class="hljs-type">void</span> <span class="hljs-title function_">BH1750_Start</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    I2C_Start();
    I2C_SendByte(BH1750_ADDR);
    I2C_SendByte(<span class="hljs-number">0x10</span>); <span class="hljs-comment">// H-Resolution Mode</span>
    I2C_Stop();
}

<span class="hljs-type">uint16_t</span> <span class="hljs-title function_">BH1750_Read</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">uint16_t</span> data;
    I2C_Start();
    I2C_SendByte(BH1750_ADDR | <span class="hljs-number">1</span>); <span class="hljs-comment">// Read mode</span>
    data = I2C_ReadByte();
    data = (data &lt;&lt; <span class="hljs-number">8</span>) + I2C_ReadByte();
    I2C_Stop();
    <span class="hljs-keyword">return</span> data; <span class="hljs-comment">// å•ä½ Lux</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-103">7. MAX9814 (ADC) é©±åŠ¨</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šPA1 (ADC1_IN1)</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">ADC_Config</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-comment">// PA1 æ¨¡æ‹Ÿè¾“å…¥æ¨¡å¼ (CNF=00, MODE=00)</span>
    GPIOA-&gt;CRL &amp;= <span class="hljs-number">0xFFFFFF0F</span>;
    
    <span class="hljs-comment">// ADC1 æ—¶é’Ÿé¢„åˆ†é¢‘ (Max 14MHz, PCLK2=72M, DIV6=12M)</span>
    RCC-&gt;CFGR |= (<span class="hljs-number">2</span> &lt;&lt; <span class="hljs-number">14</span>); 
    
    <span class="hljs-comment">// å¤ä½ ADC</span>
    ADC1-&gt;CR2 |= (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span>);
    <span class="hljs-keyword">while</span>(ADC1-&gt;CR2 &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">3</span>));
    
    <span class="hljs-comment">// æ ¡å‡† ADC</span>
    ADC1-&gt;CR2 |= (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>);
    <span class="hljs-keyword">while</span>(ADC1-&gt;CR2 &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>));
    
    <span class="hljs-comment">// é…ç½®è§„åˆ™ç»„: åºåˆ—1 ä¸º é€šé“1</span>
    ADC1-&gt;SQR3 = <span class="hljs-number">1</span>; 
    
    <span class="hljs-comment">// å¼€å¯ ADC</span>
    ADC1-&gt;CR2 |= <span class="hljs-number">1</span>; 
}

<span class="hljs-type">uint16_t</span> <span class="hljs-title function_">Get_Sound_Level</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    ADC1-&gt;CR2 |= <span class="hljs-number">1</span>; <span class="hljs-comment">// å†æ¬¡ç½®ä½å¯åŠ¨è½¬æ¢</span>
    <span class="hljs-keyword">while</span>(!(ADC1-&gt;SR &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">1</span>))); <span class="hljs-comment">// ç­‰å¾… EOC</span>
    <span class="hljs-keyword">return</span> ADC1-&gt;DR;
}
</code></pre>
<hr/>
<h4 data-id="heading-104">8. USART2 é€šä¿¡é©±åŠ¨ (è¿æ¥ Air780E/ESP8266)</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šPA2 (TX), PA3 (RX)</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">USART2_Config</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> baud)</span> {
    <span class="hljs-comment">// PA2 (TX): AF_PP (1011 -&gt; 0xB)</span>
    GPIOA-&gt;CRL &amp;= <span class="hljs-number">0xFFFF00FF</span>;
    GPIOA-&gt;CRL |= <span class="hljs-number">0x00004B00</span>; <span class="hljs-comment">// PA2=AF_PP, PA3=Input Floating(0x4)</span>
    
    <span class="hljs-comment">// æ³¢ç‰¹ç‡è®¡ç®— (PCLK1 = 36MHz)</span>
    <span class="hljs-comment">// USARTDIV = 36000000 / 115200 = 312.5</span>
    <span class="hljs-comment">// Mantissa = 312 (0x138), Fraction = 0.5*16 = 8</span>
    <span class="hljs-comment">// BRR = 0x1388</span>
    <span class="hljs-type">float</span> div = <span class="hljs-number">36000000.0</span> / baud;
    <span class="hljs-type">uint16_t</span> mantissa = (<span class="hljs-type">uint16_t</span>)div;
    <span class="hljs-type">uint16_t</span> fraction = (<span class="hljs-type">uint16_t</span>)((div - mantissa) * <span class="hljs-number">16</span>);
    USART2-&gt;BRR = (mantissa &lt;&lt; <span class="hljs-number">4</span>) + fraction;
    
    <span class="hljs-comment">// ä½¿èƒ½ UE, TE, RE, RXNEä¸­æ–­</span>
    USART2-&gt;CR1 = (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">13</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">3</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">2</span>) | (<span class="hljs-number">1</span>&lt;&lt;<span class="hljs-number">5</span>); 
    
    <span class="hljs-comment">// é…ç½® NVIC</span>
    NVIC_EnableIRQ(USART2_IRQn);
}

<span class="hljs-type">void</span> <span class="hljs-title function_">USART2_SendChar</span><span class="hljs-params">(<span class="hljs-type">char</span> ch)</span> {
    <span class="hljs-keyword">while</span>(!(USART2-&gt;SR &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">7</span>))); <span class="hljs-comment">// ç­‰å¾… TXE</span>
    USART2-&gt;DR = ch;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">USART2_SendString</span><span class="hljs-params">(<span class="hljs-type">char</span> *str)</span> {
    <span class="hljs-keyword">while</span>(*str) {
        USART2_SendChar(*str++);
    }
}

<span class="hljs-comment">// ä¸­æ–­æ¥æ”¶å¤„ç†</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">USART2_IRQHandler</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-keyword">if</span>(USART2-&gt;SR &amp; (<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">5</span>)) { <span class="hljs-comment">// RXNE</span>
        <span class="hljs-type">uint8_t</span> data = USART2-&gt;DR;
        <span class="hljs-comment">// åœ¨è¿™é‡Œå¤„ç†æ¥æ”¶åˆ°çš„ MQTT æ•°æ®</span>
    }
}
</code></pre>
<hr/>
<h4 data-id="heading-105">9. OLED é©±åŠ¨ (ç®€åŒ–ç‰ˆ)</h4>
<p><strong>ç¡¬ä»¶è¿æ¥</strong>ï¼šåŒ I2C</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> OLED_ADDR 0x78 </span>

<span class="hljs-type">void</span> <span class="hljs-title function_">OLED_WriteCmd</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> cmd)</span> {
    I2C_Start();
    I2C_SendByte(OLED_ADDR);
    I2C_SendByte(<span class="hljs-number">0x00</span>); <span class="hljs-comment">// Co=0, D/C#=0</span>
    I2C_SendByte(cmd);
    I2C_Stop();
}

<span class="hljs-type">void</span> <span class="hljs-title function_">OLED_WriteData</span><span class="hljs-params">(<span class="hljs-type">uint8_t</span> data)</span> {
    I2C_Start();
    I2C_SendByte(OLED_ADDR);
    I2C_SendByte(<span class="hljs-number">0x40</span>); <span class="hljs-comment">// Co=0, D/C#=1</span>
    I2C_SendByte(data);
    I2C_Stop();
}

<span class="hljs-type">void</span> <span class="hljs-title function_">OLED_Init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    Delay_ms(<span class="hljs-number">100</span>);
    <span class="hljs-comment">// å¸¸ç”¨åˆå§‹åŒ–åºåˆ—</span>
    OLED_WriteCmd(<span class="hljs-number">0xAE</span>); <span class="hljs-comment">// Display Off</span>
    OLED_WriteCmd(<span class="hljs-number">0x20</span>); OLED_WriteCmd(<span class="hljs-number">0x02</span>); <span class="hljs-comment">// Set Memory Addressing Mode</span>
    OLED_WriteCmd(<span class="hljs-number">0xB0</span>); <span class="hljs-comment">// Set Page Start Address</span>
    OLED_WriteCmd(<span class="hljs-number">0xC8</span>); <span class="hljs-comment">// Set COM Output Scan Direction</span>
    OLED_WriteCmd(<span class="hljs-number">0x00</span>); <span class="hljs-comment">// Set Low Column Address</span>
    OLED_WriteCmd(<span class="hljs-number">0x10</span>); <span class="hljs-comment">// Set High Column Address</span>
    OLED_WriteCmd(<span class="hljs-number">0x40</span>); <span class="hljs-comment">// Set Start Line Address</span>
    OLED_WriteCmd(<span class="hljs-number">0x81</span>); OLED_WriteCmd(<span class="hljs-number">0xCF</span>); <span class="hljs-comment">// Contrast</span>
    OLED_WriteCmd(<span class="hljs-number">0xA1</span>); <span class="hljs-comment">// Set Segment Re-map</span>
    OLED_WriteCmd(<span class="hljs-number">0xA6</span>); <span class="hljs-comment">// Normal Display</span>
    OLED_WriteCmd(<span class="hljs-number">0xA8</span>); OLED_WriteCmd(<span class="hljs-number">0x3F</span>); <span class="hljs-comment">// Multiplex Ratio</span>
    OLED_WriteCmd(<span class="hljs-number">0xAF</span>); <span class="hljs-comment">// Display On</span>
}

<span class="hljs-comment">// æ¸…å±</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">OLED_Clear</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">uint8_t</span> i, n;
    <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">8</span>;i++) {
        OLED_WriteCmd(<span class="hljs-number">0xB0</span> + i);
        OLED_WriteCmd(<span class="hljs-number">0x00</span>);
        OLED_WriteCmd(<span class="hljs-number">0x10</span>);
        <span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;<span class="hljs-number">128</span>;n++) OLED_WriteData(<span class="hljs-number">0x00</span>);
    }
}
</code></pre>
<h3 data-id="heading-106">5.3 é¡¹ç›®æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-107">10. ä¸»å‡½æ•° (Main Loop)</h4>
<p>è¿™æ˜¯å¦‚ä½•è°ƒåº¦ä¸Šè¿°é©±åŠ¨çš„ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// main.c ç¤ºä¾‹</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">uint8_t</span> t_in, h_in, t_out, h_out;
    <span class="hljs-type">uint16_t</span> light, sound;
    <span class="hljs-type">long</span> weight;
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">128</span>];

    System_Init_Config();
    I2C_GPIO_Config();
    ADC_Config();
    HX711_Init();
    USART2_Config(<span class="hljs-number">115200</span>); <span class="hljs-comment">// è¿æ¥ 4G/Wifi</span>
    
    OLED_Init();
    OLED_Clear();
    BH1750_Init();
    
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) {
        <span class="hljs-comment">// 1. é‡‡é›†æ•°æ®</span>
        DHT11_Read_Data(GPIOA, <span class="hljs-number">4</span>, &amp;t_in, &amp;h_in);
        DHT11_Read_Data(GPIOA, <span class="hljs-number">5</span>, &amp;t_out, &amp;h_out);
        light = BH1750_Read();
        weight = HX711_Read() / <span class="hljs-number">100</span>; <span class="hljs-comment">// ç®€å•æ¯”ä¾‹æ¢ç®—ï¼Œå®é™…éœ€æ ¡å‡†å…¬å¼</span>
        sound = Get_Sound_Level();
        
        <span class="hljs-comment">// 2. å¤„ç†éœ‡åŠ¨ (PB0)</span>
        <span class="hljs-type">uint8_t</span> vib = (GPIOB-&gt;IDR &amp; <span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// 3. æ ¼å¼åŒ–ä¸º JSON å­—ç¬¦ä¸² (éœ€è‡ªè¡Œå®ç° sprintf æˆ–å¼•ç”¨ stdio.h)</span>
        <span class="hljs-comment">// {"temp_in":25,"weight":1000...}</span>
        <span class="hljs-comment">// sprintf(buffer, "{\"temp_in\":%d, \"humi_in\":%d, \"weight\":%ld}\r\n", t_in, h_in, weight);</span>
        
        <span class="hljs-comment">// 4. é€šè¿‡ä¸²å£å‘é€ç»™é€šä¿¡æ¨¡å—</span>
        <span class="hljs-comment">// USART2_SendString(buffer);</span>
        
        <span class="hljs-comment">// 5. OLED æ˜¾ç¤º (éœ€é…åˆå­—åº“)</span>
        
        Delay_ms(<span class="hljs-number">1000</span>); <span class="hljs-comment">// 1ç§’é‡‡é›†ä¸€æ¬¡</span>
    }
}
</code></pre>
<ol>
<li><strong>å¤´æ–‡ä»¶åŒ…å«</strong>ï¼šæ‰€æœ‰ <code>.c</code> æ–‡ä»¶éƒ½éœ€è¦ <code>#include "stm32f10x.h"</code>ã€‚</li>
<li><strong>ä¸­æ–­å¤„ç†</strong>ï¼šå¦‚æœä½¿ç”¨ USART ä¸­æ–­ï¼Œè¯·ç¡®ä¿åœ¨å¯åŠ¨ä»£ç ï¼ˆ<code>.s</code> æ–‡ä»¶ï¼‰ä¸­æ²¡æœ‰æ³¨é‡Šæ‰ <code>USART2_IRQHandler</code>ï¼Œæˆ–è€…ä½ è‡ªå·±å®šä¹‰äº†å®ƒã€‚</li>
<li><strong>HX711 æ ¡å‡†</strong>ï¼šä»£ç ä¸­è¿”å›çš„æ˜¯åŸå§‹ ADC å€¼ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦å‡å»çš®é‡ï¼ˆç©ºè½½å€¼ï¼‰å¹¶é™¤ä»¥ç³»æ•°ï¼ˆGap Valueï¼‰æ‰èƒ½å¾—åˆ°å…‹æ•°ã€‚</li>
<li><strong>OLED å­—åº“</strong>ï¼šç”±äºç¯‡å¹…é™åˆ¶ï¼Œè¿™é‡Œæ²¡æœ‰æä¾› 8x16 çš„ç‚¹é˜µæ•°ç»„ï¼ˆ<code>F8X16[]</code>ï¼‰</li>
</ol>
<h3 data-id="heading-108">5.4 ç¨‹åºä¸‹è½½</h3>
<p><strong>ä¹Ÿæœ‰è§†é¢‘æ•™ç¨‹ï¼š</strong></p>
<p>è®²è§£å¦‚ä½•ç¼–è¯‘ä»£ç ï¼Œä¸‹è½½STM32ç¨‹åº: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Cw4m1e7Yc" target="_blank" title="https://www.bilibili.com/video/BV1Cw4m1e7Yc" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1Cwâ€¦</a></p>
<p>æ‰“STM32çš„keilå·¥ç¨‹ï¼Œç¼–è¯‘ä»£ç ã€ç„¶åï¼Œä½¿ç”¨USBçº¿å°†å¼€å‘æ¿çš„å·¦è¾¹çš„USBå£(ä¸²å£1)ä¸ç”µè„‘çš„USBè¿æ¥ï¼Œæ‰“å¼€ç¨‹åºä¸‹è½½è½¯ä»¶ä¸‹è½½ç¨‹åºã€‚</p>
<p>å…·ä½“ä¸‹è½½è¿‡ç¨‹çœ‹ä¸‹é¢å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ddf50cd0f9aa4dd48af9dc490902ef94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=kDI3oWqNCDfGW699cZMcde%2FsLYk%3D" alt="image-20240319223247836" loading="lazy"/></p>
<p>æ‰“å¼€ç¨‹åºä¸‹è½½è½¯ä»¶ï¼š[è½¯ä»¶å°±åœ¨èµ„æ–™åŒ…é‡Œçš„è½¯ä»¶å·¥å…·ç›®å½•ä¸‹]</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3570c4edcc9a499c8b2b19e7dc1406d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=XWULc9Z2pINX3oRx0eBS9NrKj4U%3D" alt="image-20240120160735942" loading="lazy"/></p>
<h3 data-id="heading-109">5.5 ç¨‹åºæ­£å¸¸è¿è¡Œæ•ˆæœ</h3>
<p>è®¾å¤‡è¿è¡Œè¿‡ç¨‹ä¸­ä¼šé€šè¿‡ä¸²å£æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸²å£æ‰“å°äº†è§£ç¨‹åºæ˜¯å¦æ­£å¸¸ã€‚</p>
<p>ç¨‹åºä¸‹è½½ä¹‹åï¼Œå¯ä»¥æ‰“å¼€ä¸²å£è°ƒè¯•åŠ©æ‰‹æŸ¥çœ‹ç¨‹åºè¿è¡Œçš„çŠ¶æ€ä¿¡æ¯ã€‚[è½¯ä»¶å°±åœ¨èµ„æ–™åŒ…é‡Œçš„è½¯ä»¶å·¥å…·ç›®å½•ä¸‹]</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fb0871e416d43b582bae9e23c0043b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=uLw11ofZ1jUkCsTdiUR5R9XRgmY%3D" alt="image-20240327212042050" loading="lazy"/></p>
<h3 data-id="heading-110">5.6 å–æ¨¡è½¯ä»¶çš„ä½¿ç”¨</h3>
<p>æ˜¾ç¤ºå±ä¸Šä¼šæ˜¾ç¤ºä¸­æ–‡ï¼Œå­—æ¯ï¼Œæ•°å­—ç­‰æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å–æ¨¡è½¯ä»¶è¿›è¡Œå–æ¨¡è®¾ç½®ã€‚</p>
<p>[è½¯ä»¶å°±åœ¨èµ„æ–™åŒ…é‡Œçš„è½¯ä»¶å·¥å…·ç›®å½•ä¸‹]</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/264aabedda2147ef8fba0c30f4176a2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=HQlUWF1XZinMvATYKRTTkm3SOtk%3D" alt="image-20241024142522970" loading="lazy"/></p>
<p><strong>æ‰“å¼€è½¯ä»¶ä¹‹åï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5e5e576eb4540fe83923f667a1ad34b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRFPlsI_pvpnlk6U=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765357411&amp;x-signature=Yv8DAfaDTMF970qyE6yENpZyFfY%3D" alt="image-20241127212320020" loading="lazy"/></p>
<h2 data-id="heading-111">å…­ã€æ€»ç»“</h2>
<p>æœ¬é¡¹ç›®æˆåŠŸè®¾è®¡å¹¶æ„å»ºäº†ä¸€å¥—åŸºäº STM32 ä¸åä¸ºäº‘å¹³å°çš„ç‰©è”ç½‘èœ‚ç®±æ™ºèƒ½ç›‘æµ‹ç³»ç»Ÿã€‚ç³»ç»Ÿä»¥ STM32F103C8T6 ä¸ºæ ¸å¿ƒæ§åˆ¶å•å…ƒï¼Œæœ‰æœºèåˆäº†å¤šç»´ä¼ æ„Ÿå™¨ç½‘ç»œï¼ˆæ¸©æ¹¿åº¦ã€é‡é‡ã€å£°éŸ³ã€éœ‡åŠ¨ã€å…‰ç…§ï¼‰ã€æ— çº¿é€šä¿¡æŠ€æœ¯ï¼ˆ4G/Wi-Fiï¼‰ä»¥åŠ Qt ä¸Šä½æœºå¯è§†åŒ–æŠ€æœ¯ï¼Œå®ç°äº†ä»æ•°æ®æ„ŸçŸ¥ã€è¾¹ç¼˜å¤„ç†ã€è¿œç¨‹ä¼ è¾“åˆ°äº‘ç«¯äº¤äº’çš„å®Œæ•´é—­ç¯ã€‚</p>
<p>é€šè¿‡æœ¬è®¾è®¡ï¼Œæœ‰æ•ˆè§£å†³äº†ä¼ ç»Ÿå…»èœ‚ä¸šä¸­ä¾èµ–äººå·¥å·¡æŸ¥ã€ç®¡ç†æ•ˆç‡ä½ä¸”æ˜“å¹²æ‰°èœ‚ç¾¤æ­£å¸¸ç”Ÿæ´»ç­‰æ ¸å¿ƒç—›ç‚¹ã€‚ç³»ç»Ÿä¸ä»…èƒ½å¤Ÿå…¨å¤©å€™å®æ—¶ç›‘æµ‹èœ‚ç®±çš„å†…å¤–ç¯å¢ƒä¸èœ‚ç¾¤æ´»åŠ›ï¼Œè¿˜èƒ½é€šè¿‡é‡é‡åˆ†æä¸éœ‡åŠ¨æ£€æµ‹åŠŸèƒ½ï¼Œå¯¹åˆ†èœ‚ã€èœ‚èœœæ»¡è½½ã€å¤©æ•Œå…¥ä¾µç­‰å¼‚å¸¸æƒ…å†µè¿›è¡ŒåŠæ—¶é¢„è­¦ã€‚è¿™ç§â€œéä¾µå…¥å¼â€çš„æ™ºèƒ½ç®¡ç†æ¨¡å¼ï¼Œå¤§å¹…é™ä½äº†å…»èœ‚äººçš„åŠ³åŠ¨å¼ºåº¦ï¼Œä¸ºèœ‚ç¾¤å¥åº·ç¹è‚²å’Œèœ‚èœœå¢äº§æä¾›äº†ç§‘å­¦ã€å®¢è§‚çš„æ•°æ®æ”¯æ’‘ã€‚æ€»ä½“è€Œè¨€ï¼Œæœ¬ç³»ç»Ÿç¡¬ä»¶æˆæœ¬å¯æ§ã€åŠŸèƒ½å®ç”¨ä¸”è¿è¡Œç¨³å®šï¼Œå……åˆ†éªŒè¯äº†ç‰©è”ç½‘æŠ€æœ¯åœ¨æ™ºæ…§å†œä¸šç»†åˆ†é¢†åŸŸçš„åº”ç”¨æ½œåŠ›å’Œå®ç”¨ä»·å€¼ï¼Œå…·æœ‰è‰¯å¥½çš„æ¨å¹¿å‰æ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™ ArkUI ä»é›¶åˆ°ç²¾é€šï¼šåŸºç¡€è¯­æ³•å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7578902814022565903</link>    <guid>https://juejin.cn/post/7578902814022565903</guid>    <pubDate>2025-12-02T07:21:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578902814022565903" data-draft-id="7576573061580537897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™ ArkUI ä»é›¶åˆ°ç²¾é€šï¼šåŸºç¡€è¯­æ³•å…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,HarmonyOS,Android"/> <meta itemprop="datePublished" content="2025-12-02T07:21:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hqk"/> <meta itemprop="url" content="https://juejin.cn/user/2357827986264942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™ ArkUI ä»é›¶åˆ°ç²¾é€šï¼šåŸºç¡€è¯­æ³•å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2357827986264942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hqk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T07:21:01.000Z" title="Tue Dec 02 2025 07:21:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    81
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡å‚ä¸äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F7e230b074eaa41c587c71c1d1a9a6514%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/7e230b074eaa41c587c71c1d1a9a6514?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">åä¸ºå®˜æ–¹æ´»åŠ¨ï¼šHarmonyOSèµ‹èƒ½èµ„æºä¸°å¯Œåº¦å»ºè®¾</a></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œè®²è§£äº†<a href="https://juejin.cn/post/7576057623742464042" target="_blank" title="https://juejin.cn/post/7576057623742464042">é¸¿è’™ArkTSåŸºç¡€è¯­æ³•</a> ï¼Œæœ¬ç¯‡å°†ä¼šè®²è§£ArkUIç›¸å…³çš„çŸ¥è¯†ç‚¹ã€‚</p>
<h2 data-id="heading-1">1ã€ArkUIä»‹ç»</h2>
<p>ArkUIï¼šAbility kitåœ¨UIAbilityç»„ä»¶å¯ä»¥ä½¿ç”¨ArkUIæä¾›çš„ç»„ä»¶ï¼Œäº‹ä»¶ï¼ŒåŠ¨æ•ˆï¼ŒçŠ¶æ€ç®¡ç†ç­‰èƒ½åŠ›ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ArkUIçš„<strong>åŸºæœ¬ç»“æ„</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e560ee37da674992bb5494d5a118bb90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=nU4FDMOuUgaWoUoK8kUB9dGC9Js%3D" alt="QQ_1764139591463.png" loading="lazy"/>
å¦‚å›¾æ‰€ç¤ºï¼š</p>
<ul>
<li>
<p>ArkUIåŸºæœ¬ç»“æ„åŒ…å«ï¼š<strong>è£…é¥°å™¨</strong>ã€<strong>è‡ªå®šä¹‰ç»„ä»¶</strong>ã€<strong>ç³»ç»Ÿç»„ä»¶</strong>ã€ä»¥åŠç»„ä»¶å†…ä¸€ç³»åˆ—<strong>å±æ€§æ–¹æ³•ä¸äº‹ä»¶æ–¹æ³•</strong>ç­‰</p>
</li>
<li>
<p>è£…é¥°å™¨ï¼šç”¨äºè£…é¥°ç±»ã€ç»“æ„ã€æ–¹æ³•ä»¥åŠå˜é‡ï¼Œå¹¶èµ‹äºˆå¯¹åº”çš„å«ä¹‰ã€‚å¦‚ä¸Šå›¾æ‰€ç¤º<code>@Entry</code>ã€<code>@Component</code>å’Œ<code>@State</code>éƒ½æ˜¯è£…é¥°å™¨</p>
<ul>
<li><code>@Entry</code>ï¼šè¡¨ç¤ºè¯¥è‡ªå®šä¹‰ç»„ä»¶ä¸ºå…¥å£ç»„ä»·</li>
<li><code>@Component</code>ï¼šè¡¨ç¤ºè‡ªå®šä¹‰ç»„ä»¶</li>
<li><code>@State</code>ï¼šè¡¨ç¤ºç»„ä»¶ä¸­çš„çŠ¶æ€å˜é‡ï¼ŒçŠ¶æ€å˜é‡å˜åŒ–ä¼šè§¦å‘UIåˆ·æ–°</li>
</ul>
</li>
<li>
<p>UIæè¿°ï¼šä»¥å£°æ˜å¼çš„æ–¹æ³•æ¥æè¿°UIçš„ç»“æ„ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤º build()æ–¹æ³•ä¸­çš„ä»£ç å—</p>
</li>
<li>
<p>è‡ªå®šä¹‰ç»„ä»¶ï¼šå¯å¤ç”¨çš„UIæ¨¡å—ï¼Œå¯ç»„åˆå…¶ä»–ç»„ä»¶ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºè¢«<code>@Component</code>ä¿®é¥°çš„<code>struct Page4</code></p>
</li>
<li>
<p>å±æ€§æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨å¯¹åº”ç»„ä»¶çš„å¤šé¡¹å±æ€§æ–¹æ³•ï¼Œå¦‚<code>id()</code>ã€<code>width()</code>ã€<code>fontSize()</code>ç­‰</p>
</li>
<li>
<p>äº‹ä»¶æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨è®¾ç½®å¤šä¸ªäº‹ä»¶çš„å“åº”é€»è¾‘ï¼Œå¦‚<code>onClick()</code></p>
</li>
</ul>
<p>å½“æˆ‘ä»¬æŒæ¡äº† ArkUI çš„åŸºæœ¬ç»“æ„åï¼Œä¼šå‘ç° <strong>UIçš„æœ€ç»ˆå‘ˆç°å…¶å®æ˜¯ç”±ä¸€ä¸ªä¸ªç»„ä»¶æ‹¼èµ·æ¥çš„</strong>ã€‚</p>
<p>æ‰€ä»¥åœ¨ç†è§£â€œæ¡†æ¶æ€ä¹ˆç»„ç»‡ UIâ€ä¹‹åï¼Œæˆ‘ä»¬ä¸‹ä¸€æ­¥å°±éœ€è¦å¼„æ¸…æ¥šï¼šâ€œçœŸæ­£æ„æˆ UI çš„é‚£äº›ç»„ä»¶æœ‰å“ªäº›ï¼Ÿå®ƒä»¬å„è‡ªæ€ä¹ˆç”¨ï¼Ÿâ€</p>
<p>å› æ­¤ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ­£å¼è¿›å…¥ArkUIçš„ç»„ä»¶å­¦ä¹ éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ç³»åˆ—å°æ¡ˆä¾‹ç”±æµ…å…¥æ·±é€æ­¥å¯¹ArkUIè¿›è¡Œè®²è§£ã€‚</p>
<h2 data-id="heading-2">2ã€ArkUIç»„ä»¶è®²è§£</h2>
<p>ArkUIç³»ç»Ÿç»„ä»¶åˆåˆ†ä¸ºï¼šå®¹å™¨ç»„ä»¶ã€åŸºç¡€ç»„ä»¶ã€‚</p>
<h3 data-id="heading-3">2.1 å®¹å™¨ç»„ä»¶</h3>
<p>å®¹å™¨ç»„ä»¶é¡¾åæ€ä¹‰ç±»ä¼¼äºä¸€ä¸ªå®¹å™¨ä¸€æ ·ï¼Œå¯ä»¥è£…ä¸‹ä¸åŒçš„ç»„ä»¶ã€‚é‚£è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿé‚£ä¹ˆå°±è¿æ¥äº†ç¬¬ä¸€ä¸ªå®¹å™¨ç»„ä»¶<code>Row</code></p>
<h4 data-id="heading-4">2.1.1 Rowå®¹å™¨ç»„ä»¶</h4>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ç¬¬ä¸€ä¸ªå°æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct Index {
  build() {
    Row({space: 20}){
      Text("å­—ç¬¦ä¸²1").width(100).height(100).backgroundColor(Color.Pink)
      Text("å­—ç¬¦ä¸²2").width(100).height(100).backgroundColor(Color.Red)
      Text("å­—ç¬¦ä¸²3").width(100).height(100).backgroundColor(Color.Blue).fontColor(Color.White)
    }
    .width('100%')
    .height('100%')
    .border({color:Color.Red, style: BorderStyle.Dashed, width:1})
    .backgroundColor(Color.Yellow)
    .justifyContent(FlexAlign.SpaceEvenly)
    .alignItems(VerticalAlign.Center)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13275a67886448468d15e47ccd980afc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=bVZbHj9JVBoUoZYYPRZprAJKuD8%3D" alt="QQ_1764225287496.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li><code>Row{}</code>é‡Œé¢åŒ…å«äº†ä¸‰ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”è¿™ä¸‰ä¸ªç»„ä»¶æ˜¯æ°´å¹³æ’åˆ—</li>
<li><code>Row{}</code>è®¾ç½®äº†ä¸åŒçš„å±æ€§
<ul>
<li><code>{space: 20}</code>è¡¨ç¤ºå®¹å™¨å†…ç»„ä»¶ä¹‹é—´çš„é—´è·ä¸º<code>20vp</code>ï¼Œè¿™ä¸ª<code>vp</code>å°±å¥½æ¯”<code>Android</code>é‡Œé¢çš„<code>dp</code>å•ä½</li>
<li><code>.width('100%').height('100%')</code>ï¼Œè¡¨ç¤ºå®½é«˜éƒ½æ˜¯100%ï¼Œå……æ»¡æ•´ä¸ªå±å¹•</li>
<li><code>border({color:Color.Red, style: BorderStyle.Dashed, width:1})</code>ç»™è¿™ä¸ª<code>Row</code>ç»„ä»¶è®¾ç½®äº†è¾¹æ¡†ä»¥åŠè¾¹æ¡†å±æ€§</li>
<li><code>.justifyContent(FlexAlign.SpaceEvenly)</code>ç»™è¿™ä¸ª<code>Row</code>ç»„ä»¶è®¾ç½®äº†<strong>æ°´å¹³å¯¹é½æ–¹å¼ï¼Œè¿™ä¸ªå±æ€§æ–¹æ³•å®ƒå’Œè¿™ä¸ª<code>Row{}</code>ç»„ä»¶æ˜¯åŒä¸€ç§å¯¹é½æ–¹å‘</strong></li>
<li><code>.alignItems(VerticalAlign.Center)</code>ç»™è¿™ä¸ª<code>Row</code>ç»„ä»¶è®¾ç½®äº†<strong>å‚ç›´å¯¹é½æ–¹å¼ï¼Œè¿™ä¸ªå±æ€§æ–¹æ³•å®ƒå’Œè¿™ä¸ª<code>Row{}</code>ç»„ä»¶æ˜¯ç›¸åçš„å¯¹é½æ–¹å‘</strong></li>
</ul>
</li>
</ul>
<p>çœ‹åˆ°è¿™æ˜¯ä¸æ˜¯ä¼šæƒ³ï¼šé‚£æˆ‘å’‹çŸ¥é“è¿™äº›ç»„ä»¶æœ‰å“ªäº›æ–¹æ³•ï¼Ÿç„¶åè¿™äº›æ–¹æ³•åˆè¯¥å¦‚ä½•èµ‹å€¼å‘¢ï¼Ÿä¸å¯èƒ½æ¯ä¸ªç»„ä»¶æˆ‘éƒ½è¦å»æ­»è®°ç¡¬èƒŒæ¶©ï¼</p>
<h5 data-id="heading-5">2.1.1.1 æºç å‰–æ</h5>
<p>æ‰€è°“çš„æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼æˆ‘è¿™å°†ä¸€æ­¥ä¸€æ­¥çš„å¸¦ä½ å»å‰–ææºç ï¼Œå°±ç®—ä»¥åé‡åˆ°é™Œç”Ÿç»„ä»¶ä¹Ÿèƒ½è®©ä½ æ›´å¿«çš„ç†Ÿæ‚‰å¹¶ä½¿ç”¨å®ƒï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0c1bd004395473ca6adaa0d889ac683~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=4H%2FytptMfQrn%2B1cjoC0vuBe6f6w%3D" alt="QQ_1764227796785.png" loading="lazy"/></p>
<p><strong>å¦‚å›¾æ‰€ç¤º</strong></p>
<p>æŒ‰ä½<code>Ctrl</code>+é¼ æ ‡å·¦é”®ç‚¹å‡»<code>Row</code>ï¼Œä½ å°†ä¼šçœ‹åˆ°è¿™æ ·çš„ä»£ç </p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">Row</span>: RowInterface;
</code></pre>
<p>ç»§ç»­æŒ‰ä½<code>Ctrl</code>+é¼ æ ‡å·¦é”®ç‚¹å‡»<code>RowInterface</code>ï¼Œå°†ä¼šæ˜¯å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css">interface RowInterface {
    (value?: {
        space?: string | number;
    }): RowAttribute;
}
</code></pre>
<p>è¿™é‡Œåªçœ‹åˆ°åˆšåˆš <code>Row({space: 20})</code>è¿™å¥ä»£ç çš„ä½¿ç”¨æ–¹å¼</p>
<ul>
<li><code>value? </code> æœ‰<code>?</code>ä¿®é¥°è¯´æ˜äº†è¿™ä¸ªvalueå¯ä¸ºç©ºï¼Œè€Œè¿™ä¸ªå€¼çš„ç±»å‹æ˜¯ <code>{space?: string | number;}</code>è¿™æ ·çš„ç»“æ„ä½“</li>
<li><code>{space?: string | number;}</code>è¿™æ ·çš„ç»“æ„ä½“é‡Œé¢åªæœ‰<code>space?</code>å˜é‡ï¼Œè€Œä¸”è¿™ä¸ªå˜é‡ä¹Ÿæœ‰<code>?</code>ä¿®é¥°ï¼Œè¯´æ˜äº†è¿™ä¸ª<code>space</code>ä¹Ÿå¯ä¸ºç©ºï¼Œè€Œè¿™ä¸ªå€¼ç±»å‹æ˜¯<code>string | number</code>ï¼Œè¯´æ˜äº†ï¼Œå¦‚æœå€¼ä¸ä¸ºç©ºçš„è¯ï¼Œé‚£ä¹ˆ<code>space</code>è¦ä¹ˆæ˜¯<code>string</code>è¦ä¹ˆæ˜¯ <code>number</code></li>
</ul>
<p>æ‰€ä»¥åœ¨ä½¿ç”¨<code>Row</code>ç»„ä»¶æ—¶ï¼Œæ„é€ æ–¹æ³•é‡Œé¢å¯ä»¥ä¼ <code>{space?: string | number;}</code> è¿™æ ·çš„ç»“æ„ä½“</p>
<p>ç„¶è€Œè¿™é‡Œæ²¡çœ‹åˆ°æƒ³è¦çš„å±æ€§æ–¹æ³•ï¼Œç»§ç»­å¾€ä¸‹çœ‹ï¼ŒæŒ‰ä½<code>Ctrl</code>+é¼ æ ‡å·¦é”®ç‚¹å‡»<code>RowAttribute</code>ï¼Œå°†ä¼šæ˜¯å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-scala" lang="scala">declare <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RowAttribute</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CommonMethod&lt;RowAttribute&gt;</span> </span>{

 <span class="hljs-comment">//Called when the vertical alignment is set.</span>
 alignItems(value: <span class="hljs-type">VerticalAlign</span>): <span class="hljs-type">RowAttribute</span>;
 
 <span class="hljs-comment">//Called when the horizontal alignment is set.</span>
 justifyContent(value: <span class="hljs-type">FlexAlign</span>): <span class="hljs-type">RowAttribute</span>;

 reverse(isReversed: <span class="hljs-type">Optional</span>&lt;boolean&gt;): <span class="hljs-type">RowAttribute</span>;
 
}
</code></pre>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬çœ‹åˆ°<code>Row</code>ç»„ä»¶ç‰¹æœ‰çš„å±æ€§<code>alignItems</code>ã€<code>justifyContent</code>ã€<code>reverse</code>ï¼Œå¯¹åº”å±æ€§æ–¹æ³•çš„å€¼èŒƒå›´ï¼Œå¯ä»¥ç»§ç»­æŒ‰ç…§åˆšåˆšçš„æ–¹å¼å¾€ä¸‹çœ‹</p>
<p>ä¸è¿‡åœ¨è¿™é‡Œé¢æˆ‘ä»¬å°±åªçœ‹åˆ°è¿™ä¸‰ä¸ªå±æ€§æ–¹æ³•ï¼Œä¸Šé¢æ¡ˆä¾‹é‡Œçš„<code>width</code>ä»¥åŠå…¶ä»–çš„å±æ€§æ–¹æ³•å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬çœ‹åˆ°<code>class RowAttribute extends CommonMethod&lt;RowAttribute&gt;</code>è¿™å¥ä»£ç ï¼Œ<a href="https://juejin.cn/post/7576057623742464042" target="_blank" title="https://juejin.cn/post/7576057623742464042">åœ¨ä¸Šä¸€ç¯‡åŸºç¡€è¯­æ³•ä¸­</a>ï¼Œè®²è§£äº†è¿™æ˜¯ç»§æ‰¿å…³ç³»ï¼Œä¹Ÿå°±æ˜¯<code>RowAttribute</code>æ‹¥æœ‰äº†<code>CommonMethod</code>æ‰€æœ‰éç§æœ‰çš„å±æ€§ä»¥åŠæ–¹æ³•</p>
<p>é‚£ç»§ç»­æŒ‰ä½<code>Ctrl</code>+é¼ æ ‡å·¦é”®ç‚¹å‡»<code>CommonMethod</code>ï¼Œå°†ä¼šæ˜¯å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">declare class CommonMethod&lt;T&gt; {
  <span class="hljs-comment">//....çœç•¥éƒ¨åˆ†ä»£ç </span>
  <span class="hljs-attribute">width</span>(value: Length): T;
  
  <span class="hljs-attribute">height</span>(value: Length): T;
  
  <span class="hljs-attribute">padding</span>(value: Padding | Length | LocalizedPadding): T
  
  <span class="hljs-built_in">background</span>(builder: CustomBuilder, options?: {
    align?: Alignment;
  }): T;
  
  <span class="hljs-attribute">border</span>(value: BorderOptions): T;
  
  <span class="hljs-built_in">backgroundColor</span>(value: ResourceColor): T;
 <span class="hljs-comment">//....çœç•¥éƒ¨åˆ†ä»£ç </span>

</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±çœ‹åˆ°äº†æˆ‘ä»¬æ¡ˆä¾‹ä¸Šä½¿ç”¨çš„æ‰€æœ‰å±æ€§æ–¹æ³•äº†ã€‚è¿™é‡Œå¯ä»¥æ€»ç»“å‡ºï¼š<strong>ç»„ä»¶éƒ½æœ‰å®ƒè‡ªå·±ç‹¬æœ‰çš„å±æ€§ï¼Œå¹¶ä¸”éç‹¬æœ‰ï¼ˆå…¬å…±ï¼‰å±æ€§é€šè¿‡<code>extends CommonMethod&lt;T&gt;</code> æ–¹å¼è·å¾—</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬ç†Ÿæ‚‰äº†<code>Row</code>ç»„ä»¶ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªç»„ä»¶</p>
<h4 data-id="heading-6">2.1.2 Columnå®¹å™¨ç»„ä»¶</h4>
<p>æˆ‘ä»¬æ¥ç€æ¥çœ‹æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct ColumnPage {
  build() {
    Column({space: 20}){
      Row().width(100).height(100).backgroundColor(Color.Pink)
      Row().width(100).height(100).backgroundColor(Color.Yellow)
      Row().width(100).height(100).backgroundColor(Color.Blue)
      Row().width(100).height(100).backgroundColor(Color.Green)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Gray)
    .justifyContent(FlexAlign.SpaceEvenly)
    .alignItems(HorizontalAlign.End)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c37862201240e39994c5a5fe5689d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=Dyxm3zjv5xldepi0%2BqqutBsPskc%3D" alt="QQ_1764230669769.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li><code>Column{}</code>é‡Œé¢åŒ…å«äº†å››ä¸ªç»„ä»¶ï¼Œå¹¶ä¸”è¿™å››ä¸ªç»„ä»¶æ˜¯å‚ç›´æ’åˆ—</li>
<li><code>.justifyContent(FlexAlign.SpaceEvenly)</code>ç»™è¿™ä¸ª<code>Column</code>ç»„ä»¶è®¾ç½®äº†<strong>å‚ç›´å¯¹é½æ–¹å¼ï¼Œè¿™ä¸ªå±æ€§æ–¹æ³•å®ƒå’Œè¿™ä¸ª<code>Column{}</code>ç»„ä»¶æ˜¯åŒä¸€ç§å¯¹é½æ–¹å‘</strong></li>
<li><code>.alignItems(HorizontalAlign.End)</code>ç»™è¿™ä¸ª<code>Column</code>ç»„ä»¶è®¾ç½®äº†<strong>æ°´å¹³å¯¹é½æ–¹å¼ï¼Œè¿™ä¸ªå±æ€§æ–¹æ³•å®ƒå’Œè¿™ä¸ª<code>Column{}</code>ç»„ä»¶æ˜¯ç›¸åçš„å¯¹é½æ–¹å‘</strong></li>
</ul>
<p>è¿™ä¸ª<code>Column</code>åˆ—ç»„ä»¶ä¸<code>Row</code>è¡Œç»„ä»¶æ˜¯ç›¸åçš„ï¼Œç‰¹åˆ«æ³¨æ„<code>Column</code>çš„<code>.alignItems(HorizontalAlign.End)</code>å±æ€§æ–¹æ³•é‡Œé¢æ˜¯<code>HorizontalAlign</code>ï¼Œè€Œ<code>Row</code>çš„<code>.alignItems(VerticalAlign.Center)</code>æ˜¯<code>VerticalAlign</code>ã€‚</p>
<p>OKï¼Œæˆ‘ä»¬ç»§ç»­ä¸‹ä¸€ä¸ªç»„ä»¶ï¼</p>
<h4 data-id="heading-7">2.1.3 Flexå®¹å™¨ç»„ä»¶</h4>
<p>Flexï¼ˆå¼¹æ€§ç»„ä»¶ï¼‰æä¾›æ›´åŠ æœ‰æ•ˆçš„æ–¹å¼å¯¹å®¹å™¨ä¸­çš„å­å…ƒç´ è¿›è¡Œæ’åˆ—ã€å¯¹é½å’Œåˆ†é…å‰©ä½™ç©ºé—´ã€‚</p>
<p>å®¹å™¨é»˜è®¤å­˜åœ¨ä¸»è½´ä¸äº¤å‰è½´ï¼Œå­å…ƒç´ é»˜è®¤æ²¿ä¸»è½´æ’åˆ—ï¼Œå­å…ƒç´ åœ¨ä¸»è½´æ–¹å‘çš„å°ºå¯¸ç§°ä¸ºä¸»è½´å°ºå¯¸ï¼Œåœ¨äº¤å‰è½´æ–¹å‘çš„å°ºå¯¸ç§°ä¸ºäº¤å‰è½´å°ºå¯¸ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aad9cc84edce4ba69e71cf54f60f51fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=vIrfiyASuH2vtI4rc27vCY4upfc%3D" alt="0000000000011111111.20250314163923.55033350674177624945588898470143.png" loading="lazy"/></p>
<p>æ—¢ç„¶<code>Flex</code>å®¹å™¨å¯ä»¥æ”¹å˜å­å…ƒç´ åœ¨ä¸»è½´ä¸äº¤å‰è½´æ’åˆ—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½å¤åˆ»<code>Row</code>ç»„ä»¶ä»¥åŠ<code>Column</code>ç»„ä»¶</p>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å½“Flexå®¹å™¨ä¸º<code>Row</code>ã€<code>RowReverse</code>æ’åˆ—æ—¶ï¼Œä¸»è½´ä¸äº¤å‰è½´å°±ä¸ºå›¾ä¸­æ‰€ç¤ºï¼›</li>
<li>å½“Flexå®¹å™¨ä¸º<code>Column</code>ã€<code>ColumnReverse</code>æ’åˆ—æ—¶ï¼Œå›¾ä¸­çš„ä¸»è½´å˜äº¤å‰è½´ï¼Œäº¤å‰è½´å˜ä¸»è½´</li>
</ul>
<h5 data-id="heading-8">2.1.3.1 å¤åˆ»Rowç»„ä»¶</h5>
<pre><code class="hljs language-ArkTS" lang="ArkTS">import { LengthMetrics } from '@kit.ArkUI';

@Entry
@Component
struct FlexiblePage {
  build() {
    Flex({
      direction: FlexDirection.Row,
      justifyContent: FlexAlign.Start,
      alignItems: ItemAlign.Start,
      wrap: FlexWrap.NoWrap,
      space: { main: LengthMetrics.vp(20), cross: LengthMetrics.vp(30) }
    }) {
      Column().width(100).height(200).backgroundColor(Color.Pink)
      Column().width(100).height(200).backgroundColor(Color.Red)
      Column().width(100).height(200).backgroundColor(Color.Blue)

      Column().width(100).height(200).backgroundColor(Color.White)
      Column().width(100).height(200).backgroundColor(Color.Green)
      Column().width(100).height(200).backgroundColor(Color.Orange)
    }
    .margin({ top: 10 })
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Gray)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœå›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2851334b2c614cf08377cd6b9189054b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=jISBMKCUzHU9cZP%2FEVhCPsJzO6g%3D" alt="QQ_1764233341962.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­</p>
<ul>
<li>ä½¿ç”¨<code>direction: FlexDirection.Row</code>è®©<code>Flex</code>ç»„ä»¶æˆåŠŸå¤åˆ»äº†<code>Row</code>ç»„ä»¶ç‰¹æ€§</li>
<li>å½“ç„¶<code>justifyContent</code>ä¸<code>alignItems</code>ä¹Ÿå…·å¤‡äº†<code>Row</code>ç»„ä»¶ç‰¹æ€§</li>
</ul>
<p>åˆšåˆšå¤åˆ»äº†<code>Row</code>ç»„ä»¶ï¼Œæ¥è¯•è¯•å¤åˆ»<code>Column</code>ç»„ä»¶</p>
<h5 data-id="heading-9">2.1.3.2 å¤åˆ»Columnç»„ä»¶</h5>
<pre><code class="hljs language-ArkTS" lang="ArkTS">import { LengthMetrics } from '@kit.ArkUI';

@Entry
@Component
struct FlexiblePage {
  build() {
   å¤åˆ»äº†`Column`ç»„ä»¶
   - ({
      direction: FlexDirection.Column,
      justifyContent: FlexAlign.Start,
      alignItems: ItemAlign.Start,
      wrap: FlexWrap.NoWrap,
      space: { main: LengthMetrics.vp(20), cross: LengthMetrics.vp(30) }
    }) {
      Column().width(100).height(200).backgroundColor(Color.Pink)
      Column().width(100).height(200).backgroundColor(Color.Red)
      Column().width(100).height(200).backgroundColor(Color.Blue)

      Column().width(100).height(200).backgroundColor(Color.White)
      Column().width(100).height(200).backgroundColor(Color.Green)
      Column().width(100).height(200).backgroundColor(Color.Orange)
    }
    .margin({ top: 10 })
    .width('100%')
    .height('100%')
    .backgroundColor(Color.Gray)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7cb176a192d4eaebae0ee1155eef561~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=x7GZLv2GNknfEgPYO2ZHT%2B2Mm44%3D" alt="QQ_1764235343899.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­</p>
<ul>
<li>ä»…ä»…æ”¹å˜äº†<code>direction</code>çš„å€¼ï¼ŒæˆåŠŸçš„å¤åˆ»äº†<code>Column</code>ç»„ä»¶</li>
<li>å¯¹åº”<code>justifyContent</code>ä¸<code>alignItems</code>ä¹Ÿå…·å¤‡äº†<code>Column</code>ç»„ä»¶ç‰¹æ€§</li>
<li>æ¡ˆä¾‹é‡Œé¢<code>wrap</code>è¡¨ç¤ºæ˜¯å¦å¤šè¡Œï¼Œ<code>NoWrap</code>ä¹Ÿå°±æ˜¯ä¸å…è®¸ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œæµ‹è¯•å¤šè¡Œæ•ˆæœï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°</li>
<li><code>space</code> è®¾ç½®å…ƒç´ ä¹‹é—´çš„é—´è·ã€‚<code>main</code>ä¸»è½´å…ƒç´ ä¹‹é—´é—´è·ï¼›<code>cross</code>äº¤å‰è½´ä¹‹é—´çš„é—´è·ï¼ˆæ³¨æ„ä¸åŒçš„<code>direction</code>çš„å€¼ï¼Œä¸»è½´ã€äº¤å‰è½´ä¸åŒå“Ÿï¼‰</li>
</ul>
<p>OKï¼Œæˆ‘ä»¬ç»§ç»­ä¸‹ä¸€ä¸ªï¼</p>
<h4 data-id="heading-10">2.2.4 Stackå®¹å™¨ç»„ä»¶</h4>
<p>Stackæ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct StackPage {
  @State message: string = 'Hello World';

  build() {
    Stack({alignContent: Alignment.Center}) {
      Column().width('90%').height('90%').backgroundColor(Color.Pink).zIndex(1)
      Column().width('50').height('50').backgroundColor(Color.Blue).zIndex(3)
      Column().width('150').height('150').backgroundColor(Color.Green).zIndex(2)
    }
    .height('100%')
    .width('100%')
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f335b15f71149a89ffdbbfdebf4c707~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=M80Dbzt06dpS1IeEO4vvmgmt%2FJQ%3D" alt="QQ_1764237543527.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li>æœ‰ä¸‰ä¸ªå¤§å°ä¸ä¸€çš„å…ƒç´ åœ¨é‡Œé¢é€šè¿‡<code>{alignContent: Alignment.Center}</code>å®ç°äº†æ‰€æœ‰å…ƒç´ å±…ä¸­å¯¹é½ã€‚ï¼ˆä¸€å…±æœ‰9ä¸­å¯¹é½æ–¹å¼ï¼Œè¯»è€…å¯ä»¥äº²è‡ªå°è¯•ï¼‰</li>
<li><code>.zIndex(1)</code>é€šè¿‡è¿™ä¸ªå±æ€§æ–¹æ³•è®¾ç½® å±‚çº§çš„ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§ï¼Œå±‚çº§è¶Šé å‰ã€‚<strong>å¯ä»¥å°†è¿™ä¸ªç†è§£ä¸ºå¨æˆ¿å ç›˜å­ï¼Œæ•°å­—è¶Šå¤§ç›˜å­å°±è¶Šä¸Šé¢ï¼Œå¦‚æœä¸Šé¢çš„ç›˜å­æ¯”ä¸‹é¢çš„å¤§ï¼Œé‚£å°±çœ‹ä¸åˆ°ä¸‹é¢çš„ç›˜å­</strong></li>
</ul>
<p>è¿™ä¸ªæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªï¼</p>
<h4 data-id="heading-11">2.2.5 Gridå®¹å™¨ç»„ä»¶</h4>
<h5 data-id="heading-12">2.2.5.1 Gridæ¡ˆä¾‹ä¸€</h5>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct GridPage {
  build() {
    Grid() {
      GridItem() {
        Row() {
          Column() {
            Text('å•†å“åç§°')
          }
          .width('100%')
        }
      }.width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
      GridItem().width("100%").height(100).backgroundColor(Color.Gray)
    }
    .height('100%')
    .width('100%')
    .columnsTemplate('1fr 1fr 1fr 1fr')
    .rowsGap(10)
    .columnsGap(10)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4067eb34d8e04e6e848e8186d5577dfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=F5CtdVf49KWIXgfwW1P5N1q7Twg%3D" alt="QQ_1764299740119.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li><code>Grid</code>ç»„ä»¶éœ€è¦ç»“åˆ<code>GridItem</code>ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ˜¯å®¹å™¨ç»„ä»¶ã€‚</li>
<li><code>.columnsTemplate('1fr 1fr 1fr 1fr')</code>å±æ€§æ–¹æ³•è¡¨ç¤ºè¯¥<code>Grid</code>ç»„ä»¶åˆ†ä¸ºå‡ åˆ—æ•°æ®ï¼Œå…¶ä¸­çš„<code>1fr</code>è¡¨ç¤ºè¯¥åˆ—æƒé‡å æ¯”</li>
<li><code>rowsGap</code>ä¸<code>columnsGap</code>åˆ†åˆ«è¡¨ç¤ºè®¾ç½® è¡Œé—´è·ä»¥åŠåˆ—é—´è·</li>
</ul>
<p>é‚£ç°åœ¨é—®é¢˜æ¥äº†ï¼Œæ¡ˆä¾‹ä¸€çš„<code>GridItem</code>ç»„ä»¶å°±ä»…ä»…ç¬¬ä¸€ä¸ªæ·»åŠ äº†åŸºæœ¬ç»„ä»¶ï¼Œè€Œä¸”è¿˜ä»…ä»…åªæ˜¯ä¸€ä¸ª<code>Text</code>ç»„ä»¶ï¼Œç»“æ„å±‚æ¬¡å°±å·²ç»æ¯”è¾ƒå¤šäº†ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ<code>Item</code>å†…å®¹å†å¤æ‚ä¸€ç‚¹ï¼Œé‚£ä»£ç å²‚ä¸æ˜¯å¾ˆå†—ä½™ï¼Ÿ</p>
<p>å¸¦ç€è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ä¸ªæ¡ˆä¾‹ï¼š</p>
<h5 data-id="heading-13">2.2.5.2 Gridæ¡ˆä¾‹äºŒ</h5>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct GridPage {
  build() {
    Grid() {
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
      GirdItemComponent()
    }
    .height('100%')
    .width('100%')
    .columnsTemplate('1fr 1fr 1fr 1fr')
    .rowsGap(10)
    .columnsGap(10)
  }
}

@Component
struct GirdItemComponent {
  build() {
    GridItem() {
      Row() {
        Column() {
          Text('å•†å“åç§°')
        }.width('100%')
      }.height(100)
    }.borderRadius(4)
    .backgroundColor(Color.Pink)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e1ea64e4f5742c89114d70e0349aa96~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=C5wNu3IAxLlCQ83TredRUvOZss4%3D" alt="QQ_1764300613985.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li>æˆ‘ä»¬å°†<code>GridItem</code>æ”¾åœ¨äº†æ–°çš„<code>struct GirdItemComponent</code>é‡Œé¢ï¼Œå¹¶ä¸”ç”¨<code>@Component</code>ä¿®é¥°ï¼Œæ­¤æ—¶<code>GirdItemComponent</code>å·²ç»è¢«æˆ‘ä»¬å°è£…æˆäº†<strong>è‡ªå®šä¹‰ç»„ä»¶</strong></li>
</ul>
<p>ä¸è¿‡ç°åœ¨è¿˜æœ‰ä¸ªé—®é¢˜ï¼š<code>GirdItemComponent()</code>æ•°é‡ç›®å‰æ˜¯ä»£ç å†™æ­»çš„ï¼Œå¦‚ä½•é€šè¿‡æ•°æ®æºåŠ¨æ€æ¸²æŸ“å‘¢ï¼Ÿ</p>
<h5 data-id="heading-14">2.2.5.3 Gridæ¡ˆä¾‹ä¸‰</h5>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct GridPage {
  listData:Array&lt;number&gt;=[1,2,3,4,5,6,7,8,9,10,11,12]
  build() {
    Grid() {
      ForEach(this.listData,(item:number,index:number)=&gt;{
        GirdItemComponent()
      })
    }
    .height('100%')
    .width('100%')
    .columnsTemplate('1fr 1fr 1fr 1fr')
    .rowsGap(10)
    .columnsGap(10)
  }
}
//éƒ¨åˆ†ä»£ç çœç•¥......

</code></pre>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­</p>
<ul>
<li>ä½¿ç”¨<code>ForEach</code>å¾ªç¯ï¼ŒæˆåŠŸçš„é€šè¿‡æ•°æ®æºçš„æ•°é‡åŠ¨æ€æ¸²æŸ“<code>GridItem</code></li>
</ul>
<p>æ¥ç€è®²ä¸‹ä¸€ä¸ªç»„ä»¶ï¼</p>
<h4 data-id="heading-15">2.2.6 RelativeContainer å®¹å™¨ç»„ä»¶</h4>
<p>ç›¸å¯¹å¸ƒå±€ç»„ä»¶ï¼Œç”¨äºå¤æ‚åœºæ™¯ä¸­å…ƒç´ å¯¹é½çš„å¸ƒå±€ã€‚å®ƒå¯ä»¥æ ¹æ®ç»„ä»¶ä¸ç»„ä»¶çš„å…³ç³»ï¼Œè®¾ç½®å¹¶å®šä½å¯¹åº”è‡ªå·±çš„ä¸åŒçš„ä½ç½®ã€‚</p>
<p>RelativeContainer æ¡ˆä¾‹</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct Page2 {
  build() {
    Row() {
      RelativeContainer() {
        Row(){Text('row1')}.justifyContent(FlexAlign.Center)
        .width(100).height(100)
        .backgroundColor("#FF3333")
        .alignRules({
          top: {anchor: "__container__", align: VerticalAlign.Top},
          left: {anchor: "__container__", align: HorizontalAlign.Start}
        })
        .id("row1")

        Row(){Text('row2')}.justifyContent(FlexAlign.Center)
        .width(100).height(100)
        .backgroundColor("#FFCC00")
        .alignRules({
          top: {anchor: "__container__", align: VerticalAlign.Top},
          right: {anchor: "__container__", align: HorizontalAlign.End}
        })
        .id("row2")

        Row(){Text('row3')}.justifyContent(FlexAlign.Center)
        .height(100)
        .backgroundColor("#FF6633")
        .alignRules({
          top: {anchor: "row1", align: VerticalAlign.Bottom},
          left: {anchor: "row1", align: HorizontalAlign.End},
          right: {anchor: "row2", align: HorizontalAlign.Start}
        })
        .id("row3")

        Row(){Text('row4')}.justifyContent(FlexAlign.Center)
        .backgroundColor("#FF9966")
        .alignRules({
          top: {anchor: "row3", align: VerticalAlign.Bottom},
          bottom: {anchor: "__container__", align: VerticalAlign.Bottom},
          left: {anchor: "__container__", align: HorizontalAlign.Start},
          right: {anchor: "row1", align: HorizontalAlign.End}
        })
        .id("row4")

        Row(){Text('row5')}.justifyContent(FlexAlign.Center)
        .backgroundColor("#FF66FF")
        .alignRules({
          top: {anchor: "row3", align: VerticalAlign.Bottom},
          bottom: {anchor: "__container__", align: VerticalAlign.Bottom},
          left: {anchor: "row2", align: HorizontalAlign.Start},
          right: {anchor: "__container__", align: HorizontalAlign.End}
        })
        .id("row5")
      }
      .width(300).height(300)
      .margin({left: 50})
      .border({width:2, color: "#6699FF"})
    }
    .height('100%')
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0fc4db1db5e44bafb46f369ef21f8c20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=B%2FU11yGgC7py5cN%2BCKXqDMtQs5w%3D" alt="QQ_1764315080855.png" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼š</p>
<ul>
<li>
<p>åœ¨<code>RelativeContainer</code>ç»„ä»¶é‡Œï¼Œå­ç»„ä»¶ä½ç½®é€šè¿‡<code>.alignRules(xx)</code>å±æ€§æ–¹æ³•ï¼Œè®¾ç½®å½“å‰å­ç»„ä»¶çš„ä½ç½®</p>
</li>
<li>
<p>åœ¨<code>.alignRules(xx)</code>å±æ€§æ–¹æ³•é‡Œï¼Œå¯ä»¥åˆ†åˆ«è®¾ç½®<code>top</code>ã€<code>bottom</code>ã€<code>left</code>ã€<code>right</code>ã€<code>center</code>ã€<code>middle</code>,ä¸åŒæ–¹ä½ä»¥åŠå±…ä¸­å¯¹é½å‚æ•°ï¼Œä½†ä»–ä»¬æ— ééƒ½æ˜¯åˆ†ä¸º<strong>å‚ç›´æ–¹å‘ä»¥åŠæ°´å¹³æ–¹å‘</strong></p>
<ul>
<li><code>top</code>ã€<code>bottom</code>ã€<code>center</code> è¿™ä¸‰ä¸ªæ˜¯å‚ç›´æ–¹å‘</li>
<li><code>left</code>ã€<code>right</code>ã€<code>middle</code> è¿™ä¸‰ä¸ªæ˜¯æ°´å¹³æ–¹å‘</li>
</ul>
</li>
<li>
<p>åœ¨<code>{anchor: "xxx", align: xxx}</code>ç»“æ„ä½“ä¸­ï¼Œ<strong>ä¸åŒçš„æ–¹å‘å°†ä¼šæœ‰ä¸åŒçš„è®¾ç½®çº¦æŸçš„æ–¹å¼</strong>ï¼Œ</p>
<ul>
<li>æ°´å¹³æ–¹å‘é€šè¿‡<code>align: HorizontalAlign.xxx</code>èµ‹å€¼</li>
<li>å‚ç›´æ–¹å‘é€šè¿‡<code>align: VerticalAlign.xxx</code>èµ‹å€¼</li>
</ul>
</li>
<li>
<p>åœ¨<code>{anchor: "xxx", align: xxx}</code>ç»“æ„ä½“ä¸­ï¼Œå½“å‰å­ç»„ä»¶å¯ä»¥é€šè¿‡<code>anchor: "xxx"</code>ä¸å…¶ä»–å­ç»„ä»¶æˆ–çˆ¶ç»„ä»¶å»ºç«‹çº¦æŸ</p>
<ul>
<li><code>anchor: "__container__"</code> è¿™ä¸ªè¡¨ç¤ºä¸çˆ¶å®¹å™¨å»ºç«‹çº¦æŸ</li>
<li><code>anchor: "row3"</code> è¿™ä¸ªè¡¨ç¤ºä¸<code>row3</code>ç»„ä»¶å»ºç«‹çº¦æŸã€‚è€Œ<code>row3</code>ç»„ä»¶é€šè¿‡<code>.id("row3")</code>è®¾ç½®å¹¶å‘½åäº†è‡ªå·±å°±æ˜¯<code>row3</code>ç»„ä»¶</li>
</ul>
</li>
<li>
<p>åœ¨<code>Row4</code>ä¸<code>Row5</code>ç»„ä»¶é‡Œï¼Œå®ƒä¿©åˆ†åˆ«å»ºç«‹äº†å››ä¸ªæ–¹ä½çš„çº¦æŸï¼Œå› æ­¤åœ¨æ²¡æœ‰è®¾ç½®<code>width</code>ä¸<code>height</code>æ—¶ï¼Œå®ƒä¹Ÿä¼šè‡ªåŠ¨æ ¹æ®çº¦æŸç”Ÿæˆå¯¹åº”çš„å®½é«˜é•¿åº¦</p>
</li>
</ul>
<p>OKï¼Œå¸¸ç”¨çš„å®¹å™¨ç»„ä»¶ï¼Œå·²ç»è®²å®Œäº†ã€‚ç°åœ¨æˆ‘ä»¬å¼€å§‹è®²è§£åŸºç¡€ç»„ä»¶ã€‚</p>
<h3 data-id="heading-16">2.2 åŸºç¡€ç»„ä»¶</h3>
<p>åŸºç¡€ç»„ä»¶æ¯”è¾ƒç®€å•ï¼Œæˆ‘è¿™å‡†å¤‡ç”¨ä¸€äº›å°æ¡ˆä¾‹æ¥è®²è§£åŸºç¡€ç»„ä»¶å¦‚ä½•ä½¿ç”¨</p>
<h4 data-id="heading-17">2.2.1 æ¡ˆä¾‹ä¸€ï¼š</h4>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct TextPage {
  @State message: string = 'Hello World';
  build() {
    RelativeContainer() {
      Text(this.message)
        .id('TextPageHelloWorld')
        .fontSize(50)
        .fontWeight(FontWeight.Bold)
        .alignRules({
          center: { anchor: '__container__', align: VerticalAlign.Center },
          middle: { anchor: '__container__', align: HorizontalAlign.Center }
        })

      Button('ç‚¹æˆ‘æ”¹å˜æ–‡æœ¬')
        .alignRules({
          top: { anchor: 'TextPageHelloWorld', align: VerticalAlign.Bottom },
          middle: { anchor: '__container__', align: HorizontalAlign.Center }
        })
        .onClick(() =&gt; {
          this.clickBtn()
        })
        .margin({ top: 20 })
    }
    .height('100%')
    .width('100%')
  }

  private clickBtn() {
    this.message = "æˆ‘æ”¹å˜äº†Text"
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/001f5c7289ac467580f7b2cffdb2ccb0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=Ybyywix%2FNKJGP6vpeIx5BJdVpn0%3D" alt="ezgif-50a344ea2841ebb4.gif" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼š</p>
<ul>
<li>ä½¿ç”¨äº†<code>Text</code>ã€<code>Button</code>ç»„ä»¶ï¼Œè€Œ<code>Text</code>æ–‡æœ¬æ˜¯é€šè¿‡å˜é‡<code>message</code>èµ‹å€¼ï¼Œè¿™ä¸ªå˜é‡ä½¿ç”¨äº†<code>@State</code>ä¿®é¥°ç¬¦</li>
<li><code>@State</code>åˆåï¼š<strong>çŠ¶æ€å˜é‡è£…é¥°å™¨</strong>ï¼Œè¢«å®ƒä¿®é¥°çš„å˜é‡<code>message</code>ç§°ä¸º<strong>çŠ¶æ€å˜é‡</strong>ï¼ˆè®©æ™®é€šå˜é‡å…·å¤‡çŠ¶æ€å±æ€§ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´å½“çŠ¶æ€å˜é‡æ”¹å˜æ—¶ï¼Œå°†ä¼šè§¦å‘ç»‘å®šçš„UIç»„ä»¶æ¸²æŸ“æ›´æ–°</li>
<li>å› æ­¤åœ¨<code>Button</code>ç‚¹å‡»äº‹ä»¶é‡Œï¼Œæ”¹å˜äº†<code>message</code>çŠ¶æ€å˜é‡ï¼Œè®©<code>Text</code>ç»„ä»¶æ¸²æŸ“æ›´æ–°äº†æœ€æ–°çš„æ–‡æœ¬</li>
</ul>
<p>è¿™ä¸ªå¾ˆç®€å•ï¼Œç°åœ¨é€æ¸ä¸Šéš¾åº¦</p>
<h4 data-id="heading-18">2.2.2 æ¡ˆä¾‹äºŒï¼š</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> { promptAction } from <span class="hljs-string">'@kit.ArkUI'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct LoginPage {

  <span class="hljs-meta">@State</span> phone: string = <span class="hljs-string">''</span>
  <span class="hljs-meta">@State</span> password: string = <span class="hljs-string">''</span>
  <span class="hljs-meta">@State</span> smsCode: string = <span class="hljs-string">''</span>

  <span class="hljs-meta">@State</span> loginByPassword: boolean = <span class="hljs-literal">true</span> <span class="hljs-comment">// true=å¯†ç ç™»å½•ï¼Œfalse=éªŒè¯ç ç™»å½•</span>

  <span class="hljs-comment">// éªŒè¯ç å€’è®¡æ—¶</span>
  <span class="hljs-meta">@State</span> counter: number = <span class="hljs-number">0</span>
  <span class="hljs-keyword">private</span> timerId: number = <span class="hljs-number">0</span>

  build() {
    Column({ space: <span class="hljs-number">20</span> }) {

      Text(<span class="hljs-string">"æ‰‹æœºç™»å½•"</span>)
        .fontSize(<span class="hljs-number">30</span>)
        .fontWeight(FontWeight.Bold)
        .margin({ top: <span class="hljs-number">40</span> })

      <span class="hljs-comment">/** æ‰‹æœºå·è¾“å…¥æ¡† */</span>
      Row() {
        TextInput({ placeholder: <span class="hljs-string">'è¯·è¾“å…¥æ‰‹æœºå·'</span> })
          .type(InputType.Number)
          .maxLength(<span class="hljs-number">11</span>)
          .onChange(v =&gt; <span class="hljs-keyword">this</span>.phone = v)
      }
      .padding(<span class="hljs-number">12</span>)
      .backgroundColor(<span class="hljs-string">'#F7F7F7'</span>)
      .borderRadius(<span class="hljs-number">8</span>)
      .width(<span class="hljs-string">'85%'</span>)

      <span class="hljs-comment">/** å¯†ç ç™»å½•åŒºåŸŸ */</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loginByPassword) {
        Row() {
          TextInput({ placeholder: <span class="hljs-string">'è¯·è¾“å…¥å¯†ç '</span> })
            .type(InputType.Password)
            .onChange(v =&gt; <span class="hljs-keyword">this</span>.password = v)
        }
        .padding(<span class="hljs-number">12</span>)
        .backgroundColor(<span class="hljs-string">'#F7F7F7'</span>)
        .borderRadius(<span class="hljs-number">8</span>)
        .width(<span class="hljs-string">'85%'</span>)
      }

      <span class="hljs-comment">/** éªŒè¯ç ç™»å½•åŒºåŸŸ */</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.loginByPassword) {
        Row({ space: <span class="hljs-number">10</span> }) {
          TextInput({
            placeholder: <span class="hljs-string">'è¯·è¾“å…¥éªŒè¯ç '</span>
          })
            .onChange(v =&gt; <span class="hljs-keyword">this</span>.smsCode = v)
            .width(<span class="hljs-string">'60%'</span>)
          <span class="hljs-comment">// å‘é€éªŒè¯ç æŒ‰é’®</span>
          Button(
            <span class="hljs-keyword">this</span>.counter &gt; <span class="hljs-number">0</span>
              ? `${<span class="hljs-keyword">this</span>.counter} ç§’åé‡è¯•`
              : <span class="hljs-string">'å‘é€éªŒè¯ç '</span>
          )
            .height(<span class="hljs-number">40</span>)
            .borderRadius(<span class="hljs-number">6</span>)
            .backgroundColor(<span class="hljs-string">'#007DFF'</span>)
            .fontColor(Color.White)
            .onClick(() =&gt; <span class="hljs-keyword">this</span>.onSendCode())
        }
        .padding(<span class="hljs-number">12</span>)
        .backgroundColor(<span class="hljs-string">'#F7F7F7'</span>)
        .borderRadius(<span class="hljs-number">8</span>)
        .width(<span class="hljs-string">'85%'</span>)
      }

      <span class="hljs-comment">/** ç™»å½•æŒ‰é’® */</span>
      Button(<span class="hljs-string">"ç™»å½•"</span>)
        .width(<span class="hljs-string">'85%'</span>)
        .height(<span class="hljs-number">45</span>)
        .backgroundColor(<span class="hljs-string">'#007DFF'</span>)
        .fontColor(Color.White)
        .borderRadius(<span class="hljs-number">8</span>)
        .onClick(() =&gt; <span class="hljs-keyword">this</span>.onLogin())

      <span class="hljs-comment">/** ç™»å½•æ–¹å¼åˆ‡æ¢ */</span>
      Row() {
        Text(<span class="hljs-keyword">this</span>.loginByPassword ? <span class="hljs-string">"ä½¿ç”¨éªŒè¯ç ç™»å½•"</span> : <span class="hljs-string">"ä½¿ç”¨å¯†ç ç™»å½•"</span>)
          .fontColor(<span class="hljs-string">'#007DFF'</span>)
          .onClick(() =&gt; {
            <span class="hljs-keyword">this</span>.loginByPassword = !<span class="hljs-keyword">this</span>.loginByPassword
            <span class="hljs-keyword">this</span>.password = <span class="hljs-string">''</span>
            <span class="hljs-keyword">this</span>.smsCode = <span class="hljs-string">''</span>
          })
      }
    }
    .width(<span class="hljs-string">'100%'</span>)
    .justifyContent(FlexAlign.Center)
  }

  <span class="hljs-comment">/** ---------------- åŠŸèƒ½é€»è¾‘ ---------------- */</span>
  <span class="hljs-keyword">private</span> show(msg: string) {
    <span class="hljs-keyword">this</span>.toast(msg)
  }

  <span class="hljs-comment">/** ç™»å½•æŒ‰é’®é€»è¾‘ */</span>
  <span class="hljs-keyword">private</span> onLogin() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.phone.trim() === <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"è¯·è¾“å…¥æ‰‹æœºå·"</span>)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loginByPassword) {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.password.trim() === <span class="hljs-string">''</span>) {
        <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>)
        <span class="hljs-keyword">return</span>
      }
      <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"å¯†ç ç™»å½•æˆåŠŸï¼ˆç¤ºä¾‹ï¼‰"</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.smsCode.trim() === <span class="hljs-string">''</span>) {
        <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"è¯·è¾“å…¥éªŒè¯ç "</span>)
        <span class="hljs-keyword">return</span>
      }
      <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"éªŒè¯ç ç™»å½•æˆåŠŸï¼ˆç¤ºä¾‹ï¼‰"</span>)
    }
  }

  <span class="hljs-comment">/** å‘é€éªŒè¯ç é€»è¾‘ */</span>
  <span class="hljs-keyword">private</span> onSendCode() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.phone.trim() === <span class="hljs-string">''</span>) {
      <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"è¯·å…ˆè¾“å…¥æ‰‹æœºå·"</span>)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.counter &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">this</span>.show(`è¯·ç­‰å¾… ${<span class="hljs-keyword">this</span>.counter} ç§’åå†è¯•`)
      <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// æ¨¡æ‹Ÿå‘é€æˆåŠŸ</span>
    <span class="hljs-keyword">this</span>.show(<span class="hljs-string">"éªŒè¯ç å·²å‘é€"</span>)

    <span class="hljs-keyword">this</span>.counter = <span class="hljs-number">60</span>
    <span class="hljs-keyword">this</span>.startTimer()
  }

  <span class="hljs-keyword">private</span> toast(msg: string) {
    promptAction.showToast({ message: msg })
  }

  <span class="hljs-comment">/** 60 ç§’å€’è®¡æ—¶å®šæ—¶å™¨ */</span>
  <span class="hljs-keyword">private</span> startTimer() {
    clearInterval(<span class="hljs-keyword">this</span>.timerId)
    <span class="hljs-keyword">this</span>.timerId = setInterval(() =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.counter &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.counter--
      } <span class="hljs-keyword">else</span> {
        clearInterval(<span class="hljs-keyword">this</span>.timerId)
      }
    }, <span class="hljs-number">1000</span>)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efd276d1e9a2406fa012e6be5ddeb7bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=ztJT1rZ4a5pMcr26S1Cxm%2FRISbY%3D" alt="ezgif-4d505e9cca216e11.gif" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„éªŒè¯ç ã€å¯†ç ç™»å½•ä¾‹å­ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨çš„æ–°ç»„ä»¶<code>TextInput</code>è¾“å…¥æ¡†ç»„ä»¶ï¼Œ</p>
<ul>
<li><code>{ placeholder: 'xxxx' }</code>è¡¨ç¤ºè¯¥è¾“å…¥æ¡†ç»„ä»¶ï¼Œåœ¨æ²¡æœ‰è¾“å…¥å†…å®¹ä¹‹å‰æç¤ºæ–‡æœ¬</li>
<li><code>.type(InputType.xxx)</code>è®¾ç½®æ”¹è¾“å…¥æ¡†ç»„ä»¶æ˜¯ä»€ä¹ˆç±»å‹çš„è¾“å…¥æ¡†</li>
</ul>
</li>
<li>
<p>åœ¨UIæè¿°åŒºåŸŸå¯ä»¥ä½¿ç”¨<code>if</code>è¯­å¥æ¥æ§åˆ¶UIåŒºåŸŸæ˜¯å¦æ˜¾ç¤ºã€‚ï¼ˆå¿…é¡»æ˜¯<code>@State</code>ä¿®é¥°çš„<strong>çŠ¶æ€å˜é‡</strong>ï¼‰</p>
<ul>
<li><code>if (this.loginByPassword)</code>æ˜¾ç¤ºå¯†ç ç™»å½•åŒºåŸŸï¼›</li>
<li><code>if (!this.loginByPassword)</code>æ˜¾ç¤ºéªŒè¯ç ç™»å½•åŒºåŸŸ</li>
</ul>
</li>
<li>
<p>ä¹Ÿå¯ä»¥åœ¨æŸä¸ªç»„ä»¶å†…ä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦è¿›è¡Œç»„ä»¶æ¸²æŸ“ã€‚å¦‚æ¡ˆä¾‹ä¸­ï¼š<code>Text(this.loginByPassword ? "ä½¿ç”¨éªŒè¯ç ç™»å½•" : "ä½¿ç”¨å¯†ç ç™»å½•")</code>ç­‰ã€‚ï¼ˆå¿…é¡»æ˜¯<code>@State</code>ä¿®é¥°çš„<strong>çŠ¶æ€å˜é‡</strong>ï¼‰</p>
</li>
<li>
<p><code>import { promptAction } from '@kit.ArkUI';</code>è¿™é‡Œå¯¼å…¥äº†SDKå¼€æ”¾èƒ½åŠ›ï¼ŒSDKå¯¹åŒä¸€ä¸ªKitä¸‹çš„æ¥å£æ¨¡å—è¿›è¡Œäº†å°è£…ã€‚è¿™å¥ä»£ç æ„æ€å°±æ˜¯ï¼Œå¯¼å…¥<code>@kit.ArkUI</code>é‡Œé¢çš„<code>promptAction</code>æ¥å£èƒ½åŠ›</p>
</li>
</ul>
<p>ä¸Šé¢çš„ä¿©ä¸ªä¾‹å­éƒ½æ˜¯é€šè¿‡<strong>çŠ¶æ€å˜é‡</strong>æ”¹å˜æ—¶å½±å“å¸ƒå±€çš„æ¸²æŸ“ï¼Œé‚£èƒ½ä¸èƒ½é€šè¿‡ç»„ä»¶å†…å®¹çš„æ›´æ”¹ä»è€Œæ”¹å˜å˜é‡çš„å€¼å‘¢ï¼Ÿ</p>
<h4 data-id="heading-19">2.2.3 æ¡ˆä¾‹ä¸‰ï¼š</h4>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct PageMvvm {

  @State
  isChecked: boolean = false
  @State
  myDate: Date = new Date()
  @State
  sexMale: boolean = true
  @State
  sexFeMale: boolean = false
  @State
  mySearch: string = ''
  @State
  myToggle: boolean = false
  @State
  mySelect: string = 'aaa'

  build() {
    Column({space: 12}) {

      Column(){
        Text('CheckBoxåŒå‘ç»‘å®š')
        Checkbox().select($$this.isChecked)
        Text('' + this.isChecked)
      }

      MyDivider()

      Column(){
        Text('DatePickeråŒå‘ç»‘å®š')
        DatePicker({selected: $$this.myDate})
        Text('' + this.myDate.toLocaleString())
      }
      MyDivider()
      Column(){
        Text('RadioåŒå‘ç»‘å®š')
        Radio({value:'male',   group: 'sex'}).checked($$this.sexMale)
        Radio({value:'female', group: 'sex'}).checked($$this.sexFeMale)
        Text('' + this.sexMale)
      }
      MyDivider()
      Column(){
        Text('SearchåŒå‘ç»‘å®š')
        Search({value: $$this.mySearch})
        Text('' + this.mySearch)
      }

      MyDivider()
      Column() {
        Text('ToggleåŒå‘ç»‘å®š')
        Toggle({ type: ToggleType.Switch,isOn:$$this.myToggle})
        Text('' + this.myToggle)
      }

      MyDivider()
      Column() {
        Text('SelectåŒå‘ç»‘å®š')
        Row(){
          Select([{ value: 'aaa' },
            { value: 'bbb'},
            { value: 'ccc'},
            { value: 'ddd'}])
            .value($$this.mySelect)
          Text('' + this.mySelect)
        }
      }
      MyDivider()
    }
    .height('100%')
    .width('100%')
  }
}

@Component
struct MyDivider {
  build() {
    Divider().height(3).backgroundColor(Color.Pink)
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/564f3edfe5d142b18d739cebf3933ccd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=teWO5rPiCHlvKDOm25MDapC%2BxC8%3D" alt="ezgif-36c0e0b8023d3deb.gif" loading="lazy"/></p>
<p>åœ¨è¯¥ä¾‹å­ä¸­ï¼š</p>
<ul>
<li>ä½¿ç”¨äº†ä¸€ç³»åˆ—ä¸åŒçš„æ–°ç»„ä»¶ï¼ˆ<code>Checkbox</code>ã€<code>DatePicker</code>ã€<code>Radio</code>.....ï¼‰ï¼Œåœ¨ä¼ å€¼çš„æ—¶å€™ï¼Œå¯¹åº”çš„å˜é‡å‰åŠ äº†<code>$$</code>ç¬¦å·ï¼Œå½“ç»„ä»¶å€¼æ”¹å˜æ—¶ï¼Œä¹Ÿä¼šåŒæ­¥æ”¹å˜å¯¹åº”å˜é‡ã€‚</li>
</ul>
<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éš¾å…ä¼šæ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼Œå°è£…è‡ªå·±çš„UIã€‚</p>
<p>é‚£è¯¥å¦‚ä½•å°è£…è‡ªå®šä¹‰UIå‘¢ï¼Ÿ</p>
<h3 data-id="heading-20">2.3 è‡ªå®šä¹‰UI</h3>
<p>åœ¨ä¸Šé¢è®²è§£<code>Grid</code>æ¡ˆä¾‹äºŒçš„æ—¶å€™ï¼Œå°±ç”¨è¿‡ä¸€æ¬¡è‡ªå®šä¹‰UIï¼Œå½“æ—¶æ˜¯ç”¨<code>@Component</code>å°è£…äº†è‡ªå®šä¹‰ç»„ä»¶ã€‚</p>
<p>è€Œåœ¨é¸¿è’™<code>ArkTS</code>å¼€å‘ä¸­,<code>@Component</code>å’Œ<code>@Builder</code>æ˜¯æ„å»ºUIæœ€å¸¸ç”¨çš„ä¸¤ä¸ªè£…é¥°å™¨ã€‚</p>
<p>è™½ç„¶å®ƒä»¬éƒ½ç”¨äºç”Ÿæˆ UI ç•Œé¢ï¼Œä½†å®ƒä»¬åœ¨å®šä½ã€èƒ½åŠ›ã€ç”Ÿå‘½å‘¨æœŸå’Œæ€§èƒ½ä¸Šæœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚</p>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œä¸Šæ¡ˆä¾‹è®²è§£ï¼</p>
<h4 data-id="heading-21">2.3.1 æ¡ˆä¾‹ä¸€</h4>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Builder
function ValueBuilder(text: string) {
  Text(`å€¼ä¼ é€’Builderï¼Œä¸ä¼šåˆ·æ–°UI: ${text}`)
    .fontSize(16)
    .fontColor(Color.Gray)
    .margin(5)
}

class Tmp {
  title: string = ''
}

@Builder
function QuoteBuilder(tmp: Tmp) {
  Column() {
    Row() {
      Image($r('app.media.startIcon')).width(20)
      Text(`å¼•ç”¨ä¼ é€’Builder,ä¼šåˆ·æ–°UI: ${tmp.title}`).fontSize(18)
    }
    .margin(10)
  }
}

@Component
@Entry
struct ParentPage {
  @State parentMessage: string = "çˆ¶ç»„ä»¶çŠ¶æ€";

  @Builder
  LocalBuilder() {
    Text(`è¿™æ˜¯LocalBuilder èƒ½é€šè¿‡thisåˆ·æ–° ${this.parentMessage}`)
  }

  build() {
    Column() {

      //å…¨å±€å€¼ä¼ é€’Builder
      ValueBuilder(this.parentMessage)

      //å…¨å±€å¼•ç”¨ä¼ é€’Builder
      QuoteBuilder({ title: this.parentMessage })

      //å±€éƒ¨ this æŒ‡å‘Builder
      this.LocalBuilder()
      Divider().strokeWidth(2).color(Color.Blue).margin({top:20})

      Button("ä¿®æ”¹çˆ¶ç»„ä»¶çŠ¶æ€")
        .onClick(() =&gt; {
          this.parentMessage = "çŠ¶æ€å·²æ›´æ–°";
          console.log(`parentMessage=${this.parentMessage}`)
        }).margin({top:20})

      Text(this.parentMessage).margin({top:20})

      Divider().strokeWidth(2).color(Color.Blue).margin({top:20})

      // ä½¿ç”¨å­ç»„ä»¶
      ChildComponent().margin({top:20})
    }
    .width('100%')
    .height('100%')
  }
}


// 2. å®šä¹‰ä¸€ä¸ªå­ç»„ä»¶ Component (ç‹¬ç«‹æ¨¡å—ï¼Œæœ‰ç”Ÿå‘½å‘¨æœŸ)
@Component
struct ChildComponent {
  @State message: string = "æˆ‘æ˜¯ç‹¬ç«‹çš„å­ç»„ä»¶";

  // ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º
  aboutToAppear() {
    console.log("ChildComponent åˆå§‹åŒ–äº†");
  }

  build() {
    Column() {
      Text(this.message)
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .backgroundColor(Color.Pink)
        .padding(10)
        .onClick(() =&gt; {
          this.message = "å­ç»„ä»¶è¢«ç‚¹å‡»ï¼Œåªåˆ·æ–°æˆ‘ï¼";
        })
    }
  }
}
</code></pre>
<p>è¿è¡Œåˆå§‹åŒ–æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">     ChildComponent åˆå§‹åŒ–äº†
</span></code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89f3553c240e4d1faf0e19d146e1666a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=LjTOVSQhALb3uoEjTBrafu54vrs%3D" alt="ezgif-3df822dc21ccbf98.gif" loading="lazy"/></p>
<p>åœ¨è¯¥ä¾‹å­ä¸­ï¼š</p>








































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>@Component (è‡ªå®šä¹‰ç»„ä»¶)</strong></th><th><strong>@Builder (UI æ„å»ºå‡½æ•°)</strong></th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td><strong>ç±»/ç»“æ„ä½“</strong> (<code>struct</code>)</td><td><strong>å‡½æ•°/æ–¹æ³•</strong> (<code>function</code>)</td></tr><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td><strong>æœ‰</strong> (<code>aboutToAppear</code>, <code>aboutToDisappear</code> ç­‰)</td><td><strong>æ— </strong></td></tr><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>æ‹¥æœ‰ç‹¬ç«‹çš„çŠ¶æ€ (<code>@State</code>, <code>@Link</code> ç­‰)</td><td>ä¾èµ–ä¼ å…¥å‚æ•°æˆ–å®¿ä¸»ç»„ä»¶çš„çŠ¶æ€</td></tr><tr><td><strong>æ¸²æŸ“æœºåˆ¶</strong></td><td>ç‹¬ç«‹çš„æ¸²æŸ“èŠ‚ç‚¹ï¼Œæ›´æ–°æ—¶åªåˆ·æ–°è‡ªå·±</td><td>è§†ä¸ºå®¿ä¸»ç»„ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸éšå®¿ä¸»åˆ·æ–°</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>è¾ƒé‡ (éœ€è¦åˆ›å»ºå®ä¾‹ã€ç»´æŠ¤çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ)</td><td>æè½» (ä»…ä»…æ˜¯ä»£ç å¤ç”¨é€»è¾‘)</td></tr><tr><td><strong>å¤ç”¨èŒƒå›´</strong></td><td>å…¨å±€å¯å¤ç”¨ï¼Œä¸ä»…é™ UIï¼Œè¿˜å°è£…é€»è¾‘</td><td>ä¸»è¦æ˜¯ UI ç»“æ„çš„å¤ç”¨ (åˆ†ä¸ºå…¨å±€å’Œå±€éƒ¨)</td></tr></tbody></table>
<p>æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¾€å¾€ä¼šå‡ºç°å¤§é‡çš„ä»£ç åœ¨è¿›è¡Œé‡å¤æ ·å¼çš„è®¾ç½®ï¼Œå› æ­¤è¿™å°±æ¶‰åŠåˆ°æ ·å¼çš„å¤ç”¨ã€‚</p>
<h3 data-id="heading-22">2.4 æ ·å¼å¤ç”¨</h3>
<h4 data-id="heading-23">2.4.1 @Styles æ ·å¼å¤ç”¨</h4>
<p>æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">import { promptAction } from '@kit.ArkUI';

enum PayType {
  WXPay, Alipay, BankPay, CreditCard
}

@Entry
@Component
struct PageStyle1 {
  @State
  heightValue: number = 50

  @Styles
  // payStyle(payType:PayType){  //ç¼–è¯‘æŠ¥é”™ï¼Œ@Styles æ–¹æ³•ä¸èƒ½å«æœ‰å‚æ•°
  payStyle(){
    .width('100%')
    .height(this.heightValue)
    .borderRadius(10)
    .backgroundColor('#FF1266e0')
    .onClick(() =&gt; {
      promptAction.showToast({ message: 'æ”¯ä»˜æˆåŠŸï¼' })
    })
  }

  build() {
    Column() {
      Row() {
        Button('å¾®ä¿¡æ”¯ä»˜', { type: ButtonType.Normal })
          .payStyle()
      }
      .padding(10)

      Row() {
        Button('æ”¯ä»˜å®æ”¯ä»˜', { type: ButtonType.Normal })
          .payStyle()

      }
      .padding(10)

      Row() {
        Button('é“¶è¡Œå¡æ”¯ä»˜', { type: ButtonType.Normal })
          .payStyle()

      }
      .padding(10)

      Row() {
        Button('ä¿¡ç”¨å¡æ”¯ä»˜', { type: ButtonType.Normal })
          .payStyle()

      }
      .padding(10)

    }
    .width('100%')
    .height('100%')

  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a164547ff5c4713ac8cc5cd22b4816b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=k4ZDEwt4gRk31MDOfSWYDFkO5w0%3D" alt="ezgif-60d51c07d55661eb.gif" loading="lazy"/></p>
<p>åœ¨è¯¥ä¾‹å­ä¸­ï¼š</p>
<ul>
<li>é€šè¿‡<code>@Styles</code>ä¿®é¥°çš„æ–¹æ³•å¯ä»¥å®šä¹‰<strong>é€šç”¨å±æ€§ä¸é€šç”¨äº‹ä»¶ï¼Œä¸æ”¯æŒå‚æ•°ä¼ é€’ï¼ˆé€šç”¨ã€é€šç”¨ã€é€šç”¨ï¼‰</strong></li>
</ul>
<p>é‚£å¦‚æœè¯´æœ‰å¤šç§æƒ…å†µï¼Œä¸åŒæƒ…å†µæŒ‰é’®é¢œè‰²ä¸ä¸€æ ·ï¼Œç„¶è€Œ<code>@Styles</code>ä¿®é¥°çš„æ–¹æ³•ä¸å¯ä¼ å‚ï¼ŒåŒºåˆ†ä¸äº†æŒ‰é’®ï¼Œé‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<h4 data-id="heading-24">2.4.2 @Extend æ ·å¼å¤ç”¨</h4>
<p>æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">import { promptAction } from '@kit.ArkUI';

@Entry
@Component
struct PageStyle2 {
  build() {
    Column({ space: 20 }) {
      Button("æ”¯ä»˜å®æ”¯ä»˜")
        .payButton("alipay")
      Button("å¾®ä¿¡æ”¯ä»˜")
        .payButton("wechat")
      Button("æ”¯ä»˜å®æ”¯ä»˜")
        .payButton("alipay")
      Button("å¾®ä¿¡æ”¯ä»˜")
        .payButton("wechat")
      Button("æ”¯ä»˜å®æ”¯ä»˜")
        .payButton("alipay")
      Button("å¾®ä¿¡æ”¯ä»˜")
        .payButton("wechat")
      Button("æ”¯ä»˜å®æ”¯ä»˜")
        .payButton("alipay")
    }
    .padding(20)
    .width('100%')
  }
}

@Extend(Button)
function payButton(type: 'alipay' | 'wechat'){
  .type(ButtonType.Normal)
  .fontColor(Color.White)
  .width('100%')
  .height(50)
  .borderRadius(4)
  .backgroundColor(type === 'wechat' ? '#00c168':'#ff1256e0')
  .onClick(()=&gt;{
    if( type === 'alipay'){
      promptAction.showToast({message: 'æ”¯ä»˜å®æ”¯ä»˜æˆåŠŸï¼'})
    }else{
      promptAction.showToast({message: 'å¾®ä¿¡æ”¯ä»˜æˆåŠŸï¼'})
    }
  })
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4b8ede32c5d4adeabd0d747122b4064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=qRFpiz%2B89MbRZMAK9YaeMFNLhZg%3D" alt="ezgif-2587c76ade83aa5c.gif" loading="lazy"/></p>
<p>åœ¨è¯¥ä¾‹å­ä¸­ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>@Extend(Button)</code>æ‰©å±•äº†åŸç”Ÿç»„ä»¶çš„æ ·å¼ï¼Œæ”¯æŒå°è£…ç§æœ‰å±æ€§ã€é€šç”¨å±æ€§ã€äº‹ä»¶ã€‚</li>
<li>ä¸<code>@Styles</code>ä¸åŒï¼Œ<code>@Extend(Button)</code>æ”¯æŒå‚æ•°ä¼ é€’ï¼Œæä¾›äº†æ›´å¤§çš„çµæ´»æ€§</li>
</ul>
<p>è™½ç„¶<code>@Styles</code>å’Œ<code>@Extend(Button)</code>æä¾›äº†æ ·å¼å¤ç”¨çš„èƒ½åŠ›ï¼Œä½†æ˜¯å®ƒä»¬è¿˜æ˜¯å­˜åœ¨ä¸€äº›é™åˆ¶ï¼Œå› æ­¤å°±æœ‰äº†<code>AttributeModifier</code>ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p>
<h4 data-id="heading-25">2.4.3 AttributeModifier</h4>
<p>æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct PageStyle3 {

  @State modifier: MyButtonModifier = new MyButtonModifier()
  @State modifier2: MyButtonModifier2 = new MyButtonModifier2()

  build() {

    Column({space: 20}){
      Button('ç‚¹æˆ‘è¯•è¯•').attributeModifier(this.modifier).onClick(()=&gt;{
        this.modifier.isDark = !this.modifier.isDark
      })

      Divider().height(2).backgroundColor(Color.Pink)

      Button('ç‚¹æˆ‘è¯•è¯•').attributeModifier(this.modifier2)

    }
    .width('100%')
    .height('100%')
  }
}

class MyButtonModifier implements AttributeModifier&lt;ButtonAttribute&gt;{
  isDark: boolean  = false
  applyNormalAttribute(instance: ButtonAttribute): void {
    instance.backgroundColor(this.isDark ? Color.Black: Color.Red)
  }
}

class MyButtonModifier2 implements AttributeModifier&lt;ButtonAttribute&gt; {
  applyNormalAttribute(instance: ButtonAttribute): void {
    instance.backgroundColor(Color.Black)
  }
  applyPressedAttribute(instance: ButtonAttribute): void {
    instance.backgroundColor(Color.Red)

  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14f251648531456c91057c98ac40677f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=APmj5m2w7H7toUBkas%2FE85%2BUTH4%3D" alt="ezgif-7320282bf35d4baa.gif" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li><code>AttributeModifier&lt;ButtonAttribute&gt;</code> å…¶ä¸­<code>ButtonAttribute</code>æ˜¯ <code>Button</code>ä¸“æœ‰å±æ€§ç±»ï¼Œä¹Ÿå°±æ˜¯æŒ‰é’®æ‰©å±•å±æ€§</li>
<li><code>applyNormalAttribute</code> è¡¨ç¤º æŒ‰é’®åœ¨æ­£å¸¸æƒ…å†µä¸‹å±æ€§çš„è¡¨ç°</li>
<li><code>applyPressedAttribute</code> è¡¨ç¤º æŒ‰é’®åœ¨æŒ‰ä¸‹çš„æƒ…å†µä¸‹å±æ€§çš„è¡¨ç°</li>
</ul>
<h4 data-id="heading-26">2.4.4 å¤šæ€æ ·å¼stateStyles</h4>
<p>æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ArkTS" lang="ArkTS">@Entry
@Component
struct PageStyle4 {
  build() {
    Column(){
      Row(){
        Text('ä»Šå¤©ä½ å¿ƒæƒ…æ€ä¹ˆæ ·ï¼')
      }
      .padding(20)
      .height(80)
      .border({
        color: Color.Pink,
        width: 3
      })
      .borderRadius(4)
      .stateStyles({
        normal:{
          .backgroundColor(Color.Green)
        },
        pressed:{
          .backgroundColor('#eee')
          .border({
            width: 1,
            style: BorderStyle.Solid,
            color: Color.Red
          })
        }
      })

    }
    .width('100%')
    .height('100%')
  }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48add4fe046497ba0045f05cb591604~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaHFr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765353992&amp;x-signature=%2Fx%2BR1Mn3vCF2rP%2B5UlLUMjxYDmQ%3D" alt="ezgif-7e5bff81b40c9dd2.gif" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼š</p>
<ul>
<li>
<p>stateStyleså¯ä»¥ä¾æ®ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ä¸åŒï¼Œå¿«é€Ÿè®¾ç½®ä¸åŒæ ·å¼</p>
</li>
<li>
<p>ArkUIæä¾›ä»¥ä¸‹äº”ç§çŠ¶æ€</p>
<ul>
<li>focusedï¼šè·å–ç„¦ç‚¹æ—¶</li>
<li>normalï¼šæ­£å¸¸æƒ…å†µ</li>
<li>pressedï¼šæŒ‰å‹æ—¶</li>
<li>disabledï¼šä¸å¯é€‰ä¸­æ—¶</li>
<li>selectedï¼šé€‰ä¸­æ—¶</li>
</ul>
</li>
</ul>
<h3 data-id="heading-27">3ã€ç»“æŸè¯­</h3>
<p>OKï¼Œçœ‹åˆ°è¿™é‡Œçš„å°ä¼™ä¼´ç›¸ä¿¡ä½ å¯¹ArkUIæœ‰äº†ä¸€å®šçš„äº†è§£ï¼
ä¸‹ä¸€ç¯‡è®²è§£çŠ¶æ€ç®¡ç†ã€åº”ç”¨ç¨‹åºç»“æ„ä»¥åŠè·¯ç”±ç›¸å…³è®²è§£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[.NET 8 å®æ—¶æ¨é€é­”æ³•ï¼šSSE è®©æ•°æ® â€œä¸»åŠ¨è·‘â€ åˆ°å®¢æˆ·ç«¯]]></title>    <link>https://juejin.cn/post/7579441333166080009</link>    <guid>https://juejin.cn/post/7579441333166080009</guid>    <pubDate>2025-12-03T09:25:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579441333166080009" data-draft-id="7579440586693705774" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=".NET 8 å®æ—¶æ¨é€é­”æ³•ï¼šSSE è®©æ•°æ® â€œä¸»åŠ¨è·‘â€ åˆ°å®¢æˆ·ç«¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T09:25:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹Œæ‰_loong"/> <meta itemprop="url" content="https://juejin.cn/user/4256947657515320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            .NET 8 å®æ—¶æ¨é€é­”æ³•ï¼šSSE è®©æ•°æ® â€œä¸»åŠ¨è·‘â€ åˆ°å®¢æˆ·ç«¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4256947657515320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹Œæ‰_loong
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:25:00.000Z" title="Wed Dec 03 2025 09:25:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    17
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å¼•è¨€</h3>
<p>åœ¨å®æ—¶Webåº”ç”¨å¼€å‘ä¸­ï¼ŒServer-Sent Events(SSE)ä½œä¸ºä¸€ç§è½»é‡çº§çš„æœåŠ¡å™¨æ¨é€æŠ€æœ¯ï¼Œæ­£æˆä¸ºæå‡ç”¨æˆ·ä½“éªŒçš„é‡è¦æ–¹æ¡ˆã€‚SSEåŸºäºHTTPåè®®ï¼Œå…è®¸æœåŠ¡å™¨é€šè¿‡æŒä¹…è¿æ¥ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®æµï¼Œç‰¹åˆ«é€‚åˆæ–°é—»æ›´æ–°ã€å®æ—¶ç›‘æ§ç­‰åœºæ™¯ã€‚.NET 8é€šè¿‡æ€§èƒ½ä¼˜åŒ–å’ŒæœåŠ¡å™¨ç«¯å¢å¼ºï¼Œä¸ºSSEæä¾›äº†æ›´å¼ºå¤§çš„æ”¯æŒï¼Œä½¿å…¶æˆä¸ºæ„å»ºé«˜æ•ˆå®æ—¶åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚</p>
<h3 data-id="heading-1">åŸºæœ¬åŸç†</h3>
<p>SSEæ˜¯ä¸€ç§åŸºäºHTTP/1.1çš„å•å‘é€šä¿¡æŠ€æœ¯ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡text/event-stream MIMEç±»å‹å»ºç«‹æŒä¹…è¿æ¥ã€‚å®¢æˆ·ç«¯ä½¿ç”¨EventSourceæ¥å£ç›‘å¬æœåŠ¡å™¨æ¨é€çš„äº‹ä»¶æµï¼ŒæœåŠ¡å™¨åˆ™ä»¥åˆ†å—ç¼–ç å½¢å¼æŒç»­å‘é€æ•°æ®ã€‚ä¸è½®è¯¢ç›¸æ¯”ï¼ŒSSEæ˜¾è‘—é™ä½ç½‘ç»œå¼€é”€ï¼›ä¸WebSocketç›¸æ¯”ï¼ŒSSEå®ç°æ›´ç®€å•ï¼Œç‰¹åˆ«é€‚åˆæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„å•å‘æ•°æ®æ¨é€ã€‚</p>
<h3 data-id="heading-2">åç«¯ä»£ç å®ç°</h3>
<h4 data-id="heading-3">1ã€Controllerå±‚ä»£ç å®ç°</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å»ºç«‹ SSE æµè¿æ¥çš„ç«¯ç‚¹</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> å®¢æˆ·ç«¯é€šè¿‡æ­¤ç«¯ç‚¹å»ºç«‹æŒä¹…è¿æ¥ä»¥æ¥æ”¶æœåŠ¡å™¨æ¨é€çš„äº‹ä»¶</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆå¯é€‰ï¼‰<span class="hljs-doctag">&lt;/param&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
[<span class="hljs-meta">HttpGet(<span class="hljs-string">"stream"</span>)</span>]
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">StreamEvents</span>(<span class="hljs-params">[FromQuery] <span class="hljs-built_in">string</span> clientId</span>)</span>
{
    <span class="hljs-comment">// å¦‚æœå®¢æˆ·ç«¯æœªæä¾›IDï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ID</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(clientId))
    {
        clientId = Guid.NewGuid().ToString();
    }

    <span class="hljs-comment">// è®¾ç½®å“åº”å¤´ä»¥æ”¯æŒ SSE åè®®</span>
    Response.Headers.Append(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/event-stream"</span>);         <span class="hljs-comment">// æŒ‡å®šå†…å®¹ç±»å‹ä¸º SSE</span>
    Response.Headers.Append(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"no-cache"</span>);                 <span class="hljs-comment">// ç¦ç”¨ç¼“å­˜</span>
    Response.Headers.Append(<span class="hljs-string">"Connection"</span>, <span class="hljs-string">"keep-alive"</span>);                  <span class="hljs-comment">// ä¿æŒè¿æ¥</span>
    Response.Headers.Append(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);          <span class="hljs-comment">// å…è®¸è·¨åŸŸè®¿é—®</span>

    <span class="hljs-comment">// å°†å½“å‰å®¢æˆ·ç«¯æ·»åŠ åˆ° SSE æœåŠ¡ç®¡ç†å™¨ä¸­</span>
    <span class="hljs-keyword">await</span> _sseService.AddClientAsync(clientId, Response);

    <span class="hljs-comment">// ä¿æŒè¿æ¥æ‰“å¼€ï¼Œç›´åˆ°å®¢æˆ·ç«¯æ–­å¼€æˆ–è¯·æ±‚è¢«å–æ¶ˆ</span>
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-comment">// å¾ªç¯æ£€æŸ¥è¯·æ±‚æ˜¯å¦å·²è¢«å–æ¶ˆ</span>
        <span class="hljs-keyword">while</span> (!HttpContext.RequestAborted.IsCancellationRequested)
        {
            <span class="hljs-comment">// æ¯éš”1ç§’æ£€æŸ¥ä¸€æ¬¡è¿æ¥çŠ¶æ€</span>
            <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">1000</span>, HttpContext.RequestAborted);
        }
    }
    <span class="hljs-keyword">catch</span> (OperationCanceledException)
    {
        _logger.LogInformation(<span class="hljs-string">$"Client <span class="hljs-subst">{clientId}</span> disconnected (canceled)"</span>);
    }
    <span class="hljs-keyword">catch</span> (Exception ex)
    {
        _logger.LogError(ex, <span class="hljs-string">$"Error in SSE stream for client: <span class="hljs-subst">{clientId}</span>"</span>);
    }
    <span class="hljs-keyword">finally</span>
    {
        <span class="hljs-keyword">await</span> _sseService.RemoveClientAsync(clientId);
        _logger.LogInformation(<span class="hljs-string">$"SSE connection cleaned up for client: <span class="hljs-subst">{clientId}</span>"</span>);
    }
}
</code></pre>
<h4 data-id="heading-4">2ã€Serviceä»£ç å®ç°</h4>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> Server-Sent Events (SSE) æœåŠ¡æ¥å£</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> æä¾›å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶äº‹ä»¶çš„åŠŸèƒ½</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">ISseService</span>
{
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€äº‹ä»¶æ•°æ®</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å‘é€çš„æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function">Task <span class="hljs-title">SendEventAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, <span class="hljs-built_in">string</span> data</span>)</span>;

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€æŒ‡å®šç±»å‹çš„äº‹ä»¶æ•°æ®</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="eventType"&gt;</span>äº‹ä»¶ç±»å‹<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å‘é€çš„æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function">Task <span class="hljs-title">SendEventAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, <span class="hljs-built_in">string</span> eventType, <span class="hljs-built_in">string</span> data</span>)</span>;

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ·»åŠ æ–°çš„ SSE å®¢æˆ·ç«¯è¿æ¥</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="response"&gt;</span>HTTP å“åº”å¯¹è±¡<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function">Task <span class="hljs-title">AddClientAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, HttpResponse response</span>)</span>;

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ç§»é™¤æŒ‡å®šçš„å®¢æˆ·ç«¯è¿æ¥</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function">Task <span class="hljs-title">RemoveClientAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId</span>)</span>;

    <span class="hljs-function">Task <span class="hljs-title">BroadcastAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span>;
    <span class="hljs-function">Task <span class="hljs-title">BroadcastAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> eventType, <span class="hljs-built_in">string</span> data</span>)</span>;
}


<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> SSE æœåŠ¡å®ç°ç±»</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> ç®¡ç†æ‰€æœ‰å®¢æˆ·ç«¯è¿æ¥å¹¶å‘å…¶æ¨é€å®æ—¶æ•°æ®</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SseService</span> : <span class="hljs-title">ISseService</span>
{
    <span class="hljs-keyword">private</span> ILogger&lt;SseService&gt; _logger;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SseService</span>(<span class="hljs-params">ILogger&lt;SseService&gt; logger</span>)</span>
    {
        _logger = logger;
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å­˜å‚¨æ‰€æœ‰æ´»åŠ¨çš„å®¢æˆ·ç«¯è¿æ¥</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„å­—å…¸å­˜å‚¨å®¢æˆ·ç«¯IDå’Œå¯¹åº”çš„HttpResponse</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ConcurrentDictionary&lt;<span class="hljs-built_in">string</span>, HttpResponse&gt; _clients = <span class="hljs-keyword">new</span>();

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> æ·»åŠ æ–°çš„ SSE å®¢æˆ·ç«¯è¿æ¥åˆ°ç®¡ç†å™¨</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ç¬¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="response"&gt;</span>HTTP å“åº”å¯¹è±¡<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">AddClientAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, HttpResponse response</span>)</span>
    {
        <span class="hljs-comment">// å°†å®¢æˆ·ç«¯æ·»åŠ åˆ°è¿æ¥å­—å…¸ä¸­</span>
        _clients.TryAdd(clientId, response);
        <span class="hljs-comment">// å‘é€è¿æ¥ç¡®è®¤äº‹ä»¶ç»™å®¢æˆ·ç«¯</span>
        <span class="hljs-keyword">await</span> SendEventAsync(clientId, <span class="hljs-string">"connection"</span>, <span class="hljs-string">$"Connected with ID: <span class="hljs-subst">{clientId}</span>"</span>);
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> ä»ç®¡ç†å™¨ä¸­ç§»é™¤æŒ‡å®šçš„å®¢æˆ·ç«¯è¿æ¥</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>è¦ç§»é™¤çš„å®¢æˆ·ç«¯ID<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RemoveClientAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId</span>)</span>
    {
        <span class="hljs-comment">// å°è¯•ä»å­—å…¸ä¸­ç§»é™¤å®¢æˆ·ç«¯å¹¶è·å–å…¶å“åº”å¯¹è±¡</span>
        <span class="hljs-keyword">if</span> (_clients.TryRemove(clientId, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> response))
        {
            <span class="hljs-comment">// å®Œæˆ HTTP å“åº”</span>
            <span class="hljs-comment">//await response.CompleteAsync(); </span>
            <span class="hljs-comment">// æ¸…ç©ºç¼“å†²åŒºå¹¶å…³é—­æµã€‚è¿™å®é™…ä¸Šç­‰åŒäºå®Œæˆäº†å“åº”ã€‚ä½†æ›´å¸¸ç”¨çš„æ˜¯ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨æ­¤æ–¹æ³•ã€‚ </span>
            <span class="hljs-keyword">await</span> response.Body.FlushAsync();
        }
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€é»˜è®¤ç±»å‹çš„äº‹ä»¶æ¶ˆæ¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>ç›®æ ‡å®¢æˆ·ç«¯ID<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å‘é€çš„æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SendEventAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, <span class="hljs-built_in">string</span> data</span>)</span>
    {
        <span class="hljs-comment">// è°ƒç”¨é‡è½½æ–¹æ³•ï¼Œä½¿ç”¨é»˜è®¤çš„æ¶ˆæ¯ç±»å‹</span>
        <span class="hljs-keyword">await</span> SendEventAsync(clientId, <span class="hljs-string">"message"</span>, data);
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æŒ‡å®šå®¢æˆ·ç«¯å‘é€æŒ‡å®šç±»å‹çš„äº‹ä»¶æ¶ˆæ¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="clientId"&gt;</span>ç›®æ ‡å®¢æˆ·ç«¯ID<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="eventType"&gt;</span>äº‹ä»¶ç±»å‹ï¼ˆå¦‚ï¼šmessage, notification, updateç­‰ï¼‰<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å‘é€çš„æ•°æ®å†…å®¹<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">SendEventAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> clientId, <span class="hljs-built_in">string</span> eventType, <span class="hljs-built_in">string</span> data</span>)</span>
    {
        <span class="hljs-comment">// æ£€æŸ¥å®¢æˆ·ç«¯æ˜¯å¦ä»ç„¶è¿æ¥</span>
        <span class="hljs-keyword">if</span> (_clients.TryGetValue(clientId, <span class="hljs-keyword">out</span> <span class="hljs-keyword">var</span> response))
        {
            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-comment">// æŒ‰ç…§ SSE æ ¼å¼å†™å…¥äº‹ä»¶ç±»å‹</span>
                <span class="hljs-keyword">await</span> response.WriteAsync(<span class="hljs-string">$"event: <span class="hljs-subst">{eventType}</span>\n"</span>);
                <span class="hljs-comment">// æŒ‰ç…§ SSE æ ¼å¼å†™å…¥æ•°æ®å†…å®¹</span>
                <span class="hljs-keyword">await</span> response.WriteAsync(<span class="hljs-string">$"data: <span class="hljs-subst">{data}</span>\n\n"</span>);
                <span class="hljs-comment">// åˆ·æ–°å“åº”æµï¼Œç¡®ä¿æ•°æ®ç«‹å³å‘é€åˆ°å®¢æˆ·ç«¯</span>
                <span class="hljs-keyword">await</span> response.Body.FlushAsync();
            }
            <span class="hljs-keyword">catch</span>
            {
                <span class="hljs-comment">// å¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼ˆå¦‚å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ï¼‰ï¼Œåˆ™ç§»é™¤è¯¥å®¢æˆ·ç«¯</span>
                <span class="hljs-keyword">await</span> RemoveClientAsync(clientId);
            }
        }
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­æ¶ˆæ¯</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å¹¿æ’­çš„æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">BroadcastAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> data</span>)</span>
    {
        <span class="hljs-comment">// ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºå‘é€ä»»åŠ¡å¹¶ç­‰å¾…å…¨éƒ¨å®Œæˆ</span>
        <span class="hljs-keyword">var</span> tasks = _clients.Keys.Select(clientId =&gt; SendEventAsync(clientId, data));
        <span class="hljs-keyword">await</span> Task.WhenAll(tasks);
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯å¹¿æ’­æŒ‡å®šç±»å‹çš„äº‹ä»¶</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="eventType"&gt;</span>äº‹ä»¶ç±»å‹<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="data"&gt;</span>è¦å¹¿æ’­çš„æ•°æ®<span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">BroadcastAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> eventType, <span class="hljs-built_in">string</span> data</span>)</span>
    {
        <span class="hljs-comment">// ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºå‘é€ä»»åŠ¡å¹¶ç­‰å¾…å…¨éƒ¨å®Œæˆ</span>
        <span class="hljs-keyword">var</span> tasks = _clients.Keys.Select(clientId =&gt; SendEventAsync(clientId, eventType, data));
        <span class="hljs-keyword">await</span> Task.WhenAll(tasks);
    }
}
</code></pre>
<h3 data-id="heading-5">æ¨¡æ‹Ÿå‘é€æ•°æ®</h3>
<pre><code class="hljs language-C#" lang="C#">è¿™é‡Œåªæ˜¯ä¸ºäº†æ¨¡æ‹Ÿæ•°æ®,å…·ä½“å¯æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡åšå‡ºè°ƒæ•´

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> SSE åå°æœåŠ¡</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> å®šæœŸå‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯æ¨é€æ•°æ®æ›´æ–°</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SseBackgroundService</span> : <span class="hljs-title">BackgroundService</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ISseService _sseService;
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ—¥å¿—è®°å½•å™¨ï¼Œç”¨äºè®°å½•æœåŠ¡è¿è¡ŒçŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ILogger&lt;SseBackgroundService&gt; _logger;

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> æ„é€ å‡½æ•°ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥è·å–æ‰€éœ€çš„æœåŠ¡</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="scopeFactory"&gt;</span>æœåŠ¡ä½œç”¨åŸŸå·¥å‚<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="logger"&gt;</span>æ—¥å¿—è®°å½•å™¨<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SseBackgroundService</span>(<span class="hljs-params">ISseService sseService, ILogger&lt;SseBackgroundService&gt; logger</span>)</span>
        {
            _sseService = sseService;
            _logger = logger;
        }

        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> åå°æœåŠ¡æ‰§è¡Œæ–¹æ³•</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> å®šæœŸæ‰§è¡Œä»»åŠ¡ç›´åˆ°æœåŠ¡åœæ­¢</span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="stoppingToken"&gt;</span>æœåŠ¡åœæ­¢é€šçŸ¥ä»¤ç‰Œ<span class="hljs-doctag">&lt;/param&gt;</span></span>
        <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;returns&gt;</span>å¼‚æ­¥ä»»åŠ¡<span class="hljs-doctag">&lt;/returns&gt;</span></span>
        <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ExecuteAsync</span>(<span class="hljs-params">CancellationToken stoppingToken</span>)</span>
        {
            <span class="hljs-comment">// å¾ªç¯æ‰§è¡Œç›´åˆ°æ”¶åˆ°åœæ­¢ä¿¡å·</span>
            <span class="hljs-keyword">while</span> (!stoppingToken.IsCancellationRequested)
            {
                <span class="hljs-keyword">try</span>
                {
                    <span class="hljs-comment">// å‡†å¤‡è¦å¹¿æ’­çš„äº‹ä»¶æ•°æ®</span>
                    <span class="hljs-keyword">var</span> eventData = <span class="hljs-keyword">new</span>
                    {
                        timestamp = DateTime.UtcNow,                    <span class="hljs-comment">// å½“å‰ UTC æ—¶é—´æˆ³</span>
                        message = <span class="hljs-string">"Server time update"</span>,                 <span class="hljs-comment">// æ¶ˆæ¯å†…å®¹</span>
                        temperature = Random.Shared.Next(<span class="hljs-number">20</span>, <span class="hljs-number">30</span>)        <span class="hljs-comment">// æ¨¡æ‹Ÿæ¸©åº¦æ•°æ®</span>
                    };

                    <span class="hljs-comment">// å°†äº‹ä»¶æ•°æ®å¹¿æ’­ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯</span>
                    <span class="hljs-keyword">await</span> _sseService.BroadcastAsync(<span class="hljs-string">"time-update"</span>, JsonSerializer.Serialize(eventData));

                    <span class="hljs-comment">// ç­‰å¾… 5 ç§’åç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œæ”¯æŒå–æ¶ˆæ“ä½œ</span>
                    <span class="hljs-keyword">await</span> Task.Delay(TimeSpan.FromSeconds(<span class="hljs-number">5</span>), stoppingToken);
                }
                <span class="hljs-keyword">catch</span> (Exception ex)
                {
                    <span class="hljs-comment">// è®°å½•æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„å¼‚å¸¸</span>
                    _logger.LogError(ex, <span class="hljs-string">"Error in SSE background service"</span>);
                }
            }
        }
    }
</code></pre>
<h3 data-id="heading-6">å…¶ä»–é…ç½®</h3>
<pre><code class="hljs language-C#" lang="C#"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Program</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Main</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[] args</span>)</span>
    {
        <span class="hljs-keyword">var</span> builder = WebApplication.CreateBuilder(args);

        ConfigureAutofac(builder);

        <span class="hljs-comment">// Add services to the container.</span>
        builder.Services.AddControllers();

        builder.Services.AddEndpointsApiExplorer();
        builder.Services.AddSwaggerGen();

        <span class="hljs-keyword">var</span> app = builder.Build();
        <span class="hljs-comment">// Configure the HTTP request pipeline.</span>
        <span class="hljs-keyword">if</span> (app.Environment.IsDevelopment())
        {
            app.UseSwagger();
            app.UseSwaggerUI();
        }

        app.UseHttpsRedirection();
        app.UseAuthorization();
        app.MapControllers();
        app.Run();
    }

    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> é…ç½® Autofac</span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
    <span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;param name="builder"&gt;</span><span class="hljs-doctag">&lt;/param&gt;</span></span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ConfigureAutofac</span>(<span class="hljs-params">WebApplicationBuilder builder</span>)</span>
    {
        <span class="hljs-comment">// é…ç½® Autofac ä½œä¸º DI å®¹å™¨</span>
        builder.Host.UseServiceProviderFactory(<span class="hljs-keyword">new</span> AutofacServiceProviderFactory());

        <span class="hljs-comment">// é…ç½®å®¹å™¨æ³¨å†Œ</span>
        builder.Host.ConfigureContainer&lt;ContainerBuilder&gt;(containerBuilder =&gt;
        {
            <span class="hljs-comment">// é‡ç‚¹å†…å®¹ï¼Œè¿™é‡Œå¿…é¡»è¦æ³¨å†Œæˆå•ä¾‹æ¨¡å¼</span>
            containerBuilder.RegisterType&lt;SseService&gt;().As&lt;ISseService&gt;().SingleInstance();
            <span class="hljs-comment">// Autofacæ³¨å†Œ</span>
            containerBuilder.RegisterModule(<span class="hljs-keyword">new</span> AutofacModuleRegister());
            <span class="hljs-comment">// æ³¨å†Œåå°æœåŠ¡ï¼Œé¡¹ç›®å¯åŠ¨æ—¶å°±ä¼šæ‰§è¡Œ</span>
            containerBuilder.RegisterType&lt;SseBackgroundService&gt;().As&lt;IHostedService&gt;();
        });
    }
}
</code></pre>
<h3 data-id="heading-7">å‰ç«¯ä»£ç </h3>
<pre><code class="hljs language-JS" lang="JS">&lt;script&gt;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">sendMessage</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¿æ¥åˆ° SSE æµ</span>
        <span class="hljs-keyword">const</span> clientId = <span class="hljs-string">'client-'</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
        <span class="hljs-keyword">const</span> eventSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSource</span>(<span class="hljs-string">`æ›¿æ¢æˆä½ çš„åŸŸå/api/sse/stream?clientId=<span class="hljs-subst">${clientId}</span>`</span>);

        eventSource.<span class="hljs-property">onopen</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'SSE connection opened'</span>);
        };

        eventSource.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Message received:'</span>, event.<span class="hljs-property">data</span>);
        };

        eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'connection'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Connection event:'</span>, event.<span class="hljs-property">data</span>);
        });

        eventSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'time-update'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-keyword">const</span> data = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(event.<span class="hljs-property">data</span>);
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Time update:'</span>, data);
            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'server-time'</span>).<span class="hljs-property">innerText</span> = data.<span class="hljs-property">timestamp</span>;
        });

        eventSource.<span class="hljs-property">onerror</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'SSE error occurred'</span>);
        };
    }
        
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Send message"</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"sendMessage()"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

</code></pre>
<h3 data-id="heading-8">æœ€åæ•ˆæœ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7232f428961947089094012115f48196~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bmM5omNX2xvb25n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360290&amp;x-signature=rpQs4gsA5ciwLpzqn62ISlD%2FEcI%3D" alt="81607923-dbcd-4be4-854c-89d2042e6dad.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Paimon Branch --- æµæ‰¹ä¸€ä½“åŒ–ä¹‹äºŒ]]></title>    <link>https://juejin.cn/post/7579427549471752238</link>    <guid>https://juejin.cn/post/7579427549471752238</guid>    <pubDate>2025-12-03T09:25:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579427549471752238" data-draft-id="7579451710302044186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Paimon Branch --- æµæ‰¹ä¸€ä½“åŒ–ä¹‹äºŒ"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Flink"/> <meta itemprop="datePublished" content="2025-12-03T09:25:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="expect7g"/> <meta itemprop="url" content="https://juejin.cn/user/3514471387235735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Paimon Branch --- æµæ‰¹ä¸€ä½“åŒ–ä¹‹äºŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3514471387235735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    expect7g
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:25:12.000Z" title="Wed Dec 03 2025 09:25:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Branchæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>å¯ä»¥ç†è§£ä¸ºæ˜¯gitçš„åˆ†æ”¯ï¼Œåˆ†ä¸ºä¸»åˆ†æ”¯ã€devåˆ†æ”¯ç­‰ç­‰ï¼Œè€Œæœ€åè¯»å–çš„æ—¶å€™å°±ç›¸å½“äºæ˜¯åˆ†æ”¯çš„ä¸€ä¸ªmergeåˆå¹¶</p>
<p>åœ¨æµå¼æ•°æ®å¤„ç†ä¸­ï¼Œæ•°æ®å¯èƒ½å› ä¸ºä¹±åºç­‰é—®é¢˜ï¼Œå­˜åœ¨ä¸å‡†ç¡®çš„æƒ…å†µï¼Œè¿™æ˜¯å®æ—¶çš„é€šç—…ï¼Œè€Œå®æ—¶ä¿®æ­£æ•°æ®å­˜åœ¨å›°éš¾ï¼Œé‚£ä¹ˆä¸ºäº†è§£å†³è¿™ä¸ªè¡¥æ•°çš„æƒ…å†µï¼Œå› æ­¤Paimonæ¨å‡ºäº†Branchåˆ†æ”¯æœºåˆ¶ã€‚</p>
<p>å‡è®¾ç°æœ‰å·¥ä½œæµå¤„ç†çš„åˆ†æ”¯ä¸ºâ€œä¸»åˆ†æ”¯â€ï¼Œé€šè¿‡åˆ›å»ºè‡ªå®šä¹‰æ•°æ®åˆ†æ”¯ï¼Œå¯åœ¨ä¸åœæ­¢ç°æœ‰è¯»å†™å·¥ä½œæµä¸”æ— éœ€å¤åˆ¶ä¸»åˆ†æ”¯æ•°æ®çš„å‰æä¸‹ï¼Œå¯¹ç°æœ‰è¡¨è¿›è¡Œæ–°ä»»åŠ¡çš„å®éªŒæµ‹è¯•ä¸æ•°æ®éªŒè¯ã€‚</p>
<p>å€ŸåŠ©åˆå¹¶æˆ–æ›¿æ¢åˆ†æ”¯æ“ä½œï¼Œå³å¯å®Œæˆæ•°æ®ä¿®æ­£å·¥ä½œã€‚</p>
<h3 data-id="heading-1">(1) Branchçš„åˆ›å»ºå’Œåˆ é™¤</h3>
<p>é¦–å…ˆéœ€è¦åˆ›å»ºbranchï¼ŒPaimonæ”¯æŒä»ç‰¹å®šæ ‡ç­¾åˆ›å»ºåˆ†æ”¯ï¼Œæˆ–ç›´æ¥åˆ›å»ºç©ºåˆ†æ”¯â€”â€”è¿™æ„å‘³ç€åˆ›å»ºçš„åˆ†æ”¯åˆå§‹çŠ¶æ€å¦‚åŒç©ºç™½è¡¨æ ¼ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä»tag1ä¸­å¯¹table1åˆ›å»ºtest-branchåˆ†æ”¯</span>
<span class="hljs-keyword">CALL</span> sys.create_branch(<span class="hljs-string">'default.table1'</span>, <span class="hljs-string">'test-branch'</span>, <span class="hljs-string">'tag1'</span>);

<span class="hljs-comment">-- ç›´æ¥å¯¹table2åˆ›å»ºä¸€ä¸ªç©ºçš„tese-branch2åˆ†æ”¯</span>
<span class="hljs-keyword">CALL</span> sys.create_branch(<span class="hljs-string">'default.table2'</span>, <span class="hljs-string">'test-branch2'</span>);

<span class="hljs-comment">-- åˆ é™¤æŒ‡å®šbranch</span>
<span class="hljs-keyword">CALL</span> sys.delete_branch(<span class="hljs-string">'default.table3'</span>, <span class="hljs-string">'branch1'</span>);
</code></pre>
<h3 data-id="heading-2">(2) Branchçš„ä½¿ç”¨ -- è¯»å†™</h3>
<p>é»˜è®¤Branchåˆ†æ”¯æ˜¯mainï¼Œå¹¶ä¸”Branchæœ‰é»˜è®¤çš„å‰ç¼€æ˜¯branch_</p>
<p>å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¯»å†™ç‰¹å®šçš„Branchï¼Œæœ‰2ç§æ–¹å¼</p>
<h4 data-id="heading-3">&lt;1&gt; æ–¹å¼ä¸€ï¼šsqlå°±æŒ‡å®šå¥½ï¼Œè¯»å†™é‚£ä¸ªBranch</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¯¹è¡¨tä»Branchä¸ºtest-branchå»è¯»æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `t$branch_test<span class="hljs-operator">-</span>branch`; <span class="hljs-comment">-- æ‰¹</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> `t$branch_test<span class="hljs-operator">-</span>branch` <span class="hljs-comment">/*+ OPTIONS('consumer-id' = 'myid') */</span>; <span class="hljs-comment">-- æµ</span>

<span class="hljs-comment">-- å¾€è¡¨tçš„test2åˆ†æ”¯å»å†™</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `t$branch_test2` 
<span class="hljs-keyword">SELECT</span> ...
</code></pre>
<h4 data-id="heading-4">&lt;2&gt; æ–¹å¼äºŒï¼šé‡‡ç”¨Fallback Branch -- æµæ‰¹ä¸€ä½“ä¹‹äºŒ</h4>
<p>è¿™ä¸ªåŸç†å°±æ˜¯ï¼šè®¾ç½®ä¸ºfallbackåˆ†æ”¯å, å½“æŸ¥è¯¢/å†™å…¥çš„åˆ†åŒºåœ¨ä¸»åˆ†æ”¯ä¸å­˜åœ¨æ—¶ï¼Œpaimon readerä¼šä»<code>scan.fallback-branch</code>æŒ‡å®šçš„åˆ†æ”¯å»è¿›è¡Œæ“ä½œ</p>
<p>å› æ­¤ï¼Œå°±å¯ä»¥é’ˆå¯¹æµæ‰¹ä¸€ä½“åšä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç¦»çº¿çš„æ‰¹æ•°æ®æ­£å¸¸å†™å…¥åˆ°æ˜¨æ—¥çš„åˆ†åŒºä¸­ï¼Œè€Œå®æ—¶æ•°æ®å†™åˆ°ä»Šæ—¥çš„Fallback Branchåˆ†æ”¯çš„åˆ†åŒºä¸­</p>
<p>æ¡ˆä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1.åˆ›å»ºä¸€ä¸ªTè¡¨ï¼ŒæŒ‰ç…§dtåˆ†åŒº</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> T (
    dt STRING <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    name STRING <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    amount <span class="hljs-type">BIGINT</span>
) PARTITIONED <span class="hljs-keyword">BY</span> (dt);

<span class="hljs-comment">-- 2.ä¸ºæµå¤„ç†åˆ›å»ºä¸€ä¸ªBranchï¼Œå«test</span>
<span class="hljs-keyword">CALL</span> sys.create_branch(<span class="hljs-string">'default.T'</span>, <span class="hljs-string">'test'</span>);

<span class="hljs-comment">-- 3.å¯¹teståˆ†æ”¯è¿›è¡Œä¿®æ”¹å±æ€§</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> `T$branch_test` <span class="hljs-keyword">SET</span> (
    <span class="hljs-string">'primary-key'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'dt,name'</span>,
    <span class="hljs-string">'bucket'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'2'</span>,
    <span class="hljs-string">'changelog-producer'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'lookup'</span>
);

<span class="hljs-comment">-- 4.è®¾ç½®Fallback Branch ä¸º teståˆ†æ”¯</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T <span class="hljs-keyword">SET</span> (
    <span class="hljs-string">'scan.fallback-branch'</span> <span class="hljs-operator">=</span> <span class="hljs-string">'test'</span>
);

<span class="hljs-comment">-- 5.æµå¼å†™å…¥ï¼Œå†™å…¥åˆ°Tè¡¨çš„teståˆ†æ”¯çš„20240726åˆ†åŒºä¸­</span>
(è¿™é‡Œå¦‚æœå…¨éƒ¨éƒ½æ˜¯<span class="hljs-number">20250726</span>åˆ†åŒºçš„æ•°æ®ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä¸å†™$branch_testï¼Œå› ä¸ºTè¡¨æ˜¯æ²¡æœ‰<span class="hljs-number">20240726</span>åˆ†åŒºçš„ï¼Œä¼šå»Fallback Branchåˆ†æ”¯ä¸­æ“ä½œï¼Œä½†æ˜¯å»ºè®®æ˜¯å¸¦ä¸Š$branch_test)
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `T$branch_test` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'20240725'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-number">4</span>), (<span class="hljs-string">'20240725'</span>, <span class="hljs-string">'peach'</span>, <span class="hljs-number">10</span>), (<span class="hljs-string">'20240726'</span>, <span class="hljs-string">'cherry'</span>, <span class="hljs-number">3</span>), (<span class="hljs-string">'20240726'</span>, <span class="hljs-string">'pear'</span>, <span class="hljs-number">6</span>);

<span class="hljs-comment">-- 6.æ‰¹å¼å†™å…¥Tçš„ä¸»åˆ†æ”¯</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> T <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'20240725'</span>, <span class="hljs-string">'apple'</span>, <span class="hljs-number">5</span>), (<span class="hljs-string">'20240725'</span>, <span class="hljs-string">'banana'</span>, <span class="hljs-number">7</span>);

<span class="hljs-comment">-- 7.æŸ¥è¡¨çš„æ—¶å€™ï¼Œå¼•æ“ä¼šåˆå¹¶Branchåˆ†æ”¯çš„æ•°æ®ï¼Œå› æ­¤æŸ¥è¯¢ï¼Œæ˜¯èƒ½æŸ¥åˆ°20240726åˆ†åŒºçš„æ•°æ®çš„</span>
<span class="hljs-comment">-- åˆå¹¶çš„é€»è¾‘æ˜¯mainæ²¡æœ‰çš„åˆ†åŒºï¼Œä»Fallback Branchä¸­æ‹¿æ•°æ®ï¼Œmainæœ‰çš„åˆ†åŒºï¼Œä»mainæ‹¿</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> T;
<span class="hljs-comment">/*
+------------------+------------------+--------+
|               dt |             name | amount |
+------------------+------------------+--------+
|         20240725 |            apple |      5 |
|         20240725 |           banana |      7 |
|         20240726 |           cherry |      3 |
|         20240726 |             pear |      6 |
+------------------+------------------+--------+
*/</span>

<span class="hljs-comment">-- é‡ç½®fallback branch</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> T RESET ( <span class="hljs-string">'scan.fallback-branch'</span> );

<span class="hljs-comment">-- è¿™æ ·è¯»çš„è¯ï¼Œå°±åªèƒ½è¯»mainä¸»åˆ†æ”¯çš„æ•°æ®äº†</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> T;
<span class="hljs-comment">/*
+------------------+------------------+--------+
|               dt |             name | amount |
+------------------+------------------+--------+
|         20240725 |            apple |      5 |
|         20240725 |           banana |      7 |
+------------------+------------------+--------+
*/</span>
</code></pre>
<h3 data-id="heading-5">(3) æ€»ç»“</h3>
<p>é’ˆå¯¹å®æ—¶æ•°æ®ä¸å‡†ç¡®ï¼Œéœ€è¦è¡¥æ•°ï¼Œä¿®æ”¹çš„æ“ä½œï¼Œä¼ ç»Ÿåšæ³•æ˜¯ç¦»çº¿è¦†ç›–å®æ—¶æ˜¨æ—¥ï¼Œåˆ†åˆ«è½ä¸¤ä¸ªè¡¨ï¼Œç»´æŠ¤ä¸¤å¥—ç³»ç»Ÿï¼Œè¿™å¯¹å¼€å‘è€Œå·²æ˜¯å¾ˆæµªè´¹èµ„æºçš„é—®é¢˜ï¼Œå› æ­¤ï¼ŒPaimonæ¨å‡ºäº†Branchæ“ä½œï¼Œå»å®ç°ä¸€å¥—sqlä¸€å¼ è¡¨ï¼Œä¸åŒçš„Branchå»å­˜å®æ—¶å’Œç¦»çº¿çš„æ•°æ®ï¼Œäº’ç›¸ä¸å½±å“ï¼ŒæŸ¥è¯¢çš„æ—¶å€™åˆèƒ½æ—¢æŸ¥å‡ºå®æ—¶çš„ï¼Œä¹ŸæŸ¥å‡ºç¦»çº¿çš„</p>
<p>æ–¹æ¡ˆå°±æ˜¯ï¼š</p>
<ol>
<li>ç¦»çº¿è·‘mainä¸»åˆ†æ”¯ï¼Œç›´æ¥insert overwrite/into</li>
<li>å®æ—¶çš„è·‘Fallback BranchæŒ‡å®šåˆ†æ”¯ï¼Œåªèƒ½insert into</li>
<li>æŸ¥è¯¢æ—¶ï¼ŒPaimon readerä¼šå»åˆå¹¶ï¼š<strong>ä¼˜å…ˆè¯»å–ä¸»åˆ†æ”¯ï¼ˆmainï¼‰çš„åˆ†åŒºæ•°æ®ï¼›å¦‚æœ main åˆ†æ”¯æ²¡æœ‰è¯¥åˆ†åŒºï¼Œæ‰ä» Fallback Branch è¯»å–è¯¥åˆ†åŒºçš„è¡¥å……æ•°æ®</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java æŠ½è±¡ç±» vs æ¥å£ï¼šç›¸åŒç‚¹ä¸ä¸åŒç‚¹]]></title>    <link>https://juejin.cn/post/7579313396207665167</link>    <guid>https://juejin.cn/post/7579313396207665167</guid>    <pubDate>2025-12-03T09:27:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579313396207665167" data-draft-id="7579385656779964450" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java æŠ½è±¡ç±» vs æ¥å£ï¼šç›¸åŒç‚¹ä¸ä¸åŒç‚¹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-03T09:27:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åœ¨æˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/3632442150752573"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java æŠ½è±¡ç±» vs æ¥å£ï¼šç›¸åŒç‚¹ä¸ä¸åŒç‚¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3632442150752573/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åœ¨æˆé•¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:27:36.000Z" title="Wed Dec 03 2025 09:27:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å¿«é€Ÿå¯¹æ¯”è¡¨</h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>æŠ½è±¡ç±»</th><th>æ¥å£</th></tr></thead><tbody><tr><td><strong>å…³é”®å­—</strong></td><td><code>abstract class</code></td><td><code>interface</code></td></tr><tr><td><strong>å®ä¾‹åŒ–</strong></td><td>âŒ ä¸èƒ½</td><td>âŒ ä¸èƒ½</td></tr><tr><td><strong>ç»§æ‰¿/å®ç°</strong></td><td>å•ç»§æ‰¿</td><td>å¤šå®ç°</td></tr><tr><td><strong>æ–¹æ³•ç±»å‹</strong></td><td>æŠ½è±¡ + å…·ä½“</td><td>é»˜è®¤åªæœ‰æŠ½è±¡ï¼ˆJava 8å‰ï¼‰</td></tr><tr><td><strong>æ„é€ å™¨</strong></td><td>âœ… æœ‰</td><td>âŒ æ— </td></tr><tr><td><strong>å˜é‡</strong></td><td>ä»»æ„ç±»å‹</td><td>åªèƒ½æ˜¯å¸¸é‡</td></tr><tr><td><strong>è®¿é—®ä¿®é¥°ç¬¦</strong></td><td>ä»»æ„</td><td>é»˜è®¤ <code>public</code></td></tr><tr><td><strong>è®¾è®¡ç›®çš„</strong></td><td>ä»£ç å¤ç”¨ + è§„èŒƒ</td><td>å®šä¹‰å¥‘çº¦/èƒ½åŠ›</td></tr></tbody></table>
<h2 data-id="heading-1">ğŸ” ç›¸åŒç‚¹</h2>
<h3 data-id="heading-2"><strong>1. éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractClass</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// æ¥å£ä¸èƒ½å®ä¾‹åŒ–</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CannotInstantiate</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// âŒ ä¸¤è€…éƒ½ä¸èƒ½ç›´æ¥new</span>
        <span class="hljs-comment">// AbstractClass obj1 = new AbstractClass();  // ç¼–è¯‘é”™è¯¯</span>
        <span class="hljs-comment">// Interface obj2 = new Interface();         // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h3 data-id="heading-3"><strong>2. éƒ½å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnimalClass</span> {
    <span class="hljs-comment">// æŠ½è±¡ç±»å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AnimalInterface</span> {
    <span class="hljs-comment">// æ¥å£æ–¹æ³•é»˜è®¤æ˜¯æŠ½è±¡çš„</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span>;  <span class="hljs-comment">// ç­‰ä»·äº public abstract void makeSound()</span>
}

<span class="hljs-comment">// å­ç±»/å®ç°ç±»å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AnimalClass</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ±ªæ±ª"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AnimalInterface</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å–µå–µ"</span>);
    }
}
</code></pre>
<h3 data-id="heading-4"><strong>3. éƒ½æ”¯æŒå¤šæ€</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Drawable</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ç”»åœ†å½¢"</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Drawable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ç”»æ­£æ–¹å½¢"</span>);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PolymorphismDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æŠ½è±¡ç±»çš„å¤šæ€</span>
        <span class="hljs-type">Shape</span> <span class="hljs-variable">shape</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();
        shape.draw();  <span class="hljs-comment">// ç”»åœ†å½¢</span>
        
        <span class="hljs-comment">// æ¥å£çš„å¤šæ€</span>
        <span class="hljs-type">Drawable</span> <span class="hljs-variable">drawable</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>();
        drawable.draw();  <span class="hljs-comment">// ç”»æ­£æ–¹å½¢</span>
        
        <span class="hljs-comment">// éƒ½å¯ä»¥ç”¨æ•°ç»„ç»Ÿä¸€ç®¡ç†</span>
        Shape[] shapes = {<span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>()};
        Drawable[] drawables = {<span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>()};
    }
}
</code></pre>
<h2 data-id="heading-5">âš¡ ä¸åŒç‚¹</h2>
<h3 data-id="heading-6"><strong>1. ç»§æ‰¿ vs å®ç°ï¼ˆæ ¸å¿ƒåŒºåˆ«ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å•ç»§æ‰¿ï¼šä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">move</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Engine</span> {
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Vehicle</span> {
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">move</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ±½è½¦è¡Œé©¶"</span>);
    }
}

<span class="hljs-comment">/*
class HybridCar extends Vehicle, Engine {  
    // âŒ é”™è¯¯ï¼šä¸èƒ½ç»§æ‰¿å¤šä¸ªæŠ½è±¡ç±»
}
*/</span>

<span class="hljs-comment">// å¤šå®ç°ï¼šä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Flyable</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Swimmable</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flyable</span>, Swimmable {
    <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¯ä»¥å®ç°å¤šä¸ªæ¥å£</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é¸­å­é£"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é¸­å­æ¸¸"</span>);
    }
}

<span class="hljs-comment">// ç»„åˆï¼šå¯ä»¥ç»§æ‰¿ä¸€ä¸ªç±» + å®ç°å¤šä¸ªæ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AmphibiousVehicle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Vehicle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Flyable</span>, Swimmable {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">move</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¸¤æ –è½¦ç§»åŠ¨"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¸¤æ –è½¦é£è¡Œæ¨¡å¼"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä¸¤æ –è½¦æ¸¸æ³³æ¨¡å¼"</span>);
    }
}
</code></pre>
<h3 data-id="heading-7"><strong>2. æ–¹æ³•å®ç°èƒ½åŠ›ï¼ˆJava 8+ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractExample</span> {
    <span class="hljs-comment">// 1. å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">abstractMethod</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// 2. å¯ä»¥æœ‰å…·ä½“æ–¹æ³•ï¼ˆä¸€ç›´éƒ½å¯ä»¥ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">concreteMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»çš„å…·ä½“æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 3. å¯ä»¥æœ‰æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AbstractExample</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»æ„é€ å™¨"</span>);
    }
    
    <span class="hljs-comment">// 4. å¯ä»¥æœ‰é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»é™æ€æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 5. å¯ä»¥æœ‰finalæ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">finalMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»finalæ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 6. å¯ä»¥æœ‰privateæ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»ç§æœ‰æ–¹æ³•"</span>);
    }
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterfaceExample</span> {
    <span class="hljs-comment">// 1. æŠ½è±¡æ–¹æ³•ï¼ˆJava 8å‰å”¯ä¸€å…è®¸çš„æ–¹æ³•ï¼‰</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">abstractMethod</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// 2. é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¥å£çš„é»˜è®¤æ–¹æ³•"</span>);
        privateMethod();  <span class="hljs-comment">// è°ƒç”¨ç§æœ‰æ–¹æ³•</span>
    }
    
    <span class="hljs-comment">// 3. é™æ€æ–¹æ³•ï¼ˆJava 8+ï¼‰</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¥å£çš„é™æ€æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 4. ç§æœ‰æ–¹æ³•ï¼ˆJava 9+ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¥å£çš„ç§æœ‰æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 5. ç§æœ‰é™æ€æ–¹æ³•ï¼ˆJava 9+ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateStaticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¥å£çš„ç§æœ‰é™æ€æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æœ‰æ„é€ å™¨</span>
    <span class="hljs-comment">// InterfaceExample() { }  // ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æœ‰finalæ–¹æ³•</span>
    <span class="hljs-comment">// final void finalMethod();  // ç¼–è¯‘é”™è¯¯</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Implementation</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InterfaceExample</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">abstractMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å®ç°æŠ½è±¡æ–¹æ³•"</span>);
    }
}
</code></pre>
<h3 data-id="heading-8"><strong>3. å˜é‡/å­—æ®µçš„åŒºåˆ«</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractVars</span> {
    <span class="hljs-comment">// 1. å¯ä»¥æœ‰å®ä¾‹å˜é‡</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">String</span> <span class="hljs-variable">instanceVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å®ä¾‹å˜é‡"</span>;
    
    <span class="hljs-comment">// 2. å¯ä»¥æœ‰éå¸¸é‡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-comment">// 3. å¯ä»¥æœ‰é™æ€å˜é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">String</span> <span class="hljs-variable">staticVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"é™æ€å˜é‡"</span>;
    
    <span class="hljs-comment">// 4. å¯ä»¥æœ‰finalå˜é‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">finalVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"finalå˜é‡"</span>;
    
    <span class="hljs-comment">// 5. è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥æ˜¯ä»»æ„çš„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">privateVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ç§æœ‰å˜é‡"</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-type">String</span> <span class="hljs-variable">protectedVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å—ä¿æŠ¤å˜é‡"</span>;
    <span class="hljs-type">String</span> <span class="hljs-variable">defaultVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"é»˜è®¤å˜é‡"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">publicVar</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å…¬å…±å˜é‡"</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterfaceVars</span> {
    <span class="hljs-comment">// 1. æ‰€æœ‰å˜é‡é»˜è®¤æ˜¯ public static final</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">CONSTANT</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å¸¸é‡"</span>;
    
    <span class="hljs-comment">// ç­‰ä»·äºï¼š</span>
    <span class="hljs-comment">// public static final String CONSTANT = "å¸¸é‡";</span>
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æœ‰å®ä¾‹å˜é‡</span>
    <span class="hljs-comment">// String instanceVar;  // ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-comment">// âŒ ä¸èƒ½æœ‰éfinalå˜é‡</span>
    <span class="hljs-comment">// int counter = 0;     // å®é™…ä¸Šæ˜¯å¸¸é‡</span>
    
    <span class="hljs-comment">// 2. åªèƒ½æ˜¯public</span>
    <span class="hljs-comment">// private String privateVar = "é”™è¯¯";  // ç¼–è¯‘é”™è¯¯</span>
    <span class="hljs-comment">// protected String protectedVar = "é”™è¯¯";  // ç¼–è¯‘é”™è¯¯</span>
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VariablesDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»å˜é‡: "</span> + AbstractVars.staticVar);
        System.out.println(<span class="hljs-string">"æ¥å£å¸¸é‡: "</span> + InterfaceVars.CONSTANT);
        
        <span class="hljs-comment">// æ¥å£å¸¸é‡ä¸èƒ½ä¿®æ”¹</span>
        <span class="hljs-comment">// InterfaceVars.CONSTANT = "æ–°å€¼";  // ç¼–è¯‘é”™è¯¯</span>
    }
}
</code></pre>
<h3 data-id="heading-9"><strong>4. æ„é€ å™¨çš„åŒºåˆ«</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractWithConstructor</span> {
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-comment">// æŠ½è±¡ç±»å¯ä»¥æœ‰æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AbstractWithConstructor</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        System.out.println(<span class="hljs-string">"æŠ½è±¡ç±»æ„é€ å™¨è°ƒç”¨: "</span> + name);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span>;
    
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractWithConstructor</span> {
    <span class="hljs-comment">// å­ç±»å¿…é¡»è°ƒç”¨çˆ¶ç±»æ„é€ å™¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteClass</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">super</span>(name);  <span class="hljs-comment">// å¿…é¡»è°ƒç”¨</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> {
        System.out.println(getName() + <span class="hljs-string">"åœ¨åšäº‹æƒ…"</span>);
    }
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NoConstructor</span> {
    <span class="hljs-comment">// âŒ æ¥å£ä¸èƒ½æœ‰æ„é€ å™¨</span>
    <span class="hljs-comment">// NoConstructor() { }  // ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConstructorDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ConcreteClass</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteClass</span>(<span class="hljs-string">"æµ‹è¯•"</span>);
        obj.doSomething();
    }
}
</code></pre>
<h3 data-id="heading-10"><strong>5. è®¿é—®ä¿®é¥°ç¬¦çš„åŒºåˆ«</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AccessModifiers</span> {
    <span class="hljs-comment">// æ‰€æœ‰è®¿é—®ä¿®é¥°ç¬¦éƒ½å¯ä»¥ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {}
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultMethod</span><span class="hljs-params">()</span> {}
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">protectedMethod</span><span class="hljs-params">()</span> {}
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publicMethod</span><span class="hljs-params">()</span> {}
    
    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ä¸èƒ½æ˜¯private</span>
    <span class="hljs-comment">// private abstract void privateAbstract();  // ç¼–è¯‘é”™è¯¯</span>
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">protectedAbstract</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publicAbstract</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">InterfaceAccess</span> {
    <span class="hljs-comment">// æ¥å£æ–¹æ³•é»˜è®¤æ˜¯public</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;  <span class="hljs-comment">// ç­‰ä»·äº public abstract void method()</span>
    
    <span class="hljs-comment">// Java 9+ å¯ä»¥æœ‰privateæ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"æ¥å£ç§æœ‰æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// ä¸èƒ½æ˜¯protectedæˆ–é»˜è®¤</span>
    <span class="hljs-comment">// protected void protectedMethod();  // ç¼–è¯‘é”™è¯¯</span>
    <span class="hljs-comment">// void defaultMethod();              // ç¼–è¯‘é”™è¯¯ï¼ˆJava 8å‰ï¼‰</span>
    
    <span class="hljs-comment">// Java 8+ é»˜è®¤æ–¹æ³•å¯ä»¥æ˜¯public</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultPublicMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é»˜è®¤å…¬å…±æ–¹æ³•"</span>);
    }
}
</code></pre>
<h2 data-id="heading-11">ğŸ’¡ ä½•æ—¶ä½¿ç”¨æŠ½è±¡ç±» vs æ¥å£</h2>
<h3 data-id="heading-12"><strong>1. ä½¿ç”¨æŠ½è±¡ç±»çš„æƒ…å†µ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯1ï¼šå¤šä¸ªç›¸å…³ç±»å…±äº«ä»£ç </span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-comment">// å…±äº«çš„è¿æ¥é€»è¾‘</span>
    <span class="hljs-keyword">protected</span> Connection <span class="hljs-title function_">connect</span><span class="hljs-params">(String url)</span> {
        System.out.println(<span class="hljs-string">"è¿æ¥åˆ°: "</span> + url);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Connection</span>();
    }
    
    <span class="hljs-comment">// å…±äº«çš„å…³é—­é€»è¾‘</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">(Connection conn)</span> {
        System.out.println(<span class="hljs-string">"å…³é—­è¿æ¥"</span>);
    }
    
    <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeQuery</span><span class="hljs-params">(String sql)</span> {
        <span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> connect(getUrl());
        <span class="hljs-keyword">try</span> {
            execute(sql, conn);
        } <span class="hljs-keyword">finally</span> {
            close(conn);
        }
    }
    
    <span class="hljs-comment">// å­ç±»å¿…é¡»å®ç°</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title function_">getUrl</span><span class="hljs-params">()</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(String sql, Connection conn)</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MySQLDatabase</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getUrl</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/db"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(String sql, Connection conn)</span> {
        System.out.println(<span class="hljs-string">"æ‰§è¡ŒMySQLæŸ¥è¯¢: "</span> + sql);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">OracleDatabase</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Database</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getUrl</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"jdbc:oracle:thin:@localhost:1521:orcl"</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(String sql, Connection conn)</span> {
        System.out.println(<span class="hljs-string">"æ‰§è¡ŒOracleæŸ¥è¯¢: "</span> + sql);
    }
}
</code></pre>
<h3 data-id="heading-13"><strong>2. ä½¿ç”¨æ¥å£çš„æƒ…å†µ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åœºæ™¯1ï¼šå®šä¹‰èƒ½åŠ›/å¥‘çº¦</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Comparable</span>&lt;T&gt; {
    <span class="hljs-type">int</span> <span class="hljs-title function_">compareTo</span><span class="hljs-params">(T other)</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-comment">// æ ‡è®°æ¥å£</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Cloneable</span> {
    <span class="hljs-comment">// æ ‡è®°æ¥å£</span>
}

<span class="hljs-comment">// åœºæ™¯2ï¼šå¤šé‡ç»§æ‰¿</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Worker</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Athlete</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">train</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeStudent</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Student</span>, Worker, Athlete {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">work</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å…¼èŒå·¥ä½œ"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">study</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"å­¦ä¹ è¯¾ç¨‹"</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">train</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ä½“è‚²è®­ç»ƒ"</span>);
    }
}

<span class="hljs-comment">// åœºæ™¯3ï¼šå›è°ƒæœºåˆ¶</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClickListener</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onClick</span><span class="hljs-params">()</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TextChangedListener</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onTextChanged</span><span class="hljs-params">(String newText)</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> {
    <span class="hljs-keyword">private</span> ClickListener listener;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClickListener</span><span class="hljs-params">(ClickListener listener)</span> {
        <span class="hljs-built_in">this</span>.listener = listener;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">click</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (listener != <span class="hljs-literal">null</span>) {
            listener.onClick();
        }
    }
}
</code></pre>
<h3 data-id="heading-14"><strong>3. ç»“åˆä½¿ç”¨ï¼ˆå¸¸è§æ¨¡å¼ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŠ½è±¡ç±»æä¾›éª¨æ¶å®ç°</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractList</span>&lt;E&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">List</span>&lt;E&gt; {
    <span class="hljs-comment">// æä¾›é€šç”¨å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> {
        add(size(), e);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ç”±å­ç±»å®ç°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// æ¥å£å®šä¹‰å¥‘çº¦</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">List</span>&lt;E&gt; {
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span>;
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span>;
    E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span>;
    <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// å…·ä½“å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayList</span>&lt;E&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractList</span>&lt;E&gt; {
    <span class="hljs-keyword">private</span> Object[] elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[<span class="hljs-number">10</span>];
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> index, E element)</span> {
        <span class="hljs-comment">// å®ç°ç»†èŠ‚</span>
        System.out.println(<span class="hljs-string">"ArrayListæ·»åŠ å…ƒç´ "</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> E <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {
        <span class="hljs-comment">// å®ç°ç»†èŠ‚</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> size;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CombinedUsage</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        list.add(<span class="hljs-string">"Hello"</span>);
        System.out.println(<span class="hljs-string">"å¤§å°: "</span> + list.size());
    }
}
</code></pre>
<h2 data-id="heading-15">ğŸ“ ç°ä»£Javaä¸­çš„å˜åŒ–ï¼ˆJava 8+ï¼‰</h2>
<h3 data-id="heading-16"><strong>æ¥å£çš„å¢å¼º</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Java 8 å‰ï¼šæ¥å£åªèƒ½æœ‰æŠ½è±¡æ–¹æ³•</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">OldInterface</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">method</span><span class="hljs-params">()</span>;  <span class="hljs-comment">// åªèƒ½æ˜¯æŠ½è±¡æ–¹æ³•</span>
}

<span class="hljs-comment">// Java 8+ï¼šæ¥å£å¯ä»¥æœ‰å¤šæ ·æ–¹æ³•</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ModernInterface</span> {
    <span class="hljs-comment">// 1. æŠ½è±¡æ–¹æ³•</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">abstractMethod</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// 2. é»˜è®¤æ–¹æ³•</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">defaultMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é»˜è®¤å®ç°"</span>);
        privateMethod();
    }
    
    <span class="hljs-comment">// 3. é™æ€æ–¹æ³•</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">staticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"é™æ€æ–¹æ³•"</span>);
        privateStaticMethod();
    }
    
    <span class="hljs-comment">// 4. ç§æœ‰æ–¹æ³•ï¼ˆJava 9+ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ç§æœ‰å®ä¾‹æ–¹æ³•"</span>);
    }
    
    <span class="hljs-comment">// 5. ç§æœ‰é™æ€æ–¹æ³•ï¼ˆJava 9+ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">privateStaticMethod</span><span class="hljs-params">()</span> {
        System.out.println(<span class="hljs-string">"ç§æœ‰é™æ€æ–¹æ³•"</span>);
    }
}

<span class="hljs-comment">// ç°åœ¨æ¥å£ â‰ˆ æŠ½è±¡ç±»ï¼Œä½†ä»æœ‰åŒºåˆ«ï¼š</span>
<span class="hljs-comment">// 1. æ¥å£ä»ç„¶ä¸èƒ½æœ‰æ„é€ å™¨</span>
<span class="hljs-comment">// 2. æ¥å£ä»ç„¶ä¸èƒ½æœ‰å®ä¾‹å˜é‡</span>
<span class="hljs-comment">// 3. æ¥å£ä»ç„¶æ”¯æŒå¤šé‡ç»§æ‰¿</span>
</code></pre>
<h2 data-id="heading-17">ğŸ“ è®°å¿†å£è¯€</h2>
<pre><code class="hljs language-markdown" lang="markdown">ç›¸åŒç‚¹ï¼š
<span class="hljs-bullet">1.</span> éƒ½ä¸èƒ½newï¼ˆä¸èƒ½å®ä¾‹åŒ–ï¼‰
<span class="hljs-bullet">2.</span> éƒ½èƒ½æœ‰æŠ½è±¡æ–¹æ³•
<span class="hljs-bullet">3.</span> éƒ½æ”¯æŒå¤šæ€

ä¸åŒç‚¹ï¼š
æŠ½è±¡ç±»ï¼š
<span class="hljs-bullet">-</span> å•ç»§æ‰¿
<span class="hljs-bullet">-</span> æœ‰æ„é€ å™¨
<span class="hljs-bullet">-</span> æœ‰å…·ä½“æ–¹æ³•ï¼ˆä¸€ç›´éƒ½æœ‰ï¼‰
<span class="hljs-bullet">-</span> æœ‰å„ç§å˜é‡
<span class="hljs-bullet">-</span> è®¾è®¡ï¼šæ˜¯ä»€ä¹ˆï¼ˆis-aï¼‰

æ¥å£ï¼š
<span class="hljs-bullet">-</span> å¤šå®ç°
<span class="hljs-bullet">-</span> æ— æ„é€ å™¨
<span class="hljs-bullet">-</span> é»˜è®¤æ–¹æ³•ï¼ˆJava 8+ï¼‰
<span class="hljs-bullet">-</span> åªæœ‰å¸¸é‡
<span class="hljs-bullet">-</span> è®¾è®¡ï¼šèƒ½ä»€ä¹ˆï¼ˆhas-a/can-doï¼‰
</code></pre>
<h2 data-id="heading-18">ğŸ’¡ å®ç”¨å»ºè®®</h2>
<h3 data-id="heading-19"><strong>é€‰æ‹©æŒ‡å—</strong></h3>
<pre><code class="hljs language-markdown" lang="markdown">é—®è‡ªå·±è¿™äº›é—®é¢˜ï¼š

<span class="hljs-bullet">1.</span> éœ€è¦å¤šé‡ç»§æ‰¿å—ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æ¥å£
<span class="hljs-bullet">   -</span> å¦ â†’ ç»§ç»­

<span class="hljs-bullet">2.</span> éœ€è¦å…±äº«ä»£ç å—ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æŠ½è±¡ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨æ¥å£

<span class="hljs-bullet">3.</span> ç›¸å…³ç±»æœ‰ç´§å¯†å…³ç³»å—ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æŠ½è±¡ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨æ¥å£

<span class="hljs-bullet">4.</span> åªæ˜¯å®šä¹‰å¥‘çº¦å—ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æ¥å£
<span class="hljs-bullet">   -</span> å¦ â†’ ç»§ç»­

<span class="hljs-bullet">5.</span> éœ€è¦æ§åˆ¶å­ç±»æ„é€ å—ï¼Ÿ
<span class="hljs-bullet">   -</span> æ˜¯ â†’ ç”¨æŠ½è±¡ç±»
<span class="hljs-bullet">   -</span> å¦ â†’ ç”¨æ¥å£
</code></pre>
<h3 data-id="heading-20"><strong>æœ€ä½³å®è·µ</strong></h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨æ¥å£ï¼ˆæ›´åŠ çµæ´»ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Repository</span>&lt;T&gt; {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(T entity)</span>;
    T <span class="hljs-title function_">findById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;
    List&lt;T&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span>;
}

<span class="hljs-comment">// éœ€è¦å…±äº«ä»£ç æ—¶ä½¿ç”¨æŠ½è±¡ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractRepository</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Repository</span>&lt;T&gt; {
    <span class="hljs-keyword">protected</span> DatabaseConnection connection;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AbstractRepository</span><span class="hljs-params">(DatabaseConnection connection)</span> {
        <span class="hljs-built_in">this</span>.connection = connection;
    }
    
    <span class="hljs-comment">// å…±äº«çš„ä¿å­˜é€»è¾‘</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">save</span><span class="hljs-params">(T entity)</span> {
        validate(entity);
        persist(entity);
        logSave(entity);
    }
    
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">persist</span><span class="hljs-params">(T entity)</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">validate</span><span class="hljs-params">(T entity)</span> {
        <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logSave</span><span class="hljs-params">(T entity)</span> {
        <span class="hljs-comment">// æ—¥å¿—é€»è¾‘</span>
    }
}

<span class="hljs-comment">// å…·ä½“å®ç°</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractRepository</span>&lt;User&gt; {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserRepository</span><span class="hljs-params">(DatabaseConnection connection)</span> {
        <span class="hljs-built_in">super</span>(connection);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">persist</span><span class="hljs-params">(User entity)</span> {
        <span class="hljs-comment">// å…·ä½“æŒä¹…åŒ–é€»è¾‘</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span> {
        <span class="hljs-comment">// å…·ä½“æŸ¥æ‰¾é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å…·ä½“æŸ¥æ‰¾é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    }
}
</code></pre>
<p><strong>è®°ä½</strong>ï¼šç°ä»£Javaå¼€å‘ä¸­ï¼Œä¼˜å…ˆè€ƒè™‘ä½¿ç”¨æ¥å£ï¼Œåªæœ‰åœ¨ç¡®å®éœ€è¦å…±äº«ä»£ç æ—¶æ‰ä½¿ç”¨æŠ½è±¡ç±»ã€‚æ¥å£æä¾›äº†æ›´å¤§çš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘]]></title>    <link>https://juejin.cn/post/7578787344612769828</link>    <guid>https://juejin.cn/post/7578787344612769828</guid>    <pubDate>2025-12-02T04:28:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612769828" data-draft-id="7578811288819449899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘"/> <meta itemprop="keywords" content="Python,åŠ¨æ•ˆ,åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T04:28:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:28:41.000Z" title="Tue Dec 02 2025 04:28:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Manim ç¤¾åŒºæ–°å‘å¸ƒäº† <strong>v0.19.1</strong> ç‰ˆæœ¬ï¼ˆå‘å¸ƒäº 12 æœˆ 1 æ—¥ï¼‰ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå°ç‰ˆæœ¬å·æ›´æ–°ï¼Œä½†é‡Œé¢å¯æ˜¯è—ç€å‡ ä¸ªéå¸¸å®ç”¨çš„æ–°åŠŸèƒ½ï¼</p>
<p>æ— è®ºä½ æ˜¯åˆšå…¥å‘çš„æ–°æ‰‹ï¼Œæˆ–è€…å·²ç»è¢«æŸäº›ç—›ç‚¹æŠ˜ç£¨è¿‡çš„è€æ‰‹ï¼Œè¿™ç¯‡æ›´æ–°é€Ÿè§ˆéƒ½å€¼å¾—ä¸€çœ‹ã€‚</p>
<h2 data-id="heading-0">1. ğŸŒŸ äº®ç‚¹ä¸€ï¼šç»ˆäºå¯ä»¥â€œå›ºå®šâ€éšæœºé¢œè‰²äº†ï¼</h2>
<p>ä»¥å‰æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>random_color()</code> æ—¶ï¼Œæœ€å¤§çš„ç—›ç‚¹å°±æ˜¯ï¼š<strong>æ¯æ¬¡è¿è¡Œè„šæœ¬ï¼Œç”Ÿæˆçš„é¢œè‰²éƒ½ä¸ä¸€æ ·ï¼</strong><br/>
æœ‰æ—¶å€™ä½ è§‰å¾—è¿™æ¬¡éšæœºå‡ºæ¥çš„é…è‰²æ–¹æ¡ˆç®€ç›´å®Œç¾ï¼Œç»“æœæ”¹äº†ä¸€è¡Œæ— å…³ä»£ç å†æ¸²æŸ“ï¼Œé…è‰²å˜äº†â€¦â€¦å¿ƒæ€ç›´æ¥å´©äº†æœ‰æ²¡æœ‰ï¼Ÿ</p>
<p>åœ¨ <code>v0.19.1</code> ä¸­ï¼Œ<code>random_color()</code> ç»ˆäºæ”¯æŒ <code>seed</code>ï¼ˆéšæœºç§å­ï¼‰å‚æ•°äº†ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡æŒ‡å®šç§å­ï¼Œè®©éšæœºé¢œè‰²å˜å¾—â€œç¡®å®šâ€ã€‚</p>
<h4 data-id="heading-1">1.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *


<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeterministicColors</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ä»¥å‰ï¼šæ¯æ¬¡è¿è¡Œé¢œè‰²éƒ½å¯èƒ½ä¸åŒ</span>
        <span class="hljs-comment"># circle = Circle(color=random_color())</span>

        <span class="hljs-comment"># ç°åœ¨ï¼šæŒ‡å®š seed=1ï¼Œæ— è®ºè¿è¡Œå¤šå°‘æ¬¡ï¼Œå®ƒæ°¸è¿œæ˜¯åŒä¸€ä¸ªé¢œè‰²ï¼</span>
        rnd = RandomColorGenerator(seed=<span class="hljs-number">1</span>)
        dot_a = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_a.shift(LEFT * <span class="hljs-number">2</span>)

        <span class="hljs-comment"># å³ä½¿åœ¨ä¸åŒçš„åœ°æ–¹è°ƒç”¨ï¼Œåªè¦ç§å­ä¸€æ ·ï¼Œé¢œè‰²å°±ä¸€æ ·</span>
        dot_b = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_b.shift(RIGHT * <span class="hljs-number">2</span>)

        self.play(Create(dot_a), Create(dot_b))
        self.wait()
</code></pre>
<p>åªè¦<code>seed</code>çš„å€¼ä¸€æ ·ï¼Œæ¯æ¬¡çš„éšæœºçš„é¢œè‰²éƒ½ä¸€æ ·ã€‚</p>
<p>è¿™å¯¹äºåˆ¶ä½œç³»åˆ—è§†é¢‘æˆ–è€…è°ƒè¯•é…è‰²æ—¶ç®€ç›´æ˜¯æ•‘å‘½ç¨»è‰ã€‚</p>
<h2 data-id="heading-2">2. ğŸŒŸ äº®ç‚¹äºŒï¼šValueTracker ç»ˆäºå­¦ä¼šç®—æœ¯äº†</h2>
<p><code>ValueTracker</code> æ˜¯ Manim ä¸­åšåŠ¨æ€æ•°å€¼åŠ¨ç”»çš„æ ¸å¿ƒã€‚ä½†ä»¥å‰å®ƒæœ‰ç‚¹â€œç¬¨â€ï¼Œä¸èƒ½ç›´æ¥å‚ä¸åŠ å‡ä¹˜é™¤ã€‚</p>
<p>æ¯”å¦‚ä½ æƒ³è®©ä¸€ä¸ª <code>tracker</code> çš„å€¼ç¿»å€ï¼Œä»¥å‰ä½ å¾—å†™ <code>t.set_value(t.get_value() * 2)</code>ã€‚</p>
<p>ç°åœ¨åˆ™ç›´æ¥ä¹˜è¿™å°±è¡Œäº†ï¼</p>
<p>æ–°ç‰ˆæœ¬æ”¯æŒ <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>**</code> ç­‰å¸¸è§è¿ç®—ç¬¦ã€‚</p>
<h4 data-id="heading-3">2.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartTracker</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        tracker = ValueTracker(<span class="hljs-number">2</span>)

        number = DecimalNumber()
        number.add_updater(<span class="hljs-keyword">lambda</span> m: m.set_value(tracker.get_value()))

        self.add(number)

        <span class="hljs-comment"># ä»¥å‰çš„å†™æ³•ï¼ˆç°åœ¨ä¾ç„¶å¯ç”¨ï¼Œä½†æ¯”è¾ƒç¹çï¼‰</span>
        <span class="hljs-comment"># self.play(tracker.animate.set_value(tracker.get_value() + 5))</span>

        <span class="hljs-comment"># v0.19.1 çš„æ–°ç©æ³•ï¼šç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œ</span>
        <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œå±•ç¤ºçš„æ˜¯é€»è¾‘ä¸Šçš„ç®€åŒ–ï¼Œåœ¨é animate åœºæ™¯ä¸‹å¤„ç†æ•°æ®æ›´æ–¹ä¾¿</span>

        <span class="hljs-comment"># æ¯”å¦‚æˆ‘ä»¬åœ¨å¾ªç¯ä¸­å¤„ç†æ•°æ®é€»è¾‘æ—¶ï¼š</span>
        tracker += <span class="hljs-number">5</span>  <span class="hljs-comment"># tracker çš„å†…éƒ¨å€¼ç°åœ¨å˜æˆäº† 7</span>
        self.wait()

        <span class="hljs-comment"># ç”šè‡³å¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„è¿ç®—</span>
        tracker *= <span class="hljs-number">2</span>  <span class="hljs-comment"># å˜æˆ 14</span>
        self.wait()

        <span class="hljs-comment"># æ³¨æ„ï¼šå¦‚æœä½ è¦ç”¨ animate åŠ¨ç”»è¿‡æ¸¡ï¼Œè¿˜æ˜¯æ¨èç”¨ .animate.set_value()</span>
        <span class="hljs-comment"># ä½†è¿™ä¸ªç‰¹æ€§è®©ç¼–å†™å¤æ‚çš„ updater é€»è¾‘æˆ–è€…é¢„è®¡ç®—å˜å¾—éå¸¸çˆ½ã€‚</span>
</code></pre>
<p>ä»£ç åˆå¯ä»¥å°‘å†™å‡ è¡Œ <code>get_value()</code> äº†ï¼Œæ¸…çˆ½åº¦ +1ã€‚</p>
<h2 data-id="heading-4">3. ğŸŒŸ äº®ç‚¹ä¸‰ï¼šæ–°å¢ <code>TangentialArc</code> (åˆ‡çº¿å¼§)</h2>
<p>è¿™æ˜¯å‡ ä½•ç»˜å›¾çš„æ–°ç©å…·ï¼ä»¥å‰å¦‚æœæƒ³ç”»ä¸€æ®µåœ†å¼§ï¼Œæ—¢è¦è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œåˆè¦ä¿è¯åˆ‡çº¿æ–¹å‘å¹³æ»‘ï¼Œå¯èƒ½éœ€è¦è´¹ç‚¹è„‘ç­‹å»ç®—è§’åº¦ã€‚</p>
<p>æ–°çš„ <code>TangentialArc</code> æ—¨åœ¨ç®€åŒ–è¿™ç±»å‡ ä½•æ„é€ ã€‚</p>
<p>ç›®å‰å®˜æ–¹æ–‡æ¡£è¿˜åœ¨å®Œå–„ä¸­ï¼Œä½†å®ƒçš„å‡ºç°æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ç”»å‡ºæµç•…è¿æ¥ç›´çº¿æˆ–æ›²çº¿çš„åœ†å¼§äº†ã€‚</p>
<h4 data-id="heading-5">3.0.1. ğŸŒ° ä»£ç åœºæ™¯</h4>
<p>å¦‚æœä½ æœ‰ä¸€æ¡ç›´çº¿ï¼Œæƒ³åœ¨æœ«ç«¯æ¥ä¸€ä¸ªåœ†å¼§ï¼Œä¸”è¿æ¥å¤„è¦æ˜¯â€œä¸æ»‘â€çš„ï¼ˆåˆ‡çº¿è¿ç»­ï¼‰ã€‚</p>
<p>ä»¥å‰ä½ å¾—ç®—åˆ‡è§’ï¼Œç°åœ¨å¯ä»¥è¯•è¯•ä½¿ç”¨ <code>TangentialArc</code> ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TangentialArcSample</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        l1 = Line([<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=RED)
        l2 = Line([-<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=BLUE)
        
        <span class="hljs-comment"># åˆ›å»ºåˆ‡åœ†å¼§å¯¹è±¡</span>
        <span class="hljs-comment"># å‚æ•°è¯´æ˜ï¼š</span>
        <span class="hljs-comment"># - l1: ç¬¬ä¸€æ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - l2: ç¬¬äºŒæ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - radius: åœ†å¼§çš„åŠå¾„ï¼ˆ0.2ï¼‰</span>
        <span class="hljs-comment"># - corner: åœ†å¼§æ‰€åœ¨çš„è§’è½æ–¹å‘</span>
        <span class="hljs-comment"># - color: åœ†å¼§çš„é¢œè‰²ï¼ˆç»¿è‰²ï¼‰</span>
        circulararc = TangentialArc(l1, l2, radius=<span class="hljs-number">0.2</span>, corner=(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>), color=GREEN)
        self.play(Create(l1), Create(l2))
        self.play(Create(circulararc))

        self.wait()
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca2d253b6b73413a9ebda6378bf634ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254521&amp;x-signature=thDHMrFMRbGCYLS2IqqrB%2B83wXA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">4. ğŸ› ï¸ å…¶ä»–å€¼å¾—å…³æ³¨çš„å˜åŒ–</h2>
<p>é™¤äº†ä¸Šé¢ä¸‰ä¸ªæ–°ç‰¹æ€§ï¼Œè¿˜æœ‰ä¸€äº›æ”¹åŠ¨ä¹Ÿéå¸¸è´´å¿ƒï¼š</p>
<ol>
<li><strong>SurroundingRectangle æ›´çµæ´»äº†</strong>ï¼š<br/>
ä»¥å‰ <code>buff</code> å‚æ•°åªèƒ½æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¯¼è‡´çŸ©å½¢æ¡†çš„å››å‘¨ç•™ç™½å¿…é¡»ä¸€æ ·ã€‚ç°åœ¨ä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªå…ƒç»„ <code>buff=(0.5, 0.1)</code>ï¼Œåˆ†åˆ«æ§åˆ¶ <strong>æ°´å¹³</strong> å’Œ <strong>å‚ç›´</strong> æ–¹å‘çš„é—´è·ã€‚ç»™é•¿å…¬å¼åŠ æ¡†æ—¶å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå·¦å³å¤ªå®½æˆ–è€…ä¸Šä¸‹å¤ªæŒ¤äº†ï¼</li>
<li><strong>Code Mobject æ”¯æŒ OpenGL</strong>ï¼š<br/>
å¦‚æœä½ æ˜¯ç”¨ OpenGL æ¸²æŸ“æ¨¡å¼ï¼ˆæ¸²æŸ“é€Ÿåº¦è¶…å¿«çš„é‚£ç§ï¼‰çš„ç”¨æˆ·ï¼Œç°åœ¨ <code>Code</code> å¯¹è±¡ä¹Ÿèƒ½å®Œç¾æ˜¾ç¤ºäº†ã€‚</li>
<li><strong>ä¿®å¤äº† Tex ç¯å¢ƒæ ¼å¼åŒ–é—®é¢˜</strong>ï¼š<br/>
å†™ <code>LaTeX</code> å…¬å¼æ—¶å¦‚æœä¸å°å¿ƒæ¢è¡Œæˆ–è€…æ ¼å¼ä¹±äº†ï¼Œç°åœ¨ <code>Manim</code> èƒ½æ›´å¥½åœ°å¤„ç†å®ƒï¼ŒæŠ¥é”™æ›´å°‘ã€‚</li>
<li><strong>CLI é»˜è®¤åˆ†è¾¨ç‡è°ƒæ•´</strong>ï¼š<br/>
å‘½ä»¤è¡Œå·¥å…·çš„é»˜è®¤åˆ†è¾¨ç‡é€»è¾‘è¿›è¡Œäº†ä¸€äº›å¾®è°ƒï¼Œæ›´åŠ ç¬¦åˆ 1080p çš„æ ‡å‡†é¢„æœŸã€‚</li>
</ol>
<h2 data-id="heading-7">5. ğŸ“ æ€»ç»“ä¸å‡çº§</h2>
<p>è¿™æ¬¡<code> v0.19.1</code> è™½ç„¶ç‰ˆæœ¬å·è·¨åº¦ä¸å¤§ï¼Œä½†æ¯ä¸€ä¸ªæ”¹åŠ¨éƒ½åˆ‡ä¸­äº†å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ <strong>éšæœºç§å­</strong> å’Œ <strong>ValueTracker ç®—æœ¯æ”¯æŒ</strong>ï¼Œå±äºé‚£ç§â€œç”¨äº†å°±å›ä¸å»â€çš„ä¼˜åŒ–ã€‚</p>
<p>å‡çº§<code>Manim</code>ä¹Ÿå¾ˆç®€å•ï¼Œæ‰“å¼€ç»ˆç«¯/å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install --upgrade manim
</code></pre>
<p>å¿«å»è¯•è¯•æ–°åŠŸèƒ½å§ï¼å¦‚æœä½ ç”¨æ–°ç‰¹æ€§åšå‡ºäº†å¥½ç©çš„åŠ¨ç”»ï¼Œæ¬¢è¿åœ¨ç¤¾åŒºåˆ†äº«å“¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[runtime-domè®°å½•å¤‡å¿˜]]></title>    <link>https://juejin.cn/post/7579255046980010010</link>    <guid>https://juejin.cn/post/7579255046980010010</guid>    <pubDate>2025-12-03T09:23:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579255046980010010" data-draft-id="7579441333165932553" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="runtime-domè®°å½•å¤‡å¿˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-03T09:23:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç»†å¿ƒç»†å¿ƒå†ç»†å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/721738373803879"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            runtime-domè®°å½•å¤‡å¿˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/721738373803879/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç»†å¿ƒç»†å¿ƒå†ç»†å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:23:04.000Z" title="Wed Dec 03 2025 09:23:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">packages/runtime-dom/src/index.ts çš„ä¸»è¦ä½œç”¨</h2>
<ul>
<li>é¦–å…ˆæ˜ç¡®çš„æ˜¯ï¼Œåœ¨runtime-domä¸­è°ƒç”¨çš„createAppï¼Œå®é™…ä¸Šæ˜¯æ¥è‡ªruntime-coreã€‚runtime-domåªæ˜¯å¯¹å®ƒè¿›è¡Œäº†ç±»å‹æ‰©å±•å’ŒåŒ…è£…å¯¼å‡ºï¼›</li>
<li>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæ¸²æŸ“å™¨
<ul>
<li>å½“createAppè¢«è°ƒç”¨æ—¶ï¼Œä»–èƒŒåä¾èµ–çš„æ ¸å¿ƒæ˜¯createRenderer</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä½äº runtime-dom/src/index.ts</span>
<span class="hljs-comment">// 1. åˆ›å»ºä¸“ç”¨äºDOMçš„æ¸²æŸ“å™¨ï¼Œä¼ å…¥æ‰€æœ‰DOMæ“ä½œæ–¹æ³•ï¼ˆrendererOptionsï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> createApp = (<span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
  <span class="hljs-comment">// 2. ensureRenderer() ä¼šè°ƒç”¨ createRenderer(rendererOptions)ï¼Œ</span>
  <span class="hljs-comment">//    ç”Ÿæˆä¸€ä¸ªå…·å¤‡ render å’Œ hydrate æ–¹æ³•çš„æ¸²æŸ“å™¨å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">ensureRenderer</span>().<span class="hljs-title function_">createApp</span>(...args)
  <span class="hljs-comment">// ... åç»­å¯¹ app.mount çš„å¢å¼ºï¼ˆè§ä¸‹æ–‡ï¼‰</span>
  <span class="hljs-keyword">return</span> app
}) <span class="hljs-keyword">as</span> <span class="hljs-title class_">CreateAppFunction</span>&lt;<span class="hljs-title class_">Element</span>&gt;

</code></pre>
<ol>
<li>ensureRenderer():è·å–æˆ–åˆ›å»ºå”¯ä¸€çš„DOMæ¸²æŸ“å™¨ï¼Œä»–æ˜¯æ•´ä¸ªåº”ç”¨ä¸DOMäº¤äº’çš„å‘åŠ¨æœºã€‚</li>
<li>createRenderer(rendererOptions):è¿™æ˜¯å…³é”®ã€‚rendererOptionså°±æ˜¯ä¹‹å‰å®šä¹‰çš„åŒ…å«patchPropã€insert,createElementç­‰å‡ åä¸ªå…·ä½“DOMæ“ä½œæ–¹æ³•çš„å¯¹è±¡ã€‚createRendererå‡½æ•°ï¼ˆæ¥è‡ªruntime-coreï¼‰æ¥æ”¶è¿™äº›å…·ä½“æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªå¹³å°é€šç”¨çš„æ¸²æŸ“å™¨ã€‚è¿™æ˜¯ä¾èµ–æ³¨å…¥çš„ç»å…¸å®ç°ï¼šæ ¸å¿ƒé€»è¾‘æ˜¯é€šç”¨çš„ï¼Œå…·ä½“å®ç°ç”±å¤–éƒ¨æ³¨å…¥ã€‚</li>
</ol>
<ul>
<li>ç¬¬äºŒæ­¥åˆ›å»ºAppå®ä¾‹ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
æ¥ç€ï¼Œè°ƒç”¨æ¸²æŸ“å™¨çš„.createAppæ–¹æ³•ï¼Œè¿™æ˜¯åœ¨runtime-coreä¸­å®šä¹‰çš„createAppApiå‡½æ•°</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä½äº runtime-core/src/apiCreateApp.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> createAppAPI&lt;<span class="hljs-title class_">HostElement</span>&gt;(
  <span class="hljs-attr">render</span>: <span class="hljs-title class_">RootRenderFunction</span>,
  hydrate?: <span class="hljs-title class_">RootHydrateFunction</span>
): <span class="hljs-title class_">CreateAppFunction</span>&lt;<span class="hljs-title class_">HostElement</span>&gt; {
  <span class="hljs-comment">// è¿™ä¸ªå‡½æ•°è¿”å›çš„å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆä½¿ç”¨çš„ createApp å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createApp</span>(<span class="hljs-params">rootComponent, rootProps = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ (context)ï¼Œè¿™æ˜¯å…¨å±€é…ç½®å’ŒçŠ¶æ€çš„é›†åˆ</span>
    <span class="hljs-keyword">const</span> context = <span class="hljs-title function_">createAppContext</span>()
    <span class="hljs-keyword">const</span> installedPlugins = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>() <span class="hljs-comment">// ç”¨äºè®°å½•å·²å®‰è£…æ’ä»¶ï¼Œé˜²æ­¢é‡å¤</span>

    <span class="hljs-keyword">let</span> isMounted = <span class="hljs-literal">false</span> <span class="hljs-comment">// æ ‡è®°åº”ç”¨æ˜¯å¦å·²æŒ‚è½½</span>

    <span class="hljs-comment">// 2. åˆ›å»º app å¯¹è±¡ï¼ˆè¿™å°±æ˜¯æˆ‘ä»¬å¾—åˆ°çš„ app å®ä¾‹ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">app</span>: <span class="hljs-title class_">App</span> = (context.<span class="hljs-property">app</span> = {
      <span class="hljs-attr">_uid</span>: uid++,
      <span class="hljs-attr">_component</span>: rootComponent, <span class="hljs-comment">// ä¿å­˜æ ¹ç»„ä»¶å¯¹è±¡</span>
      <span class="hljs-attr">_props</span>: rootProps,
      <span class="hljs-attr">_container</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// åˆå§‹ä¸ºnullï¼ŒmountåæŒ‡å‘æ ¹DOMå®¹å™¨</span>
      <span class="hljs-attr">_context</span>: context, <span class="hljs-comment">// å…³è”ä¸Šæ–‡åˆ›å»ºçš„ä¸Šä¸‹æ–‡</span>

      <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šmount æ–¹æ³•ï¼ˆåˆå§‹ç‰ˆæœ¬ï¼Œruntime-dom ä¼šå¢å¼ºå®ƒï¼‰</span>
      <span class="hljs-title function_">mount</span>(<span class="hljs-attr">rootContainer</span>: <span class="hljs-title class_">HostElement</span>, isHydrate?: <span class="hljs-built_in">boolean</span>): <span class="hljs-built_in">any</span> {
        <span class="hljs-keyword">if</span> (isMounted) {
          <span class="hljs-title function_">warn</span>(<span class="hljs-string">`App has already been mounted.`</span>) <span class="hljs-comment">// å¼€å‘ç¯å¢ƒè­¦å‘Š</span>
          <span class="hljs-keyword">return</span>
        }
        <span class="hljs-comment">// 3.1 æ ‡å‡†åŒ–å®¹å™¨ï¼šæ”¯æŒå­—ç¬¦ä¸²é€‰æ‹©å™¨ï¼ˆå¦‚â€˜#appâ€™ï¼‰æˆ–DOMå…ƒç´ </span>
        <span class="hljs-keyword">const</span> container = <span class="hljs-title function_">normalizeContainer</span>(rootContainer)
        <span class="hljs-keyword">if</span> (!container) <span class="hljs-keyword">return</span>

        <span class="hljs-comment">// 3.2 åˆ›å»ºæ ¹ç»„ä»¶çš„è™šæ‹ŸèŠ‚ç‚¹ (vnode)</span>
        <span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">createVNode</span>(
          rootComponent <span class="hljs-keyword">as</span> <span class="hljs-title class_">ConcreteComponent</span>,
          rootProps
        )
        vnode.<span class="hljs-property">appContext</span> = context <span class="hljs-comment">// å°†åº”ç”¨ä¸Šä¸‹æ–‡å…³è”åˆ°vnode</span>

        <span class="hljs-comment">// 3.3 æ ¸å¿ƒæ¸²æŸ“è°ƒç”¨ï¼šå°†è™šæ‹Ÿæ ‘è½¬æ¢ä¸ºçœŸå®DOM</span>
        <span class="hljs-keyword">if</span> (isHydrate) {
          <span class="hljs-title function_">hydrate</span>(vnode <span class="hljs-keyword">as</span> <span class="hljs-title class_">VNode</span>&lt;<span class="hljs-title class_">Node</span>, <span class="hljs-title class_">Element</span>&gt;, container)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-title function_">render</span>(vnode, container) <span class="hljs-comment">// è¿™é‡Œè°ƒç”¨çš„æ˜¯ runtime-dom æä¾›çš„ render å‡½æ•°</span>
        }

        isMounted = <span class="hljs-literal">true</span>
        app.<span class="hljs-property">_container</span> = container <span class="hljs-comment">// è®°å½•æŒ‚è½½å®¹å™¨</span>
        container.<span class="hljs-property">__vue_app__</span> = app <span class="hljs-comment">// åœ¨DOMå…ƒç´ ä¸Šè®°å½•appå®ä¾‹ï¼Œä¾¿äºè°ƒè¯•æˆ–HMR</span>

        <span class="hljs-comment">// 3.4 è¿”å›æ ¹ç»„ä»¶å®ä¾‹çš„ä»£ç†ï¼ˆæ–¹ä¾¿å°‘æ•°éœ€è¦ç›´æ¥æ“ä½œå®ä¾‹çš„åœºæ™¯ï¼‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getExposeProxy</span>(vnode.<span class="hljs-property">component</span>!) || vnode.<span class="hljs-property">component</span>!.<span class="hljs-property">proxy</span>
      },

      <span class="hljs-comment">// 4. å…¶ä»–åº”ç”¨API</span>
      <span class="hljs-title function_">use</span>(<span class="hljs-params">plugin: Plugin, ...options: <span class="hljs-built_in">any</span>[]</span>) {
        <span class="hljs-comment">// æ’ä»¶å®‰è£…é€»è¾‘ï¼Œè°ƒç”¨ plugin.install(app, ...options)</span>
      },
      <span class="hljs-title function_">component</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, component?: <span class="hljs-title class_">Component</span>): <span class="hljs-built_in">any</span> {
        <span class="hljs-comment">// å…¨å±€ç»„ä»¶æ³¨å†Œï¼Œå­˜å…¥ context.components</span>
      },
      <span class="hljs-title function_">directive</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, directive?: Directive</span>) {
        <span class="hljs-comment">// å…¨å±€æŒ‡ä»¤æ³¨å†Œï¼Œå­˜å…¥ context.directives</span>
      },
      <span class="hljs-comment">// unmount, provide ç­‰å…¶ä»–æ–¹æ³•...</span>
    })

    <span class="hljs-keyword">return</span> app
  }
}
</code></pre>
<p>å…³é”®è¡Œè§£è¯»ï¼š</p>
<ol>
<li>const context = createAppContext():åˆ›å»ºåº”ç”¨çº§åˆ«çš„å…±äº«ä¸Šä¸‹æ–‡ã€‚æ‰€æœ‰ç»„ä»¶æ ‘ä¸­çš„ç»„ä»¶éƒ½èƒ½è®¿é—®åˆ°å®ƒå†…éƒ¨çš„å…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ã€é…ç½®ç­‰ã€‚è¿™æ˜¯app.componentã€app.directiveå…¨å±€æ³¨å†Œçš„åŸºçŸ³ã€‚</li>
<li>const vnode=createVNode(...)å°†ä½ ä¼ å…¥çš„è·Ÿç»„ä»¶ï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸€ä¸ªç»„ä»¶å®šä¹‰ï¼‰è½¬æ¢ä¸ºåˆå§‹çš„è™šæ‹ŸDOMèŠ‚ç‚¹ã€‚Vue3çš„æ‰€æœ‰æ¸²æŸ“éƒ½å›´ç»•è™šæ‹ŸDOMè¿›è¡Œ</li>
<li>render(vnode,container):æ˜¯è¿æ¥æ‰€æœ‰æ¨¡å—çš„æ¢çº½ã€‚è¿™ä¸ªrenderå‡½æ•°ç¬¬ä¸€æ­¥ä¸­createRenderè¿”å›çš„æ ¸å¿ƒæ¸²æŸ“å‡½æ•°ã€‚å®ƒä¼šå¯åŠ¨æ•´ä¸ªpatchï¼ˆåè°ƒï¼‰ç®—æ³•ï¼Œé€’å½’åœ°å°†vnodeæ ‘æ¯”å¯¹å¹¶æ¸²æŸ“åˆ°çœŸå®çš„containerDOMèŠ‚ç‚¹ä¸­ã€‚</li>
</ol>
<ul>
<li>ç¬¬ä¸‰æ­¥ï¼šruntime-domå¯¹mountçš„å¢å¼º
åœ¨Â <code>runtime-dom</code>Â ä¸­ï¼Œå®ƒæ‹¿åˆ°äº†Â <code>runtime-core</code>Â è¿”å›çš„åŸºç¡€Â <code>app</code>Â å®ä¾‹ï¼Œä½†å¯¹Â <code>mount</code>Â æ–¹æ³•åšäº†<strong>å…³é”®å¢å¼º</strong>ï¼Œä»¥æ”¯æŒæ›´ç¬¦åˆWebå¼€å‘ä¹ æƒ¯çš„ç”¨æ³•ã€‚</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä½äº runtime-dom/src/index.ts (æ¥ç¬¬ä¸€æ­¥çš„ä»£ç )</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">ensureRenderer</span>().<span class="hljs-title function_">createApp</span>(...args)

<span class="hljs-comment">// ä» app å®ä¾‹ä¸Šè·å–åŸå§‹çš„ mount æ–¹æ³•</span>
<span class="hljs-keyword">const</span> { mount } = app

<span class="hljs-comment">// é‡å†™ï¼ˆå¢å¼ºï¼‰mount æ–¹æ³•</span>
app.<span class="hljs-property">mount</span> = (<span class="hljs-attr">containerOrSelector</span>: <span class="hljs-title class_">Element</span> | <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">any</span> =&gt;</span> {
  <span class="hljs-comment">// 1. æ ‡å‡†åŒ–å®¹å™¨ï¼ˆæ ¸å¿ƒå¢å¼ºç‚¹ï¼‰ï¼šæ”¯æŒå­—ç¬¦ä¸²é€‰æ‹©å™¨</span>
  <span class="hljs-keyword">const</span> container = <span class="hljs-title function_">normalizeContainer</span>(containerOrSelector)
  <span class="hljs-keyword">if</span> (!container) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// 2. è·å–ç”¨æˆ·ä¼ å…¥çš„æ ¹ç»„ä»¶ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å¯¹è±¡ï¼‰</span>
  <span class="hljs-keyword">const</span> component = app.<span class="hljs-property">_component</span>
  <span class="hljs-comment">// 3. å¦‚æœæ ¹ç»„ä»¶ä¸æ˜¯å‡½æ•° &amp; æ²¡æœ‰renderå‡½æ•° &amp; æœ‰templateï¼Œåˆ™å°†templateç¼–è¯‘ä¸ºrenderå‡½æ•°</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isFunction</span>(component) &amp;&amp; !component.<span class="hljs-property">render</span> &amp;&amp; !component.<span class="hljs-property">template</span>) {
    component.<span class="hljs-property">template</span> = container.<span class="hljs-property">innerHTML</span> <span class="hljs-comment">// æ³¨æ„ï¼šè¿™ä»…ç”¨äºæ— æ„å»ºæ­¥éª¤çš„CDNç”¨æ³•</span>
  }

  <span class="hljs-comment">// 4. æ¸…é™¤å®¹å™¨å†…çš„ç°æœ‰å†…å®¹ï¼ˆåœ¨æŒ‚è½½å‰ï¼‰</span>
  container.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>

  <span class="hljs-comment">// 5. è°ƒç”¨ä» runtime-core æ‹¿æ¥çš„åŸå§‹ mount æ–¹æ³•ï¼Œæ‰§è¡ŒçœŸæ­£çš„æŒ‚è½½</span>
  <span class="hljs-keyword">const</span> proxy = <span class="hljs-title function_">mount</span>(container, <span class="hljs-literal">false</span>, container <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">SVGElement</span>)
  <span class="hljs-comment">// ... åç»­å¤„ç†</span>
  <span class="hljs-keyword">return</span> proxy
}
</code></pre>
<p>ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå¢å¼ºï¼Ÿ
ç”¨æˆ·ä½“éªŒï¼šè®©app.mount('#app')è¿™ç§å†™æ³•æˆä¸ºå¯èƒ½ï¼Œè€Œä¸å¿…æ¯æ¬¡éƒ½å†™documnet.querySelectorã€‚
æ”¯æŒçº¯HTMLå¼€å‘ï¼šå½“ä½ åœ¨æ²¡æœ‰æ„å»ºæ­¥éª¤ï¼ˆå¦‚Webpack/Viteï¼‰çš„ç¯å¢ƒä¸­ï¼Œç›´æ¥é€šè¿‡Â <code>&lt;script&gt;</code>Â æ ‡ç­¾å¼•å…¥Vueæ—¶ï¼Œä½ å¯èƒ½éœ€è¦åœ¨HTMLä¸­å†™æ¨¡æ¿ã€‚è¿™æ®µä»£ç ä¼šæ£€æŸ¥æ ¹ç»„ä»¶ï¼Œå¦‚æœå®ƒæ²¡æœ‰Â <code>render</code>Â å‡½æ•°ï¼Œå°±ä¼šå°è¯•å°†Â <code>template</code>Â é€‰é¡¹ï¼ˆæˆ–å®¹å™¨å†…çš„HTMLï¼‰<strong>åœ¨è¿è¡Œæ—¶ç¼–è¯‘</strong>æˆÂ <code>render</code>Â å‡½æ•°ã€‚è¿™å°±æ˜¯â€œå®Œæ•´ç‰ˆâ€Vueï¼ˆåŒ…å«ç¼–è¯‘å™¨ï¼‰ä¸â€œä»…è¿è¡Œæ—¶ç‰ˆâ€çš„åŒºåˆ«æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-1">ğŸ’ æ€»ç»“</h4>
<p><code>createApp</code>Â å‡½æ•°çš„ä¸»è¦å·¥ä½œå¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š</p>



































<table><thead><tr><th>æ­¥éª¤</th><th>æ‰€åœ¨æ¨¡å—</th><th>æ ¸å¿ƒå·¥ä½œ</th><th>äº§å‡º</th></tr></thead><tbody><tr><td><strong>1. åˆ›å»ºæ¸²æŸ“å™¨</strong></td><td><code>runtime-dom</code></td><td>æ³¨å…¥DOM APIï¼Œåˆ›å»ºå¹³å°ä¸“å±æ¸²æŸ“å™¨ã€‚</td><td>å…·å¤‡Â <code>render</code>Â å’ŒÂ <code>createApp</code>Â æ–¹æ³•çš„æ¸²æŸ“å™¨å¯¹è±¡ã€‚</td></tr><tr><td><strong>2. åˆ›å»ºAppå®ä¾‹</strong></td><td><code>runtime-core</code></td><td>åˆ›å»ºåº”ç”¨ä¸Šä¸‹æ–‡å’ŒåŸºç¡€Appå¯¹è±¡ï¼Œå®šä¹‰æ ¸å¿ƒAPIã€‚</td><td>ä¸€ä¸ªåŒ…å«Â <code>_context</code>ã€åŸºç¡€Â <code>mount</code>Â æ–¹æ³•çš„Â <code>app</code>Â å®ä¾‹ã€‚</td></tr><tr><td><strong>3. å¢å¼ºMount</strong></td><td><code>runtime-dom</code></td><td>ä¸ºÂ <code>mount</code>Â å¢åŠ å®¹å™¨æ ‡å‡†åŒ–å’Œæ¨¡æ¿ç¼–è¯‘æ”¯æŒã€‚</td><td>æœ€ç»ˆç”¨æˆ·ä½¿ç”¨çš„ã€åŠŸèƒ½å®Œæ•´çš„Â <code>app.mount</code>Â æ–¹æ³•ã€‚</td></tr><tr><td><strong>4. å¯åŠ¨åº”ç”¨</strong></td><td>ç”¨æˆ·è°ƒç”¨</td><td>ç”¨æˆ·è°ƒç”¨Â <code>app.mount</code>ï¼Œè§¦å‘è™šæ‹ŸDOMæ¸²æŸ“æµç¨‹ã€‚</td><td>æ ¹ç»„ä»¶è¢«æ¸²æŸ“æˆçœŸå®DOMï¼Œåº”ç”¨å¯åŠ¨ã€‚</td></tr></tbody></table>
<p><strong>æœ¬è´¨ä¸Šï¼Œ<code>createApp</code>Â æ˜¯ä¸€ä¸ªé«˜çº§å·¥å‚å‡½æ•°ï¼Œå®ƒï¼š</strong></p>
<ol>
<li><strong>è£…é…ç¯å¢ƒ</strong>ï¼šå°†å¹³å°ï¼ˆæµè§ˆå™¨ï¼‰çš„å…·ä½“æ“ä½œä¸Vueçš„é€šç”¨æ ¸å¿ƒè¿æ¥ã€‚</li>
<li><strong>åˆ›å»ºä¸Šä¸‹æ–‡</strong>ï¼šä¸ºæ•´ä¸ªç»„ä»¶æ ‘å»ºç«‹ä¸€ä¸ªå…±äº«çš„é…ç½®å’ŒçŠ¶æ€ç©ºé—´ã€‚</li>
<li><strong>å°è£…å¯åŠ¨</strong>ï¼šæä¾›ä¸€ä¸ªç®€å•æ˜“ç”¨çš„Â <code>mount</code>Â æ–¹æ³•ï¼Œéšè—äº†è™šæ‹ŸDOMåˆ›å»ºã€æ¸²æŸ“ã€æŒ‚è½½ç­‰å¤æ‚ç»†èŠ‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3 ä¸Šä¼ æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7579410911057788954</link>    <guid>https://juejin.cn/post/7579410911057788954</guid>    <pubDate>2025-12-03T09:27:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579410911057788954" data-draft-id="7579255046979977242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3 ä¸Šä¼ æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-03T09:27:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å‘¨åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/3808364009365080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3 ä¸Šä¼ æ–‡ä»¶ï¼Œå›¾ç‰‡ï¼Œè§†é¢‘ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808364009365080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å‘¨åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:27:50.000Z" title="Wed Dec 03 2025 09:27:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸Šä¼ æ–‡ä»¶</h2>
<pre><code class="hljs language-ini" lang="ini">&lt;!-- eslint-disable vue/multi-word-component-names --&gt;
&lt;template&gt;
  &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-file"</span>&gt;
    &lt;el-upload
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"uploadRef"</span>
      :<span class="hljs-attr">multiple</span>=<span class="hljs-string">"true"</span>
      :<span class="hljs-attr">action</span>=<span class="hljs-string">"uploadFileUrl"</span>
      :<span class="hljs-attr">before-upload</span>=<span class="hljs-string">"handleBeforeUpload"</span>
      <span class="hljs-attr">v-model</span>=<span class="hljs-string">"fileList"</span>
      :<span class="hljs-attr">file-list</span>=<span class="hljs-string">"fileList"</span>
      :<span class="hljs-attr">limit</span>=<span class="hljs-string">"limit"</span>
      :<span class="hljs-attr">on-error</span>=<span class="hljs-string">"handleUploadError"</span>
      :<span class="hljs-attr">on-exceed</span>=<span class="hljs-string">"handleExceed"</span>
      :<span class="hljs-attr">on-success</span>=<span class="hljs-string">"handleUploadSuccess"</span>
      :<span class="hljs-attr">show-file-list</span>=<span class="hljs-string">"false"</span>
      :<span class="hljs-attr">headers</span>=<span class="hljs-string">"headers"</span>
      :<span class="hljs-attr">auto-upload</span>=<span class="hljs-string">"true"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-file-uploader"</span>
    &gt;
      &lt;!-- ä¸Šä¼ æŒ‰é’® --&gt;
      &lt;el-button <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> v-show=<span class="hljs-string">"isShow"</span>&gt;é€‰å–æ–‡ä»¶&lt;/el-button&gt;
    &lt;/el-upload&gt;
    &lt;!-- ä¸Šä¼ æç¤º --&gt;
    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"el-upload__tip"</span> v-if=<span class="hljs-string">"showTip"</span> v-show=<span class="hljs-string">"isShow"</span>&gt;
      è¯·ä¸Šä¼ 
      &lt;template <span class="hljs-attr">v-if</span>=<span class="hljs-string">"fileSize"</span>&gt;
        å¤§å°ä¸è¶…è¿‡ &lt;b <span class="hljs-attr">style</span>=<span class="hljs-string">"color: #f56c6c"</span>&gt;{{ fileSize }}MB&lt;/b&gt;
      &lt;/template&gt;
      &lt;template <span class="hljs-attr">v-if</span>=<span class="hljs-string">"fileType"</span>&gt;
        æ ¼å¼ä¸º &lt;b <span class="hljs-attr">style</span>=<span class="hljs-string">"color: #f56c6c"</span>&gt;{{ fileType.join(<span class="hljs-string">'/'</span>) }}&lt;/b&gt;
      &lt;/template&gt;
  çš„æ–‡ä»¶
&lt;/div&gt;
&lt;!-- æ–‡ä»¶åˆ—è¡¨ --&gt;
&lt;transition-group
  <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-file-list el-upload-list el-upload-list--text"</span>
  <span class="hljs-attr">name</span>=<span class="hljs-string">"el-fade-in-linear"</span>
  <span class="hljs-attr">tag</span>=<span class="hljs-string">"ul"</span>
&gt;
  &lt;li
    :<span class="hljs-attr">key</span>=<span class="hljs-string">"file.uid"</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"el-upload-list__item ele-upload-list__item-content"</span>
    <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(file, index) in fileList"</span>
  &gt;
    &lt;el-link :<span class="hljs-attr">underline</span>=<span class="hljs-string">"false"</span> target=<span class="hljs-string">"_blank"</span>&gt;
      &lt;span <span class="hljs-attr">class</span>=<span class="hljs-string">"el-icon-document"</span>&gt;
        {{ file.attachmentName }}
      &lt;/span&gt;
    &lt;/el-link&gt;
    &lt;div <span class="hljs-attr">class</span>=<span class="hljs-string">"ele-upload-list__item-content-action"</span>&gt;
      &lt;el-link <span class="hljs-attr">v-show</span>=<span class="hljs-string">"isShow"</span> :underline=<span class="hljs-string">"false"</span> @click=<span class="hljs-string">"handleDelete(index)"</span> type=<span class="hljs-string">"danger"</span>
        &gt;åˆ é™¤&lt;/el-link
      &gt;
      &lt;el-link
        :<span class="hljs-attr">underline</span>=<span class="hljs-string">"false"</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>
        @<span class="hljs-attr">click</span>=<span class="hljs-string">"downloadFile(file)"</span>
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">"dowloadStatus"</span>
        &gt;ä¸‹è½½&lt;/el-link
      &gt;
    &lt;/div&gt;
  &lt;/li&gt;
&lt;/transition-group&gt;
</code></pre>
  

<pre><code class="hljs language-typescript" lang="typescript">&lt;script lang=<span class="hljs-string">"ts"</span> setup&gt;
<span class="hljs-keyword">import</span> cache <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/cache'</span>;
<span class="hljs-keyword">import</span> { log } <span class="hljs-keyword">from</span> <span class="hljs-string">'console'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">UploadUserFile</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;
<span class="hljs-keyword">import</span> { ref, computed, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Download</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/stores'</span>;
<span class="hljs-keyword">const</span> uploadRef = <span class="hljs-title function_">ref</span>();

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">modelValue</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>, <span class="hljs-title class_">Array</span>],
  <span class="hljs-comment">// æ•°é‡é™åˆ¶</span>
  <span class="hljs-attr">limit</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">5</span>
  },
  <span class="hljs-comment">// å¤§å°é™åˆ¶(MB)</span>
  <span class="hljs-attr">fileSize</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-number">1100</span>
  },
  <span class="hljs-comment">// æ–‡ä»¶ç±»å‹, ä¾‹å¦‚['png', 'jpg', 'jpeg']</span>
  <span class="hljs-attr">fileType</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [<span class="hljs-string">'doc'</span>, <span class="hljs-string">'xls'</span>, <span class="hljs-string">'xlsx'</span>, <span class="hljs-string">'pdf'</span>, <span class="hljs-string">'docx'</span>]
  },
  <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤ºæç¤º</span>
  <span class="hljs-attr">isShowTip</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-comment">//æ˜¯å¦æ˜¾ç¤ºåˆ é™¤æŒ‰é’®</span>
  <span class="hljs-attr">isShow</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-comment">//æ˜¯å¦æ˜¾ç¤ºä¸‹è½½</span>
  <span class="hljs-attr">dowloadStatus</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
  }
});

<span class="hljs-comment">// @ts-ignore</span>
<span class="hljs-keyword">const</span> { proxy } = <span class="hljs-title function_">getCurrentInstance</span>();
<span class="hljs-comment">// eslint-disable-next-line vue/valid-define-emits</span>
<span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>();
<span class="hljs-keyword">const</span> <span class="hljs-built_in">number</span> = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> uploadFileUrl = <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_BASE_API</span> + <span class="hljs-string">'/minio/upload'</span>; <span class="hljs-comment">// ä¸Šä¼ æ–‡ä»¶æœåŠ¡å™¨åœ°å€</span>
<span class="hljs-keyword">const</span> headers = <span class="hljs-title function_">ref</span>({
  <span class="hljs-title class_">Authorization</span>: <span class="hljs-string">'Bearer '</span> + <span class="hljs-title function_">useUserStore</span>().<span class="hljs-property">token</span>,
  <span class="hljs-string">'bg-debug'</span>: <span class="hljs-number">1</span>
});
<span class="hljs-keyword">const</span> fileList = ref&lt;<span class="hljs-title class_">UploadUserFile</span>[]&gt;([]);
<span class="hljs-keyword">const</span> showTip = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">isShowTip</span> &amp;&amp; (props.<span class="hljs-property">fileType</span> || props.<span class="hljs-property">fileSize</span>));

<span class="hljs-title function_">watch</span>(
  [<span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">modelValue</span>, <span class="hljs-function">() =&gt;</span> props.<span class="hljs-property">dowloadStatus</span>],
  <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (val) {
      fileList.<span class="hljs-property">value</span> = props.<span class="hljs-property">modelValue</span>;
    }
  },
  { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
);
<span class="hljs-comment">// ä¸Šä¼ å‰æ ¡æ£€æ ¼å¼å’Œå¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleBeforeUpload</span>(<span class="hljs-params">file: { name: <span class="hljs-built_in">string</span>; size: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-comment">// æ ¡æ£€æ–‡ä»¶ç±»å‹</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">fileType</span>.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">const</span> fileName = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>);
    <span class="hljs-keyword">const</span> fileExt = fileName[fileName.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
    <span class="hljs-keyword">const</span> isTypeOk = props.<span class="hljs-property">fileType</span>.<span class="hljs-title function_">indexOf</span>(fileExt) &gt;= <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (!isTypeOk) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®, è¯·ä¸Šä¼ <span class="hljs-subst">${props.fileType.join(<span class="hljs-string">'/'</span>)}</span>æ ¼å¼æ–‡ä»¶!`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-comment">// æ ¡æ£€æ–‡ä»¶å¤§å°</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">fileSize</span>) {
    <span class="hljs-keyword">const</span> isLt = file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span> &lt; props.<span class="hljs-property">fileSize</span>;
    <span class="hljs-keyword">if</span> (!isLt) {
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ <span class="hljs-subst">${props.fileSize}</span> MB!`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
  <span class="hljs-built_in">number</span>.<span class="hljs-property">value</span>++;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">//ä¸‹è½½æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">downloadPdf</span> = (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> fileName = data.<span class="hljs-property">attachmentName</span>;
  <span class="hljs-keyword">const</span> fileUrl = data.<span class="hljs-property">attachmentPath</span>;
  <span class="hljs-keyword">const</span> request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
  request.<span class="hljs-property">responseType</span> = <span class="hljs-string">'blob'</span>;
  request.<span class="hljs-title function_">open</span>(<span class="hljs-string">'Get'</span>, fileUrl);
  request.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="hljs-title function_">createObjectURL</span>(request.<span class="hljs-property">response</span>);
    <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(a);
    a.<span class="hljs-property">href</span> = url;
    a.<span class="hljs-property">download</span> = fileName;
    a.<span class="hljs-title function_">click</span>();
  };
  request.<span class="hljs-title function_">send</span>();
};

<span class="hljs-comment">//ä¸‹è½½æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">downloadFile</span> = (<span class="hljs-params">file: { attachmentPath: <span class="hljs-built_in">any</span>; attachmentName: <span class="hljs-built_in">any</span> }</span>) =&gt; {
  <span class="hljs-keyword">const</span> lastDotIdx = file.<span class="hljs-property">attachmentPath</span>.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">'.'</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">type</span> = file.<span class="hljs-property">attachmentPath</span>.<span class="hljs-title function_">slice</span>(lastDotIdx + <span class="hljs-number">1</span>).<span class="hljs-title function_">toUpperCase</span>();
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">type</span> === <span class="hljs-string">'PDF'</span>) {
    <span class="hljs-title function_">downloadPdf</span>(file);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'a'</span>);
    link.<span class="hljs-property">href</span> = file.<span class="hljs-property">attachmentPath</span>;
    link.<span class="hljs-property">download</span> = file.<span class="hljs-property">attachmentName</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(link);
    link.<span class="hljs-title function_">click</span>();
  }
};
<span class="hljs-comment">// æ–‡ä»¶ä¸ªæ•°è¶…å‡º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleExceed</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ä¸Šä¼ æ–‡ä»¶æ•°é‡ä¸èƒ½è¶…è¿‡ <span class="hljs-subst">${props.limit}</span> ä¸ª!`</span>);
}

<span class="hljs-comment">// ä¸Šä¼ å¤±è´¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleUploadError</span>(<span class="hljs-params">err: <span class="hljs-built_in">any</span></span>) {
  <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¸Šä¼ æ–‡ä»¶å¤±è´¥'</span>);
}
<span class="hljs-comment">/** æ–‡ä»¶ä¸Šä¼ æˆåŠŸå¤„ç† */</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">handleUploadSuccess</span>: <span class="hljs-title class_">UploadProps</span>[<span class="hljs-string">'onSuccess'</span>] = <span class="hljs-function">(<span class="hljs-params">
  response: { data: { url: <span class="hljs-built_in">any</span> } },
  file: { name: <span class="hljs-built_in">any</span> }
</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> newFile = { <span class="hljs-attr">attachmentName</span>: file.<span class="hljs-property">name</span>, <span class="hljs-attr">attachmentPath</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">url</span> };
  fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(newFile);
  uploadRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">submit</span>();
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:modelValue'</span>, fileList.<span class="hljs-property">value</span>);
};
<span class="hljs-comment">// åˆ é™¤æ–‡ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">index: <span class="hljs-built_in">number</span></span>) {
  fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
  <span class="hljs-comment">// @ts-ignore</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">'update:modelValue'</span>, fileList.<span class="hljs-property">value</span>);
}
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.upload-file-uploader</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
}
<span class="hljs-selector-class">.upload-file-list</span> <span class="hljs-selector-class">.el-upload-list__item</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e7ed</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">2</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">position</span>: relative;
}
<span class="hljs-selector-class">.upload-file-list</span> <span class="hljs-selector-class">.ele-upload-list__item-content</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">justify-content</span>: space-between;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">color</span>: inherit;
}
<span class="hljs-selector-class">.ele-upload-list__item-content-action</span> <span class="hljs-selector-class">.el-link</span> {
  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.ele-upload-list__item-content-action</span> <span class="hljs-selector-class">.el-icon</span> {
  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-1">ä¸Šä¼ å›¾ç‰‡</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pro-upload-img-box"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pro-upload-img-content"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å·²ä¸Šä¼ å›¾ç‰‡åˆ—è¡¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-img-card"</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in fileList"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>
      &gt;</span>
        <span class="hljs-comment">&lt;!-- å›¾ç‰‡é¢„è§ˆ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-image</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"img-sty"</span>
          <span class="hljs-attr">:preview-src-list</span>=<span class="hljs-string">"[item.url]"</span>
          <span class="hljs-attr">fit</span>=<span class="hljs-string">"cover"</span>
          <span class="hljs-attr">:src</span>=<span class="hljs-string">"item.url"</span>
          <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
        /&gt;</span>
        <span class="hljs-comment">&lt;!-- åˆ é™¤æŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-image</span>
          <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!disabled"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://static.wxb.com.cn/frontEnd/images/ideacome-vue3-component/img-close.png"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"img-close"</span>
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleRemove(item, index)"</span>
        /&gt;</span>
        <span class="hljs-comment">&lt;!-- å›¾ç‰‡é®ç½©å±‚ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"img-mask"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-image</span>
            <span class="hljs-attr">src</span>=<span class="hljs-string">"https://static.wxb.com.cn/frontEnd/images/ideacome-vue3-component/img-preview.png"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"img-preview"</span>
          /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- ä¸Šä¼ ç»„ä»¶ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-upload</span>
        <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"loading"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">"proUploadImgRef"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"['pro-upload-img', { 'is-disabled': disabled }]"</span>
        <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"uploadProps"</span>
        <span class="hljs-attr">:before-upload</span>=<span class="hljs-string">"beforeUpload"</span>
        <span class="hljs-attr">:on-success</span>=<span class="hljs-string">"handleSuccess"</span>
        <span class="hljs-attr">:on-error</span>=<span class="hljs-string">"handleError"</span>
        <span class="hljs-attr">:on-exceed</span>=<span class="hljs-string">"handleExceed"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-card"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 30px;"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">CirclePlus</span>  /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"uploadText"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-text"</span>&gt;</span>
              {{ uploadText }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-upload</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æç¤ºä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tip"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-tip"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"tip"</span>&gt;</span>
        {{ tip }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ProUploadImg"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Plus</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;

  <span class="hljs-comment">// Props å®šä¹‰</span>
  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
    <span class="hljs-comment">/** ä¸Šä¼ åœ°å€ */</span>
    <span class="hljs-attr">action</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-comment">/** è¯·æ±‚å¤´ */</span>
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({}),
    },
    <span class="hljs-comment">/** æ˜¯å¦æ”¯æŒå¤šé€‰ */</span>
    <span class="hljs-attr">multiple</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,
    },
    <span class="hljs-comment">/** æœ€å¤§ä¸Šä¼ æ•°é‡ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶ */</span>
    <span class="hljs-attr">limit</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** æ¥å—çš„æ–‡ä»¶ç±»å‹ï¼Œå¦‚ï¼š.jpg,.png,.jpeg */</span>
    <span class="hljs-attr">accept</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'.jpg,.png,.jpeg'</span>,
    },
    <span class="hljs-comment">/** æ–‡ä»¶å¤§å°é™åˆ¶ */</span>
    <span class="hljs-attr">maxSize</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** æ–‡ä»¶å¤§å°å•ä½ï¼ˆKB/MBï¼‰ */</span>
    <span class="hljs-attr">sizeUnit</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'MB'</span>,
      <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> [<span class="hljs-string">'KB'</span>, <span class="hljs-string">'MB'</span>].<span class="hljs-title function_">includes</span>(value),
    },
    <span class="hljs-comment">/** å›¾ç‰‡å®½åº¦é™åˆ¶ */</span>
    <span class="hljs-attr">width</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** å›¾ç‰‡é«˜åº¦é™åˆ¶ */</span>
    <span class="hljs-attr">height</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** ä¸Šä¼ æç¤ºæ–‡å­— */</span>
    <span class="hljs-attr">uploadText</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'ç‚¹å‡»ä¸Šä¼ '</span>,
    },
    <span class="hljs-comment">/** ä¸Šä¼ æç¤ºè¯´æ˜ */</span>
    <span class="hljs-attr">tip</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>,
    },
    <span class="hljs-comment">/** æ˜¯å¦ç¦ç”¨ */</span>
    <span class="hljs-attr">disabled</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,
    },
  });
  <span class="hljs-comment">/** åˆå§‹æ–‡ä»¶åˆ—è¡¨ */</span>
  <span class="hljs-keyword">const</span> fileList = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'fileList'</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [],
  });

  <span class="hljs-comment">// äº‹ä»¶å®šä¹‰</span>
  <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'success'</span>, <span class="hljs-string">'error'</span>, <span class="hljs-string">'exceed'</span>, <span class="hljs-string">'remove'</span>]);

  <span class="hljs-keyword">const</span> proUploadImgRef = <span class="hljs-title function_">ref</span>();
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> uploadProps = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">action</span>: props.<span class="hljs-property">action</span>,
    <span class="hljs-attr">accept</span>: props.<span class="hljs-property">accept</span>,
    <span class="hljs-attr">limit</span>: props.<span class="hljs-property">limit</span>,
    <span class="hljs-attr">multiple</span>: props.<span class="hljs-property">multiple</span>,
    <span class="hljs-attr">listType</span>: <span class="hljs-string">'picture-card'</span>,
    <span class="hljs-attr">showFileList</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">headers</span>: props.<span class="hljs-property">headers</span>,
    <span class="hljs-attr">fileList</span>: fileList.<span class="hljs-property">value</span>,
    <span class="hljs-attr">disabled</span>: props.<span class="hljs-property">disabled</span>,
  }));

  <span class="hljs-comment">/**
   * éªŒè¯å›¾ç‰‡å°ºå¯¸æ˜¯å¦ç¬¦åˆè¦æ±‚
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">width</span> - å›¾ç‰‡å®½åº¦
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">height</span> - å›¾ç‰‡é«˜åº¦
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} æ˜¯å¦ç¬¦åˆè¦æ±‚
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">validateImageSize</span> = (<span class="hljs-params">width, height</span>) =&gt; {
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">width</span> &amp;&amp; props.<span class="hljs-property">height</span>) {
      <span class="hljs-keyword">return</span> width === props.<span class="hljs-property">width</span> &amp;&amp; height === props.<span class="hljs-property">height</span>;
    }
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">width</span>) {
      <span class="hljs-keyword">return</span> width === props.<span class="hljs-property">width</span>;
    }
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">height</span>) {
      <span class="hljs-keyword">return</span> height === props.<span class="hljs-property">height</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ å‰æ ¡éªŒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File</span>} <span class="hljs-variable">file</span> - å¾…ä¸Šä¼ çš„æ–‡ä»¶
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;boolean&gt;</span>} æ˜¯å¦é€šè¿‡æ ¡éªŒ
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">beforeUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">file</span>) =&gt; {
    <span class="hljs-comment">// æ ¡éªŒæ–‡ä»¶ç±»å‹</span>
    <span class="hljs-keyword">const</span> fileTypeList = props.<span class="hljs-property">accept</span>
      .<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>));
    <span class="hljs-keyword">const</span> fileType = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">pop</span>();

    <span class="hljs-keyword">if</span> (!fileTypeList.<span class="hljs-title function_">includes</span>(fileType)) {
      <span class="hljs-title class_">ElMessage</span>({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`ä»…æ”¯æŒ <span class="hljs-subst">${fileTypeList.join(<span class="hljs-string">'ã€'</span>)}</span> æ ¼å¼`</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
      });
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// æ ¡éªŒæ–‡ä»¶å¤§å°</span>
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">maxSize</span>) {
      <span class="hljs-keyword">const</span> fileSize = file.<span class="hljs-property">size</span> / <span class="hljs-number">1024</span>;
      <span class="hljs-keyword">const</span> maxSizeInKB =
        props.<span class="hljs-property">sizeUnit</span> === <span class="hljs-string">'MB'</span> ? props.<span class="hljs-property">maxSize</span> * <span class="hljs-number">1024</span> : props.<span class="hljs-property">maxSize</span>;
      <span class="hljs-keyword">if</span> (fileSize &gt; maxSizeInKB) {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">message</span>: <span class="hljs-string">`å¤§å°ä¸èƒ½è¶…è¿‡ <span class="hljs-subst">${props.maxSize}</span><span class="hljs-subst">${props.sizeUnit}</span>ï¼`</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }

    <span class="hljs-comment">// æ ¡éªŒå›¾ç‰‡å°ºå¯¸</span>
    <span class="hljs-comment">// return new Promise((resolve, reject) =&gt; {</span>
    <span class="hljs-comment">//   const img = new Image();</span>
    <span class="hljs-comment">//   img.src = URL.createObjectURL(file);</span>
    <span class="hljs-comment">//   img.onload = () =&gt; {</span>
    <span class="hljs-comment">//     URL.revokeObjectURL(img.src);</span>
    <span class="hljs-comment">//     const { width, height } = img;</span>

    <span class="hljs-comment">//     if (!validateImageSize(width, height)) {</span>
    <span class="hljs-comment">//       const message =</span>
    <span class="hljs-comment">//         props.width &amp;&amp; props.height</span>
    <span class="hljs-comment">//           ? `å›¾ç‰‡å°ºå¯¸å¿…é¡»ä¸º ${props.width}x${props.height}`</span>
    <span class="hljs-comment">//           : props.width</span>
    <span class="hljs-comment">//             ? `å›¾ç‰‡å®½åº¦å¿…é¡»ä¸º ${props.width}px`</span>
    <span class="hljs-comment">//             : `å›¾ç‰‡é«˜åº¦å¿…é¡»ä¸º ${props.height}px`;</span>

    <span class="hljs-comment">//       ElMessage({</span>
    <span class="hljs-comment">//         message,</span>
    <span class="hljs-comment">//         type: 'warning',</span>
    <span class="hljs-comment">//       });</span>
    <span class="hljs-comment">//       reject(false);</span>
    <span class="hljs-comment">//       return;</span>
    <span class="hljs-comment">//     }</span>
    <span class="hljs-comment">//     loading.value = true;</span>
    <span class="hljs-comment">//     resolve(true);</span>
    <span class="hljs-comment">//   };</span>
    <span class="hljs-comment">//   img.onerror = () =&gt; {</span>
    <span class="hljs-comment">//     URL.revokeObjectURL(img.src);</span>
    <span class="hljs-comment">//     ElMessage({</span>
    <span class="hljs-comment">//       message: 'å›¾ç‰‡åŠ è½½å¤±è´¥',</span>
    <span class="hljs-comment">//       type: 'error',</span>
    <span class="hljs-comment">//     });</span>
    <span class="hljs-comment">//     reject(false);</span>
    <span class="hljs-comment">//   };</span>
    <span class="hljs-comment">// });</span>
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ æˆåŠŸå›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">response</span> - æœåŠ¡å™¨å“åº”æ•°æ®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">uploadFile</span> - ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSuccess</span> = (<span class="hljs-params">response, uploadFile, uploadFiles</span>) =&gt; {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response, uploadFile, uploadFiles,<span class="hljs-number">12345666</span>)
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
      fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">url</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">url</span> });
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fileList.<span class="hljs-property">value</span>,<span class="hljs-number">12345</span>)
    } <span class="hljs-keyword">else</span> {
      proUploadImgRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">handleRemove</span>(uploadFile);
      <span class="hljs-title class_">ElMessage</span>({
        <span class="hljs-attr">message</span>: response.<span class="hljs-property">msg</span> || response.<span class="hljs-property">message</span> || <span class="hljs-string">'ä¸Šä¼ å¤±è´¥'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
      });
    }
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'success'</span>, response, uploadFile, uploadFiles);
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ å¤±è´¥å›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Error</span>} <span class="hljs-variable">error</span> - é”™è¯¯ä¿¡æ¯
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">uploadFile</span> - ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleError</span> = (<span class="hljs-params">error, uploadFile, uploadFiles</span>) =&gt; {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title class_">ElMessage</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'ä¸Šä¼ å¤±è´¥'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
    });
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, error, uploadFile, uploadFiles);
  };

  <span class="hljs-comment">/**
   * è¶…å‡ºé™åˆ¶å›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">files</span> - è¶…å‡ºé™åˆ¶çš„æ–‡ä»¶åˆ—è¡¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - å·²ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleExceed</span> = (<span class="hljs-params">files, uploadFiles</span>) =&gt; {
    <span class="hljs-title class_">ElMessage</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">`æœ€å¤šåªèƒ½ä¸Šä¼  <span class="hljs-subst">${props.limit}</span> å¼ å›¾ç‰‡`</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
    });
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'exceed'</span>, files, uploadFiles);
  };

  <span class="hljs-comment">/**
   * ç§»é™¤å›¾ç‰‡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">file</span> - è¦ç§»é™¤çš„æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">index</span> - æ–‡ä»¶ç´¢å¼•
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRemove</span> = (<span class="hljs-params">file, index</span>) =&gt; {
    fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    proUploadImgRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">handleRemove</span>(file);
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'remove'</span>, file);
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.pro-upload-img-box</span> {
  <span class="hljs-selector-class">.pro-upload-img-content</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-wrap</span>: wrap;
    // å·²ä¸Šä¼ å›¾ç‰‡å¡ç‰‡æ ·å¼
    <span class="hljs-selector-class">.upload-img-card</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">12px</span> <span class="hljs-number">12px</span> <span class="hljs-number">0</span>;
      // å›¾ç‰‡æ ·å¼
      <span class="hljs-selector-class">.img-sty</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">overflow</span>: hidden;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      }
      // åˆ é™¤æŒ‰é’®æ ·å¼
      <span class="hljs-selector-class">.img-close</span> {
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">right</span>: -<span class="hljs-number">6px</span>;
        <span class="hljs-attribute">top</span>: -<span class="hljs-number">6px</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;
      }
      // é®ç½©å±‚æ ·å¼
      <span class="hljs-selector-class">.img-mask</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">pointer-events</span>: none;

        <span class="hljs-selector-class">.img-preview</span> {
          <span class="hljs-attribute">position</span>: absolute;
          <span class="hljs-attribute">right</span>: <span class="hljs-number">8px</span>;
          <span class="hljs-attribute">bottom</span>: <span class="hljs-number">8px</span>;
          <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
          <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
          <span class="hljs-attribute">pointer-events</span>: none;
        }
      }
    }

    // ç¦ç”¨çŠ¶æ€æ ·å¼
    <span class="hljs-selector-class">.is-disabled</span> {
      :<span class="hljs-built_in">deep</span>(.el-upload--picture-card) {
        <span class="hljs-attribute">cursor</span>: not-allowed;
      }
    }
    // ä¸Šä¼ æŒ‰é’®æ ·å¼
    <span class="hljs-selector-class">.pro-upload-img</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-selector-class">.upload-card</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-selector-class">.upload-icon</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
          <span class="hljs-attribute">text-align</span>: center;
          <span class="hljs-attribute">line-height</span>: <span class="hljs-number">100px</span>;
        }

        <span class="hljs-selector-class">.upload-text</span> {
          <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
          <span class="hljs-attribute">text-align</span>: center;
          <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;
        }
      }
    }

    // ä¸Šä¼ ç»„ä»¶æ ·å¼è¦†ç›–
    :<span class="hljs-built_in">deep</span>(.el-upload--picture-card) {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#F8F8F9</span>;
    }
    :<span class="hljs-built_in">deep</span>(.el-upload-list__item) {
      <span class="hljs-attribute">width</span>: auto;
      <span class="hljs-attribute">height</span>: auto;
      <span class="hljs-attribute">overflow</span>: visible;
    }
  }
  // æç¤ºæ–‡å­—æ ·å¼
  <span class="hljs-selector-class">.upload-tip</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#909399</span>;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">ä¸Šä¼ è§†é¢‘</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pro-upload-video-box"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"pro-upload-video-content"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- å·²ä¸Šä¼ è§†é¢‘åˆ—è¡¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-video-card"</span>
        <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(item, index) in fileList"</span>
        <span class="hljs-attr">:key</span>=<span class="hljs-string">"index"</span>
      &gt;</span>
        <span class="hljs-comment">&lt;!-- è§†é¢‘ç¼©ç•¥å›¾/æ’­æ”¾æŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-thumbnail"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"playVideo(item.url)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-icon"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">VideoPlay</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è§†é¢‘ä¿¡æ¯ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-info"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"playVideo(item.url)"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-name"</span>&gt;</span>{{ getFileName(item.url) }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-size"</span>&gt;</span>{{ getFileSize(item.size) }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- åˆ é™¤æŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-image</span>
          <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!disabled"</span>
          <span class="hljs-attr">src</span>=<span class="hljs-string">"https://static.wxb.com.cn/frontEnd/images/ideacome-vue3-component/img-close.png"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"video-close"</span>
          @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleRemove(item, index)"</span>
        /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- ä¸Šä¼ ç»„ä»¶ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-upload</span>
        <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!disabled"</span>
        <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"loading"</span>
        <span class="hljs-attr">ref</span>=<span class="hljs-string">"proUploadVideoRef"</span>
        <span class="hljs-attr">:class</span>=<span class="hljs-string">"['pro-upload-video', { 'is-disabled': disabled }]"</span>
        <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"uploadProps"</span>
        <span class="hljs-attr">:before-upload</span>=<span class="hljs-string">"beforeUpload"</span>
        <span class="hljs-attr">:on-success</span>=<span class="hljs-string">"handleSuccess"</span>
        <span class="hljs-attr">:on-error</span>=<span class="hljs-string">"handleError"</span>
        <span class="hljs-attr">:on-exceed</span>=<span class="hljs-string">"handleExceed"</span>
        <span class="hljs-attr">:on-progress</span>=<span class="hljs-string">"handleProgress"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-card"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-icon"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Plus</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"uploadText"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-text"</span>&gt;</span>
              {{ uploadText }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-upload</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æç¤ºä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"tip"</span>  <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!disabled"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"upload-tip"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"tip"</span>&gt;</span>
        {{ tip }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ProUploadVideo"</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Plus</span>, <span class="hljs-title class_">VideoPlay</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;

  <span class="hljs-comment">// Props å®šä¹‰</span>
  <span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
    <span class="hljs-comment">/** ä¸Šä¼ åœ°å€ */</span>
    <span class="hljs-attr">action</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-comment">/** è¯·æ±‚å¤´ */</span>
    <span class="hljs-attr">headers</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> ({}),
    },
    <span class="hljs-comment">/** æ˜¯å¦æ”¯æŒå¤šé€‰ */</span>
    <span class="hljs-attr">multiple</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,
    },
    <span class="hljs-comment">/** æœ€å¤§ä¸Šä¼ æ•°é‡ï¼Œ0è¡¨ç¤ºä¸é™åˆ¶ */</span>
    <span class="hljs-attr">limit</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** æ¥å—çš„æ–‡ä»¶ç±»å‹ï¼Œå¦‚ï¼š.mp4,.avi,.mov */</span>
    <span class="hljs-attr">accept</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'.mp4,.avi,.mov,.wmv,.flv,.webm'</span>,
    },
    <span class="hljs-comment">/** æ–‡ä»¶å¤§å°é™åˆ¶ */</span>
    <span class="hljs-attr">maxSize</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-number">0</span>,
    },
    <span class="hljs-comment">/** æ–‡ä»¶å¤§å°å•ä½ï¼ˆKB/MBï¼‰ */</span>
    <span class="hljs-attr">sizeUnit</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'MB'</span>,
      <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> [<span class="hljs-string">'KB'</span>, <span class="hljs-string">'MB'</span>].<span class="hljs-title function_">includes</span>(value),
    },
    <span class="hljs-comment">/** ä¸Šä¼ æç¤ºæ–‡å­— */</span>
    <span class="hljs-attr">uploadText</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">'ä¸Šä¼ è§†é¢‘'</span>,
    },
    <span class="hljs-comment">/** ä¸Šä¼ æç¤ºè¯´æ˜ */</span>
    <span class="hljs-attr">tip</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-string">''</span>,
    },
    <span class="hljs-comment">/** æ˜¯å¦ç¦ç”¨ */</span>
    <span class="hljs-attr">disabled</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>,
      <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>,
    },
  });
  <span class="hljs-comment">/** åˆå§‹æ–‡ä»¶åˆ—è¡¨ */</span>
  <span class="hljs-keyword">const</span> fileList = <span class="hljs-title function_">defineModel</span>(<span class="hljs-string">'fileList'</span>, {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [],
  });

  <span class="hljs-comment">// äº‹ä»¶å®šä¹‰</span>
  <span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>([<span class="hljs-string">'success'</span>, <span class="hljs-string">'error'</span>, <span class="hljs-string">'exceed'</span>, <span class="hljs-string">'remove'</span>, <span class="hljs-string">'deleteAnnex'</span>, <span class="hljs-string">'progress'</span>]);

  <span class="hljs-keyword">const</span> proUploadVideoRef = <span class="hljs-title function_">ref</span>();
  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> uploadProps = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">action</span>: props.<span class="hljs-property">action</span>,
    <span class="hljs-attr">accept</span>: props.<span class="hljs-property">accept</span>,
    <span class="hljs-attr">limit</span>: props.<span class="hljs-property">limit</span>,
    <span class="hljs-attr">multiple</span>: props.<span class="hljs-property">multiple</span>,
    <span class="hljs-attr">listType</span>: <span class="hljs-string">'text'</span>,
    <span class="hljs-attr">showFileList</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">headers</span>: props.<span class="hljs-property">headers</span>,
    <span class="hljs-attr">fileList</span>: fileList.<span class="hljs-property">value</span>,
    <span class="hljs-attr">disabled</span>: props.<span class="hljs-property">disabled</span>,
  }));

  <span class="hljs-comment">/**
   * è·å–æ–‡ä»¶å
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - æ–‡ä»¶è·¯å¾„
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} æ–‡ä»¶å
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getFileName</span> = (<span class="hljs-params">url</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!url) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> fileName = url.<span class="hljs-title function_">substring</span>(url.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">'/'</span>) + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> fileName.<span class="hljs-property">length</span> &gt; <span class="hljs-number">15</span> ? fileName.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">15</span>) + <span class="hljs-string">'...'</span> : fileName;
  };

  <span class="hljs-comment">/**
   * è·å–æ–‡ä»¶å¤§å°æ˜¾ç¤º
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">size</span> - æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} æ ¼å¼åŒ–åçš„æ–‡ä»¶å¤§å°
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">getFileSize</span> = (<span class="hljs-params">size</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!size) <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> units = [<span class="hljs-string">'B'</span>, <span class="hljs-string">'KB'</span>, <span class="hljs-string">'MB'</span>, <span class="hljs-string">'GB'</span>];
    <span class="hljs-keyword">let</span> unitIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> fileSize = size;

    <span class="hljs-keyword">while</span> (fileSize &gt;= <span class="hljs-number">1024</span> &amp;&amp; unitIndex &lt; units.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>) {
      fileSize /= <span class="hljs-number">1024</span>;
      unitIndex++;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${fileSize.toFixed(<span class="hljs-number">2</span>)}</span> <span class="hljs-subst">${units[unitIndex]}</span>`</span>;
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ å‰æ ¡éªŒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">File</span>} <span class="hljs-variable">file</span> - å¾…ä¸Šä¼ çš„æ–‡ä»¶
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;boolean&gt;</span>} æ˜¯å¦é€šè¿‡æ ¡éªŒ
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">beforeUpload</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">file</span>) =&gt; {
    <span class="hljs-comment">// æ ¡éªŒæ–‡ä»¶ç±»å‹</span>
    <span class="hljs-keyword">const</span> fileTypeList = props.<span class="hljs-property">accept</span>
      .<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-title function_">replace</span>(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>).<span class="hljs-title function_">toLowerCase</span>());
    <span class="hljs-keyword">const</span> fileType = file.<span class="hljs-property">name</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">pop</span>().<span class="hljs-title function_">toLowerCase</span>();

    <span class="hljs-keyword">if</span> (!fileTypeList.<span class="hljs-title function_">includes</span>(fileType)) {
      <span class="hljs-title class_">ElMessage</span>({
        <span class="hljs-attr">message</span>: <span class="hljs-string">`ä»…æ”¯æŒ <span class="hljs-subst">${props.accept}</span> æ ¼å¼`</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
      });
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-comment">// æ ¡éªŒæ–‡ä»¶å¤§å°</span>
    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">maxSize</span>) {
      <span class="hljs-keyword">const</span> fileSize = file.<span class="hljs-property">size</span>;
      <span class="hljs-keyword">const</span> maxSizeInBytes =
        props.<span class="hljs-property">sizeUnit</span> === <span class="hljs-string">'MB'</span> ? props.<span class="hljs-property">maxSize</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span> : props.<span class="hljs-property">maxSize</span> * <span class="hljs-number">1024</span>;
      <span class="hljs-keyword">if</span> (fileSize &gt; maxSizeInBytes) {
        <span class="hljs-title class_">ElMessage</span>({
          <span class="hljs-attr">message</span>: <span class="hljs-string">`å¤§å°ä¸èƒ½è¶…è¿‡ <span class="hljs-subst">${props.maxSize}</span><span class="hljs-subst">${props.sizeUnit}</span>ï¼`</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }

    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ è¿›åº¦å›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">event</span> - è¿›åº¦äº‹ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">uploadFile</span> - ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleProgress</span> = (<span class="hljs-params">event, uploadFile, uploadFiles</span>) =&gt; {
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'progress'</span>, event, uploadFile, uploadFiles);
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ æˆåŠŸå›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">response</span> - æœåŠ¡å™¨å“åº”æ•°æ®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">uploadFile</span> - ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSuccess</span> = (<span class="hljs-params">response, uploadFile, uploadFiles</span>) =&gt; {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">code</span> === <span class="hljs-number">200</span>) {
      fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">url</span>: response.<span class="hljs-property">data</span>.<span class="hljs-property">url</span>,
        <span class="hljs-attr">name</span>: uploadFile.<span class="hljs-property">name</span>,
        <span class="hljs-attr">size</span>: uploadFile.<span class="hljs-property">size</span>
      });
    } <span class="hljs-keyword">else</span> {
      proUploadVideoRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">handleRemove</span>(uploadFile);
      <span class="hljs-title class_">ElMessage</span>({
        <span class="hljs-attr">message</span>: response.<span class="hljs-property">msg</span> || response.<span class="hljs-property">message</span> || <span class="hljs-string">'ä¸Šä¼ å¤±è´¥'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
      });
    }
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'success'</span>, response, uploadFile, uploadFiles);
  };

  <span class="hljs-comment">/**
   * ä¸Šä¼ å¤±è´¥å›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Error</span>} <span class="hljs-variable">error</span> - é”™è¯¯ä¿¡æ¯
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">uploadFile</span> - ä¸Šä¼ æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleError</span> = (<span class="hljs-params">error, uploadFile, uploadFiles</span>) =&gt; {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-title class_">ElMessage</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">'ä¸Šä¼ å¤±è´¥'</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
    });
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'error'</span>, error, uploadFile, uploadFiles);
  };

  <span class="hljs-comment">/**
   * è¶…å‡ºé™åˆ¶å›è°ƒ
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">files</span> - è¶…å‡ºé™åˆ¶çš„æ–‡ä»¶åˆ—è¡¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Array</span>} <span class="hljs-variable">uploadFiles</span> - å·²ä¸Šä¼ çš„æ–‡ä»¶åˆ—è¡¨
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleExceed</span> = (<span class="hljs-params">files, uploadFiles</span>) =&gt; {
    <span class="hljs-title class_">ElMessage</span>({
      <span class="hljs-attr">message</span>: <span class="hljs-string">`æœ€å¤šåªèƒ½ä¸Šä¼  <span class="hljs-subst">${props.limit}</span> ä¸ªè§†é¢‘`</span>,
      <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
    });
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'exceed'</span>, files, uploadFiles);
  };

  <span class="hljs-comment">/**
   * ç§»é™¤è§†é¢‘
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Object</span>} <span class="hljs-variable">file</span> - è¦ç§»é™¤çš„æ–‡ä»¶å¯¹è±¡
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">index</span> - æ–‡ä»¶ç´¢å¼•
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRemove</span> = (<span class="hljs-params">file, index</span>) =&gt; {
    fileList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    proUploadVideoRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">handleRemove</span>(file);
    <span class="hljs-title function_">emit</span>(<span class="hljs-string">'deleteAnnex'</span>, index);
  };

  <span class="hljs-comment">/**
   * æ’­æ”¾è§†é¢‘
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">url</span> - è§†é¢‘åœ°å€
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">playVideo</span> = (<span class="hljs-params">url</span>) =&gt; {
    <span class="hljs-keyword">if</span> (!url) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// åˆ›å»ºè§†é¢‘æ’­æ”¾å¼¹çª—</span>
    <span class="hljs-keyword">const</span> videoDialog = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    videoDialog.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    `</span>;

    <span class="hljs-comment">// åˆ›å»ºè§†é¢‘å…ƒç´ </span>
    <span class="hljs-keyword">const</span> videoWrapper = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    videoWrapper.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
      position: relative;
      max-width: 90%;
      max-height: 90%;
    `</span>;

    <span class="hljs-comment">// åˆ›å»ºåŠ è½½æç¤º</span>
    <span class="hljs-keyword">const</span> loadingIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    loadingIndicator.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'è§†é¢‘åŠ è½½ä¸­...'</span>;
    loadingIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
      font-size: 16px;
      z-index: 1;
    `</span>;
    videoWrapper.<span class="hljs-title function_">appendChild</span>(loadingIndicator);

    <span class="hljs-keyword">const</span> videoElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'video'</span>);
    videoElement.<span class="hljs-property">controls</span> = <span class="hljs-literal">true</span>;
    videoElement.<span class="hljs-property">autoplay</span> = <span class="hljs-literal">true</span>;
    videoElement.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
      max-width: 100%;
      max-height: 80vh;
      outline: none;
      background: black;
      display: none; /* åˆå§‹éšè—ï¼Œç­‰å¾…åŠ è½½å®Œæˆåå†æ˜¾ç¤º */
    `</span>;

    <span class="hljs-comment">// å°è¯•å¤šç§è§†é¢‘æ ¼å¼</span>
    <span class="hljs-keyword">const</span> fileExtension = url.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">pop</span>().<span class="hljs-title function_">toLowerCase</span>();
    <span class="hljs-keyword">const</span> sourceElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'source'</span>);
    sourceElement.<span class="hljs-property">src</span> = url;

    <span class="hljs-comment">// æ ¹æ®æ–‡ä»¶æ‰©å±•åè®¾ç½®æ­£ç¡®çš„ MIME ç±»å‹</span>
    <span class="hljs-keyword">const</span> mimeTypes = {
      <span class="hljs-string">'mp4'</span>: <span class="hljs-string">'video/mp4'</span>,
      <span class="hljs-string">'webm'</span>: <span class="hljs-string">'video/webm'</span>,
      <span class="hljs-string">'ogg'</span>: <span class="hljs-string">'video/ogg'</span>,
      <span class="hljs-string">'avi'</span>: <span class="hljs-string">'video/avi'</span>,
      <span class="hljs-string">'mov'</span>: <span class="hljs-string">'video/quicktime'</span>,
      <span class="hljs-string">'wmv'</span>: <span class="hljs-string">'video/x-ms-wmv'</span>,
      <span class="hljs-string">'flv'</span>: <span class="hljs-string">'video/x-flv'</span>
    };

    sourceElement.<span class="hljs-property">type</span> = mimeTypes[fileExtension] || <span class="hljs-string">'video/mp4'</span>;
    videoElement.<span class="hljs-title function_">appendChild</span>(sourceElement);

    <span class="hljs-comment">// è§†é¢‘åŠ è½½æˆåŠŸçš„å¤„ç†</span>
    videoElement.<span class="hljs-property">onloadeddata</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// éšè—åŠ è½½æŒ‡ç¤ºå™¨å¹¶æ˜¾ç¤ºè§†é¢‘</span>
      <span class="hljs-keyword">if</span> (videoWrapper.<span class="hljs-title function_">contains</span>(loadingIndicator)) {
        videoWrapper.<span class="hljs-title function_">removeChild</span>(loadingIndicator);
      }
      videoElement.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'block'</span>;
    };

    <span class="hljs-comment">// è§†é¢‘åŠ è½½å¤±è´¥çš„å¤„ç†</span>
    videoElement.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// éšè—åŠ è½½æŒ‡ç¤ºå™¨</span>
      <span class="hljs-keyword">if</span> (videoWrapper.<span class="hljs-title function_">contains</span>(loadingIndicator)) {
        videoWrapper.<span class="hljs-title function_">removeChild</span>(loadingIndicator);
      }

      <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
      <span class="hljs-keyword">const</span> errorIndicator = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      errorIndicator.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'è§†é¢‘åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>;
      errorIndicator.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        color: #ff6b6b;
        font-size: 16px;
        background: rgba(0, 0, 0, 0.7);
        padding: 10px 20px;
        border-radius: 4px;
        z-index: 1;
      `</span>;
      videoWrapper.<span class="hljs-title function_">appendChild</span>(errorIndicator);

      <span class="hljs-comment">// 3ç§’åè‡ªåŠ¨å…³é—­</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(videoDialog)) {
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(videoDialog);
        }
      }, <span class="hljs-number">3000</span>);
    };

    <span class="hljs-comment">// åˆ›å»ºå…³é—­æŒ‰é’®</span>
    <span class="hljs-keyword">const</span> closeButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'button'</span>);
    closeButton.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&amp;times;'</span>;
    closeButton.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
      position: absolute;
      top: -40px;
      right: 0;
      background: transparent;
      border: none;
      color: white;
      font-size: 36px;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    `</span>;

    closeButton.<span class="hljs-property">onmouseover</span> = <span class="hljs-function">() =&gt;</span> {
      closeButton.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">'scale(1.1)'</span>;
    };

    closeButton.<span class="hljs-property">onmouseout</span> = <span class="hljs-function">() =&gt;</span> {
      closeButton.<span class="hljs-property">style</span>.<span class="hljs-property">transform</span> = <span class="hljs-string">'scale(1)'</span>;
    };

    closeButton.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æš‚åœè§†é¢‘å¹¶ç§»é™¤å¼¹çª—</span>
      videoElement.<span class="hljs-title function_">pause</span>();
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(videoDialog)) {
        <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(videoDialog);
      }
    };

    videoWrapper.<span class="hljs-title function_">appendChild</span>(videoElement);
    videoWrapper.<span class="hljs-title function_">appendChild</span>(closeButton);
    videoDialog.<span class="hljs-title function_">appendChild</span>(videoWrapper);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(videoDialog);

    <span class="hljs-comment">// ç‚¹å‡»èƒŒæ™¯å…³é—­</span>
    videoDialog.<span class="hljs-property">onclick</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span> === videoDialog) {
        videoElement.<span class="hljs-title function_">pause</span>();
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(videoDialog)) {
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(videoDialog);
        }
      }
    };

    <span class="hljs-comment">// ESCé”®å…³é—­</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEscKey</span> = (<span class="hljs-params">e</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Escape'</span>) {
        videoElement.<span class="hljs-title function_">pause</span>();
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">contains</span>(videoDialog)) {
          <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(videoDialog);
        }
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handleEscKey);
      }
    };

    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handleEscKey);
  };
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.pro-upload-video-box</span> {
  <span class="hljs-selector-class">.pro-upload-video-content</span> {
    <span class="hljs-attribute">display</span>: flex;
    // <span class="hljs-attribute">flex-wrap</span>: wrap;
    // å·²ä¸Šä¼ è§†é¢‘å¡ç‰‡æ ·å¼
    <span class="hljs-selector-class">.upload-video-card</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
      <span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      <span class="hljs-attribute">position</span>: relative;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">12px</span> <span class="hljs-number">12px</span> <span class="hljs-number">0</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ebeef5</span>;
      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;

      // è§†é¢‘ç¼©ç•¥å›¾æ ·å¼
      <span class="hljs-selector-class">.video-thumbnail</span> {
        <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ecf5ff</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;

        &amp;<span class="hljs-selector-pseudo">:hover</span> {
          <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409eff</span>;
          <span class="hljs-selector-class">.video-icon</span> {
            <span class="hljs-attribute">color</span>: white;
          }
        }

        <span class="hljs-selector-class">.video-icon</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#409eff</span>;
        }
      }

      // è§†é¢‘ä¿¡æ¯æ ·å¼
      <span class="hljs-selector-class">.video-info</span> {
        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
        <span class="hljs-attribute">min-width</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">cursor</span>: pointer;

        <span class="hljs-selector-class">.video-name</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#606266</span>;
          <span class="hljs-attribute">white-space</span>: nowrap;
          <span class="hljs-attribute">overflow</span>: hidden;
          <span class="hljs-attribute">text-overflow</span>: ellipsis;
          <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
        }

        <span class="hljs-selector-class">.video-size</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#909399</span>;
        }
      }

      // åˆ é™¤æŒ‰é’®æ ·å¼
      <span class="hljs-selector-class">.video-close</span> {
        <span class="hljs-attribute">position</span>: absolute;
        <span class="hljs-attribute">right</span>: -<span class="hljs-number">8px</span>;
        <span class="hljs-attribute">top</span>: -<span class="hljs-number">8px</span>;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">2</span>;
      }
    }

    // ç¦ç”¨çŠ¶æ€æ ·å¼
    <span class="hljs-selector-class">.is-disabled</span> {
      :<span class="hljs-built_in">deep</span>(.el-upload--text) {
        <span class="hljs-attribute">cursor</span>: not-allowed;
      }
    }
    // ä¸Šä¼ æŒ‰é’®æ ·å¼
    <span class="hljs-selector-class">.pro-upload-video</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">12px</span>;
      <span class="hljs-selector-class">.upload-card</span> {
        <span class="hljs-attribute">display</span>: flex;
        <span class="hljs-attribute">flex-direction</span>: column;
        <span class="hljs-attribute">align-items</span>: center;
        <span class="hljs-attribute">justify-content</span>: center;
        <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> dashed <span class="hljs-number">#d9d9d9</span>;
        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
        <span class="hljs-attribute">cursor</span>: pointer;
        <span class="hljs-attribute">transition</span>: border-color <span class="hljs-number">0.3s</span>;

        &amp;<span class="hljs-selector-pseudo">:hover</span> {
          <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#409eff</span>;
        }

        <span class="hljs-selector-class">.upload-icon</span> {
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#8c939d</span>;
          <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
        }

        <span class="hljs-selector-class">.upload-text</span> {
          <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;
          <span class="hljs-attribute">color</span>: <span class="hljs-number">#8c939d</span>;
          <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
          <span class="hljs-attribute">text-align</span>: center;
        }
      }
    }

    // ä¸Šä¼ ç»„ä»¶æ ·å¼è¦†ç›–
    :<span class="hljs-built_in">deep</span>(.el-upload) {
      <span class="hljs-attribute">width</span>: auto;
      <span class="hljs-attribute">height</span>: auto;
    }
  }
  // æç¤ºæ–‡å­—æ ·å¼
  <span class="hljs-selector-class">.upload-tip</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#909399</span>;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ—¥å¸¸ä½¿ç”¨åˆ°ä»£ç å®ç°ï¼šB ç«™ç­¾åç¼–è¾‘çš„ OOP å°è£…æ€è·¯ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7579410911057723418</link>    <guid>https://juejin.cn/post/7579410911057723418</guid>    <pubDate>2025-12-03T09:20:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579410911057723418" data-draft-id="7579256547789209641" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ—¥å¸¸ä½¿ç”¨åˆ°ä»£ç å®ç°ï¼šB ç«™ç­¾åç¼–è¾‘çš„ OOP å°è£…æ€è·¯ä¸å®è·µ"/> <meta itemprop="keywords" content="ECMAScript 6,ä»£ç è§„èŒƒ,JavaScript"/> <meta itemprop="datePublished" content="2025-12-03T09:20:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ—¥å¸¸ä½¿ç”¨åˆ°ä»£ç å®ç°ï¼šB ç«™ç­¾åç¼–è¾‘çš„ OOP å°è£…æ€è·¯ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:20:48.000Z" title="Wed Dec 03 2025 09:20:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-savanna-light">.hljs-comment,.hljs-quote{color:#5f6d64}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#b16139}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#9f713c}.hljs-bullet,.hljs-string,.hljs-symbol{color:#489963}.hljs-section,.hljs-title{color:#478c90}.hljs-keyword,.hljs-selector-tag{color:#55859b}.hljs-addition,.hljs-deletion{color:#171c19;display:inline-block;width:100%}.hljs-deletion{background-color:#b16139}.hljs-addition{background-color:#489963}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#ecf4ee;color:#526057}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æµè§ˆ B ç«™ï¼ˆå“”å“©å“”å“©ï¼‰æ—¶ï¼Œä½ æˆ–è®¸ç•™æ„åˆ°ï¼šç‚¹å‡»ä¸ªäººä¸»é¡µçš„â€œä¸ªæ€§ç­¾åâ€ï¼Œæ— éœ€è·³è½¬é¡µé¢æˆ–å¼¹å‡ºå¤æ‚è¡¨å•ï¼Œå°±èƒ½ç›´æ¥åœ¨åŸä½ç½®ç¼–è¾‘ã€‚è¿™ç§â€œå°±åœ°ç¼–è¾‘â€ï¼ˆEdit-in-Placeï¼‰çš„äº¤äº’æ–¹å¼ï¼Œç®€æ´ã€ç›´è§‚åˆé«˜æ•ˆï¼Œæå¤§ä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒ âœ¨ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°†åŸºäº OOP é£æ ¼çš„ JavaScript ä»£ç ï¼Œä»é›¶å®ç°ä¸€ä¸ªç±»ä¼¼çš„å°±åœ°ç¼–è¾‘ç»„ä»¶ã€‚è¿‡ç¨‹ä¸­ä¼šåˆ†äº«å°è£…æ€è·¯ä¸å®è·µç»†èŠ‚ï¼Œå‰–ææ ¸å¿ƒé€»è¾‘ï¼Œå¹¶æ¢ç´¢å¦‚ä½•å°†å…¶æ¨¡å—åŒ–ã€é€šç”¨åŒ–ï¼Œæœ€ç»ˆæ„å»ºä¸€ä¸ªè½»é‡ã€æ¸…æ™°ä¸”å¯å¤ç”¨çš„å‰ç«¯å°å·¥å…· ğŸ› ï¸ã€‚
ğŸ¯ <strong>åŠŸèƒ½ç›®æ ‡</strong><br/>
æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š</p>
<ul>
<li>é¡µé¢å±•ç¤ºä¸€æ®µæ–‡æœ¬ï¼ˆä¾‹å¦‚ï¼šâ€œè¿™ä¸ªå®¶ä¼™å¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹â€ï¼‰ï¼›</li>
<li>ç‚¹å‡»æ–‡æœ¬åï¼ŒåŸåœ°åˆ‡æ¢ä¸ºå¸¦ã€Œä¿å­˜ã€å’Œã€Œå–æ¶ˆã€æŒ‰é’®çš„å¯ç¼–è¾‘è¾“å…¥æ¡† âœï¸ï¼›</li>
<li>ç‚¹å‡»ã€Œä¿å­˜ã€åº”ç”¨æ–°å†…å®¹ âœ”ï¸ï¼Œç‚¹å‡»ã€Œå–æ¶ˆã€è¿˜åŸåŸå§‹å€¼ â†©ï¸ï¼›</li>
<li>å…¨ç¨‹æ— é¡µé¢åˆ·æ–°ï¼Œäº¤äº’æµç•…è‡ªç„¶ã€‚</li>
</ul>
<p>è¿™æ­£æ˜¯ B ç«™ä¸ªæ€§ç­¾åå°±åœ°ç¼–è¾‘åŠŸèƒ½çš„æ ¸å¿ƒé€»è¾‘ç®€åŒ–ç‰ˆ ğŸ’¡ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. å°è£…èµ·ç‚¹ï¼šç”¨æ„é€ å‡½æ•°å®šä¹‰ç»„ä»¶</h2>
<p>ğŸ’¡ é¢å‘å¯¹è±¡å°è£…ï¼šEditInPlace ç±»</p>
<p>ä¸ºäº†è®©é€»è¾‘æ›´æ¸…æ™°ã€ç»„ä»¶æ›´æ˜“å¤ç”¨ï¼Œæˆ‘é€‰æ‹©ç”¨é¢å‘å¯¹è±¡çš„æ–¹å¼ï¼Œå°†å°±åœ°ç¼–è¾‘åŠŸèƒ½æŠ½è±¡ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ <code>EditInPlace</code> ç±»ã€‚è®¾è®¡æ—¶éµå¾ªä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><strong>èŒè´£é›†ä¸­</strong>ï¼šæ–‡æœ¬æ˜¾ç¤ºã€è¾“å…¥åˆ‡æ¢ã€äº‹ä»¶å¤„ç†ç­‰å…¨éƒ¨ç”±ç±»è‡ªèº«ç®¡ç†ï¼›</li>
<li><strong>æ¥å£ç®€æ´</strong>ï¼šå¤–éƒ¨ä»…éœ€æä¾›å®¹å™¨å…ƒç´ ã€åˆå§‹å†…å®¹å’Œå”¯ä¸€æ ‡è¯†ï¼Œå³å¯å®Œæˆåˆå§‹åŒ–ï¼›</li>
<li><strong>ä¾¿äºé›†æˆ</strong>ï¼šé‡‡ç”¨å•ç±»å•æ–‡ä»¶ç»“æ„ï¼Œå¼€ç®±å³ç”¨ï¼Œè½»æ¾èå…¥ç°ä»£å‰ç«¯é¡¹ç›®ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">EditInPlace</span>(<span class="hljs-params">id, value, parentElement</span>) {
  <span class="hljs-comment">// {} ç©ºå¯¹è±¡ thisæŒ‡å‘å®ƒ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value || <span class="hljs-string">'è¿™ä¸ªå®¶ä¼™å¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span> = parentElement;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span> = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// é¢„å£°æ˜ç»„ä»¶è‡ªèº«çš„æ ¹å®¹å™¨å…ƒç´ ï¼ˆé€šå¸¸æ˜¯ &lt;div&gt;ï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span> = <span class="hljs-literal">null</span>;         <span class="hljs-comment">// ä¿å­˜å¤–éƒ¨ä¼ å…¥çš„æŒ‚è½½å®¹å™¨ï¼ˆå³è¯¥ç»„ä»¶å°†è¢«æ’å…¥åˆ°å“ªä¸ª DOM å…ƒç´ å†…ï¼‰ã€‚</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span> = <span class="hljs-literal">null</span>;       <span class="hljs-comment">// å–æ¶ˆ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span> = <span class="hljs-literal">null</span>;       <span class="hljs-comment">// ç”¨äºç¼–è¾‘æ–‡æœ¬å†…å®¹ï¼ˆå³ç¼–è¾‘çŠ¶æ€ä¸‹çš„è¾“å…¥æ¡†ï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span> = <span class="hljs-literal">null</span>;      <span class="hljs-comment">// ç”¨äºå±•ç¤ºé™æ€æ–‡æœ¬ï¼ˆå³éç¼–è¾‘çŠ¶æ€ä¸‹çš„å†…å®¹ï¼‰</span>
  <span class="hljs-comment">//  å¦‚æœä¸ä¿å­˜è¿™äº›å¼•ç”¨ï¼Œæ¯æ¬¡æ“ä½œéƒ½è¦é€šè¿‡ querySelector æŸ¥æ‰¾ï¼Œæ•ˆç‡ä½ä¸”ä»£ç å†—ä½™ã€‚</span>
  <span class="hljs-comment">// ä»£ç æ¯”è¾ƒå¤šï¼ŒæŒ‰åŠŸèƒ½åˆ†æ¨¡å— æ‹†å‡½æ•°</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createElement</span>();           <span class="hljs-comment">// DOM å¯¹è±¡åˆ›å»º</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachEvent</span>();             <span class="hljs-comment">// äº‹ä»¶æ·»åŠ </span>
}
</code></pre>
<p>åœ¨æœ¬å®ç°ä¸­ï¼Œæˆ‘é‡‡ç”¨äº† JavaScript ç»å…¸çš„ <strong>â€œæ„é€ å‡½æ•° + åŸå‹æ–¹æ³•â€</strong> æ¨¡å¼ã€‚è™½ç„¶å¦‚ä»Š ES6 çš„ <code>class</code> è¯­æ³•å·²æˆä¸ºä¸»æµï¼Œä½†åœ¨éœ€è¦å…¼å®¹è€æ—§æµè§ˆå™¨ï¼ˆå¦‚ IEï¼‰æˆ–ç”¨äºæ•™å­¦æ¼”ç¤ºæ—¶ï¼Œè¿™ç§ä¼ ç»Ÿå†™æ³•åè€Œæ›´èƒ½æ­ç¤º JavaScript é¢å‘å¯¹è±¡çš„æœ¬è´¨ï¼Œä¸”è¶³å¤Ÿæ¸…æ™°å¯é ã€‚</p>
<p>è®¾è®¡ä¸Šæœ‰ä¸¤ä¸ªå…³é”®ç»†èŠ‚å€¼å¾—è¯´æ˜ï¼š</p>
<ol>
<li><strong>DOM å¼•ç”¨æå‰å£°æ˜ä¸º <code>null</code></strong><br/>
åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæ‰€æœ‰å°†è¦ä½¿ç”¨çš„ DOM å…ƒç´ ï¼ˆå¦‚è¾“å…¥æ¡†ã€æŒ‰é’®ã€å®¹å™¨ç­‰ï¼‰éƒ½é¢„å…ˆåˆå§‹åŒ–ä¸º <code>null</code>ã€‚è¿™ä¸ä»…è®©ç»„ä»¶çš„å†…éƒ¨ç»“æ„ä¸€ç›®äº†ç„¶ï¼Œä¹Ÿæ–¹ä¾¿åœ¨è°ƒè¯•æ—¶å¿«é€Ÿåˆ¤æ–­å…ƒç´ æ˜¯å¦å·²åˆ›å»ºï¼ŒåŒæ—¶ä¸ºåç»­å¯èƒ½çš„é”€æ¯ä¸å†…å­˜æ¸…ç†æä¾›ä¾¿åˆ©ã€‚</li>
<li><strong>æ„é€ å‡½æ•°åªåšåˆå§‹åŒ–ï¼Œä¸ç¢° DOM</strong><br/>
çœŸæ­£çš„ DOM åˆ›å»ºå’Œäº‹ä»¶ç»‘å®šè¢«æ‹†åˆ†åˆ°ç‹¬ç«‹çš„æ–¹æ³•ï¼ˆå¦‚ <code>createElement</code> å’Œ <code>attachEvent</code>ï¼‰ä¸­ã€‚æ„é€ å‡½æ•°ä»…è´Ÿè´£æ¥æ”¶å‚æ•°ã€è®¾ç½®åˆå§‹çŠ¶æ€å¹¶è°ƒåº¦è¿™äº›æ–¹æ³•ã€‚è¿™ç§åšæ³•éµå¾ªäº†<strong>å•ä¸€èŒè´£åŸåˆ™</strong>â€”â€”åˆå§‹åŒ–å½’åˆå§‹åŒ–ï¼Œæ¸²æŸ“å½’æ¸²æŸ“ï¼Œé€»è¾‘è§£è€¦ï¼Œä»£ç æ›´æ˜“è¯»ã€å¯æµ‹ã€å¯ç»´æŠ¤ã€‚</li>
</ol>
<p>æ­£æ˜¯è¿™äº›çœ‹ä¼¼å¾®å°çš„è®¾è®¡é€‰æ‹©ï¼Œè®©ä¸€ä¸ªç®€å•çš„â€œå°±åœ°ç¼–è¾‘â€ç»„ä»¶æ—¢è½»é‡ï¼Œåˆå…·å¤‡è‰¯å¥½çš„å·¥ç¨‹ç»“æ„ã€‚</p>
<h2 data-id="heading-1">2. æ„å»ºéª¨æ¶ï¼šä¸€æ¬¡æŒ‚è½½ï¼Œé«˜æ•ˆæ¸²æŸ“</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å°è£…äº†DOMæ“ä½œ</span>
  <span class="hljs-attr">createElement</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// DOM å†…å­˜ </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-property">id</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>;

    <span class="hljs-comment">// å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>);

    <span class="hljs-comment">// è¾“å…¥æ¡†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'text'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'button'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'ä¿å­˜'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'button'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'å–æ¶ˆ'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>(); <span class="hljs-comment">// åˆ‡æ¢åˆ°æ–‡æœ¬æ˜¾ç¤ºçŠ¶æ€</span>
  }
</code></pre>
<h3 data-id="heading-2">è®¾è®¡äº®ç‚¹ï¼šä¼˜åŒ–ç”¨æˆ·ä½“éªŒä¸å…¼å®¹æ€§çš„ç»†è‡´è€ƒé‡</h3>
<p>åœ¨è®¾è®¡è¿™ä¸ªâ€œå°±åœ°ç¼–è¾‘â€ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬ç‰¹åˆ«æ³¨é‡äº†æ€§èƒ½ä¼˜åŒ–ä»¥åŠåˆå§‹çŠ¶æ€çš„æ­£ç¡®å±•ç¤ºï¼Œå¹¶ä¸”ç¡®ä¿äº†è‰¯å¥½çš„æµè§ˆå™¨å…¼å®¹æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„è®¾è®¡äº®ç‚¹ï¼š</p>
<h4 data-id="heading-3">1.Â <strong>å†…å­˜ä¸­é¢„åˆ›å»ºå…ƒç´ </strong></h4>
<p>æ‰€æœ‰æ¶‰åŠçš„ç•Œé¢å…ƒç´ ï¼ˆå¦‚å®¹å™¨ <code>&lt;div&gt;</code>ã€é™æ€æ–‡æœ¬ <code>&lt;span&gt;</code>ã€è¾“å…¥æ¡† <code>&lt;input&gt;</code> ä»¥åŠæŒ‰é’®ï¼‰éƒ½åœ¨JavaScriptè¿è¡Œç¯å¢ƒä¸­é¢„å…ˆæ„å»ºå®Œæˆï¼Œä»…åœ¨æ‰€æœ‰å…ƒç´ å‡†å¤‡å°±ç»ªåï¼Œä¸€æ¬¡æ€§æŒ‚è½½åˆ°DOMæ ‘ä¸Šã€‚è¿™ç§æ–¹æ³•æœ‰æ•ˆå‡å°‘äº†ç”±äºé¢‘ç¹ä¿®æ”¹DOMç»“æ„è€Œå¯¼è‡´çš„é‡æ’å’Œé‡ç»˜ç°è±¡ï¼Œä»è€Œæå‡äº†é¡µé¢åŠ è½½é€Ÿåº¦å’Œå“åº”æ€§èƒ½ã€‚</p>
<h4 data-id="heading-4">2.Â <strong>ç«‹å³è°ƒç”¨Â <code>convertToText()</code>Â ç¡®ä¿åˆå§‹çŠ¶æ€</strong></h4>
<p>åœ¨ç»„ä»¶åˆå§‹åŒ–å®Œæˆåï¼Œæˆ‘ä»¬ä¼šç«‹åˆ»è°ƒç”¨ <code>convertToText()</code> æ–¹æ³•æ¥è®¾ç½®å…¶ä¸ºåªè¯»æ–‡æœ¬æ¨¡å¼ã€‚è¿™ä¸€æ“ä½œä¿è¯äº†ç”¨æˆ·é¦–æ¬¡çœ‹åˆ°çš„ç»„ä»¶å¤„äºæ­£ç¡®çš„åˆå§‹çŠ¶æ€ï¼Œå³ä»¥é™æ€æ–‡æœ¬çš„å½¢å¼å±•ç°ï¼Œè€Œä¸æ˜¯æ„å¤–åœ°æ˜¾ç¤ºä¸ºå¯ç¼–è¾‘çŠ¶æ€æˆ–è€…å‡ºç°ä»»ä½•è§†è§‰ä¸Šçš„ä¸ä¸€è‡´ã€‚</p>
<h4 data-id="heading-5">3.Â <strong>é€‰æ‹©Â <code>&lt;input type="button"&gt;</code>Â è¶…è¶ŠÂ <code>&lt;button&gt;</code></strong></h4>
<p>å°½ç®¡ä½¿ç”¨ <code>&lt;input type="button"&gt;</code> è¿™ç§æ–¹å¼çœ‹èµ·æ¥å¯èƒ½ä¸å¦‚ç°ä»£çš„ <code>&lt;button&gt;</code> å…ƒç´ é‚£ä¹ˆç›´è§‚æˆ–æµè¡Œï¼Œä½†å®ƒçš„å­˜åœ¨æä¾›äº†ä¸€ç§æä½³çš„æµè§ˆå™¨å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆã€‚è€ƒè™‘åˆ°ç½‘ç»œç¯å¢ƒçš„å¤šæ ·æ€§ï¼Œä¸åŒçš„ç”¨æˆ·å¯èƒ½ä¼šä½¿ç”¨å„ç§ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ä¸€äº›è¾ƒè€çš„ç‰ˆæœ¬ã€‚é€šè¿‡é‡‡ç”¨è¿™ç§æ›´ä¸ºä¼ ç»Ÿçš„è¡¨å•å…ƒç´ ï¼Œå¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„â€œå°±åœ°ç¼–è¾‘â€åŠŸèƒ½åœ¨å°½å¯èƒ½å¤šçš„ç¯å¢ƒä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œä¸ºç”¨æˆ·æä¾›æ— ç¼çš„ä½“éªŒã€‚</p>
<p>è¿™äº›è®¾è®¡å†³ç­–åæ˜ äº†æˆ‘ä»¬åœ¨è¿½æ±‚é«˜æ•ˆèƒ½ã€è‰¯å¥½ç”¨æˆ·ä½“éªŒçš„åŒæ—¶ï¼Œä¹Ÿä¸å¿½è§†å¯¹å¹¿æ³›è®¾å¤‡å’Œæµè§ˆå™¨çš„æ”¯æŒã€‚æ¯ä¸€ä¸ªç»†èŠ‚éƒ½ç»è¿‡æ·±æ€ç†Ÿè™‘ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›æ—¢å¿«é€Ÿåˆå¯é çš„äº¤äº’ä½“éªŒã€‚</p>
<h2 data-id="heading-6">3. è§†å›¾åˆ‡æ¢ï¼šå¤ç”¨ DOM è€Œéåå¤åˆ›å»º</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">convertToText</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
  },
  <span class="hljs-attr">convertToField</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>; 
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
  }
</code></pre>
<h3 data-id="heading-7">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿâ€”â€”çŠ¶æ€åˆ‡æ¢ä¼˜äºåå¤åˆ›å»º</h3>
<p>åœ¨å®ç°â€œå°±åœ°ç¼–è¾‘â€åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬<strong>æ²¡æœ‰é‡‡ç”¨â€œé”€æ¯å†é‡å»º DOMâ€çš„æ–¹å¼</strong>ï¼Œè€Œæ˜¯é€‰æ‹©<strong>å¤ç”¨å·²æœ‰çš„å…ƒç´ ï¼Œä»…é€šè¿‡åˆ‡æ¢æ˜¾ç¤º/éšè—çŠ¶æ€æ¥åˆ‡æ¢è§†å›¾</strong>ã€‚è¿™ç§è®¾è®¡å¸¦æ¥äº†æ˜¾è‘—çš„æ€§èƒ½ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>é¿å…ä¸å¿…è¦çš„ DOM æ“ä½œ</strong>ï¼šé¢‘ç¹åˆ›å»ºå’Œç§»é™¤å…ƒç´ ä¼šè§¦å‘æµè§ˆå™¨çš„é‡æ’ï¼ˆreflowï¼‰ä¸é‡ç»˜ï¼ˆrepaintï¼‰ï¼Œå½±å“æ¸²æŸ“æ€§èƒ½ï¼›</li>
<li><strong>æå‡äº¤äº’å“åº”é€Ÿåº¦</strong>ï¼šç”¨æˆ·ç‚¹å‡»å³åˆ‡æ¢ï¼Œæ— éœ€ç­‰å¾…æ–°å…ƒç´ ç”Ÿæˆï¼Œä½“éªŒæ›´æµç•…ï¼›</li>
<li><strong>é™ä½å†…å­˜å¼€é”€</strong>ï¼šæ‰€æœ‰èŠ‚ç‚¹åªåˆ›å»ºä¸€æ¬¡ï¼Œåç»­ä»…ä¿®æ”¹æ ·å¼å±æ€§ï¼Œèµ„æºæ¶ˆè€—æ›´å°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ï¼šæ¯æ¬¡è¿›å…¥ç¼–è¾‘éƒ½åŒæ­¥æœ€æ–°å€¼</h3>
<p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½æ³¨æ„åˆ°ï¼Œåœ¨ <code>convertToField</code> æ–¹æ³•ä¸­ï¼Œæœ‰è¿™æ ·ä¸€è¡Œå…³é”®ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
</code></pre>
<p>è¿™å¹¶éå¤šä½™æ“ä½œï¼Œè€Œæ˜¯ä¸€é“<strong>é˜²æ­¢è„æ•°æ®çš„é‡è¦é˜²çº¿</strong>ã€‚</p>
<p>è®¾æƒ³è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šç”¨æˆ·ç‚¹å‡»è¿›å…¥ç¼–è¾‘ â†’ ä¿®æ”¹äº†å†…å®¹ä½†æœªä¿å­˜ â†’ åˆç‚¹å‡»å…¶ä»–åœ°æ–¹é€€å‡º â†’ å†æ¬¡ç‚¹å‡»è¿›å…¥ç¼–è¾‘ã€‚<br/>
å¦‚æœæ²¡æœ‰è¿™è¡Œèµ‹å€¼ï¼Œè¾“å…¥æ¡†ä¼šä¿ç•™ä¸Šæ¬¡æœªä¿å­˜çš„â€œæ®‹ç•™å†…å®¹â€ï¼Œé€ æˆ<strong>UI ä¸å®é™…æ•°æ®ä¸ä¸€è‡´</strong>çš„é”™è§‰ã€‚</p>
<p>é€šè¿‡æ¯æ¬¡è¿›å…¥ç¼–è¾‘æ¨¡å¼æ—¶<strong>å¼ºåˆ¶å°†è¾“å…¥æ¡†çš„å€¼é‡ç½®ä¸ºå½“å‰ <code>this.value</code>ï¼ˆå³æœ€æ–°ç¡®è®¤å€¼ï¼‰</strong> ï¼Œæˆ‘ä»¬ç¡®ä¿äº†ï¼š</p>
<ul>
<li>ç”¨æˆ·çœ‹åˆ°çš„å§‹ç»ˆæ˜¯â€œå·²ä¿å­˜â€çš„æœ€æ–°å†…å®¹ï¼›</li>
<li>æœªæäº¤çš„è‰ç¨¿ä¸ä¼šè¢«é”™è¯¯ä¿ç•™ï¼›</li>
<li>ç»„ä»¶è¡Œä¸ºç¬¦åˆç›´è§‰ï¼Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…ã€‚</li>
</ul>
<h2 data-id="heading-9">4. å“åº”ç”¨æˆ·æ“ä½œä¹‹äº‹ä»¶ç»‘å®š</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToField</span>(); <span class="hljs-comment">// åˆ‡æ¢åˆ°è¾“å…¥æ¡†æ˜¾ç¤ºçŠ¶æ€</span>
      }
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">save</span>();
      }
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();
      }
    );
</code></pre>
<h3 data-id="heading-10">ç®­å¤´å‡½æ•°çš„å·§å¦™ä¹‹å¤„</h3>
<p>è¿™é‡Œä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä¸ä»…è®©ä»£ç æ›´ç®€æ´ï¼Œè¿˜å·§å¦™åœ°è§£å†³äº† <code>this</code> ä¸Šä¸‹æ–‡çš„é—®é¢˜ï¼š<br/>
ç”±äºç®­å¤´å‡½æ•°<strong>ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ <code>this</code></strong>ï¼Œè€Œæ˜¯<strong>ç»§æ‰¿å¤–å±‚ä½œç”¨åŸŸçš„ <code>this</code></strong>ï¼Œå› æ­¤åœ¨äº‹ä»¶å›è°ƒä¸­ï¼Œ<code>this</code> ä¾ç„¶æŒ‡å‘ <code>EditInPlace</code> å®ä¾‹ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ <code>this.save()</code>ã€<code>this.cancel()</code> ç­‰æ–¹æ³•ã€‚</p>
<p>å¦‚æœæ¢æˆæ™®é€šå‡½æ•°ï¼Œ<code>this</code> ä¼šé»˜è®¤æŒ‡å‘è§¦å‘äº‹ä»¶çš„ DOM å…ƒç´ ï¼ˆæ¯”å¦‚æŒ‰é’®æˆ– spanï¼‰ï¼Œå¯¼è‡´æ–¹æ³•è°ƒç”¨å¤±è´¥ã€‚æ­¤æ—¶å°±å¿…é¡»æ‰‹åŠ¨ç»‘å®šä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">save</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
</code></pre>
<p>è€Œå€ŸåŠ©ç®­å¤´å‡½æ•°ï¼Œæˆ‘ä»¬çœå»äº†è¿™äº›å†—ä½™çš„ <code>.bind(this)</code>ï¼Œæ—¢å‡å°‘äº†æ ·æ¿ä»£ç ï¼Œä¹Ÿæå‡äº†å¯è¯»æ€§ã€‚</p>
<h2 data-id="heading-11">5.ä¿å­˜æäº¤ vs æ— ç—•å–æ¶ˆ</h2>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-attr">save</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
     <span class="hljs-keyword">var</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span>;
     <span class="hljs-comment">// fetch åç«¯å­˜å‚¨</span>
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">innerHTML</span> = value;
     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>();   
    },
    <span class="hljs-attr">cancel</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>();
    }
</code></pre>
<h3 data-id="heading-12">æ ¸å¿ƒè¡Œä¸ºè§£æ</h3>
<ul>
<li><strong><code>save()</code></strong> ï¼š<br/>
è´Ÿè´£å°†ç”¨æˆ·è¾“å…¥çš„æ–°å†…å®¹æäº¤ã€‚å®ƒä¼šæ›´æ–°ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€ <code>this.value</code>ï¼Œå¹¶åŒæ­¥åˆ·æ–°é™æ€æ–‡æœ¬çš„æ˜¾ç¤ºï¼Œå®Œæˆâ€œä¿å­˜â€æ“ä½œã€‚<br/>
æ³¨é‡Šä¸­æåˆ°çš„ <code>fetch</code> æ˜¯ä¸ºåç»­å¯¹æ¥åç«¯é¢„ç•™çš„æ‰©å±•ç‚¹â€”â€”åœ¨çœŸå®çš„ B ç«™åœºæ™¯ä¸­ï¼Œè¿™é‡Œä¼šå‘èµ· AJAX è¯·æ±‚ï¼Œå°†æ–°ç­¾åæŒä¹…åŒ–åˆ°æœåŠ¡å™¨ã€‚</li>
<li><strong><code>cancel()</code></strong> ï¼š<br/>
ä¸ä¿®æ”¹ä»»ä½•æ•°æ®ï¼Œä»…åˆ‡æ¢å›åªè¯»è§†å›¾çŠ¶æ€ï¼Œå®ç°çœŸæ­£çš„â€œæ— ç—•å–æ¶ˆâ€ã€‚ç”¨æˆ·æ”¾å¼ƒç¼–è¾‘åï¼Œç•Œé¢å¹²å‡€åœ°è¿˜åŸä¸ºåŸå§‹å†…å®¹ï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡ç¡®ä¿äº†æ•°æ®æµçš„æ¸…æ™°ä¸å¯æ§ï¼š<strong>åªæœ‰ <code>save</code> ä¼šæ”¹å˜çŠ¶æ€ï¼Œ<code>cancel</code> æ°¸è¿œæ˜¯å®‰å…¨çš„å›é€€æ“ä½œ</strong>ã€‚</p>
<h3 data-id="heading-13">ğŸ“– æ³¨é‡Šä¸æ˜¯é™„å±å“ï¼Œè€Œæ˜¯æ¥å£çš„ä¸€éƒ¨åˆ†</h3>
<p>ä¸€ä¸ªçœŸæ­£å¯å¤ç”¨çš„å‰ç«¯ç»„ä»¶ï¼Œå…‰æœ‰ä»£ç æ˜¯ä¸å¤Ÿçš„â€”â€”å®ƒè¿˜éœ€è¦ä¸€ä»½â€œä½¿ç”¨æŒ‡å—â€ã€‚<br/>
åœ¨ <code>edit_in_place.js</code> çš„å¼€å¤´ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@func</span> EditInPlace å°±åœ°ç¼–è¾‘ç»„ä»¶
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} value         åˆå§‹æ–‡æœ¬å†…å®¹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">HTMLElement</span>} parentElement  è¦æ’å…¥åˆ°å“ªä¸ª DOM å®¹å™¨
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} id            ç»„ä»¶çš„å”¯ä¸€æ ‡è¯†ç¬¦
 */</span>
</code></pre>
<p>è¿™çœ‹ä¼¼ç®€å•çš„ JSDoc å¹¶éè£…é¥°ï¼Œè€Œæ˜¯ä¸€ä»½<strong>æ˜ç¡®çš„è°ƒç”¨å¥‘çº¦</strong>ã€‚å®ƒå‘Šè¯‰ä½¿ç”¨è€…ï¼š</p>
<ul>
<li>è¿™ä¸ªæ¨¡å—èƒ½åšä»€ä¹ˆï¼›</li>
<li>éœ€è¦æä¾›ä»€ä¹ˆã€ä»¥ä»€ä¹ˆæ ¼å¼æä¾›ï¼›</li>
<li>ä¸éœ€è¦å…³å¿ƒå†…éƒ¨å¦‚ä½•å®ç°ã€‚</li>
</ul>
<blockquote>
<p>æ¯•ç«Ÿï¼Œ<strong>å†™ç»„ä»¶çš„äººå’Œç”¨ç»„ä»¶çš„äººï¼Œå¾€å¾€ä¸æ˜¯åŒä¸€ä¸ªäºº</strong>ã€‚<br/>
åªè¦æ¥å£ç¨³å®šã€æ–‡æ¡£æ¸…æ™°ï¼Œå“ªæ€•åº•å±‚é€»è¾‘å½»åº•é‡å†™ï¼Œä¸Šå±‚è°ƒç”¨ä¾ç„¶å®‰ç„¶æ— æ™ã€‚</p>
</blockquote>
<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œæ³¨é‡Šä¸æ˜¯â€œå†™ç»™æœªæ¥çš„è‡ªå·±çœ‹çš„ç¬”è®°â€ï¼Œè€Œæ˜¯<strong>å°è£…å®Œæ•´æ€§çš„å¿…è¦ç»„æˆéƒ¨åˆ†</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-14">ğŸ§± ä»è„šæœ¬åˆ°ç»„ä»¶ï¼šå‰ç«¯å·¥ç¨‹åŒ–çš„è‡ªç„¶æ¼”è¿›</h3>
<p>æ—©æœŸçš„äº¤äº’åŠŸèƒ½å¸¸ä»¥â€œè¿‡ç¨‹å¼è„šæœ¬â€å½¢å¼å­˜åœ¨ï¼šå˜é‡æ»¡å¤©é£ï¼Œå‡½æ•°äº’ç›¸ä¾èµ–ï¼Œæ”¹ä¸€å¤„å¯èƒ½å´©å…¨å±€ã€‚<br/>
è€Œç°ä»£å‰ç«¯å¼€å‘æ›´å€¾å‘äºè¿™æ ·çš„è·¯å¾„ï¼š</p>
<blockquote>
<p><strong>æ•£è½é€»è¾‘ â†’ å°è£…æˆç±» â†’ ç‹¬ç«‹æ¨¡å—</strong></p>
</blockquote>
<ul>
<li><strong>å°è£…æˆç±»ï¼ˆOOPï¼‰</strong> Â æŠŠçŠ¶æ€ï¼ˆå¦‚å½“å‰å€¼ï¼‰å’Œè¡Œä¸ºï¼ˆå¦‚åˆ‡æ¢ç¼–è¾‘æ¨¡å¼ï¼‰èšåˆåœ¨ä¸€èµ·ï¼Œé¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li><strong>æ‹†åˆ†ä¸ºç‹¬ç«‹æ–‡ä»¶</strong>Â åï¼Œç»„ä»¶å…·å¤‡äº†â€œå³æ’å³ç”¨â€çš„èƒ½åŠ›ï¼Œå¤©ç„¶æ”¯æŒå¤ç”¨ä¸åä½œï¼›</li>
<li><strong>æ¸…æ™°çš„æ„é€ å‚æ•° + å®Œå–„çš„æ³¨é‡Š</strong>ï¼Œåˆ™è®©ä»–äººæ— éœ€é˜…è¯»æºç ä¹Ÿèƒ½æ­£ç¡®é›†æˆã€‚</li>
</ul>
<p>è¿™ä¸ä»…æ˜¯ä»£ç ç»„ç»‡æ–¹å¼çš„å‡çº§ï¼Œæ›´æ˜¯<strong>åä½œæ•ˆç‡å’Œé¡¹ç›®å¯ç»´æŠ¤æ€§</strong>çš„è·ƒè¿ã€‚</p>
<hr/>
<h3 data-id="heading-15">âš¡ å¿«é€Ÿä¸Šæ‰‹ï¼šä¸‰è¡Œæå®šå¯ç¼–è¾‘ç­¾å</h3>
<p>å‡è®¾é¡µé¢ä¸­æœ‰å¦‚ä¸‹å®¹å™¨ï¼š</p>
<pre><code class="hljs language-Html" lang="Html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"profile-signature"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>åªéœ€å¼•å…¥è„šæœ¬å¹¶æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">EditInPlace</span>(
  <span class="hljs-string">'user-slogan'</span>,
  <span class="hljs-string">'æœ‰äº†è‚¯å¾·åŸºï¼Œç”Ÿæ´»å¥½æ»‹å‘³ï¼'</span>,
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'profile-signature'</span>)
);
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38997d61b1f347ab8165a4245bb8e535~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358447&amp;x-signature=oNp0sSQIkK%2FtPJZUUpurCtv5R8c%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€ä¸ªæ”¯æŒç‚¹å‡»ç¼–è¾‘ã€å¸¦ä¿å­˜/å–æ¶ˆæŒ‰é’®çš„äº¤äº’åŒºåŸŸå°±ç«‹åˆ»ç”Ÿæ•ˆã€‚<br/>
æœªæ¥åœ¨å…¶ä»–æ¨¡å—å¤ç”¨ï¼Ÿç›´æ¥å¤åˆ¶åˆå§‹åŒ–è¯­å¥å³å¯â€”â€”<strong>é›¶å­¦ä¹ æˆæœ¬ï¼Œå¼€ç®±å³ç”¨</strong>ã€‚</p>
<p>è€Œè¿™èƒŒåçš„ä¸€åˆ‡ï¼Œéƒ½å§‹äºä¸€ä¸ªè®¾è®¡æ¸…æ™°ã€æ–‡æ¡£å®Œæ•´çš„å°è£…ã€‚</p>
<h2 data-id="heading-16">æºç åœ¨è¿™ï¼š</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef82c4439f504fb2a037f432fc1a9403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358447&amp;x-signature=4XQT4EACQQiOh%2BPC8D0cGjyx0Iw%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@func</span> EditInPlace å°±åœ°ç¼–è¾‘
 * <span class="hljs-doctag">@params</span> {<span class="hljs-type">string</span>} value åˆå§‹å€¼
 * <span class="hljs-doctag">@params</span> {<span class="hljs-type">element</span>} parentElement æŒ‚è½½ç‚¹
 * <span class="hljs-doctag">@params</span> {<span class="hljs-type">string</span>} id  è‡ªèº«ID
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">EditInPlace</span>(<span class="hljs-params">id, value, parentElement</span>) {
  <span class="hljs-comment">// {} ç©ºå¯¹è±¡ thisæŒ‡å‘å®ƒ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value || <span class="hljs-string">'è¿™ä¸ªå®¶ä¼™å¾ˆæ‡’ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹'</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span> = parentElement;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span> = <span class="hljs-literal">null</span>;   <span class="hljs-comment">// é¢„å£°æ˜ç»„ä»¶è‡ªèº«çš„æ ¹å®¹å™¨å…ƒç´ ï¼ˆé€šå¸¸æ˜¯ &lt;div&gt;ï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span> = <span class="hljs-literal">null</span>;         <span class="hljs-comment">// ä¿å­˜å¤–éƒ¨ä¼ å…¥çš„æŒ‚è½½å®¹å™¨ï¼ˆå³è¯¥ç»„ä»¶å°†è¢«æ’å…¥åˆ°å“ªä¸ª DOM å…ƒç´ å†…ï¼‰ã€‚</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span> = <span class="hljs-literal">null</span>;       <span class="hljs-comment">// å–æ¶ˆ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span> = <span class="hljs-literal">null</span>;       <span class="hljs-comment">// ç”¨äºç¼–è¾‘æ–‡æœ¬å†…å®¹ï¼ˆå³ç¼–è¾‘çŠ¶æ€ä¸‹çš„è¾“å…¥æ¡†ï¼‰</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span> = <span class="hljs-literal">null</span>;      <span class="hljs-comment">// ç”¨äºå±•ç¤ºé™æ€æ–‡æœ¬ï¼ˆå³éç¼–è¾‘çŠ¶æ€ä¸‹çš„å†…å®¹ï¼‰</span>
  <span class="hljs-comment">//  å¦‚æœä¸ä¿å­˜è¿™äº›å¼•ç”¨ï¼Œæ¯æ¬¡æ“ä½œéƒ½è¦é€šè¿‡ querySelector æŸ¥æ‰¾ï¼Œæ•ˆç‡ä½ä¸”ä»£ç å†—ä½™ã€‚</span>
  <span class="hljs-comment">// ä»£ç æ¯”è¾ƒå¤šï¼ŒæŒ‰åŠŸèƒ½åˆ†æ¨¡å— æ‹†å‡½æ•°</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createElement</span>();           <span class="hljs-comment">// DOM å¯¹è±¡åˆ›å»º</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">attachEvent</span>();             <span class="hljs-comment">// äº‹ä»¶æ·»åŠ </span>
}
<span class="hljs-title class_">EditInPlace</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
  <span class="hljs-comment">// å°è£…äº†DOMæ“ä½œ</span>
  <span class="hljs-attr">createElement</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// DOM å†…å­˜ </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-property">id</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>;

    <span class="hljs-comment">// å€¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'span'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>);

    <span class="hljs-comment">// è¾“å…¥æ¡†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'text'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'button'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'ä¿å­˜'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'input'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">type</span> = <span class="hljs-string">'button'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">value</span> = <span class="hljs-string">'å–æ¶ˆ'</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">containerElement</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>);

    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>(); <span class="hljs-comment">// åˆ‡æ¢åˆ°æ–‡æœ¬æ˜¾ç¤ºçŠ¶æ€</span>
  },
  <span class="hljs-attr">convertToText</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
  },
  <span class="hljs-attr">convertToField</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>; <span class="hljs-comment">// éšè—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>; 
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'inline'</span>; <span class="hljs-comment">// å¯è§</span>
  },
  <span class="hljs-attr">attachEvent</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToField</span>(); <span class="hljs-comment">// åˆ‡æ¢åˆ°è¾“å…¥æ¡†æ˜¾ç¤ºçŠ¶æ€</span>
      }
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveButton</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">save</span>();
      }
    );
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cancelButton</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, 
      <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cancel</span>();
      }
    );
  },
   <span class="hljs-attr">save</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
     <span class="hljs-keyword">var</span> value = <span class="hljs-variable language_">this</span>.<span class="hljs-property">fieldElement</span>.<span class="hljs-property">value</span>;
     <span class="hljs-comment">// fetch åç«¯å­˜å‚¨</span>
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
     <span class="hljs-variable language_">this</span>.<span class="hljs-property">staticElement</span>.<span class="hljs-property">innerHTML</span> = value;
     <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>();   
    },
    <span class="hljs-attr">cancel</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">convertToText</span>();
    }
}
</code></pre>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./edit_in_place.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// EditInPlace ç±»</span>
  <span class="hljs-comment">// OOP </span>
  <span class="hljs-keyword">const</span> ep = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EditInPlace</span>(
    <span class="hljs-string">'slogan'</span>, 
    <span class="hljs-string">'æœ‰äº†è‚¯å¾·åŸºï¼Œç”Ÿæ´»å¥½æ»‹å‘³'</span>, 
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'app'</span>)
  );
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ep);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>è¿™ä¸ªâ€œå°±åœ°ç¼–è¾‘â€ç»„ä»¶è™½ç„¶åªæœ‰å‡ åè¡Œä»£ç ï¼Œå´æ˜¯ä¸€ä¸ªå…¸å‹çš„ OOP å®è·µï¼šæŠŠçŠ¶æ€å’Œè¡Œä¸ºå°è£…åœ¨ <code>EditInPlace</code> æ„é€ å‡½æ•°ä¸­ï¼Œå¯¹å¤–åªæš´éœ²æ¸…æ™°çš„åˆå§‹åŒ–æ¥å£ï¼Œå†…éƒ¨å®ç°å®Œå…¨éšè—ã€‚æ­£å› å¦‚æ­¤ï¼Œå®ƒæ‰èƒ½çœŸæ­£åšåˆ°<strong>ä¸€æ¬¡ç¼–å†™ã€å¤šå¤„å¤ç”¨</strong>â€”â€”æ— è®ºç”¨åœ¨ä¸ªäººä¸»é¡µç­¾åã€è¯„è®ºç¼–è¾‘è¿˜æ˜¯åå°é…ç½®é¡¹ï¼Œåªéœ€ä¸€è¡Œ <code>new EditInPlace(...)</code> å°±èƒ½æ¥å…¥ï¼Œæ— éœ€å…³å¿ƒå†…éƒ¨å¦‚ä½•åˆ‡æ¢è§†å›¾ã€ç»‘å®šäº‹ä»¶æˆ–ç®¡ç†æ•°æ®ã€‚è¿™ç§åŸºäºé¢å‘å¯¹è±¡çš„å°è£…æ€è·¯ï¼Œæ­£æ˜¯æ„å»ºå¯ç»´æŠ¤ã€å¯å¤ç”¨å‰ç«¯æ¨¡å—çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·˜å® API å…³é”®è¯æœç´¢æ¥å£æ·±åº¦è§£æï¼šè¯·æ±‚å‚æ•°ã€ç­¾åæœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7579453456017768489</link>    <guid>https://juejin.cn/post/7579453456017768489</guid>    <pubDate>2025-12-03T09:30:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579453456017768489" data-draft-id="7579438351297511460" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·˜å® API å…³é”®è¯æœç´¢æ¥å£æ·±åº¦è§£æï¼šè¯·æ±‚å‚æ•°ã€ç­¾åæœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯,API,æ•°æ®æŒ–æ˜"/> <meta itemprop="datePublished" content="2025-12-03T09:30:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”µå•†APIå¤§æ•°æ®æ¥å£å¼€å‘Cris"/> <meta itemprop="url" content="https://juejin.cn/user/3836609967955659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·˜å® API å…³é”®è¯æœç´¢æ¥å£æ·±åº¦è§£æï¼šè¯·æ±‚å‚æ•°ã€ç­¾åæœºåˆ¶ä¸æ€§èƒ½ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3836609967955659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”µå•†APIå¤§æ•°æ®æ¥å£å¼€å‘Cris
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:30:42.000Z" title="Wed Dec 03 2025 09:30:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>åœ¨ç”µå•†æ•°æ®é‡‡é›†ã€ç¬¬ä¸‰æ–¹å·¥å…·å¼€å‘ç­‰åœºæ™¯ä¸­ï¼Œæ·˜å®çš„å…³é”®è¯æœç´¢æ¥å£æ˜¯æ ¸å¿ƒæ•°æ®å…¥å£ä¹‹ä¸€ã€‚è¯¥æ¥å£æ”¯æŒé€šè¿‡å…³é”®è¯æŸ¥è¯¢å•†å“åˆ—è¡¨ã€ä»·æ ¼ã€é”€é‡ç­‰å…³é”®ä¿¡æ¯ï¼Œä½†å…¶ä¸¥æ ¼çš„è¯·æ±‚è§„èŒƒã€å¤æ‚çš„ç­¾åæœºåˆ¶å’Œæ€§èƒ½é™åˆ¶ï¼Œå¾€å¾€æˆä¸ºå¼€å‘è€…çš„æŠ€æœ¯ç—›ç‚¹ã€‚æœ¬æ–‡å°†ä»è¯·æ±‚å‚æ•°è§£æã€ç­¾åæœºåˆ¶åŸç†ã€å®æˆ˜ä»£ç å®ç°åˆ°æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œè¿›è¡Œå…¨æ–¹ä½æ·±åº¦è§£æï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆã€åˆè§„åœ°ä½¿ç”¨è¯¥æ¥å£ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ¥å£æ ¸å¿ƒåŸºç¡€è®¤çŸ¥</h2>
<h3 data-id="heading-1">1.1 æ¥å£åŠŸèƒ½ä¸åº”ç”¨åœºæ™¯</h3>
<p>æ·˜å®å…³é”®è¯æœç´¢æ¥å£çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡å…³é”®è¯ã€åˆ†ç±»ã€ä»·æ ¼åŒºé—´ç­‰æ¡ä»¶ï¼Œä»æ·˜å®å•†å“åº“ä¸­ç­›é€‰ç¬¦åˆæ¡ä»¶çš„å•†å“æ•°æ®ï¼Œè¿”å›å•†å“ IDã€æ ‡é¢˜ã€ä»·æ ¼ã€é”€é‡ã€å–å®¶ä¿¡æ¯ç­‰å­—æ®µã€‚</p>
<p>å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”µå•†æ•°æ®åˆ†æå·¥å…·ï¼šç›‘æ§ç«å“ä»·æ ¼ã€é”€é‡å˜åŒ–ï¼›</li>
<li>ç¬¬ä¸‰æ–¹å¯¼è´­å¹³å°ï¼šåŸºäºå…³é”®è¯æ¨èå•†å“ï¼›</li>
<li>å•†å®¶è¿è¥å·¥å…·ï¼šæ‰¹é‡æŸ¥è¯¢å•†å“æ›å…‰æƒ…å†µï¼›</li>
<li>å¸‚åœºè°ƒç ”ç³»ç»Ÿï¼šé‡‡é›†ç‰¹å®šå“ç±»å•†å“æ•°æ®è¿›è¡Œè¶‹åŠ¿åˆ†æã€‚</li>
</ul>
<h3 data-id="heading-2">1.2 æ¥å£è®¿é—®å‰æ</h3>
<p>ä½¿ç”¨è¯¥æ¥å£éœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ol>
<li>æ³¨å†Œæ·˜å®å¼€å‘è€…è´¦å·ï¼›</li>
<li>ç”³è¯·æ¥å£æƒé™ï¼›</li>
<li>è·å–<code>ApiKey</code>Â å’ŒÂ <code>ApiSecret</code>ï¼ˆæ¥å£è°ƒç”¨çš„æ ¸å¿ƒå‡­è¯ï¼‰ï¼›</li>
<li>éµå®ˆæ·˜å®å¹³å°ã€ŠAPI ä½¿ç”¨è§„èŒƒã€‹ï¼Œé¿å…é«˜é¢‘æ¬¡æ¶æ„è°ƒç”¨ã€‚</li>
</ol>
<h2 data-id="heading-3">äºŒã€è¯·æ±‚å‚æ•°æ·±åº¦è§£æ</h2>
<p>æ·˜å® API é‡‡ç”¨ HTTP GET/POST è¯·æ±‚æ–¹å¼ï¼Œå‚æ•°åˆ†ä¸º<strong>å…¬å…±å‚æ•°</strong>å’Œ<strong>ä¸šåŠ¡å‚æ•°</strong>ä¸¤ç±»ï¼Œæ‰€æœ‰å‚æ•°éœ€æŒ‰æŒ‡å®šæ ¼å¼æ‹¼æ¥ï¼Œç¼–ç é‡‡ç”¨ UTF-8ã€‚</p>
<h3 data-id="heading-4">2.1 å…¬å…±å‚æ•°ï¼ˆå¿…å¡«ï¼‰</h3>
<p>å…¬å…±å‚æ•°æ˜¯æ‰€æœ‰ TOP æ¥å£çš„é€šç”¨å‚æ•°ï¼Œç”¨äºèº«ä»½éªŒè¯ã€è¯·æ±‚æ ‡è¯†ç­‰ï¼Œæ ¸å¿ƒå‚æ•°å¦‚ä¸‹ï¼š</p>





















































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>app_key</td><td>String</td><td>åº”ç”¨å”¯ä¸€æ ‡è¯†</td><td>2356789012</td></tr><tr><td>method</td><td>String</td><td>æ¥å£åç§°</td><td>taobao.items.search</td></tr><tr><td>format</td><td>String</td><td>è¿”å›æ ¼å¼ï¼ˆæ”¯æŒ json/xmlï¼‰</td><td>json</td></tr><tr><td>timestamp</td><td>String</td><td>è¯·æ±‚æ—¶é—´æˆ³ï¼ˆæ ¼å¼ï¼šyyyy-MM-dd HH:mm:ssï¼‰</td><td>2025-12-03 14:30:00</td></tr><tr><td>v</td><td>String</td><td>æ¥å£ç‰ˆæœ¬</td><td>2.0</td></tr><tr><td>sign</td><td>String</td><td>ç­¾åï¼ˆæ ¸å¿ƒéªŒè¯å‚æ•°ï¼‰</td><td>88E88D8F7A6B5C4D3E2F1A0987654321</td></tr><tr><td>session</td><td>String</td><td>ä¹°å®¶ / å–å®¶æˆæƒä¼šè¯ï¼ˆéƒ¨åˆ†æ¥å£å¿…å¡«ï¼‰</td><td>61022000000000000000000000000000</td></tr></tbody></table>
<h3 data-id="heading-5">2.2 ä¸šåŠ¡å‚æ•°ï¼ˆå…³é”®è¯æœç´¢æ ¸å¿ƒï¼‰</h3>
<p>ä¸šåŠ¡å‚æ•°ç”¨äºæŒ‡å®šæœç´¢æ¡ä»¶ï¼Œæ ¸å¿ƒå‚æ•°å¦‚ä¸‹ï¼ˆä»¥<code>taobao.items.search</code>ä¸ºä¾‹ï¼‰ï¼š</p>



























































<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>è¯´æ˜</th><th>çº¦æŸ</th></tr></thead><tbody><tr><td>q</td><td>String</td><td>æœç´¢å…³é”®è¯</td><td>ä¸èƒ½ä¸ºç©ºï¼Œé•¿åº¦â‰¤30 å­—ç¬¦</td></tr><tr><td>cat</td><td>Number</td><td>å•†å“åˆ†ç±» ID</td><td>å¯é€‰ï¼Œéœ€é€šè¿‡åˆ†ç±»æ¥å£è·å–åˆæ³• ID</td></tr><tr><td>price_min</td><td>Number</td><td>æœ€ä½ä»·æ ¼ï¼ˆå…ƒï¼‰</td><td>ä¸ price_max æ­é…ä½¿ç”¨ï¼Œéè´Ÿ</td></tr><tr><td>price_max</td><td>Number</td><td>æœ€é«˜ä»·æ ¼ï¼ˆå…ƒï¼‰</td><td>éœ€å¤§äº price_min</td></tr><tr><td>sales</td><td>Number</td><td>é”€é‡ç­›é€‰</td><td>å¯é€‰ï¼Œå¦‚ 100 è¡¨ç¤ºç­›é€‰é”€é‡â‰¥100 çš„å•†å“</td></tr><tr><td>page_no</td><td>Number</td><td>é¡µç </td><td>é»˜è®¤ä¸º 1ï¼Œæœ€å¤§æ”¯æŒ 100 é¡µ</td></tr><tr><td>page_size</td><td>Number</td><td>æ¯é¡µæ¡æ•°</td><td>1-40ï¼Œé»˜è®¤ 20</td></tr><tr><td>sort</td><td>String</td><td>æ’åºæ–¹å¼</td><td>å¯é€‰å€¼ï¼šprice_ascï¼ˆä½ä»·ä¼˜å…ˆï¼‰ã€price_descï¼ˆé«˜ä»·ä¼˜å…ˆï¼‰ã€sales_descï¼ˆé”€é‡ä¼˜å…ˆï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">2.3 å‚æ•°æ‹¼æ¥è§„åˆ™</h3>
<ol>
<li>æ‰€æœ‰å‚æ•°ï¼ˆå…¬å…± + ä¸šåŠ¡ï¼‰æŒ‰<strong>å‚æ•°å ASCII ç å‡åº</strong>æ’åºï¼›</li>
<li>é”®å€¼å¯¹æ ¼å¼ä¸º<code>key=value</code>ï¼Œvalue éœ€è¿›è¡Œ URL ç¼–ç ï¼ˆå¦‚ç©ºæ ¼æ›¿æ¢ä¸º<code>%20</code>ï¼Œä¸­æ–‡è½¬æ¢ä¸º UTF-8 ç¼–ç çš„åå…­è¿›åˆ¶ï¼‰ï¼›</li>
<li>æ’åºåçš„é”®å€¼å¯¹ç”¨<code>&amp;</code>è¿æ¥ï¼Œå½¢æˆå¾…ç­¾åå­—ç¬¦ä¸²ã€‚</li>
</ol>
<p>ç¤ºä¾‹å¾…ç­¾åå­—ç¬¦ä¸²ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">app_key</span>=<span class="hljs-number">2356789012</span>&amp;format=json&amp;method=taobao.items.search&amp;page_<span class="hljs-literal">no</span>=<span class="hljs-number">1</span>&amp;page_size=<span class="hljs-number">20</span>&amp;q=æ‰‹æœº&amp;timestamp=<span class="hljs-number">2025</span>-<span class="hljs-number">12</span>-<span class="hljs-number">03</span>+<span class="hljs-number">14</span>%<span class="hljs-number">3</span>A30%<span class="hljs-number">3</span>A00&amp;v=<span class="hljs-number">2.0</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-7">ä¸‰ã€ç­¾åæœºåˆ¶åŸç†ä¸å®ç°</h2>
<p>æ·˜å® API ç­¾åæœºåˆ¶æ˜¯ä¸ºäº†éªŒè¯è¯·æ±‚çš„åˆæ³•æ€§ï¼Œé˜²æ­¢å‚æ•°è¢«ç¯¡æ”¹ï¼Œæ ¸å¿ƒåŸºäº<code>AppSecret</code>è¿›è¡Œ MD5 åŠ å¯†ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-8">3.1 ç­¾åç”Ÿæˆæ­¥éª¤</h3>
<ol>
<li>æŒ‰å‚æ•°æ‹¼æ¥è§„åˆ™ç”Ÿæˆ<strong>æ’åºåçš„å¾…ç­¾åå­—ç¬¦ä¸²</strong>ï¼ˆä¸å« sign å‚æ•°ï¼‰ï¼›</li>
<li>åœ¨å¾…ç­¾åå­—ç¬¦ä¸²é¦–å°¾æ‹¼æ¥<code>AppSecret</code>ï¼Œå½¢æˆ<code>AppSecret + å¾…ç­¾åå­—ç¬¦ä¸² + AppSecret</code>ï¼›</li>
<li>å¯¹æ‹¼æ¥åçš„å­—ç¬¦ä¸²è¿›è¡Œ<strong>MD5 åŠ å¯†</strong>ï¼Œå¾—åˆ° 32 ä½å°å†™å­—ç¬¦ä¸²ï¼Œå³ä¸º sign å€¼ï¼›</li>
<li>å°† sign å‚æ•°åŠ å…¥è¯·æ±‚å‚æ•°ï¼Œå®Œæˆæœ€ç»ˆè¯·æ±‚ URL æ„å»ºã€‚</li>
</ol>
<h3 data-id="heading-9">3.2 ç­¾åé˜²ç¯¡æ”¹åŸç†</h3>
<ul>
<li><code>AppSecret</code>ä»…å¼€å‘è€…å’Œæ·˜å®æœåŠ¡å™¨çŸ¥æ™“ï¼Œç¬¬ä¸‰æ–¹æ— æ³•ä¼ªé€ ç­¾åï¼›</li>
<li>ä»»ä½•å‚æ•°ï¼ˆåŒ…æ‹¬å€¼ã€é¡ºåºï¼‰çš„ä¿®æ”¹éƒ½ä¼šå¯¼è‡´å¾…ç­¾åå­—ç¬¦ä¸²å˜åŒ–ï¼Œæœ€ç»ˆç­¾åå¤±æ•ˆï¼›</li>
<li>timestamp å‚æ•°ç”¨äºé˜²æ­¢è¯·æ±‚é‡æ”¾ï¼ˆæ·˜å®é»˜è®¤æœ‰æ•ˆæœŸä¸º 10 åˆ†é’Ÿï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-10">3.3 ç­¾åå®ç°ç¤ºä¾‹ï¼ˆPythonï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> urllib.parse

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_sign</span>(<span class="hljs-params">params, app_secret</span>):
    <span class="hljs-comment"># 1. æŒ‰å‚æ•°åASCIIå‡åºæ’åº</span>
    sorted_params = <span class="hljs-built_in">sorted</span>(params.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>])
    <span class="hljs-comment"># 2. æ‹¼æ¥ä¸ºkey=valueæ ¼å¼ï¼ŒURLç¼–ç value</span>
    encoded_params = []
    <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> sorted_params:
        encoded_value = urllib.parse.quote(<span class="hljs-built_in">str</span>(value), safe=<span class="hljs-string">''</span>)
        encoded_params.append(<span class="hljs-string">f"<span class="hljs-subst">{key}</span>=<span class="hljs-subst">{encoded_value}</span>"</span>)
    sign_str = <span class="hljs-string">'&amp;'</span>.join(encoded_params)
    <span class="hljs-comment"># 3. é¦–å°¾æ‹¼æ¥AppSecret</span>
    sign_str = <span class="hljs-string">f"<span class="hljs-subst">{app_secret}</span><span class="hljs-subst">{sign_str}</span><span class="hljs-subst">{app_secret}</span>"</span>
    <span class="hljs-comment"># 4. MD5åŠ å¯†</span>
    md5 = hashlib.md5()
    md5.update(sign_str.encode(<span class="hljs-string">'utf-8'</span>))
    <span class="hljs-keyword">return</span> md5.hexdigest().lower()

<span class="hljs-comment"># æµ‹è¯•</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    app_secret = <span class="hljs-string">"your_app_secret"</span>
    params = {
        <span class="hljs-string">"app_key"</span>: <span class="hljs-string">"2356789012"</span>,
        <span class="hljs-string">"method"</span>: <span class="hljs-string">"taobao.items.search"</span>,
        <span class="hljs-string">"format"</span>: <span class="hljs-string">"json"</span>,
        <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"2025-12-03 14:30:00"</span>,
        <span class="hljs-string">"v"</span>: <span class="hljs-string">"2.0"</span>,
        <span class="hljs-string">"q"</span>: <span class="hljs-string">"æ‰‹æœº"</span>,
        <span class="hljs-string">"page_no"</span>: <span class="hljs-number">1</span>,
        <span class="hljs-string">"page_size"</span>: <span class="hljs-number">20</span>
    }
    sign = generate_sign(params, app_secret)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆçš„ç­¾åï¼š"</span>, sign)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€å®Œæ•´æ¥å£è°ƒç”¨ä»£ç å®ç°ï¼ˆPythonï¼‰</h2>
<p>ä»¥ä¸‹æ˜¯åŸºäº Python çš„å®Œæ•´æ¥å£è°ƒç”¨ç¤ºä¾‹ï¼ŒåŒ…å«å‚æ•°æ„å»ºã€ç­¾åç”Ÿæˆã€HTTP è¯·æ±‚ã€å“åº”è§£æç­‰æµç¨‹ï¼Œä½¿ç”¨<code>requests</code>åº“å‘é€è¯·æ±‚ã€‚</p>
<h3 data-id="heading-12">4.1 ç¯å¢ƒå‡†å¤‡</h3>
<p>å®‰è£…ä¾èµ–åº“ï¼š</p>
<pre><code class="hljs">pip install requests
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-13">4.2 å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> urllib.parse
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TaobaoSearchAPI</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, app_key, app_secret</span>):
        self.app_key = app_key
        self.app_secret = app_secret
        self.base_url = <span class="hljs-string">"http://gw.api.taobao.com/router/rest"</span>  <span class="hljs-comment"># æ­£å¼ç¯å¢ƒURL</span>
        <span class="hljs-comment"># æµ‹è¯•ç¯å¢ƒURLï¼šhttp://gw.api.tbsandbox.com/router/rest</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_sign</span>(<span class="hljs-params">self, params</span>):
        <span class="hljs-string">"""ç”Ÿæˆç­¾åï¼ˆå¤ç”¨3.3èŠ‚å®ç°ï¼‰"""</span>
        sorted_params = <span class="hljs-built_in">sorted</span>(params.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">0</span>])
        encoded_params = []
        <span class="hljs-keyword">for</span> key, value <span class="hljs-keyword">in</span> sorted_params:
            encoded_value = urllib.parse.quote(<span class="hljs-built_in">str</span>(value), safe=<span class="hljs-string">''</span>)
            encoded_params.append(<span class="hljs-string">f"<span class="hljs-subst">{key}</span>=<span class="hljs-subst">{encoded_value}</span>"</span>)
        sign_str = <span class="hljs-string">'&amp;'</span>.join(encoded_params)
        sign_str = <span class="hljs-string">f"<span class="hljs-subst">{self.app_secret}</span><span class="hljs-subst">{sign_str}</span><span class="hljs-subst">{self.app_secret}</span>"</span>
        md5 = hashlib.md5()
        md5.update(sign_str.encode(<span class="hljs-string">'utf-8'</span>))
        <span class="hljs-keyword">return</span> md5.hexdigest().lower()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_items</span>(<span class="hljs-params">self, keyword, page_no=<span class="hljs-number">1</span>, page_size=<span class="hljs-number">20</span>, **kwargs</span>):
        <span class="hljs-string">"""
        å…³é”®è¯æœç´¢å•†å“
        :param keyword: æœç´¢å…³é”®è¯
        :param page_no: é¡µç 
        :param page_size: æ¯é¡µæ¡æ•°ï¼ˆ1-40ï¼‰
        :param kwargs: å…¶ä»–ä¸šåŠ¡å‚æ•°ï¼ˆå¦‚catã€price_minã€price_maxã€sortç­‰ï¼‰
        :return: è§£æåçš„å•†å“æ•°æ®
        """</span>
        <span class="hljs-comment"># 1. æ„å»ºå…¬å…±å‚æ•°</span>
        params = {
            <span class="hljs-string">"app_key"</span>: self.app_key,
            <span class="hljs-string">"method"</span>: <span class="hljs-string">"taobao.items.search"</span>,
            <span class="hljs-string">"format"</span>: <span class="hljs-string">"json"</span>,
            <span class="hljs-string">"timestamp"</span>: datetime.now().strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>),
            <span class="hljs-string">"v"</span>: <span class="hljs-string">"2.0"</span>,
            <span class="hljs-string">"page_no"</span>: page_no,
            <span class="hljs-string">"page_size"</span>: <span class="hljs-built_in">min</span>(page_size, <span class="hljs-number">40</span>),  <span class="hljs-comment"># é™åˆ¶æœ€å¤§æ¡æ•°</span>
            <span class="hljs-string">"q"</span>: keyword
        }

        <span class="hljs-comment"># 2. æ·»åŠ é¢å¤–ä¸šåŠ¡å‚æ•°</span>
        params.update(kwargs)

        <span class="hljs-comment"># 3. ç”Ÿæˆç­¾å</span>
        sign = self.generate_sign(params)
        params[<span class="hljs-string">"sign"</span>] = sign

        <span class="hljs-comment"># 4. å‘é€HTTPè¯·æ±‚</span>
        <span class="hljs-keyword">try</span>:
            response = requests.get(self.base_url, params=params, timeout=<span class="hljs-number">10</span>)
            response.raise_for_status()  <span class="hljs-comment"># æŠ›å‡ºHTTPé”™è¯¯</span>
            result = response.json()

            <span class="hljs-comment"># 5. è§£æå“åº”</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">"error_response"</span> <span class="hljs-keyword">in</span> result:
                error = result[<span class="hljs-string">"error_response"</span>]
                <span class="hljs-keyword">raise</span> Exception(<span class="hljs-string">f"æ¥å£è°ƒç”¨å¤±è´¥ï¼š<span class="hljs-subst">{error[<span class="hljs-string">'msg'</span>]}</span>ï¼ˆé”™è¯¯ç ï¼š<span class="hljs-subst">{error[<span class="hljs-string">'code'</span>]}</span>ï¼‰"</span>)
            
            <span class="hljs-comment"># æå–å•†å“åˆ—è¡¨</span>
            items = result[<span class="hljs-string">"items_search_response"</span>][<span class="hljs-string">"items"</span>][<span class="hljs-string">"item"</span>]
            total = result[<span class="hljs-string">"items_search_response"</span>][<span class="hljs-string">"total_results"</span>]
            <span class="hljs-keyword">return</span> {
                <span class="hljs-string">"total"</span>: total,
                <span class="hljs-string">"page_no"</span>: page_no,
                <span class="hljs-string">"page_size"</span>: page_size,
                <span class="hljs-string">"items"</span>: items
            }
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœç´¢å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-comment"># ç¤ºä¾‹è°ƒç”¨</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ çš„AppKeyå’ŒAppSecret</span>
    APP_KEY = <span class="hljs-string">"your_app_key"</span>
    APP_SECRET = <span class="hljs-string">"your_app_secret"</span>

    <span class="hljs-comment"># åˆå§‹åŒ–APIå®¢æˆ·ç«¯</span>
    taobao_api = TaobaoSearchAPI(APP_KEY, APP_SECRET)

    <span class="hljs-comment"># æœç´¢å…³é”®è¯"æ‰‹æœº"ï¼Œç­›é€‰ä»·æ ¼1000-5000å…ƒï¼Œé”€é‡ä¼˜å…ˆæ’åº</span>
    result = taobao_api.search_items(
        keyword=<span class="hljs-string">"æ‰‹æœº"</span>,
        page_no=<span class="hljs-number">1</span>,
        page_size=<span class="hljs-number">30</span>,
        price_min=<span class="hljs-number">1000</span>,
        price_max=<span class="hljs-number">5000</span>,
        sort=<span class="hljs-string">"sales_desc"</span>
    )

    <span class="hljs-comment"># æ‰“å°ç»“æœ</span>
    <span class="hljs-keyword">if</span> result:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ€»å•†å“æ•°ï¼š<span class="hljs-subst">{result[<span class="hljs-string">'total'</span>]}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å½“å‰é¡µå•†å“æ•°ï¼š<span class="hljs-subst">{<span class="hljs-built_in">len</span>(result[<span class="hljs-string">'items'</span>])}</span>"</span>)
        <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> result[<span class="hljs-string">"items"</span>][:<span class="hljs-number">3</span>]:  <span class="hljs-comment"># æ‰“å°å‰3ä¸ªå•†å“</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•†å“æ ‡é¢˜ï¼š<span class="hljs-subst">{item[<span class="hljs-string">'title'</span>]}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä»·æ ¼ï¼š<span class="hljs-subst">{item[<span class="hljs-string">'price'</span>]}</span>å…ƒ"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é”€é‡ï¼š<span class="hljs-subst">{item[<span class="hljs-string">'sale_count'</span>]}</span>"</span>)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å•†å“é“¾æ¥ï¼š<span class="hljs-subst">{item[<span class="hljs-string">'detail_url'</span>]}</span>\n"</span>)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-14">4.3 å“åº”å­—æ®µè¯´æ˜</h3>
<p>è¿”å›çš„å•†å“æ•°æ®åŒ…å«å¤šä¸ªæ ¸å¿ƒå­—æ®µï¼Œå¸¸ç”¨å­—æ®µå¦‚ä¸‹ï¼š</p>
<ul>
<li><code>title</code>ï¼šå•†å“æ ‡é¢˜ï¼ˆå«å…³é”®è¯é«˜äº®æ ‡è®°ï¼‰ï¼›</li>
<li><code>price</code>ï¼šå•†å“ä»·æ ¼ï¼ˆå•ä½ï¼šå…ƒï¼‰ï¼›</li>
<li><code>sale_count</code>ï¼šç´¯è®¡é”€é‡ï¼›</li>
<li><code>detail_url</code>ï¼šå•†å“è¯¦æƒ…é¡µé“¾æ¥ï¼›</li>
<li><code>pic_url</code>ï¼šå•†å“ä¸»å›¾ URLï¼›</li>
<li><code>nick</code>ï¼šå–å®¶æ˜µç§°ï¼›</li>
<li><code>shop_type</code>ï¼šåº—é“ºç±»å‹ï¼ˆtaobaoï¼šæ·˜å®åº—ï¼Œtmallï¼šå¤©çŒ«åº—ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-15">äº”ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<p>æ·˜å® API å¯¹è°ƒç”¨é¢‘ç‡æœ‰ä¸¥æ ¼é™åˆ¶ï¼ˆæ™®é€šåº”ç”¨é€šå¸¸ä¸º 10-20 æ¬¡ / ç§’ï¼‰ï¼Œä¸”å•é¡µæœ€å¤§è¿”å› 40 æ¡æ•°æ®ï¼Œåœ¨æµ·é‡æ•°æ®é‡‡é›†åœºæ™¯ä¸­éœ€é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-16">5.1 é™æµä¸é‡è¯•æœºåˆ¶</h3>
<ol>
<li><strong>æ§åˆ¶å¹¶å‘é‡</strong>ï¼šä½¿ç”¨çº¿ç¨‹æ±  / åç¨‹æ± é™åˆ¶å¹¶å‘è¯·æ±‚æ•°ï¼Œé¿å…è§¦å‘é™æµï¼ˆç¤ºä¾‹ï¼šä½¿ç”¨<code>concurrent.futures.ThreadPoolExecutor</code>ï¼Œæœ€å¤§çº¿ç¨‹æ•°è®¾ä¸º 10ï¼‰ï¼›</li>
<li><strong>æŒ‡æ•°é€€é¿é‡è¯•</strong>ï¼šè°ƒç”¨å¤±è´¥æ—¶ï¼ˆå¦‚é”™è¯¯ç <code>429</code>é™æµã€<code>503</code>æœåŠ¡ä¸å¯ç”¨ï¼‰ï¼Œé‡‡ç”¨æŒ‡æ•°é€€é¿ç­–ç•¥é‡è¯•ï¼ˆ1sâ†’2sâ†’4sâ†’...ï¼‰ï¼Œé¿å…é¢‘ç¹é‡è¯•åŠ å‰§æœåŠ¡å™¨å‹åŠ›ï¼›</li>
<li><strong>è®°å½•è¯·æ±‚æ—¥å¿—</strong>ï¼šè®°å½•æ¯æ¬¡è¯·æ±‚çš„æ—¶é—´ã€å‚æ•°ã€å“åº”çŠ¶æ€ï¼Œä¾¿äºæ’æŸ¥é™æµåŸå› ã€‚</li>
</ol>
<p>ç¤ºä¾‹é‡è¯•æœºåˆ¶å®ç°ï¼ˆåŸºäº<code>tenacity</code>åº“ï¼‰ï¼š</p>
<pre><code class="hljs">pip install tenacity
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> tenacity <span class="hljs-keyword">import</span> retry, stop_after_attempt, wait_exponential, retry_if_exception_type

<span class="hljs-meta">@retry(<span class="hljs-params">
    stop=stop_after_attempt(<span class="hljs-params"><span class="hljs-number">3</span></span>),  <span class="hljs-comment"># æœ€å¤šé‡è¯•3æ¬¡</span>
    wait=wait_exponential(<span class="hljs-params">multiplier=<span class="hljs-number">1</span>, <span class="hljs-built_in">min</span>=<span class="hljs-number">1</span>, <span class="hljs-built_in">max</span>=<span class="hljs-number">5</span></span>),  <span class="hljs-comment"># æŒ‡æ•°é€€é¿</span>
    retry=retry_if_exception_type(<span class="hljs-params">(<span class="hljs-params">requests.exceptions.RequestException, Exception</span>)</span>)
</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">search_items_with_retry</span>(<span class="hljs-params">self, keyword, **kwargs</span>):
    <span class="hljs-keyword">return</span> self.search_items(keyword, **kwargs)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-17">5.2 æ•°æ®åˆ†é¡µä¼˜åŒ–</h3>
<ol>
<li><strong>æ‰¹é‡åˆ†é¡µæŸ¥è¯¢</strong>ï¼šé€šè¿‡<code>page_no</code>å¾ªç¯è·å–æ‰€æœ‰é¡µç æ•°æ®ï¼Œç›´è‡³è¿”å›ç»“æœä¸ºç©ºï¼ˆæ³¨æ„ï¼šæ·˜å® API æœ€å¤§æ”¯æŒ 100 é¡µï¼Œè¶…è¿‡éœ€è°ƒæ•´ç­›é€‰æ¡ä»¶ï¼‰ï¼›</li>
<li><strong>åˆç†è®¾ç½® page_size</strong>ï¼šæ¯é¡µæ¡æ•°è®¾ä¸º 40ï¼ˆæœ€å¤§å€¼ï¼‰ï¼Œå‡å°‘æ€»è¯·æ±‚æ¬¡æ•°ï¼›</li>
<li><strong>å¼‚æ­¥åˆ†é¡µ</strong>ï¼šä½¿ç”¨å¼‚æ­¥è¯·æ±‚åº“ï¼ˆå¦‚<code>aiohttp</code>ï¼‰å¹¶è¡Œè·å–å¤šé¡µæ•°æ®ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ol>
<h3 data-id="heading-18">5.3 ç¼“å­˜ç­–ç•¥</h3>
<ol>
<li><strong>æœ¬åœ°ç¼“å­˜</strong>ï¼šç¼“å­˜çƒ­é—¨å…³é”®è¯çš„æœç´¢ç»“æœï¼ˆå¦‚ Redisã€å†…å­˜å­—å…¸ï¼‰ï¼Œæœ‰æ•ˆæœŸè®¾ä¸º 5-15 åˆ†é’Ÿï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼›</li>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šä»…æŸ¥è¯¢æ–°å¢æ•°æ®ï¼ˆé€šè¿‡<code>modify_time</code>ç­‰å­—æ®µç­›é€‰ï¼‰ï¼Œé¿å…å…¨é‡é‡å¤é‡‡é›†ï¼›</li>
<li><strong>ç¼“å­˜å‡»ç©¿é˜²æŠ¤</strong>ï¼šå¯¹çƒ­ç‚¹å…³é”®è¯è®¾ç½®äº’æ–¥é”ï¼Œé¿å…ç¼“å­˜å¤±æ•ˆæ—¶å¤§é‡è¯·æ±‚ç©¿é€åˆ° APIã€‚</li>
</ol>
<h3 data-id="heading-19">5.4 å…¶ä»–ä¼˜åŒ–æŠ€å·§</h3>
<ol>
<li><strong>ç²¾ç®€è¿”å›å­—æ®µ</strong>ï¼šä½¿ç”¨<code>fields</code>å‚æ•°æŒ‡å®šæ‰€éœ€å­—æ®µï¼ˆå¦‚<code>fields=title,price,sale_count</code>ï¼‰ï¼Œå‡å°‘å“åº”æ•°æ®ä¼ è¾“é‡ï¼›</li>
<li><strong>å°±è¿‘æ¥å…¥</strong>ï¼šé€‰æ‹©ä¸æ·˜å®æœåŠ¡å™¨åœ°ç†ä½ç½®è¾ƒè¿‘çš„æœåŠ¡å™¨éƒ¨ç½²åº”ç”¨ï¼Œé™ä½ç½‘ç»œå»¶è¿Ÿï¼›</li>
<li><strong>é¿å…æ— æ•ˆå‚æ•°</strong>ï¼šä¸¥æ ¼æ ¡éªŒå‚æ•°åˆæ³•æ€§ï¼ˆå¦‚ä»·æ ¼åŒºé—´ã€åˆ†ç±» IDï¼‰ï¼Œé¿å…å› å‚æ•°é”™è¯¯å¯¼è‡´æ— æ•ˆè¯·æ±‚ã€‚</li>
</ol>
<h2 data-id="heading-20">å…­ã€å¸¸è§é—®é¢˜ä¸æ’æŸ¥</h2>
<ol>
<li>
<p><strong>ç­¾åé”™è¯¯ï¼ˆé”™è¯¯ç <code>15</code>ï¼‰</strong> ï¼š</p>
<ul>
<li>æ£€æŸ¥å‚æ•°æ’åºæ˜¯å¦æŒ‰ ASCII å‡åºï¼›</li>
<li>ç¡®è®¤<code>AppSecret</code>æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰ï¼›</li>
<li>æ£€æŸ¥ value æ˜¯å¦æ­£ç¡® URL ç¼–ç ï¼ˆä¸­æ–‡ã€ç‰¹æ®Šå­—ç¬¦ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒé™ä¸è¶³ï¼ˆé”™è¯¯ç <code>11</code>ï¼‰</strong> ï¼š</p>
<ul>
<li>ç¡®è®¤åº”ç”¨å·²ç”³è¯·ç›®æ ‡æ¥å£æƒé™ï¼›</li>
<li>éƒ¨åˆ†æ¥å£éœ€ç”¨æˆ·æˆæƒï¼ˆ<code>session</code>å‚æ•°å¿…å¡«ï¼‰ï¼Œéœ€å¼•å¯¼ç”¨æˆ·å®Œæˆæˆæƒæµç¨‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>é™æµï¼ˆé”™è¯¯ç <code>429</code>ï¼‰</strong> ï¼š</p>
<ul>
<li>é™ä½è¯·æ±‚é¢‘ç‡ï¼Œå¢åŠ å¹¶å‘æ§åˆ¶ï¼›</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–åº”ç”¨ä½¿ç”¨åŒä¸€<code>AppKey</code>é«˜é¢‘è°ƒç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®è¿”å›ä¸å…¨</strong>ï¼š</p>
<ul>
<li>ç¡®è®¤<code>page_no</code>æœªè¶…è¿‡ 100 é¡µï¼›</li>
<li>æ£€æŸ¥ç­›é€‰æ¡ä»¶æ˜¯å¦è¿‡äºä¸¥æ ¼ï¼ˆå¦‚ä»·æ ¼åŒºé—´è¿‡çª„ã€å…³é”®è¯è¿‡é•¿ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-21">ä¸ƒã€æ€»ç»“</h2>
<p>æ·˜å® API å…³é”®è¯æœç´¢æ¥å£æ˜¯ç”µå•†æ•°æ®é‡‡é›†çš„æ ¸å¿ƒå·¥å…·ï¼Œå…¶ä½¿ç”¨è¦ç‚¹å¯æ€»ç»“ä¸ºï¼š<strong>åˆè§„ä¸ºå…ˆã€ç­¾åä¸ºæ ¸ã€ä¼˜åŒ–ä¸ºç¿¼</strong>ã€‚å¼€å‘è€…éœ€ä¸¥æ ¼éµå®ˆå¹³å°è§„èŒƒï¼Œæ­£ç¡®å®ç°ç­¾åæœºåˆ¶é¿å…è¯·æ±‚å¤±æ•ˆï¼ŒåŒæ—¶é€šè¿‡é™æµã€ç¼“å­˜ã€åˆ†é¡µä¼˜åŒ–ç­‰ç­–ç•¥æå‡æ¥å£è°ƒç”¨æ•ˆç‡ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜éœ€å…³æ³¨æ¥å£ç‰ˆæœ¬æ›´æ–°ï¼ˆå¦‚æ—§ç‰ˆ<code>taobao.items.search</code>é€æ­¥è¿ç§»è‡³æ–°ç‰ˆ<code>alibaba.item.search</code>ï¼‰ã€å­—æ®µå˜æ›´ç­‰å¹³å°é€šçŸ¥ï¼Œç¡®ä¿åº”ç”¨é•¿æœŸç¨³å®šè¿è¡Œã€‚é€šè¿‡æœ¬æ–‡çš„è§£æä¸å®æˆ˜ä»£ç ï¼Œå¼€å‘è€…å¯å¿«é€ŸæŒæ¡æ¥å£ä½¿ç”¨æŠ€å·§ï¼Œé«˜æ•ˆè½åœ°ç›¸å…³ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python + Langchain + Streamlit + DashScope å®ç°ä¸€ä¸ªç½‘é¡µç‰ˆèŠå¤©æœºå™¨äºº]]></title>    <link>https://juejin.cn/post/7579427549471719470</link>    <guid>https://juejin.cn/post/7579427549471719470</guid>    <pubDate>2025-12-03T09:21:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579427549471719470" data-draft-id="7579410911057674266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python + Langchain + Streamlit + DashScope å®ç°ä¸€ä¸ªç½‘é¡µç‰ˆèŠå¤©æœºå™¨äºº"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-03T09:21:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»ä»å®¹å®¹æ¸¸åˆƒæœ‰ä½™"/> <meta itemprop="url" content="https://juejin.cn/user/4107431173952525"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python + Langchain + Streamlit + DashScope å®ç°ä¸€ä¸ªç½‘é¡µç‰ˆèŠå¤©æœºå™¨äºº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4107431173952525/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»ä»å®¹å®¹æ¸¸åˆƒæœ‰ä½™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:21:40.000Z" title="Wed Dec 03 2025 09:21:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python + Langchain + Streamlit + DashScope å®ç°ä¸€ä¸ªç½‘é¡µç‰ˆèŠå¤©æœºå™¨äºº</h2>
<h3 data-id="heading-1">é›¶ã€å‰ç½®æ¡ä»¶</h3>
<p>éœ€è¦åœ¨é˜¿é‡Œå·´å·´ç™¾ç‚¼å¹³å°åˆ›å»ºä¸€ä¸ªapi keyï¼Œå¹¶å†™åˆ°.envæ–‡ä»¶</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½ çš„ç™¾ç‚¼å¹³å°key</span>
<span class="hljs-attr">DASHSCOPE_API_KEY</span>=ä½ çš„ç™¾ç‚¼å¹³å°key
<span class="hljs-comment"># ç™¾ç‚¼å¹³å°url</span>
<span class="hljs-attr">BASE_URL</span>=https://dashscope.aliyuncs.com/compatible-mode/v1
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f410fe0355d4138810f35d91f2af338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuO5LuO5a655a655ri45YiD5pyJ5L2Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358500&amp;x-signature=oV7UcHN1lmzWjb3y08vCR8eXdI0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">ä¸€ã€å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-shell" lang="shell">pip install streamlit
pip install langchain_openai
pip install python-dotenv

</code></pre>
<h3 data-id="heading-3">äºŒã€å®Œæ•´Pythonä»£ç </h3>
<pre><code class="hljs language-python" lang="python">
<span class="hljs-comment"># å¯¼å…¥streamlit     å®‰è£… pip install streamlit</span>
<span class="hljs-keyword">import</span> streamlit <span class="hljs-keyword">as</span> st
<span class="hljs-comment"># å¯¼å…¥langchain_openai  pip install langchain_openai</span>
<span class="hljs-keyword">from</span> langchain_openai <span class="hljs-keyword">import</span> ChatOpenAI
<span class="hljs-comment"># å¯¼å…¥ dotenv è¯»å– .env  pip install python-dotenv</span>
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># åŠ è½½ .env æ–‡ä»¶</span>
load_dotenv()

chatLLM = ChatOpenAI(
    openai_api_key=os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
    openai_api_base=os.getenv(<span class="hljs-string">"BASE_URL"</span>),
    model=<span class="hljs-string">"qwen-plus"</span>
)


<span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">prompt: <span class="hljs-built_in">str</span></span>):
    response = chatLLM.invoke([{<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: prompt}])
    <span class="hljs-keyword">return</span> response.content


<span class="hljs-comment"># ä¿å­˜èŠå¤©ä¿¡æ¯</span>
<span class="hljs-keyword">if</span> <span class="hljs-string">"messages"</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> st.session_state:
    st.session_state[<span class="hljs-string">'messages'</span>] = []

<span class="hljs-comment"># æ ‡é¢˜</span>
st.title(<span class="hljs-string">"Python + Langchain + Streamlit + DashScope å®ç°ä¸€ä¸ªç½‘é¡µç‰ˆèŠå¤©æœºå™¨äºº"</span>)

<span class="hljs-comment"># åˆ†éš”ç¬¦</span>
st.divider()

<span class="hljs-comment"># è¯·è¾“å…¥ä½ çš„é—®é¢˜</span>
prompt = st.chat_input(<span class="hljs-string">"è¯·è¾“å…¥ä½ çš„é—®é¢˜"</span>)

<span class="hljs-keyword">if</span> prompt:
    <span class="hljs-comment"># role : user ã€ assistant  ai human</span>
    st.session_state[<span class="hljs-string">'messages'</span>].append({<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: prompt})
    <span class="hljs-keyword">for</span> message <span class="hljs-keyword">in</span> st.session_state[<span class="hljs-string">'messages'</span>]:
        st.chat_message(message[<span class="hljs-string">'role'</span>]).markdown(message[<span class="hljs-string">'content'</span>])

    <span class="hljs-keyword">with</span> st.spinner(<span class="hljs-string">"ğŸ¤”æ€è€ƒä¸­ã€‚ã€‚ã€‚ã€‚"</span>):
        response = chat(prompt)
        st.session_state[<span class="hljs-string">'messages'</span>].append({<span class="hljs-string">'role'</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-string">'content'</span>: response})
        st.chat_message(<span class="hljs-string">'assistant'</span>).markdown(response)
</code></pre>
<h3 data-id="heading-4">ä¸‰ã€å¯åŠ¨</h3>
<pre><code class="hljs language-shell" lang="shell">streamlit run streamlit_langchain_dashscope.py 
</code></pre>
<h3 data-id="heading-5">å››ã€æ•ˆæœ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40145648fd7044698ff3a2a678105a16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuO5LuO5a655a655ri45YiD5pyJ5L2Z:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765358500&amp;x-signature=VBhznhqqEW3IPsqSncOheFdMWXw%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js åŸç”ŸåŠ å¯†æŒ‡å—ï¼šè¯¦è§£ Crypto æ¨¡å—å¯¹æ¥å¤©è¿œé“¶è¡Œå¡é»‘åå•æ¥å£]]></title>    <link>https://juejin.cn/post/7579438351297560612</link>    <guid>https://juejin.cn/post/7579438351297560612</guid>    <pubDate>2025-12-03T09:41:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579438351297560612" data-draft-id="7579439226518650886" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js åŸç”ŸåŠ å¯†æŒ‡å—ï¼šè¯¦è§£ Crypto æ¨¡å—å¯¹æ¥å¤©è¿œé“¶è¡Œå¡é»‘åå•æ¥å£"/> <meta itemprop="keywords" content="API,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-03T09:41:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©è¿œæ•°ç§‘"/> <meta itemprop="url" content="https://juejin.cn/user/3511153810487162"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js åŸç”ŸåŠ å¯†æŒ‡å—ï¼šè¯¦è§£ Crypto æ¨¡å—å¯¹æ¥å¤©è¿œé“¶è¡Œå¡é»‘åå•æ¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3511153810487162/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©è¿œæ•°ç§‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:41:01.000Z" title="Wed Dec 03 2025 09:41:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ„å»ºç°ä»£æ”¯ä»˜æ¶æ„æ—¶ï¼ŒNode.js å¸¸è¢«ç”¨ä½œ BFF (Backend for Frontend) å±‚ï¼Œè´Ÿè´£èšåˆæ•°æ®ä¸å¿«é€Ÿå“åº”ã€‚å¯¹äºé£æ§å­ç³»ç»Ÿè€Œè¨€ï¼ŒBFF å±‚æ˜¯æ‹¦æˆªé«˜å±äº¤æ˜“çš„ç¬¬ä¸€é“é˜²çº¿â€”â€”æ—¢è¦å¿«ï¼Œåˆè¦å‡†ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥å¯¹æ¥é‡‘èçº§é£æ§æ¥å£ï¼ˆä»¥å¤©è¿œæ•°æ® API ä¸ºä¾‹ï¼‰ä¸ºä¾‹ï¼Œæ·±å…¥æ¢è®¨å¦‚ä½•åœ¨ Node.js ä¸­ä¼˜é›…åœ°å®ç° <strong>AES-128-CBC</strong> åŠ å¯†é€šä¿¡ï¼Œå¹¶è§„é¿ JavaScript å¸¸è§çš„ç±»å‹é™·é˜±ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å°†è®¨è®ºå¦‚ä½•åˆ©ç”¨ Serverless æ¶æ„é™ä½é£æ§æœåŠ¡çš„è¿ç»´æˆæœ¬ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆåŸç”Ÿ Crypto æ¨¡å—æ¯”ç¬¬ä¸‰æ–¹åº“æ›´å¥½ï¼Ÿ</h2>
<p>å¾ˆå¤šå¼€å‘è€…ä¹ æƒ¯å¼•å…¥ <code>crypto-js</code> ç­‰ç¬¬ä¸‰æ–¹åºå¤§çš„åº“æ¥å¤„ç†åŠ å¯†ã€‚å…¶å®ï¼ŒNode.js å†…ç½®çš„ <code>crypto</code> æ¨¡å—åŸºäº OpenSSLï¼Œæ€§èƒ½æä½³ä¸”æ— é¢å¤–ä¾èµ–ã€‚</p>
<p>ä½†åœ¨å¯¹æ¥é“¶è¡Œæˆ–é£æ§æ•°æ®æ—¶ï¼Œé€šå¸¸ä¼šé‡åˆ°ä¸¤ä¸ªç—›ç‚¹ï¼š</p>
<ol>
<li><strong>å¡«å……æ¨¡å¼ï¼ˆPaddingï¼‰</strong> ï¼šJava/Go ç­‰åç«¯å¸¸éœ€æ‰‹åŠ¨å®ç° PKCS7ï¼Œè€Œ Node.js çš„ <code>createCipheriv</code> é»˜è®¤å¼€å¯ PKCS7 å¡«å……ï¼Œè¿™ä¸€ç‚¹è™½ç„¶æ–¹ä¾¿ï¼Œä½†å¦‚æœæœåŠ¡ç«¯ä½¿ç”¨ ZeroPadding ç­‰éæ ‡æ¨¡å¼ï¼Œå°±éœ€è¦ç‰¹åˆ«å¤„ç†ã€‚</li>
<li><strong>ç¼–ç è½¬æ¢</strong>ï¼šåœ¨ 16 è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆHexï¼‰ã€äºŒè¿›åˆ¶ç¼“å†²åŒºï¼ˆBufferï¼‰å’Œ Base64 ä¹‹é—´åå¤æ¨ªè·³ï¼Œå®¹æ˜“ææ™•ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒä»£ç ï¼šå°è£…ä¸€ä¸ªå¥å£®çš„ RiskClient</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”Ÿäº§å¯ç”¨çš„ç±»ï¼Œå°è£…äº† IV æ‹¼æ¥ã€Base64 ç¼–ç ä»¥åŠ HTTP è¯·æ±‚ã€‚</p>
<h3 data-id="heading-2">2.1 ä¾èµ–å‡†å¤‡</h3>
<p>æˆ‘ä»¬ä»…ä½¿ç”¨ <code>axios</code> å¤„ç†ç½‘ç»œè¯·æ±‚ï¼ŒåŠ å¯†éƒ¨åˆ†å®Œå…¨ä½¿ç”¨åŸç”Ÿæ¨¡å—ã€‚</p>
<pre><code class="hljs">npm install axios
</code></pre>
<h3 data-id="heading-3">2.2 å®Œæ•´å®ç° (Async/Await)</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">axios</span> = require(<span class="hljs-string">'axios'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">crypto</span> = require(<span class="hljs-string">'crypto'</span>)<span class="hljs-comment">;</span>

class BankCardRiskClient {
    /**
     * @param {string} accessId - é‰´æƒ ID
     * @param {string} accessKeyHex - 16è¿›åˆ¶æ ¼å¼çš„å¯†é’¥
     */
    constructor(accessId, accessKeyHex) {
        // è¿™é‡Œä»¥æ ‡å‡† AES-128-CBC æ¥å£ä¸ºä¾‹
        <span class="hljs-attr">this.apiUrl</span> = <span class="hljs-string">'[https://api.tianyuanapi.com/api/v1/JRZQ0B6Y](https://api.tianyuanapi.com/api/v1/JRZQ0B6Y)'</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">this.accessId</span> = accessId<span class="hljs-comment">;</span>
        // å…³é”®ç‚¹ï¼šå¿…é¡»å°† Hex å­—ç¬¦ä¸²è½¬ä¸º Buffer å¯¹è±¡ï¼Œå¦åˆ™åŠ å¯†ç»“æœä¼šå®Œå…¨é”™è¯¯
        <span class="hljs-attr">this.accessKey</span> = Buffer.from(accessKeyHex, <span class="hljs-string">'hex'</span>)<span class="hljs-comment">;</span>
    }

    /**
     * åŠ å¯†æµç¨‹: ç”ŸæˆéšæœºIV -&gt; AESåŠ å¯† -&gt; æ‹¼æ¥IV -&gt; Base64
     */
    encrypt(data) {
        // å®‰å…¨è§„èŒƒï¼šæ¯æ¬¡è¯·æ±‚å¿…é¡»ç”Ÿæˆå…¨æ–°çš„éšæœº 16 å­—èŠ‚ IV
        const <span class="hljs-attr">iv</span> = crypto.randomBytes(<span class="hljs-number">16</span>)<span class="hljs-comment">;</span>
        
        // åˆ›å»ºåŠ å¯†å®ä¾‹ï¼ŒNode.js é»˜è®¤ä½¿ç”¨ PKCS7 Padding
        const <span class="hljs-attr">cipher</span> = crypto.createCipheriv(<span class="hljs-string">'aes-128-cbc'</span>, this.accessKey, iv)<span class="hljs-comment">;</span>
        
        // åºåˆ—åŒ– JSON
        const <span class="hljs-attr">plainText</span> = JSON.stringify(data)<span class="hljs-comment">;</span>
        
        // æ ¸å¿ƒåŠ å¯†æ“ä½œï¼šupdate å¤„ç†æ•°æ®å—ï¼Œfinal å¤„ç†å‰©ä½™å¡«å……
        let <span class="hljs-attr">encrypted</span> = cipher.update(plainText, <span class="hljs-string">'utf8'</span>)<span class="hljs-comment">;</span>
        <span class="hljs-attr">encrypted</span> = Buffer.concat([encrypted, cipher.final()])<span class="hljs-comment">;</span>

        // åè®®çº¦å®šï¼šå°† IV æ‹¼æ¥åˆ°å¯†æ–‡å¤´éƒ¨ï¼Œä»¥ä¾¿æœåŠ¡ç«¯æå–è§£å¯†
        const <span class="hljs-attr">combined</span> = Buffer.concat([iv, encrypted])<span class="hljs-comment">;</span>
        
        return combined.toString('base64')<span class="hljs-comment">;</span>
    }

    /**
     * è§£å¯†æµç¨‹: Base64è§£ç  -&gt; æå–IV -&gt; è§£å¯†
     */
    decrypt(base64Data) {
        const <span class="hljs-attr">buffer</span> = Buffer.from(base64Data, <span class="hljs-string">'base64'</span>)<span class="hljs-comment">;</span>

        // æå–å‰ 16 å­—èŠ‚ä½œä¸º IV
        const <span class="hljs-attr">iv</span> = buffer.slice(<span class="hljs-number">0</span>, <span class="hljs-number">16</span>)<span class="hljs-comment">;</span>
        // å‰©ä½™éƒ¨åˆ†ä¸ºå¯†æ–‡
        const <span class="hljs-attr">text</span> = buffer.slice(<span class="hljs-number">16</span>)<span class="hljs-comment">;</span>

        const <span class="hljs-attr">decipher</span> = crypto.createDecipheriv(<span class="hljs-string">'aes-128-cbc'</span>, this.accessKey, iv)<span class="hljs-comment">;</span>
        let <span class="hljs-attr">decrypted</span> = decipher.update(text)<span class="hljs-comment">;</span>
        <span class="hljs-attr">decrypted</span> = Buffer.concat([decrypted, decipher.final()])<span class="hljs-comment">;</span>

        return JSON.parse(decrypted.toString())<span class="hljs-comment">;</span>
    }

    /**
     * ä¸šåŠ¡è°ƒç”¨å°è£…
     */
    async checkCard(name, idCard, mobile, bankCard) {
        try {
            const <span class="hljs-attr">payload</span> = { 
                name, 
                id_card: idCard, 
                mobile_no: mobile, 
                bank_card: bankCard 
            }<span class="hljs-comment">;</span>

            const <span class="hljs-attr">encryptedData</span> = this.encrypt(payload)<span class="hljs-comment">;</span>

            // å‘èµ·è¯·æ±‚ï¼Œæ³¨æ„ t å‚æ•°é˜²æ­¢é‡æ”¾æ”»å‡»
            const <span class="hljs-attr">response</span> = await axios.post(
                this.apiUrl, 
                { data: encryptedData }, 
                {
                    headers: { 'Access-Id': this.accessId },
                    params: { t: Date.now() },
                    timeout: 3000 // å»ºè®®è®¾ç½®è¶…æ—¶æ—¶é—´
                }
            )<span class="hljs-comment">;</span>

            const <span class="hljs-attr">resData</span> = response.data<span class="hljs-comment">;</span>

            if (<span class="hljs-attr">resData.code</span> === <span class="hljs-number">0</span>) {
                return this.decrypt(resData.data)<span class="hljs-comment">;</span>
            } else {
                console.warn(`API è¿”å›å¼‚å¸¸: ${resData.message}`)<span class="hljs-comment">;</span>
                return null<span class="hljs-comment">;</span>
            }
        } catch (error) {
            console.error('ç½‘ç»œæˆ–è§£å¯†é”™è¯¯:', error.message)<span class="hljs-comment">;</span>
            return null<span class="hljs-comment">;</span>
        }
    }
}

// --- è°ƒç”¨ç¤ºä¾‹ ---
(async () =&gt; {
    // æœ€ä½³å®è·µï¼šå¯†é’¥å¿…é¡»ä»ç¯å¢ƒå˜é‡è¯»å–
    const <span class="hljs-attr">client</span> = new BankCardRiskClient(
        process.env.RISK_ACCESS_ID, 
        process.env.RISK_ACCESS_KEY
    )<span class="hljs-comment">;</span>

    const <span class="hljs-attr">report</span> = await client.checkCard(
        'å¼ ä¸‰', '330106199001011234', '13912345678', '6228480038294321'
    )<span class="hljs-comment">;</span>
    
    if (report) {
         // ä¸‹æ–‡å°†è¯¦ç»†è®²è§£è¿™é‡Œçš„ç±»å‹é™·é˜±
         const <span class="hljs-attr">isRisk</span> = report.caseRelated === <span class="hljs-string">'1'</span><span class="hljs-comment">;</span>
         console.log('æ˜¯å¦æ¶‰æ¡ˆ:', isRisk)<span class="hljs-comment">;</span>
    }
})()<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€ JavaScript å¼±ç±»å‹ç³»ç»Ÿä¸­çš„â€œå¤§å‘â€</h2>
<p>åœ¨å¯¹æ¥è€ç‰Œé‡‘èæ¥å£æ—¶ï¼Œä½ ä¼šå‘ç°å¤§é‡å­—æ®µè¿”å›çš„æ˜¯å­—ç¬¦ä¸²å½¢å¼çš„ <code>"1"</code> æˆ– <code>"0"</code>ï¼Œè€Œä¸æ˜¯ Boolean ç±»å‹çš„ <code>true</code>/<code>false</code>ã€‚</p>
<p>åœ¨ JavaScript ä¸­ï¼Œè¿™ææ˜“å¼•å‘ä¸¥é‡çš„ä¸šåŠ¡é€»è¾‘é”™è¯¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// å‡è®¾ API è¿”å›æœªæ¶‰æ¡ˆï¼š<span class="hljs-attr">res.caseRelated</span> = <span class="hljs-string">"0"</span>

// âŒ é”™è¯¯å†™æ³•
if (res.caseRelated) {
    // åœ¨ JS ä¸­ï¼Œéç©ºå­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ "0"ï¼‰éƒ½è¢«è§†ä¸º trueï¼
    // ç»“æœï¼šæœ¬è¯¥æ”¾è¡Œçš„äº¤æ˜“è¢«è¯¯æ‹¦æˆª
    blockTransaction()<span class="hljs-comment">; </span>
}

// âœ… æ­£ç¡®å†™æ³•ï¼šæ˜¾å¼æ¯”è¾ƒ
const <span class="hljs-attr">isCriminal</span> = res.caseRelated === <span class="hljs-string">'1'</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">isFraud</span> = res.fraudTrans === <span class="hljs-string">'1'</span><span class="hljs-comment">;</span>

if (isCriminal || isFraud) {
    blockTransaction()<span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>å»ºè®®</strong>ï¼šåœ¨ Service å±‚è®¾è®¡ä¸€ä¸ª <code>adapter</code>ï¼ˆé€‚é…å™¨ï¼‰ï¼Œå°† API è¿”å›çš„åŸå§‹æ•°æ®æ¸…æ´—ä¸ºæ ‡å‡†çš„ Boolean å€¼ï¼Œä¸è¦è®©è„æ•°æ®æ±¡æŸ“ä¸šåŠ¡é€»è¾‘å±‚ã€‚</p>
<h2 data-id="heading-5">å››ã€ æ¶æ„è¿›é˜¶ï¼šNode.js + Serverless</h2>
<p>Node.js çš„å†·å¯åŠ¨é€Ÿåº¦å¿«ã€å†…å­˜å ç”¨ä½ï¼Œä½¿å…¶æˆä¸º <strong>Serverlessï¼ˆæ— æœåŠ¡å™¨æ¶æ„ï¼‰</strong> çš„ç»ä½³æ‹æ¡£ã€‚</p>
<h3 data-id="heading-6">4.1 åœºæ™¯ï¼šAPI ç½‘å…³å‰ç½®å®ˆå«</h3>
<p>ä¼ ç»Ÿçš„é£æ§å¾€å¾€åµŒå…¥åœ¨å•ä½“åº”ç”¨ä¸­ï¼Œå¯¼è‡´ä¸šåŠ¡ä»£ç è‡ƒè‚¿ã€‚æˆ‘ä»¬å¯ä»¥å°†é£æ§é€»è¾‘æŠ½ç¦»ä¸ºä¸€ä¸ªç‹¬ç«‹çš„ <strong>AWS Lambda</strong> æˆ– <strong>é˜¿é‡Œäº‘å‡½æ•°è®¡ç®—ï¼ˆFCï¼‰</strong> ã€‚</p>
<ul>
<li>
<p><strong>æµç¨‹</strong>ï¼š<code>å®¢æˆ·ç«¯ -&gt; API ç½‘å…³ -&gt; é£æ§äº‘å‡½æ•° -&gt; ä¸šåŠ¡æœåŠ¡å™¨</code></p>
</li>
<li>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>éš”ç¦»æ€§</strong>ï¼šå¦‚æœé£æ§ API å“åº”å»¶è¿Ÿï¼Œåªä¼šé˜»å¡ç½‘å…³å±‚ï¼Œä¸ä¼šæ‹–å®æ ¸å¿ƒä¸šåŠ¡æœåŠ¡çš„çº¿ç¨‹æ± ã€‚</li>
<li><strong>æˆæœ¬ä¼˜åŒ–</strong>ï¼šé£æ§è°ƒç”¨é€šå¸¸æ˜¯ä½é¢‘é«˜å¹¶å‘ï¼ˆå¦‚çªå‘å¤§é¢äº¤æ˜“ï¼‰ï¼ŒServerless æŒ‰è°ƒç”¨æ¬¡æ•°è®¡è´¹ï¼Œæ¯”é•¿æœŸç»´æŠ¤ä¸€å° EC2/ECS æœåŠ¡å™¨æ›´åˆ’ç®—ã€‚</li>
<li><strong>å®‰å…¨é˜»æ–­</strong>ï¼šè‹¥äº‘å‡½æ•°æ£€æµ‹åˆ° <code>caseRelated === '1'</code>ï¼Œç›´æ¥è¿”å› HTTP 403ï¼Œæ¶æ„æµé‡æ ¹æœ¬æ¥è§¦ä¸åˆ°ä½ çš„æ ¸å¿ƒæ•°æ®åº“ã€‚</li>
</ol>
</li>
</ul>
<h3 data-id="heading-7">4.2 åœºæ™¯ï¼šStream æµå¼æ¸…æ´—</h3>
<p>è´¢åŠ¡éƒ¨é—¨æœ‰æ—¶éœ€è¦æ¸…æ´—æ•°ä¸‡æ¡å­˜é‡æ•°æ®ï¼ˆExcel/CSVï¼‰ã€‚Node.js çš„ Stream API é…åˆ <code>Promise.all</code> æ˜¯å¤„ç†æ­¤ç±»ä»»åŠ¡çš„ç¥å™¨ã€‚</p>
<p>ä¸è¦ä¸€æ¬¡æ€§æŠŠ 10 ä¸‡æ¡æ•°æ®è¯»å…¥å†…å­˜ï¼ä½¿ç”¨ <code>fs.createReadStream</code> é…åˆ <code>csv-parser</code>ï¼Œæ¯æ¬¡å¹¶å‘å¤„ç† 5-10 ä¸ªè¯·æ±‚ï¼Œæ—¢èƒ½åˆ©ç”¨ API çš„å¹¶å‘èƒ½åŠ›ï¼Œåˆä¸ä¼šå¯¼è‡´ Node è¿›ç¨‹ OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ã€‚</p>
<h2 data-id="heading-8">äº”ã€ æ€»ç»“</h2>
<p>é€šè¿‡ Node.js åŸç”Ÿæ¨¡å—å®ç° AES åŠ å¯†ï¼Œæˆ‘ä»¬æ— éœ€ä¾èµ–è‡ƒè‚¿çš„ç¬¬ä¸‰æ–¹åº“å³å¯å®‰å…¨å¯¹æ¥é‡‘èæ•°æ®ã€‚è€Œç»“åˆ JavaScript çš„å¼‚æ­¥ç‰¹æ€§ä¸ Serverless æ¶æ„ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªè½»é‡ã€ä½æˆæœ¬ä¸”é«˜å¯ç”¨çš„æ”¯ä»˜é£æ§ç½‘å…³ã€‚</p>
<p>è®°ä½ï¼Œåœ¨å¤„ç†é‡‘é’±ç›¸å…³çš„é€»è¾‘æ—¶ï¼Œ<strong>ç±»å‹æ£€æŸ¥</strong>ï¼ˆæ³¨æ„ "0" æ˜¯ trueï¼‰å’Œ<strong>å¯†é’¥ç®¡ç†</strong>æ°¸è¿œæ˜¯é‡ä¸­ä¹‹é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡]]></title>    <link>https://juejin.cn/post/7579451710302470170</link>    <guid>https://juejin.cn/post/7579451710302470170</guid>    <pubDate>2025-12-03T09:42:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579451710302470170" data-draft-id="7579255046980206618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-03T09:42:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨â€œåˆ†åŒºâ€æ¥é¢å¯¹è¶…å¤§æ•°æ®é›†å’Œè¶…å¤§ååé‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:42:59.000Z" title="Wed Dec 03 2025 09:42:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ä¸ºä»€ä¹ˆè¦åˆ†åŒºï¼Ÿ</h3>
<p><strong>åˆ†åŒºï¼ˆpartitionsï¼‰</strong> ä¹Ÿè¢«ç§°ä¸º <strong>åˆ†ç‰‡ï¼ˆshardingï¼‰</strong> ï¼Œé€šå¸¸é‡‡ç”¨å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºçš„æ–¹å¼æ¥å¢åŠ ç³»ç»Ÿçš„ <strong>å¯ä¼¸ç¼©æ€§</strong>ï¼Œä»¥æ­¤æ¥é¢å¯¹<strong>éå¸¸å¤§çš„æ•°æ®é›†æˆ–éå¸¸é«˜çš„ååé‡</strong>ï¼Œé¿å…å‡ºç°çƒ­ç‚¹ã€‚</p>
<p>åˆ†åŒºé€šå¸¸å’Œå¤åˆ¶ç»“åˆä½¿ç”¨ï¼Œä½¿å¾—æ¯ä¸ªåˆ†åŒºçš„å‰¯æœ¬å­˜å‚¨åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä¿è¯æ•°æ®å‰¯æœ¬çš„ <strong>é«˜å¯ç”¨</strong>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæ•°æ®åº“è¢«åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºéƒ½æœ‰ä¸€ä¸ªä¸»åº“ã€‚ä¸åŒåˆ†åŒºçš„ä¸»åº“å¯èƒ½åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹å¯èƒ½æ˜¯æŸäº›åˆ†åŒºçš„ä¸»åº“ï¼ŒåŒæ—¶æ˜¯å…¶ä»–åˆ†åŒºçš„ä»åº“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42d9d47b5d5e49fe881575dbb10fdca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=hjzRRLYRnn2WoGPxdb%2FeEQe9sic%3D" alt="åˆ†åŒºä¸å¤åˆ¶.png" loading="lazy"/></p>
<h4 data-id="heading-1">1.1 ä¸€è‡´å‰ç¼€è¯»</h4>
<p>åˆ†åŒºä¹Ÿä¼šç”±äºå¤åˆ¶å»¶è¿Ÿè€Œäº§ç”Ÿé—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å›¾ä¸­çš„ä¾‹å­ï¼Œæ˜¯Poonså…ˆç”Ÿå’ŒCakeå°å§çš„å¯¹è¯ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1c05ea40e1e434f8a3d6bd6e51eb2dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=PpseAbZB5ZS3B5Z8Suvp9BXe42c%3D" alt="ä¸€è‡´å‰ç¼€è¯».png" loading="lazy"/></p>
<p>Poonså…ˆç”Ÿå…ˆé—®ï¼š "How far into the future can you see, Mrs.Cake?"</p>
<p>Cakeå°å§å›ç­”è¯´ï¼š "About ten seconds usually, Mr.Poons."</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™æ®µå¯¹è¯æ˜¯æœ‰å› æœå…³ç³»çš„ï¼ˆå…ˆé—®åç­”ï¼‰ã€‚ä½†æ˜¯å¯¹äºè§‚å¯Ÿè€…ï¼Œä»–çœ‹åˆ°çš„é¡ºåºå´æ˜¯å…ˆå¾—åˆ°äº†ç­”æ¡ˆï¼Œå†çœ‹åˆ°äº†é—®é¢˜ï¼Œè¿™å°±æ˜¯åœ¨åˆ†åŒºæ•°æ®åº“ä¸­ï¼Œå› å¤åˆ¶å»¶è¿Ÿè€Œäº§ç”Ÿçš„ç‰¹æ®Šæƒ…å†µã€‚</p>
<p>ä¸ºäº†é¿å…è¿™ç§æ··ä¹±ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¿è¯ <strong>ä¸€è‡´å‰ç¼€è¯»</strong>ï¼šå¦‚æœä¸€ç³»åˆ—å†™å…¥æŒ‰æŸä¸ªé¡ºåºå‘ç”Ÿï¼Œé‚£ä¹ˆä»»ä½•äººè¯»å–è¿™äº›å†™å…¥æ—¶ï¼Œä¹Ÿä¼šçœ‹è§å®ƒä»¬ä»¥åŒæ ·çš„é¡ºåºå‡ºç°ã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œç¡®ä¿ä»»ä½•å› æœç›¸å…³çš„å†™å…¥éƒ½åœ¨ç›¸åŒçš„åˆ†åŒºã€‚</p>
<h3 data-id="heading-2">2. è¯¥æ€ä¹ˆåˆ†åŒºï¼Ÿ</h3>
<p>åˆ†åŒºçš„ç›®çš„æ˜¯å°†æ•°æ®å’Œè´Ÿè½½å‡åŒ€çš„åˆ†å¸ƒåˆ°å„ä¸ªèŠ‚ç‚¹ä¸Šï¼Œç†è®ºä¸Š10ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå¤„ç†10å€çš„æ•°æ®é‡å’Œ10å€å•èŠ‚ç‚¹çš„è¯»å†™ååé‡ã€‚</p>
<p>ä½†æ˜¯å¦‚æœåˆ†åŒºä¸å‡ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€äº›åˆ†åŒºæœ‰æ›´å¤šçš„æ•°æ®æˆ–è¯»å†™ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>åæ–œ</strong>ï¼Œè¿™ä¼šä½¿å¾—åˆ†åŒºåå¹¶æ²¡æœ‰å¾—åˆ°å¾ˆå¤§çš„æ•ˆç‡æå‡ã€‚åœ¨æç«¯æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è´Ÿè½½å¦‚æœéƒ½è½åœ¨ä¸€ä¸ªåˆ†åŒºï¼Œä½¿å¾—è¯¥åˆ†åŒºè´Ÿè½½è¿‡é«˜ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º <strong>çƒ­ç‚¹</strong>ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†é¿å…åæ–œå’Œçƒ­ç‚¹çš„äº§ç”Ÿï¼Œä»¥é”®å€¼æ•°æ®çš„åˆ†åŒºä¸ºä¾‹ï¼Œè®¨è®ºå¦‚ä½•å°†æ•°æ®åˆ†åŒºåšå¾—å¦¥å½“ã€‚</p>
<h4 data-id="heading-3">2.1 æ ¹æ®é”®çš„èŒƒå›´è¿›è¡Œåˆ†åŒº</h4>
<p>æˆ‘ä»¬å¯ä»¥æ ¹æ®é”®å€¼çš„èŒƒå›´è¿›è¡Œåˆ†åŒºï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä»¥26ä¸ªè‹±æ–‡å­—ç¬¦åˆ’åˆ†26ä¸ªåˆ†åŒºï¼Œä¹‹åæ ¹æ®é”®å€¼é¦–å­—æ¯å¯¹å®ƒä»¬è¿›è¡Œåˆ†åŒºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œé”®å€¼å¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œè¿™ä¼šé€ æˆæŒ‰ç…§é¦–å­—æ¯åˆ†åŒºä¹‹åï¼Œå‘ç”Ÿæ•°æ®åæ–œã€‚ä¸ºäº†å‡åŒ€åˆ†é…æ•°æ®ï¼Œåˆ†åŒºçš„è¾¹ç•Œéœ€è¦æ ¹æ®æ•°æ®åˆ†åŒºçš„å®é™…æƒ…å†µå†è¿›è¡Œè°ƒæ•´ã€‚</p>
<h4 data-id="heading-4">2.2 æ•£åˆ—åˆ†åŒº</h4>
<p>ä¸€ä¸ªå¥½çš„æ•£åˆ—å‡½æ•°å¯ä»¥å°†æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…å‘ç”Ÿåæ–œã€‚ä½†æ˜¯è¿™ä¹Ÿå¸¦æ¥äº†é—®é¢˜ï¼šæˆ‘ä»¬æ²¡æœ‰åŠæ³•å†è¿›è¡Œé«˜æ•ˆçš„èŒƒå›´æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-5">3. çƒ­ç‚¹æ¶ˆé™¤</h3>
<p>é¿å…çƒ­ç‚¹æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ•°æ®è®°å½•è¿›è¡Œæ•£åˆ—åˆ†åŒºï¼Œè®°å½•å› æ­¤ä¼šåœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¹³å‡åˆ†é…ã€‚</p>
<p>ä½†æ˜¯å®ƒå¹¶ä¸èƒ½å®Œå…¨é¿å…çƒ­ç‚¹çš„äº§ç”Ÿï¼Œå› ä¸ºå¦‚æœæ‰€æœ‰çš„è¯»å†™æ“ä½œéƒ½æ˜¯é’ˆå¯¹åŒä¸€ä¸ªé”®çš„è¯ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è¯·æ±‚è¿˜æ˜¯ä¼šè¢«è·¯ç”±åˆ°åŒä¸€ä¸ªåˆ†åŒºã€‚æ¯”å¦‚è¯´æœ‰ä¸€ä¸ªç™¾ä¸‡ç²‰ä¸çš„åšä¸»å‘å¸ƒåŠ¨æ€ï¼Œè¯¥åŠ¨æ€æ ¹æ®åšä¸»IDçš„é”®å€¼è¿›è¡Œåˆ†åŒºï¼Œå¦‚æœæ­¤æ—¶æœ‰å¤§é‡çš„ç²‰ä¸å¯¹è¯¥åŠ¨æ€è¿›è¡Œäº’åŠ¨ï¼Œé‚£ä¹ˆå“ˆå¸Œç­–ç•¥ä¼šæŠŠè¿™äº›è¯·æ±‚éƒ½è·¯ç”±åˆ°åŒä¸€ä¸ªåˆ†åŒºè¿›è¡Œæ“ä½œï¼Œå‘ç”Ÿçƒ­ç‚¹äº‹ä»¶ã€‚</p>
<p>å…¶å®ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¯¥çƒ­ç‚¹é”®ä¸Šå†è¿›è¡Œåˆ†åŒºï¼Œä»¥é¿å…çƒ­ç‚¹ï¼šåœ¨ä¸»é”®çš„æœ€åæ‹¼æ¥éšæœºæ•°ï¼Œä¸¤ä½åè¿›åˆ¶çš„éšæœºæ•°å°±èƒ½æŠŠä¸€ä¸ªä¸»é”®åˆ†æˆ100ä¸ªä¸åŒçš„ä¸»é”®ï¼Œä»è€Œå­˜å‚¨åœ¨ä¸åŒçš„åˆ†åŒºä¸­ï¼Œè¿™å°±å®Œæˆäº†çƒ­ç‚¹æ¶ˆé™¤ã€‚ä½†æ˜¯ä¸»é”®è¢«åˆ†å‰²åï¼Œä»»ä½•è¯»å–å·¥ä½œéƒ½å¿…é¡»åœ¨æ¯æ¬¡è¯»å–æ—¶å°†æ‰€æœ‰çš„æ•°æ®æ‹‰å‡ºå»åˆå¹¶åˆ°ä¸€èµ·å†è¿”å›ç»“æœã€‚</p>
<h3 data-id="heading-6">4. åˆ†åŒºå†å¹³è¡¡</h3>
<p>å¦‚æœä¿å­˜æŸåˆ†åŒºæ•°æ®çš„æœåŠ¡å™¨æ•…éšœï¼Œéœ€è¦ä½¿ç”¨å…¶ä»–æœåŠ¡å™¨æ¥ç®¡æˆ–æƒ³å°†ç›®å‰çš„æœåŠ¡å™¨æ¢æˆæ€§èƒ½æ›´å¥½çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œ <strong>åˆ†åŒºå†å¹³è¡¡</strong>ã€‚</p>
<p><strong>åˆ†åŒºå†å¹³è¡¡</strong> æ˜¯å°†è´Ÿè½½ä»é›†ç¾¤ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹å‘å¦ä¸€ä¸ªèŠ‚ç‚¹ç§»åŠ¨çš„è¿‡ç¨‹ã€‚æ‰§è¡Œå†å¹³è¡¡éœ€è¦æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>å†å¹³è¡¡æœŸé—´ï¼Œæ•°æ®åº“åº”è¯¥ç»§ç»­æ¥å—è¯»å–å’Œå†™å…¥</li>
<li>èŠ‚ç‚¹ä¹‹é—´åªç§»åŠ¨å¿…é¡»çš„æ•°æ®ï¼Œä»¥ä¾¿å¿«é€Ÿå†å¹³è¡¡ï¼Œå¹¶å‡å°‘ç½‘ç»œå’Œç£ç›˜çš„IOè´Ÿè½½</li>
<li>å†å¹³è¡¡ä¹‹åï¼Œè´Ÿè½½åº”è¯¥åœ¨é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¹‹é—´å…¬å¹³åœ°å…±äº«</li>
</ul>
<p>æ¯”è¾ƒç®€å•çš„å†å¹³è¡¡åˆ†åŒºç­–ç•¥æ˜¯é€‰æ‹© <strong>å›ºå®šæ•°é‡çš„åˆ†åŒº</strong>ï¼Œå½“èŠ‚ç‚¹æ•°é‡å¢åŠ æ—¶ï¼Œå¯ä»¥ä»åŸèŠ‚ç‚¹ä¸­ <strong>çªƒå–</strong> ä¸€äº›åˆ†åŒºï¼ˆå½“èŠ‚ç‚¹æ•°é‡å‡å°‘æ—¶ï¼Œåˆ™å‘ç”Ÿç›¸åçš„æƒ…å†µï¼‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a27e8329b4c14681a033fa17b01d48e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=CEz4V3PO6zsRwUVIvX5j79H%2Fdjk%3D" alt="å›ºå®šæ•°é‡åˆ†åŒºå†å¹³è¡¡.png" loading="lazy"/></p>
<p>åœ¨è¿™ç§é…ç½®ä¸­ï¼Œåˆ†åŒºçš„æ•°é‡é€šå¸¸åœ¨æ•°æ®åº“ç¬¬ä¸€æ¬¡å»ºç«‹æ—¶ç¡®å®šï¼Œæ“ä½œæ¯”è¾ƒç®€å•ï¼Œä¹‹åä¸ä¼šæ”¹å˜ï¼Œå› æ­¤ä½ éœ€è¦é€‰æ‹©è¶³å¤Ÿå¤šçš„åˆ†åŒºä»¥é€‚åº”æœªæ¥çš„å¢é•¿ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªåˆ†åŒºä¹Ÿæœ‰ç®¡ç†å¼€é”€ï¼Œæ‰€ä»¥é€‰æ‹©å¤ªå¤§çš„æ•°å­—ä¼šé€‚å¾—å…¶åã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯é€‰æ‹© <strong>åŠ¨æ€åˆ†åŒº</strong>ï¼Œæ ¹æ®é…ç½®çš„åˆ†åŒºå¤§å°ï¼Œå½“è¶…è¿‡è¯¥é˜ˆå€¼æ—¶ï¼Œå¯ä»¥å°†è¯¥å¤§åˆ†åŒºåˆ†å‰²æˆä¸¤ä¸ªå°åˆ†åŒºï¼Œèƒ½å¤Ÿä½¿ <strong>åˆ†åŒºæ•°é‡é€‚åº”æ€»æ•°æ®é‡</strong>ã€‚åœ¨å¤§å‹åˆ†åŒºæ‹†åˆ†åï¼Œå¯ä»¥å°†å…¶ä¸­çš„ä¸€åŠè½¬ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œä»¥å¹³è¡¡è´Ÿè½½ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§ <strong>æ ¹æ®èŠ‚ç‚¹æ•°å¢åŠ æ¥è¿›è¡Œåˆ†åŒº</strong> çš„æ–¹æ³•ï¼šæ¯ä¸ªèŠ‚ç‚¹ä¸Šæœ‰å›ºå®šçš„åˆ†åŒºæ•°ï¼Œå½“èŠ‚ç‚¹å¢åŠ æ—¶ï¼Œåˆ†åŒºå°†å˜å°ï¼Œæ–°å¢çš„èŠ‚ç‚¹ä¼šä»åŸæœ‰èŠ‚ç‚¹çš„åˆ†åŒºä¸­éšæœºè¿›è¡Œæ‹†åˆ†ï¼Œæœ€ç»ˆè¿™ä¸ªæ–°èŠ‚ç‚¹è·å¾—å…¬å¹³çš„è´Ÿè½½ä»½é¢ã€‚</p>
<p>åˆ†åŒºå†å¹³è¡¡å¯ä»¥ <strong>æ‰‹åŠ¨æ‰§è¡Œ</strong> ä¹Ÿå¯ä»¥ <strong>è‡ªåŠ¨æ‰§è¡Œ</strong>ã€‚è‡ªåŠ¨å†å¹³è¡¡æ¯”è¾ƒæ–¹ä¾¿ï¼Œå› ä¸ºä¸éœ€è¦äººå·¥ç»´æŠ¤ï¼Œä½†æ˜¯å®ƒçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä¸å¯é¢„æµ‹çš„ï¼šå†å¹³è¡¡æ—¶å°†å¤§é‡æ•°æ®é›†ä»ä¸€ä¸ªèŠ‚ç‚¹è½¬ç§»åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„è¿‡ç¨‹ä¸­å¯èƒ½ä¼šäº§ç”Ÿå¾ˆå¤§çš„ç½‘ç»œå¼€é”€ï¼Œè¿™ä¼šä½¿å¾—è¯¥æœåŠ¡å™¨å¯¹è¯·æ±‚å“åº”çš„æ€§èƒ½é™ä½ï¼Œå¯¹ç”¨æˆ·çš„ä½“éªŒå’Œç”Ÿäº§é€ æˆè´Ÿé¢å½±å“ã€‚æ‰€ä»¥å†å¹³è¡¡çš„è¿‡ç¨‹æœ‰äººå‚ä¸æ˜¯ä¸€ä»¶å¥½äº‹ï¼Œè¿™æ ·èƒ½é˜²æ­¢å‘ç”Ÿè¿ç»´é—®é¢˜ã€‚</p>
<h3 data-id="heading-7">5. è¯·æ±‚è·¯ç”±ï¼ˆæœåŠ¡å‘ç°ï¼‰</h3>
<p>å½“æˆ‘ä»¬å·²ç»å°†æ•°æ®è¿›è¡Œåˆ†åŒºåï¼Œå¦‚ä½•æ‰èƒ½çŸ¥é“ç”¨æˆ·æƒ³è¦çš„æ•°æ®åœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šï¼Ÿè¿™å¯ä»¥æ¦‚æ‹¬ä¸ºæ˜¯ä¸€ä¸ª <strong>æœåŠ¡å‘ç°</strong> çš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ä¸‰ä¸ªæ–¹æ¡ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b87192d8ea8407d9856ccf677af8cd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=TGxWKVi3aJfYUQlzntbqL1pVTZ0%3D" alt="æœåŠ¡å‘ç°.png" loading="lazy"/></p>
<ol>
<li>å…è®¸è®¿é—®æ‰€æœ‰çš„èŠ‚ç‚¹ï¼Œå¦‚æœç¬¬ä¸€ä¸ªè®¿é—®çš„èŠ‚ç‚¹æœ‰è¯¥é”®å€¼ï¼Œåˆ™å¤„ç†è¯¥è¯·æ±‚ï¼Œå¦åˆ™å°†è¯¥è¯·æ±‚è½¬å‘åˆ°é€‚å½“çš„èŠ‚ç‚¹ä¸Šï¼Œè¿™ä¸ªæ–¹æ³•é¿å…äº†ä½¿ç”¨æ³¨å†Œä¸­å¿ƒä¸­é—´ä»¶ï¼Œä½†æ˜¯å®ç°æ¯”è¾ƒå¤æ‚</li>
<li>ä½¿ç”¨åˆ†å¸ƒå¼çš„åè°ƒæœåŠ¡ï¼Œç”¨æˆ·å°†æ‰€æœ‰çš„è¯·æ±‚å‘é€åˆ°è·¯ç”±å±‚ï¼Œç”±è·¯ç”±å±‚å°†è¯¥è¯·æ±‚è½¬å‘åˆ°åˆé€‚çš„èŠ‚ç‚¹</li>
<li>è¦æ±‚ç”¨æˆ·ï¼ˆå®¢æˆ·ç«¯ï¼‰è‡ªå·±çŸ¥é“åˆ†åŒºå’ŒèŠ‚ç‚¹çš„åˆ†é…</li>
</ol>
<p>ä½†æ˜¯è¿™å…¶ä¸­è¿˜éšè—ç€ä¸€ä¸ªé—®é¢˜ï¼š<strong>ä½œå‡ºå†³ç­–çš„ç»„ä»¶ï¼ˆèŠ‚ç‚¹ä¹‹ä¸€ã€è·¯ç”±å±‚æˆ–å®¢æˆ·ç«¯ï¼‰æ˜¯å¦‚ä½•äº†è§£æ•°æ®åœ¨èŠ‚ç‚¹é—´çš„åˆ†é…å˜åŒ–çš„</strong>ï¼Ÿè¿™å°±éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„åè°ƒæœåŠ¡ï¼Œæ¯”å¦‚ä½¿ç”¨ zookeeper æ¥è·Ÿè¸ªå…ƒæ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07a0a953e36c490091340d0925843afb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359778&amp;x-signature=0d%2Fya2dm4G8LIQJscxC8jZjh8hA%3D" alt="zookeeperç®¡ç†è·¯ç”±å…ƒæ•°æ®.jpeg" loading="lazy"/></p>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šåœ¨ zookeeper ä¸­è¿›è¡Œæ³¨å†Œï¼Œzookeeper ä¸­ç»´æŠ¤æœ‰èŠ‚ç‚¹åˆ°å„ä¸ªåˆ†åŒºçš„å¯é æ˜ å°„ï¼Œè´Ÿè´£å†³ç­–çš„ç»„ä»¶åœ¨ zookeeper ä¸­è®¢é˜…è¿™ä¸ªæ¶ˆæ¯ã€‚å½“åˆ†åŒºåˆ†é…å‘ç”Ÿæ”¹å˜æ—¶ï¼Œzookeeper å°±ä¼šé€šçŸ¥è´Ÿè´£å†³ç­–çš„ç»„ä»¶æ›´æ–°è·¯ç”±ä¿¡æ¯ï¼Œä½¿å…¶ä¿æŒåœ¨æœ€æ–°çš„çŠ¶æ€ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ä¹Ÿå¯ä»¥åœ¨å„ä¸ªèŠ‚ç‚¹é—´é‡‡ç”¨ <strong>æµè¨€åè®®</strong> æ¥ä¼ æ’­é›†ç¾¤çŠ¶æ€çš„å˜åŒ–ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹éƒ½ç»´æŠ¤æœ‰æœ€æ–°çš„æ•°æ®è·¯ç”±æ–¹æ¡ˆï¼Œå½“å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œä¼šå°†å…¶è½¬å‘åˆ°åˆé€‚çš„åˆ†åŒºèŠ‚ç‚¹ä¸Šï¼ˆå¯¹åº”æœåŠ¡å‘ç°çš„æ–¹æ¡ˆä¸€ï¼‰ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®å‰‘é”‹ä»ç£¨ç ºå‡ºâ€”â€”é›¶å”®æ•°æ®åº“å†…æ ¸ï¼Œä¸ºå¤§ä¿ƒé“¸å‰‘ï¼]]></title>    <link>https://juejin.cn/post/7579427549471834158</link>    <guid>https://juejin.cn/post/7579427549471834158</guid>    <pubDate>2025-12-03T09:43:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579427549471834158" data-draft-id="7579451710302486554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®å‰‘é”‹ä»ç£¨ç ºå‡ºâ€”â€”é›¶å”®æ•°æ®åº“å†…æ ¸ï¼Œä¸ºå¤§ä¿ƒé“¸å‰‘ï¼"/> <meta itemprop="keywords" content="æ•°æ®åº“,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-03T09:43:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®å‰‘é”‹ä»ç£¨ç ºå‡ºâ€”â€”é›¶å”®æ•°æ®åº“å†…æ ¸ï¼Œä¸ºå¤§ä¿ƒé“¸å‰‘ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:43:35.000Z" title="Wed Dec 03 2025 09:43:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»25åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>ç™¸å¯ä¸ƒæœˆé£é›¨å¤§ä½œ</em></p>
<p><em>äº¬ä¸œé›¶å”®Â·è¢åšæ–‡</em></p>
<p><em>åƒµå§åŒä¹ä¸è‡ªå“€ï¼Œå°šæ€ä¸ºä¸œæˆè½®å°ã€‚</em></p>
<p><em>å¤œé˜‘å§å¬çŠç‘šé›¨ï¼Œé“é©¬å†…æ ¸å…¥æ¢¦æ¥ã€‚</em></p>
<p>ï»¿<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13c59c3cb53d4c5f8fa219972699b8d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359814&amp;x-signature=GlUOtsjvugAgnsd65OQfluDn8V0%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p><em><strong>å‰è¨€ç•¥é•¿ï¼Œåªå…³å¿ƒæŠ€æœ¯çš„åŒå­¦å¯ç›´æ¥è·³è¿‡çœ‹ç¬¬äºŒç« </strong></em></p>
<h2 data-id="heading-0"><strong>ä¸€ã€å‰è¨€ï¼šæŠ€æœ¯çš„åº•è‰²æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>è¿™ä¸ªé—®é¢˜åœ¨æŠ€æœ¯äººå¿ƒä¸­å…¶å®æ²¡æœ‰æ ‡å‡†ç­”æ¡ˆï¼Œæ¯ä¸ªäººéƒ½æœ‰æ¯ä¸ªäººçš„è§è§£ã€‚æ¶æ„å¸ˆçœ¼é‡Œå¤§æŠµæ˜¯é«˜å±‹å»ºç“´ï¼Œç»Ÿé¢†å…¨å±€ï¼›æŠ€æœ¯å¤§ç‰›çš„è§†è§’å¯èƒ½æ˜¯å‰–æ ¹æº¯æºï¼Œç²¾åˆ€ç»†ç¢ï¼›æ–°äººå°ç™½æˆ–è®¸æ›´å•çº¯ï¼Œæ— éå°±æ˜¯å­¦ä¹ è¿›æ­¥ï¼Œå¿«é€Ÿæˆé•¿ä¸ºå¤§ç‰›ä¹‹ç±»äº†ã€‚</p>
<p>ä½†åœ¨æˆ‘â€”â€”ä¸€ä¸ªäº¬ä¸œæ•°æ®åº“äººçš„çœ¼é‡Œï¼ŒæŠ€æœ¯çš„åº•è‰²æˆ–è®¸åº”è¯¥æ˜¯äº”å½©æ–‘æ–“çš„å§ã€‚</p>
<h4 data-id="heading-1"><strong>ç™½æ˜¯çº¯ç²¹çš„èµ·ç‚¹</strong></h4>
<p>ç»å¸¸å¬äººè¯´ï¼Œæ¯ä¸ªäººå‘±å‘±å åœ°é‚£ä¸€åˆ»ï¼Œéƒ½æ˜¯ä¸€å¼ ç™½çº¸ï¼Œçˆ¶æ¯åœ¨å…¶ä¸Šç€å¢¨ã€‚å¯¹äºæŠ€æœ¯äººæ¥è¯´åˆä½•å°ä¸æ˜¯å‘¢ï¼Ÿåˆå­¦ä¸€é—¨æŠ€æœ¯ï¼Œåˆå…¥ä¸€ä¸ªé¢†åŸŸï¼Œæ¯ä¸ªäººéƒ½æ˜¯ä¸€å¼ ç™½çº¸ï¼Œåœ¨è¿™å¼ ç™½çº¸ä¸Šæ˜¯éšæ„è‰ç¨¿æ¶‚é¸¦ï¼Œè¿˜æ˜¯è®¤çœŸå¸æ”¶ä¸æ–­è¿›æ­¥ï¼Œéƒ½å–å†³äºè‡ªå·±ã€‚</p>
<p>æ•°æ®åº“å†…æ ¸æŠ€æœ¯ï¼Œåœ¨ 2020 å¹´åˆï¼Œäºæˆ‘ä¸ªäººäºå†…æ ¸å›¢é˜Ÿäºäº¬ä¸œè€Œè¨€éƒ½æ˜¯ä¸€ä¸ªçº¯ç™½çš„èµ·ç‚¹ã€‚è‡ªæ­¤å¼€å§‹æ¢ç´¢æ•°æ®åº“å†…æ ¸çš„æ¯ä¸€è¡Œæºç ã€æ¯ä¸€ä¸ªæ¨¡å—ï¼Œç„¶åæ”»å…³ç ”ç©¶æ¯ä¸€ä¸ªæŠ€æœ¯éš¾ç‚¹ï¼Œå†è®¾è®¡å®ç°äº‘åŸç”Ÿçš„çŠç‘šæ•°æ®åº“ç›´åˆ°å…¶è½åœ°æ‰¿æ¥ä¸šåŠ¡ã€‚æˆ‘å’Œæˆ‘ä»¬å›¢é˜Ÿçš„å°ä¼™ä¼´éƒ½å¯ä»¥æ‹ç€èƒ¸è„¯è¯´ï¼Œæˆ‘ä»¬æ— æ„§äºäº¬ä¸œï¼Œæ— æ„§äºè¿™ä»½çº¯ç™½ã€‚</p>
<h4 data-id="heading-2"><strong>é’æ˜¯æœæ°”æ˜¯æˆé•¿</strong></h4>
<p>å†…æ ¸å›¢é˜Ÿæ¯ä¸€ä¸ªå°ä¼™ä¼´ï¼Œä¸è®ºæ˜¯ç¤¾æ‹›è¿˜æ˜¯æ ¡æ‹›ï¼Œéƒ½æ˜¯é‚£ä¹ˆæœæ°”è“¬å‹ƒï¼Œéƒ½å¯¹æ•°æ®åº“å†…æ ¸æŠ€æœ¯æ±‚çŸ¥è‹¥æ¸´ã€‚è…¾é¾™è®¤çœŸé’»ç ”æ¢ç´¢ï¼ŒæˆåŠŸæ‰“é€šäº†æ•°æ®åº“æµ‹è¯•ç”¨ä¾‹çº¿ä¸Šéƒ¨ç½²å’Œåˆå§‹çš„å†…æ ¸ç›‘æ§æ¡†æ¶ï¼›ç¦å“¥å°†åä¸ºçš„ä¼˜è‰¯ç¼–ç é£æ ¼å¸¦å…¥å›¢é˜Ÿå¹¶å½±å“äº†è®¸å¤šå°ä¼™ä¼´ï¼Œè¿˜åœ¨DDLæ¨¡å—é’»ç ”å¹¶é¢‡æœ‰é€ è¯£ï¼›æµ·é¹æ¢ç´¢å¹¶æ‰“é€šäº†å†…æ ¸ä¸JEDæ¥å£ï¼Œä¸ºé«˜å¯ç”¨ä»˜å‡ºè‰¯å¤šï¼›é‡‘è“¬åˆå…¥å›¢é˜Ÿï¼Œç”šè‡³è¿æŠ€æœ¯æ ˆéƒ½æ˜¯åˆå­¦ï¼ŒæŠ±ç€ä¸€æœ¬ç»å…¸çš„ã€Š<em>C++ Primer</em>ã€‹è¾¹å•ƒè¾¹ç ”ç©¶çŠç‘šæ•°æ®åº“å†…æ ¸æºç ï¼Œä½†ä¸å¦¨ç¢è¿›æ­¥é€Ÿåº¦æƒŠäººï¼Œæœ€ç»ˆèƒ½å¤Ÿç‹¬å½“ä¸€é¢ï¼›æµ·æ³¢æ”»å…³çš„ä¿®æ”¹ç¼“å†²å½±å­é¡µæŠ€æœ¯ä»¥åŠå…±äº«é›†ç¾¤æµ‹è¯•æ¡†æ¶è‡³ä»Šè¿˜åœ¨æŒç»­å¸¦æ¥ä»·å€¼ï¼›çŠå“¥å’Œé½å“¥æ›´ä¸ç”¨è¯´ï¼Œä¸€ä¸ªå°†å¤šå¹´ç§¯ç´¯çš„å¼€å‘ç»éªŒä¸çŠç‘šæ•°æ®åº“å†…æ ¸æ¨¡å—æ·±å…¥ç»“åˆï¼Œåšå‡ºäº†è¯¸å¤šè´¡çŒ®ï¼›å¦ä¸€ä¸ªä¸ä½†å¯¹å…ƒæ•°æ®é”ç ”ç©¶é€å½»ï¼Œæ›´æ˜¯ç‹¬è‡ªä¸€äººæ‰¿æ‹…äº†æ•´ä¸ªçŠç‘šæ•°æ®åº“çš„å·¥ç¨‹åŒ–è½åœ°ä¸é«˜å¯ç”¨åŠè¿ç»´å·¥å…·å»ºè®¾ã€‚ä½œä¸ºæ ¡æ‹›ç”Ÿçš„å½­å‡¯å’Œå®‡æ­†ï¼Œæ›´æ˜¯åœ¨çŸ­çŸ­çš„æ—¶é—´å†…ï¼Œè¿…é€Ÿæˆé•¿ï¼Œæ·±å…¥ç ”ç©¶SQLè¯æ³•å’Œè¯­æ³•è§£æï¼Œä»¥åŠä¸»ä»å¤åˆ¶æ¨¡å—ï¼Œå¹¶ä¸ºæ–°äº§å“çš„é“¸å‰‘åšå‡ºäº†çªå‡ºçš„è´¡çŒ®ã€‚ç°åœ¨ï¼Œè¶Šæ¥è¶Šå¤šçš„æœæ°”è“¬å‹ƒçš„æ–°ä¼™ä¼´é™†ç»­åŠ å…¥äº†æˆ‘ä»¬å›¢é˜Ÿï¼Œå¤§å®¶çš„å¿«é€Ÿæˆé•¿éƒ½æœ‰ç›®å…±ç¹ã€‚</p>
<p>å¤§å®¶éƒ½ä»å½“åˆçš„é’æ¶©å°ç™½ï¼Œæˆé•¿æˆäº†å„ä¸ªå†…æ ¸é¢†åŸŸçš„ä¸“å®¶ï¼Œæˆ–è€…ç‹¬å½“ä¸€é¢çš„äººæ‰ã€‚æ‰€ä»¥é’è¿™ä¸ªåº•è‰²ï¼Œä¸€å®šæ˜¯æŠ€æœ¯äººåŠªåŠ›æˆé•¿ï¼Œæ‹¼æå‘ä¸Šçš„é¢œè‰²å§ã€‚</p>
<h4 data-id="heading-3"><strong>é»„æ˜¯æœ€åçš„æ‰§ç€</strong></h4>
<p>åœ¨çœ¼çœ‹äº¬ä¸œæ•°æ®åº“å†…æ ¸å›¢é˜Ÿè’¸è’¸æ—¥ä¸Šï¼Œå¤§å®¶åœ¨å†…æ ¸é¢†åŸŸæ—¥æ¸æ·±è€•çš„æ—¶å€™ï¼Œä¸å‡ºæ„å¤–çš„è¿˜æ˜¯å‡ºæ„å¤–äº†â€¦â€¦</p>
<p>é›†å›¢å±‚é¢çš„æ¶æ„è°ƒæ•´ï¼Œè®©é›¶å”®å’Œç§‘æŠ€çš„æŠ€æœ¯å›¢é˜Ÿä¸å¾—ä¸èåˆæˆä¸€ä¸ªå›¢é˜Ÿäº†ï¼Œæˆ‘æƒ³åˆè¡·è‚¯å®šæ˜¯å¥½çš„ï¼Œå¤§å®¶ä¹Ÿéƒ½ä¸ºä¹‹åŠªåŠ›è¿‡ã€‚ä½†å‡ºäºç§ç§ä¸ä¾¿æ˜è¯´çš„åŸå› ï¼Œæ•°æ®åº“å†…æ ¸å›¢é˜Ÿæˆäº†å¤§çš„æ¶æ„é½¿è½®ç£¨åˆä¸‹çš„é‚£ä¸ªä»£ä»·ï¼Œå›¢é˜ŸåŠ¨è¡ï¼Œæœªæ¥ä¸æ˜ï¼Œæ— å¥ˆä¹‹ä¸‹è®¸å¤šåˆéœ²é”‹èŠ’çš„ä¼˜ç§€å°ä¼™ä¼´ä¸å¾—ä¸åšå‡ºå„è‡ªçš„é€‰æ‹©ã€‚å°±åœ¨æˆ‘ä»¥ä¸ºäº¬ä¸œæ•°æ®åº“å†…æ ¸å°±è¦é»„äº†çš„æ—¶å€™ï¼Œä¸å¹¸ä¸­çš„ä¸‡å¹¸ï¼Œåœ¨é›¶å”®ä¼—å¤šå¤§ä½¬åŒäº‹çš„å…¨åŠ›ä¿æŠ¤ä¸‹ï¼Œå†…æ ¸çš„ç§å­ç•™äº†ä¸‹æ¥ï¼Œé™å¾…èŠ±å¼€ã€‚è€Œå±äºæŠ€æœ¯äººçš„è¿™ä»½åšå®ˆï¼Œæˆ–è®¸å°±åƒé¹…åµé»„ä¸€æ ·ï¼Œç­‰å¾…ç ´å£³é‡ç”Ÿçš„é‚£ä¸€åˆ»å§ã€‚</p>
<h4 data-id="heading-4"><strong>èµ¤æ˜¯å¯¹æŠ€æœ¯çš„çƒ­å¿±</strong></h4>
<p>å¦‚æœå¸Œæœ›æœ‰é¢œè‰²ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯çº¢è‰²ï¼</p>
<p>å°±åƒèµ¤è‰²å½“å¹´å§è–ªå°èƒ†ï¼Œè‰°è‹¦å¥‹æ–—ï¼Œçˆ¬é›ªå±±è¿‡è‰åœ°ï¼ŒæŠŠå¸Œæœ›å¸¦ç»™ç¥å·å¤§åœ°ä¸€æ ·ã€‚å±äºäº¬ä¸œæŠ€æœ¯çš„èµ¤è‰²ï¼Œä¹Ÿåœ¨äº¬ä¸œæŠ€æœ¯ä¸­å¿ƒè¿æ¥æ–°çš„å¤§å®¶é•¿åéšä¹‹åˆ°æ¥ã€‚æˆ‘ä¸çŸ¥é“å…¶ä»–å›¢é˜Ÿæ˜¯ä¸æ˜¯æœ‰ç±»ä¼¼çš„æ„Ÿå—ï¼Œä½†æ•°æ®åº“å›¢é˜Ÿåœ¨å›å½’é›¶å”®ä»¥åï¼Œå¤§å®¶çš„å¿ƒæ°”ç¥éƒ½ä¸ä¸€æ ·äº†ï¼Œå¯¹æŠ€æœ¯é‚£é¢—ç«çƒ­çš„å¿ƒåˆé‡æ–°ç‡ƒäº†èµ·æ¥ã€‚æ•°æ®åº“å›¢é˜Ÿä¹Ÿè¿æ¥äº†æ–°leaderï¼šä¸€ä½åœ¨æ•°æ®åº“é¢†åŸŸæœ‰ç€äºŒåå¹´ç»éªŒçš„è¶…çº§å¤§ä½¬å’Œä¸€ä½åœ¨æ•°æ®åº“å†…æ ¸é¢†åŸŸæœ‰åå¤šå¹´ç»éªŒçš„èµ„æ·±å¤§ä½¬ã€‚åœ¨ä¸¤ä½å¤§ä½¬çš„å¸¦é¢†ä¸‹ï¼Œæˆ‘ä»¬å¼€å§‹æœç€æ–°çš„æ–¹å‘å‰è¿›ã€‚</p>
<p>åŒæ—¶ï¼Œæ•°æ®åº“å†…æ ¸å›¢é˜Ÿä¹Ÿå¾ˆå¿«è¿æ¥äº†è¶Šæ¥è¶Šå¤šçš„æ–°é²œè¡€æ¶²ï¼šæ¥è‡ªå…¶ä»–å¤§å‚çš„æ—åº·ã€æ­£èŒ‚ã€å¼ æ‰¬ï¼Œå°†ä»–ä»¬æ‰€æŒæ¡çš„æ•°æ®åº“å†…æ ¸ä»¥åŠå·¥ç¨‹åŒ–ç»éªŒå¼•å…¥ï¼Œä¸ºæˆ‘ä»¬å†…æ ¸çš„ç ”å‘è£…ä¸Šäº†åŠ é€Ÿå™¨ï¼›æ¥è‡ªå„å¤§åç‰Œé«˜æ ¡çš„æ ¡æ‹›ç”Ÿä»¥åŠå®ä¹ ç”Ÿæ™“å†°ã€æ±Ÿæ˜Šã€ä¸€è´¤ã€ç¥–æ‰ç­‰ç­‰ï¼Œä¹Ÿéƒ½å¿«é€Ÿå­¦ä¹ è¿…é€Ÿæˆé•¿ï¼Œä»¥æœ€é¥±æ»¡çš„çƒ­æƒ…èå…¥æˆ‘ä»¬å›¢é˜Ÿå¹¶åšå‡ºäº†ç›¸åº”çš„è´¡çŒ®ã€‚</p>
<p>å¤§å®¶éƒ½é¥±å«èµ¤è¯šï¼Œæºæ‰‹å¼€å§‹å‘æœªæ¥è¿›å‘ï¼</p>
<h4 data-id="heading-5"><strong>é»‘æ˜¯äº”å½©æ–‘æ–“çš„æœªæ¥</strong></h4>
<p>å§‹äºç™½ï¼Œç»ˆäºé»‘ã€‚å°±åƒå¤ªæé˜´é˜³é±¼ä¸€æ ·ï¼Œç”Ÿç”Ÿä¸æ¯ï¼Œå‘¨è€Œå¤å§‹ã€‚æŠ€æœ¯ä¹Ÿä¸€æ ·ï¼</p>
<p>è‡ªç„¶ç•Œå½“æ‰€æœ‰çš„é¢œè‰²æ··åœ¨ä¸€èµ·åï¼Œåªæœ‰ä¸€ä¸ªé¢œè‰²â€”â€”é»‘ã€‚æ•°æ®åº“å†…æ ¸çš„å›¢é˜Ÿä¹Ÿåœ¨æ²‰æ·€å’ŒæŒ«æŠ˜ä¸­æ›´åŠ å¼ºå¤§ï¼Œéšç€ä¸æ–­è¡¥å……æ–°é²œçš„è¡€æ¶²ï¼Œä»å¸‚åœºä¸Šå¸å¼•æ›´å¤šä¼˜ç§€çš„æ•°æ®åº“å†…æ ¸äººæ‰ï¼Œå½“æ‰€æœ‰æŠ€æœ¯çš„åº•è‰²æ··åœ¨ä¸€èµ·åï¼Œæ‰€æœ‰çš„äº”å½©æ–‘æ–“ï¼Œæ‰€æœ‰çš„åˆå¿ƒã€æˆé•¿ã€åšå®ˆã€å¸Œæœ›èä¸ºä¸€ä½“åï¼Œæ‰€æœ‰çš„ä¸åŒé¢†åŸŸçš„äººæ‰é½å¿ƒååŠ›å…±æ¸¡éš¾å…³åï¼Œé‚£ç»“åˆåœ¨ä¸€èµ·çš„åŠ›é‡ï¼Œå…¶å®å°±åªå‰©ä¸‹æœªæ¥é‚£æ— é™çš„å¯èƒ½â€”â€”äº”å½©æ–‘æ–“çš„é»‘ã€‚å†…æ ¸æŠ€æœ¯çš„æ·±æ¸Šä¹Ÿå¦‚é»‘æ´èˆ¬ï¼Œæ·±ä¸è§åº•ï¼Œç­‰å¾…æˆ‘ä»¬å»æ¢ç´¢ã€‚ä½†æˆ‘ç›¸ä¿¡ï¼Œåªè¦æˆ‘ä»¬ç§‰æŒæŠ€æœ¯äººçš„åº•è‰²ï¼Œå°±ä¸€å®šå¯ä»¥è¾¾åˆ°é‚£ä¸ªå½¼å²¸ï¼</p>
<h2 data-id="heading-6"><strong>äºŒã€æ­£ç¯‡ï¼šäº”å½©ç†”ç‚‰ï¼Œé“¸å‰‘ï¼</strong></h2>
<p>æ­£ç¯‡å¼€å§‹ï¼</p>
<p>æŠ±æ­‰å¤§å®¶ï¼Œå‰é¢æ‰¯äº†è¿™ä¹ˆå¤šå…¶å®åªæ˜¯å‰è¨€ã€‚ä½†æˆ‘åˆä¸æƒ³åƒä»¥å‰å†™å‰è¨€é‚£æ ·ï¼Œåªæ˜¯ç®€å•çš„äº¤ä»£ä¸€ä¸‹èƒŒæ™¯ã€‚èŠ±äº†äº”èŠ‚çš„ç¬”å¢¨ä»‹ç»æˆ‘å¿ƒä¸­çš„æŠ€æœ¯åº•è‰²ï¼Œåªå¸Œæœ›å¤§å®¶èƒ½æ‡‚ä¸€ç‚¹â€”â€”æˆ‘ä»¬ä¼šä»¥æœ€å¤§çš„çƒ­æƒ…å’Œæœ€å¼ºçš„æŠ€æœ¯ä¸ºäº¬ä¸œæ‰“é€ åŸºç¡€æ•°æ®åº“äº§å“ï¼Œä¸ºå¤§å®¶å¸¦æ¥æ›´ä¼˜è´¨çš„æ•°æ®åº“æœåŠ¡ã€‚</p>
<h4 data-id="heading-7"><strong>åˆ°åº•é“¸äº†ä»€ä¹ˆå‰‘ï¼Ÿ</strong></h4>
<p>å±äºæˆ‘ä»¬äº¬ä¸œç”µå•†ç‰ˆæœ¬çš„è‡ªç ”æ•°æ®åº“å†…æ ¸â€”â€”DongSQLï¼</p>
<p>äº”å¹´å‰ï¼Œæ•°æ®åº“å†…æ ¸å›¢é˜Ÿç«‹é¡¹ç›´æ¥ç„å‡†äº†æ–°çš„æ•°æ®åº“å½¢æ€â€”â€”äº‘åŸç”Ÿå…³ç³»å‹æ•°æ®åº“ï¼Œä¹Ÿå°±æ˜¯å­˜ç®—åˆ†ç¦»å…±äº«å­˜å‚¨æ¶æ„çš„çŠç‘šæ•°æ®åº“(shared storage)ï¼Œè¿™ä¸€ç‰ˆæŠ€æœ¯éš¾ç‚¹ä¸»è¦æ˜¯åœ¨å…±äº«å­˜å‚¨çš„æ¶æ„ä»¥åŠäº‘åŸç”Ÿçš„æ•°æ®ä¸€è‡´æ€§ï¼Œå…¶äº§å“ä»·å€¼ä¸»è¦æ˜¯åœ¨èŠ‚çº¦æ•°æ®åº“æˆæœ¬ä»¥åŠæè‡´çš„äº‘ä¸Šèµ„æºä¼¸ç¼©æ€§ç­‰ã€‚ä½†ç”±äºä¸å­˜é‡JEDåº“(shared nothing)é‡‡ç”¨äº†ä¸ä¸€æ ·çš„æŠ€æœ¯æ¶æ„ï¼Œæ‰€ä»¥é¢ä¸´ä¸€ä¸ªç°å®é—®é¢˜â€”â€”å­˜é‡ç”¨æˆ·ç‰ˆæœ¬æ— æ³•å¹³æ»‘å‡çº§ã€‚</p>
<p>ç”¨è¿‡æˆ–è€…äº†è§£æ•°æ®åº“çš„äººéƒ½çŸ¥é“ï¼Œæœ‰çš„æ—¶å€™ä¸æ˜¯å¤§å®¶ä¸æƒ³ä½¿ç”¨æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæ›´å¼ºçš„æ€§èƒ½ï¼Œæ›´ä¼˜ç§€çš„åŠŸèƒ½ï¼Œè€Œæ˜¯æ•°æ®åº“æœ¬èº«å¤ªåŸºç¡€å¤ªé‡è¦äº†ï¼Œå¦‚æœä¸šåŠ¡ç³»ç»Ÿå·²ç»å»ºè®¾å¾ˆå¤šå¹´ï¼Œä¸æ•°æ®åº“ç»‘å®šå¤ªæ·±çš„è¯ï¼Œæ›´å¤šè¿˜æ˜¯æ±‚ç¨³ä¸ºä¸»ï¼Œèƒ½ä¸åŠ¨åˆ™ä¸åŠ¨ã€‚è¿™ä¸æ˜¯äº¬ä¸œç‹¬æœ‰çš„æƒ…å†µï¼Œå¯ä»¥è¯´æ•´ä¸ªè¡Œä¸šçš†æ˜¯å¦‚æ­¤ï¼Œè¿™å«æŠ€æœ¯æƒ¯æ€§ã€‚æ­£æ˜¯å› ä¸ºé‡‡ç”¨äº†æ–°çš„æŠ€æœ¯æ¶æ„ï¼Œå¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼šå­˜é‡ä¸šåŠ¡å¦‚æœè¦ä½¿ç”¨å¿…é¡»è¿›è¡Œæ•°æ®åº“çš„è¿ç§»ã€‚å°±è¿™ä¸€ä¸ªåŸå› ï¼Œå¾ˆå¤šä¸šåŠ¡å°±æœ›è€Œå´æ­¥ã€‚</p>
<p>æ­£æ˜¯ç”±äºè¿™ä¸ªåŸå› ï¼Œåœ¨æ–°leaderå¸¦é¢†æˆ‘ä»¬å›¢é˜Ÿä»¥åï¼ŒåŸºäºä¸°å¯Œçš„æ•°æ®åº“ç»éªŒï¼Œæ•é”åœ°å¯Ÿè§‰åˆ°äº¬ä¸œæ•´ä¸ªæ•°æ®åº“çš„åŸºæœ¬ç›˜å…¶å®æ˜¯å­˜é‡çš„æ•°æ®åº“ï¼Œè§£å†³å­˜é‡æ•°æ®åº“ç”¨æˆ·çš„é—®é¢˜æ‰èƒ½å¸¦æ¥æ›´å¤§çš„ä»·å€¼ã€‚å†ä¼˜ç§€çš„äº§å“ï¼Œå¦‚æœæ²¡äººç”¨ä¸€æ ·ç™½è´¹åŠ›æ°”ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åšçš„æ˜¯ï¼Œä¸€ä¸ªå®Œå…¨é€‚é…å­˜é‡æ¶æ„çš„æ•°æ®åº“å†…æ ¸ï¼Œä¸å¼•å…¥æ›´å¤æ‚çš„æ¶æ„å˜æ›´å’Œè¿‡å¤šçš„è®¾è®¡ï¼Œåªåœ¨å…¶åŸºç¡€ä¸Šå¯¹æ•°æ®åº“å†…æ ¸æ€§èƒ½è¿›è¡Œä¼˜åŒ–ã€å¯¹é…å¥—èƒ½åŠ›è¿›è¡Œæå‡ã€å¯¹é›¶å”®ç”µå•†åœºæ™¯è¿›è¡Œé’ˆå¯¹æ€§æ‰©å±•ï¼Œå®Œç¾æ”¯æŒJEDä»¥åŠDongDALï¼Œç§‰æŒç¨³å®šæ€§å’Œå…¼å®¹æ€§ä¸ºå‰æçš„åŸºç¡€ä¸Šï¼Œè®©äº¬ä¸œçš„æ•°æ®åº“å†…æ ¸æ›´å¥½ç”¨ï¼Œæ›´å¼ºå¤§ï¼</p>
<h4 data-id="heading-8"><strong>ç”µå•†åœºæ™¯ä¸‹æ•°æ®åº“ç—›ç‚¹çš„è§£å†³ä¹‹é“</strong></h4>
<p>ç”µå•†åœºæ™¯çš„æ•°æ®åº“éœ€æ±‚å…¶å®æ˜¯ç”¨æˆ·æœ€è¿«åˆ‡çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨é¦–é€‰å¼€åˆ€æ–¹å‘æ—¶ï¼Œæ²¡æœ‰é€‰æ‹©å¼•å…¥èŠ±é‡Œèƒ¡å“¨é«˜å¤§ä¸Šçš„åŠŸèƒ½ç­‰è§’åº¦ã€‚è€Œæ˜¯ä»ç”¨æˆ·ä¸­æ¥ï¼Œå›åˆ°ç”¨æˆ·ä¸­å»ï¼Œæ·±å…¥åˆ†æç›®å‰çº¿ä¸Šç”¨æˆ·æœ€å¸¸è§çš„é—®é¢˜ï¼Œä»¥åŠå¤§ä¿ƒæœ€å¸¸è§çš„æ•…éšœåœºæ™¯ï¼Œé’ˆå¯¹æ€§çš„å¼•å…¥äº†å†…æ ¸å±‚æ–°çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h5 data-id="heading-9"><strong>é—®é¢˜ä¸€ï¼šâ€œè¿‡è½½â€ å¤§ä¿ƒæ¿€å¢çš„æµé‡ï¼Œæˆ–è€…è¶…æ—¶SQLä¸æ–­é‡è¯•ç›´æ¥æŠŠæ•°æ®åº“CPUæ‰“æ»¡ç”šè‡³æ‰“æŒ‚</strong></h5>
<p>ï»¿</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4e6426f6b5543c099a863554b85fdc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359814&amp;x-signature=rkofY9xbAv6DnOdnCwI0I7%2BWyVw%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ï»¿<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21e949eb52e443dfba30411f1adcb7c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359814&amp;x-signature=%2B6yRk1hZiqzc%2FeyE97Q6aU5L%2Bg0%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>è¿™ç§åœºæ™¯çœŸçš„éå¸¸å¸¸è§ï¼Œç”šè‡³å‰æ®µæ—¶é—´è¿˜æœ‰ä¸€ä¸ªç™½è™æ•…éšœå°±æ˜¯ç±»ä¼¼çš„åŸå› ã€‚ä¸šåŠ¡ç ”å‘åœ¨è®¾è®¡åŠŸèƒ½çš„æ—¶å€™ï¼Œå…¶å®æ˜¯æ— æ³•é¢„çŸ¥çº¿ä¸Šç”Ÿäº§ç¯å¢ƒçœŸå®çš„æµé‡çš„ï¼Œæˆ–è®¸å¯ä»¥è®¾è®¡åº”ç”¨ä¾§é™æµï¼Œä¹Ÿæˆ–è®¸å¯ä»¥åŠ ç¼“å­˜æŠ—é‡ï¼Œä½†é™æµä¸æ˜¯æ¯ä¸ªç³»ç»Ÿéƒ½æœ‰ï¼Œå³ä½¿æœ‰ä¹Ÿå¯èƒ½å­˜åœ¨ç–æ¼ï¼Œç¼“å­˜å¦‚æœè¢«å‡»ç©¿é‚£å¸¦ç»™æ•°æ®åº“çš„æµé‡æ›´æ˜¯æš´å‡»ã€‚æœ‰çš„æ—¶å€™ç”šè‡³ä¸æ˜¯çœŸå®æš´å¢çš„æµé‡ï¼Œè€Œåªæ˜¯è¶…æ—¶æœºåˆ¶çš„è´Ÿåé¦ˆï¼Œå¤±è´¥çš„ä¸æ–­é‡è¯•å°±å¸¦æ¥äº†è¶…å‡ºé¢„æœŸçš„æ•°æ®åº“è¯·æ±‚ã€‚</p>
<p>å½“è¯·æ±‚æµé‡çªç„¶æš´æ¶¨æ—¶æˆ–è€…çªå‘çš„æ…¢sqlå ç”¨å¤§é‡èµ„æºæ—¶ï¼Œå®ƒä¼šåƒä¸€ä¸ªè¢«ç¬é—´æ¶Œå…¥äººç¾¤æŒ¤å®çš„æœåŠ¡å°ï¼šæ¯ä¸ªæ–°è¿æ¥éƒ½éœ€è¦æ•°æ®åº“åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥å¤„ç†ï¼Œå¤§é‡çº¿ç¨‹çš„åˆ›å»ºã€ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œç»´æŒæœ¬èº«å°±ä¼šåƒæ‰å¯è§‚çš„å†…å­˜å’ŒCPUï¼›æ›´é‡è¦çš„æ˜¯ï¼Œæ¯ä¸ªæŸ¥è¯¢è¿›æ¥ï¼Œå†…æ ¸éƒ½è¦ç–¯ç‹‚å·¥ä½œâ€”â€”è§£æå¤æ‚çš„SQLè¯­å¥ã€åœ¨æˆåƒä¸Šä¸‡æ¡ç´¢å¼•æ¡ç›®ä¸­æŸ¥æ‰¾è·¯å¾„ã€æ‹¼å‡‘å…³è”å¤šå¼ è¡¨çš„æ•°æ®ã€è¿›è¡Œæ’åºåˆ†ç»„è®¡ç®—ã€ç®¡ç†äº‹åŠ¡ä¿è¯ä¸€è‡´æ€§ï¼ˆè¿™æ¶‰åŠåˆ°é¢‘ç¹çš„åŠ é”è§£é”ï¼Œé«˜å¹¶å‘æ—¶ææ˜“å µå¡æ’é˜Ÿï¼‰ã€è¿˜è¦ä¸æ–­ä»ç£ç›˜è¯»å–æ•°æ®æˆ–æŠŠæ”¹åŠ¨å†™å›å»ã€‚æ‰€æœ‰è¿™äº›æ“ä½œéƒ½æ˜¯æåº¦æ¶ˆè€—CPUç®—åŠ›çš„å¯†é›†è®¡ç®—ã€‚å½“æ¯ç§’æ¶Œå…¥çš„è¯·æ±‚è¿œè¶…CPUèƒ½å¤„ç†çš„é€Ÿåº¦æ—¶ï¼ŒCPUå°±ä¼šè¢«å®Œå…¨å æ»¡ï¼Œæ‰€æœ‰æŸ¥è¯¢éƒ½æŒ¤åœ¨ä¸€èµ·æ’é˜Ÿç­‰å¾…è®¡ç®—èµ„æºã€‚ä¸æ­¤åŒæ—¶ï¼Œé«˜å¹¶å‘ä¸‹é”å†²çªå‰§å¢ï¼Œå¤§é‡çº¿ç¨‹å› ç­‰å¾…é”è€Œé˜»å¡å´ä¸é‡Šæ”¾èµ„æºï¼›å†…å­˜å¯èƒ½è¢«ä¸´æ—¶è¡¨ã€æ’åºç¼“å­˜å¡çˆ†ï¼›ä¸¥é‡æ—¶ç£ç›˜IOä¹Ÿè·Ÿä¸ä¸Šã€‚æœ€ç»ˆï¼ŒCPUè¢«å½»åº•è€—å°½ï¼Œæ–°è¿æ¥æ— æ³•å»ºç«‹ï¼Œå·²æœ‰æŸ¥è¯¢å®Œå…¨å¡æ­»ï¼Œæ•´ä¸ªæ•°æ®åº“è¿›ç¨‹å¤±å»å“åº”ï¼Œå°±åƒè¢«â€œæ‰“æŒ‚â€äº†ä¸€æ ·ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯æ‰€æœ‰å…³é”®èµ„æºï¼ˆCPUã€å†…å­˜ã€IOã€è¿æ¥ï¼‰åœ¨ç¬é—´æ´ªå³°ä¸‹è¢«å½»åº•æ¦¨å¹²å¯¼è‡´çš„ç³»ç»Ÿæ€§å´©æºƒã€‚</p>
<p>åŸå› å¾ˆæ¸…æ¥šï¼Œè§£å†³æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå‰é¢ä¹Ÿæåˆ°äº†ï¼Œé™æµå³å¯ï¼Œå¯å®é™…ç”Ÿäº§ç¯å¢ƒæ“ä½œèµ·æ¥è¿˜æ˜¯ä¼šå‡ºç°è¯¸å¤šå›°éš¾ã€‚</p>
<p>ä¸šåŠ¡å±‚è‡ªè¡Œé™æµé¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜åœ¨äºå…¶â€œç²—æ”¾â€å’Œâ€œæ»åâ€ã€‚å®ƒé€šå¸¸åªèƒ½åŸºäºç®€å•çš„è¯·æ±‚é¢‘ç‡æˆ–ç”¨æˆ·ç»´åº¦ï¼ˆå¦‚QPSï¼‰è¿›è¡Œæ‹¦æˆªï¼Œæ— æ³•æ´å¯Ÿæ•°æ®åº“å†…éƒ¨çœŸå®çš„ç“¶é¢ˆæ‰€åœ¨ï¼ˆæ¯”å¦‚æ˜¯åœ¨CPUã€å†…å­˜ã€ç£ç›˜IOè¿˜æ˜¯é”å†²çªï¼‰ã€‚è¿™ææ˜“å¯¼è‡´â€œè¯¯æ€â€â€”â€”æ ¸å¿ƒçš„é‡èµ„æºæ¶ˆè€—å‹SQLå¯èƒ½æœªè¢«æ‹¦ä½ï¼Œåè€Œå¤§é‡é«˜é¢‘ä½†è½»é‡çš„è¯·æ±‚è¢«é™æµï¼Œç‰ºç‰²äº†ä¸šåŠ¡å¯ç”¨æ€§å´æœªèƒ½çœŸæ­£ç¼“è§£æ•°æ®åº“å‹åŠ›ã€‚åŒæ—¶ï¼Œåœ¨åˆ†å¸ƒå¼å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œåè°ƒå„ä¸ªæœåŠ¡æ¨¡å—ç»Ÿä¸€ã€å®æ—¶åœ°å®æ–½å¹¶è°ƒæ•´é™æµç­–ç•¥å¼‚å¸¸å›°éš¾ï¼Œå¾ˆå®¹æ˜“å‡ºç°é™æµä¸ä¸€è‡´æˆ–å“åº”è¿Ÿç¼“ï¼Œå½“ä¸šåŠ¡å±‚æ„ŸçŸ¥åˆ°æ•°æ®åº“å“åº”å˜æ…¢æˆ–æŠ¥é”™å†è§¦å‘é™æµæ—¶ï¼Œå¾€å¾€å·²ç»é”™è¿‡äº†æœ€ä½³å¹²é¢„æ—¶æœºï¼Œé›ªå´©å¯èƒ½å·²ç»å‘ç”Ÿã€‚</p>
<p>ç›®å‰çš„å®é™…æ“ä½œå¾€å¾€æ˜¯é«˜å¯ç”¨ç¨‹åºæˆ–è€…DBAä¾é HAæœºåˆ¶è¿›è¡Œä¸»å¤‡åˆ‡æ¢æ¥åº”å¯¹è¿‡è½½ã€‚åˆ‡æ¢è¿‡ç¨‹æœ¬èº«å¿…ç„¶å¯¼è‡´æ•°ç§’åˆ°æ•°åç§’çš„æœåŠ¡ä¸­æ–­ï¼ˆè¿æ¥é—ªæ–­ã€çŸ­æš‚åªè¯»ï¼‰ï¼Œå¯¹è¿ç»­æ€§è¦æ±‚é«˜çš„ä¸šåŠ¡ä¼šé€ æˆç›´æ¥å½±å“ã€‚æ›´é‡è¦çš„æ˜¯æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼šä¸»åº“åœ¨æ•…éšœæˆ–è¿‡è½½ç¬é—´å¯èƒ½å­˜åœ¨æœªåŒæ­¥åˆ°å¤‡åº“çš„äº‹åŠ¡æ•°æ®ï¼Œåˆ‡æ¢åè¿™äº›æ•°æ®å¯èƒ½æ°¸ä¹…ä¸¢å¤±ï¼ˆå¼‚æ­¥å¤åˆ¶ä¸‹ï¼‰ï¼Œå³ä½¿ä½¿ç”¨åŠåŒæ­¥å¤åˆ¶ä¹Ÿå¯èƒ½å› ç½‘ç»œé—®é¢˜é˜»å¡å†™å…¥æˆ–é€€åŒ–ä¸ºå¼‚æ­¥ã€‚å†å¹´å¤§ä¿ƒçº¿ä¸Šç”Ÿäº§ç¯å¢ƒä¸å°‘æ•…éšœç”šè‡³æ˜¯å‘ç”Ÿåœ¨åˆ‡æ¢æ“ä½œä¹‹å(æ™®é€šRDSé›†ç¾¤ä»¥åŠä½ç‰ˆæœ¬vitessé›†ç¾¤é£é™©å°¤å…¶æ˜¾è‘—)ã€‚</p>
<h5 data-id="heading-10"><strong>è§£ï¼šSQLè‡ªæç¤ºå®ç°ç²¾å‡†é™æµ</strong></h5>
<p>åŸºäºä»¥ä¸Šç—›ç‚¹ï¼Œä¸å°‘ç”¨æˆ·æå‡ºï¼Œå¦‚æœå¯ä»¥å®ç°ç²¾å‡†é™æµå°±å¥½äº†ï¼Œæ—¢èƒ½åœ¨ä¸šåŠ¡æ ¹æ®æµé‡é¢„æµ‹çš„åŸºç¡€ä¸Šé¢„é˜²æ€§é™æµï¼Œåˆèƒ½åœ¨è¿‡è½½å‘ç”Ÿåæ ¹æ®ç®€å•æ’æŸ¥çš„ç»“æœå®šå‘é™æµã€‚æœ‰æ±‚å¿…åº”â€”â€”Hinté™æµæ–¹æ¡ˆæ¨ªç©ºå‡ºä¸–ï¼</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span>Â æ ¹æ®ç‰¹å®šÂ <span class="hljs-keyword">SQL</span>Â æŒ‡çº¹è¿›è¡Œé™æµÂ 
<span class="hljs-keyword">update</span><span class="hljs-comment">/*+Â ccl_queue_digest(INT&lt;å½“å‰è¯­å¥çš„å¹¶è¡Œæ•°&gt;)Â */</span>Â tÂ <span class="hljs-keyword">set</span>Â col1Â <span class="hljs-operator">=</span>Â col1<span class="hljs-operator">+</span><span class="hljs-number">1</span>Â <span class="hljs-keyword">where</span>Â <span class="hljs-number">1</span><span class="hljs-operator">=</span>id;Â 
<span class="hljs-keyword">update</span><span class="hljs-comment">/*+Â ccl_queue_digest()Â */</span>Â tÂ <span class="hljs-keyword">set</span>Â col1Â <span class="hljs-operator">=</span>Â col1<span class="hljs-operator">+</span><span class="hljs-number">1</span>Â <span class="hljs-keyword">where</span>Â <span class="hljs-number">1</span><span class="hljs-operator">=</span>id;
</code></pre>
<p>æ•°æ®åº“å†…æ ¸è‡ªèº«æ”¯æŒé™æµçš„æ ¸å¿ƒä¼˜åŠ¿æ˜¯ï¼Œæˆ‘ä»¬èƒ½æ·±å…¥åˆ°SQLæ‰§è¡Œå±‚ï¼Œæ ¹æ®ç”¨æˆ·æŒ‡å®šè§„åˆ™ï¼ˆå¦‚åŒ¹é…ç‰¹å®šSQLæŒ‡çº¹ã€æˆ–è€…SQLè¯­å¥å…¨æ–‡ç­‰ä¸åŒæ¨¡å¼è§„åˆ™ï¼‰å®æ—¶è¯†åˆ«å¹¶ä¼˜å…ˆæŠ‘åˆ¶é‚£äº›çœŸæ­£â€œåƒæ‰â€å¤§é‡èµ„æºçš„â€œç½ªé­ç¥¸é¦–â€æŸ¥è¯¢ã€‚è¿™å¦‚åŒåœ¨æ•°æ®åº“å¼•æ“å†…éƒ¨å®‰è£…äº†ä¸€ä¸ªæ™ºèƒ½èŠ‚æµé˜€ï¼Œç›´æ¥ä»æºå¤´ï¼ˆæ¶ˆè€—èµ„æºçš„æŸ¥è¯¢ï¼‰è¿›è¡Œç²¾å‡†æ§åˆ¶ï¼Œé¿å…äº†ä¸šåŠ¡å±‚é™æµçš„ç›²ç›®æ€§å’ŒHAåˆ‡æ¢çš„ç ´åæ€§ã€‚å®ƒèƒ½åœ¨èµ„æºç´§å¼ åˆç°ç«¯å€ªæ—¶å°±ä¸»åŠ¨å¹²é¢„ï¼Œæœ€å¤§é™åº¦ä¿éšœæ ¸å¿ƒä¸šåŠ¡è¯·æ±‚çš„é€šè¿‡å’Œç³»ç»Ÿæ•´ä½“çš„ç¨³å®šæ€§ï¼Œä¸”ç”±å†…æ ¸ç»Ÿä¸€ç®¡ç†ï¼Œè§„åˆ™ç”Ÿæ•ˆåŠæ—¶ã€ç­–ç•¥æ‰§è¡Œé«˜æ•ˆã€‚</p>
<h5 data-id="heading-11"><strong>é—®é¢˜äºŒï¼šâ€œç§’æ€â€ å•ç‚¹é«˜é¢‘å†™å…¥å¸¦æ¥çš„æ•°æ®åº“æ€§èƒ½ä¸‹é™ï¼Œä»¥åŠåº“å­˜ä¸€è‡´æ€§é—®é¢˜</strong></h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/658809ca5a5f48c5bd809b988f0244b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359814&amp;x-signature=m%2FYmDmq0FVgA5Jr3fvd4ZcUen2M%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p>ç§’æ€æ˜¯ç”µå•†ä¸šåŠ¡éå¸¸å¸¸è§çš„åœºæ™¯ï¼Œæ— è®ºç§’æ€ä¸šåŠ¡æ˜¯å¦è®¾è®¡ç¼“å­˜å‰ç½®æŠ—é‡ï¼Œåº“å­˜æ•°æ®çš„æœ€ç»ˆå˜æ›´éƒ½æ˜¯éœ€è¦è½åˆ°æ•°æ®åº“çš„ã€‚å¦‚æœç¼“å­˜å‘ç”Ÿå‡»ç©¿ï¼Œæ›´æ˜¯éœ€è¦æ•°æ®åº“æ¥è¿›è¡Œå…œåº•ç­–ç•¥ã€‚ä½†ç§’æ€è¿™ä¸ªåœºæ™¯çš„æ•°æ®åº“æ“ä½œåˆæå…¶ç‰¹æ®Šï¼Œç”šè‡³å¯ä»¥è¯´ä¼šå¯¼è‡´ä¼ ç»Ÿæ•°æ®åº“ç—›ç‚¹é›†ä¸­çˆ†å‘ã€‚</p>
<p>é¦–å…ˆï¼Œé«˜é¢‘å•è¡Œæ›´æ–°ä½¿è¡Œçº§é”ç«äº‰æˆä¸ºè‡´å‘½ç“¶é¢ˆï¼šå½“æµ·é‡è¯·æ±‚åŒæ—¶æ‰£å‡åŒä¸€å•†å“åº“å­˜æ—¶ï¼Œå­˜å‚¨å¼•æ“çš„è¡Œé”å¼ºåˆ¶ä¸²è¡Œæ›´æ–°ï¼Œå¯¼è‡´çº¿ç¨‹åœ¨é”ç­‰å¾…ä¸­å †ç§¯ï¼›æ­»é”æ£€æµ‹æœºåˆ¶åœ¨é˜Ÿåˆ—è¿‡é•¿æ—¶ï¼ˆå¦‚è¶…1000çº¿ç¨‹ï¼‰è§¦å‘æ·±åº¦éå†ï¼ŒCPUèµ„æºè¢«ç–¯ç‹‚æ¶ˆè€—ï¼Œäº‹åŠ¡å“åº”æ—¶é—´éª¤å¢ç”šè‡³è¶…æ—¶ã€‚</p>
<p>å…¶æ¬¡ï¼Œé«˜é¢‘äº‹åŠ¡çš„ACIDä¿éšœå¸¦æ¥å·¨å¤§å¼€é”€ï¼šäº‹åŠ¡åœ¨æ•°æ®åº“å†…æ ¸ä¸­æ˜¯æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ï¼Œåœ¨ç§’æ€åœºæ™¯ä¸‹å¾€å¾€éƒ½æ˜¯ç®€å•äº‹åŠ¡ï¼Œä½†ä¸ºäº†ä¿è¯æŸ¥è¯¢æ›´æ–°çš„ä¸€è‡´æ€§ï¼Œåˆä¸å¾—ä¸å¼€æ˜¾å¼äº‹åŠ¡(éauto commit)ï¼Œè€Œæ˜¾å¼äº‹åŠ¡çš„BEGINã€Statementã€COMMIT/ROLLBACKï¼Œæ¯ä¸€ä¸ªå­å¥éƒ½ä¼šå®Œæ•´çš„ç»å†åº”ç”¨ä¾§åˆ°æ•°æ®åº“åº•å±‚çš„å¤šçº§è½¬å‘å’Œç½‘ç»œå¼€é”€ï¼Œä¼´éšå¤šæ¬¡ç½‘ç»œäº¤äº’ï¼ˆè·¨èŠ‚ç‚¹å»¶è¿ŸåŠ å‰§å µå¡ï¼‰åŠæ—¥å¿—å†™å…¥ï¼Œå•äº‹åŠ¡è€—æ—¶é£™å‡ï¼Œç³»ç»Ÿååé‡æ–­å´–å¼ä¸‹è·Œã€‚</p>
<p>æœ€åï¼Œç§’æ€åœºæ™¯çš„åº“å­˜æ‰£å‡ä¸å…è®¸å‡ºç°æ„æ–™å¤–çš„æ›´æ–°ï¼šä¼ ç»Ÿæ•°æ®åº“çš„é«˜å¹¶å‘æ‰£å‡éœ€é€šè¿‡SELECTæ£€æŸ¥åº“å­˜åå†æ‰§è¡ŒUPDATEï¼Œä½†ä¸¤æ­¥æ“ä½œå­˜åœ¨æ—¶åºæ¼æ´â€”â€”é«˜å¹¶å‘ä¸‹å¤šä¸ªè¯·æ±‚å¯èƒ½åŒæ—¶è¯»åˆ°ç›¸åŒåº“å­˜å€¼ï¼Œå¯¼è‡´è¶…å–ï¼›åŒæ—¶æ‰€æœ‰è¯·æ±‚ï¼ˆåŒ…æ‹¬åº“å­˜ä¸è¶³çš„æ— æ•ˆè¯·æ±‚ï¼‰å‡éœ€ç«äº‰åŒä¸€è¡Œé”ï¼Œå¼•å‘çº¿ç¨‹å †ç§¯å’Œæ­»é”æ£€æµ‹çš„CPUæš´å¢ã€‚</p>
<h5 data-id="heading-12"><strong>è§£ï¼šç”µå•†ç§’æ€åœºæ™¯å®šåˆ¶ä¼˜åŒ–</strong></h5>
<p><strong>ç§’æ€æ’é˜Ÿ</strong>ï¼šé«˜é¢‘æ›´æ–°é—®é¢˜å¾ˆå¥½è§£å†³ï¼Œå€Ÿç”¨é™æµçš„æ€è·¯ï¼Œåªä¸è¿‡ç§’æ€åœºæ™¯è¦é™çš„æ˜¯å…·ä½“çš„å­—æ®µç”šè‡³æ˜¯å…·ä½“çš„å€¼ï¼Œå› ä¸ºé«˜é¢‘SQLæ˜¯é›†ä¸­åœ¨å…·ä½“æ•°é‡çš„åº“å­˜æˆ–è€…å•ä¸€å“ç±»ä¸Šçš„ï¼Œè¦æ”¹çš„å¯èƒ½å°±å‡ è¡Œç”šè‡³æ˜¯ä¸€è¡Œæ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å€Ÿç”¨äº†é™æµçš„Hintè¯­æ³•ï¼Œä¸šåŠ¡åªéœ€è¦åœ¨é¢„æœŸç§’æ€éœ€è¦æ›´æ”¹çš„å…·ä½“SQLä¸Šï¼ŒåŠ ä¸Šå¯¹åº”çš„Hintè§„åˆ™ï¼Œçº¦å®šå…·ä½“å­—æ®µæˆ–è€…å…·ä½“å€¼éœ€è¦è¿›è¡Œé™åˆ¶æ’é˜Ÿæ‰§è¡Œï¼Œæ•°æ®åº“å†…éƒ¨å°±ä¼šå¯¹ç§’æ€ç±»çš„SQLè¿›è¡Œç®¡ç†æ’é˜Ÿï¼Œæå¤§ç¨‹åº¦çš„è§„é¿äº†è¡Œé”çš„ç«äº‰ä»¥åŠå…¶è¿é”ååº”ï¼Œç»æµ‹è¯•å•è¡Œæ›´æ–°é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œæ¯”ä¼ ç»Ÿæ•°æ®åº“çš„æµé‡èƒ½æå‡ä¸€å€ä»¥ä¸Šã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â æ ¹æ®çƒ­ç‚¹å€¼é™æµ</span>
Â update<span class="hljs-comment">/*+Â ccl_queue_value('èŒ…å°')Â */</span>Â tÂ <span class="hljs-keyword">set</span>Â c=c+<span class="hljs-number">1</span>Â <span class="hljs-keyword">where</span>Â nameÂ =<span class="hljs-string">'èŒ…å°'</span>;Â 
Â <span class="hljs-comment">//Â æ ¹æ®çƒ­ç‚¹å­—æ®µé™æµ</span>
Â Â update<span class="hljs-comment">/*+Â ccl_queue_field(order_id)Â */</span>Â tÂ <span class="hljs-keyword">set</span>Â c=c+<span class="hljs-number">1</span>Â <span class="hljs-keyword">where</span>Â order_idÂ =<span class="hljs-number">1</span><span class="hljs-keyword">and</span>Â nameÂ =<span class="hljs-string">'èŒ…å°'</span>;
</code></pre>
<p><strong>äº‹åŠ¡å¿«é€Ÿæäº¤/å›æ»š</strong>ï¼šé’ˆå¯¹ç§’æ€äº‹åŠ¡çš„ç‰¹æ€§ï¼Œè®¾è®¡äº†äº‹åŠ¡å¿«é€Ÿæäº¤å›æ»šçš„Hintï¼Œå³ç”¨æˆ·åœ¨äº‹åŠ¡COMMIT/ROLLBACKå‰çš„æœ€åä¸€ä¸ªSQLè¯­å¥ä¸Šï¼Œå¦‚æœåŠ ä¸Šè¯¥Hintï¼Œåˆ™å†…æ ¸å³æ˜ç™½è¯¥æ“ä½œæäº¤æˆ–è€…å›æ»šäº†ã€‚æ­¤æ–¹æ¡ˆåœ¨ç§’æ€åœºæ™¯ä¸‹ï¼Œå°¤å…¶æ˜¯ç‰¹å®šå•è¡Œæ›´æ–°çš„åœºæ™¯ä¸‹ï¼Œæœ€é«˜å¯ä»¥æå‡ 3 å€ä»¥ä¸Šçš„æ€§èƒ½ï¼ä¼˜åŠ¿éå¸¸æ˜æ˜¾ã€‚</p>
<p><strong>å½±å“è¡Œæ•°çº¦æŸ</strong>ï¼šç§’æ€åœºæ™¯åº“å­˜æ‰£å‡ï¼Œæˆ–è€…å…¶ä»–éç§’æ€åœºæ™¯ä¹Ÿå¯èƒ½å­˜åœ¨ï¼Œä¸šåŠ¡ä¾§çš„é€»è¾‘æ˜ç¡®çŸ¥é“æŸæ¡SQLæ›´æ–°ååº”è¯¥å½±å“å‡ è¡Œæ•°æ®ï¼Œå¦‚æœæ•°æ®åº“æ‰§è¡Œå®Œå‘ç°å½±å“çš„è¡Œæ•°ä¸ç¬¦åˆé¢„æœŸåˆ™å¤§æ¦‚ç‡å‡ºç°é—®é¢˜äº†ï¼Œéœ€è¦å°†äº‹åŠ¡è¿›è¡Œå›æ»šã€‚æˆ‘ä»¬è®¾è®¡äº†é¢„æœŸå½±å“è¡Œæ•°çš„Hintï¼Œé€šè¿‡è¯¥Hintï¼ˆç¤ºä¾‹ UPDATE /*+ TARGET_AFFECT_ROW(1) */ stock SET count=count-1 WHERE id=100 AND count&gt;=1ï¼‰ï¼Œå¯åŒæ­¥å®ç°ä¸¤å¤§æ ¸å¿ƒä¼˜åŒ–ï¼š</p>
<p>å…¶ä¸€ï¼Œå¼•æ“åœ¨åŠ é”å‰ä¼˜å…ˆæ ¡éªŒ WHERE æ¡ä»¶ï¼ˆåº“å­˜â‰¥1ï¼‰ï¼Œä»…å½“åº“å­˜å……è¶³æ—¶æ‰å°è¯•åŠ é”æ›´æ–°ï¼Œåº“å­˜ä¸è¶³çš„è¯·æ±‚ç›´æ¥è¿”å›å½±å“è¡Œæ•°=0ï¼Œé¿å…æ— æ•ˆé”ç«äº‰ï¼›</p>
<p>å…¶äºŒï¼Œåº“å­˜æ£€æŸ¥ä¸æ‰£å‡å‹ç¼©ä¸ºå•åŸå­æ“ä½œï¼Œç¡®ä¿å½±å“è¡Œæ•°ä¸¥æ ¼ä¸º1æ‰æˆåŠŸï¼Œå¦åˆ™è‡ªåŠ¨å¤±è´¥ï¼Œå½»åº•æœç»è·¨äº‹åŠ¡çš„è„è¯»ä¸è¶…å–é£é™©ã€‚å½“ç„¶ä¹Ÿå¯ä»¥é…ç½®å…¶ä»–æ•°å€¼ï¼Œåªè¦ä¸æ‚¨é¢„æœŸçš„å½±å“è¡Œæ•°ä¸€è‡´å³å¯ã€‚</p>
<h5 data-id="heading-13"><strong>é—®é¢˜ä¸‰ï¼šâ€œç¼“å­˜æ›´æ–°ä¸€è‡´æ€§é—®é¢˜â€ ä¸šåŠ¡å‰ç½®ç¼“å­˜å¤±æ•ˆæ—¶ï¼Œä¼šç›´æ¥æ›´æ–°æ•°æ®åº“ï¼Œç„¶åæŸ¥è¯¢å·²æ›´æ–°æ•°æ®å¹¶è¿”å›</strong></h5>
<p>è®¸å¤šä¸šåŠ¡ç³»ç»Ÿä¼šåœ¨æ•°æ®åº“è®¿é—®å±‚ä¹‹ä¸Šå¼•å…¥ç¼“å­˜ï¼Œä¾‹å¦‚äº¬ä¸œçš„åˆ†å¸ƒå¼ç¼“å­˜JIMDBï¼Œä»¥åˆ©ç”¨å…¶æè‡´çš„è¯»å†™å“åº”é€Ÿåº¦ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚ç„¶è€Œï¼Œç¼“å­˜çš„æ˜“å¤±æ€§æœ¬è´¨å†³å®šäº†å…¶æ— æ³•ç‹¬ç«‹æ‰¿æ‹…å…³é”®æ•°æ®çš„æŒä¹…åŒ–èŒè´£â€”â€”æ•°æ®åº“å§‹ç»ˆæ˜¯ä¸å¯æˆ–ç¼ºçš„å…œåº•ä¿éšœï¼ˆé™¤éæ•°æ®å¯å®¹å¿ä¸¢å¤±ï¼‰ã€‚ç»´æŠ¤ç¼“å­˜ä¸æ•°æ®åº“ä¹‹é—´çš„å¼ºä¸€è‡´æ€§æ˜¯ç³»ç»Ÿè®¾è®¡çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼Œå½“ç¼“å­˜å¤±æ•ˆå¯¼è‡´è¯·æ±‚ç©¿é€è‡³æ•°æ®åº“æ—¶ï¼Œä¸šåŠ¡å¸¸éœ€åŒæ­¥è·å–åˆšæ›´æ–°çš„æ•°æ®å¹¶å®æ—¶åˆ·æ–°ç¼“å­˜æˆ–å“åº”å‰ç«¯ã€‚ä¼ ç»Ÿæ•°æ®åº“åœ¨æ­¤åœºæ™¯ä¸‹å­˜åœ¨æ˜¾è‘—å±€é™ï¼šè‹¥è¦åœ¨äº‹åŠ¡ä¸­ç¡®ä¿æ›´æ–°åç«‹å³å¯è§ä¸”æ•°æ®ä¸€è‡´ï¼Œå¿…é¡»åœ¨DMLæ“ä½œåç´§è·Ÿä¸€æ¡SELECTè¯­å¥è¿›è¡ŒæŸ¥è¯¢ã€‚ä½†å³ä¾¿é‡‡ç”¨æ­¤æ–¹æ¡ˆï¼Œåœ¨è¯»å·²æäº¤ï¼ˆRCï¼‰éš”ç¦»çº§åˆ«ä¸‹ï¼Œå…¶ä»–äº‹åŠ¡çš„å¹¶å‘ä¿®æ”¹ä»å¯èƒ½å¯¼è‡´è¯¥æŸ¥è¯¢è¯»åˆ°ä¸ä¸€è‡´æ•°æ®ï¼Œæ— æ³•æ»¡è¶³ä¸¥æ ¼çš„å®æ—¶ä¸€è‡´æ€§è¦æ±‚ã€‚</p>
<h5 data-id="heading-14"><strong>è§£ï¼šå®ç°RETURNINGè¯­æ³•</strong></h5>
<p>æˆ‘ä»¬é€šè¿‡å®ç°RETURNINGè¯­æ³•è§£å†³è¿™ä¸€é—®é¢˜ï¼šåœ¨UPDATE/INSERTç­‰DMLè¯­å¥æœ«å°¾è¿½åŠ RETURNINGå­å¥ï¼Œå°±èƒ½ç›´æ¥è·å–ä¿®æ”¹åçš„å®Œæ•´è¡Œæ•°æ®ã€‚æ¯”å¦‚åº“å­˜æ‰£å‡åœºæ™¯ä¸‹ï¼Œä¸€æ¡UPDATE inventory SET stock=stock-1 WHERE id=100 RETURNING *;è¯­å¥æ—¢å®Œæˆäº†åŸå­æ‰£å‡ï¼Œåˆèƒ½ç«‹å³è¿”å›æœ€æ–°åº“å­˜å€¼ï¼Œæ— éœ€é¢å¤–SELECTæŸ¥è¯¢ã€‚</p>
<p>è¿™ä¸€å†…æ ¸çº§ä¼˜åŒ–ä¸ä»…æ¶ˆé™¤äº†RCéš”ç¦»ä¸‹çš„å¹¶å‘è„è¯»é£é™©ï¼ˆDMLä¸è¿”å›æ•°æ®åŸºäºåŒä¸€äº‹åŠ¡å¿«ç…§ï¼Œå…¶ä»–äº‹åŠ¡çš„å¹¶å‘ä¿®æ”¹ä¸ä¼šå¹²æ‰°ç»“æœï¼‰ï¼Œè¿˜å°†â€œæ›´æ–° + æŸ¥è¯¢â€çš„ä¸¤æ¬¡ç½‘ç»œäº¤äº’å‹ç¼©ä¸ºå•æ¬¡è¯·æ±‚ï¼ŒæŠŠäº‹åŠ¡è€—æ—¶å†é™ä¸€ä¸ªçº§åˆ«ã€‚å¯¹ç¼“å­˜æ¶æ„è€Œè¨€ï¼Œä¸šåŠ¡ä¾§æ‹¿åˆ°RETURNINGè¿”å›çš„å®æ—¶æ•°æ®åï¼Œèƒ½ç«‹åˆ»åˆ·æ–°ç¼“å­˜å±‚ï¼Œåœ¨äº‹åŠ¡æäº¤æ—¶å°±å®Œæˆæ•°æ®å¯¹é½ï¼Œè®©ç§’æ€ã€å¤§ä¿ƒç­‰é«˜å¹¶å‘åœºæ™¯ä¸‹çš„â€œç¼“å­˜å‡»ç©¿å…œåº•é€»è¾‘â€ï¼Œæ—¢å¿«åˆç¨³ã€‚</p>
<h5 data-id="heading-15"><strong>é—®é¢˜å››ï¼š"æ‰§è¡Œè®¡åˆ’æ¼‚ç§»" å¥½å¥½çš„SQLçªç„¶å°±æ…¢äº†</strong></h5>
<p>è¿™ä¸ªé—®é¢˜çœŸçš„è®©äººå¤´ç–¼ï¼Œä¸€æ¡SQLåœ¨å¼€å‘ç¯å¢ƒè·‘å¾—é£å¿«ï¼Œåˆ°äº†çº¿ä¸Šå°±å˜æˆäº†èœ—ç‰›ã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œæœ‰æ—¶å€™åŒä¸€æ¡SQLï¼Œä»Šå¤©è¿˜å¥½å¥½çš„ï¼Œæ˜å¤©å°±çªç„¶æ…¢å¾—è¦æ­»ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æœ‰æ¡è®¢å•æŸ¥è¯¢çš„SQLï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>Â o.<span class="hljs-operator">*</span>,Â u.nameÂ Â 
<span class="hljs-keyword">FROM</span>Â ordersÂ oÂ Â 
<span class="hljs-keyword">JOIN</span>Â usersÂ uÂ <span class="hljs-keyword">ON</span>Â o.user_idÂ <span class="hljs-operator">=</span>Â u.idÂ Â 
<span class="hljs-keyword">WHERE</span>Â o.create_timeÂ Â 
<span class="hljs-keyword">BETWEEN</span>Â <span class="hljs-string">'2025-10-01'</span>Â <span class="hljs-keyword">AND</span>Â <span class="hljs-string">'2025-10-30'</span>Â <span class="hljs-keyword">AND</span>Â o.statusÂ <span class="hljs-keyword">IN</span>(<span class="hljs-string">'PAID'</span>,<span class="hljs-string">'SHIPPED'</span>)Â 
Â <span class="hljs-keyword">ORDER</span>Â <span class="hljs-keyword">BY</span>Â o.create_timeÂ <span class="hljs-keyword">DESC</span>Â LIMITÂ <span class="hljs-number">100</span>;
</code></pre>
<p>å¹³æ—¶è¿™æ¡SQLæ¯«ç§’çº§å°±èƒ½å‡ºç»“æœï¼Œç”¨çš„æ˜¯<code>orders.idx_create_time</code>ç´¢å¼•ã€‚ä½†æœ‰ä¸€å¤©å¤§ä¿ƒæœŸé—´ï¼Œè¿™æ¡SQLçªç„¶å¼€å§‹èµ°å…¨è¡¨æ‰«æï¼Œ30ç§’æ‰èƒ½è·‘å®Œï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹–å®äº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿæ•°æ®åº“ä¼˜åŒ–å™¨æ˜¯ä¸ª"èªæ˜"çš„å®¶ä¼™ï¼Œå®ƒä¼šæ ¹æ®è¡¨çš„ç»Ÿè®¡ä¿¡æ¯æ¥é€‰æ‹©æ‰§è¡Œè®¡åˆ’ã€‚ä½†é—®é¢˜å°±å‡ºåœ¨è¿™äº›ç»Ÿè®¡ä¿¡æ¯ä¸Šâ€”â€”<code>ANALYZE TABLE</code>æ›´æ–°äº†ç»Ÿè®¡ä¿¡æ¯ï¼Œæ•°æ®åˆ†å¸ƒå‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ–è€…ç³»ç»Ÿè´Ÿè½½å½±å“äº†æˆæœ¬è®¡ç®—ï¼Œä¼˜åŒ–å™¨å°±å¯èƒ½çªç„¶"å˜å¿ƒ"ï¼Œé€‰æ‹©ä¸€ä¸ªå®Œå…¨ä¸åŒçš„æ‰§è¡Œè·¯å¾„ã€‚</p>
<p>è¿™ç§æƒ…å†µåœ¨å¤§ä¿ƒæœŸé—´ç‰¹åˆ«å±é™©ï¼Œæ•°æ®é‡æ¿€å¢ã€ç³»ç»Ÿè´Ÿè½½å˜åŒ–ï¼Œä¸€æ¡æ ¸å¿ƒæŸ¥è¯¢çš„æ‰§è¡Œè®¡åˆ’çªç„¶åŠ£åŒ–ï¼Œæ•´ä¸ªç³»ç»Ÿå¯èƒ½å°±å®äº†ã€‚</p>
<p>ä¼ ç»Ÿçš„è§£å†³åŠæ³•è¦ä¹ˆé‡å¯æ•°æ®åº“ï¼ˆä»£ä»·å¤ªå¤§ï¼‰ï¼Œè¦ä¹ˆä¸šåŠ¡ç ”å‘åŠ Hintå¼ºåˆ¶ç´¢å¼•ï¼ˆç ´åä»£ç å¯ç»´æŠ¤æ€§ï¼Œè¿˜å¾—ç´§æ€¥ä¸Šçº¿ï¼Œæ—¶é—´å‘¨æœŸé•¿ï¼‰ï¼Œè¦ä¹ˆè°ƒä¼˜åŒ–å™¨å‚æ•°ï¼ˆå¯èƒ½å½±å“å…¶ä»–SQLï¼‰ï¼Œéƒ½ä¸æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚</p>
<h5 data-id="heading-16"><strong>è§£ï¼šStatement Outlineæ‰§è¡Œè®¡åˆ’å›ºåŒ–åŠŸèƒ½</strong></h5>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å®ç°äº†Statement OutlineåŠŸèƒ½ï¼Œå¯ä»¥æŠŠç¨³å®šé«˜æ•ˆçš„æ‰§è¡Œè®¡åˆ’"å›ºåŒ–"ä¸‹æ¥ï¼Œè®©ä¼˜åŒ–å™¨æŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„æ–¹å¼æ‰§è¡Œã€‚è¿™ä¸ªåŠŸèƒ½é€šè¿‡å­˜å‚¨è¿‡ç¨‹åŒ…æ¥ç®¡ç†ï¼Œä½¿ç”¨èµ·æ¥å¾ˆç®€å•ã€‚æ¯”å¦‚æˆ‘ä»¬å‘ç°æŸä¸ªæŸ¥è¯¢æœ‰ä¸ªå¾ˆå¥½çš„æ‰§è¡Œè®¡åˆ’ï¼Œå°±å¯ä»¥æŠŠå®ƒè®°ä¸‹æ¥ï¼Œä¸€æ—¦å‘ç”Ÿä¸Šè¿°æ„å¤–åœºæ™¯ï¼Œå¯ä»¥ç«‹å³å°†å…¶æ³¨å…¥æ•°æ®åº“ä»è€Œç¨³å®šè¯¥ç±»å‹SQLçš„æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--Â æ·»åŠ ä¼˜åŒ–å™¨hintçš„outline</span>
Â <span class="hljs-keyword">CALL</span>Â dbms_outln.add_optimizer_outline(Â Â Â 
Â <span class="hljs-string">'your_db'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â æ•°æ®åº“åç§°Â Â Â Â </span>
Â <span class="hljs-string">''</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â SQLè¯­å¥çš„æ‘˜è¦ï¼Œä¸ºç©ºæ—¶è‡ªåŠ¨è®¡ç®—Â Â Â Â Â Â </span>
Â <span class="hljs-number">1</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â ä½ç½®ï¼Œé€šå¸¸ä¸º1Â Â Â Â Â </span>
Â <span class="hljs-string">'/*+Â USE_INDEX(ordersÂ idx_create_time)Â */'</span>,Â Â Â Â <span class="hljs-comment">--Â ä¼˜åŒ–å™¨æç¤ºæ–‡æœ¬Â Â Â Â Â Â </span>
Â <span class="hljs-string">'SELECTÂ o.*,Â u.nameÂ Â Â Â Â Â Â Â FROMÂ ordersÂ oÂ Â Â Â Â Â Â 
Â JOINÂ usersÂ uÂ ONÂ o.user_idÂ =Â u.idÂ Â Â Â Â Â Â Â 
WHEREÂ o.create_timeÂ BETWEENÂ '</span><span class="hljs-number">2025</span><span class="hljs-number">-10</span><span class="hljs-number">-01</span><span class="hljs-string">'Â ANDÂ '</span><span class="hljs-number">2025</span><span class="hljs-number">-10</span><span class="hljs-number">-30</span><span class="hljs-string">'Â ANDÂ o.statusÂ INÂ ('</span>PAID<span class="hljs-string">',Â '</span>SHIPPED<span class="hljs-string">')Â Â Â Â Â Â Â 
ORDERÂ BYÂ o.create_timeÂ DESCÂ LIMITÂ 100;'</span>Â Â Â Â Â Â Â <span class="hljs-comment">--Â SQLè¯­å¥æ–‡æœ¬);Â </span>

<span class="hljs-comment">--Â æ·»åŠ å¼ºåˆ¶ç´¢å¼•çš„outlineÂ Â Â </span>
<span class="hljs-keyword">CALL</span>Â dbms_outln.add_index_outline(Â Â Â Â Â Â <span class="hljs-string">'your_db'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â æ•°æ®åº“åç§°Â Â Â Â Â </span>
Â <span class="hljs-string">''</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â SQLè¯­å¥çš„æ‘˜è¦ï¼Œä¸ºç©ºæ—¶è‡ªåŠ¨è®¡ç®—Â Â Â Â Â Â </span>
<span class="hljs-number">1</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â ä½ç½®ï¼Œé€šå¸¸ä¸º1Â Â Â Â Â </span>
Â <span class="hljs-string">'USEÂ INDEX'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â ç´¢å¼•æç¤ºç±»å‹ï¼Œå¦‚'USEÂ INDEX'ã€'IGNOREÂ INDEX'ç­‰Â Â Â Â Â </span>
Â <span class="hljs-string">'idx_status'</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â ç´¢å¼•åˆ—è¡¨ï¼Œå¤šä¸ªç´¢å¼•ç”¨é€—å·åˆ†éš”Â Â Â Â Â Â </span>
Â <span class="hljs-string">''</span>,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">--Â ç´¢å¼•æç¤ºé€‰é¡¹ï¼Œå¦‚'FORÂ JOIN'ã€'FORÂ ORDERÂ BY'ç­‰Â Â Â Â Â </span>
<span class="hljs-string">'SELECTÂ o.*,Â u.nameÂ Â Â Â Â Â Â 
Â FROMÂ ordersÂ oÂ Â Â Â Â Â Â Â 
JOINÂ usersÂ uÂ ONÂ o.user_idÂ =Â u.idÂ Â Â Â Â Â Â Â 
Â WHEREÂ o.create_timeÂ BETWEENÂ '</span><span class="hljs-number">2025</span><span class="hljs-number">-10</span><span class="hljs-number">-01</span><span class="hljs-string">'Â ANDÂ '</span><span class="hljs-number">2025</span><span class="hljs-number">-10</span><span class="hljs-number">-30</span><span class="hljs-string">'Â ANDÂ o.statusÂ INÂ ('</span>PAID<span class="hljs-string">',Â '</span>SHIPPED<span class="hljs-string">')Â Â Â Â Â Â Â Â 
Â ORDERÂ BYÂ o.create_timeÂ DESCÂ LIMITÂ 100;'</span>Â Â Â Â Â Â Â <span class="hljs-comment">--Â SQLè¯­å¥æ–‡æœ¬);</span>
</code></pre>
<p>è¿™æ ·ä¸€æ¥ï¼Œå³ä½¿ç»Ÿè®¡ä¿¡æ¯å˜åŒ–äº†ï¼Œä¼˜åŒ–å™¨ä¹Ÿä¼šæŒ‰ç…§æˆ‘ä»¬å›ºåŒ–çš„æ‰§è¡Œè®¡åˆ’æ¥æ‰§è¡Œï¼Œä¿è¯æŸ¥è¯¢æ€§èƒ½çš„ç¨³å®šæ€§ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿç²¾ç¡®æ§åˆ¶æŸ¥è¯¢çš„æ‰§è¡Œæ–¹å¼ã€‚å¯¹äºé‚£äº›ä¸šåŠ¡å…³é”®çš„SQLï¼Œè¿™ä¸ªåŠŸèƒ½ç®€ç›´æ˜¯"å®šæµ·ç¥é’ˆ"ï¼Œå½»åº•è§£å†³äº†æ‰§è¡Œè®¡åˆ’æ¼‚ç§»çš„é—®é¢˜ã€‚</p>
<p>Outlineè¿˜å¯ä»¥æ³¨å…¥è‡ªå®šä¹‰çš„hintï¼Œæ¯”å¦‚â€œé—®é¢˜ä¸€â€ä¸­çš„è§£å†³è¿‡è½½é—®é¢˜hintæˆ–è€…â€œé—®é¢˜äºŒâ€ä¸­çš„ç§’æ€åœºæ™¯hintã€‚</p>
<h5 data-id="heading-17"><strong>é—®é¢˜äº”ï¼š"çº¿ç¨‹æ‹¥å µ" æ¯è¿æ¥æ¯çº¿ç¨‹çš„å¼Šç—…</strong></h5>
<p>ä¼ ç»Ÿæ•°æ®åº“æ˜¯æ²¡æœ‰çº¿ç¨‹æ± çš„ï¼Œæ¯ä¸ªè¿æ¥éƒ½è¦åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ¥å¤„ç†ï¼Œå¸¸è§„åœºæ™¯æ¯è¿æ¥æ¯çº¿ç¨‹è¿˜å¾ˆç¨³å®šï¼Œä½†é«˜å¹¶å‘åœºæ™¯ä¸‹å°±æ˜¯ç¾éš¾ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹å¤§ä¿ƒæœŸé—´çš„åœºæ™¯ï¼šæˆåƒä¸Šä¸‡ä¸ªè¿æ¥åŒæ—¶æ¶Œå…¥æ•°æ®åº“ï¼Œæ¯ä¸ªè¿æ¥éƒ½è¦åˆ›å»ºçº¿ç¨‹ï¼Œçº¿ç¨‹åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€å·¨å¤§ï¼ŒCPUå¿™ç€åšä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ŒçœŸæ­£ç”¨æ¥å¤„ç†SQLçš„æ—¶é—´åè€Œä¸å¤šã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½æ˜¯ä¸€è§†åŒä»ï¼Œæ ¸å¿ƒçš„æ”¯ä»˜æŸ¥è¯¢å¯èƒ½è¢«å¤§é‡çš„æ—¥å¿—å†™å…¥ã€æŠ¥è¡¨æŸ¥è¯¢è¿™äº›ä¸ç´§æ€¥çš„è¯·æ±‚ç»™"æ·¹æ²¡"äº†ã€‚åœ¨JEDæ¶æ„ä¸‹ï¼Œç”±vitessæ§åˆ¶äº†è¿æ¥çš„æ•°é‡ï¼Œè¿™ä¸ªé—®é¢˜è¿˜ä¸å¤§ï¼Œä½†ç›®å‰DongDALç›´è¿DongSQLçš„æ¶æ„ï¼Œè¿™ä¸ªå°±æˆäº†ä¸å¾—ä¸é¢å¯¹çš„é‡ç‚¹é—®é¢˜ï¼</p>
<p>çº¿ç¨‹æ‹¥å µçš„é—®é¢˜çœ‹èµ·æ¥å’Œè¿‡è½½å¾ˆåƒï¼Œä½†è¿˜ç•¥æœ‰ä¸€ç‚¹åŒºåˆ«ã€‚è¿‡è½½åœºæ™¯å¯ä»¥ç²¾ç¡®è¯†åˆ«åˆ°ä¸ªåˆ«é—®é¢˜SQLï¼Œå¹¶è¿›è¡Œç²¾å‡†é™æµï¼Œä»è€Œä¿è¯ä¸å½±å“å…¶ä»–SQLã€‚è€Œçº¿ç¨‹æ‹¥å µçš„å¤§éƒ¨åˆ†ç”šè‡³æ‰€æœ‰è¿æ¥éƒ½æ˜¯æ­£å¸¸SQLï¼Œæ²¡æœ‰è°æ˜¯å—å®³è€…ï¼Œåªä¸è¿‡çªå‘æµé‡çœŸçš„å¤ªå¤§äº†ï¼æ‰€ä»¥è¿™ç§åœºæ™¯ï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸ç¥­å‡ºå¤§æ€å™¨â€”â€”çº¿ç¨‹æ± ï¼</p>
<h5 data-id="heading-18"><strong>è§£ï¼šDongSQLçº¿ç¨‹æ± </strong></h5>
<p>æˆ‘ä»¬å®ç°äº†å®Œæ•´çš„çº¿ç¨‹æ± åŠŸèƒ½ï¼Œèƒ½å¤Ÿæœ‰æ•ˆå¤ç”¨çº¿ç¨‹èµ„æºï¼Œé¿å…é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„å¼€é”€ã€‚çº¿ç¨‹æ± ä¼šç»´æŠ¤ä¸€ç»„å·¥ä½œçº¿ç¨‹ï¼Œæ–°æ¥çš„è¿æ¥è¯·æ±‚ä¼šè¢«åˆ†é…åˆ°ç©ºé—²çš„çº¿ç¨‹ä¸Šå¤„ç†ï¼Œè¿™æ ·å°±èƒ½å¤§å¤§å‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæå‡é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œæ¥è‡ªæ ¸å¿ƒæœåŠ¡å™¨/æ ¸å¿ƒç”¨æˆ·çš„è¯·æ±‚å°±èƒ½ä¼˜å…ˆå¾—åˆ°å¤„ç†ï¼Œä¸ä¼šè¢«å…¶ä»–ä¸é‚£ä¹ˆç´§æ€¥çš„è¯·æ±‚ç»™æŒ¤å äº†ã€‚ç³»ç»Ÿä¼šæ™ºèƒ½è¯†åˆ«é«˜ä¼˜å…ˆçº§è¿æ¥ï¼Œç¡®ä¿å…³é”®åŠŸèƒ½çš„å“åº”æ—¶é—´ã€‚</p>
<p>è¿™äº›ä¼˜åŒ–åŠŸèƒ½çš„åŠ å…¥ï¼Œè®©DongSQLåœ¨é«˜å¹¶å‘ã€å¤§æ•°æ®é‡çš„é›¶å”®ç”µå•†æ ¸å¿ƒåœºæ™¯ä¸‹å±•ç°å‡ºäº†æ›´å¼ºçš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚æ¯ä¸€ä¸ªåŠŸèƒ½éƒ½æ˜¯æˆ‘ä»¬åœ¨å®é™…ä¸šåŠ¡ä¸­é‡åˆ°é—®é¢˜ã€åˆ†æé—®é¢˜ã€è§£å†³é—®é¢˜çš„ç»“æœï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©æ›´å¤šçš„å›¢é˜Ÿåº”å¯¹ç±»ä¼¼çš„æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-19"><strong>ä¸‰ã€ç»“è¯­ï¼šæŠ€æœ¯çš„æˆè‰²åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</strong></h2>
<p>å¦‚æœè¯´æŠ€æœ¯çš„åº•è‰²ï¼Œæ˜¯æ±‚çŸ¥ã€æ˜¯æˆé•¿ã€æ˜¯æ‰§ç€ã€æ˜¯çƒ­å¿±ã€æ˜¯æˆ‘ä»¬æ‰€æœ‰æŠ€æœ¯äººå›¢ç»“åœ¨ä¸€èµ·çˆ†å‘å‡ºçš„åŠ›é‡ã€‚</p>
<p>é‚£ä¹ˆæŠ€æœ¯çš„æˆè‰²ï¼Œä¸€å®šæœ‰è„šè¸å®åœ°ï¼Œè¿½æ ¹æº¯æºï¼Œä¸æµ®äºè¡¨è±¡ï¼Œè€Œæ·±å…¥éª¨é«“åœ°è§£å†³æ ¹æœ¬é—®é¢˜ã€‚æ­£æ‰€è°“ï¼šæ±‚æœ¨ä¹‹é•¿è€…ï¼Œå¿…å›ºå…¶æ ¹æœ¬ï¼›æ¬²æµä¹‹è¿œè€…ï¼Œå¿…æµšå…¶æ³‰æºã€‚å¯¹äºæ•°æ®åº“ï¼Œåˆ™å¿…é¡»å…·å¤‡æŒæ§æ•°æ®åº“å†…æ ¸çš„èƒ½åŠ›ï¼Œæ–¹èƒ½ä½¿è‡ªèº«ä»¥åŠå…¶ä¸Šæ‰¿æ¥çš„ä¸šåŠ¡è¡Œç¨³è‡´è¿œã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæ›´å®è§‚çš„ç»´åº¦ï¼ŒæŠ€æœ¯çš„æˆè‰²æˆ‘æƒ³åº”è¯¥å°±æ˜¯ä¸ºå›¢é˜Ÿã€ä¸ºå…¬å¸ã€ä¸ºç”¨æˆ·ã€ä¹ƒè‡³ä¸ºç¤¾ä¼šäº§ç”Ÿå®å®åœ¨åœ¨çš„ä»·å€¼å§ï¼æ­£å¦‚å…¬å¸ä½¿å‘½è¯´çš„é‚£æ ·ï¼š<strong>æŠ€æœ¯ä¸ºæœ¬ï¼Œè®©ç”Ÿæ´»æ›´ç¾å¥½ï¼</strong> è®©æˆ‘ä»¬æºæ‰‹æ‰€æœ‰ä¸šåŠ¡ç ”å‘å›¢é˜Ÿåšå®äº‹ã€æœ‰ä»·å€¼çš„äº‹ã€é•¿æœŸçš„äº‹ï¼Œä¸ºäº¬ä¸œçš„ 35711 æ¢¦æƒ³ä»˜å‡ºæˆ‘ä»¬è‡ªå·±çš„ä¸€ä»½åŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº¬ä¸œè‡ªç ”ç”µå•†æ•°æ®åº“å†…æ ¸DongSQLç®€ä»‹]]></title>    <link>https://juejin.cn/post/7579440586693984302</link>    <guid>https://juejin.cn/post/7579440586693984302</guid>    <pubDate>2025-12-03T09:44:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579440586693984302" data-draft-id="7579427549471850542" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº¬ä¸œè‡ªç ”ç”µå•†æ•°æ®åº“å†…æ ¸DongSQLç®€ä»‹"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-03T09:44:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº¬ä¸œè‡ªç ”ç”µå•†æ•°æ®åº“å†…æ ¸DongSQLç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:44:07.000Z" title="Wed Dec 03 2025 09:44:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å›¢é˜Ÿäºä»Šå¹´(2025.9)æ‰“ç£¨å‡ºäº†æ·±åº¦ä¼˜åŒ–çš„è‡ªç ”æ•°æ®åº“å†…æ ¸â€”â€”DongSQL V1.1.0ã€‚</p>
<p><em>[å¦‚æœå¯¹å‰å› åæœæ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå¯ä»¥ç§»æ­¥ä¸Šä¸€ç¯‡æ–‡ç« </em><a href="https://link.juejin.cn?target=http%3A%2F%2Fsd.jd.com%2Farticle%2F47706%3FshareId%3D52009%26isHideShareButton%3D1" target="_blank" title="http://sd.jd.com/article/47706?shareId=52009&amp;isHideShareButton=1" ref="nofollow noopener noreferrer"> <em>ã€Šå®å‰‘é”‹ä»ç£¨ç ºå‡ºâ€”â€”é›¶å”®æ•°æ®åº“å†…æ ¸ï¼Œä¸ºå¤§ä¿ƒé“¸å‰‘ï¼ã€‹</em> </a><em>]</em></p>
<p>æœ¬æ–‡å°†æ·±åº¦è§£æDongSQLåœ¨è¯­æ³•æ‰©å±•ã€å¹¶å‘æ§åˆ¶ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰æ–¹é¢çš„å†…æ ¸æ”¹é€ ï¼Œä»¥åŠåœ¨ç”µå•†åœºæ™¯ä¸‹çš„ä¼˜åŒ–å®è·µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e6b2f39df7a49be869523ea82f78946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=FZ0gLuiQ9p%2F%2FCL9ClrDi9GdpRFM%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h2 data-id="heading-0">1ã€DongSQLåœ¨è¯­æ³•æ‰©å±•ä¸Šçš„ä¼˜åŒ–</h2>
<h3 data-id="heading-1">1.1. RETURNINGå­å¥åŠŸèƒ½</h3>
<p><strong>â–¶ï¸ è¯­æ³•æ‰©å±•åˆ›æ–°</strong>ï¼šDongSQLåœ¨æ ‡å‡†SQLè¯­æ³•åŸºç¡€ä¸Šæ‰©å±•äº†RETURNINGå­å¥ï¼Œè¿™æ˜¯é‡è¦è¯­æ³•åˆ›æ–°ã€‚RETURNINGå­å¥å…è®¸DMLè¯­å¥(INSERTã€UPDATEã€DELETEã€REPLACE)åœ¨æ‰§è¡Œæ•°æ®ä¿®æ”¹æ“ä½œçš„åŒæ—¶è¿”å›å—å½±å“çš„è¡Œæ•°æ®ï¼Œæ— éœ€é¢å¤–æŸ¥è¯¢ã€‚</p>
<p>ä¼ ç»Ÿæ•°æ®åº“åœ¨æ‰§è¡ŒDMLæ“ä½œåï¼Œå¦‚æœéœ€è¦è·å–æ“ä½œç»“æœï¼Œå¿…é¡»æ‰§è¡Œé¢å¤–çš„SELECTæŸ¥è¯¢ï¼Œè¿™åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¼šäº§ç”Ÿé¢å¤–çš„ç½‘ç»œå¾€è¿”å¼€é”€ã€‚DongSQLé€šè¿‡RETURNINGå­å¥å½»åº•è§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--Â INSERTæ“ä½œè¿”å›è‡ªå¢IDÂ </span>
<span class="hljs-keyword">INSERT</span>Â <span class="hljs-keyword">INTO</span>Â ordersÂ (customer_id,Â order_date)Â <span class="hljs-keyword">VALUES</span>Â (<span class="hljs-number">1001</span>,Â NOW())Â RETURNINGÂ order_id;Â 

<span class="hljs-comment">--Â UPDATEæ“ä½œè¿”å›æ›´æ–°åçš„æ•°æ®Â </span>
<span class="hljs-keyword">UPDATE</span>Â productsÂ <span class="hljs-keyword">SET</span>Â priceÂ <span class="hljs-operator">=</span>Â priceÂ <span class="hljs-operator">*</span>Â <span class="hljs-number">1.1</span>Â <span class="hljs-keyword">WHERE</span>Â categoryÂ <span class="hljs-operator">=</span>Â <span class="hljs-string">'electronics'</span>Â Â 
RETURNINGÂ product_id,Â name,Â old_price,Â price;Â 

<span class="hljs-comment">--Â DELETEæ“ä½œè¿”å›è¢«åˆ é™¤çš„è®°å½•Â </span>
<span class="hljs-keyword">DELETE</span>Â <span class="hljs-keyword">FROM</span>Â expired_sessionsÂ <span class="hljs-keyword">WHERE</span>Â expire_timeÂ <span class="hljs-operator">&lt;</span>Â NOW()Â Â 
RETURNINGÂ session_id,Â user_id,Â expire_time;
</code></pre>
<p><strong>â–¶ï¸ æ€§èƒ½æå‡æ•ˆæœ</strong>ï¼šç»æµ‹è¯•éªŒè¯ï¼ŒRETURNINGå­å¥åœ¨ä¸åŒåœºæ™¯ä¸‹éƒ½èƒ½å¸¦æ¥æ˜¾è‘—çš„æ€§èƒ½æå‡ï¼š</p>
<p>â€¢<strong>å›ºå®šè¡Œæ›´æ–°åœºæ™¯</strong>ï¼š16å¹¶å‘æ—¶TPSæå‡61%ï¼Œå“åº”æ—¶é—´é™ä½44%</p>
<p>â€¢<strong>éšæœºè¡Œæ›´æ–°åœºæ™¯</strong>ï¼š128å¹¶å‘æ—¶TPSæå‡18%</p>
<p>â€¢<strong>å¤§è§„æ¨¡æ›´æ–°æµ‹è¯•</strong>ï¼š2000ä¸‡æ¬¡æ“ä½œä¸­å¹³å‡TPSæå‡5-10%</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62994ddf0b9a439eb780bd0e98832c43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=HfUlNXPwXmyFdspZTwvavR0w3jc%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<p><strong>â–¶ï¸ ç”Ÿäº§è½åœ°é¢„æœŸ</strong>ï¼šè¯¥åŠŸèƒ½ä¸DongDALå‘å·å™¨é€»è¾‘é«˜åº¦åŒ¹é…ï¼Œæœ‰æœ›å°†å‘å·å™¨æ€§èƒ½ç“¶é¢ˆå¤§å¹…æå‡(DongDALå›¢é˜Ÿé…å¥—å¼€å‘æ¨è¿›ä¸­)</p>
<h3 data-id="heading-2">1.2. Hintè¯­æ³•æ‰©å±•</h3>
<p><strong>â–¶ï¸ å¤šæ ·åŒ–Hintæ”¯æŒ</strong>ï¼šDongSQLæ‰©å±•äº†Hintè¯­æ³•ä½“ç³»ï¼Œæä¾›äº†é’ˆå¯¹ç”µå•†åœºæ™¯çš„ä¸“ç”¨æç¤ºåŠŸèƒ½ï¼ŒåŒ…æ‹¬å¹¶å‘æ§åˆ¶ã€åº“å­˜ç®¡ç†ç­‰é¢†åŸŸç‰¹å®šçš„ä¼˜åŒ–ã€‚</p>
<p><strong>â–¶ï¸ Inventory Hint</strong>ï¼šä¸“é—¨é’ˆå¯¹ç”µå•†åº“å­˜ç®¡ç†åœºæ™¯è®¾è®¡çš„æç¤ºè¯­æ³•ï¼Œæä¾›ç›®æ ‡å½±å“è¡Œæ•°æ§åˆ¶ã€è‡ªåŠ¨æäº¤/å›æ»šç­‰ç‰¹æ€§ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">--Â åº“å­˜æ‰£å‡ï¼šç¡®ä¿åªå½±å“ä¸€è¡Œï¼ŒæˆåŠŸè‡ªåŠ¨æäº¤ï¼Œå¤±è´¥è‡ªåŠ¨å›æ»š
Â UPDATEÂ /*+Â TARGET_AFFECT_ROW(1)Â COMMIT_ON_SUCCESSÂ ROLLBACK_ON_FAILÂ */
Â Â inventoryÂ SETÂ <span class="hljs-attr">stock</span>Â =Â stockÂ -Â <span class="hljs-number">5</span>Â 
Â Â Â WHEREÂ <span class="hljs-attr">product_id</span>Â =Â <span class="hljs-number">1001</span>Â ANDÂ stockÂ &gt;=Â <span class="hljs-number">5</span><span class="hljs-comment">;</span>
</code></pre>
<p><strong>â–¶ï¸ æ€§èƒ½æå‡æ•°æ®</strong>ï¼šåœ¨16å¹¶å‘çš„åº“å­˜æ‰£å‡åœºæ™¯ä¸‹ï¼Œä½¿ç”¨Inventory Hintæ¯”ä¸ä½¿ç”¨hintæ€§èƒ½æå‡215%ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a5827558dac469aa23633899c68b0a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=YMq3blQi4Z9AEp%2BoK1jT9G8HqTQ%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h2 data-id="heading-3">2ã€DongSQLåœ¨å¹¶å‘æ§åˆ¶ä¸Šçš„ä¼˜åŒ–</h2>
<h3 data-id="heading-4">2.1. CCLå¹¶å‘æ§åˆ¶</h3>
<p><strong>â–¶ï¸ å¤šç»´åº¦é™æµæœºåˆ¶</strong>ï¼šDongSQLå®ç°äº†CCL(Concurrency Control)å¹¶å‘æ§åˆ¶åŠŸèƒ½ï¼Œé€šè¿‡å¤šç»´åº¦çš„é™æµç­–ç•¥ï¼Œæœ‰æ•ˆè§£å†³ç”µå•†ç§’æ€åœºæ™¯ä¸‹çš„çƒ­ç‚¹æ•°æ®è®¿é—®é—®é¢˜ã€‚</p>
<p>ä¼ ç»Ÿæ•°æ®åº“åœ¨é¢å¯¹é«˜å¹¶å‘çƒ­ç‚¹æ•°æ®è®¿é—®æ—¶ï¼Œå¾€å¾€ä¼šå› ä¸ºæ¿€çƒˆçš„é”ç«äº‰å¯¼è‡´æ€§èƒ½æ€¥å‰§ä¸‹é™ï¼Œç”šè‡³ç³»ç»Ÿé›ªå´©ã€‚DongSQLçš„CCLé€šè¿‡æ™ºèƒ½æ’é˜Ÿæœºåˆ¶ï¼Œå°†æ— åºçš„å¹¶å‘è¯·æ±‚è½¬æ¢ä¸ºæœ‰åºå¤„ç†ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†è¿™ä¸€é—®é¢˜ã€‚</p>
<p><strong>â–¶ï¸ å¤šç»´åº¦æ§åˆ¶ç­–ç•¥</strong>ï¼š</p>
<p>â€¢<strong>åŸºäºå­—æ®µçš„é™æµ</strong>ï¼š<code>ccl_queue_field(column_name, concurrency)</code>ï¼Œå¯¹ç‰¹å®šå­—æ®µå€¼è¿›è¡Œå¹¶å‘æ§åˆ¶</p>
<p>â€¢<strong>åŸºäºå€¼çš„é™æµ</strong>ï¼š<code>ccl_queue_value(value, concurrency)</code>ï¼Œå¯¹ç‰¹å®šæ•°æ®å€¼è¿›è¡Œç²¾å‡†é™æµ</p>
<p>â€¢<strong>åŸºäºSQLæŒ‡çº¹çš„é™æµ</strong>ï¼š<code>ccl_queue_digest(concurrency)</code>ï¼Œå¯¹ç›¸åŒSQLæ¨¡å¼è¿›è¡Œç»Ÿä¸€ç®¡æ§</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--Â å¯¹å•†å“IDä¸º999çš„çƒ­é—¨å•†å“è¿›è¡Œé™æµï¼Œå¹¶å‘åº¦é™åˆ¶ä¸º5</span>
Â <span class="hljs-keyword">SELECT</span>Â <span class="hljs-comment">/*+Â ccl_queue_value(999,Â 5)Â */</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â productsÂ <span class="hljs-keyword">WHERE</span>Â product_idÂ <span class="hljs-operator">=</span>Â <span class="hljs-number">999</span>;Â 
Â 
Â <span class="hljs-comment">--Â å¯¹åº“å­˜æ‰£å‡æ“ä½œæŒ‰å•†å“IDè¿›è¡Œé™æµÂ </span>
Â <span class="hljs-keyword">UPDATE</span>Â <span class="hljs-comment">/*+Â ccl_queue_field(product_id,Â 8)Â */</span>Â inventoryÂ <span class="hljs-keyword">SET</span>Â stockÂ <span class="hljs-operator">=</span>Â stockÂ <span class="hljs-operator">-</span>Â <span class="hljs-number">1</span>Â <span class="hljs-keyword">WHERE</span>Â product_idÂ <span class="hljs-operator">=</span>Â ?;Â 
Â 
Â <span class="hljs-comment">--Â å¯¹ç›¸åŒSQLæ¨¡å¼è¿›è¡Œç»Ÿä¸€é™æµÂ </span>
Â <span class="hljs-keyword">SELECT</span>Â <span class="hljs-comment">/*+Â ccl_queue_digest(10)Â */</span>Â <span class="hljs-operator">*</span>Â <span class="hljs-keyword">FROM</span>Â hot_productsÂ <span class="hljs-keyword">WHERE</span>Â statusÂ <span class="hljs-operator">=</span>Â <span class="hljs-number">1</span>;
</code></pre>
<p><strong>â–¶ï¸ æ€§èƒ½çªç ´æ•°æ®</strong>ï¼š</p>
<p>â€¢<strong>ç§’æ€åœºæ™¯ä¼˜åŒ–</strong>ï¼šåœ¨4096å¹¶å‘ä¸‹ï¼Œä½¿ç”¨CCLé™æµåTPSä»573æå‡è‡³1337ï¼Œæ€§èƒ½æå‡133%</p>
<p>â€¢<strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ï¼šæœ‰æ•ˆé˜²æ­¢ç³»ç»Ÿé›ªå´©ï¼Œå°†æ— åºå¹¶å‘è½¬æ¢ä¸ºæœ‰åºå¤„ç†</p>
<p>â€¢<strong>çƒ­ç‚¹ç¼“è§£</strong>ï¼šé€šè¿‡é˜Ÿåˆ—æœºåˆ¶æ˜¾è‘—é™ä½çƒ­ç‚¹æ•°æ®çš„é”ç«äº‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/853112ad066541f39608b88cdda91325~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=7P3xIjvJjwLakQOpp47PQ%2Bs5Qec%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-5">2.2. Statement Outlineæ‰§è¡Œè®¡åˆ’åŠè‡ªå®šä¹‰æç¤ºç®¡ç†</h3>
<p><strong>â–¶ï¸ ä¼ä¸šçº§è®¡åˆ’ç¨³å®šæ€§</strong>ï¼šDongSQLæä¾›äº†Statement OutlineåŠŸèƒ½ï¼Œç”¨äºå›ºåŒ–é‡è¦SQLçš„æ‰§è¡Œè®¡åˆ’ï¼Œé˜²æ­¢å› æ•°æ®å˜åŒ–å¯¼è‡´çš„è®¡åˆ’ä¸ç¨³å®šé—®é¢˜ã€‚</p>
<p><strong>â–¶ï¸ è‡ªå®šä¹‰Hintæ³¨å…¥å·¥å…·</strong>ï¼šåŒ…æ‹¬ä½†ä¸é™äºä¸Šè¿°ç§’æ€ã€CCLé™æµåœºæ™¯çš„Hintï¼Œå³ä½¿ä¸šåŠ¡ç ”å‘é¢„æœŸå¤–çš„è¿‡è½½æˆ–è€…çªå‘æµé‡å‘ç”Ÿï¼Œåº”æ€¥æƒ…å†µä¸‹DBAä¹Ÿå¯ä»¥é€šè¿‡Statement OutlineåŠŸèƒ½å¯¹é—®é¢˜SQLè¿›è¡Œå¹²é¢„</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">--Â ä¸ºé‡è¦SQLå›ºåŒ–æ‰§è¡Œè®¡åˆ’Â </span>
<span class="hljs-keyword">CALL</span>Â dbms_outln.add_index_outline(Â Â 
<span class="hljs-string">'test_db'</span>,Â <span class="hljs-string">''</span>,Â <span class="hljs-number">1</span>,Â <span class="hljs-string">'USEÂ INDEX'</span>,Â <span class="hljs-string">'idx_status'</span>,Â <span class="hljs-string">''</span>,Â Â 
Â <span class="hljs-string">'SELECTÂ *Â FROMÂ ordersÂ WHEREÂ statusÂ =Â "PAID"'</span>Â 
Â );Â 
Â <span class="hljs-comment">--Â ä¸ºç‰¹å®šæŸ¥è¯¢æ·»åŠ ccl_queue_digesté™æµhintï¼Œé™åˆ¶å¹¶å‘åº¦ä¸º2Â </span>
<span class="hljs-keyword">CALL</span>Â dbms_outln.add_optimizer_outline(Â Â 
<span class="hljs-string">'test_db'</span>,Â <span class="hljs-string">''</span>,Â <span class="hljs-number">1</span>,Â <span class="hljs-string">'/*+Â ccl_queue_digest(2)Â */'</span>,Â Â 
<span class="hljs-string">'SELECTÂ *Â FROMÂ ordersÂ WHEREÂ customer_idÂ =Â 1001'</span>Â );
</code></pre>
<p><strong>â–¶ï¸ æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<p>â€¢<strong>æ€§èƒ½ç¨³å®šæ€§</strong>ï¼šä¿éšœæ ¸å¿ƒSQLæ€§èƒ½ä¸å› æ•°æ®å˜åŒ–è€Œæ³¢åŠ¨</p>
<p>â€¢<strong>æ™ºèƒ½é™æµ</strong>ï¼šæ”¯æŒåŸºäºSQLæŒ‡çº¹çš„æ‰‹åŠ¨é™æµå’Œè‡ªåŠ¨é™æµ(è‡ªåŠ¨é™æµé»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦å¼€å¯çš„ä¸šåŠ¡éœ€å•ç‹¬ç”³è¯·)</p>
<p>â€¢<strong>ä¼ä¸šçº§ç®¡ç†</strong>ï¼šæä¾›ç”Ÿäº§çº§çš„æ‰§è¡Œè®¡åˆ’ç®¡ç†èƒ½åŠ›</p>
<h2 data-id="heading-6">3ã€DongSQLåœ¨æŸ¥è¯¢ä¼˜åŒ–ä¸Šçš„æ”¹è¿›</h2>
<h3 data-id="heading-7">3.1. å•ç‚¹æŸ¥è¯¢ä¼˜åŒ–</h3>
<p><strong>â–¶ï¸ æŸ¥è¯¢è·¯å¾„ä¼˜åŒ–</strong>ï¼šDongSQLå®ç°äº†å•ç‚¹æŸ¥è¯¢bypassåŠŸèƒ½ï¼Œé’ˆå¯¹ä¸»é”®ç­‰å€¼æŸ¥è¯¢è¿™ç±»é«˜é¢‘ç®€å•æŸ¥è¯¢ï¼Œç»•è¿‡éƒ¨åˆ†SQLå±‚å¤„ç†é€»è¾‘ï¼Œç›´æ¥è®¿é—®å­˜å‚¨å¼•æ“ï¼Œå¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<p>ç”µå•†åœºæ™¯ä¸­ï¼Œå•†å“è¯¦æƒ…æŸ¥è¯¢ã€ç”¨æˆ·ä¿¡æ¯æŸ¥è¯¢ç­‰åŸºäºä¸»é”®çš„ç®€å•æŸ¥è¯¢å æ®äº†å¾ˆå¤§æ¯”ä¾‹ã€‚è™½ç„¶è¿™äº›æŸ¥è¯¢é€»è¾‘ç®€å•ï¼Œä½†åœ¨é«˜å¹¶å‘ä¸‹ä»ç„¶æ¶ˆè€—å¤§é‡CPUèµ„æºã€‚DongSQLçš„å•ç‚¹æŸ¥è¯¢ä¼˜åŒ–é’ˆå¯¹è¿™ä¸€ç—›ç‚¹è¿›è¡Œäº†ä¸“é¡¹ä¼˜åŒ–ã€‚</p>
<p><strong>â–¶ï¸ æ€§èƒ½æå‡æ•°æ®</strong>ï¼š</p>
<p>â€¢<strong>ä¸åŒç¯å¢ƒæ€§èƒ½æå‡</strong>ï¼šå®¹å™¨ç¯å¢ƒæå‡20%ï¼Œç‰©ç†æœºç¯å¢ƒæå‡30%</p>
<p>â€¢<strong>é«˜å¹¶å‘åœºæ™¯</strong>ï¼šå½“CPUè¾¾åˆ°ç“¶é¢ˆæ—¶ï¼ŒQPSæå‡20-28%</p>
<p>â€¢<strong>èµ„æºæ•ˆç‡</strong>ï¼šç›¸åŒç¡¬ä»¶é…ç½®ä¸‹å¤„ç†èƒ½åŠ›æ˜¾è‘—æå‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/246092d7b5474dedb667a73110149ae4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=o2blg0q5THYoHHPbqKiFb4aHNo4%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-8">3.2. çº¿ç¨‹æ± ä¼˜åŒ–</h3>
<p><strong>â–¶ï¸ é«˜å¹¶å‘å¤„ç†èƒ½åŠ›</strong>ï¼šDongSQLå®ç°äº†ä¼ä¸šçº§çº¿ç¨‹æ± åŠŸèƒ½ï¼Œé€šè¿‡æ™ºèƒ½çº¿ç¨‹è°ƒåº¦å’Œèµ„æºç®¡ç†ï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å¤„ç†èƒ½åŠ›å’Œç¨³å®šæ€§ã€‚</p>
<p>ä¼ ç»Ÿæ•°æ®åº“åœ¨é¢å¯¹å¤§é‡å¹¶å‘è¿æ¥æ—¶ï¼Œä¼šä¸ºæ¯ä¸ªè¿æ¥åˆ›å»ºç‹¬ç«‹çº¿ç¨‹ï¼Œè¿™åœ¨é«˜å¹¶å‘ä¸‹ä¼šå¯¼è‡´çº¿ç¨‹åˆ‡æ¢å¼€é”€è¿‡å¤§ã€å†…å­˜æ¶ˆè€—æ¿€å¢ç­‰é—®é¢˜ã€‚DongSQLçš„çº¿ç¨‹æ± ä¼˜åŒ–é€šè¿‡å¤ç”¨çº¿ç¨‹èµ„æºï¼Œæœ‰æ•ˆè§£å†³äº†è¿™äº›é—®é¢˜ã€‚</p>
<p><strong>â–¶ï¸ è°ƒåº¦æœºåˆ¶</strong>ï¼š</p>
<p>â€¢<strong>çº¿ç¨‹å¤ç”¨ï¼š</strong> é€šè¿‡çº¿ç¨‹æ± å¤ç”¨å‡å°‘çº¿ç¨‹åˆ›å»ºé”€æ¯å¼€é”€</p>
<p>â€¢<strong>è´Ÿè½½å‡è¡¡ï¼š</strong> åˆ†é…ä»»åŠ¡åˆ°ä¸åŒçº¿ç¨‹ï¼Œé¿å…çƒ­ç‚¹çº¿ç¨‹</p>
<p>â€¢<strong>ä¼˜å…ˆçº§è°ƒåº¦ï¼š</strong> æ”¯æŒä»»åŠ¡ä¼˜å…ˆçº§ï¼Œä¿éšœé‡è¦ä¸šåŠ¡ä¼˜å…ˆå¤„ç†</p>
<p><strong>â–¶ï¸ æ€§èƒ½çªç ´æ•°æ®</strong>ï¼ˆåŸºäº8C32Gæµ‹è¯•ç¯å¢ƒï¼Œsysbench 16å¼ è¡¨æ¯å¼ 1000ä¸‡è¡Œæ•°æ®ï¼‰ï¼š</p>
<p><strong>åªè¯»åœºæ™¯æ€§èƒ½å¯¹æ¯”</strong>ï¼š</p>
<p>â€¢<strong>ä½å¹¶å‘ä¼˜åŠ¿</strong>ï¼š32çº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹æ± æ¨¡å¼QPSè¾¾åˆ°141,261ï¼Œç›¸æ¯”ä¼ ç»Ÿæ¨¡å¼çš„110,658æå‡27.6%</p>
<p>â€¢<strong>é«˜å¹¶å‘ç¨³å®šæ€§</strong>ï¼šåœ¨512çº¿ç¨‹é«˜å¹¶å‘ä¸‹ï¼Œçº¿ç¨‹æ± æ¨¡å¼QPSä¿æŒ131,939ï¼Œè€Œä¼ ç»Ÿæ¨¡å¼ä»…61,580ï¼Œæ€§èƒ½æå‡114%</p>
<p>â€¢<strong>å»¶è¿Ÿæ§åˆ¶</strong>ï¼š512çº¿ç¨‹æ—¶TP99å»¶è¿Ÿä»ä¼ ç»Ÿæ¨¡å¼çš„297.92msä¼˜åŒ–åˆ°118.92msï¼Œé™ä½60%</p>
<p><strong>çº¯å†™åœºæ™¯æ€§èƒ½çªç ´</strong>ï¼š</p>
<p>â€¢<strong>ä¸­ç­‰å¹¶å‘</strong>ï¼š64çº¿ç¨‹æ—¶QPSä»46,577æå‡åˆ°57,655ï¼Œæ€§èƒ½æå‡23.8%</p>
<p>â€¢<strong>é«˜å¹¶å‘åœºæ™¯</strong>ï¼š512çº¿ç¨‹æ—¶QPSä»29,541æå‡åˆ°58,166ï¼Œæ€§èƒ½æå‡97%</p>
<p>â€¢<strong>è¶…é«˜å¹¶å‘</strong>ï¼š4096çº¿ç¨‹æ—¶QPSä»28,571æå‡åˆ°54,687ï¼Œæ€§èƒ½æå‡91%</p>
<p><strong>è¯»å†™æ··åˆåœºæ™¯ä¼˜åŒ–</strong>ï¼š</p>
<p>â€¢<strong>128çº¿ç¨‹</strong>ï¼šQPSä»54,870æå‡åˆ°80,244ï¼Œæ€§èƒ½æå‡46%</p>
<p>â€¢<strong>256çº¿ç¨‹</strong>ï¼šQPSä»48,787æå‡åˆ°77,961ï¼Œæ€§èƒ½æå‡60%</p>
<p>â€¢<strong>å»¶è¿Ÿä¼˜åŒ–</strong>ï¼š256çº¿ç¨‹æ—¶TP99å»¶è¿Ÿä»196.89msä¼˜åŒ–åˆ°158.63msï¼Œé™ä½19%</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/853868c0a1cb4256942759766e9739e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765359847&amp;x-signature=uhYejtH%2BSG6rLu8JlS8VDzxgI7Y%3D" alt="å›¾ç‰‡.png" loading="lazy"/></p>
<h3 data-id="heading-9">3.3. Â å…¶ä»–æŸ¥è¯¢æ‰§è¡Œä¼˜åŒ–</h3>
<p><strong>â–¶ï¸ æ‰§è¡Œè·¯å¾„ä¼˜åŒ–</strong>ï¼šDongSQLåœ¨æŸ¥è¯¢æ‰§è¡Œå¼•æ“å±‚é¢è¿›è¡Œäº†å¤šé¡¹ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ç®—å­ä¼˜åŒ–ã€å†…å­˜ç®¡ç†ä¼˜åŒ–ã€å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–ç­‰ã€‚</p>
<p><strong>â–¶ï¸ ç¼“å­˜æœºåˆ¶å¢å¼º</strong>ï¼šä¼˜åŒ–äº†Buffer Poolç®¡ç†ç­–ç•¥ï¼Œé¡µé¢mutexä¼˜åŒ–ï¼Œæå‡äº†æ•°æ®è®¿é—®æ•ˆç‡ï¼Œé™ä½äº†I/Oé”å†²çªã€‚</p>
<h2 data-id="heading-10">4ã€æ€§èƒ½åŸºå‡†æµ‹è¯•æ±‡æ€»</h2>
<h3 data-id="heading-11">OLTPæ ‡å‡†åŸºå‡†æµ‹è¯•</h3>
<p>åŸºäºæ ‡å‡†æµ‹è¯•ç¯å¢ƒçš„æ€§èƒ½æ•°æ®ï¼ˆ16C32G, 16å¼ è¡¨ï¼Œæ¯å¼ è¡¨100ä¸‡è¡Œï¼‰ï¼š</p>





















































<table><thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>æœ€ä½³çº¿ç¨‹æ•°</th><th>TPS</th><th>QPS</th><th>TP99å»¶è¿Ÿ</th><th>å¹³å‡å»¶è¿Ÿ</th></tr></thead><tbody><tr><td>åªè¯»æŸ¥è¯¢</td><td>64</td><td>19,484</td><td>311,745</td><td>21.50ms</td><td>3.28ms</td></tr><tr><td>åªå†™æ“ä½œ</td><td>256</td><td>17,004</td><td>102,025</td><td>29.72ms</td><td>15.05ms</td></tr><tr><td>æ’å…¥æ“ä½œ</td><td>256</td><td>25,614</td><td>25,614</td><td>15.83ms</td><td>9.99ms</td></tr><tr><td>è¯»å†™æ··åˆ</td><td>128</td><td>9,795</td><td>195,908</td><td>33.12ms</td><td>13.06ms</td></tr><tr><td>ç‚¹æŸ¥è¯¢</td><td>64</td><td>560,933</td><td>560,933</td><td>0.18ms</td><td>0.11ms</td></tr></tbody></table>
<h3 data-id="heading-12">ç”µå•†åœºæ™¯ä¸“é¡¹æ€§èƒ½æ±‡æ€»</h3>



































<table><thead><tr><th>ä¼˜åŒ–æ¨¡å—</th><th>æµ‹è¯•åœºæ™¯</th><th>æ€§èƒ½æå‡å¹…åº¦</th><th>å…³é”®æŒ‡æ ‡</th></tr></thead><tbody><tr><td><strong>RETURNINGå­å¥</strong></td><td>å›ºå®šè¡Œæ›´æ–°</td><td><strong>61%</strong></td><td>TPS: 925â†’1,490</td></tr><tr><td><strong>CCLå¹¶å‘æ§åˆ¶</strong></td><td>ç§’æ€åœºæ™¯</td><td><strong>133%</strong></td><td>TPS: 573â†’1,337</td></tr><tr><td><strong>Inventory Hint</strong></td><td>åº“å­˜æ‰£å‡</td><td><strong>215%</strong></td><td>TPS: 1,537â†’4,843</td></tr><tr><td><strong>å•ç‚¹æŸ¥è¯¢ä¼˜åŒ–</strong></td><td>ä¸»é”®æŸ¥è¯¢</td><td><strong>28%</strong></td><td>QPS: 76,432â†’98,470</td></tr></tbody></table>
<h2 data-id="heading-13">5ã€æœªæ¥è§„åˆ’</h2>
<p>1.<strong>æŒç»­è¯­æ³•æ‰©å±•</strong>ï¼šåŸºäºä¸šåŠ¡éœ€æ±‚ç»§ç»­æ‰©å±•SQLè¯­æ³•åŠŸèƒ½</p>
<p>2.<strong>æ™ºèƒ½ä¼˜åŒ–å¢å¼º</strong>ï¼šå¼•å…¥æœºå™¨å­¦ä¹ ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’é€‰æ‹©</p>
<p>3.<strong>å†…æ ¸çº§æŠ€æœ¯æ”¯æŒ</strong>ï¼šå…·å¤‡å†…æ ¸ç ”å‘èƒ½åŠ›çš„å›¢é˜Ÿï¼ŒæŒç»­ä»æœ€åº•å±‚ä¸ºä¸šåŠ¡ç ”å‘æä¾›æ·±åº¦ä¼˜åŒ–çš„æ•°æ®åº“è§£å†³æ–¹æ¡ˆ</p>
<p>4.<strong>äº‘åŸç”Ÿå­˜ç®—åˆ†ç¦»</strong>ï¼šç»§ç»­æ‰“é€ å±äºäº¬ä¸œè‡ªå·±çš„é«˜æ€§èƒ½ä½æˆæœ¬æ•°æ®åº“äº§å“</p>
<h2 data-id="heading-14">6ã€ç»“è¯­</h2>
<p>ä»å¼€æºå†…æ ¸åˆ°è‡ªç ”DongSQLï¼Œäº¬ä¸œé›¶å”®æ•°æ®åº“å›¢é˜Ÿå§‹ç»ˆä»¥"ä¸šåŠ¡ä»·å€¼é©±åŠ¨æŠ€æœ¯åˆ›æ–°"ä¸ºæ ¸å¿ƒç†å¿µã€‚DongSQLä½œä¸ºä¸“ä¸ºäº¬ä¸œç”µå•†åœºæ™¯è®¾è®¡çš„æ•°æ®åº“ï¼Œé€šè¿‡è¯­æ³•æ‰©å±•ã€å¹¶å‘æ§åˆ¶ã€æŸ¥è¯¢ä¼˜åŒ–ç­‰å¤šä¸ªæ¨¡å—çš„æ·±åº¦åˆ›æ–°ï¼Œä¸ºç”µå•†ä¸šåŠ¡çš„å¿«é€Ÿå‘å±•æä¾›äº†å¼ºæœ‰åŠ›çš„æ•°æ®åº“æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<p>è¿™äº›ä¼˜åŒ–ä¸ä»…æå‡äº†ç³»ç»Ÿæ€§èƒ½ï¼Œæ›´é‡è¦çš„æ˜¯ä¸ºé›†å›¢åŸºç¡€æŠ€æœ¯åº•åº§æä¾›äº†åšå®çš„åŸºç¡€ã€‚æœªæ¥ï¼Œäº¬ä¸œé›¶å”®æ•°æ®åº“å›¢é˜Ÿå°†æŒç»­æ·±è€•æ•°æ®åº“å†…æ ¸æŠ€æœ¯ï¼Œè®©æ•°æ®åº“æ›´å¥½åœ°æœåŠ¡ä¸šåŠ¡å‘å±•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Trae SOLOé¡¹ç›®çœŸå®éœ€æ±‚]]></title>    <link>https://juejin.cn/post/7572997791451611174</link>    <guid>https://juejin.cn/post/7572997791451611174</guid>    <pubDate>2025-11-17T02:42:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572997791451611174" data-draft-id="7572115057221369891" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Trae SOLOé¡¹ç›®çœŸå®éœ€æ±‚"/> <meta itemprop="keywords" content="Trae,å‰ç«¯,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-11-17T02:42:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Trae SOLOé¡¹ç›®çœŸå®éœ€æ±‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-17T02:42:42.000Z" title="Mon Nov 17 2025 02:42:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    155
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>çœ‹åˆ° Trae SOLO æ¨¡å¼é™æ—¶å…è´¹äº†ï¼Œè¶ç€å…è´¹ï¼Œèµ¶ç´§ä½“éªŒä¸€æ³¢ï¼ŒDemo ä»€ä¹ˆçš„å°±ä¸è¯•äº†ï¼Œç›´æ¥ç”¨ SOLO æ¨¡å¼ SOLO ä¸šåŠ¡é¡¹ç›®ï¼Œå¼€å¹²ï¼Œæœ€ç»ˆç›®æ ‡éƒ½æ˜¯è¦æœåŠ¡äºä¸šåŠ¡é¡¹ç›®çš„</p>
<p>æˆ‘æ˜¯ä¸€åŠæ¯›å‰ç«¯å¼€å‘ï¼Œå°±ä»å½“å‰åšçš„å‰ç«¯é¡¹ç›®å¼€ç”¨å§ï¼Œæ¥ä¸‹æ¥å¹²çš„æ´»æ˜¯æ”¹å¤§å±é¡µï¼Œå°±ä»å¤§å±é¡µé¢å¼€å§‹ï¼Œæ™®é€šä¸šåŠ¡é€»è¾‘çš„è¯å„è·¯ AI å¯èƒ½è¡¨ç°éƒ½è¿˜è¡Œï¼Œä¹‹å‰æµ‹è¯•çš„æ˜¯å¤§å±è¿™ç§æ˜æ˜¾é æ„Ÿè§‰çš„è¿˜æ˜¯å·®ç‚¹æ„æ€ï¼Œå¤§å±é¡µé¢åŸºæœ¬ä¸»è¦è¿˜æ˜¯æ‰‹åŠ¨æ”¹</p>
<h2 data-id="heading-1">ä½¿ç”¨ SOLO</h2>
<h3 data-id="heading-2">ç•Œé¢åˆ†æ</h3>
<p>æ›´æ–° Trae åæ‰“å¼€é¡¹ç›®ï¼Œåˆ†ä¸º4å¤§å—ï¼Œä»å·¦åˆ°å³åˆ†åˆ«æ˜¯ SOLOæ¨¡å¼ä»»åŠ¡ï¼Œå¯¹è¯åŒºï¼Œä»£ç åŒºï¼Œèµ„æºç®¡ç†å™¨ï¼Œè¿™ç‚¹å’Œå¸¸è§çš„ç¼–è¾‘å™¨é»˜è®¤æ’ç‰ˆåˆšå¥½ç›¸åï¼Œä¸è¿‡æ— æ‰€è°“ï¼Œæ—¢ç„¶è¿™ä¹ˆè®¾è®¡ï¼Œè‚¯å®šæ˜¯æœ‰ä»–çš„é“ç†çš„ï¼Œå› ä¸ºç°åœ¨æ¨¡å¼å˜äº†ï¼Œä¸»è¦ä»¥å¯¹è¯ï¼Œä»»åŠ¡æè¿°ä¸ºä¸»ï¼Œç„¶åå†çœ‹ä»£ç </p>
<h3 data-id="heading-3">å¼€å§‹å¯¹è¯</h3>
<p>ä¸‹é¢æ˜¯æˆ‘è¿è¡Œé¡¹ç›®åï¼Œå…ˆåœ¨å¯¹è¯åŒºå…ˆè®©å®ƒæŠŠä¸€ä¸ªé¡µé¢çš„ tab é€‰é¡¹å¡é»˜è®¤å€¼æ”¹ä¸€ä¸‹ï¼Œå®ƒä¼šè‡ªåŠ¨æ£€ç´¢é¡¹ç›®ä»£ç ï¼Œç„¶åæ ¹æ®æè¿°é»˜è®¤ç›´æ¥å˜æ›´ä»£ç ï¼Œç„¶åæœ€å·¦ä¾§ä»»åŠ¡ä¼šè‡ªåŠ¨æ ¹æ®ä»»åŠ¡å†…å®¹ç”Ÿæˆä¸€ä¸ªä»»åŠ¡åç§°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f732a2c7e03e413b9c6094df91daf255~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=9jsPx1B1dQawuR3fELLnCT1rm7g%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘å‘ç° SOLO Coder æ˜¯è‡ªåŠ¨å°±æŠŠé¡¹ç›®ä»£ç å˜æ›´äº†çš„ï¼Œè¿™é‡Œæœ‰ä¸ªé€‰é¡¹ï¼Œå°±æ˜¯ç”¨æˆ·ç¡®è®¤åæ”¹ä»£ç å’Œè‡ªåŠ¨ç›´æ¥æ”¹ä»£ç ï¼ŒæŠŠè¿™ä¸ªç¡®è®¤åŠ ä¸Šäº†ï¼Œé˜²æ­¢æŠŠé¡¹ç›®ç»™æ”¹å´©äº†ï¼Œä¸å¥½è¿˜åŸäº†ï¼Œä¹‹å‰é‡åˆ°è¿‡çš„ç—›è‹¦ç»å†ï¼Œç”¨ Agent æ”¹ä»£ç ï¼Œç»“æœå´©äº†ï¼Œè¿˜è‡ªåŠ¨æ”¹äº†ï¼Œä½†æ˜¯åªæ”¹äº†åŠæˆªï¼Œè¿˜åŸä¹Ÿåªèƒ½è¿˜åŸåŠæˆªï¼Œå› ä¸ºæ¶‰åŠäº†å¥½å‡ ä¸ªæ–‡ä»¶ï¼Œæˆ‘æ‰‹åŠ¨å­å“§å­å“§å¿™æ´»åŠå¤©æ‰æ¢å¤ï¼Œæ•´çš„éƒ½æœ‰é˜´å½±äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5004c1e574dd4118a65b83a9eb7097b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=ywI4rtd8wdOrl1WoUqX5z0l8u78%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒæ¬¡ç»§ç»­ï¼Œæ”¹ç‚¹æ•°æ®çœ‹çœ‹ï¼Œé¡ºä¾¿è°ƒæ•´ä¸€ä¸‹å¸ƒå±€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df149e0d4b4e4aa39338da8b5b3e8063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=LX56MZXyMtDtuBP2uVX7fHHTfxw%3D" alt="image.png" loading="lazy"/></p>
<p>ä»»åŠ¡æ‰§è¡Œå®ŒåæŸ¥çœ‹å˜æ›´ï¼Œç‚¹å‡»æŸ¥çœ‹å˜æ›´ï¼Œå³ä¾§ä¼šæ˜¾ç¤ºä¸¤ä¸ªæŠ˜å é¢æ¿ï¼Œä¸€ä¸ªæè¿°éœ€æ±‚ï¼Œä¸€ä¸ªæ˜¯ä»£ç å˜æ›´</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dfea62001dd4036b56797256e6bb63c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=sd1gNACz%2FDwm119mforu9oI0cQw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d52a08d3d1941eeacf47e78be67f28a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=gUoMeG5iMAJl7D1NJZqra4V0q6o%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸¤ä¸ªæ˜ç¡®çš„å°æ”¹åŠ¨ç›®å‰ SOLO é¡¹ç›®ä¸­å†…å®¹æ”¹çš„æ­£ç¡®ï¼Œæ•´ä½“è¡¨ç°è¿˜ä¸é”™ï¼Œ<code>æ‰‹åŠ¨ç‚¹èµ</code></p>
<h3 data-id="heading-4">ä¸Šç‚¹å¼ºåº¦</h3>
<p>æ¥ä¸‹æ¥ç»§ç»­ä¸Šå¼ºåº¦è¯•è¯•ï¼Œæ·»åŠ ä¸€ä¸ªå›¾è¡¨ï¼Œæä¾›äº†æ ‡é¢˜ï¼ŒXè½´å’ŒYè½´æ•°æ®å’Œæè¿°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d1925e7b921404386ab811d7e07c298~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=PcWtwvC7srKSO13lzc2LMMdlxGw%3D" alt="image.png" loading="lazy"/></p>
<p>ç­‰äº†ä¸€ä¼šå„¿ï¼Œæ‰§è¡Œå®Œäº†ï¼Œè¿™ä¸ªåº”è¯¥æ¯”è¾ƒç®€å•ï¼Œåªæ˜¯åŠ ä¸€ä¸ªå›¾è¡¨è€Œå·²ï¼Œåº”è¯¥é—®é¢˜ä¸å¤§ï¼Œçœ‹ç€ä»£ç é¡µæ²¡å•¥å¤§é—®é¢˜</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d7f594af0224aca8b0e7e26b81d7680~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=ZvxkC%2FqYx7LUZC6MyRifRcompC0%3D" alt="image.png" loading="lazy"/></p>
<p>é¡µé¢ä¸Šæ•ˆæœåªæ˜¯ä¸€ä¸ªç©ºç™½ï¼Œæ¡†æ˜¯åŠ äº†ä¸€ä¸ªï¼Œä½†æ˜¯å›¾è¡¨æ²¡æ¸²æŸ“å‡ºæ¥ï¼Œè€Œä¸”ä½ç½®ä¸å¯¹ï¼Œæ²¡æœ‰åœ¨å¯¹åº”çš„å†…å®¹ä¸‹é¢ç”Ÿæˆå›¾è¡¨ï¼Œå¯èƒ½æè¿°çš„è¿˜ä¸å¤Ÿå‡†ç¡®ï¼Œä½ç½®å€’è¿˜å¥½ï¼Œä¸»è¦å†…å®¹æ²¡å‡ºæ¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2886b62385be43a292064da1762b7dae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=njfvxXNr%2B6Hsawp4OJFGS4pL11c%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œçš„å†…å®¹æ˜¯åœ¨é¡¹ç›®å¼¹æ¡†ä¸­ï¼Œç”¨çš„tabåˆ‡æ¢æ˜¾ç¤ºçš„é¡µé¢ï¼Œå¯èƒ½åŠ è½½æ—¶æœºæœ‰é—®é¢˜ï¼Œç›®å‰æµè§ˆå™¨æ§åˆ¶å°æ— æŠ¥é”™ï¼Œå…ˆé—®åé¦ˆä¸€ä¸‹ SOLOï¼Œå†è®©å®ƒåˆ†æä¸€ä¸‹</p>
<p>å®ƒæ ¹æ®ç†è§£åˆå“å“æ”¹äº†å‡ è¡Œä»£ç ï¼Œè¯´è¿™ä¸ª <code>ç°åœ¨ï¼Œå›¾è¡¨ä¼šåœ¨é¡µé¢æ¸²æŸ“å®Œæˆåå¯é åˆå§‹åŒ–ï¼Œå¹¶åœ¨åˆ‡æ¢åˆ°è¯¥é¡µç­¾æ—¶å†æ¬¡åˆå§‹åŒ–ï¼Œç¡®ä¿æ­£å¸¸æ˜¾ç¤º</code>ï¼Œå®ƒåªè´Ÿè´£ç”Ÿæˆä»£ç ï¼Œè¯´çš„å¥½ä¼¼å®ƒäº²çœ¼è§è¿‡ä¸€æ ·</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62ab09b5ee644981a1c862b1a5cbc797~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=8jPLUsdGCzd4jGlcUtBijlZjAcM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07d8b7a804e3453490db720a73963fd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=QryXwKHumfpw12k%2BsFI5clPwfjw%3D" alt="image.png" loading="lazy"/></p>
<p>æµè§ˆå™¨æ§åˆ¶å°æœ‰è­¦å‘Šï¼Œå›¾è¡¨è¿˜æ˜¯ç©ºæ¡†ï¼Œå®ŒçŠŠå­äº†ï¼Œè¿™é‡Œçš„ä»£ç ç”±äºæ¶‰åŠåˆ°ä¸šåŠ¡ä¸€äº›ä¸œè¥¿ï¼Œä¼°è®¡å®ƒæ²¡æ•´æ˜ç™½ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯è¿™ä¸ªshiå±±é¡¹ç›®é‡Œé¢çš„ä¸€å¨ä¸€å¨çš„ä»£ç è¯¯å¯¼çš„ï¼‰ï¼Œå¾—æ‰‹åŠ¨å®Œæ•´æ’æŸ¥ä¸€ä¸‹è¿™éƒ¨åˆ†ç›¸å…³ä»£ç äº†</p>
<h3 data-id="heading-5">æ¢å¤æ‰‹åŠ¨</h3>
<p>ç„¶åæˆ‘æŠŠè¿™ä¸ª Trae å…³äº†ï¼Œé‡æ–°æ‰“å¼€äº†ä¸€ä¸‹é¡¹ç›®</p>
<p>æ²ƒæ—¥å•Šï¼Œæ€ä¹ˆåˆ‡æ¢äº†ä¸€ä¸‹æ¨¡å¼é‡å¯åï¼Œä»€ä¹ˆæ”¹åŠ¨éƒ½æ²¡æœ‰äº†ï¼Œå°±å‰©ä¸€ä¸ªé»˜è®¤tabé€‰é¡¹æ•ˆæœè¿˜åœ¨äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c83c619b73fe4efc87570e1c1776559d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=jFih%2B9Qpot1jG92EX4g%2FBHbWIDk%3D" alt="image.png" loading="lazy"/></p>
<p>åˆä½¿ç”¨AIè‡ªåŠ¨æ”¹ä»£ç ç¿»è½¦çš„èŠ‚å¥å—ï¼Œä¸ä¼šåˆè¢«å‘ä¸€ä¸‹åˆå§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08627f1624e44235be9e988c97ecd064~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=jf3XAl9Y68nA8MuT0ttMmZH9uPA%3D" alt="B98613A4BEA6AC9A4DA6C0A602D6C164.gif" loading="lazy"/></p>
<h3 data-id="heading-6">è™šæƒŠä¸€åœº</h3>
<p>è¿™ä»€ä¹ˆé¬¼ï¼Œæˆ‘æŸ¥äº†ä»£ç ï¼Œä»£ç æ›´æ–°çš„éƒ¨åˆ†ä¹Ÿéƒ½æœ‰å•Šï¼Œç¼“å­˜ï¼Ÿ</p>
<p>é‡æ–° pnpm run dev ï¼Œ æŠŠåŸæ¥çš„æµè§ˆå™¨å…³æ‰ï¼Œé‡æ–°ç”¨æ— ç—•æ‰“å¼€ï¼Œåˆå¥½äº†ï¼Œæœç„¶æµè§ˆå™¨ç¼“å­˜æçš„é¬¼ï¼ˆæ¾äº†ä¸€å£æ°”ï¼‰</p>
<p>åˆ‡æ¢æˆç¼–è¾‘å™¨æ¨¡å¼åï¼Œæ‰‹åŠ¨æ”¹ä»£ç æµ‹è¯•ï¼ŒTrae ä¸­æœ‰è¿™ä¹ˆä¸ªæ“ä½œï¼Œè‡ªåŠ¨å†™å…¥ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–ï¼Œå¤§æ¦‚éœ€è¦å‡ åç§’ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹æ…¢ï¼Œä½“éªŒä¸æ˜¯å¾ˆå¥½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d46cb9c4f324e0081ed82bb7ab0d29f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=J9uuW80dzt30%2FjqE7%2FmA9k0WgCA%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘åŠ¨äº†ç‚¹ä¸œè¥¿ï¼Œåˆæç¤º æ­£åœ¨åº”ç”¨ä»£ç æ“ä½œ â€œæ•´ç†å¯¼å…¥â€ è‡ªåŠ¨å†™å…¥ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–ä¿å­˜ï¼Œæ˜¯ä»€ä¹ˆé¬¼ï¼Œæˆ‘æ”¹äº†ä¸ªç´¢å¼•æ•°å­—ï¼Œä¸¤ä¸ªåœ°æ–¹ï¼Œä¹Ÿéœ€è¦å‡ åç§’ï¼Œç”µè„‘ç³»ç»Ÿ Win11å®¶åº­ç‰ˆï¼Œå†…å­˜32Gï¼ŒCPU i5,å°±å¯åŠ¨äº† Traeï¼Œå…¶ä»–ç¼–è¾‘å™¨æ²¡å¼€ï¼Œæˆ‘æŸ¥äº†ä»»åŠ¡æ  CPUï¼Œå†…å­˜ä½¿ç”¨ç‡ä¸é«˜ï¼Œä½†æ˜¯è¿™ä¸ªä½“éªŒå¥½å·®å‘€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8fa2e553d5644ac85ab321e36600722~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=ZeZLiS%2F4mmyoNBdssCbdWrBt8Ws%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">å¥‡æ€ªçš„è‡ªåŠ¨åŒ–</h3>
<p>ä¹ æƒ¯äº†æ”¹ç‚¹ä¸œè¥¿è‡ªåŠ¨åä¿å­˜åï¼Œä¸€ä¸¤ç§’å°±èƒ½åœ¨é¡µé¢ä¸Šæ•ˆæœï¼Œç°åœ¨åœ¨ Trae ä¸­è‡ªåŠ¨ä¿å­˜ï¼Œæ ¼å¼åŒ–å®Œä»¥åå¤§çº¦åå‡ ç§’åï¼Œæ‰èƒ½åœ¨é¡µé¢ä¸Šçœ‹åˆ°æ›´æ–°åçš„æ•ˆæœï¼Œæˆ‘å¤šæ¬¡æµ‹è¯•æ”¹å‡ ä¸ªæ•°å­—æˆ–æ”¹ä¸€è¡Œä»£ç é¡µè¿™æ ·ï¼Œå•Š...... (å¿ƒæ€æ­¤æ—¶æœ‰ç‚¹å´©äº†)</p>
<p>éš¾é“æ˜¯ Trae ä¸­è‡ªåŠ¨ä¿å­˜è®¾ç½®å’Œä¸€äº›æ’ä»¶ä¸€èµ·å·¥ä½œä¸å…¼å®¹çš„é—®é¢˜å—ï¼Ÿæˆ‘è¿™è¾¹å‰ç«¯vue3é¡¹ç›®ï¼Œç›¸å…³æ’ä»¶å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71cf68dcc5ab4b9792f375b869785bfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=M2aJSqleSD0X6LKH9SU42M5e0BE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9aa90be335fb491993e295a2c2f420ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765161809&amp;x-signature=lcTTWk9CZwgHDgYrg18CmRZAu9Y%3D" alt="image.png" loading="lazy"/></p>
<p>ç”±äºè¿›å…¥æ‰‹æ”¹æ¨¡å¼åï¼Œè¿™ä¸ªè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–æ“ä½œæ—¶é—´æœ‰ç‚¹ä¹…ï¼Œå¯èƒ½æ˜¯æˆ‘å“ªé‡Œè®¾ç½®é—®é¢˜ï¼Ÿè¿˜æ˜¯æ“ä½œæ–¹å¼é—®é¢˜ï¼Ÿæ’ä»¶æ˜¯ä» VSCode ä¸­åŒæ­¥è¿‡æ¥çš„ï¼Œè¿™äº›é…ç½®ä¹Ÿæ˜¯æ—¥å¸¸æ“ä½œï¼Œå‡ºç°è¿™ç§æ˜æ˜¾è¿™ä¹ˆä¹…çš„æ—¶é—´å»¶è¿Ÿï¼Œè¿˜æ˜¯æœ‰ç‚¹å¥‡æ€ªçš„</p>
<p>@Trae å®˜ç½‘æŠ€æœ¯äººå‘˜ï¼Œæœ‰ç©ºçœ‹çœ‹ï¼Œéš¾é“ä½ ä»¬æ ‡é…éƒ½æ˜¯ Mac book Pro é¡¶é…ï¼Œç„¶åæµç•…çš„ä¸è¡Œå—</p>
<h2 data-id="heading-8">å°ç»“</h2>
<p>ç›®å‰æ¥çœ‹é™¤äº†ç‰¹åˆ«ä»£ç å®ç°å‡ºæ¥çš„å¥‡è‘©çš„åŠŸèƒ½ï¼Œå¸¸è§çš„åŠŸèƒ½éœ€æ±‚æç¤ºæè¿°ç›¸å¯¹å‡†ç¡®åï¼ŒSOLOæ¨¡å¼æ•´ä½“è¿˜æ˜¯éå¸¸äº®çœ¼çš„ï¼Œè™½ç„¶ä¸­é—´æœ‰ç‚¹å°æ’æ›²ï¼Œæ•´ä½“ Trae SOLO æ¨¡å¼è¿˜æ˜¯éå¸¸äº®çœ¼çš„</p>
<p>ç”±äºè‡ªåŠ¨ä¿å­˜æ ¼å¼åŒ–æ—¶é—´æœ‰ç‚¹é•¿ï¼Œåˆç”±äºåé¢çš„éœ€æ±‚ä¹Ÿä¸å¤ªå¥½ç›´è§‚æè¿°ï¼Œå¹¶ä¸”ä»£ç ä¹Ÿæ˜¯ç‰¹åˆ«ä¹±ï¼Œæˆ‘å°±å…ˆä¸ç”¨ SOLO æ¨¡å¼äº†ï¼Œå…ˆæ¢ VSCode æŠŠé‚£ç§äº§å“è‡ªå·±éƒ½è®²ä¸æ˜ç™½çš„éœ€æ±‚æ”¹äº†ï¼Œä¸ç„¶åŠ ç­ä¸çŸ¥é“å‡ ä¸ªå°æ—¶èµ·æ­¥äº†</p>
<blockquote>
<p>æ¬¢è¿å¤§å®¶è®¨è®ºäº¤æµï¼Œå¦‚æœå–œæ¬¢æœ¬æ–‡ç« æˆ–æ„Ÿè§‰æ–‡ç« æœ‰ç”¨ï¼ŒåŠ¨åŠ¨ä½ é‚£å‘è´¢çš„å°æ‰‹ç‚¹èµã€æ”¶è—ã€å…³æ³¨å†èµ°å‘—Â <code>^_^</code>Â </p>
<p>å¾®ä¿¡å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1fd6d3bc93444bbb257fc45e1826b11~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=240&amp;h=240&amp;s=10632&amp;e=jpg&amp;b=fdfafa" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆ AI æœç´¢å‰ç«¯æ‰“å­—æœºæ•ˆæœçš„å®ç°æ–¹æ¡ˆæ¼”è¿›]]></title>    <link>https://juejin.cn/post/7576955345378099263</link>    <guid>https://juejin.cn/post/7576955345378099263</guid>    <pubDate>2025-11-27T03:10:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576955345378099263" data-draft-id="7576953459543638070" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆ AI æœç´¢å‰ç«¯æ‰“å­—æœºæ•ˆæœçš„å®ç°æ–¹æ¡ˆæ¼”è¿›"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-27T03:10:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="vivoäº’è”ç½‘æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/993614243303053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆ AI æœç´¢å‰ç«¯æ‰“å­—æœºæ•ˆæœçš„å®ç°æ–¹æ¡ˆæ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614243303053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    vivoäº’è”ç½‘æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T03:10:41.000Z" title="Thu Nov 27 2025 03:10:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼švivo äº’è”ç½‘å‰ç«¯å›¢é˜Ÿ - He Yanjun</p>
<p>åœ¨å½“ä»£å‰ç«¯å¼€å‘é¢†åŸŸï¼Œæ‰“å­—æœºæ•ˆæœä½œä¸ºä¸€ç§æå…·åˆ›é€ åŠ›ä¸å¸å¼•åŠ›çš„äº¤äº’å…ƒç´ ï¼Œè¢«å¹¿æ³›è¿ç”¨äºå„ç±»ç½‘ç«™å’Œåº”ç”¨ç¨‹åºä¸­ï¼Œä¸ºç”¨æˆ·å¸¦æ¥ç‹¬ç‰¹çš„è§†è§‰ä½“éªŒå’Œä¿¡æ¯å‘ˆç°æ–¹å¼ï¼Œæ·±å—å¹¿å¤§ç”¨æˆ·çš„å–œçˆ±ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥ä»‹ç»åœ¨AIæœç´¢è¾“å‡ºå“åº”çš„è¿‡ç¨‹ä¸­ï¼Œæ‰“å­—æœºæ•ˆæœæ˜¯æ€æ ·é€æ­¥æ¼”è¿›çš„ã€‚åŠ›æ±‚ä»¥é€šä¿—çš„è¯­è¨€å’Œä¸¥è°¨çš„æ€è·¯æ·±å…¥å‰–ææ‰“å­—æœºæ•ˆæœåœ¨ä¸åŒé˜¶æ®µçš„å…³é”®æŠ€æœ¯éš¾ç‚¹å’Œä¼˜åŠ£åŠ¿ã€‚</p>
</blockquote>
<p>1åˆ†é’Ÿçœ‹å›¾æŒæ¡æ ¸å¿ƒè§‚ç‚¹ğŸ‘‡</p>
<p><img src="https://static001.geekbang.org/infoq/71/71e2717ca5faa5e464284f60854c8cf1.gif" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨å¦‚ä»ŠåŸºäºAIæœç´¢çš„å¯¹è¯èˆå°ä¸Šï¼Œå¦‚æœä¸€æ®µæ–‡å­—åƒè€å¼æ‰“å­—æœºä¸€æ ·é€å­—é€å¥å±•ç°åœ¨å±å¹•ä¸Šï¼Œé‚£å°†æ˜¯ä¸€ç§å…·æœ‰ç‹¬ç‰¹é­…åŠ›çš„å¸å¼•åŠ›ã€‚</p>
<p>è¯ä¸å¤šè¯´ï¼Œå…ˆæ¥çœ‹ä¸‹æœ€ç»ˆçš„å®ç°æ•ˆæœã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/e5/e5b2872868de30c88a997b04eff96bc8.gif" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€å¼•è¨€</h2>
<p>åœ¨AIæœç´¢åœºæ™¯ä¸­ï¼Œç”±äºå¤§æ¨¡å‹åŸºäºæµå¼è¾“å‡ºæ–‡æœ¬ï¼Œéœ€è¦å¤šæ¬¡å“åº”ç»“æœåˆ°å‰ç«¯ï¼Œå› æ­¤è¿™ç§åœºæ™¯ååˆ†é€‚åˆä½¿ç”¨æ‰“å­—æœºæ•ˆæœã€‚</p>
<p>æ‰“å­—æœºæ•ˆæœæ˜¯æŒ‡åœ¨ç”Ÿæˆå†…å®¹çš„åœºæ™¯ä¸­ï¼Œæ–‡å­—é€å­—ç¬¦åŠ¨æ€æ˜¾ç¤ºï¼Œæ¨¡æ‹Ÿäººå·¥æ‰“å­—çš„è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯å‡ºäºæå‡ç”¨æˆ·ä½“éªŒã€ä¼˜åŒ–äº¤äº’é€»è¾‘å’Œå¢å¼ºå¿ƒç†æ„ŸçŸ¥ç­‰æ–¹é¢çš„è€ƒé‡ï¼š</p>
<p><strong>ç¼“è§£ç­‰å¾…ç„¦è™‘ï¼Œé™ä½â€œæ— åé¦ˆâ€çš„è´Ÿé¢ä½“éªŒã€‚</strong></p>
<p>å†…å®¹æ˜¯é€æ­¥å“åº”çš„ï¼Œæ‰“å­—æœºæ•ˆæœå¯ä»¥å¾ˆå¥½åœ°æä¾›â€œå®æ—¶åé¦ˆâ€ï¼Œç”¨æˆ·å¯ä»¥æ„ŸçŸ¥åˆ°ç³»ç»Ÿæ­£åœ¨å·¥ä½œï¼Œä»è€Œå‡å°‘äº†ç­‰å¾…è¿‡ç¨‹ä¸­çš„ä¸ç¡®å®šæ€§å’Œç„¦è™‘æ„Ÿã€‚</p>
<p><strong>æ¨¡æ‹Ÿè‡ªç„¶äº¤äº’ï¼Œå¢å¼ºâ€œç±»äººå¯¹è¯â€çš„æ²‰æµ¸æ„Ÿã€‚</strong></p>
<p>å¯¹è¯äº¤æµå…·æœ‰åœé¡¿ã€å¼ºè°ƒç­‰èŠ‚å¥æ„Ÿï¼Œé€šè¿‡å®æ—¶æ‰“å­—çš„æ¨¡æ‹Ÿï¼Œè·Ÿå®¹æ˜“æ‹‰è¿‘ä¸ç”¨æˆ·çš„å¿ƒç†è·ç¦»ï¼Œå¢å¼ºå¯¹è¯æ„Ÿå’Œæ²‰æµ¸æ„Ÿã€‚</p>
<p><strong>ä¼˜åŒ–ä¿¡æ¯æ¥æ”¶æ•ˆç‡ï¼Œé¿å…â€œä¿¡æ¯è¿‡è½½â€ã€‚</strong></p>
<p>å¦‚æœä¸€æ¬¡æ€§å±•ç¤ºå¤§é‡å¯†å¯†éº»éº»çš„æ–‡å­—ï¼Œç”¨æˆ·éœ€è¦èŠ±æ—¶é—´ç­›é€‰é‡ç‚¹ï¼Œå®¹æ˜“äº§ç”ŸæŠµè§¦ï¼Œé€šè¿‡æ‰“å­—æœºæ•ˆæœå¯ä»¥ç¼“å’Œé˜…è¯»èŠ‚å¥ï¼Œå‡å°‘è§†è§‰å’Œè®¤çŸ¥è´Ÿæ‹…ã€‚</p>
<p><strong>å¼ºåŒ–â€œAIç”Ÿæˆâ€çš„æ„ŸçŸ¥ï¼Œé™ä½å¯¹â€œæ ‡å‡†ç­”æ¡ˆâ€çš„é¢„æœŸã€‚</strong></p>
<p>ä½¿ç”¨æˆ·æ„ŸçŸ¥åˆ°æ˜¯AIå®æ—¶è®¡ç®—ç»“æœï¼Œè€Œéé¢„å­˜çš„æ ‡å‡†ç­”æ¡ˆï¼Œæœ‰åŠ©äºç”¨æˆ·ç†æ€§å®¢è§‚åœ°ä½¿ç”¨å·¥å…·ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€æ—©æœŸå®ç°æ–¹æ¡ˆâ€”â€”çº¯æ–‡æœ¬é€å­—ç¬¦æ‰“å­—æ•ˆæœ</h2>
<p>æœ€å¼€å§‹çš„äº§å“åŠŸèƒ½ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æœç´¢è¯ï¼Œæµå¼è¾“å‡ºå¹¶é€å­—ç¬¦å±•ç¤ºåˆ°é¡µé¢ä¸Šï¼Œè¿™å¯ä»¥è¯´æ˜¯æ‰“å­—æœºæ•ˆæœçš„å…¥é—¨çº§å®ç°äº†ï¼Œä¸ä¾èµ–ä»»ä½•å¤æ‚çš„æŠ€æœ¯ï¼Œå…¶æµç¨‹å›¾å¤§è‡´å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/a6/a6ad8f272b01718ac3b077711a8ec924.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">3.1 è¯¦ç»†è¯´æ˜</h3>
<p>å‰ç«¯ä¼šå®šä¹‰ä¸€ä¸ªå­—æ®µç”¨æ¥ç¼“å­˜å…¨é‡çš„markdownæ–‡æœ¬ï¼Œæ¯æ¬¡æœåŠ¡ç«¯æµå¼å“åº”markdownæ–‡æœ¬åˆ°å‰ç«¯æ—¶ï¼Œå‰ç«¯éƒ½ä¼šå°†å…¶è¿½åŠ åˆ°è¿™ä¸ªç¼“å­˜å­—æ®µåï¼Œç„¶ååŸºäºmarkedä¾èµ–åº“å°†å…¨é‡çš„markdownæ–‡æœ¬è½¬æ¢ä¸ºhtmlç‰‡æ®µã€‚</p>
<p>è¦å®ç°é€å­—ç¬¦æ¸²æŸ“çš„åŠ¨ç”»æ•ˆæœï¼Œå°±éœ€è¦å®šæ—¶æ›´æ–°æ–‡æœ¬ã€‚å®šæ—¶åŠŸèƒ½ä¸€èˆ¬é‡‡ç”¨setTimeoutæˆ–setIntervalæ¥å®ç°ï¼Œè€Œæ›´æ–°æ–‡æœ¬å¯ä»¥è€ƒè™‘innerHTMLå’ŒappendChildçš„æ–¹å¼ï¼Œè¿™é‡Œé‡‡ç”¨çš„innerHTMLæ–¹å¼æ’å…¥æ–‡æœ¬ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">fullText</span> = <span class="hljs-string">'test text'</span><span class="hljs-comment">;// å…¨é‡çš„htmlæ–‡æœ¬</span>
let <span class="hljs-attr">index</span> = <span class="hljs-number">0</span><span class="hljs-comment">;// å½“å‰æ‰“å°åˆ°çš„ä¸‹æ ‡</span>
let <span class="hljs-attr">timer</span> = window.setInterval(() =&gt; {
  ++index<span class="hljs-comment">;</span>
  $<span class="hljs-attr">dom.innerHTML</span> = fullText.substring(<span class="hljs-number">0</span>, index)<span class="hljs-comment">;</span>
}, 40)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-4">3.2 innerHTMLä¸appendChildçš„æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”</h3>
<p><img src="https://static001.geekbang.org/infoq/41/41849adf6860ac94811e495997bb6709.jpeg" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸ºä»€ä¹ˆé€‰æ‹©innerHTMLè€ŒéappendChildï¼Ÿ</strong></p>
<p>ç”±äºæœåŠ¡ç«¯æ˜¯æµå¼è¿”å›markdownæ–‡æœ¬ï¼Œå› æ­¤æ¯æ¬¡è¿”å›çš„markdownæ–‡æœ¬å¯èƒ½ä¸æ˜¯å®Œæ•´çš„ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-css" lang="css">å…ˆè¿”å›ä¸‹é¢ä¸€æ®µmarkdownæ–‡æœ¬

** è¿™æ˜¯ä¸€ä¸ª
å†è¿”å›ä¸‹é¢ä¸€æ®µmarkdownæ–‡æœ¬

æ ‡é¢˜ **
å…ˆè¿”å›çš„æ–‡æœ¬ä¼šå½“ä½œçº¯æ–‡æœ¬å±•ç¤ºï¼Œå†è¿”å›çš„æ–‡æœ¬ä¼šä¸å…ˆè¿”å›çš„æ–‡æœ¬ç»“åˆç”Ÿæˆ<span class="hljs-selector-tag">html</span>ç‰‡æ®µå¦‚ä¸‹

&lt;<span class="hljs-selector-tag">strong</span>&gt;è¿™æ˜¯ä¸€ä¸ªæ ‡é¢˜&lt;/<span class="hljs-selector-tag">strong</span>&gt;
</code></pre>
<p>å¦‚æœä½¿ç”¨appendChildçš„è¯ï¼Œå°±ä¸å¥½å¤„ç†ä¸Šè¿°åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">3.3 å°ç»“</h3>
<p>è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹å°±æ˜¯ç®€å•æ˜“æ‡‚ï¼Œå¾ˆå®¹æ˜“ä¸Šæ‰‹å®ç°ï¼Œä¹Ÿæ²¡æœ‰ä»»ä½•ä¾èµ–ã€‚</p>
<p>ä½†æ˜¯ï¼Œå®ƒçš„ç¼ºç‚¹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ— æ³•æ–¹ä¾¿çš„æ·»åŠ ä¸€äº›é¢å¤–çš„åŠ¨ç”»æ•ˆæœæ¥å¢å¼ºè§†è§‰ä½“éªŒï¼Œå¦‚å…‰æ ‡é—ªçƒæ•ˆæœï¼›å¯¹äºä¸€äº›å¤æ‚æ–‡æœ¬å†…å®¹ï¼Œæˆ–è€…éœ€è¦æ›´åŠ çµæ´»åœ°æ§åˆ¶å±•ç¤ºç»†èŠ‚æ—¶ä¹Ÿä¼šæ˜¾å¾—æ‰è¥Ÿè§è‚˜ï¼›å¹¶ä¸”æ¯æ¬¡é€šè¿‡innerHTMLæ¸²æŸ“æ–‡æœ¬æ—¶ï¼Œéƒ½è§¦å‘äº†domçš„é”€æ¯ä¸åˆ›å»ºï¼Œæ€§èƒ½æ¶ˆè€—å¤§ã€‚</p>
<h2 data-id="heading-6">å››ã€éœ€æ±‚éš¾åº¦è¿›ä¸€æ­¥æå‡</h2>
<p>éšç€äº§å“çš„è¿­ä»£ï¼Œä¸šåŠ¡è¦æ±‚æ‰“å­—å†…å®¹ä¸ä»…æ˜¯çº¯æ–‡æœ¬ï¼Œè¿˜éœ€è¦ç©¿æ’å±•ç¤ºå¡ç‰‡ç­‰å¤æ‚æ ·å¼æ•ˆæœï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p>å¡ç‰‡çš„ç±»å‹åŒ…æ‹¬åº”ç”¨ã€è‚¡ç¥¨ã€å½±è§†ç­‰ï¼Œéœ€è¦å¯æ‰©å±•ã€å¯é…ç½®ï¼Œå¹¶ä¸”è¿˜ä¼šåŒ…æ‹¬å¤æ‚çš„äº¤äº’æ•ˆæœï¼Œå¦‚ç‚¹å‡»ã€è·³è½¬ç­‰ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/fc/fc131edaf07977496b1970b79a44561c.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆæ˜æ˜¾ï¼ŒåŸºäºæ—©æœŸçš„å®ç°æ–¹æ¡ˆå·²ç»è¿œè¿œä¸èƒ½æ»¡è¶³æ—¥ç›Šå¢å¼ºçš„ä¸šåŠ¡è¯‰æ±‚äº†ï¼Œå¿…é¡»è€ƒè™‘æ›´åŠ çµæ´»é«˜æ•ˆçš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-7">äº”ã€ç°ä»£æ¡†æ¶ä¸‹çš„å®ç°â€”â€”åŸºäºVueè™šæ‹ŸdomåŠ¨æ€æ›´æ–°</h2>
<p>é€šè¿‡ä¸Šè¿°çš„åˆ†æï¼Œæ‰“å­—å†…å®¹ä¸­è¦ç©¿æ’å±•ç¤ºå¡ç‰‡ï¼Œæ˜¾ç„¶éœ€è¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå¦åˆ™å¦‚æœæ¯æ¬¡æ‰“å­—éƒ½é‡æ–°åˆ›å»ºå…ƒç´ çš„è¯ï¼Œä¸ä»…æ€§èƒ½ä½ä¸‹ï¼Œè€Œä¸”æ•°æ®å’ŒçŠ¶æ€è¿˜æ— æ³•ä¿æŒä¸€è‡´ã€‚</p>
<p>è€Œè¦ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Œå°±å¿…é¡»æ ¹æ®ç°æœ‰æ•°æ®å¯¹å·²æ’å…¥èŠ‚ç‚¹è¿›è¡Œæ’å…¥ã€æ›´æ–°ã€ç§»é™¤ç­‰æ“ä½œä»¥ä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™å°±å¾ˆè‡ªç„¶åœ°ä¼šæƒ³åˆ°ä½¿ç”¨ç°ä»£å‰ç«¯æ¡†æ¶æ¥å¯¹æ‰“å­—æœºæ•ˆæœè¿›è¡Œæ”¹è¿›ã€‚</p>
<p>Vueæ˜¯åŸºäºè™šæ‹Ÿdomçš„æ¸è¿›å¼javascriptæ¡†æ¶ï¼Œä»…åœ¨æ•°æ®å˜åŒ–æ—¶è®¡ç®—å·®å¼‚å¹¶æ›´æ–°å¿…è¦çš„éƒ¨åˆ†ï¼Œå› æ­¤å¯ä»¥å€ŸåŠ©å…¶æ•°æ®é©±åŠ¨å¼€å‘ã€ç»„ä»¶åŒ–å¼€å‘ç­‰ç‰¹æ€§ï¼Œè½»æ¾åœ°æ„å»ºä¸€ä¸ªå¯å¤ç”¨çš„æ‰“å­—æœºæ•ˆæœç»„ä»¶ã€‚</p>
<h3 data-id="heading-8">5.1 è®¾è®¡æ€è·¯</h3>
<p>è¦å®ç°æ‰“å­—æ­£æ–‡ä¸­ç©¿æ’å¡ç‰‡çš„æ•ˆæœï¼Œé¦–å…ˆéœ€è¦å®šä¹‰å¥½è¿”å›çš„æ•°æ®ç»“æ„ï¼Œå®ƒéœ€è¦å…·å¤‡å¯æ‰©å±•ï¼Œæ–¹ä¾¿è§£æï¼Œå…¼å®¹markdownç­‰ç‰¹æ€§ï¼Œæ‰€ä»¥ä½¿ç”¨htmlæ ‡ç­¾æ˜¯ä¸€ç§æ¯”è¾ƒåˆé€‚çš„æ–¹å¼ï¼Œä¾‹å¦‚è¦å±•ç¤ºä¸€ä¸ªåº”ç”¨å¡ç‰‡ï¼Œå¯ä»¥ä¸‹å‘å¦‚ä¸‹æ‰€ç¤ºæ•°æ®ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">&lt;app <span class="hljs-attr">id</span>=<span class="hljs-string">""</span> /&gt;
</code></pre>
<p>ä»ä¸‹å‘çš„æ•°æ®ä¸­å¯ä»¥è·å–åˆ°æ ‡ç­¾åå’Œå±æ€§é”®å€¼å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡æ ‡ç­¾åæ¥æ¸²æŸ“å…³è”åˆ°çš„ç»„ä»¶æ¨¡æ¿ï¼Œé€šè¿‡å±æ€§é”®å€¼å¯¹å»æœåŠ¡ç«¯åŠ è½½å¯¹åº”çš„æ•°æ®ï¼Œäºæ˜¯å°±å¯ä»¥æ°´åˆ°æ¸ æˆçš„æŠŠåº”ç”¨å¡ç‰‡å±•ç¤ºå‡ºæ¥ï¼Œå…¶æµç¨‹å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/f7/f7f107266684e611857e0d0a51ffc1c3.png" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-9">5.2 è¯¦ç»†è¯´æ˜</h3>
<p>ç»„ä»¶æ¨¡æ¿æ–‡ä»¶æŒ‰ç…§ä¸€å®šè§„åˆ™ç»„ç»‡åœ¨ç‰¹å®šçš„ç›®å½•ä¸‹ï¼Œåœ¨æ„å»ºæ—¶æ‰“åŒ…åˆ°èµ„æºé‡Œï¼Œå…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">privateinit(){  
    let <span class="hljs-attr">fileList</span> = require.context(<span class="hljs-string">'@/components/common/box'</span>, <span class="hljs-literal">true</span>, /\.vue$/)<span class="hljs-comment">;  </span>
    fileList.keys().forEach((filePath) =&gt; {  
        let <span class="hljs-attr">startIndex</span> = filePath.lastIndexOf(<span class="hljs-string">'/'</span>)<span class="hljs-comment">;  </span>
        let <span class="hljs-attr">endIndex</span> = filePath.lastIndexOf(<span class="hljs-string">'.'</span>)<span class="hljs-comment">;  </span>
        let <span class="hljs-attr">tagName</span> = filePath.substring(startIndex + <span class="hljs-number">1</span>, endIndex)<span class="hljs-comment">;  </span>
        this.widgetMap<span class="hljs-section">[tagName]</span> = fileList(filePath).default<span class="hljs-comment">;  </span>
    })<span class="hljs-comment">;  </span>
}
</code></pre>
<p>ä¹‹å‰ç‰ˆæœ¬åœ¨æ¯æ¬¡æ¥æ”¶åˆ°æœåŠ¡ç«¯ä¸‹å‘çš„markdownæ–‡æœ¬æ—¶ï¼Œéƒ½ä¼šåšä¸€æ¬¡è½¬æ¢æˆhtmlçš„æ“ä½œï¼Œå¦‚æœå¤šæ¬¡å“åº”ä¹‹é—´çš„é—´éš”æ—¶é—´å¾ˆçŸ­ï¼Œåˆ™ä¼šå‡ºç°ç•¥å¾®å¡é¡¿çš„ç°è±¡ï¼Œå› æ­¤è¿™é‡Œè½¬æ¢ä¸ºhtmlæ—¶å†å¢åŠ ä¸€ä¸ªé˜²æŠ–åŠŸèƒ½ï¼Œå¯ä»¥å¾ˆæœ‰æ•ˆçš„é¿å…å¡é¡¿ã€‚</p>
<p>æ¯æ¬¡å®šæ—¶æˆªå–åˆ°å¾…æ¸²æŸ“çš„htmlæ–‡æœ¬ä»¥åï¼Œä¼šåŸºäºultrahtmlåº“å°†å…¶è½¬æ¢ä¸ºdomæ ‘ï¼Œå¹¶è¿‡æ»¤æ‰æ³¨é‡Šã€è„šæœ¬ç­‰æ ‡ç­¾ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">toRenderHtml</span> = this.rawHtml.substring(<span class="hljs-number">0</span>, this.curIndex)<span class="hljs-comment">;  </span>
let <span class="hljs-attr">dom</span> = {  
    type: ELEMENT_NODE,  
    name: 'p',  
    children: parse(toRenderHtml).children  
}<span class="hljs-comment">;</span>
</code></pre>
<p>æœ€åå°±æ˜¯å…¨å±€æ³¨å†Œä¸€ä¸ªé€’å½’ç»„ä»¶ç”¨æ¥æ¸²æŸ“è½¬æ¢åçš„domæ ‘ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">render(h: any) {  
    <span class="hljs-comment">// æ­¤å¤„çœç•¥è‹¥å¹²ä»£ç </span>

    <span class="hljs-comment">// å¤„ç†å­èŠ‚ç‚¹</span>
    let children = <span class="hljs-keyword">this</span>.dom[<span class="hljs-string">'children'</span>] || [];  
    let renderChildren = children.map((child: any, index: number) =&gt; { 
        <span class="hljs-keyword">return</span> h(CommonDisplay, {  
            props: {  
                dom: child,  
                displayCursor: <span class="hljs-keyword">this</span>.displayCursor,  
                lastLine: <span class="hljs-keyword">this</span>.lastLine &amp;&amp; index === children.length - <span class="hljs-number">1</span>,  
                ignoreBoxTag: <span class="hljs-keyword">this</span>.ignoreBoxTag  
            }  
        });  
    });
  
    <span class="hljs-comment">// æ­¤å¤„çœç•¥è‹¥å¹²ä»£ç </span>

    <span class="hljs-comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.dom[<span class="hljs-string">'type'</span>] === TEXT_NODE) {  
        returnthis.renderTextNode({h, element: <span class="hljs-keyword">this</span>.dom});  
    }

    <span class="hljs-comment">// å¤„ç†è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾</span>
    let tagName = <span class="hljs-keyword">this</span>.dom[<span class="hljs-string">'type'</span>] === ELEMENT_NODE ? <span class="hljs-keyword">this</span>.dom[<span class="hljs-string">'name'</span>] : <span class="hljs-string">'div'</span>;  
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.$factory.hasTag(tagName)) {  
        <span class="hljs-comment">// æ­¤å¤„çœç•¥è‹¥å¹²ä»£ç </span>
        let widget = <span class="hljs-keyword">this</span>.$factory.getWidget(tagName);
        <span class="hljs-keyword">return</span> h(widget, {  
            key: tagId,  
            props: {  
                displayCursor: <span class="hljs-keyword">this</span>.displayCursor,  
                lastLine: <span class="hljs-keyword">this</span>.lastLine,  
                text,  
                ...attributes  
            }  
        }, isLastLeaf &amp;&amp; <span class="hljs-keyword">this</span>.displayCursor ? [h(commonCursor)] : []);
    }

    <span class="hljs-comment">// å¤„ç†htmlåŸå§‹æ ‡ç­¾</span>
    <span class="hljs-keyword">return</span> h(tagName, {  
        attrs: {  
            displayCursor: <span class="hljs-keyword">this</span>.displayCursor,  
            lastLine: <span class="hljs-keyword">this</span>.lastLine,  
            ...<span class="hljs-keyword">this</span>.dom[<span class="hljs-string">'attributes'</span>]  
        }  
    }, renderChildren);  
}
</code></pre>
<h3 data-id="heading-10">5.3 é—®é¢˜æ•´ç†å’Œè§£å†³</h3>
<p>æ‰“å­—æœºåŠŸèƒ½ç»ˆäºæ­£å¸¸è¿è¡Œäº†ï¼Œæµç•…åº¦è¿˜æ˜¯ä¸é”™çš„ï¼Œä½†æ˜¯åœ¨ä½“éªŒçš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿå‘ç°äº†ä¸€äº›<strong>ç»†èŠ‚é—®é¢˜</strong>ã€‚</p>
<p><strong>â‘ æ‰“å­—æ–‡æœ¬ä¸­å¦‚æœå­˜åœ¨æ ‡ç­¾ï¼Œå¦‚ </strong></p><p><strong>xxx</strong></p><strong> ï¼Œä¼šå‡ºç°å…ˆå±•ç¤º &lt; ,å†å±•ç¤º &lt;p ï¼Œæœ€åå±•ç¤ºç©ºçš„æ•ˆæœï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦å›é€€ï¼Œæå¤§å½±å“é˜…è¯»ä½“éªŒã€‚</strong><p/>
<p><strong>åŸå› åˆ†æ</strong></p>
<p>å®šæ—¶æˆªå–å¾…æ¸²æŸ“æ–‡æœ¬æ—¶æ˜¯é€šè¿‡å®šä¹‰ä¸€ä¸ªä¸‹æ ‡é€’å¢é€å­—ç¬¦æˆªå–çš„ï¼Œè¿™å°±å¯¼è‡´æ ‡ç­¾å¹¶æ²¡æœ‰ä½œä¸ºä¸€ä¸ªåŸå­ç»“æ„è¢«æ•´ä½“æˆªå–ï¼Œäºæ˜¯å°±å‡ºç°äº†å­—ç¬¦å›é€€çš„ç°è±¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å½“ä¸‹æ ‡æŒ‡å‘çš„å­—ç¬¦ä¸º &lt; æ—¶ï¼Œåˆ™å¾€åæˆªå–åˆ° &gt; çš„ä½ç½®ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">if (<span class="hljs-attr">curChar</span> === <span class="hljs-string">'&lt;'</span>) {  
    let <span class="hljs-attr">lastGtIndex</span> = this.rawHtml.indexOf(<span class="hljs-string">'&gt;'</span>, this.curIndex)<span class="hljs-comment">;</span>
    if (lastGtIndex &gt; -1) {
        <span class="hljs-attr">this.curIndex</span> = lastGtIndex + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        returnfalse<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p><strong>â‘¡ æ‰“å­—æ–‡æœ¬ä¸­å¦‚æœå­˜åœ¨è½¬ä¹‰å­—ç¬¦ï¼Œå¦‚ " ï¼Œåˆ™ä¼šä¾æ¬¡å‡ºç°è¿™äº›å­—ç¬¦ï¼Œæœ€åå†å±•ç¤º " ï¼Œä¹Ÿå°±æ˜¯å­—ç¬¦é—ªçƒï¼Œä¹Ÿååˆ†å½±å“é˜…è¯»ä½“éªŒã€‚</strong></p>
<p><strong>åŸå› åˆ†æ</strong></p>
<p>åŸå› åŒä¸Šè¿°å­—ç¬¦å›é€€ä¸€æ ·ï¼Œä¹Ÿæ˜¯æ²¡æœ‰æŠŠè½¬ä¹‰å­—ç¬¦å½“ä½œä¸€ä¸ªæ•´ä½“æˆªå–ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å½“ä¸‹æ ‡æŒ‡å‘çš„å­—ç¬¦ä¸º &amp; æ—¶ï¼Œåˆ™å¾€åæˆªå–åˆ°è½¬ä¹‰å­—ç¬¦ç»“æŸçš„ä½ç½®ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¤§æ¨¡å‹å¤§æ¦‚ç‡åªä¸‹å‘æœ‰é™ç±»åˆ«çš„è½¬ä¹‰å­—ç¬¦ï¼Œåšæˆé…ç½®åŠ¨æ€ä¸‹å‘ï¼Œä¸ä»…è§£ææ–¹ä¾¿ï¼Œå®šåˆ¶ä¸‹å‘ä¹Ÿå¾ˆåŠæ—¶  </span>
<span class="hljs-keyword">if</span> (curChar === <span class="hljs-string">'&amp;'</span>) {  
    let matchEscape = <span class="hljs-keyword">this</span>.config[<span class="hljs-string">'writer'</span>][<span class="hljs-string">'escapeArr'</span>].find((item: any) =&gt; {  
        returnthis.rawHtml.indexOf(item, <span class="hljs-keyword">this</span>.curIndex) === <span class="hljs-keyword">this</span>.curIndex;  
    });  
    <span class="hljs-keyword">if</span> (matchEscape) {  
        <span class="hljs-keyword">this</span>.curIndex += matchEscape.length;  
        returnfalse;  
    }  
}
</code></pre>
<p><strong>â‘¢ æ‰“å­—è¿‡ç¨‹ä¸­çš„é€Ÿåº¦æ˜¯å›ºå®šçš„ï¼Œç¼ºå°‘ä¸€ç‚¹æŠ‘æ‰¬é¡¿æŒ«çš„èŠ‚å¥æ„Ÿï¼Œä¸å¤Ÿè‡ªç„¶ã€‚</strong></p>
<p><strong>åŸå› åˆ†æ</strong></p>
<p>å®šæ—¶å™¨çš„é—´éš”æ—¶é—´æ˜¯å›ºå®šçš„ä¸€ä¸ªæ•°å€¼ï¼Œæ‰€ä»¥è¡¨ç°ä¸ºä¸€ä¸ªå›ºå®šä¸å˜çš„æ‰“å­—èŠ‚å¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>å¯ä»¥æ ¹æ®æœªæ‰“å°å­—ç¬¦æ•°æ¥åŠ¨æ€è°ƒæ•´æ¯æ¬¡æ‰“å­—çš„é€Ÿåº¦ï¼Œä¸€ç§å¯é€‰çš„å®ç°æ–¹æ¡ˆå¦‚ä¸‹ã€‚</p>
<p>å‡è®¾æœªæ‰“å°å­—ç¬¦æ•°ä¸º N ï¼Œé€Ÿåº¦å¹³æ»‘æŒ‡æ•°ä¸º a ï¼Œå®é™…æ‰“å­—é€Ÿåº¦ä¸º Vcurrent ï¼Œé€»è¾‘åº”è¾¾åˆ°çš„æ‰“å­—é€Ÿåº¦ä¸º Vnew ã€‚</p>
<p>if N &lt;= 10 , Vnew = 100 ms / 1å­—ç¬¦</p>
<p>if 10 &lt; N &lt;= 20 , Vnew = 100 - 8 * ( N - 10 ) ms / 1å­—ç¬¦</p>
<p>if 20 &lt; N , Vnew = 20 ms / 4å­—ç¬¦</p>
<p>Vcurrent = a * Vcurrent + ( 1 - a ) * Vnew</p>
<p>ä¸Šè¿°ç­–ç•¥å¯èƒ½ä¼šæ¯”è¾ƒå¤šï¼Œè€Œä¸”ä¸Šçº¿ä»¥åè¿˜æœ‰å¯èƒ½æ›´æ¢æ•°å€¼å¯¹ç…§æ•ˆæœï¼Œå› æ­¤ä¸ºäº†æ”¯æŒé…ç½®åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹Vnewè¿›è¡Œè¡¨è¾¾å¼å½’çº³ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p>Vnew = Vinit - w * ( N - min ) + b</p>
<p>Vinit ä¸ºé»˜è®¤åˆå§‹æ‰“å­—é€Ÿåº¦ï¼Œw ä¸ºæ¯æ¡ç­–ç•¥çš„æƒé‡å€¼ï¼ŒN ä¸ºæœªæ‰“å°å­—ç¬¦æ•°ï¼Œmin ä¸ºæ¯æ¡ç­–ç•¥çš„æœ€å°å­—ç¬¦æ•°é‡æ¯”è¾ƒå€¼ï¼Œb ä¸ºæ¯æ¡ç­–ç•¥çš„åç½®ã€‚å…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-css" lang="css">privatespeedFn({curSpeed, curIndex, totalLength}: any){  
    let leftCharLength = Math<span class="hljs-selector-class">.max</span>(<span class="hljs-number">0</span>, totalLength - curIndex);  
    let matchStrategy = this<span class="hljs-selector-class">.config</span><span class="hljs-selector-attr">[<span class="hljs-string">'writer'</span>]</span><span class="hljs-selector-attr">[<span class="hljs-string">'strategy'</span>]</span><span class="hljs-selector-class">.find</span>((item: any) =&gt; {  
        return (!item<span class="hljs-selector-attr">[<span class="hljs-string">'min'</span>]</span> || item<span class="hljs-selector-attr">[<span class="hljs-string">'min'</span>]</span> &lt; leftCharLength)  
            &amp;&amp; (!item<span class="hljs-selector-attr">[<span class="hljs-string">'max'</span>]</span> || item<span class="hljs-selector-attr">[<span class="hljs-string">'max'</span>]</span> &gt;= leftCharLength);  
    });  
    let speed = this<span class="hljs-selector-class">.config</span><span class="hljs-selector-attr">[<span class="hljs-string">'writer'</span>]</span><span class="hljs-selector-attr">[<span class="hljs-string">'initSpeed'</span>]</span> - matchStrategy<span class="hljs-selector-attr">[<span class="hljs-string">'w'</span>]</span> * (leftCharLength - (matchStrategy<span class="hljs-selector-attr">[<span class="hljs-string">'min'</span>]</span> || <span class="hljs-number">0</span>)) + matchStrategy<span class="hljs-selector-attr">[<span class="hljs-string">'b'</span>]</span>;  
    returnthis<span class="hljs-selector-class">.config</span><span class="hljs-selector-attr">[<span class="hljs-string">'writer'</span>]</span><span class="hljs-selector-attr">[<span class="hljs-string">'smoothParam'</span>]</span> * curSpeed + (<span class="hljs-number">1</span> - this<span class="hljs-selector-class">.config</span><span class="hljs-selector-attr">[<span class="hljs-string">'writer'</span>]</span><span class="hljs-selector-attr">[<span class="hljs-string">'smoothParam'</span>]</span>) * speed;  
}
</code></pre>
<p><strong>â‘£ æ‰“å­—è¿‡ç¨‹ä¸­ï¼Œä¼šæ—¶ä¸æ—¶çš„å›é€€åˆ°ä¹‹å‰å­—ç¬¦çš„ä½ç½®é‡æ–°å¼€å§‹æ‰“å­—ï¼Œä¾‹å¦‚å½“å‰å±•ç¤º a = b + c ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ä¼šä» a å¼€å§‹é‡æ–°æ‰“å®Œè¿™ä¸€æ®µã€‚</strong></p>
<p><strong>åŸå› åˆ†æ</strong></p>
<p>ç”±äºmarkdownæ–‡æœ¬ç»“åˆä¼šç”Ÿæˆhtmlæ ‡ç­¾ï¼Œä»è€Œå¯¼è‡´å­—ç¬¦æ•°é‡å¢å¤šï¼Œé‚£ä¹ˆå½“å‰ä¸‹æ ‡æŒ‡å‘çš„å­—ç¬¦å°±ç›¸å¯¹ä¹‹å‰è½åäº†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">curIndex</span> = <span class="hljs-number">5</span><span class="hljs-comment">;// å½“å‰ä¸‹æ ‡</span>
let <span class="hljs-attr">prevMarkdown</span> = <span class="hljs-string">'**hello'</span><span class="hljs-comment">;// ä¸Šä¸€æ¬¡æ‰“å°æ—¶çš„å…¨é‡markdownæ–‡æœ¬</span>
let <span class="hljs-attr">prevHtml</span> = <span class="hljs-string">'&lt;p&gt;**hello&lt;/p&gt;'</span><span class="hljs-comment">;// ä¸Šä¸€æ¬¡æ‰“å°æ—¶çš„å…¨é‡htmlç‰‡æ®µ</span>
let <span class="hljs-attr">prevRenderHtml</span> = <span class="hljs-string">'&lt;p&gt;**&lt;p&gt;'</span><span class="hljs-comment">;// ä¸Šä¸€æ¬¡æ‰“å°åˆ°é¡µé¢ä¸Šçš„htmlç‰‡æ®µ</span>
// é¡µé¢ä¸Šä¼šæ¸²æŸ“ **

// å½“æœåŠ¡ç«¯ç»§ç»­ä¸‹å‘äº† ** çš„markdownæ–‡æœ¬æ—¶ï¼ŒcurIndexä¼šé€’å¢1å˜ä¸º6
let <span class="hljs-attr">curMarkdown</span> = <span class="hljs-string">'**hello**'</span><span class="hljs-comment">;// å½“å‰æ‰“å°æ—¶çš„å…¨é‡markdownæ–‡æœ¬</span>
let <span class="hljs-attr">curHtml</span> = <span class="hljs-string">'&lt;p&gt;&lt;strong&gt;hello&lt;/strong&gt;&lt;/p&gt;'</span><span class="hljs-comment">;// å½“å‰æ‰“å°æ—¶çš„å…¨é‡htmlç‰‡æ®µ</span>
let <span class="hljs-attr">curRenderHtml</span> = <span class="hljs-string">'&lt;p&gt;&lt;strong&gt;&lt;/strong&gt;&lt;p&gt;'</span><span class="hljs-comment">;// å½“å‰æ‰“å°åˆ°é¡µé¢ä¸Šçš„htmlç‰‡æ®µ</span>
// é¡µé¢ä¸Šä¼šæ¸²æŸ“ç©ºæ ‡ç­¾ï¼Œç„¶åé‡æ–°å¼€å§‹æ‰“å­—ï¼Œå°¤å…¶æ˜¯åœ¨æ•°å­¦å…¬å¼åœºæ™¯ä¸­éå¸¸å®¹æ˜“å¤ç°
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åˆ†ä¸¤æ­¥èµ°ã€‚</p>
<p>é¦–å…ˆéœ€è¦åˆ¤æ–­æ‰“å°åˆ°é¡µé¢ä¸Šçš„htmlç‰‡æ®µæ˜¯å¦æœ‰å˜åŒ–ï¼Œå› ä¸ºåªæœ‰å˜åŒ–æ—¶æ‰ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼Œè€Œåˆ¤æ–­æ˜¯å¦æœ‰å˜åŒ–åªéœ€è¦è®°å½•ä¸€ä¸‹ä¸Šä¸€æ¬¡çš„htmlç‰‡æ®µå’Œè¿™ä¸€æ¬¡çš„htmlç‰‡æ®µæ˜¯å¦ä¸åŒå³å¯ï¼Œæ¯”è¾ƒå¥½å¤„ç†ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯éœ€è¦é‡æ–°å®šä½ä¸‹æ ‡åˆ°ä¸Šä¸€æ¬¡æ‰“å°åˆ°çš„ä½ç½®ï¼Œè¿™é‡Œç›¸å¯¹æ¯”è¾ƒéš¾å¤„ç†ï¼Œå› ä¸ºhtmlçš„ç»“æ„å’Œå†…å®¹éƒ½åœ¨å˜åŒ–ï¼Œå¾ˆéš¾å‡†ç¡®çš„å®šä½åˆ°ä¸‹æ ‡åº”è¯¥ç§»åŠ¨åˆ°ä»€ä¹ˆä½ç½®ã€‚è™½ç„¶æˆ‘ä»¬ä¸èƒ½å‡†ç¡®å®šä½ï¼Œä½†æ˜¯åªè¦èƒ½å¤Ÿä½¿å½“å‰æ‰“å°åˆ°é¡µé¢ä¸Šçš„å­—ç¬¦æ¯”ä¸Šä¸€æ¬¡çš„å­—ç¬¦å¤šï¼Œå°±å¯ä»¥æ»¡è¶³è¯‰æ±‚äº†ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†textContentè¿™ä¸ªå±æ€§ï¼Œå®ƒå¯ä»¥è·å–å½“å‰èŠ‚ç‚¹åŠå…¶åä»£çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹ã€‚é‚£ä¹ˆé—®é¢˜å°±è½¬åŒ–ä¸ºï¼šæ‰¾åˆ°ä¸€ä¸ªä¸‹æ ‡ï¼Œä½¿å¾—å½“å‰æˆªå–çš„htmlç‰‡æ®µçš„textContenté•¿åº¦è¦æ¯”ä¸Šä¸€æ¬¡çš„textContenté•¿åº¦å¤§ã€‚</p>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯ä»¥å¾—åˆ°æ ¸å¿ƒä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-ini" lang="ini">if (this.isHtmlChanged()) {  
    let domRange: <span class="hljs-attr">any</span> = document.createRange()<span class="hljs-comment">;  </span>
    let <span class="hljs-attr">prevFrag</span> = domRange.createContextualFragment(this.prevRenderHtml)<span class="hljs-comment">;  </span>
    let <span class="hljs-attr">prevTextContent</span> = prevFrag.textContent<span class="hljs-comment">;  </span>
    let <span class="hljs-attr">diffNum</span> = <span class="hljs-number">1</span><span class="hljs-comment">;  </span>
    do {  
        this.curIndex += diffNum<span class="hljs-comment">;  </span>
        let <span class="hljs-attr">curHtml</span> = this.rawHtml.substring(<span class="hljs-number">0</span>, this.curIndex)<span class="hljs-comment">;  </span>
        let <span class="hljs-attr">curFrag</span> = domRange.createContextualFragment(curHtml)<span class="hljs-comment">;  </span>
        let <span class="hljs-attr">curTextContent</span> = curFrag.textContent<span class="hljs-comment">;  </span>
        <span class="hljs-attr">diffNum</span> = prevTextContent.length - curTextContent.length<span class="hljs-comment">;  </span>
        if (diffNum &lt;= 0) {  
            break<span class="hljs-comment">;  </span>
        }  
    } while (this.curIndex &lt; this.rawHtml.length)<span class="hljs-comment">;  </span>
}
</code></pre>
<h3 data-id="heading-11">5.4 å°ç»“</h3>
<p>é€šè¿‡ç°ä»£å‰ç«¯æ¡†æ¶æ„å»ºæ‰“å­—æœºç»„ä»¶ï¼Œä¸ä»…å‡å°‘äº†ä¸å¿…è¦çš„æ¸²æŸ“å’Œæ€§èƒ½æ¶ˆè€—ï¼Œè€Œä¸”è¿˜èƒ½é«˜æ•ˆçµæ´»çš„ç©¿æ’å„ç§é…·ç‚«çš„æ ·å¼æ•ˆæœï¼Œå®ç°æ›´å¤šå¤æ‚çš„äº§å“åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-12">å…­ã€æœªæ¥å±•æœ›</h2>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†AIæœç´¢ä¸­å‰ç«¯æ‰“å­—æœºæ•ˆæœçš„å®ç°æ–¹æ¡ˆæ¼”è¿›è¿‡ç¨‹ï¼Œä»æœ€åˆçš„çº¯æ–‡æœ¬é€å­—ç¬¦æ‰“å­—æ•ˆæœï¼Œåˆ°å€ŸåŠ©ç°ä»£å‰ç«¯æ¡†æ¶å®ç°çµæ´»å¯å¤ç”¨çš„æ‰“å­—æœºç»„ä»¶ï¼Œæ¯ä¸€ä¸ªæŠ€æœ¯éš¾ç‚¹çš„æŠ€æœ¯çªç ´æ— ä¸ä½“ç°äº†å‰ç«¯æŠ€æœ¯çš„æŒç»­è¿›æ­¥å’Œäº§å“ä¸æ–­è¿½æ±‚å“è¶Šçš„æ€åº¦ã€‚åŒæ—¶æˆ‘ä¹Ÿå¸Œæœ›æœ¬æ–‡å¯ä»¥æŠ›ç –å¼•ç‰ï¼Œä¸ºè¯»è€…æ‰“å¼€æ€è·¯ï¼Œæä¾›å€Ÿé‰´ã€‚</p>
<p>éšç€äººå·¥æ™ºèƒ½å’Œå‰ç«¯æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œåˆ›æ–°ç”Ÿæ€çš„æ—¥ç›Šå®Œå–„ï¼Œæœªæ¥ä¸€å®šä¼šä¸æ–­æ¶Œç°å¤§é‡çš„æ–°æŠ€æœ¯å’Œæ–°ç†å¿µã€‚æˆ‘ç›¸ä¿¡åªè¦æ—¶åˆ»ä¿æŒç§¯æå­¦ä¹ å’Œä¸æ–­å°è¯•çš„æ¢ç´¢ç²¾ç¥ï¼Œå°±èƒ½å¼€æ‹“å‡ºæ›´å¤šç²¾å½©åˆ›æ–°çš„å®ç°æ–¹æ¡ˆå’Œåº”ç”¨åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¥¥ç‰¹æ›¼æ€•äº†ï¼GPT-5.5ã€Œå¤§è’œã€å†³æˆ˜è°·æ­Œï¼Œçº¢è‰²è­¦æŠ¥ç´§æ€¥æ‹‰å“]]></title>    <link>https://juejin.cn/post/7579440586694017070</link>    <guid>https://juejin.cn/post/7579440586694017070</guid>    <pubDate>2025-12-03T09:50:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579440586694017070" data-draft-id="7579410911057854490" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥¥ç‰¹æ›¼æ€•äº†ï¼GPT-5.5ã€Œå¤§è’œã€å†³æˆ˜è°·æ­Œï¼Œçº¢è‰²è­¦æŠ¥ç´§æ€¥æ‹‰å“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-12-03T09:50:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥¥ç‰¹æ›¼æ€•äº†ï¼GPT-5.5ã€Œå¤§è’œã€å†³æˆ˜è°·æ­Œï¼Œçº¢è‰²è­¦æŠ¥ç´§æ€¥æ‹‰å“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:50:07.000Z" title="Wed Dec 03 2025 09:50:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9d38f7065b748a891c36a0bc56eeae0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=b7JlnF79na6NdkdQn3GBdsEZp0M%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘ä¸‰å¹´æ²³ä¸œä¸‰å¹´æ²³è¥¿ï¼Œæ›¾ç»é€¼ç–¯è°·æ­Œçš„å¥¥ç‰¹æ›¼ï¼Œå¦‚ä»Šä¹Ÿè¢«è°·æ­Œé€¼å¾—æ‹‰å“äº†ã€Œçº¢è‰²è­¦æŠ¥ã€ï¼ŒAI ç‹åº§ä¹‹ä¸‹å·²æ˜¯åˆ€å…‰å‰‘å½±ã€‚æ›´åŠ²çˆ†çš„æ˜¯ï¼Œæœ€å¼ºã€ŒGarlicã€åœ¨é¢„è®­ç»ƒå–å¾—é‡å¤§çªç ´ï¼Œæ­£é¢ç¡¬åˆš Gemini 3.ã€</strong></h5>
<p>ä¸‰å¹´å‰ï¼ŒChatGPT æ¨ªç©ºå‡ºä¸–ã€‚</p>
<p>ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°é€éª¨ææƒ§çš„è°·æ­Œï¼Œä»“ä¿ƒæ‹‰å“äº†ã€Œçº¢è‰²è­¦æŠ¥ã€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29da3598447b43fbbbd262f8c65665a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=q9LGc7%2BMj8OflIN7v1Nnl1w6gcg%3D" alt="" loading="lazy"/></p>
<p>ä½†è°èƒ½æƒ³åˆ°ï¼Œä»…ä»…ä¸‰å¹´ï¼Œè¿™ä¸ªã€Œçº¢è‰²è­¦æŠ¥ã€ç«Ÿåœ¨ OpenAI è‡ªå·±å®¶é‡Œç‚¸å“ï¼</p>
<p>CEO å¥¥ç‰¹æ›¼ç´§æ€¥å‘å¸ƒå…¨å‘˜ä¿¡ï¼Œå­—é‡Œè¡Œé—´åªæœ‰ä¸€å¥ï¼š</p>
<p>ChatGPTï¼Œå±åœ¨æ—¦å¤•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af3a98cdacdc4b6ca834064513d2fd9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=XqBNEVNF7VSAmsKTYVArve6zNXE%3D" alt="" loading="lazy"/></p>
<p>å¥¥ç‰¹æ›¼ï¼šWe are at a critical time for ChatGPT</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39e5bbd52ffc4bb4b2dd06b5486ba907~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=kQnc093pzZHdnRukkHR8O2kYBs4%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä»£å· Garlicã€</strong></p>
<p><strong>ã€ŒOpenAI ç¥ç§˜æ¨¡å‹æ›å…‰ã€</strong></p>
<p>è¿™ä¸€æ¬¡ï¼Œè½®åˆ° OpenAI äº†ã€‚</p>
<p>æ®å¥¥ç‰¹æ›¼é€éœ²ï¼Œä¸‹å‘¨ï¼ŒOpenAI è®¡åˆ’å‘å¸ƒä¸€æ¬¾å…¨æ–°çš„æ¨ç†æ¨¡å‹ã€‚</p>
<p>å†…éƒ¨è¯„ä¼°æ˜¾ç¤ºï¼Œè¿™ä¸ªæ¨¡å‹åœ¨æ€§èƒ½ä¸Šè¦æ¯” Gemini 3 æ›´å¼ºï¼Œä½†åœ¨æ”¹å–„ ChatGPT çš„ã€Œä½“éªŒã€æ–¹é¢è¿˜æœ‰æ›´å¤šå·¥ä½œè¦åšã€‚</p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒInforamtion æœ€æ–°çˆ†æ–™ç§°ï¼ŒOpenAI è¿˜åœ¨ç ”å‘æ–°ä¸€ä»£æ¨¡å‹ï¼Œå†…éƒ¨ä»£å·ã€ŒGarlicã€ï¼ˆå¤§è’œï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/920a70185fc041c1b62015d873782370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=t%2FriiehDSCBP4dCKAGXrZFFmAg0%3D" alt="" loading="lazy"/></p>
<p>ã€ŒGarlicã€åœ¨é¢„è®­ç»ƒæ–¹é¢ï¼Œå®ç°äº†é‡å¤§çªç ´ã€‚</p>
<p>å®ƒä¿®å¤äº† GPT-4.5 æ—©æœŸç»“æ„ä¸­çš„é—®é¢˜ï¼Œé¢„è®¡æ˜å¹´åˆä½œä¸º GPT-5.2/GPT-5.5 å‘å¸ƒã€‚</p>
<p>è‡³å°‘åœ¨å†…éƒ¨å…¬æµ‹ä¸­ï¼Œã€ŒGarlicã€åœ¨ç¼–ç å’Œæ¨ç†ä»»åŠ¡ä¸Šï¼Œæ¯”è°·æ­Œ Gemini 3ã€Claude 4.5 Opus æ›´èƒœä¸€ç­¹ã€‚</p>
<p>ä¸Šä¸€å‘¨ï¼Œé¦–å¸­ç ”ç©¶å®˜ Mark Chen å‘å†…éƒ¨å›¢é˜Ÿåšäº†é—­é—¨åˆ†äº«ï¼Œæ ¸å¿ƒå°±ä¸€å¥è¯ï¼šã€ŒGarlicã€å‡†å¤‡å¥½äº†ï¼</p>
<p>æ˜¨å¤©ä¸€æ¬¡è®¿è°ˆä¸Šï¼ŒMark Chen å…¬å¼€å›åº”ï¼ŒGemini 3 æ˜¯ä¸€æ¬¾å¼ºå¤§æ¨¡å‹ï¼Œä½† OpenAI å·²æœ‰ä¸ä¹‹å®åŠ›ç›¸æŠ—çš„æ¨¡å‹ã€‚</p>
<p>ç”±æ­¤æ¥çœ‹ï¼ŒOpenAI æ—©å·²æ‚„æ‚„æŠŠä¸‹ä¸€å¼ ç‹ç‰Œæ”¥åœ¨äº†æ‰‹é‡Œã€‚</p>
<p>Mark Chen åœ¨å†…éƒ¨çš„åŸè¯æ˜¯ï¼š</p>
<p>æˆ‘ä»¬æ‰“ç®—å°½å¿«å‘å¸ƒ Garlic çš„æŸä¸ªç‰ˆæœ¬ã€‚ä»¥ç›®å‰çš„è¿›åº¦ï¼Œæ˜å¹´åˆå°±èƒ½çœ‹åˆ° GPT-5.2 æˆ– GPT-5.5 å‘å¸ƒï¼Œå¤§å®¶ä¹Ÿä¸å¿…æ„Ÿåˆ°æƒŠè®¶ã€‚</p>
<p>æ­¤å‰ï¼Œä¸ä»… Informationï¼Œè¿˜æœ‰ SemiAnalysis å¤šå®¶å¤–åª’çˆ†å‡ºï¼Œè‡ª GPT-4o ä¹‹åï¼ŒOpenAI å°šæœªå®Œæˆä¸‹ä¸€ä»£å‰æ²¿å¤§æ¨¡å‹çš„é¢„è®­ç»ƒä¸Šã€‚</p>
<p>å› ä¸ºè¿™äº›æŒ‘æˆ˜ï¼ŒOpenAI æ‰ä¸å¾—å·²å°†é‡å¿ƒè½¬å‘äº†â€”â€”æ¨ç†æ¨¡å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b192aee20f9e44bcb00cf8d63ee7afbf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=y5MuIyQugYkf4a2cdW2vdNkqGIA%3D" alt="" loading="lazy"/></p>
<p>10 æœˆï¼Œå¥¥ç‰¹æ›¼æ›¾å‘å…¨å‘˜ä¿è¯ï¼ŒOpenAI å°†å‘å¸ƒä»£å·ä¸ºã€ŒShallotpeatã€çš„æ–°å¤§è¯­è¨€æ¨¡å‹ï¼Œæ¥åº”æˆ˜è°·æ­Œ Gemini 3ã€‚</p>
<p>æ˜¾ç„¶ï¼Œã€ŒGarlicã€å’Œã€ŒShallotpeatã€æ˜¯ä¸¤æ¬¾ä¸åŒçš„æ¨¡å‹ã€‚</p>
<p>å‰è€…æ•´åˆäº†åœ¨å¼€å‘ã€ŒShallotpeatã€æœŸé—´ä¿®å¤çš„ Bugï¼Œæœ€å…³é”®çš„çªç ´å‘ç”Ÿåœ¨ã€Œé¢„è®­ç»ƒé˜¶æ®µã€ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œè°·æ­Œåœ¨ Gemini 3 ä¸Šæœ€å¤§çš„åº•æ°”ï¼Œå°±æ˜¯åœ¨é¢„è®­ç»ƒé˜¶æ®µå®ç°äº†ã€Œè´¨çš„é£è·ƒã€ã€‚</p>
<p>å°±è¿ OpenAI é«˜å±‚ï¼Œä¹Ÿåœ¨ç§ä¸‹æ‰¿è®¤äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>ä¸è¿‡ï¼Œåœ¨ã€ŒGarlicã€å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒOpenAI è§£å†³äº†æ­¤å‰é¢„è®­ç»ƒç¯èŠ‚é‡åˆ°çš„ä¸€äº›å…³é”®é—®é¢˜â€”â€”</p>
<p>æ”¹è¿›ä¹‹å‰ã€Œæœ€å¥½çš„ã€ä¸”ã€Œä½“é‡å¤§å¾—å¤šã€çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚</p>
<p>ä¹Ÿå°±æ˜¯ï¼Œä»Šå¹´ 2 æœˆå‘å¸ƒåï¼Œä¾¿å¦‚æ˜™èŠ±ä¸€ç°ã€å¦‚ä»Šå·²æ²¡ä»€ä¹ˆå­˜åœ¨æ„Ÿçš„ GPT-4.5ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œè¿™äº›ä¼˜åŒ–å¯ä»¥è®© OpenAI å°†åŒæ ·æµ·é‡çš„çŸ¥è¯†æ³¨å…¥åˆ°ä¸€ä¸ªæ›´å°çš„æ¨¡å‹ä¸­ã€‚è€Œä»¥å‰ï¼Œåªèƒ½é€šè¿‡å¼€å‘å·¨é‡æ¨¡å‹ï¼Œæ¥å®ç°ã€‚</p>
<p>ä¸ç”¨è¯´ï¼Œå¼€å‘å¤§æ¨¡å‹è‚¯å®šæ¯”å¼€å‘å°æ¨¡å‹æ›´çƒ§é’±ã€æ›´è€—æ—¶ï¼</p>
<p>Mark Chen è¿˜é€éœ²ä¸€ä¸ªæ›´ç‚¸è£‚çš„æ¶ˆæ¯ï¼š</p>
<p>å‡­å€Ÿç€ã€ŒGarlicã€çš„ç»éªŒç§¯ç´¯ï¼ŒOpenAI å·²æ‚„ç„¶å¯åŠ¨ä¸‹ä¸€ä»£æ›´å¤§ã€æ›´å¼ºçš„æ¨¡å‹äº†ã€‚</p>
<p>è¿™ä¸¤å‘¨ï¼ŒAI åœˆçš„é£å‘éƒ½å¹å‘äº†è°·æ­Œï¼ŒOpenAI ç½•è§åœ°é™·å…¥äº†è¢«åŠ¨ã€Œè¿½èµ¶ç€ã€çš„è§’è‰²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f0b5501d8574d64a514d3f28ddd65cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=RJUMvUtBUEe4fkRWPeCiXKpJiZ0%3D" alt="" loading="lazy"/></p>
<p>Gemini 3 å‘å¸ƒä¸¤å‘¨åï¼ŒChatGPT æ—¥æ´»è·ƒç”¨æˆ·ä¸‹é™äº† 6%</p>
<p>åœ¨æ‰³å›ä¸€å±€ä¹‹å‰ï¼ŒOpenAI å¿…é¡»æ‹‰å“ã€Œçº¢è‰²è­¦æŠ¥ã€ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6285a9ccf1554bcbb0f7e86d5c79835a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=RTPoiSjtG2vueQkU4rhqALAVCLc%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œã€ŒCode Redã€ã€</strong></p>
<p><strong>ã€Œç”Ÿæ­»å­˜äº¡ä¿å«æˆ˜æ‰“å“ã€</strong></p>
<p>å‡ å‘¨å‰ï¼Œä¸ºäº†æ”¹è¿› ChatGPTï¼ŒOpenAI æ›¾å®£å¸ƒè¿›å…¥äº†ã€Œæ©™è‰²è­¦æŠ¥ã€çŠ¶æ€ã€‚</p>
<p>å¦‚ä»Šçš„å¦‚ä»Šï¼Œä¸€åˆ‡æ›´åŠ ç´§è¿«äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71e402c6ca834626855245b77ab62ae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=QLVmh6IH0phTdEW67kRKzngShs8%3D" alt="" loading="lazy"/></p>
<p>éšç€ Code Red çš„å‘å¸ƒï¼Œ<strong>ã€Œé‚£äº›æ›¾ç»æ’æœŸåœ¨å‰çš„é¡¹ç›®éƒ½è¢«æ¨è¿Ÿäº†ã€‚ã€</strong></p>
<ul>
<li><strong>ã€Œå¹¿å‘Šä¸šåŠ¡ã€</strong>ï¼šæœ¬æ¥æƒ³å¼€å§‹é€šè¿‡æœç´¢èµšé’±çš„ï¼Œå…ˆæ”¾æ”¾ã€‚</li>
<li><strong>ã€ŒAIã€</strong> <strong>ã€Œæ™ºèƒ½ä½“ã€</strong>ï¼šé‚£ç§èƒ½å¸®ä½ è‡ªåŠ¨ä¹°ç¥¨ã€æŒ‚å·çš„å…¨èƒ½åŠ©æ‰‹ï¼Œå…ˆç­‰ç­‰ã€‚</li>
<li><strong>ã€ŒPulseã€</strong>ï¼šæœ¬æ¥æ‰“ç®—æ¯å¤©æ—©ä¸Šç»™ä½ å‘ä¸ªæ€§åŒ–æ–°é—»æ—©æŠ¥çš„äº§å“ï¼Œä¹Ÿç æ‰äº†ã€‚</li>
</ul>
<p><strong>ã€Œç›®çš„å¾ˆç®€å•ã€‚ã€</strong></p>
<p><strong>ã€Œå°±æ˜¯ç”¨æ‰‹å¤´ä¸Šæ‰€æœ‰çš„ç®—åŠ›ã€äººåŠ›å’Œè´¢åŠ›ï¼Œå»****æœåŠ¡ä¸€ä»¶äº‹ï¼šã€</strong></p>
<p>è®©ç°åœ¨çš„ ChatGPT å˜å¾—æ›´å¥½ã€‚</p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f19b44da3c2424e89343dc5297ccad5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=6ysCdVCC2GhB%2F6LcSyMTkomKIIY%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œã€ŒæŠ¤åŸæ²³ã€æ­£åœ¨å˜æµ…ã€</strong></p>
<p>ä¸ºä»€ä¹ˆè¦å¦‚æ­¤å¤§åŠ¨å¹²æˆˆï¼Ÿ</p>
<p>å› ä¸º OpenAI å‘ç°ï¼ŒåŸæœ¬çœ‹èµ·æ¥ä¸å¯é€¾è¶Šçš„é¢†å…ˆä¼˜åŠ¿ï¼Œæ­£åœ¨è¢«å¯¹æ‰‹ä¸€ç‚¹ç‚¹èš•é£Ÿã€‚</p>
<p><strong>ã€Œ1. å¢é•¿ä¼¼ä¹æ²¡ä»¥å‰é‚£ä¹ˆçŒ›äº†ï¼šã€</strong></p>
<p>CFO åœ¨ä¸æŠ•èµ„äººçš„ç”µè¯ä¼šè®®ä¸­æš—ç¤ºï¼šChatGPT çš„æŸäº›å¢é•¿æŒ‡æ ‡åœ¨æ”¾ç¼“â€”â€”å¯èƒ½æ˜¯ç”¨æˆ·æ•°ã€ä½¿ç”¨æ—¶é•¿ã€è®¢é˜…æ•°ï¼Œç­‰ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0e23cfc86744b9882a7b5102ad42f9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=sy8Hgsn1j1sQVVwp%2B5UH4qmO%2Fo8%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ2. è°·æ­Œçš„åå‡»ï¼Œè¶Šæ¥è¶Šæœ‰å¨èƒã€****ï¼š</strong></p>
<p>å¼ºå¤§çš„æ–°ä¸€ä»£æ¨¡å‹å¸å¼•åŠ›åè¶³ï¼Œä¸ç®¡æ˜¯ç”¨æˆ·è¿˜æ˜¯å¼€å‘è€…ï¼Œéƒ½ä¸å†åªç›¯ç€ OpenAI ä¸€å®¶ã€‚</p>
<p>åœ¨æœç´¢ä¸­åŠ å…¥çš„ã€ŒAI æ¨¡å¼ã€ï¼Œè®©æœç´¢è¿™ä»¶äº‹å˜æˆäº†åƒæ˜¯å’Œã€ŒAI èŠå¤©ã€ä¸€æ ·ã€‚</p>
<p>ç§ç§å› ç´ å åŠ ä¹‹åï¼ŒGemini çš„æœˆæ´»ç”¨æˆ·ä¹Ÿä» 7 æœˆçš„ 4.5 äº¿ï¼Œé£™å‡åˆ°äº† 10 æœˆçš„ 6.5 äº¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6799f0b58ffb48d484f2d5cb731729f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=whF8SpCiXmOEDPoO6tXd%2Bei6tL8%3D" alt="" loading="lazy"/></p>
<p>å¥¥ç‰¹æ›¼å‘å†…éƒ¨ä¿¡ï¼Œè­¦å‘Šé“ï¼šè°·æ­Œåœ¨ AI é¢†åŸŸçš„å·åœŸé‡æ¥ï¼Œå¯èƒ½ä¼šç»™ OpenAI å¸¦æ¥ã€Œæš‚æ—¶æ€§çš„ç»æµé€†é£ã€</p>
<p><strong>ã€Œ3. è¦çƒ§çš„é’±ï¼Œå®åœ¨å¤ªå¤šäº†ï¼šã€</strong></p>
<p>æœªæ¥å‡ å¹´ï¼Œä¸ºäº†è®­ç»ƒæ›´å¼ºæ¨¡å‹ + æ”¯æ’‘ ChatGPT è·‘èµ·æ¥ï¼ŒOpenAI è¦çƒ§æ‰æ•°ç™¾äº¿ç¾å…ƒã€‚</p>
<p>åè¿‡æ¥ï¼ŒChatGPT è®¢é˜…å¸¦æ¥çš„æ”¶å…¥é¢„æœŸæ˜¯ï¼šä»Šå¹´çº¦ 100 äº¿ç¾å…ƒï¼Œæ˜å¹´ 200 äº¿ï¼Œ2027 å¹´ 350 äº¿ã€‚</p>
<p>å› æ­¤ï¼Œä¸ºäº†ç»™è¿™åœºã€Œçƒ§é’±é•¿è·‘ã€ç»­å‘½ï¼ŒOpenAI å¸Œæœ›èƒ½å¤Ÿå†èå·®ä¸å¤š 1000 äº¿ç¾å…ƒã€‚</p>
<p>ä½†æˆåŠŸä¸å¦ï¼Œå°±å¾—çœ‹ ChatGPT çš„è¡¨ç°å¦‚ä½•äº†ã€‚</p>
<p>æ€»ç»“æ¥è¯´ï¼Œåœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œ<strong>ã€Œä»»ä½•å¢é•¿æ”¾ç¼“ã€ç”¨æˆ·æµå¤±ï¼Œéƒ½ä¼šè¢«æ”¾å¤§æˆã€Œç”Ÿæ­»é—®é¢˜ã€ã€</strong>ã€‚</p>
<ol>
<li>ç”¨æˆ·é‡è¿½é€æˆ˜</li>
</ol>
<ul>
<li>OpenAI è¡¨ç¤ºï¼ŒChatGPT ç›®å‰æ‰¿æ‹…äº†å…¨çƒ 70% çš„ã€ŒAI åŠ©æ‰‹æ´»åŠ¨ã€å’Œ 10% çš„ã€Œæœç´¢æ´»åŠ¨ã€ã€‚</li>
<li>è°·æ­Œåˆ™å±•ç¤º Gemini çš„å¿«é€Ÿå¢é•¿ï¼ŒæŠŠå®ƒæ·±åº¦æ•´åˆåˆ°è‡ªå®¶æœç´¢å’Œäº§å“çŸ©é˜µé‡Œã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9d798e180bd44a5af4c25d4fbc59e40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=z9CQnnJQKLVqWt4O%2FG4PT4BkNt4%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>ç”Ÿæ€ vs. çˆ†æ¬¾</li>
</ol>
<ul>
<li>OpenAI ç›®å‰çš„ç‹ç‰Œæ˜¯ï¼šä¸€ä¸ªæå¼ºã€æå‡ºåœˆçš„ ChatGPT + ä¸€å¥—å¼€å‘è€… APIã€‚</li>
<li>è°·æ­Œæ‹¿å‡ºçš„åˆ™æ˜¯ï¼šæœç´¢ + é‚®ç®± + æ–‡æ¡£ + å®‰å“ + æµè§ˆå™¨ + YouTube+â€¦+Geminiï¼Œæ•´ä¸ªç”Ÿæ€é€šé€š AI åŒ–ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7ede0fbea7a4a3eb4be3406e7ec5281~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=4hAwR3E2zUuQ9yjtbyv39GkX%2Bt8%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒOpenAI æ‰“ç®—æŠŠèµ„æºç ¸åœ¨å“ªé‡Œï¼Ÿã€</strong></p>
<p>åœ¨å¤‡å¿˜å½•é‡Œï¼Œå¥¥ç‰¹æ›¼é‡ç‚¹ç‚¹äº†å‡ æ¡ã€Œä¼˜å…ˆçº§æ‹‰æ»¡ã€çš„æ–¹å‘ï¼š</p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f3d08e5fcde425cbc45645bb2cad11a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=nQW5uK2d%2BQo2OpaQgmgJAOKI6r8%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œè®©æ¯ä¸ªäººéƒ½èƒ½å®šåˆ¶è‡ªå·±çš„ AIã€</strong></p>
<p>ä»–è¯´è¦**ã€Œè®©æ¯å‘¨ 8 äº¿æ¬¡ä½¿ç”¨èƒŒåçš„äººï¼Œæ„Ÿè§‰è¿™å°±æ˜¯****ã€Œ<strong>ã€Œ</strong>ã€Œæˆ‘çš„ ChatGPTã€<strong>ã€</strong>ã€ã€**ï¼Œè€Œä¸æ˜¯åƒç¯‡ä¸€å¾‹çš„å¤§ä¼—å·¥å…·ï¼š</p>
<ul>
<li>å…è®¸ç”¨æˆ·å®šåˆ¶ï¼šå®ƒçš„è¯´è¯é£æ ¼ã€åå¥½ã€å·¥ä½œæµæ–¹å¼ï¼Œç”šè‡³è®°ä½ä½ æ˜¯è°ã€ä½ æ€ä¹ˆåšäº‹ã€‚</li>
<li>è¿™å’Œæ­¤å‰æåˆ°çš„ã€ŒMemoryã€ï¼ˆè®°å¿†åŠŸèƒ½ï¼‰ä¸€è„‰ç›¸æ‰¿â€”â€”AI ä¸åªæ˜¯å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯é•¿æœŸã€Œè®¤è¯†ä½ ã€ã€‚</li>
</ul>
<p>ç°åœ¨çš„ ChatGPTï¼Œåƒä¸€ä¸ªæ¯æ¬¡è§é¢éƒ½è¦é‡æ–°è‡ªæˆ‘ä»‹ç»çš„å‰å°ã€‚</p>
<p>è€Œæœªæ¥å®ƒæ›´åƒä¸€ä¸ªé•¿æœŸè·Ÿä½ æ­æ¡£çš„åŠ©ç†ï¼šè®°å¾—ä½ åšä»€ä¹ˆå·¥ç§ã€ä½ å®¶æœ‰å‡ ä¸ªå­©å­ã€ä½ å†™ä»£ç ç”¨ä»€ä¹ˆé£æ ¼ã€ä½ è®¨åŒä»€ä¹ˆè¯­æ°”ã€‚</p>
<p>è¿™ä»¶äº‹ï¼Œå¯¹**ã€Œæé«˜ç”¨æˆ·é»æ€§ã€**éå¸¸å…³é”®â€”â€”</p>
<p>å½“ä¸€ä¸ªå·¥å…·å¼€å§‹ã€Œæ‡‚ä½ ã€ï¼Œä½ å°±ä¸å¤ªæƒ³é¢‘ç¹æ¢å¹³å°äº†ã€‚</p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7be84617ae14ca89360d57a315be09e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=gxL3dUZ0U6K14Xqhec3nIw%2F8c9Y%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå›¾åƒç”Ÿæˆæ˜¯ç¬¬äºŒæˆ˜åœºã€</strong></p>
<p>å›¾åƒç”Ÿæˆä¹‹æ‰€ä»¥é‡è¦ï¼Œæ˜¯å› ä¸ºï¼š</p>
<ul>
<li>å¾ˆå¤šäººå¯èƒ½ä¸ä¼šé•¿æœŸç”¨ ChatGPT å†™é•¿æ–‡ï¼Œä½†ä¼š**ã€Œç»å¸¸æ¥ç”Ÿå›¾ã€**ï¼›</li>
<li>è¿™æ˜¯å’Œ**ã€Œåˆ›ä½œè€…ã€è®¾è®¡å¸ˆã€æ™®é€šç”¨æˆ·ã€<strong>è”ç»“çš„</strong>ã€Œå…³é”®ã€**å…¥å£ï¼›</li>
<li>å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œä¹Ÿå¯ä»¥åå“ºå¾ˆå¤š**ã€Œäº§å“åœºæ™¯ã€**ï¼ˆå¹¿å‘Šè®¾è®¡ã€ç”µå•†å±•ç¤ºã€æ¸¸æˆæ¦‚å¿µå›¾ç­‰ï¼‰ã€‚</li>
</ul>
<p>æœ€è¿‘è¿™æ®µæ—¶é—´ï¼Œè°·æ­Œä¾¿æ˜¯å‡­å€Ÿç€ Nano Banana å’Œ Nano Banana Pro æ–­å´–å¼çš„é¢†å…ˆä¼˜åŠ¿ï¼Œè¿ç»­æ•°æœˆç§°éœ¸å…¨çƒ AI åœˆçš„çƒ­é—¨è¯é¢˜ã€‚</p>
<p>æ‰€ä»¥ä¹Ÿä¸éš¾ç†è§£ï¼Œä¸ºä½•å¥¥ç‰¹æ›¼ä¼šæŠŠå›¾åƒç”Ÿæˆèƒ½åŠ›åˆ—ä¸º Code Red çš„é‡ç‚¹ä¹‹ä¸€äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89eb88ca2ceb4e6dab2bee244cea0341~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=sBjmTRpjalKSJmUn%2FppMjcvrnFo%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cc07fa3b3e845e59c0f90136caa5319~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=rgahpPUABX9F2GFZcODDYWO8rmk%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œèµ¢ä¸‹å„ç§å…¬å¼€æ’è¡Œæ¦œçš„å¿ƒæ™ºæˆ˜ã€</strong></p>
<p>ã€Œæ¨¡å‹è¡Œä¸ºã€åŒ…æ‹¬å‡ ä»¶äº‹ï¼š</p>
<ul>
<li>å›ç­”æ˜¯å¦**ã€Œå‡†ç¡®ã€æœ‰ç”¨ã€å°‘èƒ¡è¯´å…«é“ã€**ï¼›</li>
<li>æ˜¯å¦<strong>è¯­æ°”èˆ’æœï¼Œä¸é˜´é˜³æ€ªæ°”ã€****ã€Œæœ‰äººå‘³ã€</strong>ï¼›</li>
<li>æ˜¯å¦**ã€Œåˆšåˆšå¥½æ‹¿æã€**å®‰å…¨ä¸å¼€æ”¾ä¹‹é—´çš„å°ºåº¦ã€‚</li>
</ul>
<p>è€Œå¥¥ç‰¹æ›¼æƒ³è¦çš„ï¼Œæ˜¯å¤§å¹…æ”¹å–„è¿™äº›ã€Œè¡Œä¸ºã€ï¼Œä»è€Œè®©ç”¨æˆ·åœ¨ LMArena è¿™ç±»å…¬å¼€æ’åé‡Œï¼Œæ›´æ„¿æ„é€‰ ChatGPT èƒŒåçš„æ¨¡å‹ï¼Œè€Œä¸æ˜¯ç«å“ã€‚</p>
<p>å› ä¸ºï¼Œè¿™ç±»æ¦œå•å¯¹**ã€Œå¼€å‘è€…å’Œé‡åº¦ç”¨æˆ·ã€**å½±å“å¾ˆå¤§ï¼Œä¼šå½±å“ä»–ä»¬é€‰å“ªä¸ªæ¨¡å‹æ¥æ„å»ºè‡ªå·±çš„åº”ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42de62cb8e7b4a23bbebf081d8d04b85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=vYhQ3ckNYMPsnQS6UaC2YOr13Xs%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fddb852bd223473890aade45da8ad3ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=G236tf3SjYmJvt8AC7uwZRyeB6s%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œé€Ÿåº¦ã€å¯é æ€§å’Œæ‹’ç»æœºåˆ¶ã€</strong></p>
<p>æ­¤å¤–ï¼Œå¥¥ç‰¹æ›¼è¿˜ç‚¹åäº†ä¸‰ä¸ªä¼˜åŒ–æ–¹å‘ï¼š</p>
<ul>
<li>å›ç­”**ã€Œé€Ÿåº¦ã€**æ›´å¿«</li>
<li><strong>ã€Œå¯é æ€§æ›´é«˜ã€</strong></li>
<li><strong>ã€Œ</strong>ã€Œ<strong>ã€Œè¿‡åº¦æ‹’ç»ã€</strong>ã€<strong>ã€****ã€Œæ›´å°‘ã€</strong></li>
</ul>
<p>é€Ÿåº¦æ–¹é¢ï¼Œä¸ä»…ç”¨æˆ·ååˆ†æ•æ„Ÿï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´æ›´æ˜¯å¦‚æ­¤â€”â€”å»¶è¿Ÿå¤ªé«˜ï¼Œæ•´ä¸ªäº§å“çš„ä½“éªŒå°±ä¼šç›´æ¥å´©ç›˜ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œã€Œè¿‡åº¦æ‹’ç»ã€ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ä½¿ç”¨ç—›ç‚¹ï¼šä½ æ˜æ˜é—®çš„æ˜¯æ­£å¸¸é—®é¢˜ï¼Œç»“æœ AI è¢«é£æ§å“åˆ°ï¼ŒåŠ¨ä¸åŠ¨å°±è¯´ã€Œå¯¹ä¸èµ·ï¼Œæˆ‘æ— æ³•å›ç­”è¿™ä¸ªé—®é¢˜ã€ã€‚</p>
<p>æ¥ä¸‹æ¥ä»–ä»¬è¦åšçš„æ˜¯ï¼š<strong>ã€Œåœ¨å®‰å…¨çº¢çº¿å†…ï¼Œå°½é‡å‡å°‘è¯¯ä¼¤æ­£å¸¸éœ€æ±‚ã€‚ã€</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9532252387824d8c8d8eba8ed0e1f891~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=MMYbCORDRO965niMuJUMEhaHyjo%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œè¿™æ„å‘³ç€ä»€ä¹ˆï¼Ÿã€</strong></p>
<p>å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œä»–ä»¬åœ¨ä¸€ä¸ªå¹³å°ä¸ŠæŠ•å…¥çš„ã€Œæ—¶é—´ + ä¹ æƒ¯ã€ï¼Œä¼šå½¢æˆæ›´å¼ºçš„é”å®šã€‚</p>
<p><strong>ã€Œæœªæ¥çš„ ChatGPTï¼Œä¼šè¶Šæ¥è¶Šåƒã€****ã€Œ</strong>ã€Œ<strong>ã€Œç§äººã€</strong> <strong>ã€ŒAIã€</strong> <strong>ã€ŒåŠ©ç†ã€</strong>ã€<strong>ã€</strong>ã€Œ<strong>ã€Œï¼Œè€Œä¸æ˜¯å…¬å…±é—®ç­”æœºã€</strong>ã€**ã€‚**å®ƒä¼šæ›´äº†è§£ä½ çš„åå¥½ã€æ›´ä¼šã€Œè®°äº‹ã€ã€æ›´åƒä¸€ä¸ªé•¿ä¹…é™ªä¼´çš„å·¥å…·ã€‚</p>
<p><strong>ã€Œä½“éªŒæ–¹é¢ï¼Œä¹Ÿä¼šæ›´å¿«ã€æ›´ç¨³å®šï¼Œä»¥åŠ</strong>ã€Œ<strong>ã€Œæ›´ã€</strong>ã€<strong>å°‘æ— æ•…è¢«æ‹’ã€****ã€‚</strong></p>
<p>å¦‚æœèƒ½è®©ç”¨æˆ·ä½¿ç”¨èµ·æ¥æ›´é¡ºæ‰‹ï¼Œé‚£ä¹ˆå°±æœ‰æœºä¼šå¢åŠ ä»–ä»¬å¯¹ AI çš„ä¾èµ–åº¦ã€‚ä¹Ÿå°±æ˜¯ï¼Œä»ã€Œå¶å°”ç©ç©ã€å˜æˆã€Œæ¯å¤©ç¦»ä¸å¼€ã€ã€‚</p>
<p>**ã€Œå›¾åƒã€åˆ›æ„ã€å¤šæ¨¡æ€ï¼Œä¼šè¶Šæ¥è¶Šé‡è¦ã€****ã€‚**ä¸åªæ˜¯ã€Œé—®ç­”å’Œå†™ä½œã€ï¼Œè€Œæ˜¯è´¯ç©¿ã€Œå†™æ–‡ + ç”»å›¾ + åšè®¾è®¡ + æŸ¥èµ„æ–™ã€çš„å…¨å¥—æµç¨‹ã€‚</p>
<p>å¯¹äºè¡Œä¸šæ¥è¯´ï¼Œ<strong>ã€ŒçŸ­æœŸå†…ã€****ã€Œ</strong>ã€Œ<strong>ã€Œå·ä½“éªŒã€</strong>ã€<strong>ã€</strong>ã€Œ<strong>ã€Œä¼šæ¯”ã€</strong>ã€<strong>ã€Œ</strong>ã€Œ<strong>ã€Œå·å‚æ•°é‡ã€</strong>ã€<strong>ã€</strong>ã€Œ<strong>ã€Œæ›´é‡è¦ã€</strong>ã€<strong>ã€‚</strong></p>
<p><strong>ã€Œæ¨¡å‹å‚æ•°ä¸€å†å‡çº§ï¼Œæ™®é€šç”¨æˆ·å·²ç»åˆ†ä¸æ¸…ã€Œ1 ä¸‡äº¿å‚æ•°ã€å’Œã€Œ2 ä¸‡äº¿å‚æ•°ã€çš„åŒºåˆ«äº†ã€‚ä½†æ˜¯è°æ‰“å¼€æ›´å¿«ã€è°æ›´ç¨³å®šã€è°æ›´æ‡‚è‡ªå·±ï¼Œç”¨æˆ·ä¸€ç”¨å°±çŸ¥é“ã€‚ã€</strong></p>
<p><strong>ã€Œå¯¹äºã€</strong> <strong>ã€ŒOpenAIã€</strong> <strong>ã€Œæ¥è¯´ï¼Œè¿™æ˜¯ä¸€æ¬¡ã€****ã€Œ</strong>ã€Œ<strong>ã€Œä¸ä¸€å®šã€</strong>ã€<strong>å†³å®šç”Ÿæ­»</strong>**ã€ä½†ä¼°å€¼æ„ä¹‰æå¤§****ã€<strong>ã€Œ</strong>ã€Œçš„äº‰å¤ºæˆ˜ã€<strong>ã€</strong>ã€‚**</p>
<p>1000 äº¿ç¾å…ƒçš„èèµ„ç›®æ ‡ã€æ•°ç™¾äº¿ç¾å…ƒçš„ç®—åŠ›æŠ•å…¥ï¼Œéƒ½éœ€è¦ä¸€ä¸ªå¼ºè€Œç¨³å®šçš„ç°é‡‘ç‰›åšæ”¯æ’‘ã€‚</p>
<p>è€Œ ChatGPT å°±æ˜¯è¿™å¤´ç‰›ï¼šä¸ä»…è¦æœ‰æµé‡ï¼Œè¿˜è¦æœ‰ç²˜æ€§å’Œä»˜è´¹æ„æ„¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/491a697e71514f92b17bf03f4d56a220~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=KD%2F%2Fa8IEkgsj76abVrFJFm7Hi%2BM%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å‘è€…å’Œåˆ›ä¸šè€…ï¼Œ****ã€Œåˆ™è¦å¼€å§‹è€ƒè™‘ç«™é˜Ÿå“ªä¸ªã€Œ</strong>ã€Œ<strong>ã€Œç”Ÿæ€å¤§æœ¬è¥ã€</strong>ã€<strong>ã€ï¼šã€</strong></p>
<ul>
<li>å¦‚æœ ChatGPT çš„ä½“éªŒå’Œå£ç¢‘ç»§ç»­é¢†å…ˆï¼Œå®ƒä¼šæˆä¸ºå¤§å®¶é»˜è®¤æ¥å…¥çš„ã€ŒAI æ°´ç”µç«™ã€ï¼›</li>
<li>è°·æ­Œç­‰å¦‚æœåœ¨æŸäº›åœºæ™¯åšå¾—æ›´é¡ºæ»‘ï¼ŒåŠ¿å¿…åˆ†èµ°ä¸€éƒ¨åˆ†æ–°åº”ç”¨ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89a2e07dfb1248f9a04550a9b8df6070~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360206&amp;x-signature=ChKKg3dEwvVIU90kL9dce2YgvXM%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œä¸€åœºæ²¡æœ‰ç»ˆç‚¹çš„å†›å¤‡ç«èµ›ã€</strong></p>
<p><strong>ã€Œæ€»ç»“èµ·æ¥å°±ä¸€å¥ï¼šAI èµ›é“ï¼Œ</strong>ã€Œæ²¡æœ‰æ°¸æ’çš„ç‹åº§ã€‚ã€<strong>ã€</strong></p>
<p>ä»…ä»…ä¸‰å¹´å‰ï¼ŒChatGPT è¿˜æ˜¯é‚£ä¸ªæŠŠè°·æ­Œå“å‡ºä¸€èº«å†·æ±—çš„ã€Œå± é¾™å°‘å¹´ã€ï¼Œå¦‚ä»Šå´åœ¨ç–²äºåº”å¯¹æ¥è‡ªæœç´¢å¸å›½çš„å‡›å†½åæ€ã€‚</p>
<p>ä¸è¿‡ï¼Œè¿™æ°æ°æ˜¯æ™®é€šç”¨æˆ·çš„ã€Œæ—¶ä»£çº¢åˆ©ã€â€”â€”ä»–ä»¬å·å¾—è¶Šå‡¶ï¼Œæˆ‘ä»¬ç”¨å¾—è¶Šçˆ½ã€‚</p>
<p>åƒå¸†è¿‡å°½ï¼Œæè‡´çš„äº§å“ä½“éªŒï¼Œæ‰æ˜¯äº˜å¤ä¸å˜çš„ç¡¬é“ç†ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼šHJY</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theinformation.com%2Farticles%2Fopenai-ceo-declares-code-red-combat-threats-chatgpt-delays-ads-effort%3Frc%3Depv9gi" target="_blank" title="https://www.theinformation.com/articles/openai-ceo-declares-code-red-combat-threats-chatgpt-delays-ads-effort?rc=epv9gi" ref="nofollow noopener noreferrer">www.theinformation.com/articles/opâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7579298511072346112</link>    <guid>https://juejin.cn/post/7579298511072346112</guid>    <pubDate>2025-12-03T09:57:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579298511072346112" data-draft-id="7578820431039561768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ "/> <meta itemprop="keywords" content="å‰ç«¯,gradle"/> <meta itemprop="datePublished" content="2025-12-03T09:57:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜å·"/> <meta itemprop="url" content="https://juejin.cn/user/114004941350269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android Gradle å­¦ä¹  - Kts Gradleå­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004941350269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T09:57:32.000Z" title="Wed Dec 03 2025 09:57:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>â€ƒâ€ƒ25å¹´ä¸»è¦å·¥ä½œæ˜¯æ–°Appçš„å¼€å‘å’ŒæŠ½ç¦»ï¼ŒæœŸé—´å¯¹Asmå’ŒPluginæ–¹é¢å·¥ä½œè¾ƒå¤šï¼Œç†æ‰€å½“ç„¶çš„éœ€è¦å’ŒGradleæ‰“äº¤é“ï¼Œç”±äºé¡¹ç›®ä¸­ä½¿ç”¨çš„Gradleç‰ˆæœ¬è¾ƒä½ï¼Œä¸”ä¸ºGroovyç‰ˆæœ¬ï¼Œæ‰€ä»¥å¯¹Groovy7.0å’ŒKtsç‰ˆæœ¬æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼Œä¹‹å‰çœ‹è¿‡ä½†æ˜¯æ²¡æœ‰å®è·µè¿‡ï¼Œæ‰€ä»¥å°±æœ‰äº†æœ¬ç¯‡è®°å½•æ–‡ç« ï¼Œç®—æ˜¯å¯¹25å¹´ä¸ŠåŠå¹´éƒ¨åˆ†å­¦ä¹ çŸ¥è¯†çš„æ€»ç»“ã€‚ psï¼šAIå½“é“ï¼Œè™½ç„¶å¾ˆå¤šé—®é¢˜å’Œç–‘æƒ‘ç›´æ¥è®©Cursoræ¥å®ç°å°±å¥½äº†ï¼Œä½†æ˜¯è¯¥æœ‰çš„çŸ¥è¯†åº“ç§¯ç´¯è¿˜æ˜¯è¦åšçš„ï¼Œå¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚</p>
<h2 data-id="heading-1">Gradleç®€è¦ä»‹ç»</h2>
<p>æ³¨é‡Šï¼šä¸‹è¾¹ä»¥Gradle kts ä¸ºä¾‹
ç®€å•å±•ç¤ºä¸‹ä¸€èˆ¬å·¥ç¨‹çš„é¡¹ç›®ç»“æ„å›¾</p>
<pre><code class="hljs language-bash" lang="bash">MyAndroidApp/
â”œâ”€â”€ gradle/
â”‚   â”œâ”€â”€ wrapper/
â”‚   â”‚   â”œâ”€â”€ gradle-wrapper.jar          <span class="hljs-comment"># ä¸»è¦æ˜¯Gradleçš„è¿è¡Œé€»è¾‘ï¼ŒåŒ…å«ä¸‹è½½Gradle</span>
â”‚   â”‚   â””â”€â”€ gradle-wrapper.properties   <span class="hljs-comment"># Wrapper é…ç½®ï¼Œå®šä¹‰äº†Gradleç‰ˆæœ¬</span>
â”‚   â””â”€â”€ libs.versions.toml              <span class="hljs-comment"># ç‰ˆæœ¬ç›®å½•ï¼ˆGradle 7.0+ï¼‰</span>
â”‚
â”œâ”€â”€ app/                                <span class="hljs-comment"># åº”ç”¨æ¨¡å—</span>
â”‚   â”œâ”€â”€ build.gradle.kts                <span class="hljs-comment"># æ¨¡å—æ„å»ºè„šæœ¬</span>
â”‚   â”œâ”€â”€ proguard-rules.pro              <span class="hljs-comment"># ProGuard è§„åˆ™</span>
â”‚   â””â”€â”€ src/                            <span class="hljs-comment"># æºä»£ç </span>
â”‚
â”œâ”€â”€ ktslibrary/                         <span class="hljs-comment"># åº“æ¨¡å—ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/
â”‚
â”œâ”€â”€ buildSrc/                           <span class="hljs-comment"># è‡ªå®šä¹‰æ„å»ºé€»è¾‘ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ build.gradle.kts
â”‚   â””â”€â”€ src/
â”‚
â”œâ”€â”€ build.gradle.kts                    <span class="hljs-comment"># æ ¹é¡¹ç›®æ„å»ºè„šæœ¬</span>
â”œâ”€â”€ settings.gradle.kts                 <span class="hljs-comment"># é¡¹ç›®è®¾ç½®</span>
â”œâ”€â”€ gradle.properties                   <span class="hljs-comment"># Gradle å±æ€§é…ç½®</span>
â”œâ”€â”€ local.properties                    <span class="hljs-comment"># æœ¬åœ°é…ç½®ï¼ˆä¸æäº¤åˆ° Gitï¼‰</span>
â”œâ”€â”€ gradlew                             <span class="hljs-comment"># Gradle Wrapper è„šæœ¬ï¼ˆUnixï¼‰</span>
â””â”€â”€ gradlew.bat                         <span class="hljs-comment"># Gradle Wrapper è„šæœ¬ï¼ˆWindowsï¼‰</span>
</code></pre>
<h3 data-id="heading-2">gradle-wrapper.properties</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">#Tue Nov <span class="hljs-number">11</span> <span class="hljs-number">20</span>:<span class="hljs-number">22</span>:<span class="hljs-number">16</span> CST <span class="hljs-number">2025</span>
<span class="hljs-comment">//ä¸‹è½½çš„Gradleçš„å‹ç¼©åŒ…è§£å‹åçš„ä¸»ç›®å½•</span>
distributionBase=GRADLE_USER_HOME   
<span class="hljs-comment">// ç›¸å¯¹äºdistributionBaseçš„è§£å‹åçš„Gradleçš„è·¯å¾„ï¼Œä¸ºwrapper/dists</span>
distributionPath=wrapper/dists
<span class="hljs-comment">// Gradleç‰ˆæœ¬çš„ä¸‹è½½åœ°å€</span>
distributionUrl=https:<span class="hljs-comment">//services.gradle.org/distributions/gradle-8.11.1-bin.zip</span>
<span class="hljs-comment">// åŒdistributionBaseï¼Œä¸è¿‡æ˜¯å­˜æ”¾zipå‹ç¼©åŒ…çš„ä¸»ç›®å½•</span>
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</code></pre>
<p>å’Œgroovyç‰ˆæœ¬å˜åŒ–ä¸å¤§,ä¸»è¦è§£é‡Šéƒ½åœ¨å¤‡æ³¨é‡Œäº†</p>
<h3 data-id="heading-3">settings.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ’ä»¶ç®¡ç†é…ç½®</span>
pluginManagement {
    <span class="hljs-comment">// é…ç½®æ’ä»¶ä»“åº“</span>
    repositories {
        <span class="hljs-comment">// Google çš„ Maven ä»“åº“ï¼ˆAndroid æ’ä»¶ï¼‰</span>
        google {
            <span class="hljs-comment">// å†…å®¹è¿‡æ»¤ï¼šåªä» Google ä¸‹è½½ç‰¹å®šåŒ…</span>
            content {
                includeGroupByRegex(<span class="hljs-string">"com\\.android.*"</span>)
                includeGroupByRegex(<span class="hljs-string">"com\\.google.*"</span>)
                includeGroupByRegex(<span class="hljs-string">"androidx.*"</span>)
            }
        }
        
        mavenCentral()  <span class="hljs-comment">// Maven ä¸­å¤®ä»“åº“</span>
        gradlePluginPortal()  <span class="hljs-comment">// Gradle æ’ä»¶é—¨æˆ·</span>
    }
    
    <span class="hljs-comment">// æ’ä»¶ç‰ˆæœ¬è§£æç­–ç•¥</span>
    resolutionStrategy {
        eachPlugin {
            <span class="hljs-comment">// è‡ªå®šä¹‰æ’ä»¶ç‰ˆæœ¬è§£æ</span>
            <span class="hljs-keyword">if</span> (requested.id.id == <span class="hljs-string">"com.example.plugin"</span>) {
                useModule(<span class="hljs-string">"com.example:plugin:<span class="hljs-subst">${requested.version}</span>"</span>)
            }
        }
    }
}

<span class="hljs-comment">// 2. ä¾èµ–ç®¡ç†é…ç½® ä¸‰æ–¹åº“å¼•å…¥çš„æºå¤´é…ç½®</span>
dependencyResolutionManagement {
    <span class="hljs-comment">// ä»“åº“æ¨¡å¼</span>
    <span class="hljs-comment">// FAIL_ON_PROJECT_REPOS: ç¦æ­¢åœ¨é¡¹ç›®ä¸­å£°æ˜ä»“åº“ï¼ˆæ¨èï¼‰</span>
    <span class="hljs-comment">// PREFER_PROJECT: ä¼˜å…ˆä½¿ç”¨é¡¹ç›®ä¸­çš„ä»“åº“</span>
    <span class="hljs-comment">// PREFER_SETTINGS: ä¼˜å…ˆä½¿ç”¨ settings ä¸­çš„ä»“åº“</span>
    repositoriesMode.<span class="hljs-keyword">set</span>(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
    
    <span class="hljs-comment">// é…ç½®ä¾èµ–ä»“åº“</span>
    repositories {
        google()
        mavenCentral()
        mavenLocal()  <span class="hljs-comment">// æœ¬åœ° Maven ä»“åº“</span>
        maven { url = uri(<span class="hljs-string">"https://jitpack.io"</span>) }   <span class="hljs-comment">// JitPackï¼ˆGitHub é¡¹ç›®ï¼‰</span>
        <span class="hljs-comment">// é˜¿é‡Œäº‘é•œåƒï¼ˆå›½å†…åŠ é€Ÿï¼‰</span>
        maven { url = uri(<span class="hljs-string">"https://maven.aliyun.com/repository/public"</span>) }
        maven { url = uri(<span class="hljs-string">"https://maven.aliyun.com/repository/google"</span>) }
    }
    
    <span class="hljs-comment">// ç‰ˆæœ¬ç›®å½•</span>
    versionCatalogs {
        <span class="hljs-comment">// è‡ªå®šä¹‰ç‰ˆæœ¬ç›®å½•</span>
        create(<span class="hljs-string">"testLibs"</span>) {
            from(files(<span class="hljs-string">"gradle/test-libs.versions.toml"</span>))
        }
    }
}

<span class="hljs-comment">// 3. æ„å»ºç¼“å­˜é…ç½®</span>
buildCache {
    local {
        isEnabled = <span class="hljs-literal">true</span>
        directory = File(rootDir, <span class="hljs-string">"build-cache"</span>)
        removeUnusedEntriesAfterDays = <span class="hljs-number">30</span>
    }
    
    remote&lt;HttpBuildCache&gt; {
        url = uri(<span class="hljs-string">"https://build-cache.example.com/cache/"</span>)
        isEnabled = <span class="hljs-literal">false</span>
        isPush = <span class="hljs-literal">false</span>
    }
}

<span class="hljs-comment">// 4. æ’ä»¶ç®¡ç†ï¼ˆé«˜çº§ï¼‰</span>
plugins {
    <span class="hljs-comment">// åœ¨ settings ä¸­åº”ç”¨æ’ä»¶ï¼ˆGradle 8.0+ï¼‰</span>
    id(<span class="hljs-string">"com.gradle.enterprise"</span>) version <span class="hljs-string">"3.15"</span>
}

<span class="hljs-comment">// 5. é¡¹ç›®é…ç½®</span>

<span class="hljs-comment">// è®¾ç½®æ ¹é¡¹ç›®åç§°</span>
rootProject.name = <span class="hljs-string">"GradleY"</span>

<span class="hljs-comment">// åŒ…å«æ¨¡å—</span>
include <span class="hljs-string">':GroovyLibrary'</span>
include <span class="hljs-string">':KtsLibrary'</span>

<span class="hljs-comment">// 6. Gradle Enterprise / Build Scan</span>
gradleEnterprise {
    buildScan {
        termsOfServiceUrl = <span class="hljs-string">"https://gradle.com/terms-of-service"</span>
        termsOfServiceAgree = <span class="hljs-string">"yes"</span>
        publishAlways()
        <span class="hljs-comment">// è‡ªå®šä¹‰æ ‡ç­¾</span>
        tag(<span class="hljs-string">"CI"</span>)
        value(<span class="hljs-string">"Git Commit"</span>, getGitCommit())
    }
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getGitCommit</span><span class="hljs-params">()</span></span>: String {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> process = Runtime.getRuntime().exec(<span class="hljs-string">"git rev-parse --short HEAD"</span>)
        process.inputStream.bufferedReader().readText().trim()
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-string">"unknown"</span>
    }
}
</code></pre>
<p>â€ƒâ€ƒè¯¥æ–‡ä»¶ç”¨æ¥é…ç½®æ’ä»¶ç®¡ç†ï¼Œä¾èµ–åº“ç®¡ç†å’Œé¡¹ç›®ç›¸å…³é…ç½®ï¼Œå…·ä½“ä½œç”¨è§ä»£ç æ³¨é‡Šä¸­æ ‡æ³¨</p>
<h3 data-id="heading-4">æ ¹é¡¹ç›®build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// build.gradle.kts (root)</span>

<span class="hljs-comment">// 1. æ’ä»¶å£°æ˜</span>
plugins {
    <span class="hljs-comment">// ä½¿ç”¨ç‰ˆæœ¬ç›®å½•ï¼ˆæ¨èï¼‰</span>
    alias(libs.plugins.android.application) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.android.library) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.kotlin.android) apply <span class="hljs-literal">false</span>
    alias(libs.plugins.kotlin.jvm) apply <span class="hljs-literal">false</span>
    
    <span class="hljs-comment">// æˆ–ç›´æ¥å£°æ˜ç‰ˆæœ¬</span>
    id(<span class="hljs-string">"com.android.application"</span>) version <span class="hljs-string">"8.1.0"</span> apply <span class="hljs-literal">false</span>
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>) version <span class="hljs-string">"1.9.0"</span> apply <span class="hljs-literal">false</span>
    
    <span class="hljs-comment">// apply false çš„å«ä¹‰ï¼š</span>
    <span class="hljs-comment">// å£°æ˜ç‰ˆæœ¬ä½†ä¸åº”ç”¨åˆ°æ ¹é¡¹ç›®ï¼Œç”±å­é¡¹ç›®è‡ªå·±å†³å®šæ˜¯å¦åº”ç”¨</span>
}

<span class="hljs-comment">// ä¸ºæ‰€æœ‰é¡¹ç›®é…ç½®</span>
allprojects {
    <span class="hljs-comment">// è®¾ç½®é¡¹ç›®å±æ€§</span>
    group = <span class="hljs-string">"com.example"</span>
    version = <span class="hljs-string">"1.0.0"</span>
    
    <span class="hljs-comment">// é…ç½®ä»»åŠ¡</span>
    tasks.withType&lt;JavaCompile&gt;().configureEach {
        options.encoding = <span class="hljs-string">"UTF-8"</span>
    }
}

<span class="hljs-comment">// ä¸ºæ‰€æœ‰å­é¡¹ç›®é…ç½®</span>
subprojects {
    <span class="hljs-comment">// åº”ç”¨é€šç”¨æ’ä»¶</span>
    apply(plugin = <span class="hljs-string">"checkstyle"</span>)
    
    <span class="hljs-comment">// é…ç½®é€šç”¨ä¾èµ–</span>
    dependencies {
        <span class="hljs-comment">// æ‰€æœ‰å­é¡¹ç›®éƒ½æ·»åŠ è¿™ä¸ªä¾èµ–</span>
        <span class="hljs-string">"implementation"</span>(<span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib"</span>)
    }
   
}
</code></pre>
<p>â€ƒâ€ƒ <strong>alias(libs.plugins.android.application) apply false</strong> ï¼Œkotlin æŒºå¥½çš„ä¸€ç‚¹å°±æ˜¯å¯è¿›è¡Œå®šä¹‰è·³è½¬ï¼Œaliasåè¾¹è¿™é‡Œçš„ å®šä¹‰åœ¨ <strong>libs.versions.toml</strong>æ–‡ä»¶ä¸­ï¼Œapply falseè¡¨ç¤ºä¸åº”ç”¨åˆ°è·Ÿé¡¹ç›®ï¼Œå­é¡¹ç›®å¯ä»¥ä½¿ç”¨ã€‚</p>
<p>â€ƒâ€ƒè¿™é‡Œè¿˜éœ€è¦æ³¨æ„çš„æ˜¯<strong>allprojects</strong> æ˜¯åŒ…å«æ•´ä¸ªé¡¹ç›®çš„é…ç½®ï¼Œ <strong>subprojects</strong> ä¸åŒ…å«è·Ÿé¡¹ç›®ï¼ŒåªåŒ…å«å­é¡¹ç›®ã€‚</p>
<h3 data-id="heading-5">app build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">// 1. æ’ä»¶é…ç½®</span>
plugins {
    <span class="hljs-comment">// åº”ç”¨æ’ä»¶</span>
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.kotlin.kapt)  <span class="hljs-comment">// Kotlin æ³¨è§£å¤„ç†</span>
    
    <span class="hljs-comment">// æˆ–ç›´æ¥å£°æ˜</span>
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>)
    kotlin(<span class="hljs-string">"kapt"</span>)  <span class="hljs-comment">// ç­‰åŒäº id("org.jetbrains.kotlin.kapt")</span>
}

<span class="hljs-comment">// 2. Android åŸºæœ¬é…ç½®</span>
android {
    <span class="hljs-comment">// å‘½åç©ºé—´ï¼ˆAGP 7.0+ï¼Œæ›¿ä»£ manifest ä¸­çš„ packageï¼‰</span>
    namespace = <span class="hljs-string">"com.example.app"</span>
    <span class="hljs-comment">// ç¼–è¯‘ SDK ç‰ˆæœ¬</span>
    compileSdk = <span class="hljs-number">33</span>
    <span class="hljs-comment">// æ„å»ºå·¥å…·ç‰ˆæœ¬ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ AGP æ¨èç‰ˆæœ¬ï¼‰</span>
    buildToolsVersion = <span class="hljs-string">"33.0.1"</span>
    
    <span class="hljs-comment">// é»˜è®¤é…ç½®</span>
    defaultConfig {
        applicationId = <span class="hljs-string">"com.example.app"</span>  <span class="hljs-comment">// åº”ç”¨ ID</span>
        minSdk = <span class="hljs-number">24</span>
        targetSdk = <span class="hljs-number">33</span>
        versionCode = <span class="hljs-number">1</span>    <span class="hljs-comment">// ç‰ˆæœ¬å·</span>
        versionName = <span class="hljs-string">"1.0.0"</span>
        
        <span class="hljs-comment">// æµ‹è¯•è¿è¡Œå™¨</span>
        testInstrumentationRunner = <span class="hljs-string">"androidx.test.runner.AndroidJUnitRunner"</span>
        
        <span class="hljs-comment">// BuildConfig å­—æ®µ</span>
        buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://api.example.com\""</span>)
        buildConfigField(<span class="hljs-string">"boolean"</span>, <span class="hljs-string">"ENABLE_LOGGING"</span>, <span class="hljs-string">"true"</span>)
        buildConfigField(<span class="hljs-string">"int"</span>, <span class="hljs-string">"MAX_RETRY_COUNT"</span>, <span class="hljs-string">"3"</span>)
        
        <span class="hljs-comment">// Vector Drawable æ”¯æŒ</span>
        vectorDrawables {
            useSupportLibrary = <span class="hljs-literal">true</span>
        }
        
        ndk {
            <span class="hljs-comment">// NDK é…ç½® æ”¯æŒçš„ ABI</span>
            abiFilters += setOf(<span class="hljs-string">"armeabi-v7a"</span>, <span class="hljs-string">"arm64-v8a"</span>)
        }
        
        multiDexEnabled = <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¤š Dex æ”¯æŒ</span>
        consumerProguardFiles(<span class="hljs-string">"consumer-rules.pro"</span>)   <span class="hljs-comment">// ProGuard æ¶ˆè´¹è€…è§„åˆ™</span>
    }
    
    <span class="hljs-comment">// ç­¾åé…ç½®</span>
    signingConfigs {
        getByName(<span class="hljs-string">"debug"</span>) {        <span class="hljs-comment">// Debug ç­¾å</span>
            storeFile = file(<span class="hljs-string">"debug.keystore"</span>)
            storePassword = <span class="hljs-string">"android"</span>
            keyAlias = <span class="hljs-string">"androiddebugkey"</span>
            keyPassword = <span class="hljs-string">"android"</span>
        }

        create(<span class="hljs-string">"release"</span>) {        <span class="hljs-comment">// Release ç­¾å</span>
            <span class="hljs-comment">// ä» local.properties è¯»å–</span>
            <span class="hljs-keyword">val</span> keystoreProperties = File(rootDir, <span class="hljs-string">"keystore.properties"</span>)
            <span class="hljs-keyword">if</span> (keystoreProperties.exists()) {
                <span class="hljs-keyword">val</span> properties = java.util.Properties()
                properties.load(keystoreProperties.inputStream())
                
                storeFile = file(properties[<span class="hljs-string">"storeFile"</span>] <span class="hljs-keyword">as</span> String)
                storePassword = properties[<span class="hljs-string">"storePassword"</span>] <span class="hljs-keyword">as</span> String
                keyAlias = properties[<span class="hljs-string">"keyAlias"</span>] <span class="hljs-keyword">as</span> String
                keyPassword = properties[<span class="hljs-string">"keyPassword"</span>] <span class="hljs-keyword">as</span> String
            }
        }
    }
    
    <span class="hljs-comment">// æ„å»ºç±»å‹</span>
    buildTypes {
        <span class="hljs-comment">// Debug ç±»å‹</span>
        debug {
            applicationIdSuffix = <span class="hljs-string">".debug"</span>
            versionNameSuffix = <span class="hljs-string">"-debug"</span>
            
            isDebuggable = <span class="hljs-literal">true</span>
            isMinifyEnabled = <span class="hljs-literal">false</span>
            isShrinkResources = <span class="hljs-literal">false</span>
            
            buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://dev-api.example.com\""</span>)
            resValue(<span class="hljs-string">"string"</span>, <span class="hljs-string">"app_name"</span>, <span class="hljs-string">"MyApp Debug"</span>)
            
            signingConfig = signingConfigs.getByName(<span class="hljs-string">"debug"</span>)
        }
        
        <span class="hljs-comment">// Release ç±»å‹</span>
        release {
            isDebuggable = <span class="hljs-literal">false</span>
            isMinifyEnabled = <span class="hljs-literal">true</span>
            isShrinkResources = <span class="hljs-literal">true</span>
            
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
            
            signingConfig = signingConfigs.getByName(<span class="hljs-string">"release"</span>)
            
            buildConfigField(<span class="hljs-string">"String"</span>, <span class="hljs-string">"API_BASE_URL"</span>, <span class="hljs-string">"\"https://api.example.com\""</span>)
            resValue(<span class="hljs-string">"string"</span>, <span class="hljs-string">"app_name"</span>, <span class="hljs-string">"MyApp"</span>)
        }
    }
    
    <span class="hljs-comment">// ç¼–è¯‘é€‰é¡¹</span>
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11
        
        <span class="hljs-comment">// å¯ç”¨ desugaring</span>
        isCoreLibraryDesugaringEnabled = <span class="hljs-literal">true</span>
    }
    
    kotlinOptions {
        jvmTarget = <span class="hljs-string">"11"</span>
        
        <span class="hljs-comment">// Kotlin ç¼–è¯‘å™¨å‚æ•°</span>
        freeCompilerArgs = listOf(
            <span class="hljs-string">"-opt-in=kotlin.RequiresOptIn"</span>,
            <span class="hljs-string">"-Xjvm-default=all"</span>,
            <span class="hljs-string">"-Xcontext-receivers"</span>
        )
    }
    
    <span class="hljs-comment">// æ„å»ºç‰¹æ€§</span>
    buildFeatures {
        viewBinding = <span class="hljs-literal">true</span>         <span class="hljs-comment">// ViewBinding</span>
        dataBinding = <span class="hljs-literal">false</span>        <span class="hljs-comment">// DataBinding</span>
        compose = <span class="hljs-literal">false</span>           <span class="hljs-comment">// Compose</span>
        buildConfig = <span class="hljs-literal">true</span>        <span class="hljs-comment">// BuildConfig</span>
        aidl = <span class="hljs-literal">false</span>             <span class="hljs-comment">// AIDL</span>
        renderScript = <span class="hljs-literal">false</span>      <span class="hljs-comment">// RenderScript</span>
        shaders = <span class="hljs-literal">false</span>          <span class="hljs-comment">// Shaders</span>
    }
    
    <span class="hljs-comment">// Compose é…ç½®ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
    composeOptions {
        kotlinCompilerExtensionVersion = <span class="hljs-string">"1.5.3"</span>
    }
}

<span class="hljs-comment">// 3. ä¾èµ–é…ç½®</span>
dependencies {
    <span class="hljs-comment">// Core</span>
    implementation(libs.androidx.core.ktx)
    implementation(libs.androidx.appcompat)
    implementation(libs.material)
    
    <span class="hljs-comment">// Kotlin</span>
    implementation(libs.kotlin.stdlib)
    implementation(libs.kotlinx.coroutines.core)
    implementation(libs.kotlinx.coroutines.android)
    
    <span class="hljs-comment">// Android Components</span>
    implementation(libs.androidx.activity.ktx)
    implementation(libs.androidx.fragment.ktx)
    implementation(libs.androidx.lifecycle.runtime.ktx)
    implementation(libs.androidx.lifecycle.viewmodel.ktx)
    
    ...
}
</code></pre>
<p>â€ƒâ€ƒä¸»è¦å£°æ˜App bundleä¸­ä½¿ç”¨åˆ°çš„ä¾èµ–ï¼Œæ„å»ºä¿¡æ¯è®¾ç½®å’Œåº”ç”¨æ’ä»¶ç­‰ä¿¡æ¯</p>
<h3 data-id="heading-6">library build.gradle.kts</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">plugins {
    alias(libs.plugins.android.library)  <span class="hljs-comment">// æ³¨æ„æ˜¯ library ä¸æ˜¯ application</span>
    alias(libs.plugins.kotlin.android)
}

android {
    namespace = <span class="hljs-string">"com.example.library"</span>
    compileSdk = <span class="hljs-number">33</span>
    
    defaultConfig {
        minSdk = <span class="hljs-number">24</span>
        <span class="hljs-comment">// library æ²¡æœ‰ applicationId å’Œ versionCode/versionName</span>
        testInstrumentationRunner = <span class="hljs-string">"androidx.test.runner.AndroidJUnitRunner"</span>
        
        <span class="hljs-comment">// æ¶ˆè´¹è€… ProGuard è§„åˆ™</span>
        consumerProguardFiles(<span class="hljs-string">"consumer-rules.pro"</span>)
    }
    
    buildTypes {
        release {
            isMinifyEnabled = <span class="hljs-literal">false</span>
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
        }
    }
    
    <span class="hljs-comment">// library å¯ä»¥å‘å¸ƒä¸åŒçš„å˜ä½“</span>
    publishNonDefault = <span class="hljs-literal">true</span>
}

dependencies {
    <span class="hljs-comment">// api: é€ä¼ ä¾èµ– ç»™ä½¿ç”¨æ­¤åº“çš„æ¨¡å—</span>
    api(libs.kotlin.stdlib)
    
    <span class="hljs-comment">// implementation: ä¸é€ä¼  ä»…å½“å‰æ¨¡å—ä¾èµ–</span>
    implementation(libs.androidx.core.ktx)
    testImplementation(libs.junit)
}
</code></pre>
<h3 data-id="heading-7">gradle libs.versions.toml</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[versions]</span>
<span class="hljs-attr">agp</span> = <span class="hljs-string">"8.10.0"</span>
<span class="hljs-attr">kotlin</span> = <span class="hljs-string">"2.0.21"</span>
<span class="hljs-attr">coreKtx</span> = <span class="hljs-string">"1.17.0"</span>
<span class="hljs-attr">junit</span> = <span class="hljs-string">"4.14-SNAPSHOT"</span>
<span class="hljs-attr">junitVersion</span> = <span class="hljs-string">"1.3.0"</span>
<span class="hljs-attr">espressoCore</span> = <span class="hljs-string">"3.7.0"</span>
<span class="hljs-attr">lifecycleRuntimeKtx</span> = <span class="hljs-string">"2.9.4"</span>
<span class="hljs-attr">activityCompose</span> = <span class="hljs-string">"1.11.0"</span>
<span class="hljs-attr">composeBom</span> = <span class="hljs-string">"2024.09.00"</span>
<span class="hljs-attr">appcompat</span> = <span class="hljs-string">"1.7.1"</span>
<span class="hljs-attr">material</span> = <span class="hljs-string">"1.13.0"</span>

<span class="hljs-section">[libraries]</span>
<span class="hljs-attr">androidx-core-ktx</span> = { group = <span class="hljs-string">"androidx.core"</span>, name = <span class="hljs-string">"core-ktx"</span>, version.ref = <span class="hljs-string">"coreKtx"</span> }
<span class="hljs-attr">junit</span> = { group = <span class="hljs-string">"junit"</span>, name = <span class="hljs-string">"junit"</span>, version.ref = <span class="hljs-string">"junit"</span> }
<span class="hljs-attr">androidx-junit</span> = { group = <span class="hljs-string">"androidx.test.ext"</span>, name = <span class="hljs-string">"junit"</span>, version.ref = <span class="hljs-string">"junitVersion"</span> }
<span class="hljs-attr">androidx-espresso-core</span> = { group = <span class="hljs-string">"androidx.test.espresso"</span>, name = <span class="hljs-string">"espresso-core"</span>, version.ref = <span class="hljs-string">"espressoCore"</span> }
<span class="hljs-attr">androidx-lifecycle-runtime-ktx</span> = { group = <span class="hljs-string">"androidx.lifecycle"</span>, name = <span class="hljs-string">"lifecycle-runtime-ktx"</span>, version.ref = <span class="hljs-string">"lifecycleRuntimeKtx"</span> }
<span class="hljs-attr">androidx-activity-compose</span> = { group = <span class="hljs-string">"androidx.activity"</span>, name = <span class="hljs-string">"activity-compose"</span>, version.ref = <span class="hljs-string">"activityCompose"</span> }
<span class="hljs-attr">androidx-compose-bom</span> = { group = <span class="hljs-string">"androidx.compose"</span>, name = <span class="hljs-string">"compose-bom"</span>, version.ref = <span class="hljs-string">"composeBom"</span> }
<span class="hljs-attr">androidx-ui</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui"</span> }
<span class="hljs-attr">androidx-ui-graphics</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-graphics"</span> }
<span class="hljs-attr">androidx-ui-tooling</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-tooling"</span> }
<span class="hljs-attr">androidx-ui-tooling-preview</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-tooling-preview"</span> }
<span class="hljs-attr">androidx-ui-test-manifest</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-test-manifest"</span> }
<span class="hljs-attr">androidx-ui-test-junit4</span> = { group = <span class="hljs-string">"androidx.compose.ui"</span>, name = <span class="hljs-string">"ui-test-junit4"</span> }
<span class="hljs-attr">androidx-material3</span> = { group = <span class="hljs-string">"androidx.compose.material3"</span>, name = <span class="hljs-string">"material3"</span> }
<span class="hljs-attr">androidx-appcompat</span> = { group = <span class="hljs-string">"androidx.appcompat"</span>, name = <span class="hljs-string">"appcompat"</span>, version.ref = <span class="hljs-string">"appcompat"</span> }
<span class="hljs-attr">material</span> = { group = <span class="hljs-string">"com.google.android.material"</span>, name = <span class="hljs-string">"material"</span>, version.ref = <span class="hljs-string">"material"</span> }

<span class="hljs-section">[plugins]</span>
<span class="hljs-attr">android-application</span> = { id = <span class="hljs-string">"com.android.application"</span>, version.ref = <span class="hljs-string">"agp"</span> }
<span class="hljs-attr">kotlin-android</span> = { id = <span class="hljs-string">"org.jetbrains.kotlin.android"</span>, version.ref = <span class="hljs-string">"kotlin"</span> }
<span class="hljs-attr">kotlin-compose</span> = { id = <span class="hljs-string">"org.jetbrains.kotlin.plugin.compose"</span>, version.ref = <span class="hljs-string">"kotlin"</span> }
<span class="hljs-attr">android-library</span> = { id = <span class="hljs-string">"com.android.library"</span>, version.ref = <span class="hljs-string">"agp"</span> }
</code></pre>
<p>â€ƒâ€ƒä¼ ç»Ÿçš„ä¾èµ–æ–¹å¼ä½¿ç”¨ å­—ç¬¦ä¸²ï¼Œå®¹æ˜“æ‹¼å†™é”™è¯¯ã€‚ktsçš„æ–°ç‰ˆæœ¬ä¾èµ–æ–¹å¼IDE è‡ªåŠ¨è¡¥å…¨ï¼ŒCmd+ç‚¹å‡»å¯è·³è½¬ï¼Œå¹¶ä¸”ç‰ˆæœ¬ç®¡ç†æ›´åŠ é›†ä¸­</p>
<h3 data-id="heading-8">gradle.properties</h3>
<pre><code class="hljs language-properties" lang="properties"># -Xmx: jvmæœ€å¤§å †å†…å­˜ï¼ˆæ ¹æ®æœºå™¨é…ç½®è°ƒæ•´ï¼Œ8GB æœºå™¨å»ºè®® 4096mï¼Œ16GB å»ºè®® 8192mï¼‰
# -XX:MaxMetaspaceSize: å…ƒç©ºé—´æœ€å¤§å¤§å°
# -XX:+HeapDumpOnOutOfMemoryError: OOM æ—¶ç”Ÿæˆå †è½¬å‚¨
# -Dfile.encoding: æ–‡ä»¶ç¼–ç 
org.gradle.jvmargs=-Xmx4096m -XX:MaxMetaspaceSize=1024m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8

# å¹¶è¡Œç¼–è¯‘ï¼ˆåˆ©ç”¨å¤šæ ¸ CPUï¼‰
org.gradle.parallel=true
# é…ç½®ç¼“å­˜ï¼ˆå®éªŒæ€§åŠŸèƒ½ï¼Œæ˜¾è‘—æå‡é€Ÿåº¦ï¼‰ Gradle 8.0+ ç¨³å®šï¼Œå¼ºçƒˆæ¨èå¼€å¯
org.gradle.configuration-cache=true
# æ„å»ºç¼“å­˜ï¼ˆå¤ç”¨ä¹‹å‰çš„æ„å»ºç»“æœï¼‰
org.gradle.caching=true
# æŒ‰éœ€é…ç½®  å¤§å‹å¤šæ¨¡å—é¡¹ç›®å»ºè®®å¼€å¯
org.gradle.configureondemand=true
# åå°å®ˆæŠ¤è¿›ç¨‹ï¼Œé¿å…æ¯æ¬¡æ„å»ºéƒ½å¯åŠ¨ JVM
org.gradle.daemon=true
# æ–‡ä»¶ç›‘å¬ï¼ˆå¢é‡æ„å»ºçš„åŸºç¡€ï¼‰
org.gradle.vfs.watch=true
# Kotlin Daemon JVM å‚æ•°
kotlin.daemon.jvmargs=-Xmx2048m
# å¢é‡ç¼–è¯‘
kotlin.incremental=true
# Kotlin ç¼–è¯‘ç¼“å­˜
kotlin.caching.enabled=true
# Kotlin ç¼–è¯‘å™¨æ‰§è¡Œç­–ç•¥
# in-process: åœ¨ Gradle Daemon è¿›ç¨‹ä¸­ç¼–è¯‘ï¼ˆæ¨èï¼‰
# daemon: ä½¿ç”¨å•ç‹¬çš„ Kotlin Daemonï¼ˆé»˜è®¤ï¼‰
# out-of-process: æ¯æ¬¡æ–°å»ºè¿›ç¨‹
kotlin.compiler.execution.strategy=in-process

# å¹¶è¡Œç¼–è¯‘ Kotlin æ¨¡å—
kotlin.parallel.tasks.in.project=true
# ä½¿ç”¨ AndroidX
android.useAndroidX=true
# kotlinä»£ç æ ·å¼
kotlin.code.style=official
# è‡ªåŠ¨è¿ç§»ç¬¬ä¸‰æ–¹åº“åˆ° AndroidXï¼ˆé€šå¸¸å…³é—­ï¼‰
android.enableJetifier=false
# ä½¿æ¯ä¸ªåº“çš„ R ç±»èƒ½å¤Ÿå‘½åç©ºé—´ï¼Œè®©R ç±»åªåŒ…å«åº“æœ¬èº«å£°æ˜çš„èµ„æºï¼Œä¸åŒ…å«åº“ä¾èµ–èµ„æºï¼Œç¼©å°è¯¥åº“ R ç±»çš„å¤§å°
android.nonTransitiveRClass=true
# ä½¿ç”¨æ–°çš„èµ„æºå¤„ç†å™¨ï¼ˆAAPT2ï¼‰
android.enableResourceOptimizations=true
# ç¦ç”¨ PNG ä¼˜åŒ–ï¼ˆDebug æ—¶å¯ç¦ç”¨ï¼‰
# android.enablePngCrunchInDebugVariant=false
# å¯ç”¨ D8 desugaring
android.enableD8.desugaring=true
# å¯ç”¨ R8
android.enableR8=true
# æ„å»ºç¼“å­˜
android.enableBuildCache=true

# ç‰ˆæœ¬å·ï¼ˆå¯è¢«è„šæœ¬è¯»å–ï¼‰
VERSION_NAME=1.0.0
VERSION_CODE=1

# ç­¾åé…ç½®ï¼ˆä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œä¸æäº¤åˆ°ä»£ç ä»“åº“ï¼‰
# KEYSTORE_FILE=/path/to/keystore
# KEYSTORE_PASSWORD=password
# KEY_ALIAS=alias
# KEY_PASSWORD=password

# API é…ç½®
# API_BASE_URL=https://api.example.com

# Maven ä»“åº“ç”¨æˆ·åå¯†ç ï¼ˆä¸è¦æäº¤åˆ°ä»“åº“ï¼‰
# MAVEN_USERNAME=username
# MAVEN_PASSWORD=password
</code></pre>
<h3 data-id="heading-9">local.properties</h3>
<pre><code class="hljs language-properties" lang="properties"># Android SDK è·¯å¾„ï¼ˆAndroid Studio è‡ªåŠ¨ç”Ÿæˆï¼‰
sdk.dir=/Users/username/Library/Android/sdk
# NDK è·¯å¾„
ndk.dir=/Users/username/Library/Android/sdk/ndk/25.1.8937393

# ç­¾åé…ç½®ï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
KEYSTORE_FILE=../release.keystore
KEYSTORE_PASSWORD=mypassword
KEY_ALIAS=mykey
KEY_PASSWORD=mypassword

# API Keysï¼ˆæ•æ„Ÿä¿¡æ¯ï¼‰
GOOGLE_MAPS_API_KEY=xxx
</code></pre>
<p>â€ƒâ€ƒ è®¾ç½®sdkå’Œndkæœ¬åœ°åœ°å€ï¼Œé…ç½®æ‰“åŒ…ç­¾åé…ç½®ç­‰ä¿¡æ¯</p>
<h2 data-id="heading-10">Gradleçš„Groovy &amp; KotlinåŒºåˆ«</h2>
<h3 data-id="heading-11">Gradle DSL çš„ç‰¹ç‚¹</h3>
<p>å¯è¯»æ€§æ›´é«˜ï¼Œæ›´åŠ ç®€æ´ ï¼ˆæ¨¡ç‰ˆä»£ç å°‘ä¸€äº›ï¼‰</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Groovy å’Œ kotlinéƒ½è¦ä½¿ç”¨åˆ°çš„ DSLæ ¼å¼ï¼Œä¸åŒäºjavaç­‰ä»£ç æ–¹å¼</span>
android {
    compileSdk = <span class="hljs-number">33</span>
    
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ Kotlin çš„æ¡ä»¶åˆ¤æ–­</span>
    if (project.hasProperty("useNewApi")) {
        defaultConfig {
            minSdk = <span class="hljs-number">24</span>
        }
    }
    
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ Kotlin çš„å¾ªç¯</span>
    <span class="hljs-built_in">listOf</span>("debug", "release")<span class="hljs-selector-class">.forEach</span> { buildType -&gt;
        <span class="hljs-built_in">println</span>("Processing $buildType")
    }
}

<span class="hljs-comment">// å¦‚æœä¸ä½¿ç”¨DSLçš„æ–¹å¼ å¯èƒ½ä¼šå†™æˆè¿™æ · ï¼Œç¨å¾®å¤æ‚äº†ç‚¹</span>
val android = project<span class="hljs-selector-class">.extensions</span><span class="hljs-selector-class">.getByType</span>(AndroidExtension::class.java)
android<span class="hljs-selector-class">.setCompileSdk</span>(<span class="hljs-number">33</span>)

val config = <span class="hljs-built_in">DefaultConfig</span>()
config<span class="hljs-selector-class">.setMinSdk</span>(<span class="hljs-number">24</span>)
android<span class="hljs-selector-class">.setDefaultConfig</span>(config)
</code></pre>
<p>â€ƒâ€ƒ Gradle ä¸»è¦ä½¿ç”¨çš„<strong>å†…éƒ¨DSL</strong> ï¼ˆç®€å•è¯´ä¸‹å¤–éƒ¨DSLï¼šéœ€è¦ä¸“é—¨çš„ä»£ç æ³¨è§£å™¨æ¯”å¦‚ Html å’Œ SQLï¼‰ ï¼Œå¯ä»¥ä½¿ç”¨ Kotlinçš„ä¸€äº›è¯­è¨€ç‰¹æ€§ï¼Œè¿™é‡Œè¿˜æ˜¯è¦æåˆ°ä¸€ä¸‹ Groovyçš„é—­åŒ…ï¼Œ</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// Gradle çš„ android {} å—å®é™…ä¸Šæ˜¯ï¼šè°ƒç”¨ android() æ–¹æ³•, ä¼ å…¥ä¸€ä¸ªé—­åŒ…ä½œä¸ºå‚æ•°</span>
android {  <span class="hljs-comment">// é—­åŒ…</span>
    compileSdk <span class="hljs-number">33</span>
}
<span class="hljs-built_in">android</span>({ 
    compileSdk <span class="hljs-number">33</span> 
})
<span class="hljs-comment">// å®Œæ•´å½¢æ€</span>
<span class="hljs-built_in">android</span>(new Closure() {
    void <span class="hljs-built_in">call</span>() {
        compileSdk <span class="hljs-number">33</span>
    }
})
å¤§æ¦‚å¾—å®ç°é€»è¾‘
class AndroidExtension {  <span class="hljs-comment">// å®šä¹‰ Android æ‰©å±•ç±»</span>
    int compileSdk
    
    void <span class="hljs-built_in">defaultConfig</span>(Closure closure) {
        def config = new <span class="hljs-built_in">DefaultConfig</span>()
        closure<span class="hljs-selector-class">.delegate</span> = config  <span class="hljs-comment">// è®¾ç½®é—­åŒ…çš„å§”æ‰˜</span>
        <span class="hljs-built_in">closure</span>()                  <span class="hljs-comment">// é—­åŒ…</span>
    }
}

<span class="hljs-comment">// å®šä¹‰é…ç½®æ–¹æ³•ï¼Œæ¥æ”¶é—­åŒ…ä½œä¸ºå‚æ•°</span>
def <span class="hljs-built_in">android</span>(Closure closure) {
    def ext = new <span class="hljs-built_in">AndroidExtension</span>()
    closure<span class="hljs-selector-class">.delegate</span> = ext     <span class="hljs-comment">// è®¾ç½®å§”æ‰˜</span>
    <span class="hljs-built_in">closure</span>()                  <span class="hljs-comment">// é—­åŒ…</span>
    return ext
}

<span class="hljs-comment">// ä½¿ç”¨ï¼ˆçœ‹èµ·æ¥åƒ DSLï¼‰</span>
android {
    compileSdk = <span class="hljs-number">33</span>      <span class="hljs-comment">// å®é™…æ˜¯åœ¨ AndroidExtension ä¸Šä¸‹æ–‡ä¸­</span>
    defaultConfig {
        minSdk = <span class="hljs-number">24</span>      <span class="hljs-comment">// å®é™…æ˜¯åœ¨ DefaultConfig ä¸Šä¸‹æ–‡ä¸­</span>
    }
}
</code></pre>
<p>â€ƒâ€ƒKotlinä¸­ä½¿ç”¨çš„åˆ™æ˜¯ Lambdaæ–¹å¼ï¼ˆå¦‚æœå‚æ•°ä¸ºæœ€åä¸€ä¸ªï¼Œåˆ™å¯ä»¥å»æ‰æ‹¬å·ï¼‰ï¼Œå¹¶ä¸”Kotlinæ˜¯ä½¿ç”¨ = å·æ¥èµ‹å€¼çš„ï¼Œç›¸è¾ƒäº Groovy ï¼ŒKotlinæ˜¯é™æ€ç±»å‹è¯­è¨€ï¼Œéƒ¨åˆ†ç±»å‹ä¸å¯¹åœ¨ç¼–è¯‘æœŸå°±ä¼šæç¤ºã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">android {  <span class="hljs-comment">// Lambda è¡¨è¾¾å¼</span>
    compileSdk = <span class="hljs-number">33</span>
    defaultConfig {  <span class="hljs-comment">// åµŒå¥— Lambda</span>
        minSdk = <span class="hljs-number">24</span>
    }
}

<span class="hljs-comment">// android { } å¤§æ¦‚å®ç°é€»è¾‘ï¼Œå¯ä»¥ç†è§£ä¸º ApplicationExtension.compileSdk = 33</span>
<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> org.gradle.api.Project.<span class="hljs-title">android</span><span class="hljs-params">(configure: <span class="hljs-type">org</span>.<span class="hljs-type">gradle</span>.<span class="hljs-type">api</span>.<span class="hljs-type">Action</span>&lt;<span class="hljs-type">com</span>.<span class="hljs-type">android</span>.<span class="hljs-type">build</span>.<span class="hljs-type">gradle</span>.<span class="hljs-type">LibraryExtension</span>&gt;)</span></span>: kotlin.<span class="hljs-built_in">Unit</span> { <span class="hljs-comment">/* compiled code */</span> }

</code></pre>
<p>â€ƒâ€ƒçœ‹Gradleæºç ï¼Œè¿™é‡Œæ˜¯å§”æ‰˜ç»™äº† LibraryExtension ï¼Œæ‰€ä»¥compileSdk å­—æ®µå°±æ˜¯ LibraryExtension ä¸­çš„ä¸€ä¸ªå±æ€§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/563c63c3c2e44097a5937a73f1aa0b0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO5bed:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765360651&amp;x-signature=XgyPZTUwXbwqaZE%2BQjY4KSWCLpA%3D" alt="image.png" loading="lazy"/></p>
<p>â€ƒâ€ƒæ‰€ä»¥ æˆ‘ä»¬å¯ä»¥åœ¨Android å¤§æ‹¬å·é‡Œè¾¹ä½¿ç”¨compileSdkç­‰å­—æ®µçš„èµ‹å€¼</p>
<h3 data-id="heading-12">Groovy vs Kotlin è¯­æ³•å¯¹æ¯”</h3>
<ul>
<li>å­—ç¬¦ä¸²</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
def str1 = 'Hello world'      // æ™®é€šå­—ç¬¦ä¸² 
def str3 = "Hello $name"       // å­—ç¬¦ä¸²æ’å€¼  å¯ä»¥å•å¼•å·ï¼Œä¹Ÿå¯ä»¥åŒå¼•å·
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
<span class="hljs-keyword">val</span> str1 = <span class="hljs-string">"only double quote"</span>  <span class="hljs-comment">// åªèƒ½ç”¨åŒå¼•å·</span>
<span class="hljs-keyword">val</span> str2 = <span class="hljs-string">"Hello <span class="hljs-variable">$name</span>"</span>        <span class="hljs-comment">// å­—ç¬¦ä¸²æ’å€¼</span>
</code></pre>
<ul>
<li>å˜é‡</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
def name = "ymc"               // åŠ¨æ€ç±»å‹
String name = "ymc"            // æ˜¾å¼ç±»å‹
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
<span class="hljs-keyword">var</span> name = <span class="hljs-string">"ymc"</span>               <span class="hljs-comment">// å¯å˜</span>
<span class="hljs-keyword">val</span> name = <span class="hljs-string">"ymc"</span>               <span class="hljs-comment">// ä¸å¯å˜ï¼ˆæ¨èï¼‰</span>
</code></pre>
<ul>
<li>æ–¹æ³•è°ƒç”¨</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
println("Hello")
println "Hello"                 // å¯ä»¥çœç•¥æ‹¬å·

add(1, 2)
add 1, 2                        // å¯ä»¥çœç•¥æ‹¬å·å’Œé€—å·

implementation 'androidx.core:core-ktx:1.9.0'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
println(<span class="hljs-string">"Hello"</span>)                <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>

add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)                       <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>

implementation(<span class="hljs-string">"androidx.core:core-ktx:1.9.0"</span>)  <span class="hljs-comment">// å¿…é¡»æœ‰æ‹¬å·</span>
</code></pre>
<ul>
<li>plugins</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
}

// æˆ–
apply plugin: 'com.android.application'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
plugins {
    id(<span class="hljs-string">"com.android.application"</span>)
    id(<span class="hljs-string">"org.jetbrains.kotlin.android"</span>)
    kotlin(<span class="hljs-string">"kapt"</span>)  <span class="hljs-comment">// ç­‰ä»·äº id("org.jetbrains.kotlin.kapt")</span>
}

<span class="hljs-comment">// æˆ–</span>
apply(plugin = <span class="hljs-string">"com.android.application"</span>)
</code></pre>
<ul>
<li>dependencies å—</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
dependencies {
    implementation 'androidx.core:core-ktx:1.9.0'
    implementation group: 'com.google.code.gson', name: 'gson', version: '2.10.1'
    
    debugImplementation 'com.squareup.leakcanary:leakcanary-android:2.12'
    
    testImplementation 'junit:junit:4.13.2'
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
dependencies {
    implementation(<span class="hljs-string">"androidx.core:core-ktx:1.9.0"</span>)
    implementation(group = <span class="hljs-string">"com.google.code.gson"</span>, name = <span class="hljs-string">"gson"</span>, version = <span class="hljs-string">"2.10.1"</span>)
    
    debugImplementation(<span class="hljs-string">"com.squareup.leakcanary:leakcanary-android:2.12"</span>)
    
    testImplementation(<span class="hljs-string">"junit:junit:4.13.2"</span>)
}
</code></pre>
<ul>
<li>android å—</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
android {
    namespace 'com.example.app'
    compileSdk 33
    
    defaultConfig {
        applicationId "com.example.app"
        minSdk 24
        targetSdk 33
        versionCode 1
        versionName "1.0"
    }
    
    buildTypes {
        debug {
            applicationIdSuffix '.debug'
            debuggable true
        }
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
android {
    namespace = <span class="hljs-string">"com.example.app"</span>
    compileSdk = <span class="hljs-number">33</span>
    
    defaultConfig {
        applicationId = <span class="hljs-string">"com.example.app"</span>
        minSdk = <span class="hljs-number">24</span>
        targetSdk = <span class="hljs-number">33</span>
        versionCode = <span class="hljs-number">1</span>
        versionName = <span class="hljs-string">"1.0"</span>
    }
    
    buildTypes {
        debug {
            applicationIdSuffix = <span class="hljs-string">".debug"</span>
            isDebuggable = <span class="hljs-literal">true</span>
        }
        release {
            isMinifyEnabled = <span class="hljs-literal">true</span>
            proguardFiles(
                getDefaultProguardFile(<span class="hljs-string">"proguard-android-optimize.txt"</span>),
                <span class="hljs-string">"proguard-rules.pro"</span>
            )
        }
    }
}
</code></pre>
<p>â€ƒâ€ƒå‰è¾¹ä¸¤æ®µä»£ç ï¼Œæ¯”è¾ƒæ˜æ˜¾çš„ä¸åŒå°±æ˜¯ booleanèµ‹å€¼ï¼Œkotlin æ˜¯iså¼€å¤´ï¼Œç­‰å·èµ‹å€¼</p>
<ul>
<li>é›†åˆæ“ä½œ</li>
</ul>
<pre><code class="hljs language-groovy" lang="groovy">// ========== Groovy ==========
ndk {
    abiFilters 'armeabi-v7a', 'arm64-v8a'
}

exclude '**/test/**', '**/*.tmp'
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ========== Kotlin DSL ==========</span>
ndk {
    abiFilters += setOf(<span class="hljs-string">"armeabi-v7a"</span>, <span class="hljs-string">"arm64-v8a"</span>)
}

exclude(<span class="hljs-string">"**/test/**"</span>, <span class="hljs-string">"**/*.tmp"</span>)
</code></pre>
<h2 data-id="heading-13">æœ€å</h2>
<p>â€ƒâ€ƒè®°å¾—22å¹´æ–°ç‰ˆæœ¬Aså°±å·²ç»æ¨èä½¿ç”¨kotlinæ¥ç®¡ç† Gradle ï¼Œå­¦å®Œåæ„Ÿè§‰ç›¸æ¯”äºGroovyï¼Œkotlinç¼–è¯‘æœŸé—´æ›´åŠ å®‰å…¨ï¼Œè·³è½¬å’Œä»£ç æç¤º ï¼Œæ›´ç§‘å­¦çš„ç®¡ç†ç±»å’Œç‰ˆæœ¬æ§åˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ LangGraph ä¿å§†çº§æ•™ç¨‹ï¼šä»é›¶æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª AI Agent å·¥ä½œæµ]]></title>    <link>https://juejin.cn/post/7579264485258854415</link>    <guid>https://juejin.cn/post/7579264485258854415</guid>    <pubDate>2025-12-03T08:31:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579264485258854415" data-draft-id="7579264485258838031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ LangGraph ä¿å§†çº§æ•™ç¨‹ï¼šä»é›¶æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª AI Agent å·¥ä½œæµ"/> <meta itemprop="keywords" content="LangChain,Node.js,Agent"/> <meta itemprop="datePublished" content="2025-12-03T08:31:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dr_å“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2208293602984286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ LangGraph ä¿å§†çº§æ•™ç¨‹ï¼šä»é›¶æ„å»ºä½ çš„ç¬¬ä¸€ä¸ª AI Agent å·¥ä½œæµ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2208293602984286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dr_å“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:31:40.000Z" title="Wed Dec 03 2025 08:31:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ”¥ æœ¬æ–‡ 1.2w å­—ï¼Œä»å…¥é—¨åˆ°å®æˆ˜ï¼Œå¸¦ä½ å½»åº•ææ‡‚ LangGraphï¼é€‚åˆæœ‰ä¸€å®š LangChain åŸºç¡€çš„å¼€å‘è€…ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ğŸ“Œ å‰è¨€</h2>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼Ÿ</p>
<ul>
<li>ç”¨ LangChain çš„ <code>pipe()</code> å†™å¤æ‚æµç¨‹æ—¶ï¼Œä»£ç å˜å¾—ä¸€å›¢ä¹±éº»ï¼Ÿ</li>
<li>æƒ³è®© AI Agent è‡ªåŠ¨å¾ªç¯è°ƒç”¨å·¥å…·ï¼Œå´ä¸çŸ¥é“æ€ä¹ˆå®ç°ï¼Ÿ</li>
<li>éœ€è¦æ ¹æ®æ¡ä»¶èµ°ä¸åŒåˆ†æ”¯ï¼Œå´å‘ç° Chain ä¸æ”¯æŒï¼Ÿ</li>
</ul>
<p>å¦‚æœä½ æœ‰ä»¥ä¸Šå›°æ‰°ï¼Œ<strong>LangGraph</strong> å°±æ˜¯ä½ çš„ç­”æ¡ˆï¼</p>
<p>LangGraph æ˜¯ LangChain å›¢é˜Ÿæ¨å‡ºçš„<strong>å·¥ä½œæµç¼–æ’æ¡†æ¶</strong>ï¼Œä¸“é—¨ç”¨äºæ„å»ºå¤æ‚çš„ AI Agentã€‚å®ƒç”¨<strong>å›¾ï¼ˆGraphï¼‰</strong> çš„æ–¹å¼æ¥å®šä¹‰å·¥ä½œæµï¼ŒåŸç”Ÿæ”¯æŒ<strong>åˆ†æ”¯ã€å¾ªç¯ã€çŠ¶æ€ç®¡ç†</strong>ï¼Œæ˜¯æ„å»ºç”Ÿäº§çº§ AI åº”ç”¨çš„åˆ©å™¨ã€‚</p>
<p><strong>é˜…è¯»æœ¬æ–‡ä½ å°†æ”¶è·ï¼š</strong></p>
<ul>
<li>âœ… ç†è§£ LangGraph çš„æ ¸å¿ƒæ¦‚å¿µï¼ˆStateGraphã€Annotationã€Nodeã€Edgeï¼‰</li>
<li>âœ… æŒæ¡çŠ¶æ€ç®¡ç†å’Œæµç¨‹æ§åˆ¶</li>
<li>âœ… å­¦ä¼šå®ç°æ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯æµç¨‹</li>
<li>âœ… èƒ½å¤Ÿç‹¬ç«‹æ„å»º ReAct Agent</li>
</ul>
<hr/>
<h2 data-id="heading-1">ğŸ“š ç›®å½•</h2>
<ol>
<li><a href="#1-%E4%BB%80%E4%B9%88%E6%98%AF-langgraph" title="#1-%E4%BB%80%E4%B9%88%E6%98%AF-langgraph">ä»€ä¹ˆæ˜¯ LangGraph</a></li>
<li><a href="#2-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E9%80%9F%E8%A7%88" title="#2-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E9%80%9F%E8%A7%88">æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</a></li>
<li><a href="#3-stategraph-%E7%8A%B6%E6%80%81%E5%9B%BE" title="#3-stategraph-%E7%8A%B6%E6%80%81%E5%9B%BE">StateGraph çŠ¶æ€å›¾</a></li>
<li><a href="#4-annotation-%E7%8A%B6%E6%80%81%E5%AE%9A%E4%B9%89" title="#4-annotation-%E7%8A%B6%E6%80%81%E5%AE%9A%E4%B9%89">Annotation çŠ¶æ€å®šä¹‰</a></li>
<li><a href="#5-node-%E8%8A%82%E7%82%B9%E8%AF%A6%E8%A7%A3" title="#5-node-%E8%8A%82%E7%82%B9%E8%AF%A6%E8%A7%A3">Node èŠ‚ç‚¹è¯¦è§£</a></li>
<li><a href="#6-edge-%E8%BE%B9%E4%B8%8E%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6" title="#6-edge-%E8%BE%B9%E4%B8%8E%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">Edge è¾¹ä¸æµç¨‹æ§åˆ¶</a></li>
<li><a href="#7-%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF%E5%AE%9E%E6%88%98" title="#7-%E6%9D%A1%E4%BB%B6%E5%88%86%E6%94%AF%E5%AE%9E%E6%88%98">æ¡ä»¶åˆ†æ”¯å®æˆ˜</a></li>
<li><a href="#8-%E5%BE%AA%E7%8E%AF%E6%B5%81%E7%A8%8B%E5%AE%9E%E7%8E%B0" title="#8-%E5%BE%AA%E7%8E%AF%E6%B5%81%E7%A8%8B%E5%AE%9E%E7%8E%B0">å¾ªç¯æµç¨‹å®ç°</a></li>
<li><a href="#9-react-agent-%E5%AE%8C%E6%95%B4%E5%AE%9E%E6%88%98" title="#9-react-agent-%E5%AE%8C%E6%95%B4%E5%AE%9E%E6%88%98">ReAct Agent å®Œæ•´å®æˆ˜</a></li>
<li><a href="#10-%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA" title="#10-%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA">æµå¼è¾“å‡º</a></li>
<li><a href="#11-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%8E%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97" title="#11-%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%E4%B8%8E%E8%B8%A9%E5%9D%91%E6%8C%87%E5%8D%97">æœ€ä½³å®è·µä¸è¸©å‘æŒ‡å—</a></li>
<li><a href="#12-%E9%99%84%E5%BD%95llm-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE" title="#12-%E9%99%84%E5%BD%95llm-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE">é™„å½•ï¼šLLM å‚æ•°é…ç½®</a></li>
</ol>
<hr/>
<h2 data-id="heading-2">1. ä»€ä¹ˆæ˜¯ LangGraph</h2>
<h3 data-id="heading-3">1.1 ä¸€å¥è¯å®šä¹‰</h3>
<p><strong>LangGraph = ç”¨ã€Œç”»æµç¨‹å›¾ã€çš„æ–¹å¼æ„å»º AI åº”ç”¨</strong></p>
<p>å®ƒå°†å·¥ä½œæµå»ºæ¨¡ä¸ºå›¾ï¼ˆGraphï¼‰ï¼š</p>
<ul>
<li><strong>èŠ‚ç‚¹ï¼ˆNodesï¼‰</strong> = æ‰§è¡Œæ­¥éª¤ï¼ˆå‡½æ•°ï¼‰</li>
<li><strong>è¾¹ï¼ˆEdgesï¼‰</strong> = æ­¥éª¤ä¹‹é—´çš„è¿çº¿</li>
<li><strong>çŠ¶æ€ï¼ˆStateï¼‰</strong> = åœ¨èŠ‚ç‚¹é—´ä¼ é€’çš„æ•°æ®</li>
</ul>
<h3 data-id="heading-4">1.2 ä¸ºä»€ä¹ˆéœ€è¦ LangGraphï¼Ÿ</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>LangChain (pipe)</th><th>LangGraph</th></tr></thead><tbody><tr><td>ç®€å•çº¿æ€§æµç¨‹</td><td>âœ… è¶³å¤Ÿ</td><td>å¯ä»¥ä½†æ²¡å¿…è¦</td></tr><tr><td>æ¡ä»¶åˆ†æ”¯</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… åŸç”Ÿæ”¯æŒ</td></tr><tr><td>å¾ªç¯/è¿­ä»£</td><td>âŒ éš¾å®ç°</td><td>âœ… åŸç”Ÿæ”¯æŒ</td></tr><tr><td>å¤æ‚ Agent</td><td>âŒ éœ€æ‰‹å†™å¾ªç¯</td><td>âœ… å£°æ˜å¼å®šä¹‰</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>âŒ æ‰‹åŠ¨ä¼ é€’</td><td>âœ… è‡ªåŠ¨ç®¡ç†</td></tr><tr><td>å¯è§†åŒ–è°ƒè¯•</td><td>âŒ å›°éš¾</td><td>âœ… LangGraph Studio</td></tr></tbody></table>
<h3 data-id="heading-5">1.3 å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash">npm install @langchain/langgraph
</code></pre>
<hr/>
<h2 data-id="heading-6">2. æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</h2>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œå…ˆå»ºç«‹å…¨å±€è®¤çŸ¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LangGraph æ ¸å¿ƒæ¦‚å¿µ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚    StateGraph (çŠ¶æ€å›¾å®¹å™¨)                                â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚                                               â”‚    â”‚
â”‚    â”‚   <span class="hljs-selector-attr">[START]</span> â”€â”€â†’ <span class="hljs-selector-attr">[Node1]</span> â”€â”€â†’ <span class="hljs-selector-attr">[Node2]</span> â”€â”€â†’ <span class="hljs-selector-attr">[END]</span>  â”‚    â”‚
â”‚    â”‚                 â”‚           â”‚                â”‚    â”‚
â”‚    â”‚                 â–¼           â–¼                â”‚    â”‚
â”‚    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚    â”‚
â”‚    â”‚            â”‚  State (å…±äº«çŠ¶æ€)    â”‚          â”‚    â”‚
â”‚    â”‚            â”‚  { <span class="hljs-selector-tag">input</span>, output }  â”‚          â”‚    â”‚
â”‚    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>













































<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>StateGraph</strong></td><td>çŠ¶æ€å›¾å®¹å™¨</td><td>æµç¨‹å›¾ç”»å¸ƒ</td></tr><tr><td><strong>State</strong></td><td>å·¥ä½œæµæ•°æ®</td><td>å…¨å±€å˜é‡</td></tr><tr><td><strong>Annotation</strong></td><td>çŠ¶æ€ç»“æ„å®šä¹‰</td><td>TypeScript æ¥å£</td></tr><tr><td><strong>Node</strong></td><td>æ‰§è¡Œå•å…ƒ</td><td>å‡½æ•°</td></tr><tr><td><strong>Edge</strong></td><td>è¿æ¥å…³ç³»</td><td>ç®­å¤´</td></tr><tr><td><strong>START</strong></td><td>èµ·å§‹ç‚¹</td><td>main()</td></tr><tr><td><strong>END</strong></td><td>ç»“æŸç‚¹</td><td>return</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-7">3. StateGraph çŠ¶æ€å›¾</h2>
<h3 data-id="heading-8">3.1 åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">StateGraph</span>, <span class="hljs-title class_">Annotation</span>, <span class="hljs-variable constant_">START</span>, <span class="hljs-variable constant_">END</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;

<span class="hljs-comment">// 1ï¸âƒ£ å®šä¹‰çŠ¶æ€ç»“æ„</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-title class_">Annotation</span>({ <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">_, x</span>) =&gt;</span> x, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">""</span> }),
  <span class="hljs-attr">output</span>: <span class="hljs-title class_">Annotation</span>({ <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">_, x</span>) =&gt;</span> x, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">""</span> }),
});

<span class="hljs-comment">// 2ï¸âƒ£ åˆ›å»ºçŠ¶æ€å›¾</span>
<span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>(<span class="hljs-title class_">MyState</span>)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"step1"</span>, step1Function) <span class="hljs-comment">// æ·»åŠ èŠ‚ç‚¹</span>
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"step2"</span>, step2Function)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"step1"</span>) <span class="hljs-comment">// æ·»åŠ è¾¹</span>
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"step1"</span>, <span class="hljs-string">"step2"</span>)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"step2"</span>, <span class="hljs-variable constant_">END</span>);

<span class="hljs-comment">// 3ï¸âƒ£ ç¼–è¯‘</span>
<span class="hljs-keyword">const</span> app = graph.<span class="hljs-title function_">compile</span>();

<span class="hljs-comment">// 4ï¸âƒ£ æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">"hello"</span> });
</code></pre>
<h3 data-id="heading-9">3.2 æ ¸å¿ƒ API</h3>








































<table><thead><tr><th>æ–¹æ³•</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>addNode(name, fn)</code></td><td>æ·»åŠ èŠ‚ç‚¹</td><td><code>graph.addNode("process", processFn)</code></td></tr><tr><td><code>addEdge(from, to)</code></td><td>æ·»åŠ æ— æ¡ä»¶è¾¹</td><td><code>graph.addEdge("A", "B")</code></td></tr><tr><td><code>addConditionalEdges()</code></td><td>æ·»åŠ æ¡ä»¶è¾¹</td><td>è§ä¸‹æ–‡è¯¦è§£</td></tr><tr><td><code>compile()</code></td><td>ç¼–è¯‘å›¾</td><td><code>const app = graph.compile()</code></td></tr><tr><td><code>invoke(state)</code></td><td>åŒæ­¥æ‰§è¡Œ</td><td><code>await app.invoke({...})</code></td></tr><tr><td><code>stream(state)</code></td><td>æµå¼æ‰§è¡Œ</td><td><code>for await (const e of app.stream({...}))</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">4. Annotation çŠ¶æ€å®šä¹‰</h2>
<h3 data-id="heading-11">4.1 ä»€ä¹ˆæ˜¯ Annotationï¼Ÿ</h3>
<p><strong>Annotation = å‘Šè¯‰ LangGraphã€ŒçŠ¶æ€é•¿ä»€ä¹ˆæ ·ã€+ã€ŒçŠ¶æ€æ€ä¹ˆæ›´æ–°ã€</strong></p>
<p>æŠŠå®ƒæƒ³è±¡æˆã€Œå¿«é€’å•ã€çš„æ ¼å¼å®šä¹‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ğŸ“¦ Annotation å®šä¹‰ã€Œå¿«é€’å•ã€æ ¼å¼

   å¿«é€’å•ä¸Šæœ‰å“ªäº›å­—æ®µï¼Ÿ
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ æ”¶ä»¶äºº: <span class="hljs-strong">____</span><span class="hljs-strong">____</span>                â”‚
   â”‚ åœ°å€:   <span class="hljs-strong">____</span><span class="hljs-strong">____</span>                â”‚
   â”‚ ç‰©å“:   <span class="hljs-strong">____</span><span class="hljs-strong">____</span>                â”‚
   â”‚ å¤‡æ³¨:   <span class="hljs-strong">____</span><span class="hljs-strong">____</span> (å¯è¿½åŠ )       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   æ¯ä¸ªç«™ç‚¹ï¼ˆèŠ‚ç‚¹ï¼‰éƒ½èƒ½çœ‹åˆ°è¿™å¼ å•ï¼Œä¹Ÿèƒ½ä¿®æ”¹å®ƒ
</code></pre>
<h3 data-id="heading-12">4.2 åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">fieldName</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: reducerFunction, <span class="hljs-comment">// çŠ¶æ€å¦‚ä½•æ›´æ–°</span>
    <span class="hljs-attr">default</span>: defaultFunction, <span class="hljs-comment">// é»˜è®¤å€¼</span>
  }),
});
</code></pre>
<h3 data-id="heading-13">4.3 Reducer è¯¦è§£</h3>
<p>Reducer å†³å®šã€Œå½“èŠ‚ç‚¹è¿”å›æ–°å€¼æ—¶ï¼Œæ€ä¹ˆæ›´æ–°çŠ¶æ€ã€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ›¿æ¢æ¨¡å¼ - æ–°å€¼è¦†ç›–æ—§å€¼</span>
<span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> next;
<span class="hljs-comment">// èŠ‚ç‚¹è¿”å› { name: "æå››" } â†’ state.name å˜æˆ "æå››"</span>

<span class="hljs-comment">// 2. ç´¯åŠ æ¨¡å¼ - é€‚ç”¨äºæ¶ˆæ¯åˆ—è¡¨ï¼ˆæœ€å¸¸ç”¨ï¼ï¼‰</span>
<span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> [...prev, ...next];
<span class="hljs-comment">// èŠ‚ç‚¹è¿”å› { messages: [æ–°æ¶ˆæ¯] } â†’ è¿½åŠ åˆ° messages æ•°ç»„</span>

<span class="hljs-comment">// 3. æ•°å­—ç´¯åŠ </span>
<span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> prev + next;
<span class="hljs-comment">// èŠ‚ç‚¹è¿”å› { count: 1 } â†’ count åŠ  1</span>
</code></pre>
<h3 data-id="heading-14">4.4 å®é™…æ¡ˆä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹è¯ Agent çš„çŠ¶æ€å®šä¹‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-comment">// æ¶ˆæ¯åˆ—è¡¨ - ç´¯åŠ æ¨¡å¼ï¼ˆé‡è¦ï¼ï¼‰</span>
  <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> [...prev, ...next],
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [],
  }),

  <span class="hljs-comment">// å½“å‰ä»»åŠ¡ - æ›¿æ¢æ¨¡å¼</span>
  <span class="hljs-attr">currentTask</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">_, next</span>) =&gt;</span> next,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">""</span>,
  }),

  <span class="hljs-comment">// è¿­ä»£æ¬¡æ•° - æ•°å­—ç´¯åŠ </span>
  <span class="hljs-attr">iterations</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> prev + next,
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">0</span>,
  }),
});
</code></pre>
<h3 data-id="heading-15">4.5 ä¸ºä»€ä¹ˆéœ€è¦ Reducerï¼Ÿ</h3>
<p><strong>ç—›ç‚¹</strong>ï¼šå¤šä¸ªèŠ‚ç‚¹éƒ½æƒ³æ›´æ–°åŒä¸€ä¸ªå­—æ®µ</p>
<pre><code class="hljs language-css" lang="css">ä¾‹å¦‚ï¼šæ¶ˆæ¯åˆ—è¡¨
  - èŠ‚ç‚¹ <span class="hljs-selector-tag">A</span> è¿”å›: { messages: [new <span class="hljs-built_in">HumanMessage</span>(<span class="hljs-string">"hi"</span>)] }
  - èŠ‚ç‚¹ <span class="hljs-selector-tag">B</span> è¿”å›: { messages: [new <span class="hljs-built_in">AIMessage</span>(<span class="hljs-string">"hello"</span>)] }

âŒ æ²¡æœ‰ Reducerï¼šèŠ‚ç‚¹ <span class="hljs-selector-tag">B</span> çš„å€¼è¦†ç›–èŠ‚ç‚¹ <span class="hljs-selector-tag">A</span>ï¼Œç”¨æˆ·æ¶ˆæ¯ä¸¢å¤±ï¼
âœ… æœ‰ Reducerï¼š  <span class="hljs-selector-attr">[...prev, ...next]</span>ï¼Œä¸¤æ¡æ¶ˆæ¯éƒ½ä¿ç•™ï¼
</code></pre>
<hr/>
<h2 data-id="heading-16">5. Node èŠ‚ç‚¹è¯¦è§£</h2>
<h3 data-id="heading-17">5.1 èŠ‚ç‚¹å‡½æ•°ç­¾å</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// èŠ‚ç‚¹ = æ¥æ”¶ stateï¼Œè¿”å›éƒ¨åˆ†æ›´æ–°çš„å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-comment">// ä» state è¯»å–æ•°æ®</span>
  <span class="hljs-keyword">const</span> input = state.<span class="hljs-property">input</span>;

  <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">someOperation</span>(input);

  <span class="hljs-comment">// åªè¿”å›éœ€è¦æ›´æ–°çš„å­—æ®µ</span>
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">output</span>: result };
}
</code></pre>
<h3 data-id="heading-18">5.2 å¸¸è§èŠ‚ç‚¹ç±»å‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. çº¯å¤„ç†èŠ‚ç‚¹ - æ•°æ®å¤„ç†ï¼Œå¯ä»¥æ˜¯åŒæ­¥çš„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">result</span>: state.<span class="hljs-property">input</span>.<span class="hljs-title function_">toUpperCase</span>() };
}

<span class="hljs-comment">// 2. LLM èŠ‚ç‚¹ - è°ƒç”¨ AI æ¨¡å‹ï¼ˆå¿…é¡»å¼‚æ­¥ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">llmNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>([<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(state.<span class="hljs-property">question</span>)]);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">answer</span>: response.<span class="hljs-property">content</span> };
}

<span class="hljs-comment">// 3. API èŠ‚ç‚¹ - è°ƒç”¨å¤–éƒ¨æ¥å£ï¼ˆå¿…é¡»å¼‚æ­¥ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">apiNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://api.example.com/data"</span>);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">apiResult</span>: <span class="hljs-keyword">await</span> data.<span class="hljs-title function_">json</span>() };
}

<span class="hljs-comment">// 4. å·¥å…·èŠ‚ç‚¹ - ä½¿ç”¨å†…ç½® ToolNode</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToolNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph/prebuilt"</span>;
<span class="hljs-keyword">const</span> toolNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolNode</span>(tools);
</code></pre>
<h3 data-id="heading-19">5.3 è¿”å›å€¼è§„åˆ™</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåªè¿”å›éœ€è¦æ›´æ–°çš„å­—æ®µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">goodNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">output</span>: <span class="hljs-string">"result"</span> };
}

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šä¸éœ€è¦å±•å¼€æ•´ä¸ª state</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">badNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">return</span> { ...state, <span class="hljs-attr">output</span>: <span class="hljs-string">"result"</span> };
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šè¿”å›ç©ºå¯¹è±¡ = ä¸æ›´æ–°ä»»ä½•å­—æ®µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">noUpdateNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state);
  <span class="hljs-keyword">return</span> {};
}
</code></pre>
<hr/>
<h2 data-id="heading-20">6. Edge è¾¹ä¸æµç¨‹æ§åˆ¶</h2>
<h3 data-id="heading-21">6.1 ä»€ä¹ˆæ˜¯ Edgeï¼Ÿ</h3>
<p><strong>Edge = æµç¨‹å›¾é‡Œçš„ã€Œç®­å¤´ã€= å®šä¹‰æ‰§è¡Œé¡ºåº</strong></p>
<pre><code class="hljs language-css" lang="css">        Edgeï¼ˆè¾¹ï¼‰
           â†“
<span class="hljs-selector-attr">[START]</span> â”€â”€â”€â”€â”€â”€â”€â”€â†’ <span class="hljs-selector-attr">[NodeA]</span> â”€â”€â”€â”€â”€â”€â”€â”€â†’ <span class="hljs-selector-attr">[END]</span>
          â†‘                  â†‘
       è¿™æ˜¯è¾¹             è¿™ä¹Ÿæ˜¯è¾¹

æ„æ€ï¼šSTART å®Œäº†æ‰§è¡Œ NodeAï¼ŒNodeA å®Œäº†ç»“æŸ
</code></pre>
<h3 data-id="heading-22">6.2 ä¸¤ç§è¾¹çš„å¯¹æ¯”</h3>























<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>æ¯”å–»</th><th>ä»£ç </th></tr></thead><tbody><tr><td><strong>æ™®é€šè¾¹</strong></td><td>A å®Œäº†ä¸€å®šåˆ° B</td><td>ç›´çº¿</td><td><code>addEdge("A", "B")</code></td></tr><tr><td><strong>æ¡ä»¶è¾¹</strong></td><td>æ ¹æ®çŠ¶æ€å†³å®šå»å“ª</td><td>å²”è·¯å£</td><td><code>addConditionalEdges(...)</code></td></tr></tbody></table>
<h3 data-id="heading-23">6.3 æ™®é€šè¾¹è¯­æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-variable constant_">START</span>, <span class="hljs-variable constant_">END</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;

<span class="hljs-comment">// ä» A åˆ° B</span>
graph.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>);

<span class="hljs-comment">// å…¥å£</span>
graph.<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"firstNode"</span>);

<span class="hljs-comment">// å‡ºå£</span>
graph.<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"lastNode"</span>, <span class="hljs-variable constant_">END</span>);

<span class="hljs-comment">// é“¾å¼è°ƒç”¨</span>
graph.<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"A"</span>).<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>).<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>).<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"C"</span>, <span class="hljs-variable constant_">END</span>);
</code></pre>
<h3 data-id="heading-24">6.4 addEdge vs pipe() å¯¹æ¯”</h3>
<p>å¦‚æœä½ ç”¨è¿‡ LangChain çš„ <code>pipe()</code>ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>pipe()</th><th>addEdge()</th></tr></thead><tbody><tr><td>æµç¨‹ç±»å‹</td><td>åªèƒ½çº¿æ€§ Aâ†’Bâ†’C</td><td>å¯åˆ†æ”¯ã€å¾ªç¯</td></tr><tr><td>æ¡ä»¶åˆ†æ”¯</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>å¾ªç¯</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr></tbody></table>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">pipe</span>():      <span class="hljs-selector-tag">A</span> â”€â”€â†’ <span class="hljs-selector-tag">B</span> â”€â”€â†’ <span class="hljs-selector-tag">C</span> â”€â”€â†’ ç»“æŸï¼ˆåªèƒ½å¾€å‰ï¼‰

<span class="hljs-selector-tag">addEdge</span>():   <span class="hljs-selector-tag">A</span> â”€â”€â†’ <span class="hljs-selector-tag">B</span> â”€â”€â†’ <span class="hljs-selector-tag">C</span> â”€â”€â†’ ç»“æŸ
                  â†‘     â”‚
                  â””â”€â”€â”€â”€â”€â”˜  ï¼ˆå¯ä»¥å¾ªç¯å›å»ï¼ï¼‰
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>æ€»ç»“</strong>ï¼šç®€å•çº¿æ€§æµç¨‹ç”¨ pipeï¼Œéœ€è¦åˆ†æ”¯/å¾ªç¯ç”¨ LangGraphï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-25">7. æ¡ä»¶åˆ†æ”¯å®æˆ˜</h2>
<h3 data-id="heading-26">7.1 è¯­æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript">graph.<span class="hljs-title function_">addConditionalEdges</span>(
  fromNode, <span class="hljs-comment">// æºèŠ‚ç‚¹</span>
  routerFunction, <span class="hljs-comment">// è·¯ç”±å‡½æ•°</span>
  routeMapping <span class="hljs-comment">// è·¯ç”±æ˜ å°„</span>
);
</code></pre>
<h3 data-id="heading-27">7.2 è·¯ç”±å‡½æ•°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±å‡½æ•°ï¼šæ¥æ”¶ stateï¼Œè¿”å›è·¯ç”± key</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">router</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">score</span> &gt; <span class="hljs-number">80</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"high"</span>;
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">score</span> &gt; <span class="hljs-number">60</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"medium"</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">"low"</span>;
}

<span class="hljs-comment">// è·¯ç”±æ˜ å°„ï¼škey â†’ èŠ‚ç‚¹å</span>
<span class="hljs-keyword">const</span> routeMapping = {
  <span class="hljs-attr">high</span>: <span class="hljs-string">"celebrateNode"</span>,
  <span class="hljs-attr">medium</span>: <span class="hljs-string">"normalNode"</span>,
  <span class="hljs-attr">low</span>: <span class="hljs-string">"improveNode"</span>,
};

graph.<span class="hljs-title function_">addConditionalEdges</span>(<span class="hljs-string">"scoreNode"</span>, router, routeMapping);
</code></pre>
<h3 data-id="heading-28">7.3 å®Œæ•´ç¤ºä¾‹ï¼šæƒ…æ„Ÿåˆ†æè·¯ç”±</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sentimentRouter</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> sentiment = state.<span class="hljs-property">sentiment</span>;
  <span class="hljs-keyword">if</span> (sentiment.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"ç§¯æ"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"positive"</span>;
  <span class="hljs-keyword">if</span> (sentiment.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"æ¶ˆæ"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">"negative"</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">"neutral"</span>;
}

<span class="hljs-comment">// æ„å»ºå›¾</span>
<span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>(<span class="hljs-title class_">MyState</span>)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"analyze"</span>, analyzeNode)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"positive"</span>, positiveHandler)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"negative"</span>, negativeHandler)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"neutral"</span>, neutralHandler)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"analyze"</span>)
  .<span class="hljs-title function_">addConditionalEdges</span>(<span class="hljs-string">"analyze"</span>, sentimentRouter, {
    <span class="hljs-attr">positive</span>: <span class="hljs-string">"positive"</span>,
    <span class="hljs-attr">negative</span>: <span class="hljs-string">"negative"</span>,
    <span class="hljs-attr">neutral</span>: <span class="hljs-string">"neutral"</span>,
  })
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"positive"</span>, <span class="hljs-variable constant_">END</span>)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"negative"</span>, <span class="hljs-variable constant_">END</span>)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"neutral"</span>, <span class="hljs-variable constant_">END</span>);
</code></pre>
<p>æµç¨‹å›¾ï¼š</p>
<pre><code class="hljs language-css" lang="css">                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”Œâ”€â”€â”€â†’â”‚  positive   â”‚â”€â”€â”€â”
               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
<span class="hljs-selector-attr">[START]</span>â†’<span class="hljs-selector-attr">[analyze]</span>                     â”‚â†’<span class="hljs-selector-attr">[END]</span>
               â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
               â”œâ”€â”€â”€â†’â”‚  negative   â”‚â”€â”€â”€â”¤
               â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
               â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
               â””â”€â”€â”€â†’â”‚  neutral    â”‚â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-29">8. å¾ªç¯æµç¨‹å®ç°</h2>
<h3 data-id="heading-30">8.1 æ ¸å¿ƒæ€è·¯</h3>
<p>é€šè¿‡æ¡ä»¶è¾¹å®ç°å¾ªç¯ï¼šå½“æ¡ä»¶æ»¡è¶³æ—¶ï¼Œæµç¨‹å›åˆ°ä¹‹å‰çš„èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldContinue</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-comment">// å®‰å…¨ä¿æŠ¤ï¼šæœ€å¤šè¿­ä»£ N æ¬¡</span>
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">iterations</span> &gt;= <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
  <span class="hljs-comment">// ä¸šåŠ¡æ¡ä»¶</span>
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">isComplete</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">"continue"</span>;
}

<span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>(<span class="hljs-title class_">MyState</span>)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"process"</span>, processNode)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"check"</span>, checkNode)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"process"</span>)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"process"</span>, <span class="hljs-string">"check"</span>)
  .<span class="hljs-title function_">addConditionalEdges</span>(<span class="hljs-string">"check"</span>, shouldContinue, {
    <span class="hljs-attr">continue</span>: <span class="hljs-string">"process"</span>, <span class="hljs-comment">// ğŸ”„ å¾ªç¯å› process</span>
    <span class="hljs-attr">end</span>: <span class="hljs-variable constant_">END</span>,
  });
</code></pre>
<p>æµç¨‹å›¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[START]</span> â”€â”€â†’ <span class="hljs-selector-attr">[process]</span> â”€â”€â†’ <span class="hljs-selector-attr">[check]</span>
                â†‘            â”‚
                â”‚  continue  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                             â”‚ end
                             â†“
                          <span class="hljs-selector-attr">[END]</span>
</code></pre>
<h3 data-id="heading-31">8.2 âš ï¸ é˜²æ­¢æ— é™å¾ªç¯</h3>
<p><strong>è¿™æ˜¯æœ€é‡è¦çš„ï¼ä¸€å®šè¦è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_ITERATIONS</span> = <span class="hljs-number">10</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldContinue</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-comment">// 1ï¸âƒ£ å…ˆæ£€æŸ¥è¿­ä»£æ¬¡æ•°ï¼ˆå®‰å…¨ä¿æŠ¤ï¼‰</span>
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">iterations</span> &gt;= <span class="hljs-variable constant_">MAX_ITERATIONS</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"âš ï¸ è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼Œå¼ºåˆ¶ç»“æŸ"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
  }

  <span class="hljs-comment">// 2ï¸âƒ£ å†æ£€æŸ¥ä¸šåŠ¡æ¡ä»¶</span>
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">isComplete</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-string">"continue"</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-32">9. ReAct Agent å®Œæ•´å®æˆ˜</h2>
<h3 data-id="heading-33">9.1 ä»€ä¹ˆæ˜¯ ReActï¼Ÿ</h3>
<p><strong>ReAct = Reasoning + Acting</strong>ï¼Œè®© LLM è‡ªä¸»ä½¿ç”¨å·¥å…·çš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ğŸ¤” Reasoning (æ¨ç†): LLM åˆ†æé—®é¢˜ï¼Œå†³å®šéœ€è¦ä»€ä¹ˆ
<span class="hljs-bullet">2.</span> ğŸ”§ Acting (è¡ŒåŠ¨): è°ƒç”¨å·¥å…·è·å–ä¿¡æ¯
<span class="hljs-bullet">3.</span> ğŸ‘€ Observation (è§‚å¯Ÿ): æŸ¥çœ‹å·¥å…·è¿”å›ç»“æœ
<span class="hljs-bullet">4.</span> ğŸ”„ å¾ªç¯: ç›´åˆ°å¯ä»¥ç»™å‡ºæœ€ç»ˆç­”æ¡ˆ
</code></pre>
<h3 data-id="heading-34">9.2 æµç¨‹å›¾</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[START]</span> â”€â”€â†’ <span class="hljs-selector-attr">[agent]</span> â”€â”€â†’ <span class="hljs-selector-attr">[router]</span>
               â†‘            â”‚
               â”‚   tools    â”‚ has_tools
               â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚  â†“                   â†“
           <span class="hljs-selector-attr">[tools]</span>              no_tools
               â”‚                      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†“
                                   <span class="hljs-selector-attr">[END]</span>
</code></pre>
<h3 data-id="heading-35">9.3 å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">StateGraph</span>, <span class="hljs-title class_">Annotation</span>, <span class="hljs-variable constant_">START</span>, <span class="hljs-variable constant_">END</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToolNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph/prebuilt"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;

<span class="hljs-comment">// 1ï¸âƒ£ å®šä¹‰çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">messages</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">prev, next</span>) =&gt;</span> [...prev, ...next],
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> [],
  }),
});

<span class="hljs-comment">// 2ï¸âƒ£ å®šä¹‰å·¥å…· &amp; ç»‘å®šåˆ° LLM</span>
<span class="hljs-keyword">const</span> tools = [calculatorTool, searchTool, weatherTool];
<span class="hljs-keyword">const</span> llmWithTools = llm.<span class="hljs-title function_">bindTools</span>(tools);

<span class="hljs-comment">// 3ï¸âƒ£ Agent èŠ‚ç‚¹ï¼šè°ƒç”¨ LLM åšå†³ç­–</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llmWithTools.<span class="hljs-title function_">invoke</span>(state.<span class="hljs-property">messages</span>);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">messages</span>: [response] };
}

<span class="hljs-comment">// 4ï¸âƒ£ å·¥å…·èŠ‚ç‚¹ï¼šçœŸæ­£æ‰§è¡Œå·¥å…·</span>
<span class="hljs-keyword">const</span> toolNode = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolNode</span>(tools);

<span class="hljs-comment">// 5ï¸âƒ£ è·¯ç”±å‡½æ•°ï¼šåˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å·¥å…·</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">shouldCallTools</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> lastMessage = state.<span class="hljs-property">messages</span>[state.<span class="hljs-property">messages</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  <span class="hljs-keyword">if</span> (lastMessage.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"tools"</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
}

<span class="hljs-comment">// 6ï¸âƒ£ æ„å»ºå›¾</span>
<span class="hljs-keyword">const</span> agentGraph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>(<span class="hljs-title class_">AgentState</span>)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"agent"</span>, agentNode)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"tools"</span>, toolNode)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"agent"</span>)
  .<span class="hljs-title function_">addConditionalEdges</span>(<span class="hljs-string">"agent"</span>, shouldCallTools, {
    <span class="hljs-attr">tools</span>: <span class="hljs-string">"tools"</span>,
    <span class="hljs-attr">end</span>: <span class="hljs-variable constant_">END</span>,
  })
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"tools"</span>, <span class="hljs-string">"agent"</span>); <span class="hljs-comment">// ğŸ”„ å·¥å…·æ‰§è¡Œå®Œå›åˆ° agent</span>

<span class="hljs-comment">// 7ï¸âƒ£ ç¼–è¯‘ &amp; æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> agent = agentGraph.<span class="hljs-title function_">compile</span>();
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> agent.<span class="hljs-title function_">invoke</span>({
  <span class="hljs-attr">messages</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>)],
});
</code></pre>
<h3 data-id="heading-36">9.4 æ‰§è¡Œæµç¨‹æ¼”ç¤º</h3>
<pre><code class="hljs language-vbnet" lang="vbnet">ç”¨æˆ·: <span class="hljs-string">"åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>

<span class="hljs-keyword">Step</span> <span class="hljs-number">1</span>: [agent]
  â””â”€ LLM æ€è€ƒ: <span class="hljs-string">"éœ€è¦è°ƒç”¨ get_weather å·¥å…·"</span>
  â””â”€ è¾“å‡º: tool_calls: [{name: <span class="hljs-string">"get_weather"</span>, args: {city: <span class="hljs-string">"åŒ—äº¬"</span>}}]

<span class="hljs-keyword">Step</span> <span class="hljs-number">2</span>: [router] â†’ æ£€æµ‹åˆ° tool_calls â†’ å» [tools]

<span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>: [tools]
  â””â”€ æ‰§è¡Œ: get_weather(<span class="hljs-string">"åŒ—äº¬"</span>)
  â””â”€ è¿”å›: <span class="hljs-string">"åŒ—äº¬ï¼šæ™´å¤©ï¼Œ15Â°C"</span>

<span class="hljs-keyword">Step</span> <span class="hljs-number">4</span>: [agent]
  â””â”€ LLM çœ‹åˆ°å·¥å…·ç»“æœ
  â””â”€ ç”Ÿæˆæœ€ç»ˆå›ç­”ï¼Œæ—  tool_calls

<span class="hljs-keyword">Step</span> <span class="hljs-number">5</span>: [router] â†’ æ—  tool_calls â†’ å» [<span class="hljs-keyword">END</span>]

æœ€ç»ˆè¾“å‡º: <span class="hljs-string">"åŒ—äº¬ä»Šå¤©æ™´å¤©ï¼Œæ°”æ¸©15Â°Cï¼Œæ˜¯ä¸ªå¥½å¤©æ°”ï¼"</span>
</code></pre>
<h3 data-id="heading-37">9.5 é‡è¦æ¦‚å¿µè¾¨æ</h3>
<p>å¾ˆå¤šäººæ··æ·† <code>llmWithTools</code> å’Œ <code>toolNode</code>ï¼š</p>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><code>llmWithTools</code></td><td>è®© LLM <strong>çŸ¥é“</strong>æœ‰å“ªäº›å·¥å…·</td><td>å·¥å…·è¯´æ˜ä¹¦</td></tr><tr><td><code>agentNode</code></td><td>è°ƒç”¨ LLM <strong>å†³ç­–</strong>æ˜¯å¦ç”¨å·¥å…·</td><td>å†³ç­–è€…</td></tr><tr><td><code>toolNode</code></td><td><strong>çœŸæ­£æ‰§è¡Œ</strong>å·¥å…·è°ƒç”¨</td><td>æ‰§è¡Œè€…</td></tr></tbody></table>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                          â”‚
â”‚  agentNode (å†…éƒ¨ç”¨ llmWithTools)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ LLM: <span class="hljs-string">"ç”¨æˆ·é—®å¤©æ°”ï¼Œæˆ‘éœ€è¦è°ƒç”¨ get_weather"</span>           â”‚  â”‚
â”‚  â”‚      â†“                                             â”‚  â”‚
â”‚  â”‚ è¾“å‡º: tool_calls: [{name: <span class="hljs-string">"get_weather"</span>, ...}]     â”‚  â”‚
â”‚  â”‚      ï¼ˆåªæ˜¯"è¯´"è¦è°ƒç”¨ï¼Œæ²¡æœ‰çœŸçš„è°ƒï¼‰                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â”‚                               â”‚
â”‚                          â–¼                               â”‚
â”‚  toolNode                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ æ‰§è¡Œ: <span class="hljs-built_in">get_weather</span>(<span class="hljs-string">"åŒ—äº¬"</span>)                          â”‚  â”‚
â”‚  â”‚ è¿”å›: <span class="hljs-string">"åŒ—äº¬ï¼šæ™´å¤©ï¼Œ15Â°C"</span>                           â”‚  â”‚
â”‚  â”‚      ï¼ˆçœŸæ­£è°ƒç”¨å·¥å…·ï¼Œæ‹¿åˆ°ç»“æœï¼‰                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>è®°å¿†å£è¯€</strong>ï¼šllmWithTools è®© LLMã€ŒçŸ¥é“ã€å·¥å…·ï¼ŒtoolNode è®©å·¥å…·ã€Œæ‰§è¡Œã€ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-38">10. æµå¼è¾“å‡º</h2>
<h3 data-id="heading-39">10.1 invoke vs stream</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// invoke: ç­‰å¾…å…¨éƒ¨å®Œæˆ</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">invoke</span>(initialState);

<span class="hljs-comment">// stream: å®æ—¶è¿”å›æ¯ä¸ªèŠ‚ç‚¹è¾“å‡º</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> app.<span class="hljs-title function_">stream</span>(initialState)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event);
  <span class="hljs-comment">// { "agent": { messages: [...] } }</span>
  <span class="hljs-comment">// { "tools": { messages: [...] } }</span>
}
</code></pre>
<h3 data-id="heading-40">10.2 ä¼˜åŠ¿</h3>
<ul>
<li><strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼šå®æ—¶çœ‹åˆ°è¿›åº¦ï¼Œå‡å°‘ç­‰å¾…ç„¦è™‘</li>
<li><strong>è°ƒè¯•æ–¹ä¾¿</strong>ï¼šçœ‹åˆ°æ¯æ­¥ä¸­é—´ç»“æœ</li>
<li><strong>æ—©æœŸå‘ç°</strong>ï¼šæŸèŠ‚ç‚¹å‡ºé”™å¯å°½æ—©å‘ç°</li>
<li><strong>å†…å­˜å‹å¥½</strong>ï¼šè¾¹å¤„ç†è¾¹è¾“å‡º</li>
</ul>
<hr/>
<h2 data-id="heading-41">11. æœ€ä½³å®è·µä¸è¸©å‘æŒ‡å—</h2>
<h3 data-id="heading-42">11.1 çŠ¶æ€è®¾è®¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¥½çš„è®¾è®¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">GoodState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">userQuestion</span>: <span class="hljs-title class_">Annotation</span>({ ... }),      <span class="hljs-comment">// æ¸…æ™°å‘½å</span>
  <span class="hljs-attr">chatHistory</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">p, n</span>) =&gt;</span> [...p, ...n],      <span class="hljs-comment">// åˆé€‚çš„ reducer</span>
  }),
  <span class="hljs-attr">retryCount</span>: <span class="hljs-title class_">Annotation</span>({
    <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-number">0</span>,                     <span class="hljs-comment">// æ˜ç¡®é»˜è®¤å€¼</span>
  }),
});

<span class="hljs-comment">// âŒ ä¸å¥½çš„è®¾è®¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BadState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">data</span>: <span class="hljs-title class_">Annotation</span>({ ... }),   <span class="hljs-comment">// å‘½åæ¨¡ç³Š</span>
  <span class="hljs-attr">x</span>: <span class="hljs-title class_">Annotation</span>({ ... }),      <span class="hljs-comment">// å«ä¹‰ä¸æ˜</span>
});
</code></pre>
<h3 data-id="heading-43">11.2 èŠ‚ç‚¹è®¾è®¡ï¼šå•ä¸€èŒè´£</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… å¥½ï¼šæ¯ä¸ªèŠ‚ç‚¹åªåšä¸€ä»¶äº‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">translateNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> translated = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>([...]);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">translatedText</span>: translated.<span class="hljs-property">content</span> };
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">analyzeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> analysis = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>([...]);
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">analysisResult</span>: analysis.<span class="hljs-property">content</span> };
}

<span class="hljs-comment">// âŒ ä¸å¥½ï¼šä¸€ä¸ªèŠ‚ç‚¹åšå¤ªå¤šäº‹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doEverythingNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-comment">// ç¿»è¯‘ + åˆ†æ + æ€»ç»“ + ç”ŸæˆæŠ¥å‘Š...</span>
}
</code></pre>
<h3 data-id="heading-44">11.3 é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">safeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">riskyOperation</span>(state);
    <span class="hljs-keyword">return</span> { result, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> };
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"èŠ‚ç‚¹æ‰§è¡Œå¤±è´¥:"</span>, error);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">result</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> };
  }
}

<span class="hljs-comment">// åœ¨è·¯ç”±ä¸­å¤„ç†é”™è¯¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">router</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">error</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"errorHandler"</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">"nextStep"</span>;
}
</code></pre>
<h3 data-id="heading-45">11.4 å¾ªç¯å¿…é¡»è®¾ç½®ä¸Šé™</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_ITERATIONS</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// å¿…é¡»ï¼</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">loopRouter</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">iterations</span> &gt;= <span class="hljs-variable constant_">MAX_ITERATIONS</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"âš ï¸ è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
  }
  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">isComplete</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"end"</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-string">"continue"</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-46">12. é™„å½•ï¼šLLM å‚æ•°é…ç½®</h2>
<h3 data-id="heading-47">12.1 temperature å‚æ•°</h3>






























<table><thead><tr><th>å€¼</th><th>æ•ˆæœ</th><th>è¾“å‡ºç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>0</strong></td><td>ç¡®å®šæ€§æœ€é«˜</td><td>æ¯æ¬¡å‡ ä¹ç›¸åŒ</td></tr><tr><td><strong>0.1-0.3</strong></td><td>ä½éšæœºæ€§</td><td>ç¨³å®šã€å¯é¢„æµ‹</td></tr><tr><td><strong>0.5-0.7</strong></td><td>ä¸­ç­‰</td><td>å¹³è¡¡åˆ›æ„å’Œä¸€è‡´æ€§</td></tr><tr><td><strong>0.8-1.0</strong></td><td>é«˜éšæœºæ€§</td><td>æ›´æœ‰åˆ›æ„</td></tr></tbody></table>
<h3 data-id="heading-48">12.2 æ¨èå€¼</h3>





























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èå€¼</th></tr></thead><tbody><tr><td>ä»£ç ç”Ÿæˆ / æ•°å­¦</td><td>0 ~ 0.2</td></tr><tr><td>æ•°æ®æå– / åˆ†ç±»</td><td>0</td></tr><tr><td>é—®ç­” / çŸ¥è¯†æ£€ç´¢</td><td>0 ~ 0.3</td></tr><tr><td>é€šç”¨å¯¹è¯</td><td>0.5 ~ 0.7</td></tr><tr><td>åˆ›æ„å†™ä½œ</td><td>0.7 ~ 1.0</td></tr></tbody></table>
<h3 data-id="heading-49">12.3 åœ¨ LangGraph ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸åŒèŠ‚ç‚¹ç”¨ä¸åŒ temperature</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">codeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> precisionLLM = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.1</span> });
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">creativeNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">const</span> creativeLLM = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.9</span> });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-50">ğŸ¯ å¿«é€Ÿå‚è€ƒæ¨¡æ¿</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">StateGraph</span>, <span class="hljs-title class_">Annotation</span>, <span class="hljs-variable constant_">START</span>, <span class="hljs-variable constant_">END</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ToolNode</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph/prebuilt"</span>;

<span class="hljs-comment">// 1. å®šä¹‰çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-title class_">Annotation</span>({ <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">_, x</span>) =&gt;</span> x, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">""</span> }),
  <span class="hljs-attr">output</span>: <span class="hljs-title class_">Annotation</span>({ <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">_, x</span>) =&gt;</span> x, <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">""</span> }),
});

<span class="hljs-comment">// 2. å®šä¹‰èŠ‚ç‚¹</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">myNode</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">output</span>: <span class="hljs-string">"processed"</span> };
}

<span class="hljs-comment">// 3. å®šä¹‰è·¯ç”±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myRouter</span>(<span class="hljs-params">state</span>) {
  <span class="hljs-keyword">return</span> state.<span class="hljs-property">output</span> ? <span class="hljs-string">"end"</span> : <span class="hljs-string">"continue"</span>;
}

<span class="hljs-comment">// 4. æ„å»ºå›¾</span>
<span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>(<span class="hljs-title class_">MyState</span>)
  .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"myNode"</span>, myNode)
  .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"myNode"</span>)
  .<span class="hljs-title function_">addConditionalEdges</span>(<span class="hljs-string">"myNode"</span>, myRouter, {
    <span class="hljs-attr">continue</span>: <span class="hljs-string">"myNode"</span>,
    <span class="hljs-attr">end</span>: <span class="hljs-variable constant_">END</span>,
  });

<span class="hljs-comment">// 5. ç¼–è¯‘æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> app = graph.<span class="hljs-title function_">compile</span>();
<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">invoke</span>({ <span class="hljs-attr">input</span>: <span class="hljs-string">"hello"</span> });
</code></pre>
<hr/>
<h2 data-id="heading-51">ğŸ“– å­¦ä¹ èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flangchain-ai.github.io%2Flanggraphjs%2F" target="_blank" title="https://langchain-ai.github.io/langgraphjs/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain-ai%2Flanggraphjs" target="_blank" title="https://github.com/langchain-ai/langgraphjs" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a></li>
<li>LangGraph Studioï¼šå¯è§†åŒ–è°ƒè¯•å·¥å…·</li>
</ul>
<hr/>
<h2 data-id="heading-52">å†™åœ¨æœ€å</h2>
<p>LangGraph çš„æ ¸å¿ƒå°±æ˜¯<strong>ç”¨ã€Œç”»æµç¨‹å›¾ã€çš„æ€ç»´æ¥æ„å»º AI åº”ç”¨</strong>ã€‚æŒæ¡äº† Stateã€Nodeã€Edge è¿™ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±èƒ½æ„å»ºå„ç§å¤æ‚çš„ AI å·¥ä½œæµã€‚</p>
<p><strong>å­¦ä¹ å»ºè®®</strong>ï¼š</p>
<ol>
<li>å…ˆä»ç®€å•çš„ä¸²è¡Œæµç¨‹å¼€å§‹</li>
<li>é€æ­¥æ·»åŠ æ¡ä»¶åˆ†æ”¯</li>
<li>æœ€åå®ç°å®Œæ•´çš„ ReAct Agent</li>
</ol>
<p>æ¯ä¸€æ­¥éƒ½è¿è¡Œä»£ç ï¼Œè§‚å¯ŸçŠ¶æ€çš„å˜åŒ–ï¼Œä½ ä¼šå¾ˆå¿«ä¸Šæ‰‹ï¼</p>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿<strong>ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨</strong>ï¼Œåç»­è¿˜ä¼šåˆ†äº«æ›´å¤š AI å¼€å‘å¹²è´§ï¼</p>
<p>æœ‰é—®é¢˜æ¬¢è¿è¯„è®ºåŒºäº¤æµ~ ğŸ‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG + Agent + Promptå·¥ç¨‹ä¸­]]></title>    <link>https://juejin.cn/post/7579438351296839716</link>    <guid>https://juejin.cn/post/7579438351296839716</guid>    <pubDate>2025-12-03T08:33:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579438351296839716" data-draft-id="7578948893762273307" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG + Agent + Promptå·¥ç¨‹ä¸­"/> <meta itemprop="keywords" content="Docker,AIGC,LLM"/> <meta itemprop="datePublished" content="2025-12-03T08:33:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›½å®¶ä¸ä¿æŠ¤åºŸç‰©"/> <meta itemprop="url" content="https://juejin.cn/user/1220936035210004"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG + Agent + Promptå·¥ç¨‹ä¸­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1220936035210004/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›½å®¶ä¸ä¿æŠ¤åºŸç‰©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:33:26.000Z" title="Wed Dec 03 2025 08:33:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RAG + Agent + Prompt å·¥ç¨‹ä¸­ï¼šæ­å»ºæœ¬åœ°å‘é‡æ•°æ®åº“Qdrantã€æ–‡æ¡£å¤„ç†ä¸å¤šè¯­è¨€æ”¯æŒå›½é™…åŒ–</h2>
<blockquote>
<p>æœ¬æ–‡æ˜¯ <strong>RAG ç³»ç»Ÿå®æˆ˜ç³»åˆ—</strong> çš„ä¸­é—´ç¯‡ã€‚åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† RAG çš„åŸºæœ¬åŸç†å’Œ LangChain çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥å®æˆ˜ç¯èŠ‚â€”â€”æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•æ­å»ºæœ¬åœ°å‘é‡æ•°æ®åº“ï¼ˆQdrantï¼‰ï¼Œå¹¶é‡ç‚¹è®²è§£ <strong>æ–‡æ¡£é¢„å¤„ç†æµç¨‹</strong> å’Œ <strong>å¤šè¯­è¨€å›½é™…åŒ–æ”¯æŒ</strong> çš„å®Œæ•´å®ç°æ–¹æ¡ˆã€‚</p>
<p>é™„ä¸Šé¡¹ç›®æºä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flhlhlhlhl%2Fassessment-rag" target="_blank" title="https://github.com/lhlhlhlhl/assessment-rag" ref="nofollow noopener noreferrer">lhlhlhlhl/assessment-rag</a></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">å‰è¨€ï¼šä¸ºä»€ä¹ˆå‘é‡æ•°æ®åº“å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>åœ¨ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿä¸­ï¼Œ<strong>å‘é‡æ•°æ®åº“</strong> æ˜¯è¿æ¥â€œç”¨æˆ·é—®é¢˜â€ä¸â€œçŸ¥è¯†åº“å†…å®¹â€çš„æ¡¥æ¢ã€‚å®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>å°†ä½ çš„æ–‡æ¡£å†…å®¹è½¬æ¢ä¸ºé«˜ç»´å‘é‡ï¼ˆå³â€œåµŒå…¥â€ï¼‰</li>
<li>å¿«é€Ÿæ‰¾å‡ºä¸ç”¨æˆ·æé—®è¯­ä¹‰æœ€ç›¸è¿‘çš„å‡ æ®µæ–‡æœ¬</li>
<li>ä¸ºå¤§æ¨¡å‹æä¾›ç²¾å‡†çš„ä¸Šä¸‹æ–‡ï¼Œä»è€Œç”Ÿæˆé«˜è´¨é‡å›ç­”</li>
</ul>
<p>æ²¡æœ‰é«˜æ•ˆçš„å‘é‡å­˜å‚¨å’Œæ£€ç´¢æœºåˆ¶ï¼ŒRAG å°±å¤±å»äº†â€œå¢å¼ºâ€çš„æ„ä¹‰ã€‚</p>
<p>åœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹© <strong>Qdrant</strong> ä½œä¸ºæœ¬åœ°å‘é‡æ•°æ®åº“ï¼Œå¹¶å›´ç»•å®ƒæ„å»ºäº†ä¸€å¥—å®Œæ•´çš„æ–‡æ¡£å¤„ç† + å¤šè¯­è¨€æ”¯æŒä½“ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸€ã€å‘é‡æ•°æ®åº“é€‰å‹ï¼šä¸ºä»€ä¹ˆæ˜¯ Qdrantï¼Ÿ</h3>
<p>å¸‚é¢ä¸Šæœ‰ Pineconeã€Weaviateã€Milvusã€FAISS ç­‰å¤šç§å‘é‡æ•°æ®åº“ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† <strong>Qdrant</strong>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>ç‰¹æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸš€ <strong>é«˜æ€§èƒ½</strong></td><td>ç”¨ Rust ç¼–å†™ï¼Œå†…å­˜æ•ˆç‡é«˜ï¼Œå•æœºæ¯ç§’å¯å¤„ç†æ•°åƒæ¬¡æŸ¥è¯¢</td></tr><tr><td>ğŸ“¦ <strong>è½»é‡æ˜“éƒ¨ç½²</strong></td><td>æ”¯æŒ Docker ä¸€é”®å¯åŠ¨ï¼Œä¹Ÿæ”¯æŒäºŒè¿›åˆ¶ç›´æ¥è¿è¡Œ</td></tr><tr><td>ğŸ” <strong>æ”¯æŒå…ƒæ•°æ®è¿‡æ»¤</strong></td><td>ä¸ä»…èƒ½æŒ‰å‘é‡ç›¸ä¼¼åº¦æœç´¢ï¼Œè¿˜èƒ½ç»“åˆæ ‡ç­¾ã€æ¥æºç­‰æ¡ä»¶ç­›é€‰</td></tr><tr><td>ğŸŒ <strong>åŒåè®®æ”¯æŒ</strong></td><td>åŒæ—¶æä¾› RESTful API å’Œ gRPC æ¥å£ï¼Œé€‚é…ä¸åŒåœºæ™¯</td></tr><tr><td>ğŸ†“ <strong>å¼€æºå…è´¹</strong></td><td>ç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„ï¼Œé€‚åˆæœ¬åœ°å¼€å‘å’Œä¸­å°è§„æ¨¡ç”Ÿäº§</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">äºŒã€ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼šDocker vs ç›´æ¥å®‰è£…</h3>
<h4 data-id="heading-4">æ–¹æ¡ˆä¸€ï¼šæ¨èï¼ä½¿ç”¨ Docker Compose ä¸€é”®éƒ¨ç½²ï¼ˆå¼€å‘é¦–é€‰ï¼‰</h4>
<h5 data-id="heading-5">1. åˆ›å»º <code>docker-compose.yml</code></h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">qdrant:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">qdrant/qdrant:latest</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">smart_assessment_qdrant</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6333:6333"</span>  <span class="hljs-comment"># REST API ç«¯å£</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"6334:6334"</span>  <span class="hljs-comment"># gRPC ç«¯å£ï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./qdrant_storage:/qdrant/storage</span>  <span class="hljs-comment"># æŒä¹…åŒ–æ•°æ®</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">QDRANT__SERVICE__GRPC_PORT=6334</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">rag_network</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">rag_network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ <strong>å…³é”®è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>volumes</code> å°†æœ¬åœ° <code>qdrant_storage/</code> ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œ<strong>å³ä½¿åˆ é™¤å®¹å™¨ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±</strong></li>
<li><code>restart: unless-stopped</code> ä¿è¯æœåŠ¡å´©æºƒåè‡ªåŠ¨é‡å¯</li>
<li>è‡ªå®šä¹‰ç½‘ç»œ <code>rag_network</code> ä¾¿äºæœªæ¥æ‰©å±•ï¼ˆå¦‚åŠ å…¥ LLM æœåŠ¡ï¼‰</li>
</ul>
</blockquote>
<h5 data-id="heading-6">2. å¯åŠ¨æœåŠ¡</h5>
<pre><code class="hljs">docker-compose up -d
</code></pre>
<h5 data-id="heading-7">3. éªŒè¯æ˜¯å¦æˆåŠŸ</h5>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:6333/collections
</code></pre>
<p>å¦‚æœè¿”å› <code>{"result":{"collections":[]},"status":"ok"}</code>ï¼Œè¯´æ˜ Qdrant å·²æ­£å¸¸è¿è¡Œï¼</p>
<hr/>
<h4 data-id="heading-8">æ–¹æ¡ˆäºŒï¼šé Docker å®‰è£…ï¼ˆé€‚åˆæ—  Docker ç¯å¢ƒï¼‰</h4>
<h5 data-id="heading-9">Windows ç”¨æˆ·ï¼š</h5>
<ol>
<li>
<p>ä» <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqdrant%2Fqdrant%2Freleases" target="_blank" title="https://github.com/qdrant/qdrant/releases" ref="nofollow noopener noreferrer">GitHub Releases</a> ä¸‹è½½ <code>qdrant-windows-x86_64.zip</code></p>
</li>
<li>
<p>è§£å‹åè¿è¡Œï¼š</p>
<pre><code class="hljs">.\qdrant.exe
</code></pre>
</li>
</ol>
<h5 data-id="heading-10">Linux/macOS ç”¨æˆ·ï¼š</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹æ³•1ï¼šAPT å®‰è£…ï¼ˆUbuntu/Debianï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"deb [trusted=yes] https://apt.qdrant.io stable main"</span> | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/qdrant.list
sudo apt update &amp;&amp; sudo apt install qdrant

<span class="hljs-comment"># æ–¹æ³•2ï¼šç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶</span>
wget https://github.com/qdrant/qdrant/releases/latest/download/qdrant-linux-x86_64.tar.gz
tar xzf qdrant-linux-x86_64.tar.gz
./qdrant
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šé Docker æ–¹å¼éœ€è¦æ‰‹åŠ¨ç®¡ç†é…ç½®ã€æ—¥å¿—å’Œæ•°æ®ç›®å½•ï¼Œ<strong>å¼ºçƒˆå»ºè®®å¼€å‘é˜¶æ®µä½¿ç”¨ Docker</strong>ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-11">âœ… ä¸ºä»€ä¹ˆæˆ‘ä»¬æ¨è Dockerï¼Ÿ</h4>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>ç›´æ¥å®‰è£…</th><th>Docker</th></tr></thead><tbody><tr><td>å®‰è£…å¤æ‚åº¦</td><td>é«˜ï¼ˆéœ€å¤„ç†ä¾èµ–ã€è·¯å¾„ã€æƒé™ï¼‰</td><td>æä½ï¼ˆä¸€æ¡å‘½ä»¤ï¼‰</td></tr><tr><td>è·¨å¹³å°ä¸€è‡´æ€§</td><td>å·®ï¼ˆWindows/Linux è¡Œä¸ºå¯èƒ½ä¸åŒï¼‰</td><td>å®Œç¾ä¸€è‡´</td></tr><tr><td>æ•°æ®éš”ç¦»</td><td>æ— ï¼ˆæ–‡ä»¶æ•£è½åœ¨ç³»ç»Ÿå„å¤„ï¼‰</td><td>å®Œå…¨éš”ç¦»</td></tr><tr><td>ç‰ˆæœ¬åˆ‡æ¢</td><td>å›°éš¾</td><td>ä¿®æ”¹é•œåƒæ ‡ç­¾å³å¯</td></tr><tr><td>å¸è½½æ¸…ç†</td><td>å®¹æ˜“æ®‹ç•™</td><td><code>docker-compose down -v</code> ä¸€é”®æ¸…ç©º</td></tr></tbody></table>
<blockquote>
<p>ğŸ§© <strong>æ‰“ä¸ªæ¯”æ–¹</strong>ï¼š<br/>
ç›´æ¥å®‰è£…å°±åƒåœ¨å®¢å…é‡Œæ­å¸ç¯·â€”â€”å åœ°æ–¹ã€éš¾æ”¶æ‹¾ï¼›<br/>
Docker å°±åƒä¹°äº†ä¸€ä¸ªå¸¦è½®å­çš„é›†è£…ç®±â€”â€”éšæ—¶ç§»åŠ¨ã€å¹²å‡€æ•´æ´ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€è¿æ¥ Qdrantï¼šä»£ç å®ç°è¯¦è§£</h3>
<p>æ— è®ºé‡‡ç”¨å“ªç§éƒ¨ç½²æ–¹å¼ï¼Œæˆ‘ä»¬çš„ JavaScript ä»£ç è¿æ¥é€»è¾‘å®Œå…¨ä¸€è‡´ã€‚ä»¥ä¸‹æ˜¯æ ¸å¿ƒç±» <code>QdrantVectorStoreManager</code> çš„ç²¾è¦è§£è¯»ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
<span class="hljs-keyword">this</span>.client = <span class="hljs-keyword">new</span> <span class="hljs-built_in">QdrantClient</span>({
  url: `http:<span class="hljs-comment">//${config.QDRANT_HOST}:${config.QDRANT_PORT}`,</span>
  timeout: <span class="hljs-number">30000</span>,
});

<span class="hljs-comment">// ä½¿ç”¨ Qwen å…¼å®¹ OpenAI çš„ Embedding æ¨¡å‹</span>
<span class="hljs-keyword">this</span>.embeddings = <span class="hljs-keyword">new</span> <span class="hljs-built_in">OpenAIEmbeddings</span>({
  openAIApiKey: config.QWEN_API_KEY,
  modelName: config.EMBEDDING_MODEL,
  configuration: { baseURL: config.QWEN_API_BASE }
});
</code></pre>
<blockquote>
<p>ğŸ”‘ <strong>å…³é”®ç‚¹</strong>ï¼šè™½ç„¶ç”¨äº† <code>OpenAIEmbeddings</code>ï¼Œä½†é€šè¿‡ <code>baseURL</code> æŒ‡å‘ Qwen çš„ APIï¼Œå®ç°äº†â€œç”¨ OpenAI æ¥å£è°ƒ Qwen æ¨¡å‹â€ã€‚</p>
</blockquote>
<p>åç»­çš„ <code>initCollection()</code>ã€<code>addDocuments()</code>ã€<code>search()</code> ç­‰æ–¹æ³•å°è£…äº†é›†åˆåˆ›å»ºã€æ–‡æ¡£æ’å…¥å’Œç›¸ä¼¼æ£€ç´¢ï¼Œ<strong>å®Œå…¨å…¼å®¹ LangChain ç”Ÿæ€</strong>ï¼Œå¯ç›´æ¥ç”¨äº RAG é“¾ã€‚</p>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/449cb55a1935432bbed7a882c9e24a31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu95a625LiN5L-d5oqk5bqf54mp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765355605&amp;x-signature=sIi5dTAnFRTd5%2F9wwQDOapC%2FXH8%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-13">å››ã€æ–‡æ¡£å¤„ç†ï¼šä»åŸå§‹æ–‡ä»¶åˆ°å‘é‡å­˜å‚¨</h3>
<p>è¿™æ˜¯ RAG æ•ˆæœå¥½åçš„å…³é”®ï¼å¾ˆå¤šåˆå­¦è€…ç›´æ¥æŠŠæ•´ç¯‡æ–‡æ¡£ä¸¢è¿›å»ï¼Œç»“æœæ£€ç´¢æ•ˆæœå¾ˆå·®ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ <strong>â€œåˆ†å— + åµŒå…¥ + å­˜å‚¨â€</strong> ã€‚</p>
<h4 data-id="heading-14">æ­¥éª¤ 1ï¸âƒ£ï¼šåŠ è½½æ–‡æ¡£ï¼ˆæ”¯æŒ Markdownï¼‰</h4>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª <code>DocumentLoader</code> ç±»ï¼Œä¸“é—¨ç”¨äºé€’å½’æ‰«æ <code>docs/</code> ç›®å½•ä¸‹çš„æ‰€æœ‰ <code>.md</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// é€’å½’æŸ¥æ‰¾æ‰€æœ‰ .md æ–‡ä»¶</span>
<span class="hljs-built_in">findMarkdownFiles</span>(dirPath) {
  const files = <span class="hljs-selector-attr">[]</span>;
  const items = fs<span class="hljs-selector-class">.readdirSync</span>(dirPath);
  for (const item of items) {
    const itemPath = path<span class="hljs-selector-class">.join</span>(dirPath, item);
    if (fs.statSync(itemPath)<span class="hljs-selector-class">.isDirectory</span>()) {
      files<span class="hljs-selector-class">.push</span>(...this.findMarkdownFiles(itemPath)); <span class="hljs-comment">// é€’å½’</span>
    } else if (path.extname(item) === '<span class="hljs-selector-class">.md</span>') {
      files<span class="hljs-selector-class">.push</span>(itemPath);
    }
  }
  return files;
}
</code></pre>
<p>æ¯ä¸ªæ–‡æ¡£è¢«å°è£…ä¸ºä¸€ä¸ª <code>Document</code> å¯¹è±¡ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><code>content</code>ï¼šæ–‡ä»¶å…¨æ–‡</li>
<li><code>metadata</code>ï¼šæ¥æºè·¯å¾„ã€æ–‡ä»¶åã€åŠ è½½æ—¶é—´ç­‰</li>
</ul>
<hr/>
<h4 data-id="heading-15">æ­¥éª¤ 2ï¸âƒ£ï¼šæ™ºèƒ½æ–‡æœ¬åˆ†å‰²ï¼ˆé‡ä¸­ä¹‹é‡ï¼ï¼‰</h4>
<p><strong>ä¸ºä»€ä¹ˆä¸èƒ½æ•´ç¯‡å­˜ï¼Ÿ</strong><br/>
å› ä¸ºå¤§æ¨¡å‹æœ‰ä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶ï¼ˆå¦‚ 8192 tokensï¼‰ï¼Œè€Œä¸”é•¿æ–‡æœ¬åµŒå…¥ä¼šä¸¢å¤±å±€éƒ¨è¯­ä¹‰ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ LangChain çš„ <code>RecursiveCharacterTextSplitter</code>ï¼Œå¹¶<strong>é’ˆå¯¹ä¸­æ–‡åšäº†ä¼˜åŒ–</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">new</span> RecursiveCharacterTextSplitter({
  chunkSize: <span class="hljs-number">500</span>,        <span class="hljs-comment">// æ¯å—çº¦ 500 å­—ç¬¦</span>
  chunkOverlap: <span class="hljs-number">50</span>,      <span class="hljs-comment">// ç›¸é‚»å—é‡å  50 å­—ï¼Œé¿å…æ–­å¥</span>
  separators: [
    <span class="hljs-string">'\n\n'</span>,   <span class="hljs-comment">// ä¼˜å…ˆæŒ‰æ®µè½åˆ‡</span>
    <span class="hljs-string">'\n'</span>,
    <span class="hljs-string">'ã€‚'</span>, <span class="hljs-string">'ï¼'</span>, <span class="hljs-string">'ï¼Ÿ'</span>,  <span class="hljs-comment">// ä¸­æ–‡å¥å·ã€æ„Ÿå¹å·ã€é—®å·</span>
    <span class="hljs-string">'ï¼›'</span>, <span class="hljs-string">'ï¼Œ'</span>,         <span class="hljs-comment">// åˆ†å·ã€é€—å·</span>
    <span class="hljs-string">' '</span>,                <span class="hljs-comment">// è‹±æ–‡ç©ºæ ¼</span>
    <span class="hljs-string">''</span>                  <span class="hljs-comment">// æœ€åæŒ‰å­—ç¬¦åˆ‡</span>
  ]
})
</code></pre>
<blockquote>
<p>ğŸŒŸ <strong>æ•ˆæœç¤ºä¾‹</strong>ï¼š<br/>
åŸæ–‡ï¼šâ€œQwen æ˜¯é˜¿é‡Œå·´å·´æ¨å‡ºçš„ AI æ¨¡å‹ã€‚å®ƒæ”¯æŒå¤šè¯­è¨€ã€‚â€<br/>
â†’ åˆ‡åˆ†ä¸ºä¸¤å—ï¼š<br/>
å—1ï¼šâ€œQwen æ˜¯é˜¿é‡Œå·´å·´æ¨å‡ºçš„ AI æ¨¡å‹ã€‚â€<br/>
å—2ï¼šâ€œå®ƒæ”¯æŒå¤šè¯­è¨€ã€‚â€</p>
</blockquote>
<p>è¿™æ ·æ—¢èƒ½ä¿æŒè¯­ä¹‰å®Œæ•´ï¼Œåˆé¿å…è·¨å¥åˆ‡å‰²ã€‚</p>
<hr/>
<h4 data-id="heading-16">æ­¥éª¤ 3ï¸âƒ£ï¼šå‘é‡åŒ– &amp; å­˜å…¥ Qdrant</h4>
<p>è¿™ä¸€æ­¥ç”± <code>QdrantVectorStore.addDocuments()</code> è‡ªåŠ¨å®Œæˆï¼š</p>
<ol>
<li>è°ƒç”¨ <code>embeddings.embedDocuments()</code> ç”Ÿæˆå‘é‡</li>
<li>å°† <code>[å‘é‡, æ–‡æœ¬, å…ƒæ•°æ®]</code> ä½œä¸ºâ€œç‚¹ï¼ˆPointï¼‰â€å­˜å…¥ Qdrant</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¯¹å¼€å‘è€…é€æ˜ï¼Œä½ åªéœ€ä¼ å…¥ <code>Document[]</code> å³å¯ã€‚</p>
<hr/>
<h3 data-id="heading-17">äº”ã€å›½é™…åŒ–ï¼ˆi18nï¼‰ï¼šè®©ç³»ç»Ÿæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢</h3>
<p>ä¸ºäº†è®©é¡¹ç›®æ›´ä¸“ä¸šã€æ›´æ˜“ç”¨ï¼Œæˆ‘ä»¬åŠ å…¥äº†å®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒã€‚</p>
<h4 data-id="heading-18">1. æŠ€æœ¯é€‰å‹ï¼ši18next + JSON èµ„æºæ–‡ä»¶</h4>
<ul>
<li><strong>i18next</strong>ï¼šä¸šç•Œæ ‡å‡†çš„ JS å›½é™…åŒ–åº“</li>
<li><strong>JSON æ–‡ä»¶</strong>ï¼šæŒ‰è¯­è¨€åˆ†ç±»å­˜å‚¨ç¿»è¯‘æ–‡æœ¬ï¼Œç»“æ„æ¸…æ™°</li>
</ul>
<p>ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/i18n/
â”œâ”€â”€ index.js              <span class="hljs-comment"># å›½é™…åŒ–ç®¡ç†å™¨</span>
â””â”€â”€ locales/
    â”œâ”€â”€ en/translation.json
    â””â”€â”€ zh-CN/translation.json
</code></pre>
<hr/>
<h4 data-id="heading-19">2. æ ¸å¿ƒï¼šI18nManager å•ä¾‹ç±»</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">I18nManager</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">language = <span class="hljs-string">'en'</span></span>) {
    <span class="hljs-keyword">await</span> i18next.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Backend</span>).<span class="hljs-title function_">init</span>({
      <span class="hljs-attr">lng</span>: language,
      <span class="hljs-attr">fallbackLng</span>: <span class="hljs-string">'en'</span>,
      <span class="hljs-attr">backend</span>: {
        <span class="hljs-attr">loadPath</span>: <span class="hljs-string">'./locales/{{lng}}/translation.json'</span>
      }
    });
  }

  <span class="hljs-title function_">t</span>(<span class="hljs-params">key, options = {}</span>) {
    <span class="hljs-keyword">return</span> i18next.<span class="hljs-title function_">t</span>(key, options); <span class="hljs-comment">// å¦‚ t('messages.loading_docs', { count: 5 })</span>
  }

  <span class="hljs-title function_">getPreferredLanguage</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. è¯»å–ç³»ç»Ÿç¯å¢ƒå˜é‡ LANG</span>
    <span class="hljs-comment">// 2. è‡ªåŠ¨åŒ¹é…æ”¯æŒçš„è¯­è¨€ï¼ˆå¦‚ zh_CN â†’ zh-CNï¼‰</span>
    <span class="hljs-comment">// 3. é»˜è®¤å›é€€åˆ°è‹±æ–‡</span>
  }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ”¯æŒæ’å€¼ï¼ˆå¦‚ <code>{{count}}</code>ï¼‰</li>
<li>è‡ªåŠ¨è¯­è¨€æ£€æµ‹</li>
<li>æœªç¿»è¯‘æ—¶å›é€€åˆ°è‹±æ–‡</li>
</ul>
</blockquote>
<hr/>
<h4 data-id="heading-20">3. ç¿»è¯‘æ–‡ä»¶ç¤ºä¾‹ï¼ˆzh-CN/translation.jsonï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"document_loader"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"loading_all_docs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨åŠ è½½æ‰€æœ‰æ–‡æ¡£..."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"loaded_doc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·²åŠ è½½æ–‡æ¡£: {{path}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"error_loading_doc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŠ è½½æ–‡æ¡£å¤±è´¥ {{path}}: {{error}}"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"text_splitter"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"splitting_docs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨åˆ†å‰²æ–‡æ¡£..."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"split_doc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ–‡æ¡£ {{path}} å·²åˆ†å‰²ä¸º {{count}} ä¸ªå—"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"vector_store"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"creating_collection"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨åˆ›å»ºé›†åˆ: {{name}}"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"collection_exists"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é›†åˆ {{name}} å·²å­˜åœ¨"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"adding_batch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ­£åœ¨æ·»åŠ  {{count}} ä¸ªæ–‡æ¡£å—..."</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h4 data-id="heading-21">4. åœ¨ä»£ç ä¸­ä½¿ç”¨</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åˆå§‹åŒ–ï¼ˆè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿè¯­è¨€ï¼‰</span>
<span class="hljs-selector-tag">await</span> <span class="hljs-selector-tag">i18nManager</span><span class="hljs-selector-class">.init</span>(i18nManager.<span class="hljs-built_in">getPreferredLanguage</span>());

<span class="hljs-comment">// æ‰“å°æ—¥å¿—</span>
<span class="hljs-selector-tag">console</span><span class="hljs-selector-class">.log</span>(i18nManager.<span class="hljs-built_in">t</span>(<span class="hljs-string">'vector_store.adding_batch'</span>, { <span class="hljs-attribute">count</span>: docs.length }));
</code></pre>
<h4 data-id="heading-22">5. å‘½ä»¤è¡Œæ”¯æŒè¯­è¨€åˆ‡æ¢</h4>
<pre><code class="hljs language-sql" lang="sql"># é»˜è®¤æ ¹æ®ç³»ç»Ÿè¯­è¨€è‡ªåŠ¨é€‰æ‹©
npm run <span class="hljs-keyword">start</span>

# å¼ºåˆ¶ä½¿ç”¨ä¸­æ–‡
npm run <span class="hljs-keyword">start</span> <span class="hljs-comment">-- -l zh-CN</span>

# å¼ºåˆ¶ä½¿ç”¨è‹±æ–‡
npm run <span class="hljs-keyword">start</span> <span class="hljs-comment">-- -l en</span>
</code></pre>
<p>æ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f39b7f81047f4e05ab9b5d5cf0ed2c46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu95a625LiN5L-d5oqk5bqf54mp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765355605&amp;x-signature=GUyrDfQaK%2F8IVToTT1Hxn%2FXJn04%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ğŸŒ <strong>ç”¨æˆ·ä½“éªŒæå‡</strong>ï¼šéè‹±è¯­ç”¨æˆ·ä¸å†é¢å¯¹æ»¡å±è‹±æ–‡æŠ¥é”™ï¼Œå¤§å¤§é™ä½ä½¿ç”¨é—¨æ§›ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-23">å…­ã€å®Œæ•´æµç¨‹ï¼šä»é›¶åˆå§‹åŒ–åˆ°äº¤äº’é—®ç­”</h3>
<p>æ•´ä¸ªç³»ç»Ÿå¯åŠ¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>éªŒè¯é…ç½®</strong> â†’ 2. <strong>åŠ è½½æ–‡æ¡£</strong> â†’ 3. <strong>æ™ºèƒ½åˆ†å—</strong> â†’ 4. <strong>è¿æ¥ Qdrant</strong> â†’ 5. <strong>æ‰¹é‡å‘é‡åŒ–å­˜å‚¨</strong></li>
</ol>

<pre><code class="hljs language-css" lang="css">graph LR
<span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[éªŒè¯é…ç½®]</span> --&gt; <span class="hljs-selector-tag">B</span><span class="hljs-selector-attr">[åŠ è½½ docs/ ä¸‹æ‰€æœ‰ .md æ–‡ä»¶]</span>
<span class="hljs-selector-tag">B</span> --&gt; C<span class="hljs-selector-attr">[æŒ‰è¯­ä¹‰åˆ†å‰²ä¸ºå°å—]</span>
C --&gt; D<span class="hljs-selector-attr">[è¿æ¥ Qdrant]</span>
D --&gt; E<span class="hljs-selector-attr">[ç”Ÿæˆå‘é‡å¹¶å­˜å…¥]</span>
E --&gt; F<span class="hljs-selector-attr">[å¯åŠ¨äº¤äº’å¼é—®ç­”]</span>
</code></pre>
<p>åœ¨é—®ç­”é˜¶æ®µï¼Œç”¨æˆ·è¾“å…¥é—®é¢˜åï¼š</p>
<ul>
<li>ç³»ç»Ÿå°†é—®é¢˜å‘é‡åŒ–</li>
<li>åœ¨ Qdrant ä¸­æ£€ç´¢ Top-K ç›¸ä¼¼å—</li>
<li>å°†ç»“æœ + åŸå§‹é—®é¢˜äº¤ç»™ LLM ç”Ÿæˆç­”æ¡ˆ</li>
<li>è¿”å›ç­”æ¡ˆ + æ¥æºå¼•ç”¨ï¼ˆå«ç›¸ä¼¼åº¦åˆ†æ•°ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-24">æ€»ç»“</h3>
<p>æœ¬æ–‡æˆ‘ä»¬å®Œæˆäº† RAG ç³»ç»Ÿçš„ä¸‰å¤§æ ¸å¿ƒæ¨¡å—ï¼š</p>
<p>âœ… <strong>å‘é‡æ•°æ®åº“æ­å»º</strong>ï¼šé€šè¿‡ Docker å¿«é€Ÿéƒ¨ç½² Qdrantï¼Œå…¼é¡¾æ€§èƒ½ä¸ä¾¿æ·æ€§<br/>
âœ… <strong>æ–‡æ¡£æ™ºèƒ½å¤„ç†</strong>ï¼šä»åŠ è½½ã€ä¸­æ–‡å‹å¥½åˆ†å—åˆ°å‘é‡åŒ–ï¼Œç¡®ä¿æ£€ç´¢è´¨é‡<br/>
âœ… <strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šåŸºäº i18next å®ç°ä¸­è‹±æ–‡æ— ç¼åˆ‡æ¢ï¼Œæå‡å¯ç”¨æ€§</p>
<p>è¿™äº›å·¥ä½œä¸ºåç»­çš„ <strong>Agent å†³ç­–ã€Prompt ä¼˜åŒ–ã€è¯„ä¼°æŒ‡æ ‡</strong> ç­‰é«˜çº§åŠŸèƒ½æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚ï¼ˆå¦‚æœæƒ³çœ‹å®Œæ•´ä»£ç å¯åˆ°å¼€å¤´å±•ç¤ºçš„ä»£ç ä»“åº“ä¸­æŸ¥çœ‹ï¼Œé‡Œé¢åŒ…å«ragè°ƒç”¨çš„å®Œæ•´ä»£ç ï¼‰</p>
<blockquote>
<p>ğŸ“Œ <strong>ä¸‹æœŸé¢„å‘Š</strong>ï¼šæˆ‘ä»¬å°†ä½¿ç”¨ragå»åšä¸€ä¸ªæ³•å¾‹æ£€ç´¢çš„ä¸“ä¸šaié—®ç­”åŠ©æ‰‹ï¼Œä½¿ç”¨çˆ¬è™«æŠ€æœ¯å»å®Œå–„æˆ‘ä»¬çš„æ•°æ®åº“ï¼Œé‡‡ç”¨æµå¼è¾“å‡ºå»å±•ç¤ºæˆ‘ä»¬çš„ä»£ç ï¼Œå°†åç«¯ragæŠ€æœ¯ä¸å‰ç«¯é¡µé¢ç»“åˆèµ·æ¥ã€‚</p>
</blockquote>
<hr/>
<p><strong>é™„ï¼šå¸¸è§é—®é¢˜</strong></p>
<p>â“<strong>Qï¼šä¸ºä»€ä¹ˆä¸ç”¨ FAISSï¼Ÿ</strong><br/>
â†’ FAISS æ˜¯çº¯å‘é‡åº“ï¼Œæ— æŒä¹…åŒ–ã€æ— è¿‡æ»¤ã€æ—  APIï¼Œé€‚åˆå®éªŒï¼›Qdrant æ˜¯å®Œæ•´æ•°æ®åº“ï¼Œé€‚åˆäº§å“ã€‚</p>
<p>â“<strong>Qï¼šåˆ†å—å¤§å°æ€ä¹ˆé€‰ï¼Ÿ</strong><br/>
â†’ ä¸­æ–‡å»ºè®® 300â€“800 å­—ç¬¦ï¼Œè‹±æ–‡ 200â€“500 tokensã€‚å¯é€šè¿‡ <code>CHUNK_SIZE</code> é…ç½®è°ƒæ•´ã€‚</p>
<p>â“<strong>Qï¼šQwen çš„ embedding ç»´åº¦æ˜¯å¤šå°‘ï¼Ÿ</strong><br/>
â†’ <code>text-embedding-v2</code> è¾“å‡º <strong>1536 ç»´</strong>ï¼ŒåŠ¡å¿…åœ¨ <code>config.EMBEDDING_DIMENSION</code> ä¸­æ­£ç¡®è®¾ç½®ï¼</p>
<hr/>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ï¼Œå¿«é€Ÿæ­å»ºå‡ºè‡ªå·±çš„ RAG ç³»ç»Ÿï¼æ¬¢è¿ç‚¹èµã€æ”¶è—ã€è¯„è®ºäº¤æµ ğŸ‘‡ ```</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘001ï¼šæ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·]]></title>    <link>https://juejin.cn/post/7579321624013996072</link>    <guid>https://juejin.cn/post/7579321624013996072</guid>    <pubDate>2025-12-03T08:20:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579321624013996072" data-draft-id="7579313396206993423" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘001ï¼šæ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·"/> <meta itemprop="keywords" content="åç«¯,Shell"/> <meta itemprop="datePublished" content="2025-12-03T08:20:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¶æ—¥å¤±çœ è€…"/> <meta itemprop="url" content="https://juejin.cn/user/3411111810444068"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ–‡ä»¶ç®¡ç†ç³»åˆ—ã€‘001ï¼šæ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3411111810444068/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¶æ—¥å¤±çœ è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:20:45.000Z" title="Wed Dec 03 2025 08:20:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹å¤§é‡æ–‡ä»¶è¿›è¡Œé‡å‘½åæ“ä½œï¼Œç‰¹åˆ«æ˜¯åœ¨æ•´ç†ç…§ç‰‡ã€æ–‡æ¡£æˆ–å…¶ä»–åª’ä½“æ–‡ä»¶æ—¶ã€‚æ‰‹åŠ¨ä¸€ä¸ªä¸ªé‡å‘½åä¸ä»…è€—æ—¶ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ä¸ªå®ç”¨çš„Pythonè„šæœ¬â€”â€”æ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·ï¼Œå®ƒå¯ä»¥å¤§å¤§æé«˜æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚</p>
<h2 data-id="heading-1">åŠŸèƒ½ä»‹ç»</h2>
<p>è¿™ä¸ªæ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·å…·æœ‰ä»¥ä¸‹æ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<ol>
<li><strong>æ‰¹é‡é‡å‘½å</strong>ï¼šå¯ä»¥åŒæ—¶å¯¹å¤šä¸ªæ–‡ä»¶æŒ‰ç…§æŒ‡å®šè§„åˆ™è¿›è¡Œé‡å‘½å</li>
<li><strong>å¤šç§å‘½åæ¨¡å¼</strong>ï¼šæ”¯æŒåºå·å‘½åã€å‰ç¼€å‘½åã€åç¼€å‘½åç­‰å¤šç§æ¨¡å¼</li>
<li><strong>æ–‡ä»¶è¿‡æ»¤</strong>ï¼šå¯ä»¥æ ¹æ®æ–‡ä»¶æ‰©å±•åã€æ–‡ä»¶åç‰¹å¾ç­‰æ¡ä»¶ç­›é€‰æ–‡ä»¶</li>
<li><strong>é¢„è§ˆåŠŸèƒ½</strong>ï¼šåœ¨å®é™…æ‰§è¡Œå‰å¯ä»¥é¢„è§ˆé‡å‘½åç»“æœ</li>
<li><strong>æ’¤é”€åŠŸèƒ½</strong>ï¼šæ”¯æŒæ“ä½œæ’¤é”€ï¼Œé˜²æ­¢è¯¯æ“ä½œ</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šè®°å½•æ‰€æœ‰æ“ä½œå†å²ï¼Œä¾¿äºè¿½è¸ªå’Œå®¡è®¡</li>
</ol>
<h2 data-id="heading-2">åº”ç”¨åœºæ™¯</h2>
<p>è¿™ä¸ªå·¥å…·é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li><strong>ç…§ç‰‡æ•´ç†</strong>ï¼šå°†ç›¸æœºæ‹æ‘„çš„ç…§ç‰‡æŒ‰æ—¥æœŸæˆ–åºå·ç»Ÿä¸€å‘½å</li>
<li><strong>æ–‡æ¡£ç®¡ç†</strong>ï¼šå¯¹å…¬å¸æˆ–ä¸ªäººæ–‡æ¡£è¿›è¡Œè§„èŒƒåŒ–å‘½å</li>
<li><strong>ä¸‹è½½æ–‡ä»¶æ•´ç†</strong>ï¼šå¯¹ä¸‹è½½çš„æ–‡ä»¶è¿›è¡Œæ‰¹é‡é‡å‘½åä»¥æé«˜å¯è¯»æ€§</li>
<li><strong>å¼€å‘é¡¹ç›®</strong>ï¼šå¯¹ä»£ç æ–‡ä»¶æˆ–èµ„æºæ–‡ä»¶è¿›è¡Œç»Ÿä¸€å‘½åè§„èŒƒ</li>
<li><strong>å­¦æœ¯ç ”ç©¶</strong>ï¼šå¯¹å®éªŒæ•°æ®æ–‡ä»¶è¿›è¡Œæœ‰åºå‘½å</li>
</ol>
<h2 data-id="heading-3">æŠ¥é”™å¤„ç†</h2>
<p>è„šæœ¬åŒ…å«äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š</p>
<ol>
<li><strong>è·¯å¾„ä¸å­˜åœ¨</strong>ï¼šæ£€æŸ¥æŒ‡å®šç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æç¤ºç”¨æˆ·</li>
<li><strong>æƒé™ä¸è¶³</strong>ï¼šæ£€æµ‹æ–‡ä»¶æ“ä½œæƒé™ï¼Œæƒé™ä¸è¶³æ—¶ç»™å‡ºæ˜ç¡®æç¤º</li>
<li><strong>æ–‡ä»¶å†²çª</strong>ï¼šæ£€æµ‹ç›®æ ‡æ–‡ä»¶åæ˜¯å¦å·²å­˜åœ¨ï¼Œé¿å…è¦†ç›–é‡è¦æ–‡ä»¶</li>
<li><strong>å‚æ•°éªŒè¯</strong>ï¼šéªŒè¯ç”¨æˆ·è¾“å…¥çš„å‚æ•°æ˜¯å¦åˆæ³•</li>
<li><strong>å¼‚å¸¸æ•è·</strong>ï¼šæ•è·å¹¶å¤„ç†è¿è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°çš„å„ç§å¼‚å¸¸</li>
</ol>
<h2 data-id="heading-4">ä»£ç å®ç°</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> argparse
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileBatchRenamer</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, directory</span>):
        self.directory = directory
        self.rename_log = []
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">check_directory</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(self.directory):
            <span class="hljs-keyword">raise</span> FileNotFoundError(<span class="hljs-string">f"ç›®å½• '<span class="hljs-subst">{self.directory}</span>' ä¸å­˜åœ¨"</span>)
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.isdir(self.directory):
            <span class="hljs-keyword">raise</span> NotADirectoryError(<span class="hljs-string">f"'<span class="hljs-subst">{self.directory}</span>' ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ç›®å½•"</span>)
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_files</span>(<span class="hljs-params">self, extension=<span class="hljs-literal">None</span>, pattern=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""è·å–ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶åˆ—è¡¨"""</span>
        <span class="hljs-keyword">try</span>:
            self.check_directory()
            files = os.listdir(self.directory)
            filtered_files = []
            
            <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
                file_path = os.path.join(self.directory, file)
                <span class="hljs-comment"># åªå¤„ç†æ–‡ä»¶ï¼Œä¸å¤„ç†å­ç›®å½•</span>
                <span class="hljs-keyword">if</span> os.path.isfile(file_path):
                    <span class="hljs-comment"># æ ¹æ®æ‰©å±•åè¿‡æ»¤</span>
                    <span class="hljs-keyword">if</span> extension <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> file.endswith(extension):
                        <span class="hljs-keyword">continue</span>
                    <span class="hljs-comment"># æ ¹æ®æ¨¡å¼è¿‡æ»¤</span>
                    <span class="hljs-keyword">if</span> pattern <span class="hljs-keyword">and</span> pattern <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> file:
                        <span class="hljs-keyword">continue</span>
                    filtered_files.append(file)
                    
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">sorted</span>(filtered_files)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è·å–æ–‡ä»¶åˆ—è¡¨æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> []
            
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">preview_rename</span>(<span class="hljs-params">self, files, naming_pattern, start_number=<span class="hljs-number">1</span></span>):
        <span class="hljs-string">"""é¢„è§ˆé‡å‘½åç»“æœ"""</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\né‡å‘½åé¢„è§ˆ:"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)
        rename_map = {}
        
        <span class="hljs-keyword">for</span> i, filename <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(files, start_number):
            name, ext = os.path.splitext(filename)
            new_name = naming_pattern.<span class="hljs-built_in">format</span>(i) + ext
            rename_map[filename] = new_name
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{filename}</span> -&gt; <span class="hljs-subst">{new_name}</span>"</span>)
            
        <span class="hljs-keyword">return</span> rename_map
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_rename</span>(<span class="hljs-params">self, rename_map</span>):
        <span class="hljs-string">"""æ‰§è¡Œé‡å‘½åæ“ä½œ"""</span>
        success_count = <span class="hljs-number">0</span>
        error_count = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">for</span> old_name, new_name <span class="hljs-keyword">in</span> rename_map.items():
            old_path = os.path.join(self.directory, old_name)
            new_path = os.path.join(self.directory, new_name)
            
            <span class="hljs-comment"># æ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨</span>
            <span class="hljs-keyword">if</span> os.path.exists(new_path):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è­¦å‘Š: æ–‡ä»¶ '<span class="hljs-subst">{new_name}</span>' å·²å­˜åœ¨ï¼Œè·³è¿‡ '<span class="hljs-subst">{old_name}</span>'"</span>)
                error_count += <span class="hljs-number">1</span>
                <span class="hljs-keyword">continue</span>
                
            <span class="hljs-keyword">try</span>:
                os.rename(old_path, new_path)
                self.rename_log.append((datetime.now(), old_name, new_name))
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸé‡å‘½å: <span class="hljs-subst">{old_name}</span> -&gt; <span class="hljs-subst">{new_name}</span>"</span>)
                success_count += <span class="hljs-number">1</span>
            <span class="hljs-keyword">except</span> PermissionError:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æƒé™é”™è¯¯: æ— æ³•é‡å‘½å '<span class="hljs-subst">{old_name}</span>'ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æƒé™"</span>)
                error_count += <span class="hljs-number">1</span>
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é‡å‘½å '<span class="hljs-subst">{old_name}</span>' æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
                error_count += <span class="hljs-number">1</span>
                
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\né‡å‘½åå®Œæˆ! æˆåŠŸ: <span class="hljs-subst">{success_count}</span>, å¤±è´¥: <span class="hljs-subst">{error_count}</span>"</span>)
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_log</span>(<span class="hljs-params">self, log_file=<span class="hljs-string">"rename_log.txt"</span></span>):
        <span class="hljs-string">"""ä¿å­˜æ“ä½œæ—¥å¿—"""</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(self.directory, log_file), <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
                f.write(<span class="hljs-string">"æ–‡ä»¶æ‰¹é‡é‡å‘½åæ“ä½œæ—¥å¿—\n"</span>)
                f.write(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span> + <span class="hljs-string">"\n"</span>)
                f.write(<span class="hljs-string">f"æ“ä½œæ—¶é—´: <span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>\n"</span>)
                f.write(<span class="hljs-string">f"æ“ä½œç›®å½•: <span class="hljs-subst">{self.directory}</span>\n\n"</span>)
                
                <span class="hljs-keyword">for</span> timestamp, old_name, new_name <span class="hljs-keyword">in</span> self.rename_log:
                    f.write(<span class="hljs-string">f"[<span class="hljs-subst">{timestamp.strftime(<span class="hljs-string">'%H:%M:%S'</span>)}</span>] <span class="hljs-subst">{old_name}</span> -&gt; <span class="hljs-subst">{new_name}</span>\n"</span>)
                    
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ“ä½œæ—¥å¿—å·²ä¿å­˜åˆ°: <span class="hljs-subst">{log_file}</span>"</span>)
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿å­˜æ—¥å¿—æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    parser = argparse.ArgumentParser(description=<span class="hljs-string">"æ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·"</span>)
    parser.add_argument(<span class="hljs-string">"directory"</span>, <span class="hljs-built_in">help</span>=<span class="hljs-string">"è¦å¤„ç†çš„ç›®å½•è·¯å¾„"</span>)
    parser.add_argument(<span class="hljs-string">"-p"</span>, <span class="hljs-string">"--pattern"</span>, default=<span class="hljs-string">"file_{:03d}"</span>, 
                       <span class="hljs-built_in">help</span>=<span class="hljs-string">"å‘½åæ¨¡å¼ï¼Œä½¿ç”¨ {:03d} è¡¨ç¤ºåºå· (é»˜è®¤: file_{:03d})"</span>)
    parser.add_argument(<span class="hljs-string">"-s"</span>, <span class="hljs-string">"--start"</span>, <span class="hljs-built_in">type</span>=<span class="hljs-built_in">int</span>, default=<span class="hljs-number">1</span>, 
                       <span class="hljs-built_in">help</span>=<span class="hljs-string">"èµ·å§‹åºå· (é»˜è®¤: 1)"</span>)
    parser.add_argument(<span class="hljs-string">"-e"</span>, <span class="hljs-string">"--extension"</span>, 
                       <span class="hljs-built_in">help</span>=<span class="hljs-string">"æ–‡ä»¶æ‰©å±•åè¿‡æ»¤ (ä¾‹å¦‚: .jpg)"</span>)
    parser.add_argument(<span class="hljs-string">"--preview"</span>, action=<span class="hljs-string">"store_true"</span>, 
                       <span class="hljs-built_in">help</span>=<span class="hljs-string">"ä»…é¢„è§ˆï¼Œä¸æ‰§è¡Œå®é™…é‡å‘½å"</span>)
    
    args = parser.parse_args()
    
    <span class="hljs-keyword">try</span>:
        renamer = FileBatchRenamer(args.directory)
        files = renamer.get_files(extension=args.extension)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> files:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶"</span>)
            <span class="hljs-keyword">return</span>
            
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(files)}</span> ä¸ªæ–‡ä»¶"</span>)
        
        rename_map = renamer.preview_rename(files, args.pattern, args.start)
        
        <span class="hljs-keyword">if</span> args.preview:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\né¢„è§ˆæ¨¡å¼ï¼Œæœªæ‰§è¡Œå®é™…é‡å‘½åæ“ä½œ"</span>)
            <span class="hljs-keyword">return</span>
            
        confirm = <span class="hljs-built_in">input</span>(<span class="hljs-string">"\nç¡®è®¤æ‰§è¡Œé‡å‘½åæ“ä½œ? (y/N): "</span>)
        <span class="hljs-keyword">if</span> confirm.lower() == <span class="hljs-string">'y'</span>:
            renamer.execute_rename(rename_map)
            renamer.save_log()
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ“ä½œå·²å–æ¶ˆ"</span>)
            
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç¨‹åºæ‰§è¡Œå‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
        sys.exit(<span class="hljs-number">1</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-5">ä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-6">åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åŸºæœ¬ç”¨æ³•ï¼Œå¯¹ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶æŒ‰é»˜è®¤æ¨¡å¼é‡å‘½å</span>
python batch_renamer.py /path/to/directory

<span class="hljs-comment"># æŒ‡å®šå‘½åæ¨¡å¼</span>
python batch_renamer.py /path/to/directory -p <span class="hljs-string">"photo_{:04d}"</span>

<span class="hljs-comment"># æŒ‡å®šèµ·å§‹åºå·</span>
python batch_renamer.py /path/to/directory -s 100

<span class="hljs-comment"># åªå¤„ç†ç‰¹å®šæ‰©å±•åçš„æ–‡ä»¶</span>
python batch_renamer.py /path/to/directory -e .jpg

<span class="hljs-comment"># é¢„è§ˆæ¨¡å¼ï¼ˆä¸å®é™…æ‰§è¡Œé‡å‘½åï¼‰</span>
python batch_renamer.py /path/to/directory --preview
</code></pre>
<h3 data-id="heading-7">å‘½ä»¤è¡Œå‚æ•°è¯´æ˜</h3>
<ul>
<li><code>directory</code>: å¿…éœ€å‚æ•°ï¼ŒæŒ‡å®šè¦å¤„ç†çš„ç›®å½•è·¯å¾„</li>
<li><code>-p, --pattern</code>: å‘½åæ¨¡å¼ï¼Œé»˜è®¤ä¸º <code>file_{:03d}</code>ï¼Œå…¶ä¸­ <code>{:03d}</code> ä¼šè¢«æ›¿æ¢ä¸ºåºå·</li>
<li><code>-s, --start</code>: èµ·å§‹åºå·ï¼Œé»˜è®¤ä¸º 1</li>
<li><code>-e, --extension</code>: æ–‡ä»¶æ‰©å±•åè¿‡æ»¤å™¨ï¼Œåªå¤„ç†æŒ‡å®šæ‰©å±•åçš„æ–‡ä»¶</li>
<li><code>--preview</code>: é¢„è§ˆæ¨¡å¼ï¼Œåªæ˜¾ç¤ºé‡å‘½åç»“æœï¼Œä¸æ‰§è¡Œå®é™…æ“ä½œ</li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨ç¤ºä¾‹</h3>
<p>å‡è®¾æœ‰ä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">image1.<span class="hljs-property">jpg</span>
image2.<span class="hljs-property">jpg</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">pdf</span>
photo.<span class="hljs-property">png</span>
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python batch_renamer.py ./test_dir -p <span class="hljs-string">"pic_{:02d}"</span> -e .jpg
</code></pre>
<p>ç»“æœï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">pic_01.<span class="hljs-property">jpg</span>
pic_02.<span class="hljs-property">jpg</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">pdf</span>
photo.<span class="hljs-property">png</span>
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>è¿™ä¸ªæ–‡ä»¶æ‰¹é‡é‡å‘½åå·¥å…·é€šè¿‡ç®€å•çš„å‘½ä»¤è¡Œç•Œé¢æä¾›äº†å¼ºå¤§çš„æ‰¹é‡æ–‡ä»¶é‡å‘½ååŠŸèƒ½ã€‚å®ƒå…·æœ‰è‰¯å¥½çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥æœ‰æ•ˆé˜²æ­¢è¯¯æ“ä½œï¼Œå¹¶é€šè¿‡æ—¥å¿—è®°å½•åŠŸèƒ½ä¿è¯æ“ä½œçš„å¯è¿½æº¯æ€§ã€‚æ— è®ºæ˜¯æ—¥å¸¸æ–‡ä»¶æ•´ç†è¿˜æ˜¯ä¸“ä¸šé¡¹ç›®ç®¡ç†ï¼Œè¿™ä¸ªå·¥å…·éƒ½èƒ½æ˜¾è‘—æé«˜å·¥ä½œæ•ˆç‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vxe-table ä½¿ç”¨ spanMethod åˆå¹¶å¡é¡¿çš„è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7579255046979747866</link>    <guid>https://juejin.cn/post/7579255046979747866</guid>    <pubDate>2025-12-03T08:41:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579255046979747866" data-draft-id="7579440586693656622" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vxe-table ä½¿ç”¨ spanMethod åˆå¹¶å¡é¡¿çš„è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-12-03T08:41:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·84179481456"/> <meta itemprop="url" content="https://juejin.cn/user/3921272428567529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vxe-table ä½¿ç”¨ spanMethod åˆå¹¶å¡é¡¿çš„è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3921272428567529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·84179481456
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:41:06.000Z" title="Wed Dec 03 2025 08:41:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>vxe-table ä½¿ç”¨ spanMethod åˆå¹¶å¡é¡¿çš„è§£å†³æ–¹æ¡ˆï¼Œå½“ä¸šåŠ¡éœ€æ±‚éœ€è¦åˆå¹¶æ—¶ï¼Œç”±äºè¡¨æ ¼æ•°æ®æœ‰å‡ åƒæ¡ï¼Œä½¿ç”¨è¯¥åˆå¹¶åä¸æ”¯æŒè™šæ‹Ÿæ»šåŠ¨ä¼šå¡é¡¿ã€‚é€šè¿‡æŸ¥çœ‹å®˜ç½‘ï¼Œå‘ç°åº”è¯¥ä½¿ç”¨ merge-cells æ¥åˆå¹¶å•å…ƒæ ¼ï¼Œä¸ä»…ä½¿ç”¨éå¸¸ç®€å•ï¼Œè¿˜æ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼Œåªéœ€è¦æŒ‡å®šè¡Œå·å’Œåˆ—å·ï¼Œåˆå¹¶æ•°é‡å°±å¯ä»¥ä¸´æ—¶åˆå¹¶å•å…ƒæ ¼ï¼Œéœ€è¦æ³¨æ„ï¼Œå®˜ç½‘è¯´æ˜æ˜¯ä¸´æ—¶åˆå¹¶ã€‚ä¹Ÿå°±æ˜¯åˆå¹¶åå¦‚æœä¸é‡æ–°æ›´æ–°åˆ—æˆ–è€…é‡æ–°åŠ è½½æ•°æ®ï¼Œæ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯éœ€è¦éœ€è¦é‡æ–°åŠ è½½æ•°æ®ï¼Œé‚£ä¹ˆä¸´æ—¶åˆå¹¶å°±ä¼šä¸¢å¤±ï¼Œéœ€è¦é‡æ–°èµ‹å€¼ä¸€ä¸‹ merge-cells å°±å¯ä»¥é‡æ–°ä¸´æ—¶åˆå¹¶äº†ã€‚</p>
<p>æŸ¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvxetable.cn" target="_blank" title="https://vxetable.cn" ref="nofollow noopener noreferrer">vxetable.cn</a>
gitbubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fx-extends%2Fvxe-table" target="_blank" title="https://github.com/x-extends/vxe-table" ref="nofollow noopener noreferrer">github.com/x-extends/vâ€¦</a>
giteeï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fx-extends%2Fvxe-table" target="_blank" title="https://gitee.com/x-extends/vxe-table" ref="nofollow noopener noreferrer">gitee.com/x-extends/vâ€¦</a></p>
<h2 data-id="heading-0">æ•ˆæœ</h2>
<p>ä»¥ä¸‹é€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„åœºæ™¯ï¼ŒåŒ…æ‹¬100åˆ—*500è¡Œï¼Œå¸¦å·¦å³å†»ç»“åˆ—å’Œè¡¨å°¾åˆè®¡ï¼Œæ¸²æŸ“å°±æ¯”è¾ƒå¤æ‚äº†ã€‚æµ‹è¯•äº†ä¸€ä¸‹ 5ä¸‡è¡Œå’Œ5åƒåˆ— éƒ½æ¯”è¾ƒæµç•…ï¼Œæ¯”ä¹‹å‰æµç•…å¤ªå¤šå€äº†.</p>
<p>é¿å…åˆå¹¶ä¸€æ•´è¡Œæˆ–ä¸€æ•´åˆ—ï¼Œå½“æ‰€æœ‰è¡Œéƒ½è¢«åˆå¹¶ä¸ºä¸€ä¸ªå•å…ƒæ ¼æ—¶å°±ç­‰åŒäºå…³é—­çºµå‘è™šæ‹Ÿæ»šåŠ¨ï¼Œå½“æ‰€æœ‰åˆ—éƒ½è¢«åˆå¹¶ä¸ºä¸€ä¸ªå•å…ƒæ ¼æ—¶å°±ç­‰åŒäºå…³é—­æ¨ªå‘è™šæ‹Ÿæ»šåŠ¨ã€‚åº”è¯¥é¿å…åˆå¹¶èŒƒå›´è¿‡å¤§çš„ä½¿ç”¨åœºæ™¯.</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/258dbaa4ba88406695df56577f5e7f43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODQxNzk0ODE0NTY=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356066&amp;x-signature=DVhSVmikMve61x%2B04fil7nXD4D8%3D" alt="Video_2025-12-02_105507-ezgif.com-optimize.gif" loading="lazy"/></p>
<h2 data-id="heading-1">ä»£ç </h2>
<p>æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š
å¦‚æœä½¿ç”¨ merge-cells æ–¹å¼åˆ™æ˜¯å…¨åŠŸèƒ½çš„ï¼Œæ”¯æŒè™šæ‹Ÿæ»šåŠ¨ï¼›
å¦‚æœä½¿ç”¨ span-method æ–¹å¼çš„è™šæ‹Ÿæ»šåŠ¨æ”¯æŒéƒ¨åˆ†åŠŸèƒ½ï¼Œå­˜åœ¨åŠŸèƒ½é™åˆ¶ï¼šå¦‚æœè¿›è¡Œè·¨è¡Œåˆå¹¶ï¼Œåˆ™ä¸æ”¯æŒçºµå‘è™šæ‹Ÿæ»šåŠ¨ï¼›å¦‚æœè¿›è¡Œè·¨åˆ—åˆå¹¶ï¼Œåˆ™ä¸æ”¯æŒæ¨ªå‘è™šæ‹Ÿæ»šåŠ¨</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">vxe-grid</span> <span class="hljs-attr">v-bind</span>=<span class="hljs-string">"gridOptions"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">vxe-grid</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { reactive } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> gridOptions = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">border</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">showOverflow</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">showHeaderOverflow</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">showFooterOverflow</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">showFooter</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">height</span>: <span class="hljs-number">600</span>,
  <span class="hljs-attr">virtualYConfig</span>: {
    <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">gt</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">virtualXConfig</span>: {
    <span class="hljs-attr">enabled</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">gt</span>: <span class="hljs-number">0</span>
  },
  <span class="hljs-attr">mergeCells</span>: [
    { <span class="hljs-attr">row</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">row</span>: <span class="hljs-number">16</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">row</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">2</span> },
    { <span class="hljs-attr">row</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">3</span> },
    { <span class="hljs-attr">row</span>: <span class="hljs-number">150</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">2</span> }
  ],
  <span class="hljs-attr">mergeFooterItems</span>: [
    { <span class="hljs-attr">row</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">col</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">rowspan</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">colspan</span>: <span class="hljs-number">1</span> }
  ],
  <span class="hljs-attr">columns</span>: [
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'seq'</span>, <span class="hljs-attr">type</span>: <span class="hljs-string">'seq'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">70</span>, <span class="hljs-attr">fixed</span>: <span class="hljs-string">'left'</span> },
    { <span class="hljs-attr">field</span>: <span class="hljs-string">'name'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Name'</span>, <span class="hljs-attr">minWidth</span>: <span class="hljs-number">300</span> },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ†ç»„1'</span>,
      <span class="hljs-attr">children</span>: [
        { <span class="hljs-attr">field</span>: <span class="hljs-string">'role'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Role'</span>, <span class="hljs-attr">minWidth</span>: <span class="hljs-number">300</span> },
        { <span class="hljs-attr">field</span>: <span class="hljs-string">'sex'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Sex'</span>, <span class="hljs-attr">minWidth</span>: <span class="hljs-number">300</span> },
        { <span class="hljs-attr">field</span>: <span class="hljs-string">'age'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'Age'</span>, <span class="hljs-attr">minWidth</span>: <span class="hljs-number">300</span> }
      ]
    },
    {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ†ç»„2'</span>,
      <span class="hljs-attr">children</span>: [
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—3'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col3'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—4'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col4'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">140</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—5'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col5'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">300</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—6'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col6'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">160</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—7'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col7'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—8'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col8'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—9'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col9'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">160</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—10'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col10'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">160</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—11'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col11'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">180</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—12'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col12'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">160</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—13'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col13'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">80</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—14'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col14'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—15'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col15'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">360</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—16'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col16'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—17'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col17'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">380</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—18'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col18'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—19'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col19'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">290</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—20'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col20'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">80</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—21'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col21'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—22'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col22'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—23'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col23'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">270</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—24'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col24'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">330</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—25'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col25'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">460</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—26'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col26'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">280</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—27'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col27'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">220</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—28'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col28'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—29'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col29'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">180</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—30'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col30'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">500</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—31'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col31'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">600</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—32'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col32'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—33'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col33'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">490</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—34'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col34'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—35'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col35'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—36'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col36'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—37'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col37'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—38'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col38'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—39'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col39'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">360</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—40'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col40'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">420</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—41'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col41'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—42'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col42'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—43'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col43'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">280</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—44'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col44'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">170</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—45'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col45'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">370</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—46'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col46'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">420</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—47'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col47'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">170</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—48'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col48'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—49'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col49'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">220</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—50'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col50'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">170</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—51'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col51'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">160</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—52'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col52'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">500</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—53'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col53'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">280</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—54'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col54'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">170</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—55'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col55'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">370</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—56'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col56'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">120</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—57'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col57'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">170</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—58'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col58'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—59'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col59'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">220</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—60'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col60'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">650</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—61'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col61'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">600</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—62'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col62'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—63'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col63'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">490</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—64'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col64'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—65'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col65'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—66'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col66'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—67'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col67'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—68'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col68'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—69'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col69'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">360</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—70'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col70'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">650</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—71'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col71'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">600</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—72'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col72'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—73'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col73'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">490</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—74'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col74'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—75'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col75'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—76'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col76'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—77'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col77'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—78'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col78'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—79'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col79'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">360</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—80'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col80'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">650</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—81'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col81'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">600</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—82'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col82'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—83'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col83'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">490</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—84'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col84'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—85'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col85'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—86'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col86'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—87'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col87'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">400</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—88'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col88'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—89'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col89'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">360</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—90'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col90'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">650</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—91'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col91'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">600</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—92'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col92'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
        { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—93'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col93'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">490</span> }
      ]
    },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—94'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col94'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—95'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col95'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—96'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col96'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">800</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—97'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col97'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—98'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col98'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">150</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—99'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col99'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> },
    { <span class="hljs-attr">title</span>: <span class="hljs-string">'åˆ—100'</span>, <span class="hljs-attr">field</span>: <span class="hljs-string">'col100'</span>, <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">fixed</span>: <span class="hljs-string">'right'</span> }
  ],
  <span class="hljs-attr">data</span>: [],
  <span class="hljs-attr">footerData</span>: [
    { <span class="hljs-attr">seq</span>: <span class="hljs-string">'åˆè®¡'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'666'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'888'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'999'</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">'234'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'453'</span> },
    { <span class="hljs-attr">seq</span>: <span class="hljs-string">'å‡å€¼'</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'222'</span>, <span class="hljs-attr">role</span>: <span class="hljs-string">'333'</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">'777'</span>, <span class="hljs-attr">age</span>: <span class="hljs-string">'876'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'134'</span> }
  ]
})
<span class="hljs-comment">// æ¨¡æ‹Ÿè¡Œæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadList</span> = (<span class="hljs-params">size = <span class="hljs-number">200</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> dataList = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {
    dataList.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">id</span>: <span class="hljs-number">10000</span> + i,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Test'</span> + i,
      <span class="hljs-attr">role</span>: i % <span class="hljs-number">3</span> ? <span class="hljs-string">'Developer'</span> : <span class="hljs-string">' DeveloperDeveloper DeveloperDeveloper DeveloperDeveloper DeveloperDeveloper DeveloperDeveloper'</span>,
      <span class="hljs-attr">sex</span>: <span class="hljs-string">'ç”·'</span>,
      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,
      <span class="hljs-attr">address</span>: <span class="hljs-string">'Address abc'</span>,
      <span class="hljs-attr">col90</span>: <span class="hljs-string">'90-'</span> + i,
      <span class="hljs-attr">col91</span>: <span class="hljs-string">'91-'</span> + i,
      <span class="hljs-attr">col92</span>: <span class="hljs-string">'92-'</span> + i,
      <span class="hljs-attr">col93</span>: <span class="hljs-string">'93-'</span> + i,
      <span class="hljs-attr">col94</span>: <span class="hljs-string">'94-'</span> + i,
      <span class="hljs-attr">col95</span>: <span class="hljs-string">'95-'</span> + i,
      <span class="hljs-attr">col96</span>: <span class="hljs-string">'96-'</span> + i,
      <span class="hljs-attr">col97</span>: <span class="hljs-string">'97-'</span> + i,
      <span class="hljs-attr">col98</span>: <span class="hljs-string">'98-'</span> + i,
      <span class="hljs-attr">col99</span>: <span class="hljs-string">'99-'</span> + i,
      <span class="hljs-attr">col100</span>: <span class="hljs-string">'100-'</span> + i
    })
  }
  gridOptions.<span class="hljs-property">data</span> = dataList
}

<span class="hljs-title function_">loadList</span>(<span class="hljs-number">500</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fx-extends%2Fvxe-table" target="_blank" title="https://gitee.com/x-extends/vxe-table" ref="nofollow noopener noreferrer">gitee.com/x-extends/vâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 SECon Ã— AgentX å¤§ä¼šï¼šAI åŸç”Ÿåº”ç”¨æ¶æ„ä¸“åœºç²¾å½©å›é¡¾ & PPT ä¸‹è½½]]></title>    <link>https://juejin.cn/post/7579453456017260585</link>    <guid>https://juejin.cn/post/7579453456017260585</guid>    <pubDate>2025-12-03T08:42:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7579453456017260585" data-draft-id="7579213860572381238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 SECon Ã— AgentX å¤§ä¼šï¼šAI åŸç”Ÿåº”ç”¨æ¶æ„ä¸“åœºç²¾å½©å›é¡¾ &amp; PPT ä¸‹è½½"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-12-03T08:42:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 SECon Ã— AgentX å¤§ä¼šï¼šAI åŸç”Ÿåº”ç”¨æ¶æ„ä¸“åœºç²¾å½©å›é¡¾ &amp; PPT ä¸‹è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-03T08:42:22.000Z" title="Wed Dec 03 2025 08:42:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šç›ˆæ¥¹</p>
<p>è¿‘æ—¥ï¼Œ2025 SEConÂ Ã—Â AgentXå¤§ä¼šâ€”â€”AI åŸç”Ÿåº”ç”¨æ¶æ„ä¸“åœºåœ†æ»¡è½å¹•ï¼Œæœ¬æ¬¡ä¸“åœºé˜¿é‡Œäº‘è”åˆä¿¡é€šé™¢å…±åŒå‡ºå“ï¼Œç°åœºå¸å¼•äº† 80+ åæŠ€æœ¯ä»ä¸šè€…æ·±åº¦å‚ä¸ã€‚</p>
<p>æ´»åŠ¨èšç„¦ AI æ—¶ä»£è½¯ä»¶æ¶æ„çš„æ ¸å¿ƒå‘½é¢˜ï¼Œæ·±åº¦åˆ†äº«äº† AI åŸç”Ÿåº”ç”¨æ¶æ„è¶‹åŠ¿ä¸å®è·µã€AgentScope å¼€å‘æ¡†æ¶ã€AI å¼€æ”¾å¹³å°ã€å¤§æ¨¡å‹å¯è§‚æµ‹ &amp; AIOps ç­‰çƒ­é—¨æŠ€æœ¯è®®é¢˜ï¼Œæ¢è®¨ä»åŸºç¡€è®¾æ–½åˆ°åº”ç”¨å±‚çš„ååŒæ¼”è¿›ç­–ç•¥ä¸å·¥ç¨‹å®è·µã€‚</p>
<p>å…³æ³¨ã€Œé˜¿é‡Œäº‘äº‘åŸç”Ÿã€å…¬ä¼—å·ï¼Œåå°å›å¤ï¼š1125</p>
<p>å…è´¹è·å¾—æ´»åŠ¨è®²å¸ˆ PPT åˆè¾‘</p>
<h2 data-id="heading-0">ç²¾å½©å›é¡¾</h2>
<h3 data-id="heading-1">è®®é¢˜ä¸€ï¼šAI åŸç”Ÿåº”ç”¨æ¶æ„æ¢ç´¢ä¸å®è·µä¸¨è‚–äº¬(äº¦ç›) Â  é˜¿é‡Œäº‘æ™ºèƒ½äº‘åŸç”Ÿé«˜çº§æŠ€æœ¯ä¸“å®¶</h3>
<p>å½“å‰å¤§æ¨¡å‹å·²è¿ˆè¿‡æŠ€æœ¯æ‹ç‚¹ï¼ŒAgentic AI è¿›å…¥è§„æ¨¡åŒ–è½åœ°é˜¶æ®µã€‚AI åŸç”Ÿåº”ç”¨ä»¥æ¨¡å‹ä¸ºåŸºç¡€ã€Agent ä¸ºé©±åŠ¨ã€æ•°æ®ä¸ºä¸­å¿ƒï¼Œæ¨åŠ¨ç³»ç»Ÿä»â€œæœºå™¨æ‰§è¡Œâ€å‘â€œæœºå™¨æ€è€ƒ+æ‰§è¡Œâ€æ¼”è¿›ã€‚æ¡†æ¶é€‰å‹éœ€å¹³è¡¡ Agentic è‡ªä¸»æ€§ä¸ä¸šåŠ¡ç¡®å®šæ€§ï¼ŒAgent é¢ä¸´å¼€å‘æ•ˆç‡ã€ä¸šåŠ¡æ•ˆæœï¼Œä»¥åŠç¨³å®šã€æ€§èƒ½ã€æˆæœ¬ã€å®‰å…¨çš„æŒ‘æˆ˜ã€‚å®è·µä¸Šå»ºè®®æ„å»ºä»¥æ•°æ®ä¸ºæ ¸å¿ƒçš„ Agent å¹³å°ï¼Œç»“åˆ MCP/A2A æ ‡å‡†ä¸ Serverless æ¶æ„ï¼Œé€šè¿‡ AI ç½‘å…³ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å¯è§‚æµ‹ç­‰æå‡å®‰å…¨æ€§ã€ç¨³å®šæ€§ä¸å¯ç»´æŠ¤æ€§ï¼Œå®ç°æ™ºèƒ½åŒ–äººæœºåä½œæ–°èŒƒå¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea152df061df4e339245bc2856ea732d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=jY5DmIePKyEhkFFgtGJntTGhRBY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-2">è®®é¢˜äºŒï¼šå¼€å‘æ›´å¯æ§ï¼Œéƒ¨ç½²æ›´ä¾¿æ·ï¼šAgentScope è¿ˆå…¥ 1.0 æ—¶ä»£ä¸¨é‚ç‚œç‘ Â é˜¿é‡Œå·´å·´é›†å›¢é€šä¹‰å®éªŒå®¤ é«˜çº§ç®—æ³•å·¥ç¨‹å¸ˆ</h3>
<p>æ·±åº¦åˆ†äº«äº†é˜¿é‡Œé€šä¹‰å®éªŒå®¤å¼€æºçš„ AgentScope æ™ºèƒ½ä½“å¼€å‘æ¡†æ¶ 1.0 ç‰ˆæœ¬ã€‚æ ¸å¿ƒå†…å®¹åŒ…æ‹¬ï¼šåŸºäº ReAct èŒƒå¼çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ”¯æŒï¼Œæä¾›ç»“æ„åŒ–è¾“å‡ºã€å·¥å…·è°ƒç”¨ä¸é•¿æœŸè®°å¿†ç­‰èƒ½åŠ›ï¼›é‡‡ç”¨ä¸‰å±‚æ¶æ„â€”â€”å¼€å‘æ¡†æ¶å±‚ã€å¯è§†åŒ–è°ƒè¯•å¹³å°ä¸å®‰å…¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œç»“åˆå·¥å…·æ²™ç®±ä¸å…ƒå·¥å…·æœºåˆ¶ï¼Œå…¨é¢æå‡ç³»ç»Ÿçš„å¯æ§æ€§ã€å¯è§‚æµ‹æ€§ä¸éƒ¨ç½²å®‰å…¨æ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fa960187303425ab4b75c45eba2a315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=sC5gQdpPus3neRelbmjRnkNxZAo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">è®®é¢˜ä¸‰ï¼šAI ç½‘å…³ï¼šAI åŸç”Ÿæ¶æ„ä¸‹çš„æ™ºèƒ½æµé‡ä¸­æ¢ä¸¨Â èµµç‚³å ƒ(ç§‰é’§) Â  é˜¿é‡Œäº‘æ™ºèƒ½äº‘åŸç”Ÿé«˜çº§å¼€å‘å·¥ç¨‹å¸ˆ</h3>
<p>èšç„¦ AI ç½‘å…³åœ¨ AI åŸç”Ÿæ¶æ„ä¸­çš„æ ¸å¿ƒä½œç”¨ï¼Œé‡ç‚¹ä»‹ç» Higress AI ç½‘å…³çš„å…³é”®èƒ½åŠ›ï¼šæ”¯æŒå¤šæ¨¡å‹é€‚é…ã€åè®®è½¬æ¢ä¸è¯­ä¹‰ç¼“å­˜ï¼Œæä¾› Token é™æµã€Fallback æœºåˆ¶ä¿éšœé«˜å¯ç”¨ï¼›é€šè¿‡ API-Key ç®¡ç†ã€PII è„±æ•ã€WASM æ²™ç®±ç­‰å®ç°å®‰å…¨å¯æ§ï¼›å¹¶å€ŸåŠ© MCPServer ç»Ÿä¸€ä»£ç†æå‡é›†æˆæ•ˆç‡ã€‚HiMarket å¹³å°åˆ™åŠ©åŠ›ä¼ä¸šæ„å»ºç§æœ‰ Agent å¸‚åœºï¼Œæ¨åŠ¨ AI èƒ½åŠ›çš„å®‰å…¨è§„æ¨¡åŒ–è½åœ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f6a2162c2a04687b59e1f9422c32e10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=hqekz6Jlpn8TxEWekzbyHf3kefg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">è®®é¢˜å››ï¼šä»å¯è§‚æµ‹åˆ° RLï¼šæ‰“é€ ç”Ÿäº§çº§å¯é çš„é•¿å‘¨æœŸ Agentä¸¨é©¬äº‘é›· Â é˜¿é‡Œäº‘æ™ºèƒ½äº‘åŸç”ŸæŠ€æœ¯ä¸“å®¶</h3>
<p>èšç„¦ AI-Native åº”ç”¨ä¸­é•¿å‘¨æœŸ Agent çš„å¯é æ€§å»ºè®¾ï¼Œæå‡ºä»¥å¯è§‚æµ‹æ€§ä¸ºåŸºç¡€ï¼Œé€šè¿‡ OpenTelemetryã€Prometheus ç­‰å·¥å…·å®ç°å…¨æ ˆç›‘æ§ï¼Œåšåˆ°â€œå¯è§ã€å¯è°ƒã€å¯å®¡â€ã€‚å¼•å…¥ LLM Judger ä½œä¸ºè‡ªåŠ¨åŒ–è¯„ä¼°è£åˆ¤ï¼Œç»“åˆæ•°æ®å·¥ç¨‹ä¸æ¨¡å‹è’¸é¦ï¼Œæ„å»ºå¿«æ…¢åé¦ˆé—­ç¯ã€‚æœ€ç»ˆå½¢æˆä»é—®é¢˜å‘ç°ã€æ ¹å› åˆ†æåˆ°è‡ªæˆ‘å¼ºåŒ–çš„è¿›åŒ–ç³»ç»Ÿï¼Œæ¨åŠ¨ Agent å‘é«˜å¯é ã€è‡ªæ¼”è¿›çš„ç”Ÿäº§çº§åº”ç”¨å‘å±•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ad061b319a149d48f32fca63cf20d79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=x9x%2BPT7fAq1zLE6Tyd9cpCHXDiY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">ç°åœºç²¾å½©ç¬é—´</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e70dd5c0e9a8469ca6c5d29ad53c3e55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=NKOGl9Ul7FXv9U3uoo6YG17d9X8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/064da6f1678c432c9a82dfe639aa6083~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=ceeq4eP7VxrfkEQlFkcYR4mMzLQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38056102f55f4342869e064202875dce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765356142&amp;x-signature=cFiiUZ3dOEoI%2BuGLJkk1%2Fhk%2F1RE%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>