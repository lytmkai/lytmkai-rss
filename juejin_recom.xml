<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[HarmonyOSä¸‹é¥­èœæ—¶é—´ -- @Monitor]]></title>    <link>https://juejin.cn/post/7594661351513833507</link>    <guid>https://juejin.cn/post/7594661351513833507</guid>    <pubDate>2026-01-13T16:36:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594661351513833507" data-draft-id="7594678044264398848" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSä¸‹é¥­èœæ—¶é—´ -- @Monitor "/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-13T16:36:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ«çŒ«å¤´å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1283876003519357"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSä¸‹é¥­èœæ—¶é—´ -- @Monitor 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1283876003519357/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ«çŒ«å¤´å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T16:36:40.000Z" title="Tue Jan 13 2026 16:36:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ¬ç³»åˆ—æ–‡ç« ï¼Œå°†å¸¦å¤§å®¶æ·±å…¥ API çš„åº•å±‚å®ç°é€»è¾‘ â€”â€” æˆ‘ä»¬ä¼šæ‹†è§£å…¶æ ¸å¿ƒæ¶æ„ä¸è®¾è®¡æ€è·¯ï¼Œæ¢å¯»å®˜æ–¹åœ¨å¼€å‘æ—¶é‡ç‚¹è€ƒé‡çš„æŠ€æœ¯éš¾ç‚¹ã€å…¼å®¹æ€§é—®é¢˜ä¸æ€§èƒ½ä¼˜åŒ–æ–¹å‘ï¼Œè¿˜ä¼šæ·±æŒ–é‚£äº›æœªè¢«è¦†ç›–çš„åœºæ™¯ä¸æ½œåœ¨å±€é™ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä¼šè”åŠ¨å®é™…å¼€å‘åœºæ™¯ï¼šä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°çš„è¯¡å¼‚ Bugã€æ€§èƒ½ç“¶é¢ˆæˆ–ä½¿ç”¨å›°æƒ‘ï¼Œæ˜¯å¦å¯èƒ½æºäº API çš„å†…éƒ¨è®¾è®¡å–èˆï¼Ÿå¸Œæœ›é€šè¿‡è¿™åœºæ·±åº¦æ¢ç´¢ï¼Œè®©å¤§å®¶åœ¨æºç ä¸­æ‰¾åˆ°è§£å†³é—®é¢˜çš„ â€œéšè—å®è—â€ï¼Œæ²‰æ·€å¯å¤ç”¨çš„æŠ€æœ¯æ€ç»´ã€‚</p>
<p>And ä»Šå¤©å›¢é˜Ÿé‡Œæœ‰ä¸ªäº‰è®ºï¼šç”¨ <code>@Monitor</code> ç›‘å¬å¤šä¸ªå±æ€§æ—¶ï¼Œå¦‚æœè¿™äº›å±æ€§åŒæ—¶è¢«ä¿®æ”¹ï¼Œä¼šä¸ä¼šå¯¼è‡´å›è°ƒå‡½æ•°è¢«è§¦å‘å¤šæ¬¡ï¼Ÿ</p>
<p>æ¯”å¦‚è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'name'</span>, <span class="hljs-string">'age'</span>, <span class="hljs-string">'email'</span>)
<span class="hljs-title function_">onUserInfoChange</span>(<span class="hljs-params">m: IMonitor</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯å˜åŒ–äº†'</span>);
  <span class="hljs-comment">// å¤„ç†é€»è¾‘...</span>
}
</code></pre>
<p>å¦‚æœæˆ‘åœ¨ä¸€ä¸ªå‡½æ•°é‡ŒåŒæ—¶ä¿®æ”¹äº† <code>name</code>ã€<code>age</code> å’Œ <code>email</code>ï¼Œè¿™ä¸ª <code>onUserInfoChange</code> ä¼šè¢«è°ƒç”¨ 3 æ¬¡å—ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ä¸ä¼šï¼Œåªä¼šè°ƒç”¨ä¸€æ¬¡</strong>ã€‚</p>
<p>æˆ‘ç›´æ¥å»çœ‹äº†æºç ï¼Œå‘ç°æ¡†æ¶å·²ç»åšäº†å»é‡å¤„ç†ã€‚ä¸‹é¢è¯´è¯´å®ƒæ˜¯æ€ä¹ˆåšçš„ï¼Œä»¥åŠæ•´ä¸ª <code>@Monitor</code> çš„å·¥ä½œæœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">äºŒã€@Monitor çš„å…¥å£å’Œè°ƒç”¨é“¾</h2>
<p>å…ˆè¯´æ¸…æ¥š <code>@Monitor</code> æ˜¯æ€ä¹ˆè¢«åˆ›å»ºå’Œä½¿ç”¨çš„ã€‚</p>
<h3 data-id="heading-2">å…¥å£ç‚¹</h3>
<p><code>@Monitor</code> æœ‰ä¸¤ä¸ªä¸»è¦å…¥å£ï¼š</p>
<ol>
<li><strong>è£…é¥°å™¨æ–¹å¼</strong>ï¼šç›´æ¥ç”¨ <code>@Monitor('path1', 'path2')</code> è£…é¥°æ–¹æ³•</li>
<li><strong>API æ–¹å¼</strong>ï¼šé€šè¿‡ <code>UIUtils.addMonitor()</code> æˆ– <code>StateMgmtFactory.makeMonitor()</code> åˆ›å»º</li>
</ol>
<p>ä¸¤ç§æ–¹å¼æœ€ç»ˆéƒ½ä¼šåˆ›å»º <code>MonitorFunctionDecorator</code> å®ä¾‹ã€‚è¿™ä¸ªç±»å°±æ˜¯æ•´ä¸ªç›‘æ§æœºåˆ¶çš„æ ¸å¿ƒã€‚</p>
<h3 data-id="heading-3">è°ƒç”¨é“¾</h3>
<p>æ•´ä¸ªæµç¨‹å¯ä»¥åˆ†æˆå‡ ä¸ªé˜¶æ®µï¼š</p>
<p><strong>åˆå§‹åŒ–é˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åˆ›å»º MonitorFunctionDecorator
  â†’ ä¸ºæ¯ä¸ªç›‘æ§è·¯å¾„åˆ›å»º MonitorValueInternal
  â†’ <span class="hljs-built_in">readInitialMonitorValues</span>()
    â†’ è®¾ç½®å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆrenderingComponent = RenderingMonitorï¼‰
    â†’ æ‰§è¡Œ lambda è¯»å–åˆå§‹å€¼
    â†’ è®¿é—®çŠ¶æ€å¯¹è±¡æ—¶è§¦å‘ <span class="hljs-built_in">addRef</span>()ï¼Œå»ºç«‹ä¾èµ–å…³ç³»
</code></pre>
<p><strong>çŠ¶æ€å˜åŒ–é˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">çŠ¶æ€å¯¹è±¡è¢«ä¿®æ”¹
  â†’ MutableStateMeta<span class="hljs-selector-class">.fireChange</span>()
    â†’ éå† bindingRefs_ï¼ˆæ‰€æœ‰ä¾èµ–è¿™ä¸ªçŠ¶æ€çš„ç›‘æ§å™¨ï¼‰
    â†’ ObserveSingleton<span class="hljs-selector-class">.addDirtyRef</span>()
      â†’ æ ¹æ®ç›‘æ§å™¨ç±»å‹ï¼š
        - åŒæ­¥ç›‘æ§å™¨ï¼šç«‹å³æ‰§è¡Œ
        - å¼‚æ­¥ç›‘æ§å™¨ï¼šåŠ å…¥é˜Ÿåˆ—
</code></pre>
<p><strong>æ‰¹é‡æ‰§è¡Œé˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ObserveSingleton<span class="hljs-selector-class">.updateDirty</span>()
  â†’ <span class="hljs-built_in">notifyDirtyMonitorPaths</span>() æ”¶é›†éœ€è¦æ‰§è¡Œçš„ç›‘æ§å™¨
  â†’ éå†æ‰§è¡Œ <span class="hljs-built_in">runMonitorFunction</span>()
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„å¥½å¤„æ˜¯ï¼Œåˆå§‹åŒ–æ—¶å°±èƒ½è‡ªåŠ¨å»ºç«‹ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦æ‰‹åŠ¨å£°æ˜ã€‚ä½†ä»£ä»·æ˜¯ä¾èµ–å…¨å±€ä¸Šä¸‹æ–‡ï¼Œä»£ç çœ‹èµ·æ¥æœ‰ç‚¹ç»•ã€‚</p>
<h2 data-id="heading-4">ä¸‰ã€é—®é¢˜èƒŒæ™¯</h2>
<p>å…ˆç†è§£ä¸€ä¸‹ <code>@Monitor</code> çš„å·¥ä½œæœºåˆ¶ã€‚å½“ä½ ç”¨ <code>@Monitor</code> è£…é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæ¡†æ¶ä¼šï¼š</p>
<ol>
<li>ä¸ºæ¯ä¸ªç›‘æ§è·¯å¾„åˆ›å»ºä¸€ä¸ª <code>MonitorValueInternal</code> å¯¹è±¡</li>
<li>è¿™äº›å¯¹è±¡éƒ½æŒ‡å‘åŒä¸€ä¸ª <code>MonitorFunctionDecorator</code>ï¼ˆä¹Ÿå°±æ˜¯ä½ çš„å›è°ƒå‡½æ•°ï¼‰</li>
<li>å½“å±æ€§å˜åŒ–æ—¶ï¼Œå¯¹åº”çš„ <code>MonitorValueInternal</code> ä¼šè¢«æ ‡è®°ä¸º dirty</li>
</ol>
<p>æ‰€ä»¥ç†è®ºä¸Šï¼Œå¦‚æœ 3 ä¸ªå±æ€§åŒæ—¶å˜åŒ–ï¼Œä¼šæœ‰ 3 ä¸ª <code>MonitorValueInternal</code> è¢«æ ‡è®°ä¸º dirtyã€‚é‚£ä¸ºä»€ä¹ˆå›è°ƒåªæ‰§è¡Œä¸€æ¬¡ï¼Ÿ</p>
<h3 data-id="heading-5">å»é‡çš„å…³é”®ï¼šSet é›†åˆ</h3>
<p>çœ‹ <code>ObserveSingleton.updateDirty()</code> è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒæ˜¯å¤„ç†æ‰€æœ‰çŠ¶æ€å˜åŒ–çš„æ ¸å¿ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">public</span> <span class="hljs-title function_">updateDirty</span>(): <span class="hljs-built_in">void</span> {
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">computedPropRefsChanged_</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">const</span> computedProps = <span class="hljs-variable language_">this</span>.<span class="hljs-property">computedPropRefsChanged_</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">computedPropRefsChanged_</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">WeakRef</span>&lt;<span class="hljs-title class_">ITrackedDecoratorRef</span>&gt;&gt;();
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateDirtyComputedProps</span>(computedProps);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">persistencePropRefsChanged_</span>.<span class="hljs-property">size</span>) {
                <span class="hljs-keyword">const</span> persistenceProps = <span class="hljs-variable language_">this</span>.<span class="hljs-property">persistencePropRefsChanged_</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">persistencePropRefsChanged_</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">WeakRef</span>&lt;<span class="hljs-title class_">ITrackedDecoratorRef</span>&gt;&gt;();
                <span class="hljs-title class_">PersistenceV2Impl</span>.<span class="hljs-title function_">instance</span>().<span class="hljs-title function_">onChangeObserved</span>(persistenceProps);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsChanged_</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
                <span class="hljs-keyword">const</span> monitors = <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsChanged_</span>;
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsChanged_</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">WeakRef</span>&lt;<span class="hljs-title class_">ITrackedDecoratorRef</span>&gt;&gt;();
                <span class="hljs-keyword">let</span> <span class="hljs-attr">monitorsToRun</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">MonitorFunctionDecorator</span>&gt; = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">notifyDirtyMonitorPaths</span>(monitors);
                <span class="hljs-keyword">if</span> (monitorsToRun &amp;&amp; monitorsToRun.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
                    monitorsToRun.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">monitor: MonitorFunctionDecorator</span>) =&gt;</span> {
                        monitor.<span class="hljs-title function_">runMonitorFunction</span>();
                    });
                }
            }
        } <span class="hljs-keyword">while</span> (
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsChanged_</span>.<span class="hljs-property">size</span> +
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">computedPropRefsChanged_</span>.<span class="hljs-property">size</span> +
                <span class="hljs-variable language_">this</span>.<span class="hljs-property">persistencePropRefsChanged_</span>.<span class="hljs-property">size</span> &gt;
            <span class="hljs-number">0</span>
        );
    }
</code></pre>
<p>æ³¨æ„è¿™é‡Œï¼Œ<code>notifyDirtyMonitorPaths</code> è¿”å›çš„æ˜¯ <code>Set&lt;MonitorFunctionDecorator&gt;</code>ï¼Œè€Œä¸æ˜¯ <code>Set&lt;MonitorValueInternal&gt;</code>ã€‚</p>
<p>è¿™å°±æ˜¯å…³é”®ã€‚çœ‹ <code>notifyDirtyMonitorPaths</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">private</span> <span class="hljs-title function_">notifyDirtyMonitorPaths</span>(<span class="hljs-attr">monitorPaths</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">WeakRef</span>&lt;<span class="hljs-title class_">ITrackedDecoratorRef</span>&gt;&gt;): <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">MonitorFunctionDecorator</span>&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-attr">monitors</span>: <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">MonitorFunctionDecorator</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">MonitorFunctionDecorator</span>&gt;();
        monitorPaths.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">monitorPathRef: WeakRef&lt;ITrackedDecoratorRef&gt;</span>) =&gt;</span> {
            <span class="hljs-keyword">let</span> monitorPath = monitorPathRef.<span class="hljs-title function_">deref</span>();
            <span class="hljs-keyword">if</span> (monitorPath) {
                <span class="hljs-keyword">let</span> <span class="hljs-attr">monitor</span>: <span class="hljs-title class_">MonitorFunctionDecorator</span> = (monitorPath <span class="hljs-keyword">as</span> <span class="hljs-title class_">MonitorValueInternal</span>).<span class="hljs-property">monitor</span>;
                <span class="hljs-keyword">if</span> (monitor.<span class="hljs-title function_">isFreeze</span>()) {
                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsDelayed_</span>.<span class="hljs-title function_">add</span>(monitorPathRef);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (monitor.<span class="hljs-title function_">notifyChangesForPath</span>(monitorPath)) {
                    monitors.<span class="hljs-title function_">add</span>(monitor);
                }
            }
        });
        <span class="hljs-keyword">return</span> monitors;
    }
</code></pre>
<p>è™½ç„¶éå†çš„æ˜¯æ‰€æœ‰å˜åŒ–çš„ <code>monitorPath</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>MonitorValueInternal</code>ï¼‰ï¼Œä½†æ”¶é›†åˆ° <code>monitors</code> é›†åˆé‡Œçš„æ˜¯ <code>monitor</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>MonitorFunctionDecorator</code>ï¼‰ã€‚</p>
<p>å› ä¸ºç”¨çš„æ˜¯ <code>Set</code>ï¼ŒåŒä¸€ä¸ª <code>MonitorFunctionDecorator</code> å®ä¾‹åªä¼šè¢«æ·»åŠ ä¸€æ¬¡ï¼Œå³ä½¿å®ƒç›‘æ§çš„å¤šä¸ªè·¯å¾„éƒ½å˜åŒ–äº†ã€‚</p>
<h2 data-id="heading-6">å››ã€å®Œæ•´çš„å·¥ä½œæµç¨‹</h2>
<p>æ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>
<p><strong>å±æ€§å˜åŒ–é˜¶æ®µ</strong>ï¼š<code>name</code>ã€<code>age</code>ã€<code>email</code> ä¸‰ä¸ªå±æ€§è¢«ä¿®æ”¹</p>
<ul>
<li>æ¯ä¸ªå±æ€§å˜åŒ–éƒ½ä¼šè§¦å‘ <code>fireChange()</code></li>
<li>æ¯ä¸ª <code>fireChange()</code> ä¼šæŠŠå¯¹åº”çš„ <code>MonitorValueInternal</code> åŠ å…¥ <code>monitorPathRefsChanged_</code> é˜Ÿåˆ—</li>
<li>æ­¤æ—¶é˜Ÿåˆ—é‡Œæœ‰ 3 ä¸ª <code>MonitorValueInternal</code>ï¼Œä½†å®ƒä»¬éƒ½æŒ‡å‘åŒä¸€ä¸ª <code>MonitorFunctionDecorator</code></li>
</ul>
</li>
<li>
<p><strong>æ”¶é›†é˜¶æ®µ</strong>ï¼š<code>notifyDirtyMonitorPaths</code> è¢«è°ƒç”¨</p>
<ul>
<li>éå†é˜Ÿåˆ—ä¸­çš„ 3 ä¸ª <code>MonitorValueInternal</code></li>
<li>æå–æ¯ä¸ª <code>MonitorValueInternal.monitor</code>ï¼ˆéƒ½æ˜¯åŒä¸€ä¸ª <code>MonitorFunctionDecorator</code> å®ä¾‹ï¼‰</li>
<li>å› ä¸º <code>Set</code> çš„ç‰¹æ€§ï¼Œæœ€ç»ˆ <code>monitors</code> é›†åˆé‡Œåªæœ‰ 1 ä¸ªå…ƒç´ </li>
</ul>
</li>
<li>
<p><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šéå† <code>monitors</code> é›†åˆ</p>
<ul>
<li>åªæ‰§è¡Œä¸€æ¬¡ <code>runMonitorFunction()</code></li>
<li>å›è°ƒå‡½æ•°é‡Œå¯ä»¥é€šè¿‡ <code>m.dirty</code> è·å–æ‰€æœ‰å˜åŒ–çš„è·¯å¾„</li>
</ul>
</li>
</ol>
<p>è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ï¼š<code>updateDirty()</code> é‡Œæœ‰ä¸ª <code>do...while</code> å¾ªç¯ï¼Œä¼šä¸€ç›´æ‰§è¡Œç›´åˆ°æ‰€æœ‰é˜Ÿåˆ—éƒ½æ¸…ç©ºã€‚è¿™æ˜¯å› ä¸ºæ‰§è¡Œç›‘æ§å™¨å›è°ƒæ—¶ï¼Œå¯èƒ½ä¼šè§¦å‘æ–°çš„çŠ¶æ€å˜åŒ–ï¼Œäº§ç”Ÿæ–°çš„ä¾èµ–æ›´æ–°ã€‚è¿™ç§è®¾è®¡ä¿è¯äº†æ‰€æœ‰å˜åŒ–éƒ½èƒ½è¢«å¤„ç†ï¼Œä½†ä¹Ÿè¦æ³¨æ„é¿å…æ— é™å¾ªç¯ã€‚</p>
<h3 data-id="heading-7">ä¸€ä¸ªç»†èŠ‚ï¼šdirty æ•°ç»„</h3>
<p>è™½ç„¶å›è°ƒåªæ‰§è¡Œä¸€æ¬¡ï¼Œä½†ä½ ä»ç„¶å¯ä»¥çŸ¥é“å“ªäº›è·¯å¾„å˜åŒ–äº†ã€‚çœ‹ <code>MonitorFunctionDecorator.dirty</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">dirty</span>(): <span class="hljs-built_in">string</span>[] {
        <span class="hljs-keyword">let</span> ret = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">string</span>&gt;();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">values_</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">monitorValue: MonitorValueInternal</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (monitorValue.<span class="hljs-property">dirty</span>) {
                ret.<span class="hljs-title function_">push</span>(monitorValue.<span class="hljs-property">path</span>);
            }
        });
        <span class="hljs-keyword">return</span> ret;
    }
</code></pre>
<p>å®ƒä¼šæ”¶é›†æ‰€æœ‰æ ‡è®°ä¸º dirty çš„è·¯å¾„ã€‚æ‰€ä»¥åœ¨å›è°ƒé‡Œï¼Œ<code>m.dirty</code> ä¼šè¿”å› <code>['name', 'age', 'email']</code>ã€‚</p>
<h3 data-id="heading-8">åŒæ­¥ç›‘æ§å™¨çš„ç‰¹æ®Šæƒ…å†µ</h3>
<p>ä¸Šé¢è¯´çš„æ˜¯å¼‚æ­¥ç›‘æ§å™¨ï¼ˆé»˜è®¤æƒ…å†µï¼‰ã€‚å¦‚æœæ˜¯åŒæ­¥ç›‘æ§å™¨ï¼ˆ<code>@SyncMonitor</code> æˆ– <code>isSynchronous: true</code>ï¼‰ï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">public</span> <span class="hljs-title function_">addDirtyRef</span>(<span class="hljs-attr">trackedRef</span>: <span class="hljs-title class_">ITrackedDecoratorRef</span>): <span class="hljs-built_in">void</span> {
        <span class="hljs-keyword">if</span> (trackedRef.<span class="hljs-property">id</span> &gt;= <span class="hljs-title class_">PersistenceV2Impl</span>.<span class="hljs-property">MIN_PERSISTENCE_ID</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">persistencePropRefsChanged_</span>.<span class="hljs-title function_">add</span>(trackedRef.<span class="hljs-property">weakThis</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (trackedRef.<span class="hljs-property">id</span> &gt;= <span class="hljs-title class_">MonitorFunctionDecorator</span>.<span class="hljs-property">MIN_SYNC_MONITOR_ID</span>) {
            <span class="hljs-keyword">const</span> currentMonitor = (trackedRef <span class="hljs-keyword">as</span> <span class="hljs-title class_">MonitorValueInternal</span>).<span class="hljs-property">monitor</span>;
            currentMonitor.<span class="hljs-title function_">notifyChangesForPath</span>(trackedRef);
            currentMonitor.<span class="hljs-title function_">runMonitorFunction</span>();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (trackedRef.<span class="hljs-property">id</span> &gt;= <span class="hljs-title class_">MonitorFunctionDecorator</span>.<span class="hljs-property">MIN_MONITOR_ID</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">monitorPathRefsChanged_</span>.<span class="hljs-title function_">add</span>(trackedRef.<span class="hljs-property">weakThis</span>);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (trackedRef.<span class="hljs-property">id</span> &gt;= <span class="hljs-title class_">ComputedDec</span>
            oratedVariable.<span class="hljs-property">MIN_COMPUTED_ID</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">computedPropRefsChanged_</span>.<span class="hljs-title function_">add</span>(trackedRef.<span class="hljs-property">weakThis</span>);
        }
    }
</code></pre>
<p>åŒæ­¥ç›‘æ§å™¨åœ¨ <code>addDirtyRef</code> æ—¶ç«‹å³æ‰§è¡Œï¼Œä¸ç»è¿‡é˜Ÿåˆ—ã€‚ä½†å³ä½¿è¿™æ ·ï¼Œå¦‚æœåŒä¸€ä¸ªç›‘æ§å™¨çš„å¤šä¸ªè·¯å¾„åŒæ—¶å˜åŒ–ï¼Œ<code>runMonitorFunction</code> é‡Œä¹Ÿæœ‰æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">public</span> <span class="hljs-title function_">runMonitorFunction</span>(): <span class="hljs-built_in">void</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dirty</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">try</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">monitorFunction_</span>(<span class="hljs-variable language_">this</span>);
        } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-title class_">StateMgmtConsole</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Error caught while executing @Monitor function: '<span class="hljs-subst">${e}</span>'`</span>);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">values_</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">monitorValue: MonitorValueInternal</span>) =&gt;</span> {
                monitorValue.<span class="hljs-title function_">reset</span>();
            });
        }
    }
</code></pre>
<p>å¦‚æœ <code>dirty.length === 0</code>ï¼Œç›´æ¥è¿”å›ï¼Œä¸ä¼šæ‰§è¡Œå›è°ƒã€‚ä¸è¿‡åŒæ­¥ç›‘æ§å™¨åœ¨ç«‹å³æ‰§è¡Œæ—¶ï¼Œå¯èƒ½è¿˜æ˜¯ä¼šæœ‰å¤šæ¬¡è°ƒç”¨çš„é£é™©ï¼Œå–å†³äºå±æ€§å˜åŒ–çš„æ—¶æœºã€‚è¿™ä¸ªåœºæ™¯æ¯”è¾ƒå°‘è§ï¼Œä¸€èˆ¬ç”¨å¼‚æ­¥ç›‘æ§å™¨å°±å¤Ÿäº†ã€‚</p>
<h2 data-id="heading-9">äº”ã€è®¾è®¡è¦ç‚¹å’Œé™åˆ¶</h2>
<h3 data-id="heading-10">è®¾è®¡è¦ç‚¹</h3>
<ol>
<li><strong>è‡ªåŠ¨ä¾èµ–è¿½è¸ª</strong>ï¼šé€šè¿‡å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆ<code>renderingComponent</code>ï¼‰åœ¨è¯»å–å€¼æ—¶è‡ªåŠ¨å»ºç«‹ä¾èµ–ï¼Œä¸éœ€è¦æ‰‹åŠ¨å£°æ˜</li>
<li><strong>WeakRef åŒå‘ç»‘å®š</strong>ï¼šç”¨ <code>WeakRef</code> é¿å…å¾ªç¯å¼•ç”¨å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œä½†éœ€è¦æ‰‹åŠ¨æ¸…ç†å¤±æ•ˆå¼•ç”¨</li>
<li><strong>æ‰¹é‡æ›´æ–°ä¼˜åŒ–</strong>ï¼šå¼‚æ­¥ç›‘æ§å™¨æ‰¹é‡å¤„ç†ï¼Œé¿å…é¢‘ç¹æ‰§è¡Œ</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šé€šè¿‡ <code>isFreeze()</code> åœ¨ç»„ä»¶æœªæ¿€æ´»æ—¶å†»ç»“ç›‘æ§ï¼Œé¿å…æ— æ•ˆæ‰§è¡Œ</li>
</ol>
<h3 data-id="heading-11">éœ€è¦æ³¨æ„çš„é™åˆ¶</h3>
<p>è™½ç„¶æ¡†æ¶åšäº†å»é‡ï¼Œä½†è¿˜æœ‰ä¸€äº›é™åˆ¶éœ€è¦äº†è§£ï¼š</p>
<p><strong>1. å¤šä¸ªç›‘æ§å™¨çš„æ‰§è¡Œé¡ºåºä¸ç¡®å®š</strong></p>
<p>å¦‚æœä½ æœ‰å¤šä¸ª <code>@Monitor</code>ï¼Œå®ƒä»¬çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚çœ‹ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">monitorsToRun.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">monitor: MonitorFunctionDecorator</span>) =&gt;</span> {
    monitor.<span class="hljs-title function_">runMonitorFunction</span>();
});
</code></pre>
<p><code>Set</code> çš„éå†é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥ä¸è¦ä¾èµ–ç›‘æ§å™¨çš„æ‰§è¡Œé¡ºåºã€‚</p>
<p><strong>2. ä¸å¤„ç†å¾ªç¯ä¾èµ–</strong></p>
<p>å¦‚æœç›‘æ§å‡½æ•°é‡Œä¿®æ”¹äº†è¢«ç›‘æ§çš„çŠ¶æ€ï¼Œå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Monitor</span>(<span class="hljs-string">'count'</span>)
<span class="hljs-title function_">onCountChange</span>(<span class="hljs-params">m: IMonitor</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++; <span class="hljs-comment">// å±é™©ï¼å¯èƒ½å¯¼è‡´æ— é™å¾ªç¯</span>
}
</code></pre>
<p>æ¡†æ¶ä¸ä¼šæ£€æµ‹è¿™ç§æƒ…å†µï¼Œéœ€è¦å¼€å‘è€…è‡ªå·±é¿å…ã€‚</p>
<p><strong>3. ä¸æä¾›äº‹åŠ¡æ€§</strong></p>
<p>å¤šä¸ªçŠ¶æ€å˜åŒ–ä¼šè§¦å‘å¤šæ¬¡å›è°ƒï¼Œä¸æ˜¯åŸå­æ“ä½œã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Alice'</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">email</span> = <span class="hljs-string">'alice@example.com'</span>;
</code></pre>
<p>è¿™ä¸‰ä¸ªèµ‹å€¼ä¼šè§¦å‘ä¸‰æ¬¡çŠ¶æ€å˜åŒ–é€šçŸ¥ï¼Œè™½ç„¶åŒä¸€ä¸ªç›‘æ§å™¨åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä½†å¦‚æœæœ‰å¤šä¸ªç›‘æ§å™¨ï¼Œå®ƒä»¬å¯èƒ½åœ¨ä¸åŒæ—¶æœºæ‰§è¡Œã€‚æ¡†æ¶ä¸ä¿è¯è¿™äº›å˜åŒ–æ˜¯"åŸå­"çš„ã€‚</p>
<p><strong>4. ä¸æä¾›é˜²æŠ–/èŠ‚æµ</strong></p>
<p>æ¯æ¬¡å˜åŒ–éƒ½ä¼šè§¦å‘ï¼Œæ²¡æœ‰å†…ç½®çš„é˜²æŠ–æˆ–èŠ‚æµæœºåˆ¶ã€‚å¦‚æœçŠ¶æ€å˜åŒ–å¾ˆé¢‘ç¹ï¼Œå›è°ƒä¹Ÿä¼šé¢‘ç¹æ‰§è¡Œã€‚éœ€è¦çš„è¯ï¼Œå¾—åœ¨å›è°ƒå‡½æ•°é‡Œè‡ªå·±å®ç°ã€‚</p>
<p><strong>5. åŒæ­¥ç›‘æ§å™¨çš„ç‰¹æ®Šè¡Œä¸º</strong></p>
<p>åŒæ­¥ç›‘æ§å™¨ï¼ˆ<code>@SyncMonitor</code> æˆ– <code>isSynchronous: true</code>ï¼‰åœ¨çŠ¶æ€å˜åŒ–æ—¶ç«‹å³æ‰§è¡Œï¼Œä¸ç»è¿‡é˜Ÿåˆ—ã€‚å¦‚æœåŒä¸€ä¸ªç›‘æ§å™¨çš„å¤šä¸ªè·¯å¾„åŒæ—¶å˜åŒ–ï¼Œç†è®ºä¸Šå¯èƒ½æ‰§è¡Œå¤šæ¬¡ï¼ˆè™½ç„¶ <code>runMonitorFunction</code> é‡Œæœ‰ <code>dirty.length === 0</code> çš„æ£€æŸ¥ï¼Œä½†æ—¶æœºä¸å¯¹çš„è¯è¿˜æ˜¯å¯èƒ½å¤šæ¬¡æ‰§è¡Œï¼‰ã€‚</p>
<h2 data-id="heading-12">å…­ã€æ€»ç»“</h2>
<p>æ‰€ä»¥å›ç­”æœ€åˆçš„é—®é¢˜ï¼š<strong>å¤šä¸ªå±æ€§åŒæ—¶å˜åŒ–æ—¶ï¼Œ<code>@Monitor</code> çš„å›è°ƒåªä¼šæ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p>
<p>å»é‡çš„æœºåˆ¶æ˜¯ï¼š</p>
<ul>
<li>ç”¨ <code>Set&lt;MonitorFunctionDecorator&gt;</code> æ”¶é›†éœ€è¦æ‰§è¡Œçš„ç›‘æ§å™¨</li>
<li>åŒä¸€ä¸ªç›‘æ§å™¨å®ä¾‹åªä¼šè¢«æ·»åŠ ä¸€æ¬¡</li>
<li>å³ä½¿å®ƒç›‘æ§çš„å¤šä¸ªè·¯å¾„éƒ½å˜åŒ–äº†ï¼Œæœ€ç»ˆä¹Ÿåªæ‰§è¡Œä¸€æ¬¡å›è°ƒ</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡æ˜¯åˆç†çš„ã€‚å¦‚æœæ¯æ¬¡å±æ€§å˜åŒ–éƒ½è§¦å‘ä¸€æ¬¡å›è°ƒï¼Œæ€§èƒ½ä¼šæœ‰é—®é¢˜ï¼Œè€Œä¸”é€»è¾‘ä¸Šä¹Ÿä¸å¿…è¦â€”â€”ä½ é€šå¸¸åªéœ€è¦çŸ¥é“"æœ‰å˜åŒ–"å°±å¤Ÿäº†ï¼Œå…·ä½“å“ªäº›è·¯å¾„å˜åŒ–äº†å¯ä»¥é€šè¿‡ <code>m.dirty</code> è·å–ã€‚</p>
<p>ä½†ä¹Ÿè¦æ³¨æ„æ¡†æ¶çš„é™åˆ¶ï¼šæ‰§è¡Œé¡ºåºä¸ç¡®å®šã€ä¸å¤„ç†å¾ªç¯ä¾èµ–ã€ä¸æä¾›äº‹åŠ¡æ€§ã€ä¸æä¾›é˜²æŠ–/èŠ‚æµã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œè¦æ ¹æ®è¿™äº›é™åˆ¶æ¥è®¾è®¡ä»£ç ï¼Œé¿å…è¸©å‘ã€‚</p>
<h2 data-id="heading-13">ä¸ƒã€æ„Ÿè°¢</h2>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å¯¹æ–‡ç« å†™çš„ä¸æ»¡æ„ã€å‘ç°é”™è¯¯æˆ–è€…æœ‰æ›´å¥½çš„æ–¹æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºã€ç§ä¿¡æˆ–é‚®ä»¶ä¸­æå‡ºï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚ğŸ™</p>
<p>å„ä½è¯»è€…è€çˆ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»˜åˆ¶Kçº¿ç¬¬äºŒç« ï¼šèƒŒæ™¯ç½‘æ ¼ç»˜åˆ¶]]></title>    <link>https://juejin.cn/post/7594642978696495167</link>    <guid>https://juejin.cn/post/7594642978696495167</guid>    <pubDate>2026-01-13T16:42:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594642978696495167" data-draft-id="7594523145211936822" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ç»˜åˆ¶Kçº¿ç¬¬äºŒç« ï¼šèƒŒæ™¯ç½‘æ ¼ç»˜åˆ¶"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„,Android"/> <meta itemprop="datePublished" content="2026-01-13T16:42:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä½›ç³»æ‰“å·¥ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/3227821867282167"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ç»˜åˆ¶Kçº¿ç¬¬äºŒç« ï¼šèƒŒæ™¯ç½‘æ ¼ç»˜åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3227821867282167/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä½›ç³»æ‰“å·¥ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T16:42:04.000Z" title="Tue Jan 13 2026 16:42:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç»˜åˆ¶Kçº¿ç¬¬äºŒç« ï¼šèƒŒæ™¯ç½‘æ ¼ç»˜åˆ¶</h2>
<p>åœ¨ç¬¬ä¸€ç« çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ç®€å•ä¿®é¥°ä¸€ä¸‹ï¼Œè¡¥å……ä¸€ä¸ªèƒŒæ™¯ä¹å®«æ ¼çš„ç»˜åˆ¶åŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½å¯ä»¥è®©Kçº¿å›¾æ›´åŠ æ¸…æ™°æ˜“è¯»ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®šä½ä»·æ ¼å’Œæ—¶é—´ã€‚</p>
<h3 data-id="heading-1">äºŒã€ç½‘æ ¼é…ç½®</h3>
<h4 data-id="heading-2">ç¡®å®šç½‘æ ¼çš„è¡Œæ•°å’Œåˆ—æ•°</h4>
<p>åœ¨ç»˜åˆ¶ç½‘æ ¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šï¼š</p>
<ul>
<li><strong>å‡ è¡Œ</strong>ï¼šå°†é«˜åº¦åˆ†æˆå‡ ç­‰ä»½ï¼ˆå¯¹åº”ä»·æ ¼è½´ï¼‰</li>
<li><strong>å‡ åˆ—</strong>ï¼šå°†å®½åº¦åˆ†æˆå‡ ç­‰ä»½ï¼ˆå¯¹åº”æ—¶é—´è½´ï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š4åˆ—5è¡Œï¼Œè¡¨ç¤ºå®½åº¦åˆ†æˆ4ç­‰ä»½ï¼Œé«˜åº¦åˆ†æˆ5ç­‰ä»½ã€‚</p>
<h4 data-id="heading-3">åœ¨Configä¸­é…ç½®</h4>
<p>ä¸ºäº†çµæ´»é…ç½®ç½‘æ ¼ï¼Œæˆ‘ä»¬åœ¨ <code>KLineConfig</code> ä¸­æ·»åŠ äº†ä¸¤ä¸ªå­—æ®µï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KLineConfig</span>(
    <span class="hljs-comment">// ... å…¶ä»–é…ç½® ...</span>
    
    <span class="hljs-comment">/**
     * ç½‘æ ¼åˆ—æ•°
     * é»˜è®¤ï¼š4åˆ—
     */</span>
    <span class="hljs-keyword">val</span> gridColumnCount: <span class="hljs-built_in">Int</span> = <span class="hljs-number">4</span>,
    
    <span class="hljs-comment">/**
     * ç½‘æ ¼è¡Œæ•°
     * é»˜è®¤ï¼š5è¡Œ
     */</span>
    <span class="hljs-keyword">val</span> gridRowCount: <span class="hljs-built_in">Int</span> = <span class="hljs-number">5</span>
)
</code></pre>
<p><strong>æ¨¡å‹æ”¹åŠ¨</strong>ï¼š</p>
<ul>
<li><code>KLineConfig</code> æ–°å¢ <code>gridColumnCount</code> å’Œ <code>gridRowCount</code> å­—æ®µ</li>
<li>é»˜è®¤å€¼ï¼š4åˆ—5è¡Œ</li>
<li>å¯ä»¥é€šè¿‡é…ç½®çµæ´»è°ƒæ•´ç½‘æ ¼å¯†åº¦</li>
</ul>
<h3 data-id="heading-4">ä¸‰ã€ç»˜åˆ¶ç½‘æ ¼çº¿</h3>
<h4 data-id="heading-5">è®¡ç®—ç½‘æ ¼çº¿ä½ç½®</h4>
<p><strong>æ ¸å¿ƒå…¬å¼</strong>ï¼š</p>
<ul>
<li>åˆ—é—´è· = å®½åº¦ Ã· åˆ—æ•°</li>
<li>è¡Œé—´è· = é«˜åº¦ Ã· è¡Œæ•°</li>
</ul>
<h4 data-id="heading-6">ç»˜åˆ¶ä»£ç </h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">drawBackgroundGrid</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>, width: <span class="hljs-type">Float</span>, height: <span class="hljs-type">Float</span>)</span></span> {
    <span class="hljs-keyword">val</span> columnWidth = width / config.gridColumnCount
    <span class="hljs-keyword">val</span> rowHeight = height / config.gridRowCount
    
    <span class="hljs-comment">// ç»˜åˆ¶ç«–çº¿</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> until config.gridColumnCount) {
        <span class="hljs-keyword">val</span> x = columnWidth * i
        canvas.drawLine(x, <span class="hljs-number">0f</span>, x, height, gridPaint)
    }
    
    <span class="hljs-comment">// ç»˜åˆ¶æ¨ªçº¿</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">1</span> until config.gridRowCount) {
        <span class="hljs-keyword">val</span> y = rowHeight * i
        canvas.drawLine(<span class="hljs-number">0f</span>, y, width, y, gridPaint)
    }
}
</code></pre>
<h3 data-id="heading-7">å››ã€ä»·æ ¼æ ‡ç­¾ç»˜åˆ¶</h3>
<h4 data-id="heading-8">è®¡ç®—ä»·æ ¼æ­¥é•¿</h4>
<p>ä»·æ ¼æ ‡ç­¾æ˜¾ç¤ºåœ¨å³ä¾§Yè½´ï¼Œéœ€è¦æ ¹æ®ç½‘æ ¼æ¨ªçº¿ä½ç½®è®¡ç®—å¯¹åº”çš„ä»·æ ¼å€¼ã€‚</p>
<p><strong>ä»·æ ¼æ­¥é•¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">priceStep</span> = (maxPrice - minPrice) / config.gridRowCount
</code></pre>
<ul>
<li>å°†ä»·æ ¼èŒƒå›´ï¼ˆæœ€é«˜ä»·-æœ€ä½ä»·ï¼‰å¹³å‡åˆ†æˆè¡Œæ•°ç­‰ä»½</li>
<li>ä¾‹å¦‚ï¼šä»·æ ¼èŒƒå›´1000-800=200ï¼Œ5è¡Œï¼Œæ­¥é•¿=200Ã·5=40</li>
</ul>
<h4 data-id="heading-9">è·å–å…·ä½“ä»·æ ¼</h4>
<p><strong>ä»·æ ¼è®¡ç®—å…¬å¼</strong>ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> <span class="hljs-keyword">until</span> <span class="hljs-built_in">config</span>.gridRowCount) {
    val price = priceStep * (<span class="hljs-built_in">config</span>.gridRowCount - i) + minPrice
}
</code></pre>
<h3 data-id="heading-10">äº”ã€æ—¶é—´æ ‡ç­¾ç»˜åˆ¶</h3>
<h4 data-id="heading-11">è®¡ç®—ç½‘æ ¼ç«–çº¿ä½ç½®</h4>
<p>æ—¶é—´æ ‡ç­¾æ˜¾ç¤ºåœ¨åº•éƒ¨Xè½´ï¼Œéœ€è¦æ ¹æ®ç½‘æ ¼ç«–çº¿ä½ç½®æ‰¾åˆ°å¯¹åº”çš„Kçº¿æ•°æ®ã€‚</p>
<p><strong>ç½‘æ ¼ç«–çº¿Xåæ ‡</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">val <span class="hljs-attr">columnWidth</span> = width / config.gridColumnCount
val <span class="hljs-attr">gridX</span> = columnWidth * i  // iä»<span class="hljs-number">0</span>åˆ°gridColumnCount-<span class="hljs-number">1</span>
</code></pre>
<h4 data-id="heading-12">ä»æ•°æ®ä¸­è·å–æ—¶é—´</h4>
<p><strong>æ ¹æ®Xåæ ‡æ‰¾åˆ°Kçº¿ç´¢å¼•</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">val totalCandleWidth = config<span class="hljs-selector-class">.getTotalCandleWidth</span>()  <span class="hljs-comment">// æ¯æ ¹Kçº¿å®½åº¦</span>
val dataIndex = (gridX / totalCandleWidth)<span class="hljs-selector-class">.toInt</span>()<span class="hljs-selector-class">.coerceIn</span>(<span class="hljs-number">0</span>, visibleData.size - <span class="hljs-number">1</span>)
</code></pre>
<p><strong>é€»è¾‘è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å°†ç½‘æ ¼Xåæ ‡è½¬æ¢ä¸ºKçº¿ç´¢å¼•</li>
<li>ç´¢å¼• = ç½‘æ ¼Xåæ ‡ Ã· æ¯æ ¹Kçº¿å®½åº¦ï¼ˆå–æ•´ï¼‰</li>
<li>é™åˆ¶åœ¨å¯è§æ•°æ®èŒƒå›´å†…</li>
</ul>
<p><strong>è·å–æ—¶é—´å¹¶ç»˜åˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">val dateText = <span class="hljs-built_in">formatDate</span>(visibleData[dataIndex].Date)
<span class="hljs-selector-tag">canvas</span><span class="hljs-selector-class">.drawText</span>(dateText, gridX, y, labelPaint)
</code></pre>
<ul>
<li>ä»å¯¹åº”Kçº¿æ•°æ®çš„ <code>Date</code> å­—æ®µè·å–æ—¶é—´</li>
<li>æ ¼å¼åŒ–åï¼ˆå¦‚ï¼šyyyy/MM/dd â†’ MM/ddï¼‰ç»˜åˆ¶åœ¨ç½‘æ ¼ç«–çº¿ä½ç½®</li>
</ul>
<h3 data-id="heading-13">å…­ã€Case2 ä¸ Case3 çš„åŒºåˆ«</h3>
<h4 data-id="heading-14">Case2ï¼ˆå¯è§åŒºé—´ç‰ˆæœ¬ï¼‰</h4>
<p><strong>åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>ç»˜åˆ¶èœ¡çƒ›å›¾</li>
<li>å¤„ç†å¯è§åŒºé—´</li>
<li>æ— ç½‘æ ¼çº¿å’Œæ ‡ç­¾</li>
</ul>
<h4 data-id="heading-15">Case3ï¼ˆç½‘æ ¼+æ ‡ç­¾ç‰ˆæœ¬ï¼‰</h4>
<p><strong>åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>ç»˜åˆ¶èœ¡çƒ›å›¾</li>
<li>å¤„ç†å¯è§åŒºé—´</li>
<li><strong>æ–°å¢</strong>ï¼šç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼ï¼ˆ4åˆ—5è¡Œï¼‰</li>
<li><strong>æ–°å¢</strong>ï¼šæ˜¾ç¤ºä»·æ ¼æ ‡ç­¾ï¼ˆå³ä¾§Yè½´ï¼‰</li>
<li><strong>æ–°å¢</strong>ï¼šæ˜¾ç¤ºæ—¶é—´æ ‡ç­¾ï¼ˆåº•éƒ¨Xè½´ï¼‰</li>
</ul>
<h4 data-id="heading-16">æ ¸å¿ƒåŒºåˆ«</h4>






























<table><thead><tr><th>åŠŸèƒ½</th><th>Case2</th><th>Case3</th></tr></thead><tbody><tr><td>å¯è§åŒºé—´å¤„ç†</td><td>âœ…</td><td>âœ…</td></tr><tr><td>èƒŒæ™¯ç½‘æ ¼</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ä»·æ ¼æ ‡ç­¾</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æ—¶é—´æ ‡ç­¾</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>
<h3 data-id="heading-17">ä¸ƒã€æ•ˆæœ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cc6bf0ca00a45dcbfeaa4f16bb80ece~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L2b57O75omT5bel5LuU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768927323&amp;x-signature=eRE%2FHO02ZbA1BuCSACS%2FLDfj6Eg%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ -- UIUtilsåŸºç¡€åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7594854295745511460</link>    <guid>https://juejin.cn/post/7594854295745511460</guid>    <pubDate>2026-01-13T16:59:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295745511460" data-draft-id="7594642978696511551" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ -- UIUtilsåŸºç¡€åŠŸèƒ½"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-13T16:59:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çŒ«çŒ«å¤´å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/1283876003519357"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOSä¸€æ¯å†°ç¾å¼çš„æ—¶é—´ -- UIUtilsåŸºç¡€åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1283876003519357/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çŒ«çŒ«å¤´å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T16:59:48.000Z" title="Tue Jan 13 2026 16:59:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ€è¿‘åœ¨å†™çŠ¶æ€ç®¡ç†ç›¸å…³çš„ä»£ç ï¼Œå‘ç° HarmonyOS çš„ <code>UIUtils</code> è¿™ä¸ªå·¥å…·ç±»è¿˜æŒºå®ç”¨çš„ã€‚å®ƒä¸»è¦è§£å†³ä¸€äº›çŠ¶æ€ç®¡ç†æ¡†æ¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„è¾¹ç•Œé—®é¢˜ï¼Œæ¯”å¦‚ä»£ç†å¯¹è±¡ã€V1/V2 æ··ç”¨ã€æ•°æ®ç»‘å®šè¿™äº›åœºæ™¯ã€‚</p>
<p>ä»Šå¤©é¡ºæ‰‹æ•´ç†ä¸€ä¸‹å®ƒçš„å‡ ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œæ–¹ä¾¿ä»¥åæŸ¥ã€‚</p>
<p>è¯¥ç³»åˆ—ä¾æ—§ä¼šå¸¦ç€å¤§å®¶ï¼Œäº†è§£ï¼Œå¼€é˜”ä¸€äº›ä¸æ€ä¹ˆçƒ­é—¨çš„APIï¼Œä¹Ÿå¯èƒ½æ˜¯å·å·è¢«æ›´æ–°çš„APIï¼Œä¹Ÿå¯ä»¥æ˜¯å¥½ç©çš„ï¼Œè—åœ¨å®˜æ–¹æ–‡æ¡£çš„è¾¹è¾¹è§’è§’~å½“ç„¶ä¹Ÿä¼šæœ‰ä¸€äº›APIï¼Œä¹‹å‰æ˜¯æˆ‘ä»¬è¾›è¾›è‹¦è‹¦çš„æ‰‹æ’¸ä»£ç ï¼Œç°åœ¨æœ‰ä¸€ä¸ªAPIèƒ½å¸®æˆ‘ä»¬å¿«é€Ÿå®ç°çš„ï¼Œå¸Œæœ›å¤§å®¶èƒ½æ‰¾å®è—ã€‚</p>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å¯¹æ–‡ç« å†™çš„ä¸æ»¡æ„ã€å‘ç°é”™è¯¯ã€æƒ³åæ§½æˆ–è€…æœ‰æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºã€ç§ä¿¡æˆ–é‚®ä»¶ä¸­æå‡ºï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚ğŸ™</p>
<h2 data-id="heading-1">äºŒã€UIUtil</h2>
<p>çŠ¶æ€ç®¡ç†æ¡†æ¶åœ¨èƒŒååšäº†å¾ˆå¤šå·¥ä½œï¼Œæ¯”å¦‚ç»™å¯¹è±¡åŠ ä»£ç†ã€è‡ªåŠ¨è¿½è¸ªå˜åŒ–ã€è§¦å‘ UI æ›´æ–°ç­‰ç­‰ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç»•è¿‡è¿™äº›æœºåˆ¶ï¼Œæˆ–è€…åœ¨ä¸åŒç‰ˆæœ¬çš„çŠ¶æ€ç®¡ç†ä¹‹é—´åšè½¬æ¢ï¼Œè¿™æ—¶å€™ <code>UIUtils</code> å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p>å®ƒæä¾›çš„åŠŸèƒ½ä¸ç®—å¤šï¼Œä½†æ¯ä¸ªéƒ½æŒºæœ‰é’ˆå¯¹æ€§çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä¸€ä¸ªä¸ªçœ‹ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€getTargetï¼šæ‹¿åˆ°åŸå§‹å¯¹è±¡</h2>
<p>è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå½“ä½ æŠŠä¸€ä¸ªæ™®é€šå¯¹è±¡èµ‹å€¼ç»™ <code>@State</code> æˆ–è€… <code>@Local</code> è¿™æ ·çš„çŠ¶æ€å˜é‡æ—¶ï¼Œæ¡†æ¶ä¼šæŠŠå®ƒåŒ…è£…æˆä»£ç†å¯¹è±¡ã€‚æœ‰æ—¶å€™ä½ éœ€è¦æ‹¿åˆ°åŸå§‹å¯¹è±¡åšæ¯”è¾ƒï¼Œæˆ–è€…ä¼ ç»™æŸäº›ä¸æ¥å—ä»£ç†å¯¹è±¡çš„ APIï¼Œè¿™æ—¶å€™å°±éœ€è¦ <code>getTarget</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NonObservedClass</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;
}

<span class="hljs-keyword">let</span> <span class="hljs-attr">nonObservedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>();

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">someClass</span>: <span class="hljs-title class_">NonObservedClass</span> = nonObservedClass;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-comment">// ç›´æ¥æ¯”è¾ƒæ˜¯ falseï¼Œå› ä¸º this.someClass æ˜¯ä»£ç†å¯¹è±¡</span>
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`this.someClass === nonObservedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.someClass === nonObservedClass}</span>`</span>) <span class="hljs-comment">// false</span>
      
      <span class="hljs-comment">// ç”¨ getTarget æ‹¿åˆ°åŸå§‹å¯¹è±¡ï¼Œå°±èƒ½æ¯”è¾ƒäº†</span>
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`UIUtils.getTarget(this.someClass) === nonObservedClass: <span class="hljs-subst">${UIUtils.getTarget(<span class="hljs-variable language_">this</span>.someClass) ===
        nonObservedClass}</span>`</span>) <span class="hljs-comment">// true</span>
    }
  }
}
</code></pre>
<p>å®é™…å¼€å‘ä¸­ï¼Œè¿™ç§åœºæ™¯å…¶å®ä¸ç®—ç‰¹åˆ«å¸¸è§ï¼Œä½†é‡åˆ°çš„æ—¶å€™ç¡®å®èƒ½è§£å†³é—®é¢˜ã€‚æ¯”å¦‚ä½ è¦æŠŠçŠ¶æ€å¯¹è±¡åºåˆ—åŒ–ï¼Œæˆ–è€…ä¼ ç»™ç¬¬ä¸‰æ–¹åº“ï¼Œå¯èƒ½å°±éœ€è¦å…ˆæ‹¿åˆ°åŸå§‹å¯¹è±¡ã€‚</p>
<h3 data-id="heading-3">1ã€V2 çŠ¶æ€ç®¡ç†çš„é™åˆ¶</h3>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ V2 çŠ¶æ€ç®¡ç†ä¸­ï¼Œ<code>getTarget</code> æœ‰ä¸ªé™åˆ¶ã€‚çŠ¶æ€ç®¡ç† V2 è£…é¥°å™¨ä¼šä¸ºè£…é¥°çš„å˜é‡ç”Ÿæˆ getter å’Œ setter æ–¹æ³•ï¼ŒåŒæ—¶ä¸ºåŸæœ‰å˜é‡åæ·»åŠ  <code>__ob_</code> å‰ç¼€ã€‚å‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œ<code>getTarget</code> æ¥å£ä¸ä¼šå¯¹ V2 è£…é¥°å™¨ç”Ÿæˆçš„å‰ç¼€è¿›è¡Œå¤„ç†ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ å‘ <code>getTarget</code> ä¼ å…¥ <code>@ObservedV2</code> è£…é¥°çš„ç±»å¯¹è±¡å®ä¾‹ï¼Œè¿”å›çš„å¯¹è±¡ä¾æ—§ä¸ºå¯¹è±¡æœ¬èº«ï¼Œä¸”è¢« <code>@Trace</code> è£…é¥°çš„å±æ€§åä»æœ‰ <code>__ob_</code> å‰ç¼€ã€‚</p>
<p>è¿™ä¸ªå‰ç¼€ä¸å½±å“å¯¹è±¡å±æ€§çš„ getter å’Œ setter æ–¹æ³•ä½¿ç”¨ï¼Œä½†å¦‚æœä½ éœ€è¦åºåˆ—åŒ–ï¼Œå¯èƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@ObservedV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClassV2</span> {
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'é»˜è®¤åç§°'</span>;
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">FormDataClassPage</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">FormDataClassV2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClassV2</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'åºåˆ—åŒ–'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// åºåˆ—åŒ–åä¼šæœ‰ __ob_ å‰ç¼€</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'åºåˆ—åŒ–åŸå§‹å€¼ï¼š'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>));
          <span class="hljs-comment">// è¾“å‡ºç±»ä¼¼ï¼š{"__ob_name":"é»˜è®¤åç§°","__ob_price":0}</span>
        });
    }
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>);
  }
}
</code></pre>
<h3 data-id="heading-4">2ã€è§£å†³æ–¹æ¡ˆ</h3>
<p>å¦‚æœæ¶‰åŠåºåˆ—åŒ–ä¸ååºåˆ—åŒ–ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥å»é™¤å‰ç¼€ï¼š</p>
<p><strong>æ–¹æ¡ˆä¸€ï¼šåˆ›å»ºæ–°ç±»è½¬æ¢</strong></p>
<p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç±»ï¼Œç±»ä¸­å±æ€§åå’ŒåŸæ¥çš„å¯¹è±¡ç›¸åŒï¼Œç”¨åŸæ¥å¯¹è±¡çš„å€¼æ¥åˆå§‹åŒ–æ–°ç±»çš„å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@ObservedV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClassV2</span> {
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'é»˜è®¤åç§°'</span>;
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClass</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">v: FormDataClassV2</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = v.<span class="hljs-property">name</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">price</span> = v.<span class="hljs-property">price</span>;
  }
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">FormDataClassPage</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">FormDataClassV2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClassV2</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'åºåˆ—åŒ–'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'åºåˆ—åŒ–åŸå§‹å€¼ï¼š'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>));
          <span class="hljs-comment">// è½¬æ¢ååºåˆ—åŒ–ï¼Œæ²¡æœ‰å‰ç¼€</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'åºåˆ—åŒ–è½¬æ¢åï¼š'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClass</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>)));
        });
    }
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>);
  }
}
</code></pre>
<p>è¿™ç§æ–¹æ¡ˆæ¯”è¾ƒç¨³å¦¥ï¼Œç±»å‹å®‰å…¨ï¼Œä½†éœ€è¦é¢å¤–ç»´æŠ¤ä¸€ä¸ªç±»ã€‚</p>
<p><strong>æ–¹æ¡ˆäºŒï¼šå­—ç¬¦ä¸²æ›¿æ¢</strong></p>
<p>å¦‚æœåºåˆ—åŒ–å <code>__ob_</code> å‰ç¼€ä¼šå¯¼è‡´ååºåˆ—åŒ–å¼‚å¸¸ï¼Œå¯ä»¥è€ƒè™‘é‡‡ç”¨ä¿®æ”¹åºåˆ—åŒ–åçš„å­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œå»é™¤ <code>__ob_</code> å‰ç¼€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@ObservedV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FormDataClassV2</span> {
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'é»˜è®¤åç§°'</span>;
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">FormDataClassPage</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">FormDataClassV2</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FormDataClassV2</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'åºåˆ—åŒ–'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'åºåˆ—åŒ–åŸå§‹å€¼ï¼š'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>));
          <span class="hljs-comment">// ç”¨æ­£åˆ™æ›¿æ¢å»é™¤å‰ç¼€</span>
          <span class="hljs-keyword">let</span> newData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">data</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/__ob_/g</span>, <span class="hljs-string">''</span>);
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'åºåˆ—åŒ–è¿‡æ»¤åï¼š'</span>, newData);
        });
    }
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>);
  }
}
</code></pre>
<p>è¿™ç§æ–¹æ¡ˆç®€å•ç›´æ¥ï¼Œä½†è¦æ³¨æ„å¦‚æœå±æ€§åæœ¬èº«åŒ…å« <code>__ob_</code> å­—ç¬¦ä¸²ï¼Œä¹Ÿä¼šè¢«æ›¿æ¢æ‰ã€‚æ‰€ä»¥å¦‚æœæ•°æ®æ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®ç”¨æ–¹æ¡ˆä¸€ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œ<code>__ob_</code> å‰ç¼€æ˜¯ V2 çŠ¶æ€ç®¡ç†çš„å®ç°ç»†èŠ‚ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸å½±å“ä½¿ç”¨ã€‚åªæœ‰åœ¨åºåˆ—åŒ–åœºæ™¯ä¸‹æ‰éœ€è¦æ³¨æ„è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-5">å››ã€makeObservedï¼šè®©æ™®é€šæ•°æ®å¯è§‚å¯Ÿ</h2>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨ V2 çš„çŠ¶æ€ç®¡ç†ä¸­æ¯”è¾ƒå¸¸ç”¨ã€‚æœ‰æ—¶å€™ä½ æ‹¿åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡ï¼ˆæ¯”å¦‚ä» JSON.parse æ¥çš„ï¼Œæˆ–è€…æ™®é€š class å®ä¾‹ï¼‰ï¼Œä½†ä½ æƒ³è®©å®ƒå˜æˆå¯è§‚å¯Ÿçš„ï¼Œè¿™æ ·ä¿®æ”¹å±æ€§æ—¶ UI èƒ½è‡ªåŠ¨æ›´æ–°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NonObservedClass</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-comment">// ç”¨ makeObserved åŒ…è£…åï¼Œä¿®æ”¹ name ä¼šè§¦å‘ UI æ›´æ–°</span>
  <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeObserved</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>());
  
  <span class="hljs-comment">// æ™®é€šå¯¹è±¡ï¼Œä¿®æ”¹ä¸ä¼šè§¦å‘æ›´æ–°</span>
  <span class="hljs-attr">nonObservedClass</span>: <span class="hljs-title class_">NonObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NonObservedClass</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>; <span class="hljs-comment">// ä¼šåˆ·æ–°</span>
        })
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`nonObservedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.nonObservedClass.name}</span>`</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">nonObservedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>; <span class="hljs-comment">// ä¸ä¼šåˆ·æ–°</span>
        })
    }
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œ<code>makeObserved</code> æ”¯æŒçš„ç±»å‹è¿˜æŒºå¤šçš„ï¼šæ™®é€š classã€JSON.parse è¿”å›çš„å¯¹è±¡ã€Arrayã€Mapã€Setã€Dateï¼Œè¿˜æœ‰ collections é‡Œçš„ç±»å‹ã€‚ä½†å¦‚æœæ˜¯ <code>@Sendable</code> ä¿®é¥°çš„ classï¼Œå°±ä¸æ”¯æŒäº†ã€‚</p>
<h2 data-id="heading-6">äº”ã€V1 å’Œ V2 æ··ç”¨çš„é—®é¢˜</h2>
<p>HarmonyOS çš„çŠ¶æ€ç®¡ç†æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼ŒV1 å’Œ V2ã€‚å¦‚æœä½ åœ¨ç»´æŠ¤è€é¡¹ç›®ï¼Œæˆ–è€…éœ€è¦é€æ­¥è¿ç§»ï¼Œå¯èƒ½ä¼šé‡åˆ°æ··ç”¨çš„æƒ…å†µã€‚è¿™æ—¶å€™æœ‰ä¸¤ä¸ªæ–¹æ³•èƒ½å¸®ä¸Šå¿™ã€‚è¿™ä¸ªå¦‚æœä¸æ˜¯å¤©å¤©åˆ·è¿™ä¸ªæ–‡æ¡£ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶ä¸€å®šæ²¡æœ‰æ³¨æ„åˆ°çš„ï¼Œå˜¿å˜¿</p>
<h3 data-id="heading-7">1ã€enableV2Compatibilityï¼šè®© V1 çŠ¶æ€åœ¨ V2 ç»„ä»¶ä¸­å¯è§‚å¯Ÿ</h3>
<p>å¦‚æœä½ åœ¨ <code>@Component</code>ï¼ˆV1ï¼‰é‡Œå®šä¹‰äº† <code>@State</code>ï¼Œç„¶åæƒ³ä¼ ç»™ <code>@ComponentV2</code>ï¼ˆV2ï¼‰ä½¿ç”¨ï¼Œç›´æ¥ç”¨æ˜¯ä¸è¡Œçš„ã€‚V2 ç»„ä»¶è§‚å¯Ÿä¸åˆ° V1 çŠ¶æ€çš„å˜åŒ–ã€‚</p>
<p>è¿™æ—¶å€™å¯ä»¥ç”¨ <code>enableV2Compatibility</code> åŒ…è£…ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Observed</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ObservedClass</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">CompV1</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`@State observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'State'</span>; <span class="hljs-comment">// åˆ·æ–°</span>
        })
      <span class="hljs-comment">// åŒ…è£…åä¼ ç»™ V2 ç»„ä»¶ï¼ŒV2 å°±èƒ½è§‚å¯Ÿåˆ°ç¬¬ä¸€å±‚çš„å˜åŒ–äº†</span>
      <span class="hljs-title class_">CompV2</span>({ <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">enableV2Compatibility</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>) })
    }
  }
}

<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">CompV2</span> {
  <span class="hljs-meta">@Param</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`@Param observedClass: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)
      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Param'</span>; <span class="hljs-comment">// åˆ·æ–°</span>
      })
  }
}
</code></pre>
<p>æ³¨æ„ï¼ŒV2 åªèƒ½è§‚å¯Ÿåˆ°ç¬¬ä¸€å±‚çš„å˜åŒ–ã€‚å¦‚æœ <code>ObservedClass</code> å†…éƒ¨è¿˜æœ‰åµŒå¥—å¯¹è±¡ï¼Œä¿®æ”¹åµŒå¥—å¯¹è±¡çš„å±æ€§ï¼ŒV2 æ˜¯è§‚å¯Ÿä¸åˆ°çš„ã€‚</p>
<h3 data-id="heading-8">2ã€makeV1Observedï¼šåŒ…è£…æˆ V1 å¯è§‚å¯Ÿå¯¹è±¡</h3>
<p>è¿™ä¸ªåŠŸèƒ½å’Œ <code>makeObserved</code> ç±»ä¼¼ï¼Œä½†åŒ…è£…å‡ºæ¥çš„æ˜¯ V1 çš„å¯è§‚å¯Ÿå¯¹è±¡ã€‚ä¸»è¦ç”¨åœ¨éœ€è¦åˆå§‹åŒ– <code>@ObjectLink</code> çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Outer</span> {
  <span class="hljs-attr">outerValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'outer'</span>;
  <span class="hljs-attr">inner</span>: <span class="hljs-title class_">Inner</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">inner: Inner</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">inner</span> = inner;
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Inner</span> {
  <span class="hljs-attr">interValue</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'inner'</span>;
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-comment">// makeV1Observed çš„è¿”å›å€¼å¯ä»¥åˆå§‹åŒ– @ObjectLink</span>
  <span class="hljs-meta">@State</span> <span class="hljs-attr">outer</span>: <span class="hljs-title class_">Outer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Outer</span>(<span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">makeV1Observed</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Inner</span>()));

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Child</span>({ <span class="hljs-attr">inner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">outer</span>.<span class="hljs-property">inner</span> })
    }
    .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
  }
}

<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">Child</span> {
  <span class="hljs-meta">@ObjectLink</span> <span class="hljs-attr">inner</span>: <span class="hljs-title class_">Inner</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Text</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.inner.interValue}</span>`</span>)
      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">inner</span>.<span class="hljs-property">interValue</span> += <span class="hljs-string">'!'</span>;
      })
  }
}
</code></pre>
<p><code>makeV1Observed</code> ä¸æ”¯æŒ collections ç±»å‹å’Œ <code>@Sendable</code> ä¿®é¥°çš„ classï¼Œä¹Ÿä¸æ”¯æŒ V2 çš„æ•°æ®å’Œ <code>makeObserved</code> çš„è¿”å›å€¼ã€‚å¦‚æœä¼ äº†ä¸æ”¯æŒçš„å‚æ•°ï¼Œä¼šç›´æ¥è¿”å›åŸå¯¹è±¡ï¼Œä¸ä¼šæŠ¥é”™ã€‚</p>
<h2 data-id="heading-9">å…­ã€makeBindingï¼šåˆ›å»ºæ•°æ®ç»‘å®š</h2>
<p>è¿™ä¸ªåŠŸèƒ½åœ¨å†™ <code>@Builder</code> å‡½æ•°æ—¶æ¯”è¾ƒæœ‰ç”¨ã€‚æœ‰æ—¶å€™ä½ æƒ³è®© <code>@Builder</code> æ¥æ”¶ä¸€ä¸ªå¯è¯»æˆ–å¯å†™çš„æ•°æ®ç»‘å®šï¼Œè€Œä¸æ˜¯ç›´æ¥ä¼ å€¼ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨ <code>makeBinding</code> åˆ›å»ºã€‚</p>
<h3 data-id="heading-10">1ã€åªè¯»ç»‘å®š</h3>
<p>å¦‚æœ <code>@Builder</code> çš„å‚æ•°ç±»å‹æ˜¯ <code>Binding&lt;T&gt;</code>ï¼Œä½ å¯ä»¥ç”¨ <code>makeBinding</code> åˆ›å»ºä¸€ä¸ªåªè¯»ç»‘å®šï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num1: Binding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {
  <span class="hljs-title class_">Row</span>() {
    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num1.value}</span>`</span>)
      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// num1.value += 1; ä¼šæŠ¥é”™ï¼ŒBinding ç±»å‹ä¸æ”¯æŒä¿®æ”¹</span>
      })
  }
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">CompV2</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number1</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)
      <span class="hljs-comment">// æ¯æ¬¡è®¿é—® .value æ—¶ï¼Œä¼šé‡æ–°æ‰§è¡Œ getter å‡½æ•°ï¼Œæ‹¿åˆ°æœ€æ–°å€¼</span>
      <span class="hljs-title class_">CustomButton</span>(
        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(
          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number1</span> <span class="hljs-comment">// GetterCallback</span>
        )
      )
    }
  }
}
</code></pre>
<h3 data-id="heading-11">2ã€å¯å†™ç»‘å®š</h3>
<p>å¦‚æœéœ€è¦åŒå‘ç»‘å®šï¼Œå¯ä»¥ä¼ ä¸¤ä¸ªå‚æ•°ï¼šgetter å’Œ setterï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Builder</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomButton</span>(<span class="hljs-params">num2: MutableBinding&lt;<span class="hljs-built_in">number</span>&gt;</span>) {
  <span class="hljs-title class_">Row</span>() {
    <span class="hljs-title class_">Button</span>(<span class="hljs-string">`Custom Button: <span class="hljs-subst">${num2.value}</span>`</span>)
      .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// MutableBinding æ”¯æŒä¿®æ”¹</span>
        num2.<span class="hljs-property">value</span> += <span class="hljs-number">1</span>;
      })
  }
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">CompV2</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">number2</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">10</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">'parent component'</span>)
      <span class="hljs-title class_">CustomButton</span>(
        <span class="hljs-title class_">UIUtils</span>.<span class="hljs-property">makeBinding</span>&lt;<span class="hljs-built_in">number</span>&gt;(
          <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span>, <span class="hljs-comment">// GetterCallback</span>
          <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">number2</span> = val; <span class="hljs-comment">// SetterCallbackï¼Œä¿®æ”¹æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨</span>
          }
        )
      )
    }
  }
}
</code></pre>
<p>æ³¨æ„ï¼Œå¦‚æœåˆ›å»º <code>MutableBinding</code> æ—¶æ²¡ä¼  setterï¼Œä¿®æ”¹ <code>.value</code> ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯ã€‚æ‰€ä»¥éœ€è¦åŒå‘ç»‘å®šæ—¶ï¼Œsetter æ˜¯å¿…é¡»çš„ã€‚</p>
<h2 data-id="heading-12">ä¸ƒã€addMonitor å’Œ clearMonitorï¼šåŠ¨æ€ç›‘å¬</h2>
<p>åœ¨ V2 çš„çŠ¶æ€ç®¡ç†ä¸­ï¼Œä½ å¯ä»¥ç”¨ <code>@Monitor</code> è£…é¥°å™¨ç›‘å¬çŠ¶æ€å˜åŒ–ã€‚ä½†æœ‰æ—¶å€™ä½ éœ€è¦åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤ç›‘å¬ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨ <code>addMonitor</code> å’Œ <code>clearMonitor</code>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@ObservedV2</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ObservedClass</span> {
  <span class="hljs-meta">@Trace</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'Tom'</span>;

  <span class="hljs-title function_">onChange</span>(<span class="hljs-params">mon: IMonitor</span>) {
    mon.<span class="hljs-property">dirty</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ObservedClass property <span class="hljs-subst">${path}</span> change from <span class="hljs-subst">${mon.value(path)?.before}</span> to <span class="hljs-subst">${mon.value(path)?.now}</span>`</span>);
    });
  }

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åœ¨æ„é€ æ–¹æ³•é‡Œæ·»åŠ ç›‘å¬ï¼ŒisSynchronous: true è¡¨ç¤ºåŒæ­¥å›è°ƒ</span>
    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">addMonitor</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-string">'name'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">onChange</span>, { <span class="hljs-attr">isSynchronous</span>: <span class="hljs-literal">true</span> });
  }
}

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@ComponentV2</span>
struct <span class="hljs-title class_">Index</span> {
  <span class="hljs-meta">@Local</span> <span class="hljs-attr">observedClass</span>: <span class="hljs-title class_">ObservedClass</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObservedClass</span>();

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`name: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.observedClass.name}</span>`</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jack'</span>;
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'Jane'</span>;
        })
    }
  }
}
</code></pre>
<p><code>addMonitor</code> åªæ”¯æŒ <code>@ComponentV2</code> å’Œ <code>@ObservedV2</code> å®ä¾‹ï¼Œå¦‚æœä¼ äº†ä¸æ”¯æŒçš„ç±»å‹ä¼šæŠ›è¿è¡Œæ—¶é”™è¯¯ã€‚</p>
<p>åˆ é™¤ç›‘å¬ç”¨ <code>clearMonitor</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Button</span>(<span class="hljs-string">'clear monitor'</span>)
  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åˆ é™¤æŒ‡å®šè·¯å¾„çš„æŒ‡å®šç›‘å¬å‡½æ•°</span>
    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">clearMonitor</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>, <span class="hljs-string">'age'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">observedClass</span>.<span class="hljs-property">onChange</span>);
    
    <span class="hljs-comment">// å¦‚æœä¸ä¼  monitorCallbackï¼Œä¼šåˆ é™¤è¯¥è·¯å¾„çš„æ‰€æœ‰ç›‘å¬å‡½æ•°</span>
    <span class="hljs-comment">// UIUtils.clearMonitor(this.observedClass, 'age');</span>
  })
</code></pre>
<h2 data-id="heading-13">å…«ã€åŒæ­¥åˆ·æ–°ï¼šapplySyncã€flushUpdatesã€flushUIUpdates</h2>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ˜¯ç”¨æ¥åŒæ­¥åˆ·æ–°çŠ¶æ€å˜åŒ–çš„ï¼Œä½†ä½œç”¨èŒƒå›´ä¸åŒã€‚</p>
<h3 data-id="heading-14">1ã€applySyncï¼šåˆ·æ–°é—­åŒ…å†…çš„ä¿®æ”¹</h3>
<p><code>applySync</code> æ¥æ”¶ä¸€ä¸ªé—­åŒ…å‡½æ•°ï¼Œåªåˆ·æ–°é—­åŒ…å†…çš„çŠ¶æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Button</span>(<span class="hljs-string">'change size'</span>)
  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// é—­åŒ…å†…çš„ä¿®æ”¹ä¼šåŒæ­¥æ‰§è¡Œï¼ŒåŒ…æ‹¬æ›´æ–° @Computedã€@Monitor å›è°ƒå’Œé‡æ–°æ¸²æŸ“ UI</span>
    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">applySync</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">100</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">100</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello World'</span>;
    });
    
    <span class="hljs-comment">// åŠ¨ç”»ä»åˆ·æ–°åçš„çŠ¶æ€å¼€å§‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({
      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>
    }, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello ArkUI'</span>;
    });
  })
</code></pre>
<h3 data-id="heading-15">2ã€flushUpdatesï¼šåˆ·æ–°æ‰€æœ‰ä¹‹å‰çš„ä¿®æ”¹</h3>
<p><code>flushUpdates</code> ä¼šåŒæ­¥åˆ·æ–°è°ƒç”¨ä¹‹å‰æ‰€æœ‰çš„çŠ¶æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Button</span>(<span class="hljs-string">'change size'</span>)
  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello World'</span>;
    
    <span class="hljs-comment">// åˆ·æ–°ä¹‹å‰æ‰€æœ‰çš„ä¿®æ”¹</span>
    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">flushUpdates</span>();
    
    <span class="hljs-comment">// åŠ¨ç”»ä»åˆ·æ–°åçš„çŠ¶æ€å¼€å§‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({
      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>
    }, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello ArkUI'</span>;
    });
  })
</code></pre>
<h3 data-id="heading-16">3ã€flushUIUpdatesï¼šåªåˆ·æ–° UIï¼Œä¸æ‰§è¡Œè®¡ç®—å’Œå›è°ƒ</h3>
<p><code>flushUIUpdates</code> åªåŒæ­¥æ ‡è„ UI èŠ‚ç‚¹ï¼Œä¸ä¼šæ‰§è¡Œ <code>@Computed</code> è®¡ç®—å’Œ <code>@Monitor</code> å›è°ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title class_">Button</span>(<span class="hljs-string">'change size'</span>)
  .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello World'</span>;
    
    <span class="hljs-comment">// åªåˆ·æ–° UIï¼Œä¸æ‰§è¡Œè®¡ç®—å’Œå›è°ƒ</span>
    <span class="hljs-title class_">UIUtils</span>.<span class="hljs-title function_">flushUIUpdates</span>();
    
    <span class="hljs-comment">// åŠ¨ç”»ä»åˆ·æ–°åçš„çŠ¶æ€å¼€å§‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUIContext</span>().<span class="hljs-title function_">animateTo</span>({
      <span class="hljs-attr">duration</span>: <span class="hljs-number">1000</span>
    }, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">w</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">h</span> = <span class="hljs-number">200</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'Hello ArkUI'</span>;
    });
  })
</code></pre>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•åœ¨åŠ¨ç”»åœºæ™¯ä¸‹æ¯”è¾ƒæœ‰ç”¨ã€‚æ¯”å¦‚ä½ æƒ³åœ¨åŠ¨ç”»å¼€å§‹å‰ç¡®ä¿ UI å·²ç»æ›´æ–°åˆ°æŸä¸ªçŠ¶æ€ï¼Œå°±å¯ä»¥ç”¨å®ƒä»¬ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½ä¸èƒ½åœ¨ <code>@Computed</code> é‡Œè°ƒç”¨ï¼Œ<code>flushUpdates</code> å’Œ <code>flushUIUpdates</code> ä¹Ÿä¸èƒ½åœ¨ <code>@Monitor</code> å›è°ƒé‡Œè°ƒç”¨ã€‚</p>
<h2 data-id="heading-17">ä¹ã€æ€»ç»“</h2>
<p><code>UIUtils</code> æä¾›çš„åŠŸèƒ½çœ‹ç€ä¸å¤šï¼Œä½†æ¯ä¸ªéƒ½æŒºå®ç”¨çš„ï¼ˆéå¸¸å®ç”¨äº†ï¼Œå±äºæ˜¯ï¼‰ã€‚ä¸»è¦è§£å†³è¿™äº›åœºæ™¯ï¼š</p>
<ol>
<li><strong>ä»£ç†å¯¹è±¡é—®é¢˜</strong>ï¼šç”¨ <code>getTarget</code> æ‹¿åˆ°åŸå§‹å¯¹è±¡</li>
<li><strong>æ™®é€šæ•°æ®å˜å¯è§‚å¯Ÿ</strong>ï¼šç”¨ <code>makeObserved</code> æˆ– <code>makeV1Observed</code></li>
<li><strong>V1/V2 æ··ç”¨</strong>ï¼šç”¨ <code>enableV2Compatibility</code> è®© V1 çŠ¶æ€åœ¨ V2 ä¸­å¯è§‚å¯Ÿ</li>
<li><strong>æ•°æ®ç»‘å®š</strong>ï¼šç”¨ <code>makeBinding</code> åˆ›å»º <code>Binding</code> æˆ– <code>MutableBinding</code></li>
<li><strong>åŠ¨æ€ç›‘å¬</strong>ï¼šç”¨ <code>addMonitor</code> å’Œ <code>clearMonitor</code> ç®¡ç†ç›‘å¬</li>
<li><strong>åŒæ­¥åˆ·æ–°</strong>ï¼šç”¨ <code>applySync</code>ã€<code>flushUpdates</code>ã€<code>flushUIUpdates</code> æ§åˆ¶åˆ·æ–°æ—¶æœº</li>
</ol>
<p>é‡åˆ°çŠ¶æ€ç®¡ç†çš„è¾¹ç•Œé—®é¢˜æ—¶ï¼Œç¡®å®èƒ½å¸®ä¸Šå¿™ã€‚å»ºè®®å…ˆäº†è§£è¿™äº›åŠŸèƒ½çš„å­˜åœ¨ï¼Œéœ€è¦çš„æ—¶å€™å†æŸ¥æ–‡æ¡£ã€‚ç”¨æ—¶ä¸æ…Œ~~~</p>
<h2 data-id="heading-18">åã€æœ€å</h2>
<p>å¦‚æœæ‚¨æœ‰ä»»ä½•ç–‘é—®ã€å¯¹æ–‡ç« å†™çš„ä¸æ»¡æ„ã€å‘ç°é”™è¯¯ã€æƒ³åæ§½æˆ–è€…æœ‰æ›´å¥½çš„æƒ³æ³•ï¼Œ<strong>æ¬¢è¿åœ¨è¯„è®ºã€ç§ä¿¡æˆ–é‚®ä»¶ä¸­æå‡º</strong>ï¼Œéå¸¸æ„Ÿè°¢æ‚¨çš„æ”¯æŒã€‚ğŸ™</p>
<p>è°¢è°¢è¯»è€…å§¥çˆ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“æ¡å½¢å›¾é‡ä¸Šæåæ ‡ï¼šå¾„å‘ä¸åœ†å½¢æ¡å½¢å›¾çš„è§†è§‰é©å‘½]]></title>    <link>https://juejin.cn/post/7594854295745445924</link>    <guid>https://juejin.cn/post/7594854295745445924</guid>    <pubDate>2026-01-13T15:08:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594854295745445924" data-draft-id="7594642978696396863" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“æ¡å½¢å›¾é‡ä¸Šæåæ ‡ï¼šå¾„å‘ä¸åœ†å½¢æ¡å½¢å›¾çš„è§†è§‰é©å‘½"/> <meta itemprop="keywords" content="Python,æ•°æ®å¯è§†åŒ–,æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2026-01-13T15:08:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“æ¡å½¢å›¾é‡ä¸Šæåæ ‡ï¼šå¾„å‘ä¸åœ†å½¢æ¡å½¢å›¾çš„è§†è§‰é©å‘½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T15:08:52.000Z" title="Tue Jan 13 2026 15:08:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£ç«™åœ¨ä¸€ä¸ªåœ†å½¢å¹¿åœºçš„ä¸­å¿ƒï¼Œå‘¨å›´å‡åŒ€æ’åˆ—ç€12æ ¹é«˜åº¦ä¸åŒçš„ç¯æŸ±ï¼Œè¿™å°±æ˜¯<strong>å¾„å‘æ¡å½¢å›¾</strong>å¸¦ç»™æˆ‘ä»¬çš„è§†è§‰ä½“éªŒã€‚</p>
<p>åœ¨æ•°æ®å¯è§†åŒ–é¢†åŸŸï¼Œæˆ‘ä»¬å¸¸å¸¸æ»¡è¶³äºä¼ ç»Ÿçš„ç›´è§’åæ ‡ç³»æ¡å½¢å›¾ï¼Œä½†å½“æ•°æ®å…·æœ‰å‘¨æœŸæ€§æˆ–æ¯”è¾ƒæ€§æ—¶ï¼Œ<strong>å¾„å‘æ¡å½¢å›¾</strong>å’Œ<strong>åœ†å½¢æ¡å½¢å›¾</strong>ä¸ºæˆ‘ä»¬æ‰“å¼€äº†æ–°çš„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-0">1. è®¾è®¡åŸç†</h2>
<p>è¿™ä¸¤ç§å›¾è¡¨æŠŠä¼ ç»Ÿçš„<strong>ç¬›å¡å°”åæ ‡ç³»</strong>æ¢æˆ<strong>æåæ ‡ç³»</strong>ï¼šè§’åº¦è¡¨ç¤ºç±»åˆ«ï¼ŒåŠå¾„æˆ–è§’åº¦é•¿åº¦è¡¨ç¤ºæ•°å€¼ã€‚</p>
<h3 data-id="heading-1">1.1. å¾„å‘æ¡å½¢å›¾</h3>
<p><strong>å¾„å‘æ¡å½¢å›¾</strong>æœ¬è´¨ä¸Šæ˜¯å°†ä¼ ç»Ÿæ¡å½¢å›¾çš„ç›´è§’åæ ‡ç³»è½¬æ¢ä¸ºæåæ ‡ç³»ã€‚</p>
<p>åœ¨æåæ ‡ç³»ä¸­ï¼Œæ¯ä¸ªæ•°æ®ç‚¹ä¸å†ç”±<code>(x, y)</code>å®šä½ï¼Œè€Œæ˜¯ç”±**(è§’åº¦, åŠå¾„)**ç¡®å®šï¼Œæ¡å½¢çš„é«˜åº¦ï¼ˆæˆ–é•¿åº¦ï¼‰ç”±åŠå¾„å€¼è¡¨ç¤ºï¼Œè€Œæ¡å½¢çš„æ’åˆ—åˆ™æ²¿ç€åœ†å‘¨æ–¹å‘ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6879e62203745eaa4bb3c31bedcd2d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768921732&amp;x-signature=LbRhV4s5%2BETXg9aK56%2FQQd7xsUg%3D" alt="" loading="lazy"/></p>
<p><strong>è®¾è®¡çµæ„Ÿ</strong>ï¼šå¦‚åŒé’Ÿè¡¨çš„æŒ‡é’ˆæˆ–é›·è¾¾çš„æ‰«æçº¿ï¼Œå¾„å‘æ¡å½¢å›¾å€Ÿé‰´äº†è‡ªç„¶ç•Œå’Œäººå·¥åˆ¶å“ä¸­å¸¸è§çš„åœ†å½¢å¸ƒå±€ï¼Œåˆ©ç”¨äº†äººç±»å¯¹è§’åº¦å’Œå¯¹ç§°æ€§çš„å¤©ç„¶æ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">1.2. åœ†å½¢æ¡å½¢å›¾</h3>
<p><strong>åœ†å½¢æ¡å½¢å›¾</strong>æ˜¯å¾„å‘æ¡å½¢å›¾çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œå®ƒå›ºå®šäº†èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œä½¿æ‰€æœ‰æ¡å½¢éƒ½åœ¨åŒä¸€åœ†å‘¨ä¸Šå¼€å§‹ï¼Œåªåœ¨åŠå¾„æ–¹å‘ä¸Šå»¶ä¼¸ã€‚</p>
<p>è¿™ç§è®¾è®¡è§£å†³äº†å®Œå…¨å¾„å‘å¸ƒå±€å¯èƒ½å¯¼è‡´çš„<strong>æ•°æ®æ¯”è¾ƒå›°éš¾</strong>é—®é¢˜ï¼Œå› ä¸ºæ‰€æœ‰æ¡å½¢çš„åŸºå‡†çº¿æ˜¯ä¸€è‡´çš„ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c754050338934027b3a5be3bfa654a5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768921732&amp;x-signature=0XksSuRfFWImzNv7TH0tSR%2F%2FPxo%3D" alt="" loading="lazy"/></p>
<p><strong>è®¾è®¡æ¯”å–»</strong>ï¼šæƒ³è±¡ä¸€ç»„è·³é«˜è¿åŠ¨å‘˜ï¼Œä»–ä»¬éƒ½ä»åŒä¸€é«˜åº¦èµ·è·³ï¼Œåªæ˜¯è·³è·ƒçš„é«˜åº¦ä¸åŒâ€”â€”åœ†å½¢æ¡å½¢å›¾å°±æ˜¯è¿™æ ·å…¬å¹³çš„"ç«æŠ€åœº"ã€‚</p>
<h2 data-id="heading-3">2. åº”ç”¨ç¤ºä¾‹</h2>
<p>ä¸‹é¢é€šè¿‡ç¤ºä¾‹æ¥æ¼”ç¤ºè¿™ä¸¤ç§å›¾åœ¨å®é™…åœºæ™¯ä¸­çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-4">2.1. å¾„å‘æ¡å½¢å›¾</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- 1. æ„é€ æµ‹è¯•æ•°æ® ---</span>
<span class="hljs-comment"># å‡è®¾æˆ‘ä»¬æƒ³æ¯”è¾ƒä¸€å¹´ä¸­æ¯ä¸ªæœˆçš„å¹³å‡é™æ°´é‡</span>
æœˆä»½ = [
    <span class="hljs-string">"ä¸€æœˆ"</span>,
    <span class="hljs-string">"äºŒæœˆ"</span>,
    <span class="hljs-string">"ä¸‰æœˆ"</span>,
    <span class="hljs-string">"å››æœˆ"</span>,
    <span class="hljs-string">"äº”æœˆ"</span>,
    <span class="hljs-string">"å…­æœˆ"</span>,
    <span class="hljs-string">"ä¸ƒæœˆ"</span>,
    <span class="hljs-string">"å…«æœˆ"</span>,
    <span class="hljs-string">"ä¹æœˆ"</span>,
    <span class="hljs-string">"åæœˆ"</span>,
    <span class="hljs-string">"åä¸€æœˆ"</span>,
    <span class="hljs-string">"åäºŒæœˆ"</span>,
]
<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿçš„é™æ°´é‡æ•°æ® (å•ä½: mm)</span>
np.random.seed(<span class="hljs-number">42</span>)  <span class="hljs-comment"># ä¸ºäº†ç»“æœå¯å¤ç°</span>
é™æ°´é‡ = np.random.uniform(<span class="hljs-number">30</span>, <span class="hljs-number">150</span>, size=<span class="hljs-built_in">len</span>(æœˆä»½))  <span class="hljs-comment"># éšæœºç”Ÿæˆ30-150mmçš„æ•°æ®</span>

<span class="hljs-comment"># --- 2. åˆ›å»ºå›¾å½¢ ---</span>
fig, (ax1, ax2) = plt.subplots(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">14</span>, <span class="hljs-number">7</span>), facecolor=<span class="hljs-string">"white"</span>)

<span class="hljs-comment"># --- 2.1 ç»˜åˆ¶ä¼ ç»Ÿæ¡å½¢å›¾ ---</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># --- 2.2 ç»˜åˆ¶å¾„å‘æ¡å½¢å›¾ ---</span>
<span class="hljs-comment"># è®¡ç®—æ¯ä¸ªæ¡å½¢çš„è§’åº¦ä½ç½®</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># ä½¿ç”¨æåæ ‡å­å›¾</span>
ax2 = plt.subplot(<span class="hljs-number">122</span>, projection=<span class="hljs-string">"polar"</span>)
<span class="hljs-comment"># å…³é”®ï¼šè®¾ç½® 'bottom' å‚æ•°ä¸º inner_radiusï¼Œè¿™æ ·æ¡å½¢å°±ä» inner_radius å¼€å§‹ç”»ï¼Œé•¿åº¦ä¸º radii</span>
bars = ax2.bar(
    theta,
    radii,
    width=<span class="hljs-number">0.4</span>,
    bottom=inner_radius,
    color=<span class="hljs-string">"lightcoral"</span>,
    edgecolor=<span class="hljs-string">"darkred"</span>,
    alpha=<span class="hljs-number">0.7</span>,
)

<span class="hljs-comment"># æ·»åŠ æ•°å€¼æ ‡ç­¾ (åœ¨æ¡å½¢å†…éƒ¨ï¼Œé è¿‘å¤–ä¾§)</span>
<span class="hljs-keyword">for</span> angle, radius, month <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(theta, radii, æœˆä»½):
    ax2.text(
        angle,
        inner_radius + radius / <span class="hljs-number">2</span>,
        <span class="hljs-string">f"<span class="hljs-subst">{radius:<span class="hljs-number">.1</span>f}</span>"</span>,
        ha=<span class="hljs-string">"center"</span>,
        va=<span class="hljs-string">"center"</span>,
        fontsize=<span class="hljs-number">8</span>,
        color=<span class="hljs-string">"black"</span>,
    )

<span class="hljs-comment"># æ·»åŠ æœˆä»½æ ‡è®° (åœ¨æ¡å½¢å¤–éƒ¨)</span>
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment"># --- 3. æ˜¾ç¤ºå›¾å½¢ ---</span>
plt.tight_layout()
plt.show()
</code></pre>
<p>è¿™æ®µä»£ç é¦–å…ˆç”Ÿæˆäº†æ¨¡æ‹Ÿçš„æœˆåº¦é™æ°´é‡æ•°æ®ï¼Œç„¶ååœ¨åŒä¸€ä¸ªå›¾å½¢çª—å£ä¸­åˆ›å»ºäº†ä¸¤ä¸ªå­å›¾ã€‚</p>
<p>å·¦ä¾§æ˜¯ä½¿ç”¨ <code>plt.bar</code> åˆ›å»ºçš„ä¼ ç»Ÿæ¡å½¢å›¾ï¼Œå³ä¾§æ˜¯ä½¿ç”¨ <code>plt.subplot(..., projection='polar')</code> å’Œ <code>ax.bar</code> åˆ›å»ºçš„å¾„å‘æ¡å½¢å›¾ã€‚</p>
<p><strong>å¾„å‘æ¡å½¢å›¾</strong>åˆ©ç”¨äº†æåæ ‡ç³»ï¼Œå°†ç±»åˆ«ï¼ˆæœˆä»½ï¼‰åˆ†å¸ƒåœ¨åœ†å‘¨ä¸Šï¼Œå°†æ•°å€¼ï¼ˆé™æ°´é‡ï¼‰æ˜ å°„åˆ°å¾„å‘é•¿åº¦ä¸Šã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72be5413534049dbb3e3be9ec0af9580~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768921732&amp;x-signature=uzlbyG4iEsjKcym0mXN9%2BEsQdjc%3D" alt="" loading="lazy"/></p>
<p><strong>å¾„å‘æ¡å½¢å›¾</strong>æ˜¯ä¸€ç§åœ¨æåæ ‡ç³»ä¸Šç»˜åˆ¶çš„å›¾è¡¨ï¼Œå¯ä»¥æä¾›æ¯”ä¼ ç»Ÿæ¡å½¢å›¾æ›´å…·è§†è§‰å¸å¼•åŠ›çš„æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒé€šè¿‡å¼§é•¿æ¥è¡¨ç¤ºæ•°å€¼ï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨ç©ºé—´ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç±»åˆ«è¾ƒå¤šæˆ–éœ€è¦å¼ºè°ƒå‘¨æœŸæ€§æ¨¡å¼ï¼ˆä¾‹å¦‚æŒ‰æœˆä»½æˆ–å­£åº¦åˆ†ç»„çš„æ•°æ®ï¼‰æ—¶ã€‚</p>
<h3 data-id="heading-5">2.2. åœ†å½¢æ¡å½¢å›¾</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> matplotlib <span class="hljs-keyword">import</span> cm
<span class="hljs-keyword">from</span> math <span class="hljs-keyword">import</span> log10

labels = <span class="hljs-built_in">list</span>(<span class="hljs-string">"ABCDEFG"</span>)
data = [<span class="hljs-number">21</span>, <span class="hljs-number">57</span>, <span class="hljs-number">88</span>, <span class="hljs-number">14</span>, <span class="hljs-number">76</span>, <span class="hljs-number">91</span>, <span class="hljs-number">26</span>]
<span class="hljs-comment"># ... çœç•¥ ...</span>

<span class="hljs-comment">#create colors along a chosen colormap</span>
colors = [cm.terrain(i / n) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]

<span class="hljs-comment">#create figure, axis</span>
fig, ax = plt.subplots()

<span class="hljs-comment">#create rings of donut chart</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):
    current_outer_radius = r - i * w
    innerring, _ = ax.pie([m - data[i], data[i]], 
                          radius = current_outer_radius, 
                          startangle = <span class="hljs-number">90</span>, 
                          colors = [<span class="hljs-string">"white"</span>, colors[i]])

    <span class="hljs-comment"># æ·»åŠ æ ‡ç­¾</span>
    <span class="hljs-comment"># ... çœç•¥ ...</span>

plt.show()
</code></pre>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59a7530f8c8c4611916218f76a18eac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768921732&amp;x-signature=cBfT79jz7wI671Ch8Giv19kMbCo%3D" alt="" loading="lazy"/></p>
<p><strong>åœ†å½¢æ¡å½¢å›¾</strong>ä»åŒä¸€åŸºå‡†çº¿å¼€å§‹ï¼Œé¿å…äº†<strong>å¾„å‘æ¡å½¢å›¾</strong>ä¸­ä¸åŒè§’åº¦èµ·å§‹ç‚¹ä¸åŒçš„é—®é¢˜ï¼Œæ›´åŠ ä¾¿äºæ¯”è¾ƒã€‚</p>
<h2 data-id="heading-6">3. æ€»ç»“</h2>
<p><strong>å¾„å‘æ¡å½¢å›¾</strong>å’Œ<strong>åœ†å½¢æ¡å½¢å›¾</strong>ä»£è¡¨äº†æ•°æ®å¯è§†åŒ–ä»çº¯åŠŸèƒ½å‘åŠŸèƒ½ç¾å­¦å¹³è¡¡çš„æ¼”è¿›ã€‚</p>
<p>å®ƒä»¬ä¸æ˜¯è¦å®Œå…¨å–ä»£ä¼ ç»Ÿæ¡å½¢å›¾ï¼Œè€Œæ˜¯ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¤šè§†è§‰å™äº‹çš„å·¥å…·ã€‚</p>
<p>å°±åƒä¸€ä½ç†Ÿç»ƒçš„å¨å¸ˆæ‹¥æœ‰å¤šç§åˆ€å…·ä¸€æ ·ï¼Œä¼˜ç§€çš„æ•°æ®åˆ†æå¸ˆä¹Ÿåº”è¯¥æŒæ¡å¤šç§å¯è§†åŒ–æŠ€æœ¯ï¼Œæ ¹æ®æ•°æ®ç‰¹æ€§å’Œæ²Ÿé€šç›®æ ‡é€‰æ‹©æœ€åˆé€‚çš„"åˆ€å…·"ã€‚</p>
<p>å½“ä½ çš„æ•°æ®è®²è¿°ç€å‘¨æœŸæ€§çš„æ•…äº‹ï¼Œæˆ–éœ€è¦åœ¨æœ‰é™ç©ºé—´å†…è¿›è¡Œå¤šç»´åº¦æ¯”è¾ƒæ—¶ï¼Œä¸å¦¨å°è¯•è¿™äº›åœ†å½¢å¯è§†åŒ–æ–¹æ³•ã€‚å®ƒä»¬ä¸ä»…èƒ½æ›´æœ‰æ•ˆåœ°ä¼ è¾¾ä¿¡æ¯ï¼Œè¿˜èƒ½ä¸ºä½ çš„æŠ¥å‘Šæˆ–ä»ªè¡¨æ¿å¢æ·»ç‹¬ç‰¹çš„è§†è§‰é­…åŠ›ã€‚</p>
<p>æœ€å¥½çš„å¯è§†åŒ–ä¸æ˜¯æœ€å¤æ‚çš„ï¼Œè€Œæ˜¯æœ€èƒ½æ¸…æ™°ä¼ è¾¾æ•°æ®æ•…äº‹çš„ã€‚</p>
<p><strong>å¾„å‘</strong>å’Œ<strong>åœ†å½¢æ¡å½¢å›¾</strong>æ­£æ˜¯è¿™æ ·ä¸€ç§å·¥å…·ï¼šåœ¨ä¼ ç»Ÿä¸ç°ä»£ä¹‹é—´ï¼Œåœ¨åŠŸèƒ½ä¸ç¾å­¦ä¹‹é—´ï¼Œæ‰¾åˆ°äº†ä¼˜é›…çš„å¹³è¡¡ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ï¼å›å½’æ¨¡å‹æœ€å…¨è®²è§£ï¼]]></title>    <link>https://juejin.cn/post/7594669638560219162</link>    <guid>https://juejin.cn/post/7594669638560219162</guid>    <pubDate>2026-01-13T15:59:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594669638560219162" data-draft-id="7594680314713423922" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ï¼å›å½’æ¨¡å‹æœ€å…¨è®²è§£ï¼"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-13T15:59:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ï¼å›å½’æ¨¡å‹æœ€å…¨è®²è§£ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T15:59:33.000Z" title="Tue Jan 13 2026 15:59:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Faicoting.cn%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//aicoting.cn/" ref="nofollow noopener noreferrer">aicoting AIç®—æ³•é¢è¯•å­¦ä¹ åœ¨çº¿ç½‘ç«™</a></p>
</blockquote>
<p>å›å½’æ¨¡å‹ï¼ˆRegression Modelsï¼‰ æ˜¯ç›‘ç£å­¦ä¹ ä¸­ç”¨äºé¢„æµ‹è¿ç»­æ•°å€¼çš„ä¸€ç±»æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯ï¼šæ ¹æ®è¾“å…¥ç‰¹å¾é¢„æµ‹æ•°å€¼å‹è¾“å‡ºã€‚ å›å½’æ¨¡å‹å°è¯•å­¦ä¹ ä¸€ä¸ªå‡½æ•° f(x) ï¼Œä½¿å¾—è¾“å…¥ç‰¹å¾ x æ˜ å°„åˆ°è¿ç»­è¾“å‡º y ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>â‰ˆ</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">yâ‰ˆf(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6776em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></p>
<p>å›å½’ä»»åŠ¡åœ¨ç°å®ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚é¢„æµ‹æˆ¿ä»·ã€è‚¡ç¥¨ä»·æ ¼ã€é”€é‡ã€æ¸©åº¦ç­‰ã€‚</p>
<p>æ ¹æ®æ¨¡å‹å½¢å¼å’Œå¤æ‚åº¦ï¼Œå›å½’æ¨¡å‹å¯ä»¥åˆ†ä¸ºå¤šç§ç±»å‹ï¼š</p>
<ul>
<li>çº¿æ€§å›å½’ï¼šå‡è®¾è¾“å‡ºæ˜¯è¾“å…¥ç‰¹å¾çš„çº¿æ€§ç»„åˆï¼Œç®€å•é«˜æ•ˆï¼›</li>
<li>æ­£åˆ™åŒ–å›å½’ï¼ˆRidgeã€Lassoï¼‰ï¼šåœ¨çº¿æ€§å›å½’åŸºç¡€ä¸ŠåŠ å…¥çº¦æŸï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆï¼›</li>
<li>å¤šé¡¹å¼å›å½’ï¼šé€šè¿‡é«˜æ¬¡é¡¹æ•æ‰éçº¿æ€§å…³ç³»ï¼›</li>
<li>æ ‘å›å½’ä¸é›†æˆæ–¹æ³•ï¼šå¦‚å†³ç­–æ ‘å›å½’ã€éšæœºæ£®æ—å›å½’ã€GBDT ç­‰ï¼Œé€‚åˆå¤æ‚éçº¿æ€§é—®é¢˜ã€‚</li>
</ul>
<p>å›å½’æ¨¡å‹ä¸ä»…å…³æ³¨é¢„æµ‹ç²¾åº¦ï¼Œä¹Ÿå¸¸ç”¨äº ç‰¹å¾åˆ†æ å’Œ å› æœå…³ç³»æ¢ç´¢ï¼Œåœ¨å·¥ä¸šå’Œç§‘ç ”é¢†åŸŸéƒ½æœ‰å¹¿æ³›åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">çº¿æ€§å›å½’</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯çº¿æ€§å›å½’</h3>
<p>çº¿æ€§å›å½’æ˜¯æœ€åŸºç¡€ä¹Ÿæ˜¯æœ€ç»å…¸çš„å›å½’æ–¹æ³•ï¼Œæœ€ç»å…¸çš„çº¿æ€§å›å½’é—®é¢˜å°±æ˜¯æˆ¿ä»·é¢„æµ‹ã€è‚¡ç¥¨ä»·æ ¼é¢„æµ‹ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡è¾“å…¥ç‰¹å¾çš„çº¿æ€§ç»„åˆæ¥é¢„æµ‹è¿ç»­è¾“å‡ºå˜é‡ã€‚</p>
<p>æ•°å­¦ä¸Šï¼Œå‡è®¾æœ‰ n ä¸ªæ ·æœ¬ï¼Œæ¯ä¸ªæ ·æœ¬æœ‰ d ä¸ªç‰¹å¾ï¼Œçº¿æ€§å›å½’æ¨¡å‹å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><msub><mi>Î²</mi><mn>0</mn></msub><mo>+</mo><msub><mi>Î²</mi><mn>1</mn></msub><msub><mi>x</mi><mrow><mi>i</mi><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>Î²</mi><mn>2</mn></msub><msub><mi>x</mi><mrow><mi>i</mi><mn>2</mn></mrow></msub><mo>+</mo><mo>â‹¯</mo><mo>+</mo><msub><mi>Î²</mi><mi>d</mi></msub><msub><mi>x</mi><mrow><mi>i</mi><mi>d</mi></mrow></msub><mo>+</mo><msub><mi>Ïµ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i = \beta_0 + \beta_1 x_{i1} + \beta_2 x_{i2} + \dots + \beta_d x_{id} + \epsilon_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">y_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span>ä¸ªæ ·æœ¬çš„çœŸå®è¾“å‡ºï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mi>j</mi></mrow><annotation encoding="application/x-tex">x_ij</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> æ˜¯ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"/><span class="mord mathnormal">i</span></span></span></span></span> ä¸ªæ ·æœ¬çš„ç¬¬ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span> ä¸ªç‰¹å¾ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">Î²_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯æˆªè·é¡¹ï¼Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>â€¦</mo><mo separator="true">,</mo><msub><mi>Î²</mi><mi>d</mi></msub></mrow><annotation encoding="application/x-tex">Î²_1,â€¦,Î²_d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â€¦</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯æ¨¡å‹ç³»æ•°ï¼›</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">Ïµ_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> æ˜¯è¯¯å·®é¡¹ï¼Œè¡¨ç¤ºæ— æ³•è¢«çº¿æ€§æ¨¡å‹è§£é‡Šçš„éƒ¨åˆ† ã€‚ ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ç»„ç³»æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">Î² </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span>ï¼Œä½¿æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®çš„é¢„æµ‹è¯¯å·®æœ€å°ã€‚</li>
</ul>
<p>ä¸ºäº†ä¿è¯æ¨¡å‹æœ‰æ•ˆæ€§ï¼Œçº¿æ€§å›å½’é€šå¸¸å‡è®¾ï¼š</p>
<ol>
<li>çº¿æ€§å…³ç³»ï¼šç‰¹å¾ä¸ç›®æ ‡ä¹‹é—´æ˜¯çº¿æ€§å…³ç³»ï¼›</li>
<li>è¯¯å·®ç‹¬ç«‹åŒåˆ†å¸ƒï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Ïµ</mi><mi>i</mi></msub><mo>âˆ¼</mo><mi>N</mi><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msup><mi>Ïƒ</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\epsilon_i \sim N(0, \sigma^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ¼</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ïƒ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>ï¼›</li>
<li>æ— å¤šé‡å…±çº¿æ€§ï¼šç‰¹å¾é—´ä¸é«˜åº¦ç›¸å…³ï¼›</li>
<li>åŒæ–¹å·®æ€§ï¼šè¯¯å·®æ–¹å·®ä¸€è‡´ï¼›</li>
<li>è¯¯å·®æœŸæœ›ä¸ºé›¶ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">E</mi><mo stretchy="false">[</mo><msub><mi>Ïµ</mi><mi>i</mi></msub><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\mathbb{E}[\epsilon_i] = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathbb">E</span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">Ïµ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span> ã€‚</li>
</ol>
<h3 data-id="heading-2">æŸå¤±å‡½æ•°ä¸å‚æ•°æ±‚è§£</h3>
<p>çº¿æ€§å›å½’é€šå¸¸ä½¿ç”¨ æœ€å°äºŒä¹˜æ³•ï¼ˆOrdinary Least Squares, OLSï¼‰ ä½œä¸ºæŸå¤±å‡½æ•°ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><mo stretchy="false">(</mo><msub><mi>Î²</mi><mn>0</mn></msub><mo>+</mo><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></msubsup><msub><mi>Î²</mi><mi>j</mi></msub><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><msup><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">J(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 = \sum_{i=1}^{n} \Big(y_i - (\beta_0 + \sum_{j=1}^d \beta_j x_{ij}) \Big)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.8em;vertical-align:-0.65em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.004em;vertical-align:-0.65em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">d</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord"><span class="delimsizing size2">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.354em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>ç›®æ ‡æ˜¯æœ€å°åŒ–æŸå¤±å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">J(Î²)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span></span></span></span></span> ä»¥è·å¾—æœ€ä½³çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi></mrow><annotation encoding="application/x-tex">Î²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span></span></span></span></span> ã€‚</p>
<p>æ­£è§„æ–¹ç¨‹è§£æ³•</p>
<p>é—­å¼è§£ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi><mo>=</mo><mo stretchy="false">(</mo><msup><mi>X</mi><mi>T</mi></msup><mi>X</mi><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi></mrow><annotation encoding="application/x-tex">\beta = (X^T X)^{-1} X^T y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span></p>
<p>å…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>âˆˆ</mo><msup><mi mathvariant="double-struck">R</mi><mrow><mi>n</mi><mo>Ã—</mo><mo stretchy="false">(</mo><mi>d</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">X \in \mathbb{R}^{n \times (d+1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.888em;"/><span class="mord"><span class="mord mathbb">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">Ã—</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">d</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯ç‰¹å¾çŸ©é˜µï¼ˆç¬¬ä¸€åˆ—ä¸º1ï¼Œè¡¨ç¤ºæˆªè·ï¼‰ï¼Œy æ˜¯ç›®æ ‡å‘é‡ã€‚</p>
<p>æ¢¯åº¦ä¸‹é™æ±‚è§£</p>
<p>å¯¹äºå¤§è§„æ¨¡æ•°æ®ï¼Œé€šå¸¸ä½¿ç”¨æ¢¯åº¦ä¸‹é™è¿­ä»£æ›´æ–°å‚æ•°ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mi>j</mi></msub><mo>:</mo><mo>=</mo><msub><mi>Î²</mi><mi>j</mi></msub><mo>âˆ’</mo><mi>Î±</mi><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>J</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>Î²</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\beta_j := \beta_j - \alpha \frac{\partial J}{\partial \beta_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">:=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord mathnormal" style="margin-right:0.0037em;">Î±</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0528em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></p>
<p>å…¶ä¸­ Î± æ˜¯å­¦ä¹ ç‡ï¼Œæ¢¯åº¦ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi mathvariant="normal">âˆ‚</mi><mi>J</mi></mrow><mrow><mi mathvariant="normal">âˆ‚</mi><msub><mi>Î²</mi><mi>j</mi></msub></mrow></mfrac><mo>=</mo><mo>âˆ’</mo><mn>2</mn><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\frac{\partial J}{\partial \beta_j} = -2 \sum_{i=1}^{n} x_{ij} (y_i - \hat{y}_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4224em;vertical-align:-0.5423em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0528em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">âˆ‚</span><span class="mord mathnormal mtight" style="margin-right:0.09618em;">J</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mord">âˆ’</span><span class="mord">2</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p>
<h3 data-id="heading-3">è¯„ä»·æŒ‡æ ‡</h3>
<p>å¸¸ç”¨æŒ‡æ ‡è¡¡é‡å›å½’æ¨¡å‹æ€§èƒ½ï¼š</p>
<ul>
<li>å‡æ–¹è¯¯å·®ï¼ˆMSEï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>MSE</mtext><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\text{MSE} = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{y}_i)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">MSE</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></li>
<li>å‡æ–¹æ ¹è¯¯å·®ï¼ˆRMSEï¼‰ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>RMSE</mtext><mo>=</mo><msqrt><mtext>MSE</mtext></msqrt></mrow><annotation encoding="application/x-tex">\text{RMSE} = \sqrt{\text{MSE}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">RMSE</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord text"><span class="mord">MSE</span></span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span/></span></span></span></span></span></span></span></span></li>
<li>å¹³å‡ç»å¯¹è¯¯å·®ï¼ˆMAEï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>MAE</mtext><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi mathvariant="normal">âˆ£</mi><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">\text{MAE} = \frac{1}{n} \sum_{i=1}^{n} |y_i - \hat{y}_i|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord text"><span class="mord">MAE</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span></span></span></span></span></li>
<li>å†³å®šç³»æ•°ï¼ˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">R^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span> ï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>R</mi><mn>2</mn></msup><mo>=</mo><mn>1</mn><mo>âˆ’</mo><mfrac><mrow><msub><mo>âˆ‘</mo><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mrow><msub><mo>âˆ‘</mo><mi>i</mi></msub><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><mover accent="true"><mi>y</mi><mo>Ë‰</mo></mover><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">R^2 = 1 - \frac{\sum_i (y_i - \hat{y}_i)^2}{\sum_i (y_i - \bar{y})^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.7289em;vertical-align:-0.57em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1589em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1496em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span/></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord accent mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.5678em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord mtight">Ë‰</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.535em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mop op-symbol small-op mtight" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1496em;"><span style="top:-2.1786em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3214em;"><span/></span></span></span></span></span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mbin mtight">âˆ’</span><span class="mord mtight"><span class="mord accent mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span><span style="top:-2.7em;"><span class="pstrut" style="height:2.7em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord mtight">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span><span class="mclose mtight"><span class="mclose mtight">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.57em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span>è¡¨ç¤ºæ¨¡å‹è§£é‡Šç›®æ ‡å˜é‡æ–¹å·®çš„æ¯”ä¾‹</li>
</ul>
<p>ä¸‹é¢ä¸¾ä¸€ä¸ªç®€å•çš„çº¿æ€§å›å½’çš„ç¤ºä¾‹ä»£ç </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
X = np.array([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>], [<span class="hljs-number">5</span>]])
y = np.array([<span class="hljs-number">2.1</span>, <span class="hljs-number">2.9</span>, <span class="hljs-number">3.7</span>, <span class="hljs-number">4.1</span>, <span class="hljs-number">5.2</span>])

<span class="hljs-comment"># è®­ç»ƒçº¿æ€§å›å½’æ¨¡å‹</span>
model = LinearRegression()
model.fit(X, y)

<span class="hljs-comment"># æŸ¥çœ‹æˆªè·å’Œç³»æ•°</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆªè·:"</span>, model.intercept_)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç³»æ•°:"</span>, model.coef_)

<span class="hljs-comment"># é¢„æµ‹æ–°æ•°æ®</span>
X_new = np.array([[<span class="hljs-number">6</span>]])
y_pred = model.predict(X_new)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¢„æµ‹å€¼:"</span>, y_pred)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/585b0c2663404fde9b30c18b92a9913b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=REXKfPIJw9ZKLXcKWOgILt26c8M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9908409d3a243f19e42d7caef7c86e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=sYZ%2BOcNQDpUoJSCyAJVRS20jX6s%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°çº¿æ€§å›å½’å¾—åˆ°çš„æ–¹ç¨‹ä¸ºy=0.74x+1.379999(å¥½å¤š9)ï¼Œé¢„æµ‹å‡ºæ¥äº†å½“xä¸º6çš„æ—¶å€™ï¼Œyçš„å€¼ä¸º5.82ã€‚</p>
<p>çº¿æ€§å›å½’çš„å†…å®¹åˆ°æ­¤å°±ç»“æŸå•¦ï¼Œæ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼Œçº¿æ€§å›å½’æ˜¯æœ€ç®€å•ä¹Ÿæœ€å®¹æ˜“ç†è§£çš„å›å½’æ¨¡å‹ï¼Œè®¡ç®—æ¯”è¾ƒé«˜æ•ˆï¼ŒåŒæ—¶å¯è§£é‡Šæ€§å¼ºï¼Œç³»æ•°åæ˜ ç‰¹å¾å¯¹ç›®æ ‡çš„å½±å“ï¼Œå¯¹å°æ•°æ®å’Œçº¿æ€§é—®é¢˜æ•ˆæœè‰¯å¥½ã€‚ä½†æ˜¯çº¿æ€§å›å½’å¯¹éçº¿æ€§å…³ç³»æ‹Ÿåˆèƒ½åŠ›æœ‰é™ï¼ŒåŒæ—¶å¯¹å¼‚å¸¸å€¼æ•æ„Ÿï¼Œå‡è®¾æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œé¢„æµ‹å¯èƒ½åå·®å¤§ã€‚</p>
<h2 data-id="heading-4">å²­å›å½’</h2>
<h3 data-id="heading-5">ä»€ä¹ˆæ˜¯å²­å›å½’</h3>
<p>å²­å›å½’æ˜¯ çº¿æ€§å›å½’çš„ä¸€ç§æ­£åˆ™åŒ–æ‰©å±•ï¼Œä¸»è¦ç”¨äºè§£å†³ å¤šé‡å…±çº¿æ€§ï¼ˆç‰¹å¾é«˜åº¦ç›¸å…³ï¼‰ æˆ– è¿‡æ‹Ÿåˆé—®é¢˜ã€‚</p>
<p>åœ¨çº¿æ€§å›å½’ä¸­ï¼Œå¦‚æœç‰¹å¾ä¹‹é—´é«˜åº¦ç›¸å…³ï¼Œæˆ–è€…æ ·æœ¬æ•°é‡å°‘äºç‰¹å¾æ•°é‡ï¼Œæ™®é€šæœ€å°äºŒä¹˜æ³•ï¼ˆOLSï¼‰å¯èƒ½å¯¼è‡´ç³»æ•°éœ‡è¡ï¼Œé¢„æµ‹ä¸ç¨³å®šã€‚å²­å›å½’é€šè¿‡åœ¨æŸå¤±å‡½æ•°ä¸­åŠ å…¥ L2 æ­£åˆ™åŒ–é¡¹ï¼Œå¯¹ç³»æ•°æ–½åŠ çº¦æŸï¼Œä½¿æ¨¡å‹æ›´ç¨³å®šã€‚</p>
<h3 data-id="heading-6">å²­å›å½’åŸç†</h3>
<p>æŸå¤±å‡½æ•°</p>
<p>æ™®é€šçº¿æ€§å›å½’çš„æœ€å°äºŒä¹˜æ³•æŸå¤±å‡½æ•°ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">J(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>å²­å›å½’åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ  L2 æ­£åˆ™åŒ–é¡¹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>J</mi><mrow><mi>r</mi><mi>i</mi><mi>d</mi><mi>g</mi><mi>e</mi></mrow></msub><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi>Î»</mi><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></msubsup><msubsup><mi>Î²</mi><mi>j</mi><mn>2</mn></msubsup></mrow><annotation encoding="application/x-tex">J_{ridge}(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 + \lambda \sum_{j=1}^{d} \beta_j^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0962em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">e</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.4248em;vertical-align:-0.4358em;"/><span class="mord mathnormal">Î»</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4413em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3948em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>Î» æ˜¯æ­£åˆ™åŒ–å¼ºåº¦å‚æ•°ï¼Œæ§åˆ¶ç³»æ•°çš„å‹ç¼©ç¨‹åº¦ï¼›</li>
<li>Î»â‰¥0 ä¸ºæ­£åˆ™åŒ–å¼ºåº¦å‚æ•°</li>
<li>Î»=0 ï¼šé€€åŒ–ä¸ºæ™®é€šçº¿æ€§å›å½’ï¼›</li>
<li>Î» å¢å¤§ï¼šç³»æ•°è¢«å‹ç¼©ï¼Œæ¨¡å‹æ›´åŠ å¹³æ»‘ï¼Œå‡å°‘è¿‡æ‹Ÿåˆï¼›</li>
<li>Î» è¿‡å¤§ï¼šæ¨¡å‹å¯èƒ½æ¬ æ‹Ÿåˆï¼Œåå·®å¢å¤§ã€‚ é€šå¸¸é€šè¿‡ äº¤å‰éªŒè¯ é€‰æ‹©æœ€ä¼˜ Î» å€¼ã€‚</li>
<li>ç¬¬äºŒé¡¹çº¦æŸç³»æ•° Î²j çš„å¤§å°ï¼Œé¿å…è¿‡å¤§æˆ–éœ‡è¡ã€‚</li>
</ul>
<p>æ­£è§„æ–¹ç¨‹æ±‚è§£</p>
<p>å²­å›å½’çš„é—­å¼è§£ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î²</mi><mo>=</mo><mo stretchy="false">(</mo><msup><mi>X</mi><mi>T</mi></msup><mi>X</mi><mo>+</mo><mi>Î»</mi><mi>I</mi><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi></mrow><annotation encoding="application/x-tex">\beta = (X^T X + \lambda I)^{-1} X^T y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mord mathnormal">Î»</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span></p>
<p>ç›¸æ¯”æ™®é€šçº¿æ€§å›å½’çš„</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msup><mi>X</mi><mi>T</mi></msup><mi>X</mi><msup><mo stretchy="false">)</mo><mrow><mo>âˆ’</mo><mn>1</mn></mrow></msup><msup><mi>X</mi><mi>T</mi></msup><mi>y</mi></mrow><annotation encoding="application/x-tex">(X^T X)^{-1} X^T y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></span></p>
<p>åŠ å…¥äº† Î»I é¡¹ï¼Œä½¿çŸ©é˜µ å§‹ç»ˆå¯é€†ï¼Œæé«˜äº†æ•°å€¼ç¨³å®šæ€§ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åŒæ ·é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥è¿›è¡Œç†è§£ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> Ridge
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
X = np.array([[<span class="hljs-number">1</span>], [<span class="hljs-number">2</span>], [<span class="hljs-number">3</span>], [<span class="hljs-number">4</span>], [<span class="hljs-number">5</span>]])
y = np.array([<span class="hljs-number">2.1</span>, <span class="hljs-number">2.9</span>, <span class="hljs-number">3.7</span>, <span class="hljs-number">4.1</span>, <span class="hljs-number">5.2</span>])

<span class="hljs-comment"># ä½¿ç”¨ Ridge å›å½’</span>
ridge = Ridge(alpha=<span class="hljs-number">1.0</span>)  <span class="hljs-comment"># alpha å¯¹åº” Î»</span>
ridge.fit(X, y)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆªè·:"</span>, ridge.intercept_)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç³»æ•°:"</span>, ridge.coef_)

<span class="hljs-comment"># ä½¿ç”¨ GridSearchCV å¯»æ‰¾æœ€ä½³ Î»</span>
param_grid = {<span class="hljs-string">'alpha'</span>: [<span class="hljs-number">0.01</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>]}
grid = GridSearchCV(Ridge(), param_grid, cv=<span class="hljs-number">5</span>)
grid.fit(X, y)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ä½³ Î»:"</span>, grid.best_params_[<span class="hljs-string">'alpha'</span>])
</code></pre>
<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2736e692e4a4221b12c703d2b0b3bde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=pismaacbDpAqdv5VgAMFL5BQG4E%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f47d88e9b1c4791a89f3b549579d271~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=gni%2BAnL%2BwEwAIGYnObIRbQ%2F%2FbV4%3D" alt="" loading="lazy"/></p>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹å°±æ˜¯å²­å›å½’çš„ç‰¹ç‚¹æ˜¯å¯ä»¥ç¼“è§£å¤šé‡å…±çº¿æ€§é—®é¢˜ï¼Œæé«˜æ¨¡å‹ç¨³å®šæ€§ï¼Œå‡å°‘ç³»æ•°éœ‡è¡ï¼Œé€‚ç”¨äºé«˜ç»´å°æ ·æœ¬æ•°æ®ã€‚ä½†æ˜¯å­˜åœ¨çš„é—®é¢˜æ˜¯æ‰€æœ‰ç³»æ•°éƒ½è¢«å‹ç¼©ï¼Œå¯èƒ½é™ä½å¯è§£é‡Šæ€§ï¼ŒåŒæ—¶æ— æ³•è¿›è¡Œç‰¹å¾é€‰æ‹©ï¼ˆç³»æ•°ä¸ä¼šå˜ä¸ºé›¶ï¼‰ï¼Œå¦‚æœ Î» é€‰æ‹©ä¸å½“ä¼šå¯¼è‡´æ¬ æ‹Ÿåˆæˆ–è¿‡æ‹Ÿåˆã€‚</p>
<p>å²­å›å½’çš„åº”ç”¨åœºæ™¯åŒ…æ‹¬é«˜ç»´ç‰¹å¾é¢„æµ‹ï¼ˆå¦‚åŸºå› æ•°æ®ã€æ–‡æœ¬å‘é‡ç­‰ï¼‰ã€æ ·æœ¬é‡å°ä½†ç‰¹å¾å¤šçš„å›å½’é—®é¢˜å’Œç‰¹å¾å­˜åœ¨å¼ºç›¸å…³æ€§æˆ–å™ªå£°çš„åœºæ™¯ã€‚</p>
<p>å²­å›å½’æ˜¯ çº¿æ€§å›å½’çš„ç¨³å¥ç‰ˆæœ¬ï¼Œé€šè¿‡å¼•å…¥ L2 æ­£åˆ™åŒ–ï¼Œæ—¢ä¿æŒäº†çº¿æ€§æ¨¡å‹çš„å¯è§£é‡Šæ€§ï¼Œåˆå¢å¼ºäº†æ¨¡å‹åœ¨å¤æ‚ã€é«˜ç»´æˆ–ç›¸å…³æ€§å¼ºçš„æ•°æ®ä¸Šçš„ç¨³å®šæ€§ã€‚</p>
<h2 data-id="heading-7">Lasso å›å½’</h2>
<h3 data-id="heading-8">ä»€ä¹ˆæ˜¯ Lasso å›å½’</h3>
<p>Lasso å›å½’ï¼ˆLeast Absolute Shrinkage and Selection Operatorï¼‰ æ˜¯åœ¨çº¿æ€§å›å½’çš„åŸºç¡€ä¸Šå¼•å…¥ L1 æ­£åˆ™åŒ– çš„æ–¹æ³•ã€‚ä¸å²­å›å½’ï¼ˆRidgeï¼‰ä¸åŒï¼ŒLasso ä¸ä»…èƒ½æŠ‘åˆ¶æ¨¡å‹è¿‡æ‹Ÿåˆï¼Œè¿˜èƒ½ è‡ªåŠ¨è¿›è¡Œç‰¹å¾é€‰æ‹© â€”â€” é€šè¿‡å°†éƒ¨åˆ†å›å½’ç³»æ•°å‹ç¼©ä¸ºé›¶ï¼Œç­›æ‰ä¸é‡è¦çš„ç‰¹å¾ã€‚è¿™é‡Œå¾ˆå¥½ç†è§£å“ˆï¼Œç³»æ•°ä¸º0ï¼Œä¸å°±æ˜¯ä¸ç”¨è¿™ä¸ªç‰¹å¾äº†ã€‚</p>
<p>å› æ­¤ï¼ŒLasso æ˜¯ä¸€ç§ å…¼é¡¾æ­£åˆ™åŒ–ä¸ç‰¹å¾é€‰æ‹© çš„æ–¹æ³•ï¼Œé€‚åˆåœ¨ç‰¹å¾æ•°é‡è¿œå¤§äºæ ·æœ¬æ•°é‡çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚å¦‚æ–‡æœ¬åˆ†æã€åŸºå› æ•°æ®åˆ†æï¼›åŒæ—¶é€‚ç”¨äºé«˜ç»´ç¨€ç–å»ºæ¨¡ï¼Œåœ¨å¹¿å‘Šç‚¹å‡»ç‡é¢„æµ‹ã€æ¨èç³»ç»Ÿä¸­å¸¸è§ï¼›Lassoå›å½’è¿˜èƒ½è¿›è¡Œæ¨¡å‹å‹ç¼©ï¼Œé€šè¿‡å»é™¤ä¸é‡è¦ç‰¹å¾ï¼Œç®€åŒ–æ¨¡å‹ï¼Œé™ä½è®¡ç®—æˆæœ¬ã€‚</p>
<h3 data-id="heading-9">Lasso å›å½’åŸç†</h3>
<p>æŸå¤±å‡½æ•°</p>
<p>æ™®é€šçº¿æ€§å›å½’ï¼ˆæœ€å°äºŒä¹˜ï¼‰æŸå¤±å‡½æ•°ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>J</mi><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">J(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>Lasso å›å½’åœ¨å…¶åŸºç¡€ä¸Šå¼•å…¥ L1 æ­£åˆ™åŒ–é¡¹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>J</mi><mrow><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>o</mi></mrow></msub><mo stretchy="false">(</mo><mi>Î²</mi><mo stretchy="false">)</mo><mo>=</mo><msubsup><mo>âˆ‘</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy="false">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>âˆ’</mo><msub><mover accent="true"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mi>Î»</mi><msubsup><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>d</mi></msubsup><mi mathvariant="normal">âˆ£</mi><msub><mi>Î²</mi><mi>j</mi></msub><mi mathvariant="normal">âˆ£</mi></mrow><annotation encoding="application/x-tex">J_{lasso}(\beta) = \sum_{i=1}^{n} (y_i - \hat{y}_i)^2 + \lambda \sum_{j=1}^{d} |\beta_j|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0962em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">a</span><span class="mord mathnormal mtight">sso</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.104em;vertical-align:-0.2997em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord"><span class="mord accent"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="accent-body" style="left:-0.1944em;"><span class="mord">^</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1944em;"><span/></span></span></span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.4248em;vertical-align:-0.4358em;"/><span class="mord mathnormal">Î»</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.989em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mord">âˆ£</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>Î»â‰¥0 æ˜¯æ­£åˆ™åŒ–ç³»æ•°ï¼Œæ§åˆ¶æƒ©ç½šåŠ›åº¦</li>
<li>Î»=0 ï¼šé€€åŒ–ä¸ºæ™®é€šçº¿æ€§å›å½’ï¼›</li>
<li>Î» å¢å¤§ï¼šæ›´å¤šç³»æ•°è¢«å‹ç¼©ä¸º 0ï¼Œæ¨¡å‹æ›´ç®€å•ï¼Œä½†å¯èƒ½æ¬ æ‹Ÿåˆï¼›</li>
<li>Î» çš„é€‰æ‹©é€šå¸¸é€šè¿‡ äº¤å‰éªŒè¯ ç¡®å®šã€‚</li>
<li>L1 èŒƒæ•°ä¼šä½¿æŸäº› Î²j æ”¶ç¼©ä¸º 0ï¼Œä»è€Œèµ·åˆ°ç‰¹å¾é€‰æ‹©ä½œç”¨ã€‚</li>
</ul>
<h3 data-id="heading-10">Lasso ä¸å²­å›å½’çš„å·®åˆ«</h3>
<ul>
<li>å²­å›å½’ï¼ˆL2ï¼‰ï¼šå°†ç³»æ•°å‹ç¼©å¾—æ›´å°ï¼Œä½†ä¸ä¼šå˜æˆ 0ï¼›</li>
<li>Lasso å›å½’ï¼ˆL1ï¼‰ï¼šç³»æ•°å¯ä»¥è¢«å‹ç¼©åˆ° æ­£å¥½ä¸º 0ï¼Œå®ç°ç‰¹å¾ç­›é€‰ã€‚</li>
</ul>
<p>å‡ ä½•ç›´è§‚ï¼š</p>
<ul>
<li>L2 æ­£åˆ™åŒ–å¯¹åº”åœ†å½¢çº¦æŸï¼Œè§£å¾€å¾€è½åœ¨éé›¶ç³»æ•°ä¸Šï¼›</li>
<li>L1 æ­£åˆ™åŒ–å¯¹åº”è±å½¢çº¦æŸï¼Œæ›´å®¹æ˜“â€œå¡â€åœ¨åæ ‡è½´ä¸Šï¼Œä»è€Œäº§ç”Ÿç¨€ç–è§£ã€‚</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹åŠ æ·±ä¸€ä¸‹Lassoå›å½’çš„ç†è§£</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> Lasso
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> GridSearchCV

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
X = np.array([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>],
              [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>],
              [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>],
              [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>],
              [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>]])
y = np.array([<span class="hljs-number">3.2</span>, <span class="hljs-number">4.5</span>, <span class="hljs-number">6.1</span>, <span class="hljs-number">7.8</span>, <span class="hljs-number">9.9</span>])

<span class="hljs-comment"># ä½¿ç”¨ Lasso å›å½’</span>
lasso = Lasso(alpha=<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># alpha å³ Î»</span>
lasso.fit(X, y)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"æˆªè·:"</span>, lasso.intercept_)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"ç³»æ•°:"</span>, lasso.coef_)

<span class="hljs-comment"># ä½¿ç”¨äº¤å‰éªŒè¯é€‰æ‹© Î»</span>
param_grid = {<span class="hljs-string">'alpha'</span>: [<span class="hljs-number">0.01</span>, <span class="hljs-number">0.1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>]}
grid = GridSearchCV(Lasso(), param_grid, cv=<span class="hljs-number">5</span>)
grid.fit(X, y)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ä½³ Î»:"</span>, grid.best_params_[<span class="hljs-string">'alpha'</span>])
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼Œæ³¨æ„è¿™é‡Œè¾“å…¥æ˜¯ä¸‰ç»´ç‰¹å¾ï¼Œä¹Ÿå°±æ˜¯</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><mi>k</mi><mn>1</mn><mo>âˆ—</mo><mi>x</mi><mn>1</mn><mo>+</mo><mi>k</mi><mn>2</mn><mo>âˆ—</mo><mi>x</mi><mn>2</mn><mo>+</mo><mi>k</mi><mn>3</mn><mo>âˆ—</mo><mi>x</mi><mn>3</mn></mrow><annotation encoding="application/x-tex">y=k1*x1+k2*x2+k3*x3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord mathnormal">x</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord mathnormal">x</span><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord mathnormal">x</span><span class="mord">3</span></span></span></span></span></p>
<p>è¿™è¯´æ˜ Lasso è‡ªåŠ¨èˆå¼ƒäº†æŸäº›ç‰¹å¾ï¼Œå®ç°äº†ç¨€ç–åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eccab54024ed472db92f019f8d7e12e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=0AgeMp%2FPOCUxdSvPORmwC%2BusbRc%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f2743b3a08147909c2ebb54ad0f036f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=IgbX5nez%2F0Q8SuNSItBsI7zHWL0%3D" alt="" loading="lazy"/></p>
<p>ç®€å•æ€»ç»“å°±æ˜¯Lasso å›å½’èƒ½å¤Ÿ è‡ªåŠ¨ç‰¹å¾é€‰æ‹©ï¼Œæå‡æ¨¡å‹å¯è§£é‡Šæ€§ï¼Œåœ¨é«˜ç»´ç¨€ç–æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€åŸºå› æ•°æ®ï¼‰ä¸­è¡¨ç°è‰¯å¥½ï¼Œæœ‰åŠ©äºå‡å°‘è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–æ€§èƒ½ã€‚ä½†æ˜¯ç¼ºç‚¹æ˜¯å½“ç‰¹å¾æ•°è¿œå¤§äºæ ·æœ¬æ•°æ—¶ï¼ŒLasso æœ€å¤šåªèƒ½é€‰æ‹© n ä¸ªç‰¹å¾ï¼›å¦‚æœç‰¹å¾é«˜åº¦ç›¸å…³ï¼ŒLasso ä¼šéšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œè€Œèˆå¼ƒå…¶ä»–ï¼›åŒæ—¶Î» çš„é€‰æ‹©è‡³å…³é‡è¦ï¼Œè¿‡å¤§å¯èƒ½æŸå¤±æœ‰ç”¨ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-11">å¤šé¡¹å¼å›å½’</h2>
<h3 data-id="heading-12">ä»€ä¹ˆæ˜¯å¤šé¡¹å¼å›å½’</h3>
<p>å¤šé¡¹å¼å›å½’ï¼ˆPolynomial Regressionï¼‰ æ˜¯ä¸€ç§å¯¹ éçº¿æ€§å…³ç³» å»ºæ¨¡çš„å›å½’æ–¹æ³•ã€‚ å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šè™½ç„¶è¾“å…¥å˜é‡ä¸è¾“å‡ºå˜é‡ä¹‹é—´çš„å…³ç³»å¯èƒ½ä¸æ˜¯çº¿æ€§çš„ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ å°†è¾“å…¥ç‰¹å¾æ˜ å°„åˆ°æ›´é«˜ç»´çš„å¤šé¡¹å¼ç©ºé—´ï¼Œå†ç”¨çº¿æ€§å›å½’å»æ‹Ÿåˆã€‚ æ¯”å¦‚å¦‚æœå…³ç³»æ˜¯æ›²çº¿è€Œä¸æ˜¯ç›´çº¿ï¼Œæ™®é€šçº¿æ€§å›å½’å°±éš¾ä»¥æ•æ‰ï¼Œä½†å¤šé¡¹å¼å›å½’å¯ä»¥é€šè¿‡å¢åŠ é«˜é˜¶é¡¹æ¥å»ºæ¨¡ã€‚</p>
<h3 data-id="heading-13">å¤šé¡¹å¼å›å½’åŸç†</h3>
<p>å…¬å¼è¡¨è¾¾</p>
<p>æ™®é€šçº¿æ€§å›å½’æ¨¡å‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>Î²</mi><mn>0</mn></msub><mo>+</mo><msub><mi>Î²</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">y = \beta_0 + \beta_1 x + \epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">Ïµ</span></span></span></span></span></p>
<p>å¤šé¡¹å¼å›å½’æ¨¡å‹ï¼ˆä»¥äºŒæ¬¡å¤šé¡¹å¼ä¸ºä¾‹ï¼‰ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>Î²</mi><mn>0</mn></msub><mo>+</mo><msub><mi>Î²</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>Î²</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">y = \beta_0 + \beta_1 x + \beta_2 x^2 + \epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">Ïµ</span></span></span></span></span></p>
<p>æ¨å¹¿åˆ° k é˜¶å¤šé¡¹å¼å›å½’ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>Î²</mi><mn>0</mn></msub><mo>+</mo><msub><mi>Î²</mi><mn>1</mn></msub><mi>x</mi><mo>+</mo><msub><mi>Î²</mi><mn>2</mn></msub><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mo>â‹¯</mo><mo>+</mo><msub><mi>Î²</mi><mi>k</mi></msub><msup><mi>x</mi><mi>k</mi></msup><mo>+</mo><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">y = \beta_0 + \beta_1 x + \beta_2 x^2 + \cdots + \beta_k x^k + \epsilon</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"/><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0435em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">Ïµ</span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">x</span></span></span></span></span> æ˜¯è‡ªå˜é‡</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Î²</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">Î²_j </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.05278em;">Î²</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0528em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>æ˜¯å‚æ•°</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ïµ</mi></mrow><annotation encoding="application/x-tex">Ïµ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">Ïµ</span></span></span></span></span> æ˜¯è¯¯å·®é¡¹ è™½ç„¶å…¬å¼ä¸­æœ‰é«˜æ¬¡é¡¹ï¼Œä½†æœ¬è´¨ä¸Šä¾ç„¶æ˜¯ çº¿æ€§æ¨¡å‹ï¼ˆå¯¹å‚æ•°çº¿æ€§ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç”¨çº¿æ€§å›å½’çš„æ–¹æ³•æ±‚è§£ã€‚</li>
</ul>
<p>ç‰¹å¾æ‰©å±•è§†è§’</p>
<p>å¦‚æœæˆ‘ä»¬æŠŠåŸå§‹è¾“å…¥ x æ‰©å±•æˆä¸€ä¸ªå‘é‡ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><msup><mi>x</mi><mn>2</mn></msup><mo separator="true">,</mo><mo>â‹¯</mo><mtext>â€‰</mtext><mo separator="true">,</mo><msup><mi>x</mi><mi>k</mi></msup><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1, x, x^2, \cdots, x^k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="minner">â‹¯</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span></p>
<p>é‚£ä¹ˆå¤šé¡¹å¼å›å½’å°±æ˜¯åœ¨é«˜ç»´ç©ºé—´åšçº¿æ€§å›å½’ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>è¾“å…¥ x=2ï¼Œè‹¥äºŒæ¬¡æ‰©å±•ï¼Œåˆ™ç‰¹å¾å‘é‡ä¸º[1, 2, 4]ã€‚</li>
<li>å›å½’æ¨¡å‹å­¦ä¹ åˆ°çš„å°±æ˜¯è¿™äº›ç‰¹å¾çš„çº¿æ€§ç»„åˆã€‚</li>
</ul>
<p>ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç®€å•ç¤ºä¾‹å§ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LinearRegression
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> PolynomialFeatures

<span class="hljs-comment"># æ„é€ æ•°æ®</span>
X = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">30</span>).reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
y = <span class="hljs-number">2</span> + <span class="hljs-number">1.5</span> * X + <span class="hljs-number">0.8</span> * X**<span class="hljs-number">2</span> + np.random.randn(<span class="hljs-number">30</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>  <span class="hljs-comment"># äºŒæ¬¡å…³ç³» + å™ªå£°</span>

<span class="hljs-comment"># äºŒæ¬¡å¤šé¡¹å¼ç‰¹å¾æ‰©å±•</span>
poly = PolynomialFeatures(degree=<span class="hljs-number">2</span>)  
X_poly = poly.fit_transform(X)

<span class="hljs-comment"># æ‹Ÿåˆæ¨¡å‹</span>
model = LinearRegression()
model.fit(X_poly, y)

<span class="hljs-comment"># é¢„æµ‹</span>
X_test = np.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">100</span>).reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)
y_pred = model.predict(poly.transform(X_test))

<span class="hljs-comment"># å¯è§†åŒ–</span>
plt.figure(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))
plt.scatter(X, y, color=<span class="hljs-string">"blue"</span>, label=<span class="hljs-string">"Data"</span>)  <span class="hljs-comment"># çœŸå®æ•°æ®</span>
plt.plot(X_test, y_pred, color=<span class="hljs-string">"red"</span>, linewidth=<span class="hljs-number">2</span>, label=<span class="hljs-string">"Polynomial Regression (degree=2)"</span>)  <span class="hljs-comment"># å›å½’æ›²çº¿</span>
plt.xlabel(<span class="hljs-string">"X"</span>)      <span class="hljs-comment"># x è½´æ ‡ç­¾</span>
plt.ylabel(<span class="hljs-string">"y"</span>)      <span class="hljs-comment"># y è½´æ ‡ç­¾</span>
plt.title(<span class="hljs-string">"Polynomial Regression"</span>)  <span class="hljs-comment"># æ ‡é¢˜</span>
plt.legend()
plt.grid(<span class="hljs-literal">True</span>, linestyle=<span class="hljs-string">"--"</span>, alpha=<span class="hljs-number">0.7</span>)  <span class="hljs-comment"># åŠ ç½‘æ ¼çº¿</span>
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­è“ç‚¹æ˜¯çœŸå®æ•°æ®ï¼ˆå¸¦å™ªå£°çš„äºŒæ¬¡æ›²çº¿ï¼‰ï¼Œçº¢çº¿æ˜¯å¤šé¡¹å¼å›å½’çš„æ‹Ÿåˆç»“æœï¼Œå¯ä»¥å¾ˆå¥½åœ°æ•æ‰æ›²çº¿è¶‹åŠ¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/242f74b807c746829a3a1d90b9242d7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768924773&amp;x-signature=IByyXK0oZmffMw2%2BUXa7ap78Hgc%3D" alt="" loading="lazy"/></p>
<p>å¤šé¡¹å¼å›å½’èƒ½å¤Ÿæ•æ‰éçº¿æ€§å…³ç³»ï¼Œæ¯”æ™®é€šçº¿æ€§å›å½’æ›´çµæ´»ï¼›å½¢å¼ç®€å•ï¼Œæ˜“äºç†è§£å’Œå®ç°ï¼›åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½æ‹Ÿåˆå¤æ‚æ›²çº¿ã€‚ä½†æ˜¯ç¼ºç‚¹æ˜¯é«˜é˜¶å¤šé¡¹å¼å¯èƒ½å¯¼è‡´ è¿‡æ‹Ÿåˆï¼Œè®¡ç®—å¤æ‚åº¦ä¸Šå‡ï¼Œå¤–æ¨èƒ½åŠ›å·®ï¼ˆåœ¨è®­ç»ƒåŒºé—´ä¹‹å¤–é¢„æµ‹å¸¸å¸¸å¤±çœŸï¼‰ã€‚</p>
<p>åœ¨æè¿°éçº¿æ€§çš„è¾¹é™…æ•ˆåº”ï¼ˆå¦‚æˆæœ¬ä¸äº§é‡çš„å…³ç³»ï¼‰ï¼Œæ‹Ÿåˆå®éªŒæ•°æ®ä¸­çš„æ›²çº¿å…³ç³»ï¼ˆå¦‚ç‰©ç†å®éªŒä¸­çš„è½¨è¿¹æ›²çº¿ï¼‰ï¼Œç”¨äºå»ºæ¨¡ä¼ æ„Ÿå™¨ä¿¡å·çš„éçº¿æ€§å“åº”æ—¶ï¼Œå˜é‡ä¹‹é—´å‘ˆç°æ›²çº¿å…³ç³»ï¼Œå¤šé¡¹å¼å›å½’æ˜¯ä¸€ä¸ªç®€å•æœ‰æ•ˆçš„é€‰æ‹©ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 65 æœŸï¼ˆ2026å¹´1.1-1.11ï¼‰]]></title>    <link>https://juejin.cn/post/7594832377697812534</link>    <guid>https://juejin.cn/post/7594832377697812534</guid>    <pubDate>2026-01-13T14:05:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594832377697812534" data-draft-id="7594523145211838518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 65 æœŸï¼ˆ2026å¹´1.1-1.11ï¼‰"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2026-01-13T14:05:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠ | ç¬¬ 65 æœŸï¼ˆ2026å¹´1.1-1.11ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:05:15.000Z" title="Tue Jan 13 2026 14:05:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc3210ce42044e15be49508413c58f7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=0so87zApXPMr4FNPCXVbcdzddbU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>C#/.NET/.NET CoreæŠ€æœ¯å‰æ²¿å‘¨åˆŠï¼Œä½ çš„æ¯å‘¨æŠ€æœ¯æŒ‡å—é’ˆï¼è®°å½•ã€è¿½è¸ªC#/.NET/.NET Coreé¢†åŸŸã€ç”Ÿæ€çš„æ¯å‘¨æœ€æ–°ã€æœ€å®ç”¨ã€æœ€æœ‰ä»·å€¼çš„æŠ€æœ¯æ–‡ç« ã€ç¤¾åŒºåŠ¨æ€ã€ä¼˜è´¨é¡¹ç›®å’Œå­¦ä¹ èµ„æºç­‰ã€‚è®©ä½ æ—¶åˆ»ç«™åœ¨æŠ€æœ¯å‰æ²¿ï¼ŒåŠ©åŠ›æŠ€æœ¯æˆé•¿ä¸è§†é‡æ‹“å®½ã€‚</p>
<blockquote>
<p>æ¬¢è¿æŠ•ç¨¿ã€æ¨èæˆ–è‡ªèä¼˜è´¨æ–‡ç« ã€é¡¹ç›®ã€å­¦ä¹ èµ„æºç­‰ã€‚</p>
</blockquote>
<ul>
<li><strong>ğŸ†æŠ€æœ¯å‰æ²¿å‘¨åˆŠGiteeå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetWeekly.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></li>
<li><strong>ğŸ“°æŠ€æœ¯å‰æ²¿å‘¨åˆŠGitHubå¼€æºåœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetWeekly.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetWeekly.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></li>
</ul>
<h2 data-id="heading-1">TIOBE å…¬å¸ƒ C# æ˜¯ 2025 å¹´åº¦ç¼–ç¨‹è¯­è¨€</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> TIOBE å…¬å¸ƒçš„æ•°æ®æ˜¾ç¤ºï¼ŒC# ä»¥ 2.94% çš„å¹´åº¦æœ€å¤§æ¶¨å¹…å†åº¦è·è¯„2025 å¹´åº¦ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨è¿‘ä¸‰å¹´å†…ï¼ŒC# ç¬¬äºŒæ¬¡è¢« TIOBE æŒ‡æ•°è¯„ä¸ºå¹´åº¦ç¼–ç¨‹è¯­è¨€ã€‚è¿™ä¸€è£èª‰æˆäºˆäº†åœ¨å¹´åº¦æ’åä¸­æ¶¨å¹…æœ€å¤§çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œ C# æ­£æ˜¯å‡­å€Ÿè¿™ä¸€æœ€å¤§å¢å¹…è·æ­¤æ®Šè£ã€‚å¤šå¹´æ¥ï¼ŒC# ç»å†äº†æ ¹æœ¬æ€§çš„å˜é©ï¼šä»è¯­è¨€è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒå¸¸å¸¸æ˜¯ä¸»æµç¼–ç¨‹è¯­è¨€ä¸­ç‡å…ˆé‡‡çº³æ–°è¶‹åŠ¿çš„å…ˆè¡Œè€…ã€‚ä¸æ­¤åŒæ—¶ï¼ŒC# æˆåŠŸå®ç°äº†ä¸¤æ¬¡é‡å¤§è½¬å‹ï¼šä¸€æ˜¯ä»ä»…é™ Windows å¹³å°è½¬å‘è·¨å¹³å°æ”¯æŒï¼ŒäºŒæ˜¯ä»å¾®è½¯ä¸“å±èµ°å‘å¼€æºã€‚C# æ€»èƒ½åœ¨å…³é”®æ—¶åˆ»åŠæ—¶æ¼”è¿›ï¼ŒæŒç»­ä¿æŒæ´»åŠ›ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFd71l1ino3oTWA_ZKyttnA" target="_blank" title="https://mp.weixin.qq.com/s/Fd71l1ino3oTWA_ZKyttnA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/Fd71l1inoâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/298d63d8448a4365a05eef9a3f6f38e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=%2BbaGr6UDR8CBS0Iasl2wbZxOyb4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">2026 å¹´ C#ä¸­å¸¦æœ‰å¤§å‹è¯­è¨€æ¨¡å‹çš„ç”Ÿæˆå¼äººå·¥æ™ºèƒ½</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> ç”Ÿæˆå¼äººå·¥æ™ºèƒ½æˆä¸ºå†å²ä¸Šå¢é•¿æœ€å¿«çš„æ¶ˆè´¹æŠ€æœ¯ï¼Œè¶…è¿‡äº† Instagram å’Œ TikTokï¼Œåœ¨ä¸åˆ°ä¸¤ä¸ªæœˆçš„æ—¶é—´å†…è¾¾åˆ°äº† 1 äº¿ç”¨æˆ·ã€‚2022 å¹´åº•ï¼ŒOpenAI å‘å¸ƒäº† GPT-3.5 çš„å…è´¹é¢„è§ˆç‰ˆï¼Œä½œä¸ºå¯¹è¯å¼èŠå¤©å®¢æˆ·ç«¯ ChatGPTã€‚è¯¥æ¨¡å‹é€šè¿‡äººç±»åé¦ˆå¼ºåŒ–å­¦ä¹ ï¼ˆRLHFï¼‰è¿›è¡Œäº†å¾®è°ƒï¼Œæ ‡å¿—ç€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½è¿›å…¥ä¸»æµè®¤çŸ¥çš„æ—¶åˆ»ã€‚2023 å¹´åˆï¼ŒMicrosoft é€šè¿‡æ¨å‡º Azure OpenAI æœåŠ¡ä½œå‡ºå›åº”ï¼Œå…è®¸å¼€å‘è€…åœ¨ Azure ç®¡ç†ç«¯ç‚¹åå®‰å…¨é…ç½®å’Œä½¿ç”¨å…¼å®¹ OpenAI çš„æ¨¡å‹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevblogs.microsoft.com%2Fdotnet%2Fgenerative-ai-with-large-language-models-in-dotnet-and-csharp%2F" target="_blank" title="https://devblogs.microsoft.com/dotnet/generative-ai-with-large-language-models-in-dotnet-and-csharp/" ref="nofollow noopener noreferrer">devblogs.microsoft.com/dotnet/geneâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e073d908537e41fd87fdf04e5930869b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=gsk61CQ8wlracd6mEYQYbwhuMfc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å®‰å…¨ä¸æ™ºèƒ½ï¼šMongoDB EF Core Provider ä¸­çš„å¯æŸ¥è¯¢åŠ å¯†ä¸çŸ¢é‡æœç´¢</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> MongoDB å®ä½“æ¡†æ¶ï¼ˆEFï¼‰æ ¸å¿ƒæä¾›è€…è‡ª 2024 å¹´ 5 æœˆèµ·å·²æ­£å¼å‘å¸ƒã€‚è‡ªå‘å¸ƒä»¥æ¥ï¼Œæˆ‘ä»¬å¯¹ .NET å¼€å‘è€…ç¤¾åŒºçš„ç§¯æåå“ä»¥åŠå…¶åœ¨å¹¿æ³›åº”ç”¨ä¸­çš„æ—¥ç›Šæ™®åŠæ„Ÿåˆ°éå¸¸å…´å¥‹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fdevblogs.microsoft.com%2Fdotnet%2Fmongodb-efcore-provider-queryable-encryption-vector-search%2F" target="_blank" title="https://devblogs.microsoft.com/dotnet/mongodb-efcore-provider-queryable-encryption-vector-search/" ref="nofollow noopener noreferrer">devblogs.microsoft.com/dotnet/mongâ€¦</a></li>
</ul>
<h2 data-id="heading-4">C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶2025å¹´12æœˆç®€æŠ¥</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å…¬ä¼—å·æ¯æœˆå®šæœŸæ¨å¹¿å’Œåˆ†äº«çš„C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ï¼ˆæ¯å‘¨è‡³å°‘ä¼šæ¨èä¸¤ä¸ªä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶å½“ç„¶èŠ‚å‡æ—¥é™¤å¤–ï¼‰ï¼Œå…¬ä¼—å·æ¨æ–‡ä¸­æœ‰é¡¹ç›®å’Œæ¡†æ¶çš„è¯¦ç»†ä»‹ç»ã€åŠŸèƒ½ç‰¹ç‚¹ã€ä½¿ç”¨æ–¹å¼ä»¥åŠéƒ¨åˆ†åŠŸèƒ½æˆªå›¾ç­‰ï¼ˆæ‰“ä¸å¼€æˆ–è€…æ‰“å¼€GitHubå¾ˆæ…¢çš„åŒå­¦å¯ä»¥ä¼˜å…ˆæŸ¥çœ‹å…¬ä¼—å·æ¨æ–‡ï¼Œæ–‡æœ«ä¸€å®šä¼šé™„å¸¦é¡¹ç›®å’Œæ¡†æ¶æºç åœ°å€ï¼‰ã€‚æ³¨æ„ï¼šæ’åä¸åˆ†å…ˆåï¼Œéƒ½æ˜¯ååˆ†ä¼˜ç§€çš„å¼€æºé¡¹ç›®å’Œæ¡†æ¶ï¼Œæ¯å‘¨å®šæœŸæ›´æ–°åˆ†äº«ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Ft4Mv4g8WbHbTWeZJjb3tzw" target="_blank" title="https://mp.weixin.qq.com/s/t4Mv4g8WbHbTWeZJjb3tzw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/t4Mv4g8Wbâ€¦</a></li>
</ul>
<h2 data-id="heading-5">è®© WinForm.NET å†æ¬¡ä¼Ÿå¤§ï¼ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> MWGAï¼ˆMake WinForms Great Againï¼‰Â æ˜¯ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®ï¼Œå³ä½¿è¿™äº› WinForms åº”ç”¨ç¨‹åºä½¿ç”¨ GDI+ åŠŸèƒ½ï¼ŒMWGAÂ é¡¹ç›®ä¹Ÿé¢„æœŸå°†å¯¹è¿™äº›ç¨‹åºæºç çš„ä¿®æ”¹é‡ä¸è¶…è¿‡10%ã€‚è¿™æå¤§çš„é™ä½ WinForms è½¯ä»¶ç°ä»£åŒ–çš„æˆæœ¬å’Œé£é™©ã€‚æ³¨æ„è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥ç¨‹ç›®å‰è¿˜åœ¨é€æ­¥è§„åˆ’ã€å®Œå–„ä¸­ï¼Œå½“å‰å·²å¼€æºæ¼”ç¤ºé¡¹ç›®ï¼Œä¸»è¦ç”¨äºç»™å¤§å®¶æ¼”ç¤ºè¿ç§»æµç¨‹ä¸éªŒè¯å…¼å®¹æ€§ï¼ˆå¤§å®¶æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–è§£å†³æ–¹æ¡ˆæ¬¢è¿å‰å¾€å¼€æºåœ°å€æIssuesï¼‰ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F2-JM1l6avTtjqhyPjgYr3g" target="_blank" title="https://mp.weixin.qq.com/s/2-JM1l6avTtjqhyPjgYr3g" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/2-JM1l6avâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b588ec386ea48cb8369a19137f44150~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=Lugu5XKKJ1zcA%2Be%2F%2BVTyWY6VuOU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸€ä¸ªåŸºäº C# ç¼–å†™ã€å¤šåŠŸèƒ½çš„ä¸Šä½æœºè½¯ä»¶ï¼Œé›†æˆäº†ä¸²å£åŠ©æ‰‹ã€è™šæ‹Ÿç¤ºæ³¢å™¨ä»¥åŠæ‘„åƒå¤´å›¾åƒæ˜¾ç¤ºç­‰å¤šç§å®ç”¨åŠŸèƒ½ï¼</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> é€é£åŠ©æ‰‹æ˜¯ä¸€ä¸ªåŸºäºC#ç¼–å†™çš„å¤šåŠŸèƒ½ä¸Šä½æœºè½¯ä»¶ã€‚è¯¥è½¯ä»¶é›†æˆäº†ä¸²å£åŠ©æ‰‹ã€è™šæ‹Ÿç¤ºæ³¢å™¨ä»¥åŠæ‘„åƒå¤´å›¾åƒæ˜¾ç¤ºç­‰å¤šç§å®ç”¨åŠŸèƒ½ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¾¿æ·ã€é«˜æ•ˆçš„æ•°æ®è°ƒè¯•ä¸ç›‘æ§è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FkIWtt1OsojIg7A5MTO3xXA" target="_blank" title="https://mp.weixin.qq.com/s/kIWtt1OsojIg7A5MTO3xXA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/kIWtt1Osoâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5304affe6bb4baeb25397ee92a6cef9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=aT3KQXCw75SeJU723T6qeZaWP4E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">dotnet 10 run file æ”¯æŒå¤šæ–‡ä»¶</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> dotnet 10 run file æ”¯æŒå¤šæ–‡ä»¶ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fp8Za-HrjSLxOhc1Qp5lCuA" target="_blank" title="https://mp.weixin.qq.com/s/p8Za-HrjSLxOhc1Qp5lCuA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/p8Za-HrjSâ€¦</a></li>
</ul>
<h2 data-id="heading-8">ä¸€æ¬¾å¼€æºã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> PropertyTools æ˜¯ä¸€æ¬¾å¼€æºï¼ˆMIT licenseï¼‰ã€å…è´¹çš„ WPF è‡ªå®šä¹‰æ§ä»¶é›†ï¼Œè¯¥æ§ä»¶é›†æ¶µç›–äº† PropertyGridã€DataGridã€æ”¯æŒå¤šé€‰çš„ TreeViewã€ColorPicker ç­‰å¸¸ç”¨æ§ä»¶ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfLsTZWyY1W7UFJWCmIa4mQ" target="_blank" title="https://mp.weixin.qq.com/s/fLsTZWyY1W7UFJWCmIa4mQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/fLsTZWyY1â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/490b0cec076a4f0a8b070cecff38532d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=%2BzV2t7d6WD8v7Y%2FUp7LmcHbfcfc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">ä¸€ä¸ªåŸºäº C# å’Œ Halcon æœºå™¨è§†è§‰å¼€å‘çš„è½¦ç‰Œè¯†åˆ«å·¥å…·</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> halcon_chepaiä¸€æ¬¾åŸºäºC#ç¼–ç¨‹è¯­è¨€ä¸Halconæœºå™¨è§†è§‰åº“çš„è½¦ç‰Œè¯†åˆ«ç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿåˆ©ç”¨Halconå¼ºå¤§çš„å›¾åƒå¤„ç†èƒ½åŠ›ï¼Œç»“åˆC#çš„çµæ´»æ€§ä¸æ˜“ç”¨æ€§ï¼Œå®ç°äº†é«˜æ•ˆã€å‡†ç¡®çš„è½¦ç‰Œè¯†åˆ«åŠŸèƒ½ã€‚è¯†åˆ«æˆåŠŸç‡é«˜è¾¾90%ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBpz36wWHhK2MPQ9YR6y8TA" target="_blank" title="https://mp.weixin.qq.com/s/Bpz36wWHhK2MPQ9YR6y8TA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/Bpz36wWHhâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8502dea02ca34d26963ab953422116da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768917915&amp;x-signature=uak7xVCEzVoi9c5RLhBmJwXVTBQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">ç²¾é€‰ 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨å½“ä»Šå¿«èŠ‚å¥çš„æ•°å­—å·¥ä½œç¯å¢ƒä¸­ï¼Œæ•ˆç‡å·¥å…·å·²æˆä¸ºå¼€å‘è€…ã€ITä¸“ä¸šäººå£«ä¹ƒè‡³æ™®é€šç”¨æˆ·æå‡ç”Ÿäº§åŠ›çš„å…³é”®åŠ©åŠ›ã€‚ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº« 10 æ¬¾ .NET å¼€æºå…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„ Windows æ•ˆç‡è½¯ä»¶ï¼Œå¼€å‘å·¥ä½œæå‡åˆ©å™¨ï¼Œå¸Œæœ›å¯ä»¥å¸®åŠ©åˆ°æœ‰éœ€è¦çš„å°ä¼™ä¼´ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQvF0X_dR85ISeeWJcbSmdg" target="_blank" title="https://mp.weixin.qq.com/s/QvF0X_dR85ISeeWJcbSmdg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/QvF0X_dR8â€¦</a></li>
</ul>
<h2 data-id="heading-11">C#ä¸­çš„7ç§æ„é€ å‡½æ•°ï¼Œä½ éƒ½ç”¨è¿‡å—ï¼Ÿ</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨ C# ä¸­ï¼Œæ„é€ å‡½æ•°æ˜¯å¯¹è±¡åˆ›å»ºæ—¶è‡ªåŠ¨æ‰§è¡Œçš„ç‰¹æ®Šæ–¹æ³•ï¼Œç”¨äºåˆå§‹åŒ–å®ä¾‹çŠ¶æ€ã€‚å®ƒä¸è¿”å›å€¼ï¼Œåç§°å¿…é¡»ä¸ç±»åä¸€è‡´ã€‚æ ¹æ®ä½¿ç”¨åœºæ™¯ä¸åŒï¼ŒC# æ”¯æŒå¤šç§æ„é€ å‡½æ•°å½¢å¼ï¼Œæ¯ç§éƒ½æœåŠ¡äºç‰¹å®šçš„åˆå§‹åŒ–éœ€æ±‚ã€‚æŒæ¡è¿™äº›ç±»å‹ï¼Œæœ‰åŠ©äºå†™å‡ºæ›´æ¸…æ™°ã€çµæ´»ä¸”å¯ç»´æŠ¤çš„ä»£ç ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FC9UazT3ytk-VbGy3qzSYPw" target="_blank" title="https://mp.weixin.qq.com/s/C9UazT3ytk-VbGy3qzSYPw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/C9UazT3ytâ€¦</a></li>
</ul>
<h2 data-id="heading-12">ä¸€ä¸ªé’ˆå¯¹ Microsoft Office åº”ç”¨ç¨‹åºçš„ .NET å°è£…åº“ï¼Œæ—¨åœ¨ç®€åŒ– Office COM ç»„ä»¶çš„ä½¿ç”¨</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> OfficeInterop æ˜¯ä¸€ä¸ªé’ˆå¯¹ Microsoft Office åº”ç”¨ç¨‹åºçš„ .NET å°è£…åº“ï¼Œå…¶æ ¸å¿ƒç›®æ ‡æ˜¯ç®€åŒ– Office COM ç»„ä»¶çš„ä½¿ç”¨ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ›´æ–¹ä¾¿ã€æ›´é«˜æ•ˆåœ°åœ¨ .NET ç¯å¢ƒä¸­æ“ä½œ Office åº”ç”¨ç¨‹åºï¼Œå¦‚ Excelã€Word ç­‰ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSOJdHwrP-X1suv0v8PNEcg" target="_blank" title="https://mp.weixin.qq.com/s/SOJdHwrP-X1suv0v8PNEcg" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/SOJdHwrP-â€¦</a></li>
</ul>
<h2 data-id="heading-13">è®°ä¸€æ¬¡ .NET æŸMESä¸Šä½æœºæ‹ç…§ç³»ç»Ÿ å†…å­˜æš´æ¶¨åˆ†æ</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> è¿™æ˜¯è®­ç»ƒè¥é‡Œçš„ä¸€ä½æœ‹å‹æ‰¾åˆ°æˆ‘çš„ï¼Œè¯´ä»–ä»¬çš„ç³»ç»Ÿä¼šæœ‰å¶å‘çš„å†…å­˜æš´æ¶¨æƒ…å†µï¼Œè‡ªå·±ä¹Ÿæ²¡åˆ†æå‡ºæ¥ï¼Œè®©æˆ‘å¸®å¿™çœ‹ä¸‹æ€ä¹ˆå›äº‹ï¼Œæ‹¿äº†ä¸€ä¸ª20G+çš„dumpæ–‡ä»¶ï¼Œè¿™æ–‡ä»¶æ˜¯å¤Ÿå¤§çš„ï¼Œæˆ‘ä¸ªäººå»ºè®®ä¸€èˆ¬æ˜¯ä¸è¶…è¿‡10Gï¼Œä¸ç„¶çš„è¯windbgåˆ†æèµ·æ¥å¾ˆåƒåŠ›ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fhuangxincheng%2Fp%2F19450501" target="_blank" title="https://www.cnblogs.com/huangxincheng/p/19450501" ref="nofollow noopener noreferrer">www.cnblogs.com/huangxincheâ€¦</a></li>
</ul>
<h2 data-id="heading-14">ã€è¯‘ã€‘Visual Studio 11 æœˆæ›´æ–° â€”â€” Visual Studio 2026ã€Cloud Agent Preview åŠæ›´å¤šå†…å®¹</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> å¦‚æœæ‚¨è¿˜æ²¡å¬è¯´è¿™ä¸ªæ¶ˆæ¯ï¼Œæˆ‘ä»¬å¾ˆå…´å¥‹åœ°å’Œæ‚¨åˆ†äº«ï¼šVisual Studio 2026 ç°å·²å…¨é¢å‘å¸ƒï¼è¿™ä¸ªæ–°ç‰ˆæœ¬åœ¨å¤šé¡¹æ€§èƒ½æ”¹è¿›ã€é‡æ–°è®¾è®¡çš„ç”¨æˆ·ä½“éªŒä»¥åŠäººå·¥æ™ºèƒ½é©±åŠ¨çš„å¼€å‘æ–¹é¢å®ç°äº†é‡å¤§é£è·ƒï¼Œèƒ½ä¸ºæ‚¨æä¾›æ›´å¥½çš„å¸®åŠ©ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2FMeteorSeed%2Fp%2F19441728" target="_blank" title="https://www.cnblogs.com/MeteorSeed/p/19441728" ref="nofollow noopener noreferrer">www.cnblogs.com/MeteorSeed/â€¦</a></li>
</ul>
<h2 data-id="heading-15">ä½¿ç”¨ C# å’Œ SQL Server è‡ªåŠ¨åŒ–é‚®ä»¶ä¸­çš„ç”¨æˆ·åˆ†é…æ•°æ®å¤„ç†</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> åœ¨é‡‘èåº”ç”¨é¢†åŸŸï¼Œé€šè¿‡ç”µå­é‚®ä»¶æ‰‹åŠ¨ç®¡ç†ç”¨æˆ·åˆ†é…æ•°æ®ä¸ä»…è€—æ—¶è€Œä¸”å®¹æ˜“å‡ºé”™ã€‚ä¼ ç»Ÿçš„äººå·¥å¤„ç†æ–¹å¼éœ€è¦å·¥ä½œäººå‘˜æ¯å¤©æ£€æŸ¥é‚®ä»¶ã€ä¸‹è½½é™„ä»¶ã€è§£ææ•°æ®å¹¶æ›´æ–°æ•°æ®åº“ï¼Œè¿™ä¸€ç³»åˆ—é‡å¤æ€§å·¥ä½œæ—¢ä½æ•ˆåˆå­˜åœ¨æ•°æ®å½•å…¥é”™è¯¯çš„é£é™©ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åˆ©ç”¨ C# å’Œ SQL Server æ„å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–è§£å†³æ–¹æ¡ˆï¼Œå®ç°ä»é‚®ä»¶è¯»å–ã€é™„ä»¶ä¸‹è½½åˆ°æ•°æ®åº“æ›´æ–°çš„å…¨æµç¨‹è‡ªåŠ¨åŒ–å¤„ç†ã€‚è¯¥ç³»ç»Ÿç‰¹åˆ«é€‚ç”¨äºå¤„ç†ä¸»é¢˜åŒ…å«"AllotmentsFiles"çš„é‚®ä»¶ï¼Œå¹¶æ›´æ–° SQL Server ä¸­çš„ bidfiledetails è¡¨ï¼Œæ˜¾è‘—æé«˜æ•°æ®å¤„ç†æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fpowertoolsteam%2Fp%2F19444281" target="_blank" title="https://www.cnblogs.com/powertoolsteam/p/19444281" ref="nofollow noopener noreferrer">www.cnblogs.com/powertoolstâ€¦</a></li>
</ul>
<h2 data-id="heading-16">Zenith.NET v0.0.2 å‘å¸ƒ ğŸ‰ â€” ç»Ÿä¸€çš„ .NET GPU ç¼–ç¨‹åº“ï¼Œæ”¯æŒ DX12/Vulkan + 6 å¤§ UI æ¡†æ¶</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> Zenith.NET æ˜¯ä¸€ä¸ªç°ä»£çš„ã€è·¨å¹³å°çš„ .NET å›¾å½¢ä¸è®¡ç®—åº“ï¼Œæ—¨åœ¨ä¸º .NET å¼€å‘è€…æä¾›ç»Ÿä¸€çš„ GPU ç¼–ç¨‹æ¥å£ã€‚æ— è®ºä½ æ˜¯è¦åšé«˜æ€§èƒ½æ¸²æŸ“ã€å›¾å½¢åº”ç”¨ï¼Œè¿˜æ˜¯ GPU é€šç”¨è®¡ç®—ï¼ŒZenith.NET éƒ½èƒ½å¸®ä½ å±è”½åº•å±‚ API çš„å·®å¼‚ï¼Œè®©ä»£ç åœ¨ä¸åŒå¹³å°ä¸Šæ— ç¼è¿è¡Œã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fxymfblogs%2Fp%2F19443277" target="_blank" title="https://www.cnblogs.com/xymfblogs/p/19443277" ref="nofollow noopener noreferrer">www.cnblogs.com/xymfblogs/pâ€¦</a></li>
</ul>
<h2 data-id="heading-17">.NET 10 New feature æ–°å¢åŠŸèƒ½ä»‹ç»-WebSocketåŠŸèƒ½å¢å¼º</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> .NET 10 æ–°å¢äº† WebSocketStreamä¸€ä¸ªæ–°çš„ APIï¼Œç”¨äºç®€åŒ– .NET ä¸­ä¸€äº›æœ€å¸¸è§çš„WebSocket çš„æµå¼å¤„ç†æ–¹æ¡ˆã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Ftianqing%2Fp%2F19439916" target="_blank" title="https://www.cnblogs.com/tianqing/p/19439916" ref="nofollow noopener noreferrer">www.cnblogs.com/tianqing/p/â€¦</a></li>
</ul>
<h2 data-id="heading-18">.NET+AI | åŸºäº Microsoft Agent Framework ä¸€æ­¥æ­¥é›†æˆ Agent Skillsï¼Œè®©ä½ çš„ AI Agent æ›´æ™ºèƒ½</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> éšç€ AI Agent æŠ€æœ¯çš„å¿«é€Ÿå‘å±•ï¼Œå¦‚ä½•è®© Agent å…·å¤‡å¯å¤ç”¨ã€å¯æ‰©å±•çš„ä¸“ä¸šèƒ½åŠ›æˆä¸ºä¸€ä¸ªé‡è¦è¯¾é¢˜ã€‚Agent Skills è§„èŒƒæä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥å®šä¹‰å’Œåˆ†å‘ Agent æŠ€èƒ½ï¼Œè€Œ Microsoft Agent Framework (MAF) åˆ™æä¾›äº†æ„å»º AI Agent çš„å¼ºå¤§åŸºç¡€è®¾æ–½ã€‚æœ¬æ–‡å°†æ·±å…¥ä»‹ç»å¦‚ä½•åŸºäº MAF çš„ä¸Šä¸‹æ–‡æ‰©å±•ï¼ˆAIContextProviderï¼‰å®ç° Agent Skills çš„é›†æˆï¼ŒåŒ…æ‹¬æ ¸å¿ƒæ¶æ„è®¾è®¡ã€å…³é”®ç»„ä»¶å®ç°ä»¥åŠå®é™…åº”ç”¨ç¤ºä¾‹ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fsheng-jie%2Fp%2F19442149" target="_blank" title="https://www.cnblogs.com/sheng-jie/p/19442149" ref="nofollow noopener noreferrer">www.cnblogs.com/sheng-jie/pâ€¦</a></li>
</ul>
<h2 data-id="heading-19">ä» TIOBE 2025 å¹´åº¦è¯­è¨€åˆ° 2026 å¹´ C# æ™ºèƒ½ä½“ç”Ÿæ€çš„å…¨é¢å´›èµ·</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> 2026 å¹´ 1 æœˆï¼Œéšç€ TIOBE æŒ‡æ•°æ­£å¼å®£å¸ƒ C# ä¸º 2025 å¹´åº¦ç¼–ç¨‹è¯­è¨€ï¼Œå…¨çƒè½¯ä»¶å·¥ç¨‹é¢†åŸŸè¿æ¥äº†ä¸€ä¸ªå†³å®šæ€§çš„è½¬æŠ˜ç‚¹ã€‚è¿™ä¸€è£èª‰ä¸ä»…æ˜¯å¯¹ C# è¿‡å»ä¸€å¹´åœ¨æœç´¢çƒ­åº¦å’Œå¼€å‘è€…æ´»è·ƒåº¦ä¸Šå–å¾—æœ€å¤§å¢å¹…çš„è®¤å¯ï¼Œæ›´æ˜¯ä¸€ä¸ªæ»åæŒ‡æ ‡ï¼Œæ­ç¤ºäº†åº•å±‚æŠ€æœ¯èŒƒå¼çš„æ·±åˆ»å˜è¿ã€‚å¦‚æœè¯´è¿‡å»åå¹´æ˜¯ Python ä¾é æ•°æ®ç§‘å­¦å’Œæ¨¡å‹è®­ç»ƒç¡®ç«‹éœ¸æƒçš„æ—¶ä»£ï¼Œé‚£ä¹ˆ 2025 å¹´çš„æ•°æ®è¡¨æ˜ï¼Œè¡Œä¸šé‡å¿ƒæ­£åœ¨ä»â€œæ¨¡å‹æ„å»ºâ€å‘â€œç³»ç»Ÿç¼–æ’â€è½¬ç§»ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fshanyou%2Fp%2F19441004" target="_blank" title="https://www.cnblogs.com/shanyou/p/19441004" ref="nofollow noopener noreferrer">www.cnblogs.com/shanyou/p/1â€¦</a></li>
</ul>
<h2 data-id="heading-20">2026ï¼šè®©.NETå†æ¬¡ä¼Ÿå¤§</h2>
<ul>
<li><strong>æ–‡ç« ç®€ä»‹ï¼š</strong> 2026å¹´ï¼Œåº”è¯¥è€ƒè™‘ä¸€ä¸ªæˆ˜ç•¥å†³ç­–â€”â€”å°†.NET SDKçº³å…¥æ“ä½œç³»ç»Ÿï¼Œè¿™å°†å¯¹æ•´ä¸ªå¼€å‘ç”Ÿæ€äº§ç”Ÿæ·±è¿œå½±å“ã€‚</li>
<li><strong>æ–‡ç« åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fmsdeveloper%2Fp%2F19427679%2Fmake-dotnet-great-again-2026" target="_blank" title="https://www.cnblogs.com/msdeveloper/p/19427679/make-dotnet-great-again-2026" ref="nofollow noopener noreferrer">www.cnblogs.com/msdeveloperâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vuexæ—¥æ¸å¼å¾®ï¼ŸçŠ¶æ€ç®¡ç†çš„ä¸‰å¤§ç—›ç‚¹ä¸æ–°æ—¶ä»£æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7594662879202312218</link>    <guid>https://juejin.cn/post/7594662879202312218</guid>    <pubDate>2026-01-13T14:07:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662879202312218" data-draft-id="7594680314713063474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vuexæ—¥æ¸å¼å¾®ï¼ŸçŠ¶æ€ç®¡ç†çš„ä¸‰å¤§ç—›ç‚¹ä¸æ–°æ—¶ä»£æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:07:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vuexæ—¥æ¸å¼å¾®ï¼ŸçŠ¶æ€ç®¡ç†çš„ä¸‰å¤§ç—›ç‚¹ä¸æ–°æ—¶ä»£æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:07:43.000Z" title="Tue Jan 13 2026 14:07:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºVueç”Ÿæ€æ›¾ç»çš„â€œå®˜æ–¹æ ‡é…â€ï¼ŒVuexåœ¨æ— æ•°é¡¹ç›®ä¸­ç«‹ä¸‹æ±—é©¬åŠŸåŠ³ã€‚ä½†è¿‘å¹´æ¥ï¼Œéšç€Vue 3å’ŒComposition APIçš„å´›èµ·ï¼Œè¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å¼€å§‹é‡æ–°å®¡è§†è¿™ä¸ªè€ç‰ŒçŠ¶æ€ç®¡ç†åº“ã€‚</p>
<h2 data-id="heading-0">Vuexçš„è®¾è®¡åˆè¡·ï¼šè§£å†³ç»„ä»¶é€šä¿¡éš¾é¢˜</h2>
<p>å›æƒ³Vue 2æ—¶ä»£ï¼Œå½“æˆ‘ä»¬çš„åº”ç”¨ä»ç®€å•çš„å•é¡µé¢é€æ¸æ¼”å˜æˆå¤æ‚çš„ä¸­å¤§å‹åº”ç”¨æ—¶ï¼Œ<strong>ç»„ä»¶é—´çš„æ•°æ®å…±äº«</strong>æˆä¸ºäº†ä¸€å¤§ç—›ç‚¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â ç»å…¸çš„VuexÂ storeç»“æ„</span>
<span class="hljs-keyword">const</span>Â storeÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
Â Â <span class="hljs-attr">state</span>:Â {
Â Â Â Â <span class="hljs-attr">count</span>:Â <span class="hljs-number">0</span>,
Â Â Â Â <span class="hljs-attr">user</span>:Â <span class="hljs-literal">null</span>
Â Â },
Â Â <span class="hljs-attr">mutations</span>:Â {
Â Â Â Â <span class="hljs-title function_">increment</span>(<span class="hljs-params">state</span>)Â {
Â Â Â Â Â Â state.<span class="hljs-property">count</span>++
Â Â Â Â }
Â Â },
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params">{Â commitÂ }</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â userÂ =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">getUser</span>()
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_USER'</span>,Â user)
Â Â Â Â }
Â Â },
Â Â <span class="hljs-attr">getters</span>:Â {
Â Â Â Â <span class="hljs-attr">doubleCount</span>:Â <span class="hljs-function"><span class="hljs-params">state</span>Â =&gt;</span>Â state.<span class="hljs-property">count</span>Â *Â <span class="hljs-number">2</span>
Â Â }
})
</code></pre>
<p>è¿™ç§é›†ä¸­å¼çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œç¡®å®åœ¨å½“æ—¶è§£å†³äº†ï¼š</p>
<ul>
<li>â€¢ å¤šä¸ªç»„ä»¶å…±äº«åŒä¸€çŠ¶æ€çš„é—®é¢˜</li>
<li>â€¢ çŠ¶æ€å˜æ›´çš„å¯è¿½æº¯æ€§</li>
<li>â€¢ å¼€å‘å·¥å…·çš„æ—¶é—´æ—…è¡Œè°ƒè¯•</li>
</ul>
<h2 data-id="heading-1">ç—›ç‚¹æµ®ç°ï¼šVuexçš„ä¸‰å¤§â€œæ—¶ä»£å±€é™â€</h2>
<h3 data-id="heading-2">1.Â <strong>æ ·æ¿ä»£ç è¿‡å¤šï¼Œå¼€å‘ä½“éªŒç¹ç</strong></h3>
<p>è¿™æ˜¯Vuexæœ€å¸¸è¢«è¯Ÿç—…çš„é—®é¢˜ã€‚ä¸€ä¸ªç®€å•çš„çŠ¶æ€æ›´æ–°ï¼Œéœ€è¦ç»è¿‡<code>action</code>â†’<code>mutation</code>â†’<code>state</code>çš„å®Œæ•´æµç¨‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â å®šä¹‰éƒ¨åˆ†</span>
<span class="hljs-keyword">const</span>Â actionsÂ =Â {
Â Â <span class="hljs-title function_">updateUser</span>(<span class="hljs-params">{Â commitÂ },Â user</span>)Â {
Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_USER'</span>,Â user)
Â Â }
}

<span class="hljs-keyword">const</span>Â mutationsÂ =Â {
Â Â <span class="hljs-title function_">SET_USER</span>(<span class="hljs-params">state,Â user</span>)Â {
Â Â Â Â state.<span class="hljs-property">user</span>Â =Â user
Â Â }
}

<span class="hljs-comment">//Â ä½¿ç”¨éƒ¨åˆ†</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'updateUser'</span>,Â newUser)
</code></pre>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œç›´æ¥çš„çŠ¶æ€èµ‹å€¼åªéœ€è¦ä¸€è¡Œä»£ç ã€‚åœ¨ä¸­å°å‹é¡¹ç›®ä¸­ï¼Œè¿™ç§å¤æ‚åº¦å¸¸å¸¸æ˜¾å¾—â€œæ€é¸¡ç”¨ç‰›åˆ€â€ã€‚</p>
<h3 data-id="heading-3">2.Â <strong>TypeScriptæ”¯æŒä¸å‹å¥½</strong></h3>
<p>è™½ç„¶Vuex 4æ”¹è¿›äº†TSæ”¯æŒï¼Œä½†å…¶åŸºäºå­—ç¬¦ä¸²çš„<code>dispatch</code>å’Œ<code>commit</code>è°ƒç”¨æ–¹å¼ï¼Œå§‹ç»ˆéš¾ä»¥è·å¾—å®Œç¾çš„ç±»å‹æ¨æ–­ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â ç±»å‹å®‰å…¨è¾ƒå¼±</span>
store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_USER'</span>,Â user)Â <span class="hljs-comment">//Â 'SET_USER'å­—ç¬¦ä¸²æ— ç±»å‹æ£€æŸ¥</span>

<span class="hljs-comment">//Â éœ€è¦é¢å¤–å®šä¹‰ç±»å‹</span>
<span class="hljs-keyword">interface</span>Â <span class="hljs-title class_">User</span>Â {
Â Â <span class="hljs-attr">id</span>:Â <span class="hljs-built_in">number</span>
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">//Â ä½†å®šä¹‰å’Œä½¿ç”¨ä»æ˜¯åˆ†ç¦»çš„</span>
</code></pre>
<h3 data-id="heading-4">3.Â <strong>æ¨¡å—ç³»ç»Ÿå¤æ‚ï¼Œä»£ç ç»„ç»‡å›°éš¾</strong></h3>
<p>éšç€é¡¹ç›®å¢å¤§ï¼ŒVuexçš„æ¨¡å—ç³»ç»Ÿ(namespaced modules)å¸¦æ¥äº†æ–°çš„å¤æ‚åº¦ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â è®¿é—®æ¨¡å—ä¸­çš„çŠ¶æ€éœ€è¦å‘½åç©ºé—´å‰ç¼€</span>
<span class="hljs-attr">computed</span>:Â {
Â Â ...<span class="hljs-title function_">mapState</span>({
Â Â Â Â <span class="hljs-attr">user</span>:Â <span class="hljs-function"><span class="hljs-params">state</span>Â =&gt;</span>Â state.<span class="hljs-property">moduleA</span>.<span class="hljs-property">user</span>
Â Â })
}

<span class="hljs-comment">//Â æ´¾å‘actionä¹Ÿéœ€è¦å‰ç¼€</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">'moduleA/fetchData'</span>)
</code></pre>
<p>åŠ¨æ€æ³¨å†Œæ¨¡å—ã€æ¨¡å—é—´çš„ä¾èµ–å…³ç³»å¤„ç†ç­‰é—®é¢˜ï¼Œè®©ä»£ç ç»´æŠ¤æˆæœ¬é€æ¸å‡é«˜ã€‚</p>
<h2 data-id="heading-5">æ–°æ—¶ä»£çš„è§£å†³æ–¹æ¡ˆï¼šæ›´è½»é‡ã€æ›´çµæ´»çš„é€‰æ‹©</h2>
<h3 data-id="heading-6">æ–¹æ¡ˆä¸€ï¼šComposition API + Provide/Inject</h3>
<p>Vue 3çš„Composition APIä¸ºçŠ¶æ€ç®¡ç†æä¾›äº†å…¨æ–°æ€è·¯ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">//Â ä½¿ç”¨CompositionÂ APIåˆ›å»ºå“åº”å¼store</span>
<span class="hljs-function">exportÂ functionÂ <span class="hljs-title">useUserStore</span>()</span>Â {
Â Â <span class="hljs-keyword">const</span>Â userÂ =Â <span class="hljs-keyword">ref</span>&lt;UserÂ |Â <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)
Â Â 
Â Â <span class="hljs-keyword">const</span>Â setUserÂ =Â (newUser:Â User)Â =&gt;Â {
Â Â Â Â user.<span class="hljs-keyword">value</span>Â =Â newUser
Â Â }
Â Â 
Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â user:Â <span class="hljs-keyword">readonly</span>(user),
Â Â Â Â setUser
Â Â }
}

<span class="hljs-comment">//Â åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span>Â {Â user,Â setUserÂ }Â =Â useUserStore()
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>â€¢ é›¶ä¾èµ–ã€é›¶å­¦ä¹ æˆæœ¬</li>
<li>â€¢ å®Œç¾çš„TypeScriptæ”¯æŒ</li>
<li>â€¢ æŒ‰éœ€å¯¼å…¥ï¼ŒTree-shakingå‹å¥½</li>
</ul>
<h3 data-id="heading-7">æ–¹æ¡ˆäºŒï¼šPiniaâ€”â€”Vuexçš„ç°ä»£ç»§æ‰¿è€…</h3>
<p>Piniaè¢«çœ‹ä½œæ˜¯â€œä¸‹ä¸€ä»£Vuexâ€ï¼Œè§£å†³äº†Vuexçš„è®¸å¤šç—›ç‚¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â å®šä¹‰store</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">const</span>Â useUserStoreÂ =Â <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>,Â {
Â Â <span class="hljs-attr">state</span>:Â <span class="hljs-function">()Â =&gt;</span>Â ({
Â Â Â Â <span class="hljs-attr">user</span>:Â <span class="hljs-literal">null</span>Â <span class="hljs-keyword">as</span>Â <span class="hljs-title class_">User</span>Â |Â <span class="hljs-literal">null</span>,
Â Â }),
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">fetchUser</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span>Â =Â <span class="hljs-keyword">await</span>Â api.<span class="hljs-title function_">getUser</span>()
Â Â Â Â },
Â Â },
})

<span class="hljs-comment">//Â ä½¿ç”¨store</span>
<span class="hljs-keyword">const</span>Â userStoreÂ =Â <span class="hljs-title function_">useUserStore</span>()
userStore.<span class="hljs-title function_">fetchUser</span>()
</code></pre>
<p><strong>Piniaçš„è¿›æ­¥</strong>ï¼š</p>
<ul>
<li>â€¢ ç§»é™¤mutationsï¼Œactionså¯ç›´æ¥ä¿®æ”¹çŠ¶æ€</li>
<li>â€¢ å®Œæ•´çš„TypeScriptæ”¯æŒ</li>
<li>â€¢ æ›´ç®€æ´çš„APIè®¾è®¡</li>
<li>â€¢ æ”¯æŒComposition APIå’ŒOptions API</li>
</ul>
<h2 data-id="heading-8">å®æˆ˜å»ºè®®ï¼šå¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>
<p>æ ¹æ®æˆ‘çš„é¡¹ç›®ç»éªŒï¼Œå»ºè®®å¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-9"><strong>ç»§ç»­ä½¿ç”¨Vuexçš„æƒ…å†µ</strong>ï¼š</h3>
<ul>
<li>â€¢ ç»´æŠ¤å·²æœ‰çš„Vue 2å¤§å‹é¡¹ç›®</li>
<li>â€¢ å›¢é˜Ÿå·²æ·±åº¦ç†Ÿæ‚‰Vuexï¼Œä¸”é¡¹ç›®è¿è¡Œç¨³å®š</li>
<li>â€¢ éœ€è¦åˆ©ç”¨Vuex DevToolsçš„ç‰¹å®šåŠŸèƒ½</li>
</ul>
<h3 data-id="heading-10"><strong>è€ƒè™‘è¿ç§»/ä½¿ç”¨æ–°æ–¹æ¡ˆçš„æƒ…å†µ</strong>ï¼š</h3>
<ul>
<li>â€¢Â <strong>æ–°é¡¹ç›®</strong>ï¼šä¼˜å…ˆè€ƒè™‘Pinia</li>
<li>â€¢Â <strong>Vue 3é¡¹ç›®</strong>ï¼šä¸­å°å‹å¯ç”¨Composition APIï¼Œå¤§å‹æ¨èPinia</li>
<li>â€¢Â <strong>å¯¹TypeScriptè¦æ±‚é«˜</strong>ï¼šç›´æ¥é€‰æ‹©Pinia</li>
</ul>
<h2 data-id="heading-11">è¿ç§»ç­–ç•¥ï¼šå¹³ç¨³è¿‡æ¸¡</h2>
<p>å¦‚æœä½ å†³å®šä»Vuexè¿ç§»åˆ°Piniaï¼Œå¯ä»¥é‡‡å–æ¸è¿›å¼ç­–ç•¥ï¼š</p>
<ol>
<li>1.Â <strong>å¹¶è¡Œè¿è¡Œ</strong>ï¼šæ–°æ—§storeç³»ç»Ÿå…±å­˜</li>
<li>2.Â <strong>æ¨¡å—é€ä¸ªè¿ç§»</strong>ï¼šæŒ‰ä¸šåŠ¡æ¨¡å—é€æ­¥è¿ç§»</li>
<li>3.Â <strong>å·¥å…·è¾…åŠ©</strong>ï¼šåˆ©ç”¨å®˜æ–¹è¿ç§»æŒ‡å—å’Œå·¥å…·</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//Â è¿ç§»ç¤ºä¾‹ï¼šå°†Vuexæ¨¡å—è½¬ä¸ºPiniaÂ store</span>
<span class="hljs-comment">//Â Vuexç‰ˆæœ¬</span>
<span class="hljs-keyword">const</span>Â userModuleÂ =Â {
Â Â <span class="hljs-attr">state</span>:Â {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">''</span>Â },
Â Â <span class="hljs-attr">mutations</span>:Â {Â <span class="hljs-title function_">SET_NAME</span>(<span class="hljs-params">state,Â name</span>)Â {Â state.<span class="hljs-property">name</span>Â =Â nameÂ }Â }
}

<span class="hljs-comment">//Â Piniaç‰ˆæœ¬</span>
<span class="hljs-keyword">const</span>Â useUserStoreÂ =Â <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>,Â {
Â Â <span class="hljs-attr">state</span>:Â <span class="hljs-function">()Â =&gt;</span>Â ({Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">''</span>Â }),
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-title function_">setName</span>(<span class="hljs-params">name:Â <span class="hljs-built_in">string</span></span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>Â =Â name
Â Â Â Â }
Â Â }
})
</code></pre>
<h2 data-id="heading-12">å†™åœ¨æœ€å</h2>
<p>æŠ€æœ¯æ€»æ˜¯åœ¨ä¸æ–­æ¼”è¿›ã€‚Vuexä½œä¸ºç‰¹å®šå†å²é˜¶æ®µçš„ä¼˜ç§€è§£å†³æ–¹æ¡ˆï¼Œå®Œæˆäº†å®ƒçš„ä½¿å‘½ã€‚è€Œä»Šå¤©ï¼Œæˆ‘ä»¬æœ‰æ›´å¤šã€æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<p><strong>æ ¸å¿ƒä¸æ˜¯è¿½æ±‚æœ€æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸ºé¡¹ç›®é€‰æ‹©æœ€åˆé€‚çš„å·¥å…·ã€‚</strong></p>
<p>å¯¹äºå¤§å¤šæ•°æ–°é¡¹ç›®ï¼ŒPiniaæ— ç–‘æ˜¯æ›´ç°ä»£ã€æ›´ä¼˜é›…çš„é€‰æ‹©ã€‚ä½†å¯¹äºå·²æœ‰çš„Vuexé¡¹ç›®ï¼Œé™¤éæœ‰æ˜ç¡®çš„ç—›ç‚¹éœ€è¦è§£å†³ï¼Œå¦åˆ™â€œç¨³å®šå‹å€’ä¸€åˆ‡â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ—¶åºæ•°æ®æ—¶ä»£çš„â€œå­˜å‚¨ä¸åˆ†æå›°å±€â€è§£æåŠé‡‘ä»“è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7594681318828359730</link>    <guid>https://juejin.cn/post/7594681318828359730</guid>    <pubDate>2026-01-13T14:08:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594681318828359730" data-draft-id="7594657393830641702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ—¶åºæ•°æ®æ—¶ä»£çš„â€œå­˜å‚¨ä¸åˆ†æå›°å±€â€è§£æåŠé‡‘ä»“è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-13T14:08:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ—¶åºæ•°æ®æ—¶ä»£çš„â€œå­˜å‚¨ä¸åˆ†æå›°å±€â€è§£æåŠé‡‘ä»“è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:08:16.000Z" title="Tue Jan 13 2026 14:08:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åšæ—¶åºæ•°æ®å¹³å°ï¼Œæœ€å®¹æ˜“è¢«ä¸¤ä»¶äº‹æ‹¦ä½ï¼šä¸€æ˜¯â€œè¶Šå­˜è¶Šè´µâ€ï¼ŒäºŒæ˜¯â€œè¶ŠæŸ¥è¶Šæ…¢â€ã€‚æœ¬æ–‡å°±ä»ä¸€çº¿é¡¹ç›®é‡Œæœ€å¸¸è§çš„å‘è®²èµ·ï¼ŒæŠŠæ—¶åºæ•°æ®åœ¨å­˜å‚¨ã€æŸ¥è¯¢ã€æ²»ç†ã€è¿ç»´ä¸Šçš„çŸ›ç›¾æ‹†å¼€è¯´æ¸…æ¥šï¼Œå†ç»™å‡ºä¸€å¥—ä»¥é‡‘ä»“æ—¶åºæ•°æ®åº“ä¸ºåº•åº§ã€æˆæœ¬å¯æ§ã€èƒ½ä¸€æ­¥æ­¥è½åœ°çš„å·¥ç¨‹æ–¹æ¡ˆï¼ˆå« SQL ç¤ºä¾‹ä¸å›¾è¡¨ï¼‰ã€‚<br/>
æƒ³è¿›ä¸€æ­¥äº†è§£äº§å“ä¸è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ç›´æ¥çœ‹é‡‘ä»“æ•°æ®åº“å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2F" target="_blank" title="https://www.kingbase.com.cn/" ref="nofollow noopener noreferrer">www.kingbase.com.cn/</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1480221eb0284fcd9545bedb60bdddcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918095&amp;x-signature=hj1Qi4x8%2FQ7%2BsVUMEJvXCoWSQ6Q%3D" alt="5938d9946498fc69fc6168ef7c025751.jpg" loading="lazy"/></p>
<p>@[toc]</p>
<hr/>
<h2 data-id="heading-0">1. æ—¶åºæ•°æ®çš„â€œå›°å±€â€åˆ°åº•å›°åœ¨å“ªï¼Ÿ</h2>
<p>æ—¶åºæ•°æ®è¡¨é¢ä¸Šå°±æ˜¯â€œå¸¦æ—¶é—´æˆ³çš„ç‚¹â€ã€‚ä½†çœŸåˆ°ç”Ÿäº§ç¯å¢ƒï¼Œéº»çƒ¦å¾€å¾€ä¸åœ¨è¡¨æ€ä¹ˆå»ºï¼Œè€Œåœ¨è´Ÿè½½æ€ä¹ˆæ¥ï¼š</p>
<ul>
<li>å†™å…¥åƒæ´ªå³°ï¼šé‡‡é›†ç«¯ä¸€å¤šï¼Œå³°å€¼ä¸€ä¸Šæ¥ï¼Œç³»ç»Ÿå¾ˆå®¹æ˜“è¢«é¡¶æ»¡</li>
<li>æŸ¥è¯¢åƒçªå‘ï¼šçœ‹æ¿ã€æ’éšœç»å¸¸æ‰å †åœ¨æŸäº›æ—¶é—´çª—ï¼Œè€Œä¸”å¹¶å‘ä¸ä½</li>
<li>ç•™å­˜åƒé•¿è·‘ï¼šä¸å°‘å…³é”®è¡Œä¸šè¦é•¿æœŸç•™å­˜ï¼Œè¿˜å¾—éšæ—¶èƒ½è¿½æº¯</li>
<li>ç»´åº¦åƒç¢ç‰‡ï¼šè®¾å¤‡ã€åŒºåŸŸã€ä¸šåŠ¡åŸŸã€å·¥å•ã€ç­ç»„è¿™äº›ç»´åº¦ä¸€å åŠ ï¼Œæ£€ç´¢è·¯å¾„ç«‹åˆ»å˜å¤æ‚</li>
</ul>
<p>è¿™äº›ç‰¹å¾å åœ¨ä¸€èµ·ï¼Œå°±å¾ˆå®¹æ˜“å˜æˆå¤§å®¶ç†Ÿæ‚‰çš„â€œå­˜å‚¨ä¸åˆ†æå›°å±€â€ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  A[é«˜é¢‘å†™å…¥] --&gt; D[èµ„æºè¢«å†™å…¥æŒ¤å ]
  B[çªå‘æŸ¥è¯¢] --&gt; E[æŸ¥è¯¢æŠ–åŠ¨ã€å»¶è¿Ÿä¸Šå‡]
  C[é•¿å‘¨æœŸç•™å­˜] --&gt; F[æˆæœ¬ä¸å¯æ§ã€ç»´æŠ¤å¤æ‚]
  D --&gt; G[çœ‹æ¿ä¸ç¨³]
  E --&gt; G
  F --&gt; H[ä¸æ•¢æ‰©è§„æ¨¡]
  G --&gt; H
</code></pre>
<p>æ‰€ä»¥ï¼Œæ—¶åºé¡¹ç›®çœŸæ­£è¦è§£å†³çš„å¾€å¾€ä¸æ˜¯â€œèƒ½ä¸èƒ½å­˜â€ï¼Œè€Œæ˜¯å››ä¸ªå­—ï¼š<strong>ç¨³ã€å¿«ã€çœã€ä¹…</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. ä¸‰ä¸ªå…¸å‹ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆâ€œå­˜å‚¨â€å’Œâ€œåˆ†æâ€å®¹æ˜“ä¸€èµ·å´©</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4a5a1eaa13e42c080a209df271e6d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918095&amp;x-signature=gDsi9Y6Gqp80BUdBNldcVbkwhUQ%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 ç—›ç‚¹ä¸€ï¼šæ˜ç»†è¡¨æ— é™é•¿ï¼Œæœ€åè°éƒ½ç»´æŠ¤ä¸åŠ¨</h3>
<p>æ—¶åºæ˜ç»†å¤©ç”Ÿâ€œæŒ‰æ—¶é—´é•¿â€ã€‚å¦‚æœåˆ†åŒºå’Œç”Ÿå‘½å‘¨æœŸæ²¡è·Ÿä¸Šï¼Œåé¢å¤§æ¦‚ç‡ä¼šè¸©åˆ°è¿™äº›å‘ï¼š</p>
<ul>
<li>è¡¨è¶Šæ¥è¶Šå¤§ï¼Œç´¢å¼•è¶Šæ¥è¶Šé‡</li>
<li>æ¸…ç†æ•°æ®å˜æˆâ€œå…¨è¡¨åˆ é™¤â€ï¼Œé£é™©é«˜ã€è€—æ—¶é•¿</li>
<li>ç»´æŠ¤çª—å£ä¸€åˆ°å°±æŠ–ï¼Œä¸šåŠ¡æ–¹æœ€å…ˆæ„Ÿè§‰åˆ°çš„æ˜¯â€œçœ‹æ¿å¡äº†â€</li>
</ul>
<h3 data-id="heading-3">2.2 ç—›ç‚¹äºŒï¼šçœ‹æ¿è¯»æ˜ç»†ï¼Œå¿…ç„¶è¢«å¹¶å‘æ‰“ç©¿</h3>
<p>çœ‹æ¿æœ€å¸¸è§çš„éœ€æ±‚å°±æ˜¯â€œæœ€è¿‘ 1 å°æ—¶ / 24 å°æ—¶ / 7 å¤©â€çš„æ›²çº¿ã€èšåˆã€å¯¹æ¯”ã€‚ä¸€æ—¦ç›´æ¥æ‰«æ˜ç»†ï¼š</p>
<ul>
<li>æ‰«æé‡å·¨å¤§ï¼ŒI/O å¾ˆå¿«é¡¶åˆ°å¤©èŠ±æ¿</li>
<li>æŸ¥è¯¢å¹¶å‘ä¸Šæ¥åï¼Œå†™å…¥ä¹Ÿè¢«æ‹–æ…¢</li>
<li>ç»“æœå°±æ˜¯å¤§å®¶ç†Ÿæ‚‰çš„ï¼šç™½å¤©çœ‹æ¿å¡ã€æ™šä¸Šæ‰¹å¤„ç†æ…¢</li>
</ul>
<h3 data-id="heading-4">2.3 ç—›ç‚¹ä¸‰ï¼šå¤šç»´æ£€ç´¢è·¯å¾„ä¹±ï¼ŒSQL å£å¾„ä¸ä¸€è‡´</h3>
<p>åŒä¸€ä¸ªä¸šåŠ¡é—®é¢˜ï¼Œæ¢ä¸€æ‹¨äººå†™ SQLï¼Œå£å¾„å°±å¯èƒ½å®Œå…¨å˜æ ·ï¼š</p>
<ul>
<li>æ—¶é—´çª—æ€ä¹ˆç®—ï¼Ÿåˆ†é’Ÿæ¡¶æ€ä¹ˆå–ï¼Ÿè¿Ÿåˆ°æ•°æ®æ€ä¹ˆç®—ï¼Ÿ</li>
<li>ç»´åº¦æ€ä¹ˆè¿‡æ»¤ï¼Ÿå…ˆè¿‡æ»¤å†èšåˆè¿˜æ˜¯åè¿‡æ¥ï¼Ÿ</li>
<li>ä¸€æ—¦å£å¾„æ•£äº†ï¼ŒæŒ‡æ ‡å°±ä¼šâ€œçœ‹ä¸Šå»éƒ½å¯¹ã€ä½†å½¼æ­¤å¯¹ä¸ä¸Šâ€</li>
</ul>
<hr/>
<h2 data-id="heading-5">3. é‡‘ä»“çš„è§£æ³•ï¼šæŠŠâ€œæ—¶åºèƒ½åŠ›â€åšæˆå¯äº¤ä»˜çš„å·¥ç¨‹ä½“ç³»</h2>
<p>é‡‘ä»“çš„æ€è·¯ä¸æ˜¯æŠŠæ—¶åºå½“æˆä¸€ä¸ªâ€œå•ç‚¹ç‰¹æ€§â€å»æ‹¼ï¼Œè€Œæ˜¯æŠŠæ—¶åºè´Ÿè½½æ”¾è¿›èåˆæ•°æ®åº“ä½“ç³»é‡Œï¼Œé¢å‘â€œæµ·é‡æ—¶åºæ•°æ®é‡‡é›†æ£€ç´¢ç±»åº”ç”¨â€ç­‰åœºæ™¯æä¾›ç»Ÿä¸€åº•åº§èƒ½åŠ›ï¼ŒåŒæ—¶æ”¯æŒä¸å…³ç³»ã€æ–‡æ¡£ã€GIS ç­‰æ¨¡å‹ç»Ÿä¸€å­˜å‚¨ã€æ··åˆè®¿é—®ã€‚</p>
<p>å¯¹è½åœ°é¡¹ç›®æ¥è¯´ï¼Œæ›´å…³é”®çš„ç‚¹åœ¨äºï¼šå®ƒä¸åªæ˜¯â€œç»™ä½ ä¸€ä¸ªå†…æ ¸è®©ä½ è‡ªå·±æŠ˜è…¾â€ï¼Œè€Œæ˜¯æŠŠè¯„ä¼°ã€è¿ç§»ã€å¼€å‘åˆ°è¿ç»´è¿™æ¡é“¾è·¯çš„å·¥å…·ä½“ç³»ä¹Ÿè€ƒè™‘è¿›æ¥ï¼Œç›®æ ‡å¾ˆæ˜ç¡®â€”â€”è®©ç³»ç»Ÿèƒ½é•¿æœŸè·‘ç¨³ã€‚</p>
<p>ä¸‹é¢ç”¨ä¸€å¼ â€œè½åœ°è§†è§’â€çš„å›¾ï¼ŒæŠŠé‡‘ä»“çš„è§£å†³æ€è·¯è®²æ¸…æ¥šï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[é‡‡é›†ç«¯/ç½‘å…³/æ¶ˆæ¯é˜Ÿåˆ—] --&gt; B[æ‰¹é‡å†™å…¥+å¹‚ç­‰é‡è¯•]
  B --&gt; C[é‡‘ä»“æ—¶åºæ•°æ®åº•åº§&lt;br/&gt;ç»Ÿä¸€å­˜å‚¨/æ··åˆè®¿é—®]
  C --&gt; D[æ˜ç»†å±‚&lt;br/&gt;æŒ‰æ—¶é—´/ä¸šåŠ¡ç»´åº¦åˆ‡åˆ†]
  C --&gt; E[èšåˆå±‚&lt;br/&gt;åˆ†é’Ÿ/å°æ—¶é¢„èšåˆ]
  D --&gt; F[å›æ”¾ä¸æ’éšœæŸ¥è¯¢]
  E --&gt; G[å®æ—¶çœ‹æ¿/æŠ¥è¡¨]
  C --&gt; H[æ²»ç†ä¸è¿ç»´&lt;br/&gt;æƒé™/å®¡è®¡/å¤‡ä»½/æ¼”ç»ƒ]
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼Œè¿™å¥—è§£æ³•éå¸¸å·¥ç¨‹åŒ–ï¼š<strong>åˆ†å±‚ã€åˆ‡åˆ†ã€é¢„èšåˆã€æ²»ç†ã€è¿ç»´é—­ç¯</strong>ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„è½ç‚¹ã€‚</p>
<hr/>
<h2 data-id="heading-6">4. ä¸€å¥—ä½æˆæœ¬å¯è½åœ°çš„å‚è€ƒå»ºæ¨¡ï¼šæ˜ç»† + èšåˆ + äº‹ä»¶</h2>
<p>ä¸ºäº†ä¸æŠŠæ—¶åºå¹³å°ä¸€ä¸Šæ¥å°±åšæˆâ€œè¶Šåšè¶Šé‡â€çš„å¤§å·¥ç¨‹ï¼Œä¸­å°ä¼ä¸šæ›´å»ºè®®å…ˆæŠŠæ¨¡å‹æ”¶æ•›åˆ°ä¸‰å¼ æ ¸å¿ƒè¡¨ï¼š</p>
<ul>
<li>æ˜ç»†è¡¨ï¼šå­˜åŸå§‹ç‚¹ä½ï¼ˆç”¨äºè¿½æº¯ä¸å›æ”¾ï¼‰</li>
<li>èšåˆè¡¨ï¼šå­˜åˆ†é’Ÿ/å°æ—¶æŒ‡æ ‡ï¼ˆç”¨äºçœ‹æ¿ä¸å¤§å¤šæ•°æŠ¥è¡¨ï¼‰</li>
<li>äº‹ä»¶è¡¨ï¼šå­˜å‘Šè­¦/å·¥å†µäº‹ä»¶ï¼ˆç”¨äºå®šä½å…¥å£ä¸å…³è”åˆ†æï¼‰</li>
</ul>
<h3 data-id="heading-7">4.1 æ˜ç»†è¡¨ï¼ˆç¤ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points (
  ts         <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">value</span>      <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  quality    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (ts, device_id, metric)
);
</code></pre>
<p>å»ºè®®æŠŠå¸¸ç”¨æŸ¥è¯¢è·¯å¾„ï¼ˆè®¾å¤‡ã€æŒ‡æ ‡ã€æ—¶é—´çª—ï¼‰å›ºåŒ–ä¸ºç»„åˆç´¢å¼•ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_tp_device_metric_ts <span class="hljs-keyword">ON</span> telemetry_points (device_id, metric, ts);
</code></pre>
<p>åˆ†åŒºé€šå¸¸æŒ‰æ—¶é—´èŒƒå›´åˆ‡åˆ†å³å¯ï¼›å¦‚æœä½ çš„ä¸šåŠ¡ç»´åº¦å¾ˆç¨³å®šã€è¿‡æ»¤åˆå¾ˆé«˜é¢‘ï¼Œè¿˜å¯ä»¥ç»“åˆâ€œæ—¶é—´ + ä¸šåŠ¡ç»´åº¦â€çš„è”åˆåˆ‡åˆ†æ€è·¯ï¼Œç”¨æ¥é™ä½çƒ­ç‚¹ã€ç¼©å°æ‰«æèŒƒå›´ã€‚è¿™ç±»åšæ³•åœ¨é‡‘ä»“å…¬å¼€çš„æ—¶åºåˆ†æå®è·µä¸­ä¹Ÿç»å¸¸å‡ºç°ã€‚</p>
<h3 data-id="heading-8">4.2 èšåˆè¡¨ï¼ˆç¤ºä¾‹ï¼šåˆ†é’Ÿçº§ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_1m (
  bucket_start <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric       <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  avg_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  min_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  max_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  cnt          <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (bucket_start, device_id, metric)
);
</code></pre>
<p>èšåˆåˆ·æ–°å»ºè®®ç»™è‡ªå·±ç•™â€œå›è¡¥çª—å£â€ï¼Œæ¯”å¦‚å›è¡¥æœ€è¿‘ 2 å°æ—¶ï¼Œä¸“é—¨å¤„ç†è¿Ÿåˆ°/è¡¥ä¼ æ•°æ®ã€‚</p>
<h3 data-id="heading-9">4.3 äº‹ä»¶è¡¨ï¼ˆç¤ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_events (
  event_ts    <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id   <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  event_type  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  severity    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  message     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">256</span>),
  <span class="hljs-keyword">PRIMARY</span> KEY (event_ts, device_id, event_type)
);
</code></pre>
<p>è¿™æ ·å»ºæ¨¡çš„å¥½å¤„å¾ˆç›´æ¥ï¼šçœ‹æ¿è¯»èšåˆï¼Œæ’éšœèµ°äº‹ä»¶å®šä½åå†å›æ”¾æ˜ç»†ï¼Œç³»ç»Ÿå¾ˆéš¾è¢«â€œæ— è„‘æ‰«æ˜ç»†â€æ‹–å®ã€‚</p>
<hr/>
<h2 data-id="heading-10">5. æŠŠâ€œæŸ¥è¯¢å£å¾„â€å˜æˆâ€œå¯å¤ç”¨æ¨¡æ¿â€ï¼šä¸‰æ®µ SQL å°±å¤Ÿç”¨</h2>
<p>å¾ˆå¤šå›¢é˜Ÿçš„é—®é¢˜ä¸åœ¨â€œä¸ä¼šå†™ SQLâ€ï¼Œè€Œåœ¨â€œæ¯ä¸ªäººéƒ½å†™ä¸€å¥—â€ã€‚é‡‘ä»“å…¬å¼€çš„æ—¶åºå®è·µå¼ºè°ƒæŠŠâ€œåŒºé—´ç­›é€‰ + æ—¶é—´çª—å£èšåˆâ€çš„å†™æ³•å°½é‡å‡½æ•°åŒ–ã€æ¨¡æ¿åŒ–ï¼Œæ ¸å¿ƒç›®çš„å°±æ˜¯å‡å°‘å£å¾„åˆ†è£‚ï¼Œè®©å‹æµ‹ã€çœ‹æ¿å¤ç”¨æ›´é¡ºæ‰‹ã€‚</p>
<p>ä¸‹é¢è¿™ä¸‰æ®µé€šç”¨ SQL æ¨¡æ¿ï¼ŒåŸºæœ¬èƒ½è¦†ç›– 80% çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<h3 data-id="heading-11">5.1 åŒºé—´å›æ”¾ï¼šè®¾å¤‡æ›²çº¿ï¼ˆæ˜ç»†å±‚ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> ts, <span class="hljs-keyword">value</span>
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-02 00:00:00'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ts;
</code></pre>
<h3 data-id="heading-12">5.2 æ—¶é—´çª—èšåˆï¼š5 åˆ†é’Ÿæ¡¶ï¼ˆèšåˆé€»è¾‘ç¤ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>
  (DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-operator">-</span> (<span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">minute</span> <span class="hljs-keyword">FROM</span> ts)::<span class="hljs-type">int</span> <span class="hljs-operator">%</span> <span class="hljs-number">5</span>) <span class="hljs-operator">*</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-string">'1 minute'</span>) <span class="hljs-keyword">AS</span> bucket_start,
  <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value,
  <span class="hljs-built_in">MIN</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> min_value,
  <span class="hljs-built_in">MAX</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> max_value
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> bucket_start
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> bucket_start;
</code></pre>
<h3 data-id="heading-13">5.3 è¿ç»­å‘Šè­¦ï¼šé˜ˆå€¼ + æŒç»­ N åˆ†é’Ÿï¼ˆé¿å…æŠ–åŠ¨è¯¯æŠ¥ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> m1 <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-keyword">AS</span> minute_ts, <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value
  <span class="hljs-keyword">FROM</span> telemetry_points
  <span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
    <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts)
),
flag <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> minute_ts, avg_value, <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> avg_value <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> over_th
  <span class="hljs-keyword">FROM</span> m1
),
grp <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>,
         <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span>) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> minute_ts) <span class="hljs-keyword">AS</span> grp_id
  <span class="hljs-keyword">FROM</span> flag
)
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MIN</span>(minute_ts) <span class="hljs-keyword">AS</span> start_ts, <span class="hljs-built_in">MAX</span>(minute_ts) <span class="hljs-keyword">AS</span> end_ts, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> minutes
<span class="hljs-keyword">FROM</span> grp
<span class="hljs-keyword">WHERE</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> grp_id
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">5</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> start_ts;
</code></pre>
<hr/>
<h2 data-id="heading-14">6. ä½æˆæœ¬è½åœ°æŒ‡å—ï¼šä¸­å°ä¼ä¸šæ€ä¹ˆé€‰å‹ã€æ€ä¹ˆä¸Šï¼Œæ‰ä¸â€œè¶Šåšè¶Šé‡â€</h2>
<p>ä¸­å°ä¼ä¸šåšæ—¶åºå¹³å°ï¼Œæœ€æ€•ä¸¤ä»¶äº‹ï¼šä¸€å¼€å§‹å°±â€œä¸Šå¤§è€Œå…¨â€ï¼Œä»¥åŠä¸Šçº¿åâ€œæ²¡æœ‰è¿ç»´é—­ç¯â€ã€‚æ›´ç¨³çš„è·¯çº¿æ˜¯å…ˆæŠŠè½»é‡é—­ç¯è·‘é€šï¼Œå†è·Ÿç€ä¸šåŠ¡å¢é•¿å»æ‰©å±•ã€‚</p>
<h3 data-id="heading-15">6.1 ä¸‰ç§èµ·æ­¥æ–¹æ¡ˆï¼ˆä»è½»åˆ°é‡ï¼‰</h3>

























<table><thead><tr><th>èµ·æ­¥æ–¹æ¡ˆ</th><th>é€‚ç”¨æƒ…å†µ</th><th>ä½ è¦åšçš„å…³é”®äº‹</th></tr></thead><tbody><tr><td>å•æœºèµ·æ­¥</td><td>ä¸šåŠ¡åˆšèµ·é‡ã€å›¢é˜Ÿå°</td><td>åˆ†åŒº + èšåˆå±‚ + å¤‡ä»½æ¢å¤æ¼”ç»ƒ</td></tr><tr><td>é«˜å¯ç”¨èµ·æ­¥</td><td>çœ‹æ¿ä¸å¯ä¸­æ–­ã€åœæœºæ•æ„Ÿ</td><td>ä¸»å¤‡/åˆ‡æ¢æ¼”ç»ƒ + ç›‘æ§å‘Šè­¦ + è¿ç»´æµç¨‹</td></tr><tr><td>åˆ†å±‚æ‰©å±•</td><td>å†™å…¥ä¸æŸ¥è¯¢å†²çªæ˜æ˜¾</td><td>èšåˆå±‚æ‰¿æ¥çœ‹æ¿ã€æ˜ç»†å±‚æ‰¿æ¥å›æ”¾</td></tr></tbody></table>
<h3 data-id="heading-16">6.2 æˆæœ¬æ§åˆ¶çš„ä¸‰ä¸ªæŠ“æ‰‹ï¼ˆå¾ˆâ€œåœŸâ€ï¼Œä½†å¾ˆç®¡ç”¨ï¼‰</h3>
<ol>
<li>
<p><strong>æŠŠâ€œèšåˆå±‚â€å½“ä¸»åŠ›ï¼Œä¸è¦è®©çœ‹æ¿æ‰«æ˜ç»†</strong><br/>
çœ‹æ¿é»˜è®¤è¯»åˆ†é’Ÿ/å°æ—¶èšåˆï¼Œæ˜ç»†åªåœ¨æ’éšœæ—¶å›æ”¾ã€‚åˆ«å°çœ‹è¿™ä¸€æ¡ï¼Œå¾ˆå¤šé¡¹ç›®çš„æ€§èƒ½å°±æ˜¯é å®ƒç¨³ä½çš„ã€‚</p>
</li>
<li>
<p><strong>ç”¨åˆ†åŒºç”Ÿå‘½å‘¨æœŸæŠŠâ€œæ¸…ç†â€å˜æˆå¸¸è§„æ“ä½œ</strong><br/>
æŒ‰åˆ†åŒºå½’æ¡£/æ¸…ç†ï¼Œåˆ«ç­‰è¡¨å¤§åˆ°ç»´æŠ¤ä¸åŠ¨äº†æ‰æƒ³è¡¥æ•‘ã€‚</p>
</li>
<li>
<p><strong>åšå®¹é‡æ¨¡å‹ä¸å‹æµ‹åŸºçº¿ï¼Œé¿å…â€œæ‹è„‘è¢‹æ‰©å®¹â€</strong><br/>
å†™å…¥å³°å€¼ã€æŸ¥è¯¢ P95ã€ç£ç›˜å¢é•¿ã€åˆ†åŒºæ•°é‡ï¼Œè¿™äº›æŒ‡æ ‡æœ€å¥½ä»ä¸€å¼€å§‹å°±èƒ½çœ‹åˆ°ã€èƒ½å¤æµ‹ã€‚</p>
</li>
</ol>
<p>å¦‚æœä½ æ­£åœ¨æ¨è¿›å›½äº§åŒ–æ›¿ä»£ï¼Œå»ºè®®æŠŠè¯„ä¼°ã€è¿ç§»ã€å¼€å‘ç®¡ç†ã€é›†ä¸­è¿ç»´è¿™äº›åŠ¨ä½œéƒ½æ²‰æ·€æˆå¯å›å½’çš„äº¤ä»˜ä»¶ï¼Œåˆ«è®©é¡¹ç›®å˜æˆâ€œé äººè®°ã€é ç»éªŒâ€ã€‚è¿™ä¹Ÿå¥‘åˆé‡‘ä»“å®˜ç½‘å…¬å¼€ä¿¡æ¯é‡Œå¼ºè°ƒçš„å·¥å…·ä½“ç³»æ–¹å‘ã€‚<sup><a href="#user-content-fn-kb-kes" id="user-content-user-content-fnref-kb-kes" data-footnote-ref="" aria-describedby="footnote-label" title="#user-content-fn-kb-kes">1</a></sup></p>
<hr/>
<h2 data-id="heading-17">7. å…³é”®è¡Œä¸šè½åœ°æ—¶ï¼Œæœ€å®¹æ˜“å¿½ç•¥çš„â€œæœ€åä¸€å…¬é‡Œâ€</h2>
<p>ä¸å°‘é¡¹ç›®ä¸æ˜¯è¾“åœ¨æŠ€æœ¯é€‰å‹ï¼Œè€Œæ˜¯è¾“åœ¨æœ€åä¸€å…¬é‡Œï¼š</p>
<ul>
<li><strong>æ—¶é—´å£å¾„ä¸ç»Ÿä¸€</strong>ï¼šæ—¶åŒºã€é‡‡æ ·å‘¨æœŸã€å¯¹é½æ–¹å¼è¦ç»Ÿä¸€</li>
<li><strong>è´¨é‡ä½ç¼ºå¤±</strong>ï¼šè¡¥ä¼ ã€ä¼°ç®—ã€æ— æ•ˆå€¼è¦èƒ½æ ‡è®°ï¼Œä¸ç„¶å‘Šè­¦å£å¾„ä¼šä¹±</li>
<li><strong>æ¼”ç»ƒç¼ºä½</strong>ï¼šå¤‡ä»½æ¢å¤ã€åˆ‡æ¢ã€æ¸…ç†çª—å£ä¸æ¼”ç»ƒï¼Œä¸Šçº¿åä¼šè¢«åŠ¨</li>
</ul>
<p>æŠŠè¿™äº›è¡¥é½ï¼Œæ—¶åºå¹³å°æ‰èƒ½çœŸæ­£â€œé•¿æœŸç¨³ç”¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-18">8. ç»“è¯­ï¼šè§£å†³â€œå›°å±€â€çš„å…³é”®ï¼Œæ˜¯æŠŠæ–¹æ¡ˆåšæˆå¯éªŒæ”¶çš„äº¤ä»˜ä»¶</h2>
<p>æ—¶åºæ•°æ®æ—¶ä»£çš„å­˜å‚¨ä¸åˆ†æå›°å±€ï¼Œè¯´ç©¿äº†å°±æ˜¯ï¼šå†™å…¥ã€æŸ¥è¯¢ã€ç•™å­˜ã€æ²»ç†å››ç§å‹åŠ›åŒæ—¶å‹ä¸Šæ¥ã€‚é‡‘ä»“çš„ä»·å€¼åœ¨äºæŠŠæ—¶åºèƒ½åŠ›çº³å…¥èåˆæ•°æ®åº“ä½“ç³»ï¼Œå¹¶ç”¨å·¥ç¨‹äº¤ä»˜çš„æ–¹å¼ï¼ŒæŠŠåˆ†å±‚ã€åˆ‡åˆ†ã€é¢„èšåˆã€æ²»ç†ä¸è¿ç»´é—­ç¯ç»„åˆæˆä¸€å¥—å¯è½åœ°ã€å¯éªŒæ”¶çš„æ–¹æ¡ˆã€‚</p>
<p>å¦‚æœä½ å¸Œæœ›ç”¨æ›´ä½æˆæœ¬æŠŠæ—¶åºæ•°æ®ç®¡ç†å…ˆè·‘èµ·æ¥ï¼Œå»ºè®®å…ˆä»â€œæ˜ç»† + èšåˆ + äº‹ä»¶â€ä¸‰è¡¨æ¨¡å‹å…¥æ‰‹ï¼ŒæŠŠçœ‹æ¿ä»æ˜ç»†æŸ¥è¯¢é‡Œè§£è€¦å‡ºæ¥ï¼›ç­‰ç³»ç»Ÿç¨³äº†ï¼Œå†ä¸€æ­¥æ­¥æŠŠç”Ÿå‘½å‘¨æœŸå’Œè¿ç»´é—­ç¯åšæ‰å®ã€‚æƒ³äº†è§£æ›´å¤šäº§å“ä¸æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥å»é‡‘ä»“æ•°æ®åº“å®˜ç½‘çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2F" target="_blank" title="https://www.kingbase.com.cn/" ref="nofollow noopener noreferrer">www.kingbase.com.cn/</a></p>
<hr/>
<h3 data-id="heading-19">å‚è€ƒèµ„æ–™</h3>
<ul>
<li>é‡‘ä»“æ—¶åºæ•°æ®åº“ï¼ˆå®˜æ–¹èµ„æ–™ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kdocs.cn%2Fl%2FctYp7fWoLYCV" target="_blank" title="https://www.kdocs.cn/l/ctYp7fWoLYCV" ref="nofollow noopener noreferrer">www.kdocs.cn/l/ctYp7fWoLâ€¦</a></li>
<li>é‡‘ä»“æ•°æ®åº“å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2F" target="_blank" title="https://www.kingbase.com.cn/" ref="nofollow noopener noreferrer">www.kingbase.com.cn/</a></li>
</ul>
<h2 class="sr-only" id="user-content-footnote-label" data-id="heading-20">Footnotes</h2>
<ol>
<li id="user-content-user-content-fn-kb-kes">
<p>KingbaseESï¼ˆKESï¼‰äº§å“ä»‹ç»ï¼ˆå«â€œæµ·é‡æ—¶åºæ•°æ®é‡‡é›†æ£€ç´¢ç±»åº”ç”¨â€â€œå¤šæ¨¡æ•°æ®ä¸€ä½“åŒ–å­˜å‚¨â€ç­‰è¡¨è¿°ï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2Fproduct%2Fdetails_549_476.html" target="_blank" title="https://www.kingbase.com.cn/product/details_549_476.html" ref="nofollow noopener noreferrer">www.kingbase.com.cn/product/detâ€¦</a> <a href="#user-content-fnref-kb-kes" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content" title="#user-content-fnref-kb-kes">â†©</a></p>
</li>
</ol>
</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Vue ç”Ÿå‘½å‘¨æœŸï¼šcreated ä¸ mounted çš„æ ¸å¿ƒå·®å¼‚ä¸å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594681318828408882</link>    <guid>https://juejin.cn/post/7594681318828408882</guid>    <pubDate>2026-01-13T14:12:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594681318828408882" data-draft-id="7594681318828376114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Vue ç”Ÿå‘½å‘¨æœŸï¼šcreated ä¸ mounted çš„æ ¸å¿ƒå·®å¼‚ä¸å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:12:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Vue ç”Ÿå‘½å‘¨æœŸï¼šcreated ä¸ mounted çš„æ ¸å¿ƒå·®å¼‚ä¸å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:12:15.000Z" title="Tue Jan 13 2026 14:12:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£ Vue ç”Ÿå‘½å‘¨æœŸï¼šcreated ä¸ mounted çš„æ ¸å¿ƒå·®å¼‚ä¸å®æˆ˜æŒ‡å—</h2>
<blockquote>
<p>æŒæ¡ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ˜¯ Vue å¼€å‘ä»å…¥é—¨åˆ°ç²¾é€šçš„å…³é”®ä¸€æ­¥ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ·±åº¦å‰–æä¸¤ä¸ªæœ€å®¹æ˜“æ··æ·†çš„é’©å­ï¼š<code>created</code> å’Œ <code>mounted</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ç”Ÿå‘½å‘¨æœŸå…¨æ™¯å›¾ï¼šå…ˆçœ‹æ£®æ—ï¼Œå†è§æ ‘æœ¨</h3>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ Vue å®ä¾‹çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[new Vue()] --&gt; B[Init Events &amp; Lifecycle]
    B --&gt; C[beforeCreate]
    C --&gt; D[Init Injections &amp; Reactivity]
    D --&gt; E[created]
    E --&gt; F[Compile Template]
    F --&gt; G[beforeMount]
    G --&gt; H[Create vm.$el]
    H --&gt; I[mounted]
    I --&gt; J[Data Changes]
    J --&gt; K[beforeUpdate]
    K --&gt; L[Virtual DOM Re-render]
    L --&gt; M[updated]
    M --&gt; N[beforeDestroy]
    N --&gt; O[Teardown]
    O --&gt; P[destroyed]
</code></pre>
<p>ç†è§£è¿™å¼ å›¾ï¼Œä½ å°±æŒæ¡äº† Vue ç»„ä»¶ä»å‡ºç”Ÿåˆ°æ¶ˆäº¡çš„å®Œæ•´è½¨è¿¹ã€‚è€Œä»Šå¤©çš„ä¸»è§’â€”â€”<strong>created</strong> å’Œ <strong>mounted</strong>ï¼Œæ­£æ˜¯è¿™ä¸ªæ—…ç¨‹ä¸­ä¸¤ä¸ªå…³é”®çš„é‡Œç¨‹ç¢‘ã€‚</p>
<h3 data-id="heading-2">äºŒã€æ ¸å¿ƒå¯¹æ¯”ï¼šcreated vs mounted</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè¡¨æ ¼ç›´è§‚å¯¹æ¯”ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>created</th><th>mounted</th></tr></thead><tbody><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>æ•°æ®è§‚æµ‹/æ–¹æ³•/è®¡ç®—å±æ€§åˆå§‹åŒ–åï¼Œæ¨¡æ¿ç¼–è¯‘å‰</td><td>æ¨¡æ¿ç¼–è¯‘å®Œæˆï¼ŒDOM æŒ‚è½½åˆ°é¡µé¢å</td></tr><tr><td><strong>DOM å¯è®¿é—®æ€§</strong></td><td>âŒ æ— æ³•è®¿é—® DOM</td><td>âœ… å¯ä»¥è®¿é—® DOM</td></tr><tr><td><strong>$el çŠ¶æ€</strong></td><td><code>undefined</code></td><td>å·²æŒ‚è½½çš„ DOM å…ƒç´ </td></tr><tr><td><strong>ä¸»è¦ç”¨é€”</strong></td><td>æ•°æ®åˆå§‹åŒ–ã€API è°ƒç”¨ã€äº‹ä»¶ç›‘å¬</td><td>DOM æ“ä½œã€ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–</td></tr><tr><td><strong>SSR æ”¯æŒ</strong></td><td>âœ… åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½ä¼šæ‰§è¡Œ</td><td>âŒ ä»…åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ</td></tr></tbody></table>
<h3 data-id="heading-3">ä¸‰ã€å®æˆ˜ä»£ç è§£æï¼šä»ç†è®ºåˆ°å®è·µ</h3>
<h4 data-id="heading-4">åœºæ™¯ 1ï¼šAPI æ•°æ®è·å–çš„æ­£ç¡®å§¿åŠ¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">userData</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>
    }
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âœ… æœ€ä½³å®è·µï¼šåœ¨ created ä¸­å‘èµ·æ•°æ®è¯·æ±‚</span>
    <span class="hljs-comment">// æ­¤æ—¶æ•°æ®è§‚æµ‹å·²å°±ç»ªï¼Œå¯ä»¥è®¾ç½®å“åº”å¼æ•°æ®</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userData</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>()
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ•°æ®è·å–å¤±è´¥:'</span>, error)
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
    }
    
    <span class="hljs-comment">// âŒ è¿™é‡Œè®¿é—® DOM ä¼šå¤±è´¥</span>
    <span class="hljs-comment">// console.log(this.$el) // undefined</span>
  },
  
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âœ… DOM å·²å°±ç»ªï¼Œå¯ä»¥æ‰§è¡Œä¾èµ– DOM çš„æ“ä½œ</span>
    <span class="hljs-keyword">const</span> userCard = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'user-card'</span>)
    <span class="hljs-keyword">if</span> (userCard) {
      <span class="hljs-comment">// ä½¿ç”¨ç¬¬ä¸‰æ–¹å›¾è¡¨åº“æ¸²æŸ“æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderChart</span>(userCard, <span class="hljs-variable language_">this</span>.<span class="hljs-property">userData</span>)
    }
    
    <span class="hljs-comment">// âœ… åˆå§‹åŒ–éœ€è¦ DOM çš„ç¬¬ä¸‰æ–¹æ’ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initCarousel</span>(<span class="hljs-string">'.carousel-container'</span>)
  }
}
</code></pre>
<p><strong>å…³é”®æ´å¯Ÿ</strong>ï¼šæ•°æ®è·å–åº”å°½æ—©å¼€å§‹ï¼ˆcreatedï¼‰ï¼ŒDOM ç›¸å…³æ“ä½œå¿…é¡»ç­‰å¾… mountedã€‚</p>
<h4 data-id="heading-5">åœºæ™¯ 2ï¼šè®¡ç®—å±æ€§ä¸ DOM çš„å¾®å¦™å…³ç³»</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div ref="container"&gt;
    &lt;p&gt;å®¹å™¨å®½åº¦: {{ containerWidth }}px&lt;/p&gt;
    &lt;div class="content"&gt;
      &lt;!-- åŠ¨æ€å†…å®¹ --&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      items: []
    }
  },
  
  computed: {
    // âŒ é”™è¯¯ç¤ºä¾‹ï¼šåœ¨ created é˜¶æ®µè®¿é—® $refs
    containerWidth() {
      // created é˜¶æ®µï¼šthis.$refs.container æ˜¯ undefined
      // mounted é˜¶æ®µï¼šå¯ä»¥æ­£å¸¸è®¿é—®
      return this.$refs.container?.offsetWidth || 0
    }
  },
  
  created() {
    // âœ… å®‰å…¨æ“ä½œï¼šåˆå§‹åŒ–æ•°æ®
    this.items = this.generateItems()
    
    // âš ï¸ æ³¨æ„ï¼šcomputed å±æ€§åœ¨æ­¤é˜¶æ®µå¯èƒ½åŸºäºé”™è¯¯çš„å‰æè®¡ç®—
    console.log('created é˜¶æ®µå®½åº¦:', this.containerWidth) // 0
  },
  
  mounted() {
    console.log('mounted é˜¶æ®µå®½åº¦:', this.containerWidth) // å®é™…å®½åº¦
    
    // âœ… æ­£ç¡®çš„ DOM ç›¸å…³åˆå§‹åŒ–
    this.observeResize()
  },
  
  methods: {
    observeResize() {
      // ä½¿ç”¨ ResizeObserver ç›‘å¬å®¹å™¨å¤§å°å˜åŒ–
      const observer = new ResizeObserver(entries =&gt; {
        this.handleResize(entries[0].contentRect.width)
      })
      observer.observe(this.$refs.container)
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-6">å››ã€æ€§èƒ½ä¼˜åŒ–ï¼šç†è§£æ¸²æŸ“æµç¨‹é¿å…å¸¸è§é™·é˜±</h3>
<h4 data-id="heading-7">1. é¿å…åœ¨ created ä¸­æ‰§è¡Œé˜»å¡æ“ä½œ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âš ï¸ æ½œåœ¨çš„æ¸²æŸ“é˜»å¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processLargeData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rawData</span>) <span class="hljs-comment">// å¦‚æœå¤„ç†æ—¶é—´è¿‡é•¿ï¼Œä¼šå»¶è¿Ÿé¦–æ¬¡æ¸²æŸ“</span>
    
    <span class="hljs-comment">// âœ… ä¼˜åŒ–æ–¹æ¡ˆï¼šä½¿ç”¨ Web Worker æˆ–åˆ†å—å¤„ç†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">asyncProcessData</span>()
  },
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">asyncProcessData</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨ requestIdleCallback é¿å…é˜»å¡ä¸»çº¿ç¨‹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-string">'requestIdleCallback'</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">window</span>) {
      <span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processInBackground</span>()
      })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å›é€€æ–¹æ¡ˆï¼šsetTimeout è®©å‡ºä¸»çº¿ç¨‹</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processInBackground</span>(), <span class="hljs-number">0</span>)
    }
  }
}
</code></pre>
<h4 data-id="heading-8">2. ç†è§£å¼‚æ­¥æ›´æ–°é˜Ÿåˆ—</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æƒ…æ™¯ 1ï¼šç›´æ¥ä¿®æ”¹æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">someData</span> = <span class="hljs-string">'new value'</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>.<span class="hljs-property">textContent</span>) <span class="hljs-comment">// âŒ å¯èƒ½è¿˜æ˜¯æ—§å€¼</span>
    
    <span class="hljs-comment">// æƒ…æ™¯ 2ï¼šä½¿ç”¨ $nextTick</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">someData</span> = <span class="hljs-string">'new value'</span>
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>.<span class="hljs-property">textContent</span>) <span class="hljs-comment">// âœ… æ›´æ–°åçš„å€¼</span>
    })
    
    <span class="hljs-comment">// æƒ…æ™¯ 3ï¼šå¤šä¸ªæ•°æ®å˜æ›´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data1</span> = <span class="hljs-string">'new1'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data2</span> = <span class="hljs-string">'new2'</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">data3</span> = <span class="hljs-string">'new3'</span>
    
    <span class="hljs-comment">// Vue ä¼šæ‰¹é‡å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡æ›´æ–°</span>
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ‰€æœ‰å˜æ›´éƒ½å·²åæ˜ åˆ° DOM</span>
    })
  }
}
</code></pre>
<h3 data-id="heading-9">äº”ã€é«˜çº§åº”ç”¨ï¼šSSR åœºæ™¯ä¸‹çš„ç‰¹æ®Šè€ƒé‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// created åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½ä¼šæ‰§è¡Œ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼Œæ— æ³•è®¿é—® windowã€document ç­‰æµè§ˆå™¨ API</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">client</span>) {
      <span class="hljs-comment">// å®¢æˆ·ç«¯ç‰¹å®šé€»è¾‘</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">screenWidth</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>
    }
    
    <span class="hljs-comment">// æ•°æ®é¢„å–ï¼ˆUniversalï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchUniversalData</span>()
  },
  
  <span class="hljs-comment">// mounted åªåœ¨å®¢æˆ·ç«¯æ‰§è¡Œ</span>
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®‰å…¨çš„æµè§ˆå™¨ API ä½¿ç”¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeBrowserOnlyLibrary</span>()
    
    <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯ hydration</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleHydrationEffects</span>()
  },
  
  <span class="hljs-comment">// å…¼å®¹ SSR çš„æ•°æ®è·å–æ¨¡å¼</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchUniversalData</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¿å…é‡å¤è·å–æ•°æ®</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$ssrContext</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">$ssrContext</span>.<span class="hljs-property">data</span>) {
      <span class="hljs-comment">// æœåŠ¡ç«¯å·²è·å–æ•°æ®</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$ssrContext</span>.<span class="hljs-property">data</span>)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å®¢æˆ·ç«¯è·å–æ•°æ®</span>
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$axios</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>)
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>, data)
    }
  }
}
</code></pre>
<h3 data-id="heading-10">å…­ã€å®æˆ˜æŠ€å·§ï¼šå¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">Q1ï¼šåº”è¯¥åœ¨å“ªä¸ªé’©å­åˆå§‹åŒ–ç¬¬ä¸‰æ–¹åº“ï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âœ… å¤§å¤šæ•° UI åº“éœ€è¦ DOM å­˜åœ¨</span>
    <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// ç¡®ä¿ DOM å®Œå…¨æ¸²æŸ“</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initSelect2</span>(<span class="hljs-string">'#my-select'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initDatepicker</span>(<span class="hljs-string">'.date-input'</span>)
    })
  },
  
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è®°å¾—æ¸…ç†ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroySelect2</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">destroyDatepicker</span>()
  }
}
</code></pre>
<h4 data-id="heading-12">Q2ï¼šå¦‚ä½•å¤„ç†åŠ¨æ€ç»„ä»¶ï¼Ÿ</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;component :is="currentComponent" ref="dynamicComponent" /&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      currentComponent: 'ComponentA'
    }
  },
  
  watch: {
    currentComponent(newVal, oldVal) {
      // ç»„ä»¶åˆ‡æ¢æ—¶ï¼Œæ–°çš„ mounted ä¼šåœ¨ä¸‹æ¬¡æ›´æ–°åæ‰§è¡Œ
      this.$nextTick(() =&gt; {
        console.log('æ–°ç»„ä»¶å·²æŒ‚è½½:', this.$refs.dynamicComponent)
      })
    }
  },
  
  mounted() {
    // åˆæ¬¡æŒ‚è½½
    this.initializeCurrentComponent()
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13">ä¸ƒã€æœ€ä½³å®è·µæ€»ç»“</h3>
<ol>
<li><strong>æ•°æ®åˆå§‹åŒ–</strong> â†’ ä¼˜å…ˆé€‰æ‹© <code>created</code></li>
<li><strong>DOM æ“ä½œ</strong> â†’ å¿…é¡»ä½¿ç”¨ <code>mounted</code>ï¼ˆé…åˆ <code>$nextTick</code> ç¡®ä¿æ¸²æŸ“å®Œæˆï¼‰</li>
<li><strong>ç¬¬ä¸‰æ–¹åº“åˆå§‹åŒ–</strong> â†’ <code>mounted</code> + <code>beforeDestroy</code> æ¸…ç†</li>
<li><strong>æ€§èƒ½æ•æ„Ÿæ“ä½œ</strong> â†’ è€ƒè™‘ä½¿ç”¨ <code>requestIdleCallback</code> æˆ– Web Worker</li>
<li><strong>SSR åº”ç”¨</strong> â†’ æ³¨æ„æµè§ˆå™¨ API çš„å…¼å®¹æ€§æ£€æŸ¥</li>
</ol>
<h3 data-id="heading-14">å†™åœ¨æœ€å</h3>
<p>ç†è§£ <code>created</code> å’Œ <code>mounted</code> çš„åŒºåˆ«ï¼Œæœ¬è´¨ä¸Šæ˜¯ç†è§£ Vue çš„æ¸²æŸ“æµç¨‹ã€‚è®°ä½è¿™ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š</p>
<blockquote>
<p><strong>created æ˜¯å…³äºæ•°æ®çš„å‡†å¤‡ï¼Œmounted æ˜¯å…³äºè§†å›¾çš„å‡†å¤‡ã€‚</strong></p>
</blockquote>
<p>éšç€ Vue 3 Composition API çš„æ™®åŠï¼Œç”Ÿå‘½å‘¨æœŸæœ‰äº†æ–°çš„ä½¿ç”¨æ–¹å¼ï¼Œä½†åº•å±‚åŸç†ä¾ç„¶ç›¸é€šã€‚æŒæ¡è¿™äº›åŸºç¡€çŸ¥è¯†ï¼Œèƒ½å¸®åŠ©ä½ åœ¨å„ç§åœºæ™¯ä¸‹åšå‡ºæ›´åˆé€‚çš„æ¶æ„å†³ç­–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue ç»„ä»¶æ¨¡æ¿çš„ 7 ç§å®šä¹‰æ–¹å¼ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594662879202361370</link>    <guid>https://juejin.cn/post/7594662879202361370</guid>    <pubDate>2026-01-13T14:15:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662879202361370" data-draft-id="7594669638559875098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue ç»„ä»¶æ¨¡æ¿çš„ 7 ç§å®šä¹‰æ–¹å¼ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:15:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue ç»„ä»¶æ¨¡æ¿çš„ 7 ç§å®šä¹‰æ–¹å¼ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:15:34.000Z" title="Tue Jan 13 2026 14:15:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue ç»„ä»¶æ¨¡æ¿çš„ 7 ç§å®šä¹‰æ–¹å¼ï¼šä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´æŒ‡å—</h2>
<blockquote>
<p>æ¨¡æ¿æ˜¯ Vue ç»„ä»¶çš„æ ¸å¿ƒè§†å›¾å±‚ï¼Œä½†ä½ å¯èƒ½ä¸çŸ¥é“å®ƒç«Ÿæœ‰å¦‚æ­¤å¤šçµæ´»çš„å®šä¹‰æ–¹å¼ã€‚æŒæ¡è¿™äº›æŠ€å·§ï¼Œè®©ä½ çš„ç»„ä»¶å¼€å‘æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€æ¨¡æ¿å®šä¹‰å…¨æ™¯å›¾</h3>
<p>åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œå…ˆäº†è§£ Vue ç»„ä»¶æ¨¡æ¿çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[Vue ç»„ä»¶æ¨¡æ¿] --&gt; B[å•æ–‡ä»¶ç»„ä»¶ SFC]
    A --&gt; C[å†…è”æ¨¡æ¿]
    A --&gt; D[å­—ç¬¦ä¸²æ¨¡æ¿]
    A --&gt; E[æ¸²æŸ“å‡½æ•°]
    A --&gt; F[JSX]
    A --&gt; G[åŠ¨æ€ç»„ä»¶]
    A --&gt; H[å‡½æ•°å¼ç»„ä»¶]
    
    B --&gt; B1[&amp;lttemplate&amp;gtæ ‡ç­¾]
    B --&gt; B2[ä½œç”¨åŸŸ slot]
    
    D --&gt; D1[template é€‰é¡¹]
    D --&gt; D2[å†…è”æ¨¡æ¿å­—ç¬¦ä¸²]
    
    E --&gt; E1[createElement]
    E --&gt; E2[h å‡½æ•°]
    
    G --&gt; G1[component:is]
    G --&gt; G2[å¼‚æ­¥ç»„ä»¶]
</code></pre>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†æ¢è®¨æ¯ç§æ–¹å¼çš„ç‰¹ç‚¹å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">äºŒã€7 ç§æ¨¡æ¿å®šä¹‰æ–¹å¼è¯¦è§£</h3>
<h4 data-id="heading-3">1. <strong>å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰æ¨¡æ¿</strong> - ç°ä»£ Vue å¼€å‘çš„æ ‡å‡†</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- UserProfile.vue --&gt;
&lt;template&gt;
  &lt;!-- æœ€å¸¸ç”¨ã€æœ€æ¨èçš„æ–¹å¼ --&gt;
  &lt;div class="user-profile"&gt;
    &lt;h2&gt;{{ user.name }}&lt;/h2&gt;
    &lt;img :src="user.avatar" alt="Avatar" /&gt;
    &lt;slot name="actions"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  props: ['user']
}
&lt;/script&gt;

&lt;style scoped&gt;
.user-profile {
  padding: 20px;
}
&lt;/style&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… è¯­æ³•é«˜äº®å’Œæç¤º</li>
<li>âœ… CSS ä½œç”¨åŸŸæ”¯æŒ</li>
<li>âœ… è‰¯å¥½çš„å¯ç»´æŠ¤æ€§</li>
<li>âœ… æ„å»ºå·¥å…·ä¼˜åŒ–ï¼ˆå¦‚ Vue Loaderï¼‰</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- å§‹ç»ˆä½¿ç”¨å•ä¸ªæ ¹å…ƒç´ ï¼ˆVue 2ï¼‰ --&gt;
  &lt;div class="container"&gt;
    &lt;!-- ä½¿ç”¨ PascalCase çš„ç»„ä»¶å --&gt;
    &lt;UserProfile :user="currentUser" /&gt;
    
    &lt;!-- å¤æ‚é€»è¾‘ä½¿ç”¨è®¡ç®—å±æ€§ --&gt;
    &lt;p v-if="shouldShowMessage"&gt;{{ formattedMessage }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-4">2. <strong>å­—ç¬¦ä¸²æ¨¡æ¿</strong> - ç®€å•åœºæ™¯çš„è½»é‡é€‰æ‹©</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹å¼1ï¼štemplate é€‰é¡¹</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#app'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div class="app"&gt;
      &lt;h1&gt;{{ title }}&lt;/h1&gt;
      &lt;button @click="handleClick"&gt;ç‚¹å‡»&lt;/button&gt;
    &lt;/div&gt;
  `</span>,
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'å­—ç¬¦ä¸²æ¨¡æ¿ç¤ºä¾‹'</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleClick</span>(<span class="hljs-params"/>) {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æŒ‰é’®è¢«ç‚¹å‡»'</span>)
    }
  }
})

<span class="hljs-comment">// æ–¹å¼2ï¼šå†…è”æ¨¡æ¿å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">InlineComponent</span> = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;div&gt;{{ message }}&lt;/div&gt;'</span>,
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello'</span> }
  }
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç®€å•çš„ UI ç»„ä»¶</li>
<li>å¿«é€ŸåŸå‹å¼€å‘</li>
<li>å°å‹é¡¹ç›®æˆ–æ¼”ç¤ºä»£ç </li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âš ï¸ æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„æ¢è¡Œå’Œç¼©è¿›</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BadTemplate</span> = <span class="hljs-string">`
&lt;div&gt;
  &lt;p&gt;ç¬¬ä¸€è¡Œ
  &lt;/p&gt;
&lt;/div&gt;  // ç¼©è¿›å¯èƒ½è¢«åŒ…å«

// âœ… ä½¿ç”¨æ¨¡æ¿å­—é¢é‡ä¿æŒæ•´æ´
const GoodTemplate = `</span>&lt;div&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ç¬¬ä¸€è¡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
&lt;/div&gt;<span class="hljs-string">`
</span></code></pre>
<h4 data-id="heading-5">3. <strong>å†…è”æ¨¡æ¿</strong> - å¿«é€Ÿä½†ä¸æ¨è</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- çˆ¶ç»„ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"parent"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">inline-template</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›´æ¥åœ¨ HTML ä¸­å†™æ¨¡æ¿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¥è‡ªå­ç»„ä»¶: {{ childData }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ¥è‡ªçˆ¶ç»„ä»¶: {{ parentMessage }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  <span class="hljs-attr">el</span>: <span class="hljs-string">'#parent'</span>,
  <span class="hljs-attr">data</span>: {
    <span class="hljs-attr">parentMessage</span>: <span class="hljs-string">'çˆ¶ç»„ä»¶æ•°æ®'</span>
  },
  <span class="hljs-attr">components</span>: {
    <span class="hljs-string">'child-component'</span>: {
      <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">childData</span>: <span class="hljs-string">'å­ç»„ä»¶æ•°æ®'</span> }
      }
    }
  }
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>âš ï¸ è­¦å‘Šï¼š</strong></p>
<ul>
<li>âŒ ä½œç”¨åŸŸéš¾ä»¥ç†è§£</li>
<li>âŒ ç ´åç»„ä»¶å°è£…æ€§</li>
<li>âŒ ä¸åˆ©äºç»´æŠ¤</li>
<li>âœ… å”¯ä¸€ä¼˜åŠ¿ï¼šå¿«é€ŸåŸå‹</li>
</ul>
<h4 data-id="heading-6">4. <strong>X-Templates</strong> - åˆ†ç¦»ä½†è€å¼</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åœ¨ HTML ä¸­å®šä¹‰æ¨¡æ¿ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/x-template"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user-template"</span>&gt;</span><span class="xml">
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"user"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ name }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ email }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// åœ¨ JavaScript ä¸­å¼•ç”¨</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">'user-component'</span>, {
  <span class="hljs-attr">template</span>: <span class="hljs-string">'#user-template'</span>,
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'name'</span>, <span class="hljs-string">'email'</span>]
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ğŸŸ¡ æ¨¡æ¿ä¸é€»è¾‘åˆ†ç¦»</li>
<li>ğŸŸ¡ æ— éœ€æ„å»ºå·¥å…·</li>
<li>âŒ å…¨å±€å‘½åç©ºé—´æ±¡æŸ“</li>
<li>âŒ æ— æ³•ä½¿ç”¨æ„å»ºå·¥å…·ä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-7">5. <strong>æ¸²æŸ“å‡½æ•°</strong> - å®Œå…¨çš„ JavaScript æ§åˆ¶åŠ›</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŸºæœ¬æ¸²æŸ“å‡½æ•°</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'items'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params">h</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'ul'</span>, 
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> 
        <span class="hljs-title function_">h</span>(<span class="hljs-string">'li'</span>, { <span class="hljs-attr">key</span>: item.<span class="hljs-property">id</span> }, item.<span class="hljs-property">name</span>)
      )
    )
  }
}

<span class="hljs-comment">// å¸¦æ¡ä»¶æ¸²æŸ“å’Œäº‹ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> }
  },
  <span class="hljs-title function_">render</span>(<span class="hljs-params">h</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, [
      <span class="hljs-title function_">h</span>(<span class="hljs-string">'h1'</span>, <span class="hljs-string">`è®¡æ•°: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.count}</span>`</span>),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">'button'</span>, {
        <span class="hljs-attr">on</span>: {
          <span class="hljs-attr">click</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++
        }
      }, <span class="hljs-string">'å¢åŠ '</span>)
    ])
  }
}
</code></pre>
<p><strong>é«˜çº§æ¨¡å¼ - åŠ¨æ€ç»„ä»¶å·¥å‚ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ComponentFactory</span> = {
  <span class="hljs-attr">functional</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'type'</span>, <span class="hljs-string">'data'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params">h, { props }</span>) {
    <span class="hljs-keyword">const</span> components = {
      <span class="hljs-attr">text</span>: <span class="hljs-title class_">TextComponent</span>,
      <span class="hljs-attr">image</span>: <span class="hljs-title class_">ImageComponent</span>,
      <span class="hljs-attr">video</span>: <span class="hljs-title class_">VideoComponent</span>
    }
    
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Component</span> = components[props.<span class="hljs-property">type</span>]
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">Component</span>, {
      <span class="hljs-attr">props</span>: { <span class="hljs-attr">data</span>: props.<span class="hljs-property">data</span> }
    })
  }
}

<span class="hljs-comment">// åŠ¨æ€ slot å†…å®¹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LayoutComponent</span> = {
  <span class="hljs-title function_">render</span>(<span class="hljs-params">h</span>) {
    <span class="hljs-comment">// è·å–å…·å slot</span>
    <span class="hljs-keyword">const</span> header = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$slots</span>.<span class="hljs-property">header</span>
    <span class="hljs-keyword">const</span> defaultSlot = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$slots</span>.<span class="hljs-property">default</span>
    <span class="hljs-keyword">const</span> footer = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$slots</span>.<span class="hljs-property">footer</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">class</span>: <span class="hljs-string">'layout'</span> }, [
      header &amp;&amp; <span class="hljs-title function_">h</span>(<span class="hljs-string">'header'</span>, header),
      <span class="hljs-title function_">h</span>(<span class="hljs-string">'main'</span>, defaultSlot),
      footer &amp;&amp; <span class="hljs-title function_">h</span>(<span class="hljs-string">'footer'</span>, footer)
    ])
  }
}
</code></pre>
<h4 data-id="heading-8">6. <strong>JSX</strong> - React å¼€å‘è€…çš„ç¦éŸ³</h4>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// .vue æ–‡ä»¶ä¸­ä½¿ç”¨ JSX</span>
&lt;script&gt;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">items</span>: [<span class="hljs-string">'Vue'</span>, <span class="hljs-string">'React'</span>, <span class="hljs-string">'Angular'</span>]
    }
  },
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"jsx-demo"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>JSX åœ¨ Vue ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
          {this.items.map((item, index) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>{item}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          ))}
        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        {/* ä½¿ç”¨æŒ‡ä»¤ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">vModel</span>=<span class="hljs-string">{this.inputValue}</span> /&gt;</span>
        {/* äº‹ä»¶ç›‘å¬ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.handleClick}</span>&gt;</span>ç‚¹å‡»<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>é…ç½®æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// babel.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@vue/cli-plugin-babel/preset'</span>],
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-string">'@vue/babel-plugin-jsx'</span> <span class="hljs-comment">// å¯ç”¨ Vue JSX æ”¯æŒ</span>
  ]
}
</code></pre>
<p><strong>JSX vs æ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// JSX çš„ä¼˜åŠ¿ï¼šåŠ¨æ€æ€§æ›´å¼º</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicList</span> = {
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'config'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">tag</span>: <span class="hljs-title class_">Tag</span>, items, <span class="hljs-attr">itemComponent</span>: <span class="hljs-title class_">Item</span> } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>
    
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tag</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dynamic-list"</span>&gt;</span>
        {items.map(item =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Item</span> <span class="hljs-attr">item</span>=<span class="hljs-string">{item}</span> /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Tag</span>&gt;</span></span>
    )
  }
}
</code></pre>
<h4 data-id="heading-9">7. <strong>åŠ¨æ€ç»„ä»¶</strong> - è¿è¡Œæ—¶æ¨¡æ¿å†³ç­–</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- component:is åŠ¨æ€ç»„ä»¶ --&gt;
  &lt;component 
    :is="currentComponent"
    v-bind="currentProps"
    @custom-event="handleEvent"
  /&gt;
&lt;/template&gt;

&lt;script&gt;
import TextEditor from './TextEditor.vue'
import ImageUploader from './ImageUploader.vue'
import VideoPlayer from './VideoPlayer.vue'

export default {
  data() {
    return {
      componentType: 'text',
      content: ''
    }
  },
  computed: {
    currentComponent() {
      const components = {
        text: TextEditor,
        image: ImageUploader,
        video: VideoPlayer
      }
      return components[this.componentType]
    },
    currentProps() {
      // æ ¹æ®ç»„ä»¶ç±»å‹ä¼ é€’ä¸åŒçš„ props
      const baseProps = { content: this.content }
      
      if (this.componentType === 'image') {
        return { ...baseProps, maxSize: '5MB' }
      }
      
      return baseProps
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-10">ä¸‰ã€è¿›é˜¶æŠ€å·§ï¼šæ··åˆæ¨¡å¼ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-11">1. <strong>æ¨¡æ¿ä¸æ¸²æŸ“å‡½æ•°ç»“åˆ</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- ä½¿ç”¨æ¨¡æ¿å®šä¹‰ä¸»ä½“ç»“æ„ --&gt;
  &lt;div class="data-table"&gt;
    &lt;table-header :columns="columns" /&gt;
    &lt;table-body :render-row="renderTableRow" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    // ä½¿ç”¨æ¸²æŸ“å‡½æ•°å¤„ç†å¤æ‚è¡Œæ¸²æŸ“
    renderTableRow(h, row) {
      return h('tr', 
        this.columns.map(column =&gt; 
          h('td', {
            class: column.className,
            style: column.style
          }, column.formatter ? column.formatter(row) : row[column.key])
        )
      )
    }
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-12">2. <strong>é«˜é˜¶ç»„ä»¶æ¨¡å¼</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é«˜é˜¶ç»„ä»¶ï¼šå¢å¼ºæ¨¡æ¿åŠŸèƒ½</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">withLoading</span>(<span class="hljs-params">WrappedComponent</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">render</span>(<span class="hljs-params">h</span>) {
      <span class="hljs-keyword">const</span> directives = [
        {
          <span class="hljs-attr">name</span>: <span class="hljs-string">'loading'</span>,
          <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span>,
          <span class="hljs-attr">expression</span>: <span class="hljs-string">'isLoading'</span>
        }
      ]
      
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { directives }, [
        <span class="hljs-title function_">h</span>(<span class="hljs-title class_">WrappedComponent</span>, {
          <span class="hljs-attr">props</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$attrs</span>,
          <span class="hljs-attr">on</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">$listeners</span>
        }),
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isLoading</span> &amp;&amp; <span class="hljs-title function_">h</span>(<span class="hljs-title class_">LoadingSpinner</span>)
      ])
    },
    <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">isLoading</span>: <span class="hljs-literal">false</span> }
    },
    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// åŠ è½½é€»è¾‘</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-13">3. <strong>SSR ä¼˜åŒ–ç­–ç•¥</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯æ¸²æŸ“å‹å¥½çš„æ¨¡æ¿</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// å®¢æˆ·ç«¯æ¿€æ´»æ‰€éœ€</span>
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä»…å®¢æˆ·ç«¯çš„ DOM æ“ä½œ</span>
    <span class="hljs-keyword">if</span> (process.<span class="hljs-property">client</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeThirdPartyLibrary</span>()
    }
  },
  
  <span class="hljs-comment">// æœåŠ¡ç«¯æ¸²æŸ“ä¼˜åŒ–</span>
  <span class="hljs-title function_">serverPrefetch</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¢„å–æ•°æ®</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchData</span>()
  },
  
  <span class="hljs-comment">// é¿å…å®¢æˆ·ç«¯ hydration ä¸åŒ¹é…</span>
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div&gt;
      &lt;!-- é¿å…ä½¿ç”¨éšæœºå€¼ --&gt;
      &lt;p&gt;æœåŠ¡å™¨æ—¶é—´: {{ serverTime }}&lt;/p&gt;
      
      &lt;!-- é¿å…ä½¿ç”¨ Date.now() ç­‰ --&gt;
      &lt;!-- æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯è¦ä¸€è‡´ --&gt;
    &lt;/div&gt;
  `</span>
}
</code></pre>
<h3 data-id="heading-14">å››ã€é€‰æ‹©æŒ‡å—ï¼šå¦‚ä½•å†³å®šä½¿ç”¨å“ªç§æ–¹å¼ï¼Ÿ</h3>













































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>ç”Ÿäº§çº§åº”ç”¨</strong></td><td>å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰</td><td>æœ€ä½³å¼€å‘ä½“éªŒã€å·¥å…·é“¾æ”¯æŒã€å¯ç»´æŠ¤æ€§</td></tr><tr><td><strong>UI ç»„ä»¶åº“</strong></td><td>SFC + æ¸²æŸ“å‡½æ•°</td><td>SFC æä¾›å¼€å‘ä½“éªŒï¼Œæ¸²æŸ“å‡½æ•°å¤„ç†åŠ¨æ€æ€§</td></tr><tr><td><strong>é«˜åº¦åŠ¨æ€ UI</strong></td><td>æ¸²æŸ“å‡½æ•°/JSX</td><td>å®Œå…¨çš„ JavaScript æ§åˆ¶åŠ›</td></tr><tr><td><strong>React å›¢é˜Ÿè¿ç§»</strong></td><td>JSX</td><td>é™ä½å­¦ä¹ æˆæœ¬</td></tr><tr><td><strong>åŸå‹/æ¼”ç¤º</strong></td><td>å­—ç¬¦ä¸²æ¨¡æ¿</td><td>å¿«é€Ÿã€ç®€å•</td></tr><tr><td><strong>é—ç•™é¡¹ç›®</strong></td><td>X-Templates</td><td>æ¸è¿›å¼è¿ç§»</td></tr><tr><td><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong></td><td>SFCï¼ˆæ³¨æ„ hydrationï¼‰</td><td>è‰¯å¥½çš„ SSR æ”¯æŒ</td></tr></tbody></table>
<h4 data-id="heading-15"><strong>å†³ç­–æµç¨‹å›¾ï¼š</strong></h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¼€å§‹é€‰æ‹©æ¨¡æ¿æ–¹å¼] --&gt; B{éœ€è¦æ„å»ºå·¥å…·?}
    B --&gt;|æ˜¯| C{ç»„ä»¶åŠ¨æ€æ€§å¼º?}
    B --&gt;|å¦| D[ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡æ¿æˆ–X-Templates]
    
    C --&gt;|æ˜¯| E{å›¢é˜Ÿç†Ÿæ‚‰JSX?}
    C --&gt;|å¦| F[ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶SFC]
    
    E --&gt;|æ˜¯| G[ä½¿ç”¨JSX]
    E --&gt;|å¦| H[ä½¿ç”¨æ¸²æŸ“å‡½æ•°]
    
    D --&gt; I[å®Œæˆé€‰æ‹©]
    F --&gt; I
    G --&gt; I
    H --&gt; I
</code></pre>
<h3 data-id="heading-16">äº”ã€æ€§èƒ½ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">1. <strong>ç¼–è¯‘æ—¶ vs è¿è¡Œæ—¶æ¨¡æ¿</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue CLI é»˜è®¤é…ç½®ä¼˜åŒ–äº† SFC</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">productionSourceMap</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒä¸ç”Ÿæˆ source map</span>
  <span class="hljs-attr">runtimeCompiler</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ä¸ä½¿ç”¨è¿è¡Œæ—¶ç¼–è¯‘å™¨ï¼Œå‡å°åŒ…ä½“ç§¯</span>
}
</code></pre>
<h4 data-id="heading-18">2. <strong>æ¨¡æ¿é¢„ç¼–è¯‘</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰‹åŠ¨é¢„ç¼–è¯‘æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> { compile } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue-template-compiler'</span>)

<span class="hljs-keyword">const</span> template = <span class="hljs-string">`&lt;div&gt;{{ message }}&lt;/div&gt;`</span>
<span class="hljs-keyword">const</span> compiled = <span class="hljs-title function_">compile</span>(template)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(compiled.<span class="hljs-property">render</span>)
<span class="hljs-comment">// è¾“å‡ºæ¸²æŸ“å‡½æ•°ï¼Œå¯ç›´æ¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
</code></pre>
<h4 data-id="heading-19">3. <strong>é¿å…çš„å¸¸è§åæ¨¡å¼</strong></h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- âŒ é¿å…åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨å¤æ‚è¡¨è¾¾å¼ --&gt;
&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åæ¨¡å¼ï¼šå¤æ‚é€»è¾‘åœ¨æ¨¡æ¿ä¸­ --&gt;
    &lt;p&gt;{{ user.firstName + ' ' + user.lastName + ' (' + user.age + ')' }}&lt;/p&gt;
    
    &lt;!-- æ­£ç¡®ï¼šä½¿ç”¨è®¡ç®—å±æ€§ --&gt;
    &lt;p&gt;{{ fullNameWithAge }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  computed: {
    fullNameWithAge() {
      return `${this.user.firstName} ${this.user.lastName} (${this.user.age})`
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-20">å…­ã€Vue 3 çš„æ–°å˜åŒ–</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Vue 3 ç»„åˆå¼ API + SFC --&gt;
&lt;template&gt;
  &lt;!-- æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼ˆFragmentï¼‰ --&gt;
  &lt;header&gt;{{ title }}&lt;/header&gt;
  &lt;main&gt;{{ content }}&lt;/main&gt;
  &lt;footer&gt;{{ footerText }}&lt;/footer&gt;
&lt;/template&gt;

&lt;script setup&gt;
// æ›´ç®€æ´çš„è¯­æ³•
import { ref, computed } from 'vue'

const title = ref('Vue 3 ç»„ä»¶')
const content = ref('æ–°ç‰¹æ€§ä»‹ç»')

const footerText = computed(() =&gt; `Â© ${new Date().getFullYear()}`)
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>Vue æä¾›äº†ä»å£°æ˜å¼åˆ°å‘½ä»¤å¼çš„å®Œæ•´æ¨¡æ¿æ–¹æ¡ˆå…‰è°±ï¼š</p>
<ol>
<li><strong>å£°æ˜å¼ç«¯</strong>ï¼šSFC æ¨¡æ¿ â†’ æ˜“è¯»æ˜“å†™ï¼Œé€‚åˆå¤§å¤šæ•°ä¸šåŠ¡ç»„ä»¶</li>
<li><strong>å‘½ä»¤å¼ç«¯</strong>ï¼šæ¸²æŸ“å‡½æ•°/JSX â†’ å®Œå…¨æ§åˆ¶ï¼Œé€‚åˆé«˜é˜¶ç»„ä»¶å’Œåº“</li>
<li><strong>çµæ´»é€‰æ‹©</strong>ï¼šæ ¹æ®é¡¹ç›®éœ€æ±‚å’Œå›¢é˜Ÿåå¥½é€‰æ‹©åˆé€‚çš„æ–¹å¼</li>
</ol>
<p>è®°ä½è¿™äº›å…³é”®åŸåˆ™ï¼š</p>
<ul>
<li><strong>é»˜è®¤ä½¿ç”¨ SFC</strong>ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚</li>
<li><strong>ä¿æŒä¸€è‡´æ€§</strong>ï¼Œä¸€ä¸ªé¡¹ç›®ä¸­ä¸è¦æ··ç”¨å¤ªå¤šæ¨¡å¼</li>
<li><strong>æ€§èƒ½è€ƒé‡</strong>ï¼šç”Ÿäº§ç¯å¢ƒé¿å…è¿è¡Œæ—¶ç¼–è¯‘</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šé€‰æ‹©å›¢é˜Ÿæœ€ç†Ÿæ‚‰çš„æ–¹å¼</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡ºæµ·åœˆéƒ½è¯´å¥½ç”¨çš„ Claude Skillsï¼Œæˆ‘ç”¨ Codex è¯•äº†ä¸€éï¼šUI/UX ç›´æ¥èµ·é£å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚ æœ€è¿‘æˆ‘ç ”ç©¶äº†ä¸€ä¸‹å‡ºæµ·åœˆå¾ˆå¤šäººéƒ½åœ¨ç”¨ã€å¹¶ä¸”å£ç¢‘]]></title>    <link>https://juejin.cn/post/7594655863548444724</link>    <guid>https://juejin.cn/post/7594655863548444724</guid>    <pubDate>2026-01-13T14:16:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594655863548444724" data-draft-id="7594655863548428340" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡ºæµ·åœˆéƒ½è¯´å¥½ç”¨çš„ Claude Skillsï¼Œæˆ‘ç”¨ Codex è¯•äº†ä¸€éï¼šUI/UX ç›´æ¥èµ·é£å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚  æœ€è¿‘æˆ‘ç ”ç©¶äº†ä¸€ä¸‹å‡ºæµ·åœˆå¾ˆå¤šäººéƒ½åœ¨ç”¨ã€å¹¶ä¸”å£ç¢‘"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude"/> <meta itemprop="datePublished" content="2026-01-13T14:16:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿå¥AIç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/4212984287073895"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡ºæµ·åœˆéƒ½è¯´å¥½ç”¨çš„ Claude Skillsï¼Œæˆ‘ç”¨ Codex è¯•äº†ä¸€éï¼šUI/UX ç›´æ¥èµ·é£å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚  æœ€è¿‘æˆ‘ç ”ç©¶äº†ä¸€ä¸‹å‡ºæµ·åœˆå¾ˆå¤šäººéƒ½åœ¨ç”¨ã€å¹¶ä¸”å£ç¢‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984287073895/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿå¥AIç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:16:31.000Z" title="Tue Jan 13 2026 14:16:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å­Ÿå¥ã€‚</p>
<p>æœ€è¿‘æˆ‘ç ”ç©¶äº†ä¸€ä¸‹å‡ºæµ·åœˆå¾ˆå¤šäººéƒ½åœ¨ç”¨ã€å¹¶ä¸”å£ç¢‘å¾ˆå¥½çš„ä¸€ä¸ª Claude Skillï¼š<code>ui-ux-pro-max</code>ã€‚</p>
<p>ä»“åº“åœ°å€ï¼ˆå…ˆæ”¶è—ï¼‰ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">github.com/nextlevelbuâ€¦</a></p>
<p>å®ƒç›®å‰ Star å·²ç»éå¸¸é«˜ï¼ˆæˆ‘çœ‹åˆ°çš„æ—¶å€™æ˜¯ 12.7kï¼‰ï¼Œæ ¸å¿ƒä½œç”¨ä¸€å¥è¯æ€»ç»“å°±æ˜¯ï¼š</p>
<p><strong>æŠŠã€ŒAI ç›´å‡ºé¡µé¢çš„é‚£è‚¡ AI å‘³ã€å‹ä¸‹å»ï¼Œç”¨ä¸€å¥—æ›´å·¥ç¨‹åŒ–ã€æ›´å®¡ç¾åŒ–ã€æ›´å¯å¤ç”¨çš„æµç¨‹ï¼Œè®©</strong> <strong>UI</strong>**/UX è®¾è®¡è´¨é‡æ˜¾è‘—æå‡ã€‚**</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b40045977df41b697b3512c8096bc02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=ElL45zf5w8pPmnAe6N7haVRl72I%3D" alt="" loading="lazy"/></p>
<p>æˆ‘è¿™ç¯‡æ–‡ç« ä¼šåšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>
<p>å¸¦ä½ å¿«é€Ÿä½“éªŒå®ƒèƒ½å¸¦æ¥ä»€ä¹ˆï¼ˆä»¥åŠå¦‚ä½•åœ¨ Codex ä¸Šç”¨èµ·æ¥ï¼‰</p>
</li>
<li>
<p>æ‹†è§£å®ƒçš„æ€è·¯ï¼šå®ƒåˆ°åº•é ä»€ä¹ˆæŠŠ UI åšå¾—â€œæ›´åƒäººåšçš„â€</p>
</li>
</ol>
<h2 data-id="heading-0">1ï¼‰ä¸ºä»€ä¹ˆæˆ‘é€‰ Codex æ¥è¯•ï¼šClaude å°å·å¤ªå‡¶äº†</h2>
<p>ä¸å°‘æœ‹å‹éƒ½çŸ¥é“ï¼ŒClaude æœ€è¿‘å°å·å¾ˆä¸¥ï¼Œæˆ‘å°±å¹²è„†åœ¨ Codex ä¸Šè¯•éªŒäº†ä¸€ä¸‹ï¼Œç»“æœå‘ç°ï¼š<strong>Codex ä¹Ÿå®Œå…¨æ”¯æŒ Skills</strong>ï¼Œè€Œä¸”ä½“éªŒå¾ˆé¡ºæ»‘ã€‚</p>
<p>æ‰€ä»¥å¦‚æœä½ ä¹Ÿåœ¨åšå‡ºæµ·ç«™ç‚¹ã€è½åœ°é¡µã€äº§å“å®˜ç½‘è¿™ä¸€ç±»ï¼Œæƒ³æŠŠ UI è´¨é‡å¾€ä¸ŠæŠ¬ä¸€æ¡£ï¼Œè¿™æ¡è·¯éå¸¸å€¼å¾—è¯•ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-1">2ï¼‰å®‰è£…ä¸éªŒè¯ï¼š3 æ¡å‘½ä»¤å°±æå®š</h2>
<p>å®‰è£…æ–¹å¼éå¸¸ç®€å•ï¼Œä½œè€…æä¾›äº† CLIã€‚</p>
<p>å…ˆå…¨å±€å®‰è£…ï¼š</p>
<pre><code class="hljs">npm install -g uipro-cli
</code></pre>
<p>ç„¶åè¿›å…¥ä¸ªäººæ ¹ç›®å½•åˆå§‹åŒ–ï¼ˆè¿™é‡Œæˆ‘ç”¨çš„æ˜¯ Codexï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ~
uipro init --ai codex
</code></pre>
<p>å¦‚æœå®‰è£…æˆåŠŸï¼Œè¿›å…¥ <code>~/.codex/skills</code> ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„ Skill ç›®å½•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7eb40a68eafc4b12abfc049eeaf48137~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=mqk5e4KCLIQykfQ0YMQe%2FcKW9wo%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ä½ å°±å¯ä»¥è®© Codex åœ¨åšè®¾è®¡/å®ç°æ—¶è‡ªåŠ¨è°ƒç”¨å®ƒäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b3841ed96684d3ba0a8dbf3b02e02ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=YWjUxDi74KdNuCgIB9U6MHTla%2BM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3ï¼‰å¿«é€Ÿä½“éªŒï¼šæˆ‘è®©å®ƒåšäº†ä¸€ä¸ª <code>pngtosvg</code> ç«™ç‚¹</h2>
<p>æˆ‘è®©å®ƒåšäº†ä¸ªå¾ˆç®€å•ä½†å¾ˆå¸¸è§çš„å‡ºæµ·ç«™ç‚¹éœ€æ±‚ï¼šåšä¸€ä¸ª <code>pngtosvg</code> å·¥å…·ç«™ï¼ˆLanding Page + æ ¸å¿ƒåŠŸèƒ½é¡µï¼‰ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°å®ƒåœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­ä¼šæ˜ç¡®æ˜¾ç¤ºè°ƒç”¨äº†è¿™ä¸ª Skillï¼Œäº§ç‰©å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c09088c2ec5340ae82a2066095ffe858~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=qgMRZ4DxzUtu5mzalt7rsxrpCbo%3D" alt="" loading="lazy"/></p>
<p>æˆ‘çš„ç›´è§‚æ„Ÿå—æ˜¯ï¼š</p>
<ul>
<li>
<p><strong>æ•´ä½“æ¯” AI ç›´å‡ºè¦ç¨å¾®å¼ºä¸€ç‚¹</strong></p>
</li>
<li>
<p>ç»„ä»¶é—´è·ã€æ’ç‰ˆã€å±‚çº§å…³ç³»æ›´å¹²å‡€</p>
</li>
<li>
<p>hoverã€è¾¹æ¡†ã€å¡ç‰‡é˜´å½±ã€æŒ‰é’®çŠ¶æ€è¿™äº›å°ç»†èŠ‚æ›´å®Œæ•´</p>
</li>
<li>
<p>å¾ˆå¤šå¸¸è§çš„â€œAI è®¾è®¡å‘â€è¢«æå‰è§„é¿äº†</p>
</li>
</ul>
<h2 data-id="heading-3">4ï¼‰æ‹†è§£è¿™ä¸ª Skillï¼šå®ƒæ˜¯æ€ä¹ˆåšåˆ°â€œå» AI å‘³â€çš„ï¼Ÿ</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ‹†ä¸€ä¸‹ <code>ui-ux-pro-max</code> çš„æ ¸å¿ƒç»“æ„ï¼Œä½ ä¼šå‘ç°å®ƒå…¶å®ä¸ç¥ç§˜ï¼Œåªæ˜¯æŠŠæµç¨‹æŠ½è±¡äº†ã€‚</p>
<h2 data-id="heading-4">4.1 å…ˆå®šè§’è‰²ï¼šå®ƒä¸æ˜¯â€œæç¤ºè¯â€ï¼Œå®ƒæŠŠè‡ªå·±å®šä¹‰æˆâ€œè®¾è®¡æ™ºèƒ½ä½“â€</h2>
<p>Skill çš„ Description ç¬¬ä¸€æ®µå°±å¾ˆå…³é”®ï¼šå®ƒæ˜ç¡®è¯´è‡ªå·±æ˜¯ä¸€ä¸ª UI/UX è®¾è®¡æ™ºèƒ½ä½“ã€‚</p>
<p>å¹¶ä¸”å¼ºè°ƒè¿™ä¸æ˜¯å•ä¸€ç»´åº¦çš„â€œå®¡ç¾æç¤ºè¯â€ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤åˆä½“ï¼š</p>
<p><strong>è®¾è®¡ Ã— å·¥ç¨‹ Ã— å®¡ç¾ Ã— ç»„ä»¶ç”Ÿæ€</strong></p>
<p>å®ƒæŠŠèƒ½åŠ›æ‹†æˆäº†å‡ å—ï¼šè®¾è®¡è¯­è¨€ã€è§†è§‰ç³»ç»Ÿã€æŠ€æœ¯æ ˆã€ç»„ä»¶èƒ½åŠ›ã€è¡Œä¸ºåŠ¨ä½œã€åº”ç”¨åœºæ™¯ã€‚</p>
<p>è®¾è®¡èµ„æºçš„è¦†ç›–ä¹Ÿéå¸¸å¹¿ï¼ˆè¿™ä¹Ÿæ˜¯å®ƒèƒ½ç¨³å®šè¾“å‡ºé£æ ¼åŒ–é¡µé¢çš„æ ¹æœ¬åŸå› ï¼‰ï¼š</p>
<ul>
<li>
<p>50 stylesï¼ˆè®¾è®¡é£æ ¼ï¼‰</p>
</li>
<li>
<p>21 palettesï¼ˆé…è‰²æ–¹æ¡ˆï¼‰</p>
</li>
<li>
<p>50 font pairingsï¼ˆå­—ä½“ç»„åˆï¼‰</p>
</li>
<li>
<p>20 chartsï¼ˆå›¾è¡¨ç±»å‹ï¼‰</p>
</li>
<li>
<p>9 å¤§ UI æŠ€æœ¯æ ˆ/ç”Ÿæ€</p>
</li>
<li>
<p>è¦†ç›–å‡ ä¹æ‰€æœ‰å¸¸è§äº§å“å½¢æ€</p>
</li>
<li>
<p>ç»„ä»¶ + UI è®¾è®¡ç»´åº¦ï¼ˆä¸æ˜¯åªç”Ÿæˆä¸€å¼ â€œå›¾â€ï¼Œè€Œæ˜¯å¯è½åœ°çš„é¡µé¢ç»“æ„ï¼‰</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d1f27b88cd54dc392e469f8413f94d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=qR%2FZVN18i8oP%2B8nXrF40I2ATdiA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">4.2 ä¸»ä½“å†…å®¹ï¼šå®ƒè¦æ±‚å…ˆæœ‰ Python ä¾èµ–</h2>
<p>Skill ä¸»ä½“é‡Œå†™æ˜äº†å‰ç½®ä¾èµ–ï¼šPython æŠ€æœ¯æ ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d7d52833e6f4cbfb9598f314635c8b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=L2D5s4Pi7mUUT2VoP8jrt6gUAdQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">4.3 How To Useï¼šä»€ä¹ˆæ—¶å€™åº”è¯¥è°ƒç”¨å®ƒï¼Ÿ</h2>
<p>How To Use é‡Œï¼Œä½œè€…æŠŠè§¦å‘èŒƒå›´å†™å¾—å¾ˆæ¸…æ™°ï¼šå½“ä½ è¦åš UI/UX ç›¸å…³å·¥ä½œæ—¶ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>design</p>
</li>
<li>
<p>build</p>
</li>
<li>
<p>create</p>
</li>
<li>
<p>implement</p>
</li>
<li>
<p>review</p>
</li>
<li>
<p>fix</p>
</li>
<li>
<p>improve</p>
</li>
</ul>
<p>è¿™ä¹Ÿå¾ˆç¬¦åˆæˆ‘ä»¬æ—¥å¸¸ï¼šä»â€œåšæ–°é¡µé¢â€åˆ°â€œæ”¹è€é¡µé¢â€ï¼Œå®ƒéƒ½èƒ½ä»‹å…¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84878db88b784c0ba20fb8d5f3b9303b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=g0KHydW2qCvlV3mjprGa%2FICb5Mc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">4.4 Step 1ï¼šå¼ºåˆ¶åšéœ€æ±‚ç»“æ„åŒ–ï¼ˆä»äººè¯é‡Œæå– 4 ä¸ªå…³é”®ä¿¡æ¯ï¼‰</h2>
<p>å®ƒå…ˆåšéœ€æ±‚åˆ†æï¼šä»ç”¨æˆ·è¾“å…¥é‡Œ<strong>å¼ºåˆ¶æå–</strong> 4 ç±»å…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li>
<p>Product typeï¼ˆäº§å“å½¢æ€ï¼‰</p>
</li>
<li>
<p>Style keywordsï¼ˆè§†è§‰é£æ ¼ï¼‰</p>
</li>
<li>
<p>Industryï¼ˆè¡Œä¸šï¼‰</p>
</li>
<li>
<p>Stackï¼ˆæŠ€æœ¯æ ˆï¼‰</p>
</li>
</ul>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼šå…ˆæŠŠâ€œè®¾è®¡è¦ç´ â€å¯¹é½ï¼Œå¦åˆ™åé¢å…¨éƒ¨ä¼šè·‘åã€‚</p>
<h2 data-id="heading-8">4.5 Step 2ï¼šç”¨ <code>search.py</code> æ£€ç´¢åˆ°â€œä¸Šä¸‹æ–‡è¶³å¤Ÿâ€ä¸ºæ­¢ï¼ˆå…³é”®åœ¨â€œå¬å›â€ï¼‰</h2>
<p>ç¬¬äºŒæ­¥æ˜¯æ£€ç´¢ï¼šç”¨ <code>search.py</code> å¤šæ¬¡æœç´¢ï¼Œä¸€ç›´æœç´¢åˆ°ã€Œä¸Šä¸‹æ–‡è¶³å¤Ÿã€ã€‚</p>
<p>å®ƒçš„å®ç°æ–¹å¼ä¹Ÿå¾ˆæœ‰æ„æ€ï¼šä¸æ˜¯è”ç½‘æœï¼Œä¹Ÿä¸æ˜¯è°ƒç”¨å¤–éƒ¨å‘é‡æ•°æ®åº“ã€‚</p>
<p>ä½œè€…å†™äº†ä¸€ä¸ªæœ¬åœ°çš„ BM25 æœç´¢ç®—æ³•ï¼Œå»åŒ¹é…çŸ¥è¯†åº“ï¼ˆCSVï¼‰é‡Œçš„ç›¸å…³ç‰¹å¾è¿›è¡Œå¬å›ã€‚</p>
<p>å¦‚æœä½ å¯¹å·¥ç¨‹å®ç°æ„Ÿå…´è¶£ï¼Œå¯ä»¥å»ç¿»æºç çœ‹çœ‹ï¼Œä¼šå¾ˆæœ‰å¯å‘ï¼š<strong>æŠŠâ€œè®¾è®¡çŸ¥è¯†åº“â€å˜æˆå¯æ£€ç´¢çš„ç»“æ„åŒ–æ•°æ®</strong>ï¼Œè¿™æ˜¯å®ƒç¨³å®šè¾“å‡ºçš„æ ¸å¿ƒã€‚</p>
<p>æœç´¢è¿˜æœ‰æ˜ç¡®çš„ä¼˜å…ˆçº§é¡ºåºï¼ˆè¿™ç‚¹å¾ˆåƒèµ„æ·±è®¾è®¡å¸ˆçš„å·¥ä½œæµï¼‰ï¼š</p>
<ul>
<li>
<p>Productï¼ˆäº§å“ï¼‰</p>
</li>
<li>
<p>Styleï¼ˆæ ·å¼ï¼‰</p>
</li>
<li>
<p>Typographyï¼ˆå­—ä½“æ’ç‰ˆï¼‰</p>
</li>
<li>
<p>Colorï¼ˆé¢œè‰²ï¼‰</p>
</li>
<li>
<p>Landingï¼ˆè½åœ°é¡µç»“æ„ï¼‰</p>
</li>
<li>
<p>Chartï¼ˆå›¾è¡¨ï¼‰</p>
</li>
<li>
<p>UXï¼ˆç”¨æˆ·ä½“éªŒï¼‰</p>
</li>
<li>
<p>Stackï¼ˆæŠ€æœ¯æ ˆï¼‰</p>
</li>
</ul>
<p>è¿™ä¸€æ­¥å…¶å®å°±æ˜¯ï¼šæŠŠé¡µé¢â€œè®¾è®¡ç³»ç»Ÿâ€çš„å„ä¸ªç»´åº¦å®šä¸‹æ¥ã€‚</p>
<h2 data-id="heading-9">4.6 Step 3ï¼šå…œåº•ç­–ç•¥ï¼ˆæ²¡æŒ‡å®šæŠ€æœ¯æ ˆå°±ç”¨ HTML + Tailwindï¼‰</h2>
<p>ç¬¬ä¸‰æ­¥æ˜¯å…œåº•ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šæŠ€æœ¯æ ˆï¼Œå®ƒé»˜è®¤ç”¨ <code>html + tailwind</code>ã€‚</p>
<h2 data-id="heading-10">4.7 èµ„æºæ¸…å•ï¼šæ¯ä¸ªç»´åº¦éƒ½æ˜¯ä¸€ä»½ç‹¬ç«‹ CSV</h2>
<p>Skill æ¥ä¸‹æ¥åˆ—å‡ºäº†æ‰€æœ‰å¯æœç´¢çš„èµ„æºï¼ˆæ¯ä¸ªéƒ½æ˜¯ç‹¬ç«‹ CSVï¼‰ã€‚</p>
<p>æ€»ä½“å¯ä»¥ç†è§£ä¸ºï¼š</p>
<ul>
<li>
<p>productï¼šå†³å®šäº§å“æ•´ä½“è®¾è®¡æ–¹å‘</p>
</li>
<li>
<p>styleï¼šå†³å®šè§†è§‰è¯­è¨€</p>
</li>
<li>
<p>typographyï¼šå­—ä½“æ­é…ä¸æ’ç‰ˆæ°”è´¨</p>
</li>
<li>
<p>colorï¼šå®Œæ•´é…è‰²æ–¹æ¡ˆï¼ˆä¸æ˜¯éšä¾¿æŒ‘ä¸ªä¸»è‰²ï¼‰</p>
</li>
<li>
<p>landingï¼šè½åœ°é¡µç»“æ„ï¼ˆä¿¡æ¯æ¶æ„/æ¨¡å—ç»„ç»‡ï¼‰</p>
</li>
<li>
<p>chartï¼šå›¾è¡¨ç±»å‹ä¸å‘ˆç°æ–¹å¼</p>
</li>
<li>
<p>uxï¼šäº¤äº’å±•ç°çš„æœ€ä½³å®è·µ</p>
</li>
<li>
<p>promptï¼šæœ€ä½³æç¤ºè¯ï¼ˆæ›´åƒâ€œå·¥ä½œæŒ‡ä»¤é›†â€ï¼‰</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c72008719fc9488fb56f58e6ce37561e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=Mp%2FevAqkb89luBpV7Jekb0VSgOo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">5ï¼‰æœ€ç²¾åçš„åœ°æ–¹ï¼šé€šç”¨è®¾è®¡è§„çº¦ + Checklistï¼ˆæŠŠâ€œç»éªŒâ€å†™æ­»ï¼‰</h2>
<p>å¦‚æœè¯´å‰é¢çš„å†…å®¹æ˜¯â€œæ£€ç´¢ + é€‰å‹â€ï¼Œé‚£çœŸæ­£æŠŠé¡µé¢è´¨é‡æ‹‰å¼€å·®è·çš„ï¼Œæ˜¯åé¢çš„ä¸¤å—ï¼š</p>
<p>1ï¼‰<strong>é€šç”¨è®¾è®¡****è§„çº¦ï¼ˆDesign Rulesï¼‰</strong></p>
<p>2ï¼‰<strong>è´¨é‡ Checklistï¼ˆé€é¡¹è‡ªæ£€ï¼‰</strong></p>
<p>è¿™ä¸¤å—æˆ‘è®¤ä¸ºæ˜¯å» AI å‘³çš„ç²¾åï¼Œå€¼å¾—ä½ åå¤è¯»ã€ç”šè‡³æŠ„åˆ°è‡ªå·±çš„å›¢é˜Ÿè§„èŒƒé‡Œã€‚</p>
<h3 data-id="heading-12">5.1 è§„çº¦ï¼šä¸“é—¨é’ˆå¯¹ AI çš„â€œå¸¸è§å‘â€</h3>
<p>æ¯”å¦‚ AI å¾ˆçˆ±ç”Ÿæˆ emoji å›¾æ ‡ï¼Œè¿™é‡Œç›´æ¥è§„å®šï¼šç”¨ SVG iconsã€‚</p>
<p>è¿˜æœ‰ä¸€å †â€œäººç±»ä¼šä¸‹æ„è¯†æ³¨æ„ï¼Œä½† AI ç»å¸¸å¿½ç•¥â€çš„ç»†èŠ‚ï¼š</p>
<ul>
<li>
<p>hover çŠ¶æ€å¿…é¡»å®Œæ•´</p>
</li>
<li>
<p>logo/icon çš„æ¯”ä¾‹è¦åˆç†</p>
</li>
<li>
<p>é¼ æ ‡æ‰‹å‹ã€å¯ç‚¹å‡»åé¦ˆè¦æ˜ç¡®</p>
</li>
<li>
<p>åŠ¨ç”»è¦å¹³æ»‘ã€åˆ«æ™ƒçœ¼</p>
</li>
<li>
<p>ç»ç’ƒè´¨æ„Ÿä¸è¦è„</p>
</li>
<li>
<p>æ–‡å­—äº®åº¦å¯¹æ¯”è¦å¤Ÿ</p>
</li>
<li>
<p>è¾¹æ¡†è¦å¯è§ï¼ˆåˆ«éšå½¢ï¼‰</p>
</li>
<li>
<p>å¯¼èˆªæ é—´è·ã€å†…å®¹é—´è·è¦ä¸€è‡´</p>
</li>
<li>
<p>æœ€å¤§å®½åº¦è¦ç»Ÿä¸€ï¼ˆåˆ«ä¸€ä¼šå„¿ 1200 ä¸€ä¼šå„¿ 1440ï¼‰</p>
</li>
</ul>
<p>è¿™äº›åŸºæœ¬éƒ½æ˜¯æˆ‘ä»¬æ‹¿ AI ç›´å‡ºé¡µé¢ä¹‹åï¼Œéœ€è¦â€œäºŒæ¬¡äººå·¥ä¿®â€çš„åœ°æ–¹ã€‚</p>
<p>è€Œä½œè€…åšçš„äº‹æƒ…æ˜¯ï¼š<strong>æŠŠè¿™äº›å‘æå‰å˜æˆç¡¬è§„åˆ™ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d16e373ff414a5e9c78090b4ce29c62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=iEBpDZI5MWTshjMhMVnaJYcmgLc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">5.2 Checklistï¼šäº”ä¸ªç»´åº¦é€é¡¹æ£€æŸ¥</h3>
<p>Checklist è¿›ä¸€æ­¥æŠŠéªŒæ”¶æµç¨‹å†™æˆäº†å¯æ‰§è¡Œçš„æ¸…å•ï¼Œä»äº”ä¸ªç»´åº¦æ£€æŸ¥ï¼š</p>
<ul>
<li>
<p>è§†è§‰è´¨é‡</p>
</li>
<li>
<p>äº¤äº’</p>
</li>
<li>
<p>äº®è‰²/æš—è‰²æ¨¡å¼</p>
</li>
<li>
<p>å¸ƒå±€</p>
</li>
<li>
<p>å¯è®¿é—®æ€§</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9bf2932e62dc48389e4a5a5bd7839ff7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f5YGlQUnnvJbnqIs=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768918590&amp;x-signature=2dCIDGQwERuOyk1Zo7OVZPKbCYY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-14">ç»“è¯­</h2>
<p>å¥½äº†ï¼Œä»Šå¤©çš„ Skill åˆ†äº«å’Œåˆ†æå°±åˆ°è¿™é‡Œäº†ã€‚</p>
<p>å¦‚æœä½ åœ¨åšå‡ºæµ·ç«™ç‚¹ã€è½åœ°é¡µã€SaaS å®˜ç½‘ï¼Œæˆ‘å¼ºçƒˆå»ºè®®ä½ äº²è‡ªè·‘ä¸€éè¿™ä¸ª Skill çš„æµç¨‹ã€‚</p>
<p>å¤§å®¶çœ‹å®Œæœ‰ä»€ä¹ˆæ”¶è·ã€æˆ–è€…ä½ å¸Œæœ›æˆ‘ä¸‹ä¸€æœŸæ‹†è§£å“ªä¸ª Skill / å“ªå¥—å·¥ä½œæµï¼Œæ¬¢è¿ç•™è¨€ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æœŸå†è§ã€‚</p>
<hr/>
<p>ğŸš€ æƒ³è¦ä¸æ›´å¤šAIçˆ±å¥½è€…äº¤æµï¼Œå…±åŒæˆé•¿å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZ4k_5_waWJbRRo5lZBZmog" target="_blank" title="https://mp.weixin.qq.com/s/Z4k_5_waWJbRRo5lZBZmog" ref="nofollow noopener noreferrer">å’Œä¸€ç¾¤å¿—åŒé“åˆçš„äººï¼ŒæŒç»­ç²¾è¿› AI çš„æ¯ä¸€å¤©</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue ä¸‰å‰‘å®¢ï¼šç»„ä»¶ã€æ’ä»¶ã€æ’æ§½çš„æ·±åº¦è¾¨æ]]></title>    <link>https://juejin.cn/post/7594681318828425266</link>    <guid>https://juejin.cn/post/7594681318828425266</guid>    <pubDate>2026-01-13T14:19:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594681318828425266" data-draft-id="7594682922683695113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue ä¸‰å‰‘å®¢ï¼šç»„ä»¶ã€æ’ä»¶ã€æ’æ§½çš„æ·±åº¦è¾¨æ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:19:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue ä¸‰å‰‘å®¢ï¼šç»„ä»¶ã€æ’ä»¶ã€æ’æ§½çš„æ·±åº¦è¾¨æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:19:43.000Z" title="Tue Jan 13 2026 14:19:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue ä¸‰å‰‘å®¢ï¼šç»„ä»¶ã€æ’ä»¶ã€æ’æ§½çš„æ·±åº¦è¾¨æ</h2>
<blockquote>
<p>ç»„ä»¶ã€æ’ä»¶ã€æ’æ§½æ˜¯ Vue ç”Ÿæ€ä¸­çš„ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œç†è§£å®ƒä»¬çš„å·®å¼‚æ˜¯æŒæ¡ Vue æ¶æ„è®¾è®¡çš„å…³é”®ã€‚è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„å¯¹æ¯”ä½“ç³»æ¥å½»åº•ææ‡‚å®ƒä»¬ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ¦‚å¿µå…¨æ™¯å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[Vue æ ¸å¿ƒæ¦‚å¿µ] --&gt; B[Component ç»„ä»¶]
    A --&gt; C[Plugin æ’ä»¶]
    A --&gt; D[Slot æ’æ§½]
    
    B --&gt; B1[UI å¤ç”¨å•å…ƒ]
    B --&gt; B2[å±€éƒ¨ä½œç”¨åŸŸ]
    B --&gt; B3[çˆ¶å­é€šä¿¡]
    
    C --&gt; C1[å…¨å±€åŠŸèƒ½æ‰©å±•]
    C --&gt; C2[ä¸€æ¬¡é…ç½®]
    C --&gt; C3[å¤šç»„ä»¶å…±äº«]
    
    D --&gt; D1[å†…å®¹åˆ†å‘]
    D --&gt; D2[çµæ´»å ä½]
    D --&gt; D3[æ¨¡æ¿ç»„åˆ]
    
    B --&gt; E[ä½¿ç”¨æ’ä»¶]
    B --&gt; F[åŒ…å«æ’æ§½]
    C --&gt; G[å¢å¼ºç»„ä»¶]
    D --&gt; H[æ‰©å±•ç»„ä»¶]
</code></pre>
<h3 data-id="heading-2">äºŒã€ä¸‰è€…çš„æœ¬è´¨åŒºåˆ«ï¼šä¸€å¥è¯æ¦‚æ‹¬</h3>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>æœ¬è´¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>ç»„ä»¶</strong></td><td><strong>å¯å¤ç”¨çš„ UI å•å…ƒ</strong></td><td>ä¹é«˜ç§¯æœ¨å—</td></tr><tr><td><strong>æ’ä»¶</strong></td><td><strong>å…¨å±€åŠŸèƒ½æ‰©å±•åŒ…</strong></td><td>ä¹é«˜å·¥å…·ç®±</td></tr><tr><td><strong>æ’æ§½</strong></td><td><strong>ç»„ä»¶çš„å†…å®¹å ä½ç¬¦</strong></td><td>ä¹é«˜ç§¯æœ¨ä¸Šçš„æ¥å£</td></tr></tbody></table>
<h3 data-id="heading-3">ä¸‰ã€ç»„ä»¶ (Component) - Vue çš„åŸºçŸ³</h3>
<h4 data-id="heading-4">å®šä¹‰ä¸æ ¸å¿ƒç‰¹å¾</h4>
<p><strong>ç»„ä»¶æ˜¯ Vue åº”ç”¨çš„æ„å»ºå—</strong>ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯è‡ªåŒ…å«çš„ã€å¯å¤ç”¨çš„ Vue å®ä¾‹ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- UserCard.vue - ç»„ä»¶ç¤ºä¾‹ --&gt;
&lt;template&gt;
  &lt;div class="user-card"&gt;
    &lt;img :src="avatar" alt="ç”¨æˆ·å¤´åƒ" /&gt;
    &lt;h3&gt;{{ name }}&lt;/h3&gt;
    &lt;p&gt;{{ bio }}&lt;/p&gt;
    &lt;!-- ä½¿ç”¨æ’æ§½æä¾›æ‰©å±•ç‚¹ --&gt;
    &lt;slot name="actions"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  // ç»„ä»¶å®šä¹‰
  name: 'UserCard',
  props: {
    name: String,
    avatar: String,
    bio: String
  },
  // å±€éƒ¨çŠ¶æ€
  data() {
    return {
      isActive: false
    }
  },
  // ç”Ÿå‘½å‘¨æœŸ
  mounted() {
    console.log('ç»„ä»¶å·²æŒ‚è½½')
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.user-card {
  border: 1px solid #ccc;
  padding: 20px;
}
&lt;/style&gt;
</code></pre>
<h4 data-id="heading-5">ç»„ä»¶çš„æ ¸å¿ƒèƒ½åŠ›ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ç»„ä»¶æ³¨å†Œ</span>
<span class="hljs-comment">// å…¨å±€æ³¨å†Œ</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">'global-component'</span>, {
  <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;div&gt;å…¨å±€ç»„ä»¶&lt;/div&gt;'</span>
})

<span class="hljs-comment">// å±€éƒ¨æ³¨å†Œ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">LocalComponent</span> = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;div&gt;å±€éƒ¨ç»„ä»¶&lt;/div&gt;'</span>
}

<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  <span class="hljs-attr">components</span>: {
    <span class="hljs-string">'local-component'</span>: <span class="hljs-title class_">LocalComponent</span>
  }
})

<span class="hljs-comment">// 2. ç»„ä»¶é€šä¿¡ä½“ç³»</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ParentComponent</span> = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;child-component 
      :title="parentTitle" 
      @child-event="handleChildEvent"
    /&gt;
  `</span>,
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">handleChildEvent</span>(<span class="hljs-params">payload</span>) {
      <span class="hljs-comment">// å¤„ç†å­ç»„ä»¶äº‹ä»¶</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-6">å››ã€æ’ä»¶ (Plugin) - Vue çš„æ‰©å±•ç³»ç»Ÿ</h3>
<h4 data-id="heading-7">å®šä¹‰ä¸æ ¸å¿ƒç‰¹å¾</h4>
<p><strong>æ’ä»¶æ˜¯å¯¹ Vue çš„å…¨å±€å¢å¼º</strong>ï¼Œç”¨äºæ·»åŠ å…¨å±€çº§çš„åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// my-plugin.js - è‡ªå®šä¹‰æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyPlugin</span> = {
  <span class="hljs-title function_">install</span>(<span class="hljs-params">Vue, options</span>) {
    <span class="hljs-comment">// 1. æ·»åŠ å…¨å±€æ–¹æ³•æˆ–å±æ€§</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">myGlobalMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨å±€æ–¹æ³•'</span>)
    }
    
    <span class="hljs-comment">// 2. æ·»åŠ å…¨å±€èµ„æºï¼ˆæŒ‡ä»¤/è¿‡æ»¤å™¨/ç»„ä»¶ï¼‰</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'my-directive'</span>, {
      <span class="hljs-title function_">bind</span>(<span class="hljs-params">el, binding</span>) {
        <span class="hljs-comment">// æŒ‡ä»¤é€»è¾‘</span>
      }
    })
    
    <span class="hljs-comment">// 3. æ³¨å…¥ç»„ä»¶é€‰é¡¹</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>({
      <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‰€æœ‰ç»„ä»¶éƒ½ä¼šæ‰§è¡Œ'</span>)
      }
    })
    
    <span class="hljs-comment">// 4. æ·»åŠ å®ä¾‹æ–¹æ³•</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$myMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä¾‹æ–¹æ³•'</span>)
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨æ’ä»¶</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">MyPlugin</span>, { <span class="hljs-attr">someOption</span>: <span class="hljs-literal">true</span> })
</code></pre>
<h4 data-id="heading-8">å¸¸è§æ’ä»¶ç±»å‹ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. UI ç»„ä»¶åº“æ’ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'element-ui'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'element-ui/lib/theme-chalk/index.css'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementUI</span>)

<span class="hljs-comment">// 2. åŠŸèƒ½å¢å¼ºæ’ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vuex'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-comment">// 3. å·¥å…·ç±»æ’ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueLazyload</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-lazyload'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueLazyload</span>, {
  <span class="hljs-attr">loading</span>: <span class="hljs-string">'/loading.gif'</span>
})
</code></pre>
<h4 data-id="heading-9">æ’ä»¶ vs ç»„ä»¶çš„å…³é”®å·®å¼‚ï¼š</h4>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>ç»„ä»¶</th><th>æ’ä»¶</th></tr></thead><tbody><tr><td><strong>ä½œç”¨èŒƒå›´</strong></td><td>å±€éƒ¨ï¼ˆéœ€è¦æ˜¾å¼å¼•å…¥ï¼‰</td><td>å…¨å±€ï¼ˆä¸€æ¬¡é…ç½®ï¼Œå¤„å¤„å¯ç”¨ï¼‰</td></tr><tr><td><strong>ä¸»è¦ç›®çš„</strong></td><td>æ„å»º UI ç•Œé¢</td><td>å¢å¼º Vue æœ¬èº«çš„èƒ½åŠ›</td></tr><tr><td><strong>ä½¿ç”¨é¢‘ç‡</strong></td><td>é«˜é¢‘ç‡ã€å¤šæ¬¡ä½¿ç”¨</td><td>ä¸€æ¬¡æ€§é…ç½®</td></tr><tr><td><strong>å…¸å‹ç¤ºä¾‹</strong></td><td>Buttonã€Modalã€Form</td><td>Routerã€Vuexã€i18n</td></tr></tbody></table>
<h3 data-id="heading-10">äº”ã€æ’æ§½ (Slot) - ç»„ä»¶çš„çµæ´»æ‰©å±•ç‚¹</h3>
<h4 data-id="heading-11">å®šä¹‰ä¸æ ¸å¿ƒç‰¹å¾</h4>
<p><strong>æ’æ§½æ˜¯ç»„ä»¶çš„å†…å®¹åˆ†å‘å‡ºå£</strong>ï¼Œè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’æ¨¡æ¿å†…å®¹ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- BaseLayout.vue - åŒ…å«æ’æ§½çš„ç»„ä»¶ --&gt;
&lt;template&gt;
  &lt;div class="container"&gt;
    &lt;header&gt;
      &lt;!-- å…·åæ’æ§½ --&gt;
      &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;/header&gt;
    
    &lt;main&gt;
      &lt;!-- é»˜è®¤æ’æ§½ --&gt;
      &lt;slot&gt;
        &lt;!-- åå¤‡å†…å®¹ï¼ˆå½“çˆ¶ç»„ä»¶ä¸æä¾›å†…å®¹æ—¶æ˜¾ç¤ºï¼‰ --&gt;
        &lt;p&gt;é»˜è®¤å†…å®¹&lt;/p&gt;
      &lt;/slot&gt;
    &lt;/main&gt;
    
    &lt;footer&gt;
      &lt;slot name="footer"&gt;&lt;/slot&gt;
    &lt;/footer&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-12">æ’æ§½çš„ä¸‰ç§ç±»å‹ï¼š</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- çˆ¶ç»„ä»¶ä½¿ç”¨ --&gt;
&lt;template&gt;
  &lt;BaseLayout&gt;
    &lt;!-- å…·åæ’æ§½ --&gt;
    &lt;template v-slot:header&gt;
      &lt;h1&gt;é¡µé¢æ ‡é¢˜&lt;/h1&gt;
    &lt;/template&gt;
    
    &lt;!-- é»˜è®¤æ’æ§½ï¼ˆç®€å†™ï¼‰ --&gt;
    &lt;p&gt;ä¸»è¦å†…å®¹åŒºåŸŸ&lt;/p&gt;
    &lt;p&gt;è¿™æ˜¯é»˜è®¤æ’æ§½çš„å†…å®¹&lt;/p&gt;
    
    &lt;!-- ä½œç”¨åŸŸæ’æ§½ --&gt;
    &lt;template v-slot:footer="slotProps"&gt;
      &lt;p&gt;é¡µè„š: {{ slotProps.year }} å¹´&lt;/p&gt;
    &lt;/template&gt;
    
    &lt;!-- åŠ¨æ€æ’æ§½å --&gt;
    &lt;template v-slot:[dynamicSlotName]&gt;
      åŠ¨æ€å†…å®¹
    &lt;/template&gt;
  &lt;/BaseLayout&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-13">ä½œç”¨åŸŸæ’æ§½ï¼ˆé«˜çº§æ¨¡å¼ï¼‰ï¼š</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- TodoList.vue --&gt;
&lt;template&gt;
  &lt;ul&gt;
    &lt;li v-for="todo in todos" :key="todo.id"&gt;
      &lt;!-- ä½œç”¨åŸŸæ’æ§½ï¼šå‘çˆ¶ç»„ä»¶æš´éœ²æ•°æ® --&gt;
      &lt;slot :todo="todo" :index="index"&gt;
        &lt;!-- é»˜è®¤æ˜¾ç¤º --&gt;
        {{ todo.text }}
      &lt;/slot&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/template&gt;

&lt;!-- çˆ¶ç»„ä»¶æ¥æ”¶æ•°æ® --&gt;
&lt;template&gt;
  &lt;TodoList :todos="todos"&gt;
    &lt;template v-slot:default="slotProps"&gt;
      &lt;span :class="{ completed: slotProps.todo.done }"&gt;
        {{ slotProps.index + 1 }}. {{ slotProps.todo.text }}
      &lt;/span&gt;
    &lt;/template&gt;
  &lt;/TodoList&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-14">å…­ã€ä¸‰è€…ååŒå·¥ä½œçš„å®Œæ•´ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®æˆ˜é¡¹ç›®ç†è§£ä¸‰è€…å¦‚ä½•ååŒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. é¦–å…ˆå®‰è£…è·¯ç”±æ’ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)  <span class="hljs-comment">// ğŸ”´ æ’ä»¶ï¼šå…¨å±€å¯ç”¨è·¯ç”±åŠŸèƒ½</span>

<span class="hljs-comment">// 2. å®šä¹‰å¯å¤ç”¨çš„å¸ƒå±€ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">AppLayout</span> = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div class="app-layout"&gt;
      &lt;slot name="navbar"&gt;&lt;/slot&gt;
      &lt;div class="content"&gt;
        &lt;!-- é»˜è®¤æ’æ§½ç”¨äºæ˜¾ç¤ºé¡µé¢å†…å®¹ --&gt;
        &lt;slot&gt;&lt;/slot&gt;
      &lt;/div&gt;
      &lt;slot name="footer"&gt;&lt;/slot&gt;
    &lt;/div&gt;
  `</span>
}

<span class="hljs-comment">// 3. åˆ›å»ºé¡µé¢ç»„ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HomePage</span> = {
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;AppLayout&gt;
      &lt;template v-slot:navbar&gt;
        &lt;!-- å‘å¸ƒå±€ç»„ä»¶ä¼ é€’è‡ªå®šä¹‰å¯¼èˆªæ  --&gt;
        &lt;NavBar title="é¦–é¡µ" /&gt;
      &lt;/template&gt;
      
      &lt;!-- é»˜è®¤æ’æ§½å†…å®¹ --&gt;
      &lt;h1&gt;æ¬¢è¿è®¿é—®&lt;/h1&gt;
      &lt;ProductList&gt;
        &lt;!-- ä½œç”¨åŸŸæ’æ§½è‡ªå®šä¹‰äº§å“æ˜¾ç¤º --&gt;
        &lt;template v-slot:product="props"&gt;
          &lt;ProductCard :product="props.product" /&gt;
        &lt;/template&gt;
      &lt;/ProductList&gt;
      
      &lt;template v-slot:footer&gt;
        &lt;AppFooter /&gt;
      &lt;/template&gt;
    &lt;/AppLayout&gt;
  `</span>,
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">AppLayout</span>,      <span class="hljs-comment">// ğŸ”µ ç»„ä»¶ï¼šå¸ƒå±€ç»„ä»¶</span>
    <span class="hljs-title class_">NavBar</span>,         <span class="hljs-comment">// ğŸ”µ ç»„ä»¶ï¼šå¯¼èˆªæ ç»„ä»¶</span>
    <span class="hljs-title class_">ProductList</span>,    <span class="hljs-comment">// ğŸ”µ ç»„ä»¶ï¼šäº§å“åˆ—è¡¨</span>
    <span class="hljs-title class_">ProductCard</span>,    <span class="hljs-comment">// ğŸ”µ ç»„ä»¶ï¼šäº§å“å¡ç‰‡</span>
    <span class="hljs-title class_">AppFooter</span>       <span class="hljs-comment">// ğŸ”µ ç»„ä»¶ï¼šé¡µè„šç»„ä»¶</span>
  }
}

<span class="hljs-comment">// 4. é…ç½®è·¯ç”±ï¼ˆä½¿ç”¨æ’ä»¶æä¾›çš„åŠŸèƒ½ï¼‰</span>
<span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>({
  <span class="hljs-attr">routes</span>: [
    {
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>,
      <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomePage</span>  <span class="hljs-comment">// ä½¿ç”¨ç»„ä»¶ä½œä¸ºè·¯ç”±é¡µé¢</span>
    }
  ]
})

<span class="hljs-comment">// 5. åˆ›å»ºVueå®ä¾‹</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
  router,  <span class="hljs-comment">// ğŸ”´ æ’ä»¶æä¾›çš„è·¯ç”±å®ä¾‹</span>
  <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;router-view&gt;&lt;/router-view&gt;'</span>  <span class="hljs-comment">// ğŸŸ¡ æ’æ§½ï¼šè·¯ç”±è§†å›¾å ä½</span>
}).$mount(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-15">ä¸ƒã€è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-16">ä½•æ—¶ä½¿ç”¨ä»€ä¹ˆï¼Ÿ</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[éœ€æ±‚åˆ†æ] --&gt; B{éœ€è¦ä»€ä¹ˆ?}
    
    B --&gt;|æ„å»ºUIç•Œé¢| C[ä½¿ç”¨ç»„ä»¶]
    B --&gt;|å…¨å±€åŠŸèƒ½æ‰©å±•| D[ä½¿ç”¨æ’ä»¶]
    B --&gt;|è‡ªå®šä¹‰ç»„ä»¶å†…å®¹| E[ä½¿ç”¨æ’æ§½]
    
    C --&gt; F{ç»„ä»¶éœ€è¦çµæ´»æ€§?}
    F --&gt;|æ˜¯| G[åœ¨ç»„ä»¶ä¸­æ·»åŠ æ’æ§½]
    F --&gt;|å¦| H[åˆ›å»ºå®Œæ•´ç»„ä»¶]
    
    D --&gt; I{åŠŸèƒ½éœ€è¦å¤ç”¨?}
    I --&gt;|æ˜¯| J[å¼€å‘ä¸ºæ’ä»¶]
    I --&gt;|å¦| K[ä½¿ç”¨å±€éƒ¨æ··å…¥]
</code></pre>
<h4 data-id="heading-17">ç»„ä»¶è®¾è®¡åŸåˆ™ï¼š</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- å¥½çš„ç»„ä»¶è®¾è®¡ç¤ºä¾‹ --&gt;
&lt;template&gt;
  &lt;!-- æä¾›æ¸…æ™°çš„æ’æ§½æ¥å£ --&gt;
  &lt;div class="card"&gt;
    &lt;div class="card-header" v-if="$slots.header"&gt;
      &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;/div&gt;
    
    &lt;div class="card-body"&gt;
      &lt;slot&gt;
        &lt;!-- åˆç†çš„é»˜è®¤å†…å®¹ --&gt;
        &lt;p&gt;æš‚æ— å†…å®¹&lt;/p&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
    
    &lt;!-- ä½œç”¨åŸŸæ’æ§½æä¾›æ•°æ® --&gt;
    &lt;div class="card-footer" v-if="$slots.footer"&gt;
      &lt;slot name="footer" :data="footerData"&gt;&lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-18">æ’ä»¶å¼€å‘è§„èŒƒï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‰¯å¥½çš„æ’ä»¶ç»“æ„</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">WellDesignedPlugin</span> = {
  <span class="hljs-title function_">install</span>(<span class="hljs-params">Vue, options = {}</span>) {
    <span class="hljs-comment">// 1. å‚æ•°éªŒè¯</span>
    <span class="hljs-keyword">if</span> (!options.<span class="hljs-property">requiredConfig</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ’ä»¶éœ€è¦é…ç½® requiredConfig'</span>)
    }
    
    <span class="hljs-comment">// 2. å®‰å…¨çš„å…¨å±€æ‰©å±•</span>
    <span class="hljs-keyword">const</span> version = <span class="hljs-title class_">Number</span>(<span class="hljs-title class_">Vue</span>.<span class="hljs-property">version</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>)[<span class="hljs-number">0</span>])
    <span class="hljs-keyword">if</span> (version &gt;= <span class="hljs-number">2</span>) {
      <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$safeMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å…¼å®¹æ€§å¤„ç†</span>
      }
    }
    
    <span class="hljs-comment">// 3. æä¾›å¸è½½æ–¹æ³•</span>
    <span class="hljs-keyword">const</span> originalDestroy = <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$destroy</span>
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$destroy</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// æ¸…ç†é€»è¾‘</span>
      originalDestroy.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>)
    }
  }
}
</code></pre>
<h3 data-id="heading-19">å…«ã€å¸¸è§è¯¯åŒºä¸æ¾„æ¸…</h3>
<h4 data-id="heading-20">è¯¯åŒº1ï¼šæ’ä»¶å¯ä»¥æ›¿ä»£ç»„ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç”¨æ’ä»¶å®ç°UIç»„ä»¶</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>({
  <span class="hljs-title function_">install</span>(<span class="hljs-params">Vue</span>) {
    <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$showModal</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">content</span>) {
      <span class="hljs-comment">// è¿™åº”è¯¥æ˜¯ç»„ä»¶ï¼Œä¸æ˜¯æ’ä»¶</span>
    }
  }
})

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šç»„ä»¶å®ç°UIï¼Œæ’ä»¶å°è£…å·¥å…·</span>
<span class="hljs-comment">// Modal.vue - ä½œä¸ºç»„ä»¶</span>
<span class="hljs-comment">// modal-plugin.js - å¦‚æœéœ€è¦å…¨å±€è°ƒç”¨ï¼Œå¯ä»¥åŒ…è£…ä¸ºæ’ä»¶</span>
</code></pre>
<h4 data-id="heading-21">è¯¯åŒº2ï¼šæ’æ§½å°±æ˜¯å­ç»„ä»¶</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- âŒ è¯¯è§£ï¼šæ’æ§½æ˜¯å­ç»„ä»¶ --&gt;
&lt;Parent&gt;
  &lt;Child /&gt;  &lt;!-- è¿™æ˜¯ç»„ä»¶ï¼Œä¸æ˜¯æ’æ§½å†…å®¹ --&gt;
&lt;/Parent&gt;

&lt;!-- âœ… æ­£ç¡®ç†è§£ --&gt;
&lt;Parent&gt;
  &lt;!-- è¿™æ˜¯æ’æ§½å†…å®¹ï¼Œä¼šè¢«åˆ†å‘åˆ°Parentçš„&lt;slot&gt;ä½ç½® --&gt;
  &lt;template v-slot:default&gt;
    &lt;Child /&gt;
  &lt;/template&gt;
&lt;/Parent&gt;
</code></pre>
<h4 data-id="heading-22">è¯¯åŒº3ï¼šè¿‡åº¦ä½¿ç”¨æ··å…¥ï¼ˆMixinï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ è¿‡åº¦ä½¿ç”¨ï¼šåº”è¯¥ç”¨æ’æ§½æˆ–ç»„åˆå¼APIä»£æ›¿</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>({
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">globalData</span>: <span class="hljs-string">'åº”è¯¥é¿å…'</span>
    }
  }
})

<span class="hljs-comment">// âœ… æ›´å¥½çš„æ–¹å¼ï¼šç»„åˆå¼å‡½æ•°ï¼ˆVue 3ï¼‰</span>
<span class="hljs-comment">// æˆ–ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½ä¼ é€’æ•°æ®</span>
</code></pre>
<h3 data-id="heading-23">ä¹ã€Vue 3 ä¸­çš„æ¼”è¿›</h3>
<h4 data-id="heading-24">ç»„åˆå¼ API çš„å½±å“ï¼š</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- Vue 3 ä¸­ä¸‰è€…å…³ç³»æ›´åŠ æ¸…æ™° --&gt;
&lt;script setup&gt;
// 1. ç»„ä»¶ - æ›´ç®€æ´çš„å®šä¹‰
import { defineComponent } from 'vue'

// 2. æ’ä»¶ - é€šè¿‡ provide/inject æ›´å¥½åœ°é›†æˆ
import { provide } from 'vue'
provide('pluginData', data)

// 3. æ’æ§½ - æ›´çµæ´»çš„ç”¨æ³•
defineProps(['modelValue'])
defineEmits(['update:modelValue'])
&lt;/script&gt;

&lt;template&gt;
  &lt;!-- æ’æ§½ä½œç”¨åŸŸè§£æ„ --&gt;
  &lt;slot name="item" v-bind="{ id, name }"&gt;&lt;/slot&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-25">åã€æ€»ç»“ï¼šä¸‰ä½ä¸€ä½“çš„ Vue æ¶æ„</h3>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>è§’è‰²</th><th>å…³é”®ç‰¹å¾</th><th>æœ€ä½³å®è·µ</th></tr></thead><tbody><tr><td><strong>ç»„ä»¶</strong></td><td>æ„å»ºè€…</td><td>å±€éƒ¨ä½œç”¨åŸŸã€props/eventsæ¥å£ã€å¯å¤ç”¨</td><td>å•ä¸€èŒè´£ã€åˆç†æ‹†åˆ†ã€æ˜ç¡®æ¥å£</td></tr><tr><td><strong>æ’ä»¶</strong></td><td>å¢å¼ºè€…</td><td>å…¨å±€ä½œç”¨åŸŸã€ä¸€æ¬¡é…ç½®ã€åŠŸèƒ½æ‰©å±•</td><td>è½»é‡å°è£…ã€æä¾›é€‰é¡¹ã€è‰¯å¥½æ–‡æ¡£</td></tr><tr><td><strong>æ’æ§½</strong></td><td>è¿æ¥è€…</td><td>å†…å®¹åˆ†å‘ã€æ¨¡æ¿ç»„åˆã€ä½œç”¨åŸŸæš´éœ²</td><td>æ˜ç¡®å‘½åã€æä¾›åå¤‡ã€ä½œç”¨åŸŸæ•°æ®</td></tr></tbody></table>
<p><strong>è®°ä½è¿™ä¸ªæ ¸å¿ƒå…¬å¼ï¼š</strong></p>
<blockquote>
<p><strong>åº”ç”¨ = æ’ä»¶å¢å¼ºçš„Vueå®ä¾‹ + ç»„ä»¶æ„å»ºçš„UIæ ‘ + æ’æ§½è¿æ¥çš„ç»„ä»¶å…³ç³»</strong></p>
</blockquote>
<h4 data-id="heading-26">æœ€ç»ˆå†³ç­–æŒ‡å—ï¼š</h4>
<ol>
<li>
<p><strong>å½“ä½ éœ€è¦...</strong></p>
<ul>
<li><strong>å¤ç”¨UIç‰‡æ®µ</strong> â†’ åˆ›å»ºç»„ä»¶</li>
<li><strong>æ·»åŠ å…¨å±€åŠŸèƒ½</strong> â†’ å¼€å‘æ’ä»¶</li>
<li><strong>è‡ªå®šä¹‰ç»„ä»¶å†…éƒ¨ç»“æ„</strong> â†’ ä½¿ç”¨æ’æ§½</li>
</ul>
</li>
<li>
<p><strong>åœ¨æ¶æ„ä¸­...</strong></p>
<ul>
<li>æ’ä»¶åœ¨æœ€å¤–å±‚é…ç½®å…¨å±€èƒ½åŠ›</li>
<li>ç»„ä»¶åœ¨ä¸­é—´å±‚æ„å»ºåŠŸèƒ½æ¨¡å—</li>
<li>æ’æ§½åœ¨æœ€å†…å±‚å®ç°çµæ´»å®šåˆ¶</li>
</ul>
</li>
<li>
<p><strong>è¿›åŒ–æ–¹å‘...</strong></p>
<ul>
<li>Vue 2ï¼šOptions API + ä¸‰è€…åˆ†æ˜</li>
<li>Vue 3ï¼šComposition API + æ›´çµæ´»çš„ç»„åˆ</li>
</ul>
</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue Watch ç«‹å³æ‰§è¡Œï¼š5 ç§åˆå§‹åŒ–è°ƒç”¨æ–¹æ¡ˆå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7594682922683727881</link>    <guid>https://juejin.cn/post/7594682922683727881</guid>    <pubDate>2026-01-13T14:29:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594682922683727881" data-draft-id="7594657393830690854" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue Watch ç«‹å³æ‰§è¡Œï¼š5 ç§åˆå§‹åŒ–è°ƒç”¨æ–¹æ¡ˆå…¨è§£æ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:29:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue Watch ç«‹å³æ‰§è¡Œï¼š5 ç§åˆå§‹åŒ–è°ƒç”¨æ–¹æ¡ˆå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:29:20.000Z" title="Tue Jan 13 2026 14:29:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue Watch ç«‹å³æ‰§è¡Œï¼š5 ç§åˆå§‹åŒ–è°ƒç”¨æ–¹æ¡ˆå…¨è§£æ</h2>
<blockquote>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶å°±éœ€è¦ç«‹å³æ‰§è¡Œ watch é€»è¾‘çš„åœºæ™¯ï¼Ÿæœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Vue ä¸­ watch çš„ç«‹å³æ‰§è¡Œæœºåˆ¶ï¼Œå¹¶æä¾› 5 ç§å®ç”¨æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ç«‹å³æ‰§è¡Œ watchï¼Ÿ</h3>
<p>åœ¨ Vue å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">userId</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">userData</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">filters</span>: {
        <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span>,
        <span class="hljs-attr">sortBy</span>: <span class="hljs-string">'name'</span>
      },
      <span class="hljs-attr">filteredUsers</span>: []
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// éœ€è¦ç»„ä»¶åˆå§‹åŒ–æ—¶å°±æ‰§è¡Œä¸€æ¬¡</span>
    <span class="hljs-string">'filters.status'</span>() {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUsers</span>()
    },
    
    <span class="hljs-string">'filters.sortBy'</span>() {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sortUsers</span>()
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æˆ‘ä»¬æœŸæœ›ï¼šåˆå§‹åŒ–æ—¶è‡ªåŠ¨åº”ç”¨ filters çš„é»˜è®¤å€¼</span>
    <span class="hljs-comment">// ä½†é»˜è®¤çš„ watch ä¸ä¼šç«‹å³æ‰§è¡Œ</span>
  }
}
</code></pre>
<h3 data-id="heading-2">äºŒã€è§£å†³æ–¹æ¡ˆå¯¹æ¯”è¡¨</h3>















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>Vue ç‰ˆæœ¬</th></tr></thead><tbody><tr><td><strong>1. immediate é€‰é¡¹</strong></td><td>ç®€å•ç›‘å¬</td><td>åŸç”Ÿæ”¯æŒï¼Œæœ€ç®€æ´</td><td>æ— æ³•å¤ç”¨é€»è¾‘</td><td>2+</td></tr><tr><td><strong>2. æå–ä¸ºæ–¹æ³•</strong></td><td>å¤æ‚é€»è¾‘å¤ç”¨</td><td>é€»è¾‘å¯å¤ç”¨ï¼Œæ¸…æ™°</td><td>éœ€è¦æ‰‹åŠ¨è°ƒç”¨</td><td>2+</td></tr><tr><td><strong>3. è®¡ç®—å±æ€§</strong></td><td>æ´¾ç”Ÿæ•°æ®</td><td>å“åº”å¼ï¼Œè‡ªåŠ¨æ›´æ–°</td><td>ä¸é€‚åˆå‰¯ä½œç”¨</td><td>2+</td></tr><tr><td><strong>4. è‡ªå®šä¹‰ Hook</strong></td><td>å¤æ‚ä¸šåŠ¡é€»è¾‘</td><td>é«˜åº¦å¤ç”¨ï¼Œå¯ç»„åˆ</td><td>éœ€è¦é¢å¤–å°è£…</td><td>2+ (Vue 3 æœ€ä½³)</td></tr><tr><td><strong>5. ä¾¦å¬å™¨å·¥å‚</strong></td><td>å¤šä¸ªç›¸ä¼¼ç›‘å¬</td><td>å‡å°‘é‡å¤ä»£ç </td><td>æœ‰ä¸€å®šå¤æ‚åº¦</td><td>2+</td></tr></tbody></table>
<h3 data-id="heading-3">ä¸‰ã€5 ç§è§£å†³æ–¹æ¡ˆè¯¦è§£</h3>
<h4 data-id="heading-4">æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ <code>immediate: true</code>ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">searchQuery</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">searchResults</span>: [],
      <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// åŸºç¡€ç”¨æ³•ï¼šç«‹å³æ‰§è¡Œ + æ·±åº¦ç›‘å¬</span>
    <span class="hljs-attr">searchQuery</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal, oldVal</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">performSearch</span>(newVal)
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// âœ… ç»„ä»¶åˆ›å»ºæ—¶ç«‹å³æ‰§è¡Œ</span>
      <span class="hljs-attr">deep</span>: <span class="hljs-literal">false</span>         <span class="hljs-comment">// é»˜è®¤å€¼ï¼Œå¯æ ¹æ®éœ€è¦å¼€å¯</span>
    },
    
    <span class="hljs-comment">// ç›‘å¬å¯¹è±¡å±æ€§</span>
    <span class="hljs-string">'filters.status'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newStatus</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyFilter</span>(newStatus)
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    },
    
    <span class="hljs-comment">// ç›‘å¬å¤šä¸ªæºï¼ˆVue 2.6+ï¼‰</span>
    <span class="hljs-string">'$route.query'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">query</span>) {
        <span class="hljs-comment">// è·¯ç”±å˜åŒ–æ—¶åˆå§‹åŒ–æ•°æ®</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initFromQuery</span>(query)
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    }
  },
  
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">performSearch</span>(<span class="hljs-params">query</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchResults</span> = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">search</span>(query)
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœç´¢å¤±è´¥:'</span>, error)
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
      }
    },
    
    <span class="hljs-title function_">initFromQuery</span>(<span class="hljs-params">query</span>) {
      <span class="hljs-comment">// ä» URL å‚æ•°åˆå§‹åŒ–çŠ¶æ€</span>
      <span class="hljs-keyword">if</span> (query.<span class="hljs-property">search</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchQuery</span> = query.<span class="hljs-property">search</span>
      }
    }
  }
}
</code></pre>
<p><strong>è¿›é˜¶æŠ€å·§ï¼šåŠ¨æ€ immediate</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">shouldWatchImmediately</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-string">''</span>
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-attr">value</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleValueChange</span>(newVal)
      },
      <span class="hljs-comment">// åŠ¨æ€å†³å®šæ˜¯å¦ç«‹å³æ‰§è¡Œ</span>
      <span class="hljs-title function_">immediate</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">shouldWatchImmediately</span>
      }
    }
  }
}
</code></pre>
<h4 data-id="heading-5">æ–¹æ¡ˆ 2ï¼šæå–ä¸ºæ–¹æ³•å¹¶æ‰‹åŠ¨è°ƒç”¨ï¼ˆæœ€çµæ´»ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">pageSize</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>
      },
      <span class="hljs-attr">items</span>: []
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// âœ… ç«‹å³è°ƒç”¨ä¸€æ¬¡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handlePaginationChange</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>)
    
    <span class="hljs-comment">// åŒæ—¶è®¾ç½® watch</span>
    <span class="hljs-variable language_">this</span>.$watch(
      <span class="hljs-function">() =&gt;</span> ({ ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span> }),
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePaginationChange</span>,
      { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> }
    )
  },
  
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">handlePaginationChange</span>(<span class="hljs-params">newPagination, oldPagination</span>) {
      <span class="hljs-comment">// é¿å…åˆå§‹åŒ–æ—¶é‡å¤è°ƒç”¨ï¼ˆå¦‚æœ created ä¸­å·²è°ƒç”¨ï¼‰</span>
      <span class="hljs-keyword">if</span> (oldPagination === <span class="hljs-literal">undefined</span>) {
        <span class="hljs-comment">// è¿™æ˜¯åˆå§‹åŒ–è°ƒç”¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹åŒ–åŠ è½½æ•°æ®'</span>)
      }
      
      <span class="hljs-comment">// é˜²æŠ–å¤„ç†</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">loadDebounce</span>) {
        <span class="hljs-built_in">clearTimeout</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">loadDebounce</span>)
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadDebounce</span> = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getItems</span>({
            <span class="hljs-attr">page</span>: newPagination.<span class="hljs-property">page</span>,
            <span class="hljs-attr">pageSize</span>: newPagination.<span class="hljs-property">pageSize</span>
          })
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span> = response.<span class="hljs-property">data</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">total</span> = response.<span class="hljs-property">total</span>
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½å¤±è´¥:'</span>, error)
        } <span class="hljs-keyword">finally</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">loading</span> = <span class="hljs-literal">false</span>
        }
      }, <span class="hljs-number">300</span>)
    }
  }
}
</code></pre>
<p><strong>ä¼˜åŠ¿å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é‡å¤é€»è¾‘</span>
<span class="hljs-attr">watch</span>: {
  <span class="hljs-attr">pagination</span>: {
    <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>() },
    <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">filters</span>: {
    <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>) { <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>() },  <span class="hljs-comment">// é‡å¤çš„ loadData è°ƒç”¨</span>
    <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>
  }
}

<span class="hljs-comment">// âœ… æå–æ–¹æ³•ï¼Œå¤ç”¨é€»è¾‘</span>
<span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>()  <span class="hljs-comment">// åˆå§‹åŒ–è°ƒç”¨</span>
  
  <span class="hljs-comment">// å¤šä¸ªç›‘å¬å¤ç”¨åŒä¸€æ–¹æ³•</span>
  <span class="hljs-variable language_">this</span>.$watch(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadData</span>, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
  <span class="hljs-variable language_">this</span>.$watch(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">filters</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">loadData</span>, { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> })
}
</code></pre>
<h4 data-id="heading-6">æ–¹æ¡ˆ 3ï¼šè®¡ç®—å±æ€§æ›¿ä»£ï¼ˆé€‚åˆæ´¾ç”Ÿæ•°æ®ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">basePrice</span>: <span class="hljs-number">100</span>,
      <span class="hljs-attr">taxRate</span>: <span class="hljs-number">0.08</span>,
      <span class="hljs-attr">discount</span>: <span class="hljs-number">10</span>
    }
  },
  
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// è®¡ç®—å±æ€§è‡ªåŠ¨å“åº”ä¾èµ–å˜åŒ–</span>
    <span class="hljs-title function_">finalPrice</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> priceWithTax = <span class="hljs-variable language_">this</span>.<span class="hljs-property">basePrice</span> * (<span class="hljs-number">1</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">taxRate</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, priceWithTax - <span class="hljs-variable language_">this</span>.<span class="hljs-property">discount</span>)
    },
    
    <span class="hljs-comment">// å¤æ‚è®¡ç®—åœºæ™¯</span>
    <span class="hljs-title function_">formattedReport</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è¿™é‡Œä¼šç«‹å³æ‰§è¡Œï¼Œå¹¶è‡ªåŠ¨å“åº” basePriceã€taxRateã€discount çš„å˜åŒ–</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">base</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">basePrice</span>,
        <span class="hljs-attr">tax</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">basePrice</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">taxRate</span>,
        <span class="hljs-attr">discount</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">discount</span>,
        <span class="hljs-attr">total</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">finalPrice</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      }
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è®¡ç®—å±æ€§åœ¨ created ä¸­å·²å¯ç”¨</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹ä»·æ ¼:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">finalPrice</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹æŠ¥å‘Š:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">formattedReport</span>)
    
    <span class="hljs-comment">// å¦‚æœéœ€è¦æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¦‚ API è°ƒç”¨ï¼‰ï¼Œä»éœ€è¦ watch</span>
    <span class="hljs-variable language_">this</span>.$watch(
      <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">finalPrice</span>,
      <span class="hljs-function">(<span class="hljs-params">newPrice</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">logPriceChange</span>(newPrice)
      },
      { <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
    )
  }
}
</code></pre>
<h4 data-id="heading-7">æ–¹æ¡ˆ 4ï¼šè‡ªå®šä¹‰ Hook/Composableï¼ˆVue 3 æœ€ä½³å®è·µï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// composables/useWatcher.js</span>
<span class="hljs-keyword">import</span> { watch, ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useImmediateWatcher</span>(<span class="hljs-params">source, callback, options = {}</span>) {
  <span class="hljs-keyword">const</span> { immediate = <span class="hljs-literal">true</span>, ...watchOptions } = options
  
  <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
  <span class="hljs-keyword">if</span> (immediate) {
    <span class="hljs-title function_">callback</span>(source.<span class="hljs-property">value</span>, <span class="hljs-literal">undefined</span>)
  }
  
  <span class="hljs-comment">// è®¾ç½®ç›‘å¬</span>
  <span class="hljs-title function_">watch</span>(source, callback, watchOptions)
  
  <span class="hljs-comment">// è¿”å›æ¸…ç†å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¦‚æœéœ€è¦ï¼Œå¯ä»¥è¿”å›æ¸…ç†é€»è¾‘</span>
  }
}

<span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useImmediateWatcher } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/composables/useWatcher'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> searchQuery = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
    <span class="hljs-keyword">const</span> filters = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span> })
    
    <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ Hook</span>
    <span class="hljs-title function_">useImmediateWatcher</span>(
      searchQuery,
      <span class="hljs-keyword">async</span> (newQuery) =&gt; {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">performSearch</span>(newQuery)
      },
      { <span class="hljs-attr">debounce</span>: <span class="hljs-number">300</span> }
    )
    
    <span class="hljs-title function_">useImmediateWatcher</span>(
      filters,
      <span class="hljs-function">(<span class="hljs-params">newFilters</span>) =&gt;</span> {
        <span class="hljs-title function_">applyFilters</span>(newFilters)
      },
      { <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
    )
    
    <span class="hljs-keyword">return</span> {
      searchQuery,
      filters
    }
  }
}
</code></pre>
<p><strong>Vue 2 ç‰ˆæœ¬çš„ Mixin å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// mixins/immediateWatcher.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> immediateWatcherMixin = {
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_immediateWatchers</span> = []
  },
  
  <span class="hljs-attr">methods</span>: {
    $watchImmediate(expOrFn, callback, options = {}) {
      <span class="hljs-comment">// ç«‹å³æ‰§è¡Œä¸€æ¬¡</span>
      <span class="hljs-keyword">const</span> unwatch = <span class="hljs-variable language_">this</span>.$watch(
        expOrFn,
        <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
          <span class="hljs-title function_">callback</span>(...args)
        },
        { ...options, <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> }
      )
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">_immediateWatchers</span>.<span class="hljs-title function_">push</span>(unwatch)
      <span class="hljs-keyword">return</span> unwatch
    }
  },
  
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç†æ‰€æœ‰ç›‘å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_immediateWatchers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">unwatch</span> =&gt;</span> <span class="hljs-title function_">unwatch</span>())
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_immediateWatchers</span> = []
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">mixins</span>: [immediateWatcherMixin],
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.$watchImmediate(
      <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span>,
      <span class="hljs-function">(<span class="hljs-params">newId</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUserData</span>(newId)
      }
    )
  }
}
</code></pre>
<h4 data-id="heading-8">æ–¹æ¡ˆ 5ï¼šä¾¦å¬å™¨å·¥å‚å‡½æ•°ï¼ˆé«˜çº§å°è£…ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils/watchFactory.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createImmediateWatcher</span>(<span class="hljs-params">vm, configs</span>) {
  <span class="hljs-keyword">const</span> unwatchers = []
  
  configs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> {
      source,
      handler,
      immediate = <span class="hljs-literal">true</span>,
      deep = <span class="hljs-literal">false</span>,
      flush = <span class="hljs-string">'pre'</span>
    } = config
    
    <span class="hljs-comment">// å¤„ç† source å¯ä»¥æ˜¯å‡½æ•°æˆ–å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">const</span> getter = <span class="hljs-keyword">typeof</span> source === <span class="hljs-string">'function'</span> 
      ? source 
      : <span class="hljs-function">() =&gt;</span> vm[source]
    
    <span class="hljs-comment">// ç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-keyword">if</span> (immediate) {
      <span class="hljs-keyword">const</span> initialValue = <span class="hljs-title function_">getter</span>()
      handler.<span class="hljs-title function_">call</span>(vm, initialValue, <span class="hljs-literal">undefined</span>)
    }
    
    <span class="hljs-comment">// åˆ›å»ºä¾¦å¬å™¨</span>
    <span class="hljs-keyword">const</span> unwatch = vm.$watch(
      getter,
      handler.<span class="hljs-title function_">bind</span>(vm),
      { deep, <span class="hljs-attr">immediate</span>: <span class="hljs-literal">false</span>, flush }
    )
    
    unwatchers.<span class="hljs-title function_">push</span>(unwatch)
  })
  
  <span class="hljs-comment">// è¿”å›æ¸…ç†å‡½æ•°</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
    unwatchers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">unwatch</span> =&gt;</span> <span class="hljs-title function_">unwatch</span>())
  }
}

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">filters</span>: { <span class="hljs-attr">category</span>: <span class="hljs-string">'all'</span>, <span class="hljs-attr">sort</span>: <span class="hljs-string">'newest'</span> },
      <span class="hljs-attr">pagination</span>: { <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">size</span>: <span class="hljs-number">20</span> }
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰¹é‡åˆ›å»ºç«‹å³æ‰§è¡Œçš„ä¾¦å¬å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_cleanupWatchers</span> = <span class="hljs-title function_">createImmediateWatcher</span>(<span class="hljs-variable language_">this</span>, [
      {
        <span class="hljs-attr">source</span>: <span class="hljs-string">'filters'</span>,
        <span class="hljs-title function_">handler</span>(<span class="hljs-params">newFilters</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyFilters</span>(newFilters)
        },
        <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">source</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">pagination</span>.<span class="hljs-property">page</span>,
        <span class="hljs-title function_">handler</span>(<span class="hljs-params">newPage</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPage</span>(newPage)
        }
      }
    ])
  },
  
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_cleanupWatchers</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_cleanupWatchers</span>()
    }
  }
}
</code></pre>
<h3 data-id="heading-9">å››ã€å®æˆ˜åœºæ™¯ï¼šè¡¨å•åˆå§‹åŒ–ä¸éªŒè¯</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;form @submit.prevent="handleSubmit"&gt;
    &lt;input v-model="form.email" @blur="validateEmail" /&gt;
    &lt;input v-model="form.password" type="password" /&gt;
    
    &lt;div v-if="errors.email"&gt;{{ errors.email }}&lt;/div&gt;
    &lt;button :disabled="!isFormValid"&gt;æäº¤&lt;/button&gt;
  &lt;/form&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  data() {
    return {
      form: {
        email: '',
        password: ''
      },
      errors: {
        email: '',
        password: ''
      },
      isInitialValidationDone: false
    }
  },
  
  computed: {
    isFormValid() {
      return !this.errors.email &amp;&amp; !this.errors.password
    }
  },
  
  watch: {
    'form.email': {
      handler(newEmail) {
        // åªåœ¨åˆå§‹åŒ–éªŒè¯åï¼Œæˆ–è€…ç”¨æˆ·ä¿®æ”¹æ—¶éªŒè¯
        if (this.isInitialValidationDone || newEmail) {
          this.validateEmail()
        }
      },
      immediate: true  // âœ… åˆå§‹åŒ–æ—¶è§¦å‘éªŒè¯
    },
    
    'form.password': {
      handler(newPassword) {
        this.validatePassword(newPassword)
      },
      immediate: true  // âœ… åˆå§‹åŒ–æ—¶è§¦å‘éªŒè¯
    }
  },
  
  created() {
    // æ ‡è®°åˆå§‹åŒ–éªŒè¯å®Œæˆ
    this.$nextTick(() =&gt; {
      this.isInitialValidationDone = true
    })
  },
  
  methods: {
    validateEmail() {
      const email = this.form.email
      if (!email) {
        this.errors.email = 'é‚®ç®±ä¸èƒ½ä¸ºç©º'
      } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        this.errors.email = 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'
      } else {
        this.errors.email = ''
      }
    },
    
    validatePassword(password) {
      if (!password) {
        this.errors.password = 'å¯†ç ä¸èƒ½ä¸ºç©º'
      } else if (password.length &lt; 6) {
        this.errors.password = 'å¯†ç è‡³å°‘6ä½'
      } else {
        this.errors.password = ''
      }
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-10">äº”ã€æ€§èƒ½ä¼˜åŒ–ä¸æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-11">1. <strong>é¿å…æ— é™å¾ªç¯</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">doubled</span>: <span class="hljs-number">0</span>
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-attr">count</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal</span>) {
        <span class="hljs-comment">// âŒ å±é™©ï¼šå¯èƒ½å¯¼è‡´æ— é™å¾ªç¯</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">doubled</span> = newVal * <span class="hljs-number">2</span>
        
        <span class="hljs-comment">// åœ¨æŸäº›æ¡ä»¶ä¸‹ä¿®æ”¹è‡ªèº«ä¾èµ–</span>
        <span class="hljs-keyword">if</span> (newVal &gt; <span class="hljs-number">10</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> = <span class="hljs-number">10</span>  <span class="hljs-comment">// è¿™ä¼šå¯¼è‡´å¾ªç¯</span>
        }
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-12">2. <strong>åˆç†ä½¿ç”¨ deep ç›‘å¬</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">config</span>: {
        <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>,
        <span class="hljs-attr">notifications</span>: {
          <span class="hljs-attr">email</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">push</span>: <span class="hljs-literal">false</span>
        }
      }
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// âŒ è¿‡åº¦ä½¿ç”¨ deep</span>
    <span class="hljs-attr">config</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveConfig</span>()
      },
      <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// æ•´ä¸ªå¯¹è±¡æ·±åº¦ç›‘å¬ï¼Œæ€§èƒ½å¼€é”€å¤§</span>
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    },
    
    <span class="hljs-comment">// âœ… ç²¾ç¡®ç›‘å¬</span>
    <span class="hljs-string">'config.theme'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newTheme</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyTheme</span>(newTheme)
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    },
    
    <span class="hljs-comment">// âœ… ç›‘å¬ç‰¹å®šåµŒå¥—å±æ€§</span>
    <span class="hljs-string">'config.notifications.email'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newValue</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateNotificationPref</span>(<span class="hljs-string">'email'</span>, newValue)
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-13">3. <strong>å¼‚æ­¥æ“ä½œçš„é˜²æŠ–ä¸å–æ¶ˆ</strong></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">searchInput</span>: <span class="hljs-string">''</span>,
      <span class="hljs-attr">searchRequest</span>: <span class="hljs-literal">null</span>
    }
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-attr">searchInput</span>: {
      <span class="hljs-keyword">async</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">newVal</span>) {
        <span class="hljs-comment">// å–æ¶ˆä¹‹å‰çš„è¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">searchRequest</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchRequest</span>.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'å–æ¶ˆæ—§è¯·æ±‚'</span>)
        }
        
        <span class="hljs-comment">// åˆ›å»ºæ–°çš„å¯å–æ¶ˆè¯·æ±‚</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchRequest</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$axios</span>.<span class="hljs-property">CancelToken</span>.<span class="hljs-title function_">source</span>()
        
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">search</span>(newVal, {
            <span class="hljs-attr">cancelToken</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchRequest</span>.<span class="hljs-property">token</span>
          })
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">searchResults</span> = response.<span class="hljs-property">data</span>
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">$axios</span>.<span class="hljs-title function_">isCancel</span>(error)) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœç´¢é”™è¯¯:'</span>, error)
          }
        }
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">debounce</span>: <span class="hljs-number">300</span>  <span class="hljs-comment">// éœ€è¦é…åˆ debounce æ’ä»¶</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-14">å…­ã€Vue 3 Composition API ç‰¹åˆ«æŒ‡å—</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, watch, watchEffect } from 'vue'

const userId = ref(null)
const userData = ref(null)
const loading = ref(false)

// æ–¹æ¡ˆ1: watch + immediate
watch(
  userId,
  async (newId) =&gt; {
    loading.value = true
    try {
      userData.value = await fetchUser(newId)
    } finally {
      loading.value = false
    }
  },
  { immediate: true }  // âœ… ç«‹å³æ‰§è¡Œ
)

// æ–¹æ¡ˆ2: watchEffectï¼ˆè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼‰
const searchQuery = ref('')
const searchResults = ref([])

watchEffect(async () =&gt; {
  // è‡ªåŠ¨è¿½è¸ª searchQuery ä¾èµ–
  if (searchQuery.value.trim()) {
    const results = await searchApi(searchQuery.value)
    searchResults.value = results
  } else {
    searchResults.value = []
  }
})  // âœ… watchEffect ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡

// æ–¹æ¡ˆ3: è‡ªå®šä¹‰ç«‹å³æ‰§è¡Œçš„ composable
function useImmediateWatch(source, callback, options = {}) {
  const { immediate = true, ...watchOptions } = options
  
  // ç«‹å³æ‰§è¡Œ
  if (immediate &amp;&amp; source.value !== undefined) {
    callback(source.value, undefined)
  }
  
  return watch(source, callback, watchOptions)
}

// ä½¿ç”¨
const filters = ref({ category: 'all' })
useImmediateWatch(
  filters,
  (newFilters) =&gt; {
    applyFilters(newFilters)
  },
  { deep: true }
)
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-15">ä¸ƒã€å†³ç­–æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[éœ€è¦åˆå§‹åŒ–æ‰§è¡Œwatch] --&gt; B{åœºæ™¯åˆ†æ}
    
    B --&gt;|ç®€å•ç›‘å¬ï¼Œé€»è¾‘ä¸å¤æ‚| C[æ–¹æ¡ˆ1: immediate:true]
    B --&gt;|å¤æ‚é€»è¾‘ï¼Œéœ€è¦å¤ç”¨| D[æ–¹æ¡ˆ2: æå–æ–¹æ³•]
    B --&gt;|æ´¾ç”Ÿæ•°æ®ï¼Œæ— å‰¯ä½œç”¨| E[æ–¹æ¡ˆ3: è®¡ç®—å±æ€§]
    B --&gt;|Vue3ï¼Œéœ€è¦ç»„åˆå¤ç”¨| F[æ–¹æ¡ˆ4: è‡ªå®šä¹‰Hook]
    B --&gt;|å¤šä¸ªç›¸ä¼¼ç›‘å¬å™¨| G[æ–¹æ¡ˆ5: å·¥å‚å‡½æ•°]
    
    C --&gt; H[å®Œæˆ]
    D --&gt; H
    E --&gt; H
    F --&gt; H
    G --&gt; H
    
    style C fill:#e1f5e1
    style D fill:#e1f5e1
</code></pre>
<h3 data-id="heading-16">å…«ã€æ€»ç»“ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-17">æ ¸å¿ƒåŸåˆ™ï¼š</h4>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ <code>immediate: true</code></strong> - å¯¹äºç®€å•çš„ç›‘å¬éœ€æ±‚</li>
<li><strong>å¤æ‚é€»è¾‘æå–æ–¹æ³•</strong> - æé«˜å¯æµ‹è¯•æ€§å’Œå¤ç”¨æ€§</li>
<li><strong>é¿å…å‰¯ä½œç”¨åœ¨è®¡ç®—å±æ€§ä¸­</strong> - ä¿æŒè®¡ç®—å±æ€§çš„çº¯å‡½æ•°ç‰¹æ€§</li>
<li><strong>Vue 3 ä¼˜å…ˆä½¿ç”¨ Composition API</strong> - æ›´å¥½çš„é€»è¾‘ç»„ç»‡å’Œå¤ç”¨</li>
</ol>
<h4 data-id="heading-18">ä»£ç è§„èŒƒå»ºè®®ï¼š</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… è‰¯å¥½å®è·µ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// æ˜ç¡®æ³¨é‡Šä¸ºä»€ä¹ˆéœ€è¦ç«‹å³æ‰§è¡Œ</span>
    <span class="hljs-attr">userId</span>: {
      <span class="hljs-attr">handler</span>: <span class="hljs-string">'loadUserData'</span>, <span class="hljs-comment">// ä½¿ç”¨æ–¹æ³•åï¼Œæ›´æ¸…æ™°</span>
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// åˆå§‹åŒ–æ—¶éœ€è¦åŠ è½½ç”¨æˆ·æ•°æ®</span>
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¤æ‚åˆå§‹åŒ–é€»è¾‘æ”¾åœ¨ created</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeComponent</span>()
  },
  
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">loadUserData</span>(<span class="hljs-params">userId</span>) {
      <span class="hljs-comment">// å¯å¤ç”¨çš„æ–¹æ³•</span>
    },
    
    <span class="hljs-title function_">initializeComponent</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// é›†ä¸­å¤„ç†åˆå§‹åŒ–é€»è¾‘</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-19">å¸¸è§é™·é˜±æé†’ï¼š</h4>
<ol>
<li><strong>ä¸è¦</strong>åœ¨ <code>immediate</code> å›è°ƒä¸­ä¿®æ”¹ä¾èµ–æ•°æ®ï¼ˆå¯èƒ½å¯¼è‡´å¾ªç¯ï¼‰</li>
<li><strong>è°¨æ…ä½¿ç”¨</strong> <code>deep: true</code>ï¼Œç‰¹åˆ«æ˜¯å¯¹äºå¤§å‹å¯¹è±¡</li>
<li><strong>è®°å¾—æ¸…ç†</strong>æ‰‹åŠ¨åˆ›å»ºçš„ä¾¦å¬å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</li>
<li><strong>è€ƒè™‘ SSR</strong> åœºæ™¯ä¸‹ <code>immediate</code> çš„æ‰§è¡Œæ—¶æœº</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue è·¯ç”±ä¿¡æ¯è·å–å…¨æ”»ç•¥ï¼š8 ç§æ–¹æ³•æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7594680314713145394</link>    <guid>https://juejin.cn/post/7594680314713145394</guid>    <pubDate>2026-01-13T14:33:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594680314713145394" data-draft-id="7594681318828458034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Vue è·¯ç”±ä¿¡æ¯è·å–å…¨æ”»ç•¥ï¼š8 ç§æ–¹æ³•æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T14:33:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Vue è·¯ç”±ä¿¡æ¯è·å–å…¨æ”»ç•¥ï¼š8 ç§æ–¹æ³•æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T14:33:42.000Z" title="Tue Jan 13 2026 14:33:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue è·¯ç”±ä¿¡æ¯è·å–å…¨æ”»ç•¥ï¼š8 ç§æ–¹æ³•æ·±åº¦è§£æ</h2>
<blockquote>
<p>åœ¨ Vue åº”ç”¨ä¸­ï¼Œè·å–å½“å‰è·¯ç”±ä¿¡æ¯æ˜¯å¼€å‘ä¸­çš„å¸¸è§éœ€æ±‚ã€‚æœ¬æ–‡å°†å…¨é¢è§£æä»åŸºç¡€åˆ°é«˜çº§çš„å„ç§è·å–æ–¹æ³•ï¼Œå¹¶å¸®åŠ©ä½ é€‰æ‹©æœ€ä½³å®è·µã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€è·¯ç”±ä¿¡æ¯å…¨æ™¯å›¾</h3>
<p>åœ¨æ·±å…¥å…·ä½“æ–¹æ³•å‰ï¼Œå…ˆäº†è§£ Vue Router æä¾›çš„å®Œæ•´è·¯ç”±ä¿¡æ¯ç»“æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±ä¿¡æ¯å¯¹è±¡ç»“æ„</span>
{
  <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/123/profile?tab=info'</span>,    <span class="hljs-comment">// å®Œæ•´è·¯å¾„</span>
  <span class="hljs-attr">fullPath</span>: <span class="hljs-string">'/user/123/profile?tab=info&amp;token=abc'</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'user-profile'</span>,                   <span class="hljs-comment">// å‘½åè·¯ç”±åç§°</span>
  <span class="hljs-attr">params</span>: {                               <span class="hljs-comment">// åŠ¨æ€è·¯å¾„å‚æ•°</span>
    <span class="hljs-attr">id</span>: <span class="hljs-string">'123'</span>
  },
  <span class="hljs-attr">query</span>: {                                <span class="hljs-comment">// æŸ¥è¯¢å‚æ•°</span>
    <span class="hljs-attr">tab</span>: <span class="hljs-string">'info'</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-string">'abc'</span>
  },
  <span class="hljs-attr">hash</span>: <span class="hljs-string">'#section-2'</span>,                     <span class="hljs-comment">// å“ˆå¸Œç‰‡æ®µ</span>
  <span class="hljs-attr">meta</span>: {                                 <span class="hljs-comment">// è·¯ç”±å…ƒä¿¡æ¯</span>
    <span class="hljs-attr">requiresAuth</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·èµ„æ–™'</span>
  },
  <span class="hljs-attr">matched</span>: [                              <span class="hljs-comment">// åŒ¹é…çš„è·¯ç”±è®°å½•æ•°ç»„</span>
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserLayout</span>, <span class="hljs-attr">meta</span>: {...} },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserContainer</span>, <span class="hljs-attr">meta</span>: {...} },
    { <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id/profile'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserProfile</span>, <span class="hljs-attr">meta</span>: {...} }
  ]
}
</code></pre>
<h3 data-id="heading-2">äºŒã€8 ç§è·å–è·¯ç”±ä¿¡æ¯çš„æ–¹æ³•</h3>
<h4 data-id="heading-3">æ–¹æ³• 1ï¼š<code>$route</code> å¯¹è±¡ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;ç”¨æˆ·è¯¦æƒ…é¡µ&lt;/h1&gt;
    &lt;p&gt;ç”¨æˆ·ID: {{ $route.params.id }}&lt;/p&gt;
    &lt;p&gt;å½“å‰æ ‡ç­¾: {{ $route.query.tab || 'default' }}&lt;/p&gt;
    &lt;p&gt;éœ€è¦è®¤è¯: {{ $route.meta.requiresAuth ? 'æ˜¯' : 'å¦' }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  created() {
    // è®¿é—®è·¯ç”±ä¿¡æ¯
    console.log('è·¯å¾„:', this.$route.path)
    console.log('å‚æ•°:', this.$route.params)
    console.log('æŸ¥è¯¢:', this.$route.query)
    console.log('å“ˆå¸Œ:', this.$route.hash)
    console.log('å…ƒä¿¡æ¯:', this.$route.meta)
    
    // è·å–å®Œæ•´çš„åŒ¹é…è®°å½•
    const matchedRoutes = this.$route.matched
    matchedRoutes.forEach(route =&gt; {
      console.log('åŒ¹é…çš„è·¯ç”±:', route.path, route.meta)
    })
  }
}
&lt;/script&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… ç®€å•ç›´æ¥ï¼Œæ— éœ€å¯¼å…¥</li>
<li>âœ… å“åº”å¼å˜åŒ–ï¼ˆè·¯ç”±å˜åŒ–æ—¶è‡ªåŠ¨æ›´æ–°ï¼‰</li>
<li>âœ… åœ¨æ¨¡æ¿å’Œè„šæœ¬ä¸­éƒ½èƒ½ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-4">æ–¹æ³• 2ï¼š<code>useRoute</code> Hookï¼ˆVue 3 Composition APIï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { useRoute } from 'vue-router'
import { watch, computed } from 'vue'

// è·å–è·¯ç”±å®ä¾‹
const route = useRoute()

// ç›´æ¥ä½¿ç”¨
console.log('å½“å‰è·¯ç”±è·¯å¾„:', route.path)
console.log('è·¯ç”±å‚æ•°:', route.params)

// è®¡ç®—å±æ€§åŸºäºè·¯ç”±
const userId = computed(() =&gt; route.params.id)
const isEditMode = computed(() =&gt; route.query.mode === 'edit')

// ç›‘å¬è·¯ç”±å˜åŒ–
watch(
  () =&gt; route.params.id,
  (newId, oldId) =&gt; {
    console.log(`ç”¨æˆ·IDä» ${oldId} å˜ä¸º ${newId}`)
    loadUserData(newId)
  }
)

// ç›‘å¬å¤šä¸ªè·¯ç”±å±æ€§
watch(
  () =&gt; ({
    id: route.params.id,
    tab: route.query.tab
  }),
  ({ id, tab }) =&gt; {
    console.log(`ID: ${id}, Tab: ${tab}`)
  },
  { deep: true }
)
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;ç”¨æˆ· {{ userId }} çš„èµ„æ–™&lt;/h1&gt;
    &lt;nav&gt;
      &lt;router-link :to="{ query: { tab: 'info' } }" 
                   :class="{ active: route.query.tab === 'info' }"&gt;
        åŸºæœ¬ä¿¡æ¯
      &lt;/router-link&gt;
      &lt;router-link :to="{ query: { tab: 'posts' } }"
                   :class="{ active: route.query.tab === 'posts' }"&gt;
        åŠ¨æ€
      &lt;/router-link&gt;
    &lt;/nav&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-5">æ–¹æ³• 3ï¼šè·¯ç”±å®ˆå«ä¸­è·å–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> {
  <span class="hljs-comment">// to: å³å°†è¿›å…¥çš„è·¯ç”±</span>
  <span class="hljs-comment">// from: å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‰å¾€:'</span>, to.<span class="hljs-property">path</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥è‡ª:'</span>, <span class="hljs-keyword">from</span>.<span class="hljs-property">path</span>)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éœ€è¦è®¤è¯:'</span>, to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span>)
  
  <span class="hljs-comment">// æƒé™æ£€æŸ¥</span>
  <span class="hljs-keyword">if</span> (to.<span class="hljs-property">meta</span>.<span class="hljs-property">requiresAuth</span> &amp;&amp; !<span class="hljs-title function_">isAuthenticated</span>()) {
    <span class="hljs-title function_">next</span>({
      <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
      <span class="hljs-attr">query</span>: { <span class="hljs-attr">redirect</span>: to.<span class="hljs-property">fullPath</span> } <span class="hljs-comment">// ä¿å­˜ç›®æ ‡è·¯å¾„</span>
    })
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">next</span>()
  }
})

<span class="hljs-comment">// ç»„ä»¶å†…å®ˆå«</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">beforeRouteEnter</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// ä¸èƒ½è®¿é—® thisï¼Œå› ä¸ºç»„ä»¶å®ä¾‹è¿˜æ²¡åˆ›å»º</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿›å…¥å‰:'</span>, to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    
    <span class="hljs-comment">// å¯ä»¥é€šè¿‡ next å›è°ƒè®¿é—®å®ä¾‹</span>
    <span class="hljs-title function_">next</span>(<span class="hljs-function"><span class="hljs-params">vm</span> =&gt;</span> {
      vm.<span class="hljs-title function_">initialize</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    })
  },
  
  <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// å¯ä»¥è®¿é—® this</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±æ›´æ–°:'</span>, to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    <span class="hljs-title function_">next</span>()
  },
  
  <span class="hljs-title function_">beforeRouteLeave</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// ç¦»å¼€å‰çš„ç¡®è®¤</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">hasUnsavedChanges</span>) {
      <span class="hljs-keyword">const</span> answer = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">confirm</span>(<span class="hljs-string">'æœ‰æœªä¿å­˜çš„æ›´æ”¹ï¼Œç¡®å®šç¦»å¼€å—ï¼Ÿ'</span>)
      <span class="hljs-keyword">if</span> (!answer) {
        <span class="hljs-title function_">next</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// å–æ¶ˆå¯¼èˆª</span>
        <span class="hljs-keyword">return</span>
      }
    }
    <span class="hljs-title function_">next</span>()
  }
}
</code></pre>
<h4 data-id="heading-6">æ–¹æ³• 4ï¼š<code>$router</code> å¯¹è±¡è·å–å½“å‰è·¯ç”±</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">getCurrentRouteInfo</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// è·å–å½“å‰è·¯ç”±ä¿¡æ¯ï¼ˆéå“åº”å¼ï¼‰</span>
      <span class="hljs-keyword">const</span> currentRoute = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-property">currentRoute</span>
      
      <span class="hljs-comment">// Vue Router 4 ä¸­çš„å˜åŒ–</span>
      <span class="hljs-comment">// const currentRoute = this.$router.currentRoute.value</span>
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰è·¯ç”±å¯¹è±¡:'</span>, currentRoute)
      
      <span class="hljs-comment">// ç¼–ç¨‹å¼å¯¼èˆªæ—¶è·å–</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/456'</span>,
        <span class="hljs-attr">query</span>: { <span class="hljs-attr">from</span>: currentRoute.<span class="hljs-property">fullPath</span> } <span class="hljs-comment">// æºå¸¦æ¥æºä¿¡æ¯</span>
      })
    },
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åœ¨ç‰¹å®šè·¯ç”±</span>
    <span class="hljs-title function_">isActiveRoute</span>(<span class="hljs-params">routeName</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">name</span> === routeName
    },
    
    <span class="hljs-comment">// æ£€æŸ¥è·¯å¾„åŒ¹é…</span>
    <span class="hljs-title function_">isPathMatch</span>(<span class="hljs-params">pattern</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">path</span>.<span class="hljs-title function_">startsWith</span>(pattern)
    }
  },
  
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// åŸºäºå½“å‰è·¯ç”±çš„å¤æ‚è®¡ç®—</span>
    <span class="hljs-title function_">breadcrumbs</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">matched</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> ({
        <span class="hljs-attr">name</span>: route.<span class="hljs-property">meta</span>?.<span class="hljs-property">breadcrumb</span> || route.<span class="hljs-property">name</span>,
        <span class="hljs-attr">path</span>: route.<span class="hljs-property">path</span>
      }))
    },
    
    <span class="hljs-comment">// è·å–åµŒå¥—è·¯ç”±å‚æ•°</span>
    <span class="hljs-title function_">nestedParams</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> params = {}
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">matched</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(params, route.<span class="hljs-property">params</span>)
      })
      <span class="hljs-keyword">return</span> params
    }
  }
}
</code></pre>
<h4 data-id="heading-7">æ–¹æ³• 5ï¼šé€šè¿‡ Props ä¼ é€’è·¯ç”±å‚æ•°ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·¯ç”±é…ç½®</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserDetail</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å°† params ä½œä¸º props ä¼ é€’</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/search'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-title class_">SearchResults</span>,
    <span class="hljs-attr">props</span>: <span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> ({ <span class="hljs-comment">// è‡ªå®šä¹‰ props å‡½æ•°</span>
      <span class="hljs-attr">query</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">q</span>,
      <span class="hljs-attr">page</span>: <span class="hljs-built_in">parseInt</span>(route.<span class="hljs-property">query</span>.<span class="hljs-property">page</span>) || <span class="hljs-number">1</span>,
      <span class="hljs-attr">sort</span>: route.<span class="hljs-property">query</span>.<span class="hljs-property">sort</span> || <span class="hljs-string">'relevance'</span>
    })
  }
]

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">props</span>: {
    <span class="hljs-comment">// ä»è·¯ç”± params è‡ªåŠ¨æ³¨å…¥</span>
    <span class="hljs-attr">id</span>: {
      <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Number</span>],
      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-comment">// ä»è‡ªå®šä¹‰ props å‡½æ•°æ³¨å…¥</span>
    <span class="hljs-attr">query</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">page</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">sort</span>: <span class="hljs-title class_">String</span>
  },
  
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// props å˜åŒ–æ—¶å“åº”</span>
    <span class="hljs-title function_">id</span>(<span class="hljs-params">newId</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUser</span>(newId)
    },
    <span class="hljs-title function_">query</span>(<span class="hljs-params">newQuery</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">performSearch</span>(newQuery)
    }
  },
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ propsï¼Œæ— éœ€è®¿é—® $route</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ID:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœç´¢è¯:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">query</span>)
  }
}
</code></pre>
<h4 data-id="heading-8">æ–¹æ³• 6ï¼šä½¿ç”¨ Vuex/Pinia ç®¡ç†è·¯ç”±çŠ¶æ€</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// store/modules/route.js (Vuex)</span>
<span class="hljs-keyword">const</span> state = {
  <span class="hljs-attr">currentRoute</span>: <span class="hljs-literal">null</span>,
  <span class="hljs-attr">previousRoute</span>: <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">const</span> mutations = {
  <span class="hljs-title function_">SET_CURRENT_ROUTE</span>(<span class="hljs-params">state, route</span>) {
    state.<span class="hljs-property">previousRoute</span> = state.<span class="hljs-property">currentRoute</span>
    state.<span class="hljs-property">currentRoute</span> = {
      <span class="hljs-attr">path</span>: route.<span class="hljs-property">path</span>,
      <span class="hljs-attr">name</span>: route.<span class="hljs-property">name</span>,
      <span class="hljs-attr">params</span>: { ...route.<span class="hljs-property">params</span> },
      <span class="hljs-attr">query</span>: { ...route.<span class="hljs-property">query</span> },
      <span class="hljs-attr">meta</span>: { ...route.<span class="hljs-property">meta</span> }
    }
  }
}

<span class="hljs-comment">// åœ¨å…¨å±€å®ˆå«ä¸­åŒæ­¥</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> {
  store.<span class="hljs-title function_">commit</span>(<span class="hljs-string">'SET_CURRENT_ROUTE'</span>, to)
})

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    ...<span class="hljs-title function_">mapState</span>({
      <span class="hljs-attr">currentRoute</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">route</span>.<span class="hljs-property">currentRoute</span>,
      <span class="hljs-attr">previousRoute</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> state.<span class="hljs-property">route</span>.<span class="hljs-property">previousRoute</span>
    }),
    
    <span class="hljs-comment">// åŸºäºè·¯ç”±çŠ¶æ€çš„è¡ç”Ÿæ•°æ®</span>
    <span class="hljs-title function_">pageTitle</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> route = <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentRoute</span>
      <span class="hljs-keyword">return</span> route?.<span class="hljs-property">meta</span>?.<span class="hljs-property">title</span> || <span class="hljs-string">'é»˜è®¤æ ‡é¢˜'</span>
    }
  }
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Pinia ç‰ˆæœ¬ï¼ˆVue 3ï¼‰</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useRouteStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'route'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">current</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">history</span>: []
  }),
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">updateRoute</span>(<span class="hljs-params">route</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>({
        ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
      })
      
      <span class="hljs-comment">// åªä¿ç•™æœ€è¿‘10æ¡è®°å½•</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">10</span>)
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = {
        <span class="hljs-attr">path</span>: route.<span class="hljs-property">path</span>,
        <span class="hljs-attr">fullPath</span>: route.<span class="hljs-property">fullPath</span>,
        <span class="hljs-attr">name</span>: route.<span class="hljs-property">name</span>,
        <span class="hljs-attr">params</span>: { ...route.<span class="hljs-property">params</span> },
        <span class="hljs-attr">query</span>: { ...route.<span class="hljs-property">query</span> },
        <span class="hljs-attr">meta</span>: { ...route.<span class="hljs-property">meta</span> }
      }
    }
  },
  
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-comment">// è·å–è·¯ç”±å‚æ•°</span>
    <span class="hljs-attr">routeParam</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> state.<span class="hljs-property">current</span>?.<span class="hljs-property">params</span>?.[key]
    },
    
    <span class="hljs-comment">// è·å–æŸ¥è¯¢å‚æ•°</span>
    <span class="hljs-attr">routeQuery</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> state.<span class="hljs-property">current</span>?.<span class="hljs-property">query</span>?.[key]
    },
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åœ¨ç‰¹å®šè·¯ç”±</span>
    <span class="hljs-attr">isRoute</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params">routeName</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> state.<span class="hljs-property">current</span>?.<span class="hljs-property">name</span> === routeName
    }
  }
})
</code></pre>
<h4 data-id="heading-9">æ–¹æ³• 7ï¼šè‡ªå®šä¹‰è·¯ç”±æ··åˆ/ç»„åˆå‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªå®šä¹‰æ··åˆï¼ˆVue 2ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> routeMixin = {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-comment">// ä¾¿æ·è®¿é—®å™¨</span>
    $routeParams() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span> || {}
    },
    
    $routeQuery() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span> || {}
    },
    
    $routeMeta() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">meta</span> || {}
    },
    
    <span class="hljs-comment">// å¸¸ç”¨è·¯ç”±æ£€æŸ¥</span>
    $isHomePage() {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">path</span> === <span class="hljs-string">'/'</span>
    },
    
    $hasRouteParam(param) {
      <span class="hljs-keyword">return</span> param <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>
    },
    
    $getRouteParam(param, defaultValue = <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>[param] || defaultValue
    }
  },
  
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// è·¯ç”±æ“ä½œè¾…åŠ©æ–¹æ³•</span>
    $updateQuery(newQuery) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
        ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>,
        <span class="hljs-attr">query</span>: {
          ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span>,
          ...newQuery
        }
      })
    },
    
    $removeQueryParam(key) {
      <span class="hljs-keyword">const</span> query = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">query</span> }
      <span class="hljs-keyword">delete</span> query[key]
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({ query })
    }
  }
}

<span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">mixins</span>: [routeMixin],
  
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·ID:'</span>, <span class="hljs-variable language_">this</span>.$getRouteParam(<span class="hljs-string">'id'</span>, <span class="hljs-string">'default'</span>))
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦é¦–é¡µ:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$isHomePage</span>)
    
    <span class="hljs-comment">// æ›´æ–°æŸ¥è¯¢å‚æ•°</span>
    <span class="hljs-variable language_">this</span>.$updateQuery({ <span class="hljs-attr">page</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">sort</span>: <span class="hljs-string">'name'</span> })
  }
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Vue 3 Composition API ç‰ˆæœ¬</span>
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useRoute, useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useRouteHelpers</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
  
  <span class="hljs-keyword">const</span> routeParams = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">params</span> || {})
  <span class="hljs-keyword">const</span> routeQuery = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">query</span> || {})
  <span class="hljs-keyword">const</span> routeMeta = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">meta</span> || {})
  
  <span class="hljs-keyword">const</span> isHomePage = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> route.<span class="hljs-property">path</span> === <span class="hljs-string">'/'</span>)
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getRouteParam</span>(<span class="hljs-params">param, defaultValue = <span class="hljs-literal">null</span></span>) {
    <span class="hljs-keyword">return</span> route.<span class="hljs-property">params</span>[param] || defaultValue
  }
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateQuery</span>(<span class="hljs-params">newQuery</span>) {
    router.<span class="hljs-title function_">push</span>({
      ...route,
      <span class="hljs-attr">query</span>: {
        ...route.<span class="hljs-property">query</span>,
        ...newQuery
      }
    })
  }
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">removeQueryParam</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">const</span> query = { ...route.<span class="hljs-property">query</span> }
    <span class="hljs-keyword">delete</span> query[key]
    router.<span class="hljs-title function_">push</span>({ query })
  }
  
  <span class="hljs-keyword">return</span> {
    routeParams,
    routeQuery,
    routeMeta,
    isHomePage,
    getRouteParam,
    updateQuery,
    removeQueryParam
  }
}

<span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span>
&lt;script setup&gt;
<span class="hljs-keyword">const</span> {
  routeParams,
  routeQuery,
  getRouteParam,
  updateQuery
} = <span class="hljs-title function_">useRouteHelpers</span>()

<span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">getRouteParam</span>(<span class="hljs-string">'id'</span>)
<span class="hljs-keyword">const</span> currentTab = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> routeQuery.<span class="hljs-property">tab</span> || <span class="hljs-string">'info'</span>)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">changeTab</span>(<span class="hljs-params">tab</span>) {
  <span class="hljs-title function_">updateQuery</span>({ tab })
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-10">æ–¹æ³• 8ï¼šè®¿é—® Router å®ä¾‹çš„åŒ¹é…å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// è·å–æ‰€æœ‰è·¯ç”±é…ç½®</span>
    <span class="hljs-title function_">getAllRoutes</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-property">options</span>.<span class="hljs-property">routes</span>
    },
    
    <span class="hljs-comment">// é€šè¿‡åç§°æŸ¥æ‰¾è·¯ç”±</span>
    <span class="hljs-title function_">findRouteByName</span>(<span class="hljs-params">name</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-property">options</span>.<span class="hljs-property">routes</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> route.<span class="hljs-property">name</span> === name)
    },
    
    <span class="hljs-comment">// æ£€æŸ¥è·¯å¾„æ˜¯å¦åŒ¹é…è·¯ç”±</span>
    <span class="hljs-title function_">matchRoute</span>(<span class="hljs-params">path</span>) {
      <span class="hljs-comment">// Vue Router 3</span>
      <span class="hljs-keyword">const</span> matched = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">match</span>(path)
      <span class="hljs-keyword">return</span> matched.<span class="hljs-property">matched</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>
      
      <span class="hljs-comment">// Vue Router 4</span>
      <span class="hljs-comment">// const matched = this.$router.resolve(path)</span>
      <span class="hljs-comment">// return matched.matched.length &gt; 0</span>
    },
    
    <span class="hljs-comment">// ç”Ÿæˆè·¯å¾„</span>
    <span class="hljs-title function_">generatePath</span>(<span class="hljs-params">routeName, params = {}</span>) {
      <span class="hljs-keyword">const</span> route = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findRouteByName</span>(routeName)
      <span class="hljs-keyword">if</span> (!route) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
      
      <span class="hljs-comment">// ç®€å•çš„è·¯å¾„ç”Ÿæˆï¼ˆå®é™…é¡¹ç›®å»ºè®®ä½¿ç”¨ path-to-regexpï¼‰</span>
      <span class="hljs-keyword">let</span> path = route.<span class="hljs-property">path</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(params).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
        path = path.<span class="hljs-title function_">replace</span>(<span class="hljs-string">`:<span class="hljs-subst">${key}</span>`</span>, params[key])
      })
      <span class="hljs-keyword">return</span> path
    }
  }
}
</code></pre>
<h3 data-id="heading-11">ä¸‰ã€ä¸åŒåœºæ™¯çš„æ¨èæ–¹æ¡ˆ</h3>
<h4 data-id="heading-12">åœºæ™¯å†³ç­–è¡¨</h4>













































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th><th>ç†ç”±</th></tr></thead><tbody><tr><td><strong>ç®€å•ç»„ä»¶ä¸­è·å–å‚æ•°</strong></td><td><code>$route.params.id</code></td><td>æœ€ç®€å•ç›´æ¥</td></tr><tr><td><strong>Vue 3 Composition API</strong></td><td><code>useRoute()</code> Hook</td><td>å“åº”å¼ã€ç±»å‹å®‰å…¨</td></tr><tr><td><strong>ç»„ä»¶å¤ç”¨/æµ‹è¯•å‹å¥½</strong></td><td>Props ä¼ é€’</td><td>è§£è€¦è·¯ç”±ä¾èµ–</td></tr><tr><td><strong>å¤æ‚åº”ç”¨çŠ¶æ€ç®¡ç†</strong></td><td>Vuex/Pinia å­˜å‚¨</td><td>å…¨å±€è®¿é—®ã€å†å²è®°å½•</td></tr><tr><td><strong>å¤šä¸ªç»„ä»¶å…±äº«é€»è¾‘</strong></td><td>è‡ªå®šä¹‰æ··åˆ/ç»„åˆå‡½æ•°</td><td>ä»£ç å¤ç”¨</td></tr><tr><td><strong>è·¯ç”±å®ˆå«/æ‹¦æˆªå™¨</strong></td><td>å®ˆå«å‚æ•° <code>(to, from)</code></td><td>å®˜æ–¹æ ‡å‡†æ–¹å¼</td></tr><tr><td><strong>éœ€è¦è·¯ç”±é…ç½®ä¿¡æ¯</strong></td><td><code>$router.options.routes</code></td><td>è®¿é—®å®Œæ•´é…ç½®</td></tr></tbody></table>
<h4 data-id="heading-13">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é¿å…åœ¨æ¨¡æ¿ä¸­é¢‘ç¹è®¿é—®æ·±å±‚å±æ€§</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè®¡ç®— --&gt;</span>
    {{ $route.params.user.details.profile.name }}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="hljs-comment">// âœ… ä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{{ userName }}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">computed</span>: {
    <span class="hljs-title function_">userName</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">user</span>?.<span class="hljs-property">details</span>?.<span class="hljs-property">profile</span>?.<span class="hljs-property">name</span> || <span class="hljs-string">'æœªçŸ¥'</span>
    },
    
    <span class="hljs-comment">// æ‰¹é‡æå–è·¯ç”±ä¿¡æ¯</span>
    <span class="hljs-title function_">routeInfo</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> { params, query, meta } = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">userId</span>: params.<span class="hljs-property">id</span>,
        <span class="hljs-attr">tab</span>: query.<span class="hljs-property">tab</span>,
        <span class="hljs-attr">requiresAuth</span>: meta.<span class="hljs-property">requiresAuth</span>
      }
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-14">å“åº”å¼ç›‘å¬æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-comment">// ç›‘å¬ç‰¹å®šå‚æ•°å˜åŒ–</span>
    <span class="hljs-string">'$route.params.id'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newId, oldId</span>) {
        <span class="hljs-keyword">if</span> (newId !== oldId) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUserData</span>(newId)
        }
      },
      <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
    },
    
    <span class="hljs-comment">// ç›‘å¬æŸ¥è¯¢å‚æ•°å˜åŒ–</span>
    <span class="hljs-string">'$route.query'</span>: {
      <span class="hljs-title function_">handler</span>(<span class="hljs-params">newQuery</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyFilters</span>(newQuery)
      },
      <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// æ·±åº¦ç›‘å¬å¯¹è±¡å˜åŒ–</span>
    }
  },
  
  <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ beforeRouteUpdate å®ˆå«</span>
  <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-comment">// åªå¤„ç†éœ€è¦çš„å˜åŒ–</span>
    <span class="hljs-keyword">if</span> (to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span> !== <span class="hljs-keyword">from</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUserData</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    }
    <span class="hljs-title function_">next</span>()
  }
}
</code></pre>
<h3 data-id="heading-15">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·ç®¡ç†ç³»ç»Ÿ</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="user-management"&gt;
    &lt;!-- é¢åŒ…å±‘å¯¼èˆª --&gt;
    &lt;nav class="breadcrumbs"&gt;
      &lt;router-link v-for="item in breadcrumbs" 
                   :key="item.path"
                   :to="item.path"&gt;
        {{ item.title }}
      &lt;/router-link&gt;
    &lt;/nav&gt;
    
    &lt;!-- ç”¨æˆ·è¯¦æƒ… --&gt;
    &lt;div v-if="$route.name === 'user-detail'"&gt;
      &lt;h2&gt;ç”¨æˆ·è¯¦æƒ… - {{ userName }}&lt;/h2&gt;
      &lt;UserTabs :active-tab="activeTab" @change-tab="changeTab" /&gt;
      &lt;router-view /&gt;
    &lt;/div&gt;
    
    &lt;!-- ç”¨æˆ·åˆ—è¡¨ --&gt;
    &lt;div v-else-if="$route.name === 'user-list'"&gt;
      &lt;UserList :filters="routeFilters" /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import { mapState } from 'vuex'

export default {
  computed: {
    ...mapState(['currentUser']),
    
    // ä»è·¯ç”±è·å–ä¿¡æ¯
    userId() {
      return this.$route.params.userId
    },
    
    activeTab() {
      return this.$route.query.tab || 'profile'
    },
    
    routeFilters() {
      return {
        department: this.$route.query.dept,
        role: this.$route.query.role,
        status: this.$route.query.status || 'active'
      }
    },
    
    // é¢åŒ…å±‘å¯¼èˆª
    breadcrumbs() {
      const crumbs = []
      const { matched } = this.$route
      
      matched.forEach((route, index) =&gt; {
        const { meta, path } = route
        
        // ç”Ÿæˆé¢åŒ…å±‘é¡¹
        if (meta?.breadcrumb) {
          crumbs.push({
            title: meta.breadcrumb,
            path: this.generateBreadcrumbPath(matched.slice(0, index + 1))
          })
        }
      })
      
      return crumbs
    },
    
    // ç”¨æˆ·åï¼ˆéœ€è¦æ ¹æ®IDæŸ¥æ‰¾ï¼‰
    userName() {
      const user = this.$store.getters.getUserById(this.userId)
      return user ? user.name : 'åŠ è½½ä¸­...'
    }
  },
  
  watch: {
    // ç›‘å¬ç”¨æˆ·IDå˜åŒ–
    userId(newId) {
      if (newId) {
        this.$store.dispatch('fetchUser', newId)
      }
    },
    
    // ç›‘å¬æ ‡ç­¾é¡µå˜åŒ–
    activeTab(newTab) {
      this.updateDocumentTitle(newTab)
    }
  },
  
  created() {
    // åˆå§‹åŒ–åŠ è½½
    if (this.userId) {
      this.$store.dispatch('fetchUser', this.userId)
    }
    
    // è®¾ç½®é¡µé¢æ ‡é¢˜
    this.updateDocumentTitle()
    
    // è®°å½•é¡µé¢è®¿é—®
    this.logPageView()
  },
  
  methods: {
    changeTab(tab) {
      // æ›´æ–°æŸ¥è¯¢å‚æ•°
      this.$router.push({
        ...this.$route,
        query: { ...this.$route.query, tab }
      })
    },
    
    generateBreadcrumbPath(routes) {
      // ç”Ÿæˆå®Œæ•´è·¯å¾„
      return routes.map(r =&gt; r.path).join('')
    },
    
    updateDocumentTitle(tab = null) {
      const tabName = tab || this.activeTab
      const title = this.$route.meta.title || 'ç”¨æˆ·ç®¡ç†'
      document.title = `${title} - ${this.getTabDisplayName(tabName)}`
    },
    
    logPageView() {
      // å‘é€åˆ†ææ•°æ®
      analytics.track('page_view', {
        path: this.$route.path,
        name: this.$route.name,
        params: this.$route.params
      })
    }
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-16">äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">é—®é¢˜1ï¼šè·¯ç”±ä¿¡æ¯å»¶è¿Ÿè·å–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ å¯èƒ½åœ¨ created ä¸­è·å–ä¸åˆ°å®Œæ•´çš„ $route</span>
<span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>) <span class="hljs-comment">// å¯èƒ½ä¸º undefined</span>
}

<span class="hljs-comment">// âœ… ä½¿ç”¨ nextTick ç¡®ä¿ DOM å’Œè·¯ç”±éƒ½å°±ç»ª</span>
<span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·¯ç”±ä¿¡æ¯:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
  })
}

<span class="hljs-comment">// âœ… æˆ–è€…ä½¿ç”¨ watch + immediate</span>
<span class="hljs-attr">watch</span>: {
  <span class="hljs-string">'$route.params.id'</span>: {
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">id</span>) {
      <span class="hljs-keyword">if</span> (id) <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadData</span>(id)
    },
    <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>
  }
}
</code></pre>
<h4 data-id="heading-18">é—®é¢˜2ï¼šè·¯ç”±å˜åŒ–æ—¶ç»„ä»¶ä¸æ›´æ–°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹äºå¤ç”¨ç»„ä»¶ï¼Œéœ€è¦ç›‘å¬è·¯ç”±å˜åŒ–</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-comment">// ä½¿ç”¨ beforeRouteUpdate å®ˆå«</span>
  <span class="hljs-title function_">beforeRouteUpdate</span>(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span> = to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUserData</span>()
    <span class="hljs-title function_">next</span>()
  },
  
  <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ watch</span>
  <span class="hljs-attr">watch</span>: {
    <span class="hljs-string">'$route.params.id'</span>(newId) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userId</span> = newId
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadUserData</span>()
    }
  }
}
</code></pre>
<h4 data-id="heading-19">é—®é¢˜3ï¼šTypeScript ç±»å‹æ”¯æŒ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Vue 3 + TypeScript</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RouteLocationNormalized</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-comment">// å®šä¹‰è·¯ç”±å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRouteParams</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserRouteQuery</span> {
  tab?: <span class="hljs-string">'info'</span> | <span class="hljs-string">'posts'</span> | <span class="hljs-string">'settings'</span>
  edit?: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„å‚æ•°è®¿é—®</span>
    <span class="hljs-keyword">const</span> userId = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> params = route.<span class="hljs-property">params</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserRouteParams</span>
      <span class="hljs-keyword">return</span> params.<span class="hljs-property">id</span>
    })
    
    <span class="hljs-keyword">const</span> currentTab = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> query = route.<span class="hljs-property">query</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserRouteQuery</span>
      <span class="hljs-keyword">return</span> query.<span class="hljs-property">tab</span> || <span class="hljs-string">'info'</span>
    })
    
    <span class="hljs-comment">// ç±»å‹å®‰å…¨çš„è·¯ç”±è·³è½¬</span>
    <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">goToEdit</span>(<span class="hljs-params"/>) {
      router.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">'user-edit'</span>,
        <span class="hljs-attr">params</span>: { <span class="hljs-attr">id</span>: userId.<span class="hljs-property">value</span> },
        <span class="hljs-attr">query</span>: { <span class="hljs-attr">from</span>: route.<span class="hljs-property">fullPath</span> }
      })
    }
    
    <span class="hljs-keyword">return</span> { userId, currentTab, goToEdit }
  }
})
</code></pre>
<h3 data-id="heading-20">å…­ã€æ€»ç»“ï¼šæœ€ä½³å®è·µæŒ‡å—</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Props ä¼ é€’</strong> - æé«˜ç»„ä»¶å¯æµ‹è¯•æ€§å’Œå¤ç”¨æ€§</li>
<li><strong>å¤æ‚é€»è¾‘ä½¿ç”¨ç»„åˆå‡½æ•°</strong> - Vue 3 æ¨èæ–¹å¼ï¼Œé€»è¾‘æ›´æ¸…æ™°</li>
<li><strong>é€‚å½“ä½¿ç”¨çŠ¶æ€ç®¡ç†</strong> - éœ€è¦è·¨ç»„ä»¶å…±äº«è·¯ç”±çŠ¶æ€æ—¶</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - é¿å…é¢‘ç¹è®¿é—®æ·±å±‚å±æ€§ï¼Œä½¿ç”¨è®¡ç®—å±æ€§ç¼“å­˜</li>
<li><strong>ç±»å‹å®‰å…¨</strong> - TypeScript é¡¹ç›®ä¸€å®šè¦å®šä¹‰è·¯ç”±ç±»å‹</li>
</ol>
<h4 data-id="heading-21">å¿«é€Ÿé€‰æ‹©æµç¨‹å›¾ï¼š</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[éœ€è¦è·å–è·¯ç”±ä¿¡æ¯] --&gt; B{ä½¿ç”¨åœºæ™¯}
    
    B --&gt;|ç®€å•è®¿é—®å‚æ•°| C[ä½¿ç”¨ $route.params]
    B --&gt;|Vue 3 é¡¹ç›®| D[ä½¿ç”¨ useRoute Hook]
    B --&gt;|ç»„ä»¶éœ€è¦å¤ç”¨/æµ‹è¯•| E[ä½¿ç”¨ Props ä¼ é€’]
    B --&gt;|å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€| F[ä½¿ç”¨ Pinia/Vuex å­˜å‚¨]
    B --&gt;|é€šç”¨å·¥å…·å‡½æ•°| G[è‡ªå®šä¹‰ç»„åˆå‡½æ•°]
    
    C --&gt; H[å®Œæˆ]
    D --&gt; H
    E --&gt; H
    F --&gt; H
    G --&gt; H
</code></pre>
<p><strong>è®°ä½é»„é‡‘æ³•åˆ™</strong>ï¼šä¼˜å…ˆè€ƒè™‘ç»„ä»¶ç‹¬ç«‹æ€§ï¼Œåªåœ¨å¿…è¦æ—¶ç›´æ¥è®¿é—®è·¯ç”±å¯¹è±¡ã€‚</p>
<hr/>
<p><strong>æ€è€ƒé¢˜</strong>ï¼šåœ¨ä½ çš„ Vue é¡¹ç›®ä¸­ï¼Œæœ€å¸¸ä½¿ç”¨å“ªç§æ–¹å¼è·å–è·¯ç”±ä¿¡æ¯ï¼Ÿé‡åˆ°è¿‡å“ªäº›æœ‰è¶£çš„é—®é¢˜ï¼Ÿæ¬¢è¿åˆ†äº«ä½ çš„å®æˆ˜ç»éªŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ]]></title>    <link>https://juejin.cn/post/7594662879202230298</link>    <guid>https://juejin.cn/post/7594662879202230298</guid>    <pubDate>2026-01-13T13:08:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662879202230298" data-draft-id="7594662879202197530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-13T13:08:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€”å¼ºçš„çŸ³å¤´_"/> <meta itemprop="url" content="https://juejin.cn/user/3168119757484368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœºæ™¯åŒ–è½åœ°æŒ‡å—â€”â€”é‡‘ä»“æ—¶åºæ•°æ®åº“åœ¨å…³é”®è¡Œä¸šçš„åº”ç”¨å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3168119757484368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€”å¼ºçš„çŸ³å¤´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T13:08:36.000Z" title="Tue Jan 13 2026 13:08:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—¶åºæ•°æ®æ€ä¹ˆâ€œè½åˆ°ç³»ç»Ÿé‡Œâ€ï¼Œå¾€å¾€æ¯”â€œæ¦‚å¿µè®²æ¸…æ¥šâ€æ›´éš¾ã€‚æœ¬æ–‡å°±ä»¥é‡‘ä»“æ—¶åºæ•°æ®åº“çš„å·¥ç¨‹è½åœ°ä¸ºä¸»çº¿ï¼ŒæŠŠé‡‡é›†ã€å­˜å‚¨ã€åˆ†æã€çœ‹æ¿åˆ°è¿ç»´é—­ç¯ä¸²èµ·æ¥ï¼šèƒ½åŠ›æ€ä¹ˆæ‹†ã€æ¨¡å‹æ€ä¹ˆå»ºã€SQLæ€ä¹ˆå†™ã€è¡Œä¸šæ€ä¹ˆç”¨ï¼Œå°½é‡è®²å¾—æ¸…æ¥šã€ä¹Ÿè®²å¾—èƒ½ç›´æ¥ç…§ç€åšã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63784542e8b64026a1ff61fd8c087af7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=Lo09fjw5NTdRp58vwTDMZ7e7t7k%3D" alt="a6bb70bf487627cb7b4e42054570950f.jpg" loading="lazy"/></p>
<p>@[toc]</p>
<hr/>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆ 2025 å¹´æ—¶åºæ•°æ®åº“â€œå¿…é¡»åœºæ™¯åŒ–â€</h2>
<p>æ—¶åºæ•°æ®åº“æ—©å°±ä¸åªæ˜¯â€œå†™å¾—å¿«ã€å­˜å¾—ä¸‹â€è¿™ä¹ˆç®€å•äº†ã€‚åˆ°äº† 2025 å¹´ï¼Œå¤§å®¶æ›´çœ‹é‡çš„æ˜¯<strong>èƒ½ä¸èƒ½å›´ç»•åœºæ™¯æŠŠé“¾è·¯äº¤ä»˜å‡ºæ¥</strong>â€”â€”æ¥å…¥ç¨³ä¸ç¨³ã€å­˜å‚¨è´µä¸è´µã€æŸ¥è¯¢å¿«ä¸å¿«ã€ç³»ç»ŸæŠ—ä¸æŠ—å‹ã€æ²»ç†åˆä¸åˆè§„ã€å›½äº§åŒ–ç¯å¢ƒèƒ½ä¸èƒ½é•¿æœŸè·‘ä½ã€‚</p>
<h3 data-id="heading-1">1.1 2025 å¹´æ—¶åºæ•°æ®çš„å››ä¸ªå…¸å‹å˜åŒ–</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/815bd264292a460c8e7683e6db5b4432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=SURvd2wf9%2BUpCsPAWeiAa6pNvDc%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p><strong>æ•°æ®æºæ›´ç¢æ›´è¿‘</strong><br/>
è¾¹ç¼˜ä¾§è®¾å¤‡ã€ç½‘å…³ã€å·¥ä¸šæ§åˆ¶ä¸è½¦è”ç½‘ç­‰äº§ç”Ÿå¤§é‡â€œçŸ­å‘¨æœŸã€é«˜å™ªå£°ã€æ˜“ä¸¢åŒ…â€çš„æ•°æ®ï¼Œæ¥å…¥é“¾è·¯éœ€è¦æ›´å¼ºçš„ååä¸å®¹é”™ã€‚</p>
</li>
<li>
<p><strong>â€œå†™å…¥é«˜å³° + æŸ¥è¯¢çªå‘â€æˆä¸ºå¸¸æ€</strong><br/>
ç™½å¤©ä¸šåŠ¡å†™å…¥ã€å¤œé—´æ‰¹å¤„ç†ã€æ•…éšœæ’æŸ¥çªå‘æŸ¥è¯¢å åŠ ï¼Œè¦æ±‚æ•°æ®åº“åŒæ—¶å…¼é¡¾å†™å…¥ã€å‹ç¼©ã€èšåˆä¸å¹¶å‘è¯»ã€‚</p>
</li>
<li>
<p><strong>ä»â€œä¿å­˜åŸå§‹æ•°æ®â€èµ°å‘â€œå¯è¿è¥çš„æ•°æ®èµ„äº§â€</strong><br/>
ä¸åªæ˜¯å­˜ï¼šè¿˜è¦åˆ†å±‚ï¼ˆçƒ­/æ¸©/å†·ï¼‰ã€ä¿ç•™ç­–ç•¥ã€é™é‡‡æ ·ã€æ•°æ®è´¨é‡ä¸å®¡è®¡ï¼Œè®©æ•°æ®èƒ½è¢«é•¿æœŸå¤ç”¨ã€‚</p>
</li>
<li>
<p><strong>â€œå¯æ§å¯ç”¨â€æ¯”â€œå‚æ•°æœ€ä¼˜â€æ›´é‡è¦</strong><br/>
å…³é”®è¡Œä¸šæ›´çœ‹é‡å¯äº¤ä»˜æ€§ï¼šå¯è¿ç»´ã€å¯å®¡è®¡ã€å¯æ‰©å±•ã€å¯å…¼å®¹ç”Ÿæ€ã€å¯åœ¨å›½äº§åŒ–ç¯å¢ƒç¨³å®šè¿è¡Œã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">1.2 è¶‹åŠ¿ã€æ ¼å±€ä¸é‡‘ä»“çš„æœºä¼šç‚¹ï¼šæŠŠâ€œèƒ½åŠ›â€å†™è¿›â€œäº¤ä»˜ä»¶â€</h3>
<p>å¦‚æœæŠŠè¡Œä¸šæ ¼å±€æ‹†å¼€çœ‹ï¼Œæ—¶åºäº§å“å¤§ä½“ä¼šè½åœ¨ä¸‰æ¡è·¯çº¿ä¸Šï¼šåå·¥ä¸š/èƒ½æºçš„ç”Ÿäº§ç³»ç»Ÿè·¯çº¿ã€å IT å¯è§‚æµ‹æ€§çš„è¿ç»´è·¯çº¿ã€ä»¥åŠåç‰©è”ç½‘ä¸å¹³å°åŒ–çš„æ•°æ®å¹³å°è·¯çº¿ã€‚èµ°åˆ° 2025 å¹´ï¼ŒçœŸæ­£èƒ½æ‹‰å¼€å·®è·çš„å¾€å¾€ä¸æ˜¯æŸä¸€é¡¹â€œæé™æŒ‡æ ‡â€ï¼Œè€Œæ˜¯èƒ½ä¸èƒ½æŠŠèƒ½åŠ›æ²‰æ·€æˆä¸€å¥—å¯å¤ç”¨ã€å¯éªŒæ”¶çš„äº¤ä»˜ä»¶ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fab5ae891cf4b4fb22f6930436b27ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=noB%2BXeVpr91ObNiCtX%2FWhryNXrs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ•°æ®æ¥å…¥æ ‡å‡†åŒ–</strong>ï¼šæ‰¹é‡å†™å…¥ã€é‡è¯•å¹‚ç­‰ã€ä¹±åºè¡¥å†™ã€è´¨é‡æ ‡è®°è¿™äº›èƒ½åŠ›ï¼Œæœ€åè¦è½æˆæ¥å…¥è§„èŒƒä¸æ¨¡æ¿ï¼Œè°æ¥è°ç”¨ã€‚</li>
<li><strong>åˆ†åŒºç”Ÿå‘½å‘¨æœŸå·¥ç¨‹åŒ–</strong>ï¼šåˆ†åŒºè‡ªåŠ¨åˆ›å»ºä¸æ¸…ç†ã€å†·çƒ­åˆ†å±‚ã€å½’æ¡£ç­–ç•¥è¦å›ºåŒ–æˆè¿ç»´è„šæœ¬ä¸éªŒæ”¶å£å¾„ï¼Œè·‘èµ·æ¥å¿ƒé‡Œæœ‰åº•ã€‚</li>
<li><strong>çœ‹æ¿æŸ¥è¯¢äº§å“åŒ–</strong>ï¼šåˆ†é’Ÿ/å°æ—¶èšåˆå±‚é…ä¸Šå›è¡¥çª—å£ï¼ŒæŠŠçœ‹æ¿ä»â€œå¶å°”å¾ˆå¿«â€å˜æˆâ€œé•¿æœŸç¨³å®šå¿«â€ã€‚</li>
<li><strong>æ²»ç†ä¸å®¡è®¡ä½“ç³»åŒ–</strong>ï¼šæƒé™éš”ç¦»ã€å®¡è®¡ç•™ç—•ã€ä¿ç•™ç­–ç•¥å¯å®¡è®¡ï¼Œå‡å°‘ä¸Šçº¿å®¡æ‰¹ä¸åˆè§„æ²Ÿé€šæˆæœ¬ã€‚</li>
<li><strong>å›½äº§åŒ–è½åœ°å¯æŒç»­</strong>ï¼šå‹æµ‹åŸºçº¿ã€å®¹é‡æ¨¡å‹ã€æ¼”ç»ƒæµç¨‹ä¸ç›‘æ§æŒ‡æ ‡è¡¥é½ï¼Œå°½é‡æŠŠé—®é¢˜æŒ¡åœ¨ä¸Šçº¿å‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-3">2. é‡‘ä»“æ—¶åºæ•°æ®åº“çš„èƒ½åŠ›æ‹†è§£ï¼šç”¨å·¥ç¨‹è¯­è¨€å¯¹é½â€œèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜â€</h2>
<p>æŠŠèƒ½åŠ›æŒ‰â€œè½åœ°ä¼šç”¨åˆ°çš„å±‚æ¬¡â€æ‹†å¼€çœ‹ï¼Œè§„åˆ’ã€éªŒæ”¶ã€æ‰©å®¹è¯„ä¼°éƒ½ä¼šæ¸…æ™°ä¸å°‘ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[æ•°æ®æ¥å…¥&lt;br/&gt;é‡‡é›†/ç½‘å…³/æ¶ˆæ¯é˜Ÿåˆ—] --&gt; B[å†™å…¥ä¸ç¼“å†²&lt;br/&gt;æ‰¹é‡/ä¹±åº/å¹‚ç­‰]
  B --&gt; C[å­˜å‚¨ç»„ç»‡&lt;br/&gt;åˆ†åŒº/ç´¢å¼•/å‹ç¼©]
  C --&gt; D[æŸ¥è¯¢åˆ†æ&lt;br/&gt;çª—å£èšåˆ/å…³è”/é¢„èšåˆ]
  D --&gt; E[æ•°æ®æ²»ç†&lt;br/&gt;ç”Ÿå‘½å‘¨æœŸ/æƒé™/å®¡è®¡]
  E --&gt; F[é«˜å¯ç”¨ä¸è¿ç»´&lt;br/&gt;å¤‡ä»½æ¢å¤/ç›‘æ§/æ‰©ç¼©å®¹]
</code></pre>
<h3 data-id="heading-4">2.0 æŠŠâ€œé‡‘ä»“â€æ”¾è¿›æ¶æ„å›¾ï¼šä¸æ˜¯å•ç‚¹èƒ½åŠ›ï¼Œè€Œæ˜¯ä¸€å¥—äº¤ä»˜ä½“ç³»</h3>
<p>å…³é”®è¡Œä¸šé‡Œï¼Œé‡‘ä»“çš„æ—¶åºèƒ½åŠ›æ›´å¤šæ˜¯ä½œä¸ºé‡‘ä»“æ•°æ®åº“çš„ä¼ä¸šçº§æ•°æ®åº•åº§èƒ½åŠ›æ¥ç”¨ï¼šå®ƒèƒ½æ‰¿è½½â€œæµ·é‡æ—¶åºæ•°æ®é‡‡é›†æ£€ç´¢ç±»åº”ç”¨â€ç­‰åœºæ™¯ï¼Œå¹¶ä¸”æ”¯æŒå’Œå…³ç³»ã€æ–‡æ¡£ã€GIS ç­‰æ¨¡å‹ç»Ÿä¸€å­˜å‚¨ã€æ··åˆè®¿é—®ã€‚æ¢å¥è¯è¯´ï¼Œå¾ˆå¤šæ—¶å€™ä½ ä¸å¿…ä¸ºäº†æ—¶åºå•ç‹¬å†æ‹¼ä¸€å¥—ç³»ç»Ÿï¼Œè¿ç»´ä¸æ²»ç†çš„å‹åŠ›ä¹Ÿä¼šå°ä¸€æˆªã€‚</p>
<p>åšå›½äº§åŒ–æ›¿ä»£ï¼Œéš¾ç‚¹å¾€å¾€ä¸åœ¨â€œèƒ½ä¸èƒ½è¿â€ï¼Œè€Œåœ¨â€œè¿å®Œèƒ½ä¸èƒ½é•¿æœŸç¨³â€ã€‚æ‰€ä»¥å·¥ç¨‹äº¤ä»˜å¿…é¡»æŠŠâ€œè¯„ä¼°â€”è¿ç§»â€”å¼€å‘â€”è¿ç»´â€è¿™ä¸€ä¸²æ‰“é€šã€‚é‡‘ä»“å®˜ç½‘å…¬å¼€ä¿¡æ¯é‡Œä¹Ÿæ˜ç¡®æåˆ°å…¶é…å¥—çš„å·¥å…·ç»„ä»¶ä½“ç³»è¦†ç›–è¿ç§»è¯„ä¼°ã€æ•°æ®è¿ç§»ã€å¼€å‘ç®¡ç†ä¸é›†ä¸­è¿ç»´ç­‰ç¯èŠ‚ï¼Œç›®çš„å°±æ˜¯æŠŠâ€œèƒ½è·‘èµ·æ¥â€è¿›ä¸€æ­¥å˜æˆâ€œèƒ½æŒç»­è·‘ä¸‹å»â€ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40af9ece24a14edd8369b6ba1c0e24a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=5DI3EwWn6uNondtYfhWCEX3rijU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-5">2.1 å†™å…¥ï¼šååã€ä¹±åºä¸â€œä¸šåŠ¡å¯æ¢å¤â€</h3>
<p>å¾ˆå¤šé¡¹ç›®é‡Œï¼Œå†™å…¥çš„çœŸå®ç—›ç‚¹å¹¶ä¸æ˜¯â€œå•æ¡å†™å¾—æ…¢â€ï¼Œè€Œæ˜¯ä¸‹é¢è¿™äº›æ›´æŠ˜ç£¨äººçš„é—®é¢˜ï¼š</p>
<ul>
<li>å³°å€¼å†™å…¥æ—¶å¦‚ä½•ä¿æŒç¨³å®šã€ä¸å¡æ­»æŸ¥è¯¢ï¼›</li>
<li>ä¹±åº/è¿Ÿåˆ°æ•°æ®å¦‚ä½•è¡¥å†™å¹¶ä¿æŒä¸€è‡´ï¼›</li>
<li>æ–­ç½‘/é‡è¯•æ—¶å¦‚ä½•åšåˆ°å¹‚ç­‰ä¸å¯è¿½æº¯ã€‚</li>
</ul>
<p>è½åˆ°å·¥ç¨‹ä¸Šï¼Œå¯ä»¥æŒ‰è¿™ä¸ªæ€è·¯åšï¼š</p>
<ul>
<li>å…¥å£å±‚å…ˆæŠŠ<strong>æ‰¹é‡å†™å…¥</strong>å’Œ<strong>é‡è¯•å»é‡</strong>åšæ‰å®ï¼ˆè®¾å¤‡ä¾§æˆ–ç½‘å…³ä¾§å¸¦å”¯ä¸€åºå·/æ—¶é—´æˆ³+è®¾å¤‡IDï¼‰ï¼Œå†™å…¥é«˜å³°æ—¶æ›´ç¨³ã€‚</li>
<li>æ•°æ®åº“ä¾§ç”¨<strong>æŒ‰æ—¶é—´èŒƒå›´åˆ†åŒº</strong>æ¥å…œåº•ï¼Œé¿å…ä¸€å¼ è¡¨æ— é™å˜å¤§åç»´æŠ¤æˆæœ¬é£™å‡ã€‚</li>
<li>å¦‚æœä¸šåŠ¡ç»´åº¦å¾ˆç¨³å®šã€è¿‡æ»¤ä¹Ÿå¾ˆé«˜é¢‘ï¼Œå°±æŠŠâ€œæ—¶é—´ + ä¸šåŠ¡ç»´åº¦â€å½“æˆè”åˆåˆ‡åˆ†çš„æŠ“æ‰‹ï¼Œæ—¢é™ä½çƒ­ç‚¹ï¼Œä¹Ÿå‡å°‘æ‰«æèŒƒå›´ã€‚[^kb-logs][^kb-safety]</li>
</ul>
<h3 data-id="heading-6">2.2 å­˜å‚¨ï¼šåˆ†åŒºã€å‹ç¼©ä¸å†·çƒ­åˆ†å±‚ï¼ˆé™ä½æ€»æˆæœ¬ï¼‰</h3>
<p>æ—¶åºæ•°æ®æŒ‰æ—¶é—´èŒƒå›´åˆ‡åˆ†ï¼ˆå¤©/å°æ—¶/å‘¨ç­‰ï¼‰å‡ ä¹æ˜¯â€œé»˜è®¤æ­£ç¡®â€çš„é€‰æ‹©ï¼Œæ”¶ç›Šä¹Ÿå¾ˆç›´æ¥ï¼š</p>
<ul>
<li>æŸ¥è¯¢è£å‰ªï¼šåªæ‰«æå‘½ä¸­çš„æ—¶é—´åˆ†åŒºï¼›</li>
<li>è¿ç»´ç®€åŒ–ï¼šè¿‡æœŸæ•°æ®ç›´æ¥æŒ‰åˆ†åŒºæ¸…ç†ï¼›</li>
<li>æ€§èƒ½ç¨³å®šï¼šé¿å…â€œè¶Šå­˜è¶Šæ…¢â€çš„é•¿å°¾é—®é¢˜ã€‚</li>
</ul>
<p>ä»äº§å“å½¢æ€ä¸Šçœ‹ï¼Œé‡‘ä»“æŠŠæ—¶åºèƒ½åŠ›æ”¾è¿›èåˆæ•°æ®åº“ä½“ç³»é‡Œï¼Œå¼ºè°ƒå¤šç§æ¨¡å‹ç»Ÿä¸€å­˜å‚¨ã€æ··åˆè®¿é—®ã€‚è¿™æ ·ä¸€æ¥ï¼Œâ€œæ—¶åºæ˜ç»† + ä¸šåŠ¡ç»´è¡¨ +ï¼ˆå¯é€‰çš„ï¼‰ç©ºé—´ä¿¡æ¯â€å°±èƒ½åœ¨åŒä¸€åº•åº§å†…é—­ç¯å®Œæˆï¼Œè·¨ç³»ç»ŸåŒæ­¥ä¸ä¸€è‡´æ€§æ²»ç†çš„éº»çƒ¦äº‹ä¼šå°‘å¾ˆå¤šã€‚[^kb-kes]</p>
<h3 data-id="heading-7">2.3 æŸ¥è¯¢ï¼šçª—å£èšåˆã€é¢„èšåˆä¸â€œç§’çº§çœ‹æ¿â€</h3>
<p>çœ‹æ¿/å‘Šè­¦æœ€å¸¸è§çš„å‘å°±æ˜¯ï¼šåŸå§‹ç‚¹ä½å¤ªå¤šï¼Œä¸€ä¸Šæ¥å°±æ‰«æ˜ç»†ï¼Œå»¶è¿Ÿä¸Šå»äº†ï¼Œèµ„æºä¹Ÿè¢«åƒå…‰ã€‚æ›´ç¨³å¦¥çš„åšæ³•é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>æ˜ç»†å±‚ä¿ç•™åŸå§‹æ•°æ®ï¼›</li>
<li>èšåˆå±‚æŒ‰åˆ†é’Ÿ/å°æ—¶åšé¢„èšåˆï¼ˆå¯ç‰©åŒ–/å¯å¢é‡ï¼‰ï¼›</li>
<li>ä¸šåŠ¡ä¾§è¯»èšåˆå±‚æ»¡è¶³å¤§å¤šæ•°å®æ—¶çœ‹æ¿ã€‚</li>
</ul>
<p>åœ¨é‡‘ä»“å…¬å¼€çš„æ—¶åºåˆ†æå®è·µé‡Œï¼Œâ€œåŒºé—´ç­›é€‰ + æ—¶é—´çª—å£èšåˆâ€çš„å‡½æ•°åŒ–æ€è·¯ç»å¸¸è¢«ç”¨æ¥æŠŠå¤æ‚æŸ¥è¯¢æ”¶æ•›æˆç¨³å®šã€å¯å¤ç”¨çš„æ—¶é—´çª—æ“ä½œï¼Œè¿™æ ·å‹æµ‹ã€ç¼“å­˜å’Œçœ‹æ¿å¤ç”¨éƒ½ä¼šæ›´é¡ºæ‰‹ã€‚[^kb-safety]</p>
<h3 data-id="heading-8">2.4 æ²»ç†ä¸å®‰å…¨ï¼šæƒé™ã€å®¡è®¡ä¸åˆè§„</h3>
<p>å…³é”®è¡Œä¸šå¾€å¾€è¦æ±‚ï¼š</p>
<ul>
<li>
<p>ç§Ÿæˆ·/éƒ¨é—¨éš”ç¦»ï¼ˆå¤šä¸šåŠ¡åŸŸå¹¶è¡Œï¼‰ï¼›</p>
</li>
<li>
<p>è¡Œçº§/åº“çº§/è¡¨çº§æƒé™ï¼›</p>
</li>
<li>
<p>æ“ä½œå®¡è®¡ã€è¿½æº¯ä¸ç•™ç—•ï¼›</p>
</li>
<li>
<p>æ•°æ®ä¿ç•™ç­–ç•¥å¯æ§ã€å¯å®¡è®¡ã€‚</p>
</li>
</ul>
<h2 data-id="heading-9">æ—¶åºé¡¹ç›®èƒ½ä¸èƒ½é¡ºåˆ©ä¸Šçº¿ã€ä¸Šçº¿åæ•¢ä¸æ•¢æ”¾é‡ï¼Œå¾ˆå¤šæ—¶å€™å°±å¡åœ¨æ²»ç†è¿™ä¸€å…³ã€‚</h2>
<h2 data-id="heading-10">3. ä¸€ä¸ªå¯å¤ç”¨çš„æ•°æ®æ¨¡å‹ï¼šè®¾å¤‡æµ‹ç‚¹è¡¨ï¼ˆå«åˆ†åŒºä¸ç´¢å¼•ï¼‰</h2>
<p>å…ˆç”¨é€šç”¨ SQL æ¥é˜è¿°å»ºæ¨¡æ€è·¯ï¼ŒæŠŠâ€œè®¾å¤‡æµ‹ç‚¹â€å½“ä½œäº‹å®è¡¨ï¼Œå¹¶æŒ‰ç…§æ—¶é—´èŒƒå›´å®æ–½åˆ†åŒºï¼Œç„¶åé’ˆå¯¹æœ€å¸¸è§çš„è¿‡æ»¤æ¡ä»¶åˆ›å»ºåˆæˆç´¢å¼•ï¼Œè¿™æ ·å¤§æ¦‚å°±å¯ä»¥æ¶µç›–å¤šæ•°ç”Ÿäº§åœºæ™¯ã€‚</p>
<p>ä¸åŒç³»ç»Ÿå¯¹äºåˆ†åŒºè¯­æ³•çš„ç»†èŠ‚å¯èƒ½å­˜åœ¨å·®åˆ«ï¼Œä¸è¿‡å»ºæ¨¡æ€è·¯ä»¥åŠå­—æ®µè®¾è®¡å¯ä»¥ç…§æ¬ï¼Œç­‰åˆ°å®é™…æ‰§è¡Œçš„æ—¶å€™ï¼Œå†ä¾ç…§é‡‘ä»“æ—¶åºæ•°æ®åº“çš„åŠŸèƒ½ä»¥åŠè¿ç»´è§„èŒƒå»è°ƒæ•´åˆ†åŒºç²’åº¦å’Œç´¢å¼•ç­–ç•¥å³å¯ã€‚</p>
<h3 data-id="heading-11">3.1 è¡¨ç»“æ„å»ºè®®</h3>
<ul>
<li><code>ts</code>ï¼šé‡‡é›†æ—¶é—´ï¼ˆç»Ÿä¸€ä½¿ç”¨åŒä¸€æ—¶åŒº/ç»Ÿä¸€å…¥åº“å£å¾„ï¼‰</li>
<li><code>device_id</code>ï¼šè®¾å¤‡/ç‚¹ä½å”¯ä¸€æ ‡è¯†</li>
<li><code>metric</code>ï¼šæŒ‡æ ‡åï¼ˆæ¸©åº¦ã€å‹åŠ›ã€ç”µæµç­‰ï¼‰</li>
<li><code>value</code>ï¼šæ•°å€¼</li>
<li><code>quality</code>ï¼šè´¨é‡ä½ï¼ˆå¯é€‰ï¼Œæ ‡è®°æ˜¯å¦æœ‰æ•ˆ/æ˜¯å¦è¡¥ä¼ ï¼‰</li>
<li><code>tags</code>ï¼šæ‰©å±•ç»´åº¦ï¼ˆå¯é€‰ï¼ŒJSON æˆ–è§„èŒƒåŒ–ç»´è¡¨ï¼‰</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points (
  ts         <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">value</span>      <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  quality    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (ts, device_id, metric)
);
</code></pre>
<h3 data-id="heading-12">3.2 æŒ‰æ—¶é—´èŒƒå›´åˆ†åŒºï¼ˆç¤ºä¾‹ï¼šæŒ‰å¤©ï¼‰</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points_2025_01_01 <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">OF</span> telemetry_points
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> <span class="hljs-keyword">FROM</span> (<span class="hljs-string">'2025-01-01'</span>) <span class="hljs-keyword">TO</span> (<span class="hljs-string">'2025-01-02'</span>);
</code></pre>
<h3 data-id="heading-13">3.3 å¸¸ç”¨ç´¢å¼•</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_tp_device_metric_ts <span class="hljs-keyword">ON</span> telemetry_points (device_id, metric, ts);
<span class="hljs-keyword">CREATE</span> INDEX idx_tp_ts <span class="hljs-keyword">ON</span> telemetry_points (ts);
</code></pre>
<h3 data-id="heading-14">3.4 å¤šä¸šåŠ¡åŸŸ/å¤šç§Ÿæˆ·çš„ä¸¤ç§å¸¸è§éš”ç¦»æ–¹å¼</h3>
<p>æ—¶åºå¹³å°ä¸€æ—¦åšæˆâ€œå¹³å°â€ï¼Œå°±ä¼šé‡åˆ°å¤šä¸šåŠ¡åŸŸ/å¤šç§Ÿæˆ·çš„é—®é¢˜ã€‚å·¥ç¨‹ä¸Šæœ€å¸¸è§çš„éš”ç¦»æ–¹å¼åŸºæœ¬å°±è¿™ä¸¤ç±»ï¼š</p>
<ul>
<li><strong>åº“/æ¨¡å¼éš”ç¦»</strong>ï¼šä¸åŒç§Ÿæˆ·/ä¸šåŠ¡åŸŸä½¿ç”¨ä¸åŒåº“æˆ–ä¸åŒæ¨¡å¼ï¼Œéš”ç¦»æ¸…æ™°ã€æƒé™ç®€å•ï¼Œé€‚åˆå¼ºéš”ç¦»åœºæ™¯ã€‚</li>
<li><strong>è¡¨å†…éš”ç¦»</strong>ï¼šåŒä¸€å¼ äº‹å®è¡¨å¢åŠ  <code>tenant_id</code> å­—æ®µï¼Œé€‚åˆç§Ÿæˆ·å¤šä¸”å°ã€å…±äº«èµ„æºçš„åœºæ™¯ï¼Œä½†éœ€è¦æ›´ä¸¥æ ¼çš„æƒé™ä¸å®¡è®¡ç­–ç•¥ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-15">4. å…¸å‹æŸ¥è¯¢ä¸èšåˆï¼šä»â€œæ˜ç»†ç‚¹â€åˆ°â€œå¯ç”¨æŒ‡æ ‡â€</h2>
<p>è®¸å¤šå›¢é˜Ÿæ‰§è¡Œæ—¶åºåˆ†æçš„æ—¶å€™ï¼Œæœ€å¸¸çŠ¯çš„é”™è¯¯å°±æ˜¯â€œæ¯ä¸ªäººéƒ½æœ‰ä¸€å¥—è‡ªå·±çš„æ—¶é—´çª—é€»è¾‘â€ï¼Œè¿™æ ·å°±é€ æˆå£å¾„ä¸ç»Ÿä¸€ï¼Œæ€§èƒ½ä¹Ÿæ— æ³•æ§åˆ¶ï¼Œé‡‘ä»“åœ¨å¼€å±•æ—¶åºåˆ†æçš„æ—¶å€™ï¼Œæ›´ä¾§é‡äºæŠŠâ€œæ—¶é—´èŒƒå›´è¿‡æ»¤ï¼ŒåŒºé—´ç­›é€‰ï¼Œæ—¶é—´çª—å£èšåˆâ€è¿™äº›åŠŸèƒ½åšæˆå‡½æ•°åŒ–ï¼Œæ¨¡æ¿åŒ–çš„æ¨¡å¼ï¼Œä»è€Œå‡è½»é‡å¤åŠ³åŠ¨çš„è´Ÿæ‹…ï¼Œä¹Ÿä¾¿äºåˆ›å»ºæ€§èƒ½åŸºçº¿å¹¶å®æ–½å›å½’æ£€æµ‹ï¼Œè¿™é‡Œæœ‰ä¸€ç»„é€šç”¨çš„ SQL æ€è·¯ï¼›åˆ°äº†å®é™…æ“ä½œé‡‘ä»“æ—¶ï¼Œå¯ä»¥ä¼˜å…ˆé‡‡ç”¨é‡‘ä»“è‡ªèº«å…·å¤‡çš„ç­‰æ•ˆå†…ç½®å‡½æ•°åŠå…¶ç›¸å…³èƒ½åŠ›ï¼ŒæŠŠé€»è¾‘ç¼–å†™å¾—æ›´ä¸ºç²¾ç‚¼ï¼Œç¨³å®šã€‚</p>
<h3 data-id="heading-16">4.1 åŒºé—´æŸ¥è¯¢ï¼šè®¾å¤‡åœ¨æŸæ—¶é—´æ®µçš„æ›²çº¿</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> ts, <span class="hljs-keyword">value</span>
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-02 00:00:00'</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> ts;
</code></pre>
<h3 data-id="heading-17">4.2 çª—å£èšåˆï¼šæŒ‰ 5 åˆ†é’Ÿåšå‡å€¼ã€æœ€å¤§ã€æœ€å°</h3>
<p>æ²¡æœ‰å†…ç½®æ—¶é—´æ¡¶å‡½æ•°æ—¶ï¼Œä¹Ÿå¯ä»¥ç”¨â€œæ—¶é—´æˆªæ–­/å–æ•´â€çš„æ–¹å¼è¡¨è¾¾æ—¶é—´æ¡¶ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span>
  (DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-operator">-</span> (<span class="hljs-built_in">EXTRACT</span>(<span class="hljs-keyword">minute</span> <span class="hljs-keyword">FROM</span> ts)::<span class="hljs-type">int</span> <span class="hljs-operator">%</span> <span class="hljs-number">5</span>) <span class="hljs-operator">*</span> <span class="hljs-type">INTERVAL</span> <span class="hljs-string">'1 minute'</span>) <span class="hljs-keyword">AS</span> bucket_start,
  <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value,
  <span class="hljs-built_in">MIN</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> min_value,
  <span class="hljs-built_in">MAX</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> max_value
<span class="hljs-keyword">FROM</span> telemetry_points
<span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
  <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
  <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> bucket_start
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> bucket_start;
</code></pre>
<h3 data-id="heading-18">4.3 é¢„èšåˆï¼šé¢å‘çœ‹æ¿çš„â€œåˆ†é’Ÿçº§ç‰©åŒ–è§†å›¾â€ï¼ˆç¤ºä¾‹æ€è·¯ï¼‰</h3>
<p>å½“çœ‹æ¿æŸ¥è¯¢é¢‘ç¹ã€ä¸”å¤§éƒ¨åˆ†åªéœ€è¦åˆ†é’Ÿçº§æŒ‡æ ‡æ—¶ï¼Œå»ºè®®åšâ€œæ˜ç»†å±‚ + èšåˆå±‚â€ä¸¤å±‚ç»“æ„ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_1m (
  bucket_start <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id    <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric       <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  avg_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  min_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  max_value    <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  cnt          <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (bucket_start, device_id, metric)
);
</code></pre>
<p>èšåˆåˆ·æ–°ç­–ç•¥å»ºè®®ï¼š</p>
<ul>
<li>å®æ—¶æ€§è¦æ±‚é«˜ï¼šæŒ‰åˆ†é’Ÿå¢é‡åˆ·æ–°ï¼›</li>
<li>å…è®¸å»¶è¿Ÿï¼šæŒ‰ 5 åˆ†é’Ÿ/15 åˆ†é’Ÿæ‰¹é‡åˆ·æ–°ï¼›</li>
<li>æ”¯æŒè¿Ÿåˆ°æ•°æ®ï¼šè®¾ç½®â€œå›è¡¥çª—å£â€ï¼ˆä¾‹å¦‚å›è¡¥æœ€è¿‘ 2 å°æ—¶ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-19">4.4 ä¹±åºã€é‡å¤ä¸è¡¥ä¼ ï¼šç”¨â€œè´¨é‡ä½ + ä¸šåŠ¡å¹‚ç­‰é”®â€é™ä½é£é™©</h3>
<p>ç°åœºé‡‡é›†å¸¸å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€äº›éº»çƒ¦äº‹ï¼Œç¬¬ä¸€ç§æ˜¯è®¾å¤‡è¡¥ä¼ å¼•å‘çš„é‡å¤æƒ…å†µï¼Œç¬¬äºŒç§æ˜¯å› ä¸ºç½‘ç»œæŠ–åŠ¨è€Œå‡ºç°çš„ä¹±åºç°è±¡ï¼Œç¬¬ä¸‰ç§åˆ™æ˜¯ç”±äºè®¾å¤‡ç¦»çº¿é€ æˆçš„ç¼ºæ®µé—®é¢˜ï¼Œæƒ³è¦å‡å°è¿”å·¥é‡ï¼Œæœ€å¥½æ˜¯å°±åœ¨æ¨¡å‹å±‚é¢„å…ˆç•™å‡ºæ§åˆ¶é¢ã€‚</p>
<ul>
<li><code>quality</code> æ ‡è®°æ¥æºï¼ˆæ­£å¸¸/è¡¥ä¼ /ä¼°ç®—/æ— æ•ˆç­‰ï¼‰ï¼Œä¾¿äºå‘Šè­¦ä¸ç»Ÿè®¡å£å¾„ä¸€è‡´</li>
<li>å…¥å£å±‚ç”Ÿæˆ <code>event_id</code>ï¼ˆè®¾å¤‡åºå·æˆ–å“ˆå¸Œï¼‰ï¼Œç”¨äºå¹‚ç­‰å†™å…¥ä¸å»é‡</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> telemetry_points2 (
  ts         <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  device_id  <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  metric     <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">value</span>      <span class="hljs-type">DOUBLE PRECISION</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  quality    <span class="hljs-type">INTEGER</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  event_id   <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (event_id)
);
</code></pre>
<h3 data-id="heading-20">4.5 ç¼ºå¤±è¡¥é½ï¼šæŠŠâ€œæ—¶é—´å¯¹é½â€åšæˆå¯å¤ç”¨æŸ¥è¯¢æ¨¡æ¿</h3>
<p>çœ‹æ¿ç»å¸¸è¦ä¸€æ ¹â€œç­‰é—´éš”æ—¶é—´è½´â€ï¼ˆæ¯”å¦‚æ¯åˆ†é’Ÿä¸€ä¸ªç‚¹ï¼‰ã€‚é‡åˆ°ç¼ºå¤±æ—¶ï¼Œå…ˆç”¨ <code>NULL</code> å ä½æ›´å¹²å‡€ï¼Œåé¢åœ¨å±•ç¤ºå±‚å†åšæ’å€¼æˆ–å‰å‘å¡«å……å°±å¥½ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> time_grid <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> generate_series(
    <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>,
    <span class="hljs-type">TIMESTAMP</span> <span class="hljs-string">'2025-01-01 01:00:00'</span>,
    <span class="hljs-type">INTERVAL</span> <span class="hljs-string">'1 minute'</span>
  ) <span class="hljs-keyword">AS</span> ts
),
raw <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-keyword">AS</span> ts, <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> v
  <span class="hljs-keyword">FROM</span> telemetry_points
  <span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
    <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 01:00:00'</span>
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts)
)
<span class="hljs-keyword">SELECT</span> g.ts, r.v
<span class="hljs-keyword">FROM</span> time_grid g
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> raw r <span class="hljs-keyword">ON</span> r.ts <span class="hljs-operator">=</span> g.ts
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> g.ts;
</code></pre>
<h3 data-id="heading-21">4.6 å‘Šè­¦è®¡ç®—ï¼šé˜ˆå€¼ + æŒç»­æ—¶é—´ï¼ˆé¿å…â€œæŠ–åŠ¨è¯¯æŠ¥â€ï¼‰</h3>
<p>ä¸å°‘å‘Šè­¦è§„åˆ™å¹¶ä¸æ˜¯â€œè¶…è¿‡é˜ˆå€¼å°±ç«‹åˆ»æŠ¥â€ï¼Œè€Œæ˜¯â€œè¿ç»­è¶…è¿‡é˜ˆå€¼ N åˆ†é’Ÿæ‰ç®—â€ã€‚è¿™ç±»éœ€æ±‚æ›´é€‚åˆå…ˆåœ¨åˆ†é’Ÿèšåˆå±‚ç®—ï¼Œå†å»è¯†åˆ«è¿ç»­æ®µã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> m1 <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts) <span class="hljs-keyword">AS</span> minute_ts,
    <span class="hljs-built_in">AVG</span>(<span class="hljs-keyword">value</span>) <span class="hljs-keyword">AS</span> avg_value
  <span class="hljs-keyword">FROM</span> telemetry_points
  <span class="hljs-keyword">WHERE</span> device_id <span class="hljs-operator">=</span> <span class="hljs-string">'D-10086'</span>
    <span class="hljs-keyword">AND</span> metric <span class="hljs-operator">=</span> <span class="hljs-string">'temperature'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>
    <span class="hljs-keyword">AND</span> ts <span class="hljs-operator">&lt;</span>  <span class="hljs-string">'2025-01-01 06:00:00'</span>
  <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> DATE_TRUNC(<span class="hljs-string">'minute'</span>, ts)
),
flag <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    minute_ts,
    avg_value,
    <span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> avg_value <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span> <span class="hljs-keyword">AS</span> over_th
  <span class="hljs-keyword">FROM</span> m1
),
grp <span class="hljs-keyword">AS</span> (
  <span class="hljs-keyword">SELECT</span>
    <span class="hljs-operator">*</span>,
    <span class="hljs-built_in">SUM</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">THEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">ELSE</span> <span class="hljs-number">0</span> <span class="hljs-keyword">END</span>) <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> minute_ts) <span class="hljs-keyword">AS</span> grp_id
  <span class="hljs-keyword">FROM</span> flag
)
<span class="hljs-keyword">SELECT</span>
  <span class="hljs-built_in">MIN</span>(minute_ts) <span class="hljs-keyword">AS</span> start_ts,
  <span class="hljs-built_in">MAX</span>(minute_ts) <span class="hljs-keyword">AS</span> end_ts,
  <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> minutes
<span class="hljs-keyword">FROM</span> grp
<span class="hljs-keyword">WHERE</span> over_th <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> grp_id
<span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">&gt;=</span> <span class="hljs-number">5</span>
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> start_ts;
</code></pre>
<hr/>
<h2 data-id="heading-22">5. ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šçƒ­/æ¸©/å†·åˆ†å±‚ä¸ä¿ç•™ç­–ç•¥ï¼ˆè½åœ°å¯éªŒæ”¶ï¼‰</h2>
<p>æ—¶åºé¡¹ç›®æœ€å®¹æ˜“è¶Šè·‘è¶Šè´µï¼ŒåŸå› å¾€å¾€å¾ˆæœ´ç´ ï¼šåŸå§‹æ•°æ®ä¸€ç›´æ¶¨ã€èšåˆå±‚æ²¡è§„åˆ’ã€è¿‡æœŸæ•°æ®æ¸…ä¸æ‰ï¼ˆæˆ–è€…ä¸æ•¢æ¸…ï¼‰ã€‚</p>
<p>ä¸€ä¸ªå®ç”¨çš„åšæ³•ï¼Œæ˜¯æŒ‰ä¸šåŠ¡ä»·å€¼æŠŠæ•°æ®åˆ†ä¸‰å±‚ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/806b424cd4f0448bb910804eed02609a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=C4sN5cetaWXBHx4guD2kOC%2B0bWQ%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™å—æ€ä¹ˆéªŒæ”¶ä¹Ÿä¸éš¾ï¼Œå£å¾„å¯ä»¥å¾ˆæ¸…æ¥šï¼š</p>
<ul>
<li>åˆ†åŒºåˆ‡æ¢ä¸æ¸…ç†æ˜¯å¦è‡ªåŠ¨åŒ–ï¼›</li>
<li>èšåˆå±‚æ˜¯å¦æŒ‰å‘¨æœŸç”Ÿæˆå¹¶å¯å›è¡¥ï¼›</li>
<li>å•æ¬¡çœ‹æ¿æŸ¥è¯¢èƒ½å¦ç¨³å®šåœ¨ç›®æ ‡å»¶è¿Ÿï¼ˆä¾‹å¦‚ 1â€“3 ç§’çº§ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-23">5.1 åˆ†åŒºæ¸…ç†çš„æœ€å°å¯è¡Œç­–ç•¥ï¼šæŒ‰â€œåˆ†åŒºåˆ é™¤â€è€Œéâ€œå…¨è¡¨åˆ é™¤â€</h3>
<p>è¿‡æœŸæ•°æ®çš„å¤„ç†ä¸Šï¼Œä¼˜å…ˆé€‰â€œæŒ‰åˆ†åŒºåˆ é™¤/å½’æ¡£â€ï¼Œåˆ«ç”¨â€œå…¨è¡¨æ‰«ä¸€éå†åˆ â€çš„æ–¹å¼å»èµŒè¿æ°”ï¼Œè¿™æ ·èƒ½ç»•å¼€é•¿äº‹åŠ¡å’Œå¤§é‡ç¢ç‰‡å¸¦æ¥çš„æŠ–åŠ¨é£é™©ã€‚éªŒæ”¶æ—¶å°±çœ‹ä¸¤ä»¶äº‹ï¼šæ¸…ç†çª—å£é‡Œç³»ç»Ÿç¨³ä¸ç¨³ã€æ¸…ç†è€—æ—¶èƒ½ä¸èƒ½é¢„æµ‹ã€‚</p>
<h3 data-id="heading-24">5.2 ç”¨ä¸€å¼ å›¾ç†è§£â€œæ˜ç»†åˆ°æŒ‡æ ‡â€çš„æ•°æ®é‡‘å­—å¡”</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
  A[åŸå§‹æ˜ç»†ç‚¹ä½&lt;br/&gt;ç§’çº§/æ›´ç»†] --&gt; B[åˆ†é’Ÿèšåˆ&lt;br/&gt;çœ‹æ¿ä¸»åŠ›]
  B --&gt; C[å°æ—¶/å¤©èšåˆ&lt;br/&gt;æŠ¥è¡¨ä¸è¶‹åŠ¿]
  A --&gt; D[äº‹ä»¶/å‘Šè­¦è¡¨&lt;br/&gt;å®šä½å…¥å£]
  D --&gt; A
</code></pre>
<hr/>
<h2 data-id="heading-25">6. å…³é”®è¡Œä¸šåº”ç”¨å®è·µï¼šä¸‰ç±»åœºæ™¯ã€ä¸‰ç§äº¤ä»˜æ–¹å¼</h2>
<p>ä¸‹é¢æˆ‘å°±æŒ‰â€œä¸šåŠ¡è¯‰æ±‚â€”æ•°æ®ç‰¹å¾â€”è½åœ°æ‰“æ³•â€æ¥å†™ï¼Œä½ å†™å¾æ–‡æˆ–æ–¹æ¡ˆæ—¶ä¹Ÿæ–¹ä¾¿ç›´æ¥æ‹¿å»ç”¨ã€‚</p>
<h3 data-id="heading-26">6.0 ä¸€å¼ è¡¨æŠŠâ€œåœºæ™¯è¯‰æ±‚â€æ˜ å°„åˆ°â€œé‡‘ä»“è½åœ°åŠ¨ä½œâ€</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0448fb2ed8d4a1399d19bd25c9adc3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=eNh5SsS84jGryjn1mZZHd6QryBM%3D" alt="image.png" loading="lazy"/></p>
<p>é¡ºå¸¦ä¸€æï¼Œâ€œæ—¶é—´ + ä¸šåŠ¡ç»´åº¦â€çš„è”åˆåˆ†åŒº/åˆ†ç‰‡ï¼Œä»¥åŠæŠŠæŸ¥è¯¢æ”¶æ•›åˆ°åŒºé—´ç­›é€‰ä¸æ—¶é—´çª—å£è¿™å¥—å†™æ³•ï¼Œåœ¨é‡‘ä»“å®˜ç½‘çš„æ—¶åºåˆ†ææ–‡ç« é‡Œè¢«åå¤å¼ºè°ƒï¼Œç”¨å®ƒæ¥å½“æ–¹æ¡ˆçš„è®¾è®¡æŠ“æ‰‹ä¼šæ›´è½åœ°ã€‚[^kb-logs][^kb-safety]</p>
<h3 data-id="heading-27">6.1 ç”µåŠ›ä¸èƒ½æºï¼šè®¾å¤‡çŠ¶æ€ç›‘æµ‹ + æ•…éšœè¿½æº¯</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
è®¾å¤‡çŠ¶æ€é‡ï¼ˆç”µå‹ã€ç”µæµã€æ¸©åº¦ã€æŒ¯åŠ¨ç­‰ï¼‰è¿ç»­é‡‡é›†ï¼›å¼‚å¸¸å‘ç”Ÿåè¦èƒ½å¿«é€Ÿå®šä½æ—¶é—´çª—ã€å…³è”å·¥å†µä¸å‘Šè­¦è®°å½•ã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
ç‚¹ä½å¤šã€é‡‡æ ·å‘¨æœŸçŸ­ï¼›å³°å€¼å†™å…¥é«˜ï¼›æŸ¥è¯¢ä»¥â€œè®¾å¤‡+æ—¶é—´æ®µâ€ä¸ºä¸»ï¼Œä¼´éšèšåˆä¸å¯¹æ¯”ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>ç”¨é‡‘ä»“æ—¶åºæ•°æ®åº“æ‰¿è½½æµ·é‡é‡‡é›†ä¸æ£€ç´¢ï¼Œå…ˆæŠŠå†™å…¥ä¸æŸ¥è¯¢åŸºçº¿å‹æµ‹è·‘å‡ºæ¥ï¼Œå¿ƒé‡Œæœ‰æ•°ï¼›[^kb-kes]</li>
<li>æ˜ç»†è¡¨æŒ‰å¤©åˆ†åŒºï¼›å¸¸ç”¨è®¾å¤‡/æŒ‡æ ‡å»ºç»„åˆç´¢å¼•ï¼›</li>
<li>å»ºåˆ†é’Ÿçº§èšåˆå±‚ä¾›çœ‹æ¿è¯»ï¼›</li>
<li>æ•…éšœè¿½æº¯èµ°â€œäº‹ä»¶è¡¨ + æ˜ç»†å›æ”¾â€é“¾è·¯ã€‚</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant Dev as è®¾å¤‡/é‡‡é›†ç«¯
  participant Gw as ç½‘å…³/æ¶ˆæ¯é˜Ÿåˆ—
  participant TS as é‡‘ä»“æ—¶åºæ•°æ®åº“
  participant BI as çœ‹æ¿/å‘Šè­¦
  Dev-&gt;&gt;Gw: æ‰¹é‡ä¸ŠæŠ¥(å«åºå·/æ—¶é—´æˆ³)
  Gw-&gt;&gt;TS: æ‰¹é‡å†™å…¥/é‡è¯•
  TS--&gt;&gt;BI: åˆ†é’ŸèšåˆæŒ‡æ ‡
  BI--&gt;&gt;TS: å¼‚å¸¸å›æ”¾æŸ¥è¯¢(è®¾å¤‡+æ—¶é—´çª—)
</code></pre>
<h3 data-id="heading-28">6.2 åˆ¶é€ ä¸å·¥ä¸šäº’è”ç½‘ï¼šOEE/èƒ½è€—ä¸è´¨é‡æ³¢åŠ¨åˆ†æ</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
æŠŠæœºå°æ•°æ®å˜æˆå¯è¿è¥æŒ‡æ ‡ï¼ˆç¨¼åŠ¨ç‡ã€èƒ½è€—ã€èŠ‚æ‹æ³¢åŠ¨ã€è‰¯ç‡å…³è”ï¼‰ï¼Œå¹¶èƒ½æŒ‰äº§çº¿/ç­ç»„/å·¥å•ç»´åº¦åˆ†æã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
é™¤æ—¶åºæ˜ç»†å¤–ï¼Œå¿…é¡»å¼ºä¾èµ–ç»´åº¦ï¼ˆäº§çº¿ã€å·¥å•ã€ç‰©æ–™æ‰¹æ¬¡ã€å·¥è‰ºæ®µï¼‰ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>æŠŠæ—¶åºäº‹å®è¡¨å’Œä¸šåŠ¡ç»´è¡¨æ”¾åœ¨é‡‘ä»“ç»Ÿä¸€åº•åº§å†…ï¼Œå°½é‡å°‘åšè·¨åº“åŒæ­¥ï¼ŒæŠŠä¸€è‡´æ€§æ²»ç†çš„å¤æ‚åº¦å‹ä¸‹å»ï¼›[^kb-kes]</li>
<li>â€œæ—¶åºäº‹å®è¡¨ + ç»´è¡¨â€å»ºæ¨¡ï¼šç»´è¡¨ç›¸å¯¹ç¨³å®šï¼Œäº‹å®è¡¨é«˜é¢‘å†™ï¼›</li>
<li>æŸ¥è¯¢ä¾§åšâ€œçª—å£èšåˆ + ç»´è¡¨å…³è”â€ï¼ŒæŠŠæŒ‡æ ‡æ²‰æ·€åˆ°æŠ¥è¡¨å±‚ï¼›</li>
<li>å¯¹å…³é”®æŒ‡æ ‡åšé¢„èšåˆï¼Œå‡å°‘å³°å€¼å‹åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-29">6.3 äº¤é€šä¸åŸå¸‚è¿è¡Œï¼šå¤šæºèåˆç›‘æµ‹ä¸æ€åŠ¿æ„ŸçŸ¥</h3>
<p><strong>ä¸šåŠ¡è¯‰æ±‚</strong><br/>
èåˆå¤šæºæ•°æ®ï¼ˆè®¾å¤‡ã€ç¯å¢ƒã€è§†é¢‘ç»“æ„åŒ–æŒ‡æ ‡ã€è·¯ç½‘çŠ¶æ€ï¼‰ï¼Œè¦æ±‚ç¨³å®šæ¥å…¥ã€å®æ—¶èšåˆä¸è¶‹åŠ¿åˆ¤æ–­ã€‚</p>
<p><strong>æ•°æ®ç‰¹å¾</strong><br/>
æ¥æºå¤šã€æ ¼å¼ä¸ä¸€ã€è´¨é‡å‚å·®ï¼›éœ€è¦ç»Ÿä¸€æ—¶é—´å¯¹é½ä¸æ•°æ®è´¨é‡ç®¡ç†ã€‚</p>
<p><strong>è½åœ°æ‰“æ³•</strong></p>
<ul>
<li>æ¥å…¥å±‚è§„èŒƒåŒ–ï¼šç»Ÿä¸€æ—¶é—´å£å¾„ã€ç»Ÿä¸€è®¾å¤‡IDæ˜ å°„ï¼›</li>
<li>å…¥åº“å‰åšåŸºç¡€è´¨é‡æ ¡éªŒï¼ˆç¼ºæµ‹ã€é‡å¤ã€å¼‚å¸¸å€¼æ ‡è®°ï¼‰ï¼›</li>
<li>ç”¨èšåˆå±‚æ”¯æ’‘å…¨å¸‚/å…¨ç½‘æ€åŠ¿çœ‹æ¿ï¼Œç”¨æ˜ç»†å±‚æ”¯æ’‘å±€éƒ¨æ’éšœå›æ”¾ã€‚</li>
<li>éœ€è¦ç©ºé—´ç»´åº¦ï¼ˆåŒºåŸŸã€è·¯æ®µã€å›´æ ï¼‰æ—¶ï¼Œå¯ç»“åˆæ—¶åºä¸ç©ºé—´æ•°æ®åšè”åˆç­›é€‰ï¼ŒæŠŠâ€œæ—¶é—´çª— + ç©ºé—´èŒƒå›´â€çš„æŸ¥è¯¢æ”¶æ•›æˆå¯å¤ç”¨æ¨¡æ¿ã€‚[^kb-kes][^kb-safety]</li>
</ul>
<hr/>
<h2 data-id="heading-30">7. å›½äº§åŒ–æ›¿ä»£èƒŒæ™¯ä¸‹ï¼šæ€ä¹ˆæŠŠâ€œå¯ç”¨â€åšæˆâ€œå¥½ç”¨ã€ç¨³ç”¨ã€å¯æŒç»­ç”¨â€</h2>
<p>å›½äº§åŒ–æ›¿ä»£é¡¹ç›®çœŸæ­£çš„å…³é”®ï¼Œé€šå¸¸ä¸æ˜¯â€œèƒ½ä¸èƒ½æ›¿â€ï¼Œè€Œæ˜¯æŠŠé£é™©å°½é‡ä»â€œä¸Šçº¿åæš´éœ²â€å‰ç§»åˆ°â€œä¸Šçº¿å‰å¯æ§â€ã€‚æ¯”è¾ƒç¨³çš„æ¨è¿›æ–¹å¼ï¼Œå¯ä»¥æ²¿ç€â€œä¸‰æ¡ä¸»çº¿â€èµ°ï¼š</p>
<h3 data-id="heading-31">7.1 ä¸»çº¿ä¸€ï¼šé€‰å‹ä¸éªŒè¯ï¼ˆå¯é‡åŒ–ã€å¯å¤æµ‹ï¼‰</h3>
<p>éªŒè¯é›†å»ºè®®è‡³å°‘è¦†ç›–è¿™äº›ç»´åº¦ï¼š</p>
<ul>
<li>
<p>å†™å…¥ï¼šå³°å€¼ååã€ä¹±åºè¡¥å†™ã€é‡è¯•å¹‚ç­‰ï¼›</p>
</li>
<li>
<p>æŸ¥è¯¢ï¼šå…¸å‹çœ‹æ¿/æŠ¥è¡¨/å›æ”¾ SQL çš„ç¨³å®šå»¶è¿Ÿï¼›</p>
</li>
<li>
<p>è¿ç»´ï¼šå¤‡ä»½æ¢å¤ã€æ‰©å®¹ã€åˆ†åŒºç»´æŠ¤ã€ç”Ÿå‘½å‘¨æœŸæ¸…ç†ï¼›</p>
</li>
<li>
<p>å®‰å…¨ï¼šæƒé™éš”ç¦»ã€å®¡è®¡ç•™ç—•ã€è´¦å·ç­–ç•¥ä¸åˆè§„è¦æ±‚ã€‚</p>
</li>
</ul>
<p>æ›´ä¸ºå…³é”®çš„æ˜¯è¦å°†éªŒè¯åŠ¨ä½œå’Œå·¥å…·é“¾å…³è”èµ·æ¥ï¼Œè¿ç§»è¯„å®šï¼Œæ•°æ®è¿ç§»ï¼Œå¼€å‘å®ˆæŠ¤ä»¥åŠé›†ä¸­è¿ç»´è¿™äº›ç¯èŠ‚éƒ½åº”è¯¥å‡ç»“æˆå¯å›æº¯çš„äº¤ä»˜ç‰©ï¼Œä¸å¯è®©æ›¿ä»£é¡¹ç›®ä»…ä¾é è®°å¿†æˆ–è€…ç»éªŒå­˜åœ¨ã€‚</p>
<h3 data-id="heading-32">7.2 ä¸»çº¿äºŒï¼šæ•°æ®åˆ†å±‚ä¸æŒ‡æ ‡ä½“ç³»ï¼ˆè®©æˆæœ¬ä¸æ€§èƒ½å¯æ§ï¼‰</h3>
<p>æ¯”è¾ƒå®ç”¨çš„åšæ³•ï¼Œæ˜¯å…ˆæŠŠæŒ‡æ ‡åˆ†æˆä¸‰ç±»ï¼š</p>
<ul>
<li>éœ€è¦ç§’çº§ï¼šèµ°åˆ†é’Ÿèšåˆå±‚æˆ–æ›´ç»†ç²’åº¦çš„é¢„èšåˆï¼›</li>
<li>éœ€è¦åˆ†é’Ÿçº§ï¼šç›´æ¥æŸ¥èšåˆå±‚ï¼›</li>
<li>éœ€è¦è¿½æº¯ï¼šä»äº‹ä»¶å®šä½ï¼Œå†å›æ”¾æ˜ç»†å±‚ã€‚</li>
</ul>
<p>è¿™æ ·èµ„æºæ¶ˆè€—å°±èƒ½ä»â€œæ¯æ¬¡éƒ½æ‰«æ˜ç»†â€å˜æˆâ€œå¤šæ•°è¯»èšåˆï¼Œå°‘æ•°å›æ”¾æ˜ç»†â€ï¼Œæ€§èƒ½å’Œæˆæœ¬éƒ½ä¼šç¨³å¾ˆå¤šã€‚</p>
<h3 data-id="heading-33">7.3 ä¸»çº¿ä¸‰ï¼šè¿ç»´é—­ç¯ï¼ˆè®©ç³»ç»Ÿåœ¨ç”Ÿäº§ä¸­æŒç»­ç¨³å®šï¼‰</h3>
<p>å»ºè®®æŠŠä¸‹é¢è¿™äº›äº‹åšæˆæ—¥å¸¸åŠ¨ä½œï¼Œåˆ«ç­‰å‡ºé—®é¢˜æ‰æƒ³èµ·æ¥ï¼š</p>
<ul>
<li>
<p>åˆ†åŒºè‡ªåŠ¨åˆ›å»ºä¸è¿‡æœŸæ¸…ç†ï¼›</p>
</li>
<li>
<p>èšåˆå±‚æŒ‰è®¡åˆ’åˆ·æ–°å¹¶å…·å¤‡å›è¡¥çª—å£ï¼›</p>
</li>
<li>
<p>æŒ‡æ ‡ç›‘æ§ï¼šå†™å…¥å»¶è¿Ÿã€æŸ¥è¯¢ P95ã€ç£ç›˜å¢é•¿ã€åˆ†åŒºæ•°é‡ã€æ…¢æŸ¥è¯¢ï¼›</p>
</li>
<li>
<p>ç¾å¤‡æ¼”ç»ƒï¼šæŒ‰å­£åº¦åšæ¢å¤æ¼”ç»ƒä¸å®¹é‡å›å½’ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-34">ç»“è¯­ï¼šç”¨â€œå¯äº¤ä»˜çš„æ—¶åºå·¥ç¨‹â€æŠŠæœºä¼šç‚¹è½åˆ°ç°å®</h2>
<p>2025å¹´çš„æ—¶åºæ•°æ®åº“ç«äº‰æ¸æ¸å˜æˆäº†ä¸€åœºå·¥ç¨‹äº¤ä»˜èƒ½åŠ›çš„è¾ƒé‡ï¼Œè°èƒ½å°†å†™å…¥ï¼Œå­˜å‚¨ï¼ŒæŸ¥è¯¢ï¼Œæ²»ç†ï¼Œè¿ç»´å½¢æˆèµ·ä¸€å¥—å¯å¤ç”¨çš„ä½“ç³»ï¼Œè°å°±æ›´æœ‰å¯èƒ½åœ¨å…³é”®è¡Œä¸šä¸­åšåˆ°è§„æ¨¡æ‰©å¼ ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨æ¨åŠ¨å…³é”®è¡Œä¸šæ—¶åºæ•°æ®å¹³å°çš„åˆ›å»ºæˆ–è€…è¿›è¡Œå›½äº§åŒ–æ›¿ä»£ï¼Œå»ºè®®å…ˆæŠŠâ€œæ•°æ®åˆ†å±‚ï¼Œåˆ†åŒºç”Ÿå‘½å‘¨æœŸï¼Œé¢„èšåˆâ€è¿™ä¸‰ä»¶äº‹åšå¥½ï¼Œç„¶åé€æ­¥æ·±å…¥åœ°å®Œå–„æŒ‡æ ‡ä½“ç³»å’Œè¿ç»´é—­ç¯ã€‚æƒ³äº†è§£æ›´å¤šäº§å“ä¸æ–¹æ¡ˆï¼Œå¯ä»¥åˆ°é‡‘ä»“æ•°æ®åº“å®˜ç½‘çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kingbase.com.cn%2F" target="_blank" title="https://www.kingbase.com.cn/" ref="nofollow noopener noreferrer">www.kingbase.com.cn/</a></p>
<p>ğŸ‘‰ <strong>é‡‘ä»“æ•°æ®åº“å®˜æ–¹åšå®¢ç«™</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkingbase.com.cn%2Fexplore" target="_blank" title="https://kingbase.com.cn/explore" ref="nofollow noopener noreferrer">kingbase.com.cn/explore</a><br/>
æƒ³ç»§ç»­æ·±æŒ–çš„è¯ï¼Œè¿™é‡Œæœ‰ä¸å°‘ä¸“å®¶æ–‡ç« ã€åŸç†è§£æå’Œæœ€ä½³å®è·µï¼Œå¯ä»¥æŒ‰åœºæ™¯ç›´æ¥æŒ‘ç€çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cf7d5cfc79b4976a490e417e149856e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YCU5by655qE55-z5aS0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768914516&amp;x-signature=Pbfxsyo1oP5y5TRtfk1tq8YcW2U%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å¼€å‘äº†ä¸€æ¬¾å·¥å…·ç®±ç±»å‹APPï¼šCreativeUtil]]></title>    <link>https://juejin.cn/post/7594682922683596809</link>    <guid>https://juejin.cn/post/7594682922683596809</guid>    <pubDate>2026-01-13T13:32:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594682922683596809" data-draft-id="7594657393830510630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å¼€å‘äº†ä¸€æ¬¾å·¥å…·ç®±ç±»å‹APPï¼šCreativeUtil"/> <meta itemprop="keywords" content="iOS,Mac,APP"/> <meta itemprop="datePublished" content="2026-01-13T13:32:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ"/> <meta itemprop="url" content="https://juejin.cn/user/2831954919569245"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å¼€å‘äº†ä¸€æ¬¾å·¥å…·ç®±ç±»å‹APPï¼šCreativeUtil
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2831954919569245/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¶å­çš„æŠ€æœ¯ç¢ç¢å¿µ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T13:32:28.000Z" title="Tue Jan 13 2026 13:32:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åˆå¼€å‘äº†ä¸€æ¬¾æ–°çš„appï¼šCreative Utilï¼Œè¿™æ¬¡æ˜¯åªé’ˆå¯¹ Mac å¹³å°å¼€å‘çš„ï¼Œå› ä¸ºå¹³æ—¶ä¸ç®¡æ˜¯å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ä¸­ï¼Œä¼šéœ€è¦ç”¨åˆ°å¾ˆå¤šå°å·¥å…·ï¼ŒåŒ…æ‹¬ä»€ä¹ˆmarkdownè½¬å…¬ä¼—å·ã€OSSæˆªå›¾ä¸Šä¼ ã€å–è‰²ã€æ–‡æ¡£å¤„ç†ç­‰ç­‰ï¼Œä¸€èˆ¬æ¥è¯´è¦ä¹ˆä½¿ç”¨utoolsè¿™ç±»å·¥å…·ï¼Œè¦ä¹ˆç›´æ¥ç½‘ä¸Šæ•´ä¸€ä¸ªåœ¨çº¿ç½‘ç«™ä¸´æ—¶å¤„ç†ä¸€ä¸‹ï¼Œä½†è¿˜æ˜¯å¸Œæœ›èƒ½æœ‰ä¸€ä¸ªæœ¬åœ°çš„æ›´å®Œæ•´çš„å·¥å…·ç®±èƒ½å®Œæˆè‡ªå·±çš„æ‰€æœ‰éœ€æ±‚ã€‚çº ç»“äº†ä¸€ç•ªï¼Œæœ€ç»ˆå¼€å‘äº†è¿™æ¬¾appã€‚åŒ…å«äº†è®¾è®¡åˆ›ä½œã€å¼€å‘è¾…åŠ©ã€æ–‡æ¡£å¤„ç†ä¸‰ç±»å·¥å…·é›†ï¼Œç›®å‰å·²ç»å›Šæ‹¬äº†å¸¸ç”¨çš„æ¥è¿‘20ç§å·¥å…·ï¼Œåç»­ä¹Ÿä¼šé™†é™†ç»­ç»­ç»§ç»­å¢åŠ æ›´å¤šçš„å·¥å…·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41fc9b2e04394ecbb77b956939b9e8ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25a2Q55qE5oqA5pyv56KO56KO5b-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768915948&amp;x-signature=ro4zEpN8fCbkcP%2BZtRpkeS3XeL4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd41b4fb03f24e2aa8993b61ea3257db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25a2Q55qE5oqA5pyv56KO56KO5b-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768915948&amp;x-signature=DBJkEo29Ex7Fx8O5JSmYYSjwcCU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5ce0b5da9e34ea7898b8a88b2a7fffc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-25a2Q55qE5oqA5pyv56KO56KO5b-1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768915948&amp;x-signature=yQ%2BLdS9cuXLTol8HScdkButGk%2Fk%3D" alt="" loading="lazy"/></p>
<p>æ€»çš„æ¥è¯´ï¼ŒCreativeUtil æ˜¯é¢å‘å†…å®¹åˆ›ä½œè€…ã€è§†è§‰è®¾è®¡å¸ˆã€å¼€å‘è€…/è¿è¥çš„ All-in-One åŠå…¬æ•ˆç‡ Appï¼Œå¸®ä½ æŠŠå¸¸ç”¨ä½†é›¶æ•£çš„å·¥å…·æ•´åˆæˆä¸€ä¸ªå·¥å…·é›†â€”â€”å°‘åˆ‡å‡ æ¬¡åº”ç”¨ï¼Œå¤šä¸€ç‚¹ä¸“æ³¨ä¸çµæ„Ÿã€‚æœ‰ä»€ä¹ˆç¼ºçš„å·¥å…·å¯ä»¥è¯„è®ºæˆ–ç§ä¿¡å‘Šè¯‰æˆ‘ï¼Œæˆ‘ä¼šæ”¶é›†èµ·æ¥æŠŠå·¥å…·é›†åšçš„æ›´å¤šæ›´å®Œå–„çš„ï¼Œåç»­å·¥å…·å¤šèµ·æ¥ä¹‹åä¹Ÿä¼šæ”¯æŒè‡ªé€‰å·¥å…·æ’ç‰ˆï¼Œçœçš„æœ‰çš„å·¥å…·å¯¹æœ‰äº›æœ‹å‹å¯èƒ½æ²¡ä»€ä¹ˆç”¨è¿˜å¾—å¤šæ»šè½®ä¸€ä¸‹æ‰èƒ½é€‰æ‹©è‡ªå·±æƒ³è¦ç”¨çš„å·¥å…·ã€‚</p>
<p>App Storeåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapps.apple.com%2Fcn%2Fapp%2Fcreativeutil%2Fid6756833314%3Fmt%3D12" target="_blank" title="https://apps.apple.com/cn/app/creativeutil/id6756833314?mt=12" ref="nofollow noopener noreferrer">CreativeUtil</a></p>
<p>PSï¼šæˆ‘çš„å¦ä¸€ä¸ªiosç«¯çš„appï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapps.apple.com%2Fcn%2Fapp%2F%25E5%25AE%2589%25E5%25BA%25B7%25E8%25AE%25B0%2Fid6754668335" target="_blank" title="https://apps.apple.com/cn/app/%E5%AE%89%E5%BA%B7%E8%AE%B0/id6754668335" ref="nofollow noopener noreferrer">å®‰åº·è®°</a>ä¹Ÿåœ¨ä¸æ–­æ›´æ–°è¿­ä»£ä¸­ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹ä¹Ÿå¯ä»¥å…³æ³¨ä¸€ä¸‹å¤šå¤šæ”¯æŒï¼Œè°¢è°¢áƒ¦( Â´ï½¥á´—ï½¥` )æ¯”å¿ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆæ¥å­¦ä¹ æç¤ºè¯å•¦ï½13.9k star çš„ç³»ç»Ÿæç¤ºè¯é›†åˆ]]></title>    <link>https://juejin.cn/post/7594667893016395791</link>    <guid>https://juejin.cn/post/7594667893016395791</guid>    <pubDate>2026-01-13T13:38:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594667893016395791" data-draft-id="7594667893016379407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆæ¥å­¦ä¹ æç¤ºè¯å•¦ï½13.9k star çš„ç³»ç»Ÿæç¤ºè¯é›†åˆ"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-13T13:38:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰é‡‘å¾—é‘«"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335130216"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆæ¥å­¦ä¹ æç¤ºè¯å•¦ï½13.9k star çš„ç³»ç»Ÿæç¤ºè¯é›†åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335130216/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰é‡‘å¾—é‘«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T13:38:31.000Z" title="Tue Jan 13 2026 13:38:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AI èƒ½å¦æŒ‰ç…§ä½ é¢„æœŸé‚£æ · â€œèªæ˜â€ åœ°è¿›è¡Œå·¥ä½œï¼Œé™¤äº†æ¨¡å‹æœ¬èº«çš„èƒ½åŠ›ä¹‹å¤–ï¼Œæœ€é‡è¦çš„å°±æ˜¯æç¤ºè¯ï¼</p>
<p>å¯¹äº AI è€Œè¨€ï¼Œå®ƒè™½ç„¶æœ‰å¼ºå¤§çš„æ¨ç†èƒ½åŠ›ã€æ— äººèƒ½åŠçš„è®­ç»ƒæ•°æ®ä»¥åŠå·¨é‡çš„ä¿¡æ¯å‚¨å¤‡ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ç»™å®ƒæŒ‡å®šç›®æ ‡å’Œå¼•å¯¼ï¼Œå®ƒå……å…¶é‡å°±æ˜¯ä¸€ä¸ªèƒ½å¿«é€Ÿç»™å‡ºå›ç­”çš„æœç´¢å¼•æ“è€Œå·²ã€‚</p>
<p>ChatGPT 3.5 åˆšå‡ºé“çš„æ—¶å€™ï¼Œè¿™ç§æ„Ÿè§‰å°¤ä¸ºæ˜æ˜¾ã€‚å“ªæ€•æ˜¯ç°åœ¨ï¼Œå¤§å¤šæ•°äººä¾æ—§æ˜¯å°† AI å½“æœç´¢å¼•æ“ç”¨ã€‚æ‰€ä»¥è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šé€ æˆä¸€ç§è¯¯è§£ï¼šAI æ™ºèƒ½å¥½åƒä¹Ÿæ²¡å¤šæ™ºèƒ½ã€‚</p>
<p>ä½†æ˜¯åœ¨åŠ å…¥æç¤ºè¯ä¹‹åï¼Œå°¤å…¶æ˜¯ç³»ç»Ÿæç¤ºè¯ï¼Œå®ƒå¸¦æ¥çš„æ•ˆæœæ˜¯éå¸¸æ˜¾è‘—çš„ã€‚</p>
<p>é¦–å…ˆï¼Œå¯¹äºç³»ç»Ÿæç¤ºè¯æ¥è¯´ï¼Œå®ƒå¸¦ç»™ AI çš„ï¼Œæ˜¯ä¸€ç§èº«ä»½èµ‹äºˆã€‚è¿™ä¼šæ³¨å…¥èŒä¸šã€æ€§æ ¼ã€å–œå¥½ç”šè‡³æƒ…æ„Ÿç»™ AIï¼Œè®©å®ƒçŸ¥é“å®ƒåç»­éœ€è¦ä»¥ä»€ä¹ˆèº«ä»½æ¥å’Œç”¨æˆ·è¿›è¡Œæ²Ÿé€šã€‚<strong>ä»å“²å­¦è§’åº¦æ¥çœ‹ï¼Œè§£å†³äº† â€œæˆ‘æ˜¯è°â€ çš„é—®é¢˜</strong>ï¼›</p>
<p>å…¶æ¬¡ï¼Œåœ¨ç”¨æˆ·æç¤ºè¯ä¸Šï¼Œå®ƒä¼š<strong>å‘Šè¯‰ AI ç”¨æˆ·çš„ç›®æ ‡æ˜¯ä»€ä¹ˆã€‚è§£å†³äº† â€œåšä»€ä¹ˆâ€ çš„é—®é¢˜</strong>ã€‚</p>
<p>äºŒè€…ç»“åˆä¹‹ä¸‹ï¼ŒAI çš„èƒ½åŠ›è¢«é‡Šæ”¾ï¼Œå¸‚é¢ä¸Šé€æ¸å‡ºç°äº†ä¸€äº›å¾ˆç‰›çš„ AI äº§å“å‡ºæ¥ã€‚æ¯”å¦‚ perplexity.aiã€Brave Leo AI ç­‰ç­‰ã€‚</p>
<p>è€Œè¿™äº›äº§å“çš„ç³»ç»Ÿæç¤ºè¯ï¼Œç›®å‰å‡è¢«æ”¶é›†åˆ°ä¸€æ¬¾å¼€æºé¡¹ç›® <strong>Leaked-system-prompts</strong> ä¸­ï¼Œé¡¹ç›® star å·²ç»åˆ°äº† 13.9kï½</p>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjujumilk3%2Fleaked-system-prompts" target="_blank" title="https://github.com/jujumilk3/leaked-system-prompts" ref="nofollow noopener noreferrer">github.com/jujumilk3/lâ€¦</a></p>
<p>å¯ä»¥çœ‹åˆ°åœ¨ä¸Šä¸ªæœˆç‹ ç‹ æ›´æ–°äº†ä¸€æ³¢ A ç¤¾ Claude æ¨¡å‹çš„ç³»ç»Ÿæç¤ºè¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96681a1e1c204b1b9300f216d86670da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768916310&amp;x-signature=vTPqala%2BSqt%2BgnhBlv%2FLXyyO2oU%3D" alt="i_kicY5mnwzMQbyL1UZpL3tXcAab3XLmYZtZO_qWyEU=.webp" loading="lazy"/></p>
<p>æœ€è¿‘ä¸€æ¬¡æ›´æ–°æ˜¯ä¸‰å¤©å‰ï¼Œæ›´æ–°äº† DeepSeek R1 å’Œ duckAI çš„æç¤ºè¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7747a6554a14e3abe241646603dbabc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768916310&amp;x-signature=pk0Cxuafya1EPb7PpAcFcEnfYYo%3D" alt="DhT_lvZU0a96cCZIF0k3uKPnojBcbrIhY8lS_TmhCK4=.webp" loading="lazy"/></p>
<p>è™½ç„¶è¿™äº›æç¤ºè¯å¯¹äºæˆ‘ä»¬è€Œè¨€æ— æ³•ç›´æ¥ä½¿ç”¨ï¼ˆä¹Ÿè¯´ä¸å¥½ï¼Œä¸€äº›ç¬¬ä¸‰æ–¹çš„ä¸­è½¬ç«™è¯´ä¸å‡†èƒ½ç”¨ï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»ä¸­å–é•¿è¡¥çŸ­ï¼Œå€Ÿé‰´å’Œå­¦ä¹ ä»–ä»¬çš„æç¤ºè¯æ˜¯å’‹å†™çš„ã€‚</p>
<p>æˆ‘ä»¬ä»¥ <code>anthropic-claude-opus-4.5_20251124</code> çš„æç¤ºè¯ä¸ºä¾‹æ¥å­¦ä¹ ä¸€ä¸‹ A ç¤¾æ˜¯å¦‚ä½•å†™æç¤ºè¯çš„ã€‚</p>
<blockquote>
<p>åŸæç¤ºè¯å¤ªé•¿ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥ç›´æ¥è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjujumilk3%2Fleaked-system-prompts%2Fblob%2Fmain%2Fanthropic-claude-opus-4.5_20251124.md" target="_blank" title="https://github.com/jujumilk3/leaked-system-prompts/blob/main/anthropic-claude-opus-4.5_20251124.md" ref="nofollow noopener noreferrer">github.com/jujumilk3/lâ€¦</a></p>
</blockquote>
<p>ä»è¿™ä»½æç¤ºè¯æ¥çœ‹ï¼Œæˆ‘ä»¬å†™æç¤ºè¯çš„æ ¸å¿ƒè¦è¦†ç›– 8 ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li><strong>è§’è‰²ä¸èº«ä»½</strong>ï¼šæ˜ç¡®æ¨¡å‹**â€œæ˜¯è°â€â€œä»¥ä»€ä¹ˆèº«ä»½å·¥ä½œâ€**ã€‚
<ul>
<li>è®©æ¨¡å‹è¿›å…¥ç¨³å®šå¿ƒæ™ºæ¨¡å‹ï¼›</li>
<li>å†³å®šå›ç­”æ·±åº¦ã€è§†è§’ã€ä¸“ä¸šåº¦ï¼›</li>
<li>ç¤ºä¾‹è¦ç´ ï¼šâ€œä½ æ˜¯ä¸€åâ€¦â€¦â€ã€â€œä½ ä»¥â€¦â€¦èº«ä»½æ€è€ƒå’Œå›ç­”â€ã€‚</li>
</ul>
</li>
<li><strong>èƒ½åŠ›è¾¹ç•Œä¸çŸ¥è¯†èŒƒå›´</strong>ï¼š<strong>æ˜ç¡®æ¨¡å‹èƒ½åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆ</strong>ã€‚
<ul>
<li>å‡å°‘å¹»è§‰ï¼›</li>
<li>æå‡å¯ä¿¡åº¦ï¼›</li>
<li>æ§åˆ¶å›ç­”é£é™©ã€‚</li>
</ul>
</li>
<li><strong>ä»»åŠ¡ç›®æ ‡</strong>ï¼šè¿™æ˜¯æœ€é‡è¦çš„ä¸€ç‚¹ã€‚<strong>ä½ å¸Œæœ›æ¨¡å‹æœ€ç»ˆâ€œå¸®ä½ è¾¾æˆä»€ä¹ˆç»“æœâ€</strong> ã€‚
<ul>
<li>å†³å®šå†…å®¹å–èˆï¼›</li>
<li>å†³å®šæ˜¯å¦åç»“è®ºã€è¿‡ç¨‹ã€è¿˜æ˜¯å¯å‘ã€‚</li>
</ul>
</li>
<li><strong>è¡Œä¸ºä¸ä»·å€¼çº¦æŸ</strong>ï¼šä¸æ˜¯å®‰å…¨åˆè§„é‚£ä¹ˆé‡ï¼Œä½†æ˜¯è¦æœ‰<strong>è¡Œä¸ºè¾¹ç•Œ</strong>ã€‚
<ul>
<li>é¿å…ä½ ä¸æƒ³è¦çš„è¾“å‡ºï¼›</li>
<li>æé«˜ä¸€è‡´æ€§ï¼›</li>
<li>ç¤ºä¾‹è¦ç´ ï¼šä¸åšä»€ä¹ˆï¼Œé‡åˆ°ç°åŒºè¦å¦‚ä½•å¤„ç†ã€‚</li>
</ul>
</li>
<li><strong>æ¨ç†æ–¹å¼</strong>ï¼šå³æ˜¯å¦è¦æ±‚<strong>åˆ†æ­¥éª¤ã€æ˜¾å¼æ€è€ƒã€ç»™å‡ºæƒè¡¡ç‚¹å’Œå¯¹ç«‹è§‚ç‚¹</strong>ã€‚
<ul>
<li>è¿™æ˜¯å†³å®š <strong>èªä¸èªæ˜</strong> çš„è§‚æ„Ÿã€‚</li>
</ul>
</li>
<li><strong>è¯­æ°”ä¸æ€åº¦</strong>ï¼šè¿™ä¼šå½±å“ <strong>AI è¾“å‡ºçš„å¯è¯»æ€§ä»¥åŠæ˜¯å¦â€œåƒäººâ€</strong> ã€‚</li>
<li><strong>è¾“å‡ºæ ¼å¼</strong>ï¼šæœ€ç«‹ç«¿è§å½±çš„ä¸€ç‚¹ã€‚
<ul>
<li>å¯ä»¥èŠ‚çœäºŒæ¬¡æ•´ç†çš„æˆæœ¬ï¼›</li>
<li>æå‡ AI è¾“å‡ºçš„ç¨³å®šæ€§ï¼›</li>
<li>ç¤ºä¾‹ï¼šæ˜¯å¦ä½¿ç”¨åˆ—è¡¨ã€è¡¨æ ¼ã€æ˜¯å¦é™å®šé•¿åº¦ã€æŒ‡å®šæ ‡ç­¾ã€Markdown å’Œ JSON æ ¼å¼ç­‰ã€‚</li>
</ul>
</li>
<li><strong>äº¤äº’ç­–ç•¥</strong>ï¼šå¯ä»¥å†³å®šæ¨¡å‹æ˜¯å¦ä¸»åŠ¨è¡¥å……ã€å…ˆç»™ç»“è®ºè¿˜æ˜¯å…ˆæ¾„æ¸…ã€æ˜¯å¦æå‡ºæ”¹è¿›å»ºè®®ã€‚</li>
</ul>
<p>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼š<strong>å¥½æç¤ºè¯ = æ˜ç¡®èº«ä»½ + æ˜ç¡®ç›®æ ‡ + æ˜ç¡®è¾¹ç•Œ + æ˜ç¡®è¡¨è¾¾æ–¹å¼ã€‚</strong></p>
<p>ä½†æ˜¯ä¹Ÿè¦æ³¨æ„<strong>å¥½æç¤ºè¯ â‰  é•¿æç¤ºè¯ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AQS å·¥å…·ä¹‹ CountDownLatch ä¸ CyclicBarry å­¦ä¹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7594657393830625318</link>    <guid>https://juejin.cn/post/7594657393830625318</guid>    <pubDate>2026-01-13T13:53:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594657393830625318" data-draft-id="7594657393830608934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AQS å·¥å…·ä¹‹ CountDownLatch ä¸ CyclicBarry å­¦ä¹ ç¬”è®°"/> <meta itemprop="keywords" content="Java,åç«¯,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-13T13:53:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="gelald"/> <meta itemprop="url" content="https://juejin.cn/user/923245499657822"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AQS å·¥å…·ä¹‹ CountDownLatch ä¸ CyclicBarry å­¦ä¹ ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/923245499657822/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    gelald
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T13:53:21.000Z" title="Tue Jan 13 2026 13:53:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>CountDownLatch æ˜¯ AQS å¸¸è§å…±äº«æ¨¡å¼çš„å®ç°ç±»ï¼Œå®ƒå¯ä»¥å®ç°çº¿ç¨‹ç­‰å¾…ï¼Œä¹Ÿå¯ä»¥å®ç°çº¿ç¨‹é€šçŸ¥ã€‚CyclicBarrier å’Œå®ƒçš„åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒå…è®¸çº¿ç¨‹å¤ç”¨ï¼Œåœ¨è¿™é‡Œå¯¹æ¯”ç€å­¦ä¹ </p>
</blockquote>
<h2 data-id="heading-0">æºç çœ‹æœ¬è´¨</h2>
<h3 data-id="heading-1">CountDownLatch</h3>
<p><code>CountDownLatch</code> æ˜¯ AQS å…±äº«æ¨¡å¼çš„å®ç°ï¼Œæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li>çº¿ç¨‹é€šè¿‡ <code>countDown()</code> æ–¹æ³•å¯¹èµ„æºè¿›è¡Œé€’å‡</li>
<li>ç­‰å¾…èµ„æº <code>state</code> å‡åˆ° 0ï¼Œç„¶åä¼ æ’­å¼å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹ (è°ƒç”¨äº† <code>await()</code> æ–¹æ³•çš„çº¿ç¨‹)</li>
<li><strong>ä¸å¯é‡ç”¨ï¼Œä¸€æ—¦ <code>state</code> å‡åˆ° 0ï¼Œåç»­è°ƒç”¨ <code>await()</code> æ–¹æ³•éƒ½ä¸å†é˜»å¡ï¼Œç›´æ¥é€šè¿‡</strong></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountDownLatch</span> {
    <span class="hljs-comment">// æ„é€ æ–¹æ³•å®šä¹‰ state æœ‰å¤šå°‘ä»½èµ„æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CountDownLatch</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> {
        <span class="hljs-keyword">if</span> (count &lt; <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"count &lt; 0"</span>);
        <span class="hljs-built_in">this</span>.sync = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sync</span>(count);
    }
    
    <span class="hljs-comment">// æ ¸å¿ƒï¼šstate ä» N â†’ 0</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">countDown</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è°ƒç”¨ AQS å…±äº«é‡Šæ”¾</span>
        sync.releaseShared(<span class="hljs-number">1</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">await</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-comment">// è°ƒç”¨ AQS å…±äº«è·å–</span>
        sync.acquireSharedInterruptibly(<span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Sync</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractQueuedSynchronizer</span> {
        <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryReleaseShared</span><span class="hljs-params">(<span class="hljs-type">int</span> releases)</span> {
            <span class="hljs-keyword">for</span> (;;) {
                <span class="hljs-type">int</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> getState();
                <span class="hljs-keyword">if</span> (c == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å·²å½’é›¶</span>
                <span class="hljs-type">int</span> <span class="hljs-variable">nextc</span> <span class="hljs-operator">=</span> c - <span class="hljs-number">1</span>;
                <span class="hljs-keyword">if</span> (compareAndSetState(c, nextc))
                    <span class="hljs-keyword">return</span> nextc == <span class="hljs-number">0</span>; <span class="hljs-comment">// å½’é›¶æ—¶å”¤é†’æ‰€æœ‰</span>
            }
        }

        <span class="hljs-keyword">protected</span> <span class="hljs-type">int</span> <span class="hljs-title function_">tryAcquireShared</span><span class="hljs-params">(<span class="hljs-type">int</span> acquires)</span> {
            <span class="hljs-comment">// state=0 æ—¶è¿”å›æ­£æ•°ï¼ˆæˆåŠŸï¼‰</span>
            <span class="hljs-keyword">return</span> (getState() == <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span>;
        }
    }
}
</code></pre>
<h3 data-id="heading-2">CyclicBarrier</h3>
<p><code>CyclicBarrier</code> æ˜¯åˆ©ç”¨ <code>CountDownLatch</code> å’Œ <code>Condition</code> å®ç°çš„é˜»å¡å”¤é†’ï¼Œæ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ul>
<li>çº¿ç¨‹é€šè¿‡ <code>await()</code> æ–¹æ³•å¯¹èµ„æºè¿›è¡Œé€’å‡ï¼Œé€šè¿‡ <code>Condition</code> æš‚æ—¶é‡Šæ”¾é”å¹¶è¿›å…¥ç­‰å¾…çŠ¶æ€</li>
<li>å½“èµ„æº <code>count</code> å‡åˆ° 0 æ—¶ï¼Œä¼šæ‰§è¡Œå®šä¹‰å¥½çš„åˆ°è¾¾å±éšœçš„å›è°ƒé€»è¾‘ï¼Œå¹¶ä½¿ç”¨ <code>signalAll()</code> æ–¹æ³•å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</li>
<li><strong>å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹åï¼Œé‡æ–°åˆ›å»ºæ–°å±éšœï¼Œé€šè¿‡ <code>Generation</code> æ ‡è¯†å±éšœä»£æ•°ï¼Œå®ç°å¤ç”¨</strong></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CyclicBarrier</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">trip</span> <span class="hljs-operator">=</span> lock.newCondition();

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Generation</span> {
        <span class="hljs-type">boolean</span> <span class="hljs-variable">broken</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// æ ‡è®°å±éšœæ˜¯å¦è¢«ç ´å</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dowait</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, BrokenBarrierException {
        <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.lock;
        lock.lock();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">Generation</span> <span class="hljs-variable">g</span> <span class="hljs-operator">=</span> generation;
            <span class="hljs-keyword">if</span> (g.broken) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrokenBarrierException</span>();
            
            <span class="hljs-keyword">if</span> (--count == <span class="hljs-number">0</span>) { <span class="hljs-comment">// æœ€åä¸€ä¸ªçº¿ç¨‹åˆ°è¾¾</span>
                nextGeneration(); <span class="hljs-comment">// åˆ›å»ºæ–°å±éšœ</span>
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
            
            <span class="hljs-comment">// ç­‰å¾…</span>
            <span class="hljs-keyword">for</span> (;;) {
                trip.await(); <span class="hljs-comment">// Condition ç­‰å¾…</span>
                <span class="hljs-keyword">if</span> (g.broken) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrokenBarrierException</span>();
                <span class="hljs-keyword">if</span> (g != generation) <span class="hljs-keyword">return</span> index; <span class="hljs-comment">// å±éšœå·²æ›´æ–°</span>
            }
        } <span class="hljs-keyword">finally</span> {
            lock.unlock();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">nextGeneration</span><span class="hljs-params">()</span> {
        trip.signalAll(); <span class="hljs-comment">// å”¤é†’æ‰€æœ‰ç­‰å¾…çº¿ç¨‹</span>
        count = parties; <span class="hljs-comment">// é‡ç½®è®¡æ•°</span>
        generation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Generation</span>(); <span class="hljs-comment">// åˆ›å»ºæ–°å±éšœ</span>
    }
}
</code></pre>
<h2 data-id="heading-3">å±éšœæ•ˆæœæµ‹è¯•å¯¹æ¯”</h2>
<blockquote>
<p>åˆ†åˆ«ä½¿ç”¨ <code>CountDownLatch</code> å’Œ <code>CyclicBarrier</code> å®ç°å±éšœæ•ˆæœï¼Œå¯¹æ¯”æµ‹è¯•</p>
</blockquote>
<h3 data-id="heading-4">CountDownLatch</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CountDownLatchTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">int</span> <span class="hljs-variable">workerCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(workerCount);

        System.out.println(<span class="hljs-string">"===== CountDownLatch æµ‹è¯• ====="</span>);
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹: å¯åŠ¨ "</span> + workerCount + <span class="hljs-string">" ä¸ª worker"</span>);

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= workerCount; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": å¼€å§‹å·¥ä½œ"</span>);
                    Thread.sleep(<span class="hljs-number">1000</span>);
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": å·¥ä½œå®Œæˆï¼Œè°ƒç”¨ countDown()"</span>);
                    latch.countDown(); <span class="hljs-comment">// é€šçŸ¥å®Œæˆ</span>
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }, <span class="hljs-string">"Worker-"</span> + i).start();
        }

        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹è°ƒç”¨ await() ç­‰å¾…æ‰€æœ‰ worker å®Œæˆ"</span>);
        latch.await(); <span class="hljs-comment">// ä¸»çº¿ç¨‹ç­‰å¾…</span>
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹: æ‰€æœ‰ worker å®Œæˆï¼Œç»§ç»­æ‰§è¡Œ"</span>);

        <span class="hljs-comment">// å°è¯•é‡ç”¨ï¼ˆä¼šå¤±è´¥ï¼ï¼‰</span>
        System.out.println(<span class="hljs-string">"\nâš ï¸ å°è¯•é‡ç”¨ CountDownLatch..."</span>);
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": å†æ¬¡å¼€å§‹å·¥ä½œ"</span>);
                Thread.sleep(<span class="hljs-number">1000</span>);
                System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": å·¥ä½œå†æ¬¡å®Œæˆï¼Œå†æ¬¡è°ƒç”¨ countDown()"</span>);
                latch.countDown(); <span class="hljs-comment">// æ— æ•ˆæœ</span>
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Thread.currentThread().interrupt();
            }
        }, <span class="hljs-string">"Worker-1"</span>).start();

        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹å°è¯•å†æ¬¡è°ƒç”¨ await() æ¥ç­‰å¾…ç¬¬äºŒæ¬¡ worker å®Œæˆ"</span>);
        latch.await(); <span class="hljs-comment">// ç«‹å³é€šè¿‡ï¼ˆå› ä¸º state å·²å½’0ï¼‰</span>
        System.out.println(<span class="hljs-string">"ä¸»çº¿ç¨‹: å†æ¬¡ await() ç›´æ¥é€šè¿‡ï¼è¯æ˜ä¸å¯é‡ç”¨"</span>);
    }
}
</code></pre>
<p>ç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">===== CountDownLatch æµ‹è¯• =====
<span class="hljs-section">ä¸»çº¿ç¨‹: å¯åŠ¨ 3 ä¸ª worker</span>
ä¸»çº¿ç¨‹è°ƒç”¨ await() ç­‰å¾…æ‰€æœ‰ worker å®Œæˆ
<span class="hljs-section">Worker-1: å¼€å§‹å·¥ä½œ</span>
<span class="hljs-section">Worker-2: å¼€å§‹å·¥ä½œ</span>
<span class="hljs-section">Worker-3: å¼€å§‹å·¥ä½œ</span>
<span class="hljs-section">Worker-1: å·¥ä½œå®Œæˆï¼Œè°ƒç”¨ countDown()</span>
<span class="hljs-section">Worker-2: å·¥ä½œå®Œæˆï¼Œè°ƒç”¨ countDown()</span>
<span class="hljs-section">Worker-3: å·¥ä½œå®Œæˆï¼Œè°ƒç”¨ countDown()</span>
<span class="hljs-section">ä¸»çº¿ç¨‹: æ‰€æœ‰ worker å®Œæˆï¼Œç»§ç»­æ‰§è¡Œ</span>

âš ï¸ å°è¯•é‡ç”¨ CountDownLatch...
ä¸»çº¿ç¨‹å°è¯•å†æ¬¡è°ƒç”¨ await() æ¥ç­‰å¾…ç¬¬äºŒæ¬¡ worker å®Œæˆ
<span class="hljs-section">ä¸»çº¿ç¨‹: å†æ¬¡ await() ç›´æ¥é€šè¿‡ï¼è¯æ˜ä¸å¯é‡ç”¨</span>
<span class="hljs-section">Worker-1: å†æ¬¡å¼€å§‹å·¥ä½œ</span>
<span class="hljs-section">Worker-1: å·¥ä½œå†æ¬¡å®Œæˆï¼Œå†æ¬¡è°ƒç”¨ countDown()</span>
</code></pre>
<p><code>CountDownLatch</code> çš„æµ‹è¯•ä¸­ï¼Œä¸»çº¿ç¨‹ç­‰å¾…æ¯ä¸ª workerï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ­£å¸¸å®ç°â€œå±éšœâ€çš„åŒæ­¥åŠŸèƒ½ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡ä½¿ç”¨æ—¶å´ä¸èƒ½è¾¾åˆ°ç›¸åŒçš„æ•ˆæœ</p>
<p>åŸå› æ˜¯ <code>CountDownLatch</code> ä¸å¯é‡ç”¨ï¼Œ<code>countDown()</code> æ–¹æ³•ä¼šå¯¹ <code>state</code> é€’å‡ï¼Œä½†æ˜¯æ²¡æœ‰è®© <code>state</code> é€’å¢çš„æ–¹æ³•ï¼Œåªèƒ½å‡ï¼Œä¸èƒ½åŠ ï¼Œå½“ <code>state</code> å‡åˆ° 0ï¼Œå°è¯•ç¬¬äºŒæ¬¡ä½¿ç”¨ <code>CountDownLatch</code> æ—¶ï¼Œ<code>await()</code> æ–¹æ³•ä¼šç›´æ¥é€šè¿‡ï¼Œä¸å†é˜»å¡</p>
<h3 data-id="heading-5">CyclicBarrier</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CyclicBarrierTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
        <span class="hljs-type">int</span> <span class="hljs-variable">parties</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
        <span class="hljs-type">CyclicBarrier</span> <span class="hljs-variable">barrier</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CyclicBarrier</span>(parties, () -&gt; {
            System.out.println(<span class="hljs-string">"â†’â†’â†’ é˜¶æ®µå®Œæˆå›è°ƒ: æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœ â†â†â†"</span>);
        });

        System.out.println(<span class="hljs-string">"\n===== CyclicBarrier æµ‹è¯• ====="</span>);

        <span class="hljs-comment">// ç¬¬ä¸€é˜¶æ®µ</span>
        System.out.println(<span class="hljs-string">"ç¬¬ä¸€é˜¶æ®µ: "</span> + parties + <span class="hljs-string">" ä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= parties; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": åˆ°è¾¾ç¬¬ä¸€é˜¶æ®µå±éšœ, è°ƒç”¨ await()"</span>);
                    barrier.await(); <span class="hljs-comment">// ç­‰å¾…å…¶ä»–çº¿ç¨‹</span>
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": é€šè¿‡ç¬¬ä¸€é˜¶æ®µå±éšœ, å”¤é†’"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    e.printStackTrace();
                }
            }, <span class="hljs-string">"Thread-"</span> + i).start();
        }
        Thread.sleep(<span class="hljs-number">2000</span>); <span class="hljs-comment">// ç­‰å¾…ç¬¬ä¸€é˜¶æ®µå®Œæˆ</span>

        <span class="hljs-comment">// ç¬¬äºŒé˜¶æ®µï¼ˆé‡ç”¨ï¼‰</span>
        System.out.println(<span class="hljs-string">"\nâœ… é‡ç”¨ CyclicBarrier è¿›è¡Œç¬¬äºŒé˜¶æ®µ"</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= parties; i++) {
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
                <span class="hljs-keyword">try</span> {
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": åˆ°è¾¾ç¬¬äºŒé˜¶æ®µå±éšœ, è°ƒç”¨ await()"</span>);
                    barrier.await();
                    System.out.println(Thread.currentThread().getName() + <span class="hljs-string">": é€šè¿‡ç¬¬äºŒé˜¶æ®µå±éšœ, å”¤é†’"</span>);
                } <span class="hljs-keyword">catch</span> (Exception e) {
                    e.printStackTrace();
                }
            }, <span class="hljs-string">"Thread-"</span> + i).start();
        }
    }
}
</code></pre>
<p>ç»“æœï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">===== CyclicBarrier æµ‹è¯• =====
<span class="hljs-section">ç¬¬ä¸€é˜¶æ®µ: 3 ä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…</span>
<span class="hljs-section">Thread-1: åˆ°è¾¾ç¬¬ä¸€é˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
<span class="hljs-section">Thread-2: åˆ°è¾¾ç¬¬ä¸€é˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
<span class="hljs-section">Thread-3: åˆ°è¾¾ç¬¬ä¸€é˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
â†’â†’â†’ é˜¶æ®µå®Œæˆå›è°ƒ: æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœ â†â†â†
<span class="hljs-section">Worker-1: å·¥ä½œå†æ¬¡å®Œæˆï¼Œå†æ¬¡è°ƒç”¨ countDown()</span>
<span class="hljs-section">Thread-3: é€šè¿‡ç¬¬ä¸€é˜¶æ®µå±éšœ, å”¤é†’</span>
<span class="hljs-section">Thread-1: é€šè¿‡ç¬¬ä¸€é˜¶æ®µå±éšœ, å”¤é†’</span>
<span class="hljs-section">Thread-2: é€šè¿‡ç¬¬ä¸€é˜¶æ®µå±éšœ, å”¤é†’</span>

âœ… é‡ç”¨ CyclicBarrier è¿›è¡Œç¬¬äºŒé˜¶æ®µ
<span class="hljs-section">Thread-1: åˆ°è¾¾ç¬¬äºŒé˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
<span class="hljs-section">Thread-2: åˆ°è¾¾ç¬¬äºŒé˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
<span class="hljs-section">Thread-3: åˆ°è¾¾ç¬¬äºŒé˜¶æ®µå±éšœ, è°ƒç”¨ await()</span>
â†’â†’â†’ é˜¶æ®µå®Œæˆå›è°ƒ: æ‰€æœ‰çº¿ç¨‹åˆ°è¾¾å±éšœ â†â†â†
<span class="hljs-section">Thread-3: é€šè¿‡ç¬¬äºŒé˜¶æ®µå±éšœ, å”¤é†’</span>
<span class="hljs-section">Thread-1: é€šè¿‡ç¬¬äºŒé˜¶æ®µå±éšœ, å”¤é†’</span>
<span class="hljs-section">Thread-2: é€šè¿‡ç¬¬äºŒé˜¶æ®µå±éšœ, å”¤é†’</span>
</code></pre>
<p><code>CyclicBarrier</code> çš„æµ‹è¯•ä¸­ï¼Œå¤šä¸ª worker ç›¸äº’åä½œï¼Œåˆ°è¾¾ä¸´ç•Œç‚¹è§¦å‘å±éšœå›è°ƒï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æ­£å¸¸å®ç°â€œå±éšœâ€çš„åŒæ­¥åŠŸèƒ½ï¼›ç¬¬äºŒæ¬¡ä½¿ç”¨æ—¶ï¼Œä¾ç„¶å¯ä»¥å®ç°â€œå±éšœâ€çš„åŒæ­¥åŠŸèƒ½</p>
<p>åŸå› æ˜¯ <code>CyclicBarrier</code> çš„å±éšœæ˜¯å¯é‡ç”¨ï¼Œå½“ä¸æ–­è°ƒç”¨ <code>await()</code> æ–¹æ³•å¯¹ <code>count</code> é€’å‡åˆ° 0 æ—¶ï¼Œå”¤é†’æ‰€æœ‰ç­‰å¾…çš„çº¿ç¨‹ï¼Œå¹¶é‡ç½®äº† <code>count</code>ï¼Œç­‰å¾…ä¸‹ä¸€è½®çš„å±éšœåˆ°è¾¾</p>
<h2 data-id="heading-6">æ€»ç»“ä½¿ç”¨åœºæ™¯</h2>
<ul>
<li>
<p><code>CountDownLatch</code>ï¼š</p>
<ul>
<li>ç­‰å¾…ä¸»ä½“æ˜¯ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹ç­‰å¾…å¤šä¸ªä»»åŠ¡å®Œæˆ</li>
<li>ç­‰å¾…ä¸»ä½“æ˜¯å­çº¿ç¨‹ï¼Œå­çº¿ç¨‹ç­‰å¾…ä¸»çº¿ç¨‹çš„ç»Ÿä¸€å‘ä»¤åå¼€å§‹æ‰§è¡Œ</li>
<li>å…³é”®åœ¨äºå¿…é¡»æ­£ç¡®è°ƒç”¨ <code>countDown()</code> æ–¹æ³•ï¼Œå¦åˆ™å®¹æ˜“å¯¼è‡´æ°¸ä¹…é˜»å¡ï¼Œé™¤éä½¿ç”¨ <code>await(timeout)</code> æ–¹æ³•</li>
</ul>
</li>
<li>
<p><code>CyclicBarrier</code>ï¼šé€‚ç”¨æ‰€æœ‰å¤ç”¨å±éšœçš„åœºæ™¯</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ40ï¼‰Hibernateçš„å‘½åç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594627998851907590</link>    <guid>https://juejin.cn/post/7594627998851907590</guid>    <pubDate>2026-01-13T12:04:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594627998851907590" data-draft-id="7594533204004077631" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ40ï¼‰Hibernateçš„å‘½åç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-13T12:04:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ40ï¼‰Hibernateçš„å‘½åç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:04:34.000Z" title="Tue Jan 13 2026 12:04:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateçš„å‘½åç­–ç•¥</h3>
<p>Hibernateçš„å‘½åç­–ç•¥ï¼ˆNaming Strategyï¼‰ç”¨äºå®šä¹‰æ•°æ®åº“è¡¨å’Œåˆ—çš„å‘½åè§„åˆ™ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHibernateä¼šæ ¹æ®å®ä½“ç±»å’Œå±æ€§åè‡ªåŠ¨ç”Ÿæˆè¡¨åå’Œåˆ—åï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰è¿™äº›å‘½åè§„åˆ™ä»¥ç¬¦åˆç‰¹å®šçš„å‘½åçº¦å®šæˆ–æ•°æ®åº“è¦æ±‚ã€‚</p>
<h3 data-id="heading-1">é»˜è®¤å‘½åç­–ç•¥</h3>
<p>Hibernate 5.xåŠæ›´é«˜ç‰ˆæœ¬æä¾›äº†ä¸€äº›å†…ç½®çš„å‘½åç­–ç•¥ï¼Œå¦‚<code>ImplicitNamingStrategy</code>å’Œ<code>PhysicalNamingStrategy</code>ï¼Œç”¨äºåˆ†åˆ«å¤„ç†éšå¼å’Œç‰©ç†å‘½åã€‚</p>
<ul>
<li><strong>ImplicitNamingStrategy</strong>ï¼šç”¨äºå†³å®šåœ¨æ²¡æœ‰æ˜ç¡®æŒ‡å®šè¡¨åæˆ–åˆ—åçš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•ä»å®ä½“ç±»åå’Œå±æ€§åç”Ÿæˆé»˜è®¤çš„è¡¨åå’Œåˆ—åã€‚</li>
<li><strong>PhysicalNamingStrategy</strong>ï¼šç”¨äºå†³å®šæœ€ç»ˆé‡‡ç”¨çš„ç‰©ç†è¡¨åå’Œåˆ—åï¼Œå¯ä»¥ç”¨äºå°†éšå¼å‘½åç­–ç•¥ç”Ÿæˆçš„åè¿›è¡Œè¿›ä¸€æ­¥çš„è½¬æ¢ï¼ˆå¦‚å¤§å°å†™è½¬æ¢ã€æ·»åŠ å‰ç¼€æˆ–åç¼€ç­‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-2">è‡ªå®šä¹‰å‘½åç­–ç•¥ç¤ºä¾‹</h3>
<h4 data-id="heading-3">æ­¥éª¤ä¸€ï¼šåˆ›å»ºè‡ªå®šä¹‰å‘½åç­–ç•¥</h4>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°<code>PhysicalNamingStrategy</code>æ¥å£æ¥åˆ›å»ºè‡ªå®šä¹‰çš„ç‰©ç†å‘½åç­–ç•¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.naming;

<span class="hljs-keyword">import</span> org.hibernate.boot.model.naming.Identifier;
<span class="hljs-keyword">import</span> org.hibernate.boot.model.naming.PhysicalNamingStrategy;
<span class="hljs-keyword">import</span> org.hibernate.engine.jdbc.env.spi.JdbcEnvironment;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomPhysicalNamingStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PhysicalNamingStrategy</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Identifier <span class="hljs-title function_">toPhysicalCatalogName</span><span class="hljs-params">(Identifier name, JdbcEnvironment context)</span> {
        <span class="hljs-keyword">return</span> applyNamingStrategy(name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Identifier <span class="hljs-title function_">toPhysicalSchemaName</span><span class="hljs-params">(Identifier name, JdbcEnvironment context)</span> {
        <span class="hljs-keyword">return</span> applyNamingStrategy(name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Identifier <span class="hljs-title function_">toPhysicalTableName</span><span class="hljs-params">(Identifier name, JdbcEnvironment context)</span> {
        <span class="hljs-keyword">return</span> applyNamingStrategy(name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Identifier <span class="hljs-title function_">toPhysicalSequenceName</span><span class="hljs-params">(Identifier name, JdbcEnvironment context)</span> {
        <span class="hljs-keyword">return</span> applyNamingStrategy(name);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Identifier <span class="hljs-title function_">toPhysicalColumnName</span><span class="hljs-params">(Identifier name, JdbcEnvironment context)</span> {
        <span class="hljs-keyword">return</span> applyNamingStrategy(name);
    }

    <span class="hljs-keyword">private</span> Identifier <span class="hljs-title function_">applyNamingStrategy</span><span class="hljs-params">(Identifier name)</span> {
        <span class="hljs-keyword">if</span> (name == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// è‡ªå®šä¹‰å‘½åè§„åˆ™ï¼šå°†æ‰€æœ‰å‘½åè½¬æ¢ä¸ºå¤§å†™ï¼Œå¹¶åŠ ä¸Šå‰ç¼€ "TBL_"</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">newName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TBL_"</span> + name.getText().toUpperCase();
        <span class="hljs-keyword">return</span> Identifier.toIdentifier(newName);
    }
}
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤äºŒï¼šé…ç½®Hibernateä»¥ä½¿ç”¨è‡ªå®šä¹‰å‘½åç­–ç•¥</h4>
<p>åœ¨Hibernateé…ç½®æ–‡ä»¶<code>hibernate.cfg.xml</code>ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä½¿ç”¨è‡ªå®šä¹‰çš„ç‰©ç†å‘½åç­–ç•¥ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- é…ç½®è‡ªå®šä¹‰ç‰©ç†å‘½åç­–ç•¥ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.physical_naming_strategy"</span>&gt;</span>com.example.naming.CustomPhysicalNamingStrategy<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤ä¸‰ï¼šå®šä¹‰å®ä½“ç±»</h4>
<p>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>ï¼Œå¹¶è§‚å¯Ÿå…¶åœ¨æ•°æ®åº“ä¸­çš„è¡¨åå’Œåˆ—åæ˜¯å¦‚ä½•æ ¹æ®è‡ªå®šä¹‰å‘½åç­–ç•¥ç”Ÿæˆçš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {

    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">(String name, Double price)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.price = price;
    }

    <span class="hljs-comment">// Getters å’Œ Setters</span>

    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> Double <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> price;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(Double price)</span> {
        <span class="hljs-built_in">this</span>.price = price;
    }
}
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤å››ï¼šæµ‹è¯•å‘½åç­–ç•¥</h4>
<p>é€šè¿‡ä¸€ä¸ªç®€å•çš„æ“ä½œæ¥æµ‹è¯•æˆ‘ä»¬çš„è‡ªå®šä¹‰å‘½åç­–ç•¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> com.example.domain.Product;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateNamingStrategyExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Laptop"</span>, <span class="hljs-number">1000.0</span>);
            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Smartphone"</span>, <span class="hljs-number">500.0</span>);
            session.save(product1);
            session.save(product2);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-7">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>è‡ªå®šä¹‰å‘½åç­–ç•¥</strong>ï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªåä¸º<code>CustomPhysicalNamingStrategy</code>çš„ç±»ï¼Œå®ç°<code>PhysicalNamingStrategy</code>æ¥å£ï¼Œè¦†ç›–æ‰€éœ€çš„æ–¹æ³•ã€‚</li>
<li>åœ¨è¦†ç›–çš„æ–¹æ³•ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªå‘½åè½¬æ¢çš„é€»è¾‘ï¼Œä¾‹å¦‚å°†æ‰€æœ‰åå­—è½¬æ¢ä¸ºå¤§å†™å¹¶æ·»åŠ å‰ç¼€<code>"TBL_"</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š</p>
<ul>
<li>åœ¨<code>hibernate.cfg.xml</code>é…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ <code>&lt;property name="hibernate.physical_naming_strategy"&gt;com.example.naming.CustomPhysicalNamingStrategy&lt;/property&gt;</code>æ¥æŒ‡å®šè‡ªå®šä¹‰å‘½åç­–ç•¥ç±»ã€‚</li>
</ul>
</li>
<li>
<p><strong>å®ä½“ç±»</strong>ï¼š</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>ï¼Œå¹¶è§‚å¯Ÿå…¶åœ¨æ•°æ®åº“ä¸­ç”Ÿæˆçš„è¡¨åå’Œåˆ—åã€‚</li>
</ul>
</li>
<li>
<p><strong>æµ‹è¯•å‘½åç­–ç•¥</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ä¸€ä¸ªç¤ºä¾‹æ“ä½œï¼ˆå¦‚æ’å…¥æ•°æ®ï¼‰æµ‹è¯•è‡ªå®šä¹‰å‘½åç­–ç•¥çš„æ•ˆæœï¼Œè§‚å¯Ÿç”Ÿæˆçš„æ•°æ®åº“è¡¨åå’Œåˆ—åæ˜¯å¦ç¬¦åˆé¢„æœŸã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥çµæ´»åœ°å®šä¹‰å’Œä½¿ç”¨è‡ªå®šä¹‰çš„å‘½åç­–ç•¥ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„æ•°æ®åº“å‘½åè§„èŒƒæˆ–ä¸ªäººåå¥½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueæ’æ§½]]></title>    <link>https://juejin.cn/post/7594818713631588394</link>    <guid>https://juejin.cn/post/7594818713631588394</guid>    <pubDate>2026-01-13T12:15:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594818713631588394" data-draft-id="7594103243686461483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueæ’æ§½"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-13T12:15:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yyt_"/> <meta itemprop="url" content="https://juejin.cn/user/1162607282632969"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueæ’æ§½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1162607282632969/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yyt_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:15:30.000Z" title="Tue Jan 13 2026 12:15:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å…ˆæ˜ç¡®æ ¸å¿ƒæ¦‚å¿µ</h2>
<ol>
<li><strong>å…·åæ’æ§½</strong>ï¼šç»™ <code>&lt;slot&gt;</code> æ ‡ç­¾æ·»åŠ  <code>name</code> å±æ€§ï¼Œç”¨äºåŒºåˆ†ä¸åŒä½ç½®çš„æ’æ§½ï¼Œè®©çˆ¶ç»„ä»¶å¯ä»¥ç²¾å‡†åœ°å°†å†…å®¹æ’å…¥åˆ°å­ç»„ä»¶çš„æŒ‡å®šä½ç½®ï¼Œè§£å†³ã€Œé»˜è®¤æ’æ§½åªèƒ½æ’å…¥ä¸€å¤„å†…å®¹ã€çš„é—®é¢˜ã€‚</li>
<li><strong>é»˜è®¤æ’æ§½</strong>ï¼šæ²¡æœ‰ <code>name</code> å±æ€§çš„ <code>&lt;slot&gt;</code>ï¼Œæ˜¯å…·åæ’æ§½çš„ç‰¹æ®Šå½¢å¼ï¼ˆé»˜è®¤åç§°ä¸º <code>default</code>ï¼‰ï¼Œçˆ¶ç»„ä»¶ä¸­æœªæŒ‡å®šæ’æ§½åç§°çš„å†…å®¹ï¼Œä¼šé»˜è®¤æ’å…¥åˆ°è¿™é‡Œã€‚</li>
<li><strong>æ’æ§½é»˜è®¤å†…å®¹</strong>ï¼šåœ¨å­ç»„ä»¶çš„ <code>&lt;slot&gt;</code> æ ‡ç­¾å†…éƒ¨å†™å…¥å†…å®¹ï¼Œå½“çˆ¶ç»„ä»¶æœªç»™è¯¥æ’æ§½ä¼ é€’ä»»ä½•å†…å®¹æ—¶ï¼Œä¼šæ˜¾ç¤ºè¿™ä»½é»˜è®¤å†…å®¹ï¼›è‹¥çˆ¶ç»„ä»¶ä¼ é€’äº†å†…å®¹ï¼Œä¼šè¦†ç›–é»˜è®¤å†…å®¹ï¼Œæå‡ç»„ä»¶çš„å¤ç”¨æ€§å’Œå®¹é”™æ€§ã€‚</li>
<li><strong>ä½œç”¨åŸŸæ’æ§½</strong>ï¼šå­ç»„ä»¶é€šè¿‡ã€Œå±æ€§ç»‘å®šã€çš„æ–¹å¼ç»™ <code>&lt;slot&gt;</code> ä¼ é€’å†…éƒ¨ç§æœ‰æ•°æ®ï¼Œçˆ¶ç»„ä»¶åœ¨ä½¿ç”¨æ’æ§½æ—¶å¯ä»¥æ¥æ”¶è¿™äº›æ•°æ®å¹¶è‡ªå®šä¹‰æ¸²æŸ“ï¼Œè§£å†³ã€Œçˆ¶ç»„ä»¶æ— æ³•è®¿é—®å­ç»„ä»¶å†…éƒ¨æ•°æ®ã€çš„é—®é¢˜ï¼Œå®ç°ã€Œå­ç»„ä»¶ä¾›æ•°ã€çˆ¶ç»„ä»¶å®šåˆ¶æ¸²æŸ“ã€ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€åˆ†æ­¥å®ä¾‹æ¼”ç¤º</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå®ç°æœ€åŸºç¡€çš„ã€Œå…·åæ’æ§½ + é»˜è®¤æ’æ§½ã€</h3>
<p>æ ¸å¿ƒéœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªé€šç”¨çš„ã€Œé¡µé¢å®¹å™¨ç»„ä»¶ã€ï¼ŒåŒ…å«ã€Œé¡µå¤´ã€ã€Œé¡µé¢å†…å®¹ã€ã€Œé¡µè„šã€ä¸‰ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­ã€Œé¡µé¢å†…å®¹ã€ç”¨é»˜è®¤æ’æ§½ï¼Œã€Œé¡µå¤´ã€ã€Œé¡µè„šã€ç”¨å…·åæ’æ§½ã€‚</p>
<h4 data-id="heading-3">1. å­ç»„ä»¶ï¼šå®šä¹‰æ’æ§½ï¼ˆæ–‡ä»¶åï¼š<code>PageContainer.vue</code>ï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;!-- é€šç”¨é¡µé¢å®¹å™¨æ ·å¼ï¼ˆç®€å•ç¾åŒ–ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ•ˆæœï¼‰ --&gt;
  &lt;div class="page-container" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 20px 0;"&gt;
    &lt;!-- å…·åæ’æ§½ï¼šé¡µå¤´ï¼ˆname="header"ï¼‰ --&gt;
    &lt;div class="page-header" style="border-bottom: 1px dashed #e0e0e0; padding-bottom: 10px; margin-bottom: 10px;"&gt;
      &lt;slot name="header" /&gt;
    &lt;/div&gt;

    &lt;!-- é»˜è®¤æ’æ§½ï¼šé¡µé¢æ ¸å¿ƒå†…å®¹ï¼ˆæ— nameå±æ€§ï¼Œå¯¹åº”defaultï¼‰ --&gt;
    &lt;div class="page-content" style="margin: 20px 0; min-height: 100px;"&gt;
      &lt;slot /&gt;
    &lt;/div&gt;

    &lt;!-- å…·åæ’æ§½ï¼šé¡µè„šï¼ˆname="footer"ï¼‰ --&gt;
    &lt;div class="page-footer" style="border-top: 1px dashed #e0e0e0; padding-top: 10px; margin-top: 10px; text-align: right;"&gt;
      &lt;slot name="footer" /&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å­ç»„ä»¶æ— éœ€é¢å¤–é€»è¾‘ï¼Œä»…å®šä¹‰æ’æ§½ç»“æ„å³å¯
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-4">2. çˆ¶ç»„ä»¶ï¼šä½¿ç”¨æ’æ§½ï¼ˆä¼ é€’å†…å®¹ï¼Œæ–‡ä»¶åï¼š<code>App.vue</code>ï¼‰</h4>
<p>çˆ¶ç»„ä»¶é€šè¿‡ <code>v-slot:æ’æ§½å</code>ï¼ˆç®€å†™ï¼š<code>#æ’æ§½å</code>ï¼‰æŒ‡å®šå†…å®¹è¦æ’å…¥çš„å…·åæ’æ§½ï¼ŒæœªæŒ‡å®šçš„å†…å®¹é»˜è®¤æ’å…¥åˆ°é»˜è®¤æ’æ§½ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h2&gt;åŸºç¡€å…·åæ’æ§½ + é»˜è®¤æ’æ§½æ¼”ç¤º&lt;/h2&gt;

  &lt;!-- ä½¿ç”¨å­ç»„ä»¶ PageContainer --&gt;
  &lt;PageContainer&gt;
    &lt;!-- ç»™å…·åæ’æ§½ header ä¼ é€’å†…å®¹ï¼ˆç®€å†™ #headerï¼Œå®Œæ•´å†™æ³• v-slot:headerï¼‰ --&gt;
    &lt;template #header&gt;
      &lt;h3&gt;è¿™æ˜¯æ–‡ç« è¯¦æƒ…é¡µçš„é¡µå¤´&lt;/h3&gt;
      &lt;nav&gt;é¦–é¡µ &gt; æ–‡ç«  &gt; Vue æ’æ§½æ•™ç¨‹&lt;/nav&gt;
    &lt;/template&gt;

    &lt;!-- æœªæŒ‡å®šæ’æ§½åï¼Œé»˜è®¤æ’å…¥åˆ°å­ç»„ä»¶çš„é»˜è®¤æ’æ§½ --&gt;
    &lt;div&gt;
      &lt;p&gt;1. å…·åæ’æ§½å¯ä»¥è®©çˆ¶ç»„ä»¶ç²¾å‡†æ§åˆ¶å†…å®¹æ’å…¥ä½ç½®ã€‚&lt;/p&gt;
      &lt;p&gt;2. é»˜è®¤æ’æ§½ç”¨äºæ‰¿è½½ç»„ä»¶çš„æ ¸å¿ƒå†…å®¹ï¼Œä½¿ç”¨æ›´ç®€æ´ã€‚&lt;/p&gt;
      &lt;p&gt;3. è¿™éƒ¨åˆ†å†…å®¹ä¼šæ˜¾ç¤ºåœ¨é¡µå¤´å’Œé¡µè„šä¹‹é—´ã€‚&lt;/p&gt;
    &lt;/div&gt;

    &lt;!-- ç»™å…·åæ’æ§½ footer ä¼ é€’å†…å®¹ï¼ˆç®€å†™ #footerï¼‰ --&gt;
    &lt;template #footer&gt;
      &lt;span&gt;å‘å¸ƒæ—¶é—´ï¼š2026-01-13&lt;/span&gt;
      &lt;button style="margin-left: 20px; padding: 4px 12px;"&gt;æ”¶è—æ–‡ç« &lt;/button&gt;
    &lt;/template&gt;
  &lt;/PageContainer&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å¯¼å…¥å­ç»„ä»¶
import PageContainer from './PageContainer.vue';
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-5">3. è¿è¡Œæ•ˆæœä¸è¯´æ˜</h4>
<ul>
<li>é¡µå¤´åŒºåŸŸæ˜¾ç¤ºã€Œæ–‡ç« è¯¦æƒ…é¡µæ ‡é¢˜ + é¢åŒ…å±‘å¯¼èˆªã€ï¼ˆå¯¹åº” <code>#header</code> æ’æ§½å†…å®¹ï¼‰ã€‚</li>
<li>ä¸­é—´åŒºåŸŸæ˜¾ç¤ºæ ¸å¿ƒæ­£æ–‡ï¼ˆå¯¹åº”é»˜è®¤æ’æ§½å†…å®¹ï¼‰ã€‚</li>
<li>é¡µè„šåŒºåŸŸæ˜¾ç¤ºã€Œå‘å¸ƒæ—¶é—´ + æ”¶è—æŒ‰é’®ã€ï¼ˆå¯¹åº” <code>#footer</code> æ’æ§½å†…å®¹ï¼‰ã€‚</li>
<li>å…³é”®ï¼šçˆ¶ç»„ä»¶çš„ <code>&lt;template&gt;</code> æ ‡ç­¾åŒ…è£¹æ’æ§½å†…å®¹ï¼Œé€šè¿‡ <code>#æ’æ§½å</code> ç»‘å®šå­ç»„ä»¶çš„å…·åæ’æ§½ï¼Œç»“æ„æ¸…æ™°ï¼Œäº’ä¸å¹²æ‰°ã€‚</li>
</ul>
<h3 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šå®ç°ã€Œå¸¦é»˜è®¤å†…å®¹çš„æ’æ§½ã€</h3>
<p>æ ¸å¿ƒéœ€æ±‚ï¼šä¼˜åŒ–ä¸Šé¢çš„ <code>PageContainer.vue</code>ï¼Œç»™ã€Œé¡µè„šæ’æ§½ã€æ·»åŠ é»˜è®¤å†…å®¹ï¼ˆé»˜è®¤æ˜¾ç¤ºã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’®ï¼‰ï¼Œå½“çˆ¶ç»„ä»¶æœªç»™ <code>footer</code> æ’æ§½ä¼ é€’å†…å®¹æ—¶ï¼Œæ˜¾ç¤ºé»˜è®¤æŒ‰é’®ï¼›è‹¥ä¼ é€’äº†å†…å®¹ï¼Œè¦†ç›–é»˜è®¤å†…å®¹ã€‚</p>
<h4 data-id="heading-7">1. ä¿®æ”¹å­ç»„ä»¶ï¼šç»™æ’æ§½æ·»åŠ é»˜è®¤å†…å®¹ï¼ˆ<code>PageContainer.vue</code>ï¼‰</h4>
<p>ä»…ä¿®æ”¹ <code>footer</code> æ’æ§½éƒ¨åˆ†ï¼Œåœ¨ <code>&lt;slot name="footer"&gt;</code> å†…éƒ¨å†™å…¥é»˜è®¤å†…å®¹ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="page-container" style="border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 20px 0;"&gt;
    &lt;!-- å…·åæ’æ§½ï¼šé¡µå¤´ --&gt;
    &lt;div class="page-header" style="border-bottom: 1px dashed #e0e0e0; padding-bottom: 10px; margin-bottom: 10px;"&gt;
      &lt;slot name="header" /&gt;
    &lt;/div&gt;

    &lt;!-- é»˜è®¤æ’æ§½ï¼šé¡µé¢æ ¸å¿ƒå†…å®¹ --&gt;
    &lt;div class="page-content" style="margin: 20px 0; min-height: 100px;"&gt;
      &lt;slot /&gt;
    &lt;/div&gt;

    &lt;!-- å…·åæ’æ§½ï¼šé¡µè„šï¼ˆå¸¦é»˜è®¤å†…å®¹ï¼‰ --&gt;
    &lt;div class="page-footer" style="border-top: 1px dashed #e0e0e0; padding-top: 10px; margin-top: 10px; text-align: right;"&gt;
      &lt;slot name="footer"&gt;
        &lt;!-- æ’æ§½é»˜è®¤å†…å®¹ï¼šçˆ¶ç»„ä»¶æœªä¼ é€’footerå†…å®¹æ—¶ï¼Œæ˜¾ç¤ºè¯¥æŒ‰é’® --&gt;
        &lt;button style="padding: 4px 12px;" @click="backToTop"&gt;è¿”å›é¡¶éƒ¨&lt;/button&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// å®šä¹‰é»˜è®¤å†…å®¹çš„ç‚¹å‡»äº‹ä»¶ï¼ˆè¿”å›é¡¶éƒ¨ï¼‰
const backToTop = () =&gt; {
  window.scrollTo({
    top: 0,
    behavior: 'smooth' // å¹³æ»‘æ»šåŠ¨
  });
};
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-8">2. çˆ¶ç»„ä»¶æ¼”ç¤ºä¸¤ç§åœºæ™¯ï¼ˆ<code>App.vue</code>ï¼‰</h4>
<p>åˆ†åˆ«æ¼”ç¤ºã€Œä¸ä¼ é€’ footer å†…å®¹ã€å’Œã€Œä¼ é€’ footer å†…å®¹ã€çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h2&gt;å¸¦é»˜è®¤å†…å®¹çš„æ’æ§½æ¼”ç¤º&lt;/h2&gt;

  &lt;!-- åœºæ™¯1ï¼šçˆ¶ç»„ä»¶ä¸ä¼ é€’ footer æ’æ§½å†…å®¹ï¼Œæ˜¾ç¤ºå­ç»„ä»¶çš„é»˜è®¤ã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’® --&gt;
  &lt;h4&gt;åœºæ™¯1ï¼šæœªä¼ é€’é¡µè„šå†…å®¹ï¼ˆæ˜¾ç¤ºé»˜è®¤æŒ‰é’®ï¼‰&lt;/h4&gt;
  &lt;PageContainer&gt;
    &lt;template #header&gt;
      &lt;h3&gt;è¿™æ˜¯æœªä¼ é€’é¡µè„šçš„é¡µé¢&lt;/h3&gt;
    &lt;/template&gt;
    &lt;p&gt;è¯¥é¡µé¢çˆ¶ç»„ä»¶æ²¡æœ‰ç»™ footer æ’æ§½ä¼ é€’å†…å®¹ï¼Œæ‰€ä»¥é¡µè„šä¼šæ˜¾ç¤ºå­ç»„ä»¶é»˜è®¤çš„ã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’®ã€‚&lt;/p&gt;
  &lt;/PageContainer&gt;

  &lt;!-- åœºæ™¯2ï¼šçˆ¶ç»„ä»¶ä¼ é€’ footer æ’æ§½å†…å®¹ï¼Œè¦†ç›–é»˜è®¤æŒ‰é’® --&gt;
  &lt;h4 style="margin-top: 40px;"&gt;åœºæ™¯2ï¼šä¼ é€’é¡µè„šå†…å®¹ï¼ˆè¦†ç›–é»˜è®¤æŒ‰é’®ï¼‰&lt;/h4&gt;
  &lt;PageContainer&gt;
    &lt;template #header&gt;
      &lt;h3&gt;è¿™æ˜¯ä¼ é€’äº†é¡µè„šçš„é¡µé¢&lt;/h3&gt;
    &lt;/template&gt;
    &lt;p&gt;è¯¥é¡µé¢çˆ¶ç»„ä»¶ç»™ footer æ’æ§½ä¼ é€’äº†è‡ªå®šä¹‰å†…å®¹ï¼Œä¼šè¦†ç›–å­ç»„ä»¶çš„é»˜è®¤ã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’®ã€‚&lt;/p&gt;
    &lt;template #footer&gt;
      &lt;span&gt;ä½œè€…ï¼šVue å°ç™½æ•™ç¨‹&lt;/span&gt;
      &lt;button style="margin-left: 20px; padding: 4px 12px;"&gt;ç‚¹èµ&lt;/button&gt;
      &lt;button style="margin-left: 10px; padding: 4px 12px;"&gt;è¯„è®º&lt;/button&gt;
    &lt;/template&gt;
  &lt;/PageContainer&gt;
&lt;/template&gt;

&lt;script setup&gt;
import PageContainer from './PageContainer.vue';
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-9">3. è¿è¡Œæ•ˆæœä¸è¯´æ˜</h4>
<ul>
<li>åœºæ™¯1ï¼šé¡µè„šæ˜¾ç¤ºã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’®ï¼Œç‚¹å‡»å¯å®ç°å¹³æ»‘æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼ˆé»˜è®¤å†…å®¹ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>åœºæ™¯2ï¼šé¡µè„šæ˜¾ç¤ºã€Œä½œè€… + ç‚¹èµ + è¯„è®ºã€ï¼Œé»˜è®¤çš„ã€Œè¿”å›é¡¶éƒ¨ã€æŒ‰é’®è¢«è¦†ç›–ï¼ˆè‡ªå®šä¹‰å†…å®¹ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>æ ¸å¿ƒä»·å€¼ï¼šæ’æ§½é»˜è®¤å†…å®¹è®©ç»„ä»¶æ›´ã€Œå¥å£®ã€ï¼Œæ— éœ€çˆ¶ç»„ä»¶æ¯æ¬¡éƒ½ä¼ é€’æ‰€æœ‰æ’æ§½å†…å®¹ï¼Œå‡å°‘å†—ä½™ä»£ç ï¼Œæå‡ç»„ä»¶å¤ç”¨æ€§ã€‚</li>
</ul>
<h3 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šå®é™…ä¸šåŠ¡åœºæ™¯ç»¼åˆåº”ç”¨ï¼ˆå¡ç‰‡ç»„ä»¶ï¼‰</h3>
<p>æ ¸å¿ƒéœ€æ±‚ï¼šåˆ›å»ºä¸€ä¸ªé€šç”¨çš„ã€Œå•†å“å¡ç‰‡ç»„ä»¶ã€ï¼Œä½¿ç”¨å…·åæ’æ§½å®ç°ã€Œå•†å“å›¾ç‰‡ã€ã€Œå•†å“æ ‡é¢˜ã€ã€Œå•†å“ä»·æ ¼ã€ã€Œæ“ä½œæŒ‰é’®ã€çš„è‡ªå®šä¹‰é…ç½®ï¼Œå…¶ä¸­ã€Œæ“ä½œæŒ‰é’®ã€æ’æ§½å¸¦é»˜è®¤å†…å®¹ï¼ˆé»˜è®¤ã€ŒåŠ å…¥è´­ç‰©è½¦ã€æŒ‰é’®ï¼‰ã€‚</p>
<h4 data-id="heading-11">1. å­ç»„ä»¶ï¼šå•†å“å¡ç‰‡ï¼ˆ<code>GoodsCard.vue</code>ï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="goods-card" style="width: 280px; border: 1px solid #f0f0f0; border-radius: 12px; padding: 16px; margin: 16px; float: left; box-shadow: 0 2px 8px rgba(0,0,0,0.05);"&gt;
    &lt;!-- å…·åæ’æ§½ï¼šå•†å“å›¾ç‰‡ --&gt;
    &lt;div class="goods-img" style="width: 100%; height: 180px; margin-bottom: 12px; text-align: center;"&gt;
      &lt;slot name="image" /&gt;
    &lt;/div&gt;

    &lt;!-- å…·åæ’æ§½ï¼šå•†å“æ ‡é¢˜ --&gt;
    &lt;div class="goods-title" style="font-size: 16px; font-weight: 500; margin-bottom: 8px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"&gt;
      &lt;slot name="title" /&gt;
    &lt;/div&gt;

    &lt;!-- å…·åæ’æ§½ï¼šå•†å“ä»·æ ¼ --&gt;
    &lt;div class="goods-price" style="font-size: 18px; color: #ff4400; margin-bottom: 16px;"&gt;
      &lt;slot name="price" /&gt;
    &lt;/div&gt;

    &lt;!-- å…·åæ’æ§½ï¼šæ“ä½œæŒ‰é’®ï¼ˆå¸¦é»˜è®¤å†…å®¹ï¼‰ --&gt;
    &lt;div class="goods-actions" style="text-align: center;"&gt;
      &lt;slot name="action"&gt;
        &lt;!-- é»˜è®¤å†…å®¹ï¼šåŠ å…¥è´­ç‰©è½¦æŒ‰é’® --&gt;
        &lt;button style="width: 100%; padding: 8px 0; background: #ff4400; color: #fff; border: none; border-radius: 8px; cursor: pointer;"&gt;
          åŠ å…¥è´­ç‰©è½¦
        &lt;/button&gt;
      &lt;/slot&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
// æ— éœ€é¢å¤–é€»è¾‘ï¼Œä»…æä¾›æ’æ§½ç»“æ„å’Œé»˜è®¤å†…å®¹
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-12">2. çˆ¶ç»„ä»¶ï¼šä½¿ç”¨å•†å“å¡ç‰‡ç»„ä»¶ï¼ˆ<code>App.vue</code>ï¼‰</h4>
<p>è‡ªå®šä¹‰ä¸åŒå•†å“çš„å†…å®¹ï¼Œæ¼”ç¤ºæ’æ§½çš„çµæ´»æ€§ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h2&gt;å®é™…ä¸šåŠ¡åœºæ™¯ï¼šå•†å“å¡ç‰‡ç»„ä»¶&lt;/h2&gt;
  &lt;div style="overflow: hidden; clear: both;"&gt;
    &lt;!-- å•†å“1ï¼šä½¿ç”¨é»˜è®¤æ“ä½œæŒ‰é’®ï¼ˆåŠ å…¥è´­ç‰©è½¦ï¼‰ --&gt;
    &lt;GoodsCard&gt;
      &lt;template #image&gt;
        &lt;img src="https://picsum.photos/240/180?random=1" alt="å•†å“å›¾ç‰‡" style="width: 240px; height: 180px; object-fit: cover; border-radius: 8px;"&gt;
      &lt;/template&gt;
      &lt;template #title&gt;
        å°ç±³æ‰‹æœº 14 æ——èˆ°æ™ºèƒ½æ‰‹æœº
      &lt;/template&gt;
      &lt;template #price&gt;
        Â¥ 4999
      &lt;/template&gt;
      &lt;!-- æœªä¼ é€’ #action æ’æ§½ï¼Œæ˜¾ç¤ºé»˜è®¤ã€ŒåŠ å…¥è´­ç‰©è½¦ã€æŒ‰é’® --&gt;
    &lt;/GoodsCard&gt;

    &lt;!-- å•†å“2ï¼šè‡ªå®šä¹‰æ“ä½œæŒ‰é’®ï¼ˆç«‹å³è´­ä¹° + æ”¶è—ï¼‰ --&gt;
    &lt;GoodsCard&gt;
      &lt;template #image&gt;
        &lt;img src="https://picsum.photos/240/180?random=2" alt="å•†å“å›¾ç‰‡" style="width: 240px; height: 180px; object-fit: cover; border-radius: 8px;"&gt;
      &lt;/template&gt;
      &lt;template #title&gt;
        è‹¹æœ iPad Pro å¹³æ¿ç”µè„‘
      &lt;/template&gt;
      &lt;template #price&gt;
        Â¥ 7999
      &lt;/template&gt;
      &lt;!-- è‡ªå®šä¹‰ #action æ’æ§½å†…å®¹ï¼Œè¦†ç›–é»˜è®¤æŒ‰é’® --&gt;
      &lt;template #action&gt;
        &lt;button style="width: 48%; padding: 8px 0; background: #0071e3; color: #fff; border: none; border-radius: 8px; cursor: pointer; margin-right: 4%;"&gt;
          ç«‹å³è´­ä¹°
        &lt;/button&gt;
        &lt;button style="width: 48%; padding: 8px 0; background: #f0f0f0; color: #333; border: none; border-radius: 8px; cursor: pointer;"&gt;
          æ”¶è—
        &lt;/button&gt;
      &lt;/template&gt;
    &lt;/GoodsCard&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import GoodsCard from './GoodsCard.vue';
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-13">3. è¿è¡Œæ•ˆæœä¸è¯´æ˜</h4>
<ul>
<li>å•†å“1ï¼šæ“ä½œæŒ‰é’®æ˜¾ç¤ºé»˜è®¤çš„ã€ŒåŠ å…¥è´­ç‰©è½¦ã€ï¼Œå¿«é€Ÿå®ç°åŸºç¡€åŠŸèƒ½ã€‚</li>
<li>å•†å“2ï¼šæ“ä½œæŒ‰é’®æ˜¾ç¤ºã€Œç«‹å³è´­ä¹° + æ”¶è—ã€ï¼Œæ»¡è¶³è‡ªå®šä¹‰éœ€æ±‚ã€‚</li>
<li>ä¸šåŠ¡ä»·å€¼ï¼šé€šè¿‡å…·åæ’æ§½ï¼Œæ‰“é€ äº†ã€Œé€šç”¨å¯å¤ç”¨ã€çš„å•†å“å¡ç‰‡ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶å¯ä»¥æ ¹æ®ä¸åŒå•†å“åœºæ™¯ï¼Œçµæ´»é…ç½®å„ä¸ªåŒºåŸŸçš„å†…å®¹ï¼Œæ—¢å‡å°‘äº†é‡å¤ä»£ç ï¼Œåˆä¿è¯äº†çµæ´»æ€§ã€‚</li>
</ul>
<h3 data-id="heading-14">ç¬¬å››æ­¥ï¼šå®ç°ã€Œä½œç”¨åŸŸæ’æ§½ã€</h3>
<p>æ ¸å¿ƒéœ€æ±‚ï¼šåŸºäºç°æœ‰å•†å“å¡ç‰‡ç»„ä»¶ä¼˜åŒ–ï¼Œè®©å­ç»„ä»¶æŒæœ‰ç§æœ‰å•†å“æ•°æ®ï¼Œé€šè¿‡ä½œç”¨åŸŸæ’æ§½ä¼ é€’ç»™çˆ¶ç»„ä»¶ï¼Œçˆ¶ç»„ä»¶è‡ªå®šä¹‰æ¸²æŸ“æ ¼å¼ï¼ˆå¦‚ç»™é«˜ä»·å•†å“åŠ ã€Œé«˜ç«¯ã€æ ‡è¯†ã€æ˜¾ç¤ºå•†å“ä¼˜æƒ ä¿¡æ¯ï¼‰ã€‚</p>
<h4 data-id="heading-15">1. ä¿®æ”¹å­ç»„ä»¶ï¼šå®šä¹‰ä½œç”¨åŸŸæ’æ§½ï¼Œä¼ é€’å†…éƒ¨æ•°æ®ï¼ˆ<code>GoodsCard.vue</code>ï¼‰</h4>
<p>å­ç»„ä»¶æ–°å¢å†…éƒ¨ç§æœ‰æ•°æ®ï¼Œé€šè¿‡ã€Œå±æ€§ç»‘å®šã€ç»™æ’æ§½ä¼ é€’æ•°æ®ï¼ˆ<code>:æ•°æ®å="å­ç»„ä»¶å†…éƒ¨æ•°æ®"</code>ï¼‰ï¼š</p>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods-card"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 280px; border: 1px solid #f0f0f0; border-radius: 12px; padding: 16px; margin: 16px; float: left; box-shadow: 0 2px 8px rgba(0,0,0,0.05);"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä½œç”¨åŸŸæ’æ§½ï¼šå•†å“å›¾ç‰‡ï¼ˆæš´éœ²å•†å“idå’Œå›¾ç‰‡åœ°å€ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods-img"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; height: 180px; margin-bottom: 12px; text-align: center;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">:goodsId</span>=<span class="hljs-string">"goods.id"</span> <span class="hljs-attr">:imgUrl</span>=<span class="hljs-string">"goods.imgUrl"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä½œç”¨åŸŸæ’æ§½ï¼šå•†å“æ ‡é¢˜ï¼ˆæš´éœ²å•†å“åç§°å’Œä»·æ ¼ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods-title"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 16px; font-weight: 500; margin-bottom: 8px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"title"</span> <span class="hljs-attr">:goodsName</span>=<span class="hljs-string">"goods.name"</span> <span class="hljs-attr">:goodsPrice</span>=<span class="hljs-string">"goods.price"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä½œç”¨åŸŸæ’æ§½ï¼šå•†å“ä»·æ ¼ï¼ˆæš´éœ²ä»·æ ¼å’Œä¼˜æƒ ä¿¡æ¯ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods-price"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 18px; color: #ff4400; margin-bottom: 16px;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"price"</span> <span class="hljs-attr">:price</span>=<span class="hljs-string">"goods.price"</span> <span class="hljs-attr">:discount</span>=<span class="hljs-string">"goods.discount"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å…·åæ’æ§½ï¼šæ“ä½œæŒ‰é’®ï¼ˆå¸¦é»˜è®¤å†…å®¹ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"goods-actions"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"text-align: center;"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"action"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- é»˜è®¤å†…å®¹ï¼šåŠ å…¥è´­ç‰©è½¦æŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 100%; padding: 8px 0; background: #ff4400; color: #fff; border: none; border-radius: 8px; cursor: pointer;"</span>&gt;</span>
          åŠ å…¥è´­ç‰©è½¦
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// å­ç»„ä»¶å†…éƒ¨ç§æœ‰æ•°æ®ï¼ˆæ¨¡æ‹Ÿæ¥å£è¿”å›ï¼Œçˆ¶ç»„ä»¶æ— æ³•ç›´æ¥è®¿é—®ï¼‰</span>
<span class="hljs-keyword">const</span> goods = {
  <span class="hljs-attr">id</span>: <span class="hljs-number">1001</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å°ç±³æ‰‹æœº 14 æ——èˆ°æ™ºèƒ½æ‰‹æœº"</span>,
  <span class="hljs-attr">price</span>: <span class="hljs-number">4999</span>,
  <span class="hljs-attr">imgUrl</span>: <span class="hljs-string">"https://picsum.photos/240/180?random=1"</span>,
  <span class="hljs-attr">discount</span>: <span class="hljs-string">"ç«‹å‡200å…ƒï¼Œæ”¯æŒåˆ†æœŸå…æ¯"</span>
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-16">2. çˆ¶ç»„ä»¶ï¼šæ¥æ”¶å¹¶ä½¿ç”¨ä½œç”¨åŸŸæ’æ§½æ•°æ®ï¼ˆ<code>App.vue</code>ï¼‰</h4>
<p>çˆ¶ç»„ä»¶é€šè¿‡ <code>template #æ’æ§½å="æ’æ§½æ•°æ®å¯¹è±¡"</code> æ¥æ”¶å­ç»„ä»¶æš´éœ²çš„æ•°æ®ï¼Œæ”¯æŒè§£æ„èµ‹å€¼ç®€åŒ–ä»£ç ï¼Œè‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘ï¼š</p>
<p>vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿›é˜¶ï¼šä½œç”¨åŸŸæ’æ§½æ¼”ç¤ºï¼ˆå­ç»„ä»¶ä¾›æ•°ï¼Œçˆ¶ç»„ä»¶å®šåˆ¶æ¸²æŸ“ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"overflow: hidden; clear: both; margin-top: 40px;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">GoodsCard</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ¥æ”¶å›¾ç‰‡æ’æ§½çš„ä½œç”¨åŸŸæ•°æ®ï¼šslotPropsï¼ˆè‡ªå®šä¹‰åç§°ï¼ŒåŒ…å«goodsIdã€imgUrlï¼‰ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">image</span>=<span class="hljs-string">"slotProps"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"slotProps.imgUrl"</span> <span class="hljs-attr">:alt</span>=<span class="hljs-string">"'å•†å“' + slotProps.goodsId"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 240px; height: 180px; object-fit: cover; border-radius: 8px;"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- åˆ©ç”¨å­ç»„ä»¶ä¼ é€’çš„goodsIdï¼Œæ·»åŠ è‡ªå®šä¹‰æ ‡è¯† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute; top: 8px; left: 8px; background: red; color: #fff; padding: 2px 8px; border-radius: 4px; z-index: 10;"</span>&gt;</span>
          ç¼–å·ï¼š{{ slotProps.goodsId }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- æ¥æ”¶æ ‡é¢˜æ’æ§½çš„ä½œç”¨åŸŸæ•°æ®ï¼šè§£æ„èµ‹å€¼ï¼ˆæ›´ç®€æ´ï¼Œæ¨èï¼‰ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>=<span class="hljs-string">"{ goodsName, goodsPrice }"</span>&gt;</span>
        {{ goodsName }}
        <span class="hljs-comment">&lt;!-- çˆ¶ç»„ä»¶è‡ªå®šä¹‰é€»è¾‘ï¼šä»·æ ¼é«˜äº4000åŠ ã€Œé«˜ç«¯ã€æ ‡è¯† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"goodsPrice &gt; 4000"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"color: #ff4400; font-size: 12px; margin-left: 8px;"</span>&gt;</span>
          é«˜ç«¯
        <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- æ¥æ”¶ä»·æ ¼æ’æ§½çš„ä½œç”¨åŸŸæ•°æ®ï¼šç»“åˆä¼˜æƒ ä¿¡æ¯æ¸²æŸ“ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">price</span>=<span class="hljs-string">"{ price, discount }"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Â¥ {{ price }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ¸²æŸ“å­ç»„ä»¶ä¼ é€’çš„ä¼˜æƒ ä¿¡æ¯ï¼Œè‡ªå®šä¹‰æ ·å¼ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size: 12px; color: #999; margin-top: 4px; text-align: left;"</span>&gt;</span>
          {{ discount }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">GoodsCard</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsCard</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/GoodsCard.vue'</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">3. è¿è¡Œæ•ˆæœä¸è¯´æ˜</h4>
<ul>
<li>çˆ¶ç»„ä»¶æˆåŠŸè·å–å­ç»„ä»¶ç§æœ‰æ•°æ®ï¼ˆ<code>goodsId</code>ã€<code>discount</code> ç­‰ï¼‰ï¼Œå¹¶å®ç°è‡ªå®šä¹‰æ¸²æŸ“ï¼ˆå•†å“ç¼–å·ã€é«˜ç«¯æ ‡è¯†ã€ä¼˜æƒ ä¿¡æ¯ï¼‰ï¼›</li>
<li>æ ¸å¿ƒè¯­æ³•ï¼šå­ç»„ä»¶ã€Œå±æ€§ç»‘å®šä¼ æ•°æ®ã€ï¼Œçˆ¶ç»„ä»¶ã€Œæ’æ§½æ•°æ®å¯¹è±¡æ¥æ”¶ã€ï¼Œæ”¯æŒè§£æ„èµ‹å€¼ç®€åŒ–ä»£ç ï¼›</li>
<li>æ ¸å¿ƒä»·å€¼ï¼šé€šç”¨ç»„ä»¶ï¼ˆåˆ—è¡¨ã€å¡ç‰‡ã€è¡¨æ ¼ï¼‰æ—¢ä¿ç•™å†…éƒ¨æ•°æ®é€»è¾‘ï¼Œåˆå¼€æ”¾æ¸²æŸ“æ ¼å¼å®šåˆ¶æƒï¼Œæå¤§æå‡ç»„ä»¶çµæ´»æ€§å’Œå¤ç”¨æ€§ï¼›</li>
<li>æ³¨æ„ï¼šä½œç”¨åŸŸæ’æ§½æœ¬è´¨ä»æ˜¯å…·å / é»˜è®¤æ’æ§½ï¼Œåªæ˜¯å¢åŠ äº†ã€Œå­å‘çˆ¶ã€çš„æ•°æ®ä¼ é€’èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-18">ä¸‰ã€æ€»ç»“ï¼ˆæ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾ï¼ŒåŠ æ·±è®°å¿†ï¼‰</h2>
<ol>
<li><strong>ä½¿ç”¨æ­¥éª¤</strong>ï¼š</li>
</ol>
<ul>
<li>å­ç»„ä»¶ï¼šç”¨ <code>&lt;slot name="xxx"&gt;</code> å®šä¹‰å…·åæ’æ§½ï¼ˆå†…éƒ¨å¯å†™é»˜è®¤å†…å®¹ï¼‰ï¼Œç”¨ <code>:æ•°æ®å="å†…éƒ¨æ•°æ®"</code> ç»™æ’æ§½ä¼ é€’æ•°æ®ï¼ˆä½œç”¨åŸŸæ’æ§½ï¼‰ï¼›</li>
<li>çˆ¶ç»„ä»¶ï¼šç”¨ <code>&lt;template #xxx&gt;</code> ç»™æŒ‡å®šå…·åæ’æ§½ä¼ å†…å®¹ï¼Œç”¨ <code>&lt;template #xxx="slotProps"&gt;</code> æ¥æ”¶ä½œç”¨åŸŸæ’æ§½æ•°æ®ï¼ŒæœªæŒ‡å®šæ’æ§½åçš„å†…å®¹é»˜è®¤æ’å…¥åˆ° <code>&lt;slot&gt;</code>ï¼ˆé»˜è®¤æ’æ§½ï¼‰ã€‚</li>
</ul>
<ol start="2">
<li><strong>æ ¸å¿ƒè¯­æ³•</strong>ï¼š</li>
</ol>
<ul>
<li><code>v-slot:æ’æ§½å</code> å¯ç®€å†™ä¸º <code>#æ’æ§½å</code>ï¼Œä»…èƒ½ç”¨äº <code>&lt;template&gt;</code> æ ‡ç­¾æˆ–ç»„ä»¶æ ‡ç­¾ä¸Šï¼›</li>
<li>ä½œç”¨åŸŸæ’æ§½æ•°æ®æ”¯æŒè§£æ„èµ‹å€¼ï¼Œå¯è®¾ç½®é»˜è®¤å€¼ï¼ˆå¦‚ <code>#title="{ goodsName = 'é»˜è®¤å•†å“', goodsPrice = 0 }"</code>ï¼‰é¿å…æŠ¥é”™ã€‚</li>
</ul>
<ol start="3">
<li><strong>æ’æ§½ä½“ç³»</strong>ï¼š</li>
</ol>
<ul>
<li>åŸºç¡€å±‚ï¼šé»˜è®¤æ’æ§½ï¼ˆå•ä¸€åŒºåŸŸï¼‰ã€å…·åæ’æ§½ï¼ˆå¤šåŒºåŸŸç²¾å‡†å®šåˆ¶ï¼‰ï¼›</li>
<li>å¢å¼ºå±‚ï¼šæ’æ§½é»˜è®¤å†…å®¹ï¼ˆæå‡å¥å£®æ€§ï¼‰ã€ä½œç”¨åŸŸæ’æ§½ï¼ˆå­ä¾›æ•° + çˆ¶å®šåˆ¶ï¼Œè¿›é˜¶æ ¸å¿ƒï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot å®˜å®£åœæ­¢ç»´æŠ¤ 3.2.x~3.4.xï¼]]></title>    <link>https://juejin.cn/post/7594627998852005894</link>    <guid>https://juejin.cn/post/7594627998852005894</guid>    <pubDate>2026-01-13T12:37:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594627998852005894" data-draft-id="7594822454419423295" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot å®˜å®£åœæ­¢ç»´æŠ¤ 3.2.x~3.4.xï¼"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-13T12:37:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaGuide"/> <meta itemprop="url" content="https://juejin.cn/user/166781497383294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot å®˜å®£åœæ­¢ç»´æŠ¤ 3.2.x~3.4.xï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781497383294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaGuide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:37:33.000Z" title="Tue Jan 13 2026 12:37:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ Guideï¼æŠ€æœ¯çš„è¿­ä»£é€Ÿåº¦æœ‰æ—¶å€™çœŸçš„å¿«åˆ°è®©äººçª’æ¯ã€‚</p>
<p>å°±åœ¨å‰é˜µå­ï¼Œ<strong>Spring Boot 4.0</strong> æ­£å¼å‘å¸ƒï¼Œ3.2.xã€3.3.x å’Œ 3.4.x è¿™äº› 2024 å¹´å‘å¸ƒçš„ç‰ˆæœ¬å®˜æ–¹å·²ç»ä¸åœ¨ç»´æŠ¤äº†ï¼Œä¹Ÿå°±æ˜¯ä¸å†æä¾›å…è´¹çš„å®‰å…¨æ›´æ–°å’Œé”™è¯¯ä¿®å¤ã€‚</p>
<p>ä¸‹å›¾æ¥æºäº SpringBoot å®˜æ–¹æ–‡æ¡£ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2Fprojects%2Fspring-boot%23support" target="_blank" title="https://spring.io/projects/spring-boot#support" ref="nofollow noopener noreferrer">spring.io/projects/spâ€¦</a></strong> ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/569dbbf560694b1da35d1bca798395c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768912653&amp;x-signature=Il38N3EzvryFayEs1P%2BjrycKgxo%3D" alt="" loading="lazy"/></p>
<p>å…¶å®å½±å“ä¹Ÿä¸å¤§ï¼Œå¾ˆå¤šè€é¡¹ç›®ç›®å‰è¿˜æ˜¯ 2.x ç‰ˆæœ¬ï¼Œç”šè‡³è¿˜æœ‰åœç•™åœ¨ 1.x ç‰ˆæœ¬çš„ã€‚</p>
<p>å¯¹äºå…¬å¸é¡¹ç›®ï¼Œå¦‚æœèƒ½ç¨³å®šè¿è¡Œï¼Œå°±ä¸å¿…è¦å¼ºè¡Œå»å‡çº§æ–°ç‰ˆæœ¬ã€‚ä½ å‡çº§äº†ï¼Œè€æ¿çœ‹ä¸åˆ°æ•ˆæœï¼Œè¿˜å®¹æ˜“å‡ºç°é—®é¢˜ï¼Œä¸€å‡ºç°é—®é¢˜è¯´ä¸å®šå°±æ˜¯ä½ èƒŒé”…ã€‚</p>
<p>ä¸è¿‡ï¼Œå¯¹äºæ–°é¡¹ç›®å’Œä¸ªäººé¡¹ç›®æ¥è¯´ï¼Œè¿˜æ˜¯åº”è¯¥å°½é‡ä½¿ç”¨ç›¸å¯¹è¾ƒæ–°ä¸”ç¨³å®šçš„ç‰ˆæœ¬ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fzhuanlan%2Finterview-guide.html" target="_blank" title="https://javaguide.cn/zhuanlan/interview-guide.html" ref="nofollow noopener noreferrer">InterviewGuide</a> ï¼ˆåŸºäº Spring Boot 4.0 + Java 21 + Spring AI å¼€å‘çš„ AI ç®€å†åˆ†æå’Œæ¨¡æ‹Ÿé¢è¯•ç³»ç»Ÿï¼‰è¿™ä¸ªé¡¹ç›®æˆ‘å½“æ—¶å›¾çœäº‹å¤åˆ¶äº†ä¸Šä¸€ä¸ªé¡¹ç›®çš„éƒ¨åˆ†ä¾èµ–æ–‡ä»¶ï¼Œå¯¼è‡´ SpringBoot ç‰ˆæœ¬æ˜¯ 3.3ï¼Œç»™è‡ªå·±æ‰¾äº†ä¸€ä¸ªéº»çƒ¦ï¼</p>
<p>æœ‰ä¸å°‘æœ‹å‹åé¦ˆå»ºè®®å°†å…¶å‡çº§ä¸º 4.0 ç‰ˆæœ¬ï¼Œäºæ˜¯æˆ‘æ˜¨å¤©å°±æŠŠè¿™ä»¶äº‹åšäº†ï¼</p>
<p>è¿™ä¸€è·¯è¸©äº†ä¸å°‘å‘ï¼Œå°¤å…¶æ˜¯ Jackson 3 çš„åŒ…åå¤§æ”¹ï¼Œç®€ç›´æ˜¯â€œå²è¯—çº§â€çš„ Breaking Changeã€‚ä»Šå¤©å°±æŠŠè¿™ä»½<strong>ç©¿é€å¼å‡çº§æŒ‡å—</strong>åˆ†äº«ç»™å¤§å®¶ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ï¼</p>
<p>å…·ä½“çš„æ›´æ–°å†…å®¹å¯ä»¥æŸ¥çœ‹è¿™ä¸ª Commitï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnailclimb%2Finterview-guide%2Fcommit%2Ff7bb05980b725c8658f93a4c511bf4b2ec616b82" target="_blank" title="https://github.com/Snailclimb/interview-guide/commit/f7bb05980b725c8658f93a4c511bf4b2ec616b82" ref="nofollow noopener noreferrer">github.com/Snailclimb/â€¦</a></strong> ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦å‡çº§ï¼Ÿ</h2>
<p>Spring Boot 4.0.0 åŸºäº Spring Framework 7.0ï¼Œå…¨é¢æ”¯æŒ Java 25ï¼ˆå«è™šæ‹Ÿçº¿ç¨‹ä¼˜åŒ–ï¼‰ã€‚æ ¸å¿ƒæ–°ç‰¹æ€§åŒ…æ‹¬ï¼šHTTP Service Clients ç®€åŒ–è¿œç¨‹è°ƒç”¨ï¼›åŸç”Ÿ API ç‰ˆæœ¬ç®¡ç†ï¼›å…¨é¢é‡‡ç”¨ JSpecify ç©ºå®‰å…¨ä½“ç³»ï¼ˆé»˜è®¤éç©ºï¼Œç¼–è¯‘æœŸé˜² NPEï¼‰ï¼›å…³é”®ä¾èµ–å‡çº§è‡³ Jackson 3.0ã€Tomcat 11ã€Hibernate 7.1 ç­‰ï¼›æ¨¡å—åŒ–è®¾è®¡æ”¹è¿›ï¼›åŒ–æ”¯æŒ Gradle 9ï¼›Redis é™æ€ä¸»ä»é…ç½®ï¼›ç§»é™¤ Undertowã€‚</p>
<p>æˆ‘ä¸“é—¨åˆ†äº«è¿‡ä¸€ç¯‡æ–‡ç« ä»‹ç»è¿™äº›æ–°ç‰¹æ€§ï¼š<a href="https://juejin.cn/post/7574749664492781602" target="_blank" title="https://juejin.cn/post/7574749664492781602">Spring Boot 4.0 æ­£å¼å‘å¸ƒï¼Œäººå·²éº»ã€‚ã€‚ã€‚</a>ï¼ˆç¡®å®å·²ç»éº»äº†ï¼‰ã€‚</p>
<h2 data-id="heading-1">ç‰ˆæœ¬å˜æ›´æ€»è§ˆ</h2>
<p>åœ¨è¿™é‡Œæä¸ªé†’ï¼Œå‡çº§åƒä¸‡åˆ«â€œè·³çº§â€ã€‚å®˜æ–¹å»ºè®®çš„å‡çº§è·¯å¾„ï¼š<strong>3.3/3.4 â†’ 3.5 â†’ 4.0</strong>ï¼Œè¿™æ¡è·¯å¾„èƒ½é¿å… 90% çš„å‘ã€‚</p>




























































<table><thead><tr><th>ç»„ä»¶</th><th>å‡çº§å‰</th><th>å‡çº§å</th></tr></thead><tbody><tr><td>Spring Boot</td><td>3.3.6</td><td>4.0.1</td></tr><tr><td>Spring Framework</td><td>6.x</td><td>7.x</td></tr><tr><td>Spring AI</td><td>1.1.2</td><td>2.0.0-M1</td></tr><tr><td>Redisson</td><td>3.24.3</td><td>4.0.0</td></tr><tr><td>Gradle</td><td>8.8</td><td>8.14</td></tr><tr><td>Hibernate</td><td>6.x</td><td>7.2.0.Final</td></tr><tr><td>Tomcat</td><td>10.x</td><td>11.0.15</td></tr><tr><td>Jackson</td><td>2.x</td><td>3.x</td></tr><tr><td>iText</td><td>7.2.5</td><td>8.0.5</td></tr><tr><td>MapStruct</td><td>1.5.5.Final</td><td>1.6.3</td></tr></tbody></table>
<h2 data-id="heading-2">å‡çº§æ­¥éª¤è¯¦è§£</h2>
<h3 data-id="heading-3">Step 1: å‡çº§ Gradle</h3>
<p>Spring Boot 4.0 è¦æ±‚ Gradle 8.14 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚é¦–å…ˆéœ€è¦å‡çº§ Gradle Wrapperï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸´æ—¶ä½¿ç”¨æ—§ç‰ˆæœ¬ Spring Boot æ‰§è¡Œ wrapper å‡çº§å‘½ä»¤</span>
./gradlew wrapper --gradle-version=8.14
</code></pre>
<p>ä¿®æ”¹ <code>gradle/wrapper/gradle-wrapper.properties</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">distributionUrl=https\://services.gradle.org/distributions/gradle-8.14-bin.zip
</code></pre>
<h3 data-id="heading-4">Step 2: æ›´æ–°ä¾èµ–ç‰ˆæœ¬</h3>
<p>ä¿®æ”¹ <code>gradle/libs.versions.toml</code>ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[versions]</span>
<span class="hljs-attr">spring-boot</span> = <span class="hljs-string">"4.0.1"</span>
<span class="hljs-attr">spring-ai</span> = <span class="hljs-string">"2.0.0-M1"</span>
<span class="hljs-attr">redisson</span> = <span class="hljs-string">"4.0.0"</span>
<span class="hljs-attr">mapstruct</span> = <span class="hljs-string">"1.6.3"</span>
<span class="hljs-attr">aws-sdk</span> = <span class="hljs-string">"2.29.51"</span>
<span class="hljs-attr">itext</span> = <span class="hljs-string">"8.0.5"</span>
<span class="hljs-attr">lombok</span> = <span class="hljs-string">"1.18.36"</span>
<span class="hljs-attr">junit-jupiter</span> = <span class="hljs-string">"5.12.0"</span>

<span class="hljs-section">[plugins]</span>
<span class="hljs-attr">spring-boot</span> = { id = <span class="hljs-string">"org.springframework.boot"</span>, version.ref = <span class="hljs-string">"spring-boot"</span> }
<span class="hljs-attr">spring-dependency-management</span> = { id = <span class="hljs-string">"io.spring.dependency-management"</span>, version = <span class="hljs-string">"1.1.7"</span> }
</code></pre>
<p><code>libs.versions.toml</code>æ˜¯ Gradle 7.0 å¼•å…¥å¹¶ä» 7.4 ç‰ˆæœ¬å¼€å§‹æ­£å¼æ¨èçš„ <strong>â€œç‰ˆæœ¬ç›®å½•â€ï¼ˆVersion Catalogï¼‰</strong> æ–‡ä»¶ã€‚å®ƒçš„æ ¸å¿ƒä½œç”¨æ˜¯<strong>é›†ä¸­ç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰çš„ä¾èµ–åº“åŠå…¶ç‰ˆæœ¬å·</strong>ã€‚</p>
<h3 data-id="heading-5">Step 3: æ¨¡å—åŒ–é‡æ„ (Starter å˜æ›´)</h3>
<p>Spring Boot 4.0 é‡‡ç”¨äº†æ›´ç»†ç²’åº¦çš„æ¨¡å—åŒ–è®¾è®¡ï¼Œéœ€è¦æ›´æ–° starter ä¾èµ–ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">// å‡çº§å‰
implementation 'org.springframework.boot:spring-boot-starter-web'

// å‡çº§å
implementation 'org.springframework.boot:spring-boot-starter-webmvc'
</code></pre>
<p>å®Œæ•´çš„ <code>build.gradle</code> ä¾èµ–å˜æ›´ï¼š</p>
<pre><code class="hljs language-groovy" lang="groovy">dependencies {
    // Spring Boot Starters (Boot 4.0 modular design)
    implementation 'org.springframework.boot:spring-boot-starter-webmvc'
    implementation 'org.springframework.boot:spring-boot-starter-validation'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'

    // Spring AI 2.0
    implementation "org.springframework.ai:spring-ai-starter-model-openai:${libs.versions.spring.ai.get()}"
    implementation "org.springframework.ai:spring-ai-starter-vector-store-pgvector:${libs.versions.spring.ai.get()}"

    // Redisson 4.0
    implementation "org.redisson:redisson-spring-boot-starter:${libs.versions.redisson.get()}"

    // iText 8
    implementation "com.itextpdf:itext-core:${libs.versions.itext.get()}"
    implementation "com.itextpdf:font-asian:${libs.versions.itext.get()}"
}
</code></pre>
<h3 data-id="heading-6">Step 4: å²ä¸Šæœ€å‘çš„ Jackson 3 è¿ç§»</h3>
<p>è¿™æ˜¯æœ¬æ¬¡å‡çº§æœ€ç—›è‹¦çš„éƒ¨åˆ†ã€‚Jackson 3 å°†åŒ…åä» <code>com.fasterxml.jackson</code> å…¨é¢æ”¹ä¸ºäº† <code>tools.jackson</code>ã€‚è¿™æ„å‘³ç€ä½ é¡¹ç›®ä¸­æ‰€æœ‰çš„ <code>ObjectMapper</code>ã€<code>JsonNode</code> å¯¼å…¥éƒ½å¤±æ•ˆäº†ã€‚</p>
<p><strong>éœ€è¦ä¿®æ”¹çš„å¯¼å…¥è¯­å¥ï¼š</strong></p>





















<table><thead><tr><th>å‡çº§å‰</th><th>å‡çº§å</th></tr></thead><tbody><tr><td><code>com.fasterxml.jackson.databind.ObjectMapper</code></td><td><code>tools.jackson.databind.ObjectMapper</code></td></tr><tr><td><code>com.fasterxml.jackson.core.type.TypeReference</code></td><td><code>tools.jackson.core.type.TypeReference</code></td></tr><tr><td><code>com.fasterxml.jackson.core.JsonProcessingException</code></td><td><code>tools.jackson.core.JacksonException</code></td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ä»£ç ä¿®æ”¹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‡çº§å‰</span>
<span class="hljs-keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.core.type.TypeReference;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;

<span class="hljs-keyword">try</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(data);
} <span class="hljs-keyword">catch</span> (JsonProcessingException e) {
    <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
}

<span class="hljs-comment">// å‡çº§å</span>
<span class="hljs-keyword">import</span> tools.jackson.core.JacksonException;
<span class="hljs-keyword">import</span> tools.jackson.core.type.TypeReference;
<span class="hljs-keyword">import</span> tools.jackson.databind.ObjectMapper;

<span class="hljs-keyword">try</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(data);
} <span class="hljs-keyword">catch</span> (JacksonException e) {
    <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
}
</code></pre>
<p>æˆ‘ä»¬éœ€è¦åœ¨ <code>PdfExportService</code>ã€<code>RedisService</code> ç­‰ 7 ä¸ªæ ¸å¿ƒä¸šåŠ¡ç±»ä¸­ï¼Œåˆ©ç”¨ IDE çš„å…¨å±€æ›¿æ¢åŠŸèƒ½ï¼Œå°† <code>com.fasterxml.jackson</code> ç»Ÿä¸€ä¿®æ­£ä¸º <code>tools.jackson</code>ã€‚</p>
<h3 data-id="heading-7">Step 5: Redisson 4.0 API è¿ç§»</h3>
<p>Redisson 4.0 å¯¹éƒ¨åˆ†ç±»è¿›è¡Œäº†åŒ…é‡ç»„ï¼Œ<code>StreamMessageId</code> ç­‰ Stream ç›¸å…³ç±»ç§»è‡³æ–°åŒ…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‡çº§å‰</span>
<span class="hljs-keyword">import</span> org.redisson.api.StreamMessageId;

<span class="hljs-comment">// å‡çº§å</span>
<span class="hljs-keyword">import</span> org.redisson.api.stream.StreamMessageId;
</code></pre>
<p>è¿™ä¸ªè¿˜å¥½ç‚¹ï¼Œåªæ¶‰åŠåˆ° 3 ä¸ªç±»ï¼š</p>
<ul>
<li><code>infrastructure/redis/RedisService.java</code></li>
<li><code>modules/resume/listener/AnalyzeStreamConsumer.java</code></li>
<li><code>modules/knowledgebase/listener/VectorizeStreamConsumer.java</code></li>
</ul>
<h2 data-id="heading-8">éªŒè¯å‡çº§ç»“æœ</h2>
<p>å‡çº§å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¯‘é¡¹ç›®</span>
./gradlew :app:compileJava

<span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
./gradlew :app:build

<span class="hljs-comment"># å¯åŠ¨åº”ç”¨</span>
./gradlew :app:bootRun
</code></pre>
<p>æˆåŠŸå¯åŠ¨åï¼Œæ—¥å¿—åº”æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">  .   <span class="hljs-strong">____</span>          _            __ _ _
 /\\ / <span class="hljs-strong">__<span class="hljs-emphasis">_'_</span> __</span> _ <span class="hljs-emphasis">_(_</span>)_ __  __ _ \ \ \ \
( ( )\<span class="hljs-strong">___ | '_ | '<span class="hljs-emphasis">_| | '_</span> \/ <span class="hljs-emphasis">_` | \ \ \ \
 \\/  _</span>__</span>)| |<span class="hljs-emphasis">_)| | | | | || (_</span>| |  ) ) ) )
  '  |<span class="hljs-strong">____</span>| .<span class="hljs-strong">__|<span class="hljs-emphasis">_| |_</span>|<span class="hljs-emphasis">_| |_</span>\__</span>, | / / / /
 =========|<span class="hljs-emphasis">_|==============|<span class="hljs-strong">___/=/_/_/_/

 :: Spring Boot ::                (v4.0.1)

... Tomcat initialized with port 8080 (http)
... Starting Servlet engine: [Apache Tomcat/11.0.15]
... Redisson 4.0.0
... HHH000001: Hibernate ORM core version 7.2.0.Final
</span></span></code></pre>
<h2 data-id="heading-9">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2Fblog%2F2025%2F11%2F20%2Fspring-boot-4-0-0-available-now%2F" target="_blank" title="https://spring.io/blog/2025/11/20/spring-boot-4-0-0-available-now/" ref="nofollow noopener noreferrer">Spring Boot 4.0 å‘å¸ƒå…¬å‘Š</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-boot%2Fwiki%2FSpring-Boot-4.0-Migration-Guide" target="_blank" title="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-4.0-Migration-Guide" ref="nofollow noopener noreferrer">Spring Boot 4.0 Migration Guide</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fspring.io%2Fblog%2F2025%2F12%2F11%2Fspring-ai-2-0-0-M1-available-now%2F" target="_blank" title="https://spring.io/blog/2025/12/11/spring-ai-2-0-0-M1-available-now/" ref="nofollow noopener noreferrer">Spring AI 2.0.0-M1 å‘å¸ƒå…¬å‘Š</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fredisson%2Fredisson%2Fblob%2Fmaster%2FCHANGELOG.md" target="_blank" title="https://github.com/redisson/redisson/blob/master/CHANGELOG.md" ref="nofollow noopener noreferrer">Redisson Changelog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFasterXML%2Fjackson%2Fwiki%2FJackson-Release-3.0" target="_blank" title="https://github.com/FasterXML/jackson/wiki/Jackson-Release-3.0" ref="nofollow noopener noreferrer">Jackson 3 Release Notes</a></li>
</ul>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>æœ¬æ¬¡ Spring Boot 4.0 çš„å‡çº§ä¸»è¦æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>æ„å»ºå·¥å…·å‡çº§</strong>ï¼šGradle 8.14+</li>
<li><strong>æ¨¡å—åŒ–å˜æ›´</strong>ï¼š<code>starter-web</code> â†’ <code>starter-webmvc</code></li>
<li><strong>Jackson 3 è¿ç§»</strong>ï¼šåŒ…åä» <code>com.fasterxml.jackson</code> æ”¹ä¸º <code>tools.jackson</code></li>
<li><strong>ç¬¬ä¸‰æ–¹åº“å…¼å®¹</strong>ï¼šRedissonã€Spring AI ç­‰éœ€è¦å‡çº§åˆ°å¯¹åº”çš„å…¼å®¹ç‰ˆæœ¬</li>
</ol>
<p>éµå¾ªå®˜æ–¹æ¨èçš„ 3.3 â†’ 3.5 â†’ 4.0 å‡çº§è·¯å¾„ï¼Œå¯ä»¥æ›´å¹³æ»‘åœ°å®Œæˆè¿ç§»ã€‚å‡çº§è¿‡ç¨‹ä¸­é‡åˆ°çš„å¤§å¤šæ•°é—®é¢˜éƒ½ä¸åŒ…åå˜æ›´æœ‰å…³ï¼Œé€šè¿‡å…¨å±€æœç´¢æ›¿æ¢å³å¯è§£å†³ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fzhuanlan%2Finterview-guide.html" target="_blank" title="https://javaguide.cn/zhuanlan/interview-guide.html" ref="nofollow noopener noreferrer">InterviewGuide</a> ä¼ é€é—¨ï¼š</p>
<ul>
<li>Github åœ°å€ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSnailclimb%2Finterview-guide" target="_blank" title="https://github.com/Snailclimb/interview-guide" ref="nofollow noopener noreferrer">github.com/Snailclimb/â€¦</a></strong></li>
<li>Gitee åœ°å€ï¼š<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FSnailClimb%2Finterview-guide" target="_blank" title="https://gitee.com/SnailClimb/interview-guide" ref="nofollow noopener noreferrer">gitee.com/SnailClimb/â€¦</a></strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HarmonyOS å¤šæ¨¡å—é¡¹ç›®ä¸­çš„å…¬å…±åº“æ²»ç†ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7594655863548280884</link>    <guid>https://juejin.cn/post/7594655863548280884</guid>    <pubDate>2026-01-13T12:43:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594655863548280884" data-draft-id="7594616268781961243" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HarmonyOS å¤šæ¨¡å—é¡¹ç›®ä¸­çš„å…¬å…±åº“æ²»ç†ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-01-13T12:43:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="90åæ™¨ä»”"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476705773"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HarmonyOS å¤šæ¨¡å—é¡¹ç›®ä¸­çš„å…¬å…±åº“æ²»ç†ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476705773/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    90åæ™¨ä»”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:43:30.000Z" title="Tue Jan 13 2026 12:43:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ <strong>é¸¿è’™ï¼ˆHarmonyOSï¼‰å¤šæ¨¡å—é¡¹ç›®</strong> ä¸­ï¼Œå¦‚æœä½ å¸Œæœ› <strong>é¿å…åœ¨æ¯ä¸ªæ¨¡å—ï¼ˆModuleï¼‰ä¸­é‡å¤é›†æˆåŒä¸€ä¸ªä¸‰æ–¹åº“æˆ–å…¬å…±åº“</strong>ï¼Œå¯ä»¥å°†è¯¥åº“ <strong>æå‡åˆ°é¡¹ç›®çº§åˆ«ï¼ˆProject-levelï¼‰è¿›è¡Œç»Ÿä¸€ç®¡ç†</strong>ã€‚ä»¥ä¸‹æ˜¯æ ‡å‡†åšæ³•ï¼Œé€‚ç”¨äº <strong>Stage æ¨¡å‹ + ArkTS + DevEco Studio</strong> çš„å·¥ç¨‹ç»“æ„ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… ç›®æ ‡</h2>
<blockquote>
<p>å°†å…¬å…±åº“ï¼ˆå¦‚ <code>@ohos/utils</code>ã€è‡ªç ”å·¥å…·åº“ã€ç¬¬ä¸‰æ–¹ npm åŒ…ç­‰ï¼‰<strong>åªå£°æ˜ä¸€æ¬¡</strong>ï¼Œä¾›å¤šä¸ªæ¨¡å—ï¼ˆentryã€featureã€service ç­‰ï¼‰<strong>å…±äº«ä½¿ç”¨</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ“ é¸¿è’™é¡¹ç›®ç»“æ„å›é¡¾</h2>
<pre><code class="hljs language-bash" lang="bash">MyHarmonyProject/
â”œâ”€â”€ build-profile.json5        â† é¡¹ç›®çº§æ„å»ºé…ç½®
â”œâ”€â”€ oh-package.json5           â† é¡¹ç›®çº§ä¾èµ–ï¼ˆå…³é”®ï¼ï¼‰
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ entry/                 â† ä¸»æ¨¡å—
â”‚   â”œâ”€â”€ feature_news/          â† åŠŸèƒ½æ¨¡å—1
â”‚   â””â”€â”€ feature_ebook/         â† åŠŸèƒ½æ¨¡å—2
â””â”€â”€ libs/                      â† ï¼ˆå¯é€‰ï¼‰æœ¬åœ° aar/har å…¬å…±åº“
</code></pre>
<hr/>
<h2 data-id="heading-2">âœ… æ­£ç¡®åšæ³•ï¼šåœ¨ <strong>é¡¹ç›®æ ¹ç›®å½•çš„ <code>oh-package.json5</code></strong> ä¸­å£°æ˜ä¾èµ–</h2>
<h3 data-id="heading-3">æ­¥éª¤ 1ï¼šåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>oh-package.json5</code> ä¸­æ·»åŠ ä¾èµ–</h3>
<pre><code class="hljs language-perl" lang="perl">{
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-regexp">//</span> å¼€å‘ä¾èµ–ï¼ˆå¦‚ typesï¼‰
  },
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-regexp">//</span> ğŸ‘‡ æŠŠå…¬å…±åº“æ”¾åœ¨è¿™é‡Œï¼ˆé¡¹ç›®çº§ï¼‰
    <span class="hljs-string">"@ohos/utils"</span>: <span class="hljs-string">"1.0.0"</span>,
    <span class="hljs-string">"some-third-party-lib"</span>: <span class="hljs-string">"^2.3.0"</span>
  }
}
</code></pre>
<blockquote>
<p>âœ… è¿™æ ·ï¼Œ<strong>æ‰€æœ‰å­æ¨¡å—éƒ½å¯ä»¥ç»§æ‰¿ä½¿ç”¨è¿™äº›ä¾èµ–</strong>ï¼Œæ— éœ€åœ¨æ¯ä¸ª <code>module/xxx/oh-package.json5</code> ä¸­é‡å¤å£°æ˜ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">æ­¥éª¤ 2ï¼š<strong>åˆ é™¤å„å­æ¨¡å—ä¸­çš„é‡å¤ä¾èµ–</strong></h3>
<p>ç¡®ä¿ <code>modules/entry/oh-package.json5</code>ã€<code>modules/feature_news/oh-package.json5</code> ç­‰ <strong>ä¸å†åŒ…å«</strong> å·²æå‡åˆ°é¡¹ç›®çº§çš„ä¾èµ–ã€‚</p>
<p>ä¾‹å¦‚ï¼Œ<strong>ä¸è¦</strong>åœ¨ <code>entry/oh-package.json5</code> ä¸­å†å†™ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"@ohos/utils"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span>  <span class="hljs-comment">// âŒ åˆ é™¤è¿™è¡Œï¼</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-5">æ­¥éª¤ 3ï¼šåœ¨å­æ¨¡å—ä»£ç ä¸­æ­£å¸¸ import ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ entry æˆ– feature_news æ¨¡å—ä¸­</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ZGJYBAppearanceColorUtil</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos/utils'</span>;

<span class="hljs-comment">// âœ… å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå› ä¸ºä¾èµ–å·²ç”±é¡¹ç›®çº§æä¾›</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-7">1. <strong>ä»…é€‚ç”¨äº <code>npm</code> ç±»å‹çš„åŒ…ï¼ˆé€šè¿‡ <code>ohpm</code> å®‰è£…ï¼‰</strong></h3>
<ul>
<li>å¦‚æœä½ æ˜¯é€šè¿‡ <code>ohpm install @ohos/utils</code> å®‰è£…çš„åº“ï¼Œå®ƒä¼šè¢«è®°å½•åœ¨ <code>oh-package.json5</code>ã€‚</li>
<li>è¿™ç§æ–¹å¼æ”¯æŒ <strong>ä¾èµ–æå‡ï¼ˆhoistingï¼‰</strong> ï¼Œç±»ä¼¼ npm/yarn çš„ workspaceã€‚</li>
</ul>
<h3 data-id="heading-8">2. <strong>æœ¬åœ° <code>.har</code> æˆ– <code>.hap</code> åº“ä¸èƒ½è¿™æ ·å…±äº«</strong></h3>
<ul>
<li>
<p>å¦‚æœä½ çš„â€œåº“â€æ˜¯ä¸€ä¸ª <strong>æœ¬åœ°å¼€å‘çš„ <code>.har</code>ï¼ˆHarmonyOS Archiveï¼‰æ¨¡å—</strong>ï¼Œåˆ™éœ€è¦ï¼š</p>
<ul>
<li>å°†å…¶æ”¾åœ¨ <code>libs/</code> ç›®å½•ä¸‹ï¼›</li>
<li>åœ¨ <strong>æ¯ä¸ªéœ€è¦ä½¿ç”¨çš„æ¨¡å—</strong> çš„ <code>module.json5</code> ä¸­å£°æ˜ <code>deps</code> å¼•ç”¨ï¼›</li>
<li>æˆ–è€…å°†å…¶å‘å¸ƒä¸ºç§æœ‰ <code>ohpm</code> åŒ…ï¼Œå†é€šè¿‡ <code>oh-package.json5</code> å¼•å…¥ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-9">ç¤ºä¾‹ï¼šå¼•ç”¨æœ¬åœ° harï¼ˆä»éœ€é€æ¨¡å—é…ç½®ï¼‰</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// modules/entry/module.json5</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"deps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"../libs/my-common-utils.har"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>âŒ è¿™ç§æƒ…å†µ<strong>æ— æ³•å®Œå…¨é¿å…é‡å¤å£°æ˜</strong>ï¼Œä½†ä½ å¯ä»¥é€šè¿‡è„šæœ¬æˆ–æ¨¡æ¿å‡å°‘å·¥ä½œé‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">3. <strong>ç¡®ä¿ DevEco Studio åŒæ­¥äº†ä¾èµ–</strong></h3>
<ul>
<li>
<p>ä¿®æ”¹ <code>oh-package.json5</code> åï¼Œç‚¹å‡» <strong>â€œSync Nowâ€</strong> æˆ–è¿è¡Œï¼š</p>
<pre><code class="hljs">ohpm install
</code></pre>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œï¼Œä¼šå®‰è£…æ‰€æœ‰æ¨¡å—å…±äº«çš„ä¾èµ–ã€‚</p>
</li>
</ul>
<hr/>
<h2 data-id="heading-11">âœ… æœ€ä½³å®è·µæ€»ç»“</h2>

























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>å…¬å…± npm/ohpm åº“</strong>ï¼ˆå¦‚ <code>@ohos/utils</code>ï¼‰</td><td>âœ… åœ¨ <strong>é¡¹ç›®æ ¹ç›®å½• <code>oh-package.json5</code></strong> ä¸­å£°æ˜ä¸€æ¬¡</td></tr><tr><td><strong>è‡ªç ”å…¬å…±é€»è¾‘</strong>ï¼ˆTS å·¥å…·å‡½æ•°ï¼‰</td><td>âœ… åˆ›å»ºä¸€ä¸ª <code>shared</code> æ¨¡å—ï¼Œå‘å¸ƒä¸º <code>ohpm</code> ç§æœ‰åŒ…ï¼Œå†åœ¨é¡¹ç›®çº§å¼•å…¥</td></tr><tr><td><strong>æœ¬åœ° <code>.har</code> åº“</strong></td><td>âš ï¸ éœ€åœ¨æ¯ä¸ªæ¨¡å—çš„ <code>module.json5</code> ä¸­å¼•ç”¨ï¼Œä½†å¯ç»Ÿä¸€æ”¾åœ¨ <code>libs/</code> ç›®å½•ç®¡ç†</td></tr><tr><td><strong>é¿å…é‡å¤ä»£ç </strong></td><td>âœ… æŠ½è±¡å…¬å…±ç»„ä»¶/å·¥å…·åˆ°ç‹¬ç«‹æ¨¡å—ï¼Œé€šè¿‡ä¾èµ–æ³¨å…¥ä½¿ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-12">ğŸ”§ é™„åŠ å»ºè®®ï¼šåˆ›å»º <code>shared</code> æ¨¡å—ï¼ˆé«˜çº§ï¼‰</h2>
<ol>
<li>
<p>æ–°å»ºæ¨¡å—ï¼š<code>File &gt; New &gt; Module &gt; Static Library (HAR)</code></p>
<ul>
<li>å‘½åä¸º <code>shared</code></li>
</ul>
</li>
<li>
<p>åœ¨å…¶ä¸­æ”¾ç½®å…¬å…±å·¥å…·ç±»ã€å¸¸é‡ã€ç½‘ç»œå°è£…ç­‰</p>
</li>
<li>
<p>åœ¨ <code>shared/oh-package.json5</code> ä¸­å®šä¹‰åŒ…åï¼š</p>
<pre><code class="hljs language-perl" lang="perl">{ <span class="hljs-string">"name"</span>: <span class="hljs-string">"@myorg/shared"</span>, <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span> }
</code></pre>
</li>
<li>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ohpm install ./modules/shared --save
</code></pre>
</li>
<li>
<p>ç„¶ååœ¨ <code>oh-package.json5</code> ä¸­å°±ä¼šå‡ºç°ï¼š</p>
<pre><code class="hljs language-less" lang="less">"<span class="hljs-selector-tag">dependencies</span>": {
  "<span class="hljs-variable">@myorg</span>/shared<span class="hljs-string">": "</span><span class="hljs-attribute">file</span>:./modules/shared"
}
</code></pre>
</li>
<li>
<p>æ‰€æœ‰æ¨¡å—å³å¯é€šè¿‡ <code>import { xxx } from '@myorg/shared'</code> ä½¿ç”¨ã€‚</p>
</li>
</ol>
<blockquote>
<p>âœ… è¿™æ˜¯æœ€æ¥è¿‘â€œé¡¹ç›®çº§å…¬å…±åº“â€çš„é¸¿è’™å®˜æ–¹æ¨èæ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">âœ… ç»“è®º</h2>
<blockquote>
<p><strong>æŠŠå…¬å…±åº“å†™åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ <code>oh-package.json5</code> çš„ <code>dependencies</code> ä¸­ï¼Œå³å¯å®ç°â€œä¸€æ¬¡é›†æˆï¼Œå¤šæ¨¡å—å…±äº«â€</strong> ã€‚</p>
</blockquote>
<p>åªè¦ä½ çš„åº“æ˜¯é€šè¿‡ <code>ohpm</code> ç®¡ç†çš„ï¼ˆåŒ…æ‹¬æœ¬åœ° file: å¼•ç”¨ï¼‰ï¼Œå°±æ”¯æŒè¿™ç§å…±äº«æœºåˆ¶ã€‚è¿™æ˜¯ HarmonyOS å¤šæ¨¡å—é¡¹ç›®çš„æ ‡å‡†ä¾èµ–ç®¡ç†æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é©¾é©­ CPU ä¸ç¼–è¯‘å™¨ï¼šApache Doris å®ç°æè‡´æ€§èƒ½çš„åº•å±‚é€»è¾‘]]></title>    <link>https://juejin.cn/post/7594655863548264500</link>    <guid>https://juejin.cn/post/7594655863548264500</guid>    <pubDate>2026-01-13T12:43:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594655863548264500" data-draft-id="7594661351513276451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é©¾é©­ CPU ä¸ç¼–è¯‘å™¨ï¼šApache Doris å®ç°æè‡´æ€§èƒ½çš„åº•å±‚é€»è¾‘"/> <meta itemprop="keywords" content="è¿ç»´,Apache,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-13T12:43:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é©¾é©­ CPU ä¸ç¼–è¯‘å™¨ï¼šApache Doris å®ç°æè‡´æ€§èƒ½çš„åº•å±‚é€»è¾‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:43:24.000Z" title="Tue Jan 13 2026 12:43:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‡å» 10 å¹´ï¼Œæ•°æ®åˆ†æåŸºå‡†çš„æˆç»©å·²ç»æå‡äº†æ•°åå€ã€‚è¿™ç§æ€§èƒ½çš„æå‡é€ å°±äº†å•†ä¸šä¸–ç•Œä¸­æ›´å¤§çš„å¯èƒ½â€”â€”ä»ç‰¹å®šç»´åº¦çš„ MOLAP åˆ†æå’Œå‘¨æœŸæŠ¥è¡¨ï¼Œåˆ°éšæ—¶éšåœ°ä»ä»»æ„ç»´åº¦åˆ†æä¸­å‘æ˜æ–°èŒƒå¼çš„ Ad-hoc æŸ¥è¯¢ï¼Œç›´åˆ°ç°åœ¨åŸºäº Agent æ´¾ç”Ÿå‡ºçš„å¤æ‚æŸ¥è¯¢ã€é«˜å¹¶å‘ + é«˜æ€§èƒ½éœ€æ±‚ã€‚åŸºäºæ—¥ç›Šå®æ—¶ã€æ™ºèƒ½çš„ OLAP å¼•æ“ï¼Œä¼ä¸šçš„æ•°æ®èµ„äº§æ­£åœ¨äº§ç”Ÿæ›´å¤§çš„ä»·å€¼ã€‚</p>
<p>ä»ç®€å•ã€å›ºå®šã€åˆ†é’Ÿåˆ°å°æ—¶çº§åˆ«çš„æŸ¥è¯¢ï¼Œåˆ°äºšç§’çº§ã€PB çº§æ•°æ®ã€å¤§å®½è¡¨ã€é«˜å¹¶å‘ã€å¤æ‚ JOIN å’Œèšåˆï¼Œæˆ‘ä»¬ä¸ºä½•åœ¨ä»Šå¤©èƒ½å¤Ÿå®ç°å½“åˆä¸æ•¢æƒ³è±¡çš„åˆ†æéœ€æ±‚ï¼Ÿ</p>
<p>Apache Doris çš„æ¼”è¿›ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªç”ŸåŠ¨çš„ç­”æ¡ˆâ€”â€”å®ƒä¸ä»…è·Ÿéšç¡¬ä»¶ä¸ç¼–è¯‘å™¨çš„å‘å±•è€Œæ¼”è¿›ï¼Œæ›´ä¸»åŠ¨åœ°é€šè¿‡å‘é‡åŒ–ã€æ¨¡æ¿åŒ–ã€æŒ‡ä»¤çº§å¹¶è¡Œä¸ç²¾ç»†çš„ç”¨æˆ·æ€è°ƒåº¦æ¨¡å¼ï¼Œå°†æ¯ä¸€ä»£ CPU çš„æ½œåŠ›æ¨å‘ç†è®ºæé™ã€‚</p>
<h2 data-id="heading-0">1. Backgroundï¼šç¡¬ä»¶ä¸ç¼–è¯‘å™¨çš„å˜è¿</h2>
<p>è¿™åå¹´ç¡¬ä»¶ä¸ç¼–è¯‘å™¨çš„å‘å±•è½¨è¿¹ï¼Œå½»åº•æ”¹å˜äº†é«˜æ€§èƒ½æ•°æ®åº“çš„è®¾è®¡å“²å­¦ï¼š</p>
<ol>
<li><strong>CPUï¼šä»â€œæ›´å¿«â€åˆ°â€œæ›´å®½ã€æ›´å¤šâ€</strong>
<ol>
<li><strong>ä¸»é¢‘åœæ»ï¼Œæ ¸å¿ƒçˆ†å‘</strong>ï¼šå•ä¸ªæ ¸å¿ƒçš„ä¸»é¢‘å·²åœ¨ 3-5GHz å¾˜å¾Šå¤šå¹´ï¼Œæ€§èƒ½æå‡è½¬è€Œä¾èµ–<strong>æ ¸å¿ƒæ•°é‡</strong>ï¼ˆä»ä¸ªä½æ•°åˆ°ç™¾æ ¸çº§ï¼‰å’Œå•æ ¸å¿ƒçš„å¹¶è¡Œå®½åº¦ï¼ˆ<strong>SIMD</strong>ï¼‰ã€‚</li>
<li><strong>å†…å­˜å¢™åŠ å‰§</strong>ï¼šCPU ä¸ä¸»å­˜çš„é€Ÿåº¦å·®è·å·²è¶… 300 å€ã€‚<strong>ç¼“å­˜å‘½ä¸­ç‡</strong>æˆä¸ºæ€§èƒ½çš„ç”Ÿå‘½çº¿ï¼Œä¸€æ¬¡ç¼“å­˜æœªå‘½ä¸­ï¼ˆCache Missï¼‰çš„ä»£ä»·è¶³ä»¥æ‰§è¡Œæ•°ç™¾æ¡æŒ‡ä»¤ã€‚</li>
<li><strong>SIMD æˆä¸ºæ ‡é…</strong>ï¼šAVX2ï¼ˆ256 ä½ï¼‰ã€AVX-512ï¼ˆ512 ä½ï¼‰åŠ ARM SVE ç­‰æŒ‡ä»¤é›†ï¼Œå…è®¸å•æ¡æŒ‡ä»¤å¤„ç† 4 è‡³ 16 ä¸ªæ•°æ®å•å…ƒã€‚ä¸ç”¨ <strong>SIMD</strong>ï¼Œå°±ç­‰äºä¸»åŠ¨æµªè´¹è¶…è¿‡ 80%çš„æµ®ç‚¹ç®—åŠ›ã€‚</li>
</ol>
</li>
<li><strong>ç¼–è¯‘å™¨</strong>ï¼šä»â€œç¿»è¯‘è€…â€åˆ°â€œä¼˜åŒ–åˆä½œä¼™ä¼´â€
<ol>
<li><strong>æ¿€è¿›çš„å†…è”ä¸å‘é‡åŒ–</strong>ï¼šç°ä»£ç¼–è¯‘å™¨ï¼ˆå¦‚ Clang/GCCï¼‰èƒ½åœ¨ç¼–è¯‘æœŸè¿›è¡Œ<strong>å¾ªç¯å±•å¼€ã€åˆ†æ”¯æ¶ˆé™¤ã€è‡ªåŠ¨å‘é‡åŒ–</strong>ï¼Œä½†å…¶ä¼˜åŒ–èƒ½åŠ›æåº¦ä¾èµ–ä»£ç æ¨¡å¼ã€‚<strong>è™šå‡½æ•°ã€æŒ‡é’ˆåˆ«åã€åˆ†æ”¯é¢„æµ‹å¤±è´¥</strong>ä¼šç¬é—´é˜»æ–­å…¶ä¼˜åŒ–é€šè·¯ã€‚</li>
<li><strong>è·¨å¹³å°æŠ½è±¡</strong>ï¼šé€šè¿‡ä¼˜è‰¯çš„ä»£ç æ¨¡å¼ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨ä¸ºå¾ªç¯ç”Ÿæˆ SIMD ä»£ç ï¼Œæ— ç¼è¿ç§»ä¸åŒå¹³å°ã€‚ä½†å¯¹äºå¤æ‚çš„æ•°æ®å¤„ç†é€»è¾‘ï¼Œä»ç„¶éœ€è¦æ‰‹åŠ¨ç”Ÿæˆ SIMD ä»£ç ã€‚</li>
</ol>
</li>
<li><strong>æ–°ç¡¬ä»¶ä¸‹çš„ OLAP æ€§èƒ½é™·é˜±</strong>
<ol>
<li>
<p>åŸºç¡€è®¾æ–½çš„å‡çº§è¿­ä»£ï¼Œæ„å‘³ç€ä¼ ç»Ÿæ•°æ®åº“å¼•æ“çš„å¾®è§‚å¼€é”€è¢«æ€¥å‰§æ”¾å¤§ï¼š</p>
</li>
<li>
<p><strong>ç«å±±æ¨¡å‹</strong>ï¼šæ¯è¡Œçš„è™šå‡½æ•°è°ƒç”¨ï¼Œå¯¼è‡´<strong>æŒ‡ä»¤ç¼“å­˜ï¼ˆI-Cacheï¼‰</strong> è¢«é¢‘ç¹å†²åˆ·ï¼Œæ ¸å¿ƒå¤„äºâ€œé¥¥æ¸´â€çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>åŠ¨æ€åˆ†æ”¯</strong>ï¼šåœ¨æ•°æ®å¯†é›†çš„å¾ªç¯ä¸­ï¼Œä¸€æ¬¡é¢„æµ‹å¤±è´¥å¯èƒ½æ¸…ç©ºé•¿è¾¾ 15-20 çº§çš„æŒ‡ä»¤æµæ°´çº¿ã€‚</p>
</li>
<li>
<p><strong>éšæœºå†…å­˜è®¿é—®</strong>ï¼šä¸è¿ç»­çš„å†…å­˜è®¿é—®æ¨¡å¼ï¼Œè®© CPU çš„<strong>é¢„å–å™¨</strong>ï¼ˆPrefetcherï¼‰å¤±æ•ˆï¼Œå¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰å¾…æ•°æ®ä»å†…å­˜åŠ è½½ã€‚</p>
</li>
</ol>
</li>
</ol>
<p>å› æ­¤ï¼Œæ€§èƒ½ä¼˜åŒ–å¿…é¡»ä»â€œç®—æ³•ä¼˜åŒ–â€ä¸‹æ²‰ä¸ºâ€œä¸ç¡¬ä»¶å’Œç¼–è¯‘å™¨çš„å¯¹è¯â€ã€‚Apache Dorisï¼ˆåŠå…¶å•†ä¸šåŒ–ç‰ˆæœ¬ï¼‰ä¸æ–­åœ¨å„ç±»ä¸»æµ benchmark ä¸Šå–å¾—ä»¤äººæƒŠå¹çš„é¢†å…ˆï¼ˆä¾‹å¦‚ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2F%40selectdb.marketing%2Fselectdb-topped-clickbench-to-be-no-1-in-the-world-892709544245" target="_blank" title="https://medium.com/@selectdb.marketing/selectdb-topped-clickbench-to-be-no-1-in-the-world-892709544245" ref="nofollow noopener noreferrer">ClickBench#1</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fapache-doris-tops-json-bench-cold-queries" target="_blank" title="https://www.velodb.io/blog/apache-doris-tops-json-bench-cold-queries" ref="nofollow noopener noreferrer">JsonBench#1</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fapache-doris-tops-rta-bench" target="_blank" title="https://www.velodb.io/blog/apache-doris-tops-rta-bench" ref="nofollow noopener noreferrer">RtaBench#1</a>ï¼‰ï¼ŒèƒŒåæ­£æ˜¯è¿™äº›ä¸ç°ä»£ç¡¬ä»¶ä½“ç³»ååŒè¿›æ­¥çš„å†³å¿ƒã€‚</p>
<h2 data-id="heading-1">2. å‘é‡åŒ–æ‰§è¡Œï¼šä»â€œè¡Œâ€åˆ°â€œåˆ—â€çš„é™ç»´æ‰“å‡»</h2>
<p>ç°ä»£çš„ CPU æ¶æ„ä¸­ï¼Œå­˜åœ¨ç€å¤§é‡æ¿€è¿›å¦‚â€œé»‘ç§‘æŠ€â€èˆ¬çš„ä¼˜åŒ–æ‰‹æ®µï¼Œä¾‹å¦‚æŒ‡ä»¤ä¹±åºå‘å°„ï¼ˆOOEï¼‰ã€å¤šçº§æµæ°´çº¿ã€å‘é‡æŒ‡ä»¤é›†ï¼ˆAVXã€Neonã€SVEï¼‰ã€‚å®ƒä»¬èƒ½å¤Ÿä½¿ä½ çš„ä»£ç åœ¨åŒç­‰çš„ç®—åŠ›ä¸‹æ€§èƒ½å€å¢â€”â€”å‰ææ˜¯ï¼Œä½ æ²¡æœ‰åæ¨¡å¼ã€‚</p>
<ul>
<li><strong>æŒ‡ä»¤ä¹±åºå‘å°„ä¸æµæ°´çº¿</strong>ï¼šç°ä»£ CPU çš„æµæ°´çº¿æ·±åº¦å¯è¾¾ 15-20 çº§ï¼Œå¹¶é€šè¿‡ä¹±åºæ‰§è¡Œå¼•æ“åŠ¨æ€è°ƒåº¦æŒ‡ä»¤ã€‚äº’ç›¸æ²¡æœ‰ä¾èµ–çš„æŒ‡ä»¤è™½ç„¶åœ¨æ±‡ç¼–ä¸æœºå™¨ç ä¸­æœ‰å…ˆåé¡ºåºï¼Œä½†å®é™…å¯ä»¥å®Œå…¨å¹¶è¡Œã€‚å…¶æ€§èƒ½å‘æŒ¥çš„å…³é”®åœ¨äºæŒ‡ä»¤æµçš„è¿ç»­æ€§å’Œå¯é¢„æµ‹æ€§ã€‚ä¸€æ¬¡é”™è¯¯çš„åˆ†æ”¯é¢„æµ‹ä¼šå¯¼è‡´æ•´ä¸ªæµæ°´çº¿è¢«é‡ç½®ï¼Œå¸¦æ¥çº¦ 15 ä¸ªæ—¶é’Ÿå‘¨æœŸçš„æƒ©ç½šï¼›è€Œä¸€æ¬¡ç¼“å­˜æœªå‘½ä¸­ï¼ˆCache Missï¼‰ å¯¼è‡´çš„æ•°ç™¾å‘¨æœŸç­‰å¾…ï¼Œæ›´ä¼šè®©æ‰€æœ‰ç²¾å·§è®¾è®¡ç¬é—´å½’é›¶ã€‚[1]</li>
<li><strong>å¾®æŒ‡ä»¤ç¼“å­˜ï¼ˆÎ¼op Cacheï¼‰</strong>ï¼šÎ¼op Cache æ˜¯å¤„ç†å™¨å‰ç«¯çš„ä¸€ç§ç¡¬ä»¶ç¼“å­˜ç»“æ„ï¼Œèƒ½å¤Ÿç¼“å­˜çƒ­æŒ‡ä»¤ï¼Œè·³è¿‡è§£ç é˜¶æ®µï¼Œæå‡æ¯å‘¨æœŸæŒ‡ä»¤æ•°ï¼ˆIPCï¼‰ã€‚æ ¹æ®å¸¸è§„ç»Ÿè®¡ï¼ŒÎ¼op Cache èƒ½å¤Ÿäº§ç”Ÿç¨³å®šã€å¯è§‚ï¼ˆ2% ï½ 10%ï¼‰çš„ IPC å¢åŠ ã€‚ä½†åœ¨ç›®å‰å¸¸è§çš„æ•°æ®åº”ç”¨ä¸­ï¼Œå®é™…å‘½ä¸­ç‡ä» 30% åˆ° 70% å·®è·å¾ˆå¤§[2]ï¼Œæ˜¯æ˜æ˜¾çš„æ€§èƒ½æå‡ç‚¹ã€‚</li>
<li><strong>å‘é‡æŒ‡ä»¤é›†ï¼ˆSIMDï¼‰</strong>ï¼šè¿™æ˜¯æ€§èƒ½æå‡ä¸€ä¸ªæ•°é‡çº§çš„æ ¸å¿ƒæ­¦å™¨ã€‚ä» SSE çš„ 128 ä½åˆ° AVX2 çš„ 256 ä½ï¼Œå†åˆ° AVX-512 çš„ 512 ä½ï¼Œæ„å‘³ç€å•æ¡æŒ‡ä»¤å¯åŒæ—¶å¤„ç†çš„æ•°æ®é‡ä» 4 ä¸ª 32 ä½æ•´æ•°è·ƒå‡è‡³ 16 ä¸ªã€‚ç†è®ºå³°å€¼ç®—åŠ›å› æ­¤å‘ˆå€æ•°å¢é•¿ã€‚ä¾‹å¦‚ï¼Œåœ¨ç†æƒ³çš„æ•°æ®å¯†é›†å¾ªç¯ä¸­ï¼Œä½¿ç”¨ AVX-512 ç›¸æ¯”æ ‡é‡ä»£ç å¯å¸¦æ¥ <strong>10 å€ä»¥ä¸Šçš„ååé‡</strong>æå‡ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dfd3b61bcc14aa9aaecc8cbd83e7477~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=Y34hyAPifLp7kdLEVyIJMTKC92g%3D" alt="2. å‘é‡åŒ–æ‰§è¡Œï¼šä»â€œè¡Œâ€åˆ°â€œåˆ—â€çš„é™ç»´æ‰“å‡».PNG" loading="lazy"/></p>
<p>æ—©æœŸçš„æ•°æ®åº“æ‰§è¡Œå¼•æ“å¤šåŸºäºç«å±±æ¨¡å‹ï¼ˆVolcano Modelï¼‰ï¼Œä»¥ <code>Tuple</code>ï¼ˆè¡Œï¼‰ä¸ºå•ä½è¿›è¡Œå¤„ç†ã€‚åœ¨ CPU ä¸»é¢‘åœæ»ã€æ ¸å¿ƒæ•°å¢åŠ çš„ä»Šå¤©ï¼Œè¿™ç§æ–¹å¼å¯¼è‡´äº†å¤§é‡çš„<strong>è™šå‡½æ•°è°ƒç”¨</strong>å’Œç³Ÿç³•çš„<strong>æŒ‡ä»¤ç¼“å­˜</strong>å‘½ä¸­ç‡ã€‚è¿™æ˜¯å› ä¸ºåœ¨é€è¡Œå¤„ç†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦é¢‘ç¹åœ°åˆ‡æ¢å¤„ç†å¯¹è±¡ï¼ˆåˆ—ï¼‰çš„ç±»å‹ï¼Œæ‰§è¡Œä¸åŒçš„æ“ä½œã€‚è¿™å¯¼è‡´æŒ‡ä»¤ç¼“å­˜å‘½ä¸­ç‡æä½ï¼Œä¸”æ— æ³•åˆ©ç”¨å‘é‡åŒ–æŒ‡ä»¤è¿›è¡Œæ‰¹é‡å¤„ç†ï¼Œé€è¡Œçš„è™šå‡½æ•°å¼€é”€æœ€é«˜å¯è¾¾å¸¸è§„æ‰§è¡Œçš„æ•°åå€[3][5]ã€‚</p>
<p>Doris çš„å…¨é¢å‘é‡åŒ–é‡æ„ï¼Œæ ¸å¿ƒåœ¨äºå¼•å…¥äº†<code>Block</code>å’Œ<code>Column</code>çš„æ¦‚å¿µã€‚è¿™æ˜¯å†…å­˜å¸ƒå±€çš„é‡å¤§å˜é©ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad1ad6a1feb54bd6ac45241e0cbc6635~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=Nmc4cEsoIFJzMpTj%2F5nBJW32Zm8%3D" alt="2. å‘é‡åŒ–æ‰§è¡Œï¼šä»â€œè¡Œâ€åˆ°â€œåˆ—â€çš„é™ç»´æ‰“å‡»-1.PNG" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 å†…å­˜å¸ƒå±€ä¸ Cache Locality</h3>
<p>åœ¨ Doris çš„å‘é‡åŒ–å¼•æ“ä¸­ï¼Œä¸€åˆ—æ•°æ®åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­å­˜å‚¨çš„ã€‚ä¾‹å¦‚ä¸€ä¸ª<code>INT</code>ç±»å‹çš„åˆ—ï¼Œç›´æ¥ä½¿ç”¨ Doris ä¸­çš„<code>PODArray</code>ï¼ˆPlain Old Data Arrayï¼‰æ¥å­˜å‚¨æ•°æ®ã€‚</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ç¤ºæ„</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ColumnVector</span> <span class="hljs-keyword">final</span> : <span class="hljs-keyword">public</span> IColumn {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// PaddedPODArray ä¿è¯äº†å†…å­˜å¯¹é½ï¼Œé€šå¸¸æŒ‰ 64 å­—èŠ‚å¯¹é½ä»¥é€‚é… Cache Line</span>
    PaddedPODArray&lt;T&gt; data; 
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// å‘é‡åŒ–è®¡ç®—å…¥å£ï¼Œä¸å†å¤„ç†å•è¡Œï¼Œè€Œæ˜¯å¤„ç†æ•´ä¸ª data æ•°ç»„</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">filter</span><span class="hljs-params">(<span class="hljs-type">const</span> Filter&amp; filt)</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>è¿™ç§å¸ƒå±€ä¿è¯äº†åŒä¸€åˆ—çš„æ•°æ®åœ¨ç‰©ç†ä¸Šè¿ç»­ã€‚å½“ CPU ä»å†…å­˜åŠ è½½æ•°æ®åˆ° Cache æ—¶ï¼Œèƒ½å¤Ÿä¸€æ¬¡æ€§åŠ è½½å¤šä¸ªæ•°æ®é¡¹ï¼Œæå¤§æå‡äº†<strong>æŒ‡ä»¤/æ•°æ®ç¼“å­˜çš„å±€éƒ¨æ€§ï¼ˆCache Localityï¼‰</strong>ã€‚ç”±äºè¿‘äº›å¹´ CPU æ•°æ® Cache å®¹é‡å¤§å¹…æå‡ï¼Œå¸¸è§„è¿ç®—çš„å®Œæˆè¾ƒå¤§ç¨‹åº¦ä¾èµ–åœ¨ L2 cache ä¸­å®Œå…¨è£…è½½æ•°æ®ã€‚å¦‚æœå› ä¸ºæ•°æ®ä¸è¿ç»­é¢‘ç¹åˆ·æ–°ç¼“å­˜ï¼Œå¯èƒ½å¸¦æ¥ 3ï½5 å€çš„å±€éƒ¨æ€§èƒ½æŸå¤±[3][6]ã€‚</p>
<p>åœ¨ä¼ ç»Ÿæ‰¹å¤„ç†æ¨¡å‹ä¸‹ï¼Œ<code>Next()</code>æ¥å£ä¸€æ¬¡è¿”å›çš„<code>Block</code> é€šå¸¸åŒ…å« 4096 è¡Œï¼Œé‚£ä¹ˆå°±ä¼šå‘ç”Ÿ 4096 æ¬¡çš„è™šå‡½æ•°è°ƒç”¨ã€‚è€Œåœ¨å‘é‡åŒ–ä»£ç ä¸­ï¼Œæ•´ä¸ª Column æ¯æ¬¡ä¸€èµ·å¤„ç†ï¼Œ<strong>è™šå‡½æ•°è°ƒç”¨ä»…å‘ç”Ÿä¸€æ¬¡</strong>ã€‚åœ¨å¤æ‚ç®—å­ï¼ˆå¦‚ Hash Joinã€Aggregationï¼‰ä¸­ï¼Œè¿™ç§è°ƒç”¨å¼€é”€çš„é™ä½æ˜¯æ•°é‡çº§çš„åŒºåˆ«ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41371b5938a14b249abf66352798fd03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=PJ4076Mtr9uIPpd8TRqJxHfvfYw%3D" alt="2. å‘é‡åŒ–æ‰§è¡Œï¼šä»â€œè¡Œâ€åˆ°â€œåˆ—â€çš„é™ç»´æ‰“å‡»-2.png" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 è‡ªåŠ¨ä¸æ‰‹åŠ¨å‘é‡åŒ–çš„ç»“åˆ</h3>
<p>éšç€ç¼–è¯‘å™¨è¿›åŒ–è‡³ä»Šï¼Œç¼–è¯‘ä¼˜åŒ–çš„æŠ€æœ¯åŒæ•°æ®åº“ä¸€æ ·æœ‰äº†é£è·ƒå¼çš„è¿›æ­¥ã€‚åœ¨æ›´å¤šçš„åœºæ™¯ä¸‹ï¼Œç¼–è¯‘å™¨å·²èƒ½å®ç°ä»¥å‰æ— æ³•è‡ªåŠ¨è¿›è¡Œçš„ä¼˜åŒ–ã€‚<strong>è‡ªåŠ¨å‘é‡åŒ–</strong>ï¼ˆAuto Vectorizationï¼‰å°±æ˜¯å…¶ä¸­çš„é‡è¦æ–¹é¢ã€‚</p>
<p>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåˆ©ç”¨ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆå‘é‡åŒ–çš„ä»£ç æ˜¯æœ€ä½³çš„æ–¹æ¡ˆâ€”â€”å®ƒå¤©ç„¶å¸¦æ¥äº†è·¨å¹³å°è¿ç§»çš„å‹å¥½ï¼Œä»£ç ä¹Ÿä¸€ç›®äº†ç„¶ã€‚è€Œè¿™å¹¶ä¸æ„å‘³ç€ç›¸å…³ä»£ç çš„å·¥ç¨‹éš¾åº¦é™ä½ï¼Œè®¸å¤šæ—¶å€™åè€Œæ›´åŠ å¤æ‚â€”â€”å› ä¸ºæœ€ç»ˆæ‰§è¡Œçš„ä»£ç å‘é‡åŒ–ç¨‹åº¦ä¸å†æ˜¯ç¼–ç æ—¶çš„â€œæ‰€è§å³æ‰€å¾—â€ï¼Œå…¶ä¸­æ¶‰åŠåˆ°äº†å¤æ‚çš„ç¼–è¯‘å™¨è¡Œä¸ºã€‚è¦ä¿è¯æœ€é«˜çš„ä»£ç ç”Ÿæˆè´¨é‡ï¼Œå¼€å‘è€…ç¼–ç æ—¶å¿…é¡»å°½å¯èƒ½éµå®ˆè‰¯å¥½çš„å¼€å‘èŒƒå¼ã€‚</p>
<p>å½“ç„¶ï¼Œåœ¨ä¸€äº›æ›´ä¸ºå¤æ‚çš„åœºæ™¯ä¸‹ï¼Œæ‰‹åŠ¨è°ƒç”¨çš„å‘é‡åŒ–ä»£ç ä»æ˜¯ä¸å¯é¿å…çš„ã€‚å› æ­¤ Doris é‡‡ç”¨äº†â€œè‡ªåŠ¨+æ‰‹åŠ¨â€çš„åŒé‡ç­–ç•¥ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨å‘é‡åŒ–</strong>ï¼šå¯¹äºç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ç°ä»£ç¼–è¯‘å™¨æä¾›ç»™æˆ‘ä»¬çš„æœ€ä½³é€‰æ‹©ã€‚æ ¸å¿ƒåœ¨äºï¼Œç®€åŒ–å¾ªç¯ä½“ï¼ŒæŠ½ç¦»æ§åˆ¶æµåˆ†æ”¯ï¼ˆBranchï¼‰ï¼Œè®©ç¼–è¯‘å™¨è¯†åˆ«å‡º Auto Vectorization çš„æœºä¼šã€‚</li>
<li><strong>æ‰‹åŠ¨å‘é‡åŒ–</strong>ï¼šå¯¹äºå®é™…æ±‡ç¼–è¯†åˆ«å‡ºæœªèƒ½æ­£å¸¸ Auto Vectorization çš„ç®—å­ï¼Œæˆ–æ˜¯é‚£äº›çƒ­ç‚¹è·¯å¾„ä¸Šçš„å‘é‡åŒ–éœ€æ±‚ï¼ŒDoris å·¥ç¨‹å¸ˆå¹¶ä¸é¿è®³ç›´æ¥æ‰‹å†™ Intrinsic ä»£ç ã€‚ç›¸æ¯”äºè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œæ­¤ç§æ–¹å¼å¾€å¾€æ‹¥æœ‰æ›´åŠ æè‡´çš„æ€§èƒ½ï¼Œå‡ ä¹æ²¡æœ‰æŒ‡ä»¤æµªè´¹ã€‚</li>
</ul>
<p>ä¾‹å¦‚ä»¥ä¸‹åœºæ™¯ï¼š</p>
<p><strong>A. è°“è¯è¿‡æ»¤ï¼ˆFilterï¼‰</strong></p>
<p>åœ¨<code>WHERE</code>å­å¥å¤„ç†ä¸­ï¼Œè¿‡æ»¤ç»“æœé€šå¸¸æ˜¯ä¸€ä¸ª<code>uint8_t</code>çš„æ•°ç»„ï¼ˆ0 æˆ– 1ï¼‰ã€‚å°†è¿‡æ»¤åçš„æ•°æ®æ‹·è´åˆ°æ–° Block æ˜¯é«˜é¢‘æ“ä½œã€‚ Doris åˆ©ç”¨ AVX2 çš„ <code>_mm256_movemask_epi8</code> æŒ‡ä»¤ï¼Œå¿«é€Ÿç”Ÿæˆé€‰æ‹©æ©ç ï¼Œå¹¶é…åˆ <code>_mm256_permutevar8x32_epi32</code> ç­‰æŒ‡ä»¤è¿›è¡Œæ•°æ®é‡æ’ï¼ˆShuffleï¼‰ï¼Œé¿å…äº†ä¼ ç»Ÿåˆ†æ”¯åˆ¤æ–­å¸¦æ¥çš„æµæ°´çº¿å†²åˆ·ã€‚åœ¨ç›¸åŒçš„æŒ‡ä»¤å‘¨æœŸå†…ï¼Œå®ç°æ›´å¤§çš„æ•°æ®ååé‡ã€‚</p>
<p><strong>B. å­—ç¬¦ä¸²ä¸</strong> <strong>JSON</strong> <strong>å¤„ç†</strong></p>
<p>å­—ç¬¦ä¸²åŒ¹é…ï¼ˆLikeï¼‰ã€JSON è§£ææ˜¯ CPU å¯†é›†å‹æ“ä½œã€‚Doris å¼•å…¥äº†ç‰¹å®šçš„ SIMD ç®—æ³•æˆ–è€…åº“ï¼š</p>
<ul>
<li><strong>Volnitsky ç®—æ³•</strong>ï¼šåœ¨å­ä¸²æŸ¥æ‰¾ä¸­ï¼Œåˆ©ç”¨ SIMD å¹¶è¡Œæ¯”è¾ƒå¤šä¸ªå­—ç¬¦ï¼Œå¿«é€Ÿè·³è¿‡ä¸åŒ¹é…åŒºåŸŸã€‚</li>
<li><strong>SimdJson</strong>ï¼šåœ¨è§£æ JSON Path æ—¶ï¼Œåˆ©ç”¨ SIMD æŒ‡ä»¤å¿«é€Ÿå®šä½ç»“æ„ç¬¦ï¼ˆå¦‚ <code>{</code>, <code>}</code>, <code>:</code>ï¼‰ï¼Œå¤§å¹…ç¼©çŸ­è§£æè·¯å¾„ã€‚</li>
</ul>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-comment">// SIMD å­ä¸²åŒ¹é…</span>
<span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span>* _search(<span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span>* haystack, <span class="hljs-type">const</span> <span class="hljs-type">uint8_t</span>* haystack_end) <span class="hljs-type">const</span> {
    ......
    <span class="hljs-keyword">while</span> (haystack &lt; haystack_end &amp;&amp; haystack_end - haystack &gt;= needle_size) {
<span class="hljs-meta">#<span class="hljs-keyword">if</span> defined(__SSE4_1__) || defined(__aarch64__)</span>
        <span class="hljs-keyword">if</span> ((haystack + <span class="hljs-number">1</span> + n) &lt;= haystack_end &amp;&amp; <span class="hljs-built_in">page_safe</span>(haystack)) {
            <span class="hljs-comment">/// find first and second characters</span>
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> v_haystack_block_first =
                    _mm_loadu_si128(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> __m128i*&gt;(haystack));
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> v_haystack_block_second =
                    _mm_loadu_si128(<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">const</span> __m128i*&gt;(haystack + <span class="hljs-number">1</span>));

            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> v_against_pattern_first =
                    _mm_cmpeq_epi8(v_haystack_block_first, first_pattern);
            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> v_against_pattern_second =
                    _mm_cmpeq_epi8(v_haystack_block_second, second_pattern);

            <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> mask = _mm_movemask_epi8(
                    _mm_and_si128(v_against_pattern_first, v_against_pattern_second));
            <span class="hljs-comment">/// first and second characters not present in 16 octets starting at `haystack`</span>
            <span class="hljs-keyword">if</span> (mask == <span class="hljs-number">0</span>) {
                haystack += n;
                <span class="hljs-keyword">continue</span>;
            }
    ......
}
</code></pre>
<h2 data-id="heading-4">3. æ¨¡æ¿ç¼–è¯‘ï¼šæ¶ˆé™¤è¿è¡Œæ—¶å¼€é”€</h2>
<p>å‰é¢æˆ‘ä»¬è®¨è®ºäº†åˆ†æ”¯é¢„æµ‹ã€æ•°æ®å’ŒæŒ‡ä»¤ç¼“å­˜ã€æŒ‡ä»¤æµæ°´çº¿è¿™äº›â€œçœ‹å¾—è§æ‘¸ä¸ç€â€çš„æ€§èƒ½å…³é”®ç‚¹ã€‚é‚£ä¹ˆï¼Œä¸€æ¬¡è™šå‡½æ•°è°ƒç”¨ç©¶ç«Ÿä¼šäº§ç”Ÿå¤šå¤§çš„å¼€é”€ï¼Ÿå¯ä»¥ç”¨ä¸€ä¸ªå°ä¾‹å­æ¥è¯´æ˜ï¼š</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualBase</span> {
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>;
};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualDerived</span> : <span class="hljs-keyword">public</span> VirtualBase {
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> <span class="hljs-keyword">override</span></span>;
};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NonVirtual</span> {
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">bar</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>;
};

<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">BM_VirtualCall</span><span class="hljs-params">(benchmark::State&amp; state)</span> </span>{
    VirtualBase* obj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">VirtualDerived</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> _ : state) {
        result = obj-&gt;<span class="hljs-built_in">foo</span>(<span class="hljs-number">42</span>);
    }
}
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">BM_NonVirtualCall</span><span class="hljs-params">(benchmark::State&amp; state)</span> </span>{
    NonVirtualBase obj;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> _ : state) {
        result = obj.<span class="hljs-built_in">bar</span>(<span class="hljs-number">42</span>);
    }
}
<span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">BM_DirectCall</span><span class="hljs-params">(benchmark::State&amp; state)</span> </span>{
    VirtualDerived obj;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> _ : state) {
        result = obj.<span class="hljs-built_in">foo</span>(<span class="hljs-number">42</span>);
    }
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c63a2af2c63548079414781cb2fb277a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=9D2rw4pLT5YbM3O3kigKu0f%2FKL4%3D" alt="3. æ¨¡æ¿ç¼–è¯‘ï¼šæ¶ˆé™¤è¿è¡Œæ—¶å¼€é”€.png" loading="lazy"/></p>
<p>ä»¥ä¸Šç»“æœäº§ç”Ÿè‡ª <code>Clang++ 17.0 -O3 -std=c++20</code> æ¡ä»¶ä¸‹çš„æµ‹è¯•ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè™šå‡½æ•°è°ƒç”¨å¯¼è‡´äº†æ™®é€šå‡½æ•° <strong>5 å€çš„æ€§èƒ½å¼€é”€</strong>ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚ä½•å°½å¯èƒ½æ¶ˆé™¤è™šå‡½æ•°æ˜¯ OLAP é¢†åŸŸä¸­çš„é‡è¦è¯¾é¢˜ã€‚è¿‡å»çš„ç ”ç©¶å±•ç°äº†ä¸¤ç§å¸¸è§çš„å¤§æ–¹å‘ï¼šç¼–è¯‘æ‰§è¡Œå’Œå‘é‡åŒ–æ‰§è¡Œã€‚<strong>Doris é€‰æ‹©çš„æ˜¯å‘é‡åŒ–æ‰§è¡Œçš„æ–¹æ¡ˆ</strong>ï¼Œå®ƒé€šè¿‡ä¸€æ¬¡å¤„ç†ä¸€ä¸ª Block çš„æ•°æ®ï¼Œå°†è¿™äº›è™šå‡½æ•°å’Œåˆ†æ”¯çš„ overhead å‡æ‘Šåˆ°æ•°åƒè¡Œä¸Šã€‚<em><strong>é‚£ä¹ˆï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼ï¼Œèƒ½å¤Ÿåœ¨å‘é‡åŒ–æ‰§è¡Œçš„åŸºç¡€ä¸Šï¼Œåƒç¼–è¯‘æ‰§è¡Œä¸€æ ·å½»åº•æ¶ˆé™¤æ‰æ‰€æœ‰çš„åˆ†æ”¯ overhead å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šæœ‰çš„ã€‚</strong></em></p>
<h3 data-id="heading-5">3.1 æ¨¡æ¿çš„è‰ºæœ¯</h3>
<p>ç¼–è¯‘æ‰§è¡Œçš„æœ¬è´¨æ˜¯å¯¹äºä¸åŒçš„ç±»å‹ã€åˆ†æ”¯ç­‰ä»£ç è·¯å¾„ï¼Œç”Ÿæˆåœ¨å½“å‰æ¡ä»¶ä¸‹å®Œå…¨ç¡®å®šçš„ä»£ç ï¼Œä»è€Œæ¶ˆå»ä¸åŒç±»å‹æ‰€éœ€çš„åˆ¤æ–­å’Œè™šè¡¨è®¿é—®ã€‚</p>
<p>ä¾‹å¦‚å¯¹äºä¸€ä¸ª<code>a + b</code>çš„æ“ä½œï¼Œç¼–è¯‘æ‰§è¡Œå¹¶æ²¡æœ‰ä¸€ä¸ªé€šç”¨çš„<code>add(Value a, Value b)</code>å‡½æ•°ï¼Œè€Œæ˜¯ä¸º<code>int + int</code>ã€<code>double + double</code>ç”Ÿæˆäº†å®Œå…¨ç‹¬ç«‹çš„æœºå™¨ç ã€‚CPU åœ¨æ‰§è¡Œæ—¶ï¼Œä¸ä»…æ²¡æœ‰è™šå‡½æ•°æŒ‡é’ˆè·³è½¬ï¼Œç”šè‡³å¯ä»¥å°†ç®€å•çš„åŠ æ³•æŒ‡ä»¤ç›´æ¥å†…è”ï¼ˆInlineï¼‰ï¼Œä»è€Œå……åˆ†åˆ©ç”¨æŒ‡ä»¤æµæ°´çº¿ã€‚</p>
<p>åœ¨â€œç¼–è¯‘æ‰§è¡Œâ€æ¡†æ¶ä¸‹ï¼Œè¿™å¾€å¾€é€šè¿‡ LLVM JIT ç­‰ä»£ç ç”Ÿæˆæ¡†æ¶å®Œæˆï¼Œé’ˆå¯¹ç”¨æˆ·çš„è¡¨è¾¾å¼ç°åœºç”Ÿæˆä¸€å¥—å®Œå…¨å›ºå®šçš„æ±‡ç¼–å¹¶æ‰§è¡Œã€‚ä½†åœ¨â€œå‘é‡åŒ–æ‰§è¡Œâ€æ¡†æ¶ä¸‹ï¼Œè¿™åŒæ ·å¯ä»¥é€šè¿‡ C++ çš„<strong>æ¨¡æ¿ç¼–ç¨‹</strong>å®ç°ã€‚ä¾‹å¦‚å¯¹äº days_add å‡½æ•°ï¼š</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-keyword">template</span> &lt;PrimitiveType PType&gt;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AddDaysImpl</span> {
    ......
    <span class="hljs-function"><span class="hljs-type">static</span> <span class="hljs-keyword">inline</span> ReturnNativeType <span class="hljs-title">execute</span><span class="hljs-params">(<span class="hljs-type">const</span> InputNativeType&amp; t, IntervalNativeType delta)</span> </span>{
        <span class="hljs-comment">// PType å·²ç»å›ºå®šï¼Œä¸éœ€è¦è¿è¡ŒæœŸåˆ¤æ–­</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">date_time_add</span>&lt;TimeUnit::DAY, PType, IntervalNativeType&gt;(t, delta);
        <span class="hljs-comment">// compare to </span>
        <span class="hljs-comment">// if (t.is_date) {</span>
        <span class="hljs-comment">//     return date_time_add&lt;TimeUnit::DAY, DATEV2, IntervalNativeType&gt;(t, delta);</span>
        <span class="hljs-comment">// } else {</span>
        <span class="hljs-comment">//     return date_time_add&lt;TimeUnit::DAY, DATETIMEV2, IntervalNativeType&gt;(t, delta);</span>
        <span class="hljs-comment">// }</span>
    }
    <span class="hljs-comment">// ä¸åŒæ¨¡æ¿å®ä¾‹å‚æ•°ä¸åŒï¼Œå‡½æ•°åŒ¹é…æ—¶ç›´æ¥å‘½ä¸­å¯¹åº”å®ä¾‹</span>
    <span class="hljs-function"><span class="hljs-type">static</span> DataTypes <span class="hljs-title">get_variadic_argument_types</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> {std ::make_shared&lt;<span class="hljs-keyword">typename</span> PrimitiveTypeTraits&lt;PType&gt;::DataType&gt;(),
                std ::make_shared&lt;<span class="hljs-keyword">typename</span> PrimitiveTypeTraits&lt;IntervalPType&gt;::DataType&gt;()};
    }
}

<span class="hljs-keyword">using</span> FunctionAddDays = FunctionDateOrDateTimeComputation&lt;AddDaysImpl&lt;TYPE_DATEV2&gt;&gt;;
<span class="hljs-keyword">using</span> FunctionDatetimeAddDays = FunctionDateOrDateTimeComputation&lt;AddDaysImpl&lt;TYPE_DATETIMEV2&gt;&gt;;

factory.<span class="hljs-built_in">register_function</span>&lt;FunctionDatetimeAddDays&gt;();
factory.<span class="hljs-built_in">register_function</span>&lt;FunctionAddDays&gt;();
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºä¸åŒçš„å…¥å‚ç±»å‹ï¼ˆDATE å’Œ DATETIMEï¼‰ï¼Œå‡½æ•°åœ¨å‚æ•°åŒ¹é…æ—¶å·²ç»å‘½ä¸­äº†ä¸åŒçš„å®ä¾‹ï¼Œè¿™äº›å®ä¾‹å„è‡ªåŒ…å«ç¡®å®šçš„ç±»å‹ä¿¡æ¯ï¼Œè§„é¿äº†è¿è¡ŒæœŸçš„<strong>è™šè¡¨è®¿é—®</strong>ï¼Œä½¿åŸæœ¬æ— æ³•<strong>å†…è”</strong>çš„å‡½æ•°å˜ä¸ºå¯èƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6ba8719e5694fc78d99b70ccad65a81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=HbacUj8Twm0m%2Bqoe4nMMDbVLr68%3D" alt="3. æ¨¡æ¿ç¼–è¯‘ï¼šæ¶ˆé™¤è¿è¡Œæ—¶å¼€é”€-1.png" loading="lazy"/></p>
<h2 data-id="heading-6">4. å¤šçº¿ç¨‹å†…å­˜åˆ†é…ï¼šJemalloc ä¸ Arena çš„ååŒ</h2>
<p>è¿™äº›å¹´ CPU å‘å±•çš„æ–°è¶‹åŠ¿æ˜¯â€”â€”ä¸»é¢‘ã€å•æ ¸å¿ƒæ€§èƒ½å¢é•¿ç›¸å¯¹ç¼“æ…¢ï¼ŒCPU æ ¸å¿ƒæ•°å´åœ¨ä¸æ–­å¢é•¿[4]ã€‚å°¤å…¶æ˜¯åœ¨é€æ¸å é¢†å¸‚åœºçš„ ARM æ¶æ„ä¸‹ï¼Œæ ¸å¿ƒæ•°é‡æ›´æ˜¯å‘ˆæŒ‡æ•°çº§å€å¢ï¼Œä» 2018 å¹´ä¹‹å‰çš„ 16 æ ¸ä»¥å†…ï¼Œä¸€è·¯è¾¾åˆ°äº†ç°åœ¨ 192 æ ¸çš„é«˜å³°[7]ã€‚<strong>è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»æŠŠæ›´å¤šçš„ç›®å…‰æŠ•å‘é«˜å¹¶å‘ï¼ˆHigh Concurrencyï¼‰åœºæ™¯ã€‚</strong></p>
<p>è¿™ç§åœºæ™¯ä¸­ï¼Œç³»ç»Ÿçš„ç“¶é¢ˆå¾€å¾€ä¸åœ¨è®¡ç®—ï¼Œè€Œåœ¨ <code>malloc/free</code> <strong>é”ç«äº‰</strong>ï¼ˆLock Contentionï¼‰ä»¥åŠ <strong>TLB</strong>ï¼ˆTranslation Lookaside Bufferï¼‰çš„åˆ·æ–°å¼€é”€ã€‚å…¸å‹ OLAP æŸ¥è¯¢ä¼šåˆ›å»ºå¤§é‡çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡ï¼ˆHash Keyã€èšåˆçŠ¶æ€ã€ä¸´æ—¶å­—ç¬¦ä¸²ï¼‰ã€‚å¦‚æœè¿™äº›éƒ½é€šè¿‡ glibc <code>malloc/free</code> ç”³è¯·ï¼š</p>
<ul>
<li>æ¯æ¬¡éƒ½èµ°ç³»ç»Ÿåˆ†é…å™¨ï¼Œé”ç«äº‰ä¸¥é‡ï¼›</li>
<li>ç¢ç‰‡å¤šï¼ŒRSSï¼ˆå¸¸é©»å†…å­˜é›†ï¼ŒResident Set Sizeï¼‰éš¾ä»¥æ§åˆ¶ã€‚</li>
</ul>
<p>ç”±äºé”æŠ¤é€ï¼ˆLock Convoyï¼‰ç­‰æ•ˆåº”çš„å­˜åœ¨ï¼Œéšç€ CPU æ ¸å¿ƒæ•°å¢åŠ ï¼Œå¤šçº¿ç¨‹ç«äº‰ç”šè‡³å¯èƒ½å¯¼è‡´å¤šæ ¸ååä¸å‡åé™[8]ã€‚ä¸€æ—¦ L1ã€L2 ç¼“å­˜è¢«é©±é€ï¼Œå°±åˆæ˜¯ 3-5 å€çš„æ•°æ®è®¿é—®å¼€é”€ã€‚<strong>åœ¨å†…å­˜åˆ†é…ä¸Šï¼Œè¿™ç§æ€§èƒ½ç“¶é¢ˆå°¤ä¸ºçªå‡ºã€‚ä¸ºé¿å…å…¨å±€ç«äº‰ã€æœ‰é”åˆ†é…æ˜¯ Doris å¿…é¡»è§£å†³çš„æŠ€æœ¯é—®é¢˜ã€‚</strong></p>
<h3 data-id="heading-7">4.1 æ¥ç®¡å…¨å±€åˆ†é…å™¨</h3>
<p>å› æ­¤ï¼ŒDoris åç«¯è¿›ç¨‹ï¼ˆBEï¼‰é€‰æ‹©äº†é“¾æ¥ <code>Jemalloc</code> è¿›è¡Œå†…å­˜åˆ†é…ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äº <strong>Thread Local Cache (Tcache)</strong>ã€‚æ¯ä¸ªæ‰§è¡Œçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜åˆ†é…ç¼“å­˜ï¼Œç»å¤§å¤šæ•°å°å¯¹è±¡çš„ç”³è¯·æ— éœ€åŠ é”ï¼Œæ¶ˆé™¤äº†å…¨å±€é”ç«äº‰ã€‚è®¸å¤šå°å¯¹è±¡ç”³è¯·ç›´æ¥é€šè¿‡ Jemalloc ç¼“å­˜è§£å†³ï¼Œä¸è¿›è¡Œç³»ç»Ÿè°ƒç”¨ã€‚</p>
<h3 data-id="heading-8">4.2 Arena å†…å­˜æ± </h3>
<p>ä½†åœ¨æŸ¥è¯¢æ‰§è¡Œå†…éƒ¨ï¼ŒDoris å¹¶æ²¡æœ‰æ­¢æ­¥äºæ­¤ã€‚åœ¨æ‰§è¡Œç®—å­ï¼ˆå¦‚ Hash Joinã€Aggregationï¼‰æ—¶ï¼ŒDoris ä½¿ç”¨ <code>Arena</code>ï¼ˆåŒºåŸŸå†…å­˜æ± ï¼‰æ¨¡å¼ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆå¤šå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œâ€œæŸ¥è¯¢â€ç»‘å®šï¼Œå®Œå…¨å¯ä»¥åœ¨æŸ¥è¯¢ç»“æŸæ—¶ç»Ÿä¸€å›æ”¶ã€‚è¿™ç›´æ¥å¸¦æ¥äº†è‹¥å¹²æ”¶ç›Šï¼š</p>
<ul>
<li><strong>æ— é”åˆ†é…</strong>ï¼šç®—å­å†…éƒ¨ç”³è¯·å†…å­˜é€šå¸¸åªæ˜¯å½“å‰çº¿ç¨‹ç¼“å­˜å†…çš„æŒ‡é’ˆç®€å•ç§»åŠ¨ï¼ˆBump Pointerï¼‰ï¼Œå®Œå…¨æ— é”ã€‚</li>
<li><strong>æ‰¹é‡é‡Šæ”¾</strong>ï¼šæŸ¥è¯¢ç»“æŸåï¼Œæ•´å— Arena ç»Ÿä¸€é‡Šæ”¾ï¼Œé¿å…äº†æ•°ç™¾ä¸‡æ¬¡å°å¯¹è±¡çš„ææ„å¼€é”€ã€‚</li>
<li><strong>Cache å‹å¥½</strong>ï¼šåŒä¸€ç®—å­ä½¿ç”¨çš„å¯¹è±¡åœ¨å†…å­˜ä¸­ç´§å‡‘æ’åˆ—ï¼Œæå¤§æå‡äº† CPU ç¼“å­˜å‘½ä¸­ç‡ã€‚</li>
</ul>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Arena</span> : <span class="hljs-keyword">private</span> boost::noncopyable {
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Chunk</span> : <span class="hljs-keyword">private</span> Allocator&lt;<span class="hljs-literal">false</span>&gt; {
        ......
    }
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">char</span>* <span class="hljs-title">alloc</span><span class="hljs-params">(<span class="hljs-type">size_t</span> size)</span> </span>{
        _init_head_if_needed();
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">UNLIKELY</span>(head-&gt;pos + size &gt; head-&gt;end)) {
            _add_chunk(size);
        }
        <span class="hljs-comment">// ç›´æ¥ bump pointerï¼Œå¼€é”€æ— é™å°</span>
        <span class="hljs-type">char</span>* res = head-&gt;pos;
        head-&gt;pos += size;
        <span class="hljs-keyword">return</span> res;
    }
    <span class="hljs-comment">// ä¸€æ¬¡æ€§ç»Ÿä¸€å›æ”¶</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">clear</span><span class="hljs-params">(<span class="hljs-type">bool</span> delete_head = <span class="hljs-literal">false</span>)</span> </span>{
        ......
    }
};
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c392f4ea465a4d7ab0a0d12e7369788b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=GpcYR7eecuK1lu7L4H0%2BO5nY594%3D" alt="4.2 Arena å†…å­˜æ± .png" loading="lazy"/></p>
<h2 data-id="heading-9">5. Pipeline æ‰§è¡Œå¼•æ“ï¼šè§£å†³å¤šæ ¸æ—¶ä»£çš„è°ƒåº¦ç“¶é¢ˆ</h2>
<p>ä¼ ç»Ÿçš„ç«å±±æ¨¡å‹å¯¹äºæ¯ä¸ª Instance ä½¿ç”¨ç‹¬ç«‹çš„çº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªçº¿ç¨‹éœ€è¦å¤„ç†ä¸€ä¸ªå®Œæ•´ Fragmentï¼ˆæŸ¥è¯¢è®¡åˆ’ç‰‡æ®µï¼‰çš„éƒ¨åˆ†æ•°æ®ã€‚æ˜¾ç„¶ï¼Œè¿™æ—¶çš„ä»»åŠ¡è°ƒåº¦å®Œå…¨ä¾èµ–æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ï¼Œè€Œè¿™åœ¨ OLAP åœºæ™¯ä¸‹å­˜åœ¨å¾ˆå¤šæ ¹æœ¬æ€§é—®é¢˜ï¼š</p>
<ol>
<li>å¦‚æœä¸€ä¸ªçº¿ç¨‹å› ä¸ºç½‘ç»œæˆ–ç£ç›˜ IO é˜»å¡ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šè¿›è¡Œçº¿ç¨‹çš„<strong>ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼ˆContext Switchï¼‰ï¼Œå¼€é”€åœ¨å¾®ç§’çº§åˆ«ã€‚éšç€æŸ¥è¯¢æ•°é‡å’Œè§„æ¨¡å¢é•¿ï¼Œç³»ç»Ÿçº¿ç¨‹æ•°æš´æ¶¨ï¼Œå¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢é¢‘ç¹ï¼Œoverhead æ˜æ˜¾å¢åŠ ï¼›</li>
<li>æ— æ³•ç»†ç²’åº¦å®ç° query ä¹‹é—´çš„å…¬å¹³è°ƒåº¦ã€‚å¤§å°æŸ¥è¯¢æ··åˆåœºæ™¯ä¸‹ï¼Œ<strong>å°æŸ¥è¯¢</strong>è¢«è°ƒåº¦åˆ°çš„æœºä¼šæ˜æ˜¾ä¸‹é™ï¼Œå»¶è¿Ÿå¤§å¹…å¢é«˜ï¼›</li>
<li>çº¿ç¨‹é¢‘ç¹è¿ç§»ï¼Œä¸§å¤± <strong>NUMA å’Œ Cache äº²å’Œæ€§</strong>ï¼Œå½±å“æŸ¥è¯¢æ€§èƒ½ï¼›</li>
<li>ä¾èµ–åº•å±‚æ•°æ®åˆ†å¸ƒï¼Œæ— æ³•äº¤æ¢æ•°æ®ï¼Œ<strong>æ•°æ®å€¾æ–œ</strong>å¯¹æ€§èƒ½å½±å“å·¨å¤§</li>
</ol>
<p>â€¦â€¦</p>
<p>æ ¸å¿ƒé—®é¢˜æ˜¯ï¼Œä¾é™„äºçº¿ç¨‹æ¨¡å‹çš„ Instance æ‰§è¡Œï¼Œå…¶è°ƒåº¦å®Œå…¨ä¾èµ–æ“ä½œç³»ç»Ÿï¼Œæ— æ³•è¿›è¡Œæ›´ç»†ç²’åº¦çš„è°ƒæ•´ã€‚ç”±é˜»å¡ã€äº²å’Œæ€§ã€ä¼˜å…ˆçº§å¸¦æ¥çš„å½±å“éšç€ç°ä»£ CPU æ ¸æ•°ä¸æ–­å¢åŠ ã€ç³»ç»Ÿè´Ÿè½½ä¸æ–­å¢é«˜ï¼Œä¸¥é‡æ€§ä¹Ÿé€æ­¥æå‡ã€‚åœ¨ç°ä»£ CPU ä¸Šï¼Œå•æ¬¡ Context Switch å¾€å¾€å¸¦æ¥ä¸Šåƒä¸ªæŒ‡ä»¤å‘¨æœŸçš„æ—¶é—´æˆæœ¬ï¼Œè¿‘ä¼¼äº<strong>ä¸Šåƒæ¬¡æµ®ç‚¹è¿ç®—</strong>[3]ã€‚è€Œè¿™è¿˜ä¸æ˜¯æœ€ç³Ÿç³•çš„â€”â€”å¦‚æœå‘ç”Ÿäº†è·¨æ ¸å¿ƒè¿ç§»ï¼Œæ›´æ˜¯ä¼šèŠ±è´¹<strong>æ•°å¾®ç§’</strong>çš„ä»£ä»·ç”¨äºç¼“å­˜é‡å»ºå’Œ CPU Core ä¹‹é—´åŒæ­¥ã€‚é«˜ç«äº‰ç¯å¢ƒä¸‹ï¼ŒCPU å¯èƒ½æœ‰<strong>æ•°ä¸ªç™¾åˆ†ç‚¹</strong>çš„æ—¶é—´éƒ½èŠ±åœ¨è¿™äº›éè¿ç®—ä»£ä»·ä¸­ã€‚[9]</p>
<p>Doris é€šè¿‡å…¨æ–°è®¾è®¡çš„ Pipeline å¼•æ“ï¼Œåœ¨ç”¨æˆ·æ€å®ç°ç²¾ç»†åŒ–çš„è°ƒåº¦æ§åˆ¶ï¼Œç»ˆäºè§£å†³äº†ä»¥ä¸Šå…¨éƒ¨é—®é¢˜ã€‚æœ¬è´¨ä¸Šè®²ï¼Œå®ƒå®ç°äº†ä¸€å¥—å®Œæ•´çš„<strong>åç¨‹</strong>ï¼ˆCoroutineï¼‰è¯­ä¹‰ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·æ€è°ƒåº¦ã€‚æå…¶ç¬¦åˆ OLAP è´Ÿè½½çš„å®é™…ã€‚</p>
<h3 data-id="heading-10">5.1 é˜»å¡ç­‰å¾…ï¼ŸPipeline Task æ‹†åˆ†</h3>
<p>æŸ¥è¯¢è®¡åˆ’æ ¹æ®é˜»å¡ç®—å­æ‹†è§£ä¸ºå¤šä¸ª <code>Pipeline</code>ï¼Œæ¯ä¸ª Pipeline åŒ…å«ä¸€ç»„ç®—å­ï¼ˆOperatorï¼‰ã€‚æ‰€æœ‰é˜»å¡ç®—å­çš„å¤šä¸ªä¸Šæ¸¸å‡è¢«æ‹†åˆ†è‡³ä¸åŒçš„ Pipelineï¼Œæ‰€ä»¥ Pipeline <strong>å†…éƒ¨å®Œå…¨ä¸å‘ç”Ÿé˜»å¡</strong>ã€‚æ¯ä¸ªé€»è¾‘ Pipeline è¢«å®ä¾‹åŒ–ä¸ºå¤šä¸ªç‰©ç† <code>PipelineTask</code>ï¼Œå¯è¢«å¤šæ ¸åŒæ—¶è°ƒåº¦ä»¥å……åˆ†åˆ©ç”¨ CPU èµ„æºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d086be76f70845f7ae22dc8adee17493~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=yV134vXY2Ol6EIJJ7rHPWKzcOek%3D" alt="5.1 é˜»å¡ç­‰å¾…ï¼ŸPipeline Task æ‹†åˆ†.png" loading="lazy"/></p>
<p>è¿™ä¿è¯äº†æ‰€æœ‰é˜»å¡çš„æ“ä½œä¸ä¼šå ç”¨æ‰§è¡Œçº¿ç¨‹ï¼Œè€Œæ˜¯æ ‡è®°è‡ªèº«é˜»å¡çŠ¶æ€åï¼Œå°†å½“å‰<strong>çº¿ç¨‹äº¤å›ç»™ Pipeline è°ƒåº¦å™¨</strong>é‡æ–°è°ƒåº¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸å†éœ€è¦éšç€æŸ¥è¯¢æ•°é‡å¢å¤šçš„çº¿ç¨‹äº†ã€‚</p>
<h3 data-id="heading-11">5.2 ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿçº¿ç¨‹è¿ç§»ï¼Ÿç”¨æˆ·æ€è°ƒåº¦å™¨</h3>
<p>Doris å®ç°äº†ä¸€ä¸ªç±»ä¼¼äº Go Runtimeï¼ˆåç¨‹ï¼‰çš„ç”¨æˆ·æ€è°ƒåº¦å™¨ï¼ˆTask Schedulerï¼‰ï¼Œå®ƒåŒ…å«ï¼š</p>
<ul>
<li><strong>å°±ç»ªé˜Ÿåˆ—ï¼ˆRunnable Queueï¼‰</strong>ï¼šä¸€æ—¦æ•°æ®å°±ç»ªï¼Œä¾èµ–è¢«æ»¡è¶³ï¼ŒTask è½¬ç§»è‡³å°±ç»ªé˜Ÿåˆ—ã€‚å¯ä»¥éšæ—¶è¢«è°ƒåº¦æ‰§è¡Œã€‚</li>
<li><strong>é˜»å¡é˜Ÿåˆ—ï¼ˆBlocked Queueï¼‰</strong>ï¼šå½“ Task éœ€è¦ç­‰å¾… IO æˆ– RPC æ•°æ®æ—¶ï¼Œå®ƒè¢«æ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼Œ<strong>ä¸å ç”¨æ“ä½œç³»ç»Ÿçº¿ç¨‹</strong>ã€‚</li>
<li><strong>æ‰§è¡Œçº¿ç¨‹æ± </strong>ï¼šä¸€ç»„å›ºå®šæ•°é‡çš„çº¿ç¨‹ä¸æ–­ä»å°±ç»ªé˜Ÿåˆ—å–å‡º Task æ‰§è¡Œã€‚<strong>æ‰§è¡Œçº¿ç¨‹ç»‘æ ¸</strong>ä»¥ä¿è¯ Cache å‘½ä¸­ç‡ã€‚</li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬æ›´è¿›ä¸€æ­¥åœ°è¿­ä»£äº†æ–°çš„ PipelineX æ‰§è¡Œå¼•æ“ï¼Œä¹Ÿå°±æ˜¯ Doris å½“å‰æ‰€ä½¿ç”¨çš„æ‰§è¡Œå¼•æ“ã€‚é€šè¿‡è®¾ç½®ä¸Šä¸‹æ¸¸ PipelineTask ä¹‹é—´ä¾èµ–çš„æ–¹å¼è¿›ä¸€æ­¥è§„é¿äº†å¯¹é˜»å¡ä»»åŠ¡çš„è½®è¯¢ï¼Œå®ç°äº†è‡ªåŠ¨å”¤é†’ä¸‹æ¸¸å¯æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/044bb3eceb3742b8923f2ba2e1094a31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=wByGn0yjpvITu8BFSQDKjG48FHc%3D" alt="5.2 ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿçº¿ç¨‹è¿ç§»ï¼Ÿç”¨æˆ·æ€è°ƒåº¦å™¨.png" loading="lazy"/></p>
<h3 data-id="heading-12">5.3 æ•°æ®å€¾æ–œï¼Ÿç»†ç²’åº¦æ•°æ®å‡è¡¡</h3>
<p>æˆ‘ä»¬å‰é¢è¯´åˆ°ï¼Œè¿‘å¹´æ¥ CPU å‘å±•çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿæ›´å¤šçš„æ ¸å¿ƒã€æ›´å¤šçš„ç³»ç»Ÿçº¿ç¨‹æ•°ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬çš„åŒä¸€ä¸ªæŸ¥è¯¢ï¼Œå¯ä»¥åŒæ—¶æ‹†åˆ†æˆæ›´å¤šä»½è¿›è¡Œå¹¶è¡Œã€‚è¿™æ˜¯ä¸ªå¥½äº‹å„¿â€¦â€¦å§ï¼Ÿ</p>
<p>ä¸€èˆ¬æ¥è¯´æ˜¯çš„ã€‚æ›´å¤šçš„çº¿ç¨‹æ„å‘³ç€å•ä½æ—¶é—´æ›´å¤§çš„ååã€‚ä½†è¿™æ˜æ˜¾å—åˆ°â€œçŸ­æ¿æ•ˆåº”â€çš„åˆ¶çº¦â€”â€”å¦‚æœæ‰«æçš„æ¯ä¸ªå­˜å‚¨åˆ†æ¡¶ï¼ˆBucket/Tabletï¼‰æ•°æ®é‡ä¸ä¸€è‡´ï¼Œä¸Šå±‚æ¯ä¸ª PipelineTask çš„<strong>æ‰§è¡Œæ—¶é—´ä¹Ÿå¿…ç„¶ä¸ä¸€è‡´</strong>ã€‚åœ¨ä¸åŒçš„æŸ¥è¯¢è´Ÿè½½ä¸‹ï¼Œä»…é€šè¿‡è°ƒæ•´åˆ†æ¡¶ç­–ç•¥å‡ ä¹æ— æ³•æ‰¾åˆ°æœ€ä¼˜è§£ã€‚</p>
<p>åœ¨ Doris çš„æ–° Pipeline å¼•æ“ä¸­ï¼Œè§£å†³è¿™ä¸€é—®é¢˜å´å¾ˆç®€å•ï¼šé€šè¿‡æ·»åŠ  Local Shuffle ç®—å­ï¼Œå¯¹ PipelineTask ä¹‹é—´çš„æ•°æ®è¿›è¡Œé‡æ–°åˆ†å¸ƒï¼Œâ€œæ•°æ®å€¾æ–œâ€é—®é¢˜è¢«å…¨è‡ªåŠ¨åŒ–åœ°æ¶ˆè§£äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0b52fd07f554b42b7fadba4cff97ef5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=DR%2B72gJuLovbIX4BIMdmHztsSHA%3D" alt="5.3 æ•°æ®å€¾æ–œï¼Ÿç»†ç²’åº¦æ•°æ®å‡è¡¡.png" loading="lazy"/></p>
<h3 data-id="heading-13">5.4 å°æŸ¥è¯¢é¥¿æ­»ï¼Ÿåˆ†æ—¶å¤ç”¨ä¸æŠ¢å </h3>
<p>ä¸ºäº†é˜²æ­¢å¤§æŸ¥è¯¢é¥¿æ­»å°æŸ¥è¯¢ï¼ŒPipeline å¼•æ“å¼•å…¥äº†åŸºäº<strong>å¤šçº§åé¦ˆé˜Ÿåˆ—</strong>çš„<strong>æ—¶é—´ç‰‡è½®è½¬</strong>æœºåˆ¶ã€‚ä¸€ä¸ª Task æ¯æ¬¡åœ¨ CPU ä¸Šæ‰§è¡Œçš„æ—¶é—´æœ‰é™ï¼ˆä¾‹å¦‚ 100msï¼‰ï¼Œå¦‚æœå½“å‰æ—¶é—´ç‰‡è¿è¡Œå®Œï¼Œå¿…é¡»å‡ºè®© CPU ç»™å…¶ä»–ä»»åŠ¡ã€‚åŒæ—¶ï¼Œæ ¹æ®æ‰§è¡Œæ—¶é—´çš„ç´¯è®¡ï¼Œå¤§çš„ Task ä¼šè¢«é€æ¸é™çº§è°ƒåº¦ï¼Œä¿è¯å°æŸ¥è¯¢æ¯”å¤§æŸ¥è¯¢æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œé˜²æ­¢å»¶è¿Ÿè¢«å½±å“ã€‚</p>
<p>è¿™ç§æœºåˆ¶ä½¿å¾— Doris åœ¨é«˜å¹¶å‘<strong>æ··åˆè´Ÿè½½</strong>ä¸‹ï¼ŒCPU åˆ©ç”¨ç‡èƒ½å¤Ÿç¨³å®šç»´æŒåœ¨ 95% ä»¥ä¸Šï¼Œä¸”å®Œå…¨é¿å…äº†çº¿ç¨‹çˆ†ç‚¸ï¼ˆThread Explosionï¼‰å¯¼è‡´çš„ç³»ç»ŸæŠ–åŠ¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/672831ab1067455fb414094f12c5e9c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=EhqLfz1xYS0wcjSNtBrUBmoaHVg%3D" alt="5.4 å°æŸ¥è¯¢é¥¿æ­»ï¼Ÿåˆ†æ—¶å¤ç”¨ä¸æŠ¢å .png" loading="lazy"/></p>
<h2 data-id="heading-14">6. è½åœ°ï¼šå¯éªŒè¯çš„æ€§èƒ½æå‡ç»“æœ</h2>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬ç½—åˆ—çš„è¿™äº›æŠ€æœ¯ï¼Œåˆ°åº•æœ‰ç”¨æ²¡æœ‰ï¼Ÿæ˜¯é«˜å¤§ä¸Šçš„èŠ±æ´»ï¼Œè¿˜æ˜¯çœŸæ­£èƒ½å¤Ÿè½åœ°åˆ°æˆç†Ÿç³»ç»Ÿä¸­çš„å…³é”®ä¼˜åŒ–å‘¢ï¼Ÿ</p>
<p>æ¥å§ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ Apache Dorisï¼ˆåŠ VeloDB ç­‰å•†ä¸šå‘è¡Œç‰ˆï¼‰åœ¨å„ä¸ª<strong>ä¼˜åŒ–å‰åçš„ç›´æ¥æ€§èƒ½å¯¹æ¯”ç»“æœ</strong>ã€‚ç»è¿‡é•¿ä¹…çš„è¿­ä»£ï¼Œå®ƒä»¬ç°åœ¨å‡å·²æˆä¸º Doris åšå®çš„æ¶æ„åŸºç¡€ã€‚</p>
<h3 data-id="heading-15">6.1 å‘é‡åŒ–æ‰§è¡Œ</h3>
<p>é¦–å…ˆæ˜¯å‘é‡åŒ–éƒ¨åˆ†ã€‚åœ¨ 1.2 ç‰ˆæœ¬ï¼ŒDoris çš„å‘é‡åŒ–å½»åº•æˆç†Ÿã€‚ç›¸æ¯”äºè¿‡å»çš„ç«å±±æ¨¡å‹ï¼Œè¿™æ˜¯ä¸€æ¬¡é‡Œç¨‹ç¢‘å¼çš„æ€§èƒ½è·ƒå‡â€”â€”æ ¹æ®å®éªŒï¼Œå¼€å¯å‘é‡åŒ–ä¹‹åçš„ Doris 1.2 ç›¸æ¯”æ—©æœŸçš„ Doris 0.15ï¼Œ<strong>åœ¨ SSB-Flat ä¸Šæ€§èƒ½æå‡äº†è¿‘ 10 å€[10]ï¼Œåœ¨ TPC-H ä¸Šæå‡äº†è¶…è¿‡ 11 å€ï¼Œæœ€æ˜¾è‘—çš„å•ä¸ª SQL æé€Ÿæ›´æ˜¯è¾¾åˆ°äº†è¿‘ 70 å€</strong>[11]ã€‚</p>
<h3 data-id="heading-16">6.2 Pipeline æ‰§è¡Œå¼•æ“</h3>
<p>åœ¨ Doris 2.0 ç‰ˆæœ¬ä¸Šï¼Œæˆ‘ä»¬å®ç°äº† Pipeline æ‰§è¡Œå¼•æ“ï¼Œå¹¶åœ¨ 2.1 ç‰ˆæœ¬è¿›è¡Œäº†å¤§çš„é‡æ„ï¼Œä½¿å…¨éƒ¨å®ç°è¾¾åˆ°ç†æƒ³çŠ¶æ€ã€‚åœ¨ Apache Doris 2.0 ä¸Šçš„æµ‹è¯•ç»“æœè¡¨æ˜ï¼ŒPipeline å¼•æ“é…åˆåˆç†çš„ SQL ä¼˜åŒ–ï¼Œ<strong>è¾¾åˆ°äº†ç›¸æ¯”ç«å±±æ¨¡å‹ 100% çš„ TPC-H æ€§èƒ½æå‡ï¼Œç›¸æ¯”äº Trino/Presto æ›´æ˜¯æœ‰ 3-5 å€çš„æ€§èƒ½é¢†å…ˆ</strong>[12]ã€‚åŸºäº Pipeline å¼•æ“ï¼ŒDoris æ›´æ˜¯å¼•å…¥äº† Workload Group è¿›è¡Œèµ„æºåˆ’åˆ†å’Œè´Ÿè½½æ§åˆ¶ï¼Œæœ‰æ•ˆè§£å†³äº†å¤§å‹å…¬å¸ä¸­é¢å¯¹å¤§é‡ç”¨æˆ·å¤æ‚åœºæ™¯çš„ç¨³å®šæ€§é—®é¢˜ã€‚</p>
<p>åœ¨ Doris 2.1 ä¸­ï¼Œæˆ‘ä»¬çš„ Pipeline å¼•æ“è¾¾åˆ°äº†æœ€ç»ˆå½¢æ€ï¼Œå®ƒå…·å¤‡äº†è‡ªé€‚åº”è§£å†³æ•°æ®å€¾æ–œçš„èƒ½åŠ›ã€‚ç›¸æ¯”äºå·²ç»è¾¾åˆ°ä¸šå†…é¢†å…ˆæ°´å¹³çš„ Doris 2.0ï¼Œå®ƒåœ¨ TPC-DS ä¸Šè¿›ä¸€æ­¥<strong>å®ç°äº† 100% çš„æ€§èƒ½æå‡ã€‚åœ¨æ•°æ®ä¸å‡è¡¡ã€åˆ†æ¡¶æ•°æä¸åˆç†çš„æç«¯æƒ…å†µä¸‹é‡æ–°æµ‹è¯• ClickBench å’Œ TPC-Hï¼Œä¹Ÿå‡ ä¹ä¸äº§ç”Ÿæ€§èƒ½æŸå¤±</strong>[13]ã€‚</p>
<h3 data-id="heading-17">6.3 ARM æ¶æ„ä¼˜åŒ–</h3>
<p>å¾—ç›Šäº Doris ç²¾ç»†çš„å‘é‡åŒ–å®ç°ï¼ŒARM æ¶æ„ä¸‹ Doris çš„æ€§èƒ½ç›¸æ¯”äºå…¶ä»–äº§å“ï¼Œäº§ç”Ÿäº†æ¯” X86 å¹³å°æ›´å¤§çš„é¢†å…ˆä¼˜åŠ¿ã€‚Doris 2.1 æ˜¯ç¬¬ä¸€ä¸ªé’ˆå¯¹ ARM æ¶æ„æ·±åº¦ä¼˜åŒ–çš„ç‰ˆæœ¬ã€‚ç›¸æ¯”äºå‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œ<strong>ARM ä¸‹çš„ Doris 2.1 åœ¨ ClickBench ä¸Šçš„æˆç»©æå‡äº† 230%ï¼ŒTPC-H ä¸Šä¹Ÿè¾¾åˆ°äº†æ¥è¿‘ 1 å€çš„æ€§èƒ½æå‡</strong>ã€‚[14]</p>
<p>å°¤å…¶æ˜¯åœ¨ AWS Graviton4 æ¶æ„ä¸‹ï¼ŒDoris å‡­å€Ÿå“è¶Šçš„ä¼˜åŒ–ï¼Œ<strong>ç›¸æ¯”äº X86 åœ¨ ClickBenchã€SSBã€SSB-Flatã€TPC-Hã€TPC-DS ä¸Šåˆ†åˆ«å–å¾—äº† 65%ã€54%ã€53%ã€54%ã€60% çš„æ€§ä»·æ¯”æå‡[14]</strong>ã€‚æ˜­ç¤ºç€ ARM ä¿¨ç„¶æˆä¸ºäº†æ•°æ®åˆ†æé¢†åŸŸé«˜æ€§ä»·æ¯”çš„é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47ba0c5f2ab64809afb7f4b716c2ba05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913003&amp;x-signature=j6vBJyvd9I4pD%2FA02XcoxlGwPHU%3D" alt="6.3 ARM æ¶æ„ä¼˜åŒ–.png" loading="lazy"/></p>
<h3 data-id="heading-18">6.4 æ•´ä½“æ€§èƒ½é¢†å…ˆ</h3>
<p>ç›¸æ¯”äº Clickhouseã€Trino ç­‰å…¶ä»– OLAP åˆ†æå¼•æ“ï¼ŒDoris çš„æ¨ªå‘å¯¹æ¯”æˆç»©ç©¶ç«Ÿå¦‚ä½•ï¼Ÿç»å†äº†è¿™ä¹ˆå¤šä¼˜åŒ–ä¹‹åï¼Œæ˜¯å¦çœŸæ­£å–å¾—äº†é¢†å…ˆï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›äº‹å®ç»“æœï¼š</p>
<ul>
<li>ç›¸æ¯”äº Clickhouseï¼ŒDoris åœ¨å…¶è‡ªå®¶ç»´æŠ¤çš„ ClickBench ä¸Šæ›¾å¤šæ¬¡å–å¾—é¢†å…ˆï¼Œä¸Šä¸€æ¬¡æäº¤çš„æˆç»©ä½åˆ—<strong>ç¬¬ 2 å</strong>ï¼Œé¢†å…ˆäº Clickhouse çš„ç¬¬ä¸‰å 2% çš„æ€»åˆ†ã€‚åœ¨ SSBã€TPC-H ä¸Šï¼Œæ›´æ˜¯åˆ†åˆ«æœ‰ <strong>3 å€å’Œ 60 å€çš„æ€§èƒ½é¢†å…ˆ</strong>ã€‚åœ¨ TPC-DS ä¸Šï¼ŒClickhouse åœ¨åŒç­‰èµ„æºä¸‹åªèƒ½æ‰§è¡Œçº¦ 50% çš„æŸ¥è¯¢ï¼Œ<strong>è¿™éƒ¨åˆ†æˆç»©æ¯” Doris çš„æ€»æˆç»©è¿˜è½å 1 å€</strong>[15]ã€‚
<ul>
<li>è€Œåœ¨å®æ—¶æ›´æ–°åœºæ™¯ä¸­ï¼ŒäºŒè€…å·®è·æ›´å¤§ã€‚æ ¹æ®å‘è¡Œå•† VeloDB çš„æµ‹è¯•ç»“æœï¼Œåœ¨æ¯” Clickhouse æ›´å·®çš„ç¡¬ä»¶æ¡ä»¶ä¸‹ï¼Œ<strong>25% æ›´æ–°ç‡åœºæ™¯ä¸‹ Doris æ¯” Clickhouse å¿« 14 å€ï¼›100% æ›´æ–°ç‡æ—¶é¢†å…ˆæ›´æ˜¯è¾¾åˆ°äº† 18 å€</strong>[16]ã€‚</li>
</ul>
</li>
<li>ç›¸æ¯”äº Trino/Prestoï¼ŒDoris åœ¨ TPC-DS 1TB æµ‹è¯•ä¸­ä½¿ç”¨åŒç­‰æ¡ä»¶è¿›è¡Œæ•°æ®æ¹–æŸ¥è¯¢ï¼Œ<strong>è¾¾åˆ°äº† 3 å€çš„æ€§èƒ½é¢†å…ˆ</strong>ï¼›ä½¿ç”¨ Doris <strong>å†…è¡¨æ€§èƒ½é¢†å…ˆæ›´æ˜¯è¾¾åˆ° 10 å€ä¹‹å¤š</strong>ã€‚åœ¨å®é™…ç”¨æˆ·åœºæ™¯ä¸­ï¼Œ<strong>æŸ¥è¯¢å»¶æ—¶æ›´æ˜¯é™ä½äº†æœ€å¤š 20 å€</strong>[17]ã€‚</li>
<li>ä¸ Spark å¯¹æ¯”ï¼ŒDoris åœ¨å…¶æ“…é•¿çš„<strong>å¤æ‚æŸ¥è¯¢ä¸‹æ€§èƒ½é¢†å…ˆ 4-6 å€</strong>ï¼Œå®æ—¶åœºæ™¯ä¸‹æ›´æ˜¯å®ç°äº†ä»£é™…çº§åˆ«çš„å»¶è¿Ÿä¼˜åŠ¿[13]ã€‚</li>
<li>å¯¹æ¯”æ“…é•¿åŠç»“æ„åŒ–æ•°æ®å­˜å‚¨çš„ ElasticSearchï¼ŒDoris <strong>åœ¨åŠç»“æ„åŒ–æµ‹è¯•é›† JsonBench ä¸Šè¾¾åˆ°äº† 2 å€æ€§èƒ½é¢†å…ˆï¼ŒåŒæ—¶è¶…è¶Šäº† Clickhouseã€‚ç›¸æ¯”äº Postgresql é¢†å…ˆå¹…åº¦æ›´æ˜¯è¾¾åˆ° 80 å€ä¹‹å¤š</strong>[18]ã€‚</li>
</ul>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>è¿‡å»åå¹´ï¼ŒOLAP æ€§èƒ½éœ€æ±‚çš„æ¼”è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯å‘åº•å±‚è¦ç®—åŠ›çš„ä¸€åœºç¡¬ä»—ã€‚å½“æŸ¥è¯¢å˜å¾—å¤æ‚ã€æ•°æ®é‡æš´æ¶¨ã€å¹¶å‘æ”€å‡æ—¶ï¼Œä¼ ç»Ÿæ‰§è¡Œå¼•æ“åœ¨ç¡¬ä»¶å±‚é¢çš„ä½æ•ˆè¢«æ— é™æ”¾å¤§ã€‚Apache Doris å›¢é˜Ÿé¢å¯¹çš„ï¼Œæ­£æ˜¯å¦‚ä½•é©¾é©­ç°ä»£å¤šæ ¸ CPU ä¸æ™ºèƒ½ç¼–è¯‘å™¨ï¼Œå°†æ¯ä¸€ä»½ç¡¬ä»¶æ½œèƒ½è½¬åŒ–ä¸ºç¨³å®šçš„æ€§èƒ½æå‡ã€‚</p>
<p>æŒ‘æˆ˜æ˜¯æ˜ç¡®çš„ï¼šå¦‚ä½•æ¶ˆé™¤è™šå‡½æ•°å’Œåˆ†æ”¯é¢„æµ‹å¸¦æ¥çš„å¼€é”€ï¼Ÿå¦‚ä½•è®©å†…å­˜è®¿é—®æ¨¡å¼æ›´é€‚é… CPU ç¼“å­˜ï¼Ÿå¦‚ä½•åœ¨é«˜å¹¶å‘ä¸‹é¿å…é”ä¸è°ƒåº¦æˆä¸ºç“¶é¢ˆï¼ŸDoris çš„åº”å¯¹ç­–ç•¥æ¸…æ™°è€Œç³»ç»Ÿï¼š</p>
<ul>
<li>é’ˆå¯¹è®¡ç®—æ•ˆç‡ï¼Œæˆ‘ä»¬é€šè¿‡å…¨é¢çš„å‘é‡åŒ–é‡æ„å’Œæ¨¡æ¿åŒ–ç¼–ç¨‹ï¼Œå°†å¤„ç†å•å…ƒä»â€œè¡Œâ€å‡çº§ä¸ºâ€œåˆ—â€ï¼Œå¹¶åœ¨ç¼–è¯‘æœŸå›ºåŒ–ç±»å‹ä¸åˆ†æ”¯ï¼Œè®©ç”Ÿæˆçš„ä»£ç è¿‘ä¹ç›´æ¥åŒ¹é… CPU çš„é«˜æ•ˆæµæ°´çº¿ã€‚</li>
<li>é’ˆå¯¹å†…å­˜æ•ˆç‡ï¼Œæˆ‘ä»¬å¼•å…¥ä¸“ç”¨çš„å†…å­˜åˆ†é…å™¨ä¸æ± åŒ–æŠ€æœ¯ï¼Œå¤§å¹…å‰Šå‡é«˜å¹¶å‘ä¸‹çš„é”ç«äº‰ä¸ç¢ç‰‡ï¼Œç¡®ä¿æ•°æ®åœ¨ç¼“å­˜ä¸­ç´§å‡‘æ’åˆ—ã€‚</li>
<li>é’ˆå¯¹å¤šæ ¸è°ƒåº¦ï¼Œæˆ‘ä»¬è‡ªç ” Pipeline æ‰§è¡Œå¼•æ“ï¼Œåœ¨ç”¨æˆ·æ€å®ç°ç²¾ç»†çš„ä»»åŠ¡è°ƒåº¦ä¸æ•°æ®å‡è¡¡ï¼Œå½»åº•è§£å†³æ“ä½œç³»ç»Ÿçº¿ç¨‹æ¨¡å‹åœ¨ OLAP åœºæ™¯ä¸‹çš„å›ºæœ‰ç¼ºé™·ã€‚</li>
</ul>
<p>è¿™äº›ä¼˜åŒ–ä¸æ˜¯å­¤ç«‹çš„æŠ€æœ¯å †ç Œï¼Œè€Œæ˜¯ä¸€å¥—è´¯ç©¿æ•°æ®ä»åŠ è½½åˆ°è®¡ç®—å…¨é“¾è·¯çš„ç³»ç»Ÿæ€§å·¥ç¨‹ã€‚å…¶æ ¸å¿ƒåœ¨äºï¼Œå›¢é˜Ÿå§‹ç»ˆä¿æŒç€å¯¹ç¡¬ä»¶è¡Œä¸ºä¸ç¼–è¯‘å™¨é€»è¾‘çš„æ·±åˆ»ç†è§£ï¼Œå¹¶ä»¥æ­¤é©±åŠ¨æ¶æ„æ¼”è¿›â€”â€”è®©ä»£ç çš„å†™æ³•é¡ºåº”ç¡¬ä»¶çš„â€œè„¾æ°”â€ï¼Œè®©æ‰§è¡Œè·¯å¾„å¥‘åˆç¼–è¯‘å™¨çš„â€œä¼˜åŒ–é€»è¾‘â€ã€‚</p>
<p>æœ€ç»ˆï¼Œè¿™ä½¿ Doris èƒ½å¤ŸæŒç»­åœ°å°†æ¯ä¸€ä»£ CPU çš„ç†è®ºç®—åŠ›ï¼Œç¨³å®šåœ°è½¬åŒ–ä¸ºç”¨æˆ·åœºæ™¯ä¸‹çš„å®é™…ååä¸ä½å»¶è¿Ÿã€‚æ€§èƒ½çš„æè‡´ï¼Œæ¥è‡ªäºå¯¹åº•å±‚ç»†èŠ‚çš„æŒç»­æ·±è€•ä¸ç³»ç»ŸåŒ–æŒæ§ã€‚</p>
<h2 data-id="heading-20">å‚è€ƒæ–‡çŒ®</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.abhik.xyz%2Fconcepts%2Fperformance%2Fcpu-pipelines" target="_blank" title="https://www.abhik.xyz/concepts/performance/cpu-pipelines" ref="nofollow noopener noreferrer">www.abhik.xyz/concepts/peâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwebs.um.es%2Faros%2Fpapers%2Fpdfs%2Fssingh-isca24.pdf" target="_blank" title="https://webs.um.es/aros/papers/pdfs/ssingh-isca24.pdf" ref="nofollow noopener noreferrer">webs.um.es/aros/papersâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.codingconfessions.com%2Fp%2Fcontext-switching-and-performance" target="_blank" title="https://blog.codingconfessions.com/p/context-switching-and-performance" ref="nofollow noopener noreferrer">blog.codingconfessions.com/p/context-sâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servethehome.com%2Fupdated-amd-epyc-and-intel-xeon-core-counts-over-time" target="_blank" title="https://www.servethehome.com/updated-amd-epyc-and-intel-xeon-core-counts-over-time" ref="nofollow noopener noreferrer">www.servethehome.com/updated-amdâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffaculty.cs.niu.edu%2F~winans%2Fnotes%2Fpatmc.pdf" target="_blank" title="https://faculty.cs.niu.edu/~winans/notes/patmc.pdf" ref="nofollow noopener noreferrer">faculty.cs.niu.edu/~winans/notâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpikuma.com%2Fblog%2Funderstanding-computer-cache" target="_blank" title="https://pikuma.com/blog/understanding-computer-cache" ref="nofollow noopener noreferrer">pikuma.com/blog/undersâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.phoronix.com%2Freview%2Fampereone-aws-graviton4" target="_blank" title="https://www.phoronix.com/review/ampereone-aws-graviton4" ref="nofollow noopener noreferrer">www.phoronix.com/review/ampeâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgrokipedia.com%2Fpage%2FNon-blocking_algorithm" target="_blank" title="https://grokipedia.com/page/Non-blocking_algorithm" ref="nofollow noopener noreferrer">grokipedia.com/page/Non-blâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.systemoverflow.com%2Flearn%2Fos-systems-fundamentals%2Fcpu-scheduling%2Fwhat-is-cpu-scheduling-and-context-switching" target="_blank" title="https://www.systemoverflow.com/learn/os-systems-fundamentals/cpu-scheduling/what-is-cpu-scheduling-and-context-switching" ref="nofollow noopener noreferrer">www.systemoverflow.com/learn/os-syâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fblog%2Fssb" target="_blank" title="https://doris.apache.org/blog/ssb" ref="nofollow noopener noreferrer">doris.apache.org/blog/ssb</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fblog%2Ftpch" target="_blank" title="https://doris.apache.org/blog/tpch" ref="nofollow noopener noreferrer">doris.apache.org/blog/tpch</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fmilestone-apache-doris-2-0" target="_blank" title="https://www.velodb.io/blog/milestone-apache-doris-2-0" ref="nofollow noopener noreferrer">www.velodb.io/blog/milestâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fapache-doris-2-1-0-released" target="_blank" title="https://www.velodb.io/blog/apache-doris-2-1-0-released" ref="nofollow noopener noreferrer">www.velodb.io/blog/apacheâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fapache-doris-achieves-70-better-price-performance" target="_blank" title="https://www.velodb.io/blog/apache-doris-achieves-70-better-price-performance" ref="nofollow noopener noreferrer">www.velodb.io/blog/apacheâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fdocs%2F3.x%2FgettingStarted%2Falternatives%2Falternative-to-clickhouse" target="_blank" title="https://doris.apache.org/docs/3.x/gettingStarted/alternatives/alternative-to-clickhouse" ref="nofollow noopener noreferrer">doris.apache.org/docs/3.x/geâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.velodb.io%2Fblog%2Fapache-doris-34x-faster-clickhouse-realtime-updates" target="_blank" title="https://www.velodb.io/blog/apache-doris-34x-faster-clickhouse-realtime-updates" ref="nofollow noopener noreferrer">www.velodb.io/blog/apacheâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdoris.apache.org%2Fdocs%2F3.x%2FgettingStarted%2Falternatives%2Falternative-to-trino" target="_blank" title="https://doris.apache.org/docs/3.x/gettingStarted/alternatives/alternative-to-trino" ref="nofollow noopener noreferrer">doris.apache.org/docs/3.x/geâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2F%40VeloDB_poweredby_ApacheDoris%2F1-billion-json-records-1-second-query-response-apache-doris-vs-7bbe9d9e3a12" target="_blank" title="https://medium.com/@VeloDB_poweredby_ApacheDoris/1-billion-json-records-1-second-query-response-apache-doris-vs-7bbe9d9e3a12" ref="nofollow noopener noreferrer">medium.com/@VeloDB_powâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»â€œæ­»äº†ä¹ˆâ€åˆ°â€œæ´»ç€è®°â€ï¼šç”¨Gmeekåœ¨æ•°å­—ä¸–ç•Œç•™ä¸‹æ€æƒ³å°è®°]]></title>    <link>https://juejin.cn/post/7594662258354782243</link>    <guid>https://juejin.cn/post/7594662258354782243</guid>    <pubDate>2026-01-13T12:47:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662258354782243" data-draft-id="7594678044263956480" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»â€œæ­»äº†ä¹ˆâ€åˆ°â€œæ´»ç€è®°â€ï¼šç”¨Gmeekåœ¨æ•°å­—ä¸–ç•Œç•™ä¸‹æ€æƒ³å°è®°"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-13T12:47:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»â€œæ­»äº†ä¹ˆâ€åˆ°â€œæ´»ç€è®°â€ï¼šç”¨Gmeekåœ¨æ•°å­—ä¸–ç•Œç•™ä¸‹æ€æƒ³å°è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:47:52.000Z" title="Tue Jan 13 2026 12:47:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡ä»è¿‘æœŸçƒ­è®®çš„â€œæ­»äº†ä¹ˆâ€Appå…¥æ‰‹ï¼Œæ¢è®¨ç°ä»£äººå¯¹æ•°å­—å®‰å…¨ä¸æ€æƒ³å­˜ç»­çš„åŒé‡éœ€æ±‚ï¼Œè¯¦ç»†ä»‹ç»åŸºäºGitHubçš„æç®€åšå®¢æ¡†æ¶Gmeekï¼Œé˜è¿°åœ¨æ•°å­—æ—¶ä»£é€šè¿‡åšå®¢è®°å½•æ€æƒ³ã€å¯¹æŠ—é—å¿˜çš„é‡è¦æ„ä¹‰ï¼Œé¼“åŠ±è¯»è€…å»ºç«‹ä¸ªäººæ•°å­—æ€æƒ³å®¶å›­ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d13b78ed59944ff967131bf5476e7eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=4pAt3BWHLoRUyv7ru9jEjMVfIg8%3D" alt="github_gmeek.png" loading="lazy"/></p>
<p>github_gmeek.png</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä¸€æ¬¾åä¸ºâ€œæ­»äº†ä¹ˆâ€çš„Appè¿‘æœŸå¼•å‘å¹¿æ³›è®¨è®ºã€‚å®ƒä»¥ç›´ç™½ç”šè‡³ç•¥æ˜¾ç”Ÿç¡¬çš„åå­—ï¼Œç²¾å‡†åœ°åˆ‡ä¸­äº†å½“ä»£ç¤¾ä¼šä¸€ä¸ªçœŸå®ä¸”è§„æ¨¡åºå¤§çš„ç¾¤ä½“éœ€æ±‚ã€‚</p>
<p>å¯ä»¥è¯´ï¼Œâ€œæ­»äº†ä¹ˆâ€çš„ç«çˆ†ï¼Œæ˜¯äº§å“åˆ›æ„ã€ç¤¾ä¼šæƒ…ç»ªä¸ç½‘ç»œä¼ æ’­å…±åŒä½œç”¨çš„ç»“æœã€‚å®ƒå¦‚åŒä¸€é¢æ£±é•œï¼ŒæŠ˜å°„å‡ºå½“ä»£ç‹¬å±…ç”Ÿæ´»çš„æ½œåœ¨éšå¿§ã€‚</p>
<p>å¦‚ä»Šï¼Œç‹¬å±…è€…äººæ•°ä¼—å¤šã€‚ä»–ä»¬å¾€å¾€ç‹¬è‡ªå¥‹æ–—ï¼Œä¹ æƒ¯â€œä¸€ä¸ªäººæ‰›ä¸‹æ‰€æœ‰â€ï¼Œæœ€æ‹…å¿ƒçš„è«è¿‡äºåœ¨çªå‘ç–¾ç—…æˆ–æ„å¤–æ—¶æ— äººçŸ¥æ™“ã€‚è¿™æ¬¾Appä¹‹æ‰€ä»¥èƒ½å¤Ÿèµ°çº¢ï¼Œæ°æ°åœ¨äºå®ƒæ•é”åœ°æ•æ‰åˆ°äº†ç°ä»£äººä¸€ç§å¾®å¦™è€Œæ™®éçš„å¿ƒç†â€”â€”â€œä¸æ„¿æ—¥å¸¸æ‰“æ‰°ä»–äººï¼Œå´æ¸´æœ›åœ¨å¼‚å¸¸çŠ¶å†µä¸‹è¢«å…³æ³¨â€ã€‚ç”¨æˆ·æ— éœ€å¤æ‚çš„ç¤¾äº¤ï¼Œä»…é€šè¿‡ç®€å•çš„æ¯æ—¥æ‰“å¡ï¼Œå°±èƒ½ä¸ºè‡ªå·±æ„ç­‘ä¸€é“æœ€ä½æˆæœ¬çš„â€œå®‰å…¨é˜²çº¿â€ã€‚å…¶ä»˜è´¹ä¸‹è½½é‡çš„å¿«é€Ÿå¢é•¿ï¼Œä¹Ÿå°è¯äº†è¿™ä¸€éœ€æ±‚çœŸå®è€Œå¼ºçƒˆã€‚</p>
<p>ç„¶è€Œï¼Œäººç»ˆæœ‰ä¸€æ­»ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç•™ä¸‹ç”Ÿæ´»è¿‡çš„ç—•è¿¹ï¼Ÿå¦‚ä½•åœ¨æ—¥å¸¸ä¸­å®‰é¡¿å†…å¿ƒã€ä¸è‡ªå·±å¯¹è¯ï¼Ÿæ´»ç€ï¼Œä¸ä»…ä»…æ„å‘³ç€æ²¡æœ‰æ­»å»ï¼Œè€Œæ˜¯è¦æœ‰æ€æƒ³ã€æœ‰è®°å½•ã€æœ‰å›å“åœ°æ´»ç€ã€‚åšå®¢ï¼Œä½œä¸ºä¸€ç§æ•°å­—åŒ–çš„è¡¨è¾¾æ–¹å¼ï¼Œæ­£æˆä¸ºè¶Šæ¥è¶Šå¤šäººè®°å½•è‡ªæˆ‘ã€åˆ†äº«è§è§£ã€æ²‰æ·€æ€æƒ³çš„å¹³å°ã€‚</p>
<p>æœ€è¿‘è¯»åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œé¢‡å—å¯å‘ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Flaike9m.com%2Fblog%2Fpeople-die-but-long-live-github%2C122%2F" target="_blank" title="https://laike9m.com/blog/people-die-but-long-live-github,122/" ref="nofollow noopener noreferrer">People Die, but Long Live GitHub</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/090edfec5b564f14b09057f894fac4dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=gD3zKk71lhbC%2FE1wJ1qcAQldC4M%3D" alt="people-die-but-long-live-github.png" loading="lazy"/></p>
<p>people-die-but-long-live-github.png</p>
<p>æœ€è¿‘ï¼Œæˆ‘è¿˜åœ¨ GitHub ä¸Šå‘ç°äº†ä¸€ä¸ªå¼€æºé¡¹ç›®â€”â€”Gmeekã€‚å®ƒæ˜¯ä¸€ä¸ªè¶…è½»é‡çº§çš„ä¸ªäººåšå®¢æ¡†æ¶ï¼Œå®Œå…¨åŸºäº GitHub Pagesã€GitHub Issues ä¸ GitHub Actions æ„å»ºï¼Œå¯è°“â€œAll in GitHubâ€ã€‚æ— éœ€æœ¬åœ°éƒ¨ç½²ï¼Œä»æ­å»ºåˆ°å†™ä½œï¼Œæ•´ä¸ªè¿‡ç¨‹åªéœ€ä¸‰æ­¥ï¼šå‰ä¸¤æ­¥ç”¨ 18 ç§’å®Œæˆåšå®¢æ­å»ºï¼Œç¬¬ä¸‰æ­¥å³å¯å¼€å§‹ä¹¦å†™ã€‚ä»Šå¤©æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨è¿™æ¬¾å¼€æºé¡¹ç›®æ„å»ºä¸ªäººgithubåšå®¢ã€‚</p>
<h2 data-id="heading-1">Gmeekï¼šä¸‰æ­¥æ„å»ºä½ çš„æ•°å­—æ€æƒ³å®¶å›­</h2>
<p>ä¸€ä¸ªåšå®¢æ¡†æ¶ï¼Œè¶…è½»é‡çº§ä¸ªäººåšå®¢æ¨¡æ¿ã€‚å®Œå…¨åŸºäº<code>Github Pages</code> ã€ <code>Github Issues</code> å’Œ <code>Github Actions</code>ã€‚ä¸éœ€è¦æœ¬åœ°éƒ¨ç½²ï¼Œä»æ­å»ºåˆ°å†™ä½œï¼Œåªéœ€è¦18ç§’ï¼Œ2æ­¥æ­å»ºå¥½åšå®¢ï¼Œç¬¬3æ­¥å°±æ˜¯å†™ä½œã€‚</p>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMeekdai%2FGmeek" target="_blank" title="https://github.com/Meekdai/Gmeek" ref="nofollow noopener noreferrer">github.com/Meekdai/Gmeâ€¦</a></p>
<p>æ–‡æ¡£åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.meekdai.com%2Ftag.html%23Gmeek" target="_blank" title="https://blog.meekdai.com/tag.html#Gmeek" ref="nofollow noopener noreferrer">blog.meekdai.com/tag.html#Gmâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/526c834848bc481a8bcba9af189d629e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=gZYVqS2ytFjhvRRGZMoHuj3mLnY%3D" alt="gmeek_star.png" loading="lazy"/></p>
<p>gmeek_star.png</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2394926afc2b4c68b38f42f600e39110~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=t2jrslZbukUO9PDfibiz%2BE8FcPo%3D" alt="gmeek_doc_blog.png" loading="lazy"/></p>
<p>gmeek_doc_blog.png</p>
<h2 data-id="heading-2">å¿«é€Ÿå¼€å§‹</h2>
<ol>
<li>ã€åˆ›å»ºä»“åº“ã€‘ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnew%3Ftemplate_name%3DGmeek-template%26template_owner%3DMeekdai" target="_blank" title="https://github.com/new?template_name=Gmeek-template&amp;template_owner=Meekdai" ref="nofollow noopener noreferrer">é€šè¿‡æ¨¡æ¿åˆ›å»ºä»“åº“</a>ï¼Œå»ºè®®ä»“åº“åç§°ä¸º<code>XXX.github.io</code>ï¼Œå…¶ä¸­<code>XXX</code>ä¸ºä½ çš„githubç”¨æˆ·åã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e5fd868ad6e4df696d814396da7ce03~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=V2QNAey4ZUD6Cs%2Biug7Ta0mLUVI%3D" alt="xiuji_github_blog.png" loading="lazy"/></p>
<p>xiuji_github_blog.png</p>
<ol start="2">
<li>ã€å¯ç”¨Pagesã€‘åœ¨ä»“åº“çš„<code>Settings</code>ä¸­<code>Pages-&gt;Build and deployment-&gt;Source</code>ä¸‹é¢é€‰æ‹©<code>Github Actions</code>ã€‚</li>
<li>ã€å¼€å§‹å†™ä½œã€‘æ‰“å¼€ä¸€ç¯‡issueï¼Œå¼€å§‹å†™ä½œï¼Œå¹¶ä¸”<strong>å¿…é¡»</strong>æ·»åŠ ä¸€ä¸ª<code>æ ‡ç­¾Label</code>ï¼ˆè‡³å°‘æ·»åŠ ä¸€ä¸ªï¼‰ï¼Œå†ä¿å­˜issueåä¼šè‡ªåŠ¨åˆ›å»ºåšå®¢å†…å®¹ï¼Œç‰‡åˆ»åå¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2FXXX.github.io" target="_blank" title="https://XXX.github.io" ref="nofollow noopener noreferrer">XXX.github.io</a> è®¿é—®ï¼ˆå¯è¿›å…¥Actionsé¡µé¢æŸ¥çœ‹æ„å»ºè¿›åº¦ï¼‰ã€‚</li>
<li>ã€æ‰‹åŠ¨å…¨å±€ç”Ÿæˆã€‘è¿™ä¸ªæ­¥éª¤åªæœ‰åœ¨ä¿®æ”¹<code>config.json</code>æ–‡ä»¶æˆ–è€…å‡ºç°å¥‡æ€ªé—®é¢˜çš„æ—¶å€™ï¼Œéœ€è¦æ‰§è¡Œã€‚</li>
</ol>

<pre><code class="hljs language-rust" lang="rust">é€šè¿‡Actions<span class="hljs-punctuation">-&gt;</span>build Gmeek<span class="hljs-punctuation">-&gt;</span>Run workflow<span class="hljs-punctuation">-&gt;</span>é‡Œé¢çš„æŒ‰é’®å…¨å±€é‡æ–°ç”Ÿæˆä¸€æ¬¡
</code></pre>
<blockquote>
<p>[!NOTE] issueå¿…é¡»æ·»åŠ ä¸€ä¸ªæ ‡ç­¾Labelï¼ˆè‡³å°‘æ·»åŠ ä¸€ä¸ªï¼‰</p>
</blockquote>
<p>åˆ°æ­¤ï¼Œæäº¤å®Œissueä¹‹åActionsé¡µé¢æ„å»ºå®Œæˆä¹‹åå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„åšå®¢äº†ã€‚</p>
<p>åšä¸»çš„githubåšå®¢åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fxiuji008.github.io%2F" target="_blank" title="https://xiuji008.github.io/" ref="nofollow noopener noreferrer">xiuji008.github.io/</a></p>
<h2 data-id="heading-3">é…ç½®åŠä½¿ç”¨</h2>
<p>config.json æ–‡ä»¶å°±æ˜¯é…ç½®æ–‡ä»¶ï¼Œåœ¨åˆ›å»ºçš„ä»“åº“å†…å¯ä»¥æ‰¾åˆ°ï¼Œå¯¹åº”ä¿®æ”¹ä¸ºè‡ªå·±çš„å³å¯ã€‚</p>
<p>é…ç½®å¯å‚è€ƒGmeekä½œè€…åšæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.meekdai.com%2Fpost%2FGmeek-kuai-su-shang-shou.html" target="_blank" title="https://blog.meekdai.com/post/Gmeek-kuai-su-shang-shou.html" ref="nofollow noopener noreferrer">blog.meekdai.com/post/Gmeek-â€¦</a></p>
<h3 data-id="heading-4">staticæ–‡ä»¶å¤¹ä½¿ç”¨</h3>
<ol>
<li>åœ¨è‡ªå·±çš„ä»“åº“æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåç§°å¿…é¡»æ˜¯staticã€‚</li>
<li>ç„¶ååœ¨staticæ–‡ä»¶å†…ä¸Šä¼ ä¸€äº›è‡ªå·±çš„æ–‡ä»¶ï¼Œæ¯”å¦‚åšå®¢å›¾ç‰‡ã€æ’ä»¶jsç­‰ã€‚</li>
<li>é€šè¿‡æ‰‹åŠ¨å…¨å±€ç”Ÿæˆä¸€æ¬¡æˆåŠŸåï¼Œä½ å°±å¯ä»¥é€šè¿‡ xxx.github.io/your.png è®¿é—®äº†</li>
</ol>
<h3 data-id="heading-5">æ’ä»¶åŠŸèƒ½çš„ä½¿ç”¨</h3>
<p>ä¸ºäº†ä½¿å¾—Gmeekçš„åŠŸèƒ½æ›´åŠ çš„ä¸°å¯Œï¼ŒGmeekä½œè€…æ·»åŠ äº†æ’ä»¶çš„åŠŸèƒ½ï¼Œç›®å‰å·²ç»æœ‰å‡ ä¸ªæ’ä»¶å¯ä»¥ä½¿ç”¨ã€‚å¤§å®¶å¯ä»¥ç›´æ¥å¤åˆ¶æ–‡ç« ä¸­çš„é…ç½®ä»£ç ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æŠŠå¯¹åº”çš„æ’ä»¶æ–‡ä»¶æ‹·è´åˆ°è‡ªå·±çš„staticæ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-6">è®¡æ•°å·¥å…· Vercount</h4>
<ol>
<li>å…¨ç«™æ·»åŠ è®¡æ•°å·¥å…·Vercountï¼Œåªéœ€è¦åœ¨config.jsonæ–‡ä»¶å†…æ·»åŠ é…ç½®</li>
</ol>

<pre><code class="hljs language-xml" lang="xml">"allHead":"<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>",
</code></pre>
<p>2.  å•ä¸ªæ–‡ç« é¡µæ·»åŠ Vercountï¼Œåªéœ€è¦åœ¨æ–‡ç« æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹</p>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ##{"script":"&lt;script src='https://blog.meekdai.com/Gmeek/plugins/GmeekVercount.js'&gt;&lt;/script&gt;"}## --&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65b854151b7f4a8b8ee326a1abc691d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=ZZildM3CBvDjjfhYNUGNchgPH5Y%3D" alt="gmeek_plugin_vercount.png" loading="lazy"/></p>
<p>gmeek_plugin_vercount.png</p>
<h4 data-id="heading-7">TOCç›®å½•</h4>
<ol>
<li>æ‰€æœ‰æ–‡ç« é¡µæ·»åŠ TOCç›®å½•ï¼Œåªéœ€è¦åœ¨config.jsonæ–‡ä»¶å†…æ·»åŠ é…ç½®</li>
</ol>

<pre><code class="hljs language-xml" lang="xml">"script":"<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>",
</code></pre>
<p>2.  å•ä¸ªæ–‡ç« é¡µæ·»åŠ TOCç›®å½•ï¼Œåªéœ€è¦åœ¨æ–‡ç« æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹</p>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ##{"script":"&lt;script src='https://blog.meekdai.com/Gmeek/plugins/GmeekTOC.js'&gt;&lt;/script&gt;"}## --&gt;</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60c9965c3dde4456bfada17b564355ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=UN9nt%2F4NpDXRtw93ud6KRjw%2BRS8%3D" alt="gmeek_plugins_toc.png" loading="lazy"/></p>
<p>gmeek_plugins_toc.png</p>
<h4 data-id="heading-8">ç¯ç®±æ’ä»¶</h4>
<blockquote>
<p>[!TIP] æ­¤æ’ä»¶ç”±Tiengmingç¼–å†™ï¼Œå¯ä»¥æ”¾å¤§æµè§ˆæ–‡ç« ä¸­çš„å›¾ç‰‡ï¼Œé€‚åˆä¸€äº›å›¾ç‰‡è¾ƒå¤šçš„æ–‡ç« ã€‚</p>
</blockquote>
<ol>
<li>æ‰€æœ‰æ–‡ç« é¡µæ·»åŠ lightboxï¼Œåªéœ€è¦åœ¨config.jsonæ–‡ä»¶å†…æ·»åŠ é…ç½®</li>
</ol>

<pre><code class="hljs language-xml" lang="xml">"script":"<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://blog.meekdai.com/Gmeek/plugins/lightbox.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>",
</code></pre>
<p>2.  å•ä¸ªæ–‡ç« é¡µæ·»åŠ lightboxï¼Œåªéœ€è¦åœ¨æ–‡ç« æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹</p>

<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ##{"script":"&lt;script src='https://blog.meekdai.com/Gmeek/plugins/lightbox.js'&gt;&lt;/script&gt;"}## --&gt;</span>
</code></pre>
<h4 data-id="heading-9">çœ‹æ¿å¨˜ï¼ˆèŠ±é‡Œèƒ¡å“¨ï¼‰</h4>
<blockquote>
<p>[!TIP] æ­¤æ’ä»¶ä»githubå¼€æºé¡¹ç›®live2d-widgetå¼•å…¥ï¼Œçº¯å±é¡µé¢å±•ç¤º</p>
</blockquote>
<ol>
<li>æ‰€æœ‰æ–‡ç« é¡µæ·»åŠ lightboxï¼Œåªéœ€è¦åœ¨config.jsonæ–‡ä»¶å†…æ·»åŠ é…ç½®</li>
</ol>

<pre><code class="hljs language-xml" lang="xml">"script":"<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0/dist/autoload.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>",
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74ec77dc4d8c4f6d8a255aa026799bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=mPGP0DB2LJIKYG0mR4m6dK3pl94%3D" alt="gmeek_plugins_live2d-widget.png" loading="lazy"/></p>
<p>gmeek_plugins_live2d-widget.png</p>
<p>å¯¹çœ‹æ¿å¨˜é¡¹ç›®æ„Ÿå…´è¶£çš„ä¼™ä¼´ä¹Ÿå¯ä»¥ç ”ç©¶ä¸‹</p>
<p>çœ‹æ¿å¨˜é¡¹ç›®githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fstevenjoezhang%2Flive2d-widget" target="_blank" title="https://github.com/stevenjoezhang/live2d-widget" ref="nofollow noopener noreferrer">github.com/stevenjoezhâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2bacf69cfad4aa2b9b8bc2162417653~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=hiuDjQGEQctXi76MUAN7UGoaTPE%3D" alt="github_live2d_widget.png" loading="lazy"/></p>
<p>github_live2d_widget.png</p>
<h4 data-id="heading-10">å¤šæ’ä»¶ä½¿ç”¨</h4>
<p>åŒæ—¶åœ¨æ‰€æœ‰æ–‡ç« é¡µä½¿ç”¨TOCç›®å½•ã€ç¯ç®±æ’ä»¶åŠå…¶å®ƒæ’ä»¶ï¼Œéœ€è¦è¿™æ ·æ·»åŠ é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">    "allHead":"<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://xiuji008.github.io/plugins/gmeekVercount.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://xiuji008.github.io/plugins/lightbox.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://xiuji008.github.io/plugins/gmeekTOC.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">'https://fastly.jsdelivr.net/npm/live2d-widgets@1.0.0/dist/autoload.js'</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>",
</code></pre>
<h3 data-id="heading-11">å…¶å®ƒä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-12">issueæ·»åŠ ä¸­æ–‡æ ‡ç­¾</h4>
<ol>
<li>ç‚¹å‡» <code>issue</code>é¡µç­¾, ç‚¹å‡»å³ä¾§ <code>Labels</code> åè¾¹çš„è®¾ç½®æŒ‰é’®ï¼Œç‚¹å‡»<code>Edit labels</code></li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b79ffad7f1bb422fbad33317c427bc3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=GzrskHMxK1quPIgQnXiVjX69w00%3D" alt="issues_labels_setting.png" loading="lazy"/></p>
<p>issues_labels_setting.png</p>
<ol start="2">
<li>åœ¨<code>Labels</code> é¡µé¢åˆ™å¯ä»¥æ–°å¢æˆ–ä¿®æ”¹æ ‡ç­¾</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb8d710e32ab478d9e98e92ae75a3fe0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=R4Z2zSO%2BI0k0lwfVuYRaOuneU%2BI%3D" alt="issues_labels_edit.png" loading="lazy"/></p>
<p>issues_labels_edit.png</p>
<h4 data-id="heading-13">ç½®é¡¶åšå®¢æ–‡ç« </h4>
<p>åªéœ€è¦<code>Pin issue</code>åï¼Œæ‰‹åŠ¨å…¨å±€ç”Ÿæˆä¸€æ¬¡å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da2ee6bab79041df8a575ae7e48a3562~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913271&amp;x-signature=TzRr8%2BT0leJlTDNafK%2BYryG14CE%3D" alt="issues_pin.png" loading="lazy"/></p>
<p>issues_pin.png</p>
<h4 data-id="heading-14">è¯„è®º utterancæŠ¥é”™</h4>
<p>å¦‚æœåœ¨è¯„è®ºé‡Œé¢ç™»å½•åè¯„è®ºæŠ¥é”™ï¼Œå¯ç›´æ¥æŒ‰ç…§æç¤ºå®‰è£…<code>utteranc app</code>å³å¯</p>
<pre><code class="hljs language-kotlin" lang="kotlin">Error: utterances <span class="hljs-keyword">is</span> not installed on xxx/xxx.github.io. If you own <span class="hljs-keyword">this</span> repo, install the app. Read more about <span class="hljs-keyword">this</span> change <span class="hljs-keyword">in</span> the PR.
</code></pre>
<h4 data-id="heading-15">åˆ é™¤æ–‡ç« </h4>
<p>åªéœ€è¦<code>Close issue</code>æˆ–è€…<code>Delete issue</code>åï¼Œå†æ‰‹åŠ¨å…¨å±€ç”Ÿæˆä¸€æ¬¡å³å¯ã€‚</p>
<h2 data-id="heading-16">ç»“è¯­ï¼šåœ¨æ•°å­—æ—¶ä»£ç•™ä¸‹æœ‰æ¸©åº¦çš„ç—•è¿¹</h2>
<p>â€œæ­»äº†ä¹ˆâ€å…³æ³¨çš„æ˜¯ç‰©ç†å­˜åœ¨çš„å®‰å…¨ï¼Œè€ŒGmeekè¿™æ ·çš„å·¥å…·å…³æ³¨çš„æ˜¯æ€æƒ³å­˜åœ¨çš„å»¶ç»­ã€‚ä¸¤è€…çœ‹ä¼¼æ— å…³ï¼Œå®åˆ™éƒ½å›åº”äº†ç°ä»£äººå¯¹å­˜åœ¨æ„Ÿçš„æ·±å±‚æ¸´æœ›ã€‚</p>
<p>åœ¨è¿™ä¸ªç®—æ³•ä¸»å¯¼ã€æ³¨æ„åŠ›ç¢ç‰‡åŒ–çš„æ—¶ä»£ï¼Œæ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„æ•°å­—è§’è½ï¼Œå®šæœŸè®°å½•ã€æ•´ç†ã€è¾“å‡ºï¼Œä¸ä»…æ˜¯å¯¹æŠ—é—å¿˜çš„æ–¹å¼ï¼Œæ›´æ˜¯ä¸€ç§ç§¯æçš„ç”Ÿæ´»æ€åº¦â€”â€”ä¸»åŠ¨å¡‘é€ è‡ªå·±çš„æ•°å­—èº«ä»½ï¼Œè€Œéè¢«åŠ¨åœ°è¢«å¹³å°å®šä¹‰ã€‚</p>
<p>ä»æ‹…å¿ƒâ€œæ— äººçŸ¥æ™“çš„ç¦»å»â€åˆ°ä¸»åŠ¨â€œç•™ä¸‹æœ‰æ€æƒ³çš„ç—•è¿¹â€ï¼Œæˆ–è®¸æ­£æ˜¯æ•°å­—æ—¶ä»£ç»™äºˆæˆ‘ä»¬çš„ä¸€ç§å¹³è¡¡ï¼šæ—¢é€šè¿‡å·¥å…·è·å¾—å®‰å…¨æ„Ÿï¼Œä¹Ÿé€šè¿‡è¡¨è¾¾å®ç°è‡ªæˆ‘ç¡®è®¤ã€‚</p>
<p>ä½ çš„æ€æƒ³å€¼å¾—è¢«è®°å½•ï¼Œä½ çš„å£°éŸ³å€¼å¾—è¢«å¬è§ã€‚ç°åœ¨ï¼Œåªéœ€18ç§’ï¼Œå°±å¯ä»¥å¼€å§‹åœ¨GitHubä¸Šå»ºé€ ä½ çš„æ•°å­—æ€æƒ³å®¶å›­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»Shapefileåˆ°GeoJSONï¼šç”¨GDALå®ç°GISçŸ¢é‡æ•°æ®è¯»å†™ä¸ç©ºé—´åˆ†æ]]></title>    <link>https://juejin.cn/post/7594662258354798627</link>    <guid>https://juejin.cn/post/7594662258354798627</guid>    <pubDate>2026-01-13T12:55:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662258354798627" data-draft-id="7594661351513423907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»Shapefileåˆ°GeoJSONï¼šç”¨GDALå®ç°GISçŸ¢é‡æ•°æ®è¯»å†™ä¸ç©ºé—´åˆ†æ"/> <meta itemprop="keywords" content="GIS"/> <meta itemprop="datePublished" content="2026-01-13T12:55:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="charlee44"/> <meta itemprop="url" content="https://juejin.cn/user/1117549770846872"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»Shapefileåˆ°GeoJSONï¼šç”¨GDALå®ç°GISçŸ¢é‡æ•°æ®è¯»å†™ä¸ç©ºé—´åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1117549770846872/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    charlee44
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:55:50.000Z" title="Tue Jan 13 2026 12:55:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡èŠ‚é€‰è‡ªä½œè€…æ–°ä¹¦<a href="https://link.juejin.cn?target=https%3A%2F%2Fitem.jd.com%2F14603137.html" target="_blank" title="https://item.jd.com/14603137.html" ref="nofollow noopener noreferrer">ã€ŠGISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µã€‹</a>ç¬¬4ç« ï¼Œç³»ç»Ÿè®²è§£çŸ¢é‡æ•°æ®å¼€å‘åŸºç¡€ï¼Œæ¶µç›– OGR/GDAL ä½¿ç”¨ã€åæ ‡è½¬æ¢ã€æ‹“æ‰‘åˆ¤æ–­ç­‰å®æˆ˜å†…å®¹ã€‚</p>
</blockquote>
<p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/e43cc66da13b4e589a26aeb1c0e38981~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhcmxlZTQ0:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTExNzU0OTc3MDg0Njg3MiJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1768395215&amp;x-orig-sign=8S%2FRPaItEEf9cpF3n7hXpPRqkXQ%3D" alt="GISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µ" loading="lazy"/></p>
<h2 data-id="heading-0">4.4 çŸ¢é‡æ•°æ®å¼€å‘åŸºç¡€</h2>
<p>é€šè¿‡ä¹‹å‰çš„ä»‹ç»ï¼Œç›¸ä¿¡è¯»è€…å·²ç»å¯¹äºGISçš„çŸ¢é‡æ•°æ®æœ‰äº†ä¸€ä¸ªå…¨é¢çš„è®¤è¯†ï¼Œå°½ç®¡å¯èƒ½ä¸æ˜¯é‚£ä¹ˆæ·±å…¥ã€‚ä½†æ˜¯æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­åŠ æ·±å¯¹å…¶çš„è®¤è¯†ã€‚</p>
<h3 data-id="heading-1">4.4.1 ç¬¬ä¸‰æ–¹å¼€æºåº“OGR/GDAL</h3>
<p>åœ¨ç¬¬3ç« çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°è¯•ç‰›åˆ€ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹å¼€æºåº“PROJ/GDALå¾ˆç®€å•çš„å°±å®ç°äº†åœ°ç†ç©ºé—´å‚è€ƒç³»ç»Ÿçš„ç›¸äº’è½¬æ¢ã€‚åœ¨è¿™é‡ŒåŒæ ·å¦‚æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡GDALçš„OGRç»„ä»¶ï¼Œè½»æ¾å®ç°GISçŸ¢é‡æ•°æ®çš„åŸºç¡€å¼€å‘ã€‚</p>
<p>OGRæ›¾ç»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„çŸ¢é‡IOåº“ï¼Œè¡¨ç¤ºOpenGIS Simple Features Reference Implementationçš„æ„æ€ï¼Œä½†å…¶å®OGRä¸å®Œå…¨ç¬¦åˆOGCçš„Simple Featureæ ‡å‡†è§„èŒƒï¼Œå› æ­¤æœªè¢«æ‰¹å‡†ä½œä¸ºè¯¥è§„èŒƒçš„å‚è€ƒå®ç°ï¼ˆå½“ç„¶ä¹Ÿéå¸¸æ¥è¿‘è§„èŒƒäº†ï¼‰ã€‚ä»GDAL2.0å¼€å§‹ï¼ŒGDALå’ŒOGRç»„ä»¶è¢«é›†æˆåœ¨ä¸€èµ·ã€‚</p>
<p>OGR/GDALæä¾›äº†éå¸¸å¼ºå¤§çš„çŸ¢é‡è¯»å†™èƒ½åŠ›ï¼Œæ”¯æŒå¸‚é¢ä¸Šç»å¤§å¤šæ•°çŸ¢é‡æ•°æ®æ ¼å¼ã€‚åœ¨ç¬¬3ç« æˆ‘ä»¬ä»‹ç»GDALçš„æ—¶å€™å°±æåˆ°è¿‡ï¼ŒGDALæ˜¯ä¸€ä¸ªGISæ•°æ®æŠ½è±¡åº“ã€‚æ‰€è°“æ•°æ®æŠ½è±¡ï¼Œæ˜¯æŒ‡æ— è®ºæ˜¯å“ªä¸€ç§å…·ä½“çš„çŸ¢é‡æ•°æ®æ ¼å¼ï¼ŒGDALéƒ½ä¼šå°†å…¶æŠ½è±¡æˆæ•°æ®é›†å¯¹è±¡ï¼ˆDatasetï¼‰ï¼Œä»è€Œå¯ä»¥æ”¯æŒè¯»å–ã€å†™å‡ºå’Œå¤„ç†æ“ä½œã€‚å¸¸ç”¨çš„çŸ¢é‡æ•°æ®æ ¼å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>DXF/DWGï¼šåº”ç”¨æœ€å¹¿æ³›çš„å‡ ä½•å›¾å½¢æ•°æ®æ ¼å¼ï¼Œåœ¨CADé¢†åŸŸå†…ç”¨çš„éå¸¸å¤šï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯ç¼ºå°‘åœ°ç†ä¿¡æ¯ã€‚</li>
<li>ESRI Shapefileï¼šGISä¸­æœ€å¸¸è§çš„çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå‡ ä¹æ‰€æœ‰çš„å•†ä¸šå’Œå¼€æºGISè½¯ä»¶éƒ½æ”¯æŒã€‚é™¤äº†å‡ ä½•ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜åŒ…å«ç©ºé—´ä¿¡æ¯å’Œå±æ€§ä¿¡æ¯ã€‚</li>
<li>GeoJSONï¼šä¸€ç§é€šè¿‡JSONæ¥è¡¨è¿°è¦ç´ çš„çŸ¢é‡æ•°æ®æ ¼å¼ï¼Œå› è€Œå¾ˆå®¹æ˜“è¢«JavaScriptè§£æå’Œå¤„ç†ï¼Œé€‚ç”¨äºWebç«¯çš„è½»é‡åŒ–åº”ç”¨ã€‚</li>
<li>KMLï¼šGoogleæå‡ºçš„ä¸€ç§åŸºäºXMLæ ‡å‡†æ¥æè¿°åœ°ç†ç©ºé—´ä¿¡æ¯çš„æ•°æ®æ ¼å¼ï¼ˆåŒ…æ‹¬ç‚¹ã€çº¿ã€é¢ã€å¤šè¾¹å½¢å’Œæ¨¡å‹ç­‰ï¼‰ï¼Œå¹¶ä¸”å·²ç»è¢«OGCè®¤å®šä¸ºå¼€æ”¾åœ°ç†ä¿¡æ¯ç¼–ç æ ‡å‡†ã€‚</li>
</ul>
<p>åœ¨GDALä¸­ï¼Œå¯¹æ•°æ®æ ¼å¼çš„æ”¯æŒè¢«å°è£…æˆé©±åŠ¨ï¼ˆdirverï¼‰ï¼ŒåŒ…æ‹¬ä¸Šè¿°æ ¼å¼åœ¨å†…çš„æ•°æ®é©±åŠ¨è¦ä¹ˆå†…åµŒåœ¨GDALä¸­ï¼Œè¦ä¹ˆé€šè¿‡å¦å¤–çš„ç¬¬ä¸‰æ–¹åº“æ¥æ”¯æŒã€‚å½“ç„¶è¿™äº›æˆ‘ä»¬å¯ä»¥æš‚æ—¶ä¸ç”¨å…³å¿ƒï¼Œç›´æ¥ä½¿ç”¨æœ¬ä¹¦Githubä¸»é¡µä»£ç ä»“åº“ä¸­çš„GDALå³å¯ã€‚</p>
<h3 data-id="heading-2">4.4.2 çŸ¢é‡æ•°æ®çš„è¯»å–ã€å¤„ç†å’Œå†™å…¥</h3>
<p>äº†è§£äº†ç¬¬ä¸‰æ–¹åº“OGR/GDALï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡å…¶å®ç°å…³äºGISçŸ¢é‡æ•°æ®çš„åŸºç¡€å¼€å‘ã€‚ä¸€ä¸ªå¾ˆå®¹æ˜“ç†è§£çš„å¸¸è¯†æ˜¯ï¼ŒåŒ…å«GISçŸ¢é‡æ•°æ®åœ¨å†…çš„ä»»ä½•æ•°æ®çš„æ“ä½œéƒ½ç¦»ä¸å¼€ä¸‰ä¸ªè¿‡ç¨‹ï¼šè¯»å–ã€å¤„ç†å’Œå†™å…¥ã€‚å› æ­¤ï¼Œè¿™é‡Œæˆ‘ä»¬ç»“åˆå‰é¢ç©ºé—´åæ ‡å‚è€ƒè½¬æ¢çš„å®è·µï¼Œå®ç°ä¸€ä¸ªç®€å•çš„å®ä¾‹ï¼šè¯»å–ä¸€ä¸ªé¢çš„çŸ¢é‡ï¼Œç„¶åå¯¹å…¶è¿›è¡Œç©ºé—´å‚è€ƒçš„è½¬æ¢ï¼Œæœ€åé‡æ–°å†™å‡ºä¸€ä¸ªçŸ¢é‡ã€‚å…·ä½“çš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ogrsf_frmts.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Eigen/Eigen&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-keyword">using</span> Point = Vector3d;
<span class="hljs-keyword">using</span> Line = vector&lt;Point&gt;;
<span class="hljs-keyword">using</span> Polygon = vector&lt;Line&gt;;

vector&lt;Polygon&gt; polygonData;

OGRSpatialReference srcFileSpatialReference;
OGRSpatialReference dstFileSpatialReference;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OgrRing2Line</span><span class="hljs-params">(OGRLinearRing *ogrLinearRing, Line &amp;line)</span> </span>{
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; ogrLinearRing-&gt;<span class="hljs-built_in">getNumPoints</span>(); i++) {
    line.<span class="hljs-built_in">emplace_back</span>(ogrLinearRing-&gt;<span class="hljs-built_in">getX</span>(i), ogrLinearRing-&gt;<span class="hljs-built_in">getY</span>(i),
                      ogrLinearRing-&gt;<span class="hljs-built_in">getZ</span>(i));
  }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">OgrPolygon2Polygon</span><span class="hljs-params">(OGRPolygon *ogrPolygon, Polygon &amp;polygon)</span> </span>{
  <span class="hljs-comment">//å¤–ç¯</span>
  Line line;
  <span class="hljs-built_in">OgrRing2Line</span>(ogrPolygon-&gt;<span class="hljs-built_in">getExteriorRing</span>(), line);
  polygon.<span class="hljs-built_in">push_back</span>(line);

  <span class="hljs-comment">//å†…ç¯</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> ri = <span class="hljs-number">0</span>; ri &lt; ogrPolygon-&gt;<span class="hljs-built_in">getNumInteriorRings</span>(); ri++) {
    Line line;
    <span class="hljs-built_in">OgrRing2Line</span>(ogrPolygon-&gt;<span class="hljs-built_in">getInteriorRing</span>(ri), line);
    polygon.<span class="hljs-built_in">push_back</span>(line);
  }
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">ReadShp</span><span class="hljs-params">()</span> </span>{
  string srcFile = <span class="hljs-built_in">getenv</span>(<span class="hljs-string">"GISBasic"</span>);
  srcFile = srcFile + <span class="hljs-string">"/../Data/Vector/multipolygons.shp"</span>;

  GDALDataset *poDS = (GDALDataset *)<span class="hljs-built_in">GDALOpenEx</span>(srcFile.<span class="hljs-built_in">c_str</span>(), GDAL_OF_VECTOR,
                                                <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);
  <span class="hljs-keyword">if</span> (!poDS) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ— æ³•è¯»å–è¯¥æ–‡ä»¶ï¼Œè¯·æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (poDS-&gt;<span class="hljs-built_in">GetLayerCount</span>() &lt; <span class="hljs-number">1</span>) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¯¥æ–‡ä»¶çš„å±‚æ•°å°äº1ï¼Œè¯·æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">//åŸå§‹æ•°æ®ç©ºé—´å‚è€ƒ</span>
  <span class="hljs-type">char</span> *pszWKT = <span class="hljs-literal">nullptr</span>;
  poDS-&gt;<span class="hljs-built_in">GetLayer</span>(<span class="hljs-number">0</span>)-&gt;<span class="hljs-built_in">GetSpatialRef</span>()-&gt;<span class="hljs-built_in">exportToWkt</span>(&amp;pszWKT);
  srcFileSpatialReference.<span class="hljs-built_in">importFromWkt</span>(pszWKT);
  <span class="hljs-built_in">CPLFree</span>(pszWKT);
  pszWKT = <span class="hljs-literal">nullptr</span>;

  <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> li = <span class="hljs-number">0</span>; li &lt; poDS-&gt;<span class="hljs-built_in">GetLayerCount</span>(); li++) {
    OGRLayer *poLayer = poDS-&gt;<span class="hljs-built_in">GetLayer</span>(li);  <span class="hljs-comment">//è¯»å–å±‚</span>
    poLayer-&gt;<span class="hljs-built_in">ResetReading</span>();

    <span class="hljs-comment">//è¾“å‡ºå­—æ®µå</span>
    OGRFeatureDefn *poFDefn = poLayer-&gt;<span class="hljs-built_in">GetLayerDefn</span>();
    <span class="hljs-type">int</span> n = poFDefn-&gt;<span class="hljs-built_in">GetFieldCount</span>();
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> iField = <span class="hljs-number">0</span>; iField &lt; n; iField++) {
      OGRFieldDefn *OGRFieldDefn = poFDefn-&gt;<span class="hljs-built_in">GetFieldDefn</span>(iField);
      cout &lt;&lt; OGRFieldDefn-&gt;<span class="hljs-built_in">GetNameRef</span>() &lt;&lt; endl;
    }

    <span class="hljs-comment">//éå†ç‰¹å¾</span>
    OGRFeature *poFeature = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">while</span> ((poFeature = poLayer-&gt;<span class="hljs-built_in">GetNextFeature</span>()) != <span class="hljs-literal">nullptr</span>) {
      OGRGeometry *geometry = poFeature-&gt;<span class="hljs-built_in">GetGeometryRef</span>();
      OGRwkbGeometryType geometryType = geometry-&gt;<span class="hljs-built_in">getGeometryType</span>();

      <span class="hljs-keyword">switch</span> (geometryType) {
        <span class="hljs-keyword">case</span> wkbPolygon:
        <span class="hljs-keyword">case</span> wkbPolygonM:
        <span class="hljs-keyword">case</span> wkbPolygonZM: {
          OGRPolygon *ogrPolygon = <span class="hljs-built_in">dynamic_cast</span>&lt;OGRPolygon *&gt;(geometry);
          <span class="hljs-keyword">if</span> (!ogrPolygon) {
            <span class="hljs-keyword">continue</span>;
          }

          Polygon polygon;
          <span class="hljs-built_in">OgrPolygon2Polygon</span>(ogrPolygon, polygon);
          polygonData.<span class="hljs-built_in">push_back</span>(polygon);

          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">case</span> wkbMultiPolygon:
        <span class="hljs-keyword">case</span> wkbMultiPolygonM:
        <span class="hljs-keyword">case</span> wkbMultiPolygonZM: {
          OGRMultiPolygon *ogrMultiPolygon =
              <span class="hljs-built_in">dynamic_cast</span>&lt;OGRMultiPolygon *&gt;(geometry);
          <span class="hljs-keyword">if</span> (!ogrMultiPolygon) {
            <span class="hljs-keyword">continue</span>;
          }

          <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> gi = <span class="hljs-number">0</span>; gi &lt; ogrMultiPolygon-&gt;<span class="hljs-built_in">getNumGeometries</span>(); gi++) {
            OGRPolygon *ogrPolygon =
                <span class="hljs-built_in">dynamic_cast</span>&lt;OGRPolygon *&gt;(ogrMultiPolygon-&gt;<span class="hljs-built_in">getGeometryRef</span>(gi));
            <span class="hljs-keyword">if</span> (!ogrPolygon) {
              <span class="hljs-keyword">continue</span>;
            }

            Polygon polygon;
            <span class="hljs-built_in">OgrPolygon2Polygon</span>(ogrPolygon, polygon);
            polygonData.<span class="hljs-built_in">push_back</span>(polygon);
          }

          <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">default</span>: {
          <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœªå¤„ç†çš„ç‰¹å¾ç±»å‹\n"</span>);
          <span class="hljs-keyword">break</span>;
        }
      }

      <span class="hljs-comment">//è¾“å‡ºæ¯ä¸ªå­—æ®µçš„å€¼</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> iField = <span class="hljs-number">0</span>; iField &lt; n; iField++) {
        cout &lt;&lt; poFeature-&gt;<span class="hljs-built_in">GetFieldAsString</span>(iField) &lt;&lt; <span class="hljs-string">"    "</span>;
      }
      cout &lt;&lt; endl;

      OGRFeature::<span class="hljs-built_in">DestroyFeature</span>(poFeature);
    }
  }

  <span class="hljs-built_in">GDALClose</span>(poDS);
  poDS = <span class="hljs-literal">nullptr</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Convert</span><span class="hljs-params">()</span> </span>{
  dstFileSpatialReference.<span class="hljs-built_in">importFromEPSG</span>(<span class="hljs-number">3857</span>);
  dstFileSpatialReference.<span class="hljs-built_in">SetAxisMappingStrategy</span>(OAMS_TRADITIONAL_GIS_ORDER);
  srcFileSpatialReference.<span class="hljs-built_in">SetAxisMappingStrategy</span>(OAMS_TRADITIONAL_GIS_ORDER);

  OGRCoordinateTransformation *src2DstTransformation =
      <span class="hljs-built_in">OGRCreateCoordinateTransformation</span>(&amp;srcFileSpatialReference,
                                        &amp;dstFileSpatialReference);

  <span class="hljs-keyword">if</span> (!src2DstTransformation) {
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;polygon : polygonData) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;line : polygon) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> &amp;point : line) {
        src2DstTransformation-&gt;<span class="hljs-built_in">Transform</span>(<span class="hljs-number">1</span>, point.<span class="hljs-built_in">data</span>(), point.<span class="hljs-built_in">data</span>() + <span class="hljs-number">1</span>,
                                         point.<span class="hljs-built_in">data</span>() + <span class="hljs-number">2</span>);
      }
    }
  }
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">CreateField</span><span class="hljs-params">(OGRLayer *poLayer)</span> </span>{
  <span class="hljs-comment">// å­—ç¬¦ä¸²</span>
  <span class="hljs-function">OGRFieldDefn <span class="hljs-title">oField1</span><span class="hljs-params">(<span class="hljs-string">"Type"</span>, OFTString)</span></span>;
  oField1.<span class="hljs-built_in">SetWidth</span>(<span class="hljs-number">8</span>);
  <span class="hljs-keyword">if</span> (poLayer-&gt;<span class="hljs-built_in">CreateField</span>(&amp;oField1) != OGRERR_NONE) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Creating Name field failed.\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// æµ®ç‚¹æ•°</span>
  <span class="hljs-function">OGRFieldDefn <span class="hljs-title">oField2</span><span class="hljs-params">(<span class="hljs-string">"Area"</span>, OFTReal)</span></span>;
  oField2.<span class="hljs-built_in">SetPrecision</span>(<span class="hljs-number">3</span>);
  <span class="hljs-keyword">if</span> (poLayer-&gt;<span class="hljs-built_in">CreateField</span>(&amp;oField2) != OGRERR_NONE) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Creating Name field failed.\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// æ•´å‹</span>
  <span class="hljs-function">OGRFieldDefn <span class="hljs-title">oField3</span><span class="hljs-params">(<span class="hljs-string">"VertexCount"</span>, OFTInteger)</span></span>;
  <span class="hljs-keyword">if</span> (poLayer-&gt;<span class="hljs-built_in">CreateField</span>(&amp;oField3) != OGRERR_NONE) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Creating Name field failed.\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">WriteGeoJson</span><span class="hljs-params">()</span> </span>{
  string dstFile = <span class="hljs-built_in">getenv</span>(<span class="hljs-string">"GISBasic"</span>);
  dstFile = dstFile + <span class="hljs-string">"/../Data/Out.geoJson"</span>;

  <span class="hljs-comment">//åˆ›å»º</span>
  GDALDriver *driver = <span class="hljs-built_in">GetGDALDriverManager</span>()-&gt;<span class="hljs-built_in">GetDriverByName</span>(<span class="hljs-string">"GeoJSON"</span>);
  <span class="hljs-keyword">if</span> (!driver) {
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Get Driver GeoJSON Errorï¼\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  GDALDataset *dataset =
      driver-&gt;<span class="hljs-built_in">Create</span>(dstFile.<span class="hljs-built_in">c_str</span>(), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, GDT_Unknown, <span class="hljs-literal">NULL</span>);
  OGRLayer *poLayer = dataset-&gt;<span class="hljs-built_in">CreateLayer</span>(
      <span class="hljs-string">"FirstLayer"</span>, &amp;dstFileSpatialReference, wkbPolygon, <span class="hljs-literal">NULL</span>);

  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">CreateField</span>(poLayer)) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">//åˆ›å»ºç‰¹å¾</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;polygon : polygonData) {
    <span class="hljs-function">OGRFeature <span class="hljs-title">ogrFeature</span><span class="hljs-params">(poLayer-&gt;GetLayerDefn())</span></span>;

    OGRPolygon ogrPolygon;

    <span class="hljs-type">int</span> vertexNum = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;line : polygon) {
      OGRLinearRing ogrRing;
      <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> &amp;point : line) {
        ogrRing.<span class="hljs-built_in">addPoint</span>(point.<span class="hljs-built_in">x</span>(), point.<span class="hljs-built_in">y</span>(), point.<span class="hljs-built_in">z</span>());
        vertexNum++;
      }
      ogrPolygon.<span class="hljs-built_in">addRing</span>(&amp;ogrRing);
    }
    ogrFeature.<span class="hljs-built_in">SetGeometry</span>(&amp;ogrPolygon);

    ogrFeature.<span class="hljs-built_in">SetField</span>(<span class="hljs-string">"Type"</span>, <span class="hljs-string">"Polygon"</span>);
    ogrFeature.<span class="hljs-built_in">SetField</span>(<span class="hljs-string">"Area"</span>, ogrPolygon.<span class="hljs-built_in">get_Area</span>());
    ogrFeature.<span class="hljs-built_in">SetField</span>(<span class="hljs-string">"VertexCount"</span>, vertexNum);

    <span class="hljs-keyword">if</span> (poLayer-&gt;<span class="hljs-built_in">CreateFeature</span>(&amp;ogrFeature) != OGRERR_NONE) {
      <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Failed to create feature.\n"</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">//é‡Šæ”¾</span>
  <span class="hljs-built_in">GDALClose</span>(dataset);
  dataset = <span class="hljs-literal">nullptr</span>;

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">GDALAllRegister</span>();
  <span class="hljs-built_in">CPLSetConfigOption</span>(<span class="hljs-string">"GDAL_FILENAME_IS_UTF8"</span>, <span class="hljs-string">"NO"</span>);  <span class="hljs-comment">//æ”¯æŒä¸­æ–‡è·¯å¾„</span>
  <span class="hljs-built_in">CPLSetConfigOption</span>(<span class="hljs-string">"SHAPE_ENCODING"</span>, <span class="hljs-string">""</span>);           <span class="hljs-comment">//è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜</span>

  <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">ReadShp</span>()) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
  }

  <span class="hljs-built_in">Convert</span>();

  <span class="hljs-built_in">WriteGeoJson</span>();
}
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œè¯»å–çš„çŸ¢é‡æ˜¯ä¸€ä¸ªShapefileæ–‡ä»¶ï¼ŒåŒ…å«çš„éƒ½æ˜¯å¤šè¾¹å½¢çš„è¦ç´ ï¼Œç©ºé—´å‚è€ƒä¸ºWGS84åœ°ç†åæ ‡ç³»ï¼ˆEPSGï¼š4326ï¼‰ï¼Œæ˜¾ç¤ºå¦‚ä¸‹å›¾4.14æ‰€ç¤ºï¼š</p>
<p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/b466a0c5023f46aa914630bb3b73c314~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhcmxlZTQ0:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTExNzU0OTc3MDg0Njg3MiJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1768395215&amp;x-orig-sign=N6NGMOI6vPhpdOFpBoPYl4km8Fg%3D" alt="å›¾4.14 å¤„ç†å‰å¤šè¾¹å½¢çŸ¢é‡è¦ç´ " loading="lazy"/></p>
<p>ç»è¿‡ç©ºé—´å‚è€ƒè½¬æ¢åï¼Œç©ºé—´å‚è€ƒä¸ºWebå¢¨å¡æ‰˜æŠ•å½±åæ ‡ç³»ï¼ˆEPSGï¼š3857ï¼‰ï¼Œä¸”ç”Ÿæˆçš„æ˜¯ä¸€ä¸ªGeoJsonæ–‡ä»¶ã€‚å¦‚ä¸‹å›¾4.15æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°åœ¨ç©ºé—´åæ ‡å‚è€ƒè½¬æ¢ä¹‹åå½¢çŠ¶ä¼¼ä¹â€œå˜çª„â€äº†ä¸€ç‚¹ï¼Œè¿™æ˜¯åœ°å›¾æŠ•å½±å˜æ¢çš„ç‰¹æ€§å†³å®šçš„ï¼ˆå‚è€ƒç¬¬2ç« ä»‹ç»çš„çŸ¥è¯†ï¼‰ã€‚</p>
<p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/4a9f9a76ce4e4044928a7863c7f56a0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhcmxlZTQ0:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTExNzU0OTc3MDg0Njg3MiJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1768395216&amp;x-orig-sign=TREVPk47WE74OR7yh6Jv6M1HilU%3D" alt="å›¾4.15 å¤„ç†åå¤šè¾¹å½¢çŸ¢é‡è¦ç´ " loading="lazy"/></p>
<p>è¿™æ®µä»£ç çš„å…³é”®åœ¨äºå¦‚ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>
<p>è¯»å–çŸ¢é‡æ—¶ï¼ŒçŸ¢é‡æ•°æ®è¢«è¯»å–æˆæ•°æ®é›†å¯¹è±¡GDALDatasetï¼ŒGDALDatasetç®¡ç†å›¾å±‚å¯¹è±¡OGRLayerï¼ŒOGRLayerç®¡ç†ç‰¹å¾ç±»å¯¹è±¡OGRFeatureï¼ŒOGRFeatureåˆ™åŒ…å«å‡ ä½•å¯¹è±¡ç±»OGRGeometryã€‚OGRGeometryæ˜¯ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œæœ‰æ„ä¹‰çš„æ˜¯å…¶è¡¨è¾¾å…·ä½“çš„å‡ ä½•å¯¹è±¡çš„å­ç±»ï¼Œæ¯”å¦‚OGRPolygonä»£è¡¨å¤šè¾¹å½¢å‡ ä½•å¯¹è±¡ã€‚OGRPolygonåˆæ˜¯ç”±1ä¸ªå¤–ç¯å’Œå¤šä¸ªå†…ç¯ï¼ˆç¯çº¿ï¼šOGRLinearRingï¼‰ç»„æˆã€‚çŸ¢é‡å°±æ˜¯è¿™æ ·ä¸€å±‚å±‚æŠ½è±¡ç»„åˆè¡¨è¾¾å‡ºæ¥çš„ã€‚</p>
</li>
<li>
<p>åœ¨è¿›è¡Œæ•°æ®å¤„ç†ä¹Ÿå°±æ˜¯ç©ºé—´å‚è€ƒè½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬æŠŠè¯»å–çš„æ•°æ®æ”¾åˆ°æˆ‘ä»¬è‡ªå·±çš„æ•°æ®å®¹å™¨ä¸­ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">using</span> Point = Vector3d;
<span class="hljs-keyword">using</span> Line = vector&lt;Point&gt;;
<span class="hljs-keyword">using</span> Polygon = vector&lt;Line&gt;;

vector&lt;Polygon&gt; polygonData;
</code></pre>
<p>çœŸå®çš„GISæ•°æ®å¤„ç†å¼€å‘è¦æ±‚æ˜¯åƒå˜ä¸‡åŒ–çš„ï¼Œæ“ä½œçš„å¾€å¾€ä¸æ˜¯è¯»å–ç»„ä»¶ï¼ˆè¿™é‡ŒæŒ‡OGRï¼‰å®šä¹‰çš„æ•°æ®ç»“æ„å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥å°†å…¶è¯»å–åœ¨æˆè‡ªå®šä¹‰çš„æ•°æ®ç»“æ„ä¸­ï¼Œä»¥æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ›´åŠ é€šç”¨çš„æ“ä½œï¼Œæˆ–è€…è¿›è¡Œå¹¶è¡Œä¼˜åŒ–ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éå†äº†è‡ªå®šä¹‰çš„æ•°æ®ç»“æ„å¯¹è±¡ä¸­çš„é¡¶ç‚¹ï¼Œé€ç‚¹è¿›è¡Œç©ºé—´åæ ‡å‚è€ƒçš„è½¬æ¢ã€‚è¿›è¡Œå…¶ä»–çš„æ•°æ®å¤„ç†ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦æ“ä½œè‡ªå·±çš„æ•°æ®ç»“æ„å®¹å™¨ã€‚</p>
</li>
<li>
<p>å†™å‡ºçŸ¢é‡æ—¶ï¼Œå°†å¤„ç†ç»“æŸçš„è‡ªå®šä¹‰æ•°æ®ç»“æ„å¯¹è±¡æ¢å¤æˆæ•°æ®é›†å¯¹è±¡GDALDatasetï¼ˆè¯»å–çŸ¢é‡çš„é€†æ“ä½œï¼‰ã€‚å¦å¤–ï¼Œéœ€è¦å…³æ³¨çš„æ˜¯GDALçš„æ•°æ®é©±åŠ¨GDALDriverï¼Œå…¶æ˜¯é€šè¿‡åç§°æ¥åˆ›å»ºå¯¹åº”æ ¼å¼çš„çŸ¢é‡æ–‡ä»¶ï¼Œä¾‹å¦‚è¿™é‡Œä¼ å…¥åˆ°åç§°æ˜¯GeoJson:</p>
<pre><code class="hljs language-cpp" lang="cpp">GDALDriver *driver = <span class="hljs-built_in">GetGDALDriverManager</span>()-&gt;<span class="hljs-built_in">GetDriverByName</span>(<span class="hljs-string">"GeoJSON"</span>);
<span class="hljs-keyword">if</span> (!driver) {
  <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Get Driver GeoJSON Errorï¼\n"</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
</li>
<li>
<p>çŸ¢é‡æ•°æ®çš„å±æ€§è¡¨æ•°æ®ä¸æ•°æ®åº“ä¸­çš„è¡¨ç»“æ„æ¯”è¾ƒç±»ä¼¼ï¼Œæ¯ä¸ªå­—æ®µå…·æœ‰è‡ªå·±çš„å®šä¹‰å±æ€§ï¼Œä¾‹å¦‚æ•°æ®ç±»å‹ã€é•¿åº¦ã€ç²¾åº¦ç­‰ã€‚å¹¶ä¸”ï¼Œæ¯ä¸€ä¸ªç‰¹å¾éƒ½å¯¹åº”äº†ä¸€è¡Œè®°å½•ã€‚å› è€Œå±æ€§è¡¨çš„æ“ä½œè¿˜æ˜¯æŒºå¤æ‚çš„ï¼Œå¾€å¾€ä¸ä¸šåŠ¡æ“ä½œç›¸å…³è”ã€‚è¿™é‡Œä»…ä»…åªæ˜¯è¾“å‡ºæ˜¾ç¤ºäº†è¯»å–çš„å±æ€§è¡¨ä¿¡æ¯ï¼Œå†™å…¥äº†è‡ªå·±åˆ›å»ºçš„å­—æ®µä¸å€¼ã€‚è¯»å–å’Œå†™å…¥çš„å±æ€§è¡¨æ•°æ®å¦‚ä¸‹å›¾4.16ã€å›¾4.17æ‰€ç¤ºï¼š</p>
</li>
</ul>
<p><img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/6c09b2ead64f422e90cf80b0d2a5ceb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhcmxlZTQ0:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTExNzU0OTc3MDg0Njg3MiJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1768395215&amp;x-orig-sign=2teQ4WIO4aIO%2FM3lEsjhoZQQ5c8%3D" alt="å›¾4.16 è¯»å–çš„å±æ€§è¡¨ä¿¡æ¯" loading="lazy"/>
<img src="https://p0-xtjj-private.juejin.cn/tos-cn-i-73owjymdk6/8b72e8e3819644b9aa45d81d485eada0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY2hhcmxlZTQ0:q75.awebp?policy=eyJ2bSI6MywidWlkIjoiMTExNzU0OTc3MDg0Njg3MiJ9&amp;rk3s=e9ecf3d6&amp;x-orig-authkey=f32326d3454f2ac7e96d3d06cdbb035152127018&amp;x-orig-expires=1768395215&amp;x-orig-sign=DbRNzUdoGH%2FX8Kl11LzrJ3PzyDk%3D" alt="å›¾4.17 å†™å…¥çš„å±æ€§è¡¨ä¿¡æ¯" loading="lazy"/></p>
<h3 data-id="heading-3">4.4.3 ç©ºé—´æ‹“æ‰‘å…³ç³»çš„åˆ¤æ–­</h3>
<p>å¯¹çŸ¢é‡è¦ç´ è¿›è¡Œç©ºé—´æ‹“æ‰‘å…³ç³»çš„åˆ¤æ–­ä¹Ÿæ˜¯GISå¼€å‘ä¸­å¸¸ç”¨çš„åŠŸèƒ½ã€‚åœ¨4.3.3èŠ‚ä¸­ä»‹ç»äº†OGCçš„Simple Featureæ ‡å‡†è§„èŒƒä¸­æ‹“æ‰‘å…³ç³»ï¼ŒOGR/GDALå¯¹å…¶åšäº†å…·ä½“çš„å®ç°ã€‚ä»»ä½•ç»§æ‰¿äº†OGRGeometryçš„å‡ ä½•å¯¹è±¡ç±»ï¼ˆå¦‚OGRPointã€OGRPolygonï¼‰éƒ½å¯ä»¥è°ƒç”¨æ ‡å‡†ä¸­å®šä¹‰çš„æ¥å£ï¼ˆäºŒå…ƒè°“è¯ï¼‰ï¼Œåˆ¤æ–­è¯¥å‡ ä½•å¯¹è±¡ä¸å¦å¤–ä¸€ä¸ªå‡ ä½•å¯¹è±¡çš„æ‹“æ‰‘å…³ç³»ã€‚åœ¨å¦‚ä¸‹å®ä¾‹ä¸­ï¼Œåˆ¤æ–­äº†ç©ºé—´ä¸­æŸç‚¹ä¸æŸå¤šè¾¹å½¢æ˜¯å¦å­˜åœ¨åŒ…å«ï¼ˆContainsï¼‰å…³ç³»ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;ogrsf_frmts.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  OGRLinearRing linearRing;
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">268.28</span>, <span class="hljs-number">784.75</span>);
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">153.98</span>, <span class="hljs-number">600.60</span>);
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">274.63</span>, <span class="hljs-number">336.02</span>);
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">623.88</span>, <span class="hljs-number">401.64</span>);
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">676.80</span>, <span class="hljs-number">634.47</span>);
  linearRing.<span class="hljs-built_in">addPoint</span>(<span class="hljs-number">530.75</span>, <span class="hljs-number">822.85</span>);
  linearRing.<span class="hljs-built_in">closeRings</span>();

  OGRPolygon polygon;
  polygon.<span class="hljs-built_in">addRing</span>(&amp;linearRing);

  cout &lt;&lt; <span class="hljs-string">"ç‚¹Aæ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼š"</span>;
  <span class="hljs-function">OGRPoint <span class="hljs-title">pointA</span><span class="hljs-params">(<span class="hljs-number">407.98</span>, <span class="hljs-number">579.43</span>)</span></span>;  
  cout &lt;&lt; polygon.<span class="hljs-built_in">Contains</span>(&amp;pointA) &lt;&lt; endl;

  cout &lt;&lt; <span class="hljs-string">"ç‚¹Bæ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼š"</span>;
  <span class="hljs-function">OGRPoint <span class="hljs-title">pointB</span><span class="hljs-params">(<span class="hljs-number">678.92</span>, <span class="hljs-number">482.07</span>)</span></span>;  
  cout &lt;&lt; polygon.<span class="hljs-built_in">Contains</span>(&amp;pointB) &lt;&lt; endl;
}
</code></pre>
<p>è¿è¡Œçš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-text" lang="text">ç‚¹Aæ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼š1
ç‚¹Bæ˜¯å¦åœ¨å¤šè¾¹å½¢å†…ï¼š0
</code></pre>
<p>åœ¨4.3.3èŠ‚ä¸­ä»‹ç»è¿‡ï¼ŒåŒ…å«(Contains)ä¸å†…å«(Within)æ˜¯ä¸€å¯¹ç›¸åçš„å…³ç³»ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥è°ƒç”¨OGRPointçš„å†…å«(Within)æ¥å£ï¼Œä¼šè¿”å›ä¸ä¸Šè¿°åŒæ ·çš„ç»“æœã€‚ä¸æ­¢å¦‚æ­¤ï¼Œå…¶ä»–ç©ºé—´æ‹“æ‰‘å…³ç³»çš„æ¥å£ä¹Ÿæ˜¯è¿™æ ·è°ƒç”¨ï¼Œè¯»è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚å°è¯•ä¸€äºŒï¼Œè¿™é‡Œåªæ˜¯æŠ›ç –å¼•ç‰ã€‚</p>
<hr/>
<p>æœ¬æ–‡èŠ‚é€‰è‡ªä½œè€…æ–°ä¹¦ã€ŠGISåŸºç¡€åŸç†ä¸æŠ€æœ¯å®è·µã€‹ç¬¬4ç« ã€‚ä¹¦ä¸­ç³»ç»Ÿè®²è§£ GIS æ ¸å¿ƒç†è®ºä¸å¤šè¯­è¨€å®æˆ˜ï¼Œé€‚åˆå¼€å‘è€…ä¸é«˜æ ¡å¸ˆç”Ÿã€‚</p>
<p>ğŸ“š <strong>é…å¥—èµ„æºå¼€æº</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffafa1899%2FGISBasic" target="_blank" title="https://github.com/fafa1899/GISBasic" ref="nofollow noopener noreferrer">GitHub</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitcode.com%2Fcharlee44%2FGISBasic" target="_blank" title="https://gitcode.com/charlee44/GISBasic" ref="nofollow noopener noreferrer">GitCode</a></p>
<p>ğŸ›’ <strong>æ”¯æŒæ­£ç‰ˆ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fitem.jd.com%2F14603137.html" target="_blank" title="https://item.jd.com/14603137.html" ref="nofollow noopener noreferrer">äº¬ä¸œ</a>ï½œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fproduct.dangdang.com%2F29988568.html" target="_blank" title="https://product.dangdang.com/29988568.html" ref="nofollow noopener noreferrer">å½“å½“</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰â€”â€”ä¸ºä»€ä¹ˆè¦å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594655863548297268</link>    <guid>https://juejin.cn/post/7594655863548297268</guid>    <pubDate>2026-01-13T12:48:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594655863548297268" data-draft-id="7592094314471866403" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰â€”â€”ä¸ºä»€ä¹ˆè¦å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,DeepSeek,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-13T12:48:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—ï¼ˆä¸€ï¼‰â€”â€”ä¸ºä»€ä¹ˆè¦å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:48:09.000Z" title="Tue Jan 13 2026 12:48:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2025å¹´ï¼Œå¤§æ¨¡å‹æŠ€æœ¯è¿ˆå…¥äº†é£é€Ÿå‘å±•çš„æ–°é˜¶æ®µã€‚è‡ªä»DeepSeek-R1å¼•å…¥å¼ºåŒ–å­¦ä¹ æ–¹æ³•ä»¥æ¥ï¼Œæ¨¡å‹çš„èƒ½åŠ›å¾—åˆ°äº†ç³»ç»Ÿæ€§æå‡ï¼Œæ•´ä¸ªé¢†åŸŸçš„å‘å±•å®›å¦‚â€œæ‰“é€šä»»ç£äºŒè„‰â€ï¼Œè¿›å…¥äº†å‰æ‰€æœªæœ‰çš„å¿«è½¦é“ã€‚æ— è®ºæ˜¯å›½å¤–é—­æºæ¨¡å‹â€”â€”å¦‚OpenAIçš„<a href="https://juejin.cn/post/7572010680897257512" target="_blank" title="https://juejin.cn/post/7572010680897257512">GPTç³»åˆ—</a>ã€Anthropicçš„<a href="https://juejin.cn/post/7507554645227536411" target="_blank" title="https://juejin.cn/post/7507554645227536411">Claudeç³»åˆ—</a>ã€è°·æ­Œçš„<a href="https://juejin.cn/post/7574615024293429274" target="_blank" title="https://juejin.cn/post/7574615024293429274">Geminiç³»åˆ—</a>ï¼Œè¿˜æ˜¯å›½å†…å¼€æºé˜µè¥çš„<a href="https://juejin.cn/post/7579849892613373988" target="_blank" title="https://juejin.cn/post/7579849892613373988">DeepSeek</a>ã€<a href="https://juejin.cn/post/7530202220802359331" target="_blank" title="https://juejin.cn/post/7530202220802359331">Qwen</a>ç­‰ç³»åˆ—ï¼Œéƒ½åœ¨ä»Šå¹´å®ç°äº†å¯†é›†çš„ç‰ˆæœ¬è¿­ä»£ä¸èƒ½åŠ›çªç ´ã€‚</p>
<p>å¾ˆéš¾æƒ³è±¡ç°åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œå¤§å®¶ä¸æ˜¯æ‰“å¼€è±†åŒ…æˆ–è€…DeepSeekæ¥é—®ä¸Šä¸€é—®ï¼Ÿå¤§æ¨¡å‹æ­£ä»¥å‰æ‰€æœªæœ‰çš„æ·±åº¦èå…¥æˆ‘ä»¬çš„å·¥ä½œä¸ç”Ÿæ´»ã€‚ç„¶è€Œèº«ä¸ºæŠ€æœ¯äººï¼Œå¤§å®¶æ˜¯å¦æƒ³è¿‡ï¼šè¿™äº›æ¨¡å‹ç©¶ç«Ÿæ˜¯å¦‚ä½•è¢«è®­ç»ƒå‡ºæ¥çš„ï¼Ÿå¦‚æœæœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½ä»å¤´å¼€å§‹è®­ç»ƒä¸€ä¸ªå±äºè‡ªå·±çš„å¤§æ¨¡å‹ï¼Œåˆä¼šæ˜¯æ€æ ·ä¸€ç§ä½“éªŒï¼Ÿ</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ac84cce0a0b4146bbbfc72abca314b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913792&amp;x-signature=VULkwsKLt3kUP3eaIuTccXCjb9A%3D" alt="1.png" width="70%" loading="lazy"/></p>
<p>é™¤å¤§æ¨¡å‹è®­ç»ƒå¤–ï¼Œç¬”è€…ä¹Ÿåœ¨åŒæ­¥æ›´æ–°<a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>å…è´¹ä¸“æ ï¼Œè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 36 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒï¼Ÿ</h2>
<p>é¢å¯¹åŠŸèƒ½å¼ºå¤§çš„ç°æˆæ¨¡å‹ï¼Œæˆ–è®¸å¤§å®¶ä¼šç–‘æƒ‘ï¼šç›´æ¥è°ƒç”¨APIå°±èƒ½è§£å†³é—®é¢˜ï¼Œä¸ºä½•è¿˜è¦æ·±å…¥äº†è§£å…¶è®­ç»ƒè¿‡ç¨‹ï¼Ÿç¬”è€…ä¸€ç›´è®¤ä¸ºï¼Œç†è§£â€œå¦‚ä½•åˆ¶é€ â€æ¯”å•çº¯â€œå¦‚ä½•ä½¿ç”¨â€æ›´èƒ½è®©ä½ åœ¨AIæµªæ½®ä¸­æŠŠæ¡ä¸»åŠ¨ã€‚å½“å‰ï¼Œå¤§æ¨¡å‹æŠ€æœ¯ä¸»è¦æ²¿ç€<strong>æ¨¡å‹åº”ç”¨</strong>ä¸<strong>æ¨¡å‹è®­ç»ƒ</strong>ä¸¤å¤§è·¯å¾„å‘å±•ã€‚æ¨¡å‹åº”ç”¨çš„æ ¸å¿ƒåœ¨äºæ™ºèƒ½ä½“ï¼ˆAgentï¼‰å¼€å‘ï¼Œé€šè¿‡èµ‹äºˆå¤§æ¨¡å‹å·¥å…·è°ƒç”¨ã€è®°å¿†ã€è§„åˆ’ç­‰èƒ½åŠ›ï¼Œä½¿å…¶èƒ½è‡ªä¸»å®Œæˆå¤æ‚ä»»åŠ¡â€”â€”è¿™æ­£æ˜¯2025å¹´â€œæ™ºèƒ½ä½“å…ƒå¹´â€çš„ç„¦ç‚¹ã€‚ç„¶è€Œï¼Œè¿™ä¸€åˆ‡åº”ç”¨ç”Ÿæ€çš„æ ¹åŸºï¼Œçš†æºäº<strong>æ¨¡å‹è®­ç»ƒ</strong>ã€‚æŒæ¡å¤§æ¨¡å‹è®­ç»ƒçš„çŸ¥è¯†ï¼Œä¸ä»…æ˜¯ç†è§£æŠ€æœ¯æœ¬è´¨çš„é’¥åŒ™ï¼Œæ›´æ˜¯æ„å»ºå·®å¼‚ä¼˜åŠ¿çš„èµ·ç‚¹ã€‚å…·ä½“è€Œè¨€ï¼Œç¬”è€…è®¤ä¸ºå­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒçš„å¿…è¦æ€§ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<h3 data-id="heading-2">1.1 ä¸“ä¸šå¤§æ¨¡å‹ç¼ºå£å·¨å¤§ï¼Œå‚ç±»åº”ç”¨éœ€æ±‚çˆ†å‘</h3>
<p>ä»å¤´é¢„è®­ç»ƒä¸€ä¸ªé€šç”¨å¤§æ¨¡å‹ï¼Œéœ€è¦æ•°åƒäº¿è¯æ±‡ã€ä¸Šç™¾TBçš„é«˜è´¨é‡å¤šé¢†åŸŸæ•°æ®ï¼Œå…¶æˆæœ¬ä¸é—¨æ§›å¯¹æˆ‘ä»¬ä¸ªäººç”šè‡³å¾ˆå¤šä¸­å°ä¼ä¸šæ¥è¯´éƒ½é¥ä¸å¯åŠã€‚ç„¶è€Œï¼Œé€šç”¨å¤§æ¨¡å‹è™½æ˜¯â€œåšå­¦å®¶â€ï¼Œå´ä¸æ˜¯ä¸€ä¸ªé¢†åŸŸä¸“å®¶ï¼Œéš¾ä»¥æ·±å…¥ç‰¹å®šå‚ç›´é¢†åŸŸã€‚è¿™å°±å‚¬ç”Ÿäº†å¤§é‡å¯¹<strong>ä¸“ä¸šåŒ–ã€é¢†åŸŸåŒ–æ¨¡å‹</strong>çš„è¿«åˆ‡éœ€æ±‚ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå“ˆå°”æ»¨å·¥ä¸šå¤§å­¦çš„â€œåä½—â€å¤§æ¨¡å‹ä¸“æ³¨äºåŒ»ç–—è¯Šæ–­ï¼Œä¸œå—å¤§å­¦çš„â€œæ³•è¡¡â€å¤§æ¨¡å‹æ·±è€•æ³•å¾‹æ¡æ–‡ä¸æ¡ˆä¾‹åˆ†æï¼Œä¸­å›½å†œä¸šå¤§å­¦çš„â€œç¥å†œâ€å¤§æ¨¡å‹åˆ™èƒ½è¿›è¡Œå†œä¸šçŸ¥è¯†é—®ç­”ä¸ç”Ÿäº§å†³ç­–æ¨ç†ï¼Œå¹¶å·²æœåŠ¡è¶…åä¸‡ç”¨æˆ·ï¼Œè¢«æˆç§°ä¸ºâ€œå…»çŒªå¤§æ¨¡å‹â€ã€‚æ­¤å¤–ï¼Œå½“å‰å„ç±»æ•°æ®å¤„ç†ã€ä»£ç ç”Ÿæˆç­‰æ™ºèƒ½ä½“ï¼Œå…¶æ ¸å¿ƒä¹Ÿéƒ½æ˜¯é€šè¿‡å¯¹é€šç”¨åŸºåº§æ¨¡å‹è¿›è¡Œé’ˆå¯¹æ€§è®­ç»ƒä¸å¾®è°ƒè€Œæ¥ï¼Œä»¥æå‡å…¶åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„å‡†ç¡®æ€§ä¸å¯é æ€§ã€‚</p>
<p>å› æ­¤ï¼Œå­¦ä¼šå¤§æ¨¡å‹è®­ç»ƒæŠ€æœ¯ï¼Œæ„å‘³ç€å¤§å®¶èƒ½å¤Ÿå°†é€šç”¨èƒ½åŠ›è½¬åŒ–ä¸ºè§£å†³è¡Œä¸šå®é™…é—®é¢˜çš„ä¸“å±æ™ºèƒ½ï¼Œè¿™æ­£æ˜¯æŠ€æœ¯è½åœ°çš„æœ€å‰æ²¿ã€‚</p>
<h3 data-id="heading-3">1.2 å­¦ç”Ÿä¸ç ”ç©¶è€…çš„å¿…å¤‡æŠ€èƒ½ä¸å­¦æœ¯å‰æ²¿</h3>
<p>ç¬”è€…å‡ ä¹ä¸åªä¸€æ¬¡è¢«ä»¥å‰å®éªŒå®¤çš„å°ä¼™ä¼´ä»¬é—®é“ï¼šâ€œåˆ°åº•è¯¥å¦‚ä½•å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒå‘¢ï¼Ÿâ€ï¼Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼Œå¤§æ¨¡å‹ä¸ä»…æ˜¯åº”ç”¨çƒ­ç‚¹ï¼Œæ›´æ˜¯ç†è®ºç ”ç©¶çš„åŸºç¡€ã€‚å¯¹äºç ”ç©¶ç”Ÿå’Œç§‘ç ”äººå‘˜è€Œè¨€ï¼ŒæŒæ¡å¤§æ¨¡å‹è®­ç»ƒå·²æˆä¸ºä¸€é¡¹ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<p>å¤§æ¨¡å‹è®­ç»ƒæŠ€æœ¯çš„å­¦ä¹ ä»·å€¼ä¸ä»…åœ¨äºè®­ç»ƒå‡ºå¯åº”ç”¨çš„æ¨¡å‹ï¼Œæ›´åœ¨äºå¤§æ¨¡å‹å†…éƒ¨æœºç†å°šå­˜å¤§é‡â€œç‚¼é‡‘æœ¯â€èˆ¬çš„å¼€æ”¾é—®é¢˜ï¼Œä¸ºæ¢ç´¢æ™ºèƒ½æœ¬è´¨ï¼Œå‘è¡¨è®ºæ–‡åˆ›æ–°ç‚¹æä¾›äº†ç»ä½³è¯•éªŒåœºã€‚åŸºäºå¼ºå¤§çš„å¼€æºåŸºåº§ï¼Œç ”ç©¶è€…å¯èšç„¦äºé«˜æ•ˆå¾®è°ƒã€å¯¹é½æŠ€æœ¯ã€å®‰å…¨ä¼¦ç†ç­‰åˆ›æ–°ç‚¹ï¼Œä»¥æœ‰é™ç®—åŠ›äº§å‡ºå…·æœ‰å½±å“åŠ›çš„å­¦æœ¯æˆæœã€‚è¿™ä¸€è¿‡ç¨‹åŸ¹å…»çš„æ˜¯ä¸€ç§â€œä»é›¶æ„å»ºåˆ°ç²¾å‡†é©¯æœâ€çš„å…¨æ–°ç§‘ç ”èŒƒå¼ï¼Œç›¸å…³ç ”ç©¶ç»å†ä¸è®ºæ–‡æ›´æ˜¯é€šå¾€é¡¶å°–å­¦æœ¯æœºæ„æˆ–å·¥ä¸šç•Œç ”å‘å›¢é˜Ÿçš„â€œç¡¬é€šè´§â€ã€‚</p>
<h3 data-id="heading-4">1.3 ä¼ä¸šè½¬å‹ä¸ä¸ªäººèŒä¸šè·ƒè¿çš„ç¡¬æ ¸èµ„æœ¬</h3>
<p>å¹¶éæ‰€æœ‰ä¼ä¸šéƒ½éœ€è¦æˆ–èƒ½å¤Ÿè®­ç»ƒé€šç”¨å¤§æ¨¡å‹ï¼Œä½†æ¯å®¶ä¼ä¸šéƒ½æ‹¥æœ‰å…¶æœ€å…·ä»·å€¼çš„<strong>ç§æœ‰æ•°æ®ä¸ä¸šåŠ¡çŸ¥è¯†</strong>ã€‚èƒ½å¦åˆ©ç”¨è¿™äº›èµ„äº§æ‰“é€ å®‰å…¨ã€ä¸“å±ã€é«˜æ•ˆçš„å†…éƒ¨æ™ºèƒ½ç³»ç»Ÿï¼Œåœ¨äººå·¥æ™ºèƒ½æ—¶ä»£å·²æˆä¸ºä¼ä¸šçš„å…³é”®èƒ½åŠ›ã€‚</p>
<p>æŒæ¡å¤§æ¨¡å‹é¢„è®­ç»ƒã€å¾®è°ƒåŠå¼ºåŒ–å­¦ä¹ å¯¹é½ï¼ˆå¦‚RLHFï¼‰ç­‰å…¨æµç¨‹æŠ€èƒ½ï¼Œå¤§å®¶å°±èƒ½å¤Ÿç›´æ¥å›åº”è¿™ä¸€æ ¸å¿ƒéœ€æ±‚ï¼Œä»ç®€å•çš„APIè°ƒç”¨è€…ï¼Œè½¬å˜ä¸ºèƒ½ä¸ºä¼ä¸šåˆ›é€ æ ¸å¿ƒä»·å€¼çš„â€œAIæ¶æ„å¸ˆâ€ã€‚è¿™ä¸ä»…æ„å‘³ç€èŒä½ä¸è–ªæ°´çš„è·ƒå‡ï¼Œæ›´æ„å‘³ç€å¤§å®¶æ„å»ºäº†ä¸€æ¡åŸºäºæ·±åº¦æŠ€æœ¯ç†è§£ã€è¶³ä»¥åº”å¯¹å¿«é€ŸæŠ€æœ¯è¿­ä»£çš„<strong>é•¿æœŸèŒä¸šæŠ¤åŸæ²³</strong>ã€‚</p>
<h2 data-id="heading-5">äºŒã€è®¤è¯†å¤§æ¨¡å‹è®­ç»ƒ</h2>
<p>åœ¨äº†è§£å­¦ä¹ å¤§æ¨¡å‹è®­ç»ƒçš„å¿…è¦æ€§åï¼Œå¤§å®¶ä¸€å®šå¯¹å¤§æ¨¡å‹è®­ç»ƒäº§ç”Ÿäº†æµ“åšå…´è¶£ã€‚ç¬”è€…è¿™é‡Œå…ˆè¿›ä¸€æ­¥å‰–æå…¶æ ¸å¿ƒè¿‡ç¨‹ã€‚ä¸ºäº†è®©æŠ½è±¡çš„æ¦‚å¿µæ›´æ˜“äºç†è§£ï¼Œç¬”è€…é¦–å…ˆå°†é€šè¿‡ä¸€ä¸ªæ•´ä½“æ€§æ¯”å–»å‘å¤§å®¶æç»˜å¤§æ¨¡å‹è®­ç»ƒçš„å…¨æ™¯å›¾ï¼Œå¹¶ç‚¹æ˜å…¶ä¸­çš„å…³é”®ç¯èŠ‚ã€‚</p>
<h3 data-id="heading-6">2.1 å¤§æ¨¡å‹è®­ç»ƒçš„åŸºæœ¬æµç¨‹ï¼šä»â€œå­¦ç”Ÿâ€åˆ°â€œä¸“å®¶â€</h3>
<p>å¤§æ¨¡å‹çš„è®­ç»ƒå¯å½¢è±¡åœ°ç†è§£ä¸ºä¸€ä¸ªå­¦ç”Ÿçš„å®Œæ•´åŸ¹å…»è¿‡ç¨‹ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å…³é”®é˜¶æ®µï¼š</p>
<ol>
<li><strong>æ•°æ®å¤„ç†ï¼ˆå‡†å¤‡æ•™æï¼‰</strong> ï¼šè¿™æ˜¯æ‰€æœ‰æ­¥éª¤çš„æ ¹åŸºã€‚å¤§å®¶éœ€è¦å°†äº’è”ç½‘ç½‘é¡µã€ä¹¦ç±ã€æ–‡æ¡£ç­‰æµ·é‡åŸå§‹æ–‡æœ¬ï¼Œæ¸…æ´—ã€è¿‡æ»¤å¹¶è½¬åŒ–ä¸ºæ¨¡å‹å¯é«˜æ•ˆå­¦ä¹ çš„æ ¼å¼ã€‚<strong>æ•°æ®çš„è´¨é‡ç›´æ¥å†³å®šäº†æ¨¡å‹èƒ½åŠ›çš„ä¸Šé™</strong>ï¼Œå¦‚åŒæ•™æçš„ä¼˜åŠ£ä¼šæ·±åˆ»å½±å“å­¦ç”Ÿçš„çŸ¥è¯†åŸºç¡€ï¼ˆè¿™é‡Œè¦ç—›æ‰¹â€œæ¯’æ•™æâ€äº‹ä»¶ï¼‰ã€‚</li>
<li><strong>é¢„è®­ç»ƒï¼ˆå­¦ä¹ çŸ¥è¯†ï¼‰</strong> ï¼šæ­¤é˜¶æ®µæ˜¯è®©æ¨¡å‹â€œåšè§ˆç¾¤ä¹¦â€ï¼Œé€šè¿‡åœ¨æµ·é‡æ•°æ®ä¸Šè¿›è¡Œè‡ªç›‘ç£å­¦ä¹ ï¼ŒæŒæ¡è¯­è¨€è§„å¾‹ã€äº‹å®çŸ¥è¯†å’Œä¸–ç•Œé€»è¾‘ã€‚å¯¹äºå¤šæ•°ä»ä¸šè€…ï¼Œæ›´å¸¸è§çš„æ˜¯åœ¨å·²æœ‰å¤§æ¨¡å‹ï¼ˆåŸºåº§æ¨¡å‹ï¼‰ä¸Šè¿›è¡Œ<strong>å¢é‡é¢„è®­ç»ƒ</strong>ï¼Œå‘å…¶æ³¨å…¥æ–°çš„ã€ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†ã€‚</li>
<li><strong>æŒ‡ä»¤ç²¾è°ƒï¼ˆå­¦ä¼šè¡¨è¾¾ï¼‰</strong> ï¼šä¸€ä¸ªä»…ç»è¿‡é¢„è®­ç»ƒçš„æ¨¡å‹ï¼Œè™½çŸ¥è¯†æ¸Šåšï¼Œå´å¯èƒ½ä¸æ“…äºä»¥äººç±»æœŸæœ›çš„æ–¹å¼å›ç­”é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œå½“è¢«é—®åŠâ€œé•¿æ±Ÿâ€ï¼Œå®ƒå¯èƒ½æœºæ¢°åœ°å…³è”å‡ºâ€œé»„æ²³â€ï¼Œå´æ— æ³•ç»„ç»‡æˆä¸€å¥é€šé¡ºçš„ä»‹ç»ã€‚æŒ‡ä»¤ç²¾è°ƒï¼ˆSFTï¼‰ä½¿ç”¨é«˜è´¨é‡å¯¹è¯æ•°æ®ï¼Œæ•™ä¼šæ¨¡å‹å¦‚ä½•ç†è§£æŒ‡ä»¤ï¼Œå¹¶å°†å…¶æŒæ¡çš„çŸ¥è¯†æ¸…æ™°ã€æœ‰æ¡ç†åœ°è¡¨è¾¾å‡ºæ¥ã€‚</li>
<li><strong>å¯¹é½ä¼˜åŒ–ï¼ˆç²¾ç‚¼è¡¨è¾¾ï¼Œæ¥è¿‘äººç±»ï¼‰</strong> ï¼šç»è¿‡ç²¾è°ƒçš„æ¨¡å‹å›ç­”å¯èƒ½ä»æ˜¾ç”Ÿç¡¬æˆ–æœºæ¢°ã€‚æ­¤æ—¶ï¼Œéœ€é€šè¿‡<strong>å¼ºåŒ–å­¦ä¹ ï¼ˆå¦‚RLHFï¼‰</strong> ç­‰æŠ€æœ¯ï¼Œæ ¹æ®äººç±»åå¥½å¯¹æ¨¡å‹çš„å›ç­”è¿›è¡Œâ€œå¥–åŠ±â€æˆ–â€œçº æ­£â€ï¼Œä½¿å…¶è¾“å‡ºæ›´æµç•…ã€è‡ªç„¶ã€æœ‰ç”¨ä¸”å®‰å…¨ï¼Œæœ€ç»ˆè´´è¿‘äººç±»çš„è¡¨è¾¾ä¹ æƒ¯ä¸ä»·å€¼è§‚ã€‚</li>
</ol>
<p>æ•´ä¸ªæµç¨‹å¹¶éå•å‘ç›´çº¿ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>è¯„ä¼°ã€åé¦ˆä¸è¿­ä»£</strong>çš„å¾ªç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca09dbad2e4e43ba8ba6632188240e0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913792&amp;x-signature=gqwcB%2BPXJHsvthmeR4AmIhYjpc8%3D" alt="2.png" loading="lazy"/></p>
<p>éšç€DeepSeek-R1ç­‰æ¨¡å‹çš„å‘å¸ƒï¼Œå¼ºåŒ–å­¦ä¹ ä¸ä»…æˆä¸ºæå‡æ•ˆæœçš„å…³é”®æ‰‹æ®µï¼Œæ›´æ˜¯èµ‹äºˆæ¨¡å‹æ·±åº¦<strong>æ€ç»´ä¸æ¨ç†èƒ½åŠ›</strong>çš„æ ¸å¿ƒè·¯å¾„ã€‚åŒæ—¶ï¼Œä¸ºäº†é€‚åº”æ™ºèƒ½ä½“å¼€å‘æˆ–å‚ç›´é¢†åŸŸä»»åŠ¡ï¼Œå¾€å¾€è¿˜éœ€åœ¨ä¸Šè¿°æµç¨‹åŸºç¡€ä¸Šï¼Œè¿›è¡Œæ›´æ·±åº¦çš„â€œåè®­ç»ƒâ€ï¼Œä½¿æ¨¡å‹èƒ½è°ƒç”¨å·¥å…·æˆ–æŒæ¡æ›´ä¸“ç²¾çš„æŠ€èƒ½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62aae2c63718489ba5dbfcfa1caea92b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913792&amp;x-signature=V%2BCAU3ccnZsqWfWzLNWmuewdWKY%3D" alt="4.png" loading="lazy"/></p>
<h3 data-id="heading-7">2.2 å¤§æ¨¡å‹è®­ç»ƒä¸RAGçš„æ ¸å¿ƒåŒºåˆ«ï¼šå†…ç”Ÿèƒ½åŠ› vs. å¤–éƒ¨æ‰©å±•</h3>
<p>å¤§å®¶å¯èƒ½ä¼šè”æƒ³åˆ°å½“å‰æµè¡Œçš„RAGï¼ˆRAGæ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œå…ˆå¯¹ç”¨æˆ·çš„é—®é¢˜è¿›è¡ŒçŸ¥è¯†æ£€ç´¢ï¼Œæ£€ç´¢åçš„çŸ¥è¯†ä¼ é€’ç»™å¤§æ¨¡å‹è¿›è¡Œæ€»ç»“å›ç­”ï¼Œå›ç­”æ›´å‡†ç¡®ã€‚æ›´å…·ä½“çš„åŸç†å¯ä»¥å‚è€ƒç¬”è€…çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7494201369303253002" target="_blank" title="https://juejin.cn/post/7494201369303253002">ä¸€æ–‡å¸¦ä½ äº†è§£RAGæ ¸å¿ƒåŸç†ï¼ä¸å†åªæ˜¯æ–‡æ¡£çš„æ¬è¿å·¥</a>ï¼‰æŠ€æœ¯ï¼Œå®ƒåŒæ ·èƒ½æ‰©å±•æ¨¡å‹çš„çŸ¥è¯†è¾¹ç•Œã€‚é‚£ä¹ˆï¼Œç›´æ¥å°†ä¸“æœ‰çŸ¥è¯†æ”¾å…¥RAGçŸ¥è¯†åº“æ˜¯å¦æ›´ç®€ä¾¿ï¼Ÿä¸ºä½•è¿˜è¦æŠ•å…¥ç²¾åŠ›å­¦ä¹ æ¨¡å‹è®­ç»ƒï¼Ÿ</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/982d060dd063461183e2f3aa0c06417b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768913792&amp;x-signature=eFyAW5a%2Bz6affMyWs%2FEeTwwyfAA%3D" alt="5.png" width="70%" loading="lazy"/></p>
<p><strong>æ ¹æœ¬åŒºåˆ«åœ¨äºï¼šå¤§æ¨¡å‹è®­ç»ƒæ˜¯è®©çŸ¥è¯†â€œå†…åŒ–â€äºæ¨¡å‹æœ¬èº«ï¼Œè€ŒRAGæ˜¯åœ¨æ¨ç†æ—¶â€œå¤–æŒ‚â€ä¸€ä¸ªçŸ¥è¯†åº“ã€‚</strong> Â è®­ç»ƒèƒ½å¤Ÿä»æ ¹æœ¬ä¸Šå®šåˆ¶æ¨¡å‹çš„è¡Œä¸ºé€»è¾‘ã€æ·±åŒ–å…¶é¢†åŸŸä¸“ä¸šçŸ¥è¯†ã€ä¼˜åŒ–å…¶ä»»åŠ¡æ€§èƒ½ã€‚ä¸€ä¸ªç»è¿‡è‰¯å¥½è®­ç»ƒçš„æ¨¡å‹ï¼Œå¯ä»¥è¦†ç›–RAGçš„å¤§éƒ¨åˆ†åº”ç”¨åœºæ™¯ï¼Œåä¹‹åˆ™ä¸ç„¶ã€‚å…·ä½“è€Œè¨€ï¼Œè®­ç»ƒåæ¨¡å‹çš„ä¼˜åŠ¿ä½“ç°åœ¨ï¼š</p>
<h4 data-id="heading-8">2.2.1 ä»»åŠ¡ç²¾é€šåº¦ï¼šä»â€œè°ƒç”¨è€…â€å˜ä¸ºâ€œä¸“å®¶â€</h4>
<p>è®­ç»ƒå°†çŸ¥è¯†ç›´æ¥ç¼–ç è¿›æ¨¡å‹çš„å‚æ•°ä¸­ã€‚è¿™ä½¿å¾—æ¨¡å‹åœ¨å¤„ç†é¢†åŸŸå†…ç»“æ„åŒ–ã€å¤æ‚æˆ–éšå«é€»è¾‘çš„æŸ¥è¯¢æ—¶ï¼Œè¡¨ç°æ›´ä¸ºç²¾å‡†å¯é ï¼Œæˆä¸ºè¯¥ä»»åŠ¡çš„â€œä¸“å®¶â€ã€‚è€Œä»…ä¾èµ–RAGçš„æ¨¡å‹ï¼Œå…¶å›ç­”æ·±åº¦å’Œè¿è´¯æ€§å—é™äºæ£€ç´¢ç‰‡æ®µçš„è´¨é‡ã€‚</p>
<h4 data-id="heading-9">2.2.2 å“åº”é€Ÿåº¦ï¼šæ— éœ€æ£€ç´¢ï¼Œå³æ—¶ç”Ÿæˆ</h4>
<p>è®­ç»ƒå¥½çš„æ¨¡å‹åœ¨æ¨ç†æ—¶æ— éœ€è®¿é—®å¤–éƒ¨æ•°æ®åº“ï¼Œè·³è¿‡äº†æ£€ç´¢è€—æ—¶ï¼Œå› æ­¤å“åº”é€Ÿåº¦æ›´å¿«ï¼Œå°¤å…¶é€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚é«˜çš„åº”ç”¨åœºæ™¯ã€‚</p>
<h4 data-id="heading-10">2.2.3 ç³»ç»Ÿå¯é æ€§ï¼šæä¾›ç¨³å®šæ€§èƒ½åº•åº§</h4>
<p>åœ¨â€œè®­ç»ƒ+RAGâ€çš„æ··åˆæ¶æ„ä¸­ï¼Œè®­ç»ƒåçš„æ¨¡å‹æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¯é çš„åå¤‡ã€‚å½“æ£€ç´¢ç³»ç»Ÿæœªèƒ½æ‰¾åˆ°ç›¸å…³ä¿¡æ¯æˆ–è¿”å›é”™è¯¯å†…å®¹æ—¶ï¼Œæ¨¡å‹å†…ç½®çš„çŸ¥è¯†ä¾ç„¶èƒ½å¤Ÿä¿è¯ç”Ÿæˆä¸€ä¸ªåŸºæœ¬å¯ç”¨ã€ç¬¦åˆé¢†åŸŸå¸¸è¯†çš„ç­”æ¡ˆï¼Œæå¤§åœ°å¢å¼ºäº†æ•´ä½“ç³»ç»Ÿçš„é²æ£’æ€§ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™å¹¶éå¦å®šRAGçš„ä»·å€¼ã€‚<strong>RAGåœ¨é›†æˆå®æ—¶ã€åŠ¨æ€å˜åŒ–çš„å¤–éƒ¨ä¿¡æ¯ï¼ˆå¦‚æœ€æ–°æ–°é—»ã€è‚¡ä»·ï¼‰æ–¹é¢å…·æœ‰ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿</strong>ï¼Œè€Œé€šè¿‡é‡æ–°è®­ç»ƒæ¥æ›´æ–°æ­¤ç±»çŸ¥è¯†åˆ™æˆæœ¬é«˜æ˜‚ã€‚å› æ­¤ï¼Œæœ€ä½³çš„å·¥ç¨‹å®è·µå¾€å¾€æ˜¯<strong>å°†å¤§æ¨¡å‹çš„â€œå†…åŒ–çŸ¥è¯†â€ä¸RAGçš„â€œå¤–éƒ¨æ‰©å±•â€èƒ½åŠ›ç›¸ç»“åˆ</strong>ï¼Œä»¥æ„å»ºæ—¢ä¸“ä¸šåˆé²œæ´»çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-11">ä¸‰ã€æœ¬åˆé›†å­¦ä¹ æ¡†æ¶ä¸è·¯çº¿å›¾</h2>
<p>æœ¬ç³»åˆ—æ•™ç¨‹æºäºç¬”è€…å»å¹´äº²èº«ç»å†ä»æ•°æ®å‡†å¤‡åˆ°æ¨¡å‹éƒ¨ç½²çš„å…¨æµç¨‹ã€å¹¶è¸©è¿‡æ— æ•°â€œå‘â€ä¹‹åï¼Œç¬”è€…æ·±çŸ¥ä¸€ä¸ªå®Œæ•´ã€é€å½»ä¸”ç´§è·Ÿå‰æ²¿çš„å­¦ä¹ æ¡†æ¶å¯¹å¤§å®¶çš„ä»·å€¼ã€‚ç¬”è€…åœ¨å¼€å§‹å­¦ä¹ å¤§æ¨¡å‹æ—¶ä¹Ÿæ‰¾è¿‡å¾ˆå¤šçš„æ•™ç¨‹ï¼Œç„¶è€Œç›®å‰è®¸å¤šç°æœ‰æ•™ç¨‹å¤šèšç„¦äºä½¿ç”¨ç‰¹å®šå·¥å…·è¿›è¡Œå¾®è°ƒï¼Œå¾€å¾€ç¼ºå°‘å¯¹<strong>æ•°æ®å·¥ç¨‹ã€è¯„ä¼°è¿­ä»£åŠå…¨æµç¨‹é—­ç¯</strong>çš„æ·±å…¥å‰–æã€‚ç„¶è€Œï¼Œå¤§æ¨¡å‹è®­ç»ƒçš„ç²¾é«“ï¼Œæ°æ°åœ¨äºè¿™äº›å†³å®šæˆè´¥çš„ç»†èŠ‚ã€‚æ›´ä¸ºé‡è¦çš„æ˜¯ï¼Œè®­ç»ƒçš„ç›®æ ‡å·²ä¸ä»…æ˜¯åµŒå…¥çŸ¥è¯†ï¼Œæ›´åœ¨äºé€šè¿‡å¼ºåŒ–å­¦ä¹ èµ‹äºˆæ¨¡å‹<strong>æ€ç»´ä¸æ¨ç†èƒ½åŠ›</strong>ï¼Œä»¥åŠé€šè¿‡Agentå¾®è°ƒä½¿å…¶ç²¾å‡†æŒæ¡å·¥å…·è°ƒç”¨å’ŒæŒ‡ä»¤è·Ÿéšã€‚ä¸ºæ­¤ï¼Œæœ¬åˆé›†ç¬”è€…å°†ä¸ä»…è¯¦è§£å·¥å…·ä½¿ç”¨ä¸æ•°æ®é›†æ„å»ºï¼Œæ›´ä¼šåœ¨åˆé›†æœ€å<strong>ä»é›¶å¼€å§‹ç”¨PyTorchå®ç°ä¸€ä¸ªå¤§æ¨¡å‹</strong>ï¼Œå¸¦å¤§å®¶å½»åº•ç†è§£å…¶è¿è¡Œä¸è®­ç»ƒæœºç†ã€‚</p>
<h3 data-id="heading-12">3.1 æ ¸å¿ƒåŸºç¡€ç¯‡ï¼šæ„å»ºç³»ç»ŸåŒ–çŸ¥è¯†ä½“ç³»</h3>
<p>ç¬”è€…å°†ä»åŸºç¡€åˆ°å®æˆ˜ï¼Œæ­å»ºä¸‰å±‚é€’è¿›çš„çŸ¥è¯†ç»“æ„ï¼š</p>
<p><strong>1. çŸ¥è¯†ç¯‡ï¼ˆç†è§£æ¨¡å‹ï¼‰</strong></p>
<ul>
<li>å¤§æ¨¡å‹æ ¸å¿ƒæ¶æ„è§£æï¼šç†è§£æ¨¡å‹ç»„æˆã€æ–‡ä»¶æ ¼å¼ä¸ä½œç”¨ã€‚</li>
<li>æœ¬åœ°åŒ–éƒ¨ç½²å®è·µï¼šå­¦ä¹ å¦‚ä½•åœ¨æœ¬åœ°ç¯å¢ƒæˆåŠŸéƒ¨ç½²å¤§æ¨¡å‹ã€‚</li>
<li>åŸºç¡€è°ƒç”¨ä¸äº¤äº’ï¼šæŒæ¡ä¸æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹è¿›è¡ŒåŸºç¡€APIåŠå¯¹è¯äº¤äº’çš„æ–¹æ³•ã€‚</li>
<li>åŸç†è§£æï¼šæ·±å…¥æµ…å‡ºç†è§£Transformerã€æ³¨æ„åŠ›æœºåˆ¶ç­‰æ ¸å¿ƒå·¥ä½œåŸç†ã€‚</li>
</ul>
<p><strong>2. å·¥å…·ç¯‡ï¼ˆæŒæ¡æ­¦å™¨ï¼‰</strong></p>
<ul>
<li>è®­ç»ƒå·¥å…·å…¨æ™¯å›¾ï¼šæ¢³ç†å¹¶å¯¹æ¯”å¸‚é¢ä¸»æµå¤§æ¨¡å‹è®­ç»ƒæ¡†æ¶ã€‚</li>
<li>æ•°æ®å¤„ç†æ–¹æ³•è®ºï¼šå­¦ä¹ æ•°æ®æ¸…æ´—ã€æ ¼å¼åŒ–ã€è´¨é‡è¯„ä¼°çš„é€šç”¨æµç¨‹ä¸æœ€ä½³å®è·µã€‚</li>
<li>å·¥å…·é“¾å®æˆ˜ï¼šäº²æ‰‹ä½¿ç”¨ä¸»æµå·¥å…·å®Œæˆä¸€æ¬¡å®Œæ•´çš„å¾®è°ƒè®­ç»ƒä»»åŠ¡ã€‚</li>
</ul>
<p><strong>3. å®æˆ˜ç¯‡ï¼ˆé—­ç¯è®­ç»ƒï¼‰</strong></p>
<ul>
<li><strong>æ•°æ®å·¥ç¨‹å®æˆ˜</strong>ï¼šä»ç‰¹å®šé¢†åŸŸéœ€æ±‚å‡ºå‘ï¼Œå®Œæˆä»åŸå§‹æ•°æ®æ”¶é›†ã€æ¸…æ´—åˆ°æ„å»ºé«˜è´¨é‡é¢„è®­ç»ƒæ•°æ®é›†ï¼Œå¾®è°ƒé—®ç­”æ•°æ®é›†ï¼Œå¼ºåŒ–å­¦ä¹ æ•°æ®é›†çš„å®Œæ•´è¿‡ç¨‹ã€‚</li>
<li><strong>é¢„è®­ç»ƒå®æˆ˜</strong>ï¼šå­¦ä¹ å¦‚ä½•åˆ©ç”¨é¢†åŸŸæ•°æ®å¯¹åŸºåº§æ¨¡å‹è¿›è¡Œé«˜æ•ˆçš„å¢é‡é¢„è®­ç»ƒã€‚</li>
<li><strong>ç›‘ç£å¾®è°ƒå®æˆ˜</strong>ï¼šåˆ©ç”¨é«˜è´¨é‡æŒ‡ä»¤é›†å¯¹æ¨¡å‹è¿›è¡ŒæŒ‡ä»¤è·Ÿéšèƒ½åŠ›è°ƒä¼˜ã€‚</li>
<li><strong>å¯¹é½ä¼˜åŒ–å®æˆ˜</strong>ï¼šå®è·µåŸºäºäººç±»åé¦ˆçš„å¼ºåŒ–å­¦ä¹ ç­‰æŠ€æœ¯ï¼Œè®©æ¨¡å‹è¾“å‡ºæ›´å®‰å…¨ã€æœ‰ç”¨ã€ç¬¦åˆäººç±»åå¥½ã€‚</li>
</ul>
<h3 data-id="heading-13">3.2 é«˜çº§æ‹“å±•ç¯‡ï¼šæ·±å…¥å‰æ²¿ä¸æœ¬è´¨</h3>
<p>åœ¨å¤¯å®åŸºç¡€åç¬”è€…è¿˜å°†è¿›ä¸€æ­¥æ·±å…¥ä¸¤å¤§å‰æ²¿æ–¹å‘ä¸åº•å±‚åŸç†ï¼š</p>
<p><strong>1. å¼ºåŒ–å­¦ä¹ ä¸“é¢˜</strong></p>
<ul>
<li>å‰æ²¿ç®—æ³•å‰–æï¼šæ·±å…¥è§£è¯»GRPOç­‰æ— éœ€å¥–åŠ±æ¨¡å‹çš„å¼ºåŒ–å­¦ä¹ ç®—æ³•åŸç†ã€‚</li>
<li>æ€ç»´èƒ½åŠ›å®æˆ˜ï¼šé€šè¿‡GRPOå®æˆ˜ï¼Œè®©æ¨¡å‹çœŸæ­£æŒæ¡åˆ†æ­¥æ¨ç†ä¸å¤æ‚é—®é¢˜è§£å†³èƒ½åŠ›ã€‚</li>
</ul>
<p><strong>2. æ™ºèƒ½ä½“ä¸“é¢˜</strong></p>
<ul>
<li>å‡½æ•°è°ƒç”¨è¯¦è§£ï¼šæ·±å…¥å‰–æå¤§æ¨¡å‹çš„Function Callingèƒ½åŠ›å®ç°åŸç†ã€‚</li>
<li>Agentæ€§èƒ½å¾®è°ƒï¼šå­¦ä¹ å¦‚ä½•é€šè¿‡æ•°æ®è®­ç»ƒä¸å¼ºåŒ–ï¼Œè®©æ¨¡å‹æˆä¸ºé«˜æ•ˆã€å¯é çš„ä»»åŠ¡è§„åˆ’ä¸æ‰§è¡Œæ™ºèƒ½ä½“çš„åŸºåº§ã€‚</li>
</ul>
<p><strong>3. åŸç†å®ç°ä¸“é¢˜</strong></p>
<ul>
<li><strong>ä»é›¶æ‰‹å†™å¤§æ¨¡å‹</strong>ï¼šä½¿ç”¨PyTorchï¼Œä»æ³¨æ„åŠ›æœºåˆ¶å¼€å§‹ï¼Œé€æ­¥å®ç°ä¸€ä¸ªå®Œæ•´çš„å°è§„æ¨¡å¤§æ¨¡å‹ï¼Œå¹¶å®Œæˆé¢„è®­ç»ƒå…¨æµç¨‹ï¼Œå½»åº•æ‰“é€šç†è®ºåˆ°å®ç°çš„å£å’ã€‚</li>
</ul>
<p>æœ¬ç³»åˆ—é¢„è®¡å°†é€šè¿‡è¶…è¿‡50ç¯‡çš„è¯¦ç»†æ–‡ç« ï¼Œç³»ç»ŸåŒ–è¦†ç›–ä»¥ä¸Šæ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚æ•™ç¨‹å®Œç»“åï¼Œç¬”è€…å°†æŒç»­åˆ†äº«è®­ç»ƒä¸­çš„<strong>æ–°æŠ€æœ¯å®è·µã€ç–‘éš¾é—®é¢˜è§£å†³æ–¹æ¡ˆä¸å‰æ²¿åŠ¨æ€</strong>ï¼Œå› æ­¤è¯¥åˆé›†ä¸ä»…æ˜¯å®æˆ˜æ•™ç¨‹ï¼Œæ›´æ˜¯æŒç»­æ›´æ–°çš„å­¦ä¹ æŒ‡å—ã€‚</p>
<h2 data-id="heading-14">å››ã€æ€»ç»“</h2>
<p>å¤§æ¨¡å‹è®­ç»ƒæ˜¯æ·±å…¥AIæ ¸å¿ƒã€ä»æŠ€æœ¯ä½¿ç”¨è€…è¿ˆå‘åˆ›é€ è€…çš„å…³é”®ä¸€æ­¥ã€‚å®ƒä¸ä»…èµ‹èƒ½å‚ç›´é¢†åŸŸåˆ›æ–°ï¼Œæ›´æ˜¯æ„å»ºä¸ªäººé•¿æœŸç«äº‰åŠ›çš„ç¡¬æ ¸æŠ€èƒ½ã€‚</p>
<p>æ— è®ºæ˜¯ä¼ä¸šæ™ºèƒ½èµ‹èƒ½è¿˜æ˜¯ç ”ç©¶ç”Ÿå­¦æœ¯ç•Œçš„åˆ›æ–°ç‚¹æ„æ€ï¼Œå¤§æ¨¡å‹è®­ç»ƒéƒ½æ˜¯å¤§å®¶è¿½é€AIæµªæ½®çš„å¿…å¤‡æŠ€èƒ½ï¼Œæœ¬åˆé›†å°†ç³»ç»Ÿæ‹†è§£ä»æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒåˆ°å¼ºåŒ–å­¦ä¹ ä¸æ™ºèƒ½ä½“å¼€å‘çš„å…¨æµç¨‹ï¼Œå¹¶å¸¦ä½ ä»é›¶å®ç°æ¨¡å‹ï¼Œå¤§å®¶æŒæ¡å¤§æ¨¡å‹è®­ç»ƒçš„å…¨æŠ€èƒ½ï¼ŒçœŸæ­£æŒæ¡å¡‘é€ æ™ºèƒ½çš„èƒ½åŠ›ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Generator å‡½æ•°]]></title>    <link>https://juejin.cn/post/7594657393830068262</link>    <guid>https://juejin.cn/post/7594657393830068262</guid>    <pubDate>2026-01-13T10:19:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594657393830068262" data-draft-id="7594270467030777883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Generator å‡½æ•°"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-13T10:19:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§‹å­aria"/> <meta itemprop="url" content="https://juejin.cn/user/2892132889661339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Generator å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2892132889661339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§‹å­aria
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:19:45.000Z" title="Tue Jan 13 2026 10:19:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Â 1.æ ¸å¿ƒçŸ¥è¯†ç‚¹ æ€»ç»“</h2>
<ol>
<li>Generator æ˜¯ã€Œåˆ†æ®µæ‰§è¡Œçš„å‡½æ•°ã€ï¼Œ<code>function*</code> å£°æ˜ï¼Œ<code>yield</code> æš‚åœï¼Œ<code>next()</code> æ¢å¤æ‰§è¡Œ</li>
<li><code>yield</code> æ˜¯æš‚åœæ ‡è®° + è¿”å›å€¼ï¼Œ<code>yield*</code> æ˜¯éå†å™¨å§”æ‰˜ï¼Œç”¨äºè°ƒç”¨å…¶ä»–ç”Ÿæˆå™¨ / å¯éå†ç»“æ„</li>
<li><code>next(å‚æ•°)</code> å¯ä»¥ç»™ã€Œä¸Šä¸€ä¸ª yieldã€ä¼ å€¼ï¼Œé¦–æ¬¡ä¼ å‚æ— æ•ˆ</li>
<li>Generator è¿”å›éå†å™¨ï¼Œå¯è¢« <code>for...of</code> éå†ï¼Œ<code>return()</code> å¼ºåˆ¶ç»ˆæ­¢éå†</li>
<li>æ ¸å¿ƒä¼˜åŠ¿ï¼šæ— å…¨å±€å˜é‡æ±¡æŸ“ã€ä¿å­˜æ‰§è¡ŒçŠ¶æ€ã€å¤–éƒ¨çµæ´»æ§åˆ¶å†…éƒ¨é€»è¾‘ï¼Œæ˜¯ ES6 å¼‚æ­¥ç¼–ç¨‹çš„é‡è¦æ–¹æ¡ˆ</li>
</ol>
<h2 data-id="heading-1">2.ä»€ä¹ˆæ˜¯ Generator å‡½æ•°</h2>
<p>åœ¨Javascriptä¸­ï¼Œä¸€ä¸ªå‡½æ•°ä¸€æ—¦å¼€å§‹æ‰§è¡Œï¼Œå°±ä¼šè¿è¡Œåˆ°æœ€åæˆ–é‡åˆ°returnæ—¶ç»“æŸï¼Œè¿è¡ŒæœŸé—´ä¸ä¼šæœ‰å…¶å®ƒä»£ç èƒ½å¤Ÿæ‰“æ–­å®ƒï¼Œä¹Ÿä¸èƒ½ä»å¤–éƒ¨å†ä¼ å…¥å€¼åˆ°å‡½æ•°ä½“å†…</p>
<p>è€Œ<strong>Generatorå‡½æ•°ï¼ˆç”Ÿæˆå™¨ï¼‰çš„å‡ºç°ä½¿å¾—æ‰“ç ´å‡½æ•°çš„å®Œæ•´è¿è¡Œæˆä¸ºäº†å¯èƒ½</strong>ï¼Œå…¶è¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½æ•°å®Œå…¨ä¸åŒ</p>
<p><strong>Generatorå‡½æ•°æ˜¯ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</strong>ï¼Œå½¢å¼ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œä½†æœ‰å‡ ä¸ªæ˜¾è‘—çš„ç‰¹å¾ï¼š</p>
<p>-- functionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå· "*" ï¼ˆæ¨èç´§æŒ¨ç€functionå…³é”®å­—ï¼‰<br/>
-- å‡½æ•°ä½“å†…ä½¿ç”¨ yield è¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ ï¼ˆå¯ä»¥æœ‰å¤šä¸ªyieldï¼‰<br/>
-- <strong>ç›´æ¥è°ƒç”¨ Generatorå‡½æ•°å¹¶ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿä¸ä¼šè¿”å›è¿è¡Œç»“æœï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼ˆIterator Objectï¼‰</strong><br/>
-- ä¾æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œéå† Generatorå‡½æ•°å†…éƒ¨çš„æ¯ä¸€ä¸ªçŠ¶æ€</p>
<h3 data-id="heading-2">2.1 ä¼ ç»Ÿå‡½æ•°å’ŒGeneratorå‡½æ•°åŒºåˆ«</h3>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-comment">// ä¼ ç»Ÿå‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'hello world'</span>
  }

  <span class="hljs-title function_">foo</span>()   <span class="hljs-comment">// 'hello world'ï¼Œä¸€æ—¦è°ƒç”¨ç«‹å³æ‰§è¡Œ</span>


  <span class="hljs-comment">// Generatorå‡½æ•°</span>
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">generator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'status one'</span>         <span class="hljs-comment">// yield è¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°  </span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'hello world'</span>
  }

  <span class="hljs-keyword">let</span> iterator = <span class="hljs-title function_">generator</span>()   
  <span class="hljs-comment">// è°ƒç”¨ Generatorå‡½æ•°ï¼Œå‡½æ•°å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªIteratorå¯¹è±¡</span>
  iterator.<span class="hljs-title function_">next</span>()              
  <span class="hljs-comment">// {value: "status one", done: false}ï¼Œvalue è¡¨ç¤ºè¿”å›å€¼ï¼Œdone è¡¨ç¤ºéå†è¿˜æ²¡æœ‰ç»“æŸ</span>
  iterator.<span class="hljs-title function_">next</span>()              
  <span class="hljs-comment">// {value: "hello world", done: true}ï¼Œvalue è¡¨ç¤ºè¿”å›å€¼ï¼Œdone è¡¨ç¤ºéå†ç»“æŸ</span>
}
</code></pre>
<h3 data-id="heading-3">2.2 Generatorå‡½æ•°è¯¦è§£</h3>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">//å®šä¹‰äº†ä¸€ä¸ª Generatorå‡½æ•°ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ª yield è¡¨è¾¾å¼å’Œä¸€ä¸ª return è¯­å¥ï¼ˆå³äº§ç”Ÿäº†ä¸‰ä¸ªçŠ¶æ€ï¼‰</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'hello'</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'world'</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'ending'</span>
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>()

  it.<span class="hljs-title function_">next</span>()   <span class="hljs-comment">// {value: "hello", done: false}</span>
  it.<span class="hljs-title function_">next</span>()   <span class="hljs-comment">// {value: "world", done: false}</span>
  it.<span class="hljs-title function_">next</span>()   <span class="hljs-comment">// {value: "ending", done: true}</span>
  it.<span class="hljs-title function_">next</span>()   <span class="hljs-comment">// {value: undefined, done: true}</span>
}
</code></pre>
<p>æ¯æ¬¡è°ƒç”¨Iteratorå¯¹è±¡çš„nextæ–¹æ³•æ—¶ï¼Œå†…éƒ¨çš„æŒ‡é’ˆå°±ä¼šä»å‡½æ•°çš„å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª yield è¡¨è¾¾å¼æˆ–returnè¯­å¥æš‚åœã€‚æ¢å¥è¯è¯´ï¼Œ<strong>Generator å‡½æ•°æ˜¯åˆ†æ®µæ‰§è¡Œçš„ï¼Œyieldè¡¨è¾¾å¼æ˜¯æš‚åœæ‰§è¡Œçš„æ ‡è®°ï¼Œè€Œ nextæ–¹æ³•å¯ä»¥æ¢å¤æ‰§è¡Œ</strong></p>
<p>æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå†…éƒ¨æŒ‡é’ˆä»å‡½æ•°å¤´éƒ¨å¼€å§‹æ‰§è¡Œï¼Œé‡åˆ°ç¬¬ä¸€ä¸ª yield è¡¨è¾¾å¼æš‚åœï¼Œå¹¶è¿”å›å½“å‰çŠ¶æ€çš„å€¼ 'hello'</p>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå†…éƒ¨æŒ‡é’ˆä»ä¸Šä¸€ä¸ªï¼ˆå³ç¬¬ä¸€ä¸ªï¼‰ yield è¡¨è¾¾å¼å¼€å§‹ï¼Œé‡åˆ°ç¬¬äºŒä¸ª yield è¡¨è¾¾å¼æš‚åœï¼Œè¿”å›å½“å‰çŠ¶æ€çš„å€¼ 'world'</p>
<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œå†…éƒ¨æŒ‡é’ˆä»ç¬¬äºŒä¸ª yield è¡¨è¾¾å¼å¼€å§‹ï¼Œé‡åˆ°returnè¯­å¥æš‚åœï¼Œè¿”å›å½“å‰çŠ¶æ€çš„å€¼ 'ending'ï¼ŒåŒæ—¶æ‰€æœ‰çŠ¶æ€éå†å®Œæ¯•ï¼Œdone å±æ€§çš„å€¼å˜ä¸ºtrue</p>
<p>ç¬¬å››æ¬¡è°ƒç”¨nextæ–¹æ³•æ—¶ï¼Œ<strong>ç”±äºå‡½æ•°å·²ç»éå†è¿è¡Œå®Œæ¯•ï¼Œä¸å†æœ‰å…¶å®ƒçŠ¶æ€ï¼Œå› æ­¤è¿”å› {value: undefined, done: true}ã€‚å¦‚æœç»§ç»­è°ƒç”¨nextæ–¹æ³•ï¼Œè¿”å›çš„ä¹Ÿéƒ½æ˜¯è¿™ä¸ªå€¼</strong></p>
<h2 data-id="heading-4">3.yield è¡¨è¾¾å¼</h2>
<p><strong>ï¼ˆ1ï¼‰ã€yield è¡¨è¾¾å¼åªèƒ½ç”¨åœ¨ Generator å‡½æ•°é‡Œé¢ï¼Œç”¨åœ¨å…¶å®ƒåœ°æ–¹éƒ½ä¼šæŠ¥é”™</strong></p>
<pre><code class="hljs language-js" lang="js">{
  (<span class="hljs-keyword">function</span> (<span class="hljs-params"/>){
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  })()

  <span class="hljs-comment">// SyntaxError: Unexpected number</span>
  <span class="hljs-comment">// åœ¨ä¸€ä¸ªæ™®é€šå‡½æ•°ä¸­ä½¿ç”¨yieldè¡¨è¾¾å¼ï¼Œç»“æœäº§ç”Ÿä¸€ä¸ªå¥æ³•é”™è¯¯</span>
}
</code></pre>
<p><strong>ï¼ˆ2ï¼‰ã€yield è¡¨è¾¾å¼å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢</strong></p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">demo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello'</span> + <span class="hljs-keyword">yield</span>); <span class="hljs-comment">// SyntaxError</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello'</span> + <span class="hljs-keyword">yield</span> <span class="hljs-number">123</span>); <span class="hljs-comment">// SyntaxError</span>

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello'</span> + (<span class="hljs-keyword">yield</span>)); <span class="hljs-comment">// OK</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hello'</span> + (<span class="hljs-keyword">yield</span> <span class="hljs-number">123</span>)); <span class="hljs-comment">// OK</span>
  }
}
</code></pre>
<p><strong>ï¼ˆ3ï¼‰ã€yield è¡¨è¾¾å¼ç”¨ä½œå‚æ•°æˆ–æ”¾åœ¨èµ‹å€¼è¡¨è¾¾å¼çš„å³è¾¹ï¼Œå¯ä»¥ä¸åŠ æ‹¬å·</strong></p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">demo</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">foo</span>(<span class="hljs-keyword">yield</span> <span class="hljs-string">'a'</span>, <span class="hljs-keyword">yield</span> <span class="hljs-string">'b'</span>); <span class="hljs-comment">// OK</span>
    <span class="hljs-keyword">let</span> input = <span class="hljs-keyword">yield</span>; <span class="hljs-comment">// OK</span>
  }
}
</code></pre>
<p><strong>ï¼ˆ4ï¼‰ã€yield è¡¨è¾¾å¼å’Œreturnè¯­å¥çš„åŒºåˆ«</strong></p>
<p>ç›¸ä¼¼ï¼šéƒ½èƒ½è¿”å›ç´§è·Ÿåœ¨è¯­å¥åé¢çš„é‚£ä¸ªè¡¨è¾¾å¼çš„å€¼</p>
<p>åŒºåˆ«ï¼š<br/>
-- æ¯æ¬¡é‡åˆ° yieldï¼Œå‡½æ•°å°±æš‚åœæ‰§è¡Œï¼Œä¸‹ä¸€æ¬¡å†ä»è¯¥ä½ç½®ç»§ç»­å‘åæ‰§è¡Œï¼›è€Œ return è¯­å¥ä¸å…·å¤‡è®°å¿†ä½ç½®çš„åŠŸèƒ½<br/>
-- ä¸€ä¸ªå‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ return è¯­å¥ï¼Œè€Œåœ¨ Generator å‡½æ•°ä¸­å¯ä»¥æœ‰ä»»æ„å¤šä¸ª yield</p>
<h2 data-id="heading-5">4. <code>return()</code> ä¸ <code>throw()</code> æ–¹æ³•</h2>
<p>Generator å¯¹è±¡é™¤äº† <code>next()</code>ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ–¹æ³•ç”¨äºä¸»åŠ¨æ§åˆ¶æ‰§è¡Œï¼š</p>
<h3 data-id="heading-6"><code>return(value)</code></h3>
<ul>
<li>ä½œç”¨ï¼šç«‹å³ç»ˆæ­¢ Generator å‡½æ•°ï¼Œè¿”å› <code>{ value: ä¼ å…¥å€¼, done: true }</code>ï¼›</li>
<li>åç»­å†è°ƒç”¨ <code>next()</code>ï¼Œä»…è¿”å› <code>{ value: undefined, done: true }</code>ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
}
<span class="hljs-keyword">const</span> g = <span class="hljs-title function_">gen</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(g.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value:1, done:false }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(g.<span class="hljs-keyword">return</span>(<span class="hljs-string">'ç»ˆæ­¢'</span>)); <span class="hljs-comment">// { value:'ç»ˆæ­¢', done:true }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(g.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value:undefined, done:true }</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-7"><code>throw(error)</code></h3>
<ul>
<li>ä½œç”¨ï¼šåœ¨å½“å‰æš‚åœç‚¹æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè‹¥å‡½æ•°å†…æœªæ•è·ï¼Œé”™è¯¯ä¼šå‘å¤–ä¼ æ’­ï¼›</li>
<li>è‹¥å‡½æ•°å†…ç”¨ <code>try/catch</code> æ•è·é”™è¯¯ï¼Œå‡½æ•°ä¼šç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°ä¸‹ä¸€ä¸ª <code>yield</code>ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·é”™è¯¯ï¼š'</span>, e); <span class="hljs-comment">// æ•è· throw() æŠ›å‡ºçš„é”™è¯¯</span>
  }
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
}
<span class="hljs-keyword">const</span> g = <span class="hljs-title function_">gen</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(g.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value:1, done:false }</span>
g.<span class="hljs-keyword">throw</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ‰‹åŠ¨æŠ›é”™'</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šæ•è·é”™è¯¯ï¼šError: æ‰‹åŠ¨æŠ›é”™</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(g.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// { value:2, done:false }</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-8">5.yield* è¡¨è¾¾å¼</h2>
<p><strong>å¦‚æœåœ¨ Generator å‡½æ•°é‡Œé¢è°ƒç”¨å¦ä¸€ä¸ª Generator å‡½æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰æ•ˆæœçš„</strong></p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'aaa'</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'bbb'</span>
  }

  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">foo</span>()
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'ccc'</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'ddd'</span>
  }

  <span class="hljs-keyword">let</span> iterator = <span class="hljs-title function_">bar</span>()

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> iterator) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)
  }

  <span class="hljs-comment">// ccc</span>
  <span class="hljs-comment">// ddd</span>

}
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ä¸Šä¾‹ä¸­ï¼Œä½¿ç”¨ for...of æ¥éå†å‡½æ•°barçš„ç”Ÿæˆçš„éå†å™¨å¯¹è±¡æ—¶ï¼Œåªè¿”å›äº†barè‡ªèº«çš„ä¸¤ä¸ªçŠ¶æ€å€¼ã€‚æ­¤æ—¶ï¼Œå¦‚æœæƒ³è¦æ­£ç¡®çš„åœ¨bar é‡Œè°ƒç”¨fooï¼Œå°±éœ€è¦ç”¨åˆ° yield* è¡¨è¾¾å¼</p>
<p><em><em>yield</em> è¡¨è¾¾å¼ç”¨æ¥åœ¨ä¸€ä¸ª Generator å‡½æ•°é‡Œé¢ æ‰§è¡Œ å¦ä¸€ä¸ª Generator å‡½æ•°</em>*</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'aaa'</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'bbb'</span>
  }

  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span>* <span class="hljs-title function_">foo</span>()      <span class="hljs-comment">// åœ¨barå‡½æ•°ä¸­ **æ‰§è¡Œ** fooå‡½æ•°</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'ccc'</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-string">'ddd'</span>
  }

  <span class="hljs-keyword">let</span> iterator = <span class="hljs-title function_">bar</span>()

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> iterator) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)
  }

  <span class="hljs-comment">// aaa</span>
  <span class="hljs-comment">// bbb</span>
  <span class="hljs-comment">// ccc</span>
  <span class="hljs-comment">// ddd</span>
}
</code></pre>
<h2 data-id="heading-9">6.next() æ–¹æ³•çš„å‚æ•°</h2>
<p><strong>yieldè¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼Œæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedã€‚nextæ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å°±ä¼šè¢«å½“ä½œä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼</strong></p>
<pre><code class="hljs language-js" lang="js"> [rv] = <span class="hljs-keyword">yield</span> [expression]
</code></pre>
<p>expressionï¼šå®šä¹‰é€šè¿‡éå†å™¨ä»ç”Ÿæˆå™¨å‡½æ•°è¿”å›çš„å€¼ï¼Œå¦‚æœçœç•¥ï¼Œåˆ™è¿”å› undefined<br/>
rvï¼šæ¥æ”¶ä»ä¸‹ä¸€ä¸ª next() æ–¹æ³•ä¼ é€’æ¥çš„å‚æ•°</p>
<p>ä¾‹å­ï¼Œå¹¶å°è¯•è§£æéå†ç”Ÿæˆå™¨å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span> + <span class="hljs-number">5</span> + <span class="hljs-number">6</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)
    <span class="hljs-keyword">yield</span> result
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())      <span class="hljs-comment">// {value: 14, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())      <span class="hljs-comment">// undefined    {value: undefined, done: false}</span>
}
</code></pre>
<p>ç¬¬ä¸€æ¬¡è°ƒç”¨éå†å™¨å¯¹è±¡çš„nextæ–¹æ³•ï¼Œå‡½æ•°ä»å¤´éƒ¨å¼€å§‹æ‰§è¡Œï¼Œé‡åˆ°ç¬¬ä¸€ä¸ª yield æš‚åœï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å…¶å®æ˜¯åˆ†äº†ä¸‰æ­¥ï¼š</p>
<p>ï¼ˆ1ï¼‰ã€å£°æ˜äº†ä¸€ä¸ªå˜é‡resultï¼Œå¹¶å°†å£°æ˜æå‰ï¼Œé»˜è®¤å€¼ä¸º undefined<br/>
ï¼ˆ2ï¼‰ã€ç”±äº Generatorå‡½æ•°æ˜¯ â€œæƒ°æ€§æ±‚å€¼â€ï¼Œæ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ª yield æ—¶æ‰ä¼šè®¡ç®—æ±‚å’Œï¼Œå¹¶åŠ è®¡ç®—ç»“æœè¿”å›ç»™éå†å™¨å¯¹è±¡ {value: 14, done: false}ï¼Œå‡½æ•°æš‚åœè¿è¡Œ<br/>
ï¼ˆ3ï¼‰ã€<strong>ç†è®ºä¸Šåº”è¯¥è¦æŠŠç­‰å·å³è¾¹çš„ [yield 3 + 5 + 6] èµ‹å€¼ç»™å˜é‡resultï¼Œä½†æ˜¯ï¼Œ</strong> <strong>ç”±äºå‡½æ•°æ‰§è¡Œåˆ° yield æ—¶æš‚å®šäº†ï¼Œè¿™ä¸€æ­¥å°±è¢«æŒ‚èµ·äº†</strong></p>
<p><strong>ç¬¬äºŒæ¬¡è°ƒç”¨nextæ–¹æ³•ï¼Œå‡½æ•°ä»ä¸Šä¸€æ¬¡ yield åœä¸‹çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ç»™resultèµ‹å€¼çš„åœ°æ–¹å¼€å§‹ï¼Œç”±äºnext()å¹¶æ²¡æœ‰ä¼ å‚ï¼Œå°±ç›¸å½“äºä¼ å‚ä¸ºundefined</strong></p>
<p>åŸºäºä»¥ä¸Šåˆ†æï¼Œå°±ä¸éš¾ç†è§£ä¸ºä»€ä¹ˆè¯´ yieldè¡¨è¾¾å¼æœ¬èº«çš„è¿”å›å€¼ï¼ˆç‰¹æŒ‡ [rv]ï¼‰æ€»æ˜¯undefinedäº†ã€‚ç°åœ¨æŠŠä¸Šé¢çš„ä»£ç ç¨ä½œä¿®æ”¹ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ next() æ–¹æ³•ä¼ ä¸€ä¸ªå‚æ•°3ï¼ŒæŒ‰ç…§ä¸Šå›¾åˆ†æå¯ä»¥å¾ˆå¿«å¾—å‡ºè¾“å‡ºç»“æœ</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span> + <span class="hljs-number">5</span> + <span class="hljs-number">6</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)
    <span class="hljs-keyword">yield</span> result
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())      <span class="hljs-comment">// {value: 14, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">3</span>))      <span class="hljs-comment">// 3    {value: 3, done: false}</span>
}
</code></pre>
<p><strong>å¦‚æœç¬¬ä¸€æ¬¡è°ƒç”¨next()çš„æ—¶å€™ä¹Ÿä¼ äº†ä¸€ä¸ªå‚æ•°å‘¢ï¼Ÿè¿™ä¸ªå½“ç„¶æ˜¯æ— æ•ˆçš„ï¼Œnextæ–¹æ³•çš„å‚æ•°è¡¨ç¤ºä¸Šä¸€ä¸ªyieldè¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨nextæ–¹æ³•æ—¶ï¼Œä¼ é€’å‚æ•°æ˜¯æ— æ•ˆçš„ã€‚</strong></p>
<p>ä»è¯­ä¹‰ä¸Šè®²ï¼Œç¬¬ä¸€ä¸ªnextæ–¹æ³•ç”¨æ¥å¯åŠ¨éå†å™¨å¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç”¨å¸¦æœ‰å‚æ•°ã€‚</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span> + <span class="hljs-number">5</span> + <span class="hljs-number">6</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result)
    <span class="hljs-keyword">yield</span> result
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">10</span>))      <span class="hljs-comment">// {value: 14, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">3</span>))      <span class="hljs-comment">// 3    {value: 3, done: false}</span>
}
</code></pre>
<p><strong>Generator å‡½æ•°ä»æš‚åœçŠ¶æ€åˆ°æ¢å¤è¿è¡Œï¼Œå®ƒçš„ä¸Šä¸‹æ–‡çŠ¶æ€ï¼ˆcontextï¼‰æ˜¯ä¸å˜çš„ã€‚é€šè¿‡nextæ–¹æ³•çš„å‚æ•°ï¼Œå°±æœ‰åŠæ³•åœ¨ Generator å‡½æ•°å¼€å§‹è¿è¡Œä¹‹åï¼Œç»§ç»­å‘å‡½æ•°ä½“å†…éƒ¨æ³¨å…¥å€¼ã€‚</strong> ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ Generator å‡½æ•°è¿è¡Œçš„ä¸åŒé˜¶æ®µï¼Œä»å¤–éƒ¨å‘å†…éƒ¨æ³¨å…¥ä¸åŒçš„å€¼ï¼Œä»è€Œè°ƒæ•´å‡½æ•°è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-keyword">let</span> y = <span class="hljs-number">2</span> * (<span class="hljs-keyword">yield</span> (x + <span class="hljs-number">1</span>))   
    <span class="hljs-comment">// æ³¨æ„ï¼šyield è¡¨è¾¾å¼å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢</span>
    <span class="hljs-keyword">let</span> z = <span class="hljs-keyword">yield</span> (y / <span class="hljs-number">3</span>)
    <span class="hljs-keyword">return</span> x + y + z
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>(<span class="hljs-number">5</span>)
  <span class="hljs-comment">/* é€šè¿‡å‰é¢çš„ä»‹ç»å°±çŸ¥é“è¿™éƒ¨åˆ†è¾“å‡ºç»“æœæ˜¯é”™è¯¯çš„å•¦
    
    console.log(it.next())  // {value: 6, done: false}
    console.log(it.next())  // {value: 2, done: false}
    console.log(it.next())  // {value: 13, done: false}
  */</span>

  <span class="hljs-comment">/*** æ­£ç¡®çš„ç»“æœåœ¨è¿™é‡Œ ***/</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())  
  <span class="hljs-comment">// é¦–æ¬¡è°ƒç”¨nextï¼Œå‡½æ•°åªä¼šæ‰§è¡Œåˆ° â€œyield(5+1)â€ æš‚åœï¼Œå¹¶è¿”å› {value: 6, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())  
  <span class="hljs-comment">// ç¬¬äºŒæ¬¡è°ƒç”¨nextï¼Œæ²¡æœ‰ä¼ é€’å‚æ•°ï¼Œ</span>
  <span class="hljs-comment">//æ‰€ä»¥ yçš„å€¼æ˜¯undefinedï¼Œé‚£ä¹ˆ y/3 å½“ç„¶æ˜¯ä¸€ä¸ªNaNï¼Œæ‰€ä»¥åº”è¯¥è¿”å› {value: NaN, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())  
  <span class="hljs-comment">// åŒæ ·çš„é“ç†ï¼Œzä¹Ÿæ˜¯undefinedï¼Œ6 + undefined + undefined = NaNï¼Œ</span>
  <span class="hljs-comment">//è¿”å› {value: NaN, done: true}</span>
}
</code></pre>
<p>å¦‚æœå‘nextæ–¹æ³•æä¾›å‚æ•°ï¼Œè¿”å›ç»“æœå°±å®Œå…¨ä¸ä¸€æ ·äº†</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-keyword">let</span> y = <span class="hljs-number">2</span> * (<span class="hljs-keyword">yield</span> (x + <span class="hljs-number">1</span>))   
    <span class="hljs-comment">// æ³¨æ„ï¼šyield è¡¨è¾¾å¼å¦‚æœç”¨åœ¨å¦ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå¿…é¡»æ”¾åœ¨åœ†æ‹¬å·é‡Œé¢</span>
    <span class="hljs-keyword">let</span> z = <span class="hljs-keyword">yield</span> (y / <span class="hljs-number">3</span>)
    <span class="hljs-keyword">return</span> x + y + z
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>(<span class="hljs-number">5</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())  
  <span class="hljs-comment">// æ­£å¸¸çš„è¿ç®—åº”è¯¥æ˜¯å…ˆæ‰§è¡Œåœ†æ‹¬å·å†…çš„è®¡ç®—ï¼Œå†å»ä¹˜ä»¥2ï¼Œ</span>
  <span class="hljs-comment">//ç”±äºåœ†æ‹¬å·å†…è¢« yield è¿”å› 5 + 1 çš„ç»“æœå¹¶æš‚åœï¼Œæ‰€ä»¥è¿”å›{value: 6, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">9</span>))  
  <span class="hljs-comment">// ä¸Šæ¬¡æ˜¯åœ¨åœ†æ‹¬å·å†…éƒ¨æš‚åœçš„ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡è°ƒç”¨ nextæ–¹æ³•åº”è¯¥ä»åœ†æ‹¬å·é‡Œé¢å¼€å§‹ï¼Œ</span>
  <span class="hljs-comment">//å°±å˜æˆäº† let y = 2 * (9)ï¼Œyè¢«èµ‹å€¼ä¸º18ï¼Œ</span>
  <span class="hljs-comment">//æ‰€ä»¥ç¬¬äºŒæ¬¡è¿”å›çš„åº”è¯¥æ˜¯ 18/3çš„ç»“æœ {value: 6, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">2</span>))  
  <span class="hljs-comment">// å‚æ•°2è¢«èµ‹å€¼ç»™äº† zï¼Œæœ€ç»ˆ x + y + z = 5 + 18 + 2 = 25ï¼Œè¿”å› {value: 25, done: true}</span>
}



{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-keyword">let</span> y = <span class="hljs-number">2</span> * (<span class="hljs-keyword">yield</span> (x + <span class="hljs-number">1</span>))   
    <span class="hljs-keyword">let</span> z = <span class="hljs-keyword">yield</span> (y / <span class="hljs-number">3</span>)
    z = <span class="hljs-number">88</span>    <span class="hljs-comment">// æ³¨æ„çœ‹è¿™é‡Œ</span>
    <span class="hljs-keyword">return</span> x + y + z
  }

  <span class="hljs-keyword">let</span> it = <span class="hljs-title function_">gen</span>(<span class="hljs-number">5</span>)

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>())   <span class="hljs-comment">// {value: 6, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">9</span>))  <span class="hljs-comment">// {value: 6, done: false}</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-title function_">next</span>(<span class="hljs-number">2</span>))  <span class="hljs-comment">// è¿™é‡Œå…¶å®ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œå‚æ•°2è¢«èµ‹å€¼ç»™äº† zï¼Œä½†æ˜¯å‡½æ•°ä½“å†…åˆç»™ z é‡æ–°èµ‹å€¼ä¸º88ï¼Œ æœ€ç»ˆ x + y + z = 5 + 18 + 88 = 111ï¼Œè¿”å› {value: 111, done: true}</span>
}
</code></pre>
<h2 data-id="heading-10">7.<strong>Generatorå‡½æ•°</strong>ä¸ Iterator æ¥å£çš„å…³ç³»</h2>
<h3 data-id="heading-11">7.1Generator å‡½æ•°çš„æ ¸å¿ƒç”¨é€”ä¹‹ä¸€æ˜¯ç®€åŒ–è¿­ä»£å™¨çš„åˆ›å»º</h3>
<ul>
<li>Generator å¯¹è±¡æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ˆå®ç°äº† <code>Symbol.iterator</code> æ–¹æ³•ï¼Œä¸”è¿”å›è‡ªèº«ï¼‰ï¼›</li>
<li>æ™®é€šè¿­ä»£å™¨éœ€è¦æ‰‹åŠ¨å®ç° <code>next()</code> æ–¹æ³•å’ŒçŠ¶æ€ç®¡ç†ï¼Œè€Œ Generator ç”¨ <code>yield</code> å³å¯è‡ªåŠ¨å®ç°è¿­ä»£é€»è¾‘ã€‚</li>
</ul>
<h4 data-id="heading-12">(1). æ‰‹åŠ¨å®ç°è¿­ä»£å™¨ï¼ˆç¹çï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨ï¼Œç”Ÿæˆ 1~3 çš„æ•°å­—</span>
<span class="hljs-keyword">const</span> iterator = {
  <span class="hljs-attr">count</span>: <span class="hljs-number">1</span>,
  <span class="hljs-title function_">next</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> &lt;= <span class="hljs-number">3</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> };
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">value</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">true</span> };
    }
  },
  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]() { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>; } <span class="hljs-comment">// å®ç°å¯è¿­ä»£åè®®</span>
};

<span class="hljs-comment">// è¿­ä»£</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> val <span class="hljs-keyword">of</span> iterator) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val); <span class="hljs-comment">// 1, 2, 3</span>
}
</code></pre>
<h4 data-id="heading-13">(2). Generator å®ç°è¿­ä»£å™¨ï¼ˆç®€æ´ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Generator è‡ªåŠ¨ç”Ÿæˆè¿­ä»£å™¨</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">numberGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
}

<span class="hljs-comment">// è¿­ä»£ï¼ˆæ”¯æŒ for...ofï¼Œå› ä¸º Generator å¯¹è±¡æ˜¯å¯è¿­ä»£çš„ï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> val <span class="hljs-keyword">of</span> <span class="hljs-title function_">numberGenerator</span>()) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val); <span class="hljs-comment">// 1, 2, 3</span>
}
</code></pre>
<h3 data-id="heading-14">7.2 Iteratorï¼ˆè¿­ä»£å™¨ï¼‰</h3>
<p><strong>JavaScriptåŸæœ‰çš„è¡¨ç¤ºé›†åˆçš„æ•°æ®ç»“æ„æœ‰æ•°ç»„(Array)å’Œå¯¹è±¡(Object),ES6åˆæ·»åŠ äº†Mapå’ŒSetã€‚è¿™æ ·å°±æœ‰äº†4ç§æ•°æ®é›†åˆï¼Œæ­¤æ—¶ä¾¿éœ€è¦****ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶æ¥å¤„ç†ä¸åŒçš„æ•°æ®ç»“æ„</strong> <strong>ã€‚</strong></p>
<p>ES6 è§„å®šï¼Œé»˜è®¤çš„ Iterator æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„Symbol.iteratorå±æ€§ï¼Œæˆ–è€…è¯´ï¼Œ<strong>ä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰Symbol.iteratorå±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯â€œå¯éå†çš„â€ï¼ˆiterableï¼‰ã€‚</strong></p>
<p><strong>Symbol.iteratorå±æ€§æœ¬èº«æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±æ˜¯å½“å‰æ•°æ®ç»“æ„é»˜è®¤çš„éå†å™¨ç”Ÿæˆå‡½æ•°ã€‚æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªéå†å™¨ã€‚</strong></p>
<p><strong>ä¼ ç»Ÿå¯¹è±¡æ²¡æœ‰åŸç”Ÿéƒ¨ç½² Iteratoræ¥å£ï¼Œä¸èƒ½ä½¿ç”¨ for...of å’Œ æ‰©å±•è¿ç®—ç¬¦ï¼Œç°åœ¨é€šè¿‡ç»™å¯¹è±¡æ·»åŠ  Symbol.iterator å±æ€§å’Œå¯¹åº”çš„éå†å™¨ç”Ÿæˆå‡½æ•°ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†</strong></p>
<h4 data-id="heading-15">Iteratorå¯¹è±¡</h4>
<ol>
<li>Iteratorå°±æ˜¯è¿™æ ·ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚<strong>ä»»ä½•æ•°æ®ç»“æ„ï¼Œä¸»è¦éƒ¨ç½²Iteratoræ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†</strong>ã€‚</li>
<li><strong>Iteratoræ¥å£ä¸»è¦ä¾›for...ofä½¿ç”¨</strong>(ES6åˆ›é€ çš„æ–°çš„éå†å‘½ä»¤),å½“ä½¿ç”¨for...ofå¾ªç¯æ—¶ï¼Œè¯¥å¾ªç¯ä¼šè‡ªåŠ¨å¯»æ‰¾Iteratoræ¥å£</li>
<li>Iteratorå¯¹è±¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ã€‚(åˆ›å»ºæ—¶æŒ‡å‘æ•°æ®ç»“æ„å¤´éƒ¨ï¼Œä¾æ¬¡è°ƒç”¨next()æ–¹æ³•åæŒ‡é’ˆä¼šç§»åŠ¨ï¼Œä¾æ¬¡æŒ‡å‘ç¬¬1ï¼Œ2ï¼Œ3...ä¸ªæˆå‘˜ï¼Œæœ€åæŒ‡å‘ç»“æŸä½ç½®)</li>
</ol>
<h4 data-id="heading-16">é»˜è®¤è¿­ä»£å™¨</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {<span class="hljs-comment">//objå…·æœ‰Symbol.iterator(å®ƒæ˜¯ä¸€ä¸ªæ–¹æ³•)ï¼Œå› æ­¤æ˜¯å¯éå†çš„</span>
  [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]:<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">next</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">value</span>:<span class="hljs-number">1</span>,
          <span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>
        }
      }
    }
  }
}
</code></pre>
<p>ES6çš„<strong>æœ‰äº›æ•°æ®ç»“æ„(æ•°ç»„)åŸç”Ÿéƒ¨ç½²äº†Symbol.iteratorå±æ€§(ç§°ä¸ºéƒ¨ç½²äº†</strong> <strong>éå†å™¨æ¥å£</strong> <strong>)ï¼Œå³ä¸ç”¨ä»»ä½•å¤„ç†å°±å¯ä»¥è¢«for...ofå¾ªç¯ã€‚å¦å¤–ä¸€äº›æ•°æ®ç»“æ„(å¯¹è±¡)æ²¡æœ‰ã€‚</strong><br/>
ä»¥ä¸‹æ•°æ®ç»“æ„åŸç”Ÿéƒ¨ç½²Iteratoræ¥å£ï¼šä¹Ÿå°±æ˜¯è¯´è¿™äº›éƒ½å¯ä»¥ä½¿ç”¨for...ofã€‚é™¤äº†è¿™äº›ï¼Œå…¶ä»–æ•°æ®ç»“æ„(å¦‚å¯¹è±¡)çš„Iteratoræ¥å£éœ€è¦è‡ªå·±åœ¨Symbol.iteratorå±æ€§ä¸Šé¢éƒ¨ç½²ï¼Œæ‰ä¼šè¢«for...oféå†ã€‚</p>
<ul>
<li>Map</li>
<li>Set</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//NodeListå¯¹è±¡//æ•°ç»„çš„é»˜è®¤è¿­ä»£å™¨ï¼š</span>
<span class="hljs-keyword">let</span> color = [<span class="hljs-string">'red'</span>,<span class="hljs-string">'yellow'</span>,<span class="hljs-string">'blue'</span>]
<span class="hljs-keyword">let</span> arrIt = colorSymbol.<span class="hljs-property">iterator</span>;<span class="hljs-comment">//è¿”å›ä¸€ä¸ªè¿­ä»£å™¨</span>
arrIt.<span class="hljs-title function_">next</span>()<span class="hljs-comment">//{value:'red',done:false}</span>
<span class="hljs-comment">//ç±»æ•°ç»„argumentsçš„é»˜è®¤è¿­ä»£å™¨ï¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>){
<span class="hljs-keyword">let</span> argsIt = argumentsSymbol.<span class="hljs-property">iterator</span>;
argsIt.<span class="hljs-title function_">next</span>()
}
<span class="hljs-comment">//ç±»æ•°ç»„domèŠ‚ç‚¹çš„é»˜è®¤è¿­ä»£å™¨ï¼š</span>
<span class="hljs-keyword">let</span> myP = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">'li'</span>);
<span class="hljs-keyword">let</span> pIt = myPSymbol.<span class="hljs-property">iterator</span>;
pIt.<span class="hljs-title function_">next</span>();
<span class="hljs-comment">//å­—ç¬¦ä¸²çš„é»˜è®¤è¿­ä»£å™¨ï¼š</span>
<span class="hljs-keyword">let</span>ã€€str = <span class="hljs-string">'dhakjda'</span>;
<span class="hljs-keyword">let</span> strIt = strSymbol.<span class="hljs-property">iterator</span>;
strIt.<span class="hljs-title function_">next</span>();
<span class="hljs-comment">//å¯¹è±¡æ²¡æœ‰é»˜è®¤(å³å†…ç½®)è¿­ä»£å™¨ï¼šobj[Symbol.iterator] is not a function</span>
</code></pre>
<h2 data-id="heading-17">8.for...of å¾ªç¯</h2>
<p>ç”±äº Generator å‡½æ•°è¿è¡Œæ—¶ç”Ÿæˆçš„æ˜¯ä¸€ä¸ª Iterator å¯¹è±¡ï¼Œå› æ­¤ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ for...of å¾ªç¯éå†ï¼Œä¸”æ­¤æ—¶æ— éœ€å†è°ƒç”¨ next() æ–¹æ³•</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œä¸€æ—¦ next() æ–¹æ³•çš„è¿”å›å¯¹è±¡çš„ done å±æ€§ä¸º trueï¼Œfor...of å¾ªç¯å°±ä¼šç»ˆæ­¢ï¼Œä¸”ä¸åŒ…å«è¯¥è¿”å›å¯¹è±¡</p>
<pre><code class="hljs language-js" lang="js">{
  <span class="hljs-keyword">function</span>* <span class="hljs-title function_">gen</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">4</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">5</span>
  }

  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> item <span class="hljs-keyword">of</span> <span class="hljs-title function_">gen</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item)
  }

  <span class="hljs-comment">// 1 2 3 4</span>
}
</code></pre>
<h2 data-id="heading-18">9.Generator çš„å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-19">9.1Â å¼‚æ­¥ç¼–ç¨‹ï¼ˆES6 æ—¶ä»£çš„æ–¹æ¡ˆï¼‰</h3>
<p><strong>Generator æ˜¯</strong> <code>async/await</code> <strong>çš„ â€œå‰èº«â€</strong> ï¼Œé€šè¿‡ <code>yield</code> æš‚åœå¼‚æ­¥æ“ä½œï¼Œ<code>next()</code> æ¢å¤æ‰§è¡Œï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±é—®é¢˜ã€‚éœ€é…åˆè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆå¦‚ <code>co</code> åº“ï¼‰ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥è¯·æ±‚</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">url</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">`æ•°æ®ï¼š<span class="hljs-subst">${url}</span>`</span>), <span class="hljs-number">1000</span>);
  });
}

<span class="hljs-comment">// Generator å‡½æ•°å°è£…å¼‚æ­¥é€»è¾‘</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">asyncGenerator</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data1 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-string">'url1'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data1); <span class="hljs-comment">// 1ç§’åè¾“å‡ºï¼šæ•°æ®ï¼šurl1</span>
  <span class="hljs-keyword">const</span> data2 = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-string">'url2'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data2); <span class="hljs-comment">// å†1ç§’åè¾“å‡ºï¼šæ•°æ®ï¼šurl2</span>
}

<span class="hljs-comment">// æ‰‹åŠ¨æ‰§è¡Œï¼ˆå®é™…ç”¨ co åº“è‡ªåŠ¨æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">asyncGenerator</span>();
gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data1</span> =&gt;</span> {
  gen.<span class="hljs-title function_">next</span>(data1).<span class="hljs-property">value</span>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data2</span> =&gt;</span> {
    gen.<span class="hljs-title function_">next</span>(data2);
  });
});
<span class="hljs-comment">//.then(data1 =&gt; {}) â†’ æ˜¯ Promise çš„å¼‚æ­¥å›è°ƒï¼Œç­‰ 1 ç§’åï¼Œå¼‚æ­¥è¯·æ±‚å®Œæˆï¼Œ</span>
<span class="hljs-comment">//Promise çš„ resolve å€¼æ˜¯ æ•°æ®ï¼šurl1ï¼Œè¿™ä¸ªå€¼ä¼šè¢«è‡ªåŠ¨ä¼ ç»™å›è°ƒå‡½æ•°çš„å½¢å‚ data1ï¼›</span>
</code></pre>
<p>æ³¨ï¼šES7 å¼•å…¥çš„ <code>async/await</code> æ˜¯ Generator + Promise çš„è¯­æ³•ç³–ï¼Œæ›´ç®€æ´æ˜“ç”¨ï¼Œç°åœ¨å·²æ›¿ä»£ Generator æˆä¸ºä¸»æµå¼‚æ­¥æ–¹æ¡ˆ</p>
<h3 data-id="heading-20">9.2 ç”Ÿæˆæ— é™åºåˆ—ï¼ˆæƒ°æ€§æ±‚å€¼ï¼‰</h3>
<p><strong>Generator æ”¯æŒ â€œæŒ‰éœ€ç”Ÿæˆâ€ æ•°æ®ï¼Œä¸ä¼šä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰æ•°æ®ï¼Œé€‚åˆå¤„ç†æ— é™åºåˆ—</strong>ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰æˆ–å¤§æ•°æ®é›†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç”Ÿæˆæ— é™æ–æ³¢é‚£å¥‘æ•°åˆ—</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> a = <span class="hljs-number">0</span>, b = <span class="hljs-number">1</span>;
  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">yield</span> a;
    [a, b] = [b, a + b];
  }
}

<span class="hljs-keyword">const</span> fib = <span class="hljs-title function_">fibonacci</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fib.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 0</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fib.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fib.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 1</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fib.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(fib.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>); <span class="hljs-comment">// 3</span>
<span class="hljs-comment">// æŒ‰éœ€è·å–ï¼Œä¸ä¼šå ç”¨å¤§é‡å†…å­˜</span>
</code></pre>
<h3 data-id="heading-21">9.3 æ§åˆ¶æµç®¡ç†</h3>
<p><strong>é€šè¿‡ <code>yield</code> å¯ä»¥çµæ´»æ§åˆ¶å‡½æ•°æ‰§è¡Œé¡ºåºï¼Œé€‚åˆå¤æ‚çš„æµç¨‹æ§åˆ¶</strong>ï¼ˆå¦‚åˆ†æ­¥æ‰§è¡Œã€æ¡ä»¶åˆ†æ”¯ï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">taskFlow</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡1'</span>);
  <span class="hljs-keyword">yield</span>; <span class="hljs-comment">// æš‚åœï¼Œç­‰å¾…å¤–éƒ¨è§¦å‘ä¸‹ä¸€æ­¥</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡2'</span>);
  <span class="hljs-keyword">const</span> flag = <span class="hljs-keyword">yield</span> <span class="hljs-string">'æ˜¯å¦æ‰§è¡Œä»»åŠ¡3ï¼Ÿ'</span>; <span class="hljs-comment">// äº§å‡ºè¯¢é—®ï¼Œæ¥æ”¶å¤–éƒ¨å†³ç­–</span>
  <span class="hljs-keyword">if</span> (flag) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡3æ‰§è¡Œ'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä»»åŠ¡3è·³è¿‡'</span>);
  }
}

<span class="hljs-keyword">const</span> flow = <span class="hljs-title function_">taskFlow</span>();
flow.<span class="hljs-title function_">next</span>(); <span class="hljs-comment">// ä»»åŠ¡1 â†’ { value: undefined, done: false }</span>
<span class="hljs-keyword">const</span> res = flow.<span class="hljs-title function_">next</span>(); <span class="hljs-comment">// ä»»åŠ¡2 â†’ { value: 'æ˜¯å¦æ‰§è¡Œä»»åŠ¡3ï¼Ÿ', done: false }</span>
flow.<span class="hljs-title function_">next</span>(<span class="hljs-literal">true</span>); <span class="hljs-comment">// ä»»åŠ¡3æ‰§è¡Œ â†’ { value: undefined, done: true }</span>
</code></pre>
<h3 data-id="heading-22">æœ€å</h3>
<p>è¿™æ˜¯ã€Š<a href="https://juejin.cn/column/7355759709166845963" target="_blank" title="https://juejin.cn/column/7355759709166845963">JavaScriptç³»åˆ—</a>ã€‹ç¬¬8ç¯‡ï¼Œå°†æŒç»­æ›´æ–°ã€‚</p>
<p>å°ä¼™ä¼´å¦‚æœå–œæ¬¢æˆ‘çš„åˆ†äº«ï¼Œå¯ä»¥åŠ¨åŠ¨æ‚¨å‘è´¢çš„æ‰‹å…³æ³¨ä¸‹æˆ‘ï¼Œæˆ‘ä¼šæŒç»­æ›´æ–°çš„ï¼ï¼ï¼<br/>
æ‚¨å¯¹æˆ‘çš„å…³æ³¨ã€ç‚¹èµå’Œæ”¶è—ï¼Œæ˜¯å¯¹æˆ‘æœ€å¤§çš„æ”¯æŒï¼æ¬¢è¿å…³æ³¨ã€è¯„è®ºã€è®¨è®ºå’ŒæŒ‡æ­£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯ç»„ä»¶ï¼ˆPer-Componentï¼‰ä¸é›†ä¸­å¼ï¼ˆCentralizedï¼‰i18n]]></title>    <link>https://juejin.cn/post/7594616268782665755</link>    <guid>https://juejin.cn/post/7594616268782665755</guid>    <pubDate>2026-01-13T10:20:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594616268782665755" data-draft-id="7594616268782616603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯ç»„ä»¶ï¼ˆPer-Componentï¼‰ä¸é›†ä¸­å¼ï¼ˆCentralizedï¼‰i18n"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-13T10:20:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·638799477305"/> <meta itemprop="url" content="https://juejin.cn/user/2763505844628169"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯ç»„ä»¶ï¼ˆPer-Componentï¼‰ä¸é›†ä¸­å¼ï¼ˆCentralizedï¼‰i18n
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2763505844628169/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·638799477305
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:20:23.000Z" title="Tue Jan 13 2026 10:20:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¯ç»„ä»¶ï¼ˆper-componentï¼‰æ–¹æ³•å¹¶éæ–°æ¦‚å¿µã€‚ä¾‹å¦‚ï¼Œåœ¨ Vue ç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ<code>vue-i18n</code> æ”¯æŒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvue-i18n.intlify.dev%2Fguide%2Fadvanced%2Fsfc.html" target="_blank" title="https://vue-i18n.intlify.dev/guide/advanced/sfc.html" ref="nofollow noopener noreferrer">SFC i18nï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰</a>ã€‚Nuxt ä¹Ÿæä¾› <a href="https://link.juejin.cn?target=https%3A%2F%2Fi18n.nuxtjs.org%2Fdocs%2Fguide%2Fper-component-translations" target="_blank" title="https://i18n.nuxtjs.org/docs/guide/per-component-translations" ref="nofollow noopener noreferrer">æŒ‰ç»„ä»¶ç¿»è¯‘</a>ï¼ŒAngular é€šè¿‡å…¶ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv17.angular.io%2Fguide%2Ffeature-modules" target="_blank" title="https://v17.angular.io/guide/feature-modules" ref="nofollow noopener noreferrer">Feature Modules</a> é‡‡ç”¨ç±»ä¼¼çš„æ¨¡å¼ã€‚</p>
<p>å³ä½¿åœ¨ Flutter åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸èƒ½å‘ç°è¿™æ ·çš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">lib/
â””â”€â”€ features/
    â””â”€â”€ login/
        â”œâ”€â”€ login_screen.dart
        â””â”€â”€ login_screen.i18n.dart  <span class="hljs-comment"># &lt;- ç¿»è¯‘å­˜æ”¾åœ¨è¿™é‡Œ</span>
</code></pre>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:i18n_extension/i18n_extension.dart'</span>;

<span class="hljs-keyword">extension</span> Localization <span class="hljs-keyword">on</span> <span class="hljs-built_in">String</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-keyword">var</span> _t = Translations.byText(<span class="hljs-string">"en"</span>) +
      {
        <span class="hljs-string">"Hello"</span>: {
          <span class="hljs-string">"en"</span>: <span class="hljs-string">"Hello"</span>,
          <span class="hljs-string">"fr"</span>: <span class="hljs-string">"Bonjour"</span>,
        },
      };

  <span class="hljs-built_in">String</span> <span class="hljs-keyword">get</span> i18n =&gt; localize(<span class="hljs-keyword">this</span>, _t);
}
</code></pre>
<p>ç„¶è€Œåœ¨ React é¢†åŸŸï¼Œæˆ‘ä»¬ä¸»è¦çœ‹åˆ°ä¸åŒçš„åšæ³•ï¼Œæˆ‘ä¼šå°†å®ƒä»¬åˆ†ä¸ºä¸‰ç±»ï¼š</p>

  
<p><strong>é›†ä¸­å¼æ–¹æ³•</strong>ï¼ˆi18nextã€next-intlã€react-intlã€linguiï¼‰</p>
<ul>
<li>ï¼ˆæ— å‘½åç©ºé—´ï¼‰å°†å†…å®¹è§†ä¸ºå•ä¸€æ¥æºè¿›è¡Œæ£€ç´¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“åº”ç”¨åŠ è½½æ—¶ï¼Œä¼šä»æ‰€æœ‰é¡µé¢åŠ è½½å†…å®¹ã€‚</li>
</ul>
<p><strong>ç»†ç²’åº¦æ–¹æ³•</strong> (intlayer, inlang)</p>
<ul>
<li>æŒ‰é”®æˆ–æŒ‰ç»„ä»¶å¯¹å†…å®¹æ£€ç´¢è¿›è¡Œç»†åŒ–ã€‚</li>
</ul>
<blockquote>
<p>åœ¨æœ¬åšæ–‡ä¸­ï¼Œæˆ‘ä¸ä¼šä¸“æ³¨äºåŸºäºç¼–è¯‘å™¨çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘å·²ç»åœ¨è¿™é‡Œè¦†ç›–è¿‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fintlayer.org%2Fzh%2Fblog%2Fper-component-vs-centralized-i18n" target="_blank" title="https://intlayer.org/zh/blog/per-component-vs-centralized-i18n" ref="nofollow noopener noreferrer">Compiler vs Declarative i18n</a>.
æ³¨æ„ï¼ŒåŸºäºç¼–è¯‘å™¨çš„ i18nï¼ˆä¾‹å¦‚ Linguiï¼‰åªæ˜¯è‡ªåŠ¨åŒ–äº†å†…å®¹çš„æå–å’ŒåŠ è½½ã€‚åœ¨åº•å±‚ï¼Œå®ƒä»¬é€šå¸¸ä¸å…¶ä»–æ–¹æ³•å…±äº«ç›¸åŒçš„é™åˆ¶ã€‚</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ï¼Œä½ è¶Šç»†åŒ–å†…å®¹çš„æ£€ç´¢æ–¹å¼ï¼Œå°±è¶Šæœ‰å¯èƒ½å°†é¢å¤–çš„ state å’Œé€»è¾‘æ’å…¥åˆ°ç»„ä»¶ä¸­ã€‚</p>
</blockquote>
<p>ç»†ç²’åº¦æ–¹æ³•æ¯”é›†ä¸­å¼æ–¹æ³•æ›´çµæ´»ï¼Œä½†è¿™é€šå¸¸æ˜¯ä¸€ç§æƒè¡¡ã€‚å³ä½¿è¿™äº› libraries å®£ç§°æ”¯æŒ "tree shaking"ï¼Œåœ¨å®é™…ä¸­ï¼Œä½ é€šå¸¸ä»ä¼šä»¥æ¯ç§è¯­è¨€åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p>
<p>æ‰€ä»¥ï¼Œæ¦‚æ‹¬æ¥è¯´ï¼Œå†³ç­–å¤§è‡´å¯ä»¥åˆ†ä¸ºï¼š</p>
<ul>
<li>å¦‚æœä½ çš„åº”ç”¨é¡µé¢æ•°é‡å¤šäºè¯­è¨€æ•°é‡ï¼Œåº”ä¼˜å…ˆé‡‡ç”¨ç»†ç²’åº¦æ–¹æ³•ã€‚</li>
<li>å¦‚æœè¯­è¨€æ•°é‡å¤šäºé¡µé¢æ•°é‡ï¼Œåˆ™åº”å€¾å‘äºé›†ä¸­å¼æ–¹æ³•ã€‚</li>
</ul>
<p>å½“ç„¶ï¼Œlibrary çš„ä½œè€…ä»¬ä¹Ÿæ„è¯†åˆ°è¿™äº›é™åˆ¶å¹¶æä¾›äº†è§£å†³æ–¹æ¡ˆã€‚
å…¶ä¸­åŒ…æ‹¬ï¼šå°†å†…å®¹æ‹†åˆ†ä¸ºå‘½åç©ºé—´ã€åŠ¨æ€åŠ è½½ JSON æ–‡ä»¶ï¼ˆ<code>await import()</code>ï¼‰ï¼Œæˆ–åœ¨æ„å»ºæ—¶å‰”é™¤å†…å®¹ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œä½ åº”è¯¥çŸ¥é“ï¼Œå½“ä½ åŠ¨æ€åŠ è½½å†…å®¹æ—¶ï¼Œä¼šå‘æœåŠ¡å™¨å¼•å…¥é¢å¤–çš„è¯·æ±‚ã€‚æ¯å¤šä¸€ä¸ª <code>useState</code> æˆ– hookï¼Œå°±æ„å‘³ç€ä¸€æ¬¡é¢å¤–çš„æœåŠ¡å™¨è¯·æ±‚ã€‚</p>
<blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸€ç‚¹ï¼ŒIntlayer å»ºè®®å°†å¤šä¸ªå†…å®¹å®šä¹‰åˆ†ç»„åˆ°åŒä¸€ä¸ªé”®ä¸‹ï¼ŒIntlayer ä¼šåˆå¹¶è¿™äº›å†…å®¹ã€‚</p>
</blockquote>
<p>ä½†ç»¼è§‚è¿™äº›è§£å†³æ–¹æ¡ˆï¼Œæœ€æµè¡Œçš„æ–¹æ³•æ˜¾ç„¶æ˜¯é›†ä¸­å¼çš„ã€‚</p>
<h3 data-id="heading-0">é‚£ä¹ˆä¸ºä»€ä¹ˆé›†ä¸­å¼æ–¹æ³•å¦‚æ­¤å—æ¬¢è¿ï¼Ÿ</h3>
<ul>
<li>é¦–å…ˆï¼Œi18next æ˜¯ç¬¬ä¸€ä¸ªè¢«å¹¿æ³›é‡‡ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå…¶ç†å¿µå— PHP å’Œ Java æ¶æ„ï¼ˆMVCï¼‰çš„å¯å‘ï¼Œä¾èµ–äºä¸¥æ ¼çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆå°†å†…å®¹ä¸ä»£ç åˆ†ç¦»ï¼‰ã€‚å®ƒäº 2011 å¹´å‡ºç°ï¼Œåœ¨å‘åŸºäºç»„ä»¶çš„æ¶æ„ï¼ˆå¦‚ Reactï¼‰å¤§è§„æ¨¡è½¬å˜ä¹‹å‰å°±ç¡®ç«‹äº†å…¶æ ‡å‡†ã€‚</li>
<li>æ­¤å¤–ï¼Œä¸€æ—¦æŸä¸ªåº“è¢«å¹¿æ³›é‡‡ç”¨ï¼Œå°±å¾ˆéš¾å°†ç”Ÿæ€ç³»ç»Ÿè½¬å‘å…¶ä»–æ¨¡å¼ã€‚</li>
<li>åœ¨ Crowdinã€Phrase æˆ– Localized ç­‰ç¿»è¯‘ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨é›†ä¸­å¼æ–¹æ³•ä¹Ÿæ›´ä¸ºæ–¹ä¾¿ã€‚</li>
<li>æŒ‰ç»„ä»¶ï¼ˆper-componentï¼‰æ–¹æ³•èƒŒåçš„é€»è¾‘æ¯”é›†ä¸­å¼æ›´å¤æ‚ï¼Œå¼€å‘éœ€è¦æ›´å¤šæ—¶é—´ï¼Œå°¤å…¶æ˜¯åœ¨éœ€è¦è§£å†³è¯¸å¦‚è¯†åˆ«å†…å®¹ä½ç½®ç­‰é—®é¢˜æ—¶ã€‚</li>
</ul>
<h3 data-id="heading-1">å¥½çš„ï¼Œä½†ä¸ºä»€ä¹ˆä¸ç›´æ¥åšæŒé›†ä¸­å¼æ–¹æ³•ï¼Ÿ</h3>
<p>è®©æˆ‘å‘Šè¯‰ä½ è¿™å¯¹ä½ çš„åº”ç”¨å¯èƒ½ä¼šå¸¦æ¥å“ªäº›é—®é¢˜ï¼š</p>
<ul>
<li><strong>æœªä½¿ç”¨çš„æ•°æ®ï¼š</strong>
å½“ä¸€ä¸ªé¡µé¢åŠ è½½æ—¶ï¼Œä½ é€šå¸¸ä¼šåŠ è½½æ¥è‡ªæ‰€æœ‰å…¶ä»–é¡µé¢çš„å†…å®¹ã€‚ï¼ˆåœ¨ä¸€ä¸ª 10 é¡µçš„åº”ç”¨ä¸­ï¼Œé‚£å°±æ˜¯ 90% æœªä½¿ç”¨çš„å†…å®¹è¢«åŠ è½½ï¼‰ã€‚ä½ æ‡’åŠ è½½ä¸€ä¸ª modalï¼Ÿi18n åº“å¹¶ä¸åœ¨æ„ï¼Œå®ƒåæ­£ä¼šå…ˆåŠ è½½è¿™äº›å­—ç¬¦ä¸²ã€‚</li>
<li><strong>æ€§èƒ½ï¼š</strong>
æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ï¼Œä½ çš„æ¯ä¸ªç»„ä»¶éƒ½ä¼šè¢«ä¸€ä¸ªå·¨å¤§çš„ JSON payload è¿›è¡Œ hydrateï¼Œè¿™ä¼šéšç€åº”ç”¨å¢é•¿å½±å“å…¶å“åº”æ€§ã€‚</li>
<li><strong>ç»´æŠ¤ï¼š</strong>
ç»´æŠ¤å¤§å‹ JSON æ–‡ä»¶å¾ˆç—›è‹¦ã€‚ä½ å¿…é¡»åœ¨æ–‡ä»¶ä¹‹é—´æ¥å›è·³è½¬ä»¥æ’å…¥ç¿»è¯‘ï¼Œç¡®ä¿æ²¡æœ‰ç¿»è¯‘ç¼ºå¤±ä¸”æ²¡æœ‰å­¤ç«‹çš„ key ç•™ä¸‹ã€‚</li>
<li><strong>è®¾è®¡ç³»ç»Ÿï¼š</strong>
è¿™ä¼šå¯¼è‡´ä¸è®¾è®¡ç³»ç»Ÿä¸å…¼å®¹ï¼ˆä¾‹å¦‚ï¼Œ<code>LoginForm</code> ç»„ä»¶ï¼‰ï¼Œå¹¶é™åˆ¶åœ¨ä¸åŒåº”ç”¨ä¹‹é—´å¤åˆ¶ç»„ä»¶çš„èƒ½åŠ›ã€‚</li>
</ul>
<p><strong>â€œä½†æˆ‘ä»¬å‘æ˜äº† Namespacesï¼â€</strong></p>
<p>å½“ç„¶ï¼Œè¿™ç¡®å®æ˜¯ä¸€ä¸ªå·¨å¤§çš„è¿›æ­¥ã€‚ä¸‹é¢å¯¹æ¯”ä¸€ä¸‹åœ¨ Vite + React + React Router v7 + Intlayer é…ç½®ä¸‹ä¸» bundle å¤§å°çš„å·®å¼‚ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿäº†ä¸€ä¸ª 20 é¡µçš„åº”ç”¨ã€‚</p>
<p>ç¬¬ä¸€ä¸ªç¤ºä¾‹æ²¡æœ‰ä¸ºæ¯ä¸ª locale è¿›è¡Œæ‡’åŠ è½½ç¿»è¯‘ï¼Œä¹Ÿæ²¡æœ‰è¿›è¡Œå‘½åç©ºé—´æ‹†åˆ†ã€‚ç¬¬äºŒä¸ªç¤ºä¾‹åˆ™åŒ…å«å†…å®¹æ¸…ç†ï¼ˆpurgingï¼‰å’Œç¿»è¯‘çš„åŠ¨æ€åŠ è½½ã€‚</p>













<table><thead><tr><th>å·²ä¼˜åŒ–çš„ bundle</th><th>æœªä¼˜åŒ–çš„ bundle</th></tr></thead><tbody><tr><td><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ea7fbb13e324b0abf7cb4d3ccb680d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NjM4Nzk5NDc3MzA1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768905342&amp;x-signature=y9RjMEVLreUtFhm4uFPb6BbD%2B08%3D" alt="bundle_no_optimization.png" loading="lazy"/></td><td/></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03d44c4391354f37aaec52ed88f121e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NjM4Nzk5NDc3MzA1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768905342&amp;x-signature=aC4c83OlWnIgNP%2FP9u9si9aAgQg%3D" alt="bundle.png" loading="lazy"/></p>
<p>å› æ­¤ï¼Œå¤šäºäº† namespacesï¼Œæˆ‘ä»¬å°†ç»“æ„ä»ä»¥ä¸‹å½¢å¼è¿ç§»ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locale/
â”œâ”€â”€ en.json
â”œâ”€â”€ fr.json
â””â”€â”€ es.json
</code></pre>
<p>åˆ°è¿™ä¸ªç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locale/
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ common.json
â”‚   â”œâ”€â”€ navbar.json
â”‚   â”œâ”€â”€ footer.json
â”‚   â”œâ”€â”€ home.json
â”‚   â””â”€â”€ about.json
â”œâ”€â”€ fr/
â”‚   â””â”€â”€ ...
â””â”€â”€ es/
    â””â”€â”€ ...

</code></pre>
<p>ç°åœ¨ä½ å¿…é¡»ç²¾ç»†åœ°ç®¡ç†åº”ç”¨çš„å“ªäº›å†…å®¹åº”è¯¥è¢«åŠ è½½ï¼Œä»¥åŠåœ¨ä½•å¤„åŠ è½½å®ƒä»¬ã€‚æ€»ä¹‹ï¼Œç”±äºå¤æ‚æ€§ï¼Œç»å¤§å¤šæ•°é¡¹ç›®éƒ½ä¼šè·³è¿‡è¿™ä¸€æ­¥ï¼ˆä¾‹å¦‚å‚è§ [<a href="https://link.juejin.cn?target=url" target="_blank" title="url" ref="nofollow noopener noreferrer">next-i18next</a> æŒ‡å—](<a href="https://link.juejin.cn?target=https%3A%2F%2Fintlayer.org%2Fzh%2Fblog%2Fnextjs-internationalization-using-next-i18next" target="_blank" title="https://intlayer.org/zh/blog/nextjs-internationalization-using-next-i18next" ref="nofollow noopener noreferrer">intlayer.org/zh/blog/nexâ€¦</a>) æ¥äº†è§£ä»…ä»…éµå¾ªè‰¯å¥½å®è·µä¹Ÿä¼šå¸¦æ¥å“ªäº›æŒ‘æˆ˜ï¼‰ã€‚å› æ­¤ï¼Œè¿™äº›é¡¹ç›®æœ€ç»ˆä¼šé‡åˆ°å‰é¢è§£é‡Šçš„åºå¤§ JSON åŠ è½½é—®é¢˜ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼Œè¿™ä¸ªé—®é¢˜å¹¶é i18next æ‰€ç‰¹æœ‰ï¼Œè€Œæ˜¯ä¸Šè¿°æ‰€æœ‰é›†ä¸­å¼æ–¹æ³•å…±æœ‰çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>ç„¶è€Œï¼Œæˆ‘æƒ³æé†’ä½ ï¼Œå¹¶éæ‰€æœ‰ç»†ç²’åº¦æ–¹æ³•éƒ½èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œ<code>vue-i18n SFC</code> æˆ– <code>inlang</code> çš„åšæ³•å¹¶ä¸ä¼šæœ¬è´¨ä¸Šä¸ºæ¯ä¸ªè¯­è¨€ç¯å¢ƒæŒ‰éœ€æ‡’åŠ è½½ç¿»è¯‘ï¼Œå› æ­¤ä½ åªæ˜¯å°†æ†ç»‘åŒ…å¤§å°çš„é—®é¢˜æ¢æˆäº†å¦ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>æ­¤å¤–ï¼Œå¦‚æœæ²¡æœ‰é€‚å½“çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå°±æ›´éš¾å°†ç¿»è¯‘å†…å®¹æå–å¹¶æä¾›ç»™è¯‘è€…è¿›è¡Œå®¡æ ¸ã€‚</p>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fintlayer.org%2Fzh" target="_blank" title="https://intlayer.org/zh" ref="nofollow noopener noreferrer">Intlayer</a> çš„æŒ‰ç»„ä»¶æ–¹æ³•å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜</h3>
<p>Intlayer é€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤æ¥å¤„ç†ï¼š</p>
<ol>
<li><strong>å£°æ˜ï¼š</strong> åœ¨ä»£ç åº“çš„ä»»ä½•ä½ç½®ä½¿ç”¨ <code>*.content.{ts|jsx|cjs|json|json5|...}</code> æ–‡ä»¶å£°æ˜ä½ çš„å†…å®¹ã€‚è¿™æ—¢ç¡®ä¿äº†å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œåˆä¿æŒå†…å®¹ä¸ç»„ä»¶åŒå¤„ä¸€å¤„ã€‚å†…å®¹æ–‡ä»¶å¯ä»¥æ˜¯é’ˆå¯¹å•ä¸€è¯­è¨€çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šè¯­è¨€çš„ã€‚</li>
<li><strong>Processing:</strong> Intlayer åœ¨æ„å»ºæ­¥éª¤ä¸­è¿è¡Œï¼Œç”¨äºå¤„ç† JS é€»è¾‘ã€å¤„ç†ç¼ºå¤±çš„ç¿»è¯‘å›é€€ã€ç”Ÿæˆ TypeScript ç±»å‹ã€ç®¡ç†é‡å¤å†…å®¹ã€ä»ä½ çš„ CMS è·å–å†…å®¹ï¼Œç­‰ç­‰ã€‚</li>
<li><strong>Purging:</strong> å½“ä½ çš„åº”ç”¨æ„å»ºæ—¶ï¼ŒIntlayer ä¼šæ¸…é™¤æœªä½¿ç”¨çš„å†…å®¹ï¼ˆæœ‰ç‚¹åƒ Tailwind ç®¡ç†ä½ çš„ç±»çš„æ–¹å¼ï¼‰ï¼Œé€šè¿‡å¦‚ä¸‹æ–¹å¼æ›¿æ¢å†…å®¹ï¼š</li>
</ol>
<p><strong>Declaration:</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// src/MyComponent.tsx</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> content = <span class="hljs-title function_">useIntlayer</span>(<span class="hljs-string">"my-key"</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{content.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
};
</code></pre>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// src/myComponent.content.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> {
  <span class="hljs-attr">key</span>: <span class="hljs-string">"my-key"</span>,
  <span class="hljs-attr">content</span>: <span class="hljs-title function_">t</span>({
    <span class="hljs-attr">zh</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"æˆ‘çš„æ ‡é¢˜"</span> },
    <span class="hljs-attr">en</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"My title"</span> },
    <span class="hljs-attr">fr</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"Mon titre"</span> }
  })
}

</code></pre>
<p><strong>Processing:</strong> Intlayer builds the dictionary based on the <code>.content</code> file and generates:</p>
<pre><code class="hljs language-json5" lang="json5">// .intlayer/dynamic_dictionary/zh/my-key.jsonï¼ˆç¿»è¯‘åçš„ JSON æ–‡ä»¶ç¤ºä¾‹ï¼‰
{
  "key": "my-key",
  "content": { "title": "æˆ‘çš„æ ‡é¢˜" },
}
</code></pre>
<p><strong>æ›¿æ¢ï¼š</strong> Intlayer åœ¨åº”ç”¨æ„å»ºæœŸé—´è½¬æ¢ä½ çš„ç»„ä»¶ã€‚</p>
<p><strong>- é™æ€å¯¼å…¥æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// åœ¨ç±» JSX è¯­æ³•ä¸­çš„ç»„ä»¶è¡¨ç¤º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> content = <span class="hljs-title function_">useDictionary</span>({
    <span class="hljs-attr">key</span>: <span class="hljs-string">"my-key"</span>,
    <span class="hljs-attr">content</span>: {
      <span class="hljs-attr">nodeType</span>: <span class="hljs-string">"translation"</span>,
      <span class="hljs-attr">translation</span>: {
        <span class="hljs-attr">zh</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"æˆ‘çš„æ ‡é¢˜"</span> },
        <span class="hljs-attr">en</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"My title"</span> },
        <span class="hljs-attr">fr</span>: { <span class="hljs-attr">title</span>: <span class="hljs-string">"Mon titre"</span> },
      },
    },
  });

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{content.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
};
</code></pre>
<p><strong>- åŠ¨æ€å¯¼å…¥æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// åœ¨ç±» JSX è¯­æ³•ä¸­çš„ç»„ä»¶è¡¨ç¤º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">MyComponent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> content = <span class="hljs-title function_">useDictionaryAsync</span>({
    <span class="hljs-attr">en</span>: <span class="hljs-function">() =&gt;</span>
      <span class="hljs-keyword">import</span>(<span class="hljs-string">".intlayer/dynamic_dictionary/en/my-key.json"</span>, {
        <span class="hljs-attr">with</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">"json"</span> },
      }).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mod</span>) =&gt;</span> mod.<span class="hljs-property">default</span>),
    <span class="hljs-comment">// Same for other languages</span>
  });

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{content.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;
};
</code></pre>
<blockquote>
<p><code>useDictionaryAsync</code> ä½¿ç”¨ç±»ä¼¼ Suspense çš„æœºåˆ¶ï¼Œä»…åœ¨éœ€è¦æ—¶åŠ è½½æœ¬åœ°åŒ–çš„ JSONã€‚</p>
</blockquote>
<p><strong>æ­¤æŒ‰ç»„ä»¶æ–¹æ³•çš„ä¸»è¦ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>
<p>å°†å†…å®¹å£°æ˜ä¸ç»„ä»¶æ”¾åœ¨ä¸€èµ·å¯ä»¥æé«˜å¯ç»´æŠ¤æ€§ï¼ˆä¾‹å¦‚ï¼šå°†ç»„ä»¶ç§»åŠ¨åˆ°å¦ä¸€ä¸ªåº”ç”¨æˆ– design systemã€‚åˆ é™¤ç»„ä»¶æ–‡ä»¶å¤¹æ—¶ä¹Ÿä¼šåŒæ—¶ç§»é™¤ç›¸å…³å†…å®¹ï¼Œå°±åƒä½ é€šå¸¸å¯¹ <code>.test</code>ã€<code>.stories</code> æ‰€åšçš„é‚£æ ·ï¼‰</p>
</li>
<li>
<p>ä»¥ç»„ä»¶ä¸ºå•ä½çš„æ–¹æ³•å¯ä»¥é˜²æ­¢ AI ä»£ç†éœ€è¦åœ¨ä½ æ‰€æœ‰ä¸åŒçš„æ–‡ä»¶ä¹‹é—´æ¥å›è·³è½¬ã€‚å®ƒå°†æ‰€æœ‰ç¿»è¯‘é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œé™åˆ¶äº†ä»»åŠ¡çš„å¤æ‚æ€§ä»¥åŠä½¿ç”¨çš„ tokens æ•°é‡ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">é™åˆ¶</h3>
<p>å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•æœ‰å…¶æƒè¡¡ï¼š</p>
<ul>
<li>æ›´éš¾ä¸å…¶ä»– l10n ç³»ç»Ÿå’Œé¢å¤–çš„å·¥å…·é“¾å¯¹æ¥ã€‚</li>
<li>ä¼šäº§ç”Ÿé”å®šï¼ˆlock-inï¼‰é—®é¢˜ï¼ˆè¿™åœ¨ä»»ä½• i18n è§£å†³æ–¹æ¡ˆä¸­åŸºæœ¬éƒ½å­˜åœ¨ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç‰¹å®šçš„è¯­æ³•ï¼‰ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ Intlayer è¯•å›¾ä¸º i18n æä¾›å®Œæ•´å·¥å…·é›†ï¼ˆ100% å…è´¹ä¸” OSSï¼‰çš„åŸå› ï¼ŒåŒ…æ‹¬ä½¿ç”¨ä½ è‡ªå·±çš„ AI Provider å’Œ API å¯†é’¥è¿›è¡Œ AI ç¿»è¯‘çš„åŠŸèƒ½ã€‚Intlayer è¿˜æä¾›ç”¨äºåŒæ­¥ä½ çš„ JSON çš„å·¥å…·ï¼Œç±»ä¼¼äº ICU / vue-i18n / i18next çš„æ¶ˆæ¯æ ¼å¼åŒ–å™¨ï¼Œç”¨ä»¥å°†å†…å®¹æ˜ å°„åˆ°å®ƒä»¬çš„ç‰¹å®šæ ¼å¼ã€‚</p>
<p>æˆ‘å¾ˆä¹æ„å¬åˆ°ä½ å¯¹å®ƒçš„çœŸå®åé¦ˆã€‚ä½ çš„åå¯¹æ„è§çœŸçš„æœ‰åŠ©äºæ‰“é€ ä¸€ä¸ªæ›´å¥½çš„äº§å“ã€‚è¿™æ˜¯ä¸æ˜¯æœ‰ç‚¹è¿‡åº¦è®¾è®¡äº†ï¼Ÿè¿˜æ˜¯å®ƒä¼šæˆä¸ºä¸‹ä¸€ä¸ª Tailwindï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[useEffect ç©ºä¾èµ– + å®šæ—¶å™¨ = é—­åŒ…é™·é˜±ï¼Ÿcount æ°¸è¿œåœåœ¨ 1 çš„å‘æˆ‘è¸©é€äº†]]></title>    <link>https://juejin.cn/post/7594578555352956979</link>    <guid>https://juejin.cn/post/7594578555352956979</guid>    <pubDate>2026-01-13T10:55:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594578555352956979" data-draft-id="7594681318827835442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="useEffect ç©ºä¾èµ– + å®šæ—¶å™¨ = é—­åŒ…é™·é˜±ï¼Ÿcount æ°¸è¿œåœåœ¨ 1 çš„å‘æˆ‘è¸©é€äº†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T10:55:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…¨æ ˆæ‰“æ€ªæ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/2269028453720813"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            useEffect ç©ºä¾èµ– + å®šæ—¶å™¨ = é—­åŒ…é™·é˜±ï¼Ÿcount æ°¸è¿œåœåœ¨ 1 çš„å‘æˆ‘è¸©é€äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2269028453720813/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…¨æ ˆæ‰“æ€ªæ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:55:15.000Z" title="Tue Jan 13 2026 10:55:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™ React æ—¶ï¼Œä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡ã€Œå®šæ—¶å™¨é‡Œçš„ state æ°¸è¿œä¸æ›´æ–°ã€çš„è¯¡å¼‚æƒ…å†µï¼Ÿæ¯”å¦‚æ˜æ˜å†™äº†<code>setCount(count + 1)</code>ï¼Œé¡µé¢ä¸Šçš„<code>count</code>å´æ°¸è¿œåœåœ¨ 1â€”â€” è¿™å…¶å®æ˜¯ ** é—­åŒ…é™·é˜±ï¼ˆStale Closureï¼‰** åœ¨æé¬¼ã€‚</p>
<p>ä»Šå¤©ç”¨ä¸€ä¸ªæç®€ç¤ºä¾‹ï¼Œæ‹†è§£è¿™ä¸ªå‘çš„æœ¬è´¨ï¼Œå†ç»™ä½  2 ä¸ªä¸€åŠ³æ°¸é€¸çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-0">ä¸€ã€å…ˆçœ‹å¤ç°ï¼šcount ä¸ºä»€ä¹ˆæ°¸è¿œåœåœ¨ 1ï¼Ÿ</h4>
<p>å…ˆçœ‹è¿™æ®µ â€œçœ‹ä¼¼æ²¡é—®é¢˜â€ çš„ä»£ç ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98744674cf6a445f8a2a54b8d7f8199d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI5omT5oCq5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768906515&amp;x-signature=IYM9DWxbFjJx098vRNn%2FLFhUXSc%3D" alt="carbon.png" loading="lazy"/></p>
<p><strong>è¿è¡Œç»“æœ</strong>ï¼šé¡µé¢ä¸Šçš„<code>count</code>ä» 0 å˜æˆ 1 åï¼Œå°±å†ä¹Ÿä¸æ¶¨äº†ã€‚</p>
<h4 data-id="heading-1">äºŒã€æ ¸å¿ƒåŸå› ï¼šé—­åŒ… â€œå®šæ ¼â€ äº†åˆå§‹ state</h4>
<p>é—®é¢˜å‡ºåœ¨ 2 ä¸ªå…³é”®ç‚¹çš„å åŠ ï¼š</p>
<ol>
<li><strong>useEffect çš„ç©ºä¾èµ–<code>[]</code></strong> ï¼šç©ºä¾èµ–æ„å‘³ç€<code>useEffect</code><strong>åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ 1 æ¬¡</strong>ï¼Œåç»­ç»„ä»¶æ›´æ–°ä¸ä¼šé‡æ–°è¿è¡Œè¿™ä¸ª effectã€‚</li>
<li><strong>é—­åŒ…æ•è·äº† â€œå¿«ç…§â€ å€¼</strong>ï¼š<code>useEffect</code>æ‰§è¡Œæ—¶ï¼Œå†…éƒ¨çš„<code>setInterval</code>å‡½æ•°å½¢æˆäº†é—­åŒ… â€”â€” å®ƒ â€œæŠ“ä½â€ äº†å½“æ—¶çš„<code>count</code>ï¼ˆå€¼ä¸º 0ï¼‰ã€‚åç»­<code>count</code>è™½ç„¶è¢«æ›´æ–°ï¼Œä½†å› ä¸º<code>useEffect</code>æ²¡é‡æ–°æ‰§è¡Œï¼Œè¿™ä¸ªé—­åŒ…<strong>æ°¸è¿œæ‹¿ç€åˆå§‹å€¼ 0</strong>ï¼Œæ‰€ä»¥<code>setCount(count + 1)</code>æ°¸è¿œæ˜¯<code>0 + 1 = 1</code>ã€‚</li>
</ol>
<h4 data-id="heading-2">ä¸‰ã€2 ä¸ªè§£å†³æ–¹æ¡ˆï¼šä»æ ¹æºé¿å¼€é—­åŒ…é™·é˜±</h4>
<p>é’ˆå¯¹è¿™ä¸ªåœºæ™¯ï¼Œæ¨è 2 ç§æ—¢ç®€å•åˆå®‰å…¨çš„å†™æ³•ï¼š</p>
<h5 data-id="heading-3">æ–¹æ¡ˆ 1ï¼šå‡½æ•°å¼æ›´æ–°ï¼ˆæ¨èï¼‰</h5>
<p>ç”¨<code>setState</code>çš„<strong>å‡½æ•°å¼å†™æ³•</strong>ï¼Œç›´æ¥è·å–æœ€æ–°çš„ state å€¼ï¼Œç»•å¼€é—­åŒ…çš„æ—§å€¼ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12972fbf56524ee48b65fc9b83573177~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI5omT5oCq5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768906515&amp;x-signature=Uja37rEaa5p6xrmVnMkn0dki9oc%3D" alt="carbon (1).png" loading="lazy"/></p>
<p><strong>åŸç†</strong>ï¼š<code>setCount(c =&gt; c + 1)</code>ä¼šä» React å†…éƒ¨è·å–å½“å‰æœ€æ–°çš„<code>count</code>å€¼ï¼Œä¸ç®¡é—­åŒ…æŠ“çš„æ˜¯æ—§å€¼ï¼Œéƒ½èƒ½æ‹¿åˆ°æœ€æ–°æ•°æ®ã€‚</p>
<h5 data-id="heading-4">æ–¹æ¡ˆ 2ï¼šè¡¥å…¨ä¾èµ–æ•°ç»„</h5>
<p>æŠŠ<code>count</code>åŠ å…¥<code>useEffect</code>çš„ä¾èµ–æ•°ç»„ï¼Œè®©<code>useEffect</code>åœ¨<code>count</code>å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œï¼Œç”Ÿæˆæ–°çš„é—­åŒ…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75079adc34cb4788bb89305f7e6d5904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWo5qCI5omT5oCq5pel6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768906515&amp;x-signature=61zNFuxdPv%2FFHxqIdd5T7VmzqEI%3D" alt="carbon (2).png" loading="lazy"/></p>
<p><strong>æ³¨æ„</strong>ï¼šè¿™ä¸ªæ–¹æ¡ˆä¼š<strong>é¢‘ç¹åˆ›å»º / æ¸…ç†å®šæ—¶å™¨</strong>ï¼ˆæ¯æ¬¡<code>count</code>å˜åŒ–éƒ½é‡æ–°æ‰§è¡Œ effectï¼‰ï¼Œæ€§èƒ½ä¸å¦‚æ–¹æ¡ˆ 1ï¼Œä»…æ¨èåœ¨ â€œå¿…é¡»ä¾èµ–å¤–éƒ¨å˜é‡â€ çš„åœºæ™¯ä½¿ç”¨ã€‚</p>
<h4 data-id="heading-5">å››ã€é¿å‘æ€»ç»“ï¼šuseEffect + å®šæ—¶å™¨çš„æ­£ç¡®å§¿åŠ¿</h4>
<ol>
<li><strong>ä¼˜å…ˆç”¨å‡½æ•°å¼æ›´æ–°</strong>ï¼š<code>setState(prev =&gt; prev + 1)</code>æ˜¯é¿å¼€é—­åŒ…é™·é˜±çš„ â€œä¸‡èƒ½é’¥åŒ™â€ï¼›</li>
<li><strong>ç©ºä¾èµ–è¦è°¨æ…</strong>ï¼šç©ºä¾èµ–çš„<code>useEffect</code>é‡Œï¼Œå°½é‡é¿å…ç›´æ¥å¼•ç”¨ state/propsï¼Œæ”¹ç”¨å‡½æ•°å¼æ›´æ–°ï¼›</li>
<li><strong>ä¾èµ–æ•°ç»„è¦å†™å…¨</strong>ï¼šå¦‚æœå¿…é¡»ä¾èµ–å¤–éƒ¨å˜é‡ï¼Œä¸€å®šè¦æŠŠå˜é‡åŠ å…¥ä¾èµ–æ•°ç»„ï¼ˆé…åˆ ESLint çš„<code>react-hooks/exhaustive-deps</code>è§„åˆ™ï¼‰ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android WebView æ··åˆå¼€å‘å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594468778110664738</link>    <guid>https://juejin.cn/post/7594468778110664738</guid>    <pubDate>2026-01-13T07:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594468778110664738" data-draft-id="7594468778110484514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android WebView æ··åˆå¼€å‘å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Android"/> <meta itemprop="datePublished" content="2026-01-13T07:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android WebView æ··åˆå¼€å‘å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:13:00.000Z" title="Tue Jan 13 2026 07:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€JavaScript è°ƒç”¨ Android çš„æ‰€æœ‰æ–¹å¼</h2>
<h3 data-id="heading-1">1.1 addJavascriptInterface æ–¹æ³•ï¼ˆæœ€å¸¸ç”¨ï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šå°† Java å¯¹è±¡æš´éœ²ç»™ WebView ä¸­çš„ JavaScriptï¼ŒJavaScript å¯ä»¥ç›´æ¥è°ƒç”¨è¯¥å¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼š</p>
<ul>
<li>Android 4.2+ å¿…é¡»ä½¿ç”¨ <code>@JavascriptInterface</code> æ³¨è§£</li>
<li>Android 4.2 ä¹‹å‰å­˜åœ¨å®‰å…¨æ¼æ´</li>
</ul>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… æœ€ç®€å•ç›´æ¥çš„æ–¹å¼</li>
<li>âœ… æ”¯æŒåŒå‘é€šä¿¡</li>
<li>âœ… å¯ä»¥ä¼ é€’å¤æ‚å‚æ•°</li>
<li>âš ï¸ Android 4.2 ä¹‹å‰æœ‰å®‰å…¨é£é™©</li>
<li>âš ï¸ éœ€è¦ç¡®ä¿æ–¹æ³•æœ‰ <code>@JavascriptInterface</code> æ³¨è§£</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºæ¥å£ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JSInterface</span> {
    <span class="hljs-keyword">private</span> Context context;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">JSInterface</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-built_in">this</span>.context = context;
    }
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showToast</span><span class="hljs-params">(String message)</span> {
        Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
    }
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDeviceInfo</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Build.MODEL;
    }
}

<span class="hljs-comment">// ç»‘å®šåˆ° WebView</span>
<span class="hljs-type">WebView</span> <span class="hljs-variable">webView</span> <span class="hljs-operator">=</span> findViewById(R.id.webview);
webView.getSettings().setJavaScriptEnabled(<span class="hljs-literal">true</span>);
webView.addJavascriptInterface(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JSInterface</span>(<span class="hljs-built_in">this</span>), <span class="hljs-string">"Android"</span>);
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è°ƒç”¨æ–¹æ³•</span>
<span class="hljs-title class_">Android</span>.<span class="hljs-title function_">showToast</span>(<span class="hljs-string">'Hello from JavaScript'</span>);
<span class="hljs-keyword">var</span> deviceInfo = <span class="hljs-title class_">Android</span>.<span class="hljs-title function_">getDeviceInfo</span>();
</code></pre>
<hr/>
<h3 data-id="heading-2">1.2 shouldOverrideUrlLoading æ‹¦æˆªï¼ˆURL Schemeï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šæ‹¦æˆª WebView ä¸­çš„ URL è¯·æ±‚ï¼Œé€šè¿‡è‡ªå®šä¹‰åè®®ï¼ˆå¦‚ <code>myapp://</code>ï¼‰å®ç°é€šä¿¡ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å®‰å…¨æ€§è¾ƒé«˜</li>
<li>âœ… å…¼å®¹æ€§å¥½</li>
<li>âŒ åªèƒ½å•å‘é€šä¿¡ï¼ˆJS â†’ Androidï¼‰</li>
<li>âŒ æ— æ³•ç›´æ¥è·å–è¿”å›å€¼ï¼ˆéœ€è¦é€šè¿‡å›è°ƒï¼‰</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebViewClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebViewClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldOverrideUrlLoading</span><span class="hljs-params">(WebView view, String url)</span> {
        <span class="hljs-keyword">if</span> (url.startsWith(<span class="hljs-string">"myapp://"</span>)) {
            <span class="hljs-type">Uri</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> Uri.parse(url);
            <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> uri.getHost();
            <span class="hljs-type">String</span> <span class="hljs-variable">param</span> <span class="hljs-operator">=</span> uri.getQueryParameter(<span class="hljs-string">"param"</span>);
            
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"showToast"</span>.equals(action)) {
                Toast.makeText(context, param, Toast.LENGTH_SHORT).show();
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">shouldOverrideUrlLoading</span><span class="hljs-params">(WebView view, WebResourceRequest request)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> request.getUrl().toString();
        <span class="hljs-keyword">if</span> (url.startsWith(<span class="hljs-string">"myapp://"</span>)) {
            <span class="hljs-comment">// å¤„ç†é€»è¾‘åŒä¸Š</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
});
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ iframeï¼ˆæ¨èï¼Œä¸ä¼šè§¦å‘é¡µé¢è·³è½¬ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">callAndroid</span>(<span class="hljs-params">action, param</span>) {
    <span class="hljs-keyword">var</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'iframe'</span>);
    iframe.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    iframe.<span class="hljs-property">src</span> = <span class="hljs-string">"myapp://"</span> + action + <span class="hljs-string">"?param="</span> + <span class="hljs-built_in">encodeURIComponent</span>(param);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(iframe);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(iframe), <span class="hljs-number">100</span>);
}

<span class="hljs-title function_">callAndroid</span>(<span class="hljs-string">"showToast"</span>, <span class="hljs-string">"Hello"</span>);
</code></pre>
<hr/>
<h3 data-id="heading-3">1.3 onJsPrompt æ–¹æ³•ï¼ˆæ¨èï¼Œå¯è¿”å›å€¼ï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šæ‹¦æˆª JavaScript çš„ <code>prompt()</code> è°ƒç”¨ï¼Œå¯ä»¥å®ç°åŒå‘é€šä¿¡å¹¶è·å–è¿”å›å€¼ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥è·å–è¿”å›å€¼</li>
<li>âœ… å®‰å…¨æ€§è¾ƒé«˜</li>
<li>âœ… å…¼å®¹æ€§å¥½</li>
<li>âš ï¸ éœ€è¦çº¦å®šé€šä¿¡åè®®æ ¼å¼</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebChromeClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebChromeClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onJsPrompt</span><span class="hljs-params">(WebView view, String url, String message, 
                              String defaultValue, JsPromptResult result)</span> {
        <span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span> &amp;&amp; message.startsWith(<span class="hljs-string">"jsbridge://"</span>)) {
            <span class="hljs-type">Uri</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> Uri.parse(message);
            <span class="hljs-type">String</span> <span class="hljs-variable">action</span> <span class="hljs-operator">=</span> uri.getHost();
            
            <span class="hljs-keyword">if</span> (<span class="hljs-string">"getDeviceInfo"</span>.equals(action)) {
                result.confirm(Build.MODEL);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"getVersion"</span>.equals(action)) {
                result.confirm(Build.VERSION.RELEASE);
            } <span class="hljs-keyword">else</span> {
                result.confirm(<span class="hljs-string">"unknown"</span>);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
});
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callNative</span>(<span class="hljs-params">action, params</span>) {
    <span class="hljs-keyword">var</span> url = <span class="hljs-string">"jsbridge://"</span> + action;
    <span class="hljs-keyword">if</span> (params) {
        url += <span class="hljs-string">"?"</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(params).<span class="hljs-title function_">toString</span>();
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">prompt</span>(url);
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">var</span> device = <span class="hljs-title function_">callNative</span>(<span class="hljs-string">"getDeviceInfo"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Device: "</span> + device);
</code></pre>
<hr/>
<h3 data-id="heading-4">1.4 onJsAlert æ–¹æ³•</h3>
<p><strong>åŸç†</strong>ï¼šæ‹¦æˆª JavaScript çš„ <code>alert()</code> è°ƒç”¨ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… ç®€å•æ˜“ç”¨</li>
<li>âŒ åªèƒ½å•å‘é€šä¿¡ï¼ˆJS â†’ Androidï¼‰</li>
<li>âŒ æ— è¿”å›å€¼</li>
<li>âš ï¸ ä¼šæ˜¾ç¤ºå¼¹çª—ï¼Œç”¨æˆ·ä½“éªŒå¯èƒ½ä¸ä½³</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebChromeClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebChromeClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onJsAlert</span><span class="hljs-params">(WebView view, String url, String message, JsResult result)</span> {
        <span class="hljs-keyword">if</span> (message.startsWith(<span class="hljs-string">"jsbridge://"</span>)) {
            handleBridgeMessage(message);
            result.confirm();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertDialog</span>.Builder(view.getContext())
            .setMessage(message)
            .setPositiveButton(<span class="hljs-string">"ç¡®å®š"</span>, (d, w) -&gt; result.confirm())
            .show();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
});
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callNative</span>(<span class="hljs-params">action, params</span>) {
    <span class="hljs-keyword">var</span> msg = <span class="hljs-string">"jsbridge://"</span> + action + (params ? <span class="hljs-string">"?"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params) : <span class="hljs-string">""</span>);
    <span class="hljs-title function_">alert</span>(msg);
}
</code></pre>
<hr/>
<h3 data-id="heading-5">1.5 onJsConfirm æ–¹æ³•</h3>
<p><strong>åŸç†</strong>ï¼šæ‹¦æˆª JavaScript çš„ <code>confirm()</code> è°ƒç”¨ï¼Œå¯ä»¥è·å–ç”¨æˆ·çš„é€‰æ‹©ç»“æœã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥è·å–ç”¨æˆ·é€‰æ‹©</li>
<li>âŒ åªèƒ½å•å‘é€šä¿¡ï¼ˆJS â†’ Androidï¼‰</li>
<li>âš ï¸ ä¼šæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebChromeClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebChromeClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onJsConfirm</span><span class="hljs-params">(WebView view, String url, String message, JsResult result)</span> {
        <span class="hljs-keyword">if</span> (message.startsWith(<span class="hljs-string">"jsbridge://"</span>)) {
            handleBridgeMessage(message);
            result.confirm();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">AlertDialog</span>.Builder(view.getContext())
            .setMessage(message)
            .setPositiveButton(<span class="hljs-string">"ç¡®å®š"</span>, (d, w) -&gt; result.confirm())
            .setNegativeButton(<span class="hljs-string">"å–æ¶ˆ"</span>, (d, w) -&gt; result.cancel())
            .show();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
});
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callNative</span>(<span class="hljs-params">action, params</span>) {
    <span class="hljs-keyword">var</span> msg = <span class="hljs-string">"jsbridge://"</span> + action + (params ? <span class="hljs-string">"?"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params) : <span class="hljs-string">""</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">confirm</span>(msg);
}
</code></pre>
<hr/>
<h3 data-id="heading-6">1.6 onConsoleMessage æ–¹æ³•</h3>
<p><strong>åŸç†</strong>ï¼šæ•è· JavaScript æ§åˆ¶å°æ—¥å¿—ï¼Œå¯ä»¥ç”¨äºä¼ é€’æ•°æ®ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… ä¸»è¦ç”¨äºè°ƒè¯•</li>
<li>âœ… å¯ä»¥ä¼ é€’æ•°æ®</li>
<li>âŒ ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒä½¿ç”¨</li>
<li>âš ï¸ ä¸»è¦ç”¨äºæ—¥å¿—æ”¶é›†</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebChromeClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebChromeClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onConsoleMessage</span><span class="hljs-params">(ConsoleMessage consoleMessage)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> consoleMessage.message();
        <span class="hljs-keyword">if</span> (msg.startsWith(<span class="hljs-string">"jsbridge://"</span>)) {
            handleBridgeMessage(msg);
        } <span class="hljs-keyword">else</span> {
            Log.d(<span class="hljs-string">"WebView"</span>, msg);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
});
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">callNative</span>(<span class="hljs-params">action, params</span>) {
    <span class="hljs-keyword">var</span> msg = <span class="hljs-string">"jsbridge://"</span> + action + (params ? <span class="hljs-string">"?"</span> + <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params) : <span class="hljs-string">""</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);
}
</code></pre>
<hr/>
<h3 data-id="heading-7">1.7 postMessage æ–¹æ³•ï¼ˆAndroid 6.0+ï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šä½¿ç”¨ <code>WebMessagePort</code> è¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œè¿™æ˜¯å®˜æ–¹æ¨èçš„å®‰å…¨é€šä¿¡æ–¹å¼ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šAndroid 6.0 (API 23)+</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å®˜æ–¹æ¨èçš„å®‰å…¨æ–¹å¼</li>
<li>âœ… æ”¯æŒåŒå‘é€šä¿¡</li>
<li>âœ… å®‰å…¨æ€§é«˜</li>
<li>âŒ éœ€è¦ Android 6.0+</li>
<li>âš ï¸ å®ç°ç›¸å¯¹å¤æ‚</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
    <span class="hljs-keyword">if</span> (WebViewFeature.isFeatureSupported(WebViewFeature.WEB_MESSAGE_PORT_POST_MESSAGE)) {
        WebMessagePort[] ports = webView.createWebMessageChannel();
        <span class="hljs-type">WebMessagePort</span> <span class="hljs-variable">port1</span> <span class="hljs-operator">=</span> ports[<span class="hljs-number">0</span>];
        <span class="hljs-type">WebMessagePort</span> <span class="hljs-variable">port2</span> <span class="hljs-operator">=</span> ports[<span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// å°† port2 ä¼ é€’ç»™ JavaScript</span>
        webView.postWebMessage(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMessage</span>(<span class="hljs-string">"init"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMessagePort</span>[]{port2}),
            Uri.parse(<span class="hljs-string">"https://example.com"</span>)
        );
        
        <span class="hljs-comment">// ç›‘å¬æ¥è‡ª JavaScript çš„æ¶ˆæ¯</span>
        port1.setWebMessageCallback(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMessagePort</span>.WebMessageCallback() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onMessage</span><span class="hljs-params">(WebMessagePort port, WebMessage message)</span> {
                Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Received: "</span> + message.getData());
                port.postMessage(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMessage</span>(<span class="hljs-string">"Response from Android"</span>));
            }
        });
    }
}
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"message"</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
    <span class="hljs-keyword">if</span> (event.<span class="hljs-property">data</span> === <span class="hljs-string">"init"</span> &amp;&amp; event.<span class="hljs-property">ports</span> &amp;&amp; event.<span class="hljs-property">ports</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">var</span> port = event.<span class="hljs-property">ports</span>[<span class="hljs-number">0</span>];
        port.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Received: "</span> + e.<span class="hljs-property">data</span>);
        };
        port.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">"Hello from JavaScript"</span>);
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">androidPort</span> = port;
    }
});

<span class="hljs-comment">// åç»­ä½¿ç”¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">androidPort</span>?.<span class="hljs-title function_">postMessage</span>(<span class="hljs-string">"Another message"</span>);
</code></pre>
<hr/>
<h3 data-id="heading-8">1.8 é€šè¿‡ JSBridge åº“è°ƒç”¨</h3>
<p>è¯¦è§ <a href="#%E4%B8%89jsbridge-%E5%BC%80%E6%BA%90%E5%BA%93%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F" title="#%E4%B8%89jsbridge-%E5%BC%80%E6%BA%90%E5%BA%93%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">ä¸‰ã€JSBridge å¼€æºåº“å®ç°æ–¹å¼</a></p>
<hr/>
<h2 data-id="heading-9">äºŒã€Android è°ƒç”¨ JavaScript çš„æ‰€æœ‰æ–¹å¼</h2>
<h3 data-id="heading-10">2.1 evaluateJavascript æ–¹æ³•ï¼ˆæ¨èï¼ŒAndroid 4.4+ï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šåœ¨ WebView ä¸­æ‰§è¡Œ JavaScript ä»£ç å¹¶è·å–è¿”å›å€¼ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šAndroid 4.4 (API 19)+</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… æ”¯æŒå¼‚æ­¥å›è°ƒ</li>
<li>âœ… å¯ä»¥è·å–è¿”å›å€¼</li>
<li>âœ… æ€§èƒ½è¾ƒå¥½</li>
<li>âœ… å®˜æ–¹æ¨èæ–¹å¼</li>
<li>âŒ éœ€è¦ Android 4.4+</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è°ƒç”¨æ— è¿”å›å€¼æ–¹æ³•</span>
webView.evaluateJavascript(<span class="hljs-string">"javascript:showMessage('Hello')"</span>, <span class="hljs-literal">null</span>);

<span class="hljs-comment">// è°ƒç”¨æœ‰è¿”å›å€¼æ–¹æ³•</span>
webView.evaluateJavascript(<span class="hljs-string">"javascript:getData()"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueCallback</span>&lt;String&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceiveValue</span><span class="hljs-params">(String value)</span> {
        <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span> &amp;&amp; !value.equals(<span class="hljs-string">"null"</span>)) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(value);
                Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Result: "</span> + json.toString());
            } <span class="hljs-keyword">catch</span> (JSONException e) {
                Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Result: "</span> + value);
            }
        }
    }
});

<span class="hljs-comment">// ä¼ é€’å‚æ•°</span>
<span class="hljs-type">String</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>().put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>).put(<span class="hljs-string">"age"</span>, <span class="hljs-number">30</span>).toString();
webView.evaluateJavascript(<span class="hljs-string">"javascript:handleData("</span> + params + <span class="hljs-string">")"</span>, <span class="hljs-literal">null</span>);
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">showMessage</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-title function_">alert</span>(message);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span>, <span class="hljs-attr">data</span>: { <span class="hljs-attr">name</span>: <span class="hljs-string">'John'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> } };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params">params</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received:'</span>, params);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
}
</code></pre>
<p><strong>è¿”å›å€¼å¤„ç†</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.evaluateJavascript(<span class="hljs-string">"javascript:getData()"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValueCallback</span>&lt;String&gt;() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceiveValue</span><span class="hljs-params">(String value)</span> {
        <span class="hljs-keyword">if</span> (value == <span class="hljs-literal">null</span> || value.equals(<span class="hljs-string">"null"</span>)) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// å»é™¤é¦–å°¾å¼•å·å’Œè½¬ä¹‰å­—ç¬¦</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> value;
        <span class="hljs-keyword">if</span> (result.startsWith(<span class="hljs-string">"\""</span>) &amp;&amp; result.endsWith(<span class="hljs-string">"\""</span>)) {
            result = result.substring(<span class="hljs-number">1</span>, result.length() - <span class="hljs-number">1</span>);
        }
        result = result.replace(<span class="hljs-string">"\\\""</span>, <span class="hljs-string">"\""</span>).replace(<span class="hljs-string">"\\\\"</span>, <span class="hljs-string">"\\"</span>);
        
        <span class="hljs-comment">// è§£æ JSON</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">JSONObject</span> <span class="hljs-variable">json</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>(result);
            Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Result: "</span> + json.toString());
        } <span class="hljs-keyword">catch</span> (JSONException e) {
            Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Result: "</span> + result);
        }
    }
});
</code></pre>
<hr/>
<h3 data-id="heading-11">2.2 loadUrl æ–¹æ³•ï¼ˆå…¼å®¹ä½ç‰ˆæœ¬ï¼‰</h3>
<p><strong>åŸç†</strong>ï¼šé€šè¿‡åŠ è½½ <code>javascript:</code> åè®®çš„ URL æ¥æ‰§è¡Œ JavaScript ä»£ç ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å…¼å®¹æ‰€æœ‰ Android ç‰ˆæœ¬</li>
<li>âœ… ç®€å•æ˜“ç”¨</li>
<li>âŒ æ— æ³•è·å–è¿”å›å€¼</li>
<li>âŒ æ€§èƒ½è¾ƒä½</li>
<li>âš ï¸ ä¸»è¦ç”¨äºå…¼å®¹ Android 4.4 ä»¥ä¸‹ç‰ˆæœ¬</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è°ƒç”¨ JavaScript æ–¹æ³•</span>
webView.loadUrl(<span class="hljs-string">"javascript:showMessage('Hello')"</span>);

<span class="hljs-comment">// ä¼ é€’å‚æ•°</span>
<span class="hljs-type">String</span> <span class="hljs-variable">params</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JSONObject</span>().put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>).put(<span class="hljs-string">"age"</span>, <span class="hljs-number">30</span>).toString();
webView.loadUrl(<span class="hljs-string">"javascript:handleData("</span> + params + <span class="hljs-string">")"</span>);
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">showMessage</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-title function_">alert</span>(message);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleData</span>(<span class="hljs-params">params</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received:'</span>, params);
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>æ— æ³•è·å– JavaScript çš„è¿”å›å€¼</li>
<li>å‚æ•°ä¸­çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰</li>
<li>æ€§èƒ½æ¯” <code>evaluateJavascript</code> ä½</li>
<li>å»ºè®®åœ¨ Android 4.4+ ä½¿ç”¨ <code>evaluateJavascript</code></li>
</ul>
<hr/>
<h3 data-id="heading-12">2.3 é€šè¿‡ JavaScript å›è°ƒæœºåˆ¶</h3>
<p><strong>åŸç†</strong>ï¼šAndroid è°ƒç”¨ JavaScript æ—¶ä¼ å…¥å›è°ƒå‡½æ•°åï¼ŒJavaScript æ‰§è¡Œå®Œæˆåé€šè¿‡å›è°ƒé€šçŸ¥ Androidã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬ï¼ˆé…åˆ <code>evaluateJavascript</code> æˆ– <code>loadUrl</code>ï¼‰</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥å®ç°å¼‚æ­¥é€šä¿¡</li>
<li>âœ… å¯ä»¥è·å–è¿”å›å€¼</li>
<li>âœ… å…¼å®¹æ€§å¥½</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewCallback</span> {
    <span class="hljs-keyword">private</span> WebView webView;
    <span class="hljs-keyword">private</span> Map&lt;String, ValueCallback&lt;String&gt;&gt; callbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">callbackId</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">WebViewCallback</span><span class="hljs-params">(WebView webView)</span> {
        <span class="hljs-built_in">this</span>.webView = webView;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callJS</span><span class="hljs-params">(String method, String params, ValueCallback&lt;String&gt; callback)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">callbackName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"callback_"</span> + (callbackId++);
        callbacks.put(callbackName, callback);
        
        <span class="hljs-type">String</span> <span class="hljs-variable">jsCode</span> <span class="hljs-operator">=</span> String.format(
            <span class="hljs-string">"javascript:%s(%s, function(result) { Android.onJSCallback('%s', result); });"</span>,
            method, params, callbackName
        );
        webView.evaluateJavascript(jsCode, <span class="hljs-literal">null</span>);
    }
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onJSCallback</span><span class="hljs-params">(String callbackName, String result)</span> {
        ValueCallback&lt;String&gt; callback = callbacks.remove(callbackName);
        <span class="hljs-keyword">if</span> (callback != <span class="hljs-literal">null</span>) {
            callback.onReceiveValue(result);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">WebViewCallback</span> <span class="hljs-variable">callback</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebViewCallback</span>(webView);
webView.addJavascriptInterface(callback, <span class="hljs-string">"Android"</span>);
callback.callJS(<span class="hljs-string">"getData"</span>, <span class="hljs-string">"null"</span>, result -&gt; Log.d(<span class="hljs-string">"WebView"</span>, <span class="hljs-string">"Result: "</span> + result));
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params">param, callback</span>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">callback</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">result</span>: <span class="hljs-string">'success'</span>, <span class="hljs-attr">data</span>: param }));
    }, <span class="hljs-number">1000</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-13">2.4 é€šè¿‡ JSBridge åº“è°ƒç”¨</h3>
<p>è¯¦è§ <a href="#%E4%B8%89jsbridge-%E5%BC%80%E6%BA%90%E5%BA%93%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F" title="#%E4%B8%89jsbridge-%E5%BC%80%E6%BA%90%E5%BA%93%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F">ä¸‰ã€JSBridge å¼€æºåº“å®ç°æ–¹å¼</a></p>
<hr/>
<h3 data-id="heading-14">2.5 é€šè¿‡æ³¨å…¥ JavaScript ä»£ç </h3>
<p><strong>åŸç†</strong>ï¼šåœ¨é¡µé¢åŠ è½½æ—¶æ³¨å…¥ JavaScript ä»£ç ï¼Œå»ºç«‹é€šä¿¡æ¡¥æ¢ã€‚</p>
<p><strong>ç‰ˆæœ¬è¦æ±‚</strong>ï¼šæ‰€æœ‰ Android ç‰ˆæœ¬</p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥åœ¨é¡µé¢åŠ è½½å‰å»ºç«‹é€šä¿¡</li>
<li>âœ… çµæ´»æ€§é«˜</li>
<li>âš ï¸ éœ€è¦å¤„ç†æ—¶æœºé—®é¢˜</li>
</ul>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">webView.setWebViewClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebViewClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPageFinished</span><span class="hljs-params">(WebView view, String url)</span> {
        <span class="hljs-built_in">super</span>.onPageFinished(view, url);
        <span class="hljs-type">String</span> <span class="hljs-variable">jsCode</span> <span class="hljs-operator">=</span> <span class="hljs-string">"javascript:(function() {"</span> +
            <span class="hljs-string">"window.AndroidBridge = {"</span> +
            <span class="hljs-string">"  onNativeCall: function(callback) { window._nativeCallback = callback; }"</span> +
            <span class="hljs-string">"};"</span> +
            <span class="hljs-string">"})();"</span>;
        view.evaluateJavascript(jsCode, <span class="hljs-literal">null</span>);
    }
});

<span class="hljs-comment">// è°ƒç”¨æ³¨å…¥çš„æ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callJSMethod</span><span class="hljs-params">()</span> {
    webView.evaluateJavascript(<span class="hljs-string">"javascript:window._nativeCallback &amp;&amp; window._nativeCallback('Hello')"</span>, <span class="hljs-literal">null</span>);
}
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">AndroidBridge</span>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">AndroidBridge</span>.<span class="hljs-title function_">onNativeCall</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">message</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Received: '</span> + message);
        });
    }
});
</code></pre>
<hr/>
<h2 data-id="heading-15">ä¸‰ã€JSBridge å¼€æºåº“å®ç°æ–¹å¼</h2>
<h3 data-id="heading-16">3.1 JsBridgeï¼ˆlzyzsdï¼‰</h3>
<p><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flzyzsd%2FJsBridge" target="_blank" title="https://github.com/lzyzsd/JsBridge" ref="nofollow noopener noreferrer">github.com/lzyzsd/JsBrâ€¦</a></p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å—å¾®ä¿¡ WebView JsBridge å¯å‘</li>
<li>æ”¯æŒåŒå‘é€šä¿¡</li>
<li>æ”¯æŒæŒä¹…å›è°ƒ</li>
<li>æä¾›é»˜è®¤å¤„ç†å™¨</li>
</ul>
<p><strong>ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">implementation 'com.github.lzyzsd:jsbridge:1.0.4'
</code></pre>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">BridgeWebView</span> <span class="hljs-variable">webView</span> <span class="hljs-operator">=</span> (BridgeWebView) findViewById(R.id.webview);

<span class="hljs-comment">// æ³¨å†Œå¤„ç†å™¨ï¼ˆä¾› JS è°ƒç”¨ï¼‰</span>
webView.registerHandler(<span class="hljs-string">"submitFromWeb"</span>, (data, function) -&gt; 
    function.onCallBack(<span class="hljs-string">"Response from Android"</span>)
);

<span class="hljs-comment">// è°ƒç”¨ JavaScript æ–¹æ³•</span>
webView.callHandler(<span class="hljs-string">"functionInJs"</span>, <span class="hljs-string">"data"</span>, result -&gt; 
    Log.d(<span class="hljs-string">"Bridge"</span>, <span class="hljs-string">"Result: "</span> + result)
);
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è¿æ¥ Bridge</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">connectBridge</span>(<span class="hljs-params">callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">WebViewJavascriptBridge</span>) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-title class_">WebViewJavascriptBridge</span>);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'WebViewJavascriptBridgeReady'</span>, <span class="hljs-function">() =&gt;</span> 
            <span class="hljs-title function_">callback</span>(<span class="hljs-title class_">WebViewJavascriptBridge</span>)
        );
    }
}

<span class="hljs-title function_">connectBridge</span>(<span class="hljs-function"><span class="hljs-params">bridge</span> =&gt;</span> {
    <span class="hljs-comment">// æ³¨å†Œå¤„ç†å™¨ï¼ˆä¾› Android è°ƒç”¨ï¼‰</span>
    bridge.<span class="hljs-title function_">registerHandler</span>(<span class="hljs-string">"functionInJs"</span>, <span class="hljs-function">(<span class="hljs-params">data, callback</span>) =&gt;</span> 
        <span class="hljs-title function_">callback</span>(<span class="hljs-string">"Response from JS"</span>)
    );
    
    <span class="hljs-comment">// è°ƒç”¨ Android æ–¹æ³•</span>
    bridge.<span class="hljs-title function_">callHandler</span>(<span class="hljs-string">'submitFromWeb'</span>, {<span class="hljs-attr">param</span>: <span class="hljs-string">'value'</span>}, <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> 
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Response: '</span> + response)
    );
});
</code></pre>
<hr/>
<h3 data-id="heading-17">3.2 DSBridge</h3>
<p><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwendux%2FDSBridge-Android" target="_blank" title="https://github.com/wendux/DSBridge-Android" ref="nofollow noopener noreferrer">github.com/wendux/DSBrâ€¦</a></p>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è·¨å¹³å°æ”¯æŒï¼ˆiOS + Androidï¼‰</li>
<li>æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥è°ƒç”¨</li>
<li>æ”¯æŒè¿›åº¦å›è°ƒï¼ˆä¸€æ¬¡è°ƒç”¨ï¼Œå¤šæ¬¡è¿”å›ï¼‰</li>
<li>æ”¯æŒè…¾è®¯ X5 å†…æ ¸</li>
<li>æ”¯æŒ API å‘½åç©ºé—´</li>
<li>æ”¯æŒè°ƒè¯•æ¨¡å¼</li>
</ul>
<p><strong>ä¾èµ–</strong>ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">implementation 'com.github.wendux:DSBridge-Android:3.0.0'
</code></pre>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®šä¹‰ API ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsApi</span> {
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">testSyn</span><span class="hljs-params">(Object msg)</span> {
        <span class="hljs-keyword">return</span> msg + <span class="hljs-string">" [syn]"</span>;
    }
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAsyn</span><span class="hljs-params">(Object msg, CompletionHandler&lt;String&gt; handler)</span> {
        handler.complete(msg + <span class="hljs-string">" [asyn]"</span>);
    }
}

<span class="hljs-comment">// æ·»åŠ åˆ° WebView</span>
<span class="hljs-type">DWebView</span> <span class="hljs-variable">dWebView</span> <span class="hljs-operator">=</span> (DWebView) webView;
dWebView.addJavascriptObject(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JsApi</span>(), <span class="hljs-string">"nativeApi"</span>);

<span class="hljs-comment">// è°ƒç”¨ JavaScript æ–¹æ³•</span>
dWebView.callHandler(<span class="hljs-string">"test.method"</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[]{<span class="hljs-string">"hello"</span>}, retValue -&gt; 
    Log.d(<span class="hljs-string">"DSBridge"</span>, <span class="hljs-string">"Result: "</span> + retValue)
);
</code></pre>
<p><strong>JavaScript ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒæ­¥è°ƒç”¨</span>
<span class="hljs-keyword">var</span> result = dsBridge.<span class="hljs-title function_">call</span>(<span class="hljs-string">"nativeApi.testSyn"</span>, <span class="hljs-string">"test"</span>);

<span class="hljs-comment">// å¼‚æ­¥è°ƒç”¨</span>
dsBridge.<span class="hljs-title function_">call</span>(<span class="hljs-string">"nativeApi.testAsyn"</span>, <span class="hljs-string">"test"</span>, <span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val));

<span class="hljs-comment">// æ³¨å†Œæ–¹æ³•ä¾› Android è°ƒç”¨</span>
dsBridge.<span class="hljs-title function_">register</span>(<span class="hljs-string">"test.method"</span>, <span class="hljs-function">(<span class="hljs-params">arg, callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>(<span class="hljs-string">"result from js"</span>));
</code></pre>
<hr/>
<h3 data-id="heading-18">3.3 SafeWebViewBridge</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼šä¸“æ³¨äºå®‰å…¨æ€§çš„ WebView Bridge</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šå¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„åº”ç”¨</p>
<hr/>
<h3 data-id="heading-19">3.4 WebViewJavascriptBridgeï¼ˆiOS é£æ ¼ï¼‰</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼šæ¨¡ä»¿ iOS çš„ WebViewJavascriptBridge å®ç°</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šéœ€è¦ iOS/Android ç»Ÿä¸€æ¥å£çš„é¡¹ç›®</p>
<hr/>
<h3 data-id="heading-20">3.5 X5 WebView Bridge</h3>
<p><strong>ç‰¹ç‚¹</strong>ï¼šåŸºäºè…¾è®¯ X5 å†…æ ¸çš„ Bridge å®ç°</p>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šä½¿ç”¨è…¾è®¯ X5 å†…æ ¸çš„é¡¹ç›®</p>
<p><strong>Android ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">com.tencent.smtt.sdk.<span class="hljs-type">WebView</span> <span class="hljs-variable">x5WebView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">com</span>.tencent.smtt.sdk.WebView(context);
x5WebView.addJavascriptInterface(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JSInterface</span>(), <span class="hljs-string">"Android"</span>);
</code></pre>
<hr/>
<h2 data-id="heading-21">å››ã€å®‰å…¨æ€§ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-22">4.1 å®‰å…¨é£é™©</h3>
<h4 data-id="heading-23">4.1.1 addJavascriptInterface å®‰å…¨é£é™©</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šAndroid 4.2 ä¹‹å‰å­˜åœ¨æ¼æ´ï¼Œæ¶æ„ JavaScript å¯èƒ½æ‰§è¡Œä»»æ„ä»£ç </li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>ä½¿ç”¨ <code>@JavascriptInterface</code> æ³¨è§£ï¼ˆAndroid 4.2+ï¼‰</li>
<li>éªŒè¯æ‰€æœ‰æ¥è‡ª JavaScript çš„å‚æ•°</li>
<li>é™åˆ¶æš´éœ²çš„æ–¹æ³•å’Œæƒé™</li>
</ul>
</li>
</ul>
<h4 data-id="heading-24">4.1.2 URL Scheme å®‰å…¨é£é™©</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šå¯èƒ½è¢«æ¶æ„åº”ç”¨æ‹¦æˆª</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>éªŒè¯ URL æ¥æº</li>
<li>ä½¿ç”¨ HTTPS</li>
<li>æ·»åŠ ç­¾åéªŒè¯</li>
</ul>
</li>
</ul>
<h4 data-id="heading-25">4.1.3 XSS æ”»å‡»é£é™©</h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šæ³¨å…¥æ¶æ„ JavaScript</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ul>
<li>å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</li>
<li>è¾“å…¥éªŒè¯å’Œè½¬ä¹‰</li>
<li>ç™½åå•æœºåˆ¶</li>
</ul>
</li>
</ul>
<h3 data-id="heading-26">4.2 æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-27">4.2.1 WebView å®‰å…¨é…ç½®</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">WebSettings</span> <span class="hljs-variable">settings</span> <span class="hljs-operator">=</span> webView.getSettings();
settings.setJavaScriptEnabled(<span class="hljs-literal">true</span>);

<span class="hljs-comment">// å®‰å…¨é…ç½®</span>
settings.setAllowFileAccess(<span class="hljs-literal">false</span>);                    <span class="hljs-comment">// ç¦æ­¢æ–‡ä»¶è®¿é—®</span>
settings.setAllowContentAccess(<span class="hljs-literal">false</span>);                 <span class="hljs-comment">// ç¦æ­¢å†…å®¹è®¿é—®</span>
settings.setAllowFileAccessFromFileURLs(<span class="hljs-literal">false</span>);        <span class="hljs-comment">// ç¦æ­¢ä»æ–‡ä»¶ URL è®¿é—®</span>
settings.setAllowUniversalAccessFromFileURLs(<span class="hljs-literal">false</span>);   <span class="hljs-comment">// ç¦æ­¢é€šç”¨æ–‡ä»¶è®¿é—®</span>
settings.setMixedContentMode(WebSettings.MIXED_CONTENT_NEVER_ALWAYS); <span class="hljs-comment">// ç¦æ­¢æ··åˆå†…å®¹</span>

<span class="hljs-comment">// ä½¿ç”¨ HTTPS</span>
webView.setWebViewClient(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WebViewClient</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceivedSslError</span><span class="hljs-params">(WebView view, SslErrorHandler handler, SslError error)</span> {
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒåº”è¯¥éªŒè¯è¯ä¹¦</span>
        handler.proceed(); <span class="hljs-comment">// ä»…ç”¨äºå¼€å‘ç¯å¢ƒ</span>
    }
});
</code></pre>
<h4 data-id="heading-28">4.2.2 å‚æ•°éªŒè¯</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@JavascriptInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showToast</span><span class="hljs-params">(String message)</span> {
    <span class="hljs-comment">// éªŒè¯å‚æ•°</span>
    <span class="hljs-keyword">if</span> (message == <span class="hljs-literal">null</span> || message.length() &gt; <span class="hljs-number">100</span>) {
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// é˜²æ­¢ XSS</span>
    message = message.replace(<span class="hljs-string">"&lt;"</span>, <span class="hljs-string">"&amp;lt;"</span>)
                     .replace(<span class="hljs-string">"&gt;"</span>, <span class="hljs-string">"&amp;gt;"</span>)
                     .replace(<span class="hljs-string">"\""</span>, <span class="hljs-string">"&amp;quot;"</span>)
                     .replace(<span class="hljs-string">"'"</span>, <span class="hljs-string">"&amp;#x27;"</span>);
    
    Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
}
</code></pre>
<h4 data-id="heading-29">4.2.3 æƒé™æ§åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JSInterface</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Set&lt;String&gt; ALLOWED_METHODS = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;String&gt;() {{
        add(<span class="hljs-string">"showToast"</span>);
        add(<span class="hljs-string">"getDeviceInfo"</span>);
    }};
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showToast</span><span class="hljs-params">(String message)</span> {
        <span class="hljs-comment">// æ£€æŸ¥æƒé™</span>
        <span class="hljs-keyword">if</span> (!hasPermission(<span class="hljs-string">"showToast"</span>)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// æ‰§è¡Œæ“ä½œ</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasPermission</span><span class="hljs-params">(String method)</span> {
        <span class="hljs-keyword">return</span> ALLOWED_METHODS.contains(method);
    }
}
</code></pre>
<h4 data-id="heading-30">4.2.4 ä½¿ç”¨æˆç†Ÿçš„ Bridge åº“</h4>
<ul>
<li>é¿å…è‡ªå·±å®ç°ï¼Œä½¿ç”¨ç»è¿‡éªŒè¯çš„åº“</li>
<li>å®šæœŸæ›´æ–°ä¾èµ–</li>
<li>å…³æ³¨å®‰å…¨å…¬å‘Š</li>
</ul>
<h4 data-id="heading-31">4.2.5 ç‰ˆæœ¬å…¼å®¹æ€§å¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥ Android ç‰ˆæœ¬</span>
<span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.KITKAT) {
    <span class="hljs-comment">// ä½¿ç”¨ evaluateJavascript</span>
    webView.evaluateJavascript(jsCode, callback);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä½¿ç”¨ loadUrl</span>
    webView.loadUrl(jsCode);
}

<span class="hljs-comment">// æ£€æŸ¥ @JavascriptInterface æ”¯æŒ</span>
<span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN_MR1) {
    <span class="hljs-comment">// ä½¿ç”¨ @JavascriptInterface</span>
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä½¿ç”¨å…¶ä»–æ–¹å¼</span>
}
</code></pre>
<h4 data-id="heading-32">4.2.6 é”™è¯¯å¤„ç†</h4>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@JavascriptInterface</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleRequest</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> json = JSONObject(<span class="hljs-keyword">data</span>)
        <span class="hljs-comment">// å¤„ç†è¯·æ±‚</span>
    } <span class="hljs-keyword">catch</span> (e: JSONException) {
        Log.e(TAG, <span class="hljs-string">"Invalid JSON"</span>, e)
        <span class="hljs-comment">// è¿”å›é”™è¯¯ä¿¡æ¯</span>
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Log.e(TAG, <span class="hljs-string">"Error handling request"</span>, e)
        <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
    }
}
</code></pre>
<h4 data-id="heading-33">4.2.7 ç»Ÿä¸€é”™è¯¯å¤„ç†æ¡†æ¶</h4>
<p><strong>åŸç†</strong>ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†å¯ä»¥æå‡ä»£ç å¯ç»´æŠ¤æ€§ï¼Œä¾¿äºé”™è¯¯è¿½è¸ªå’Œä¸ŠæŠ¥ã€‚</p>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.util.Log
<span class="hljs-keyword">import</span> org.json.JSONObject
</code></pre>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç»Ÿä¸€é”™è¯¯å¤„ç†æ¡†æ¶
 */</span>
<span class="hljs-keyword">object</span> ErrorHandler {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> errorReporter: ((ErrorInfo) -&gt; <span class="hljs-built_in">Unit</span>)? = <span class="hljs-literal">null</span>
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorInfo</span>(
        <span class="hljs-keyword">val</span> type: ErrorType,
        <span class="hljs-keyword">val</span> message: String,
        <span class="hljs-keyword">val</span> stackTrace: String? = <span class="hljs-literal">null</span>,
        <span class="hljs-keyword">val</span> context: Map&lt;String, Any&gt;? = <span class="hljs-literal">null</span>
    )
    
    <span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorType</span> {
        JS_ERROR,      <span class="hljs-comment">// JavaScript é”™è¯¯</span>
        BRIDGE_ERROR,  <span class="hljs-comment">// Bridge è°ƒç”¨é”™è¯¯</span>
        NETWORK_ERROR, <span class="hljs-comment">// ç½‘ç»œé”™è¯¯</span>
        CACHE_ERROR,   <span class="hljs-comment">// ç¼“å­˜é”™è¯¯</span>
        UNKNOWN_ERROR  <span class="hljs-comment">// æœªçŸ¥é”™è¯¯</span>
    }
    
    <span class="hljs-comment">/**
     * è®¾ç½®é”™è¯¯ä¸ŠæŠ¥å™¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setErrorReporter</span><span class="hljs-params">(reporter: (<span class="hljs-type">ErrorInfo</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        errorReporter = reporter
    }
    
    <span class="hljs-comment">/**
     * å¤„ç†é”™è¯¯
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleError</span><span class="hljs-params">(
        type: <span class="hljs-type">ErrorType</span>,
        message: <span class="hljs-type">String</span>,
        throwable: <span class="hljs-type">Throwable</span>? = <span class="hljs-literal">null</span>,
        context: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, Any&gt;? = <span class="hljs-literal">null</span>
    )</span></span> {
        <span class="hljs-keyword">val</span> errorInfo = ErrorInfo(
            type = type,
            message = message,
            stackTrace = throwable?.stackTraceToString(),
            context = context
        )
        
        <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
        Log.e(<span class="hljs-string">"ErrorHandler"</span>, <span class="hljs-string">"[<span class="hljs-subst">${type.name}</span>] <span class="hljs-variable">$message</span>"</span>, throwable)
        
        <span class="hljs-comment">// ä¸ŠæŠ¥é”™è¯¯</span>
        errorReporter?.invoke(errorInfo)
    }
    
    <span class="hljs-comment">/**
     * å¤„ç† JavaScript é”™è¯¯
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleJSError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>, stackTrace: <span class="hljs-type">String</span>? = <span class="hljs-literal">null</span>)</span></span> {
        handleError(
            ErrorType.JS_ERROR,
            message,
            context = mapOf(<span class="hljs-string">"stackTrace"</span> to (stackTrace ?: <span class="hljs-string">""</span>))
        )
    }
    
    <span class="hljs-comment">/**
     * å¤„ç† Bridge è°ƒç”¨é”™è¯¯
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleBridgeError</span><span class="hljs-params">(method: <span class="hljs-type">String</span>, error: <span class="hljs-type">Throwable</span>)</span></span> {
        handleError(
            ErrorType.BRIDGE_ERROR,
            <span class="hljs-string">"Bridge call failed: <span class="hljs-variable">$method</span>"</span>,
            error,
            mapOf(<span class="hljs-string">"method"</span> to method)
        )
    }
}

<span class="hljs-comment">// åœ¨ JSInterface ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">JSInterface</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onJSError</span><span class="hljs-params">(errorInfo: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> json = JSONObject(errorInfo)
            ErrorHandler.handleJSError(
                json.optString(<span class="hljs-string">"message"</span>, <span class="hljs-string">""</span>),
                json.optString(<span class="hljs-string">"stack"</span>, <span class="hljs-literal">null</span>)
            )
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            ErrorHandler.handleError(ErrorType.JS_ERROR, <span class="hljs-string">"Failed to parse JS error"</span>, e)
        }
    }
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callNative</span><span class="hljs-params">(method: <span class="hljs-type">String</span>, params: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// å¤„ç†è°ƒç”¨</span>
            handleNativeCall(method, params)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            ErrorHandler.handleBridgeError(method, e)
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleNativeCall</span><span class="hljs-params">(method: <span class="hljs-type">String</span>, params: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-comment">// å®ç°è°ƒç”¨é€»è¾‘</span>
    }
}

<span class="hljs-comment">// é…ç½®é”™è¯¯ä¸ŠæŠ¥</span>
ErrorHandler.setErrorReporter { errorInfo -&gt;
    <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-comment">// uploadErrorToServer(errorInfo)</span>
}
</code></pre>
<h4 data-id="heading-34">4.2.8 æ€§èƒ½ä¼˜åŒ–</h4>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. WebView å¤ç”¨</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViewPool = WebViewPool(context)

<span class="hljs-comment">// 2. ç¡¬ä»¶åŠ é€Ÿ</span>
webView.setLayerType(View.LAYER_TYPE_HARDWARE, <span class="hljs-literal">null</span>)

<span class="hljs-comment">// 3. å‡å°‘é€šä¿¡é¢‘ç‡ï¼ˆæ‰¹é‡å¤„ç†ï¼‰</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> batchExecutor = BatchJSExecutor(webView)

<span class="hljs-comment">// ä½¿ç”¨æ‰¹é‡æ‰§è¡Œå™¨</span>
batchExecutor.addCall(<span class="hljs-string">"console.log('1')"</span>)
batchExecutor.addCall(<span class="hljs-string">"console.log('2')"</span>)
<span class="hljs-comment">// 100ms åè‡ªåŠ¨æ‰¹é‡æ‰§è¡Œ</span>
</code></pre>
<hr/>
<h2 data-id="heading-35">äº”ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-36">5.1 WebView å†…å­˜æ³„æ¼é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼šWebView å¯èƒ½å¯¼è‡´ Activity å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>åŸå› </strong>ï¼š</p>
<ul>
<li>WebView æŒæœ‰ Activity çš„ Context å¼•ç”¨</li>
<li>WebView åœ¨åå°çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œç”Ÿå‘½å‘¨æœŸä¸ Activity ä¸ä¸€è‡´</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webView: WebView? = <span class="hljs-literal">null</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// ä½¿ç”¨ ApplicationContext åˆ›å»º WebViewï¼ˆå¦‚æœå¯èƒ½ï¼‰</span>
        webView = WebView(applicationContext)
        setContentView(webView)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// é‡è¦ï¼šåœ¨ onDestroy ä¸­æ¸…ç† WebView</span>
        webView?.let {
            <span class="hljs-keyword">try</span> {
                it.loadDataWithBaseURL(<span class="hljs-literal">null</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, <span class="hljs-literal">null</span>)
                it.clearHistory()
                it.clearCache(<span class="hljs-literal">true</span>)
                it.onPause()
                it.removeAllViews()
                it.destroy()
                webView = <span class="hljs-literal">null</span>
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
                ErrorHandler.handleError(
                    ErrorHandler.ErrorType.UNKNOWN_ERROR,
                    <span class="hljs-string">"Failed to destroy WebView"</span>,
                    e
                )
            }
        }
        <span class="hljs-keyword">super</span>.onDestroy()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPause</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onPause()
        webView?.onPause()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onResume()
        webView?.onResume()
    }
}
</code></pre>
<h3 data-id="heading-37">5.2 WebView æœªåŠ è½½å®Œæˆå°±è°ƒç”¨ JavaScript</h3>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨é¡µé¢åŠ è½½å®Œæˆå‰è°ƒç”¨ JavaScript ä¼šå¤±è´¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> isPageFinished = <span class="hljs-literal">false</span>

webView.webViewClient = <span class="hljs-keyword">object</span> : WebViewClient() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageFinished</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onPageFinished(view, url)
        isPageFinished = <span class="hljs-literal">true</span>
        <span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåå¯ä»¥å®‰å…¨è°ƒç”¨ JavaScript</span>
        callJavaScriptSafely()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageStarted</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?, favicon: <span class="hljs-type">Bitmap</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onPageStarted(view, url, favicon)
        isPageFinished = <span class="hljs-literal">false</span>
    }
}

<span class="hljs-comment">// å®‰å…¨è°ƒç”¨ JavaScript çš„æ–¹æ³•</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callJavaScriptSafely</span><span class="hljs-params">()</span></span> {
    webView?.let {
        <span class="hljs-comment">// æ–¹å¼1ï¼šå»¶è¿Ÿè°ƒç”¨ï¼Œç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½</span>
        it.postDelayed({
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
            it.evaluateJavaScriptSafe(<span class="hljs-string">"javascript:init()"</span>)
        }, <span class="hljs-number">500</span>)
        
        <span class="hljs-comment">// æ–¹å¼2ï¼šåœ¨ onPageFinished ä¸­ç›´æ¥è°ƒç”¨</span>
    }
}
</code></pre>
<h3 data-id="heading-38">5.3 evaluateJavascript è¿”å›å€¼æ ¼å¼é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼šè¿”å›å€¼åŒ…å«å¼•å·å’Œè½¬ä¹‰å­—ç¬¦ï¼Œè§£æå›°éš¾ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>JSResultParser</code> å·¥å…·ç±»è§£æè¿”å›å€¼</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„å·¥å…·ç±»è§£æè¿”å›å€¼</span>
webView.evaluateJavaScriptSafe(<span class="hljs-string">"javascript:getData()"</span>) { value -&gt;
    <span class="hljs-comment">// ä½¿ç”¨ JSResultParser è§£æ</span>
    <span class="hljs-keyword">val</span> cleaned = JSResultParser.parseResult(value)
    <span class="hljs-keyword">val</span> json = JSResultParser.parseAsJson(value)
    <span class="hljs-comment">// ä½¿ç”¨è§£æåçš„æ•°æ®</span>
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>æ¨èä½¿ç”¨ <code>evaluateJavaScriptSafe()</code> æ‰©å±•å‡½æ•°æ›¿ä»£ç›´æ¥è°ƒç”¨ <code>evaluateJavascript()</code></li>
<li>è¿”å›å€¼è§£æç»Ÿä¸€ä½¿ç”¨ <code>JSResultParser</code>ï¼Œé¿å…é‡å¤å®ç°è§£æé€»è¾‘</li>
</ul>
<h3 data-id="heading-39">5.4 ç‰¹æ®Šå­—ç¬¦è½¬ä¹‰é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¼ é€’åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å‚æ•°æ—¶ï¼ŒJavaScript æ‰§è¡Œå¤±è´¥ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">object</span> JSEscapeUtils {
    <span class="hljs-comment">/**
     * è½¬ä¹‰ JavaScript å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šå­—ç¬¦
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">escapeJS</span><span class="hljs-params">(input: <span class="hljs-type">String</span>?)</span></span>: String {
        <span class="hljs-keyword">if</span> (input == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">"null"</span>
        
        <span class="hljs-keyword">return</span> input.replace(<span class="hljs-string">"\\"</span>, <span class="hljs-string">"\\\\"</span>)
                   .replace(<span class="hljs-string">"'"</span>, <span class="hljs-string">"\\'"</span>)
                   .replace(<span class="hljs-string">"\""</span>, <span class="hljs-string">"\\\""</span>)
                   .replace(<span class="hljs-string">"\n"</span>, <span class="hljs-string">"\\n"</span>)
                   .replace(<span class="hljs-string">"\r"</span>, <span class="hljs-string">"\\r"</span>)
                   .replace(<span class="hljs-string">"\t"</span>, <span class="hljs-string">"\\t"</span>)
                   .replace(<span class="hljs-string">"/"</span>, <span class="hljs-string">"\\/"</span>)
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨åœ°è°ƒç”¨ JavaScriptï¼ˆæ¨èä½¿ç”¨ JSON ä¼ é€’å‚æ•°ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callJSSafely</span><span class="hljs-params">(webView: <span class="hljs-type">WebView</span>, functionName: <span class="hljs-type">String</span>, params: <span class="hljs-type">Any</span>? = <span class="hljs-literal">null</span>)</span></span> {
        <span class="hljs-keyword">val</span> jsCode = <span class="hljs-keyword">if</span> (params == <span class="hljs-literal">null</span>) {
            <span class="hljs-string">"javascript:<span class="hljs-variable">$functionName</span>()"</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// ä½¿ç”¨ JSON ä¼ é€’å‚æ•°ï¼Œé¿å…è½¬ä¹‰é—®é¢˜</span>
            <span class="hljs-keyword">val</span> jsonParams = JSONObject().put(<span class="hljs-string">"data"</span>, params).toString()
            <span class="hljs-string">"javascript:<span class="hljs-variable">$functionName</span>(<span class="hljs-variable">$jsonParams</span>)"</span>
        }
        
        <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
        webView.evaluateJavaScriptSafe(jsCode)
        <span class="hljs-comment">// æ³¨æ„ï¼šä½ç‰ˆæœ¬æ— æ³•è·å–è¿”å›å€¼ï¼Œå¦‚éœ€è¿”å›å€¼è¯·ä½¿ç”¨ WebViewBridgeKt</span>
    }
}
</code></pre>
<h3 data-id="heading-40">5.5 çº¿ç¨‹å®‰å…¨é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼šåœ¨éä¸»çº¿ç¨‹ä¸­è°ƒç”¨ WebView æ–¹æ³•ä¼šå¯¼è‡´å´©æºƒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">object</span> WebViewUtils {
    <span class="hljs-comment">/**
     * åœ¨ä¸»çº¿ç¨‹ä¸­å®‰å…¨è°ƒç”¨ WebView æ–¹æ³•
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callOnMainThread</span><span class="hljs-params">(webView: <span class="hljs-type">WebView</span>, runnable: <span class="hljs-type">Runnable</span>)</span></span> {
        <span class="hljs-keyword">if</span> (Looper.myLooper() == Looper.getMainLooper()) {
            <span class="hljs-comment">// å·²ç»åœ¨ä¸»çº¿ç¨‹</span>
            runnable.run()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹</span>
            Handler(Looper.getMainLooper()).post(runnable)
        }
    }
    
    <span class="hljs-comment">/**
     * å®‰å…¨è°ƒç”¨ JavaScript
     * æ³¨æ„ï¼šæ¨èä½¿ç”¨æ‰©å±•å‡½æ•° evaluateJavaScriptSafe()
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">evaluateJavaScript</span><span class="hljs-params">(
        webView: <span class="hljs-type">WebView</span>, 
        jsCode: <span class="hljs-type">String</span>, 
        callback: ((<span class="hljs-type">String</span>?) -&gt; <span class="hljs-type">Unit</span>)? = <span class="hljs-literal">null</span>
    )</span></span> {
        callOnMainThread(webView, Runnable {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
            webView.evaluateJavaScriptSafe(jsCode, callback)
        })
    }
}
</code></pre>
<h3 data-id="heading-41">5.6 WebView ç¼“å­˜é—®é¢˜</h3>
<p><strong>é—®é¢˜</strong>ï¼šWebView ç¼“å­˜å¯¼è‡´é¡µé¢ä¸æ›´æ–°ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ‰©å±•å‡½æ•°</span>
<span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼šä¸ä½¿ç”¨ç¼“å­˜</span>
<span class="hljs-keyword">if</span> (BuildConfig.DEBUG) {
    webView.setupDefaultSettings(enableCache = <span class="hljs-literal">false</span>)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼šä½¿ç”¨ç¼“å­˜</span>
    webView.setupDefaultSettings(enableCache = <span class="hljs-literal">true</span>)
}

<span class="hljs-comment">// æ¸…é™¤ç¼“å­˜ï¼ˆéœ€è¦æ—¶è°ƒç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearWebViewCache</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">try</span> {
        webView.clearCache(<span class="hljs-literal">true</span>)
        webView.clearHistory()
        CookieManager.getInstance().apply {
            removeAllCookies(<span class="hljs-literal">null</span>)
            flush()
        }
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
        ErrorHandler.handleError(
            ErrorHandler.ErrorType.CACHE_ERROR,
            <span class="hljs-string">"Failed to clear WebView cache"</span>,
            e
        )
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-42">å…­ã€å®é™…å¼€å‘ä¸­çš„å‘</h2>
<h3 data-id="heading-43">6.1 addJavascriptInterface æ–¹æ³•åå†²çª</h3>
<p><strong>å‘</strong>ï¼šå¦‚æœ JavaScript ä¸­å·²æœ‰åŒåå¯¹è±¡ï¼Œä¼šå¯¼è‡´å†²çªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨å”¯ä¸€çš„å‰ç¼€</span>
webView.addJavascriptInterface(JSInterface(), <span class="hljs-string">"MyAppAndroid"</span>)

<span class="hljs-comment">// æˆ–è€…æ£€æŸ¥ JavaScript ä¸­æ˜¯å¦å·²å­˜åœ¨</span>
<span class="hljs-keyword">val</span> checkCode = <span class="hljs-string">"""
    if (typeof Android !== 'undefined') {
        window.MyAppAndroid = Android;
    }
"""</span>.trimIndent()
<span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
webView.evaluateJavaScriptSafe(checkCode)
</code></pre>
<h3 data-id="heading-44">6.2 å¼‚æ­¥å›è°ƒæ—¶åºé—®é¢˜</h3>
<p><strong>å‘</strong>ï¼šJavaScript å¼‚æ­¥æ“ä½œå®Œæˆæ—¶ï¼ŒAndroid ç«¯å¯èƒ½å·²ç»é”€æ¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">JSInterface</span>(context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> contextRef = WeakReference(context)
    
    <span class="hljs-meta">@JavascriptInterface</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">handleAsyncResult</span><span class="hljs-params">(result: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> context = contextRef.<span class="hljs-keyword">get</span>()
        <span class="hljs-keyword">if</span> (context == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// Context å·²è¢«å›æ”¶ï¼Œå¿½ç•¥å›è°ƒ</span>
            <span class="hljs-keyword">return</span>
        }
        
        <span class="hljs-comment">// ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼</span>
        <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
    }
}
</code></pre>
<h3 data-id="heading-45">6.3 URL Scheme è¢«å…¶ä»–åº”ç”¨æ‹¦æˆª</h3>
<p><strong>å‘</strong>ï¼šè‡ªå®šä¹‰ URL Scheme å¯èƒ½è¢«å…¶ä»–åº”ç”¨æ‹¦æˆªã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldOverrideUrlLoading</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">if</span> (url?.startsWith(<span class="hljs-string">"myapp://"</span>) == <span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// éªŒè¯ URL æ¥æº</span>
        <span class="hljs-keyword">if</span> (isValidUrl(url)) {
            handleCustomUrl(url)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isValidUrl</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-comment">// æ·»åŠ ç­¾åéªŒè¯</span>
    <span class="hljs-keyword">val</span> uri = Uri.parse(url)
    <span class="hljs-keyword">val</span> signature = uri.getQueryParameter(<span class="hljs-string">"sig"</span>)
    <span class="hljs-comment">// éªŒè¯ç­¾å</span>
    <span class="hljs-keyword">return</span> verifySignature(url, signature)
}
</code></pre>
<h3 data-id="heading-46">6.4 evaluateJavascript åœ¨ä½ç‰ˆæœ¬è¿”å› null</h3>
<p><strong>å‘</strong>ï¼šAndroid 4.4 ä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒ evaluateJavascriptï¼Œéœ€è¦ä½¿ç”¨ loadUrlã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•° <code>evaluateJavaScriptSafe()</code>ï¼Œè‡ªåŠ¨å¤„ç†ç‰ˆæœ¬å…¼å®¹æ€§ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callJS</span><span class="hljs-params">(webView: <span class="hljs-type">WebView</span>, jsCode: <span class="hljs-type">String</span>, callback: ((<span class="hljs-type">String</span>?) -&gt; <span class="hljs-type">Unit</span>)? = <span class="hljs-literal">null</span>)</span></span> {
    webView.evaluateJavaScriptSafe(jsCode, callback)
    <span class="hljs-comment">// æ³¨æ„ï¼šä½ç‰ˆæœ¬æ— æ³•è·å–è¿”å›å€¼ï¼Œcallback ä¸ä¼šæ‰§è¡Œ</span>
    <span class="hljs-comment">// å¦‚éœ€è¿”å›å€¼ï¼Œè¯·ä½¿ç”¨ WebViewBridgeKt</span>
}
</code></pre>
<h3 data-id="heading-47">6.5 WebView åœ¨ Fragment ä¸­çš„ç”Ÿå‘½å‘¨æœŸé—®é¢˜</h3>
<p><strong>å‘</strong>ï¼šFragment ç”Ÿå‘½å‘¨æœŸä¸ WebView ä¸ä¸€è‡´ï¼Œå¯èƒ½å¯¼è‡´å´©æºƒã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewFragment</span> : <span class="hljs-type">Fragment</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> webView: WebView? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> isWebViewAvailable = <span class="hljs-literal">false</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, 
        container: <span class="hljs-type">ViewGroup</span>?, 
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View? {
        webView = WebView(requireContext())
        isWebViewAvailable = <span class="hljs-literal">true</span>
        <span class="hljs-keyword">return</span> webView
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        isWebViewAvailable = <span class="hljs-literal">false</span>
        webView?.destroy()
        webView = <span class="hljs-literal">null</span>
        <span class="hljs-keyword">super</span>.onDestroyView()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">callJavaScript</span><span class="hljs-params">(code: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">if</span> (isWebViewAvailable &amp;&amp; webView != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„æ‰©å±•å‡½æ•°</span>
            webView?.evaluateJavaScriptSafe(code)
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-48">ä¸ƒã€ç‰ˆæœ¬å…¼å®¹æ€§å¯¹ç…§è¡¨</h2>





















































<table><thead><tr><th>Android ç‰ˆæœ¬</th><th>API Level</th><th>å…³é”®ç‰¹æ€§</th><th>æ³¨æ„äº‹é¡¹</th></tr></thead><tbody><tr><td>Android 4.1</td><td>16</td><td><code>addJavascriptInterface</code> å­˜åœ¨å®‰å…¨æ¼æ´</td><td>å¿…é¡»ä½¿ç”¨ URL Scheme æˆ–å…¶ä»–æ–¹å¼</td></tr><tr><td>Android 4.2</td><td>17</td><td><code>@JavascriptInterface</code> æ³¨è§£å¿…éœ€</td><td>å¿…é¡»æ·»åŠ æ³¨è§£æ‰èƒ½ä½¿ç”¨</td></tr><tr><td>Android 4.4</td><td>19</td><td><code>evaluateJavascript</code> å¯ç”¨</td><td>æ¨èä½¿ç”¨ï¼Œæ”¯æŒè¿”å›å€¼</td></tr><tr><td>Android 5.0</td><td>21</td><td><code>shouldOverrideUrlLoading</code> æ–¹æ³•å˜æ›´</td><td>éœ€è¦é‡å†™æ–°æ–¹æ³•</td></tr><tr><td>Android 6.0</td><td>23</td><td><code>postMessage</code> æ”¯æŒ</td><td>å®˜æ–¹æ¨èçš„å®‰å…¨é€šä¿¡æ–¹å¼</td></tr><tr><td>Android 7.0</td><td>24</td><td>æ–‡ä»¶è®¿é—®é™åˆ¶æ›´ä¸¥æ ¼</td><td>æ³¨æ„æ–‡ä»¶è®¿é—®æƒé™</td></tr><tr><td>Android 8.0</td><td>26</td><td>WebView å¤šè¿›ç¨‹æ”¯æŒ</td><td>æ³¨æ„è¿›ç¨‹é—´é€šä¿¡</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-49">å…«ã€æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-50">8.1 èµ„æºé¢„åŠ è½½ç­–ç•¥</h3>
<p><strong>WebView æ± ï¼ˆé¢„åŠ è½½ä¼˜åŒ–åŸºç¡€ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewPool</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> pool = mutableListOf&lt;WebView&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxSize = <span class="hljs-number">3</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">obtain</span><span class="hljs-params">()</span></span>: WebView {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (pool.isNotEmpty()) {
            pool.removeAt(<span class="hljs-number">0</span>)
        } <span class="hljs-keyword">else</span> {
            WebView(context.applicationContext).apply {
                setupDefaultSettings()
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recycle</span><span class="hljs-params">(webView: <span class="hljs-type">WebView</span>)</span></span> {
        <span class="hljs-keyword">if</span> (pool.size &lt; maxSize) {
            webView.loadDataWithBaseURL(<span class="hljs-literal">null</span>, <span class="hljs-string">""</span>, <span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, <span class="hljs-literal">null</span>)
            pool.add(webView)
        } <span class="hljs-keyword">else</span> {
            webView.destroy()
        }
    }
}
</code></pre>
<h4 data-id="heading-51">8.1.1 é¡µé¢é¢„åŠ è½½</h4>
<p><strong>åŸç†</strong>ï¼šåœ¨ç”¨æˆ·è®¿é—®å‰æå‰åŠ è½½å¸¸ç”¨é¡µé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚ä½¿ç”¨ WebView æ± ä¸­çš„å®ä¾‹è¿›è¡Œé¢„åŠ è½½ï¼Œé¿å…é‡å¤åˆ›å»ºã€‚</p>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewPreloader</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViewPool: WebViewPool
) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> preloadWebView: WebView <span class="hljs-keyword">by</span> lazy { webViewPool.obtain() }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadPage</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> = preloadWebView.loadUrl(url)
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadPages</span><span class="hljs-params">(urls: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> = urls.forEach { preloadPage(it) }
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span> = webViewPool.recycle(preloadWebView)
}
</code></pre>
<h4 data-id="heading-52">8.1.2 é™æ€èµ„æºé¢„åŠ è½½</h4>
<p><strong>åŸç†</strong>ï¼šæå‰åŠ è½½ CSSã€JavaScriptã€å›¾ç‰‡ç­‰é™æ€èµ„æºã€‚ä½¿ç”¨ WebView æ± ä¸­çš„å®ä¾‹ï¼Œé¿å…ä¸ºé¢„åŠ è½½åˆ›å»ºé¢å¤–çš„ WebViewã€‚</p>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourcePreloader</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViewPool: WebViewPool
) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> preloadWebView: WebView <span class="hljs-keyword">by</span> lazy { webViewPool.obtain() }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadResource</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> html = <span class="hljs-keyword">when</span> {
            url.endsWith(<span class="hljs-string">".js"</span>) -&gt; <span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;script src=\"<span class="hljs-variable">$url</span>\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"</span>
            url.endsWith(<span class="hljs-string">".css"</span>) -&gt; <span class="hljs-string">"&lt;html&gt;&lt;head&gt;&lt;link rel=\"stylesheet\" href=\"<span class="hljs-variable">$url</span>\"&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html&gt;"</span>
            url.matches(Regex(<span class="hljs-string">".*\\.(jpg|jpeg|png|gif|webp)$"</span>, RegexOption.IGNORE_CASE)) -&gt; 
                <span class="hljs-string">"&lt;html&gt;&lt;body&gt;&lt;img src=\"<span class="hljs-variable">$url</span>\" style=\"display:none;\"&gt;&lt;/body&gt;&lt;/html&gt;"</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">return</span>
        }
        preloadWebView.loadDataWithBaseURL(<span class="hljs-literal">null</span>, html, <span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, <span class="hljs-literal">null</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span> = webViewPool.recycle(preloadWebView)
}
</code></pre>
<h4 data-id="heading-53">8.1.3 é¢„åŠ è½½æ—¶æœºæ§åˆ¶</h4>
<p><strong>åŸç†</strong>ï¼šé€‰æ‹©åˆé€‚çš„æ—¶æœºè¿›è¡Œé¢„åŠ è½½ï¼Œé¿å…å½±å“åº”ç”¨å¯åŠ¨é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PreloadManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViewPool = WebViewPool(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> preloader = WebViewPreloader(webViewPool)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> handler = Handler(Looper.getMainLooper())
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadOnAppStart</span><span class="hljs-params">()</span></span> {
        handler.postDelayed({
            preloader.preloadPages(listOf(<span class="hljs-string">"https://example.com/home"</span>, <span class="hljs-string">"https://example.com/about"</span>))
        }, <span class="hljs-number">3000</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">preloadAfterPageLoad</span><span class="hljs-params">(currentUrl: <span class="hljs-type">String</span>)</span></span> {
        handler.postDelayed({
            <span class="hljs-keyword">val</span> nextUrls = <span class="hljs-keyword">when</span> {
                currentUrl.contains(<span class="hljs-string">"/home"</span>) -&gt; listOf(<span class="hljs-string">"https://example.com/products"</span>)
                currentUrl.contains(<span class="hljs-string">"/products"</span>) -&gt; listOf(<span class="hljs-string">"https://example.com/product/detail"</span>)
                <span class="hljs-keyword">else</span> -&gt; emptyList()
            }
            preloader.preloadPages(nextUrls)
        }, <span class="hljs-number">1000</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span> = preloader.cleanup()
}
</code></pre>
<h3 data-id="heading-54">8.2 ç¦»çº¿ç¼“å­˜ç­–ç•¥</h3>
<h4 data-id="heading-55">8.2.1 WebView ç¼“å­˜å·¥ä½œåŸç†</h4>
<p><strong>ä¸€ã€WebView ç¼“å­˜çš„æ ¸å¿ƒæœºåˆ¶</strong></p>
<p>WebView çš„ç¼“å­˜åŸºäº <strong>HTTP ç¼“å­˜åè®®</strong>ï¼Œè¿™æ˜¯ Web æ ‡å‡†ç¼“å­˜æœºåˆ¶ï¼Œç”± WebView å†…æ ¸è‡ªåŠ¨ç®¡ç†ã€‚</p>
<p><strong>ç¼“å­˜å­˜å‚¨ä½ç½®</strong>ï¼š</p>
<ul>
<li>Android è·¯å¾„ï¼š<code>/data/data/åŒ…å/cache/webviewCache/</code></li>
<li>å­˜å‚¨å†…å®¹ï¼šHTMLã€CSSã€JavaScriptã€å›¾ç‰‡ç­‰æ‰€æœ‰ç½‘ç»œèµ„æº</li>
<li>å­˜å‚¨æ–¹å¼ï¼šæ–‡ä»¶ç³»ç»Ÿï¼ŒæŒ‰ URL å’Œç¼“å­˜ç­–ç•¥ç»„ç»‡</li>
</ul>
<p><strong>äºŒã€HTTP ç¼“å­˜çš„å·¥ä½œåŸç†</strong></p>
<p><strong>1. ç¼“å­˜åˆ¤æ–­æµç¨‹</strong></p>
<pre><code class="hljs language-sql" lang="sql">ç”¨æˆ·è¯·æ±‚èµ„æºï¼ˆå¦‚ https:<span class="hljs-operator">/</span><span class="hljs-operator">/</span>example.com<span class="hljs-operator">/</span>page.htmlï¼‰
    â†“
WebView æ£€æŸ¥æœ¬åœ°ç¼“å­˜ç›®å½•
    â†“
ç¼“å­˜æ˜¯å¦å­˜åœ¨ï¼Ÿ
    â”œâ”€ ä¸å­˜åœ¨ â†’ ç›´æ¥è¯·æ±‚ç½‘ç»œ â†’ ä¿å­˜å“åº”åˆ°ç¼“å­˜ â†’ è¿”å›ç»™ WebView
    â””â”€ å­˜åœ¨ â†’ æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
         â”œâ”€ æœªè¿‡æœŸ â†’ ç›´æ¥è¿”å›ç¼“å­˜ï¼ˆä¸è¯·æ±‚ç½‘ç»œï¼Œ<span class="hljs-number">200</span> <span class="hljs-keyword">from</span> cacheï¼‰
         â””â”€ å·²è¿‡æœŸ â†’ å‘é€æ¡ä»¶è¯·æ±‚ï¼ˆIf<span class="hljs-operator">-</span><span class="hljs-keyword">None</span><span class="hljs-operator">-</span><span class="hljs-keyword">Match</span> <span class="hljs-operator">/</span> If<span class="hljs-operator">-</span>Modified<span class="hljs-operator">-</span>Sinceï¼‰
              â”œâ”€ æœåŠ¡å™¨è¿”å› <span class="hljs-number">304</span> â†’ ä½¿ç”¨ç¼“å­˜ï¼ˆæ›´æ–°è¿‡æœŸæ—¶é—´ï¼‰
              â””â”€ æœåŠ¡å™¨è¿”å› <span class="hljs-number">200</span> â†’ æ›´æ–°ç¼“å­˜ï¼ˆæ–°å†…å®¹ï¼‰
</code></pre>
<p><strong>2. ç¼“å­˜è¿‡æœŸåˆ¤æ–­</strong></p>
<p>WebView æ ¹æ® HTTP å“åº”å¤´åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼š</p>
<ul>
<li>
<p><strong>Cache-Control: max-age=3600</strong></p>
<ul>
<li>ç¼“å­˜æœ‰æ•ˆæœŸ 3600 ç§’ï¼ˆ1å°æ—¶ï¼‰</li>
<li>è®¡ç®—ï¼š<code>å½“å‰æ—¶é—´ - ç¼“å­˜æ—¶é—´ &lt; max-age</code> â†’ æœªè¿‡æœŸ</li>
</ul>
</li>
<li>
<p><strong>Expires: Wed, 21 Oct 2024 08:00:00 GMT</strong></p>
<ul>
<li>ç»å¯¹è¿‡æœŸæ—¶é—´</li>
<li>è®¡ç®—ï¼š<code>å½“å‰æ—¶é—´ &lt; Expires æ—¶é—´</code> â†’ æœªè¿‡æœŸ</li>
</ul>
</li>
</ul>
<p><strong>3. æ¡ä»¶è¯·æ±‚æœºåˆ¶ï¼ˆéªŒè¯ç¼“å­˜æœ‰æ•ˆæ€§ï¼‰</strong></p>
<p>å½“ç¼“å­˜è¿‡æœŸæ—¶ï¼ŒWebView ä¸ä¼šç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯å‘é€æ¡ä»¶è¯·æ±‚éªŒè¯ï¼š</p>
<pre><code class="hljs language-less" lang="less">ç¼“å­˜å·²è¿‡æœŸ
    â†“
å‘é€è¯·æ±‚ï¼Œæºå¸¦æ¡ä»¶å¤´ï¼š
  If-<span class="hljs-attribute">None-Match</span>: <span class="hljs-string">"abc123"</span>        <span class="hljs-comment">// ETag å€¼</span>
  <span class="hljs-attribute">If-Modified-Since</span>: Wed, <span class="hljs-number">21</span> Oct <span class="hljs-number">2024</span> <span class="hljs-number">07</span>:<span class="hljs-number">28</span>:<span class="hljs-number">00</span> GMT
    â†“
æœåŠ¡å™¨æ£€æŸ¥èµ„æºæ˜¯å¦å˜åŒ–
    â”œâ”€ æœªå˜åŒ– â†’ è¿”å› <span class="hljs-number">304</span> <span class="hljs-keyword">Not</span> Modified â†’ WebView ä½¿ç”¨ç¼“å­˜ï¼ˆæ›´æ–°è¿‡æœŸæ—¶é—´ï¼‰
    â””â”€ å·²å˜åŒ– â†’ è¿”å› <span class="hljs-number">200</span> + æ–°å†…å®¹ â†’ WebView æ›´æ–°ç¼“å­˜
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šèŠ‚çœå¸¦å®½ï¼Œå³ä½¿ç¼“å­˜è¿‡æœŸï¼Œå¦‚æœå†…å®¹æœªå˜ï¼Œä»å¯ä½¿ç”¨ç¼“å­˜ã€‚</p>
<p><strong>ä¸‰ã€WebView ç¼“å­˜æ¨¡å¼è¯¦è§£</strong></p>
<p>WebView æä¾› 4 ç§ç¼“å­˜æ¨¡å¼ï¼ˆé€šè¿‡ <code>webView.settings.cacheMode</code> è®¾ç½®ï¼‰ï¼š</p>
<p><strong>1. LOAD_DEFAULTï¼ˆé»˜è®¤æ¨¡å¼ï¼Œæ¨èï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ±‚èµ„æº
<span class="hljs-code">    â†“
æ£€æŸ¥ HTTP ç¼“å­˜å¤´ï¼ˆCache-Controlã€Expiresï¼‰
    â†“
æœ‰ç¼“å­˜å¤´ä¸”æœ‰æ•ˆï¼Ÿ â†’ æ˜¯ â†’ ä½¿ç”¨ç¼“å­˜ï¼ˆä¸è¯·æ±‚ç½‘ç»œï¼‰
    â†“ å¦
è¯·æ±‚ç½‘ç»œ â†’ ä¿å­˜åˆ°ç¼“å­˜ â†’ è¿”å›ç»™ WebView
</span></code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¤§å¤šæ•° Web åº”ç”¨</li>
<li>æœåŠ¡å™¨æ­£ç¡®è®¾ç½®äº†ç¼“å­˜å¤´çš„æƒ…å†µ</li>
<li>éœ€è¦å¹³è¡¡æ€§èƒ½å’Œå®æ—¶æ€§çš„åœºæ™¯</li>
</ul>
<p><strong>2. LOAD_CACHE_ELSE_NETWORKï¼ˆç¼“å­˜ä¼˜å…ˆï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ±‚èµ„æº
<span class="hljs-code">    â†“
æ£€æŸ¥æœ¬åœ°ç¼“å­˜
    â†“
æœ‰ç¼“å­˜ï¼Ÿ â†’ æ˜¯ â†’ ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼ˆå³ä½¿è¿‡æœŸä¹Ÿä¸è¯·æ±‚ç½‘ç»œï¼‰
    â†“ å¦
è¯·æ±‚ç½‘ç»œ â†’ ä¿å­˜åˆ°ç¼“å­˜ â†’ è¿”å›ç»™ WebView
</span></code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç¦»çº¿ä¼˜å…ˆçš„åº”ç”¨ï¼ˆæ–°é—»é˜…è¯»ã€æ–‡æ¡£æŸ¥çœ‹ï¼‰</li>
<li>ç½‘ç»œä¸ç¨³å®šæ—¶ä»å¯æŸ¥çœ‹å†å²å†…å®¹</li>
<li>å†…å®¹æ›´æ–°ä¸é¢‘ç¹çš„åœºæ™¯</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šå³ä½¿ç¼“å­˜è¿‡æœŸä¹Ÿä¼šä½¿ç”¨ï¼Œå¯èƒ½å¯¼è‡´æ˜¾ç¤ºæ—§å†…å®¹ã€‚</p>
<p><strong>3. LOAD_NO_CACHEï¼ˆä¸ä½¿ç”¨ç¼“å­˜ï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ±‚èµ„æº
<span class="hljs-code">    â†“
å¿½ç•¥æ‰€æœ‰ç¼“å­˜
    â†“
ç›´æ¥è¯·æ±‚ç½‘ç»œ â†’ ä¸ä¿å­˜åˆ°ç¼“å­˜ â†’ è¿”å›ç»™ WebView
</span></code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦å®æ—¶æ•°æ®çš„é¡µé¢ï¼ˆè‚¡ç¥¨è¡Œæƒ…ã€å®æ—¶èŠå¤©ï¼‰</li>
<li>æ¯æ¬¡éƒ½éœ€è¦æœ€æ–°å†…å®¹çš„åœºæ™¯</li>
<li>è°ƒè¯•é˜¶æ®µï¼Œç¡®ä¿è·å–æœ€æ–°å†…å®¹</li>
</ul>
<p><strong>4. LOAD_CACHE_ONLYï¼ˆä»…ä½¿ç”¨ç¼“å­˜ï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">è¯·æ±‚èµ„æº
<span class="hljs-code">    â†“
æ£€æŸ¥æœ¬åœ°ç¼“å­˜
    â†“
æœ‰ç¼“å­˜ï¼Ÿ â†’ æ˜¯ â†’ ä½¿ç”¨ç¼“å­˜
    â†“ å¦
è¿”å›ç©ºç™½é¡µé¢ï¼ˆä¸è¯·æ±‚ç½‘ç»œï¼‰
</span></code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å®Œå…¨ç¦»çº¿æ¨¡å¼</li>
<li>å·²é¢„åŠ è½½æ‰€æœ‰å†…å®¹çš„åœºæ™¯</li>
<li>ä¸ä¾èµ–ç½‘ç»œçš„ç¦»çº¿åº”ç”¨</li>
</ul>
<p><strong>å››ã€HTTP ç¼“å­˜å¤´è¯¦è§£</strong></p>
<p><strong>1. Cache-Controlï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">Cache-Control: max-age=<span class="hljs-number">3600</span>          <span class="hljs-comment">// ç¼“å­˜æœ‰æ•ˆæœŸ 3600 ç§’</span>
Cache-Control: no-cache              <span class="hljs-comment">// æ¯æ¬¡éƒ½è¦éªŒè¯ç¼“å­˜ï¼ˆå‘é€æ¡ä»¶è¯·æ±‚ï¼‰</span>
Cache-Control: no-store              <span class="hljs-comment">// ä¸å­˜å‚¨ç¼“å­˜</span>
Cache-Control: must-revalidate       <span class="hljs-comment">// ç¼“å­˜è¿‡æœŸåå¿…é¡»éªŒè¯</span>
Cache-Control: <span class="hljs-keyword">public</span>                <span class="hljs-comment">// å¯ä»¥è¢«ä»»ä½•ç¼“å­˜å­˜å‚¨</span>
Cache-Control: <span class="hljs-keyword">private</span>               <span class="hljs-comment">// åªèƒ½è¢«æµè§ˆå™¨ç¼“å­˜ï¼Œä¸èƒ½è¢« CDN ç¼“å­˜</span>
</code></pre>
<p><strong>2. ETag / If-None-Matchï¼ˆå†…å®¹æŒ‡çº¹éªŒè¯ï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼š
  æœåŠ¡å™¨è¿”å›ï¼šETag: "abc123"ï¼ˆèµ„æºçš„å”¯ä¸€æ ‡è¯†ï¼Œé€šå¸¸æ˜¯å†…å®¹å“ˆå¸Œï¼‰
  WebView ä¿å­˜ ETag å’Œå†…å®¹

ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç¼“å­˜è¿‡æœŸï¼‰ï¼š
  WebView å‘é€ï¼šIf<span class="hljs-operator">-</span><span class="hljs-keyword">None</span><span class="hljs-operator">-</span><span class="hljs-keyword">Match</span>: "abc123"
  æœåŠ¡å™¨æ¯”è¾ƒï¼š
    <span class="hljs-operator">-</span> èµ„æºæœªå˜ â†’ è¿”å› <span class="hljs-number">304</span> <span class="hljs-keyword">Not</span> Modifiedï¼ˆä¸è¿”å›å†…å®¹ï¼ŒèŠ‚çœå¸¦å®½ï¼‰
    <span class="hljs-operator">-</span> èµ„æºå·²å˜ â†’ è¿”å› <span class="hljs-number">200</span> <span class="hljs-operator">+</span> æ–°å†…å®¹ <span class="hljs-operator">+</span> æ–° ETag
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå³ä½¿ç¼“å­˜è¿‡æœŸï¼Œå¦‚æœå†…å®¹æœªå˜ï¼Œä»å¯ä½¿ç”¨ç¼“å­˜ï¼ŒèŠ‚çœå¸¦å®½ã€‚</p>
<p><strong>3. Last-Modified / If-Modified-Sinceï¼ˆæ—¶é—´æˆ³éªŒè¯ï¼‰</strong></p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼š
  æœåŠ¡å™¨è¿”å›ï¼šLast-Modified: Wed, 21 Oct 2024 07:28:00 GMT
  WebView ä¿å­˜æ—¶é—´æˆ³å’Œå†…å®¹

ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆç¼“å­˜è¿‡æœŸï¼‰ï¼š
  WebView å‘é€ï¼šIf-Modified-Since: Wed, 21 Oct 2024 07:28:00 GMT
  æœåŠ¡å™¨æ¯”è¾ƒï¼š
<span class="hljs-bullet">    -</span> èµ„æºæœªå˜ â†’ è¿”å› 304 Not Modified
<span class="hljs-bullet">    -</span> èµ„æºå·²å˜ â†’ è¿”å› 200 + æ–°å†…å®¹ + æ–° Last-Modified
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šLast-Modified ç²¾åº¦æ˜¯ç§’çº§ï¼Œå¦‚æœèµ„æºåœ¨ 1 ç§’å†…å¤šæ¬¡ä¿®æ”¹ï¼Œå¯èƒ½æ— æ³•æ£€æµ‹åˆ°å˜åŒ–ã€‚</p>
<p><strong>äº”ã€ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸå®Œæ•´æµç¨‹</strong></p>
<pre><code class="hljs language-python" lang="python">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">1.</span> é¦–æ¬¡è¯·æ±‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç”¨æˆ·è¯·æ±‚ URL
    â†“
WebView æ£€æŸ¥ç¼“å­˜ç›®å½• â†’ ä¸å­˜åœ¨
    â†“
è¯·æ±‚ç½‘ç»œ
    â†“
æœåŠ¡å™¨è¿”å›ï¼š
  - å“åº”å†…å®¹ï¼ˆHTML/CSS/JS/å›¾ç‰‡ç­‰ï¼‰
  - ç¼“å­˜å¤´ï¼ˆCache-Controlã€ETagã€Last-Modifiedï¼‰
    â†“
WebView ä¿å­˜åˆ°ç¼“å­˜ç›®å½•ï¼š
  - æ–‡ä»¶å†…å®¹
  - å…ƒæ•°æ®ï¼ˆURLã€æ—¶é—´æˆ³ã€ETagã€è¿‡æœŸæ—¶é—´ç­‰ï¼‰
    â†“
è¿”å›ç»™ WebView æ¸²æŸ“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">2.</span> å†æ¬¡è¯·æ±‚ï¼ˆç¼“å­˜æœªè¿‡æœŸï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç”¨æˆ·è¯·æ±‚ç›¸åŒ URL
    â†“
WebView æ£€æŸ¥ç¼“å­˜ç›®å½• â†’ å­˜åœ¨
    â†“
æ£€æŸ¥è¿‡æœŸæ—¶é—´ï¼š
  å½“å‰æ—¶é—´ - ç¼“å­˜æ—¶é—´ &lt; <span class="hljs-built_in">max</span>-age â†’ æœªè¿‡æœŸ
    â†“
ç›´æ¥è¿”å›ç¼“å­˜ï¼ˆ<span class="hljs-number">200</span> <span class="hljs-keyword">from</span> cacheï¼‰
    â†“
ä¸è¯·æ±‚ç½‘ç»œï¼Œç«‹å³æ˜¾ç¤º

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-number">3.</span> å†æ¬¡è¯·æ±‚ï¼ˆç¼“å­˜å·²è¿‡æœŸï¼‰                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
ç”¨æˆ·è¯·æ±‚ç›¸åŒ URL
    â†“
WebView æ£€æŸ¥ç¼“å­˜ç›®å½• â†’ å­˜åœ¨
    â†“
æ£€æŸ¥è¿‡æœŸæ—¶é—´ï¼š
  å½“å‰æ—¶é—´ - ç¼“å­˜æ—¶é—´ &gt;= <span class="hljs-built_in">max</span>-age â†’ å·²è¿‡æœŸ
    â†“
å‘é€æ¡ä»¶è¯·æ±‚ï¼ˆæºå¸¦ If-<span class="hljs-literal">None</span>-Match / If-Modified-Sinceï¼‰
    â†“
æœåŠ¡å™¨éªŒè¯ï¼š
  â”œâ”€ èµ„æºæœªå˜ â†’ è¿”å› <span class="hljs-number">304</span> Not Modified
  â”‚     â†“
  â”‚  WebView ä½¿ç”¨ç¼“å­˜ï¼ˆæ›´æ–°è¿‡æœŸæ—¶é—´ï¼‰
  â”‚     â†“
  â”‚  è¿”å›ç»™ WebView æ¸²æŸ“
  â”‚
  â””â”€ èµ„æºå·²å˜ â†’ è¿”å› <span class="hljs-number">200</span> + æ–°å†…å®¹
        â†“
    WebView æ›´æ–°ç¼“å­˜ï¼ˆè¦†ç›–æ—§å†…å®¹ï¼‰
        â†“
    è¿”å›ç»™ WebView æ¸²æŸ“
</code></pre>
<p><strong>å…­ã€ç¼“å­˜å­˜å‚¨çš„ç‰©ç†ç»“æ„</strong></p>
<pre><code class="hljs language-bash" lang="bash">/data/data/åŒ…å/cache/webviewCache/
  â”œâ”€â”€ Cache/
  â”‚   â”œâ”€â”€ f_000001          <span class="hljs-comment"># ç¼“å­˜çš„èµ„æºæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶ï¼‰</span>
  â”‚   â”œâ”€â”€ f_000002
  â”‚   â””â”€â”€ ...
  â”œâ”€â”€ Code Cache/           <span class="hljs-comment"># JavaScript ä»£ç ç¼“å­˜ï¼ˆV8 å¼•æ“ä¼˜åŒ–ï¼‰</span>
  â”‚   â””â”€â”€ ...
  â””â”€â”€ GPUCache/             <span class="hljs-comment"># GPU ç›¸å…³ç¼“å­˜</span>
      â””â”€â”€ ...
</code></pre>
<p><strong>ç¼“å­˜æ–‡ä»¶å‘½å</strong>ï¼š</p>
<ul>
<li>WebView ä½¿ç”¨å†…éƒ¨ç®—æ³•ç”Ÿæˆæ–‡ä»¶åï¼ˆé€šå¸¸æ˜¯ URL çš„å“ˆå¸Œå€¼ï¼‰</li>
<li>æ— æ³•ç›´æ¥é€šè¿‡æ–‡ä»¶åè¯†åˆ«å¯¹åº”çš„ URL</li>
<li>å…ƒæ•°æ®å­˜å‚¨åœ¨ WebView å†…éƒ¨æ•°æ®åº“ä¸­</li>
</ul>
<p><strong>ä¸ƒã€DOM å­˜å‚¨ï¼ˆLocalStorage / SessionStorageï¼‰</strong></p>
<p><strong>LocalStorage</strong>ï¼š</p>
<ul>
<li><strong>å­˜å‚¨ä½ç½®</strong>ï¼š<code>/data/data/åŒ…å/app_webview/Default/Local Storage/</code></li>
<li><strong>å­˜å‚¨æ–¹å¼</strong>ï¼šé”®å€¼å¯¹ï¼ŒæŒä¹…åŒ–å­˜å‚¨</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šé™¤éæ‰‹åŠ¨æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜</li>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šåŒæºç­–ç•¥ï¼ˆç›¸åŒåè®®ã€åŸŸåã€ç«¯å£ï¼‰</li>
</ul>
<p><strong>SessionStorage</strong>ï¼š</p>
<ul>
<li><strong>å­˜å‚¨ä½ç½®</strong>ï¼šå†…å­˜ä¸­</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¼šè¯ç»“æŸï¼ˆå…³é—­ WebViewï¼‰åæ¸…é™¤</li>
<li><strong>ä½œç”¨åŸŸ</strong>ï¼šåŒæºç­–ç•¥</li>
</ul>
<p><strong>IndexedDB</strong>ï¼š</p>
<ul>
<li><strong>å­˜å‚¨ä½ç½®</strong>ï¼š<code>/data/data/åŒ…å/app_webview/Default/IndexedDB/</code></li>
<li><strong>å­˜å‚¨æ–¹å¼</strong>ï¼šNoSQL æ•°æ®åº“ï¼Œæ”¯æŒå¤æ‚æ•°æ®ç»“æ„</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ®</li>
</ul>
<p><strong>æ³¨æ„</strong>ï¼šè¿™äº›å­˜å‚¨æœºåˆ¶ä¸ HTTP ç¼“å­˜ä¸åŒï¼Œä¸»è¦ç”¨äºå­˜å‚¨åº”ç”¨æ•°æ®ï¼Œè€Œéç½‘ç»œèµ„æºã€‚</p>
<h4 data-id="heading-56">8.2.2 WebView ç¼“å­˜é…ç½®å®ç°</h4>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewCacheManager</span> {
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-comment">/**
         * é…ç½® WebView ç¼“å­˜
         */</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupCache</span><span class="hljs-params">(webView: <span class="hljs-type">WebView</span>, enableCache: <span class="hljs-type">Boolean</span> = <span class="hljs-literal">true</span>)</span></span> {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ‰©å±•å‡½æ•°</span>
            webView.setupDefaultSettings(enableCache)
            
            <span class="hljs-comment">// å¦‚æœéœ€è¦è‡ªå®šä¹‰ç¼“å­˜ç­–ç•¥ï¼Œå¯ä»¥å•ç‹¬è®¾ç½®</span>
            <span class="hljs-keyword">if</span> (enableCache) {
                webView.settings.cacheMode = WebSettings.LOAD_CACHE_ELSE_NETWORK
            }
            
            <span class="hljs-comment">// æ³¨æ„ï¼šsetAppCacheEnabled åœ¨ Android 5.0+ å·²åºŸå¼ƒï¼Œä¸åº”ä½¿ç”¨</span>
            <span class="hljs-comment">// å¦‚éœ€æ›´çµæ´»çš„ç¼“å­˜æ§åˆ¶ï¼Œæ¨èä½¿ç”¨è‡ªå®šä¹‰ç¼“å­˜ï¼ˆè§ 8.2.3ï¼‰</span>
        }
        
        <span class="hljs-comment">/**
         * æ¸…é™¤ WebView ç¼“å­˜
         */</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearCache</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span> {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ¸…é™¤ç¼“å­˜</span>
                WebView(context).clearCache(<span class="hljs-literal">true</span>)
                
                <span class="hljs-comment">// æ¸…é™¤å†å²è®°å½•</span>
                WebView(context).clearHistory()
                
                <span class="hljs-comment">// æ¸…é™¤ Cookie</span>
                CookieManager.getInstance().apply {
                    removeAllCookies(<span class="hljs-literal">null</span>)
                    flush()
                }
                
                <span class="hljs-comment">// æ³¨æ„ï¼šAppCache å·²åœ¨ Android 5.0+ åºŸå¼ƒï¼Œæ— éœ€æ¸…é™¤</span>
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
                ErrorHandler.handleError(
                    ErrorHandler.ErrorType.CACHE_ERROR,
                    <span class="hljs-string">"Failed to clear WebView cache"</span>,
                    e
                )
            }
        }
        
        <span class="hljs-comment">/**
         * è·å–ç¼“å­˜å¤§å°
         */</span>
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCacheSize</span><span class="hljs-params">(context: <span class="hljs-type">Context</span>)</span></span>: <span class="hljs-built_in">Long</span> {
            <span class="hljs-keyword">val</span> cacheDir = File(context.cacheDir, <span class="hljs-string">"webview"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (cacheDir.exists()) {
                cacheDir.walkTopDown().sumOf { it.length() }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-number">0L</span>
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-57">8.2.3 è‡ªå®šä¹‰ç¦»çº¿ç¼“å­˜ç®¡ç†å™¨åŸç†</h4>
<p><strong>ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è‡ªå®šä¹‰ç¼“å­˜ï¼Ÿ</strong></p>
<p>WebView å†…ç½®çš„ HTTP ç¼“å­˜æœ‰ä»¥ä¸‹é™åˆ¶ï¼š</p>
<ol>
<li><strong>ä¾èµ–æœåŠ¡å™¨å“åº”å¤´</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ²¡æœ‰è®¾ç½®ç¼“å­˜å¤´ï¼Œæ— æ³•ç¼“å­˜</li>
<li><strong>æ— æ³•è·¨åŸŸç¼“å­˜</strong>ï¼šæŸäº›è·¨åŸŸèµ„æºæ— æ³•ç¼“å­˜</li>
<li><strong>ç¼“å­˜ç­–ç•¥å›ºå®š</strong>ï¼šæ— æ³•çµæ´»æ§åˆ¶ç¼“å­˜é€»è¾‘</li>
<li><strong>æ— æ³•åŠ å¯†å­˜å‚¨</strong>ï¼šç¼“å­˜æ•°æ®ä»¥æ˜æ–‡å­˜å‚¨</li>
<li><strong>æ— æ³•è‡ªå®šä¹‰è¿‡æœŸæ—¶é—´</strong>ï¼šåªèƒ½ä¾èµ–æœåŠ¡å™¨çš„ Cache-Control</li>
</ol>
<p><strong>è‡ªå®šä¹‰ç¼“å­˜å¯ä»¥è§£å†³è¿™äº›é—®é¢˜</strong>ï¼Œå®ç°å®Œå…¨å¯æ§çš„ç¼“å­˜ç­–ç•¥ã€‚</p>
<p><strong>äºŒã€è‡ªå®šä¹‰ç¼“å­˜çš„æ ¸å¿ƒåŸç†</strong></p>
<p>è‡ªå®šä¹‰ç¼“å­˜é€šè¿‡ <code>shouldInterceptRequest</code> æ–¹æ³•æ‹¦æˆª WebView çš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">WebView è¯·æ±‚èµ„æº
    â†“
shouldInterceptRequest æ‹¦æˆªï¼ˆAndroid ç«¯ï¼‰
    â†“
æ£€æŸ¥è‡ªå®šä¹‰ç¼“å­˜ï¼ˆæ–‡ä»¶ç³»ç»Ÿ/æ•°æ®åº“ï¼‰
    â†“
æœ‰ç¼“å­˜ä¸”æœ‰æ•ˆï¼Ÿ â†’ æ˜¯ â†’ æ„é€  WebResourceResponse è¿”å›ç¼“å­˜
    â†“ å¦
è¿”å› <span class="hljs-literal">null</span> â†’ WebView ç»§ç»­é»˜è®¤æµç¨‹ï¼ˆHTTP ç¼“å­˜ â†’ ç½‘ç»œè¯·æ±‚ï¼‰
    â†“
onPageFinishedï¼ˆé¡µé¢åŠ è½½å®Œæˆï¼‰
    â†“
è·å–é¡µé¢ HTML å†…å®¹
    â†“
ä¿å­˜åˆ°è‡ªå®šä¹‰ç¼“å­˜ï¼ˆæ–‡ä»¶ç³»ç»Ÿ/æ•°æ®åº“ï¼‰
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li><code>shouldInterceptRequest</code> åœ¨è¯·æ±‚å‘èµ·å‰æ‹¦æˆªï¼Œå¯ä»¥è¿”å›ç¼“å­˜çš„å“åº”</li>
<li>å¦‚æœè¿”å› <code>null</code>ï¼ŒWebView ä¼šç»§ç»­ä½¿ç”¨é»˜è®¤çš„ HTTP ç¼“å­˜æœºåˆ¶</li>
<li>åœ¨ <code>onPageFinished</code> ä¸­ä¿å­˜é¡µé¢å†…å®¹ï¼Œå®ç°ç¼“å­˜æ›´æ–°</li>
</ul>
<p><strong>ä¸‰ã€ç¼“å­˜å­˜å‚¨æ¶æ„</strong></p>
<p><strong>1. æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">cacheDir/
  â””â”€â”€ offline_cache/
       â”œâ”€â”€ index.json          <span class="hljs-comment"># ç¼“å­˜ç´¢å¼•ï¼ˆURL -&gt; æ–‡ä»¶è·¯å¾„æ˜ å°„ï¼‰</span>
       â”œâ”€â”€ 12345.html          <span class="hljs-comment"># ç¼“å­˜çš„ HTML æ–‡ä»¶ï¼ˆURL å“ˆå¸Œå€¼ä½œä¸ºæ–‡ä»¶åï¼‰</span>
       â”œâ”€â”€ 67890.html
       â””â”€â”€ ...
</code></pre>
<p><strong>ç´¢å¼•æ–‡ä»¶ç»“æ„</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"https://example.com/page1"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"hash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"12345"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1698123456789</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ttl"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">604800000</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"https://example.com/page2"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"hash"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"67890"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1698123456790</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ttl"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">604800000</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å®ç°ç®€å•ï¼Œç›´æ¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ</li>
<li>å­˜å‚¨æ•ˆç‡é«˜ï¼Œé€‚åˆå¤§æ–‡ä»¶</li>
<li>æ˜“äºè°ƒè¯•ï¼Œå¯ä»¥ç›´æ¥æŸ¥çœ‹æ–‡ä»¶</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>éœ€è¦æ‰‹åŠ¨ç®¡ç†æ–‡ä»¶</li>
<li>æŸ¥è¯¢æ•ˆç‡ç›¸å¯¹è¾ƒä½ï¼ˆéœ€è¦éå†ç´¢å¼•ï¼‰</li>
</ul>
<p><strong>2. æ•°æ®åº“å­˜å‚¨</strong></p>
<pre><code class="hljs language-scss" lang="scss">SQLite æ•°æ®åº“
  â””â”€â”€ cache_table
       â”œâ”€â”€ url (TEXT PRIMARY KEY)
       â”œâ”€â”€ <span class="hljs-attribute">content</span> (BLOB)        # ç¼“å­˜çš„ <span class="hljs-selector-tag">HTML</span> å†…å®¹
       â”œâ”€â”€ timestamp (INTEGER)   # ç¼“å­˜æ—¶é—´æˆ³
       â””â”€â”€ ttl (INTEGER)         # è¿‡æœŸæ—¶é—´
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æŸ¥è¯¢æ•ˆç‡é«˜ï¼Œæ”¯æŒç´¢å¼•</li>
<li>æ”¯æŒå¤æ‚æŸ¥è¯¢ï¼ˆå¦‚æŒ‰æ—¶é—´ã€å¤§å°æ’åºï¼‰</li>
<li>äº‹åŠ¡æ”¯æŒï¼Œæ•°æ®ä¸€è‡´æ€§å¥½</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¤§æ–‡ä»¶å­˜å‚¨æ•ˆç‡ä½ï¼ˆBLOB å­—æ®µï¼‰</li>
<li>å®ç°ç›¸å¯¹å¤æ‚</li>
</ul>
<p><strong>3. æ··åˆå­˜å‚¨ï¼ˆæœ€ä½³å®è·µï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash">æ•°æ®åº“ï¼ˆå…ƒæ•°æ®ï¼‰
  â””â”€â”€ cache_metadata
       â”œâ”€â”€ url
       â”œâ”€â”€ file_path          <span class="hljs-comment"># æ–‡ä»¶è·¯å¾„</span>
       â”œâ”€â”€ timestamp
       â””â”€â”€ ttl

æ–‡ä»¶ç³»ç»Ÿï¼ˆå†…å®¹ï¼‰
  â””â”€â”€ cache_files/
       â”œâ”€â”€ 12345.html
       â””â”€â”€ 67890.html
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å…¼é¡¾æŸ¥è¯¢æ•ˆç‡å’Œå­˜å‚¨æ•ˆç‡</li>
<li>å…ƒæ•°æ®æŸ¥è¯¢å¿«ï¼Œå¤§æ–‡ä»¶å­˜å‚¨æ•ˆç‡é«˜</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å®ç°å¤æ‚ï¼Œéœ€è¦ç»´æŠ¤ä¸¤å¥—å­˜å‚¨</li>
</ul>
<p><strong>å››ã€ç¼“å­˜å¤±æ•ˆç­–ç•¥è¯¦è§£</strong></p>
<p><strong>1. TTLï¼ˆTime To Liveï¼‰æ—¶é—´è¿‡æœŸ</strong></p>
<p><strong>åŸç†</strong>ï¼šæ¯ä¸ªç¼“å­˜æ¡ç›®è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´åè‡ªåŠ¨å¤±æ•ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¿å­˜æ—¶è®¾ç½®è¿‡æœŸæ—¶é—´</span>
<span class="hljs-keyword">val</span> ttl = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span>  <span class="hljs-comment">// 7 å¤©</span>
<span class="hljs-keyword">val</span> timestamp = System.currentTimeMillis()

<span class="hljs-comment">// æ£€æŸ¥æ—¶åˆ¤æ–­æ˜¯å¦è¿‡æœŸ</span>
<span class="hljs-keyword">val</span> age = System.currentTimeMillis() - timestamp
<span class="hljs-keyword">if</span> (age &gt; ttl) {
    <span class="hljs-comment">// ç¼“å­˜å·²è¿‡æœŸï¼Œåˆ é™¤</span>
    clearCache(url)
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>æ–°é—»ã€æ–‡ç« ç­‰æœ‰æ—¶æ•ˆæ€§çš„å†…å®¹</li>
<li>éœ€è¦å®šæœŸæ›´æ–°çš„æ•°æ®</li>
</ul>
<p><strong>2. LRUï¼ˆLeast Recently Usedï¼‰æœ€è¿‘æœ€å°‘ä½¿ç”¨</strong></p>
<p><strong>åŸç†</strong>ï¼šç»´æŠ¤æ¯ä¸ªç¼“å­˜æ¡ç›®çš„è®¿é—®æ—¶é—´ï¼Œå½“ç¼“å­˜ç©ºé—´ä¸è¶³æ—¶ï¼Œåˆ é™¤æœ€ä¹…æœªè®¿é—®çš„ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// è®¿é—®æ—¶æ›´æ–°è®¿é—®æ—¶é—´</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadPage</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String? {
    <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    updateAccessTime(url)  <span class="hljs-comment">// æ›´æ–°è®¿é—®æ—¶é—´</span>
    <span class="hljs-keyword">return</span> readFile(entry.filePath)
}

<span class="hljs-comment">// æ¸…ç†æ—¶æŒ‰è®¿é—®æ—¶é—´æ’åº</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">evictCache</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> entries = getAllCacheEntries()
        .sortedBy { it.accessTime }  <span class="hljs-comment">// æŒ‰è®¿é—®æ—¶é—´å‡åºæ’åº</span>
    
    <span class="hljs-comment">// åˆ é™¤æœ€ä¹…æœªè®¿é—®çš„</span>
    entries.take(entries.size - maxSize).forEach {
        clearCache(it.url)
    }
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç¼“å­˜ç©ºé—´æœ‰é™ï¼Œéœ€è¦è‡ªåŠ¨æ¸…ç†</li>
<li>å¸Œæœ›ä¿ç•™æœ€å¸¸ç”¨çš„ç¼“å­˜</li>
</ul>
<p><strong>3. ç‰ˆæœ¬æ§åˆ¶</strong></p>
<p><strong>åŸç†</strong>ï¼šé€šè¿‡ç‰ˆæœ¬å·ç®¡ç†ç¼“å­˜ï¼Œç‰ˆæœ¬æ›´æ–°æ—¶æ¸…é™¤æ—§ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¿å­˜æ—¶è®°å½•ç‰ˆæœ¬</span>
<span class="hljs-keyword">val</span> cacheVersion = <span class="hljs-string">"v1.0"</span>
savePage(url, html, version = cacheVersion)

<span class="hljs-comment">// æ£€æŸ¥æ—¶æ¯”è¾ƒç‰ˆæœ¬</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isCacheValid</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    <span class="hljs-keyword">return</span> entry.version == currentVersion
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åº”ç”¨ç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦æ¸…é™¤æ—§ç¼“å­˜</li>
<li>æ•°æ®ç»“æ„å˜æ›´ï¼Œéœ€è¦é‡æ–°ç¼“å­˜</li>
</ul>
<p><strong>4. å¤§å°é™åˆ¶</strong></p>
<p><strong>åŸç†</strong>ï¼šé™åˆ¶ç¼“å­˜æ€»å¤§å°ï¼Œè¶…è¿‡é™åˆ¶æ—¶åˆ é™¤æœ€æ—§çš„ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkCacheSize</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> totalSize = getTotalCacheSize()
    <span class="hljs-keyword">if</span> (totalSize &gt; maxCacheSize) {
        <span class="hljs-comment">// æŒ‰æ—¶é—´æ’åºï¼Œåˆ é™¤æœ€æ—§çš„</span>
        <span class="hljs-keyword">val</span> entries = getAllCacheEntries()
            .sortedBy { it.timestamp }
        
        <span class="hljs-keyword">for</span> (entry <span class="hljs-keyword">in</span> entries) {
            <span class="hljs-keyword">if</span> (totalSize &lt;= maxCacheSize) <span class="hljs-keyword">break</span>
            totalSize -= entry.size
            clearCache(entry.url)
        }
    }
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>éœ€è¦æ§åˆ¶ç¼“å­˜å ç”¨çš„å­˜å‚¨ç©ºé—´</li>
<li>é˜²æ­¢ç¼“å­˜æ— é™å¢é•¿</li>
</ul>
<p><strong>äº”ã€ç¼“å­˜æ›´æ–°ç­–ç•¥</strong></p>
<p><strong>1. åå°æ›´æ–°ï¼ˆæ¨èï¼‰</strong></p>
<p><strong>åŸç†</strong>ï¼šç«‹å³è¿”å›ç¼“å­˜ç»™ç”¨æˆ·ï¼ŒåŒæ—¶åœ¨åå°æ›´æ–°ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldInterceptRequest</span><span class="hljs-params">(
    view: <span class="hljs-type">WebView</span>?,
    request: <span class="hljs-type">WebResourceRequest</span>?
)</span></span>: WebResourceResponse? {
    <span class="hljs-keyword">val</span> url = request?.url?.toString() ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    
    <span class="hljs-comment">// ç«‹å³è¿”å›ç¼“å­˜</span>
    <span class="hljs-keyword">val</span> cached = cacheManager.loadPage(url)
    <span class="hljs-keyword">if</span> (cached != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// åå°æ›´æ–°ï¼ˆå¼‚æ­¥ï¼‰</span>
        backgroundUpdate(url)
        <span class="hljs-keyword">return</span> WebResourceResponse(<span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, cached.byteInputStream())
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">backgroundUpdate</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹æ›´æ–°ç¼“å­˜</span>
    thread {
        <span class="hljs-comment">// è¯·æ±‚æœ€æ–°å†…å®¹</span>
        <span class="hljs-keyword">val</span> newContent = fetchFromNetwork(url)
        cacheManager.savePage(url, newContent)
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·ä½“éªŒå¥½ï¼Œç«‹å³å“åº”</li>
<li>åå°è‡ªåŠ¨æ›´æ–°ï¼Œä¿æŒæ•°æ®æ–°é²œ</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>é¦–æ¬¡å¯èƒ½è¿”å›æ—§æ•°æ®</li>
<li>éœ€è¦é¢å¤–çš„ç½‘ç»œè¯·æ±‚</li>
</ul>
<p><strong>2. ç½‘ç»œä¼˜å…ˆ</strong></p>
<p><strong>åŸç†</strong>ï¼šä¼˜å…ˆè¯·æ±‚ç½‘ç»œï¼Œå¤±è´¥æ—¶æ‰ä½¿ç”¨ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldInterceptRequest</span><span class="hljs-params">(
    view: <span class="hljs-type">WebView</span>?,
    request: <span class="hljs-type">WebResourceRequest</span>?
)</span></span>: WebResourceResponse? {
    <span class="hljs-keyword">val</span> url = request?.url?.toString() ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    
    <span class="hljs-comment">// å…ˆå°è¯•ç½‘ç»œè¯·æ±‚</span>
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> networkResponse = fetchFromNetwork(url)
        <span class="hljs-comment">// æˆåŠŸåˆ™æ›´æ–°ç¼“å­˜</span>
        cacheManager.savePage(url, networkResponse)
        <span class="hljs-keyword">return</span> WebResourceResponse(<span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, networkResponse.byteInputStream())
    } <span class="hljs-keyword">catch</span> (e: Exception) {
        <span class="hljs-comment">// å¤±è´¥åˆ™ä½¿ç”¨ç¼“å­˜</span>
        <span class="hljs-keyword">val</span> cached = cacheManager.loadPage(url)
        <span class="hljs-keyword">return</span> cached?.let {
            WebResourceResponse(<span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, it.byteInputStream())
        }
    }
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æ•°æ®æœ€æ–°</li>
<li>ç¦»çº¿æ—¶ä»å¯ä½¿ç”¨ç¼“å­˜</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯æ¬¡éƒ½éœ€è¦ç½‘ç»œè¯·æ±‚ï¼Œé€Ÿåº¦è¾ƒæ…¢</li>
</ul>
<p><strong>3. ç¼“å­˜ä¼˜å…ˆ</strong></p>
<p><strong>åŸç†</strong>ï¼šä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œç¼“å­˜ä¸å­˜åœ¨æ—¶æ‰è¯·æ±‚ç½‘ç»œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldInterceptRequest</span><span class="hljs-params">(
    view: <span class="hljs-type">WebView</span>?,
    request: <span class="hljs-type">WebResourceRequest</span>?
)</span></span>: WebResourceResponse? {
    <span class="hljs-keyword">val</span> url = request?.url?.toString() ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    
    <span class="hljs-comment">// å…ˆæ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">val</span> cached = cacheManager.loadPage(url)
    <span class="hljs-keyword">if</span> (cached != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> WebResourceResponse(<span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, cached.byteInputStream())
    }
    
    <span class="hljs-comment">// ç¼“å­˜ä¸å­˜åœ¨ï¼Œè¿”å› null è®© WebView è¯·æ±‚ç½‘ç»œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ç¦»çº¿å¯ç”¨</li>
<li>åŠ è½½é€Ÿåº¦å¿«</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>å¯èƒ½è¿”å›è¿‡æœŸæ•°æ®</li>
<li>éœ€è¦æ‰‹åŠ¨è§¦å‘æ›´æ–°</li>
</ul>
<h4 data-id="heading-58">8.2.4 è‡ªå®šä¹‰ç¦»çº¿ç¼“å­˜å®ç°ï¼ˆç®€åŒ–ç‰ˆï¼‰</h4>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ç®€åŒ–çš„ç¦»çº¿ç¼“å­˜ç®¡ç†å™¨
 * æ ¸å¿ƒåŠŸèƒ½ï¼šä¿å­˜ã€åŠ è½½ã€æ£€æŸ¥ã€æ¸…é™¤ç¼“å­˜
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OfflineCacheManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cacheDir = File(context.cacheDir, <span class="hljs-string">"offline_cache"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> indexFile = File(cacheDir, <span class="hljs-string">"index.json"</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> maxCacheSize = <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024L</span> <span class="hljs-comment">// 50MB</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> defaultTTL = <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000L</span> <span class="hljs-comment">// é»˜è®¤ 7 å¤©è¿‡æœŸ</span>
    
    <span class="hljs-comment">// ç¼“å­˜ç´¢å¼•ï¼šURL -&gt; CacheEntry</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheEntry</span>(
        <span class="hljs-keyword">val</span> hash: String,           <span class="hljs-comment">// æ–‡ä»¶å“ˆå¸Œï¼ˆç”¨äºæ–‡ä»¶åï¼‰</span>
        <span class="hljs-keyword">val</span> timestamp: <span class="hljs-built_in">Long</span>,        <span class="hljs-comment">// ç¼“å­˜æ—¶é—´æˆ³</span>
        <span class="hljs-keyword">val</span> size: <span class="hljs-built_in">Long</span>,            <span class="hljs-comment">// ç¼“å­˜å¤§å°</span>
        <span class="hljs-keyword">val</span> ttl: <span class="hljs-built_in">Long</span> = defaultTTL <span class="hljs-comment">// ç”Ÿå­˜æ—¶é—´</span>
    )
    
    <span class="hljs-keyword">init</span> {
        <span class="hljs-keyword">if</span> (!cacheDir.exists()) {
            cacheDir.mkdirs()
        }
        <span class="hljs-keyword">if</span> (!indexFile.exists()) {
            indexFile.writeText(<span class="hljs-string">"{}"</span>)
        }
    }
    
    <span class="hljs-comment">/**
     * ä¿å­˜é¡µé¢åˆ°ç¼“å­˜
     * 
     * åŸç†ï¼š
     * 1. å°† URL è½¬æ¢ä¸ºå“ˆå¸Œå€¼ä½œä¸ºæ–‡ä»¶åï¼ˆé¿å…ç‰¹æ®Šå­—ç¬¦é—®é¢˜ï¼‰
     * 2. ä¿å­˜ HTML å†…å®¹åˆ°æ–‡ä»¶
     * 3. ä¿å­˜å…³è”èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ç­‰ï¼‰åˆ°å­ç›®å½•
     * 4. æ›´æ–°ç´¢å¼•æ–‡ä»¶ï¼Œè®°å½• URLã€æ—¶é—´æˆ³ã€å¤§å°ç­‰ä¿¡æ¯
     * 5. æ£€æŸ¥ç¼“å­˜å¤§å°ï¼Œå¦‚æœè¶…é™åˆ™åˆ é™¤æœ€æ—§çš„ç¼“å­˜ï¼ˆLRUï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">savePage</span><span class="hljs-params">(
        url: <span class="hljs-type">String</span>, 
        html: <span class="hljs-type">String</span>, 
        resources: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, ByteArray&gt; = emptyMap()</span></span>,
        ttl: <span class="hljs-built_in">Long</span> = defaultTTL
    ) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. ç”Ÿæˆ URL å“ˆå¸Œï¼ˆä½¿ç”¨ MD5 æˆ–ç®€å•å“ˆå¸Œï¼‰</span>
            <span class="hljs-keyword">val</span> urlHash = url.hashCode().toString()
            <span class="hljs-keyword">val</span> pageFile = File(cacheDir, <span class="hljs-string">"<span class="hljs-variable">$urlHash</span>.html"</span>)
            <span class="hljs-keyword">val</span> resourcesDir = File(cacheDir, <span class="hljs-string">"<span class="hljs-subst">${urlHash}</span>_resources"</span>)
            
            <span class="hljs-comment">// 2. ä¿å­˜ HTML å†…å®¹</span>
            pageFile.writeText(html, Charsets.UTF_8)
            
            <span class="hljs-comment">// 3. ä¿å­˜å…³è”èµ„æºï¼ˆCSSã€JSã€å›¾ç‰‡ç­‰ï¼‰</span>
            <span class="hljs-keyword">if</span> (resources.isNotEmpty()) {
                <span class="hljs-keyword">if</span> (!resourcesDir.exists()) {
                    resourcesDir.mkdirs()
                }
                resources.forEach { (name, <span class="hljs-keyword">data</span>) -&gt;
                    <span class="hljs-comment">// æ¸…ç†æ–‡ä»¶åï¼Œé¿å…è·¯å¾„éå†æ”»å‡»</span>
                    <span class="hljs-keyword">val</span> safeName = name.replace(Regex(<span class="hljs-string">"[^a-zA-Z0-9._-]"</span>), <span class="hljs-string">"_"</span>)
                    File(resourcesDir, safeName).writeBytes(<span class="hljs-keyword">data</span>)
                }
            }
            
            <span class="hljs-comment">// 4. è®¡ç®—ç¼“å­˜å¤§å°</span>
            <span class="hljs-keyword">val</span> cacheSize = pageFile.length() + 
                           resourcesDir.walkTopDown().sumOf { it.length() }
            
            <span class="hljs-comment">// 5. æ›´æ–°ç¼“å­˜ç´¢å¼•</span>
            updateCacheIndex(url, CacheEntry(
                hash = urlHash,
                timestamp = System.currentTimeMillis(),
                size = cacheSize,
                ttl = ttl
            ))
            
            <span class="hljs-comment">// 6. æ£€æŸ¥å¹¶æ¸…ç†è¿‡æœŸç¼“å­˜</span>
            cleanupExpiredCache()
            
            <span class="hljs-comment">// 7. æ£€æŸ¥ç¼“å­˜å¤§å°ï¼Œå¦‚æœè¶…é™åˆ™åˆ é™¤æœ€æ—§çš„ï¼ˆLRUï¼‰</span>
            checkAndEvictCache()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to save page to cache: <span class="hljs-variable">$url</span>"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * ä»ç¼“å­˜åŠ è½½é¡µé¢
     * 
     * åŸç†ï¼š
     * 1. ä»ç´¢å¼•æ–‡ä»¶æŸ¥æ‰¾ URL å¯¹åº”çš„å“ˆå¸Œå€¼
     * 2. æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼ˆTTLï¼‰
     * 3. å¦‚æœæœ‰æ•ˆï¼Œè¯»å– HTML æ–‡ä»¶å†…å®¹
     * 4. æ›´æ–°è®¿é—®æ—¶é—´ï¼ˆç”¨äº LRUï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadPage</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: String? {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
            
            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
            <span class="hljs-keyword">if</span> (isExpired(entry)) {
                clearCache(url)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
            }
            
            <span class="hljs-keyword">val</span> pageFile = File(cacheDir, <span class="hljs-string">"<span class="hljs-subst">${entry.hash}</span>.html"</span>)
            <span class="hljs-keyword">if</span> (pageFile.exists()) {
                <span class="hljs-comment">// æ›´æ–°è®¿é—®æ—¶é—´ï¼ˆç”¨äº LRUï¼‰</span>
                updateAccessTime(url)
                pageFile.readText(Charsets.UTF_8)
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-literal">null</span>
            }
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to load page from cache: <span class="hljs-variable">$url</span>"</span>,
                e
            )
            <span class="hljs-literal">null</span>
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥é¡µé¢æ˜¯å¦å·²ç¼“å­˜ä¸”æœ‰æ•ˆ
     * 
     * åŸç†ï¼š
     * 1. æ£€æŸ¥ç´¢å¼•ä¸­æ˜¯å¦å­˜åœ¨è¯¥ URL
     * 2. æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
     * 3. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isCached</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        <span class="hljs-keyword">if</span> (isExpired(entry)) {
            clearCache(url)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
        <span class="hljs-keyword">val</span> pageFile = File(cacheDir, <span class="hljs-string">"<span class="hljs-subst">${entry.hash}</span>.html"</span>)
        <span class="hljs-keyword">return</span> pageFile.exists()
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥ç¼“å­˜æ˜¯å¦è¿‡æœŸ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isExpired</span><span class="hljs-params">(entry: <span class="hljs-type">CacheEntry</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> age = System.currentTimeMillis() - entry.timestamp
        <span class="hljs-keyword">return</span> age &gt; entry.ttl
    }
    
    <span class="hljs-comment">/**
     * æ¸…é™¤æŒ‡å®š URL çš„ç¼“å­˜
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearCache</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> urlHash = getUrlHash(url) ?: <span class="hljs-keyword">return</span>
            File(cacheDir, <span class="hljs-string">"<span class="hljs-variable">$urlHash</span>.html"</span>).delete()
            File(cacheDir, <span class="hljs-string">"<span class="hljs-subst">${urlHash}</span>_resources"</span>).deleteRecursively()
            removeFromCacheIndex(url)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to clear cache: <span class="hljs-variable">$url</span>"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * æ¸…é™¤æ‰€æœ‰ç¼“å­˜
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearAllCache</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">try</span> {
            cacheDir.deleteRecursively()
            cacheDir.mkdirs()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to clear all cache"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–ç¼“å­˜å¤§å°
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCacheSize</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Long</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (cacheDir.exists()) {
            cacheDir.walkTopDown().sumOf { it.length() }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-number">0L</span>
        }
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°ç¼“å­˜ç´¢å¼•
     * 
     * åŸç†ï¼š
     * ç´¢å¼•æ–‡ä»¶ç»“æ„ï¼š
     * {
     *   "url1": {"hash": "123", "timestamp": 1234567890, "size": 1024, "ttl": 604800000},
     *   "url2": {"hash": "456", "timestamp": 1234567891, "size": 2048, "ttl": 604800000}
     * }
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateCacheIndex</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, entry: <span class="hljs-type">CacheEntry</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> index = loadIndex()
            <span class="hljs-keyword">val</span> entryJson = JSONObject().apply {
                put(<span class="hljs-string">"hash"</span>, entry.hash)
                put(<span class="hljs-string">"timestamp"</span>, entry.timestamp)
                put(<span class="hljs-string">"size"</span>, entry.size)
                put(<span class="hljs-string">"ttl"</span>, entry.ttl)
                put(<span class="hljs-string">"accessTime"</span>, System.currentTimeMillis()) <span class="hljs-comment">// ç”¨äº LRU</span>
            }
            index.put(url, entryJson)
            saveIndex(index)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to update cache index: <span class="hljs-variable">$url</span>"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * æ›´æ–°è®¿é—®æ—¶é—´ï¼ˆç”¨äº LRU ç®—æ³•ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateAccessTime</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> index = loadIndex()
            <span class="hljs-keyword">val</span> entryJson = index.optJSONObject(url) ?: <span class="hljs-keyword">return</span>
            entryJson.put(<span class="hljs-string">"accessTime"</span>, System.currentTimeMillis())
            index.put(url, entryJson)
            saveIndex(index)
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to update access time: <span class="hljs-variable">$url</span>"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–ç¼“å­˜æ¡ç›®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getCacheEntry</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span>: CacheEntry? {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> index = loadIndex()
            <span class="hljs-keyword">val</span> entryJson = index.optJSONObject(url) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
            CacheEntry(
                hash = entryJson.getString(<span class="hljs-string">"hash"</span>),
                timestamp = entryJson.getLong(<span class="hljs-string">"timestamp"</span>),
                size = entryJson.getLong(<span class="hljs-string">"size"</span>),
                ttl = entryJson.optLong(<span class="hljs-string">"ttl"</span>, defaultTTL)
            )
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-literal">null</span>
        }
    }
    
    <span class="hljs-comment">/**
     * åŠ è½½ç´¢å¼•æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadIndex</span><span class="hljs-params">()</span></span>: JSONObject {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (indexFile.exists()) {
            <span class="hljs-keyword">try</span> {
                JSONObject(indexFile.readText())
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                JSONObject()
            }
        } <span class="hljs-keyword">else</span> {
            JSONObject()
        }
    }
    
    <span class="hljs-comment">/**
     * ä¿å­˜ç´¢å¼•æ–‡ä»¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">saveIndex</span><span class="hljs-params">(index: <span class="hljs-type">JSONObject</span>)</span></span> {
        indexFile.writeText(index.toString())
    }
    
    <span class="hljs-comment">/**
     * æ¸…ç†è¿‡æœŸç¼“å­˜
     * 
     * åŸç†ï¼šéå†æ‰€æœ‰ç¼“å­˜æ¡ç›®ï¼Œåˆ é™¤å·²è¿‡æœŸçš„
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanupExpiredCache</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> index = loadIndex()
            <span class="hljs-keyword">val</span> keys = index.keys()
            <span class="hljs-keyword">val</span> expiredUrls = mutableListOf&lt;String&gt;()
            
            <span class="hljs-keyword">while</span> (keys.hasNext()) {
                <span class="hljs-keyword">val</span> url = keys.next()
                <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">continue</span>
                <span class="hljs-keyword">if</span> (isExpired(entry)) {
                    expiredUrls.add(url)
                }
            }
            
            expiredUrls.forEach { url -&gt;
                clearCache(url)
            }
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to cleanup expired cache"</span>,
                e
            )
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å¹¶æ¸…ç†ç¼“å­˜ï¼ˆLRU ç­–ç•¥ï¼‰
     * 
     * åŸç†ï¼š
     * 1. è®¡ç®—å½“å‰ç¼“å­˜æ€»å¤§å°
     * 2. å¦‚æœè¶…è¿‡é™åˆ¶ï¼ŒæŒ‰è®¿é—®æ—¶é—´æ’åºï¼ˆLRUï¼‰
     * 3. åˆ é™¤æœ€ä¹…æœªè®¿é—®çš„ç¼“å­˜ï¼Œç›´åˆ°æ»¡è¶³å¤§å°é™åˆ¶
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkAndEvictCache</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> currentSize = getCacheSize()
            <span class="hljs-keyword">if</span> (currentSize &lt;= maxCacheSize) {
                <span class="hljs-keyword">return</span>
            }
            
            <span class="hljs-comment">// æŒ‰è®¿é—®æ—¶é—´æ’åºï¼ˆLRUï¼šæœ€ä¹…æœªè®¿é—®çš„ä¼˜å…ˆåˆ é™¤ï¼‰</span>
            <span class="hljs-keyword">val</span> index = loadIndex()
            <span class="hljs-keyword">val</span> entries = mutableListOf&lt;Pair&lt;String, <span class="hljs-built_in">Long</span>&gt;&gt;()
            
            index.keys().forEach { url -&gt;
                <span class="hljs-keyword">val</span> entryJson = index.optJSONObject(url) ?: <span class="hljs-keyword">return</span><span class="hljs-symbol">@forEach</span>
                <span class="hljs-keyword">val</span> accessTime = entryJson.optLong(<span class="hljs-string">"accessTime"</span>, entryJson.getLong(<span class="hljs-string">"timestamp"</span>))
                entries.add(Pair(url, accessTime))
            }
            
            <span class="hljs-comment">// æŒ‰è®¿é—®æ—¶é—´å‡åºæ’åºï¼ˆæœ€æ—§çš„åœ¨å‰ï¼‰</span>
            entries.sortBy { it.second }
            
            <span class="hljs-comment">// åˆ é™¤æœ€æ—§çš„ç¼“å­˜ï¼Œç›´åˆ°æ»¡è¶³å¤§å°é™åˆ¶</span>
            <span class="hljs-keyword">for</span> ((url, _) <span class="hljs-keyword">in</span> entries) {
                <span class="hljs-keyword">if</span> (currentSize &lt;= maxCacheSize) {
                    <span class="hljs-keyword">break</span>
                }
                <span class="hljs-keyword">val</span> entry = getCacheEntry(url) ?: <span class="hljs-keyword">continue</span>
                currentSize -= entry.size
                clearCache(url)
            }
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¡†æ¶ï¼ˆè§ 4.2.7ï¼‰</span>
            ErrorHandler.handleError(
                ErrorHandler.ErrorType.CACHE_ERROR,
                <span class="hljs-string">"Failed to evict cache"</span>,
                e
            )
        }
    }
}
</code></pre>
<h4 data-id="heading-59">8.2.5 ç¦»çº¿ç¼“å­˜å®Œæ•´ä½¿ç”¨ç¤ºä¾‹</h4>
<p><strong>ä¸€ã€ç¼“å­˜ç­–ç•¥é€‰æ‹©æŒ‡å—</strong></p>



































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èç­–ç•¥</th><th>åŸå› </th></tr></thead><tbody><tr><td>æ–°é—»é˜…è¯»</td><td>LOAD_CACHE_ELSE_NETWORK + è‡ªå®šä¹‰ç¼“å­˜ï¼ˆåå°æ›´æ–°ï¼‰</td><td>ç¦»çº¿å¯è¯»ï¼Œåå°æ›´æ–°</td></tr><tr><td>å®æ—¶æ•°æ®</td><td>LOAD_NO_CACHE</td><td>éœ€è¦æœ€æ–°æ•°æ®</td></tr><tr><td>é™æ€æ–‡æ¡£</td><td>LOAD_CACHE_ELSE_NETWORK</td><td>å†…å®¹å˜åŒ–å°‘</td></tr><tr><td>å®Œå…¨ç¦»çº¿</td><td>LOAD_CACHE_ONLY + è‡ªå®šä¹‰ç¼“å­˜</td><td>ä¸ä¾èµ–ç½‘ç»œ</td></tr><tr><td>æ··åˆåº”ç”¨</td><td>LOAD_DEFAULT + è‡ªå®šä¹‰ç¼“å­˜ï¼ˆç½‘ç»œä¼˜å…ˆï¼‰</td><td>å¹³è¡¡æ€§èƒ½å’Œå®æ—¶æ€§</td></tr></tbody></table>
<p><strong>äºŒã€å®Œæ•´å®ç°ç¤ºä¾‹</strong></p>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ”¯æŒç¦»çº¿ç¼“å­˜çš„ WebViewClientï¼ˆç®€åŒ–ç‰ˆï¼‰
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedWebViewClient</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cacheManager: OfflineCacheManager
) : WebViewClient() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">shouldInterceptRequest</span><span class="hljs-params">(
        view: <span class="hljs-type">WebView</span>?,
        request: <span class="hljs-type">WebResourceRequest</span>?
    )</span></span>: WebResourceResponse? {
        <span class="hljs-keyword">val</span> url = request?.url?.toString() ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        <span class="hljs-keyword">val</span> cachedHtml = cacheManager.loadPage(url)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (cachedHtml != <span class="hljs-literal">null</span>) {
            WebResourceResponse(<span class="hljs-string">"text/html"</span>, <span class="hljs-string">"utf-8"</span>, cachedHtml.byteInputStream())
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">super</span>.shouldInterceptRequest(view, request)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageFinished</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onPageFinished(view, url)
        url?.let {
            view?.evaluateJavaScriptSafe(<span class="hljs-string">"document.documentElement.outerHTML"</span>) { html -&gt;
                JSResultParser.parseResult(html)?.let { cleaned -&gt;
                    cacheManager.savePage(url, cleaned)
                }
            }
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> webView: WebView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> cacheManager: OfflineCacheManager
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        cacheManager = OfflineCacheManager(<span class="hljs-keyword">this</span>)
        webView = findViewById(R.id.webview)
        webView.setupDefaultSettings(enableCache = <span class="hljs-literal">true</span>)
        webView.webViewClient = CachedWebViewClient(cacheManager)
        webView.loadUrl(<span class="hljs-string">"https://example.com"</span>)
    }
}
</code></pre>
<h3 data-id="heading-60">8.3 æ‰¹é‡é€šä¿¡ä¼˜åŒ–</h3>
<p><strong>åŸç†</strong>ï¼šé¢‘ç¹è°ƒç”¨ JavaScript ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œé€šè¿‡æ‰¹é‡åˆå¹¶è°ƒç”¨å¯ä»¥å‡å°‘é€šä¿¡æ¬¡æ•°ï¼Œæå‡æ€§èƒ½ã€‚</p>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.webkit.WebView
<span class="hljs-keyword">import</span> android.webkit.ValueCallback
<span class="hljs-keyword">import</span> android.os.Build
<span class="hljs-keyword">import</span> android.os.Handler
<span class="hljs-keyword">import</span> android.os.Looper
</code></pre>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ‰¹é‡ JavaScript æ‰§è¡Œå™¨
 * 
 * å·¥ä½œåŸç†ï¼š
 * 1. æ”¶é›†å¾…æ‰§è¡Œçš„ JavaScript ä»£ç 
 * 2. å»¶è¿Ÿæ‰§è¡Œï¼ˆ100ms å†…åˆå¹¶ï¼‰
 * 3. æ‰¹é‡æ‰§è¡Œï¼Œå‡å°‘é€šä¿¡æ¬¡æ•°
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchJSExecutor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webView: WebView) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> pendingCalls = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> handler = Handler(Looper.getMainLooper())
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> batchRunnable: Runnable? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> batchDelay = <span class="hljs-number">100L</span> <span class="hljs-comment">// 100ms å†…åˆå¹¶</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addCall</span><span class="hljs-params">(jsCode: <span class="hljs-type">String</span>)</span></span> {
        synchronized(pendingCalls) { pendingCalls.add(jsCode) }
        scheduleBatch()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">flush</span><span class="hljs-params">()</span></span> {
        handler.removeCallbacks(batchRunnable ?: <span class="hljs-keyword">return</span>)
        batchRunnable?.run()
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">scheduleBatch</span><span class="hljs-params">()</span></span> {
        batchRunnable?.let { handler.removeCallbacks(it) }
        batchRunnable = Runnable {
            synchronized(pendingCalls) {
                <span class="hljs-keyword">if</span> (pendingCalls.isNotEmpty()) {
                    webView.evaluateJavaScriptSafe(pendingCalls.joinToString(<span class="hljs-string">";"</span>))
                    pendingCalls.clear()
                }
            }
        }
        handler.postDelayed(batchRunnable!!, batchDelay)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span> {
        handler.removeCallbacks(batchRunnable ?: <span class="hljs-keyword">return</span>)
        synchronized(pendingCalls) { pendingCalls.clear() }
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">val</span> batchExecutor = BatchJSExecutor(webView)

<span class="hljs-comment">// æ·»åŠ å¤šä¸ªè°ƒç”¨</span>
batchExecutor.addCall(<span class="hljs-string">"console.log('1')"</span>)
batchExecutor.addCall(<span class="hljs-string">"console.log('2')"</span>)
batchExecutor.addCall(<span class="hljs-string">"console.log('3')"</span>)
<span class="hljs-comment">// 100ms åä¼šè‡ªåŠ¨æ‰¹é‡æ‰§è¡Œ</span>

<span class="hljs-comment">// ç«‹å³æ‰§è¡Œ</span>
batchExecutor.flush()
</code></pre>
<hr/>
<h2 data-id="heading-61">ä¹ã€æ¶æ„è®¾è®¡å»ºè®®</h2>
<h3 data-id="heading-62">9.1 WebView æ¶æ„è®¾è®¡</h3>
<p><strong>ä¸€ã€å•ä¸€ WebView æ¶æ„</strong></p>
<p>é€‚ç”¨äºï¼šç®€å•çš„ H5 é¡µé¢å±•ç¤º</p>
<pre><code class="hljs language-scss" lang="scss">Activity
  â””â”€â”€ WebView
       â””â”€â”€ WebViewClient (å¤„ç†é¡µé¢åŠ è½½)
       â””â”€â”€ WebChromeClient (å¤„ç† JS äº¤äº’)
       â””â”€â”€ JSInterface (Bridge æ¥å£)
</code></pre>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.webkit.WebView
<span class="hljs-keyword">import</span> android.webkit.WebViewClient
<span class="hljs-keyword">import</span> android.webkit.WebChromeClient
<span class="hljs-keyword">import</span> android.webkit.JavascriptInterface
<span class="hljs-keyword">import</span> android.content.Context
<span class="hljs-keyword">import</span> android.os.Bundle
<span class="hljs-keyword">import</span> androidx.appcompat.app.AppCompatActivity
</code></pre>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleWebViewActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> webView: WebView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> bridge: WebViewBridgeKt
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        webView = WebView(<span class="hljs-keyword">this</span>)
        <span class="hljs-comment">// WebViewBridgeKt ä¼šè‡ªåŠ¨é…ç½® WebView</span>
        bridge = WebViewBridgeKt(webView)
        
        <span class="hljs-comment">// æ³¨å†Œå¤„ç†å™¨</span>
        bridge.registerHandler(<span class="hljs-string">"showToast"</span>) { <span class="hljs-keyword">data</span>, callback -&gt;
            Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">data</span>, Toast.LENGTH_SHORT).show()
            callback?.invoke(<span class="hljs-string">"success"</span>)
        }
        
        setContentView(webView)
        webView.loadUrl(<span class="hljs-string">"https://example.com"</span>)
    }
}
</code></pre>
<p><strong>äºŒã€å¤š WebView ç®¡ç†æ¶æ„</strong></p>
<p>é€‚ç”¨äºï¼šéœ€è¦ç®¡ç†å¤šä¸ª WebView çš„åœºæ™¯ï¼ˆå¦‚å¤šæ ‡ç­¾é¡µã€å¤šé¡µé¢æ ˆï¼‰</p>
<pre><code class="hljs language-scss" lang="scss">WebViewManager (å•ä¾‹)
  â”œâ”€â”€ WebViewPool (WebView æ± )
  â”œâ”€â”€ WebViewRegistry (WebView æ³¨å†Œè¡¨)
  â””â”€â”€ LifecycleManager (ç”Ÿå‘½å‘¨æœŸç®¡ç†)
       â”œâ”€â”€ WebView <span class="hljs-number">1</span>
       â”œâ”€â”€ WebView <span class="hljs-number">2</span>
       â””â”€â”€ WebView <span class="hljs-number">3</span>
</code></pre>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * WebView ç®¡ç†å™¨ï¼ˆç®€åŒ–ç‰ˆï¼‰
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViewPool = WebViewPool(context)
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> activeWebViews = mutableMapOf&lt;String, WebView&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getWebView</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: WebView {
        <span class="hljs-keyword">return</span> activeWebViews.getOrPut(id) { webViewPool.obtain() }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">destroyWebView</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span> {
        activeWebViews.remove(id)?.let { webViewPool.recycle(it) }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearAll</span><span class="hljs-params">()</span></span> {
        activeWebViews.values.forEach { webViewPool.recycle(it) }
        activeWebViews.clear()
    }
}
</code></pre>
<p><strong>ä¸‰ã€æ¨¡å—åŒ–æ¶æ„</strong></p>
<p>é€‚ç”¨äºï¼šå¤§å‹é¡¹ç›®ï¼Œéœ€è¦æ¨¡å—åŒ–ç®¡ç†</p>
<pre><code class="hljs language-scss" lang="scss">App
  â””â”€â”€ WebViewModule
       â”œâ”€â”€ WebViewManager (WebView ç®¡ç†)
       â”œâ”€â”€ BridgeManager (Bridge ç®¡ç†)
       â”œâ”€â”€ CacheManager (ç¼“å­˜ç®¡ç†)
       â”œâ”€â”€ PreloadManager (é¢„åŠ è½½ç®¡ç†)
       â””â”€â”€ ErrorHandler (é”™è¯¯å¤„ç†)
</code></pre>
<h3 data-id="heading-63">9.2 å¤š WebView åœºæ™¯ç®¡ç†</h3>
<p><strong>åœºæ™¯</strong>ï¼šå¤šæ ‡ç­¾é¡µæµè§ˆå™¨ã€å¤šé¡µé¢æ ˆã€Fragment ä¸­çš„ WebView</p>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤š WebView åœºæ™¯ç®¡ç†å™¨ï¼ˆç®€åŒ–ç‰ˆï¼‰
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiWebViewManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webViews = mutableMapOf&lt;String, WebView&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createWebView</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: WebView {
        <span class="hljs-keyword">return</span> WebView(context.applicationContext).apply {
            setupDefaultSettings()
            webViews[id] = <span class="hljs-keyword">this</span>
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getWebView</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span>: WebView? = webViews[id]
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchWebView</span><span class="hljs-params">(fromId: <span class="hljs-type">String</span>, toId: <span class="hljs-type">String</span>)</span></span> {
        webViews[fromId]?.onPause()
        webViews[toId]?.onResume()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">destroyWebView</span><span class="hljs-params">(id: <span class="hljs-type">String</span>)</span></span> {
        webViews.remove(id)?.destroy()
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clearAll</span><span class="hljs-params">()</span></span> {
        webViews.values.forEach { it.destroy() }
        webViews.clear()
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-64">åã€æ€§èƒ½ç›‘æ§</h2>
<h3 data-id="heading-65">10.1 æ€§èƒ½æŒ‡æ ‡æ”¶é›†</h3>
<p><strong>åŸç†</strong>ï¼šæ”¶é›† WebView æ€§èƒ½æŒ‡æ ‡ï¼Œå¸®åŠ©ä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚</p>
<p><strong>ä¾èµ–è¯´æ˜</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> android.webkit.WebView
<span class="hljs-keyword">import</span> android.webkit.WebResourceRequest
<span class="hljs-keyword">import</span> android.webkit.WebResourceError
<span class="hljs-keyword">import</span> android.webkit.WebResourceResponse
<span class="hljs-keyword">import</span> android.graphics.Bitmap
<span class="hljs-keyword">import</span> android.util.Log
</code></pre>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * WebView æ€§èƒ½ç›‘æ§å™¨
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebViewPerformanceMonitor</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> webView: WebView) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> metrics = mutableListOf&lt;PerformanceMetric&gt;()
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMetric</span>(
        <span class="hljs-keyword">val</span> type: MetricType,
        <span class="hljs-keyword">val</span> value: <span class="hljs-built_in">Long</span>,
        <span class="hljs-keyword">val</span> timestamp: <span class="hljs-built_in">Long</span> = System.currentTimeMillis(),
        <span class="hljs-keyword">val</span> context: Map&lt;String, Any&gt;? = <span class="hljs-literal">null</span>
    )
    
    <span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricType</span> {
        PAGE_LOAD_TIME,      <span class="hljs-comment">// é¡µé¢åŠ è½½æ—¶é—´</span>
        JS_EXECUTION_TIME,   <span class="hljs-comment">// JS æ‰§è¡Œæ—¶é—´</span>
        BRIDGE_CALL_TIME,    <span class="hljs-comment">// Bridge è°ƒç”¨æ—¶é—´</span>
        MEMORY_USAGE,        <span class="hljs-comment">// å†…å­˜ä½¿ç”¨</span>
        NETWORK_REQUEST_TIME <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚æ—¶é—´</span>
    }
    
    <span class="hljs-comment">/**
     * ç›‘æ§é¡µé¢åŠ è½½æ—¶é—´
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">monitorPageLoad</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">var</span> startTime = <span class="hljs-number">0L</span>
        
        webView.webViewClient = <span class="hljs-keyword">object</span> : WebViewClient() {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageStarted</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?, favicon: <span class="hljs-type">Bitmap</span>?)</span></span> {
                <span class="hljs-keyword">super</span>.onPageStarted(view, url, favicon)
                startTime = System.currentTimeMillis()
            }
            
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onPageFinished</span><span class="hljs-params">(view: <span class="hljs-type">WebView</span>?, url: <span class="hljs-type">String</span>?)</span></span> {
                <span class="hljs-keyword">super</span>.onPageFinished(view, url)
                <span class="hljs-keyword">val</span> loadTime = System.currentTimeMillis() - startTime
                recordMetric(MetricType.PAGE_LOAD_TIME, loadTime, mapOf(<span class="hljs-string">"url"</span> to (url ?: <span class="hljs-string">""</span>)))
            }
        }
    }
    
    <span class="hljs-comment">/**
     * ç›‘æ§ Bridge è°ƒç”¨æ—¶é—´
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">monitorBridgeCall</span><span class="hljs-params">(handlerName: <span class="hljs-type">String</span>, block: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        <span class="hljs-keyword">try</span> {
            block()
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">val</span> duration = System.currentTimeMillis() - startTime
            recordMetric(MetricType.BRIDGE_CALL_TIME, duration, mapOf(<span class="hljs-string">"handler"</span> to handlerName))
        }
    }
    
    <span class="hljs-comment">/**
     * è®°å½•æŒ‡æ ‡
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordMetric</span><span class="hljs-params">(type: <span class="hljs-type">MetricType</span>, value: <span class="hljs-type">Long</span>, context: <span class="hljs-type">Map</span>&lt;<span class="hljs-type">String</span>, Any&gt;? = <span class="hljs-literal">null</span>)</span></span> {
        metrics.add(PerformanceMetric(type, value, context = context))
        
        <span class="hljs-comment">// å¦‚æœæŒ‡æ ‡è¿‡å¤šï¼Œåªä¿ç•™æœ€è¿‘ 1000 æ¡</span>
        <span class="hljs-keyword">if</span> (metrics.size &gt; <span class="hljs-number">1000</span>) {
            metrics.removeAt(<span class="hljs-number">0</span>)
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æ€§èƒ½æŠ¥å‘Š
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getPerformanceReport</span><span class="hljs-params">()</span></span>: PerformanceReport {
        <span class="hljs-keyword">val</span> pageLoadTimes = metrics.filter { it.type == MetricType.PAGE_LOAD_TIME }
        <span class="hljs-keyword">val</span> bridgeCallTimes = metrics.filter { it.type == MetricType.BRIDGE_CALL_TIME }
        
        <span class="hljs-keyword">return</span> PerformanceReport(
            avgPageLoadTime = pageLoadTimes.map { it.value }.average().toLong(),
            avgBridgeCallTime = bridgeCallTimes.map { it.value }.average().toLong(),
            totalMetrics = metrics.size
        )
    }
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceReport</span>(
        <span class="hljs-keyword">val</span> avgPageLoadTime: <span class="hljs-built_in">Long</span>,
        <span class="hljs-keyword">val</span> avgBridgeCallTime: <span class="hljs-built_in">Long</span>,
        <span class="hljs-keyword">val</span> totalMetrics: <span class="hljs-built_in">Int</span>
    )
}

<span class="hljs-comment">// ========== ä½¿ç”¨ç¤ºä¾‹ ==========</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> webView: WebView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> performanceMonitor: WebViewPerformanceMonitor
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        webView = findViewById(R.id.webview)
        
        <span class="hljs-comment">// åˆå§‹åŒ–æ€§èƒ½ç›‘æ§</span>
        performanceMonitor = WebViewPerformanceMonitor(webView)
        performanceMonitor.monitorPageLoad()
        
        <span class="hljs-comment">// ç›‘æ§ Bridge è°ƒç”¨</span>
        <span class="hljs-keyword">val</span> bridge = WebViewBridgeKt(webView)
        bridge.registerHandler(<span class="hljs-string">"test"</span>) { <span class="hljs-keyword">data</span>, callback -&gt;
            performanceMonitor.monitorBridgeCall(<span class="hljs-string">"test"</span>) {
                <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
                callback?.invoke(<span class="hljs-string">"success"</span>)
            }
        }
        
        webView.loadUrl(<span class="hljs-string">"https://example.com"</span>)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroy</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroy()
        <span class="hljs-comment">// è·å–æ€§èƒ½æŠ¥å‘Š</span>
        <span class="hljs-keyword">val</span> report = performanceMonitor.getPerformanceReport()
        <span class="hljs-comment">// æ€§èƒ½æ—¥å¿—ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä¸ŠæŠ¥åˆ°æœåŠ¡å™¨</span>
        <span class="hljs-keyword">if</span> (BuildConfig.DEBUG) {
            Log.d(<span class="hljs-string">"Performance"</span>, <span class="hljs-string">"å¹³å‡é¡µé¢åŠ è½½æ—¶é—´: <span class="hljs-subst">${report.avgPageLoadTime}</span>ms"</span>)
            Log.d(<span class="hljs-string">"Performance"</span>, <span class="hljs-string">"å¹³å‡ Bridge è°ƒç”¨æ—¶é—´: <span class="hljs-subst">${report.avgBridgeCallTime}</span>ms"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-66">10.2 å†…å­˜ç›‘æ§</h3>
<p><strong>Kotlin å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * WebView å†…å­˜ç›‘æ§ï¼ˆç®€åŒ–ç‰ˆï¼‰
 */</span>
<span class="hljs-keyword">object</span> WebViewMemoryMonitor {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getMemoryInfo</span><span class="hljs-params">()</span></span>: MemoryInfo {
        <span class="hljs-keyword">val</span> runtime = Runtime.getRuntime()
        <span class="hljs-keyword">val</span> usedMemory = runtime.totalMemory() - runtime.freeMemory()
        <span class="hljs-keyword">return</span> MemoryInfo(
            usedMemoryMB = usedMemory / <span class="hljs-number">1024.0</span> / <span class="hljs-number">1024.0</span>,
            maxMemoryMB = runtime.maxMemory() / <span class="hljs-number">1024.0</span> / <span class="hljs-number">1024.0</span>
        )
    }
    
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryInfo</span>(
        <span class="hljs-keyword">val</span> usedMemoryMB: <span class="hljs-built_in">Double</span>,
        <span class="hljs-keyword">val</span> maxMemoryMB: <span class="hljs-built_in">Double</span>
    )
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isMemorySufficient</span><span class="hljs-params">(requiredMB: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> info = getMemoryInfo()
        <span class="hljs-keyword">return</span> (info.maxMemoryMB - info.usedMemoryMB) &gt;= requiredMB
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-67">åä¸€ã€å¿«é€Ÿå‚è€ƒ</h2>
<h3 data-id="heading-68">11.1 API é€ŸæŸ¥è¡¨</h3>
<h4 data-id="heading-69">JavaScript è°ƒç”¨ Android</h4>















































<table><thead><tr><th>æ–¹æ³•</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>ç‰¹ç‚¹</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><code>addJavascriptInterface</code></td><td>Android 4.2+</td><td>æœ€ç®€å•ç›´æ¥</td><td>â­â­â­â­â­</td></tr><tr><td><code>shouldOverrideUrlLoading</code></td><td>æ‰€æœ‰ç‰ˆæœ¬</td><td>å®‰å…¨æ€§é«˜</td><td>â­â­â­â­</td></tr><tr><td><code>onJsPrompt</code></td><td>æ‰€æœ‰ç‰ˆæœ¬</td><td>å¯è¿”å›å€¼</td><td>â­â­â­â­â­</td></tr><tr><td><code>onJsAlert</code></td><td>æ‰€æœ‰ç‰ˆæœ¬</td><td>ç®€å•ä½†åŠŸèƒ½æœ‰é™</td><td>â­â­</td></tr><tr><td><code>onJsConfirm</code></td><td>æ‰€æœ‰ç‰ˆæœ¬</td><td>éœ€è¦ç”¨æˆ·ç¡®è®¤</td><td>â­â­</td></tr><tr><td><code>postMessage</code></td><td>Android 6.0+</td><td>å®˜æ–¹æ¨è</td><td>â­â­â­â­</td></tr></tbody></table>
<h4 data-id="heading-70">Android è°ƒç”¨ JavaScript</h4>























<table><thead><tr><th>æ–¹æ³•</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>ç‰¹ç‚¹</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><code>evaluateJavascript</code></td><td>Android 4.4+</td><td>æ”¯æŒè¿”å›å€¼</td><td>â­â­â­â­â­</td></tr><tr><td><code>loadUrl</code></td><td>æ‰€æœ‰ç‰ˆæœ¬</td><td>å…¼å®¹æ€§å¥½</td><td>â­â­â­</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å®ç° React Nativeï¼ˆ2ï¼‰: è·¨å¹³å°æ”¯æŒ]]></title>    <link>https://juejin.cn/post/7594578555352989747</link>    <guid>https://juejin.cn/post/7594578555352989747</guid>    <pubDate>2026-01-13T11:21:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594578555352989747" data-draft-id="7594578555352973363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å®ç° React Nativeï¼ˆ2ï¼‰: è·¨å¹³å°æ”¯æŒ"/> <meta itemprop="keywords" content="å‰ç«¯,React Native"/> <meta itemprop="datePublished" content="2026-01-13T11:21:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="zerosrat"/> <meta itemprop="url" content="https://juejin.cn/user/1538972006230942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å®ç° React Nativeï¼ˆ2ï¼‰: è·¨å¹³å°æ”¯æŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1538972006230942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    zerosrat
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T11:21:38.000Z" title="Tue Jan 13 2026 11:21:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸Šä¸€å›ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzerosrat.dev%2Fn%2F2025%2Fmini-rn-1" target="_blank" title="https://zerosrat.dev/n/2025/mini-rn-1" ref="nofollow noopener noreferrer">ä»é›¶å®ç° React Nativeï¼ˆ1ï¼‰: æ¡¥é€šä¿¡çš„åŸç†ä¸å®ç°</a></p>
</blockquote>
<h2 data-id="heading-0">å¹³å°æ”¯æŒçš„å–èˆ</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ã€Šä»é›¶å®ç° React Nativeï¼ˆ1ï¼‰: æ¡¥é€šä¿¡çš„åŸç†ä¸å®ç°ã€‹ä¸­ï¼ŒåŸºäº <strong>macos</strong> å¹³å°å®ç°äº† JS ä¸ Native çš„åŒå‘æ¡¥é€šä¿¡ï¼Œåœ¨æœ¬ç¯‡ä¸­å°†å¯¹å…¶ä»–å¹³å°è¿›è¡Œæ”¯æŒï¼Œå®ç°ã€Œwrite onceï¼Œrun anywhereã€è¿™ä¸ªç†å¿µã€‚</p>
<p>æ¥ä¸‹æ¥ä¾¿æ¥è¿›è¡Œ iOS å’Œ Android å¹³å°çš„æ”¯æŒå·¥ä½œã€‚</p>
<h3 data-id="heading-1">iOS è¿›å±•é¡ºåˆ©</h3>
<p>åœ¨æ”¯æŒäº† macos ç«¯åï¼Œ<strong>æ”¯æŒ iOS</strong> æ˜¯å¾ˆå®¹æ˜“çš„ï¼Œå¯ä»¥é©¬ä¸Šç€æ‰‹æ¥æè¿™ä¸ªäº‹æƒ…ã€‚å¾—ç›Šäº Apple ç”Ÿæ€å¸¦æ¥çš„ï¼šmacOS å’Œ iOS éƒ½å†…ç½®äº† JavaScriptCore.frameworkï¼Œè¿™æ„å‘³ç€æ— éœ€é¢å¤–çš„å¼•æ“ç§»æ¤å·¥ä½œï¼›ä¸”ç¼–ç¨‹ API å¾ˆç›¸ä¼¼ï¼Œè¿™æ„å‘³ç€å·®å¼‚åŒ–å®ç°è¾ƒå°‘ï¼Œå¤§å¤šå¯å¤ç”¨æˆ–ç±»æ¯”å®ç°ã€‚</p>
<p>äº‹å®ä¸Šï¼Œæˆ‘åªèŠ±äº†<strong>åŠå¤©æ—¶é—´</strong>å°±å®Œæˆäº† iOS ç«¯çš„æ”¯æŒå·¥ä½œï¼Œå…¶ä¸­ä¸»è¦çš„æ—¶é—´èŠ±åœ¨äº†æ„å»ºé…ç½®çš„ä¿®æ”¹ã€æµ‹è¯•ç¤ºä¾‹çš„æ–°å¢å’Œè°ƒæ•´ï¼Œå°‘éƒ¨åˆ†æ—¶é—´èŠ±åœ¨äº†å·®å¼‚åŒ–çš„ <code>DeviceInfo</code> æ¨¡å—å®ç°ã€‚</p>
<p>å¾—ç›Šäº Apple ç”Ÿæ€ï¼ŒiOS çš„æ”¯æŒå·¥ä½œä¸­å¤§éƒ¨åˆ†ä»£ç éƒ½æ˜¯å¤ç”¨çš„ï¼Œ<strong>å¤ç”¨ç‡ 90%</strong>ã€‚å› ä¸º macos å’Œ iOS çš„ JSC API ä¸€è‡´ï¼Œä»¥åŠ C++ è¯­è¨€çš„ä¼˜åŠ¿ï¼Œå¯ä»¥ç”¨äºè·¨ç«¯å¤ç”¨ã€‚å¤ç”¨çš„å†…å®¹åŒ…å«ï¼š</p>
<ul>
<li>JSCExector</li>
<li>Bridge é€šä¿¡é€»è¾‘</li>
<li>æ¨¡å—æ³¨å†Œé€»è¾‘</li>
</ul>
<h3 data-id="heading-2">Android æ»‘é“å¢</h3>
<p>åœ¨é¡ºåˆ©æ”¯æŒäº† iOS åï¼Œé¢„æƒ³æ˜¯ Android çš„æ”¯æŒä¹Ÿä¸ä¼šå¤ªéš¾ï¼Œä½†å®é™…åšèµ·æ¥å‘ç°æ²¡è¿™ä¹ˆç®€å•ã€‚</p>
<p>è®°å¾—æ˜¯å‘¨æœ«çš„åˆåçš„è½»æ¾ä¸‹åˆï¼Œæˆ‘å…ˆæŠŠ Android çš„ç›¸å…³ç¯å¢ƒæ­å»ºå¥½ï¼ˆåŒ…æ‹¬ Android Studioã€Java SDK åŠå…¶ç¯å¢ƒå˜é‡ã€NDK ç­‰ï¼‰ï¼Œç„¶åè¿›å…¥ JSC çš„ç§»æ¤å·¥ä½œã€‚Why JSC ç§»æ¤ï¼Ÿå› ä¸ºä¸åŒäº Apple ç”Ÿæ€ï¼ŒAndroid ç³»ç»Ÿæ˜¯æ²¡æœ‰å†…ç½® JSC å¼•æ“çš„ã€‚è€Œæ­£æ˜¯è¿™ä¸€æ­¥è®©æˆ‘é™·å…¥æ³¥æ½­ã€‚</p>
<p>æˆ‘é¦–å…ˆå°è¯•äº†ä¸‰æ–¹ç¼–è¯‘çš„ç‰ˆæœ¬ï¼Œä½†æ˜¯è¦ä¹ˆé‡åˆ°äº† libjsc.soï¼ˆJSC ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯ä¾› Android å¹³å°è¿è¡Œï¼Œå¯ç±»æ¯”ç†è§£ä¸ºå‰ç«¯çš„ wasmï¼‰ ä¸æ”¯æŒ arm64ï¼ˆç”±äºæ˜¯ MBP æœºå™¨ï¼Œå®‰å“æ¨¡æ‹Ÿå™¨å¿…é¡»ç”¨ arm64 è€Œé x86 æ¶æ„çš„ï¼‰ï¼Œè¦ä¹ˆæ˜¯é‡åˆ°äº† libjsc.so å’Œ NDK ç‰ˆæœ¬ä¸å…¼å®¹ã€‚ç„¶åå°è¯•äº†ä»ç¤¾åŒºæä¾›çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-native-community%2Fjsc-android-buildscripts" target="_blank" title="https://github.com/react-native-community/jsc-android-buildscripts" ref="nofollow noopener noreferrer">jsc-android-buildscripts</a> è‡ªè¡Œç¼–è¯‘ï¼Œä¹Ÿé‡åˆ°äº†å„ç§é—®é¢˜ç¼–è¯‘å¤±è´¥ï¼Œè€ƒè™‘åˆ°æ¯æ¬¡ç¼–è¯‘æ—¶é—´ï¼š2-3 å°æ—¶ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªè‰°éš¾çš„æ—…ç¨‹ã€‚</p>
<p>å°±ç®—è§£å†³äº† JavaScriptCoreï¼Œè¿˜æœ‰ JNI åœ¨ç­‰ç€æˆ‘ã€‚Java å’Œ C++ ä¹‹é—´çš„æ¡¥æ¢ä¸æ˜¯ç®€å•çš„å‡½æ•°è°ƒç”¨ã€‚æˆ‘è¦å¤„ç†è¯¸å¦‚ï¼šç±»å‹è½¬æ¢ã€çº¿ç¨‹åŒæ­¥ç­‰é—®é¢˜ã€‚å‰æ–¹æœ‰å¾ˆå¤šæ–°çš„å‘åœ¨ç­‰ç€æˆ‘ã€‚</p>
<h3 data-id="heading-3">èˆä¸å¾—</h3>
<p>Maybe it's not the right time. å…ˆç†è§£æ ¸å¿ƒï¼Œå†æ‰©å±•è¾¹ç•Œã€‚å…ˆæ”¾ä¸‹ Android çš„æ”¯æŒï¼Œæˆ–è®¸æœªæ¥çš„æŸä¸€å¤©å†å›å¤´æ¥çœ‹è¿™ä»¶äº‹ã€‚</p>
<p>è¿™ä¸ªå†³å®šè®©æˆ‘æƒ³èµ·äº† MVPï¼ˆæœ€å°å¯è¡Œäº§å“ï¼‰çš„åŸåˆ™ï¼šå…ˆè®©æ ¸å¿ƒåŠŸèƒ½è·‘é€šï¼Œå†é€æ­¥å®Œå–„ã€‚åœ¨å­¦ä¹ é¡¹ç›®ä¸­ï¼Œè¿™ä¸ªåŸåˆ™åŒæ ·é€‚ç”¨â€”â€”å…ˆæŒæ¡æœ¬è´¨ï¼Œå†æ‰©å±•è¾¹ç•Œã€‚</p>
<p>æ—¢ç„¶å†³å®šä¸“æ³¨äº iOS å’Œ macOS åŒå¹³å°ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±éœ€è¦ä¸€å¥—ä¼˜é›…çš„æ„å»ºç³»ç»Ÿæ¥æ”¯æ’‘è·¨å¹³å°å¼€å‘ã€‚ä¸€ä¸ªå¥½çš„æ„å»ºç³»ç»Ÿä¸ä»…èƒ½è®©å¼€å‘è€…è½»æ¾åˆ‡æ¢å¹³å°ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒèƒ½ä¸ºåç»­çš„ä»£ç å¤ç”¨å¥ å®šåŸºç¡€ã€‚</p>
<h2 data-id="heading-4">æ„å»ºç³»ç»Ÿçš„æ¼”è¿›</h2>
<p>åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œå—åˆ¶äºç¯‡å¹…çš„é™åˆ¶ï¼Œè·³è¿‡äº†å¯¹æ„å»ºç³»ç»Ÿçš„è®²è§£ã€‚è€Œåœ¨è·¨å¹³å°æ”¯æŒä¸­ï¼Œå¤©ç„¶éœ€è¦è¿­ä»£æ„å»ºç³»ç»Ÿï¼Œä¹Ÿæ­£æ˜¯å¯¹å…¶å±•å¼€è®²è®²çš„ä¸€ä¸ªå¥½æ—¶æœºã€‚</p>
<h3 data-id="heading-5">Make æ˜¯ä»€ä¹ˆ</h3>
<p>Make æ˜¯ä¸€ä¸ªè¯ç”Ÿäº 1976 å¹´çš„æ„å»ºå·¥å…·ï¼Œå®ƒçš„å·¥ä½œåŸç†å¾ˆç®€å•ï¼šæè¿°æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç„¶ååªé‡æ–°ç¼–è¯‘"å˜åŒ–è¿‡çš„"æ–‡ä»¶ã€‚</p>
<p>Make é€‚åˆäº <strong>éœ€è¦å¤šæ­¥éª¤æ„å»ºæµç¨‹</strong> çš„é¡¹ç›®ï¼Œæœ¬é¡¹ç›®çš„æ„å»ºæµç¨‹è¾ƒä¸ºå¤æ‚ï¼šJS äº§ç‰©æ‰“åŒ… -&gt; CMake é…ç½® -&gt; C++ äº§ç‰©ç¼–è¯‘ -&gt; è¿è¡Œ test ä»£ç ï¼Œå¾ˆé€‚åˆå¼•å…¥ Make è¿›è¡Œä»»åŠ¡æµç¨‹çš„ç¼–æ’ã€‚</p>
<p>Make å·¥å…·çš„é…å¥— <code>Makefile</code> æ–‡ä»¶æ˜¯ä¸€ä¸ª<strong>æ–‡æœ¬é…ç½®æ–‡ä»¶</strong>ï¼Œå®ƒå®šä¹‰äº†æ„å»ºè§„åˆ™ã€ä¾èµ–å…³ç³»å’Œæ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸º npm å’Œ package.json çš„å…³ç³»ã€‚</p>
<p>ä»¥ä¸‹æ˜¯åŸºäº macos ç¼–è¯‘å’Œæµ‹è¯•çš„ Makefile æ–‡ä»¶æ‘˜è¦ä»£ç ï¼Œæ ¸å¿ƒæ­¥éª¤åŒ…å«äº† <code>js-build</code>, <code>configure</code>, <code>test</code>ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># å˜é‡å®šä¹‰ (Makefile ç¬¬ 10-13 è¡Œ)</span>
<span class="hljs-comment"># ============================================</span>
BUILD_DIR = build
CMAKE_BUILD_TYPE ?= Debug
CORES = <span class="hljs-variable">$(<span class="hljs-built_in">shell</span> sysctl -n hw.ncpu)</span>  <span class="hljs-comment"># åŠ¨æ€æ£€æµ‹ CPU æ ¸å¿ƒæ•°</span>

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># ä¸»è¦æ„å»ºç›®æ ‡ - ä¾èµ–é“¾è®¾è®¡</span>
<span class="hljs-comment"># ============================================</span>

<span class="hljs-comment"># é»˜è®¤ç›®æ ‡ï¼šmake ç­‰ä»·äº make build</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: all</span>
<span class="hljs-section">all: build</span>

<span class="hljs-comment"># æ ¸å¿ƒæ„å»ºæµç¨‹ï¼šjs-build â†’ configure â†’ å®é™…ç¼–è¯‘</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: build</span>
<span class="hljs-section">build: js-build configure</span>
    @echo <span class="hljs-string">"ğŸ”¨ Building Mini React Native..."</span>
    @cd <span class="hljs-variable">$(BUILD_DIR)</span> &amp;&amp; make -j<span class="hljs-variable">$(CORES)</span>
    @echo <span class="hljs-string">"âœ… Build complete"</span>

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># æ­¥éª¤ 1ï¼šJavaScript æ„å»º (ç¬¬ 29-33 è¡Œ)</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: js-build</span>
<span class="hljs-section">js-build:</span>
    @echo <span class="hljs-string">"ğŸ“¦ Building JavaScript bundle..."</span>
    @npm run build    <span class="hljs-comment"># æ‰§è¡Œ rollup -cï¼Œç”Ÿæˆ dist/bundle.js</span>
    @echo <span class="hljs-string">"âœ… JavaScript bundle built"</span>

<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># æ­¥éª¤ 2ï¼šCMake é…ç½® (ç¬¬ 22-26 è¡Œ)</span>
<span class="hljs-comment"># ============================================</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: configure</span>
<span class="hljs-section">configure:</span>
    @echo <span class="hljs-string">"ğŸ”§ Configuring build system..."</span>
    @mkdir -p <span class="hljs-variable">$(BUILD_DIR)</span>
    @cd <span class="hljs-variable">$(BUILD_DIR)</span> &amp;&amp; cmake -DCMAKE_BUILD_TYPE=<span class="hljs-variable">$(CMAKE_BUILD_TYPE)</span> -DCMAKE_EXPORT_COMPILE_COMMANDS=ON ..
    @echo <span class="hljs-string">"âœ… Configuration complete"</span>


<span class="hljs-comment"># ============================================</span>
<span class="hljs-comment"># æ­¥éª¤ 4ï¼šåˆ†å±‚æµ‹è¯•æµç¨‹ (ç¬¬ 91-130 è¡Œ)</span>
<span class="hljs-comment"># ============================================</span>

<span class="hljs-comment"># å®Œæ•´æµ‹è¯•ï¼šbuild â†’ 4 ä¸ªæµ‹è¯•ä¾æ¬¡æ‰§è¡Œ</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: test</span>
<span class="hljs-section">test: build</span>
    @echo <span class="hljs-string">"ğŸ§ª Running all tests..."</span>
    @echo <span class="hljs-string">"\nğŸ“ Test 1: Basic functionality test"</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/mini_rn_test
    @echo <span class="hljs-string">"\nğŸ“ Test 2: Module framework test"</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/test_module_framework
    @echo <span class="hljs-string">"\nğŸ“ Test 3: Integration test"</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/test_integration
    @echo <span class="hljs-string">"\nğŸ“ Test 4: Performance test"</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/test_performance
    @echo <span class="hljs-string">"\nâœ… All tests complete"</span>

<span class="hljs-comment"># å•ç‹¬çš„æµ‹è¯•ç›®æ ‡ - å…è®¸ç»†ç²’åº¦æµ‹è¯•</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: test-basic</span>
<span class="hljs-section">test-basic: build</span>
    @echo <span class="hljs-string">"ğŸ§ª Running basic functionality test..."</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/mini_rn_test

<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: test-performance</span>
<span class="hljs-section">test-performance: build</span>
    @echo <span class="hljs-string">"ğŸ§ª Running performance test..."</span>
    @./<span class="hljs-variable">$(BUILD_DIR)</span>/test_performance
</code></pre>
<p>åœ¨å¼•å…¥äº† make åï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå¤æ‚æµç¨‹çš„ç¼–æ’ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦è¿è¡Œæµ‹è¯•ä»£ç æ—¶ï¼Œå®é™…çš„å‘ç”Ÿçš„äº‹æƒ…å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-text" lang="text">ç”¨æˆ·å‘½ä»¤: make test
    â†“
test: build
    â†“
build: js-build configure
        â†“             â†“
    js-build          configure
        â†“                   â†“
    npm run build       cmake ..
        â†“                   â†“
    dist/bundle.js      build/Makefile
                            â†“
                        make -j8 (CMake ç®¡ç†çš„ä¾èµ–)
                            â†“
                        libmini_react_native.a
                            â†“
                        mini_rn_test (ç­‰ 4 ä¸ªå¯æ‰§è¡Œæ–‡ä»¶)
</code></pre>
<p><strong>Before å¼•å…¥ Make</strong>ï¼šæƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ Makeï¼Œæ¯æ¬¡ä¿®æ”¹ä»£ç åä½ éœ€è¦æ‰‹åŠ¨æ‰§è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ­¥éª¤1ï¼šæ„å»º JavaScript</span>
npm run build

<span class="hljs-comment"># æ­¥éª¤2ï¼šé…ç½® CMake</span>
<span class="hljs-built_in">mkdir</span> -p build
<span class="hljs-built_in">cd</span> build &amp;&amp; cmake ..

<span class="hljs-comment"># æ­¥éª¤3ï¼šç¼–è¯‘ C++</span>
<span class="hljs-built_in">cd</span> build &amp;&amp; make -j8

<span class="hljs-comment"># æ­¥éª¤4ï¼šè¿è¡Œæµ‹è¯•</span>
./build/mini_rn_test
./build/test_module_framework
./build/test_integration
./build/test_performance
</code></pre>
<p>æ¯æ¬¡éƒ½è¦è®°ä½è¿™ä¹ˆå¤šå‘½ä»¤ï¼Œè¿˜è¦ç¡®ä¿æ‰§è¡Œé¡ºåºæ­£ç¡®ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå¦‚æœæŸä¸ªæ­¥éª¤å¤±è´¥äº†ï¼Œä½ éœ€è¦æ‰‹åŠ¨åˆ¤æ–­ä»å“ªé‡Œé‡æ–°å¼€å§‹ã€‚</p>
<p><strong>After å¼•å…¥ Make</strong>ï¼š<code>make test</code> ä¸€æ¡å‘½ä»¤æå®šæ‰€æœ‰äº‹æƒ…</p>
<h3 data-id="heading-6">CMake æ˜¯ä»€ä¹ˆ</h3>
<p>åœ¨æŠŠ C++ ä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶è¿™ä¸€æ­¥ä¹‹å‰ï¼Œå…¶å®æ„å»ºç³»ç»Ÿæå‰å¼•å…¥äº† CMake è¿›è¡Œç®¡ç†ã€‚CMake ä¸æ˜¯â€œæ„å»ºå·¥å…·â€ï¼Œè€Œæ˜¯â€œæ„å»ºç³»ç»Ÿçš„æ„å»ºç³»ç»Ÿâ€ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸­ CMake å®é™…ä¸Šç”Ÿæˆäº†ç¼–è¯‘ä»£ç çš„å·¥å…· Makefile æ–‡ä»¶ã€‚CMake ä¼šè¯»å– <code>CMakeLists.txt</code>ï¼Œç„¶åç”ŸæˆåŸç”Ÿçš„æ„å»ºæ–‡ä»¶ã€‚</p>
<p>Why CMakeï¼Ÿå› ä¸º mini-rn é¡¹ç›®å¼€å§‹ä¹‹åˆå°±æ˜¯è¦è€ƒè™‘å¤šå¹³å°æ”¯æŒçš„ï¼Œä¸ºäº†å®ç°è¿™ä¸ª featureï¼Œä¾¿ä¼šé‡åˆ° <strong>å¤šå¹³å°æ„å»ºçš„å¤æ‚æ€§</strong> è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜ 1ï¼šå¹³å°ç‰¹å®šæºæ–‡ä»¶ç®¡ç†</strong></p>
<p>ä¸åŒå¹³å°éœ€è¦ä¸åŒçš„å®ç°ï¼š</p>
<ul>
<li>macOSï¼šä½¿ç”¨ <code>IOKit</code> è·å–ç¡¬ä»¶ä¿¡æ¯</li>
<li>iOSï¼šä½¿ç”¨ <code>UIDevice</code> è·å–è®¾å¤‡ä¿¡æ¯</li>
</ul>
<p>æ²¡æœ‰ CMake éœ€è¦ç»´æŠ¤ä¸¤å¥—æ„å»ºè„šæœ¬ï¼Œå¼•å…¥ CMake åå¯é€šè¿‡æ¡ä»¶ç¼–è¯‘ä¸€å¥—é…ç½®æå®šã€‚</p>
<p><strong>é—®é¢˜ 2ï¼šç³»ç»Ÿæ¡†æ¶åŠ¨æ€é“¾æ¥</strong></p>
<p>ä¸åŒå¹³å°éœ€è¦é“¾æ¥ä¸åŒæ¡†æ¶ï¼šmacOS éœ€è¦ <code>IOKit</code>ï¼ŒiOS éœ€è¦ <code>UIKit</code>ã€‚</p>
<p>å¼•å…¥ CMake åå¯è‡ªåŠ¨æ£€æµ‹å¹¶é“¾æ¥æ­£ç¡®çš„æ¡†æ¶ã€‚</p>
<p><strong>è§£å†³æ•ˆæœ</strong></p>
<p><strong>å¼•å…¥ CMake å‰</strong>ï¼šéœ€è¦ç»´æŠ¤å¤šå¥—æ„å»ºè„šæœ¬ï¼Œæ‰‹åŠ¨ç®¡ç†å¤æ‚é…ç½®ï¼Œå®¹æ˜“å‡ºé”™ã€‚</p>
<p><strong>å¼•å…¥ CMake å</strong>ï¼šä¸€å¥— <code>CMakeLists.txt</code> æ”¯æŒæ‰€æœ‰å¹³å°ï¼Œè‡ªåŠ¨å¤„ç†å¹³å°å·®å¼‚ï¼Œå¤§å¹…é™ä½ç»´æŠ¤æˆæœ¬ã€‚</p>
<p><strong>CMake å…³é”®è¯­æ³•è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>CMAKE_SYSTEM_NAME</code>ï¼šCMake å†…ç½®å˜é‡ï¼Œè¡¨ç¤ºç›®æ ‡ç³»ç»Ÿåç§°ï¼ˆiOSã€Darwinç­‰ï¼‰</li>
<li><code>find_library()</code>ï¼šåœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾æŒ‡å®šçš„åº“æ–‡ä»¶</li>
<li><code>target_link_libraries()</code>ï¼šå°†åº“æ–‡ä»¶é“¾æ¥åˆ°ç›®æ ‡å¯æ‰§è¡Œæ–‡ä»¶</li>
<li><code>set()</code>ï¼šè®¾ç½®å˜é‡çš„å€¼</li>
<li><code>if(MATCHES)</code>ï¼šæ¡ä»¶åˆ¤æ–­ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…</li>
</ul>
<h3 data-id="heading-7">æ”¹åŠ¨ä¸€ï¼šMakefile æ–°å¢ iOS æ„å»ºç›®æ ‡</h3>
<p>åœ¨ macOS çš„å¯æ‰©å±•æ„å»ºç³»ç»Ÿé…ç½®å°±ç»ªåï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•æ”¹åŠ¨ä»¥æ”¯æŒ iOSã€‚</p>
<p><strong>æ”¹åŠ¨ä¸€å®ç°äº†ä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šåœ¨ç°æœ‰ Makefile åŸºç¡€ä¸Šï¼Œæ–°å¢ iOS å¹³å°çš„å®Œæ•´æ„å»ºæµç¨‹ï¼Œå®ç°"ä¸€å¥— Makefileï¼ŒåŒå¹³å°æ”¯æŒ"ã€‚</p>
<p><strong>å…·ä½“å®ç°</strong>ï¼š</p>
<ol>
<li><strong>æ–°å¢ 4 ä¸ª iOS ä¸“ç”¨ç›®æ ‡</strong>ï¼š<code>ios-configure</code>ã€<code>ios-build</code>ã€<code>ios-test</code>ã€<code>ios-test-deviceinfo</code></li>
<li><strong>å»ºç«‹ iOS æ„å»ºæµç¨‹</strong>ï¼šjs-build â†’ ios-configure â†’ ios-build â†’ ios-test</li>
<li><strong>å®ç°å¹³å°éš”ç¦»</strong>ï¼šiOS ä½¿ç”¨ç‹¬ç«‹çš„ <code>build_ios/</code> ç›®å½•ï¼Œä¸ macOS çš„ <code>build/</code> ç›®å½•å®Œå…¨åˆ†ç¦»</li>
<li><strong>è‡ªåŠ¨åŒ– Xcode ç¯å¢ƒé…ç½®</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ SDK è·¯å¾„ã€è®¾ç½®å¼€å‘è€…ç›®å½•ã€é…ç½®æ¨¡æ‹Ÿå™¨æ¶æ„</li>
</ol>
<h4 data-id="heading-8">æ–°å¢çš„ 4 ä¸ª iOS ç›®æ ‡</h4>
<p>åŸæœ¬åŸºäº macOS çš„æ„å»ºè·¯å¾„æ˜¯ï¼šjs-build â†’ configure â†’ build â†’ testï¼Œç°åœ¨ä¸º iOS æ–°å¢äº†å¯¹åº”çš„å¹³è¡Œè·¯å¾„ï¼šjs-build â†’ ios-configure â†’ ios-build â†’ ios-testã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># iOS æ„å»ºé…ç½®ï¼ˆæ¨¡æ‹Ÿå™¨ï¼‰</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: ios-configure</span>
<span class="hljs-section">ios-configure:</span>
    @mkdir -p <span class="hljs-variable">$(BUILD_DIR)</span>_ios
    @cd <span class="hljs-variable">$(BUILD_DIR)</span>_ios &amp;&amp; DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer cmake \
        -DCMAKE_SYSTEM_NAME=iOS \
        -DCMAKE_OSX_ARCHITECTURES=$<span class="hljs-variable">$(uname -m)</span> \
        -DCMAKE_OSX_SYSROOT=$$(DEVELOPER_DIR=/Applications/Xcode.app/Contents/Developer xcrun --sdk iphonesimulator --show-sdk-path) \
        -DCMAKE_BUILD_TYPE=<span class="hljs-variable">$(CMAKE_BUILD_TYPE)</span> \
        -DCMAKE_EXPORT_COMPILE_COMMANDS=ON \
        ..

<span class="hljs-comment"># æ„å»º iOS ç‰ˆæœ¬ï¼ˆæ¨¡æ‹Ÿå™¨ï¼‰</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: ios-build</span>
<span class="hljs-section">ios-build: js-build ios-configure</span>
    @cd <span class="hljs-variable">$(BUILD_DIR)</span>_ios &amp;&amp; make -j<span class="hljs-variable">$(CORES)</span>

<span class="hljs-comment"># iOS æµ‹è¯•ç›®æ ‡</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: ios-test</span>
<span class="hljs-section">ios-test: ios-build</span>
    @./test_ios.sh all

<span class="hljs-comment"># iOS DeviceInfo æµ‹è¯•</span>
<span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: ios-test-deviceinfo</span>
<span class="hljs-section">ios-test-deviceinfo: ios-build</span>
    @./test_ios.sh deviceinfo
</code></pre>
<h4 data-id="heading-9">å…³é”®è®¾è®¡å†³ç­–</h4>
<p><strong>1. ç‹¬ç«‹æ„å»ºç›®å½•</strong></p>
<p>macOS ç”¨ <code>build/</code>ï¼ŒiOS ç”¨ <code>build_ios/</code>ï¼Œäº’ä¸å¹²æ‰°ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">@mkdir -p <span class="hljs-variable">$(BUILD_DIR)</span>_ios   <span class="hljs-comment"># iOS æ„å»ºç›®å½•</span>
</code></pre>
<p><strong>2. ä»…æ”¯æŒ iOS æ¨¡æ‹Ÿå™¨</strong></p>
<p>ä¸ºä»€ä¹ˆä¸æ”¯æŒçœŸæœºï¼Ÿå› ä¸ºï¼š</p>
<ul>
<li>çœŸæœºéœ€è¦å¼€å‘è€…è¯ä¹¦å’Œé…ç½®æ–‡ä»¶</li>
<li>æ¨¡æ‹Ÿå™¨è¶³å¤ŸéªŒè¯ Bridge é€šä¿¡æœºåˆ¶</li>
<li>é™ä½ç¯å¢ƒé…ç½®å¤æ‚åº¦</li>
</ul>
<pre><code class="hljs language-makefile" lang="makefile">-DCMAKE_OSX_SYSROOT=$<span class="hljs-variable">$(xcrun --sdk iphonesimulator --show-sdk-path)</span>
</code></pre>
<p><strong>3. è¯­ä¹‰åŒ–å‘½ä»¤</strong></p>
<p><code>make ios-configure</code> æ¯”å†™ä¸€é•¿ä¸² CMake å‘½ä»¤ç®€æ´å¤ªå¤šã€‚è¿™å°±æ˜¯ Makefile ä½œä¸ºç”¨æˆ·æ¥å£çš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-10">æ”¹åŠ¨äºŒï¼šCMake å¹³å°æ¡ä»¶ç¼–è¯‘</h3>
<p><strong>æ”¹åŠ¨äºŒå®ç°äº†ä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šè®© CMake èƒ½å¤Ÿæ™ºèƒ½è¯†åˆ«ç›®æ ‡å¹³å°ï¼Œå¹¶è‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„æºæ–‡ä»¶å’Œç³»ç»Ÿæ¡†æ¶ï¼Œå®ç°"ä¸€å¥— CMakeLists.txtï¼Œæ™ºèƒ½é€‚é…åŒå¹³å°"ã€‚</p>
<p><strong>å…·ä½“å®ç°</strong>ï¼š</p>
<ol>
<li><strong>å¹³å°æ£€æµ‹æœºåˆ¶</strong>ï¼šé€šè¿‡ <code>CMAKE_SYSTEM_NAME</code> å˜é‡è‡ªåŠ¨è¯†åˆ«æ˜¯ macOS è¿˜æ˜¯ iOS</li>
<li><strong>æºæ–‡ä»¶æ™ºèƒ½é€‰æ‹©</strong>ï¼šæ ¹æ®å¹³å°è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„ <code>.mm</code> å®ç°æ–‡ä»¶</li>
<li><strong>æ¡†æ¶åŠ¨æ€é“¾æ¥</strong>ï¼šiOS é“¾æ¥ UIKitï¼ŒmacOS é“¾æ¥ IOKitï¼Œå…±äº« JavaScriptCore å’Œ Foundation</li>
<li><strong>ç¼–è¯‘æ ‡å¿—è‡ªåŠ¨è®¾ç½®</strong>ï¼šä¸º Objective-C++ æ–‡ä»¶è‡ªåŠ¨è®¾ç½® ARC æ ‡å¿—</li>
<li><strong>éƒ¨ç½²ç›®æ ‡é…ç½®</strong>ï¼šiOS è®¾ä¸º 12.0+ï¼ŒmacOS è®¾ä¸º 10.15+</li>
</ol>
<p><strong>è®¾è®¡ç²¾é«“</strong>ï¼šç¼–è¯‘æ—¶ç¡®å®šï¼Œè¿è¡Œæ—¶æ— å¼€é”€ã€‚æœ€ç»ˆçš„ iOS äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å®Œå…¨æ²¡æœ‰ macOS ä»£ç ï¼Œåä¹‹äº¦ç„¶ã€‚</p>
<h4 data-id="heading-11">åŸæ¥çš„ä»£ç ï¼ˆä»… macOSï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake"># åŸå§‹ç‰ˆæœ¬ - ä»…æ”¯æŒ macOS
if(APPLE)
    set(PLATFORM_SOURCES
        src/macos/modules/deviceinfo/DeviceInfoModule.mm
    )
    find_library(IOKIT_FRAMEWORK IOKit)
endif()

target_link_libraries(mini_react_native
    ${JAVASCRIPTCORE_FRAMEWORK}
    ${IOKIT_FRAMEWORK}
)
</code></pre>
<h4 data-id="heading-12">æ¼”è¿›åçš„ä»£ç ï¼ˆmacOS + iOSï¼‰</h4>
<pre><code class="hljs language-cmake" lang="cmake"># æ¼”è¿›ç‰ˆæœ¬ - æ”¯æŒ macOS + iOS
if(APPLE)
    # æ ¹æ®å…·ä½“å¹³å°é€‰æ‹©æºæ–‡ä»¶
    if(${CMAKE_SYSTEM_NAME} MATCHES "iOS")
        set(PLATFORM_SOURCES
            src/ios/modules/deviceinfo/DeviceInfoModule.mm
        )
    else()
        # macOS
        set(PLATFORM_SOURCES
            src/macos/modules/deviceinfo/DeviceInfoModule.mm
        )
    endif()

    # å¹³å°ç‰¹å®šæ¡†æ¶
    if(${CMAKE_SYSTEM_NAME} MATCHES "iOS")
        find_library(UIKIT_FRAMEWORK UIKit)
        set(PLATFORM_FRAMEWORKS ${UIKIT_FRAMEWORK})
    else()
        find_library(IOKIT_FRAMEWORK IOKit)
        set(PLATFORM_FRAMEWORKS ${IOKIT_FRAMEWORK})
    endif()

    # ç»Ÿä¸€é“¾æ¥
    target_link_libraries(mini_react_native
        ${JAVASCRIPTCORE_FRAMEWORK}
        ${FOUNDATION_FRAMEWORK}
        ${PLATFORM_FRAMEWORKS}
    )
endif()
</code></pre>
<h4 data-id="heading-13">ä¸‰ä¸ªå…³é”®å˜åŒ–</h4>
<p><strong>1. æºæ–‡ä»¶åˆ†ç¦»</strong></p>
<pre><code class="hljs language-text" lang="text">src/
â”œâ”€â”€ macos/modules/deviceinfo/DeviceInfoModule.mm
â””â”€â”€ ios/modules/deviceinfo/DeviceInfoModule.mm
</code></pre>
<p>ä¸¤ä¸ªæ–‡ä»¶è™½ç„¶æ–‡ä»¶åç›¸åŒï¼Œä½†å®ç°ä¸åŒï¼š</p>
<ul>
<li><strong>macOS ç‰ˆæœ¬</strong>ï¼šç”¨ IOKit è·å–ç¡¬ä»¶ä¿¡æ¯</li>
<li><strong>iOS ç‰ˆæœ¬</strong>ï¼šç”¨ UIDevice è·å–è®¾å¤‡ä¿¡æ¯</li>
</ul>
<p><strong>2. æ¡†æ¶åŠ¨æ€é“¾æ¥</strong></p>




















<table><thead><tr><th>å¹³å°</th><th>å…±äº«æ¡†æ¶</th><th>å¹³å°ç‰¹å®šæ¡†æ¶</th></tr></thead><tbody><tr><td>macOS</td><td>JavaScriptCore, Foundation</td><td>IOKit</td></tr><tr><td>iOS</td><td>JavaScriptCore, Foundation</td><td>UIKit</td></tr></tbody></table>
<p><strong>3. éƒ¨ç½²ç›®æ ‡è®¾ç½®</strong></p>
<pre><code class="hljs language-cmake" lang="cmake">if(${CMAKE_SYSTEM_NAME} MATCHES "iOS")
    set(CMAKE_OSX_DEPLOYMENT_TARGET "12.0")
elseif(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
    set(CMAKE_OSX_DEPLOYMENT_TARGET "10.15")
endif()
</code></pre>
<h3 data-id="heading-14">ä¸¤ä¸ªæ”¹åŠ¨çš„ååŒä½œç”¨</h3>
<p><strong>æ”¹åŠ¨ä¸€ + æ”¹åŠ¨äºŒ = å®Œç¾çš„è·¨å¹³å°æ„å»ºç³»ç»Ÿ</strong></p>
<p>è¿™ä¸¤ä¸ªæ”¹åŠ¨å·§å¦™åœ°åˆ†å·¥åˆä½œï¼š</p>
<ul>
<li><strong>Makefileï¼ˆæ”¹åŠ¨ä¸€ï¼‰</strong>ï¼šä½œä¸ºç”¨æˆ·æ¥å£å±‚ï¼Œæä¾›ç®€å•ç»Ÿä¸€çš„å‘½ä»¤ï¼Œéšè—å¹³å°é…ç½®çš„å¤æ‚æ€§</li>
<li><strong>CMakeï¼ˆæ”¹åŠ¨äºŒï¼‰</strong>ï¼šä½œä¸ºæ„å»ºé€»è¾‘å±‚ï¼Œæ™ºèƒ½å¤„ç†å¹³å°å·®å¼‚ï¼Œè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„æºæ–‡ä»¶å’Œæ¡†æ¶</li>
</ul>
<p><strong>ååŒæ•ˆæœ</strong>ï¼š</p>
<ol>
<li><strong>å¼€å‘è€…ä½“éªŒ</strong>ï¼š<code>make build</code> vs <code>make ios-build</code>ï¼Œå‘½ä»¤æ¥å£ä¸€è‡´</li>
<li><strong>æ„å»ºéš”ç¦»</strong>ï¼šä¸¤ä¸ªå¹³å°ä½¿ç”¨ç‹¬ç«‹ç›®å½•ï¼Œå¯ä»¥å¹¶è¡Œæ„å»ºï¼Œåˆ‡æ¢æ— éœ€æ¸…ç†</li>
<li><strong>æ™ºèƒ½é€‚é…</strong>ï¼šCMake æ ¹æ® Makefile ä¼ å…¥çš„å¹³å°ä¿¡æ¯ï¼Œè‡ªåŠ¨é…ç½®æ‰€æœ‰ç»†èŠ‚</li>
<li><strong>é›¶è¿è¡Œæ—¶å¼€é”€</strong>ï¼šç¼–è¯‘æ—¶å°±ç¡®å®šäº†å¹³å°ï¼Œæœ€ç»ˆäºŒè¿›åˆ¶æ–‡ä»¶çº¯å‡€æ— å†—ä½™</li>
</ol>
<p>è¿™ç§è®¾è®¡è®©è·¨å¹³å°æ”¯æŒå˜å¾—æ—¢å¼ºå¤§åˆä¼˜é›…ï¼šå¼€å‘è€…åªéœ€è¦è®°ä½ä¸¤ä¸ªå‘½ä»¤ï¼ŒèƒŒåçš„æ‰€æœ‰å¤æ‚æ€§éƒ½è¢«è‡ªåŠ¨åŒ–å¤„ç†äº†ã€‚</p>
<h2 data-id="heading-15">DeviceInfo - å˜ä¸ä¸å˜</h2>
<p>åœ¨æ„å»ºç³»ç»Ÿæ¼”è¿›å®Œæˆåï¼Œæˆ‘ä»¬æ¥æ·±å…¥åˆ†æ DeviceInfo æ¨¡å—çš„åŒå¹³å°å®ç°ã€‚è¿™ä¸ªæ¨¡å—å±•ç¤ºäº†è·¨å¹³å°æ¶æ„è®¾è®¡çš„æ™ºæ…§ï¼šå¦‚ä½•åœ¨ä¿æŒæ¥å£ç»Ÿä¸€çš„åŒæ—¶ï¼Œè®©æ¯ä¸ªå¹³å°å‘æŒ¥è‡ªèº«ä¼˜åŠ¿ã€‚</p>
<h3 data-id="heading-16">90% å¤ç”¨ç‡æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</h3>
<p><strong>å…³é”®æ´å¯Ÿï¼šå¤§éƒ¨åˆ†é€»è¾‘å…¶å®æ˜¯å¹³å°æ— å…³çš„</strong></p>
<p>ä»”ç»†åˆ†æ DeviceInfo æ¨¡å—ï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªæƒŠäººçš„äº‹å®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è¿™äº›é€»è¾‘åœ¨ä»»ä½•å¹³å°éƒ½ä¸€æ ·</span>
<span class="hljs-function">std::string <span class="hljs-title">DeviceInfoModule::getName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"DeviceInfo"</span>;
}

<span class="hljs-function">std::vector&lt;std::string&gt; <span class="hljs-title">DeviceInfoModule::getMethods</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"getUniqueId"</span>,       <span class="hljs-comment">// methodId = 0</span>
        <span class="hljs-string">"getSystemVersion"</span>,  <span class="hljs-comment">// methodId = 1</span>
        <span class="hljs-string">"getDeviceId"</span>        <span class="hljs-comment">// methodId = 2</span>
    };
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DeviceInfoModule::invoke</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; methodName,
                             <span class="hljs-type">const</span> std::string&amp; args, <span class="hljs-type">int</span> callId)</span> </span>{
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (methodName == <span class="hljs-string">"getUniqueId"</span>) {
            std::string uniqueId = <span class="hljs-built_in">getUniqueIdImpl</span>();  <span class="hljs-comment">// åªæ˜¯è°ƒç”¨ï¼Œä¸å…³å¿ƒå…·ä½“å®ç°</span>
            <span class="hljs-built_in">sendSuccessCallback</span>(callId, uniqueId);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-built_in">sendErrorCallback</span>(callId, <span class="hljs-string">"Unknown method: "</span> + methodName);
        }
    } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::exception&amp; e) {
        <span class="hljs-built_in">sendErrorCallback</span>(callId, <span class="hljs-string">"Method invocation failed: "</span> + std::<span class="hljs-built_in">string</span>(e.<span class="hljs-built_in">what</span>()));
    }
}
</code></pre>
<p>**Bridge é€šä¿¡åè®®ã€æ–¹æ³•æ³¨å†Œæœºåˆ¶ã€æ¶ˆæ¯åˆ†å‘é€»è¾‘ï¼Œå®Œå…¨éƒ½æ˜¯å¯ä»¥å¤ç”¨çš„ï¼**çœŸæ­£ä¸åŒçš„ï¼Œåªæ˜¯é‚£å‡ ä¸ª <code>xxxImpl()</code> æ–¹æ³•çš„åº•å±‚å®ç°ã€‚</p>
<h3 data-id="heading-17">å¤ç”¨çš„è¾¹ç•Œ</h3>
<p>ä½†è¿™é‡Œæœ‰ä¸ªæ›´æ·±å±‚çš„é—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆæœ‰äº›ä»£ç èƒ½ 100% å¤ç”¨ï¼Œæœ‰äº›å´å®Œå…¨ä¸èƒ½ï¼Ÿ</strong></p>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å®é™…çš„å¤ç”¨ç‡ç»Ÿè®¡ï¼š</p>








































<table><thead><tr><th>ä»£ç ç±»å‹</th><th>å¤ç”¨ç‡</th><th>ä¸ºä»€ä¹ˆï¼Ÿ</th></tr></thead><tbody><tr><td>Bridge é€šä¿¡é€»è¾‘</td><td>100%</td><td>åè®®æ ‡å‡†åŒ–</td></tr><tr><td>æ¨¡å—æ³¨å†Œæœºåˆ¶</td><td>100%</td><td>æ¡†æ¶å±‚æŠ½è±¡</td></tr><tr><td>é”™è¯¯å¤„ç†æœºåˆ¶</td><td>100%</td><td>å¼‚å¸¸å¤„ç†é€»è¾‘ç›¸åŒ</td></tr><tr><td>è®¾å¤‡å”¯ä¸€æ ‡è¯†</td><td>0%</td><td>å¹³å°ç†å¿µå®Œå…¨ä¸åŒ</td></tr><tr><td>ç³»ç»Ÿç‰ˆæœ¬è·å–</td><td>95%</td><td>åªæœ‰æ³¨é‡Šä¸åŒ</td></tr><tr><td>è®¾å¤‡å‹å·è·å–</td><td>85%</td><td>éƒ½ç”¨ sysctlbynameï¼ŒiOSå¤šäº†æ¨¡æ‹Ÿå™¨åˆ¤æ–­</td></tr></tbody></table>
<h4 data-id="heading-18">100% å¤ç”¨ï¼šåè®®çš„åŠ›é‡</h4>
<p><strong>ä¸ºä»€ä¹ˆ Bridge é€šä¿¡èƒ½ 100% å¤ç”¨ï¼Ÿ</strong></p>
<p>å› ä¸ºè¿™æ˜¯åè®®å±‚ï¼Œä¸ç®¡åº•å±‚å¹³å°æ€ä¹ˆå˜ï¼ŒJavaScript å’Œ Native ä¹‹é—´çš„é€šä¿¡åè®®æ˜¯å›ºå®šçš„ã€‚æ–¹æ³•åã€å‚æ•°ã€å›è°ƒ IDã€é”™è¯¯å¤„ç†è¿™äº›éƒ½æ˜¯æ ‡å‡†åŒ–çš„ã€‚å°±åƒ HTTP åè®®ï¼Œä¸ç®¡æœåŠ¡å™¨æ˜¯ Linux è¿˜æ˜¯ Windowsï¼Œæµè§ˆå™¨éƒ½ç”¨åŒæ ·çš„æ–¹å¼å‘è¯·æ±‚ã€‚</p>
<h4 data-id="heading-19">0% å¤ç”¨ï¼šå¹³å°çš„é¸¿æ²Ÿ</h4>
<p><strong>ä¸ºä»€ä¹ˆè®¾å¤‡å”¯ä¸€æ ‡è¯†å®Œå…¨ä¸èƒ½å¤ç”¨ï¼Ÿ</strong></p>
<p>macOS è¿½æ±‚çœŸæ­£çš„ç¡¬ä»¶çº§åˆ«å”¯ä¸€æ€§ï¼Œæœ‰å¤æ‚çš„é™çº§æœºåˆ¶ï¼›iOS åœ¨ MVP é˜¶æ®µé‡‡ç”¨äº†ç®€åŒ–ç­–ç•¥ï¼Œæ¯æ¬¡å¯åŠ¨ç”Ÿæˆæ–°IDã€‚è¿™ä¸æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>å¹³å°å“²å­¦</strong>çš„å·®å¼‚ï¼šæ¡Œé¢ vs ç§»åŠ¨çš„éšç§ç†å¿µ</li>
<li><strong>å¼€å‘ç­–ç•¥</strong>çš„å·®å¼‚ï¼šå®Œæ•´å®ç° vs MVPéªŒè¯</li>
</ol>
<h4 data-id="heading-20">å¤ç”¨è¾¹ç•Œçš„å“²å­¦</h4>
<p>é€šè¿‡ DeviceInfo æ¨¡å—ï¼Œæˆ‘ä»¬å‘ç°äº†è·¨å¹³å°å¤ç”¨çš„ä¸‰ä¸ªå±‚æ¬¡ï¼š</p>
<ol>
<li><strong>åè®®å±‚</strong>ï¼š100% å¤ç”¨ï¼Œå› ä¸ºæ ‡å‡†ç»Ÿä¸€</li>
<li><strong>API å±‚</strong>ï¼šçœ‹è¿æ°”ï¼Œè‹¹æœç”Ÿæ€æœ‰ä¼˜åŠ¿</li>
<li><strong>å®ç°å±‚</strong>ï¼šçœ‹å¹³å°å·®å¼‚ï¼Œç§»åŠ¨ç«¯æ›´å¤æ‚</li>
</ol>
<p>è¿™æ­ç¤ºäº†ä¸€ä¸ªæ®‹é…·çš„çœŸç›¸ï¼š<strong>è·¨å¹³å°çš„æˆæœ¬æ°¸è¿œå­˜åœ¨ï¼Œåªæ˜¯è¢«è½¬ç§»äº†ã€‚</strong></p>
<p>å¯ä»¥ç”¨æŠ½è±¡åŸºç±»éšè—å·®å¼‚ï¼Œä½†å·®å¼‚æœ¬èº«ä¸ä¼šæ¶ˆå¤±ã€‚å…³é”®æ˜¯æ‰¾åˆ°åˆé€‚çš„è¾¹ç•Œï¼Œè®©å¤ç”¨æœ€å¤§åŒ–ï¼Œè®©å·®å¼‚æœ€å°åŒ–ã€‚</p>
<h3 data-id="heading-21">å¤´æ–‡ä»¶çš„é­”æ³•</h3>
<p>è§£å†³æ–¹æ¡ˆå…¶å®å°±æ˜¯åŸºäº <strong>é¢å‘å¯¹è±¡</strong> çš„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// common/modules/DeviceInfoModule.h</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeviceInfoModule</span> : <span class="hljs-keyword">public</span> NativeModule {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">DeviceInfoModule</span>();
    ~<span class="hljs-built_in">DeviceInfoModule</span>() <span class="hljs-keyword">override</span> = <span class="hljs-keyword">default</span>;

    <span class="hljs-comment">// NativeModule æ¥å£å®ç° - æ‰€æœ‰å¹³å°å…±äº«</span>
    <span class="hljs-function">std::string <span class="hljs-title">getName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span></span>;
    <span class="hljs-function">std::vector&lt;std::string&gt; <span class="hljs-title">getMethods</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span></span>;
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">invoke</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; methodName, <span class="hljs-type">const</span> std::string&amp; args,
                <span class="hljs-type">int</span> callId)</span> <span class="hljs-keyword">override</span></span>;

    <span class="hljs-comment">// å¹³å°ç‰¹å®šçš„å®ç°æ¥å£ - è®©å„å¹³å°å»å¡«è¿™äº›"æ´"</span>
    <span class="hljs-function">std::string <span class="hljs-title">getUniqueIdImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function">std::string <span class="hljs-title">getSystemVersionImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function">std::string <span class="hljs-title">getDeviceIdImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span></span>;

<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// å·¥å…·æ–¹æ³•</span>
    <span class="hljs-function">std::string <span class="hljs-title">createSuccessResponse</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; data)</span> <span class="hljs-type">const</span></span>;
    <span class="hljs-function">std::string <span class="hljs-title">createErrorResponse</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; error)</span> <span class="hljs-type">const</span></span>;
};
</code></pre>
<p>æ³¨æ„è¿™é‡Œæ²¡æœ‰ç”¨è™šå‡½æ•°ï¼Œå› ä¸ºå·²ç»å¼•å…¥äº† CMake åœ¨ç¼–è¯‘æ—¶ç¡®å®šäº†å¯¹åº”å¹³å°çš„æ–‡ä»¶ï¼Œä¸éœ€è¦è¿è¡Œæ—¶å¤šæ€ï¼Œç»“æœæ˜¯ <strong>åŒä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œä¸åŒçš„å®ç°æ–‡ä»¶</strong>ã€‚æ¯ä¸ªå¹³å°éƒ½æœ‰è‡ªå·±çš„ <code>.mm</code> æ–‡ä»¶æ¥å®ç°è¿™äº›æ–¹æ³•ï¼Œç¼–è¯‘æ—¶è‡ªåŠ¨é€‰æ‹©å¯¹åº”çš„å®ç°ã€‚</p>
<p>åŸºç±»å®šä¹‰äº† whatï¼ˆåšä»€ä¹ˆï¼‰ï¼Œå„å¹³å°å®ç° how ï¼ˆæ€ä¹ˆåšï¼‰ã€‚Bridge é€šä¿¡ã€æ–¹æ³•æ³¨å†Œã€æ¶ˆæ¯åˆ†å‘ç­‰è¿™äº›å¤æ‚çš„é€»è¾‘åªå†™ä¸€éï¼Œæ‰€æœ‰å¹³å°è‡ªåŠ¨ç»§æ‰¿ã€‚</p>
<h3 data-id="heading-22">åˆ†å¹³å°å®ç°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// macOS å®ç° - src/macos/modules/deviceinfo/DeviceInfoModule.mm</span>
<span class="hljs-function">std::string <span class="hljs-title">DeviceInfoModule::getUniqueIdImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
    @autoreleasepool {
        <span class="hljs-comment">// å°è¯•è·å–ç¡¬ä»¶ UUID</span>
        <span class="hljs-type">io_registry_entry_t</span> ioRegistryRoot =
            <span class="hljs-built_in">IORegistryEntryFromPath</span>(kIOMasterPortDefault, <span class="hljs-string">"IOService:/"</span>);
        CFStringRef uuidCf = (CFStringRef)<span class="hljs-built_in">IORegistryEntryCreateCFProperty</span>(
            ioRegistryRoot, <span class="hljs-built_in">CFSTR</span>(kIOPlatformUUIDKey), kCFAllocatorDefault, <span class="hljs-number">0</span>);

        <span class="hljs-keyword">if</span> (uuidCf) {
            NSString* uuid = (__bridge NSString*)uuidCf;
            std::string result = [uuid UTF8String];
            <span class="hljs-built_in">CFRelease</span>(uuidCf);
            <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-comment">// å¤šå±‚é™çº§æœºåˆ¶...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"macOS-"</span> + <span class="hljs-built_in">getDeviceIdImpl</span>() + <span class="hljs-string">"-"</span> + <span class="hljs-built_in">getSystemVersionImpl</span>();
    }
}

<span class="hljs-comment">// iOS å®ç° - src/ios/modules/deviceinfo/DeviceInfoModule.mm</span>
<span class="hljs-function">std::string <span class="hljs-title">DeviceInfoModule::getUniqueIdImpl</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
    @autoreleasepool {
        <span class="hljs-comment">// iOS ç®€åŒ–å®ç°ï¼šä½¿ç”¨ NSUUID ç”Ÿæˆå”¯ä¸€æ ‡è¯†</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™ä¸ªå®ç°æ¯æ¬¡å¯åŠ¨éƒ½ä¼šç”Ÿæˆæ–°çš„IDï¼Œé€‚ç”¨äºMVPæµ‹è¯•</span>
        NSUUID* uuid = [NSUUID UUID];
        NSString* uuidString = [uuid UUIDString];
        <span class="hljs-keyword">return</span> [uuidString UTF8String];
    }
}
</code></pre>
<p><strong>Objective-C++ å…³é”®å­—è§£é‡Š</strong>ï¼š</p>
<ul>
<li><code>@autoreleasepool</code>ï¼šè‡ªåŠ¨é‡Šæ”¾æ± ï¼Œç®¡ç† Objective-C å¯¹è±¡çš„å†…å­˜ï¼Œç¡®ä¿åŠæ—¶é‡Šæ”¾</li>
<li><code>__bridge</code>ï¼šARCï¼ˆè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼‰ä¸­çš„æ¡¥æ¥è½¬æ¢ï¼Œåœ¨ C/C++ æŒ‡é’ˆå’Œ Objective-C å¯¹è±¡é—´è½¬æ¢</li>
<li><code>[object method]</code>ï¼šObjective-C çš„æ–¹æ³•è°ƒç”¨è¯­æ³•</li>
<li><code>.mm</code> æ–‡ä»¶æ‰©å±•åï¼šè¡¨ç¤º Objective-C++ æ–‡ä»¶ï¼Œå¯ä»¥æ··åˆä½¿ç”¨ C++ã€C å’Œ Objective-C ä»£ç </li>
</ul>
<p>ä¸¤ä¸ªå¹³å°çš„å®ç°æ–‡ä»¶è‡ªåŠ¨æ‹¥æœ‰äº†å®Œæ•´çš„ Bridge é€šä¿¡èƒ½åŠ›ï¼Œç°åœ¨åªéœ€è¦å®ç°å¹³å°å·®å¼‚éƒ¨åˆ†å³å¯~</p>
<h3 data-id="heading-23">åº”è‡ªåŠ¨åŒ–å°½è‡ªåŠ¨åŒ–</h3>
<p>DeviceInfo æ¨¡å—çš„è‡ªåŠ¨åŒ–å®ç°æ­ç¤ºäº†ä¸€ä¸ªé‡è¦åŸåˆ™ï¼š</p>
<p><strong>å¥½çš„è·¨å¹³å°æ¶æ„ä¸æ˜¯è®©ä»£ç åœ¨æ‰€æœ‰å¹³å°éƒ½èƒ½è·‘ï¼Œè€Œæ˜¯è®©æ­£ç¡®çš„ä»£ç åœ¨æ­£ç¡®çš„å¹³å°ä¸Šè·‘ã€‚</strong></p>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®çš„ä¸‰å±‚è‡ªåŠ¨åŒ–ä½“ç³»ï¼š</p>
<ol>
<li><strong>Makefile è‡ªåŠ¨åŒ–</strong>ï¼šç»Ÿä¸€çš„å‘½ä»¤æ¥å£ï¼Œéšè—å¹³å°é…ç½®å¤æ‚æ€§</li>
<li><strong>CMake è‡ªåŠ¨åŒ–</strong>ï¼šæ™ºèƒ½çš„æºæ–‡ä»¶é€‰æ‹©å’Œæ¡†æ¶é“¾æ¥</li>
<li><strong>ç¼–è¯‘å™¨è‡ªåŠ¨åŒ–</strong>ï¼šå¹³å°ç‰¹å®šçš„äºŒè¿›åˆ¶ç”Ÿæˆ</li>
</ol>
<p>è¿™æ ·çš„æ¶æ„è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€ŒæŠŠå¹³å°é€‚é…çš„å¤æ‚æ€§äº¤ç»™äº†å·¥å…·é“¾ã€‚</p>
<p>çœŸæ­£çš„è‡ªåŠ¨åŒ–ä¸æ˜¯å†™ä¸€ä»½ä»£ç åˆ°å¤„è·‘ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>å¼€å‘ä½“éªŒç»Ÿä¸€</strong>ï¼š<code>make build</code> vs <code>make ios-build</code>ï¼Œå‘½ä»¤æ¥å£ä¸€è‡´</li>
<li><strong>å®ç°ç­–ç•¥åˆ†ç¦»</strong>ï¼šæ¯ä¸ªå¹³å°æœ‰æœ€é€‚åˆçš„å®ç°æ–¹å¼</li>
<li><strong>æ„å»ºè¿‡ç¨‹é€æ˜</strong>ï¼šå¼€å‘è€…ä¸éœ€è¦å…³å¿ƒ Xcode SDK è·¯å¾„ã€ç¼–è¯‘æ ‡å¿—ç­‰ç»†èŠ‚</li>
</ul>
<p>è¿™ç§è®¾è®¡åœ¨é¢å¯¹æ›´å¤æ‚çš„ç³»ç»Ÿæ—¶ä¾ç„¶æœ‰æ•ˆï¼šåªè¦ä¿æŒæ¥å£ç»Ÿä¸€ã€å®ç°åˆ†ç¦»ã€æ„å»ºè‡ªåŠ¨åŒ–ï¼Œå°±èƒ½ä¼˜é›…åœ°æ‰©å±•åˆ°è§†å›¾æ¸²æŸ“ã€äº‹ä»¶å¤„ç†ç­‰æ›´å¤æ‚çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-24">å½©è›‹</h2>
<p><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzerosrat%2Fmini-react-native" target="_blank" title="https://github.com/zerosrat/mini-react-native" ref="nofollow noopener noreferrer">github.com/zerosrat/miâ€¦</a></p>
<p>å½“å‰é¡¹ç›®ä¸­åŒ…å«äº†æœ¬ç¯‡æ–‡ç« ä¸­çš„å…¨éƒ¨å†…å®¹:</p>
<ul>
<li>âœ… iOS æ„å»ºç³»ç»Ÿé€‚é…</li>
<li>âœ… iOS è·¨å¹³å°çš„å·®å¼‚åŒ–å®ç°ï¼ˆDeviceInfoï¼‰</li>
</ul>
<p>å®Œæˆæœ¬é˜¶æ®µåï¼Œé¡¹ç›®å·²ç»å…·å¤‡äº†è¿›å…¥ç¬¬ä¸‰é˜¶æ®µçš„åŸºç¡€ï¼š<strong>è§†å›¾æ¸²æŸ“ç³»ç»Ÿ</strong>ã€‚</p>
<hr/>
<p>ğŸ“ æœ¬æ–‡é¦–å‘äºä¸ªäººåšå®¢: <a href="https://link.juejin.cn?target=https%3A%2F%2Fzerosrat.dev%2Fn%2F2025%2Fmini-rn-2" target="_blank" title="https://zerosrat.dev/n/2025/mini-rn-2" ref="nofollow noopener noreferrer">zerosrat.dev/n/2025/miniâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AOSP è®¾ç½®-æç¤ºéŸ³å’ŒæŒ¯åŠ¨ æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å¼€å…³ï¼ˆSwitchï¼‰çš„è®¾ç½®é¡¹]]></title>    <link>https://juejin.cn/post/7594351060615839763</link>    <guid>https://juejin.cn/post/7594351060615839763</guid>    <pubDate>2026-01-13T07:56:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594351060615839763" data-draft-id="7594627998839717930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AOSP è®¾ç½®-æç¤ºéŸ³å’ŒæŒ¯åŠ¨ æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å¼€å…³ï¼ˆSwitchï¼‰çš„è®¾ç½®é¡¹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-13T07:56:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="robotx"/> <meta itemprop="url" content="https://juejin.cn/user/3817944287025453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AOSP è®¾ç½®-æç¤ºéŸ³å’ŒæŒ¯åŠ¨ æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å¼€å…³ï¼ˆSwitchï¼‰çš„è®¾ç½®é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817944287025453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    robotx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:56:12.000Z" title="Tue Jan 13 2026 07:56:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è¦æ±‚</h2>
<p>å¦‚é¢˜ï¼Œåœ¨è®¾ç½®-æç¤ºéŸ³å’ŒæŒ¯åŠ¨ä¸­æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å¼€å…³ï¼ˆSwitchï¼‰çš„è®¾ç½®é¡¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b560bc96a43408d951831ab92cdf13c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcm9ib3R4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768895772&amp;x-signature=fEvSuml0R8i%2F6mlFlSSFvR%2BBhsc%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs">è¦å®ç°çš„æ•ˆæœï¼š
1ã€èƒ½æ­£å¸¸æ˜¾ç¤ºå¸¦æœ‰å¼€å…³ï¼ˆSwitchï¼‰çš„è®¾ç½®é¡¹
2ã€ç»™è¿™ä¸ªå¼€å…³è®¾ç½®é»˜è®¤å±æ€§
3ã€å¼€å…³èƒ½æ­£å¸¸ä½¿ç”¨ï¼ˆå…·ä½“é€»è¾‘éœ€è¦è‡ªå·±åŠ ï¼‰
</code></pre>
<h2 data-id="heading-1">æ­¥éª¤</h2>
<h3 data-id="heading-2">1ã€UIæ˜¾ç¤º</h3>
<p>å¯ä»¥æ ¹æ®ä¸Šæ–¹çš„â€œæŒ¯åŠ¨æ¨¡å¼ä¸‹ä¸€å¾‹æ˜¾ç¤ºæŒ¯åŠ¨å›¾æ ‡â€æ¥å®šä½è¦åœ¨å“ªé‡Œæ·»åŠ ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">packages/apps/Settings/res/xml/sound_settings.xml

<span class="hljs-tag">&lt;<span class="hljs-name">SwitchPreferenceCompat</span>
        <span class="hljs-attr">android:key</span>=<span class="hljs-string">"top_paddle_control_volume"</span>
        <span class="hljs-attr">android:title</span>=<span class="hljs-string">"@string/top_paddle_control_volume_title"</span>
        <span class="hljs-attr">android:order</span>=<span class="hljs-string">"-25"</span>
        <span class="hljs-attr">settings:controller</span>=<span class="hljs-string">"com.android.settings.notification.TopPaddleVolumePreferenceController"</span>/&gt;</span>
</code></pre>
<p>åªè¦åŠ ä¸Šä¸Šé¢è¿™æ®µxmlä»£ç å°±èƒ½åœ¨è®¾ç½®ä¸­æ˜¾ç¤ºäº†ï¼Œä¸€å¼€å§‹å¯ä»¥ä¸åŠ <code>settings:controller</code>è¿™ä¸ªé…ç½®ï¼Œä¹Ÿä¼šæ­£å¸¸æ˜¾ç¤ºçš„ï¼Œåªæ˜¯æ²¡æœ‰åŠŸèƒ½ï¼Œçº¯UIã€‚åç»­TopPaddleVolumePreferenceControlleræ˜¯éœ€è¦è‡ªå·±åŠ çš„ã€‚</p>
<h3 data-id="heading-3">2ã€å®šä¹‰å¯¹åº”çš„controller</h3>
<p>è¦ç»™è¿™ä¸ªswitchå¼€å…³å®šä¹‰ä¸€ä¸ªcontrolleræ¥æ§åˆ¶å¼€å…³</p>
<pre><code class="hljs language-java" lang="java">packages/apps/Settings/src/com/android/settings/notification/TopPaddleVolumePreferenceController.java

<span class="hljs-keyword">package</span> com.android.settings.notification;

<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.android.settings.notification.SettingPref.TYPE_SECURE;

<span class="hljs-keyword">import</span> android.content.Context;
<span class="hljs-keyword">import</span> android.provider.Settings.Secure;

<span class="hljs-keyword">import</span> com.android.settings.SettingsPreferenceFragment;
<span class="hljs-keyword">import</span> com.android.settings.core.TogglePreferenceController;
<span class="hljs-keyword">import</span> com.android.settings.R;
<span class="hljs-keyword">import</span> com.android.settingslib.core.lifecycle.Lifecycle;

<span class="hljs-keyword">import</span> android.provider.Settings;
<span class="hljs-keyword">import</span> android.util.Log;

<span class="hljs-comment">// public class TopPaddleVolumePreferenceController  extends SettingPrefController {</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopPaddleVolumePreferenceController</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TogglePreferenceController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopPaddleVolumePreferenceController"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOP_PADDLE_CONTROL_VOLUME</span> <span class="hljs-operator">=</span> <span class="hljs-string">"top_paddle_control_volume"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">TopPaddleVolumePreferenceController</span><span class="hljs-params">(Context context, String preferenceKey)</span> {
        <span class="hljs-built_in">super</span>(context, preferenceKey);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isChecked</span><span class="hljs-params">()</span> {
        Log.d(TAG, <span class="hljs-string">"ENTER isChecked()"</span>);
        <span class="hljs-comment">// Read database status, default 0 (off)</span>
        <span class="hljs-keyword">return</span> Settings.System.getInt(mContext.getContentResolver(),
            TOP_PADDLE_CONTROL_VOLUME, <span class="hljs-number">0</span>) != <span class="hljs-number">0</span>;
        <span class="hljs-comment">// ç»è¿‡æµ‹è¯•ï¼Œè¿™é‡Œçš„TOP_PADDLE_CONTROL_VOLUMEä¹Ÿå¯ä»¥æ›¿æ¢æˆSettings.System.TOP_PADDLE_CONTROL_VOLUME</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">setChecked</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isChecked)</span> {
        Log.d(TAG, <span class="hljs-string">"isChecked = "</span>+isChecked);
        <span class="hljs-comment">// Write database status</span>
        <span class="hljs-keyword">return</span> Settings.System.putInt(mContext.getContentResolver(),
            TOP_PADDLE_CONTROL_VOLUME, isChecked ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>);
        <span class="hljs-comment">// ç»è¿‡æµ‹è¯•ï¼Œè¿™é‡Œçš„TOP_PADDLE_CONTROL_VOLUMEä¹Ÿå¯ä»¥æ›¿æ¢æˆSettings.System.TOP_PADDLE_CONTROL_VOLUME</span>
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAvailabilityStatus</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> AVAILABLE;
    }

    <span class="hljs-comment">/**
     * ä¿®å¤é”™è¯¯ï¼šè¦†ç›– TogglePreferenceController ä¸­çš„æŠ½è±¡æ–¹æ³•
     * è¯¥æ–¹æ³•ç”¨äºåœ¨æœç´¢ç»“æœä¸­é«˜äº®æ˜¾ç¤ºèœå•è·¯å¾„
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getSliceHighlightMenuRes</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å› ä¸ºä½ åœ¨ sound_settings.xml ä¸­æ·»åŠ ï¼Œæ‰€ä»¥æŒ‡å‘å£°éŸ³èœå•</span>
        <span class="hljs-keyword">return</span> R.string.menu_key_sound; 
    }
}

</code></pre>
<h3 data-id="heading-4">3ã€æ•°æ®åˆå§‹åŒ–</h3>
<p>éœ€è¦ç»™è¿™ä¸ªè®¾ç½®é¡¹å®šä¹‰ä¸€ä¸ªå˜é‡Aï¼Œå¯¹å§ï¼Œç‚¹å‡»å¼€å…³æ—¶å®é™…å°±æ˜¯ä¿®æ”¹è¿™ä¸ªå˜é‡Açš„å€¼ã€‚è€Œä¸”è¿˜éœ€è¦ç»™è¿™ä¸ªå˜é‡Aåˆå§‹åŒ–ä¸€ä¸ªå€¼ï¼Œ0æˆ–è€…1ï¼Œè§„å®šè¿™ä¸ªå¼€å…³æ˜¯é»˜è®¤å¼€è¿˜æ˜¯é»˜è®¤å…³</p>
<h4 data-id="heading-5">3.1 å®šä¹‰switchå¼€å…³çš„åˆå§‹å€¼</h4>
<pre><code class="hljs language-java" lang="java">frameworks\base\core\java\android\provider\Settings.java

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">System</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">NameValueTable</span> {
    <span class="hljs-comment">/**
     * Whether keyboard vibration feedback is enabled. The value is boolean (1 or 0).
     *
     * <span class="hljs-doctag">@hide</span>
     */</span>
    <span class="hljs-meta">@hide</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">KEYBOARD_VIBRATION_ENABLED</span> <span class="hljs-operator">=</span> <span class="hljs-string">"keyboard_vibration_enabled"</span>;
    
è¿™æ ·å°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå˜é‡äº†ï¼Œç›¸å½“äºæ•°æ®åº“çš„keyï¼Œåé¢åˆ‡æ¢å¼€å…³æ—¶ä¿®æ”¹çš„å°±æ˜¯è¿™ä¸ªkeyã€‚
å…¶ä¸­<span class="hljs-meta">@hide</span>å’Œ<span class="hljs-meta">@hide</span>æˆ‘çœ‹å…¶å®ƒçš„å˜é‡ä¹Ÿæœ‰ï¼Œæˆ‘ä¹Ÿå¯¹åº”ç€åŠ ä¸Šäº†ï¼Œåæ­£å¦‚æœä½ æ²¡æœ‰<span class="hljs-meta">@hide</span>ç¼–è¯‘ä¼šæŠ¥é”™ã€‚
</code></pre>
<h3 data-id="heading-6"><code>æ³¨æ„ï¼šä½ å®šä¹‰çš„è¿™ä¸ªKEYBOARD_VIBRATION_ENABLEDæ˜¯æ”¾åœ¨class Systemè¿˜æ˜¯class Secureä¸­å¾ˆé‡è¦çš„ã€‚æˆ‘ä¸€å¼€å§‹æ˜¯æ²¡æ³¨æ„ï¼Œå®šä¹‰åœ¨äº†class Secureï¼Œä½†æ˜¯ç»‘å®šåˆå§‹å€¼æ—¶ç”¨çš„Settings.System.TOP_PADDLE_CONTROL_VOLUMEï¼Œç»“æœå°±æŠ¥é”™äº†ï¼Œè¿™é‡Œæ³¨æ„ã€‚</code></h3>
<h4 data-id="heading-7">3.2 å®šä¹‰switchå¼€å…³çš„é»˜è®¤å€¼</h4>
<p>è¿™ä¸ªé»˜è®¤å€¼å…¶å®ä¸ç”¨å®šä¹‰ï¼Œåœ¨åˆå§‹å€¼èµ‹å€¼çš„æ—¶å€™å¯ä»¥ç›´æ¥ç»™ä¸ª0æˆ–è€…1ï¼Œä½†æ˜¯è¿™é‡Œä¸ºäº†ä»£ç çš„è§„èŒƒåŒ–ï¼Œå’±ä»¬è¿˜æ˜¯å®šä¹‰ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml">frameworks\base\packages\SettingsProvider\res\values\defaults.xml

<span class="hljs-comment">&lt;!--cmy add, Top paddle control volume, default: false --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bool</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"def_top_paddle_control_volume"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">bool</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">3.3 ç»‘å®šåˆå§‹å€¼</h4>
<pre><code class="hljs language-java" lang="java">frameworks\base\packages\SettingsProvider\src\com\android\providers\settings\DatabaseHelper.java

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadSystemSettings</span><span class="hljs-params">(SQLiteDatabase db)</span> {
    <span class="hljs-comment">// cmy add</span>
    loadBooleanSetting(stmt, Settings.System.TOP_PADDLE_CONTROL_VOLUME,
        R.bool.def_top_paddle_control_volume);
</code></pre>
<hr/>
<p>è¿™æ ·ä¿®æ”¹å®Œï¼Œç„¶åç¼–è¯‘åˆ·æœºï¼Œå°±èƒ½çœ‹åˆ°switchå¼€å…³è¢«æ‰“å¼€äº†ï¼Œå› ä¸ºç»‘å®šçš„é»˜è®¤å€¼def_top_paddle_control_volumeæ˜¯trueã€‚</p>
<h2 data-id="heading-9">æŸ¥çœ‹å˜é‡å€¼çš„adbå‘½ä»¤</h2>
<pre><code class="hljs language-shell" lang="shell">adb shell settings get system top_paddle_control_volume

è¿™é‡Œæ˜¯get systemï¼Œè¿™ä¸ªsystemå¯èƒ½è·Ÿä½ å®šä¹‰å˜é‡çš„ä½ç½®æœ‰å…³ï¼Œå‰é¢è¯´çš„ï¼Œçœ‹ä½ çš„å˜é‡æ˜¯å®šä¹‰åœ¨class Systemè¿˜æ˜¯class Secure
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RecyclerView å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594396368174874659</link>    <guid>https://juejin.cn/post/7594396368174874659</guid>    <pubDate>2026-01-13T06:49:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594396368174874659" data-draft-id="7594402344617148431" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RecyclerView å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,Android"/> <meta itemprop="datePublished" content="2026-01-13T06:49:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’è²843"/> <meta itemprop="url" content="https://juejin.cn/user/541408646929991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RecyclerView å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/541408646929991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’è²843
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T06:49:31.000Z" title="Tue Jan 13 2026 06:49:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ RecyclerViewï¼Ÿ</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView æ˜¯ Android æä¾›çš„ä¸€ä¸ªç”¨äºé«˜æ•ˆæ˜¾ç¤ºå¤§é‡æ•°æ®é›†åˆçš„è§†å›¾ç»„ä»¶ã€‚å®ƒæ˜¯ ListView çš„å‡çº§ç‰ˆæœ¬ï¼Œæä¾›äº†æ›´çµæ´»ã€æ›´å¼ºå¤§çš„åŠŸèƒ½ã€‚</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>æ˜¾ç¤ºåˆ—è¡¨æ•°æ®</strong>ï¼šä»¥åˆ—è¡¨ã€ç½‘æ ¼æˆ–ç€‘å¸ƒæµçš„å½¢å¼å±•ç¤ºæ•°æ®</li>
<li><strong>è§†å›¾å¤ç”¨</strong>ï¼šé€šè¿‡ ViewHolder æ¨¡å¼å¤ç”¨è§†å›¾ï¼Œæé«˜æ€§èƒ½</li>
<li><strong>çµæ´»å¸ƒå±€</strong>ï¼šæ”¯æŒå¤šç§å¸ƒå±€æ–¹å¼ï¼ˆçº¿æ€§ã€ç½‘æ ¼ã€ç€‘å¸ƒæµç­‰ï¼‰</li>
<li><strong>åŠ¨ç”»æ”¯æŒ</strong>ï¼šå†…ç½®åŠ¨ç”»æ”¯æŒï¼Œå¯ä»¥è½»æ¾å®ç°å¢åˆ æ”¹åŠ¨ç”»</li>
</ol>
<p><strong>åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¸ƒå±€æ–‡ä»¶</span>
&lt;androidx.recyclerview.widget.RecyclerView
    android:id=<span class="hljs-string">"@+id/recyclerView"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span> /&gt;

<span class="hljs-comment">// Activity ä¸­</span>
<span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
recyclerView.adapter = MyAdapter(dataList)
</code></pre>
<hr/>
<h3 data-id="heading-2">1.2 RecyclerView ä¸ ListView çš„åŒºåˆ«</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è¿™æ˜¯é¢è¯•ä¸­çš„é«˜é¢‘é¢˜ç›®ï¼Œéœ€è¦ä»å¤šä¸ªç»´åº¦è¿›è¡Œå¯¹æ¯”ï¼š</p>













































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>RecyclerView</th><th>ListView</th></tr></thead><tbody><tr><td><strong>å¸ƒå±€ç®¡ç†</strong></td><td>é€šè¿‡ LayoutManager æ”¯æŒå¤šç§å¸ƒå±€ï¼ˆçº¿æ€§ã€ç½‘æ ¼ã€ç€‘å¸ƒæµï¼‰</td><td>ä»…æ”¯æŒå‚ç›´åˆ—è¡¨å¸ƒå±€</td></tr><tr><td><strong>ViewHolder</strong></td><td>å¼ºåˆ¶ä½¿ç”¨ ViewHolder æ¨¡å¼</td><td>æ”¯æŒä½†ä¸å¼ºåˆ¶</td></tr><tr><td><strong>åŠ¨ç”»æ”¯æŒ</strong></td><td>å†…ç½® ItemAnimatorï¼Œæ”¯æŒå¢åˆ æ”¹åŠ¨ç”»</td><td>éœ€è¦æ‰‹åŠ¨å®ç°åŠ¨ç”»</td></tr><tr><td><strong>åˆ†å‰²çº¿</strong></td><td>é€šè¿‡ ItemDecoration çµæ´»æ·»åŠ </td><td>é€šè¿‡ divider å±æ€§ç®€å•è®¾ç½®</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>å¤šçº§ç¼“å­˜æœºåˆ¶ï¼Œæ€§èƒ½æ›´ä¼˜</td><td>ç¼“å­˜æœºåˆ¶ç›¸å¯¹ç®€å•</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>é«˜åº¦å¯å®šåˆ¶ï¼Œæ”¯æŒè‡ªå®šä¹‰ LayoutManager</td><td>å®šåˆ¶æ€§è¾ƒå·®</td></tr><tr><td><strong>ç‚¹å‡»äº‹ä»¶</strong></td><td>éœ€è¦æ‰‹åŠ¨å®ç°</td><td>å†…ç½® onItemClickListener</td></tr></tbody></table>
<p><strong>ä»£ç å¯¹æ¯”ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ListViewï¼šå†…ç½®ç‚¹å‡»äº‹ä»¶</span>
listView.setOnItemClickListener { ... }

<span class="hljs-comment">// RecyclerViewï¼šéœ€è¦æ‰‹åŠ¨å®ç°ç‚¹å‡»äº‹ä»¶</span>
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
recyclerView.adapter = MyAdapter(<span class="hljs-keyword">data</span>)
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆ RecyclerView æ›´å¥½ï¼Ÿ</strong></p>
<ol>
<li><strong>æ€§èƒ½æ›´ä¼˜</strong>ï¼šå¤šçº§ç¼“å­˜æœºåˆ¶ï¼Œæ»‘åŠ¨æ›´æµç•…</li>
<li><strong>æ›´çµæ´»</strong>ï¼šå¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„å¸ƒå±€æ–¹å¼</li>
<li><strong>æ›´ç°ä»£</strong>ï¼šGoogle æ¨èä½¿ç”¨ï¼ŒListView å·²ä¸å†æ›´æ–°</li>
</ol>
<hr/>
<h3 data-id="heading-3">1.3 RecyclerView çš„å››å¤§æ ¸å¿ƒç»„ä»¶</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView çš„å››å¤§æ ¸å¿ƒç»„ä»¶æ˜¯ï¼š</p>
<ol>
<li><strong>RecyclerView</strong>ï¼šå®¹å™¨æœ¬èº«ï¼Œè´Ÿè´£æ˜¾ç¤ºå’Œç®¡ç†å­è§†å›¾</li>
<li><strong>Adapter</strong>ï¼šæ•°æ®é€‚é…å™¨ï¼Œè´Ÿè´£å°†æ•°æ®ç»‘å®šåˆ°è§†å›¾</li>
<li><strong>LayoutManager</strong>ï¼šå¸ƒå±€ç®¡ç†å™¨ï¼Œè´Ÿè´£å­è§†å›¾çš„æ’åˆ—æ–¹å¼</li>
<li><strong>ViewHolder</strong>ï¼šè§†å›¾æŒæœ‰è€…ï¼Œç¼“å­˜è§†å›¾å¼•ç”¨ï¼Œæé«˜æ€§èƒ½</li>
</ol>
<p><strong>ç»„ä»¶å…³ç³»å›¾ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">RecyclerView (å®¹å™¨)
    â”œâ”€â”€ LayoutManager (å†³å®šå¦‚ä½•æ’åˆ—)
    â”œâ”€â”€ Adapter (å†³å®šæ˜¾ç¤ºä»€ä¹ˆæ•°æ®)
    â”‚   â””â”€â”€ ViewHolder (ç¼“å­˜è§†å›¾å¼•ç”¨)
    â””â”€â”€ ItemAnimator (åŠ¨ç”»æ•ˆæœï¼Œå¯é€‰)
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)  <span class="hljs-comment">// LayoutManager</span>
recyclerView.adapter = MyAdapter(dataList)               <span class="hljs-comment">// Adapter</span>
recyclerView.itemAnimator = DefaultItemAnimator()       <span class="hljs-comment">// ItemAnimatorï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-comment">// ViewHolder åœ¨ Adapter ä¸­åˆ›å»º</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€ViewHolder æœºåˆ¶</h2>
<h3 data-id="heading-5">2.1 ä»€ä¹ˆæ˜¯ ViewHolderï¼Ÿ</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ViewHolder æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œç”¨äºç¼“å­˜è§†å›¾ç»„ä»¶çš„å¼•ç”¨ï¼Œé¿å…é‡å¤è°ƒç”¨ <code>findViewById()</code>ï¼Œä»è€Œæé«˜åˆ—è¡¨æ»šåŠ¨çš„æ€§èƒ½ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong></p>
<ul>
<li>å°†è§†å›¾å¼•ç”¨å­˜å‚¨åœ¨ ViewHolder ä¸­</li>
<li>è§†å›¾åˆ›å»ºæ—¶æŸ¥æ‰¾ä¸€æ¬¡ï¼Œåç»­ç›´æ¥å¤ç”¨</li>
<li>å‡å°‘ findViewById çš„è°ƒç”¨æ¬¡æ•°</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ¯æ¬¡éƒ½è°ƒç”¨ findViewById</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> textView = holder.itemView.findViewById&lt;TextView&gt;(R.id.textView)
    textView.text = items[position]  <span class="hljs-comment">// æ€§èƒ½å·®</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ ViewHolder ä¸­ç¼“å­˜å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)  <span class="hljs-comment">// åªæŸ¥æ‰¾ä¸€æ¬¡</span>
}

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.textView.text = items[position]  <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œæ€§èƒ½å¥½</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-6">2.2 ViewHolder çš„ä¼˜åŠ¿</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ViewHolder æœºåˆ¶çš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨æ€§èƒ½æå‡ä¸Šï¼š</p>
<p><strong>1. å‡å°‘ findViewById è°ƒç”¨</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸ä½¿ç”¨ ViewHolderï¼šæ¯æ¬¡ç»‘å®šéƒ½è°ƒç”¨ findViewById</span>
<span class="hljs-comment">// å‡è®¾æœ‰ 1000 ä¸ª itemï¼Œæ¯ä¸ª item æœ‰ 5 ä¸ª View</span>
<span class="hljs-comment">// éœ€è¦è°ƒç”¨ findViewById 5000 æ¬¡ï¼</span>

<span class="hljs-comment">// ä½¿ç”¨ ViewHolderï¼šåªåœ¨åˆ›å»ºæ—¶è°ƒç”¨ä¸€æ¬¡</span>
<span class="hljs-comment">// 1000 ä¸ª itemï¼Œæ¯ä¸ª item æœ‰ 5 ä¸ª View</span>
<span class="hljs-comment">// åªéœ€è¦è°ƒç”¨ findViewById 5000 æ¬¡ï¼ˆåˆ›å»ºæ—¶ï¼‰ï¼Œä½†å¯ä»¥å¤ç”¨ï¼</span>
</code></pre>
<p><strong>2. å‡å°‘å†…å­˜åˆ†é…</strong></p>
<ul>
<li>è§†å›¾å¼•ç”¨è¢«ç¼“å­˜ï¼Œä¸éœ€è¦é‡å¤åˆ›å»º</li>
<li>å‡å°‘ GCï¼ˆåƒåœ¾å›æ”¶ï¼‰å‹åŠ›</li>
</ul>
<p><strong>3. æé«˜æ»‘åŠ¨æµç•…åº¦</strong></p>
<ul>
<li>findViewById æ˜¯è€—æ—¶æ“ä½œ</li>
<li>å‡å°‘è°ƒç”¨æ¬¡æ•°ï¼Œæ»‘åŠ¨æ›´æµç•…</li>
<li>é¿å…åœ¨æ»‘åŠ¨æ—¶é¢‘ç¹æŸ¥æ‰¾è§†å›¾</li>
</ul>
<p><strong>æ€§èƒ½å¯¹æ¯”ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceTest</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testWithoutViewHolder</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.1000</span>) {
            <span class="hljs-keyword">val</span> textView = view.findViewById&lt;TextView&gt;(R.id.textView) <span class="hljs-comment">// è€—æ—¶</span>
        }
        <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
        println(<span class="hljs-string">"ä¸ä½¿ç”¨ ViewHolder: <span class="hljs-subst">${endTime - startTime}</span>ms"</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testWithViewHolder</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> holder = ViewHolder(view)
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0.</span><span class="hljs-number">.1000</span>) {
            holder.textView.text = <span class="hljs-string">"text"</span> <span class="hljs-comment">// ç›´æ¥ä½¿ç”¨ï¼Œå¿«é€Ÿ</span>
        }
        <span class="hljs-keyword">val</span> endTime = System.currentTimeMillis()
        println(<span class="hljs-string">"ä½¿ç”¨ ViewHolder: <span class="hljs-subst">${endTime - startTime}</span>ms"</span>)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">2.3 å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰ ViewHolder</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>åˆ›å»ºè‡ªå®šä¹‰ ViewHolder çš„æ­¥éª¤ï¼š</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewHolderï¼šç¼“å­˜è§†å›¾å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(<span class="hljs-keyword">data</span>: <span class="hljs-type">MyData</span>)</span></span> {
        textView.text = <span class="hljs-keyword">data</span>.text
    }
}

<span class="hljs-comment">// Adapterï¼šä½¿ç”¨ ViewHolder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;MyData&gt;) : 
    RecyclerView.Adapter&lt;MyViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: MyViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> MyViewHolder(view)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">MyViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        holder.bind(items[position])
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span> = items.size
}
</code></pre>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€Adapter</h2>
<h3 data-id="heading-9">3.1 Adapter å¿…é¡»å®ç°å“ªäº›æ–¹æ³•</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView.Adapter å¿…é¡»å®ç°ä¸‰ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼š</p>
<p><strong>1. onCreateViewHolder()</strong> - åˆ›å»º ViewHolder</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-comment">// åˆ›å»ºå¹¶è¿”å› ViewHolder</span>
}
</code></pre>
<p><strong>2. onBindViewHolder()</strong> - ç»‘å®šæ•°æ®åˆ° ViewHolder</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// å°†æ•°æ®ç»‘å®šåˆ° ViewHolder çš„è§†å›¾ä¸Š</span>
}
</code></pre>
<p><strong>3. getItemCount()</strong> - è¿”å›æ•°æ®æ€»æ•°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-comment">// è¿”å›æ•°æ®åˆ—è¡¨çš„å¤§å°</span>
}
</code></pre>
<p><strong>å®Œæ•´ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;String&gt;) : 
    RecyclerView.Adapter&lt;SimpleAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_simple, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> ViewHolder(view)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        holder.textView.text = items[position]
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span> = items.size
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)
    }
}
</code></pre>
<p><strong>æ–¹æ³•è°ƒç”¨æ—¶æœºï¼š</strong></p>
<ul>
<li><code>onCreateViewHolder()</code>ï¼šå½“éœ€è¦åˆ›å»ºæ–°çš„ ViewHolder æ—¶è°ƒç”¨ï¼ˆè§†å›¾å¤ç”¨æ± ä¸­æ²¡æœ‰å¯ç”¨çš„ï¼‰</li>
<li><code>onBindViewHolder()</code>ï¼šå½“éœ€è¦å°†æ•°æ®ç»‘å®šåˆ° ViewHolder æ—¶è°ƒç”¨ï¼ˆæ¯æ¬¡æ˜¾ç¤º item æ—¶ï¼‰</li>
<li><code>getItemCount()</code>ï¼šRecyclerView éœ€è¦çŸ¥é“æœ‰å¤šå°‘ä¸ª item æ—¶è°ƒç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-10">3.2 onCreateViewHolder å’Œ onBindViewHolder çš„åŒºåˆ«</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨ RecyclerView ä¸­æ‰®æ¼”ä¸åŒçš„è§’è‰²ï¼š</p>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>onCreateViewHolder</th><th>onBindViewHolder</th></tr></thead><tbody><tr><td><strong>è°ƒç”¨æ—¶æœº</strong></td><td>åˆ›å»ºæ–°çš„ ViewHolder æ—¶</td><td>ç»‘å®šæ•°æ®åˆ° ViewHolder æ—¶</td></tr><tr><td><strong>è°ƒç”¨é¢‘ç‡</strong></td><td>è¾ƒå°‘ï¼ˆåªåœ¨éœ€è¦æ–° ViewHolder æ—¶ï¼‰</td><td>é¢‘ç¹ï¼ˆæ¯æ¬¡æ˜¾ç¤º item æ—¶ï¼‰</td></tr><tr><td><strong>ä¸»è¦ä½œç”¨</strong></td><td>åˆ›å»ºè§†å›¾å’Œ ViewHolder</td><td>æ›´æ–°è§†å›¾å†…å®¹</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>å½±å“åˆ›å»ºæ€§èƒ½</td><td>å½±å“æ»šåŠ¨æ€§èƒ½</td></tr></tbody></table>
<p><strong>è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p><strong>onCreateViewHolder()</strong> - åˆ›å»ºé˜¶æ®µ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
        .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">return</span> ViewHolder(view)  <span class="hljs-comment">// åªåœ¨éœ€è¦æ–° ViewHolder æ—¶è°ƒç”¨</span>
}
</code></pre>
<p><strong>onBindViewHolder()</strong> - ç»‘å®šé˜¶æ®µ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.textView.text = items[position]  <span class="hljs-comment">// æ¯æ¬¡æ˜¾ç¤º item æ—¶è°ƒç”¨</span>
}
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… onCreateViewHolderï¼šåšä¸€æ¬¡æ€§åˆå§‹åŒ–</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(...)</span></span>: ViewHolder {
    <span class="hljs-keyword">return</span> ViewHolder(...)
}

<span class="hljs-comment">// âœ… onBindViewHolderï¼šåªæ›´æ–°æ•°æ®ï¼Œä¸åšè€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.textView.text = items[position]
    <span class="hljs-comment">// âŒ ä¸è¦åšå¤æ‚è®¡ç®—æˆ–ç½‘ç»œè¯·æ±‚</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-11">3.3 å¦‚ä½•å®ç°ç‚¹å‡»äº‹ä»¶</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView ä¸åƒ ListView é‚£æ ·æœ‰å†…ç½®çš„ç‚¹å‡»ç›‘å¬å™¨ï¼Œéœ€è¦æ‰‹åŠ¨å®ç°ã€‚æœ‰å‡ ç§æ–¹å¼ï¼š</p>
<p><strong>æ–¹å¼ 1ï¼šä½¿ç”¨ Lambdaï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;String&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onItemClick: (String) -&gt; <span class="hljs-built_in">Unit</span>
) : RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        holder.textView.text = items[position]
        holder.itemView.setOnClickListener {
            onItemClick(items[position])
        }
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">val</span> adapter = MyAdapter(dataList) { item -&gt;
    Toast.makeText(<span class="hljs-keyword">this</span>, <span class="hljs-string">"ç‚¹å‡»: <span class="hljs-variable">$item</span>"</span>, Toast.LENGTH_SHORT).show()
}
</code></pre>
<p><strong>æ–¹å¼ 3ï¼šé•¿æŒ‰äº‹ä»¶</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;String&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onItemClick: (<span class="hljs-built_in">Int</span>, String) -&gt; <span class="hljs-built_in">Unit</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onItemLongClick: (<span class="hljs-built_in">Int</span>, String) -&gt; <span class="hljs-built_in">Boolean</span> = { _, _ -&gt; <span class="hljs-literal">false</span> }
) : RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">inner</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(item: <span class="hljs-type">String</span>, position: <span class="hljs-type">Int</span>)</span></span> {
            itemView.setOnClickListener {
                onItemClick(position, item)
            }
            itemView.setOnLongClickListener {
                onItemLongClick(position, item)
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-12">3.4 å¦‚ä½•å®ç°å¤šç±»å‹è§†å›¾</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>å¤šç±»å‹è§†å›¾æ˜¯æŒ‡åœ¨ä¸€ä¸ª RecyclerView ä¸­æ˜¾ç¤ºä¸åŒç±»å‹çš„ item å¸ƒå±€ã€‚</p>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. å®šä¹‰è§†å›¾ç±»å‹</span>
<span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TYPE_HEADER = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> TYPE_ITEM = <span class="hljs-number">1</span>
}

<span class="hljs-comment">// 2. è¿”å›è§†å›¾ç±»å‹</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemViewType</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (position == <span class="hljs-number">0</span>) TYPE_HEADER <span class="hljs-keyword">else</span> TYPE_ITEM
}

<span class="hljs-comment">// 3. æ ¹æ®ç±»å‹åˆ›å»º ViewHolder</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (viewType) {
        TYPE_HEADER -&gt; HeaderViewHolder(...)
        TYPE_ITEM -&gt; ItemViewHolder(...)
        <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">throw</span> IllegalArgumentException()
    }
}

<span class="hljs-comment">// 4. ç»‘å®šæ•°æ®</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">when</span> (holder) {
        <span class="hljs-keyword">is</span> HeaderViewHolder -&gt; holder.bind(...)
        <span class="hljs-keyword">is</span> ItemViewHolder -&gt; holder.bind(...)
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">3.5 notifyDataSetChanged() çš„ä¼˜ç¼ºç‚¹</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p><code>notifyDataSetChanged()</code> æ˜¯æœ€ç®€å•çš„æ•°æ®æ›´æ–°æ–¹æ³•ï¼Œä½†å­˜åœ¨æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li><strong>ä½¿ç”¨ç®€å•</strong>ï¼šä¸€è¡Œä»£ç å³å¯åˆ·æ–°æ•´ä¸ªåˆ—è¡¨</li>
<li><strong>æ— éœ€è®¡ç®—</strong>ï¼šä¸éœ€è¦çŸ¥é“å…·ä½“å“ªäº›æ•°æ®å˜åŒ–äº†</li>
</ol>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ€§èƒ½å·®</strong>ï¼šä¼šåˆ·æ–°æ‰€æœ‰å¯è§çš„ itemï¼Œå³ä½¿æ•°æ®æ²¡æœ‰å˜åŒ–</li>
<li><strong>ä¸¢å¤±åŠ¨ç”»</strong>ï¼šæ— æ³•æ˜¾ç¤ºå¢åˆ æ”¹çš„åŠ¨ç”»æ•ˆæœ</li>
<li><strong>ç”¨æˆ·ä½“éªŒå·®</strong>ï¼šå¯èƒ½å¯¼è‡´é—ªçƒã€æ»šåŠ¨ä½ç½®ä¸¢å¤±ç­‰é—®é¢˜</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸æ¨èï¼šåˆ·æ–°æ‰€æœ‰ item</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateData</span><span class="hljs-params">(newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
    items.clear()
    items.addAll(newItems)
    notifyDataSetChanged()  <span class="hljs-comment">// æ€§èƒ½å·®ï¼Œåˆ·æ–°æ‰€æœ‰</span>
}

<span class="hljs-comment">// âœ… æ¨èï¼šå±€éƒ¨æ›´æ–°</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addItem</span><span class="hljs-params">(item: <span class="hljs-type">String</span>)</span></span> {
    items.add(item)
    notifyItemInserted(items.size - <span class="hljs-number">1</span>)  <span class="hljs-comment">// åªåˆ·æ–°æ–°å¢çš„</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
    items.removeAt(position)
    notifyItemRemoved(position)  <span class="hljs-comment">// åªåˆ·æ–°åˆ é™¤çš„</span>
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><code>notifyDataSetChanged()</code>ï¼šåˆ·æ–°æ‰€æœ‰ itemï¼Œè€—æ—¶çº¦ 100msï¼ˆ1000 ä¸ª itemï¼‰</li>
<li><code>notifyItemChanged(5)</code>ï¼šåªåˆ·æ–°ç¬¬ 5 ä¸ª itemï¼Œè€—æ—¶çº¦ 1ms</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… ä½¿ç”¨ DiffUtilï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> items = mutableListOf&lt;String&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateData</span><span class="hljs-params">(newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        <span class="hljs-keyword">val</span> diffResult = DiffUtil.calculateDiff(
            MyDiffCallback(items, newItems)
        )
        items = newItems.toMutableList()
        diffResult.dispatchUpdatesTo(<span class="hljs-keyword">this</span>) <span class="hljs-comment">// æ™ºèƒ½æ›´æ–°ï¼Œæ€§èƒ½æœ€ä¼˜</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-14">å››ã€LayoutManager</h2>
<h3 data-id="heading-15">4.1 LayoutManager çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>LayoutManager è´Ÿè´£å†³å®š RecyclerView ä¸­çš„ item å¦‚ä½•æ’åˆ—å’Œæ˜¾ç¤ºã€‚</p>
<p><strong>ä¸»è¦èŒè´£ï¼š</strong></p>
<ol>
<li><strong>æµ‹é‡å­è§†å›¾</strong>ï¼šè®¡ç®—æ¯ä¸ª item çš„å¤§å°</li>
<li><strong>å¸ƒå±€å­è§†å›¾</strong>ï¼šå†³å®šæ¯ä¸ª item çš„ä½ç½®</li>
<li><strong>å›æ”¶è§†å›¾</strong>ï¼šç®¡ç†è§†å›¾çš„å›æ”¶å’Œå¤ç”¨</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)

<span class="hljs-comment">// LinearLayoutManager - çº¿æ€§å¸ƒå±€ï¼ˆå‚ç›´æˆ–æ°´å¹³ï¼‰</span>
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>) <span class="hljs-comment">// é»˜è®¤å‚ç›´</span>
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>, LinearLayoutManager.HORIZONTAL, <span class="hljs-literal">false</span>) <span class="hljs-comment">// æ°´å¹³</span>

<span class="hljs-comment">// GridLayoutManager - ç½‘æ ¼å¸ƒå±€</span>
recyclerView.layoutManager = GridLayoutManager(<span class="hljs-keyword">this</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// 3 åˆ—</span>

<span class="hljs-comment">// StaggeredGridLayoutManager - ç€‘å¸ƒæµå¸ƒå±€</span>
recyclerView.layoutManager = StaggeredGridLayoutManager(<span class="hljs-number">2</span>, StaggeredGridLayoutManager.VERTICAL) <span class="hljs-comment">// 2 åˆ—å‚ç›´</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">4.2 æ”¯æŒå“ªäº› LayoutManager</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView å†…ç½®äº†ä¸‰ç§å¸¸ç”¨çš„ LayoutManagerï¼š</p>
<p><strong>1. LinearLayoutManager - çº¿æ€§å¸ƒå±€</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‚ç›´åˆ—è¡¨ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-keyword">val</span> linearLayoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
recyclerView.layoutManager = linearLayoutManager

<span class="hljs-comment">// æ°´å¹³åˆ—è¡¨</span>
<span class="hljs-keyword">val</span> horizontalLayoutManager = LinearLayoutManager(
    <span class="hljs-keyword">this</span>, 
    LinearLayoutManager.HORIZONTAL, 
    <span class="hljs-literal">false</span>
)
recyclerView.layoutManager = horizontalLayoutManager

<span class="hljs-comment">// åå‘åˆ—è¡¨</span>
<span class="hljs-keyword">val</span> reverseLayoutManager = LinearLayoutManager(
    <span class="hljs-keyword">this</span>, 
    LinearLayoutManager.VERTICAL, 
    <span class="hljs-literal">true</span> <span class="hljs-comment">// åå‘</span>
)
recyclerView.layoutManager = reverseLayoutManager
</code></pre>
<p><strong>2. GridLayoutManager - ç½‘æ ¼å¸ƒå±€</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 2 åˆ—ç½‘æ ¼</span>
<span class="hljs-keyword">val</span> gridLayoutManager = GridLayoutManager(<span class="hljs-keyword">this</span>, <span class="hljs-number">2</span>)
recyclerView.layoutManager = gridLayoutManager

<span class="hljs-comment">// 3 åˆ—ç½‘æ ¼ï¼Œæ”¯æŒä¸åŒ item å ä¸åŒåˆ—æ•°</span>
<span class="hljs-keyword">val</span> spanSizeLookup = <span class="hljs-keyword">object</span> : GridLayoutManager.SpanSizeLookup() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSpanSize</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (position) {
            <span class="hljs-number">0</span> -&gt; <span class="hljs-number">3</span> <span class="hljs-comment">// ç¬¬ä¸€ä¸ª item å  3 åˆ—ï¼ˆå…¨å®½ï¼‰</span>
            <span class="hljs-keyword">else</span> -&gt; <span class="hljs-number">1</span> <span class="hljs-comment">// å…¶ä»– item å  1 åˆ—</span>
        }
    }
}
gridLayoutManager.spanSizeLookup = spanSizeLookup
</code></pre>
<p><strong>3. StaggeredGridLayoutManager - ç€‘å¸ƒæµå¸ƒå±€</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 2 åˆ—å‚ç›´ç€‘å¸ƒæµ</span>
<span class="hljs-keyword">val</span> staggeredLayoutManager = StaggeredGridLayoutManager(
    <span class="hljs-number">2</span>, <span class="hljs-comment">// åˆ—æ•°</span>
    StaggeredGridLayoutManager.VERTICAL <span class="hljs-comment">// æ–¹å‘</span>
)
recyclerView.layoutManager = staggeredLayoutManager

<span class="hljs-comment">// 3 è¡Œæ°´å¹³ç€‘å¸ƒæµ</span>
<span class="hljs-keyword">val</span> horizontalStaggered = StaggeredGridLayoutManager(
    <span class="hljs-number">3</span>, <span class="hljs-comment">// è¡Œæ•°</span>
    StaggeredGridLayoutManager.HORIZONTAL <span class="hljs-comment">// æ–¹å‘</span>
)
recyclerView.layoutManager = horizontalStaggered
</code></pre>
<p><strong>å¸ƒå±€æ•ˆæœå¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">LinearLayoutManager (å‚ç›´):
â”Œâ”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1</span>  â”‚
â”œâ”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">2</span>  â”‚
â”œâ”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">3</span>  â”‚
â””â”€â”€â”€â”€â”€â”˜

GridLayoutManager (<span class="hljs-number">2</span>åˆ—):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1</span>  â”‚  <span class="hljs-number">2</span>  â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
â”‚  <span class="hljs-number">3</span>  â”‚  <span class="hljs-number">4</span>  â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜

StaggeredGridLayoutManager (<span class="hljs-number">2</span>åˆ—):
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
â”‚  <span class="hljs-number">1</span>  â”‚  <span class="hljs-number">2</span>  â”‚
â”‚     â”œâ”€â”€â”€â”€â”€â”¤
â”‚     â”‚  <span class="hljs-number">3</span>  â”‚
â”œâ”€â”€â”€â”€â”€â”¤     â”‚
â”‚  <span class="hljs-number">4</span>  â”‚     â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-17">äº”ã€ç¼“å­˜æœºåˆ¶</h2>
<h3 data-id="heading-18">5.1 RecyclerView çš„ç¼“å­˜æœºåˆ¶</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView é‡‡ç”¨å››çº§ç¼“å­˜æœºåˆ¶ï¼Œè¿™æ˜¯å…¶é«˜æ€§èƒ½çš„æ ¸å¿ƒã€‚</p>
<p><strong>å››çº§ç¼“å­˜ç»“æ„ï¼š</strong></p>
<pre><code class="hljs">RecyclerView ç¼“å­˜æœºåˆ¶
â”œâ”€â”€ ä¸€çº§ç¼“å­˜ï¼šmAttachedScrapï¼ˆå±å¹•å†…ç¼“å­˜ï¼‰
â”œâ”€â”€ äºŒçº§ç¼“å­˜ï¼šmCachedViewsï¼ˆå±å¹•å¤–ç¼“å­˜ï¼‰
â”œâ”€â”€ ä¸‰çº§ç¼“å­˜ï¼šViewCacheExtensionï¼ˆè‡ªå®šä¹‰ç¼“å­˜ï¼Œå¯é€‰ï¼‰
â””â”€â”€ å››çº§ç¼“å­˜ï¼šRecycledViewPoolï¼ˆå›æ”¶æ± ï¼‰
</code></pre>
<p><strong>è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p><strong>1. ä¸€çº§ç¼“å­˜ï¼ˆmAttachedScrapï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå­˜å‚¨å½“å‰å±å¹•å†…å¯è§çš„ ViewHolder</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®æœªå˜åŒ–æ—¶ç›´æ¥å¤ç”¨ï¼Œæ— éœ€é‡æ–°ç»‘å®š</li>
<li><strong>åœºæ™¯</strong>ï¼šæ•°æ®å±€éƒ¨æ›´æ–°æ—¶ä½¿ç”¨</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å½“è°ƒç”¨ notifyItemChanged(5) æ—¶</span>
<span class="hljs-comment">// ç¬¬ 5 ä¸ª item ä¼šå…ˆæ”¾å…¥ mAttachedScrap</span>
<span class="hljs-comment">// ç„¶åé‡æ–°ç»‘å®šæ•°æ®ï¼Œæ”¾å›åŸä½ç½®</span>
</code></pre>
<p><strong>2. äºŒçº§ç¼“å­˜ï¼ˆmCachedViewsï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå­˜å‚¨åˆšæ»‘å‡ºå±å¹•çš„ ViewHolder</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šé»˜è®¤æœ€å¤šç¼“å­˜ 2 ä¸ªï¼Œæ•°æ®æœªå˜åŒ–</li>
<li><strong>åœºæ™¯</strong>ï¼šå¿«é€Ÿæ¥å›æ»‘åŠ¨æ—¶å¤ç”¨</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ç”¨æˆ·å‘ä¸‹æ»‘åŠ¨ï¼Œitem 1 æ»‘å‡ºå±å¹•</span>
<span class="hljs-comment">// item 1 çš„ ViewHolder æ”¾å…¥ mCachedViews</span>
<span class="hljs-comment">// å¦‚æœç”¨æˆ·ç«‹å³å‘ä¸Šæ»‘åŠ¨ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨</span>
</code></pre>
<p><strong>3. ä¸‰çº§ç¼“å­˜ï¼ˆViewCacheExtensionï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå¼€å‘è€…è‡ªå®šä¹‰çš„ç¼“å­˜å±‚</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šå¯é€‰ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦</li>
<li><strong>åœºæ™¯</strong>ï¼šç‰¹æ®Šç¼“å­˜éœ€æ±‚</li>
</ul>
<p><strong>4. å››çº§ç¼“å­˜ï¼ˆRecycledViewPoolï¼‰</strong></p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå­˜å‚¨æ‰€æœ‰ç±»å‹çš„ ViewHolder</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šæ•°æ®å·²æ¸…ç©ºï¼Œéœ€è¦é‡æ–°ç»‘å®š</li>
<li><strong>åœºæ™¯</strong>ï¼šè·¨ RecyclerView å…±äº«ï¼Œæˆ–ä½œä¸ºæœ€åå¤‡é€‰</li>
</ul>
<p><strong>ç¼“å­˜æŸ¥æ‰¾é¡ºåºï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView éœ€è¦ ViewHolder æ—¶çš„æŸ¥æ‰¾é¡ºåºï¼š</span>
<span class="hljs-number">1.</span> æŸ¥æ‰¾ mAttachedScrapï¼ˆä¸€çº§ç¼“å­˜ï¼‰
   â†“ æœªæ‰¾åˆ°
<span class="hljs-number">2.</span> æŸ¥æ‰¾ mCachedViewsï¼ˆäºŒçº§ç¼“å­˜ï¼‰
   â†“ æœªæ‰¾åˆ°
<span class="hljs-number">3.</span> æŸ¥æ‰¾ ViewCacheExtensionï¼ˆä¸‰çº§ç¼“å­˜ï¼Œå¦‚æœæœ‰ï¼‰
   â†“ æœªæ‰¾åˆ°
<span class="hljs-number">4.</span> æŸ¥æ‰¾ RecycledViewPoolï¼ˆå››çº§ç¼“å­˜ï¼‰
   â†“ æœªæ‰¾åˆ°
<span class="hljs-number">5.</span> åˆ›å»ºæ–°çš„ ViewHolderï¼ˆè°ƒç”¨ onCreateViewHolderï¼‰
</code></pre>
<p><strong>ç¼“å­˜æµç¨‹ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs">é¦–æ¬¡æ˜¾ç¤ºï¼šåˆ›å»º 10 ä¸ª ViewHolder
å‘ä¸‹æ»‘åŠ¨ï¼šitem 0 æ»‘å‡º â†’ æ”¾å…¥ mCachedViews
å‘ä¸Šæ»‘åŠ¨ï¼šitem 0 ä» mCachedViews ç›´æ¥å¤ç”¨ï¼ˆæ— éœ€é‡æ–°ç»‘å®šï¼‰
ç»§ç»­æ»‘åŠ¨ï¼šmCachedViews æ»¡ â†’ ç§»å…¥ RecycledViewPool
</code></pre>
<hr/>
<h3 data-id="heading-19">5.2 ä¸€çº§ç¼“å­˜ï¼ˆmAttachedScrapï¼‰çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>mAttachedScrap æ˜¯ RecyclerView çš„ç¬¬ä¸€çº§ç¼“å­˜ï¼Œç”¨äºå­˜å‚¨å½“å‰å±å¹•å†…å¯è§çš„ ViewHolderã€‚</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>å±€éƒ¨æ›´æ–°ä¼˜åŒ–</strong>ï¼šå½“è°ƒç”¨ <code>notifyItemChanged()</code> æ—¶ï¼Œé¿å…é‡æ–°åˆ›å»º ViewHolder</li>
<li><strong>å¿«é€Ÿå¤ç”¨</strong>ï¼šæ•°æ®æœªå˜åŒ–æ—¶ç›´æ¥å¤ç”¨ï¼Œæ— éœ€é‡æ–°ç»‘å®š</li>
<li><strong>ä¿æŒçŠ¶æ€</strong>ï¼šä¿æŒ ViewHolder çš„é€‰ä¸­çŠ¶æ€ã€åŠ¨ç”»çŠ¶æ€ç­‰</li>
</ol>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æ›´æ–° item 5ï¼š
<span class="hljs-bullet">1.</span> ViewHolder æ”¾å…¥ mAttachedScrap
<span class="hljs-bullet">2.</span> è°ƒç”¨ onBindViewHolder é‡æ–°ç»‘å®š
<span class="hljs-bullet">3.</span> ViewHolder å–å‡ºå¤ç”¨
ç»“æœï¼šViewHolder å¤ç”¨ï¼Œåªæ›´æ–°æ•°æ®
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, newText: <span class="hljs-type">String</span>)</span></span> {
    items[position] = newText
    notifyItemChanged(position)  <span class="hljs-comment">// ViewHolder å¤ç”¨ï¼Œåªæ›´æ–°æ•°æ®</span>
}
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>æ€§èƒ½å¥½</strong>ï¼šä¸éœ€è¦é‡æ–°åˆ›å»º View</li>
<li><strong>ä¿æŒçŠ¶æ€</strong>ï¼šä¿æŒç”¨æˆ·äº¤äº’çŠ¶æ€ï¼ˆå¦‚é€‰ä¸­ã€å±•å¼€ç­‰ï¼‰</li>
<li><strong>æµç•…</strong>ï¼šæ›´æ–°è¿‡ç¨‹æ›´å¹³æ»‘</li>
</ul>
<hr/>
<h3 data-id="heading-20">5.3 äºŒçº§ç¼“å­˜ï¼ˆmCachedViewsï¼‰çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>mCachedViews å­˜å‚¨åˆšæ»‘å‡ºå±å¹•çš„ ViewHolderï¼Œç”¨äºå¿«é€Ÿæ¥å›æ»‘åŠ¨æ—¶çš„å¤ç”¨ã€‚</p>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>é»˜è®¤å®¹é‡</strong>ï¼šæœ€å¤šç¼“å­˜ 2 ä¸ª ViewHolder</li>
<li><strong>æ•°æ®å®Œæ•´</strong>ï¼šViewHolder ä¸­çš„æ•°æ®æœªæ¸…ç©º</li>
<li><strong>å¿«é€Ÿå¤ç”¨</strong>ï¼šå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é‡æ–°ç»‘å®š</li>
</ol>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs">å‘ä¸‹æ»‘åŠ¨ï¼šitem 0 æ»‘å‡º â†’ æ”¾å…¥ mCachedViewsï¼ˆæ•°æ®ä¿ç•™ï¼‰
å‘ä¸Šæ»‘åŠ¨ï¼šitem 0 ä» mCachedViews ç›´æ¥å¤ç”¨ï¼ˆæ— éœ€é‡æ–°ç»‘å®šï¼‰
ç»§ç»­æ»‘åŠ¨ï¼šmCachedViews æ»¡ï¼ˆ2ä¸ªï¼‰â†’ ç§»å…¥ RecycledViewPool
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆåªç¼“å­˜ 2 ä¸ªï¼Ÿ</strong></p>
<ul>
<li>å¹³è¡¡å†…å­˜å’Œæ€§èƒ½</li>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç”¨æˆ·æ¥å›æ»‘åŠ¨ä¸ä¼šè¶…è¿‡ 2 ä¸ª item</li>
<li>å¦‚æœç¼“å­˜å¤ªå¤šï¼Œä¼šå ç”¨è¿‡å¤šå†…å­˜</li>
</ul>
<hr/>
<h3 data-id="heading-21">5.4 ä¸‰çº§ç¼“å­˜ï¼ˆViewCacheExtensionï¼‰çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ViewCacheExtension æ˜¯ RecyclerView çš„ç¬¬ä¸‰çº§ç¼“å­˜ï¼Œæ˜¯å¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰çš„ç¼“å­˜å±‚ã€‚</p>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>å¯é€‰ç¼“å­˜</strong>ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨</li>
<li><strong>è‡ªå®šä¹‰å®ç°</strong>ï¼šå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ç¼“å­˜é€»è¾‘</li>
<li><strong>ç‰¹æ®Šåœºæ™¯</strong>ï¼šé€‚ç”¨äºæœ‰ç‰¹æ®Šç¼“å­˜éœ€æ±‚çš„åœºæ™¯</li>
</ol>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éœ€è¦ç‰¹æ®Šçš„ç¼“å­˜ç­–ç•¥</li>
<li>éœ€è¦è·¨ RecyclerView å…±äº«ç‰¹å®šç±»å‹çš„ ViewHolder</li>
<li>éœ€è¦è‡ªå®šä¹‰ç¼“å­˜çš„ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomViewCacheExtension</span> : <span class="hljs-type">RecyclerView.ViewCacheExtension</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> cache = mutableMapOf&lt;<span class="hljs-built_in">Int</span>, RecyclerView.ViewHolder&gt;()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getViewForPositionAndType</span><span class="hljs-params">(
        recycler: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">Recycler</span>,
        position: <span class="hljs-type">Int</span>,
        viewType: <span class="hljs-type">Int</span>
    )</span></span>: View? {
        <span class="hljs-comment">// è‡ªå®šä¹‰ç¼“å­˜é€»è¾‘</span>
        <span class="hljs-keyword">return</span> cache[viewType]?.itemView
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
recyclerView.setViewCacheExtension(CustomViewCacheExtension())
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> å¤§å¤šæ•°æƒ…å†µä¸‹ä¸éœ€è¦ä½¿ç”¨ï¼Œé»˜è®¤çš„ç¼“å­˜æœºåˆ¶å·²ç»è¶³å¤Ÿã€‚</p>
<hr/>
<h3 data-id="heading-22">5.5 å››çº§ç¼“å­˜ï¼ˆRecycledViewPoolï¼‰çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecycledViewPool æ˜¯ RecyclerView çš„æœ€åä¸€çº§ç¼“å­˜ï¼Œå­˜å‚¨æ‰€æœ‰è¢«å›æ”¶çš„ ViewHolderã€‚</p>
<p><strong>ä¸»è¦ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ•°æ®å·²æ¸…ç©º</strong>ï¼šViewHolder ä¸­çš„æ•°æ®å·²è¢«æ¸…ç©º</li>
<li><strong>éœ€è¦é‡æ–°ç»‘å®š</strong>ï¼šä½¿ç”¨æ—¶éœ€è¦è°ƒç”¨ <code>onBindViewHolder</code></li>
<li><strong>å¯å…±äº«</strong>ï¼šå¤šä¸ª RecyclerView å¯ä»¥å…±äº«åŒä¸€ä¸ª Pool</li>
<li><strong>æŒ‰ç±»å‹å­˜å‚¨</strong>ï¼šä¸åŒç±»å‹çš„ ViewHolder åˆ†å¼€å­˜å‚¨</li>
</ol>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewHolder è¿›å…¥ RecycledViewPool çš„æµç¨‹ï¼š</span>

<span class="hljs-comment">// 1. ViewHolder ä» mCachedViews ç§»å‡º</span>
<span class="hljs-comment">// 2. æ¸…ç©º ViewHolder ä¸­çš„æ•°æ®ï¼ˆè°ƒç”¨ onViewRecycledï¼‰</span>
<span class="hljs-comment">// 3. æ”¾å…¥ RecycledViewPool</span>

<span class="hljs-comment">// ä½¿ç”¨æ—¶ï¼š</span>
<span class="hljs-comment">// 1. ä» RecycledViewPool è·å– ViewHolder</span>
<span class="hljs-comment">// 2. è°ƒç”¨ onBindViewHolder é‡æ–°ç»‘å®šæ•°æ®</span>
<span class="hljs-comment">// 3. æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</span>
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šå…±äº« RecycledViewPool</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> sharedPool = RecyclerView.RecycledViewPool()
sharedPool.setMaxRecycledViews(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>)

recyclerView1.setRecycledViewPool(sharedPool)
recyclerView2.setRecycledViewPool(sharedPool)  <span class="hljs-comment">// å…±äº«ç¼“å­˜</span>
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li><strong>å†…å­˜ä¼˜åŒ–</strong>ï¼šå¤šä¸ª RecyclerView å…±äº«ç¼“å­˜ï¼Œå‡å°‘å†…å­˜å ç”¨</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šé¿å…é‡å¤åˆ›å»º ViewHolder</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯ä»¥è‡ªå®šä¹‰ç¼“å­˜æ•°é‡</li>
</ul>
<hr/>
<h2 data-id="heading-23">å…­ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-24">6.1 å¦‚ä½•ä¼˜åŒ–æ€§èƒ½</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„å·¥ä½œï¼Œéœ€è¦ä»å¤šä¸ªæ–¹é¢å…¥æ‰‹ã€‚</p>
<p><strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. ä½¿ç”¨ ViewHolder ç¼“å­˜è§†å›¾å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)
}

<span class="hljs-comment">// 2. è®¾ç½®å›ºå®šå¤§å°</span>
recyclerView.setHasFixedSize(<span class="hljs-literal">true</span>)

<span class="hljs-comment">// 3. ä½¿ç”¨ DiffUtil å¢é‡æ›´æ–°</span>
<span class="hljs-keyword">val</span> diffResult = DiffUtil.calculateDiff(MyDiffCallback(oldItems, newItems))
diffResult.dispatchUpdatesTo(adapter)

<span class="hljs-comment">// 4. é¿å…åœ¨ onBindViewHolder ä¸­åšè€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.textView.text = items[position].text  <span class="hljs-comment">// âœ… åªæ›´æ–°è§†å›¾</span>
    <span class="hljs-comment">// âŒ ä¸è¦åšå¤æ‚è®¡ç®—æˆ–ç½‘ç»œè¯·æ±‚</span>
}

<span class="hljs-comment">// 5. ä½¿ç”¨ ConstraintLayout å‡å°‘å¸ƒå±€åµŒå¥—</span>
<span class="hljs-comment">// âŒ LinearLayout åµŒå¥— â†’ âœ… ConstraintLayout</span>

<span class="hljs-comment">// 6. å›¾ç‰‡åŠ è½½ä½¿ç”¨å¼‚æ­¥åº“</span>
Glide.with(context).load(url).into(imageView)

<span class="hljs-comment">// 7. è®¾ç½®é¢„åŠ è½½</span>
layoutManager.initialPrefetchItemCount = <span class="hljs-number">4</span>
</code></pre>
<hr/>
<h3 data-id="heading-25">6.2 setHasFixedSize(true) çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p><code>setHasFixedSize(true)</code> å‘Šè¯‰ RecyclerViewï¼Œå®ƒçš„å°ºå¯¸æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šå› ä¸ºå†…å®¹å˜åŒ–è€Œæ”¹å˜å¤§å°ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>ä¼˜åŒ–å¸ƒå±€è®¡ç®—</strong>ï¼šRecyclerView çŸ¥é“å¤§å°ä¸å˜ï¼Œå¯ä»¥è·³è¿‡ä¸€äº›å¸ƒå±€æµ‹é‡</li>
<li><strong>æé«˜æ€§èƒ½</strong>ï¼šå‡å°‘ä¸å¿…è¦çš„å¸ƒå±€é‡æ–°è®¡ç®—</li>
</ol>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… é€‚åˆä½¿ç”¨ï¼šRecyclerView çš„å¤§å°å›ºå®š</span>
&lt;androidx.constraintlayout.widget.ConstraintLayout&gt;
    &lt;androidx.recyclerview.widget.RecyclerView
        android:layout_width=<span class="hljs-string">"match_parent"</span>
        android:layout_height=<span class="hljs-string">"match_parent"</span> /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;

recyclerView.setHasFixedSize(<span class="hljs-literal">true</span>) <span class="hljs-comment">// å¤§å°ä¸ä¼šæ”¹å˜</span>

<span class="hljs-comment">// âŒ ä¸é€‚åˆä½¿ç”¨ï¼šRecyclerView çš„å¤§å°å¯èƒ½æ”¹å˜</span>
&lt;LinearLayout&gt;
    &lt;androidx.recyclerview.widget.RecyclerView
        android:layout_width=<span class="hljs-string">"wrap_content"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span> /&gt;
&lt;/LinearLayout&gt;

recyclerView.setHasFixedSize(<span class="hljs-literal">false</span>) <span class="hljs-comment">// å¤§å°å¯èƒ½æ”¹å˜</span>
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        <span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)
        
        <span class="hljs-comment">// å¦‚æœ RecyclerView çš„å®½é«˜æ˜¯ match_parent æˆ–å›ºå®šå€¼</span>
        <span class="hljs-comment">// è®¾ç½®æ­¤å±æ€§å¯ä»¥ä¼˜åŒ–æ€§èƒ½</span>
        recyclerView.setHasFixedSize(<span class="hljs-literal">true</span>)
        
        recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
        recyclerView.adapter = MyAdapter(dataList)
    }
}
</code></pre>
<p><strong>æ€§èƒ½å½±å“ï¼š</strong></p>
<ul>
<li>è®¾ç½® <code>true</code> åï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼ŒRecyclerView ä¸ä¼šé‡æ–°æµ‹é‡è‡ªå·±çš„å¤§å°</li>
<li>å¯ä»¥èŠ‚çœå¸ƒå±€è®¡ç®—æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®é¢‘ç¹æ›´æ–°æ—¶</li>
</ul>
<hr/>
<h3 data-id="heading-26">6.3 ä»€ä¹ˆæ˜¯ DiffUtilï¼Ÿå¦‚ä½•ä½¿ç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>DiffUtil æ˜¯ Android æä¾›çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªåˆ—è¡¨ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶ç”Ÿæˆæ›´æ–°æ“ä½œã€‚</p>
<p><strong>ä¸»è¦ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªåˆ—è¡¨</li>
<li><strong>è‡ªåŠ¨åŠ¨ç”»</strong>ï¼šé…åˆ RecyclerView å¯ä»¥è‡ªåŠ¨æ˜¾ç¤ºå¢åˆ æ”¹åŠ¨ç”»</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…ä¸å¿…è¦çš„è§†å›¾åˆ·æ–°</li>
</ol>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åˆ›å»º DiffUtil.Callback</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDiffCallback</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> oldList: List&lt;Item&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newList: List&lt;Item&gt;
) : DiffUtil.Callback() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getOldListSize</span><span class="hljs-params">()</span></span> = oldList.size
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getNewListSize</span><span class="hljs-params">()</span></span> = newList.size
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">areItemsTheSame</span><span class="hljs-params">(oldPos: <span class="hljs-type">Int</span>, newPos: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> oldList[oldPos].id == newList[newPos].id  <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ª item</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">areContentsTheSame</span><span class="hljs-params">(oldPos: <span class="hljs-type">Int</span>, newPos: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> oldList[oldPos] == newList[newPos]  <span class="hljs-comment">// åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸åŒ</span>
    }
}

<span class="hljs-comment">// 2. åœ¨ Adapter ä¸­ä½¿ç”¨</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateData</span><span class="hljs-params">(newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Item</span>&gt;)</span></span> {
    <span class="hljs-keyword">val</span> diffResult = DiffUtil.calculateDiff(MyDiffCallback(items, newItems))
    items = newItems.toMutableList()
    diffResult.dispatchUpdatesTo(<span class="hljs-keyword">this</span>)  <span class="hljs-comment">// åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</span>
}
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><code>notifyDataSetChanged()</code>ï¼šåˆ·æ–°æ‰€æœ‰ itemï¼Œè€—æ—¶çº¦ 100msï¼ˆ1000 ä¸ª itemï¼‰</li>
<li><code>DiffUtil</code>ï¼šåªåˆ·æ–°å˜åŒ–çš„ itemï¼Œè€—æ—¶çº¦ 1ms</li>
</ul>
<hr/>
<h2 data-id="heading-27">ä¸ƒã€ItemDecoration</h2>
<h3 data-id="heading-28">7.1 ItemDecoration çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ItemDecoration ç”¨äºåœ¨ RecyclerView çš„ item ä¹‹é—´æ·»åŠ è£…é¥°æ•ˆæœï¼Œå¦‚åˆ†å‰²çº¿ã€é—´è·ã€èƒŒæ™¯ç­‰ã€‚</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>æ·»åŠ åˆ†å‰²çº¿</strong>ï¼šåœ¨ item ä¹‹é—´ç»˜åˆ¶åˆ†å‰²çº¿</li>
<li><strong>è®¾ç½®é—´è·</strong>ï¼šä¸º item æ·»åŠ å†…è¾¹è·æˆ–å¤–è¾¹è·</li>
<li><strong>ç»˜åˆ¶èƒŒæ™¯</strong>ï¼šä¸º item æ·»åŠ èƒŒæ™¯è£…é¥°</li>
<li><strong>è‡ªå®šä¹‰è£…é¥°</strong>ï¼šå®ç°å¤æ‚çš„è£…é¥°æ•ˆæœ</li>
</ol>
<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ·»åŠ åˆ†å‰²çº¿</span>
<span class="hljs-keyword">val</span> dividerItemDecoration = DividerItemDecoration(context, LinearLayoutManager.VERTICAL)
recyclerView.addItemDecoration(dividerItemDecoration)
</code></pre>
<hr/>
<h3 data-id="heading-29">7.2 å¦‚ä½•è‡ªå®šä¹‰ ItemDecoration</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è‡ªå®šä¹‰ ItemDecoration éœ€è¦ç»§æ‰¿ <code>RecyclerView.ItemDecoration</code> å¹¶é‡å†™ç›¸åº”æ–¹æ³•ã€‚</p>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>getItemOffsets()</strong> - è®¾ç½® item çš„åç§»é‡ï¼ˆä¸ºè£…é¥°ç•™å‡ºç©ºé—´ï¼‰</li>
<li><strong>onDraw()</strong> - åœ¨ item ä¸‹æ–¹ç»˜åˆ¶è£…é¥°</li>
<li><strong>onDrawOver()</strong> - åœ¨ item ä¸Šæ–¹ç»˜åˆ¶è£…é¥°ï¼ˆè¯¦è§ 7.3ï¼‰</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šè‡ªå®šä¹‰åˆ†å‰²çº¿</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomDividerDecoration</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> height: <span class="hljs-built_in">Int</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> color: <span class="hljs-built_in">Int</span>
) : RecyclerView.ItemDecoration() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemOffsets</span><span class="hljs-params">(outRect: <span class="hljs-type">Rect</span>, view: <span class="hljs-type">View</span>, parent: <span class="hljs-type">RecyclerView</span>, state: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">State</span>)</span></span> {
        <span class="hljs-comment">// ä¸ºåˆ†å‰²çº¿ç•™å‡ºç©ºé—´ï¼ˆæœ€åä¸€ä¸ª item ä¸éœ€è¦ï¼‰</span>
        <span class="hljs-keyword">if</span> (parent.getChildAdapterPosition(view) != parent.adapter!!.itemCount - <span class="hljs-number">1</span>) {
            outRect.bottom = height
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(c: <span class="hljs-type">Canvas</span>, parent: <span class="hljs-type">RecyclerView</span>, state: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">State</span>)</span></span> {
        <span class="hljs-keyword">val</span> paint = Paint().apply { <span class="hljs-keyword">this</span>.color = color }
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until parent.childCount) {
            <span class="hljs-keyword">val</span> child = parent.getChildAt(i)
            <span class="hljs-keyword">if</span> (parent.getChildAdapterPosition(child) != parent.adapter!!.itemCount - <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">val</span> top = child.bottom.toFloat()
                c.drawRect(<span class="hljs-number">0f</span>, top, parent.width.toFloat(), top + height, paint)
            }
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
recyclerView.addItemDecoration(CustomDividerDecoration(<span class="hljs-number">2.</span>dp, Color.GRAY))
</code></pre>
<p><strong>å…¶ä»–å¸¸è§ç”¨æ³•ï¼š</strong></p>
<ul>
<li><strong>è®¾ç½®é—´è·</strong>ï¼šåœ¨ <code>getItemOffsets()</code> ä¸­è®¾ç½® <code>outRect.set(spacing, spacing, spacing, spacing)</code></li>
<li><strong>å¤æ‚è£…é¥°</strong>ï¼šç»“åˆ <code>onDraw()</code> å’Œ <code>onDrawOver()</code> å®ç°æ‚¬æµ®æ•ˆæœç­‰</li>
</ul>
<hr/>
<h3 data-id="heading-30">7.3 onDraw() å’Œ onDrawOver() çš„åŒºåˆ«</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºåœ¨ä¸åŒå±‚çº§ç»˜åˆ¶è£…é¥°ã€‚</p>
<p><strong>åŒºåˆ«è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>onDraw()</th><th>onDrawOver()</th></tr></thead><tbody><tr><td><strong>ç»˜åˆ¶ä½ç½®</strong></td><td>åœ¨ item ä¸‹æ–¹ç»˜åˆ¶</td><td>åœ¨ item ä¸Šæ–¹ç»˜åˆ¶</td></tr><tr><td><strong>ç»˜åˆ¶é¡ºåº</strong></td><td>å…ˆç»˜åˆ¶</td><td>åç»˜åˆ¶</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>åˆ†å‰²çº¿ã€èƒŒæ™¯</td><td>æ‚¬æµ®æ•ˆæœã€é®ç½©</td></tr></tbody></table>
<p><strong>ç»˜åˆ¶é¡ºåºï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ç»˜åˆ¶é¡ºåºï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰ï¼š
<span class="hljs-bullet">1.</span> RecyclerView èƒŒæ™¯
<span class="hljs-bullet">2.</span> onDraw() ç»˜åˆ¶çš„å†…å®¹ï¼ˆåˆ†å‰²çº¿ç­‰ï¼‰
<span class="hljs-bullet">3.</span> Item è§†å›¾
<span class="hljs-bullet">4.</span> onDrawOver() ç»˜åˆ¶çš„å†…å®¹ï¼ˆæ‚¬æµ®æ•ˆæœç­‰ï¼‰
</code></pre>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiLayerDecoration</span> : <span class="hljs-type">RecyclerView.ItemDecoration</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(c: <span class="hljs-type">Canvas</span>, parent: <span class="hljs-type">RecyclerView</span>, state: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">State</span>)</span></span> {
        <span class="hljs-comment">// åœ¨ item ä¸‹æ–¹ç»˜åˆ¶åˆ†å‰²çº¿</span>
        <span class="hljs-keyword">val</span> paint = Paint().apply {
            color = Color.GRAY
            strokeWidth = <span class="hljs-number">1f</span>
        }
        
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until parent.childCount) {
            <span class="hljs-keyword">val</span> child = parent.getChildAt(i)
            <span class="hljs-keyword">val</span> bottom = child.bottom.toFloat()
            c.drawLine(
                child.left.toFloat(),
                bottom,
                child.right.toFloat(),
                bottom,
                paint
            )
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawOver</span><span class="hljs-params">(c: <span class="hljs-type">Canvas</span>, parent: <span class="hljs-type">RecyclerView</span>, state: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">State</span>)</span></span> {
        <span class="hljs-comment">// åœ¨ item ä¸Šæ–¹ç»˜åˆ¶æ‚¬æµ®æ•ˆæœï¼ˆä¾‹å¦‚ï¼šé€‰ä¸­é«˜äº®ï¼‰</span>
        <span class="hljs-keyword">val</span> paint = Paint().apply {
            color = Color.parseColor(<span class="hljs-string">"#33000000"</span>) <span class="hljs-comment">// åŠé€æ˜é»‘è‰²</span>
        }
        
        <span class="hljs-comment">// ç»˜åˆ¶é€‰ä¸­é¡¹çš„é«˜äº®æ•ˆæœ</span>
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until parent.childCount) {
            <span class="hljs-keyword">val</span> child = parent.getChildAt(i)
            <span class="hljs-keyword">if</span> (isSelected(child)) {
                c.drawRect(
                    child.left.toFloat(),
                    child.top.toFloat(),
                    child.right.toFloat(),
                    child.bottom.toFloat(),
                    paint
                )
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isSelected</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦é€‰ä¸­</span>
        <span class="hljs-keyword">return</span> view.isSelected
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-31">å…«ã€ItemAnimator</h2>
<h3 data-id="heading-32">8.1 ItemAnimator çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ItemAnimator è´Ÿè´£å¤„ç† RecyclerView ä¸­ item çš„å¢åˆ æ”¹åŠ¨ç”»æ•ˆæœã€‚</p>
<p><strong>ä¸»è¦ä½œç”¨ï¼š</strong></p>
<ol>
<li><strong>æ·»åŠ åŠ¨ç”»</strong>ï¼šitem æ·»åŠ æ—¶çš„åŠ¨ç”»</li>
<li><strong>åˆ é™¤åŠ¨ç”»</strong>ï¼šitem åˆ é™¤æ—¶çš„åŠ¨ç”»</li>
<li><strong>ç§»åŠ¨åŠ¨ç”»</strong>ï¼šitem ä½ç½®å˜åŒ–æ—¶çš„åŠ¨ç”»</li>
<li><strong>æ›´æ”¹åŠ¨ç”»</strong>ï¼šitem å†…å®¹å˜åŒ–æ—¶çš„åŠ¨ç”»</li>
</ol>
<p><strong>é»˜è®¤åŠ¨ç”»ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView ä½¿ç”¨ DefaultItemAnimator ä½œä¸ºé»˜è®¤åŠ¨ç”»</span>
recyclerView.itemAnimator = DefaultItemAnimator()
</code></pre>
<hr/>
<h3 data-id="heading-33">8.2 å¦‚ä½•è‡ªå®šä¹‰ ItemAnimator</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è‡ªå®šä¹‰ ItemAnimator éœ€è¦ç»§æ‰¿ <code>RecyclerView.ItemAnimator</code> å¹¶å®ç°ç›¸åº”æ–¹æ³•ã€‚</p>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>animateAdd()</strong> - å¤„ç†æ·»åŠ åŠ¨ç”»</li>
<li><strong>animateRemove()</strong> - å¤„ç†åˆ é™¤åŠ¨ç”»</li>
<li><strong>animateMove()</strong> - å¤„ç†ç§»åŠ¨åŠ¨ç”»</li>
<li><strong>animateChange()</strong> - å¤„ç†æ›´æ”¹åŠ¨ç”»</li>
</ol>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šç®€å•çš„æ·¡å…¥æ·¡å‡ºåŠ¨ç”»</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FadeItemAnimator</span> : <span class="hljs-type">RecyclerView.ItemAnimator</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animateAdd</span><span class="hljs-params">(holder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        holder.itemView.alpha = <span class="hljs-number">0f</span>
        holder.itemView.animate()
            .alpha(<span class="hljs-number">1f</span>)
            .setDuration(<span class="hljs-number">300</span>)
            .setListener(<span class="hljs-keyword">object</span> : AnimatorListenerAdapter() {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAnimationEnd</span><span class="hljs-params">(animation: <span class="hljs-type">Animator</span>)</span></span> {
                    dispatchAddFinished(holder)
                }
            })
            .start()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animateRemove</span><span class="hljs-params">(holder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        holder.itemView.animate()
            .alpha(<span class="hljs-number">0f</span>)
            .setDuration(<span class="hljs-number">300</span>)
            .setListener(<span class="hljs-keyword">object</span> : AnimatorListenerAdapter() {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAnimationEnd</span><span class="hljs-params">(animation: <span class="hljs-type">Animator</span>)</span></span> {
                    dispatchRemoveFinished(holder)
                }
            })
            .start()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animateMove</span><span class="hljs-params">(
        holder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>,
        fromX: <span class="hljs-type">Int</span>, fromY: <span class="hljs-type">Int</span>, toX: <span class="hljs-type">Int</span>, toY: <span class="hljs-type">Int</span>
    )</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">val</span> deltaX = toX - fromX
        <span class="hljs-keyword">val</span> deltaY = toY - fromY
        holder.itemView.translationX = -deltaX.toFloat()
        holder.itemView.translationY = -deltaY.toFloat()
        holder.itemView.animate()
            .translationX(<span class="hljs-number">0f</span>)
            .translationY(<span class="hljs-number">0f</span>)
            .setDuration(<span class="hljs-number">300</span>)
            .setListener(<span class="hljs-keyword">object</span> : AnimatorListenerAdapter() {
                <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAnimationEnd</span><span class="hljs-params">(animation: <span class="hljs-type">Animator</span>)</span></span> {
                    dispatchMoveFinished(holder)
                }
            })
            .start()
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">animateChange</span><span class="hljs-params">(
        oldHolder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>,
        newHolder: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>,
        fromLeft: <span class="hljs-type">Int</span>, fromTop: <span class="hljs-type">Int</span>, toLeft: <span class="hljs-type">Int</span>, toTop: <span class="hljs-type">Int</span>
    )</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤åŠ¨ç”»</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">runPendingAnimations</span><span class="hljs-params">()</span></span> {}
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">endAnimation</span><span class="hljs-params">(item: <span class="hljs-type">RecyclerView</span>.<span class="hljs-type">ViewHolder</span>)</span></span> {
        item.itemView.clearAnimation()
    }
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">endAnimations</span><span class="hljs-params">()</span></span> {}
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isRunning</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> = <span class="hljs-literal">false</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼</span>
recyclerView.itemAnimator = FadeItemAnimator()
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>åŠ¨ç”»ç»“æŸåå¿…é¡»è°ƒç”¨ <code>dispatchAddFinished()</code>ã€<code>dispatchRemoveFinished()</code> ç­‰æ–¹æ³•</li>
<li>å¯ä»¥è¿”å› <code>false</code> è¡¨ç¤ºä½¿ç”¨é»˜è®¤åŠ¨ç”»</li>
<li>å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ <code>DefaultItemAnimator</code> å³å¯æ»¡è¶³éœ€æ±‚</li>
</ul>
<hr/>
<h2 data-id="heading-34">ä¹ã€é«˜çº§ç‰¹æ€§</h2>
<h3 data-id="heading-35">9.1 å¦‚ä½•å¤„ç†åŠ¨æ€é«˜åº¦çš„ Item</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView é»˜è®¤æ”¯æŒåŠ¨æ€é«˜åº¦çš„ itemï¼Œä½†éœ€è¦æ³¨æ„ä¸€äº›ä¼˜åŒ–ç‚¹ã€‚</p>
<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¦‚æœ item é«˜åº¦æ˜¯åŠ¨æ€çš„ï¼Œä¸éœ€è¦ç‰¹æ®Šè®¾ç½®</span>
<span class="hljs-comment">// RecyclerView ä¼šè‡ªåŠ¨æµ‹é‡æ¯ä¸ª item çš„é«˜åº¦</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicHeightAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;Item&gt;) : 
    RecyclerView.Adapter&lt;DynamicHeightAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_dynamic, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> ViewHolder(view)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = items[position]
        
        <span class="hljs-comment">// è®¾ç½®å†…å®¹ï¼Œé«˜åº¦ä¼šè‡ªåŠ¨è°ƒæ•´</span>
        holder.titleTextView.text = item.title
        holder.contentTextView.text = item.content <span class="hljs-comment">// å†…å®¹é•¿åº¦ä¸åŒï¼Œé«˜åº¦ä¸åŒ</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span> = items.size
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-keyword">val</span> titleTextView: TextView = itemView.findViewById(R.id.titleTextView)
        <span class="hljs-keyword">val</span> contentTextView: TextView = itemView.findViewById(R.id.contentTextView)
    }
}
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŒ–ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¦‚æœæ‰€æœ‰ item é«˜åº¦ç›¸åŒï¼Œè®¾ç½®å›ºå®šé«˜åº¦å¯ä»¥ä¼˜åŒ–æ€§èƒ½</span>
recyclerView.setHasFixedSize(<span class="hljs-literal">false</span>) <span class="hljs-comment">// åŠ¨æ€é«˜åº¦å¿…é¡»ä¸º false</span>

<span class="hljs-comment">// ä½¿ç”¨ ConstraintLayout å¯ä»¥æ›´å¥½åœ°å¤„ç†åŠ¨æ€é«˜åº¦</span>
<span class="hljs-comment">// item_dynamic.xml</span>
&lt;androidx.constraintlayout.widget.ConstraintLayout&gt;
    &lt;TextView
        android:id=<span class="hljs-string">"@+id/titleTextView"</span>
        app:layout_constraintTop_toTopOf=<span class="hljs-string">"parent"</span> /&gt;
    
    &lt;TextView
        android:id=<span class="hljs-string">"@+id/contentTextView"</span>
        app:layout_constraintTop_toBottomOf=<span class="hljs-string">"@id/titleTextView"</span>
        android:layout_height=<span class="hljs-string">"wrap_content"</span> /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<hr/>
<h3 data-id="heading-36">9.2 å¦‚ä½•å®ç°æ•°æ®é¢„åŠ è½½</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>æ•°æ®é¢„åŠ è½½æ˜¯æŒ‡ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œåœ¨ç”¨æˆ·æ»‘åŠ¨åˆ°åˆ—è¡¨åº•éƒ¨ä¹‹å‰å°±å¼€å§‹åŠ è½½æ›´å¤šæ•°æ®ï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒï¼Œé¿å…ç”¨æˆ·ç­‰å¾…æ•°æ®åŠ è½½ã€‚</p>
<p><strong>å®ç°æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        <span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)
        recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
        recyclerView.adapter = MyAdapter(dataList)
        
        <span class="hljs-comment">// ç›‘å¬æ»šåŠ¨ï¼Œæå‰åŠ è½½æ•°æ®</span>
        recyclerView.addOnScrollListener(<span class="hljs-keyword">object</span> : RecyclerView.OnScrollListener() {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onScrolled</span><span class="hljs-params">(recyclerView: <span class="hljs-type">RecyclerView</span>, dx: <span class="hljs-type">Int</span>, dy: <span class="hljs-type">Int</span>)</span></span> {
                <span class="hljs-keyword">super</span>.onScrolled(recyclerView, dx, dy)
                
                <span class="hljs-keyword">val</span> layoutManager = recyclerView.layoutManager <span class="hljs-keyword">as</span> LinearLayoutManager
                <span class="hljs-keyword">val</span> lastVisiblePosition = layoutManager.findLastVisibleItemPosition()
                <span class="hljs-keyword">val</span> totalItemCount = layoutManager.itemCount
                
                <span class="hljs-comment">// è·ç¦»åº•éƒ¨è¿˜æœ‰ 5 ä¸ª item æ—¶å¼€å§‹é¢„åŠ è½½</span>
                <span class="hljs-keyword">if</span> (lastVisiblePosition &gt;= totalItemCount - <span class="hljs-number">5</span>) {
                    loadNextPage()
                }
            }
        })
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadNextPage</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// åŠ è½½ä¸‹ä¸€é¡µæ•°æ®</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šéœ€è¦é˜²æ­¢é‡å¤åŠ è½½</span>
    }
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>éœ€è¦é˜²æ­¢é‡å¤åŠ è½½ï¼ˆä½¿ç”¨æ ‡å¿—ä½æˆ–é”ï¼‰</li>
<li>é¢„åŠ è½½é˜ˆå€¼å»ºè®®è®¾ç½®ä¸º 3-5 ä¸ª item</li>
<li>å¯¹äºç½‘ç»œè¯·æ±‚ï¼Œéœ€è¦è€ƒè™‘å–æ¶ˆæœºåˆ¶</li>
<li>ViewHolder é¢„åŠ è½½è§ 14.11 initialPrefetchItemCount</li>
</ul>
<hr/>
<h2 data-id="heading-37">åã€å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-38">10.1 RecyclerView æ˜¾ç¤ºç©ºç™½çš„åŸå› </h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView æ˜¾ç¤ºç©ºç™½é€šå¸¸ç”±ä»¥ä¸‹åŸå› å¯¼è‡´ï¼š</p>
<p><strong>å¸¸è§åŸå› åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. æ²¡æœ‰è®¾ç½® LayoutManager</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šæ²¡æœ‰è®¾ç½® LayoutManager</span>
recyclerView.adapter = adapter

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå¿…é¡»è®¾ç½® LayoutManager</span>
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
recyclerView.adapter = adapter
</code></pre>
<p><strong>2. æ•°æ®ä¸ºç©º</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥æ•°æ®æ˜¯å¦ä¸ºç©º</span>
<span class="hljs-keyword">if</span> (dataList.isEmpty()) {
    <span class="hljs-comment">// æ˜¾ç¤ºç©ºçŠ¶æ€è§†å›¾</span>
    showEmptyView()
} <span class="hljs-keyword">else</span> {
    recyclerView.adapter = MyAdapter(dataList)
}
</code></pre>
<p><strong>3. Item å¸ƒå±€é«˜åº¦ä¸º 0</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ é”™è¯¯ï¼šé«˜åº¦ä¸º 0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"0dp"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®ï¼šè®¾ç½®åˆé€‚çš„é«˜åº¦ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span>
</code></pre>
<p><strong>4. RecyclerView é«˜åº¦é—®é¢˜</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- âŒ é”™è¯¯ï¼šé«˜åº¦ä¸º wrap_content ä¸”æ²¡æœ‰å†…å®¹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- âœ… æ­£ç¡®ï¼šä½¿ç”¨ match_parent æˆ–å›ºå®šé«˜åº¦ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">RecyclerView</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span> /&gt;</span>
</code></pre>
<p><strong>5. Adapter çš„ getItemCount() è¿”å› 0</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥ getItemCount() æ˜¯å¦æ­£ç¡®</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">return</span> items.size <span class="hljs-comment">// ç¡®ä¿è¿”å›æ­£ç¡®çš„æ•°é‡</span>
}
</code></pre>
<p><strong>è°ƒè¯•æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ·»åŠ æ—¥å¿—è°ƒè¯•</span>
Log.d(<span class="hljs-string">"RecyclerView"</span>, <span class="hljs-string">"ItemCount: <span class="hljs-subst">${adapter.itemCount}</span>"</span>)
Log.d(<span class="hljs-string">"RecyclerView"</span>, <span class="hljs-string">"DataSize: <span class="hljs-subst">${dataList.size}</span>"</span>)
Log.d(<span class="hljs-string">"RecyclerView"</span>, <span class="hljs-string">"LayoutManager: <span class="hljs-subst">${recyclerView.layoutManager}</span>"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-39">10.2 å¦‚ä½•é¿å…æ•°æ®æ›´æ–°å¼‚å¸¸</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>æ•°æ®æ›´æ–°æ—¶çš„å¼‚å¸¸é€šå¸¸æ˜¯ç”±äºåœ¨é”™è¯¯çš„æ—¶æœºæ›´æ–°æ•°æ®å¯¼è‡´çš„ã€‚</p>
<p><strong>å¸¸è§å¼‚å¸¸åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. IndexOutOfBoundsException</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨åå°çº¿ç¨‹æ›´æ–°æ•°æ®åç›´æ¥é€šçŸ¥</span>
Thread {
    items.add(<span class="hljs-string">"new item"</span>)
    notifyItemInserted(items.size - <span class="hljs-number">1</span>) <span class="hljs-comment">// å¯èƒ½å´©æºƒ</span>
}.start()

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ä¸»çº¿ç¨‹æ›´æ–°</span>
Thread {
    items.add(<span class="hljs-string">"new item"</span>)
    runOnUiThread {
        notifyItemInserted(items.size - <span class="hljs-number">1</span>)
    }
}.start()

<span class="hljs-comment">// âœ… æˆ–è€…ä½¿ç”¨ Handler</span>
handler.post {
    notifyItemInserted(items.size - <span class="hljs-number">1</span>)
}
</code></pre>
<p><strong>2. å¹¶å‘ä¿®æ”¹å¼‚å¸¸</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨éå†æ—¶ä¿®æ”¹åˆ—è¡¨</span>
<span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> items) {
    <span class="hljs-keyword">if</span> (shouldRemove(item)) {
        items.remove(item) <span class="hljs-comment">// ConcurrentModificationException</span>
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šå…ˆæ”¶é›†è¦åˆ é™¤çš„é¡¹ï¼Œå†åˆ é™¤</span>
<span class="hljs-keyword">val</span> toRemove = items.filter { shouldRemove(it) }
items.removeAll(toRemove)
notifyItemRangeRemoved(<span class="hljs-number">0</span>, toRemove.size)
</code></pre>
<p><strong>3. ä½ç½®ä¸åŒ¹é…å¼‚å¸¸</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ adapterPosition è€Œä¸æ˜¯ position å‚æ•°</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.itemView.setOnClickListener {
        <span class="hljs-keyword">val</span> adapterPosition = holder.adapterPosition
        <span class="hljs-keyword">if</span> (adapterPosition != RecyclerView.NO_POSITION) {
            <span class="hljs-keyword">val</span> item = items[adapterPosition] <span class="hljs-comment">// å®‰å…¨è®¿é—®</span>
        }
    }
}
</code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: MutableList&lt;String&gt;) : 
    RecyclerView.Adapter&lt;SafeAdapter.ViewHolder&gt;() {
    
    <span class="hljs-comment">// çº¿ç¨‹å®‰å…¨çš„æ•°æ®æ›´æ–°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lock = Any()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addItem</span><span class="hljs-params">(item: <span class="hljs-type">String</span>)</span></span> {
        synchronized(lock) {
            <span class="hljs-keyword">val</span> position = items.size
            items.add(item)
            notifyItemInserted(position)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
        synchronized(lock) {
            <span class="hljs-keyword">if</span> (position <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until items.size) {
                items.removeAt(position)
                notifyItemRemoved(position)
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, newItem: <span class="hljs-type">String</span>)</span></span> {
        synchronized(lock) {
            <span class="hljs-keyword">if</span> (position <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until items.size) {
                items[position] = newItem
                notifyItemChanged(position)
            }
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-40">10.3 å¦‚ä½•é¿å… ViewHolder å†…å­˜æ³„æ¼</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ViewHolder ä¸­å¯èƒ½æŒæœ‰ Contextã€ç›‘å¬å™¨ç­‰å¼•ç”¨ï¼Œéœ€è¦é¿å…å†…å­˜æ³„æ¼ã€‚</p>
<p><strong>å¸¸è§æ³„æ¼åœºæ™¯åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p><strong>1. æŒæœ‰ Activity Context</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šViewHolder æŒæœ‰ Activity å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context = itemView.context <span class="hljs-comment">// å¦‚æœæ˜¯ Activity Contextï¼Œå¯èƒ½æ³„æ¼</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ Application Context æˆ– itemView.context</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context = itemView.context.applicationContext
}
</code></pre>
<p><strong>2. æœªå–æ¶ˆå¼‚æ­¥ä»»åŠ¡</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šå¼‚æ­¥ä»»åŠ¡æœªå–æ¶ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadImage</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-comment">// å¦‚æœ ViewHolder è¢«å›æ”¶ï¼Œä½†ä»»åŠ¡è¿˜åœ¨æ‰§è¡Œï¼Œå¯èƒ½æ³„æ¼</span>
        loadImageAsync(url) { bitmap -&gt;
            imageView.setImageBitmap(bitmap)
        }
    }
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ onViewRecycled ä¸­å–æ¶ˆä»»åŠ¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> imageLoadJob: Job? = <span class="hljs-literal">null</span>
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadImage</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        imageLoadJob = lifecycleScope.launch {
            <span class="hljs-keyword">val</span> bitmap = loadImageAsync(url)
            imageView.setImageBitmap(bitmap)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cancelLoad</span><span class="hljs-params">()</span></span> {
        imageLoadJob?.cancel()
    }
}

<span class="hljs-comment">// åœ¨ Adapter ä¸­</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewRecycled</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onViewRecycled(holder)
    holder.cancelLoad() <span class="hljs-comment">// å–æ¶ˆä»»åŠ¡</span>
}
</code></pre>
<p><strong>3. æœªç§»é™¤ç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ onViewRecycled ä¸­ç§»é™¤ç›‘å¬å™¨</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewRecycled</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onViewRecycled(holder)
    holder.removeListeners()
}
</code></pre>
<hr/>
<h2 data-id="heading-41">åä¸€ã€æºç åˆ†æ</h2>
<h3 data-id="heading-42">11.1 RecyclerView çš„ç»˜åˆ¶æµç¨‹</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView çš„ç»˜åˆ¶æµç¨‹éµå¾ª Android çš„æ ‡å‡†ç»˜åˆ¶æµç¨‹ï¼Œä½†åŠ å…¥äº†è§†å›¾å¤ç”¨æœºåˆ¶ã€‚</p>
<p><strong>ç»˜åˆ¶æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-number">1</span>. <span class="hljs-built_in">onMeasure</span>() - æµ‹é‡é˜¶æ®µ
   â”œâ”€â”€ æµ‹é‡ RecyclerView è‡ªèº«å¤§å°
   â”œâ”€â”€ æµ‹é‡å¯è§çš„ item
   â””â”€â”€ è®¡ç®—æ€»é«˜åº¦/å®½åº¦

<span class="hljs-number">2</span>. <span class="hljs-built_in">onLayout</span>() - å¸ƒå±€é˜¶æ®µ
   â”œâ”€â”€ è°ƒç”¨ LayoutManager<span class="hljs-selector-class">.onLayoutChildren</span>()
   â”œâ”€â”€ å›æ”¶ä¸å¯è§çš„ ViewHolder
   â”œâ”€â”€ å¤ç”¨æˆ–åˆ›å»ºæ–°çš„ ViewHolder
   â””â”€â”€ å¸ƒå±€å¯è§çš„ item

<span class="hljs-number">3</span>. <span class="hljs-built_in">onDraw</span>() - ç»˜åˆ¶é˜¶æ®µ
   â”œâ”€â”€ ç»˜åˆ¶ RecyclerView èƒŒæ™¯
   â”œâ”€â”€ ç»˜åˆ¶ ItemDecoration (onDraw)
   â”œâ”€â”€ ç»˜åˆ¶ item è§†å›¾
   â””â”€â”€ ç»˜åˆ¶ ItemDecoration (onDrawOver)
</code></pre>
<p><strong>å…³é”®æºç åˆ†æï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView.onMeasure()</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMeasure</span><span class="hljs-params">(widthSpec: <span class="hljs-type">Int</span>, heightSpec: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// 1. è°ƒç”¨ LayoutManager æµ‹é‡</span>
    layoutManager?.let {
        it.onMeasure(recycler, state, widthSpec, heightSpec)
    } ?: <span class="hljs-keyword">super</span>.onMeasure(widthSpec, heightSpec)
}

<span class="hljs-comment">// RecyclerView.onLayout()</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLayout</span><span class="hljs-params">(changed: <span class="hljs-type">Boolean</span>, l: <span class="hljs-type">Int</span>, t: <span class="hljs-type">Int</span>, r: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// 1. åˆ†å‘å¸ƒå±€</span>
    dispatchLayout()
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dispatchLayout</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// 2. è°ƒç”¨ LayoutManager å¸ƒå±€</span>
    layoutManager?.onLayoutChildren(recycler, state)
}

<span class="hljs-comment">// LayoutManager.onLayoutChildren()</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLayoutChildren</span><span class="hljs-params">(recycler: <span class="hljs-type">Recycler</span>, state: <span class="hljs-type">State</span>)</span></span> {
    <span class="hljs-comment">// 1. å›æ”¶æ‰€æœ‰è§†å›¾</span>
    detachAndScrapAttachedViews(recycler)
    
    <span class="hljs-comment">// 2. å¡«å……å¯è§åŒºåŸŸ</span>
    fill(recycler, layoutState, state, <span class="hljs-literal">false</span>)
}
</code></pre>
<p><strong>è§†å›¾å¤ç”¨æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. éœ€è¦ ViewHolder æ—¶ï¼Œå…ˆä»ç¼“å­˜è·å–</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getViewForPosition</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: View {
    <span class="hljs-comment">// æŸ¥æ‰¾é¡ºåºï¼š</span>
    <span class="hljs-comment">// 1. mAttachedScrap (ä¸€çº§ç¼“å­˜)</span>
    <span class="hljs-comment">// 2. mCachedViews (äºŒçº§ç¼“å­˜)</span>
    <span class="hljs-comment">// 3. ViewCacheExtension (ä¸‰çº§ç¼“å­˜)</span>
    <span class="hljs-comment">// 4. RecycledViewPool (å››çº§ç¼“å­˜)</span>
    <span class="hljs-comment">// 5. åˆ›å»ºæ–°çš„ ViewHolder</span>
}

<span class="hljs-comment">// 2. è§†å›¾æ»‘å‡ºå±å¹•æ—¶ï¼Œæ”¾å…¥ç¼“å­˜</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recycleView</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    <span class="hljs-keyword">val</span> holder = getChildViewHolder(view)
    <span class="hljs-comment">// æ ¹æ®æƒ…å†µæ”¾å…¥ä¸åŒçº§åˆ«çš„ç¼“å­˜</span>
    recycler.recycleView(holder)
}
</code></pre>
<hr/>
<h3 data-id="heading-43">11.2 å¦‚ä½•å®ç°è§†å›¾å¤ç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è§†å›¾å¤ç”¨æ˜¯ RecyclerView é«˜æ€§èƒ½çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<p><strong>å¤ç”¨æœºåˆ¶åŸç†ï¼š</strong></p>
<p><strong>1. è§†å›¾å›æ”¶ï¼ˆRecycleï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å½“ item æ»‘å‡ºå±å¹•æ—¶</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recycleView</span><span class="hljs-params">(view: <span class="hljs-type">View</span>)</span></span> {
    <span class="hljs-keyword">val</span> holder = getChildViewHolder(view)
    
    <span class="hljs-comment">// 1. æ¸…é™¤æ•°æ®ç»‘å®š</span>
    holder.unbind()
    
    <span class="hljs-comment">// 2. æ ¹æ®æƒ…å†µæ”¾å…¥ç¼“å­˜</span>
    <span class="hljs-keyword">if</span> (holder.isRecyclable) {
        <span class="hljs-comment">// æ”¾å…¥ RecycledViewPool</span>
        recycledViewPool.putRecycledView(holder)
    }
}
</code></pre>
<p><strong>2. è§†å›¾è·å–ï¼ˆGetï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// éœ€è¦ ViewHolder æ—¶</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getViewForPosition</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-comment">// 1. ä»ç¼“å­˜æ± è·å–</span>
    <span class="hljs-keyword">val</span> holder = recycledViewPool.getRecycledView(viewType)
    
    <span class="hljs-keyword">if</span> (holder != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// 2. é‡æ–°ç»‘å®šæ•°æ®</span>
        adapter.onBindViewHolder(holder, position)
        <span class="hljs-keyword">return</span> holder
    }
    
    <span class="hljs-comment">// 3. ç¼“å­˜ä¸­æ²¡æœ‰ï¼Œåˆ›å»ºæ–°çš„</span>
    <span class="hljs-keyword">return</span> adapter.onCreateViewHolder(parent, viewType)
}
</code></pre>
<p><strong>3. ç¼“å­˜ç­–ç•¥</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecycledViewPool çš„å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RecycledViewPool</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scrapHeaps = SparseArray&lt;ScrapData&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">putRecycledView</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
        <span class="hljs-keyword">val</span> viewType = holder.itemViewType
        <span class="hljs-keyword">val</span> scrapHeap = getScrapHeapForType(viewType)
        scrapHeap.add(holder)
        
        <span class="hljs-comment">// é™åˆ¶æ¯ä¸ªç±»å‹çš„ç¼“å­˜æ•°é‡</span>
        <span class="hljs-keyword">if</span> (scrapHeap.size &gt; maxRecycledViews) {
            scrapHeap.remove(<span class="hljs-number">0</span>) <span class="hljs-comment">// ç§»é™¤æœ€æ—§çš„</span>
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getRecycledView</span><span class="hljs-params">(viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder? {
        <span class="hljs-keyword">val</span> scrapHeap = getScrapHeapForType(viewType)
        <span class="hljs-keyword">return</span> scrapHeap.removeLastOrNull()
    }
}
</code></pre>
<p><strong>å¤ç”¨æµç¨‹å›¾ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·æ»‘åŠ¨åˆ—è¡¨
<span class="hljs-code">    â†“
Item æ»‘å‡ºå±å¹•
    â†“
ViewHolder è¢«å›æ”¶
    â†“
æ”¾å…¥ RecycledViewPool
    â†“
æ–°çš„ Item éœ€è¦æ˜¾ç¤º
    â†“
ä» RecycledViewPool è·å– ViewHolder
    â†“
é‡æ–°ç»‘å®šæ•°æ® (onBindViewHolder)
    â†“
æ˜¾ç¤ºåœ¨å±å¹•ä¸Š
</span></code></pre>
<hr/>
<h3 data-id="heading-44">11.3 LayoutManager çš„æµ‹é‡å’Œå¸ƒå±€æµç¨‹</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>LayoutManager è´Ÿè´£æµ‹é‡å’Œå¸ƒå±€ RecyclerView ä¸­çš„ itemã€‚</p>
<p><strong>æµ‹é‡æµç¨‹ï¼ˆMeasureï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LinearLayoutManager.onMeasure()</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onMeasure</span><span class="hljs-params">(
    recycler: <span class="hljs-type">Recycler</span>,
    state: <span class="hljs-type">State</span>,
    widthSpec: <span class="hljs-type">Int</span>,
    heightSpec: <span class="hljs-type">Int</span>
)</span></span>: IntArray {
    <span class="hljs-comment">// 1. è·å–æµ‹é‡æ¨¡å¼</span>
    <span class="hljs-keyword">val</span> widthMode = View.MeasureSpec.getMode(widthSpec)
    <span class="hljs-keyword">val</span> heightMode = View.MeasureSpec.getMode(heightSpec)
    
    <span class="hljs-comment">// 2. æµ‹é‡å¯è§çš„ item</span>
    <span class="hljs-keyword">var</span> width = <span class="hljs-number">0</span>
    <span class="hljs-keyword">var</span> height = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until childCount) {
        <span class="hljs-keyword">val</span> child = getChildAt(i)
        measureChild(child, widthSpec, heightSpec)
        
        width = max(width, child.measuredWidth)
        height += child.measuredHeight
    }
    
    <span class="hljs-keyword">return</span> intArrayOf(width, height)
}
</code></pre>
<p><strong>å¸ƒå±€æµç¨‹ï¼ˆLayoutï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LinearLayoutManager.onLayoutChildren()</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onLayoutChildren</span><span class="hljs-params">(recycler: <span class="hljs-type">Recycler</span>, state: <span class="hljs-type">State</span>)</span></span> {
    <span class="hljs-comment">// 1. å›æ”¶æ‰€æœ‰å·²é™„åŠ çš„è§†å›¾</span>
    detachAndScrapAttachedViews(recycler)
    
    <span class="hljs-comment">// 2. è®¡ç®—å¸ƒå±€æ–¹å‘</span>
    <span class="hljs-keyword">val</span> layoutDirection = <span class="hljs-keyword">if</span> (reverseLayout) -<span class="hljs-number">1</span> <span class="hljs-keyword">else</span> <span class="hljs-number">1</span>
    
    <span class="hljs-comment">// 3. å¡«å……å¯è§åŒºåŸŸ</span>
    <span class="hljs-keyword">var</span> currentPosition = <span class="hljs-number">0</span>
    <span class="hljs-keyword">var</span> currentTop = paddingTop
    
    <span class="hljs-keyword">while</span> (currentTop &lt; height - paddingBottom) {
        <span class="hljs-comment">// 3.1 è·å–æˆ–åˆ›å»º ViewHolder</span>
        <span class="hljs-keyword">val</span> holder = recycler.getViewForPosition(currentPosition)
        
        <span class="hljs-comment">// 3.2 æ·»åŠ è§†å›¾</span>
        addView(holder.itemView)
        
        <span class="hljs-comment">// 3.3 æµ‹é‡è§†å›¾</span>
        measureChildWithMargins(holder.itemView, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)
        
        <span class="hljs-comment">// 3.4 å¸ƒå±€è§†å›¾</span>
        <span class="hljs-keyword">val</span> left = paddingLeft
        <span class="hljs-keyword">val</span> top = currentTop
        <span class="hljs-keyword">val</span> right = left + holder.itemView.measuredWidth
        <span class="hljs-keyword">val</span> bottom = top + holder.itemView.measuredHeight
        
        layoutDecorated(holder.itemView, left, top, right, bottom)
        
        <span class="hljs-comment">// 3.5 æ›´æ–°ä½ç½®</span>
        currentTop = bottom
        currentPosition += layoutDirection
    }
    
    <span class="hljs-comment">// 4. å›æ”¶ä¸å¯è§çš„è§†å›¾</span>
    recycleViewsOutOfBounds(recycler)
}
</code></pre>
<p><strong>å…³é”®æ–¹æ³•è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>detachAndScrapAttachedViews()</code>: å›æ”¶æ‰€æœ‰å·²é™„åŠ çš„è§†å›¾</li>
<li><code>getViewForPosition()</code>: è·å–æŒ‡å®šä½ç½®çš„ ViewHolderï¼ˆå¯èƒ½ä»ç¼“å­˜è·å–ï¼‰</li>
<li><code>addView()</code>: å°†è§†å›¾æ·»åŠ åˆ° RecyclerView</li>
<li><code>measureChildWithMargins()</code>: æµ‹é‡å­è§†å›¾ï¼ˆåŒ…å« marginï¼‰</li>
<li><code>layoutDecorated()</code>: å¸ƒå±€å­è§†å›¾ï¼ˆåŒ…å« decoration çš„åç§»ï¼‰</li>
<li><code>recycleViewsOutOfBounds()</code>: å›æ”¶è¶…å‡ºè¾¹ç•Œçš„è§†å›¾</li>
</ul>
<hr/>
<h2 data-id="heading-45">åäºŒã€ç¬¬ä¸‰æ–¹åº“ä¸å·¥å…·</h2>
<h3 data-id="heading-46">12.1 Epoxy åº“çš„ä½œç”¨å’Œä½¿ç”¨åœºæ™¯</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>Epoxy æ˜¯ Airbnb å¼€å‘çš„ä¸€ä¸ªåº“ï¼Œç”¨äºç®€åŒ– RecyclerView çš„ Adapter å¼€å‘ã€‚</p>
<p><strong>ä¸»è¦ä¼˜åŠ¿ï¼š</strong></p>
<ol>
<li><strong>ç®€åŒ–ä»£ç </strong>ï¼šå‡å°‘æ ·æ¿ä»£ç </li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šç¼–è¯‘æ—¶æ£€æŸ¥</li>
<li><strong>è‡ªåŠ¨ Diff</strong>ï¼šè‡ªåŠ¨è®¡ç®—å·®å¼‚å¹¶æ›´æ–°</li>
<li><strong>æ˜“äºæµ‹è¯•</strong>ï¼šä»£ç ç»“æ„æ¸…æ™°</li>
</ol>
<p><strong>åŸºæœ¬ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. æ·»åŠ ä¾èµ–</span>
<span class="hljs-comment">// implementation 'com.airbnb.android:epoxy:4.6.3'</span>
<span class="hljs-comment">// kapt 'com.airbnb.android:epoxy-processor:4.6.3'</span>

<span class="hljs-comment">// 2. å®šä¹‰ Model</span>
<span class="hljs-meta">@EpoxyModelClass(layout = R.layout.item_user)</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserModel</span> : <span class="hljs-type">EpoxyModelWithHolder</span>&lt;<span class="hljs-type">UserHolder</span>&gt;() {
    <span class="hljs-meta">@EpoxyAttribute</span>
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> name: String
    
    <span class="hljs-meta">@EpoxyAttribute</span>
    <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(holder: <span class="hljs-type">UserHolder</span>)</span></span> {
        holder.nameTextView.text = name
        holder.ageTextView.text = <span class="hljs-string">"<span class="hljs-variable">$age</span> å²"</span>
    }
}

<span class="hljs-comment">// 3. åˆ›å»º Holder</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserHolder</span> : <span class="hljs-type">EpoxyHolder</span>() {
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> nameTextView: TextView
    <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> ageTextView: TextView
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bindView</span><span class="hljs-params">(itemView: <span class="hljs-type">View</span>)</span></span> {
        nameTextView = itemView.findViewById(R.id.nameTextView)
        ageTextView = itemView.findViewById(R.id.ageTextView)
    }
}

<span class="hljs-comment">// 4. åœ¨ Activity ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        <span class="hljs-keyword">val</span> recyclerView = findViewById&lt;EpoxyRecyclerView&gt;(R.id.recyclerView)
        
        recyclerView.withModels {
            users.forEach { user -&gt;
                userModel {
                    id(user.id)
                    name(user.name)
                    age(user.age)
                }
            }
        }
    }
}
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å¤æ‚çš„å¤šç±»å‹åˆ—è¡¨</li>
<li>éœ€è¦é¢‘ç¹æ›´æ–°çš„åˆ—è¡¨</li>
<li>éœ€è¦ç±»å‹å®‰å…¨çš„åˆ—è¡¨å¼€å‘</li>
</ul>
<hr/>
<h3 data-id="heading-47">12.2 å¦‚ä½•ä½¿ç”¨ Systrace åˆ†ææ€§èƒ½</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>Systrace æ˜¯ Android æä¾›çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå¯ä»¥åˆ†æ RecyclerView çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<p><strong>æ­¥éª¤ 1ï¼šåœ¨ä»£ç ä¸­æ·»åŠ  Trace</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// æ·»åŠ  Trace</span>
        Trace.beginSection(<span class="hljs-string">"onBindViewHolder"</span>)
        <span class="hljs-keyword">try</span> {
            holder.bind(items[position])
        } <span class="hljs-keyword">finally</span> {
            Trace.endSection()
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        Trace.beginSection(<span class="hljs-string">"onCreateViewHolder"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
                .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>)
            ViewHolder(view)
        } <span class="hljs-keyword">finally</span> {
            Trace.endSection()
        }
    }
}
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šä½¿ç”¨ Systrace å·¥å…·</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿æ¥è®¾å¤‡</span>
adb devices

<span class="hljs-comment"># 2. å¼€å§‹å½•åˆ¶</span>
python systrace.py -t 10 -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view binder_driver hal dalvik camera input res

<span class="hljs-comment"># 3. åœ¨è®¾å¤‡ä¸Šæ“ä½œ RecyclerViewï¼ˆæ»‘åŠ¨ç­‰ï¼‰</span>

<span class="hljs-comment"># 4. æŸ¥çœ‹ç”Ÿæˆçš„ trace.html æ–‡ä»¶</span>
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šåˆ†æç»“æœ</strong></p>
<p>åœ¨ç”Ÿæˆçš„ HTML æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š</p>
<ul>
<li><code>onBindViewHolder</code> çš„æ‰§è¡Œæ—¶é—´</li>
<li><code>onCreateViewHolder</code> çš„æ‰§è¡Œæ—¶é—´</li>
<li>ä¸»çº¿ç¨‹çš„é˜»å¡æƒ…å†µ</li>
<li>å¸§ç‡æƒ…å†µ</li>
</ul>
<p><strong>æ€§èƒ½ä¼˜åŒ–å»ºè®®ï¼š</strong></p>
<ul>
<li>å¦‚æœ <code>onBindViewHolder</code> è€—æ—¶è¿‡é•¿ï¼Œä¼˜åŒ–æ•°æ®ç»‘å®šé€»è¾‘</li>
<li>å¦‚æœ <code>onCreateViewHolder</code> è€—æ—¶è¿‡é•¿ï¼Œä¼˜åŒ–å¸ƒå±€æ–‡ä»¶</li>
<li>å¦‚æœä¸»çº¿ç¨‹é˜»å¡ï¼Œå°†è€—æ—¶æ“ä½œç§»åˆ°åå°çº¿ç¨‹</li>
</ul>
<hr/>
<h3 data-id="heading-48">12.3 å¦‚ä½•ä½¿ç”¨ Layout Inspector è°ƒè¯•</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>Layout Inspector æ˜¯ Android Studio æä¾›çš„å·¥å…·ï¼Œå¯ä»¥æŸ¥çœ‹ RecyclerView çš„å¸ƒå±€å±‚æ¬¡ã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p><strong>æ‰“å¼€ Layout Inspector</strong></p>
<ul>
<li>Android Studio â†’ Tools â†’ Layout Inspector</li>
<li>æˆ–ç‚¹å‡»å·¥å…·æ çš„ Layout Inspector å›¾æ ‡</li>
</ul>
</li>
<li>
<p><strong>é€‰æ‹©è®¾å¤‡å’Œè¿›ç¨‹</strong></p>
<ul>
<li>é€‰æ‹©è¿æ¥çš„è®¾å¤‡</li>
<li>é€‰æ‹©è¦è°ƒè¯•çš„åº”ç”¨è¿›ç¨‹</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹å¸ƒå±€å±‚æ¬¡</strong></p>
<ul>
<li>å·¦ä¾§æ˜¾ç¤ºå¸ƒå±€æ ‘</li>
<li>ä¸­é—´æ˜¾ç¤ºå¸ƒå±€é¢„è§ˆ</li>
<li>å³ä¾§æ˜¾ç¤ºå±æ€§é¢æ¿</li>
</ul>
</li>
<li>
<p><strong>è°ƒè¯• RecyclerView</strong></p>
<ul>
<li>æŸ¥çœ‹ RecyclerView çš„å­è§†å›¾</li>
<li>æ£€æŸ¥ item çš„å¸ƒå±€</li>
<li>æŸ¥çœ‹ ViewHolder çš„å¤ç”¨æƒ…å†µ</li>
</ul>
</li>
</ol>
<p><strong>è°ƒè¯•æŠ€å·§ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœ¨ä»£ç ä¸­æ·»åŠ è°ƒè¯•ä¿¡æ¯</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// æ·»åŠ æ ‡ç­¾ï¼Œæ–¹ä¾¿åœ¨ Layout Inspector ä¸­è¯†åˆ«</span>
        holder.itemView.tag = <span class="hljs-string">"Item_<span class="hljs-variable">$position</span>"</span>
        holder.bind(items[position])
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-49">åä¸‰ã€è®¾è®¡æ¨¡å¼ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-50">13.1 RecyclerView ä¸­ä½¿ç”¨çš„è®¾è®¡æ¨¡å¼</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView ä½¿ç”¨äº†å¤šç§è®¾è®¡æ¨¡å¼ï¼Œè¿™æ˜¯å…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§çš„åŸºç¡€ã€‚</p>
<p><strong>1. é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView.Adapter æ˜¯é€‚é…å™¨æ¨¡å¼çš„å…¸å‹åº”ç”¨</span>
<span class="hljs-comment">// å°†æ•°æ®é€‚é…åˆ°è§†å›¾</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Adapter</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">()</span></span>: ViewHolder
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, <span class="hljs-keyword">data</span>: <span class="hljs-type">Any</span>)</span></span>
}
</code></pre>
<p><strong>2. è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Adapter æ•°æ®å˜åŒ–æ—¶ï¼Œé€šçŸ¥ RecyclerView æ›´æ–°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Adapter</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">notifyDataSetChanged</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…ï¼ˆRecyclerViewï¼‰</span>
        observers.forEach { it.onChanged() }
    }
}
</code></pre>
<p><strong>3. ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LayoutManager æ˜¯ç­–ç•¥æ¨¡å¼çš„ä½“ç°</span>
<span class="hljs-comment">// ä¸åŒçš„å¸ƒå±€ç­–ç•¥å¯ä»¥äº’æ¢</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">LayoutStrategy</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">layoutItems</span><span class="hljs-params">()</span></span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinearLayoutStrategy</span> : <span class="hljs-type">LayoutStrategy</span> { ... }
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GridLayoutStrategy</span> : <span class="hljs-type">LayoutStrategy</span> { ... }
</code></pre>
<p><strong>4. æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Method Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView çš„ç»˜åˆ¶æµç¨‹æ˜¯æ¨¡æ¿æ–¹æ³•</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecyclerView</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">()</span></span> {
        drawBackground()      <span class="hljs-comment">// å›ºå®šæ­¥éª¤</span>
        drawDecoration()       <span class="hljs-comment">// å›ºå®šæ­¥éª¤</span>
        drawItems()            <span class="hljs-comment">// å¯è‡ªå®šä¹‰</span>
        drawDecorationOver()   <span class="hljs-comment">// å›ºå®šæ­¥éª¤</span>
    }
}
</code></pre>
<p><strong>5. å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ViewHolder çš„åˆ›å»ºä½¿ç”¨å·¥å‚æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Adapter</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createViewHolder</span><span class="hljs-params">(type: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">when</span> (type) {
            TYPE_A -&gt; ViewHolderA()
            TYPE_B -&gt; ViewHolderB()
            <span class="hljs-keyword">else</span> -&gt; DefaultViewHolder()
        }
    }
}
</code></pre>
<p><strong>6. å¯¹è±¡æ± æ¨¡å¼ï¼ˆObject Pool Patternï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecycledViewPool æ˜¯å¯¹è±¡æ± æ¨¡å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">RecycledViewPool</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> pool = mutableListOf&lt;ViewHolder&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">()</span></span>: ViewHolder? = pool.removeLastOrNull()
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">put</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> = pool.add(holder)
}
</code></pre>
<hr/>
<h3 data-id="heading-51">13.2 å¦‚ä½•ä¿æŒ Adapter çš„å•ä¸€èŒè´£</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>å•ä¸€èŒè´£åŸåˆ™è¦æ±‚ä¸€ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ã€‚åœ¨ Adapter ä¸­ï¼Œåº”è¯¥å°†æ•°æ®ç»‘å®šå’Œä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚</p>
<p><strong>é”™è¯¯ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šAdapter æ‰¿æ‹…äº†å¤ªå¤šèŒè´£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BadAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;Item&gt;) : 
    RecyclerView.Adapter&lt;BadAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = items[position]
        
        <span class="hljs-comment">// èŒè´£ 1ï¼šæ•°æ®ç»‘å®š</span>
        holder.textView.text = item.text
        
        <span class="hljs-comment">// èŒè´£ 2ï¼šç½‘ç»œè¯·æ±‚ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰</span>
        loadImage(item.imageUrl) { bitmap -&gt;
            holder.imageView.setImageBitmap(bitmap)
        }
        
        <span class="hljs-comment">// èŒè´£ 3ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆä¸åº”è¯¥åœ¨è¿™é‡Œï¼‰</span>
        <span class="hljs-keyword">if</span> (item.isVIP) {
            holder.vipBadge.visibility = View.VISIBLE
            holder.textView.setTextColor(Color.GOLD)
        }
        
        <span class="hljs-comment">// èŒè´£ 4ï¼šç‚¹å‡»äº‹ä»¶å¤„ç†ï¼ˆå¯ä»¥ï¼Œä½†æœ€å¥½åˆ†ç¦»ï¼‰</span>
        holder.itemView.setOnClickListener {
            <span class="hljs-comment">// å¤æ‚çš„ä¸šåŠ¡é€»è¾‘</span>
            <span class="hljs-keyword">if</span> (user.isLoggedIn) {
                navigateToDetail(item)
            } <span class="hljs-keyword">else</span> {
                showLoginDialog()
            }
        }
    }
}
</code></pre>
<p><strong>æ­£ç¡®ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šèŒè´£åˆ†ç¦»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;Item&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> imageLoader: ImageLoader,      <span class="hljs-comment">// å›¾ç‰‡åŠ è½½èŒè´£åˆ†ç¦»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> itemBinder: ItemBinder,       <span class="hljs-comment">// æ•°æ®ç»‘å®šèŒè´£åˆ†ç¦»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> clickHandler: ClickHandler    <span class="hljs-comment">// ç‚¹å‡»å¤„ç†èŒè´£åˆ†ç¦»</span>
) : RecyclerView.Adapter&lt;GoodAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = items[position]
        
        <span class="hljs-comment">// åªè´Ÿè´£åè°ƒï¼Œä¸å¤„ç†å…·ä½“é€»è¾‘</span>
        itemBinder.bind(holder, item)
        imageLoader.load(item.imageUrl, holder.imageView)
        holder.itemView.setOnClickListener { clickHandler.onItemClick(item) }
    }
}

<span class="hljs-comment">// å›¾ç‰‡åŠ è½½å™¨ï¼ˆå•ä¸€èŒè´£ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageLoader</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">load</span><span class="hljs-params">(url: <span class="hljs-type">String</span>, imageView: <span class="hljs-type">ImageView</span>)</span></span> {
        Glide.with(imageView.context)
            .load(url)
            .into(imageView)
    }
}

<span class="hljs-comment">// æ•°æ®ç»‘å®šå™¨ï¼ˆå•ä¸€èŒè´£ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ItemBinder</span> {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, item: <span class="hljs-type">Item</span>)</span></span> {
        holder.textView.text = item.text
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘å¤„ç†</span>
        <span class="hljs-keyword">if</span> (item.isVIP) {
            holder.vipBadge.visibility = View.VISIBLE
            holder.textView.setTextColor(Color.GOLD)
        }
    }
}

<span class="hljs-comment">// ç‚¹å‡»å¤„ç†å™¨ï¼ˆå•ä¸€èŒè´£ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ClickHandler</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> navigator: Navigator,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> authManager: AuthManager
) {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onItemClick</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> {
        <span class="hljs-keyword">if</span> (authManager.isLoggedIn()) {
            navigator.navigateToDetail(item)
        } <span class="hljs-keyword">else</span> {
            navigator.showLoginDialog()
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-52">åå››ã€è¡¥å……çŸ¥è¯†ç‚¹</h2>
<h3 data-id="heading-53">14.1 RecyclerView ä¸ Jetpack Compose LazyColumn çš„åŒºåˆ«</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView å’Œ Compose LazyColumn éƒ½æ˜¯ç”¨äºæ˜¾ç¤ºåˆ—è¡¨çš„ç»„ä»¶ï¼Œä½†å±äºä¸åŒçš„æŠ€æœ¯æ ˆã€‚</p>








































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>RecyclerView</th><th>Compose LazyColumn</th></tr></thead><tbody><tr><td><strong>æŠ€æœ¯æ ˆ</strong></td><td>ä¼ ç»Ÿ View ç³»ç»Ÿ</td><td>Jetpack Compose</td></tr><tr><td><strong>å£°æ˜å¼</strong></td><td>å‘½ä»¤å¼ï¼ˆéœ€è¦ Adapterï¼‰</td><td>å£°æ˜å¼ï¼ˆç›´æ¥æè¿° UIï¼‰</td></tr><tr><td><strong>ä»£ç é‡</strong></td><td>éœ€è¦ Adapterã€ViewHolder</td><td>ä»£ç æ›´ç®€æ´</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>æˆç†Ÿï¼Œæ€§èƒ½ä¼˜ç§€</td><td>æ€§èƒ½ä¼˜ç§€ï¼Œä½†è¾ƒæ–°</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>ç›¸å¯¹å¹³ç¼“</td><td>éœ€è¦å­¦ä¹  Compose</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>æ”¯æŒæ‰€æœ‰ Android ç‰ˆæœ¬</td><td>éœ€è¦ API 21+</td></tr></tbody></table>
<p><strong>ä»£ç å¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// RecyclerView æ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        <span class="hljs-keyword">val</span> recyclerView = findViewById&lt;RecyclerView&gt;(R.id.recyclerView)
        recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
        recyclerView.adapter = MyAdapter(dataList)
    }
}

<span class="hljs-comment">// Compose LazyColumn æ–¹å¼</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyList</span><span class="hljs-params">(items: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Item</span>&gt;)</span></span> {
    LazyColumn {
        items(items) { item -&gt;
            ItemView(item = item)
        }
    }
}
</code></pre>
<p><strong>é€‰æ‹©å»ºè®®ï¼š</strong></p>
<ul>
<li><strong>ä½¿ç”¨ RecyclerView</strong>ï¼šç°æœ‰é¡¹ç›®ã€éœ€è¦å…¼å®¹ä½ç‰ˆæœ¬ã€å›¢é˜Ÿç†Ÿæ‚‰ View ç³»ç»Ÿ</li>
<li><strong>ä½¿ç”¨ Compose LazyColumn</strong>ï¼šæ–°é¡¹ç›®ã€è¿½æ±‚ç°ä»£åŒ–ã€æ„¿æ„å­¦ä¹  Compose</li>
</ul>
<hr/>
<h3 data-id="heading-54">14.2 RecyclerView çš„ä¸»è¦ä¼˜åŠ¿</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>RecyclerView ç›¸æ¯” ListView å’Œå…¶ä»–åˆ—è¡¨ç»„ä»¶ï¼Œå…·æœ‰ä»¥ä¸‹æ ¸å¿ƒä¼˜åŠ¿ï¼ˆä¸ ListView çš„è¯¦ç»†å¯¹æ¯”è§ <strong>1.2</strong>ï¼‰ï¼š</p>
<p><strong>1. çµæ´»çš„å¸ƒå±€ç®¡ç†</strong></p>
<p>é€šè¿‡ LayoutManager å¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„å¸ƒå±€æ–¹å¼ï¼Œæ— éœ€ä¿®æ”¹ Adapter ä»£ç ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¯ä»¥è½»æ¾åˆ‡æ¢ä¸åŒçš„å¸ƒå±€</span>
recyclerView.layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>) <span class="hljs-comment">// çº¿æ€§</span>
recyclerView.layoutManager = GridLayoutManager(<span class="hljs-keyword">this</span>, <span class="hljs-number">3</span>) <span class="hljs-comment">// ç½‘æ ¼</span>
recyclerView.layoutManager = StaggeredGridLayoutManager(<span class="hljs-number">2</span>, VERTICAL) <span class="hljs-comment">// ç€‘å¸ƒæµ</span>
</code></pre>
<p><strong>2. å¼ºåˆ¶ ViewHolder æ¨¡å¼</strong></p>
<p>RecyclerView å¼ºåˆ¶ä½¿ç”¨ ViewHolderï¼Œç¡®ä¿æ€§èƒ½ä¼˜åŒ–ï¼ˆè¯¦è§ <strong>2.1ã€2.2</strong>ï¼‰ã€‚</p>
<p><strong>3. å†…ç½®åŠ¨ç”»æ”¯æŒ</strong></p>
<p>é»˜è®¤æ”¯æŒå¢åˆ æ”¹åŠ¨ç”»ï¼Œæ— éœ€æ‰‹åŠ¨å®ç°ï¼ˆè¯¦è§ <strong>8.1ã€8.2</strong>ï¼‰ã€‚</p>
<p><strong>4. å¤šçº§ç¼“å­˜æœºåˆ¶</strong></p>
<p>å››çº§ç¼“å­˜æœºåˆ¶æä¾›æ›´å¥½çš„æ€§èƒ½ï¼ˆè¯¦è§ <strong>5.1-5.5</strong>ï¼‰ã€‚</p>
<p><strong>5. é«˜åº¦å¯å®šåˆ¶</strong></p>
<p>å¯ä»¥è‡ªå®šä¹‰ LayoutManagerã€ItemDecorationã€ItemAnimatorï¼Œå®ç°å¤æ‚çš„å¸ƒå±€å’Œæ•ˆæœã€‚</p>
<p><strong>6. æ›´å¥½çš„æ€§èƒ½</strong></p>
<ul>
<li>è§†å›¾å¤ç”¨æœºåˆ¶æ›´å®Œå–„ï¼ˆè¯¦è§ <strong>11.2</strong>ï¼‰</li>
<li>æ”¯æŒé¢„åŠ è½½ï¼ˆè¯¦è§ <strong>9.2ã€14.10</strong>ï¼‰</li>
<li>æ”¯æŒå›ºå®šå¤§å°ä¼˜åŒ–ï¼ˆè¯¦è§ <strong>6.2</strong>ï¼‰</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>RecyclerView ç›¸æ¯” ListView çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºæ›´çµæ´»çš„å¸ƒå±€ç®¡ç†ã€æ›´å¥½çš„æ€§èƒ½ã€æ›´å¼ºçš„å¯å®šåˆ¶æ€§ã€‚è¯¦ç»†å¯¹æ¯”è§ <strong>1.2 RecyclerView ä¸ ListView çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-55">14.3 ViewHolder çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>ViewHolder çš„ç”Ÿå‘½å‘¨æœŸä¸ RecyclerView çš„è§†å›¾å¤ç”¨æœºåˆ¶å¯†åˆ‡ç›¸å…³ã€‚</p>
<p><strong>ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åˆ›å»º (onCreateViewHolder)
   â†“
<span class="hljs-bullet">2.</span> ç»‘å®š (onBindViewHolder)
   â†“
<span class="hljs-bullet">3.</span> æ˜¾ç¤º (onScreen)
   â†“
<span class="hljs-bullet">4.</span> å›æ”¶ (onViewRecycled)
   â†“
<span class="hljs-bullet">5.</span> å¤ç”¨ (onBindViewHolder) - å¾ªç¯
   â†“
<span class="hljs-bullet">6.</span> é”€æ¯ (æœ€ç»ˆ)
</code></pre>
<p><strong>è¯¦ç»†è¯´æ˜ï¼š</strong></p>
<p><strong>1. åˆ›å»ºé˜¶æ®µ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
    <span class="hljs-comment">// ViewHolder è¢«åˆ›å»ºï¼Œä½†è¿˜æœªç»‘å®šæ•°æ®</span>
    <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
        .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">return</span> ViewHolder(view)
}
</code></pre>
<p><strong>2. ç»‘å®šé˜¶æ®µ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-comment">// ViewHolder ç»‘å®šæ•°æ®ï¼Œå‡†å¤‡æ˜¾ç¤º</span>
    holder.bind(items[position])
}
</code></pre>
<p><strong>3. æ˜¾ç¤ºé˜¶æ®µ</strong></p>
<ul>
<li>ViewHolder çš„ itemView æ˜¾ç¤ºåœ¨å±å¹•ä¸Š</li>
<li>ç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’</li>
</ul>
<p><strong>4. å›æ”¶é˜¶æ®µ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewRecycled</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
    <span class="hljs-keyword">super</span>.onViewRecycled(holder)
    <span class="hljs-comment">// ViewHolder è¢«å›æ”¶ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ¸…ç†èµ„æº</span>
    holder.clear()
}
</code></pre>
<p><strong>5. å¤ç”¨é˜¶æ®µ</strong></p>
<ul>
<li>ViewHolder ä»ç¼“å­˜ä¸­å–å‡º</li>
<li>é‡æ–°è°ƒç”¨ <code>onBindViewHolder</code> ç»‘å®šæ–°æ•°æ®</li>
</ul>
<p><strong>å®Œæ•´ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        Log.d(<span class="hljs-string">"ViewHolder"</span>, <span class="hljs-string">"åˆ›å»º ViewHolder"</span>)
        <span class="hljs-keyword">return</span> ViewHolder(LayoutInflater.from(parent.context)
            .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>))
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        Log.d(<span class="hljs-string">"ViewHolder"</span>, <span class="hljs-string">"ç»‘å®š ViewHolder, position: <span class="hljs-variable">$position</span>"</span>)
        holder.bind(items[position])
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewRecycled</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onViewRecycled(holder)
        Log.d(<span class="hljs-string">"ViewHolder"</span>, <span class="hljs-string">"å›æ”¶ ViewHolder"</span>)
        holder.clear()
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> {
            <span class="hljs-comment">// ç»‘å®šæ•°æ®</span>
        }
        
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">clear</span><span class="hljs-params">()</span></span> {
            <span class="hljs-comment">// æ¸…ç†èµ„æºï¼Œå¦‚å–æ¶ˆå›¾ç‰‡åŠ è½½</span>
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-56">14.4 notifyItemInserted() å’Œ notifyItemRemoved() çš„åŒºåˆ«</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºé€šçŸ¥ RecyclerView æ•°æ®çš„å˜åŒ–ï¼Œè§¦å‘ç›¸åº”çš„åŠ¨ç”»ã€‚</p>
<p><strong>notifyItemInserted() - æ’å…¥é€šçŸ¥</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€ä¸ª item</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, item: <span class="hljs-type">String</span>)</span></span> {
    items.add(position, item)
    notifyItemInserted(position) <span class="hljs-comment">// é€šçŸ¥æ’å…¥ï¼Œæ˜¾ç¤ºæ’å…¥åŠ¨ç”»</span>
}
</code></pre>
<p><strong>notifyItemRemoved() - åˆ é™¤é€šçŸ¥</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ é™¤æŒ‡å®šä½ç½®çš„ item</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
    items.removeAt(position)
    notifyItemRemoved(position) <span class="hljs-comment">// é€šçŸ¥åˆ é™¤ï¼Œæ˜¾ç¤ºåˆ é™¤åŠ¨ç”»</span>
}
</code></pre>
<p><strong>åŒºåˆ«å¯¹æ¯”ï¼š</strong></p>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>notifyItemInserted</th><th>notifyItemRemoved</th></tr></thead><tbody><tr><td><strong>ä½œç”¨</strong></td><td>é€šçŸ¥æ’å…¥æ–° item</td><td>é€šçŸ¥åˆ é™¤ item</td></tr><tr><td><strong>åŠ¨ç”»</strong></td><td>æ˜¾ç¤ºæ’å…¥åŠ¨ç”»</td><td>æ˜¾ç¤ºåˆ é™¤åŠ¨ç”»</td></tr><tr><td><strong>å‚æ•°</strong></td><td>æ’å…¥çš„ä½ç½®</td><td>åˆ é™¤çš„ä½ç½®</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>æ·»åŠ æ•°æ®</td><td>åˆ é™¤æ•°æ®</td></tr></tbody></table>
<p><strong>å®Œæ•´ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: MutableList&lt;String&gt;) : 
    RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, item: <span class="hljs-type">String</span>)</span></span> {
        items.add(position, item)
        notifyItemInserted(position)
        <span class="hljs-comment">// å¦‚æœæ’å…¥çš„ä¸æ˜¯æœ€åä¸€ä¸ªï¼Œè¿˜éœ€è¦é€šçŸ¥åé¢çš„ item ä½ç½®å˜åŒ–</span>
        notifyItemRangeChanged(position + <span class="hljs-number">1</span>, items.size - position - <span class="hljs-number">1</span>)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
        items.removeAt(position)
        notifyItemRemoved(position)
        <span class="hljs-comment">// é€šçŸ¥åé¢çš„ item ä½ç½®å˜åŒ–</span>
        notifyItemRangeChanged(position, items.size - position)
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">moveItem</span><span class="hljs-params">(fromPosition: <span class="hljs-type">Int</span>, toPosition: <span class="hljs-type">Int</span>)</span></span> {
        Collections.swap(items, fromPosition, toPosition)
        notifyItemMoved(fromPosition, toPosition)
    }
}
</code></pre>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨å±€éƒ¨æ›´æ–°æ–¹æ³•</span>
adapter.addItem(<span class="hljs-number">0</span>, <span class="hljs-string">"new item"</span>) <span class="hljs-comment">// åªæ›´æ–°æ’å…¥çš„ item</span>
adapter.removeItem(<span class="hljs-number">5</span>) <span class="hljs-comment">// åªæ›´æ–°åˆ é™¤çš„ item</span>

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šä½¿ç”¨å…¨å±€æ›´æ–°</span>
adapter.addItem(<span class="hljs-number">0</span>, <span class="hljs-string">"new item"</span>)
adapter.notifyDataSetChanged() <span class="hljs-comment">// ä¼šåˆ·æ–°æ‰€æœ‰ itemï¼Œæ€§èƒ½å·®</span>
</code></pre>
<hr/>
<h3 data-id="heading-57">14.5 å¦‚ä½•å®ç°å±€éƒ¨åˆ·æ–°</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>å±€éƒ¨åˆ·æ–°æ˜¯æŒ‡åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯åˆ·æ–°æ•´ä¸ªåˆ—è¡¨ã€‚æœ‰å¤šç§å®ç°æ–¹å¼ï¼Œå¯ä»¥æ ¹æ®åœºæ™¯é€‰æ‹©ã€‚</p>
<p><strong>æ–¹å¼ 1ï¼šä½¿ç”¨ notifyItemChanged() - å•ä¸ª item æ›´æ–°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: MutableList&lt;Item&gt;) : 
    RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, newItem: <span class="hljs-type">Item</span>)</span></span> {
        items[position] = newItem
        notifyItemChanged(position) <span class="hljs-comment">// åªåˆ·æ–°è¿™ä¸ªä½ç½®çš„ item</span>
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItems</span><span class="hljs-params">(positions: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;, newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Item</span>&gt;)</span></span> {
        positions.forEachIndexed { index, position -&gt;
            items[position] = newItems[index]
        }
        <span class="hljs-comment">// æ‰¹é‡æ›´æ–°</span>
        positions.forEach { notifyItemChanged(it) }
    }
}
</code></pre>
<p><strong>æ–¹å¼ 2ï¼šä½¿ç”¨ DiffUtilï¼ˆæ¨èï¼Œè¯¦è§ 6.3ï¼‰</strong></p>
<p>DiffUtil æ˜¯æœ€æ™ºèƒ½çš„å±€éƒ¨åˆ·æ–°æ–¹å¼ï¼Œå¯ä»¥è‡ªåŠ¨è®¡ç®—å·®å¼‚å¹¶æ›´æ–°ã€‚è¯¦ç»†ä½¿ç”¨æ–¹æ³•è§ <strong>6.3 ä»€ä¹ˆæ˜¯ DiffUtilï¼Ÿå¦‚ä½•ä½¿ç”¨ï¼Ÿ</strong></p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>éœ€è¦æ›´æ–°æ•´ä¸ªåˆ—è¡¨æ—¶</li>
<li>æ•°æ®å˜åŒ–å¤æ‚ï¼Œéš¾ä»¥æ‰‹åŠ¨è®¡ç®—å˜åŒ–æ—¶</li>
<li>éœ€è¦è‡ªåŠ¨æ˜¾ç¤ºå¢åˆ æ”¹åŠ¨ç”»æ—¶</li>
</ul>
<p><strong>æ–¹å¼ 3ï¼šä½¿ç”¨ Payload è¿›è¡Œéƒ¨åˆ†æ›´æ–°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        holder.bind(items[position])
    }
    
    <span class="hljs-comment">// å¸¦ Payload çš„ç»‘å®šæ–¹æ³•</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(
        holder: <span class="hljs-type">ViewHolder</span>,
        position: <span class="hljs-type">Int</span>,
        payloads: <span class="hljs-type">MutableList</span>&lt;<span class="hljs-type">Any</span>&gt;
    )</span></span> {
        <span class="hljs-keyword">if</span> (payloads.isEmpty()) {
            <span class="hljs-comment">// æ²¡æœ‰ Payloadï¼Œæ­£å¸¸ç»‘å®š</span>
            <span class="hljs-keyword">super</span>.onBindViewHolder(holder, position, payloads)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æœ‰ Payloadï¼Œåªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</span>
            <span class="hljs-keyword">when</span> (payloads[<span class="hljs-number">0</span>]) {
                <span class="hljs-string">"name"</span> -&gt; holder.updateName(items[position].name)
                <span class="hljs-string">"avatar"</span> -&gt; holder.updateAvatar(items[position].avatar)
                <span class="hljs-keyword">else</span> -&gt; <span class="hljs-keyword">super</span>.onBindViewHolder(holder, position, payloads)
            }
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItemName</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>, newName: <span class="hljs-type">String</span>)</span></span> {
        items[position].name = newName
        notifyItemChanged(position, <span class="hljs-string">"name"</span>) <span class="hljs-comment">// ä¼ é€’ Payload</span>
    }
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateName</span><span class="hljs-params">(name: <span class="hljs-type">String</span>)</span></span> {
            <span class="hljs-comment">// åªæ›´æ–°åå­—ï¼Œä¸é‡æ–°ç»‘å®šæ•´ä¸ª item</span>
            nameTextView.text = name
        }
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-58">14.6 å¦‚ä½•å®ç°å­ View çš„ç‚¹å‡»äº‹ä»¶</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>åœ¨ RecyclerView ä¸­ï¼Œé™¤äº†æ•´ä¸ª item çš„ç‚¹å‡»äº‹ä»¶ï¼Œè¿˜å¯ä»¥ä¸º item å†…çš„å­ View è®¾ç½®ç‹¬ç«‹çš„ç‚¹å‡»äº‹ä»¶ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items: List&lt;Item&gt;,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onItemClick: (Item) -&gt; <span class="hljs-built_in">Unit</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onButtonClick: (Item) -&gt; <span class="hljs-built_in">Unit</span>,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> onImageClick: (Item) -&gt; <span class="hljs-built_in">Unit</span>
) : RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">val</span> view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_layout, parent, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> ViewHolder(view)
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = items[position]
        holder.bind(item)
        
        <span class="hljs-comment">// Item æ•´ä½“ç‚¹å‡»</span>
        holder.itemView.setOnClickListener {
            onItemClick(item)
        }
        
        <span class="hljs-comment">// æŒ‰é’®ç‚¹å‡»ï¼ˆå­ Viewï¼‰</span>
        holder.button.setOnClickListener {
            onButtonClick(item)
        }
        
        <span class="hljs-comment">// å›¾ç‰‡ç‚¹å‡»ï¼ˆå­ Viewï¼‰</span>
        holder.imageView.setOnClickListener {
            onImageClick(item)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getItemCount</span><span class="hljs-params">()</span></span> = items.size
    
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
        <span class="hljs-keyword">val</span> button: Button = itemView.findViewById(R.id.button)
        <span class="hljs-keyword">val</span> imageView: ImageView = itemView.findViewById(R.id.imageView)
        
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">bind</span><span class="hljs-params">(item: <span class="hljs-type">Item</span>)</span></span> {
            <span class="hljs-comment">// ç»‘å®šæ•°æ®</span>
        }
    }
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>å­ View çš„ç‚¹å‡»äº‹ä»¶ä¼šä¼˜å…ˆäº item çš„ç‚¹å‡»äº‹ä»¶</li>
<li>å¦‚æœå­ View æ¶ˆè´¹äº†ç‚¹å‡»äº‹ä»¶ï¼Œitem çš„ç‚¹å‡»äº‹ä»¶ä¸ä¼šè§¦å‘</li>
<li>å¯ä»¥ä½¿ç”¨ <code>setOnClickListener</code> å’Œ <code>setOnLongClickListener</code> ä¸ºä¸åŒå­ View è®¾ç½®ä¸åŒçš„äº‹ä»¶</li>
</ul>
<hr/>
<h3 data-id="heading-59">14.7 å¦‚ä½•é¿å…å›¾ç‰‡åŠ è½½å¯¼è‡´çš„æ»‘åŠ¨å¡é¡¿</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>å›¾ç‰‡åŠ è½½æ˜¯å¯¼è‡´ RecyclerView æ»‘åŠ¨å¡é¡¿çš„å¸¸è§åŸå› ï¼Œéœ€è¦ä¼˜åŒ–åŠ è½½ç­–ç•¥ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ³•ï¼š</strong></p>
<p><strong>1. ä½¿ç”¨å›¾ç‰‡åŠ è½½åº“ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ Glideï¼Œè‡ªåŠ¨å¤„ç†ç¼“å­˜å’Œå¼‚æ­¥åŠ è½½</span>
Glide.with(context)
    .load(imageUrl)
    .placeholder(R.drawable.placeholder) <span class="hljs-comment">// å ä½å›¾</span>
    .error(R.drawable.error) <span class="hljs-comment">// é”™è¯¯å›¾</span>
    .into(imageView)
</code></pre>
<p><strong>2. åœ¨æ»‘åŠ¨æ—¶æš‚åœåŠ è½½</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> item = items[position]
        
        <span class="hljs-comment">// åªåœ¨é™æ­¢æ—¶åŠ è½½é«˜æ¸…å›¾</span>
        <span class="hljs-keyword">if</span> (recyclerView.scrollState == RecyclerView.SCROLL_STATE_IDLE) {
            Glide.with(context)
                .load(item.highResUrl)
                .into(holder.imageView)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ»‘åŠ¨æ—¶åŠ è½½ç¼©ç•¥å›¾</span>
            Glide.with(context)
                .load(item.thumbUrl)
                .into(holder.imageView)
        }
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewRecycled</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onViewRecycled(holder)
        <span class="hljs-comment">// å›æ”¶æ—¶å–æ¶ˆå›¾ç‰‡åŠ è½½</span>
        Glide.with(context).clear(holder.imageView)
    }
}
</code></pre>
<p><strong>3. ä½¿ç”¨ RecyclerView çš„æ»‘åŠ¨ç›‘å¬</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">recyclerView.addOnScrollListener(<span class="hljs-keyword">object</span> : RecyclerView.OnScrollListener() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onScrollStateChanged</span><span class="hljs-params">(recyclerView: <span class="hljs-type">RecyclerView</span>, newState: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">super</span>.onScrollStateChanged(recyclerView, newState)
        
        <span class="hljs-keyword">when</span> (newState) {
            RecyclerView.SCROLL_STATE_IDLE -&gt; {
                <span class="hljs-comment">// é™æ­¢æ—¶æ¢å¤å›¾ç‰‡åŠ è½½</span>
                Glide.with(context).resumeRequests()
            }
            RecyclerView.SCROLL_STATE_DRAGGING,
            RecyclerView.SCROLL_STATE_SETTLING -&gt; {
                <span class="hljs-comment">// æ»‘åŠ¨æ—¶æš‚åœå›¾ç‰‡åŠ è½½</span>
                Glide.with(context).pauseRequests()
            }
        }
    }
})
</code></pre>
<p><strong>4. ä¼˜åŒ–å›¾ç‰‡å°ºå¯¸</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åŠ è½½åˆé€‚å°ºå¯¸çš„å›¾ç‰‡ï¼Œä¸è¦åŠ è½½è¿‡å¤§çš„å›¾ç‰‡</span>
Glide.with(context)
    .load(imageUrl)
    .<span class="hljs-keyword">override</span>(<span class="hljs-number">200</span>, <span class="hljs-number">200</span>) <span class="hljs-comment">// é™åˆ¶å›¾ç‰‡å°ºå¯¸</span>
    .into(imageView)
</code></pre>
<hr/>
<h3 data-id="heading-60">14.8 initialPrefetchItemCount çš„ä½œç”¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p><code>initialPrefetchItemCount</code> æ˜¯ LayoutManager çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºè®¾ç½® ViewHolder çš„é¢„åŠ è½½æ•°é‡ã€‚å®ƒå¯ä»¥åœ¨ç”¨æˆ·æ»‘åŠ¨ä¹‹å‰æå‰åˆ›å»º ViewHolderï¼Œä»è€Œæå‡æ»‘åŠ¨æµç•…åº¦ã€‚</p>
<p><strong>ä½œç”¨ï¼š</strong></p>
<ul>
<li><strong>æå‡æµç•…åº¦</strong>ï¼šæå‰åˆ›å»º ViewHolderï¼Œå‡å°‘æ»‘åŠ¨æ—¶çš„åˆ›å»ºæ—¶é—´</li>
<li><strong>ä¼˜åŒ–ä½“éªŒ</strong>ï¼šç”¨æˆ·æ»‘åŠ¨æ—¶æ›´æµç•…ï¼Œå‡å°‘å¡é¡¿</li>
<li><strong>å‡å°‘å»¶è¿Ÿ</strong>ï¼šé¿å…åœ¨æ»‘åŠ¨è¿‡ç¨‹ä¸­ç­‰å¾… ViewHolder åˆ›å»º</li>
</ul>
<p><strong>ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> layoutManager = LinearLayoutManager(<span class="hljs-keyword">this</span>)
layoutManager.initialPrefetchItemCount = <span class="hljs-number">4</span> <span class="hljs-comment">// é¢„åŠ è½½ 4 ä¸ª item</span>

recyclerView.layoutManager = layoutManager
recyclerView.adapter = adapter
</code></pre>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<pre><code class="hljs">å½“å‰å±å¹•æ˜¾ç¤º item 0-9
é¢„åŠ è½½ item 10-13ï¼ˆæå‰åˆ›å»º ViewHolderï¼‰
ç”¨æˆ·å‘ä¸‹æ»‘åŠ¨æ—¶ï¼Œitem 10-13 å·²ç»å‡†å¤‡å¥½ï¼Œç›´æ¥æ˜¾ç¤º
</code></pre>
<p><strong>ä¸æ•°æ®é¢„åŠ è½½çš„åŒºåˆ«ï¼š</strong></p>
<ul>
<li><strong>initialPrefetchItemCount</strong>ï¼šé¢„åŠ è½½ ViewHolderï¼ˆè§†å›¾å±‚ï¼‰ï¼Œåœ¨ RecyclerView å†…éƒ¨è‡ªåŠ¨å®Œæˆ</li>
<li><strong>æ•°æ®é¢„åŠ è½½</strong>ï¼šé¢„åŠ è½½æ•°æ®ï¼ˆæ•°æ®å±‚ï¼‰ï¼Œéœ€è¦æ‰‹åŠ¨ç›‘å¬æ»šåŠ¨å¹¶åŠ è½½æ›´å¤šæ•°æ®ï¼ˆè§ 9.2ï¼‰</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>é¢„åŠ è½½æ•°é‡ä¸å®œè¿‡å¤§ï¼Œä¼šå ç”¨å†…å­˜</li>
<li>å»ºè®®è®¾ç½®ä¸º 2-5 ä¸ª</li>
<li>å¯¹äºå¤æ‚å¸ƒå±€ï¼Œå¯ä»¥é€‚å½“å¢åŠ </li>
<li>å¯¹äºç®€å•å¸ƒå±€ï¼Œå¯ä»¥è®¾ç½®ä¸º 0 ä»¥èŠ‚çœå†…å­˜</li>
</ul>
<hr/>
<h3 data-id="heading-61">14.9 RecyclerView æ»‘åŠ¨å¡é¡¿çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆ</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>æ»‘åŠ¨å¡é¡¿æ˜¯ RecyclerView æ€§èƒ½é—®é¢˜çš„å¸¸è§è¡¨ç°ã€‚</p>
<p><strong>å¸¸è§åŸå› ï¼š</strong></p>
<p><strong>1. å¸ƒå±€åµŒå¥—è¿‡æ·±</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåµŒå¥—è¿‡æ·±</span>
&lt;LinearLayout&gt;
    &lt;LinearLayout&gt;
        &lt;LinearLayout&gt;
            &lt;TextView /&gt;
        &lt;/LinearLayout&gt;
    &lt;/LinearLayout&gt;
&lt;/LinearLayout&gt;

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šä½¿ç”¨ ConstraintLayout å‡å°‘åµŒå¥—</span>
&lt;androidx.constraintlayout.widget.ConstraintLayout&gt;
    &lt;TextView /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<p><strong>2. åœ¨ onBindViewHolder ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šåœ¨ç»‘å®šä¸­åšè€—æ—¶æ“ä½œ</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> result = complexCalculation() <span class="hljs-comment">// è€—æ—¶æ“ä½œ</span>
    holder.textView.text = result
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæå‰è®¡ç®—å¥½æ•°æ®</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.textView.text = items[position].preCalculatedResult
}
</code></pre>
<p><strong>3. å›¾ç‰‡åŠ è½½æœªä¼˜åŒ–</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… ä½¿ç”¨å›¾ç‰‡åŠ è½½åº“ï¼Œè‡ªåŠ¨ä¼˜åŒ–</span>
Glide.with(context)
    .load(imageUrl)
    .into(imageView)
</code></pre>
<p><strong>4. æœªä½¿ç”¨ ViewHolder ç¼“å­˜</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šåœ¨ ViewHolder ä¸­ç¼“å­˜è§†å›¾å¼•ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewHolder</span>(itemView: View) : RecyclerView.ViewHolder(itemView) {
    <span class="hljs-keyword">val</span> textView: TextView = itemView.findViewById(R.id.textView)
}
</code></pre>
<p><strong>æ’æŸ¥æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. ä½¿ç”¨ Systrace åˆ†æ</span>
Trace.beginSection(<span class="hljs-string">"onBindViewHolder"</span>)
<span class="hljs-comment">// ... ä»£ç </span>
Trace.endSection()

<span class="hljs-comment">// 2. ä½¿ç”¨ Profiler æŸ¥çœ‹æ€§èƒ½</span>
<span class="hljs-comment">// Android Studio â†’ View â†’ Tool Windows â†’ Profiler</span>

<span class="hljs-comment">// 3. æ·»åŠ æ—¥å¿—æŸ¥çœ‹è€—æ—¶</span>
<span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
<span class="hljs-comment">// ... ä»£ç </span>
Log.d(<span class="hljs-string">"Performance"</span>, <span class="hljs-string">"è€—æ—¶: <span class="hljs-subst">${System.currentTimeMillis() - startTime}</span>ms"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-62">14.10 å¦‚ä½•æ’æŸ¥æ€§èƒ½é—®é¢˜</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>æ’æŸ¥æ€§èƒ½é—®é¢˜éœ€è¦ç³»ç»Ÿçš„æ–¹æ³•å’Œå·¥å…·ã€‚</p>
<p><strong>æ’æŸ¥æ­¥éª¤ï¼š</strong></p>
<p><strong>1. ä½¿ç”¨ Android Profiler</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Android Studio â†’ View â†’ Tool Windows â†’ Profiler</span>
<span class="hljs-comment">// å¯ä»¥æŸ¥çœ‹ CPUã€å†…å­˜ã€ç½‘ç»œä½¿ç”¨æƒ…å†µ</span>
</code></pre>
<p><strong>2. ä½¿ç”¨ Systrace</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å½•åˆ¶æ€§èƒ½æ•°æ®</span>
python systrace.py -t 10 -o trace.html <span class="hljs-built_in">sched</span> freq idle am wm gfx view

<span class="hljs-comment"># åœ¨è®¾å¤‡ä¸Šæ“ä½œ RecyclerView</span>

<span class="hljs-comment"># æŸ¥çœ‹ trace.html æ–‡ä»¶</span>
</code></pre>
<p><strong>3. æ·»åŠ æ€§èƒ½æ—¥å¿—</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">MyAdapter.ViewHolder</span>&gt;() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateViewHolder</span><span class="hljs-params">(parent: <span class="hljs-type">ViewGroup</span>, viewType: <span class="hljs-type">Int</span>)</span></span>: ViewHolder {
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        <span class="hljs-keyword">val</span> holder = ViewHolder(...)
        Log.d(<span class="hljs-string">"Performance"</span>, <span class="hljs-string">"onCreateViewHolder è€—æ—¶: <span class="hljs-subst">${System.currentTimeMillis() - startTime}</span>ms"</span>)
        <span class="hljs-keyword">return</span> holder
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-keyword">val</span> startTime = System.currentTimeMillis()
        holder.bind(items[position])
        Log.d(<span class="hljs-string">"Performance"</span>, <span class="hljs-string">"onBindViewHolder è€—æ—¶: <span class="hljs-subst">${System.currentTimeMillis() - startTime}</span>ms"</span>)
    }
}
</code></pre>
<p><strong>4. æ£€æŸ¥å¸ƒå±€å±‚æ¬¡</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä½¿ç”¨ Layout Inspector æŸ¥çœ‹å¸ƒå±€å±‚æ¬¡</span>
<span class="hljs-comment">// Android Studio â†’ Tools â†’ Layout Inspector</span>
</code></pre>
<p><strong>5. æ£€æŸ¥å†…å­˜ä½¿ç”¨</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</span>
<span class="hljs-comment">// ä½¿ç”¨ LeakCanary</span>
dependencies {
    debugImplementation <span class="hljs-string">'com.squareup.leakcanary:leakcanary-android:2.12'</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-63">14.11 NO_POSITION çš„å«ä¹‰</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p><code>NO_POSITION</code> æ˜¯ RecyclerView ä¸­çš„ä¸€ä¸ªå¸¸é‡ï¼Œå€¼ä¸º -1ï¼Œè¡¨ç¤º ViewHolder å½“å‰æ²¡æœ‰æœ‰æ•ˆçš„ä½ç½®ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å½“ ViewHolder å·²ç»ä¸ Adapter åˆ†ç¦»æ—¶ï¼ŒadapterPosition è¿”å› NO_POSITION</span>
<span class="hljs-keyword">val</span> position = holder.adapterPosition
<span class="hljs-keyword">if</span> (position != RecyclerView.NO_POSITION) {
    <span class="hljs-comment">// å®‰å…¨è®¿é—®æ•°æ®</span>
    <span class="hljs-keyword">val</span> item = items[position]
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ViewHolder å·²ç»åˆ†ç¦»ï¼Œä¸èƒ½è®¿é—®æ•°æ®</span>
}
</code></pre>
<p><strong>å¸¸è§æƒ…å†µï¼š</strong></p>
<ol>
<li><strong>ViewHolder è¢«å›æ”¶</strong>ï¼šViewHolder è¢«æ”¾å…¥ç¼“å­˜æ± æ—¶</li>
<li><strong>æ•°æ®æ›´æ–°ä¸­</strong>ï¼šåœ¨æ•°æ®æ›´æ–°è¿‡ç¨‹ä¸­ï¼ŒViewHolder å¯èƒ½æš‚æ—¶æ²¡æœ‰ä½ç½®</li>
<li><strong>åŠ¨ç”»è¿›è¡Œä¸­</strong>ï¼šåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œä½ç½®å¯èƒ½æš‚æ—¶æ— æ•ˆ</li>
</ol>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ€»æ˜¯æ£€æŸ¥ NO_POSITION</span>
holder.itemView.setOnClickListener {
    <span class="hljs-keyword">val</span> position = holder.adapterPosition
    <span class="hljs-keyword">if</span> (position != RecyclerView.NO_POSITION) {
        <span class="hljs-keyword">val</span> item = items[position]
        onItemClick(item)
    }
}

<span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥ä½¿ç”¨ position å‚æ•°</span>
<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBindViewHolder</span><span class="hljs-params">(holder: <span class="hljs-type">ViewHolder</span>, position: <span class="hljs-type">Int</span>)</span></span> {
    holder.itemView.setOnClickListener {
        <span class="hljs-keyword">val</span> item = items[position] <span class="hljs-comment">// position å‚æ•°å¯èƒ½å·²ç»è¿‡æ—¶</span>
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-64">14.12 å¦‚ä½•å®ç°æ•°æ®æºçš„çº¿ç¨‹å®‰å…¨</h3>
<p><strong>ç­”æ¡ˆï¼š</strong></p>
<p>åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œéœ€è¦ç¡®ä¿æ•°æ®æºçš„çº¿ç¨‹å®‰å…¨ã€‚</p>
<p><strong>æ–¹å¼ 1ï¼šä½¿ç”¨åŒæ­¥é”</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">ViewHolder</span>&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lock = Any()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">addItem</span><span class="hljs-params">(item: <span class="hljs-type">String</span>)</span></span> {
        synchronized(lock) {
            items.add(item)
            notifyItemInserted(items.size - <span class="hljs-number">1</span>)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">removeItem</span><span class="hljs-params">(position: <span class="hljs-type">Int</span>)</span></span> {
        synchronized(lock) {
            <span class="hljs-keyword">if</span> (position <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until items.size) {
                items.removeAt(position)
                notifyItemRemoved(position)
            }
        }
    }
}
</code></pre>
<p><strong>æ–¹å¼ 2ï¼šä½¿ç”¨ä¸»çº¿ç¨‹æ›´æ–°</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">ViewHolder</span>&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items = mutableListOf&lt;String&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateFromBackground</span><span class="hljs-params">(newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹å‡†å¤‡æ•°æ®</span>
        Thread {
            <span class="hljs-keyword">val</span> processedItems = processItems(newItems)
            
            <span class="hljs-comment">// åœ¨ä¸»çº¿ç¨‹æ›´æ–° UI</span>
            Handler(Looper.getMainLooper()).post {
                items.clear()
                items.addAll(processedItems)
                notifyDataSetChanged()
            }
        }.start()
    }
}
</code></pre>
<p><strong>æ–¹å¼ 3ï¼šä½¿ç”¨åç¨‹</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAdapter</span> : <span class="hljs-type">RecyclerView.Adapter</span>&lt;<span class="hljs-type">ViewHolder</span>&gt;() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> items = mutableListOf&lt;String&gt;()
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateItems</span><span class="hljs-params">(newItems: <span class="hljs-type">List</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> {
        viewModelScope.launch(Dispatchers.Default) {
            <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹å¤„ç†æ•°æ®</span>
            <span class="hljs-keyword">val</span> processedItems = processItems(newItems)
            
            <span class="hljs-comment">// åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹æ›´æ–° UI</span>
            withContext(Dispatchers.Main) {
                items.clear()
                items.addAll(processedItems)
                notifyDataSetChanged()
            }
        }
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[leetcode_day4_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹]]></title>    <link>https://juejin.cn/post/7594405684592295988</link>    <guid>https://juejin.cn/post/7594405684592295988</guid>    <pubDate>2026-01-13T07:39:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594405684592295988" data-draft-id="7594468778110976034" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="leetcode_day4_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-13T07:39:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸…æœ¨é“"/> <meta itemprop="url" content="https://juejin.cn/user/362175455046432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            leetcode_day4_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362175455046432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸…æœ¨é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:39:13.000Z" title="Tue Jan 13 2026 07:39:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0"><strong>ç›®å½•</strong></h2>
<hr/>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å‰è¨€</h2>
<p><code>æç¤ºï¼šæˆ‘å°±æ˜¯ä¸€ä¸ªè¿æ°”å¾ˆå¥½çš„äººï¼Œè¿æ°”çˆ†è¡¨</code></p>
<p>æœ¬ç³»åˆ—ã€Šç»å¢ƒæ±‚ç”Ÿã€‹è®°å½•è½¬ç ç®—æ³•ç­‘åŸºè¿‡ç¨‹ï¼Œä»¥ä»£ç éšæƒ³å½•ä¸ºçº²å­¦ä¹ ï¼Œleetcode_hot_100ç»ƒæ‰‹ï¼Œåœ¨æ­¤è®°å½•æ€è€ƒè¿‡ç¨‹ï¼Œæ–¹ä¾¿è¿‡åå¤ç°ã€‚å†…å®¹æ¯”è¾ƒç²—ç³™ä»…ä¾¿äºç¬”è€…å˜æ¸…æ€è·¯ï¼Œå¤ç›˜æ€»ç»“ã€‚</p>
<p>æ·»åŠ äº†ä»£ç é€»è¾‘è¿™ä¸€éƒ¨åˆ†å†…å®¹</p>
<hr/>
<p><code>æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹</code></p>
<h2 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>åŠ¨æ€è§„åˆ’</h2>
<p>ç‰¹ç‚¹ï¼šè¿ç­¹å­¦ä¸Šæœ€ä¼˜åŒ–ç®—æ³•ï¼Œé¢˜å‹æ˜¯æ±‚æœ€å€¼ï¼Œé‡å å­é—®é¢˜ï¼Œæœ€ä¼˜å­ç»“æ„ï¼Œï¼ï¼çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p>
<p>æŠŠå¤æ‚é—®é¢˜æ‹†è§£æˆå°é—®é¢˜ï¼Œå†ç”±å°é—®é¢˜çš„ç­”æ¡ˆæ¨å¯¼å‡ºå¤§é—®é¢˜çš„ç­”æ¡ˆï¼ˆå³è®°ä½ä¹‹å‰åšè¿‡çš„äº‹æƒ…ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæé«˜æ•ˆç‡ï¼‰</p>
<p>çŠ¶æ€å®šä¹‰ï¼šç”¨æŸä¸ªå˜é‡æˆ–æ•°ç»„ä»£è¡¨æŸä¸ªå°é—®é¢˜çš„ç­”æ¡ˆ</p>
<p>çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šå¤§é—®é¢˜çš„ç­”æ¡ˆ=å°é—®é¢˜ç­”æ¡ˆçš„ç»„åˆçš„æ•°å­¦è¡¨è¾¾å¼</p>
<p>åˆå§‹åŒ–æ¡ä»¶ï¼šæœ€å°çš„é—®é¢˜ï¼Œä¸ç”¨æ¨å¯¼å°±çŸ¥é“ç­”æ¡ˆ</p>
<h2 data-id="heading-3">ä¸€ã€70 çˆ¬æ¥¼æ¢¯</h2>
<h4 data-id="heading-4">é¢˜ç›®æè¿°</h4>
<blockquote>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š <span class="hljs-attr">n</span> = <span class="hljs-number">2</span>
è¾“å‡ºï¼š 2
è§£é‡Šï¼š æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
1. 1 é˜¶ + 1 é˜¶
2. 2 é˜¶
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">è¾“å…¥ï¼š n = 3
è¾“å‡ºï¼š 3
è§£é‡Šï¼š æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶ã€‚
<span class="hljs-bullet">1.</span> 1 é˜¶ + 1 é˜¶ + 1 é˜¶
<span class="hljs-bullet">2.</span> 1 é˜¶ + 2 é˜¶
<span class="hljs-bullet">3.</span> 2 é˜¶ + 1 é˜¶
</code></pre>
</blockquote>
<h3 data-id="heading-5">1.æ¨¡å‹</h3>
<h4 data-id="heading-6">ç®€å•ç†è§£ï¼Ÿ</h4>
<p>ä¸€æ¬¡åªèƒ½çˆ¬1,2ä¸ªå°é˜¶ï¼Œé‚£çˆ¬né˜¶æœ‰å‡ ç§æ–¹æ³•</p>
<p>ä¸»è¦è¿˜æ˜¯ä»£å‡ ä¸ªå­æ•°æ®å»æ¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹</p>
<h4 data-id="heading-7">èƒ½ä¸èƒ½ç”¨å›¾ç¤ºæ„ï¼Ÿ</h4>
<p>None</p>
<h4 data-id="heading-8">åˆå§‹åŒ–æ¡ä»¶ï¼Ÿ</h4>
<p>å®šä¹‰i ä¸º ç¬¬i é˜¶æ¥¼æ¢¯</p>
<p>dp[i] å°±æ˜¯çˆ¬ç¬¬ié˜¶æ¥¼æ¢¯æ‰€æœ‰æ–¹æ³•çš„æ•°ç»„</p>
<p>d[1]=1 ï¼Œd[2]=2 (0-1-2,0- 2)</p>
<h4 data-id="heading-9">è¾¹ç•Œæ¡ä»¶ï¼Ÿ</h4>
<p>å¯ä»¥å‰ªæä¸€ä¸‹ã€‚ æ¯”å¦‚å½“i=1æˆ–i=2æ—¶å€™ç›´æ¥è¿”å›1,2 å› ä¸ºåˆ›å»ºæ•°ç»„ä¹Ÿæ²¡æœ‰æ„ä¹‰</p>
<h4 data-id="heading-10">ä»£ç é€»è¾‘ï¼Ÿ</h4>
<p>None</p>
<h4 data-id="heading-11">ç”¨ä»€ä¹ˆæ–¹æ³•ï¼šæš´åŠ›æ³•/ å…¶å®ƒå·§å¦™çš„æ–¹æ³•ã€‚ Â Â Â Â Â Â Â Â å·§å¦™æ–¹æ³•çš„å­æ€è·¯æ˜¯? Â  Â  Â  Â  ã€‚ã€‚ã€‚ã€‚ã€‚ï¼Ÿï¼Ÿ</h4>
<h5 data-id="heading-12">æš´åŠ›æ³•</h5>
<pre><code class="hljs language-ini" lang="ini">def solution(i):
    if <span class="hljs-attr">i</span> ==<span class="hljs-number">1</span>:
        return 1
    if <span class="hljs-attr">i</span> ==<span class="hljs-number">1</span>:
        return 2
    <span class="hljs-comment">#åˆå§‹åŒ–dpæ•°ç»„ç”¨dp[0]å ä½</span>
    <span class="hljs-attr">dp</span>=[<span class="hljs-number">0</span>]*(i+<span class="hljs-number">1</span>) <span class="hljs-comment">#å› ä¸ºç´¢å¼•æ˜¯0-nï¼Œæ‰€ä»¥</span>
    d<span class="hljs-section">[1]</span>=1
    d<span class="hljs-section">[2]</span>=2
    for _ in range(3,i+1):
        dp<span class="hljs-section">[i]</span>=dp<span class="hljs-section">[i-1]</span>+dp<span class="hljs-section">[i-2]</span>
    return dp<span class="hljs-section">[i]</span>  <span class="hljs-comment">#è¿”å›çˆ¬åˆ°né˜¶çš„æ–¹æ³•</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-13">ä¼˜åŒ–æ³•</h5>
<p>ç”¨åŒæŒ‡é’ˆæ³•</p>
<p>ç”¨å˜é‡æ›¿ä»£æ•°ç»„</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#çˆ¬æ¥¼æ¢¯çš„ä¼˜åŒ–æ³•</span>
def solution(i):
    if <span class="hljs-attr">i</span> ==<span class="hljs-number">1</span>:
        return 1
    if <span class="hljs-attr">i</span> ==<span class="hljs-number">1</span>:
        return 2
    <span class="hljs-attr">pre_pre</span>=<span class="hljs-number">1</span>
    <span class="hljs-attr">pre</span>=<span class="hljs-number">2</span>
    for _ in range(3,i+1):
        <span class="hljs-attr">cur</span> = pre + pre_pre  <span class="hljs-comment"># å½“å‰ié˜¶çš„æ–¹æ³•æ•° = å‰ä¸¤é˜¶æ–¹æ³•æ•°ä¹‹å’Œ</span>
        <span class="hljs-comment"># æŒ‡é’ˆå‰è¿›ï¼šä¸ºä¸‹ä¸€æ¬¡è¿­ä»£åšå‡†å¤‡</span>
        <span class="hljs-attr">pre_pre</span> = pre <span class="hljs-comment"># åŸæ¥çš„prevï¼ˆi-1ï¼‰å˜æˆæ–°çš„prev_prevï¼ˆi-2ï¼‰</span>
        <span class="hljs-attr">pre</span> = cur    <span class="hljs-comment"># åŸæ¥çš„currentï¼ˆiï¼‰å˜æˆæ–°çš„prevï¼ˆi-1ï¼‰</span>

<span class="hljs-comment"># æœ€ç»ˆprevå°±æ˜¯né˜¶çš„æ–¹æ³•æ•°ï¼ˆå¾ªç¯ç»“æŸåï¼Œprevå¯¹åº”dp[n]ï¼‰</span>
    return pre
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-14">ç»†èŠ‚ï¼Ÿ</h4>
<p>None</p>
<h4 data-id="heading-15">ä¹‹å‰è§è¿‡ä½†æ²¡æ³¨æ„åˆ°çš„ï¼Ÿ</h4>
<p>åˆ›å»ºä¸€ä¸ªå…¨0æ•°ç»„ dp=[0]*n</p>
<h4 data-id="heading-16">ç–‘æƒ‘ç‚¹/æ–°çŸ¥è¯† ï¼Ÿ</h4>
<p>ææ¸…æ¥šç´¢å¼•å’Œæ•°ç»„é•¿åº¦åˆ†åˆ«å®šä¹‰ä»€ä¹ˆï¼Ÿ</p>
<p>è‡ªåº•å‘ä¸Šçš„æ€è·¯i-2,i-1å†åˆ°iï¼Œä¸è¦åè¿‡æ¥äº†</p>
<h2 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>äºŒã€118æ¨è¾‰ä¸‰è§’</h2>
<h4 data-id="heading-18">é¢˜ç›®æè¿°</h4>
<p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°Â <em><code>numRows</code>ï¼Œ</em> ç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰Â <em><code>numRows</code></em> è¡Œã€‚</p>
<blockquote>
<p>åœ¨**ã€Œæ¨è¾‰ä¸‰è§’ã€**ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5af536a097c485b91fa5716a2f382f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF5pyo6ZOO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768894753&amp;x-signature=%2BWB2%2F62BWjG1pOinNjQFeoXcz4s%3D" alt="" loading="lazy"/>â€‹</p>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>ç¼–è¾‘</p>
<p><strong>ç¤ºä¾‹ 1:</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: <span class="hljs-attr">numRows</span> = <span class="hljs-number">5</span>
è¾“å‡º: <span class="hljs-section">[[1]</span>,<span class="hljs-section">[1,1]</span>,<span class="hljs-section">[1,2,1]</span>,<span class="hljs-section">[1,3,3,1]</span>,<span class="hljs-section">[1,4,6,4,1]]</span>
</code></pre>
<p><strong>ç¤ºä¾‹Â 2:</strong></p>
<pre><code class="hljs language-lua" lang="lua">è¾“å…¥: numRows = <span class="hljs-number">1</span>
è¾“å‡º: <span class="hljs-string">[[1]]</span>
</code></pre>
</blockquote>
<h3 data-id="heading-19">1.æ¨¡å‹</h3>
<h4 data-id="heading-20">ç®€å•ç†è§£ï¼Ÿ</h4>
<p>æ¯ä¸ªæ•°æ˜¯å·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹æ•°ä¹‹å’Œ</p>
<h4 data-id="heading-21">èƒ½ä¸èƒ½ç”¨å›¾ç¤ºæ„ï¼Ÿ</h4>
<pre><code class="hljs language-csharp" lang="csharp">[
 [<span class="hljs-meta">1</span>],
 [<span class="hljs-meta">1,1</span>],
 [<span class="hljs-meta">1,2,1</span>],
 [<span class="hljs-meta">1,3,3,1</span>],
 [<span class="hljs-meta">1,4,6,4,1</span>]
]
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>æ•°ç»„å¼ è¿™æ ·ï¼Œç‰¹ç‚¹ï¼šæ¯ä¸€è¡Œçš„é¦–å°¾å…ƒç´ éƒ½æ˜¯1</p>
<h4 data-id="heading-22">åˆå§‹åŒ–æ¡ä»¶ï¼Ÿ</h4>
<p>dp=[[1]]Â  Â ç¬¬é›¶è¡Œä¸º1</p>
<h4 data-id="heading-23">è¾¹ç•Œæ¡ä»¶ï¼Ÿ</h4>
<p>å‰ªæ numRows=0 è¾“å‡ºç©ºåˆ—è¡¨ï¼Œä¸ºnæ—¶è¦è¾“å‡ºnè¡Œ</p>
<h4 data-id="heading-24">ä»£ç é€»è¾‘ï¼Ÿ</h4>
<p>å…ˆåˆå§‹åŒ–é¦–å°¾ï¼Œå†å¡«ä¸­é—´æˆ–è€…å…ˆå…¨åˆå§‹åŒ– 1ï¼Œå†è¦†ç›–ä¸­é—´</p>
<p>å®šä¹‰ä¸Šä¸€è¡Œè¿˜æœ‰å½“å‰è¡Œï¼Œé¦–å°¾æ•°ä¸è¾¹ç•Œæ¡ä»¶çµæ´»æ­é…</p>
<p>çŸ©é˜µæ„é€ ä¸Šæ˜¯å…ˆæ„é€ è¡Œï¼Œå†æ·»åŠ æ¯ä¸€è¡Œåˆ°äºŒç»´æ•°ç»„ä¸­ï¼Œè€Œä¸æ˜¯æŒ‰å…ƒç´ så‹æ„é€ æ•°ç»„</p>
<h4 data-id="heading-25">ç”¨ä»€ä¹ˆæ–¹æ³•ï¼šæš´åŠ›æ³•/ å…¶å®ƒå·§å¦™çš„æ–¹æ³•ã€‚ Â Â Â Â Â Â Â Â å·§å¦™æ–¹æ³•çš„å­æ€è·¯æ˜¯? Â  Â  Â  Â  ã€‚ã€‚ã€‚ã€‚ã€‚ï¼Ÿï¼Ÿ</h4>
<h5 data-id="heading-26">æš´åŠ›æ³•</h5>
<pre><code class="hljs language-ini" lang="ini">def solution(numrows):
    if <span class="hljs-attr">numrows</span>==<span class="hljs-number">0</span>:
        return <span class="hljs-section">[]</span>
    <span class="hljs-attr">dp</span>=[[<span class="hljs-number">1</span>]]       <span class="hljs-comment">#å®šä¹‰ç¬¬0è¡Œ</span>
    for i in range(1,numrows):  <span class="hljs-comment">#ä»ç¬¬1è¡Œå¼€å§‹æ“ä½œ</span>
        <span class="hljs-attr">cur_row</span>=[<span class="hljs-number">1</span>]  <span class="hljs-comment">#è¡Œé¦–ä¸º1   ç›´æ¥æ˜¯ä¸€ä¸ªåˆ—è¡¨äº† [1,]</span>
        <span class="hljs-attr">pre_row</span>=dp[i-<span class="hljs-number">1</span>]  <span class="hljs-comment">#å®šä¹‰ä¸Šä¸€è¡Œ</span>
    <span class="hljs-comment">#å®šä¹‰ä¸­é—´æ•°</span>
        for j in range(1,i):
            <span class="hljs-attr">cur_val</span>=pre_row[j-<span class="hljs-number">1</span>]+pre_row[j]
            cur_row.append(cur_val)
        cur_row.append(1)
        dp.append(cur_row)
    return dp
<span class="hljs-comment"># print(solution(5))</span>
<span class="hljs-attr">dp</span>=solution(<span class="hljs-number">5</span>)
for _ in dp:
    print(_,<span class="hljs-attr">end</span>=<span class="hljs-string">'\n'</span>)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h5 data-id="heading-27">ä¼˜åŒ–æ³•</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">C</span>(i,j) = <span class="hljs-selector-tag">i</span>!/(j!*(i-j)!) 
<span class="hljs-built_in">C</span>(i,j-<span class="hljs-number">1</span>) = <span class="hljs-selector-tag">i</span>!/((j-<span class="hljs-number">1</span>)!*(i-j+<span class="hljs-number">1</span>)!) 

æŠŠ <span class="hljs-built_in">C</span>(i,j) ç”¨ <span class="hljs-built_in">C</span>(i,j-<span class="hljs-number">1</span>) è¡¨ç¤ºï¼š
<span class="hljs-built_in">C</span>(i,j) = <span class="hljs-built_in">C</span>(i,j-<span class="hljs-number">1</span>) * (i-j+<span class="hljs-number">1</span>) / j 
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç”¨å…¬å¼æ³•ä¼˜åŒ–</span>
def solution(numrows):
    if <span class="hljs-attr">numrows</span>==<span class="hljs-number">0</span>:
        return <span class="hljs-section">[]</span>
    <span class="hljs-attr">result</span>=[]
    for i in range(numrows):
        <span class="hljs-attr">row</span>=[<span class="hljs-number">1</span>]*(i+<span class="hljs-number">1</span>)    <span class="hljs-comment">#åˆå§‹åŒ–å½“å‰è¡Œï¼Œé•¿åº¦ä¸ºi+1ï¼ˆç¬¬iè¡Œæœ‰i+1ä¸ªå…ƒç´ ï¼‰ï¼Œæ‰€æœ‰å…ƒç´ å…ˆè®¾ä¸º1  C(i,0),C(i,j)=1</span>
        for j in range(1,i):
            row<span class="hljs-section">[j]</span>=row<span class="hljs-section">[j-1]</span>*(i-j+1)//j  <span class="hljs-comment">#æ•°å­¦å…¬å¼æ³•é€šè¿‡é€’æ¨æ³• æ„å»ºçš„ C(i,j) = i!/(j!*(i-j)!)</span>
        result.append(row)
    return result
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-28">ç»†èŠ‚ï¼Ÿ</h4>
<p>None</p>
<h4 data-id="heading-29">ä¹‹å‰è§è¿‡ä½†æ²¡æ³¨æ„åˆ°çš„ï¼Ÿ</h4>
<p>åˆ›å»ºäºŒç»´æ•°ç»„</p>
<p>append() å¯ä»¥æ·»åŠ æ•°å€¼ä¹Ÿå¯ä»¥æ·»åŠ å­å‘é‡</p>
<p>æˆ‘ä»¥ä¸º t=[1,]æ‰èƒ½æ˜¯åˆ—è¡¨</p>
<h4 data-id="heading-30"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a71801486ec4cfcb03d0cd99117ee50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF5pyo6ZOO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768894753&amp;x-signature=SnAnnU7d%2BouQaEuWH0cLBQJM60A%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</h4>
<h4 data-id="heading-31">ç–‘æƒ‘ç‚¹/æ–°çŸ¥è¯† ï¼Ÿ</h4>
<p>æ¨è¾‰ä¸‰è§’çš„æ•°å­¦å…¬å¼æ€ä¹ˆå’Œé€’æ¨ç»“åˆ</p>
<hr/>
<h2 data-id="heading-32"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></h2>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[leetcode_day10_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹]]></title>    <link>https://juejin.cn/post/7594405684592394292</link>    <guid>https://juejin.cn/post/7594405684592394292</guid>    <pubDate>2026-01-13T07:49:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594405684592394292" data-draft-id="7594655863547084852" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="leetcode_day10_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-13T07:49:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸…æœ¨é“"/> <meta itemprop="url" content="https://juejin.cn/user/362175455046432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            leetcode_day10_ç­‘åŸºæœŸ_ã€Šç»å¢ƒæ±‚ç”Ÿã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362175455046432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸…æœ¨é“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:49:42.000Z" title="Tue Jan 13 2026 07:49:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>â€‹</p>
<h2 data-id="heading-0"><strong>ç›®å½•</strong></h2>
<hr/>
<h2 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å‰è¨€</h2>
<p><code>ç¢ç¢å¿µï¼šä»»ä½•ä¸€å¥è¯ï¼Œä½ åªè¦ä¸è¯´å‡ºæ¥ï¼Œé‚£ä½ ä¸€ç›´æ˜¯å®ƒçš„ä¸»äººï¼Œå¦‚æœä½ æŠŠå®ƒè¯´å‡ºæ¥äº†ï¼Œé‚£æœªæ¥å¯èƒ½æˆä¸ºå®ƒçš„å¥´éš¶ã€‚è°¨è¨€æ…è¡Œã€‚</code></p>
<p>æœ¬ç³»åˆ—ã€Šç»å¢ƒæ±‚ç”Ÿã€‹è®°å½•è½¬ç ç®—æ³•ç­‘åŸºè¿‡ç¨‹ï¼Œä»¥ä»£ç éšæƒ³å½•ä¸ºçº²å­¦ä¹ ï¼Œleetcode_hot_100ç»ƒæ‰‹ï¼Œåœ¨æ­¤è®°å½•æ€è€ƒè¿‡ç¨‹ï¼Œæ–¹ä¾¿è¿‡åå¤ç°ã€‚å†…å®¹æ¯”è¾ƒç²—ç³™ä»…ä¾¿äºç¬”è€…å˜æ¸…æ€è·¯ï¼Œå¤ç›˜æ€»ç»“ã€‚</p>
<p>ä»Šå¤©é™¤äº†åˆ·é¢˜ï¼Œ è¿‡äº†ä¸€éday 1,2,3 (å“ˆå¸Œè¡¨ï¼Œæ•°ç»„ï¼Œé“¾è¡¨)</p>
<hr/>
<p><code>æç¤ºï¼šä»¥ä¸‹æ˜¯æœ¬ç¯‡æ–‡ç« æ­£æ–‡å†…å®¹</code></p>
<h2 data-id="heading-2">ä¸€ã€128. æœ€é•¿è¿ç»­åºåˆ—</h2>
<h3 data-id="heading-3">1ã€é¢˜ç›®æè¿°</h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ª<strong>æœªæ’åº</strong>çš„æ•´æ•°æ•°ç»„Â <code>nums</code>ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚<strong>æ ¸å¿ƒè¦æ±‚</strong>ï¼šç®—æ³•çš„æ—¶é—´å¤æ‚åº¦éœ€ä¼˜åŒ–åˆ°Â <code>O(n)</code>ï¼ˆæš´åŠ›æ³•ä¸æ»¡è¶³ï¼Œä½†ç”¨äºç†è§£é€»è¾‘ï¼‰ã€‚</p>
<h4 data-id="heading-4">ç¤ºä¾‹</h4>
<ul>
<li>
<p>ç¤ºä¾‹ 1ï¼šè¾“å…¥Â <code>nums = [100,4,200,1,3,2]</code>Â â†’ è¾“å‡ºÂ <code>4</code></p>
<ul>
<li>è§£é‡Šï¼šæœ€é•¿è¿ç»­åºåˆ—æ˜¯Â <code>[1,2,3,4]</code>ï¼Œé•¿åº¦ä¸º 4ã€‚</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ 2ï¼šè¾“å…¥Â <code>nums = [0,3,7,2,5,8,4,6,0,1]</code>Â â†’ è¾“å‡ºÂ <code>9</code></p>
<ul>
<li>è§£é‡Šï¼šæœ€é•¿è¿ç»­åºåˆ—æ˜¯Â <code>[0,1,2,3,4,5,6,7,8]</code>ï¼Œé•¿åº¦ä¸º 9ã€‚</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ 3ï¼šè¾“å…¥Â <code>nums = []</code>Â â†’ è¾“å‡ºÂ <code>0</code>ï¼›è¾“å…¥Â <code>nums = [7]</code>Â â†’ è¾“å‡ºÂ <code>1</code>ã€‚</p>
</li>
</ul>
<h4 data-id="heading-5">æç¤º</h4>
<ul>
<li><code>0 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>-10^9 &lt;= nums[i] &lt;= 10^9</code></li>
</ul>
</blockquote>
<h3 data-id="heading-6">2ã€ç®€å•ç†è§£ï¼Ÿ</h3>
<p>è¿˜ä¸æ˜¯å•çº¯å‰ä¸€ä¸ªæ•°å¤§äºåä¸€ä¸ªæ•°å°±è¡Œï¼Œå¿…é¡»æ­¥å¹…ä¸º1ã€‚ 1,2,3æ‰è¡Œã€‚1,44,99ä¸è¡Œ</p>
<p>åœ¨æ•°ç»„ä¸­å¯ä»¥ä¸è¿ç»­ï¼Œå­˜åœ¨å°±è¡ŒÂ  æ¯”å¦‚ã€1100,4,200,1,3,2ã€‘è¾“å‡ºæ˜¯4</p>
<h3 data-id="heading-7">3ã€æš´åŠ›æ³•</h3>
<p>ä»¥numä¸ºèµ·ç‚¹ï¼Œä¸æ–­åœ°æ‰¾num+1</p>
<h4 data-id="heading-8">3.1ã€èƒ½ä¸èƒ½ç”¨å›¾ç¤ºæ„ï¼Ÿ</h4>
<blockquote>
<pre><code class="hljs language-ini" lang="ini">éå†æ¯ä¸ªnumï¼š
<span class="hljs-attr">num</span>=<span class="hljs-number">100</span> â†’ æ‰¾<span class="hljs-number">101</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">1</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">4</span> â†’ æ‰¾<span class="hljs-number">5</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">1</span>ï¼ˆé‡å¤è®¡ç®—ï¼Œåç»­éå†<span class="hljs-number">1</span>æ—¶ä¼šé‡æ–°ç»Ÿè®¡<span class="hljs-number">1</span>-<span class="hljs-number">4</span>ï¼‰
<span class="hljs-attr">num</span>=<span class="hljs-number">200</span> â†’ æ‰¾<span class="hljs-number">201</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">1</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">1</span> â†’ æ‰¾<span class="hljs-number">2</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">3</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">4</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">5</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">4</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">3</span> â†’ æ‰¾<span class="hljs-number">4</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">5</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">2</span>ï¼ˆé‡å¤è®¡ç®—ï¼‰
<span class="hljs-attr">num</span>=<span class="hljs-number">2</span> â†’ æ‰¾<span class="hljs-number">3</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">4</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">5</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">3</span>ï¼ˆé‡å¤è®¡ç®—ï¼‰
å…¨å±€æœ€å¤§å€¼ï¼š4
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-9">3.2ã€åˆå§‹åŒ–æ¡ä»¶ï¼Ÿ</h4>
<h4 data-id="heading-10">3.3ã€è¾¹ç•Œæ¡ä»¶ï¼Ÿ</h4>
<p>ç©ºé›†æˆ–è€…åªæœ‰ä¸€ä¸ªå…ƒç´ </p>
<h4 data-id="heading-11">3.4ã€ä»£ç é€»è¾‘ï¼Ÿ</h4>
<p>å‰ªæï¼Œåˆå§‹åŒ–æœ€å¤§é•¿åº¦ å’Œ å½“å‰çš„é•¿åº¦ä¸º1ï¼Œåé¢å‡ºç°æ›´å¤§çš„å†æ›´æ–°</p>
<h4 data-id="heading-12">3.5ã€ä¹‹å‰è§è¿‡ä½†æ²¡æ³¨æ„åˆ°çš„ï¼Ÿ</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">max_len</span>=max(max_len,current_len)    æ²¡æœ‰æœ€å¤§ï¼Œè‡ªå·±å³ä¸ºæœ€å¤§ï¼Œå‡ºç°æ›´å¤§ï¼Œæœ€å¤§è®©ä½
</code></pre>
<h4 data-id="heading-13">3.6ã€ç–‘æƒ‘ç‚¹/æ–°çŸ¥è¯† ï¼Ÿ</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">while</span> <span class="hljs-built_in">num</span>+current_len <span class="hljs-keyword">in</span> nums:     è¿ç€éå†<span class="hljs-built_in">num</span>+<span class="hljs-number">1</span>å…ƒç´ æ˜¯å¦åœ¨æ•°ç»„ä¸­
</code></pre>
<h4 data-id="heading-14">3.7ã€python ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestConsecutive</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:
        <span class="hljs-comment"># è¾¹ç•Œæ¡ä»¶1ï¼šæ•°ç»„ä¸ºç©ºï¼Œè¿”å›0</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> nums:
            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
        
        <span class="hljs-comment"># åˆå§‹åŒ–æœ€å¤§é•¿åº¦ä¸º1ï¼ˆè‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œæœ€å°é•¿åº¦æ˜¯1ï¼‰</span>
        max_len = <span class="hljs-number">1</span>
        
        <span class="hljs-comment"># å¤–å±‚å¾ªç¯ï¼šéå†æ¯ä¸ªæ•°å­—ä½œä¸ºèµ·å§‹ç‚¹</span>
        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:
            <span class="hljs-comment"># åˆå§‹åŒ–å½“å‰è¿ç»­é•¿åº¦ä¸º1ï¼ˆå½“å‰æ•°å­—è‡ªèº«ï¼‰</span>
            current_len = <span class="hljs-number">1</span>
            <span class="hljs-comment"># å†…å±‚å¾ªç¯ï¼šæŸ¥æ‰¾num+1ã€num+2...æ˜¯å¦åœ¨æ•°ç»„ä¸­</span>
            <span class="hljs-keyword">while</span> num + current_len <span class="hljs-keyword">in</span> nums:
                <span class="hljs-comment"># æ‰¾åˆ°è¿ç»­æ•°ï¼Œé•¿åº¦+1</span>
                current_len += <span class="hljs-number">1</span>
            <span class="hljs-comment"># æ›´æ–°å…¨å±€æœ€å¤§é•¿åº¦</span>
            max_len = <span class="hljs-built_in">max</span>(max_len, current_len)
        
        <span class="hljs-keyword">return</span> max_len
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-15">4ã€ä¼˜åŒ–æ³•</h3>
<p>é€šè¿‡å“ˆå¸Œè¡¨è§£é¢˜</p>
<h4 data-id="heading-16">Â 4.1ã€èƒ½ä¸èƒ½ç”¨å›¾ç¤ºæ„ï¼Ÿ</h4>
<blockquote>
<pre><code class="hljs language-ini" lang="ini">ä»¥ <span class="hljs-attr">nums</span> = [<span class="hljs-number">100</span>,<span class="hljs-number">4</span>,<span class="hljs-number">200</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>] ä¸ºä¾‹
æ­¥éª¤1ï¼šè½¬é›†åˆ â†’ <span class="hljs-attr">s</span> = {<span class="hljs-number">100</span>,<span class="hljs-number">4</span>,<span class="hljs-number">200</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>}
æ­¥éª¤2ï¼šéå†é›†åˆä¸­çš„æ¯ä¸ªnumï¼š
<span class="hljs-attr">num</span>=<span class="hljs-number">100</span> â†’ æ£€æŸ¥<span class="hljs-number">100</span>-<span class="hljs-number">1</span>=<span class="hljs-number">99</span>æ˜¯å¦åœ¨sï¼Ÿä¸åœ¨ï¼ˆæ˜¯èµ·ç‚¹ï¼‰â†’ æ‰¾<span class="hljs-number">101</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">1</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">4</span> â†’ æ£€æŸ¥<span class="hljs-number">4</span>-<span class="hljs-number">1</span>=<span class="hljs-number">3</span>æ˜¯å¦åœ¨sï¼Ÿåœ¨ï¼ˆä¸æ˜¯èµ·ç‚¹ï¼‰â†’ è·³è¿‡
<span class="hljs-attr">num</span>=<span class="hljs-number">200</span> â†’ æ£€æŸ¥<span class="hljs-number">200</span>-<span class="hljs-number">1</span>=<span class="hljs-number">199</span>æ˜¯å¦åœ¨sï¼Ÿä¸åœ¨ï¼ˆæ˜¯èµ·ç‚¹ï¼‰â†’ æ‰¾<span class="hljs-number">201</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">1</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">1</span> â†’ æ£€æŸ¥<span class="hljs-number">1</span>-<span class="hljs-number">1</span>=<span class="hljs-number">0</span>æ˜¯å¦åœ¨sï¼Ÿä¸åœ¨ï¼ˆæ˜¯èµ·ç‚¹ï¼‰â†’ æ‰¾<span class="hljs-number">2</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">3</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">4</span>ï¼ˆåœ¨ï¼‰â†’ æ‰¾<span class="hljs-number">5</span>ï¼ˆä¸åœ¨ï¼‰â†’ é•¿åº¦<span class="hljs-number">4</span>
<span class="hljs-attr">num</span>=<span class="hljs-number">3</span> â†’ æ£€æŸ¥<span class="hljs-number">3</span>-<span class="hljs-number">1</span>=<span class="hljs-number">2</span>æ˜¯å¦åœ¨sï¼Ÿåœ¨ï¼ˆä¸æ˜¯èµ·ç‚¹ï¼‰â†’ è·³è¿‡
<span class="hljs-attr">num</span>=<span class="hljs-number">2</span> â†’ æ£€æŸ¥<span class="hljs-number">2</span>-<span class="hljs-number">1</span>=<span class="hljs-number">1</span>æ˜¯å¦åœ¨sï¼Ÿåœ¨ï¼ˆä¸æ˜¯èµ·ç‚¹ï¼‰â†’ è·³è¿‡
æ­¥éª¤3ï¼šå…¨å±€æœ€å¤§å€¼=4
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-17">4.2ã€åˆå§‹åŒ–æ¡ä»¶ï¼Ÿ</h4>
<p>åˆå§‹åŒ–current_len-0 å› ä¸º åé¢åˆ¤æ–­while current in nums: ä¼šåˆ¤æ–­ä¸€æ¬¡å½“å‰çš„current_len , åœ¨å°±+1ï¼Œä¸æš´åŠ›æ³•çš„current=1ä¸åŒå®ƒåˆ¤æ–­çš„æ˜¯while num+current_lenæ˜¯å¦åœ¨numä¸­ã€‚</p>
<h4 data-id="heading-18">4.3ã€è¾¹ç•Œæ¡ä»¶ï¼Ÿ</h4>
<p>none</p>
<h4 data-id="heading-19">4.4ã€ä»£ç é€»è¾‘ï¼Ÿ</h4>
<p>éå†numsä¸­çš„æ¯ä¸€ä¸ªnumï¼Œå¦‚æœnum-1å­˜åœ¨äºnumsä¸­ï¼Œè¯´æ˜numä¸æ˜¯æœ€å°ï¼Œä»–å°±ä¸èƒ½ä½œä¸ºæœ€é•¿å­åºåˆ—çš„headï¼Œpassã€‚ å¦‚æœä¸åœ¨numä¸­å°±+1çœ‹å­˜ä¸å­˜åœ¨ï¼Œé•¿åº¦é€’å¢è¿”å›é•¿åº¦</p>
<h4 data-id="heading-20">4.5ã€ä¹‹å‰è§è¿‡ä½†æ²¡æ³¨æ„åˆ°çš„ï¼Ÿ</h4>
<h4 data-id="heading-21">4.6ã€ç–‘æƒ‘ç‚¹/æ–°çŸ¥è¯† ï¼Ÿ</h4>
<p>æ‰¾èµ·ç‚¹Â  num-1æ˜¯å¦åœ¨numsä¸­çš„æ€è·¯ æ˜¯å‡å°‘æŸ¥æ‰¾çš„å…³é”®</p>
<h4 data-id="heading-22">4.7ã€python ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini">from typing import List

class Solution:
    def longestConsecutive(self, nums: List<span class="hljs-section">[int]</span>) -&gt; int:
        <span class="hljs-comment"># æ­¥éª¤1ï¼šå°†æ•°ç»„è½¬ä¸ºé›†åˆï¼ŒO(1)æŸ¥æ‰¾+è‡ªåŠ¨å»é‡</span>
        <span class="hljs-attr">num_set</span> = set(nums)
        <span class="hljs-comment"># åˆå§‹åŒ–æœ€å¤§é•¿åº¦ä¸º0ï¼ˆå…¼å®¹ç©ºæ•°ç»„ï¼‰</span>
        <span class="hljs-attr">max_len</span> = <span class="hljs-number">0</span>
        
        <span class="hljs-comment"># æ­¥éª¤2ï¼šéå†é›†åˆä¸­çš„æ¯ä¸ªæ•°å­—</span>
        for num in num_set:
            <span class="hljs-comment"># æ ¸å¿ƒåˆ¤æ–­ï¼šä»…å½“num-1ä¸åœ¨é›†åˆä¸­ï¼Œæ‰æ˜¯åºåˆ—èµ·ç‚¹ï¼ˆé¿å…é‡å¤è®¡ç®—ï¼‰</span>
            if num - 1 not in num_set:
                <span class="hljs-comment"># åˆå§‹åŒ–å½“å‰æ•°å­—ä¸ºåºåˆ—èµ·ç‚¹ï¼Œå½“å‰é•¿åº¦ä¸º0</span>
                <span class="hljs-attr">current_num</span> = num
                <span class="hljs-attr">current_len</span> = <span class="hljs-number">0</span>
                
                <span class="hljs-comment"># æ­¥éª¤3ï¼šæŸ¥æ‰¾è¿ç»­æ•°ï¼Œç›´åˆ°æ‰¾ä¸åˆ°ä¸ºæ­¢</span>
                while current_num in num_set:
                    <span class="hljs-comment"># æ‰¾åˆ°è¿ç»­æ•°ï¼Œé•¿åº¦+1ï¼Œå½“å‰æ•°å­—+1</span>
                    current_len += 1
                    current_num += 1
                
                <span class="hljs-comment"># æ­¥éª¤4ï¼šæ›´æ–°å…¨å±€æœ€å¤§é•¿åº¦</span>
                <span class="hljs-attr">max_len</span> = max(max_len, current_len)
        
        <span class="hljs-comment"># æ­¥éª¤5ï¼šè¿”å›ç»“æœï¼ˆç©ºæ•°ç»„æ—¶max_lenä»ä¸º0ï¼‰</span>
        return max_len
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h4 data-id="heading-23"/>
<h2 data-id="heading-24">Â äºŒã€283 ç§»åŠ¨é›¶</h2>
<h3 data-id="heading-25">1ã€é¢˜ç›®æè¿°</h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„Â <code>nums</code>ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰Â <code>0</code>Â ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶<strong>ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåº</strong>ã€‚<strong>æ ¸å¿ƒçº¦æŸ</strong>ï¼š</p>
<ol>
<li>å¿…é¡»åœ¨<strong>åŸæ•°ç»„ä¸Šæ“ä½œ</strong>ï¼ˆä¸èƒ½æ‹·è´é¢å¤–çš„æ•°ç»„ï¼‰ï¼›</li>
<li>å°½é‡å‡å°‘æ“ä½œæ¬¡æ•°ï¼ˆæ—¶é—´ / ç©ºé—´å¤æ‚åº¦æœ€ä¼˜ï¼‰ï¼›</li>
<li>éé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºä¸èƒ½æ”¹å˜ï¼ˆæ¯”å¦‚Â <code>[0,1,0,3,12]</code>Â ç§»åŠ¨åå¿…é¡»æ˜¯Â <code>[1,3,12,0,0]</code>ï¼Œè€ŒéÂ <code>[3,1,12,0,0]</code>ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-26">ç¤ºä¾‹</h4>
<ul>
<li>ç¤ºä¾‹ 1ï¼šè¾“å…¥Â <code>nums = [0,1,0,3,12]</code>Â â†’ è¾“å‡ºÂ <code>[1,3,12,0,0]</code>ï¼›</li>
<li>ç¤ºä¾‹ 2ï¼šè¾“å…¥Â <code>nums = [0]</code>Â â†’ è¾“å‡ºÂ <code>[0]</code>ï¼›</li>
<li>ç¤ºä¾‹ 3ï¼šè¾“å…¥Â <code>nums = [1,2,3]</code>Â â†’ è¾“å‡ºÂ <code>[1,2,3]</code>ï¼›</li>
<li>ç¤ºä¾‹ 4ï¼šè¾“å…¥Â <code>nums = [0,0,1]</code>Â â†’ è¾“å‡ºÂ <code>[1,0,0]</code>ã€‚</li>
</ul>
<h4 data-id="heading-27">æç¤º</h4>
<ul>
<li><code>1 &lt;= nums.length &lt;= 10^4</code></li>
<li><code>-2^31 &lt;= nums[i] &lt;= 2^31 - 1</code></li>
</ul>
</blockquote>
<h3 data-id="heading-28">3ã€æš´åŠ›æ³•</h3>
<p>è¿™é¢˜æ¯”è¾ƒeasyï¼Œå¿«æ…¢æŒ‡é’ˆå¯¹æ¢å°±å¯ä»¥è§£å†³ã€‚ å…¶å®ä¹Ÿå¯ä»¥ç”¨æš´åŠ›æ³•while è¿ç»­è¦†ç›–</p>
<h4 data-id="heading-29">3.7ã€python ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">nums</span>=[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">55</span>,<span class="hljs-number">0</span>,<span class="hljs-number">43</span>,<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>]
def solution(nums):
    <span class="hljs-attr">n</span>=len(nums)
    slow,<span class="hljs-attr">fast</span>=<span class="hljs-number">0</span>,<span class="hljs-number">0</span>
    while fast&lt;n:
        if nums<span class="hljs-section">[fast]</span>!=0:
            nums<span class="hljs-section">[slow]</span>,nums<span class="hljs-section">[fast]</span>=nums<span class="hljs-section">[fast]</span>,nums<span class="hljs-section">[slow]</span>
            slow+=1
        fast+=1
    return nums
solution(nums)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-30">Â ä¸‰ã€11å­˜æœ€å¤šæ°´çš„å®¹å™¨</h2>
<h3 data-id="heading-31">1ã€é¢˜ç›®æè¿°</h3>
<blockquote>
<p>ç»™å®šä¸€ä¸ª<strong>æœªæ’åº</strong>çš„æ•´æ•°æ•°ç»„Â <code>nums</code>ï¼Œæ‰¾å‡ºæ•°å­—è¿ç»­çš„æœ€é•¿åºåˆ—ï¼ˆä¸è¦æ±‚åºåˆ—å…ƒç´ åœ¨åŸæ•°ç»„ä¸­è¿ç»­ï¼‰çš„é•¿åº¦ã€‚<strong>æ ¸å¿ƒè¦æ±‚</strong>ï¼šç®—æ³•çš„æ—¶é—´å¤æ‚åº¦éœ€ä¼˜åŒ–åˆ°Â <code>O(n)</code>ï¼ˆæš´åŠ›æ³•ä¸æ»¡è¶³ï¼Œä½†ç”¨äºç†è§£é€»è¾‘ï¼‰ã€‚</p>
<h4 data-id="heading-32">ç¤ºä¾‹</h4>
<ul>
<li>
<p>ç¤ºä¾‹ 1ï¼šè¾“å…¥Â <code>nums = [100,4,200,1,3,2]</code>Â â†’ è¾“å‡ºÂ <code>4</code></p>
<ul>
<li>è§£é‡Šï¼šæœ€é•¿è¿ç»­åºåˆ—æ˜¯Â <code>[1,2,3,4]</code>ï¼Œé•¿åº¦ä¸º 4ã€‚</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ 2ï¼šè¾“å…¥Â <code>nums = [0,3,7,2,5,8,4,6,0,1]</code>Â â†’ è¾“å‡ºÂ <code>9</code></p>
<ul>
<li>è§£é‡Šï¼šæœ€é•¿è¿ç»­åºåˆ—æ˜¯Â <code>[0,1,2,3,4,5,6,7,8]</code>ï¼Œé•¿åº¦ä¸º 9ã€‚</li>
</ul>
</li>
<li>
<p>ç¤ºä¾‹ 3ï¼šè¾“å…¥Â <code>nums = []</code>Â â†’ è¾“å‡ºÂ <code>0</code>ï¼›è¾“å…¥Â <code>nums = [7]</code>Â â†’ è¾“å‡ºÂ <code>1</code>ã€‚</p>
</li>
</ul>
<h4 data-id="heading-33">æç¤º</h4>
<ul>
<li><code>0 &lt;= nums.length &lt;= 10^5</code></li>
<li><code>-10^9 &lt;= nums[i] &lt;= 10^9</code></li>
</ul>
</blockquote>
<h3 data-id="heading-34">2ã€ç®€å•ç†è§£ï¼Ÿ</h3>
<p>area=ä¸¤æ¡çº¿ç´¢å¼•çš„è·ç¦»*è¾ƒçŸ­ä¸€çº¿çš„é«˜åº¦</p>
<h3 data-id="heading-35">3ã€æš´åŠ›æ³•</h3>
<p>æš´åŠ›æšä¸¾æ‰€æœ‰å¯èƒ½æ€§å°±å¥½äº†Â  ä½œä¸ºä¸€é“ä¸­ç­‰é¢˜ æ„Ÿè§‰éš¾åº¦ä¸€èˆ¬ã€‚ä½†æ˜¯æš´åŠ›æ³•è¶…æ—¶äº†</p>
<h4 data-id="heading-36">3.7ã€python ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]</span>
<span class="hljs-comment"># è¾“å‡ºï¼š49</span>
<span class="hljs-attr">height</span>=[<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>]
def solution(height):
    <span class="hljs-attr">n</span>=len(height)
    <span class="hljs-attr">max_area</span>=<span class="hljs-number">0</span>
    for i in range(n):
        for j in range(i+1,n):
            <span class="hljs-attr">long</span>=j-i
            <span class="hljs-attr">width</span>=min(height[i],height[j])
            <span class="hljs-attr">current_area</span>=long*width
            <span class="hljs-attr">max_area</span>=max(max_area,current_area)
    return max_area
solution(height)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-37"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a42890233c2494bbad0b41a2b66c692~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5riF5pyo6ZOO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768895381&amp;x-signature=nDVAPxX4IKyxz%2FOQgGHrK%2FtFDQU%3D" alt="" loading="lazy"/><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/>â€‹ç¼–è¾‘</h3>
<h3 data-id="heading-38">4ã€ä¼˜åŒ–æ³•</h3>
<p>åŒæŒ‡é’ˆæ³•ã€‚ å·¦çŸ­ç§»å·¦ï¼Œå³çŸ­ç§»åŠ¨å³ã€‚å…¶å®ä¼˜åŒ–æ³•çŸ¥é“æ€è·¯åä¹Ÿæ˜¯å¾ˆç®€å•ã€‚</p>
<h4 data-id="heading-39">Â 4.1ã€èƒ½ä¸èƒ½ç”¨å›¾ç¤ºæ„ï¼Ÿ</h4>
<blockquote>
<pre><code class="hljs language-css" lang="css">ä»¥ <span class="hljs-attribute">height</span> = <span class="hljs-selector-attr">[1,8,6,2,5,4,8,3,7]</span> ä¸ºä¾‹
åˆå§‹åŒ–ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">0</span>ï¼ˆh=<span class="hljs-number">1</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">8</span>ï¼ˆh=<span class="hljs-number">7</span>ï¼‰ï¼Œmax_area=<span class="hljs-number">0</span>
æ­¥éª¤<span class="hljs-number">1</span>ï¼šå®½åº¦=<span class="hljs-number">8</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">1</span> â†’ é¢ç§¯=<span class="hljs-number">8</span> â†’ max_area=<span class="hljs-number">8</span> â†’ å·¦æ›´çŸ­ï¼Œ<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>
æ­¥éª¤<span class="hljs-number">2</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">8</span>ï¼ˆh=<span class="hljs-number">7</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">7</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">7</span> â†’ é¢ç§¯=<span class="hljs-number">49</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">7</span>
æ­¥éª¤<span class="hljs-number">3</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">7</span>ï¼ˆh=<span class="hljs-number">3</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">6</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">3</span> â†’ é¢ç§¯=<span class="hljs-number">18</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">6</span>
æ­¥éª¤<span class="hljs-number">4</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">6</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">5</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">8</span> â†’ é¢ç§¯=<span class="hljs-number">40</span> â†’ max_area=<span class="hljs-number">49</span> â†’ ç›¸ç­‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">5</span>
æ­¥éª¤<span class="hljs-number">5</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">5</span>ï¼ˆh=<span class="hljs-number">4</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">4</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">4</span> â†’ é¢ç§¯=<span class="hljs-number">16</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">4</span>
æ­¥éª¤<span class="hljs-number">6</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">4</span>ï¼ˆh=<span class="hljs-number">5</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">3</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">5</span> â†’ é¢ç§¯=<span class="hljs-number">15</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">3</span>
æ­¥éª¤<span class="hljs-number">7</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">3</span>ï¼ˆh=<span class="hljs-number">2</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">2</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">2</span> â†’ é¢ç§¯=<span class="hljs-number">4</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">2</span>
æ­¥éª¤<span class="hljs-number">8</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span>ï¼ˆh=<span class="hljs-number">8</span>ï¼‰ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">2</span>ï¼ˆh=<span class="hljs-number">6</span>ï¼‰â†’ å®½åº¦=<span class="hljs-number">1</span>ï¼Œæœ‰æ•ˆé«˜åº¦=<span class="hljs-number">6</span> â†’ é¢ç§¯=<span class="hljs-number">6</span> â†’ max_area=<span class="hljs-number">49</span> â†’ å³æ›´çŸ­ï¼Œ<span class="hljs-attribute">right</span>=<span class="hljs-number">1</span>
æ­¥éª¤<span class="hljs-number">9</span>ï¼š<span class="hljs-attribute">left</span>=<span class="hljs-number">1</span> &gt;= <span class="hljs-attribute">right</span>=<span class="hljs-number">1</span> â†’ éå†ç»“æŸï¼Œè¿”å›<span class="hljs-number">49</span>
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
</blockquote>
<h4 data-id="heading-40">4.7ã€python ä»£ç </h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]</span>
<span class="hljs-comment"># è¾“å‡ºï¼š49</span>
<span class="hljs-attr">height</span>=[<span class="hljs-number">1</span>,<span class="hljs-number">8</span>,<span class="hljs-number">6</span>,<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">8</span>,<span class="hljs-number">3</span>,<span class="hljs-number">7</span>]
def solution(height):
    <span class="hljs-attr">n</span>=len(height)
    <span class="hljs-attr">left</span>=<span class="hljs-number">0</span>
    <span class="hljs-attr">right</span>=n-<span class="hljs-number">1</span>
    <span class="hljs-attr">max_area</span>=<span class="hljs-number">0</span>
    while left&lt;right:
        <span class="hljs-attr">area</span>=(right-left)*min(height[left],height[right])
        <span class="hljs-attr">max_area</span>=max(area,max_area)
        if height<span class="hljs-section">[left]</span>&lt;height<span class="hljs-section">[right]</span>:
            left+=1
        else:
            <span class="hljs-attr">right-</span>=<span class="hljs-number">1</span>
    return max_area
solution(height)
</code></pre>
<p><img src="" alt="" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-41"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></h2>
<p><strong>ä»åˆ©ç›Šå‡ºå‘å®ƒå€¼ä¸å€¼å¾—åšä¸åšï¼Œä»é£é™©å‡ºå‘å®ƒå€¼ä¸å€¼å¾—æï¼Œä»èƒ½åŠ›å‡ºå‘æˆ‘èƒ½ä¸èƒ½å¹²ï¼Œä»ç»“æœå‡ºå‘å®ƒåˆ’ä¸åˆ’ç®—</strong></p>
<p><strong>é£æ‰¬è·‹æ‰ˆå¾—ä¸åˆ°äº²è¿‘</strong></p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«RPAå’Œè„šæœ¬ï¼è§†è§‰æ¨ç†Agentï¼Œä¸‹ä¸€ä»£è‡ªåŠ¨åŒ–çš„æš´åŠ›è§£æ³•]]></title>    <link>https://juejin.cn/post/7594642978695446591</link>    <guid>https://juejin.cn/post/7594642978695446591</guid>    <pubDate>2026-01-13T08:50:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594642978695446591" data-draft-id="7592133956733190185" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«RPAå’Œè„šæœ¬ï¼è§†è§‰æ¨ç†Agentï¼Œä¸‹ä¸€ä»£è‡ªåŠ¨åŒ–çš„æš´åŠ›è§£æ³•"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent"/> <meta itemprop="datePublished" content="2026-01-13T08:50:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´¾ç»´æ€åŸº"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569632477"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«RPAå’Œè„šæœ¬ï¼è§†è§‰æ¨ç†Agentï¼Œä¸‹ä¸€ä»£è‡ªåŠ¨åŒ–çš„æš´åŠ›è§£æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569632477/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´¾ç»´æ€åŸº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T08:50:59.000Z" title="Tue Jan 13 2026 08:50:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤±è¸ªä¸¤ä¸ªåŠæœˆï¼Œæˆ‘åˆå›æ¥äº†ã€‚</p>
<p>ä¸¤å¹´å‰ï¼Œå…¬å¸å› ä¸ºä¸€äº›è‡ªåŠ¨åŒ–éœ€æ±‚ï¼Œæˆ‘ä»¬é‡‡è´­äº†å¸‚é¢ä¸Šæ¯”è¾ƒä¸»æµçš„ä¸€æ¬¾RPAäº§å“ã€‚</p>
<p>ä½†è¿™ä¸¤å¹´ç”¨ä¸‹æ¥çš„æ„Ÿè§‰æ˜¯ï¼ŒRPAç¡®å®èƒ½è§£å†³ç»å¤§å¤šæ•°çš„è‡ªåŠ¨åŒ–é—®é¢˜ï¼Œä½†ç»´æŠ¤æˆæœ¬å®åœ¨å¤ªé«˜ã€‚</p>
<p>è¿™ä¸ï¼Œåˆšå¥½ä¸€ä¸ªæœˆå‰æ™ºè°±AIå¼€æºäº†ä¸€å¥—å«ä½œ<strong>AutoGLM</strong>çš„GUI Agentæ¡†æ¶ï¼Œå®£ç§°æ˜¯èƒ½è®©AIåƒäººç±»ä¸€æ ·çœ‹åˆ°æ‰‹æœºå±å¹•å†…å®¹å¹¶ä¸”æ‰§è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚</p>
<p>æˆ‘å¯»æ€ç€æœ‰ç‚¹æ„æ€ï¼Œå°±å»åšäº†ä¸€æŠŠæŠ€æœ¯è°ƒç ”ã€‚</p>
<h2 data-id="heading-0">AutoGLMæ˜¯ä»€ä¹ˆ</h2>
<p>AutoGLMæ˜¯ä¸€ä¸ªå¼€æºçš„<strong>å¤šæ¨¡æ€</strong>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ¡†æ¶ï¼Œä¸“é—¨ç”¨äºæ„å»ºèƒ½å¤Ÿç†è§£å’Œæ“ä½œæ‰‹æœºå›¾å½¢ç•Œé¢ï¼ˆPhone GUI Agentï¼‰çš„AIåŠ©æ‰‹ã€‚å®ƒç»“åˆäº†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œè®¡ç®—æœºè§†è§‰æŠ€æœ¯ï¼Œè®©AIèƒ½å¤Ÿåƒäººç±»ä¸€æ ·â€œçœ‹åˆ°â€å±å¹•å†…å®¹å¹¶æ‰§è¡Œæ“ä½œã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº<strong>LLM</strong>å’Œ<strong>è®¡ç®—æœºè§†è§‰æŠ€æœ¯</strong>æ„å»ºçš„<strong>è‡ªåŠ¨åŒ–Agentæ¡†æ¶</strong>ï¼Œç”¨æ¥å¸®ä½ è§£æ”¾åŒæ‰‹ï¼Œè½»æ¾æ“æ§æ‰‹æœºã€‚</p>
<h2 data-id="heading-1">AutoGLMèƒ½åšä»€ä¹ˆ</h2>
<p>å¤§å®¶ä¸€å®šç”¨è¿‡iphoneçš„Siriè¯­éŸ³æ™ºèƒ½åŠ©æ‰‹å§ï¼Œå½“ä½ å¯¹å®ƒä¸‹è¾¾ä¸€ä¸ªæŒ‡ä»¤ï¼Œå®ƒå°±èƒ½å¤Ÿå¸®ä½ å®Œæˆæ‰‹æœºä¸Šçš„æ“ä½œï¼ŒAutoGLMå…¶å®å¹²çš„å°±æ˜¯è¿™ä¸ªï¼Œåªä¸è¿‡æ›´é€šç”¨ï¼Œæ›´èªæ˜ï¼Œèƒ½æ”¯æŒæ›´å¤æ‚çš„è‡ªåŠ¨åŒ–æ“ä½œï¼</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘è®©Safariå¸®æˆ‘åœ¨æ·˜å®ä¸Šæ‰¾å‡ºä»·æ ¼æœ€ä½çš„AirPods Proï¼Œå¹¶ä¸”æ”¯ä»˜ä¸‹å•ï¼ŒSafariåšä¸åˆ°ï¼Œä½†AutoGLMå¯ä»¥ã€‚</p>
<p>å½“ç„¶äº†ï¼Œè¿™ä¸¤è€…çš„åŸç†ä¸åŒï¼ŒSiriåŸºäºiosç³»ç»Ÿçš„å†…éƒ¨APIå®ç°ï¼Œå› æ­¤æœ‰æƒé™ä¸Šçš„å±€é™æ€§ï¼Œåªèƒ½æ”¯æŒæœ‰ç³»ç»Ÿæ“ä½œæƒé™çš„æŒ‡ä»¤ï¼ˆèƒ½æ‰“å¼€æ·˜å®ï¼Œä½†æ— æ³•è¿›è¡Œæ·˜å®å†…çš„è‡ªåŠ¨åŒ–æ“ä½œï¼‰ï¼ŒAutoGLMåˆ™æ˜¯æ¨¡æ‹Ÿäººç±»è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚</p>
<p>å‰é˜µå­ç‚’çš„ç«çƒ­çš„è±†åŒ…æ‰‹æœºä¹Ÿèƒ½åšåˆ°å’ŒAutoGLMä¸€æ ·çš„äº‹æƒ…ï¼Œä½†AutoGLMå…·å¤‡è·¨è®¾å¤‡çš„èƒ½åŠ›ï¼Œå®ƒæ˜¯æŠ€æœ¯æ¡†æ¶è€Œä¸æ˜¯äº§å“ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå¼€æºå•Šï¼å¼€æºæ„å‘³ç€ä»€ä¹ˆï¼Œå¤§å®¶éƒ½æ˜¯æITçš„ï¼Œæ‡‚è‡ªæ‡‚ã€‚ï¼ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒé’‰é’‰æ²¡æ‰“ä¸Šå¡äº†ï¼‰</p>
<h2 data-id="heading-2">AutoGLMçš„å®ç°åŸç†</h2>
<p>AutoGLM çš„åº•å±‚é€»è¾‘æ˜¯ä¸€ä¸ª<strong>åŸºäºå®æ—¶çŠ¶æ€æ„ŸçŸ¥çš„åŠ¨æ€å†³ç­–é—­ç¯</strong>ã€‚</p>
<p>å½“ç”¨æˆ·ä¸‹è¾¾äº†ä¸€æ¡è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œå¦‚â€œæ‰“å¼€ä¼ä¸šå¾®ä¿¡â€ï¼Œæ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¼šè¢«åˆ’åˆ†ä¸º3ä¸ªé˜¶æ®µã€‚</p>
<p><strong>é˜¶æ®µä¸€ï¼šæŒ‡ä»¤è§£æ</strong></p>
<p>é¦–å…ˆï¼ŒAgentç³»ç»Ÿä¼šé€šè¿‡è‡ªç„¶è¯­è¨€ç†è§£å¼•æ“è¿›è¡Œæ„å›¾è¯†åˆ«ï¼Œå¤§æ¨¡å‹æå–åˆ°å…³é”®åŠ¨è¯â€œæ‰“å¼€â€å’Œç›®æ ‡å¯¹è±¡â€œä¼ä¸šå¾®ä¿¡â€ï¼Œå°†è‡ªç„¶è¯­è¨€è½¬åŒ–ä¸ºç»“æ„åŒ–æŒ‡ä»¤ï¼Œè¯†åˆ«å‡ºä»»åŠ¡ç±»å‹ä¸º"åº”ç”¨å¯åŠ¨"ï¼Œå¹¶ç¡®è®¤ç›®æ ‡åº”ç”¨ä¸ºä¼ä¸šå¾®ä¿¡ã€‚</p>
<p><strong>é˜¶æ®µäºŒï¼šä»»åŠ¡è§„åˆ’å’Œåˆ†è§£</strong>
å¤§æ¨¡å‹æ”¶åˆ°â€œå¯åŠ¨ä¼ä¸šå¾®ä¿¡åº”ç”¨â€è¿™æ¡é«˜çº§æŒ‡ä»¤åï¼Œä¼šå°†å…¶æ‹†è§£ä¸ºä¸€ç³»åˆ—åŸå­åŒ–çš„å¯æ‰§è¡Œæ­¥éª¤ï¼Œåœ¨AutoGLMçš„æ¡†æ¶è®¾è®¡ä¸­ï¼Œè¿™ä¸€æ­¥æ˜¯å…³é”®çš„åˆ†æ°´å²­ï¼Œå®ƒä¸ä»…ä¼šæ€è€ƒâ€œåšä»€ä¹ˆâ€ï¼Œè¿˜ä¼šé€šè¿‡å†…ç½®çš„é¢†åŸŸçŸ¥è¯†åº“ï¼ˆæ‰‹æœºçš„æ“ä½œé€»è¾‘ï¼‰æ¨ç†å‡ºâ€œå¦‚ä½•åšâ€ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¯¹äºâ€œæ‰“å¼€ä¼ä¸šå¾®ä¿¡â€è¿™ä¸ªä»»åŠ¡ï¼ŒAutoGLM å†…éƒ¨çš„è§„åˆ’æ¨¡å—å¯èƒ½ä¼šç”Ÿæˆå¦‚ä¸‹æ­¥éª¤åºåˆ—ï¼š</p>
<ol>
<li>å”¤é†’æ‰‹æœºå±å¹•ï¼ˆå¦‚æœå¤„äºä¼‘çœ çŠ¶æ€çš„è¯ï¼‰</li>
<li>è¿”å›ä¸»å±å¹•</li>
<li>åˆ¤æ–­å½“å‰é¡µé¢æ˜¯å¦æœ‰ä¼ä¸šå¾®ä¿¡åº”ç”¨å›¾æ ‡</li>
<li>ç‚¹å‡»ä¼ä¸šå¾®ä¿¡åº”ç”¨å›¾æ ‡æ‰“å¼€åº”ç”¨</li>
</ol>
<p>è¿™ç§è§„åˆ’è¿‡ç¨‹ï¼Œä¸ä»…ä¾èµ–äºå¤§æ¨¡å‹å¯¹é€šç”¨ä»»åŠ¡æ­¥éª¤çš„æ¨ç†èƒ½åŠ›ï¼Œè¿˜ç´§å¯†ç»“åˆäº† AutoGLMæ¡†æ¶é¢„å…ˆå°è£…å¥½çš„ã€é’ˆå¯¹æ‰‹æœºæ“ä½œç³»ç»Ÿçš„æ ‡å‡†åŒ–å•å…ƒã€‚</p>
<p><strong>é˜¶æ®µä¸‰ï¼šæ„ŸçŸ¥ä¸æ‰§è¡Œ</strong></p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼ŒAutoGLMé¦–å…ˆä¼šåˆ©ç”¨ADBå·¥å…·ï¼ˆAndroid Debug Bridgeï¼‰å¯¹å½“å‰æ‰§è¡Œæ­¥éª¤ä¸‹çš„æ‰‹æœºå±å¹•è¿›è¡Œå®æ—¶æˆªå›¾ï¼Œå¹¶å°†å›¾åƒä¿¡æ¯ä¸å½“å‰çš„ä»»åŠ¡ä¸Šä¸‹æ–‡ä¸€å¹¶å‘é€ç»™è§†è§‰ç†è§£æ¨¡å‹ã€‚</p>
<p>è§†è§‰æ¨¡å‹çš„æ ¸å¿ƒå·¥ä½œï¼Œæ˜¯è¿›è¡Œ<strong>åƒç´ åˆ°è¯­ä¹‰çš„ç¿»è¯‘</strong>ï¼š</p>
<ul>
<li><strong>å…ƒç´ æ£€æµ‹ä¸è§£æ</strong>ï¼šè¯†åˆ«å±å¹•ä¸Šçš„æ‰€æœ‰äº¤äº’å…ƒç´ ï¼Œå¦‚æŒ‰é’®ã€è¾“å…¥æ¡†ã€åˆ—è¡¨ã€å›¾æ ‡ï¼Œå¹¶æ ‡æ³¨å…¶ç±»å‹ã€ä½ç½®å’Œæ–‡æœ¬å†…å®¹ã€‚</li>
<li><strong>å¸ƒå±€ä¸ç»“æ„ç†è§£</strong>ï¼šåˆ†æå…ƒç´ çš„å±‚çº§å’Œç©ºé—´å…³ç³»ï¼Œç†è§£å½“å‰å±å¹•çš„é€»è¾‘ç»“æ„ï¼ˆæ¯”å¦‚è¿™æ˜¯ä¸€ä¸ªç™»å½•é¡µã€è®¾ç½®åˆ—è¡¨è¿˜æ˜¯ä¸€ä¸ªå¯¹è¯çª—å£ï¼‰ã€‚</li>
<li><strong>çŠ¶æ€ä¸æ„å›¾æ¨æ–­</strong>ï¼šç»“åˆä»»åŠ¡ä¸Šä¸‹æ–‡ï¼Œåˆ¤æ–­å½“å‰ç•Œé¢çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œåœ¨â€œå‘é€å¾®ä¿¡æ¶ˆæ¯â€ä»»åŠ¡ä¸­ï¼Œè§†è§‰æ¨¡å‹èƒ½åˆ†è¾¨å‡ºå½“å‰æ˜¯åœç•™åœ¨å¯¹è¯åˆ—è¡¨ï¼ˆéœ€å…ˆç‚¹å‡»è”ç³»äººï¼‰ï¼Œè¿˜æ˜¯å·²åœ¨èŠå¤©è¾“å…¥æ¡†ç•Œé¢ï¼ˆå¯ç›´æ¥è¾“å…¥æ–‡æœ¬ï¼‰ã€‚</li>
</ul>
<p>åŸºäºè§†è§‰æ¨¡å‹çš„è§£æç»“æœï¼ŒAutoGLMä¼šå°†å…¶è½¬åŒ–ä¸ºç²¾ç¡®çš„ã€å¯æ‰§è¡Œçš„<strong>åŠ¨ä½œæŒ‡ä»¤åºåˆ—</strong>ï¼Œå¹¶å†æ¬¡é€šè¿‡ADBæ‰§è¡Œã€‚</p>
<p>å‡å¦‚å½“å‰å¤„äºæ­¥éª¤2ï¼Œè¿”å›ä¸»å±å¹•åè§†è§‰ç†è§£æ¨¡å‹ä»å±å¹•æˆªå›¾ä¸­è¯†åˆ«åˆ°ä¼ä¸šå¾®ä¿¡åº”ç”¨å›¾æ ‡ï¼Œé‚£ä¹ˆå°†ä½ç½®ä¿¡æ¯å‘Šè¯‰å¤§è¯­è¨€æ¨¡å‹åå¯ä»¥å¾—åˆ°â€œæ‰¾åˆ°ç›®æ ‡åº”ç”¨ï¼Œè°ƒç”¨ADBç‚¹å‡»å¯¹åº”å±å¹•ä½ç½®â€çš„å†³ç­–ã€‚</p>
<p>å¦‚æœä»å±å¹•æˆªå›¾ä¸­æœªè¯†åˆ«åˆ°ä¼ä¸šå¾®ä¿¡åº”ç”¨å›¾æ ‡ï¼Œé‚£ä¹ˆç”±å¤§è¯­è¨€æ¨¡å‹æ¨ç†ä¸‹ä¸€æ­¥è¡ŒåŠ¨çš„è§„åˆ’ï¼Œä¹Ÿå°±æ˜¯â€œå·¦å³ç¿»é¡µâ€æŸ¥æ‰¾ä¼ä¸šå¾®ä¿¡åº”ç”¨ã€‚</p>
<p><strong>é‡ç‚¹æ€»ç»“</strong></p>
<p>åœ¨AutoGLMçš„è®¾è®¡æ¶æ„ä¸­ï¼Œå­˜åœ¨ä¸¤ç§æ¨¡å‹ï¼Œåˆ†åˆ«æ˜¯<strong>è§†è§‰ç†è§£æ¨¡å‹</strong>å’Œ<strong>å¤§è¯­è¨€æ¨¡å‹</strong>ï¼Œå„è‡ªæ‰¿æ‹…ä¸åŒçš„èŒè´£ã€‚</p>
<p><strong>è§†è§‰ç†è§£æ¨¡å‹</strong>åªè´Ÿè´£<strong>è§£æå±å¹•æˆªå›¾</strong>å¹¶å°†ç»“æ„åŒ–çš„è§£æç»“æœè½¬æ¢æˆè‡ªç„¶è¯­è¨€å¹¶å‘ŠçŸ¥å¤§è¯­è¨€æ¨¡å‹ï¼Œ<strong>å¤§è¯­è¨€æ¨¡å‹</strong>é€šè¿‡ç»“åˆåˆ†è§£ç”¨æˆ·æŒ‡ä»¤å¾—åˆ°çš„é€»è¾‘æ­¥éª¤å’Œè§†è§‰ç†è§£æ¨¡å‹çš„å®æ—¶æè¿°ç»“æœè¿›è¡Œ<strong>å†³ç­–</strong>ï¼Œå¹¶<strong>æ¨ç†å‡ºä¸‹ä¸€æ­¥è¡ŒåŠ¨</strong>ï¼Œå¦‚æ­¤å¾ªç¯ç›´åˆ°ç›®æ ‡å®ç°ã€‚</p>
<h2 data-id="heading-3">AutoGLMå®æˆ˜æ•™å­¦</h2>
<p>è¿™é‡Œä»…ä»¥å®‰å“æ‰‹æœºä¸ºä¾‹ï¼Œå¦‚æœä½ æ˜¯é¸¿è’™æ‰‹æœºæˆ–è‹¹æœæ‰‹æœºï¼Œè¯·ç§»æ­¥è‡³å®˜æ–¹æ–‡æ¡£ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzai-org%2FOpen-AutoGLM" target="_blank" title="https://github.com/zai-org/Open-AutoGLM" ref="nofollow noopener noreferrer">github.com/zai-org/Opeâ€¦</a></p>
<h3 data-id="heading-4">å‰ç½®å‡†å¤‡</h3>
<ul>
<li>ä¸€æ ¹æ”¯æŒæ•°æ®ä¼ è¾“çš„æ•°æ®çº¿</li>
<li>ä¸€å°ç¬”è®°æœ¬æˆ–å°å¼æœºï¼ˆæœ‰æ— çº¿ç½‘å¡æ›´ä½³ï¼‰</li>
<li>ä¸€éƒ¨å®‰å“ç³»ç»Ÿæ‰‹æœº</li>
</ul>
<p>æ»¡è¶³è¿™äº›ç¡¬æ€§æ¡ä»¶åæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹äº†ã€‚</p>
<h3 data-id="heading-5">å¼€å‘ç¯å¢ƒæ­å»º</h3>
<h4 data-id="heading-6">1. å®‰è£…Pythonç¯å¢ƒ</h4>
<p>å»ºè®®ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p>Python &gt;= 3.10</p>
<p>pip &gt;= 22.x</p>
</blockquote>
<p>Pythonçš„å®‰è£…è¿‡ç¨‹è¿™é‡Œä¸å¤šåšä»‹ç»ï¼Œè¯·è‡ªè¡Œç™¾åº¦~</p>
<h4 data-id="heading-7">2. å®‰è£…ADBå·¥å…·</h4>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftools%2Freleases%2Fplatform-tools%3Fhl%3Dzh-cn" target="_blank" title="https://developer.android.com/tools/releases/platform-tools?hl=zh-cn" ref="nofollow noopener noreferrer">developer.android.com/tools/releaâ€¦</a></p>
<p>ä¸‹è½½å®Œæˆåéœ€è¦æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¦åˆ™è¿è¡ŒAutoGLMé¡¹ç›®æ—¶ä¼šå‡ºç°è¯†åˆ«ä¸åˆ°ADBçš„æƒ…å†µã€‚</p>
<h4 data-id="heading-8">3. æ³¨å†ŒAPI Key</h4>
<p>å¹³å°åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbigmodel.cn%2Fusercenter%2Fproj-mgmt%2Fapikeys" target="_blank" title="https://bigmodel.cn/usercenter/proj-mgmt/apikeys" ref="nofollow noopener noreferrer">bigmodel.cn/usercenter/â€¦</a></p>
<p>æ³¨å†Œå¥½å¸å·åï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œå³å¯</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8b3e17ce29e4cbeae26b126bfcfba2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LS-57u05oCd5Z-6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899059&amp;x-signature=dIJspm%2BnyzALRv9fGwC5Sqqac5A%3D" alt="image.png" width="100%" loading="lazy"/>
<p>ä¸å¾—ä¸è¯´æ™ºè°±è¿˜æ˜¯å¾ˆæ…·æ…¨çš„ï¼Œæ–°ç”¨æˆ·æ³¨å†Œé€2000ä¸‡Tokenï¼Œå¯¹äºéé‡åº¦ç”¨æˆ·æ¥è¯´ç»å¯¹æ˜¯å¤Ÿç”¨çš„ã€‚</p>
<h4 data-id="heading-9">3. è·å–æºç </h4>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzai-org%2FOpen-AutoGLM" target="_blank" title="https://github.com/zai-org/Open-AutoGLM" ref="nofollow noopener noreferrer">github.com/zai-org/Opeâ€¦</a></p>
<pre><code class="hljs language-shell" lang="shell">git clone https://github.com/zai-org/Open-AutoGLM.git
</code></pre>
<h4 data-id="heading-10">4. é…ç½®API Key</h4>
<p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•å¹¶åˆ›å»º.envæ–‡ä»¶</p>
<pre><code class="hljs language-txt" lang="txt"># .env æ–‡ä»¶å†…å®¹ï¼Œè¿™é‡ŒæŠŠ${API_KEY}æ›¿æ¢æˆåˆšåˆšå¤åˆ¶çš„API Key  
GLM_API_KEY=${API_KEY}
</code></pre>
<h4 data-id="heading-11">5. å®‰è£…é¡¹ç›®ä¾èµ–</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. å®‰è£…åŸºç¡€ä¾èµ–</span>
pip install -r requirements.txt 
<span class="hljs-meta prompt_">
# </span><span class="bash">2. ä»¥ç¼–è¾‘æ¨¡å¼å®‰è£…é¡¹ç›®æœ¬èº« (å…³é”®æ­¥éª¤)</span>
pip install -e .
</code></pre>
<p>åˆ°è¿™é‡Œï¼ŒPCç«¯çš„é¡¹ç›®ç¯å¢ƒé…ç½®æˆ‘ä»¬å°±å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å¼€å§‹è¿›è¡Œæ‰‹æœºç«¯é¡¹ç›®ç¯å¢ƒé…ç½®ã€‚</p>
<h4 data-id="heading-12">6. å¯ç”¨å¼€å‘è€…æ¨¡å¼</h4>
<p>åœ¨æ‰‹æœºä¸Šï¼Œè¿›å…¥"è®¾ç½®" â†’ "å…³äºæ‰‹æœº"ï¼Œæ‰¾åˆ°"ç‰ˆæœ¬å·"ï¼Œè¿ç»­ç‚¹å‡» 7 æ¬¡ï¼ˆç›´åˆ°å‡ºç°æç¤ºï¼‰ï¼Œä½ ä¼šçœ‹åˆ°"æ‚¨å·²å¤„äºå¼€å‘è€…æ¨¡å¼"çš„æç¤ºã€‚</p>
<p>è¿”å›è®¾ç½®ä¸»ç•Œé¢ï¼Œè¿›å…¥"å¼€å‘è€…é€‰é¡¹"ï¼Œæ‰¾åˆ°"USBè°ƒè¯•"å’Œ"æ— çº¿è°ƒè¯•"ä¸¤ä¸ªé€‰é¡¹å¹¶å¼€å¯ã€‚</p>
<p>è¿™ä¸€æ­¥æ¯å°æ‰‹æœºæœ‰äº›è®¸å·®å¼‚ï¼Œå¤§å®¶æ ¹æ®å®é™…æƒ…å†µæ“ä½œå°±è¡Œã€‚</p>
<h4 data-id="heading-13">7. å®‰è£…ADB Keyboard</h4>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsenzhk%2FADBKeyBoard%2Fraw%2Fmaster%2FADBKeyboard.apk" target="_blank" title="https://github.com/senzhk/ADBKeyBoard/raw/master/ADBKeyboard.apk" ref="nofollow noopener noreferrer">github.com/senzhk/ADBKâ€¦</a></p>
<p>ä¸‹è½½å®Œæˆååœ¨æ‰‹æœºä¸Šè¿›è¡Œåº”ç”¨å®‰è£…ã€‚</p>
<p>å®‰è£…å®Œæˆåéœ€è¦åœ¨æ‰‹æœºã€è®¾ç½®-é”®ç›˜-è¾“å…¥æ³•ã€‘ä¸­æ‰‹åŠ¨åˆ‡æ¢ä¸ºADB Keyboardã€‚</p>
<p>è¾“å…¥æ—¶å±å¹•åº•éƒ¨ä¼šå‡ºç°ADB Keyboardçš„å­—æ ·ï¼ˆæ¯å°æ‰‹æœºå¯èƒ½æœ‰å·®å¼‚ï¼‰ã€‚</p>
<h4 data-id="heading-14">8. é¡¹ç›®ä¾èµ–å®‰è£…</h4>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. è¿›å…¥é¡¹ç›®</span>
cd Open-AutoGLM
<span class="hljs-meta prompt_">
# </span><span class="bash">2. å®‰è£…åŸºç¡€ä¾èµ–</span>  
pip install -r requirements.txt  
<span class="hljs-meta prompt_">
# </span><span class="bash">3. ä»¥ç¼–è¾‘æ¨¡å¼å®‰è£…é¡¹ç›®æœ¬èº« (å…³é”®æ­¥éª¤)</span>  
pip install -e .
<span class="hljs-meta prompt_">
# </span><span class="bash">4.</span> 
</code></pre>
<h4 data-id="heading-15">9. éªŒè¯è®¾å¤‡é€šä¿¡</h4>
<p>åœ¨é¡¹ç›®è¿è¡Œä¹‹å‰ï¼Œç”¨å‡†å¤‡å¥½çš„æ•°æ®çº¿è¿æ¥ç”µè„‘å’Œæ‰‹æœºï¼Œç¡®ä¿èƒ½æ­£å¸¸é€šä¿¡ï¼ˆè¿æ¥æˆåŠŸæ‰‹æœºä¸Šä¼šå‡ºç°æ˜¯å¦ä¿¡ä»»è®¾å¤‡çš„å¼¹çª—ï¼Œç¡®è®¤å³å¯ï¼‰ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åœ¨æ§åˆ¶å°è¾“å…¥adb deviceså‘½ä»¤ï¼ŒéªŒè¯è®¾å¤‡æ˜¯å¦è¿æ¥æˆåŠŸï¼ˆå¦‚æœæ‰¾ä¸åˆ°adbå‘½ä»¤ï¼Œè¯·æ£€æŸ¥æ­¥éª¤2ï¼‰</span>
adb devices
</code></pre>
<p>å½“è¿æ¥æˆåŠŸï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºè®¾å¤‡ä¿¡æ¯</p>
<pre><code class="hljs language-shell" lang="shell">List of devices attached  
xxxxx Â  Â device
</code></pre>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ•´ä¸ªå¼€å‘ç¯å¢ƒçš„æ­å»ºã€‚</p>
<h3 data-id="heading-16">é¡¹ç›®è¿è¡Œ</h3>
<h4 data-id="heading-17">æ–¹å¼ä¸€</h4>
<p>æˆ‘ä»¬å…ˆé‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡<strong>ä¸»æ–‡ä»¶å…¥å£</strong>è¿è¡ŒAutoGLMã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. è¿›å…¥é¡¹ç›®</span>
cd Open-AutoGLM
<span class="hljs-meta prompt_">
# </span><span class="bash">2. è¿è¡ŒAutoGLM</span>
python main.py --base-url https://open.bigmodel.cn/api/paas/v4 --model "autoglm-phone" --apikey "è¿™é‡Œå¡«ä¹‹å‰æ³¨å†Œçš„API Key" "è¿™é‡Œå¡«è¦æ‰§è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€ä¼ä¸šå¾®ä¿¡"
</code></pre>
<p>å¦‚æœè¿è¡ŒæˆåŠŸï¼Œä¼šå‡ºç°å¦‚ä¸‹è¾“å‡ºï¼Œå¹¶ä¸”åœ¨æ‰‹æœºä¼šå¼€å§‹æ‰§è¡Œè¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œï¼Œå¦åˆ™è¯·æ ¹æ®æ—¥å¿—è¾“å‡ºæ’æŸ¥ç›¸åº”æ­¥éª¤ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0edc69591e8f457e8b833b9571370b09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LS-57u05oCd5Z-6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899059&amp;x-signature=u9%2B%2FNnuBzLkeco70OCKRj8jPago%3D" alt="run_agent.png" width="100%" loading="lazy"/>
<p>é™¤äº†æ•°æ®çº¿ä¼ è¾“ï¼ŒAutoGLMä¹Ÿæ”¯æŒå±€åŸŸç½‘ä¼ è¾“ï¼Œæ‰‹æœºå’Œç”µè„‘éœ€è¦è¿æ¥åŒä¸€å±€åŸŸç½‘ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œå‚æ•°ä¸­æºå¸¦--connectå‚æ•°å¹¶å¡«å†™ipå’Œç«¯å£ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">127.0.0.1éœ€è¦æ›¿æ¢æˆå®é™…çš„å±€åŸŸç½‘ipï¼Œé€šä¿¡çš„é»˜è®¤ç«¯å£ä¸º5555ï¼Œä¸éœ€è¦åšæ›´æ”¹</span>
python main.py --connect 127.0.0.1:5555 --base-url https://open.bigmodel.cn/api/paas/v4 --model "autoglm-phone" --apikey "è¿™é‡Œå¡«ä¹‹å‰æ³¨å†Œçš„API Key" "è¿™é‡Œå¡«è¦æ‰§è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚æ‰“å¼€ä¼ä¸šå¾®ä¿¡"
</code></pre>
<h4 data-id="heading-18">æ–¹å¼äºŒ</h4>
<p>AutoGLMé¡¹ç›®æœ¬èº«å·²ç»é›†æˆäº†æ¥å£æœåŠ¡ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä½œä¸ºæœåŠ¡æš´éœ²ç»™å¤–éƒ¨è¿›è¡Œè°ƒç”¨ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼è¿è¡Œã€‚</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">å¯åŠ¨æœåŠ¡</span>
<span class="hljs-meta prompt_"># </span><span class="bash">uvicorn server:app --host 0.0.0.0 --port 8001</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¥åº·æ£€æŸ¥ï¼ˆGETè¯·æ±‚ï¼‰</span>
http://{ip}:8001/health

<span class="hljs-comment"># åˆ—å‡ºå½“å‰å·²è¿æ¥è®¾å¤‡ï¼ˆGETè¯·æ±‚ï¼‰</span>
http://{ip}:8001/devices

<span class="hljs-comment"># è¿è¡ŒAutoGLMï¼ˆPOSTè¯·æ±‚ï¼‰</span>
http://{ip}:8001/run
{
Â   <span class="hljs-string">"task"</span>: <span class="hljs-string">"æ‰“å¼€ä¼ä¸šå¾®ä¿¡"</span>,
Â   <span class="hljs-string">"base_url"</span>: <span class="hljs-string">"https://open.bigmodel.cn/api/paas/v4"</span>, Â  Â <span class="hljs-comment"># å¯é€‰ï¼Œé»˜è®¤è¯»å–ç¯å¢ƒå˜é‡</span>
Â   <span class="hljs-string">"model"</span>: <span class="hljs-string">"autoglm-phone"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰</span>
Â   <span class="hljs-string">"api_key"</span>: <span class="hljs-string">"è¿™é‡Œå¡«å†™API_Key"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰</span>
Â   <span class="hljs-string">"device_type"</span>: <span class="hljs-string">"adb"</span> | <span class="hljs-string">"hdc"</span> | <span class="hljs-string">"ios"</span>, Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰ï¼Œé»˜è®¤ adb</span>
Â   <span class="hljs-string">"device_id"</span>: <span class="hljs-string">"emulator-5554"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰</span>
Â   <span class="hljs-string">"max_steps"</span>: 100, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰</span>
Â   <span class="hljs-string">"lang"</span>: <span class="hljs-string">"cn"</span> | <span class="hljs-string">"en"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># å¯é€‰</span>
Â   <span class="hljs-string">"wda_url"</span>: <span class="hljs-string">"http://localhost:8100"</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># iOSå¯é€‰</span>
}
</code></pre>
<h2 data-id="heading-19">ç¬¬ä¸‰æ–¹å·¥å…·æ‹“å±•</h2>
<p>å¦‚æœå¤§å®¶ä»…ä»…æƒ³å°ä¸ªé²œï¼Œæˆ–æ˜¯æƒ³è¦å¼€ç®±å³ç”¨ï¼Œé‚£ä¹ˆæ¨èä½¿ç”¨ç¤¾åŒºçš„å¯è§†åŒ–å·¥å…·ã€AutoGLM GUIã€‘ï¼Œåº”ç”¨å†…ç½®äº†AutoGLMçš„å…¨éƒ¨è¿è¡Œç¯å¢ƒï¼Œåªéœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…å¥½ADB Keyboardï¼Œå¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå°±èƒ½å¤Ÿä»¥æœ€ç›´è§‚çš„æ–¹å¼è¿è¡ŒAutoGLMã€‚</p>
<p>ä»“åº“åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsuyiiyii%2FAutoGLM-GUI" target="_blank" title="https://github.com/suyiiyii/AutoGLM-GUI" ref="nofollow noopener noreferrer">github.com/suyiiyii/Auâ€¦</a></p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/570da1a32b9549698df359847b9048f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LS-57u05oCd5Z-6:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899059&amp;x-signature=sIg16W27%2BY63JjW1o3Nb%2BMyRmFo%3D" alt="AutoGLM_GUI.png" width="100%" loading="lazy"/>
<p>æ•´ä¸ªç•Œé¢çš„å¸ƒå±€éå¸¸ç®€æ´æ¸…æ™°ï¼Œå·¦ä¾§æ˜¯è¿æ¥çš„è®¾å¤‡ä¿¡æ¯ï¼Œä¸­é—´æ˜¯AutoGLMçš„æ€è€ƒè¿‡ç¨‹ï¼Œå³ä¾§æ˜¯æ‰‹æœºçš„å®æ—¶ç”»é¢ã€‚</p>
<h2 data-id="heading-20">ç»“è¯­</h2>
<p>AutoGLMæœ‰æ„æ€åœ¨å“ªå„¿ï¼Ÿæˆ‘è®¤ä¸ºæ˜¯å®ƒçš„è®¾è®¡ç†å¿µï¼Œå®ƒæŠ›å¼ƒäº†ä¼ ç»Ÿè‡ªåŠ¨åŒ–é‚£å¥—é¢„è®¾æµç¨‹ï¼Œé€šè¿‡å®æ—¶çš„å›¾åƒè§£æå’Œè§„åˆ’æ¨ç†æ¥å®Œæˆè‡ªåŠ¨åŒ–ã€‚</p>
<p>æŒ‰é’®æ²¡å‡ºæ¥å°±ç­‰ç­‰ï¼Œå¸ƒå±€å˜äº†å°±æ‰¾æ‰¾ï¼Œåº”ç”¨å´©æºƒäº†å°±é‡å¯ï¼Œå®åœ¨ä¸è¡Œè¿˜çŸ¥é“æ¢æ¡è·¯è¯•è¯•ã€‚</p>
<p>ä¸å¾—ä¸è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¤§èƒ†çš„ä¸‹æ³¨ï¼Œå‹çš„æ˜¯LLMè¿™ä¸ªæ–¹å‘çš„æœªæ¥ï¼Œæ¯•ç«ŸAIå¹»è§‰ã€æ¨ç†æ•ˆç‡ä½ä¸‹ã€Tokenè´¹ç”¨é«˜è¿™äº›è¢«è¯Ÿç—…çš„é—®é¢˜æœªæ¥ç©¶ç«Ÿä¼šä¸ä¼šè¢«è§£å†³ï¼Œæˆ‘ä»¬è°ä¹Ÿè¯´ä¸å‡†ã€‚</p>
<p>ä½†æ–‡æ˜ä¸ç§‘æŠ€çš„è¿›æ­¥å§‹äºæœŸå¾…å’Œæƒ³è±¡ï¼Œä»»ä½•ä¸€ä¸ªå…ˆé©±è€…éƒ½å€¼å¾—è¢«å°Šæ•¬ã€‚</p>
<p>ç°åœ¨çš„GUI Agentè™½ç„¶è¿˜ä¸å¤ªå®Œç¾ï¼Œä½†è¿™æ¡è·¯ï¼Œå·²ç»æŒºè®©äººæœŸå¾…äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Prompt EngineeringåŸºç¡€å®è·µï¼šè§’è‰²è®¾å®š/çº¦æŸæ¡ä»¶ç­‰æŠ€å·§]]></title>    <link>https://juejin.cn/post/7594576956421210138</link>    <guid>https://juejin.cn/post/7594576956421210138</guid>    <pubDate>2026-01-13T09:05:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594576956421210138" data-draft-id="7594523145211150390" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Prompt EngineeringåŸºç¡€å®è·µï¼šè§’è‰²è®¾å®š/çº¦æŸæ¡ä»¶ç­‰æŠ€å·§"/> <meta itemprop="keywords" content="OpenAI,Agent"/> <meta itemprop="datePublished" content="2026-01-13T09:05:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Prompt EngineeringåŸºç¡€å®è·µï¼šè§’è‰²è®¾å®š/çº¦æŸæ¡ä»¶ç­‰æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T09:05:09.000Z" title="Tue Jan 13 2026 09:05:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰å­¦ä¹ äº†ä¸€äº›æ¨¡å‹APIè°ƒç”¨ï¼Œä»¥åŠä¸€äº›æ–‡æœ¬åˆ†ç±»å’Œå†…å®¹ç”Ÿæˆçš„ä¸€äº›åŸºç¡€æŠ€å·§å’Œæ¡ˆä¾‹ï¼Œæ¥ä¸‹æ¥å®æ“ä¸€ä¸‹ Prompt Engineering ç›¸å…³æŠ€å·§</p>
<h2 data-id="heading-1">Prompt Engineering</h2>
<p>Prompt Engineeringï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰æ˜¯è®¾è®¡å’Œä¼˜åŒ–ç”¨äºä¸AIè¯­è¨€æ¨¡å‹äº¤äº’çš„è¾“å…¥æç¤ºçš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯å¼•å¯¼æ¨¡å‹äº§ç”Ÿæ›´å‡†ç¡®ã€ç›¸å…³å’Œæœ‰ç”¨çš„è¾“å‡º</p>
<p>è¿™ä¸ªå¸¸ç”¨AIå·¥å…·éƒ½çŸ¥é“ï¼Œå¹³æ—¶å’ŒAIå¯¹è¯çš„å†…å®¹å°±æ˜¯æç¤ºè¯ï¼Œæ ¹æ®ä¸åŒåœºæ™¯ä½¿ç”¨ä¸åŒçš„å¯¹è¯æ–¹å¼å’Œæé—®æŠ€å·§ï¼ŒAIæ¨¡å‹æ‰ä¼šæ ¹æ®ä¸åŒæç¤ºè¯å›ç­”ä¸åŒçš„ç»“æœ</p>
<h2 data-id="heading-2">åŸºæœ¬åŸåˆ™</h2>
<ol>
<li><strong>æ˜ç¡®æ€§</strong>ï¼šæ¸…æ™°è¡¨è¾¾éœ€æ±‚</li>
<li><strong>å…·ä½“æ€§</strong>ï¼šæä¾›è¯¦ç»†ä¿¡æ¯</li>
<li><strong>ä¸Šä¸‹æ–‡</strong>ï¼šç»™å‡ºå¿…è¦èƒŒæ™¯</li>
<li><strong>ç¤ºä¾‹</strong>ï¼šæä¾›å‚è€ƒæ ·ä¾‹</li>
<li><strong>çº¦æŸ</strong>ï¼šè®¾å®šè¾“å‡ºé™åˆ¶</li>
</ol>
<p>è¿™æ–¹é¢å°±ä¸å¤šè¯´äº†ï¼Œçç»™AIè¯´ï¼Œè®©AIå»çŒœçš„è¯ï¼ŒTaçš„å›ç­”ä¹Ÿæ˜¯çæ°ï¼Œè¿™äº›éƒ½æ˜¯åŸºæœ¬ä½¿ç”¨æŠ€å·§ï¼Œæˆ‘ä»¬ä¸»è¦è¿˜æ˜¯çœ‹ä»£ç ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨çš„</p>
<h2 data-id="heading-3">åŸºç¡€å®è·µ</h2>
<h3 data-id="heading-4">é›¶æ ·æœ¬æç¤º</h3>
<p>é›¶æ ·æœ¬æç¤ºï¼ˆZero-shot Promptingï¼‰æ˜¯æŒ‡åœ¨æ²¡æœ‰ä»»ä½•ç¤ºä¾‹çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ç»™æ¨¡å‹ä¸€ä¸ªä»»åŠ¡æè¿°ï¼Œè®©æ¨¡å‹æ ¹æ®æè¿°å®Œæˆä»»åŠ¡</p>
<p>ä¾‹å¦‚ç›´æ¥é—®è±†åŒ…ï¼Œ"åˆ¤æ–­ä»¥ä¸‹æ–‡æœ¬çš„æƒ…æ„Ÿï¼šä»Šå¤©çš„å¤©æ°”çœŸç³Ÿç³•ï¼Œä¸€åˆ‡éƒ½ä¸é¡ºåˆ©ï¼"ï¼Œæ¨¡å‹ä¼šæ ¹æ®æè¿°ç›´æ¥å›ç­”</p>
<p>å¦‚æœæ˜¯é—®è±†åŒ…"ä»Šå¤©åŒ—äº¬çš„å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"ï¼Œè¿™ä¸ªå›ç­”æ˜¯æŸ¥äº†ç›¸å…³å¤©æ°”APIç„¶åå›ç­”çš„</p>
<p>ä¸‹é¢çœ‹ä»£ç çš„æƒ…å†µ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os 
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv 
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI 

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ </span>
load_dotenv() 

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯ </span>
client = OpenAI(api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>)) 

<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
client = OpenAI()

response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"åˆ¤æ–­ä»¥ä¸‹æ–‡æœ¬çš„æƒ…æ„Ÿï¼šä»Šå¤©çš„å¤©æ°”çœŸç³Ÿç³•ï¼Œä¸€åˆ‡éƒ½ä¸é¡ºåˆ©ï¼"</span>}
    ]
)

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æƒ…æ„Ÿåˆ¤æ–­ç»“æœ: <span class="hljs-subst">{response.choices[<span class="hljs-number">0</span>].message.content}</span>"</span>)
</code></pre>
<p>è¾“å‡ºæƒ…æ„Ÿç»“æœï¼šè´Ÿé¢ï¼Œå¹¶è¯´æ˜äº†ç†ç”±</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/418e60f8a14a49bcaa1e4dc4a617f5f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899908&amp;x-signature=RiQ4O5SquV6MIY4j47wq08lWfuw%3D" alt="" loading="lazy"/></p>
<p>å’Œæ–‡æœ¬åˆ†ç±»ï¼Œæ–‡æœ¬ç”Ÿæˆä»£ç ç”¨æ³•ä¸€æ ·ï¼Œåªæ˜¯ <code>content</code> å‚æ•°ä¸­çš„å†…å®¹å˜äº†</p>
<h3 data-id="heading-5">å°‘æ ·æœ¬æç¤º</h3>
<p>å°‘æ ·æœ¬æç¤ºï¼ˆFew-shot Promptingï¼‰ï¼Œå°±æ˜¯æä¾›å°‘é‡ç¤ºä¾‹å¼•å¯¼æ¨¡å‹çš„å›ç­”</p>
<p>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å°†ä»¥ä¸‹æ–‡æœ¬åˆ†ç±»ä¸ºç§¯æã€æ¶ˆææˆ–ä¸­æ€§ï¼š\n1. è¿™éƒ¨ç”µå½±å¤ªæ£’äº†ï¼â†’ ç§¯æ\n2. ä»Šå¤©ä¸‹é›¨äº†ã€‚â†’ ä¸­æ€§\n3. æˆ‘è®¨åŒæ’é˜Ÿã€‚â†’ æ¶ˆæ\n4. è¿™å®¶é¤å…çš„é£Ÿç‰©å¾ˆç¾å‘³ã€‚â†’"</span>}
    ]
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p>æä¾›äº†ä¸‰ç§ç±»å‹çš„åˆ†ç±»ç¤ºä¾‹ï¼Œè®©æ¨¡å‹åˆ†ææä¾›çš„å¥å­å±äºå“ªç§åˆ†ç±»ç»“æœ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3fc29a385f84a1f8f0195bafcc9021c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899908&amp;x-signature=Gp3VNMnghH%2FwwfEsy7z4Kk3sWiA%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æ€ç»´é“¾æç¤º</h3>
<p>æ€ç»´é“¾æç¤ºï¼ˆChain-of-Thought Promptingï¼‰ï¼Œå°±æ˜¯åœ¨æç¤ºä¸­åŒ…å«ä¸€ç³»åˆ—ä¸­é—´æ­¥éª¤ï¼Œå¼•å¯¼æ¨¡å‹é€æ­¥æ€è€ƒå’Œè§£å†³é—®é¢˜</p>
<p>åœ¨ä¸€äº›éœ€è¦å¤šæ­¥éª¤æ“ä½œæ¨ç†çš„åœºæ™¯ä¸­ï¼Œä¾‹å¦‚åœ¨ç¼–ç ä¸­ä¹Ÿå¸¸è§ï¼Œä¾‹å¦‚è¦å®ç°ä¸€ä¸ªå¤æ‚çš„å‡½æ•°åŠŸèƒ½ï¼Œæç¤ºä¸­å¯ä»¥åŒ…å«å‡½æ•°çš„å®ç°æ­¥éª¤ï¼Œå¼•å¯¼æ¨¡å‹é€æ­¥ç¼–å†™ä»£ç </p>
<p>ä¸è¿‡ç°åœ¨çš„AIæ¨¡å‹ä¼¼ä¹å·²ç»èƒ½å¤ŸæŠŠå¾ˆå¤šéœ€æ±‚è‡ªå·±åˆ†æç†è§£ç›´æ¥å¹²æ´»äº†ï¼Œå¾ˆå¤šæ—¶å€™ç›´æ¥åœ¨ Antigravityï¼ŒTrae CNï¼Œç­‰AIç¼–è¾‘å™¨ä¸­ç›´æ¥æè¿°éœ€è¦çš„ç»“æœçš„å°±è¡Œï¼ˆå·¥ç¨‹å¸ˆå½»åº•åŒ–èº«éœ€æ±‚æè¿°å¸ˆï¼‰</p>
<p>å¥½äº†ï¼Œçœ‹ä¸ªæ—¥å¸¸è¡Œç¨‹è§„åˆ’çš„ä¾‹å­ï¼Œé‡Œé¢æ¶‰åŠåˆ°å› æœæ¨ç†</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"é—®é¢˜ï¼šå°çº¢è¦åœ¨å‘¨æ—¥å®Œæˆä»¥ä¸‹äº‹æƒ…ï¼šâ‘ æ´—è¡£æœï¼ˆ30 åˆ†é’Ÿï¼‰ã€â‘¡åšé¥­ï¼ˆ40 åˆ†é’Ÿï¼‰ã€â‘¢æ‰“æ‰«æˆ¿é—´ï¼ˆ25 åˆ†é’Ÿï¼‰ã€â‘£çœ‹ç”µå½±ï¼ˆ1 å°æ—¶ï¼‰ã€‚è¯·å¸®å¥¹è§„åˆ’æœ€çœæ—¶çš„é¡ºåºï¼Œå¹¶è¯´æ˜åŸå› ã€‚è¯·åˆ†æ­¥åˆ†æå“ªäº›äº‹æƒ…å¯ä»¥åŒæ—¶åšï¼Œå†è®¡ç®—æ€»è€—æ—¶"</span>}
    ]
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p>æ¨¡å‹åˆ†æçš„å¾ˆå¥½ï¼Œç»™å‡ºå›ç­”çš„åŒæ—¶ï¼Œè¿˜è€ƒè™‘äº†å®é™…åœºæ™¯ä¸­çš„æ—¶é—´å†²çªé—®é¢˜ï¼Œä¾‹å¦‚åœ¨åšé¥­æ—¶è¦é«˜åº¦ä¸“æ³¨ç­‰ï¼Œä¼šé™ä½å¹¶è¡Œç¨‹åº¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b07f0707a0294a6395905ab00e007ec1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899908&amp;x-signature=3yV9zxD0ly2Tgt2nRc3vqJgzIu8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">è§’è‰²è®¾å®š</h3>
<p>è§’è‰²è®¾å®šï¼ˆRole-playing Promptingï¼‰ï¼Œå°±æ˜¯åœ¨æç¤ºä¸­æŒ‡å®šæ¨¡å‹çš„è§’è‰²å’Œè¡Œä¸º</p>
<p>ä¾‹å¦‚ï¼Œè®©å®ƒæ‰®æ¼”ä¸“ä¸šå®¢æœï¼Œå›ç­”ç”¨æˆ·é—®é¢˜æ—¶è¦ä¸“ä¸šã€å‹å¥½ï¼›æ‰®æ¼”ä¸€åä¸“ä¸šè€å¸ˆï¼Œæ ¹æ®ç”¨æˆ·é—®é¢˜ï¼Œç”¨ä¸“ä¸šçš„è¯­è¨€å›ç­”</p>
<p>æ—¥å¸¸æˆ‘ä»¬åœ¨AIç¼–è¾‘å™¨ä¸­ç”¨çš„æœ€å¤šçš„å°±æ˜¯è§’è‰²è®¾å®šï¼Œå‰æéƒ½æ˜¯è®©æ¨¡å‹æ‰®æ¼”ä¸“ä¸šçš„èµ„æ·±å·¥ç¨‹å¸ˆï¼Œç„¶åæ ¹æ®é—®é¢˜å›ç­”å¯¹åº”çš„ç¼–ç é—®é¢˜</p>
<p>ä¸‹é¢çœ‹ä¸€ä¸ªç®€å•çš„ä»£ç ä¾‹å­</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è‹±è¯­æ•™å¸ˆï¼Œè¯·ç”¨ç®€å•æ˜“æ‡‚çš„æ–¹å¼è§£é‡Šè¯­æ³•ã€‚"</span>},
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è¯·è§£é‡Šç°åœ¨å®Œæˆæ—¶çš„ç”¨æ³•ã€‚"</span>}
    ]
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p><strong>æ³¨æ„ï¼</strong> ä¸Šé¢çš„ä»£ç æ˜æ˜¾å‚æ•°å¤šäº†å†…å®¹ï¼Œ``message` ä¸­åŒ…å«äº†ç³»ç»Ÿè§’è‰²å’Œç”¨æˆ·è§’è‰²çš„å†…å®¹</p>
<p>è™½ç„¶é—®é¢˜ç®€å•ï¼Œæ¨¡å‹çš„å›ç­”å¾ˆä¸°å¯Œï¼Œè¿˜ä¼šè¿›è¡Œä¸‹ä¸€æ­¥å¼•å¯¼æç¤ºï¼Œå®Œæ•´è¾“å‡ºå¦‚ä¸‹</p>
<pre><code class="hljs language-shell" lang="shell">(venv) w@GYW:~/AIProjects/ai-agent-project$ python test_openai.py 
ä¸‹é¢ç”¨ç®€å•çš„æ–¹å¼è§£é‡Šç°åœ¨å®Œæˆæ—¶ï¼ˆpresent perfectï¼‰ã€‚

1) ç»“æ„
- è‚¯å®šå¥ï¼šä¸»è¯­ + have/has + è¿‡å»åˆ†è¯ï¼ˆV3ï¼‰
  - I have finished. / She has eaten. / They have gone.
- å¦å®šå¥ï¼šä¸»è¯­ + have/has not + è¿‡å»åˆ†è¯
  - I have not seen it. / He hasnâ€™t finished yet.
- ç–‘é—®å¥ï¼šHave/Has + ä¸»è¯­ + è¿‡å»åˆ†è¯ï¼Ÿ
  - Have you visited Paris? / Has she eaten?

å°æé†’ï¼šåŠ¨è¯çš„è¿‡å»åˆ†è¯è¦è®°ï¼Œè§„åˆ™åŠ¨è¯ç”¨-edï¼Œä¸è§„åˆ™åŠ¨è¯è¦è®°å½¢ã€‚

2) ç°åœ¨å®Œæˆæ—¶çš„å¸¸è§ç”¨æ³•ï¼ˆè¦ç‚¹ï¼‰
- ç”¨æ³•Aï¼šåˆ°ç°åœ¨ä¸ºæ­¢çš„â€œç»å†â€ã€‚ä¸æŒ‡æ˜å…·ä½“æ—¶é—´ï¼Œå¼ºè°ƒå·²ç»åšè¿‡æŸäº‹çš„ç»éªŒæˆ–ç»å†ã€‚
  - ä¾‹ï¼šI have been to Japan. / Have you ever tasted sashimi?
- ç”¨æ³•Bï¼šä»è¿‡å»ä¸€ç›´æŒç»­åˆ°ç°åœ¨ï¼Œå¯èƒ½è¿˜åœ¨ç»§ç»­ã€‚å¸¸ç”¨ since/for è¡¨ç¤ºèµ·ç‚¹æˆ–æŒç»­æ—¶é—´ã€‚
  - ä¾‹ï¼šShe has lived here for five years. / He has worked at the company since 2010.
- ç”¨æ³•Cï¼šæœ€è¿‘å‘ç”Ÿï¼Œå¯¹ç°åœ¨æœ‰å½±å“/ç»“æœã€‚
  - ä¾‹ï¼šI have just finished my homework. / They have already left.
  - å¸¸ç”¨è¯ï¼šjustï¼ˆåˆšåˆšï¼‰ã€recently/recentï¼ˆæœ€è¿‘ï¼‰ã€alreadyï¼ˆå·²ç»ï¼‰
- ç”¨æ³•Dï¼šåœ¨è¿˜æ²¡ç»“æŸçš„æ—¶é—´æ®µå†…å‘ç”Ÿè¿‡å¤šæ¬¡ï¼ˆæˆ–ä»åœ¨å‘ç”Ÿï¼‰ã€‚
  - ä¾‹ï¼šThis week I have seen three movies. / I have visited three museums today.ï¼ˆæ—¶é—´æ®µè¿˜æ²¡ç»“æŸï¼‰
- ç”¨æ³•Eï¼šä¸æ—¶é—´ä¿¡å·è¯æ­é…æ—¶çš„ç”¨æ³•
  - ä¿¡å·è¯ï¼šever, never, just, already, recently, lately, so far, up to now, for, since, this week, today
  - æ³¨æ„ï¼šå¸¦å…·ä½“è¿‡å»æ—¶é—´çš„è¯ï¼ˆyesterdayã€last year ç­‰ï¼‰é€šå¸¸ç”¨ä¸€èˆ¬è¿‡å»æ—¶ï¼Œè€Œä¸æ˜¯ç°åœ¨å®Œæˆæ—¶ã€‚

3) ä¸ä¸€èˆ¬è¿‡å»æ—¶çš„åŒºåˆ«ï¼ˆè¦ç‚¹å¯¹æ¯”ï¼‰
- ç°åœ¨å®Œæˆæ—¶å…³æ³¨â€œç›´åˆ°ç°åœ¨çš„å½±å“ã€ç»éªŒæˆ–ç»“æœâ€ï¼Œä¸ç‰¹åˆ«è¯´å…·ä½“å“ªä¸€å¤©å‘ç”Ÿäº†ä»€ä¹ˆã€‚
- ä¸€èˆ¬è¿‡å»æ—¶è®²çš„æ˜¯â€œåœ¨è¿‡å»æŸä¸€å…·ä½“æ—¶é—´å‘ç”Ÿå¹¶ç»“æŸçš„äº‹â€ã€‚
  - ä¾‹ï¼šI lived in Paris for two years.ï¼ˆè¿‡å»çš„ç»å†ï¼Œä½†å·²ç»ç»“æŸï¼‰ vs I have lived in Paris for two years.ï¼ˆåˆ°ç°åœ¨è¿˜å¯èƒ½è¿˜ä½åœ¨å·´é»ï¼Œå¼ºè°ƒæŒç»­åˆ°ç°åœ¨ï¼‰
  
4) å¸¸è§é”™è¯¯åŠè¦ç‚¹
- é”™å†™è¿‡å»åˆ†è¯ï¼šI have wentï¼ˆé”™ï¼Œæ­£ç¡®ï¼šgoneï¼‰/ I have eatenï¼ˆå¯¹ï¼‰
- ä¸è¯¥å’Œå…·ä½“æ—¶é—´ä¸€èµ·ç”¨ç°åœ¨å®Œæˆæ—¶ï¼šæœ‰å…·ä½“æ—¶é—´ç‚¹çš„äº‹ç”¨ä¸€èˆ¬è¿‡å»æ—¶ï¼Œå¦‚ Yesterday I came homeæ—©ï¼›ä¸è¿‡å¦‚æœå¼ºè°ƒâ€œä»é‚£æ—¶åˆ°ç°åœ¨çš„å½±å“â€ï¼Œä¹Ÿå¯ç”¨ç°åœ¨å®Œæˆæ—¶ä½†è¾ƒå°‘è§ã€‚
- â€œhave/has + beenâ€ çš„ç”¨æ³•ï¼šä¸åœ°ç‚¹ã€çŠ¶æ€ç›¸å…³æ—¶å¸¸ç”¨ be çš„è¿‡å»åˆ†è¯ï¼ˆbeenï¼‰æ¥è¡¨ç¤ºå»è¿‡æŸåœ°æˆ–ç»å†è¿‡æŸäº‹ã€‚
  - I have been to China.ï¼ˆå»è¿‡ï¼Œå›æ¥ï¼‰ vs I have gone to China.ï¼ˆå»ä¸­å›½äº†ï¼Œå¯èƒ½è¿˜æ²¡å›ï¼‰

5) å¿«é€Ÿç»ƒä¹ ï¼ˆè¯·ç”¨ç°åœ¨å®Œæˆæ—¶å†™å‡ºè‹±æ–‡å¥å­ï¼‰
- ä½ åˆ°è¿‡æ—¥æœ¬å—ï¼Ÿ â†’ Have you ever been to Japan?
- ä»–ä»ä¸¤å¹´å‰ä¸€ç›´ä½åœ¨è¿™é‡Œã€‚ â†’ He has lived here for two years.ï¼ˆå¦‚æœç°åœ¨ä¸å†ä½è¿™é‡Œï¼Œç”¨è¿‡å»æ—¶ï¼šlived here for two years and moved awayï¼‰
- æˆ‘åˆšåƒå®Œæ™šé¥­ã€‚ â†’ I have just eaten dinner.
- æˆ‘ä»¬è¿™ä¸€å‘¨çœ‹è¿‡ä¸‰éƒ¨ç”µå½±ã€‚ â†’ We have seen three movies this week.

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç»™ä½ ä¸€ç»„ç»ƒä¹ é¢˜å’Œç­”æ¡ˆï¼Œæˆ–è€…æ ¹æ®ä½ çš„æ°´å¹³ç»™å‡ºæ›´å¤šä¾‹å¥ç»ƒä¹ ã€‚éœ€è¦çš„è¯å‘Šè¯‰æˆ‘ä½ çš„æ¯è¯­ã€å¸Œæœ›é‡ç‚¹ç»ƒä¹ çš„åœºæ™¯ï¼ˆå¦‚æ—…è¡Œã€å·¥ä½œã€è€ƒè¯•ç­‰ï¼‰ã€‚
</code></pre>
<p>åä¸“ä¸šåŒ–çš„é—®ç­”æ—¶ï¼Œéå¸¸é€‚åˆè¿™ç§è§’è‰²è®¾å®šæ¨¡å¼</p>
<h3 data-id="heading-8">çº¦æŸæ¡ä»¶</h3>
<p>è¿™ä¸ªå¯å¤ªå¸¸è§äº†ï¼Œä¾‹å¦‚è®©ä»£ç ç”Ÿæˆä¸€æ®µ <code>è‰å¸½lufei</code> çš„è‡ªæˆ‘ä»‹ç»ï¼Œè®©å®ƒé™åˆ¶å­—æ•°ï¼Œä¾‹å¦‚100å­—ä»¥å†…</p>
<pre><code class="hljs language-python" lang="python">response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è¯·ç»™'è‰å¸½lufei'è¿™ä¸ªå…¬ä¼—å·åšä¸»å†™ä¸€æ®µ100å­—çš„ä»‹ç»ï¼Œä»–è¿‘æœŸä¸“æ³¨ç ”ç©¶AI Agentç›¸å…³åº”ç”¨å’Œå¼€å‘å†…å®¹ã€‚"</span>},
    ]
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1707809417a4c4186ad062ce101e07c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899908&amp;x-signature=kJOmImmFpUh8otKQ4qmDCeLiy4I%3D" alt="" loading="lazy"/></p>
<p>æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæä¾›èµ„æ–™è®©AIå†™æ€»ç»“ï¼Œè¾“å‡ºæ ¼å¼ä¸ºWordï¼Œæˆ–è€…ä»£ç è¾“å‡ºä¸ºJSONï¼Œæˆ–è€…ä½¿ç”¨å…¶ä»–è¯­è¨€å®ç°ç­‰éƒ½æ˜¯çº¦æŸæ¡ä»¶</p>
<h2 data-id="heading-9">å°ç»“</h2>
<p>æç¤ºè¯å·¥ç¨‹å¸ˆå……åˆ†å‘æŒ¥AIå¤§æ¨¡å‹èƒ½åŠ›çš„å…³é”®ï¼Œé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯å¯ä»¥è®©æ¨¡å‹æ›´å¥½çš„ç†è§£æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå¹¶ç”Ÿæˆç¬¦åˆéœ€æ±‚çš„å†…å®¹</p>
<p>åƒä¸€äº›å›¾ç‰‡ï¼Œè§†é¢‘çš„ç”Ÿæˆå°±éœ€è¦æ›´ä¸“ä¸šçš„æç¤ºè¯å»è°ƒæ•™ï¼Œæ‰èƒ½å‡ºä¸€äº›æ›´ç¬¦åˆéœ€æ±‚çš„ä½œå“ï¼Œå› ä¸ºå¼ºä¸“ä¸šæ€§çš„é—¨æ§›ï¼Œä¹Ÿå‡ºç°äº†ä¸“é—¨å–æç¤ºè¯çš„ä¸€äº›å¹³å°</p>
<p>æ€»ä¹‹ï¼Œæç¤ºè¯å·¥ç¨‹æ—¢ç„¶æ˜¯ä¸€ä¸ªå·¥ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ªé•¿æœŸå­¦ä¹ æµ‹è¯•æ€»ç»“çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œåªæœ‰ä¸æ–­å°è¯•ï¼Œæ‰èƒ½å¾ˆå¥½çš„æŒæ¡ç›¸å…³çš„æŠ€å·§</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/598048f17df840d2b5136fbef6e0c583~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768899908&amp;x-signature=DdSInJja5RyOauys23%2F%2Fyf95IBI%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[agent-browserï¼šè®© AI Agent åƒäººä¸€æ ·æµè§ˆç½‘é¡µï¼ˆèŠ‚çœ93% Tokenï¼‰]]></title>    <link>https://juejin.cn/post/7594662879201460250</link>    <guid>https://juejin.cn/post/7594662879201460250</guid>    <pubDate>2026-01-13T09:45:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594662879201460250" data-draft-id="7594662879201427482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="agent-browserï¼šè®© AI Agent åƒäººä¸€æ ·æµè§ˆç½‘é¡µï¼ˆèŠ‚çœ93% Tokenï¼‰"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-01-13T09:45:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4114839354741274"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            agent-browserï¼šè®© AI Agent åƒäººä¸€æ ·æµè§ˆç½‘é¡µï¼ˆèŠ‚çœ93% Tokenï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4114839354741274/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIé¦–å¸­æƒ…æŠ¥å‘˜_é˜¿å¸ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T09:45:33.000Z" title="Tue Jan 13 2026 09:45:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">agent-browserï¼šè®© AI Agent åƒäººä¸€æ ·æµè§ˆç½‘é¡µï¼ˆèŠ‚çœ93% Tokenï¼‰</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆæ˜¯ agent-browser</h3>
<p>å¦‚æœä½ æ­£åœ¨å¼€å‘ AI Agentï¼Œæˆ–è€…å°è¯•ç”¨ LLM æ¥æ§åˆ¶æµè§ˆå™¨è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œï¼Œé‚£ä¹ˆä½ å¤§æ¦‚ç‡é‡åˆ°è¿‡è¿™ä¸¤ä¸ª"æ‹¦è·¯è™"ï¼š</p>
<ol>
<li><strong>Token è´µä¸”æ…¢ï¼ˆContext Rotï¼‰</strong> ï¼šä¸€ä¸ªæ™®é€šçš„ç½‘é¡µ HTML åŠ¨è¾„å‡ ç™¾ KBï¼Œç›´æ¥å–‚ç»™ LLMï¼Œä¸ä»… Token æ¶ˆè€—æƒŠäººï¼Œè€Œä¸”å……æ»¡å™ªéŸ³ï¼ˆCSSã€Script æ ‡ç­¾ï¼‰ã€‚LLM åœ¨å¤„ç†è¿™ç§é•¿æ–‡æœ¬æ—¶ï¼Œææ˜“äº§ç”Ÿå¹»è§‰ï¼ˆHallucinationï¼‰ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º"ä¸Šä¸‹æ–‡è…çƒ‚"ï¼ˆContext Rotï¼‰ã€‚</li>
<li><strong>é€‰æ‹©å™¨è„†å¼±ï¼ˆFlaky Selectorsï¼‰</strong> ï¼šä¼ ç»Ÿçš„ <code>div &gt; div.content &gt; span</code> é€‰æ‹©å™¨è„†å¼±ä¸å ªã€‚ç½‘é¡µç¨å¾®æ”¹ç‰ˆï¼Œclass åå˜ä¸€ä¸‹ï¼Œä½ çš„ Agent å°±ä»"è‡ªåŠ¨åŒ–"å˜æˆäº†"äººå·¥æŠ¥é”™æœº"ã€‚</li>
</ol>
<p>é’ˆå¯¹è¿™ä¸¤ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼ŒVercel Labs å¼€æºäº† <strong>agent-browser</strong>ã€‚</p>
<p>å®ƒä¸æ˜¯ç®€å•çš„ Playwright å°è£…ï¼Œè€Œæ˜¯ä¸“ä¸º LLM è®¾è®¡çš„æµè§ˆå™¨æ¥å£ã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>èŠ‚çœé«˜è¾¾ 93% çš„ Token</strong>ï¼šå®ƒä¸ç»™ LLM çœ‹åŸå§‹ HTMLï¼Œè€Œæ˜¯ç»è¿‡è¯­ä¹‰æ¸…æ´—åçš„ç²¾ç®€ç»“æ„ã€‚</li>
<li><strong>å‘Šåˆ«è„†å¼±é€‰æ‹©å™¨</strong>ï¼šæ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’ï¼ŒAgent ä¸å†ä¾èµ–æ­»æ¿çš„ CSS é€‰æ‹©å™¨ã€‚</li>
<li><strong>å¼€ç®±å³ç”¨</strong>ï¼šé›¶é…ç½®ï¼Œæ— éœ€ç¹ççš„ MCP å®‰è£…ï¼Œä¸€æ¡å‘½ä»¤å³å¯å¯åŠ¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">æ ¸å¿ƒåŸç†ï¼šå®ƒæ˜¯å¦‚ä½•"åƒäººä¸€æ ·"æµè§ˆçš„ï¼Ÿ</h3>
<p>ä¼ ç»Ÿçš„è‡ªåŠ¨åŒ–æ˜¯ä¸ºäº†"æµ‹è¯•"ï¼Œæ‰€ä»¥è¿½æ±‚ç²¾ç¡®çš„ DOM åŒ¹é…ã€‚è€Œ <code>agent-browser</code> æ˜¯ä¸ºäº†"ç†è§£"ï¼Œæ‰€ä»¥å®ƒè¿½æ±‚è¯­ä¹‰çš„æå–ã€‚</p>
<h4 data-id="heading-3">â—ˆ1. æ‹’ç»"ä¸Šä¸‹æ–‡è…çƒ‚"</h4>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ç»„çœŸå®å¯¹æ¯”ã€‚å‡è®¾æˆ‘ä»¬è¦è®¿é—® Hacker News é¦–é¡µå¹¶æå–å¤´æ¡æ–°é—»ã€‚</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼ˆPlaywright <code>page.content()</code>ï¼‰</strong> ï¼š ä½ éœ€è¦å°†åŒ…å«å¤§é‡ <code>&lt;script&gt;</code>, <code>&lt;style&gt;</code>, <code>&lt;div&gt;</code> åµŒå¥—çš„åŸå§‹ HTML ä¼ ç»™ LLMã€‚</p>
<ul>
<li><strong>Token æ¶ˆè€—</strong>ï¼š~15k Tokens</li>
<li><strong>å™ªç‚¹</strong>ï¼šæé«˜ï¼ˆ90% æ˜¯æ— ç”¨ä»£ç ï¼‰</li>
</ul>
<p><strong>Agent Browser æ–¹å¼</strong>ï¼š å®ƒä¼šåˆ©ç”¨æ— éšœç¢æ ‘ï¼ˆAccessibility Treeï¼‰å’Œè¯­ä¹‰åˆ†æï¼Œå°†é¡µé¢è½¬åŒ–ä¸º LLM "å–œæ¬¢" çš„æ ¼å¼ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"link"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"Show HN: My new project"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"https://..."</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><strong>Token æ¶ˆè€—</strong>ï¼š~800 Tokens</li>
<li><strong>èŠ‚çœæ¯”ä¾‹</strong>ï¼š<strong>93%</strong></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b83e7b57833441e59c9326f94b346b61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUnpppbluK3mg4XmiqXlkZhf6Zi_5biD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768902333&amp;x-signature=Df4iJ%2FnSB8bNJHncGTviRgX7c%2FE%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-4">â—ˆ2. è¯­ä¹‰åŒ–äº¤äº’ï¼ˆSemantic Interactionï¼‰</h4>
<p>ä½ ä¸éœ€è¦å†å»æŸ¥ <code>Check State</code> æˆ–è€…å†™ <code>await page.click('#submit-btn')</code>ã€‚<code>agent-browser</code> å…è®¸ä½ ç›´æ¥è¯´"äººè¯"ã€‚</p>
<p><strong>åœºæ™¯</strong>ï¼šç‚¹å‡»ç™»å½•æŒ‰é’®ã€‚</p>
<p><strong>ä»¥å‰ï¼ˆPlaywrightï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// å¦‚æœ id å˜äº†ï¼Œè¿™å°±æŒ‚äº†</span>
<span class="hljs-keyword">await</span> page.click(<span class="hljs-string">'#login-button-v2'</span>); 
</code></pre>
<p><strong>ç°åœ¨ï¼ˆagent-browserï¼‰</strong> ï¼š å®ƒæ˜¯"å¿«ç…§ + å¼•ç”¨"æ¨¡å¼ã€‚</p>
<ol>
<li><strong>Snapshot</strong>: ç”Ÿæˆè¯­ä¹‰æ ‘ï¼Œç»™æ¯ä¸ªå…ƒç´ åˆ†é…çŸ­å¼•ç”¨ï¼ˆå¦‚ <code>@e1</code>, <code>@e2</code>ï¼‰ã€‚</li>
<li><strong>Action</strong>: åŸºäºå¼•ç”¨æ“ä½œã€‚</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">agent-browser click @e1
</code></pre>
<p>ä½ ï¼ˆæˆ–è€…ä½ çš„ Agentï¼‰åªéœ€è¦è®¤å‡† <code>@e1</code> è¿™ä¸ªè¯­ä¹‰æ ‡ç­¾ï¼Œè€Œä¸éœ€è¦å…³å¿ƒåº•å±‚çš„ DOM ç»“æ„å˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-5">Technical Deep Diveï¼š5åˆ†é’Ÿå®æˆ˜ä¸Šæ‰‹</h3>
<h4 data-id="heading-6">â—ˆ1. å®‰è£…ä¸å¯åŠ¨</h4>
<p>å®ƒæ˜¯åŸºäº Rust (CLI) å’Œ Node.js (Daemon) æ„å»ºçš„ï¼Œé€Ÿåº¦æå¿«ã€‚</p>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># æ— éœ€é…ç½® MCPï¼Œç›´æ¥ npx</span>
npm install <span class="hljs-operator">-</span>g agent<span class="hljs-operator">-</span><span class="hljs-built_in">browser</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
agent<span class="hljs-operator">-</span><span class="hljs-built_in">browser</span> help
</code></pre>
<h4 data-id="heading-7">â—ˆ2. çœŸå®åœºæ™¯æ¼”ç¤ºï¼šæŠ“å– Github Trending</h4>
<p>å‡è®¾æˆ‘ä»¬è¦å†™ä¸€ä¸ª Agentï¼Œæ¯å¤©æ—©ä¸Šè‡ªåŠ¨æŠ“å– GitHub Trending çš„ç¬¬ä¸€åé¡¹ç›®ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå¯¼èˆª</strong> å®ƒæ²¡æœ‰å¤æ‚çš„"å¯åŠ¨ä¼šè¯"å‘½ä»¤ï¼Œç›´æ¥ open å³å¯è‡ªåŠ¨è¿æ¥åå° Daemonã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">agent-browser open <span class="hljs-string">"https://github.com/trending"</span>
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šè·å–è¯­ä¹‰å¿«ç…§ (Snapshot)</strong> è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬ä¸çœ‹ HTMLï¼Œè€Œæ˜¯è¯·æ±‚å¿«ç…§ï¼š</p>
<pre><code class="hljs language-r" lang="r">agent<span class="hljs-operator">-</span><span class="hljs-built_in">browser</span> snapshot
</code></pre>
<p><strong>Agent çœ‹åˆ°çš„ç®€åŒ–ç»“æœ (JSON)</strong> ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">[
Â Â {Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"@e1"</span>,Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"link"</span>,Â <span class="hljs-string">"text"</span>:Â <span class="hljs-string">"vercel-labs/agent-browser"</span>Â },
Â Â {Â <span class="hljs-string">"id"</span>:Â <span class="hljs-string">"@e2"</span>,Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"text"</span>,Â <span class="hljs-string">"text"</span>:Â <span class="hljs-string">"Browser automation for AI agents"</span>Â }
]
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæå–å†…å®¹</strong> AI è¯†åˆ«å‡º <code>@e1</code> æ˜¯æˆ‘ä»¬æƒ³è¦çš„é¡¹ç›®ï¼Œäºæ˜¯æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-scss" lang="scss">agent-browser get text <span class="hljs-keyword">@e</span>1
# <span class="hljs-attribute">Output</span>: vercel-labs/agent-browser
</code></pre>
<p>æ³¨æ„ï¼Œå…¨è¿‡ç¨‹æˆ‘ä»¬æ²¡æœ‰å†™ä»»ä½• CSS é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.RepoList-item .f3 a</code>ï¼‰ï¼å› ä¸º snapshot å·²ç»å¸®æˆ‘ä»¬æå–äº†è¯­ä¹‰ç»“æ„ã€‚</p>
<h4 data-id="heading-8">â—ˆ3. ä¸ Claude / Cursor é›†æˆ</h4>
<p>è¿™æ‰æ˜¯å®ƒæœ€å¼ºå¤§çš„åœ°æ–¹ã€‚ä½ å¯ä»¥æŠŠ <code>agent-browser</code> å½“ä½œä¸€ä¸ªå·¥å…·ï¼ˆToolï¼‰æŒ‚è½½ç»™ä½ çš„ AI Coding Assistantã€‚</p>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Cursorï¼Œå¯ä»¥ç›´æ¥åœ¨ Terminal ä¸­è¿è¡Œå®ƒã€‚å¦‚æœä½ è‡ªå·±åœ¨å¼€å‘ Agentï¼Œå¯ä»¥è¿™æ ·é›†æˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentBrowser</span> } <span class="hljs-keyword">from</span>Â <span class="hljs-string">'agent-browser'</span>;

<span class="hljs-keyword">const</span> browser = <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">AgentBrowser</span>();
<span class="hljs-keyword">const</span> page = <span class="hljs-keyword">await</span> browser.<span class="hljs-title function_">newPage</span>();

<span class="hljs-comment">// ç»™ LLM çš„ System Prompt ä¸­åŠ å…¥ï¼š</span>
<span class="hljs-comment">// "You have access to a browser tool. Use browser.interact(instruction) to control it."</span>
</code></pre>
<hr/>
<h3 data-id="heading-9">é¿å‘æŒ‡å—ï¼ˆè¸©å‘æ¡ˆä¾‹ï¼‰</h3>
<p>Warning</p>
<p><strong>é¿å‘æŒ‡å—</strong>ï¼šè™½ç„¶ <code>agent-browser</code> å¾ˆå¼ºï¼Œä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œä¹Ÿæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚ä¸è¦ç›²ç›®ä¹è§‚ã€‚</p>
<h4 data-id="heading-10">â—ˆ1. å¤æ‚åŠ¨æ€é¡µé¢çš„ç­‰å¾…</h4>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š åœ¨è®¿é—®ç±»ä¼¼ React/Vue æ„å»ºçš„é‡å‹ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰æ—¶ï¼Œé¡µé¢å…ƒç´ æ˜¯åŠ¨æ€åŠ è½½çš„ã€‚</p>
<p><strong>é”™è¯¯åšæ³•</strong>ï¼š Navigate ä¹‹åç«‹å³ Queryã€‚</p>
<pre><code class="hljs language-bash" lang="bash">agent-browser navigate <span class="hljs-string">"https://complex-app.com"</span>
agent-browser query <span class="hljs-string">"Get usage stats"</span>
<span class="hljs-comment"># Error: Element not found (å› ä¸ºè¿˜æ²¡ç”±äº loading å®Œ)</span>
</code></pre>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š æ˜¾å¼ç­‰å¾…æŸä¸ªè¯­ä¹‰å…ƒç´ å‡ºç°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">agent-browser <span class="hljs-built_in">wait</span>Â <span class="hljs-string">"Usage chart"</span> --<span class="hljs-built_in">timeout</span> 5000
agent-browser snapshot
</code></pre>
<h4 data-id="heading-11">â—ˆ2. Form è¡¨å•çš„äº¤äº’</h4>
<p><strong>é—®é¢˜</strong>ï¼š æœ‰æ—¶å€™ LLM ä¼šä¸€æ¬¡æ€§å¡«å®Œæ‰€æœ‰è¡¨å•ï¼Œä½†ç½‘é¡µé€»è¾‘æ˜¯"å¡«å®Œä¸€ä¸ª Input è§¦å‘ä¸€ä¸ª Validation"ã€‚</p>
<p><strong>å»ºè®®</strong>ï¼š å¯¹äºå¤æ‚çš„ Step-by-Step è¡¨å•ï¼Œå»ºè®®æ‹†åˆ†æŒ‡ä»¤ï¼Œä¸è¦è¯•å›¾ç”¨ä¸€æ¡ prompt å®Œæˆæ‰€æœ‰äº¤äº’ã€‚</p>
<hr/>
<h3 data-id="heading-12">æ€»ç»“ï¼šAI æ—¶ä»£çš„æµè§ˆå™¨</h3>
<p>æˆ‘ä»¬æ­£åœ¨ç»å†ä»"è„šæœ¬è‡ªåŠ¨åŒ–"åˆ°"Agent è‡ªåŠ¨åŒ–"çš„è½¬å‹ã€‚</p>
<ul>
<li><strong>è„šæœ¬æ—¶ä»£</strong>ï¼šæˆ‘ä»¬å†™æ­»æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œè¿½æ±‚ 100% çš„ç¡®å®šæ€§ï¼Œç»´æŠ¤æˆæœ¬æé«˜ã€‚</li>
<li><strong>Agent æ—¶ä»£</strong>ï¼šæˆ‘ä»¬ç»™å‡ºæ„å›¾ï¼ˆIntentï¼‰ï¼Œç”± AI å¤„ç†ç»†èŠ‚ï¼Œè¿½æ±‚çš„æ˜¯é€‚åº”æ€§å’Œç†è§£åŠ›ã€‚</li>
</ul>
<p><code>agent-browser</code> å¹¶ä¸æ˜¯è¦æ›¿ä»£ Playwrightï¼Œå®ƒæ˜¯ Playwright åœ¨ AI æ—¶ä»£çš„ç¿»è¯‘å®˜ã€‚å®ƒæŠŠäººç±»çœ‹ä¸æ‡‚çš„ DOMï¼Œç¿»è¯‘æˆäº† AI èƒ½çœ‹æ‡‚çš„è¯­ä¹‰ã€‚</p>
<p>å¦‚æœä½ çš„ Token è´¦å•å±…é«˜ä¸ä¸‹ï¼Œæˆ–è€…ä½ çš„çˆ¬è™«è„šæœ¬ä¸‰å¤©ä¸¤å¤´æŠ¥é”™ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªæ–°å·¥å…·ã€‚</p>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel-labs%2Fagent-browser" target="_blank" title="https://github.com/vercel-labs/agent-browser" ref="nofollow noopener noreferrer">github.com/vercel-labsâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOSä»£ç æ··æ·†æŠ€æœ¯æ·±åº¦å®è·µï¼šä»åŸºç¡€åˆ°é«˜çº§å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7594627998851170310</link>    <guid>https://juejin.cn/post/7594627998851170310</guid>    <pubDate>2026-01-13T07:15:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594627998851170310" data-draft-id="7594403873178058793" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOSä»£ç æ··æ·†æŠ€æœ¯æ·±åº¦å®è·µï¼šä»åŸºç¡€åˆ°é«˜çº§å…¨é¢è§£æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-13T07:15:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOSä»£ç æ··æ·†æŠ€æœ¯æ·±åº¦å®è·µï¼šä»åŸºç¡€åˆ°é«˜çº§å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:15:42.000Z" title="Tue Jan 13 2026 07:15:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">iOSä»£ç æ··æ·†æŠ€æœ¯æ·±åº¦å®è·µæŒ‡å—</h2>
<blockquote>
<p>åœ¨ç§»åŠ¨åº”ç”¨å®‰å…¨é¢†åŸŸï¼Œä»£ç æ··æ·†æ˜¯ä¿æŠ¤çŸ¥è¯†äº§æƒå’Œé˜²æ­¢ é€†å‘å·¥ç¨‹ çš„å…³é”®é˜²çº¿ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨iOSå¹³å°ä¸Šçš„ä»£ç æ··æ·†æŠ€æœ¯ï¼Œæä¾›ä»åŸºç¡€åˆ°é«˜çº§çš„å…¨é¢è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦ä»£ç æ··æ·†ï¼Ÿ</h3>
<p>åœ¨ iOSåº”ç”¨ é¢ä¸´çš„å®‰å…¨å¨èƒä¸­ï¼š</p>
<ul>
<li>80%çš„ç ´è§£åº”ç”¨é€šè¿‡é€†å‘å·¥ç¨‹å®ç°</li>
<li>60%çš„å•†ä¸šåº”ç”¨å­˜åœ¨æ ¸å¿ƒç®—æ³•è¢«ç›—ç”¨é£é™©</li>
<li>40%çš„åº”ç”¨å†…è´­æœºåˆ¶è¢«ç»•è¿‡</li>
</ul>
<p>ä»£ç æ··æ·†é€šè¿‡ä»¥ä¸‹æ–¹å¼æä¾›ä¿æŠ¤ï¼š</p>
<ul>
<li><strong>å¢åŠ é€†å‘å·¥ç¨‹éš¾åº¦</strong>ï¼šä½¿åç¼–è¯‘ä»£ç éš¾ä»¥é˜…è¯»å’Œç†è§£</li>
<li><strong>éšè—æ•æ„Ÿé€»è¾‘</strong>ï¼šä¿æŠ¤æ ¸å¿ƒç®—æ³•å’Œä¸šåŠ¡é€»è¾‘</li>
<li><strong>é˜²æ­¢è‡ªåŠ¨åŒ–åˆ†æ</strong>ï¼šå¯¹æŠ—é™æ€åˆ†æå·¥å…·</li>
<li><strong>å»¶è¿Ÿæ”»å‡»æ—¶é—´</strong>ï¼šæ˜¾è‘—å¢åŠ ç ´è§£æˆæœ¬</li>
</ul>
<h3 data-id="heading-2">æ··æ·†æŠ€æœ¯åˆ†ç±»</h3>
<h4 data-id="heading-3">1. ç¬¦å·é‡å‘½åï¼ˆæœ€åŸºæœ¬ä¸”é«˜æ•ˆï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹ä»£ç </span>
- (<span class="hljs-keyword">void</span>)processPayment:(<span class="hljs-built_in">double</span>)amount {
    [<span class="hljs-meta">self validatePayment</span>];
    [<span class="hljs-meta">self sendToServer:amount</span>];
}

<span class="hljs-comment">// æ··æ·†å</span>
- (<span class="hljs-keyword">void</span>)a:(<span class="hljs-built_in">double</span>)b {
    [<span class="hljs-meta">self c</span>];
    [<span class="hljs-meta">self d:b</span>];
}
</code></pre>
<h4 data-id="heading-4">2. æ§åˆ¶æµæ··æ·†ï¼ˆå¢åŠ é€»è¾‘å¤æ‚åº¦ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åŸå§‹é€»è¾‘</span>
<span class="hljs-keyword">if</span> (isValid) {
    <span class="hljs-built_in">processOrder</span>();
}

<span class="hljs-comment">// æ··æ·†å</span>
<span class="hljs-keyword">switch</span> (<span class="hljs-built_in">arc4random_uniform</span>(<span class="hljs-number">5</span>)) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
        <span class="hljs-keyword">if</span> (!isValid) <span class="hljs-keyword">goto</span> label_7;
        <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">if</span> (isValid) <span class="hljs-keyword">goto</span> label_3;
        <span class="hljs-keyword">break</span>;
}
label_3:
<span class="hljs-built_in">processOrder</span>();
label_7:
<span class="hljs-comment">// æ— æ•ˆä»£ç å—...</span>
</code></pre>
<h4 data-id="heading-5">3. å­—ç¬¦ä¸²åŠ å¯†ï¼ˆé˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼‰</h4>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">// åŸå§‹å­—ç¬¦ä¸²</span>
<span class="hljs-built_in">NSString</span> *apiKey = <span class="hljs-string">@"AKIAIOSFODNN7EXAMPLE"</span>;

<span class="hljs-comment">// æ··æ·†å</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> enc[] = {<span class="hljs-number">0x12</span>, <span class="hljs-number">0x45</span>, <span class="hljs-number">0x78</span>, ...};
<span class="hljs-built_in">NSString</span> *apiKey = decodeString(enc, <span class="hljs-keyword">sizeof</span>(enc));

<span class="hljs-comment">// è§£å¯†å‡½æ•°ï¼ˆè¿è¡Œæ—¶åŠ¨æ€è§£å¯†ï¼‰</span>
<span class="hljs-built_in">NSString</span> *decodeString(<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> *data, <span class="hljs-type">int</span> len) {
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>; i&lt;len; i++) {
        data[i] ^= <span class="hljs-number">0xAA</span>; <span class="hljs-comment">// ç®€å•å¼‚æˆ–åŠ å¯†</span>
    }
    <span class="hljs-keyword">return</span> [<span class="hljs-built_in">NSString</span> stringWithCString:(<span class="hljs-type">char</span>*)data encoding:<span class="hljs-built_in">NSUTF8StringEncoding</span>];
}
</code></pre>
<h4 data-id="heading-6">4. å…ƒæ•°æ®æ··æ·†ï¼ˆæ¶ˆé™¤è°ƒè¯•ä¿¡æ¯ï¼‰</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä½¿ç”¨stripç§»é™¤è°ƒè¯•ç¬¦å·</span>
strip -x -S AppBinary

<span class="hljs-section"># æ··æ·†åæ•ˆæœ</span>
$ nm AppBinary
0000000100004a00 t <span class="hljs-strong">__mh<span class="hljs-emphasis">_execute_</span>header
0000000100008b34 t <span class="hljs-emphasis">_main
                 U _</span>objc<span class="hljs-emphasis">_autoreleasePoolPop
                 U _</span>objc<span class="hljs-emphasis">_autoreleasePoolPush
                 U _</span>objc<span class="hljs-emphasis">_msgSend
                 U _</span>__</span>stack<span class="hljs-emphasis">_chk_</span>fail
<span class="hljs-code">                 U ___stack_chk_guard
                 U _printf
                 U dyld_stub_binder
</span></code></pre>
<h3 data-id="heading-7">iOSæ··æ·†å·¥å…·é“¾</h3>
<h4 data-id="heading-8">å•†ä¸šè§£å†³æ–¹æ¡ˆ</h4>
<p>å·¥å…·åç§°æ”¯æŒè¯­è¨€ç‰¹ç‚¹ä»·æ ¼èŒƒå›´<strong>Obfuscator-LLVM</strong>C/C++/ObjCç¼–è¯‘å™¨çº§æ··æ·†ï¼Œé«˜åº¦å®šåˆ¶å¼€æº<strong>iXGuard</strong>Swift/ObjCä¼ä¸šçº§ä¿æŠ¤ï¼Œè™šæ‹ŸåŒ–æŠ€æœ¯<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>5</mn><mi>k</mi><mo>+</mo><mi mathvariant="normal">/</mi><mtext>å¹´</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mi>D</mi><mi>a</mi><mi>s</mi><mi>h</mi><mi>O</mi><mo>âˆ—</mo><mo>âˆ—</mo><mi>J</mi><mi>a</mi><mi>v</mi><mi>a</mi><mi mathvariant="normal">/</mi><mi>K</mi><mi>o</mi><mi>t</mi><mi>l</mi><mi>i</mi><mi>n</mi><mtext>æ§åˆ¶æµæ··æ·†å¼ºå¤§</mtext></mrow><annotation encoding="application/x-tex">5k+/å¹´**DashO**Java/Kotlinæ§åˆ¶æµæ··æ·†å¼ºå¤§</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"/><span class="mord">5</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">/</span><span class="mord cjk_fallback">å¹´</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">âˆ—</span><span class="mord mathnormal" style="margin-right:0.09618em;">J</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord">/</span><span class="mord mathnormal">Ko</span><span class="mord mathnormal" style="margin-right:0.01968em;">tl</span><span class="mord mathnormal">in</span><span class="mord cjk_fallback">æ§åˆ¶æµæ··æ·†å¼ºå¤§</span></span></span></span></span>3k+/å¹´<strong>Virbox Protector</strong>è·¨å¹³å°ä»£ç åŠ å¯†+æ··æ·†$2k+/å¹´</p>
<p>æ­¤å¤–ï¼ŒIpaGuard æ˜¯ä¸€æ¬¾å¼ºå¤§çš„iOS IPAæ–‡ä»¶æ··æ·†å·¥å…·ï¼Œæ— éœ€æºç å³å¯å¯¹ä»£ç å’Œèµ„æºè¿›è¡Œæ··æ·†åŠ å¯†ï¼Œæ”¯æŒObjective-Cã€Swiftã€Flutterã€Unityç­‰å¤šç§å¼€å‘å¹³å°ã€‚å®ƒå¯ä»¥ç›´æ¥æ“ä½œç¼–è¯‘åçš„IPAæ–‡ä»¶ï¼Œåœ¨æœ¬åœ°è¿›è¡Œæ··æ·†å¤„ç†ï¼Œæ— éœ€ä¸Šä¼ æœåŠ¡å™¨ï¼Œæ··æ·†åå¯ä»¥ç«‹å³é‡ç­¾åå®‰è£…æµ‹è¯•ï¼Œæœ‰æ•ˆå¢åŠ åç¼–è¯‘éš¾åº¦ã€‚</p>
<h3 data-id="heading-9">å®æˆ˜ï¼šä½¿ç”¨SwiftShieldæ··æ·†Swifté¡¹ç›®</h3>
<h4 data-id="heading-10">å®‰è£…ä¸é…ç½®</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># å®‰è£…</span>
brew install swift-shield

<span class="hljs-comment"># é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºé…ç½®æ–‡ä»¶</span>
touch swift-shield-config.yml

<span class="hljs-comment"># é…ç½®æ–‡ä»¶å†…å®¹</span>
<span class="hljs-section">project: "YourProject.xcodeproj"</span>
<span class="hljs-section">scheme: "YourAppScheme"</span>
<span class="hljs-section">targets:</span>
  - YourMainTarget
  - YourFramework
<span class="hljs-section">exclude:</span>
  - <span class="hljs-string">"ThirdParty.*"</span>  <span class="hljs-comment"># æ’é™¤ç¬¬ä¸‰æ–¹åº“</span>
  - <span class="hljs-string">".*Test.*"</span>      <span class="hljs-comment"># æ’é™¤æµ‹è¯•ç±»</span>
</code></pre>
<h4 data-id="heading-11">æ‰§è¡Œæ··æ·†</h4>
<pre><code class="hljs language-arduino" lang="arduino">swift-shield -automatic -project-root ./ -config swift-shield-config.yml
</code></pre>
<h4 data-id="heading-12">æ··æ·†æ•ˆæœå¯¹æ¯”</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ··æ·†å‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentProcessor</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">validateCard</span>(<span class="hljs-params">card</span>: <span class="hljs-type">CreditCard</span>) -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
    }
}

<span class="hljs-comment">// æ··æ·†å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">aBcDeFg</span> {
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">hIjKlMn</span>(<span class="hljs-params">oPqRsT</span>: uVwXyZ) -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-comment">// ç›¸åŒé€»è¾‘ä½†ç¬¦å·ä¸å¯è¯»</span>
    }
}
</code></pre>
<h3 data-id="heading-13">é«˜çº§æ··æ·†æŠ€æœ¯</h3>
<h4 data-id="heading-14">1. æ§åˆ¶æµå¹³å¦åŒ–</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åŸå§‹é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">checkLicense</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span> (isValid) <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// å¹³å¦åŒ–å</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">checkLicense</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> state = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">switch</span>(state) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                <span class="hljs-keyword">if</span> (!isValid) state = <span class="hljs-number">2</span>;
                <span class="hljs-keyword">else</span> state = <span class="hljs-number">1</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        }
    }
}
</code></pre>
<h4 data-id="heading-15">2. è™šå‡æ§åˆ¶æµæ³¨å…¥</h4>
<pre><code class="hljs language-scss" lang="scss">- (BOOL)isPremiumUser {
    <span class="hljs-comment">// çœŸå®é€»è¾‘</span>
    BOOL result = <span class="hljs-selector-attr">[self checkSubscriptionStatus]</span>;

    <span class="hljs-comment">// æ³¨å…¥è™šå‡æ§åˆ¶æµ</span>
    int rnd = <span class="hljs-built_in">arc4random_uniform</span>(<span class="hljs-number">1000</span>);
    if (rnd &lt; <span class="hljs-number">0</span>) { <span class="hljs-comment">// æ°¸è¿œä¸ä¼šæ‰§è¡Œçš„ä»£ç å—</span>
        <span class="hljs-selector-attr">[self deleteAllData]</span>; <span class="hljs-comment">// è¯¯å¯¼é€†å‘è€…</span>
        <span class="hljs-selector-attr">[self formatDevice]</span>;
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    return result;
}
</code></pre>
<h4 data-id="heading-16">3. æ–¹æ³•æ‹†åˆ†ä¸åˆå¹¶</h4>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">// åŸå§‹æ–¹æ³•</span>
- (<span class="hljs-type">void</span>)processData:(<span class="hljs-built_in">NSData</span> *)data {
    [<span class="hljs-keyword">self</span> decodeData:data];
    [<span class="hljs-keyword">self</span> analyzeContent];
    [<span class="hljs-keyword">self</span> saveResults];
}

<span class="hljs-comment">// æ··æ·†å</span>
- (<span class="hljs-type">void</span>)funcA:(<span class="hljs-built_in">NSData</span> *)d { [<span class="hljs-keyword">self</span> decodeData:d]; }
- (<span class="hljs-type">void</span>)funcB { [<span class="hljs-keyword">self</span> analyzeContent]; }
- (<span class="hljs-type">void</span>)funcC { [<span class="hljs-keyword">self</span> saveResults]; }

<span class="hljs-comment">// è°ƒç”¨ç‚¹æ”¹ä¸º</span>
[<span class="hljs-keyword">self</span> funcA:data];
<span class="hljs-built_in">dispatch_async</span>(dispatch_get_global_queue(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>), ^{ [<span class="hljs-keyword">self</span> funcB]; });
[<span class="hljs-keyword">self</span> performSelector:<span class="hljs-keyword">@selector</span>(funcC) withObject:<span class="hljs-literal">nil</span> afterDelay:<span class="hljs-number">0.01</span>];
</code></pre>
<h3 data-id="heading-17">æ··æ·†ä¸App Storeå®¡æ ¸çš„å¹³è¡¡</h3>
<h4 data-id="heading-18">å…è®¸çš„æ··æ·†æŠ€æœ¯</h4>
<ul>
<li>ç¬¦å·é‡å‘½åï¼ˆç±»/æ–¹æ³•/å˜é‡åï¼‰</li>
<li>å­—ç¬¦ä¸²åŠ å¯†</li>
<li>æ§åˆ¶æµæ··æ·†</li>
<li>è°ƒè¯•ä¿¡æ¯ç§»é™¤</li>
</ul>
<h4 data-id="heading-19">ç¦æ­¢çš„æŠ€æœ¯</h4>
<ul>
<li>ä½¿ç”¨ç§æœ‰APIè¿›è¡Œæ··æ·†</li>
<li>éšè—æ–¹æ³•è°ƒç”¨ï¼ˆå¦‚ <code>performSelector:</code> æ»¥ç”¨ï¼‰</li>
<li>åŠ¨æ€ä¿®æ”¹ä»£ç ï¼ˆJITç¼–è¯‘ï¼‰</li>
<li>ç»•è¿‡æ²™ç›’é™åˆ¶</li>
</ul>
<h3 data-id="heading-20">æ··æ·†æ€§èƒ½å½±å“è¯„ä¼°</h3>
<p>æ··æ·†ç±»å‹ä»£ç è†¨èƒ€ç‡å¯åŠ¨å»¶è¿Ÿå†…å­˜å ç”¨CPUå½±å“ç¬¦å·é‡å‘½å0%0ms0%0%æ§åˆ¶æµå¹³å¦åŒ–15-40%50-200ms&lt;5%5-15%å­—ç¬¦ä¸²åŠ å¯†5-10%10-50ms&lt;2%1-3%è™šå‡æ§åˆ¶æµ20-60%&lt;10ms&lt;1%1-5%</p>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼šä»…å¯¹æ ¸å¿ƒæ¨¡å—åº”ç”¨é«˜å¼ºåº¦æ··æ·†</p>
<h3 data-id="heading-21">æ··æ·†æµ‹è¯•ä¸éªŒè¯</h3>
<h4 data-id="heading-22">1. åç¼–è¯‘éªŒè¯</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨Hopper Disassembler</span>
hopper -e YourAppBinary

<span class="hljs-comment"># æ£€æŸ¥å…³é”®æ–¹æ³•æ˜¯å¦æ··æ·†</span>
<span class="hljs-comment">; æ··æ·†å‰</span>
-<span class="hljs-section">[PaymentProcessor validateCard:]</span>:
push       rbp
mov        rbp, rsp

<span class="hljs-comment">; æ··æ·†å</span>
-<span class="hljs-section">[aBc dEf:]</span>:
jmp        0x123456 <span class="hljs-comment">; è·³è½¬åˆ°éšæœºåœ°å€</span>
nop
nop
</code></pre>
<h4 data-id="heading-23">2. åŠ¨æ€åˆ†æé˜²å¾¡</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ£€æµ‹è°ƒè¯•å™¨é™„ç€</span>
__attribute__((always_inline)) void anti_debug() {
    asm volatile (
        <span class="hljs-string">"mov x0, #31<span class="hljs-subst">\n</span>"</span>   <span class="hljs-comment">// SYS_ptrace</span>
        <span class="hljs-string">"mov x1, #0<span class="hljs-subst">\n</span>"</span>    <span class="hljs-comment">// PT_DENY_ATTACH</span>
        <span class="hljs-string">"mov x2, #0<span class="hljs-subst">\n</span>"</span>
        <span class="hljs-string">"mov x3, #0<span class="hljs-subst">\n</span>"</span>
        <span class="hljs-string">"mov x16, #26<span class="hljs-subst">\n</span>"</span>  <span class="hljs-comment">// SYS_ptrace</span>
        <span class="hljs-string">"svc #0x80<span class="hljs-subst">\n</span>"</span>
    );
}

<span class="hljs-comment">// åœ¨å…³é”®æ–¹æ³•å…¥å£è°ƒç”¨</span>
<span class="hljs-operator">-</span> (void)validateLicense {
    anti_debug();
    <span class="hljs-comment">// éªŒè¯é€»è¾‘</span>
}
</code></pre>
<h4 data-id="heading-24">3. æ··æ·†è¦†ç›–ç‡åˆ†æ</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä½¿ç”¨IDAPythonè„šæœ¬åˆ†æ</span>
import idautils

<span class="hljs-attr">original_symbols</span> = [<span class="hljs-string">"PaymentProcessor"</span>, <span class="hljs-string">"validateCard"</span>, <span class="hljs-string">"isPremiumUser"</span>]
<span class="hljs-attr">obfuscated_count</span> = <span class="hljs-number">0</span>

for func in idautils.Functions():
    <span class="hljs-attr">func_name</span> = idc.get_func_name(func)
    if not any(sym in func_name for sym in original_symbols):
        obfuscated_count += 1

<span class="hljs-attr">coverage</span> = obfuscated_count / len(list(idautils.Functions())) * <span class="hljs-number">100</span>
print(f"æ··æ·†è¦†ç›–ç‡: {coverage:.2f}%")
</code></pre>
<h4 data-id="heading-25">å…³é”®ç»„ä»¶è¯´æ˜</h4>
<ol>
<li><strong>é…ç½®ä¸­å¿ƒ</strong>ï¼šç®¡ç†æ··æ·†è§„åˆ™å’Œä¾‹å¤–åˆ—è¡¨</li>
<li><strong>é¢„å¤„ç†å™¨</strong>ï¼šå¤„ç†å®å’Œæ¡ä»¶ç¼–è¯‘</li>
<li><strong>è¯­è¨€ç‰¹å®šæ··æ·†å™¨</strong>ï¼šæ‰§è¡Œé‡å‘½åå’Œç»“æ„ä¿®æ”¹</li>
<li><strong>æ§åˆ¶æµå¼•æ“</strong>ï¼šåº”ç”¨å¹³å¦åŒ–å’Œè™šå‡æ§åˆ¶æµ</li>
<li><strong>åŠ å¯†æ¨¡å—</strong>ï¼šå¤„ç†å­—ç¬¦ä¸²å’Œèµ„æºåŠ å¯†</li>
<li><strong>åå¤„ç†å™¨</strong>ï¼šå‰¥ç¦»è°ƒè¯•ç¬¦å·å’Œå‹ç¼©</li>
</ol>
<h3 data-id="heading-26">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-27">é—®é¢˜1ï¼šæ··æ·†åå´©æºƒï¼ˆCrashæ—¥å¿—ç¬¦å·åŒ–ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨æ··æ·†æ˜ å°„æ–‡ä»¶è¿˜åŸ</span>
atos -<span class="hljs-built_in">arch</span> arm64 -o YourApp.dSYM/Contents/Resources/DWARF/YourApp
     -l 0x104000000 0x1040a5b3c

<span class="hljs-comment"># è¾“å‡º</span>
validateCard (<span class="hljs-keyword">in</span> YourApp) (PaymentProcessor.swift:15)
</code></pre>
<h4 data-id="heading-28">é—®é¢˜2ï¼šä¸KVO/KVCå†²çª</h4>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">// æ··æ·†æ—¶ä¿ç•™KVCå…³é”®æ–¹æ³•</span>
+ (<span class="hljs-built_in">NSSet</span> *)keyPathsForValuesAffectingValueForKey:(<span class="hljs-built_in">NSString</span> *)key {
    <span class="hljs-comment">// ä¸æ··æ·†æ­¤æ–¹æ³•</span>
}
</code></pre>
<h4 data-id="heading-29">é—®é¢˜3ï¼šåå°„æœºåˆ¶å¤±æ•ˆ</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">// æ··æ·†å‰</span>
<span class="hljs-keyword">let</span> cls <span class="hljs-operator">=</span> <span class="hljs-type">NSClassFromString</span>(<span class="hljs-string">"PaymentProcessor"</span>)

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šä¿ç•™å…³é”®ç±»å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentProcessor</span> {
    <span class="hljs-comment">// åœ¨æ··æ·†é…ç½®ä¸­æ ‡è®°ä¸ºä¸æ··æ·†</span>
}
</code></pre>
<h3 data-id="heading-30">æ··æ·†çš„æœªæ¥è¶‹åŠ¿</h3>
<ol>
<li><strong>AIé©±åŠ¨çš„æ··æ·†</strong>
<ul>
<li>ä½¿ç”¨GANç”Ÿæˆå¯¹æŠ—æ€§ä»£ç æ¨¡å¼</li>
<li>åŸºäºæ·±åº¦å­¦ä¹ çš„æ··æ·†ç­–ç•¥é€‰æ‹©</li>
</ul>
</li>
<li><strong>è¿è¡Œæ—¶è‡ªä¿®æ”¹ä»£ç </strong></li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ¦‚å¿µç¤ºä¾‹</span>
void <span class="hljs-built_in">sensitiveFunc</span>() {
       <span class="hljs-comment">// é¦–æ¬¡æ‰§è¡Œåä¿®æ”¹è‡ªèº«ä»£ç </span>
       if (firstRun) {
           <span class="hljs-built_in">modifyMachineCode</span>((void*)sensitiveFunc, newOpcodes);
           firstRun = <span class="hljs-number">0</span>;
       }
       <span class="hljs-comment">// å®é™…åŠŸèƒ½</span>
}
</code></pre>
<ol start="3">
<li><strong>ç¡¬ä»¶è¾…åŠ©ä¿æŠ¤</strong>
<ul>
<li>åˆ©ç”¨Secure Enclaveå­˜å‚¨å¯†é’¥</li>
<li>ä½¿ç”¨æŒ‡é’ˆè®¤è¯ç ï¼ˆPACï¼‰é˜²æ­¢ä»£ç æ³¨å…¥</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">æœ€ä½³å®è·µæ€»ç»“</h3>
<ol>
<li>
<p><strong>åˆ†å±‚åº”ç”¨ç­–ç•¥</strong></p>
</li>
<li>
<p><strong>æŒç»­é›†æˆé›†æˆ</strong></p>
</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># GitHub Actions ç¤ºä¾‹</span>
<span class="hljs-attr">jobs:</span>
     <span class="hljs-attr">obfuscate:</span>
       <span class="hljs-attr">runs-on:</span> <span class="hljs-string">macos-latest</span>
       <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v2</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">SwiftShield</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">brew</span> <span class="hljs-string">install</span> <span class="hljs-string">swift-shield</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Obfuscate</span> <span class="hljs-string">code</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">swift-shield</span> <span class="hljs-string">-automatic</span> <span class="hljs-string">-project-root</span> <span class="hljs-string">${{</span> <span class="hljs-string">github.workspace</span> <span class="hljs-string">}}</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span> <span class="hljs-string">IPA</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">xcodebuild</span> <span class="hljs-string">-workspace</span> <span class="hljs-string">App.xcworkspace</span> <span class="hljs-string">-scheme</span> <span class="hljs-string">Release</span>
</code></pre>
<ol start="3">
<li><strong>å®‰å…¨ç›‘æ§</strong>
<ul>
<li>æ£€æµ‹é€†å‘å·¥å…·ï¼ˆFridaã€Cydia Substrateï¼‰</li>
<li>è¿è¡Œæ—¶å®Œæ•´æ€§æ£€æŸ¥</li>
<li>æ··æ·†å¤±æ•ˆè­¦æŠ¥ç³»ç»Ÿ</li>
</ul>
</li>
<li><strong>åˆè§„æ€§ç®¡ç†</strong>
<ul>
<li>ä¿ç•™æœªæ··æ·†çš„æµ‹è¯•ç‰ˆæœ¬</li>
<li>è®°å½•æ··æ·†é…ç½®å˜æ›´æ—¥å¿—</li>
<li>å®šæœŸå®‰å…¨å®¡è®¡</li>
</ul>
</li>
</ol>
<p>å¦‚æœæ²¡æœ‰æºç æƒ³ç›´æ¥å¯¹ iOS IPA æ–‡ä»¶è¿›è¡Œæ·±åº¦æ··æ·†ä¸åŠ å¯†ï¼Œä¹Ÿå¯ä»¥è¯•è¯•IpaGuard
é€šè¿‡å®æ–½è¿™äº›ç­–ç•¥ï¼ŒiOSåº”ç”¨å¯ä»¥æ˜¾è‘—æé«˜æŠ—é€†å‘å·¥ç¨‹èƒ½åŠ›ï¼Œä¿æŠ¤æ ¸å¿ƒçŸ¥è¯†äº§æƒï¼ŒåŒæ—¶ä¿æŒåº”ç”¨çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚éšç€æ”»å‡»æŠ€æœ¯çš„æ¼”è¿›ï¼Œæ··æ·†ç­–ç•¥ä¹Ÿåº”æŒç»­æ›´æ–°ï¼Œå½¢æˆåŠ¨æ€çš„å®‰å…¨é˜²æŠ¤ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªç”±Rustå®ç°çš„, å¥½å¾—å¤šçš„Windows treeå‘½ä»¤: tree++é¡¹ç›®ç®€ä»‹]]></title>    <link>https://juejin.cn/post/7594616268781486107</link>    <guid>https://juejin.cn/post/7594616268781486107</guid>    <pubDate>2026-01-13T07:39:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594616268781486107" data-draft-id="7594482829754794030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªç”±Rustå®ç°çš„, å¥½å¾—å¤šçš„Windows treeå‘½ä»¤: tree++é¡¹ç›®ç®€ä»‹"/> <meta itemprop="keywords" content="GitHub,Rust"/> <meta itemprop="datePublished" content="2026-01-13T07:39:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaterRun"/> <meta itemprop="url" content="https://juejin.cn/user/1408923845545562"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªç”±Rustå®ç°çš„, å¥½å¾—å¤šçš„Windows treeå‘½ä»¤: tree++é¡¹ç›®ç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1408923845545562/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaterRun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T07:39:08.000Z" title="Tue Jan 13 2026 07:39:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><code>tree++</code>: å¥½çš„å¤šçš„Windows<code>tree</code>å‘½ä»¤</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22f9cd52db1747ffb4f1e57f6c5a0299~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJSdW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768894798&amp;x-signature=mjZlUa2u0gsTZ8oE9hFbxIH3j%2B4%3D" alt="GitHub.png" loading="lazy"/></p>
<p>Windowsä¸Šçš„<code>tree</code>å‘½ä»¤è‡ªä»è¿‘40å¹´å‰å‘å¸ƒä»¥æ¥å‡ ä¹å°±æ²¡æœ‰æ”¹åŠ¨. åœ¨å¦‚ä»ŠLLMçš„æ—¶ä»£, ä½œä¸ºæè¿°é¡¹ç›®ç»“æ„éå¸¸å¸¸ç”¨çš„å·¥å…·, ä»…æœ‰çš„<code>/f</code>å’Œ<code>/a</code>ä¸¤ä¸ªå‚æ•°çš„åŠŸèƒ½æ˜¾ç„¶æ‰è¥Ÿè§è‚˜. åŒæ—¶, å®ƒä¹Ÿä¸å¤ªå¿«.</p>
<p><strong><code>tree++</code>æ˜¯å¯¹<code>tree</code>çš„ä¸€æ¬¡å…¨é¢å‡çº§</strong>, ä¸ºWindowså¹³å°ä¸‹çš„<code>tree</code>å‘½ä»¤å¼•å…¥äº†:</p>
<ul>
<li><em><strong>æ‰©å±•å‚æ•°é›†, æ”¯æŒåŠŸèƒ½æ¶µç›–åŒ…æ‹¬æ˜¾ç¤ºæ–‡ä»¶å¤§å°, é€’å½’æ·±åº¦é™åˆ¶, ä¿®æ”¹è¾“å‡ºé£æ ¼, å°†ç»“æœè¾“å‡ºè‡³æ–‡ä»¶, åŠæ’é™¤æŒ‡å®šç›®å½•(åŒ…æ‹¬éµå¾ª<code>.gitignore</code>)ç­‰å¸¸ç”¨åŠŸèƒ½</strong></em></li>
<li><em><strong>Rustçš„å®ç°æ›´å¥½çš„æ€§èƒ½, åœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹æ›´æ”¯æŒå¤šçº¿ç¨‹, æä¾›æ˜¾è‘—çš„æ‰«æé€Ÿåº¦æå‡</strong></em></li>
<li><em><strong>ä¸åŸæœ‰çš„Windows<code>tree</code>å‘½ä»¤å‚æ•°å’Œè¾“å‡ºæ ¼å¼è¾¾åˆ°diffçº§åˆ«çš„å®Œå…¨å…¼å®¹, å¹¶å¯ä½¿ç”¨Unixé£æ ¼çš„å‚æ•°(å¦‚<code>-f</code>å’Œ<code>--files</code>)</strong></em></li>
</ul>
<p><strong><code>tree++</code>ä½¿ç”¨<code>Rust</code>å®ç°</strong>, å¼€æºäº<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWater-Run%2Ftreepp" target="_blank" title="https://github.com/Water-Run/treepp" ref="nofollow noopener noreferrer">GitHub</a>.</p>
<p><em>æ€§èƒ½å¯¹æ¯”(ä»¥<code>C:\Windows</code>ä¸ºç¤ºä¾‹):</em></p>























































<table><thead><tr><th>ç±»å‹</th><th align="right">è€—æ—¶ (<code>ms</code>)</th><th align="right">å€ç‡</th></tr></thead><tbody><tr><td><code>tree /f</code> (Windows Native)</td><td align="right"><code>20721.90</code></td><td align="right"><code>1.00x</code></td></tr><tr><td><code>treepp /f</code></td><td align="right"><code>7467.99</code></td><td align="right"><code>2.77x</code></td></tr><tr><td><code>treepp /f /nb</code></td><td align="right"><code>7392.34</code></td><td align="right"><code>2.80x</code></td></tr><tr><td><code>treepp /f /nb /b</code></td><td align="right"><code>3226.38</code></td><td align="right"><code>6.42x</code></td></tr><tr><td><code>treepp /f /nb /b /t 1</code></td><td align="right"><code>9123.00</code></td><td align="right"><code>2.27x</code></td></tr><tr><td><code>treepp /f /nb /b /t 2</code></td><td align="right"><code>5767.71</code></td><td align="right"><code>3.59x</code></td></tr><tr><td><code>treepp /f /nb /b /t 4</code></td><td align="right"><code>3948.73</code></td><td align="right"><code>5.25x</code></td></tr><tr><td><code>treepp /f /nb /b /t 8</code></td><td align="right"><code>3166.81</code></td><td align="right"><code>6.54x</code></td></tr><tr><td><code>treepp /f /nb /b /t 16</code></td><td align="right"><code>2704.67</code></td><td align="right"><code>7.66x</code></td></tr></tbody></table>
<h3 data-id="heading-1">å®‰è£…</h3>
<p>ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWater-Run%2Ftreepp%2Freleases%2Ftag%2F0.1.0" target="_blank" title="https://github.com/Water-Run/treepp/releases/tag/0.1.0" ref="nofollow noopener noreferrer">Release</a>ä¸‹è½½<code>tree++.zip</code>, è§£å‹åˆ°åˆé€‚ç›®å½•, å¹¶å°†ç›®å½•æ·»åŠ è‡³ç¯å¢ƒå˜é‡.</p>
<p>å¼€å¯Windowsç»ˆç«¯, æ‰§è¡Œ:</p>
<pre><code class="hljs language-powershell" lang="powershell">treepp /v
</code></pre>
<p>æœ‰è¾“å‡º:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">tree++ version 0.1.0

A Much Better Windows tree Command.

author: WaterRun
link: https://github.com/Water-Run/treepp
</code></pre>
<p>å³å®Œæˆå®‰è£….</p>
<p>éšå, ä½ å¯ä»¥ä»¥å’Œæ™®é€šçš„Windows <code>tree</code>å‘½ä»¤ä¸€æ ·çš„æ–¹å¼ä½¿ç”¨:</p>
<pre><code class="hljs language-powershell" lang="powershell">treepp /f
</code></pre>
<h3 data-id="heading-2">é€Ÿè§ˆ</h3>





























































































<table><thead><tr><th>å‚æ•°é›†(ç­‰ä»·å†™æ³•)</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>--help</code> <code>-h</code> <code>/?</code></td><td>æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</td></tr><tr><td><code>--version</code> <code>-v</code> <code>/V</code></td><td>æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯</td></tr><tr><td><code>--ascii</code> <code>-a</code> <code>/A</code></td><td>ä½¿ç”¨ ASCII å­—ç¬¦ç»˜åˆ¶æ ‘</td></tr><tr><td><code>--files</code> <code>-f</code> <code>/F</code></td><td>æ˜¾ç¤ºæ–‡ä»¶</td></tr><tr><td><code>--full-path</code> <code>-p</code> <code>/FP</code></td><td>æ˜¾ç¤ºå®Œæ•´è·¯å¾„</td></tr><tr><td><code>--human-readable</code> <code>-H</code> <code>/HR</code></td><td>ä»¥äººç±»å¯è¯»æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶å¤§å°</td></tr><tr><td><code>--no-indent</code> <code>-i</code> <code>/NI</code></td><td>ä¸æ˜¾ç¤ºæ ‘å½¢è¿æ¥çº¿</td></tr><tr><td><code>--reverse</code> <code>-r</code> <code>/R</code></td><td>é€†åºæ’åº</td></tr><tr><td><code>--size</code> <code>-s</code> <code>/S</code></td><td>æ˜¾ç¤ºæ–‡ä»¶å¤§å°(å­—èŠ‚)</td></tr><tr><td><code>--date</code> <code>-d</code> <code>/DT</code></td><td>æ˜¾ç¤ºæœ€åä¿®æ”¹æ—¥æœŸ</td></tr><tr><td><code>--exclude</code> <code>-I</code> <code>/X</code></td><td>æ’é™¤åŒ¹é…çš„æ–‡ä»¶</td></tr><tr><td><code>--level</code> <code>-L</code> <code>/L</code></td><td>é™åˆ¶é€’å½’æ·±åº¦</td></tr><tr><td><code>--include</code> <code>-m</code> <code>/M</code></td><td>ä»…æ˜¾ç¤ºåŒ¹é…çš„æ–‡ä»¶</td></tr><tr><td><code>--disk-usage</code> <code>-u</code> <code>/DU</code></td><td>æ˜¾ç¤ºç›®å½•ç´¯è®¡å¤§å°</td></tr><tr><td><code>--report</code> <code>-e</code> <code>/RP</code></td><td>æ˜¾ç¤ºæœ«å°¾ç»Ÿè®¡ä¿¡æ¯</td></tr><tr><td><code>--no-win-banner</code> <code>-N</code> <code>/NB</code></td><td>ä¸æ˜¾ç¤º Windows åŸç”Ÿ tree çš„æ ·æ¿ä¿¡æ¯</td></tr><tr><td><code>--silent</code> <code>-l</code> <code>/SI</code></td><td>ç»ˆç«¯é™é»˜(ç»“åˆ<code>output</code>æŒ‡ä»¤ä½¿ç”¨)</td></tr><tr><td><code>--output</code> <code>-o</code> <code>/O</code></td><td>å°†ç»“æœè¾“å‡ºè‡³æ–‡ä»¶(<code>.txt</code>, <code>.json</code>, <code>.yml</code>, <code>.toml</code>)</td></tr><tr><td><code>--batch</code> <code>-b</code> <code>/B</code></td><td>ä½¿ç”¨æ‰¹å¤„ç†æ¨¡å¼</td></tr><tr><td><code>--thread</code> <code>-t</code> <code>/T</code></td><td>æ‰«æçº¿ç¨‹æ•°(æ‰¹å¤„ç†æ¨¡å¼, é»˜è®¤8çº¿ç¨‹)</td></tr><tr><td><code>--gitignore</code> <code>-g</code> <code>/G</code></td><td>éµå¾ª<code>.gitignore</code></td></tr></tbody></table>
<blockquote>
<p>æ›´å¤šä¿¡æ¯æŸ¥é˜…GitHubä¸Šçš„æœ‰å…³æ–‡æ¡£ä¿¡æ¯</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ npm åšå…è´¹å›¾åºŠï¼Œè¿™æ“ä½œç»äº†ï¼]]></title>    <link>https://juejin.cn/post/7594385386740629523</link>    <guid>https://juejin.cn/post/7594385386740629523</guid>    <pubDate>2026-01-13T08:39:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594385386740629523" data-draft-id="7594351060615954451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ npm åšå…è´¹å›¾åºŠï¼Œè¿™æ“ä½œç»äº†ï¼"/> <meta itemprop="keywords" content="GitHub,NPM"/> <meta itemprop="datePublished" content="2026-01-13T08:39:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Cosmium"/> <meta itemprop="url" content="https://juejin.cn/user/2010327196907229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ npm åšå…è´¹å›¾åºŠï¼Œè¿™æ“ä½œç»äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2010327196907229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Cosmium
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T08:39:54.000Z" title="Tue Jan 13 2026 08:39:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘å‘ç°äº†ä¸€ä¸ªéªšæ“ä½œ â€”â€” ç”¨ npm å½“å›¾åºŠï¼Œå®Œå…¨å…è´¹ï¼Œè¿˜å¸¦å…¨çƒ CDN åŠ é€Ÿã€‚åˆ†äº«ä¸€ä¸‹å…·ä½“å®ç°è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">ä¸ºå•¥è¦ç”¨ npm åšå›¾åºŠï¼Ÿ</h2>
<p>å…ˆè¯´è¯´èƒŒæ™¯ï¼Œæˆ‘ç»å¸¸åœ¨å„å¤§å¹³å°å†™æ–‡ç« ï¼Œéœ€è¦ä¸Šä¼ å›¾ç‰‡ã€‚ä½†ï¼š</p>
<ul>
<li>å…è´¹å›¾åºŠä¸ç¨³å®šï¼Œå®¹æ˜“æŒ‚</li>
<li>è‡ªå»ºå›¾åºŠæˆæœ¬é«˜</li>
<li>å…¶ä»–å¹³å°é™åˆ¶å¤š</li>
</ul>
<p>ç„¶åæƒ³åˆ° npmï¼Œè¿™ä¸å°±æ˜¯ç°æˆçš„ CDN å—ï¼Ÿå…¨çƒè®¿é—®é€Ÿåº¦è¿˜å¿«ã€‚</p>
<h2 data-id="heading-1">æ€ä¹ˆå®ç°çš„ï¼Ÿ</h2>
<h3 data-id="heading-2">1. åŸºæœ¬åŸç†</h3>
<p>npm åŒ…æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å †æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå›¾ç‰‡æ”¾è¿›å»ã€‚å‘å¸ƒåï¼Œnpm çš„ CDN ä¼šè‡ªåŠ¨åˆ†å‘è¿™äº›æ–‡ä»¶ã€‚</p>
<p>è®¿é—®æ–¹å¼ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># unpkg</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/unpkg.com/</span>åŒ…å@ç‰ˆæœ¬å·/å›¾ç‰‡è·¯å¾„

<span class="hljs-comment"># jsdelivr  </span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/cdn.jsdelivr.net/npm</span><span class="hljs-regexp">/åŒ…å@ç‰ˆæœ¬å·/</span>å›¾ç‰‡è·¯å¾„

<span class="hljs-comment"># PS</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/unpkg.com/cosmium</span><span class="hljs-variable">@latest</span>/images/other/npm-pic.png
</code></pre>
<h3 data-id="heading-3">2. è‡ªåŠ¨åŒ–å‘å¸ƒnpmåŒ…</h3>
<p>æ¯æ¬¡æäº¤å›¾ç‰‡åéƒ½éœ€è¦æ‰‹åŠ¨å‘å¸ƒåˆ° npmé‚£ä¸æ˜¯å¾ˆçƒ¦, åˆ«æ€¥github Actionså¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å‘åŒ…, å¯ä»¥ç›´æ¥fork æˆ‘çš„é¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCosmiumx%2Fcosmium" target="_blank" title="https://github.com/Cosmiumx/cosmium" ref="nofollow noopener noreferrer">github.com/Cosmiumx/coâ€¦</a></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Publish</span> <span class="hljs-string">to</span> <span class="hljs-string">npm</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">master</span>

<span class="hljs-attr">jobs:</span>
    <span class="hljs-string">....</span>
</code></pre>
<h3 data-id="heading-4">3. é…ç½®æ­¥éª¤</h3>
<ol>
<li><strong>Fork æœ¬é¡¹ç›®</strong>
<ul>
<li>å°†æœ¬é¡¹ç›® Fork åˆ°ä½ çš„ GitHub è´¦å·ä¸‹ã€‚</li>
</ul>
</li>
<li><strong>ä¿®æ”¹åŒ…å</strong>
<ul>
<li>ç¼–è¾‘ <code>package.json</code>ï¼Œå°†åŒ…åæ”¹ä¸ºä½ è‡ªå·±çš„ï¼š</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"your-package-name"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
  ...
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåŒ…åå¿…é¡»æ˜¯ npm ä¸Šæœªè¢«å ç”¨çš„åç§°ã€‚</p>
<ol start="3">
<li>
<p><strong>åˆ›å»º npm token</strong></p>
<ul>
<li>è®¿é—® npmjs.comï¼Œ</li>
<li>è¿›å…¥ <strong>Access Tokens</strong> é¡µé¢</li>
<li>ç‚¹å‡» <strong>Generate New Token</strong> â†’ é€‰æ‹© <strong>Bypass 2FA</strong> ç±»å‹ (npmæœ€æ–°è§„åˆ™tokenæœ€é•¿åªèƒ½è®¾ç½®90å¤©)</li>
<li>è®°ä½è¿™ä¸ª tokenï¼Œåªæ˜¾ç¤ºä¸€æ¬¡</li>
</ul>
</li>
<li>
<p><strong>é…ç½® GitHub Secrets</strong></p>
<ul>
<li>åœ¨ä½  Fork çš„ä»“åº“ä¸­ï¼š</li>
<li>ä»“åº“ Settings â†’ Secrets and variables â†’ Actions</li>
<li>æ·»åŠ  <code>NPM_TOKEN</code>ï¼Œå€¼ä¸ºåˆšæ‰çš„ token</li>
</ul>
</li>
<li>
<p><strong>ä¸Šä¼ å›¾ç‰‡</strong></p>
<ul>
<li>æŠŠå›¾ç‰‡æ”¾åˆ° <code>images</code> ç›®å½•</li>
<li>æäº¤ä»£ç ï¼Œå·¥ä½œæµè‡ªåŠ¨å‘å¸ƒ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">4. è®¿é—®æ–¹å¼</h3>
<p>å‘å¸ƒåï¼Œå›¾ç‰‡å¯é€šè¿‡ä»¥ä¸‹ CDN è®¿é—®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># unpkg</span>
https://unpkg.com/cosmium@latest/images/your-image.png

<span class="hljs-comment"># jsdelivr</span>
https://cdn.jsdelivr.net/npm/cosmium@latest/images/your-image.png
</code></pre>
<h2 data-id="heading-6">å®é™…ä½“éªŒ</h2>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>å®Œå…¨å…è´¹ï¼Œnpm ä¸æ”¶è´¹</li>
<li>å…¨çƒ CDNï¼Œè®¿é—®é€Ÿåº¦å¿«</li>
<li>è‡ªåŠ¨åŒ–æµç¨‹ï¼Œä¸Šä¼ å›¾ç‰‡åè‡ªåŠ¨å‘å¸ƒ</li>
<li>ç‰ˆæœ¬ç®¡ç†æ¸…æ™°</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>âš ï¸ <strong>npm åŒ…ä¸€æ—¦å‘å¸ƒæ— æ³•åˆ é™¤</strong>ï¼Œç‰ˆæœ¬å·ä¼šæ°¸ä¹…ä¿ç•™</li>
<li>âš ï¸ <strong>ä¸è¦ä¸Šä¼ æ•æ„Ÿä¿¡æ¯</strong>ï¼Œnpm åŒ…æ˜¯å®Œå…¨å…¬å¼€çš„</li>
<li>âš ï¸ <strong>éµå®ˆ npm ä½¿ç”¨æ¡æ¬¾</strong>ï¼Œä¸è¦æ»¥ç”¨ CDN æœåŠ¡</li>
<li>âš ï¸ <strong>å›¾ç‰‡ç‰ˆæƒ</strong>ï¼Œç¡®ä¿ä½ æœ‰æƒä½¿ç”¨å¹¶åˆ†å‘ä¸Šä¼ çš„å›¾ç‰‡</li>
</ul>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>è¿™ä¸ªæ–¹æ¡ˆç®—æ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªä¸é”™çš„å›¾åºŠæ›¿ä»£æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆç»å¸¸å†™æŠ€æœ¯æ–‡ç« çš„åŒå­¦ã€‚è™½ç„¶æœ‰ç‚¹æŠ˜è…¾ï¼Œä½†æ•ˆæœä¸é”™ã€‚</p>
<p>æœ‰å…´è¶£çš„å¯ä»¥ fork æˆ‘çš„é¡¹ç›®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FCosmiumx%2Fcosmium" target="_blank" title="https://github.com/Cosmiumx/cosmium" ref="nofollow noopener noreferrer">github.com/Cosmiumx/coâ€¦</a></p>
<p>é…ç½®å¥½ä¹‹åï¼Œä»¥åä¸Šä¼ å›¾ç‰‡å°±åªæ˜¯ git push çš„äº‹æƒ…äº†ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚</p>
<hr/>
<p><em>å¦‚æœè¿™ä¸ªæ–¹æ³•å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµæ”¯æŒä¸€ä¸‹~</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gemini CLI æ¥å…¥æŒ‡å—]]></title>    <link>https://juejin.cn/post/7594576956421079066</link>    <guid>https://juejin.cn/post/7594576956421079066</guid>    <pubDate>2026-01-13T08:52:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594576956421079066" data-draft-id="7594482829755154478" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gemini CLI æ¥å…¥æŒ‡å—"/> <meta itemprop="keywords" content="Gemini"/> <meta itemprop="datePublished" content="2026-01-13T08:52:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å°æŒ–çŸ¿å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/3732198836156526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gemini CLI æ¥å…¥æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3732198836156526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å°æŒ–çŸ¿å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T08:52:22.000Z" title="Tue Jan 13 2026 08:52:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Gemini CLI æ˜¯è°·æ­Œæ¨å‡ºçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºä¸ Gemini æ¨¡å‹äº¤äº’ã€‚é€šè¿‡ weelinkingï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å…¼å®¹æ¥å£è®¿é—® Gemini æ¨¡å‹ã€‚</p>
<h2 data-id="heading-0">å®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%25AE%2589%25E8%25A3%2585" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%AE%89%E8%A3%85" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<h3 data-id="heading-1">æ­¥éª¤ 1ï¼šå®‰è£… NVMï¼ˆNode ç‰ˆæœ¬ç®¡ç†å™¨ï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%25AD%25A5%25E9%25AA%25A4-1%25E5%25AE%2589%25E8%25A3%2585-nvmnode-%25E7%2589%2588%25E6%259C%25AC%25E7%25AE%25A1%25E7%2590%2586%25E5%2599%25A8" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%AD%A5%E9%AA%A4-1%E5%AE%89%E8%A3%85-nvmnode-%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%99%A8" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<p>æ‰“å¼€ PowerShellï¼ˆç®¡ç†å‘˜æ¨¡å¼ï¼‰ï¼Œä¸‹è½½å¹¶å®‰è£… nvm-windowsï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">ä¸‹è½½ nvm-windows å®‰è£…åŒ…</span>
<span class="hljs-meta prompt_"># </span><span class="bash">è®¿é—® https://github.com/coreybutler/nvm-windows/releases</span>
<span class="hljs-meta prompt_"># </span><span class="bash">ä¸‹è½½æœ€æ–°çš„ nvm-setup.exe å¹¶è¿è¡Œå®‰è£…</span>
</code></pre>
<p>æˆ–ä½¿ç”¨ Chocolatey å®‰è£…ï¼š</p>
<pre><code class="hljs">choco install nvm
</code></pre>
<h3 data-id="heading-2">æ­¥éª¤ 2ï¼šå®‰è£… Node.js<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%25AD%25A5%25E9%25AA%25A4-2%25E5%25AE%2589%25E8%25A3%2585-nodejs" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%AD%A5%E9%AA%A4-2%E5%AE%89%E8%A3%85-nodejs" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># å®‰è£…æœ€æ–° LTS ç‰ˆæœ¬</span>
nvm install lts

<span class="hljs-comment"># ä½¿ç”¨è¯¥ç‰ˆæœ¬</span>
nvm <span class="hljs-keyword">use</span> lts

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
node --version
npm --version
</code></pre>
<h3 data-id="heading-3">æ­¥éª¤ 3ï¼šå®‰è£… Gemini CLI<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%25AD%25A5%25E9%25AA%25A4-3%25E5%25AE%2589%25E8%25A3%2585-gemini-cli" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%AD%A5%E9%AA%A4-3%E5%AE%89%E8%A3%85-gemini-cli" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<pre><code class="hljs language-bash" lang="bash">npm install -g @google/gemini-cli
</code></pre>
<h3 data-id="heading-4">æ­¥éª¤ 4ï¼šéªŒè¯å®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%25AD%25A5%25E9%25AA%25A4-4%25E9%25AA%258C%25E8%25AF%2581%25E5%25AE%2589%25E8%25A3%2585" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%AD%A5%E9%AA%A4-4%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<pre><code class="hljs language-css" lang="css">gemini <span class="hljs-attr">--version</span>
</code></pre>
<h3 data-id="heading-5">å¿«é€Ÿè¯•ç”¨ï¼ˆæ— éœ€å®‰è£…ï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%25BF%25AB%25E9%2580%259F%25E8%25AF%2595%25E7%2594%25A8%25E6%2597%25A0%25E9%259C%2580%25E5%25AE%2589%25E8%25A3%2585" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%BF%AB%E9%80%9F%E8%AF%95%E7%94%A8%E6%97%A0%E9%9C%80%E5%AE%89%E8%A3%85" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">npx @google/gemini-cli
</code></pre>
<h2 data-id="heading-6">é…ç½® weelinking<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E9%2585%258D%25E7%25BD%25AE-weelinking" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E9%85%8D%E7%BD%AE-weelinking" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<h3 data-id="heading-7">æ–¹å¼ä¸€ï¼šç¯å¢ƒå˜é‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%2596%25B9%25E5%25BC%258F%25E4%25B8%2580%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258F" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%96%B9%E5%BC%8F%E4%B8%80%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<p>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯ï¼‰</span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GOOGLE_GEMINI_BASE_URL=<span class="hljs-string">"https://api.weelinking.com"</span></span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GEMINI_API_KEY=<span class="hljs-string">"YOUR_API_KEY"</span></span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GEMINI_MODEL=<span class="hljs-string">"gemini-2.5-pro"</span></span>

<span class="hljs-comment"># æ°¸ä¹…è®¾ç½®ï¼ˆæ¨èï¼‰</span>
[<span class="hljs-title class_">System</span>.<span class="hljs-title class_">Environment</span>]<span class="hljs-symbol">:</span><span class="hljs-symbol">:SetEnvironmentVariable</span>(<span class="hljs-string">'GOOGLE_GEMINI_BASE_URL'</span>, <span class="hljs-string">'https://api.weelinking.com'</span>, <span class="hljs-string">'User'</span>)
[<span class="hljs-title class_">System</span>.<span class="hljs-title class_">Environment</span>]<span class="hljs-symbol">:</span><span class="hljs-symbol">:SetEnvironmentVariable</span>(<span class="hljs-string">'GEMINI_API_KEY'</span>, <span class="hljs-string">'YOUR_API_KEY'</span>, <span class="hljs-string">'User'</span>)
[<span class="hljs-title class_">System</span>.<span class="hljs-title class_">Environment</span>]<span class="hljs-symbol">:</span><span class="hljs-symbol">:SetEnvironmentVariable</span>(<span class="hljs-string">'GEMINI_MODEL'</span>, <span class="hljs-string">'gemini-2.5-pro'</span>, <span class="hljs-string">'User'</span>)
</code></pre>
<h3 data-id="heading-8">æ–¹å¼äºŒï¼šé…ç½®æ–‡ä»¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%2596%25B9%25E5%25BC%258F%25E4%25BA%258C%25E9%2585%258D%25E7%25BD%25AE%25E6%2596%2587%25E4%25BB%25B6" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%96%B9%E5%BC%8F%E4%BA%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<p>åˆ›å»ºé…ç½®ç›®å½•å’Œæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment"># åˆ›å»ºé…ç½®ç›®å½•</span>
New-Item -Path <span class="hljs-string">"<span class="hljs-subst">$env</span>:USERPROFILE.gemini"</span> -ItemType <span class="hljs-built_in">Directory</span> -Force

<span class="hljs-comment"># åˆ›å»º .env æ–‡ä»¶</span>
@<span class="hljs-string">"
GOOGLE_GEMINI_BASE_URL=https://api.weelinking.com
GEMINI_API_KEY=YOUR_API_KEY
GEMINI_MODEL=gemini-3-pro-preview
"</span>@ | Out-File -FilePath <span class="hljs-string">"<span class="hljs-subst">$env</span>:USERPROFILE.gemini.env"</span> -Encoding UTF8

<span class="hljs-comment"># åˆ›å»º settings.json æ–‡ä»¶</span>
@<span class="hljs-string">"
{
  "</span>ide<span class="hljs-string">": {
    "</span>enabled<span class="hljs-string">": true
  },
  "</span>security<span class="hljs-string">": {
    "</span>auth<span class="hljs-string">": {
      "</span>selectedType<span class="hljs-string">": "</span>gemini-api-key<span class="hljs-string">"
    }
  }
}
"</span>@ | Out-File -FilePath <span class="hljs-string">"<span class="hljs-subst">$env</span>:USERPROFILE.gemini\settings.json"</span> -Encoding UTF8
</code></pre>
<p>æ³¨æ„ï¼šé…ç½®æ–‡ä»¶æ›´åŠ å®‰å…¨ä¸”ä¾¿äºç®¡ç†ï¼Œéœ€è¦é‡å¯ Gemini CLI æ‰ç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-9">å¯ç”¨æ¨¡å‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%258F%25AF%25E7%2594%25A8%25E6%25A8%25A1%25E5%259E%258B" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%8F%AF%E7%94%A8%E6%A8%A1%E5%9E%8B" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>

























<table><thead><tr><th>æ¨¡å‹</th><th>è¯´æ˜</th><th>ä¸Šä¸‹æ–‡</th></tr></thead><tbody><tr><td>gemini-3-pro-preview</td><td>LMArena ç¬¬ä¸€</td><td>1M</td></tr><tr><td>gemini-2.5-pro</td><td>æ­£å¼ç‰ˆ</td><td>2M</td></tr><tr><td>gemini-2.5-flash</td><td>å¿«é€Ÿå“åº”</td><td>1M</td></tr></tbody></table>
<h2 data-id="heading-10">ä½¿ç”¨æ–¹æ³•<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E4%25BD%25BF%25E7%2594%25A8%25E6%2596%25B9%25E6%25B3%2595" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<h3 data-id="heading-11">äº¤äº’æ¨¡å¼<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E4%25BA%25A4%25E4%25BA%2592%25E6%25A8%25A1%25E5%25BC%258F" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E4%BA%A4%E4%BA%92%E6%A8%A1%E5%BC%8F" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<pre><code class="hljs">gemini
</code></pre>
<h3 data-id="heading-12">å•æ¬¡æŸ¥è¯¢<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%258D%2595%25E6%25AC%25A1%25E6%259F%25A5%25E8%25AF%25A2" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%8D%95%E6%AC%A1%E6%9F%A5%E8%AF%A2" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<pre><code class="hljs language-arduino" lang="arduino">gemini <span class="hljs-string">"è§£é‡Šé‡å­è®¡ç®—çš„åŸºæœ¬åŸç†"</span>
</code></pre>
<h3 data-id="heading-13">æ–‡ä»¶å¤„ç†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%2596%2587%25E4%25BB%25B6%25E5%25A4%2584%25E7%2590%2586" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">gemini --file <span class="hljs-variable language_">document</span>.<span class="hljs-property">pdf</span> <span class="hljs-string">"æ€»ç»“è¿™ä»½æ–‡æ¡£"</span>
</code></pre>
<h2 data-id="heading-14">åŠŸèƒ½ç‰¹è‰²<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%258A%259F%25E8%2583%25BD%25E7%2589%25B9%25E8%2589%25B2" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%8A%9F%E8%83%BD%E7%89%B9%E8%89%B2" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<ul>
<li><strong>è¶…é•¿ä¸Šä¸‹æ–‡</strong>ï¼šæ”¯æŒ 2M token ä¸Šä¸‹æ–‡</li>
<li><strong>å¤šæ¨¡æ€</strong>ï¼šæ”¯æŒå›¾åƒã€è§†é¢‘ç†è§£</li>
<li><strong>ä»£ç æ‰§è¡Œ</strong>ï¼šæ”¯æŒä»£ç ç”Ÿæˆå’Œæ‰§è¡Œ</li>
<li><strong>æ–‡ä»¶å¤„ç†</strong>ï¼šæ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼</li>
</ul>
<h2 data-id="heading-15">å¤šæ¨¡æ€ä½¿ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%25A4%259A%25E6%25A8%25A1%25E6%2580%2581%25E4%25BD%25BF%25E7%2594%25A8" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%A4%9A%E6%A8%A1%E6%80%81%E4%BD%BF%E7%94%A8" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<h3 data-id="heading-16">å›¾åƒåˆ†æ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%259B%25BE%25E5%2583%258F%25E5%2588%2586%25E6%259E%2590" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%9B%BE%E5%83%8F%E5%88%86%E6%9E%90" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">gemini --image photo.jpg <span class="hljs-string">"æè¿°è¿™å¼ å›¾ç‰‡"</span>
</code></pre>
<h3 data-id="heading-17">è§†é¢‘ç†è§£<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E8%25A7%2586%25E9%25A2%2591%25E7%2590%2586%25E8%25A7%25A3" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E8%A7%86%E9%A2%91%E7%90%86%E8%A7%A3" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<pre><code class="hljs language-css" lang="css">gemini <span class="hljs-attr">--video</span> <span class="hljs-attribute">clip</span><span class="hljs-selector-class">.mp4</span> "æ€»ç»“è§†é¢‘å†…å®¹"
</code></pre>
<h2 data-id="heading-18">å¸¸è§é—®é¢˜<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%25B8%25B8%25E8%25A7%2581%25E9%2597%25AE%25E9%25A2%2598" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h2>
<h3 data-id="heading-19">å‘½ä»¤æ‰¾ä¸åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E5%2591%25BD%25E4%25BB%25A4%25E6%2589%25BE%25E4%25B8%258D%25E5%2588%25B0" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E5%91%BD%E4%BB%A4%E6%89%BE%E4%B8%8D%E5%88%B0" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<p>ç¡®ä¿ npm å…¨å±€å®‰è£…è·¯å¾„åœ¨ç³»ç»Ÿ PATH ä¸­ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æŸ¥çœ‹ npm å…¨å±€è·¯å¾„</span>
npm config <span class="hljs-keyword">get</span> prefix

<span class="hljs-meta"># å¦‚éœ€æ·»åŠ åˆ° PATHï¼Œåœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ ï¼š</span>
<span class="hljs-meta"># %APPDATA%\npm</span>
</code></pre>
<h3 data-id="heading-20">API è¿æ¥å¤±è´¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23api-%25E8%25BF%259E%25E6%258E%25A5%25E5%25A4%25B1%25E8%25B4%25A5" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#api-%E8%BF%9E%E6%8E%A5%E5%A4%B1%E8%B4%A5" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<ol>
<li>æ£€æŸ¥ API Base URL é…ç½®æ˜¯å¦æ­£ç¡®</li>
<li>éªŒè¯ API Key æ˜¯å¦æœ‰æ•ˆ</li>
<li>ç¡®è®¤ç½‘ç»œè¿æ¥æ­£å¸¸</li>
</ol>
<ul>
<li>Windows</li>
<li>macOS</li>
<li>Linux</li>
</ul>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># æ£€æŸ¥ç¯å¢ƒå˜é‡</span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GOOGLE_GEMINI_BASE_URL</span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GEMINI_API_KEY</span>
<span class="hljs-variable">$env</span><span class="hljs-symbol">:GEMINI_MODEL</span>

<span class="hljs-comment"># æˆ–æ£€æŸ¥é…ç½®æ–‡ä»¶</span>
<span class="hljs-title class_">Get</span>-<span class="hljs-title class_">Content</span> <span class="hljs-string">"$env:USERPROFILE.gemini\config.json"</span>
</code></pre>
<h3 data-id="heading-21">æ¨¡å‹ä¸å¯ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23%25E6%25A8%25A1%25E5%259E%258B%25E4%25B8%258D%25E5%258F%25AF%25E7%2594%25A8" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#%E6%A8%A1%E5%9E%8B%E4%B8%8D%E5%8F%AF%E7%94%A8" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<p>ç¡®ä¿ä½¿ç”¨ Gemini ç³»åˆ—æ¨¡å‹åç§°ã€‚</p>
<h3 data-id="heading-22">Node.js ç‰ˆæœ¬é—®é¢˜<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli%23nodejs-%25E7%2589%2588%25E6%259C%25AC%25E9%2597%25AE%25E9%25A2%2598" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli#nodejs-%E7%89%88%E6%9C%AC%E9%97%AE%E9%A2%98" target="_blank" ref="nofollow noopener noreferrer">â€‹</a></h3>
<p>Gemini CLI éœ€è¦ Node.js 18 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-css" lang="css"># æ£€æŸ¥ç‰ˆæœ¬
node <span class="hljs-attr">--version</span>

# å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œä½¿ç”¨ nvm å‡çº§
nvm install <span class="hljs-attr">--lts</span>
nvm use <span class="hljs-attr">--lts</span>
</code></pre>
<p>é“¾æ¥å¦‚ä¸‹
<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi.weelinking.com%2Fregister%3Faff%3DsSdbJ5cV" target="_blank" title="https://api.weelinking.com/register?aff=sSdbJ5cV" ref="nofollow noopener noreferrer">api.weelinking.com/register?afâ€¦</a>
å…¶å®å¾ˆç®€å•çš„ï¼
å®‰è£…æ–‡æ¡£
<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.weelinking.com%2Fdocs%2Fscenarios%2Fprogramming%2Fgemini-cli" target="_blank" title="https://docs.weelinking.com/docs/scenarios/programming/gemini-cli" ref="nofollow noopener noreferrer">docs.weelinking.com/docs/scenarâ€¦</a>
é€šè¿‡ä½¿ç”¨æˆ‘ä»¬çš„ä¸­è½¬APIï¼Œä»¥åŠé™„å¸¦çš„å®‰è£…é…ç½®æµç¨‹ï¼Œå¯ä»¥è½»æ¾å®Œç¾ä½¿ç”¨gemini-cliï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†™äº†ä¸€ä¸ª claude.mdï¼ŒAI å†™ä»£ç ç»ˆäºä¸ä¹±æ¥äº†]]></title>    <link>https://juejin.cn/post/7594578555352694835</link>    <guid>https://juejin.cn/post/7594578555352694835</guid>    <pubDate>2026-01-13T10:08:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594578555352694835" data-draft-id="7594662879201493018" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™äº†ä¸€ä¸ª claude.mdï¼ŒAI å†™ä»£ç ç»ˆäºä¸ä¹±æ¥äº†"/> <meta itemprop="keywords" content="Claude,VibeCoding"/> <meta itemprop="datePublished" content="2026-01-13T10:08:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hugo_im"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476706589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™äº†ä¸€ä¸ª claude.mdï¼ŒAI å†™ä»£ç ç»ˆäºä¸ä¹±æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476706589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hugo_im
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:08:26.000Z" title="Tue Jan 13 2026 10:08:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">claude.md æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>æœ€è¿‘åœ¨ä½¿ç”¨ Claude Codeã€MCPã€Agent è‡ªåŠ¨åŒ–å¼€å‘æ—¶ï¼Œä½ å¤§æ¦‚ç‡ä¼šçœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼š<code>claude.md</code>ã€‚</p>
<p>å®ƒé•¿å¾—åƒ READMEï¼Œä½†ä¸æ˜¯ç»™äººçœ‹çš„ï¼›<br/>
å®ƒåˆåƒ Promptï¼Œä½†ä¸æ˜¯ä¸€æ¬¡æ€§çš„ã€‚</p>
<p>å¾ˆå¤šäººä¼šå›°æƒ‘ï¼š</p>
<blockquote>
<p>ğŸ‘‰ claude.md åˆ°åº•è¯¥å†™ä»€ä¹ˆï¼Ÿ<br/>
ğŸ‘‰ æœ‰æ²¡æœ‰è§„èŒƒï¼Ÿ<br/>
ğŸ‘‰ å†™äº†çœŸçš„æœ‰ç”¨å—ï¼Ÿ</p>
</blockquote>
<p>æœ¬æ–‡ç»“åˆçœŸå®å·¥ç¨‹å®è·µï¼Œæ€»ç»“ä¸€å¥— <strong>å¯è½åœ°ã€å¯å¤åˆ¶çš„ claude.md è®¾è®¡æ–¹æ³•</strong>ï¼Œç›®æ ‡åªæœ‰ä¸€ä¸ªï¼š</p>
<blockquote>
<p><strong>è®© AI çœŸæ­£â€œæ‡‚ä½ çš„é¡¹ç›®â€ï¼Œå¹¶ä¸”ä¸ä¹±æ¥ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ä¸€ã€claude.md åˆ°åº•è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<p>ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>claude.md æ˜¯ç»™ AI Agent é˜…è¯»çš„é¡¹ç›®å·¥ç¨‹è§„èŒƒæ–‡ä»¶ã€‚</strong></p>
</blockquote>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š</p>

















<table><thead><tr><th>é¢å‘å¯¹è±¡</th><th>æ–‡æ¡£</th></tr></thead><tbody><tr><td>ç»™äººçœ‹çš„é¡¹ç›®è¯´æ˜</td><td>README.md</td></tr><tr><td>ç»™ AI çš„å·¥ç¨‹è§„åˆ™</td><td>claude.md</td></tr></tbody></table>
<p>Claude åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ä¼šè‡ªåŠ¨è¯»å–å®ƒï¼Œç”¨æ¥ï¼š</p>
<ul>
<li>ç†è§£é¡¹ç›®ç›®æ ‡å’Œè¾¹ç•Œ</li>
<li>è¯†åˆ«çœŸå®æŠ€æœ¯æ ˆï¼ˆé¿å…ä¹±çŒœç‰ˆæœ¬ï¼‰</li>
<li>ç†è§£ç›®å½•ç»“æ„ï¼Œé¿å…å†™é”™è·¯å¾„</li>
<li>éµå®ˆç¼–ç å’Œæ¶æ„çº¦æŸ</li>
<li>æ­£ç¡®ä½¿ç”¨ MCP å·¥å…·</li>
<li>é¿å…ç ´åæ€§ä¿®æ”¹</li>
</ul>
<p>å¦‚æœé¡¹ç›®æ²¡æœ‰ claude.mdï¼ŒAI å¸¸è§ç¿»è½¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>Vue2 é¡¹ç›®è¢«å†™æˆ Vue3</li>
<li>è·¯å¾„å†™é”™ï¼Œæ–‡ä»¶ç”Ÿæˆåœ¨å¥‡æ€ªç›®å½•</li>
<li>å¼•å…¥æ ¹æœ¬ä¸éœ€è¦çš„ä¾èµ–</li>
<li>ä¸ç»ç¡®è®¤å¤§èŒƒå›´é‡æ„</li>
<li>æŠ“ç½‘é¡µä¸ç”¨ MCPï¼Œå¼€å§‹â€œç¼–é€ å†…å®¹â€</li>
</ul>
<p>è¿™äº›é—®é¢˜æœ¬è´¨ä¸æ˜¯æ¨¡å‹èƒ½åŠ›é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</p>
<blockquote>
<p><strong>ç¼ºä¹ç¨³å®šã€å¯æŒç»­çš„å·¥ç¨‹çº¦æŸè¾“å…¥ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€æœ‰æ²¡æœ‰å®˜æ–¹è§„èŒƒï¼Ÿ</h3>
<p>ç›®å‰ Anthropic å¹¶æ²¡æœ‰å‘å¸ƒå¼ºåˆ¶è§„èŒƒã€‚</p>
<p>ä½†ç¤¾åŒºå·²ç»å½¢æˆä¸€äº›äº‹å®æ ‡å‡†ï¼š</p>
<ul>
<li>âœ… æ–‡ä»¶åå›ºå®šï¼š<code>claude.md</code></li>
<li>âœ… æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•</li>
<li>âœ… ä½¿ç”¨ Markdown</li>
<li>âœ… å†…å®¹åå·¥ç¨‹çº¦æŸï¼Œè€Œä¸æ˜¯å®£ä¼ æ–‡æ¡ˆ</li>
</ul>
<p>ç›®æ ‡å¾ˆæ˜ç¡®ï¼š</p>
<blockquote>
<p><strong>é™ä½ä¸ç¡®å®šæ€§ï¼Œæé«˜å·¥ç¨‹å¯æ§æ€§ã€‚</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€æ¨èçš„æ ‡å‡†ç»“æ„</h3>
<p>åœ¨å¤šä¸ªé¡¹ç›®å®è·µä¸­ï¼Œä¸€ä¸ªæˆç†Ÿçš„ claude.md é€šå¸¸åŒ…å« 6 ä¸ªæ¨¡å—ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> Project Overview
<span class="hljs-bullet">2.</span> Environment / Stack
<span class="hljs-bullet">3.</span> Directory Structure
<span class="hljs-bullet">4.</span> Development Rules
<span class="hljs-bullet">5.</span> Tooling / MCP Usage
<span class="hljs-bullet">6.</span> Output Expectations
</code></pre>
<p>ä¸‹é¢é€ä¸€æ‹†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-4">å››ã€æ¨¡å—è®¾è®¡è¯¦è§£</h3>
<h4 data-id="heading-5">1ï¸âƒ£ Project Overviewï¼šå‘Šè¯‰ AI ä½ åœ¨å¹²ä»€ä¹ˆ</h4>
<p>è¿™ä¸€éƒ¨åˆ†è¦å›ç­”ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>é¡¹ç›®æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</li>
<li>æ ¸å¿ƒç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>Claude çš„è§’è‰²æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"># Project Overview

This project <span class="hljs-built_in">is</span> a visual template editor built <span class="hljs-keyword">with</span> Vue2 <span class="hljs-built_in">and</span> GrapesJS.
The goal <span class="hljs-built_in">is</span> <span class="hljs-keyword">to</span> allow users <span class="hljs-keyword">to</span> design templates <span class="hljs-built_in">and</span> export HTML.

Claude should:
- Help implement features
- Fix bugs
- Avoid breaking existing behavior
</code></pre>
<p>æ³¨æ„é‡ç‚¹ï¼š</p>
<blockquote>
<p>âŒ ä¸è¦å†™å®£ä¼ æ–‡æ¡ˆ<br/>
âœ… è¦å†™å¯æ‰§è¡Œçº¦æŸ</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2ï¸âƒ£ Environment / Stackï¼šé˜²æ­¢ AI çŒœé”™æŠ€æœ¯æ ˆ</h4>
<p>è¿™æ˜¯é™ä½é”™è¯¯ç‡æœ€æœ‰æ•ˆçš„ä¸€æ®µã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Environment</span>

<span class="hljs-bullet">-</span> Frontend: Vue 2.x
<span class="hljs-bullet">-</span> Editor: GrapesJS
<span class="hljs-bullet">-</span> Backend: Flask
<span class="hljs-bullet">-</span> Node: &gt;= 18
<span class="hljs-bullet">-</span> Package Manager: pnpm
</code></pre>
<p>å¦åˆ™ AI å¾ˆå®¹æ˜“ï¼š</p>
<ul>
<li>é»˜è®¤ Vue3</li>
<li>é»˜è®¤æœ€æ–°åº“ API</li>
<li>é»˜è®¤ npm</li>
<li>é»˜è®¤ Node æœ€æ–°ç‰¹æ€§</li>
</ul>
<hr/>
<h4 data-id="heading-7">3ï¸âƒ£ Directory Structureï¼šé˜²æ­¢è·¯å¾„äº‹æ•…</h4>
<p>æ˜ç¡®çœŸå®ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Directory Structure</span>

src/
  components/
  plugins/
server/
  app.py
</code></pre>
<p>å¯¹è‡ªåŠ¨ç”Ÿæˆä»£ç ã€æ‰¹é‡ä¿®æ”¹æ–‡ä»¶éå¸¸å…³é”®ã€‚</p>
<hr/>
<h4 data-id="heading-8">4ï¸âƒ£ Development Rulesï¼šclaude.md çš„çµé­‚</h4>
<p>è¿™æ˜¯æœ€é‡è¦çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä½ å¯ä»¥çº¦æŸï¼š</p>
<ul>
<li>ç¦æ­¢ä½¿ç”¨çš„ API</li>
<li>æ¶æ„åŸåˆ™</li>
<li>å®‰å…¨è§„åˆ™</li>
<li>æ€§èƒ½åº•çº¿</li>
<li>é£æ ¼çº¦å®š</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Development Rules</span>

<span class="hljs-bullet">-</span> Do NOT use Vue 3 APIs (no ref, reactive, setup).
<span class="hljs-bullet">-</span> Prefer simple functions over heavy abstractions.
<span class="hljs-bullet">-</span> Avoid introducing new dependencies.
<span class="hljs-bullet">-</span> Do not change existing APIs unless explicitly asked.
</code></pre>
<p>å¥½çš„è§„åˆ™å…·å¤‡ä¸‰ä¸ªç‰¹å¾ï¼š</p>
<blockquote>
<p>âœ”ï¸ æ˜ç¡®<br/>
âœ”ï¸ å¯éªŒè¯<br/>
âœ”ï¸ å¯æ‰§è¡Œ</p>
</blockquote>
<hr/>
<hr/>
<h4 data-id="heading-9">5ï¸âƒ£ Tooling / MCP Usageï¼šé¿å…å·¥å…·æ»¥ç”¨</h4>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨ MCPï¼Œä¸€å®šè¦å†™æ¸…æ¥šå·¥å…·è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Tooling</span>

Available tools:
<span class="hljs-bullet">-</span> mcp-fetch
<span class="hljs-bullet">-</span> filesystem
<span class="hljs-bullet">-</span> git

Rules:
<span class="hljs-bullet">-</span> Always use mcp-fetch to fetch web content.
<span class="hljs-bullet">-</span> Ask before modifying more than 3 files.
</code></pre>
<p>å¦åˆ™ AI å¾ˆå®¹æ˜“ï¼š</p>
<ul>
<li>æ¨¡æ‹Ÿæµè§ˆå™¨æŠ“ç½‘é¡µï¼ˆå¤±è´¥ï¼‰</li>
<li>è·³è¿‡å·¥å…·ç›´æ¥ç¼–é€ å†…å®¹</li>
<li>ä¸ç»ç¡®è®¤ä¿®æ”¹å¤§é‡æ–‡ä»¶</li>
</ul>
<hr/>
<h4 data-id="heading-10">6ï¸âƒ£ Output Expectationsï¼šç¨³å®šè¾“å‡ºè´¨é‡</h4>
<p>è§„èŒƒè¾“å‡ºæ ¼å¼å’Œè¯­è¨€ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Output Expectations</span>

<span class="hljs-bullet">-</span> Respond in Chinese.
<span class="hljs-bullet">-</span> Provide complete runnable code.
<span class="hljs-bullet">-</span> Show diffs when modifying files.
</code></pre>
<p>è¿™èƒ½æ˜¾è‘—å‡å°‘æ²Ÿé€šæˆæœ¬ã€‚</p>
<hr/>
<h3 data-id="heading-11">äº”ã€ä¸€ä¸ªå¯ç›´æ¥ä½¿ç”¨çš„å®Œæ•´æ¨¡æ¿</h3>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Project Overview</span>

This project is a visual editor built with Vue2 and GrapesJS.

Claude should assist with:
<span class="hljs-bullet">-</span> Feature development
<span class="hljs-bullet">-</span> Bug fixing
<span class="hljs-bullet">-</span> Refactoring

<span class="hljs-section"># Environment</span>

<span class="hljs-bullet">-</span> Frontend: Vue 2.x
<span class="hljs-bullet">-</span> Backend: Flask
<span class="hljs-bullet">-</span> Package Manager: pnpm

<span class="hljs-section"># Directory Structure</span>

src/
  components/
  plugins/
server/
  app.py

<span class="hljs-section"># Development Rules</span>

<span class="hljs-bullet">-</span> Do NOT use Vue 3 APIs.
<span class="hljs-bullet">-</span> Avoid unnecessary dependencies.
<span class="hljs-bullet">-</span> Keep backward compatibility.
<span class="hljs-bullet">-</span> Prefer readable code.

<span class="hljs-section"># Tooling / MCP</span>

Available tools:
<span class="hljs-bullet">-</span> mcp-fetch
<span class="hljs-bullet">-</span> filesystem
<span class="hljs-bullet">-</span> git

Rules:
<span class="hljs-bullet">-</span> Use mcp-fetch for web fetching.
<span class="hljs-bullet">-</span> Ask before modifying multiple files.

<span class="hljs-section"># Output Expectations</span>

<span class="hljs-bullet">-</span> Respond in Chinese.
<span class="hljs-bullet">-</span> Provide complete code blocks.
</code></pre>
<p>å¤åˆ¶å³å¯ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-12">å…­ã€è¿›é˜¶ç©æ³•ï¼šæŠŠ AI çœŸæ­£çº³å…¥å·¥ç¨‹ä½“ç³»</h3>
<p>å½“ä½ å¼€å§‹æŠŠ AI å½“â€œå·¥ç¨‹æˆå‘˜â€è€Œä¸æ˜¯â€œèŠå¤©å·¥å…·â€ï¼Œclaude.md ä¼šè¶Šæ¥è¶Šé‡è¦ã€‚</p>
<p>å‡ ä¸ªå¯è¿›é˜¶æ–¹å‘ï¼š</p>
<hr/>
<h4 data-id="heading-13">âœ… å¤šè§’è‰²çº¦æŸ</h4>
<pre><code class="hljs language-php" lang="php">If acting <span class="hljs-keyword">as</span> Reviewer:
- Only review code, <span class="hljs-keyword">do</span> not modify.

If acting <span class="hljs-keyword">as</span> Implementer:
- Always <span class="hljs-keyword">include</span> tests.
</code></pre>
<hr/>
<h4 data-id="heading-14">âœ… è‡ªåŠ¨åŒ–è§„èŒƒ</h4>
<pre><code class="hljs language-sql" lang="sql">Git <span class="hljs-keyword">commit</span> format:
feat(<span class="hljs-keyword">scope</span>): description
fix(<span class="hljs-keyword">scope</span>): description
</code></pre>
<hr/>
<h4 data-id="heading-15">âœ… å®‰å…¨ä¸æ€§èƒ½åº•çº¿</h4>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- Never log tokens or secrets.</span>
<span class="hljs-deletion">- Avoid synchronous IO in backend.</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">ä¸ƒã€æ€»ç»“</h3>
<blockquote>
<p>claude.md çš„ä»·å€¼ï¼Œä¸æ˜¯â€œå†™ç»™ AI çœ‹è¯´æ˜ä¹¦â€ï¼Œ<br/>
è€Œæ˜¯ <strong>æŠŠå·¥ç¨‹ç»éªŒç»“æ„åŒ–æ³¨å…¥ç»™ AIã€‚</strong></p>
</blockquote>
<p>å½“è§„åˆ™è¶³å¤Ÿæ¸…æ™°ï¼š</p>
<ul>
<li>AI æ‰èƒ½ç¨³å®šè¾“å‡º</li>
<li>é¡¹ç›®æ‰ä¸ä¼šè¢«è¯¯ä¼¤</li>
<li>Agent æ‰çœŸæ­£å…·å¤‡å·¥ç¨‹å¯æ§æ€§</li>
</ul>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¸¦ä½ ç”¨ Javascript ç”Ÿæˆå™¨ç©è½¬ã€Œä¼šæš‚åœã€çš„å‡½æ•°]]></title>    <link>https://juejin.cn/post/7594667893015773199</link>    <guid>https://juejin.cn/post/7594667893015773199</guid>    <pubDate>2026-01-13T09:39:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594667893015773199" data-draft-id="7594626381432897586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¸¦ä½ ç”¨ Javascript ç”Ÿæˆå™¨ç©è½¬ã€Œä¼šæš‚åœã€çš„å‡½æ•°"/> <meta itemprop="keywords" content="Node.js"/> <meta itemprop="datePublished" content="2026-01-13T09:39:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥¶ç³–çš„æ¬¡å…ƒç©ºé—´"/> <meta itemprop="url" content="https://juejin.cn/user/4142615543685326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¸¦ä½ ç”¨ Javascript ç”Ÿæˆå™¨ç©è½¬ã€Œä¼šæš‚åœã€çš„å‡½æ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4142615543685326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥¶ç³–çš„æ¬¡å…ƒç©ºé—´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T09:39:43.000Z" title="Tue Jan 13 2026 09:39:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šåŒå­¦ä¸€çœ‹åˆ° <code>function*</code> å’Œ <code>yield</code> å°±æœ¬èƒ½åœ°æƒ³å…³æ–‡ç« ï¼šçœ‹èµ·æ¥åˆéš¾ã€åˆå°‘ç”¨ã€‚<br/>
ä½†å…¶å®ï¼Œ<strong>ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰æ˜¯ JS é‡Œå°‘è§çš„â€œä¼šæš‚åœçš„å‡½æ•°â€</strong>ï¼Œå†™å¥½äº†ä¸ä»…èƒ½è®©å¼‚æ­¥é€»è¾‘æ›´ä¼˜é›…ï¼Œè¿˜èƒ½åœ¨å¤„ç†æµå¼æ•°æ®ï¼ˆæ¯”å¦‚å¤§æ¨¡å‹å›å¤ã€SSE ç­‰ï¼‰æ—¶éå¸¸é¡ºæ‰‹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸è®²èŠ±é‡Œèƒ¡å“¨çš„ç†è®ºï¼Œè€Œæ˜¯å¸¦ä½ ä¸€æ­¥æ­¥ææ¸…æ¥šï¼š</p>
<ul>
<li><strong>ç”Ÿæˆå™¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿå’Œæ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆæœ¬è´¨åŒºåˆ«ï¼Ÿ</strong></li>
<li><strong>æ€ä¹ˆç”¨ <code>next()</code> å’Œ <code>for...of</code> å»â€œæ¶ˆè´¹â€ä¸€ä¸ªç”Ÿæˆå™¨ï¼Ÿ</strong></li>
<li><strong>åœ¨ Node.js / æµè§ˆå™¨é‡Œï¼Œç”Ÿæˆå™¨åœ¨å“ªäº›åœºæ™¯æ˜¯çœŸçš„å¥½ç”¨ï¼Ÿ</strong></li>
<li><strong>å¦‚ä½•ç»“åˆ SSEï¼ŒæŠŠå¤§æ¨¡å‹è¿™ç§æµå¼è¾“å‡ºå°è£…æˆä¸€ä¸ªå¥½ç”¨çš„å¼‚æ­¥ç”Ÿæˆå™¨ï¼Ÿ</strong></li>
</ul>
<p>çœ‹å®Œä½ å¯ä»¥ä¸çˆ±å®ƒï¼Œä½†è‡³å°‘<strong>ä¸ä¼šå†æ€•å®ƒ</strong>ã€‚</p>
<h2 data-id="heading-0">1. ç”Ÿæˆå™¨æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ç‰ˆæœ¬</h2>
<p>ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>ç”Ÿæˆå™¨å‡½æ•° = å¯ä»¥ä¸­é€” <code>yield</code> æš‚åœã€ä¹‹åå†ä»ä¸Šæ¬¡æš‚åœä½ç½®ç»§ç»­æ‰§è¡Œçš„å‡½æ•°ã€‚</strong></p>
</blockquote>
<p>å®ƒæœ‰ä¸¤ç‚¹å’Œæ™®é€šå‡½æ•°å®Œå…¨ä¸ä¸€æ ·ï¼š</p>
<ol>
<li><strong>ä¸ä¼šç«‹åˆ»æ‰§è¡Œ</strong>ï¼šè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æ—¶ï¼Œä¸ä¼šé©¬ä¸Šè·‘ä»£ç ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªâ€œç”Ÿæˆå™¨å¯¹è±¡â€ã€‚</li>
<li><strong>æ‰§è¡Œè¿‡ç¨‹å¯ä¸­æ–­</strong>ï¼šåœ¨å‡½æ•°å†…éƒ¨ç”¨ <code>yield</code> æŠ›å‡ºä¸€ä¸ªå€¼çš„åŒæ—¶ï¼Œå‡½æ•°ä¼šæš‚åœï¼›ä¸‹æ¬¡ç»§ç»­ä»æš‚åœå¤„å¾€åæ‰§è¡Œã€‚</li>
</ol>
<p>ç”Ÿæˆå™¨å‡½æ•°ç”¨ <code>function*</code> å®šä¹‰ï¼Œæœ€ç®€å•çš„ä¾‹å­é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generator</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
}
</code></pre>
<p>ä¸ç®¡æ˜¯åœ¨Â Node.js è¿˜æ˜¯æµè§ˆå™¨ä¸­ï¼Œç”Ÿæˆå™¨éƒ½å·²ç»æ˜¯éå¸¸æ ‡å‡†çš„ä¸€éƒ¨åˆ†äº†ã€‚</p>
<h2 data-id="heading-1">2. ç”Ÿæˆå™¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶ï¼Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>é‡ç‚¹ï¼šè°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°æœ¬èº«ï¼Œä¸ä¼šæ‰§è¡Œå‡½æ•°ä½“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>*Â <span class="hljs-title function_">generator</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">yield</span>Â <span class="hljs-number">1</span>;
Â Â Â Â <span class="hljs-keyword">yield</span>Â <span class="hljs-number">2</span>;
Â Â Â Â <span class="hljs-keyword">yield</span>Â <span class="hljs-number">3</span>;
}

<span class="hljs-keyword">const</span>Â genÂ =Â <span class="hljs-title function_">generator</span>();Â <span class="hljs-comment">//Â è¿™é‡Œä¸ä¼šæ‰§è¡Œå‡½æ•°ä½“</span>
</code></pre>
<p>è¿™ä¸€æ­¥è¿”å›çš„Â genÂ æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¿­ä»£å™¨å¯¹è±¡ï¼Œåªæœ‰åœ¨ä½ å¼€å§‹â€œæ¶ˆè´¹â€å®ƒæ—¶ï¼Œå‡½æ•°ä½“æ‰ä¼šçœŸæ­£æ‰§è¡Œã€‚æ¯ä¸€æ¬¡æ¶ˆè´¹ï¼Œéƒ½é€šè¿‡Â next()Â å®Œæˆã€‚</p>
<h2 data-id="heading-2">3. ç”¨Â next()Â æ¶ˆè´¹ç”Ÿæˆå™¨ï¼šä¸€æ®µä¸€æ®µåœ°æ‰§è¡Œ</h2>
<p>ç”Ÿæˆå™¨æœ€å¸¸è§çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥è°ƒç”¨Â next()ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â genÂ =Â <span class="hljs-title function_">generator</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>());Â <span class="hljs-comment">//Â {Â value:Â 1,Â done:Â falseÂ }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>());Â <span class="hljs-comment">//Â {Â value:Â 2,Â done:Â falseÂ }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>());Â <span class="hljs-comment">//Â {Â value:Â 3,Â done:Â falseÂ }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>());Â <span class="hljs-comment">//Â {Â value:Â undefined,Â done:Â trueÂ }</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li><code>value</code>ï¼šæœ¬æ¬¡Â <code>yield</code>Â æŠ›å‡ºçš„å€¼</li>
<li><code>done</code>ï¼šç”Ÿæˆå™¨æ˜¯å¦å·²ç»æ‰§è¡Œå®Œæ¯•
<ul>
<li><code>false</code>ï¼šåé¢è¿˜æœ‰ä¸œè¥¿</li>
<li><code>true</code>ï¼šå·²ç»ç»“æŸï¼Œå†è°ƒä¹Ÿæ˜¯Â <code>{ value: undefined,Â done: true }</code></li>
</ul>
</li>
</ul>
<p>è¿™é‡Œæœ‰ä¸¤ä¸ªå®¹æ˜“å¿½ç•¥çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>åŒä¸€ä¸ªç”Ÿæˆå™¨å®ä¾‹ï¼ˆ<code>gen</code>ï¼‰åªèƒ½ä»å¤´åˆ°å°¾èµ°ä¸€æ¬¡ã€‚</li>
<li>ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„èŠ‚å¥ï¼Œåœ¨ä»»ä½•æ—¶é—´ç‚¹è°ƒç”¨Â next()ï¼Œè¿™å°±æ˜¯å®ƒâ€œå¯ä»¥æš‚åœâ€çš„æœ¬è´¨ã€‚</li>
</ul>
<h2 data-id="heading-3">4. ç”¨Â <code>for...of</code>Â ä¼˜é›…éå†ç”Ÿæˆå™¨</h2>
<p>æ‰‹åŠ¨Â <code>next()</code>Â æœ‰ç‚¹ç¹çï¼Œç”Ÿæˆå™¨æœ¬èº«å°±æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨Â <code>for...of</code>Â æ¥æ¶ˆè´¹:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generator</span>();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> value <span class="hljs-keyword">of</span> gen) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);
}
<span class="hljs-comment">// 1</span>
<span class="hljs-comment">// 2</span>
<span class="hljs-comment">// 3</span>
</code></pre>
<p><code>for...of</code>Â ä¼šåœ¨å†…éƒ¨å¸®ä½ å¤„ç†Â <code>next()</code>ï¼Œç›´åˆ°Â <code>done</code>Â ä¸ºÂ <code>true</code>Â ä¸ºæ­¢ã€‚æ‰€ä»¥ä½ å¯ä»¥æŠŠç”Ÿæˆå™¨å½“æˆä¸€ä¸ªè‡ªå®šä¹‰è§„åˆ™çš„â€œæ•°æ®æµâ€æ¥çœ‹å¾…ï¼šä½ å†³å®šå®ƒä¸€æ¬¡Â <code>yield</code>Â å‡ºä»€ä¹ˆã€ä»€ä¹ˆæ—¶å€™ç»“æŸã€‚</p>
<h2 data-id="heading-4">5. ç”Ÿæˆå™¨èƒ½å¹²å˜›ï¼Ÿå‡ ä¸ªå…¸å‹åœºæ™¯</h2>
<p>å¾ˆå¤šäººå°è±¡é‡Œï¼Œç”Ÿæˆå™¨åªå’Œâ€œé«˜çº§ç”¨æ³•â€â€œåº•å±‚åº“â€ç»‘å®šåœ¨ä¸€èµ·ï¼Œä½†åœ¨Â Node.js å’Œæµè§ˆå™¨å®é™…å¼€å‘ä¸­ï¼Œæœ‰å‡ ä¸ªåœºæ™¯éå¸¸é€‚åˆç”¨å®ƒï¼š</p>
<ul>
<li>æ§åˆ¶å¤æ‚çš„å¼‚æ­¥æµç¨‹ï¼ˆæ—©æœŸÂ coÂ åº“é‚£ä¸€ä»£ç©æ³•ï¼‰</li>
<li>æ„é€ è‡ªå®šä¹‰è¿­ä»£å™¨ï¼ˆæ¯”å¦‚åˆ†é¡µæ•°æ®ã€æ ‘éå†ç­‰ï¼‰</li>
<li>å¤„ç†æµå¼æ•°æ®ï¼ˆé‡ç‚¹ï¼šå’Œå¤§æ¨¡å‹Â / <code>SSE</code>Â è¿™ç§ã€Œä¸€å°æ®µä¸€å°æ®µä¸æ–­å›æ¥ã€çš„æ•°æ®éå¸¸å¥‘åˆï¼‰</li>
</ul>
<p>ç°åœ¨æœ‰äº†Â <code>async/await</code>Â ä¹‹åï¼Œå‰ä¸¤ç±»å¸¸è§ç¨‹åº¦ä¸‹é™äº†ä¸€äº›ï¼Œä½†åœ¨æµå¼åœºæ™¯é‡Œï¼Œç”Ÿæˆå™¨ä¾ç„¶éå¸¸å¥½ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŠ¨æ€ä»£ç†]]></title>    <link>https://juejin.cn/post/7594626381433208882</link>    <guid>https://juejin.cn/post/7594626381433208882</guid>    <pubDate>2026-01-13T10:18:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594626381433208882" data-draft-id="7594662879201656858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŠ¨æ€ä»£ç†"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-13T10:18:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="makinohara"/> <meta itemprop="url" content="https://juejin.cn/user/455637552340731"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŠ¨æ€ä»£ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/455637552340731/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    makinohara
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:18:09.000Z" title="Tue Jan 13 2026 10:18:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»€ä¹ˆæ˜¯åŠ¨æ€ä»£ç†ï¼Ÿ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> {
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span>()</span> {
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åƒé¥­"</span>)
 Â   }
}
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æƒ³ç»™eatæ–¹æ³•å¢åŠ ä¸€äº›ä¸œè¥¿ï¼Œè®©åƒé¥­è¿™ä¸ªåŠ¨ä½œæ›´åŠ å®Œæ•´</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Student</span> {
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">eat</span>()</span> {
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æ‹¿ç­·å­"</span>);
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"ç››é¥­"</span>);
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"åƒé¥­"</span>);
 Â   }
}
</code></pre>
<p>è¿™ç§ä¿®æ”¹å«åšä¾µå…¥å¼ä¿®æ”¹ã€‚åœ¨ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘ä¼šè¿™ä¹ˆä¿®æ”¹ï¼Œå®¹æ˜“å¼•å‘ä¸€ç³»åˆ—è¿é”é—®é¢˜ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ç°åœ¨ä¸èƒ½ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œåˆè¦å¢åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œè¯¥å¦‚ä½•å®ç°ï¼Ÿ</p>
<p>æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªä»£ç†ï¼Œå³ä¸€ä¸ªä¸­ä»‹å…¬å¸ï¼Œå®ƒä¼šå…ˆåšæ‹¿ç­·å­å’Œç››é¥­è¿™ä¸¤ä¸ªåŠ¨ä½œï¼Œç­‰çœŸæ­£åƒé¥­äº†å†è°ƒç”¨Studentçš„eatæ–¹æ³•åƒé¥­ï¼Œè¿™å°±æ˜¯åŠ¨æ€ä»£ç†ï¼Œå®ƒå¯ä»¥æ— ä¾µå…¥å¼åœ°ç»™ä»£ç å¢åŠ é¢å¤–çš„åŠŸèƒ½ã€‚å¯ä»¥ç†è§£ä¸ºæ˜æ˜Ÿçš„ç»çºªäººã€‚</p>
<p>å¯¹è±¡æœ‰ä»€ä¹ˆæ–¹æ³•æƒ³è¢«ä»£ç†ï¼Œä»£ç†å°±ä¸€å®šè¦æœ‰å¯¹åº”çš„æ–¹æ³•ã€‚ä»£ç†ä¸­å¯¹åº”çš„æ–¹æ³•ä¼šå…ˆæŠŠå…¶å®ƒäº‹æƒ…åšå®Œï¼Œå†è°ƒç”¨åŸæ¥å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚</p>
<p>ä¸­ä»‹å¦‚ä½•çŸ¥é“è¦æ´¾æœ‰å¯¹åº”æ–¹æ³•çš„ä»£ç†ï¼Ÿè¿™éœ€è¦é€šè¿‡æ¥å£æ¥è§£å†³ã€‚æŠŠè¢«ä»£ç†çš„æ–¹æ³•å†™åœ¨æ¥å£ä¸­ï¼Œè®©ä»£ç†å’Œå¯¹è±¡éƒ½å®ç°è¿™ä¸ªæ¥å£ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigStar</span> implements Star{
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BigStar</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">this</span>.name = name;
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BigStar</span><span class="hljs-params">()</span> </span>{
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">return</span> name;
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">this</span>.name = name;
 Â   }
â€‹
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"BigStar{"</span> +
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"name='"</span> + name + <span class="hljs-string">'''</span> +
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">'}'</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-comment">//å”±æ­Œå’Œè·³èˆ</span>
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">sing</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â System.out.<span class="hljs-built_in">println</span>(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">"æ­£åœ¨å”±"</span> + name);
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"è°¢è°¢"</span>;
 Â   }
â€‹
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">dance</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â System.out.<span class="hljs-built_in">println</span>(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">"æ­£åœ¨è·³èˆ"</span>);
 Â   }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Star</span> {
â€‹
 Â  Â <span class="hljs-comment">//æŠŠæ‰€æœ‰æƒ³è¦ä»£ç†çš„æ–¹æ³•å®šä¹‰åœ¨æ¥å£ä¸­</span>
 Â  Â <span class="hljs-comment">//å”±æ­Œå’Œè·³èˆ</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title">sing</span>(<span class="hljs-params">String name</span>)</span>;
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dance</span>()</span>;
}
</code></pre>
<p>java.lang.reflect.proxyç±»æä¾›äº†ä¸ºå¯¹è±¡äº§ç”Ÿä»£ç†å¯¹è±¡çš„æ–¹æ³•</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Object</span> newProxyInstance(ClassLoader loader, <span class="hljs-keyword">Class</span>&lt;?&gt;[] interfaces, InvocationHandler h)
</code></pre>
<p>å‚æ•°ä¸€ï¼šç”¨äºæŒ‡å®šç”¨å“ªä¸ªç±»åŠ è½½å™¨ï¼Œå»åŠ è½½ç”Ÿæˆçš„ä»£ç†ç±»ã€‚</p>
<p>å‚æ•°äºŒï¼šæŒ‡å®šæ¥å£ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šç”Ÿæˆçš„ä»£ç†æœ‰å“ªäº›æ–¹æ³•</p>
<p>å‚æ•°ä¸‰ï¼šæŒ‡å®šç”Ÿæˆçš„ä»£ç†å¯¹è±¡è¦å¹²ä»€ä¹ˆäº‹æƒ…</p>
<p>ç±»åŠ è½½å™¨è´Ÿè´£å°†å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œé€šè¿‡getClassLoaderæ–¹æ³•æ‰¾åˆ°æ˜¯è°æŠŠå½“å‰è¿™ä¸ªç±»çš„å­—èŠ‚ç æ–‡ä»¶åŠ è½½åˆ°å†…å­˜çš„ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">Star</span> {
â€‹
 Â  Â <span class="hljs-comment">//æŠŠæ‰€æœ‰æƒ³è¦ä»£ç†çš„æ–¹æ³•å®šä¹‰åœ¨æ¥å£ä¸­</span>
 Â  Â <span class="hljs-comment">//å”±æ­Œå’Œè·³èˆ</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> String <span class="hljs-title">sing</span>(<span class="hljs-params">String name</span>)</span>;
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">dance</span>()</span>;
}
</code></pre>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BigStar</span> implements Star{
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> name;
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BigStar</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">this</span>.name = name;
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">BigStar</span><span class="hljs-params">()</span> </span>{
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">return</span> name;
 Â   }
â€‹
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">this</span>.name = name;
 Â   }
â€‹
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"BigStar{"</span> +
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"name='"</span> + name + <span class="hljs-string">'''</span> +
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">'}'</span>;
 Â   }
â€‹
 Â  Â <span class="hljs-comment">//å”±æ­Œå’Œè·³èˆ</span>
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">sing</span><span class="hljs-params">(<span class="hljs-type">String</span> name)</span> </span>{
 Â  Â  Â  Â System.out.<span class="hljs-built_in">println</span>(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">"æ­£åœ¨å”±"</span> + name);
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"è°¢è°¢"</span>;
 Â   }
â€‹
 Â  Â @<span class="hljs-function">Override
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">dance</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â System.out.<span class="hljs-built_in">println</span>(<span class="hljs-keyword">this</span>.name + <span class="hljs-string">"æ­£åœ¨è·³èˆ"</span>);
 Â   }
}
</code></pre>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProxyUtil</span> {
 Â  Â <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªä»£ç†</span>
â€‹
 Â  Â <span class="hljs-comment">//ç»™ä¸€ä¸ªæ˜æ˜Ÿå¯¹è±¡åˆ›å»ºä¸€ä¸ªä»£ç†</span>
 Â  Â <span class="hljs-comment">//å½¢å‚ï¼šè¢«ä»£ç†çš„æ˜æ˜Ÿå¯¹è±¡ï¼Œè¦çŸ¥é“ç»™è°åšä»£ç†</span>
 Â  Â <span class="hljs-comment">//è¿”å›å€¼ï¼šç»™æ˜æ˜Ÿåˆ›å»ºçš„ä»£ç†</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Star <span class="hljs-title">createProxy</span>(<span class="hljs-params">BigStar bigStar</span>)</span> {
â€‹
 Â  Â  Â  Â Star star = (Star) Proxy.newProxyInstance(
 Â  Â  Â  Â  Â  Â  Â  Â ProxyUtil.<span class="hljs-keyword">class</span>.getClassLoader(),
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">new</span> Class[]{Star.<span class="hljs-keyword">class</span>},<span class="hljs-comment">//å°†æ¥å£çš„å­—èŠ‚ç æ”¾åœ¨æ•°ç»„ä¸­ï¼Œè¿™äº›æ¥å£ç”¨äºæŒ‡å®šä»£ç†é•¿ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯ä¸­ä»‹èƒ½ä»£ç†å“ªäº›æ–¹æ³•ï¼Œå¦‚æœæœ‰å¤šä¸ªæ¥å£å¯ä»¥æŠŠå®ƒä»¬éƒ½å†™åœ¨æ•°ç»„ä¸­</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">new</span> InvocationHandler() { <span class="hljs-comment">//æŒ‡å®šç”Ÿæˆçš„ä»£ç†è¦åšä»€ä¹ˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â @Override
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">invoke</span>(<span class="hljs-params">Object proxy, Method method, Object[] args</span>) throws Throwable</span> {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//å‚æ•°ä¸€ï¼šä»£ç†çš„å¯¹è±¡</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//å‚æ•°äºŒï¼šè¦è¿è¡Œçš„æ–¹æ³•</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//å‚æ•°ä¸‰ï¼šæ–¹æ³•å‚æ•°</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span>(<span class="hljs-string">"sing"</span>.<span class="hljs-keyword">equals</span>(method.getName())) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‡†å¤‡è¯ç­’ï¼Œæ”¶é’±"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">"dance"</span>.<span class="hljs-keyword">equals</span>(method.getName())) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å‡†å¤‡åœºåœ°ï¼Œæ”¶é’±"</span>);
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//å»æ‰¾å¤§æ˜æ˜Ÿå¼€å§‹å”±æ­Œæˆ–è·³èˆ</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">//ä»£ç é‡Œçš„è¡¨ç°å½¢å¼ï¼šè°ƒç”¨å¤§æ˜æ˜Ÿé‡Œçš„å”±æ­Œæˆ–è·³èˆæ–¹æ³•</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> method.invoke(bigStar,args);<span class="hljs-comment">//åå°„</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â   );
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> star;
 Â   }
}
â€‹
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">test</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
 Â  Â  Â  Â <span class="hljs-comment">//éœ€æ±‚ï¼šç²‰ä¸æƒ³è¦å¤§æ˜æ˜Ÿå”±ä¸€é¦–æ­Œ</span>
 Â  Â  Â  Â <span class="hljs-comment">//1.è·å–ä»£ç†çš„å¯¹è±¡ï¼šä»£ç†å¯¹è±¡ = ProxyUtil.createProxyï¼ˆå¤§æ˜æ˜Ÿçš„å¯¹è±¡ï¼‰</span>
 Â  Â  Â  Â <span class="hljs-comment">//2.å†è°ƒç”¨ä»£ç†çš„å”±æ­Œæ–¹æ³•ï¼Œæ­¤æ—¶ä¼šè¿è¡Œinvoke</span>
â€‹
 Â  Â  Â  Â <span class="hljs-comment">//1.è·å–ä»£ç†çš„å¯¹è±¡</span>
 Â  Â  Â  Â <span class="hljs-type">BigStar</span> <span class="hljs-variable">bigStar</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BigStar</span>(<span class="hljs-string">"é¸¡å“¥"</span>);
 Â  Â  Â  Â <span class="hljs-type">Star</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> ProxyUtil.createProxy(bigStar);
â€‹
 Â  Â  Â  Â <span class="hljs-comment">//2.è°ƒç”¨å”±æ­Œæ–¹æ³•</span>
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> proxy.sing(<span class="hljs-string">"åªå› ä½ å¤ªç¾"</span>);
 Â  Â  Â  Â System.out.println(res);
 Â   }
}
</code></pre>
<p>é‡ç‚¹åœ¨äºç†è§£åˆ›å»ºä»£ç†çš„ä»£ç ã€‚å¯ä»¥ç†è§£ä¸ºç»™æ˜æ˜Ÿé…ç½®ä¸€ä¸ªç»çºªäººã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ39ï¼‰Hibernateä¸­å¦‚ä½•ä½¿ç”¨æ‹¦æˆªå™¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7594523145211674678</link>    <guid>https://juejin.cn/post/7594523145211674678</guid>    <pubDate>2026-01-13T12:03:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594523145211674678" data-draft-id="7594642978696036415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ39ï¼‰Hibernateä¸­å¦‚ä½•ä½¿ç”¨æ‹¦æˆªå™¨ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-13T12:03:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ39ï¼‰Hibernateä¸­å¦‚ä½•ä½¿ç”¨æ‹¦æˆªå™¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T12:03:57.000Z" title="Tue Jan 13 2026 12:03:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">Hibernateä¸­çš„æ‹¦æˆªå™¨</h3>
<p>Hibernateæ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ä¸€ä¸ªå…è®¸ä½ åœ¨å®ä½“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼ˆå¦‚ä¿å­˜ã€æ›´æ–°ã€åˆ é™¤ç­‰ï¼‰å‘ç”Ÿæ—¶æ’å…¥è‡ªå®šä¹‰é€»è¾‘çš„æœºåˆ¶ã€‚é€šè¿‡å®ç°<code>Interceptor</code>æ¥å£ï¼Œå¯ä»¥åœ¨è¿™äº›äº‹ä»¶è§¦å‘æ—¶æ‰§è¡Œç‰¹å®šçš„æ“ä½œã€‚</p>
<h3 data-id="heading-1">ä½¿ç”¨æ‹¦æˆªå™¨çš„ç¤ºä¾‹ä»£ç </h3>
<h4 data-id="heading-2">æ­¥éª¤ä¸€ï¼šåˆ›å»ºä¸€ä¸ªæ‹¦æˆªå™¨ç±»</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°<code>Interceptor</code>æ¥å£çš„ç±»ã€‚è¿™ä¸ªç±»å°†åŒ…å«æˆ‘ä»¬å¸Œæœ›åœ¨å®ä½“å¯¹è±¡ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œçš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.interceptor;

<span class="hljs-keyword">import</span> org.hibernate.EmptyInterceptor;
<span class="hljs-keyword">import</span> org.hibernate.type.Type;

<span class="hljs-keyword">import</span> java.io.Serializable;
<span class="hljs-keyword">import</span> java.util.Iterator;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomInterceptor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">EmptyInterceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDelete</span><span class="hljs-params">(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types)</span> {
        System.out.println(<span class="hljs-string">"Entity deleted: "</span> + entity);
        <span class="hljs-built_in">super</span>.onDelete(entity, id, state, propertyNames, types);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onFlushDirty</span><span class="hljs-params">(Object entity, Serializable id, Object[] currentState, Object[] previousState, String[] propertyNames, Type[] types)</span> {
        System.out.println(<span class="hljs-string">"Entity updated: "</span> + entity);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onFlushDirty(entity, id, currentState, previousState, propertyNames, types);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onLoad</span><span class="hljs-params">(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types)</span> {
        System.out.println(<span class="hljs-string">"Entity loaded: "</span> + entity);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onLoad(entity, id, state, propertyNames, types);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onSave</span><span class="hljs-params">(Object entity, Serializable id, Object[] state, String[] propertyNames, Type[] types)</span> {
        System.out.println(<span class="hljs-string">"Entity saved: "</span> + entity);
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.onSave(entity, id, state, propertyNames, types);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postFlush</span><span class="hljs-params">(Iterator entities)</span> {
        System.out.println(<span class="hljs-string">"Post flush"</span>);
        <span class="hljs-built_in">super</span>.postFlush(entities);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">preFlush</span><span class="hljs-params">(Iterator entities)</span> {
        System.out.println(<span class="hljs-string">"Pre flush"</span>);
        <span class="hljs-built_in">super</span>.preFlush(entities);
    }
}
</code></pre>
<h4 data-id="heading-3">æ­¥éª¤äºŒï¼šé…ç½®Hibernateä»¥ä½¿ç”¨æ‹¦æˆªå™¨</h4>
<p>åœ¨åˆ›å»ºSessionFactoryå®ä¾‹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ä¼ é€’ç»™Hibernateã€‚</p>
<h5 data-id="heading-4">Hibernateé…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h5 data-id="heading-5">HibernateUtilç±»</h5>
<p>åœ¨<code>HibernateUtil</code>ç±»ä¸­ï¼Œæˆ‘ä»¬å°†è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ä¼ é€’ç»™<code>Configuration</code>å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;
<span class="hljs-keyword">import</span> com.example.interceptor.CustomInterceptor;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>);
            configuration.setInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomInterceptor</span>());  <span class="hljs-comment">// è®¾ç½®è‡ªå®šä¹‰æ‹¦æˆªå™¨</span>
            sessionFactory = configuration.buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤ä¸‰ï¼šä½¿ç”¨Hibernateè¿›è¡Œæ•°æ®åº“æ“ä½œ</h4>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåŒ…å«ä¸€äº›CRUDæ“ä½œçš„ç¤ºä¾‹ï¼Œä»¥è§¦å‘æ‹¦æˆªå™¨çš„å„ç§æ–¹æ³•ã€‚</p>
<h5 data-id="heading-7">ç¤ºä¾‹æ“ä½œç±»</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> com.example.domain.Product;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateInterceptorExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();

        <span class="hljs-comment">// æ’å…¥ç¤ºä¾‹æ•°æ®</span>
        insertSampleData(sessionFactory);

        <span class="hljs-comment">// æ›´æ–°ç¤ºä¾‹æ•°æ®</span>
        updateSampleData(sessionFactory);

        <span class="hljs-comment">// æŸ¥è¯¢ç¤ºä¾‹æ•°æ®</span>
        querySampleData(sessionFactory);

        <span class="hljs-comment">// åˆ é™¤ç¤ºä¾‹æ•°æ®</span>
        deleteSampleData(sessionFactory);

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Laptop"</span>, <span class="hljs-number">1000.0</span>);
            <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">"Smartphone"</span>, <span class="hljs-number">500.0</span>);
            session.save(product1);
            session.save(product2);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Inserted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, <span class="hljs-number">1L</span>);
            product.setPrice(<span class="hljs-number">1200.0</span>);
            session.update(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Updated sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">querySampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, <span class="hljs-number">1L</span>);
            System.out.println(<span class="hljs-string">"Queried product: "</span> + product.getName() + <span class="hljs-string">", "</span> + product.getPrice());
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteSampleData</span><span class="hljs-params">(SessionFactory sessionFactory)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, <span class="hljs-number">1L</span>);
            session.delete(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Deleted sample data"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-8">è¯¦ç»†è§£é‡Š</h3>
<ol>
<li>
<p><strong>åˆ›å»ºæ‹¦æˆªå™¨ç±»</strong>ï¼š</p>
<ul>
<li><code>CustomInterceptor</code> ç±»å®ç°äº† <code>EmptyInterceptor</code>ã€‚</li>
<li>é‡å†™äº† <code>onDelete</code>, <code>onFlushDirty</code>, <code>onLoad</code>, <code>onSave</code>, <code>preFlush</code>, <code>postFlush</code> ç­‰æ–¹æ³•æ¥æ’å…¥è‡ªå®šä¹‰é€»è¾‘ï¼Œæ¯”å¦‚æ‰“å°æ—¥å¿—ã€‚</li>
</ul>
</li>
<li>
<p><strong>é…ç½®Hibernateä»¥ä½¿ç”¨æ‹¦æˆªå™¨</strong>ï¼š</p>
<ul>
<li>åœ¨ <code>HibernateUtil</code> ç±»ä¸­ï¼Œä½¿ç”¨ <code>Configuration</code> çš„ <code>setInterceptor</code> æ–¹æ³•æ¥è®¾ç½®è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ã€‚</li>
<li>æ‹¦æˆªå™¨å°†åœ¨ <code>SessionFactory</code> åˆ›å»ºæ—¶è¢«åº”ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç¤ºä¾‹æ“ä½œç±»</strong>ï¼š</p>
<ul>
<li>åŒ…å«äº†ä¸€äº›CRUDæ“ä½œï¼Œç”¨äºæ¼”ç¤ºå¦‚ä½•åœ¨æ“ä½œè¿‡ç¨‹ä¸­è§¦å‘æ‹¦æˆªå™¨çš„æ–¹æ³•ã€‚</li>
<li>é€šè¿‡ <code>insertSampleData</code>, <code>updateSampleData</code>, <code>querySampleData</code>, <code>deleteSampleData</code> æ–¹æ³•å±•ç¤ºäº†æ•°æ®çš„æ’å…¥ã€æ›´æ–°ã€æŸ¥è¯¢å’Œåˆ é™¤æ“ä½œã€‚</li>
</ul>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒHibernateä¸­çš„æ‹¦æˆªå™¨å¯ä»¥åœ¨å®ä½“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œè‡ªå®šä¹‰çš„é€»è¾‘ï¼Œä»è€Œå®ç°ç±»ä¼¼æ—¥å¿—è®°å½•ã€æ•°æ®éªŒè¯ã€å®¡è®¡ç­‰åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–°çš„èµ·ç‚¹ï¼Œæ–°çš„æœŸç›¼ï½œ2025å¹´ç»ˆæ€»ç»“]]></title>    <link>https://juejin.cn/post/7594626381433159730</link>    <guid>https://juejin.cn/post/7594626381433159730</guid>    <pubDate>2026-01-13T10:09:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594626381433159730" data-draft-id="7594482829755433006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–°çš„èµ·ç‚¹ï¼Œæ–°çš„æœŸç›¼ï½œ2025å¹´ç»ˆæ€»ç»“"/> <meta itemprop="keywords" content="å¹´ç»ˆæ€»ç»“"/> <meta itemprop="datePublished" content="2026-01-13T10:09:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–‡å¦‚ç§‹é›¨"/> <meta itemprop="url" content="https://juejin.cn/user/3897092103223517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–°çš„èµ·ç‚¹ï¼Œæ–°çš„æœŸç›¼ï½œ2025å¹´ç»ˆæ€»ç»“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3897092103223517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–‡å¦‚ç§‹é›¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:09:30.000Z" title="Tue Jan 13 2026 10:09:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>2025 å¹´å¥½ä¼¼åšäº†ä¸€åœºæ¢¦ã€‚</p>
<p>æ¢¦é‡Œéåœ°é—ªçƒç€è®°å¿†çš„ç¢ç‰‡ï¼Œæˆ‘èµ¤è„šå‰è¡Œï¼Œå‰é¢æ˜¯ä¸€æ‰‡é€ç€å…‰åŠæ©ç€çš„é—¨ï¼Œæˆ‘ä¼¸å‡ºæ‰‹æƒ³è¦å»è§¦æ‘¸å®ƒï¼Œä½†æ¯èµ°ä¸€æ­¥ï¼Œè„šåº•è¢«ç¢ç‰‡æ‰å¾—ç”Ÿç–¼ã€‚æˆ‘é€è¿‡é—¨ç¼çœ‹åˆ°äº†å¤–é¢çš„ä¸–ç•Œï¼Œé‚£æ˜¯æ²¡æœ‰çœ‹è¿‡çš„æ™¯è±¡ï¼Œå¦‚è«å¥ˆçš„ç”»ä¸€èˆ¬çš„å¤©ç©ºå’Œäº‘æœµï¼Œæš–é£å¹è¿‡ç»¿è‰²çš„æ–œå¡è‰åªï¼Œå‡ ä¸ªæ¨¡ç³Šçš„èº«å½±æµ…ç¬‘ç€å‘æˆ‘ä¼¸å‡ºäº†æ‰‹ï¼Œä¸€åˆ‡éƒ½æ˜¯æˆ‘æ†§æ†¬çš„æ¨¡æ ·ã€‚</p>
<p>æˆ‘å¿ç€ç–¼ç—›å°æ­¥å‰è¡Œç€ï¼Œä½†è¶Šé è¿‘ç€é‚£æ‰‡é€šå¾€æ–°ä¸–ç•Œçš„é—¨æ—¶ï¼Œè€³è¾¹ä¼ æ¥äº†æ¥è‡ªèƒŒåçš„å£°éŸ³ï¼Œé‚£æ˜¯æˆ‘ç†Ÿæ‚‰çš„å£°éŸ³ã€‚æˆ‘ä¸æ•¢å›å¤´ï¼Œä¹ŸçŸ¥é“ä¸åº”è¯¥å›å¤´ï¼Œæˆ‘çŸ¥é“ï¼ŒèƒŒåçš„ä¸æ˜¯åˆ«äººï¼Œè€Œæ˜¯è¿‡å»çš„è‡ªå·±ã€‚</p>
<p>æˆ‘ç»ˆæ˜¯èµ°åˆ°äº†é—¨å‰ï¼Œæ¡ä½äº†é€šå¾€æ–°ä¸–ç•Œçš„é—¨æŠŠæ‰‹ï¼Œæ‰‹æŒä¼ æ¥äº†äº›è®¸æ¸©æš–ï¼Œé—¨å¤–çš„é˜³å…‰é€è¿‡ç¼éš™æ’’åœ¨æ‰‹èƒŒä¸Šï¼Œæ³›èµ·ä¸ä¸æ™¶è¹ã€‚</p>
<p>â€œæˆ‘è¦å¾€å‰èµ°äº†ã€‚â€ æˆ‘å¯¹è¿‡å»çš„è‡ªå·±è¯´ã€‚</p>
<p>æ‰“å¼€é—¨æ‹¥æŠ±é˜³å…‰çš„é‚£ä¸€åˆ»ï¼Œè€³æ—ä¼¼ä¹å¬åˆ°ä¸€å£°å‘Šåˆ«ã€‚</p>
<p>â€œå¥½ï¼Œä½ ä¸€å®šè¦å¹¸ç¦ã€‚â€</p>
<h2 data-id="heading-1">è§£æ„ 2025</h2>
<p>1 å¹´æ‹†åˆ†å‡ºæ¥ï¼Œä¾¿æ˜¯ 12 ä¸ªæœˆï¼Œè€ŒæŒ‰å¤©æ‹†åˆ†ï¼Œä¹Ÿåªæ˜¯ 36.5 ä¸ª 10 å¤©ã€‚æµ‘æµ‘å™©å™©æ˜¯ 1 å¤©ï¼Œå¼€å¼€å¿ƒå¿ƒä¹Ÿæ˜¯ 1 å¤©ï¼Œæœ‰æ‰€æˆå°±æ˜¯ 1 å¤©ï¼Œå¤±è½æ„¤æ…¨äº¦æ˜¯ 1 å¤©ã€‚ä»æœ‹å‹åœˆç¿»äº†ç¿» 2025 å¹´å‘ç”Ÿè¿‡çš„äº‹ï¼Œæœ‰æ•…äº‹ï¼Œä¹Ÿæœ‰äº‹æ•…ï¼Œæœ‰é¡ºå…¶è‡ªç„¶ï¼Œä¹Ÿæœ‰å¶å°”å¤±æ§ã€‚</p>
<h3 data-id="heading-2">æˆ‘&amp;é¸¿è’™</h3>
<p>æœ€æ—©åœ¨ 23 å¹´åº•äº†è§£é¸¿è’™å¼€å§‹ï¼Œåˆ° 24 å¹´è®¤è¯æˆä¸ºåä¸ºå¼€å‘è€…ä¸“å®¶ï¼Œå†åˆ° 25 å¹´çº¿ä¸‹çº¿ä¸Šçš„<strong>æ´»åŠ¨åˆ†äº«</strong>ï¼Œæˆ‘åœ¨é¸¿è’™å¸ƒé“è¿™æ¡è·¯ä¸Šè·Œè·Œè¡è¡èµ°è¿‡è®¸ä¹…ã€‚</p>
<p>2025 å¹´å‘ç”Ÿçš„äº‹æƒ…ä¸å¤šï¼Œ3 æœˆçš„ArkUI æ¡ˆä¾‹åˆ†äº«ï¼Œ6 æœˆçš„ HarmonyOS SDK AIå¼€æ”¾èƒ½åŠ›åˆ†äº«ï¼Œä¸¤åœºçº¿ä¸‹<strong>HDDæ´»åŠ¨</strong>ï¼Œè®©é¸¿è’™å¸ƒé“æˆä¸ºäº†ä¸é”™çš„å¼€ç«¯ã€‚9 æœˆä¸Šæ—¬çš„ä¸¤åœº<strong>çº¿ä¸Šç›´æ’­</strong>ï¼ŒHarmonyOS åŠ¨ç”»å®æˆ˜ã€HarmonyOS åŠ¨ç”»ä¸å¼€æºé¡¹ç›®å®è·µï¼Œåˆ™åœ¨ UI çš„åŸºç¡€ä¸Šæ­ç¤ºäº†äººæœºäº¤äº’çš„æ›´å¤šç©æ³•ã€‚9 æœˆä¸‹æ—¬ï¼Œ<strong>åä¸ºå…¨è”æ¥å¤§ä¼š 2025</strong> çš„ <strong>OpenSpeech</strong> ç¯èŠ‚ä¸Šï¼Œä¹Ÿæœ‰å¹¸å°†è‡ªå·±çš„å¼€æºé¡¹ç›®åŠå…¶å†ç¨‹åˆ†äº«ç»™æ›´å¤šçš„å¼€å‘è€…æœ‹å‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343782038d3740a3b987493194c5f108~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=WPVlbBmg8jxksNxj6mlxvmYUfu0%3D" alt="" loading="lazy"/></p>
<p>UIã€åŠ¨ç”»ã€AIã€å¼€æºï¼Œæ¯ä¸€æ¬¡åˆ†äº«éƒ½æ˜¯æ–°çš„ä¸»é¢˜ï¼Œå¯¹æˆ‘æ¥è¯´éƒ½éœ€è¦é‡æ–°æ¥è§¦ã€å¸æ”¶ã€è½¬åŒ–ï¼Œæœ€ç»ˆè¾“å‡ºã€‚è¿˜è®°å¾—ç¬¬ 1 æ¬¡çº¿ä¸Šç›´æ’­å‰è¯•æ’­æ—¶ï¼Œå¯¹ç€å†™å¥½çš„ç¨¿ä»¶å¿µç¨¿ï¼Œçœ¼ç¥é£˜å¿½ã€è¯­è°ƒä¹å‘³ï¼Œåˆ°åé¢ç¬¬ 2 æ¬¡ç›´æ’­çš„æ…·æ…¨æ¿€æ˜‚ï¼Œæ²‰ç¨³æœ‰åºã€‚è€Œçº¿ä¸‹æ´»åŠ¨ä¹Ÿä¸å†ç•ç•ç¼©ç¼©ï¼Œå¼€å§‹è‡ªä¿¡ä¸”å¦ç„¶åœ°è®²è¿°å±äºè‡ªå·±çš„æ•…äº‹ï¼Œå¶å°”è¿˜èƒ½è¯´å‡ ä¸ªæ®µå­è®©ç°åœºæ´»è·ƒèµ·æ¥ã€‚</p>
<blockquote>
<p>æ¯ä¸€æ¬¡æ–°çš„å°è¯•ï¼Œéƒ½æˆä¸ºäº†å®è´µçš„äººç”Ÿä½“éªŒã€‚</p>
</blockquote>
<p>å¦‚æœè¯´è¿˜æœ‰ä»€ä¹ˆï¼Œæ˜¯åœ¨ç¼–ç¨‹å’Œæ¢ç´¢å¿ƒä¹‹å¤–æ¿€åŠ±ç€æˆ‘ä¸æ–­åœ¨é¸¿è’™é¢†åŸŸæ·±è€•ï¼Œæˆ‘æƒ³å¯èƒ½æ˜¯æ­£å‘åé¦ˆå§ï¼Œé‚£æ˜¯åœ¨æ¸©é¥±ä¹‹ä¸Šçš„è‡ªæˆ‘ä»·å€¼çš„å®ç°ã€‚åœ¨ <strong>2025 åº•çš„é¸¿è’™äººæ‰å¸ƒé“å¸ˆå¹´åº¦è®ºå›</strong>ä¸Šï¼Œå½“åœ¨å¤§è§å¹•ä¸Šçœ‹åˆ°è‡ªå·±çš„é‚£ä¸€åˆ»ï¼Œæ¿€åŠ¨çš„æ²‰é»˜èƒœè¿‡æ— æ•°çš„è¨€è¯­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83b9ff68fece4bc0996f17dc602f53f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=X5Njyd4GqQNx%2FTbNVbO7HZWSeaw%3D" alt="" loading="lazy"/></p>
<p>é¸¿è’™ï¼Œåœ¨ä¸­å›½å¤ä»£å“²å­¦ç¥è¯ä¸­æŒ‡çš„æ˜¯å¤©åœ°æœªå¼€çš„æ··æ²ŒçŠ¶æ€ï¼Œæ—¢æ˜¯èµ·æºï¼Œä¹Ÿæ˜¯æœªæ¥ã€‚å¾ˆæ˜¯ç¥å¥‡ï¼Œæ‡µæ‡µæ‡‚æ‡‚å°±è¸å…¥äº†é¸¿è’™ç”Ÿæ€ï¼Œéšåå°è¯•äº†å¾ˆå¤šä»¥å‰ä»æœªåšè¿‡çš„äº‹æƒ…ï¼Œä¹Ÿå–å¾—äº†ä¸é”™çš„æˆå°±ï¼Œå½“ç„¶ï¼Œè¸©è¿‡çš„å‘ä¹Ÿåªæœ‰è‡ªå·±çŸ¥é“ã€‚</p>
<p><strong>å…ˆå¼€å§‹ï¼Œåœ¨ä¸æ‰“ä¹±æ—¥å¸¸ç”Ÿæ´»æ–¹å¼çš„æƒ…å†µä¸‹è¿›è¡Œåˆ›æ–°å’Œè¿‡æ¸¡</strong>ï¼Œè¿™å¯èƒ½æ˜¯æˆ‘åœ¨é¸¿è’™è¿™é‡Œå­¦åˆ°çš„æœ€æœ‰ç”¨çš„é“ç†ã€‚</p>
<h3 data-id="heading-3">æˆ‘&amp; AI</h3>
<p>ChatGPTã€Midjourneyã€Stable Diffusion æ‰“å¼€å›¾æ–‡ç”Ÿæˆçš„æ½˜å¤šæ‹‰é­”ç›’ï¼Œåˆ° Sunoã€Sora çš„éŸ³ä¹è§†é¢‘æƒŠè‰³äº®ç›¸ï¼Œåˆ°ç°åœ¨ Copilotã€Cursorã€TRAEã€ClaudeCodeã€Gemini å¸­å· AI ç¼–ç¨‹ï¼Œä»¥åŠåƒ DeepSeekã€Kimiã€è±†åŒ…ç­‰ C ç«¯äº§å“æ·±å…¥äººä»¬çš„æ—¥å¸¸ç”Ÿæ´»ã€‚æ¯å¤©ï¼Œç”šè‡³æœ‰å¯èƒ½ä¸‹ä¸€ç§’å°±æœ‰ä¸€ä¸ªæ–°çš„å½¢æ€çš„ AI äº§å“æ›å…‰åœ¨å¤§ä¼—è§†é‡ã€‚</p>
<p>è¿™ä¸¤å¹´æ€»æ˜¯èƒ½å¬åˆ°æˆ–è€…çœ‹åˆ° AIï¼Œæˆ–è€… AI å·¥å…·å±‚å‡ºä¸ç©·ï¼Œå¥½åƒä¸äº†è§£ AI æˆ–è€…æ²¡æœ‰ä½¿ç”¨ AI å°±ä¼šè¢«ç¤¾ä¼šç«‹å³æ·˜æ±°ã€‚è¿™æœ‰ç‚¹åƒ 03 å¹´è®¡ç®—æœºå‡ºç°é‚£æ ·ï¼ŒAI ä¼ä¸šå–·æ¶Œè€Œå‡ºç„¶åå¿«é€Ÿæ¶ˆäº¡ï¼Œè‡ªåª’ä½“å……æ–¥ç€ç„¦è™‘å’Œå¹»æƒ³ï¼Œè€Œæ™®ç½—å¤§ä¼—åœ¨è¿™ç§æ°›å›´ä¸‹é€‰æ‹©äº†è¾¹å·è¾¹èººå¹³ï¼Œä¸€ç‰‡ç¥¥å’Œåˆå«å¸¦ä¸€ä¸è¯¡å¼‚ã€‚</p>
<p>æˆ‘æœ€æ—©æ¥è§¦ AI ä¹Ÿæ˜¯ä» ChatGPT å¼€å§‹ï¼Œæ–¹æ¡ˆæ–‡æ¡£çš„ç¼–å†™æ•ˆç‡å’Œè´¨é‡ï¼Œä»¥åŠé‚£æ‰“å­—æœºçš„å¯¹è¯äº¤äº’æ–¹å¼ï¼Œè®©æˆ‘ç¬¬ä¸€æ¬¡æœ‰äº†åƒç§‘å¹»ç”µè„‘é‚£æ ·çš„äººæœºäº¤äº’çš„å®æ„Ÿã€‚éšååœ¨å„ç±» AI å·¥å…·çš„â€œæ´—ç¤¼â€ä¸‹ï¼Œæˆ‘å¼€å§‹å„ç§å°è¯•å’Œå­¦ä¹ ã€‚éå¸¸å¹¸è¿çš„æ˜¯ï¼Œæœ€æ—©æ¥è§¦çš„å­—èŠ‚æ¨å‡ºçš„ AI ç¼–ç¨‹å·¥å…· MarsCode å‡çº§æˆä¸ºäº† <strong>TRAEï¼ˆThe Real AI Engineerï¼‰</strong>ï¼Œä¹Ÿè®©æˆ‘æœ‰äº†æ·±å…¥äº†è§£ AI ç¼–ç¨‹é¢†åŸŸçš„æœºä¼šã€‚</p>
<p>äºæ˜¯ä¹åœ¨ 2000 å¤šäººçš„ç­›é€‰ä¸‹ï¼Œæˆ‘æˆä¸ºäº†æ·±åœ³çš„<strong>TRAE Fellow</strong> å’Œ<strong>TRAE Expert</strong>ï¼Œå¼€å§‹ä»å‚åŠ æ´»åŠ¨ã€å‡ºå¸­æ´»åŠ¨åˆ°ç»„ç»‡æ´»åŠ¨ï¼Œåœ¨ 25 å¹´å¼€å§‹äº†æ–°çš„å°è¯•ã€‚10 æœˆçš„ TRAE Friends æ·±åœ³åœºçš„ <strong>Meetup</strong>ï¼Œ11 æœˆçš„TRAE Solo <strong>Hackathon</strong>ï¼Œä¸€ä¸‹å­ä»ä¸€ä¸ªäººçš„â€œå•æ‰“ç‹¬æ–—â€è½¬å˜æˆäº†ä¸æ›´å¤š AI çˆ±å¥½è€…ä»¬ä¸€èµ·æ¢ç´¢å’Œæ²Ÿé€šï¼Œæœ‰ç‚¹å¼€å¯äº†æ‰“æ€ªå‡çº§çš„æ–°ç¯‡ç« ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bfbb7977e79474494bebbfea8cbe2f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=UTsk5f1MiVB%2FP%2Fc5TykEuYdcna4%3D" alt="" loading="lazy"/></p>
<p>AI ç»™äººä»¬å¸¦æ¥çš„ï¼Œæ˜¯å®ç°æ¢¦æƒ³çš„å¯èƒ½ï¼Œæˆ‘ä¸€ç›´ç§‰æ‰¿ç€çš„è¿™ä¸ªè§‚ç‚¹ã€‚å½“ä¸€é¡¹æŠ€æœ¯èƒ½å¤Ÿæ‰“ç ´ç¼–ç¨‹å¼€å‘çš„é—¨æ§›ï¼Œè®©æ›´å¤šçš„åˆå­¦è€…èƒ½ç”¨æå°‘çš„ä»£ä»·æ¥å°½å¯èƒ½é è¿‘è‡ªå·±æƒ³è¦çš„ç›®æ ‡ï¼Œæˆ‘æƒ³è¿™æ‰æ˜¯æŠ€æœ¯è½åœ°çš„ä»·å€¼ã€‚è€Œåœ¨è¿™ä¸ªç”Ÿæ€é‡Œï¼Œæˆ‘æƒ³åšçš„æˆ–è€…èƒ½åšçš„ï¼Œä¾¿æ˜¯åœ¨æŒç»­å­¦ä¹ çš„åŸºç¡€ä¸Šï¼Œå°†è‡ªå·±è¿‡å¾€æ‰€è·å¾—çš„ç»éªŒå’Œåˆå¿ƒï¼Œä»¥è¿™æ ·é‚£æ ·çš„æ–¹å¼å»æ„ŸæŸ“ä¸€äº›äººã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9aad537d806d40cfa474cd241547d868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=vlRycY6f923R4sKciK4wS8nrN7E%3D" alt="" loading="lazy"/></p>
<p>å…¶å®æœ€æ—© AI ä¹Ÿç»™æˆ‘å¸¦æ¥è¿‡ç„¦è™‘ï¼Œå®ƒè®©æˆ‘è¿‡å¾€å¯èƒ½å­¦äº†å‡ å¹´çš„ç‹¬ç«‹å¼€å‘ï¼Œæ— è®ºæ˜¯ iOS è¿˜æ˜¯é¸¿è’™çš„ç¼–ç¨‹ä¼˜åŠ¿å¯èƒ½ä¸€ä¸‹æ¸…é›¶ã€‚ä½†å®é™…æ¥è§¦åä¼šå‘ç°ï¼ŒAI æŠ€æœ¯åè€Œè®©æˆ‘æ›´ä¸“æ³¨äºé€»è¾‘å®ç°ï¼Œè€Œä¸æ˜¯ä»£ç å—æœ¬èº«ï¼Œè€Œé€»è¾‘å®ç°æœ¬å°±æ˜¯äººçš„ç†æ€§å¼ºé¡¹ã€‚</p>
<p>ä»å‘½ä»¤å¼è¯­æ³•ï¼Œåˆ°å£°æ˜å¼è¯­æ³•ï¼Œå†åˆ°ç°åœ¨çš„<strong>è‡ªç„¶è¯­è¨€ç¼–ç¨‹</strong>ï¼Œä¸ä¼šæœ‰äººæ˜¯ä»…ä»…ä¸ºäº†ä»£ç è¯­æ³•å¥½çœ‹è€Œå»å­¦ä¹ ç¼–ç¨‹ï¼Œå­¦ä¹ ç¼–ç¨‹çš„ç›®çš„ï¼Œæ›´å¤šæ˜¯ä¸ºäº†åˆ›é€ å‡ºæœ‰è¶£å¥½ç©çš„ä½œå“ï¼Œå®ƒå¯ä»¥æ˜¯å•†ä¸šåŒ–çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸ºäº†è®©è‡ªå·±å¼€å¿ƒã€‚</p>
<p>äºæ˜¯æˆ‘å¼€å§‹äº†æ–°çš„å°è¯•ï¼Œå°†è‡ªå·±çµæ„Ÿä¸€ç°çš„æƒ³æ³•ï¼Œé€šè¿‡ <strong>VibeCoding</strong> çš„æ–¹å¼å‘ˆç°å‡ºæ¥ï¼Œç®—æ˜¯åœ¨æ–°çš„ä¸€å¹´é‡Œæ¢ç´¢ä¸€ç§æ–°çš„è·¯çº¿å§ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16bd1c853eb1499cbed4066293296d8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=gZSayWNgauRbfsqrWUG95YENSqI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">æˆ‘&amp;å·¥ä½œ</h3>
<p>å¹´åº•æ”¶åˆ° <strong>N+1</strong> çš„é‚£ä¸€åˆ»ï¼Œæˆ‘å’Œç°åœ¨ä¸€æ ·ï¼Œå¾ˆæ˜¯å¦ç„¶ã€‚</p>
<p>è®¸æ˜¯ä¸‹åŠå¹´ä¸šåŠ¡æ‰¾ä¸åˆ°å¢é•¿å£ï¼Œä»¥åŠäº§å“æ¼”è¿›æ–¹å‘å·²ç„¶æœ‰ç‚¹å‡Œä¹±ï¼Œæˆ–æ˜¯åœ¨8æœˆä»½ä¸€åŠåŒäº‹è½¬å²—ç¦»å¼€çš„å¾å…†......ä¸€ç³»åˆ—çš„å˜åŒ–è®©æˆ‘å·²ç»ä¸ºâ€œæœ€åâ€çš„ç»“æœåšå‡†å¤‡ã€‚è¿˜è®°å¾—é‚£å¤©å’Œ LD ä¸€èµ·å»å’Œå¤§è€æ¿èŠçš„æ—¶å€™é—®æˆ‘æ˜¯ä»€ä¹ˆæƒ³æ³•ï¼Œæˆ‘å¿ƒé‡Œç©ºè¡è¡çš„ï¼Œæ²¡æœ‰å¤ªå¤šçš„æƒ…ç»ªæ³¢åŠ¨ï¼Œåé¢ç”šè‡³å•ç‹¬å’Œå¤§è€æ¿åƒé¥­æ—¶é—®èµ·æˆ‘çš„æƒ³æ³•æ—¶ï¼Œæˆ‘ä¹Ÿè¯´éå¸¸åŒæ„å½“å‰å…¬å¸çš„å†³ç­–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6758663a5d83475890f614dbc9880b71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=rGHOsN91RpKKzSEgRIrmw12bJZ4%3D" alt="" loading="lazy"/></p>
<p>24 å¹´åˆè¿›å…¥è¿™å®¶å…¬å¸ï¼Œä» 0 å¼€å§‹äº†è§£æµ·å¤–æ—…æ¸¸åˆ†é”€è¿™ä¸ªç»†åˆ†è¡Œä¸šï¼Œå¹¶ä» 0 å¼€å§‹ç®¡ç†å›¢é˜Ÿã€æ­å»ºä»å‰ã€ä¸­ã€å 3 ç«¯çš„ç³»ç»Ÿï¼Œæ–°çš„å›¢é˜Ÿï¼Œæ–°çš„è¡Œä¸šï¼Œæ–°çš„ç›®æ ‡å’Œå±•æœ›ï¼Œèµ·åˆä¸€åˆ‡å¥½åƒéƒ½å¾€ç†æƒ³çš„æ–¹å‘æ¼”è¿›ã€‚å›è¿‡å¤´æ¥çœ‹ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½åŸºäºä¼ä¸šä¸šç»©çš„å¢é•¿å’Œå¹³å°ä¾é ï¼Œè€Œåœ¨å…¶ä¸­æœ‰æˆé•¿ï¼Œä¹Ÿæœ‰é—æ†¾ã€‚</p>
<p>åœ¨è¿™ä»½å·¥ä½œä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¥½çš„ LDï¼Œæ•™ä¼šäº†æˆ‘å¾ˆå¤šå…³äº<strong>äº§å“ã€å¼€å‘ã€å›¢é˜Ÿç®¡ç†</strong>ç›¸å…³çš„æŠ€èƒ½ï¼Œä¹Ÿè®©æˆ‘å¯¹äºäº§å“å¼€å‘æœ‰äº†ä¸€äº›ä¸ä¸€æ ·çš„ç†è§£ã€‚</p>
<p>äº§ç ”å›¢é˜Ÿå°±åƒæ˜¯ä¸€æ¶ç«è½¦ï¼Œå‰æ–¹æ˜¯æ˜ç¡®çš„ç›®çš„åœ°ï¼Œä½äºç«è½¦å¤´çš„<strong>äº§å“ç»ç†</strong>æå‰è§„åˆ’å¥½ 1ï½2 ä¸ªç‰ˆæœ¬çš„è¿­ä»£ï¼Œå¹¶<strong>æ‹‰åŠ¨ç€å›¢é˜Ÿç«è½¦å¾€å‰è·‘</strong>ã€‚ä½äºä¸­é—´è½¦å¢çš„<strong>å¼€å‘å·¥ç¨‹å¸ˆ</strong>ä»¬è´Ÿè´£æ‹†è§£éœ€æ±‚ï¼Œç¨³å®šè¾“å‡ºè´¨é‡å¹¶æŒ‰æ—¶äº¤ä»˜ï¼Œ<strong>ç¨³ä½ä¸­é—´å¼€å‘é˜¶æ®µ</strong>ã€‚è€Œåœ¨å°¾èŠ‚è½¦å¢çš„æ˜¯<strong>æµ‹è¯•å·¥ç¨‹å¸ˆ</strong>ä¸€æ–¹é¢éœ€è¦å¯¹äºäº¤ä»˜ç»“æœè¿›è¡Œæ£€æµ‹ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿéœ€è¦ç´§æŠ“æ—¶é—´èŠ‚ç‚¹ã€ç»„ç»‡è¿­ä»£å¤ç›˜ä»è€Œ<strong>æ¨ç€å›¢é˜Ÿå¾€å‰è·‘</strong>ã€‚ç”±æ­¤ï¼Œåœ¨æ•æ·å¼€å‘çš„å›¢é˜Ÿåä½œæ–¹å¼ä¸­ï¼Œç”±äº§å“ã€å¼€å‘ã€æµ‹è¯•æ‰€ç»„æˆçš„ 3 è¦ç´ ç«è½¦æ‰èƒ½å¹³ç¨³è¿è¡Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cc00a5204174d6bb06e1138f7f898dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=ZgMfIq5%2FDn1VGWQbr31lLggeX2A%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>æ²¡æœ‰å®Œç¾çš„å›¢é˜Ÿå’Œäº§ç ”å¼€å‘æ–¹å¼ï¼Œæ‰€ä»¥æœ€å¥½çš„æ–¹å¼æ˜¯è®©è¿™æ¶ç«è½¦å…ˆæŒ‰ç‰ˆæœ¬è·‘èµ·æ¥ï¼Œå†åœ¨æ¯ä¸ªç‰ˆæœ¬ä¸­è¿›è¡Œæ›´æ–°è¿­ä»£ï¼Œæ¯æ¬¡å‘ç°ä¸€ä¸ªé—®é¢˜å¹¶è§£å†³ï¼Œé‚£ä¹ˆç»è¿‡å¤šä¸ªç‰ˆæœ¬åï¼Œå¯èƒ½ä¸æ–­ä¼šæœ‰æ–°çš„é—®é¢˜äº§ç”Ÿï¼Œä½†æ•´ä¸ªç«è½¦ä¼šæŒç»­å¾€å‰è·‘ï¼Œå¹¶ä¸”è¶Šå‘ç¨³å®šã€‚</p>
</blockquote>
<p>å¦‚æœè¦è¯´äº§å“ç»ç†æœ€é‡è¦çš„è½¯æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Œå¯èƒ½æ ‡å‡†å›ç­”æœ‰æŠ½è±¡èƒ½åŠ›ã€åŒç†å¿ƒã€Owneræ€ç»´ç­‰ç­‰ï¼Œä½†ç°åœ¨æˆ‘çš„å›ç­”æ˜¯<strong>Balanceï¼ˆå¹³è¡¡ï¼‰</strong>ã€‚åœ¨å¤šè§’è‰²ååŒçš„å·¥ä½œä¸­ï¼Œé™¤äº†æœ¬èº«äº§ç ”å†…éƒ¨çš„äº§å“éœ€æ±‚ä¸å¼€å‘æ’æœŸä¹‹é—´çš„ Gap å¤–ï¼Œè¿˜æœ‰å¯¹äºä¸šåŠ¡éƒ¨é—¨ä¸ºå¼€å±•ä¸šåŠ¡è€Œäº§ç”Ÿçš„è¯‰æ±‚ä¸äº§ç ”å¼€å‘äº¤ä»˜çš„ç‰ˆæœ¬ä¹‹é—´çš„ Gapã€ä¸åŒä¸šåŠ¡éƒ¨é—¨ä¹‹é—´çš„ç†è§£å’Œä¿¡æ¯åŒæ­¥çš„Gapã€è‡ªèº«æ‰€åœ¨çš„äº§ç ”å›¢é˜Ÿä¸å…¶ä»–å¼€å‘å›¢é˜Ÿä¹‹é—´çš„Gap.....ä¸€ç³»åˆ—çš„ Gapï¼Œéƒ½éœ€è¦ä¸­é—´çš„è¡”æ¥è€…ï¼Œæˆ–è€…é¡¹ç›®çš„å‘èµ·è€…å»æ¨åŠ¨ã€‚</p>
<p>å¤šäººååŒçš„ Gap æ˜¯æ— æ³•è¢«è§£å†³çš„ï¼Œåªèƒ½è¢«<strong>ç®¡ç†å’Œå¼•å¯¼</strong>ï¼Œæ¯”å¦‚é€šè¿‡ RICE æ¡†æ¶ç­‰æ–¹å¼å¯¹éœ€æ±‚ä¼˜åŒ–çº§è¿›è¡Œé‡åŒ–å¹¶ç®¡ç†é¢„æœŸï¼Œé€šè¿‡å¯è§†åŒ–é¢æ¿è¿›è¡Œä¿¡æ¯åŒæ­¥å’Œé£ä¹¦ç­‰æ¶ˆæ¯æœºåˆ¶è¿›è¡Œæœ‰æ•ˆé€šçŸ¥æ¥å‡å°‘æ¶ˆæ¯ä¼ é€’çš„å¤±çœŸï¼Œé€šè¿‡äº§ç ”éœ€æ±‚çš„é¢„å…ˆæ–¹æ¡ˆæŠ€æœ¯è¯„ä¼°ä¸äº§å“ Demo çš„å¿«é€Ÿæ¼”ç¤ºæ¥æé«˜æ²Ÿé€šçš„æ•ˆç‡å’Œæ¨¡å¼çš„å¿«é€Ÿæ¨¡æ‹ŸéªŒè¯ï¼Œé€šè¿‡ç®€çŸ­ä¸”æ˜ç¡®çš„ä¼šè®®æ‹‰é€šå…±è¯†å’Œå¯¹é½èŠ‚å¥....æ‰€æœ‰çš„æ–¹å¼å’Œæ‰‹æ®µï¼Œéƒ½æ˜¯ä¸ºäº†è®©Gap å¯æ§ï¼Œåœ¨é•¿æœŸåˆä½œä¸­ç£¨åˆå‡ºäººä¸äººä¹‹é—´ã€ç³»ç»Ÿä¸ç³»ç»Ÿä¹‹é—´çš„èŠ‚å¥ï¼Œè¿™ä¾¿æ˜¯Balanceã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb8c1fcf784944b19ca0f26d733d9c8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=v9Mz%2BWDu9f2BvhIbVN4VFCSmEfU%3D" alt="" loading="lazy"/></p>
<p>æœ€æ—© 18 å¹´ç¬¬ä¸€æ¬¡è¸å…¥äº§å“ç»ç†å²—ä½ï¼Œä¸€æ™ƒ 7ã€8 å¹´è¿‡å»äº†ï¼Œä»ä¼ä¸šå›¢é¤ï¼Œåˆ°æœè£…æ–°é›¶å”®ï¼Œåˆ°æµ·å¤–æ—…æ¸¸ï¼ˆç”¨è½¦ï¼‰ï¼Œå›å¤´çœ‹ä¸€è·¯éƒ½åœ¨ToB é¢†åŸŸå›´ç»•ç€ã€Œ<strong>è¡£é£Ÿä½è¡Œ</strong>ã€è¿›é˜¶å’Œæ¢ç´¢ã€‚æœ€æ—©è®¾è®¡å•ä¸€çš„åŠŸèƒ½æ¨¡å—ï¼Œåˆ°å¤šä¸ªæ¨¡å—ä¹‹é—´è®¾è®¡å·¥ä½œæµç¨‹ï¼Œåˆ°åæ¥ä» 0 åˆ° 1 è®¾è®¡æ•´ä¸ªç³»ç»Ÿã€å¤šä¸ªç³»ç»Ÿï¼Œåˆ°ç°åœ¨ä¸ºéµå¾ª<strong>ç¬¬ä¸€æ€§åŸç†</strong>ç®¡ç†å›¢é˜Ÿæ”¯æ’‘ä¸šåŠ¡ï¼Œä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œä½†ä¸€åˆ‡éƒ½æ²¡é‚£ä¹ˆé¡ºç•…ã€‚</p>
<p>èŒåœºæœ‰æ—¶å€™çœŸçš„å¾ˆå¥‡æ€ªï¼Œä½ å¾—è¦æœ‰è¶…å‡ºä¸­é«˜çº§äº§å“çš„èƒ½åŠ›å’ŒæŠ€èƒ½ã€ç»éªŒã€èƒŒä¹¦ï¼Œæ‰èƒ½å»åº”è˜ä¸­é«˜çº§äº§å“ï¼Œè€Œä¸æ˜¯åƒæ¸¸æˆä¸€æ ·å‡çº§æ‰“æ€ªç§¯ç´¯åˆ°ä¸€å®šæ°´å¹³å°±è‡ªåŠ¨å‡çº§ï¼Œè€Œä¸”è¿™å…¶ä¸­åˆ°åº•éœ€è¦å…·å¤‡ä»€ä¹ˆæ˜ç¡®çš„æ¡ä»¶ä¹Ÿç¼ºå°‘èƒ½å¤Ÿæ˜ç¡®é‡åŒ–çš„æŒ‡æ ‡ã€‚</p>
<p>æˆ‘çš„æµ…è§æ˜¯ï¼š<strong>èƒ½ä¸èƒ½åšã€å¦‚ä½•åš</strong>æ˜¯ç¬¬ 1 æ­¥ï¼Œè¿™è€ƒå¯Ÿçš„æ˜¯å€ŸåŠ©æ–¹æ³•è®ºå’Œè½¯ç¡¬æŠ€èƒ½æ¥æ‰§è¡Œå’Œè¾¾æˆæ—¢å®šç»“æœã€‚<strong>å¦‚ä½•ç§‘å­¦è¯„ä¼°ï¼Œå¦‚ä½•åšå¥½ï¼Œåœ¨ç°æœ‰èµ„æºåšå‡ºåˆé€‚çš„æµç¨‹æˆ–äº§å“è®¾è®¡</strong>ï¼Œè¿™è€ƒå¯Ÿçš„æ˜¯å¯¹å¤æ‚äº‹ç‰©çš„è§£æ„å’Œæ¨åŠ¨ï¼Œå¯¹ç»“æœè´Ÿè´£ï¼Œè¿™æ˜¯ç¬¬ 2 é˜¶æ®µã€‚</p>
<p><strong>èƒ½ä¸èƒ½æŒç»­ç¨³å®šåœ°åˆ›é€ ä»·å€¼ï¼Œåœ¨ä¸ç¡®å®šæ€§çš„ç³»ç»Ÿä¸­åšå‡ºå†³ç­–ä»è€Œä¸æ–­é è¿‘ç›®æ ‡</strong>ï¼Œè¿™è€ƒå¯Ÿçš„æ˜¯å¯¹äºäºº-äº‹-èµ„æºçš„æ·±å…¥æ€è€ƒã€‚</p>
<p>åœ¨è¿™ä¸ªå¤§çš„æ–¹å‘ä¸‹ï¼Œå®šä¹‰éœ€è¦è¢«ç®¡ç†çš„ç›®æ ‡ã€æ‰¿æ‹…è´£ä»»è¿›è¡Œå†³ç­–ã€æ„å»ºç§‘å­¦çš„äº§å“è¿è½¬çš„å·¥ä½œæµç¨‹ã€æ ¹æ®å•†ä¸šæ¨¡å¼å’Œä¸šåŠ¡å¼€å±•çš„ä¸åŒé˜¶æ®µæ„å»ºå¯å‡çº§çš„äº§å“å½¢æ€ï¼Œä»è€Œåˆ›é€ <strong>å¯æŒç»­</strong>çš„ä»·å€¼ï¼Œæˆ‘è®¤ä¸ºè¿™æ‰æ˜¯ç¬¬ 3 é˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3ce6be2f1384e158e81e3bdeed57dc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=84FqmcWO8k2jPA82U%2B7QH%2BkkR9A%3D" alt="" loading="lazy"/></p>
<p>æ¯æ¬¡åœä¸‹æ¥çš„æ—¶å€™ï¼Œæˆ‘éƒ½ä¼šæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šäº§å“ã€æŠ€æœ¯ï¼Œæˆ‘åˆ°åº•é€‚åˆå“ªä¸€ä¸ªæ–¹å‘ï¼Ÿæ¯ä¸€æ¬¡æˆ‘éƒ½é€‰æ‹©äº†äº§å“è¿™æ¡è·¯ï¼ŒçœŸçš„å¥½å¥‡æ€ªï¼Œæˆ‘çš„åº•æ°”åˆ°åº•åœ¨å“ªï¼Ÿä¹Ÿè®¸æ˜¯å½“åˆ 8 å¹´å¤šä»¥å‰åœ¨æ€ç»´å¯¼å›¾ä¸Š<strong>è§£æ„è‡ªæˆ‘</strong>çš„æ—¶å€™å‘ç°è´´åˆ‡è¿™ä¸ªå²—ä½ï¼Œä¹Ÿæˆ–è®¸æ˜¯åœ¨è¿™ä¸ªå²—ä½å’ŒèŒä¸šç”Ÿæ¶¯ä¸­æ€»æ˜¯èƒ½æ‰¾åˆ°<strong>æ¿€åŠ±</strong>æˆ‘å‰è¿›å’Œå­¦ä¹ çš„åœ°æ–¹ï¼Œåˆæˆ–è®¸æ˜¯åº•å­é‡Œæˆ‘æƒ³åšå‡ºä¸€äº›æˆå°±æ¥<strong>å®ç°è‡ªæˆ‘ä»·å€¼</strong>çš„å‡åï¼Œè€Œäº§å“ç»ç†æ˜¯æœ€æ¥è¿‘çš„æœ€ä¼˜é€‰æ‹©ã€‚</p>
<p>éƒ½æˆ–è®¸å§ï¼Œåœ¨æŠ€æœ¯èƒ½åŠ›ã€AI çš„åŠ æŒä¸‹ï¼Œæ²¡å‡†æˆ‘èƒ½æ›´é è¿‘æƒ³è¦çš„ç›®æ ‡ï¼Œå»å‘ç°æˆ‘å¿ƒåº•é‡ŒçœŸæ­£æƒ³åšçš„äº‹æƒ…ã€‚</p>
<h3 data-id="heading-5">æˆ‘&amp; TA</h3>
<p>è¿™æ˜¯æˆ‘åœ¨ 25 å¹´æŒºæ•æ„Ÿçš„ä¸€ä¸ªè¯é¢˜ï¼Œä¸€æ®µè¯æ¦‚è¿°ä¾¿æ˜¯ï¼š<strong>å’Œè°ˆäº† 5 å¹´çš„å‰å¯¹è±¡åœ¨å¹´ä¸­åˆ†å¼€äº†ï¼Œé‡è§äº†ä¸€äº›å¾ˆå¥½çš„æ–°æœ‹å‹ï¼Œæ‹¥æœ‰äº†ç°åœ¨çš„å¥¹ã€‚</strong></p>
<p>åˆ†å¼€æ˜¯åœ¨ 25 å¹´ 5 æœˆä»½ï¼Œå¥¹ 5.1 ä»äº‘å—å›æ¥ï¼Œå¾ˆè®¤çœŸå’Œæˆ‘è¯´æˆ‘ä»¬åˆ†å¼€å§ï¼Œéšåå’Œå¹³åˆ†æ‰‹ã€é€€å®¶åº­ç¾¤ã€æ¬å®¶ï¼Œåˆ°åé¢æ–­äº†è”ç³»å†ä¹Ÿä¸è§ã€‚æˆ‘èº«è¾¹æ‰€æœ‰çš„æœ‹å‹ã€å®¶äººéƒ½å¾ˆä¸ç†è§£ï¼Œä¹Ÿå¾ˆéš¾æ¥å—ï¼Œä¸ºä»€ä¹ˆä¸¤äººå°±è¿™ä¹ˆåˆ†å¼€äº†ï¼Ÿä½†å¯èƒ½åªæœ‰æˆ‘ä»¬æ‰çŸ¥é“ï¼Œæˆ‘ä»¬å·²ç»æ— æ³•ä¸€èµ·é¢å¯¹æœªæ¥äº†ã€‚æˆ‘ä»¬çš„æœŸå¾…ä¸åŒï¼Œæˆ‘ä»¬æƒ³è¦çš„æœªæ¥é€æ¸æ¸…æ™°ï¼Œåªæ˜¯åœ¨é‚£ä¸ªæœªæ¥é‡Œï¼Œä¸å†éœ€è¦å¯¹æ–¹äº†ã€‚</p>
<blockquote>
<p>äººç”Ÿæ— å¸¸ï¼Œå¤§è‚ åŒ…å°è‚ ã€‚</p>
</blockquote>
<p>ä¸è‰¯ä¹ æƒ¯ï¼ˆæ¯”å¦‚å¸çƒŸï¼‰ä¸æ˜¯é—®é¢˜å…³é”®ï¼Œè¯´å¥½äº†æˆ’çƒŸå´åšä¸åˆ°çš„å¤±ä¿¡ï¼Œæ‰æ˜¯ä¿¡ä»»æ„Ÿæµå¤±ã€ä¸¤äººå¼€å§‹æ¸è¡Œæ¸è¿œçš„æœ¬è´¨ï¼›å·¥ä½œç”Ÿæ´»çš„ç„¦è™‘ä¹Ÿä¸æ˜¯åŒæ–¹æ²Ÿé€šçš„é˜»ç¢ï¼Œè€Œæ˜¯å®æ„¿ä¸€ä¸ªäººé€ƒé¿ï¼Œä¹Ÿä¸æ„¿å’Œå¯¹æ–¹è¯‰è¯´çš„å°é—­ï¼Œæ…¢æ…¢å°†ä¸¤äººçš„è¾¹ç•Œç”»å¾—è¶Šå‘æ¸…æ™°ï¼›çºªå¿µæ—¥ç­‰é‡è¦æ—¶åˆ»çš„ç¼ºå¸­ä¹Ÿä¸æ˜¯æ„Ÿæƒ…å´©å¡Œçš„ä¸»è¦åŸå› ï¼Œä¸€æ¬¡æ¬¡å§”å±ˆç¬é—´çš„æ•…æ„æ— è§†ï¼Œæ¶ˆè€—äº†ä»…å­˜çš„æ¸©æƒ…ï¼Œæœ€åæ‰æ˜¯ï¼Œå¤±æœ›ï¼Œç¦»å¼€ã€‚</p>
<p>æˆ‘ç»å¸¸å’Œåˆ«äººè¯´ï¼š</p>
<blockquote>
<p>ä¸¤ä¸ªäººåœ¨ä¸€èµ·çš„å‰æï¼Œæ˜¯æœ¬æ¥ä¸€ä¸ªäººå°±è¿‡å¾—å¾ˆå¥½ï¼Œå› ä¸ºä¸¤ä¸ªäººåœ¨ä¸€èµ·èƒ½è¿‡å¾—æ›´å¥½ï¼Œæ‰€ä»¥æ‰åœ¨ä¸€èµ·ã€‚å¦‚æœæ²¡æœ‰åŠæ³•ç»™å¯¹æ–¹å¹¸ç¦ï¼Œå°±ä¸è¦é˜»æŒ¡å¯¹æ–¹è¿½æ±‚å¹¸ç¦çš„æƒåˆ©ã€‚</p>
</blockquote>
<p>å¦‚ä»Šï¼Œè¿™ä¸€ç‚¹åˆ‡åˆ‡å®å®ä½“ç°åœ¨äº†æˆ‘èº«ä¸Šã€‚</p>
<blockquote>
<p>æ„Ÿè°¢ä½ é™ªæˆ‘èµ°è¿‡çš„è¿™ä¸€æ®µè·¯ï¼Œç¥ä½ å¾€åå¹¸ç¦ï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆäº‹ä»ç„¶æœ‰å‹‡æ°”å»è¿½å¯»ä½ æƒ³è¦çš„ç”Ÿæ´»ï¼Œè°¢è°¢ä½ ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65527b3bd5d94c19aedff274f28be9cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=151VCkI8NwRFgsczayJof3viap8%3D" alt="" loading="lazy"/></p>
<p>ä½ è¯´åœ¨å¶ç„¶é—´é‡åˆ°ä¸€ä¸ªäººï¼Œç„¶åä¸€èµ·å»çœ‹ç”µå½±ï¼Œæœ€åæˆä¸ºå¾ˆå¥½çš„æœ‹å‹ï¼Œè¿™æ¦‚ç‡æœ‰å¤šå¤§ï¼Ÿæˆ‘æƒ³ä¸åˆ° 1/1000 å§ã€‚</p>
<p>åœ¨ 7ã€8 æœˆæœ‰äº›æ¶ˆæ²‰çš„é‚£æ®µæ—¶é—´ï¼Œæˆ‘ä¸€ä¸ªäººåœ¨æ–°å¼€çš„æ¸¸æˆå…ç© Switch æ¸¸æˆï¼ˆæ˜Ÿä¹‹å¡æ¯”ï¼‰ï¼Œçªç„¶æœ‰ä¸ªäººèµ°è¿‡æ¥ï¼Œç„¶åæˆ‘é¬¼ä½¿ç¥å·®åœ°é—®ï¼šè¦ä¸€èµ·ç©ä¸ï¼Ÿç„¶åä»–ä¼¸å‡ºäº†æ‰‹ï¼Œæˆ‘ä¿©æ¡äº†æ¡æ‰‹æ­£å¼è®¤è¯†ï¼Œåé¢è¿™ä¸ªäººè¯´ä¸Šé¢ç”µå½±é™¢åœ¨æ”¾ã€Š<strong>å°ç‹å­</strong>ã€‹çš„é‡æ˜ è¦ä¸è¦å»çœ‹ï¼Œæˆ‘ä¹Ÿåˆšå¥½ç©ºé—²å°±ä¸€èµ·å»äº†ï¼Œåˆ°åé¢ç›¸å¤„å¤šäº†ï¼ŒèŠçš„è¶Šæ¥è¶Šå¤šï¼Œæˆä¸ºäº†å¾ˆå¥½çš„æœ‹å‹ã€‚</p>
<p>å¥½å¥‡æ€ªï¼Œå°±è¿™ä¹ˆç¥ç»åœ°è®¤è¯†äº†è€åº„è¿™ä¹ˆä¸ªæœ‹å‹ï¼Œå¾ˆå¯æƒœè¿™å®¶ä¼™ä¸æ˜¯ä¸ªå¥³çš„ï¼ŒMDã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1e59bc785f24a2a9a3a1f635dcbaf31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=mSRHUKAamAQ7gxt%2FzRZvppVJDio%3D" alt="" loading="lazy"/></p>
<p>è€åº„å’Œæˆ‘è™½ç„¶æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œä½†æ€§æ ¼å®Œå…¨ç›¸åï¼Œæ€ç»´æ€»æ˜¯è·³è·ƒåˆ°ä¸è¡Œï¼Œçœ‹åˆ°æˆ‘æ€‚æ€‚çš„æ€»æ˜¯æƒ³æ€‚æ¿æˆ‘å»åšä¸€äº›â€œç ´ç•Œâ€çš„äº‹æƒ…ï¼Œæ¯”å¦‚ä¸€èµ·ååœ¨ç‰ŒåŠçš„å°é˜¶ä¸Šå–ç€æŸ æª¬èŒ¶å…‰æ˜æ­£å¤§çœ‹ç¾å¥³ï¼ˆä»¥å‰æˆ‘éƒ½æ˜¯å·å·ç„ä¸€ä¸‹ï¼‰ï¼Œæ¯”å¦‚å¸¦æˆ‘å»é…’å§å–é…’ç‚¹é™ªèŠï¼ˆå°±ç»å†è¿‡é‚£ä¹ˆä¸€æ¬¡ï¼Œæˆ‘æ€‚åˆ°ä¸è¡Œï¼Œè£…å¾—è´¼æ­£ç»ï¼‰ï¼Œè¿˜æœ‰æ€‚æ¿æˆ‘å»è¿½å–œæ¬¢çš„å¥³å­©å­ï¼ˆåé¢æˆ‘è¿˜è¿½æˆäº†ï¼Œåœ¨æ­¤è°¢è¿‡ä¹‰çˆ¶ï¼‰....</p>
<blockquote>
<p>â€œä½ å¥½ä¸å®¹æ˜“é€‰æ‹©èµ°å‡ºæ¥ï¼Œè¿˜æƒ³ç€è¿‡å»ï¼Ÿä½ éƒ½å¼€å§‹æœ‰æ–°çš„ç”Ÿæ´»ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é™·åˆ°è¿‡å»çš„æƒ…ç»ªï¼Œä½ åœ¨å®³æ€•ä»€ä¹ˆï¼Ÿâ€</p>
</blockquote>
<blockquote>
<p>â€œå…„å¼Ÿå°±æ˜¯è¿™æ ·çš„ï¼Œå¼€å¿ƒä¹Ÿè¦åˆ†äº«ï¼Œä¸å¼€å¿ƒä¹Ÿè¦åˆ†äº«ï¼Œæœ‰æ—¶å€™åˆ«ä¸€ä¸ªäººæƒ³äº‹æƒ…ï¼Œå¤šå‡ºæ¥èµ°èµ°ã€‚â€</p>
</blockquote>
<blockquote>
<p>â€œä½ æ²¡æœ‰åŠæ³•è®¨å¥½æ‰€æœ‰äººï¼Œä½ éœ€è¦åšçš„æ˜¯è®¨å¥½è‡ªå·±ã€‚â€</p>
</blockquote>
<blockquote>
<p>â€œå› ä¸ºåŒé¢‘ï¼Œæ‰€ä»¥å…±æŒ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èµ·è¡Œï¼Œä¹Ÿä¸€å®šè¡Œã€‚â€</p>
</blockquote>
<p>ä»åˆšå¼€å§‹èŠå¤©è€åº„æ•´å¤©åƒå¿ƒç†åŒ»ç”Ÿé‚£æ ·å‰–ææˆ‘çš„å¿ƒç†çŠ¶æ€ï¼Œæ‹‰ç€æˆ‘ä»æ³¥æ½­èµ°äº†å‡ºæ¥ï¼Œåˆ°ç°åœ¨éš”ä¸‰å·®äº”æˆ‘ä¼šå»æ‰¾ä»–çé€¼é€¼ï¼Œè€åº„è¿™å®¶ä¼™çœŸæ˜¯ä¸ªå¾ˆå¥½çš„äººï¼ŒæŒºåº†å¹¸é‡åˆ°ä¸ªè¿™æ ·ä¸ªæœ‹å‹ï¼Œæ•¬å…„å¼Ÿä¸€æ¯ï½</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45d37b1b21a94c04a5803b49f30a9073~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=pmneoQG%2Bzjympa7qq%2FbGee%2FVeLA%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ¥ä»¥ä¸ºè‡ªå·±å°±ä¼šè¿™æ ·å•ç€ä¸€ç›´åˆ° 26 å¹´ç”šè‡³æ›´ä¹…ï¼Œæ²¡æƒ³åˆ°é‡åˆ°äº†<strong>ä¹–å®</strong>ã€‚</p>
<p>è®¸æ˜¯æˆ‘å¤±çœ æŠ‘éƒé‚£æ®µæ—¶é—´é€æ¥çš„ç»´ç”Ÿç´  B6ï¼Œè®¸æ˜¯é‚£åµåµé—¹é—¹çš„æ€§æ ¼å«é†’äº†èº²åœ¨è§’åº¦æš—è‡ªç¥ä¼¤çš„æˆ‘ï¼Œè®¸æ˜¯ä¸€æ¬¡æ¬¡çš„èŠå¤©è®©æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªçœŸå®ä¸”ä¸ä¸€æ ·çš„å¥³å­©å­ï¼Œè®¸æ˜¯åˆæ¬¡è§é¢æ—¶çš„è‡ªç„¶è€Œç„¶çš„ç›¸å¤„ã€ç‰µæ‰‹ï¼Œè®¸æ˜¯ä¸ç»æ„é—´è§‰å¯Ÿåˆ°é‚£ç™½é›ªèˆ¬çš„çš®è‚¤åœ¨é˜³å…‰ä¸‹æ™¶è¹é€äº®ï¼Œè®¸æ˜¯ 11 æœˆæµé˜³å¤œæ™šçš„çƒŸèŠ±å¤ªè¿‡äºæ¢¦å¹»ï¼Œè®¸æ˜¯ä¸€æ¬¡æ¬¡çš„ä»æ·±åœ³åˆ°åŒ—äº¬è·¨è¶Š 1500 å…¬é‡Œçš„è¿½å¯».....</p>
<p>è¿™ä¸€åˆ‡å‘ç”Ÿéƒ½å¤ªè¿‡äºçªç„¶ï¼Œçªç„¶åˆ°æ¯æ¬¡æƒ³åˆ°æˆ‘å’Œ<strong>ä¹–å®</strong>åœ¨ä¸€èµ·è¿™ä»¶äº‹éƒ½æœ‰äº›ä¸çœŸå®ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe395e7715d4de1922d50889627d146~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paH5aaC56eL6Zuo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903769&amp;x-signature=lR4Fwz5wgdOJX%2FY0vlr717SWtZQ%3D" alt="" loading="lazy"/></p>
<p>çˆ±æƒ…ï¼Œå¯¹è¿™ä¸ªæ—¶ä»£æ¥è¯´çœŸçš„å¾ˆå¥¢ä¾ˆï¼Œæˆ‘ä»¬æƒ³è¦çš„ä¸œè¥¿å¤ªå¤šå¤ªå¤šï¼Œå°±å¯¼è‡´å¾ˆå¤šä¸œè¥¿å°±å˜å¾—æ²¡é‚£ä¹ˆçº¯ç²¹äº†ï¼Œäºæ˜¯æˆ‘ä»¬ä¸æ•¢èµ°å‡ºèˆ’é€‚åœˆï¼Œä¸æ•¢å»ç›¸ä¿¡äººï¼Œä¸æ•¢å»æ¥è§¦æ–°çš„äº‹ç‰©ã€‚è€Œå½“æˆ‘ä»¬çœŸçš„æ‰“ç ´äº†å›ºæœ‰çš„æ€ç»´å’Œå°é—­åœˆæ—¶ï¼Œä¼šå‘ç°å¤–é¢å¹¶æ²¡æœ‰åˆ«äººï¼Œéƒ½æ˜¯è‡ªæˆ‘çš„è®¾é™å’Œæƒ³è±¡ç½¢äº†ã€‚</p>
<p>æˆ‘ä¸çŸ¥é“ä»¥åä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œä½†æˆ‘æƒ³å’Œä¹–å®ä¸€èµ·å°è¯•ä¸€èµ·é¢å¯¹ï¼Œå°½ç®¡æˆ‘æœ‰å¾ˆå¤šä¸è¶³ï¼Œä¹Ÿæ²¡å•¥åº•æ°”ï¼Œä½†æˆ‘æƒ³è¯•è¯•ï¼Œå»ä½“éªŒä¸‹ä¸ä¸€æ ·çš„äº‹ç‰©ï¼Œå»çœ‹ä¸€çœ‹æˆ‘æœªæ›¾çœ‹è¿‡çš„ä¸–ç•Œã€‚</p>
<h2 data-id="heading-6">2026ï¼Œæ–°çš„æœŸç›¼</h2>
<p>æ–°çš„ä¸€å¹´æ–°çš„å¼€å§‹ï¼Œä» 1 æœˆå¼€å§‹å°±é‡åˆ°äº†å¥½å¤šäº‹æƒ…ï¼Œä½†å¯¹å¥½å¤šäº‹æƒ…éƒ½æä¸èµ·å¤ªé«˜çš„å…´è¶£ï¼Œä¹Ÿè®¸æ˜¯è¿˜æ²¡æœ‰æ•´ç†å¥½è‡ªå·±ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡å¹´ç»ˆæ€»ç»“ï¼Œæˆ‘æƒ³å…ˆæ•´ç†å¥½è‡ªå·±ï¼Œå†å»åšå¥½æ–°ä¸€å¹´çš„è§„åˆ’ã€‚</p>
<p>2026 å¹´ï¼Œæˆ‘ 30 å²äº†ï¼Œå¤–è¡¨çœ‹èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹æ²¡é•¿å¤§çš„æ ·å­ï¼Œè¯´ä¸ä¸Šæˆç†Ÿï¼Œä¹Ÿè°ˆä¸ä¸ŠæˆåŠŸã€‚æ‰€å¹¸çš„æ˜¯ï¼Œæ²¡æœ‰å‘ç¦ï¼Œæ²¡æœ‰ç§ƒé¡¶ï¼Œæ²¡æœ‰å •è½èººå¹³ï¼Œä»ç„¶å¯¹<strong>çˆ±æƒ…ã€ç”Ÿæ´»ã€å·¥ä½œã€å­¦å†</strong>æœ‰æ‰€æ†§æ†¬ï¼Œæ‰€ä»¥ä¸æ–­å­¦ä¹ å’ŒåŠªåŠ›ç€ã€‚</p>
<p>å¾ˆå¹¸è¿ï¼Œé‡åˆ°äº†åˆé€‚çš„<strong>å¥¹</strong>ï¼Œå¸Œæœ›åœ¨è¿™ä¸€å¹´ä¸­èƒ½å¤Ÿå¼€å¿ƒç›¸å¤„å¹¶èµ°å‘å©šå§»ï¼Œæˆ‘ä»ç„¶å¯¹äºå©šå§»å……æ»¡ç€æœŸå¾…ã€‚</p>
<p>è¿‡å¾€æˆ‘æ‰€æ‹¥æœ‰çš„æŠ€èƒ½å’ŒçŸ¥è¯†ï¼Œ<strong>iOSã€é¸¿è’™ã€AI Coding</strong>ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå°†ä¸‰è€…ç»“åˆèµ·æ¥ï¼Œä¸å†åœ¨ 3 ä¸ªé¢†åŸŸåˆ†åˆ«é’»ç ”ï¼Œè€Œæ˜¯æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å…¥å£ï¼Œæ¯”å¦‚å°çº¢ä¹¦ã€B ç«™ã€å›¾ä¹¦å‡ºç‰ˆç­‰ï¼Œæ¥åšçŸ¥è¯†å‚¨å¤‡å’Œå†…å®¹è¾“å‡ºï¼Œå¸Œæœ›åœ¨ä¸æ–­å‘å±•çš„ AI æ—¶ä»£ä¸­æ‰¾åˆ°å±äºè‡ªå·±å®šä½ã€‚</p>
<p>å·¥ä½œå¯èƒ½ä¹Ÿä¸ç€æ€¥å…ˆï¼Œè¿‡å¾€ç€æ€¥å·¥ä½œäº† 8 å¹´ï¼Œä¸‹ä¸€ä¸ªèŒåœºæˆ–è€…è¯´ä¸‹ä¸€ä¸ªèµ›é“ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µçœŸçš„è¦å¥½å¥½æƒ³æƒ³ã€‚ä»€ä¹ˆè¡Œä¸šã€ä»€ä¹ˆé¢†åŸŸã€ä»€ä¹ˆå²—ä½ã€åšä»€ä¹ˆäº‹æƒ…ã€è¾¾æˆä»€ä¹ˆç›®æ ‡ã€æƒ³è¦è¾¾æˆä»€ä¹ˆæˆå°±ï¼Œè¿™äº›éƒ½éœ€è¦é™ä¸‹æ¥å¥½å¥½æƒ³æƒ³ã€‚æ²¡å‡†è¿™æ˜¯æˆ‘èŒåœºçš„æœ€åä¸€ä»½å·¥ä½œï¼Œ<strong>é€‰æ‹©å¤§äºåŠªåŠ›</strong>çš„é“ç†è¿˜æ˜¯æ·±åˆ»äº†è§£çš„ã€‚</p>
<p>å­¦å†è¿™å—ä¸€ç›´æ˜¯æˆ‘çš„çŸ­æ¿ï¼Œå»å¹´æ€»ç®—é€šè¿‡äº†æ‰€æœ‰çš„ç†è®ºè¯¾ï¼Œä»Šå¹´å°±å·® 1 é—¨å®è·µè¯¾ã€æ¯•ä¸šè®ºæ–‡ã€å­¦ä½è‹±è¯­ã€‚è‡ªè€ƒæœ¬ç§‘è€ƒå®Œåå°±è¦å‡†å¤‡<strong>è€ƒç ”</strong>äº†ï¼Œå¯¹äºä¸€ä»¶äº‹æƒ…ç¥›é­…çš„æœ€å¥½æ–¹æ³•ï¼Œå°±æ˜¯æ‹¥æœ‰å®ƒã€‚</p>
<p>æ„Ÿè§‰è¦æ±‚å¥½åƒæœ‰ç‚¹å¤šï¼Œæ…¢æ…¢æ¥å‘—ï½</p>
<h2 data-id="heading-7">å°¾è¨€</h2>
<p>5 å¹´å‰ï¼Œæˆ‘åº”è¯¥æƒ³ä¸åˆ°ç°åœ¨çš„æˆ‘ä¼šç»å†é‚£ä¹ˆå¤šï¼Œæ‹¥æœ‰é‚£ä¹ˆå¤šï¼Œæ‰€ä»¥ 5 å¹´å‰çš„æˆ‘çš„æœŸæœ›ï¼Œæˆ‘è¾¾æˆäº†å—ï¼Ÿ</p>
<p>å¦‚æœèƒ½å’Œ 5 å¹´å‰çš„æˆ‘è¯´è¯´è¯ï¼Œæˆ‘å¯èƒ½æƒ³è¯´ï¼š</p>
<blockquote>
<p>ä½ ç»å¯¹æƒ³ä¸åˆ°ä½ ç°åœ¨æœ‰å¤šå‰å®³ï¼Œä½ çœŸçš„å¾ˆæ£’ï¼Œä½ çœŸçš„è¶…çº§åŠªåŠ›çš„ï¼Œè¿™ä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ã€‚</p>
</blockquote>
<p>è¿™ä¸ªä¸–ç•Œçš„å˜åŒ–çœŸçš„è¶…å‡ºä½ çš„æƒ³è±¡ï¼Œä½ ä¸çŸ¥é“ AI å‘å±•æœ‰å¤šå¿«ï¼Œä½ ä¸çŸ¥é“è¿™ä¸ªä¸–ç•Œåˆ°å¤„éƒ½åœ¨æ‰“ä»—ï¼Œå°±æˆ‘ä»¬è€æ˜¯å¤–å–å¤§æˆ˜ã€‚ä½ ä¸çŸ¥é“ä½ é‡åˆ°äº†å¾ˆå¤šå¾ˆå¥½çš„äººï¼Œä½ ä¸å†æ˜¯ä¸€ä¸ªäººå»é¢å¯¹è¿™ä¸€åˆ‡ï¼Œä½ å¼€å§‹å˜å¾—æ›´å¥½äº†ã€‚</p>
<p>5 å¹´å‰çš„æˆ‘å•Šï¼Œä½ æ”¾å¿ƒå“ˆï¼Œç°åœ¨çš„æˆ‘è¿‡å¾—å¾ˆå¥½ï¼Œè™½ç„¶æœ‰å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„äº‹æƒ…ï¼Œä½†ä¸€åˆ‡éƒ½è¿˜é¡ºåˆ©ï¼Œè€Œä¸”ä½ è¿˜åœ¨ä¸æ–­è¿›æ­¥å’Œå‘å‰ï¼Œè¿˜æ˜¯ç¬¨ç¬¨åœ°æ¢ç´¢ï¼Œè™½ç„¶èµ°å¾—æœ‰ç‚¹æ…¢ï¼Œä½†èµ°å¾—å¾ˆè¸å®å’Œå¼€å¿ƒï¼Œè¿™ä¸€ç‚¹å¾ˆäº†ä¸èµ·å“’ï¼</p>
<p>æ”¾å¿ƒå§ï¼Œå¾€åçš„è·¯ï¼Œå°±äº¤ç»™æˆ‘ï¼Œæˆ‘ä¼šè¿å¸¦ç€ä½ çš„å¸Œå†€ä¸€èµ·å‰è¡Œï¼Œå»è¿½å¯»å±äºè‡ªå·±çš„å¹¸ç¦ã€‚</p>
<p><strong>æ„¿ä¸€åˆ‡å®‰å¥½ï¼Œæ„¿å½’æ¥ä»æ˜¯å°‘å¹´ï¼Œå…±å‹‰ä¹‹ï½</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[npm 2026å®‰å…¨æ–°è§„ä¸‹çš„å…ç™»å½•å‘åŒ…ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7594678044263497728</link>    <guid>https://juejin.cn/post/7594678044263497728</guid>    <pubDate>2026-01-13T10:13:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594678044263497728" data-draft-id="7594678044263464960" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="npm 2026å®‰å…¨æ–°è§„ä¸‹çš„å…ç™»å½•å‘åŒ…ç­–ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-13T10:13:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£åº¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/3368559359562190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            npm 2026å®‰å…¨æ–°è§„ä¸‹çš„å…ç™»å½•å‘åŒ…ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559359562190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£åº¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:13:19.000Z" title="Tue Jan 13 2026 10:13:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™äº›å¤©å¼€æºäº†ä¸€ä¸ªè‡ªå·±å¹³å¸¸ä½¿ç”¨çš„<code>uni-app</code>è·¯ç”±æ¡†æ¶ï¼ˆè¯¦è§<a href="https://juejin.cn/post/7594262760939749410" target="_blank" title="https://juejin.cn/post/7594262760939749410">ç”¨äº†éƒ½è¯´å¥½çš„ uniapp è·¯ç”±æ¡†æ¶</a>ï¼‰ï¼Œåœ¨å‘å¸ƒ npm åŒ…çš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œå»å¹´å†™è¿‡ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7453304066451669011#heading-3" target="_blank" title="https://juejin.cn/post/7453304066451669011#heading-3">ä½¿ç”¨npmå‘å¸ƒè‡ªå·±çš„ç¬¬ä¸€ä¸ªåŒ…</a>ï¼Œå½“æ—¶å‘å¸ƒåŒ…å¼€å¯ 2fa éªŒè¯åé€šè¿‡æŒ‡çº¹éªŒè¯å°±å¯ä»¥äº†ï¼Œä½†æ˜¯åœ¨å‘å¸ƒ caring-route çš„åŒ…æ—¶å‘ç°æ—§æœ‰çš„æ–¹å¼å¤±æ•ˆäº†ï¼Œä½¿ç”¨ npm login æ—¶ä¼šäº§ç”Ÿè¿™ä¸ªæç¤ºï¼Œç„¶åéœ€è¦è¾“å…¥ç”¨æˆ·åã€å¯†ç ï¼Œé‚®ç®±ï¼Œ2fa éªŒè¯ç ï¼Œé¢‡ä¸ºéº»çƒ¦ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">npm notice Security Notice: Classic tokens have been revoked. Granular tokens are now limited <span class="hljs-keyword">to</span> <span class="hljs-number">90</span> days <span class="hljs-built_in">and</span> require <span class="hljs-number">2</span>FA <span class="hljs-keyword">by</span> <span class="hljs-keyword">default</span>. Update your CI/CD workflows <span class="hljs-keyword">to</span> avoid disruption. Learn more https://gh.io/all-npm-classic-tokens-revoked
</code></pre>
<p>ç»“åˆåœ¨ npm å®˜ç½‘çœ‹åˆ°çš„ç½®é¡¶æç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5a10ffb5d2442d8bab9cf6192b7f69f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5bqm5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903999&amp;x-signature=XXdm8VvTiwrg1nZhiQkZoOwWtq8%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ‰çŸ¥é“ï¼Œnpm å®˜æ–¹åœ¨ 2026 å¹´å¼ºåˆ¶æ›´æ–°äº†å®‰å…¨æ”¿ç­–ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ï¼š</p>
<ul>
<li><strong>æ—§çš„ã€Œç»å…¸ä»¤ç‰Œ (Classic tokens)ã€è¢« npm å®˜æ–¹å…¨éƒ¨ä½œåºŸå›æ”¶</strong>ï¼šå³ä¹‹å‰æœ¬åœ°ä¿å­˜çš„ã€ç”¨äºæŒ‡çº¹ / å…å¯†ç™»å½•çš„ä»¤ç‰Œï¼Œç°åœ¨å½»åº•ä¸èƒ½ç”¨äº†ï¼›</li>
<li><strong>npm å¼ºåˆ¶å¯ç”¨ã€Œç»†ç²’åº¦ä»¤ç‰Œ (Granular tokens)ã€</strong>ï¼šè¿™æ˜¯æ–°ç‰ˆçš„å®‰å…¨ä»¤ç‰Œï¼Œæœ‰æ•ˆæœŸ<strong>é»˜è®¤åªæœ‰ 90 å¤©</strong>ï¼Œåˆ°æœŸå°±è¦é‡æ–°ç”Ÿæˆï¼›</li>
<li><strong>å®‰å…¨é—¨æ§›æå‡</strong>ï¼šnpm è¦æ±‚<strong>æ‰€æœ‰å‘å¸ƒåŒ…çš„è´¦å·ï¼Œå¿…é¡»å¼€å¯ ä¸¤æ­¥éªŒè¯ (2FA)</strong> ï¼Œä¸”ç»†ç²’åº¦ä»¤ç‰Œé»˜è®¤å¼ºåˆ¶ç»‘å®š 2FAï¼Œæ²¡æœ‰ä¾‹å¤–ï¼›</li>
<li><strong>ç™»å½•æ–¹å¼å˜æ›´</strong>ï¼šnpm ä¸å†æ”¯æŒã€ŒæŒ‡çº¹æˆæƒ / ä¸€é”®å…å¯†ç™»å½•ã€è¿™ç§ç®€å•æ–¹å¼ï¼Œ<strong>å³ç°åœ¨çš„</strong> <code>npm login</code> <strong>å¿…é¡»è¦ä½¿ç”¨æ–°ç‰ˆä»¤ç‰Œ</strong>ï¼Œå¦åˆ™å¼ºåˆ¶è¾“å…¥è´¦å·å¯†ç æ‰èƒ½ç™»å½•ã€‚</li>
</ul>
<p>é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼Œnpm çš„<strong>ç»†ç²’åº¦ä»¤ç‰Œ (Granular tokens)æ˜¯ä»€ä¹ˆï¼Ÿ</strong> ä¸ºä»€ä¹ˆè¿™ä¸ªä»¤ç‰Œè¦å«ã€Œç»†ç²’åº¦ã€ï¼Œå’Œä¹‹å‰çš„ã€Œç»å…¸ä»¤ç‰Œã€å·®åœ¨å“ªï¼Ÿä¸‹é¢å¬æˆ‘å¨“å¨“é“æ¥ã€‚</p>
<h2 data-id="heading-0"><strong>ç»†ç²’åº¦ä»¤ç‰Œ (Granular tokens)</strong></h2>
<p>æ‰€è°“ã€Œç»†ç²’åº¦ã€=ã€æƒé™å¯ä»¥ç²¾ç»†åŒ–æ§åˆ¶ã€‘ï¼Œè¿™æ˜¯å®ƒçš„æ ¸å¿ƒç‰¹å¾ï¼Œæ˜¯å¯¹æ¯” è¢«ä½œåºŸçš„ã€Œç»å…¸ä»¤ç‰Œ (Classic Token)ã€ æ¥çš„ï¼Œä¸¤è€…æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§ä»¤ç‰Œã€‚ä¸‹é¢æ˜¯ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«ï¼š</p>
<h3 data-id="heading-1">æ—§ç‰ˆï¼šç»å…¸ä»¤ç‰Œ (Classic Token) â€”â€” ä¹‹å‰æŒ‡çº¹ç™»å½•ç”¨çš„ä»¤ç‰Œ</h3>
<ul>
<li>æƒé™ï¼š<strong>ä¸€åˆ€åˆ‡çš„ã€Œè¶…çº§ç®¡ç†å‘˜æƒé™ã€</strong> â†’ æ‹¿åˆ°è¿™ä¸ªä»¤ç‰Œï¼Œèƒ½åš npm è´¦å·çš„ã€Œæ‰€æœ‰æ“ä½œã€ï¼šå‘å¸ƒåŒ…ã€åˆ åŒ…ã€æ”¹è´¦å·ä¿¡æ¯ã€çœ‹æ‰€æœ‰ç§å¯†åŒ…... æƒé™æ— é™å¤§ï¼›</li>
<li>æœ‰æ•ˆæœŸï¼š<strong>æ°¸ä¹…æœ‰æ•ˆ</strong>ï¼Œç”Ÿæˆä¸€æ¬¡èƒ½ç”¨ä¸€è¾ˆå­ï¼Œnpm ä¸ä¸»åŠ¨ä½œåºŸå°±ä¸€ç›´èƒ½ç”¨ï¼›</li>
<li>å®‰å…¨è¦æ±‚ï¼šæ— ä»»ä½•è¦æ±‚ï¼Œä¸ç”¨å¼€ 2FAï¼Œè°éƒ½èƒ½ç”Ÿæˆï¼›</li>
<li>ä¸ºä»€ä¹ˆè¢«ä½œåºŸï¼šæƒé™å¤ªå¤§ + æ°¸ä¹…æœ‰æ•ˆï¼Œä¸€æ—¦æ³„éœ²ï¼Œè´¦å·ç­‰äºå½»åº•è¢«ç›—ï¼Œnpm ç”Ÿæ€è¢«æ¶æ„åŒ…æçš„ä¹ŒçƒŸç˜´æ°”ï¼Œæ‰€ä»¥ npm<strong>å…¨ç½‘å¼ºåˆ¶å›æ”¶æ‰€æœ‰ç»å…¸ä»¤ç‰Œ</strong>ã€‚</li>
</ul>
<h3 data-id="heading-2">æ–°ç‰ˆï¼šç»†ç²’åº¦ä»¤ç‰Œ (Granular Access Token) â€”â€” npm æœ€æ–°æ¨å‡ºçš„</h3>
<ul>
<li>æƒé™ï¼š<strong>å¯ä»¥ã€ŒæŒ‰éœ€å‹¾é€‰ã€ç²¾ç»†åŒ–åˆ†é…ã€</strong> â†’ è¿™å°±æ˜¯ã€Œç»†ç²’åº¦ã€çš„æ ¸å¿ƒå«ä¹‰ã€‚ä½ æƒ³è¦ä»€ä¹ˆæƒé™ï¼Œå°±åªå‹¾é€‰ä»€ä¹ˆæƒé™ï¼Œ<strong>å¤šä¸€åˆ†æƒé™éƒ½ä¸ç»™ã€‚</strong></li>
<li>æœ‰æ•ˆæœŸï¼š<strong>å¼ºåˆ¶ 90 å¤©</strong>ï¼Œnpm æ–°è§„è¦æ±‚ï¼Œæœ€é•¿åªèƒ½ 90 å¤©ï¼Œåˆ°æœŸè‡ªåŠ¨å¤±æ•ˆï¼›</li>
<li>å®‰å…¨è¦æ±‚ï¼šnpmã€Œé»˜è®¤è¦æ±‚ã€å¼€ 2FAï¼Œä½†<strong>ä¸æ˜¯å¼ºåˆ¶</strong>ã€‚</li>
<li>ä¸ºä»€ä¹ˆæ˜¯å®ƒï¼šæƒé™å° + æœ‰æ•ˆæœŸçŸ­ï¼Œå°±ç®—ä»¤ç‰Œæ³„éœ²ï¼Œé£é™©ä¹Ÿæå°ï¼Œ90 å¤©åè‡ªåŠ¨ä½œåºŸï¼Œå®‰å…¨é£é™©å¯æ§ã€‚</li>
</ul>
<p>é‚£ä¹ˆåœ¨äº†è§£äº†<strong>ç»†ç²’åº¦ä»¤ç‰Œåï¼Œ</strong> æˆ‘ä»¬åº”è¯¥æ€ä¹ˆç”¨å…¶æ–°è§„æ¥å‘å¸ƒåŒ…å‘¢ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œå¦‚æœä¸ä½¿ç”¨ä»¤ç‰Œï¼Œé‡‡ç”¨ä¼ ç»Ÿçš„<strong>é»˜è®¤çš„ npm login å‘åŒ…æµç¨‹å¾ˆåäººç±»</strong>ï¼šè¦è¾“ç”¨æˆ·åã€å¯†ç ã€è¾“é‚®ç®±ï¼Œè¿˜è¦è¾“ 2FA ä¸€æ¬¡æ€§éªŒè¯ç ï¼Œå‘å¸ƒä¸ªåŒ…è¦æŠ˜è…¾åŠå¤©ï¼Œå¯¹é«˜é¢‘å‘å¸ƒçš„å¼€å‘è€…æ¥è¯´ç®€ç›´æ˜¯æŠ˜ç£¨ã€‚</p>
<p>å¥½åœ¨ npm æä¾›äº† <strong>ã€Œæœ¬åœ°é…ç½®æ°¸ä¹…æˆæƒä»¤ç‰Œã€</strong> çš„æœºåˆ¶ï¼Œå¯ä»¥åšåˆ°æ°¸ä¹…å…ç™»å½•å‘å¸ƒï¼Œç›´æ¥ npm ä»¤ç‰Œå†™å…¥æœ¬åœ°çš„ npm å…¨å±€é…ç½®æ–‡ä»¶é‡Œï¼Œnpm ä¼šæ°¸ä¹…è¯»å–è¿™ä¸ªä»¤ç‰Œä½œä¸ºèº«ä»½å‡­è¯ï¼Œ<strong>å®Œå…¨è·³è¿‡</strong> <code>npm login</code> <strong>æ•´ä¸ªæµç¨‹</strong>ï¼Œä¸éœ€è¦ç™»å½•ã€ä¸éœ€è¦è¾“ç”¨æˆ·åã€ä¸éœ€è¦è¾“é‚®ç®±ã€ä¸éœ€è¦è¾“éªŒè¯ç ï¼Œ<strong>ä»¥åå‘å¸ƒåŒ…ï¼Œåªéœ€è¦åœ¨é¡¹ç›®é‡Œæ•²</strong> <code>npm publish</code> <strong>ä¸€ä¸ªå‘½ä»¤ï¼Œç›´æ¥å‘å¸ƒæˆåŠŸ</strong>ï¼</p>
<p>å¹¶ä¸”è¿™ä¸ªé…ç½®æ˜¯<strong>æ°¸ä¹…ç”Ÿæ•ˆ</strong>çš„ï¼Œå“ªæ€• 90 å¤©åä»¤ç‰Œè¿‡æœŸäº†ï¼Œä¹Ÿåªæ˜¯é‡æ–°æ¢ä¸ªä»¤ç‰Œå†æ‰§è¡Œä¸€æ¬¡é…ç½®å‘½ä»¤å°±è¡Œï¼Œæ¯”åå¤ç™»å½•èˆ’æœ 100 å€ã€‚ä¸‹é¢å°±æ˜¯æ“ä½œæµç¨‹ï¼š</p>
<h2 data-id="heading-3">npm å…ç™»å½•å‘å¸ƒ</h2>
<h3 data-id="heading-4">æ­¥éª¤ 1ï¼šç”Ÿæˆç»†ç²’åº¦ä»¤ç‰Œ (Granular Access Token)</h3>
<ul>
<li>æ‰“å¼€ npm å®˜ç½‘ â†’ è´¦å· â†’ Access tokens â†’Generate New Token</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc1e7925da2485d9dc328a2b0b9f811~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5bqm5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903999&amp;x-signature=NbDzJ%2F7e3Fp6AaLWG7lhXMihZ04%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>ä¾æ¬¡è¾“å…¥åç§°ï¼Œå‹¾é€‰<code>Bypass two-factor authentication (2FA)</code>ï¼ˆä¸å‹¾é€‰çš„è¯æ¯æ¬¡å‘åŒ…è¿˜éœ€è¦å†è¾“å…¥ 2fa éªŒè¯ç ï¼‰ï¼Œé€‰æ‹©åŒ…èŒƒå›´å’Œè¿‡æœŸæ—¶é—´ï¼ˆæœ€å¤š 90 å¤©ï¼‰</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac0cc5da93834c29aca267708ee17c02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO5bqm5YmN56uv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768903999&amp;x-signature=nTebA2gbHH4TH4F9qASi2kwXPJw%3D" alt="image.png" loading="lazy"/>
ç”Ÿæˆåçš„ç»†ç²’åº¦ä»¤ç‰Œå¤åˆ¶ä¸‹æ¥ï¼Œç„¶åè¿›å…¥ç»ˆç«¯</p>
<h3 data-id="heading-5">æ­¥éª¤ 2ï¼šMac ç»ˆç«¯æ‰§è¡Œã€ä¸€è¡Œæ ¸å¿ƒå‘½ä»¤ã€‘ï¼Œæ°¸ä¹…é…ç½®ä»¤ç‰Œ</h3>
<p>ç›´æ¥å¤åˆ¶ä¸‹é¢çš„å‘½ä»¤åˆ°ç»ˆç«¯ï¼ŒæŠŠ <code>ä½ çš„ç»†ç²’åº¦ä»¤ç‰Œ</code> æ›¿æ¢æˆä½ å¤åˆ¶çš„ä»¤ç‰Œå­—ç¬¦ä¸²ï¼Œ<strong>ç›´æ¥å›è½¦æ‰§è¡Œ</strong>ï¼Œæ²¡æœ‰ä»»ä½•åé¦ˆå°±æ˜¯é…ç½®æˆåŠŸ</p>
<pre><code class="hljs language-arduino" lang="arduino">npm config set <span class="hljs-comment">//registry.npmjs.org/:_authToken=ä½ çš„ç»†ç²’åº¦ä»¤ç‰Œ</span>
</code></pre>
<h3 data-id="heading-6">æ­¥éª¤ 3ï¼šæ£€æŸ¥é…ç½®æ˜¯å¦ç”Ÿæ•ˆ</h3>
<p>æ–¹å¼ä¸€ï¼šç»ˆç«¯æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œèƒ½çœ‹åˆ°ä½ çš„ä»¤ç‰Œå°±è¯´æ˜é…ç½®æˆåŠŸäº†</p>
<pre><code class="hljs language-arduino" lang="arduino">npm config get <span class="hljs-comment">//registry.npmjs.org/:_authToken</span>

npm ERR! ---sekretz---

npm ERR! A complete log of <span class="hljs-keyword">this</span> run can be found in:
npm ERR!     /Users/wanko/.npm/_logs/<span class="hljs-number">2026</span><span class="hljs-number">-01</span><span class="hljs-number">-12</span>T07_44_13_678Z-debug.log
</code></pre>
<p>æ–¹å¼äºŒï¼šç›´æ¥æ‰§è¡Œ <code>npm whoami</code> å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">whoami</span>
</code></pre>
<h4 data-id="heading-7">æˆåŠŸçš„ç»“æœï¼š</h4>
<p>ç»ˆç«¯ä¼šç›´æ¥è¾“å‡ºä½ çš„ <strong>npm å®˜ç½‘è´¦å·å</strong>è¯´æ˜ï¼šnpm å·²ç»é€šè¿‡ä½ é…ç½®çš„ä»¤ç‰Œï¼ŒæˆåŠŸè¯†åˆ«äº†ä½ çš„èº«ä»½ï¼Œä»¤ç‰Œé…ç½®<strong>å®Œå…¨ç”Ÿæ•ˆ</strong>ï¼</p>
<h3 data-id="heading-8">ä»æ­¤ä»¥åçš„å‘å¸ƒæµç¨‹</h3>
<p>ä¸ç®¡æ˜¯ 90 å¤©å†…ï¼Œè¿˜æ˜¯æ¢äº†é¡¹ç›®ï¼Œåªè¦è¿˜æ˜¯è¿™å°ç”µè„‘ï¼Œå‘å¸ƒ npm åŒ…<strong>å…¨ç¨‹åªæœ‰ 2 æ­¥</strong>ï¼Œæ— ä»»ä½•è¾“å…¥ï¼š</p>
<ol>
<li>ç»ˆç«¯è¿›å…¥ä½ çš„ npm åŒ…é¡¹ç›®ç›®å½•</li>
<li>æ‰§è¡Œå‘å¸ƒå‘½ä»¤å³å¯ï¼šbashè¿è¡Œ</li>
</ol>

<pre><code class="hljs">npm publish
</code></pre>
<p>æ•ˆæœï¼šå›è½¦åç›´æ¥æ‰“åŒ…ã€ä¸Šä¼ ã€å‘å¸ƒæˆåŠŸï¼Œ<strong>æ²¡æœ‰ä»»ä½•å¼¹çª—ã€æ²¡æœ‰ä»»ä½•è¾“å…¥é¡¹</strong>ï¼Œç§’å‘ï¼Œçˆ½åˆ°é£èµ·</p>
<h2 data-id="heading-9">è¡¥å……è¯´æ˜</h2>
<h3 data-id="heading-10">90 å¤©åä»¤ç‰Œè¿‡æœŸäº†æ€ä¹ˆåŠï¼Ÿ</h3>
<p>ä»¤ç‰Œæœ‰æ•ˆæœŸ 90 å¤©ï¼Œè¿‡æœŸåæ‰§è¡Œ <code>npm whoami</code> ä¼šæç¤ºèº«ä»½å¤±æ•ˆï¼Œ<strong>è§£å†³æ–¹æ³•è¶…çº§ç®€å•ï¼š</strong></p>
<ol>
<li>å» npm å®˜ç½‘ â†’ è´¦å· â†’ Access tokens â†’ ç”Ÿæˆä¸€ä¸ªæ–°çš„ã€ŒAutomationã€ä»¤ç‰Œï¼Œå¤åˆ¶ï¼›</li>
<li>Mac ç»ˆç«¯æ‰§è¡Œä¹‹å‰çš„é…ç½®å‘½ä»¤ï¼Œç”¨æ–°ä»¤ç‰Œæ›¿æ¢æ—§ä»¤ç‰Œï¼š</li>
</ol>

<pre><code class="hljs language-arduino" lang="arduino">npm config set <span class="hljs-comment">//registry.npmjs.org/:_authToken=ä½ çš„æ–°ä»¤ç‰Œ</span>
</code></pre>
<p>3.  æ‰§è¡Œ <code>npm whoami</code> éªŒè¯ï¼Œæå®šï¼</p>
<p>ä¸ç”¨åˆ æ—§ä»¤ç‰Œã€ä¸ç”¨ logoutã€ä¸ç”¨æ”¹é…ç½®æ–‡ä»¶ï¼Œç›´æ¥è¦†ç›–å°±è¡Œï¼Œnpm ä¼šè‡ªåŠ¨ç”¨æ–°ä»¤ç‰Œç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-11">å…³äºç»†ç²’åº¦ä»¤ç‰Œåœ¨æœ¬åœ°çš„ä¿å­˜</h3>
<ol>
<li>ä»¤ç‰Œåªä¿å­˜åœ¨ç”µè„‘<strong>çš„æœ¬åœ°é…ç½®æ–‡ä»¶</strong> <code>~/.npmrc</code> é‡Œï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ï¼Œä¸ä¼šè¢« npm / ä»»ä½•äººè·å–ï¼›</li>
<li>ä»¤ç‰Œæ˜¯ã€Œè‡ªåŠ¨åŒ–ä»¤ç‰Œã€ï¼Œæƒé™ä»…ç”¨äºã€Œç™»å½• + å‘å¸ƒåŒ…ã€ï¼Œæ²¡æœ‰è´¦å·ä¿®æ”¹ã€åˆ é™¤ç­‰é«˜å±æƒé™ï¼Œå°±ç®—æ³„éœ²ï¼ˆæ¦‚ç‡æä½ï¼‰ï¼Œåˆ«äººæœ€å¤šåªèƒ½ç”¨ä½ çš„è´¦å·å‘å¸ƒåŒ…ï¼Œæ”¹ä¸äº†ä½ çš„è´¦å·ä¿¡æ¯ï¼›</li>
<li>npm çš„ <code>---sekretz---</code> æœºåˆ¶ï¼Œå°±æ˜¯ä¸ºäº†é˜²æ­¢ä½ åœ¨å…¬å…±åœºåˆæ‰§è¡Œå‘½ä»¤æ—¶ï¼Œä»¤ç‰Œè¢«åˆ«äººçœ‹åˆ°ï¼Œæ˜¯åŒé‡ä¿æŠ¤ã€‚</li>
</ol>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>è™½ç„¶ npm æ›´æ–°äº†å®‰å…¨ç­–ç•¥ï¼Œä½†æ€»å¾—æ¥è¯´æ–°çš„ä»¤ç‰Œå¯ä»¥è®©å‘å¸ƒæ›´å‹å¥½ï¼Œæ¯”ä¹‹å‰æŒ‡çº¹æˆæƒçš„ä½“éªŒè¿˜è¦å¥½ï¼Œæ¯•ç«ŸæŒ‡çº¹æˆæƒç™»å½•è¿˜å¾—è·³è½¬ç½‘é¡µå†å›åˆ°ç»ˆç«¯ï¼Œéœ€è¦ç­‰å¾…ç½‘é¡µçš„åŠ è½½ï¼Œè¿˜æœ‰åˆ‡æ¢æ“ä½œï¼Œè€Œç°åœ¨é€šè¿‡ç»†ç²’åº¦ä»¤ç‰Œï¼Œå¯ä»¥ç›´æ¥å…ç™»å½•ï¼Œä¸”ä¸€è¡Œå‘½ä»¤å°±èƒ½å®ç°å‘åŒ…ï¼Œä»¥åå‘å¸ƒåŒ…å†ä¹Ÿä¸ç”¨æŠ˜è…¾é‚£äº›ç¹ççš„æ­¥éª¤äº†ï¼ŒçœŸçš„æ˜¯ too easy too happyã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¼«ç”»è¯´ï¼šä¸ºä»€ä¹ˆä½ çš„â€œå¢é‡è®¡ç®—â€è¶Šè·‘è¶Šæ…¢ï¼Ÿâ€”â€”90%çš„å®æ—¶æ•°ä»“å›¢é˜Ÿéƒ½è¸©è¿‡çš„å‘ï¼Œè—åœ¨è¿™å‡ æ ¼æ¼«ç”»é‡Œ]]></title>    <link>https://juejin.cn/post/7594661351513047075</link>    <guid>https://juejin.cn/post/7594661351513047075</guid>    <pubDate>2026-01-13T10:31:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7594661351513047075" data-draft-id="7594662258354421795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¼«ç”»è¯´ï¼šä¸ºä»€ä¹ˆä½ çš„â€œå¢é‡è®¡ç®—â€è¶Šè·‘è¶Šæ…¢ï¼Ÿâ€”â€”90%çš„å®æ—¶æ•°ä»“å›¢é˜Ÿéƒ½è¸©è¿‡çš„å‘ï¼Œè—åœ¨è¿™å‡ æ ¼æ¼«ç”»é‡Œ"/> <meta itemprop="keywords" content="å¤§æ•°æ®,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-13T10:31:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¼«ç”»è¯´ï¼šä¸ºä»€ä¹ˆä½ çš„â€œå¢é‡è®¡ç®—â€è¶Šè·‘è¶Šæ…¢ï¼Ÿâ€”â€”90%çš„å®æ—¶æ•°ä»“å›¢é˜Ÿéƒ½è¸©è¿‡çš„å‘ï¼Œè—åœ¨è¿™å‡ æ ¼æ¼«ç”»é‡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-13T10:31:31.000Z" title="Tue Jan 13 2026 10:31:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-13
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://static001.geekbang.org/infoq/7a/7abadb065bbaf802a3ae7cc6b4db1bbd.jpeg" alt="" loading="lazy"/></p>
<p>ä¸ºä»€ä¹ˆæ¯æ¬¡åªæ”¹ä¸€è¡Œæ•°æ®ï¼Œå´è¦é‡ç®—ä¸Šäº¿æ¡å†å²è®°å½•ï¼Ÿ</p>
<p>ä½ åœ¨æ„å»ºå®æ—¶çœ‹æ¿ã€ç”¨æˆ·ç”»åƒæˆ–é£æ§ç‰¹å¾æ—¶ï¼Œæ˜¯å¦ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„å›°å¢ƒï¼Ÿ</p>
<p>æ¯å¤©æ–°å¢çš„è®¢å•å¯èƒ½åªæœ‰å‡ ä¸‡æ¡ï¼Œä½†èƒŒåçš„ç”¨æˆ·ã€å•†å“ã€æ”¯ä»˜è¡¨åŠ¨è¾„ä¸Šäº¿è¡Œã€‚ä¸ºäº†åˆ·æ–°ä¸€ä¸ªèšåˆæŒ‡æ ‡ï¼Œç³»ç»Ÿä¸å¾—ä¸å…¨é‡æ‰«æã€é‡æ–° Joinã€å†èšåˆâ€”â€”å“ªæ€• 99% çš„æ•°æ®æ ¹æœ¬æ²¡æœ‰å˜åŒ–ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/29/2968eec0b74ab5fa086dd52c811dd977.png" alt="" loading="lazy"/></p>
<p>è¿™ä¸ä»…æ‹–æ…¢äº†åˆ·æ–°é¢‘ç‡ï¼Œè¿˜è®©è®¡ç®—æˆæœ¬å±…é«˜ä¸ä¸‹ã€‚</p>
<p>æ›´ç³Ÿçš„æ˜¯ï¼Œä¸ºäº†â€œæ‰›ä½â€å…¨é‡ä»»åŠ¡ï¼Œå›¢é˜Ÿå¾€å¾€è¢«è¿«æ‹†å‡ºå¤šå±‚ä¸­é—´è¡¨ï¼Œé“¾è·¯è¶Šæ‹‰è¶Šé•¿ï¼Œç»´æŠ¤è¶Šæ¥è¶Šéš¾ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/30/30dcaf1c42d96c36f4148ee2449eee91.jpeg" alt="" loading="lazy"/></p>
<p>å¢é‡åˆ·æ–°æœ¬åº”æ˜¯è§£è¯ï¼Œä½†å¹¶éæ‰€æœ‰æ–¹æ¡ˆéƒ½æ˜¯çœŸæ­£â€œå¢é‡â€ã€‚</p>
<p>ä¸€äº›ç³»ç»Ÿé‡‡ç”¨æ— çŠ¶æ€æ¨¡å‹ï¼šæ¯æ¬¡åªè¯»å˜æ›´æ•°æ®ï¼Œå´ä¸ä¿å­˜ä»»ä½•ä¸­é—´ç»“æœã€‚å¬èµ·æ¥è½»é‡ï¼Œå®åˆ™ä»£ä»·é«˜æ˜‚â€”â€”å¤æ‚æŸ¥è¯¢ä¸‹ï¼Œå®ƒä»éœ€åå¤å›æº¯å†å²æ•°æ®ï¼Œç”šè‡³æ¯”å…¨é‡æ›´æ…¢ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/ab/ab56b486d20c6380b2d5b0b0984b913d.jpeg" alt="" loading="lazy"/></p>
<p>é˜¿é‡Œäº‘ Hologres é€‰æ‹©äº†å¦ä¸€æ¡è·¯å¾„ï¼šæœ‰çŠ¶æ€å¢é‡è®¡ç®—ã€‚</p>
<p>åœ¨é¦–æ¬¡å…¨é‡æ„å»ºæ—¶ï¼Œå®ƒåŒæ­¥ç”Ÿæˆå¹¶æŒä¹…åŒ–å…³é”®ä¸­é—´çŠ¶æ€â€”â€”æ¯”å¦‚èšåˆå€¼ã€Join ä¸­é—´äº§ç‰©ã€‚</p>
<p>åç»­åˆ·æ–°ï¼Œåªéœ€å°†æ–°æ•°æ®ä¸çŠ¶æ€åˆå¹¶ï¼Œæ— éœ€è§¦ç¢°åŸå§‹å†å²è¡¨ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>åˆ·æ–°å»¶è¿Ÿä»åˆ†é’Ÿçº§é™è‡³ç§’çº§ï¼›</p>
</li>
<li>
<p>è®¡ç®—èµ„æºæ¶ˆè€—å¤§å¹…ä¸‹é™ï¼›</p>
</li>
<li>
<p>å³ä½¿é¢å¯¹äº”è¡¨ Join æˆ– COUNT DISTINCTï¼Œä¹Ÿèƒ½ä¿æŒé«˜æ•ˆã€‚</p>
</li>
</ul>
<p><img src="https://static001.geekbang.org/infoq/5d/5d2c9f6257591dd7937e9659d3b19bb2.png" alt="" loading="lazy"/></p>
<p>çŠ¶æ€ç¡®å®éœ€è¦é¢å¤–å­˜å‚¨ï¼Œä½†è¿™éƒ¨åˆ†å¼€é”€æ˜¯å¯æ§çš„ã€‚</p>
<p>åœ¨åˆ†åŒºè¡¨åœºæ™¯ä¸­ï¼Œä»…æ´»è·ƒåˆ†åŒºä¿ç•™çŠ¶æ€ï¼›éæ´»è·ƒåˆ†åŒºè‡ªåŠ¨è½¬ä¸ºå…¨é‡ï¼Œé¿å…çŠ¶æ€è†¨èƒ€ã€‚</p>
<p>å¯¹äºéåˆ†åŒºè¡¨ï¼Œä¹Ÿå¯é€šè¿‡ TTL ç­–ç•¥æ¸…ç†è¿‡æœŸçŠ¶æ€ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/b4/b46e0fc997f9bafc4eb2f60cf2d2665e.jpeg" alt="" loading="lazy"/></p>
<p>çœŸæ­£çš„æ•ˆç‡ï¼Œä¸åœ¨äºå°‘ç®—ä¸€ç‚¹ï¼Œè€Œåœ¨äºåªç®—è¯¥ç®—çš„ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨è®¾è®¡å®æ—¶æ•°ä»“ã€ç‰¹å¾ç®¡é“æˆ–ç»Ÿä¸€æŒ‡æ ‡ä½“ç³»ï¼Œä¸å¦¨è¯„ä¼°ï¼šä½ çš„â€œå¢é‡â€æ˜¯å¦çœŸçš„é¿å¼€äº†å†å²æ•°æ®çš„é‡å¤è®¡ç®—ï¼Ÿ</p>
<p>Hologres Dynamic Table æä¾›äº†ä¸€ç§ç»è¿‡éªŒè¯çš„ç­”æ¡ˆâ€”â€”ç”¨æœ‰é™çš„å­˜å‚¨æ¢ç¡®å®šæ€§çš„æ€§èƒ½ï¼Œè®©å®æ—¶æ›´æ–°å›å½’æœ¬è´¨ã€‚</p>
<p><img src="https://static001.geekbang.org/infoq/f8/f81dcf4fb57e5dc62c1254f3383a0c12.jpeg" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>