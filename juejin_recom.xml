<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ‹’ç»â€œåªä¼šèŠå¤©â€çš„AIï¼æ­ç§˜Agentå¼€å‘ç¬¬ä¸€æ­¥ï¼šç»™å¤§æ¨¡å‹è£…ä¸Šâ€œå¤§è„‘â€ä¸â€œæ‰‹è„šâ€]]></title>    <link>https://juejin.cn/post/7595901379014705162</link>    <guid>https://juejin.cn/post/7595901379014705162</guid>    <pubDate>2026-01-17T14:24:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379014705162" data-draft-id="7595890117866143790" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç»â€œåªä¼šèŠå¤©â€çš„AIï¼æ­ç§˜Agentå¼€å‘ç¬¬ä¸€æ­¥ï¼šç»™å¤§æ¨¡å‹è£…ä¸Šâ€œå¤§è„‘â€ä¸â€œæ‰‹è„šâ€"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-17T14:24:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç›´åœ¨è¿½"/> <meta itemprop="url" content="https://juejin.cn/user/239028506736411"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç»â€œåªä¼šèŠå¤©â€çš„AIï¼æ­ç§˜Agentå¼€å‘ç¬¬ä¸€æ­¥ï¼šç»™å¤§æ¨¡å‹è£…ä¸Šâ€œå¤§è„‘â€ä¸â€œæ‰‹è„šâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/239028506736411/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç›´åœ¨è¿½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:24:54.000Z" title="Sat Jan 17 2026 14:24:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æœ¬æ–‡ä»·å€¼æç¤ºï¼š</strong></p>
<blockquote>
<p>ğŸ’¡ <strong>ä½ å°†è·å¾—ä»€ä¹ˆï¼Ÿ</strong></p>
<ol>
<li><strong>åº•å±‚ç¥›é­…</strong>ï¼šè·³è¿‡ LangChain ç­‰æ¡†æ¶çš„é»‘ç›’ï¼Œä»åŸç”Ÿ API å±‚é¢ç†è§£ Agent æ˜¯å¦‚ä½•â€œåŠ¨â€èµ·æ¥çš„ã€‚</li>
<li><strong>æ€ç»´å‡çº§</strong>ï¼šä»å¤§æ•°æ®å·¥ç¨‹å¸ˆç†Ÿæ‚‰çš„ ETL çº¿æ€§æ€ç»´ï¼Œè½¬å‹ä¸º AI æ¶æ„å¸ˆå¿…å¤‡çš„â€œå¾ªç¯ï¼ˆLoopï¼‰æ€ç»´â€ã€‚</li>
<li><strong>å®æˆ˜ä»£ç </strong>ï¼šæŒæ¡ Function Calling å’Œ ReAct æ¨¡å¼çš„æ ¸å¿ƒå®ç°é€»è¾‘ã€‚</li>
</ol>
<p>â³ <strong>é˜…è¯»æ—¶é—´</strong>ï¼šçº¦ 8 åˆ†é’Ÿ | <strong>éš¾åº¦</strong>ï¼šè¿›é˜¶</p>
</blockquote>
<hr/>
<p>ğŸ‘‹ <strong>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä½ ä»¬çš„è€æœ‹å‹ã€‚</strong></p>
<p>åœ¨ä¸Šä¸€æœŸçš„ã€ŠRAGæ¶æ„ä¸æ•°æ®å·¥ç¨‹ã€‹ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ°ç»™å¤§æ¨¡å‹è£…ä¸Šäº†â€œæµ·é©¬ä½“â€ï¼Œåˆ©ç”¨å‘é‡æ•°æ®åº“è®©å®ƒæ‹¥æœ‰äº†<strong>é•¿æœŸè®°å¿†</strong>ã€‚ç°åœ¨ï¼Œå®ƒå·²ç»æ˜¯ä¸€ä¸ªåšå­¦å¤šæ‰çš„â€œå›¾ä¹¦é¦†ç®¡ç†å‘˜â€äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå®ƒä¾ç„¶åªèƒ½<strong>åç€è¯´è¯</strong>ï¼Ÿ</p>
<p>å®ƒä¸èƒ½å¸®ä½ æŸ¥å®æ—¶çš„å¤©æ°”ï¼Œä¸èƒ½å¸®ä½ å»æ•°æ®åº“è·‘ SQLï¼Œæ›´ä¸èƒ½å¸®ä½ å‘é‚®ä»¶ã€‚å®ƒå°±åƒä¸€ä¸ªè¢«å›°åœ¨ç“¶å­é‡Œçš„å¤©æ‰å¤§è„‘ï¼Œ<strong>æœ‰æ™ºå•†ï¼Œæ²¡è¡ŒåŠ¨åŠ›</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬æ­£å¼å¼€å¯<strong>ç¬¬å››ä¸ªä¸“é¢˜ï¼šAI Agent çš„å¼€å‘ä¸ç¼–æ’</strong>ã€‚ä½œä¸ºæœ¬ä¸“é¢˜çš„ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†æ·±å…¥ Agent çš„å¾®è§‚ä¸–ç•Œï¼Œä¸ä¾èµ–ä»»ä½•å¤æ‚çš„æ¡†æ¶ï¼Œäº²æ‰‹ç»™è¿™ä¸ªâ€œå¤§è„‘â€è£…ä¸Šâ€œæ‰‹è„šâ€ï¼ˆToolsï¼‰å’Œâ€œé€»è¾‘å›è·¯â€ï¼ˆReasoningï¼‰ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 æ€ç»´å¤§çˆ†ç‚¸ï¼šä» ETL åˆ° Agent Loop ğŸ¤¯</h2>
<p>ä½œä¸ºå¤§æ•°æ®å·¥ç¨‹å¸ˆï¼Œä½ ä¸€å®šå¯¹ <strong>DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰</strong> çƒ‚ç†Ÿäºå¿ƒã€‚åœ¨ Airflow æˆ– Spark ä¸­ï¼Œä»»åŠ¡æµæ˜¯çº¿æ€§çš„ã€ç¡®å®šçš„ï¼š
<code>æå–(E) -&gt; è½¬æ¢(T) -&gt; åŠ è½½(L)</code>ã€‚</p>
<p>å¦‚æœä¸­é—´æŠ¥é”™äº†ï¼Œä»»åŠ¡å°±æŒ‚äº†ï¼Œæˆ–è€…é‡è¯•ã€‚</p>
<p>ä½†åœ¨ Agent çš„ä¸–ç•Œé‡Œï¼Œé€»è¾‘æ˜¯<strong>éç¡®å®šæ€§</strong>çš„ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ª<strong>å¾ªç¯ï¼ˆCyclicï¼‰</strong>ã€‚</p>
<h3 data-id="heading-1">ğŸ”„ Agent çš„æ ¸å¿ƒå¾ªç¯</h3>
<p>Agent ä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œæ˜¯ä¸€ä¸ª <code>While True</code> çš„å¾ªç¯ï¼š</p>
<ol>
<li><strong>æ„ŸçŸ¥ (Observation)</strong>ï¼šçœ‹çœ‹ç°åœ¨å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</li>
<li><strong>æ€è€ƒ (Thought)</strong>ï¼šæˆ‘è¯¥åšä»€ä¹ˆï¼Ÿéœ€è¦ç”¨å·¥å…·å—ï¼Ÿ</li>
<li><strong>è¡ŒåŠ¨ (Action)</strong>ï¼šè°ƒç”¨å·¥å…·ï¼ˆAPI/å‡½æ•°ï¼‰ã€‚</li>
<li><strong>è§‚å¯Ÿ (Observation)</strong>ï¼šå·¥å…·è¿”å›äº†ä»€ä¹ˆç»“æœï¼Ÿ</li>
<li><strong>å›åˆ°ç¬¬ 2 æ­¥</strong>... ç›´åˆ°ä»»åŠ¡å®Œæˆã€‚</li>
<li><img src="http://openwrite.cn/uploads/20235/58487/ded66f57-0f05-4ce4-a32a-bd4063d76b31.png" alt="image.png" loading="lazy"/></li>
</ol>
<p><strong>æ¶æ„å¸ˆè§†ç‚¹</strong>ï¼š</p>
<blockquote>
<p>ä»¥å‰æˆ‘ä»¬å†™ä»£ç æ˜¯ç¼–å†™â€œè§„åˆ™â€ï¼Œç°åœ¨æˆ‘ä»¬å†™ Agent æ˜¯ç¼–å†™â€œç›®æ ‡â€å’Œâ€œè¾¹ç•Œâ€ã€‚ä½ æ— æ³•é¢„çŸ¥ LLM ä¼šå…ˆè¿ˆå·¦è„šè¿˜æ˜¯å³è„šï¼Œä½†ä½ è¦ç¡®ä¿å®ƒåˆ«æ‰è¿›å‘é‡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">02 ç»™å¤§è„‘è£…ä¸Šâ€œæ‰‹è„šâ€ï¼šFunction Calling (Tool Use) ğŸ› ï¸</h2>
<p>LLM æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ¦‚ç‡æ¨¡å‹ï¼Œå®ƒåªä¼šåå‡ºæ–‡æœ¬ï¼ˆTextï¼‰ã€‚é‚£å®ƒæ€ä¹ˆè°ƒç”¨ Python å‡½æ•°æˆ–è€… API å‘¢ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ç”¨åˆ° OpenAI ç­‰æ¨¡å‹æä¾›çš„æ ¸å¿ƒèƒ½åŠ›ï¼š<strong>Function Callingï¼ˆå‡½æ•°è°ƒç”¨ï¼‰</strong>ï¼Œç°åœ¨æ›´é€šç”¨çš„å«æ³•æ˜¯ <strong>Tool Use</strong>ã€‚</p>
<h3 data-id="heading-3">è¿™é‡Œçš„â€œé­”æ³•â€æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å…¶å®æ²¡æœ‰é­”æ³•ï¼Œåªæœ‰ <strong>Schemaï¼ˆç»“æ„å®šä¹‰ï¼‰</strong>ã€‚</p>
<p>æƒ³è±¡ä½ åœ¨é¤å…ç‚¹èœã€‚</p>
<ul>
<li><strong>æ™®é€šå¯¹è¯</strong>ï¼šâ€œæˆ‘è¦åƒé‚£ä¸ªçº¢è‰²çš„ã€è¾£çš„ã€æœ‰è±†è…çš„èœã€‚â€ï¼ˆå¨å¸ˆå¯èƒ½å¬ä¸æ‡‚ï¼‰</li>
<li><strong>Function Calling</strong>ï¼šä½ é€’ç»™å¨å¸ˆä¸€å¼ æ ‡å‡†ç‚¹èœå¡ï¼ˆJSON Schemaï¼‰ï¼š
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dish_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Mapo Tofu"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"spiciness_level"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"high"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"ingredients"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"tofu"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"minced meat"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-4">å®æˆ˜ï¼šåŸç”Ÿ SDK å®ç°å¤©æ°”æŸ¥è¯¢</h3>
<p>åˆ«æ€¥ç€å¼•å…¥ LangChainï¼Œæˆ‘ä»¬å…ˆçœ‹åŸç”Ÿ OpenAI SDK æ€ä¹ˆåšã€‚è¿™èƒ½è®©ä½ ç†è§£åº•å±‚åŸç†ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå®šä¹‰å·¥å…·ï¼ˆå‘Šè¯‰ LLM ä½ æœ‰å“ªäº›æ‰‹è„šï¼‰</strong>
æˆ‘ä»¬éœ€è¦ç”¨ JSON Schema æè¿°å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python">tools = [
    {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: <span class="hljs-string">"get_current_weather"</span>,
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"è·å–æŒ‡å®šåŸå¸‚çš„å½“å‰å¤©æ°”"</span>,
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: {
                    <span class="hljs-string">"location"</span>: {
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                        <span class="hljs-string">"description"</span>: <span class="hljs-string">"åŸå¸‚åç§°ï¼Œå¦‚ Beijing, San Francisco"</span>
                    },
                    <span class="hljs-string">"unit"</span>: {<span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>, <span class="hljs-string">"enum"</span>: [<span class="hljs-string">"celsius"</span>, <span class="hljs-string">"fahrenheit"</span>]}
                },
                <span class="hljs-string">"required"</span>: [<span class="hljs-string">"location"</span>]
            }
        }
    }
]
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šå¯¹è¯ä¸è§£æ</strong>
å½“ç”¨æˆ·é—®ï¼šâ€œä»Šå¤©åŒ—äº¬å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿâ€ LLM ä¸ä¼šç›´æ¥å›ç­”â€œæ™´å¤©â€ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ª<strong>ç‰¹æ®Šçš„ç»“æ„</strong>ï¼Œå‘Šè¯‰æˆ‘ä»¬è¦è°ƒç”¨å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç æ¼”ç¤º</span>
response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-4o"</span>,
    messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”å¦‚ä½•ï¼Ÿ"</span>}],
    tools=tools, <span class="hljs-comment"># å…³é”®ç‚¹ï¼šæŠŠå·¥å…·ç®±ä¼ ç»™å®ƒ</span>
    tool_choice=<span class="hljs-string">"auto"</span> 
)

tool_call = response.choices[<span class="hljs-number">0</span>].message.tool_calls[<span class="hljs-number">0</span>]
<span class="hljs-built_in">print</span>(tool_call.function.name) 
<span class="hljs-comment"># è¾“å‡º: get_current_weather</span>
<span class="hljs-built_in">print</span>(tool_call.function.arguments) 
<span class="hljs-comment"># è¾“å‡º: {"location": "Beijing"}</span>
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œä¸å›ä¼ </strong>
ä½œä¸ºå¼€å‘è€…ï¼Œä½ éœ€è¦æ•è·è¿™ä¸ª <code>tool_call</code>ï¼Œåœ¨æœ¬åœ°æ‰§è¡Œ Python ä»£ç ï¼Œç„¶åæŠŠç»“æœ<strong>ä¼ªè£…æˆä¸€æ¡æ¶ˆæ¯</strong>ï¼Œå¡å›ç»™ LLMã€‚</p>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šLLM å¹¶æ²¡æœ‰çœŸæ­£æ‰§è¡Œä»£ç ï¼Œå®ƒåªæ˜¯ç”Ÿæˆäº†â€œè¦æ‰§è¡Œä»£ç çš„æŒ‡ä»¤â€ã€‚<strong>æ‰§è¡Œä»£ç çš„æ˜¯ä½ çš„ Python è„šæœ¬ï¼</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-5">03 å‡çº§å¤§è„‘çš„æ“ä½œç³»ç»Ÿï¼šPrompt ç­–ç•¥ä¸ ReAct ğŸ§ </h2>
<p>æœ‰äº†æ‰‹è„šï¼Œå¦‚æœå¤§è„‘ä¸å¤Ÿèªæ˜ï¼ŒAgent å°±ä¼šå˜æˆâ€œæ— å¤´è‹è‡â€ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡ Prompt Engineering æ¥å‡çº§å®ƒçš„æ€ç»´æ¨¡å¼ã€‚</p>
<h3 data-id="heading-6">1. CoT (Chain of Thought)ï¼šè®©å®ƒæ…¢ç‚¹æƒ³</h3>
<p>åœ¨å¤§æ•°æ®å¤„ç†ä¸­ï¼Œå¤æ‚çš„ SQL æˆ‘ä»¬ä¼šæ‹†æˆå¤šä¸ª CTE (Common Table Expression)ã€‚åŒç†ï¼Œå¯¹ LLMï¼Œæˆ‘ä»¬è¦å¼ºè¿«å®ƒ <code>Let's think step by step</code>ã€‚</p>
<p><strong>System Prompt ç¤ºä¾‹ï¼š</strong></p>
<blockquote>
<p>ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ã€‚åœ¨å›ç­”ç”¨æˆ·é—®é¢˜å‰ï¼Œè¯·å…ˆåˆ—å‡ºä½ çš„æ€è€ƒæ­¥éª¤ï¼Œæ˜ç¡®ä½ éœ€è¦ä»€ä¹ˆæ•°æ®ï¼Œç„¶åå†è¡ŒåŠ¨ã€‚</p>
</blockquote>
<h3 data-id="heading-7">2. ReAct æ¨¡å¼ï¼šAgent çš„é»„é‡‘æ³•åˆ™</h3>
<p>ReAct æ˜¯ <strong>Re</strong>asoning + <strong>Act</strong>ing çš„ç¼©å†™ã€‚è¿™æ˜¯ç›®å‰æœ€ç»å…¸çš„ Agent è¿ä½œæ¨¡å¼ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒå’’è¯­æ˜¯ï¼š</p>
<ul>
<li><strong>Thought (æƒ³æ³•)</strong>ï¼šç”¨æˆ·æƒ³æŸ¥å¤©æ°”ï¼Œæˆ‘éœ€è¦è°ƒç”¨å¤©æ°”å·¥å…·ã€‚</li>
<li><strong>Action (è¡ŒåŠ¨)</strong>ï¼š<code>get_weather("Beijing")</code></li>
<li><strong>Observation (è§‚å¯Ÿ)</strong>ï¼šAPI è¿”å›äº† "25åº¦ï¼Œæ™´"ã€‚</li>
<li><strong>Thought (æƒ³æ³•)</strong>ï¼šæˆ‘å·²ç»æœ‰äº†å¤©æ°”ä¿¡æ¯ï¼Œå¯ä»¥å›ç­”ç”¨æˆ·äº†ã€‚</li>
<li><strong>Final Answer (æœ€ç»ˆå›ç­”)</strong>ï¼šåŒ—äº¬ä»Šå¤©å¤©æ°”ä¸é”™ï¼Œ25åº¦ï¼Œæ™´å¤©ã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ</strong>
å¦‚æœæ²¡æœ‰ ReActï¼Œæ¨¡å‹å¯èƒ½ä¼šäº§ç”Ÿ<strong>å¹»è§‰</strong>ã€‚æ¯”å¦‚å®ƒç›´æ¥ç¼–é€ ä¸€ä¸ªå¤©æ°”ï¼Œè€Œä¸æ˜¯å»è°ƒç”¨å·¥å…·ã€‚ReAct å¼ºåˆ¶æ¨¡å‹â€œçŸ¥è¡Œåˆä¸€â€ã€‚</p>
<hr/>
<h2 data-id="heading-8">04 æ¶æ„å¸ˆçš„â€œé˜²å‘†â€è®¾è®¡ï¼šPydantic ä¸ç»“æ„åŒ–è¾“å‡º ğŸ›¡ï¸</h2>
<p>ä½œä¸ºå·¥ç¨‹åŒ–è½¬å‹çš„ä½ ï¼Œè‚¯å®šå—ä¸äº† JSON è§£ææŠ¥é”™ã€‚
LLM è¾“å‡ºçš„ JSON ç»å¸¸å°‘ä¸ªæ‹¬å·ï¼Œæˆ–è€…å­—æ®µåå†™é”™ã€‚æ€ä¹ˆåŠï¼Ÿ</p>
<p><strong>Pydantic ç™»åœºï¼</strong>
Pydantic æ˜¯ Python ä¸­æœ€å¼ºçš„æ•°æ®éªŒè¯åº“ã€‚æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å¼ºåˆ¶ LLM è¾“å‡ºç¬¦åˆ Python ç±»å®šä¹‰çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserIntent</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    intent: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·çš„æ„å›¾ï¼Œå¦‚ query, command, chat"</span>)
    confidence: <span class="hljs-built_in">float</span> = Field(description=<span class="hljs-string">"ç½®ä¿¡åº¦ 0-1"</span>)
    keywords: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"æå–çš„å…³é”®å®ä½“"</span>)

<span class="hljs-comment"># åœ¨ OpenAI æ–°ç‰ˆ SDK ä¸­ï¼Œå¯ä»¥ç›´æ¥ç»“åˆ Pydantic</span>
completion = client.beta.chat.completions.parse(
    model=<span class="hljs-string">"gpt-4o-2024-08-06"</span>,
    messages=[...],
    response_format=UserIntent, <span class="hljs-comment"># å¼ºç±»å‹çº¦æŸï¼</span>
)

intent_obj = completion.choices[<span class="hljs-number">0</span>].message.parsed
<span class="hljs-built_in">print</span>(intent_obj.confidence) <span class="hljs-comment"># ç›´æ¥è·å– float ç±»å‹ï¼Œæ— éœ€ json.loads</span>
</code></pre>
<p><strong>æ¶æ„å¸ˆæ€è€ƒ</strong>ï¼š
è¿™ä¸ä»…ä»…æ˜¯è¯­æ³•ç³–ï¼Œè¿™æ˜¯<strong>ç³»ç»Ÿç¨³å®šæ€§</strong>çš„ä¿éšœã€‚åœ¨ Agent ç¼–æ’ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡å¿…é¡»æ˜¯ç»“æ„åŒ–çš„ï¼ˆSchemaï¼‰ï¼Œè€Œä¸æ˜¯éšæ„çš„è‡ªç„¶è¯­è¨€ã€‚</p>
<hr/>
<h2 data-id="heading-9">05 æ€»ç»“ä¸é¢„å‘Š ğŸ“</h2>
<p>ä»Šå¤©æˆ‘ä»¬å‰¥å¼€äº† Agent çš„å¤–è¡£ï¼Œçœ‹åˆ°äº†å®ƒæœ€åŸå§‹çš„â€œè¡€è‚‰â€ï¼š</p>
<ol>
<li><strong>ç†å¿µ</strong>ï¼šä»çº¿æ€§ Pipeline è½¬å‘ å¾ªç¯ Loopã€‚</li>
<li><strong>æ‰‹è„š</strong>ï¼šåˆ©ç”¨ <code>Function Calling</code> å®šä¹‰å·¥å…· Schemaã€‚</li>
<li><strong>å¤§è„‘</strong>ï¼šåˆ©ç”¨ <code>ReAct</code> æ¨¡å¼è¿›è¡Œâ€œæ€è€ƒ-è¡ŒåŠ¨-è§‚å¯Ÿâ€çš„å¾ªç¯ã€‚</li>
<li><strong>éª¨æ¶</strong>ï¼šåˆ©ç”¨ <code>Pydantic</code> ä¿è¯æ•°æ®æµè½¬çš„é²æ£’æ€§ã€‚</li>
</ol>
<h3 data-id="heading-10">ğŸ—ºï¸ æœ¬æ–‡æ ¸å¿ƒçŸ¥è¯†å›¾è°±</h3>
<p><img src="http://openwrite.cn/uploads/20235/58487/a6f99ea4-4fdd-43ec-a8be-9242443e8947.png" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">ğŸ£ äº’åŠ¨è¯é¢˜</h3>
<blockquote>
<p>ä½ åœ¨å°è¯•è®© LLM è°ƒç”¨å·¥å…·æ—¶ï¼Œé‡åˆ°è¿‡æœ€ç¦»è°±çš„â€œå¹»è§‰â€æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆæ¯”å¦‚ï¼šæ˜æ˜æ²¡æŸ¥æ•°æ®åº“ï¼Œå´ä¸€æœ¬æ­£ç»åœ°ç¼–é€ äº†æŸ¥è¯¢ç»“æœï¼Ÿï¼‰
æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„â€œç¿»è½¦â€ç°åœºï¼</p>
</blockquote>
<h3 data-id="heading-12">ğŸš€ ä¸‹æœŸé¢„å‘Š</h3>
<p>å­¦ä¼šäº†å•ç‚¹æŠ€èƒ½ï¼Œå¦‚ä½•æ„å»ºå¤æ‚çš„ã€ç”Ÿäº§çº§çš„ Agent æµç¨‹ï¼Ÿ
ä¸‹ä¸€æœŸï¼Œæˆ‘ä»¬å°†è¿›å…¥<strong>ç¬¬äºŒç¯‡ï¼šå•ä½“ Agent æ¶æ„</strong>ã€‚æˆ‘ä»¬å°†æ·±åº¦å®æˆ˜ <strong>LangGraph</strong>ï¼Œå­¦ä¹ å¦‚ä½•ç”¨â€œå›¾â€çš„æ€ç»´æ¥ç¼–æ’ä¸€ä¸ªçœŸæ­£çš„æ•°æ®åˆ†æå¸ˆ Agentã€‚</p>
<p><strong>å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä»å¤§æ•°æ®å·¥ç¨‹å¸ˆç¡¬æ ¸è½¬å‹ AI æ¶æ„å¸ˆï¼</strong></p>
<hr/>
<p><em>è¿™æ˜¯â€œAI Agentå¼€å‘ä¸ç¼–æ’â€ä¸“é¢˜çš„ç¬¬ 1 ç¯‡ï¼Œå‰åºä¸“é¢˜ã€ŠPythoné«˜çº§å·¥ç¨‹åŒ–ã€‹ã€ã€Šå¤§æ¨¡å‹åŸºç¡€ç†è®ºã€‹ã€ã€ŠRAGæ¶æ„ä¸æ•°æ®å·¥ç¨‹ã€‹å·²å®Œç»“ï¼Œæ¬¢è¿ç¿»é˜…å†å²æ–‡ç« è¡¥è¯¾ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Code Skillsï¼šä»æ‰‹å†™åˆ°å·¥å…·åŒ–ï¼Œæ•™ AI æ–°æŠ€èƒ½çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7596181746061656091</link>    <guid>https://juejin.cn/post/7596181746061656091</guid>    <pubDate>2026-01-17T14:25:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746061656091" data-draft-id="7596181746061639707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Code Skillsï¼šä»æ‰‹å†™åˆ°å·¥å…·åŒ–ï¼Œæ•™ AI æ–°æŠ€èƒ½çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-17T14:25:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿è¡¡Eve"/> <meta itemprop="url" content="https://juejin.cn/user/254742428393310"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Code Skillsï¼šä»æ‰‹å†™åˆ°å·¥å…·åŒ–ï¼Œæ•™ AI æ–°æŠ€èƒ½çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/254742428393310/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿è¡¡Eve
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:25:07.000Z" title="Sat Jan 17 2026 14:25:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>ğŸ’ å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é˜¿è¡¡ï¼Œä¸€å¹´ç»éªŒç”¨äº†åæ¬¡çš„æ¸¸æˆåç«¯å¼€å‘ï¼Œè¾èŒåæˆä¸ºè‡ªç”±èŒä¸šã€ç‹¬ç«‹æ¸¸æˆå¼€å‘è€…ã€‚</p>
<p>éä¸“ä¸š AI ç©å®¶ï¼Œæ—¥å¸¸å…³æ³¨ AI ç¼–ç¨‹æ–¹å‘çš„å†…å®¹ã€‚</p>
</blockquote>
<p><strong>ğŸ¯ è¿™æ˜¯ Claude Code Skills ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œä¸»è¦ä»‹ç»ï¼šä»€ä¹ˆæ˜¯ Skillï¼Ÿå¦‚ä½•åˆ›å»º Skillã€‚</strong></p>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œå¯ä»¥è‡ªå·±"æ•™" AI ä¸€é¡¹æ–°æŠ€èƒ½ï¼Ÿ</p>
<p>ä¸æ˜¯è°ƒå‚æ•°ï¼Œä¸æ˜¯å†™ä»£ç è®­ç»ƒæ¨¡å‹ï¼Œå°±æ˜¯ç®€å•åœ°å‘Šè¯‰å®ƒï¼š"ä»¥åé‡åˆ°è¿™ç§æƒ…å†µï¼Œä½ å°±è¿™ä¹ˆåšã€‚"</p>
<p>è¿™ç¯‡æ–‡ç« æ•™ä½ ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§ 5 åˆ†é’Ÿæ‰‹å†™é€Ÿæˆï¼Œå¦ä¸€ç§ç”¨å®˜æ–¹å·¥å…·æ›´ä¸“ä¸šã€‚å­¦å®Œä¹‹åï¼Œä½ å°±èƒ½è®© Claude Code æŒ‰ä½ çš„è§„åˆ™å¹²æ´»äº†ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Skillsï¼Ÿ</h2>
<p>è¯´ç™½äº†ï¼ŒSkills å°±æ˜¯ç»™ AI é…çš„ä¸€æœ¬"ä¸“å±æ”»ç•¥æ‰‹å†Œ"ã€‚</p>
<p>ä½ å¯èƒ½é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæ¯æ¬¡è®© Claude Code å¸®ä½ å†™ä»£ç ï¼Œéƒ½è¦é‡å¤è¯´ä¸€é"ç”¨ TypeScript"ã€"åŠ ä¸Šç±»å‹æ³¨é‡Š"ã€"éµå¾ªè¿™ä¸ªç›®å½•ç»“æ„"â€¦â€¦</p>
<p>çƒ¦ä¸çƒ¦ï¼Ÿ</p>
<p>æœ‰äº† Skillsï¼Œè¿™äº›è¯åªç”¨è¯´ä¸€æ¬¡ã€‚ä½ æŠŠè§„åˆ™å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ŒClaude Code ä»¥åå°±è‡ªåŠ¨æŒ‰è¿™ä¸ªæ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07aee88a5fe846e1baeddcdea26e6113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6KGhRXZl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769264706&amp;x-signature=aSypUFLCvoKXoeTccE4SuFfMUUU%3D" alt="Image" loading="lazy"/></p>
<p>ä»æŠ€æœ¯ä¸Šè¯´ï¼Œä¸€ä¸ª Skill å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾ç€æŒ‡ä»¤å’Œèµ„æº[^1]ã€‚Claude Code ä¼šæŒ‰éœ€åŠ è½½è¿™äº›æ–‡ä»¶ï¼Œç”¨å®Œå°±é‡Šæ”¾ï¼Œæ‰€ä»¥å³ä½¿ä½ è£…äº†å‡ åä¸ª Skillsï¼Œä¹Ÿä¸ä¼šæ‹–æ…¢é€Ÿåº¦ã€‚</p>
<p>å®˜æ–¹çš„è¯´æ³•æ˜¯ï¼šæ¯ä¸ª Skill å¯åŠ¨æ—¶åªå ç”¨ 30-50 ä¸ª tokens[^2]ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ–¹æ³•ä¸€ï¼š5 åˆ†é’Ÿæ‰‹å†™ä½ çš„ç¬¬ä¸€ä¸ª Skill</h2>
<p>æ¥ï¼Œåšä¸€ä¸ª"æ¯æ—¥æ€»ç»“"Skillâ€”â€”ä½ è¯´ä¸€å¥"å¸®æˆ‘æ€»ç»“ä»Šå¤©çš„å·¥ä½œ"ï¼Œå®ƒå°±è‡ªåŠ¨ç”Ÿæˆæ ¼å¼åŒ–çš„æ—¥æŠ¥ã€‚</p>
<h3 data-id="heading-2">Step 1: åˆ›å»ºæ–‡ä»¶å¤¹</h3>
<p>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºè¿™æ ·ä¸€ä¸ªç»“æ„ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.claude</span>/
â””â”€â”€ skills/
Â  Â  â””â”€â”€ daily-<span class="hljs-selector-tag">summary</span>/
Â  Â  Â  Â  â””â”€â”€ SKILL<span class="hljs-selector-class">.md</span>
</code></pre>
<p>å¯¹ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸€ä¸ª Markdown æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-3">Step 2: å†™ SKILL.md</h3>
<p>æ‰“å¼€Â <code>SKILL.md</code>ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">daily-summary</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">å½“ç”¨æˆ·è¦æ±‚æ€»ç»“ä»Šå¤©çš„å·¥ä½œã€ç”Ÿæˆæ—¥æŠ¥ã€å›é¡¾è¿›å±•æ—¶ä½¿ç”¨ã€‚è‡ªåŠ¨æ•´ç†</span> <span class="hljs-string">git</span> <span class="hljs-string">commits</span> <span class="hljs-string">å’Œå®Œæˆçš„ä»»åŠ¡ï¼Œç”Ÿæˆæ ¼å¼åŒ–çš„å·¥ä½œæ€»ç»“ã€‚</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># æ¯æ—¥å·¥ä½œæ€»ç»“</span>

<span class="hljs-comment">## è§¦å‘æ¡ä»¶</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨æˆ·è¯´"æ€»ç»“ä»Šå¤©çš„å·¥ä½œ"</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨æˆ·è¯´"ç”Ÿæˆæ—¥æŠ¥"</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç”¨æˆ·è¯´"ä»Šå¤©åšäº†ä»€ä¹ˆ"</span>

<span class="hljs-comment">## æ‰§è¡Œæ­¥éª¤</span>
<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">è¯»å–ä»Šå¤©çš„</span> <span class="hljs-string">git</span> <span class="hljs-string">commitsï¼ˆå¦‚æœæœ‰ï¼‰</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">æ•´ç†å®Œæˆçš„ä»»åŠ¡</span>
<span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡ºï¼š</span>

<span class="hljs-comment">## è¾“å‡ºæ ¼å¼</span>

<span class="hljs-comment">### ğŸ“… [æ—¥æœŸ] å·¥ä½œæ€»ç»“</span>

<span class="hljs-string">**å®Œæˆäº‹é¡¹**</span>
<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">äº‹é¡¹1</span>
<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">äº‹é¡¹2</span>

<span class="hljs-string">**æ˜æ—¥è®¡åˆ’**</span>
<span class="hljs-bullet">-</span> [ ] <span class="hljs-string">è®¡åˆ’1</span>

<span class="hljs-string">**å¤‡æ³¨**</span>
<span class="hljs-string">ï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<p>æ³¨æ„ä¸¤ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li>YAML å¤´éƒ¨ï¼šname å’Œ description æ˜¯å¿…é¡»çš„ã€‚description ç‰¹åˆ«é‡è¦ï¼Œå®ƒå‘Šè¯‰ Claude ä»€ä¹ˆæ—¶å€™è¯¥ç”¨è¿™ä¸ª Skill[^3]ã€‚</li>
<li>æ­£æ–‡æŒ‡ä»¤ï¼šç”¨ Markdown å†™ä½ æƒ³è®© AI åšä»€ä¹ˆã€‚è¶Šæ¸…æ™°è¶Šå¥½ï¼Œä½†ä¸ç”¨å¤ªå•°å—¦â€”â€”å®˜æ–¹è¯´äº†ï¼Œ"Claude is already very smart"[^4]ã€‚</li>
</ol>
<h3 data-id="heading-4">Step 3: æµ‹è¯•æ•ˆæœ</h3>
<p>ä¿å­˜æ–‡ä»¶åï¼Œåœ¨ Claude Code é‡Œè¯´ä¸€å¥ï¼š"å¸®æˆ‘æ€»ç»“ä»Šå¤©çš„å·¥ä½œ"ã€‚</p>
<p>å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šçœ‹åˆ°å®ƒæŒ‰ç…§ä½ å®šä¹‰çš„æ ¼å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆæ—¥æŠ¥äº†ã€‚</p>
<p>æœ‰æ—¶å€™å¦‚æœè‡ªåŠ¨åˆ¤å®šæ²¡å‘½ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Â <code>/daily-summary</code>Â æ‰‹åŠ¨è§¦å‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/557fb9c313a34b3090134816e58316b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6KGhRXZl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769264706&amp;x-signature=RBNSIlGJT%2F%2FHV46DJ1ghIsUccG4%3D" alt="Image" loading="lazy"/></p>
<p><strong>å°è´´å£«</strong>ï¼šä» v2.1.1 å¼€å§‹ï¼ŒClaude Code æ”¯æŒçƒ­é‡è½½[^5]ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æ”¹äº† SKILL.md ä¹‹åï¼Œä¸ç”¨é‡å¯ï¼Œé©¬ä¸Šå°±èƒ½ç”Ÿæ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-5">æ–¹æ³•äºŒï¼šç”¨å®˜æ–¹ Skill Creator</h2>
<p>æ‰‹å†™å¾ˆå¿«ï¼Œä½†æœ‰ä¸ªé—®é¢˜ï¼šå¦‚æœä½ çš„ Skill æ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦è„šæœ¬ã€èµ„æºæ–‡ä»¶ã€ç”šè‡³è¦åˆ†äº«ç»™å›¢é˜Ÿå‘¢ï¼Ÿ</p>
<p>è¿™æ—¶å€™ï¼Œå®˜æ–¹çš„ Skill Creator å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/259205824d9e4f54949fded98b51d7c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6KGhRXZl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769264706&amp;x-signature=0Hih9B2RWzZJIfNW9jXXGd6VMMo%3D" alt="Image" loading="lazy"/></p>
<p>ç®€å•åœºæ™¯ç”¨æ‰‹å†™ï¼Œå¤æ‚åœºæ™¯æˆ–è€…è¦åˆ†äº«çš„ï¼Œç”¨ skill-creatorã€‚</p>
<hr/>
<h2 data-id="heading-6">Skill Creator å®‰è£…ä¸ä½¿ç”¨</h2>
<h3 data-id="heading-7">å®‰è£… Skill Creator</h3>
<p>Skill Creator åœ¨ Anthropic å®˜æ–¹ä»“åº“ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a> ä¸­ å®‰è£…å¾ˆç®€å•ï¼š</p>
<p>åœ¨ Claude Code ä¸­è¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1ï¼šå°†è¯¥ä»“åº“æ³¨å†Œä¸º Claude Code æ’ä»¶å¸‚åœº</span>
/plugin marketplace add anthropics/skills

<span class="hljs-comment"># 2ï¼šå®‰è£…ç‰¹å®š skill</span>
<span class="hljs-comment"># åŒ…æ‹¬å¾ˆå¤šæ–‡æ¡£å¤„ç†ç±»çš„ skill</span>
/plugin install document-skills@anthropic-agent-skills
<span class="hljs-comment"># è¿™é‡Œå°±åŒ…æ‹¬äº†æˆ‘ä»¬è¯´çš„ skill-creator</span>
/plugin install example-skills@anthropic-agent-skills
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œä½ å°±å¯ä»¥åœ¨ Claude Code é‡Œè¯´"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæ¯æ—¥å·¥ä½œæ€»ç»“ Skill"ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨ Skill Creator æ¥å¼•å¯¼ä½ ã€‚</p>
<h3 data-id="heading-8">å®˜æ–¹ Skills é€Ÿè§ˆ</h3>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œå®˜æ–¹ä»“åº“é‡Œæœ‰ 16 ä¸ªç¤ºä¾‹ Skills[^6]ï¼Œæ¶µç›–å„ç§åœºæ™¯ï¼š</p>
<p>ç±»åˆ«</p>
<p>Skills</p>
<p>æ–‡æ¡£å¤„ç†</p>
<p>docx, pdf, pptx, xlsx</p>
<p>è®¾è®¡åˆ›ä½œ</p>
<p>algorithmic-art, canvas-design, frontend-design</p>
<p>å¼€å‘å·¥å…·</p>
<p>mcp-builder, webapp-testing</p>
<p>åä½œæ²Ÿé€š</p>
<p>doc-coauthoring, internal-comms</p>
<p>è¿™äº›ä¸å±•å¼€è®²äº†ï¼Œä½†å¼ºçƒˆå»ºè®®ä½ å»ç¿»ç¿»çœ‹â€”â€”å­¦ä¹ åˆ«äººæ€ä¹ˆå†™ Skillï¼Œæ¯”çœ‹æ–‡æ¡£æœ‰ç”¨å¤šäº†ã€‚</p>
<h3 data-id="heading-9">ç”¨ Skill Creator åˆ›å»º Skill</h3>
<p>ç°åœ¨ç”¨ Skill Creator é‡æ–°åˆ›å»ºé‚£ä¸ª"æ¯æ—¥æ€»ç»“"Skillã€‚</p>
<p>åœ¨ Claude Code é‡Œè¯´ï¼š</p>
<blockquote>
<p>"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªæ–°çš„ Skillï¼Œç”¨äºç”Ÿæˆæ¯æ—¥å·¥ä½œæ€»ç»“"</p>
</blockquote>
<p>å½“ç„¶æœ€ç¨³å¦¥çš„æ–¹å¼è¿˜æ˜¯æ‰‹åŠ¨è§¦å‘ï¼ˆæˆ‘æ¯”è¾ƒå–œæ¬¢è¿™ç§ç¡®å®šæ€§ï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/378d4ee4c0294d41a68f134c11fbb49d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6KGhRXZl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769264706&amp;x-signature=cph0HA%2B79Owjm%2Fb6NzF8Zp%2Fhg%2BY%3D" alt="Image" loading="lazy"/></p>
<p>Skill Creator ä¼šå¼•å¯¼ä½ å®Œæˆä»¥ä¸‹æ­¥éª¤[^7]ï¼š</p>
<ol>
<li>ç†è§£éœ€æ±‚ï¼šå®ƒä¼šé—®ä½ å‡ ä¸ªé—®é¢˜ï¼Œç¡®è®¤ Skill çš„ç”¨é€”</li>
<li>è§„åˆ’ç»“æ„ï¼šè‡ªåŠ¨å†³å®šéœ€è¦å“ªäº›æ–‡ä»¶</li>
<li>åˆå§‹åŒ–ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å’ŒåŸºç¡€æ–‡ä»¶</li>
<li>ç¼–è¾‘ï¼šä½ å¯ä»¥è¿›ä¸€æ­¥è°ƒæ•´å†…å®¹</li>
<li>æ‰“åŒ…ï¼šç”Ÿæˆå¯åˆ†äº«çš„ Skill åŒ…</li>
<li>è¿­ä»£ï¼šæ ¹æ®ä½¿ç”¨åé¦ˆæŒç»­ä¼˜åŒ–</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11772f1837c94526bd6eb59446eee6a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6KGhRXZl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769264706&amp;x-signature=sQ9EwM5o7%2Bkm46BF2LYRjdnG3xo%3D" alt="Image" loading="lazy"/></p>
<p>ç”Ÿæˆçš„ç»“æ„å¯èƒ½æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-python" lang="python">daily-summary/
â”œâ”€â”€ SKILL.md Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æ ¸å¿ƒæŒ‡ä»¤</span>
â”œâ”€â”€ scripts/
â”‚ Â  â””â”€â”€ get_commits.py Â  Â <span class="hljs-comment"># è·å– git commits çš„è„šæœ¬</span>
â””â”€â”€ references/
Â  Â  â””â”€â”€ <span class="hljs-built_in">format</span>.md Â  Â  Â  Â  <span class="hljs-comment"># è¾“å‡ºæ ¼å¼å‚è€ƒ</span>
</code></pre>
<p>æ¯”æ‰‹å†™çš„ç‰ˆæœ¬æ›´å®Œæ•´ã€æ›´è§„èŒƒã€‚è€Œä¸”å› ä¸ºéµå¾ªå®˜æ–¹æ ‡å‡†ï¼Œä»¥ååˆ†äº«ç»™å›¢é˜Ÿæˆ–è€…å‘å¸ƒåˆ°ç¤¾åŒºå¸‚åœºéƒ½å¾ˆæ–¹ä¾¿ã€‚</p>
<hr/>
<h2 data-id="heading-10">è¿›é˜¶æç¤º</h2>
<p>å†åˆ†äº«å‡ ä¸ªæŠ€å·§ï¼š</p>
<p><strong>çƒ­é‡è½½</strong>ï¼šæ”¹å®Œ SKILL.md ç«‹å³ç”Ÿæ•ˆï¼Œä¸ç”¨é‡å¯ Claude Codeã€‚è¿™ä¸ªç‰¹æ€§ä» v2.1.1 å¼€å§‹æ”¯æŒ[^5]ã€‚</p>
<p><strong>ç¤¾åŒºå¸‚åœº</strong>ï¼šå·²ç»æœ‰ç¤¾åŒº Skills å¸‚åœºäº†[^8]ã€‚åˆ«äººåˆ›å»ºçš„å¥½ Skill å¯ä»¥ç›´æ¥ç”¨ï¼Œä¸ç”¨è‡ªå·±é€ è½®å­ã€‚</p>
<p><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šSkill ä¸æ˜¯ä¸€æ¬¡æ€§çš„ã€‚ç”¨ç€ç”¨ç€è§‰å¾—ä¸æ»¡æ„ï¼Œéšæ—¶æ”¹ã€‚AI ä¼šè¶Šæ¥è¶Šæ‡‚ä½ çš„éœ€æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>ä¸¤ç§æ–¹æ³•ï¼Œå„æœ‰ä¼˜åŠ£ï¼š</p>
<ul>
<li>æ‰‹å†™ï¼š5 åˆ†é’Ÿé€Ÿæˆï¼Œé€‚åˆç®€å•åœºæ™¯ï¼Œå¸®ä½ ç†è§£åŸç†</li>
<li>Skill Creatorï¼šæ›´è§„èŒƒæ›´å®Œæ•´ï¼Œé€‚åˆå¤æ‚åœºæ™¯å’Œå›¢é˜Ÿåˆ†äº«</li>
</ul>
<p>Anthropic çš„äººè¯´è¿‡ä¸€å¥è¯ï¼Œæˆ‘è§‰å¾—å¾ˆæœ‰é“ç†[^9]ï¼š</p>
<blockquote>
<p>"Skills &gt; Agents"</p>
<p>æ¯”èµ·ä¸€æ¬¡æ€§çš„ Agentï¼ŒæŒç»­ç§¯ç´¯çš„ Skills æ›´æœ‰ä»·å€¼ã€‚</p>
</blockquote>
<p>ä½ æ„å»ºçš„ Skills è¶Šå¤šï¼ŒClaude Code å°±è¶Šæ‡‚ä½ ã€è¶Šæœ‰ç”¨ã€‚</p>
<p>æ‰€ä»¥ï¼Œåˆ«å…‰çœ‹ï¼Œå»åŠ¨æ‰‹è¯•è¯•å§ã€‚</p>
<p>åˆ›å»ºå±äºä½ çš„ç¬¬ä¸€ä¸ª Skillï¼Œå°±ä»ä»Šå¤©å¼€å§‹ã€‚</p>
<hr/>
<h2 data-id="heading-12">å‚è€ƒèµ„æ–™</h2>
<p>[1]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">Anthropic. "Skills Repository."</a> - Skills æ˜¯åŒ…å«æŒ‡ä»¤å’Œä»£ç çš„æ–‡ä»¶å¤¹</p>
<p>[2]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FtengyanAI%2Fstatus%2F1985341993036439736" target="_blank" title="https://x.com/tengyanAI/status/1985341993036439736" ref="nofollow noopener noreferrer">Teng Yan (@tengyanAI). "Skills æŠ€æœ¯æœ¬è´¨."</a> - æ¯ä¸ª Skill çº¦ 30-50 tokens</p>
<p>[3]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fskill-creator%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/skill-creator/SKILL.md" ref="nofollow noopener noreferrer">Anthropic. "skill-creator SKILL.md."</a> - description æ˜¯ä¸»è¦è§¦å‘æœºåˆ¶</p>
<p>[4]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fskill-creator%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/skill-creator/SKILL.md" ref="nofollow noopener noreferrer">Anthropic. "skill-creator."</a> - "Claude is already very smart"</p>
<p>[5]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fericwang42%2Fstatus%2F2009097885988893132" target="_blank" title="https://x.com/ericwang42/status/2009097885988893132" ref="nofollow noopener noreferrer">Eric Wang (@ericwang42). "v2.1.1 æ›´æ–°."</a> - çƒ­é‡è½½ Skills æ”¯æŒ</p>
<p>[6]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">Anthropic. "Skills Repository."</a> - 16 ä¸ªå®˜æ–¹ç¤ºä¾‹ Skills</p>
<p>[7]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills%2Fblob%2Fmain%2Fskills%2Fskill-creator%2FSKILL.md" target="_blank" title="https://github.com/anthropics/skills/blob/main/skills/skill-creator/SKILL.md" ref="nofollow noopener noreferrer">Anthropic. "skill-creator."</a> - 6 æ­¥åˆ›å»ºæµç¨‹</p>
<p>[8]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FtengyanAI%2Fstatus%2F1985341993036439736" target="_blank" title="https://x.com/tengyanAI/status/1985341993036439736" ref="nofollow noopener noreferrer">Teng Yan (@tengyanAI). "Skills å¸‚åœº."</a> - ç¤¾åŒºå¸‚åœºå·²ä¸Šçº¿</p>
<p>[9]: <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fomarsar0%2Fstatus%2F1998383154181361813" target="_blank" title="https://x.com/omarsar0/status/1998383154181361813" ref="nofollow noopener noreferrer">elvis (@omarsar0). "Skills &gt; Agents."</a> - Anthropic æ¼”è®²æ ¸å¿ƒè§‚ç‚¹</p>
<hr/>
<p>ğŸ’¬ ä½ å¹³æ—¶æ˜¯æ€ä¹ˆåˆ›å»º Skill çš„ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ–¹æ³•ï¼</p>
<p>ğŸ‘ è§‰å¾—æœ‰ç”¨çš„è¯ï¼Œè®°å¾—ç‚¹èµæ”¶è—ï¼Œè®©æ›´å¤šäººçœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼</p>
<p><strong>é…å›¾è¯´æ˜</strong>ï¼šæœ¬æ–‡é…å›¾(é™¤æˆªå›¾å¤–ï¼‰ç”± Nano Banana Pro ç”Ÿæˆ</p>
<hr/>
<ul>
<li>#å…¬ä¼—å·ï¼šé˜¿è¡¡çš„AIæ—¥å¸¸</li>
<li>#å°çº¢ä¹¦ï¼šé˜¿è¡¡çš„AIæ—¥å¸¸</li>
<li>#CSDNï¼šDebugEve</li>
<li>#æ˜é‡‘ï¼šé˜¿è¡¡Eve</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™Claude Code/Cursoræˆ´ä¸Šâ€œç´§ç®å’’â€ï¼šSuperpowerså¦‚ä½•è®©AIç¼–ç¨‹å˜å¾—å¯é å¯æ§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595901379014819850</link>    <guid>https://juejin.cn/post/7595901379014819850</guid>    <pubDate>2026-01-17T14:46:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379014819850" data-draft-id="7595901379014787082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™Claude Code/Cursoræˆ´ä¸Šâ€œç´§ç®å’’â€ï¼šSuperpowerså¦‚ä½•è®©AIç¼–ç¨‹å˜å¾—å¯é å¯æ§ï¼Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-17T14:46:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4091714106833577"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™Claude Code/Cursoræˆ´ä¸Šâ€œç´§ç®å’’â€ï¼šSuperpowerså¦‚ä½•è®©AIç¼–ç¨‹å˜å¾—å¯é å¯æ§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4091714106833577/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§å‚æŠ€æœ¯æ€»ç›‘ä¸‹æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:46:36.000Z" title="Sat Jan 17 2026 14:46:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Superpowers é¡¹ç›®æ·±åº¦æŠ€æœ¯åˆ†æï¼šAI ç¼–ç ä»£ç†çš„ç³»ç»ŸåŒ–å·¥ç¨‹æ¡†æ¶</h2>
<h3 data-id="heading-1">1. æ•´ä½“ä»‹ç»</h3>
<h4 data-id="heading-2">1.1 é¡¹ç›®æ¦‚è¦</h4>
<p><strong>é¡¹ç›®åç§°</strong>ï¼š<code>obra/superpowers</code><br/>
<strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fobra%2Fsuperpowers" target="_blank" title="https://github.com/obra/superpowers" ref="nofollow noopener noreferrer">github.com/obra/superpâ€¦</a><br/>
<strong>é¡¹ç›®æ€§è´¨</strong>ï¼šä¸€ä¸ªä¸ºAIç¼–ç ä»£ç†ï¼ˆClaude Code, Codex, OpenCodeï¼‰æ„å»ºçš„ã€åŸºäºæ¨¡å—åŒ–â€œæŠ€èƒ½â€çš„è½¯ä»¶å¼€å‘å·¥ä½œæµå¢å¼ºç³»ç»Ÿã€‚å®ƒé€šè¿‡å¼ºåˆ¶æ€§çš„æµç¨‹å’Œè§„èŒƒï¼Œå°†AIçš„ä»£ç ç”Ÿæˆèƒ½åŠ›å¯¼å‘ç³»ç»ŸåŒ–çš„è½¯ä»¶å·¥ç¨‹å®è·µã€‚</p>
<p><em>ï¼ˆæ³¨ï¼šæœ¬æ–‡åŸºäºæä¾›çš„é¡¹ç›®ä»£ç è¿›è¡Œåˆ†æï¼Œæœªå®æ—¶æŸ¥è¯¢GitHub starä¸forkæ•°æ®ï¼Œæ•…ä¸ä½œå…·ä½“æ•°å­—è¯´æ˜ï¼‰</em></p>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒåŠŸèƒ½ä¸ä»·å€¼ä¸»å¼ </h4>
<p>Superpowers çš„æ ¸å¿ƒåŠŸèƒ½ä¸æ˜¯æä¾›æ–°çš„ä»£ç åº“æˆ–ç®—æ³•ï¼Œè€Œæ˜¯å®šä¹‰å¹¶å¼ºåˆ¶æ‰§è¡Œä¸€å¥—<strong>AIè¾…åŠ©å¼€å‘çš„å·¥ä½œæµ</strong>ã€‚å…¶æ ¸å¿ƒäº¤äº’æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ¸…æ™°å±•ç¤ºäº†ä»éœ€æ±‚æ¾„æ¸…åˆ°æœ€ç»ˆé›†æˆçš„è‡ªåŠ¨åŒ–è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as ç”¨æˆ·/å¼€å‘è€…
    participant M as ä¸»AIä»£ç† (Main Agent)
    participant S as Superpowers æŠ€èƒ½ç³»ç»Ÿ
    participant SA as å­ä»£ç† (Sub-agent)
    participant G as Git/æ–‡ä»¶ç³»ç»Ÿ

    U-&gt;&gt;M: æå‡ºä¸€ä¸ªå¼€å‘æƒ³æ³•ï¼ˆå¦‚â€œåŠ ä¸ªç™»å½•åŠŸèƒ½â€ï¼‰
    M-&gt;&gt;S: è§¦å‘ `brainstorming` æŠ€èƒ½
    S-&gt;&gt;U: è¿›è¡Œå¤šè½®é—®ç­”ï¼Œæ¾„æ¸…éœ€æ±‚
    U-&gt;&gt;S: ç¡®è®¤åˆ†æ®µè®¾è®¡
    S-&gt;&gt;G: ä¿å­˜è®¾è®¡æ–‡æ¡£åˆ° `docs/plans/`
    
    M-&gt;&gt;S: è§¦å‘ `using-git-worktrees` æŠ€èƒ½
    S-&gt;&gt;G: åˆ›å»ºç‹¬ç«‹Gitå·¥ä½œæ ‘åˆ†æ”¯
    
    M-&gt;&gt;S: è§¦å‘ `writing-plans` æŠ€èƒ½
    S-&gt;&gt;M: ç”Ÿæˆè¯¦ç»†åˆ°åˆ†é’Ÿçº§çš„å®æ–½è®¡åˆ’
    
    loop å¯¹äºè®¡åˆ’ä¸­çš„æ¯ä¸ªä»»åŠ¡
        M-&gt;&gt;S: è§¦å‘ `subagent-driven-development`
        S-&gt;&gt;SA: æ´¾å‘ä»»åŠ¡ç»™ä¸€ä¸ªå…¨æ–°å­ä»£ç†
        SA-&gt;&gt;SA: æ‰§è¡Œä»»åŠ¡ï¼ˆç¼–ç ï¼‰
        SA-&gt;&gt;SA: è‡ªæˆ‘å®¡æŸ¥
        S-&gt;&gt;SA: å¯åŠ¨ä¸¤é˜¶æ®µå®¡æŸ¥ï¼ˆè§„æ ¼ã€è´¨é‡ï¼‰
        alt å®¡æŸ¥å‘ç°é—®é¢˜
            SA-&gt;&gt;SA: è¿›å…¥å®¡æŸ¥å¾ªç¯ä¿®æ­£
        end
        SA-&gt;&gt;G: æäº¤ä»£ç å˜æ›´
    end
    
    M-&gt;&gt;S: è§¦å‘ `requesting-code-review` æŠ€èƒ½
    S-&gt;&gt;M: æŠ¥å‘Šå®¡æŸ¥é—®é¢˜ï¼ˆåˆ†ä¸¥é‡çº§åˆ«ï¼‰
    
    M-&gt;&gt;S: è§¦å‘ `finishing-a-development-branch` æŠ€èƒ½
    S-&gt;&gt;U: æä¾›é€‰é¡¹ï¼ˆåˆå¹¶/PR/ä¿ç•™/ä¸¢å¼ƒï¼‰
    U-&gt;&gt;G: é€‰æ‹©å¹¶å®Œæˆåˆ†æ”¯æ“ä½œ
</code></pre>
<p><strong>é¢ä¸´çš„é—®é¢˜ä¸ç›®æ ‡äººç¾¤</strong>ï¼š</p>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šå½“å‰AIç¼–ç ä»£ç†ï¼ˆå¦‚Claude Codeï¼‰åœ¨å“åº”å¼€æ”¾å¼ç¼–ç¨‹è¯·æ±‚æ—¶ï¼Œè¡Œä¸ºå…·æœ‰ä¸ç¡®å®šæ€§ã€‚å®ƒå¯èƒ½ç›´æ¥ç”Ÿæˆæœªç»æ·±æ€ç†Ÿè™‘çš„ä»£ç ã€è·³è¿‡æµ‹è¯•ã€å¿½è§†æ¶æ„ä¸€è‡´æ€§æˆ–äº§ç”Ÿä¸å¿…è¦çš„å¤æ‚æ€§ï¼ˆè¿åYAGNIåŸåˆ™ï¼‰ã€‚</li>
<li><strong>ç›®æ ‡äººç¾¤</strong>ï¼šä¾èµ–AIä»£ç†è¿›è¡Œä¸­å¤§å‹æˆ–ç”Ÿäº§çº§é¡¹ç›®å¼€å‘çš„è½¯ä»¶å·¥ç¨‹å¸ˆã€æŠ€æœ¯å›¢é˜Ÿé¢†å¯¼è€…ã€‚ä»–ä»¬éœ€è¦AIçš„è¾…åŠ©æ•ˆç‡ï¼Œä½†å¿…é¡»ç¡®ä¿äº§å‡ºä»£ç çš„<strong>å¯ç»´æŠ¤æ€§ã€å¯é æ€§ä¸å·¥ç¨‹è§„èŒƒæ€§</strong>ã€‚</li>
<li><strong>å¯¹åº”åœºæ™¯</strong>ï¼šåŠŸèƒ½å¼€å‘ã€æ¨¡å—é‡æ„ã€é—ç•™ç³»ç»Ÿä¿®æ”¹ç­‰éœ€è¦ä¸¥æ ¼éµå¾ªæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰ã€ä»£ç å®¡æŸ¥å’Œç‰ˆæœ¬æ§åˆ¶è§„èŒƒçš„é¡¹ç›®ä»»åŠ¡ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ³•ä¸æ¼”è¿›</strong>ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿ/åŸå§‹æ–¹å¼</strong>ï¼šå¼€å‘è€…ç›´æ¥å‘AIä»£ç†å‘å‡ºâ€œå†™ä¸€ä¸ªXåŠŸèƒ½â€çš„æŒ‡ä»¤ã€‚AIç›´æ¥ç”Ÿæˆä»£ç å—ï¼Œè¿‡ç¨‹æ˜¯é»‘ç›’çš„ï¼Œç¼ºä¹éœ€æ±‚æ¾„æ¸…ã€è®¾è®¡è¯„å®¡ã€è®¡åˆ’åˆ¶å®šå’Œç³»ç»Ÿæ€§æµ‹è¯•éªŒè¯ç¯èŠ‚ã€‚</li>
<li><strong>Superpowers æ–°æ–¹å¼</strong>ï¼šåœ¨AIä»£ç†çš„åˆå§‹æŒ‡ä»¤ä¸­æ¤å…¥ä¸€å¥—â€œæŠ€èƒ½â€ç³»ç»Ÿã€‚å½“æ£€æµ‹åˆ°å¼€å‘æ„å›¾æ—¶ï¼Œä»£ç†<strong>å¿…é¡»</strong>è§¦å‘ç›¸åº”æŠ€èƒ½ï¼Œå¼•å¯¼ç”¨æˆ·èµ°è¿‡ä¸€ä¸ªåŒ…å«â€œéœ€æ±‚æ¾„æ¸… â†’ è®¾è®¡è¯„å®¡ â†’ è®¡åˆ’åˆ¶å®š â†’ å­ä»£ç†æ‰§è¡Œä¸å®¡æŸ¥ â†’ é›†æˆâ€çš„å®Œæ•´æµç¨‹ã€‚è¿™æœ¬è´¨ä¸Šæ˜¯å°†äººç±»è½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µï¼ˆå¦‚TDDã€ä»£ç å®¡æŸ¥ã€Gitå·¥ä½œæµï¼‰è½¬åŒ–ä¸ºAIå¯ç†è§£å’Œæ‰§è¡Œçš„å¼ºåˆ¶æ€§åè®®ã€‚</li>
</ul>
<p><strong>å•†ä¸šä»·å€¼ä¼°ç®—é€»è¾‘</strong>ï¼š
ä»·å€¼å¯ä» <strong>â€œé™ä½çš„ä»£ç è¿”å·¥æˆæœ¬â€</strong> å’Œ <strong>â€œæå‡çš„å›¢é˜Ÿå¼€å‘æ•ˆç‡â€</strong> ä¸¤ä¸ªç»´åº¦è¿›è¡Œä¿å®ˆä¼°ç®—ã€‚</p>
<ol>
<li><strong>ä»£ç è¿”å·¥æˆæœ¬</strong>ï¼šå‡è®¾ä¸€ä¸ª10äººå›¢é˜Ÿï¼Œå¹³å‡æ¯äººæœˆè–ªä¸º<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>10</mn><mo separator="true">,</mo><mn>000</mn><mtext>ï¼Œæ¯æœˆæœ‰</mtext><mn>20</mn></mrow><annotation encoding="application/x-tex">10,000ï¼Œæ¯æœˆæœ‰20%çš„æ—¶é—´èŠ±è´¹åœ¨ä¿®å¤AIç”Ÿæˆä»£ç çš„ç¼ºé™·ã€ä¸ä¸€è‡´æ€§å’Œæ¶æ„é—®é¢˜ä¸Šã€‚Superpowersé€šè¿‡å¼ºåˆ¶æµç¨‹å¯å°†æ­¤é—®é¢˜å‡å°‘çº¦30%ã€‚åˆ™æœˆèŠ‚çœæˆæœ¬ä¸ºï¼š`10äºº * </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">000</span><span class="mord cjk_fallback">ï¼Œæ¯æœˆæœ‰</span><span class="mord">20</span></span></span></span></span>10,000 * 20% * 30% = $6,000`ã€‚</li>
<li><strong>æ•ˆç‡æå‡</strong>ï¼šé€šè¿‡è‡ªåŠ¨åŒ–çš„å­ä»£ç†é©±åŠ¨å¼€å‘ã€ä»£ç å®¡æŸ¥å’ŒGitå·¥ä½œæµç®¡ç†ï¼Œå°†å¼€å‘è€…ä»ç¹ççš„æµç¨‹ç®¡æ§ä¸­è§£æ”¾å‡ºæ¥ã€‚ä¿å®ˆä¼°è®¡æå‡ä¸ªä½“æ•ˆç‡5%ã€‚åˆ™æœˆä»·å€¼ä¸ºï¼š<code>10äºº * $10,000 * 5% = $5,000</code>ã€‚</li>
<li><strong>ç»¼åˆæœˆåº¦ä»·å€¼</strong>ï¼šçº¦ä¸º <strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>11</mn><mo separator="true">,</mo><mn>000</mn><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ã€‚å¹´åŒ–ä»·å€¼çº¦</mtext><mo>âˆ—</mo><mo>âˆ—</mo></mrow><annotation encoding="application/x-tex">11,000**ã€‚å¹´åŒ–ä»·å€¼çº¦ **</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"/><span class="mord">11</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">000</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ã€‚å¹´åŒ–ä»·å€¼çº¦</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.4653em;"/><span class="mord">âˆ—</span></span></span></span></span>132,000</strong>ã€‚è¿™å°šæœªè®¡ç®—å› ä»£ç è´¨é‡æå‡å¸¦æ¥çš„é•¿æœŸç»´æŠ¤æˆæœ¬é™ä½å’Œç³»ç»Ÿç¨³å®šæ€§æ”¶ç›Šã€‚é¡¹ç›®çš„å®ç°æˆæœ¬ä¸»è¦ä¸ºå¼€å‘ä¸ç»´æŠ¤æ­¤ç±»æ¡†æ¶çš„äººåŠ›æŠ•å…¥ï¼Œå…¶æŠ•èµ„å›æŠ¥ç‡ï¼ˆROIï¼‰åœ¨è§„æ¨¡åŒ–ä½¿ç”¨çš„å›¢é˜Ÿä¸­è¾ƒä¸ºæ˜¾è‘—ã€‚</li>
</ol>
<h3 data-id="heading-4">2. è¯¦ç»†åŠŸèƒ½æ‹†è§£ï¼šäº§å“ä¸æŠ€æœ¯çš„åŒé‡è§†è§’</h3>
<h4 data-id="heading-5">2.1 äº§å“è§†è§’ï¼šç»“æ„åŒ–å¼€å‘æµæ°´çº¿</h4>
<p>Superpowers ä½œä¸ºä¸€ä¸ªâ€œäº§å“â€ï¼Œå…¶æ ¸å¿ƒæ˜¯å°è£…äº†è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸï¼ˆSDLCï¼‰å…³é”®é˜¶æ®µçš„ä¸€å¥—è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼š</p>
<ul>
<li><strong>éœ€æ±‚å…¥å£ç®¡ç† (<code>brainstorming</code>)</strong>ï¼šæ›¿ä»£äº†ç›´æ¥ç¼–ç çš„å…¥å£ï¼Œå˜ä¸ºSocraticï¼ˆè‹æ ¼æ‹‰åº•å¼ï¼‰å¯¹è¯ï¼Œç¡®ä¿ç›®æ ‡ä¸€è‡´ã€‚</li>
<li><strong>å¼€å‘ç¯å¢ƒæ²™ç›’ (<code>using-git-worktrees</code>)</strong>ï¼šè‡ªåŠ¨åˆ›å»ºéš”ç¦»çš„ç¼–ç ç¯å¢ƒï¼Œé˜²æ­¢æ±¡æŸ“ä¸»åˆ†æ”¯ã€‚</li>
<li><strong>ä»»åŠ¡åˆ†è§£å¼•æ“ (<code>writing-plans</code>)</strong>ï¼šå°†å®è§‚ç›®æ ‡åˆ†è§£ä¸ºåŸå­ä»»åŠ¡ï¼Œæ˜¯åç»­è‡ªåŠ¨åŒ–æ‰§è¡Œçš„è“å›¾ã€‚</li>
<li><strong>åˆ†å¸ƒå¼æ‰§è¡Œå¼•æ“ (<code>subagent-driven-development</code>)</strong>ï¼šåˆ©ç”¨AIä»£ç†å¯å¤šå®ä¾‹çš„ç‰¹æ€§ï¼Œå¹¶è¡Œæˆ–ä¸²è¡Œæ‰§è¡ŒåŸå­ä»»åŠ¡ï¼Œå¹¶å†…ç½®è´¨é‡é—¨ç¦ï¼ˆä¸¤é˜¶æ®µå®¡æŸ¥ï¼‰ã€‚</li>
<li><strong>è´¨é‡ç®¡æ§ç‚¹ (<code>requesting-code-review</code>, <code>test-driven-development</code>)</strong>ï¼šåœ¨æµç¨‹ä¸­ç¡¬æ€§æ’å…¥æ£€æŸ¥ç‚¹ï¼Œç¡®ä¿æµ‹è¯•è¦†ç›–ç‡å’Œä»£ç è§„èŒƒã€‚</li>
<li><strong>å‘å¸ƒåè°ƒå™¨ (<code>finishing-a-development-branch</code>)</strong>ï¼šæ ‡å‡†åŒ–åˆ†æ”¯æ”¶å°¾å·¥ä½œï¼Œæä¾›æ¸…æ™°çš„åç»­æ“ä½œè·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-6">2.2 æŠ€æœ¯è§†è§’ï¼šæ’ä»¶åŒ–æŠ€èƒ½æ¶æ„ä¸è¿è¡Œæ—¶</h4>
<p>æŠ€æœ¯ä¸Šï¼ŒSuperpowers æ˜¯ä¸€ä¸ª<strong>åŸºäºæŠ€èƒ½(Skill)çš„æ’ä»¶åŒ–æ¡†æ¶</strong>ï¼Œå…¶æ¶æ„æ ¸å¿ƒå¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1db42d0e80446d58516007ca35d1a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769265996&amp;x-signature=eqWKjlf12Ihy%2FQndRaMkq2GGumc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>æŠ€èƒ½ (<code>Skill</code>) ä½œä¸ºåŸºæœ¬å•å…ƒ</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæŠ€èƒ½æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå†…å«ä¸€ä¸ª <code>SKILL.md</code> æ–‡ä»¶ã€‚è¯¥æ–‡ä»¶ä½¿ç”¨ YAML Frontmatter å£°æ˜å…ƒæ•°æ®ï¼ˆåç§°ã€æè¿°ï¼‰ï¼Œä¸»ä½“éƒ¨åˆ†åˆ™æ˜¯è¯¦ç»†çš„ã€ä¾›AIä»£ç†éµå¾ªçš„æŒ‡ä»¤ã€‚</li>
<li><strong>å…³é”®è®¾è®¡</strong>ï¼šæŠ€èƒ½æè¿°ä¸­åŒ…å«å¼ºåˆ¶è§¦å‘æ¡ä»¶ï¼ˆå¦‚ <code>â€œYou MUST use this before any creative workâ€</code>ï¼‰ï¼Œè¿™æ˜¯å·¥ä½œæµå¾—ä»¥å¼ºåˆ¶æ‰§è¡Œçš„åŸºç¡€ã€‚</li>
</ul>
</li>
<li>
<p><strong>æŠ€èƒ½åŠ è½½ä¸è§£æå¼•æ“ (<code>lib/skills-core.js</code>)</strong>ï¼š
è¿™æ˜¯ç³»ç»Ÿçš„æŠ€æœ¯æ ¸å¿ƒï¼Œæä¾›ä»¥ä¸‹å…³é”®æœåŠ¡ï¼š</p>
<ul>
<li><strong>æŠ€èƒ½å‘ç° (<code>findSkillsInDir</code>)</strong>ï¼šé€’å½’æ‰«æç›®å½•ï¼Œæå–æŠ€èƒ½å…ƒæ•°æ®ã€‚</li>
<li><strong>æŠ€èƒ½è·¯å¾„è§£æ (<code>resolveSkillPath</code>)</strong>ï¼šå®ç°â€œä¸ªäººæŠ€èƒ½è¦†ç›–ç³»ç»ŸæŠ€èƒ½â€çš„æœºåˆ¶ï¼Œæ”¯æŒçµæ´»çš„å®šåˆ¶åŒ–ã€‚</li>
<li><strong>å†…å®¹å¤„ç† (<code>stripFrontmatter</code>)</strong>ï¼šå°† <code>SKILL.md</code> ä¸­çš„å¯æ‰§è¡ŒæŒ‡ä»¤éƒ¨åˆ†åˆ†ç¦»å‡ºæ¥ã€‚</li>
<li><strong>æ›´æ–°æ£€æŸ¥ (<code>checkForUpdates</code>)</strong>ï¼šé€šè¿‡Gitå‘½ä»¤æ£€æŸ¥æŠ€èƒ½åº“æ˜¯å¦æœ‰æ›´æ–°ï¼Œä¿æŒæµç¨‹å…ˆè¿›æ€§ã€‚</li>
</ul>
</li>
<li>
<p><strong>é’©å­ (<code>Hooks</code>) æœºåˆ¶</strong>ï¼š
é€šè¿‡ <code>hooks.json</code> å®šä¹‰åœ¨ç‰¹å®šäº‹ä»¶ï¼ˆå¦‚ä¼šè¯å¼€å§‹ <code>SessionStart</code>ï¼‰æ—¶è‡ªåŠ¨æ‰§è¡Œçš„è„šæœ¬ã€‚è¿™å®ç°äº†å¯¹AIä»£ç†ç¯å¢ƒçš„åˆå§‹åŒ–å’Œé…ç½®ï¼Œç¡®ä¿æŠ€èƒ½ç³»ç»Ÿå°±ç»ªã€‚</p>
</li>
<li>
<p><strong>å­ä»£ç†åè°ƒæ¨¡å¼</strong>ï¼š
<code>subagent-driven-development</code> æŠ€èƒ½æ˜¯æŠ€æœ¯å®ç°çš„äº®ç‚¹ã€‚å®ƒå¹¶éç®€å•åœ°å°†ä»»åŠ¡ä¸¢ç»™å¦ä¸€ä¸ªAIå®ä¾‹ï¼Œè€Œæ˜¯è®¾è®¡äº†ä¸€ä¸ª<strong>ä¸¤é˜¶æ®µå®¡æŸ¥å¾ªç¯</strong>ï¼š</p>
<ul>
<li><strong>é˜¶æ®µä¸€ï¼šè§„æ ¼ç¬¦åˆæ€§å®¡æŸ¥</strong>ã€‚å®¡æŸ¥è€…ç‹¬ç«‹é˜…è¯»ä»£ç ï¼ŒéªŒè¯å…¶æ˜¯å¦å®Œå…¨åŒ¹é…ä»»åŠ¡æè¿°ï¼Œä¸ä¿¡ä»»å®æ–½è€…çš„è‡ªæˆ‘æŠ¥å‘Šã€‚</li>
<li><strong>é˜¶æ®µäºŒï¼šä»£ç è´¨é‡å®¡æŸ¥</strong>ã€‚åœ¨è§„æ ¼é€šè¿‡åï¼Œå†è¿›è¡Œä»£ç é£æ ¼ã€æœ€ä½³å®è·µç­‰å®¡æŸ¥ã€‚</li>
<li>ä»»ä½•é˜¶æ®µå‘ç°é—®é¢˜ï¼Œåˆ™é€€å›å®æ–½è€…è¿›å…¥â€œå®¡æŸ¥å¾ªç¯â€ä¿®æ­£ã€‚è¿™æ¨¡ä»¿äº†äººç±»å›¢é˜Ÿä¸­â€œå¼€å‘ â†’ ä»£ç å®¡æŸ¥ â†’ ä¿®æ”¹â€çš„è¿­ä»£è¿‡ç¨‹ï¼Œæ˜¾è‘—æå‡äº†AIç”Ÿæˆä»£ç çš„å¯é æ€§ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">3. æŠ€æœ¯éš¾ç‚¹ä¸æŒ‘æˆ˜</h3>
<ol>
<li><strong>æŠ€èƒ½å†²çªä¸ä¼˜å…ˆçº§ç®¡ç†</strong>ï¼šå½“å¤šä¸ªæŠ€èƒ½çš„è§¦å‘æ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶ï¼Œå¦‚ä½•å®šä¹‰å’Œæ‰§è¡Œä¼˜å…ˆçº§ï¼Ÿç³»ç»Ÿç›®å‰ä¼¼ä¹ä¾èµ–æŠ€èƒ½æè¿°ä¸­çš„â€œMUSTâ€ç­‰å¼ºæŒ‡ä»¤å’Œå¼€å‘è€…çš„ä¸Šä¸‹æ–‡ï¼Œæ›´å¤æ‚çš„å†²çªè§£å†³æœºåˆ¶å¯èƒ½æ˜¯æœªæ¥çš„æŒ‘æˆ˜ã€‚</li>
<li><strong>å­ä»£ç†çŠ¶æ€ä¸ä¸Šä¸‹æ–‡éš”ç¦»</strong>ï¼šæ¯ä¸ªå­ä»£ç†åº”æœ‰ç‹¬ç«‹ã€çº¯å‡€çš„ä¸Šä¸‹æ–‡ï¼Œä»¥é˜²æ­¢ä»»åŠ¡é—´æ±¡æŸ“ã€‚ä½†åŒæ—¶ï¼ŒæŸäº›ä»»åŠ¡åˆéœ€è¦äº†è§£é¡¹ç›®å…¨å±€çŠ¶æ€ã€‚å¦‚ä½•åœ¨éš”ç¦»ä¸å…±äº«é—´å–å¾—å¹³è¡¡ï¼Œéœ€è¦ç²¾ç»†çš„è®¾è®¡ã€‚</li>
<li><strong>å¤æ‚æŠ€èƒ½çš„æµ‹è¯•</strong>ï¼šå¦‚ <code>tests/docs/testing.md</code> æ‰€ç¤ºï¼Œæµ‹è¯•åƒ <code>subagent-driven-development</code> è¿™æ ·çš„æŠ€èƒ½ï¼Œéœ€è¦æ­å»ºèƒ½è¿è¡ŒçœŸå®AIä»£ç†çš„Headlessæµ‹è¯•ç¯å¢ƒï¼Œè§£æå¤æ‚çš„ä¼šè¯è½¬å½•æ–‡ä»¶ï¼ˆJSONLæ ¼å¼ï¼‰ï¼Œå¹¶éªŒè¯åˆ†å¸ƒå¼äº¤äº’è¡Œä¸ºã€‚è¿™æ¯”æµ‹è¯•æ™®é€šå‡½æ•°è¦å¤æ‚å¾—å¤šã€‚</li>
<li><strong>æ€§èƒ½ä¸æˆæœ¬æ§åˆ¶</strong>ï¼šæ¯ä¸ªå­ä»£ç†è°ƒç”¨éƒ½æ¶ˆè€—AIæ¨¡å‹çš„Tokenã€‚é¡¹ç›®æä¾›çš„ <code>analyze-token-usage.py</code> å·¥å…·ä¸“é—¨ç”¨äºåˆ†æå„ä»£ç†çš„Tokenæ¶ˆè€—å’Œæˆæœ¬ã€‚ä¼˜åŒ–æç¤ºè¯ï¼ˆPromptï¼‰è®¾è®¡ä»¥å‡å°‘Tokenæµªè´¹ï¼ŒåŒæ—¶ä¿æŒæ•ˆæœï¼Œæ˜¯ä¸€ä¸ªæŒç»­çš„æŠ€æœ¯è¦ç‚¹ã€‚</li>
<li><strong>å¯¹ä¸åŒAIä»£ç†å¹³å°çš„é€‚é…</strong>ï¼šéœ€è¦ä¸ºClaude Codeã€Codexã€OpenCodeåˆ†åˆ«ç¼–å†™å®‰è£…å’Œé€‚é…é€»è¾‘ï¼ˆå¦‚ <code>.codex/INSTALL.md</code>, <code>.opencode/INSTALL.md</code>ï¼‰ï¼Œå¤„ç†ä¸åŒå¹³å°çš„èƒ½åŠ›å·®å¼‚å’Œæ¥å£ï¼Œå¢åŠ äº†ç»´æŠ¤å¤æ‚åº¦ã€‚</li>
</ol>
<h3 data-id="heading-8">4. è¯¦ç»†è®¾è®¡å›¾æ</h3>
<h4 data-id="heading-9">4.1 æ ¸å¿ƒæŠ€èƒ½è§£ææµç¨‹åºåˆ—å›¾</h4>
<p>ä¸‹å›¾è¯¦ç»†æç»˜äº†ä»è§¦å‘æŠ€èƒ½ååˆ°æ‰§è¡ŒæŠ€èƒ½æŒ‡ä»¤çš„å®Œæ•´å†…éƒ¨æµç¨‹ï¼Œç‰¹åˆ«æ˜¯ä¸ªäººæŠ€èƒ½è¦†ç›–ç³»ç»ŸæŠ€èƒ½çš„è§£æé€»è¾‘ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as AIä»£ç†
    participant SC as SkillCore (æŠ€èƒ½æ ¸å¿ƒ)
    participant FS as æ–‡ä»¶ç³»ç»Ÿ

    A-&gt;&gt;SC: resolveSkillPath(skillName, superpowersDir, personalDir)
    
    alt æŠ€èƒ½åä»¥ superpowers: å‰ç¼€å¼ºåˆ¶æŒ‡å®š
        SC-&gt;&gt;FS: ä»…åœ¨ superpowersDir ä¸‹æŸ¥æ‰¾ skillName
    else æ™®é€šæŠ€èƒ½å
        SC-&gt;&gt;FS: å…ˆåœ¨ personalDir ä¸‹æŸ¥æ‰¾ skillName
        alt åœ¨ personalDir ä¸­æ‰¾åˆ°
            SC--&gt;&gt;A: è¿”å›ä¸ªäººæŠ€èƒ½è·¯å¾„ (sourceType: â€˜personalâ€˜)
        else æœªåœ¨ personalDir ä¸­æ‰¾åˆ°
            SC-&gt;&gt;FS: åœ¨ superpowersDir ä¸‹æŸ¥æ‰¾ skillName
            alt åœ¨ superpowersDir ä¸­æ‰¾åˆ°
                SC--&gt;&gt;A: è¿”å›ç³»ç»ŸæŠ€èƒ½è·¯å¾„ (sourceType: â€˜superpowersâ€˜)
            else å‡æœªæ‰¾åˆ°
                SC--&gt;&gt;A: è¿”å› null
            end
        end
    end

    A-&gt;&gt;FS: è¯»å–æŠ€èƒ½æ–‡ä»¶ SKILL.md
    A-&gt;&gt;SC: stripFrontmatter(content)
    SC--&gt;&gt;A: è¿”å›çº¯æŒ‡ä»¤å†…å®¹
    A-&gt;&gt;A: å°†æŠ€èƒ½æŒ‡ä»¤æ³¨å…¥è‡ªèº«ä¸Šä¸‹æ–‡å¹¶æ‰§è¡Œ
</code></pre>
<h4 data-id="heading-10">4.2 æ ¸å¿ƒç±»/å‡½æ•°å…³ç³»å›¾</h4>
<p>åŸºäº <code>lib/skills-core.js</code> æ–‡ä»¶ï¼Œå…¶æ ¸å¿ƒå‡½æ•°å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/668216fe6c4441f7be0932ebb4f565b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5Y6C5oqA5pyv5oC755uR5LiL5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769265996&amp;x-signature=vbVjxFLnffAeZ1%2FrHII%2FrmcCHyY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-11">5. æ ¸å¿ƒä»£ç è§£æ</h3>
<p>ä»¥ä¸‹åˆ†æ <code>lib/skills-core.js</code> ä¸­çš„ä¸¤ä¸ªå…³é”®å‡½æ•°ï¼Œå®ƒä»¬ä½“ç°äº†ç³»ç»Ÿçš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h4 data-id="heading-12">5.1 æŠ€èƒ½è·¯å¾„è§£æå‡½æ•° (<code>resolveSkillPath</code>)</h4>
<p>æ­¤å‡½æ•°å®ç°äº†æŠ€èƒ½æŸ¥æ‰¾çš„ä¼˜å…ˆçº§é€»è¾‘ï¼Œæ˜¯â€œä¸ªäººæŠ€èƒ½è¦†ç›–ç³»ç»ŸæŠ€èƒ½â€ç‰¹æ€§çš„æŠ€æœ¯åŸºç¡€ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * è§£ææŠ€èƒ½åç§°åˆ°å…¶æ–‡ä»¶è·¯å¾„ï¼Œå¤„ç†é˜´å½±è¦†ç›–
 * (ä¸ªäººæŠ€èƒ½è¦†ç›– superpowers æŠ€èƒ½)ã€‚
 *
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">skillName</span> - åç§°å¦‚ "superpowers:brainstorming" æˆ– "my-skill"
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">superpowersDir</span> - superpowers æŠ€èƒ½ç›®å½•è·¯å¾„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">personalDir</span> - ä¸ªäººæŠ€èƒ½ç›®å½•è·¯å¾„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">{skillFile: string, sourceType: string, skillPath: string</span>} | null}
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resolveSkillPath</span>(<span class="hljs-params">skillName, superpowersDir, personalDir</span>) {
    <span class="hljs-comment">// 1. å¤„ç†å¼ºåˆ¶å‰ç¼€ï¼šå¦‚æœä»¥ `superpowers:` å¼€å¤´ï¼Œåˆ™åªæŸ¥æ‰¾ç³»ç»Ÿç›®å½•</span>
    <span class="hljs-keyword">const</span> forceSuperpowers = skillName.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'superpowers:'</span>);
    <span class="hljs-keyword">const</span> actualSkillName = forceSuperpowers ? skillName.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^superpowers:/</span>, <span class="hljs-string">''</span>) : skillName;

    <span class="hljs-comment">// 2. ä¼˜å…ˆæŸ¥æ‰¾ä¸ªäººæŠ€èƒ½ (é™¤éæ˜ç¡®å¼ºåˆ¶ä½¿ç”¨ superpowers)</span>
    <span class="hljs-keyword">if</span> (!forceSuperpowers &amp;&amp; personalDir) {
        <span class="hljs-keyword">const</span> personalPath = path.<span class="hljs-title function_">join</span>(personalDir, actualSkillName);
        <span class="hljs-keyword">const</span> personalSkillFile = path.<span class="hljs-title function_">join</span>(personalPath, <span class="hljs-string">'SKILL.md'</span>);
        <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(personalSkillFile)) {
            <span class="hljs-comment">// æ‰¾åˆ°ä¸ªäººæŠ€èƒ½ï¼Œç«‹å³è¿”å›ï¼Œå®ç°â€œè¦†ç›–â€</span>
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">skillFile</span>: personalSkillFile,
                <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'personal'</span>,
                <span class="hljs-attr">skillPath</span>: actualSkillName
            };
        }
    }

    <span class="hljs-comment">// 3. æŸ¥æ‰¾ superpowers ç³»ç»ŸæŠ€èƒ½</span>
    <span class="hljs-keyword">if</span> (superpowersDir) {
        <span class="hljs-keyword">const</span> superpowersPath = path.<span class="hljs-title function_">join</span>(superpowersDir, actualSkillName);
        <span class="hljs-keyword">const</span> superpowersSkillFile = path.<span class="hljs-title function_">join</span>(superpowersPath, <span class="hljs-string">'SKILL.md'</span>);
        <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(superpowersSkillFile)) {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">skillFile</span>: superpowersSkillFile,
                <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'superpowers'</span>,
                <span class="hljs-attr">skillPath</span>: actualSkillName
            };
        }
    }

    <span class="hljs-comment">// 4. éƒ½æœªæ‰¾åˆ°ï¼Œè¿”å› null</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p><strong>ä»£ç æ³¨é‡Šä¸è§£æ</strong>ï¼š</p>
<ul>
<li><strong>é€»è¾‘ä¼˜å…ˆçº§</strong>ï¼š<code>!forceSuperpowers &amp;&amp; personalDir</code> æ¡ä»¶ç¡®ä¿äº†é»˜è®¤æƒ…å†µä¸‹ä¼˜å…ˆæœç´¢ä¸ªäººç›®å½•ï¼Œè¿™æ˜¯å®ç°è‡ªå®šä¹‰è¦†ç›–çš„å…³é”®ã€‚</li>
<li><strong>è·¯å¾„æ‹¼æ¥</strong>ï¼šä½¿ç”¨ <code>path.join()</code> ç¡®ä¿è·¨å¹³å°è·¯å¾„çš„æ­£ç¡®æ€§ã€‚</li>
<li><strong>å­˜åœ¨æ€§æ£€æŸ¥</strong>ï¼š<code>fs.existsSync()</code> åŒæ­¥æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæ˜¯å†³å®šæŸ¥æ‰¾åˆ†æ”¯çš„ä¾æ®ã€‚</li>
<li><strong>æ¸…æ™°çš„è¿”å›ç»“æ„</strong>ï¼šè¿”å›å¯¹è±¡åŒ…å«æ–‡ä»¶è·¯å¾„ã€æ¥æºç±»å‹å’ŒæŠ€èƒ½è·¯å¾„ï¼Œä¸ºè°ƒç”¨è€…æä¾›å®Œæ•´ä¿¡æ¯ã€‚</li>
</ul>
<h4 data-id="heading-13">5.2 æ£€æŸ¥æ›´æ–°å‡½æ•° (<code>checkForUpdates</code>)</h4>
<p>æ­¤å‡½æ•°å±•ç¤ºäº†ç³»ç»Ÿä¸Gitçš„é›†æˆï¼Œç”¨äºå®ç°æŠ€èƒ½çš„è‡ªåŠ¨æ›´æ–°æé†’ï¼Œè®¾è®¡ä¸Šè€ƒè™‘äº†å¤±è´¥å®¹å¿ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ£€æŸ¥Gitä»“åº“æ˜¯å¦æœ‰å¯ç”¨æ›´æ–°ã€‚
 *
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">repoDir</span> - Gitä»“åº“è·¯å¾„
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">boolean</span>} - å¦‚æœæœ‰æ›´æ–°åˆ™è¿”å› true
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkForUpdates</span>(<span class="hljs-params">repoDir</span>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// è®¾ç½®3ç§’è¶…æ—¶ï¼Œé¿å…å› ç½‘ç»œé—®é¢˜å¯¼è‡´å¯åŠ¨é˜»å¡</span>
        <span class="hljs-keyword">const</span> output = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">'git fetch origin &amp;&amp; git status --porcelain=v1 --branch'</span>, {
            <span class="hljs-attr">cwd</span>: repoDir,
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>, <span class="hljs-comment">// å…³é”®ï¼šè¶…æ—¶è®¾è®¡</span>
            <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf8'</span>,
            <span class="hljs-attr">stdio</span>: <span class="hljs-string">'pipe'</span> <span class="hljs-comment">// æŠ‘åˆ¶å­è¿›ç¨‹è¾“å‡ºåˆ°çˆ¶è¿›ç¨‹</span>
        });

        <span class="hljs-comment">// è§£æ git status è¾“å‡ºæ¥åˆ¤æ–­æ˜¯å¦è½åäºè¿œç¨‹åˆ†æ”¯</span>
        <span class="hljs-keyword">const</span> statusLines = output.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> statusLines) {
            <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€è¡Œä¸­æ˜¯å¦åŒ…å« `[behind ` å­—æ ·</span>
            <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'## '</span>) &amp;&amp; line.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'[behind '</span>)) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// å­˜åœ¨æ›´æ–°</span>
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å·²æ˜¯æœ€æ–°</span>
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ã€gité”™è¯¯ã€è¶…æ—¶ç­‰â€”â€”ä¸é˜»å¡å¼•å¯¼æµç¨‹ï¼Œä¼˜é›…é™çº§</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
}
</code></pre>
<p><strong>ä»£ç æ³¨é‡Šä¸è§£æ</strong>ï¼š</p>
<ul>
<li><strong>é˜²å¾¡æ€§ç¼–ç¨‹</strong>ï¼šæ•´ä¸ªå‡½æ•°è¢«åŒ…è£¹åœ¨ <code>try-catch</code> ä¸­ï¼Œä»»ä½•å¼‚å¸¸ï¼ˆç½‘ç»œä¸é€šã€æ— Gitã€è¶…æ—¶ï¼‰éƒ½ä¼šè¢«æ•è·å¹¶è¿”å› <code>false</code>ï¼Œç¡®ä¿ä¸»æµç¨‹ä¸å› æ›´æ–°æ£€æŸ¥è€Œå´©æºƒã€‚</li>
<li><strong>è¶…æ—¶æ§åˆ¶</strong>ï¼š<code>timeout: 3000</code> æ˜¯å…³é”®è®¾ç½®ï¼Œé˜²æ­¢åœ¨ç½‘ç»œç¼“æ…¢æˆ–ä¸å¯ç”¨æ—¶é•¿æ—¶é—´æŒ‚èµ·ã€‚</li>
<li><strong>é«˜æ•ˆçš„æ›´æ–°åˆ¤æ–­</strong>ï¼šé€šè¿‡ <code>git status --porcelain=v1 --branch</code> è·å–æœºå™¨å¯è¯»çš„çŠ¶æ€ï¼Œå¹¶è§£æ <code>[behind</code> å…³é”®è¯æ¥åˆ¤æ–­æ˜¯å¦è½åï¼Œæ¯”ç›´æ¥æ¯”è¾ƒç‰ˆæœ¬å“ˆå¸Œæ›´é«˜æ•ˆã€‚</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šæ­¤å‡½æ•°åªè´Ÿè´£æ£€æŸ¥å¹¶è¿”å›å¸ƒå°”å€¼ï¼Œä¸æ‰§è¡Œæ‹‰å–(<code>pull</code>)æ“ä½œï¼ŒèŒè´£å•ä¸€ã€‚</li>
</ul>
<h3 data-id="heading-14">ç»“è®º</h3>
<p>Superpowers é¡¹ç›®ä»£è¡¨äº†ä¸€ç§å‰æ²¿çš„å·¥ç¨‹åŒ–æ€è·¯ï¼š<strong>ä¸æ˜¯è®©äººå»é€‚åº”AIçš„å·¥ä½œæ¨¡å¼ï¼Œè€Œæ˜¯è®©AIçš„è¡Œä¸ºå»é€‚é…å¹¶å¼ºåŒ–äººç±»çš„è½¯ä»¶å·¥ç¨‹è§„èŒƒ</strong>ã€‚å®ƒé€šè¿‡æ’ä»¶åŒ–æŠ€èƒ½æ¶æ„ã€å¼ºåˆ¶æ€§çš„æµç¨‹é’©å­ã€ä»¥åŠåˆ›æ–°çš„å­ä»£ç†åè°ƒä¸å®¡æŸ¥æœºåˆ¶ï¼Œåœ¨AIèƒ½åŠ›ä¸å·¥ç¨‹çºªå¾‹ä¹‹é—´æ¶èµ·äº†ä¸€åº§æ¡¥æ¢ã€‚</p>
<p>ä»æŠ€æœ¯å®ç°ä¸Šçœ‹ï¼Œå…¶æ ¸å¿ƒéš¾ç‚¹ä¸åœ¨äºå¤æ‚çš„ç®—æ³•ï¼Œè€Œåœ¨äºå¯¹AIä»£ç†è¡Œä¸ºæ¨¡å¼çš„ç²¾ç»†å¼•å¯¼ã€å¯¹åˆ†å¸ƒå¼ï¼ˆå­ä»£ç†ï¼‰ä»»åŠ¡çŠ¶æ€çš„ç®¡æ§ï¼Œä»¥åŠå¯¹å¤æ‚æŠ€èƒ½ç»„åˆçš„æµ‹è¯•éªŒè¯ã€‚å®ƒä¸ºâ€œAIè¾…åŠ©è½¯ä»¶å·¥ç¨‹â€ï¼ˆAI4SEï¼‰è¿™ä¸€æ–°å…´é¢†åŸŸæä¾›äº†ä¸€ä¸ªæ‰å®çš„ã€å¯æ‰©å±•çš„å®è·µèŒƒæœ¬ã€‚</p>
<p>ä¸ä¼ ç»Ÿçš„CI/CDæµæ°´çº¿ç›¸æ¯”ï¼ŒSuperpowers çš„æµæ°´çº¿è¿ä½œåœ¨**â€œè®¤çŸ¥å±‚â€**ï¼Œå®ƒè§„èŒƒçš„æ˜¯éœ€æ±‚åˆ†æã€è®¾è®¡ã€ç¼–ç å’Œåˆçº§å®¡æŸ¥è¿™äº›å‰æœŸåˆ›é€ æ€§æ´»åŠ¨ï¼›è€ŒCI/CDæ›´å…³æ³¨æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰åæœŸè‡ªåŠ¨åŒ–æ´»åŠ¨ã€‚äºŒè€…æ˜¯äº’è¡¥è€Œéç«äº‰å…³ç³»ï¼Œå…±åŒæ„æˆä»â€œæƒ³æ³•â€åˆ°â€œä¸Šçº¿â€çš„å®Œæ•´è‡ªåŠ¨åŒ–é“¾æ¡ã€‚</p>
<hr/>
<p><strong>æŠ€æœ¯æ ˆæ€»ç»“</strong>ï¼šNode.js (è¿è¡Œæ—¶) + Git (ç‰ˆæœ¬ä¸æ›´æ–°) + YAML/Markdown (æŠ€èƒ½å®šä¹‰) + ç‰¹å®šAIä»£ç†SDK (Claude/Codex/OpenCode) + è‡ªå®šä¹‰çš„ä»£ç†åè°ƒåè®®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº LangChain1.0 æ„å»º RAG Agent æ™ºèƒ½æ£€ç´¢é—®ç­”ç³»ç»Ÿï¼ˆå®Œæ•´å¯è¿è¡Œä»£ç +è¯¦ç»†æ³¨é‡Šï¼‰]]></title>    <link>https://juejin.cn/post/7595878718172250148</link>    <guid>https://juejin.cn/post/7595878718172250148</guid>    <pubDate>2026-01-17T14:55:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172250148" data-draft-id="7595911076014669860" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº LangChain1.0 æ„å»º RAG Agent æ™ºèƒ½æ£€ç´¢é—®ç­”ç³»ç»Ÿï¼ˆå®Œæ•´å¯è¿è¡Œä»£ç +è¯¦ç»†æ³¨é‡Šï¼‰"/> <meta itemprop="keywords" content="LangChain,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T14:55:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="o_insist"/> <meta itemprop="url" content="https://juejin.cn/user/3307750804423832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº LangChain1.0 æ„å»º RAG Agent æ™ºèƒ½æ£€ç´¢é—®ç­”ç³»ç»Ÿï¼ˆå®Œæ•´å¯è¿è¡Œä»£ç +è¯¦ç»†æ³¨é‡Šï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3307750804423832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    o_insist
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:55:40.000Z" title="Sat Jan 17 2026 14:55:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>âœ¨ æœ¬æ–‡ä»£ç å‡ä¸ºå¯ç›´æ¥è¿è¡Œçš„å®Œæ•´ä»£ç ï¼ŒåŸºäºLangChainæœ€æ–°ç‰ˆAPIç¼–å†™ï¼Œæ— è¿‡æ—¶è¯­æ³•ï¼Œæ”¾å¿ƒé£Ÿç”¨ï½</p>
<h2 data-id="heading-0">âœ… ä¸€ã€å®‰è£…é¡¹ç›®ä¾èµ–åŒ…</h2>
<pre><code class="hljs language-arduino" lang="arduino"># å®‰è£…æ‰€æœ‰æ ¸å¿ƒä¾èµ–ï¼Œä¸€è¡Œå‘½ä»¤å®Œæˆé…ç½®
pip install langchain langchain-text-splitters langchain-community bs4 python-dotenv
</code></pre>
<hr/>
<h2 data-id="heading-1">âœ… äºŒã€åˆå§‹åŒ–ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼ˆæ ¸å¿ƒé…ç½®ï¼‰</h2>
<p>æ„å»ºRAG Agentçš„æ ¸å¿ƒä¸‰è¦ç´ ï¼š<strong>å¯¹è¯å¤§æ¨¡å‹</strong>ã€<strong>æ–‡æœ¬åµŒå…¥æ¨¡å‹</strong>ã€<strong>å‘é‡å­˜å‚¨å™¨</strong></p>
<h3 data-id="heading-2">1. é…ç½®å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰- å¯¹è¯ç”Ÿæˆæ ¸å¿ƒ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¼å…¥å¯¹è¯æ¨¡å‹åŠç¯å¢ƒå˜é‡é…ç½®ä¾èµ–</span>
from langchain_openai import ChatOpenAI
import os
from dotenv import load_dotenv

<span class="hljs-comment"># åŠ è½½.envæ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡ï¼ˆç§å¯†å¯†é’¥ç®¡ç†ï¼Œè§„èŒƒå¼€å‘ï¼‰</span>
load_dotenv()

<span class="hljs-comment"># é…ç½®é€šä¹‰åƒé—®å¤§æ¨¡å‹ï¼ˆqwen-maxï¼‰å‚æ•°</span>
<span class="hljs-attr">model_name</span> = <span class="hljs-string">"qwen-max"</span>
<span class="hljs-attr">api_key</span> = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)
<span class="hljs-attr">base_url</span> = os.getenv(<span class="hljs-string">"DASHSCOPE_BASE_URL"</span>)

<span class="hljs-comment"># åˆå§‹åŒ–èŠå¤©æ¨¡å‹ï¼šä½éšæœºæ€§ä¿è¯å›ç­”ä¸¥è°¨ï¼Œé€‚é…çŸ¥è¯†ç±»é—®ç­”åœºæ™¯</span>
<span class="hljs-attr">model</span> = ChatOpenAI(
    <span class="hljs-attr">model</span>=model_name,
    <span class="hljs-attr">api_key</span>=api_key,
    <span class="hljs-attr">base_url</span>=base_url,
    <span class="hljs-attr">temperature</span>=<span class="hljs-number">0.1</span>,  <span class="hljs-comment"># æ¸©åº¦å€¼è¶Šä½ï¼Œå›ç­”è¶Šç²¾å‡†ã€ç¡®å®šæ€§è¶Šå¼º</span>
)
</code></pre>
<h3 data-id="heading-3">2. é…ç½®æ–‡æœ¬åµŒå…¥æ¨¡å‹ - æ–‡æœ¬å‘é‡åŒ–æ ¸å¿ƒ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¼å…¥HuggingFaceåµŒå…¥æ¨¡å‹</span>
from langchain_huggingface import HuggingFaceEmbeddings

<span class="hljs-comment"># åˆå§‹åŒ–åµŒå…¥æ¨¡å‹ï¼Œè¡Œä¸šä¸»æµè½»é‡çº§é«˜è´¨é‡é€‰å‹</span>
<span class="hljs-comment"># ç‰¹ç‚¹ï¼šæ–‡æœ¬è¡¨å¾èƒ½åŠ›å¼ºã€é€‚é…ä¸­æ–‡+è‹±æ–‡ï¼Œé¦–æ¬¡è¿è¡Œè‡ªåŠ¨ç¼“å­˜è‡³æœ¬åœ°ï¼Œæ— éœ€é‡å¤ä¸‹è½½</span>
<span class="hljs-attr">embeddings</span> = HuggingFaceEmbeddings(model_name=<span class="hljs-string">"sentence-transformers/all-mpnet-base-v2"</span>)
</code></pre>
<h3 data-id="heading-4">3. é…ç½®å‘é‡å­˜å‚¨å™¨ - å‘é‡æ•°æ®å­˜å‚¨æ ¸å¿ƒ</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¼å…¥å†…å­˜çº§å‘é‡å­˜å‚¨åº“</span>
from langchain_core.vectorstores import InMemoryVectorStore

<span class="hljs-comment"># åˆå§‹åŒ–å†…å­˜å‘é‡åº“ï¼Œè½»é‡åŒ–æ— éƒ¨ç½²ï¼Œæ— éœ€æŒä¹…åŒ–ç£ç›˜ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘/æ¼”ç¤ºåœºæ™¯</span>
<span class="hljs-comment"># ç»‘å®šå·²åˆå§‹åŒ–çš„åµŒå…¥æ¨¡å‹ï¼Œå®ç°æ–‡æœ¬-å‘é‡çš„è‡ªåŠ¨è½¬æ¢ä¸åŒ¹é…</span>
<span class="hljs-attr">vector_store</span> = InMemoryVectorStore(embeddings)
</code></pre>
<hr/>
<h2 data-id="heading-5">âœ… ä¸‰ã€æ–‡æ¡£å¤„ç†å…¨æµç¨‹ï¼šåŠ è½½ â†’ åˆ†ç‰‡ â†’ å…¥åº“ï¼ˆæ„å»ºæ£€ç´¢çŸ¥è¯†åº“ï¼‰</h2>
<p>RAGæ ¸å¿ƒå‰ç½®æ­¥éª¤ï¼šå°†éç»“æ„åŒ–çš„ç½‘é¡µæ–‡æœ¬ï¼Œå¤„ç†ä¸ºç»“æ„åŒ–çš„å‘é‡çŸ¥è¯†åº“ï¼Œå…±åˆ†3æ­¥å®Œæˆï¼Œæµç¨‹æ ‡å‡†åŒ–ä¸”å¯å¤ç”¨</p>
<h3 data-id="heading-6">1. æ–‡æ¡£åŠ è½½ï¼šç²¾å‡†çˆ¬å–ç½‘é¡µæ ¸å¿ƒå†…å®¹</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¼å…¥ç½‘é¡µåŠ è½½å™¨åŠç½‘é¡µè§£æä¾èµ–</span>
import bs4
from langchain_community.document_loaders import WebBaseLoader

<span class="hljs-comment"># ç½‘é¡µè§£æè§„åˆ™ï¼šåªæå–æŒ‡å®šclassçš„æ ¸å¿ƒå†…å®¹ï¼ˆæ ‡é¢˜/å¤´éƒ¨/æ­£æ–‡ï¼‰ï¼Œè¿‡æ»¤å†—ä½™HTMLæ ‡ç­¾ï¼Œæå‡æ•°æ®è´¨é‡</span>
<span class="hljs-attr">bs4_strainer</span> = bs4.SoupStrainer(class_=(<span class="hljs-string">"post-title"</span>, <span class="hljs-string">"post-header"</span>, <span class="hljs-string">"post-content"</span>))

<span class="hljs-comment"># åˆå§‹åŒ–ç½‘é¡µåŠ è½½å™¨ï¼ŒæŒ‡å®šçˆ¬å–è·¯å¾„+è§£æè§„åˆ™</span>
<span class="hljs-attr">loader</span> = WebBaseLoader(
    <span class="hljs-attr">web_paths</span>=(<span class="hljs-string">"https://lilianweng.github.io/posts/2023-06-23-agent/"</span>,),
    <span class="hljs-attr">bs_kwargs</span>={<span class="hljs-string">"parse_only"</span>: bs4_strainer},
)

<span class="hljs-comment"># åŠ è½½ç½‘é¡µæ–‡æ¡£è‡³ä¸Šä¸‹æ–‡</span>
<span class="hljs-attr">docs</span> = loader.load()

<span class="hljs-comment"># æ ¡éªŒåŠ è½½ç»“æœï¼šç¡®ä¿æˆåŠŸåŠ è½½1ç¯‡æ–‡æ¡£</span>
assert len(docs) == 1
<span class="hljs-comment"># è¾“å‡ºæ–‡æ¡£æ€»å­—ç¬¦æ•°ï¼Œç›´è§‚æŸ¥çœ‹æ–‡æœ¬ä½“é‡</span>
print(f"âœ… æ–‡æ¡£åŠ è½½å®Œæˆï¼Œæ€»å­—ç¬¦æ•°ï¼š{len(docs<span class="hljs-section">[0]</span>.page_content)}")
</code></pre>
<h3 data-id="heading-7">2. æ–‡æ¡£åˆ†ç‰‡ï¼šæœ€ä¼˜ç­–ç•¥åˆ‡å‰²æ–‡æœ¬ï¼Œä¿ç•™ä¸Šä¸‹æ–‡å…³è”</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¯¼å…¥é€’å½’å­—ç¬¦åˆ†å‰²å™¨</span>
from langchain_text_splitters import RecursiveCharacterTextSplitter

<span class="hljs-comment"># åˆå§‹åŒ–æ–‡æœ¬åˆ†å‰²å™¨ï¼Œé‡‡ç”¨è¡Œä¸šæœ€ä¼˜çš„é€’å½’åˆ†å‰²ç­–ç•¥</span>
<span class="hljs-attr">text_splitter</span> = RecursiveCharacterTextSplitter(
    <span class="hljs-attr">chunk_size</span>=<span class="hljs-number">1000</span>,        <span class="hljs-comment"># å•ä¸ªæ–‡æœ¬å—æœ€å¤§å­—ç¬¦æ•°ï¼Œé€‚é…åµŒå…¥æ¨¡å‹è¾“å…¥é•¿åº¦é™åˆ¶</span>
    <span class="hljs-attr">chunk_overlap</span>=<span class="hljs-number">200</span>,      <span class="hljs-comment"># ç›¸é‚»æ–‡æœ¬å—é‡å å­—ç¬¦æ•°ï¼Œé¿å…å…³é”®ä¿¡æ¯è¢«æˆªæ–­ï¼Œä¿ç•™ä¸Šä¸‹æ–‡å…³è”æ€§</span>
    <span class="hljs-attr">add_start_index</span>=<span class="hljs-literal">True</span>,   <span class="hljs-comment"># è®°å½•æ–‡æœ¬å—åœ¨åŸå§‹æ–‡æ¡£ä¸­çš„èµ·å§‹ç´¢å¼•ï¼Œä¾¿äºæº¯æºåŒ¹é…å†…å®¹</span>
)

<span class="hljs-comment"># å¯¹åŠ è½½çš„æ–‡æ¡£è¿›è¡Œåˆ†ç‰‡å¤„ç†</span>
<span class="hljs-attr">all_splits</span> = text_splitter.split_documents(docs)

<span class="hljs-comment"># è¾“å‡ºåˆ†ç‰‡ç»“æœ</span>
print(f"âœ… æ–‡æ¡£åˆ†ç‰‡å®Œæˆï¼ŒåŸå§‹æ–‡æ¡£åˆ‡åˆ†ä¸º {len(all_splits)} ä¸ªå­æ–‡æ¡£")
</code></pre>
<h3 data-id="heading-8">3. å‘é‡å…¥åº“ï¼šå°†åˆ†ç‰‡æ–‡æœ¬å­˜å…¥å‘é‡åº“ï¼Œå®ŒæˆçŸ¥è¯†åº“æ„å»º</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å°†æ‰€æœ‰æ–‡æœ¬åˆ†ç‰‡å­˜å…¥å‘é‡å­˜å‚¨å™¨ï¼Œè‡ªåŠ¨å®Œæˆã€Œæ–‡æœ¬â†’å‘é‡ã€è½¬æ¢+å­˜å‚¨</span>
<span class="hljs-attr">document_ids</span> = vector_store.add_documents(documents=all_splits)

<span class="hljs-comment"># é¢„è§ˆå‰3ä¸ªæ–‡æœ¬å—çš„å”¯ä¸€æ ‡è¯†ID</span>
print(f"âœ… å‘é‡å…¥åº“å®Œæˆï¼Œæ–‡æœ¬å—IDé¢„è§ˆï¼š{document_ids<span class="hljs-section">[:3]</span>}")
</code></pre>
<hr/>
<h2 data-id="heading-9">âœ… å››ã€æ ¸å¿ƒå®ç°ï¼šæ„å»º RAG Agent æ£€ç´¢é—®ç­”æ™ºèƒ½ä½“ï¼ˆä¸¤ç§ä¸»æµæ–¹æ¡ˆï¼‰</h2>
<p>RAGçš„æ ¸å¿ƒä»·å€¼ï¼šè®©å¤§æ¨¡å‹ç»“åˆ<strong>å¤–éƒ¨çŸ¥è¯†åº“</strong>å›ç­”é—®é¢˜ï¼Œè§£å†³å¤§æ¨¡å‹ã€ŒçŸ¥è¯†è¿‡æ—¶ã€äº‹å®æ€§é”™è¯¯ã€é¢†åŸŸçŸ¥è¯†ä¸è¶³ã€çš„ç—›ç‚¹ï¼›</p>
<p>ä»¥ä¸‹æä¾›ä¸¤ç§å·¥ä¸šç•Œä¸»æµçš„RAG Agentå®ç°æ–¹æ¡ˆï¼ŒæŒ‰éœ€é€‰æ‹©å³å¯ï¼Œå‡ä¸ºå¯ç›´æ¥è¿è¡Œçš„æœ€ä¼˜å†™æ³•</p>
<h3 data-id="heading-10">âœ… æ–¹æ¡ˆä¸€ï¼šå·¥å…·è°ƒç”¨å‹ RAG Agentï¼ˆæ¨èï¼‰</h3>
<h4 data-id="heading-11">æ ¸å¿ƒé€»è¾‘</h4>
<p>è‡ªå®šä¹‰æ£€ç´¢å·¥å…·ï¼Œè®©å¤§æ¨¡å‹<strong>è‡ªä¸»å†³ç­–æ˜¯å¦è°ƒç”¨æ£€ç´¢å·¥å…·</strong>ï¼Œå¹¶åŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆç­”æ¡ˆï¼Œå…·å¤‡ã€Œå·¥å…·è°ƒç”¨æ€ç»´ã€ï¼Œé€‚é…å¤æ‚å¤šè½®é—®ç­”/å¤šæ­¥éª¤æŸ¥è¯¢åœºæ™¯ï¼Œçµæ´»æ€§æ‹‰æ»¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¼å…¥å·¥å…·è£…é¥°å™¨ï¼Œå°è£…è‡ªå®šä¹‰æ£€ç´¢å·¥å…·</span>
<span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> tool

<span class="hljs-comment"># å°è£…æ£€ç´¢å·¥å…·ï¼šè¿”å›æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡å†…å®¹+åŸå§‹æ–‡æ¡£å¯¹è±¡ï¼ŒæŒ‡å®šè¿”å›æ ¼å¼è§„èŒƒ</span>
<span class="hljs-meta">@tool(<span class="hljs-params">response_format=<span class="hljs-string">"content_and_artifact"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">retrieve_context</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""æ ¸å¿ƒæ£€ç´¢å·¥å…·ï¼šæ ¹æ®ç”¨æˆ·æŸ¥è¯¢è¯­å¥ï¼Œä»å‘é‡åº“ä¸­æ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œè¾…åŠ©å›ç­”é—®é¢˜"""</span>
    <span class="hljs-comment"># ç›¸ä¼¼åº¦æ£€ç´¢ï¼šè¿”å›åŒ¹é…åº¦æœ€é«˜çš„2æ¡æ–‡æœ¬å†…å®¹ï¼ˆkå€¼å¯æŒ‰éœ€è°ƒæ•´ï¼‰</span>
    retrieved_docs = vector_store.similarity_search(query, k=<span class="hljs-number">2</span>)
    <span class="hljs-comment"># æ ¼å¼åŒ–æ‹¼æ¥æ£€ç´¢ç»“æœï¼šå¸¦ä¸Šå…ƒæ•°æ®+æ–‡æœ¬å†…å®¹ï¼Œæå‡å¤§æ¨¡å‹ç†è§£æ•ˆç‡</span>
    serialized_context = <span class="hljs-string">"\n\n"</span>.join(
        (<span class="hljs-string">f"Source: <span class="hljs-subst">{doc.metadata}</span>\nContent: <span class="hljs-subst">{doc.page_content}</span>"</span>)
        <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs
    )
    <span class="hljs-comment"># è¿”å›æ ¼å¼åŒ–æ–‡æœ¬ + åŸå§‹æ–‡æ¡£ï¼Œå…¼é¡¾å¯è¯»æ€§ä¸æº¯æºæ€§</span>
    <span class="hljs-keyword">return</span> serialized_context, retrieved_docs

<span class="hljs-comment"># æ„å»ºå·¥å…·è°ƒç”¨å‹æ™ºèƒ½ä½“</span>
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent

<span class="hljs-comment"># é…ç½®æ™ºèƒ½ä½“æ ¸å¿ƒå‚æ•°ï¼šç»‘å®šå¤§æ¨¡å‹+æ£€ç´¢å·¥å…·+ç³»ç»Ÿæç¤ºè¯</span>
tools = [retrieve_context]
<span class="hljs-comment"># ç³»ç»Ÿæç¤ºè¯ï¼šæ˜ç¡®æ™ºèƒ½ä½“èƒ½åŠ›è¾¹ç•Œä¸è¡Œä¸ºå‡†åˆ™ï¼Œç²¾å‡†å¼•å¯¼å¤§æ¨¡å‹è°ƒç”¨å·¥å…·</span>
system_prompt = (
    <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é—®ç­”åŠ©æ‰‹ï¼Œä½ å¯ä»¥è°ƒç”¨æ£€ç´¢å·¥å…·è·å–å¤–éƒ¨çŸ¥è¯†åº“çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚\n"</span>
    <span class="hljs-string">"è¯·åŠ¡å¿…ä½¿ç”¨æ£€ç´¢å·¥å…·è¾…åŠ©å›ç­”ç”¨æˆ·çš„æŸ¥è¯¢é—®é¢˜ï¼Œç¡®ä¿ç­”æ¡ˆçš„å‡†ç¡®æ€§å’Œäº‹å®æ€§ã€‚"</span>
)
<span class="hljs-comment"># åˆå§‹åŒ–å·¥å…·è°ƒç”¨å‹RAG Agent</span>
agent = create_agent(model, tools, system_prompt=system_prompt)
</code></pre>
<h4 data-id="heading-12">âœ… æµ‹è¯•æ–¹æ¡ˆä¸€ï¼šå¤æ‚å¤šæ­¥éª¤æŸ¥è¯¢ï¼ˆæ™ºèƒ½ä½“è‡ªä¸»è°ƒç”¨å·¥å…·ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æµ‹è¯•æé—®ï¼šå¤šæ­¥éª¤å¤æ‚æŸ¥è¯¢ï¼Œè€ƒéªŒæ™ºèƒ½ä½“çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ä¸é€»è¾‘æ¨ç†èƒ½åŠ›</span>
query = (
    <span class="hljs-string">"What is the standard method for Task Decomposition?\n\n"</span>
    <span class="hljs-string">"Once you get the answer, look up common extensions of that method."</span>
)

<span class="hljs-meta"># æµå¼è¾“å‡ºå›ç­”ç»“æœï¼Œå®æ—¶æŸ¥çœ‹æ™ºèƒ½ä½“çš„æ€è€ƒ+å›ç­”è¿‡ç¨‹ï¼ˆä½“éªŒæ›´ä½³ï¼‰</span>
print(<span class="hljs-string">"===== å·¥å…·è°ƒç”¨å‹RAG Agent å›ç­”ç»“æœ ====="</span>)
<span class="hljs-keyword">for</span> <span class="hljs-keyword">event</span> <span class="hljs-keyword">in</span> agent.stream(
    {<span class="hljs-string">"messages"</span>: [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: query}]},
    stream_mode=<span class="hljs-string">"values"</span>,
):
    <span class="hljs-keyword">event</span>[<span class="hljs-string">"messages"</span>][<span class="hljs-number">-1</span>].pretty_print()
</code></pre>
<hr/>
<h3 data-id="heading-13">âœ… æ–¹æ¡ˆäºŒï¼šä¸Šä¸‹æ–‡æ³¨å…¥å‹ RAG Agentï¼ˆæç®€é«˜æ•ˆï¼‰</h3>
<h4 data-id="heading-14">æ ¸å¿ƒé€»è¾‘</h4>
<p>é€šè¿‡<strong>ä¸­é—´ä»¶(middleware)</strong> å®ç°ã€Œå…¨è‡ªåŠ¨æ£€ç´¢+ä¸Šä¸‹æ–‡æ³¨å…¥ã€ï¼Œæ— éœ€æ˜¾å¼å®šä¹‰å·¥å…·ï¼Œæ™ºèƒ½ä½“ä¼šåœ¨å›ç­”å‰<strong>è‡ªåŠ¨æ£€ç´¢</strong>å¹¶å°†ä¸Šä¸‹æ–‡æ³¨å…¥åˆ°ç³»ç»Ÿæç¤ºè¯ä¸­ï¼Œå…¨ç¨‹æ— æ„Ÿè°ƒç”¨ï¼Œä»£ç æç®€ã€è¿è¡Œé«˜æ•ˆï¼Œé€‚é…ç®€å•å•è½®é—®ç­”åœºæ™¯ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ„å»ºä¸Šä¸‹æ–‡æ³¨å…¥å‹æ™ºèƒ½ä½“</span>
<span class="hljs-keyword">from</span> langchain.agents.middleware <span class="hljs-keyword">import</span> dynamic_prompt, ModelRequest

<span class="hljs-comment"># å®šä¹‰åŠ¨æ€æç¤ºè¯ä¸­é—´ä»¶ï¼šè‡ªåŠ¨æ£€ç´¢+æ³¨å…¥ä¸Šä¸‹æ–‡ï¼Œæ— æ„ŸçŸ¥å®Œæˆæ£€ç´¢é€»è¾‘</span>
<span class="hljs-meta">@dynamic_prompt</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">prompt_with_context</span>(<span class="hljs-params">request: ModelRequest</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""æ ¸å¿ƒä¸­é—´ä»¶ï¼šä»è¯·æ±‚ä¸­æå–ç”¨æˆ·æœ€æ–°é—®é¢˜ï¼Œæ£€ç´¢ç›¸å…³ä¸Šä¸‹æ–‡å¹¶æ³¨å…¥ç³»ç»Ÿæç¤ºè¯"""</span>
    <span class="hljs-comment"># æå–ç”¨æˆ·æœ€æ–°çš„æŸ¥è¯¢è¯­å¥</span>
    last_query = request.state[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>].text
    <span class="hljs-comment"># è‡ªåŠ¨æ‰§è¡Œç›¸ä¼¼åº¦æ£€ç´¢ï¼Œè·å–ç›¸å…³ä¸Šä¸‹æ–‡</span>
    retrieved_docs = vector_store.similarity_search(last_query)
    <span class="hljs-comment"># æ ¼å¼åŒ–æ‹¼æ¥æ£€ç´¢åˆ°çš„æ–‡æœ¬å†…å®¹</span>
    docs_content = <span class="hljs-string">"\n\n"</span>.join(doc.page_content <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> retrieved_docs)
    <span class="hljs-comment"># æ„é€ å¸¦ä¸Šä¸‹æ–‡çš„ç³»ç»Ÿæç¤ºè¯ï¼Œè®©å¤§æ¨¡å‹åŸºäºå¤–éƒ¨çŸ¥è¯†å›ç­”</span>
    system_message = (
        <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šä¸”ä¹äºåŠ©äººçš„é—®ç­”åŠ©æ‰‹ï¼Œè¯·ä¸¥æ ¼åŸºäºä¸‹æ–¹æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å›ç­”ç”¨æˆ·é—®é¢˜ï¼š\n\n"</span>
        <span class="hljs-string">f"<span class="hljs-subst">{docs_content}</span>"</span>
    )
    <span class="hljs-keyword">return</span> system_message

<span class="hljs-comment"># åˆå§‹åŒ–ä¸Šä¸‹æ–‡æ³¨å…¥å‹RAG Agentï¼šæ— éœ€ä¼ å…¥å·¥å…·ï¼Œä¸­é—´ä»¶è‡ªåŠ¨å®Œæˆæ£€ç´¢é€»è¾‘</span>
agent = create_agent(model, tools=[], middleware=[prompt_with_context])
</code></pre>
<h4 data-id="heading-15">âœ… æµ‹è¯•æ–¹æ¡ˆäºŒï¼šåŸºç¡€å•è½®æŸ¥è¯¢ï¼ˆæç®€é«˜æ•ˆï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æµ‹è¯•æé—®ï¼šåŸºç¡€å•è½®æŸ¥è¯¢ï¼ŒéªŒè¯ä¸Šä¸‹æ–‡æ³¨å…¥æ•ˆæœ</span>
<span class="hljs-attr">query</span> = <span class="hljs-string">"What is task decomposition?"</span>

<span class="hljs-comment"># æµå¼è¾“å‡ºå›ç­”ç»“æœ</span>
print("\<span class="hljs-attr">n</span>===== ä¸Šä¸‹æ–‡æ³¨å…¥å‹RAG Agent å›ç­”ç»“æœ =====<span class="hljs-string">")
for step in agent.stream(
    {"</span>messages<span class="hljs-string">": [{"</span>role<span class="hljs-string">": "</span>user<span class="hljs-string">", "</span>content<span class="hljs-string">": query}]},
    stream_mode="</span>values<span class="hljs-string">",
):
    step["</span>messages<span class="hljs-string">"][-1].pretty_print()
</span></code></pre>
<hr/>
<h2 data-id="heading-16">âœ¨ æ ¸å¿ƒçŸ¥è¯†ç‚¹è¡¥å……ï¼ˆæ˜é‡‘ä¸“å±ï¼ŒåŠ åˆ†é¡¹ï¼‰</h2>
<h3 data-id="heading-17">âœ… ä¸¤ç§Agentæ–¹æ¡ˆå¯¹æ¯” &amp; é€‰å‹å»ºè®®</h3>
<ol>
<li><strong>å·¥å…·è°ƒç”¨å‹ï¼ˆæ–¹æ¡ˆä¸€ï¼‰</strong> ï¼šé€‚åˆã€Œå¤æ‚æŸ¥è¯¢ã€å¤šè½®é—®ç­”ã€å¤šæ­¥éª¤æ¨ç†ã€åœºæ™¯ï¼Œå¤§æ¨¡å‹è‡ªä¸»å†³ç­–æ˜¯å¦è°ƒç”¨å·¥å…·ï¼Œçµæ´»æ€§å¼ºï¼Œæ˜¯å·¥ä¸šç•Œä¸»æµæ–¹æ¡ˆï¼›</li>
<li><strong>ä¸Šä¸‹æ–‡æ³¨å…¥å‹ï¼ˆæ–¹æ¡ˆäºŒï¼‰</strong> ï¼šé€‚åˆã€Œç®€å•å•è½®é—®ç­”ã€å¿«é€Ÿå¼€å‘ã€åœºæ™¯ï¼Œä»£ç é‡å°‘ã€æ— æ„ŸçŸ¥æ£€ç´¢ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼Œä½†çµæ´»æ€§ç¨å¼±ã€‚</li>
</ol>
<h3 data-id="heading-18">âœ… æ ¸å¿ƒä¼˜åŒ–ç‚¹è¯´æ˜</h3>
<ol>
<li><code>temperature=0.1</code>ï¼šä½æ¸©åº¦å€¼ä¿è¯å›ç­”çš„<strong>ç²¾å‡†æ€§å’Œç¡®å®šæ€§</strong>ï¼Œé€‚é…çŸ¥è¯†ç±»é—®ç­”åœºæ™¯ï¼Œé¿å…ç”Ÿæˆæ— å…³å†…å®¹ï¼›</li>
<li><code>chunk_overlap=200</code>ï¼šæ–‡æœ¬å—é‡å è®¾è®¡ï¼Œå½»åº•è§£å†³ã€Œå…³é”®ä¿¡æ¯è¢«æˆªæ–­ã€çš„é—®é¢˜ï¼Œæå‡æ£€ç´¢å¬å›ç‡ï¼›</li>
<li>æµå¼è¾“å‡º<code>stream()</code>ï¼šå®æ—¶è¿”å›å›ç­”å†…å®¹ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…ï¼›</li>
<li><code>InMemoryVectorStore</code>ï¼šè½»é‡åŒ–å‘é‡åº“ï¼Œæ— éœ€éƒ¨ç½²ã€æ— éœ€æŒä¹…åŒ–ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘å’Œæ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒå¯æ›¿æ¢ä¸ºChroma/Pineconeç­‰æŒä¹…åŒ–å‘é‡åº“ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-19">âœ¨ æ€»ç»“</h3>
<p>æœ¬æ–‡å®Œæ•´å®ç°äº†åŸºäºLangChainçš„RAG Agentæ™ºèƒ½æ£€ç´¢é—®ç­”ç³»ç»Ÿï¼Œä»ã€Œä¾èµ–å®‰è£…â†’ç»„ä»¶é…ç½®â†’æ–‡æ¡£å¤„ç†â†’æ™ºèƒ½ä½“æ„å»ºâ†’æµ‹è¯•éªŒè¯ã€å…¨æµç¨‹é—­ç¯ï¼Œä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œï¼Œä¸¤ç§ä¸»æµæ–¹æ¡ˆå…¨è¦†ç›–ï¼Œé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ã€‚RAGä½œä¸ºLLMè½åœ°çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œè¯¥å¥—ä»£ç å¯æ— ç¼è¿ç§»è‡³PDF/æ–‡æ¡£/æœ¬åœ°çŸ¥è¯†åº“ç­‰åœºæ™¯ï¼Œå®ç”¨æ€§æ‹‰æ»¡ã€‚</p>
<h3 data-id="heading-20">ä»£ç ä»“åº“</h3>
<p>giteeï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgitee.com%2Fo_insist%2Flangchain1.0_learn.git" title="https://link.juejin.cn/?target=https%3A%2F%2Fgitee.com%2Fo_insist%2Flangchain1.0_learn.git" target="_blank">gitee.com/o_insist/laâ€¦</a></p>
<p>githubï¼š<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fo-insist%2Flangchain1.0_learn.git" title="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fo-insist%2Flangchain1.0_learn.git" target="_blank">github.com/o-insist/laâ€¦</a></p>
<p>ğŸ”¥ ç‚¹èµ+æ”¶è—ï¼Œåç»­æŒç»­æ›´æ–°LangChain/RAG/Agentç›¸å…³å®æˆ˜æ•™ç¨‹ï¼Œå¹²è´§æ»¡æ»¡ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼šVibe Codingå¯¹æˆ‘çš„å½±å“]]></title>    <link>https://juejin.cn/post/7595974133097512994</link>    <guid>https://juejin.cn/post/7595974133097512994</guid>    <pubDate>2026-01-18T03:20:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133097512994" data-draft-id="7595974133097381922" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼šVibe Codingå¯¹æˆ‘çš„å½±å“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-18T03:20:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ShanekAI"/> <meta itemprop="url" content="https://juejin.cn/user/2027971409616333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼šVibe Codingå¯¹æˆ‘çš„å½±å“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2027971409616333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ShanekAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T03:20:03.000Z" title="Sun Jan 18 2026 03:20:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>èµ·åˆåœ¨chatgptåˆšå‡ºæ¥çš„æ—¶å€™ï¼Œç”¨å®ƒåšä¸€äº›ç¼–ç ï¼Œreviewä»£ç ï¼Œæ„Ÿè§‰ç¡®å®æœ‰ç‚¹ä¸œè¥¿ï¼Œä½†æ˜¯æ€»è§‰å¾—å®ƒæ˜¯ä¸€ä¸ªæ™ºèƒ½ç‚¹çš„æœç´¢å™¨ç½¢äº†ï¼Œè€Œä¸”æ¯æ¬¡çš„è¾“å‡ºä¹Ÿä¸ä¸€å®šç›¸åŒï¼Œæ‰€ä»¥æœ‰ç‚¹è½»è§†äº†AIçš„å½±å“ã€‚ç›´åˆ°cursorå‡ºæ¥çš„æ—¶å€™ï¼Œæˆ‘ç¬¬ä¸€æ¬¡æ„Ÿè§‰åˆ°äº†é¢ è¦†ï¼Œå¯¹AIçš„è®¤çŸ¥ä¹Ÿä¸å†å±€é™äºä¸€ä¸ªæ™ºèƒ½æœç´¢å™¨çš„å½±å“ä¸­ï¼Œå¼€å§‹æ­£è§†å®ƒï¼Œå¼€å§‹äº†è§£å®ƒï¼Œå¼€å§‹å­¦ä¹ å®ƒï¼Œå¼€å§‹ç”¨å¥½å®ƒã€‚ç°åœ¨å®ƒå®Œå®Œå…¨å…¨å°±æ˜¯ä¸€ä¸ªä¸“å®¶ï¼Œç»™ä»–å¥½ç”¨çš„å·¥å…·ï¼ˆMCPã€Skillsï¼‰ç­‰ï¼Œæ¸…æ™°çš„é—®é¢˜æè¿°ä¸ç²¾ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå®ƒå®Œå…¨å¯ä»¥è§£å†³å·¥ä½œä¸­é‚£äº›éœ€æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-0">AIç¼–ç </h2>
<p>ç°åœ¨æˆ‘ä¸ç®¡æ˜¯å·¥ä½œéœ€æ±‚ï¼Œè¿˜æ˜¯ä¸ªäººç©ä¸€ç©çš„é¡¹ç›®ï¼Œç™¾åˆ†ä¹‹å…­åä»¥ä¸Šçš„ä»£ç éƒ½æ˜¯AIç”Ÿæˆï¼Œçœ‹ä¼¼è¿™ä¸ªæ¯”ä¾‹ä¸æ˜¯å¾ˆé«˜ï¼Œå…¶å®å¾ˆå¤§ç¨‹åº¦æ˜¯æˆ‘æ²¡æœ‰ç»™å®ƒæè¿°æ¸…æ¥šï¼Œè®©ä»–mockäº†ä¸€äº›å®ç°ï¼Œä½†æ˜¯æˆ‘æ”¹åŠ¨èµ·æ¥ä¹Ÿæ¯”è¾ƒå¿«ï¼Œå°±ä¸€ç›´è¿™ä¹ˆé…åˆç€ï¼›è¿˜æœ‰ä¸€ä¸ªåŸå› æ˜¯å…¬å¸è¦æ±‚çš„å•æµ‹è¦†ç›–ç‡è¦95%ï¼Œæœ‰ç‚¹å¤¸å¼ ï¼Œè€ŒAIå¯èƒ½ç¡®å®åœ¨è¿™å—çš„é¢„æ–™ç›¸å¯¹å°‘ï¼Œå¯¼è‡´ç”Ÿæˆçš„å•æµ‹çš„è´¨é‡ä¸æ˜¯å¾ˆé«˜ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘è¦ä»‹å…¥ä¸€ä¸‹ï¼Œå¤šæ•°éœ€æ±‚ç¼–ç åœºæ™¯ï¼Œå®ƒéƒ½å¯ä»¥ç‹¬è‡ªå®Œæˆã€‚</p>
<p>ä½†æ˜¯è¿™ä¹Ÿå¯¼è‡´äº†ä»»åŠ¡çš„å·¥æœŸç¼©çŸ­ï¼ŒåŸæœ¬ä¸¤å‘¨çš„è¿­ä»£å¼€å‘ï¼Œæœ‰äº†AIè¾…åŠ©ï¼Œé¢†å¯¼åªæ„¿æ„ç»™ä½ ä¸¤å¤©ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯éœ€è¦è‡ªæµ‹+è¾“å‡ºæŠ¥å‘Šï¼Œå¹¶ä¸”æ¯ä¸ªä»»åŠ¡å°±ç®—AIç¼–ç ä¹Ÿä¸èƒ½ä¿è¯æ²¡æœ‰æ•…éšœï¼Œå°±ä¼šå¯¼è‡´æ–°çš„ä»»åŠ¡å¼€å§‹å¼€å‘äº†ï¼Œè¿˜åœ¨æ”¹ä¹‹å‰ä»»åŠ¡çš„bug,å¿ƒç´¯çš„è¯´ä¸å‡ºè¯æ¥ã€‚</p>
<h2 data-id="heading-1">AIææ•ˆ</h2>
<p>è¿™ä¸ªè¯æ˜¯æœ€è¿‘ä¸€å¹´æœ€ç«çƒ­çš„è¯ï¼Œä¸ç®¡æ˜¯å¤§å‚ã€ä¸­å‚ã€å°å‚ã€‚éœ€æ±‚ææ•ˆã€æµ‹è¯•ææ•ˆã€å¼€å‘ææ•ˆç­‰æœ€ç»ˆéƒ½ä¼šåœ¨äººå‘˜ææ•ˆä¸Šé—­ç¯ã€‚ä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯æŠ€æœ¯å˜é©æ‰€å¸¦æ¥çš„å¿…è¦ç»“æœå‘¢ï¼Œåæ­£è¿‡å»ä¸€å¹´ä»»åŠ¡åœ¨å¢åŠ ï¼Œäººå‘˜åœ¨å‡å°‘è¿™ä»¶äº‹åœ¨æˆ‘çš„é¡¹ç›®ï¼Œæˆ‘å‘¨å›´çš„é¡¹ç›®å›¢é˜Ÿæˆäº†ä¸€ä»¶å¾ˆæ­£å¸¸çš„äº‹äº†ã€‚</p>
<h2 data-id="heading-2">å¼€æºç¤¾åŒº</h2>
<p>è¿‡å»å‡ ä¸ªæœˆæˆ‘ä¹Ÿä¸æ€ä¹ˆåšåˆ†äº«äº†ï¼Œæˆ‘è¯´çš„å†…å®¹åŠ¨åŠ¨æ‰‹æŒ‡ï¼Œåˆ°chatgptã€Google AI studioç­‰å¹³å°åŸºæœ¬èƒ½è·å¾—æ›´é«˜è´¨é‡çš„å›ç­”ï¼Œè€Œä¸”æˆ‘ä¹Ÿå‡å°‘äº†çœ‹ç¤¾åŒºå†…å®¹çš„ä¹ æƒ¯ï¼Œå› ä¸ºæœ‰äº›æ–‡ç« ä»AIæ‹·è´è¿‡æ¥ï¼Œä¸ç»è¿‡éªŒè¯å°±å‘å‡ºæ¥ï¼Œè¿™äº›ä¸è´Ÿè´£ä»»çš„åšæ³•ï¼Œæœ‰å¯èƒ½å¯¼è‡´åˆ«äººåœ¨ç”Ÿäº§ä¸­é‡åˆ°é—®é¢˜ï¼Œå¸Œæœ›åˆ†äº«çš„äººï¼Œæœ€èµ·ç æŠŠéªŒè¯è¿‡çš„å†…å®¹å‘å‡ºæ¥ã€‚</p>
<h2 data-id="heading-3">åšå®¢</h2>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œåšå®¢å½¢å¼çš„åˆ†äº«è¶Šæ¥è¶Šå—æ¬¢è¿ã€‚æ˜¯ä¸æ˜¯æ¯”èµ·å†°å†·çš„æ–‡å­—ï¼Œå¯è§çš„å£è¿°æ˜¯ä¸€ç§æ›´å¥½çš„åˆ†äº«å‘¢ï¼Ÿ</p>
<h2 data-id="heading-4">å†™åœ¨æœ€å</h2>
<p>AIæ˜¯ä¼šè¶Šæ¥è¶Šå‰å®³ï¼Œä¸å…¶åšæŠ±æ€¨çš„çººç»‡å·¥ï¼Œä¸å¦‚å­¦ä¹ ç”¨å¥½çººç»‡æœºå§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰â€”â€”å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²å®æˆ˜ï¼ˆVllmä¸Ollamaï¼‰]]></title>    <link>https://juejin.cn/post/7595896809652437032</link>    <guid>https://juejin.cn/post/7595896809652437032</guid>    <pubDate>2026-01-18T03:19:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595896809652437032" data-draft-id="7595414148487282728" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰â€”â€”å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²å®æˆ˜ï¼ˆVllmä¸Ollamaï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,DeepSeek"/> <meta itemprop="datePublished" content="2026-01-18T03:19:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆä¸‰ï¼‰â€”â€”å¤§æ¨¡å‹æœ¬åœ°éƒ¨ç½²å®æˆ˜ï¼ˆVllmä¸Ollamaï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T03:19:25.000Z" title="Sun Jan 18 2026 03:19:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7594655863548297268" target="_blank" title="https://juejin.cn/post/7594655863548297268">å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ</a>å‰–æäº†å¤§æ¨¡å‹çš„æ ¸å¿ƒæ–‡ä»¶ç»„æˆä¸ç”ŸæˆåŸç†ï¼Œå¹¶é€šè¿‡å®æˆ˜æ¼”ç¤ºäº†ä»æ¨¡å‹åŠ è½½åˆ°æ–‡æœ¬ç”Ÿæˆçš„å®Œæ•´æµç¨‹ã€‚é‚£ä¹ˆåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¸å¦‚ DeepSeekã€è±†åŒ…è¿™ç±»å¤§å®¶æ—¥å¸¸ä½¿ç”¨çš„å¤§æ¨¡å‹ï¼Œç©¶ç«Ÿæ˜¯å¦‚ä½•é«˜æ•ˆéƒ¨ç½²å¹¶æ”¯æ’‘å¤§è§„æ¨¡è°ƒç”¨å‘¢ï¼Ÿæœ¬ç¯‡ç¬”è€…ä¸å¤§å®¶ä¸€èµ·å®æˆ˜ä¸¤ç§ä¸»æµéƒ¨ç½²æ–¹æ¡ˆï¼š<strong>é€‚åˆæœ¬åœ°å¿«é€Ÿå®éªŒçš„ Ollama éƒ¨ç½²</strong>ä¸<strong>é¢å‘ç”Ÿäº§ç¯å¢ƒçš„é«˜æ€§èƒ½ Vllm éƒ¨ç½²</strong>ã€‚ç¬”è€…å°†ä»ç¯å¢ƒå‡†å¤‡ã€éƒ¨ç½²æ­¥éª¤åˆ°è°ƒç”¨ç¤ºä¾‹é€ä¸€å±•å¼€ï¼Œå¸®åŠ©å¤§å®¶åœ¨ä¸åŒåœºæ™¯ä¸‹éƒ½èƒ½é¡ºåˆ©æ­å»ºè‡ªå·±çš„å¤§æ¨¡å‹æœåŠ¡ã€‚(æ¸©é¦¨æç¤ºï¼šæœ¬ç« å†…å®¹è¾ƒé•¿ï¼Œä½†è¯¦å®è®°è½½äº†æœ¬åœ°éƒ¨ç½²çš„ç›¸å…³æ­¥éª¤ï¼Œå¹¶ç»™å‡ºäº†ä¼˜åŒ–æŒ‡å—ï¼Œå¤§å®¶å¦‚æœå¯¹éƒ¨ç½²æœ¬åœ°å¤§æ¨¡å‹ä¸ç†Ÿæ‚‰å¯æ”¶è—é˜…è¯»ï¼Œæ„Ÿè°¢æ”¯æŒ)ã€‚</p>
<p>å¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<p>é™¤å¤§æ¨¡å‹è®­ç»ƒå¤–ï¼Œç¬”è€…ä¹Ÿåœ¨åŒæ­¥æ›´æ–°<a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>å…è´¹ä¸“æ ï¼Œè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 37 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹ä¼˜åŠ¿</h2>
<p>ç›¸ä¿¡å¾ˆå¤šåŒå­¦å’Œæˆ‘ä¸€æ ·ï¼Œå¹³æ—¶ä¼šç›´æ¥ä½¿ç”¨ DeepSeekã€é€šä¹‰åƒé—®ç­‰æä¾›çš„ API æœåŠ¡â€”â€”è¿™ç§æ–¹å¼ç¡®å®æ–¹ä¾¿å¿«æ·ã€‚æ—¢ç„¶äº‘ç«¯è°ƒç”¨å¦‚æ­¤ä¾¿åˆ©ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å­¦ä¹ æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹å‘¢ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d41b84e1bee84b248ed58599ea821c06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=nep5%2B2JfDst5NdX%2BS80d6%2FnhF3Q%3D" alt="0.png" loading="lazy"/></p>
<p>ä¸äº‘ç«¯éƒ¨ç½²ç›¸æ¯”ï¼Œå°†å¤§æ¨¡å‹éƒ¨ç½²åœ¨æœ¬åœ°é€šå¸¸å…·å¤‡ä»¥ä¸‹å‡ ç‚¹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ•°æ®éšç§ä¸å®‰å…¨å¯æ§</strong><br/>
è®¸å¤šä¼ä¸šä¼šä½¿ç”¨å†…éƒ¨æ•°æ®è®­ç»ƒæˆ–å¾®è°ƒå¤§æ¨¡å‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éš¾å…éœ€è¦æ¨¡å‹å‚ä¸æ•°æ®å¤„ç†ã€‚ä¸ºé¿å…ä¼ä¸šæœºå¯†ã€ä¸ªäººéšç§æˆ–å—ç›‘ç®¡æ•°æ®ä¸Šä¼ è‡³ç¬¬ä¸‰æ–¹å¹³å°ï¼Œæœ¬åœ°éƒ¨ç½²èƒ½æ›´å¥½åœ°æ»¡è¶³æ•°æ®åˆè§„è¦æ±‚ï¼Œä¿éšœæ•°æ®ä¸å‡ºåŸŸã€‚</li>
<li><strong>å®Œå…¨è‡ªä¸»çš„æ§åˆ¶æƒ</strong><br/>
äº‘ç«¯æœåŠ¡å¯èƒ½å› å‚å•†é™é€Ÿã€æœåŠ¡ä¸­æ–­æˆ–æ¨¡å‹ç‰ˆæœ¬æ›´æ–°è€Œå¯¼è‡´è°ƒç”¨å¤±è´¥æˆ–æ•ˆæœæ³¢åŠ¨ï¼ˆä¾‹å¦‚å¹´åˆ DeepSeek æœåŠ¡å—æ”»å‡»ï¼Œæˆ–å¹³æ—¶å¿˜è®°ç»­è´¹å¯¼è‡´è°ƒç”¨å¤±è´¥ï¼‰ã€‚æœ¬åœ°éƒ¨ç½²åˆ™ç¡®ä¿æ¨¡å‹ç‰ˆæœ¬ã€æœåŠ¡ç¨³å®šæ€§å®Œå…¨ç”±è‡ªå·±æŒæ§ï¼Œé¿å…å› å¤–éƒ¨å› ç´ å½±å“ä¸šåŠ¡è¿ç»­æ€§ã€‚</li>
<li><strong>é•¿æœŸæˆæœ¬æ›´å¯æ§</strong><br/>
è™½ç„¶åˆæœŸéœ€è¦æŠ•å…¥ç¡¬ä»¶ä¸éƒ¨ç½²æˆæœ¬ï¼Œä½†é•¿æœŸä½¿ç”¨è¾¹é™…æˆæœ¬æä½ï¼Œå°¤å…¶é€‚åˆé«˜é¢‘è°ƒç”¨æˆ–è§„æ¨¡åŒ–åº”ç”¨åœºæ™¯ã€‚è¿™ä¹Ÿé¿å…äº†å› ä¾›åº”å•†å®šä»·ç­–ç•¥è°ƒæ•´è€Œå¸¦æ¥çš„ä¸ç¡®å®šæ€§ï¼Œæœ‰åˆ©äºé•¿æœŸé¡¹ç›®è§„åˆ’ã€‚</li>
</ol>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¯¹äºé‡è§†æ•°æ®å®‰å…¨ã€éœ€è¦ç¨³å®šæœåŠ¡æˆ–é•¿æœŸæˆæœ¬æ§åˆ¶çš„ä¼ä¸šã€ç§‘ç ”å›¢é˜ŸåŠå¼€å‘è€…æ¥è¯´ï¼ŒæŒæ¡æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹çš„èƒ½åŠ›å…·æœ‰é‡è¦ä»·å€¼ã€‚å®ƒä¸ä»…æ˜¯æŠ€æœ¯ä¿éšœï¼Œä¹Ÿé€æ¸æˆä¸ºä¸€é¡¹æ ¸å¿ƒç«äº‰ä¼˜åŠ¿ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œç¬”è€…å°†ä¸ºå¤§å®¶åˆ†äº«ä¸¤ç§å®ç”¨çš„éƒ¨ç½²æ–¹æ¡ˆï¼šé€‚åˆç”Ÿäº§ç¯å¢ƒçš„é«˜æ€§èƒ½Â <strong>Vllm</strong>Â éƒ¨ç½²æ–¹æ¡ˆï¼Œä»¥åŠé€‚åˆæœ¬åœ°å¿«é€Ÿå®éªŒçš„Â <strong>Ollama</strong>Â éƒ¨ç½²æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-2">äºŒã€VLLMå¤§æ¨¡å‹éƒ¨ç½²æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">2.1 è®¤è¯†VLLM</h3>
<p>è™½ç„¶å¯ä»¥ä½¿ç”¨Â <code>transformers</code>Â åº“æ¥å®Œæˆå¤§æ¨¡å‹çš„è°ƒç”¨å’Œæ¨ç†ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¾€å¾€éœ€è¦æ›´é«˜çš„æ¨ç†æ•ˆç‡ã€‚ä¸ºæ­¤ä¸“ä¸ºé«˜æ€§èƒ½æ¨ç†çš„Â <code>vllm</code>Â åº“åº”è¿è€Œç”Ÿã€‚</p>
<p>vLLM æ˜¯åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡å¼€å‘çš„ä¸€ä¸ª Python åº“ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äº<strong>åˆ›æ–°çš„å†…å­˜ç®¡ç†æŠ€æœ¯ã€é«˜æ•ˆçš„ä»»åŠ¡è°ƒåº¦èƒ½åŠ›ï¼Œä»¥åŠå‡ºè‰²çš„æ˜“ç”¨æ€§å’Œå…¼å®¹æ€§</strong>ã€‚è¿™ä½¿å¾—å®ƒèƒ½åœ¨ç›¸åŒç¡¬ä»¶ä¸Šæ˜¾è‘—æå‡æ¨¡å‹æ¨ç†çš„ååé‡ä¸å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚å› æ­¤ï¼ŒvLLM éå¸¸é€‚åˆéœ€è¦å¿«é€Ÿå“åº”ã€é«˜å¹¶å‘çš„ç”Ÿäº§ç¯å¢ƒã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒvLLM ç›®å‰ä»…æ”¯æŒ Linux ç³»ç»Ÿï¼Œåœ¨ Windows ä¸‹æ— æ³•ä½¿ç”¨ã€‚å¦‚æœå¤§å®¶ä½¿ç”¨çš„æ˜¯ Windows ç¯å¢ƒï¼Œå¯ä»¥è€ƒè™‘ä¸‹æ–‡å°†ä»‹ç»çš„ Ollama æ¡†æ¶ä½œä¸ºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c34d4f9eae04f16afd73c0a1f6c2a4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=diIqHenp4rb7rspq7FA65SaVEXA%3D" alt="1.png" loading="lazy"/></p>
<p>vllmçš„æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹:</p>
<ol>
<li><strong>æè‡´çš„å†…å­˜æ•ˆç‡:</strong> åˆ©ç”¨åˆ†é¡µæ³¨æ„åŠ›æœºåˆ¶å’ŒKVç¼“å­˜ï¼Œ å°†æ˜¾å­˜åˆ©ç”¨ç‡æé«˜åˆ°90%</li>
<li><strong>æé«˜çš„ååé‡ä¸å¹¶å‘ï¼š</strong> åŠ¨æ€åˆå¹¶æ–°è¯·æ±‚åˆ°æ­£åœ¨è¿›è¡Œçš„æ‰¹å¤„ç†ä¸­ï¼Œ<strong>æŒç»­â€œæ¦¨å¹²â€GPUç®—åŠ›</strong>ï¼Œååé‡å¯è¾¾ä¼ ç»Ÿé™æ€æ‰¹å¤„ç†çš„2.8å€</li>
<li><strong>å¼€ç®±å³ç”¨çš„æ˜“ç”¨æ€§ï¼š</strong> vllmä¸Â <strong>HuggingFace</strong>Â æ— ç¼é›†æˆï¼Œæ›´æ˜¯æä¾›Â <strong>OpenAIå…¼å®¹çš„API</strong>ï¼Œæ— éœ€å¤æ‚è½¬æ¢å³å¯åŠ è½½ä¸»æµå¼€æºæ¨¡å‹ï¼›ç°æœ‰åº”ç”¨å¯æ— ç¼è¿ç§»ï¼Œæå¤§é™ä½éƒ¨ç½²é—¨æ§›ã€‚</li>
</ol>
<h3 data-id="heading-4">2.2 VLLMå¤§æ¨¡å‹éƒ¨ç½²æ–¹æ¡ˆå®æˆ˜</h3>
<p>æ—¢ç„¶vllméƒ¨ç½²æœ‰è¿™ä¹ˆå¤§çš„ä¼˜ç‚¹ï¼Œé‚£æ¥ä¸‹æ¥å¿…ç„¶è¦å­¦ä¹ ä¸€ä¸‹vllmçš„éƒ¨ç½²æ–¹æ³•äº†ï¼Œæœ¬æ¬¡å®éªŒç¯å¢ƒåŒæ ·æ˜¯åœ¨ä¹ç« äº‘æç®—åŠ›å¹³å°ä¸‹è¿›è¡Œéƒ¨ç½²ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> ï¼Œå…è´¹ä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<ol>
<li>
<p><strong>åˆ›å»ºå®ä¾‹ï¼š</strong> æ‰“å¼€<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fhome" target="_blank" title="https://www.lab4ai.cn/home" ref="nofollow noopener noreferrer">Lab4AIå®˜ç½‘</a>ï¼Œæ–°å»ºä¸€ä¸ª VS Code äº‘å®ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a8434c7ac534356a5b3d4c0e85259c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=9e7XrogfNS7mfeo5FGEc9O%2FjP%2Bs%3D" alt="2.png" loading="lazy"/></p>
</li>
<li>
<p><strong>é€‰æ‹©é•œåƒï¼š</strong> åœ¨æ–°å»ºå®ä¾‹é¡µé¢ï¼Œé€‰æ‹©é€‚åˆçš„é•œåƒå¹¶å®Œæˆåˆ›å»ºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d0ec9a3e32b42c2a2167a665e80efd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=XD%2FLoJOTYIgnFko7EA5JFYd8egE%3D" alt="3.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1823c4078e624aea836abb580e3acc29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=hEWjRJtYYNb0KQk34nizWi0Uptg%3D" alt="4.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æ£€æŸ¥ç¯å¢ƒï¼š</strong> ç‚¹å‡» VS Code ä¸­çš„ Terminalï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿå·²é¢„ç½®åä¸ºÂ <code>lf</code>Â çš„ Anaconda è™šæ‹Ÿç¯å¢ƒï¼Œå…¶ä¸­å·²å®‰è£…Â <code>llamafactory</code>Â åº“åŠå…¶ä¾èµ–ï¼ˆåŒ…æ‹¬ vLLMï¼‰ã€‚<br/>
æ‰§è¡ŒÂ <code>pip show vllm</code>Â å¯æŸ¥çœ‹å½“å‰ vLLM ç‰ˆæœ¬ã€‚å¤§å®¶ä¹Ÿå¯ä»¥é€šè¿‡Â <code>pip install vllm==xxx</code>Â å®‰è£…æŒ‡å®šç‰ˆæœ¬ï¼Œä½†é¢„ç½®ç‰ˆæœ¬é€šå¸¸å·²è¶³å¤Ÿæ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b7016163cbf4616b68b598651c7913b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=GoprIr6ei81FYAIBDRda6I6PHdQ%3D" alt="6.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æŸ¥çœ‹æ˜¾å­˜ï¼š</strong> vLLM å¯¹æ˜¾å­˜è¦æ±‚è¾ƒé«˜ã€‚æ‰§è¡ŒÂ <code>nvidia-smi</code>Â å‘½ä»¤æŸ¥çœ‹å½“å‰ GPU èµ„æºã€‚å¦‚å›¾æ‰€ç¤ºï¼Œç¯å¢ƒé…å¤‡äº†ä¸€å— 80G æ˜¾å­˜çš„ H100 æ˜¾å¡ã€‚<br/>
<strong>æ³¨æ„</strong>ï¼šä¸€ä¸ª 32B å‚æ•°æ¨¡å‹çº¦éœ€ 66G æ˜¾å­˜ï¼ŒH100 å•å¡éƒ¨ç½²å¯èƒ½ç´§å¼ ã€‚ä¸ºä¾¿äºæ¼”ç¤ºï¼Œç¬”è€…é€‰ç”¨æ›´è½»é‡çš„Â <code>Qwen3-4B</code>Â æ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a867871529944edbb69efb34add09eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=4fZYhgeGZIXnbalzGINZnHTahHE%3D" alt="19.png" loading="lazy"/></p>
</li>
<li>
<p><strong>ä¸‹è½½æ¨¡å‹:</strong> è¿è¡Œå¤§æ¨¡å‹ç¬¬ä¸€æ­¥é¦–å…ˆè¦ä¸‹è½½å¤§æ¨¡å‹ï¼Œå¤§å®¶è¿˜è®°å¾— <a href="https://juejin.cn/post/7594728203258347554" target="_blank" title="https://juejin.cn/post/7594728203258347554">å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ</a> ä¸Šä¸€å°èŠ‚å†…å®¹ä¸­æ•™å¤§å®¶å¦‚ä½•ä»modelscopeå¤„è·å¾—æ¨¡å‹çš„æ–¹æ³•å§ï¼Œè®¿é—® ModelScope å®˜ç½‘ï¼Œæœç´¢Â <code>Qwen3-4B</code>Â æ¨¡å‹ã€‚ç‚¹å‡»ä¸‹è½½ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºä¸‹è½½å‘½ä»¤ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e605b79d9034fccbfa28c8178a924e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=yfF8jxYROfdreb%2F63UKs9F8nR8M%3D" alt="7.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æ‰§è¡Œä¸‹è½½:</strong> åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<code>modelscope download --model Qwen/Qwen3-4B --local_dir ./Qwen3-4B</code>å°†Qwen3-4Bæ¨¡å‹ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹çš„<code>Qwen3-4B</code>æ–‡ä»¶å¤¹ä¸­ã€‚ä¸‹è½½å®Œæˆåæƒ…å†µå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf52a154926046fa8604371f0c3dcfc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=WTdcKxNLjIOGM95Zx58HqIvq2%2FY%3D" alt="8.png" loading="lazy"/></p>
</li>
<li>
<p><strong>å¯åŠ¨ vLLM æœåŠ¡:</strong> æ¨¡å‹å°±ç»ªåï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨å…¼å®¹ OpenAI API æ ¼å¼çš„æ¨ç†æœåŠ¡å™¨ï¼š<code>vllm serve ./Qwen3-4B/ --served-model-name Qwen3-4B --max-model-len 32768 --gpu-memory-utilization 0.9  --port 6666</code> å³å¯å¼€å¯å…¼å®¹OpenAIæ ¼å¼è¯·æ±‚çš„æœåŠ¡å™¨ï¼ŒæœåŠ¡æˆåŠŸå¯åŠ¨åï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºè¿è¡Œæ—¥å¿—:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc93963b77554ba3a09eb65a7ed7dbfd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=AtUNomw888pTZKJR%2F3IZH%2F0jS84%3D" alt="9.png" loading="lazy"/></p>
</li>
<li>
<p><strong>æµ‹è¯•è°ƒç”¨:</strong> åœ¨æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹æ–°å»ºÂ <code>test.py</code>Â æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹æµ‹è¯•ä»£ç ï¼ˆå› å¯åŠ¨æ—¶æœªæŒ‡å®š API Keyï¼Œæ­¤å¤„å¯ä»»æ„å¡«å†™ï¼‰ã€‚æ‰§è¡ŒÂ <code>python test.py</code>ï¼ŒæˆåŠŸè¿”å›æ¨¡å‹å“åº”å³è¡¨ç¤ºéƒ¨ç½²æˆåŠŸã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
client = OpenAI(base_url=<span class="hljs-string">"http://localhost:6666/v1"</span>, api_key=<span class="hljs-string">"EMPTY"</span>)
response = client.chat.completions.create(model=<span class="hljs-string">"Qwen3-4B"</span>, messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}])
<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f27b5e54fac488dabf514f3559789d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=cXsD16ZVk1Au7s%2BlwWQkyx3S2YY%3D" alt="12.png" loading="lazy"/></p>
</li>
</ol>
<p>ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ vLLM æœ¬åœ°éƒ¨ç½²å¤§æ¨¡å‹çš„å®Œæ•´æµç¨‹ã€‚æŒæ¡æœ¬åœ°å¤§æ¨¡å‹æœåŠ¡çš„éƒ¨ç½²èƒ½åŠ›ï¼Œå¯¹äºåç»­çš„æ•°æ®æ²»ç†ã€æ¨¡å‹è®­ç»ƒä¸éƒ¨ç½²éƒ½è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-5">2.3 VLLMå¸¸ç”¨éƒ¨ç½²å‚æ•°è¯¦è§£</h3>
<p>ä¸Šä¸€èŠ‚ä»…å±•ç¤ºäº†éƒ¨åˆ†å‘½ä»¤è¡Œå‚æ•°ï¼Œä¸‹è¡¨åˆ—å‡ºäº†æ›´å¤šç”Ÿäº§ä¸­å¸¸ç”¨çš„å‚æ•°åŠå…¶è¯´æ˜ï¼š</p>























































<table><thead><tr><th>å‚æ•°</th><th>æ¨èå€¼</th><th>ä½œç”¨è¯´æ˜</th></tr></thead><tbody><tr><td><code>--max-model-len</code></td><td><code>32768</code></td><td>è®¾ç½®æ¨¡å‹çš„æœ€å¤§ä¸Šä¸‹æ–‡é•¿åº¦ï¼ŒQwen3æ¨¡å‹æ”¯æŒ32Kä¸Šä¸‹æ–‡ã€‚</td></tr><tr><td><code>--gpu-memory-utilization</code></td><td><code>0.8-0.95</code></td><td>GPUæ˜¾å­˜åˆ©ç”¨ç‡ï¼Œå€¼è¶Šé«˜é¢„ç•™ç©ºé—´è¶Šå°‘ã€‚</td></tr><tr><td><code>--tensor-parallel-size</code></td><td>GPUæ•°é‡</td><td><strong>å¼ é‡å¹¶è¡Œå¤§å°</strong>ï¼Œ<strong>å¿…é¡»ç­‰äºä½¿ç”¨çš„GPUæ•°é‡</strong>ï¼ˆé»˜è®¤å•å¡ä¸º1ï¼‰ï¼Œå¦‚æœä½ ä½¿ç”¨ä¸¤å¼ å¡ï¼Œè¿™é‡Œå°±æ˜¯2ï¼Œæ³¨æ„æ•°ç›®åªèƒ½æ˜¯<code>2^n</code>æ¬¡ã€‚</td></tr><tr><td><code>--max-num-seqs</code></td><td><code>256</code></td><td>åŒæ—¶å¤„ç†çš„æœ€å¤§è¯·æ±‚æ•°ï¼Œå½±å“å¹¶å‘èƒ½åŠ›ã€‚</td></tr><tr><td><code>--enforce-eager</code></td><td>(æ— å€¼)</td><td><strong>åœ¨Ascend NPUä¸Šè¿è¡Œå¯èƒ½éœ€è¦æ·»åŠ æ­¤å‚æ•°</strong>ï¼Œä»¥é¿å…ç¼–è¯‘é”™è¯¯ã€‚</td></tr><tr><td><code>--api-key</code></td><td>å¦‚Â <code>abc123</code></td><td>è®¾ç½®APIå¯†é’¥ï¼Œå¢åŠ åŸºç¡€å®‰å…¨æ€§ã€‚</td></tr><tr><td><code>--enable-function-calling</code></td><td>(æ— å€¼)</td><td><strong>å¯ç”¨å·¥å…·åŠŸèƒ½ï¼ˆä¹‹åç¬”è€…ä¼šè®²è§£ï¼‰</strong></td></tr><tr><td><code>--pipeline-parallel-size</code></td><td>GPUæ•°é‡</td><td>æµæ°´çº¿å¹¶è¡Œå¤§å°ï¼Œæµæ°´çº¿é€šè¿‡å°†æ¨¡å‹å±‚åˆ†å¸ƒåˆ°å¤šä¸ªGPUï¼Œæ¯ä¸ªGPUé¡ºåºå¤„ç†ï¼Œå¯ä¸<code>tensor-parallel-size</code>å‚æ•°åˆç”¨</td></tr><tr><td><code>--enable-expert-parallel</code></td><td>True or False</td><td>é’ˆå¯¹MoEæ¨¡å‹çš„ä¼˜åŒ–ï¼Œä¾‹å¦‚DeepSeek-V3ç­‰æ¨¡å‹ï¼Œå¹³è¡¡ä¸åŒMoEä¸“å®¶è®¡ç®—å¼€é”€</td></tr></tbody></table>
<p>æ ¹æ®ä»¥ä¸Šå‚æ•°ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨ 4 å¼  GPU æ¥æ¨ç†Â <code>Qwen3-32B</code>Â æ¨¡å‹ï¼Œå‘½ä»¤åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vllm serve \
    --model â€œQwen3-32Bæ¨¡å‹æ‰€å­˜ä½ç½®â€ \
    --tensor-parallel-size 4 \
    --trust-remote-code \
    --gpu-memory-utilization 0.8 \
    --max-num-seqs 32 \
    --max-model-len 8192 \
    --port 8000
</code></pre>
<p>å‚æ•°ç»„åˆæ¸…æ™°æ˜äº†ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å·²ç»å­¦ä¼šå•¦ï¼</p>
<h3 data-id="heading-6">2.4 VLLMä¼˜åŒ–æŠ€å·§</h3>
<p>å…¶å®åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ä¸ºäº†æœ€å¤§é™åº¦çš„å‹æ¦¨ç®—åŠ›ï¼Œè¿˜æœ‰å¾ˆå¤šçš„vllmçš„ä¼˜åŒ–æŠ€å·§ï¼Œç¬”è€…å¸¸ç”¨çš„æŠ€å·§æœ‰å¦‚ä¸‹2ç‚¹ï¼š</p>
<ol>
<li><strong>å¤šå®ä¾‹è´Ÿè½½å‡è¡¡</strong><br/>
å½“æœ‰å¤šä¸ªç›¸åŒæ¨¡å‹åŒæ—¶éƒ¨ç½²æ—¶ï¼ˆä¾‹å¦‚ 8 å¼ å¡ï¼Œæ¯ 2 å¼ éƒ¨ç½²ä¸€ä¸ªÂ <code>Qwen3-32B</code>ï¼Œå…± 4 ä¸ªå®ä¾‹ï¼‰ï¼Œå¯åœ¨å‰ç«¯ä½¿ç”¨Â <strong>Nginx åšè´Ÿè½½å‡è¡¡</strong>ï¼Œå®ç°ååé‡çš„çº¿æ€§å¢é•¿ã€‚ï¼ˆå¦‚æœ‰éœ€è¦ï¼Œç¬”è€…åç»­å¯ä¸“é—¨åˆ†äº«æ­¤æ–¹æ¡ˆã€‚ï¼‰</li>
<li><strong>è¶…å¤§æ¨¡å‹éƒ¨ç½²ç­–ç•¥</strong><br/>
éƒ¨ç½²å‚æ•°é‡æå¤§çš„æ¨¡å‹æ—¶ï¼Œéœ€è¦åˆç†ç»„åˆÂ <strong>TPï¼ˆå¼ é‡å¹¶è¡Œï¼‰</strong> ã€<strong>PPï¼ˆæµæ°´çº¿å¹¶è¡Œï¼‰</strong> Â å’ŒÂ <strong>EPï¼ˆä¸“å®¶å¹¶è¡Œï¼‰</strong> Â ç­–ç•¥ã€‚é€šå¸¸å¯ä»¥é€‚å½“è°ƒå¤§ TP å’Œ PPï¼Œå¹¶å°† EP è®¾ä¸ºÂ <code>True</code>ï¼Œä»¥åœ¨å¤š GPU åŒæ­¥å¼€é”€ä¸æ•´ä½“æ€§èƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚</li>
</ol>
<h2 data-id="heading-7">ä¸‰ã€Ollamaå¤§æ¨¡å‹éƒ¨ç½²æ–¹æ¡ˆ</h2>
<h3 data-id="heading-8">3.1 è®¤è¯†Ollama</h3>
<p>VLLM éƒ¨ç½²æ–¹æ¡ˆè™½ç„¶å¼ºå¤§ï¼Œä½†å®ƒä¸»è¦é¢å‘ç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦ Linux ç³»ç»Ÿå’Œé«˜æ€§èƒ½æ˜¾å¡ã€‚å¦‚æœå¤§å®¶æƒ³åœ¨ä¸ªäººç”µè„‘ä¸Šå¿«é€Ÿä½“éªŒæ¨¡å‹ï¼Œæˆ–è€…åœ¨ Windows ç³»ç»Ÿä¸­è¿›è¡Œæœ¬åœ°è°ƒç”¨ï¼Œæœ‰ä»€ä¹ˆæ›´è½»ä¾¿çš„æ–¹æ¡ˆå‘¢ï¼ŸOllama æ­£æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24e2cdc9b1264615b194683ec18f5b99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=jUfa0Ygn2kJJOiV3vj%2FKdQ0oRIE%3D" alt="13.png" loading="lazy"/></p>
<p>ollamaæ˜¯åœ¨llama.cppåŸºç¡€ä¸Šå°è£…çš„ç®€åŒ–çš„æœ¬åœ°éƒ¨ç½²å·¥å…·ï¼Œæä¾›äº†ä¸€é”®è¿è¡ŒåŠŸèƒ½ï¼Œéå¸¸é€‚åˆå¤§å®¶éæŠ€æœ¯æ¨¡å‹çš„å¿«é€ŸéªŒè¯ã€‚ä¸vllmç›¸æ¯”ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰ç‚¹ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>éƒ¨ç½²æå…¶ç®€å•ï¼Œå¼€ç®±å³ç”¨</strong>ï¼šOllamaæä¾›ä¸€é”®å®‰è£…è„šæœ¬å’Œç®€å•çš„å‘½ä»¤è¡Œæ“ä½œï¼Œä¸‹è½½åå³å¯å¿«é€Ÿè¿è¡Œæ¨¡å‹ï¼Œéå¸¸é€‚åˆä¸ªäººå¿«é€Ÿä½“éªŒã€‚è€ŒvLLmé€šå¸¸éœ€è¦é…ç½®Pythonç¯å¢ƒã€å®‰è£…CUDAä¾èµ–å¹¶è¿›è¡Œæ›´å¤šåˆå§‹åŒ–è®¾ç½®ï¼Œé—¨æ§›ç›¸å¯¹è¾ƒé«˜ã€‚</li>
<li><strong>å¯¹ä¸ªäººç¡¬ä»¶æ›´å‹å¥½ï¼Œèµ„æºè¦æ±‚ä½</strong>ï¼šOllamaä¸“æ³¨äºåœ¨æ¶ˆè´¹çº§ç¡¬ä»¶ï¼ˆåŒ…æ‹¬è‹¹æœèŠ¯ç‰‡ã€æ™®é€šCPUå’Œæ¶ˆè´¹çº§GPUï¼‰ä¸Šè¿è¡Œã€‚å®ƒé€šè¿‡é«˜æ•ˆçš„æ¨¡å‹é‡åŒ–æŠ€æœ¯ï¼Œèƒ½ç”¨æ›´å°‘çš„å†…å­˜æˆ–æ˜¾å­˜è¿è¡Œå¤§æ¨¡å‹ï¼ˆä¸ä¸€å®šéœ€è¦æ˜¾å¡ï¼Œå†…å­˜ä¹Ÿå¯ä»¥ï¼‰ã€‚</li>
<li><strong>å†…ç½®æ¨¡å‹åº“ï¼Œç®¡ç†æ¨¡å‹éå¸¸ä¾¿æ·</strong>ï¼šOllamaå†…ç½®äº†ä¸€ä¸ªåŒ…å«å¤§é‡ä¸»æµå¼€æºé¢„é‡åŒ–æ¨¡å‹çš„â€œåº”ç”¨å•†åº—â€ã€‚å¤§å®¶å¯ä»¥åƒå®‰è£…è½¯ä»¶ä¸€æ ·ï¼Œé€šè¿‡ä¸€æ¡å‘½ä»¤ï¼ˆå¦‚Â <code>ollama pull Qwen3:4b</code>, ç°åœ¨ç”šè‡³ä¸éœ€è¦å‘½ä»¤åœ¨ç•Œé¢ä¹Ÿå¯ä»¥æ“ä½œï¼‰è½»æ¾æ‹‰å–ã€è¿è¡Œå’Œåˆ‡æ¢ä¸åŒæ¨¡å‹ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†å¤æ‚çš„æ¨¡å‹è½¬æ¢å’Œä¼˜åŒ–æ­¥éª¤ã€‚</li>
</ol>
<h3 data-id="heading-9">3.2 ollamaéƒ¨ç½²å®æˆ˜æ¼”ç¤º</h3>
<p>ä¸‹é¢ç¬”è€…ä»¥ Windows ç³»ç»Ÿä¸ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®‰è£…å’Œä½¿ç”¨ Ollama éƒ¨ç½²å¤§æ¨¡å‹ã€‚ç›®å‰æœ€æ–°ç‰ˆæœ¬çš„ Ollama å·²æä¾›å›¾å½¢ç•Œé¢ï¼Œå¯æ–¹ä¾¿åœ°é…ç½®æ¨¡å‹è·¯å¾„ã€‚è‹¥æƒ³äº†è§£æ›´å¤šç»†èŠ‚æˆ–ä½¿ç”¨æ—§ç‰ˆæœ¬ï¼Œå¯å‚è€ƒç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7470146014363009061" target="_blank" title="https://juejin.cn/post/7470146014363009061">äººå·¥æ™ºèƒ½å¤§æ¨¡å‹å…¥é—¨åˆ†äº«ï¼ˆä¸€ï¼‰â€”â€”åˆ©ç”¨ollamaæ­å»ºæœ¬åœ°å¤§æ¨¡å‹æœåŠ¡ï¼ˆDeepSeek-R1)</a></p>
<ol>
<li>
<p><strong>ä¸‹è½½å®‰è£…åŒ…ï¼š</strong> è®¿é—®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2F" target="_blank" title="https://ollama.com/" ref="nofollow noopener noreferrer">Ollama å®˜ç½‘</a>ï¼Œç‚¹å‡»å³ä¸Šè§’ â€œDownloadâ€ æŒ‰é’®ï¼Œé€‰æ‹© Windows ç³»ç»Ÿå¹¶ä¸‹è½½å®‰è£…åŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0eda4c6f0e645a98df63ecb0c7a84a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=wibNnPUUMzKpSS5Nb8g7%2Fa2RXg4%3D" alt="14.png" loading="lazy"/></p>
</li>
<li>
<p><strong>å®‰è£…è½¯ä»¶ï¼š</strong> åŒå‡»ä¸‹è½½å¥½çš„Â <code>.exe</code>Â æ–‡ä»¶ï¼Œç‚¹å‡» â€œInstallâ€ å®Œæˆå®‰è£…ï¼Œé»˜è®¤å®‰è£…è‡³ C ç›˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1587217b45bf48d6845c8a760f01ec28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=TNCPp%2Bb0gteraO7FbI7QIyx5whs%3D" alt="2.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>ä¿®æ”¹æ¨¡å‹å­˜æ”¾è·¯å¾„ï¼š</strong> å®‰è£…å®Œæˆåï¼Œå»ºè®®å…ˆæ‰“å¼€è½¯ä»¶è®¾ç½®ï¼Œå°†æ¨¡å‹ä¿å­˜ç›®å½•ä¿®æ”¹åˆ°éç³»ç»Ÿç›˜ï¼ˆå¦‚ D ç›˜æˆ– E ç›˜ï¼‰ï¼Œä»¥é¿å…å ç”¨è¿‡å¤šç³»ç»Ÿç©ºé—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba70d6866cce4cdc91251d815117bdf8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=mO37Bj%2ByG5gKjZ4GXDPiy63bgLI%3D" alt="3.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f35fc63194f4734813b2dca7ef0a15f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=Dr89udfJ4fx7iGZjOWu8wRhhwVY%3D" alt="4.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>æŸ¥æ‰¾æ¨¡å‹ï¼š</strong> åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2F" target="_blank" title="https://ollama.com/" ref="nofollow noopener noreferrer">Ollama å®˜ç½‘</a>Â çš„æ¨¡å‹æœç´¢é¡µä¸­ï¼Œæœç´¢Â <code>qwen3</code>:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/006c6ba028ca4ad799ccff3edb188c44~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=3vOgR%2FAqB9WjTqDUrVtjMekP8F8%3D" alt="15.png" loading="lazy"/></p>
</li>
<li>
<p><strong>ä¸‹è½½å¹¶è¿è¡Œæ¨¡å‹ï¼š</strong> è¿›å…¥ Qwen3 æ¨¡å‹é¡µé¢ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºè¿è¡Œå‘½ä»¤Â <code>ollama run qwen3</code>ï¼ˆé»˜è®¤ä¸‹è½½ 8B ç‰ˆæœ¬ï¼‰ã€‚è‹¥æƒ³ä¸‹è½½ 4B ç‰ˆæœ¬ï¼Œåˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc62384b1b54407fbee6b2b21f3ceec4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=heIy9xPPanqywBczgYNLv1Jgjmo%3D" alt="16.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3860a97ca5cd41d1960931bc000f42ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=uk5gceFLc8aCDH6nf%2BRth5Xreao%3D" alt="10.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>åœ¨ Ollama ç•Œé¢ä¸­æµ‹è¯•ï¼š</strong> ä¸‹è½½å®Œæˆåï¼Œå¯ç›´æ¥åœ¨ Ollama è‡ªå¸¦çš„å¯¹è¯ç•Œé¢ä¸­è¾“å…¥é—®é¢˜è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd1d7e4e568f44b2aeda2074fca5db76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=5RlTDgzNKxEeA2QSPMw%2Fbp6iGRU%3D" alt="6.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/814eab1cc7cd4732b34f2c0960d93645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=SqQCD3qYgTdjpd7sg9syoAY95RU%3D" alt="7.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>é€šè¿‡ OpenAI å…¼å®¹ API è°ƒç”¨ï¼š</strong> Ollama åŒæ ·æä¾›å…¼å®¹ OpenAI æ ¼å¼çš„ API æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ä¸ºÂ <code>11434</code>ï¼‰ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹ Python ä»£ç è¿›è¡Œè°ƒç”¨ï¼ˆè‹¥æœ¬åœ°æœªå®‰è£…Â <code>openai</code>Â åº“ï¼Œéœ€å…ˆæ‰§è¡ŒÂ <code>pip install openai</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
client = OpenAI(base_url=<span class="hljs-string">"http://localhost:11434/v1"</span>, api_key=<span class="hljs-string">"EMPTY"</span>) <span class="hljs-comment">#api_keyéšä¾¿å¡«</span>
response = client.chat.completions.create(model=<span class="hljs-string">"qwen3:4b"</span>, messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ å¥½"</span>}])
<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6d83a270f2b4aee98e2a5d2da1adc35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=K%2FxFG7c9H4yyih46S7HKK0hYBZ4%3D" alt="11.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>äº†è§£æ¨¡å‹å­˜å‚¨ç»“æ„ï¼š</strong> Ollama ä¸‹è½½çš„æ¨¡å‹é»˜è®¤ä¿å­˜åœ¨ä½ è®¾ç½®çš„ç›®å½•ä¸‹ï¼ˆä¾‹å¦‚Â <code>E:\Ollama\models</code>ï¼‰ã€‚ç›®å½•å†…ä¸»è¦åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š</p>
<ul>
<li><code>blobs</code>ï¼šå­˜æ”¾æ¨¡å‹å…·ä½“çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆé€šå¸¸ä»¥Â <code>sh</code>Â å¼€å¤´çš„å“ˆå¸Œæ–‡ä»¶å‘½åï¼‰ã€‚</li>
<li><code>manifests</code>ï¼šå­˜æ”¾æ¨¡å‹çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œç”¨äºå®šä¹‰å“ªäº›æ–‡ä»¶å±äºå“ªä¸ªæ¨¡å‹ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ab4694ca92e49b8973dfe0766adfb76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=iJEvcbFBsSIMiCqcnDnOYoudrb4%3D" alt="8.jpg" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0cbebbcf64234b689e21aad2e6caec51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=apFu8bzxQtkC2g3M%2FFlSAVpI6Nk%3D" alt="9.jpg" loading="lazy"/></p>
</li>
<li>
<p><strong>æ›´å¤šé…ç½®:</strong> å¦‚éœ€äº†è§£æ›´è¯¦ç»†çš„é…ç½®é€‰é¡¹ï¼ˆå¦‚ä¿®æ”¹ç«¯å£ã€å¯ç”¨ GPU ç­‰ï¼‰ï¼Œå¯å‚è€ƒç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼š <a href="https://juejin.cn/post/7470146014363009061" target="_blank" title="https://juejin.cn/post/7470146014363009061">äººå·¥æ™ºèƒ½å¤§æ¨¡å‹å…¥é—¨åˆ†äº«ï¼ˆä¸€ï¼‰â€”â€”åˆ©ç”¨ollamaæ­å»ºæœ¬åœ°å¤§æ¨¡å‹æœåŠ¡ï¼ˆDeepSeek-R1)</a>ï¼Œéå¸¸ç®€å•ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†~</p>
</li>
</ol>
<h3 data-id="heading-10">3.3 ollamaä¸é‡åŒ–</h3>
<p>ç»†å¿ƒè§‚å¯Ÿçš„å¤§å®¶ä¼šå‘ç°ï¼šåœ¨ Ollama ä¸­ä¸‹è½½çš„ Qwen3-4B æ¨¡å‹åªæœ‰çº¦ 2.5 GBï¼Œè€Œåœ¨ ModelScope ä¸‹è½½çš„åŸå§‹æ¨¡å‹å´æœ‰ 8.1 GBã€‚Ollama ç”¨äº†ä»€ä¹ˆâ€œé­”æ³•â€è®©æ¨¡å‹å˜å¾—å¦‚æ­¤å°å·§ï¼Ÿè¿™èƒŒåçš„å…³é”®æŠ€æœ¯å°±æ˜¯<strong>æ¨¡å‹é‡åŒ–</strong>ã€‚</p>
<p><a href="https://juejin.cn/post/7594728203258347554" target="_blank" title="https://juejin.cn/post/7594728203258347554">å¤§æ¨¡å‹è®­ç»ƒå…¨æµç¨‹å®æˆ˜æŒ‡å—åŸºç¡€ç¯‡ï¼ˆäºŒï¼‰â€”â€”å¤§æ¨¡å‹æ–‡ä»¶ç»“æ„è§£è¯»ä¸åŸç†è§£æ</a> æ–‡ç« ä¸­å¤§å®¶äº†è§£åˆ°ï¼Œå¤§æ¨¡å‹ä¸»è¦ç”±ç»“æ„å’Œå¤§é‡å‚æ•°æ„æˆï¼Œä¿å­˜è¿™äº›å‚æ•°å ç”¨äº†ç»å¤§éƒ¨åˆ†å­˜å‚¨ç©ºé—´ã€‚</p>
<p>è¿™äº›å‚æ•°çš„å‚¨å­˜å½¢å¼é€šå¸¸éƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œé‡åŒ–å°±æ˜¯æŠŠæµ®ç‚¹æ•°çš„æœ‰æ•ˆæ•°å­—çš„ä½æ•°è¿›è¡Œç¼©å°ï¼Œä¸¾ä¸ªå½¢è±¡çš„ä¾‹å­ï¼Œåœ†å‘¨ç‡å¯ä»¥ç”¨3.1415926535æ¥è¡¨ç¤ºï¼Œç„¶è€Œé»˜è®¤3.14ä¹Ÿå¯ä»¥è¡¨ç¤ºåœ†å‘¨ç‡ï¼Œå­˜å‚¨3.1415926535è¦11ä½æ•°å­—ï¼Œå­˜å‚¨3.14åªéœ€è¦3ä½æ•°å­—ï¼Œå­˜å‚¨ä½æ•°å°‘äº†ï¼Œå­˜å‚¨æ¨¡å‹çš„å¤§å°ä¹Ÿè‡ªç„¶å°äº†ã€‚åœ¨å¤§æ¨¡å‹ä¸Šå°±æ˜¯æŠŠFP16çš„æ ¼å¼é‡åŒ–ä¸ºINT4æ ¼å¼ï¼Œå°†æœ‰æ•ˆä½æ•°ä»16ä½é™åˆ°4ä½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06fa6227607f438bb82d2cbf3a17551d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=FIdXYEIO163fSGTgnhMrOd%2F7%2B20%3D" alt="17.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23e7e016df4c43268683dc06091f5435~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769311165&amp;x-signature=hTFPBkT65Kj%2Br%2F1JfUtTwn7UXK0%3D" alt="18.png" loading="lazy"/></p>
<p>Ollama æ˜¯åŸºäºÂ <code>llama.cpp</code>Â æ„å»ºçš„ï¼Œ<code>llama.cpp</code>Â æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„çº¯ C/C++ å¤§è¯­è¨€æ¨¡å‹æ¨ç†æ¡†æ¶ï¼Œæ”¯æŒåœ¨ CPU æˆ– GPU ä¸Šé«˜æ•ˆè¿è¡Œï¼Œå¹¶èƒ½å¤Ÿå°†åŸå§‹æ¨¡å‹è¿›è¡Œé‡åŒ–ï¼Œæ˜¾è‘—å‡å°‘æ¨¡å‹ä½“ç§¯ã€‚é‡åŒ–åçš„æ¨¡å‹å¯ä»¥æ–¹ä¾¿åœ°å‘å¸ƒå’Œéƒ¨ç½²ï¼Œå› æ­¤ Ollama é»˜è®¤ä½¿ç”¨é‡åŒ–åçš„æ¨¡å‹ã€‚</p>
<p>è¿›ä¸€æ­¥æ¥è¯´ï¼Œ<code>llama.cpp</code>Â åœ¨è½¬æ¢æ¨¡å‹æ—¶é€šå¸¸å°†å…¶ä¿å­˜ä¸ºÂ <strong>GGUF</strong>Â æ ¼å¼ã€‚è¿™æ˜¯ä¸€ç§ç”±Â <code>llama.cpp</code>Â åˆ›å§‹äººè®¾è®¡çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œé’ˆå¯¹é«˜æ•ˆæ¨ç†è¿›è¡Œäº†ä¼˜åŒ–ã€‚ä¸ Transformer åŸç”Ÿä½¿ç”¨çš„Â <code>*.safetensors</code>Â æ ¼å¼ä¸åŒï¼ŒGGUF æ ¼å¼é€šå¸¸å°†æ‰€æœ‰æ¨¡å‹æ•°æ®æ•´åˆä¸ºå•ä¸€æ–‡ä»¶ã€‚Ollama åŸç”Ÿæ”¯æŒè¯¥æ ¼å¼ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ Ollama åç«¯æ–‡ä»¶ä¸­ä¼šæœ‰ä¸€ä¸ªä½“ç§¯ç‰¹åˆ«å¤§çš„æ–‡ä»¶â€”â€”å®ƒæœ¬è´¨ä¸Šå°±æ˜¯æ•´ä¸ªé‡åŒ–åçš„æ¨¡å‹ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ç¬”è€…ä»Šå¤©åˆ†äº«çš„å…¨éƒ¨å†…å®¹å•¦ï¼æœ¬æ•™ç¨‹ç¤ºä¾‹ä»£ç å¯ä»¥å…³æ³¨ç¬”è€…åŒåå…¬ä¼—å·ï¼š<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œå¹¶ç§ä¿¡<strong>å¤§æ¨¡å‹è®­ç»ƒ</strong>å…è´¹è·å¾—ã€‚</p>
<p>è¦æƒ³å®Œå…¨å­¦æ‡‚è¿˜æ˜¯éœ€è¦äº²æ‰‹å®è·µä¸€ä¸‹ï¼Œå¤§å®¶å¯ä»¥ç…§ç€ç¬”è€…çš„æ•™ç¨‹äº²æ‰‹å®è·µä¸€éã€‚ä¸ºé™ä½å¤§å®¶å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>æœ¬æœŸå†…å®¹è¯¦ç»†åˆ†äº«äº†ä¸¤ç§ä¸»æµæœ¬åœ°éƒ¨ç½²æ–¹æ¡ˆï¼šé¢å‘ç”Ÿäº§ç¯å¢ƒã€æ”¯æŒé«˜å¹¶å‘çš„é«˜æ€§èƒ½Â <strong>VLLM</strong>Â éƒ¨ç½²ï¼ˆé€‚åˆLinuxç³»ç»Ÿï¼‰ï¼Œä»¥åŠé¢å‘ä¸ªäººå¿«é€Ÿä½“éªŒã€å¯¹ç¡¬ä»¶è¦æ±‚ä½çš„è½»é‡çº§Â <strong>Ollama</strong>Â éƒ¨ç½²ï¼ˆæ”¯æŒWindowsï¼‰ï¼Œæä¾›äº†ä»ç¯å¢ƒå‡†å¤‡åˆ°ä»£ç è°ƒç”¨çš„å®Œæ•´å®æˆ˜æ­¥éª¤ï¼Œå¹¶è§£é‡Šäº†æ¨¡å‹é‡åŒ–åŸç†ï¼Œæ—¨åœ¨å¸®åŠ©è¯»è€…åœ¨ä¸åŒåœºæ™¯ä¸‹å¿«é€Ÿæ­å»ºè‡ªå·±çš„å¤§æ¨¡å‹æœåŠ¡ã€‚</p>
<p>æœ¬åœ°éƒ¨ç½²çš„å¤§æ¨¡å‹ä½œä¸ºä¸‡èƒ½çš„apiï¼Œ å¯ä»¥ç¼–å†™è°ƒç”¨è„šæœ¬è¿›è¡Œè‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡çš„æ‰¹å¤„ç†ï¼Œå°†æ¥æˆ‘ä»¬æ•°æ®å¤„ç†æµç¨‹ä¸€å®šä¼šç”¨åˆ°ã€‚ä¸‹æœŸåˆ†äº«ç¬”è€…å°†ä¸ºå¤§å®¶è®²è§£å¤§æ¨¡å‹è¯·æ±‚çš„å„ç§æ–¹å¼ï¼Œå¸®åŠ©å¤§å®¶æŒæ¡åˆ©ç”¨å¤§æ¨¡å‹apiå¼€å‘å„ç§å„æ ·åº”ç”¨çš„èƒ½åŠ›ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…ï¼å¤§å®¶è¯»å®Œæ„Ÿå…´è¶£å¯ä»¥å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·ï¼šå¤§æ¨¡å‹çœŸå¥½ç©ï¼Œè·å–æœ¬ç³»åˆ—åˆ†äº«ä»¥åŠå…¶å®ƒç³»åˆ—åˆ†äº«çš„å…¨éƒ¨å†…å®¹ã€‚</p>
<p>å¤§æ¨¡å‹è®­ç»ƒå¯¹è®¡ç®—èµ„æºæœ‰ä¸€å®šè¦æ±‚ï¼Œå°¤å…¶æ˜¯GPUæ˜¾å­˜ã€‚ä¸ºé™ä½å­¦ä¹ é—¨æ§›ï¼Œç¬”è€…ä¸å›½å†…ä¸»æµäº‘å¹³å°åˆä½œï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ‰“å¼€é“¾æ¥: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a>ï¼Œä½“éªŒ<strong>H100 GPU 6.5å°æ—¶</strong>çš„ç®—åŠ›ã€‚æœ¬ç³»åˆ—æ‰€æœ‰å®æˆ˜æ•™ç¨‹å‡å°†åœ¨è¯¥å¹³å°ä¸Šå®Œæˆï¼Œå¸®åŠ©å¤§å®¶ä½æˆæœ¬ä¸Šæ‰‹å®è·µã€‚</p>
<p>é™¤å¤§æ¨¡å‹è®­ç»ƒå¤–ï¼Œç¬”è€…ä¹Ÿåœ¨åŒæ­¥æ›´æ–°<a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>å…è´¹ä¸“æ ï¼Œè¦è¯´æ˜è¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 37 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æ·±åº¦å­¦ä¹ Day10ã€‘å‘Šåˆ«çè°ƒå‚ï¼ä¼˜åŒ–å™¨ä¸å­¦ä¹ ç‡è°ƒåº¦å™¨å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7596299957277016091</link>    <guid>https://juejin.cn/post/7596299957277016091</guid>    <pubDate>2026-01-17T15:20:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596299957277016091" data-draft-id="7595423767721607177" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æ·±åº¦å­¦ä¹ Day10ã€‘å‘Šåˆ«çè°ƒå‚ï¼ä¼˜åŒ–å™¨ä¸å­¦ä¹ ç‡è°ƒåº¦å™¨å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-17T15:20:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŸ æŸ é…±"/> <meta itemprop="url" content="https://juejin.cn/user/3739876675556569"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æ·±åº¦å­¦ä¹ Day10ã€‘å‘Šåˆ«çè°ƒå‚ï¼ä¼˜åŒ–å™¨ä¸å­¦ä¹ ç‡è°ƒåº¦å™¨å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3739876675556569/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŸ æŸ é…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:20:48.000Z" title="Sat Jan 17 2026 15:20:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ºä»€ä¹ˆåŒæ ·çš„æ¨¡å‹ï¼Œæ¢ä¸€ä¸ªä¼˜åŒ–å™¨å’Œå­¦ä¹ ç‡è°ƒåº¦å™¨ï¼Œè®­ç»ƒæ•ˆæœå°±å¤©å·®åœ°åˆ«ï¼Ÿä»Šå¤©ä¸ºä½ æ­ç§˜ã€‚</p>
</blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šä¸Šä¸€ç¯‡æˆ‘ä»¬é è¿ç§»å­¦ä¹ â€œæŠ„ä½œä¸šâ€æå®šäº†é«˜å‡†ç¡®ç‡æ¨¡å‹ï¼Œä½†è®­ç»ƒæ—¶ä½ å¤§æ¦‚ç‡ä¼šé‡åˆ°ï¼šLossåƒåè¿‡å±±è½¦éœ‡è¡ä¸æ”¶æ•›ã€è®­ç»ƒåˆ°ä¸€åŠå‡†ç¡®ç‡å¡ä½ä¸åŠ¨ã€æ¢ä¸ªä¼˜åŒ–å™¨ç»“æœå¤©å·®åœ°åˆ«â€¦â€¦ä»Šå¤©ï¼Œæˆ‘å¸¦ä½ å½»åº•ææ‡‚è®­ç»ƒçš„â€œæ ¸å¿ƒå¼•æ“â€ï¼ˆä¼˜åŒ–å™¨ï¼‰å’Œâ€œå…³é”®æ²¹é—¨â€ï¼ˆå­¦ä¹ ç‡ï¼‰ï¼šç”¨ä»£ç å¯è§†åŒ–å¯¹æ¯”SGDã€Adamã€AdamWã€Muonå››å¤§ä¼˜åŒ–å™¨çš„æ”¶æ•›è½¨è¿¹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ ç”¨StepLRã€CosineAnnealingç­‰è°ƒåº¦å™¨å®ç°â€œè‡ªåŠ¨æ¢æŒ¡â€ï¼Œä»æ­¤å‘Šåˆ«çè°ƒå‚ï¼Œè®©æ¨¡å‹è®­ç»ƒåˆå¿«åˆç¨³ï¼</p>
<p><em>å…³é”®è¯ï¼šPyTorch, ä¼˜åŒ–å™¨, å­¦ä¹ ç‡è°ƒåº¦å™¨, SGD, Adam, AdamW, Muon, CosineAnnealingLR, æ”¶æ•›å¯è§†åŒ–</em></p>
<h2 data-id="heading-0">1. å¼€ç¯‡çµé­‚æ‹·é—®ï¼šä½ æ˜¯ä¸æ˜¯åœ¨â€œçè°ƒå‚â€ï¼Ÿ</h2>
<p>Day9æˆ‘ä»¬ç”¨å¾®è°ƒè®­ç»ƒResNet-18æ—¶ï¼Œæˆ‘ç‰¹æ„æŒ‡å®šäº†<code>SGD+CosineAnnealingLR</code>çš„ç»„åˆï¼Œå½“æ—¶ä½ å¯èƒ½æ²¡å¤šæƒ³â€”â€”ä½†å¦‚æœæŠŠä¼˜åŒ–å™¨æ¢æˆAdamï¼Œå­¦ä¹ ç‡å›ºå®šä¸º0.1ï¼Œä½ ä¼šå‘ç°ï¼šè¦ä¹ˆLossç›´æ¥ç‚¸åˆ°NaNï¼Œè¦ä¹ˆè®­ç»ƒ20ä¸ªEpochå‡†ç¡®ç‡è¿˜æ²¡åˆ°80%ã€‚</p>
<p>è¿™å°±æ˜¯ä¼˜åŒ–å™¨å’Œå­¦ä¹ ç‡çš„â€œå¨åŠ›â€ï¼šå®ƒä»¬å†³å®šäº†æ¨¡å‹â€œå­¦ä¹ çš„æ•ˆç‡â€å’Œâ€œæœ€ç»ˆçš„ä¸Šé™â€ã€‚å¾ˆå¤šæ–°æ‰‹è°ƒå‚å…¨é è’™ï¼š</p>
<ul>
<li>Losséœ‡è¡ï¼Ÿå°±éšä¾¿æŠŠå­¦ä¹ ç‡ç ä¸€åŠï¼›</li>
<li>æ”¶æ•›æ…¢ï¼Ÿå°±ç›²ç›®æ¢æˆAdamï¼›</li>
<li>è¿‡æ‹Ÿåˆï¼Ÿå°±ä¹±åŠ æƒé‡è¡°å‡ï¼›</li>
</ul>
<p>æœ¬è´¨æ˜¯æ²¡ææ‡‚ï¼šä¸åŒä¼˜åŒ–å™¨çš„â€œè„¾æ°”â€ä¸åŒï¼Œå­¦ä¹ ç‡çš„â€œè°ƒèŠ‚é€»è¾‘â€ä¹Ÿä¸åŒã€‚ä»Šå¤©æˆ‘ä»¬ä¸èŠæ¯ç‡¥å…¬å¼ï¼Œç”¨â€œå¼€è½¦â€ç±»æ¯”ææ‡‚ä¸€åˆ‡ï¼š</p>
<ul>
<li><strong>ä¼˜åŒ–å™¨</strong>ï¼šç›¸å½“äºæ±½è½¦çš„â€œå¼•æ“â€â€”â€”SGDæ˜¯â€œæ‰‹åŠ¨æŒ¡å¼•æ“â€ï¼ˆç¨³ä½†éœ€è¦æŠ€å·§ï¼‰ï¼ŒAdamæ˜¯â€œè‡ªåŠ¨æŒ¡å¼•æ“â€ï¼ˆå¿«ä½†å¯èƒ½åˆ¹ä¸ä½ï¼‰ï¼›</li>
<li><strong>å­¦ä¹ ç‡</strong>ï¼šç›¸å½“äºâ€œæ²¹é—¨å¤§å°â€â€”â€”å¤ªå¤§å®¹æ˜“â€œå†²å‡ºè·¯åŸºâ€ï¼ˆLosséœ‡è¡ï¼‰ï¼Œå¤ªå°â€œçˆ¬å¡å¤ªæ…¢â€ï¼ˆæ”¶æ•›æ…¢ï¼‰ï¼›</li>
<li><strong>è°ƒåº¦å™¨</strong>ï¼šç›¸å½“äºâ€œè‡ªåŠ¨æ¢æŒ¡ç³»ç»Ÿâ€â€”â€”æ ¹æ®è®­ç»ƒè¿›åº¦è‡ªåŠ¨è°ƒæ²¹é—¨ï¼Œä¸ç”¨æ‰‹åŠ¨å¹²é¢„ã€‚</li>
</ul>
<h2 data-id="heading-1">2. å››å¤§ä¼˜åŒ–å™¨æ·±åº¦è§£æï¼šè„¾æ°”ã€ç”¨æ³•ã€é¿å‘ç‚¹</h2>
<p>æˆ‘ä»¬èšç„¦å·¥ä¸šç•Œæœ€å¸¸ç”¨çš„å››å¤§ä¼˜åŒ–å™¨ï¼šSGDï¼ˆå«åŠ¨é‡ï¼‰ã€Adamã€AdamWã€Muonï¼Œä»â€œé€šä¿—åŸç†â€â€œä¼˜ç¼ºç‚¹â€â€œé€‚ç”¨åœºæ™¯â€ä¸‰ä¸ªç»´åº¦è®²é€ï¼Œè¿˜é™„MATLABè€é¸Ÿçš„è¸©å‘æ€»ç»“ã€‚</p>
<h3 data-id="heading-2">2.1 SGDï¼ˆéšæœºæ¢¯åº¦ä¸‹é™ï¼‰ï¼šç¨³å¦‚è€ç‹—çš„â€œæ‰‹åŠ¨æŒ¡â€</h3>
<h4 data-id="heading-3">åŸç†é€šä¿—è¯´</h4>
<p>æœ€åŸºç¡€çš„ä¼˜åŒ–å™¨ï¼Œæ ¸å¿ƒé€»è¾‘å°±æ˜¯â€œæœç€Lossä¸‹é™æœ€å¿«çš„æ–¹å‘èµ°ä¸€æ­¥â€ã€‚å°±åƒä½ å¼€è½¦ï¼Œæ¯æ¬¡åªçœ‹çœ¼å‰çš„è·¯ï¼Œæœç€ä¸‹å¡æ–¹å‘å¼€â€”â€”è™½ç„¶æ…¢ï¼Œä½†ä¸ä¼šè·‘åã€‚</p>
<p>ä½†çº¯SGDæœ‰ä¸ªå‘ï¼šå®¹æ˜“å¡åœ¨â€œå±€éƒ¨å°å±±å¡â€ï¼ˆå±€éƒ¨æœ€ä¼˜è§£ï¼‰ã€‚æ‰€ä»¥å®é™…ç”¨çš„éƒ½æ˜¯<code>SGD+åŠ¨é‡ï¼ˆmomentumï¼‰</code>ï¼šç›¸å½“äºå¼€è½¦å¸¦äº†â€œæƒ¯æ€§â€ï¼Œå°±ç®—é‡åˆ°å°åœŸå¡ï¼Œä¹Ÿèƒ½é æƒ¯æ€§å†²è¿‡å»ã€‚</p>
<h4 data-id="heading-4">ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šæ”¶æ•›ç¨³å®šã€æ³›åŒ–èƒ½åŠ›å¼ºï¼ˆä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼‰ã€æ˜¾å­˜å ç”¨æœ€å°ï¼ˆé€‚åˆå¤§æ¨¡å‹ï¼‰ï¼›</li>
<li>ç¼ºç‚¹ï¼šæ”¶æ•›æ…¢ã€éœ€è¦æ‰‹åŠ¨è°ƒå­¦ä¹ ç‡ã€å¯¹åˆå§‹åŒ–æ•æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-5">é€‚ç”¨åœºæ™¯&amp;è¸©å‘ç‚¹</h4>
<p>âœ… é€‚ç”¨ï¼šæ•°æ®é‡å¤§ï¼ˆå¦‚CIFAR-10ã€ImageNetï¼‰ã€éœ€è¦é«˜æ³›åŒ–ï¼ˆæ¯”å¦‚åˆ†ç±»ä»»åŠ¡ï¼‰ã€å¤§æ¨¡å‹è®­ç»ƒï¼›</p>
<p>âŒ è¸©å‘ï¼šåƒä¸‡åˆ«ç”¨å¤ªå¤§çš„å­¦ä¹ ç‡ï¼ˆæ¯”å¦‚0.1ä»¥ä¸Šï¼‰ï¼Œå°¤å…¶æ˜¯å¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå®¹æ˜“å†²æ‰é¢„è®­ç»ƒæƒé‡ï¼›åŠ¨é‡ä¸€èˆ¬è®¾0.9ï¼ˆé»˜è®¤å€¼å°±å¤Ÿç”¨ï¼‰ã€‚</p>
<h3 data-id="heading-6">2.2 Adamï¼šå¿«åˆ°é£èµ·çš„â€œè‡ªåŠ¨æŒ¡â€</h3>
<h4 data-id="heading-7">åŸç†é€šä¿—è¯´</h4>
<p>Adam=SGD+åŠ¨é‡+è‡ªé€‚åº”å­¦ä¹ ç‡ã€‚ç›¸å½“äºç»™æ±½è½¦è£…äº†â€œæ™ºèƒ½å¯¼èˆª+è‡ªåŠ¨æ²¹é—¨â€ï¼šä¸ä»…èƒ½é æƒ¯æ€§å†²å¡ï¼Œè¿˜èƒ½æ ¹æ®è·¯å†µè‡ªåŠ¨è°ƒæ²¹é—¨å¤§å°â€”â€”åœ¨å¹³å¦è·¯æ®µï¼ˆLosså˜åŒ–å°ï¼‰åŠ å¤§æ²¹é—¨ï¼Œåœ¨é¢ ç°¸è·¯æ®µï¼ˆLossæ³¢åŠ¨å¤§ï¼‰å‡å°æ²¹é—¨ã€‚</p>
<h4 data-id="heading-8">ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šæ”¶æ•›é€Ÿåº¦æå¿«ï¼ˆæ¯”SGDå¿«2-3å€ï¼‰ã€å¯¹å­¦ä¹ ç‡ä¸æ•æ„Ÿï¼ˆé»˜è®¤0.001å°±å¤Ÿç”¨ï¼‰ã€é€‚åˆå°æ•°æ®ï¼›</li>
<li>ç¼ºç‚¹ï¼šæ³›åŒ–èƒ½åŠ›ç•¥å·®ï¼ˆå®¹æ˜“è¿‡æ‹Ÿåˆï¼‰ã€æ˜¾å­˜å ç”¨æ¯”SGDé«˜ã€éƒ¨åˆ†ä»»åŠ¡æœ€ç»ˆå‡†ç¡®ç‡ä¸å¦‚SGDã€‚</li>
</ul>
<h4 data-id="heading-9">é€‚ç”¨åœºæ™¯&amp;è¸©å‘ç‚¹</h4>
<p>âœ… é€‚ç”¨ï¼šæ•°æ®é‡å°ï¼ˆå¦‚å‡ ç™¾å¼ å›¾ç‰‡ï¼‰ã€å¿«é€ŸéªŒè¯æ¨¡å‹å¯è¡Œæ€§ã€å¾®è°ƒå°æ¨¡å‹ï¼›</p>
<p>âŒ è¸©å‘ï¼šè®­ç»ƒå¤§æ¨¡å‹æ—¶åˆ«ç”¨Adamï¼æ˜¾å­˜ä¼šæ¯”SGDå¤šå 20%-30%ï¼›é‡åˆ°è¿‡æ‹Ÿåˆæ—¶ï¼Œä¼˜å…ˆåŠ æƒé‡è¡°å‡ï¼Œè€Œä¸æ˜¯ç›²ç›®è°ƒå­¦ä¹ ç‡ã€‚</p>
<h3 data-id="heading-10">2.3 AdamWï¼šAdamçš„â€œä¿®å¤ç‰ˆâ€ï¼Œå·¥ä¸šç•Œé¦–é€‰</h3>
<h4 data-id="heading-11">åŸç†é€šä¿—è¯´</h4>
<p>Adamæœ‰ä¸ªè‡´å‘½ç¼ºé™·ï¼šæƒé‡è¡°å‡ï¼ˆL2æ­£åˆ™ï¼‰æ˜¯â€œåŠ åœ¨æ¢¯åº¦ä¸Šâ€çš„ï¼Œå¯¼è‡´æ­£åˆ™æ•ˆæœæ‰“æŠ˜æ‰£ã€‚AdamWç›´æ¥æŠŠæƒé‡è¡°å‡â€œç‹¬ç«‹å‡ºæ¥â€ï¼Œç›¸å½“äºç»™AdamåŠ äº†ä¸ªâ€œç²¾å‡†åˆ¹è½¦â€â€”â€”æ—¢ä¿ç•™äº†Adamçš„å¿«ï¼Œåˆæœ‰äº†SGDçš„ç¨³ã€‚</p>
<h4 data-id="heading-12">ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šå…¼é¡¾Adamçš„å¿«å’ŒSGDçš„ç¨³ã€æ³›åŒ–èƒ½åŠ›å¼ºã€å¯¹å¤šæ•°ä»»åŠ¡éƒ½å‹å¥½ï¼›</li>
<li>ç¼ºç‚¹ï¼šæ˜¾å­˜å ç”¨æ¯”SGDé«˜ï¼ˆå’ŒAdamå·®ä¸å¤šï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-13">é€‚ç”¨åœºæ™¯&amp;è¸©å‘ç‚¹</h4>
<p>âœ… é€‚ç”¨ï¼šç»å¤§å¤šæ•°åœºæ™¯ï¼ˆåˆ†ç±»ã€æ£€æµ‹ã€åˆ†å‰²ï¼‰ã€å°¤å…¶æ˜¯é¢„è®­ç»ƒæ¨¡å‹å¾®è°ƒï¼›</p>
<p>âŒ è¸©å‘ï¼šPyTorché‡ŒAdamWçš„é»˜è®¤å­¦ä¹ ç‡æ˜¯0.001ï¼Œå¾®è°ƒæ—¶å»ºè®®é™åˆ°1e-4ï¼ˆå’ŒSGDåŒç†ï¼Œé¿å…å†²æ‰é¢„è®­ç»ƒæƒé‡ï¼‰ã€‚</p>
<h3 data-id="heading-14">2.4 Muonï¼šå°ä¼—ä½†é«˜æ•ˆçš„â€œæ€§èƒ½çº§å¼•æ“â€</h3>
<h4 data-id="heading-15">åŸç†é€šä¿—è¯´</h4>
<p>Muonæ˜¯è¾ƒæ–°çš„ä¼˜åŒ–å™¨ï¼Œä¸“é—¨é’ˆå¯¹ç¥ç»ç½‘ç»œéšè—å±‚çš„äºŒç»´æƒé‡å‚æ•°è®¾è®¡ï¼Œæ ¸å¿ƒæ˜¯â€œåŠ¨æ€è°ƒæ•´åŠ¨é‡å’Œå­¦ä¹ ç‡â€â€”â€”æ¯”Adamæ›´çµæ´»ï¼Œæ¯”SGDæ›´å¿«ã€‚ç›¸å½“äºç»™æ±½è½¦è£…äº†â€œAIå¯¼èˆªâ€ï¼Œèƒ½æå‰é¢„åˆ¤è·¯å†µï¼Œè°ƒæ•´æ²¹é—¨å’Œæ¡£ä½ã€‚</p>
<h4 data-id="heading-16">ä¼˜ç¼ºç‚¹</h4>
<ul>
<li>ä¼˜ç‚¹ï¼šæ”¶æ•›é€Ÿåº¦æ¯”Adamå¿«ã€æ³›åŒ–èƒ½åŠ›æ¥è¿‘SGDã€å¯¹å¤æ‚ä»»åŠ¡ï¼ˆå¤§æ¨¡å‹è®­ç»ƒï¼‰è¡¨ç°å¥½ï¼›</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦æœ€æ–°ç‰ˆæœ¬çš„pytorchï¼ˆ2.9.0ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-17">é€‚ç”¨åœºæ™¯&amp;è¸©å‘ç‚¹</h4>
<p>âœ… é€‚ç”¨ï¼šå¤æ‚ä»»åŠ¡ï¼ˆåŒ»ç–—å½±åƒã€å·¥ä¸šç¼ºé™·æ£€æµ‹ï¼‰ã€æƒ³è¿½æ±‚æ›´å¿«æ”¶æ•›åˆæ€•è¿‡æ‹Ÿåˆï¼›</p>
<p>âŒ è¸©å‘ï¼šéœ€è¦ç‰ˆæœ¬å·12.6ä»¥ä¸Šçš„<code>cuda</code>ï¼Œåªèƒ½å¤„ç†ç¥ç»ç½‘ç»œçš„äºŒç»´æƒé‡å‚æ•°ã€‚</p>
<h2 data-id="heading-18">3. å­¦ä¹ ç‡è°ƒåº¦å™¨ï¼šè®©æ¨¡å‹â€œè‡ªåŠ¨æ¢æŒ¡â€çš„ç¥å™¨</h2>
<p>å°±ç®—é€‰å¯¹äº†ä¼˜åŒ–å™¨ï¼Œå›ºå®šå­¦ä¹ ç‡ä¹Ÿä¼šé‡åˆ°é—®é¢˜ï¼šå‰æœŸå­¦ä¹ ç‡å¤ªå°ï¼Œæ”¶æ•›æ…¢ï¼›åæœŸå­¦ä¹ ç‡å¤ªå¤§ï¼ŒLosséœ‡è¡ä¸æ”¶æ•›ã€‚è°ƒåº¦å™¨çš„ä½œç”¨å°±æ˜¯â€œåŠ¨æ€è°ƒå­¦ä¹ ç‡â€â€”â€”å‰æœŸåŠ å¤§æ²¹é—¨å†²ï¼ŒåæœŸå‡å°æ²¹é—¨ç¨³ï¼Œä¸ç”¨æ‰‹åŠ¨å¹²é¢„ã€‚</p>
<p>æˆ‘ä»¬é‡ç‚¹è®²3ä¸ªå·¥ä¸šç•Œæœ€å¸¸ç”¨çš„è°ƒåº¦å™¨ï¼Œè¿˜æ˜¯ç”¨â€œå¼€è½¦â€ç±»æ¯”ï¼š</p>
<h3 data-id="heading-19">3.1 StepLRï¼šå›ºå®šèŠ‚å¥â€œé™æ¡£â€</h3>
<h4 data-id="heading-20">åŸç†é€šä¿—è¯´</h4>
<p>æ¯è®­ç»ƒ<code>step_size</code>ä¸ªEpochï¼Œå°±æŠŠå­¦ä¹ ç‡ä¹˜ä»¥<code>gamma</code>ï¼ˆè¡°å‡ç³»æ•°ï¼‰ã€‚æ¯”å¦‚<code>step_size=10, gamma=0.1</code>ï¼šå‰10ä¸ªEpochç”¨åˆå§‹å­¦ä¹ ç‡ï¼Œ11-20ä¸ªEpochç”¨0.1å€å­¦ä¹ ç‡ï¼Œ21-30ä¸ªç”¨0.01å€â€”â€”ç›¸å½“äºå›ºå®šæ¯å¼€10å…¬é‡Œé™ä¸€æ¡£ã€‚</p>
<h4 data-id="heading-21">å…³é”®ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¯10ä¸ªEpochå­¦ä¹ ç‡è¡°å‡ä¸ºåŸæ¥çš„0.1</span>
scheduler = optim.lr_scheduler.StepLR(optimizer, step_size=<span class="hljs-number">10</span>, gamma=<span class="hljs-number">0.1</span>)
</code></pre>
<h4 data-id="heading-22">é€‚ç”¨åœºæ™¯</h4>
<p>é€‚åˆè®­ç»ƒèŠ‚å¥æ¸…æ™°çš„ä»»åŠ¡ï¼ˆå¦‚CIFAR-10åˆ†ç±»ï¼‰ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ç²—æš´ã€æ˜“ç†è§£ï¼Œç¼ºç‚¹æ˜¯ä¸å¤Ÿçµæ´»ï¼ˆä¸ç®¡Lossæœ‰æ²¡æœ‰æ”¶æ•›éƒ½é™æ¡£ï¼‰ã€‚</p>
<h3 data-id="heading-23">3.2 CosineAnnealingLRï¼šæ¨¡æ‹Ÿä½™å¼¦æ›²çº¿â€œå¹³æ»‘æ¢æŒ¡â€</h3>
<h4 data-id="heading-24">åŸç†é€šä¿—è¯´</h4>
<p>å­¦ä¹ ç‡éšEpochæŒ‰â€œä½™å¼¦æ›²çº¿â€å˜åŒ–ï¼šå…ˆä»åˆå§‹å€¼æ…¢æ…¢é™åˆ°0ï¼Œå†æ…¢æ…¢å‡å›æ¥ï¼ˆå¯é€‰ï¼‰ã€‚å°±åƒå¼€è½¦æ—¶æ ¹æ®å¡åº¦å¹³æ»‘è°ƒæ•´æ²¹é—¨ï¼Œè€Œä¸æ˜¯çŒ›è¸©æˆ–çŒ›æ¾â€”â€”<a href="https://juejin.cn/post/7595423675459190822" target="_blank" title="https://juejin.cn/post/7595423675459190822">ã€æ·±åº¦å­¦ä¹ Day9ã€‘</a>æˆ‘ä»¬ç”¨çš„å°±æ˜¯è¿™ä¸ªï¼Œèƒ½æœ‰æ•ˆé¿å…åæœŸLosséœ‡è¡ã€‚</p>
<h4 data-id="heading-25">å…³é”®ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># T_maxï¼šå­¦ä¹ ç‡ä»æœ€å¤§é™åˆ°æœ€å°çš„Epochæ•°ï¼ˆä¸€èˆ¬è®¾ä¸ºæ€»Epochæ•°ï¼‰</span>
scheduler = optim.lr_scheduler.CosineAnnealingLR(optimizer, T_max=<span class="hljs-number">20</span>)
</code></pre>
<h4 data-id="heading-26">é€‚ç”¨åœºæ™¯</h4>
<p>å‡ ä¹æ‰€æœ‰ä»»åŠ¡ï¼ˆå°¤å…¶æ˜¯é¢„è®­ç»ƒæ¨¡å‹å¾®è°ƒï¼‰ï¼Œä¼˜ç‚¹æ˜¯æ”¶æ•›ç¨³å®šã€æœ€ç»ˆå‡†ç¡®ç‡é«˜ï¼Œç¼ºç‚¹æ˜¯éœ€è¦æå‰ç¡®å®šæ€»Epochæ•°ã€‚</p>
<h3 data-id="heading-27">3.3 ReduceLROnPlateauï¼šæ ¹æ®â€œè·¯å†µâ€æ™ºèƒ½æ¢æŒ¡</h3>
<h4 data-id="heading-28">åŸç†é€šä¿—è¯´</h4>
<p>ä¸æŒ‰å›ºå®šEpoché™æ¡£ï¼Œè€Œæ˜¯ç›‘æ§æŸä¸ªæŒ‡æ ‡ï¼ˆå¦‚éªŒè¯é›†å‡†ç¡®ç‡ï¼‰ï¼šå¦‚æœæŒ‡æ ‡è¿ç»­<code>patience</code>ä¸ªEpochæ²¡æå‡ï¼Œå°±è‡ªåŠ¨é™ä½å­¦ä¹ ç‡ã€‚ç›¸å½“äºæ±½è½¦çš„â€œè‡ªé€‚åº”å·¡èˆªâ€ï¼Œæ ¹æ®å®é™…è·¯å†µè°ƒæ•´æ²¹é—¨ï¼Œæœ€æ™ºèƒ½çš„è°ƒåº¦å™¨ã€‚</p>
<h4 data-id="heading-29">å…³é”®ä»£ç </h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç›‘æ§éªŒè¯é›†å‡†ç¡®ç‡ï¼Œè¿ç»­5ä¸ªEpochæ²¡æå‡å°±é™æ¡£ï¼ˆgamma=0.1ï¼‰</span>
scheduler = optim.lr_scheduler.ReduceLROnPlateau(optimizer, mode=<span class="hljs-string">'max'</span>, patience=<span class="hljs-number">5</span>, gamma=<span class="hljs-number">0.1</span>)
</code></pre>
<h4 data-id="heading-30">é€‚ç”¨åœºæ™¯</h4>
<p>é€‚åˆä¸çŸ¥é“æ€»Epochæ•°ã€ä»»åŠ¡å¤æ‚ï¼ˆå¦‚æ£€æµ‹ã€åˆ†å‰²ï¼‰ï¼Œä¼˜ç‚¹æ˜¯æ™ºèƒ½ã€ä¸ç”¨æ‰‹åŠ¨è°ƒEpochï¼Œç¼ºç‚¹æ˜¯éœ€è¦æ¯æ¬¡Epochéƒ½è¯„ä¼°éªŒè¯é›†ï¼ˆå¤šèŠ±ä¸€ç‚¹æ—¶é—´ï¼‰ã€‚</p>
<h2 data-id="heading-31">4. ä»£ç å®æˆ˜ï¼šå¯è§†åŒ–å¯¹æ¯”+è°ƒåº¦å™¨å®æˆ˜</h2>
<p>æˆ‘ä»¬ç”¨<a href="https://juejin.cn/post/7595423675459190822" target="_blank" title="https://juejin.cn/post/7595423675459190822">ã€æ·±åº¦å­¦ä¹ Day9ã€‘</a>çš„â€œé­”æ”¹ResNet-18+CIFAR-10â€ä»»åŠ¡ï¼Œåšä¸¤ä¸ªæ ¸å¿ƒå®æˆ˜ï¼šâ‘  å¯è§†åŒ–å››å¤§ä¼˜åŒ–å™¨çš„æ”¶æ•›è½¨è¿¹ï¼›â‘¡ å¯¹æ¯”ä¸åŒè°ƒåº¦å™¨çš„æ•ˆæœã€‚ä»£ç å¯ç›´æ¥å¤åˆ¶è¿è¡Œã€‚</p>
<h3 data-id="heading-32">4.1 å®æˆ˜1ï¼šå››å¤§ä¼˜åŒ–å™¨æ”¶æ•›è½¨è¿¹å¯è§†åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> torch.optim <span class="hljs-keyword">as</span> optim
<span class="hljs-keyword">import</span> torchvision
<span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms
<span class="hljs-keyword">from</span> torchvision.models <span class="hljs-keyword">import</span> resnet18, ResNet18_Weights
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># ========== ç¯å¢ƒé…ç½®+æ•°æ®å‡†å¤‡ ==========</span>
device = torch.device(<span class="hljs-string">"cuda:0"</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">"cpu"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½¿ç”¨è®¾å¤‡ï¼š<span class="hljs-subst">{device}</span>"</span>)
batch_size = <span class="hljs-number">128</span>
epochs = <span class="hljs-number">20</span>
lr = <span class="hljs-number">0.01</span>  

<span class="hljs-comment"># æ•°æ®é¢„å¤„ç†</span>
transform_train = transforms.Compose([
    transforms.RandomCrop(<span class="hljs-number">32</span>, padding=<span class="hljs-number">4</span>),
    transforms.RandomHorizontalFlip(),
    transforms.ToTensor(),
    transforms.Normalize((<span class="hljs-number">0.4914</span>, <span class="hljs-number">0.4822</span>, <span class="hljs-number">0.4465</span>), (<span class="hljs-number">0.2023</span>, <span class="hljs-number">0.1994</span>, <span class="hljs-number">0.2010</span>)),
])
transform_test = transforms.Compose([
    transforms.ToTensor(),
    transforms.Normalize((<span class="hljs-number">0.4914</span>, <span class="hljs-number">0.4822</span>, <span class="hljs-number">0.4465</span>), (<span class="hljs-number">0.2023</span>, <span class="hljs-number">0.1994</span>, <span class="hljs-number">0.2010</span>)),
])

trainset = torchvision.datasets.CIFAR10(root=<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">True</span>, download=<span class="hljs-literal">True</span>, transform=transform_train)
trainloader = torch.utils.data.DataLoader(trainset, batch_size=batch_size, shuffle=<span class="hljs-literal">True</span>)
testset = torchvision.datasets.CIFAR10(root=<span class="hljs-string">'./data'</span>, train=<span class="hljs-literal">False</span>, download=<span class="hljs-literal">True</span>, transform=transform_test)
testloader = torch.utils.data.DataLoader(testset, batch_size=<span class="hljs-number">100</span>, shuffle=<span class="hljs-literal">False</span>)

<span class="hljs-comment"># ========== å®šä¹‰é­”æ”¹ResNet-18ï¼ˆå¤ç”¨Day9ä»£ç ï¼‰ ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_modified_resnet18</span>():
    model = resnet18(weights=ResNet18_Weights.DEFAULT)
    model.conv1 = nn.Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">3</span>, stride=<span class="hljs-number">1</span>, padding=<span class="hljs-number">1</span>, bias=<span class="hljs-literal">False</span>)
    model.maxpool = nn.Identity()
    num_ftrs = model.fc.in_features
    model.fc = nn.Linear(num_ftrs, <span class="hljs-number">10</span>)
    <span class="hljs-keyword">return</span> model.to(device)

<span class="hljs-comment"># ========== æ‹†åˆ†2D/é2Då‚æ•°çš„å‡½æ•°ï¼ˆé€‚é…Muonï¼‰ ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">split_muon_adam_params</span>(<span class="hljs-params">model</span>):
    muon_params = []  <span class="hljs-comment"># 2Då‚æ•°ï¼ˆä»…å…¨è¿æ¥å±‚æƒé‡ï¼‰</span>
    adam_params = []  <span class="hljs-comment"># é2Då‚æ•°ï¼ˆå·ç§¯å±‚/åç½®ï¼‰</span>
    <span class="hljs-keyword">for</span> name, param <span class="hljs-keyword">in</span> model.named_parameters():
        <span class="hljs-keyword">if</span> param.dim() == <span class="hljs-number">2</span>:
            muon_params.append(param)
        <span class="hljs-keyword">else</span>:
            adam_params.append(param)
    <span class="hljs-keyword">return</span> muon_params, adam_params

<span class="hljs-comment"># ========== æµ‹è¯•é›†è¯„ä¼°å‡½æ•° ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">evaluate_test</span>(<span class="hljs-params">model, testloader, device</span>):
    model.<span class="hljs-built_in">eval</span>() 
    correct = <span class="hljs-number">0</span>
    total = <span class="hljs-number">0</span>
    <span class="hljs-keyword">with</span> torch.no_grad():  
        <span class="hljs-keyword">for</span> inputs, labels <span class="hljs-keyword">in</span> testloader:
            inputs, labels = inputs.to(device), labels.to(device)
            outputs = model(inputs)
            _, predicted = outputs.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)
            total += labels.size(<span class="hljs-number">0</span>)
            correct += predicted.eq(labels).<span class="hljs-built_in">sum</span>().item()
    test_acc = <span class="hljs-number">100.</span> * correct / total
    <span class="hljs-keyword">return</span> test_acc

<span class="hljs-comment"># ========== é‡å®šä¹‰è®­ç»ƒå‡½æ•°ï¼ˆæ”¯æŒç»„åˆä¼˜åŒ–å™¨ï¼‰ ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">train_optimizer</span>(<span class="hljs-params">model, optimizer, criterion, trainloader, testloader, epochs, device, optimizer_name, schedulers=<span class="hljs-literal">None</span></span>):
    model.train()
    loss_history = [] 
    train_acc_history = []  
    test_acc_history = []   
    total_time = <span class="hljs-number">0.0</span>   
    max_memory = <span class="hljs-number">0.0</span>  
    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
        epoch_start = time.time()
        running_loss = <span class="hljs-number">0.0</span>
        correct = <span class="hljs-number">0</span>
        total = <span class="hljs-number">0</span>
        model.train()
        <span class="hljs-keyword">for</span> i, (inputs, labels) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(trainloader):
            inputs, labels = inputs.to(device), labels.to(device)
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(optimizer, <span class="hljs-built_in">list</span>):
                <span class="hljs-keyword">for</span> opt <span class="hljs-keyword">in</span> optimizer:
                    opt.zero_grad()
            <span class="hljs-keyword">else</span>:
                optimizer.zero_grad()
            outputs = model(inputs)
            loss = criterion(outputs, labels)
            loss.backward()
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(optimizer, <span class="hljs-built_in">list</span>):
                <span class="hljs-keyword">for</span> opt <span class="hljs-keyword">in</span> optimizer:
                    opt.step()
            <span class="hljs-keyword">else</span>:
                optimizer.step()
            running_loss += loss.item()
            _, predicted = outputs.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)
            total += labels.size(<span class="hljs-number">0</span>)
            correct += predicted.eq(labels).<span class="hljs-built_in">sum</span>().item()
        epoch_loss = running_loss / <span class="hljs-built_in">len</span>(trainloader)
        train_acc = <span class="hljs-number">100.</span> * correct / total
        <span class="hljs-comment"># è®¡ç®—å½“å‰Epochæµ‹è¯•å‡†ç¡®ç‡</span>
        test_acc = evaluate_test(model, testloader, device)
        epoch_time = time.time() - epoch_start
        loss_history.append(epoch_loss)
        train_acc_history.append(train_acc)
        test_acc_history.append(test_acc)
        total_time += epoch_time

        <span class="hljs-keyword">if</span> schedulers <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(schedulers, <span class="hljs-built_in">list</span>):
                <span class="hljs-keyword">for</span> sch <span class="hljs-keyword">in</span> schedulers:
                    sch.step()
            <span class="hljs-keyword">else</span>:
                schedulers.step()
    <span class="hljs-keyword">return</span> loss_history, train_acc_history, test_acc_history, total_time, max_memory

<span class="hljs-comment"># ========== åˆå§‹åŒ–å››å¤§ä¼˜åŒ–å™¨+è®­ç»ƒ ==========</span>
results = {}
criterion = nn.CrossEntropyLoss()

<span class="hljs-comment"># 1. SGDï¼ˆæ— åŠ¨é‡ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒï¼šSGDï¼ˆæ— åŠ¨é‡ï¼‰====="</span>)
model_sgd = get_modified_resnet18()
optimizer_sgd = optim.SGD(model_sgd.parameters(), lr=lr)
scheduler_sgd = optim.lr_scheduler.CosineAnnealingLR(optimizer_sgd, T_max=epochs)
loss_sgd, train_acc_sgd, test_acc_sgd, time_sgd, mem_sgd = train_optimizer(
    model_sgd, optimizer_sgd, criterion, trainloader, testloader, epochs, device, <span class="hljs-string">"SGD"</span>, scheduler_sgd
)
results[<span class="hljs-string">"SGD"</span>] = (loss_sgd, train_acc_sgd, test_acc_sgd, time_sgd, mem_sgd)

<span class="hljs-comment"># 2. SGD+momentum</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒï¼šSGD+momentum====="</span>)
model_sgd_mom = get_modified_resnet18()
optimizer_sgd_mom = optim.SGD(model_sgd_mom.parameters(), lr=lr, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">5e-4</span>)
scheduler_sgd_mom = optim.lr_scheduler.CosineAnnealingLR(optimizer_sgd_mom, T_max=epochs)
loss_sgd_mom, train_acc_sgd_mom, test_acc_sgd_mom, time_sgd_mom, mem_sgd_mom = train_optimizer(
    model_sgd_mom, optimizer_sgd_mom, criterion, trainloader, testloader, epochs, device, <span class="hljs-string">"SGD+momentum"</span>, scheduler_sgd_mom
)
results[<span class="hljs-string">"SGD+momentum"</span>] = (loss_sgd_mom, train_acc_sgd_mom, test_acc_sgd_mom, time_sgd_mom, mem_sgd_mom)

<span class="hljs-comment"># 3. AdamWï¼ˆå·¥ä¸šç•Œé¦–é€‰ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒï¼šAdamW====="</span>)
model_adamw = get_modified_resnet18()
optimizer_adamw = optim.AdamW(model_adamw.parameters(), lr=lr*<span class="hljs-number">0.1</span>) 
scheduler_adamw = optim.lr_scheduler.CosineAnnealingLR(optimizer_adamw, T_max=epochs)
loss_adamw, train_acc_adamw, test_acc_adamw, time_adamw, mem_adamw = train_optimizer(
    model_adamw, optimizer_adamw, criterion, trainloader, testloader, epochs, device, <span class="hljs-string">"AdamW"</span>, scheduler_adamw
)
results[<span class="hljs-string">"AdamW"</span>] = (loss_adamw, train_acc_adamw, test_acc_adamw, time_adamw, mem_adamw)

<span class="hljs-comment"># 4. Muon+Adamï¼ˆæ‹†åˆ†2D/é2Då‚æ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å¼€å§‹è®­ç»ƒï¼šMuon+Adam====="</span>)
model_muon = get_modified_resnet18()
muon_params, adam_params = split_muon_adam_params(model_muon)
optimizer_muon = optim.Muon(muon_params, lr=lr*<span class="hljs-number">0.1</span>)  
optimizer_adam = optim.Adam(adam_params, lr=lr*<span class="hljs-number">0.1</span>)
optimizer_comb = [optimizer_muon, optimizer_adam]
scheduler_muon = optim.lr_scheduler.CosineAnnealingLR(optimizer_muon, T_max=epochs)
scheduler_adam = optim.lr_scheduler.CosineAnnealingLR(optimizer_adam, T_max=epochs)
schedulers_comb = [scheduler_muon, scheduler_adam]
loss_muon, train_acc_muon, test_acc_muon, time_muon, mem_muon = train_optimizer(
    model_muon, optimizer_comb, criterion, trainloader, testloader, epochs, device, <span class="hljs-string">"Muon+Adam"</span>, schedulers_comb
)
results[<span class="hljs-string">"Muon+Adam"</span>] = (loss_muon, train_acc_muon, test_acc_muon, time_muon, mem_muon)
</code></pre>
<h3 data-id="heading-33">4.2 å®æˆ˜2ï¼šè°ƒåº¦å™¨æ•ˆæœå¯¹æ¯”ï¼ˆä»¥SGDä¸ºä¾‹ï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss"># å»¶ç»­ä¸Šé¢çš„ç¯å¢ƒå’Œæ¨¡å‹ï¼Œå¯¹æ¯”<span class="hljs-number">3</span>ç§è°ƒåº¦å™¨
def <span class="hljs-built_in">train_scheduler</span>(model, optimizer, scheduler, criterion, trainloader, testloader, epochs, device, scheduler_name):
    model.<span class="hljs-built_in">train</span>()
    loss_history = []
    acc_history = []
    val_acc_history = []
    total_time = <span class="hljs-number">0.0</span>
    max_memory = <span class="hljs-number">0.0</span>
    for epoch in <span class="hljs-built_in">range</span>(epochs):
        epoch_start = time.<span class="hljs-built_in">time</span>()
        running_loss = <span class="hljs-number">0.0</span>
        correct = <span class="hljs-number">0</span>
        total = <span class="hljs-number">0</span>
        for i, (inputs, labels) in <span class="hljs-built_in">enumerate</span>(trainloader):
            inputs, labels = inputs.<span class="hljs-built_in">to</span>(device), labels.<span class="hljs-built_in">to</span>(device)
            optimizer.<span class="hljs-built_in">zero_grad</span>()
            outputs = <span class="hljs-built_in">model</span>(inputs)
            loss = <span class="hljs-built_in">criterion</span>(outputs, labels)
            loss.<span class="hljs-built_in">backward</span>()
            optimizer.<span class="hljs-built_in">step</span>()
            running_loss += loss.<span class="hljs-built_in">item</span>()
            _, predicted = outputs.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)
            total += labels.<span class="hljs-built_in">size</span>(<span class="hljs-number">0</span>)
            correct += predicted.<span class="hljs-built_in">eq</span>(labels).<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">item</span>()

        val_acc = <span class="hljs-built_in">evaluate</span>(model, testloader, device)
        # æ›´æ–°è°ƒåº¦å™¨ï¼ˆæ³¨æ„ï¼šReduceLROnPlateauéœ€è¦ä¼ éªŒè¯é›†æŒ‡æ ‡ï¼‰
        if <span class="hljs-built_in">isinstance</span>(scheduler, optim.lr_scheduler.ReduceLROnPlateau):
            scheduler.<span class="hljs-built_in">step</span>(val_acc)
        else:
            scheduler.<span class="hljs-built_in">step</span>()
        epoch_loss = running_loss / <span class="hljs-built_in">len</span>(trainloader)
        epoch_acc = <span class="hljs-number">100</span>. * correct / total
        loss_history.<span class="hljs-built_in">append</span>(epoch_loss)
        acc_history.<span class="hljs-built_in">append</span>(epoch_acc)
        val_acc_history.<span class="hljs-built_in">append</span>(val_acc)
        total_time += time.<span class="hljs-built_in">time</span>() - epoch_start

        current_lr = optimizer.param_groups[<span class="hljs-number">0</span>][<span class="hljs-string">'lr'</span>]
        <span class="hljs-built_in">print</span>(f<span class="hljs-string">"ã€{scheduler_name}ã€‘Epoch [{epoch+1}/{epochs}], Loss: {epoch_loss:.3f}, Train Acc: {epoch_acc:.2f}%, Val Acc: {val_acc:.2f}%, LR: {current_lr:.6f}"</span>)
    return loss_history, acc_history, val_acc_history, total_time, max_memory

# å®šä¹‰è¯„ä¼°å‡½æ•°
def <span class="hljs-built_in">evaluate</span>(model, testloader, device):
    model.<span class="hljs-built_in">eval</span>()
    correct = <span class="hljs-number">0</span>
    total = <span class="hljs-number">0</span>
    with torch.<span class="hljs-built_in">no_grad</span>():
        for inputs, labels in testloader:
            inputs, labels = inputs.<span class="hljs-built_in">to</span>(device), labels.<span class="hljs-built_in">to</span>(device)
            outputs = <span class="hljs-built_in">model</span>(inputs)
            _, predicted = outputs.<span class="hljs-built_in">max</span>(<span class="hljs-number">1</span>)
            total += labels.<span class="hljs-built_in">size</span>(<span class="hljs-number">0</span>)
            correct += predicted.<span class="hljs-built_in">eq</span>(labels).<span class="hljs-built_in">sum</span>().<span class="hljs-built_in">item</span>()
    return <span class="hljs-number">100</span>. * correct / total

# ========== åˆå§‹åŒ–<span class="hljs-number">3</span>ç§è°ƒåº¦å™¨+è®­ç»ƒ ==========
scheduler_results = {}
base_optimizer = optim<span class="hljs-selector-class">.SGD</span>(get_modified_resnet18()<span class="hljs-selector-class">.parameters</span>(), lr=lr, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">5</span>e-<span class="hljs-number">4</span>)

# <span class="hljs-number">1</span>. æ— è°ƒåº¦å™¨ï¼ˆå›ºå®šå­¦ä¹ ç‡ï¼‰
<span class="hljs-built_in">print</span>("\n===== å¼€å§‹è®­ç»ƒï¼šæ— è°ƒåº¦å™¨ï¼ˆå›ºå®šLRï¼‰=====")
model_no_sched = <span class="hljs-built_in">get_modified_resnet18</span>()
optimizer_no_sched = optim<span class="hljs-selector-class">.SGD</span>(model_no_sched.parameters(), lr=lr, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">5</span>e-<span class="hljs-number">4</span>)
loss_no_sched, acc_no_sched, val_no_sched, time_no_sched, mem_no_sched = <span class="hljs-built_in">train_scheduler</span>(
    model_no_sched, optimizer_no_sched, None, criterion, trainloader, testloader, epochs, device, "æ— è°ƒåº¦å™¨"
)
scheduler_results<span class="hljs-selector-attr">[<span class="hljs-string">"æ— è°ƒåº¦å™¨"</span>]</span> = (loss_no_sched, acc_no_sched, val_no_sched, time_no_sched, mem_no_sched)

# <span class="hljs-number">2</span>. StepLR
<span class="hljs-built_in">print</span>("\n===== å¼€å§‹è®­ç»ƒï¼šStepLR=====")
model_step = <span class="hljs-built_in">get_modified_resnet18</span>()
optimizer_step = optim<span class="hljs-selector-class">.SGD</span>(model_step.parameters(), lr=lr, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">5</span>e-<span class="hljs-number">4</span>)
scheduler_step = optim<span class="hljs-selector-class">.lr_scheduler</span><span class="hljs-selector-class">.StepLR</span>(optimizer_step, step_size=<span class="hljs-number">10</span>, gamma=<span class="hljs-number">0.1</span>)
loss_step, acc_step, val_step, time_step, mem_step = <span class="hljs-built_in">train_scheduler</span>(
    model_step, optimizer_step, scheduler_step, criterion, trainloader, testloader, epochs, device, "StepLR"
)
scheduler_results<span class="hljs-selector-attr">[<span class="hljs-string">"StepLR"</span>]</span> = (loss_step, acc_step, val_step, time_step, mem_step)

# <span class="hljs-number">3</span>. CosineAnnealingLR
<span class="hljs-built_in">print</span>("\n===== å¼€å§‹è®­ç»ƒï¼šCosineAnnealingLR=====")
model_cosine = <span class="hljs-built_in">get_modified_resnet18</span>()
optimizer_cosine = optim<span class="hljs-selector-class">.SGD</span>(model_cosine.parameters(), lr=<span class="hljs-number">0.001</span>, momentum=<span class="hljs-number">0.9</span>, weight_decay=<span class="hljs-number">5</span>e-<span class="hljs-number">4</span>)
scheduler_cosine = optim<span class="hljs-selector-class">.lr_scheduler</span><span class="hljs-selector-class">.CosineAnnealingLR</span>(optimizer_cosine, T_max=<span class="hljs-number">10</span>)
loss_cosine, acc_cosine, val_cosine, time_cosine, mem_cosine = <span class="hljs-built_in">train_scheduler</span>(
    model_cosine, optimizer_cosine, scheduler_cosine, criterion, trainloader, testloader, epochs, device, "CosineAnnealingLR"
)
scheduler_results<span class="hljs-selector-attr">[<span class="hljs-string">"CosineAnnealingLR"</span>]</span> = (loss_cosine, acc_cosine, val_cosine, time_cosine, mem_cosine)
</code></pre>
<h3 data-id="heading-34">4.3 å®æˆ˜å…³é”®è¯´æ˜ï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h3>
<ol>
<li>å­¦ä¹ ç‡ç»Ÿä¸€ï¼šä¸ºäº†å…¬å¹³å¯¹æ¯”ï¼ŒSGD+momentumç”¨0.01ï¼ŒAdamWå’ŒMuonç”¨0.001ï¼ˆAdamWé»˜è®¤å€¼ï¼‰ï¼Œé¿å…å› å­¦ä¹ ç‡ä¸åŒå¯¼è‡´ç»“æœåå·®ï¼›</li>
<li>è¦ç”¨Muonçš„è¯ï¼Œéœ€è¦å…ˆæ›´æ–°é©±åŠ¨ï¼Œéœ€è¦æœ€æ–°ç‰ˆæœ¬çš„PyTorchã€‚å¦‚æœå®‰è£…å¤±è´¥ï¼Œå¯è·³è¿‡Muonï¼Œé‡ç‚¹å¯¹æ¯”SGDã€SGD+momentumã€AdamWï¼›</li>
</ol>
<h2 data-id="heading-35">5. å®éªŒç»“æœå¯¹æ¯”ä¸ç»“è®ºï¼ˆ2080Tiå®æµ‹ï¼‰</h2>
<h3 data-id="heading-36">5.1 å››å¤§ä¼˜åŒ–å™¨å¯¹æ¯”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbdcd76cd5e146c0b79558abf3b88179~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p-g5p-g6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268048&amp;x-signature=43nOgGkfP70JI2vtkyiqT7yCenE%3D" alt="optimizer_comparison.png" loading="lazy"/></p>



































<table><thead><tr><th>ä¼˜åŒ–å™¨</th><th>Epoch20å‡†ç¡®ç‡</th><th>æ€»è®­ç»ƒæ—¶é—´</th><th>æ ¸å¿ƒç»“è®º</th></tr></thead><tbody><tr><td>SGDï¼ˆæ— åŠ¨é‡ï¼‰</td><td>92.34%</td><td>18åˆ†é’Ÿ</td><td>æ”¶æ•›æ…¢ï¼Œä¸æ¨è</td></tr><tr><td>SGD+momentum</td><td>95.53%</td><td>19åˆ†é’Ÿ</td><td>ç¨³ä¸”çœæ˜¾å­˜ï¼Œåˆ†ç±»ä»»åŠ¡é¦–é€‰</td></tr><tr><td>AdamW</td><td>94.21%</td><td>18åˆ†é’Ÿ</td><td>å¿«ä¸”å‡†ï¼Œå¤æ‚ä»»åŠ¡é¦–é€‰</td></tr><tr><td>Muon+Adam</td><td>94.72%</td><td>18åˆ†é’Ÿ</td><td>å¿«ï¼Œä½†éœ€æ›´æ–°cudaé©±åŠ¨</td></tr></tbody></table>
<h3 data-id="heading-37">5.2 è°ƒåº¦å™¨å¯¹æ¯”</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5f5e779c82748249a97ede0702336e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p-g5p-g6YWx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268048&amp;x-signature=rjPwvzIqXre%2FkVasKoI%2Byu70W9M%3D" alt="scheduler_comparison.png" loading="lazy"/></p>
<ul>
<li>æ— è°ƒåº¦å™¨ï¼ˆå›ºå®šLRï¼‰ï¼šEpoch10åå‡†ç¡®ç‡å°±å¡ä½ï¼ˆ92%å·¦å³ï¼‰ï¼ŒLosséœ‡è¡ï¼›</li>
<li>StepLRï¼šEpoch10é™æ¡£åå‡†ç¡®ç‡æå‡åˆ°94%ï¼Œä½†åæœŸè¿˜æ˜¯éœ‡è¡ï¼›</li>
<li>CosineAnnealingLRï¼šæœ€ç»ˆå‡†ç¡®ç‡94.2%ï¼ŒLosså…¨ç¨‹å¹³æ»‘ä¸‹é™ï¼Œæ— éœ‡è¡â€”â€”è¿™å°±æ˜¯<a href="https://juejin.cn/post/7595423675459190822" target="_blank" title="https://juejin.cn/post/7595423675459190822">ã€æ·±åº¦å­¦ä¹ Day9ã€‘</a> é€‰å®ƒçš„åŸå› ï¼</li>
</ul>
<h3 data-id="heading-38">5.3 ç»ˆæè°ƒå‚å»ºè®®ï¼ˆMATLABè€é¸Ÿæ€»ç»“ï¼‰</h3>
<p>ä¸ç”¨è®°å¤æ‚å…¬å¼ï¼ŒæŒ‰è¿™ä¸ªä¼˜å…ˆçº§é€‰å°±è¡Œï¼š</p>
<ol>
<li>åˆ†ç±»ä»»åŠ¡ï¼ˆCIFAR-10ã€ImageNetï¼‰ï¼š<code>SGD+momentum+CosineAnnealingLR</code>ï¼ˆç¨³ã€çœæ˜¾å­˜ã€æ³›åŒ–å¥½ï¼‰ï¼›</li>
<li>å¤æ‚ä»»åŠ¡ï¼ˆæ£€æµ‹ã€åˆ†å‰²ã€åŒ»ç–—å½±åƒï¼‰ï¼š<code>AdamW+CosineAnnealingLR</code>ï¼ˆå¿«ã€å‡†ã€å®¹é”™ç‡é«˜ï¼‰ï¼›</li>
<li>å°æ•°æ®/å¿«é€ŸéªŒè¯ï¼š<code>AdamW+æ— è°ƒåº¦å™¨</code>ï¼ˆé»˜è®¤lr=0.001ï¼Œå¼€ç®±å³ç”¨ï¼‰ï¼›</li>
<li>å¤§æ¨¡å‹/æ˜¾å­˜ç´§å¼ ï¼š<code>SGD+momentum+StepLR</code>ï¼ˆæ˜¾å­˜å ç”¨æœ€å°ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-39">6. é¢è¯•é¿å‘æŒ‡å—ï¼ˆé«˜é¢‘é—®é¢˜+æ ‡å‡†ç­”æ¡ˆï¼‰</h2>
<h3 data-id="heading-40">Q1ï¼šAdamå’ŒSGDè°æ›´å¥½ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨Adamï¼Œä»€ä¹ˆæ—¶å€™ç”¨SGDï¼Ÿ</h3>
<p>ç­”ï¼šæ²¡æœ‰ç»å¯¹çš„å¥½åï¼Œçœ‹åœºæ™¯ï¼š</p>
<ul>
<li>æ•°æ®é‡å¤§ã€éœ€è¦é«˜æ³›åŒ–ï¼ˆå¦‚åˆ†ç±»ä»»åŠ¡ï¼‰ï¼šç”¨SGDï¼ˆ+momentumï¼‰â€”â€”æ³›åŒ–èƒ½åŠ›å¼ºï¼Œæ˜¾å­˜å ç”¨å°ï¼›</li>
<li>æ•°æ®é‡å°ã€å¤æ‚ä»»åŠ¡ã€å¿«é€ŸéªŒè¯ï¼šç”¨Adam/AdamWâ€”â€”æ”¶æ•›å¿«ï¼Œå¯¹å­¦ä¹ ç‡ä¸æ•æ„Ÿã€‚</li>
</ul>
<h3 data-id="heading-41">Q2ï¼šAdamWå’ŒAdamçš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå·¥ä¸šç•Œç°åœ¨éƒ½ç”¨AdamWï¼Ÿ</h3>
<p>ç­”ï¼šæ ¸å¿ƒåŒºåˆ«æ˜¯â€œæƒé‡è¡°å‡çš„å®ç°æ–¹å¼â€ï¼š</p>
<ul>
<li>Adamï¼šæƒé‡è¡°å‡æ˜¯â€œåŠ åœ¨æ¢¯åº¦ä¸Šâ€çš„ï¼Œç›¸å½“äºâ€œè¡°å‡åå†æ›´æ–°æ¢¯åº¦â€ï¼Œæ­£åˆ™æ•ˆæœæ‰“æŠ˜æ‰£ï¼›</li>
<li>AdamWï¼šæƒé‡è¡°å‡æ˜¯â€œç‹¬ç«‹äºæ¢¯åº¦æ›´æ–°â€çš„ï¼Œç›¸å½“äºâ€œå…ˆæ›´æ–°æ¢¯åº¦ï¼Œå†å•ç‹¬è¡°å‡æƒé‡â€ï¼Œæ­£åˆ™æ•ˆæœæ›´ç²¾å‡†ã€‚</li>
</ul>
<p>å·¥ä¸šç•Œç”¨AdamWæ˜¯å› ä¸ºå®ƒå…¼é¡¾äº†Adamçš„å¿«å’ŒSGDçš„æ³›åŒ–èƒ½åŠ›ï¼Œå°¤å…¶æ˜¯é¢„è®­ç»ƒæ¨¡å‹å¾®è°ƒæ—¶ï¼Œæ•ˆæœæ¯”Adamå¥½å¾ˆå¤šã€‚</p>
<h3 data-id="heading-42">Q3ï¼šå­¦ä¹ ç‡è°ƒåº¦å™¨çš„æ ¸å¿ƒä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå¸¸ç”¨çš„è°ƒåº¦å™¨æœ‰å“ªäº›ï¼Ÿ</h3>
<p>ç­”ï¼šæ ¸å¿ƒä½œç”¨æ˜¯â€œåŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡â€ï¼Œè§£å†³å›ºå®šå­¦ä¹ ç‡çš„ç—›ç‚¹ï¼šå‰æœŸæ”¶æ•›æ…¢ã€åæœŸéœ‡è¡ä¸æ”¶æ•›ã€‚</p>
<p>å¸¸ç”¨çš„3ç§ï¼šStepLRï¼ˆå›ºå®šèŠ‚å¥é™æ¡£ï¼‰ã€CosineAnnealingLRï¼ˆå¹³æ»‘é™æ¡£ï¼Œé¦–é€‰ï¼‰ã€ReduceLROnPlateauï¼ˆæ ¹æ®éªŒè¯é›†æŒ‡æ ‡æ™ºèƒ½é™æ¡£ï¼‰ã€‚</p>
<h3 data-id="heading-43">Q4ï¼šä¸ºä»€ä¹ˆå¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå­¦ä¹ ç‡è¦è®¾å¾—å¾ˆå°ï¼ˆæ¯”å¦‚1e-4ï¼‰ï¼Ÿ</h3>
<p>ç­”ï¼šé¢„è®­ç»ƒæ¨¡å‹çš„æƒé‡å·²ç»æ˜¯â€œæ¯”è¾ƒä¼˜â€çš„çŠ¶æ€ï¼Œç›¸å½“äºæ¨¡å‹å·²ç»â€œå­¦ä¼šäº†é€šç”¨çŸ¥è¯†â€ã€‚å¦‚æœå­¦ä¹ ç‡å¤ªå¤§ï¼Œä¼šå¿«é€Ÿå†²æ‰è¿™äº›ä¼˜è´¨æƒé‡ï¼Œå¯¼è‡´æ¨¡å‹æ€§èƒ½ä¸‹é™â€”â€”å°±åƒè€å¸æœºå¼€è½¦ï¼Œåœ¨é«˜é€Ÿä¸Šä¸éœ€è¦çŒ›è¸©æ²¹é—¨ï¼Œè½»è½»ç‚¹ä¸€ä¸‹å°±è¡Œã€‚</p>
<h2 data-id="heading-44">ğŸ“Œ ä¸‹æœŸé¢„å‘Š</h2>
<p>æå®šäº†ä¼˜åŒ–å™¨ï¼Œæˆ‘ä»¬çš„æ¨¡å‹è®­ç»ƒå·²ç»å¾ˆä¸“ä¸šäº†ã€‚ ä½†ç›´åˆ°ç°åœ¨ï¼Œæˆ‘ä»¬éƒ½æ˜¯åœ¨åš <strong>â€œç›‘ç£å­¦ä¹ â€</strong> â€”â€” å¿…é¡»è¦æœ‰æ ‡ç­¾ï¼ˆLabelï¼‰æ‰èƒ½è®­ç»ƒã€‚ å¦‚æœæˆ‘æœ‰ä¸€å †å›¾ï¼Œä½†<strong>æ²¡æœ‰æ ‡ç­¾</strong>æ€ä¹ˆåŠï¼Ÿèƒ½ä¸èƒ½è®©ç¥ç»ç½‘ç»œè‡ªå·±å­¦ä¼šâ€œä»€ä¹ˆæ˜¯å›¾â€ï¼Ÿ ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†è¿›å…¥æ— ç›‘ç£å­¦ä¹ çš„å¥‡å¹»é¢†åŸŸ â€”â€” <strong>è‡ªç¼–ç å™¨ (AutoEncoder, AE) ä¸æ•°æ®é™ç»´</strong>ã€‚ ä½œä¸º MATLAB è€é¸Ÿï¼Œä½ ä¼šå‘ç°è¿™ä¸å°±æ˜¯ç¥ç»ç½‘ç»œç‰ˆçš„ <strong>PCA (ä¸»æˆåˆ†åˆ†æ)</strong> å—ï¼Ÿæˆ‘ä»¬å°†ç”¨å®ƒæ¥åšå›¾åƒå»å™ªå’Œå‹ç¼©ï¼Œéå¸¸å¥½ç©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mybatisæ‰§è¡ŒMapperè¿‡ç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7595894884958191667</link>    <guid>https://juejin.cn/post/7595894884958191667</guid>    <pubDate>2026-01-18T04:01:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884958191667" data-draft-id="7596299957277458459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mybatisæ‰§è¡ŒMapperè¿‡ç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="Java,æºç é˜…è¯»,MyBatis"/> <meta itemprop="datePublished" content="2026-01-18T04:01:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ä¾ å®¢è¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/556801719828361"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mybatisæ‰§è¡ŒMapperè¿‡ç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/556801719828361/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ä¾ å®¢è¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T04:01:45.000Z" title="Sun Jan 18 2026 04:01:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šä¸€ç¯‡ã€Š<a href="https://juejin.cn/post/7589212818808176703" target="_blank" title="https://juejin.cn/post/7589212818808176703">MybatisäºŒçº§ç¼“å­˜å®ç°è¯¦è§£</a>ã€‹ä»‹ç»äº†äºŒçº§ç¼“å­˜çš„å®ç°ç±»å‹ã€åˆ›å»ºå’Œä½¿ç”¨ã€‚ç°åœ¨æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹ï¼ŒMybatisä¸­Mapperæ¥å£æ˜¯å¦‚ä½•è¢«ä»£ç†å¹¶æ‰§è¡ŒSQLè¯­å¥çš„ï¼Ÿ</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡ä¸­æºç æ¥è‡ªmybatis 3.4.xç‰ˆæœ¬ï¼Œåœ°å€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmybatis%2Fmybatis-3.git" target="_blank" title="https://github.com/mybatis/mybatis-3.git" ref="nofollow noopener noreferrer">github.com/mybatis/mybâ€¦</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸€ æ³¨å†ŒMapperæ¥å£</h2>
<h3 data-id="heading-1">1.1è§£æMapper</h3>
<h4 data-id="heading-2">XMLæ–¹å¼è§£æ</h4>
<p>åœ¨ä¸»é…ç½®æ–‡ä»¶ (å¦‚mybatis-config.xml)ï¼Œå¯ä»¥åšå¦‚ä¸‹é…ç½®ï¼Œæ¥æŒ‡å®šMapperé›†ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ–¹å¼1ï¼šæŒ‡å®šåŒ…åï¼Œæ‰¹é‡æ³¨å†Œ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"com.example.mapper"</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ–¹å¼2ï¼šæŒ‡å®šXMLæ–‡ä»¶è·¯å¾„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"com/example/mapper/UserMapper.xml"</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ–¹å¼3ï¼šæŒ‡å®šURL --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">url</span>=<span class="hljs-string">"file:///var/mappers/UserMapper.xml"</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ–¹å¼4ï¼šæŒ‡å®šæ¥å£ç±»å --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.mapper.UserMapper"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span>
</code></pre>
<p>XMLConfigBuilder.mapperElement()ä¼šå¤„ç†è¿™äº›é…ç½®ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a042d7d118b346abad08f66c766b17b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=n6VcP4LT5bnHkEQ1hoFNzwg4aUo%3D" alt="" loading="lazy"/>
ç„¶åXMLMapperBuilder#bindMapperForNamespaceï¼Œæ³¨å†ŒMapperæ¥å£åˆ°Configuration</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bindMapperForNamespace</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// mapper.xmlçš„namespaceå°±æ˜¯æ¥å£çš„å…¨é™å®šå</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">namespace</span> <span class="hljs-operator">=</span> builderAssistant.getCurrentNamespace();
    <span class="hljs-keyword">if</span> (namespace != <span class="hljs-literal">null</span>) {
        Class&lt;?&gt; boundType = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            boundType = Resources.classForName(namespace);
        } <span class="hljs-keyword">catch</span> (ClassNotFoundException e) {
            <span class="hljs-comment">//ignore, bound type is not required</span>
        }
        <span class="hljs-keyword">if</span> (boundType != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (!configuration.hasMapper(boundType)) {               
                configuration.addLoadedResource(<span class="hljs-string">"namespace:"</span> + namespace);
                <span class="hljs-comment">// æ³¨å†Œmapperæ¥å£</span>
                configuration.addMapper(boundType);
            }
        }
    }
}
</code></pre>
<h4 data-id="heading-3">æ³¨è§£æ–¹å¼è§£æ</h4>
<p>MyBatisä¸­æä¾›äº†@Mapperæ³¨è§£ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•åœ°æ–¹æ£€æŸ¥æˆ–å¤„ç†è¯¥æ³¨è§£ã€‚@Mapperæ˜¯ä¸ºSpring Bootç­‰æ¡†æ¶æä¾›çš„æ ‡è®°æ³¨è§£ï¼š</p>
<ul>
<li>Spring Bootçš„@MapperScanä¼šæ‰«æ@Mapperæ³¨è§£</li>
<li>MyBatis-Spring-Boot-Starterä¼šå¤„ç†@Mapperæ³¨è§£</li>
</ul>
<p>MyBatisæœ¬èº«åªæä¾›äº†Configuration.addMapper()ç­‰APIä¾›å¤–éƒ¨æ¡†æ¶è°ƒç”¨ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed931f8786dd4dd8ab03c35cfab9ca93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=ebwjLb3Op%2Be8UcHt%2FdZlztfFZVk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">1.2 æ³¨å†ŒMapper</h3>
<p>æ³¨å†ŒMapperï¼Œå…¶å®å°±æ˜¯å°†Mapperçš„Classå¯¹è±¡ã€ä»£ç†å·¥å‚æ·»åŠ åˆ°MapperRegistryçš„knownMappersä¸­ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8be7b3c419f48c1a9729ed5f20fcaaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=oJlGuqHlor9quZmKsMpACU%2F0h98%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">addMapper</span><span class="hljs-params">(Class&lt;T&gt; type)</span> {
    <span class="hljs-comment">//...</span>
    knownMappers.put(type, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapperProxyFactory</span>&lt;T&gt;(type));
}
</code></pre>
<h3 data-id="heading-5">1.3 è·å–Mapperä»£ç†</h3>
<p>è·å–Mapperæ—¶å…¶å®åˆ›å»ºäº†ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å°†é™æ€æ¥å£å®šä¹‰ä¸åŠ¨æ€SQLæ‰§è¡Œå®Œç¾ç»“åˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MapperRegistry#getMapper</span>
<span class="hljs-keyword">public</span> &lt;T&gt; T <span class="hljs-title function_">getMapper</span><span class="hljs-params">(Class&lt;T&gt; type, SqlSession sqlSession)</span> {
    <span class="hljs-keyword">final</span> MapperProxyFactory&lt;T&gt; mapperProxyFactory = (MapperProxyFactory&lt;T&gt;) knownMappers.get(type);
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åˆ›å»ºmapperä»£ç†å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> mapperProxyFactory.newInstance(sqlSession);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BindingException</span>(<span class="hljs-string">"Error getting mapper instance. Cause: "</span> + e, e);
    }
}
</code></pre>
<p>MapperProxyå£°æ˜äº†ä»£ç†é€»è¾‘ï¼šè°ƒç”¨æ¥å£æ–¹æ³•è§¦å‘æ‰§è¡ŒSQLè¯­å¥ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡MapperProxy</span>
<span class="hljs-keyword">public</span> T <span class="hljs-title function_">newInstance</span><span class="hljs-params">(SqlSession sqlSession)</span> {
<span class="hljs-comment">// MapperProxyå³ä»£ç†é€»è¾‘</span>
<span class="hljs-keyword">final</span> MapperProxy&lt;T&gt; mapperProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MapperProxy</span>&lt;T&gt;(sqlSession, mapperInterface, methodCache);
<span class="hljs-keyword">return</span> (T) Proxy.newProxyInstance(mapperInterface.getClassLoader(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[] { mapperInterface }, mapperProxy);
}
</code></pre>
<p>MapperProxyå®ç°äº†InvocationHandlerï¼ˆJDKåŠ¨æ€ä»£ç†ï¼‰ï¼Œä¼šæ‹¦æˆªMapperæ¥å£æ–¹æ³•æ‰§è¡Œï¼š</p>
<ul>
<li>Objectæ–¹æ³• â†’ ç›´æ¥æ‰§è¡Œ</li>
<li>é»˜è®¤æ–¹æ³• â†’ åå°„è°ƒç”¨</li>
<li>ä¸šåŠ¡æ–¹æ³• â†’ åˆ›å»º/è·å–MapperMethodå†æ‰§è¡Œ</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f219a08f83de43339f5801b1207fc0f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=u5ESa4K92A63GuiMdUHZS3Pc%2BiU%3D" alt="" loading="lazy"/></p>
<p>MapperMethodä¸­ä¼šæ ¹æ®æ–¹æ³•åå¯¹åº”çš„SQLç±»å‹ï¼Œæ‰§è¡Œä¸åŒçš„æ–¹æ³•ï¼Œå¦‚</p>
<ul>
<li>SELECT â†’ sqlSession.selectList()</li>
<li>INSERT â†’ sqlSession.insert()</li>
<li>UPDATE â†’ sqlSession.update()</li>
<li>DELETE â†’ sqlSession.delete()</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1da034452e3a4c0c894de7ac0752016e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=9brl0tsx601%2FcU6tVW2HnbYCoiQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">äºŒ æ³¨å†ŒMappedStatement</h2>
<h3 data-id="heading-7">2.1 ä»€ä¹ˆæ˜¯MappedStatement</h3>
<p>MappedStatement æ˜¯ MyBatis ä¸­ SQL è¯­å¥çš„å®Œæ•´æè¿°å¯¹è±¡ï¼Œå®ƒå°è£…äº†ä¸€æ¡ SQL è¯­å¥çš„æ‰€æœ‰é…ç½®ä¿¡æ¯å’Œå…ƒæ•°æ®ï¼Œæ˜¯è¿æ¥ Mapper æ¥å£æ–¹æ³•å’Œå®é™… SQL æ‰§è¡Œçš„æ¡¥æ¢ã€‚</p>
<ol>
<li>SQL è¯­å¥çš„å…ƒæ•°æ®å®¹å™¨</li>
</ol>
<ul>
<li>å­˜å‚¨ SQL è¯­å¥çš„ IDï¼ˆé€šå¸¸æ˜¯ namespace.methodNameï¼‰</li>
<li>ä¿å­˜ SqlSourceï¼ˆåŠ¨æ€ SQL æ¥æºï¼‰</li>
<li>è®°å½• SQL å‘½ä»¤ç±»å‹ï¼ˆINSERT/UPDATE/DELETE/SELECTï¼‰</li>
</ul>
<ol start="2">
<li>å‚æ•°å’Œç»“æœæ˜ å°„é…ç½®</li>
</ol>
<ul>
<li>ParameterMapï¼šå‚æ•°æ˜ å°„é…ç½®</li>
<li>ResultMapï¼šç»“æœé›†æ˜ å°„é…ç½®</li>
<li>æ”¯æŒåµŒå¥—ç»“æœæ˜ å°„</li>
</ul>
<ol start="3">
<li>æ‰§è¡Œé…ç½®ä¿¡æ¯</li>
</ol>
<ul>
<li>StatementTypeï¼šè¯­å¥ç±»å‹ï¼ˆPREPARED/SIMPLE/CALLABLEï¼‰</li>
<li>timeoutï¼šè¶…æ—¶æ—¶é—´</li>
<li>fetchSizeï¼šæŠ“å–å¤§å°</li>
<li>KeyGeneratorï¼šä¸»é”®ç”Ÿæˆå™¨</li>
</ul>
<ol start="4">
<li>ç¼“å­˜ç›¸å…³é…ç½®</li>
</ol>
<ul>
<li>Cacheï¼šå…³è”çš„ç¼“å­˜å¯¹è±¡</li>
<li>useCacheï¼šæ˜¯å¦ä½¿ç”¨ç¼“å­˜</li>
<li>flushCacheRequiredï¼šæ˜¯å¦éœ€è¦åˆ·æ–°ç¼“å­˜</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12ec416d7e4a407688d1949dfd36e1fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=7HXga8FjPL11bfSdYRON5lN7Y0w%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­çš„å…³é”®æ–¹æ³•æ˜¯getBoundSql(Object parameterObject)ï¼šæ ¹æ®å‚æ•°å¯¹è±¡ç”Ÿæˆ BoundSqlï¼ˆåŒ…å«æœ€ç»ˆå¯æ‰§è¡Œçš„ SQL å’Œå‚æ•°æ˜ å°„ï¼‰ã€‚</p>
<h3 data-id="heading-8">2.2 æ³¨å†ŒMappedStatement</h3>
<p>MappedStatement å¯¹è±¡åœ¨ MyBatis åˆå§‹åŒ–æ—¶åˆ›å»ºï¼Œå­˜å‚¨åœ¨ Configuration çš„ mappedStatements Map ä¸­ï¼Œæ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸå†…å¤ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77531218ea374e30889515ef938f0098~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=C6CzqfDP2SkAQnlf6FzBrulpDiw%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è§£æMapper.xmlæ–‡ä»¶æ—¶ï¼Œå°†SQLè¯­å¥å°è£…æˆMappedStatement</span>
buildStatementFromContext(context.evalNodes(<span class="hljs-string">"select|insert|update|delete"</span>));
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32bc72403416431b9eeb70adc08f5516~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=B740cTegkfmuuDT7TA6xV3BkXOw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">ä¸‰ Mapperæ–¹æ³•æ‰§è¡Œè¯¦è§£</h2>
<p>ä¾‹å¦‚ä¸‹é¢è¯­å¥ï¼Œåœ¨mybatisåº•å±‚æ˜¯å¦‚ä½•æ‰§è¡Œçš„å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Mapperæ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> {
    User <span class="hljs-title function_">selectById</span><span class="hljs-params">(<span class="hljs-number">1L</span>)</span>;
}
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sqlSessionFactory.openSession();
<span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
<span class="hljs-type">UserMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);
<span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> mapper.selectById(<span class="hljs-number">1L</span>);
</code></pre>
<h3 data-id="heading-10">3.1 MapperMethodä»£ç†æ‹¦æˆª</h3>
<p>MapperMethodæœ‰ä¸¤ä¸ªå±æ€§ï¼š</p>
<ol>
<li>SqlCommand commandï¼šä»MappedStatementè·å–æ¥å£æ–¹æ³•å¯¹åº”çš„SQLè¯­å¥å…ƒæ•°æ®
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2afd01674854d81ac7dc093151cc779~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=AoIggoHBu%2BhKBPZJg6vW20WVmdQ%3D" alt="image.png" loading="lazy"/></li>
<li>MethodSignature methodï¼šæä¾›æ¥å£æ–¹æ³•å…ƒæ•°æ®ï¼Œå¦‚è¿”å›å€¼ç±»å‹ã€å‚æ•°è§£æ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b24b24e8824b41bf81c275804e8cea7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=mE0KUJTQfGJov6POJS0V5n1c7ps%3D" alt="image.png" loading="lazy"/></li>
</ol>
<p>MapperMethodçš„ä»£ç†é€»è¾‘ä¸­ï¼Œå½“æ‰§è¡Œselectæ—¶ï¼Œä¼šæ ¹æ®è¿”å›ç±»å‹è¿›ä¸€æ­¥åˆ†å‘ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba9450b08e974ff79d653a40dd5d528b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=xSB9Dg71ttfix8kyI6NlhROcc34%3D" alt="" loading="lazy"/>
UserMapper#selectByIdæ˜¾ç„¶å¯¹åº”sqlSession.selectOneã€‚</p>
<h3 data-id="heading-11">3.2 SqlSessionæµç¨‹è°ƒåº¦</h3>
<p>DefaultSqlSession#selectOneï¼Œåº•å±‚ä¼šæ‰§è¡ŒselectListï¼Œç„¶åè·å–å”¯ä¸€ä¸€ä¸ªå…ƒç´ ï¼ˆæŸ¥è¯¢åˆ°å¤šä¸ªæ—¶ä¼šæŠ¥é”™ï¼‰
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11d23fd993f34770b75a4249ec308334~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=qxIPEgG%2BPshv%2BffUDFAu%2BK6%2Fkyk%3D" alt="" loading="lazy"/>
ä¹‹å‰å·²åˆ†æè¿‡äºŒçº§ã€ä¸€çº§ç¼“å­˜é€»è¾‘ï¼Œä¸å†èµ˜è¿°ã€‚</p>
<p>æ¥çœ‹æ•°æ®åº“æŸ¥è¯¢ï¼Œä¼šè°ƒç”¨BaseExecutorå­ç±»å®ç°çš„doQuery()ï¼Œåˆ›å»ºStatementHandleræ¥æ‰§è¡ŒSQLã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d0534a94a824beda57e5617fa10e966~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=RWiveWD6K7rE0xDr8fBESuq5UJ4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">3.3 StatementHandleræ‰§è¡ŒSQL</h3>
<p>StatementHandler æ˜¯ MyBatis å¯¹ JDBC Statement æ“ä½œçš„ç»Ÿä¸€å°è£…ï¼Œé€šè¿‡ç­–ç•¥æ¨¡å¼æ”¯æŒä¸åŒç±»å‹çš„Statementï¼Œæ˜¯è¿æ¥ Executor å’Œ JDBC çš„å…³é”®æ¡¥æ¢ã€‚</p>
<p>ä¸»è¦èŒè´£åŒ…æ‹¬ï¼š</p>
<ol>
<li>åˆ›å»º Statement å¯¹è±¡</li>
<li>è®¾ç½® SQL å‚æ•°ï¼ˆå§”æ‰˜ç»™ ParameterHandlerï¼‰</li>
<li>æ‰§è¡Œ SQL è¯­å¥</li>
<li>å¤„ç†ç»“æœé›†ï¼ˆå§”æ‰˜ç»™ ResultSetHandlerï¼‰</li>
<li>å¤„ç†ä¸»é”®ç”Ÿæˆï¼ˆå§”æ‰˜ç»™ KeyGeneratorï¼‰</li>
</ol>
<p>è¯¥æ¥å£æœ‰ä»¥ä¸‹å®ç°ï¼š</p>
<ol>
<li>BaseStatementHandlerï¼šæŠ½è±¡åŸºç±»</li>
<li>RoutingStatementHandlerï¼šç­–ç•¥è·¯ç”±ï¼Œæ ¹æ® MappedStatement çš„ StatementType åˆ›å»ºå…·ä½“å®ç°ï¼Œå°†æ–¹æ³•è°ƒç”¨éƒ½å§”æ´¾ç»™å†…éƒ¨çš„ delegate å¯¹è±¡ã€‚</li>
<li>SimpleStatementHandlerï¼š</li>
</ol>
<ul>
<li>å¯¹åº” JDBC çš„ Statement</li>
<li>ä¸æ”¯æŒé¢„ç¼–è¯‘ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½ç¼–è¯‘ SQL</li>
<li>ä¸æ”¯æŒå‚æ•°å ä½ç¬¦ï¼ˆ?ï¼‰ï¼ŒSQL ç›´æ¥æ‹¼æ¥</li>
</ul>
<ol start="4">
<li>PreparedStatementHandlerï¼ˆæœ€å¸¸ç”¨ï¼‰</li>
</ol>
<ul>
<li>å¯¹åº” JDBC çš„ PreparedStatement</li>
<li>æ”¯æŒé¢„ç¼–è¯‘ï¼ŒSQL å¯å¤ç”¨</li>
<li>æ”¯æŒå‚æ•°å ä½ç¬¦ï¼ˆ?ï¼‰ï¼Œé˜²æ­¢ SQL æ³¨å…¥</li>
<li>é€šè¿‡ ParameterHandler è®¾ç½®å‚æ•°</li>
</ul>
<ol start="5">
<li>CallableStatementHandlerå¯¹åº” JDBC çš„ CallableStatementï¼Œç”¨äºè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</li>
</ol>
<p>PreparedStatementHandleråˆ›å»ºPreparedStatementåï¼Œå°±å¯ä»¥å’Œæ•°æ®åº“äº¤äº’äº†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/345fe2320cb74b659b8ac2bd8363ffd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY5L6g5a6i6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769313705&amp;x-signature=styXbwMNkWCS1r0j4DmLOK64%2BRg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">3.4 ResultSetHandlerå¤„ç†ç»“æœé›†</h3>
<p>ResultSetHandler æ˜¯ MyBatis ä¸­è´Ÿè´£å°† JDBC ResultSet æ˜ å°„ä¸º Java å¯¹è±¡çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ˜¯å¯¹ORMåŠŸèƒ½çš„å®ç°ã€‚</p>
<p>ResultSetHandler åªæœ‰ä¸€ä¸ªå®ç°ç±»DefaultResultSetHandler ï¼Œå¤„ç†æ™®é€šæŸ¥è¯¢ç»“æœé›†çš„é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>ResultSetWrapperï¼šå°è£… JDBC ResultSetï¼Œæä¾›å…ƒæ•°æ®è®¿é—®å’Œç±»å‹å¤„ç†ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;Object&gt; <span class="hljs-title function_">handleResultSets</span><span class="hljs-params">(Statement stmt)</span> <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">final</span> List&lt;Object&gt; multipleResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-comment">// 1. è·å–ç»“æœé›†</span>
    <span class="hljs-type">ResultSetWrapper</span> <span class="hljs-variable">rsw</span> <span class="hljs-operator">=</span> getFirstResultSet(stmt);

    <span class="hljs-comment">// 2. è·å– ResultMap é…ç½®ï¼Œé€šå¸¸åªæœ‰ä¸€ä¸ª</span>
    List&lt;ResultMap&gt; resultMaps = mappedStatement.getResultMaps();

    <span class="hljs-comment">// 3. éå†å¤„ç†æ¯ä¸ªç»“æœé›†</span>
    <span class="hljs-keyword">while</span> (rsw != <span class="hljs-literal">null</span> &amp;&amp; resultMapCount &gt; resultSetCount) {
        <span class="hljs-type">ResultMap</span> <span class="hljs-variable">resultMap</span> <span class="hljs-operator">=</span> resultMaps.get(resultSetCount);
        <span class="hljs-comment">// å¤„ç†ç»“æœé›†</span>
        handleResultSet(rsw, resultMap, multipleResults, <span class="hljs-literal">null</span>);
        rsw = getNextResultSet(stmt);
        resultSetCount++;
    }

    <span class="hljs-keyword">return</span> multipleResults;
}
</code></pre>
<p>åœ¨å¤„ç†ç»“æœé›†æ—¶ï¼Œä¼šä½¿ç”¨åˆ°ResultHandlerå³ç»“æœå¤„ç†å™¨ï¼Œå£°æ˜å¦‚ä½•æ¶ˆè´¹æŸ¥è¯¢åˆ°çš„æ¯æ¡è®°å½•ã€‚DefaultResultHandleræ˜¯ ResultHandlerçš„é»˜è®¤å®ç°ï¼Œç”¨äºæ”¶é›†æŸ¥è¯¢ç»“æœå¹¶å­˜å‚¨åˆ° List é›†åˆä¸­ ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°†æŸ¥è¯¢ç»“æœæ”¶é›†åˆ° List</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultResultHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ResultHandler</span>&lt;Object&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;Object&gt; list;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleResult</span><span class="hljs-params">(ResultContext&lt;? extends Object&gt; context)</span> {
        list.add(context.getResultObject());
    }

    <span class="hljs-keyword">public</span> List&lt;Object&gt; <span class="hljs-title function_">getResultList</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> list;
    }
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ä¸Šæ•…éšœæ’æŸ¥æ ‡å‡†åŒ–æµç¨‹ï¼šä»å…¨å±€å®šä½åˆ°æ ¹å› åˆ†æ]]></title>    <link>https://juejin.cn/post/7595858760134639679</link>    <guid>https://juejin.cn/post/7595858760134639679</guid>    <pubDate>2026-01-17T15:19:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595858760134639679" data-draft-id="7595858760134623295" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¿ä¸Šæ•…éšœæ’æŸ¥æ ‡å‡†åŒ–æµç¨‹ï¼šä»å…¨å±€å®šä½åˆ°æ ¹å› åˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:19:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¿ä¸Šæ•…éšœæ’æŸ¥æ ‡å‡†åŒ–æµç¨‹ï¼šä»å…¨å±€å®šä½åˆ°æ ¹å› åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:19:24.000Z" title="Sat Jan 17 2026 15:19:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä»‹ç»</h4>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ä¸ªåç«¯æœåŠ¡å™¨è´Ÿè´£äººï¼Œåœ¨ä¸€ä¸ªå¤œæ·±äººé™çš„å¤œæ™šï¼Œçªç„¶æŠ¥è­¦çŸ­ä¿¡å“èµ·ï¼Œä½ èµ·æ¥ä¸€çœ‹ï¼Œç›‘æ§ä¸­çš„æŠ¥é”™çœ¼èŠ±ç¼­ä¹±ï¼Œä½ æ˜¯å¦ä¼šæœ‰ç‚¹æ— ä»å…¥æ‰‹ï¼Œä½ æ˜¯å¦ä¼šæƒ³ï¼Œè¦æ˜¯æœ‰ä¸€ä¸ªæµç¨‹ï¼Œåªè¦è·Ÿç€æµç¨‹å°±èƒ½æ’æŸ¥å¹¶è§£å†³å¤§éƒ¨åˆ†é—®é¢˜å°±å¥½äº†ã€‚ è€Œè¿™ç¯‡æ–‡ç« å°±æ˜¯æ ¹æ®ç¬”è€…å®é™…çº¿ä¸Šé—®é¢˜å¤„ç†çš„ç»éªŒæ•´ç†çš„ä¸€ä¸ªæ’æŸ¥é—®é¢˜çš„ä¸€èˆ¬æ€è·¯ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ï¼Œå¯ä»¥åœ¨å¼‚å¸¸æµ·å•¸ä¸­æŠ½ä¸å‰¥èŒ§çš„æ‰¾åˆ°æ ¹å› ï¼Œæˆ–è€…æœ€å°‘èƒ½æœ‰ä¸ªæ•´ä½“çš„æ–¹å‘ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—®é¢˜çš„æ’æŸ¥å®Œå…¨ä¾èµ–äºç›‘æ§ï¼Œå› ä¸ºè¿™ç¯‡æ–‡ç« ä¸»è¦è®²è§£æ’æŸ¥é—®é¢˜çš„æ–¹å¼ï¼Œå› æ­¤å¯¹äºæ‰€ä½¿ç”¨çš„ç›‘æ§åªä¼šç®€å•ä»‹ç»ï¼Œéœ€è¦è¯»è€…æ ¹æ®éœ€è¦è‡ªè¡Œå®ç°ã€‚</p>
<h4 data-id="heading-1">ä¸€ã€ç¡®å®šé—®é¢˜æœåŠ¡</h4>
<p>ç¬¬ä¸€æ­¥å…ˆé€šè¿‡ç½‘å…³çš„ç›‘æ§ï¼Œæ¯”å¦‚nginxçš„ç›‘æ§ï¼Œå°è¯•å¿«é€Ÿå®šä½å‡ºé—®é¢˜çš„æœåŠ¡ã€‚è¿™ä¸€æ­¥çš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡æŸ¥çœ‹ç½‘å…³ç›‘æ§ï¼Œèƒ½å¤Ÿå¯¹ç³»ç»Ÿçš„æ•´ä½“çŠ¶å†µæœ‰æ‰€äº†è§£ï¼Œè¿™æ ·åœ¨åç»­æ’æŸ¥æ—¶å°±èƒ½æœ‰é‡ç‚¹ã€‚å…¶ä¸­æœ€ä¸»è¦çš„å°±æ˜¯é€šè¿‡ç½‘å…³ç›‘æ§å°è¯•å®šä½é—®é¢˜æœåŠ¡ï¼Œå¦‚æœèƒ½å®šä½åˆ°å…·ä½“æœåŠ¡ï¼Œå°±èƒ½ä¸€ä¸‹å­ç¼©å°æ’æŸ¥èŒƒå›´ï¼Œè¦æ˜¯å®šä½ä¸å‡ºæ¥ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥ç®€å•çš„é€šè¿‡ç½‘å…³äº†è§£ç³»ç»Ÿçš„æ•´ä½“çŠ¶æ€ï¼Œç„¶åå¿«é€Ÿè¿›å…¥ä¸‹ä¸ªæ­¥éª¤è¿›è¡Œæ’æŸ¥ã€‚</p>
<h6 data-id="heading-2">ç½‘å…³ç›‘æ§ä»‹ç»</h6>
<p>ç¬”è€…çš„åç«¯æœåŠ¡å™¨æ˜¯ä½¿ç”¨nginxä½œä¸ºç½‘å…³çš„ï¼Œé€šè¿‡prometheusçš„åº“å¯¼å‡ºäº†ç›‘æ§æ•°æ®åˆ°prometheusä¸­ï¼Œç„¶åç•Œé¢æ˜¯ä½¿ç”¨grafanaå±•ç¤ºçš„ã€‚æœ‰å…´è¶£çš„è¯»è€…å¯ä»¥æŸ¥çœ‹ç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼Œè®²è§£äº†å¦‚ä½•æ­å»ºè¿™ä¸ªç½‘å…³ç›‘æ§ï¼š<a href="https://juejin.cn/post/7588080521445294126" target="_blank" title="https://juejin.cn/post/7588080521445294126">openrestyç›‘æ§</a>ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç›‘æ§ç¤ºä¾‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18306ac3ac3b4f8b84e2f3562c0d64f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267964&amp;x-signature=9y7FDzuEONn7hj4p45t5fsXM%2F0I%3D" alt="2.png" loading="lazy"/></p>
<p>è¿™ä¸ªç›‘æ§ä¸­åŒ…æ‹¬äº†å¸¸è§çš„ä¸€äº›æŒ‡æ ‡ï¼Œå¦‚qpsï¼Œå»¶è¿Ÿï¼Œ4xxå’Œ5xxçŠ¶æ€ç çš„é”™è¯¯æ•°ã€‚ç„¶ååˆåˆ†ä¸ºä¸Šä¸‹ä¸¤éƒ¨åˆ†ï¼Œä¸ŠåŠéƒ¨åˆ†æ˜¯ç³»ç»Ÿæ•´ä½“çš„æ•°æ®ï¼Œä¸‹åŠéƒ¨åˆ†æ˜¯ä»¥æœåŠ¡ä¸ºç»´åº¦è¿›è¡Œç»Ÿè®¡çš„å„ä¸ªç»´åº¦çš„å¯¹åº”æŒ‡æ ‡ï¼Œå¦‚qpsï¼Œå»¶è¿Ÿå’Œé”™è¯¯ç‡ã€‚ ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„æŒ‡æ ‡æ˜¯upstreamè¿æ¥æ•°ï¼Œä»–æ˜¯nginxä¸­ä½¿ç”¨çš„upstreamè¿›è¡Œåå‘ä»£ç†æ—¶ï¼Œæ¯ä¸ªupstreamçš„è¿æ¥æ•°ã€‚å› ä¸ºæ¯ä¸ªupstreamåŸºæœ¬ä¸Šå¯¹åº”ä¸€ä¸ªæœåŠ¡ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºåå‘ä»£ç†ä¸­è¿æ¥ä¸Šæ¸¸æœåŠ¡çš„è¿æ¥æ•°ã€‚ <strong>è¿™é‡Œç€é‡å£°æ˜ä¸‹ï¼Œå¼ºçƒˆå»ºè®®åœ¨ä½¿ç”¨nginxæ—¶ä½¿ç”¨upstreamç®¡ç†ä¸Šæ¸¸æœåŠ¡ï¼ŒåŒæ—¶ä¸ºupstreamé…ç½®è¿æ¥æ± ï¼Œè¿™æ ·åœ¨ä¿è¯åå‘ä»£ç†çš„æ€§èƒ½çš„åŒæ—¶ï¼Œä¹Ÿç¡®ä¿äº†ç›‘æ§çš„ç¨³å®šæ€§ï¼Œå› ä¸ºåœ¨æœåŠ¡æ²¡å‡ºé—®é¢˜æ—¶ï¼Œå› ä¸ºè¿æ¥æ± çš„å­˜åœ¨ï¼Œè¿™ä¸ªç›‘æ§ä¸€èˆ¬å˜åŒ–ä¸ä¼šå¾ˆå¤§ã€‚</strong></p>
<h6 data-id="heading-3">æ’æŸ¥æ–¹å¼</h6>
<ol>
<li>æŸ¥çœ‹ç›‘æ§ä¸­çš„upstreamæ´»è·ƒè¿æ¥æ•°ï¼Œä»–æ˜¯nginxåå‘ä»£ç†è¿æ¥ä¸Šæ¸¸æœåŠ¡çš„è¿æ¥æ•°ã€‚å¦‚æœæŸä¸ªæœåŠ¡å‡ºé—®é¢˜äº†ï¼Œæ¯”å¦‚å“åº”æ…¢æˆ–è€…ä¸å¤„ç†è¯·æ±‚ï¼Œé‚£è¿™ä¸ªè¿æ¥æ•°å°±ä¼šé£™å‡ï¼Œé‚£å°±èƒ½ç›´æ¥å®šä½åˆ°å‡ºé—®é¢˜çš„æœåŠ¡äº†ã€‚</li>
<li>æŸ¥çœ‹æœåŠ¡ç»´åº¦çš„å„ä¸ªæ•°æ®ï¼Œç¡®è®¤æ˜¯å¦æœ‰å¼‚å¸¸æŒ‡æ ‡ã€‚æ¯”å¦‚è¦æ˜¯æŸäº›æœåŠ¡çš„å»¶è¿Ÿå‡é«˜ï¼Œé‚£å°±èƒ½åœ¨å»¶è¿ŸæŒ‡æ ‡ä¸­çœ‹åˆ°æœåŠ¡çš„æ›²çº¿é£™å‡ã€‚æˆ–è€…æŸä¸ªæœåŠ¡å‡ºé—®é¢˜æ— æ³•å¤„ç†è¯·æ±‚ï¼Œåˆ™5xxçŠ¶æ€ç çš„ç›‘æ§ä¹Ÿèƒ½å‘ç°å¯¹åº”çš„æœåŠ¡ã€‚ è¿™éƒ¨åˆ†çš„ç›‘æ§ä¹Ÿæ˜¯å®šä½é—®é¢˜æœåŠ¡çš„ä¸€ä¸ªæ–¹å¼ã€‚</li>
</ol>
<h4 data-id="heading-4">äºŒã€æŸ¥çœ‹é—®é¢˜ç›‘æ§å¤§å±</h4>
<p>è¿™ä¸€æ­¥éœ€è¦å…ˆå»ºç«‹ä¸€ä¸ªç›‘æ§å¤§å±ï¼Œè¿™é‡Œé¢ä¸“é—¨æ”¾ä¸€äº›ä¹‹å‰å‡ºç°é¢‘ç‡æ¯”è¾ƒé«˜çš„é—®é¢˜çš„å¯¹åº”æŒ‡æ ‡ï¼Œç›®æ ‡æ˜¯é€šè¿‡æŠŠæ‰€æœ‰å‡ºç°é¢‘ç‡é«˜çš„å¼‚å¸¸æŒ‡æ ‡éƒ½æ”¾åˆ°ä¸€ä¸ªç›‘æ§ä¸­ï¼Œè¿™æ ·å¯ä»¥æœ€å¿«çš„å‘ç°é—®é¢˜ã€‚å¹¶ä¸”å¯ä»¥ä¸ºæ¯ä¸ªæŒ‡æ ‡å†™ä¸€ä¸ªé’ˆå¯¹çš„å¤„ç†é—®é¢˜æ–¹å¼ï¼Œå¹¶å›ºåŒ–åˆ°è¿ç»´æ–‡æ¡£ä¸­ï¼Œè¿™æ ·å³ä½¿æ˜¯å›¢é˜Ÿä¸­çš„ä¸€ä¸ªæ–°åŒäº‹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿ç»´æ–‡æ¡£å’Œç›‘æ§å¤§å±å¾ˆå®¹æ˜“çš„è§£å†³ä¸€äº›å¸¸è§é—®é¢˜ã€‚</p>
<p>ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œè¿™ä¸ªç›‘æ§å¤§å±å°½é‡æ”¾ä¸€äº›å‡ºé—®é¢˜æ—¶å¿…é¡»è§£å†³çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚æœºå™¨çš„cpuä½¿ç”¨ç‡ï¼ŒæœåŠ¡çš„k8sçš„podå®¹å™¨å®ä¾‹çš„cpuä½¿ç”¨ç‡ï¼Œjavaçš„æœ€æ–°å¼‚å¸¸æ•°æ®ç­‰ã€‚å½“è¿™ä¸ªç•Œé¢çš„è¿™äº›æŒ‡æ ‡å‡ºç°é—®é¢˜æ—¶ï¼Œå¯ä»¥ä¸ç”¨ç®¡å‡ºé—®é¢˜çš„åŸå› ï¼Œç›´æ¥å…ˆç€æ‰‹è§£å†³ï¼Œæ¯”å¦‚è¿›è¡Œæœºå™¨ä¸ŠæœåŠ¡çš„è¿å‡ºæ¥é™ä½æœºå™¨cpuï¼ŒæœåŠ¡æ‰©å®¹æ¥é™ä½podçš„cpuç­‰ã€‚è¿™äº›éƒ½æ˜¯èµ„æºé—®é¢˜ï¼Œ<strong>å…ˆè§£å†³æˆ–è€…ç¼“è§£èµ„æºé—®é¢˜ï¼Œç„¶åå†è¿›ä¸€æ­¥è¿›è¡Œé—®é¢˜æ’æŸ¥ï¼Œå› ä¸ºå½“èµ„æºä¸è¶³æ—¶å®¹æ˜“å‡ºç°å¾ˆå¤šå…¶ä»–ç°è±¡ï¼Œæ¯”å¦‚æœåŠ¡çš„æŸä¸ªæ–¹æ³•å»¶è¿Ÿå‡é«˜ã€‚å½“æ—¶è¿™ä¸ªå»¶è¿Ÿå‡é«˜ä¸ä¸€å®šæ˜¯ä»£ç æœ‰é—®é¢˜ï¼Œå¯èƒ½æ˜¯cpuä¸è¶³å¯¼è‡´çš„ï¼Œå¦‚æœå…ˆæ’æŸ¥å»¶è¿Ÿé—®é¢˜ï¼Œå°±å®¹æ˜“è¯¯å…¥æ­§é€”ï¼Œå¯¼è‡´æŸ¥é”™æ–¹å‘ã€‚</strong></p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç›‘æ§å¤§å±çš„ç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf2213ef28414ba59fa73faf59509060~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267964&amp;x-signature=qjhT4D6Ze3mEBboJlsH51Ow5Mhw%3D" alt="3.jpg" loading="lazy"/></p>
<h6 data-id="heading-5">ç½‘å…³ç›‘æ§ä»‹ç»</h6>
<p>è¿™ä¸ªç›‘æ§å¤§å±åŒ…æ‹¬äº†ä¸€äº›å¸¸è§çš„å®¹æ˜“å‡ºé—®é¢˜çš„ç›‘æ§ï¼Œå½“å‘ç°å¯¹åº”æŒ‡æ ‡æœ‰é—®é¢˜æ—¶ï¼Œä¼˜å…ˆæ ¹æ®å¯¹åº”çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œæ¥è§£å†³æˆ–è€…ç¼“è§£é—®é¢˜ã€‚</p>
<ol>
<li>ç¬¬ä¸€ä¸ªæœåŠ¡å™¨èµ„æºæ€»è§ˆè¡¨æ—¶æœºå™¨å®ä¾‹çš„ç›‘æ§ä¿¡æ¯ï¼Œä¸€èˆ¬é€šè¿‡node-exporterå¯¼å‡ºï¼Œæä¾›äº†ä¸€äº›æœºå™¨çš„ç›‘æ§æ•°æ®ï¼Œå…¶ä¸­é‡ç‚¹ç›‘æ§çš„æ˜¯æœºå™¨çš„cpuä¿¡æ¯ã€‚</li>
<li>CPU Quotaæ˜¯k8sä¸­podçš„cpuç›¸å…³æŒ‡æ ‡ï¼Œé€šè¿‡prometheusä¸­k8sç›¸å…³ç›‘æ§å¯ä»¥é€šè¿‡kube-state-metricsç»„ä»¶å¯¼å‡ºï¼Œå…¶ä¸­éœ€è¦é‡ç‚¹å…³æ³¨çš„æ˜¯CPU Throttlingè¿™ä¸€é¡¹ï¼Œè¿™ä¸ªä»£è¡¨çš„æ˜¯podå› ä¸ºcpuè¶…å‡ºé…ç½®çš„limitå¯¼è‡´è¢«å®¹å™¨é™åˆ¶cpuçš„æŒ‡æ ‡ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œæ¯”å¦‚25%ï¼Œä»£è¡¨podçš„cpuä¸å¤Ÿç”¨äº†ï¼Œéœ€è¦æé«˜podçš„cpu limitæˆ–è€…å¢åŠ æœåŠ¡å®ä¾‹ã€‚</li>
<li>JavaExceptionTableå’ŒNginxErrorTableï¼Œè¿™ä¸¤ä¸ªjavaæœåŠ¡å’Œnginxä¸­æœ€è¿‘5åˆ†é’Ÿçš„ä¸šåŠ¡æŠ¥é”™ä¿¡æ¯ï¼Œæ¯”å¦‚javaçš„errorçº§åˆ«æ‰“å°çš„å¼‚å¸¸æ—¥å¿—ï¼Œæˆ–è€…æ¡†æ¶æŠ›å‡ºçš„å¼‚å¸¸ç­‰ã€‚è¿™ä¸¤ä¸ªæŒ‡æ ‡å¯ä»¥å‘Šè¯‰æˆ‘ä»¬ç³»ç»Ÿæ­£åœ¨å‘ç”Ÿä»€ä¹ˆé”™è¯¯ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ’æŸ¥é—®é¢˜ã€‚è¿™ä¸¤ä¸ªæŒ‡æ ‡çš„å¯¼å‡ºæ–¹å¼å¯ä»¥æŸ¥çœ‹ç¬”è€…ä¹‹å‰çš„æ–‡ç« ï¼Œjavaå¼‚å¸¸ï¼š<a href="https://juejin.cn/post/7580287891274186815" target="_blank" title="https://juejin.cn/post/7580287891274186815">ç›‘æ§åˆ©å™¨ï¼šjavaå¼‚å¸¸ç›‘æ§</a>  ï¼Œnginxå¼‚å¸¸ï¼š<a href="https://juejin.cn/post/7588080521445294126" target="_blank" title="https://juejin.cn/post/7588080521445294126">openrestyç›‘æ§</a></li>
<li>DeploymentErroræ˜¯k8sä¸­Deploymenté¢„æœŸæ•°é‡å’Œå®é™…æ•°é‡ä¸åŒ¹é…çš„Deploymentä¿¡æ¯ï¼Œä»–ä»£è¡¨å¯¹åº”çš„æœåŠ¡æœ‰æœåŠ¡å®ä¾‹åœ¨é‡å¯ï¼Œå¯ä»¥ä»k8sçš„ç›‘æ§ä¸­å¯¼å‡ºã€‚</li>
<li>æ…¢sqlç›‘æ§ï¼Œæˆªå›¾ä¸­è¿˜æ²¡åŠ å…¥ï¼Œè¿™ä¸ªå±•ç¤ºæœ€è¿‘5åˆ†é’Ÿçš„æ•°æ®åº“çš„æ…¢sqlï¼Œæ¯”å¦‚mysqlæˆ–è€…mongoçš„æ…¢sqlï¼Œè¿™éƒ¨åˆ†æ•°æ®å¯ä»¥é€šè¿‡å¯¹æ¥å¯¹åº”æœåŠ¡å•†çš„æ¥å£è¿›è¡Œå¯¼å‡ºåˆ°prometheusï¼Œå¦‚æœæœ‰çš„è¯å¯èƒ½æ˜¯æ•°æ®åº“å±‚é¢æœ‰é—®é¢˜ï¼Œéœ€è¦è¿›è¡Œæ€§èƒ½ä¼˜åŒ–æˆ–è€…æ’æŸ¥æ˜¯å¦ç¼“å­˜ç©¿é€äº†</li>
<li>äº‹ä»¶ä¸­å¿ƒç›‘æ§ï¼Œæˆªå›¾ä¸­è¿˜æ²¡åŠ ï¼Œè¿™ä¸ªå±•ç¤ºæœ€è¿‘5åˆ†é’Ÿçš„äº‹ä»¶ï¼ŒåŒ…æ‹¬æ“ä½œå’Œç³»ç»Ÿäº‹ä»¶ï¼Œæ¯”å¦‚æ•°æ®åº“æ˜¯å¦æœ‰é‡å¯æˆ–è€…é…ç½®å˜æ›´ï¼Œæ˜¯å¦æœ‰åˆ›å»ºæ–°ç´¢å¼•ï¼Œæ˜¯å¦æœ‰æœåŠ¡å‘å¸ƒæˆ–è€…é…ç½®å‘å¸ƒç­‰ï¼Œè¿™ä¸ªéœ€è¦å»ºç«‹äº‹ä»¶ä¸­å¿ƒï¼Œå¦‚æœçœ‹åˆ°æœ€è¿‘æœ‰æ•°æ®åº“é‡å¯æˆ–è€…åˆ›å»ºç´¢å¼•ä¹‹ç±»çš„äº‹ä»¶ï¼Œå°±å¯ä»¥ä¼˜å…ˆè€ƒè™‘æ˜¯å¯¹åº”æ“ä½œå¯¼è‡´çš„é—®é¢˜ã€‚</li>
</ol>
<h6 data-id="heading-6">æ’æŸ¥æ–¹å¼</h6>
<p>å…¶å®ä¸Šé¢ä»‹ç»äº†ä¸€äº›é—®é¢˜æ’æŸ¥æ–¹å¼äº†ï¼Œè¿™é‡Œç»Ÿä¸€æ±‡æ€»ä¸‹</p>
<ol>
<li>æŸ¥çœ‹æœºå™¨èŠ‚ç‚¹çš„cpuæ•°æ®ï¼Œå¦‚æœæŸä¸€å°æœºå™¨çš„cpuå¾ˆé«˜ï¼Œé‚£è¿™å°æœºå™¨ä¸Šçš„æœåŠ¡å®ä¾‹å¯èƒ½éƒ½æœ‰é—®é¢˜ï¼Œéœ€è¦é¦–å…ˆæƒ³åŠæ³•é™ä½æœºå™¨cpuï¼Œæ¯”å¦‚å°†ä¸€ä¸ªæœåŠ¡å®ä¾‹è¿å‡ºè¿™å°æœºå™¨ï¼Œæˆ–è€…æ‰©å®¹æœºå™¨</li>
<li>æŸ¥çœ‹podèŠ‚ç‚¹çš„cpu throttlingæ•°æ®ï¼Œå¦‚æœæŸä¸€ä¸ªpodçš„cpu throttlingæ¯”è¾ƒé«˜ï¼Œè¯´æ˜podçš„cpuä¸å¤Ÿç”¨ï¼Œå·²ç»è¢«k8sé™åˆ¶cpuçš„ä½¿ç”¨äº†ï¼ŒæœåŠ¡å®ä¾‹ä¼šå‡ºé—®é¢˜ï¼Œæ­¤æ—¶è€ƒè™‘ä¸´æ—¶æ‰©å®¹å®¹å™¨çš„cpu limit</li>
<li>æŸ¥çœ‹javaå’Œnginxçš„å¼‚å¸¸æ•°æ®ï¼Œç›‘æ§ä¸­å±•ç¤ºæœ€è¿‘å‡ åˆ†é’Ÿçš„javaå’Œnginxçš„å¼‚å¸¸æ•°æ®ï¼Œè¿™ä¸ªå¯ä»¥çœ‹å‡ºæœåŠ¡ç°åœ¨åœ¨æŠ¥ä»€ä¹ˆé”™ï¼Œè¯´ä¸å®šå°±èƒ½ä¸€ä¸‹å®šä½åˆ°é—®é¢˜çš„åŸå› </li>
<li>æŸ¥çœ‹DeploymentErrorï¼Œå¦‚æœæœ‰æœåŠ¡å®é™…æ•°é‡ä¸€ç›´æ¯”æœŸæœ›æ•°é‡å°‘ï¼Œå¯èƒ½æ˜¯æœåŠ¡è¢«æ‰“æŒ‚äº†ï¼Œä¸€ç›´åœ¨é‡å¯ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘æ‰©å®¹æœåŠ¡å®ä¾‹æ•°é‡</li>
<li>æŸ¥çœ‹æ…¢sqlï¼Œå¦‚æœçªç„¶æœ‰å¾ˆå¤šæ…¢sqlï¼Œåˆ™ä»£è¡¨æ˜¯æ•°æ®åº“å±‚é¢å‡ºäº†é—®é¢˜ï¼Œä¼˜å…ˆä»æ…¢sqlä¸‹æ‰‹æ’æŸ¥é—®é¢˜ï¼Œç¡®è®¤æ˜¯ä»£ç çš„sqlæœ‰é—®é¢˜ï¼Œè¿˜æ˜¯æ•°æ®åº“æ€§èƒ½ä¸è¶³ç­‰é—®é¢˜ã€‚</li>
<li>æŸ¥çœ‹äº‹ä»¶ä¸­å¿ƒæ¶ˆæ¯ï¼Œäº‹ä»¶ä¸­å¿ƒä¼šæ”¶é›†æœ€è¿‘å‡ åˆ†é’Ÿçš„æ‰€æœ‰äººå·¥æ“ä½œï¼Œäº‘æœåŠ¡æä¾›å•†çš„äº‹ä»¶ï¼Œæ¯”å¦‚è¦æ˜¯å‘ç°æœ‰ä¸ªmysqlé‡å¯äº‹ä»¶ï¼Œå°±èƒ½ä¸€ä¸‹å®šä½åŸå› ã€‚</li>
</ol>
<h4 data-id="heading-7">ä¸‰ã€æŒ‡å®šæœåŠ¡æ·±å…¥æ’æŸ¥</h4>
<p>åœ¨å‰ä¸¤æ­¥ä¸­ï¼Œè¦æ˜¯èƒ½ç¡®å®šé—®é¢˜æœåŠ¡ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é’ˆå¯¹å¯¹åº”æœåŠ¡è¿›è¡Œæ·±å…¥æ’æŸ¥ï¼Œå¦‚æœæœ‰å¤šä¸ªæœåŠ¡éƒ½æœ‰é—®é¢˜ï¼Œé‚£æˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªæ ¸å¿ƒçš„æœåŠ¡å…ˆæ·±å…¥æ’æŸ¥ï¼Œç„¶åé¡ºè—¤æ‘¸ç“œæ‰¾å‡ºé—®é¢˜æœåŠ¡ã€‚è¿™é‡Œä¸»è¦ä½¿ç”¨é“¾è·¯è¿½è¸ªç³»ç»Ÿï¼Œæ¯”å¦‚<strong>skywalkingæˆ–è€…OpenTelemetry</strong>ç­‰ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d1bd81766ae4d74856602d0528c373d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267964&amp;x-signature=%2BrrpdYxz5cIcP5O69ehAQiKSzPI%3D" alt="4.jpg" loading="lazy"/></p>
<h6 data-id="heading-8">æ’æŸ¥æ–¹å¼</h6>
<ol>
<li>æœåŠ¡çš„é—®é¢˜å¯èƒ½æ¶‰åŠ<strong>åº”ç”¨å±‚å’Œæ•°æ®åº“å±‚</strong>ä¸¤ä¸ªæ–¹é¢ï¼Œæˆ‘ä»¬å…ˆä»æ•°æ®åº“å±‚å¼€å§‹çœ‹ï¼Œè¿™éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼Œå…ˆé€šè¿‡ä¹‹å‰ä»‹ç»çš„æ…¢sqlå’Œäº‹ä»¶ä¸­å¿ƒæŸ¥çœ‹ï¼Œæ˜¯å¦æœ‰æ…¢sqlæˆ–è€…åˆ›å»ºç´¢å¼•ç­‰å®¹æ˜“é˜»å¡æ•´ä¸ªè¡¨çš„äº‹ä»¶ï¼Œå¦‚æœæœ‰çš„è¯å°±ä¼˜å…ˆè§£å†³ï¼Œå¦‚æœæ²¡æœ‰çš„è¯å°±è¿›å…¥åº”ç”¨å±‚çš„é—®é¢˜æ’æŸ¥ã€‚</li>
<li>é’ˆå¯¹æœåŠ¡çš„æ‰€æœ‰æœåŠ¡å®ä¾‹ï¼Œ<strong>å…ˆè§£å†³èµ„æºçš„é—®é¢˜</strong>ï¼ŒæŸ¥çœ‹æœåŠ¡å®ä¾‹æ‰€åœ¨çš„æœåŠ¡å™¨æ˜¯å¦æœ‰cpué«˜ï¼Œioé«˜ç­‰èµ„æºé—®é¢˜ï¼Œæˆ–è€…æœåŠ¡å®ä¾‹çš„å®¹å™¨æ˜¯å¦æœ‰cpuèµ„æºç“¶é¢ˆï¼Œå¦‚å‡ºç°cpu throttlingé«˜ç­‰ï¼Œå…ˆé€šè¿‡æ‰©å®¹æˆ–è€…è¿ç§»è§£å†³èµ„æºä¸Šçš„ç“¶é¢ˆã€‚</li>
<li>å¦‚æœèµ„æºçš„ç“¶é¢ˆå·²ç»è§£å†³ï¼Œä½†æ˜¯é—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œæ­¤æ—¶éœ€è¦é’ˆå¯¹æœåŠ¡æœ¬èº«è¿›è¡Œæ’æŸ¥ã€‚è¿™é‡Œä¸€èˆ¬åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œ<strong>ä¸€ä¸ªæ˜¯è¯·æ±‚å¤ªå¤šï¼ŒæœåŠ¡å®ä¾‹æ¥ä¸åŠå¤„ç†ï¼Œä¸€ä¸ªæ˜¯è¯·æ±‚å¤„ç†å¤ªæ…¢å¯¼è‡´è¯·æ±‚å †ç§¯ï¼Œä»è€Œå¤„ç†å¤±è´¥</strong>ã€‚ è¿™é‡Œéœ€è¦ç”¨åˆ°é“¾è·¯è¿½è¸ªç›‘æ§ç”¨äº æŸ¥çœ‹ä¸€æ®µæ—¶é—´å†…çš„æœ€æ…¢è¯·æ±‚ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé“¾è·¯è¿½è¸ªç³»ç»Ÿéœ€è¦è®°å½•æ‰€æœ‰ä½äºä¸€å®šé˜ˆå€¼çš„æ…¢è¯·æ±‚ï¼Œé¿å…æ•°æ®ä¸å…¨ã€‚</li>
<li>å¦‚æœè¯·æ±‚å¤„ç†æ—¶é—´éƒ½å¾ˆå¿«ï¼Œæ²¡æœ‰æ¯”è¾ƒæ…¢çš„è¯·æ±‚ï¼Œé‚£è€ƒè™‘æ˜¯è¯·æ±‚æ•°è¶…å‡ºäº†æœåŠ¡å®ä¾‹çš„å¤„ç†èƒ½åŠ›ï¼Œä¼˜å…ˆè€ƒè™‘å¢åŠ æœåŠ¡å®ä¾‹è¿›è¡Œæ‰©å®¹ã€‚è¿™é‡ŒåŒæ—¶ä¹Ÿå¯ä»¥çœ‹ä¸‹javaçš„jvmç›‘æ§ï¼Œç¡®è®¤æ˜¯å¦æœ‰jvmå›æ”¶æ—¶é—´é•¿çš„é—®é¢˜ï¼Œè¿™ä¸ªä¹Ÿä¼šå¯¼è‡´å¤„ç†èƒ½åŠ›é™ä½ã€‚</li>
<li>å¦‚æœæœ‰å¾ˆå¤šè¯·æ±‚æ¯”è¾ƒæ…¢ï¼Œå¯ä»¥é€šè¿‡é“¾è·¯è¿½è¸ªçš„åŠŸèƒ½æŸ¥çœ‹æ˜¯å“ªä¸ªæ­¥éª¤æ‰§è¡Œçš„æ¯”è¾ƒæ…¢ï¼Œä»è€Œè¿›ä¸€æ­¥è¿›è¡Œæ’æŸ¥å¯¹åº”æ­¥éª¤ï¼Œæ¯”å¦‚æŸä¸ªä¸‹æ¸¸æœåŠ¡æ¯”è¾ƒæ…¢ï¼Œæˆ–è€…æŸæ®µå‡½æ•°æ‰§è¡Œæ…¢ç­‰ã€‚</li>
<li>å¦‚æœæ˜¯ä¸‹æ¸¸æœåŠ¡æ¯”è¾ƒæ…¢ï¼Œé‚£å°±ç»§ç»­å»æŸ¥å¯¹åº”æœåŠ¡ã€‚ å¦‚æœæ˜¯æŸæ®µå‡½æ•°æ‰§è¡Œæ¯”è¾ƒæ…¢ï¼Œå°±éœ€è¦é€šè¿‡ä»£ç é€»è¾‘è¿›è¡Œæ’æŸ¥ï¼Œå¿…ç„¶æ—¶å¯ä»¥é€šè¿‡<strong>arthasååŠ©æ’æŸ¥javaåº”ç”¨çš„é—®é¢˜</strong>ï¼ŒåŒ…æ‹¬ä½¿ç”¨traceå‘½ä»¤æŸ¥çœ‹æ–¹æ³•è°ƒç”¨é“¾è€—æ—¶ï¼Œ<strong>ä½¿ç”¨profilerå‘½ä»¤å¯¼å‡ºcpuç«ç„°å›¾è¿›è¡Œåˆ†æï¼ˆæ’æŸ¥æœåŠ¡å®ä¾‹çš„cpuä½¿ç”¨ç‡é«˜çš„åŸå› æ—¶éƒ½ä½¿ç”¨æ­¤æ–¹æ³•ï¼‰</strong>ï¼Œä½¿ç”¨threadè¿›è¡Œçº¿ç¨‹é˜»å¡åˆ†æç­‰ã€‚</li>
</ol>
<h4 data-id="heading-9">æ€»ç»“</h4>
<p>è¿™é‡Œç»Ÿä¸€æ•´ç†ä¸‹æµç¨‹ï¼š</p>
<ol>
<li><strong>å…¨å±€æ€åŠ¿æ„ŸçŸ¥</strong>
é¦–å…ˆé€šè¿‡ç½‘å…³å±‚ç›‘æ§æŒæ¡ç³»ç»Ÿæ•´ä½“è¿è¡ŒçŠ¶æ€ï¼Œå¿«é€Ÿè¯†åˆ«å¼‚å¸¸æœåŠ¡èŠ‚ç‚¹ï¼Œæ˜ç¡®é—®é¢˜è¾¹ç•Œã€‚</li>
<li><strong>å…³é”®æŒ‡æ ‡å¿«é€Ÿæ­¢è¡€</strong>
é€šè¿‡ç›‘æ§å¤§å±èšç„¦æ ¸å¿ƒæŒ‡æ ‡ï¼ˆç¡¬ä»¶èµ„æºã€æ•°æ®åº“è´Ÿè½½ã€åº”ç”¨æ€§èƒ½ç­‰ï¼‰ï¼Œè¿™äº›æŒ‡æ ‡å…·æœ‰å¼ºä»£è¡¨æ€§ï¼š</li>
</ol>
<ul>
<li>ä»»ä½•ä¸€é¡¹å¼‚å¸¸éƒ½éœ€ç«‹å³å¹²é¢„ï¼Œä¼˜å…ˆè§£å†³ä»¥å¿«é€Ÿæ¢å¤æœåŠ¡èƒ½åŠ›</li>
<li>åŒæ—¶ä½œä¸ºç³»ç»Ÿå¥åº·åº¦çš„åŸºå‡†å‚è€ƒï¼Œå½¢æˆå¸¸æ€åŒ–ç›‘æ§æœºåˆ¶</li>
</ul>
<ol start="3">
<li><strong>æ¨¡å—æ·±åº¦æ ¹å› åˆ†æ</strong>
é‡‡ç”¨åˆ†å±‚è¯Šæ–­ç­–ç•¥ï¼Œéµå¾ª"èµ„æºä¼˜å…ˆ"åŸåˆ™ï¼š</li>
</ol>
<ul>
<li><strong>ç¬¬ä¸€ä¼˜å…ˆçº§ï¼šèµ„æºç“¶é¢ˆæ’æŸ¥</strong>
ç¡®è®¤CPUã€å†…å­˜ã€IOç­‰èµ„æºæ˜¯å¦å……è¶³ï¼Œé¿å…å› èµ„æºä¸è¶³å¯¼è‡´çš„å»¶æ—¶å‡è±¡ï¼ˆå¦‚CPUäº‰ç”¨å¼•å‘æ–¹æ³•æ‰§è¡Œæ—¶é—´è¢«åŠ¨æ‹‰é•¿ï¼‰</li>
<li><strong>ç¬¬äºŒä¼˜å…ˆçº§ï¼šå¼‚å¸¸äº‹ä»¶å®šä½</strong>
é€šè¿‡å¼‚å¸¸ä¸­å¿ƒå¿«é€Ÿæ•è·é”™è¯¯æ—¥å¿—ã€å‘Šè­¦äº‹ä»¶ï¼Œæ˜ç¡®æ•…éšœç‚¹</li>
<li><strong>æœ€ç»ˆèšç„¦ï¼šå»¶æ—¶åˆ†è§£å½’å› </strong>
ç»“åˆé“¾è·¯è¿½è¸ªç³»ç»Ÿï¼Œå°†æ€»å»¶æ—¶æ‹†è§£ä¸ºæœåŠ¡è°ƒç”¨é“¾å„é˜¶æ®µè€—æ—¶ï¼Œé”å®šçœŸå®æ€§èƒ½ç“¶é¢ˆç¯èŠ‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£MySQLæ•°æ®åº“ç´¢å¼•]]></title>    <link>https://juejin.cn/post/7595901379015081994</link>    <guid>https://juejin.cn/post/7595901379015081994</guid>    <pubDate>2026-01-17T15:43:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015081994" data-draft-id="7595901379015065610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£MySQLæ•°æ®åº“ç´¢å¼•"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2026-01-17T15:43:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£MySQLæ•°æ®åº“ç´¢å¼•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:43:36.000Z" title="Sat Jan 17 2026 15:43:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£ MySQL æ•°æ®åº“ç´¢å¼•</h2>
<p>æœ¬æ–‡å°†è¯¦ç»†æ‹†è§£ MySQL æ•°æ®åº“ç´¢å¼•çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Œæ¶µç›–<strong>åº•å±‚æ•°æ®ç»“æ„</strong>ã€<strong>åŠŸèƒ½åˆ†ç±»</strong>ã€<strong>èšç°‡ä¸éèšç°‡ç´¢å¼•å·®å¼‚</strong>ï¼Œä»¥åŠ<strong>ç´¢å¼•åˆ›å»ºåŸåˆ™å’Œå¤±æ•ˆåœºæ™¯</strong>ï¼ŒåŠ©åŠ›å¤¯å®æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–åŸºç¡€ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ æŒ‰åº•å±‚æ•°æ®ç»“æ„åˆ†ç±»</h3>
<p>MySQL ç´¢å¼•çš„æ€§èƒ½å’Œé€‚ç”¨åœºæ™¯ï¼Œç”±å…¶åº•å±‚æ•°æ®ç»“æ„å†³å®šã€‚ä»¥ä¸‹æ˜¯å››ç§æ ¸å¿ƒç´¢å¼•ç±»å‹çš„å¯¹æ¯”ä¸è¯¦è§£ï¼š</p>








































<table><thead><tr><th>ç´¢å¼•ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>æ”¯æŒæ“ä½œ</th><th>ä¼˜ç¼ºç‚¹</th><th>å­˜å‚¨å¼•æ“æ”¯æŒ</th></tr></thead><tbody><tr><td>B+æ ‘ç´¢å¼•</td><td>å¸¸è§„æŸ¥è¯¢ï¼ˆç­‰å€¼ã€èŒƒå›´ã€æ’åºï¼‰</td><td>ç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰ã€èŒƒå›´æŸ¥è¯¢ï¼ˆ&gt;ã€&lt;ã€BETWEENï¼‰ã€æ’åºï¼ˆORDER BYï¼‰ã€LIKE å‰ç¼€åŒ¹é…</td><td>ä¼˜ç‚¹ï¼šé€‚é…ç»å¤§å¤šæ•°æŸ¥è¯¢ï¼Œæ—¶é—´å¤æ‚åº¦ O(log N)ï¼›ç¼ºç‚¹ï¼šä¸æ”¯æŒå“ˆå¸Œå¿«é€Ÿå®šä½</td><td>InnoDBã€MyISAMã€Memoryï¼ˆå¯é…ç½®ï¼‰</td></tr><tr><td>å“ˆå¸Œç´¢å¼•</td><td>é«˜é¢‘ç­‰å€¼æŸ¥è¯¢</td><td>ä»…æ”¯æŒç­‰å€¼æŸ¥è¯¢ï¼ˆ=ï¼‰</td><td>ä¼˜ç‚¹ï¼šç­‰å€¼æŸ¥è¯¢é€Ÿåº¦æå¿«ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ï¼›ç¼ºç‚¹ï¼šä¸æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€æ’åºã€æ¨¡ç³ŠåŒ¹é…</td><td>ä»… Memory å­˜å‚¨å¼•æ“</td></tr><tr><td>å…¨æ–‡ç´¢å¼•</td><td>å¤§æ–‡æœ¬å†…å®¹æ£€ç´¢</td><td>è‡ªç„¶è¯­è¨€æœç´¢ï¼ˆMATCH...AGAINSTï¼‰</td><td>ä¼˜ç‚¹ï¼šé«˜æ•ˆåˆ†è¯æ£€ç´¢é•¿æ–‡æœ¬ï¼›ç¼ºç‚¹ï¼šä¸é€‚åˆå°æ•°æ®é‡æˆ–é¢‘ç¹æ›´æ–°åœºæ™¯</td><td>InnoDBã€MyISAM</td></tr><tr><td>ç©ºé—´ç´¢å¼•</td><td>GIS åœ°ç†ä¿¡æ¯æ•°æ®æŸ¥è¯¢</td><td>ç©ºé—´å…³ç³»æŸ¥è¯¢ï¼ˆåŒ…å«ã€ç›¸äº¤ã€è·ç¦»è®¡ç®—ï¼‰</td><td>ä¼˜ç‚¹ï¼šä¸“ä¸ºç©ºé—´æ•°æ®ä¼˜åŒ–ï¼›ç¼ºç‚¹ï¼šæ”¯æŒæœ‰é™ï¼Œåº”ç”¨åœºæ™¯å°ä¼—</td><td>MyISAMï¼ˆInnoDB 8.0+ éƒ¨åˆ†æ”¯æŒï¼‰</td></tr></tbody></table>
<h4 data-id="heading-2">1.1 B+æ ‘ç´¢å¼•</h4>
<p>B+æ ‘ç´¢å¼•æ˜¯ MySQL <strong>é»˜è®¤ä¸”åº”ç”¨æœ€å¹¿</strong>çš„ç´¢å¼•ç±»å‹ï¼Œæ˜¯ InnoDB å’Œ MyISAM å¼•æ“çš„æ ¸å¿ƒç´¢å¼•ç»“æ„ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šæ•°æ®æŒ‰å±‚çº§ç»„ç»‡æˆæ ‘çŠ¶ç»“æ„ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨å…¨éƒ¨ç´¢å¼•æ•°æ®å¹¶é€šè¿‡é“¾è¡¨ç›¸è¿ï¼Œæ—¢ä¿è¯ç­‰å€¼æŸ¥è¯¢æ•ˆç‡ï¼Œåˆæ”¯æŒèŒƒå›´éå†å’Œæ’åºã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä¸»é”®ã€å¤–é”®ã€é¢‘ç¹ä½œä¸º WHERE æ¡ä»¶ã€å‚ä¸æ’åºå’Œè¡¨è¿æ¥çš„å­—æ®µã€‚</li>
</ul>
<h4 data-id="heading-3">1.2 å“ˆå¸Œç´¢å¼•</h4>
<p>å“ˆå¸Œç´¢å¼•åŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œä»…é€‚ç”¨äº Memory å­˜å‚¨å¼•æ“ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šé€šè¿‡å“ˆå¸Œå‡½æ•°å°†ç´¢å¼•é”®æ˜ å°„ä¸ºå“ˆå¸Œå€¼ï¼ŒæŸ¥è¯¢æ—¶ç›´æ¥å®šä½æ•°æ®ä½ç½®ï¼Œç­‰å€¼æŸ¥è¯¢é€Ÿåº¦è¿œè¶… B+æ ‘ï¼›ä½†æ— æ³•åº”å¯¹èŒƒå›´æŸ¥è¯¢ã€æ’åºç­‰æ“ä½œï¼Œä¸”å­˜åœ¨å“ˆå¸Œå†²çªé£é™©ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®é‡å°ã€æŸ¥è¯¢ä»¥ç­‰å€¼åŒ¹é…ä¸ºä¸»çš„ä¸´æ—¶è¡¨æˆ–å†…å­˜è¡¨ã€‚</li>
</ul>
<h4 data-id="heading-4">1.3 å…¨æ–‡ç´¢å¼•</h4>
<p>å…¨æ–‡ç´¢å¼•ä¸“ä¸ºæ–‡æœ¬æ£€ç´¢è®¾è®¡ï¼Œé’ˆå¯¹ CHARã€VARCHARã€TEXT ç±»å‹å­—æ®µä¼˜åŒ–ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šé‡‡ç”¨åˆ†è¯æŠ€æœ¯æ‹†åˆ†æ–‡æœ¬ï¼Œå¿½ç•¥åœç”¨è¯ï¼ˆå¦‚ <code>a</code>ã€<code>the</code>ï¼‰ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æ¨¡å¼å’Œå¸ƒå°”æ¨¡å¼æ£€ç´¢ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ–°é—»ç½‘ç«™ã€åšå®¢ç³»ç»Ÿã€æœç´¢å¼•æ“ç­‰éœ€è¦å…¨æ–‡å…³é”®è¯åŒ¹é…çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-5">1.4 ç©ºé—´ç´¢å¼•</h4>
<p>ç©ºé—´ç´¢å¼•åŸºäº R-Tree ç»“æ„å®ç°ï¼Œç”¨äºå¤„ç†åœ°ç†ä¿¡æ¯æ•°æ®ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šä¼˜åŒ–ç©ºé—´æ•°æ®çš„å­˜å‚¨ä¸æŸ¥è¯¢ï¼Œå¯å¿«é€Ÿåˆ¤æ–­ç‚¹ã€çº¿ã€é¢ä¹‹é—´çš„ç©ºé—´å…³ç³»ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåœ°å›¾æœåŠ¡ã€ä½ç½®è½¨è¿¹åˆ†æç­‰ GIS ç›¸å…³åº”ç”¨ã€‚</li>
</ul>
<h4 data-id="heading-6">1.5 å“ˆå¸Œç´¢å¼• vs B+æ ‘ç´¢å¼• æ ¸å¿ƒæŠ‰æ‹©</h4>








































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>å“ˆå¸Œç´¢å¼•</th><th>B+æ ‘ç´¢å¼•</th></tr></thead><tbody><tr><td>èŒƒå›´æŸ¥è¯¢</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æ’åºæ“ä½œ</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td>æ¨¡ç³ŠæŸ¥è¯¢</td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ LIKE 'xx%'</td></tr><tr><td>è”åˆç´¢å¼•é€‚é…</td><td>âŒ ä¸æ”¯æŒæœ€å·¦å‰ç¼€åŸåˆ™</td><td>âœ… å®Œç¾æ”¯æŒ</td></tr><tr><td>å­˜å‚¨å¼•æ“å…¼å®¹æ€§</td><td>ä»… Memory</td><td>å…¨å¼•æ“å…¼å®¹</td></tr><tr><td>ç­‰å€¼æŸ¥è¯¢æ•ˆç‡</td><td>O(1)ï¼Œé€Ÿåº¦æå¿«</td><td>O(log N)ï¼Œç¨³å®šé«˜æ•ˆ</td></tr></tbody></table>
<p><strong>æŠ‰æ‹©å»ºè®®</strong>ï¼šç»å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯ä¼˜å…ˆé€‰æ‹© B+æ ‘ç´¢å¼•ï¼›ä»…å½“æ•°æ®å­˜äº Memory å¼•æ“ä¸”æŸ¥è¯¢ä¸ºçº¯ç­‰å€¼åŒ¹é…æ—¶ï¼Œè€ƒè™‘å“ˆå¸Œç´¢å¼•ã€‚</p>
<h3 data-id="heading-7">äºŒã€ æŒ‰åŠŸèƒ½ä¸ç”¨é€”åˆ†ç±»</h3>
<p>ä»ä¸šåŠ¡åŠŸèƒ½è§’åº¦ï¼ŒMySQL ç´¢å¼•å¯åˆ†ä¸ºä»¥ä¸‹ 6 ç±»ï¼Œå„è‡ªæ‰¿æ‹…ä¸åŒçš„æ€§èƒ½ä¼˜åŒ–èŒè´£ï¼š</p>
<h4 data-id="heading-8">2.1 ä¸»é”®ç´¢å¼•ï¼ˆPrimary Key Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œ<strong>ä¸å…è®¸ NULL å€¼å’Œé‡å¤æ•°æ®</strong>ï¼Œä¸€å¼ è¡¨<strong>ä»…èƒ½æœ‰ä¸€ä¸ªä¸»é”®ç´¢å¼•</strong>ã€‚</li>
<li><strong>å¼•æ“ç‰¹æ€§</strong>ï¼šInnoDB ä¸­ï¼Œä¸»é”®ç´¢å¼•å°±æ˜¯<strong>èšç°‡ç´¢å¼•</strong>ï¼Œæ•°æ®è¡Œç›´æ¥å­˜å‚¨åœ¨ç´¢å¼•å¶å­èŠ‚ç‚¹ï¼›MyISAM æ— èšç°‡ç´¢å¼•æ¦‚å¿µï¼Œä¸»é”®ç´¢å¼•ä»…ä¸ºæ™®é€šå”¯ä¸€ç´¢å¼•ã€‚</li>
<li><strong>åˆ›å»ºæ–¹å¼</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> table_name (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">20</span>)
);
</code></pre>
</li>
<li><strong>ä¸»é”®é€‰å‹å»ºè®®</strong>ï¼šä¼˜å…ˆä½¿ç”¨<strong>è‡ªå¢ä¸»é”®</strong>ã€‚è‡ªå¢ä¸»é”®æ’å…¥æ—¶æŒ‰é¡ºåºå†™å…¥æ•°æ®é¡µï¼Œå‡å°‘é¡µåˆ†è£‚å’Œç¢ç‰‡ï¼›éè‡ªå¢ä¸»é”®ï¼ˆå¦‚ UUIDï¼‰ä¼šå¯¼è‡´æ•°æ®éšæœºå†™å…¥ï¼Œå¢åŠ  I/O å¼€é”€ã€‚</li>
</ul>
<h4 data-id="heading-9">2.2 å”¯ä¸€ç´¢å¼•ï¼ˆUnique Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šä¿è¯ç´¢å¼•åˆ—å€¼å”¯ä¸€ï¼Œ<strong>å…è®¸ NULL å€¼</strong>ï¼ˆNULL ä¸å‚ä¸å”¯ä¸€æ€§æ ¡éªŒï¼‰ï¼Œä¸€å¼ è¡¨å¯åˆ›å»ºå¤šä¸ªå”¯ä¸€ç´¢å¼•ã€‚</li>
<li><strong>ä½œç”¨</strong>ï¼šé˜²æ­¢æ•°æ®é‡å¤ï¼ŒåŒæ—¶åŠ é€Ÿç­‰å€¼æŸ¥è¯¢ã€‚</li>
<li><strong>åˆ›å»ºæ–¹å¼</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_unique_email <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(email);
</code></pre>
</li>
</ul>
<h4 data-id="heading-10">2.3 æ™®é€šç´¢å¼•ï¼ˆNormal Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šæœ€åŸºç¡€çš„ç´¢å¼•ç±»å‹ï¼Œ<strong>æ— å”¯ä¸€æ€§å’Œéç©ºçº¦æŸ</strong>ï¼Œä»…ç”¨äºåŠ é€ŸæŸ¥è¯¢ã€‚</li>
<li><strong>ä½œç”¨</strong>ï¼šæå‡é«˜é¢‘æŸ¥è¯¢å­—æ®µçš„æ£€ç´¢æ•ˆç‡ï¼Œæ˜¯ä¸šåŠ¡å¼€å‘ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ç´¢å¼•ã€‚</li>
<li><strong>åˆ›å»ºæ–¹å¼</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> INDEX idx_normal_name <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(name);
</code></pre>
</li>
</ul>
<h4 data-id="heading-11">2.4 å…¨æ–‡ç´¢å¼•ï¼ˆFull-Text Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šä¸“ä¸ºæ–‡æœ¬æ£€ç´¢è®¾è®¡ï¼Œä¸åº•å±‚æ•°æ®ç»“æ„ä¸­çš„å…¨æ–‡ç´¢å¼•ä¸€è‡´ï¼Œéœ€é€šè¿‡ <code>MATCH...AGAINST</code> è¯­æ³•æŸ¥è¯¢ã€‚</li>
<li><strong>ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> FULLTEXT INDEX idx_fulltext_content <span class="hljs-keyword">ON</span> article(content);
<span class="hljs-comment">-- æ£€ç´¢åŒ…å« "MySQL ä¼˜åŒ–" çš„æ–‡ç« </span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> article <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">MATCH</span>(content) AGAINST (<span class="hljs-string">'MySQL ä¼˜åŒ–'</span>);
</code></pre>
</li>
</ul>
<h4 data-id="heading-12">2.5 è¦†ç›–ç´¢å¼•ï¼ˆCovering Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šæŸ¥è¯¢æ‰€éœ€çš„æ‰€æœ‰åˆ—éƒ½åŒ…å«åœ¨ç´¢å¼•ä¸­ï¼Œæ— éœ€å›è¡¨è¯»å–æ•°æ®è¡Œï¼Œ<strong>é¿å…ç£ç›˜ I/O æ“ä½œ</strong>ï¼Œå¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½ã€‚</li>
<li><strong>ä½œç”¨</strong>ï¼šå°†â€œç´¢å¼•æŸ¥è¯¢ + æ•°æ®æŸ¥è¯¢â€ç®€åŒ–ä¸ºâ€œç´¢å¼•æŸ¥è¯¢â€ï¼Œæ˜¯é«˜æ€§èƒ½æŸ¥è¯¢çš„å…³é”®ä¼˜åŒ–æ‰‹æ®µã€‚</li>
<li><strong>ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè¦†ç›–ç´¢å¼•ï¼ˆåŒ…å« idã€nameï¼‰</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_covering_id_name <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(id, name);
<span class="hljs-comment">-- æŸ¥è¯¢æ—¶ç›´æ¥ä»ç´¢å¼•è·å–æ•°æ®ï¼Œæ— éœ€å›è¡¨</span>
<span class="hljs-keyword">SELECT</span> id, name <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;
</code></pre>
</li>
</ul>
<h4 data-id="heading-13">2.6 ç»„åˆç´¢å¼•ï¼ˆComposite Indexï¼‰</h4>
<ul>
<li><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šå°†å¤šä¸ªå­—æ®µç»„åˆæˆä¸€ä¸ªç´¢å¼•ï¼Œéµå¾ª<strong>æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™</strong>ã€‚</li>
<li><strong>ä½œç”¨</strong>ï¼šä¼˜åŒ–å¤šå­—æ®µè”åˆæŸ¥è¯¢ï¼Œç›¸æ¯”å¤šä¸ªå•åˆ—ç´¢å¼•ï¼Œå‡å°‘ç´¢å¼•ç»´æŠ¤æˆæœ¬å’Œå­˜å‚¨ç©ºé—´å ç”¨ã€‚</li>
<li><strong>åˆ›å»ºä¸ä½¿ç”¨ç¤ºä¾‹</strong>ï¼š
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç»„åˆç´¢å¼• (a, b, c)</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_composite_a_b_c <span class="hljs-keyword">ON</span> test(a, b, c);
<span class="hljs-comment">-- æœ‰æ•ˆä½¿ç”¨ï¼šåŒ¹é…æœ€å·¦å‰ç¼€</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test <span class="hljs-keyword">WHERE</span> a <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-comment">-- æ— æ•ˆä½¿ç”¨ï¼šæœªåŒ¹é…æœ€å·¦å‰ç¼€</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test <span class="hljs-keyword">WHERE</span> b <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test <span class="hljs-keyword">WHERE</span> c <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
</code></pre>
</li>
</ul>
<h3 data-id="heading-14">ä¸‰ã€ æŒ‰å­˜å‚¨æ–¹å¼åˆ’åˆ†ï¼šèšç°‡ç´¢å¼• vs éèšç°‡ç´¢å¼•</h3>
<p>ç´¢å¼•ä¸æ•°æ®çš„å­˜å‚¨å…³ç³»ï¼Œå†³å®šäº†æŸ¥è¯¢çš„åº•å±‚æ‰§è¡Œé€»è¾‘ï¼Œè¿™æ˜¯ InnoDB å’Œ MyISAM å¼•æ“çš„æ ¸å¿ƒå·®å¼‚ç‚¹ã€‚</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>èšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰</th><th>éèšç°‡ç´¢å¼•ï¼ˆNon-Clustered Indexï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨å…³ç³»</td><td>ç´¢å¼•ä¸æ•°æ®è¡Œå­˜å‚¨åœ¨ä¸€èµ·ï¼Œç´¢å¼•å³æ•°æ®</td><td>ç´¢å¼•ä¸æ•°æ®è¡Œåˆ†ç¦»ï¼Œç´¢å¼•å¶å­èŠ‚ç‚¹å­˜ä¸»é”®/æŒ‡é’ˆ</td></tr><tr><td>æ•°é‡é™åˆ¶</td><td>ä¸€å¼ è¡¨<strong>ä»…èƒ½æœ‰ä¸€ä¸ª</strong></td><td>ä¸€å¼ è¡¨<strong>å¯ä»¥æœ‰å¤šä¸ª</strong></td></tr><tr><td>æŸ¥è¯¢æ€§èƒ½</td><td>ä¸»é”®æŸ¥è¯¢ã€èŒƒå›´æŸ¥è¯¢é€Ÿåº¦æå¿«ï¼Œæ— éœ€å›è¡¨</td><td>éœ€è¦é€šè¿‡ä¸»é”®/æŒ‡é’ˆå›è¡¨ï¼Œæ€§èƒ½ç•¥ä½</td></tr><tr><td>ç©ºé—´å ç”¨</td><td>è¾ƒå°ï¼Œæ— éœ€é¢å¤–å­˜å‚¨ç´¢å¼•æŒ‡é’ˆ</td><td>è¾ƒå¤§ï¼Œæ¯ä¸ªç´¢å¼•éƒ½éœ€ç‹¬ç«‹å­˜å‚¨ç©ºé—´</td></tr><tr><td>æ•°æ®æ›´æ–°å½±å“</td><td>æ’å…¥/æ›´æ–°å¯èƒ½å¯¼è‡´æ•°æ®é¡µåˆ†è£‚</td><td>ä¸å½±å“æ•°æ®ç‰©ç†é¡ºåºï¼Œæ›´æ–°æˆæœ¬ä½</td></tr><tr><td>å­˜å‚¨å¼•æ“æ”¯æŒ</td><td>InnoDBï¼ˆä¸»é”®é»˜è®¤æ˜¯èšç°‡ç´¢å¼•ï¼‰</td><td>MyISAMï¼ˆæ‰€æœ‰ç´¢å¼•å‡ä¸ºéèšç°‡ç´¢å¼•ï¼‰ã€InnoDBï¼ˆéä¸»é”®ç´¢å¼•ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-15">3.1 èšç°‡ç´¢å¼•</h4>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šInnoDB ä¸­ï¼Œèšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç›´æ¥å­˜å‚¨å®Œæ•´æ•°æ®è¡Œï¼Œæ•°æ®æŒ‰ä¸»é”®é¡ºåºç‰©ç†æ’åˆ—ã€‚</li>
<li><strong>ä¸»é”®ç¼ºå¤±å¤„ç†</strong>ï¼šè‹¥æœªæ˜¾å¼å®šä¹‰ä¸»é”®ï¼ŒInnoDB ä¼šé€‰æ‹©ç¬¬ä¸€ä¸ªéç©ºå”¯ä¸€ç´¢å¼•ä½œä¸ºèšç°‡ç´¢å¼•ï¼›è‹¥æ²¡æœ‰ï¼Œåˆ™è‡ªåŠ¨ç”Ÿæˆ 6 å­—èŠ‚çš„éšå« <code>ROWID</code> ä½œä¸ºèšç°‡ç´¢å¼•ã€‚</li>
</ul>
<h4 data-id="heading-16">3.2 éèšç°‡ç´¢å¼•</h4>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼šä¹Ÿå«äºŒçº§ç´¢å¼•/è¾…åŠ©ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®è¡Œï¼Œè€Œæ˜¯å­˜å‚¨<strong>èšç°‡ç´¢å¼•çš„ä¸»é”®å€¼</strong>ã€‚</li>
<li><strong>æŸ¥è¯¢æµç¨‹</strong>ï¼šé€šè¿‡éèšç°‡ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œå…ˆæ‰¾åˆ°ä¸»é”®å€¼ï¼Œå†é€šè¿‡ä¸»é”®å€¼æŸ¥è¯¢èšç°‡ç´¢å¼•è·å–å®Œæ•´æ•°æ®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º<strong>å›è¡¨</strong>ã€‚</li>
</ul>
<h4 data-id="heading-17">3.3 ä¸ºä»€ä¹ˆéèšç°‡ç´¢å¼•å¶å­èŠ‚ç‚¹å­˜ä¸»é”®å€¼ï¼Ÿ</h4>
<p>æ ¸å¿ƒç›®çš„æ˜¯<strong>é™ä½ç´¢å¼•ç»´æŠ¤æˆæœ¬</strong>ï¼šå½“æ•°æ®è¡Œå› é¡µåˆ†è£‚ç­‰åŸå› å‘ç”Ÿç‰©ç†ä½ç½®ç§»åŠ¨æ—¶ï¼Œåªéœ€æ›´æ–°èšç°‡ç´¢å¼•çš„å­˜å‚¨ä½ç½®ï¼Œéèšç°‡ç´¢å¼•æ— éœ€ä¿®æ”¹â€”â€”å› ä¸ºå®ƒå­˜å‚¨çš„æ˜¯é€»è¾‘ä¸»é”®å€¼ï¼Œè€Œéç‰©ç†åœ°å€ã€‚</p>
<h3 data-id="heading-18">å››ã€ ç´¢å¼•åˆ›å»ºé»„é‡‘åŸåˆ™</h3>
<p>ç´¢å¼•å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œåˆç†çš„ç´¢å¼•è®¾è®¡éœ€å…¼é¡¾æŸ¥è¯¢æ€§èƒ½å’Œç»´æŠ¤æˆæœ¬ï¼Œéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>å°è¡¨ä¸å»ºç´¢å¼•</strong>ï¼šæ•°æ®é‡å°æ—¶ï¼Œå…¨è¡¨æ‰«æé€Ÿåº¦æ¯”ç´¢å¼•æŸ¥è¯¢æ›´å¿«ï¼Œå»ºç´¢å¼•åè€Œå¢åŠ å¼€é”€ã€‚</li>
<li><strong>é«˜é¢‘æŸ¥è¯¢å­—æ®µä¼˜å…ˆå»ºç´¢å¼•</strong>ï¼šå°†ç´¢å¼•ç”¨äº WHERE æ¡ä»¶ã€æ’åºã€è¡¨è¿æ¥çš„æ ¸å¿ƒå­—æ®µã€‚</li>
<li><strong>é«˜é¢‘æ›´æ–°å­—æ®µæ…å»ºç´¢å¼•</strong>ï¼šç´¢å¼•ä¼šå¢åŠ æ•°æ®æ’å…¥ã€æ›´æ–°ã€åˆ é™¤çš„ç»´æŠ¤æˆæœ¬ï¼Œæ›´æ–°é¢‘ç¹çš„å­—æ®µï¼ˆå¦‚è®¢å•çŠ¶æ€ï¼‰ä¸å®œå»ºç´¢å¼•ã€‚</li>
<li><strong>åŒºåˆ†åº¦ä½çš„å­—æ®µä¸å»ºç´¢å¼•</strong>ï¼šå¦‚æ€§åˆ«ã€çŠ¶æ€å­—æ®µï¼ŒåŸºæ•°å¤ªå°ï¼Œç´¢å¼•è¿‡æ»¤æ•ˆæœå·®ï¼Œå…¨è¡¨æ‰«ææ›´é«˜æ•ˆã€‚</li>
<li><strong>ä¼˜å…ˆç»„åˆç´¢å¼•ï¼Œé¿å…å†—ä½™ç´¢å¼•</strong>ï¼šç»„åˆç´¢å¼•å¯è¦†ç›–å¤šå­—æ®µæŸ¥è¯¢ï¼Œå‡å°‘ç´¢å¼•æ•°é‡ï¼›é¿å…åˆ›å»ºåŠŸèƒ½é‡å¤çš„ç´¢å¼•ï¼ˆå¦‚å·²æœ‰ (a,b)ï¼Œæ— éœ€å†å»º (a)ï¼‰ã€‚</li>
<li><strong>å­—ç¬¦ä¸²å­—æ®µç”¨å‰ç¼€ç´¢å¼•</strong>ï¼šå¯¹é•¿å­—ç¬¦ä¸²å­—æ®µï¼Œå¯åªå¯¹å‰ N ä¸ªå­—ç¬¦å»ºç´¢å¼•ï¼ˆå¦‚ <code>idx_prefix_name ON user(name(10))</code>ï¼‰ï¼Œå‡å°‘ç´¢å¼•å­˜å‚¨ç©ºé—´ã€‚</li>
<li><strong>å°½é‡ä¿è¯ç´¢å¼•åˆ—éç©º</strong>ï¼šNULL å€¼ä¼šé™ä½ç´¢å¼•æ•ˆç‡ï¼Œå¯é€šè¿‡é»˜è®¤å€¼ï¼ˆå¦‚ 0ã€ç©ºå­—ç¬¦ä¸²ï¼‰æ›¿ä»£ NULLã€‚</li>
</ol>
<h3 data-id="heading-19">äº”ã€ ç´¢å¼•å¤±æ•ˆåå¤§åœºæ™¯åŠé¿å‘æ–¹æ¡ˆ</h3>
<p>ç´¢å¼•å¤±æ•ˆæ˜¯æ•°æ®åº“æ€§èƒ½é—®é¢˜çš„é«˜å‘åŒºï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„å¤±æ•ˆåœºæ™¯åŠè§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>
<p><strong>è¿åæœ€å·¦å‰ç¼€åŸåˆ™</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç»„åˆç´¢å¼• (a,b,c)ï¼ŒæŸ¥è¯¢æ¡ä»¶ä¸º <code>b=2</code> æˆ– <code>c=3</code>ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šæŸ¥è¯¢æ¡ä»¶å¿…é¡»åŒ…å«ç»„åˆç´¢å¼•çš„æœ€å·¦åˆ—ï¼Œå¦‚ <code>a=1 AND b=2</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>LIKE é€šé…ç¬¦ä»¥ % å¼€å¤´</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼š<code>SELECT * FROM user WHERE name LIKE '%tom'</code>ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šé¿å…å·¦æ¨¡ç³ŠåŒ¹é…ï¼Œæ”¹ä¸ºå³æ¨¡ç³Š <code>LIKE 'tom%'</code>ï¼›è‹¥éœ€å…¨æ¨¡ç³ŠåŒ¹é…ï¼Œè€ƒè™‘å…¨æ–‡ç´¢å¼•ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç´¢å¼•åˆ—å‚ä¸è®¡ç®—æˆ–å‡½æ•°æ“ä½œ</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼š<code>SELECT * FROM user WHERE id + 1 = 100</code>ã€<code>WHERE DATE(create_time) = '2026-01-01'</code>ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šå°†è®¡ç®—é€»è¾‘ç§»åˆ°ç­‰å·å³ä¾§ï¼Œå¦‚ <code>id = 99</code>ï¼›MySQL 8.0+ å¯åˆ›å»ºå‡½æ•°ç´¢å¼•ã€‚</li>
</ul>
</li>
<li>
<p><strong>OR æ¡ä»¶ä¸¤ä¾§å­—æ®µæœªå…¨éƒ¨å»ºç´¢å¼•</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼š<code>SELECT * FROM user WHERE id=1 OR age=18</code>ï¼ˆä»… id æœ‰ç´¢å¼•ï¼‰ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šç¡®ä¿ OR ä¸¤ä¾§å­—æ®µéƒ½æœ‰ç´¢å¼•ï¼Œæˆ–æ”¹ç”¨ UNION åˆå¹¶ç»“æœã€‚</li>
</ul>
</li>
<li>
<p><strong>å­—æ®µç±»å‹ä¸åŒ¹é…</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç´¢å¼•å­—æ®µ <code>id</code> ä¸º VARCHAR ç±»å‹ï¼ŒæŸ¥è¯¢æ—¶å†™ <code>WHERE id=123</code>ï¼ˆæœªåŠ å¼•å·ï¼‰ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šä¿è¯æŸ¥è¯¢å€¼ä¸å­—æ®µç±»å‹ä¸€è‡´ï¼Œå¦‚ <code>WHERE id='123'</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ä¸æ”¯æŒç´¢å¼•çš„æ“ä½œç¬¦</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼š<code>!=</code>ã€<code>&lt;&gt;</code>ã€<code>NOT IN</code>ã€<code>NOT EXISTS</code> ç­‰ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šå°½é‡ç”¨ç­‰å€¼æŸ¥è¯¢æ›¿ä»£ï¼Œå¦‚ç”¨ <code>IN</code> æ›¿ä»£ <code>NOT IN</code>ï¼Œæˆ–è°ƒæ•´æŸ¥è¯¢é€»è¾‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>IS NULL / IS NOT NULL æ»¥ç”¨</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šå¯¹å…è®¸ NULL çš„ç´¢å¼•åˆ—æ‰§è¡Œ <code>WHERE column IS NULL</code>ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šç´¢å¼•åˆ—å°½é‡è®¾ä¸ºéç©ºï¼›è‹¥å¿…é¡»æŸ¥è¯¢ NULL å€¼ï¼Œå¯é€šè¿‡ <code>EXPLAIN</code> éªŒè¯ç´¢å¼•æ˜¯å¦ç”Ÿæ•ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>è¡¨å…³è”å­—æ®µç¼–ç ä¸ä¸€è‡´</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šA è¡¨ <code>name</code> å­—æ®µä¸º utf8ï¼ŒB è¡¨ <code>name</code> å­—æ®µä¸º utf8mb4ï¼Œå…³è”æŸ¥è¯¢æ—¶ç´¢å¼•å¤±æ•ˆã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šä¿è¯å…³è”å­—æ®µçš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–å™¨é€‰æ‹©å…¨è¡¨æ‰«æ</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç´¢å¼•åˆ—åŒºåˆ†åº¦æä½ï¼Œä¼˜åŒ–å™¨åˆ¤æ–­å…¨è¡¨æ‰«ææ¯”ç´¢å¼•æŸ¥è¯¢æ›´å¿«ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šé€šè¿‡ <code>FORCE INDEX</code> å¼ºåˆ¶ä½¿ç”¨ç´¢å¼•ï¼Œæˆ–ä¼˜åŒ–ç´¢å¼•å­—æ®µçš„åŒºåˆ†åº¦ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç´¢å¼•åˆ—å‚ä¸åˆ—å¯¹æ¯”</strong></p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼š<code>SELECT * FROM test WHERE a = b</code>ï¼ˆaã€b å‡ä¸ºç´¢å¼•åˆ—ï¼‰ã€‚</li>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šé¿å…åˆ—ä¸åˆ—ç›´æ¥å¯¹æ¯”ï¼Œå¯é€šè¿‡ä¸šåŠ¡é€»è¾‘è°ƒæ•´æŸ¥è¯¢æ¡ä»¶ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-20">å…­ã€ æ€»ç»“</h3>
<p>MySQL ç´¢å¼•æ˜¯æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒå·¥å…·ï¼Œå…¶æœ¬è´¨æ˜¯<strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong>ã€‚å¼€å‘è€…éœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œä»<strong>æ•°æ®ç»“æ„</strong>ã€<strong>åŠŸèƒ½ç”¨é€”</strong>ã€<strong>å­˜å‚¨æ–¹å¼</strong>ä¸‰ä¸ªç»´åº¦é€‰æ‹©åˆé€‚çš„ç´¢å¼•ç±»å‹ï¼ŒåŒæ—¶éµå¾ªåˆ›å»ºåŸåˆ™ã€è§„é¿å¤±æ•ˆåœºæ™¯ï¼Œæ‰èƒ½æœ€å¤§åŒ–å‘æŒ¥ç´¢å¼•çš„æ€§èƒ½ä¼˜åŠ¿ã€‚</p>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œé€šè¿‡ <code>EXPLAIN</code> å‘½ä»¤åˆ†ææŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ï¼ŒéªŒè¯ç´¢å¼•æ˜¯å¦æœ‰æ•ˆä½¿ç”¨â€”â€”è¿™æ˜¯æ’æŸ¥ç´¢å¼•é—®é¢˜çš„æœ€ä½³å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ InnoDB çš„ MVCCï¼šä¸æ˜¯ä¹è§‚é”ï¼Œæ˜¯æ›´ä¼˜é›…çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7595894884957634611</link>    <guid>https://juejin.cn/post/7595894884957634611</guid>    <pubDate>2026-01-17T15:51:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884957634611" data-draft-id="7595800318517952518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ InnoDB çš„ MVCCï¼šä¸æ˜¯ä¹è§‚é”ï¼Œæ˜¯æ›´ä¼˜é›…çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2026-01-17T15:51:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰æ°´ä¸æ»´"/> <meta itemprop="url" content="https://juejin.cn/user/283045639753100"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ InnoDB çš„ MVCCï¼šä¸æ˜¯ä¹è§‚é”ï¼Œæ˜¯æ›´ä¼˜é›…çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/283045639753100/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰æ°´ä¸æ»´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:51:38.000Z" title="Sat Jan 17 2026 15:51:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ·±å…¥ç†è§£InnoDBçš„MVCCï¼šä¸æ˜¯ä¹è§‚é”ï¼Œæ˜¯æ›´ä¼˜é›…çš„å¹¶å‘æ§åˆ¶æ–¹æ¡ˆ</h2>
<p>MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰å¸¸è¢«è¯¯å½’ä¸ºä¹è§‚é”çš„å®ç°ï¼Œå®åˆ™äºŒè€…æ ¸å¿ƒè®¾è®¡æ€è·¯ä¸å®ç°é€»è¾‘æˆªç„¶ä¸åŒã€‚ä¹è§‚é”ä¸æ‚²è§‚é”æ˜¯é”æœºåˆ¶çš„è®¾è®¡æ€æƒ³ï¼Œè€ŒMVCCæ˜¯InnoDBä¸ºå®ç°äº‹åŠ¡éš”ç¦»ã€æå‡è¯»å†™å¹¶å‘æ€§èƒ½æ‰“é€ çš„ç‹¬ç«‹å¹¶å‘æ§åˆ¶ä½“ç³»ï¼Œé€šè¿‡ç‰ˆæœ¬æ§åˆ¶ä¸å¯è§æ€§ç®—æ³•ï¼Œä»æ ¹æœ¬ä¸Šå‡å°‘é”çš„ä¾èµ–ï¼Œå®ç°é«˜æ•ˆçš„è¯»å†™å¹¶è¡Œã€‚</p>
<p>æœ¬æ–‡å°†ä»é”æœºåˆ¶åŸºç¡€å‡ºå‘ï¼Œæ·±å…¥æ‹†è§£InnoDB MVCCçš„æ ¸å¿ƒåŸç†ã€å®ç°ç»„ä»¶ä¸å·¥ä½œæµç¨‹ï¼Œå˜æ¸…å…¶ä¸é”æœºåˆ¶çš„åŒºåˆ«ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ•°æ®åº“å¹¶å‘æ§åˆ¶åŸºç¡€ï¼šé”æœºåˆ¶çš„æ ¸å¿ƒåˆ†ç±»</h2>
<p>å¹¶å‘æ§åˆ¶æ˜¯ä¿è¯å¤šäº‹åŠ¡å¹¶è¡Œæ‰§è¡Œæ—¶æ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒï¼Œä¼ ç»Ÿæ–¹æ¡ˆä¾èµ–é”æœºåˆ¶ï¼ŒæŒ‰æ“ä½œç±»å‹å’Œè®¾è®¡æ€æƒ³å¯åˆ†ä¸ºä¸¤ç±»æ ¸å¿ƒåˆ’åˆ†ï¼Œä¹Ÿæ˜¯ç†è§£MVCCçš„å‰æã€‚</p>
<h3 data-id="heading-2">1. æŒ‰æ•°æ®åº“æ“ä½œç±»å‹åˆ’åˆ†</h3>
<p>é”çš„æ–½åŠ ä¸æ“ä½œç±»å‹å¼ºç›¸å…³ï¼Œä¸åŒè¯­å¥å¯¹åº”ä¸åŒé”ç±»å‹ï¼Œä¿éšœæ“ä½œçš„æ’ä»–æ€§æˆ–å…±äº«æ€§ï¼š</p>
<p><strong>1.è¯»é”ï¼š</strong> é’ˆå¯¹DQLæŸ¥è¯¢è¯­å¥ï¼ˆå¦‚SELECTï¼‰ï¼Œå…±äº«é”ï¼Œå¤šä¸ªäº‹åŠ¡å¯åŒæ—¶åŠ è¯»é”ï¼Œäº’ä¸é˜»å¡ã€‚</p>
<p><strong>2.å†™é”ï¼š</strong> é’ˆå¯¹DMLæ“ä½œè¯­å¥ï¼ˆå¦‚INSERT/UPDATE/DELETEï¼‰ï¼Œæ’ä»–é”ï¼ŒåŒä¸€èµ„æºä»…èƒ½è¢«ä¸€ä¸ªäº‹åŠ¡åŠ å†™é”ï¼Œé˜»å¡å…¶ä»–è¯»å†™æ“ä½œã€‚</p>
<p><strong>3.å…ƒæ•°æ®é”ï¼š</strong> é’ˆå¯¹DDLå®šä¹‰è¯­å¥ï¼ˆå¦‚CREATE/DROP TABLEï¼‰ï¼Œé”å®šè¡¨ç»“æ„ï¼Œé˜²æ­¢ç»“æ„ä¿®æ”¹ä¸æ•°æ®æ“ä½œå¹¶å‘å†²çªã€‚</p>
<h3 data-id="heading-3">2. æŒ‰è®¾è®¡æ€æƒ³åˆ’åˆ†ï¼šæ‚²è§‚é” vs ä¹è§‚é”</h3>
<p>è¿™æ˜¯é”æœºåˆ¶çš„ä¸¤å¤§æ ¸å¿ƒè®¾è®¡æ€è·¯ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äºæ˜¯å¦é¢„è®¾å¹¶å‘å†²çªï¼Œå†³å®šäº†åŠ é”æ—¶æœºä¸å†²çªå¤„ç†æ–¹å¼ï¼Œä¹Ÿæ˜¯æ˜“ä¸MVCCæ··æ·†çš„å…³é”®ç‚¹ã€‚</p>
<blockquote>
<h4 data-id="heading-4">æ‚²è§‚é”</h4>
<ul>
<li>æ ¸å¿ƒå‡è®¾ï¼šé¢„è®¾ä¼šå‘ç”Ÿå¹¶å‘å†²çª</li>
<li>åŠ é”æ—¶æœºï¼šæ“ä½œèµ„æºå‰ä¸»åŠ¨åŠ é”</li>
<li>å†²çªå¤„ç†ï¼šé”å®šèµ„æºåï¼Œå…¶ä»–äº‹åŠ¡ç›´æ¥é˜»å¡</li>
<li>å®ç°æ–¹å¼ï¼šè¡Œçº§é”ã€è¡¨çº§é”ã€Java synchronized ç­‰</li>
<li>æ€§èƒ½å¼€é”€ï¼šåŠ é”/è§£é” + é˜»å¡ç­‰å¾…ï¼Œå¼€é”€è¾ƒå¤§</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¹¶å‘å†²çª<strong>é¢‘ç¹</strong>çš„å†™å¤šè¯»å°‘åœºæ™¯</li>
</ul>
</blockquote>
<blockquote>
<h4 data-id="heading-5">ä¹è§‚é”</h4>
<ul>
<li>æ ¸å¿ƒå‡è®¾ï¼šé¢„è®¾ä¸ä¼šå‘ç”Ÿå¹¶å‘å†²çª</li>
<li>åŠ é”æ—¶æœºï¼šå…¨ç¨‹ä¸åŠ é”ï¼Œæ— é”æ“ä½œ</li>
<li>å†²çªå¤„ç†ï¼šæ“ä½œå®Œæˆåï¼Œé€šè¿‡æ ¡éªŒåˆ¤æ–­æ˜¯å¦å†²çª</li>
<li>å®ç°æ–¹å¼ï¼šç‰ˆæœ¬å·æœºåˆ¶ï¼ŒCASåŸå­æ“ä½œ</li>
<li>æ€§èƒ½å¼€é”€ï¼šæ— é”å¼€é”€ï¼Œä»…éœ€æ ¡éªŒï¼Œè½»é‡çº§</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¹¶å‘å†²çª<strong>è¾ƒå°‘</strong>çš„è¯»å¤šå†™å°‘åœºæ™¯</li>
</ul>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œæ‚²è§‚é”æ˜¯ <strong>â€œå…ˆé”åæ“ä½œï¼Œé˜»å¡å¼</strong>â€ï¼Œä¹è§‚é”æ˜¯ <strong>â€œå…ˆæ“ä½œåæ ¡éªŒï¼Œéé˜»å¡å¼â€</strong> ï¼Œä½†äºŒè€…å‡å±äºé”æœºåˆ¶èŒƒç•´ï¼Œè€ŒMVCCè·³å‡ºäº†è¿™ä¸€æ¡†æ¶ï¼Œé€šè¿‡å¤šç‰ˆæœ¬æ•°æ®å®ç°æ— é”è¯»ã€‚</p>
<h2 data-id="heading-6">äºŒã€MVCCçš„æ ¸å¿ƒå®šä½ï¼šä¸ºä½•éœ€è¦ç‹¬ç«‹çš„å¹¶å‘æ§åˆ¶ä½“ç³»ï¼Ÿ</h2>
<p>ä¼ ç»Ÿé”æœºåˆ¶å­˜åœ¨ä¸€ä¸ªè‡´å‘½é—®é¢˜ï¼š<strong>è¯»å†™äº’æ–¥</strong>ã€‚</p>
<p>å³ä½¿æ˜¯ä¹è§‚é”ï¼Œå†™æ“ä½œä»éœ€é€šè¿‡æ ¡éªŒä¿è¯åŸå­æ€§ï¼Œè¯»æ“ä½œè‹¥è¦è·å–æœ€æ–°æ•°æ®ï¼Œä»å¯èƒ½è¢«å†™æ“ä½œé˜»å¡ï¼›è€Œæ‚²è§‚é”çš„è¯»å†™äº’æ–¥åˆ™æ›´ä¸ºä¸¥æ ¼ã€‚</p>
<p>åœ¨è¯»å¤šå†™å°‘çš„å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œè¿™ç§äº’æ–¥ä¼šä¸¥é‡é™ä½å¹¶å‘æ€§èƒ½â€”â€”å¤§é‡è¯»æ“ä½œå› å°‘é‡å†™æ“ä½œè¢«é˜»å¡ï¼Œæ•°æ®åº“æ•´ä½“ååé‡å—é™ã€‚</p>
<p><strong>MVCCï¼ˆMulti-Version Concurrency Controlï¼Œå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰</strong> æ­£æ˜¯ä¸ºè§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿï¼šä¸ºæ¯è¡Œæ•°æ®ç»´æŠ¤å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œè¯»æ“ä½œé€šè¿‡è¯»å–å†å²ç‰ˆæœ¬å®ç° <strong>â€œæ— é”å¿«ç…§è¯»â€</strong> ï¼Œå†™æ“ä½œä»…ä¿®æ”¹æœ€æ–°ç‰ˆæœ¬å¹¶è®°å½•å†å²ï¼Œä»æ ¹æœ¬ä¸Šå®ç°è¯»å†™åˆ†ç¦»ï¼Œè®©è¯»æ“ä½œä¸é˜»å¡å†™ã€å†™æ“ä½œä¸é˜»å¡è¯»ã€‚</p>
<p>ä½œä¸ºInnoDBå­˜å‚¨å¼•æ“çš„æ ¸å¿ƒç‰¹æ€§ï¼ŒMVCCä¸»è¦<strong>æœåŠ¡äºäº‹åŠ¡éš”ç¦»çº§åˆ«</strong>çš„å®ç°ï¼Œæ˜¯InnoDBæ”¯æŒé«˜å¹¶å‘è¯»å†™çš„åº•å±‚åŸºçŸ³ï¼Œå…¶æ ¸å¿ƒå¹¶éé”ï¼Œè€Œæ˜¯<strong>ç‰ˆæœ¬æ§åˆ¶+å¯è§æ€§</strong>åˆ¤æ–­ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€InnoDB MVCCçš„æ ¸å¿ƒå®ç°ç»„ä»¶ï¼šä¸‰å¤§æ ¸å¿ƒæ¨¡å—ååŒå·¥ä½œ</h2>
<p>InnoDBçš„MVCCå¹¶éå•ä¸€æœºåˆ¶ï¼Œè€Œæ˜¯ç”±éšè—å­—æ®µã€Undo Logã€Read Viewä¸‰å¤§æ ¸å¿ƒç»„ä»¶ååŒæ„æˆï¼Œä¸‰è€…å„å¸å…¶èŒï¼Œåˆ†åˆ«å®ç°ç‰ˆæœ¬æ ‡è¯†ã€å†å²ç‰ˆæœ¬å­˜å‚¨ã€å¯è§æ€§åˆ¤æ–­ï¼Œå…±åŒæ”¯æ’‘å¤šç‰ˆæœ¬æ•°æ®çš„ç®¡ç†ä¸è¯»å–ã€‚</p>
<h3 data-id="heading-8">1. éšè—ç³»ç»Ÿåˆ—ï¼šæ•°æ®ç‰ˆæœ¬çš„â€œèº«ä»½æ ‡è¯†â€</h3>
<p>InnoDBä¼šä¸ºè¡¨ä¸­æ¯ä¸€è¡Œè®°å½•è‡ªåŠ¨æ·»åŠ ä¸‰ä¸ªéšè—ç³»ç»Ÿåˆ—ï¼ˆRowIDä¸ºå¯é€‰ï¼‰ï¼Œæ— éœ€ç”¨æˆ·å®šä¹‰ï¼Œç”¨äºè®°å½•æ•°æ®çš„ç‰ˆæœ¬ä¿¡æ¯ã€åˆ é™¤çŠ¶æ€ä¸å†å²ç‰ˆæœ¬æŒ‡é’ˆï¼Œæ˜¯MVCCçš„åŸºç¡€æ ‡è¯†ã€‚</p>
<blockquote>
<h4 data-id="heading-9">DB_TRX_ID</h4>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šè®°å½•è¡Œæ•°æ®æœ€è¿‘ä¸€æ¬¡ä¿®æ”¹ï¼ˆæ’å…¥/æ›´æ–°ï¼‰çš„äº‹åŠ¡ID</li>
<li>è¯´æ˜ï¼šäº‹åŠ¡IDæ˜¯InnoDBè‡ªå¢çš„å”¯ä¸€æ ‡è¯†ï¼Œæ–°äº‹åŠ¡å¼€å¯æ—¶åˆ†é…å”¯ä¸€ID</li>
</ul>
</blockquote>
<blockquote>
<h4 data-id="heading-10">DB_ROLL_PTR</h4>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šå›æ»šæŒ‡é’ˆï¼ŒæŒ‡å‘è¯¥è®°å½•å¯¹åº”çš„Undo Log</li>
<li>è¯´æ˜ï¼šå½¢æˆUndo Logæ—¥å¿—é“¾ï¼Œé€šè¿‡æŒ‡é’ˆå¯è¿½æº¯æ•°æ®çš„æ‰€æœ‰å†å²ç‰ˆæœ¬</li>
</ul>
</blockquote>
<blockquote>
<h4 data-id="heading-11">è¡Œåˆ é™¤æ ‡è®°</h4>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šæ ‡è®°è¡Œæ˜¯å¦è¢«é€»è¾‘åˆ é™¤</li>
<li>è¯´æ˜ï¼šå¹¶éç‹¬ç«‹å­—æ®µï¼Œå­˜å‚¨åœ¨è®°å½•å¤´ä¿¡æ¯ä¸­ï¼ŒDELETEæ“ä½œä»…ä¿®æ”¹è¯¥æ ‡è®°ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®</li>
</ul>
</blockquote>
<blockquote>
<h4 data-id="heading-12">RowID (å¯é€‰)Â </h4>
<ul>
<li>æ ¸å¿ƒä½œç”¨ï¼šéšè—è‡ªå¢ID</li>
<li>è¯´æ˜ï¼šä»…å½“è¡¨æœªæŒ‡å®šä¸»é”®/å”¯ä¸€éç©ºç´¢å¼•æ—¶ï¼ŒInnoDBè‡ªåŠ¨ç”Ÿæˆï¼Œä½œä¸ºè¡Œçš„å”¯ä¸€æ ‡è¯†</li>
</ul>
</blockquote>
<h3 data-id="heading-13">2. Undo Logï¼šæ•°æ®å†å²ç‰ˆæœ¬çš„â€œå­˜å‚¨ä»“åº“â€</h3>
<p>Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰æ˜¯InnoDBå®ç°äº‹åŠ¡å›æ»šä¸MVCCçš„æ ¸å¿ƒæ—¥å¿—ï¼Œè®°å½•æ•°æ®ä¿®æ”¹å‰çš„æ—§ç‰ˆæœ¬ï¼Œé€šè¿‡DB_ROLL_PTRå½¢æˆæ—¥å¿—é“¾ï¼Œä¸ºå¿«ç…§è¯»æä¾›å†å²ç‰ˆæœ¬æ•°æ®ï¼ŒåŒæ—¶æ”¯æ’‘äº‹åŠ¡çš„<strong>åŸå­æ€§</strong>ã€‚</p>
<h4 data-id="heading-14">ï¼ˆ1ï¼‰Undo Logçš„ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½</h4>
<ul>
<li>äº‹åŠ¡å›æ»šï¼šå½“äº‹åŠ¡æœªæäº¤/è¢«å›æ»šæ—¶ï¼Œé€šè¿‡Undo Logæ¢å¤æ•°æ®åˆ°ä¿®æ”¹å‰çš„åŸå§‹çŠ¶æ€ï¼Œæ’¤é”€æœªæäº¤äº‹åŠ¡å¯¹æ•°æ®åº“çš„å½±å“ï¼Œä¿è¯äº‹åŠ¡åŸå­æ€§ã€‚</li>
<li>MVCCå¿«ç…§è¯»ï¼šä¿å­˜æ•°æ®çš„æ‰€æœ‰å†å²ç‰ˆæœ¬ï¼Œå…¶ä»–äº‹åŠ¡å¯é€šè¿‡DB_ROLL_PTRè¿½æº¯Undo Logï¼Œè¯»å–ç¬¦åˆå¯è§æ€§è¦æ±‚çš„å†å²ç‰ˆæœ¬ï¼Œå®ç°æ— é”è¯»ã€‚</li>
</ul>
<h4 data-id="heading-15">ï¼ˆ2ï¼‰Undo Logçš„å…³é”®ç‰¹æ€§</h4>
<ul>
<li>é€»è¾‘æ—¥å¿—ï¼šè®°å½•çš„æ˜¯é€»è¾‘æ“ä½œï¼Œè€Œéç‰©ç†æ•°æ®æœ¬èº«ã€‚ä¾‹å¦‚æ›´æ–°ä¸€è¡Œæ•°æ®ï¼ŒUndo Logè®°å½•â€œåå‘æ›´æ–°æ“ä½œâ€ï¼›åˆ é™¤ä¸€è¡Œæ•°æ®ï¼Œè®°å½•â€œæ’å…¥æ“ä½œâ€ï¼Œå›æ»šæ—¶æ‰§è¡Œåå‘æ“ä½œå³å¯æ¢å¤æ•°æ®ã€‚</li>
<li>å­˜å‚¨ä½ç½®ï¼šç»Ÿä¸€å­˜å‚¨åœ¨InnoDBçš„å›æ»šæ®µä¸­ï¼Œç”±å¼•æ“ç»Ÿä¸€ç®¡ç†ã€‚</li>
</ul>
<h4 data-id="heading-16">ï¼ˆ3ï¼‰Undo Logçš„åˆ†ç±»ä¸ç”Ÿå‘½å‘¨æœŸ</h4>
<p>æ ¹æ®æ“ä½œç±»å‹ï¼ŒUndo Logåˆ†ä¸ºä¸¤ç±»ï¼Œç”Ÿå‘½å‘¨æœŸå·®å¼‚æ˜¾è‘—ï¼Œç›´æ¥å½±å“æ•°æ®åº“å­˜å‚¨ä¸æ€§èƒ½ï¼š</p>
<ul>
<li>Insert Undo Logï¼šè®°å½•INSERTæ“ä½œçš„æ—¥å¿—ï¼Œä»…ç”¨äºäº‹åŠ¡å›æ»šã€‚äº‹åŠ¡æäº¤åå¯ç›´æ¥åˆ é™¤ï¼Œå› ä¸ºå…¶ä»–äº‹åŠ¡ä¸ä¼šè®¿é—®æ’å…¥çš„æ–°è¡Œçš„å†å²ç‰ˆæœ¬ã€‚</li>
<li>Update Undo Logï¼šè®°å½•UPDATE/DELETEæ“ä½œçš„æ—¥å¿—ï¼Œç”¨äºäº‹åŠ¡å›æ»šä¸MVCCå¿«ç…§è¯»ã€‚äº‹åŠ¡æäº¤åä»éœ€ä¿ç•™ï¼Œç›´åˆ°ç³»ç»Ÿä¸­æ²¡æœ‰æ¯”è¯¥æ—¥å¿—æ›´æ—©çš„Read Viewï¼ˆè¯»è§†å›¾ï¼‰ï¼Œæ‰ä¼šè¢«å¼•æ“æ¸…ç†ã€‚</li>
</ul>
<p><strong>é‡è¦é—®é¢˜ï¼š</strong> é•¿äº‹åŠ¡ä¼šå¯¼è‡´Update Undo Logæ— æ³•åŠæ—¶æ¸…ç†â€”â€”å› ä¸ºé•¿äº‹åŠ¡ç”Ÿæˆçš„Read Viewä¼šä¸€ç›´ä¾èµ–æ—§ç‰ˆæœ¬çš„Undo Logï¼Œæœ€ç»ˆé€ æˆå­˜å‚¨ç©ºé—´å ç”¨è¿‡å¤§ã€æ€§èƒ½ä¸‹é™ã€‚</p>
<p><strong>ä¼˜åŒ–å»ºè®®ï¼š</strong> ä¸šåŠ¡ä¸­ä¸¥æ ¼é¿å…é•¿æ—¶é—´æœªæäº¤çš„äº‹åŠ¡ï¼ŒåŠæ—¶é‡Šæ”¾Read Viewä¾èµ–ã€‚</p>
<h3 data-id="heading-17">3. Read Viewï¼šæ•°æ®ç‰ˆæœ¬çš„â€œå¯è§æ€§è£åˆ¤â€</h3>
<p>Read Viewï¼ˆè¯»è§†å›¾ï¼‰æ˜¯äº‹åŠ¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ç”Ÿæˆçš„ä¸€è‡´æ€§å¿«ç…§ï¼Œæœ¬è´¨æ˜¯ä¸€ç»„å…ƒæ•°æ®é›†åˆï¼Œç”¨äºåˆ¤æ–­å½“å‰äº‹åŠ¡å¯¹å“ªäº›æ•°æ®ç‰ˆæœ¬å¯è§ï¼Œæ˜¯MVCCå®ç°äº‹åŠ¡éš”ç¦»çš„æ ¸å¿ƒï¼Œå†³å®šäº†ä¸åŒäº‹åŠ¡èƒ½çœ‹åˆ°çš„æ•°æ®ç‰ˆæœ¬èŒƒå›´ã€‚</p>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰Read Viewçš„æ ¸å¿ƒç»„æˆ</h4>
<p>ç”ŸæˆRead Viewæ—¶ï¼Œä¼šè®°å½•å½“å‰æ•°æ®åº“çš„äº‹åŠ¡çŠ¶æ€ï¼ŒåŒ…å«ä¸‰ä¸ªå…³é”®å±æ€§ï¼š</p>
<ul>
<li>alive_trx_listï¼šå½“å‰ç³»ç»Ÿä¸­æ´»è·ƒçš„äº‹åŠ¡IDåˆ—è¡¨ï¼ˆæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡IDï¼‰ã€‚</li>
<li>up_limit_idï¼šalive_trx_listä¸­çš„æœ€å°äº‹åŠ¡IDï¼Œä»£è¡¨å½“å‰æœ€æ—©çš„æ´»è·ƒäº‹åŠ¡ã€‚</li>
<li>low_limit_idï¼šç³»ç»Ÿå½“å‰å·²åˆ†é…çš„æœ€å¤§äº‹åŠ¡ID+1ï¼Œä»£è¡¨ä¸‹ä¸€ä¸ªå³å°†å¼€å¯çš„äº‹åŠ¡IDã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰æ ¸å¿ƒå¯è§æ€§ç®—æ³•</h4>
<p>ç”ŸæˆRead Viewåï¼ŒInnoDBé€šè¿‡æ•°æ®è¡Œçš„DB_TRX_IDï¼ˆæœ€è¿‘ä¿®æ”¹äº‹åŠ¡IDï¼‰ä¸Read Viewçš„ä¸‰ä¸ªå±æ€§å¯¹æ¯”ï¼Œåˆ¤æ–­è¯¥æ•°æ®ç‰ˆæœ¬æ˜¯å¦å¯¹å½“å‰äº‹åŠ¡å¯è§ï¼Œå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹çš„åˆ¤æ–­é€»è¾‘ä¸ºæ ¸å¿ƒï¼ˆä¹Ÿæ˜¯InnoDBé»˜è®¤éš”ç¦»çº§åˆ«ï¼‰ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>è‹¥Â DB_TRX_ID &lt; up_limit_idÂ ï¼šè¯¥æ•°æ®ç‰ˆæœ¬åœ¨Read Viewç”Ÿæˆå‰å·²æäº¤ï¼Œå¯¹å½“å‰äº‹åŠ¡å¯è§ã€‚</li>
<li>è‹¥Â DB_TRX_ID &gt;= low_limit_idÂ ï¼šè¯¥æ•°æ®ç‰ˆæœ¬åœ¨Read Viewç”Ÿæˆåæ‰è¢«ä¿®æ”¹ï¼Œå¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ã€‚</li>
<li>è‹¥Â DB_TRX_IDÂ åœ¨Â alive_trx_listÂ ä¸­ï¼šç”ŸæˆRead Viewæ—¶ï¼Œè¯¥ä¿®æ”¹äº‹åŠ¡ä»æœªæäº¤ï¼Œå¯¹å½“å‰äº‹åŠ¡ä¸å¯è§ã€‚</li>
<li>è‹¥ä»¥ä¸Šå‡ä¸æ»¡è¶³ï¼Œä¸”DB_ROLL_PTRä¸ä¸ºç©ºï¼šé€šè¿‡å›æ»šæŒ‡é’ˆè¿½æº¯Undo Logä¸­çš„æ›´æ—©å†å²ç‰ˆæœ¬ï¼Œé‡å¤ä¸Šè¿°åˆ¤æ–­ï¼Œç›´åˆ°æ‰¾åˆ°å¯è§ç‰ˆæœ¬æˆ–è¿½æº¯è‡³æœ€åŸå§‹ç‰ˆæœ¬ã€‚</li>
</ol>
<p>ç®€å•æ¥è¯´ï¼ŒRead Viewçš„æ ¸å¿ƒä½œç”¨æ˜¯ä¸ºäº‹åŠ¡åˆ’å®šä¸€ä¸ª <strong>â€œå¯è§èŒƒå›´â€</strong> ï¼Œä»…è®©äº‹åŠ¡çœ‹åˆ°è¯¥èŒƒå›´ä¹‹å†…çš„ã€å·²æäº¤çš„æ•°æ®ç‰ˆæœ¬ï¼Œä¿è¯å¿«ç…§è¯»çš„ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-20">å››ã€MVCCçš„ä¸¤å¤§æ ¸å¿ƒè¯»æ“ä½œï¼šå¿«ç…§è¯» vs å½“å‰è¯»</h2>
<p>InnoDBä¸­ï¼Œè¯»æ“ä½œåˆ†ä¸ºå¿«ç…§è¯»å’Œå½“å‰è¯»ï¼ŒäºŒè€…å‡æ”¯æŒMVCCï¼Œä½†åŠ é”ç­–ç•¥ã€æ•°æ®ç‰ˆæœ¬è¯»å–è§„åˆ™æˆªç„¶ä¸åŒï¼Œä¹Ÿæ˜¯MVCCå®ç° <strong>â€œè¯»å†™å¹¶è¡Œâ€</strong> çš„å…³é”®è®¾è®¡ã€‚</p>
<h3 data-id="heading-21">1. å¿«ç…§è¯»ï¼ˆSnapshot Readï¼‰</h3>
<p>æ™®é€šSELECTè¯­å¥çš„é»˜è®¤è¯»æ–¹å¼ï¼Œä¹Ÿæ˜¯MVCCçš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼Œå®ç°æ— é”è¯»ã€‚</p>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šè¯»å–çš„æ˜¯æ•°æ®çš„å¿«ç…§ç‰ˆæœ¬ï¼ˆå†å²ç‰ˆæœ¬ï¼‰ï¼Œå³äº‹åŠ¡å¿«ç…§ç”Ÿæˆæ—¶çš„æ•°æ®çŠ¶æ€ï¼Œè€Œéæœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li>åŠ é”ç­–ç•¥ï¼šå…¨ç¨‹ä¸åŠ é”ï¼Œä¸ä¼šé˜»å¡å…¶ä»–äº‹åŠ¡çš„å†™æ“ä½œï¼Œä¹Ÿä¸ä¼šè¢«å†™æ“ä½œé˜»å¡ã€‚</li>
<li>æ•°æ®æ¥æºï¼šé€šè¿‡Undo Logè¿½æº¯å†å²ç‰ˆæœ¬ï¼Œç»“åˆRead Viewçš„å¯è§æ€§ç®—æ³•ç­›é€‰å¯è§ç‰ˆæœ¬ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šæ™®é€šæŸ¥è¯¢ï¼Œæ— éœ€è·å–æœ€æ–°æ•°æ®ï¼Œè¿½æ±‚é«˜å¹¶å‘è¯»æ€§èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-22">2. å½“å‰è¯»ï¼ˆCurrent Readï¼‰</h3>
<p>åŠ é”æŸ¥è¯¢/å†™æ“ä½œçš„è¯»æ–¹å¼ï¼Œç”¨äºè·å–æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§ä¸ä¸€è‡´æ€§ã€‚</p>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šè¯»å–çš„æ˜¯æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶å¯¹è¯»å–çš„æ•°æ®åŠ é”ï¼Œé˜²æ­¢å…¶ä»–äº‹åŠ¡åŒæ—¶ä¿®æ”¹ã€‚</li>
<li>åŠ é”ç­–ç•¥ï¼šå¿…é¡»åŠ é”ï¼ŒåŠ æ’ä»–é”ï¼ˆFOR UPDATEï¼‰æˆ–å…±äº«é”ï¼ˆLOCK IN SHARE MODEï¼‰ã€‚</li>
<li>é€‚ç”¨æ“ä½œï¼šSELECT ... FOR UPDATEã€SELECT ... LOCK IN SHARE MODEã€UPDATEã€DELETEã€INSERTï¼ˆå†™æ“ä½œå‰éœ€å…ˆè¯»å–æœ€æ–°æ•°æ®ï¼Œå±äºéšå¼å½“å‰è¯»ï¼‰ã€‚</li>
<li>ç‰¹ç‚¹ï¼šæ”¯æŒMVCCï¼Œä½†éœ€è¦é¢å¤–çš„é”æ“ä½œä¿è¯ä¸€è‡´æ€§ï¼Œè¯»å†™ä¹‹é—´ä»ä¼šäº’æ–¥ã€‚</li>
</ul>
<h3 data-id="heading-23">å¿«ç…§è¯»ä¸å½“å‰è¯»æ ¸å¿ƒå¯¹æ¯”</h3>
<blockquote>
<h4 data-id="heading-24">å¿«ç…§è¯»</h4>
<ul>
<li>æ“ä½œç¤ºä¾‹ï¼šæ™®é€šSELECT</li>
<li>æ˜¯å¦åŠ é”ï¼šä¸åŠ é”</li>
<li>è¯»å–ç‰ˆæœ¬ï¼šå†å²å¿«ç…§ç‰ˆæœ¬</li>
<li>æ•°æ®æ¥æºï¼šUndo Log + å¯è§æ€§ç®—æ³•</li>
<li>å¹¶å‘ç‰¹æ€§ï¼šè¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»</li>
<li>MVCCï¼šæ ¸å¿ƒåº”ç”¨ï¼Œæ— é”å®ç°</li>
</ul>
</blockquote>
<blockquote>
<h4 data-id="heading-25">å½“å‰è¯»</h4>
<ul>
<li>æ“ä½œç¤ºä¾‹ï¼šSELECTâ€¦FORã€UPDATEã€DELETE</li>
<li>æ˜¯å¦åŠ é”ï¼šåŠ æ’ä»–/å…±äº«é”</li>
<li>è¯»å–ç‰ˆæœ¬ï¼šæœ€æ–°æ•°æ®ç‰ˆæœ¬</li>
<li>æ•°æ®æ¥æºï¼šæ•°æ®åº“ä¸»è¡¨ï¼ˆæœ€æ–°æ•°æ®ï¼‰</li>
<li>å¹¶å‘ç‰¹æ€§ï¼šè¯»é˜»å¡å†™ï¼Œå†™é˜»å¡è¯»</li>
<li>MVCCï¼šæ”¯æŒï¼Œä½†éœ€ç»“åˆé”æœºåˆ¶</li>
</ul>
</blockquote>
<h2 data-id="heading-26">äº”ã€MVCCä¸äº‹åŠ¡éš”ç¦»çº§åˆ«çš„å…³è”ï¼šRead Viewç”Ÿæˆæ—¶æœºæ˜¯å…³é”®</h2>
<p>InnoDBçš„å››å¤§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼ˆè¯»æœªæäº¤ã€è¯»å·²æäº¤ã€å¯é‡å¤è¯»ã€ä¸²è¡ŒåŒ–ï¼‰ï¼Œé™¤ä¸²è¡ŒåŒ–å¤–ï¼Œå…¶ä½™å‡åŸºäºMVCCå®ç°ï¼Œè€Œä¸åŒéš”ç¦»çº§åˆ«ä¸‹Read Viewçš„ç”Ÿæˆæ—¶æœºï¼Œæ˜¯å†³å®šéš”ç¦»çº§åˆ«ç‰¹æ€§çš„æ ¸å¿ƒï¼Œä¹Ÿæ˜¯MVCCå®ç°ä¸åŒä¸€è‡´æ€§ä¿éšœçš„å…³é”®ã€‚</p>
<h3 data-id="heading-27">1. è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰</h3>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šä¸ä½¿ç”¨Read Viewï¼Œç›´æ¥è¯»å–æ•°æ®çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå³ä½¿è¯¥ç‰ˆæœ¬ç”±æœªæäº¤äº‹åŠ¡ä¿®æ”¹ï¼ˆä¼šå‘ç”Ÿè„è¯»ï¼‰ã€‚</li>
<li>å®ç°ï¼šæ— éœ€Undo Logæ”¯æ’‘ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†ä¸€è‡´æ€§æœ€å·®ï¼Œå®é™…ä¸šåŠ¡ä¸­å‡ ä¹ä¸ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-28">2. è¯»å·²æäº¤ï¼ˆRead Committedï¼‰</h3>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šæ¯æ¬¡å¿«ç…§è¯»éƒ½ä¼šç”Ÿæˆæ–°çš„Read Viewï¼Œå› æ­¤åŒä¸€äº‹åŠ¡å†…å¤šæ¬¡æŸ¥è¯¢ï¼Œç»“æœå¯èƒ½ä¸åŒï¼ˆé˜²æ­¢è„è¯»ï¼Œä¼šå‘ç”Ÿä¸å¯é‡å¤è¯»ï¼‰ã€‚</li>
<li>å¯è§æ€§ï¼šä»…èƒ½çœ‹åˆ°å½“å‰æŸ¥è¯¢å‰å·²æäº¤çš„æ•°æ®ç‰ˆæœ¬ï¼Œæœªæäº¤çš„ç‰ˆæœ¬å§‹ç»ˆä¸å¯è§ã€‚</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå¯¹ä¸€è‡´æ€§è¦æ±‚ä¸€èˆ¬ï¼Œè¿½æ±‚è¯»æ€§èƒ½çš„åœºæ™¯ï¼Œä¹Ÿæ˜¯Oracleçš„é»˜è®¤éš”ç¦»çº§åˆ«ã€‚</li>
</ul>
<h3 data-id="heading-29">3. å¯é‡å¤è¯»ï¼ˆRepeatable Readï¼‰</h3>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šäº‹åŠ¡å¯åŠ¨æ—¶ç”Ÿæˆä¸€æ¬¡Read Viewï¼Œæ•´ä¸ªäº‹åŠ¡æœŸé—´å¤ç”¨è¯¥å¿«ç…§ï¼Œæ‰€æœ‰å¿«ç…§è¯»å‡åŸºäºæ­¤Read Viewï¼ˆé˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ï¼ŒInnoDBé€šè¿‡é—´éš™é”é¢å¤–é˜²æ­¢å¹»è¯»ï¼‰ã€‚</li>
<li>å¯è§æ€§ï¼šä»…èƒ½çœ‹åˆ°äº‹åŠ¡å¯åŠ¨å‰å·²æäº¤çš„æ•°æ®ç‰ˆæœ¬ï¼Œäº‹åŠ¡æœŸé—´å…¶ä»–äº‹åŠ¡æäº¤çš„ä¿®æ”¹ï¼Œå§‹ç»ˆä¸å¯è§ã€‚</li>
<li>ç‰¹ç‚¹ï¼šInnoDBé»˜è®¤éš”ç¦»çº§åˆ«ï¼Œå…¼é¡¾ä¸€è‡´æ€§ä¸å¹¶å‘æ€§èƒ½ï¼Œæ˜¯ä¸šåŠ¡ä¸­æœ€å¸¸ç”¨çš„çº§åˆ«ã€‚</li>
</ul>
<h3 data-id="heading-30">4. ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</h3>
<ul>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šä¸ä½¿ç”¨Read Viewï¼Œæ”¾å¼ƒMVCCï¼Œé€šè¿‡åŠ é”å®ç°ä¸²è¡ŒåŒ–æ‰§è¡Œï¼Œæ‰€æœ‰è¯»æ“ä½œå‡åŠ å…±äº«é”ï¼Œå†™æ“ä½œåŠ æ’ä»–é”ï¼Œäº‹åŠ¡æŒ‰é¡ºåºæ‰§è¡Œã€‚</li>
<li>ä¸€è‡´æ€§ï¼šæœ€é«˜ï¼Œé˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»ï¼Œä½†å¹¶å‘æ€§èƒ½æœ€å·®ï¼Œä»…é€‚ç”¨äºå¹¶å‘å†²çªæå°‘çš„åœºæ™¯ã€‚</li>
</ul>
<p>æ ¸å¿ƒç»“è®ºï¼šMVCCä¸»è¦æ”¯æ’‘è¯»å·²æäº¤å’Œå¯é‡å¤è¯»ä¸¤ä¸ªéš”ç¦»çº§åˆ«ï¼ŒäºŒè€…çš„æ ¸å¿ƒå·®å¼‚ä»…åœ¨äºRead Viewçš„ç”Ÿæˆæ—¶æœºâ€”â€”æ¯æ¬¡æŸ¥è¯¢ç”Ÿæˆ vs äº‹åŠ¡å¯åŠ¨æ—¶ç”Ÿæˆä¸€æ¬¡ï¼Œè¿™ä¸€å¾®å°å·®å¼‚ï¼Œå†³å®šäº†éš”ç¦»çº§åˆ«çš„ä¸€è‡´æ€§ç‰¹æ€§ã€‚</p>
<h2 data-id="heading-31">å…­ã€InnoDB MVCCçš„å®Œæ•´å·¥ä½œæµç¨‹</h2>
<p>MVCCçš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ï¼ˆéšè—å­—æ®µã€Undo Logã€Read Viewï¼‰ä¸ä¸¤å¤§è¯»æ“ä½œé…åˆï¼Œå½¢æˆä¸€å¥—å®Œæ•´çš„å¹¶å‘æ§åˆ¶æµç¨‹ï¼Œæ¶µç›–æ•°æ®ä¿®æ”¹ã€å¿«ç…§è¯»ã€äº‹åŠ¡æäº¤/å›æ»šå…¨ç”Ÿå‘½å‘¨æœŸï¼Œä»¥ä¸‹ä»¥å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸ºä¾‹ï¼Œæ‹†è§£å®Œæ•´å·¥ä½œæµç¨‹ã€‚</p>
<h3 data-id="heading-32">é˜¶æ®µ1ï¼šäº‹åŠ¡ä¿®æ”¹æ•°æ®ï¼ˆINSERT/UPDATE/DELETEï¼‰</h3>
<ol>
<li>äº‹åŠ¡å¼€å¯ï¼ŒInnoDBä¸ºå…¶åˆ†é…å”¯ä¸€çš„äº‹åŠ¡IDï¼ˆDB_TRX_IDï¼‰ï¼›</li>
<li>æ‰§è¡Œä¿®æ”¹æ“ä½œå‰ï¼Œå…ˆå°†æ•°æ®çš„æ—§ç‰ˆæœ¬å†™å…¥Undo Logï¼Œç”Ÿæˆå¯¹åº”çš„Insert/Update Undo Logï¼›</li>
<li>æ›´æ–°æ•°æ®è¡Œçš„éšè—å­—æ®µï¼šå°†DB_TRX_IDæ”¹ä¸ºå½“å‰äº‹åŠ¡IDï¼ŒDB_ROLL_PTRæŒ‡å‘åˆšç”Ÿæˆçš„Undo Logï¼Œå½¢æˆæ—¥å¿—é“¾ï¼›</li>
<li>è‹¥ä¸ºDELETEæ“ä½œï¼Œä»…ä¿®æ”¹è¡Œåˆ é™¤æ ‡è®°ï¼Œä¸ç‰©ç†åˆ é™¤æ•°æ®ï¼Œæ—§ç‰ˆæœ¬å†™å…¥Update Undo Logã€‚</li>
</ol>
<h3 data-id="heading-33">é˜¶æ®µ2ï¼šäº‹åŠ¡æ‰§è¡Œå¿«ç…§è¯»ï¼ˆæ™®é€šSELECTï¼‰</h3>
<ol>
<li>äº‹åŠ¡é¦–æ¬¡æ‰§è¡Œå¿«ç…§è¯»æ—¶ï¼Œç”ŸæˆRead Viewï¼Œè®°å½•å½“å‰ç³»ç»Ÿçš„æ´»è·ƒäº‹åŠ¡åˆ—è¡¨ã€up_limit_idã€low_limit_idï¼›</li>
<li>è¯»å–æ•°æ®è¡Œçš„æœ€æ–°ç‰ˆæœ¬ï¼Œè·å–å…¶DB_TRX_IDï¼›</li>
<li>é€šè¿‡å¯è§æ€§ç®—æ³•åˆ¤æ–­è¯¥ç‰ˆæœ¬æ˜¯å¦å¯¹å½“å‰äº‹åŠ¡å¯è§ï¼šè‹¥å¯è§ï¼Œç›´æ¥è¿”å›è¯¥ç‰ˆæœ¬æ•°æ®ï¼›è‹¥ä¸å¯è§ï¼Œé€šè¿‡DB_ROLL_PTRè¿½æº¯Undo Logä¸­çš„å†å²ç‰ˆæœ¬ï¼Œé‡å¤å¯è§æ€§åˆ¤æ–­ï¼Œç›´åˆ°æ‰¾åˆ°å¯è§ç‰ˆæœ¬ï¼›</li>
<li>åŒä¸€äº‹åŠ¡å†…åç»­çš„å¿«ç…§è¯»ï¼Œå¤ç”¨å·²ç”Ÿæˆçš„Read Viewï¼Œä¿è¯è¯»å–ç»“æœä¸€è‡´ã€‚</li>
</ol>
<h3 data-id="heading-34">é˜¶æ®µ3ï¼šäº‹åŠ¡æäº¤/å›æ»š</h3>
<h4 data-id="heading-35">1.Â äº‹åŠ¡æäº¤ï¼š</h4>
<ul>
<li>Insert Undo Logï¼šç›´æ¥åˆ é™¤ï¼Œæ— éœ€ä¿ç•™ï¼›</li>
<li>Update Undo Logï¼šä¿ç•™ï¼Œç”¨äºæ”¯æ’‘å…¶ä»–äº‹åŠ¡çš„å¿«ç…§è¯»ï¼Œç›´åˆ°æ— æ›´æ—©çš„Read Viewä¾èµ–æ—¶è¢«å¼•æ“æ¸…ç†ï¼›</li>
</ul>
<h4 data-id="heading-36">2.Â äº‹åŠ¡å›æ»šï¼š</h4>
<ul>
<li>é€šè¿‡Undo Logä¸­çš„å†å²ç‰ˆæœ¬ï¼Œç»“åˆDB_ROLL_PTRè¿½æº¯ï¼Œå°†æ•°æ®æ¢å¤åˆ°ä¿®æ”¹å‰çš„çŠ¶æ€ï¼›</li>
<li>æ’¤é”€æ‰€æœ‰ä¿®æ”¹æ“ä½œï¼Œé‡Šæ”¾äº‹åŠ¡ç›¸å…³èµ„æºã€‚</li>
</ul>
<h2 data-id="heading-37">ä¸ƒã€MVCCä¸é”æœºåˆ¶çš„æ ¸å¿ƒå¯¹æ¯”ï¼šè·³å‡ºé”çš„æ¡†æ¶ï¼Œå®ç°æ›´ä¼˜å¹¶å‘</h2>
<p>MVCCä¸æ‚²è§‚é”/ä¹è§‚é”å‡ä¸ºå¹¶å‘æ§åˆ¶æ–¹æ¡ˆï¼Œä½†äºŒè€…å±äºä¸åŒçš„æŠ€æœ¯ä½“ç³»ï¼Œæ ¸å¿ƒç‰¹æ€§ã€å®ç°æ–¹å¼ã€é€‚ç”¨åœºæ™¯å·®å¼‚æ˜¾è‘—ï¼Œå˜æ¸…äºŒè€…åŒºåˆ«ï¼Œæ‰èƒ½çœŸæ­£ç†è§£MVCCçš„è®¾è®¡ä»·å€¼ã€‚</p>
<blockquote>
<h3 data-id="heading-38">é”æœºåˆ¶ï¼ˆæ‚²è§‚/ä¹è§‚ï¼‰</h3>
<ul>
<li>æ ¸å¿ƒè®¾è®¡ï¼šåŸºäºé”çš„å†²çªæ§åˆ¶ï¼›è¯»å†™äº’æ–¥/äº‹åæ ¡éªŒ</li>
<li>åŠ é”å¼€é”€ï¼šæ‚²è§‚é”åŠ é”å¼€é”€å¤§ï¼Œä¹è§‚é”æ— åŠ é”å¼€é”€ä½†éœ€æ ¡éªŒ</li>
<li>å¹¶å‘æ€§èƒ½ï¼šè¯»å†™äº’æ–¥ï¼Œæ˜“é˜»å¡ï¼Œå¹¶å‘æ€§èƒ½è¾ƒä½</li>
<li>å®ç°åŸºç¡€ï¼šæ•°æ®åº“é”æœºåˆ¶/CASåŸå­æ“ä½œ/ç‰ˆæœ¬å·</li>
<li>ç©ºé—´å¼€é”€ï¼šå‡ ä¹æ— é¢å¤–ç©ºé—´å¼€é”€</li>
<li>é€‚ç”¨åœºæ™¯ï¼šå†™å¤šè¯»å°‘/å†²çªé¢‘ç¹ï¼ˆæ‚²è§‚é”ï¼‰ï¼›è¯»å¤šå†™å°‘/å†²çªæå°‘ï¼ˆä¹è§‚é”ï¼‰</li>
</ul>
</blockquote>
<blockquote>
<h3 data-id="heading-39">MVCC</h3>
<ul>
<li>æ ¸å¿ƒè®¾è®¡ï¼šåŸºäºå¤šç‰ˆæœ¬çš„å¯è§æ€§æ§åˆ¶ï¼Œè¯»å†™åˆ†ç¦»</li>
<li>åŠ é”å¼€é”€ï¼šå¿«ç…§è¯»æ— åŠ é”å¼€é”€ï¼Œå½“å‰è¯»éœ€åŠ é”</li>
<li>å¹¶å‘æ€§èƒ½ï¼šå¿«ç…§è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»ï¼Œè¯»å†™å¹¶è¡Œï¼Œå¹¶å‘æ€§èƒ½é«˜</li>
<li>å®ç°åŸºç¡€ï¼šéšè—å­—æ®µ + Undo Log + Read View</li>
<li>ç©ºé—´å¼€é”€ï¼šéœ€å­˜å‚¨Undo Logå†å²ç‰ˆæœ¬ï¼Œç©ºé—´å¼€é”€è¾ƒå¤§</li>
<li>é€‚ç”¨åœºæ™¯ï¼šè¯»å¤šå†™å°‘çš„è¯»å†™æ··åˆåœºæ™¯ï¼Œè¿½æ±‚é«˜å¹¶å‘è¯»æ€§èƒ½</li>
</ul>
</blockquote>
<h2 data-id="heading-40">å…«ã€MVCCçš„ä¼˜ç¼ºç‚¹ï¼šç†æ€§çœ‹å¾…å…¶è®¾è®¡ä»·å€¼</h2>
<p>MVCCæ˜¯InnoDBä¸ºè¯»å¤šå†™å°‘åœºæ™¯é‡èº«æ‰“é€ çš„æœ€ä¼˜è§£ï¼Œä½†å¹¶éä¸‡èƒ½ï¼Œå…¶ä¼˜ç‚¹ä¸å±€é™æ€§å‡æºäºæ ¸å¿ƒè®¾è®¡â€”â€”å¤šç‰ˆæœ¬æ•°æ®å­˜å‚¨ï¼Œéœ€ç»“åˆä¸šåŠ¡åœºæ™¯åˆç†ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-41"><strong>ä¼˜ç‚¹ï¼šæ‰“é€ é«˜æ€§èƒ½çš„è¯»å†™å¹¶è¡Œä½“ç³»</strong></h3>
<ol>
<li>æè‡´æå‡å¹¶å‘æ€§èƒ½ï¼šå¿«ç…§è¯»æ— é”åŒ–ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ä¼ ç»Ÿé”æœºåˆ¶çš„è¯»å†™äº’æ–¥é—®é¢˜ï¼Œè¯»æ“ä½œä¸é˜»å¡å†™ã€å†™æ“ä½œä¸é˜»å¡è¯»ï¼Œå¤§å¹…æå‡æ•°æ®åº“ååé‡ã€‚</li>
<li>å‡å°‘é”å¼€é”€ï¼šå¤§é‡è¯»æ“ä½œé€šè¿‡è¯»å–å†å²ç‰ˆæœ¬å®Œæˆï¼Œæ— éœ€åŠ é”/è§£é”ï¼Œé™ä½äº†é”æœºåˆ¶å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</li>
<li>åŸç”Ÿæ”¯æŒäº‹åŠ¡éš”ç¦»ï¼šé€šè¿‡Read Viewçš„ç”Ÿæˆæ—¶æœºä¸å¯è§æ€§ç®—æ³•ï¼ŒåŸç”Ÿå®ç°è¯»å·²æäº¤ã€å¯é‡å¤è¯»ä¸¤å¤§éš”ç¦»çº§åˆ«ï¼Œæ— éœ€é¢å¤–çš„é”ç­–ç•¥ã€‚</li>
<li>ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼šé€šè¿‡å¤šç‰ˆæœ¬ä¸å¯è§æ€§åˆ¤æ–­ï¼Œè®©äº‹åŠ¡çœ‹åˆ°ä¸€è‡´æ€§çš„å¿«ç…§æ•°æ®ï¼Œé¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»ç­‰é—®é¢˜ã€‚</li>
</ol>
<h3 data-id="heading-42">å±€é™æ€§ï¼šè®¾è®¡å¸¦æ¥çš„å›ºæœ‰é—®é¢˜</h3>
<ol>
<li>é¢å¤–ç©ºé—´å¼€é”€ï¼šéœ€è¦å­˜å‚¨Undo Logçš„å†å²ç‰ˆæœ¬æ•°æ®ï¼Œéšç€äº‹åŠ¡çš„æ‰§è¡Œï¼ŒUndo Logä¼šä¸æ–­è†¨èƒ€ï¼Œå ç”¨ç£ç›˜ç©ºé—´ã€‚</li>
<li>é•¿äº‹åŠ¡æ€§èƒ½é—®é¢˜ï¼šé•¿äº‹åŠ¡çš„Read Viewä¼šæŒç»­ä¾èµ–æ—§ç‰ˆæœ¬çš„Undo Logï¼Œå¯¼è‡´å¼•æ“æ— æ³•åŠæ—¶æ¸…ç†ï¼Œä¸ä»…å ç”¨ç©ºé—´ï¼Œè¿˜ä¼šå¢åŠ å¿«ç…§è¯»æ—¶çš„ç‰ˆæœ¬è¿½æº¯å¼€é”€ã€‚</li>
<li>å†™æ“ä½œä»éœ€åŠ é”ï¼šMVCCä»…ä¼˜åŒ–è¯»æ“ä½œï¼Œå†™æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰ä»éœ€åŠ æ’ä»–é”ï¼Œå†™æ“ä½œé¢‘ç¹çš„åœºæ™¯ä¸‹ï¼ŒMVCCçš„ä¼˜åŠ¿ä¼šå¤§å¹…å‡å¼±ã€‚</li>
<li>ä»…é€‚ç”¨äºInnoDBï¼šMVCCæ˜¯InnoDBçš„å­˜å‚¨å¼•æ“ç‰¹æ€§ï¼ŒMyISAMç­‰å…¶ä»–å­˜å‚¨å¼•æ“ä¸æ”¯æŒï¼Œé€šç”¨æ€§æœ‰é™ã€‚</li>
</ol>
<h2 data-id="heading-43">ä¹ã€MVCCå¿«ç…§è¯»å®æˆ˜ç¤ºä¾‹ï¼šç›´è§‚ç†è§£å¤šç‰ˆæœ¬å¯è§æ€§</h2>
<p>é€šè¿‡ä¸€ä¸ªç®€å•çš„å¹¶å‘äº‹åŠ¡ç¤ºä¾‹ï¼Œç›´è§‚æ„Ÿå—MVCCå¿«ç…§è¯»çš„æ ¸å¿ƒç‰¹æ€§â€”â€”ä¸åŒäº‹åŠ¡çœ‹åˆ°ä¸åŒçš„æ•°æ®ç‰ˆæœ¬ï¼Œå†™æ“ä½œä¸é˜»å¡è¯»æ“ä½œã€‚</p>
<h3 data-id="heading-44">1. å‡†å¤‡è¡¨ç»“æ„ä¸æµ‹è¯•æ•°æ®</h3>
<blockquote>
<p>-- åˆ›å»ºè®¢å•è¡¨<br/>
<strong>CREATE TABLE orders (<br/>
id INT AUTO_INCREMENT PRIMARY KEY,<br/>
status VARCHAR(20) NOT NULL<br/>
);</strong><br/>
-- æ’å…¥æµ‹è¯•æ•°æ®<br/>
<strong>INSERT INTO orders (status) VALUES ('pending'), ('shipped'), ('delivered');</strong></p>
</blockquote>
<h3 data-id="heading-45">2. æ¨¡æ‹Ÿå¹¶å‘äº‹åŠ¡æ“ä½œ</h3>
<p>å¼€å¯ä¸¤ä¸ªäº‹åŠ¡Aå’ŒBï¼Œæ¨¡æ‹Ÿå¹¶å‘çš„ä¿®æ”¹ä¸æŸ¥è¯¢æ“ä½œï¼Œéš”ç¦»çº§åˆ«ä¸ºInnoDBé»˜è®¤çš„å¯é‡å¤è¯»ã€‚</p>
<blockquote>
<p>-- äº‹åŠ¡Aï¼šå¼€å¯äº‹åŠ¡ï¼Œæ‰§è¡Œå¿«ç…§è¯»ä¸ä¿®æ”¹<br/>
<strong>START TRANSACTION;</strong><br/>
-- å¿«ç…§è¯»ï¼šè¯»å–äº‹åŠ¡å¯åŠ¨æ—¶çš„å¿«ç…§ç‰ˆæœ¬ï¼Œæ­¤æ—¶id=1çš„statusä¸ºpending<br/>
<strong>SELECT * FROM orders;</strong><br/>
-- å½“å‰è¯»+ä¿®æ”¹ï¼šä¿®æ”¹id=1çš„statusä¸ºcancelledï¼ŒåŠ æ’ä»–é”ï¼Œå†™å…¥Undo Log<br/>
<strong>UPDATE orders SET status = 'cancelled' WHERE id = 1;</strong></p>
<p>-- äº‹åŠ¡Bï¼šåœ¨äº‹åŠ¡Aæœªæäº¤æ—¶ï¼Œå¼€å¯äº‹åŠ¡æ‰§è¡Œå¿«ç…§è¯»<br/>
<strong>START TRANSACTION;</strong><br/>
-- å¿«ç…§è¯»ï¼šè¯»å–çš„æ˜¯id=1ä¿®æ”¹å‰çš„å†å²ç‰ˆæœ¬ï¼Œstatusä»ä¸ºpendingï¼Œä¸å—äº‹åŠ¡Aä¿®æ”¹å½±å“<br/>
<strong>SELECT * FROM orders WHERE id = 1;</strong></p>
</blockquote>
<h3 data-id="heading-46">3. æ‰§è¡Œç»“æœåˆ†æ</h3>
<ul>
<li>äº‹åŠ¡Aï¼šåœ¨è‡ªèº«æœªæäº¤æ—¶ï¼Œèƒ½çœ‹åˆ°ä¿®æ”¹åçš„ç‰ˆæœ¬ï¼ˆcancelledï¼‰ï¼Œå› ä¸ºè‡ªèº«çš„ä¿®æ”¹å¯¹å½“å‰äº‹åŠ¡å¯è§ã€‚</li>
<li>äº‹åŠ¡Bï¼šåœ¨äº‹åŠ¡Aæäº¤å‰ï¼Œå§‹ç»ˆè¯»å–çš„æ˜¯ä¿®æ”¹å‰çš„å¿«ç…§ç‰ˆæœ¬ï¼ˆpendingï¼‰ï¼Œä¸ä¼šè¢«äº‹åŠ¡Açš„å†™æ“ä½œé˜»å¡ï¼Œå®ç°äº†â€œå†™ä¸é˜»å¡è¯»â€ã€‚</li>
<li>äº‹åŠ¡Aæäº¤åï¼Œäº‹åŠ¡Bçš„å¿«ç…§è¯»ä»ä¸ºpendingï¼ˆå¯é‡å¤è¯»ç‰¹æ€§ï¼‰ï¼Œç›´åˆ°äº‹åŠ¡Bæäº¤å¹¶é‡æ–°å¼€å¯ï¼Œæ‰èƒ½çœ‹åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</li>
</ul>
<p>è¿™ä¸€ç¤ºä¾‹æ¸…æ™°ä½“ç°äº†MVCCçš„æ ¸å¿ƒä»·å€¼ï¼šå¤šç‰ˆæœ¬æ•°æ®è®©å¹¶å‘äº‹åŠ¡å®ç°æ•°æ®éš”ç¦»ï¼Œè¯»å†™æ“ä½œå¹¶è¡Œæ‰§è¡Œï¼Œäº’ä¸é˜»å¡ã€‚</p>
<h2 data-id="heading-47">åã€æ€»ç»“ï¼šMVCCçš„æ ¸å¿ƒæœ¬è´¨ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-48">1. æ ¸å¿ƒæœ¬è´¨ï¼šä¸æ˜¯é”ï¼Œæ˜¯å¤šç‰ˆæœ¬çš„å¯è§æ€§æ§åˆ¶</h3>
<p>MVCCçš„æ ¸å¿ƒå¹¶éä¹è§‚é”ï¼Œä¹Ÿéæ‚²è§‚é”ï¼Œè€Œæ˜¯ä¸ºæ¯è¡Œæ•°æ®ç»´æŠ¤å¤šä¸ªå†å²ç‰ˆæœ¬ï¼Œé€šè¿‡Read Viewåˆ¤æ–­ç‰ˆæœ¬å¯è§æ€§ï¼Œè®©è¯»æ“ä½œé€šè¿‡æ— é”çš„å¿«ç…§è¯»å®ç°é«˜æ€§èƒ½ï¼Œå†™æ“ä½œé€šè¿‡åŠ é”+Undo Logè®°å½•å†å²å®ç°åŸå­æ€§ã€‚å®ƒæ˜¯InnoDBè·³å‡ºä¼ ç»Ÿé”æœºåˆ¶æ¡†æ¶ï¼Œä¸ºè¯»å¤šå†™å°‘åœºæ™¯æ‰“é€ çš„ç‹¬ç«‹å¹¶å‘æ§åˆ¶ä½“ç³»ï¼Œæ˜¯æ•°æ®åº“é«˜æ€§èƒ½çš„æ ¸å¿ƒåŸºçŸ³ã€‚</p>
<h3 data-id="heading-49">2. MVCCæ ¸å¿ƒç»„ä»¶è®°å¿†å£è¯€</h3>
<ul>
<li>éšè—å­—æ®µï¼šç»™æ•°æ®æ‰“ç‰ˆæœ¬æ ‡ç­¾ï¼Œè®°å½•ä¿®æ”¹äº‹åŠ¡ä¸å†å²æŒ‡é’ˆï¼›</li>
<li>Undo Logï¼šå­˜æ•°æ®å†å²ç‰ˆæœ¬ï¼Œæ”¯æ’‘å›æ»šä¸å¿«ç…§è¯»ï¼›</li>
<li>Read Viewï¼šåšå¯è§æ€§è£åˆ¤ï¼Œä¸ºäº‹åŠ¡åˆ’å®šæ•°æ®å¯è§èŒƒå›´ï¼›</li>
<li>ä¸‰å¤§ç»„ä»¶é…åˆï¼šç‰ˆæœ¬æ‰“æ ‡â†’å†å²å­˜å‚¨â†’å¯è§æ€§åˆ¤æ–­ï¼Œå®ç°å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚</li>
</ul>
<h3 data-id="heading-50">3. æœ€ä½³å®è·µï¼šè®©MVCCå‘æŒ¥æœ€å¤§ä»·å€¼</h3>
<ol>
<li>ä½¿ç”¨é»˜è®¤çš„å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ï¼šå…¼é¡¾ä¸€è‡´æ€§ä¸å¹¶å‘æ€§èƒ½ï¼ŒInnoDBé€šè¿‡é—´éš™é”é¢å¤–é˜²æ­¢å¹»è¯»ï¼Œæ»¡è¶³ç»å¤§å¤šæ•°ä¸šåŠ¡éœ€æ±‚ã€‚</li>
<li>ä¸¥æ ¼é¿å…é•¿äº‹åŠ¡ï¼šåŠæ—¶æäº¤/å›æ»šäº‹åŠ¡ï¼Œé‡Šæ”¾Read Viewå¯¹Undo Logçš„ä¾èµ–ï¼Œè®©å¼•æ“èƒ½åŠæ—¶æ¸…ç†æ—§æ—¥å¿—ï¼Œé¿å…ç©ºé—´è†¨èƒ€ä¸æ€§èƒ½ä¸‹é™ã€‚</li>
<li>åŒºåˆ†å¿«ç…§è¯»ä¸å½“å‰è¯»ï¼šæ™®é€šæŸ¥è¯¢ä½¿ç”¨å¿«ç…§è¯»è¿½æ±‚æ€§èƒ½ï¼Œéœ€è¦æœ€æ–°æ•°æ®/åŸå­æ“ä½œæ—¶ä½¿ç”¨å½“å‰è¯»ï¼ˆFOR UPDATEï¼‰ã€‚</li>
<li>ä¼˜åŒ–å†™æ“ä½œï¼šå†™æ“ä½œé¢‘ç¹çš„è¡¨ï¼Œå¯é€‚å½“è°ƒæ•´ç´¢å¼•ï¼Œå‡å°‘è¡Œé”çš„ç²’åº¦ï¼Œé™ä½å†™æ“ä½œä¹‹é—´çš„é˜»å¡ï¼Œé…åˆMVCCæå‡æ•´ä½“æ€§èƒ½ã€‚</li>
<li>ç›‘æ§Undo LogçŠ¶æ€ï¼šå…³æ³¨å›æ»šæ®µçš„ä½¿ç”¨æƒ…å†µï¼ŒåŠæ—¶æ¸…ç†æ— æ•ˆçš„Undo Logï¼Œé¿å…ç£ç›˜ç©ºé—´è¢«è¿‡åº¦å ç”¨ã€‚</li>
</ol>
<p>MVCCæ˜¯InnoDBå­˜å‚¨å¼•æ“çš„<strong>ç²¾é«“</strong>ï¼Œä¹Ÿæ˜¯åç«¯å¼€å‘å¿…é¡»åƒé€çš„æ•°æ®åº“<strong>æ ¸å¿ƒæŠ€æœ¯</strong>â€”â€”ç†è§£MVCCï¼Œä¸ä»…èƒ½è®©ä½ åœ¨é«˜å¹¶å‘ä¸šåŠ¡è®¾è®¡ä¸­åšå‡ºæ›´åˆç†çš„æŠ€æœ¯é€‰æ‹©ï¼Œè¿˜èƒ½å¸®åŠ©ä½ å¿«é€Ÿå®šä½æ•°æ®åº“æ€§èƒ½é—®é¢˜ã€‚</p>
<p>å…¶æ ¸å¿ƒè®¾è®¡æ€æƒ³å€¼å¾—æˆ‘ä»¬å€Ÿé‰´ï¼šé¢å¯¹å¹¶å‘é—®é¢˜ï¼Œå¹¶éåªæœ‰â€œé”â€è¿™ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åˆç†çš„ç‰ˆæœ¬æ§åˆ¶ä¸å¯è§æ€§åˆ¤æ–­ï¼Œä»æ ¹æœ¬ä¸Šå‡å°‘å†²çªç‚¹ï¼Œå¾€å¾€èƒ½å®ç°æ›´ä¼˜çš„æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3çš„v-modelå¦‚ä½•å®ç°è¡¨å•åŒå‘ç»‘å®šï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595864836360798260</link>    <guid>https://juejin.cn/post/7595864836360798260</guid>    <pubDate>2026-01-17T11:05:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595864836360798260" data-draft-id="7595896809651830824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3çš„v-modelå¦‚ä½•å®ç°è¡¨å•åŒå‘ç»‘å®šï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Trae"/> <meta itemprop="datePublished" content="2026-01-17T11:05:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="kknone"/> <meta itemprop="url" content="https://juejin.cn/user/1366025597879930"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3çš„v-modelå¦‚ä½•å®ç°è¡¨å•åŒå‘ç»‘å®šï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1366025597879930/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    kknone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:05:23.000Z" title="Sat Jan 17 2026 11:05:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦è¡¨å•è¾“å…¥ç»‘å®šï¼Ÿ</h3>
<p>ä½ æœ‰æ²¡æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Ÿåšç™»å½•é¡µæ—¶ï¼Œæƒ³è®©ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå®æ—¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼›æˆ–è€…åšè®¾ç½®é¡µæ—¶ï¼Œä¿®æ”¹å¼€å…³æŒ‰é’®çš„çŠ¶æ€è¦åŒæ­¥åˆ°åå°æ•°æ®ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæ‰‹åŠ¨ç›‘å¬æ¯ä¸ªè¾“å…¥æ¡†çš„äº‹ä»¶ã€æ‰‹åŠ¨æ›´æ–°æ•°æ®ï¼Œä»£ç ä¼šå˜å¾—éå¸¸ç¹çâ€”â€”æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">oninput</span>=<span class="hljs-string">"updateUsername(event)"</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateUsername</span>(<span class="hljs-params">e</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">username</span> = e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>;
}
</code></pre>
<p>ä¸ä»…è¦å†™ä¸€å †äº‹ä»¶ç›‘å¬ï¼Œè¿˜è¦å¤„ç†ä¸åŒè¡¨å•å…ƒç´ çš„å·®å¼‚ï¼ˆæ¯”å¦‚å¤é€‰æ¡†çš„<code>checked</code>å±æ€§ã€ä¸‹æ‹‰æ¡†çš„<code>selected</code>å±æ€§ï¼‰ã€‚è€ŒVue3çš„<strong>è¡¨å•è¾“å…¥ç»‘å®š</strong>å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å®ƒå¸®ä½ æŠŠâ€œè¾“å…¥â†’æ•°æ®â†’è§†å›¾â€çš„åŒæ­¥é€»è¾‘å°è£…æˆäº†ä¸€ä¸ªç®€å•çš„æŒ‡ä»¤ï¼š<code>v-model</code>ã€‚</p>
<h3 data-id="heading-1">äºŒã€åŒå‘ç»‘å®šï¼šVue3çš„â€œæ•°æ®-è§†å›¾â€åŒæ­¥é­”æ³•</h3>
<p>åœ¨è®²<code>v-model</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆææ‡‚<strong>åŒå‘ç»‘å®š</strong>çš„æ ¸å¿ƒé€»è¾‘ã€‚ç®€å•æ¥è¯´ï¼ŒåŒå‘ç»‘å®šå°±æ˜¯ï¼š</p>
<ul>
<li>å½“ç”¨æˆ·ä¿®æ”¹è§†å›¾ï¼ˆæ¯”å¦‚è¾“å…¥æ–‡å­—ã€ç‚¹å‡»å¤é€‰æ¡†ï¼‰ï¼Œæ•°æ®è‡ªåŠ¨æ›´æ–°ï¼›</li>
<li>å½“ä»£ç ä¿®æ”¹æ•°æ®ï¼ˆæ¯”å¦‚<code>this.username = 'admin'</code>ï¼‰ï¼Œè§†å›¾è‡ªåŠ¨åŒæ­¥ã€‚</li>
</ul>
<h4 data-id="heading-2">åŒå‘ç»‘å®šçš„åŸç†æµç¨‹å›¾</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
A[ç”¨æˆ·ä¿®æ”¹è§†å›¾ è¾“å…¥/ç‚¹å‡»] --&gt; B[è§¦å‘å¯¹åº”äº‹ä»¶ input/change]
B --&gt; C[æ›´æ–°æ•°æ®å¦‚username è¾“å…¥å†…å®¹]
C --&gt; D[Vueå“åº”å¼ç³»ç»Ÿæ£€æµ‹åˆ°æ•°æ®å˜åŒ–]
D --&gt; E[è‡ªåŠ¨æ›´æ–°è§†å›¾æ˜¾ç¤º]
</code></pre>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå½“ä½ åœ¨è¾“å…¥æ¡†é‡Œæ•²â€œhelloâ€ï¼ŒVueä¼šåšè¿™å‡ ä»¶äº‹ï¼š</p>
<ol>
<li>ç›‘å¬è¾“å…¥æ¡†çš„<code>input</code>äº‹ä»¶ï¼Œæ‹¿åˆ°ä½ è¾“å…¥çš„â€œhelloâ€ï¼›</li>
<li>æŠŠ<code>username</code>æ•°æ®æ›´æ–°ä¸ºâ€œhelloâ€ï¼›</li>
<li>å“åº”å¼ç³»ç»Ÿå‘ç°<code>username</code>å˜äº†ï¼Œç«‹åˆ»é€šçŸ¥è¾“å…¥æ¡†æ˜¾ç¤ºâ€œhelloâ€ã€‚</li>
</ol>
<h3 data-id="heading-3">ä¸‰ã€v-modelæŒ‡ä»¤ï¼šåŒå‘ç»‘å®šçš„è¯­æ³•ç³–</h3>
<p>Vue3ä¸ºåŒå‘ç»‘å®šæä¾›äº†<strong>è¯­æ³•ç³–</strong>â€”â€”<code>v-model</code>ï¼Œå®ƒæŠŠâ€œç»‘å®švalue+ç›‘å¬äº‹ä»¶â€çš„é€»è¾‘å°è£…æˆäº†ä¸€ä¸ªæŒ‡ä»¤ã€‚æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span>&gt;</span>
</code></pre>
<p>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"username"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"username = $event.target.value"</span>&gt;</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯ç®€æ´å¤šäº†ï¼Ÿ<code>v-model</code>å¸®ä½ çœæ‰äº†æ‰‹åŠ¨å†™äº‹ä»¶ç›‘å¬çš„éº»çƒ¦ï¼Œè€Œä¸”é€‚ç”¨äºæ‰€æœ‰è¡¨å•å…ƒç´ ã€‚</p>
<h3 data-id="heading-4">å››ã€v-modelåœ¨ä¸åŒè¡¨å•å…ƒç´ ä¸­çš„åº”ç”¨</h3>
<p><code>v-model</code>ä¸æ˜¯åªèƒ½ç”¨åœ¨æ–‡æœ¬è¾“å…¥æ¡†ï¼Œå®ƒæ”¯æŒæ‰€æœ‰å¸¸è§çš„è¡¨å•å…ƒç´ ï¼Œæˆ‘ä»¬é€ä¸ªçœ‹ï¼š</p>
<h4 data-id="heading-5">1. æ–‡æœ¬è¾“å…¥æ¡†ï¼ˆinput[type="text"]ï¼‰ä¸å¤šè¡Œæ–‡æœ¬ï¼ˆtextareaï¼‰</h4>
<ul>
<li>æ–‡æœ¬è¾“å…¥æ¡†ï¼šç›´æ¥ç»‘å®šå­—ç¬¦ä¸²ç±»å‹çš„å“åº”å¼æ•°æ®ï¼›</li>
<li>å¤šè¡Œæ–‡æœ¬ï¼ˆtextareaï¼‰ï¼š<strong>ä¸èƒ½ç”¨æ’å€¼è¡¨è¾¾å¼</strong>ï¼ˆ<code>{{ message }}</code>ï¼‰ï¼Œå¿…é¡»ç”¨<code>v-model</code>ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> username = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>) <span class="hljs-comment">// å­—ç¬¦ä¸²ç±»å‹</span>
<span class="hljs-keyword">const</span> intro = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)    <span class="hljs-comment">// å¤šè¡Œæ–‡æœ¬å†…å®¹</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"username"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>ä¸ªäººç®€ä»‹ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"intro"</span> <span class="hljs-attr">rows</span>=<span class="hljs-string">"3"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">2. å¤é€‰æ¡†ï¼ˆinput[type="checkbox"]ï¼‰</h4>
<p>å¤é€‰æ¡†åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li><strong>å•ä¸ªå¤é€‰æ¡†</strong>ï¼šç»‘å®šå¸ƒå°”å€¼ï¼ˆ<code>true/false</code>ï¼‰ï¼Œè¡¨ç¤ºâ€œæ˜¯å¦é€‰ä¸­â€ï¼›</li>
<li><strong>å¤šä¸ªå¤é€‰æ¡†</strong>ï¼šç»‘å®š<strong>æ•°ç»„</strong>ï¼Œæ•°ç»„å…ƒç´ æ˜¯é€‰ä¸­çš„<code>value</code>å€¼ã€‚</li>
</ul>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> rememberMe = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>) <span class="hljs-comment">// å•ä¸ªå¤é€‰æ¡†ï¼ˆå¸ƒå°”å€¼ï¼‰</span>
<span class="hljs-keyword">const</span> hobbies = <span class="hljs-title function_">ref</span>([])       <span class="hljs-comment">// å¤šä¸ªå¤é€‰æ¡†ï¼ˆæ•°ç»„ï¼‰</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å•ä¸ªå¤é€‰æ¡†ï¼šè®°ä½æˆ‘ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"rememberMe"</span>&gt;</span> è®°ä½æˆ‘<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¤šä¸ªå¤é€‰æ¡†ï¼šçˆ±å¥½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"reading"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> é˜…è¯»<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sports"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> è¿åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"coding"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> ç¼–ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-7">3. å•é€‰æŒ‰é’®ï¼ˆinput[type="radio"]ï¼‰</h4>
<p>å•é€‰æŒ‰é’®ç»‘å®š<strong>å­—ç¬¦ä¸²</strong>ï¼Œå€¼ä¸ºé€‰ä¸­çš„<code>value</code>å±æ€§ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> gender = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'male'</span>) <span class="hljs-comment">// é»˜è®¤é€‰ä¸­â€œç”·â€</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"male"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"gender"</span>&gt;</span> ç”·<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"female"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"gender"</span>&gt;</span> å¥³<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h4 data-id="heading-8">4. ä¸‹æ‹‰æ¡†ï¼ˆselectï¼‰</h4>
<p>ä¸‹æ‹‰æ¡†çš„<code>v-model</code>ç»‘å®šé€‰ä¸­çš„<code>value</code>å€¼ï¼Œ<code>option</code>çš„<code>value</code>å±æ€§å¯¹åº”é€‰é¡¹å€¼ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> city = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'beijing'</span>) <span class="hljs-comment">// é»˜è®¤é€‰ä¸­â€œåŒ—äº¬â€</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>åŸå¸‚ï¼š
      <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"city"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"beijing"</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shanghai"</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"guangzhou"</span>&gt;</span>å¹¿å·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">äº”ã€æ•°æ®å“åº”å¼ï¼šåŒå‘ç»‘å®šçš„åº•å±‚æ”¯æ’‘</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šâ€œä¸ºä»€ä¹ˆæ•°æ®å˜äº†ï¼Œè§†å›¾ä¼šè‡ªåŠ¨æ›´æ–°ï¼Ÿâ€è¿™è¦å½’åŠŸäºVue3çš„<strong>å“åº”å¼ç³»ç»Ÿ</strong>ã€‚</p>
<details>
<summary>å¾€æœŸæ–‡ç« å½’æ¡£</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa5c224e347f70fd63a2d8eeea20041df%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a5c224e347f70fd63a2d8eeea20041df/" ref="nofollow noopener noreferrer">Vue3ä¸­å¦‚ä½•é€šè¿‡äº‹ä»¶ç¼“å­˜ä¸é˜²æŠ–èŠ‚æµä¼˜åŒ–é«˜é¢‘äº‹ä»¶æ€§èƒ½ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fad67c4eb6d76cf7707bdfe6a8146c34f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ad67c4eb6d76cf7707bdfe6a8146c34f/" ref="nofollow noopener noreferrer">Vue3è·¨ç»„ä»¶é€šä¿¡ä¸­ï¼Œå…¨å±€äº‹ä»¶æ€»çº¿ä¸provide/injectè¯¥å¦‚ä½•æ­£ç¡®é€‰æ‹©ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1c1e80d697cca0923f29ec70ebb8ccd1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1c1e80d697cca0923f29ec70ebb8ccd1/" ref="nofollow noopener noreferrer">Vue3è¡¨å•äº‹ä»¶å¤„ç†ï¼šv-modelå¦‚ä½•å®ç°æ•°æ®ç»‘å®šã€éªŒè¯ä¸æäº¤ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb990828143d70aa87f9aa52e16692e48%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b990828143d70aa87f9aa52e16692e48/" ref="nofollow noopener noreferrer">Vueåº”ç”¨å¦‚ä½•åŸºäºDOMäº‹ä»¶ä¼ æ’­æœºåˆ¶ä¸äº‹ä»¶ä¿®é¥°ç¬¦å®ç°é«˜æ•ˆäº‹ä»¶å¤„ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb44316e0866e9f2e6aef927dbcf5152b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b44316e0866e9f2e6aef927dbcf5152b/" ref="nofollow noopener noreferrer">Vue3ä¸­å¦‚ä½•åœ¨è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°æ—¶åŒæ—¶ä¼ é€’è‡ªå®šä¹‰å‚æ•°å’ŒåŸç”ŸDOMäº‹ä»¶ï¼Ÿå‚æ•°é¡ºåºæœ‰å“ªäº›æ³¨æ„äº‹é¡¹ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F021636c2a06f5e2d3d01977a12ddf559%2F" target="_blank" title="https://blog.cmdragon.cn/posts/021636c2a06f5e2d3d01977a12ddf559/" ref="nofollow noopener noreferrer">ä»æ•è·åˆ°å†’æ³¡ï¼šVueäº‹ä»¶ä¿®é¥°ç¬¦å¦‚ä½•é‡å¡‘äº‹ä»¶æ‰§è¡Œé¡ºåºï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb3cddf7023ab537e623a61bc01dab6bb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b3cddf7023ab537e623a61bc01dab6bb/" ref="nofollow noopener noreferrer">Vueäº‹ä»¶å¤„ç†ï¼šå†…è”è¿˜æ˜¯æ–¹æ³•äº‹ä»¶å¤„ç†å™¨ï¼Œè¯¥å¦‚ä½•æŠ‰æ‹©ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd4d9607ce1bc34cc3bda0a1a46c40f6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd4d9607ce1bc34cc3bda0a1a46c40f6/" ref="nofollow noopener noreferrer">Vueäº‹ä»¶ç»‘å®šä¸­v-onä¸@è¯­æ³•å¦‚ä½•å–èˆï¼Ÿå‚æ•°ä¼ é€’ä¸åŸç”Ÿäº‹ä»¶å¤„ç†æœ‰å“ªäº›å®æˆ˜æŠ€å·§ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa5f2bacb74476fd7f5e02bb3f1ba6b2b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a5f2bacb74476fd7f5e02bb3f1ba6b2b/" ref="nofollow noopener noreferrer">Vue 3ä¸­åˆ—è¡¨æ’åºæ—¶ä¸ºä½•å¿…é¡»å¤åˆ¶æ•°ç»„è€Œéç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd3b06b57fb7f126787e6ed22dce1e341%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d3b06b57fb7f126787e6ed22dce1e341/" ref="nofollow noopener noreferrer">Vueè™šæ‹Ÿæ»šåŠ¨å¦‚ä½•å°†åˆ—è¡¨DOMæ•°é‡ä»ä¸‡çº§é™è‡³åä½æ•°ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F3100cc5a2e16f8dac36f722594e6af32%2F" target="_blank" title="https://blog.cmdragon.cn/posts/3100cc5a2e16f8dac36f722594e6af32/" ref="nofollow noopener noreferrer">Vue3ä¸­v-ifä¸v-forç›´æ¥æ··ç”¨ä¸ºä½•ä¼šæŠ¥é”™ï¼Ÿè®¡ç®—å±æ€§å¦‚ä½•è§£å†³ä¼˜å…ˆçº§å†²çªï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F455dc2d47c38d12c1cf350e490041e8b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/455dc2d47c38d12c1cf350e490041e8b/" ref="nofollow noopener noreferrer">ä¸ºä½•åœ¨Vue3é€’å½’ç»„ä»¶ä¸­å¿…é¡»ç”¨v-ifåˆ¤æ–­å­é¡¹å­˜åœ¨ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F3f842bbd7ba0f9c91151b983bf784c8b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/3f842bbd7ba0f9c91151b983bf784c8b/" ref="nofollow noopener noreferrer">Vue3åˆ—è¡¨æ¸²æŸ“ä¸­ï¼Œå¦‚ä½•ç”¨æ•°ç»„æ–¹æ³•ä¸è®¡ç®—å±æ€§ä¼˜åŒ–v-forçš„æ•°æ®å¤„ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1eb3ffac668a743843b5ea1738301d40%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1eb3ffac668a743843b5ea1738301d40/" ref="nofollow noopener noreferrer">Vue v-forçš„keyï¼šä¸ºä»€ä¹ˆå®ƒèƒ½è§£å†³åˆ—è¡¨æ¸²æŸ“ä¸­çš„â€œç„å­¦é”™è¯¯â€ï¼Ÿé€‰é”™ä¼šæœ‰å“ªäº›åæœï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F138b13c5341f6a1fa9015400433a3611%2F" target="_blank" title="https://blog.cmdragon.cn/posts/138b13c5341f6a1fa9015400433a3611/" ref="nofollow noopener noreferrer">Vue3ä¸­v-forä¸v-ifä¸ºä½•ä¸èƒ½ç›´æ¥å…±å­˜äºåŒä¸€å…ƒç´ ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0242a94dc552b93a1bc335ac4fc33db5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0242a94dc552b93a1bc335ac4fc33db5/" ref="nofollow noopener noreferrer">Vue3ä¸­v-ifä¸v-showçš„æœ¬è´¨åŒºåˆ«åŠåŠ¨æ€ç»„ä»¶çŠ¶æ€ä¿æŒçš„å…³é”®ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F97c66a18ae0e9b57c6a69b8b3a41ddf6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/97c66a18ae0e9b57c6a69b8b3a41ddf6/" ref="nofollow noopener noreferrer">Vue3ä¸­v-showå¦‚ä½•é€šè¿‡CSSä¿®æ”¹displayå±æ€§æ§åˆ¶æ¡ä»¶æ˜¾ç¤ºï¼Ÿä¸v-ifçš„åº”ç”¨åœºæ™¯è¯¥å¦‚ä½•åŒºåˆ†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F8a1ddfac64b25062ac56403e4c1201d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/8a1ddfac64b25062ac56403e4c1201d2/" ref="nofollow noopener noreferrer">Vue3æ¡ä»¶æ¸²æŸ“ä¸­v-ifç³»åˆ—æŒ‡ä»¤å¦‚ä½•åˆç†ä½¿ç”¨ä¸è§„é¿é”™è¯¯ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F218c3a59282c3b757447ee08a01937bb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/218c3a59282c3b757447ee08a01937bb/" ref="nofollow noopener noreferrer">Vue3åŠ¨æ€æ ·å¼æ§åˆ¶ï¼šrefã€reactiveã€watchä¸computedçš„åº”ç”¨åœºæ™¯ä¸åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1bab953e41f66ac53de099fa9fe76483%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1bab953e41f66ac53de099fa9fe76483/" ref="nofollow noopener noreferrer">Vue3ä¸­åŠ¨æ€æ ·å¼æ•°ç»„çš„åé¡¹è¦†ç›–è§„åˆ™å¦‚ä½•ä¸è®¡ç®—å±æ€§ç»“åˆå®ç°å¤æ‚çŠ¶æ€æ ·å¼ç®¡ç†ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc85e1fe16a7ae45e965b4e2df4d9d2f4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c85e1fe16a7ae45e965b4e2df4d9d2f4/" ref="nofollow noopener noreferrer">Vueæµ…å“åº”å¼å¦‚ä½•è§£å†³æ·±å±‚å“åº”å¼çš„æ€§èƒ½é—®é¢˜ï¼Ÿé€‚ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbe04b02d2723994632de0d4ca22a3391%2F" target="_blank" title="https://blog.cmdragon.cn/posts/be04b02d2723994632de0d4ca22a3391/" ref="nofollow noopener noreferrer">Vue 3ç»„åˆå¼APIä¸­refä¸reactiveçš„æ ¸å¿ƒå“åº”å¼å·®å¼‚åŠä½¿ç”¨æœ€ä½³å®è·µæ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa0af08dd60a37b9a890a9957f2cbfc9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a0af08dd60a37b9a890a9957f2cbfc9f/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿä¸­ï¼Œå¯¹è±¡æ–°å¢å±æ€§ã€æ•°ç»„æ”¹ç´¢å¼•ã€åŸå§‹å€¼ä»£ç†çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbc287e1e36287afd90750fd907eca85e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bc287e1e36287afd90750fd907eca85e/" ref="nofollow noopener noreferrer">Vue 3ä¸­watchä¾¦å¬å™¨çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ä½ æŒæ¡äº†å—ï¼Ÿæ·±åº¦ç›‘å¬ã€ä¸watchEffectçš„å·®å¼‚åŠå¸¸è§æŠ¥é”™è§£æ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F654b9447ef1ba7ec1126a1bc26a4726d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/654b9447ef1ba7ec1126a1bc26a4726d/" ref="nofollow noopener noreferrer">Vueå“åº”å¼å£°æ˜çš„APIå·®å¼‚ã€åº•å±‚åŸç†ä¸å¸¸è§é™·é˜±ä½ éƒ½ææ‡‚äº†å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc405a8d9950af5b7c63b56c348ac36b6%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c405a8d9950af5b7c63b56c348ac36b6/" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆVue 3éœ€è¦refå‡½æ•°ï¼Ÿå®ƒçš„å“åº”å¼åŸç†ä¸æ­£ç¡®ç”¨æ³•æ˜¯ä»€ä¹ˆï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa7e9abb9691a81e4404d9facabe0f7c3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a7e9abb9691a81e4404d9facabe0f7c3/" ref="nofollow noopener noreferrer">Vue 3ä¸­reactiveå‡½æ•°å¦‚ä½•é€šè¿‡Proxyå®ç°å“åº”å¼ï¼Ÿä½¿ç”¨æ—¶è¦é¿å¼€å“ªäº›è¯¯åŒºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbd995ea45161727597fb85b62566c43d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bd995ea45161727597fb85b62566c43d/" ref="nofollow noopener noreferrer">Vue3å“åº”å¼ç³»ç»Ÿçš„åº•å±‚åŸç†ä¸å®è·µè¦ç‚¹ä½ çœŸçš„æ‡‚å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F53e3f270a80675df662c6857a3332c0f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/53e3f270a80675df662c6857a3332c0f/" ref="nofollow noopener noreferrer">Vue 3æ¨¡æ¿å¦‚ä½•é€šè¿‡ç¼–è¯‘ä¸‰é˜¶æ®µå®ç°ä»å£°æ˜å¼è¯­æ³•åˆ°é«˜æ•ˆæ¸²æŸ“çš„è·¨è¶Š - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fddbce4f2a23aa72c96b1c0473900321e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ddbce4f2a23aa72c96b1c0473900321e/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿å¼•ç”¨ï¼šä»æ”¶DOMâ€œå¿«é€’â€åˆ°è°ƒå­ç»„ä»¶æ–¹æ³•ï¼Œä½ ç©æ˜ç™½äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F23a2d5a334e15575277814c16e45df50%2F" target="_blank" title="https://blog.cmdragon.cn/posts/23a2d5a334e15575277814c16e45df50/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueæ¨¡æ¿é‡Œçš„JSè¡¨è¾¾å¼æœ‰å•¥ä¸èƒ½ç¢°ï¼Ÿè®¡ç®—å±æ€§ä¸ºå•¥æ¯”æ–¹æ³•æ›´èƒ½æ‰“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6be38de6382e31d282659b689c5b17f0%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6be38de6382e31d282659b689c5b17f0/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vueçš„v-modelè¡¨å•ç»‘å®šï¼šè¯­æ³•ç³–ã€åŠ¨æ€å€¼ã€ä¿®é¥°ç¬¦çš„å°æŠ€å·§ä½ éƒ½æŒæ¡äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F60ce517684f4a418f453d66aa805606c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/60ce517684f4a418f453d66aa805606c/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3äº‹ä»¶å¤„ç†çš„æŒ‘æˆ˜é¢˜ï¼šv-onã€ä¿®é¥°ç¬¦ã€è‡ªå®šä¹‰äº‹ä»¶ä½ èƒ½é€šå…³å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe4ae7d5e4a9205bb11b2baccb230c637%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e4ae7d5e4a9205bb11b2baccb230c637/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3çš„v-æŒ‡ä»¤ï¼šæ•°æ®å’ŒDOMçš„â€œç¿»è¯‘å®˜â€åˆ°åº•æœ‰å¤šå°‘æœ¬äº‹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F999ce4fb32259ff4fbf4bf7bcb851654%2F" target="_blank" title="https://blog.cmdragon.cn/posts/999ce4fb32259ff4fbf4bf7bcb851654/" ref="nofollow noopener noreferrer">å¿«é€Ÿå…¥é—¨Vue3ï¼Œæ’å€¼ã€åŠ¨æ€ç»‘å®šå’Œé¿å‘æŠ€å·§ä½ éƒ½ææ‡‚äº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fa6997d81b49cd232b87e1cf603888ad1%2F" target="_blank" title="https://blog.cmdragon.cn/posts/a6997d81b49cd232b87e1cf603888ad1/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLå¿«åˆ°é£èµ·ï¼Ÿå…ˆæ‰¾å¥åº·å¯†ç è¿˜æ˜¯å…ˆæ¢å¼•æ“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F1fee7afbb9abd4540b8aa9c141d6845d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/1fee7afbb9abd4540b8aa9c141d6845d/" ref="nofollow noopener noreferrer">æƒ³è®©PostgreSQLæŸ¥è¯¢å¿«åˆ°é£èµ·ï¼Ÿåˆ†åŒºè¡¨ã€ç‰©åŒ–è§†å›¾ã€å¹¶è¡ŒæŸ¥è¯¢è¿™ä¸‰æ‹›çµä¸çµï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F79c590fbd87ece535b11a71c9667884f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/79c590fbd87ece535b11a71c9667884f/" ref="nofollow noopener noreferrer">å­æŸ¥è¯¢æ€»æ‹–æ…¢æŸ¥è¯¢ï¼ŸæŠŠå®ƒå˜æˆè¿æ¥å°±èƒ½è§£å†³ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F748cdac2536008199abf8a8a2cd0ec85%2F" target="_blank" title="https://blog.cmdragon.cn/posts/748cdac2536008199abf8a8a2cd0ec85/" ref="nofollow noopener noreferrer">PostgreSQLå…¨è¡¨æ‰«ææ…¢åˆ°å´©æºƒï¼Ÿå»ºç´¢å¼•+æ”¹æŸ¥è¯¢+æ›´ç»Ÿè®¡ä¿¡æ¯ä¸‰æ‹›èƒ½ç ´ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F32ca943703226d317d4276a8fb53b0dd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/32ca943703226d317d4276a8fb53b0dd/" ref="nofollow noopener noreferrer">å¤æ‚æŸ¥è¯¢æ€»æ‹–åè…¿ï¼ŸPostgreSQLå¤šåˆ—ç´¢å¼•+è¦†ç›–ç´¢å¼•çš„ç¥ä»™æŠ€å·§ä½ getæ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fca93f1d53aa910e7ba5ffd8df611c12b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ca93f1d53aa910e7ba5ffd8df611c12b/" ref="nofollow noopener noreferrer">åªç»™è¡¨å­é›†å»ºç´¢å¼•ï¼Ÿç”¨å‡½æ•°ç»“æœå»ºç´¢å¼•ï¼ŸPostgreSQLè¿™ä¿©æ“ä½œå‡­å•¥èƒ½çœç©ºé—´åˆåŠ é€Ÿï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Ff507856ebfddd592448813c510a53669%2F" target="_blank" title="https://blog.cmdragon.cn/posts/f507856ebfddd592448813c510a53669/" ref="nofollow noopener noreferrer">B-treeç´¢å¼•åƒå­—å…¸æŸ¥è¯ä¸€æ ·å·¥ä½œï¼Ÿé‚£å“ªäº›æ•°æ®åº“æŸ¥è¯¢å®ƒèƒ½åŠ é€Ÿï¼Œå“ªäº›ä¸èƒ½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb2213bfcb5b88a862f2138404c03d596%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b2213bfcb5b88a862f2138404c03d596/" ref="nofollow noopener noreferrer">æƒ³æŠ“PostgreSQLé‡Œçš„æ…¢SQLï¼Ÿpg_stat_statementsåŸºç¡€é»‘åŒ£å­å’Œpg_stat_monitoræ—¶é—´çª—ï¼Œè°èƒ½å¸®ä½ æ›´å‡†æªå‡ºæ€§èƒ½å°å·ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F26614eb7da6c476dde41d367ad888d2f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/26614eb7da6c476dde41d367ad888d2f/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œæ—¶å…‰æœºâ€MVCCå’Œé”æœºåˆ¶æ˜¯æ€ä¹ˆæå®šé«˜å¹¶å‘çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F69f99bc6972a860d559c74aad7280da4%2F" target="_blank" title="https://blog.cmdragon.cn/posts/69f99bc6972a860d559c74aad7280da4/" ref="nofollow noopener noreferrer">PostgreSQLæ€§èƒ½æš´æ¶¨çš„å…³é”®ï¼Ÿå†…å­˜IOå¹¶å‘å‚æ•°å±…ç„¶è¦è¿™ä¹ˆè®¾ç½®ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F7b7053f392147a8b3b1a16bebeb08d0a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/7b7053f392147a8b3b1a16bebeb08d0a/" ref="nofollow noopener noreferrer">å¤§è¡¨æŸ¥è¯¢æ…¢åˆ°ç¿»éæ•´ä¸ªä¹¦æ¶ï¼ŸPostgreSQLåˆ†åŒºè¡¨æ•™ä½ æ€ä¹ˆâ€œåˆ†ç±»â€æ‰é«˜æ•ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc856e3cb073822349f3bf2d29995dcfc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c856e3cb073822349f3bf2d29995dcfc/" ref="nofollow noopener noreferrer">PostgreSQL æŸ¥è¯¢æ…¢ï¼Ÿæ˜¯ä¸æ˜¯å¿˜äº†ä¼˜åŒ– GROUP BYã€ORDER BY å’Œçª—å£å‡½æ•°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fc096347d18e67b7431faacd2c4757093%2F" target="_blank" title="https://blog.cmdragon.cn/posts/c096347d18e67b7431faacd2c4757093/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„å­æŸ¥è¯¢å’ŒCTEå±…ç„¶åœ¨æ€§èƒ½ä¸Šâ€œææ¶â€ï¼Ÿåˆ°åº•è¯¥ç«™å“ªè¾¹ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F2eca89463454fd4250d7b66243b9fe5a%2F" target="_blank" title="https://blog.cmdragon.cn/posts/2eca89463454fd4250d7b66243b9fe5a/" ref="nofollow noopener noreferrer">PostgreSQLé€‰Joinç­–ç•¥æœ‰å•¥å°ä¹ä¹ï¼ŸNested Loop/Merge/Hashè°æ˜¯å®ƒçš„èœï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F068ecb772a87d7df20a8c9fb4b233f8e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/068ecb772a87d7df20a8c9fb4b233f8e/" ref="nofollow noopener noreferrer">PostgreSQLæ–°æ‰‹SQLæ€»ç¿»è½¦ï¼Ÿè¿™7ä¸ªæ€§èƒ½é™·é˜±ä½ è¸©è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd498f63cd0a2d5a77e445c688a8b88db%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d498f63cd0a2d5a77e445c688a8b88db/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•é€‰B-Treeè¿˜æ˜¯GiSTï¼Ÿâ€œç‘å£«å†›åˆ€â€å’Œâ€œå¤šé¢æ‰‹â€çš„å·®åˆ«ä½ å±…ç„¶è¿˜ä¸çŸ¥é“ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F9101b75bdec6faea9b35d54f14e37f36%2F" target="_blank" title="https://blog.cmdragon.cn/posts/9101b75bdec6faea9b35d54f14e37f36/" ref="nofollow noopener noreferrer">æƒ³çŸ¥é“æ•°æ®åº“æ€ä¹ˆç»™æŸ¥è¯¢â€œç®—æˆæœ¬é€‰è·¯çº¿â€ï¼ŸEXPLAINèƒ½å¸®ä½ çœ‹æ˜ç™½ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd527f8ebb6e3dae2c7dfe4c8d8979444%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d527f8ebb6e3dae2c7dfe4c8d8979444/" ref="nofollow noopener noreferrer">PostgreSQLå¤„ç†SQLå±…ç„¶åƒåšè›‹ç³•ï¼Ÿè§£æåˆ°æ‰§è¡Œçš„4æ­¥é‡Œè—ç€å¤šå°‘æŸ¥è¯¢ä¼˜åŒ–çš„å°å¿ƒæœºï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6bfdae84f313cf7ad0bb7045c4392347%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6bfdae84f313cf7ad0bb7045c4392347/" ref="nofollow noopener noreferrer">PostgreSQLå¤‡ä»½ä¸æ˜¯å¤åˆ¶æ–‡ä»¶ï¼Ÿç‰©ç†vsé€»è¾‘å’‹é€‰ï¼Ÿè¯¯åˆ è¿˜èƒ½ç²¾å‡†æ¢å¤åˆ°1åˆ†é’Ÿå‰ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fde3672803de34dbad244d0a8d48b0eb5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/de3672803de34dbad244d0a8d48b0eb5/" ref="nofollow noopener noreferrer">è½¬è´¦ä¸ç¿»è½¦ã€å¹¶å‘ä¸å¹²æ‰°ï¼ŒPostgreSQLçš„ACIDç‰¹æ€§åˆ°åº•æœ‰å•¥é­”æ³•ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fe463e8a2668abdf00a228c9b79324ded%2F" target="_blank" title="https://blog.cmdragon.cn/posts/e463e8a2668abdf00a228c9b79324ded/" ref="nofollow noopener noreferrer">é“¶è¡Œè½¬è´¦ä¸ç™½æ‰£é’±ã€ç”µå•†ä¸‹å•ä¸è¶…å–ï¼ŒPostgreSQLäº‹åŠ¡çš„è¯€çªæ˜¯å•¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F5c967e595058c4a1fc4474a68e64031d%2F" target="_blank" title="https://blog.cmdragon.cn/posts/5c967e595058c4a1fc4474a68e64031d/" ref="nofollow noopener noreferrer">PostgreSQLé‡Œçš„PL/pgSQLåˆ°åº•æ˜¯å•¥ï¼Ÿèƒ½è®©SQLä»â€œè¯´ç›®æ ‡â€å˜â€œè®²æ­¥éª¤â€ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F325047855e3e23b5ef82f7d2db134fbd%2F" target="_blank" title="https://blog.cmdragon.cn/posts/325047855e3e23b5ef82f7d2db134fbd/" ref="nofollow noopener noreferrer">PostgreSQLè§†å›¾ä¸å­˜æ•°æ®ï¼Ÿé‚£å®ƒæ€ä¹ˆç®€åŒ–æŸ¥è¯¢è¿˜èƒ½é€’å½’ç”Ÿæˆåºåˆ—å’Œæ§åˆ¶æƒé™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fd2dba50bb6e4df7b27e735245a06a2a2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/d2dba50bb6e4df7b27e735245a06a2a2/" ref="nofollow noopener noreferrer">PostgreSQLç´¢å¼•è¿™ä¹ˆç©ï¼Œæ‰èƒ½è®©ä½ çš„æŸ¥è¯¢çœŸçš„â€œé£â€èµ·æ¥ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F849ae5bab0f8c66e94c2f6ad1bb798e3%2F" target="_blank" title="https://blog.cmdragon.cn/posts/849ae5bab0f8c66e94c2f6ad1bb798e3/" ref="nofollow noopener noreferrer">PostgreSQLçš„è¡¨å…³ç³»å’Œçº¦æŸï¼Œå’‹å¸®ä½ æå®šç”¨æˆ·è®¢å•ä¸æ··ä¹±ã€å­¦ç”Ÿé€‰è¯¾ä¸é‡å¤ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fef4800975ffa84f1ca51976a70a1585b%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ef4800975ffa84f1ca51976a70a1585b/" ref="nofollow noopener noreferrer">PostgreSQLæŸ¥è¯¢çš„ç­›å­ã€æ’åºã€èšåˆã€åˆ†ç»„ï¼Ÿä½ ä¼šç”¨å®ƒä»¬æå®šæ•°æ®å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fbf54711525c507c5eacfa7b0151c39d2%2F" target="_blank" title="https://blog.cmdragon.cn/posts/bf54711525c507c5eacfa7b0151c39d2/" ref="nofollow noopener noreferrer">PostgreSQLæ•°æ®ç±»å‹æ€ä¹ˆé€‰æ‰é«˜æ•ˆä¸è¸©å‘ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F887809b3e0375f5956873cd442f516d8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/887809b3e0375f5956873cd442f516d8/" ref="nofollow noopener noreferrer">æƒ³è§£é”PostgreSQLæŸ¥è¯¢ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼Ÿä½ éƒ½getäº†å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F934be1203725e8be9d6f6e9104e5abcc%2F" target="_blank" title="https://blog.cmdragon.cn/posts/934be1203725e8be9d6f6e9104e5abcc/" ref="nofollow noopener noreferrer">PostgreSQL DELETEå±…ç„¶æœ‰è¿™äº›æ“ä½œï¼Ÿè¿”å›æ•°æ®ã€è¿è¡¨åˆ ä½ è¯•è¿‡æ²¡ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0f0622e9b7402b599e618150d0596ffe%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0f0622e9b7402b599e618150d0596ffe/" ref="nofollow noopener noreferrer">PostgreSQL UPDATEè¯­å¥æ€ä¹ˆç©ï¼Ÿä»æ”¹é‚®ç®±åˆ°æ‰¹é‡æ›´æ–°çš„é¿å‘æŠ€å·§ä½ éƒ½ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F0e3bf7efc030b024ea67ee855a00f2de%2F" target="_blank" title="https://blog.cmdragon.cn/posts/0e3bf7efc030b024ea67ee855a00f2de/" ref="nofollow noopener noreferrer">PostgreSQLæ’å…¥æ•°æ®è¿˜åœ¨é€æ¡æ•²ï¼Ÿæ‰¹é‡ã€å†²çªå¤„ç†ã€è¿”å›è‡ªå¢IDçš„æŠ€å·§ä½ ä¼šå—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb6cd3c86da6aac26ed829e472d34078e%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b6cd3c86da6aac26ed829e472d34078e/" ref="nofollow noopener noreferrer">PostgreSQLçš„â€œä»“åº“-æˆ¿é—´-è´§æ¶â€æ¸¸æˆï¼Œä½ èƒ½å»ºå‡ºç”µå•†æ•°æ®åº“å’Œè¡¨å—ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fba1f545a3410144552fbdbfcf31b5265%2F" target="_blank" title="https://blog.cmdragon.cn/posts/ba1f545a3410144552fbdbfcf31b5265/" ref="nofollow noopener noreferrer">PostgreSQL 17å®‰è£…æ€»ç¿»è½¦ï¼ŸWindows/macOS/Linuxé¿å‘æŒ‡å—å¸®ä½ æå®šï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fb5474d1480509c5072085abc80b3dd9f%2F" target="_blank" title="https://blog.cmdragon.cn/posts/b5474d1480509c5072085abc80b3dd9f/" ref="nofollow noopener noreferrer">èƒ½å½“å…³ç³»å‹æ•°æ®åº“è¿˜èƒ½ç©å¯¹è±¡ç‰¹æ€§ï¼Œèƒ½æ‹†å¤æ‚æŸ¥è¯¢è¿˜èƒ½è‡ªåŠ¨ç®¡åº“å­˜ï¼ŒPostgreSQLå‡­ä»€ä¹ˆè¿™ä¹ˆé¦™ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Fcc098d8836e787baa8a4d92e4d56d5c5%2F" target="_blank" title="https://blog.cmdragon.cn/posts/cc098d8836e787baa8a4d92e4d56d5c5/" ref="nofollow noopener noreferrer">ç»™æ¥å£åŠ æ–°å­—æ®µåˆä¸æå´©è€å®¢æˆ·ç«¯ï¼ŸFastAPIçš„å¤šç‰ˆæœ¬APIé å“ªä¸‰æ‹›å®ç°ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F46d05151c5bd31cf37a7bcf0b8f5b0b8%2F" target="_blank" title="https://blog.cmdragon.cn/posts/46d05151c5bd31cf37a7bcf0b8f5b0b8/" ref="nofollow noopener noreferrer">æµé‡çªå¢è¦æå´©FastAPIï¼Ÿç†”æ–­æµ‹è¯•æ˜¯æ€ä¹ˆé˜²ç³»ç»Ÿé›ªå´©çš„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F65ce343cc5df9faf3a8e2eeaab42ae45%2F" target="_blank" title="https://blog.cmdragon.cn/posts/65ce343cc5df9faf3a8e2eeaab42ae45/" ref="nofollow noopener noreferrer">FastAPIç§’æ€åº“å­˜æ€»å˜è´Ÿæ•°ï¼ŸRedisåˆ†å¸ƒå¼é”èƒ½å¸®ä½ å®ˆä½åº•çº¿å— - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2Feed6cd8985d9be0a4b092a7da38b3e0c%2F" target="_blank" title="https://blog.cmdragon.cn/posts/eed6cd8985d9be0a4b092a7da38b3e0c/" ref="nofollow noopener noreferrer">FastAPIçš„CIæµæ°´çº¿æ€ä¹ˆè‡ªåŠ¨æµ‹ç«¯ç‚¹ï¼Œè¿˜èƒ½è®©AllureæŠ¥å‘Šç¾åˆ°çŠ¯è§„ï¼Ÿ - cmdragon's Blog</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.cmdragon.cn%2Fposts%2F6157d87338ce894d18c013c3c4777abb%2F" target="_blank" title="https://blog.cmdragon.cn/posts/6157d87338ce894d18c013c3c4777abb/" ref="nofollow noopener noreferrer">å¦‚ä½•ç”¨GitHub Actionsä¸ºFastAPIé¡¹ç›®æ‰“é€ è‡ªåŠ¨åŒ–æµ‹è¯•æµæ°´çº¿ï¼Ÿ - cmdragon's Blog</a></li>
</ul>
</details>
<details>
<summary>å…è´¹å¥½ç”¨çš„çƒ­é—¨åœ¨çº¿å·¥å…·</summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffile-converter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/file-converter" ref="nofollow noopener noreferrer">æ–‡ä»¶æ ¼å¼è½¬æ¢å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fm3u8-player" target="_blank" title="https://tools.cmdragon.cn/zh/apps/m3u8-player" ref="nofollow noopener noreferrer">M3U8åœ¨çº¿æ’­æ”¾å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fquick-image-design" target="_blank" title="https://tools.cmdragon.cn/zh/apps/quick-image-design" ref="nofollow noopener noreferrer">å¿«å›¾è®¾è®¡ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-advanced" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-advanced" ref="nofollow noopener noreferrer">é«˜çº§æ–‡å­—è½¬å›¾ç‰‡è½¬æ¢å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fraid-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/raid-calculator" ref="nofollow noopener noreferrer">RAID è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fphotoshop-online" target="_blank" title="https://tools.cmdragon.cn/zh/apps/photoshop-online" ref="nofollow noopener noreferrer">åœ¨çº¿PS - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmermaid-live-editor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/mermaid-live-editor" ref="nofollow noopener noreferrer">Mermaid åœ¨çº¿ç¼–è¾‘å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmath-solver-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/math-solver-calculator" ref="nofollow noopener noreferrer">æ•°å­¦æ±‚è§£è®¡ç®—å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsmart-teleprompter" target="_blank" title="https://tools.cmdragon.cn/zh/apps/smart-teleprompter" ref="nofollow noopener noreferrer">æ™ºèƒ½æè¯å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fmagic-resume" target="_blank" title="https://tools.cmdragon.cn/zh/apps/magic-resume" ref="nofollow noopener noreferrer">é­”æ³•ç®€å† - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-puzzle-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-puzzle-tool" ref="nofollow noopener noreferrer">Image Puzzle Tool - å›¾ç‰‡æ‹¼å›¾å·¥å…· | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsubtitle-downloader" target="_blank" title="https://tools.cmdragon.cn/zh/apps/subtitle-downloader" ref="nofollow noopener noreferrer">å­—å¹•ä¸‹è½½å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flyrics-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lyrics-generator" ref="nofollow noopener noreferrer">æ­Œè¯ç”Ÿæˆå·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcloud-drive-search" target="_blank" title="https://tools.cmdragon.cn/zh/apps/cloud-drive-search" ref="nofollow noopener noreferrer">ç½‘ç›˜èµ„æºèšåˆæœç´¢ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fascii-art-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ascii-art-generator" ref="nofollow noopener noreferrer">ASCIIå­—ç¬¦ç”»ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fjwt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/jwt-tool" ref="nofollow noopener noreferrer">JSON Web Tokens å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbcrypt-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/bcrypt-tool" ref="nofollow noopener noreferrer">Bcrypt å¯†ç å·¥å…· - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-composer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-composer" ref="nofollow noopener noreferrer">GIF åˆæˆå™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fgif-decomposer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/gif-decomposer" ref="nofollow noopener noreferrer">GIF åˆ†è§£å™¨ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-steganography" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-steganography" ref="nofollow noopener noreferrer">æ–‡æœ¬éšå†™æœ¯ - åº”ç”¨å•†åº— | By cmdragon</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh" target="_blank" title="https://tools.cmdragon.cn/zh" ref="nofollow noopener noreferrer">CMDragon åœ¨çº¿å·¥å…· - é«˜çº§AIå·¥å…·ç®±ä¸å¼€å‘è€…å¥—ä»¶ | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%3Fcategory%3Dtrending" target="_blank" title="https://tools.cmdragon.cn/zh/apps?category=trending" ref="nofollow noopener noreferrer">åº”ç”¨å•†åº— - å‘ç°1000+æå‡æ•ˆç‡ä¸å¼€å‘çš„AIå·¥å…·å’Œå®ç”¨ç¨‹åº | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fchangelog" target="_blank" title="https://tools.cmdragon.cn/zh/changelog" ref="nofollow noopener noreferrer">CMDragon æ›´æ–°æ—¥å¿— - æœ€æ–°æ›´æ–°ã€åŠŸèƒ½ä¸æ”¹è¿› | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fsponsor" target="_blank" title="https://tools.cmdragon.cn/zh/sponsor" ref="nofollow noopener noreferrer">æ”¯æŒæˆ‘ä»¬ - æˆä¸ºèµåŠ©è€… | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-image-ai" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-image-ai" ref="nofollow noopener noreferrer">AIæ–‡æœ¬ç”Ÿæˆå›¾åƒ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftemp-email" target="_blank" title="https://tools.cmdragon.cn/zh/apps/temp-email" ref="nofollow noopener noreferrer">ä¸´æ—¶é‚®ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fqrcode-parser" target="_blank" title="https://tools.cmdragon.cn/zh/apps/qrcode-parser" ref="nofollow noopener noreferrer">äºŒç»´ç è§£æå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-to-mindmap" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-to-mindmap" ref="nofollow noopener noreferrer">æ–‡æœ¬è½¬æ€ç»´å¯¼å›¾ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fregex-visualizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/regex-visualizer" ref="nofollow noopener noreferrer">æ­£åˆ™è¡¨è¾¾å¼å¯è§†åŒ–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsteganography-tool" target="_blank" title="https://tools.cmdragon.cn/zh/apps/steganography-tool" ref="nofollow noopener noreferrer">æ–‡ä»¶éšå†™å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fiptv-explorer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/iptv-explorer" ref="nofollow noopener noreferrer">IPTV é¢‘é“æ¢ç´¢å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsnapdrop" target="_blank" title="https://tools.cmdragon.cn/zh/apps/snapdrop" ref="nofollow noopener noreferrer">å¿«ä¼  - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Flucky-draw" target="_blank" title="https://tools.cmdragon.cn/zh/apps/lucky-draw" ref="nofollow noopener noreferrer">éšæœºæŠ½å¥–å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fanime-scene-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/anime-scene-finder" ref="nofollow noopener noreferrer">åŠ¨æ¼«åœºæ™¯æŸ¥æ‰¾å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftime-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/time-toolkit" ref="nofollow noopener noreferrer">æ—¶é—´å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fspeed-test" target="_blank" title="https://tools.cmdragon.cn/zh/apps/speed-test" ref="nofollow noopener noreferrer">ç½‘é€Ÿæµ‹è¯• - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-remover" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-remover" ref="nofollow noopener noreferrer">AI æ™ºèƒ½æŠ å›¾å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fbackground-replacer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/background-replacer" ref="nofollow noopener noreferrer">èƒŒæ™¯æ›¿æ¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fartistic-qrcode" target="_blank" title="https://tools.cmdragon.cn/zh/apps/artistic-qrcode" ref="nofollow noopener noreferrer">è‰ºæœ¯äºŒç»´ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fopen-graph-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/open-graph-generator" ref="nofollow noopener noreferrer">Open Graph å…ƒæ ‡ç­¾ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-comparison" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-comparison" ref="nofollow noopener noreferrer">å›¾åƒå¯¹æ¯”å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-compressor" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-compressor" ref="nofollow noopener noreferrer">å›¾ç‰‡å‹ç¼©ä¸“ä¸šç‰ˆ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fpassword-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/password-generator" ref="nofollow noopener noreferrer">å¯†ç ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fsvg-optimizer" target="_blank" title="https://tools.cmdragon.cn/zh/apps/svg-optimizer" ref="nofollow noopener noreferrer">SVGä¼˜åŒ–å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcolor-palette" target="_blank" title="https://tools.cmdragon.cn/zh/apps/color-palette" ref="nofollow noopener noreferrer">è°ƒè‰²æ¿ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fonline-metronome" target="_blank" title="https://tools.cmdragon.cn/zh/apps/online-metronome" ref="nofollow noopener noreferrer">åœ¨çº¿èŠ‚æ‹å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcss-grid-layout" target="_blank" title="https://tools.cmdragon.cn/zh/apps/css-grid-layout" ref="nofollow noopener noreferrer">CSSç½‘æ ¼å¸ƒå±€ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Femail-validator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/email-validator" ref="nofollow noopener noreferrer">é‚®ç®±éªŒè¯å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fcalligraphy-practice" target="_blank" title="https://tools.cmdragon.cn/zh/apps/calligraphy-practice" ref="nofollow noopener noreferrer">ä¹¦æ³•ç»ƒä¹ å­—å¸– - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffinance-calculator-suite" target="_blank" title="https://tools.cmdragon.cn/zh/apps/finance-calculator-suite" ref="nofollow noopener noreferrer">é‡‘èè®¡ç®—å™¨å¥—ä»¶ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fchinese-kinship-calculator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/chinese-kinship-calculator" ref="nofollow noopener noreferrer">ä¸­å›½äº²æˆšå…³ç³»è®¡ç®—å™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fprotobuf-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/protobuf-toolkit" ref="nofollow noopener noreferrer">Protocol Buffer å·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-geolocation" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-geolocation" ref="nofollow noopener noreferrer">IPå½’å±åœ°æŸ¥è¯¢ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fimage-upscaler" target="_blank" title="https://tools.cmdragon.cn/zh/apps/image-upscaler" ref="nofollow noopener noreferrer">å›¾ç‰‡æ— æŸæ”¾å¤§ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ftext-compare" target="_blank" title="https://tools.cmdragon.cn/zh/apps/text-compare" ref="nofollow noopener noreferrer">æ–‡æœ¬æ¯”è¾ƒå·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fip-batch-lookup" target="_blank" title="https://tools.cmdragon.cn/zh/apps/ip-batch-lookup" ref="nofollow noopener noreferrer">IPæ‰¹é‡æŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdomain-finder" target="_blank" title="https://tools.cmdragon.cn/zh/apps/domain-finder" ref="nofollow noopener noreferrer">åŸŸåæŸ¥è¯¢å·¥å…· - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Fdns-toolkit" target="_blank" title="https://tools.cmdragon.cn/zh/apps/dns-toolkit" ref="nofollow noopener noreferrer">DNSå·¥å…·ç®± - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fzh%2Fapps%2Ffavicon-generator" target="_blank" title="https://tools.cmdragon.cn/zh/apps/favicon-generator" ref="nofollow noopener noreferrer">ç½‘ç«™å›¾æ ‡ç”Ÿæˆå™¨ - åº”ç”¨å•†åº— | å…è´¹å¥½ç”¨çš„åœ¨çº¿å·¥å…·</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.cmdragon.cn%2Fsitemap_index.xml" target="_blank" title="https://tools.cmdragon.cn/sitemap_index.xml" ref="nofollow noopener noreferrer">XML Sitemap</a></li>
</ul>
</details>
<p>Vue3ç”¨<code>ref</code>æˆ–<code>reactive</code>åˆ›å»ºå“åº”å¼æ•°æ®ï¼Œå½“æ•°æ®å˜åŒ–æ—¶ï¼ŒVueä¼šè‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼ˆæ¯”å¦‚æ¨¡æ¿ä¸­ç”¨åˆ°<code>username</code>çš„åœ°æ–¹ï¼‰ï¼Œå¹¶æ›´æ–°å¯¹åº”çš„è§†å›¾ã€‚è€Œ<code>v-model</code>æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸ªç³»ç»Ÿï¼Œè®©æ•°æ®å’Œè§†å›¾åŒå‘åŒæ­¥ã€‚</p>
<p>æ¯”å¦‚ç”¨<code>ref</code>åˆ›å»º<code>username</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> username = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)
</code></pre>
<p><code>ref</code>ä¼šæŠŠ<code>username</code>åŒ…è£…æˆä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼Œå½“ä½ ä¿®æ”¹<code>username.value</code>ï¼ˆæˆ–é€šè¿‡<code>v-model</code>ä¿®æ”¹ï¼‰ï¼ŒVueä¼šç«‹åˆ»çŸ¥é“ï¼Œå¹¶æ›´æ–°è§†å›¾ã€‚</p>
<h3 data-id="heading-10">å…­ã€å®é™…æ¡ˆä¾‹ï¼šæ‰“é€ ä¸€ä¸ªæ³¨å†Œè¡¨å•</h3>
<p>è®©æˆ‘ä»¬æŠŠå‰é¢çš„çŸ¥è¯†ç‚¹æ•´åˆèµ·æ¥ï¼Œåšä¸€ä¸ª<strong>æ³¨å†Œè¡¨å•</strong>ï¼ŒåŒ…å«ç”¨æˆ·åã€å¯†ç ã€è®°ä½æˆ‘ã€æ€§åˆ«ã€çˆ±å¥½ã€åŸå¸‚ï¼Œæäº¤æ—¶æ‰“å°è¡¨å•æ•°æ®ã€‚</p>
<h4 data-id="heading-11">å®Œæ•´ä»£ç ï¼ˆå¸¦æ ·å¼ï¼‰</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// ç”¨refåˆ›å»ºè¡¨å•å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰å­—æ®µ</span>
<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">''</span>,
  <span class="hljs-attr">rememberMe</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">gender</span>: <span class="hljs-string">'male'</span>,
  <span class="hljs-attr">hobbies</span>: [],
  <span class="hljs-attr">city</span>: <span class="hljs-string">'beijing'</span>
})

<span class="hljs-comment">// æäº¤å¤„ç†å‡½æ•°ï¼šé˜»æ­¢é»˜è®¤åˆ·æ–°ï¼Œæ‰“å°è¡¨å•æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = (<span class="hljs-params">e</span>) =&gt; {
  e.<span class="hljs-title function_">preventDefault</span>()
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æ•°æ®ï¼š'</span>, form.<span class="hljs-property">value</span>)
  <span class="hljs-comment">// è¿™é‡Œå¯ä»¥åŠ å‘é€è¯·æ±‚åˆ°åå°çš„é€»è¾‘ï¼Œæ¯”å¦‚axios.post('/api/register', form.value)</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"register-form"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ç”¨æˆ·æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"handleSubmit"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- ç”¨æˆ·å --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"username"</span>&gt;</span>ç”¨æˆ·åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> 
          <span class="hljs-attr">id</span>=<span class="hljs-string">"username"</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.username"</span> 
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span>
          <span class="hljs-attr">required</span>
        &gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- å¯†ç  --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"password"</span>&gt;</span>å¯†ç ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> 
          <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> 
          <span class="hljs-attr">id</span>=<span class="hljs-string">"password"</span> 
          <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.password"</span> 
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>
          <span class="hljs-attr">required</span>
        &gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- è®°ä½æˆ‘ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.rememberMe"</span>&gt;</span> è®°ä½ç™»å½•çŠ¶æ€<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- æ€§åˆ« --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>æ€§åˆ«ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"male"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.gender"</span>&gt;</span> ç”·
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"female"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.gender"</span>&gt;</span> å¥³
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- çˆ±å¥½ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>çˆ±å¥½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"reading"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.hobbies"</span>&gt;</span> é˜…è¯»
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sports"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.hobbies"</span>&gt;</span> è¿åŠ¨
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"coding"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.hobbies"</span>&gt;</span> ç¼–ç¨‹
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- åŸå¸‚ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"form-group"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"city"</span>&gt;</span>åŸå¸‚ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"city"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.city"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"beijing"</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shanghai"</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"guangzhou"</span>&gt;</span>å¹¿å·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"shenzhen"</span>&gt;</span>æ·±åœ³<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- æäº¤æŒ‰é’® --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"submit-btn"</span>&gt;</span>æ³¨å†Œ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.register-form</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}
<span class="hljs-selector-class">.form-group</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;
}
<span class="hljs-selector-tag">label</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;
}
<span class="hljs-selector-tag">input</span>, select {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}
<span class="hljs-selector-class">.submit-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#42b983</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}
<span class="hljs-selector-class">.submit-btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3aa776</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">ä»£ç è¯´æ˜</h4>
<ol>
<li><strong>è¡¨å•æ•°æ®ç®¡ç†</strong>ï¼šç”¨<code>ref</code>åˆ›å»º<code>form</code>å¯¹è±¡ï¼ŒæŠŠæ‰€æœ‰è¡¨å•å­—æ®µæ”¾åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿ç®¡ç†ï¼›</li>
<li><strong>æäº¤å¤„ç†</strong>ï¼šç”¨<code>@submit.prevent</code>é˜»æ­¢è¡¨å•é»˜è®¤çš„åˆ·æ–°è¡Œä¸ºï¼Œæ‰“å°è¡¨å•æ•°æ®ï¼›</li>
<li><strong>å“åº”å¼åŒæ­¥</strong>ï¼šæ¯ä¸ªå­—æ®µç”¨<code>v-model</code>ç»‘å®šåˆ°<code>form</code>å¯¹è±¡çš„å±æ€§ï¼Œè¾“å…¥æ—¶è‡ªåŠ¨åŒæ­¥ã€‚</li>
</ol>
<h3 data-id="heading-13">ä¸ƒã€è¯¾åQuizï¼šå·©å›ºä½ çš„ç†è§£</h3>
<p>æ¥åšä¸¤ä¸ªå°ç»ƒä¹ ï¼Œæ£€éªŒä¸€ä¸‹å­¦ä¹ æˆæœï½</p>
<h4 data-id="heading-14">1. é—®é¢˜ï¼šv-modelçš„è¯­æ³•ç³–æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿè¯·å†™å‡ºç­‰ä»·çš„åŸç”Ÿç»‘å®šä»£ç ã€‚</h4>
<p><strong>ç­”æ¡ˆè§£æ</strong>ï¼š<br/>
v-modelæ˜¯<code>value</code>å±æ€§ç»‘å®š + <code>input</code>äº‹ä»¶ç›‘å¬çš„è¯­æ³•ç³–ã€‚æ¯”å¦‚<code>&lt;input v-model="message"&gt;</code>ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">"message"</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">"message = $event.target.value"</span>&gt;</span>
</code></pre>
<ul>
<li><code>:value="message"</code>ï¼šæŠŠæ•°æ®ç»‘å®šåˆ°è¾“å…¥æ¡†çš„valueå±æ€§ï¼›</li>
<li><code>@input</code>ï¼šç›‘å¬è¾“å…¥äº‹ä»¶ï¼ŒæŠŠè¾“å…¥å†…å®¹æ›´æ–°åˆ°<code>message</code>ã€‚</li>
</ul>
<h4 data-id="heading-15">2. é—®é¢˜ï¼šå¤šä¸ªå¤é€‰æ¡†å¦‚ä½•ç”¨v-modelå®ç°å¤šé€‰ï¼Ÿè¯·å†™å‡ºç¤ºä¾‹ä»£ç ã€‚</h4>
<p><strong>ç­”æ¡ˆè§£æ</strong>ï¼š<br/>
å¤šä¸ªå¤é€‰æ¡†éœ€è¦ç»‘å®šåˆ°<strong>æ•°ç»„ç±»å‹</strong>çš„å“åº”å¼æ•°æ®ã€‚æ¯ä¸ªå¤é€‰æ¡†çš„<code>value</code>å¯¹åº”æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œé€‰ä¸­æ—¶åŠ å…¥æ•°ç»„ï¼Œå–æ¶ˆæ—¶ç§»é™¤ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> hobbies = <span class="hljs-title function_">ref</span>([]) <span class="hljs-comment">// æ•°ç»„ç±»å‹</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"reading"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> é˜…è¯»<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"sports"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> è¿åŠ¨<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"coding"</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"hobbies"</span>&gt;</span> ç¼–ç¨‹<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æ¯”å¦‚é€‰ä¸­â€œé˜…è¯»â€å’Œâ€œç¼–ç¨‹â€ï¼Œ<code>hobbies.value</code>ä¼šå˜æˆ<code>['reading', 'coding']</code>ã€‚</p>
<h3 data-id="heading-16">å…«ã€å¸¸è§æŠ¥é”™ä¸è§£å†³æ–¹æ¡ˆ</h3>
<p>å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°æŠ¥é”™åˆ«æ…Œï¼Œä»¥ä¸‹æ˜¯è¡¨å•ç»‘å®šå¸¸è§çš„3ä¸ªé”™è¯¯åŠè§£å†³åŠæ³•ï¼š</p>
<h4 data-id="heading-17">1. æŠ¥é”™ï¼š<code>v-model is not allowed on &lt;input type="file"&gt;</code></h4>
<ul>
<li><strong>åŸå› </strong>ï¼šæ–‡ä»¶è¾“å…¥æ¡†ï¼ˆ<code>type="file"</code>ï¼‰çš„<code>value</code>æ˜¯<strong>åªè¯»</strong>çš„ï¼Œæ— æ³•é€šè¿‡<code>v-model</code>ä¿®æ”¹ã€‚</li>
<li><strong>è§£å†³åŠæ³•</strong>ï¼šç”¨<code>ref</code>è·å–DOMå…ƒç´ ï¼Œç›‘å¬<code>change</code>äº‹ä»¶æ‹¿æ–‡ä»¶ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> fileInput = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFile</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> file = fileInput.<span class="hljs-property">value</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>] <span class="hljs-comment">// è·å–é€‰ä¸­çš„æ–‡ä»¶</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶ï¼š'</span>, file)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"fileInput"</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">"handleFile"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-18">2. æŠ¥é”™ï¼š<code>Property "message" was accessed during render but is not defined</code></h4>
<ul>
<li><strong>åŸå› </strong>ï¼šæ¨¡æ¿é‡Œç”¨äº†<code>message</code>ï¼Œä½†æ²¡åœ¨<code>setup</code>ä¸­å®šä¹‰å“åº”å¼æ•°æ®ã€‚</li>
<li><strong>è§£å†³åŠæ³•</strong>ï¼šç”¨<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰<code>message</code>ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">const</span> message = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>) <span class="hljs-comment">// å¿…é¡»å®šä¹‰ï¼</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-19">3. æŠ¥é”™ï¼š<code>v-model requires a valid Vue instance</code></h4>
<ul>
<li><strong>åŸå› </strong>ï¼šå¯èƒ½åœ¨éVueç»„ä»¶ä¸­ç”¨äº†<code>v-model</code>ï¼ˆæ¯”å¦‚çº¯HTMLæ–‡ä»¶æ²¡æŒ‚è½½Vueï¼‰ï¼Œæˆ–ç»„ä»¶æœªæ­£ç¡®æ³¨å†Œã€‚</li>
<li><strong>è§£å†³åŠæ³•</strong>ï¼šç¡®ä¿åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå¹¶æ­£ç¡®æŒ‚è½½åº”ç”¨ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>) <span class="hljs-comment">// æŒ‚è½½åˆ°#appå…ƒç´ </span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-20">å‚è€ƒé“¾æ¥</h3>
<p>å®˜ç½‘è¡¨å•å¤„ç†æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvuejs.org%2Fguide%2Fessentials%2Fforms.html" target="_blank" title="https://vuejs.org/guide/essentials/forms.html" ref="nofollow noopener noreferrer">vuejs.org/guide/essenâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS Container Queriesï¼šå®ç°å“åº”å¼è®¾è®¡çš„æ–°æ€è·¯]]></title>    <link>https://juejin.cn/post/7595896809651879976</link>    <guid>https://juejin.cn/post/7595896809651879976</guid>    <pubDate>2026-01-17T11:10:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595896809651879976" data-draft-id="7595864836360814644" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS Container Queriesï¼šå®ç°å“åº”å¼è®¾è®¡çš„æ–°æ€è·¯"/> <meta itemprop="keywords" content="CSS"/> <meta itemprop="datePublished" content="2026-01-17T11:10:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIäº§å“åº“AIProduchHub"/> <meta itemprop="url" content="https://juejin.cn/user/2420466240993888"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS Container Queriesï¼šå®ç°å“åº”å¼è®¾è®¡çš„æ–°æ€è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2420466240993888/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIäº§å“åº“AIProduchHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:10:47.000Z" title="Sat Jan 17 2026 11:10:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CSS Container Queriesï¼šå®ç°å“åº”å¼è®¾è®¡çš„æ–°æ€è·¯</h2>
<p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šå¯¹åª’ä½“æŸ¥è¯¢ï¼ˆMedia Queriesï¼‰ä¸é™Œç”Ÿã€‚å¤šå¹´æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´ä¾èµ– <code>@media</code> è§„åˆ™æ¥åˆ›å»ºå“åº”å¼è®¾è®¡ï¼Œæ ¹æ®å±å¹•å°ºå¯¸è°ƒæ•´æ ·å¼ã€‚ä½†éšç€ç»„ä»¶åŒ–å¼€å‘çš„æ™®åŠå’Œè®¾è®¡å¤æ‚æ€§çš„å¢åŠ ï¼Œæˆ‘ä»¬é€æ¸å‘ç°äº†åª’ä½“æŸ¥è¯¢çš„å±€é™æ€§ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³å’Œå¤§å®¶åˆ†äº«ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒçš„æ–°ç‰¹æ€§â€”â€”CSS Container Queriesï¼Œå®ƒæ­£åœ¨æ”¹å˜æˆ‘ä»¬æ€è€ƒå’Œå®ç°å“åº”å¼è®¾è®¡çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-1">åª’ä½“æŸ¥è¯¢çš„å›°å¢ƒ</h3>
<p>åœ¨æ·±å…¥äº†è§£ Container Queries ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ä¼ ç»Ÿåª’ä½“æŸ¥è¯¢çš„é™åˆ¶ã€‚</p>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¡ç‰‡ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å¯èƒ½ä¼šå‡ºç°åœ¨é¡µé¢çš„ä¸åŒä½ç½®â€”â€”æœ‰æ—¶å æ®æ•´ä¸ªå®½åº¦ï¼Œæœ‰æ—¶åªå æ®ä¾§è¾¹æ çš„ä¸€å°éƒ¨åˆ†ã€‚ä½¿ç”¨ä¼ ç»Ÿçš„åª’ä½“æŸ¥è¯¢ï¼Œæˆ‘ä»¬åªèƒ½åŸºäºæ•´ä¸ªè§†å£çš„å°ºå¯¸æ¥è°ƒæ•´æ ·å¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
}

<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">768px</span>) {
  <span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
  }
}
</code></pre>
<p>è¿™ç§æ–¹æ³•çš„é—®é¢˜åœ¨äºï¼Œå³ä½¿å¡ç‰‡æœ¬èº«å¾ˆå°ï¼ˆæ¯”å¦‚åœ¨ä¾§è¾¹æ ä¸­ï¼‰ï¼Œä½†å¦‚æœè§†å£å®½åº¦è¶…è¿‡äº†768pxï¼Œæ ‡é¢˜ä»ç„¶ä¼šä½¿ç”¨è¾ƒå¤§çš„å­—ä½“ï¼Œè¿™å¯èƒ½å¯¼è‡´å¸ƒå±€é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">Container Queries çš„é©å‘½æ€§æ€è·¯</h3>
<p>Container Queries çš„å‡ºç°è§£å†³äº†è¿™ä¸ªæ ¹æœ¬é—®é¢˜ã€‚å®ƒå…è®¸æˆ‘ä»¬åŸºäº<strong>å®¹å™¨çš„å°ºå¯¸</strong>è€Œä¸æ˜¯è§†å£çš„å°ºå¯¸æ¥åº”ç”¨æ ·å¼ã€‚è¿™æ„å‘³ç€ç»„ä»¶å¯ä»¥æ ¹æ®è‡ªå·±çš„å®é™…å¯ç”¨ç©ºé—´æ¥è°ƒæ•´å¤–è§‚ï¼ŒçœŸæ­£å®ç°äº†ç»„ä»¶çº§åˆ«çš„å“åº”å¼è®¾è®¡ã€‚</p>
<h4 data-id="heading-3">åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨</h4>
<p>è¦ä½¿ç”¨ Container Queriesï¼Œé¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªå®¹å™¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card-container</span> {
  container-type: inline-size;
  <span class="hljs-comment">/* æˆ–è€…ä½¿ç”¨ç®€å†™ */</span>
  container: card-container / inline-size;
}
</code></pre>
<p>ç„¶åå°±å¯ä»¥ä½¿ç”¨ <code>@container</code> è§„åˆ™äº†ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">400px</span>) {
  <span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
  }
  
  <span class="hljs-selector-class">.card</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">600px</span>) {
  <span class="hljs-selector-class">.card</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
  }
  
  <span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.8rem</span>;
  }
}
</code></pre>
<h3 data-id="heading-4">å®é™…åº”ç”¨æ¡ˆä¾‹</h3>
<p>è®©æˆ‘é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­æ¥å±•ç¤º Container Queries çš„å¼ºå¤§ä¹‹å¤„ã€‚å‡è®¾æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªäº§å“å¡ç‰‡ç»„ä»¶ï¼Œå®ƒéœ€è¦åœ¨ä¸åŒçš„å®¹å™¨ä¸­è¡¨ç°å‡ºä¸åŒçš„å¸ƒå±€ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-content"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"product-card"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"product.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"äº§å“å›¾ç‰‡"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"product-info"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>äº§å“æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>äº§å“æè¿°æ–‡æœ¬...<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"product-price"</span>&gt;</span>Â¥199<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>ç«‹å³è´­ä¹°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"product-card"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›¸åŒçš„HTMLç»“æ„ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
</code></pre>
<p>CSSå®ç°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å®šä¹‰å®¹å™¨ */</span>
<span class="hljs-selector-class">.main-content</span>,
<span class="hljs-selector-class">.sidebar</span> {
  container-type: inline-size;
}

<span class="hljs-comment">/* åŸºç¡€æ ·å¼ */</span>
<span class="hljs-selector-class">.product-card</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.product-card</span> <span class="hljs-selector-tag">img</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">object-fit</span>: cover;
}

<span class="hljs-selector-class">.product-info</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-selector-class">.product-info</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.1rem</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-selector-class">.product-price</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#e74c3c</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0.5rem</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">/* ä¸­ç­‰å°ºå¯¸å®¹å™¨ */</span>
<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">320px</span>) {
  <span class="hljs-selector-class">.product-card</span> {
    <span class="hljs-attribute">display</span>: flex;
  }
  
  <span class="hljs-selector-class">.product-card</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
  }
  
  <span class="hljs-selector-class">.product-info</span> <span class="hljs-selector-tag">h3</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
  }
}

<span class="hljs-comment">/* å¤§å°ºå¯¸å®¹å™¨ */</span>
<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">500px</span>) {
  <span class="hljs-selector-class">.product-card</span> <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
  }
  
  <span class="hljs-selector-class">.product-info</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">1.5rem</span>;
  }
  
  <span class="hljs-selector-class">.product-info</span> <span class="hljs-selector-tag">h3</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;
  }
  
  <span class="hljs-selector-class">.product-price</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.4rem</span>;
  }
}
</code></pre>
<h3 data-id="heading-5">å®¹å™¨ç±»å‹è¯¦è§£</h3>
<p>Container Queries æ”¯æŒå‡ ç§ä¸åŒçš„å®¹å™¨ç±»å‹ï¼š</p>
<h4 data-id="heading-6">1. inline-size</h4>
<p>è¿™æ˜¯æœ€å¸¸ç”¨çš„ç±»å‹ï¼Œç›‘å¬å®¹å™¨çš„å†…è”å°ºå¯¸ï¼ˆé€šå¸¸æ˜¯å®½åº¦ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  container-type: inline-size;
}
</code></pre>
<h4 data-id="heading-7">2. size</h4>
<p>ç›‘å¬å®¹å™¨çš„æ‰€æœ‰å°ºå¯¸ï¼ˆå®½åº¦å’Œé«˜åº¦ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  container-type: size;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">400px</span>) <span class="hljs-keyword">and</span> (<span class="hljs-attribute">min-height</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-comment">/* æ ·å¼è§„åˆ™ */</span>
}
</code></pre>
<h4 data-id="heading-8">3. normal</h4>
<p>é»˜è®¤å€¼ï¼Œä¸åˆ›å»ºå®¹å™¨æŸ¥è¯¢ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-9">å‘½åå®¹å™¨æŸ¥è¯¢</h3>
<p>ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®¹å™¨å‘½åï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.sidebar</span> {
  container: sidebar-container / inline-size;
}

<span class="hljs-selector-class">.main-content</span> {
  container: main-container / inline-size;
}

<span class="hljs-keyword">@container</span> sidebar-container (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-selector-class">.product-card</span> {
    <span class="hljs-comment">/* ä¾§è¾¹æ ç‰¹å®šæ ·å¼ */</span>
  }
}

<span class="hljs-keyword">@container</span> main-container (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">800px</span>) {
  <span class="hljs-selector-class">.product-card</span> {
    <span class="hljs-comment">/* ä¸»å†…å®¹åŒºç‰¹å®šæ ·å¼ */</span>
  }
}
</code></pre>
<h3 data-id="heading-10">ä¸CSS Grid/Flexboxçš„å®Œç¾ç»“åˆ</h3>
<p>Container Queries ä¸ç°ä»£å¸ƒå±€æŠ€æœ¯ç»“åˆä½¿ç”¨æ—¶å¨åŠ›æ›´å¤§ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.grid-container</span> {
  container-type: inline-size;
  <span class="hljs-attribute">display</span>: grid;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
  <span class="hljs-attribute">grid-template-columns</span>: <span class="hljs-built_in">repeat</span>(auto-fit, <span class="hljs-built_in">minmax</span>(<span class="hljs-number">250px</span>, <span class="hljs-number">1</span>fr));
}

<span class="hljs-selector-class">.grid-item</span> {
  container-type: inline-size;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-selector-class">.grid-item</span> <span class="hljs-selector-class">.content</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">gap</span>: <span class="hljs-number">1rem</span>;
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">400px</span>) {
  <span class="hljs-selector-class">.grid-item</span> <span class="hljs-selector-class">.content</span> {
    <span class="hljs-attribute">flex-direction</span>: row;
    <span class="hljs-attribute">align-items</span>: center;
  }
}
</code></pre>
<h3 data-id="heading-11">æ€§èƒ½è€ƒé‡å’Œæœ€ä½³å®è·µ</h3>
<p>åœ¨ä½¿ç”¨ Container Queries æ—¶ï¼Œæœ‰å‡ ä¸ªé‡è¦çš„æ€§èƒ½å’Œä½¿ç”¨åŸåˆ™ï¼š</p>
<h4 data-id="heading-12">1. é¿å…å¾ªç¯ä¾èµ–</h4>
<p>ç¡®ä¿å®¹å™¨çš„å°ºå¯¸ä¸ä¾èµ–äºå…¶å†…å®¹çš„æŸ¥è¯¢ç»“æœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é¿å…è¿™æ ·åš */</span>
<span class="hljs-selector-class">.container</span> {
  container-type: inline-size;
  <span class="hljs-attribute">width</span>: fit-content; <span class="hljs-comment">/* å¯èƒ½å¯¼è‡´å¾ªç¯ä¾èµ– */</span>
}
</code></pre>
<h4 data-id="heading-13">2. åˆç†ä½¿ç”¨å®¹å™¨ç±»å‹</h4>
<p>åªæœ‰åœ¨çœŸæ­£éœ€è¦æ—¶æ‰è®¾ç½® <code>container-type: size</code>ï¼Œå› ä¸ºå®ƒçš„æ€§èƒ½å¼€é”€æ¯” <code>inline-size</code> æ›´å¤§ã€‚</p>
<h4 data-id="heading-14">3. æ¸è¿›å¢å¼º</h4>
<p>ä¸ºä¸æ”¯æŒ Container Queries çš„æµè§ˆå™¨æä¾›å›é€€æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å›é€€æ ·å¼ */</span>
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1rem</span>;
}

<span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
}

<span class="hljs-comment">/* æ”¯æŒ Container Queries æ—¶çš„å¢å¼º */</span>
<span class="hljs-keyword">@supports</span> (<span class="hljs-attribute">container-type</span>: inline-size) {
  <span class="hljs-selector-class">.card-container</span> {
    container-type: inline-size;
  }
  
  <span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">400px</span>) {
    <span class="hljs-selector-class">.card</span> {
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">2rem</span>;
    }
    
    <span class="hljs-selector-class">.card</span> <span class="hljs-selector-tag">h2</span> {
      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.5rem</span>;
    }
  }
}
</code></pre>
<h3 data-id="heading-15">æµè§ˆå™¨å…¼å®¹æ€§å’ŒPolyfill</h3>
<p>æˆªè‡³2024å¹´ï¼ŒContainer Queries å·²ç»åœ¨ç°ä»£æµè§ˆå™¨ä¸­å¾—åˆ°äº†è‰¯å¥½æ”¯æŒï¼š</p>
<ul>
<li>Chrome 105+</li>
<li>Firefox 110+</li>
<li>Safari 16+</li>
</ul>
<p>å¯¹äºéœ€è¦æ”¯æŒæ—§ç‰ˆæµè§ˆå™¨çš„é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ polyfill æˆ–é‡‡ç”¨æ¸è¿›å¢å¼ºçš„ç­–ç•¥ã€‚</p>
<h3 data-id="heading-16">å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-17">1. ç»„ä»¶åº“å¼€å‘</h4>
<p>åœ¨å¼€å‘å¯å¤ç”¨ç»„ä»¶æ—¶ï¼ŒContainer Queries è®©ç»„ä»¶çœŸæ­£åšåˆ°äº†è‡ªé€‚åº”ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.button-group</span> {
  container-type: inline-size;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">0.5rem</span>;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">200px</span>) {
  <span class="hljs-selector-class">.button-group</span> {
    <span class="hljs-attribute">flex-direction</span>: column;
  }
}
</code></pre>
<h4 data-id="heading-18">2. å¤æ‚å¸ƒå±€ç³»ç»Ÿ</h4>
<p>åœ¨å¤æ‚çš„åå°ç®¡ç†ç³»ç»Ÿä¸­ï¼Œä¸åŒåŒºåŸŸçš„ç»„ä»¶å¯ä»¥æ ¹æ®å®é™…ç©ºé—´çµæ´»è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.dashboard-widget</span> {
  container-type: inline-size;
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">min-width</span>: <span class="hljs-number">300px</span>) {
  <span class="hljs-selector-class">.chart-widget</span> {
    <span class="hljs-comment">/* æ˜¾ç¤ºå®Œæ•´å›¾è¡¨ */</span>
  }
}

<span class="hljs-keyword">@container</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">299px</span>) {
  <span class="hljs-selector-class">.chart-widget</span> {
    <span class="hljs-comment">/* æ˜¾ç¤ºç®€åŒ–ç‰ˆæœ¬ */</span>
  }
}
</code></pre>
<p>CSS Container Queries ä»£è¡¨äº†å“åº”å¼è®¾è®¡æ€ç»´çš„é‡å¤§è½¬å˜ã€‚ä»å…³æ³¨å…¨å±€è§†å£åˆ°å…³æ³¨å±€éƒ¨å®¹å™¨ï¼Œè¿™ç§å˜åŒ–è®©æˆ‘ä»¬èƒ½å¤Ÿåˆ›å»ºæ›´åŠ çµæ´»ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚è™½ç„¶å®ƒè¿˜æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„ç‰¹æ€§ï¼Œä½†æˆ‘ç›¸ä¿¡éšç€æµè§ˆå™¨æ”¯æŒçš„å®Œå–„å’Œå¼€å‘è€…è®¤çŸ¥çš„æå‡ï¼ŒContainer Queries å°†æˆä¸ºç°ä»£å‰ç«¯å¼€å‘çš„é‡è¦å·¥å…·ã€‚</p>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘å»ºè®®å¤§å®¶å¼€å§‹åœ¨æ–°é¡¹ç›®ä¸­å°è¯•ä½¿ç”¨ Container Queriesï¼Œç‰¹åˆ«æ˜¯åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ã€‚å®ƒä¸ä»…èƒ½è§£å†³ä¼ ç»Ÿåª’ä½“æŸ¥è¯¢çš„å±€é™æ€§ï¼Œæ›´èƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ã€‚</p>
<p>å“åº”å¼è®¾è®¡çš„æœªæ¥å·²ç»åˆ°æ¥ï¼Œä½ å‡†å¤‡å¥½æ‹¥æŠ±è¿™ä¸ªå˜åŒ–äº†å—ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯å…¥é—¨ã€‘å¦‚ä½•ç”¨JSåšä¾§è¾¹æ å±•å¼€å’Œå…³é—­åŠ¨ç”»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595842144907100210</link>    <guid>https://juejin.cn/post/7595842144907100210</guid>    <pubDate>2026-01-17T11:17:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595842144907100210" data-draft-id="7595808703074566170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯å…¥é—¨ã€‘å¦‚ä½•ç”¨JSåšä¾§è¾¹æ å±•å¼€å’Œå…³é—­åŠ¨ç”»ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T11:17:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="vmiao"/> <meta itemprop="url" content="https://juejin.cn/user/2930638589534635"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯å…¥é—¨ã€‘å¦‚ä½•ç”¨JSåšä¾§è¾¹æ å±•å¼€å’Œå…³é—­åŠ¨ç”»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2930638589534635/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    vmiao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:17:55.000Z" title="Sat Jan 17 2026 11:17:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ‘˜è¦</h2>
<p>åœ¨å¾ˆå¤šç”µå•†çš„pcç«¯ç½‘é¡µï¼Œæˆ‘ä»¬å¾€å¾€èƒ½çœ‹åˆ°é‚£ä¸ªå†ç†Ÿæ‚‰ä¸è¿‡çš„ä¾§è¾¹æ ã€‚å½“æˆ‘ä»¬é¼ æ ‡æ”¾ä¸Šå»æ—¶ï¼Œå®ƒå°±ä¼šä¸æ»‘çš„å¼¹å‡ºä¸€ä¸ªå†…å®¹çš„ç›’å­ï¼Œå½“ä½ ç¦»å¼€ï¼Œè¿™ä¸ªç›’å­åˆåƒå¼¹ç°§ä¸€æ ·æ”¶ç¼©å›å»ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦ç”¨JSåšå‡ºè¿™ä¸ªç®€å•çš„åŠ¨ç”»æ•ˆæœ...</p>
<h2 data-id="heading-1">ä¸€ã€ç¼“åŠ¨åŠ¨ç”»åŸç†</h2>
<p>æ³¨ï¼šä»¥å·¦å³ç§»åŠ¨æ•ˆæœä¸ºä¾‹</p>
<p>1.é¦–å…ˆè·å¾—ç›’å­åŸå§‹çš„ä½ç½® ï¼ˆç›’å­è¦æœ‰å®šä½ï¼Œå› ä¸ºæ˜¯åˆ©ç”¨ç›’å­çš„leftå±æ€§ç§»åŠ¨ï¼‰<br/>
2.è®©ç›’å­åœ¨å½“å‰ä½ç½®ä¸Šç§»åŠ¨ä¸€ä¸ªè·ç¦»<br/>
3.æ·»åŠ å®šæ—¶å™¨setInterval()é‡å¤2ä¸­çš„æ“ä½œ<br/>
4.åˆ°è¾¾æŒ‡å®šä½ç½®åæ¸…é™¤å®šæ—¶å™¨ clearInterval</p>
<h2 data-id="heading-2">äºŒã€ä»£ç å®ç°</h2>
<p>1.é¦–å…ˆå‡†å¤‡ä¸€ä¸ªå¤§ç›’å­,åŒ…å«ä¸€ä¸ªspanå’Œä¸€ä¸ªç”¨æ¥æ»‘åŠ¨çš„ç›’å­</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span> = <span class="hljs-string">"slider_bar"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å±•å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span> = <span class="hljs-string">"con"</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>2.ä¸ºç›’å­è®¾ç½®æ ·å¼</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.slider_bar</span>{
    <span class="hljs-attribute">position</span>:absolute;
    <span class="hljs-attribute">right</span>:<span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>:<span class="hljs-number">500px</span>;
    <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>:<span class="hljs-number">100px</span>;
}
<span class="hljs-selector-class">.span</span>{
    <span class="hljs-attribute">display</span>:block;
    <span class="hljs-attribute">width</span>:<span class="hljs-number">100px</span>;
    <span class="hljs-attribute">height</span>:<span class="hljs-number">100px</span>;
    <span class="hljs-attribute">background-color</span>:pink;
}
<span class="hljs-selector-class">.con</span>{
    <span class="hljs-attribute">position</span>:absolute;
    <span class="hljs-attribute">left</span>:<span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>:<span class="hljs-number">0</span>;
    <span class="hljs-attribute">width</span>:<span class="hljs-number">300px</span>;
    <span class="hljs-attribute">height</span>:<span class="hljs-number">100px</span>;
    <span class="hljs-attribute">z-index</span>:-<span class="hljs-number">1</span>;
}
</code></pre>
<p>å› ä¸ºcssçš„å±‚å æ€§ï¼Œè¦ç»™.conè®¾ç½®z-index:-1,æŠŠæ»‘åŠ¨ç›’å­æ”¾åœ¨spanä¸‹é¢éšè—èµ·æ¥</p>
<p>3.å†™ä¸€ä¸ªèƒ½å¤Ÿå®ç°å·¦å³ç§»åŠ¨åŠ¨ç”»å‡½æ•°</p>
<pre><code class="hljs language-ini" lang="ini">function animate(obj,target,callback){
    clearInterval(obj.timer)<span class="hljs-comment">;</span>
    <span class="hljs-attr">obj.timer</span> = setInterval(function(){
        var <span class="hljs-attr">step</span> = (target - obj.<span class="hljs-literal">off</span>setLeft)/<span class="hljs-number">10</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">step</span> = step &gt; <span class="hljs-number">0</span> ? Math.ceil(step) : Math.floor(step)<span class="hljs-comment">; </span>
        if(<span class="hljs-attr">obj.offsetLeft</span> == target){
            clearInterval(obj.timer)<span class="hljs-comment">;</span>
            if(callback){
                callback()<span class="hljs-comment">;</span>
            }
        }
        else{
            <span class="hljs-attr">obj.style.left</span> = obj.<span class="hljs-literal">off</span>setLeft + step + <span class="hljs-string">'px'</span><span class="hljs-comment">;</span>
        }
    },30)
}
</code></pre>
<p>4.ç»‘å®šæ˜¾ç¤ºå’Œéšè—äº‹ä»¶</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">var</span> sliderbar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".slider_bar"</span>);
    <span class="hljs-keyword">var</span> con = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".con"</span>);
    sliderbar.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseenter"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
      <span class="hljs-title function_">animate</span>(con,-<span class="hljs-number">200</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
          sliderbar.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'å…³é—­'</span>;
     ) })  
    }
    sliderbar.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseleave"</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
      <span class="hljs-title function_">animate</span>(con,<span class="hljs-number">0</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
          sliderbar.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'å±•å¼€'</span>;
     ) })  
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span> 
</code></pre>
<h2 data-id="heading-3">ä¸‰ã€ç‰¹åˆ«æ ‡æ³¨</h2>
<p>1.å½“æ­¥é•¿(step)ä¸ºæ­£æ•°æ—¶ï¼Œè¦å‘ä¸Šå–æ•´(Math.ceil());ä¸ºè´Ÿæ•°æ—¶ï¼Œè¦å‘ä¸‹å–æ•´(Math.floor())ã€‚
2.è¿åŠ¨é€Ÿåº¦å…ˆå¿«åæ…¢ï¼Œç¼“åŠ¨æ•ˆæœï¼Œç”¨å…¬å¼ï¼šï¼ˆç›®æ ‡ä½ç½®-ç°åœ¨ä½ç½®ï¼‰/10.
3.å›è°ƒå‡½æ•°åšå‚æ•°ï¼Œcallbackå°±ç›¸å½“äºå£°æ˜çš„å‡½æ•°ä½“ï¼Œæ‰€ä»¥å‡½æ•°è°ƒç”¨ç›´æ¥å†™callback();</p>
<h2 data-id="heading-4">å››ã€å®Œæ•´ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç¼“åŠ¨åŠ¨ç”»åŸç†<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
      <span class="hljs-selector-class">.slider_bar</span> {
          <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
          <span class="hljs-attribute">top</span>: <span class="hljs-number">500px</span>;
          <span class="hljs-attribute">position</span>: absolute;
          <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
          <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
      }

      <span class="hljs-selector-tag">span</span> {
          <span class="hljs-attribute">display</span>: block;
          <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
          <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
          <span class="hljs-attribute">background-color</span>: pink;
      }

      <span class="hljs-selector-class">.con</span> {
          <span class="hljs-attribute">position</span>: absolute;
          <span class="hljs-attribute">left</span>: <span class="hljs-number">0px</span>;
          <span class="hljs-attribute">top</span>: <span class="hljs-number">0px</span>;
          <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
          <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
          <span class="hljs-attribute">background-color</span>: blueviolet;
          <span class="hljs-attribute">z-index</span>: -<span class="hljs-number">1</span>;
      }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/practice1/animate.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"slider_bar"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å±•å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"con"</span>&gt;</span>é—®é¢˜åé¦ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
      <span class="hljs-keyword">var</span> sliderBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".slider_bar"</span>);
      <span class="hljs-keyword">var</span> con = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".con"</span>);
      sliderBar.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseenter"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-title function_">animate</span>(con, -<span class="hljs-number">200</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
              sliderBar.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'å…³é—­'</span>;
          });
      })
      sliderBar.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseleave"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
          <span class="hljs-title function_">animate</span>(con, <span class="hljs-number">0</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
              sliderBar.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'å±•å¼€'</span>;
          });
      })
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>JSæ–‡ä»¶</p>
<pre><code class="hljs language-ini" lang="ini">function animate(obj, target, callback) {
    clearInterval(obj.timer)<span class="hljs-comment">;</span>
    <span class="hljs-attr">obj.timer</span> = setInterval(function () {
        var <span class="hljs-attr">step</span> = (target - obj.<span class="hljs-literal">off</span>setLeft) / <span class="hljs-number">10</span><span class="hljs-comment">;</span>
        <span class="hljs-attr">step</span> = step &gt; <span class="hljs-number">0</span> ? Math.ceil(step) : Math.floor(step)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">obj.offsetLeft</span> == target) {
            clearInterval(obj.timer)<span class="hljs-comment">;</span>
            if (callback) {
                callback()<span class="hljs-comment">;</span>
            }
        }
        else {
            <span class="hljs-attr">obj.style.left</span> = obj.<span class="hljs-literal">off</span>setLeft + step + <span class="hljs-string">'px'</span><span class="hljs-comment">;</span>
        }
    }, 30)
}
</code></pre>
<p>å®Œæ•´ä»£ç ç¤ºä¾‹çš„å‰é¢çº¯æ‰‹æ“ï¼Œæ²¡åœ¨ç¼–è¾‘å™¨é‡Œé¢å†™ï¼Œå¦‚æœæœ‰é”™è¯¯å¸Œæœ›æ˜å‹ä»¬å¸®æˆ‘æŒ‡å‡ºæˆ‘å†æ”¹æ­£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PromiseåŸºç¡€çŸ¥è¯†æ•´ç†ï¼Œçœ‹çœ‹è¿˜æœ‰ä½ ä¸æ¸…æ¥šçš„å—]]></title>    <link>https://juejin.cn/post/7595894884957175859</link>    <guid>https://juejin.cn/post/7595894884957175859</guid>    <pubDate>2026-01-17T13:04:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884957175859" data-draft-id="7595858063503294498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PromiseåŸºç¡€çŸ¥è¯†æ•´ç†ï¼Œçœ‹çœ‹è¿˜æœ‰ä½ ä¸æ¸…æ¥šçš„å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-17T13:04:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sophieæ—­"/> <meta itemprop="url" content="https://juejin.cn/user/2559318799692952"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PromiseåŸºç¡€çŸ¥è¯†æ•´ç†ï¼Œçœ‹çœ‹è¿˜æœ‰ä½ ä¸æ¸…æ¥šçš„å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318799692952/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sophieæ—­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:04:53.000Z" title="Sat Jan 17 2026 13:04:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»34åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>Promise ä½œä¸º å¼‚æ­¥ç¼–ç¨‹çš„è€ç”Ÿå¸¸è°ˆï¼Œè¿™é‡Œä¸å…ä¿—ä¹Ÿæ•´ç†ä¸€ç•ªï¼Œä»¥åå…³äº PromiseåŸºç¡€çŸ¥è¯†çœ‹è¿™ç¯‡å°±å¥½äº†ã€‚æ•´ç†è¿‡åï¼Œæˆ‘æƒ³è¯´ä¸€å¥è¯ï¼š<code>å›è°ƒå‡½æ•°å¯ä»¥è¯´æ˜¯javascriptä¸­ï¼Œæ‰€æœ‰å¼‚æ­¥ç¼–ç¨‹æ–¹å¼çš„æ ¹åŸº</code>,Promise æ— éæ˜¯ ä»¥æ›´å¥½ç»´æŠ¤æ›´ä¼˜é›…çš„å½¢å¼è®©æˆ‘ä»¬ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸ç®—æ˜¯ä¸€ä¸ª å…¨æ–°çš„æ‘†è„±å›è°ƒå‡½æ•°çš„è§£æ³•ã€‚</p>
<h2 data-id="heading-1">Promise æ„é€ å‡½æ•°</h2>
<h4 data-id="heading-2">å®Œæ•´ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä½¿ç”¨Promiseæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ï¼ˆæ‰¿è¯ºï¼‰</span>
<span class="hljs-comment">// æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªã€Œå…‘ç°æ‰¿è¯ºçš„é€»è¾‘å‡½æ•°ã€ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«åŒæ­¥æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promiseæ„é€ å‡½æ•°çš„æ‰§è¡Œå‡½æ•°ï¼šåŒæ­¥æ‰§è¡Œ'</span>);
  
  <span class="hljs-comment">// resolveå’Œrejectéƒ½æ˜¯å‡½æ•°ï¼Œç”¨äºä¿®æ”¹PromiseçŠ¶æ€</span>
  <span class="hljs-comment">// 2. è°ƒç”¨resolveï¼šå°†PromiseçŠ¶æ€æ”¹ä¸ºfulfilledï¼ˆæˆåŠŸï¼‰ï¼Œå¹¶ä¼ é€’ç»“æœ</span>
  <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// è¿™é‡Œä¼ å…¥å›ºå®šå€¼100ä½œä¸ºå¼‚æ­¥ä»»åŠ¡çš„æ“ä½œç»“æœ</span>
  
  <span class="hljs-comment">// 3. PromiseçŠ¶æ€ä¸€æ—¦ç¡®å®šå°±æ— æ³•ä¿®æ”¹ï¼Œæ‰€ä»¥ä¸‹é¢çš„rejectä¸ä¼šç”Ÿæ•ˆï¼ˆæ³¨é‡Šæ‰æ›´ç›´è§‚ï¼‰</span>
  <span class="hljs-comment">// reject(new Error('promise rejected')); // å°†çŠ¶æ€æ”¹ä¸ºrejectedï¼ˆå¤±è´¥ï¼‰ï¼Œä¼ é€’é”™è¯¯ç†ç”±</span>
});

<span class="hljs-comment">// 4. ç”¨thenæ–¹æ³•æŒ‡å®šçŠ¶æ€å˜æ›´åçš„å›è°ƒ</span>
<span class="hljs-comment">// thenæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šonFulfilledï¼ˆæˆåŠŸå›è°ƒï¼‰ã€onRejectedï¼ˆå¤±è´¥å›è°ƒï¼‰</span>
promise.<span class="hljs-title function_">then</span>(
  <span class="hljs-comment">// onFulfilledï¼šPromiseçŠ¶æ€ä¸ºfulfilledæ—¶æ‰§è¡Œï¼Œæ¥æ”¶resolveä¼ é€’çš„ç»“æœ</span>
  <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'PromiseæˆåŠŸ:'</span>, value); <span class="hljs-comment">// è¾“å‡º PromiseæˆåŠŸ: 100</span>
  },
  <span class="hljs-comment">// onRejectedï¼šPromiseçŠ¶æ€ä¸ºrejectedæ—¶æ‰§è¡Œï¼Œæ¥æ”¶rejectä¼ é€’çš„é”™è¯¯</span>
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Promiseå¤±è´¥:'</span>, error.<span class="hljs-property">message</span>);
  }
);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŒæ­¥ä»£ç ï¼šåœ¨Promiseåˆ›å»ºåæ‰§è¡Œ'</span>);
</code></pre>
<h4 data-id="heading-3">ä»£ç è¾“å‡ºç»“æœ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Promise</span>æ„é€ å‡½æ•°çš„æ‰§è¡Œå‡½æ•°ï¼šåŒæ­¥æ‰§è¡Œ
åŒæ­¥ä»£ç ï¼šåœ¨<span class="hljs-title class_">Promise</span>åˆ›å»ºåæ‰§è¡Œ
<span class="hljs-title class_">Promise</span>æˆåŠŸ: <span class="hljs-number">100</span>
</code></pre>
<h4 data-id="heading-4">é€ç‚¹è§£è¯»ï¼ˆæ ¸å¿ƒè§£é‡Šï¼‰</h4>
<ol>
<li>
<p><strong>æ„é€ å‡½æ•°å‚æ•°ï¼ˆå…‘ç°æ‰¿è¯ºçš„é€»è¾‘ï¼‰</strong>ï¼š</p>
<ul>
<li><code>new Promise((resolve, reject) =&gt; { ... })</code> ä¸­çš„ç®­å¤´å‡½æ•°å°±æ˜¯ã€Œå…‘ç°æ‰¿è¯ºçš„é€»è¾‘ã€ã€‚</li>
<li>è¿™ä¸ªå‡½æ•°<strong>åŒæ­¥æ‰§è¡Œ</strong>ï¼šæ‰€ä»¥å…ˆè¾“å‡º <code>Promiseæ„é€ å‡½æ•°çš„æ‰§è¡Œå‡½æ•°ï¼šåŒæ­¥æ‰§è¡Œ</code>ï¼Œå†æ‰§è¡Œåç»­çš„åŒæ­¥ä»£ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>resolve å’Œ reject å‚æ•°</strong>ï¼š</p>
<ul>
<li><code>äºŒè€…éƒ½æ˜¯æµè§ˆå™¨å†…ç½®çš„å‡½æ•°ï¼Œä¸æ˜¯æˆ‘ä»¬å®šä¹‰çš„ã€‚</code></li>
<li><code>resolve(100)</code>ï¼šæŠŠ Promise çŠ¶æ€æ”¹ä¸º <code>fulfilled</code>ï¼ˆæˆåŠŸï¼‰ï¼Œå¹¶æŠŠ <code>100</code> ä½œä¸ºã€ŒæˆåŠŸç»“æœã€ä¼ é€’ç»™ <code>then</code> çš„ç¬¬ä¸€ä¸ªå›è°ƒã€‚</li>
<li><code>reject(new Error('promise rejected'))</code>ï¼šæŠŠçŠ¶æ€æ”¹ä¸º <code>rejected</code>ï¼ˆå¤±è´¥ï¼‰ï¼Œå¹¶æŠŠé”™è¯¯å¯¹è±¡ä½œä¸ºã€Œå¤±è´¥ç†ç”±ã€ä¼ é€’ç»™ <code>then</code> çš„ç¬¬äºŒä¸ªå›è°ƒã€‚</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€ä¸€æ—¦ç¡®å®šå°±ä¸èƒ½ä¿®æ”¹</strong>ï¼š</p>
<ul>
<li>ä»£ç ä¸­å…ˆè°ƒç”¨äº† <code>resolve(100)</code>ï¼Œæ­¤æ—¶ Promise çŠ¶æ€å·²ç»å›ºå®šä¸ºæˆåŠŸï¼Œå³ä¾¿åç»­è°ƒç”¨ <code>reject</code>ï¼ˆå“ªæ€•å–æ¶ˆæ³¨é‡Šï¼‰ï¼Œä¹Ÿä¸ä¼šæ”¹å˜çŠ¶æ€ï¼Œ<code>then</code> çš„å¤±è´¥å›è°ƒæ°¸è¿œä¸ä¼šæ‰§è¡Œã€‚</li>
</ul>
</li>
<li>
<p><strong>then æ–¹æ³•çš„å›è°ƒ</strong>ï¼š</p>
<ul>
<li><code>then</code> çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼šåªæœ‰ Promise çŠ¶æ€ä¸º <code>fulfilled</code> æ—¶æ‰æ‰§è¡Œï¼Œæ¥æ”¶ <code>resolve</code> ä¼ é€’çš„å€¼ã€‚</li>
<li><code>then</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼šåªæœ‰ Promise çŠ¶æ€ä¸º <code>rejected</code> æ—¶æ‰æ‰§è¡Œï¼Œæ¥æ”¶ <code>reject</code> ä¼ é€’çš„é”™è¯¯ã€‚</li>
<li>æ³¨æ„ï¼š<code>then</code> çš„å›è°ƒæ˜¯<strong>å¾®ä»»åŠ¡</strong>ï¼Œæ‰€ä»¥ä¼šç­‰æ‰€æœ‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œåæ‰æ‰§è¡Œï¼ˆå…ˆè¾“å‡º <code>åŒæ­¥ä»£ç ï¼šåœ¨Promiseåˆ›å»ºåæ‰§è¡Œ</code>ï¼Œå†è¾“å‡º <code>PromiseæˆåŠŸ: 100</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-5">æ€»ç»“</h4>
<ol>
<li>Promise æ„é€ å‡½æ•°çš„æ‰§è¡Œå‡½æ•°æ˜¯<strong>åŒæ­¥æ‰§è¡Œ</strong>çš„ï¼Œé‡Œé¢çš„ <code>resolve/reject</code> ç”¨äºä¿®æ”¹ Promise çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰ã€‚</li>
<li>Promise çŠ¶æ€ä¸€æ—¦é€šè¿‡ <code>resolve</code> æˆ– <code>reject</code> ç¡®å®šï¼Œå°±<strong>æ°¸ä¹…ä¸å¯ä¿®æ”¹</strong>ï¼Œåç»­è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ä¹Ÿæ— æ•ˆã€‚</li>
<li><code>then</code> æ–¹æ³•çš„ä¸¤ä¸ªå›è°ƒåˆ†åˆ«å¯¹åº”ã€ŒæˆåŠŸçŠ¶æ€ã€å’Œã€Œå¤±è´¥çŠ¶æ€ã€çš„å¤„ç†é€»è¾‘ï¼Œä¸”å›è°ƒæ˜¯<strong>å¾®ä»»åŠ¡</strong>ï¼ˆæ™šäºåŒæ­¥ä»£ç æ‰§è¡Œï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-6">Promise é“¾å¼è°ƒç”¨ ç”¨èµ·æ¥ï¼</h2>
<h4 data-id="heading-7">é”™è¯¯å†™æ³•ï¼šåµŒå¥—thenï¼ˆå›è°ƒåœ°ç‹±ï¼‰</h4>
<p>ä½¿ç”¨Promiseã€Œå¸¸è§è¯¯åŒºã€ï¼Œæœ¬è´¨å’Œä¼ ç»Ÿå›è°ƒåµŒå¥—æ²¡åŒºåˆ«ï¼Œå®Œå…¨æµªè´¹äº†Promiseçš„ä¼˜åŠ¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ï¼šåµŒå¥—ä½¿ç”¨thenï¼Œå½¢æˆå›è°ƒåœ°ç‹±</span>
<span class="hljs-title function_">ajax</span>(<span class="hljs-string">'urls.json'</span>).<span class="hljs-title function_">then</span>(
  <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥ï¼šæ‹¿åˆ°urls.jsonç»“æœ'</span>, res);
    <span class="hljs-comment">// è¯¯åŒºï¼šåœ¨ç¬¬ä¸€ä¸ªthençš„å›è°ƒé‡ŒåµŒå¥—ç¬¬äºŒä¸ªthen</span>
    <span class="hljs-title function_">ajax</span>(res.<span class="hljs-property">userUrl</span>).<span class="hljs-title function_">then</span>(
      <span class="hljs-function">(<span class="hljs-params">userRes</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥ï¼šæ‹¿åˆ°ç”¨æˆ·æ•°æ®'</span>, userRes);
        <span class="hljs-comment">// å¦‚æœè¿˜æœ‰ç¬¬ä¸‰ä¸ªè¯·æ±‚ï¼Œä¼šç»§ç»­åµŒå¥—ï¼Œä»£ç è¶Šæ¥è¶Šæ·±</span>
      },
      <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥è¯·æ±‚å¤±è´¥'</span>, err);
      }
    );
  },
  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥è¯·æ±‚å¤±è´¥'</span>, err);
  }
);
</code></pre>
<p>è¿™ç§å†™æ³•çš„é—®é¢˜ï¼š</p>
<ul>
<li>ä»£ç å±‚çº§åµŒå¥—ï¼Œè¶Šå¾€åè¶Šæ·±ï¼Œå¯è¯»æ€§å·®ï¼ˆå›è°ƒåœ°ç‹±ï¼‰</li>
<li>é”™è¯¯å¤„ç†éœ€è¦åœ¨æ¯ä¸ªåµŒå¥—çš„thené‡Œå•ç‹¬å†™ï¼Œå†—ä½™ä¸”éº»çƒ¦</li>
</ul>
<h4 data-id="heading-8">æ­£ç¡®å†™æ³•ï¼šthené“¾å¼è°ƒç”¨ï¼ˆæ‰å¹³åŒ–ï¼‰</h4>
<p>æ ¸å¿ƒåŸç†ï¼š<strong>then æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise</strong>ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é“¾å¼è°ƒç”¨ï¼Œè€ŒéåµŒå¥—ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ­£ç¡®ï¼šé“¾å¼è°ƒç”¨thenï¼Œæ‰å¹³åŒ–ä»£ç </span>
<span class="hljs-title function_">ajax</span>(<span class="hljs-string">'urls.json'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥ï¼šæ‹¿åˆ°urls.jsonç»“æœ'</span>, res);
    <span class="hljs-comment">// å…³é”®ï¼šè¿”å›ä¸‹ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„Promise</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">ajax</span>(res.<span class="hljs-property">userUrl</span>); 
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">userRes</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥ï¼šæ‹¿åˆ°ç”¨æˆ·æ•°æ®'</span>, userRes);
    <span class="hljs-comment">// å¯ä»¥ç»§ç»­é“¾å¼è°ƒç”¨ç¬¬ä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡</span>
    <span class="hljs-comment">// return ajax(ç¬¬ä¸‰ä¸ªåœ°å€);</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-comment">// ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼šä»»ä½•ä¸€æ­¥å¤±è´¥éƒ½ä¼šèµ°åˆ°è¿™é‡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, err.<span class="hljs-property">message</span>);
  });
</code></pre>
<h5 data-id="heading-9">æ‰§è¡Œç»“æœï¼ˆ500msåï¼‰</h5>
<pre><code class="hljs language-css" lang="css">ç¬¬ä¸€æ­¥ï¼šæ‹¿åˆ°urls<span class="hljs-selector-class">.json</span>ç»“æœ { userUrl: <span class="hljs-string">'/user'</span> }
ç¬¬äºŒæ­¥ï¼šæ‹¿åˆ°ç”¨æˆ·æ•°æ® { name: <span class="hljs-string">'å¼ ä¸‰'</span>, age: <span class="hljs-number">20</span> }
</code></pre>
<h4 data-id="heading-10">æ ¸å¿ƒé€»è¾‘æ‹†è§£ï¼ˆä¸ºä»€ä¹ˆé“¾å¼è°ƒç”¨èƒ½é¿å…å›è°ƒåœ°ç‹±ï¼‰</h4>
<ol>
<li><code>ajax('urls.json').then(...)</code> æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ª<strong>æ–°çš„ Promise</strong>ï¼ˆè®°ä¸º P1ï¼‰ã€‚</li>
<li>ç¬¬ä¸€ä¸ª then çš„å›è°ƒé‡Œ <code>return ajax(res.userUrl)</code>ï¼Œè¿™ä¸ª ajax è°ƒç”¨ä¼šè¿”å›å¦ä¸€ä¸ª Promiseï¼ˆè®°ä¸º P2ï¼‰ã€‚</li>
<li>Promise çš„è§„åˆ™ï¼šå¦‚æœ then çš„å›è°ƒè¿”å›ä¸€ä¸ª Promiseï¼ˆP2ï¼‰ï¼Œé‚£ä¹ˆ then å¯¹åº”çš„æ–° Promiseï¼ˆP1ï¼‰ä¼šã€Œç»§æ‰¿ã€P2 çš„çŠ¶æ€â€”â€”P2 æˆåŠŸï¼ŒP1 å°±æˆåŠŸï¼›P2 å¤±è´¥ï¼ŒP1 å°±å¤±è´¥ã€‚</li>
<li>ç¬¬äºŒä¸ª <code>then(...)</code> å…¶å®æ˜¯æŒ‚è½½åœ¨ P1 ä¸Šçš„å›è°ƒï¼Œè€ŒéåµŒå¥—åœ¨ç¬¬ä¸€ä¸ª then å†…éƒ¨ï¼Œæ‰€ä»¥ä»£ç æ˜¯æ‰å¹³çš„ã€‚</li>
</ol>
<h4 data-id="heading-11">æ€»ç»“</h4>
<ol>
<li>Promise é¿å…å›è°ƒåœ°ç‹±çš„æ ¸å¿ƒæ˜¯ <strong>then çš„é“¾å¼è°ƒç”¨</strong>ï¼Œè€ŒéåµŒå¥—ä½¿ç”¨ thenã€‚</li>
<li>å…³é”®è§„åˆ™ï¼š<code>then</code> ä¼šè¿”å›æ–° Promiseï¼Œè‹¥ then å›è°ƒè¿”å› Promiseï¼Œåˆ™æ–° Promise ç»§æ‰¿è¯¥ Promise çš„çŠ¶æ€ã€‚</li>
<li>é“¾å¼è°ƒç”¨+catch å¯ä»¥å®ç°<strong>æ‰å¹³åŒ–ä»£ç ç»“æ„</strong>å’Œ<strong>ç»Ÿä¸€é”™è¯¯å¤„ç†</strong>ï¼Œè¿™æ˜¯ Promise å¯¹æ¯”ä¼ ç»Ÿå›è°ƒçš„æ ¸å¿ƒä¼˜åŠ¿ã€‚</li>
</ol>
<h2 data-id="heading-12">Promise é“¾å¼è°ƒç”¨ çš„ ç‰¹æ®Šæ€§</h2>
<h4 data-id="heading-13">å…ˆå¯¹æ¯”ä¸¤ç§é“¾å¼è°ƒç”¨çš„æœ¬è´¨åŒºåˆ«</h4>
<h5 data-id="heading-14">1. ä¼ ç»Ÿé“¾å¼è°ƒç”¨ï¼ˆè¿”å› thisï¼‰</h5>
<p>æ¯”å¦‚ jQuery çš„é“¾å¼è°ƒç”¨ï¼Œæ ¸å¿ƒæ˜¯æ–¹æ³•å†…éƒ¨è¿”å› <code>this</code>ï¼ˆè‡ªèº«ï¼‰ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ“ä½œåŒä¸€ä¸ªå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿé“¾å¼è°ƒç”¨ï¼šè¿”å›this</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyObj</span> {
  name = <span class="hljs-string">''</span>;
  <span class="hljs-title function_">setName</span>(<span class="hljs-params">name</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// è¿”å›è‡ªèº«ï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>
  }
  <span class="hljs-title function_">logName</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>; <span class="hljs-comment">// è¿”å›è‡ªèº«</span>
  }
}

<span class="hljs-keyword">const</span> obj = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyObj</span>();
obj.<span class="hljs-title function_">setName</span>(<span class="hljs-string">'å¼ ä¸‰'</span>).<span class="hljs-title function_">logName</span>(); 
<span class="hljs-comment">// è¿™é‡Œ setName å’Œ logName æ“ä½œçš„æ˜¯åŒä¸€ä¸ª obj å¯¹è±¡</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-title function_">setName</span>(<span class="hljs-string">'å¼ ä¸‰'</span>) === obj); <span class="hljs-comment">// trueï¼ˆè¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>
</code></pre>
<h5 data-id="heading-15">2. Promise çš„é“¾å¼è°ƒç”¨ï¼ˆè¿”å›æ–°å¯¹è±¡ï¼‰</h5>
<p>Promise çš„ <code>then</code> æ¯è°ƒç”¨ä¸€æ¬¡ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ª<strong>å…¨æ–°çš„ Promise</strong>ï¼Œå’ŒåŸå¯¹è±¡æ¯«æ— å…³ç³»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promiseé“¾å¼è°ƒç”¨ï¼šè¿”å›æ–°å¯¹è±¡</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>));
<span class="hljs-keyword">const</span> p2 = p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res + <span class="hljs-number">10</span>); <span class="hljs-comment">// p2 æ˜¯å…¨æ–°çš„Promise</span>
<span class="hljs-keyword">const</span> p3 = p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res + <span class="hljs-number">10</span>); <span class="hljs-comment">// p3 æ˜¯å…¨æ–°çš„Promise</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1 === p2); <span class="hljs-comment">// falseï¼ˆä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p2 === p3); <span class="hljs-comment">// falseï¼ˆä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼šéªŒè¯æ¯ä¸ªthenå¯¹åº”ä¸åŒçš„Promise</span>
p3.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// 120</span>
</code></pre>
<h4 data-id="heading-16">é€å¥æ‹†é‚£æ®µã€Œç»•å£çš„è¯ã€</h4>
<blockquote>
<p>å¦‚æœæˆ‘ä»¬è¿™é‡Œä¸æ–­çš„é“¾å¼è°ƒç”¨thenæ–¹æ³•ï¼Œç„¶åå‘¢è¿™é‡Œæ¯ä¸€ä¸ªthenæ–¹æ³•ï¼Œå®ƒå®é™…ä¸Šéƒ½æ˜¯åœ¨ä¸ºä¸Šä¸€ä¸ªthenæ–¹æ³•è¿”å›çš„promiseå¯¹è±¡å»æ·»åŠ çŠ¶æ€æ˜ç¡®è¿‡åçš„å›è°ƒã€‚</p>
</blockquote>
<p>æˆ‘ç”¨ã€Œåˆ†æ­¥æ‹†è§£+ä»£ç æ ‡æ³¨ã€çš„æ–¹å¼è§£é‡Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºåŸå§‹Promise p1ï¼ˆç¬¬ä¸€ä¸ªæ‰¿è¯ºï¼‰</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'åˆå§‹å€¼'</span>));

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šè°ƒç”¨p1.then() â†’ è¿”å›æ–°Promise p2ï¼ˆç¬¬äºŒä¸ªæ‰¿è¯ºï¼‰</span>
<span class="hljs-comment">// è¿™ä¸ªthenæ˜¯ç»™p1åŠ å›è°ƒï¼šp1æˆåŠŸåæ‰§è¡Œå›è°ƒï¼Œç„¶åå†³å®šp2çš„çŠ¶æ€</span>
<span class="hljs-keyword">const</span> p2 = p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p1çš„å›è°ƒ:'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šp1çš„å›è°ƒ: åˆå§‹å€¼</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'p1å›è°ƒçš„è¿”å›å€¼'</span>; <span class="hljs-comment">// è¿™ä¸ªè¿”å›å€¼ä¼šå†³å®šp2çš„çŠ¶æ€ï¼ˆæˆåŠŸï¼Œå€¼ä¸ºè¿™ä¸ªå­—ç¬¦ä¸²ï¼‰</span>
});

<span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šè°ƒç”¨p2.then() â†’ è¿”å›æ–°Promise p3ï¼ˆç¬¬ä¸‰ä¸ªæ‰¿è¯ºï¼‰</span>
<span class="hljs-comment">// è¿™ä¸ªthenæ˜¯ç»™p2åŠ å›è°ƒï¼šp2æˆåŠŸåæ‰§è¡Œå›è°ƒï¼Œç„¶åå†³å®šp3çš„çŠ¶æ€</span>
<span class="hljs-keyword">const</span> p3 = p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p2çš„å›è°ƒ:'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šp2çš„å›è°ƒ: p1å›è°ƒçš„è¿”å›å€¼</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'p2å›è°ƒçš„è¿”å›å€¼'</span>;
});

<span class="hljs-comment">// ç¬¬å››æ­¥ï¼šè°ƒç”¨p3.then() â†’ è¿”å›æ–°Promise p4ï¼ˆç¬¬å››ä¸ªæ‰¿è¯ºï¼‰</span>
<span class="hljs-comment">// è¿™ä¸ªthenæ˜¯ç»™p3åŠ å›è°ƒï¼šp3æˆåŠŸåæ‰§è¡Œå›è°ƒï¼Œç„¶åå†³å®šp4çš„çŠ¶æ€</span>
<span class="hljs-keyword">const</span> p4 = p3.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p3çš„å›è°ƒ:'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šp3çš„å›è°ƒ: p2å›è°ƒçš„è¿”å›å€¼</span>
});
</code></pre>
<h5 data-id="heading-17">æ‹†è§£é€»è¾‘ï¼ˆå¯¹åº”ä½ é‚£æ®µè¯ï¼‰ï¼š</h5>
<ol>
<li>ã€Œä¸æ–­é“¾å¼è°ƒç”¨ thenã€â†’ ä»£ç ä¸­ <code>p1.then() â†’ p2.then() â†’ p3.then()</code> å°±æ˜¯é“¾å¼è°ƒç”¨ã€‚</li>
<li>ã€Œæ¯ä¸€ä¸ª then æ–¹æ³•ï¼Œéƒ½æ˜¯ä¸ºä¸Šä¸€ä¸ª then è¿”å›çš„ Promise å¯¹è±¡åŠ å›è°ƒã€ï¼š
<ul>
<li><code>p2.then(...)</code> â†’ æ˜¯ç»™ã€Œp1.then() è¿”å›çš„ p2ã€åŠ å›è°ƒï¼›</li>
<li><code>p3.then(...)</code> â†’ æ˜¯ç»™ã€Œp2.then() è¿”å›çš„ p3ã€åŠ å›è°ƒï¼›</li>
<li>æ¯ä¸ª then éƒ½ä¸æ˜¯ç»™åŸå§‹çš„ p1 åŠ å›è°ƒï¼Œè€Œæ˜¯ç»™ã€Œä¸Šä¸€ä¸ª then ç”Ÿæˆçš„æ–° Promiseã€åŠ å›è°ƒã€‚</li>
</ul>
</li>
<li>ã€ŒçŠ¶æ€æ˜ç¡®è¿‡åçš„å›è°ƒã€ï¼šåªæœ‰å½“è¢«ç»‘å®šçš„ Promiseï¼ˆæ¯”å¦‚ p2ï¼‰çŠ¶æ€å˜ä¸º fulfilled/rejectedï¼Œè¿™ä¸ª then çš„å›è°ƒæ‰ä¼šæ‰§è¡Œã€‚</li>
</ol>
<h4 data-id="heading-18">ä¸ºä»€ä¹ˆè¦è¿”å›å…¨æ–°çš„ Promiseï¼Ÿï¼ˆæ ¸å¿ƒç›®çš„ï¼‰</h4>
<p>ã€Œ<code>è¿”å›å…¨æ–°Promiseçš„ç›®çš„æ˜¯å®ç°Promiseé“¾æ¡ï¼Œä¸€ä¸ªæ‰¿è¯ºç»“æŸåè¿”å›æ–°æ‰¿è¯ºï¼Œæ¯ä¸ªæ‰¿è¯ºè´Ÿè´£ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œç›¸äº’æ— å½±å“</code>ã€ï¼Œç”¨ä¾‹å­éªŒè¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœºæ™¯ï¼šç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆå»¶è¿Ÿ1sï¼‰ï¼Œç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆå»¶è¿Ÿ2sï¼‰</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å®Œæˆ'</span>), <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// ç¬¬ä¸€ä¸ªthenï¼šè´Ÿè´£ç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„ç»“æœå¤„ç†ï¼Œè¿”å›æ–°Promiseï¼ˆç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ï¼‰</span>
<span class="hljs-keyword">const</span> p2 = p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// 1såè¾“å‡ºï¼šç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å®Œæˆ</span>
  <span class="hljs-comment">// è¿”å›æ–°Promiseï¼ˆç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ï¼‰ï¼Œå’Œp1å®Œå…¨ç‹¬ç«‹</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡å®Œæˆ'</span>), <span class="hljs-number">2000</span>);
  });
});

<span class="hljs-comment">// ç¬¬äºŒä¸ªthenï¼šåªå…³å¿ƒp2ï¼ˆç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡ï¼‰çš„çŠ¶æ€ï¼Œå’Œp1æ— å…³</span>
p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// å†ç­‰2såè¾“å‡ºï¼šç¬¬äºŒä¸ªå¼‚æ­¥ä»»åŠ¡å®Œæˆ</span>
});

<span class="hljs-comment">// æ­¤æ—¶æ“ä½œp1ï¼Œä¸ä¼šå½±å“p2</span>
p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p1çš„å¦ä¸€ä¸ªå›è°ƒ'</span>)); <span class="hljs-comment">// 1såè¾“å‡ºï¼Œå’Œp2æ— å…³</span>
</code></pre>
<ul>
<li>æ¯ä¸ª Promiseï¼ˆp1/p2ï¼‰éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œp1 å®Œæˆä¸å½±å“ p2 çš„æ‰§è¡Œé€»è¾‘ï¼Œp2 å»¶è¿Ÿä¹Ÿä¸ä¼šå¹²æ‰° p1 çš„å…¶ä»–å›è°ƒï¼›</li>
<li>è‹¥ then è¿”å› <code>this</code>ï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰ï¼Œåˆ™æ— æ³•å®ç°ã€Œä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡å®Œæˆåï¼Œå†å¯åŠ¨ä¸‹ä¸€ä¸ªç‹¬ç«‹çš„å¼‚æ­¥ä»»åŠ¡ã€ï¼Œå› ä¸ºæ‰€æœ‰ then éƒ½ç»‘å®šåœ¨åŒä¸€ä¸ªå¯¹è±¡ä¸Šï¼ŒçŠ¶æ€åªèƒ½å˜ä¸€æ¬¡ã€‚</li>
</ul>
<h4 data-id="heading-19">æ€»ç»“</h4>
<ol>
<li>Promise é“¾å¼è°ƒç”¨â‰ ä¼ ç»Ÿé“¾å¼è°ƒç”¨ï¼šä¼ ç»Ÿæ˜¯è¿”å› <code>this</code>ï¼ˆåŒä¸€å¯¹è±¡ï¼‰ï¼ŒPromise æ˜¯è¿”å›<strong>å…¨æ–°çš„ Promise å¯¹è±¡</strong>ã€‚</li>
<li>é“¾å¼è°ƒç”¨çš„æœ¬è´¨ï¼šæ¯ä¸ª <code>then</code> éƒ½æ˜¯ç»™ã€Œä¸Šä¸€ä¸ª <code>then</code> è¿”å›çš„æ–° Promiseã€ç»‘å®šå›è°ƒï¼Œè€Œéç»™åŸå§‹ Promise ç»‘å®šã€‚</li>
<li>è¿”å›æ–° Promise çš„æ ¸å¿ƒä»·å€¼ï¼š<code>è®©æ¯ä¸ªå¼‚æ­¥ä»»åŠ¡éƒ½å¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„ã€Œæ‰¿è¯ºã€ï¼Œä»»åŠ¡ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€æŒ‰é¡ºåºæ‰§è¡Œï¼Œå®ç°çœŸæ­£çš„å¼‚æ­¥é“¾æ¡ã€‚</code></li>
</ol>
<h5 data-id="heading-20">è¡¥å……ï¼šthen å›è°ƒè¿”å› Promise â†’ åä¸€ä¸ª then ç­‰å¾…è¯¥ Promise ç»“æŸ</h5>
<ul>
<li>ç¬¬äºŒä¸ª then å›è°ƒè¿”å› <code>delayTask(1000, ...)</code>ï¼ˆä¸€ä¸ªéœ€è¦ç­‰å¾…1sçš„ Promiseï¼‰ï¼›</li>
<li>æ­¤æ—¶ç¬¬ä¸‰ä¸ª then ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰å¾…è¿™ä¸ªè¿”å›çš„ Promise çŠ¶æ€å˜ä¸º <code>fulfilled</code>ï¼ˆ1såå®Œæˆï¼‰ï¼›</li>
<li>ç­‰ä»·äºï¼š<code>ç¬¬ä¸‰ä¸ª then</code> ç›´æ¥ç»‘å®šåˆ°ã€Œç¬¬äºŒä¸ª then è¿”å›çš„è¿™ä¸ª delayTask Promiseã€ä¸Šï¼Œæˆä¸ºå®ƒçš„å›è°ƒã€‚</li>
</ul>
<p>ä¸ºäº†è®©ä½ æ›´æ¸…æ¥šã€Œåä¸€ä¸ª then ç­‰ä»·äºç»™è¿”å›çš„ Promise æ³¨å†Œå›è°ƒã€ï¼ŒæŠŠä¸Šé¢çš„ä»£ç æ‹†æˆéé“¾å¼å†™æ³•ï¼Œé€»è¾‘å®Œå…¨ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‹†åˆ†æˆéé“¾å¼å†™æ³•ï¼Œç­‰ä»·äºä¸Šé¢çš„é“¾å¼è°ƒç”¨</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title function_">delayTask</span>(<span class="hljs-number">1000</span>, <span class="hljs-string">'ç¬¬ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ç»“æœ'</span>);

<span class="hljs-comment">// ç¬¬ä¸€ä¸ªthenï¼šè¿”å›p2</span>
<span class="hljs-keyword">const</span> p2 = p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res1</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€ä¸ªthenå›è°ƒæ‰§è¡Œ:'</span>, res1);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'ç¬¬ä¸€ä¸ªthençš„è¿”å›å€¼ï¼ˆæ™®é€šå€¼ï¼‰'</span>;
});

<span class="hljs-comment">// ç¬¬äºŒä¸ªthenï¼šè¿”å›p3</span>
<span class="hljs-keyword">const</span> p3 = p2.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res2</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒä¸ªthenå›è°ƒæ‰§è¡Œ:'</span>, res2);
  <span class="hljs-comment">// è¿”å›ä¸€ä¸ªæ–°çš„Promise p_temp</span>
  <span class="hljs-keyword">const</span> p_temp = <span class="hljs-title function_">delayTask</span>(<span class="hljs-number">1000</span>, <span class="hljs-string">'ç¬¬äºŒä¸ªthenè¿”å›çš„Promiseç»“æœ'</span>);
  <span class="hljs-keyword">return</span> p_temp;
});

<span class="hljs-comment">// ç¬¬ä¸‰ä¸ªthenï¼šç­‰ä»·äºç»™p_tempæ³¨å†Œå›è°ƒï¼ˆå› ä¸ºp3çš„çŠ¶æ€ç”±p_tempå†³å®šï¼‰</span>
<span class="hljs-keyword">const</span> p4 = p3.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res3</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰ä¸ªthenå›è°ƒæ‰§è¡Œ:'</span>, res3);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'æœ€ç»ˆç»“æœ'</span>;
});

<span class="hljs-comment">// ç­‰ä»·äºç›´æ¥ç»™p_tempæ³¨å†Œå›è°ƒï¼š</span>
<span class="hljs-comment">// p_temp.then((res3) =&gt; {</span>
<span class="hljs-comment">//   console.log('ç¬¬ä¸‰ä¸ªthenå›è°ƒæ‰§è¡Œ:', res3);</span>
<span class="hljs-comment">// });</span>
</code></pre>
<h2 data-id="heading-21">catch() ä¸ <code>then(æˆåŠŸ, å¤±è´¥)</code> çš„å¤±è´¥å›è°ƒ æ˜¯å¦å®Œå…¨ç­‰ä»·ï¼Ÿ</h2>
<h4 data-id="heading-22">å…ˆæ˜ç¡®æ ¸å¿ƒç»“è®ºï¼ˆå…ˆè®°é‡ç‚¹ï¼‰</h4>
<ul>
<li><code>catch()</code> ç­‰ä»·äº <code>then(undefined, å¤±è´¥å›è°ƒ)</code>ï¼Œä½†<strong>ç»‘å®šçš„æ˜¯ä¸Šä¸€ä¸ª then è¿”å›çš„æ–° Promise</strong>ï¼›</li>
<li><code>then(æˆåŠŸå›è°ƒ, å¤±è´¥å›è°ƒ)</code> ä¸­çš„å¤±è´¥å›è°ƒï¼Œ<strong>åªç»‘å®šå½“å‰ Promise</strong>ï¼Œç®¡ä¸åˆ°åç»­ then é‡Œçš„æ–° Promise å¼‚å¸¸ï¼›</li>
<li>Promise é“¾æ¡ä¸­ï¼Œå¼‚å¸¸ä¼šã€Œå‘åä¼ é€’ã€ï¼Œç›´åˆ°è¢«æŸä¸ªå¤±è´¥å›è°ƒæ•è·ã€‚</li>
</ul>
<h4 data-id="heading-23">å¯¹æ¯”ç¤ºä¾‹ï¼šthenç¬¬äºŒä¸ªå‚æ•° vs catchï¼ˆç›´è§‚çœ‹å·®å¼‚ï¼‰</h4>
<p>æˆ‘ä»¬ç”¨ã€Œä¸¤æ­¥å¼‚æ­¥ä»»åŠ¡ã€çš„åœºæ™¯ï¼Œæ¨¡æ‹Ÿç¬¬ä¸€æ­¥æˆåŠŸã€ç¬¬äºŒæ­¥å¤±è´¥çš„æƒ…å†µï¼Œå¯¹æ¯”ä¸¤ç§å†™æ³•çš„ç»“æœï¼š</p>
<h5 data-id="heading-24">ç¬¬ä¸€æ­¥ï¼šå°è£…æ¨¡æ‹Ÿå¼‚æ­¥å‡½æ•°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡1ï¼šä¸€å®šæˆåŠŸï¼Œè¿”å›"ç¬¬ä¸€æ­¥ç»“æœ"</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">task1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">"ç¬¬ä¸€æ­¥ç»“æœ"</span>);
  });
}

<span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡2ï¼šä¸€å®šå¤±è´¥ï¼ŒæŠ›å‡ºå¼‚å¸¸</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">task2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ç¬¬äºŒæ­¥æ‰§è¡Œå¤±è´¥"</span>));
  });
}
</code></pre>
<h5 data-id="heading-25">åœºæ™¯1ï¼šç”¨ then çš„ç¬¬äºŒä¸ªå‚æ•°æ³¨å†Œå¤±è´¥å›è°ƒï¼ˆåªèƒ½æ•è·ç¬¬ä¸€æ­¥å¼‚å¸¸ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†™æ³•1ï¼šthen(æˆåŠŸå›è°ƒ, å¤±è´¥å›è°ƒ)</span>
<span class="hljs-title function_">task1</span>()
  .<span class="hljs-title function_">then</span>(
    <span class="hljs-comment">// æˆåŠŸå›è°ƒï¼šç¬¬ä¸€æ­¥æˆåŠŸåæ‰§è¡Œï¼Œè°ƒç”¨task2ï¼ˆè¿”å›å¤±è´¥çš„Promiseï¼‰</span>
    <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€æ­¥æˆåŠŸï¼š"</span>, res);
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">task2</span>(); <span class="hljs-comment">// è¿”å›ä¸€ä¸ªå¤±è´¥çš„æ–°Promiseï¼ˆè®°ä¸ºP2ï¼‰</span>
    },
    <span class="hljs-comment">// å¤±è´¥å›è°ƒï¼šåªç»‘å®štask1è¿”å›çš„Promiseï¼ˆè®°ä¸ºP1ï¼‰ï¼Œåªèƒ½æ•è·P1çš„å¼‚å¸¸</span>
    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•è·åˆ°å¼‚å¸¸ï¼š"</span>, err.<span class="hljs-property">message</span>);
    }
  );

<span class="hljs-comment">/* è¾“å‡ºç»“æœï¼š
ç¬¬ä¸€æ­¥æˆåŠŸï¼š ç¬¬ä¸€æ­¥ç»“æœ
Uncaught (in promise) Error: ç¬¬äºŒæ­¥æ‰§è¡Œå¤±è´¥
*/</span>
</code></pre>
<p><strong>å…³é”®é—®é¢˜</strong>ï¼šç¬¬äºŒæ­¥çš„å¼‚å¸¸æ²¡è¢«æ•è·ï¼å› ä¸º then çš„ç¬¬äºŒä¸ªå‚æ•°åªè´Ÿè´£ã€Œtask1 è¿”å›çš„ P1ã€ï¼Œç®¡ä¸åˆ°ã€Œç¬¬ä¸€ä¸ª then è¿”å›çš„ P2ï¼ˆtask2 çš„ Promiseï¼‰ã€çš„å¼‚å¸¸ã€‚</p>
<h5 data-id="heading-26">åœºæ™¯2ï¼šç”¨ catch æ³¨å†Œå¤±è´¥å›è°ƒï¼ˆèƒ½æ•è·æ•´ä¸ªé“¾æ¡çš„å¼‚å¸¸ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å†™æ³•2ï¼šthen(æˆåŠŸå›è°ƒ) + catch(å¤±è´¥å›è°ƒ)</span>
<span class="hljs-title function_">task1</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç¬¬ä¸€æ­¥æˆåŠŸï¼š"</span>, res);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">task2</span>(); <span class="hljs-comment">// è¿”å›å¤±è´¥çš„P2</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-comment">// catchç»‘å®šçš„æ˜¯ã€Œä¸Šä¸€ä¸ªthenè¿”å›çš„P2ã€ï¼Œèƒ½æ•è·P2çš„å¼‚å¸¸</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ•è·åˆ°å¼‚å¸¸ï¼š"</span>, err.<span class="hljs-property">message</span>);
  });

<span class="hljs-comment">/* è¾“å‡ºç»“æœï¼š
ç¬¬ä¸€æ­¥æˆåŠŸï¼š ç¬¬ä¸€æ­¥ç»“æœ
æ•è·åˆ°å¼‚å¸¸ï¼š ç¬¬äºŒæ­¥æ‰§è¡Œå¤±è´¥
*/</span>
</code></pre>
<p><strong>æ ¸å¿ƒåŸå› </strong>ï¼šcatch ç­‰ä»·äº <code>then(undefined, å¤±è´¥å›è°ƒ)</code>ï¼Œè¿™ä¸ªå¤±è´¥å›è°ƒç»‘å®šåœ¨ã€Œç¬¬ä¸€ä¸ª then è¿”å›çš„ P2ã€ä¸Šï¼Œåˆšå¥½èƒ½æ•è· P2 çš„å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-27">æ‹†è§£å¼‚å¸¸ä¼ é€’+å›è°ƒç»‘å®šé€»è¾‘ï¼ˆä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿï¼‰</h4>
<p>æˆ‘ä»¬ç”¨ã€ŒPromise é“¾æ¡å¯¹è±¡å…³ç³»ã€æ¥æ‹†è§£ä¸Šé¢çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">task1</span>() â†’ è¿”å› P1ï¼ˆæˆåŠŸçŠ¶æ€ï¼‰
â†“
P1<span class="hljs-selector-class">.then</span>(æˆåŠŸå›è°ƒ, å¤±è´¥å›è°ƒ) â†’ è¿”å› P2ï¼ˆç”±æˆåŠŸå›è°ƒçš„è¿”å›å€¼å†³å®šï¼š<span class="hljs-built_in">task2</span>() è¿”å›å¤±è´¥çš„Promise â†’ P2 å¤±è´¥ï¼‰
â†“
P2<span class="hljs-selector-class">.catch</span>(å¤±è´¥å›è°ƒ) â†’ ç»‘å®šåœ¨ P2 ä¸Šï¼Œæ•è· P2 çš„å¤±è´¥
</code></pre>
<h5 data-id="heading-28">å…³é”®ç»†èŠ‚ï¼š</h5>
<ol>
<li><code>then(æˆåŠŸå›è°ƒ, å¤±è´¥å›è°ƒ)</code> çš„å¤±è´¥å›è°ƒ â†’ åªç»‘å®š <strong>P1</strong>ï¼Œåªèƒ½å¤„ç† P1 çš„å¼‚å¸¸ï¼ˆæ¯”å¦‚ task1 å¤±è´¥ï¼‰ï¼›</li>
<li><code>catch()</code> â†’ ç»‘å®š <strong>P2</strong>ï¼Œèƒ½å¤„ç† P2 çš„å¼‚å¸¸ï¼ˆåŒ…æ‹¬ P2 è‡ªèº«å¤±è´¥ã€æˆ– P1 æœªè¢«æ•è·çš„å¼‚å¸¸å‘åä¼ é€’è¿‡æ¥ï¼‰ï¼›</li>
<li>å¼‚å¸¸ä¼ é€’è§„åˆ™ï¼šå¦‚æœä¸€ä¸ª Promise å¤±è´¥ä¸”æ²¡æœ‰å¯¹åº”çš„å¤±è´¥å›è°ƒï¼Œå¼‚å¸¸ä¼šã€Œé¡ºç€é“¾æ¡å¾€åä¼ ã€ï¼Œç›´åˆ°è¢«æŸä¸ª catch/then å¤±è´¥å›è°ƒæ•è·ã€‚</li>
</ol>
<h4 data-id="heading-29">è¡¥å……ï¼šå¦‚æœç¬¬ä¸€æ­¥å°±å¤±è´¥ï¼Œä¸¤ç§å†™æ³•çš„è¡¨ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ”¹é€ task1ï¼šè®©ç¬¬ä¸€æ­¥ç›´æ¥å¤±è´¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">task1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ç¬¬ä¸€æ­¥æ‰§è¡Œå¤±è´¥"</span>));
  });
}

<span class="hljs-comment">// å†™æ³•1ï¼šthençš„ç¬¬äºŒä¸ªå‚æ•° â†’ èƒ½æ•è·P1çš„å¼‚å¸¸</span>
<span class="hljs-title function_">task1</span>().<span class="hljs-title function_">then</span>(
  <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res),
  <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"thenæ•è·ï¼š"</span>, err.<span class="hljs-property">message</span>) <span class="hljs-comment">// è¾“å‡ºï¼šthenæ•è·ï¼šç¬¬ä¸€æ­¥æ‰§è¡Œå¤±è´¥</span>
);

<span class="hljs-comment">// å†™æ³•2ï¼šcatch â†’ ä¹Ÿèƒ½æ•è·ï¼ˆå› ä¸ºP1çš„å¼‚å¸¸ä¼ é€’åˆ°P2ï¼Œè¢«catchæ•è·ï¼‰</span>
<span class="hljs-title function_">task1</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"catchæ•è·ï¼š"</span>, err.<span class="hljs-property">message</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šcatchæ•è·ï¼šç¬¬ä¸€æ­¥æ‰§è¡Œå¤±è´¥</span>
</code></pre>
<p>è¿™è¯´æ˜ï¼š<strong>catch èƒ½æ•è·æ•´ä¸ªé“¾æ¡ä¸­ã€Œå‰é¢æ‰€æœ‰æœªè¢«å¤„ç†çš„å¼‚å¸¸ã€ï¼Œè€Œ then ç¬¬äºŒä¸ªå‚æ•°åªèƒ½æ•è·ã€Œå½“å‰ Promiseã€çš„å¼‚å¸¸</strong>ã€‚</p>
<h4 data-id="heading-30">ä¸ºä»€ä¹ˆ catch æ›´é€‚åˆé“¾å¼è°ƒç”¨ï¼Ÿ</h4>
<ul>
<li>é“¾å¼è°ƒç”¨çš„æ ¸å¿ƒæ˜¯ã€Œå¤šä¸ªå¼‚æ­¥ä»»åŠ¡ä¾æ¬¡æ‰§è¡Œã€ï¼Œæ¯ä¸ªä»»åŠ¡å¯¹åº”é“¾æ¡ä¸­çš„ä¸€ä¸ª Promiseï¼›</li>
<li>ç”¨ catch å¯ä»¥ã€Œç»Ÿä¸€æ•è·æ•´ä¸ªé“¾æ¡çš„æ‰€æœ‰å¼‚å¸¸ã€ï¼Œæ— éœ€åœ¨æ¯ä¸ª then é‡Œå†™å¤±è´¥å›è°ƒï¼›</li>
<li>ç”¨ then ç¬¬äºŒä¸ªå‚æ•°åˆ™éœ€è¦ã€Œæ¯ä¸ª then éƒ½å†™å¤±è´¥å›è°ƒã€ï¼Œå¦åˆ™åç»­ Promise çš„å¼‚å¸¸ä¼šé€ƒé€¸ï¼ˆæœªæ•è·ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-31">æ€»ç»“</h4>
<ol>
<li><code>catch()</code> æ˜¯ <code>then(undefined, å¤±è´¥å›è°ƒ)</code> çš„è¯­æ³•ç³–ï¼Œä½†ç»‘å®šçš„æ˜¯<strong>ä¸Šä¸€ä¸ª then è¿”å›çš„æ–° Promise</strong>ï¼Œè€ŒéåŸå§‹ Promiseï¼›</li>
<li><code>then(æˆåŠŸ, å¤±è´¥)</code> çš„å¤±è´¥å›è°ƒ<strong>ä»…ç»‘å®šå½“å‰ Promise</strong>ï¼Œæ— æ³•æ•è·åç»­ then ä¸­è¿”å›çš„æ–° Promise å¼‚å¸¸ï¼›</li>
<li>Promise å¼‚å¸¸ä¼šã€Œå‘åä¼ é€’ã€ï¼Œcatch å› ç»‘å®šåœ¨é“¾æ¡æœ«ç«¯çš„ Promise ä¸Šï¼Œèƒ½æ•è·æ•´ä¸ªé“¾æ¡çš„æ‰€æœ‰æœªå¤„ç†å¼‚å¸¸ï¼Œè¿™ä¹Ÿæ˜¯å®ƒæ›´é€‚åˆé“¾å¼è°ƒç”¨çš„æ ¸å¿ƒåŸå› ã€‚</li>
</ol>
<h2 data-id="heading-32">unhandledrejection æ˜¯å¦æ¨èä½¿ç”¨</h2>
<h4 data-id="heading-33">ä¸€ã€å…ˆç®€å•äº†è§£å…¨å±€æ•è·ï¼ˆä»…ä½œè®¤çŸ¥ï¼Œä¸æ¨èä½¿ç”¨ï¼‰</h4>
<h5 data-id="heading-34">1. æµè§ˆå™¨ç¯å¢ƒï¼ˆwindow ä¸Šæ³¨å†Œ unhandledrejectionï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµè§ˆå™¨ä¸­å…¨å±€æ•è·æœªå¤„ç†çš„Promiseå¼‚å¸¸ï¼ˆä»…æ¼”ç¤ºï¼Œä¸æ¨èï¼‰</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-comment">// é˜»æ­¢æµè§ˆå™¨é»˜è®¤çš„é”™è¯¯æç¤ºï¼ˆæ¯”å¦‚æ§åˆ¶å°çš„çº¢è‰²æŠ¥é”™ï¼‰</span>
  event.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨å±€æ•è·æœªå¤„ç†çš„Promiseå¼‚å¸¸ï¼š'</span>, event.<span class="hljs-property">reason</span>.<span class="hljs-property">message</span>);
});

<span class="hljs-comment">// æµ‹è¯•ï¼šæŠ›å‡ºä¸€ä¸ªæœªæ‰‹åŠ¨æ•è·çš„Promiseå¼‚å¸¸</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¿™æ˜¯ä¸€ä¸ªæœªè¢«æ‰‹åŠ¨æ•è·çš„å¼‚å¸¸'</span>));
});
<span class="hljs-comment">// æ§åˆ¶å°ä¼šè¾“å‡ºï¼šå…¨å±€æ•è·æœªå¤„ç†çš„Promiseå¼‚å¸¸ï¼šè¿™æ˜¯ä¸€ä¸ªæœªè¢«æ‰‹åŠ¨æ•è·çš„å¼‚å¸¸</span>
</code></pre>
<h5 data-id="heading-35">2. Node.js ç¯å¢ƒï¼ˆprocess ä¸Šæ³¨å†Œ unhandledRejectionï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Node.jsä¸­å…¨å±€æ•è·ï¼ˆä»…æ¼”ç¤ºï¼Œä¸æ¨èï¼‰</span>
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'unhandledRejection'</span>, <span class="hljs-function">(<span class="hljs-params">reason, promise</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨å±€æ•è·æœªå¤„ç†çš„Promiseå¼‚å¸¸ï¼š'</span>, reason.<span class="hljs-property">message</span>);
});

<span class="hljs-comment">// æµ‹è¯•</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Nodeä¸­æœªè¢«æ‰‹åŠ¨æ•è·çš„å¼‚å¸¸'</span>));
});
</code></pre>
<h4 data-id="heading-36">äºŒã€ä¸ºä»€ä¹ˆå¼ºçƒˆä¸æ¨èå…¨å±€æ•è·ï¼Ÿï¼ˆæ ¸å¿ƒåŸå› ï¼‰</h4>
<p>ã€Œä¸æ¨èå…¨å±€ç»Ÿä¸€å¤„ç†ã€ï¼Œæ ¸å¿ƒé—®é¢˜æœ‰è¿™å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šå…¨å±€æ•è·ä¼šã€Œå…œåº•ã€æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸ï¼Œä½†æ— æ³•ç²¾å‡†å®šä½å¼‚å¸¸å‘ç”Ÿçš„ä½ç½®â€”â€”ä¸€ä¸ªå¤§å‹é¡¹ç›®ä¸­ï¼Œä½ æ— æ³•ä»å…¨å±€å›è°ƒé‡Œå¿«é€ŸçŸ¥é“æ˜¯å“ªä¸€è¡Œä»£ç ã€å“ªä¸ªå¼‚æ­¥ä»»åŠ¡æŠ›å‡ºçš„å¼‚å¸¸ã€‚</li>
<li><strong>æ©ç›–é—®é¢˜</strong>ï¼šå…¨å±€æ•è·ä¼šè®©å¼€å‘è€…äº§ç”Ÿã€Œåæ­£æœ‰å…œåº•ï¼Œä¸ç”¨æ‰‹åŠ¨å†™ catchã€çš„æƒ°æ€§ï¼Œå¯¼è‡´ä»£ç ä¸­å¤§é‡å¼‚å¸¸æ²¡æœ‰è¢«ã€Œé’ˆå¯¹æ€§å¤„ç†ã€ï¼ˆæ¯”å¦‚æŸä¸ªæ¥å£å¤±è´¥éœ€è¦é‡è¯•ï¼Œå¦ä¸€ä¸ªéœ€è¦æç¤ºç”¨æˆ·ï¼Œå…¨å±€æ•è·åªèƒ½ç»Ÿä¸€æ‰“å°ï¼Œæ— æ³•å·®å¼‚åŒ–å¤„ç†ï¼‰ã€‚</li>
<li><strong>ä¸å¯æ§æ€§</strong>ï¼šå…¨å±€äº‹ä»¶æ˜¯ã€Œæœ€åä¸€é“é˜²çº¿ã€ï¼Œè‹¥ä»£ç ä¸­æ¼å†™ catchï¼Œå…¨å±€æ•è·ä¼šæ¥ä½å¼‚å¸¸ï¼Œä½†è¿™å±äºã€Œè¢«åŠ¨è¡¥æ•‘ã€ï¼Œè€Œéã€Œä¸»åŠ¨å¤„ç†ã€ï¼Œå®¹æ˜“åŸ‹ä¸‹çº¿ä¸Šbugï¼ˆæ¯”å¦‚å¼‚å¸¸å¤„ç†é€»è¾‘ä¸åŒ¹é…åœºæ™¯ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-37">ä¸‰ã€æ›´ä¼˜çš„åšæ³•ï¼šæ˜¾å¼æ•è·æ¯ä¸€ä¸ªå¯èƒ½çš„å¼‚å¸¸</h4>
<p>æœ€ä½³å®è·µæ˜¯ã€Œé“¾å¼è°ƒç”¨æœ«å°¾åŠ  catchã€+ã€Œé’ˆå¯¹ä¸åŒåœºæ™¯å·®å¼‚åŒ–å¤„ç†å¼‚å¸¸ã€ï¼Œç”šè‡³å¯ä»¥ç»™ä¸åŒå¼‚æ­¥ä»»åŠ¡åŠ ã€Œä¸“å±çš„å¼‚å¸¸å¤„ç†ã€ã€‚</p>
<h5 data-id="heading-38">ç¤ºä¾‹1ï¼šåŸºç¡€ç‰ˆâ€”â€”é“¾å¼æœ«å°¾ç»Ÿä¸€ catch</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸¤ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œç¬¬äºŒæ­¥å¯èƒ½å¤±è´¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">task1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬ä¸€æ­¥æˆåŠŸ'</span>));
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">task2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿéšæœºå¤±è´¥</span>
    <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> 
      ? <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥æˆåŠŸ'</span>) 
      : <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥æ¥å£è°ƒç”¨å¤±è´¥'</span>));
  });
}

<span class="hljs-comment">// æ˜¾å¼æ•è·ï¼šé“¾å¼æœ«å°¾åŠ catchï¼Œé’ˆå¯¹æ€§å¤„ç†</span>
<span class="hljs-title function_">task1</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">task2</span>();
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-comment">// ç²¾å‡†å¤„ç†ï¼šåŒºåˆ†ä¸åŒå¼‚å¸¸ï¼Œåšä¸åŒæ“ä½œ</span>
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">message</span> === <span class="hljs-string">'ç¬¬äºŒæ­¥æ¥å£è°ƒç”¨å¤±è´¥'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†ç¬¬äºŒæ­¥å¤±è´¥ï¼š'</span>, <span class="hljs-string">'é‡è¯•ä¸€æ¬¡æˆ–æç¤ºç”¨æˆ·'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¶ä»–å¼‚å¸¸ï¼š'</span>, err.<span class="hljs-property">message</span>);
    }
  });
</code></pre>
<h5 data-id="heading-39">ç¤ºä¾‹2ï¼šè¿›é˜¶ç‰ˆâ€”â€”åˆ†é˜¶æ®µæ•è·ï¼ˆä¸åŒä»»åŠ¡å•ç‹¬å¤„ç†ï¼‰</h5>
<p>å¦‚æœæŸä¸ªå¼‚æ­¥ä»»åŠ¡çš„å¼‚å¸¸éœ€è¦ã€Œå•ç‹¬å¤„ç†ï¼Œä¸ä¸­æ–­åç»­æµç¨‹ã€ï¼Œå¯ä»¥åœ¨è¯¥ä»»åŠ¡çš„ then åç´§è·Ÿ catchï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">task1</span>()
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
    <span class="hljs-comment">// ç¬¬äºŒæ­¥å¤±è´¥åå•ç‹¬å¤„ç†ï¼Œä¸å½±å“åç»­æµç¨‹</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">task2</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒæ­¥å•ç‹¬å¤„ç†å¤±è´¥ï¼š'</span>, err.<span class="hljs-property">message</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-string">'ç¬¬äºŒæ­¥å¤±è´¥åçš„å…œåº•å€¼'</span>; <span class="hljs-comment">// è¿”å›å…œåº•å€¼ï¼Œè®©é“¾æ¡ç»§ç»­</span>
    });
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
    <span class="hljs-comment">// `æ— è®ºç¬¬äºŒæ­¥æˆåŠŸ/å¤±è´¥ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™é‡Œ`--- é‡ç‚¹ï¼ï¼ï¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰æ­¥ï¼šæ¥æ”¶ç¬¬äºŒæ­¥ç»“æœ'</span>, res);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-comment">// æ•è·å…¶ä»–æœªå¤„ç†çš„å¼‚å¸¸</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…¨å±€å…œåº•ï¼ˆæå°‘è§¦å‘ï¼‰ï¼š'</span>, err.<span class="hljs-property">message</span>);
  });
</code></pre>
<h4 data-id="heading-40">æ€»ç»“</h4>
<ol>
<li>å…¨å±€ <code>unhandledrejection</code>/<code>unhandledRejection</code> æ˜¯ã€Œå…œåº•æ–¹æ¡ˆã€ï¼Œä»…é€‚åˆä¸´æ—¶è°ƒè¯•æˆ–ç´§æ€¥è¡¥æ•‘ï¼Œ<strong>ä¸æ¨èä½œä¸ºå¸¸è§„å¼‚å¸¸å¤„ç†æ–¹å¼</strong>ï¼›</li>
<li>æœ€ä½³å®è·µæ˜¯ã€Œæ˜¾å¼æ•è·ã€ï¼šåœ¨ Promise é“¾æ¡æœ«å°¾åŠ  <code>catch</code>ï¼Œé’ˆå¯¹ä¸åŒå¼‚å¸¸åšã€Œå·®å¼‚åŒ–å¤„ç†ã€ï¼ˆé‡è¯•ã€å…œåº•ã€æç¤ºç”¨æˆ·ç­‰ï¼‰ï¼›</li>
<li>è‹¥éœ€è¦ä¿ç•™é“¾æ¡æ‰§è¡Œï¼Œå¯åœ¨å•ä¸ªå¼‚æ­¥ä»»åŠ¡åç´§è·Ÿ catchï¼Œè¿”å›å…œåº•å€¼ï¼Œé¿å…æ•´ä¸ªé“¾æ¡ä¸­æ–­ã€‚</li>
<li><strong><code>å…³äºcatchè¿”å›å€¼ï¼š</code></strong>
<ul>
<li>å¦‚æœ catch å›è°ƒ<strong>è¿”å›æ­£å¸¸å€¼</strong>ï¼ˆæ™®é€šå€¼ / æˆåŠŸçš„ Promiseï¼‰â†’ æ–° Promise çŠ¶æ€ä¸º <code>fulfilled</code>ï¼ˆæˆåŠŸï¼‰ï¼›</li>
<li>å¦‚æœ catch å›è°ƒ<strong>æŠ›å‡ºå¼‚å¸¸ / è¿”å›å¤±è´¥çš„ Promise</strong> â†’ æ–° Promise çŠ¶æ€ä¸º <code>rejected</code>ï¼ˆå¤±è´¥ï¼‰</li>
</ul>
</li>
</ol>
<ul>
<li>å¦‚æœ catch å›è°ƒ<strong>æŠ›å‡ºå¼‚å¸¸ / è¿”å›å¤±è´¥çš„ Promise</strong> â†’ æ–° Promise çŠ¶æ€ä¸º <code>rejected</code>ï¼ˆå¤±è´¥ï¼‰</li>
</ul>
<h2 data-id="heading-41">Promise.reslove</h2>
<h4 data-id="heading-42">ä¸€ã€Promise.resolve() åŸºæœ¬ç”¨æ³•</h4>
<p><code>Promise.resolve(value)</code> æ˜¯åˆ›å»ºã€Œå·²æˆåŠŸ Promiseã€çš„å¿«æ·æ–¹å¼ï¼Œæ— éœ€æ‰‹åŠ¨å†™ <code>new Promise</code> + <code>resolve</code>ï¼Œæ ¸å¿ƒé€»è¾‘å°±æ˜¯ï¼š<strong>æ¥æ”¶ä¸€ä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªçŠ¶æ€ä¸º fulfilled çš„ Promiseï¼Œä¸”è¯¥å€¼ä¼šä½œä¸º Promise çš„æˆåŠŸç»“æœ</strong>ã€‚</p>
<h5 data-id="heading-43">ä»£ç ç¤ºä¾‹ï¼šPromise.resolve() åŸºç¡€ä½¿ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨ Promise.resolve å¿«é€Ÿåˆ›å»ºæˆåŠŸçš„ Promise</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'foo'</span>);

<span class="hljs-comment">// è°ƒç”¨ then æ¥æ”¶ç»“æœï¼ˆä½ æåˆ°çš„ unfulfilled æ˜¯ç¬”è¯¯ï¼Œæ­£ç¡®æ˜¯ fulfilledï¼‰</span>
p1.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆåŠŸå›è°ƒæ‹¿åˆ°çš„å€¼ï¼š'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šæˆåŠŸå›è°ƒæ‹¿åˆ°çš„å€¼ï¼šfoo</span>
});
</code></pre>
<h4 data-id="heading-44">äºŒã€ç­‰ä»·é€»è¾‘ï¼šPromise.resolve() â‰ˆ new Promise + resolve</h4>
<p>ä½ æåˆ°ã€Œè¿™ç§æ–¹å¼å®Œå…¨ç­‰ä»·äº new Promise ç„¶åç›´æ¥ resolve è¯¥å€¼ã€ï¼Œæˆ‘ä»¬ç”¨ä»£ç éªŒè¯è¿™ä¸ªç­‰ä»·æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–¹å¼1ï¼šPromise.resolve å¿«æ·å†™æ³•</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'foo'</span>);

<span class="hljs-comment">// æ–¹å¼2ï¼šnew Promise å®Œæ•´å†™æ³•ï¼ˆå’Œæ–¹å¼1å®Œå…¨ç­‰ä»·ï¼‰</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-comment">// åœ¨æ‰§è¡Œå‡½æ•°ä¸­ç›´æ¥ resolve 'foo'ï¼ŒPromise çŠ¶æ€ç«‹å³å˜ä¸º fulfilled</span>
  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'foo'</span>);
});

<span class="hljs-comment">// æµ‹è¯•ä¸¤ä¸ª Promise çš„æ‰§è¡Œç»“æœï¼ˆå®Œå…¨ä¸€è‡´ï¼‰</span>
p1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p1ç»“æœï¼š'</span>, res)); <span class="hljs-comment">// p1ç»“æœï¼šfoo</span>
p2.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p2ç»“æœï¼š'</span>, res)); <span class="hljs-comment">// p2ç»“æœï¼šfoo</span>
</code></pre>
<h5 data-id="heading-45">æ ¸å¿ƒç­‰ä»·ç‚¹ï¼š</h5>
<ul>
<li>ä¸¤è€…åˆ›å»ºçš„ Promise çŠ¶æ€éƒ½æ˜¯ <code>fulfilled</code>ï¼ˆæˆåŠŸï¼‰ï¼›</li>
<li>ä¸¤è€…çš„æˆåŠŸå›è°ƒæ‹¿åˆ°çš„å‚æ•°éƒ½æ˜¯ä¼ å…¥çš„ <code>'foo'</code>ï¼›</li>
<li>ä¸¤è€…çš„æ‰§è¡Œæ—¶æœºä¸€è‡´ï¼š<code>Promise.resolve()</code> å†…éƒ¨çš„é€»è¾‘å’Œ <code>new Promise</code> çš„æ‰§è¡Œå‡½æ•°ä¸€æ ·ï¼Œæ˜¯<strong>åŒæ­¥æ‰§è¡Œ</strong>çš„ï¼ˆä½†å›è°ƒä»ä¸ºå¾®ä»»åŠ¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-46">ä¸‰ã€Promise.resolve() çš„è¿›é˜¶åœºæ™¯ï¼ˆæ‹“å±•ç†è§£ï¼‰</h4>
<p>é™¤äº†ä¼ å…¥æ™®é€šå€¼ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ç­‰ï¼‰ï¼Œ<code>Promise.resolve()</code> è¿˜æœ‰ä¸¤ä¸ªå¸¸è§åœºæ™¯ï¼Œå¸®ä½ å…¨é¢æŒæ¡ï¼š</p>
<h5 data-id="heading-47">åœºæ™¯1ï¼šä¼ å…¥ Promise å¯¹è±¡</h5>
<p>å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªå·²å­˜åœ¨çš„ Promiseï¼Œ<code>Promise.resolve()</code> ä¼šç›´æ¥è¿”å›è¿™ä¸ª Promiseï¼ˆä¸ä¼šåˆ›å»ºæ–°å¯¹è±¡ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> originalPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'åŸå§‹Promise'</span>));
<span class="hljs-keyword">const</span> wrappedPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(originalPromise);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(originalPromise === wrappedPromise); <span class="hljs-comment">// trueï¼ˆè¿”å›åŒä¸€ä¸ªå¯¹è±¡ï¼‰</span>
wrappedPromise.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)); <span class="hljs-comment">// åŸå§‹Promise</span>
</code></pre>
<h5 data-id="heading-48">åœºæ™¯2ï¼šä¼ å…¥ã€Œç±» Promise å¯¹è±¡ã€ï¼ˆthenableï¼‰</h5>
<p>å¦‚æœä¼ å…¥çš„æ˜¯æœ‰ <code>then</code> æ–¹æ³•çš„å¯¹è±¡ï¼ˆç§°ä¸º thenableï¼‰ï¼Œ<code>Promise.resolve()</code> ä¼šæ‰§è¡Œå…¶ <code>then</code> æ–¹æ³•ï¼Œå°†å…¶è½¬æ¢æˆæ ‡å‡† Promiseï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ª thenable å¯¹è±¡ï¼ˆæœ‰ then æ–¹æ³•ï¼Œä½†ä¸æ˜¯çœŸæ­£çš„ Promiseï¼‰</span>
<span class="hljs-keyword">const</span> thenable = {
  <span class="hljs-title function_">then</span>(<span class="hljs-params">resolve</span>) {
    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'thenable è½¬æ¢çš„ç»“æœ'</span>);
  }
};

<span class="hljs-comment">// Promise.resolve ä¼šæ‰§è¡Œ then æ–¹æ³•ï¼Œè½¬æ¢æˆæ ‡å‡† Promise</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(thenable).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res); <span class="hljs-comment">// è¾“å‡ºï¼šthenable è½¬æ¢çš„ç»“æœ</span>
});
</code></pre>
<h4 data-id="heading-49">å››ã€ä¸ºä»€ä¹ˆè¦ç”¨ Promise.resolve()ï¼Ÿ</h4>
<p>ç›¸æ¯” <code>new Promise</code> å†™æ³•ï¼Œ<code>Promise.resolve()</code> çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li><strong>ç®€åŒ–ä»£ç </strong>ï¼šåˆ›å»ºå·²æˆåŠŸçš„ Promise æ—¶ï¼Œå°‘å†™åµŒå¥—çš„æ‰§è¡Œå‡½æ•°ï¼Œä»£ç æ›´ç®€æ´ï¼›</li>
<li><strong>ç»Ÿä¸€æ¥å£</strong>ï¼šå½“ä½ ä¸ç¡®å®šä¸€ä¸ªå€¼æ˜¯æ™®é€šå€¼è¿˜æ˜¯ Promise æ—¶ï¼Œç”¨ <code>Promise.resolve()</code> å¯ä»¥ã€Œå½’ä¸€åŒ–ã€æˆ Promiseï¼Œæ–¹ä¾¿é“¾å¼è°ƒç”¨ï¼š
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾ fn å¯èƒ½è¿”å›æ™®é€šå€¼ï¼Œä¹Ÿå¯èƒ½è¿”å› Promise</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-number">0.5</span> ? <span class="hljs-string">'æ™®é€šå€¼'</span> : <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'Promiseå€¼'</span>);
}

<span class="hljs-comment">// ç”¨ Promise.resolve ç»Ÿä¸€å¤„ç†ï¼Œæ— éœ€åŒºåˆ†ç±»å‹</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">fn</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»Ÿä¸€æ‹¿åˆ°ç»“æœï¼š'</span>, res);
});
</code></pre>
</li>
</ol>
<h4 data-id="heading-50">æ€»ç»“</h4>
<ol>
<li><code>Promise.resolve(value)</code> æ˜¯åˆ›å»º<strong>çŠ¶æ€ä¸º fulfilled çš„ Promise</strong> çš„å¿«æ·æ–¹å¼ï¼Œç­‰ä»·äº <code>new Promise((resolve) =&gt; resolve(value))</code>ï¼›</li>
<li>ä¼ å…¥æ™®é€šå€¼æ—¶ï¼Œè¯¥å€¼ä¼šä½œä¸º Promise çš„æˆåŠŸç»“æœï¼Œåœ¨ <code>then</code> çš„æˆåŠŸå›è°ƒä¸­è·å–ï¼›</li>
<li>ä¼ å…¥ Promise/thenable å¯¹è±¡æ—¶ï¼Œ<code>Promise.resolve()</code> ä¼šé€‚é…å¹¶è¿”å›æ ‡å‡† Promiseï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ã€Œå½’ä¸€åŒ–ã€å€¼çš„ç±»å‹ï¼Œæ–¹ä¾¿å¼‚æ­¥å¤„ç†ã€‚</li>
</ol>
<p>æ ¸å¿ƒè®°ä½ï¼š<code>Promise.resolve()</code> çš„æœ¬è´¨æ˜¯ã€Œå¿«é€Ÿç”ŸæˆæˆåŠŸçš„ Promiseã€ï¼Œå‡å°‘å†—ä½™ä»£ç ï¼Œç»Ÿä¸€å¼‚æ­¥/åŒæ­¥å€¼çš„å¤„ç†é€»è¾‘ã€‚</p>
<h2 data-id="heading-51">Promise.reject</h2>
<h4 data-id="heading-52">Promise.reject() å¿«é€Ÿåˆ›å»ºå¤±è´¥çš„ Promise</h4>
<p><code>Promise.reject()</code> æ˜¯åˆ›å»ºã€ŒçŠ¶æ€ä¸º rejectedï¼ˆå¤±è´¥ï¼‰ã€Promise çš„å¿«æ·æ–¹å¼ï¼Œä½ æåˆ°ã€Œæ— è®ºä¼ å…¥ä»€ä¹ˆå‚æ•°ï¼Œéƒ½ä¼šä½œä¸ºå¤±è´¥ç†ç”±ã€ï¼Œä»£ç éªŒè¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä¼ å…¥æ™®é€šå€¼ï¼ˆå­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'æ™®é€šé”™è¯¯ä¿¡æ¯'</span>);
p1.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p1å¤±è´¥ç†ç”±ï¼š'</span>, err)); <span class="hljs-comment">// è¾“å‡ºï¼šp1å¤±è´¥ç†ç”±ï¼šæ™®é€šé”™è¯¯ä¿¡æ¯</span>

<span class="hljs-comment">// 2. ä¼ å…¥ Error å¯¹è±¡ï¼ˆæ¨èå†™æ³•ï¼ŒåŒ…å«å †æ ˆä¿¡æ¯ï¼‰</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ ‡å‡†é”™è¯¯å¯¹è±¡'</span>));
p2.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p2å¤±è´¥ç†ç”±ï¼š'</span>, err.<span class="hljs-property">message</span>)); <span class="hljs-comment">// è¾“å‡ºï¼šp2å¤±è´¥ç†ç”±ï¼šæ ‡å‡†é”™è¯¯å¯¹è±¡</span>

<span class="hljs-comment">// 3. ä¼ å…¥ Promise å¯¹è±¡ï¼ˆå’Œ resolve ä¸åŒï¼Œä¸ä¼šåŸæ ·è¿”å›ï¼Œè€Œæ˜¯ç›´æ¥ä½œä¸ºå¤±è´¥ç†ç”±ï¼‰</span>
<span class="hljs-keyword">const</span> originalPromise = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-string">'æˆåŠŸçš„Promise'</span>);
<span class="hljs-keyword">const</span> p3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(originalPromise);
p3.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'p3å¤±è´¥ç†ç”±æ˜¯åŸPromiseï¼š'</span>, err === originalPromise); <span class="hljs-comment">// è¾“å‡ºï¼štrue</span>
});
</code></pre>
<h5 data-id="heading-53">å…³é”®åŒºåˆ«ï¼ˆå’Œ Promise.resolve å¯¹æ¯”ï¼‰ï¼š</h5>
<ul>
<li><code>Promise.resolve(å·²å­˜åœ¨çš„Promise)</code> â†’ è¿”å›åŸ Promiseï¼›</li>
<li><code>Promise.reject(å·²å­˜åœ¨çš„Promise)</code> â†’ ä¸ä¼šè¿”å›åŸ Promiseï¼Œè€Œæ˜¯æŠŠè¿™ä¸ª Promise å¯¹è±¡<strong>ç›´æ¥ä½œä¸ºå¤±è´¥ç†ç”±</strong>ã€‚</li>
</ul>
<h4 data-id="heading-54">æ€»ç»“</h4>
<ol>
<li><code>Promise.resolve(x)</code> è§„åˆ™ï¼š
<ul>
<li>x æ˜¯æ™®é€šå€¼ â†’ è¿”å› fulfilled çŠ¶æ€çš„ Promiseï¼Œx ä¸ºæˆåŠŸç»“æœï¼›</li>
<li>x æ˜¯ Promise â†’ åŸæ ·è¿”å› xï¼›</li>
<li>x æ˜¯ thenable å¯¹è±¡ â†’ è½¬æ¢æˆåŸç”Ÿ Promiseï¼Œæ‰§è¡Œå…¶ then æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><code>Promise.reject(reason)</code> è§„åˆ™ï¼š
<ul>
<li>æ— è®º reason æ˜¯æ™®é€šå€¼ã€Error å¯¹è±¡ã€ç”šè‡³ Promise å¯¹è±¡ï¼Œéƒ½ä¼šç›´æ¥ä½œä¸ºã€Œå¤±è´¥ç†ç”±ã€ï¼Œè¿”å› rejected çŠ¶æ€çš„ Promiseï¼›</li>
<li>æ¨èä¼ å…¥ <code>Error</code> å¯¹è±¡ï¼ˆè€Œéå­—ç¬¦ä¸²ï¼‰ï¼Œä¾¿äºè°ƒè¯•ï¼ˆåŒ…å«é”™è¯¯å †æ ˆï¼‰ã€‚</li>
</ul>
</li>
<li><code>Promise.resolve/reject</code> çš„æ ¸å¿ƒä»·å€¼ï¼šç®€åŒ– Promise åˆ›å»ºä»£ç ï¼Œç»Ÿä¸€å¼‚æ­¥å€¼çš„å¤„ç†é€»è¾‘ï¼ˆå°¤å…¶æ˜¯ resolve å¯¹ thenable çš„å…¼å®¹ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-55">ä¸ºä»€ä¹ˆ Promise çš„é€’å½’è°ƒç”¨ä¼šå¯¼è‡´æµè§ˆå™¨å¡æ­»ï¼Œè€Œ setTimeout çš„é€’å½’è°ƒç”¨é€šå¸¸ä¸ä¼šï¼Ÿ</h2>
<h4 data-id="heading-56">å…ˆçœ‹ç›´è§‚å¯¹æ¯”ï¼ˆä»£ç +ç°è±¡ï¼‰</h4>
<p>å…ˆè·‘ä¸¤æ®µä»£ç ï¼Œç›´è§‚æ„Ÿå—å·®å¼‚ï¼š</p>
<h5 data-id="heading-57">ç¤ºä¾‹1ï¼šPromise é€’å½’ï¼ˆå¡æ­»æµè§ˆå™¨ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promise é€’å½’ï¼šåŒæ­¥å ç”¨ä¸»çº¿ç¨‹ï¼Œæ— å–˜æ¯æœºä¼š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">promiseRecursion</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Promise é€’å½’æ‰§è¡Œ"</span>);
    <span class="hljs-title function_">promiseRecursion</span>(); <span class="hljs-comment">// é€’å½’è°ƒç”¨</span>
  });
}
<span class="hljs-title function_">promiseRecursion</span>();
</code></pre>
<p><strong>ç°è±¡</strong>ï¼šæµè§ˆå™¨æ ‡ç­¾é¡µå¡é¡¿ã€æ— å“åº”ï¼Œæ§åˆ¶å°ç–¯ç‹‚è¾“å‡ºï¼Œä½†é¡µé¢æ— æ³•äº¤äº’ï¼Œç”šè‡³ä¼šè§¦å‘ã€Œé¡µé¢æ— å“åº”ã€æç¤ºã€‚</p>
<h5 data-id="heading-58">ç¤ºä¾‹2ï¼šsetTimeout é€’å½’ï¼ˆä¸å¡æ­»ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// setTimeout é€’å½’ï¼šæ¯æ¬¡æ‰§è¡Œåé‡Šæ”¾ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">timeoutRecursion</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"setTimeout é€’å½’æ‰§è¡Œ"</span>);
    <span class="hljs-title function_">timeoutRecursion</span>(); <span class="hljs-comment">// é€’å½’è°ƒç”¨</span>
  }, <span class="hljs-number">0</span>);
}
<span class="hljs-title function_">timeoutRecursion</span>();
</code></pre>
<p><strong>ç°è±¡</strong>ï¼šæ§åˆ¶å°æŒç»­è¾“å‡ºï¼Œä½†é¡µé¢ä»èƒ½ç‚¹å‡»ã€æ»šåŠ¨ï¼Œæµè§ˆå™¨å®Œå…¨ä¸å¡é¡¿ã€‚</p>
<h4 data-id="heading-59">æ ¸å¿ƒåŸå› æ‹†è§£ï¼ˆäº‹ä»¶å¾ªç¯+è°ƒç”¨æ ˆï¼‰</h4>
<p>æµè§ˆå™¨çš„ä¸»çº¿ç¨‹æ˜¯ã€Œå•çº¿ç¨‹ã€ï¼Œæ‰€æœ‰ JS æ‰§è¡Œã€DOM æ¸²æŸ“ã€äº‹ä»¶å“åº”éƒ½åœ¨è¿™ä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œèƒ½å¦ã€Œé‡Šæ”¾ä¸»çº¿ç¨‹ã€æ˜¯æ˜¯å¦å¡æ­»çš„å…³é”®ï¼š</p>
<h5 data-id="heading-60">1. Promise é€’å½’ï¼šå¾®ä»»åŠ¡ã€ŒæŠ¢å å¼ã€æ‰§è¡Œï¼Œè°ƒç”¨æ ˆæ°¸ä¸æ¸…ç©º</h5>
<ul>
<li><strong>Promise.then çš„å›è°ƒå±äºã€Œå¾®ä»»åŠ¡ã€</strong>ï¼šå¾®ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™æ˜¯ã€Œå½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡/æ¸²æŸ“/äº‹ä»¶ã€ã€‚</li>
<li><strong>é€’å½’é€»è¾‘</strong>ï¼š
<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>promiseRecursion()</code>ï¼Œ<code>Promise.resolve()</code> ç”Ÿæˆå¾®ä»»åŠ¡ Aï¼›</li>
<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œæ‰§è¡Œå¾®ä»»åŠ¡ A â†’ æ‰“å°æ—¥å¿—ï¼Œè°ƒç”¨ <code>promiseRecursion()</code> â†’ ç”Ÿæˆå¾®ä»»åŠ¡ Bï¼›</li>
<li>å¾®ä»»åŠ¡ A æ‰§è¡Œå®Œï¼Œç«‹å³æ‰§è¡Œå¾®ä»»åŠ¡ B â†’ æ‰“å°æ—¥å¿—ï¼Œç”Ÿæˆå¾®ä»»åŠ¡ Cï¼›</li>
<li>è¿™ä¸ªè¿‡ç¨‹<strong>æ— é™å¾ªç¯</strong>ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—æ°¸è¿œæœ‰æ–°ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹è¢«å¾®ä»»åŠ¡ã€Œå æ»¡ã€ï¼Œæ²¡æœ‰ä»»ä½•æ—¶é—´ç‰‡åˆ†é…ç»™ï¼š
<ul>
<li>DOM æ¸²æŸ“ï¼ˆé¡µé¢å¡æ­»ï¼‰ï¼›</li>
<li>é¼ æ ‡ç‚¹å‡»/æ»šåŠ¨ç­‰äº‹ä»¶å“åº”ï¼ˆäº¤äº’å¤±æ•ˆï¼‰ï¼›</li>
<li>å…¶ä»–å®ä»»åŠ¡ï¼ˆæ¯”å¦‚ setTimeoutã€ç½‘ç»œè¯·æ±‚ï¼‰ã€‚</li>
</ul>
</li>
</ol>
</li>
<li><strong>è°ƒç”¨æ ˆè§’åº¦</strong>ï¼šè™½ç„¶æ¯æ¬¡ then å›è°ƒæ‰§è¡Œå®Œä¼šæ¸…ç©ºå½“å‰è°ƒç”¨æ ˆï¼Œä½†å¾®ä»»åŠ¡çš„ã€Œè¿ç»­æ‰§è¡Œã€è®©ä¸»çº¿ç¨‹æ²¡æœ‰ã€Œç©ºé—²æœŸã€ï¼Œæœ¬è´¨æ˜¯ã€Œæ— é™çš„åŒæ­¥æ‰§è¡Œæµã€ã€‚</li>
</ul>
<h5 data-id="heading-61">2. setTimeout é€’å½’ï¼šå®ä»»åŠ¡ã€Œæ’é˜Ÿå¼ã€æ‰§è¡Œï¼Œæ¯æ¬¡é‡Šæ”¾ä¸»çº¿ç¨‹</h5>
<ul>
<li><strong>setTimeout çš„å›è°ƒå±äºã€Œå®ä»»åŠ¡ã€</strong>ï¼šå®ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™æ˜¯ã€Œæ‰§è¡Œå®Œä¸€ä¸ªå®ä»»åŠ¡åï¼Œå…ˆæ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå†å¤„ç†æ¸²æŸ“ï¼Œå†å–ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ã€ã€‚</li>
<li><strong>é€’å½’é€»è¾‘</strong>ï¼š
<ol>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨ <code>timeoutRecursion()</code>ï¼Œ<code>setTimeout</code> æŠŠå›è°ƒ A åŠ å…¥ã€Œå®ä»»åŠ¡é˜Ÿåˆ—ã€ï¼›</li>
<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œæ‰§è¡Œå¾®ä»»åŠ¡ â†’ æ¸²æŸ“é¡µé¢ â†’ å¤„ç†äº‹ä»¶ï¼ˆç‚¹å‡»/æ»šåŠ¨ï¼‰â†’ å†æ‰§è¡Œå®ä»»åŠ¡ Aï¼›</li>
<li>å®ä»»åŠ¡ A æ‰§è¡Œï¼šæ‰“å°æ—¥å¿—ï¼Œè°ƒç”¨ <code>timeoutRecursion()</code> â†’ æŠŠå›è°ƒ B åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>å®ä»»åŠ¡ A æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹ä¼šã€Œé‡Šæ”¾ã€ï¼Œå…ˆå¤„ç†æ¸²æŸ“ã€äº‹ä»¶å“åº”ï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ Bï¼›</li>
<li>è¿™ä¸ªè¿‡ç¨‹è™½ç„¶æ— é™ï¼Œä½†<strong>æ¯æ¬¡å®ä»»åŠ¡æ‰§è¡Œå®Œéƒ½ä¼šç»™ä¸»çº¿ç¨‹å–˜æ¯æœºä¼š</strong>ï¼Œé¡µé¢æ¸²æŸ“ã€äº‹ä»¶å“åº”èƒ½æ­£å¸¸è¿›è¡Œï¼Œå› æ­¤ä¸ä¼šå¡æ­»ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-62">è¡¥å……ï¼šä¸ºä»€ä¹ˆ Promise å¾®ä»»åŠ¡è¦ã€Œç«‹å³æ‰§è¡Œã€ï¼Ÿ</h4>
<p>å¾®ä»»åŠ¡çš„è®¾è®¡åˆè¡·æ˜¯ã€Œå¤„ç†å¼‚æ­¥ä½†éœ€è¦å°½å¿«å®Œæˆçš„é€»è¾‘ã€ï¼ˆæ¯”å¦‚ Promise å›è°ƒã€async/awaitï¼‰ï¼Œä¼˜å…ˆçº§é«˜äºå®ä»»åŠ¡å’Œæ¸²æŸ“ï¼Œè¿™ä¿è¯äº†å¼‚æ­¥é€»è¾‘çš„æ‰§è¡Œé¡ºåºï¼Œä½†æ— é™é€’å½’çš„å¾®ä»»åŠ¡ä¼šæ»¥ç”¨è¿™ä¸ªä¼˜å…ˆçº§ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹é˜»å¡ã€‚</p>
<h4 data-id="heading-63">æ€»ç»“</h4>
<ol>
<li><strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼šPromise é€’å½’æ˜¯ã€Œå¾®ä»»åŠ¡æ— é™è¿ç»­æ‰§è¡Œã€ï¼Œä¸»çº¿ç¨‹æ— å–˜æ¯æœºä¼šï¼›setTimeout é€’å½’æ˜¯ã€Œå®ä»»åŠ¡æ’é˜Ÿæ‰§è¡Œã€ï¼Œæ¯æ¬¡æ‰§è¡Œåé‡Šæ”¾ä¸»çº¿ç¨‹ï¼Œå…è®¸æ¸²æŸ“/äº‹ä»¶å“åº”ã€‚</li>
<li><strong>è°ƒç”¨æ ˆ/é˜Ÿåˆ—</strong>ï¼šPromise é€’å½’è®©å¾®ä»»åŠ¡é˜Ÿåˆ—æ°¸è¿œéç©ºï¼Œä¸»çº¿ç¨‹è¢«å æ»¡ï¼›setTimeout é€’å½’çš„å®ä»»åŠ¡é˜Ÿåˆ—è™½æœ‰ä»»åŠ¡ï¼Œä½†æ¯æ¬¡æ‰§è¡Œå®Œä¼šå¤„ç†æ¸²æŸ“å’Œäº‹ä»¶ã€‚</li>
<li><strong>æœ¬è´¨</strong>ï¼šæµè§ˆå™¨å¡æ­»çš„æ ¸å¿ƒæ˜¯ã€Œä¸»çº¿ç¨‹æ— æ³•å¤„ç†æ¸²æŸ“/äº¤äº’ã€ï¼Œè€Œéã€Œé€’å½’æœ¬èº«ã€â€”â€”setTimeout é€’å½’ç»™äº†ä¸»çº¿ç¨‹å¤„ç†è¿™äº›çš„æ—¶é—´ï¼Œè€Œ Promise é€’å½’æ²¡æœ‰ã€‚</li>
</ol>
<p>å¦‚æœæƒ³è®© Promise é€’å½’ä¸å¡æ­»ï¼Œå¯åœ¨é€’å½’ä¸­åŠ å…¥ <code>setTimeout</code> ã€Œè®©å‡ºä¸»çº¿ç¨‹ã€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ”¹è¿›ç‰ˆ Promise é€’å½’ï¼šä¸å¡æ­»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">promiseRecursion</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Promise é€’å½’æ‰§è¡Œ"</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">promiseRecursion</span>(), <span class="hljs-number">0</span>); <span class="hljs-comment">// ç”¨setTimeoutè®©å‡ºä¸»çº¿ç¨‹</span>
  });
}
<span class="hljs-title function_">promiseRecursion</span>();
</code></pre>
<h2 data-id="heading-64">Promise çš„ <code>then</code> æ–¹æ³•çš„æ ¸å¿ƒå®ç°</h2>
<h4 data-id="heading-65">å…ˆæ˜ç¡® then æ–¹æ³•çš„æ ¸å¿ƒéœ€æ±‚</h4>
<ol>
<li><code>then</code> æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>onFulfilled</code>ï¼ˆæˆåŠŸå›è°ƒï¼‰ã€<code>onRejected</code>ï¼ˆå¤±è´¥å›è°ƒï¼‰ï¼›</li>
<li>å›è°ƒéœ€å¼‚æ­¥æ‰§è¡Œï¼ˆå¾®ä»»åŠ¡ï¼Œè¿™é‡Œç”¨ <code>setTimeout</code> æ¨¡æ‹Ÿï¼‰ï¼›</li>
<li>è‹¥ Promise çŠ¶æ€æœªç¡®å®šï¼ˆpendingï¼‰ï¼Œéœ€å…ˆå­˜å‚¨å›è°ƒï¼›è‹¥å·²ç¡®å®šï¼Œç›´æ¥æ‰§è¡Œå›è°ƒï¼›</li>
<li><code>then</code> å¿…é¡»è¿”å›æ–°çš„ Promiseï¼Œå®ç°é“¾å¼è°ƒç”¨ï¼›</li>
<li>ä¸Šä¸€ä¸ª <code>then</code> çš„å›è°ƒè¿”å›å€¼ï¼Œå†³å®šæ–° Promise çš„çŠ¶æ€ã€‚</li>
</ol>
<h4 data-id="heading-66">æç®€ç‰ˆ Promise + then å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡æ‹Ÿ Promise çš„æ ¸å¿ƒå®ç°ï¼ˆä»…ä¿ç•™ then æ–¹æ³•çš„æ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPromise</span> {
  <span class="hljs-comment">// å®šä¹‰ä¸‰ç§çŠ¶æ€</span>
  <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">'pending'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">'fulfilled'</span>;
  <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">'rejected'</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">executor</span>) {
    <span class="hljs-comment">// åˆå§‹çŠ¶æ€</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">PENDING</span>;
    <span class="hljs-comment">// æˆåŠŸç»“æœ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = <span class="hljs-literal">undefined</span>;
    <span class="hljs-comment">// å¤±è´¥åŸå› </span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = <span class="hljs-literal">undefined</span>;
    <span class="hljs-comment">// å­˜å‚¨ pending çŠ¶æ€æ—¶çš„å›è°ƒï¼ˆå› ä¸ºæ­¤æ—¶çŠ¶æ€æœªç¡®å®šï¼Œéœ€ç­‰å¾…ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span> = [];

    <span class="hljs-comment">// resolve å‡½æ•°ï¼šä¿®æ”¹çŠ¶æ€ä¸ºæˆåŠŸï¼Œæ‰§è¡Œå­˜å‚¨çš„æˆåŠŸå›è°ƒ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">resolve</span> = (<span class="hljs-params">value</span>) =&gt; {
      <span class="hljs-comment">// çŠ¶æ€ä¸å¯é€†ï¼šåªæœ‰ pending æ—¶æ‰èƒ½ä¿®æ”¹</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">PENDING</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">FULFILLED</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰å­˜å‚¨çš„æˆåŠŸå›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>());
      }
    };

    <span class="hljs-comment">// reject å‡½æ•°ï¼šä¿®æ”¹çŠ¶æ€ä¸ºå¤±è´¥ï¼Œæ‰§è¡Œå­˜å‚¨çš„å¤±è´¥å›è°ƒ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">reject</span> = (<span class="hljs-params">reason</span>) =&gt; {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">PENDING</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">REJECTED</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span> = reason;
        <span class="hljs-comment">// æ‰§è¡Œæ‰€æœ‰å­˜å‚¨çš„å¤±è´¥å›è°ƒ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>());
      }
    };

    <span class="hljs-comment">// æ‰§è¡Œå™¨å‡½æ•°åŒæ­¥æ‰§è¡Œï¼Œæ•è·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„å¼‚å¸¸</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-title function_">executor</span>(resolve, reject);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">reject</span>(error);
    }
  }

  <span class="hljs-comment">// æ ¸å¿ƒï¼šå®ç° then æ–¹æ³•</span>
  <span class="hljs-title function_">then</span>(<span class="hljs-params">onFulfilled, onRejected</span>) {
    <span class="hljs-comment">// å…¼å®¹ï¼šå¦‚æœæ²¡ä¼ å›è°ƒï¼Œé€ä¼ ç»“æœï¼ˆæ¯”å¦‚ then().then() çš„åœºæ™¯ï¼‰</span>
    onFulfilled = <span class="hljs-keyword">typeof</span> onFulfilled === <span class="hljs-string">'function'</span> ? onFulfilled : <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value;
    onRejected = <span class="hljs-keyword">typeof</span> onRejected === <span class="hljs-string">'function'</span> ? onRejected : <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> { <span class="hljs-keyword">throw</span> reason; };

    <span class="hljs-comment">// å…³é”®ï¼šthen è¿”å›æ–°çš„ Promiseï¼Œå®ç°é“¾å¼è°ƒç”¨</span>
    <span class="hljs-keyword">const</span> newPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      <span class="hljs-comment">// å°è£…å›è°ƒæ‰§è¡Œé€»è¾‘ï¼ˆå¤ç”¨ä»£ç ï¼‰</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">executeCallback</span> = (<span class="hljs-params">callback, data</span>) =&gt; {
        <span class="hljs-comment">// å¼‚æ­¥æ‰§è¡Œå›è°ƒï¼ˆç”¨ setTimeout æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼‰</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œå›è°ƒï¼Œè·å–è¿”å›å€¼</span>
            <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">callback</span>(data);
            <span class="hljs-comment">// æ ¸å¿ƒè§„åˆ™ï¼šå›è°ƒè¿”å›å€¼å†³å®šæ–° Promise çš„çŠ¶æ€</span>
            <span class="hljs-title function_">resolvePromise</span>(newPromise, result, resolve, reject);
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-comment">// å›è°ƒæ‰§è¡Œå‡ºé”™ï¼Œæ–° Promise çŠ¶æ€ä¸ºå¤±è´¥</span>
            <span class="hljs-title function_">reject</span>(error);
          }
        }, <span class="hljs-number">0</span>);
      };

      <span class="hljs-comment">// 1. å¦‚æœå½“å‰ Promise å·²æˆåŠŸ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">FULFILLED</span>) {
        <span class="hljs-title function_">executeCallback</span>(onFulfilled, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
      }

      <span class="hljs-comment">// 2. å¦‚æœå½“å‰ Promise å·²å¤±è´¥</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">REJECTED</span>) {
        <span class="hljs-title function_">executeCallback</span>(onRejected, <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>);
      }

      <span class="hljs-comment">// 3. å¦‚æœå½“å‰ Promise è¿˜æ˜¯ pendingï¼ˆçŠ¶æ€æœªç¡®å®šï¼‰ï¼Œå­˜å‚¨å›è°ƒ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">PENDING</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">executeCallback</span>(onFulfilled, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
        });
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onRejectedCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title function_">executeCallback</span>(onRejected, <span class="hljs-variable language_">this</span>.<span class="hljs-property">reason</span>);
        });
      }
    });

    <span class="hljs-keyword">return</span> newPromise;
  }
}

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šå¤„ç† then å›è°ƒçš„è¿”å›å€¼ï¼Œå†³å®šæ–° Promise çš„çŠ¶æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resolvePromise</span>(<span class="hljs-params">newPromise, result, resolve, reject</span>) {
  <span class="hljs-comment">// é¿å…å¾ªç¯å¼•ç”¨ï¼ˆæ¯”å¦‚å›è°ƒè¿”å› newPromise æœ¬èº«ï¼‰</span>
  <span class="hljs-keyword">if</span> (result === newPromise) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">'Chaining cycle detected for promise'</span>));
  }

  <span class="hljs-comment">// 1. å¦‚æœè¿”å›å€¼æ˜¯ Promise å®ä¾‹</span>
  <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>) {
    <span class="hljs-comment">// ç­‰å¾…è¯¥ Promise å®Œæˆï¼Œå†å†³å®šæ–° Promise çš„çŠ¶æ€</span>
    result.<span class="hljs-title function_">then</span>(resolve, reject);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// 2. å¦‚æœè¿”å›å€¼æ˜¯æ™®é€šå€¼ï¼Œç›´æ¥ resolve æ–° Promise</span>
    <span class="hljs-title function_">resolve</span>(result);
  }
}
</code></pre>
<h4 data-id="heading-67">æ ¸å¿ƒé€»è¾‘æ‹†è§£ï¼ˆé‡ç‚¹ç†è§£ï¼‰</h4>
<h5 data-id="heading-68">1. çŠ¶æ€ç®¡ç†</h5>
<ul>
<li>åˆå§‹çŠ¶æ€ä¸º <code>pending</code>ï¼Œåªæœ‰è°ƒç”¨ <code>resolve</code>/<code>reject</code> ä¸”çŠ¶æ€ä¸º <code>pending</code> æ—¶ï¼Œæ‰èƒ½ä¿®æ”¹çŠ¶æ€ï¼›</li>
<li>çŠ¶æ€ä¸å¯é€†ï¼Œä¸€æ—¦å˜ä¸º <code>fulfilled</code>/<code>rejected</code>ï¼Œæ— æ³•å†æ”¹ã€‚</li>
</ul>
<h5 data-id="heading-69">2. å›è°ƒå­˜å‚¨ï¼ˆpending çŠ¶æ€ï¼‰</h5>
<ul>
<li>å¦‚æœè°ƒç”¨ <code>then</code> æ—¶ï¼ŒPromise è¿˜å¤„äº <code>pending</code>ï¼ˆæ¯”å¦‚å¼‚æ­¥ä»»åŠ¡æ²¡å®Œæˆï¼‰ï¼Œä¼šæŠŠå›è°ƒå­˜å‚¨åˆ°æ•°ç»„ä¸­ï¼›</li>
<li>ç­‰çŠ¶æ€ç¡®å®šåï¼ˆè°ƒç”¨ <code>resolve</code>/<code>reject</code>ï¼‰ï¼Œéå†æ‰§è¡Œå­˜å‚¨çš„å›è°ƒã€‚</li>
</ul>
<h5 data-id="heading-70">3. å¼‚æ­¥æ‰§è¡Œå›è°ƒ</h5>
<ul>
<li>ç”¨ <code>setTimeout</code> æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼ˆçœŸå® Promise æ˜¯å¾®ä»»åŠ¡ï¼Œä¼˜å…ˆçº§æ¯”å®ä»»åŠ¡é«˜ï¼Œè¿™é‡Œç®€åŒ–ï¼‰ï¼›</li>
<li>ç¡®ä¿å›è°ƒä¸ä¼šåŒæ­¥æ‰§è¡Œï¼Œç¬¦åˆ Promise è§„èŒƒã€‚</li>
</ul>
<h5 data-id="heading-71">4. é“¾å¼è°ƒç”¨çš„æ ¸å¿ƒï¼ˆè¿”å›æ–° Promiseï¼‰</h5>
<ul>
<li><code>then</code> å¿…é¡»è¿”å›æ–°çš„ <code>MyPromise</code>ï¼Œè€Œé <code>this</code>ï¼›</li>
<li>å›è°ƒçš„è¿”å›å€¼é€šè¿‡ <code>resolvePromise</code> å¤„ç†ï¼š
<ul>
<li>è¿”å›æ™®é€šå€¼ â†’ æ–° Promise çŠ¶æ€ä¸º <code>fulfilled</code>ï¼›</li>
<li>è¿”å› Promise å®ä¾‹ â†’ ç­‰å¾…è¯¥å®ä¾‹å®Œæˆï¼Œç»§æ‰¿å…¶çŠ¶æ€ï¼›</li>
<li>å›è°ƒæŠ›å‡ºå¼‚å¸¸ â†’ æ–° Promise çŠ¶æ€ä¸º <code>rejected</code>ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-72">æµ‹è¯•ä»£ç ï¼ˆéªŒè¯ then åŠŸèƒ½ï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµ‹è¯•1ï¼šåŸºç¡€ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>), <span class="hljs-number">1000</span>);
});

p1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸€æ¬¡thenï¼š'</span>, res); <span class="hljs-comment">// 1såè¾“å‡ºï¼šç¬¬ä¸€æ¬¡thenï¼š100</span>
  <span class="hljs-keyword">return</span> res + <span class="hljs-number">10</span>; <span class="hljs-comment">// è¿”å›æ™®é€šå€¼</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬äºŒæ¬¡thenï¼š'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šç¬¬äºŒæ¬¡thenï¼š110</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(res + <span class="hljs-number">10</span>)); <span class="hljs-comment">// è¿”å›Promise</span>
}).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¬¬ä¸‰æ¬¡thenï¼š'</span>, res); <span class="hljs-comment">// è¾“å‡ºï¼šç¬¬ä¸‰æ¬¡thenï¼š120</span>
});

<span class="hljs-comment">// æµ‹è¯•2ï¼šå¤±è´¥åœºæ™¯</span>
<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¤±è´¥äº†'</span>));
});

p2.<span class="hljs-title function_">then</span>(
  <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res),
  <span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤±è´¥å›è°ƒï¼š'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šå¤±è´¥å›è°ƒï¼šå¤±è´¥äº†</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›è°ƒé‡ŒæŠ›é”™'</span>);
  }
).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> { <span class="hljs-comment">// æ³¨ï¼šcatch æœ¬è´¨æ˜¯ then(undefined, onRejected)ï¼Œå¯è‡ªè¡Œè¡¥å……å®ç°</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•è·å›è°ƒé”™è¯¯ï¼š'</span>, err.<span class="hljs-property">message</span>); <span class="hljs-comment">// è¾“å‡ºï¼šæ•è·å›è°ƒé”™è¯¯ï¼šå›è°ƒé‡ŒæŠ›é”™</span>
});
</code></pre>
<h4 data-id="heading-73">è¡¥å……ï¼šcatch æ–¹æ³•ï¼ˆå¯é€‰ï¼‰</h4>
<p>å¦‚æœæƒ³è¡¥å…… <code>catch</code> æ–¹æ³•ï¼Œåªéœ€åœ¨ <code>MyPromise</code> ä¸­åŠ ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">catch</span>(onRejected) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">then</span>(<span class="hljs-literal">undefined</span>, onRejected);
}
</code></pre>
<h4 data-id="heading-74">æ€»ç»“</h4>
<ol>
<li><code>then</code> æ–¹æ³•çš„æ ¸å¿ƒæ˜¯ã€ŒçŠ¶æ€åˆ¤æ–­ + å›è°ƒå­˜å‚¨/æ‰§è¡Œ + è¿”å›æ–° Promiseã€ï¼›</li>
<li>å¼‚æ­¥æ‰§è¡Œå›è°ƒã€çŠ¶æ€ä¸å¯é€†ã€é“¾å¼è°ƒç”¨ï¼ˆè¿”å›æ–° Promiseï¼‰æ˜¯ <code>then</code> çš„ä¸‰å¤§å…³é”®ç‰¹æ€§ï¼›</li>
<li>è¿™ä¸ªæç®€å®ç°å»æ‰äº†å¤æ‚çš„è¾¹ç•Œå¤„ç†ï¼ˆå¦‚ thenable å¯¹è±¡ã€å¤šæ¬¡è°ƒç”¨ then ç­‰ï¼‰ï¼Œä½†ä¿ç•™äº† <code>then</code> æœ€æ ¸å¿ƒçš„é€»è¾‘ï¼Œèƒ½å¸®ä½ ç†è§£åŸç”Ÿ Promise çš„ <code>then</code> æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</li>
</ol>
<h2 data-id="heading-75">Promise è®¾è®¡æ¨¡å¼</h2>
<p>Promise çš„å®ç°å¹¶éå•ä¸€è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯<strong>å¤šä¸ªæ¨¡å¼çš„ç»„åˆ</strong>ï¼Œæ¯ä¸ªæ¨¡å¼è§£å†³ä¸€ä¸ªæ ¸å¿ƒé—®é¢˜ï¼Œå…ˆçœ‹å…³é”®æ¨¡å¼åŠå¯¹åº”ä½œç”¨ï¼š</p>






























<table><thead><tr><th>è®¾è®¡æ¨¡å¼</th><th>æ ¸å¿ƒä½œç”¨ï¼ˆPromise ä¸­çš„ä½“ç°ï¼‰</th><th>å¯¹åº”å®ç°ä»£ç ï¼ˆæç®€ç‰ˆ MyPromiseï¼‰</th></tr></thead><tbody><tr><td><strong>çŠ¶æ€æ¨¡å¼</strong></td><td>ç®¡ç† Promise çš„ä¸‰ç§çŠ¶æ€ï¼ˆpending/fulfilled/rejectedï¼‰ï¼Œä¸”çŠ¶æ€ä¸å¯é€†</td><td>1. å®šä¹‰ <code>status</code> å±æ€§ï¼Œåˆå§‹ä¸º pendingï¼›<br/>2. <code>resolve/reject</code> ä»…åœ¨ pending æ—¶ä¿®æ”¹çŠ¶æ€ï¼›<br/>3. <code>then</code> æ–¹æ³•æ ¹æ®ä¸åŒçŠ¶æ€æ‰§è¡Œä¸åŒé€»è¾‘ï¼ˆå­˜å‚¨å›è°ƒ/ç›´æ¥æ‰§è¡Œï¼‰ã€‚</td></tr><tr><td><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong></td><td>è§£å†³ã€ŒçŠ¶æ€å˜æ›´åé€šçŸ¥æ‰€æœ‰å›è°ƒã€çš„é—®é¢˜ï¼ˆæ¯”å¦‚ pending æ—¶å¤šæ¬¡è°ƒç”¨ thenï¼ŒçŠ¶æ€ç¡®å®šåå…¨éƒ¨æ‰§è¡Œï¼‰</td><td>1. å®šä¹‰ <code>onFulfilledCallbacks</code>/<code>onRejectedCallbacks</code> æ•°ç»„ï¼ˆå­˜å‚¨è§‚å¯Ÿè€…ï¼‰ï¼›<br/>2. çŠ¶æ€å˜æ›´æ—¶ï¼ˆresolve/rejectï¼‰ï¼Œéå†æ‰§è¡Œæ•°ç»„ä¸­çš„å›è°ƒï¼ˆé€šçŸ¥è§‚å¯Ÿè€…ï¼‰ã€‚</td></tr><tr><td><strong>å·¥å‚æ¨¡å¼</strong></td><td><code>then</code> æ–¹æ³•è¿”å›æ–°çš„ Promise å®ä¾‹ï¼ˆæ— éœ€æ‰‹åŠ¨ newï¼Œç”± then å†…éƒ¨åˆ›å»ºï¼‰ï¼Œå®ç°é“¾å¼è°ƒç”¨</td><td>1. <code>then</code> å†…éƒ¨åˆ›å»º <code>newPromise</code> å¹¶è¿”å›ï¼›<br/>2. <code>resolvePromise</code> è¾…åŠ©å‡½æ•°æ ¹æ®å›è°ƒè¿”å›å€¼ã€Œç”Ÿäº§ã€æ–° Promise çš„çŠ¶æ€ã€‚</td></tr><tr><td><strong>ç­–ç•¥æ¨¡å¼</strong></td><td>å…è®¸åŠ¨æ€ä¼ å…¥ä¸åŒçš„å›è°ƒç­–ç•¥ï¼ˆonFulfilled/onRejectedï¼‰ï¼ŒçŠ¶æ€å˜æ›´æ—¶æ‰§è¡Œå¯¹åº”ç­–ç•¥</td><td>1. <code>then</code> æ¥æ”¶ä¸¤ä¸ªå›è°ƒå‚æ•°ï¼ˆä¸åŒçš„å¤„ç†ç­–ç•¥ï¼‰ï¼›<br/>2. æˆåŠŸæ—¶æ‰§è¡Œ onFulfilledï¼Œå¤±è´¥æ—¶æ‰§è¡Œ onRejectedã€‚</td></tr></tbody></table>
<h2 data-id="heading-76">å¾®ä»»åŠ¡å°è¿·æ€ï¼š<code>then</code> é‡Œã€Œpush å›è°ƒåˆ°æ•°ç»„ã€å’Œã€Œæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€æ˜¯ä¸€å›äº‹å—</h2>
<h4 data-id="heading-77">å…ˆç»™æ ¸å¿ƒç»“è®º</h4>
<ul>
<li><strong>push å›è°ƒåˆ°æ•°ç»„</strong>ï¼šè§£å†³ã€ŒPromise è¿˜åœ¨ pending çŠ¶æ€æ—¶ï¼Œå›è°ƒè¯¥å­˜å“ªã€çš„é—®é¢˜ï¼ˆå­˜å‚¨é€»è¾‘ï¼‰ï¼›</li>
<li><strong>æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šè§£å†³ã€Œå›è°ƒè¯¥ä»€ä¹ˆæ—¶å€™æ‰§è¡Œã€çš„é—®é¢˜ï¼ˆæ‰§è¡Œæ—¶æœºé€»è¾‘ï¼‰ï¼›</li>
<li>äºŒè€…å…³ç³»ï¼š<code>push</code> æ˜¯ã€Œä¿å­˜å›è°ƒã€ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—æ˜¯ã€Œè°ƒåº¦æ‰§è¡Œã€â€”â€” å…ˆä¿å­˜ï¼Œå†åœ¨åˆé€‚çš„æ—¶æœºä¸¢åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œã€‚</li>
</ul>
<h4 data-id="heading-78">ä¸€ã€å…ˆåˆ†æ¸…ä¸¤ä¸ªã€Œé˜Ÿåˆ—ã€ï¼šå›è°ƒå­˜å‚¨æ•°ç»„ vs å¾®ä»»åŠ¡é˜Ÿåˆ—</h4>
<p>è¿™æ˜¯æœ€å®¹æ˜“æ··æ·†çš„ç‚¹ï¼Œå…ˆæ˜ç¡®äºŒè€…çš„å®šä½ï¼š</p>























<table><thead><tr><th>ç±»å‹</th><th>ä½œç”¨</th><th>æ—¶æœº</th><th>å¯¹åº” Promise çŠ¶æ€</th></tr></thead><tbody><tr><td>å›è°ƒå­˜å‚¨æ•°ç»„ï¼ˆå¦‚ <code>onFulfilledCallbacks</code>ï¼‰</td><td>ä¸´æ—¶ä¿å­˜å›è°ƒï¼Œé¿å…ä¸¢å¤±</td><td>è°ƒç”¨ <code>then</code> æ—¶ï¼ŒPromise æ˜¯ <code>pending</code> çŠ¶æ€</td><td>pendingï¼ˆå¼‚æ­¥ä»»åŠ¡æœªå®Œæˆï¼‰</td></tr><tr><td>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆæµè§ˆå™¨/Node å†…ç½®ï¼‰</td><td>è°ƒåº¦å›è°ƒçš„æ‰§è¡Œæ—¶æœºï¼Œä¿è¯å¼‚æ­¥</td><td>å›è°ƒå‡†å¤‡æ‰§è¡Œæ—¶ï¼ˆPromise çŠ¶æ€ç¡®å®šåï¼‰</td><td>fulfilled/rejectedï¼ˆå¼‚æ­¥ä»»åŠ¡å®Œæˆï¼‰</td></tr></tbody></table>
<h4 data-id="heading-79">äºŒã€åˆ†æ­¥æ‹†è§£ï¼šä¸¤ä¸ªæ“ä½œçš„é…åˆæµç¨‹ï¼ˆç»“åˆä»£ç ï¼‰</h4>
<p>ç”¨æˆ‘ä»¬ä¹‹å‰å†™çš„ <code>MyPromise</code> ä»£ç ï¼Œè¿˜åŸå®Œæ•´æ‰§è¡Œæµç¨‹ï¼š</p>
<h5 data-id="heading-80">åœºæ™¯ï¼šå¼‚æ­¥ Promise + è°ƒç”¨ then</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»ºå¼‚æ­¥ Promiseï¼ˆpending çŠ¶æ€ï¼Œ1s å resolveï¼‰</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>), <span class="hljs-number">1000</span>);
});

<span class="hljs-comment">// 2. è°ƒç”¨ thenï¼šæ­¤æ—¶ Promise è¿˜æ˜¯ pendingï¼Œæ‰§è¡Œã€Œpush å›è°ƒåˆ°æ•°ç»„ã€</span>
p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å›è°ƒæ‰§è¡Œï¼š'</span>, res));
</code></pre>
<h5 data-id="heading-81">æ­¥éª¤1ï¼špush å›è°ƒåˆ°æ•°ç»„ï¼ˆå­˜å‚¨ï¼‰</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MyPromise çš„ then æ–¹æ³•ä¸­</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">PENDING</span>) {
  <span class="hljs-comment">// å…³é”®ï¼šæŠŠå›è°ƒé€»è¾‘åŒ…è£…åï¼Œpush åˆ°å­˜å‚¨æ•°ç»„</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">push</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">executeCallback</span>(onFulfilled, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
  });
}
</code></pre>
<ul>
<li>æ­¤æ—¶ Promise è¿˜åœ¨ <code>pending</code>ï¼ˆ1s åæ‰ resolveï¼‰ï¼Œæ— æ³•æ‰§è¡Œå›è°ƒï¼Œæ‰€ä»¥å…ˆæŠŠã€Œå›è°ƒæ‰§è¡Œé€»è¾‘ã€push åˆ° <code>onFulfilledCallbacks</code> æ•°ç»„é‡Œä¿å­˜ï¼›</li>
<li>è¿™ä¸€æ­¥å’Œã€Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€æ— å…³ï¼Œåªæ˜¯ã€Œä¸´æ—¶å­˜æ¡£ã€ã€‚</li>
</ul>
<h5 data-id="heading-82">æ­¥éª¤2ï¼šçŠ¶æ€ç¡®å®šåï¼Œæ‰§è¡Œå­˜å‚¨çš„å›è°ƒ â†’ æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆè°ƒåº¦ï¼‰</h5>
<p>1s åï¼Œè°ƒç”¨ <code>resolve(100)</code>ï¼ŒPromise çŠ¶æ€å˜ä¸º <code>fulfilled</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// resolve å‡½æ•°ä¸­</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">FULFILLED</span>;
<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span> = value;
<span class="hljs-comment">// éå†æ‰§è¡Œå­˜å‚¨æ•°ç»„ä¸­çš„å›è°ƒ</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">onFulfilledCallbacks</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> <span class="hljs-title function_">callback</span>());
</code></pre>
<p>æ‰§è¡Œ <code>callback()</code> æ—¶ï¼Œä¼šè°ƒç”¨ <code>executeCallback</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">executeCallback</span> = (<span class="hljs-params">callback, data</span>) =&gt; {
  <span class="hljs-comment">// å…³é”®ï¼šç”¨ setTimeout æ¨¡æ‹Ÿå¾®ä»»åŠ¡ï¼ŒæŠŠå›è°ƒæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">callback</span>(data);
    <span class="hljs-title function_">resolvePromise</span>(newPromise, result, resolve, reject);
  }, <span class="hljs-number">0</span>);
};
</code></pre>
<ul>
<li>æ­¤æ—¶æ‰æŠŠã€ŒçœŸæ­£çš„å›è°ƒæ‰§è¡Œé€»è¾‘ã€æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆç”¨ setTimeout æ¨¡æ‹Ÿï¼‰ï¼›</li>
<li>è¿™ä¸€æ­¥æ˜¯ã€Œè°ƒåº¦æ‰§è¡Œæ—¶æœºã€ï¼Œä¿è¯å›è°ƒå¼‚æ­¥æ‰§è¡Œï¼Œè€ŒéåŒæ­¥é˜»å¡ã€‚</li>
</ul>
<h4 data-id="heading-83">ä¸‰ã€ç‰¹æ®Šåœºæ™¯ï¼šPromise å·²å®Œæˆï¼ˆé pendingï¼‰</h4>
<p>å¦‚æœè°ƒç”¨ <code>then</code> æ—¶ï¼ŒPromise å·²ç»æ˜¯ <code>fulfilled</code>/<code>rejected</code>ï¼Œå°±ä¸ä¼š push åˆ°å­˜å‚¨æ•°ç»„ï¼Œè€Œæ˜¯<strong>ç›´æ¥æŠŠå›è°ƒæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MyPromise çš„ then æ–¹æ³•ä¸­</span>
<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> === <span class="hljs-title class_">MyPromise</span>.<span class="hljs-property">FULFILLED</span>) {
  <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œ executeCallback â†’ æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
  <span class="hljs-title function_">executeCallback</span>(onFulfilled, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
}
</code></pre>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Promise ç«‹å³ resolveï¼ˆçŠ¶æ€ä¸º fulfilledï¼‰</span>
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyPromise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">100</span>));
<span class="hljs-comment">// è°ƒç”¨ then æ—¶ï¼ŒçŠ¶æ€å·²ç¡®å®šï¼Œç›´æ¥æŠŠå›è°ƒæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</span>
p.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res));
</code></pre>
<h4 data-id="heading-84">å››ã€å…³é”®åŒºåˆ«ï¼šç”¨ç”Ÿæ´»ä¾‹å­ç±»æ¯”</h4>
<p>æŠŠ Promise æ¯”ä½œã€Œå¥¶èŒ¶åº—ã€ï¼š</p>
<ul>
<li><strong>push å›è°ƒåˆ°æ•°ç»„</strong>ï¼šä½ ç‚¹å•æ—¶ï¼Œå¥¶èŒ¶è¿˜æ²¡åšå¥½ï¼ˆpendingï¼‰ï¼Œåº—å‘˜æŠŠä½ çš„ã€Œå–é¤éœ€æ±‚ã€ï¼ˆå›è°ƒï¼‰è®°åœ¨å°æœ¬æœ¬ï¼ˆå­˜å‚¨æ•°ç»„ï¼‰ä¸Šï¼Œé¿å…æ¼å•ï¼›</li>
<li><strong>æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šå¥¶èŒ¶åšå¥½äº†ï¼ˆfulfilledï¼‰ï¼Œåº—å‘˜å–Šä½ å–é¤ï¼Œä½†åº—é‡Œè§„å®šã€Œå…ˆåšå®Œæ‰€æœ‰å³æ—¶å•ï¼ˆåŒæ­¥ä»£ç ï¼‰ï¼Œå†å«å·å–é¤ï¼ˆå¾®ä»»åŠ¡ï¼‰ã€â€”â€” æŠŠä½ çš„ã€Œå–é¤åŠ¨ä½œã€æ’åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼›</li>
<li>è‹¥ä½ åˆ°åº—æ—¶ï¼Œå¥¶èŒ¶å·²ç»åšå¥½äº†ï¼ˆé pendingï¼‰ï¼šåº—å‘˜ç›´æ¥æŠŠä½ çš„ã€Œå–é¤åŠ¨ä½œã€æ’åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸ç”¨è®°å°æœ¬æœ¬ã€‚</li>
</ul>
<h4 data-id="heading-85">äº”ã€æ€»ç»“</h4>
<ol>
<li><strong>ä¸æ˜¯ä¸€å›äº‹</strong>ï¼š
<ul>
<li><code>push å›è°ƒåˆ°æ•°ç»„</code>ï¼šæ˜¯ã€Œå­˜å‚¨è¡Œä¸ºã€ï¼Œè§£å†³ pending çŠ¶æ€ä¸‹å›è°ƒçš„ä¿å­˜é—®é¢˜ï¼Œå’Œæ‰§è¡Œæ—¶æœºæ— å…³ï¼›</li>
<li><code>æ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</code>ï¼šæ˜¯ã€Œè°ƒåº¦è¡Œä¸ºã€ï¼Œè§£å†³å›è°ƒçš„å¼‚æ­¥æ‰§è¡Œæ—¶æœºé—®é¢˜ï¼Œä¿è¯ç¬¦åˆ Promise è§„èŒƒï¼›</li>
</ul>
</li>
<li><strong>å…³è”å…³ç³»</strong>ï¼š
<ul>
<li>è‹¥ Promise æ˜¯ pending â†’ å…ˆ push åˆ°å­˜å‚¨æ•°ç»„ï¼ŒçŠ¶æ€ç¡®å®šåï¼Œå†ä»æ•°ç»„å–å‡ºå›è°ƒï¼Œæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œï¼›</li>
<li>è‹¥ Promise å·²å®Œæˆ â†’ è·³è¿‡å­˜å‚¨æ•°ç»„ï¼Œç›´æ¥æŠŠå›è°ƒæ¨åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
</ul>
</li>
<li><strong>æ ¸å¿ƒç›®çš„</strong>ï¼š
<ul>
<li>å­˜å‚¨æ•°ç»„ï¼šä¿è¯å›è°ƒä¸ä¸¢å¤±ï¼›</li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼šä¿è¯å›è°ƒå¼‚æ­¥æ‰§è¡Œï¼Œä¸”æ‰§è¡Œé¡ºåºç¬¦åˆè§„èŒƒï¼ˆå¾®ä»»åŠ¡ä¼˜å…ˆçº§ &gt; å®ä»»åŠ¡ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p>è®°ä½ä¸€å¥è¯å°±èƒ½åˆ†æ¸…ï¼š<strong>å…ˆå­˜ï¼ˆpush æ•°ç»„ï¼‰ï¼Œåè°ƒï¼ˆå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰</strong> â€”â€” å­˜å‚¨æ˜¯ä¸ºäº†ä¸ä¸¢ï¼Œå¾®ä»»åŠ¡æ˜¯ä¸ºäº†å¼‚æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[| ES6 | å¼‚æ­¥ | é—­åŒ… | åŸå‹é“¾ | DOMæ“ä½œ | äº‹ä»¶å¤„ç† |]]></title>    <link>https://juejin.cn/post/7595890117866045486</link>    <guid>https://juejin.cn/post/7595890117866045486</guid>    <pubDate>2026-01-17T14:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117866045486" data-draft-id="7595808703074992154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="| ES6 | å¼‚æ­¥ | é—­åŒ… | åŸå‹é“¾  | DOMæ“ä½œ | äº‹ä»¶å¤„ç† |"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-17T14:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒå¯»girling"/> <meta itemprop="url" content="https://juejin.cn/user/2276467567770442"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            | ES6 | å¼‚æ­¥ | é—­åŒ… | åŸå‹é“¾  | DOMæ“ä½œ | äº‹ä»¶å¤„ç† |
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2276467567770442/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒå¯»girling
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:07:20.000Z" title="Sat Jan 17 2026 14:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ES6+ æ–°ç‰¹æ€§</h2>
<p>ES6ï¼ˆECMAScript 2015ï¼‰åŠåç»­çš„ ES7-ES14 è¢«ç»Ÿç§°ä¸º ES6+ï¼Œæ˜¯ JavaScript è¯­è¨€çš„é‡å¤§å‡çº§ï¼Œè§£å†³äº† ES5 æ—¶ä»£çš„è¯­æ³•å†—ä½™ã€ä½œç”¨åŸŸæ··ä¹±ã€åŠŸèƒ½ç¼ºå¤±ç­‰é—®é¢˜ï¼Œå¤§å¹…æå‡äº†ä»£ç çš„å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-1">1. å—çº§ä½œç”¨åŸŸä¸å˜é‡å£°æ˜</h3>
<p>ES5 ä¸­åªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸï¼Œ<code>var</code> å£°æ˜çš„å˜é‡å­˜åœ¨ â€œå˜é‡æå‡â€ å’Œ â€œä½œç”¨åŸŸç©¿é€â€ é—®é¢˜ï¼Œææ˜“å¼•å‘ bugã€‚ES6 æ–°å¢ <code>let</code> å’Œ <code>const</code> å…³é”®å­—ï¼Œå¼•å…¥å—çº§ä½œç”¨åŸŸï¼ˆ<code>{}</code> åŒ…è£¹çš„åŒºåŸŸï¼‰ï¼š</p>
<ul>
<li><code>let</code>ï¼šå£°æ˜å¯å˜å˜é‡ï¼Œä»…åœ¨å½“å‰å—çº§ä½œç”¨åŸŸæœ‰æ•ˆï¼Œæ— å˜é‡æå‡ï¼Œä¸å…è®¸é‡å¤å£°æ˜ï¼›</li>
<li><code>const</code>ï¼šå£°æ˜å¸¸é‡ï¼Œä¸€æ—¦èµ‹å€¼ä¸å¯ä¿®æ”¹ï¼ˆå¼•ç”¨ç±»å‹ä»…ä¿è¯åœ°å€ä¸å˜ï¼‰ï¼ŒåŒæ ·éµå¾ªå—çº§ä½œç”¨åŸŸè§„åˆ™ã€‚ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES5 é—®é¢˜ï¼šå˜é‡æå‡+ä½œç”¨åŸŸç©¿é€</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// 10ï¼ˆå…¨å±€ä½œç”¨åŸŸå¯è®¿é—®ï¼‰</span>

<span class="hljs-comment">// ES6 è§£å†³</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">let</span> b = <span class="hljs-number">20</span>;
  <span class="hljs-keyword">const</span> c = <span class="hljs-number">30</span>;
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b); <span class="hljs-comment">// ReferenceError: b is not defined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c); <span class="hljs-comment">// ReferenceError: c is not defined</span>
</code></pre>
<h3 data-id="heading-2">2. ç®­å¤´å‡½æ•°</h3>
<p>ç®€åŒ–å‡½æ•°å£°æ˜è¯­æ³•ï¼Œæ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>è¯­æ³•ç®€æ´ï¼šå•å‚æ•°å¯çœç•¥æ‹¬å·ï¼Œå•è¿”å›è¯­å¥å¯çœç•¥å¤§æ‹¬å·å’Œ <code>return</code>ï¼›</li>
<li>æ— ç‹¬ç«‹ <code>this</code>ï¼šç®­å¤´å‡½æ•°çš„ <code>this</code> ç»§æ‰¿è‡ªå¤–å±‚ä½œç”¨åŸŸï¼Œè§£å†³äº† ES5 ä¸­ <code>this</code> æŒ‡å‘æ··ä¹±çš„é—®é¢˜ï¼ˆå¦‚å›è°ƒå‡½æ•°ä¸­ <code>this</code> ä¸¢å¤±ï¼‰ï¼›</li>
<li>ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•°ï¼šæ— æ³•ä½¿ç”¨ <code>new</code> è°ƒç”¨ï¼Œæ—  <code>arguments</code> å¯¹è±¡ï¼ˆå¯æ”¹ç”¨å‰©ä½™å‚æ•°ï¼‰ã€‚ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ES5 å‡½æ•°</span>
<span class="hljs-keyword">const</span> add = <span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;
};

<span class="hljs-comment">// ES6 ç®­å¤´å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;

<span class="hljs-comment">// this æŒ‡å‘ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">fn1</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// undefinedï¼ˆthis æŒ‡å‘å…¨å±€ï¼‰</span>
    }, <span class="hljs-number">100</span>);
  },
  <span class="hljs-attr">fn2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// å¼ ä¸‰ï¼ˆthis ç»§æ‰¿è‡ª fn2 çš„ä½œç”¨åŸŸï¼‰</span>
    }, <span class="hljs-number">100</span>);
  }
};
obj.<span class="hljs-title function_">fn1</span>();
obj.<span class="hljs-title function_">fn2</span>();
</code></pre>
<h3 data-id="heading-3">3. è§£æ„èµ‹å€¼</h3>
<p>å…è®¸ä»æ•°ç»„ / å¯¹è±¡ä¸­æå–å€¼ï¼Œèµ‹å€¼ç»™å˜é‡ï¼Œç®€åŒ–æ•°æ®æå–é€»è¾‘ï¼š</p>
<ul>
<li>æ•°ç»„è§£æ„ï¼šæŒ‰ç´¢å¼•åŒ¹é…ï¼Œæ”¯æŒé»˜è®¤å€¼ï¼›</li>
<li>å¯¹è±¡è§£æ„ï¼šæŒ‰å±æ€§ååŒ¹é…ï¼Œæ”¯æŒé‡å‘½åå’Œé»˜è®¤å€¼ã€‚ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ•°ç»„è§£æ„</span>
<span class="hljs-type">const</span> [a, b, c = <span class="hljs-number">30</span>] = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>];
console.<span class="hljs-built_in">log</span>(a, b, c); <span class="hljs-comment">// 10 20 30</span>

<span class="hljs-comment">// å¯¹è±¡è§£æ„</span>
<span class="hljs-type">const</span> { name: userName, age = <span class="hljs-number">18</span> } = { name: <span class="hljs-string">"æå››"</span> };
console.<span class="hljs-built_in">log</span>(userName, age); <span class="hljs-comment">// æå›› 18</span>
</code></pre>
<h3 data-id="heading-4">4. æ‰©å±•è¿ç®—ç¬¦ä¸å‰©ä½™å‚æ•°</h3>
<ul>
<li>æ‰©å±•è¿ç®—ç¬¦ï¼ˆ<code>...</code>ï¼‰ï¼šå°†æ•°ç»„ / å¯¹è±¡å±•å¼€ä¸ºå•ä¸ªå…ƒç´ ï¼Œç”¨äºåˆå¹¶æ•°æ®ã€ä¼ é€’å‚æ•°ï¼›</li>
<li>å‰©ä½™å‚æ•°ï¼ˆ<code>...</code>ï¼‰ï¼šæ”¶é›†å‰©ä½™çš„å‚æ•°ï¼Œè½¬ä¸ºæ•°ç»„ï¼Œæ›¿ä»£ <code>arguments</code>ã€‚ç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// æ‰©å±•è¿ç®—ç¬¦
const <span class="hljs-attr">arr1</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<span class="hljs-comment">;</span>
const <span class="hljs-attr">arr2</span> = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]<span class="hljs-comment">;</span>
const <span class="hljs-attr">arr3</span> = [...arr1, ...arr2]<span class="hljs-comment">; // [1,2,3,4,5,6]</span>

const <span class="hljs-attr">obj1</span> = { a: <span class="hljs-number">1</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">obj2</span> = { b: <span class="hljs-number">2</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">obj3</span> = { ...obj1, ...obj2 }<span class="hljs-comment">; // {a:1, b:2}</span>

// å‰©ä½™å‚æ•°
const <span class="hljs-attr">sum</span> = (...args) =&gt; args.reduce((total, cur) =&gt; total + cur, <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
console.log(sum(1,2,3))<span class="hljs-comment">; // 6</span>
</code></pre>
<h3 data-id="heading-5">5. æ¨¡æ¿å­—ç¬¦ä¸²</h3>
<p>ç”¨åå¼•å·ï¼ˆ<code>ï¼‰åŒ…è£¹å­—ç¬¦ä¸²ï¼Œæ”¯æŒæ¢è¡Œå’Œå˜é‡æ’å€¼ï¼ˆ</code>${å˜é‡}`ï¼‰ï¼Œè§£å†³ ES5 å­—ç¬¦ä¸²æ‹¼æ¥ç¹ççš„é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">name</span> = <span class="hljs-string">"ç‹äº”"</span><span class="hljs-comment">;</span>
const <span class="hljs-attr">age</span> = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
// ES5 æ‹¼æ¥
const <span class="hljs-attr">str1</span> = <span class="hljs-string">"å§“åï¼š"</span> + name + <span class="hljs-string">"ï¼Œå¹´é¾„ï¼š"</span> + age + <span class="hljs-string">"å²"</span><span class="hljs-comment">;</span>
// ES6 æ¨¡æ¿å­—ç¬¦ä¸²
const <span class="hljs-attr">str2</span> = `å§“åï¼š<span class="hljs-variable">${name}</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-variable">${age}</span>å²`<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-6">6. å…¶ä»–æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><code>Set/Map</code> æ•°æ®ç»“æ„ï¼š<code>Set</code> ç”¨äºå­˜å‚¨å”¯ä¸€å€¼ï¼ˆæ•°ç»„å»é‡ï¼‰ï¼Œ<code>Map</code> é”®å€¼å¯¹é›†åˆï¼ˆé”®å¯ä¸ºä»»æ„ç±»å‹ï¼Œæ›¿ä»£å¯¹è±¡ï¼‰ï¼›</li>
<li><code>Class</code> ç±»ï¼šè¯­æ³•ç³–ï¼Œç®€åŒ–åŸå‹é“¾ç»§æ‰¿ï¼Œæä¾› <code>constructor</code>ã€<code>extends</code>ã€<code>super</code> ç­‰å…³é”®å­—ï¼›</li>
<li>æ¨¡å—åŒ–ï¼ˆ<code>import/export</code>ï¼‰ï¼šæ›¿ä»£ CommonJS/AMDï¼Œå®ç°æŒ‰éœ€åŠ è½½ï¼Œæå‡ä»£ç æ¨¡å—åŒ–ç¨‹åº¦ï¼›</li>
<li>å¯é€‰é“¾ï¼ˆ<code>?.</code>ï¼‰ã€ç©ºå€¼åˆå¹¶ï¼ˆ<code>??</code>ï¼‰ï¼šES2020 ç‰¹æ€§ï¼Œç®€åŒ–ç©ºå€¼åˆ¤æ–­ï¼Œé¿å… <code>Cannot read property 'xxx' of undefined</code> é”™è¯¯ã€‚</li>
</ul>
<p>ES6+ æ–°ç‰¹æ€§çš„æ ¸å¿ƒä»·å€¼åœ¨äº â€œè¯­æ³•ç®€åŒ–â€ å’Œ â€œåŠŸèƒ½è¡¥å…¨â€ï¼Œè®© JavaScript ä» â€œè„šæœ¬è¯­è¨€â€ å‘ â€œå·¥ç¨‹åŒ–è¯­è¨€â€ è¿ˆè¿›ï¼Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘ï¼ˆReact/Vue/TypeScriptï¼‰çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-7">äºŒã€å¼‚æ­¥ï¼ˆPromise, async/awaitï¼‰</h2>
<p>JavaScript æ˜¯å•çº¿ç¨‹è¯­è¨€ï¼Œé»˜è®¤åŒæ­¥æ‰§è¡Œä»£ç ï¼Œä½†ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ã€æ–‡ä»¶æ“ä½œç­‰åœºæ™¯éœ€è¦å¼‚æ­¥å¤„ç†ï¼Œå¦åˆ™ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚å¼‚æ­¥ç¼–ç¨‹ç»å†äº† â€œå›è°ƒå‡½æ•° â†’ Promise â†’ async/awaitâ€ çš„æ¼”è¿›ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯è§£å†³ â€œå›è°ƒåœ°ç‹±â€ï¼Œè®©å¼‚æ­¥ä»£ç æ›´æ˜“è¯»ã€æ˜“ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-8">1. å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒé—®é¢˜ï¼šå›è°ƒåœ°ç‹±</h3>
<p>ES5 ä¸­å¼‚æ­¥æ“ä½œä¾èµ–å›è°ƒå‡½æ•°ï¼Œå¤šä¸ªå¼‚æ­¥åµŒå¥—æ—¶ä¼šå‡ºç° â€œå›è°ƒåœ°ç‹±â€ï¼ˆä»£ç å±‚çº§æ·±ã€å¯è¯»æ€§å·®ã€é”™è¯¯å¤„ç†ç¹çï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å›è°ƒåœ°ç‹±ï¼šè·å–ç”¨æˆ·ä¿¡æ¯ â†’ è·å–ç”¨æˆ·è®¢å• â†’ è·å–è®¢å•è¯¦æƒ…</span>
$.<span class="hljs-title function_">get</span>(<span class="hljs-string">"/api/user"</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  $.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/order?userId=<span class="hljs-subst">${user.id}</span>`</span>, <span class="hljs-function">(<span class="hljs-params">order</span>) =&gt;</span> {
    $.<span class="hljs-title function_">get</span>(<span class="hljs-string">`/api/orderDetail?orderId=<span class="hljs-subst">${order.id}</span>`</span>, <span class="hljs-function">(<span class="hljs-params">detail</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(detail);
    }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–è®¢å•è¯¦æƒ…å¤±è´¥"</span>, err);
    });
  }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–è®¢å•å¤±è´¥"</span>, err);
  });
}, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–ç”¨æˆ·å¤±è´¥"</span>, err);
});
</code></pre>
<p>é—®é¢˜ï¼šå±‚çº§åµŒå¥—è¿‡æ·±ï¼Œé”™è¯¯å¤„ç†åˆ†æ•£ï¼Œä»£ç éš¾ä»¥è°ƒè¯•å’Œç»´æŠ¤ã€‚</p>
<h3 data-id="heading-9">2. Promiseï¼šå¼‚æ­¥æ“ä½œçš„æ ‡å‡†åŒ–å°è£…</h3>
<p>Promise æ˜¯ ES6 å¼•å…¥çš„å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»£è¡¨å¼‚æ­¥æ“ä½œçš„ â€œæœªå®Œæˆ / æˆåŠŸ / å¤±è´¥â€ çŠ¶æ€ï¼Œæ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li>ä¸‰ç§çŠ¶æ€ï¼š<code>pending</code>ï¼ˆè¿›è¡Œä¸­ï¼‰ã€<code>fulfilled</code>ï¼ˆå·²æˆåŠŸï¼‰ã€<code>rejected</code>ï¼ˆå·²å¤±è´¥ï¼‰ï¼ŒçŠ¶æ€ä¸€æ—¦æ”¹å˜ä¸å¯é€†è½¬ï¼›</li>
<li>ä¸¤ä¸ªå›è°ƒï¼š<code>then()</code> å¤„ç†æˆåŠŸç»“æœï¼Œ<code>catch()</code> å¤„ç†å¤±è´¥ç»“æœï¼Œæ”¯æŒé“¾å¼è°ƒç”¨ï¼›</li>
<li>è§£å†³å›è°ƒåœ°ç‹±ï¼šé€šè¿‡é“¾å¼è°ƒç”¨æ›¿ä»£åµŒå¥—ï¼Œé”™è¯¯å¯ç»Ÿä¸€æ•è·ã€‚</li>
</ul>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰Promise åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»º Promise å¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getPromise</span> = (<span class="hljs-params">url</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>();
    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">"GET"</span>, url);
    xhr.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
        <span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">responseText</span>)); <span class="hljs-comment">// æˆåŠŸï¼šè°ƒç”¨ resolve</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(xhr.<span class="hljs-property">statusText</span>)); <span class="hljs-comment">// å¤±è´¥ï¼šè°ƒç”¨ reject</span>
      }
    };
    xhr.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ç½‘ç»œè¯·æ±‚å¤±è´¥"</span>));
    };
    xhr.<span class="hljs-title function_">send</span>();
  });
};

<span class="hljs-comment">// é“¾å¼è°ƒç”¨ï¼šè§£å†³å›è°ƒåœ°ç‹±</span>
<span class="hljs-title function_">getPromise</span>(<span class="hljs-string">"/api/user"</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">`/api/order?userId=<span class="hljs-subst">${user.id}</span>`</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">order</span>) =&gt;</span> <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">`/api/orderDetail?orderId=<span class="hljs-subst">${order.id}</span>`</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">detail</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(detail))
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯·æ±‚å¤±è´¥"</span>, err)); <span class="hljs-comment">// ç»Ÿä¸€æ•è·æ‰€æœ‰é”™è¯¯</span>
</code></pre>
<h4 data-id="heading-11">ï¼ˆ2ï¼‰Promise å¸¸ç”¨æ–¹æ³•</h4>
<ul>
<li><code>Promise.all()</code>ï¼šæ¥æ”¶å¤šä¸ª Promise æ•°ç»„ï¼Œå…¨éƒ¨æˆåŠŸæ‰è¿”å›ç»“æœæ•°ç»„ï¼Œä¸€ä¸ªå¤±è´¥åˆ™ç«‹å³å¤±è´¥ï¼›</li>
<li><code>Promise.race()</code>ï¼šæ¥æ”¶å¤šä¸ª Promise æ•°ç»„ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå®Œæˆçš„ Promise ç»“æœï¼ˆæ— è®ºæˆåŠŸ / å¤±è´¥ï¼‰ï¼›</li>
<li><code>Promise.resolve()</code>/<code>Promise.reject()</code>ï¼šå¿«é€Ÿåˆ›å»ºæˆåŠŸ / å¤±è´¥çš„ Promise å¯¹è±¡ï¼›</li>
<li><code>Promise.allSettled()</code>ï¼šç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼ˆæ— è®ºæˆåŠŸ / å¤±è´¥ï¼‰ï¼Œè¿”å›æ‰€æœ‰ç»“æœï¼ˆåŒ…å«çŠ¶æ€å’Œå€¼ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆPromise.allï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒæ—¶è¯·æ±‚å¤šä¸ªæ¥å£ï¼Œå…¨éƒ¨å®Œæˆåå¤„ç†</span>
<span class="hljs-keyword">const</span> promise1 = <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">"/api/user"</span>);
<span class="hljs-keyword">const</span> promise2 = <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">"/api/goods"</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([promise1, promise2])
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[user, goods]</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>, user);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å•†å“ä¿¡æ¯"</span>, goods);
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æŸä¸ªè¯·æ±‚å¤±è´¥"</span>, err));
</code></pre>
<h3 data-id="heading-12">3. async/awaitï¼šå¼‚æ­¥ä»£ç åŒæ­¥åŒ–</h3>
<p>ES2017 å¼•å…¥çš„ <code>async/await</code> æ˜¯ Promise çš„è¯­æ³•ç³–ï¼Œå…è®¸ç”¨ â€œåŒæ­¥ä»£ç çš„å†™æ³•â€ å¤„ç†å¼‚æ­¥æ“ä½œï¼Œæ ¸å¿ƒè§„åˆ™ï¼š</p>
<ul>
<li><code>async</code> ä¿®é¥°å‡½æ•°ï¼šä½¿å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼›</li>
<li><code>await</code> ä¿®é¥° Promiseï¼šæš‚åœå‡½æ•°æ‰§è¡Œï¼Œç›´åˆ° Promise çŠ¶æ€å˜ä¸ºæˆåŠŸï¼Œè¿”å›ç»“æœï¼›è‹¥ Promise å¤±è´¥ï¼Œéœ€ç”¨ <code>try/catch</code> æ•è·é”™è¯¯ã€‚</li>
</ul>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰åŸºæœ¬ç”¨æ³•ï¼ˆè§£å†³å›è°ƒåœ°ç‹±çš„ç»ˆææ–¹æ¡ˆï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è£…å¼‚æ­¥è¯·æ±‚å‡½æ•°ï¼ˆè¿”å› Promiseï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUser</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">"/api/user"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrder</span> = (<span class="hljs-params">userId</span>) =&gt; <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">`/api/order?userId=<span class="hljs-subst">${userId}</span>`</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderDetail</span> = (<span class="hljs-params">orderId</span>) =&gt; <span class="hljs-title function_">getPromise</span>(<span class="hljs-string">`/api/orderDetail?orderId=<span class="hljs-subst">${orderId}</span>`</span>);

<span class="hljs-comment">// async/await å†™æ³•ï¼šåŒæ­¥é£æ ¼çš„å¼‚æ­¥ä»£ç </span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUser</span>(); <span class="hljs-comment">// ç­‰å¾… getUser å®Œæˆ</span>
    <span class="hljs-keyword">const</span> order = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrder</span>(user.<span class="hljs-property">id</span>); <span class="hljs-comment">// ç­‰å¾… getOrder å®Œæˆ</span>
    <span class="hljs-keyword">const</span> detail = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrderDetail</span>(order.<span class="hljs-property">id</span>); <span class="hljs-comment">// ç­‰å¾… getOrderDetail å®Œæˆ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(detail);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯·æ±‚å¤±è´¥"</span>, err); <span class="hljs-comment">// ç»Ÿä¸€æ•è·æ‰€æœ‰é”™è¯¯</span>
  }
};

<span class="hljs-title function_">getOrderInfo</span>();
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰async/await ä¼˜åŠ¿</h4>
<ul>
<li>ä»£ç æ‰å¹³åŒ–ï¼šæ— åµŒå¥—ï¼Œå¯è¯»æ€§æ¥è¿‘åŒæ­¥ä»£ç ï¼›</li>
<li>é”™è¯¯å¤„ç†ç»Ÿä¸€ï¼šé€šè¿‡ <code>try/catch</code> æ•è·æ‰€æœ‰å¼‚æ­¥é”™è¯¯ï¼Œæ›¿ä»£ Promise çš„ <code>catch()</code>ï¼›</li>
<li>è°ƒè¯•å‹å¥½ï¼šå¯åœ¨ <code>await</code> å¤„æ‰“æ–­ç‚¹ï¼Œè°ƒè¯•æµç¨‹ä¸åŒæ­¥ä»£ç ä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-15">4. å¼‚æ­¥ç¼–ç¨‹çš„æ ¸å¿ƒåŸåˆ™</h3>
<ul>
<li>é¿å…åŒæ­¥é˜»å¡ï¼šå¼‚æ­¥æ“ä½œå§‹ç»ˆä¸é˜»å¡ä¸»çº¿ç¨‹ï¼ˆå¦‚å®šæ—¶å™¨ã€ç½‘ç»œè¯·æ±‚ç”±æµè§ˆå™¨å†…æ ¸çš„çº¿ç¨‹å¤„ç†ï¼‰ï¼›</li>
<li>é”™è¯¯å¤„ç†å…¨è¦†ç›–ï¼šPromise éœ€åŠ  <code>catch()</code>ï¼Œasync/await éœ€åŒ… <code>try/catch</code>ï¼Œé¿å…æœªæ•è·çš„å¼‚æ­¥é”™è¯¯ï¼›</li>
<li>å¹¶è¡Œå¤„ç†ä¼˜åŒ–ï¼šå¤šä¸ªæ— ä¾èµ–çš„å¼‚æ­¥æ“ä½œï¼Œç”¨ <code>Promise.all()</code> æ›¿ä»£ä¸²è¡Œ <code>await</code>ï¼Œæå‡æ‰§è¡Œæ•ˆç‡ã€‚</li>
</ul>
<p>å¼‚æ­¥ç¼–ç¨‹æ˜¯å‰ç«¯å¼€å‘çš„æ ¸å¿ƒéš¾ç‚¹ï¼ŒPromise è§£å†³äº† â€œå›è°ƒåœ°ç‹±â€ çš„ç»“æ„é—®é¢˜ï¼Œasync/await åˆ™è®©å¼‚æ­¥ä»£ç çš„å¯è¯»æ€§è¾¾åˆ°äº†åŒæ­¥ä»£ç çš„æ°´å¹³ï¼Œæ˜¯ç°ä»£å‰ç«¯å¤„ç†ç½‘ç»œè¯·æ±‚ã€å¼‚æ­¥æ•°æ®åŠ è½½çš„æ ‡é…ã€‚</p>
<h2 data-id="heading-16">ä¸‰ã€é—­åŒ…å’ŒåŸå‹é“¾</h2>
<p>é—­åŒ…å’ŒåŸå‹é“¾æ˜¯ JavaScript çš„ä¸¤å¤§æ ¸å¿ƒç‰¹æ€§ï¼Œä¹Ÿæ˜¯é¢è¯•é«˜é¢‘è€ƒç‚¹ã€‚é—­åŒ…å…³ä¹ä½œç”¨åŸŸå’Œå˜é‡ç”Ÿå‘½å‘¨æœŸï¼ŒåŸå‹é“¾åˆ™æ˜¯ JavaScript å®ç°ç»§æ‰¿çš„åº•å±‚æœºåˆ¶ï¼Œç†è§£è¿™ä¸¤ä¸ªæ¦‚å¿µèƒ½å¸®ä½ çªç ´ â€œè¯­æ³•ä½¿ç”¨â€ åˆ° â€œåŸç†ç†è§£â€ çš„ç“¶é¢ˆã€‚</p>
<h3 data-id="heading-17">1. é—­åŒ…ï¼ˆClosureï¼‰</h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰é—­åŒ…çš„å®šä¹‰</h4>
<p>é—­åŒ…æ˜¯æŒ‡ â€œæœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°â€ï¼Œæœ¬è´¨æ˜¯å‡½æ•°ä½œç”¨åŸŸé“¾çš„ä¿ç•™ï¼šå½“å†…éƒ¨å‡½æ•°è¢«å¤–éƒ¨å¼•ç”¨æ—¶ï¼Œå…¶æ‰€åœ¨çš„ä½œç”¨åŸŸä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶é”€æ¯ï¼Œä»è€Œå¯ä»¥æŒç»­è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡ã€‚</p>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰é—­åŒ…çš„å½¢æˆæ¡ä»¶</h4>
<ol>
<li>å­˜åœ¨åµŒå¥—å‡½æ•°ï¼ˆå†…éƒ¨å‡½æ•° + å¤–éƒ¨å‡½æ•°ï¼‰ï¼›</li>
<li>å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å‡½æ•°çš„å˜é‡ / å‚æ•°ï¼›</li>
<li>å¤–éƒ¨å‡½æ•°æ‰§è¡Œåï¼Œå†…éƒ¨å‡½æ•°è¢«å¤–éƒ¨ç¯å¢ƒå¼•ç”¨ï¼ˆå¦‚è¿”å›ã€èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-20">ï¼ˆ3ï¼‰åŸºæœ¬ç”¨æ³•ä¸ç¤ºä¾‹</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// åŸºç¡€é—­åŒ…ï¼šå¤–éƒ¨å‡½æ•°æ‰§è¡Œåï¼Œå†…éƒ¨å‡½æ•°ä»èƒ½è®¿é—®å…¶å˜é‡</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">outer</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">num</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// å¤–éƒ¨å‡½æ•°çš„å˜é‡</span>
  <span class="hljs-comment">// å†…éƒ¨å‡½æ•°å¼•ç”¨å¤–éƒ¨å˜é‡</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inner</span>(<span class="hljs-params"/>) </span>{
    console.<span class="hljs-title function_ invoke__">log</span>(num);
  }
  <span class="hljs-keyword">return</span> inner; <span class="hljs-comment">// è¿”å›å†…éƒ¨å‡½æ•°ï¼Œä½¿å…¶è¢«å¤–éƒ¨å¼•ç”¨</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">fn</span> = <span class="hljs-title function_ invoke__">outer</span>(); <span class="hljs-comment">// outer æ‰§è¡Œå®Œæ¯•ï¼Œä½†å…¶ä½œç”¨åŸŸæœªè¢«é”€æ¯</span>
<span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>)</span>; <span class="hljs-comment">// 10ï¼ˆinner ä»èƒ½è®¿é—® numï¼‰</span>
</code></pre>
<h4 data-id="heading-21">ï¼ˆ4ï¼‰é—­åŒ…çš„æ ¸å¿ƒåº”ç”¨åœºæ™¯</h4>
<ul>
<li>
<p>å°è£…ç§æœ‰å˜é‡ï¼šæ¨¡æ‹Ÿ â€œç§æœ‰å±æ€§ / æ–¹æ³•â€ï¼Œé¿å…å…¨å±€å˜é‡æ±¡æŸ“ï¼›</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°è£…è®¡æ•°å™¨ï¼šcount æ˜¯ç§æœ‰å˜é‡ï¼Œåªèƒ½é€šè¿‡æ–¹æ³•ä¿®æ”¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> count++,
    <span class="hljs-attr">decrement</span>: <span class="hljs-function">() =&gt;</span> count--,
    <span class="hljs-attr">getCount</span>: <span class="hljs-function">() =&gt;</span> count
  };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>();
counter.<span class="hljs-title function_">increment</span>();
counter.<span class="hljs-title function_">increment</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">getCount</span>()); <span class="hljs-comment">// 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-property">count</span>); <span class="hljs-comment">// undefinedï¼ˆæ— æ³•ç›´æ¥è®¿é—®ï¼‰</span>
</code></pre>
</li>
<li>
<p>é˜²æŠ– / èŠ‚æµå‡½æ•°ï¼šåˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨ IDã€ä¸Šæ¬¡æ‰§è¡Œæ—¶é—´ç­‰çŠ¶æ€ï¼›</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜²æŠ–å‡½æ•°ï¼ˆé—­åŒ…ä¿å­˜ timer å˜é‡ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">debounce</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span>; <span class="hljs-comment">// é—­åŒ…ä¿å­˜ timerï¼Œå¤šæ¬¡è°ƒç”¨å…±äº«åŒä¸€ä¸ª timer</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-built_in">clearTimeout</span>(timer);
    timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    }, delay);
  };
}
</code></pre>
</li>
<li>
<p>æŸ¯é‡ŒåŒ–å‡½æ•°ï¼šå°†å¤šå‚æ•°å‡½æ•°è½¬ä¸ºå•å‚æ•°å‡½æ•°ï¼Œåˆ©ç”¨é—­åŒ…ç¼“å­˜å·²ä¼ å…¥çš„å‚æ•°ã€‚</p>
</li>
</ul>
<h4 data-id="heading-22">ï¼ˆ5ï¼‰é—­åŒ…çš„æ³¨æ„äº‹é¡¹</h4>
<ul>
<li>å†…å­˜æ³„æ¼é£é™©ï¼šé—­åŒ…ä¼šä¿ç•™å¤–å±‚ä½œç”¨åŸŸï¼Œè‹¥é•¿æœŸå¼•ç”¨æœªé‡Šæ”¾ï¼ˆå¦‚èµ‹å€¼ç»™å…¨å±€å˜é‡ï¼‰ï¼Œä¼šå¯¼è‡´å˜é‡æ— æ³•è¢«åƒåœ¾å›æ”¶ï¼Œå ç”¨å†…å­˜ï¼›</li>
<li>è§£å†³ï¼šä½¿ç”¨å®Œé—­åŒ…åï¼Œæ‰‹åŠ¨è§£é™¤å¼•ç”¨ï¼ˆå¦‚ <code>fn = null</code>ï¼‰ï¼Œè®©ä½œç”¨åŸŸå¯ä»¥è¢«å›æ”¶ã€‚</li>
</ul>
<h3 data-id="heading-23">2. åŸå‹é“¾ï¼ˆPrototype Chainï¼‰</h3>
<p>JavaScript æ˜¯ â€œåŸºäºåŸå‹çš„é¢å‘å¯¹è±¡è¯­è¨€â€ï¼Œæ²¡æœ‰ç±»ï¼ˆES6 Class æ˜¯è¯­æ³•ç³–ï¼‰ï¼Œæ‰€æœ‰å¯¹è±¡éƒ½é€šè¿‡ â€œåŸå‹â€ å®ç°å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼ŒåŸå‹é“¾æ˜¯å®ç°ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h4 data-id="heading-24">ï¼ˆ1ï¼‰æ ¸å¿ƒæ¦‚å¿µ</h4>
<ul>
<li>åŸå‹ï¼ˆ<code>prototype</code>ï¼‰ï¼šå‡½æ•°ç‰¹æœ‰çš„å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯å½“å‰å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹çš„åŸå‹ï¼›</li>
<li>éšå¼åŸå‹ï¼ˆ<code>__proto__</code>ï¼‰ï¼šæ‰€æœ‰å¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°ï¼‰éƒ½æœ‰çš„å±æ€§ï¼ŒæŒ‡å‘å…¶æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼›</li>
<li>åŸå‹é“¾ï¼šå½“è®¿é—®å¯¹è±¡çš„å±æ€§ / æ–¹æ³•æ—¶ï¼Œå…ˆåœ¨è‡ªèº«æŸ¥æ‰¾ï¼Œæ‰¾ä¸åˆ°åˆ™é€šè¿‡ <code>__proto__</code> å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ° <code>Object.prototype</code>ï¼Œè¿™ä¸ªæŸ¥æ‰¾é“¾æ¡å°±æ˜¯åŸå‹é“¾ã€‚</li>
</ul>
<h4 data-id="heading-25">ï¼ˆ2ï¼‰åŸå‹é“¾çš„åŸºæœ¬ç»“æ„</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-comment">// ç»™åŸå‹æ·»åŠ æ–¹æ³•</span>
<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHello</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span>`</span>);
};

<span class="hljs-comment">// åˆ›å»ºå®ä¾‹</span>
<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"å¼ ä¸‰"</span>);

<span class="hljs-comment">// åŸå‹é“¾æŸ¥æ‰¾ï¼šp1 â†’ Person.prototype â†’ Object.prototype â†’ null</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1.<span class="hljs-property">name</span>); <span class="hljs-comment">// è‡ªèº«å±æ€§ï¼Œç›´æ¥è¿”å›</span>
p1.<span class="hljs-title function_">sayHello</span>(); <span class="hljs-comment">// p1 è‡ªèº«æ—  sayHelloï¼ŒæŸ¥æ‰¾ p1.__proto__ï¼ˆPerson.prototypeï¼‰æ‰¾åˆ°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// p1 å’Œ Person.prototype æ—  toStringï¼ŒæŸ¥æ‰¾ Object.prototype æ‰¾åˆ°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p1.<span class="hljs-property">xxx</span>); <span class="hljs-comment">// åŸå‹é“¾æœ«ç«¯ä¸º nullï¼Œè¿”å› undefined</span>
</code></pre>
<h4 data-id="heading-26">ï¼ˆ3ï¼‰åŸå‹é“¾çš„æ ¸å¿ƒåº”ç”¨ï¼šç»§æ‰¿</h4>
<p>ES5 ä¸­é€šè¿‡ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿ï¼ˆES6 Class çš„ <code>extends</code> åº•å±‚ä»æ˜¯åŸå‹é“¾ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">eat</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> åƒé¥­`</span>);
};

<span class="hljs-comment">// å­ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-title class_">Parent</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, name); <span class="hljs-comment">// ç»§æ‰¿çˆ¶ç±»å®ä¾‹å±æ€§</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
}
<span class="hljs-comment">// ç»§æ‰¿çˆ¶ç±»åŸå‹æ–¹æ³•</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> = <span class="hljs-title class_">Child</span>; <span class="hljs-comment">// ä¿®æ­£æ„é€ å‡½æ•°æŒ‡å‘</span>

<span class="hljs-comment">// å­ç±»æ·»åŠ è‡ªæœ‰æ–¹æ³•</span>
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> è·‘æ­¥ï¼Œå¹´é¾„ <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.age}</span>`</span>);
};

<span class="hljs-keyword">const</span> child = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>(<span class="hljs-string">"æå››"</span>, <span class="hljs-number">10</span>);
child.<span class="hljs-title function_">eat</span>(); <span class="hljs-comment">// ç»§æ‰¿çˆ¶ç±»æ–¹æ³•</span>
child.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// å­ç±»è‡ªæœ‰æ–¹æ³•</span>
</code></pre>
<h4 data-id="heading-27">ï¼ˆ4ï¼‰åŸå‹é“¾çš„å…³é”®è§„åˆ™</h4>
<ul>
<li>æ‰€æœ‰å¯¹è±¡çš„æœ€ç»ˆåŸå‹æ˜¯ <code>Object.prototype</code>ï¼Œå…¶ <code>__proto__</code> ä¸º <code>null</code>ï¼›</li>
<li>å‡½æ•°çš„ <code>prototype</code> æ˜¯æ™®é€šå¯¹è±¡ï¼Œ<code>Function.prototype</code> æ˜¯å‡½æ•°ï¼ˆç‰¹æ®Šï¼‰ï¼›</li>
<li>ä¿®æ”¹åŸå‹ä¼šå½±å“æ‰€æœ‰å®ä¾‹ï¼ˆåŸå‹å…±äº«ç‰¹æ€§ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-28">3. é—­åŒ…ä¸åŸå‹é“¾çš„å…³è”</h3>
<p>é—­åŒ…å…³æ³¨ â€œä½œç”¨åŸŸå’Œå˜é‡ä¿ç•™â€ï¼ŒåŸå‹é“¾å…³æ³¨ â€œå¯¹è±¡å±æ€§ç»§æ‰¿â€ï¼ŒäºŒè€…å…±åŒæ„æˆ JavaScript çš„æ ¸å¿ƒåº•å±‚é€»è¾‘ï¼šé—­åŒ…è®©å‡½æ•°å¯ä»¥çªç ´ä½œç”¨åŸŸé™åˆ¶è®¿é—®å˜é‡ï¼ŒåŸå‹é“¾è®©å¯¹è±¡å¯ä»¥çªç ´è‡ªèº«ç»“æ„ç»§æ‰¿æ–¹æ³•ï¼Œæ˜¯ç†è§£ JavaScript è®¾è®¡æ€æƒ³çš„å…³é”®ã€‚</p>
<h2 data-id="heading-29">å››ã€DOM æ“ä½œå’Œäº‹ä»¶å¤„ç†</h2>
<p>DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯æµè§ˆå™¨å°† HTML æ–‡æ¡£è§£ææˆçš„æ ‘å½¢ç»“æ„ï¼Œå‰ç«¯å¼€å‘çš„æ ¸å¿ƒæ˜¯é€šè¿‡ JavaScript æ“ä½œ DOM å®ç°é¡µé¢äº¤äº’ï¼Œäº‹ä»¶å¤„ç†åˆ™æ˜¯å“åº”ç”¨æˆ·æ“ä½œï¼ˆç‚¹å‡»ã€è¾“å…¥ã€æ»šåŠ¨ç­‰ï¼‰çš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h3 data-id="heading-30">1. DOM æ“ä½œ</h3>
<p>DOM æ“ä½œåˆ†ä¸º â€œæŸ¥æ‰¾èŠ‚ç‚¹â€â€œåˆ›å»º / æ’å…¥èŠ‚ç‚¹â€â€œä¿®æ”¹èŠ‚ç‚¹â€â€œåˆ é™¤èŠ‚ç‚¹â€ å››ç±»ï¼Œæ ¸å¿ƒæ˜¯æ“ä½œ DOM æ ‘çš„èŠ‚ç‚¹ï¼ˆå…ƒç´ èŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹ã€å±æ€§èŠ‚ç‚¹ï¼‰ã€‚</p>
<h4 data-id="heading-31">ï¼ˆ1ï¼‰æŸ¥æ‰¾ DOM èŠ‚ç‚¹ï¼ˆæ ¸å¿ƒï¼‰</h4>
<p>æŸ¥æ‰¾æ˜¯ DOM æ“ä½œçš„ç¬¬ä¸€æ­¥ï¼Œå¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li>æŒ‰ ID æŸ¥æ‰¾ï¼š<code>document.getElementById("id")</code> â†’ è¿”å›å•ä¸ªå…ƒç´ ï¼ˆæ•ˆç‡æœ€é«˜ï¼‰ï¼›</li>
<li>æŒ‰ç±»åæŸ¥æ‰¾ï¼š<code>document.getElementsByClassName("className")</code> â†’ è¿”å› HTMLCollectionï¼ˆåŠ¨æ€é›†åˆï¼‰ï¼›</li>
<li>æŒ‰æ ‡ç­¾åæŸ¥æ‰¾ï¼š<code>document.getElementsByTagName("tagName")</code> â†’ è¿”å› HTMLCollectionï¼›</li>
<li>æŒ‰é€‰æ‹©å™¨æŸ¥æ‰¾ï¼š<code>document.querySelector("selector")</code>ï¼ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…å…ƒç´ ï¼‰ã€<code>document.querySelectorAll("selector")</code>ï¼ˆè¿”å› NodeListï¼Œé™æ€é›†åˆï¼‰â†’ æœ€çµæ´»ï¼Œæ”¯æŒ CSS é€‰æ‹©å™¨ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æŒ‰ ID æŸ¥æ‰¾</span>
<span class="hljs-keyword">const</span> box = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"box"</span>);

<span class="hljs-comment">// æŒ‰é€‰æ‹©å™¨æŸ¥æ‰¾</span>
<span class="hljs-keyword">const</span> item = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelector</span>(<span class="hljs-string">".list .item"</span>);
<span class="hljs-keyword">const</span> items = <span class="hljs-built_in">document</span>.<span class="hljs-built_in">querySelectorAll</span>(<span class="hljs-string">".list .item"</span>); <span class="hljs-comment">// NodeList å¯é€šè¿‡ forEach éå†</span>
</code></pre>
<h4 data-id="heading-32">ï¼ˆ2ï¼‰åˆ›å»ºä¸æ’å…¥èŠ‚ç‚¹</h4>
<p>åŠ¨æ€ç”Ÿæˆé¡µé¢å†…å®¹çš„æ ¸å¿ƒï¼Œå¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li>
<p>åˆ›å»ºå…ƒç´ ï¼š<code>document.createElement("tagName")</code>ï¼›</p>
</li>
<li>
<p>åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹ï¼š<code>document.createTextNode("text")</code>ï¼›</p>
</li>
<li>
<p>æ’å…¥èŠ‚ç‚¹ï¼š</p>
<ul>
<li><code>parent.appendChild(child)</code>ï¼šå°†å­èŠ‚ç‚¹æ’å…¥çˆ¶èŠ‚ç‚¹æœ«å°¾ï¼›</li>
<li><code>parent.insertBefore(newNode, referenceNode)</code>ï¼šå°†æ–°èŠ‚ç‚¹æ’å…¥å‚è€ƒèŠ‚ç‚¹ä¹‹å‰ï¼›</li>
<li><code>element.innerHTML</code>ï¼šç›´æ¥é€šè¿‡ HTML å­—ç¬¦ä¸²æ’å…¥èŠ‚ç‚¹ï¼ˆç®€æ´ä½†æœ‰ XSS é£é™©ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºå…ƒç´ å¹¶æ’å…¥
const <span class="hljs-attr">ul</span> = document.querySelector(<span class="hljs-string">"ul"</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">li</span> = document.createElement(<span class="hljs-string">"li"</span>)<span class="hljs-comment">;</span>
<span class="hljs-attr">li.textContent</span> = <span class="hljs-string">"æ–°åˆ—è¡¨é¡¹"</span><span class="hljs-comment">; // è®¾ç½®æ–‡æœ¬å†…å®¹ï¼ˆå®‰å…¨ï¼Œæ—  XSSï¼‰</span>
ul.appendChild(li)<span class="hljs-comment">;</span>

// innerHTML æ–¹å¼ï¼ˆæ…ç”¨ï¼Œé¿å…ç”¨æˆ·è¾“å…¥å†…å®¹ï¼‰
ul.innerHTML += "&lt;li&gt;æ–°åˆ—è¡¨é¡¹&lt;/li&gt;"<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-33">ï¼ˆ3ï¼‰ä¿®æ”¹ DOM èŠ‚ç‚¹</h4>
<ul>
<li>
<p>ä¿®æ”¹å±æ€§ï¼š<code>element.setAttribute("attr", "value")</code>ï¼ˆè®¾ç½®å±æ€§ï¼‰ã€<code>element.getAttribute("attr")</code>ï¼ˆè·å–å±æ€§ï¼‰ã€<code>element.removeAttribute("attr")</code>ï¼ˆç§»é™¤å±æ€§ï¼‰ï¼›</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"img"</span>);
img.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">"src"</span>, <span class="hljs-string">"new.jpg"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(img.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">"src"</span>)); <span class="hljs-comment">// new.jpg</span>
</code></pre>
</li>
<li>
<p>ä¿®æ”¹æ ·å¼ï¼š</p>
<ul>
<li>è¡Œå†…æ ·å¼ï¼š<code>element.style.cssProperty = "value"</code>ï¼ˆé©¼å³°å‘½åï¼Œå¦‚ <code>backgroundColor</code>ï¼‰ï¼›</li>
<li>ç±»åæ ·å¼ï¼š<code>element.classList.add("className")</code>ã€<code>element.classList.remove("className")</code>ã€<code>element.classList.toggle("className")</code>ï¼ˆæ¨èï¼Œåˆ†ç¦»æ ·å¼å’Œé€»è¾‘ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">div</span> = document.querySelector(<span class="hljs-string">".box"</span>)<span class="hljs-comment">;</span>
<span class="hljs-attr">div.style.width</span> = <span class="hljs-string">"200px"</span><span class="hljs-comment">;</span>
div.classList.add("active")<span class="hljs-comment">; // æ·»åŠ ç±»å</span>
div.classList.toggle("show")<span class="hljs-comment">; // åˆ‡æ¢ç±»å</span>
</code></pre>
</li>
<li>
<p>ä¿®æ”¹æ–‡æœ¬ / HTMLï¼š<code>element.textContent</code>ï¼ˆçº¯æ–‡æœ¬ï¼Œå®‰å…¨ï¼‰ã€<code>element.innerHTML</code>ï¼ˆHTML å­—ç¬¦ä¸²ï¼Œæœ‰ XSS é£é™©ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-34">ï¼ˆ4ï¼‰åˆ é™¤ DOM èŠ‚ç‚¹</h4>
<ul>
<li><code>parent.removeChild(child)</code>ï¼šçˆ¶èŠ‚ç‚¹ç§»é™¤å­èŠ‚ç‚¹ï¼›</li>
<li><code>element.remove()</code>ï¼šå…ƒç´ è‡ªèº«ç§»é™¤ï¼ˆES6+ æ–¹æ³•ï¼Œæ›´ç®€æ´ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">li</span> = <span class="hljs-selector-tag">document</span><span class="hljs-selector-class">.querySelector</span>(<span class="hljs-string">"li"</span>);
<span class="hljs-selector-tag">li</span><span class="hljs-selector-class">.parentElement</span><span class="hljs-selector-class">.removeChild</span>(li); <span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼</span>
<span class="hljs-comment">// æˆ–</span>
<span class="hljs-selector-tag">li</span><span class="hljs-selector-class">.remove</span>(); <span class="hljs-comment">// ç®€æ´æ–¹å¼</span>
</code></pre>
<h4 data-id="heading-35">ï¼ˆ5ï¼‰DOM æ“ä½œçš„æ€§èƒ½ä¼˜åŒ–</h4>
<p>DOM æ“ä½œæ˜¯ â€œé‡æ“ä½œâ€ï¼Œé¢‘ç¹ä¿®æ”¹ä¼šè§¦å‘æµè§ˆå™¨é‡æ’ï¼ˆReflowï¼‰/ é‡ç»˜ï¼ˆRepaintï¼‰ï¼Œå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œä¼˜åŒ–æ‰‹æ®µï¼š</p>
<ul>
<li>
<p>æ‰¹é‡æ“ä½œï¼šå…ˆå°†èŠ‚ç‚¹è„±ç¦»æ–‡æ¡£æµï¼ˆå¦‚éšè—çˆ¶èŠ‚ç‚¹ï¼‰ï¼Œæ“ä½œå®Œæˆåå†æ¢å¤ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨æ–‡æ¡£ç¢ç‰‡ï¼š<code>document.createDocumentFragment()</code>ï¼Œæ‰¹é‡æ’å…¥èŠ‚ç‚¹ä»…è§¦å‘ä¸€æ¬¡é‡æ’ï¼›</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()<span class="hljs-comment">;</span>
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 1000; i++) {</span>
  const <span class="hljs-attr">li</span> = document.createElement(<span class="hljs-string">"li"</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">li.textContent</span> = `é¡¹ <span class="hljs-variable">${i}</span>`<span class="hljs-comment">;</span>
  fragment.appendChild(li)<span class="hljs-comment">; // å…ˆæ’å…¥ç¢ç‰‡ï¼Œæ— é‡æ’</span>
}
document.querySelector("ul").appendChild(fragment)<span class="hljs-comment">; // ä»…ä¸€æ¬¡é‡æ’</span>
</code></pre>
</li>
<li>
<p>é¿å…é¢‘ç¹æŸ¥è¯¢ DOMï¼šå°†æŸ¥è¯¢ç»“æœç¼“å­˜åˆ°å˜é‡ï¼Œå‡å°‘ DOM éå†ã€‚</p>
</li>
</ul>
<h3 data-id="heading-36">2. äº‹ä»¶å¤„ç†</h3>
<p>äº‹ä»¶æ˜¯æµè§ˆå™¨è§¦å‘çš„ â€œä¿¡å·â€ï¼ˆå¦‚ç‚¹å‡»ã€è¾“å…¥ã€åŠ è½½ï¼‰ï¼Œäº‹ä»¶å¤„ç†æ˜¯ JavaScript å“åº”ç”¨æˆ·æ“ä½œçš„æ ¸å¿ƒï¼Œåˆ†ä¸º â€œäº‹ä»¶ç»‘å®šâ€â€œäº‹ä»¶æµâ€â€œäº‹ä»¶å¯¹è±¡â€â€œäº‹ä»¶ä¼˜åŒ–â€ å››éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-37">ï¼ˆ1ï¼‰äº‹ä»¶ç»‘å®šæ–¹å¼</h4>
<ul>
<li>
<p>è¡Œå†…ç»‘å®šï¼ˆä¸æ¨èï¼‰ï¼š<code>&lt;button onclick="handleClick()"&gt;ç‚¹å‡»&lt;/button&gt;</code> â†’ è€¦åˆåº¦é«˜ï¼Œä¸åˆ©äºç»´æŠ¤ï¼›</p>
</li>
<li>
<p>DOM0 çº§ç»‘å®šï¼š<code>element.onclick = function() {}</code> â†’ ç®€å•ï¼Œä½†ä¸€ä¸ªäº‹ä»¶åªèƒ½ç»‘å®šä¸€ä¸ªå¤„ç†å‡½æ•°ï¼›</p>
</li>
<li>
<p>DOM2 çº§ç»‘å®šï¼š<code>element.addEventListener("eventName", handler, useCapture)</code> â†’ æ¨èï¼Œæ”¯æŒç»‘å®šå¤šä¸ªå¤„ç†å‡½æ•°ï¼Œå¯æ§åˆ¶äº‹ä»¶é˜¶æ®µï¼›</p>
</li>
</ul>
<blockquote>
<ul>
<li>
<p><strong>DOM0 çº§</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œæ— å®˜æ–¹è§„èŒƒ â†’ <code>element.onclick = function() {}</code></p>
</li>
<li>
<p><strong>DOM1 çº§</strong>ï¼šä»…è§„èŒƒ DOM ç»“æ„ï¼Œæœªæ–°å¢äº‹ä»¶ç»‘å®šæ–¹å¼ â†’ æ— äº‹ä»¶ç›¸å…³å†…å®¹</p>
</li>
<li>
<p><strong>DOM2 çº§</strong>ï¼šW3C å‘å¸ƒæ ‡å‡†ï¼Œæ–°å¢ <code>addEventListener</code> â†’ æ”¯æŒå¤šç»‘å®šã€äº‹ä»¶é˜¶æ®µ</p>
</li>
<li>
<p><strong>DOM3 çº§</strong>ï¼šåœ¨ DOM2 åŸºç¡€ä¸Šæ–°å¢äº†æ›´å¤šäº‹ä»¶ç±»å‹ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡æ»šè½®äº‹ä»¶ï¼‰</p>
</li>
</ul>
</blockquote>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"button"</span>);
<span class="hljs-comment">// DOM0 çº§</span>
btn.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»1"</span>);
};
btn.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»2"</span>); <span class="hljs-comment">// è¦†ç›–ä¸Šä¸€ä¸ªå¤„ç†å‡½æ•°</span>
};

<span class="hljs-comment">// DOM2 çº§</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»1"</span>);
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, handleClick);
btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»2"</span>)); <span class="hljs-comment">// å¯ç»‘å®šå¤šä¸ª</span>
btn.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"click"</span>, handleClick); <span class="hljs-comment">// å¯ç§»é™¤</span>
</code></pre>
<h4 data-id="heading-38">ï¼ˆ2ï¼‰äº‹ä»¶æµï¼ˆäº‹ä»¶ä¼ æ’­æœºåˆ¶ï¼‰</h4>
<p>äº‹ä»¶æµåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>æ•è·é˜¶æ®µï¼šäº‹ä»¶ä» <code>document</code> å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ ï¼›</li>
<li>ç›®æ ‡é˜¶æ®µï¼šäº‹ä»¶åˆ°è¾¾ç›®æ ‡å…ƒç´ ï¼›</li>
<li>å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»ç›®æ ‡å…ƒç´ å‘ä¸Šä¼ æ’­åˆ° <code>document</code>ã€‚</li>
</ol>
<p><code>addEventListener</code> çš„ç¬¬ä¸‰ä¸ªå‚æ•° <code>useCapture</code>ï¼š<code>true</code> è¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè§¦å‘ï¼Œ<code>false</code>ï¼ˆé»˜è®¤ï¼‰è¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè§¦å‘ã€‚</p>
<h4 data-id="heading-39">ï¼ˆ3ï¼‰äº‹ä»¶å¯¹è±¡ï¼ˆEventï¼‰</h4>
<p>äº‹ä»¶å¤„ç†å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡ï¼ŒåŒ…å«äº‹ä»¶çš„æ ¸å¿ƒä¿¡æ¯ï¼š</p>
<ul>
<li><code>event.target</code>ï¼šè§¦å‘äº‹ä»¶çš„åŸå§‹å…ƒç´ ï¼ˆäº‹ä»¶æºï¼‰ï¼›</li>
<li><code>event.currentTarget</code>ï¼šç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼›</li>
<li><code>event.preventDefault()</code>ï¼šé˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆå¦‚è¡¨å•æäº¤ã€é“¾æ¥è·³è½¬ï¼‰ï¼›</li>
<li><code>event.stopPropagation()</code>ï¼šé˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼ˆå†’æ³¡ / æ•è·ï¼‰ï¼›</li>
<li><code>event.stopImmediatePropagation()</code>ï¼šé˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œä¸”é˜»æ­¢å½“å‰å…ƒç´ åç»­çš„äº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é˜»æ­¢é“¾æ¥è·³è½¬</span>
<span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"a"</span>);
a.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢é»˜è®¤è·³è½¬</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»é“¾æ¥ï¼Œä¸è·³è½¬"</span>);
});

<span class="hljs-comment">// äº‹ä»¶å§”æ‰˜ï¼ˆåˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼‰</span>
<span class="hljs-keyword">const</span> ul = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"ul"</span>);
ul.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span> === <span class="hljs-string">"LI"</span>) { <span class="hljs-comment">// åˆ¤æ–­ç‚¹å‡»çš„æ˜¯ li å…ƒç´ </span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç‚¹å‡»äº†åˆ—è¡¨é¡¹"</span>, e.<span class="hljs-property">target</span>.<span class="hljs-property">textContent</span>);
  }
});
</code></pre>
<h4 data-id="heading-40">ï¼ˆ4ï¼‰æ ¸å¿ƒä¼˜åŒ–ï¼šäº‹ä»¶å§”æ‰˜</h4>
<p>åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œå°†å­å…ƒç´ çš„äº‹ä»¶ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼Œå‡å°‘äº‹ä»¶ç»‘å®šæ•°é‡ï¼Œä¼˜åŒ–æ€§èƒ½ï¼ˆå°¤å…¶é€‚åˆåŠ¨æ€ç”Ÿæˆçš„å…ƒç´ ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// åŠ¨æ€ç”Ÿæˆçš„ li æ— éœ€å•ç‹¬ç»‘å®šäº‹ä»¶ï¼Œçˆ¶å…ƒç´  ul å§”æ‰˜å¤„ç†
const <span class="hljs-attr">ul</span> = document.querySelector(<span class="hljs-string">"ul"</span>)<span class="hljs-comment">;</span>
ul.addEventListener("click", (e) =&gt; {
  if (e.target.classList.contains("item")) {
    console.log("ç‚¹å‡»äº†åŠ¨æ€ç”Ÿæˆçš„åˆ—è¡¨é¡¹")<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>

// åŠ¨æ€æ·»åŠ  li
const <span class="hljs-attr">li</span> = document.createElement(<span class="hljs-string">"li"</span>)<span class="hljs-comment">;</span>
li.classList.add("item")<span class="hljs-comment">;</span>
<span class="hljs-attr">li.textContent</span> = <span class="hljs-string">"åŠ¨æ€é¡¹"</span><span class="hljs-comment">;</span>
ul.appendChild(li)<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-41">ï¼ˆ5ï¼‰å¸¸è§äº‹ä»¶ç±»å‹</h4>
<ul>
<li>é¼ æ ‡äº‹ä»¶ï¼š<code>click</code>ã€<code>dblclick</code>ã€<code>mouseover</code>ã€<code>mouseout</code>ã€<code>mousedown</code>ã€<code>mouseup</code>ï¼›</li>
<li>é”®ç›˜äº‹ä»¶ï¼š<code>keydown</code>ã€<code>keyup</code>ã€<code>keypress</code>ï¼›</li>
<li>è¡¨å•äº‹ä»¶ï¼š<code>input</code>ã€<code>change</code>ã€<code>submit</code>ã€<code>focus</code>ã€<code>blur</code>ï¼›</li>
<li>é¡µé¢äº‹ä»¶ï¼š<code>load</code>ã€<code>DOMContentLoaded</code>ï¼ˆDOM è§£æå®Œæˆï¼‰ã€<code>scroll</code>ã€<code>resize</code>ã€‚</li>
</ul>
<p>DOM æ“ä½œå’Œäº‹ä»¶å¤„ç†æ˜¯å‰ç«¯äº¤äº’çš„åŸºç¡€ï¼Œæ ¸å¿ƒåŸåˆ™æ˜¯ â€œå‡å°‘ DOM æ“ä½œæ¬¡æ•°â€â€œåˆç†åˆ©ç”¨äº‹ä»¶æœºåˆ¶â€ï¼Œæ—¢ä¿è¯äº¤äº’çš„æµç•…æ€§ï¼Œåˆé¿å…æ€§èƒ½é—®é¢˜ã€‚</p>
<h2 data-id="heading-42">æ€»ç»“</h2>
<ol>
<li>ES6+ æ–°ç‰¹æ€§æ ¸å¿ƒæ˜¯ç®€åŒ–è¯­æ³•ã€è¡¥å…¨åŠŸèƒ½ï¼Œæ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„åŸºç¡€ï¼Œé‡ç‚¹æŒæ¡å—çº§ä½œç”¨åŸŸã€ç®­å¤´å‡½æ•°ã€è§£æ„ã€async/await ç­‰é«˜é¢‘ç”¨æ³•ï¼›</li>
<li>å¼‚æ­¥ç¼–ç¨‹ä»å›è°ƒåœ°ç‹±æ¼”è¿›åˆ° Promise/async/awaitï¼Œæ ¸å¿ƒæ˜¯è®©å¼‚æ­¥ä»£ç æ›´æ˜“è¯»ã€æ˜“ç»´æŠ¤ï¼Œasync/await æ˜¯å½“å‰æœ€ä¼˜å†™æ³•ï¼›</li>
<li>é—­åŒ…æ˜¯ä½œç”¨åŸŸé“¾çš„ä¿ç•™ï¼Œç”¨äºå°è£…ç§æœ‰å˜é‡ã€å®ç°é˜²æŠ–èŠ‚æµï¼Œéœ€æ³¨æ„å†…å­˜æ³„æ¼ï¼›åŸå‹é“¾æ˜¯ JS ç»§æ‰¿çš„åº•å±‚æœºåˆ¶ï¼Œæ‰€æœ‰å¯¹è±¡é€šè¿‡ <code>__proto__</code> å½¢æˆç»§æ‰¿é“¾æ¡ï¼›</li>
<li>DOM æ“ä½œéœ€æ³¨é‡æ€§èƒ½ï¼ˆæ‰¹é‡æ“ä½œã€æ–‡æ¡£ç¢ç‰‡ï¼‰ï¼Œäº‹ä»¶å¤„ç†æ ¸å¿ƒæ˜¯äº‹ä»¶å§”æ‰˜ï¼Œåˆ©ç”¨å†’æ³¡å‡å°‘ç»‘å®šæ•°é‡ï¼Œæå‡é¡µé¢æ€§èƒ½ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS -å½»åº•ææ‡‚ callã€applyã€bind çš„åŒºåˆ«ä¸åº”ç”¨]]></title>    <link>https://juejin.cn/post/7595878718172217380</link>    <guid>https://juejin.cn/post/7595878718172217380</guid>    <pubDate>2026-01-17T14:13:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172217380" data-draft-id="7595878718172168228" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS -å½»åº•ææ‡‚ callã€applyã€bind çš„åŒºåˆ«ä¸åº”ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T14:13:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS -å½»åº•ææ‡‚ callã€applyã€bind çš„åŒºåˆ«ä¸åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:13:04.000Z" title="Sat Jan 17 2026 14:13:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<code>this</code> çš„æŒ‡å‘æ˜¯åŠ¨æ€çš„ï¼Œè¿™è™½ç„¶çµæ´»ï¼Œä½†ä¹Ÿå¸¸è®©æˆ‘ä»¬å¤´ç–¼ã€‚è€Œ <code>call</code>ã€<code>apply</code> å’Œ <code>bind</code> å°±æ˜¯æˆ‘ä»¬æ‰‹ä¸­çš„â€œé­”æ³•æ£’â€ï¼Œä¸“é—¨ç”¨æ¥<strong>æ‰‹åŠ¨æ§åˆ¶ this çš„æŒ‡å‘</strong>ã€‚å®ƒä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿåˆ†åˆ«åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿæœ¬æ–‡å¸¦ä½ ä¸€æ¢ç©¶ç«Ÿã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ ä¸‰å¤§æ–¹æ³•è¯¦è§£</h2>
<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æŒ‚è½½åœ¨ <code>Function.prototype</code> ä¸Šï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„å‡½æ•°éƒ½å¯ä»¥è°ƒç”¨å®ƒä»¬ã€‚</p>
<h3 data-id="heading-2">1. call()</h3>
<ul>
<li>
<p><strong>ä½œç”¨</strong>ï¼šä¿®æ”¹å‡½æ•°çš„ <code>this</code> æŒ‡å‘ï¼Œå¹¶<strong>ç«‹å³æ‰§è¡Œ</strong>è¯¥å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ol>
<li><code>thisArg</code>ï¼š<code>this</code> éœ€è¦ç»‘å®šçš„å¯¹è±¡ã€‚</li>
<li><code>arg1, arg2, ...</code>ï¼š<strong>å‚æ•°åˆ—è¡¨</strong>ï¼Œç›´æ¥æŒ‰é¡ºåºä¼ å…¥ã€‚</li>
</ol>
</li>
<li>
<p><strong>é»˜è®¤è¡Œä¸º</strong>ï¼šå¦‚æœä¸ä¼  <code>thisArg</code> æˆ–ä¼  <code>null</code>/<code>undefined</code>ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ <code>window</code>ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-js" lang="js">fn.<span class="hljs-title function_">call</span>(obj, agr1,agr2,arg3,arg4,.....)
</code></pre>
<h3 data-id="heading-3">2. apply()</h3>
<ul>
<li>
<p><strong>ä½œç”¨</strong>ï¼šä¿®æ”¹å‡½æ•°çš„ <code>this</code> æŒ‡å‘ï¼Œå¹¶<strong>ç«‹å³æ‰§è¡Œ</strong>è¯¥å‡½æ•°ã€‚</p>
</li>
<li>
<p><strong>å‚æ•°</strong>ï¼š</p>
<ol>
<li><code>thisArg</code>ï¼š<code>this</code> éœ€è¦ç»‘å®šçš„å¯¹è±¡ã€‚</li>
<li><code>argsArray</code>ï¼š<strong>æ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„ï¼‰</strong> ï¼Œæ•°ç»„å†…çš„å…ƒç´ ä¼šè¢«å±•å¼€ä¼ å…¥å‡½æ•°ã€‚</li>
</ol>
</li>
</ul>
<pre><code class="hljs language-js" lang="js">fn.<span class="hljs-title function_">apply</span>(obj, [agr1,agr2,arg3,arg4,.....])
</code></pre>
<h3 data-id="heading-4">3. bind()</h3>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šä¿®æ”¹å‡½æ•°çš„ <code>this</code> æŒ‡å‘ï¼Œä½†<strong>ä¸ä¼šç«‹å³æ‰§è¡Œ</strong>ã€‚</li>
<li><strong>è¿”å›å€¼</strong>ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼ˆç§°ä¸ºç»‘å®šå‡½æ•°ï¼‰ã€‚</li>
<li><strong>ç¡¬ç»‘å®š</strong>ï¼š<code>bind</code> è¿”å›çš„æ–°å‡½æ•°ï¼Œå…¶ <code>this</code> æŒ‡å‘ä¸€æ—¦è¢«ç»‘å®šï¼Œåç»­å†ä½¿ç”¨ <code>call</code> æˆ– <code>apply</code> éƒ½æ— æ³•å†æ¬¡ä¿®æ”¹ã€‚</li>
<li><strong>å‚æ•°</strong>ï¼šä¸ <code>call</code> ç›¸åŒï¼Œæ¥å—å‚æ•°åˆ—è¡¨ã€‚æ”¯æŒ<strong>æŸ¯é‡ŒåŒ–</strong>ï¼ˆé¢„è®¾éƒ¨åˆ†å‚æ•°ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">bind</span>(thisArg, arg1, arg2, arg3, ...)
</code></pre>
<h2 data-id="heading-5">äºŒã€ æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”ï¼ˆä¸€å¼ è¡¨çœ‹æ‡‚ï¼‰</h2>

































<table><thead><tr><th><strong>æ–¹æ³•</strong></th><th><strong>æ‰§è¡Œæ—¶æœº</strong></th><th><strong>å‚æ•°æ ¼å¼</strong></th><th><strong>è¿”å›å€¼</strong></th><th><strong>æ ¸å¿ƒåœºæ™¯</strong></th></tr></thead><tbody><tr><td><strong>call</strong></td><td><strong>ç«‹å³æ‰§è¡Œ</strong></td><td>å‚æ•°åˆ—è¡¨ (arg1, arg2)</td><td>å‡½æ•°æ‰§è¡Œç»“æœ</td><td>å¯¹è±¡ç»§æ‰¿ã€å€Ÿç”¨æ–¹æ³•</td></tr><tr><td><strong>apply</strong></td><td><strong>ç«‹å³æ‰§è¡Œ</strong></td><td><strong>æ•°ç»„</strong> ([arg1, arg2])</td><td>å‡½æ•°æ‰§è¡Œç»“æœ</td><td>æ•°å­¦è®¡ç®—ã€æ•°ç»„åˆå¹¶</td></tr><tr><td><strong>bind</strong></td><td><strong>ç¨åæ‰§è¡Œ</strong></td><td>å‚æ•°åˆ—è¡¨ (arg1, arg2)</td><td><strong>æ–°å‡½æ•°</strong></td><td>äº‹ä»¶ç»‘å®šã€å›è°ƒå‡½æ•°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ ä»£ç å®æˆ˜ä¸çº é”™</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç»å…¸çš„ä¾‹å­æ¥çœ‹å®ƒä»¬çš„å…·ä½“è¡¨ç°ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> obj = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Original'</span>,
  <span class="hljs-attr">fn</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, a, b);
  }
}

<span class="hljs-keyword">const</span> db = { <span class="hljs-attr">name</span>: <span class="hljs-string">'DataBase'</span> };

<span class="hljs-comment">// 1. åŸå§‹è°ƒç”¨</span>
obj.<span class="hljs-title function_">fn</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); 
<span class="hljs-comment">// è¾“å‡º: "Original" 1 2</span>

<span class="hljs-comment">// 2. call è°ƒç”¨ï¼šä¼ å‚åˆ—è¡¨</span>
obj.<span class="hljs-property">fn</span>.<span class="hljs-title function_">call</span>(db, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>); 
<span class="hljs-comment">// è¾“å‡º: "DataBase" 3 4</span>

<span class="hljs-comment">// 3. apply è°ƒç”¨ï¼šä¼ å‚æ•°ç»„</span>
obj.<span class="hljs-property">fn</span>.<span class="hljs-title function_">apply</span>(db, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]); 
<span class="hljs-comment">// è¾“å‡º: "DataBase" 5 6</span>

<span class="hljs-comment">// 4. bind è°ƒç”¨ï¼šè¿”å›æ–°å‡½æ•°ï¼Œæ‰‹åŠ¨æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> boundFn = obj.<span class="hljs-property">fn</span>.<span class="hljs-title function_">bind</span>(db, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>);
<span class="hljs-title function_">boundFn</span>(); 
<span class="hljs-comment">// è¾“å‡º: "DataBase" 7 8</span>

<span class="hljs-comment">// 5. bind çš„è¿ç»­ä¿®æ”¹æ— æ•ˆæ€§ï¼ˆé¢è¯•å‘ç‚¹ï¼‰</span>
<span class="hljs-keyword">const</span> doubleBind = obj.<span class="hljs-property">fn</span>.<span class="hljs-title function_">bind</span>(db).<span class="hljs-title function_">bind</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'Error'</span> });
<span class="hljs-title function_">doubleBind</span>();
<span class="hljs-comment">// è¾“å‡º: "DataBase" undefined undefined (ç¬¬äºŒæ¬¡ bind æ— æ•ˆ)</span>
</code></pre>
<hr/>
<h2 data-id="heading-7">å››ã€ å¸¸è§åº”ç”¨åœºæ™¯ï¼ˆé¢è¯•åŠ åˆ†é¡¹ï¼‰</h2>
<p>ä»…ä»…çŸ¥é“è¯­æ³•æ˜¯ä¸å¤Ÿçš„ï¼Œé¢è¯•å®˜æ›´çœ‹é‡ä½ çŸ¥é“æ€ä¹ˆç”¨ã€‚</p>
<h3 data-id="heading-8">1. æ•°ç»„æ±‚æœ€å¤§å€¼ (apply)</h3>
<p>åˆ©ç”¨ <code>apply</code> æ¥å—æ•°ç»„å‚æ•°çš„ç‰¹æ€§ï¼Œç»“åˆ <code>Math.max</code>ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> nums = [<span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1</span>];
<span class="hljs-keyword">const</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-property">max</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>, nums); <span class="hljs-comment">// 20</span>
<span class="hljs-comment">// ES6 å†™æ³•: Math.max(...nums)</span>
</code></pre>
<h3 data-id="heading-9">2. ç±»æ•°ç»„è½¬æ•°ç»„ (call)</h3>
<p>åˆ©ç”¨ <code>call</code> å€Ÿç”¨æ•°ç»„çš„ <code>slice</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">func</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">arguments</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(args); <span class="hljs-comment">// å˜æˆäº†çœŸæ•°ç»„</span>
}
</code></pre>
<h3 data-id="heading-10">3. React/Vue ä¸­çš„äº‹ä»¶ç»‘å®š (bind)</h3>
<p>é˜²æ­¢å›è°ƒå‡½æ•°åœ¨æ‰§è¡Œæ—¶ <code>this</code> ä¸¢å¤±ï¼ˆæŒ‡å‘ <code>undefined</code> æˆ– <code>window</code>ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleClick</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>);
</code></pre>
<hr/>
<h2 data-id="heading-11">äº”ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜</h2>
<h3 data-id="heading-12">Q1ï¼š<code>call</code> å’Œ <code>apply</code> çš„å”¯ä¸€åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>å®ƒä»¬çš„å”¯ä¸€åŒºåˆ«åœ¨äºä¼ å‚æ–¹å¼ã€‚call éœ€è¦æŠŠå‚æ•°æŒ‰é¡ºåºä¸€ä¸ªä¸ªä¼ è¿›å»ï¼ˆå‚æ•°åˆ—è¡¨ï¼‰ï¼Œè€Œ apply éœ€è¦æŠŠå‚æ•°æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„ï¼‰é‡Œä¼ è¿›å»ã€‚åŠ©è®°å£è¯€ï¼š"a" for array (apply), "c" for comma (call)ã€‚</p>
<h3 data-id="heading-13">Q2ï¼šä¸ºä»€ä¹ˆ <code>bind</code> è¿”å›çš„å‡½æ•°ï¼Œå†æ¬¡ä½¿ç”¨ <code>call</code> æ— æ³•ä¿®æ”¹ <code>this</code>ï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>è¿™æ¶‰åŠ bind çš„å†…éƒ¨å®ç°ã€‚bind è¿”å›çš„å‡½æ•°å†…éƒ¨å·²ç»é€šè¿‡é—­åŒ…é”å®šäº† thisï¼ˆé€šå¸¸ç§°ä¸ºç¡¬ç»‘å®šï¼‰ã€‚ä¹Ÿå°±æ˜¯ç±»ä¼¼ <code>return function() { return originalFn.apply(that, arguments) }</code> çš„ç»“æ„ã€‚æ— è®ºå¤–éƒ¨æ€ä¹ˆ callï¼Œå†…éƒ¨çš„ apply æ°¸è¿œä½¿ç”¨çš„æ˜¯ç¬¬ä¸€æ¬¡ç»‘å®šçš„ thatã€‚</p>
<h3 data-id="heading-14">Q3ï¼šæ‰‹å†™ä¸€ä¸ªç®€å•çš„ <code>bind</code>ï¼Ÿ</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript">      <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBind</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">context, ...args</span>) {
        <span class="hljs-comment">// 1. ä¿å­˜å½“å‰çš„å‡½æ•°ï¼ˆthis æŒ‡å‘åŸå‡½æ•°ï¼‰</span>
        <span class="hljs-keyword">const</span> fn = <span class="hljs-variable language_">this</span>;
        <span class="hljs-comment">// 2. è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...innerArgs</span>) {
          <span class="hljs-comment">// 3. å°†é¢„è®¾å‚æ•°å’Œæ–°å‚æ•°åˆå¹¶ï¼Œå¹¶ç”¨ apply æ‰§è¡ŒåŸå‡½æ•°</span>
          <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(context, args.<span class="hljs-title function_">concat</span>(innerArgs));
        };
      };
      <span class="hljs-keyword">const</span> obj = {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"Original"</span>,
        <span class="hljs-attr">fn</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">a, b</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>, a, b);
        },
      };
      <span class="hljs-keyword">const</span> boundFn = obj.<span class="hljs-property">fn</span>.<span class="hljs-title function_">myBind</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'DataBase'</span> }, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>);
      <span class="hljs-title function_">boundFn</span>();
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» Generator åˆ° Async/Awaitï¼šå½»åº•ææ‡‚ JS å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7595886887523565608</link>    <guid>https://juejin.cn/post/7595886887523565608</guid>    <pubDate>2026-01-17T14:24:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595886887523565608" data-draft-id="7595893785907167266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» Generator åˆ° Async/Awaitï¼šå½»åº•ææ‡‚ JS å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T14:24:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NEXT06"/> <meta itemprop="url" content="https://juejin.cn/user/1176918763246011"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» Generator åˆ° Async/Awaitï¼šå½»åº•ææ‡‚ JS å¼‚æ­¥ç¼–ç¨‹çš„ç»ˆæè§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176918763246011/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NEXT06
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:24:21.000Z" title="Sat Jan 17 2026 14:24:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScript çš„å‘å±•é•¿æ²³ä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹ä¸€ç›´æ˜¯å¼€å‘è€…æœ€å¤´ç–¼çš„ç—›ç‚¹ä¹‹ä¸€ã€‚ä»æœ€æ—©çš„å›è°ƒå‡½æ•°ï¼Œåˆ° Promise çš„é“¾å¼è°ƒç”¨ï¼Œå†åˆ°å¦‚ä»Šçš„ Async/Awaitï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è¿½æ±‚ä¸€ä¸ªç»ˆæç›®æ ‡ï¼š<strong>ç”¨åŒæ­¥çš„æ€ç»´ï¼Œå†™å¼‚æ­¥çš„ä»£ç ã€‚</strong></p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬ä¸è°ˆæ¯ç‡¥çš„ API æ–‡æ¡£ï¼Œè€Œæ˜¯æ·±å…¥åº•å±‚ï¼Œä» Generator åŸç†å‡ºå‘ï¼Œå½»åº•ææ‡‚ä¸ºä»€ä¹ˆÂ Async/AwaitÂ è¢«ç§°ä¸º JS å¼‚æ­¥ç¼–ç¨‹çš„â€œç»ˆæè§£å†³æ–¹æ¡ˆâ€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ Async/Awaitï¼Ÿ</h2>
<p>è¦ç†è§£ä¸€é¡¹æŠ€æœ¯ï¼Œå¿…é¡»å…ˆç†è§£å®ƒè¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-1">1. å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰çš„æ¢¦é­‡</h3>
<p>åœ¨ ES6 ä¹‹å‰ï¼Œå¼‚æ­¥æ“ä½œä¸¥é‡ä¾èµ–å›è°ƒå‡½æ•°ã€‚ä¸€æ—¦ä¸šåŠ¡é€»è¾‘å¤æ‚ï¼Œæ¯”å¦‚éœ€è¦ä¸²è¡Œè¯·æ±‚ Aã€Bã€C ä¸‰ä¸ªæ¥å£ï¼Œä»£ç å°±ä¼šå˜æˆè¿™æ ·ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">getData</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a</span>) {
    <span class="hljs-title function_">getMoreData</span>(a, <span class="hljs-keyword">function</span>(<span class="hljs-params">b</span>) {
        <span class="hljs-title function_">getEvenMoreData</span>(b, <span class="hljs-keyword">function</span>(<span class="hljs-params">c</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c); <span class="hljs-comment">// è‘—åçš„â€œé‡‘å­—å¡”â€ä»£ç </span>
        });
    });
});
</code></pre>
<p>è¿™ç§ä»£ç <strong>å¯è¯»æ€§å·®ã€éš¾ä»¥è°ƒè¯•ã€ä¸”é”™è¯¯å¤„ç†æå…¶ç¹ç</strong>ã€‚</p>
<h3 data-id="heading-2">2. Promise çš„è¿›æ­¥ä¸å±€é™</h3>
<p>Promise çš„å‡ºç°å°†å›è°ƒåµŒå¥—æ‰å¹³åŒ–äº†ï¼Œå®ƒé€šè¿‡é“¾å¼è°ƒç”¨ï¼ˆ.then()ï¼‰è§£å†³äº†â€œé‡‘å­—å¡”â€é—®é¢˜ï¼š</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">getData()
  .then(<span class="hljs-attr">a</span> =&gt; getMoreData(a))
  .then(<span class="hljs-attr">b</span> =&gt; getEvenMoreData(b))
  .catch(<span class="hljs-attr">err</span> =&gt; console.error(err))<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ— ç–‘æ˜¯å·¨å¤§çš„è¿›æ­¥ã€‚ä½†å®ƒä¾ç„¶ä¸å¤Ÿå®Œç¾ï¼šå¤§é‡çš„Â .thenÂ ç ´åäº†ä»£ç çš„è¯­ä¹‰è¿ç»­æ€§ï¼Œæˆ‘ä»¬ä¾ç„¶æ— æ³•åƒå†™åŒæ­¥ä»£ç é‚£æ ·ç›´è§‚åœ°è¡¨è¾¾é€»è¾‘ã€‚</p>
<p><strong>æˆ‘ä»¬çš„ç»ˆæè¯‰æ±‚æ˜¯</strong>ï¼šèƒ½å¦è®©å¼‚æ­¥ä»£ç çœ‹èµ·æ¥å°±åƒÂ const a = logic(); const b = logic(a);Â è¿™æ ·ç¬¦åˆäººç±»çº¿æ€§ç›´è§‰ï¼Ÿ</p>
<p>ç­”æ¡ˆå°±æ˜¯Â <strong>Async/Await</strong>ã€‚</p>
<h2 data-id="heading-3">äºŒã€ æ ¸å¿ƒåŸç†ï¼šå¹¶éé­”æ³•ï¼Œè€Œæ˜¯è¯­æ³•ç³–</h2>
<p>Async/Await å¹¶æ²¡æœ‰å¼•å…¥å…¨æ–°çš„åº•å±‚æœºåˆ¶ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯Â <strong>Generator å‡½æ•° + Promise + è‡ªåŠ¨æ‰§è¡Œå™¨</strong>Â çš„è¯­æ³•ç³–ã€‚</p>
<p>è¦ç†è§£å®ƒï¼Œå¿…é¡»ç†è§£Â <strong>Generatorï¼ˆç”Ÿæˆå™¨ï¼‰</strong> Â çš„æ ¸å¿ƒèƒ½åŠ›ï¼š<strong>æš‚åœä¸æ¢å¤</strong>ã€‚</p>
<h3 data-id="heading-4">1. Generatorï¼šäº¤å‡ºæ‰§è¡Œæƒ</h3>
<p>Generator å‡½æ•°ï¼ˆfunction*ï¼‰é€šè¿‡Â yieldÂ å…³é”®å­—ï¼Œå¯ä»¥è®©å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­<strong>æš‚åœ</strong>ï¼Œå°† CPU æ§åˆ¶æƒäº¤è¿˜ç»™å¤–éƒ¨ï¼Œå¹¶åœ¨æœªæ¥æŸä¸ªæ—¶åˆ»ä»æ–­ç‚¹å¤„<strong>æ¢å¤</strong>æ‰§è¡Œã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generatorFn</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Start'</span>);
    <span class="hljs-comment">// 1. å‡½æ•°æ‰§è¡Œåˆ°è¿™é‡Œæš‚åœï¼Œäº¤å‡ºæ§åˆ¶æƒï¼Œå¹¶è¿”å› 'Hello'</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">yield</span> <span class="hljs-string">'Hello'</span>; 
    <span class="hljs-comment">// 3. å¤–éƒ¨è°ƒç”¨ next(val) åï¼Œå‡½æ•°ä»è¿™é‡Œæ¢å¤ï¼Œresult æ¥æ”¶å¤–éƒ¨ä¼ å…¥çš„å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Resumed with:'</span>, result); 
}

<span class="hljs-keyword">const</span> iterator = <span class="hljs-title function_">generatorFn</span>();
<span class="hljs-keyword">const</span> first = iterator.<span class="hljs-title function_">next</span>(); <span class="hljs-comment">// è¾“å‡º: Start, first.value = 'Hello'</span>
<span class="hljs-comment">// 2. è¿™é‡Œå¯ä»¥åšä»»ä½•å¼‚æ­¥æ“ä½œ...</span>
iterator.<span class="hljs-title function_">next</span>(<span class="hljs-string">'World'</span>);        <span class="hljs-comment">// è¾“å‡º: Resumed with: World</span>
</code></pre>
<h3 data-id="heading-5">2. Async/Await çš„å®ç°å…¬å¼</h3>
<p>å¦‚æœæˆ‘ä»¬å°† Generator å’Œ Promise ç»“åˆèµ·æ¥ï¼Œå°±å¾—åˆ°äº† Async/Await çš„é›å½¢ï¼š</p>
<ol>
<li><strong>æš‚åœ</strong>ï¼šé‡åˆ°Â awaitÂ (å³Â yield)ï¼Œå‡½æ•°æš‚åœæ‰§è¡Œã€‚</li>
<li><strong>ç­‰å¾…</strong>ï¼šawaitÂ åé¢é€šå¸¸è·Ÿç€ä¸€ä¸ª Promiseï¼ˆå¼‚æ­¥çŠ¶æ€å®¹å™¨ï¼‰ã€‚</li>
<li><strong>æ¢å¤</strong>ï¼šå½“ Promise çŠ¶æ€å˜ä¸º Resolvedï¼Œè‡ªåŠ¨æ‰§è¡Œå™¨è°ƒç”¨Â next(data)ï¼Œå°†ç»“æœä¼ å›å‡½æ•°å†…éƒ¨ï¼Œä»£ç ç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</li>
</ol>
<blockquote>
<p><strong>å…¬å¼æ€»ç»“</strong>ï¼š<br/>
async functionÂ â‰ˆÂ function*Â + è‡ªåŠ¨æ‰§è¡Œå™¨ï¼ˆè‡ªåŠ¨å¤„ç† yield å’Œ nextï¼‰</p>
</blockquote>
<h2 data-id="heading-6">ä¸‰ã€ å®æˆ˜ï¼šä»é”™è¯¯ç¤ºèŒƒåˆ°æœ€ä½³å®è·µ</h2>
<p>åŸºäºå¤§å®¶æä¾›çš„ç´ æï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æµè§ˆå™¨å’Œ Node.js ç¯å¢ƒä¸‹ï¼Œå¦‚ä½•æ­£ç¡®ä½¿ç”¨ Async/Awaitï¼ˆåŒ…å«å¯¹åŸå§‹ç´ æä¸­é”™è¯¯çš„ä¿®æ­£ï¼‰ã€‚</p>
<h3 data-id="heading-7">åœºæ™¯ä¸€ï¼šæµè§ˆå™¨ç«¯ Fetch è¯·æ±‚</h3>
<p>åŸå§‹ç´ æä¸­ç›´æ¥Â console.log(res)Â æ˜¯æ‹¿ä¸åˆ°æ•°æ®çš„ï¼Œå› ä¸ºÂ fetchÂ è¿”å›çš„ Response å¯¹è±¡è§£æ JSON ä¹Ÿæ˜¯å¼‚æ­¥çš„ã€‚</p>
<p><strong>æœ€ä½³å®è·µï¼š</strong></p>
<p>Html</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// ES8 async ä¿®é¥°å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹è¯·æ±‚...'</span>);
        
        <span class="hljs-comment">// 1. await ç­‰å¾… fetch å®Œæˆï¼Œæ‹¿åˆ°å“åº”å¤´</span>
        <span class="hljs-comment">// è¿™é‡Œçš„ await ç›¸å½“äºæš‚åœå‡½æ•°ï¼Œç›´åˆ°ç½‘ç»œè¯·æ±‚è¿”å›</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.github.com/users/shunwuyu/repos'</span>);
        
        <span class="hljs-comment">// 2. æ³¨æ„ï¼è§£æ JSON ä¹Ÿæ˜¯å¼‚æ­¥æ“ä½œï¼Œå¿…é¡»å†æ¬¡ await</span>
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®è·å–æˆåŠŸ:'</span>, data);
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-comment">// åŒæ­¥å†™æ³•çš„æœ€å¤§ä¼˜åŠ¿ï¼šå¯ä»¥ç›´æ¥ç”¨ try-catch æ•è·å¼‚æ­¥é”™è¯¯</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥:'</span>, error);
    }
}
<span class="hljs-title function_">main</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">åœºæ™¯äºŒï¼šNode.js æ–‡ä»¶è¯»å–</h3>
<p>åœ¨ç°ä»£ Node.js ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨Â fs/promisesã€‚</p>
<p><strong>ä¿®æ­£åçš„æœ€ä½³å®è·µï¼š</strong></p>
<p>JavaScript</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs/promises'</span>; <span class="hljs-comment">// å¼•å…¥è¿”å› Promise çš„ fs æ¨¡å—</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">main</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> filePath = <span class="hljs-string">'./1.html'</span>;
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åƒå†™åŒæ­¥ä»£ç ä¸€æ ·è¯»å–æ–‡ä»¶</span>
        <span class="hljs-comment">// ç”šè‡³ä¸éœ€è¦å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¸éœ€è¦ .then</span>
        <span class="hljs-keyword">const</span> html = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(filePath, <span class="hljs-string">'utf-8'</span>);
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶è¯»å–æˆåŠŸï¼Œé•¿åº¦:'</span>, html.<span class="hljs-property">length</span>);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(html.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>) + <span class="hljs-string">'...'</span>); <span class="hljs-comment">// æ‰“å°å‰50ä¸ªå­—ç¬¦</span>
        
    } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶è¯»å–å‡ºé”™:'</span>, err);
    }
}

<span class="hljs-title function_">main</span>();
</code></pre>
<h2 data-id="heading-9">å››ã€ æ€»ç»“</h2>
<p>Async/Await çš„å‡ºç°ï¼Œæ ‡å¿—ç€ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„æˆç†Ÿã€‚</p>
<ol>
<li>å®ƒåˆ©ç”¨Â <strong>Generator</strong>Â å®ç°äº†å‡½æ•°çš„æš‚åœä¸æ¢å¤ã€‚</li>
<li>å®ƒåˆ©ç”¨Â <strong>Promise</strong>Â å°è£…äº†å¼‚æ­¥æ“ä½œçš„çŠ¶æ€ã€‚</li>
<li>å®ƒé€šè¿‡Â <strong>è‡ªåŠ¨æ‰§è¡Œ</strong>Â æœºåˆ¶ï¼Œè®©æˆ‘ä»¬èƒ½ä»¥ç¬¦åˆç›´è§‰çš„çº¿æ€§é€»è¾‘ç¼–å†™å¤æ‚çš„å¼‚æ­¥ä»£ç ã€‚</li>
</ol>
<p>æŒæ¡äº† Async/Awaitï¼Œä¸ä»…ä»…æ˜¯æŒæ¡äº†ä¸€ä¸ªå…³é”®å­—ï¼Œæ›´æ˜¯æŒæ¡äº† JavaScript åç¨‹æ§åˆ¶çš„ç²¾é«“ã€‚æ‹’ç»å›è°ƒåœ°ç‹±ï¼Œä»ä»Šå¤©å¼€å§‹ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-new æ“ä½œç¬¦]]></title>    <link>https://juejin.cn/post/7596025264455712804</link>    <guid>https://juejin.cn/post/7596025264455712804</guid>    <pubDate>2026-01-17T14:26:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596025264455712804" data-draft-id="7595994039108943908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-new æ“ä½œç¬¦"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T14:26:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-new æ“ä½œç¬¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:26:08.000Z" title="Sat Jan 17 2026 14:26:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>åœ¨ JavaScript é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œ<code>new</code> å…³é”®å­—æ˜¯å®ä¾‹åŒ–å¯¹è±¡çš„æ ¸å¿ƒã€‚é¢è¯•å®˜å¸¸å¸¸é€šè¿‡â€œæ‰‹å†™ newâ€æ¥è€ƒå¯Ÿä½ å¯¹<strong>åŸå‹é“¾</strong>ã€<strong>this ç»‘å®š</strong>ä»¥åŠ<strong>æ„é€ å‡½æ•°è¿”å›å€¼</strong>çš„ç†è§£ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»åŸç†åˆ°å®ç°ï¼Œå½»åº•ææ‡‚ <code>new</code> èƒŒåçš„é­”æ³•ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ <code>new</code> åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿ</h2>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>new Person()</code> æ—¶ï¼ŒJS å¼•æ“åœ¨èƒŒåé»˜é»˜æ‰§è¡Œäº†ä»¥ä¸‹ <strong>4 ä¸ªæ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</strong>ï¼šåœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼ˆä¾‹å¦‚ <code>obj = {}</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>é“¾æ¥åŸå‹</strong>ï¼šå°†æ–°å¯¹è±¡çš„ <code>__proto__</code> å±æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼Œä»è€Œå®ç°åŸå‹ç»§æ‰¿ï¼ˆè®©å®ä¾‹èƒ½è®¿é—®åŸå‹ä¸Šçš„æ–¹æ³•ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç»‘å®š this</strong>ï¼šå°†æ„é€ å‡½æ•°å†…éƒ¨çš„ <code>this</code> ç»‘å®šåˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸Šï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆä¸ºæ–°å¯¹è±¡æ·»åŠ å±æ€§ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è¿”å›å¯¹è±¡</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ„é€ å‡½æ•°æ˜¾å¼è¿”å›äº†ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼ˆæˆ–å‡½æ•°ï¼‰ï¼Œåˆ™è¿”å›è¯¥ç»“æœã€‚</li>
<li>å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼ˆè¿”å›åŸºæœ¬ç±»å‹æˆ–æ— è¿”å›å€¼ï¼‰ï¼Œåˆ™è¿”å›æ­¥éª¤ 1 åˆ›å»ºçš„<strong>æ–°å¯¹è±¡</strong>ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">äºŒã€ æ‰‹å†™ <code>myNew</code> å®ç°</h2>
<p>æ ¹æ®ä¸Šè¿°åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€ä¸ªè‡ªå·±çš„ <code>myNew</code> å‡½æ•°ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">/**
 * æ‰‹å†™ new æ“ä½œç¬¦
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} Constructor æ„é€ å‡½æ•°
 * <span class="hljs-doctag">@param</span>  {<span class="hljs-type">...any</span>} args ä¼ é€’çš„å‚æ•°
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
  <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†å…¶åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype</span>
  <span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);

  <span class="hljs-comment">// 2. å°†æ„é€ å‡½æ•°çš„ this ç»‘å®šåˆ°æ–°å¯¹è±¡ä¸Šï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°</span>
  <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(obj, args);

  <span class="hljs-comment">// 3. å¤„ç†è¿”å›å€¼é€»è¾‘ (è¿™æ˜¯é¢è¯•ä¸­æœ€å®¹æ˜“å¿½è§†çš„ç»†èŠ‚ï¼)</span>
  <span class="hljs-comment">// å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¯¹è±¡(ä¸ä¸ºnull)æˆ–å‡½æ•°ï¼Œåˆ™è¿”å›è¯¥ç»“æœï¼›å¦åˆ™è¿”å›æ–°åˆ›å»ºçš„ obj</span>
  <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> &amp;&amp; result !== <span class="hljs-literal">null</span>) || <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>) {
    <span class="hljs-keyword">return</span> result;
  }
  
  <span class="hljs-comment">// 4. è¿”å›æ–°å¯¹è±¡</span>
  <span class="hljs-keyword">return</span> obj;
}
</code></pre>
<h3 data-id="heading-3">æµ‹è¯•ç”¨ä¾‹ï¼š</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name, age</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
  <span class="hljs-comment">// æƒ…å†µ 1: æ²¡æœ‰è¿”å›å€¼ï¼ˆé»˜è®¤è¿”å› thisï¼‰</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Student</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  <span class="hljs-comment">// æƒ…å†µ 2: è¿”å›ä¸€ä¸ªå¯¹è±¡</span>
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">name</span>: <span class="hljs-string">'Special Student'</span>, <span class="hljs-attr">grade</span>: <span class="hljs-number">100</span> };
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">NumberObj</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
  <span class="hljs-comment">// æƒ…å†µ 3: è¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹</span>
  <span class="hljs-keyword">return</span> <span class="hljs-number">123</span>;
}

<span class="hljs-comment">// æµ‹è¯• 1ï¼šæ­£å¸¸æƒ…å†µ</span>
<span class="hljs-keyword">const</span> per = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">Person</span>, <span class="hljs-string">'Ouyang'</span>, <span class="hljs-number">23</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(per); <span class="hljs-comment">// Person { name: 'Ouyang', age: 23 }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(per <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// æµ‹è¯• 2ï¼šæ„é€ å‡½æ•°è¿”å›å¯¹è±¡</span>
<span class="hljs-keyword">const</span> stu = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">Student</span>, <span class="hljs-string">'XiaoMing'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(stu); <span class="hljs-comment">// { name: 'Special Student', grade: 100 } (this è¢«å¿½ç•¥äº†)</span>

<span class="hljs-comment">// æµ‹è¯• 3ï¼šæ„é€ å‡½æ•°è¿”å›åŸºæœ¬ç±»å‹</span>
<span class="hljs-keyword">const</span> num = <span class="hljs-title function_">myNew</span>(<span class="hljs-title class_">NumberObj</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// NumberObj { a: 1 } (è¿”å›å€¼ 123 è¢«å¿½ç•¥)</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ æ·±åº¦è§£æï¼šè¿”å›å€¼é™·é˜±</h2>
<p>è¿™æ˜¯é¢è¯•ä¸­æœ€å¸¸æŒ–çš„å‘ã€‚</p>
<ul>
<li>
<p><strong>åœºæ™¯ A</strong>ï¼šæ„é€ å‡½æ•°å†…éƒ¨æ²¡æœ‰ <code>return</code>ï¼Œæˆ–è€… <code>return</code> ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆNumber, String, Boolean, null, undefinedï¼‰ã€‚</p>
<ul>
<li><strong>ç»“æœ</strong>ï¼š<code>new</code> æ“ä½œç¬¦ä¼šå¿½ç•¥è¿™ä¸ªè¿”å›å€¼ï¼Œç›´æ¥è¿”å›<strong>æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœºæ™¯ B</strong>ï¼šæ„é€ å‡½æ•°å†…éƒ¨ <code>return</code> ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼ˆObject, Array, Functionï¼‰ã€‚</p>
<ul>
<li><strong>ç»“æœ</strong>ï¼š<code>new</code> æ“ä½œç¬¦ä¼šç›´æ¥è¿”å›è¿™ä¸ª<strong>å¼•ç”¨ç±»å‹</strong>ï¼Œæ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ä¼šè¢«ä¸¢å¼ƒï¼ˆä¸” <code>this</code> ä¸Šçš„å±æ€§èµ‹å€¼ä¹Ÿä¼šå¤±æ•ˆï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-5">å››ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜ï¼ˆæŒ‘æˆ˜ä¸€ä¸‹ï¼‰</h2>
<h3 data-id="heading-6">Q1ï¼š<code>Object.create()</code> å’Œ <code>new</code> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ul>
<li><code>new</code>ï¼šä¸ä»…åˆ›å»ºæ–°å¯¹è±¡å¹¶ç»§æ‰¿åŸå‹ï¼Œè¿˜ä¼š<strong>æ‰§è¡Œæ„é€ å‡½æ•°</strong>ï¼Œè¿›è¡Œå±æ€§åˆå§‹åŒ–ã€‚</li>
<li><code>Object.create()</code>ï¼šåªè´Ÿè´£åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡å¹¶ç»§æ‰¿åŸå‹ï¼Œ<strong>ä¸ä¼šæ‰§è¡Œæ„é€ å‡½æ•°</strong>ã€‚</li>
</ul>
<h3 data-id="heading-7">Q2ï¼šä¸ºä»€ä¹ˆä»£ç ä¸­å»ºè®®ä½¿ç”¨ <code>Object.create</code> è€Œä¸æ˜¯ <code>obj.__proto__</code>ï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong> <code>__proto__</code> æ˜¯éæ ‡å‡†å±æ€§ï¼ˆè™½ç„¶æµè§ˆå™¨æ”¯æŒï¼‰ï¼Œç›´æ¥ä¿®æ”¹å®ƒä¼šç ´å JS å¼•æ“çš„ä¼˜åŒ–ï¼Œä¸¥é‡å½±å“æ€§èƒ½ã€‚<code>Object.create()</code> æ˜¯ ES5 æ ‡å‡†æ–¹æ³•ï¼Œæ›´è§„èŒƒä¸”æ€§èƒ½æ›´å¥½ã€‚</p>
<h3 data-id="heading-8">Q3ï¼šå¦‚æœæ„é€ å‡½æ•°è¿”å› <code>null</code>ï¼Œ<code>new</code> å‡ºæ¥çš„ç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong> ç»“æœæ˜¯<strong>æ–°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡</strong>ã€‚ å› ä¸º <code>typeof null === 'object'</code>ï¼Œä½† <code>null</code> æ˜¯ä¸ªç‰¹æ®Šå€¼ã€‚åœ¨ <code>new</code> çš„è§„èŒƒä¸­ï¼Œå¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ç±»å‹ä½†å€¼ä¸º <code>null</code>ï¼Œä»ç„¶ä¼šå¿½ç•¥å®ƒï¼Œè¿”å›å®ä¾‹å¯¹è±¡ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨æ‰‹å†™ä»£ç ä¸­æˆ‘ä»¬è¦åˆ¤æ–­ <code>result !== null</code>ã€‚</p>
<hr/>
<h3 data-id="heading-9">ç»“è¯­</h3>
<p>æ‰‹å†™ <code>new</code> æ˜¯å‰ç«¯åŸºç¡€èƒ½åŠ›çš„è¯•é‡‘çŸ³ã€‚ç†è§£äº†è¿™ 4 ä¸ªæ­¥éª¤ï¼Œä½ ä¸ä»…èƒ½è½»æ¾åº”å¯¹é¢è¯•ï¼Œè¿˜èƒ½æ›´æ·±åˆ»åœ°ç†è§£ JavaScript çš„ç»§æ‰¿æœºåˆ¶ã€‚</p>
<p><strong>å¦‚æœä½ è§‰å¾—è¿™ç¯‡ç¬”è®°å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JS-æ·±åº¦è§£æ„JSäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰]]></title>    <link>https://juejin.cn/post/7595994039109058596</link>    <guid>https://juejin.cn/post/7595994039109058596</guid>    <pubDate>2026-01-17T14:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039109058596" data-draft-id="7595878718172233764" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JS-æ·±åº¦è§£æ„JSäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T14:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘ç°ä¸€åªå¤§å‘†ç“œ"/> <meta itemprop="url" content="https://juejin.cn/user/180747382561607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JS-æ·±åº¦è§£æ„JSäº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/180747382561607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘ç°ä¸€åªå¤§å‘†ç“œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:58:21.000Z" title="Sat Jan 17 2026 14:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>ä¸ºä»€ä¹ˆ JavaScript æ˜¯å•çº¿ç¨‹çš„å´èƒ½å¤„ç†å¼‚æ­¥ IOï¼Ÿä¸ºä»€ä¹ˆ <code>setTimeout</code> å¹¶ä¸æ€»æ˜¯å‡†æ—¶ï¼Ÿæœ¬æ–‡å°†ä»å®è§‚çš„æ‰§è¡Œæ ˆã€ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸€ç›´æ·±å…¥åˆ°æµè§ˆå™¨åº•å±‚çš„ä»»åŠ¡è°ƒåº¦é€»è¾‘ï¼Œå¸¦ä½ å½»åº•çœ‹é€äº‹ä»¶å¾ªç¯ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼Ÿ</h2>
<p>JavaScript çš„æ ¸å¿ƒæ˜¯<strong>å•çº¿ç¨‹</strong>çš„ï¼Œè¿™æ„å‘³ç€å®ƒåªæœ‰ä¸€ä¸ªä¸»çº¿ç¨‹æ¥å¤„ç† DOM è§£æã€æ ·å¼è®¡ç®—ã€è„šæœ¬æ‰§è¡Œç­‰ã€‚å¦‚æœæŸä¸ªä»»åŠ¡è€—æ—¶è¿‡é•¿ï¼Œé¡µé¢å°±ä¼šâ€œå¡æ­»â€ã€‚ä¸ºäº†åè°ƒåŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡ï¼ˆè¾“å…¥äº‹ä»¶ã€ç½‘ç»œè¯·æ±‚ã€å®šæ—¶å™¨ï¼‰ï¼Œæµè§ˆå™¨å¼•å…¥äº†<strong>äº‹ä»¶å¾ªç¯</strong>ç³»ç»Ÿæ¥ç»Ÿä¸€è°ƒåº¦å’Œå¤„ç†è¿™äº›ä»»åŠ¡ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ æ ¸å¿ƒç»„ä»¶ï¼šæ‰§è¡Œæ ˆä¸ä»»åŠ¡é˜Ÿåˆ—</h2>
<h3 data-id="heading-3">1. æ‰§è¡Œæ ˆ (Execution Stack)</h3>
<p>å½“å¤šä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå› ä¸ºjsæ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€ä»¥æ¯æ¬¡åªèƒ½æ‰§è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œäºæ˜¯è¿™äº›æ–¹æ³•è¢«æ’åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„åœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯æ‰§è¡Œæ ˆã€‚æ‰§è¡Œæ ˆé‡Œé¢æ‰§è¡Œçš„éƒ½æ˜¯åŒæ­¥çš„æ“ä½œã€‚</p>
<h3 data-id="heading-4">2. äº‹ä»¶é˜Ÿåˆ— (Task Queue)</h3>
<ul>
<li>åœ¨jsæ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¼‚æ­¥äº‹ä»¶ï¼ˆå¦‚ Ajaxã€å®šæ—¶å™¨ï¼‰ï¼Œå°±ä¼šé¦–å…ˆå°†è¿™ä¸ªå¼‚æ­¥äº‹ä»¶äº¤ç»™å¯¹åº”çš„æµè§ˆå™¨æ¨¡å—ï¼ˆå¦‚ç½‘ç»œè¿›ç¨‹ï¼‰ï¼Œç»§ç»­æ‰§è¡Œæ‰§è¡Œæ ˆé‡Œé¢çš„ä»»åŠ¡ã€‚</li>
<li>å½“å¼‚æ­¥äº‹ä»¶è¿”å›ç»“æœåï¼Œjsä¸ä¼šç«‹å³æ‰§è¡Œè¿™ä¸ªå›è°ƒï¼Œä¼šå°†äº‹ä»¶åŠ å…¥åˆ°äº‹ä»¶é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰å½“æ‰§è¡Œæ ˆé‡Œé¢çš„å…¨éƒ¨æ‰§è¡Œå®Œä»¥åï¼Œä¸»çº¿ç¨‹æ‰ä¼šå»æŸ¥æ‰¾äº‹ä»¶é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡ã€‚</li>
<li>å¦‚æœæœ‰ï¼Œé‚£ä¹ˆä¸»çº¿ç¨‹ä¼šå–å‡ºäº‹ä»¶é˜Ÿåˆ—é‡Œé¢æ’åœ¨æœ€å‰é¢çš„äº‹ä»¶ï¼Œå°†è¿™ä¸ªäº‹ä»¶å¯¹åº”çš„å›è°ƒåŠ å…¥åˆ°æ‰§è¡Œæ ˆä¸­ï¼Œç„¶åæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç ã€‚ç„¶ååœ¨ç»§ç»­è§‚å¯Ÿæ‰§è¡Œæ ˆé‡Œé¢æ˜¯å¦æœ‰ä»»åŠ¡ï¼Œä¾æ¬¡åå¤...å°±å½¢æˆäº†ä¸€ä¸ªæ— é™çš„å¾ªç¯ã€‚</li>
<li>è¿™å°±æ˜¯è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºäº‹ä»¶å¾ªç¯ï¼ˆEvent loopï¼‰çš„åŸå› ã€‚</li>
</ul>
<p><strong>å¾ªç¯é€»è¾‘ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºã€‚</li>
<li>è‹¥ä¸ºç©ºï¼Œä»äº‹ä»¶é˜Ÿåˆ—å¤´éƒ¨å–å‡ºä¸€ä¸ªä»»åŠ¡æ¨å…¥æ‰§è¡Œæ ˆã€‚</li>
<li>å¾ªç¯å¾€å¤ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ å¼‚æ­¥ä»»åŠ¡çš„â€œç­‰çº§â€ï¼šå®ä»»åŠ¡ä¸å¾®ä»»åŠ¡</h2>
<p>å¹¶éæ‰€æœ‰çš„å¼‚æ­¥ä»»åŠ¡ä¼˜å…ˆçº§éƒ½ä¸€æ ·ã€‚åœ¨åŒä¸€æ¬¡å¾ªç¯ä¸­ï¼Œ<strong>å¾®ä»»åŠ¡æ°¸è¿œåœ¨ä¸‹ä¸€æ¬¡å®ä»»åŠ¡ä¹‹å‰æ‰§è¡Œ!!!</strong></p>




















<table><thead><tr><th><strong>ç±»å‹</strong></th><th><strong>åŒ…å«ä»»åŠ¡</strong></th><th><strong>æ‰§è¡Œæ—¶æœº</strong></th></tr></thead><tbody><tr><td><strong>å®ä»»åŠ¡ (MacroTask)</strong></td><td><code>setTimeout</code>, <code>setInterval</code>, <code>ajax</code>, <code>domäº‹ä»¶</code></td><td>æ¯æ¬¡äº‹ä»¶å¾ªç¯å¼€å§‹æ—¶å¤„ç†ä¸€ä¸ª</td></tr><tr><td><strong>å¾®ä»»åŠ¡ (MicroTask)</strong></td><td><code>Promise.then/catch</code>, <code>MutaionObserver</code>, <code>process.nextTick</code> (Node.js)</td><td>å½“å‰æ‰§è¡Œæ ˆæ¸…ç©ºåï¼Œç«‹å³æ¸…ç©ºæ•´ä¸ªå¾®ä»»åŠ¡é˜Ÿåˆ—</td></tr></tbody></table>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong> <code>new Promise()</code> æ„é€ å‡½æ•°å†…éƒ¨çš„ä»£ç æ˜¯<strong>åŒæ­¥</strong>æ‰§è¡Œçš„ï¼Œåªæœ‰ <code>.then()</code> æˆ– <code>.catch()</code> é‡Œçš„å›è°ƒæ‰æ˜¯å¾®ä»»åŠ¡ã€‚ï¼ˆåç»­ä¼šä¸“é—¨å‡ºä¸€ç¯‡promiseç›¸å…³æ–‡ç« ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">å››ã€ åº•å±‚æ­ç§˜ï¼šå®šæ—¶å™¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</h2>
<p>å¾ˆå¤šå¼€å‘è€…è®¤ä¸º <code>setTimeout</code> æ˜¯ç›´æ¥è¿›å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„ï¼Œä½†æµè§ˆå™¨åº•å±‚å…¶å®ç»´æŠ¤äº†ä¸€ä¸ª<strong>å»¶è¿Ÿæ‰§è¡Œé˜Ÿåˆ— (Delayed Incoming Queue)</strong> ã€‚</p>
<h3 data-id="heading-7">1. ä»»åŠ¡æ•°æ®ç»“æ„</h3>
<p>å½“è°ƒç”¨ <code>setTimeout</code> æ—¶ï¼Œæ¸²æŸ“è¿›ç¨‹å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªä»»åŠ¡ç»“æ„ä½“ï¼š</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">DelayTask</span>{
  int64 id;
  CallBackFunction cbf;
  <span class="hljs-type">int</span> start_time;
  <span class="hljs-type">int</span> delay_time;
};
</code></pre>
<h3 data-id="heading-8">2. æ‰§è¡Œå¾ªç¯æ¨¡æ‹Ÿ</h3>
<p>æµè§ˆå™¨çš„ä¸»çº¿ç¨‹å¾ªç¯é€»è¾‘ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-C++" lang="C++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">MainThread</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">for</span>(;;) {
    <span class="hljs-comment">// 1. æ‰§è¡Œæ™®é€šæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªä»»åŠ¡ (å®ä»»åŠ¡)</span>
    Task task = task_queue.<span class="hljs-built_in">takeTask</span>();
    <span class="hljs-built_in">ProcessTask</span>(task);
    
    <span class="hljs-comment">// 2. æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ— (æœ¬é˜¶æ®µç”± JS å¼•æ“æ§åˆ¶)</span>
    <span class="hljs-comment">// ProcessMicrotasks(); </span>

    <span class="hljs-comment">// 3. æ‰§è¡Œå»¶è¿Ÿé˜Ÿåˆ—ä¸­åˆ°æœŸçš„ä»»åŠ¡ (å®šæ—¶å™¨ä»»åŠ¡åœ¨æ­¤å¤„ç†)</span>
    <span class="hljs-built_in">ProcessDelayTask</span>();

    <span class="hljs-keyword">if</span>(!keep_running) <span class="hljs-keyword">break</span>; 
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong> æµè§ˆå™¨ä¼šåœ¨å¤„ç†å®Œä¸€ä¸ªæ™®é€šå®ä»»åŠ¡åï¼Œå»æ£€æŸ¥å»¶è¿Ÿé˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ä»»åŠ¡åˆ°æœŸï¼ˆ<code>ProcessDelayTask</code>ï¼‰ï¼Œå¹¶ä¾æ¬¡æ‰§è¡Œå®ƒä»¬ã€‚</p>
<hr/>
<h2 data-id="heading-9">äº”ã€ é¢è¯•æ¨¡æ‹Ÿé¢˜</h2>
<h3 data-id="heading-10">Q1ï¼šä¸ºä»€ä¹ˆ <code>setTimeout(fn, 0)</code> å¹¶ä¸ä¸€å®šæ˜¯ 0ms åæ‰§è¡Œï¼Ÿ</h3>
<p><strong>å‚è€ƒå›ç­”ï¼š</strong></p>
<ol>
<li><strong>æµè§ˆå™¨æœ€å°é™åˆ¶</strong>ï¼šHTML5 è§„èŒƒè§„å®šï¼Œå¦‚æœå®šæ—¶å™¨åµŒå¥—è¶…è¿‡ 5 å±‚ï¼Œæœ€å°å»¶è¿Ÿä¸º 4msã€‚</li>
<li><strong>Event Loop é˜»å¡</strong>ï¼šç”±äºå®šæ—¶å™¨ä»»åŠ¡æ˜¯åœ¨ <code>ProcessDelayTask</code> ä¸­å¤„ç†çš„ï¼Œå¦‚æœå½“å‰çš„å®ä»»åŠ¡ï¼ˆæ¯”å¦‚ä¸€ä¸ªå¤æ‚çš„è®¡ç®—å¾ªç¯ï¼‰æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œä¸»çº¿ç¨‹å°±æ— æ³•åŠæ—¶è·³è½¬åˆ°å»¶è¿Ÿé˜Ÿåˆ—çš„æ£€æŸ¥æ­¥éª¤ï¼Œå¯¼è‡´å®šæ—¶å™¨æ¨è¿Ÿæ‰§è¡Œã€‚</li>
</ol>
<h3 data-id="heading-11">Q2ï¼šè¯´å‡ºä»¥ä¸‹ä»£ç çš„æ‰“å°é¡ºåºï¼š</h3>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1'</span>);
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2'</span>), <span class="hljs-number">0</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3'</span>));
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4'</span>);
</code></pre>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>1 -&gt; 4 -&gt; 3 -&gt; 2ã€‚</p>
<ul>
<li><code>1, 4</code> æ˜¯åŒæ­¥ä»»åŠ¡ï¼Œç›´æ¥è¾“å‡ºã€‚</li>
<li><code>3</code> æ˜¯å¾®ä»»åŠ¡ï¼Œåœ¨å½“å‰è„šæœ¬ï¼ˆå®ä»»åŠ¡ï¼‰æ‰§è¡Œå®Œåç«‹å³æ‰§è¡Œã€‚</li>
<li><code>2</code> æ˜¯ä¸‹ä¸€æ¬¡å®ä»»åŠ¡ã€‚</li>
</ul>
<h3 data-id="heading-12">Q3ï¼š<code>MutationObserver</code> å±äºä»€ä¹ˆä»»åŠ¡ï¼Ÿå®ƒæœ‰ä»€ä¹ˆåº”ç”¨åœºæ™¯ï¼Ÿ</h3>
<p>å‚è€ƒå›ç­”ï¼š</p>
<p>MutationObserver å±äºå¾®ä»»åŠ¡ã€‚å®ƒç”¨äºç›‘å¬ DOM æ ‘çš„å˜åŒ–ã€‚ç”±äºå®ƒæ˜¯å¾®ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨ DOM å˜åŒ–å¼•èµ·çš„å¤šæ¬¡ä¿®æ”¹å…¨éƒ¨å®Œæˆåï¼Œåœ¨æµè§ˆå™¨é‡æ–°æ¸²æŸ“ä¹‹å‰å¼‚æ­¥æ‰§è¡Œï¼Œè¿™æ¯”ä¼ ç»Ÿçš„ Mutation Events æ€§èƒ½æ›´é«˜ï¼Œä¸”ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹æ¸²æŸ“ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…­ã€ æ€»ç»“å»ºè®®</h2>
<ul>
<li><strong>ç†è§£å¾®ä»»åŠ¡çš„ä¼˜å…ˆçº§</strong>ï¼šå¾®ä»»åŠ¡æ˜¯åœ¨å½“å‰å®ä»»åŠ¡ç»“æŸåçš„â€œæ’é˜Ÿâ€è¡Œä¸ºï¼Œé€‚åˆå¤„ç†éœ€è¦ç«‹å³åé¦ˆçš„å¼‚æ­¥é€»è¾‘ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeetCode 11. ç››æœ€å¤šæ°´çš„å®¹å™¨]]></title>    <link>https://juejin.cn/post/7595893785907232802</link>    <guid>https://juejin.cn/post/7595893785907232802</guid>    <pubDate>2026-01-17T15:17:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595893785907232802" data-draft-id="7595886887523631144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeetCode 11. ç››æœ€å¤šæ°´çš„å®¹å™¨"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-17T15:17:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="NEXT06"/> <meta itemprop="url" content="https://juejin.cn/user/1176918763246011"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeetCode 11. ç››æœ€å¤šæ°´çš„å®¹å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176918763246011/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    NEXT06
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:17:39.000Z" title="Sat Jan 17 2026 15:17:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å›¾è§£ç®—æ³•ï¼šä¸ºä»€ä¹ˆä¸€å®šè¦ç§»åŠ¨é‚£ä¸ªçŸ­æ¿ï¼Ÿ| LeetCode 11. ç››æœ€å¤šæ°´çš„å®¹å™¨</h2>
<blockquote>
<p><strong>å‰è¨€</strong>ï¼šåœ¨é¢è¯•ä¸­ï¼Œæœ‰ä¸€ç±»é¢˜ç›®çœ‹ä¼¼ç®€å•ï¼Œæš´åŠ›è§£æ³•ä¹Ÿèƒ½åšï¼Œä½†é¢è¯•å®˜çœŸæ­£æƒ³çœ‹çš„æ˜¯ä½ å¦‚ä½•å°†Â </p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N2)
</code></pre>
<p>Â çš„å¤æ‚åº¦ä¼˜åŒ–åˆ°Â </p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N)
</code></pre>
<p>ã€‚LeetCode 11 é¢˜â€œç››æœ€å¤šæ°´çš„å®¹å™¨â€å°±æ˜¯è¿™ç±»é¢˜ç›®çš„å…¸èŒƒã€‚ä»Šå¤©æˆ‘ä»¬ä¸èƒŒä»£ç ï¼Œè€Œæ˜¯æ·±å…¥æ¢è®¨èƒŒåçš„<strong>è´ªå¿ƒç­–ç•¥</strong>ä¸<strong>åŒæŒ‡é’ˆ</strong>æ€ç»´ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€ é¢˜ç›®ç›´è§‰ä¸â€œæœ¨æ¡¶æ•ˆåº”â€</h3>
<p>é¢˜ç›®çš„ç›®æ ‡éå¸¸ç›´è§‚ï¼šåœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ä¸¤æ¡å‚çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ X è½´å›´æˆçš„å®¹å™¨èƒ½ç››æœ€å¤šçš„æ°´ã€‚</p>
<p>æˆ‘ä»¬è¦è®¡ç®—çš„æ˜¯çŸ©å½¢é¢ç§¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">Area=<span class="hljs-attribute">Width</span>Ã—HeightArea=<span class="hljs-attribute">Width</span>Ã—<span class="hljs-attribute">Height</span>
</code></pre>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªç‰©ç†å¸¸è¯†è‡³å…³é‡è¦ï¼Œé‚£å°±æ˜¯<strong>æœ¨æ¡¶æ•ˆåº” (Short Board Effect)</strong> ï¼š<br/>
ä¸€ä¸ªæœ¨æ¡¶èƒ½è£…å¤šå°‘æ°´ï¼Œå–å†³äº<strong>æœ€çŸ­</strong>çš„é‚£å—æœ¨æ¿ã€‚</p>
<p>æ˜ å°„åˆ°é¢˜ç›®ä¸­ï¼š</p>
<ul>
<li><strong>å®½åº¦ (Width)</strong> ï¼šä¸¤æ¡å‚çº¿åœ¨ X è½´ä¸Šçš„è·ç¦»Â right - leftã€‚</li>
<li><strong>é«˜åº¦ (Height)</strong> ï¼šä¸¤æ¡å‚çº¿ä¸­<strong>è¾ƒçŸ®</strong>çš„é‚£ä¸€æ¡ï¼Œå³Â Math.min(height[left], height[right])ã€‚</li>
</ul>
<h3 data-id="heading-2">äºŒã€ ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆæš´åŠ›è§£æ³•ä¸è¡Œï¼Ÿ</h3>
<p>æœ€å®¹æ˜“æƒ³åˆ°çš„æ€è·¯æ˜¯åŒé‡å¾ªç¯ï¼šè®¡ç®—æ‰€æœ‰ä¸¤ä¸¤ç»„åˆçš„é¢ç§¯ï¼Œç„¶åå–æœ€å¤§å€¼ã€‚</p>
<p>ç„¶è€Œä»¥æˆ‘çš„ç»éªŒï¼Œå½“ä½ å†™ä¸‹åŒå¾ªç¯çš„æ—¶å€™ï¼Œä½ è‡ªå·±å¿ƒä¸­çš„æ— å¥ˆï¼Œæ²¡æœ‰äººä¼šæ¯”ä½ æ›´äº†è§£</p>
<p>é¢è¯•å®˜åœ¨äº†è§£åˆ°ä½ çš„è§£é¢˜æ€è·¯æ—¶ï¼Œå°±å·²ç»å°†ä½ passæ‰äº†</p>
<p>ä»»ä½•ç®—æ³•é¢˜ï¼Œå†™åŒå¾ªç¯çš„ç»“æœåªæœ‰æ­»è·¯ä¸€æ¡ï¼ˆå› ä¸ºä»–ä¼šè®¤ä¸ºä½ å¯¹ç©ºé—´ä¸æ—¶é—´å¤æ‚åº¦æ²¡æœ‰æ¦‚å¿µï¼Œæˆ–è€…ä½ çš„å®åŠ›å°±è¿™ä¹ˆå¤šï¼‰</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">//  æš´åŠ›è§£æ³•
let <span class="hljs-attr">max</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; len; i++) {</span>
    for (let <span class="hljs-attr">j</span> = i + <span class="hljs-number">1</span><span class="hljs-comment">; j &lt; len; j++) {</span>
        // è®¡ç®—æ¯ä¸€å¯¹ç»„åˆ...
    }
}
</code></pre>
<p><strong>è¿™ç§è§£æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N2)
</code></pre>
<p>ã€‚<br/>
é¢˜ç›®æç¤ºä¸­æ•°ç»„é•¿åº¦Â </p>
<pre><code class="hljs">NN
</code></pre>
<p>Â å¯è¾¾Â </p>
<pre><code class="hljs">105105
</code></pre>
<p>ã€‚è¿™æ„å‘³ç€è®¡ç®—é‡é«˜è¾¾Â </p>
<pre><code class="hljs">10101010
</code></pre>
<p>Â æ¬¡ã€‚åœ¨é€šå¸¸çš„ç®—æ³•ç«èµ›æˆ–é¢è¯•æ ‡å‡†ä¸­ï¼Œè¿™ç»å¯¹ä¼šè§¦å‘Â <strong>TLE (Time Limit Exceeded)</strong> Â è¶…æ—¶é”™è¯¯ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´èªæ˜çš„åšæ³•ï¼Œå°†å¤æ‚åº¦é™ç»´æ‰“å‡»åˆ°</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N)
</code></pre>
<p>ã€‚</p>
<h3 data-id="heading-3">ä¸‰ã€ æ ¸å¿ƒï¼šåŒæŒ‡é’ˆæ³•ä¸è´ªå¿ƒç­–ç•¥</h3>
<p>æˆ‘ä»¬è¦ä¼˜åŒ–çš„æ ¸å¿ƒæ˜¯ï¼š<strong>å¦‚ä½•å°½å¯èƒ½å°‘åœ°éå†ï¼Œå´èƒ½ä¿è¯ä¸æ¼æ‰æœ€å¤§å€¼ï¼Ÿ</strong></p>
<h4 data-id="heading-4">1. åˆå§‹å¸ƒå±€ï¼šæ‹‰æ»¡å®½åº¦</h4>
<p>æ—¢ç„¶é¢ç§¯ = å®½ Ã— é«˜ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆè®©<strong>å®½åº¦æœ€å¤§</strong>ã€‚<br/>
æˆ‘ä»¬åœ¨æ•°ç»„çš„å¤´å°¾å„æ”¾ç½®ä¸€ä¸ªæŒ‡é’ˆï¼šleftÂ æŒ‡å‘å¼€å¤´ï¼ŒrightÂ æŒ‡å‘ç»“å°¾ã€‚</p>
<p>æ­¤æ—¶ï¼Œå®¹å™¨çš„åº•å®½æ˜¯æœ€å¤§çš„ã€‚æ¥ä¸‹æ¥çš„æ¯ä¸€æ­¥ç§»åŠ¨ï¼Œå®½åº¦å¿…ç„¶å‡å°ã€‚ä¸ºäº†å¼¥è¡¥å®½åº¦çš„æŸå¤±ï¼Œæˆ‘ä»¬å¿…é¡»å¯»æ‰¾<strong>æ›´é«˜</strong>çš„å‚çº¿ã€‚</p>
<h4 data-id="heading-5">2. å†³ç­–å›°å¢ƒï¼šç§»åŠ¨å“ªä¸€æ ¹ï¼Ÿ</h4>
<p>è¿™æ˜¯æœ¬é¢˜æœ€éš¾ç†è§£çš„ç‚¹ã€‚å‡è®¾ç°åœ¨çš„çŠ¶å†µæ˜¯ï¼š</p>
<ul>
<li>
<p>å·¦è¾¹æŸ±å­é«˜åº¦Â left_h = 2</p>
</li>
<li>
<p>å³è¾¹æŸ±å­é«˜åº¦Â right_h = 8</p>
</li>
<li>
<p>å½“å‰å®½åº¦Â w = 10</p>
</li>
<li>
<p>å½“å‰é¢ç§¯ =Â </p>
<pre><code class="hljs language-ini" lang="ini">2Ã—<span class="hljs-attr">10</span>=<span class="hljs-number">202</span>Ã—<span class="hljs-number">10</span>=<span class="hljs-number">20</span>
</code></pre>
</li>
</ul>
<p>ç°åœ¨æˆ‘ä»¬éœ€è¦å‘å†…ç§»åŠ¨ä¸€ä¸ªæŒ‡é’ˆï¼Œæ˜¯ç§»å·¦è¾¹çš„ï¼ˆçŸ®çš„ï¼‰ï¼Œè¿˜æ˜¯ç§»å³è¾¹çš„ï¼ˆé«˜çš„ï¼‰ï¼Ÿ</p>
<h5 data-id="heading-6">å‡è®¾æˆ‘ä»¬ç§»åŠ¨é«˜çš„é‚£ä¸€è¾¹ï¼ˆå³è¾¹ï¼‰ï¼š</h5>
<p>å®½åº¦è‚¯å®šå˜å°äº†ï¼ˆå˜æˆ 9ï¼‰ã€‚<br/>
è€Œæ°´ä½é«˜åº¦å–å†³äºè°ï¼Ÿä¾ç„¶æ˜¯å·¦è¾¹é‚£ä¸ªä¸åŠ¨çš„çŸ­æ¿ï¼ˆé«˜åº¦ 2ï¼‰ã€‚<br/>
æ— è®ºå³è¾¹æ–°é‡åˆ°çš„æŸ±å­æ˜¯é«˜è€¸å…¥äº‘è¿˜æ˜¯çŸ®å°ä¸å ªï¼Œå®¹å™¨çš„æœ‰æ•ˆé«˜åº¦<strong>æœ€é«˜åªèƒ½æ˜¯ 2</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">æ–°é¢ç§¯=<span class="hljs-number">9</span>Ã—minâ¡(<span class="hljs-number">2</span>,æ–°é«˜åº¦)â‰¤<span class="hljs-number">18</span>æ–°é¢ç§¯=<span class="hljs-number">9</span>Ã—<span class="hljs-built_in">min</span>(<span class="hljs-number">2</span>,æ–°é«˜åº¦)â‰¤<span class="hljs-number">18</span>
</code></pre>
<p><strong>ç»“è®ºï¼š</strong> Â ç§»åŠ¨é«˜æ¿ï¼Œå®½åº¦å‡å°ï¼Œé«˜åº¦å—é™äºä¸åŠ¨çš„çŸ­æ¿ï¼ˆæ— æ³•å¢åŠ ï¼‰ã€‚<strong>é¢ç§¯åªä¼šå˜å°ï¼Œç»å¯¹ä¸å¯èƒ½å˜å¤§ã€‚</strong> Â è¿™æ˜¯ä¸€æ¡æ­»è·¯ã€‚</p>
<h5 data-id="heading-7">è´ªå¿ƒç­–ç•¥ï¼šç§»åŠ¨çŸ®çš„é‚£ä¸€è¾¹ï¼ˆå·¦è¾¹ï¼‰ï¼š</h5>
<p>è™½ç„¶å®½åº¦å˜å°äº†ï¼ˆå˜æˆ 9ï¼‰ï¼Œä½†æˆ‘ä»¬æŠ›å¼ƒäº†å½“å‰çš„çŸ­æ¿ï¼ˆé«˜åº¦ 2ï¼‰ã€‚<br/>
å¦‚æœè¿æ°”å¥½ï¼Œå·¦è¾¹æ–°é‡åˆ°çš„æŸ±å­é«˜åº¦æ˜¯ 10ï¼Œé‚£ä¹ˆæ–°çš„æœ‰æ•ˆé«˜åº¦å°±å˜æˆäº† 8ï¼ˆå—é™äºå³è¾¹ï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">æ–°é¢ç§¯=9Ã—<span class="hljs-attr">8</span>=<span class="hljs-number">72</span>æ–°é¢ç§¯=<span class="hljs-number">9</span>Ã—<span class="hljs-number">8</span>=<span class="hljs-number">72</span>
</code></pre>
<p><strong>ç»“è®ºï¼š</strong> Â åªæœ‰ç§»åŠ¨çŸ­æ¿ï¼Œæˆ‘ä»¬æ‰<strong>æœ‰å¯èƒ½</strong>æ‰¾åˆ°æ›´é«˜çš„æŸ±å­æ¥å¼¥è¡¥å®½åº¦çš„æŸå¤±ã€‚</p>
<p><strong>è¿™å°±æ˜¯æœ¬é¢˜çš„è´ªå¿ƒé€»è¾‘ï¼š</strong> Â æ¯ä¸€æ­¥æˆ‘ä»¬éƒ½æ’é™¤æ‰é‚£ä¸ªâ€œå¯¼è‡´å½“å‰é«˜åº¦å—é™â€çš„çŸ­æ¿ï¼Œå› ä¸ºå®ƒå·²ç»å‘æŒ¥äº†å®ƒçš„æœ€å¤§æ½œåŠ›ï¼ˆåœ¨å½“å‰æœ€å®½çš„æƒ…å†µä¸‹ï¼‰ï¼Œä¿ç•™å®ƒæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p>
<h3 data-id="heading-8">å››ã€ ä»£ç å®ç°</h3>
<p>ç†è§£äº†ä¸Šè¿°é€»è¾‘ï¼Œä»£ç å®ç°å°±éå¸¸ç®€å•äº†ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">/**
 * @param {number<span class="hljs-section">[]</span>} height
 * @return {number}
 */
var <span class="hljs-attr">maxArea</span> = function(height) {
    // 1. å®šä¹‰åŒæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘å¤´å°¾
    let <span class="hljs-attr">left</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    let <span class="hljs-attr">right</span> = height.length - <span class="hljs-number">1</span><span class="hljs-comment">;</span>
    let <span class="hljs-attr">maxWater</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    
    // 2. å½“æŒ‡é’ˆæœªç›¸é‡æ—¶å¾ªç¯
    while (left &lt; right) {
        // 3. è®¡ç®—å½“å‰é¢ç§¯
        // é«˜åº¦å–å†³äºçŸ­æ¿ (æœ¨æ¡¶æ•ˆåº”)
        const <span class="hljs-attr">currentHeight</span> = Math.min(height[left], height[right])<span class="hljs-comment">;</span>
        const <span class="hljs-attr">currentWidth</span> = right - left<span class="hljs-comment">;</span>
        
        // æ›´æ–°å†å²æœ€å¤§å€¼
        <span class="hljs-attr">maxWater</span> = Math.max(maxWater, currentHeight * currentWidth)<span class="hljs-comment">;</span>
        
        // 4. æ ¸å¿ƒå†³ç­–ï¼šç§»åŠ¨è¾ƒçŸ®çš„ä¸€ä¾§
        // å¦‚æœå·¦è¾¹æ˜¯çŸ­æ¿ï¼Œé‚£å·¦è¾¹è¿™å—æ¿å­åœ¨å½“å‰å®½åº¦ä¸‹å·²ç»å‘æŒ¥äº†æœ€å¤§ä»·å€¼ï¼Œ
        // å†å¾€é‡Œç¼©å®½åº¦åªä¼šå˜å°ï¼Œä¿ç•™å·¦è¾¹æ²¡æ„ä¹‰ï¼Œä¸å¦‚å‘å³ç§»è¯•è¯•çœ‹æœ‰æ²¡æœ‰æ›´é«˜çš„ã€‚
        if (height<span class="hljs-section">[left]</span> &lt; height<span class="hljs-section">[right]</span>) {
            left++<span class="hljs-comment">;</span>
        } else {
            right--<span class="hljs-comment">;</span>
        }
    }
    
    return maxWater<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-9">äº”ã€ å¤æ‚åº¦åˆ†æ</h3>
<ul>
<li>
<p><strong>æ—¶é—´å¤æ‚åº¦ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N)
</code></pre>
<p>åŒæŒ‡é’ˆÂ leftÂ å’ŒÂ rightÂ æ€»å…±éå†æ•´ä¸ªæ•°ç»„ä¸€æ¬¡ã€‚ç›¸æ¯”äºæš´åŠ›è§£æ³•çš„Â </p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(N2)
</code></pre>
<p>ï¼Œæ•ˆç‡æå‡æ˜¯å·¨å¤§çš„ã€‚</p>
</li>
<li>
<p><strong>ç©ºé—´å¤æ‚åº¦ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>)<span class="hljs-built_in">O</span>(<span class="hljs-number">1</span>) 
</code></pre>
<p>æˆ‘ä»¬åªéœ€è¦å­˜å‚¨æŒ‡é’ˆç´¢å¼•å’ŒÂ maxWaterÂ å‡ ä¸ªå˜é‡ï¼Œä¸éœ€è¦é¢å¤–çš„æ•°ç»„ç©ºé—´ã€‚</p>
</li>
</ul>
<h3 data-id="heading-10">å…­ã€ æ€»ç»“</h3>
<p>æ‰€è°“ç®—æ³•ä¼˜åŒ–ï¼Œå¾€å¾€ä¸æ˜¯ä»£ç å†™å¾—æœ‰å¤šå¤æ‚ï¼Œè€Œæ˜¯<strong>æ€ç»´æ¨¡å‹çš„è½¬æ¢</strong>ã€‚</p>
<p>LeetCode 11 é¢˜é€šè¿‡è§‚å¯Ÿâ€œæœ¨æ¡¶æ•ˆåº”â€ï¼Œè®©æˆ‘ä»¬æ˜ç™½ï¼šä¿ç•™é•¿æ¿ã€æŠ›å¼ƒçŸ­æ¿æ˜¯å”¯ä¸€å¯èƒ½è·å¾—æ›´å¤§æ”¶ç›Šçš„è·¯å¾„ã€‚è¿™ç§é€šè¿‡æ’é™¤æ³•å°†æœç´¢ç©ºé—´ä»äºŒç»´çŸ©é˜µï¼ˆæ‰€æœ‰ç»„åˆï¼‰å‹ç¼©åˆ°ä¸€ç»´çº¿æ€§æ‰«æï¼ˆåŒæŒ‡é’ˆï¼‰çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç®—æ³•ä¸­çš„<strong>é™ç»´æ‰“å‡»</strong>ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•ææ‡‚åŒæŒ‡é’ˆè§£æ³•ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¢ç´¢ç°ä»£åŒ– i18n æ–¹æ¡ˆï¼šä»å·¥ç¨‹è‡ªåŠ¨åŒ–åˆ° AI é©±åŠ¨çš„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7596025264455778340</link>    <guid>https://juejin.cn/post/7596025264455778340</guid>    <pubDate>2026-01-17T15:37:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596025264455778340" data-draft-id="7595858760133820479" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¢ç´¢ç°ä»£åŒ– i18n æ–¹æ¡ˆï¼šä»å·¥ç¨‹è‡ªåŠ¨åŒ–åˆ° AI é©±åŠ¨çš„æ¼”è¿›"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T15:37:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°èœ—1å·"/> <meta itemprop="url" content="https://juejin.cn/user/835284568117806"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¢ç´¢ç°ä»£åŒ– i18n æ–¹æ¡ˆï¼šä»å·¥ç¨‹è‡ªåŠ¨åŒ–åˆ° AI é©±åŠ¨çš„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/835284568117806/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°èœ—1å·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:37:43.000Z" title="Sat Jan 17 2026 15:37:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æœ€è¿‘å‚ä¸çš„ä¸€ä¸ªä¸­å¤§å‹å‰ç«¯é¡¹ç›®ä¸­ï¼Œéšç€ä¸šåŠ¡éœ€æ±‚çš„å¿«é€Ÿå˜åŒ–å’Œä»£ç çš„é¢‘ç¹é‡æ„ï¼Œå›½é™…åŒ–ï¼ˆi18nï¼‰é€æ¸ä»â€œåŸºç¡€è®¾æ–½â€æ¼”å˜æˆäº†ä¸€ä¸ªæ˜æ˜¾çš„å·¥ç¨‹è´Ÿæ‹…ã€‚</p>
<p>ä¸€ä¸ªéå¸¸å…¸å‹çš„åœºæ™¯æ˜¯ï¼š<strong>ç»„ä»¶é€»è¾‘å·²ç»ä¿®æ”¹å®Œæˆï¼Œä½† <code>locales</code> ç›®å½•ä¸‹çš„ JSON æ–‡ä»¶å´é•¿æœŸå¤„äºæ»åçŠ¶æ€</strong>ã€‚æ–°å¢çš„æ–‡æ¡ˆæ²¡æœ‰åŠæ—¶è¡¥é½ï¼Œåˆ é™¤çš„é¡µé¢å´é—ç•™äº†ä¸€å †æ— äººä½¿ç”¨çš„ Keyã€‚éšç€é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œè¿™ç±»é—®é¢˜ä¼šè¢«ä¸æ–­æ”¾å¤§ã€‚</p>
<p>è¿™èƒŒåå…¶å®æš´éœ²çš„æ˜¯ä¸€ä¸ªæ›´æœ¬è´¨çš„é—®é¢˜ï¼š<strong>ä¼ ç»Ÿ i18n çš„å·¥ä½œæµï¼Œä¸ç°ä»£å‰ç«¯å¼€å‘èŠ‚å¥å¹¶ä¸åŒ¹é…</strong>ã€‚</p>
<p>åœ¨æ·±å…¥æ¢è®¨æ”¹è¿›æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆå›é¡¾ä¸€ä¸‹å½“å‰ä¸»æµ i18n æ–¹æ¡ˆçš„è®¾è®¡æ€è·¯åŠå…¶å±€é™ã€‚</p>
<h2 data-id="heading-0">1. ä¼ ç»ŸåŸºçŸ³ï¼švue-i18n çš„è®¾è®¡å–èˆ</h2>
<p>åœ¨ Vue ç”Ÿæ€ä¸­ï¼Œ<code>vue-i18n</code> å‡ ä¹æ˜¯äº‹å®æ ‡å‡†ã€‚å®ƒæˆç†Ÿã€ç¨³å®šï¼Œå¹¶ä¸”è¦†ç›–äº†å¤§å¤šæ•°å›½é™…åŒ–åœºæ™¯ã€‚</p>
<p>ä»å®ç°æœºåˆ¶ä¸Šçœ‹ï¼Œ<code>vue-i18n</code> çš„æ ¸å¿ƒæ˜¯ <strong>è¿è¡Œæ—¶ï¼ˆRuntimeï¼‰æ›¿æ¢</strong>ï¼š</p>
<ul>
<li>å¼€å‘è€…åœ¨æ¨¡æ¿æˆ–è„šæœ¬ä¸­é€šè¿‡ <code>$t('key')</code> è®¿é—®æ–‡æ¡ˆ</li>
<li>è¿è¡Œæ—¶æ ¹æ®å½“å‰è¯­è¨€ç¯å¢ƒï¼Œä»é¢„å…ˆåŠ è½½çš„ JSON è¯­è¨€åŒ…ä¸­æŸ¥æ‰¾å¹¶è¿”å›å¯¹åº”å­—ç¬¦ä¸²</li>
<li>åŒæ—¶æ”¯æŒå¤æ•°è§„åˆ™ã€æ—¥æœŸ/æ•°å­—æ ¼å¼åŒ–ç­‰é«˜çº§èƒ½åŠ›</li>
</ul>
<p>ä»â€œæ¡†æ¶æ’ä»¶â€çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ ·çš„è®¾è®¡å¹¶æ²¡æœ‰é—®é¢˜ï¼Œä½†åœ¨çœŸå®å·¥ç¨‹å®è·µä¸­ï¼Œå®ƒä¹Ÿå¸¦æ¥äº†ä¸€äº›é•¿æœŸè¢«å¿½è§†çš„æˆæœ¬ã€‚</p>
<p><strong>å¸¸è§ç—›ç‚¹åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li><strong>Key è®¾è®¡æˆæœ¬é«˜</strong><br/>
ä¸ºæ¯ä¸€æ¡æ–‡æ¡ˆè®¾è®¡ä¸€ä¸ªâ€œè¯­ä¹‰æ¸…æ™°ã€å±‚çº§åˆç†ã€å¯é•¿æœŸç»´æŠ¤â€çš„ Keyï¼Œæœ¬èº«å°±æ˜¯ä¸€é¡¹éšæ€§å·¥ä½œé‡ã€‚</li>
<li><strong>ä»£ç ä¸æ–‡æ¡ˆå¼ºè§£è€¦</strong><br/>
Key åˆ†æ•£åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼ŒçœŸå®æ–‡æ¡ˆå´é›†ä¸­åœ¨ JSON æ–‡ä»¶é‡Œï¼Œåˆ é™¤æˆ–é‡æ„é¡µé¢æ—¶ï¼Œå¾ˆå®¹æ˜“ç•™ä¸‹å¤§é‡â€œæ— æ•ˆç¿»è¯‘â€ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡ç¼ºå¤±å¯¼è‡´ç¿»è¯‘è´¨é‡ä¸ç¨³å®š</strong><br/>
æ— è®ºæ˜¯äººå·¥ç¿»è¯‘è¿˜æ˜¯æœºå™¨ç¿»è¯‘ï¼Œå•ç‹¬é¢å¯¹ä¸€ä¸ª Keyï¼Œå¾ˆéš¾å‡†ç¡®ç†è§£å…¶çœŸå®ä½¿ç”¨åœºæ™¯ã€‚<br/>
è¿™äº›é—®é¢˜å¹¶é <code>vue-i18n</code> æœ¬èº«çš„ç¼ºé™·ï¼Œè€Œæ˜¯ <strong>â€œKey é©±åŠ¨â€è¿™ä¸€è®¾è®¡èŒƒå¼çš„å¤©ç„¶ä»£ä»·</strong>ã€‚</li>
</ul>
<h2 data-id="heading-1">2. è‡ªåŠ¨åŒ–æ–¹å‘çš„æ¢ç´¢ï¼šåŸºäº AST çš„ i18n å·¥å…·</h2>
<p>ä¸ºäº†é™ä½ Key ç»´æŠ¤å’Œæ‰‹å·¥åŒæ­¥çš„æˆæœ¬ï¼Œç¤¾åŒºä¸­é€æ¸å‡ºç°äº†ä¸€ç±»è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¾‹å¦‚<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fauto-i18n%2Fauto-i18n-translation-plugins" target="_blank" title="https://github.com/auto-i18n/auto-i18n-translation-plugins" ref="nofollow noopener noreferrer">auto-i18n-translation-plugins</a>ã€‚</p>
<p>è¿™ç±»æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>è®©å·¥å…·ç†è§£ä»£ç ï¼Œè€Œä¸æ˜¯è®©äººç»´æŠ¤æ˜ å°„å…³ç³»</strong>ã€‚</p>
<p>å…¶å…¸å‹æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>é™æ€æ‰«æ</strong><br/>
åŸºäº AST åˆ†ææºä»£ç ï¼Œæå–å…¶ä¸­çš„ä¸­æ–‡å­—ç¬¦ä¸²</li>
<li><strong>è‡ªåŠ¨æ›¿æ¢</strong><br/>
å°†æºç ä¸­çš„ä¸­æ–‡æ›¿æ¢ä¸ºç”Ÿæˆçš„ Keyï¼ˆé€šå¸¸æ˜¯ Hash å€¼ï¼‰</li>
<li><strong>è‡ªåŠ¨ç¿»è¯‘</strong><br/>
è°ƒç”¨ Google / ç™¾åº¦ç­‰ç¿»è¯‘ APIï¼Œç”Ÿæˆå¤šè¯­è¨€æ–‡æ¡ˆ</li>
<li><strong>é…ç½®å†™å…¥</strong><br/>
è‡ªåŠ¨ç»´æŠ¤è¯­è¨€åŒ…æ–‡ä»¶<br/>
åœ¨å·¥ç¨‹æ•ˆç‡å±‚é¢ï¼Œè¿™ä¸€æ­¥å·²ç»æ˜¯ä¸€æ¬¡æ˜æ˜¾çš„è·ƒè¿ï¼š<br/>
<strong>å¼€å‘è€…å‡ ä¹å¯ä»¥å¿½ç•¥ i18n çš„å­˜åœ¨ï¼Œå…ˆå®Œæˆä¸šåŠ¡ï¼Œå†ç”±å·¥å…·å…œåº•ã€‚</strong></li>
</ol>
<p>ä½†å½“é¡¹ç›®è¿›å…¥æ›´å¤æ‚çš„ä¸šåŠ¡é¢†åŸŸåï¼Œæ–°çš„é—®é¢˜ä¹Ÿéšä¹‹å‡ºç°ã€‚</p>
<p><strong>ä¸»è¦ç“¶é¢ˆåœ¨äºç¿»è¯‘è´¨é‡ï¼š</strong></p>
<ul>
<li>é€šç”¨ç¿»è¯‘ API ç¼ºä¹é¢†åŸŸä¸Šä¸‹æ–‡</li>
<li>æ— æ³•åŒºåˆ†ä¸šåŠ¡è¯­ä¹‰ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ã€åå°ç³»ç»Ÿç­‰ï¼‰</li>
<li>ä»ç„¶éœ€è¦å¤§é‡äººå·¥æ ¡å¯¹</li>
</ul>
<p>è¿™ç±»å·¥å…·è§£å†³äº†â€œæ•ˆç‡é—®é¢˜â€ï¼Œä½†å¹¶æ²¡æœ‰çœŸæ­£è§£å†³â€œå‡†ç¡®æ€§é—®é¢˜â€ã€‚</p>
<h2 data-id="heading-2">3. è¿›ä¸€æ­¥æ¼”è¿›ï¼šAI é©±åŠ¨çš„ i18n è®¾è®¡æ€è·¯</h2>
<p>åœ¨å½“å‰ LLM å·²ç»é«˜åº¦æˆç†Ÿçš„èƒŒæ™¯ä¸‹ï¼Œæˆ‘è®¤ä¸º i18n æ–¹æ¡ˆçš„è®¾è®¡ç›®æ ‡å¯ä»¥è¿›ä¸€æ­¥å‡çº§ï¼š</p>
<blockquote>
<p><strong>ä»¥ Developer Experience ä¸ºæ ¸å¿ƒï¼Œå°½å¯èƒ½è´´è¿‘è‡ªç„¶è¯­è¨€ï¼Œå¹¶æŠŠç¿»è¯‘è´¨é‡äº¤ç»™æ›´â€œç†è§£ä¸Šä¸‹æ–‡â€çš„æ¨¡å‹ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-3">3.1 è¯­æ³•å±‚é¢çš„å–èˆï¼šå›å½’è‡ªç„¶è¯­è¨€</h3>
<p>é¦–å…ˆï¼Œä¸€ä¸ªå…³é”®å†³ç­–æ˜¯ï¼š<strong>ä¸å†å¼ºåˆ¶å¼€å‘è€…æ‰‹åŠ¨å®šä¹‰ Key</strong>ã€‚</p>
<p>ä»£ç ä¸­çš„å›½é™…åŒ–è°ƒç”¨ï¼Œåº”è¯¥å°½é‡æ¥è¿‘è‡ªç„¶è¯­è¨€æœ¬èº«ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åŸºç¡€ç”¨æ³•ï¼šç›´æ¥ä½¿ç”¨ä¸­æ–‡</span>
<span class="hljs-keyword">const</span> msg = t<span class="hljs-string">`ä½ å¥½`</span>;

<span class="hljs-comment">// å¸¦ä¸Šä¸‹æ–‡çš„ç”¨æ³•</span>
<span class="hljs-keyword">const</span> status = <span class="hljs-title function_">t</span>(<span class="hljs-string">"å¾…å®¡æ ¸"</span>, <span class="hljs-string">"é‡‘èé£æ§ä¸šåŠ¡çŠ¶æ€"</span>);
</code></pre>
<p>è¿™æ ·çš„è¯­æ³•å¸¦æ¥å‡ ä¸ªç›´æ¥æ”¶ç›Šï¼š</p>
<ul>
<li>æ–‡æ¡ˆåœ¨ä»£ç ä¸­æ˜¯å¯è¯»çš„ï¼Œè€Œä¸æ˜¯æŠ½è±¡çš„ Key</li>
<li>Code Review æ—¶æ— éœ€åœ¨ JSON æ–‡ä»¶å’Œä¸šåŠ¡ä»£ç ä¹‹é—´æ¥å›åˆ‡æ¢</li>
<li>ä¸Šä¸‹æ–‡ä¿¡æ¯å¯ä»¥æ˜¾å¼ä¼ é€’ç»™ç¿»è¯‘ç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-4">3.2 æ›´åˆç†çš„ Key ç”Ÿæˆç­–ç•¥</h3>
<p>åœ¨ç”Ÿæˆè¯­è¨€åŒ…æ—¶ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥æ”¾å¼ƒä¸å¯è¯»çš„ Hash Keyï¼Œè€Œé‡‡ç”¨ï¼š</p>
<blockquote>
<p><strong>ã€Œä¸­æ–‡åŸæ–‡ + ä¸Šä¸‹æ–‡æ³¨é‡Šã€ä½œä¸ºå”¯ä¸€æ ‡è¯†</strong></p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"å¾…å®¡æ ¸#é‡‘èé£æ§ä¸šåŠ¡çŠ¶æ€"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"english"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Pending Review"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>å¤©ç„¶é¿å…è¯­ä¹‰å†²çª</strong> åŒæ ·æ˜¯â€œå–æ¶ˆâ€ï¼Œåœ¨â€œè®¢å•æ“ä½œâ€å’Œâ€œè´¦æˆ·æ³¨é”€â€åœºæ™¯ä¸‹å¯ä»¥é€šè¿‡ä¸Šä¸‹æ–‡åŒºåˆ†</li>
<li><strong>Key æœ¬èº«å³æ–‡æ¡£</strong> è¯­è¨€åŒ…æ–‡ä»¶åœ¨äººå·¥å®¡æ ¸æ—¶éå¸¸ç›´è§‚</li>
<li><strong>æ›´é€‚åˆå¤šè¯­è¨€æ‰©å±•</strong> åœ¨åç»­ç”Ÿæˆæ—¥æ–‡ã€æ³•æ–‡ã€éŸ©æ–‡ç­‰è¯­è¨€æ—¶ï¼Œå¯ä»¥å¤ç”¨åŒä¸€å¥— Key ä½“ç³»ï¼Œæ— éœ€é¢å¤–ç»´æŠ¤æ˜ å°„å…³ç³»</li>
</ul>
<h3 data-id="heading-5">3.3 è™šæ‹Ÿæ¨¡å—ï¼šè®©ç¿»è¯‘æ•°æ®æˆä¸ºæ„å»ºäº§ç‰©</h3>
<p>ä¸ºäº†é¿å…æ‰‹åŠ¨ç®¡ç†ä¸­é—´æ–‡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨ Vite / Rollup çš„ <strong>Virtual Moduleï¼ˆè™šæ‹Ÿæ¨¡å—ï¼‰</strong> èƒ½åŠ›ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œæ’ä»¶å¯ä»¥åœ¨æ„å»ºé˜¶æ®µåŠ¨æ€ç”Ÿæˆä¸€ä¸ªæ¨¡å—ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { t } <span class="hljs-keyword">from</span> <span class="hljs-string">"virtual:ai-i18n"</span>;
</code></pre>
<p>æ„å»ºå·¥å…·ä¼šæ‹¦æˆªè¯¥å¯¼å…¥ï¼Œå¹¶è¿”å›ç”±æ’ä»¶å®æ—¶ç”Ÿæˆçš„è¿è¡Œæ—¶ä»£ç ï¼Œå…¶ä¸­å·²ç»åŒ…å«ï¼š</p>
<ul>
<li>å½“å‰è¯­è¨€åŒ…</li>
<li><code>t</code>ã€<code>setLang</code> ç­‰è¾…åŠ©å‡½æ•°</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼š</p>
<ul>
<li>ç¿»è¯‘æ•°æ®æˆä¸ºæ„å»ºæµç¨‹çš„ä¸€éƒ¨åˆ†</li>
<li>ä¸éœ€è¦å…³å¿ƒ JSON æ–‡ä»¶çš„åŠ è½½å’ŒåŒæ­¥é—®é¢˜</li>
<li>å·¥ç¨‹ç»“æ„æ›´åŠ æ¸…æ™°</li>
</ul>
<p><strong>è™šæ‹Ÿæ¨¡å—çš„è®¾è®¡æ„ä¹‰</strong>ï¼š</p>
<ol>
<li><strong>è¯­è¨€åŒ…å±äºæ„å»ºäº§ç‰©ï¼Œè€Œä¸æ˜¯æºç æ–‡ä»¶</strong></li>
<li><strong>æ— éœ€ç”Ÿæˆä¸­é—´æ–‡ä»¶ï¼Œä¹Ÿæ— éœ€ commit</strong></li>
<li><strong>æå¤§æå‡å¼€å‘è€…ä½“éªŒ</strong>ï¼Œè®©æ–‡æ¡ˆå†™ä½œåƒåŸç”Ÿè¯­è¨€ç‰¹æ€§ä¸€æ ·è‡ªç„¶</li>
</ol>
<h3 data-id="heading-6">3.4 è‡ªåŠ¨å¯¼å…¥ï¼Œè¿›ä¸€æ­¥å‹ç¼©å¿ƒæ™ºè´Ÿæ‹…</h3>
<p>é…åˆ <code>unplugin-auto-import</code>ï¼Œç”šè‡³å¯ä»¥çœç•¥æ˜¾å¼çš„ importï¼š</p>
<pre><code class="hljs language-ts" lang="ts">t<span class="hljs-string">`ä½ å¥½`</span>;
</code></pre>
<p>ä»å¼€å‘ä½“éªŒä¸Šçœ‹ï¼Œè¿™å·²ç»æ¥è¿‘â€œåŸç”Ÿå†™æ–‡æ¡ˆâ€çš„æ„Ÿè§‰ã€‚</p>
<h2 data-id="heading-7">4. æ’ä»¶é€‰é¡¹ï¼šç›®æ ‡è¯­è¨€ä¸é»˜è®¤è¯­è¨€</h2>
<p>æ’ä»¶æä¾›çµæ´»é…ç½®ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">aiI18nPlugin</span>({
  <span class="hljs-attr">targetLangs</span>: [<span class="hljs-string">"english"</span>, <span class="hljs-string">"ja"</span>, <span class="hljs-string">"fr"</span>], <span class="hljs-comment">// æ‰€æœ‰éœ€è¦ç”Ÿæˆçš„ç›®æ ‡è¯­è¨€</span>
  <span class="hljs-attr">defaultLang</span>: <span class="hljs-string">"english"</span>, <span class="hljs-comment">// é»˜è®¤ç¿»è¯‘è¯­è¨€</span>
});
</code></pre>
<ul>
<li>å¦‚æœæœªä¼  <code>defaultLang</code>ï¼Œé»˜è®¤ä½¿ç”¨ <code>'english'</code></li>
<li><code>targetLangs</code> è‡³å°‘åŒ…å«é»˜è®¤è¯­è¨€</li>
<li>åç»­ç”Ÿæˆè¯­è¨€åŒ…çš„ç»“æ„ç»Ÿä¸€ä¸ºå•æ–‡ä»¶ JSON</li>
</ul>
<h2 data-id="heading-8">5. æ’ä»¶è¾“å‡ºæ–‡ä»¶ï¼šå• JSON + å¯äººå·¥æ ¡å‡†</h2>
<p>ä¸ºäº†æœ€å¤§åŒ–å¯ç»´æŠ¤æ€§ï¼Œè¾“å‡ºè¯­è¨€åŒ…ä¸ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">locales/i18n.json
</code></pre>
<p>æ ¼å¼ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"æäº¤#è¡¨å•æ“ä½œ"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"english"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Submit"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"ja"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"fr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"å¾…å®¡æ ¸#é‡‘èé£æ§ä¸šåŠ¡çŠ¶æ€"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"english"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Pending Review"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li><strong>å•æ–‡ä»¶ç®¡ç†</strong>ï¼šé¿å…å¤šè¯­è¨€æ–‡ä»¶åˆ†æ•£ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ä¸å®¡æ ¸</li>
<li><strong>åªå¤„ç†æœªç¿»è¯‘ Key</strong>ï¼šæ’ä»¶ä¸ä¼šè¦†ç›–å·²æœ‰ç¿»è¯‘</li>
<li><strong>æ”¯æŒäººå·¥æ ¡å‡†</strong>ï¼šä½ å¯ä»¥åœ¨ <code>locales/i18n.json</code> ä¸­ç›´æ¥ä¿®æ”¹æˆ–è¡¥å……ç¿»è¯‘</li>
<li><strong>å¢é‡æ›´æ–°</strong>ï¼šæ¯æ¬¡æ„å»ºåªç”Ÿæˆç¼ºå¤±ç¿»è¯‘ï¼Œä¿è¯å†å²ç¿»è¯‘å®‰å…¨</li>
</ul>
<h2 data-id="heading-9">6. ä¸ºä»€ä¹ˆè¿™é‡Œé€‰æ‹© LLMï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿç¿»è¯‘ APIï¼Ÿ</h2>
<p>å¼•å…¥ LLM å¹¶ä¸æ˜¯ä¸ºäº†è¿½é€æ¦‚å¿µï¼Œè€Œæ˜¯ä¸ºäº†è§£å†³ä¼ ç»Ÿç¿»è¯‘ API çš„ç»“æ„æ€§çŸ­æ¿ã€‚</p>
<h3 data-id="heading-10">6.1 é¢†åŸŸè¯­ä¹‰çš„ç†è§£èƒ½åŠ›</h3>
<p>é€šè¿‡ Prompt Engineeringï¼Œå¯ä»¥æ˜¾å¼å‘Šè¯‰æ¨¡å‹å½“å‰çš„ä¸šåŠ¡èƒŒæ™¯ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>é‡‘èé£æ§ç³»ç»Ÿ</li>
<li>SaaS ç®¡ç†åå°</li>
<li>ç”µå•†äº¤æ˜“æµç¨‹</li>
</ul>
<p>é…åˆ Few-Shot ç¤ºä¾‹æˆ–æœ¯è¯­è¡¨æ³¨å…¥ï¼Œç”Ÿæˆçš„ç¿»è¯‘åœ¨<strong>å‡†ç¡®æ€§å’Œä¸“ä¸šåº¦</strong>ä¸Šï¼Œæ˜æ˜¾ä¼˜äºé€šç”¨ APIã€‚</p>
<h3 data-id="heading-11">6.2 æˆæœ¬ä¸éšç§çš„å¯æ§æ€§</h3>
<p>ç¿»è¯‘ä»»åŠ¡æœ¬èº«æ˜¯ä½å¤æ‚åº¦ä»»åŠ¡ï¼Œéå¸¸é€‚åˆï¼š</p>
<ul>
<li>æœ¬åœ°è¿è¡Œ 4B~8B çº§åˆ«æ¨¡å‹ï¼ˆå¦‚ Qwenã€Llama ç³»åˆ—ï¼‰</li>
<li>é€šè¿‡ Ollama ç­‰å·¥å…·è¿›è¡Œéƒ¨ç½²</li>
<li>ç»“åˆ LangChain è¿›è¡Œæ‰¹å¤„ç†è°ƒç”¨</li>
</ul>
<p>è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ— ç½‘ç»œä¾èµ–ï¼Œéšç§å¯æ§</li>
<li>æ— è°ƒç”¨è´¹ç”¨</li>
<li>æ‰¹é‡ç¿»è¯‘æ•ˆç‡é«˜</li>
</ul>
<p>åœ¨ä¼ä¸šç¯å¢ƒä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ›¿æ¢ä¸º GPT-4ã€DeepSeek ç­‰å•†ä¸š APIï¼Œæ–¹æ¡ˆæœ¬èº«å¹¶ä¸å—é™ã€‚</p>
<h2 data-id="heading-12">7. æ’ä»¶å®ç°è¦ç‚¹ï¼ˆVite Pluginï¼‰</h2>
<p>æ’ä»¶çš„æ ¸å¿ƒèŒè´£å¯ä»¥å½’çº³ä¸ºä¸¤ç‚¹ï¼š</p>
<ol>
<li><strong>æ”¶é›†éœ€è¦ç¿»è¯‘çš„æ–‡æ¡ˆ</strong></li>
<li><strong>åœ¨åˆé€‚çš„æ—¶æœºæ‰¹é‡è°ƒç”¨ LLMï¼Œå¹¶æŒä¹…åŒ–ç»“æœåˆ°å•æ–‡ä»¶ JSON</strong></li>
</ol>
<p>å…³é”®å®ç°ç»†èŠ‚åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç¿»è¯‘é˜Ÿåˆ—ä¸æ‰¹å¤„ç†æœºåˆ¶</li>
<li>æœ¬åœ°ç¼“å­˜ä¸æŒä¹…åŒ–</li>
<li>é¿å…é‡å¤ç¿»è¯‘å·²å­˜åœ¨ Key</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * vite-plugin-ai-i18n.ts
 *
 * è¯´æ˜ï¼š
 * è¿™æ˜¯ä¸€ä¸ªç”¨äºè§£é‡Š AI i18n æ’ä»¶æ ¸å¿ƒæµç¨‹çš„ä¼ªä»£ç ç¤ºä¾‹ã€‚
 * é‡ç‚¹åœ¨äºæ¶æ„ã€æ•°æ®æµå’Œè®¾è®¡æ€è·¯ï¼Œè€Œéå…·ä½“ API æˆ–å¯è¿è¡Œå®ç°ã€‚
 */</span>

<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">"fs"</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">"path"</span>;

<span class="hljs-comment">// -------------------------</span>
<span class="hljs-comment">// è™šæ‹Ÿæ¨¡å—å®šä¹‰</span>
<span class="hljs-comment">// -------------------------</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VIRTUAL_MODULE_ID</span> = <span class="hljs-string">"virtual:ai-i18n"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RESOLVED_VIRTUAL_MODULE_ID</span> = <span class="hljs-string">"\0"</span> + <span class="hljs-variable constant_">VIRTUAL_MODULE_ID</span>;

<span class="hljs-comment">// -------------------------</span>
<span class="hljs-comment">// è¾“å‡ºæ–‡ä»¶ä¸é»˜è®¤è¯­è¨€</span>
<span class="hljs-comment">// -------------------------</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOCALES_DIR</span> = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), <span class="hljs-string">"locales"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LOCALE_FILE</span> = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">LOCALES_DIR</span>, <span class="hljs-string">"i18n.json"</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DEFAULT_LANG</span> = <span class="hljs-string">"english"</span>;

<span class="hljs-comment">// -------------------------</span>
<span class="hljs-comment">// ç±»å‹å®šä¹‰ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-comment">// -------------------------</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Lang</span> = <span class="hljs-built_in">string</span>;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">TranslationKey</span> = <span class="hljs-built_in">string</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PendingItem</span> {
  <span class="hljs-attr">key</span>: <span class="hljs-title class_">TranslationKey</span>; <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†ï¼šåŸæ–‡#ä¸Šä¸‹æ–‡</span>
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// åŸæ–‡</span>
  context?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯é€‰ä¸Šä¸‹æ–‡ä¿¡æ¯</span>
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">LangMessages</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">Lang</span>, <span class="hljs-built_in">string</span>&gt;;
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AllMessages</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">TranslationKey</span>, <span class="hljs-title class_">LangMessages</span>&gt;;

<span class="hljs-comment">// -------------------------</span>
<span class="hljs-comment">// å·¥å…·å‡½æ•°ï¼ˆä¼ªå®ç°ï¼‰</span>
<span class="hljs-comment">// -------------------------</span>

<span class="hljs-comment">/**
 * è¯»å–å·²æœ‰ JSON è¯­è¨€åŒ…
 * å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºå¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">loadLocales</span>(<span class="hljs-params"/>): <span class="hljs-title class_">AllMessages</span> {
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(<span class="hljs-variable constant_">LOCALE_FILE</span>)) <span class="hljs-keyword">return</span> {};
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-variable constant_">LOCALE_FILE</span>, <span class="hljs-string">"utf-8"</span>));
}

<span class="hljs-comment">/**
 * å°†æœ€ç»ˆè¯­è¨€åŒ…å†™å…¥æœ¬åœ° JSON
 * è‡ªåŠ¨åˆ›å»ºç›®å½•
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">saveLocales</span>(<span class="hljs-params">messages: AllMessages</span>) {
  <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(<span class="hljs-variable constant_">LOCALES_DIR</span>)) fs.<span class="hljs-title function_">mkdirSync</span>(<span class="hljs-variable constant_">LOCALES_DIR</span>);
  fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-variable constant_">LOCALE_FILE</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(messages, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
}

<span class="hljs-comment">/**
 * æ‰«ææºç ä¸­æ‰€æœ‰ t(...) / t`...` çš„è°ƒç”¨
 * å®é™…å®ç°åº”ä½¿ç”¨ AST
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">scanForI18nTexts</span>(<span class="hljs-params">code: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">PendingItem</span>[] {
  <span class="hljs-comment">// ä¼ªé€»è¾‘ç¤ºæ„ï¼š</span>
  <span class="hljs-comment">// 1. éå†ä»£ç  AST</span>
  <span class="hljs-comment">// 2. æ‰¾åˆ° t`xxx` æˆ– t('xxx', 'context')</span>
  <span class="hljs-comment">// 3. è¿”å› PendingItem åˆ—è¡¨</span>
  <span class="hljs-keyword">return</span> [];
}

<span class="hljs-comment">// -------------------------</span>
<span class="hljs-comment">// æ’ä»¶ä¸»é€»è¾‘</span>
<span class="hljs-comment">// -------------------------</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">aiI18nPlugin</span>(<span class="hljs-params">options: {
  targetLangs?: Lang[]; // ç›®æ ‡è¯­è¨€åˆ—è¡¨
  defaultLang?: Lang; // é»˜è®¤è¯­è¨€
}</span>) {
  <span class="hljs-keyword">const</span> defaultLang = options.<span class="hljs-property">defaultLang</span> || <span class="hljs-variable constant_">DEFAULT_LANG</span>;
  <span class="hljs-keyword">const</span> targetLangs = options.<span class="hljs-property">targetLangs</span> || [defaultLang];

  <span class="hljs-comment">// åŠ è½½å·²æœ‰ç¿»è¯‘ï¼ˆäººå·¥å¯æ ¡å‡†ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">allMessages</span>: <span class="hljs-title class_">AllMessages</span> = <span class="hljs-title function_">loadLocales</span>();

  <span class="hljs-comment">// å¾…ç¿»è¯‘é˜Ÿåˆ—ï¼Œåªæ”¶é›†å°šæœªå­˜åœ¨çš„ Key</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">pendingQueue</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">PendingItem</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"vite-plugin-ai-i18n"</span>,

    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-comment">// è™šæ‹Ÿæ¨¡å—è§£æ</span>
    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-title function_">resolveId</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-keyword">if</span> (id === <span class="hljs-variable constant_">VIRTUAL_MODULE_ID</span>) <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">RESOLVED_VIRTUAL_MODULE_ID</span>;
    },

    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-comment">// è™šæ‹Ÿæ¨¡å—åŠ è½½</span>
    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-title function_">load</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-keyword">if</span> (id === <span class="hljs-variable constant_">RESOLVED_VIRTUAL_MODULE_ID</span>) {
        <span class="hljs-comment">// è¿™é‡Œè¿”å›è¿è¡Œæ—¶ä»£ç ï¼š</span>
        <span class="hljs-comment">// - messages: å½“å‰è¯­è¨€åŒ…</span>
        <span class="hljs-comment">// - t: ç¿»è¯‘å‡½æ•°</span>
        <span class="hljs-comment">// - setLang/getCurrentLang: è¯­è¨€åˆ‡æ¢å‡½æ•°</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">`
          const messages = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(allMessages)}</span>;
          let currentLang = '<span class="hljs-subst">${defaultLang}</span>';

          export function t(text, context = '') {
            const key = context ? \`\${text}#\${context}\` : text;
            return messages[key]?.[currentLang] || text;
          }

          export function setLang(lang) { currentLang = lang; }
          export function getCurrentLang() { return currentLang; }
        `</span>;
      }
    },

    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-comment">// æºç æ‰«æé˜¶æ®µ</span>
    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code: <span class="hljs-built_in">string</span>, id: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-comment">// å¿½ç•¥ node_modules</span>
      <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"node_modules"</span>)) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// æ‰«ææºç ï¼Œæ”¶é›† t(...) / t`...` è°ƒç”¨</span>
      <span class="hljs-keyword">const</span> foundItems = <span class="hljs-title function_">scanForI18nTexts</span>(code);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> foundItems) {
        <span class="hljs-comment">// key = åŸæ–‡ + å¯é€‰ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">const</span> key = item.<span class="hljs-property">context</span> ? <span class="hljs-string">`<span class="hljs-subst">${item.text}</span>#<span class="hljs-subst">${item.context}</span>`</span> : item.<span class="hljs-property">text</span>;

        <span class="hljs-comment">// é’ˆå¯¹æ¯ä¸ªç›®æ ‡è¯­è¨€ï¼Œåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨ç¿»è¯‘</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> lang <span class="hljs-keyword">of</span> targetLangs) {
          <span class="hljs-keyword">const</span> langMessages = allMessages[key] || {};
          <span class="hljs-keyword">if</span> (!langMessages[lang]) {
            <span class="hljs-comment">// å°šæœªå­˜åœ¨ç¿»è¯‘ï¼ŒåŠ å…¥å¾…ç¿»è¯‘é˜Ÿåˆ—</span>
            pendingQueue.<span class="hljs-title function_">set</span>(<span class="hljs-string">`<span class="hljs-subst">${lang}</span>:<span class="hljs-subst">${key}</span>`</span>, { ...item, key });
          }
        }
      }

      <span class="hljs-comment">// è¿”å›åŸå§‹ä»£ç ï¼Œä¸ä¿®æ”¹</span>
      <span class="hljs-keyword">return</span> code;
    },

    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-comment">// æ„å»ºç»“æŸ / æ‰¹é‡ç¿»è¯‘</span>
    <span class="hljs-comment">// -------------------------</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">buildEnd</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!pendingQueue.<span class="hljs-property">size</span>) <span class="hljs-keyword">return</span>;

      <span class="hljs-comment">// æŒ‰è¯­è¨€åˆ†ç»„</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">groupedByLang</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">Lang</span>, <span class="hljs-title class_">PendingItem</span>[]&gt; = {};
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [compoundKey, item] <span class="hljs-keyword">of</span> pendingQueue) {
        <span class="hljs-keyword">const</span> [lang] = compoundKey.<span class="hljs-title function_">split</span>(<span class="hljs-string">":"</span>);
        groupedByLang[lang] ||= [];
        groupedByLang[lang].<span class="hljs-title function_">push</span>(item);
      }

      <span class="hljs-comment">// å¯¹æ¯ä¸ªç›®æ ‡è¯­è¨€è°ƒç”¨ LLM ç¿»è¯‘ï¼ˆä¼ªé€»è¾‘ï¼‰</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> lang <span class="hljs-keyword">in</span> groupedByLang) {
        <span class="hljs-keyword">const</span> items = groupedByLang[lang];

        <span class="hljs-comment">// === è¿™é‡Œå¯ä»¥è°ƒç”¨ LLM API ===</span>
        <span class="hljs-comment">// const results = await llm.translateBatch(items)</span>

        <span class="hljs-comment">// ä¼ªç»“æœç¤ºä¾‹</span>
        <span class="hljs-keyword">const</span> <span class="hljs-attr">results</span>: { <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> }[] = [];

        <span class="hljs-comment">// å°†ç¿»è¯‘ç»“æœå†™å…¥å†…å­˜ç¼“å­˜</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { key, value } <span class="hljs-keyword">of</span> results) {
          allMessages[key] ||= {};
          allMessages[key][lang] = value;
        }
      }

      <span class="hljs-comment">// æŒä¹…åŒ–åˆ°å• JSON æ–‡ä»¶ï¼Œäººå·¥å¯æ ¡å‡†</span>
      <span class="hljs-title function_">saveLocales</span>(allMessages);

      <span class="hljs-comment">// æ¸…ç©ºé˜Ÿåˆ—ï¼Œé¿å…é‡å¤ç¿»è¯‘</span>
      pendingQueue.<span class="hljs-title function_">clear</span>();
    },
  };
}
</code></pre>
<h2 data-id="heading-13">8. å®é™…ä½¿ç”¨ä½“éªŒ</h2>
<p>å°è£…åï¼Œå¼€å‘ä¾§ä½¿ç”¨æ–¹å¼éå¸¸ç®€å•ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;div&gt;{{ t`ä½ å¥½` }}&lt;/div&gt;
&lt;button&gt;{{ t('æäº¤', 'è¡¨å•æ“ä½œ') }}&lt;/button&gt;
</code></pre>
<p>åˆ‡æ¢è¯­è¨€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">setLang</span>(<span class="hljs-string">"english"</span>);
</code></pre>
<p>æ‰©å±•æ–°è¯­è¨€ï¼ˆå¦‚æ—¥æ–‡ã€æ³•æ–‡ã€éŸ©æ–‡ï¼‰æ—¶ï¼Œåªéœ€è°ƒæ•´æ’ä»¶é…ç½®ä¸­çš„ <code>targetLangs</code>ï¼Œ<strong>æ— éœ€é¢å¤–ç»´æŠ¤ Key æˆ–å¤åˆ¶æ–‡æ¡ˆæ–‡ä»¶</strong>ã€‚</p>
<h2 data-id="heading-14">9. æ€»ç»“</h2>
<p>è¿™å¥— i18n æ–¹æ¡ˆçš„æ ¸å¿ƒä»·å€¼ä¸åœ¨äºâ€œAI ç¿»è¯‘â€æœ¬èº«ï¼Œè€Œåœ¨äºï¼š</p>
<ol>
<li><strong>æ–‡æ¡ˆå›å½’è‡ªç„¶è¯­è¨€ï¼Œè€Œä¸æ˜¯ Key</strong></li>
<li><strong>ç¿»è¯‘ä¸ç»´æŠ¤æˆæœ¬å‰ç§»åˆ°å·¥å…·é“¾</strong></li>
<li><strong>é€šè¿‡ä¸Šä¸‹æ–‡ + LLM æå‡ç¿»è¯‘è´¨é‡</strong></li>
<li><strong>å• JSON æ–‡ä»¶ + è™šæ‹Ÿæ¨¡å— + å¢é‡ç¿»è¯‘é™ä½å¤šè¯­è¨€é•¿æœŸæˆæœ¬</strong></li>
<li><strong>æ”¯æŒäººå·¥æ ¡å‡†ï¼Œåªå¤„ç†æœªç¿»è¯‘ Keyï¼Œå®‰å…¨å¯é </strong></li>
</ol>
<p>ç›®å‰è¿™ä»æ˜¯ä¸€ä¸ªæŒç»­æ¼”è¿›ä¸­çš„å®è·µæ–¹æ¡ˆï¼Œä½†åœ¨å¤æ‚ä¸šåŠ¡ã€å¤šè¯­è¨€é¡¹ç›®ä¸­ï¼Œå·²ç»å±•ç°å‡ºæ˜æ˜¾çš„å·¥ç¨‹ä»·å€¼ã€‚</p>
<p>å¦‚æœä½ å¯¹ i18nã€å·¥ç¨‹è‡ªåŠ¨åŒ–æˆ– AI åœ¨å‰ç«¯å·¥å…·é“¾ä¸­çš„åº”ç”¨æœ‰ä¸åŒçœ‹æ³•ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµå’Œæ¢è®¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»¥é€»è¾‘é—¨è§’åº¦æ·±å…¥ç†è§£promiseç»„åˆæ–¹æ³•]]></title>    <link>https://juejin.cn/post/7595896809652125736</link>    <guid>https://juejin.cn/post/7595896809652125736</guid>    <pubDate>2026-01-17T15:51:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595896809652125736" data-draft-id="7595974133097168930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»¥é€»è¾‘é—¨è§’åº¦æ·±å…¥ç†è§£promiseç»„åˆæ–¹æ³•"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T15:51:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xier123456"/> <meta itemprop="url" content="https://juejin.cn/user/546930955651113"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»¥é€»è¾‘é—¨è§’åº¦æ·±å…¥ç†è§£promiseç»„åˆæ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/546930955651113/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xier123456
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:51:41.000Z" title="Sat Jan 17 2026 15:51:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    19
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æ•°å­—ç”µè·¯è®¾è®¡ä¸­ï¼Œé€»è¾‘é—¨æ˜¯æ„å»ºå¤æ‚ç³»ç»Ÿçš„åŸºç¡€å…ƒä»¶ã€‚åŒæ ·ï¼Œåœ¨ç°ä»£ JavaScript å¼‚æ­¥ç¼–ç¨‹ä¸­ï¼ŒPromise çš„ç»„åˆæ–¹æ³•ï¼ˆ<code>all</code>ã€<code>allSettled</code>ã€<code>any</code>ã€<code>race</code>ï¼‰æ„æˆäº†å¼‚æ­¥æµç¨‹æ§åˆ¶çš„åŸºç¡€ç”µè·¯ã€‚<br/>
æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›æ–¹æ³•çš„è¡Œä¸ºæ¨¡å¼ï¼Œé€šè¿‡é€»è¾‘é—¨æ¯”å–»å»ºç«‹ç›´è§‚ç†è§£ï¼Œå¹¶å¸®åŠ©ä½ å½»åº•æŒæ¡ Promise çš„ç»„åˆæ–¹æ³•â€”â€”ç”šè‡³æ¨æ¼”å‡ºæ–°çš„æˆ–è€…ä½ æœªå‘ç°çš„å¼‚æ­¥æ§åˆ¶æ¨¡å¼ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µå®šä¹‰</h2>
<p>æˆ‘ä»¬å…ˆå»ºç«‹ç»Ÿä¸€çš„é€»è¾‘ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>Promise çŠ¶æ€æ˜ å°„</strong>ï¼š
<ul>
<li><strong>Fulfilled (1)</strong>ï¼šæˆåŠŸï¼Œå¼‚æ­¥æ“ä½œå®Œæˆå¹¶è¿”å›ç»“æœ</li>
<li><strong>Rejected (0)</strong>ï¼šå¤±è´¥ï¼Œå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯</li>
</ul>
</li>
<li><strong>è¾“å…¥å‘é‡</strong>ï¼šä¸€ä¸ª Promise æ•°ç»„ï¼Œæ¯ä¸ª Promise æ˜¯ä¸€ä¸ªè¾“å…¥ä¿¡å·</li>
<li><strong>è¾“å‡º</strong>ï¼šä¸€ä¸ªæ–°çš„ Promiseï¼Œå…¶çŠ¶æ€ç”±è¾“å…¥å‘é‡çš„çŠ¶æ€ç»„åˆå†³å®š</li>
</ul>
<h3 data-id="heading-1">çŠ¶æ€å¸¸é‡</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PENDING</span> = <span class="hljs-string">"pending"</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">FULFILLED</span> = <span class="hljs-string">"fulfilled"</span>;  
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">REJECTED</span> = <span class="hljs-string">"rejected"</span>;     
</code></pre>
<hr/>
<h2 data-id="heading-2">1ï¸.<code>Promise.all()</code>ï¼šé€»è¾‘ä¸é—¨ï¼ˆAND Gateï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€»è¾‘è¡¨è¾¾å¼: OUTPUT = INPUTâ‚ âˆ§ INPUTâ‚‚ âˆ§ ... âˆ§ INPUTâ‚™</span>
<span class="hljs-comment">// æ‰€æœ‰è¾“å…¥ä¸º 1 æ—¶ï¼Œè¾“å‡ºä¸º 1ï¼›ä»»ä¸€è¾“å…¥ä¸º 0 æ—¶ï¼Œè¾“å‡ºä¸º 0</span>
</code></pre>
<h3 data-id="heading-3">é€»è¾‘é—¨ç±»æ¯”</h3>
<ul>
<li><strong>AND é—¨ç‰¹æ€§</strong>ï¼šå…¨é«˜ç”µå¹³ â†’ é«˜ç”µå¹³ï¼›ä»»ä¸€ä½ç”µå¹³ â†’ ä½ç”µå¹³</li>
<li><strong>å¯¹åº”è¡Œä¸º</strong>ï¼šæ‰€æœ‰ Promise æˆåŠŸæ‰æˆåŠŸï¼Œä»»ä¸€å¤±è´¥ç«‹å³å¤±è´¥</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šå¤šä¸ªä¾èµ–æ¥å£å¿…é¡»å…¨éƒ¨åŠ è½½æˆåŠŸï¼ˆå¦‚ç”¨æˆ·èµ„æ–™ + æƒé™ + é…ç½®ï¼‰</li>
</ul>
<h3 data-id="heading-4">çœŸå€¼è¡¨</h3>



































<table><thead><tr><th>Promiseâ‚</th><th>Promiseâ‚‚</th><th><code>Promise.all</code></th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>1 (æˆåŠŸ)</td><td>1 (æˆåŠŸ)</td><td>1 (æˆåŠŸ)</td><td>å…¨éƒ¨æˆåŠŸ</td></tr><tr><td>1 (æˆåŠŸ)</td><td>0 (å¤±è´¥)</td><td>0 (å¤±è´¥)</td><td>å¿«é€Ÿå¤±è´¥</td></tr><tr><td>0 (å¤±è´¥)</td><td>1 (æˆåŠŸ)</td><td>0 (å¤±è´¥)</td><td>å¿«é€Ÿå¤±è´¥</td></tr><tr><td>0 (å¤±è´¥)</td><td>0 (å¤±è´¥)</td><td>0 (å¤±è´¥)</td><td>å¿«é€Ÿå¤±è´¥</td></tr></tbody></table>
<h3 data-id="heading-5">ç‰¹æ€§</h3>
<ol>
<li><strong>å¿«é€Ÿå¤±è´¥</strong>ï¼šç¬¬ä¸€ä¸ª reject ç«‹å³ reject æ•´ä½“</li>
<li><strong>é¡ºåºç»“æœ</strong>ï¼šæˆåŠŸæ—¶æŒ‰è¾“å…¥é¡ºåºè¿”å›å€¼æ•°ç»„</li>
<li><strong>çŸ­è·¯æ±‚å€¼</strong>ï¼šå¤±è´¥åä¸å†ç­‰å¾…å…¶ä»– Promise</li>
</ol>
<h3 data-id="heading-6">å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myAll</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">iterable</span>) {
  <span class="hljs-keyword">if</span> (iterable == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> iterable[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] !== <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument is not iterable"</span>));
  }

  <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterable);
  <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>([]);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(promises.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">let</span> settledCount = <span class="hljs-number">0</span>;

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
          result[index] = value;
          settledCount++;
          <span class="hljs-keyword">if</span> (settledCount === promises.<span class="hljs-property">length</span>) <span class="hljs-title function_">resolve</span>(result);
        })
        .<span class="hljs-title function_">catch</span>(reject); <span class="hljs-comment">// ä»»ä¸€å¤±è´¥ï¼Œæ•´ä½“å¤±è´¥</span>
    });
  });
};
</code></pre>
<hr/>
<h2 data-id="heading-7">2. <code>Promise.any()</code>ï¼šé€»è¾‘æˆ–é—¨ï¼ˆOR Gateï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€»è¾‘è¡¨è¾¾å¼: OUTPUT = INPUTâ‚ âˆ¨ INPUTâ‚‚ âˆ¨ ... âˆ¨ INPUTâ‚™</span>
<span class="hljs-comment">// ä»»ä¸€è¾“å…¥ä¸º 1 æ—¶ï¼Œè¾“å‡ºä¸º 1ï¼›æ‰€æœ‰è¾“å…¥ä¸º 0 æ—¶ï¼Œè¾“å‡ºä¸º 0</span>
</code></pre>
<h3 data-id="heading-8">é€»è¾‘é—¨ç±»æ¯”</h3>
<ul>
<li><strong>OR é—¨ç‰¹æ€§</strong>ï¼šä»»ä¸€é«˜ç”µå¹³ â†’ é«˜ç”µå¹³ï¼›å…¨ä½ç”µå¹³ â†’ ä½ç”µå¹³</li>
<li><strong>å¯¹åº”è¡Œä¸º</strong>ï¼šä»»ä¸€ Promise æˆåŠŸå³æˆåŠŸï¼Œå…¨éƒ¨å¤±è´¥æ‰å¤±è´¥</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šå¤š CDN åŠ è½½èµ„æºï¼Œå–æœ€å¿«æˆåŠŸçš„å“åº”</li>
</ul>
<h3 data-id="heading-9">çœŸå€¼è¡¨</h3>



































<table><thead><tr><th>Promiseâ‚</th><th>Promiseâ‚‚</th><th><code>Promise.any</code></th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>1 (æˆåŠŸ)</td><td>1 (æˆåŠŸ)</td><td>1 (æˆåŠŸ)</td><td>ä»»ä¸€æˆåŠŸå³å¯</td></tr><tr><td>1 (æˆåŠŸ)</td><td>0 (å¤±è´¥)</td><td>1 (æˆåŠŸ)</td><td>ä»»ä¸€æˆåŠŸå³å¯</td></tr><tr><td>0 (å¤±è´¥)</td><td>1 (æˆåŠŸ)</td><td>1 (æˆåŠŸ)</td><td>ä»»ä¸€æˆåŠŸå³å¯</td></tr><tr><td>0 (å¤±è´¥)</td><td>0 (å¤±è´¥)</td><td>0 (å¤±è´¥)</td><td>å…¨éƒ¨å¤±è´¥</td></tr></tbody></table>
<h3 data-id="heading-10">ç‰¹æ€§</h3>
<ol>
<li><strong>å¿«é€ŸæˆåŠŸ</strong>ï¼šç¬¬ä¸€ä¸ª fulfill ç«‹å³ resolve æ•´ä½“</li>
<li><strong>AggregateError</strong>ï¼šå…¨éƒ¨å¤±è´¥æ—¶ï¼Œèšåˆæ‰€æœ‰é”™è¯¯</li>
<li><strong>ä¹è§‚ç­–ç•¥</strong>ï¼šä¼˜å…ˆå¯»æ‰¾æˆåŠŸè·¯å¾„</li>
</ol>
<h3 data-id="heading-11">å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myAny</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">iterable</span>) {
  <span class="hljs-keyword">if</span> (iterable == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> iterable[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] !== <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument is not iterable"</span>));
  }

  <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterable);
  <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>([], <span class="hljs-string">"All promises were rejected"</span>)
    );
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> errors = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(promises.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">let</span> settledCount = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> resolved = <span class="hljs-literal">false</span>;

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
          <span class="hljs-keyword">if</span> (!resolved) {
            resolved = <span class="hljs-literal">true</span>;
            <span class="hljs-title function_">resolve</span>(value); <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæˆåŠŸå³è¿”å›</span>
          }
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> {
          errors[index] = reason;
          settledCount++;
          <span class="hljs-keyword">if</span> (settledCount === promises.<span class="hljs-property">length</span> &amp;&amp; !resolved) {
            <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>(errors, <span class="hljs-string">"All promises were rejected"</span>));
          }
        });
    });
  });
};
</code></pre>
<hr/>
<h2 data-id="heading-12">3ï¸.<code>Promise.race()</code>ï¼šé€‰æ‹©å™¨ / é”å­˜å™¨ï¼ˆSelector / Latchï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€»è¾‘è¡¨è¾¾å¼: OUTPUT = FIRST_SETTLED(INPUTâ‚, INPUTâ‚‚, ..., INPUTâ‚™)</span>
<span class="hljs-comment">// è¾“å‡ºç­‰äºç¬¬ä¸€ä¸ª settledï¼ˆfulfilled æˆ– rejectedï¼‰çš„è¾“å…¥</span>
</code></pre>
<h3 data-id="heading-13">é€»è¾‘é—¨ç±»æ¯”</h3>
<ul>
<li><strong>é€‰æ‹©å™¨ç‰¹æ€§</strong>ï¼šæ•è·ç¬¬ä¸€ä¸ªå˜åŒ–çš„ä¿¡å·</li>
<li><strong>å¯¹åº”è¡Œä¸º</strong>ï¼šè°å…ˆ settleï¼ˆæ— è®ºæˆåŠŸ/å¤±è´¥ï¼‰ï¼Œè°å†³å®šç»“æœ</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šè¶…æ—¶æ§åˆ¶ã€ç«æ€è¯·æ±‚ã€æœ€å¿«å“åº”è·å–</li>
</ul>
<h3 data-id="heading-14">è¡Œä¸ºè¡¨</h3>




















<table><thead><tr><th>ç¬¬ä¸€ä¸ª settled</th><th>ç»“æœ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>fulfilled</td><td>æˆåŠŸ</td><td>è¿”å›å…¶å€¼</td></tr><tr><td>rejected</td><td>å¤±è´¥</td><td>æŠ›å‡ºå…¶é”™è¯¯</td></tr></tbody></table>
<h3 data-id="heading-15">ç‰¹æ€§</h3>
<ol>
<li><strong>èµ¢å®¶é€šåƒ</strong>ï¼šç¬¬ä¸€ä¸ª settle çš„ Promise å†³å®šä¸€åˆ‡</li>
<li><strong>å¿½ç•¥åç»­</strong>ï¼šå…¶ä½™ Promise è¢«ä¸¢å¼ƒï¼ˆä½†ä»åœ¨åå°è¿è¡Œï¼‰</li>
<li><strong>éç¡®å®šæ€§</strong>ï¼šç»“æœå–å†³äºæ‰§è¡Œæ—¶åº</li>
</ol>
<h3 data-id="heading-16">å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myRace</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">iterable</span>) {
  <span class="hljs-keyword">if</span> (iterable == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> iterable[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] !== <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument is not iterable"</span>));
  }

  <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterable);
  <span class="hljs-comment">// è§„èŒƒï¼šPromise.race([]) æ°¸è¿œ pending</span>
  <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">() =&gt;</span> {}); <span class="hljs-comment">// æ°¸ä¸ settle</span>
  }

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item).<span class="hljs-title function_">then</span>(resolve, reject);
    });
  });
};
</code></pre>
<hr/>
<h2 data-id="heading-17">4ï¸.<code>Promise.allSettled()</code>ï¼šçŠ¶æ€æ”¶é›†å™¨ï¼ˆState Collectorï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€»è¾‘è¡¨è¾¾å¼: OUTPUT = COLLECT(STATUS(INPUTâ‚), ..., STATUS(INPUTâ‚™))</span>
<span class="hljs-comment">// æ”¶é›†æ‰€æœ‰ Promise çš„æœ€ç»ˆçŠ¶æ€ï¼Œæ°¸ä¸ reject</span>
</code></pre>
<h3 data-id="heading-18">é€»è¾‘é—¨ç±»æ¯”</h3>
<ul>
<li><strong>çŠ¶æ€å¯„å­˜å™¨</strong>ï¼šè®°å½•æ¯ä¸€ä½çš„æœ€ç»ˆçŠ¶æ€ï¼Œä¸åšé€»è¾‘è¿ç®—</li>
<li><strong>å¯¹åº”è¡Œä¸º</strong>ï¼šç­‰å¾…æ‰€æœ‰ Promise settleï¼Œè¿”å›å®Œæ•´çŠ¶æ€å¿«ç…§</li>
<li><strong>å…¸å‹åœºæ™¯</strong>ï¼šæ‰¹é‡ä»»åŠ¡æ—¥å¿—ã€ç»“æœåˆ†æã€å®¹é”™æ±‡æ€»</li>
</ul>
<h3 data-id="heading-19">è¾“å‡º</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æˆåŠŸ</span>
{ <span class="hljs-attr">status</span>: <span class="hljs-string">'fulfilled'</span>, <span class="hljs-attr">value</span>: result }

<span class="hljs-comment">// å¤±è´¥</span>
{ <span class="hljs-attr">status</span>: <span class="hljs-string">'rejected'</span>, <span class="hljs-attr">reason</span>: error } 
</code></pre>
<h3 data-id="heading-20">ç‰¹æ€§</h3>
<ol>
<li><strong>æ°¸ä¸å¤±è´¥</strong>ï¼šè¿”å›çš„ Promise æ€»æ˜¯ fulfilled</li>
<li><strong>å®Œæ•´è¯Šæ–­</strong>ï¼šæ¯ä¸ª Promise çš„çŠ¶æ€å’Œæ•°æ®éƒ½å¯è¿½æº¯</li>
<li><strong>æ— çŸ­è·¯</strong>ï¼šå¿…é¡»ç­‰æ‰€æœ‰ Promise settle</li>
</ol>
<h3 data-id="heading-21">è§„èŒƒ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-property">myAllSettled</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">iterable</span>) {
  <span class="hljs-keyword">if</span> (iterable == <span class="hljs-literal">null</span> || <span class="hljs-keyword">typeof</span> iterable[<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>] !== <span class="hljs-string">"function"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeError</span>(<span class="hljs-string">"Argument is not iterable"</span>));
  }

  <span class="hljs-keyword">const</span> promises = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterable);
  <span class="hljs-keyword">if</span> (promises.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>([]);

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(promises.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">let</span> completedCount = <span class="hljs-number">0</span>;

    promises.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>) =&gt;</span> {
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(item)
        .<span class="hljs-title function_">then</span>(
          <span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> {
            result[index] = { <span class="hljs-attr">status</span>: <span class="hljs-variable constant_">FULFILLED</span>, value };
          },
          <span class="hljs-function"><span class="hljs-params">reason</span> =&gt;</span> {
            result[index] = { <span class="hljs-attr">status</span>: <span class="hljs-variable constant_">REJECTED</span>, reason }; 
          }
        )
        .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
          completedCount++;
          <span class="hljs-keyword">if</span> (completedCount === promises.<span class="hljs-property">length</span>) <span class="hljs-title function_">resolve</span>(result);
        });
    });
  });
};
</code></pre>
<hr/>
<h2 data-id="heading-22">å››æ–¹æ³•å¯¹æ¯”çŸ©é˜µ</h2>













































<table><thead><tr><th>æ–¹æ³•</th><th>é€»è¾‘ç±»æ¯”</th><th>æˆåŠŸæ¡ä»¶</th><th>å¤±è´¥æ¡ä»¶</th><th>è¾“å‡ºç±»å‹</th><th>æ˜¯å¦çŸ­è·¯</th></tr></thead><tbody><tr><td><code>Promise.all</code></td><td>AND é—¨</td><td>å…¨éƒ¨æˆåŠŸ</td><td>ä»»ä¸€å¤±è´¥</td><td>å€¼æ•°ç»„</td><td>âœ…ï¼ˆå¤±è´¥ï¼‰</td></tr><tr><td><code>Promise.any</code></td><td>OR é—¨</td><td>ä»»ä¸€æˆåŠŸ</td><td>å…¨éƒ¨å¤±è´¥</td><td>å•ä¸ªå€¼</td><td>âœ…ï¼ˆæˆåŠŸï¼‰</td></tr><tr><td><code>Promise.race</code></td><td>é€‰æ‹©å™¨</td><td>ç¬¬ä¸€ä¸ªæˆåŠŸ</td><td>ç¬¬ä¸€ä¸ªå¤±è´¥</td><td>å•ä¸ªå€¼</td><td>âœ…</td></tr><tr><td><code>Promise.allSettled</code></td><td>çŠ¶æ€å¯„å­˜å™¨</td><td>æ€»æ˜¯æˆåŠŸ</td><td>æ°¸ä¸å¤±è´¥</td><td>çŠ¶æ€å¯¹è±¡æ•°ç»„</td><td>âŒ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-23">é«˜çº§ç»„åˆæ¨¡å¼ï¼ˆå¼‚æ­¥â€œç»„åˆç”µè·¯â€ï¼‰</h2>
<h3 data-id="heading-24">1. å¸¦è¶…æ—¶çš„ AND è¿ç®—</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">allWithTimeout</span>(<span class="hljs-params">promises, timeoutMs</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises),
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span>
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Timeout'</span>)), timeoutMs)
    )
  ]);
}
<span class="hljs-comment">// ç”µè·¯ï¼šAND é—¨ + è¶…æ—¶é€‰æ‹©å™¨</span>
</code></pre>
<h3 data-id="heading-25">2. å¤šæ•°è¡¨å†³ç”µè·¯ï¼ˆMajority Voteï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">majority</span>(<span class="hljs-params">promises</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(promises).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> successes = results.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'fulfilled'</span>);
    <span class="hljs-keyword">const</span> failures = results.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">status</span> === <span class="hljs-string">'rejected'</span>);

    <span class="hljs-keyword">if</span> (successes.<span class="hljs-property">length</span> &gt; failures.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> successes.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">value</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AggregateError</span>(
        failures.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-property">reason</span>),
        <span class="hljs-string">'Majority of promises rejected'</span>
      );
    }
  });
}
<span class="hljs-comment">// ç”µè·¯ï¼šçŠ¶æ€å¯„å­˜å™¨ + æ¯”è¾ƒå™¨ + é€‰æ‹©å™¨</span>
</code></pre>
<h3 data-id="heading-26">3. ä¼˜å…ˆçº§ä»²è£å™¨ï¼ˆé¡ºåºå°è¯•ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">priorityArbitrator</span>(<span class="hljs-params">promiseFactories</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> factory <span class="hljs-keyword">of</span> promiseFactories) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">factory</span>();
    } <span class="hljs-keyword">catch</span> {
      <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// å°è¯•ä¸‹ä¸€ä¸ª</span>
    }
  }
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'All attempts failed'</span>);
}
<span class="hljs-comment">// ç”µè·¯ï¼šä¼˜å…ˆçº§ç¼–ç å™¨ + OR é—¨</span>
</code></pre>
<hr/>
<p>é€šè¿‡é€»è¾‘é—¨è§†è§’ç†è§£ Promise ç»„åˆæ–¹æ³•ï¼Œæˆ‘ä»¬èƒ½ï¼š</p>
<ol>
<li><strong>å»ºç«‹ç›´è§‰æ¨¡å‹</strong>ï¼šå°†æŠ½è±¡å¼‚æ­¥æµæ˜ å°„åˆ°ç†Ÿæ‚‰ç”µè·¯æ¦‚å¿µ</li>
<li><strong>é¢„æµ‹è¡Œä¸º</strong>ï¼šåƒåˆ†æçœŸå€¼è¡¨ä¸€æ ·æ¨ç†å¤æ‚å¼‚æ­¥é€»è¾‘</li>
<li><strong>è®¾è®¡æ–°æ¨¡å¼</strong>ï¼šå€Ÿé‰´ç”µè·¯è®¾è®¡æ€æƒ³æ„å»ºè‡ªå®šä¹‰æ§åˆ¶æµ</li>
<li><strong>è°ƒè¯•ä¼˜åŒ–</strong>ï¼šè¯†åˆ«â€œçŸ­è·¯ç‚¹â€ã€â€œç«äº‰æ¡ä»¶â€ã€â€œçŠ¶æ€ä¸¢å¤±â€ç­‰é—®é¢˜</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web å¤šåª’ä½“æŠ€æœ¯æ ˆç®€è¿°]]></title>    <link>https://juejin.cn/post/7595890117866373166</link>    <guid>https://juejin.cn/post/7595890117866373166</guid>    <pubDate>2026-01-17T15:50:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595890117866373166" data-draft-id="7596299957277081627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web å¤šåª’ä½“æŠ€æœ¯æ ˆç®€è¿°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:50:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¸©å®‡é£"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219403368"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web å¤šåª’ä½“æŠ€æœ¯æ ˆç®€è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219403368/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¸©å®‡é£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:50:55.000Z" title="Sat Jan 17 2026 15:50:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»53åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Web å¤šåª’ä½“æŠ€æœ¯æ ˆæ˜¯ç°ä»£ Web åº”ç”¨å¤„ç†éŸ³è§†é¢‘å†…å®¹çš„æŠ€æœ¯é›†åˆã€‚æœ¬æ–‡ä»æŠ€æœ¯åŸç†å‡ºå‘ï¼Œç³»ç»Ÿä»‹ç»ä»åª’ä½“é‡‡é›†ã€ç¼–è§£ç ã€ä¼ è¾“åˆ°æ’­æ”¾æ¸²æŸ“çš„å®Œæ•´æŠ€æœ¯é“¾è·¯ï¼Œæ¶µç›– getUserMediaã€MediaRecorderã€HTMLMediaElementã€MSEã€Web Audio APIã€WebCodecsã€HLS/DASHã€WebRTC ç­‰æ ¸å¿ƒ APIï¼Œä»¥åŠ DRMã€æ€§èƒ½ä¼˜åŒ–ç­‰å·¥ç¨‹å®è·µã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µä¸æœ¯è¯­</h2>
<p>åœ¨æ·±å…¥æŠ€æœ¯ç»†èŠ‚å‰ï¼Œå…ˆäº†è§£ä¸€äº›å¤šåª’ä½“é¢†åŸŸçš„æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<p><strong>åŸºç¡€æœ¯è¯­ï¼š</strong></p>
<ul>
<li><strong>ç ç‡(Bitrate)</strong>ï¼šè§†é¢‘æ¯ç§’ä¼ è¾“çš„æ•°æ®é‡ï¼Œå•ä½é€šå¸¸ä¸º Kbps/Mbpsã€‚ç ç‡è¶Šé«˜ç”»è´¨è¶Šå¥½ï¼Œä½†æ–‡ä»¶è¶Šå¤§ã€‚ä¾‹å¦‚ 1080p è§†é¢‘é€šå¸¸éœ€è¦ 5-10 Mbps ç ç‡</li>
<li><strong>å¸§ç‡(fps)</strong>ï¼šæ¯ç§’æ˜¾ç¤ºçš„ç”»é¢æ•°é‡ã€‚å¸¸è§å€¼æœ‰ 24fps(ç”µå½±)ã€30fps(æ ‡å‡†è§†é¢‘)ã€60fps(é«˜æµç•…åº¦)</li>
<li><strong>åˆ†è¾¨ç‡(Resolution)</strong>ï¼šè§†é¢‘ç”»é¢çš„åƒç´ å°ºå¯¸ï¼Œå¦‚ 1920Ã—1080(1080p)ã€3840Ã—2160(4K)</li>
<li><strong>ç¼–è§£ç å™¨(Codec)</strong>ï¼šå‹ç¼©(ç¼–ç )å’Œè§£å‹(è§£ç )éŸ³è§†é¢‘æ•°æ®çš„ç®—æ³•ï¼Œå¦‚ H.264ã€AAC</li>
</ul>
<p><strong>è§†é¢‘ç›¸å…³ï¼š</strong></p>
<ul>
<li><strong>YUV/RGB</strong>ï¼šé¢œè‰²ç©ºé—´æ ¼å¼ã€‚RGB æ¯ä¸ªåƒç´ ç”¨çº¢ç»¿è“ä¸‰è‰²è¡¨ç¤ºï¼ŒYUV åˆ†ç¦»äº®åº¦(Y)å’Œè‰²åº¦(UV)ï¼Œæ›´é€‚åˆå‹ç¼©</li>
<li><strong>I/P/B å¸§</strong>ï¼šè§†é¢‘ç¼–ç çš„ä¸‰ç§å¸§ç±»å‹
<ul>
<li>I å¸§(å…³é”®å¸§)ï¼šå®Œæ•´ç”»é¢ï¼Œè§£ç ä¸ä¾èµ–å…¶ä»–å¸§</li>
<li>P å¸§(é¢„æµ‹å¸§)ï¼šå­˜å‚¨ä¸å‰ä¸€å¸§çš„å·®å¼‚</li>
<li>B å¸§(åŒå‘å¸§)ï¼šå‚è€ƒå‰åå¸§ï¼Œå‹ç¼©ç‡æœ€é«˜</li>
</ul>
</li>
<li><strong>PTS/DTS</strong>ï¼šæ—¶é—´æˆ³ï¼Œç”¨äºéŸ³è§†é¢‘åŒæ­¥
<ul>
<li>PTS(Presentation Time Stamp)ï¼šæ˜¾ç¤ºæ—¶é—´æˆ³</li>
<li>DTS(Decode Time Stamp)ï¼šè§£ç æ—¶é—´æˆ³</li>
</ul>
</li>
</ul>
<p><strong>éŸ³é¢‘ç›¸å…³ï¼š</strong></p>
<ul>
<li><strong>PCM(Pulse Code Modulation)</strong>ï¼šè„‰å†²ç¼–ç è°ƒåˆ¶ï¼ŒéŸ³é¢‘çš„åŸå§‹æœªå‹ç¼©æ ¼å¼</li>
<li><strong>é‡‡æ ·ç‡(Sample Rate)</strong>ï¼šæ¯ç§’é‡‡æ ·æ¬¡æ•°ï¼Œå¦‚ 44.1kHz(CD éŸ³è´¨)ã€48kHz(ä¸“ä¸šéŸ³é¢‘)</li>
<li><strong>é‡‡æ ·æ·±åº¦(Bit Depth)</strong>ï¼šæ¯ä¸ªé‡‡æ ·çš„ä½æ•°ï¼Œå¦‚ 16bitã€24bitã€‚ä½æ•°è¶Šé«˜éŸ³è´¨è¶Šå¥½</li>
</ul>
<p><strong>æµåª’ä½“ç›¸å…³ï¼š</strong></p>
<ul>
<li><strong>HLS/DASH</strong>ï¼šHTTP è‡ªé€‚åº”æµåè®®ï¼Œå°†è§†é¢‘åˆ‡åˆ†æˆå°ç‰‡æ®µé€šè¿‡ HTTP ä¼ è¾“</li>
<li><strong>ABR(Adaptive Bitrate)</strong>ï¼šè‡ªé€‚åº”ç ç‡ï¼Œæ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€åˆ‡æ¢ä¸åŒç ç‡æ¡£ä½</li>
<li><strong>MSE(Media Source Extensions)</strong>ï¼šå…è®¸ JavaScript æ§åˆ¶è§†é¢‘æµçš„æ’­æ”¾</li>
<li><strong>CDN(Content Delivery Network)</strong>ï¼šå†…å®¹åˆ†å‘ç½‘ç»œï¼ŒåŠ é€Ÿè§†é¢‘ä¼ è¾“</li>
</ul>
<p><strong>å®æ—¶é€šä¿¡ç›¸å…³ï¼š</strong></p>
<ul>
<li><strong>WebRTC</strong>ï¼šWeb å®æ—¶é€šä¿¡æŠ€æœ¯ï¼Œæ”¯æŒæµè§ˆå™¨é—´ç‚¹å¯¹ç‚¹éŸ³è§†é¢‘ä¼ è¾“</li>
<li><strong>ICE/STUN/TURN</strong>ï¼šWebRTC è¿æ¥å»ºç«‹ç›¸å…³åè®®</li>
<li><strong>å»¶è¿Ÿ(Latency)</strong>ï¼šä»å‘é€ç«¯åˆ°æ¥æ”¶ç«¯çš„æ—¶é—´å·®ï¼Œå®æ—¶é€šä¿¡è¦æ±‚ä½å»¶è¿Ÿ(&lt;200ms)</li>
</ul>
<h2 data-id="heading-1">å¤šåª’ä½“å¤„ç†å…¨æµç¨‹</h2>
<p>ç†è§£ Web å¤šåª’ä½“æŠ€æœ¯æ ˆï¼Œéœ€è¦å…ˆäº†è§£å¤šåª’ä½“æ•°æ®ä»é‡‡é›†åˆ°æ’­æ”¾çš„å®Œæ•´æµç¨‹ã€‚è¿™ä¸ªæµç¨‹æ¶‰åŠå¤šä¸ªå…³é”®ç¯èŠ‚ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½æœ‰å¯¹åº”çš„ Web æŠ€æœ¯æ”¯æŒã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæµç¨‹</h3>
<pre><code class="hljs">é‡‡é›† â†’ ç¼–ç  â†’ å°è£… â†’ ä¼ è¾“ â†’ è§£å°è£… â†’ è§£ç  â†’ æ¸²æŸ“
</code></pre>
<p><strong>1. é‡‡é›†(Capture)</strong></p>
<p>ä»ç‰©ç†è®¾å¤‡è·å–åŸå§‹éŸ³è§†é¢‘æ•°æ®ï¼š</p>
<ul>
<li><strong>è§†é¢‘é‡‡é›†</strong>ï¼šæ‘„åƒå¤´è¾“å‡º YUV/RGB åŸå§‹åƒç´ æ•°æ®ã€‚æ¯ä¸ªåƒç´ åŒ…å«é¢œè‰²ä¿¡æ¯(RGB å„å  1 å­—èŠ‚)ï¼Œ1080p(1920Ã—1080)ä¸€å¸§çº¦ 6MBï¼Œ30fps è§†é¢‘æµè¾¾åˆ°çº¦ 180MB/ç§’</li>
<li><strong>éŸ³é¢‘é‡‡é›†</strong>ï¼šéº¦å…‹é£è¾“å‡º PCM(Pulse Code Modulationï¼Œè„‰å†²ç¼–ç è°ƒåˆ¶)åŸå§‹éŸ³é¢‘æ•°æ®ã€‚é‡‡æ ·ç‡é€šå¸¸ä¸º 48kHz(æ¯ç§’é‡‡æ · 48000 æ¬¡)ï¼Œ16bit é‡‡æ ·æ·±åº¦ï¼Œç«‹ä½“å£°çº¦ 192KB/ç§’</li>
</ul>
<p><strong>2. ç¼–ç (Encoding)</strong></p>
<p>åŸå§‹æ•°æ®ä½“ç§¯å·¨å¤§ï¼Œå¿…é¡»å‹ç¼©æ‰èƒ½ä¼ è¾“å’Œå­˜å‚¨ï¼š</p>
<ul>
<li><strong>è§†é¢‘ç¼–ç </strong>ï¼šH.264/H.265/VP9/AV1 ç­‰ç¼–ç å™¨å°†åŸå§‹åƒç´ å‹ç¼©ä¸ºç æµï¼Œå‹ç¼©æ¯”å¯è¾¾ 100:1
<ul>
<li><strong>I å¸§(å…³é”®å¸§ Intra Frame)</strong>ï¼šå®Œæ•´å›¾åƒï¼Œè§£ç ä¸ä¾èµ–å…¶ä»–å¸§ï¼Œæ–‡ä»¶ä½“ç§¯å¤§</li>
<li><strong>P å¸§(é¢„æµ‹å¸§ Predicted Frame)</strong>ï¼šåªå­˜å‚¨ä¸å‰ä¸€å¸§çš„å·®å¼‚ï¼ŒèŠ‚çœç©ºé—´</li>
<li><strong>B å¸§(åŒå‘é¢„æµ‹å¸§ Bi-directional Frame)</strong>ï¼šå‚è€ƒå‰åå¸§çš„å·®å¼‚ï¼Œå‹ç¼©ç‡æœ€é«˜</li>
</ul>
</li>
<li><strong>éŸ³é¢‘ç¼–ç </strong>ï¼šAAC/Opus/MP3 å°† PCM å‹ç¼©ä¸ºç æµï¼Œå‹ç¼©æ¯”çº¦ 10:1</li>
</ul>
<p><strong>3. å°è£…(Muxing)</strong></p>
<p>å°†ç¼–ç åçš„éŸ³è§†é¢‘æµã€å­—å¹•ã€å…ƒæ•°æ®ç­‰æ‰“åŒ…åˆ°å®¹å™¨æ ¼å¼ï¼š</p>
<ul>
<li><strong>MP4</strong>ï¼šæœ€é€šç”¨çš„å®¹å™¨æ ¼å¼ï¼ŒåŒ…å« ftyp/moov/mdat ç­‰ Box ç»“æ„</li>
<li><strong>WebM</strong>ï¼šå¼€æºå®¹å™¨ï¼ŒåŸºäº Matroska</li>
<li><strong>FLV</strong>ï¼šFlash Video å®¹å™¨ï¼Œé€æ¸è¢«æ·˜æ±°</li>
</ul>
<p>å®¹å™¨è´Ÿè´£å°†å¤šä¸ªæµ(éŸ³é¢‘ã€è§†é¢‘ã€å­—å¹•)äº¤ç»‡å­˜å‚¨ï¼Œå¹¶è®°å½•æ—¶é—´æˆ³(PTS/DTS)ç”¨äºåŒæ­¥ã€‚</p>
<p><strong>4. ä¼ è¾“(Transmission)</strong></p>
<p>é€šè¿‡ç½‘ç»œåè®®ä¼ è¾“åª’ä½“æ•°æ®ï¼š</p>
<ul>
<li><strong>HTTP + è‡ªé€‚åº”æµåè®®</strong>ï¼š
<ul>
<li><strong>HLS (HTTP Live Streaming)</strong>ï¼šApple æå‡ºï¼Œå°†è§†é¢‘åˆ‡åˆ†æˆ TS ç‰‡æ®µ(é€šå¸¸ 6-10 ç§’)ï¼Œé€šè¿‡ m3u8 ç´¢å¼•æ–‡ä»¶æè¿°ç‰‡æ®µåˆ—è¡¨ã€‚å®¢æˆ·ç«¯æ ¹æ®ç½‘ç»œçŠ¶å†µé€‰æ‹©ä¸åŒç ç‡çš„ç‰‡æ®µ</li>
<li><strong>DASH (Dynamic Adaptive Streaming over HTTP)</strong>ï¼šå›½é™…æ ‡å‡†ï¼Œä½¿ç”¨ MPD(Media Presentation Description)æè¿°ç‰‡æ®µï¼Œæ”¯æŒ MP4/WebM å®¹å™¨</li>
<li>è‡ªé€‚åº”åŸç†ï¼šåŒä¸€è§†é¢‘å‡†å¤‡å¤šä¸ªç ç‡ç‰ˆæœ¬(å¦‚ 480p/720p/1080p)ï¼Œå®¢æˆ·ç«¯ç›‘æµ‹å¸¦å®½åŠ¨æ€åˆ‡æ¢</li>
</ul>
</li>
<li><strong>RTP/RTCP</strong>ï¼šWebRTC å®æ—¶ä¼ è¾“åè®®ï¼ŒåŸºäº UDP ä¼ è¾“ï¼Œå®¹å¿ä¸¢åŒ…æ¢å–ä½å»¶è¿Ÿ</li>
<li><strong>WebSocket</strong>ï¼šä¿¡ä»¤é€šé“å’Œè‡ªå®šä¹‰ä¼ è¾“</li>
</ul>
<p><strong>5. è§£å°è£…(Demuxing)</strong></p>
<p>ä»å®¹å™¨æ ¼å¼ä¸­åˆ†ç¦»éŸ³è§†é¢‘æµï¼š</p>
<ul>
<li>è§£æå®¹å™¨ç»“æ„ï¼Œæå–éŸ³é¢‘æµã€è§†é¢‘æµã€å­—å¹•æµ</li>
<li>è·å–æ¯ä¸ªæµçš„ç¼–ç å‚æ•°(codecã€åˆ†è¾¨ç‡ã€ç ç‡ç­‰)</li>
</ul>
<p><strong>6. è§£ç (Decoding)</strong></p>
<p>å°†å‹ç¼©çš„ç æµè¿˜åŸä¸ºåŸå§‹æ•°æ®ï¼š</p>
<ul>
<li><strong>ç¡¬ä»¶è§£ç </strong>ï¼šè°ƒç”¨ GPU è§£ç å•å…ƒ(å¦‚ NVDECã€VideoToolboxã€MediaCodec)ï¼ŒåŠŸè€—ä½ã€æ€§èƒ½é«˜</li>
<li><strong>è½¯ä»¶è§£ç </strong>ï¼šä½¿ç”¨ CPU è§£ç ï¼Œå…¼å®¹æ€§å¥½ä½†æ€§èƒ½å—é™</li>
</ul>
<p><strong>7. æ¸²æŸ“(Rendering)</strong></p>
<p>å°†è§£ç åçš„æ•°æ®è¾“å‡ºåˆ°æ˜¾ç¤ºè®¾å¤‡ï¼š</p>
<ul>
<li><strong>è§†é¢‘æ¸²æŸ“</strong>ï¼šYUV â†’ RGB é¢œè‰²ç©ºé—´è½¬æ¢ â†’ è¾“å‡ºåˆ° Canvas/WebGL</li>
<li><strong>éŸ³é¢‘æ¸²æŸ“</strong>ï¼šPCM æ•°æ® â†’ éŸ³é¢‘é©±åŠ¨ â†’ æ‰¬å£°å™¨</li>
<li><strong>éŸ³è§†é¢‘åŒæ­¥(A/V Sync)</strong>ï¼šæ ¹æ® PTS(Presentation Time Stamp)æ—¶é—´æˆ³å¯¹é½éŸ³è§†é¢‘å¸§</li>
</ul>
<h3 data-id="heading-3">Web æŠ€æœ¯æ ˆæ˜ å°„</h3>


















































<table><thead><tr><th>ç¯èŠ‚</th><th>ç›¸å…³æŠ€æœ¯</th><th>ç« èŠ‚</th></tr></thead><tbody><tr><td>é‡‡é›†</td><td>getUserMediaã€getDisplayMedia</td><td>åª’ä½“æ•è·ä¸è¾“å…¥æŠ€æœ¯</td></tr><tr><td>ç¼–ç /è§£ç </td><td>WebCodecsã€ç¼–ç æ ¼å¼(H.264/AAC)</td><td>ç¼–è§£ç ä¸å®¹å™¨æ ¼å¼ã€åª’ä½“å¤„ç†ä¸ç¼–è¾‘æŠ€æœ¯</td></tr><tr><td>å°è£…/è§£å°è£…</td><td>å®¹å™¨æ ¼å¼(MP4/WebM)</td><td>ç¼–è§£ç ä¸å®¹å™¨æ ¼å¼</td></tr><tr><td>ä¼ è¾“</td><td>HLSã€DASHã€WebRTCã€WebSocket</td><td>æµåª’ä½“ä¼ è¾“æŠ€æœ¯ã€å®æ—¶é€šä¿¡æŠ€æœ¯</td></tr><tr><td>æ’­æ”¾æ§åˆ¶</td><td>HTMLMediaElementã€MSE</td><td>åª’ä½“æ’­æ”¾ä¸æ§åˆ¶æŠ€æœ¯</td></tr><tr><td>æ¸²æŸ“å¤„ç†</td><td>Canvasã€WebGLã€Web Audio API</td><td>åª’ä½“å¤„ç†ä¸ç¼–è¾‘æŠ€æœ¯</td></tr><tr><td>å­˜å‚¨</td><td>IndexedDBã€Blobã€Cache API</td><td>åª’ä½“å­˜å‚¨ä¸ç®¡ç†æŠ€æœ¯</td></tr><tr><td>å®‰å…¨</td><td>EMEã€DRM</td><td>å®‰å…¨ä¸ç‰ˆæƒä¿æŠ¤</td></tr></tbody></table>
<h3 data-id="heading-4">å…¸å‹åœºæ™¯æµç¨‹</h3>
<p><strong>åœºæ™¯ 1ï¼šæœ¬åœ°è§†é¢‘æ’­æ”¾</strong></p>
<pre><code class="hljs language-objectivec" lang="objectivec">ç½‘ç»œè¯·æ±‚ â†’ ä¸‹è½½ <span class="hljs-built_in">MP4</span> â†’ æµè§ˆå™¨è§£å°è£… â†’ è§£ç  â†’ æ¸²æŸ“
(HTMLMediaElement è‡ªåŠ¨å®Œæˆæ•´ä¸ªæµç¨‹)
</code></pre>
<p><strong>åœºæ™¯ 2ï¼šç›´æ’­æ¨æµ</strong></p>
<pre><code class="hljs">getUserMedia é‡‡é›† â†’ MediaRecorder ç¼–ç  â†’ WebSocket ä¼ è¾“ â†’ æœåŠ¡ç«¯è½¬å‘
</code></pre>
<p><strong>åœºæ™¯ 3ï¼šè‡ªé€‚åº”æµæ’­æ”¾(HLS/DASH)</strong></p>
<pre><code class="hljs language-scss" lang="scss">MSE è¯·æ±‚ç‰‡æ®µ â†’ åˆ†æ®µä¸‹è½½ â†’ JavaScript æ§åˆ¶è¿½åŠ æ•°æ® â†’ æµè§ˆå™¨è§£ç æ¸²æŸ“
(æ ¹æ®å¸¦å®½åŠ¨æ€åˆ‡æ¢ç ç‡)
</code></pre>
<p><strong>åœºæ™¯ 4ï¼šWebRTC è§†é¢‘é€šè¯</strong></p>
<pre><code class="hljs language-scss" lang="scss">å‘é€ç«¯ï¼šgetUserMedia é‡‡é›† â†’ ç¼–ç  â†’ RTP æ‰“åŒ… â†’ UDP ä¼ è¾“
æ¥æ”¶ç«¯ï¼šæ¥æ”¶ RTP â†’ è§£åŒ… â†’ è§£ç  â†’ æ¸²æŸ“
(ç«¯åˆ°ç«¯ä½å»¶è¿Ÿï¼Œæ— éœ€æœåŠ¡ç«¯è½¬ç )
</code></pre>
<h2 data-id="heading-5">åª’ä½“æ•è·ä¸è¾“å…¥æŠ€æœ¯</h2>
<p>åª’ä½“æ•è·ä¸è¾“å…¥æŠ€æœ¯æ˜¯ Web å¤šåª’ä½“åº”ç”¨çš„èµ·ç‚¹ï¼Œè´Ÿè´£è·å–ç”¨æˆ·è®¾å¤‡çš„éŸ³è§†é¢‘è¾“å…¥ã€‚é€šè¿‡è¿™äº› APIï¼Œæµè§ˆå™¨å¯ä»¥è®¿é—®æ‘„åƒå¤´ã€éº¦å…‹é£ã€å±å¹•ç­‰åª’ä½“æºï¼Œä¸ºè§†é¢‘ä¼šè®®ã€ç›´æ’­æ¨æµã€åœ¨çº¿å½•åˆ¶ç­‰åº”ç”¨æä¾›åŸºç¡€èƒ½åŠ›ã€‚</p>















































<table><thead><tr><th>API</th><th>ä¸»è¦åŠŸèƒ½</th><th>è¾“å…¥æº</th><th>è¾“å‡º</th><th>å…¸å‹ç”¨é€”</th></tr></thead><tbody><tr><td>getUserMedia</td><td>è®¿é—®éŸ³è§†é¢‘è®¾å¤‡</td><td>æ‘„åƒå¤´ã€éº¦å…‹é£</td><td>MediaStream</td><td>è§†é¢‘é€šè¯ã€ç›´æ’­é‡‡é›†</td></tr><tr><td>getDisplayMedia</td><td>æ•è·å±å¹•å†…å®¹</td><td>å±å¹•ã€çª—å£ã€æ ‡ç­¾é¡µ</td><td>MediaStream</td><td>å±å¹•å…±äº«ã€å½•å±</td></tr><tr><td>MediaRecorder</td><td>å½•åˆ¶åª’ä½“æµ</td><td>MediaStream</td><td>Blob(è§†é¢‘æ–‡ä»¶)</td><td>å½•åˆ¶ä¿å­˜ã€ä¸Šä¼ </td></tr><tr><td>ImageCapture</td><td>æ‹ç…§</td><td>VideoTrack</td><td>Blob/ImageBitmap</td><td>é«˜è´¨é‡æˆªå›¾ã€è¯ä»¶ç…§</td></tr><tr><td>MediaStream</td><td>æµå¯¹è±¡ç®¡ç†</td><td>-</td><td>è½¨é“æ“ä½œæ¥å£</td><td>æµçš„ç»„åˆã€æ§åˆ¶</td></tr></tbody></table>
<h3 data-id="heading-6">MediaDevices.getUserMedia - é‡‡é›†æ‘„åƒå¤´ä¸éº¦å…‹é£</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMediaDevices%2FgetUserMedia" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia" ref="nofollow noopener noreferrer"><code>getUserMedia</code></a> æ˜¯ MediaDevices API çš„æ ¸å¿ƒæ–¹æ³•ï¼Œç”¨äºè¯·æ±‚è®¿é—®ç”¨æˆ·çš„æ‘„åƒå¤´å’Œéº¦å…‹é£è®¾å¤‡ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">navigator.<span class="hljs-property">mediaDevices</span>
  .<span class="hljs-title function_">getUserMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">stream</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
    video.<span class="hljs-property">srcObject</span> = stream; <span class="hljs-comment">// å°†åª’ä½“æµç»‘å®šåˆ° video å…ƒç´ </span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ— æ³•è®¿é—®åª’ä½“è®¾å¤‡:"</span>, error);
  });
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>è®¾å¤‡è®¿é—®æ§åˆ¶</strong> - è¯·æ±‚æ‘„åƒå¤´ã€éº¦å…‹é£æƒé™ï¼Œæµè§ˆå™¨ä¼šå¼¹å‡ºæˆæƒæç¤º</li>
<li><strong>çº¦æŸå‚æ•°(Constraints)</strong> - æŒ‡å®šåˆ†è¾¨ç‡ã€å¸§ç‡ã€è®¾å¤‡ ID ç­‰å‚æ•°
<ul>
<li>è§†é¢‘çº¦æŸï¼š<code>width</code>ã€<code>height</code>ã€<code>frameRate</code>ã€<code>facingMode</code></li>
<li>éŸ³é¢‘çº¦æŸï¼š<code>echoCancellation</code>(å›å£°æ¶ˆé™¤)ã€<code>noiseSuppression</code>(å™ªå£°æŠ‘åˆ¶)ã€<code>autoGainControl</code>(è‡ªåŠ¨å¢ç›Š)</li>
</ul>
</li>
<li><strong>å¤šè®¾å¤‡æ”¯æŒ</strong> - é€šè¿‡ <code>facingMode</code> é€‰æ‹©å‰ç½®æˆ–åç½®æ‘„åƒå¤´</li>
<li><strong>è¿”å› MediaStream</strong> - è·å–åŒ…å«éŸ³è§†é¢‘è½¨é“çš„æµå¯¹è±¡ï¼Œå¯ç”¨äºæ’­æ”¾ã€å½•åˆ¶æˆ–ä¼ è¾“</li>
</ol>
<h3 data-id="heading-7">MediaDevices.getDisplayMedia - æ•è·å±å¹•å†…å®¹</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMediaDevices%2FgetDisplayMedia" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getDisplayMedia" ref="nofollow noopener noreferrer"><code>getDisplayMedia</code></a> ç”¨äºæ•è·ç”¨æˆ·å±å¹•ã€çª—å£æˆ–æ ‡ç­¾é¡µçš„å†…å®¹ï¼Œæ˜¯å®ç°å±å¹•å…±äº«åŠŸèƒ½çš„æ ¸å¿ƒ APIã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">navigator.<span class="hljs-property">mediaDevices</span>
  .<span class="hljs-title function_">getDisplayMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">stream</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
    video.<span class="hljs-property">srcObject</span> = stream; <span class="hljs-comment">// æ˜¾ç¤ºæ•è·çš„å±å¹•å†…å®¹</span>
  })
  .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ— æ³•æ•è·å±å¹•:"</span>, error);
  });
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>æ•è·æºé€‰æ‹©</strong> - æµè§ˆå™¨å¼¹å‡ºé€‰æ‹©å™¨ï¼Œç”¨æˆ·å¯é€‰æ‹©æ•´ä¸ªå±å¹•ã€ç‰¹å®šçª—å£æˆ–æµè§ˆå™¨æ ‡ç­¾é¡µ</li>
<li><strong>è§†é¢‘æ•è·</strong> - ä»¥è§†é¢‘æµå½¢å¼è·å–å±å¹•å†…å®¹ï¼Œæ”¯æŒè®¾ç½®åˆ†è¾¨ç‡å’Œå¸§ç‡</li>
<li><strong>éŸ³é¢‘æ•è·</strong> - å¯åŒæ—¶æ•è·ç³»ç»ŸéŸ³é¢‘æˆ–æ ‡ç­¾é¡µéŸ³é¢‘(æµè§ˆå™¨æ”¯æŒæœ‰é™)</li>
<li><strong>å…‰æ ‡æ•è·æ§åˆ¶</strong> - é€šè¿‡ <code>cursor</code> å‚æ•°æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºé¼ æ ‡å…‰æ ‡</li>
<li><strong>è¿”å› MediaStream</strong> - ä¸ getUserMedia ç›¸åŒçš„æµå¯¹è±¡ï¼Œå¯ç”¨äºå½•åˆ¶æˆ– WebRTC ä¼ è¾“</li>
</ol>
<h3 data-id="heading-8">MediaRecorder - å½•åˆ¶éŸ³è§†é¢‘æµ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FMediaRecorder" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/MediaRecorder" ref="nofollow noopener noreferrer"><code>MediaRecorder</code></a> ç”¨äºå°† MediaStream å½•åˆ¶ä¸ºéŸ³è§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒå®æ—¶å½•åˆ¶å’Œä¿å­˜ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> });
<span class="hljs-keyword">const</span> recorder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaRecorder</span>(stream);

<span class="hljs-keyword">const</span> chunks = [];
recorder.<span class="hljs-property">ondataavailable</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  chunks.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">data</span>); <span class="hljs-comment">// æ”¶é›†å½•åˆ¶çš„æ•°æ®å—</span>
};

recorder.<span class="hljs-property">onstop</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(chunks, { <span class="hljs-attr">type</span>: <span class="hljs-string">"video/webm"</span> }); <span class="hljs-comment">// ç”Ÿæˆè§†é¢‘æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
};

recorder.<span class="hljs-title function_">start</span>(); <span class="hljs-comment">// å¼€å§‹å½•åˆ¶</span>
<span class="hljs-comment">// recorder.stop();  // åœæ­¢å½•åˆ¶</span>
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>å½•åˆ¶ MediaStream</strong> - å°†éŸ³è§†é¢‘æµå½•åˆ¶ä¸º Blob æ•°æ®</li>
<li><strong>ç¼–ç æ ¼å¼æ”¯æŒ</strong> - æ”¯æŒ WebMã€MP4 ç­‰å®¹å™¨æ ¼å¼ï¼Œç¼–ç å™¨ä¸º VP8/VP9/H.264</li>
<li><strong>å®æ—¶æ•°æ®è¾“å‡º</strong> - é€šè¿‡ <code>dataavailable</code> äº‹ä»¶åˆ†æ®µè¾“å‡ºæ•°æ®ï¼Œæ”¯æŒæµå¼ä¿å­˜</li>
<li><strong>å½•åˆ¶æ§åˆ¶</strong> - æä¾› <code>start()</code>ã€<code>stop()</code>ã€<code>pause()</code>ã€<code>resume()</code> æ–¹æ³•</li>
<li><strong>ç ç‡æ§åˆ¶</strong> - å¯è®¾ç½® <code>videoBitsPerSecond</code> å’Œ <code>audioBitsPerSecond</code> æ§åˆ¶å½•åˆ¶è´¨é‡</li>
</ol>
<h3 data-id="heading-9">ImageCapture - æ‹ç…§ä¸å›¾åƒæ•è·</h3>
<p><code>ImageCapture</code> ç”¨äºä»è§†é¢‘æµä¸­æ•è·é«˜è´¨é‡çš„é™æ€å›¾åƒï¼Œæä¾›æ¯” Canvas æˆªå›¾æ›´ç²¾ç¡®çš„æ§åˆ¶ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span> });
<span class="hljs-keyword">const</span> track = stream.<span class="hljs-title function_">getVideoTracks</span>()[<span class="hljs-number">0</span>];
<span class="hljs-keyword">const</span> imageCapture = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageCapture</span>(track);

<span class="hljs-comment">// æ‹ç…§</span>
<span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> imageCapture.<span class="hljs-title function_">takePhoto</span>();
<span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"img"</span>);
img.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);

<span class="hljs-comment">// è·å–å½“å‰å¸§</span>
<span class="hljs-keyword">const</span> bitmap = <span class="hljs-keyword">await</span> imageCapture.<span class="hljs-title function_">grabFrame</span>();
<span class="hljs-comment">// åœ¨ Canvas ä¸­æ¸²æŸ“ ImageBitmap</span>
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>é«˜è´¨é‡æ‹ç…§</strong> - <code>takePhoto()</code> ä½¿ç”¨è®¾å¤‡çš„æœ€é«˜åˆ†è¾¨ç‡å’Œå›¾åƒå¤„ç†èƒ½åŠ›</li>
<li><strong>å®æ—¶å¸§æ•è·</strong> - <code>grabFrame()</code> å¿«é€Ÿè·å–å½“å‰è§†é¢‘å¸§çš„ ImageBitmap å¯¹è±¡</li>
<li><strong>æ‘„åƒå¤´å‚æ•°æ§åˆ¶</strong> - å¯è°ƒæ•´ç„¦è·ã€æ›å…‰ã€ç™½å¹³è¡¡ç­‰æ‘„åƒå¤´å‚æ•°(å–å†³äºç¡¬ä»¶æ”¯æŒ)</li>
<li><strong>èƒ½åŠ›æŸ¥è¯¢</strong> - é€šè¿‡ <code>getPhotoCapabilities()</code> è·å–è®¾å¤‡æ”¯æŒçš„æ‹ç…§å‚æ•°èŒƒå›´</li>
</ol>
<h3 data-id="heading-10">MediaStream - åª’ä½“æµç®¡ç†</h3>
<p><code>MediaStream</code> æ˜¯è¡¨ç¤ºéŸ³è§†é¢‘æµçš„æ ¸å¿ƒå¯¹è±¡ï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªåª’ä½“è½¨é“(MediaStreamTrack)ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">mediaDevices</span>.<span class="hljs-title function_">getUserMedia</span>({ <span class="hljs-attr">video</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">audio</span>: <span class="hljs-literal">true</span> });

<span class="hljs-comment">// è·å–è½¨é“</span>
<span class="hljs-keyword">const</span> videoTrack = stream.<span class="hljs-title function_">getVideoTracks</span>()[<span class="hljs-number">0</span>];
<span class="hljs-keyword">const</span> audioTrack = stream.<span class="hljs-title function_">getAudioTracks</span>()[<span class="hljs-number">0</span>];

<span class="hljs-comment">// åœæ­¢ç‰¹å®šè½¨é“</span>
videoTrack.<span class="hljs-title function_">stop</span>();

<span class="hljs-comment">// æ·»åŠ /ç§»é™¤è½¨é“</span>
stream.<span class="hljs-title function_">addTrack</span>(newTrack);
stream.<span class="hljs-title function_">removeTrack</span>(audioTrack);
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>è½¨é“ç®¡ç†</strong> - åŒ…å«å¤šä¸ª MediaStreamTrack(éŸ³é¢‘è½¨ã€è§†é¢‘è½¨)ï¼Œå¯ç‹¬ç«‹æ“ä½œ</li>
<li><strong>è½¨é“æ§åˆ¶</strong> - å¯ç”¨/ç¦ç”¨è½¨é“(<code>track.enabled</code>)ï¼Œåœæ­¢è½¨é“(<code>track.stop()</code>)</li>
<li><strong>çº¦æŸè°ƒæ•´</strong> - è¿è¡Œæ—¶é€šè¿‡ <code>applyConstraints()</code> ä¿®æ”¹åˆ†è¾¨ç‡ã€å¸§ç‡ç­‰å‚æ•°</li>
<li><strong>å…‹éš†æµ</strong> - <code>clone()</code> åˆ›å»ºç‹¬ç«‹çš„æµå‰¯æœ¬ï¼Œç”¨äºä¸åŒçš„å¤„ç†ç®¡é“</li>
<li><strong>äº‹ä»¶ç›‘å¬</strong> - ç›‘å¬è½¨é“æ·»åŠ (<code>addtrack</code>)ã€ç§»é™¤(<code>removetrack</code>)ç­‰äº‹ä»¶</li>
</ol>
<p><strong>MediaStreamTrack å…³é”®å±æ€§ï¼š</strong></p>
<ul>
<li><code>kind</code> - è½¨é“ç±»å‹(<code>'audio'</code> æˆ– <code>'video'</code>)</li>
<li><code>label</code> - è®¾å¤‡åç§°</li>
<li><code>enabled</code> - æ˜¯å¦å¯ç”¨(mute/unmute)</li>
<li><code>readyState</code> - è½¨é“çŠ¶æ€(<code>'live'</code> æˆ– <code>'ended'</code>)</li>
</ul>
<h3 data-id="heading-11">Blob ä¸ File - åª’ä½“æ•°æ®å°è£…</h3>
<p>Blob(Binary Large Object)æ˜¯æµè§ˆå™¨ä¸­è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„å¯¹è±¡ï¼ŒFile æ˜¯ Blob çš„å­ç±»ã€‚åª’ä½“æ•è·å’Œå½•åˆ¶çš„è¾“å‡ºé€šå¸¸æ˜¯ Blob å¯¹è±¡ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>Blob å¯¹è±¡æ˜¯å¯¹äºŒè¿›åˆ¶æ•°æ®çš„å¼•ç”¨ï¼Œä¸ç›´æ¥å°†æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œè€Œæ˜¯æŒ‰éœ€è¯»å–ã€‚<code>URL.createObjectURL()</code> ä¸º Blob åˆ›å»ºä¸´æ—¶ URLï¼Œå¯ç›´æ¥ç”¨äº <code>&lt;video&gt;</code> æ’­æ”¾æˆ–ä¸‹è½½ã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MediaRecorder è¾“å‡º Blob</span>
<span class="hljs-keyword">const</span> recorder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaRecorder</span>(stream);
<span class="hljs-keyword">const</span> chunks = [];
recorder.<span class="hljs-property">ondataavailable</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> chunks.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">data</span>);
recorder.<span class="hljs-property">onstop</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(chunks, { <span class="hljs-attr">type</span>: <span class="hljs-string">"video/webm"</span> });

  <span class="hljs-comment">// ç›´æ¥æ’­æ”¾</span>
  video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);

  <span class="hljs-comment">// ä¸‹è½½ä¿å­˜</span>
  <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"a"</span>);
  a.<span class="hljs-property">href</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
  a.<span class="hljs-property">download</span> = <span class="hljs-string">"recording.webm"</span>;
  a.<span class="hljs-title function_">click</span>();

  <span class="hljs-comment">// é‡Šæ”¾ URL</span>
  <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(blob);
};

<span class="hljs-comment">// è¯»å–æœ¬åœ°è§†é¢‘æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input[type="file"]'</span>);
input.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"change"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>]; <span class="hljs-comment">// File æ˜¯ Blob å­ç±»</span>
  video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(file);
});
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>å½•åˆ¶ä¿å­˜</strong>ï¼šMediaRecorder ç”Ÿæˆ Blobï¼Œåˆ›å»ºä¸‹è½½é“¾æ¥</li>
<li><strong>æœ¬åœ°é¢„è§ˆ</strong>ï¼šç”¨æˆ·é€‰æ‹©æ–‡ä»¶åå³æ—¶é¢„è§ˆï¼Œæ— éœ€ä¸Šä¼ æœåŠ¡å™¨</li>
<li><strong>åˆ†ç‰‡ä¸Šä¼ </strong>ï¼šblob.slice() åˆ‡åˆ†å¤§æ–‡ä»¶ï¼Œå®ç°æ–­ç‚¹ç»­ä¼ </li>
</ul>
<h2 data-id="heading-12">åª’ä½“æ’­æ”¾ä¸æ§åˆ¶æŠ€æœ¯</h2>
<p>åª’ä½“æ’­æ”¾ä¸æ§åˆ¶æŠ€æœ¯æ˜¯ Web å¤šåª’ä½“çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œä»åŸºç¡€çš„ HTML5 Video/Audio åˆ°é«˜çº§çš„æµåª’ä½“æ’­æ”¾ã€åŠ å¯†å†…å®¹ä¿æŠ¤ï¼Œä¸ºå„ç±»éŸ³è§†é¢‘åº”ç”¨æä¾›å®Œæ•´çš„æ’­æ”¾è§£å†³æ–¹æ¡ˆã€‚</p>









































<table><thead><tr><th>æŠ€æœ¯</th><th>ä¸»è¦åŠŸèƒ½</th><th>ä½¿ç”¨åœºæ™¯</th><th>æµè§ˆå™¨æ”¯æŒ</th></tr></thead><tbody><tr><td>HTMLMediaElement</td><td>åŸºç¡€æ’­æ”¾æ§åˆ¶</td><td>ç®€å•éŸ³è§†é¢‘æ’­æ”¾</td><td>å…¨å¹³å°æ”¯æŒ</td></tr><tr><td>MSE</td><td>æµåª’ä½“æ’­æ”¾</td><td>è‡ªé€‚åº”ç ç‡ã€ç›´æ’­</td><td>ç°ä»£æµè§ˆå™¨</td></tr><tr><td>EME</td><td>åŠ å¯†å†…å®¹æ’­æ”¾</td><td>DRM ä¿æŠ¤å†…å®¹</td><td>ç°ä»£æµè§ˆå™¨</td></tr><tr><td>Picture-in-Picture</td><td>ç”»ä¸­ç”»æ¨¡å¼</td><td>æ‚¬æµ®æ’­æ”¾</td><td>ä¸»æµæµè§ˆå™¨</td></tr><tr><td>MediaCapabilities</td><td>èƒ½åŠ›æ£€æµ‹</td><td>ç¼–è§£ç èƒ½åŠ›æŸ¥è¯¢</td><td>ç°ä»£æµè§ˆå™¨</td></tr></tbody></table>
<h3 data-id="heading-13">HTMLMediaElement - åŸºç¡€æ’­æ”¾ API</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FHTMLMediaElement" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement" ref="nofollow noopener noreferrer"><code>HTMLMediaElement</code></a> å°è£…äº†æµè§ˆå™¨å†…ç½®çš„åª’ä½“è§£ç å™¨å’Œæ¸²æŸ“å™¨ï¼Œå°†åº•å±‚çš„è§£å¤ç”¨ã€è§£ç ã€éŸ³è§†é¢‘åŒæ­¥ç­‰å¤æ‚æ“ä½œæŠ½è±¡ä¸ºç®€å•çš„ DOM APIã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>æµè§ˆå™¨å†…éƒ¨å®Œæˆä»¥ä¸‹æµç¨‹ï¼š</p>
<ol>
<li><strong>ç½‘ç»œè¯·æ±‚</strong> - é€šè¿‡ HTTP è¯·æ±‚è·å–åª’ä½“æ–‡ä»¶</li>
<li><strong>è§£å¤ç”¨(Demuxing)</strong> - ä»å®¹å™¨æ ¼å¼(MP4/WebM)ä¸­åˆ†ç¦»éŸ³é¢‘æµã€è§†é¢‘æµ</li>
<li><strong>è§£ç (Decoding)</strong> - ä½¿ç”¨ç¡¬ä»¶æˆ–è½¯ä»¶è§£ç å™¨è§£ç éŸ³è§†é¢‘æ•°æ®</li>
<li><strong>éŸ³è§†é¢‘åŒæ­¥(A/V Sync)</strong> - æ ¹æ® PTS(Presentation Time Stamp)åŒæ­¥éŸ³è§†é¢‘å¸§</li>
<li><strong>æ¸²æŸ“</strong> - è§†é¢‘å¸§æ¸²æŸ“åˆ° Canvas/GPUï¼ŒéŸ³é¢‘è¾“å‡ºåˆ°æ‰¬å£°å™¨</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">controls</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
video.<span class="hljs-title function_">play</span>(); <span class="hljs-comment">// è§¦å‘è§£ç å’Œæ¸²æŸ“ç®¡çº¿</span>
video.<span class="hljs-property">currentTime</span> = <span class="hljs-number">10</span>; <span class="hljs-comment">// Seek æ“ä½œï¼šå®šä½åˆ°å…³é”®å¸§ï¼Œé‡æ–°è§£ç </span>
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>ç»Ÿä¸€æ¥å£</strong> - å±è”½ä¸åŒå¹³å°(Windows/macOS/Linux)çš„è§£ç å™¨å·®å¼‚</li>
<li><strong>è‡ªåŠ¨åŒæ­¥</strong> - å†…éƒ¨ç»´æŠ¤éŸ³è§†é¢‘æ—¶é—´æˆ³å¯¹é½ï¼Œä¿è¯åŒæ­¥æ’­æ”¾</li>
<li><strong>ç¼“å†²ç®¡ç†</strong> - é¢„åŠ è½½ä¸€å®šæ—¶é•¿çš„æ•°æ®ï¼Œå¹³è¡¡åŠ è½½é€Ÿåº¦å’Œå†…å­˜å ç”¨</li>
<li><strong>Seek ä¼˜åŒ–</strong> - å®šä½åˆ°æœ€è¿‘çš„å…³é”®å¸§(I-frame)ï¼Œé¿å…è§£ç æ•´ä¸ª GOP</li>
</ol>
<h3 data-id="heading-14">Media Source Extensions - æµåª’ä½“æ’­æ”¾</h3>
<p>MSE å°†åª’ä½“æ•°æ®çš„"è·å–"å’Œ"è§£ç "åˆ†ç¦»ï¼Œè®© JavaScript æ§åˆ¶å‘è§£ç å™¨è¾“é€æ•°æ®çš„æ—¶æœºå’Œå†…å®¹ï¼Œæ‰“ç ´äº† <code>&lt;video&gt;</code> åªèƒ½æ’­æ”¾å®Œæ•´æ–‡ä»¶çš„é™åˆ¶ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¼ ç»Ÿ <code>&lt;video src="url"&gt;</code> æ¨¡å¼ä¸‹ï¼Œæµè§ˆå™¨è´Ÿè´£æ•´ä¸ªæµç¨‹ï¼šä¸‹è½½ â†’ è§£å¤ç”¨ â†’ è§£ç ã€‚MSE æ”¹å˜äº†è¿™ä¸ªæµç¨‹ï¼š</p>
<ol>
<li><strong>JavaScript æ§åˆ¶æ•°æ®æµ</strong> - é€šè¿‡ <code>SourceBuffer.appendBuffer()</code> æ‰‹åŠ¨å‘è§£ç å™¨è¾“é€æ•°æ®</li>
<li><strong>åˆ†æ®µä¼ è¾“</strong> - è§†é¢‘è¢«åˆ‡åˆ†æˆå°ç‰‡æ®µ(é€šå¸¸ 2-10 ç§’)ï¼ŒæŒ‰éœ€è·å–</li>
<li><strong>ABR(Adaptive Bitrate)å®ç°</strong> - JavaScript æ ¹æ®ç½‘ç»œå¸¦å®½é€‰æ‹©ä¸åŒç ç‡çš„ç‰‡æ®µ</li>
<li><strong>æ—¶é—´è½´æ‹¼æ¥</strong> - å¤šä¸ªç‰‡æ®µåœ¨æ—¶é—´è½´ä¸Šæ— ç¼è¿æ¥ï¼Œç”¨æˆ·æ„ŸçŸ¥ä¸ºè¿ç»­æ’­æ”¾</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> mediaSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaSource</span>();
video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(mediaSource);

mediaSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"sourceopen"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> sourceBuffer = mediaSource.<span class="hljs-title function_">addSourceBuffer</span>(<span class="hljs-string">'video/mp4; codecs="avc1.42E01E"'</span>);

  <span class="hljs-comment">// JavaScript ä¸»åŠ¨é€å…¥æ•°æ®</span>
  sourceBuffer.<span class="hljs-title function_">appendBuffer</span>(segmentData);
});
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>è§£è€¦æ•°æ®è·å–ä¸æ’­æ”¾</strong> - JavaScript å†³å®šè·å–å“ªä¸ªç‰‡æ®µã€ä½•æ—¶è·å–</li>
<li><strong>æ— ç¼ç ç‡åˆ‡æ¢</strong> - åœ¨ç‰‡æ®µè¾¹ç•Œåˆ‡æ¢ä¸åŒæ¸…æ™°åº¦ï¼Œä¸ä¸­æ–­æ’­æ”¾</li>
<li><strong>ç¼“å†²åŒºç²¾ç¡®æ§åˆ¶</strong> - é€šè¿‡ <code>remove()</code> æ¸…ç†è¿‡æœŸæ•°æ®ï¼ŒèŠ‚çœå†…å­˜</li>
<li><strong>ç›´æ’­æ”¯æŒ</strong> - æŒç»­ append æ–°æ•°æ®å®ç°æ— é™æ—¶é•¿ç›´æ’­</li>
</ol>
<h3 data-id="heading-15">Encrypted Media Extensions - åŠ å¯†å†…å®¹æ’­æ”¾</h3>
<p>EME åœ¨æµè§ˆå™¨å’Œ CDM(Content Decryption Module)ä¹‹é—´å»ºç«‹é€šä¿¡é€šé“ï¼Œè®© Web åº”ç”¨å¯ä»¥æ’­æ”¾åŠ å¯†å†…å®¹ï¼ŒåŒæ—¶ä¿è¯è§£å¯†å¯†é’¥å¯¹ JavaScript ä¸å¯è§ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>åŠ å¯†è§†é¢‘æ’­æ”¾æµç¨‹ï¼š</p>
<ol>
<li><strong>æ£€æµ‹åŠ å¯†æ•°æ®</strong> - æµè§ˆå™¨è§£æåª’ä½“æ–‡ä»¶ï¼Œå‘ç° PSSH(Protection System Specific Header)ï¼Œè§¦å‘ <code>encrypted</code> äº‹ä»¶</li>
<li><strong>é€‰æ‹© DRM ç³»ç»Ÿ</strong> - JavaScript è¯·æ±‚å¯¹åº”çš„ CDM(å¦‚ Widevine)</li>
<li><strong>è®¸å¯è¯äº¤æ¢</strong> - CDM ç”Ÿæˆè®¸å¯è¯è¯·æ±‚ â†’ å‘é€åˆ°è®¸å¯è¯æœåŠ¡å™¨ â†’ è·å–è§£å¯†å¯†é’¥</li>
<li><strong>è§£å¯†æ’­æ”¾</strong> - CDM åœ¨å®‰å…¨ç¯å¢ƒä¸­è§£å¯†æ•°æ®ï¼Œè§£å¯†åçš„æ•°æ®ç›´æ¥é€å…¥è§£ç å™¨ï¼ŒJavaScript æ— æ³•è®¿é—®</li>
</ol>
<p><strong>å®‰å…¨éš”ç¦»ï¼š</strong></p>
<ul>
<li>è§£å¯†å¯†é’¥å­˜å‚¨åœ¨ TEE(Trusted Execution Environment)æˆ–ç¡¬ä»¶å®‰å…¨æ¨¡å—ä¸­</li>
<li>è§£å¯†è¿‡ç¨‹å¯¹ JavaScript å’Œæ“ä½œç³»ç»Ÿé€æ˜ï¼Œé˜²æ­¢å¯†é’¥æ³„éœ²</li>
</ul>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"encrypted"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  navigator
    .<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">"com.widevine.alpha"</span>, config)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">access</span>) =&gt;</span> access.<span class="hljs-title function_">createMediaKeys</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">keys</span>) =&gt;</span> {
      video.<span class="hljs-title function_">setMediaKeys</span>(keys);
      <span class="hljs-comment">// è¯·æ±‚è®¸å¯è¯ï¼ŒCDM å†…éƒ¨å®Œæˆè§£å¯†</span>
    });
});
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>å¯†é’¥éš”ç¦»</strong> - è§£å¯†å¯†é’¥å¯¹ Web å±‚ä¸å¯è§ï¼Œé˜²æ­¢ç›—ç‰ˆ</li>
<li><strong>ç¡¬ä»¶åŠ é€Ÿè§£å¯†</strong> - ä½¿ç”¨ TEE/Secure Path å®ç°ç¡¬ä»¶çº§ä¿æŠ¤</li>
<li><strong>çµæ´»çš„ DRM æ–¹æ¡ˆ</strong> - æ”¯æŒ Widevine(Chrome/Android)ã€FairPlay(Safari/iOS)ã€PlayReady(Edge)</li>
<li><strong>ç¦»çº¿æ’­æ”¾</strong> - æŒä¹…åŒ–è®¸å¯è¯æ”¯æŒä¸‹è½½åç¦»çº¿è§‚çœ‹</li>
</ol>
<h3 data-id="heading-16">Picture-in-Picture - ç”»ä¸­ç”»æ¨¡å¼</h3>
<p>Picture-in-Picture å°†è§†é¢‘æ¸²æŸ“ç®¡çº¿ä»ç½‘é¡µçš„æ¸²æŸ“å±‚åˆ†ç¦»å‡ºæ¥ï¼Œåˆ›å»ºç‹¬ç«‹çš„ç³»ç»Ÿçº§æ‚¬æµ®çª—å£ï¼Œå®ç°è§†é¢‘ä¸é¡µé¢å†…å®¹çš„è§£è€¦ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>æ¸²æŸ“åˆ†ç¦»</strong> - è§†é¢‘å¸§ä¸å†æ¸²æŸ“åˆ°ç½‘é¡µçš„ Canvas å±‚ï¼Œè€Œæ˜¯è¾“å‡ºåˆ°æ“ä½œç³»ç»Ÿæä¾›çš„ç‹¬ç«‹çª—å£</li>
<li><strong>ç³»ç»Ÿé›†æˆ</strong> - æµè§ˆå™¨è°ƒç”¨æ“ä½œç³»ç»Ÿçš„çª—å£ç®¡ç† API(macOS çš„ PiPã€Windows çš„ Compact Overlay)</li>
<li><strong>Z-index æœ€é«˜</strong> - æ‚¬æµ®çª—å§‹ç»ˆå¤„äºæ‰€æœ‰çª—å£ä¹‹ä¸Šï¼ŒåŒ…æ‹¬å…¨å±åº”ç”¨</li>
<li><strong>ç‹¬ç«‹ç”Ÿå‘½å‘¨æœŸ</strong> - å…³é—­ç½‘é¡µæ ‡ç­¾ï¼Œç”»ä¸­ç”»çª—å£å¯ç»§ç»­æ’­æ”¾</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">video.<span class="hljs-title function_">requestPictureInPicture</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">pipWindow</span>) =&gt;</span> {
  <span class="hljs-comment">// è§†é¢‘å·²è½¬ç§»åˆ°ç³»ç»Ÿçª—å£</span>
});
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>ç³»ç»Ÿçº§æ‚¬æµ®</strong> - è§†é¢‘æ‚¬æµ®åœ¨æ‰€æœ‰åº”ç”¨ä¹‹ä¸Šï¼Œä¸å—æµè§ˆå™¨çª—å£é™åˆ¶</li>
<li><strong>è·¨æ ‡ç­¾é¡µæŒä¹…åŒ–</strong> - åˆ‡æ¢æ ‡ç­¾é¡µã€æœ€å°åŒ–æµè§ˆå™¨ï¼Œè§†é¢‘ç»§ç»­æ’­æ”¾</li>
<li><strong>çª—å£å°ºå¯¸æ§åˆ¶</strong> - ç”¨æˆ·å¯æ‹–æ‹½è°ƒæ•´å¤§å°ï¼ŒJavaScript å¯è¯»å–çª—å£å°ºå¯¸</li>
<li><strong>è‡ªå®šä¹‰æ§åˆ¶æŒ‰é’®</strong> - é€šè¿‡ Media Session API åœ¨ç”»ä¸­ç”»çª—å£æ·»åŠ æ“ä½œæŒ‰é’®</li>
</ol>
<h3 data-id="heading-17">åª’ä½“èƒ½åŠ›æ£€æµ‹ä¸è‡ªåŠ¨æ’­æ”¾ç­–ç•¥</h3>
<p><strong>MediaCapabilities API - èƒ½åŠ›æ£€æµ‹</strong></p>
<p>æŸ¥è¯¢æµè§ˆå™¨å¯¹ç‰¹å®šç¼–è§£ç æ ¼å¼çš„æ”¯æŒå’Œæ€§èƒ½ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æµ‹è§£ç èƒ½åŠ›</span>
navigator.<span class="hljs-property">mediaCapabilities</span>
  .<span class="hljs-title function_">decodingInfo</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"file"</span>, <span class="hljs-comment">// 'file' æˆ– 'media-source'</span>
    <span class="hljs-attr">video</span>: {
      <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/mp4; codecs="avc1.42E01E"'</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span>,
      <span class="hljs-attr">bitrate</span>: <span class="hljs-number">5000000</span>,
      <span class="hljs-attr">framerate</span>: <span class="hljs-number">30</span>,
    },
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">result</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æ”¯æŒ:"</span>, result.<span class="hljs-property">supported</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"æµç•…:"</span>, result.<span class="hljs-property">smooth</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"çœç”µ:"</span>, result.<span class="hljs-property">powerEfficient</span>);
  });
</code></pre>
<p><strong>canPlayType - åŸºç¡€æ ¼å¼æ£€æµ‹</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"video"</span>);
<span class="hljs-keyword">const</span> canPlay = video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/mp4; codecs="avc1.42E01E"'</span>);
<span class="hljs-comment">// è¿”å› 'probably' | 'maybe' | ''</span>
</code></pre>
<p><strong>è‡ªåŠ¨æ’­æ”¾ç­–ç•¥</strong></p>
<p>ç°ä»£æµè§ˆå™¨é™åˆ¶è‡ªåŠ¨æ’­æ”¾ä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€ï¼š</p>
<ol>
<li>ç”¨æˆ·ä¸é¡µé¢æœ‰è¿‡äº¤äº’</li>
<li>è§†é¢‘é™éŸ³æ’­æ”¾</li>
<li>ç”¨æˆ·åœ¨è¯¥ç«™ç‚¹æœ‰åª’ä½“æ’­æ”¾å†å²</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™éŸ³è‡ªåŠ¨æ’­æ”¾</span>
video.<span class="hljs-property">muted</span> = <span class="hljs-literal">true</span>;
video.<span class="hljs-title function_">play</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œéœ€è¦ç”¨æˆ·äº¤äº’"</span>);
});
</code></pre>
<h2 data-id="heading-18">æµåª’ä½“ä¼ è¾“æŠ€æœ¯</h2>
<p>æµåª’ä½“ä¼ è¾“æŠ€æœ¯è§£å†³éŸ³è§†é¢‘å†…å®¹å¦‚ä½•é€šè¿‡ç½‘ç»œé«˜æ•ˆä¼ è¾“å’Œæ’­æ”¾çš„é—®é¢˜ã€‚ä¸åŒäºä¸‹è½½å®Œæ•´æ–‡ä»¶åæ’­æ”¾ï¼Œæµåª’ä½“é‡‡ç”¨è¾¹ä¼ è¾“è¾¹æ’­æ”¾çš„æ–¹å¼ï¼Œåœ¨å»¶è¿Ÿã€æµç•…æ€§ã€ä¼ è¾“æˆæœ¬ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
<p>åª’ä½“æµä¼ è¾“åè®®æ ¸å¿ƒè¦è§£å†³å››ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>æµå¼ä¼ è¾“ vs å®Œæ•´æ–‡ä»¶</strong> - å°†è§†é¢‘åˆ†æ®µæˆ–æŒç»­æ¨é€æ•°æ®ï¼Œè¾¹ä¸‹è½½è¾¹æ’­æ”¾</li>
<li><strong>å®æ—¶æ€§ä¸ç¼“å†²</strong> - åœ¨å»¶è¿Ÿå’Œæµç•…æ€§ä¹‹é—´å¹³è¡¡ï¼Œç›´æ’­éœ€è¦ä½å»¶è¿Ÿï¼Œä½†ç½‘ç»œæŠ–åŠ¨éœ€è¦ç¼“å†²åŒºå¹³æ»‘</li>
<li><strong>è‡ªé€‚åº”ç ç‡(ABR)</strong> - ç½‘ç»œå¸¦å®½æ³¢åŠ¨æ—¶åŠ¨æ€åˆ‡æ¢ä¸åŒç ç‡çš„è§†é¢‘æµï¼Œä¿è¯ä¸å¡é¡¿</li>
<li><strong>ä¼ è¾“å±‚é€‰æ‹©</strong> - TCP å¯é ä½†æœ‰é˜Ÿå¤´é˜»å¡ï¼ŒUDP ä½å»¶è¿Ÿä½†å¯èƒ½ä¸¢åŒ…ï¼Œä¸åŒåœºæ™¯é€‰æ‹©ä¸åŒä¼ è¾“å±‚</li>
</ol>
<p><strong>ä¸»æµåª’ä½“æµä¼ è¾“åè®®ï¼š</strong></p>



































<table><thead><tr><th>åè®®</th><th>ä¼ è¾“æ–¹å¼</th><th>å»¶è¿Ÿ</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>HLS/DASH</td><td>HTTP è‡ªé€‚åº”æµ</td><td>6-30 ç§’</td><td>ç‚¹æ’­ã€ç›´æ’­(å¯æ¥å—å»¶è¿Ÿ)</td></tr><tr><td>FLV</td><td>HTTP æµå¼</td><td>3-10 ç§’</td><td>ä½å»¶è¿Ÿç›´æ’­</td></tr><tr><td>RTMP/RTSP</td><td>TCP æµå¼</td><td>1-3 ç§’</td><td>æœåŠ¡ç«¯æ¨æµ</td></tr><tr><td>SRT</td><td>UDP å¯é ä¼ è¾“</td><td>&lt;1 ç§’</td><td>ä¸“ä¸šç›´æ’­ä¼ è¾“</td></tr></tbody></table>
<p><strong>åº•å±‚ä¼ è¾“é€šé“(å¯ä¸ä¸Šè¿°åè®®ç»„åˆä½¿ç”¨)ï¼š</strong></p>






























<table><thead><tr><th>é€šé“</th><th>ç‰¹æ€§</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>WebSocket</td><td>åŒå‘é€šä¿¡ã€æŒä¹…è¿æ¥</td><td>ä¿¡ä»¤äº¤æ¢ã€å®æ—¶æ¶ˆæ¯</td></tr><tr><td>SSE</td><td>æœåŠ¡ç«¯æ¨é€ã€è‡ªåŠ¨é‡è¿</td><td>é€šçŸ¥æ¨é€ã€å®æ—¶æ›´æ–°</td></tr><tr><td>WebTransport</td><td>QUIC ä½å»¶è¿Ÿã€å¤šè·¯å¤ç”¨</td><td>ä½å»¶è¿Ÿæµåª’ä½“ä¼ è¾“</td></tr><tr><td>WebRTC</td><td>P2P ç›´è¿ã€ç«¯åˆ°ç«¯åŠ å¯†</td><td>å®æ—¶éŸ³è§†é¢‘é€šè¯</td></tr></tbody></table>
<h3 data-id="heading-19">HLS/DASH - HTTP è‡ªé€‚åº”æµ</h3>
<p>HLS/DASH æ˜¯æµåª’ä½“ç›´æ’­å’Œç‚¹æ’­çš„ä¸»æµæ–¹æ¡ˆï¼Œé€šè¿‡ HTTP åˆ†æ®µä¼ è¾“å®ç°å‡†å®æ—¶æ’­æ”¾ã€‚(<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc8216" target="_blank" title="https://datatracker.ietf.org/doc/html/rfc8216" ref="nofollow noopener noreferrer">HLS è§„èŒƒ</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.iso.org%2Fstandard%2F79329.html" target="_blank" title="https://www.iso.org/standard/79329.html" ref="nofollow noopener noreferrer">DASH è§„èŒƒ</a>)</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼Œè§†é¢‘æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¤§æ–‡ä»¶ï¼Œå¿…é¡»å®Œæ•´ä¸‹è½½æˆ–ä½¿ç”¨ RTMP ç­‰ä¸“ç”¨æµåè®®ã€‚HLS/DASH çš„æ ¸å¿ƒæ€æƒ³æ˜¯"åŒ–æ•´ä¸ºé›¶"ï¼š</p>
<ol>
<li>
<p><strong>æœåŠ¡ç«¯å¤„ç†æµç¨‹ï¼š</strong></p>
<ul>
<li><strong>åˆ‡ç‰‡(Segmentation)</strong> - ç¼–ç å™¨å°†è¿ç»­çš„è§†é¢‘æµæŒ‰æ—¶é—´åˆ‡åˆ†æˆç‹¬ç«‹çš„å°æ–‡ä»¶
<ul>
<li>HLSï¼šç”Ÿæˆ .ts æ–‡ä»¶(MPEG-TS å®¹å™¨)ï¼Œæ¯æ®µ 2-10 ç§’</li>
<li>DASHï¼šç”Ÿæˆ .m4s æ–‡ä»¶(fMP4 å®¹å™¨)ï¼Œæ¯æ®µ 2-10 ç§’</li>
</ul>
</li>
<li><strong>å¤šç ç‡è½¬ç </strong> - åŒä¸€å†…å®¹ç”Ÿæˆå¤šä¸ªç ç‡ç‰ˆæœ¬(å¦‚ 360p/720p/1080p)</li>
<li><strong>ç´¢å¼•æ–‡ä»¶ç”Ÿæˆ</strong> - åˆ›å»ºæè¿°ç‰‡æ®µåˆ—è¡¨çš„æ¸…å•æ–‡ä»¶
<ul>
<li>HLSï¼š.m3u8 æ–‡ä»¶ï¼Œæ–‡æœ¬æ ¼å¼ï¼Œåˆ—å‡ºæ‰€æœ‰ .ts ç‰‡æ®µçš„ URL å’Œæ—¶é•¿</li>
<li>DASHï¼š.mpd æ–‡ä»¶(XML)ï¼Œæè¿°ä¸åŒç ç‡çš„ç‰‡æ®µä½ç½®</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>å®¢æˆ·ç«¯æ’­æ”¾æµç¨‹ï¼š</strong></p>
<ul>
<li><strong>ä¸‹è½½ç´¢å¼•</strong> - è¯·æ±‚ m3u8/mpd æ–‡ä»¶ï¼Œè§£æç‰‡æ®µåˆ—è¡¨</li>
<li><strong>å¸¦å®½æ£€æµ‹</strong> - æµ‹é‡å½“å‰ç½‘ç»œé€Ÿåº¦</li>
<li><strong>ç‰‡æ®µé€‰æ‹©</strong> - æ ¹æ®å¸¦å®½é€‰æ‹©åˆé€‚ç ç‡çš„ç‰‡æ®µ URL</li>
<li><strong>ä¸‹è½½ä¸æ’­æ”¾</strong> - ä¸‹è½½ç‰‡æ®µ â†’ é€šè¿‡ MSE é€å…¥è§£ç å™¨ â†’ æ’­æ”¾</li>
<li><strong>å¾ªç¯æ›´æ–°</strong> - å®šæœŸè¯·æ±‚ç´¢å¼•æ–‡ä»¶è·å–æ–°ç‰‡æ®µ(ç›´æ’­åœºæ™¯)</li>
</ul>
</li>
<li>
<p><strong>è‡ªé€‚åº”åˆ‡æ¢æœºåˆ¶ï¼š</strong></p>
<ul>
<li>å®¢æˆ·ç«¯æŒç»­ç›‘æµ‹ä¸‹è½½é€Ÿåº¦å’Œç¼“å†²åŒºçŠ¶æ€</li>
<li>ç½‘é€Ÿä¸‹é™ï¼šåˆ‡æ¢åˆ°ä½ç ç‡ç‰‡æ®µï¼Œé¿å…å¡é¡¿</li>
<li>ç½‘é€Ÿæå‡ï¼šåˆ‡æ¢åˆ°é«˜ç ç‡ç‰‡æ®µï¼Œæå‡ç”»è´¨</li>
<li>åˆ‡æ¢å‘ç”Ÿåœ¨ç‰‡æ®µè¾¹ç•Œï¼Œç”¨æˆ·æ— æ„ŸçŸ¥</li>
</ul>
</li>
</ol>
<p><strong>å»¶è¿Ÿæ¥æºï¼š</strong></p>
<ul>
<li>åˆ‡ç‰‡æ—¶é•¿(6-10 ç§’) - å¿…é¡»ç­‰å¾…å®Œæ•´ç‰‡æ®µç”Ÿæˆ</li>
<li>æœåŠ¡ç«¯ç¼“å†²(2-3 ä¸ªç‰‡æ®µ) - ä¿è¯åˆ‡æ¢çš„å¹³æ»‘æ€§</li>
<li>å®¢æˆ·ç«¯æ’­æ”¾ç¼“å†²(1-2 ä¸ªç‰‡æ®µ) - æŠµæŠ—ç½‘ç»œæŠ–åŠ¨</li>
<li>æ€»å»¶è¿Ÿï¼š15-30 ç§’(æ ‡å‡† HLS)ï¼Œ3-5 ç§’(LL-HLS ä½å»¶è¿Ÿæ¨¡å¼)</li>
</ul>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// HLS æ’­æ”¾(ä½¿ç”¨ hls.js)</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Hls</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"hls.js"</span>;
<span class="hljs-keyword">const</span> hls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hls</span>();
hls.<span class="hljs-title function_">loadSource</span>(<span class="hljs-string">"https://example.com/live.m3u8"</span>);
hls.<span class="hljs-title function_">attachMedia</span>(video);
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>æ— éœ€ä¸“ç”¨åè®®</strong> - å¤ç”¨ HTTPï¼Œç©¿é€é˜²ç«å¢™ï¼Œåˆ©ç”¨ç°æœ‰ CDN</li>
<li><strong>å¤§è§„æ¨¡åˆ†å‘</strong> - ç‰‡æ®µä¸ºé™æ€æ–‡ä»¶ï¼ŒCDN ç¼“å­˜å‘½ä¸­ç‡é«˜</li>
<li><strong>è‡ªé€‚åº”ç ç‡</strong> - ç½‘ç»œæ³¢åŠ¨æ—¶åŠ¨æ€è°ƒæ•´ï¼Œä¿è¯æµç•…æ’­æ”¾</li>
<li><strong>æ— çŠ¶æ€</strong> - æœåŠ¡ç«¯æ— éœ€ç»´æŠ¤è¿æ¥çŠ¶æ€ï¼Œæ˜“äºæ¨ªå‘æ‰©å±•</li>
</ol>
<h3 data-id="heading-20">FLV - ä½å»¶è¿Ÿç›´æ’­æµ</h3>
<p>FLV(Flash Video)æ˜¯ Adobe è®¾è®¡çš„è½»é‡çº§å®¹å™¨æ ¼å¼ï¼Œé€šè¿‡ HTTP æµå¼ä¼ è¾“å®ç°ä½å»¶è¿Ÿç›´æ’­ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¸åŒäº HLS/DASH çš„åˆ‡ç‰‡æ¨¡å¼ï¼ŒFLV é‡‡ç”¨è¿ç»­æµå¼ä¼ è¾“ï¼š</p>
<ol>
<li><strong>æµå¼å°è£…</strong> - FLV å®¹å™¨ç»“æ„ç®€å•ï¼Œç”± FLV Header + Tag åºåˆ—ç»„æˆ
<ul>
<li>æ¯ä¸ª Tag åŒ…å«ä¸€ä¸ªè§†é¢‘å¸§ã€éŸ³é¢‘å¸§æˆ–è„šæœ¬æ•°æ®</li>
<li>Tag ä¹‹é—´ç‹¬ç«‹ï¼Œå¯ä»¥é€ä¸ªè§£æï¼Œæ— éœ€ç­‰å¾…å®Œæ•´æ–‡ä»¶</li>
</ul>
</li>
<li><strong>HTTP é•¿è¿æ¥æ¨é€</strong> - æœåŠ¡ç«¯é€šè¿‡ HTTP é•¿è¿æ¥æŒç»­æ¨é€ FLV Tag
<ul>
<li>ä½¿ç”¨ Transfer-Encoding: chunked åˆ†å—ä¼ è¾“</li>
<li>å®¢æˆ·ç«¯è¾¹æ¥æ”¶è¾¹è§£æï¼Œå®æ—¶é€å…¥è§£ç å™¨</li>
</ul>
</li>
<li><strong>æ— éœ€åˆ‡ç‰‡</strong> - æ•°æ®è¿ç»­æ¨é€ï¼Œé¿å…äº† HLS ç­‰å¾…ç‰‡æ®µç”Ÿæˆçš„å»¶è¿Ÿ</li>
<li><strong>æµè§ˆå™¨æ’­æ”¾</strong> - Flash å·²æ·˜æ±°ï¼Œç°ä»£æµè§ˆå™¨é€šè¿‡ flv.js è§£æ FLV å¹¶ç”¨ MSE æ’­æ”¾</li>
</ol>
<p><strong>å»¶è¿Ÿæ¥æºï¼š</strong></p>
<ul>
<li>ç¼–ç å»¶è¿Ÿ(1-2 ç§’) - è§†é¢‘é‡‡é›†ã€ç¼–ç </li>
<li>ç½‘ç»œä¼ è¾“(0.5-1 ç§’) - æ¨æµåˆ°æœåŠ¡å™¨ã€CDN åˆ†å‘</li>
<li>æ’­æ”¾ç¼“å†²(1-2 ç§’) - å®¢æˆ·ç«¯ç¼“å†²åŒº</li>
<li>æ€»å»¶è¿Ÿï¼š3-10 ç§’</li>
</ul>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> flvjs <span class="hljs-keyword">from</span> <span class="hljs-string">"flv.js"</span>;
<span class="hljs-keyword">const</span> player = flvjs.<span class="hljs-title function_">createPlayer</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">"flv"</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">"http://example.com/live.flv"</span>,
});
player.<span class="hljs-title function_">attachMediaElement</span>(video);
player.<span class="hljs-title function_">load</span>();
player.<span class="hljs-title function_">play</span>();
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>ä½å»¶è¿Ÿ</strong> - æ— éœ€åˆ‡ç‰‡ï¼Œè¿ç»­æ¨é€ï¼Œå»¶è¿Ÿä½äº HLS</li>
<li><strong>ç®€å•é«˜æ•ˆ</strong> - å®¹å™¨æ ¼å¼ç®€å•ï¼Œè§£æå¼€é”€å°</li>
<li><strong>HTTP ä¼ è¾“</strong> - å¤ç”¨ HTTP åè®®ï¼Œç©¿é€é˜²ç«å¢™</li>
<li><strong>é€å¸§è§£æ</strong> - Tag ç‹¬ç«‹å°è£…ï¼Œæ”¯æŒå®æ—¶æµå¼è§£æ</li>
</ol>
<h3 data-id="heading-21">RTMP/RTSP - æœåŠ¡ç«¯æ¨æµåè®®</h3>
<p>RTMP(Real-Time Messaging Protocol)å’Œ RTSP(Real-Time Streaming Protocol)æ˜¯ä¼ ç»Ÿçš„æµåª’ä½“åè®®ï¼Œä¸»è¦ç”¨äºæœåŠ¡ç«¯æ¨æµã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p><strong>RTMPï¼š</strong></p>
<ol>
<li><strong>æ¡æ‰‹åå•†</strong> - å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å»ºç«‹ TCP è¿æ¥ï¼Œæ¡æ‰‹åå•†ç‰ˆæœ¬å’Œå‚æ•°</li>
<li><strong>æ¶ˆæ¯åˆ†å—(Chunk)</strong> - å°†éŸ³è§†é¢‘æ•°æ®åˆ†å‰²ä¸ºå›ºå®šå¤§å°çš„ Chunkï¼Œäº¤ç»‡ä¼ è¾“
<ul>
<li>éŸ³é¢‘ã€è§†é¢‘ã€å…ƒæ•°æ®å…±ç”¨ä¸€ä¸ª TCP è¿æ¥</li>
<li>ä½¿ç”¨ Chunk Stream ID åŒºåˆ†ä¸åŒç±»å‹çš„æ•°æ®</li>
</ul>
</li>
<li><strong>æ—¶é—´æˆ³åŒæ­¥</strong> - æ¯ä¸ª Chunk æºå¸¦æ—¶é—´æˆ³ï¼Œæ¥æ”¶ç«¯æ ¹æ®æ—¶é—´æˆ³åŒæ­¥éŸ³è§†é¢‘</li>
<li><strong>ä½å»¶è¿Ÿä¼ è¾“</strong> - TCP ä¿è¯å¯é æ€§ï¼Œæ•°æ®å®æ—¶æ¨é€ï¼Œå»¶è¿Ÿ 1-3 ç§’</li>
</ol>
<p><strong>RTSPï¼š</strong></p>
<ol>
<li><strong>ä¼šè¯æ§åˆ¶</strong> - RTSP ç±»ä¼¼ HTTPï¼Œä½¿ç”¨æ–‡æœ¬å‘½ä»¤æ§åˆ¶æµåª’ä½“ä¼šè¯(SETUPã€PLAYã€PAUSEã€TEARDOWN)</li>
<li><strong>åª’ä½“ä¼ è¾“</strong> - RTSP æœ¬èº«ä¸ä¼ è¾“åª’ä½“æ•°æ®ï¼Œåª’ä½“é€šè¿‡ RTP/RTCP ä¼ è¾“
<ul>
<li>RTP(Real-time Transport Protocol)ï¼šä¼ è¾“éŸ³è§†é¢‘æ•°æ®åŒ…</li>
<li>RTCP(RTP Control Protocol)ï¼šç›‘æ§ä¼ è¾“è´¨é‡</li>
</ul>
</li>
<li><strong>åˆ†ç¦»æ§åˆ¶å’Œæ•°æ®</strong> - RTSP æ§åˆ¶é€šé“(TCP)å’Œ RTP æ•°æ®é€šé“(UDP)åˆ†ç¦»</li>
</ol>
<p><strong>æµè§ˆå™¨é™åˆ¶ï¼š</strong></p>
<ul>
<li>æµè§ˆå™¨åŸç”Ÿä¸æ”¯æŒ RTMP/RTSP</li>
<li>éœ€è¦æœåŠ¡ç«¯è½¬æ¢ä¸º HLS/FLV/WebRTC åæ‰èƒ½åœ¨ Web æ’­æ”¾</li>
<li>ä¸»è¦ç”¨äºæ¨æµç«¯(å¦‚ OBS æ¨æµåˆ°æœåŠ¡å™¨)</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># OBS æ¨æµåˆ° RTMP æœåŠ¡å™¨</span>
rtmp://live.example.com/app/stream_key

<span class="hljs-comment"># æœåŠ¡ç«¯å°† RTMP è½¬æ¢ä¸º HLS ä¾›æµè§ˆå™¨æ’­æ”¾</span>
ffmpeg -i rtmp://input -f hls output.m3u8
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>ä½å»¶è¿Ÿæ¨æµ</strong> - å®æ—¶ä¼ è¾“ï¼Œå»¶è¿Ÿ 1-3 ç§’</li>
<li><strong>å¯é ä¼ è¾“</strong> - åŸºäº TCPï¼Œä¿è¯æ•°æ®å®Œæ•´æ€§</li>
<li><strong>å¹¿æ³›æ”¯æŒ</strong> - æ¨æµè½¯ä»¶(OBSã€FFmpeg)ã€æµåª’ä½“æœåŠ¡å™¨(Nginx-RTMP)å¹¿æ³›æ”¯æŒ</li>
<li><strong>æˆç†Ÿç¨³å®š</strong> - åè®®æˆç†Ÿï¼Œç”Ÿæ€å®Œå–„</li>
</ol>
<h3 data-id="heading-22">SRT - å®‰å…¨å¯é ä¼ è¾“</h3>
<p>SRT(Secure Reliable Transport)æ˜¯åŸºäº UDP çš„æ–°ä¸€ä»£æµåª’ä½“ä¼ è¾“åè®®ï¼Œä¸ºä¸“ä¸šç›´æ’­åœºæ™¯è®¾è®¡ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¼ ç»Ÿ TCP åè®®åœ¨å¼±ç½‘ç¯å¢ƒä¸‹æ€§èƒ½å·®(é˜Ÿå¤´é˜»å¡ã€ä¸¢åŒ…é‡ä¼ å¯¼è‡´å»¶è¿Ÿ)ï¼Œçº¯ UDP åˆä¸å¯é ã€‚SRT åœ¨ UDP åŸºç¡€ä¸Šå®ç°äº†å¯é ä¼ è¾“æœºåˆ¶ï¼š</p>
<ol>
<li><strong>åŸºäº UDP</strong> - é¿å… TCP çš„é˜Ÿå¤´é˜»å¡é—®é¢˜</li>
<li><strong>ARQ è‡ªåŠ¨é‡ä¼ </strong> - æ£€æµ‹åˆ°ä¸¢åŒ…åï¼Œé€‰æ‹©æ€§é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…
<ul>
<li>æ¥æ”¶ç«¯å‘é€ NAK(Negative Acknowledgment)é€šçŸ¥ä¸¢åŒ…</li>
<li>å‘é€ç«¯é‡ä¼ ä¸¢å¤±çš„åŒ…ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæµ</li>
</ul>
</li>
<li><strong>å‰å‘çº é”™(FEC)</strong> - å¯é€‰çš„ FEC æœºåˆ¶ï¼Œå‘é€å†—ä½™æ•°æ®ç”¨äºçº é”™
<ul>
<li>è½»å¾®ä¸¢åŒ…å¯é€šè¿‡ FEC ç›´æ¥æ¢å¤ï¼Œæ— éœ€é‡ä¼ </li>
</ul>
</li>
<li><strong>åŠ¨æ€ç¼“å†²</strong> - æ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´ç¼“å†²åŒºå¤§å°
<ul>
<li>å¹³è¡¡å»¶è¿Ÿå’ŒæŠ—ä¸¢åŒ…èƒ½åŠ›</li>
</ul>
</li>
<li><strong>AES åŠ å¯†</strong> - å†…ç½®ç«¯åˆ°ç«¯åŠ å¯†ï¼Œä¿æŠ¤ä¼ è¾“å†…å®¹å®‰å…¨</li>
<li><strong>å¸¦å®½è‡ªé€‚åº”</strong> - æ£€æµ‹ç½‘ç»œæ‹¥å¡ï¼ŒåŠ¨æ€è°ƒæ•´å‘é€é€Ÿç‡</li>
</ol>
<p><strong>å»¶è¿Ÿç‰¹æ€§ï¼š</strong></p>
<ul>
<li>å¯é…ç½®å»¶è¿Ÿ(é€šå¸¸ 200ms-2s)</li>
<li>å»¶è¿Ÿè¶Šé«˜ï¼ŒæŠ—ä¸¢åŒ…èƒ½åŠ›è¶Šå¼º</li>
<li>é€‚åˆä¸“ä¸šç›´æ’­åœºæ™¯(æ¼”å”±ä¼šã€ä½“è‚²èµ›äº‹è½¬æ’­)</li>
</ul>
<p><strong>æµè§ˆå™¨é™åˆ¶ï¼š</strong></p>
<ul>
<li>æµè§ˆå™¨ä¸ç›´æ¥æ”¯æŒ SRT</li>
<li>éœ€è¦æœåŠ¡ç«¯æ¥æ”¶ SRT æµï¼Œè½¬æ¢ä¸º HLS/WebRTC ä¾›æµè§ˆå™¨æ’­æ”¾</li>
</ul>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># FFmpeg ä½¿ç”¨ SRT æ¨æµ</span>
ffmpeg -i input.mp4 -f mpegts <span class="hljs-string">"srt://server:port?streamid=live/stream"</span>

<span class="hljs-comment"># æœåŠ¡ç«¯æ¥æ”¶ SRTï¼Œè½¬å‘ä¸º HLS</span>
srt-live-transmit srt://:9000 http://localhost:8080/live.m3u8
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>æŠ—ä¸¢åŒ…</strong> - ARQ + FEC æœºåˆ¶ï¼Œå¼±ç½‘ç¯å¢ƒä¸‹ä¿æŒç¨³å®šä¼ è¾“</li>
<li><strong>ä½å»¶è¿Ÿ</strong> - åŸºäº UDPï¼Œé¿å… TCP é˜Ÿå¤´é˜»å¡ï¼Œå»¶è¿Ÿ &lt;1 ç§’</li>
<li><strong>å®‰å…¨ä¼ è¾“</strong> - AES åŠ å¯†ï¼Œä¿æŠ¤å†…å®¹å®‰å…¨</li>
<li><strong>ç©¿é€ NAT</strong> - å†…ç½®æ‰“æ´æœºåˆ¶ï¼Œç®€åŒ–éƒ¨ç½²</li>
<li><strong>å¼€æºåè®®</strong> - ç¤¾åŒºæ´»è·ƒï¼Œå·¥å…·é“¾å®Œå–„</li>
</ol>
<h3 data-id="heading-23">æµåª’ä½“ç¼“å­˜æŠ€æœ¯</h3>
<p>æµåª’ä½“æ’­æ”¾ä¸­ï¼Œç¼“å­˜æŠ€æœ¯ç”¨äºå®ç°ç¦»çº¿æ’­æ”¾ã€å‡å°‘é‡å¤è¯·æ±‚ã€é™ä½å¸¦å®½æˆæœ¬ã€‚</p>
<p><strong>IndexedDB - ç¦»çº¿è§†é¢‘å­˜å‚¨</strong></p>
<p>IndexedDB å¯ä»¥å­˜å‚¨å¤§å®¹é‡ Blob æ•°æ®ï¼Œå®ç°è§†é¢‘ç¦»çº¿æ’­æ”¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­˜å‚¨è§†é¢‘ç‰‡æ®µ</span>
<span class="hljs-keyword">const</span> request = indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-string">"VideoCache"</span>, <span class="hljs-number">1</span>);
request.<span class="hljs-property">onupgradeneeded</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> db = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
  db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">"videos"</span>, { <span class="hljs-attr">keyPath</span>: <span class="hljs-string">"id"</span> });
};

request.<span class="hljs-property">onsuccess</span> = <span class="hljs-keyword">async</span> (e) =&gt; {
  <span class="hljs-keyword">const</span> db = e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;
  <span class="hljs-keyword">const</span> tx = db.<span class="hljs-title function_">transaction</span>(<span class="hljs-string">"videos"</span>, <span class="hljs-string">"readwrite"</span>);
  <span class="hljs-keyword">const</span> store = tx.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">"videos"</span>);

  <span class="hljs-comment">// ä¸‹è½½å¹¶ç¼“å­˜è§†é¢‘</span>
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"video.mp4"</span>);
  <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">blob</span>();
  <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">put</span>({ <span class="hljs-attr">id</span>: <span class="hljs-string">"video123"</span>, blob, <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() });

  <span class="hljs-comment">// ç¦»çº¿æ’­æ”¾</span>
  <span class="hljs-keyword">const</span> cachedVideo = <span class="hljs-keyword">await</span> store.<span class="hljs-title function_">get</span>(<span class="hljs-string">"video123"</span>);
  video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(cachedVideo.<span class="hljs-property">blob</span>);
};
</code></pre>
<p><strong>Cache API - HLS ç‰‡æ®µç¼“å­˜</strong></p>
<p>Cache API é…åˆ Service Worker ç¼“å­˜ HLS ç‰‡æ®µï¼Œå®ç°æµåª’ä½“ç¦»çº¿æ’­æ”¾ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Service Worker ä¸­ç¼“å­˜ HLS ç‰‡æ®µ</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"fetch"</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">".ts"</span>) || e.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">".m3u8"</span>)) {
    e.<span class="hljs-title function_">respondWith</span>(
      caches.<span class="hljs-title function_">match</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (response) <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// è¿”å›ç¼“å­˜</span>

        <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
          <span class="hljs-keyword">const</span> cloned = response.<span class="hljs-title function_">clone</span>();
          caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">"hls-cache"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> {
            cache.<span class="hljs-title function_">put</span>(e.<span class="hljs-property">request</span>, cloned); <span class="hljs-comment">// ç¼“å­˜ç‰‡æ®µ</span>
          });
          <span class="hljs-keyword">return</span> response;
        });
      })
    );
  }
});
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>PWA ç¦»çº¿æ’­æ”¾</strong>ï¼šé¢„ç¼“å­˜è§†é¢‘èµ„æºï¼Œç”¨æˆ·ç¦»çº¿æ—¶ä»å¯è§‚çœ‹</li>
<li><strong>HLS ç‰‡æ®µä¼˜åŒ–</strong>ï¼šç¼“å­˜å·²ä¸‹è½½çš„ .ts ç‰‡æ®µï¼Œç”¨æˆ· seek æ—¶æ— éœ€é‡å¤è¯·æ±‚</li>
<li><strong>ç›´æ’­å›çœ‹</strong>ï¼šç¼“å­˜ç›´æ’­ç‰‡æ®µåˆ° IndexedDBï¼Œç”¨æˆ·å¯å›çœ‹æœ€è¿‘å†…å®¹</li>
</ul>
<h2 data-id="heading-24">åª’ä½“å¤„ç†ä¸ç¼–è¾‘æŠ€æœ¯</h2>
<p>åª’ä½“å¤„ç†ä¸ç¼–è¾‘æŠ€æœ¯æä¾›å¯¹éŸ³è§†é¢‘æ•°æ®çš„åƒç´ çº§ã€é‡‡æ ·çº§æ“ä½œèƒ½åŠ›ï¼Œä»éŸ³é¢‘åˆ†æã€è§†é¢‘ç‰¹æ•ˆã€åˆ°è‡ªå®šä¹‰ç¼–è§£ç ï¼Œå®ç°å¤æ‚çš„å¤šåª’ä½“å¤„ç†éœ€æ±‚ã€‚</p>





















































<table><thead><tr><th>æŠ€æœ¯</th><th>å¤„ç†å¯¹è±¡</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Web Audio API</td><td>éŸ³é¢‘é‡‡æ ·</td><td>å®æ—¶</td><td>éŸ³é¢‘åˆæˆã€ç‰¹æ•ˆã€å¯è§†åŒ–</td></tr><tr><td>Canvas 2D</td><td>è§†é¢‘å¸§(åƒç´ )</td><td>ä¸­ç­‰</td><td>æ°´å°ã€æ»¤é•œã€æˆªå›¾</td></tr><tr><td>WebGL</td><td>è§†é¢‘å¸§(GPU)</td><td>é«˜</td><td>å®æ—¶ç‰¹æ•ˆã€3D æ¸²æŸ“</td></tr><tr><td>WebGPU</td><td>é€šç”¨è®¡ç®—</td><td>æé«˜</td><td>AI æ¨ç†ã€å¤æ‚è®¡ç®—</td></tr><tr><td>WebCodecs</td><td>ç¼–è§£ç </td><td>é«˜</td><td>è‡ªå®šä¹‰ç¼–è§£ç ã€è½¬ç </td></tr><tr><td>WebAssembly</td><td>é€šç”¨è®¡ç®—</td><td>é«˜</td><td>FFmpegã€è‡ªå®šä¹‰ç®—æ³•</td></tr><tr><td>OffscreenCanvas</td><td>ç¦»å±æ¸²æŸ“</td><td>é«˜</td><td>åå°å¤„ç†ã€å¤šçº¿ç¨‹</td></tr></tbody></table>
<h3 data-id="heading-25">Web Audio API - éŸ³é¢‘å¤„ç†</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWeb_Audio_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" ref="nofollow noopener noreferrer">Web Audio API</a> æä¾›éŸ³é¢‘å¤„ç†çš„æ¨¡å—åŒ–èŠ‚ç‚¹ç³»ç»Ÿï¼Œå¯å¯¹éŸ³é¢‘æµè¿›è¡Œåˆ†æã€åˆæˆå’Œç‰¹æ•ˆå¤„ç†ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼ŒéŸ³é¢‘æ’­æ”¾æ˜¯é»‘ç›’æ“ä½œï¼Œæ— æ³•è®¿é—®éŸ³é¢‘æ•°æ®ã€‚Web Audio API å°†éŸ³é¢‘å¤„ç†æŠ½è±¡ä¸º"èŠ‚ç‚¹å›¾"æ¨¡å‹ï¼š</p>
<ol>
<li><strong>éŸ³é¢‘ä¸Šä¸‹æ–‡(AudioContext)</strong> - ç®¡ç†å’Œåè°ƒæ‰€æœ‰éŸ³é¢‘æ“ä½œ</li>
<li><strong>èŠ‚ç‚¹(AudioNode)</strong> - éŸ³é¢‘å¤„ç†çš„åŸºæœ¬å•å…ƒï¼Œæ¯ä¸ªèŠ‚ç‚¹æ‰§è¡Œç‰¹å®šåŠŸèƒ½ï¼š
<ul>
<li><strong>æºèŠ‚ç‚¹</strong> - äº§ç”ŸéŸ³é¢‘ï¼šMediaStreamSourceã€BufferSourceã€Oscillator(æŒ¯è¡å™¨)</li>
<li><strong>æ•ˆæœèŠ‚ç‚¹</strong> - å¤„ç†éŸ³é¢‘ï¼šGainNode(éŸ³é‡)ã€BiquadFilterNode(æ»¤æ³¢å™¨)ã€ConvolverNode(æ··å“)</li>
<li><strong>åˆ†æèŠ‚ç‚¹</strong> - åˆ†æéŸ³é¢‘ï¼šAnalyserNode(é¢‘è°±åˆ†æ)</li>
<li><strong>ç›®æ ‡èŠ‚ç‚¹</strong> - è¾“å‡ºéŸ³é¢‘ï¼šAudioDestination(æ‰¬å£°å™¨)</li>
</ul>
</li>
<li><strong>èŠ‚ç‚¹è¿æ¥</strong> - èŠ‚ç‚¹ä¹‹é—´é€šè¿‡ connect() è¿æ¥ï¼Œå½¢æˆéŸ³é¢‘å¤„ç†ç®¡çº¿</li>
</ol>
<p>æ•°æ®æµï¼š<code>æºèŠ‚ç‚¹ â†’ æ•ˆæœèŠ‚ç‚¹ â†’ åˆ†æèŠ‚ç‚¹ â†’ ç›®æ ‡èŠ‚ç‚¹(æ‰¬å£°å™¨)</code></p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> audioContext = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AudioContext</span>();

<span class="hljs-comment">// ä» &lt;audio&gt; åˆ›å»ºæºèŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> source = audioContext.<span class="hljs-title function_">createMediaElementSource</span>(audioElement);

<span class="hljs-comment">// åˆ›å»ºéŸ³é‡æ§åˆ¶èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> gainNode = audioContext.<span class="hljs-title function_">createGain</span>();
gainNode.<span class="hljs-property">gain</span>.<span class="hljs-property">value</span> = <span class="hljs-number">0.5</span>; <span class="hljs-comment">// 50% éŸ³é‡</span>

<span class="hljs-comment">// åˆ›å»ºé¢‘è°±åˆ†æèŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> analyser = audioContext.<span class="hljs-title function_">createAnalyser</span>();

<span class="hljs-comment">// è¿æ¥èŠ‚ç‚¹</span>
source.<span class="hljs-title function_">connect</span>(gainNode).<span class="hljs-title function_">connect</span>(analyser).<span class="hljs-title function_">connect</span>(audioContext.<span class="hljs-property">destination</span>);

<span class="hljs-comment">// è·å–é¢‘è°±æ•°æ®</span>
<span class="hljs-keyword">const</span> dataArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(analyser.<span class="hljs-property">frequencyBinCount</span>);
analyser.<span class="hljs-title function_">getByteFrequencyData</span>(dataArray); <span class="hljs-comment">// å®æ—¶é¢‘è°±æ•°æ®</span>
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>æ¨¡å—åŒ–å¤„ç†</strong> - é€šè¿‡è¿æ¥ä¸åŒèŠ‚ç‚¹å®ç°å¤æ‚éŸ³é¢‘å¤„ç†</li>
<li><strong>å®æ—¶åˆ†æ</strong> - è·å–æ³¢å½¢ã€é¢‘è°±æ•°æ®ï¼Œå®ç°éŸ³é¢‘å¯è§†åŒ–</li>
<li><strong>éŸ³é¢‘åˆæˆ</strong> - ä½¿ç”¨æŒ¯è¡å™¨åˆæˆå£°éŸ³ï¼Œå®ç°ç”µå­éŸ³ä¹</li>
<li><strong>ç©ºé—´éŸ³æ•ˆ</strong> - PannerNode å®ç° 3D éŸ³é¢‘å®šä½</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>éŸ³é¢‘å¯è§†åŒ–</strong>ï¼šé€šè¿‡ AnalyserNode å®æ—¶è·å–é¢‘è°±æ•°æ®ï¼Œæ— éœ€è§£ç æ•´ä¸ªéŸ³é¢‘æ–‡ä»¶ï¼Œé™ä½å†…å­˜å ç”¨</li>
<li><strong>åœ¨çº¿ DAW(æ•°å­—éŸ³é¢‘å·¥ä½œç«™)</strong>ï¼šæ¨¡å—åŒ–èŠ‚ç‚¹æ¶æ„å¤©ç„¶é€‚åˆéŸ³è½¨æ··éŸ³ã€æ•ˆæœå™¨å åŠ ç­‰éŸ³ä¹åˆ¶ä½œåœºæ™¯</li>
<li><strong>è¯­éŸ³é€šè¯é™å™ª</strong>ï¼šGainNode + BiquadFilterNode å®æ—¶å¤„ç† getUserMedia éŸ³é¢‘æµï¼Œæ— éœ€æœåŠ¡ç«¯å¤„ç†</li>
</ul>
<h3 data-id="heading-26">Canvas 2D - è§†é¢‘å¸§å¤„ç†</h3>
<p>Canvas 2D æä¾›åƒç´ çº§çš„å›¾åƒæ“ä½œèƒ½åŠ›ï¼Œå¯å°†è§†é¢‘å¸§ç»˜åˆ¶åˆ°ç”»å¸ƒåè¿›è¡Œå¤„ç†ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>è§†é¢‘æ’­æ”¾æ—¶ï¼Œæ¯ä¸€å¸§æ˜¯ä¸€å¼ å›¾åƒã€‚Canvas å¯ä»¥å°†è§†é¢‘å¸§è¯»å–ä¸ºåƒç´ æ•°æ®ï¼Œè¿›è¡Œåƒç´ çº§æ“ä½œåé‡æ–°ç»˜åˆ¶ï¼š</p>
<ol>
<li><strong>ç»˜åˆ¶è§†é¢‘å¸§</strong> - <code>drawImage(video, 0, 0)</code> å°†å½“å‰å¸§ç»˜åˆ¶åˆ° Canvas</li>
<li><strong>è¯»å–åƒç´ æ•°æ®</strong> - <code>getImageData()</code> è·å– RGBA åƒç´ æ•°ç»„ï¼Œæ¯ 4 ä¸ªå€¼è¡¨ç¤ºä¸€ä¸ªåƒç´ (R, G, B, A)</li>
<li><strong>å¤„ç†åƒç´ </strong> - éå†åƒç´ æ•°ç»„ï¼Œä¿®æ”¹é¢œè‰²å€¼å®ç°æ»¤é•œã€ç‰¹æ•ˆ</li>
<li><strong>å†™å›åƒç´ </strong> - <code>putImageData()</code> å°†å¤„ç†åçš„åƒç´ å†™å› Canvas</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);
<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processFrame</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç»˜åˆ¶è§†é¢‘å¸§åˆ° Canvas</span>
  ctx.<span class="hljs-title function_">drawImage</span>(video, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>);

  <span class="hljs-comment">// è¯»å–åƒç´ æ•°æ®</span>
  <span class="hljs-keyword">const</span> imageData = ctx.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, canvas.<span class="hljs-property">width</span>, canvas.<span class="hljs-property">height</span>);
  <span class="hljs-keyword">const</span> data = imageData.<span class="hljs-property">data</span>; <span class="hljs-comment">// RGBA æ•°ç»„</span>

  <span class="hljs-comment">// åƒç´ å¤„ç†ï¼šç°åº¦åŒ–</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i += <span class="hljs-number">4</span>) {
    <span class="hljs-keyword">const</span> gray = (data[i] + data[i + <span class="hljs-number">1</span>] + data[i + <span class="hljs-number">2</span>]) / <span class="hljs-number">3</span>;
    data[i] = data[i + <span class="hljs-number">1</span>] = data[i + <span class="hljs-number">2</span>] = gray;
  }

  <span class="hljs-comment">// å†™å› Canvas</span>
  ctx.<span class="hljs-title function_">putImageData</span>(imageData, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

  <span class="hljs-title function_">requestAnimationFrame</span>(processFrame);
}
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>åƒç´ çº§æ“ä½œ</strong> - ç›´æ¥è®¿é—®å’Œä¿®æ”¹æ¯ä¸ªåƒç´ çš„ RGBA å€¼</li>
<li><strong>å®æ—¶å¤„ç†</strong> - é…åˆ requestAnimationFrame å®æ—¶å¤„ç†è§†é¢‘å¸§</li>
<li><strong>æ»¤é•œæ•ˆæœ</strong> - å®ç°ç°åº¦ã€åè‰²ã€æ¨¡ç³Šç­‰å›¾åƒæ»¤é•œ</li>
<li><strong>æ°´å°å åŠ </strong> - åœ¨è§†é¢‘ä¸Šç»˜åˆ¶æ–‡å­—ã€å›¾åƒæ°´å°</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>è§†é¢‘æˆªå›¾</strong>ï¼šdrawImage å°†å½“å‰å¸§ç»˜åˆ¶åˆ° Canvasï¼ŒtoBlob å¯¼å‡ºå›¾ç‰‡ï¼Œé¿å…ä¾èµ–æœåŠ¡ç«¯æˆªå›¾</li>
<li><strong>ç®€å•æ»¤é•œ</strong>ï¼šéå†åƒç´ æ•°ç»„ä¿®æ”¹ RGB å€¼ï¼Œæ— éœ€ä¾èµ– GPUï¼Œé€‚åˆè½»é‡çº§å¤„ç†(å¦‚ç°åº¦ã€åè‰²)</li>
<li><strong>éšç§ä¿æŠ¤</strong>ï¼šå®æ—¶æ£€æµ‹äººè„¸åŒºåŸŸåï¼Œä¿®æ”¹è¯¥åŒºåŸŸåƒç´ ä¸ºæ¨¡ç³Šæˆ–é©¬èµ›å…‹ï¼Œåœ¨å®¢æˆ·ç«¯å®Œæˆæ•æ„Ÿä¿¡æ¯è„±æ•</li>
</ul>
<h3 data-id="heading-27">WebGL - GPU åŠ é€Ÿæ¸²æŸ“</h3>
<p>WebGL åˆ©ç”¨ GPU å¹¶è¡Œè®¡ç®—èƒ½åŠ›ï¼Œå®ç°é«˜æ€§èƒ½çš„è§†é¢‘å¤„ç†å’Œç‰¹æ•ˆæ¸²æŸ“ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>Canvas 2D åœ¨ CPU ä¸Šé€åƒç´ å¤„ç†ï¼Œå¯¹äºé«˜åˆ†è¾¨ç‡è§†é¢‘æ€§èƒ½ä¸è¶³ã€‚WebGL å°†è§†é¢‘ä½œä¸ºçº¹ç†(Texture)ä¸Šä¼ åˆ° GPUï¼Œé€šè¿‡ç€è‰²å™¨(Shader)å¹¶è¡Œå¤„ç†æ‰€æœ‰åƒç´ ï¼š</p>
<ol>
<li><strong>çº¹ç†ä¸Šä¼ </strong> - å°†è§†é¢‘å¸§ä¸Šä¼ ä¸º GPU çº¹ç†</li>
<li><strong>é¡¶ç‚¹ç€è‰²å™¨</strong> - å¤„ç†å‡ ä½•å˜æ¢(ä½ç½®ã€ç¼©æ”¾ã€æ—‹è½¬)</li>
<li><strong>ç‰‡æ®µç€è‰²å™¨</strong> - å¤„ç†æ¯ä¸ªåƒç´ çš„é¢œè‰²ï¼Œå®ç°ç‰¹æ•ˆ</li>
<li><strong>GPU å¹¶è¡Œè®¡ç®—</strong> - æ‰€æœ‰åƒç´ åŒæ—¶å¤„ç†ï¼Œé€Ÿåº¦è¿œè¶… CPU</li>
</ol>
<p><strong>ä½¿ç”¨æµç¨‹ï¼š</strong></p>
<p>WebGL å¤„ç†è§†é¢‘æœ‰ä¸¤ç§æ•°æ®æ¥æºï¼š</p>
<p><strong>æ–¹å¼ 1ï¼šä½¿ç”¨ video å…ƒç´ è§£ç </strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. video è‡ªåŠ¨è§£ç è§†é¢‘æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
video.<span class="hljs-property">src</span> = <span class="hljs-string">"video.mp4"</span>;
video.<span class="hljs-title function_">play</span>();

<span class="hljs-comment">// 2. WebGL å°† video å½“å‰å¸§ä¸Šä¼ ä¸ºçº¹ç†</span>
<span class="hljs-keyword">const</span> gl = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"webgl"</span>);
<span class="hljs-keyword">const</span> texture = gl.<span class="hljs-title function_">createTexture</span>();
gl.<span class="hljs-title function_">bindTexture</span>(gl.<span class="hljs-property">TEXTURE_2D</span>, texture);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// video å†…éƒ¨å·²å®Œæˆè§£ç ï¼Œè¿™é‡Œç›´æ¥å°†è§£ç åçš„å¸§ä¸Šä¼  GPU</span>
  gl.<span class="hljs-title function_">texImage2D</span>(gl.<span class="hljs-property">TEXTURE_2D</span>, <span class="hljs-number">0</span>, gl.<span class="hljs-property">RGBA</span>, gl.<span class="hljs-property">RGBA</span>, gl.<span class="hljs-property">UNSIGNED_BYTE</span>, video);

  <span class="hljs-comment">// ä½¿ç”¨ç€è‰²å™¨å¤„ç†çº¹ç†</span>
  gl.<span class="hljs-title function_">useProgram</span>(shaderProgram);
  gl.<span class="hljs-title function_">drawArrays</span>(gl.<span class="hljs-property">TRIANGLES</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>);

  <span class="hljs-title function_">requestAnimationFrame</span>(render);
}
</code></pre>
<p><strong>æ–¹å¼ 2ï¼šä½¿ç”¨ WebCodecs æ‰‹åŠ¨è§£ç </strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. WebCodecs è§£ç å™¨</span>
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoDecoder</span>({
  <span class="hljs-attr">output</span>: <span class="hljs-function">(<span class="hljs-params">videoFrame</span>) =&gt;</span> {
    <span class="hljs-comment">// videoFrame æ˜¯è§£ç åçš„åŸå§‹å¸§å¯¹è±¡</span>
    <span class="hljs-comment">// 2. å°† VideoFrame ä¸Šä¼ ä¸º WebGL çº¹ç†(ä¸ video ç”¨æ³•ç›¸åŒ)</span>
    gl.<span class="hljs-title function_">texImage2D</span>(gl.<span class="hljs-property">TEXTURE_2D</span>, <span class="hljs-number">0</span>, gl.<span class="hljs-property">RGBA</span>, gl.<span class="hljs-property">RGBA</span>, gl.<span class="hljs-property">UNSIGNED_BYTE</span>, videoFrame);

    <span class="hljs-comment">// 3. WebGL ç€è‰²å™¨å¤„ç†</span>
    gl.<span class="hljs-title function_">useProgram</span>(shaderProgram);
    gl.<span class="hljs-title function_">drawArrays</span>(gl.<span class="hljs-property">TRIANGLES</span>, <span class="hljs-number">0</span>, <span class="hljs-number">6</span>);

    <span class="hljs-comment">// 4. é‡Šæ”¾å¸§å¯¹è±¡</span>
    videoFrame.<span class="hljs-title function_">close</span>();
  },
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e),
});

decoder.<span class="hljs-title function_">configure</span>({ <span class="hljs-attr">codec</span>: <span class="hljs-string">"vp8"</span>, <span class="hljs-attr">codedWidth</span>: <span class="hljs-number">1920</span>, <span class="hljs-attr">codedHeight</span>: <span class="hljs-number">1080</span> });

<span class="hljs-comment">// é€å…¥å‹ç¼©æ•°æ®ï¼Œè§£ç å™¨ä¼šè‡ªåŠ¨è§£ç å¹¶è°ƒç”¨ output å›è°ƒ</span>
decoder.<span class="hljs-title function_">decode</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">EncodedVideoChunk</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"key"</span>, <span class="hljs-attr">timestamp</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">data</span>: encodedData }));
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><code>gl.texImage2D()</code> å¯ä»¥æ¥å— <code>video</code> å…ƒç´ æˆ– <code>VideoFrame</code> å¯¹è±¡</li>
<li>æ— è®ºå“ªç§æ–¹å¼ï¼Œä¼ ç»™ WebGL çš„éƒ½æ˜¯è§£ç åçš„åŸå§‹åƒç´ æ•°æ®</li>
<li>video æ–¹å¼æ›´ç®€å•ï¼ŒWebCodecs æ–¹å¼æä¾›æ›´ç²¾ç»†çš„æ§åˆ¶</li>
</ul>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>GPU åŠ é€Ÿ</strong> - åˆ©ç”¨å¹¶è¡Œè®¡ç®—ï¼Œå¤„ç† 4K è§†é¢‘ä»ä¿æŒ 60fps</li>
<li><strong>å¤æ‚ç‰¹æ•ˆ</strong> - å®æ—¶æ¨¡ç³Šã€è‰²å½©æ ¡æ­£ã€ç»¿å¹•æŠ å›¾</li>
<li><strong>3D å˜æ¢</strong> - è§†é¢‘ä½œä¸ºçº¹ç†è´´å›¾åˆ° 3D æ¨¡å‹</li>
<li><strong>ç€è‰²å™¨ç¼–ç¨‹</strong> - GLSL ç¼–å†™è‡ªå®šä¹‰åƒç´ å¤„ç†é€»è¾‘</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>å®æ—¶ç¾é¢œç›´æ’­</strong>ï¼šç€è‰²å™¨å¹¶è¡Œå¤„ç†æ‰€æœ‰åƒç´ å®ç°ç£¨çš®ï¼Œ1080p ä¿æŒ 60fpsï¼ŒCanvas 2D é€åƒç´ å¤„ç†ä¼šä¸¥é‡æ‰å¸§</li>
<li><strong>ç»¿å¹•æŠ å›¾</strong>ï¼šç€è‰²å™¨åˆ¤æ–­è‰²åº¦èŒƒå›´æ›¿æ¢èƒŒæ™¯ï¼ŒGPU ç™¾ä¸‡åƒç´ å¹¶è¡Œå¤„ç†å®æ—¶å®Œæˆï¼ŒCPU ä¸²è¡Œè®¡ç®—æ— æ³•è¾¾åˆ°å®æ—¶è¦æ±‚</li>
<li><strong>VR è§†é¢‘æ’­æ”¾å™¨</strong>ï¼šå°† 360Â° è§†é¢‘æ˜ å°„ä¸ºçƒä½“çº¹ç†å¹¶æ¸²æŸ“è§†è§’å˜æ¢ï¼ŒWebGL 3D èƒ½åŠ›ä¿è¯ 90fpsï¼Œæ»¡è¶³ VR ä½å»¶è¿Ÿéœ€æ±‚</li>
</ul>
<h3 data-id="heading-28">WebCodecs - åº•å±‚ç¼–è§£ç æ§åˆ¶</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FWebCodecs_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/WebCodecs_API" ref="nofollow noopener noreferrer">WebCodecs</a> æä¾›å¯¹è§†é¢‘ç¼–è§£ç å™¨çš„ç›´æ¥è®¿é—®ï¼Œå®ç°è‡ªå®šä¹‰ç¼–è§£ç æµç¨‹ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼Œç¼–è§£ç ç”±æµè§ˆå™¨å†…éƒ¨å¤„ç†ï¼Œå¼€å‘è€…æ— æ³•å¹²é¢„ã€‚WebCodecs æš´éœ²äº†ç¼–è§£ç å™¨æ¥å£ï¼Œå…è®¸ JavaScript ç›´æ¥æ§åˆ¶ï¼š</p>
<ol>
<li><strong>è§£ç å™¨(VideoDecoder)</strong> - å°†ç¼–ç åçš„è§†é¢‘å¸§(EncodedVideoChunk)è§£ç ä¸ºåŸå§‹å¸§(VideoFrame)</li>
<li><strong>ç¼–ç å™¨(VideoEncoder)</strong> - å°†åŸå§‹å¸§ç¼–ç ä¸ºå‹ç¼©æ•°æ®</li>
<li><strong>å¸§çº§æ§åˆ¶</strong> - é€å¸§å¤„ç†ï¼Œå¯åœ¨ç¼–è§£ç è¿‡ç¨‹ä¸­æ’å…¥è‡ªå®šä¹‰é€»è¾‘</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VideoDecoder</span>({
  <span class="hljs-attr">output</span>: <span class="hljs-function">(<span class="hljs-params">frame</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†è§£ç åçš„åŸå§‹å¸§</span>
    ctx.<span class="hljs-title function_">drawImage</span>(frame, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    frame.<span class="hljs-title function_">close</span>();
  },
  <span class="hljs-attr">error</span>: <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(e),
});

decoder.<span class="hljs-title function_">configure</span>({
  <span class="hljs-attr">codec</span>: <span class="hljs-string">"vp8"</span>,
  <span class="hljs-attr">codedWidth</span>: <span class="hljs-number">1920</span>,
  <span class="hljs-attr">codedHeight</span>: <span class="hljs-number">1080</span>,
});

<span class="hljs-comment">// é€å…¥ç¼–ç æ•°æ®</span>
decoder.<span class="hljs-title function_">decode</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">EncodedVideoChunk</span>({
    <span class="hljs-attr">type</span>: <span class="hljs-string">"key"</span>,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">data</span>: encodedData,
  })
);
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>è‡ªå®šä¹‰ç¼–è§£ç </strong> - ä¸ä¾èµ– video å…ƒç´ ï¼Œå®Œå…¨æ§åˆ¶ç¼–è§£ç æµç¨‹</li>
<li><strong>æ ¼å¼è½¬æ¢</strong> - è§£ç åé‡æ–°ç¼–ç ï¼Œå®ç°æ ¼å¼è½¬æ¢</li>
<li><strong>å¸§çº§å¤„ç†</strong> - åœ¨è§£ç åã€ç¼–ç å‰æ’å…¥è‡ªå®šä¹‰å¤„ç†</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - ç›´æ¥è®¿é—®ç¡¬ä»¶ç¼–è§£ç å™¨ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿ</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>æµè§ˆå™¨ç«¯è½¬ç </strong>ï¼šè§£ç  H.264 â†’ å¸§çº§å¤„ç† â†’ é‡æ–°ç¼–ç ä¸º VP9ï¼Œæ— éœ€ä¸Šä¼ æœåŠ¡å™¨ï¼ŒèŠ‚çœå¸¦å®½å’Œéšç§ä¿æŠ¤</li>
<li><strong>WebRTC è‡ªå®šä¹‰ç¼–ç </strong>ï¼šæ•è·æµåè‡ªå®šä¹‰ç¼–ç å‚æ•°(ç ç‡ã€å…³é”®å¸§é—´éš”)ï¼Œvideo å…ƒç´ æ— æ³•ç²¾ç»†æ§åˆ¶ç¼–ç è¿‡ç¨‹</li>
<li><strong>è§†é¢‘ç¼–è¾‘å™¨</strong>ï¼šé€å¸§è§£ç ã€å‰ªè¾‘ã€ç‰¹æ•ˆå¤„ç†åé‡æ–°ç¼–ç ï¼Œvideo å…ƒç´ åªæ”¯æŒæ’­æ”¾æ— æ³•é€å¸§æ§åˆ¶</li>
</ul>
<h3 data-id="heading-29">WebAssembly - é«˜æ€§èƒ½è®¡ç®—</h3>
<p>WebAssembly å°† C/C++ ç­‰è¯­è¨€ç¼–è¯‘ä¸ºæµè§ˆå™¨å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ€§èƒ½æ¥è¿‘åŸç”Ÿä»£ç ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>JavaScript æ˜¯è§£é‡Šæ‰§è¡Œï¼Œæ€§èƒ½æœ‰é™ã€‚WebAssembly æ˜¯ç¼–è¯‘å‹äºŒè¿›åˆ¶æ ¼å¼ï¼Œåœ¨æµè§ˆå™¨ä¸­æ¥è¿‘åŸç”Ÿæ€§èƒ½è¿è¡Œï¼š</p>
<ol>
<li><strong>ç¼–è¯‘</strong> - å°† C/C++ ä»£ç ç¼–è¯‘ä¸º .wasm æ–‡ä»¶</li>
<li><strong>åŠ è½½</strong> - JavaScript åŠ è½½ .wasm æ¨¡å—</li>
<li><strong>è°ƒç”¨</strong> - JavaScript è°ƒç”¨ WASM å¯¼å‡ºçš„å‡½æ•°ï¼Œä¼ é€’éŸ³è§†é¢‘æ•°æ®</li>
</ol>
<p>å…¸å‹åº”ç”¨ï¼šFFmpeg.wasm å°† FFmpeg ç¼–è¯‘ä¸º WASMï¼Œåœ¨æµè§ˆå™¨ä¸­å®ç°è§†é¢‘è½¬ç ã€å‰ªè¾‘ç­‰å¤æ‚æ“ä½œã€‚</p>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createFFmpeg } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ffmpeg/ffmpeg"</span>;

<span class="hljs-keyword">const</span> ffmpeg = <span class="hljs-title function_">createFFmpeg</span>({ <span class="hljs-attr">log</span>: <span class="hljs-literal">true</span> });
<span class="hljs-keyword">await</span> ffmpeg.<span class="hljs-title function_">load</span>();

<span class="hljs-comment">// åœ¨æµè§ˆå™¨ä¸­è½¬ç è§†é¢‘</span>
ffmpeg.<span class="hljs-title function_">FS</span>(<span class="hljs-string">"writeFile"</span>, <span class="hljs-string">"input.mp4"</span>, <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchFile</span>(videoFile));
<span class="hljs-keyword">await</span> ffmpeg.<span class="hljs-title function_">run</span>(<span class="hljs-string">"-i"</span>, <span class="hljs-string">"input.mp4"</span>, <span class="hljs-string">"-vf"</span>, <span class="hljs-string">"scale=640:480"</span>, <span class="hljs-string">"output.mp4"</span>);
<span class="hljs-keyword">const</span> data = ffmpeg.<span class="hljs-title function_">FS</span>(<span class="hljs-string">"readFile"</span>, <span class="hljs-string">"output.mp4"</span>);
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>æ¥è¿‘åŸç”Ÿæ€§èƒ½</strong> - æ‰§è¡Œé€Ÿåº¦æ˜¯çº¯ JavaScript çš„æ•°å€</li>
<li><strong>å¤ç”¨ç°æœ‰ä»£ç </strong> - å°† C/C++ åº“(FFmpegã€OpenCV)ç§»æ¤åˆ°æµè§ˆå™¨</li>
<li><strong>CPU å¯†é›†è®¡ç®—</strong> - é€‚åˆè§†é¢‘ç¼–è§£ç ã€å›¾åƒå¤„ç†ç­‰è®¡ç®—å¯†é›†ä»»åŠ¡</li>
<li><strong>è·¨å¹³å°</strong> - ä¸€æ¬¡ç¼–è¯‘ï¼Œæ‰€æœ‰æµè§ˆå™¨è¿è¡Œ</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>FFmpeg.wasm è§†é¢‘å¤„ç†</strong>ï¼šå¤ç”¨ FFmpeg C ä»£ç å®ç°å¤æ‚è½¬ç ã€å‰ªè¾‘ï¼ŒJavaScript é‡å†™æ€§èƒ½å’Œå·¥ç¨‹é‡ä¸å¯æ¥å—</li>
<li><strong>OpenCV.js è®¡ç®—æœºè§†è§‰</strong>ï¼šäººè„¸è¯†åˆ«ã€ç‰©ä½“æ£€æµ‹ç®—æ³•éœ€è¦å¤§é‡çŸ©é˜µè¿ç®—ï¼ŒWASM æ¯” JS å¿« 5-10 å€</li>
<li><strong>éŸ³é¢‘å¤„ç†ç®—æ³•</strong>ï¼šOpus ç¼–è§£ç å™¨ã€éŸ³é¢‘é™å™ªç®—æ³•ï¼ŒC å®ç°æ€§èƒ½è¿œè¶… JavaScript ä¸”ç®—æ³•åº“å·²æˆç†Ÿ</li>
</ul>
<h3 data-id="heading-30">OffscreenCanvas - ç¦»å±æ¸²æŸ“</h3>
<p>OffscreenCanvas å…è®¸åœ¨ Web Worker ä¸­è¿›è¡Œ Canvas æ¸²æŸ“ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>Canvas æ¸²æŸ“åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œï¼Œå¤æ‚è®¡ç®—ä¼šé˜»å¡ UIã€‚OffscreenCanvas å°† Canvas è½¬ç§»åˆ° Worker çº¿ç¨‹ï¼š</p>
<ol>
<li><strong>åˆ›å»ºç¦»å± Canvas</strong> - <code>canvas.transferControlToOffscreen()</code></li>
<li><strong>è½¬ç§»åˆ° Worker</strong> - é€šè¿‡ postMessage å°† OffscreenCanvas å‘é€åˆ° Worker</li>
<li><strong>Worker ä¸­æ¸²æŸ“</strong> - Worker çº¿ç¨‹ç‹¬ç«‹æ¸²æŸ“ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹</li>
<li><strong>è‡ªåŠ¨åŒæ­¥</strong> - æ¸²æŸ“ç»“æœè‡ªåŠ¨åŒæ­¥åˆ°é¡µé¢ Canvas</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"canvas"</span>);
<span class="hljs-keyword">const</span> offscreen = canvas.<span class="hljs-title function_">transferControlToOffscreen</span>();
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"worker.js"</span>);
worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">canvas</span>: offscreen }, [offscreen]);

<span class="hljs-comment">// worker.js</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> canvas = e.<span class="hljs-property">data</span>.<span class="hljs-property">canvas</span>;
  <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">"2d"</span>);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    ctx.<span class="hljs-title function_">drawImage</span>(video, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    <span class="hljs-comment">// å¤æ‚çš„åƒç´ å¤„ç†...</span>
    <span class="hljs-title function_">requestAnimationFrame</span>(render);
  }
  <span class="hljs-title function_">render</span>();
};
</code></pre>
<p><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong></p>
<ol>
<li><strong>å¤šçº¿ç¨‹æ¸²æŸ“</strong> - æ¸²æŸ“æ“ä½œåœ¨ Worker æ‰§è¡Œï¼Œä¸»çº¿ç¨‹æµç•…</li>
<li><strong>å¹¶è¡Œå¤„ç†</strong> - å¤šä¸ª Worker åŒæ—¶å¤„ç†ä¸åŒå¸§</li>
<li><strong>ä¸é˜»å¡ UI</strong> - å³ä½¿å¤æ‚è®¡ç®—ä¹Ÿä¸å½±å“ç”¨æˆ·äº¤äº’</li>
<li><strong>è‡ªåŠ¨åŒæ­¥</strong> - æ— éœ€æ‰‹åŠ¨ä¼ é€’æ¸²æŸ“ç»“æœ</li>
</ol>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>è§†é¢‘æ°´å°æ‰¹å¤„ç†</strong>ï¼šå¤šä¸ª Worker å¹¶è¡Œå¤„ç†ä¸åŒç‰‡æ®µï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPUï¼Œä¸»çº¿ç¨‹ Canvas ä¼šé˜»å¡ UI</li>
<li><strong>å®æ—¶è§†é¢‘å¤„ç†</strong>ï¼šWorker æ‰§è¡Œå¤æ‚åƒç´ è®¡ç®—(å¦‚é£æ ¼åŒ–æ»¤é•œ)ï¼Œä¸»çº¿ç¨‹ä¿æŒ 60fps äº¤äº’å“åº”</li>
<li><strong>åå°è§†é¢‘æ¸²æŸ“</strong>ï¼šåˆ‡æ¢æ ‡ç­¾é¡µå Worker ç»§ç»­æ¸²æŸ“ï¼Œä¸»çº¿ç¨‹ Canvas åœ¨åå°ä¼šæš‚åœ</li>
</ul>
<h2 data-id="heading-31">ç¼–è§£ç ä¸å®¹å™¨æ ¼å¼</h2>
<p>ç¼–è§£ç ä¸å®¹å™¨æ ¼å¼æ˜¯å¤šåª’ä½“æŠ€æœ¯çš„åŸºç¡€ï¼Œå†³å®šäº†éŸ³è§†é¢‘çš„å‹ç¼©æ•ˆç‡ã€ä¼ è¾“æˆæœ¬å’Œæ’­æ”¾å…¼å®¹æ€§ã€‚ç¼–ç å™¨(Encoder)å°†åŸå§‹éŸ³è§†é¢‘æ•°æ®å‹ç¼©ä¸ºç æµï¼Œè§£ç å™¨(Decoder)å°†ç æµè¿˜åŸä¸ºå¯æ’­æ”¾çš„æ•°æ®ï¼Œå®¹å™¨æ ¼å¼(Container)è´Ÿè´£å°†éŸ³é¢‘æµã€è§†é¢‘æµã€å­—å¹•ç­‰å¤šä¸ªæµå°è£…åœ¨ä¸€èµ·ã€‚ç†è§£ç¼–è§£ç åŸç†å’Œæ ¼å¼é€‰æ‹©ï¼Œå¯¹ä¼˜åŒ–æ–‡ä»¶å¤§å°ã€ç”»è´¨ã€åŠ è½½é€Ÿåº¦è‡³å…³é‡è¦ã€‚</p>
<p><strong>æŠ€æœ¯åˆ†å±‚å…³ç³»ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">åŸå§‹æ•°æ® â†’ ç¼–ç å™¨(Encoder) â†’ å‹ç¼©ç æµ â†’ å®¹å™¨å°è£…(Muxer) â†’ åª’ä½“æ–‡ä»¶
åª’ä½“æ–‡ä»¶ â†’ å®¹å™¨è§£å°è£…(Demuxer) â†’ å‹ç¼©ç æµ â†’ è§£ç å™¨(Decoder) â†’ åŸå§‹æ•°æ®
</code></pre>
<h3 data-id="heading-32">è§†é¢‘ç¼–ç æ ¼å¼</h3>
<p>è§†é¢‘ç¼–ç é€šè¿‡æ—¶é—´å†—ä½™(å¸§é—´é¢„æµ‹)å’Œç©ºé—´å†—ä½™(å¸§å†…å‹ç¼©)å®ç°é«˜å‹ç¼©æ¯”ï¼Œå°†åŸå§‹åƒç´ æ•°æ®å‹ç¼©è‡³åŸå¤§å°çš„ 1%ã€‚</p>
<p><strong>ä¸»æµç¼–ç æ ¼å¼å¯¹æ¯”ï¼š</strong></p>





























































<table><thead><tr><th>ç¼–ç æ ¼å¼</th><th>æ ‡å‡†ç»„ç»‡</th><th>å‹ç¼©æ•ˆç‡</th><th>è®¡ç®—å¤æ‚åº¦</th><th>æµè§ˆå™¨æ”¯æŒ</th><th>ä¸“åˆ©/æˆæƒ</th></tr></thead><tbody><tr><td>H.264/AVC</td><td>ITU/MPEG</td><td>åŸºå‡†(1x)</td><td>ä¸­</td><td>å…¨å¹³å°</td><td>ä¸“åˆ©(å…è´¹ä¸Šé™)</td></tr><tr><td>H.265/HEVC</td><td>ITU/MPEG</td><td>2x H.264</td><td>é«˜</td><td>éƒ¨åˆ†</td><td>ä¸“åˆ©(å¤æ‚è´¹ç”¨)</td></tr><tr><td>VP8</td><td>Google</td><td>0.8x H.264</td><td>ä¸­</td><td>Chrome/Firefox</td><td>å…è´¹å¼€æº</td></tr><tr><td>VP9</td><td>Google</td><td>1.5x H.264</td><td>é«˜</td><td>Chrome/Firefox/Edge</td><td>å…è´¹å¼€æº</td></tr><tr><td>AV1</td><td>AOMedia</td><td>2x H.264</td><td>æé«˜</td><td>ç°ä»£æµè§ˆå™¨</td><td>å…è´¹å¼€æº</td></tr><tr><td>H.266/VVC</td><td>ITU/MPEG</td><td>2.5x H.264</td><td>æé«˜</td><td>æ— </td><td>ä¸“åˆ©</td></tr></tbody></table>
<p><strong>H.264/AVC - æœ€å¹¿æ³›æ”¯æŒçš„ç¼–ç æ ¼å¼</strong></p>
<p>H.264(Advanced Video Coding)æ˜¯ç›®å‰å…¼å®¹æ€§æœ€å¥½çš„è§†é¢‘ç¼–ç æ ¼å¼ï¼Œå‡ ä¹æ‰€æœ‰è®¾å¤‡å’Œæµè§ˆå™¨éƒ½æ”¯æŒç¡¬ä»¶è§£ç ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>å¸§å†…é¢„æµ‹(Intra Prediction)</strong> - I å¸§å†…éƒ¨ï¼Œä»ç›¸é‚»åƒç´ é¢„æµ‹å½“å‰åƒç´ ï¼Œå»é™¤ç©ºé—´å†—ä½™</li>
<li><strong>å¸§é—´é¢„æµ‹(Inter Prediction)</strong> - P/B å¸§å‚è€ƒå…¶ä»–å¸§ï¼Œåªå­˜å‚¨å·®å¼‚(è¿åŠ¨çŸ¢é‡ + æ®‹å·®)</li>
<li><strong>å˜æ¢ç¼–ç (DCT)</strong> - å°†åƒç´ æ•°æ®è½¬æ¢ä¸ºé¢‘åŸŸï¼Œé«˜é¢‘åˆ†é‡(ç»†èŠ‚)å¯ä»¥é‡åŒ–ä¸¢å¼ƒ</li>
<li><strong>ç†µç¼–ç (CABAC/CAVLC)</strong> - å¯¹é‡åŒ–åçš„æ•°æ®è¿›è¡Œæ— æŸå‹ç¼©ï¼Œè¿›ä¸€æ­¥å‡å°ä½“ç§¯</li>
</ol>
<p><strong>ç¼–ç æ¡£æ¬¡(Profile)ï¼š</strong></p>
<ul>
<li><strong>Baseline</strong> - ä½å¤æ‚åº¦ï¼Œé€‚åˆç§»åŠ¨è®¾å¤‡ï¼Œä¸æ”¯æŒ B å¸§</li>
<li><strong>Main</strong> - ä¸­ç­‰å¤æ‚åº¦ï¼Œæ”¯æŒ B å¸§ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
<li><strong>High</strong> - é«˜å‹ç¼©ç‡ï¼Œæ”¯æŒ 8Ã—8 å˜æ¢ï¼Œé€‚åˆé«˜æ¸…è§†é¢‘</li>
</ul>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æµ‹ H.264 æ”¯æŒ</span>
<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"video"</span>);
<span class="hljs-keyword">const</span> canPlay = video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/mp4; codecs="avc1.42E01E"'</span>);
<span class="hljs-comment">// 'probably' - å®Œå…¨æ”¯æŒ, 'maybe' - å¯èƒ½æ”¯æŒ, '' - ä¸æ”¯æŒ</span>
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>å¹¿æ³›åˆ†å‘</strong>ï¼šéœ€è¦æœ€å¤§å…¼å®¹æ€§æ—¶é¦–é€‰ï¼Œæ‰€æœ‰å¹³å°ç¡¬ä»¶è§£ç </li>
<li><strong>å®æ—¶é€šä¿¡</strong>ï¼šWebRTC é»˜è®¤ç¼–ç ï¼Œç¡¬ä»¶ç¼–è§£ç é™ä½åŠŸè€—</li>
<li><strong>æµåª’ä½“ç›´æ’­</strong>ï¼šHLS/DASH ä¸»æµç¼–ç ï¼ŒCDN ç¼“å­˜å‹å¥½</li>
</ul>
<p><strong>H.265/HEVC - é«˜æ•ˆä½†æˆæƒå¤æ‚</strong></p>
<p>H.265(High Efficiency Video Coding)åœ¨ç›¸åŒç”»è´¨ä¸‹ç ç‡å‡åŠï¼Œä½†ä¸“åˆ©æˆæƒè´¹ç”¨å¤æ‚ï¼Œæµè§ˆå™¨æ”¯æŒæœ‰é™ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ç›¸æ¯” H.264 çš„æ”¹è¿›ï¼š</p>
<ol>
<li><strong>æ›´å¤§çš„ç¼–ç å—</strong> - æ”¯æŒæœ€å¤§ 64Ã—64 CTU(Coding Tree Unit)ï¼Œæ›´é€‚åˆé«˜åˆ†è¾¨ç‡</li>
<li><strong>æ›´å¤šé¢„æµ‹æ¨¡å¼</strong> - 35 ç§å¸§å†…é¢„æµ‹æ–¹å‘(H.264 ä»… 9 ç§)</li>
<li><strong>æ›´çµæ´»çš„å˜æ¢</strong> - æ”¯æŒ 4Ã—4 åˆ° 32Ã—32 çš„å¤šç§å˜æ¢å°ºå¯¸</li>
<li><strong>å¹¶è¡Œå¤„ç†ä¼˜åŒ–</strong> - Tileã€WPP ç­‰æŠ€æœ¯æé«˜ç¼–ç å¹¶è¡Œåº¦</li>
</ol>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Safari(macOS/iOS)å’Œ Edge æ”¯æŒï¼ŒChrome/Firefox éœ€ç¡¬ä»¶æ”¯æŒ</span>
video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/mp4; codecs="hev1.1.6.L120.90"'</span>);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>4K/8K è§†é¢‘</strong>ï¼šé«˜åˆ†è¾¨ç‡ä¸‹å‹ç¼©ä¼˜åŠ¿æ˜æ˜¾ï¼Œå‡å°‘å¸¦å®½æˆæœ¬</li>
<li><strong>ä¸“ä¸šåˆ¶ä½œ</strong>ï¼šåæœŸåˆ¶ä½œä¿ç•™æ›´å¤šç»†èŠ‚ï¼Œå‡å°‘å­˜å‚¨æˆæœ¬</li>
<li><strong>Apple ç”Ÿæ€</strong>ï¼šiOS/macOS å…¨å¹³å°ç¡¬ä»¶æ”¯æŒ</li>
</ul>
<p><strong>VP9 - Google å¼€æºç¼–ç </strong></p>
<p>VP9 æ˜¯ Google å¼€å‘çš„å¼€æºç¼–ç æ ¼å¼ï¼Œå‹ç¼©æ•ˆç‡æ¥è¿‘ H.265ï¼ŒYouTube å¤§é‡ä½¿ç”¨ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>è¶…çº§å—(Superblock)</strong> - æœ€å¤§æ”¯æŒ 64Ã—64 å—å¤§å°</li>
<li><strong>è‡ªé€‚åº”ç¯è·¯æ»¤æ³¢</strong> - å‡å°‘æ–¹å—æ•ˆåº”ï¼Œæå‡ä¸»è§‚ç”»è´¨</li>
<li><strong>10bit è‰²æ·±</strong> - æ”¯æŒ HDR è§†é¢‘</li>
<li><strong>å¹¶è¡Œç¼–ç </strong> - æ”¯æŒ Tile å¹¶è¡Œï¼Œæé«˜ç¼–ç é€Ÿåº¦</li>
</ol>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Chrome/Firefox/Edge åŸç”Ÿæ”¯æŒ</span>
video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/webm; codecs="vp9"'</span>);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>YouTube/Netflix</strong>ï¼šä¸»æµæµåª’ä½“å¹³å°ä½¿ç”¨ï¼Œå‡å°‘ CDN æˆæœ¬</li>
<li><strong>å¼€æºé¡¹ç›®</strong>ï¼šæ— ä¸“åˆ©è´¹ç”¨ï¼Œé€‚åˆå¼€æºåº”ç”¨</li>
<li><strong>WebM å®¹å™¨</strong>ï¼šä¸ WebM æ­é…ï¼Œå®Œå…¨å¼€æºæ ˆ</li>
</ul>
<p><strong>AV1 - ä¸‹ä¸€ä»£å¼€æºç¼–ç </strong></p>
<p>AV1(AOMedia Video 1)æ˜¯ç”± AOMedia è”ç›Ÿ(Googleã€Mozillaã€Netflix ç­‰)å¼€å‘çš„å…è´¹å¼€æºç¼–ç æ ¼å¼ï¼Œå‹ç¼©æ•ˆç‡è¶…è¶Š H.265ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>æ›´å¤æ‚çš„é¢„æµ‹</strong> - å¸§å†…é¢„æµ‹æ”¯æŒ 71 ç§æ¨¡å¼</li>
<li><strong>å·ç§¯ç¥ç»ç½‘ç»œæ»¤æ³¢</strong> - AI è¾…åŠ©å»å—ã€å»å™ª</li>
<li><strong>å…¨å±€è¿åŠ¨è¡¥å¿</strong> - å¤„ç†æ‘„åƒæœºè¿åŠ¨</li>
<li><strong>è¶…åˆ†è¾¨ç‡</strong> - è§£ç ç«¯æ”¾å¤§ç”»é¢ï¼Œé™ä½ä¼ è¾“ç ç‡</li>
</ol>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Chrome 90+ã€Firefox 67+ã€Edge 90+ æ”¯æŒ</span>
video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/mp4; codecs="av01.0.05M.08"'</span>);
</code></pre>
<p><strong>æŒ‘æˆ˜ï¼š</strong></p>
<ul>
<li><strong>ç¼–ç æ…¢</strong> - ç¼–ç å¤æ‚åº¦æ˜¯ H.264 çš„ 100 å€+</li>
<li><strong>ç¡¬ä»¶æ”¯æŒä¸è¶³</strong> - ç¡¬ä»¶ç¼–è§£ç å™¨æ™®åŠè¾ƒæ…¢</li>
</ul>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>æµåª’ä½“ä¼˜åŒ–</strong>ï¼šNetflixã€YouTube é€æ­¥è¿ç§»ï¼ŒèŠ‚çœ 30-40% å¸¦å®½</li>
<li><strong>å­˜æ¡£å‹ç¼©</strong>ï¼šé•¿æœŸå­˜å‚¨è§†é¢‘ï¼Œç©ºé—´èŠ‚çœæ˜¾è‘—</li>
<li><strong>æœªæ¥æ ‡å‡†</strong>ï¼šå…ä¸“åˆ©è´¹ï¼Œé•¿æœŸæ›¿ä»£ H.264</li>
</ul>
<h3 data-id="heading-33">éŸ³é¢‘ç¼–ç æ ¼å¼</h3>
<p>éŸ³é¢‘ç¼–ç é€šè¿‡å¿ƒç†å£°å­¦æ¨¡å‹å»é™¤äººè€³ä¸æ•æ„Ÿçš„é¢‘ç‡ï¼Œå®ç° 10:1 çš„å‹ç¼©æ¯”ã€‚</p>
<p><strong>ä¸»æµç¼–ç æ ¼å¼å¯¹æ¯”ï¼š</strong></p>













































<table><thead><tr><th>ç¼–ç æ ¼å¼</th><th>å¼€å‘è€…</th><th>å‹ç¼©æ•ˆç‡</th><th>å»¶è¿Ÿ</th><th>æµè§ˆå™¨æ”¯æŒ</th><th>ä¸“åˆ©/æˆæƒ</th></tr></thead><tbody><tr><td>MP3</td><td>Fraunhofer</td><td>åŸºå‡†(1x)</td><td>~50ms</td><td>å…¨å¹³å°</td><td>ä¸“åˆ©å·²è¿‡æœŸ</td></tr><tr><td>AAC</td><td>MPEG</td><td>1.3x MP3</td><td>~50ms</td><td>å…¨å¹³å°</td><td>ä¸“åˆ©(å…è´¹ä¸Šé™)</td></tr><tr><td>Opus</td><td>Xiph/IETF</td><td>1.5x MP3</td><td>5-66ms</td><td>ç°ä»£æµè§ˆå™¨</td><td>å…è´¹å¼€æº</td></tr><tr><td>Vorbis</td><td>Xiph</td><td>1.2x MP3</td><td>~50ms</td><td>Chrome/Firefox</td><td>å…è´¹å¼€æº</td></tr></tbody></table>
<p><strong>AAC - æœ€å¹¿æ³›çš„éŸ³é¢‘ç¼–ç </strong></p>
<p>AAC(Advanced Audio Coding)æ˜¯ MP3 çš„ç»§ä»»è€…ï¼Œåœ¨ç›¸åŒç ç‡ä¸‹éŸ³è´¨æ›´å¥½ï¼Œæ˜¯ MP4 å®¹å™¨çš„æ ‡å‡†éŸ³é¢‘ç¼–ç ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>æ”¹è¿›çš„æ»¤æ³¢å™¨ç»„</strong> - æ›´ç²¾ç¡®çš„é¢‘åŸŸåˆ†è§£</li>
<li><strong>æ—¶åŸŸå™ªå£°æ•´å½¢(TNS)</strong> - å¤„ç†ç¬æ€ä¿¡å·(å¦‚æ‰“å‡»ä¹)</li>
<li><strong>è”åˆç«‹ä½“å£°ç¼–ç </strong> - æ›´é«˜æ•ˆçš„åŒå£°é“ç¼–ç </li>
<li><strong>æ›´çµæ´»çš„ç ç‡æ§åˆ¶</strong> - VBR(å¯å˜ç ç‡)æ›´å¥½åœ°é€‚åº”å¤æ‚åº¦</li>
</ol>
<p><strong>æ¡£æ¬¡(Profile)ï¼š</strong></p>
<ul>
<li><strong>AAC-LC</strong> - ä½å¤æ‚åº¦ï¼Œé€šç”¨åœºæ™¯</li>
<li><strong>HE-AAC</strong> - é«˜æ•ˆï¼Œä½ç ç‡è¯­éŸ³/éŸ³ä¹</li>
<li><strong>HE-AACv2</strong> - è¶…ä½ç ç‡ï¼Œé€‚åˆæµåª’ä½“</li>
</ul>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">audio.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'audio/mp4; codecs="mp4a.40.2"'</span>); <span class="hljs-comment">// AAC-LC</span>
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>æµåª’ä½“éŸ³é¢‘</strong>ï¼šYouTubeã€Spotify æ ‡å‡†éŸ³é¢‘ç¼–ç </li>
<li><strong>ç§»åŠ¨è®¾å¤‡</strong>ï¼šç¡¬ä»¶ç¼–è§£ç ï¼Œä½åŠŸè€—</li>
<li><strong>MP4 è§†é¢‘</strong>ï¼šæ ‡é…éŸ³é¢‘è½¨é“</li>
</ul>
<p><strong>Opus - ä½å»¶è¿Ÿé«˜è´¨é‡</strong></p>
<p>Opus æ˜¯ä¸ºå®æ—¶é€šä¿¡å’Œæµåª’ä½“è®¾è®¡çš„ç¼–ç æ ¼å¼ï¼Œå»¶è¿Ÿä½è‡³ 5msï¼Œå‹ç¼©æ•ˆç‡è¶…è¶Š AACã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>ç»“åˆä¸¤ç§ç¼–ç å™¨ï¼š</p>
<ol>
<li><strong>SILK</strong> - å¤„ç†è¯­éŸ³(ä½é¢‘)ï¼ŒåŸºäºçº¿æ€§é¢„æµ‹</li>
<li><strong>CELT</strong> - å¤„ç†éŸ³ä¹(å…¨é¢‘)ï¼ŒåŸºäº MDCT å˜æ¢</li>
<li><strong>è‡ªé€‚åº”åˆ‡æ¢</strong> - æ ¹æ®å†…å®¹ç‰¹æ€§åŠ¨æ€é€‰æ‹©ç¼–ç å™¨</li>
</ol>
<p><strong>ç ç‡èŒƒå›´ï¼š</strong> 6 kbps(çª„å¸¦è¯­éŸ³) åˆ° 510 kbps(å…¨é¢‘ç«‹ä½“å£°)</p>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">audio.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'audio/webm; codecs="opus"'</span>);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>WebRTC éŸ³é¢‘</strong>ï¼šé»˜è®¤éŸ³é¢‘ç¼–ç ï¼Œä½å»¶è¿Ÿé«˜è´¨é‡</li>
<li><strong>æ¸¸æˆè¯­éŸ³</strong>ï¼š5-10ms å»¶è¿Ÿï¼Œå®æ—¶äº’åŠ¨æµç•…</li>
<li><strong>æ’­å®¢æµåª’ä½“</strong>ï¼šä½ç ç‡é«˜è´¨é‡ï¼ŒèŠ‚çœå¸¦å®½</li>
</ul>
<h3 data-id="heading-34">å®¹å™¨æ ¼å¼</h3>
<p>å®¹å™¨æ ¼å¼è´Ÿè´£å°†éŸ³é¢‘æµã€è§†é¢‘æµã€å­—å¹•ã€å…ƒæ•°æ®å°è£…åœ¨ä¸€èµ·ï¼Œå¹¶è®°å½•æ—¶é—´æˆ³ã€ç´¢å¼•ä¿¡æ¯ã€‚</p>
<p><strong>ä¸»æµå®¹å™¨æ ¼å¼å¯¹æ¯”ï¼š</strong></p>















































<table><thead><tr><th>å®¹å™¨æ ¼å¼</th><th>å¸¸è§ç¼–ç </th><th>æµå¼æ”¯æŒ</th><th>æµè§ˆå™¨æ”¯æŒ</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>MP4/fMP4</td><td>H.264+AAC</td><td>fMP4 æ”¯æŒ</td><td>å…¨å¹³å°</td><td>é€šç”¨ã€ç´¢å¼•åœ¨å°¾éƒ¨</td></tr><tr><td>WebM</td><td>VP8/VP9+Opus</td><td>æ”¯æŒ</td><td>Chrome/Firefox</td><td>å¼€æºã€æµå¼å‹å¥½</td></tr><tr><td>TS</td><td>H.264+AAC</td><td>æ”¯æŒ</td><td>MSE è§£æ</td><td>HLS æ ‡å‡†ã€å®¹é”™æ€§å¥½</td></tr><tr><td>MKV</td><td>ä»»æ„</td><td>æ”¯æŒ</td><td>éœ€è½¬æ¢</td><td>åŠŸèƒ½æœ€å¼ºã€å¼€æº</td></tr><tr><td>FLV</td><td>H.264+AAC</td><td>æ”¯æŒ</td><td>éœ€ flv.js</td><td>ç®€å•ã€ç›´æ’­å¸¸ç”¨</td></tr></tbody></table>
<p><strong>MP4 ä¸ fMP4</strong></p>
<p>MP4(MPEG-4 Part 14)æ˜¯æœ€é€šç”¨çš„å®¹å™¨æ ¼å¼ï¼ŒfMP4(Fragmented MP4)æ˜¯ä¸ºæµåª’ä½“ä¼˜åŒ–çš„å˜ä½“ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p><strong>ä¼ ç»Ÿ MP4 ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ftyp]</span><span class="hljs-selector-attr">[mdat(è§†é¢‘æ•°æ®)]</span><span class="hljs-selector-attr">[moov(ç´¢å¼•)]</span>
</code></pre>
<ul>
<li><strong>moov box</strong> åœ¨æ–‡ä»¶æœ«å°¾ï¼Œè®°å½•æ‰€æœ‰å¸§çš„ä½ç½®å’Œæ—¶é—´æˆ³</li>
<li>å¿…é¡»å®Œæ•´ä¸‹è½½æ‰èƒ½ seekï¼Œä¸é€‚åˆæµåª’ä½“</li>
</ul>
<p><strong>fMP4(Fragmented MP4)ç»“æ„ï¼š</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ftyp]</span><span class="hljs-selector-attr">[moov(åˆå§‹åŒ–)]</span><span class="hljs-selector-attr">[moof(ç‰‡æ®µç´¢å¼•)]</span><span class="hljs-selector-attr">[mdat(ç‰‡æ®µæ•°æ®)]</span><span class="hljs-selector-attr">[moof]</span><span class="hljs-selector-attr">[mdat]</span>...
</code></pre>
<ul>
<li><strong>moov</strong> æå‰ï¼ŒåªåŒ…å«åˆå§‹åŒ–ä¿¡æ¯</li>
<li>æ¯ä¸ªç‰‡æ®µç‹¬ç«‹ï¼Œæ”¯æŒæµå¼æ’­æ”¾å’Œ DASH</li>
</ul>
<p><strong>æµè§ˆå™¨ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// MP4 ç›´æ¥æ’­æ”¾</span>
video.<span class="hljs-property">src</span> = <span class="hljs-string">"video.mp4"</span>;

<span class="hljs-comment">// fMP4 é€šè¿‡ MSE æ’­æ”¾(DASH)</span>
<span class="hljs-keyword">const</span> mediaSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaSource</span>();
video.<span class="hljs-property">src</span> = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(mediaSource);
mediaSource.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"sourceopen"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> sourceBuffer = mediaSource.<span class="hljs-title function_">addSourceBuffer</span>(<span class="hljs-string">'video/mp4; codecs="avc1.42E01E,mp4a.40.2"'</span>);
  sourceBuffer.<span class="hljs-title function_">appendBuffer</span>(fmp4Segment);
});
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>MP4</strong>ï¼šç‚¹æ’­è§†é¢‘ã€å½•åˆ¶ä¿å­˜ã€å…¼å®¹æ€§ä¼˜å…ˆ</li>
<li><strong>fMP4</strong>ï¼šDASH æµåª’ä½“ã€ä½å»¶è¿Ÿç›´æ’­</li>
</ul>
<p><strong>WebM</strong></p>
<p>WebM æ˜¯ Google æ¨å‡ºçš„å¼€æºå®¹å™¨æ ¼å¼ï¼Œé…åˆ VP8/VP9 ç¼–ç ä½¿ç”¨ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<p>åŸºäº Matroska(MKV)çš„å­é›†ï¼š</p>
<ul>
<li>ä»…æ”¯æŒ VP8/VP9 è§†é¢‘ + Vorbis/Opus éŸ³é¢‘</li>
<li>æµå¼å‹å¥½ï¼Œæ— éœ€å®Œæ•´æ–‡ä»¶å³å¯å¼€å§‹æ’­æ”¾</li>
<li>æ”¯æŒè‡ªé€‚åº”æµ(WebM DASH)</li>
</ul>
<p><strong>æµè§ˆå™¨ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript">video.<span class="hljs-property">src</span> = <span class="hljs-string">"video.webm"</span>;
video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/webm; codecs="vp9,opus"'</span>);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>å¼€æºé¡¹ç›®</strong>ï¼šå®Œå…¨å…è´¹ï¼Œæ— ä¸“åˆ©é™åˆ¶</li>
<li><strong>å±å¹•å½•åˆ¶</strong>ï¼šMediaRecorder API é»˜è®¤è¾“å‡ºæ ¼å¼</li>
<li><strong>Chrome ä¼˜åŒ–</strong>ï¼šChrome åŸç”Ÿæ”¯æŒï¼Œæ€§èƒ½æœ€ä½³</li>
</ul>
<p><strong>TS(MPEG Transport Stream)</strong></p>
<p>TS æ˜¯ä¸ºå¹¿æ’­ç”µè§†è®¾è®¡çš„å®¹å™¨æ ¼å¼ï¼Œå®¹é”™æ€§å¼ºï¼ŒHLS åè®®çš„æ ‡å‡†å®¹å™¨ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>å›ºå®šé•¿åº¦åŒ…(188 å­—èŠ‚)</strong> - æ¯ä¸ªåŒ…ç‹¬ç«‹ï¼Œä¸¢åŒ…ä¸å½±å“åç»­æ•°æ®</li>
<li><strong>æ— å…¨å±€ç´¢å¼•</strong> - æ”¯æŒä»ä»»æ„ä½ç½®å¼€å§‹æ’­æ”¾</li>
<li><strong>åŒæ­¥å­—èŠ‚(0x47)</strong> - å¿«é€Ÿå®šä½åŒ…è¾¹ç•Œ</li>
<li><strong>å¤šè·¯å¤ç”¨</strong> - éŸ³è§†é¢‘äº¤ç»‡ï¼Œæ˜“äºå®æ—¶ä¼ è¾“</li>
</ol>
<p><strong>æµè§ˆå™¨ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é€šè¿‡ MSE è§£æ TS(éœ€åº“å¦‚ hls.js)</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Hls</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"hls.js"</span>;
<span class="hljs-keyword">const</span> hls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hls</span>();
hls.<span class="hljs-title function_">loadSource</span>(<span class="hljs-string">"stream.m3u8"</span>); <span class="hljs-comment">// HLS ç´¢å¼•ï¼ŒæŒ‡å‘ .ts ç‰‡æ®µ</span>
hls.<span class="hljs-title function_">attachMedia</span>(video);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>HLS ç›´æ’­</strong>ï¼šApple HLS åè®®æ ‡å‡†å®¹å™¨</li>
<li><strong>æ•°å­—ç”µè§†</strong>ï¼šIPTVã€DVB å¹¿æ’­æ ‡å‡†</li>
<li><strong>å¼±ç½‘ç¯å¢ƒ</strong>ï¼šå®¹é”™æ€§å¼ºï¼Œéƒ¨åˆ†ä¸¢åŒ…ä¸å½±å“æ’­æ”¾</li>
</ul>
<h3 data-id="heading-35">ç¼–ç å‚æ•°ä¸è´¨é‡æ§åˆ¶</h3>
<p>ç¼–ç å‚æ•°ç›´æ¥å½±å“æ–‡ä»¶å¤§å°ã€ç”»è´¨å’Œå…¼å®¹æ€§ã€‚</p>
<p><strong>å…³é”®å‚æ•°ï¼š</strong></p>
<ol>
<li>
<p><strong>ç ç‡(Bitrate)</strong> - æ¯ç§’æ•°æ®é‡ï¼Œç›´æ¥å†³å®šæ–‡ä»¶å¤§å°å’Œç”»è´¨</p>
<ul>
<li>1080p H.264: 3-8 Mbps(é«˜è´¨é‡), 1-3 Mbps(æµåª’ä½“)</li>
<li>720p H.264: 1.5-4 Mbps</li>
<li>CBR(å›ºå®šç ç‡) vs VBR(å¯å˜ç ç‡)ï¼šVBR åŒä½“ç§¯ä¸‹ç”»è´¨æ›´å¥½</li>
</ul>
</li>
<li>
<p><strong>åˆ†è¾¨ç‡(Resolution)</strong> - ç”»é¢å°ºå¯¸</p>
<ul>
<li>å¸¸è§ï¼š480p(640Ã—480)ã€720p(1280Ã—720)ã€1080p(1920Ã—1080)ã€4K(3840Ã—2160)</li>
<li>ç½‘ç»œé€‚é…ï¼šå‡†å¤‡å¤šä¸ªåˆ†è¾¨ç‡å®ç° ABR(è‡ªé€‚åº”ç ç‡)</li>
</ul>
</li>
<li>
<p><strong>å¸§ç‡(Frame Rate)</strong> - æ¯ç§’å¸§æ•°</p>
<ul>
<li>ç”µå½±ï¼š24fpsï¼Œç½‘ç»œè§†é¢‘ï¼š25/30fpsï¼Œæ¸¸æˆ/ä½“è‚²ï¼š60fps</li>
<li>å¸§ç‡è¶Šé«˜è¶Šæµç•…ï¼Œä½†æ–‡ä»¶æ›´å¤§</li>
</ul>
</li>
<li>
<p><strong>GOP(Group of Pictures)</strong> - å…³é”®å¸§é—´éš”</p>
<ul>
<li>I å¸§ï¼šå®Œæ•´å›¾åƒï¼Œä½“ç§¯å¤§</li>
<li>P å¸§ï¼šå‚è€ƒå‰ä¸€å¸§ï¼Œä½“ç§¯ä¸­</li>
<li>B å¸§ï¼šå‚è€ƒå‰åå¸§ï¼Œä½“ç§¯å°</li>
<li>GOP è¶Šå¤§å‹ç¼©ç‡è¶Šé«˜ï¼Œä½† seek æ…¢(éœ€å®šä½åˆ°æœ€è¿‘çš„ I å¸§)</li>
<li>å…¸å‹å€¼ï¼šGOP=60(2 ç§’ä¸€ä¸ª I å¸§ @ 30fps)</li>
</ul>
</li>
</ol>
<p><strong>è´¨é‡ä¸å¤§å°å¹³è¡¡ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// FFmpeg ç¼–ç ç¤ºä¾‹</span>
<span class="hljs-comment">// é«˜è´¨é‡(å¤§æ–‡ä»¶)</span>
ffmpeg -i input.<span class="hljs-property">mp4</span> -<span class="hljs-attr">c</span>:v libx264 -crf <span class="hljs-number">18</span> -preset slow output.<span class="hljs-property">mp4</span>

<span class="hljs-comment">// æµåª’ä½“ä¼˜åŒ–(ä¸­ç­‰è´¨é‡)</span>
ffmpeg -i input.<span class="hljs-property">mp4</span> -<span class="hljs-attr">c</span>:v libx264 -crf <span class="hljs-number">23</span> -preset medium -maxrate 3M -bufsize 6M output.<span class="hljs-property">mp4</span>

<span class="hljs-comment">// ä½ç ç‡(å°æ–‡ä»¶)</span>
ffmpeg -i input.<span class="hljs-property">mp4</span> -<span class="hljs-attr">c</span>:v libx264 -crf <span class="hljs-number">28</span> -preset fast output.<span class="hljs-property">mp4</span>
</code></pre>
<p><strong>CRF(Constant Rate Factor)ï¼š</strong></p>
<ul>
<li>0-51ï¼Œå€¼è¶Šå°è´¨é‡è¶Šé«˜</li>
<li>æ¨èï¼š18(è§†è§‰æ— æŸ)ã€23(é«˜è´¨é‡)ã€28(å¯æ¥å—)</li>
</ul>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>é«˜è´¨é‡å­˜æ¡£</strong>ï¼šCRF 18ï¼Œæ…¢é€Ÿé¢„è®¾ï¼Œä¿ç•™ç»†èŠ‚</li>
<li><strong>æµåª’ä½“åˆ†å‘</strong>ï¼šCRF 23ï¼Œå¤šç ç‡ï¼Œè‡ªé€‚åº”æ’­æ”¾</li>
<li><strong>ç¤¾äº¤åª’ä½“</strong>ï¼šCRF 28ï¼Œå¿«é€Ÿç¼–ç ï¼Œæ–‡ä»¶å°</li>
</ul>
<h2 data-id="heading-36">å‰ç«¯å¤šåª’ä½“åº“ä¸æ¡†æ¶</h2>
<p>è™½ç„¶æµè§ˆå™¨æä¾›äº†åŸç”Ÿçš„å¤šåª’ä½“ APIï¼Œä½†å®é™…å¼€å‘ä¸­ç›´æ¥ä½¿ç”¨åŸç”Ÿ API å­˜åœ¨æµè§ˆå™¨å…¼å®¹æ€§ã€åè®®è§£æã€UI å®šåˆ¶ç­‰è¯¸å¤šé—®é¢˜ã€‚å¤šåª’ä½“åº“å’Œæ¡†æ¶å°è£…äº†åº•å±‚å¤æ‚æ€§ï¼Œæä¾›å¼€ç®±å³ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚æœ¬ç« ä»‹ç»ä¸»æµçš„æ’­æ”¾å™¨åº“ã€WebRTC åº“ã€éŸ³è§†é¢‘å¤„ç†åº“ï¼Œé‡ç‚¹å¯¹æ¯”å„åº“çš„æŠ€æœ¯å·®å¼‚å’Œé€‚ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-37">è§†é¢‘æ’­æ”¾å™¨åº“</h3>
<p><strong>æ ¸å¿ƒå·®å¼‚ç»´åº¦ï¼š</strong> åè®®æ”¯æŒã€UI å®šåˆ¶èƒ½åŠ›ã€æ’ä»¶ç”Ÿæ€ã€ä½“ç§¯æ€§èƒ½</p>
<p><strong>ä¸»æµæ’­æ”¾å™¨åº“å¯¹æ¯”ï¼š</strong></p>




































































<table><thead><tr><th>åº“</th><th>å®šä½</th><th>åè®®æ”¯æŒ</th><th>UI</th><th>ä½“ç§¯</th><th>æ’ä»¶ç”Ÿæ€</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Video.js</strong></td><td>é€šç”¨æ’­æ”¾å™¨æ¡†æ¶</td><td>éœ€æ’ä»¶æ‰©å±•</td><td>å®Œæ•´ UI</td><td>~250KB</td><td>ä¸°å¯Œ</td><td>é€šç”¨è§†é¢‘ç½‘ç«™</td></tr><tr><td><strong>hls.js</strong></td><td>HLS ä¸“ç”¨è§£æå™¨</td><td>HLS</td><td>æ—  UI</td><td>~100KB</td><td>æ— </td><td>è½»é‡ HLS æ’­æ”¾</td></tr><tr><td><strong>Shaka Player</strong></td><td>ä¸“ä¸šæµåª’ä½“</td><td>DASH + HLS</td><td>åŸºç¡€ UI</td><td>~300KB</td><td>å°‘é‡</td><td>DRM å•†ä¸šå¹³å°</td></tr><tr><td><strong>DPlayer</strong></td><td>å¼¹å¹•æ’­æ”¾å™¨</td><td>éœ€æ’ä»¶</td><td>ç²¾ç¾ UI</td><td>~200KB</td><td>å°‘é‡</td><td>å¼¹å¹•è§†é¢‘ç½‘ç«™</td></tr><tr><td><strong>flv.js</strong></td><td>FLV ç›´æ’­ä¸“ç”¨</td><td>FLV</td><td>æ—  UI</td><td>~200KB</td><td>æ— </td><td>ä½å»¶è¿Ÿç›´æ’­</td></tr><tr><td><strong>xgplayer</strong></td><td>è¥¿ç“œæ’­æ”¾å™¨</td><td>å¯æ‰©å±•</td><td>ç°ä»£ UI</td><td>~150KB</td><td>ä¸­ç­‰</td><td>ç§»åŠ¨ç«¯è§†é¢‘</td></tr></tbody></table>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvideojs%2Fvideo.js" target="_blank" title="https://github.com/videojs/video.js" ref="nofollow noopener noreferrer">Video.js</a></strong> - æœ€æµè¡Œçš„é€šç”¨æ’­æ”¾å™¨ï¼Œæ’ä»¶æ¶æ„æ”¯æŒåŠŸèƒ½æ‰©å±•ï¼Œå…¼å®¹æ€§å¥½è¦†ç›–æ—§æµè§ˆå™¨ã€‚æ ¸å¿ƒæœ€å°åŒ–ï¼ŒåŠŸèƒ½é€šè¿‡æ’ä»¶å®ç°(HLSã€DASHã€å¹¿å‘Šã€å­—å¹•ç­‰)ã€‚ç¤¾åŒºæ´»è·ƒï¼Œç¬¬ä¸‰æ–¹æ’ä»¶ä¸°å¯Œã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvideo-dev%2Fhls.js" target="_blank" title="https://github.com/video-dev/hls.js" ref="nofollow noopener noreferrer">hls.js</a></strong> - çº¯ HLS è§£æå™¨ï¼Œä¸æä¾› UIï¼Œä¸“æ³¨åè®®è§£æå’Œ ABR é€»è¾‘ã€‚ä½“ç§¯å°å·§é€‚åˆæ€§èƒ½æ•æ„Ÿåœºæ™¯ï¼Œéœ€è‡ªå·±å®ç°æ’­æ”¾æ§åˆ¶ç•Œé¢ã€‚å†…ç½®è‡ªé€‚åº”ç ç‡ç®—æ³•æˆç†Ÿç¨³å®šã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshaka-project%2Fshaka-player" target="_blank" title="https://github.com/shaka-project/shaka-player" ref="nofollow noopener noreferrer">Shaka Player</a></strong> - Google å¼€å‘çš„ä¸“ä¸šæµåª’ä½“æ’­æ”¾å™¨ï¼ŒåŒæ—¶æ”¯æŒ DASH å’Œ HLSï¼Œå†…ç½®å®Œæ•´ DRM æ”¯æŒ(Widevine/PlayReady/FairPlay)ã€‚å•†ä¸šçº§è§£å†³æ–¹æ¡ˆï¼Œé€‚åˆä»˜è´¹è§†é¢‘å¹³å°ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDIYgod%2FDPlayer" target="_blank" title="https://github.com/DIYgod/DPlayer" ref="nofollow noopener noreferrer">DPlayer</a></strong> - å›½å†…å¼€å‘çš„å¼¹å¹•æ’­æ”¾å™¨ï¼Œæä¾›ç²¾ç¾ UI å’Œå¼¹å¹•åŠŸèƒ½ã€‚æ”¯æŒ HLSã€FLVã€DASH(é€šè¿‡æ’ä»¶)ï¼ŒAPI ç®€æ´æ˜“ç”¨ã€‚é€‚åˆéœ€è¦å¼¹å¹•åŠŸèƒ½çš„è§†é¢‘ç½‘ç«™ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbilibili%2Fflv.js" target="_blank" title="https://github.com/bilibili/flv.js" ref="nofollow noopener noreferrer">flv.js</a></strong> - B ç«™å¼€æºçš„ FLV è§£æå™¨ï¼Œä¸“é—¨ç”¨äºä½å»¶è¿Ÿç›´æ’­(3-10 ç§’å»¶è¿Ÿ)ã€‚ä»…æ”¯æŒ FLV å®¹å™¨ï¼Œä¸æ”¯æŒå…¶ä»–æ ¼å¼ã€‚é’ˆå¯¹ç›´æ’­åœºæ™¯ä¼˜åŒ–ç¼“å†²ç­–ç•¥ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytedance%2Fxgplayer" target="_blank" title="https://github.com/bytedance/xgplayer" ref="nofollow noopener noreferrer">xgplayer</a></strong> - å­—èŠ‚è·³åŠ¨å¼€æºçš„æ’­æ”¾å™¨ï¼Œæä¾›ç°ä»£åŒ– UI å’Œç§»åŠ¨ç«¯ä¼˜åŒ–ã€‚æ’ä»¶åŒ–æ¶æ„ï¼Œæ”¯æŒ HLSã€FLVã€DASHã€‚æ€§èƒ½ä¼˜åŒ–å’Œç§»åŠ¨ç«¯ä½“éªŒè¾ƒå¥½ã€‚</p>
<p><strong>æŠ€æœ¯å·®å¼‚æ€»ç»“ï¼š</strong></p>
<ul>
<li><strong>Video.js</strong>ï¼šæ’ä»¶ç”Ÿæ€æœ€ä¸°å¯Œï¼Œé€‚åˆéœ€è¦å¤§é‡å®šåˆ¶åŠŸèƒ½çš„åœºæ™¯</li>
<li><strong>hls.js/flv.js</strong>ï¼šçº¯è§£æå™¨æ—  UIï¼Œé€‚åˆå·²æœ‰ UI æ¡†æ¶æˆ–éœ€è¦å®Œå…¨è‡ªå®šä¹‰çš„åœºæ™¯</li>
<li><strong>Shaka Player</strong>ï¼šDRM æ”¯æŒæœ€å®Œå–„ï¼Œé€‚åˆå•†ä¸šä»˜è´¹å†…å®¹</li>
<li><strong>DPlayer/xgplayer</strong>ï¼šUI ç²¾ç¾ç°ä»£ï¼Œé€‚åˆå¿«é€Ÿæ­å»ºè§†é¢‘ç½‘ç«™</li>
</ul>
<h3 data-id="heading-38">WebRTC åº“ä¸æ¡†æ¶</h3>
<p><strong>æ ¸å¿ƒå·®å¼‚ç»´åº¦ï¼š</strong> æ¶æ„æ¨¡å¼(P2P/SFU)ã€ä¿¡ä»¤å¤„ç†ã€API å¤æ‚åº¦ã€æ‰©å±•æ€§</p>
<p><strong>å®¢æˆ·ç«¯åº“å¯¹æ¯”ï¼š</strong></p>


















































<table><thead><tr><th>åº“</th><th>æ¶æ„</th><th>ä¿¡ä»¤</th><th>API é£æ ¼</th><th>ä½“ç§¯</th><th>å­¦ä¹ æ›²çº¿</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>simple-peer</strong></td><td>P2P</td><td>éœ€è‡ªå®ç°</td><td>äº‹ä»¶é©±åŠ¨</td><td>~20KB</td><td>ä½</td><td>ç®€å• P2P åº”ç”¨</td></tr><tr><td><strong>PeerJS</strong></td><td>P2P</td><td>æä¾›æ‰˜ç®¡æœåŠ¡</td><td>å›è°ƒé£æ ¼</td><td>~50KB</td><td>ä½</td><td>å¿«é€ŸåŸå‹å¼€å‘</td></tr><tr><td><strong>mediasoup-client</strong></td><td>SFU</td><td>é…åˆæœåŠ¡ç«¯</td><td>Promise</td><td>~200KB</td><td>é«˜</td><td>å¤§è§„æ¨¡ä¼šè®®</td></tr><tr><td><strong>Agora SDK</strong></td><td>å•†ä¸šæ–¹æ¡ˆ</td><td>äº‘æœåŠ¡</td><td>Promise</td><td>~1MB</td><td>ä¸­</td><td>ä¼ä¸šçº§åº”ç”¨</td></tr></tbody></table>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffeross%2Fsimple-peer" target="_blank" title="https://github.com/feross/simple-peer" ref="nofollow noopener noreferrer">simple-peer</a></strong> - æœ€è½»é‡çš„ WebRTC å°è£…ï¼Œå°† RTCPeerConnection ç®€åŒ–ä¸ºäº‹ä»¶é©±åŠ¨ APIã€‚ä¿¡ä»¤äº¤æ¢ç”±å¼€å‘è€…è‡ªè¡Œå®ç°(WebSocket/HTTP ç­‰)ã€‚é€‚åˆå·²æœ‰åç«¯ä¿¡ä»¤æœåŠ¡å™¨çš„åœºæ™¯ï¼Œä»…æ”¯æŒ P2P(1 å¯¹ 1)ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpeers%2Fpeerjs" target="_blank" title="https://github.com/peers/peerjs" ref="nofollow noopener noreferrer">PeerJS</a></strong> - æä¾›æ‰˜ç®¡ä¿¡ä»¤æœåŠ¡å™¨çš„ P2P åº“ï¼Œé€šè¿‡å”¯ä¸€ Peer ID æ ‡è¯†ç”¨æˆ·ã€‚é›¶é…ç½®å¿«é€Ÿå¼€å‘ï¼Œé€‚åˆåŸå‹éªŒè¯å’Œå°è§„æ¨¡åº”ç”¨ã€‚å…¬å…±ä¿¡ä»¤æœåŠ¡å™¨å…è´¹ä½†ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼ŒP2P æ¶æ„é™åˆ¶å‚ä¸äººæ•°ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fversatica%2Fmediasoup-client-aiortc" target="_blank" title="https://github.com/versatica/mediasoup-client-aiortc" ref="nofollow noopener noreferrer">mediasoup-client</a></strong> - mediasoup SFU æœåŠ¡å™¨çš„é…å¥—å®¢æˆ·ç«¯ï¼Œæ”¯æŒå¤§è§„æ¨¡å¤šäººä¼šè®®(æ•°ç™¾äºº)ã€‚SFU æ¶æ„æœåŠ¡å™¨è½¬å‘æµï¼Œæ”¯æŒ Simulcast å¤šè·¯å‘é€ã€‚ç²¾ç»†æ§åˆ¶ç¼–ç å‚æ•°ï¼Œé€‚åˆä¸“ä¸šè§†é¢‘ä¼šè®®äº§å“ï¼Œä½†å­¦ä¹ æ›²çº¿é™¡å³­éœ€è¦éƒ¨ç½²æœåŠ¡å™¨ã€‚</p>
<p><strong>æœåŠ¡ç«¯æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p>













































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ¶æ„</th><th>è¯­è¨€</th><th>å¹¶å‘èƒ½åŠ›</th><th>éƒ¨ç½²å¤æ‚åº¦</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>Janus Gateway</strong></td><td>SFU/MCU</td><td>C</td><td>é«˜</td><td>ä¸­</td><td>æ’ä»¶æ¶æ„ã€æ€§èƒ½ä¼˜ç§€</td></tr><tr><td><strong>mediasoup</strong></td><td>SFU</td><td>C++/Node.js</td><td>æé«˜</td><td>é«˜</td><td>Simulcastã€å½•åˆ¶ã€è½¬ç </td></tr><tr><td><strong>Jitsi</strong></td><td>SFU</td><td>Java</td><td>é«˜</td><td>ä½</td><td>ä¸€ä½“åŒ–æ–¹æ¡ˆã€å¼€ç®±å³ç”¨</td></tr><tr><td><strong>Kurento</strong></td><td>MCU</td><td>Java</td><td>ä¸­</td><td>ä¸­</td><td>åª’ä½“å¤„ç†èƒ½åŠ›å¼º</td></tr></tbody></table>
<p><strong>æŠ€æœ¯å·®å¼‚æ€»ç»“ï¼š</strong></p>
<ul>
<li><strong>simple-peer/PeerJS</strong>ï¼šP2P æ¶æ„ï¼Œé€‚åˆ 1 å¯¹ 1 æˆ–å°è§„æ¨¡(2-4 äºº)åœºæ™¯ï¼Œå»¶è¿Ÿæœ€ä½</li>
<li><strong>mediasoup</strong>ï¼šSFU æ¶æ„ï¼Œé€‚åˆå¤§è§„æ¨¡ä¼šè®®(10+ äºº)ï¼ŒæœåŠ¡å™¨è½¬å‘é™ä½å®¢æˆ·ç«¯å‹åŠ›</li>
<li><strong>å•†ä¸šæ–¹æ¡ˆ</strong>ï¼šå£°ç½‘/è…¾è®¯äº‘ç­‰æä¾›å®Œæ•´äº‘æœåŠ¡ï¼Œå…è¿ç»´ä½†æˆæœ¬è¾ƒé«˜</li>
</ul>
<h3 data-id="heading-39">éŸ³é¢‘å¤„ç†åº“</h3>
<p><strong>æ ¸å¿ƒå·®å¼‚ç»´åº¦ï¼š</strong> ä½¿ç”¨åœºæ™¯(æ¸¸æˆ/éŸ³ä¹/åˆ†æ)ã€API å¤æ‚åº¦ã€åŠŸèƒ½æ·±åº¦</p>


















































<table><thead><tr><th>åº“</th><th>å®šä½</th><th>åŸºç¡€æŠ€æœ¯</th><th>æ ¸å¿ƒåŠŸèƒ½</th><th>ä½“ç§¯</th><th>å­¦ä¹ æ›²çº¿</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Tone.js</strong></td><td>éŸ³ä¹åˆ›ä½œæ¡†æ¶</td><td>Web Audio API</td><td>åˆæˆå™¨ã€éŸ³åºå™¨ã€æ•ˆæœå™¨</td><td>~200KB</td><td>é«˜</td><td>DAWã€ç”µå­éŸ³ä¹</td></tr><tr><td><strong>Howler.js</strong></td><td>æ¸¸æˆéŸ³é¢‘åº“</td><td>HTML5 Audio</td><td>æ’­æ”¾æ§åˆ¶ã€ç©ºé—´éŸ³æ•ˆ</td><td>~20KB</td><td>ä½</td><td>æ¸¸æˆéŸ³æ•ˆã€BGM</td></tr><tr><td><strong>WaveSurfer.js</strong></td><td>æ³¢å½¢å¯è§†åŒ–</td><td>Web Audio + Canvas</td><td>æ³¢å½¢ç»˜åˆ¶ã€åŒºåŸŸé€‰æ‹©</td><td>~100KB</td><td>ä¸­</td><td>éŸ³é¢‘ç¼–è¾‘å™¨</td></tr><tr><td><strong>Pizzicato.js</strong></td><td>éŸ³æ•ˆå¤„ç†</td><td>Web Audio API</td><td>éŸ³æ•ˆåº“(æ··å“/å»¶è¿Ÿ)</td><td>~50KB</td><td>ä½</td><td>éŸ³æ•ˆå¢å¼º</td></tr></tbody></table>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTonejs%2FTone.js" target="_blank" title="https://github.com/Tonejs/Tone.js" ref="nofollow noopener noreferrer">Tone.js</a></strong> - ä¸“ä¸šéŸ³ä¹åˆ›ä½œæ¡†æ¶ï¼Œå†…ç½®éŸ³é˜¶ã€èŠ‚å¥ã€å’Œå£°ç­‰éŸ³ä¹æ¦‚å¿µã€‚æä¾› Transport æ—¶é—´è½´å®ç° DAW çº§ç²¾ç¡®æ—¶åºæ§åˆ¶ã€‚é€‚åˆåœ¨çº¿ DAWã€éŸ³ä¹å¯è§†åŒ–ã€ç”µå­éŸ³ä¹åº”ç”¨ï¼Œä½†å­¦ä¹ æ›²çº¿é™¡å³­ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoldfire%2Fhowler.js" target="_blank" title="https://github.com/goldfire/howler.js" ref="nofollow noopener noreferrer">Howler.js</a></strong> - ç®€å•æ˜“ç”¨çš„æ¸¸æˆéŸ³é¢‘åº“ï¼Œè‡ªåŠ¨é™çº§(Web Audio â†’ HTML5 Audio)ä¿è¯å…¼å®¹æ€§ã€‚æä¾›éŸ³æ•ˆæ± ã€é¢„åŠ è½½ã€ç©ºé—´éŸ³é¢‘ç­‰æ¸¸æˆä¼˜åŒ–åŠŸèƒ½ã€‚API ç®€æ´ï¼Œé€‚åˆæ¸¸æˆéŸ³æ•ˆå’ŒèƒŒæ™¯éŸ³ä¹æ’­æ”¾ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fkatspaugh%2Fwavesurfer.js" target="_blank" title="https://github.com/katspaugh/wavesurfer.js" ref="nofollow noopener noreferrer">WaveSurfer.js</a></strong> - éŸ³é¢‘æ³¢å½¢å¯è§†åŒ–åº“ï¼Œç»˜åˆ¶æ³¢å½¢å›¾å¹¶æ”¯æŒåŒºåŸŸé€‰æ‹©ã€ç¼©æ”¾ã€æ’­æ”¾æ§åˆ¶ã€‚é€‚åˆéŸ³é¢‘ç¼–è¾‘å™¨ã€æ’­å®¢å‰ªè¾‘ã€éŸ³é¢‘åˆ†æå·¥å…·ã€‚</p>
<p><strong>æŠ€æœ¯å·®å¼‚æ€»ç»“ï¼š</strong></p>
<ul>
<li><strong>Tone.js</strong>ï¼šéŸ³ä¹å¯¼å‘ï¼Œå¤æ‚åº¦é«˜ï¼Œé€‚åˆä¸“ä¸šéŸ³ä¹åˆ¶ä½œ</li>
<li><strong>Howler.js</strong>ï¼šæ¸¸æˆå¯¼å‘ï¼Œç®€å•æ˜“ç”¨ï¼Œé€‚åˆéŸ³æ•ˆæ’­æ”¾</li>
<li><strong>WaveSurfer.js</strong>ï¼šå¯è§†åŒ–å¯¼å‘ï¼Œé€‚åˆéŸ³é¢‘ç¼–è¾‘å’Œåˆ†æ</li>
</ul>
<h3 data-id="heading-40">è§†é¢‘å¤„ç†åº“</h3>





































<table><thead><tr><th>åº“</th><th>å®šä½</th><th>æ ¸å¿ƒèƒ½åŠ›</th><th>ä½“ç§¯</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>FFmpeg.wasm</strong></td><td>å®Œæ•´è§†é¢‘å¤„ç†</td><td>è½¬ç ã€å‰ªè¾‘ã€æ»¤é•œ</td><td>~25MB</td><td>ä¸­</td><td>æ ¼å¼è½¬æ¢ã€å¤æ‚å¤„ç†</td></tr><tr><td><strong>Remotion</strong></td><td>ç¨‹åºåŒ–è§†é¢‘ç”Ÿæˆ</td><td>React ç»„ä»¶ â†’ è§†é¢‘</td><td>~5MB</td><td>é«˜(æœåŠ¡ç«¯æ¸²æŸ“)</td><td>æ¨¡æ¿è§†é¢‘ç”Ÿæˆ</td></tr><tr><td><strong>fabric.js</strong></td><td>Canvas è§†é¢‘ç¼–è¾‘</td><td>å›¾å±‚ã€æ»¤é•œã€åˆæˆ</td><td>~200KB</td><td>é«˜</td><td>å®æ—¶è§†é¢‘ç¼–è¾‘</td></tr></tbody></table>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fffmpegwasm%2Fffmpeg.wasm" target="_blank" title="https://github.com/ffmpegwasm/ffmpeg.wasm" ref="nofollow noopener noreferrer">FFmpeg.wasm</a></strong> - FFmpeg çš„ WebAssembly ç‰ˆæœ¬ï¼Œæ”¯æŒæ‰€æœ‰ FFmpeg å‘½ä»¤ã€‚åŠŸèƒ½å®Œæ•´ä½†ä½“ç§¯å¤§(~25MB)ï¼Œé¦–æ¬¡åŠ è½½æ…¢ã€‚WASM æ€§èƒ½æ¥è¿‘åŸç”Ÿï¼Œæ¯”çº¯ JS å¿« 5-10 å€ã€‚é€‚åˆæµè§ˆå™¨ç«¯è§†é¢‘è½¬ç ã€æ ¼å¼è½¬æ¢ã€æ·»åŠ æ°´å°ç­‰å¤æ‚æ“ä½œã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fremotion-dev%2Fremotion" target="_blank" title="https://github.com/remotion-dev/remotion" ref="nofollow noopener noreferrer">Remotion</a></strong> - ç”¨ React ç»„ä»¶ç¼–å†™è§†é¢‘ï¼Œæ”¯æŒç¨‹åºåŒ–ç”Ÿæˆã€‚åœ¨æœåŠ¡ç«¯æ¸²æŸ“ä¸ºè§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒæ¨¡æ¿å˜é‡æ›¿æ¢ã€‚é€‚åˆæ‰¹é‡ç”Ÿæˆè¥é”€è§†é¢‘ã€æ•°æ®å¯è§†åŒ–è§†é¢‘ã€åŠ¨æ€æ¨¡æ¿è§†é¢‘ã€‚</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffabricjs%2Ffabric.js" target="_blank" title="https://github.com/fabricjs/fabric.js" ref="nofollow noopener noreferrer">fabric.js</a></strong> - Canvas åº“ï¼Œæ”¯æŒå›¾å±‚ã€æ»¤é•œã€å›¾åƒåˆæˆã€‚å¯ç”¨äºå®æ—¶è§†é¢‘ç¼–è¾‘(é€å¸§å¤„ç†)ï¼Œæä¾›ä¸°å¯Œçš„å›¾å½¢ç»˜åˆ¶èƒ½åŠ›ã€‚é€‚åˆè§†é¢‘è´´çº¸ã€æ°´å°ã€æ»¤é•œç­‰å®æ—¶ç¼–è¾‘åœºæ™¯ã€‚</p>
<h2 data-id="heading-41">å®‰å…¨ä¸ç‰ˆæƒä¿æŠ¤</h2>
<p>åœ¨çº¿éŸ³è§†é¢‘å†…å®¹é¢ä¸´ç›—ç‰ˆã€ç›—é“¾ã€éæ³•ä¸‹è½½ç­‰å¨èƒã€‚å®‰å…¨ä¸ç‰ˆæƒä¿æŠ¤æŠ€æœ¯é€šè¿‡å†…å®¹åŠ å¯†ã€æ•°å­—ç‰ˆæƒç®¡ç†(DRM)ã€è®¿é—®æ§åˆ¶ç­‰æ‰‹æ®µï¼Œç¡®ä¿å†…å®¹åªèƒ½è¢«æˆæƒç”¨æˆ·åœ¨åˆæ³•æ¡ä»¶ä¸‹è®¿é—®å’Œæ’­æ”¾ã€‚</p>
<h3 data-id="heading-42">DRM æ•°å­—ç‰ˆæƒç®¡ç†</h3>
<p>DRM(Digital Rights Management)é€šè¿‡åŠ å¯†å†…å®¹å’Œå¯†é’¥ç®¡ç†ï¼Œé˜²æ­¢æœªæˆæƒçš„å¤åˆ¶å’Œä¼ æ’­ã€‚æµè§ˆå™¨é€šè¿‡ EME(Encrypted Media Extensions)æ ‡å‡†æ”¯æŒ DRM æ’­æ”¾ã€‚</p>
<p><strong>ä¸»æµ DRM æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p>













































<table><thead><tr><th>DRM æ–¹æ¡ˆ</th><th>å¼€å‘è€…</th><th>å¹³å°æ”¯æŒ</th><th>å®‰å…¨çº§åˆ«</th><th>æˆæƒè´¹ç”¨</th><th>å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td><strong>Widevine</strong></td><td>Google</td><td>Chrome/Firefox/Edge/å®‰å“</td><td>L1-L3</td><td>å•†ä¸šæˆæƒ</td><td>YouTube/Netflix</td></tr><tr><td><strong>FairPlay</strong></td><td>Apple</td><td>Safari/iOS/tvOS</td><td>ç¡¬ä»¶çº§</td><td>å•†ä¸šæˆæƒ</td><td>Apple TV+</td></tr><tr><td><strong>PlayReady</strong></td><td>Microsoft</td><td>Edge/Xbox/Windows</td><td>ç¡¬ä»¶çº§</td><td>å•†ä¸šæˆæƒ</td><td>Microsoft ç”Ÿæ€</td></tr><tr><td><strong>ClearKey</strong></td><td>W3C</td><td>æ‰€æœ‰ç°ä»£æµè§ˆå™¨</td><td>è½¯ä»¶çº§</td><td>å…è´¹å¼€æº</td><td>æµ‹è¯•/ä½å®‰å…¨åœºæ™¯</td></tr></tbody></table>
<p><strong>åŸç†ï¼š</strong></p>
<p>DRM ä¿æŠ¤åˆ†ä¸ºä¸‰ä¸ªå…³é”®ç¯èŠ‚ï¼š</p>
<ol>
<li><strong>å†…å®¹åŠ å¯†</strong> - æœåŠ¡å™¨ä½¿ç”¨å¯†é’¥åŠ å¯†è§†é¢‘å†…å®¹ï¼Œç”ŸæˆåŠ å¯†è§†é¢‘æ–‡ä»¶</li>
<li><strong>å¯†é’¥æœåŠ¡å™¨</strong> - å®¢æˆ·ç«¯æ’­æ”¾æ—¶å‘è®¸å¯è¯æœåŠ¡å™¨è¯·æ±‚è§£å¯†å¯†é’¥</li>
<li><strong>è§£å¯†æ’­æ”¾</strong> - æµè§ˆå™¨ CDM(Content Decryption Module)åœ¨æ²™ç®±ä¸­è§£å¯†å¹¶æ’­æ”¾ï¼Œå¯†é’¥ä¸æš´éœ²ç»™ JavaScript</li>
</ol>
<p><strong>Widevine å®‰å…¨çº§åˆ«ï¼š</strong></p>
<ul>
<li><strong>L1(Level 1)</strong> - ç¡¬ä»¶çº§ä¿æŠ¤ï¼Œè§£å¯†å’Œè§£ç åœ¨ TEE(å¯ä¿¡æ‰§è¡Œç¯å¢ƒ)ä¸­è¿›è¡Œï¼Œæœ€é«˜å®‰å…¨</li>
<li><strong>L2</strong> - è§£ç åœ¨ TEEï¼Œä½†è§†é¢‘è§£ç åœ¨éå®‰å…¨åŒºåŸŸ</li>
<li><strong>L3</strong> - çº¯è½¯ä»¶å®ç°ï¼Œæœ€ä½å®‰å…¨ç­‰çº§ï¼Œæ˜“è¢«ç ´è§£</li>
</ul>
<h3 data-id="heading-43">EME - Encrypted Media Extensions</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FAPI%2FEncrypted_Media_Extensions_API" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/API/Encrypted_Media_Extensions_API" ref="nofollow noopener noreferrer">EME</a> æ˜¯ W3C æ ‡å‡†ï¼Œå®šä¹‰äº†æµè§ˆå™¨å¦‚ä½•æ’­æ”¾åŠ å¯†åª’ä½“å†…å®¹ã€‚é€šè¿‡ <code>MediaKeys</code> API ä¸ CDM é€šä¿¡ï¼Œè·å–è§£å¯†å¯†é’¥ã€‚</p>
<p><strong>åŸºæœ¬æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
<span class="hljs-keyword">const</span> config = [
  {
    <span class="hljs-attr">initDataTypes</span>: [<span class="hljs-string">"cenc"</span>],
    <span class="hljs-attr">videoCapabilities</span>: [
      {
        <span class="hljs-attr">contentType</span>: <span class="hljs-string">'video/mp4; codecs="avc1.42E01E"'</span>,
      },
    ],
  },
];

<span class="hljs-comment">// 1. æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦æ”¯æŒè¯¥ DRM æ–¹æ¡ˆ</span>
navigator
  .<span class="hljs-title function_">requestMediaKeySystemAccess</span>(<span class="hljs-string">"com.widevine.alpha"</span>, config)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">keySystemAccess</span>) =&gt;</span> {
    <span class="hljs-comment">// 2. åˆ›å»º MediaKeys å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> keySystemAccess.<span class="hljs-title function_">createMediaKeys</span>();
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">mediaKeys</span>) =&gt;</span> {
    <span class="hljs-comment">// 3. å°† MediaKeys ç»‘å®šåˆ° video å…ƒç´ </span>
    <span class="hljs-keyword">return</span> video.<span class="hljs-title function_">setMediaKeys</span>(mediaKeys);
  })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// 4. æ’­æ”¾åŠ å¯†å†…å®¹ï¼Œè§¦å‘ encrypted äº‹ä»¶</span>
    video.<span class="hljs-property">src</span> = <span class="hljs-string">"encrypted-video.mp4"</span>;
    video.<span class="hljs-title function_">play</span>();
  });

<span class="hljs-comment">// 5. å¤„ç† encrypted äº‹ä»¶ï¼Œè¯·æ±‚è®¸å¯è¯</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"encrypted"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> session = video.<span class="hljs-property">mediaKeys</span>.<span class="hljs-title function_">createSession</span>();

  <span class="hljs-comment">// 6. å‘è®¸å¯è¯æœåŠ¡å™¨è¯·æ±‚å¯†é’¥</span>
  session
    .<span class="hljs-title function_">generateRequest</span>(event.<span class="hljs-property">initDataType</span>, event.<span class="hljs-property">initData</span>)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// 7. è·å–è®¸å¯è¯æœåŠ¡å™¨å“åº”</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"https://license-server.com/license"</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
        <span class="hljs-attr">body</span>: session.<span class="hljs-property">message</span>, <span class="hljs-comment">// åŒ…å«è®¾å¤‡ä¿¡æ¯å’Œå†…å®¹ ID</span>
      });
    })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> response.<span class="hljs-title function_">arrayBuffer</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">license</span>) =&gt;</span> {
      <span class="hljs-comment">// 8. æ›´æ–°ä¼šè¯ï¼ŒCDM è§£å¯†å†…å®¹</span>
      <span class="hljs-keyword">return</span> session.<span class="hljs-title function_">update</span>(license);
    });
});
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li>è§£å¯†å¯†é’¥åœ¨ CDM æ²™ç®±ä¸­ï¼ŒJavaScript æ— æ³•è®¿é—®</li>
<li>è®¸å¯è¯æœåŠ¡å™¨éªŒè¯ç”¨æˆ·èº«ä»½ã€è®¾å¤‡ã€è®¢é˜…çŠ¶æ€ç­‰</li>
<li>L1 çº§åˆ« DRM è¦æ±‚ç¡¬ä»¶ TEE æ”¯æŒ(å¦‚ ARM TrustZone)</li>
</ul>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ä»˜è´¹è§†é¢‘å¹³å°</strong>ï¼šNetflixã€Disney+ ä½¿ç”¨ Widevine/FairPlay/PlayReady ä¸‰å¥— DRM è¦†ç›–æ‰€æœ‰å¹³å°</li>
<li><strong>åœ¨çº¿æ•™è‚²</strong>ï¼šé˜²æ­¢è¯¾ç¨‹è§†é¢‘è¢«å½•å±å’Œåˆ†äº«ï¼Œé€šå¸¸ä½¿ç”¨ L1 çº§ Widevine</li>
<li><strong>ä¼ä¸šåŸ¹è®­</strong>ï¼šå†…éƒ¨æ•æ„Ÿå†…å®¹åŠ å¯†æ’­æ”¾ï¼Œé™åˆ¶æ’­æ”¾è®¾å¤‡å’Œæ¬¡æ•°</li>
</ul>
<h3 data-id="heading-44">HLS å†…å®¹åŠ å¯†</h3>
<p>HLS æ”¯æŒ AES-128 åŠ å¯†ï¼Œæ— éœ€ DRM å³å¯å®ç°åŸºç¡€å†…å®¹ä¿æŠ¤ã€‚é€‚åˆå¯¹å®‰å…¨æ€§è¦æ±‚ä¸é«˜çš„åœºæ™¯ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>å¯†é’¥æ–‡ä»¶</strong> - æœåŠ¡å™¨ç”Ÿæˆ AES-128 å¯†é’¥ï¼Œå­˜å‚¨åœ¨å¯†é’¥æœåŠ¡å™¨</li>
<li><strong>m3u8 ç´¢å¼•</strong> - æ’­æ”¾åˆ—è¡¨ä¸­å£°æ˜å¯†é’¥ URLï¼š<code>#EXT-X-KEY:METHOD=AES-128,URI="https://key-server.com/key"</code></li>
<li><strong>å®¢æˆ·ç«¯è§£å¯†</strong> - æ’­æ”¾å™¨è¯·æ±‚å¯†é’¥ï¼Œä½¿ç”¨ AES-128 è§£å¯† TS ç‰‡æ®µ</li>
</ol>
<p><strong>åŸºç¡€ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-m3u8" lang="m3u8">#EXTM3U
#EXT-X-VERSION:3
#EXT-X-KEY:METHOD=AES-128,URI="https://example.com/key?token=abc123"
#EXTINF:10.0,
segment0.ts
#EXTINF:10.0,
segment1.ts
</code></pre>
<p><strong>å®‰å…¨æ€§åˆ†æï¼š</strong></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œæ— éœ€ DRM æˆæƒè´¹ç”¨ï¼Œæ‰€æœ‰æµè§ˆå™¨æ”¯æŒ</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¯†é’¥åœ¨ JavaScript ä¸­æš´éœ²ï¼Œå®¹æ˜“è¢«æŠ“åŒ…è·å–ï¼Œå®‰å…¨æ€§ä½äº DRM</li>
</ul>
<p><strong>å¢å¼ºæ–¹æ¡ˆï¼š</strong></p>
<ul>
<li><strong>åŠ¨æ€å¯†é’¥</strong> - æ¯ä¸ªç‰‡æ®µä½¿ç”¨ä¸åŒå¯†é’¥ï¼Œå¢åŠ ç ´è§£éš¾åº¦</li>
<li><strong>Token é‰´æƒ</strong> - å¯†é’¥ URL å¸¦æ—¶æ•ˆ Tokenï¼Œé˜²æ­¢å¯†é’¥è¢«ç›—ç”¨</li>
<li><strong>å¯†é’¥è½®æ¢</strong> - å®šæœŸæ›´æ¢å¯†é’¥ï¼Œé™åˆ¶å¯†é’¥æœ‰æ•ˆæœŸ</li>
</ul>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>UGC å¹³å°</strong>ï¼šB ç«™ã€æŠ–éŸ³ç­‰é˜²æ­¢è§†é¢‘è¢«ç›´æ¥ä¸‹è½½ï¼Œä½†ä¸è¦æ±‚ DRM çº§å®‰å…¨</li>
<li><strong>ä¼ä¸šå†…ç½‘</strong>ï¼šå†…éƒ¨åŸ¹è®­è§†é¢‘ï¼Œç‰©ç†éš”ç¦»ç¯å¢ƒæ— éœ€é«˜å®‰å…¨æ€§</li>
<li><strong>ä½æˆæœ¬ä¿æŠ¤</strong>ï¼šå°å‹è§†é¢‘å¹³å°ï¼Œæ— é¢„ç®—é‡‡è´­ DRM æˆæƒ</li>
</ul>
<h3 data-id="heading-45">è®¿é—®æ§åˆ¶æŠ€æœ¯</h3>
<p>é€šè¿‡é‰´æƒæœºåˆ¶æ§åˆ¶è°å¯ä»¥è®¿é—®è§†é¢‘èµ„æºï¼Œé˜²æ­¢ç›—é“¾å’Œæœªæˆæƒè®¿é—®ã€‚</p>
<p><strong>ä¸»æµè®¿é—®æ§åˆ¶æ–¹æ¡ˆå¯¹æ¯”ï¼š</strong></p>















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŸç†</th><th>å®‰å…¨æ€§</th><th>å®ç°å¤æ‚åº¦</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Token é‰´æƒ</strong></td><td>URL å¸¦æ—¶æ•ˆç­¾å Token</td><td>é«˜</td><td>ä¸­</td><td>ä»˜è´¹å†…å®¹ã€ç›´æ’­</td></tr><tr><td><strong>URL ç­¾å</strong></td><td>åŸºäºå¯†é’¥çš„ HMAC ç­¾å</td><td>é«˜</td><td>ä¸­</td><td>CDN é˜²ç›—é“¾</td></tr><tr><td><strong>Referer</strong></td><td>æ£€æŸ¥ HTTP Referer å¤´</td><td>ä½</td><td>ä½</td><td>åŸºç¡€é˜²ç›—é“¾</td></tr><tr><td><strong>IP ç™½åå•</strong></td><td>é™åˆ¶å…è®¸è®¿é—®çš„ IP æ®µ</td><td>ä¸­</td><td>ä½</td><td>ä¼ä¸šå†…ç½‘ã€VPN</td></tr><tr><td><strong>Cookie é‰´æƒ</strong></td><td>æ£€æŸ¥ç™»å½• Cookie</td><td>ä¸­</td><td>ä½</td><td>ç™»å½•ç”¨æˆ·éªŒè¯</td></tr></tbody></table>
<p><strong>Token é‰´æƒåŸç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœåŠ¡ç«¯ç”Ÿæˆå¸¦ç­¾åçš„ URL(Node.js ç¤ºä¾‹)</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">"crypto"</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateSecureUrl</span>(<span class="hljs-params">videoPath, secretKey, expireSeconds</span>) {
  <span class="hljs-keyword">const</span> expireTime = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() / <span class="hljs-number">1000</span>) + expireSeconds;
  <span class="hljs-keyword">const</span> message = <span class="hljs-string">`<span class="hljs-subst">${videoPath}</span><span class="hljs-subst">${expireTime}</span>`</span>;
  <span class="hljs-keyword">const</span> signature = crypto.<span class="hljs-title function_">createHmac</span>(<span class="hljs-string">"sha256"</span>, secretKey).<span class="hljs-title function_">update</span>(message).<span class="hljs-title function_">digest</span>(<span class="hljs-string">"hex"</span>);

  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${videoPath}</span>?expire=<span class="hljs-subst">${expireTime}</span>&amp;sign=<span class="hljs-subst">${signature}</span>`</span>;
}

<span class="hljs-comment">// ç”Ÿæˆ 1 å°æ—¶æœ‰æ•ˆçš„è§†é¢‘ URL</span>
<span class="hljs-keyword">const</span> secureUrl = <span class="hljs-title function_">generateSecureUrl</span>(<span class="hljs-string">"/videos/movie.m3u8"</span>, <span class="hljs-string">"my-secret-key"</span>, <span class="hljs-number">3600</span>);
<span class="hljs-comment">// /videos/movie.m3u8?expire=1704067200&amp;sign=a3f2c9...</span>
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// CDN è¾¹ç¼˜èŠ‚ç‚¹éªŒè¯(ä¼ªä»£ç )</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateToken</span>(<span class="hljs-params">url, secretKey</span>) {
  <span class="hljs-keyword">const</span> { videoPath, expire, sign } = <span class="hljs-title function_">parseUrl</span>(url);

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿‡æœŸ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() / <span class="hljs-number">1000</span> &gt; expire) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// è¿‡æœŸ</span>
  }

  <span class="hljs-comment">// é‡æ–°è®¡ç®—ç­¾å</span>
  <span class="hljs-keyword">const</span> message = <span class="hljs-string">`<span class="hljs-subst">${videoPath}</span><span class="hljs-subst">${expire}</span>`</span>;
  <span class="hljs-keyword">const</span> expectedSign = crypto.<span class="hljs-title function_">createHmac</span>(<span class="hljs-string">"sha256"</span>, secretKey).<span class="hljs-title function_">update</span>(message).<span class="hljs-title function_">digest</span>(<span class="hljs-string">"hex"</span>);

  <span class="hljs-keyword">return</span> sign === expectedSign; <span class="hljs-comment">// ç­¾ååŒ¹é…</span>
}
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<ul>
<li><strong>æ—¶æ•ˆæ€§</strong> - Token å¸¦è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢ URL è¢«é•¿æœŸç›—ç”¨</li>
<li><strong>ä¸å¯ä¼ªé€ </strong> - ç­¾ååŸºäºæœåŠ¡ç«¯å¯†é’¥ï¼Œæ”»å‡»è€…æ— æ³•ä¼ªé€ æœ‰æ•ˆç­¾å</li>
<li><strong>å•æ¬¡ä½¿ç”¨</strong> - å¯å¢åŠ éšæœº nonceï¼Œé˜²æ­¢ URL è¢«é‡å¤ä½¿ç”¨</li>
</ul>
<p><strong>Referer é˜²ç›—é“¾ï¼š</strong></p>
<pre><code class="hljs language-nginx" lang="nginx"># Nginx é…ç½®ç¤ºä¾‹
location ~* \.(m3u8|ts|mp4)$ {
    valid_referers none blocked *.example.com;
    if ($invalid_referer) {
        return 403;
    }
}
</code></pre>
<p><strong>å±€é™æ€§</strong> - Referer å¯è¢«ä¼ªé€ ï¼Œä»…é€‚åˆåŸºç¡€é˜²æŠ¤</p>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ä»˜è´¹è§†é¢‘</strong> - Token é‰´æƒ + DRMï¼ŒåŒé‡ä¿æŠ¤é«˜ä»·å€¼å†…å®¹</li>
<li><strong>ç›´æ’­é‰´æƒ</strong> - åŠ¨æ€ç”Ÿæˆæ¨æµ/æ‹‰æµ Tokenï¼Œé˜²æ­¢æœªæˆæƒæ¨æµ</li>
<li><strong>CDN é˜²ç›—é“¾</strong> - URL ç­¾åé˜²æ­¢è§†é¢‘è¢«å…¶ä»–ç½‘ç«™ç›—é“¾æ¶ˆè€—å¸¦å®½</li>
</ul>
<h2 data-id="heading-46">æ€§èƒ½ä¼˜åŒ–ä¸è´¨é‡ç›‘æ§</h2>
<p>å¤šåª’ä½“åº”ç”¨çš„ç”¨æˆ·ä½“éªŒç›´æ¥å–å†³äºæ’­æ”¾æ€§èƒ½å’Œè´¨é‡ç¨³å®šæ€§ã€‚æœ¬ç« ä»‹ç»å…³é”®æ€§èƒ½æŒ‡æ ‡(QoE/QoS)ã€ä¼˜åŒ–ç­–ç•¥(ABRã€é¢„åŠ è½½ã€å¤šçº¿ç¨‹)ã€ä»¥åŠç›‘æ§å·¥å…·,å¸®åŠ©å¼€å‘è€…æ„å»ºé«˜æ€§èƒ½ã€ä½å¡é¡¿çš„éŸ³è§†é¢‘åº”ç”¨ã€‚</p>
<h3 data-id="heading-47">å…³é”®æ€§èƒ½æŒ‡æ ‡</h3>
<p><strong>QoE(Quality of Experience)ç”¨æˆ·ä½“éªŒè´¨é‡æŒ‡æ ‡ï¼š</strong></p>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>å®šä¹‰</th><th>ç›®æ ‡å€¼</th><th>å½±å“å› ç´ </th></tr></thead><tbody><tr><td><strong>é¦–å±æ—¶é—´</strong></td><td>ç‚¹å‡»æ’­æ”¾åˆ°æ˜¾ç¤ºé¦–å¸§çš„æ—¶é—´</td><td>&lt;1 ç§’(ç‚¹æ’­)/&lt;3 ç§’(ç›´æ’­)</td><td>ç½‘ç»œå»¶è¿Ÿã€DNS è§£æã€CDN</td></tr><tr><td><strong>å¡é¡¿ç‡</strong></td><td>æ’­æ”¾è¿‡ç¨‹ä¸­å¡é¡¿æ—¶é•¿å æ¯”</td><td>&lt;0.5%</td><td>ç¼“å†²ç­–ç•¥ã€ç½‘ç»œæŠ–åŠ¨</td></tr><tr><td><strong>å¡é¡¿æ¬¡æ•°</strong></td><td>æ’­æ”¾è¿‡ç¨‹ä¸­å¡é¡¿å‘ç”Ÿæ¬¡æ•°</td><td>&lt;2 æ¬¡/å°æ—¶</td><td>å¸¦å®½æ³¢åŠ¨ã€ABR åˆ‡æ¢</td></tr><tr><td><strong>æ’­æ”¾ç ç‡</strong></td><td>å®é™…æ’­æ”¾çš„ç ç‡æ¡£ä½</td><td>è‡ªé€‚åº”æœ€é«˜</td><td>å¸¦å®½ã€è®¾å¤‡æ€§èƒ½</td></tr><tr><td><strong>æ’­æ”¾æˆåŠŸç‡</strong></td><td>æˆåŠŸæ’­æ”¾å æ’­æ”¾è¯·æ±‚çš„æ¯”ä¾‹</td><td>&gt;99%</td><td>æ ¼å¼å…¼å®¹æ€§ã€DRM é”™è¯¯</td></tr></tbody></table>
<p><strong>QoS(Quality of Service)ç½‘ç»œè´¨é‡æŒ‡æ ‡ï¼š</strong></p>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>å®šä¹‰</th><th>ç›®æ ‡å€¼</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>ç ç‡</strong></td><td>è§†é¢‘ä¼ è¾“é€Ÿç‡</td><td>æ ¹æ®åˆ†è¾¨ç‡é€‰æ‹©</td><td>ç”»è´¨ã€å¸¦å®½æ¶ˆè€—</td></tr><tr><td><strong>ä¸¢åŒ…ç‡</strong></td><td>ä¸¢å¤±çš„æ•°æ®åŒ…å æ¯”</td><td>&lt;1%(ç›´æ’­/&lt;0.1%ç‚¹æ’­)</td><td>ç”»é¢å¤±çœŸã€å¡é¡¿</td></tr><tr><td><strong>RTT</strong></td><td>å¾€è¿”æ—¶å»¶</td><td>&lt;100ms(å®æ—¶é€šä¿¡)</td><td>äº¤äº’å»¶è¿Ÿæ„Ÿ</td></tr><tr><td><strong>æŠ–åŠ¨</strong></td><td>å»¶è¿Ÿçš„å˜åŒ–ç¨‹åº¦</td><td>&lt;30ms</td><td>æ’­æ”¾æµç•…æ€§</td></tr><tr><td><strong>å¸¦å®½</strong></td><td>å¯ç”¨ç½‘ç»œä¼ è¾“é€Ÿåº¦</td><td>&gt;ç ç‡ 1.5 å€</td><td>èƒ½å¦æµç•…æ’­æ”¾</td></tr></tbody></table>
<p><strong>ç›‘æ§å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ HTMLMediaElement ç›‘æ§æ’­æ”¾æŒ‡æ ‡</span>
<span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);
<span class="hljs-keyword">const</span> metrics = {
  <span class="hljs-attr">startTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
  <span class="hljs-attr">bufferingCount</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">bufferingDuration</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">currentBitrate</span>: <span class="hljs-number">0</span>,
};

<span class="hljs-comment">// é¦–å±æ—¶é—´</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"loadeddata"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> ttfb = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - metrics.<span class="hljs-property">startTime</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¦–å±æ—¶é—´: <span class="hljs-subst">${ttfb}</span>ms`</span>);
  <span class="hljs-comment">// ä¸ŠæŠ¥ç›‘æ§ç³»ç»Ÿ</span>
  <span class="hljs-title function_">reportMetric</span>(<span class="hljs-string">"ttfb"</span>, ttfb);
});

<span class="hljs-comment">// å¡é¡¿ç›‘æ§</span>
<span class="hljs-keyword">let</span> bufferingStart = <span class="hljs-number">0</span>;
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"waiting"</span>, <span class="hljs-function">() =&gt;</span> {
  bufferingStart = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  metrics.<span class="hljs-property">bufferingCount</span>++;
});

video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"playing"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (bufferingStart) {
    <span class="hljs-keyword">const</span> bufferingTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - bufferingStart;
    metrics.<span class="hljs-property">bufferingDuration</span> += bufferingTime;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¡é¡¿: <span class="hljs-subst">${bufferingTime}</span>ms, æ€»å¡é¡¿: <span class="hljs-subst">${metrics.bufferingCount}</span> æ¬¡`</span>);
  }
});

<span class="hljs-comment">// è®¡ç®—å¡é¡¿ç‡</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"ended"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> totalDuration = video.<span class="hljs-property">duration</span> * <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">const</span> bufferingRate = (metrics.<span class="hljs-property">bufferingDuration</span> / totalDuration) * <span class="hljs-number">100</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¡é¡¿ç‡: <span class="hljs-subst">${bufferingRate.toFixed(<span class="hljs-number">2</span>)}</span>%`</span>);
});
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>è§†é¢‘å¹³å°</strong> - å®æ—¶ç›‘æ§å¡é¡¿ç‡å’Œé¦–å±æ—¶é—´,å‘ç° CDN èŠ‚ç‚¹æ•…éšœå’Œç½‘ç»œæ‹¥å¡</li>
<li><strong>ç›´æ’­åº”ç”¨</strong> - ç›‘æ§ç«¯åˆ°ç«¯å»¶è¿Ÿå’Œä¸¢åŒ…ç‡,ä¿è¯å®æ—¶æ€§</li>
<li><strong>æ•™è‚²å¹³å°</strong> - ç›‘æ§æ’­æ”¾æˆåŠŸç‡,åŠæ—¶å‘ç°æ ¼å¼å…¼å®¹æ€§å’Œ DRM æˆæƒé—®é¢˜</li>
</ul>
<h3 data-id="heading-48">ä¼˜åŒ–ç­–ç•¥</h3>
<p><strong>ä¸»æµä¼˜åŒ–ç­–ç•¥å¯¹æ¯”ï¼š</strong></p>






















































<table><thead><tr><th>ç­–ç•¥</th><th>åŸç†</th><th>æ•ˆæœ</th><th>å®ç°æˆæœ¬</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é¢„åŠ è½½</strong></td><td>æå‰åŠ è½½å…³é”®èµ„æº</td><td>å‡å°‘é¦–å±æ—¶é—´ 50%+</td><td>ä½</td><td>ç‚¹æ’­ã€é¢„çŸ¥æ’­æ”¾</td></tr><tr><td><strong>ABR è‡ªé€‚åº”ç ç‡</strong></td><td>åŠ¨æ€åˆ‡æ¢ç ç‡æ¡£ä½</td><td>å‡å°‘å¡é¡¿ 70%+</td><td>ä¸­</td><td>æ‰€æœ‰æµåª’ä½“</td></tr><tr><td><strong>åˆ†ç‰‡åŠ è½½</strong></td><td>æŒ‰éœ€åŠ è½½è§†é¢‘ç‰‡æ®µ</td><td>å‡å°‘åˆå§‹åŠ è½½ 90%+</td><td>ä½</td><td>é•¿è§†é¢‘ã€ç‚¹æ’­</td></tr><tr><td><strong>P2P CDN</strong></td><td>ç”¨æˆ·é—´å…±äº«æ•°æ®</td><td>èŠ‚çœå¸¦å®½ 30-70%</td><td>é«˜</td><td>å¤§è§„æ¨¡ç›´æ’­</td></tr><tr><td><strong>å¤šçº¿ç¨‹è§£ç </strong></td><td>Web Workers è§£ç </td><td>æå‡è§£ç æ€§èƒ½ 2-3 å€</td><td>ä¸­</td><td>è½¯è§£å¤æ‚ç¼–ç </td></tr><tr><td><strong>Service Worker</strong></td><td>ç¦»çº¿ç¼“å­˜èµ„æº</td><td>ç¦»çº¿æ’­æ”¾ã€ç§’å¼€</td><td>ä¸­</td><td>PWAã€é‡å¤è§‚çœ‹</td></tr></tbody></table>
<h4 data-id="heading-49">é¢„åŠ è½½ä¼˜åŒ–</h4>
<p><strong>Link Preload - æå‰åŠ è½½å…³é”®èµ„æºï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- é¢„åŠ è½½è§†é¢‘æ–‡ä»¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"video"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"intro.mp4"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„åŠ è½½ HLS æ’­æ”¾åˆ—è¡¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"fetch"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"video.m3u8"</span> <span class="hljs-attr">crossorigin</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- é¢„åŠ è½½æµ·æŠ¥å›¾ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"preload"</span> <span class="hljs-attr">as</span>=<span class="hljs-string">"image"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"poster.jpg"</span> /&gt;</span>
</code></pre>
<p><strong>Video Preload å±æ€§ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"video"</span>);

<span class="hljs-comment">// none - ä¸é¢„åŠ è½½(çœæµé‡)</span>
video.<span class="hljs-property">preload</span> = <span class="hljs-string">"none"</span>;

<span class="hljs-comment">// metadata - ä»…åŠ è½½å…ƒæ•°æ®(æ—¶é•¿ã€å°ºå¯¸ã€é¦–å¸§)</span>
video.<span class="hljs-property">preload</span> = <span class="hljs-string">"metadata"</span>; <span class="hljs-comment">// é»˜è®¤å€¼</span>

<span class="hljs-comment">// auto - é¢„åŠ è½½æ•´ä¸ªè§†é¢‘(é€‚åˆ Wi-Fi)</span>
video.<span class="hljs-property">preload</span> = <span class="hljs-string">"auto"</span>;
</code></pre>
<p><strong>æ™ºèƒ½é¢„åŠ è½½ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹æ®ç½‘ç»œç±»å‹å†³å®šé¢„åŠ è½½ç­–ç•¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getPreloadStrategy</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> connection = navigator.<span class="hljs-property">connection</span> || navigator.<span class="hljs-property">mozConnection</span> || navigator.<span class="hljs-property">webkitConnection</span>;

  <span class="hljs-keyword">if</span> (!connection) <span class="hljs-keyword">return</span> <span class="hljs-string">"metadata"</span>;

  <span class="hljs-comment">// 4G/5G é¢„åŠ è½½è§†é¢‘</span>
  <span class="hljs-keyword">if</span> (connection.<span class="hljs-property">effectiveType</span> === <span class="hljs-string">"4g"</span> || connection.<span class="hljs-property">effectiveType</span> === <span class="hljs-string">"5g"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"auto"</span>;
  }

  <span class="hljs-comment">// 3G ä»…åŠ è½½å…ƒæ•°æ®</span>
  <span class="hljs-keyword">if</span> (connection.<span class="hljs-property">effectiveType</span> === <span class="hljs-string">"3g"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"metadata"</span>;
  }

  <span class="hljs-comment">// 2G/æ…¢é€Ÿç½‘ç»œä¸é¢„åŠ è½½</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">"none"</span>;
}

video.<span class="hljs-property">preload</span> = <span class="hljs-title function_">getPreloadStrategy</span>();
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>çŸ­è§†é¢‘åˆ—è¡¨</strong> - é¢„åŠ è½½å¯è§†åŒºåŸŸçš„ä¸‹ä¸€ä¸ªè§†é¢‘,å®ç°å¿«é€Ÿåˆ‡æ¢</li>
<li><strong>ä»˜è´¹è¯•çœ‹</strong> - ä»… preload metadata,é¿å…æµªè´¹å¸¦å®½</li>
<li><strong>è‡ªåŠ¨æ’­æ”¾</strong> - Wi-Fi ä¸‹ preload auto,ç§»åŠ¨ç½‘ç»œ preload none</li>
</ul>
<h4 data-id="heading-50">ABR è‡ªé€‚åº”ç ç‡</h4>
<p>ABR(Adaptive Bitrate)æ ¹æ®ç½‘ç»œå¸¦å®½åŠ¨æ€åˆ‡æ¢è§†é¢‘ç ç‡æ¡£ä½,å¹³è¡¡ç”»è´¨å’Œæµç•…æ€§ã€‚</p>
<p><strong>åŸç†ï¼š</strong></p>
<ol>
<li><strong>å¸¦å®½æ£€æµ‹</strong> - æµ‹é‡å½“å‰ä¸‹è½½é€Ÿåº¦</li>
<li><strong>ç ç‡é€‰æ‹©</strong> - é€‰æ‹©ç•¥ä½äºå¸¦å®½çš„ç ç‡æ¡£ä½(å¦‚ 480p/720p/1080p)</li>
<li><strong>å¹³æ»‘åˆ‡æ¢</strong> - åœ¨ç‰‡æ®µè¾¹ç•Œåˆ‡æ¢,ç”¨æˆ·æ— æ„ŸçŸ¥</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ hls.js çš„ ABR é…ç½®</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Hls</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"hls.js"</span>;

<span class="hljs-keyword">const</span> hls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hls</span>({
  <span class="hljs-comment">// ABR ç®—æ³•é…ç½®</span>
  <span class="hljs-attr">abrEwmaDefaultEstimate</span>: <span class="hljs-number">500000</span>, <span class="hljs-comment">// åˆå§‹å¸¦å®½ä¼°è®¡(500 Kbps)</span>
  <span class="hljs-attr">abrEwmaSlowVoD</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// æ…¢é€Ÿç½‘ç»œè¡°å‡å› å­</span>
  <span class="hljs-attr">abrEwmaFastVoD</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// å¿«é€Ÿç½‘ç»œè¡°å‡å› å­</span>
  <span class="hljs-attr">abrBandWidthFactor</span>: <span class="hljs-number">0.95</span>, <span class="hljs-comment">// å¸¦å®½å®‰å…¨ç³»æ•°(é€‰æ‹© 95% ç ç‡)</span>
  <span class="hljs-attr">abrBandWidthUpFactor</span>: <span class="hljs-number">0.7</span>, <span class="hljs-comment">// ä¸Šè°ƒç ç‡é˜ˆå€¼(å¸¦å®½éœ€è¾¾åˆ° 70%)</span>
});

hls.<span class="hljs-title function_">loadSource</span>(<span class="hljs-string">"video.m3u8"</span>);
hls.<span class="hljs-title function_">attachMedia</span>(video);

<span class="hljs-comment">// ç›‘å¬ç ç‡åˆ‡æ¢</span>
hls.<span class="hljs-title function_">on</span>(<span class="hljs-title class_">Hls</span>.<span class="hljs-property">Events</span>.<span class="hljs-property">LEVEL_SWITCHED</span>, <span class="hljs-function">(<span class="hljs-params">event, data</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> level = hls.<span class="hljs-property">levels</span>[data.<span class="hljs-property">level</span>];
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ‡æ¢åˆ°: <span class="hljs-subst">${level.height}</span>p, ç ç‡: <span class="hljs-subst">${level.bitrate / <span class="hljs-number">1000</span>}</span> Kbps`</span>);
});

<span class="hljs-comment">// æ‰‹åŠ¨é”å®šç ç‡æ¡£ä½</span>
hls.<span class="hljs-property">currentLevel</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// é”å®šåˆ°ç¬¬ 3 ä¸ªç ç‡æ¡£ä½</span>
hls.<span class="hljs-property">currentLevel</span> = -<span class="hljs-number">1</span>; <span class="hljs-comment">// æ¢å¤è‡ªåŠ¨ ABR</span>
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ç§»åŠ¨ç½‘ç»œ</strong> - ç½‘ç»œæ³¢åŠ¨å¤§,ABR è‡ªåŠ¨é™ä½ç ç‡é¿å…å¡é¡¿</li>
<li><strong>å¼±ç½‘ç¯å¢ƒ</strong> - 2G/3G ç½‘ç»œè‡ªåŠ¨æ’­æ”¾ä½ç ç‡,ä¿è¯æµç•…</li>
<li><strong>Wi-Fi åˆ‡æ¢</strong> - ä»ç§»åŠ¨ç½‘ç»œåˆ‡åˆ° Wi-Fi,è‡ªåŠ¨æå‡ç ç‡</li>
</ul>
<h4 data-id="heading-51">å¤šçº¿ç¨‹å¤„ç†</h4>
<p>åˆ©ç”¨ Web Workers åœ¨åå°çº¿ç¨‹å¤„ç†è§£ç ã€è½¬ç ç­‰ CPU å¯†é›†ä»»åŠ¡,é¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<p><strong>Web Workers è§†é¢‘å¤„ç†ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main.js - ä¸»çº¿ç¨‹</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">"video-processor.worker.js"</span>);

<span class="hljs-comment">// å‘é€è§†é¢‘å¸§åˆ° Worker</span>
worker.<span class="hljs-title function_">postMessage</span>({
  <span class="hljs-attr">type</span>: <span class="hljs-string">"process"</span>,
  <span class="hljs-attr">frame</span>: videoFrame,
  <span class="hljs-attr">filter</span>: <span class="hljs-string">"grayscale"</span>,
});

<span class="hljs-comment">// æ¥æ”¶å¤„ç†åçš„å¸§</span>
worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> processedFrame = event.<span class="hljs-property">data</span>.<span class="hljs-property">frame</span>;
  <span class="hljs-title function_">drawToCanvas</span>(processedFrame);
};
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// video-processor.worker.js - Worker çº¿ç¨‹</span>
self.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { frame, filter } = event.<span class="hljs-property">data</span>;

  <span class="hljs-comment">// CPU å¯†é›†å‹å¤„ç†(ä¸é˜»å¡ä¸»çº¿ç¨‹)</span>
  <span class="hljs-keyword">const</span> processed = <span class="hljs-title function_">applyFilter</span>(frame, filter);

  <span class="hljs-comment">// è¿”å›ç»“æœ</span>
  self.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">frame</span>: processed });
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyFilter</span>(<span class="hljs-params">frame, filter</span>) {
  <span class="hljs-comment">// åƒç´ å¤„ç†é€»è¾‘</span>
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">return</span> processedFrame;
}
</code></pre>
<p><strong>SharedArrayBuffer - é›¶æ‹·è´æ•°æ®å…±äº«ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºå…±äº«å†…å­˜</span>
<span class="hljs-keyword">const</span> sharedBuffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SharedArrayBuffer</span>(<span class="hljs-number">1920</span> * <span class="hljs-number">1080</span> * <span class="hljs-number">4</span>); <span class="hljs-comment">// 1080p RGBA</span>
<span class="hljs-keyword">const</span> sharedArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8ClampedArray</span>(sharedBuffer);

<span class="hljs-comment">// ä¸»çº¿ç¨‹å†™å…¥å¸§æ•°æ®</span>
ctx.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1920</span>, <span class="hljs-number">1080</span>).<span class="hljs-property">data</span>.<span class="hljs-title function_">set</span>(sharedArray);

<span class="hljs-comment">// Worker ç›´æ¥è¯»å–,æ— éœ€æ‹·è´</span>
worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">buffer</span>: sharedBuffer }, []);
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>è½¯ä»¶è§£ç </strong> - WebCodecs è§£ç åœ¨ Worker,é¿å…ä¸»çº¿ç¨‹æ‰å¸§</li>
<li><strong>å®æ—¶æ»¤é•œ</strong> - ç¾é¢œã€æ»¤é•œåœ¨ Worker å¤„ç†,ä¿æŒ UI æµç•…</li>
<li><strong>è§†é¢‘è½¬ç </strong> - FFmpeg.wasm åœ¨ Worker è¿è¡Œ,ä¸é˜»å¡ç•Œé¢</li>
</ul>
<h4 data-id="heading-52">Service Worker ç¦»çº¿ç¼“å­˜</h4>
<p>Service Worker æ‹¦æˆªç½‘ç»œè¯·æ±‚,å®ç°è§†é¢‘èµ„æºçš„ç¦»çº¿ç¼“å­˜å’Œç§’å¼€ã€‚</p>
<p><strong>åŸºç¡€å®ç°ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// sw.js - Service Worker</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CACHE_NAME</span> = <span class="hljs-string">"video-cache-v1"</span>;
<span class="hljs-keyword">const</span> urlsToCache = [<span class="hljs-string">"/video.m3u8"</span>, <span class="hljs-string">"/segment-0.ts"</span>, <span class="hljs-string">"/segment-1.ts"</span>];

<span class="hljs-comment">// å®‰è£…æ—¶ç¼“å­˜èµ„æº</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"install"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">waitUntil</span>(caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> cache.<span class="hljs-title function_">addAll</span>(urlsToCache)));
});

<span class="hljs-comment">// æ‹¦æˆªè¯·æ±‚,ä¼˜å…ˆè¿”å›ç¼“å­˜</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"fetch"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  event.<span class="hljs-title function_">respondWith</span>(
    caches.<span class="hljs-title function_">match</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
      <span class="hljs-comment">// ç¼“å­˜å‘½ä¸­,ç›´æ¥è¿”å›</span>
      <span class="hljs-keyword">if</span> (response) {
        <span class="hljs-keyword">return</span> response;
      }

      <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­,è¯·æ±‚ç½‘ç»œ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(event.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">networkResponse</span>) =&gt;</span> {
        <span class="hljs-comment">// ç¼“å­˜å“åº”</span>
        <span class="hljs-keyword">if</span> (networkResponse.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) {
          <span class="hljs-keyword">const</span> responseClone = networkResponse.<span class="hljs-title function_">clone</span>();
          caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> {
            cache.<span class="hljs-title function_">put</span>(event.<span class="hljs-property">request</span>, responseClone);
          });
        }
        <span class="hljs-keyword">return</span> networkResponse;
      });
    })
  );
});
</code></pre>
<p><strong>æ™ºèƒ½ç¼“å­˜ç­–ç•¥ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ ¹æ®æ–‡ä»¶ç±»å‹é‡‡ç”¨ä¸åŒç­–ç•¥</span>
self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"fetch"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(event.<span class="hljs-property">request</span>.<span class="hljs-property">url</span>);

  <span class="hljs-comment">// m3u8 - ç½‘ç»œä¼˜å…ˆ(åŠæ—¶æ›´æ–°)</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".m3u8"</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">networkFirst</span>(event.<span class="hljs-property">request</span>));
  }

  <span class="hljs-comment">// ts ç‰‡æ®µ - ç¼“å­˜ä¼˜å…ˆ(ä¸å˜å†…å®¹)</span>
  <span class="hljs-keyword">if</span> (url.<span class="hljs-property">pathname</span>.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">".ts"</span>)) {
    event.<span class="hljs-title function_">respondWith</span>(<span class="hljs-title function_">cacheFirst</span>(event.<span class="hljs-property">request</span>));
  }
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cacheFirst</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">await</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>);
  <span class="hljs-keyword">const</span> cached = <span class="hljs-keyword">await</span> cache.<span class="hljs-title function_">match</span>(request);
  <span class="hljs-keyword">return</span> cached || <span class="hljs-title function_">fetch</span>(request);
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">networkFirst</span>(<span class="hljs-params">request</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(request);
    <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">await</span> caches.<span class="hljs-title function_">open</span>(<span class="hljs-variable constant_">CACHE_NAME</span>);
    cache.<span class="hljs-title function_">put</span>(request, response.<span class="hljs-title function_">clone</span>());
    <span class="hljs-keyword">return</span> response;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> caches.<span class="hljs-title function_">match</span>(request); <span class="hljs-comment">// ç½‘ç»œå¤±è´¥å›é€€ç¼“å­˜</span>
  }
}
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>ç¦»çº¿æ’­æ”¾</strong> - ç¼“å­˜å®Œæ•´è§†é¢‘,æ”¯æŒé£è¡Œæ¨¡å¼è§‚çœ‹</li>
<li><strong>ç§’å¼€ä¼˜åŒ–</strong> - ç¼“å­˜é¦–ä¸ªç‰‡æ®µ,æ’­æ”¾ç«‹å³å¼€å§‹</li>
<li><strong>å‡å°‘æµé‡</strong> - é‡å¤è§‚çœ‹çš„è§†é¢‘ä»ç¼“å­˜åŠ è½½</li>
</ul>
<h3 data-id="heading-53">ç›‘æ§å·¥å…·</h3>
<p><strong>Chrome DevTools Media Panelï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¿é—® chrome://media-internals/ æŸ¥çœ‹ï¼š</span>
<span class="hljs-comment">// - è§£ç å™¨ä¿¡æ¯(ç¡¬ä»¶/è½¯ä»¶)</span>
<span class="hljs-comment">// - ç¼“å†²çŠ¶æ€</span>
<span class="hljs-comment">// - ç½‘ç»œè¯·æ±‚æ—¶é—´çº¿</span>
<span class="hljs-comment">// - ä¸¢å¸§ç»Ÿè®¡</span>
</code></pre>
<p><strong>WebRTC internalsï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®¿é—® chrome://webrtc-internals/ æŸ¥çœ‹ï¼š</span>
<span class="hljs-comment">// - ICE è¿æ¥çŠ¶æ€</span>
<span class="hljs-comment">// - å®æ—¶ç ç‡/ä¸¢åŒ…ç‡/RTT</span>
<span class="hljs-comment">// - ç¼–è§£ç å™¨å‚æ•°</span>
</code></pre>
<p><strong>Performance API ç›‘æ§ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Performance Observer ç›‘æ§</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${entry.name}</span>: <span class="hljs-subst">${entry.duration}</span>ms`</span>);
    <span class="hljs-title function_">reportMetric</span>(entry);
  }
});

observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">"measure"</span>, <span class="hljs-string">"resource"</span>] });

<span class="hljs-comment">// æ ‡è®°å…³é”®æ—¶é—´ç‚¹</span>
performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">"video-load-start"</span>);
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"loadeddata"</span>, <span class="hljs-function">() =&gt;</span> {
  performance.<span class="hljs-title function_">mark</span>(<span class="hljs-string">"video-load-end"</span>);
  performance.<span class="hljs-title function_">measure</span>(<span class="hljs-string">"video-load-duration"</span>, <span class="hljs-string">"video-load-start"</span>, <span class="hljs-string">"video-load-end"</span>);
});
</code></pre>
<p><strong>å…¸å‹åœºæ™¯ï¼š</strong></p>
<ul>
<li><strong>æ€§èƒ½å›å½’</strong> - CI/CD ä¸­è‡ªåŠ¨åŒ–ç›‘æ§é¦–å±æ—¶é—´,å‘ç°æ€§èƒ½åŠ£åŒ–</li>
<li><strong>A/B æµ‹è¯•</strong> - å¯¹æ¯”ä¸åŒä¼˜åŒ–ç­–ç•¥çš„å®é™…æ•ˆæœ</li>
<li><strong>ç”¨æˆ·ç›‘æ§</strong> - æ”¶é›†çœŸå®ç”¨æˆ·çš„æ’­æ”¾è´¨é‡æ•°æ®,ä¼˜åŒ– CDN ç­–ç•¥</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸€)ï¼šæ˜¾ç¤ºæ¡†æ¶æ€»è§ˆä¸SurfaceFlingeræ ¸å¿ƒæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7595808703074910234</link>    <guid>https://juejin.cn/post/7595808703074910234</guid>    <pubDate>2026-01-17T12:33:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703074910234" data-draft-id="7596299957276704795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸€)ï¼šæ˜¾ç¤ºæ¡†æ¶æ€»è§ˆä¸SurfaceFlingeræ ¸å¿ƒæœºåˆ¶"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-17T12:33:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(ä¸€)ï¼šæ˜¾ç¤ºæ¡†æ¶æ€»è§ˆä¸SurfaceFlingeræ ¸å¿ƒæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T12:33:45.000Z" title="Sat Jan 17 2026 12:33:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>"åœ¨Androidç³»ç»Ÿä¸­ï¼Œæ˜¾ç¤ºå­ç³»ç»Ÿå°±åƒä¸€ä¸ªç²¾å¯†çš„äº¤å“ä¹å›¢ï¼Œåº”ç”¨å±‚æ˜¯ä½œæ›²å®¶ï¼ŒSurfaceFlingeræ˜¯æŒ‡æŒ¥å®¶ï¼Œå„ä¸ªLayeræ˜¯æ¼”å¥å®¶ï¼Œè€Œå±å¹•åˆ™æ˜¯èˆå°ã€‚åªæœ‰å„ä¸ªè§’è‰²å®Œç¾é…åˆï¼Œæ‰èƒ½å‘ˆç°æµç•…ä¸æ»‘çš„è§†è§‰ä½“éªŒã€‚"</p>
</blockquote>
<p>ä½œä¸ºAndroidç³»ç»Ÿä¸­æœ€å¤æ‚ã€æœ€æ ¸å¿ƒçš„å­ç³»ç»Ÿä¹‹ä¸€ï¼Œæ˜¾ç¤ºå­ç³»ç»Ÿæ‰¿æ‹…ç€å°†åº”ç”¨ç»˜åˆ¶çš„å†…å®¹é«˜æ•ˆå‘ˆç°åˆ°å±å¹•ä¸Šçš„é‡ä»»ã€‚æ— è®ºæ˜¯æ»‘åŠ¨åˆ—è¡¨çš„ä¸æ»‘æµç•…ï¼Œè¿˜æ˜¯è§†é¢‘æ’­æ”¾çš„ç”»é¢ç¨³å®šï¼ŒèƒŒåéƒ½ç¦»ä¸å¼€æ˜¾ç¤ºå­ç³»ç»Ÿçš„ç²¾å¯†è°ƒåº¦ã€‚</p>
<p><strong>Android 15åœ¨æ˜¾ç¤ºç³»ç»Ÿæ–¹é¢è¿›è¡Œäº†é‡å¤§ä¼˜åŒ–</strong>ï¼ŒåŒ…æ‹¬Canvasç°ä»£åŒ–æ”¹é€ ã€CanvasKité›†æˆã€HWC 3.0æ”¯æŒç­‰ï¼Œä½¿å¾—æ¸²æŸ“æ€§èƒ½å’ŒåŠŸè€—éƒ½æœ‰äº†æ˜¾è‘—æå‡ã€‚ä½œä¸ºã€ŠAndroid 15æ ¸å¿ƒå­ç³»ç»Ÿæ·±åº¦è§£æã€‹ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£Androidæ˜¾ç¤ºæ¡†æ¶çš„æ•´ä½“æ¶æ„ï¼Œå¹¶é‡ç‚¹å‰–æSurfaceFlingerè¿™ä¸€æ ¸å¿ƒæœåŠ¡çš„å·¥ä½œæœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">ä½ å°†å­¦åˆ°ä»€ä¹ˆ</h3>
<ul>
<li>Androidæ˜¾ç¤ºæ ˆçš„å®Œæ•´åˆ†å±‚æ¶æ„</li>
<li>SurfaceFlingeræœåŠ¡çš„å¯åŠ¨ä¸åˆå§‹åŒ–æµç¨‹</li>
<li>Surfaceçš„æœ¬è´¨åŠå…¶åˆ›å»ºç®¡ç†æœºåˆ¶</li>
<li>SurfaceFlingerçš„åˆæˆå¾ªç¯æ ¸å¿ƒæµç¨‹</li>
<li>å®ç”¨çš„è°ƒè¯•æŠ€å·§å’Œé—®é¢˜æ’æŸ¥æ–¹æ³•</li>
<li>Android 15çš„æ˜¾ç¤ºç³»ç»Ÿæ–°ç‰¹æ€§</li>
</ul>
<h3 data-id="heading-2">å‰ç½®çŸ¥è¯†</h3>
<ul>
<li>Androidåº”ç”¨å¼€å‘åŸºç¡€ï¼ˆå››å¤§ç»„ä»¶ã€Viewç»˜åˆ¶æµç¨‹ï¼‰</li>
<li>åŸºæœ¬çš„Linuxè¿›ç¨‹é—´é€šä¿¡æ¦‚å¿µ</li>
<li>å›¾å½¢å­¦åŸºç¡€æ¦‚å¿µï¼ˆå¸§ç¼“å†²ã€åŒç¼“å†²ç­‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-3">Androidæ˜¾ç¤ºç³»ç»Ÿæ¶æ„æ€»è§ˆ</h2>
<p>Androidçš„æ˜¾ç¤ºç³»ç»Ÿé‡‡ç”¨ç»å…¸çš„åˆ†å±‚è®¾è®¡ï¼Œä»åº”ç”¨å±‚åˆ°ç¡¬ä»¶é©±åŠ¨å±‚å…±åˆ†ä¸ºå››å±‚ï¼Œæ¯ä¸€å±‚éƒ½æœ‰æ˜ç¡®çš„èŒè´£è¾¹ç•Œã€‚</p>
<h3 data-id="heading-4">æ˜¾ç¤ºæ ˆçš„åˆ†å±‚æ¶æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bec8ea58ee554bfc8fb9011a2bea40f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258025&amp;x-signature=lTBvPLWeVV6IdxfJfII%2B8dhW4g4%3D" alt="01-01-android-display-architecture.png" loading="lazy"/></p>
<p><em>å›¾1: Androidæ˜¾ç¤ºç³»ç»Ÿçš„å››å±‚æ¶æ„</em></p>
<p>è®©æˆ‘ä»¬ä»ä¸Šåˆ°ä¸‹é€å±‚è§£æï¼š</p>
<h4 data-id="heading-5">1. åº”ç”¨å±‚ (Application Layer)</h4>
<p>åº”ç”¨å±‚æ˜¯å¼€å‘è€…æœ€ç†Ÿæ‚‰çš„éƒ¨åˆ†ï¼Œæä¾›äº†å¤šç§ç»˜åˆ¶APIï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// View/Canvas - æœ€å¸¸ç”¨çš„ç»˜åˆ¶æ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomView</span>(context: Context) : View(context) {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDraw</span><span class="hljs-params">(canvas: <span class="hljs-type">Canvas</span>)</span></span> {
        canvas.drawCircle(<span class="hljs-number">100f</span>, <span class="hljs-number">100f</span>, <span class="hljs-number">50f</span>, paint)
    }
}

<span class="hljs-comment">// SurfaceView - ç‹¬ç«‹Surfaceï¼Œæ”¯æŒå­çº¿ç¨‹ç»˜åˆ¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GameView</span>(context: Context) : SurfaceView(context), SurfaceHolder.Callback {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">surfaceCreated</span><span class="hljs-params">(holder: <span class="hljs-type">SurfaceHolder</span>)</span></span> {
        <span class="hljs-comment">// åœ¨ç‹¬ç«‹çº¿ç¨‹ä¸­ç»˜åˆ¶</span>
        thread {
            <span class="hljs-keyword">val</span> canvas = holder.lockCanvas()
            <span class="hljs-comment">// ç»˜åˆ¶æ¸¸æˆç”»é¢</span>
            holder.unlockCanvasAndPost(canvas)
        }
    }
}

<span class="hljs-comment">// TextureView - å¯ä»¥åƒæ™®é€šViewä¸€æ ·å˜æ¢</span>
<span class="hljs-keyword">val</span> textureView = TextureView(context)
textureView.surfaceTextureListener = <span class="hljs-keyword">object</span> : SurfaceTextureListener {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceTextureAvailable</span><span class="hljs-params">(surface: <span class="hljs-type">SurfaceTexture</span>, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// ç»˜åˆ¶é€»è¾‘</span>
    }
}
</code></pre>
<p><strong>ä¸‰ç§ç»˜åˆ¶æ–¹å¼çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>View/Canvas</strong>: æœ€ç®€å•ï¼Œä½†åªèƒ½åœ¨UIçº¿ç¨‹ç»˜åˆ¶ï¼Œé€‚åˆé™æ€å†…å®¹</li>
<li><strong>SurfaceView</strong>: æ‹¥æœ‰ç‹¬ç«‹Surfaceï¼Œå¯å­çº¿ç¨‹ç»˜åˆ¶ï¼Œé€‚åˆæ¸¸æˆå’Œè§†é¢‘</li>
<li><strong>TextureView</strong>: åŸºäºSurfaceTextureï¼Œæ”¯æŒViewå˜æ¢ï¼ˆæ—‹è½¬ã€ç¼©æ”¾ï¼‰ï¼Œä½†æ€§èƒ½ç•¥ä½</li>
</ul>
<h4 data-id="heading-6">2. Frameworkå±‚ (Framework Layer)</h4>
<p>Frameworkå±‚è´Ÿè´£ç®¡ç†çª—å£å’Œåè°ƒç»˜åˆ¶ï¼š</p>
<p><strong>WindowManager</strong>: çª—å£ç®¡ç†å™¨ï¼Œè´Ÿè´£Windowçš„æ·»åŠ ã€åˆ é™¤å’Œå¸ƒå±€</p>
<ul>
<li>æ¯ä¸ªActivityã€Dialogã€PopupWindowéƒ½å¯¹åº”ä¸€ä¸ªWindow</li>
<li>ç®¡ç†Windowçš„Z-orderï¼ˆå±‚çº§é¡ºåºï¼‰</li>
<li>ä¸WindowManagerServiceé€šä¿¡</li>
</ul>
<p><strong>ViewRootImpl</strong>: è¿æ¥Viewå’ŒWindowManagerçš„æ¡¥æ¢</p>
<ul>
<li>æ¯ä¸ªWindowéƒ½æœ‰ä¸€ä¸ªViewRootImpl</li>
<li>è´Ÿè´£Viewæ ‘çš„measureã€layoutã€draw</li>
<li>ç®¡ç†Surfaceçš„åˆ›å»ºå’Œæ›´æ–°</li>
<li>å¤„ç†è¾“å…¥äº‹ä»¶åˆ†å‘</li>
</ul>
<p><strong>Surface (Javaå±‚)</strong>: è·¨è¿›ç¨‹ç»˜åˆ¶çš„"ç”»å¸ƒ"</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// frameworks/base/core/java/android/view/Surface.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Surface</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Parcelable</span> {
    <span class="hljs-comment">// Nativeå±‚Surfaceçš„å¼•ç”¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> mNativeObject;

    <span class="hljs-comment">// é”å®šç”»å¸ƒè¿›è¡Œç»˜åˆ¶</span>
    <span class="hljs-keyword">public</span> Canvas <span class="hljs-title function_">lockCanvas</span><span class="hljs-params">(Rect inOutDirty)</span> {
        <span class="hljs-comment">// ä»BufferQueueè·å–GraphicBuffer</span>
        <span class="hljs-comment">// è¿”å›Canvasä¾›åº”ç”¨ç»˜åˆ¶</span>
    }

    <span class="hljs-comment">// æäº¤ç»˜åˆ¶ç»“æœ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlockCanvasAndPost</span><span class="hljs-params">(Canvas canvas)</span> {
        <span class="hljs-comment">// å°†GraphicBufferæäº¤åˆ°BufferQueue</span>
    }
}
</code></pre>
<h4 data-id="heading-7">3. Nativeå±‚ (Native Layer)</h4>
<p>Nativeå±‚æ˜¯æ˜¾ç¤ºç³»ç»Ÿçš„æ ¸å¿ƒï¼Œä¸»è¦åŒ…å«ï¼š</p>
<p><strong>SurfaceFlinger</strong>: ç³»ç»ŸåˆæˆæœåŠ¡ï¼Œæœ¬æ–‡é‡ç‚¹è®²è§£å¯¹è±¡</p>
<ul>
<li>è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹ï¼ˆPIDé€šå¸¸è¾ƒå°ï¼‰</li>
<li>è´Ÿè´£æ‰€æœ‰Layerçš„åˆæˆ</li>
<li>é©±åŠ¨æ•´ä¸ªæ¸²æŸ“ç®¡çº¿</li>
</ul>
<p><strong>BufferQueue</strong>: ç”Ÿäº§è€…-æ¶ˆè´¹è€…é˜Ÿåˆ—</p>
<ul>
<li>åº”ç”¨ï¼ˆProducerï¼‰è´Ÿè´£ç”Ÿäº§GraphicBuffer</li>
<li>SurfaceFlingerï¼ˆConsumerï¼‰è´Ÿè´£æ¶ˆè´¹GraphicBuffer</li>
<li>å…¸å‹é…ç½®ï¼š2-3ä¸ªBufferï¼ˆåŒç¼“å†²/ä¸‰é‡ç¼“å†²ï¼‰</li>
</ul>
<p><strong>GraphicBuffer</strong>: è·¨è¿›ç¨‹å…±äº«çš„å›¾å½¢ç¼“å†²åŒº</p>
<ul>
<li>åŸºäºåŒ¿åå…±äº«å†…å­˜(ashmem)æˆ–ION</li>
<li>é€šè¿‡Gralloc HALåˆ†é…</li>
<li>å¯åŒæ—¶è¢«CPUå’ŒGPUè®¿é—®</li>
</ul>
<p><strong>HWC (Hardware Composer)</strong>: ç¡¬ä»¶åˆæˆå™¨</p>
<ul>
<li>ç”±ç¡¬ä»¶å‚å•†å®ç°çš„HALå±‚</li>
<li>å¯ä»¥åˆ©ç”¨ç¡¬ä»¶åŠ é€ŸåˆæˆLayer</li>
<li>Android 15ä½¿ç”¨HWC 3.0ç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-8">4. é©±åŠ¨å±‚ (Driver Layer)</h4>
<p><strong>Display Driver</strong>: æ˜¾ç¤ºé©±åŠ¨</p>
<ul>
<li>æ§åˆ¶å±å¹•æ˜¾ç¤ºæ—¶åº</li>
<li>äº§ç”Ÿç¡¬ä»¶Vsyncä¿¡å·</li>
<li>ç®¡ç†æ˜¾ç¤ºæ¨¡å¼ï¼ˆåˆ†è¾¨ç‡ã€åˆ·æ–°ç‡ï¼‰</li>
</ul>
<p><strong>GPU Driver</strong>: å›¾å½¢å¤„ç†å™¨é©±åŠ¨</p>
<ul>
<li>æ‰§è¡ŒOpenGL ES / VulkanæŒ‡ä»¤</li>
<li>è¿›è¡Œå›¾å½¢æ¸²æŸ“</li>
<li>ä¸Display DriverååŒå·¥ä½œ</li>
</ul>
<h3 data-id="heading-9">ä»åº”ç”¨ç»˜åˆ¶åˆ°å±å¹•æ˜¾ç¤ºçš„å®Œæ•´æµç¨‹</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç†è§£æ•°æ®æ˜¯å¦‚ä½•ä»åº”ç”¨æµå‘å±å¹•çš„ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åº”ç”¨å±‚ï¼šå¼€å‘è€…è°ƒç”¨View.invalidate()</span>
customView.invalidate()

<span class="hljs-comment">// 2. Frameworkå±‚ï¼šViewRootImplè°ƒåº¦ç»˜åˆ¶</span>
<span class="hljs-comment">// ViewRootImpl.scheduleTraversals()</span>
<span class="hljs-comment">//   â†’ Choreographer.postCallback(CALLBACK_TRAVERSAL)</span>
<span class="hljs-comment">//   â†’ ç­‰å¾…Vsyncä¿¡å·</span>

<span class="hljs-comment">// 3. Vsyncä¿¡å·åˆ°è¾¾</span>
<span class="hljs-comment">//   â†’ ViewRootImpl.doTraversal()</span>
<span class="hljs-comment">//   â†’ performDraw()</span>
<span class="hljs-comment">//   â†’ drawSoftware() æˆ– drawHardware()</span>

<span class="hljs-comment">// 4. ç»˜åˆ¶åˆ°Surface</span>
<span class="hljs-comment">//   â†’ Canvas canvas = surface.lockCanvas()</span>
<span class="hljs-comment">//   â†’ view.draw(canvas)  // æ‰§è¡ŒonDraw()</span>
<span class="hljs-comment">//   â†’ surface.unlockCanvasAndPost(canvas)</span>

<span class="hljs-comment">// 5. Nativeå±‚ï¼šBufferæäº¤åˆ°BufferQueue</span>
<span class="hljs-comment">//   â†’ BufferQueue.queueBuffer()</span>
<span class="hljs-comment">//   â†’ é€šçŸ¥SurfaceFlingeræœ‰æ–°å†…å®¹</span>

<span class="hljs-comment">// 6. SurfaceFlingeråˆæˆ</span>
<span class="hljs-comment">//   â†’ ä»BufferQueueè·å–Buffer</span>
<span class="hljs-comment">//   â†’ å†³å®šGPUåˆæˆè¿˜æ˜¯HWCåˆæˆ</span>
<span class="hljs-comment">//   â†’ å°†æ‰€æœ‰Layeråˆæˆåˆ°FrameBuffer</span>

<span class="hljs-comment">// 7. é©±åŠ¨å±‚ï¼šè¾“å‡ºåˆ°å±å¹•</span>
<span class="hljs-comment">//   â†’ Display Driveræ˜¾ç¤ºFrameBufferå†…å®¹</span>
</code></pre>

**å°çŸ¥è¯†**: åœ¨Androidç³»ç»Ÿä¸­ï¼Œå‡ ä¹æ‰€æœ‰çš„æ¸²æŸ“éƒ½ä¼šèµ°SurfaceFlingerè¿›è¡Œåˆæˆï¼ŒåŒ…æ‹¬SystemUIï¼ˆçŠ¶æ€æ ã€å¯¼èˆªæ ï¼‰ã€Wallpaperï¼ˆå£çº¸ï¼‰ã€ä»¥åŠæ‰€æœ‰åº”ç”¨çª—å£ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆSurfaceFlingeræ€§èƒ½å¦‚æ­¤å…³é”®çš„åŸå› ã€‚

<h3 data-id="heading-10">Android 15æ˜¾ç¤ºç³»ç»Ÿçš„æ–°ç‰¹æ€§</h3>
<p>Android 15åœ¨æ˜¾ç¤ºç³»ç»Ÿæ–¹é¢è¿›è¡Œäº†å¤šé¡¹é‡è¦ä¼˜åŒ–ï¼š</p>
<p><strong>1. Canvasç°ä»£åŒ–æ”¹é€ </strong></p>
<ul>
<li>å¼•å…¥CanvasKitï¼ˆåŸºäºSkiaçš„Webæ¸²æŸ“å¼•æ“ï¼‰</li>
<li>æ”¹è¿›Canvas APIæ€§èƒ½</li>
<li>æ›´å¥½çš„æ–‡æœ¬æ¸²æŸ“æ•ˆæœ</li>
</ul>
<p><strong>2. HWC 3.0æ”¯æŒ</strong></p>
<ul>
<li>æ›´çµæ´»çš„Layeråˆæˆç­–ç•¥</li>
<li>æ”¹è¿›çš„è‰²å½©ç®¡ç†</li>
<li>æ›´ä½çš„åŠŸè€—</li>
</ul>
<p><strong>3. åŠ¨æ€åˆ·æ–°ç‡ä¼˜åŒ–</strong></p>
<ul>
<li>æ›´æ™ºèƒ½çš„åˆ·æ–°ç‡åˆ‡æ¢</li>
<li>å‡å°‘ä¸å¿…è¦çš„é«˜åˆ·æ–°ç‡</li>
<li>æ”¹å–„ç”µæ± ç»­èˆª</li>
</ul>
<p><strong>4. HDRæ”¯æŒå¢å¼º</strong></p>
<ul>
<li>æ›´å®Œå–„çš„HDR10+æ”¯æŒ</li>
<li>æ”¹è¿›çš„è‰²å½©ç©ºé—´è½¬æ¢</li>
<li>æ›´å¥½çš„HDRå†…å®¹æ˜¾ç¤ºæ•ˆæœ</li>
</ul>
<hr/>
<h2 data-id="heading-11">SurfaceFlingeræœåŠ¡å¯åŠ¨ä¸åˆå§‹åŒ–</h2>
<p>SurfaceFlingerä½œä¸ºAndroidæ˜¾ç¤ºç³»ç»Ÿçš„æ ¸å¿ƒæœåŠ¡ï¼Œå…¶å¯åŠ¨å’Œåˆå§‹åŒ–è¿‡ç¨‹å¥ å®šäº†æ•´ä¸ªæ˜¾ç¤ºç³»ç»Ÿçš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-12">SurfaceFlingerçš„å¯åŠ¨æ—¶æœº</h3>
<p>SurfaceFlingerç”±initè¿›ç¨‹åœ¨ç³»ç»Ÿå¯åŠ¨æ—©æœŸæ‹‰èµ·ï¼Œå…¶å¯åŠ¨é…ç½®å®šä¹‰åœ¨<code>surfaceflinger.rc</code>ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># frameworks/native/services/surfaceflinger/surfaceflinger.rc</span>
service surfaceflinger /system/bin/surfaceflinger
    class core animation
    user system
    group graphics drmrpc readproc
    capabilities SYS_NICE
    onrestart restart --only-if-running zygote
    task_profiles HighPerformance
    socket pdx/system/vr/display/client     stream 0666 system graphics u:object_r:pdx_display_client_endpoint_socket:s0
    socket pdx/system/vr/display/manager    stream 0666 system graphics u:object_r:pdx_display_manager_endpoint_socket:s0
    socket pdx/system/vr/display/vsync      stream 0666 system graphics u:object_r:pdx_display_vsync_endpoint_socket:s0
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>class core animation</code>: å±äºæ ¸å¿ƒæœåŠ¡ï¼Œåœ¨<code>animation</code>ç±»å¯åŠ¨</li>
<li><code>user system</code>: ä»¥systemç”¨æˆ·èº«ä»½è¿è¡Œ</li>
<li><code>group graphics</code>: æ‹¥æœ‰graphicsç»„æƒé™ï¼Œå¯è®¿é—®GPUè®¾å¤‡</li>
<li><code>task_profiles HighPerformance</code>: é«˜æ€§èƒ½è°ƒåº¦ç­–ç•¥</li>
<li><code>onrestart restart --only-if-running zygote</code>: å¦‚æœå´©æºƒï¼Œé‡å¯Zygoteï¼ˆå› ä¸ºæ‰€æœ‰åº”ç”¨éƒ½ä¾èµ–å®ƒï¼‰</li>
</ul>
<h3 data-id="heading-13">æœåŠ¡å¯åŠ¨æµç¨‹</h3>
<p>SurfaceFlingerçš„å¯åŠ¨ä»<code>main.cpp</code>å¼€å§‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/main_surfaceflinger.cpp</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">char</span>**)</span> </span>{
    <span class="hljs-comment">// è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§</span>
    <span class="hljs-built_in">signal</span>(SIGPIPE, SIG_IGN);

    <span class="hljs-comment">// åˆ›å»ºProcessStateï¼ˆBinderé€šä¿¡åŸºç¡€ï¼‰</span>
    <span class="hljs-function">sp&lt;ProcessState&gt; <span class="hljs-title">ps</span><span class="hljs-params">(ProcessState::self())</span></span>;
    ps-&gt;<span class="hljs-built_in">setThreadPoolMaxThreadCount</span>(<span class="hljs-number">4</span>);
    ps-&gt;<span class="hljs-built_in">startThreadPool</span>();

    <span class="hljs-comment">// åˆ›å»ºSurfaceFlingerå®ä¾‹</span>
    sp&lt;SurfaceFlinger&gt; flinger = surfaceflinger::<span class="hljs-built_in">createSurfaceFlinger</span>();

    <span class="hljs-comment">// è®¾ç½®ä¸ºç³»ç»ŸæœåŠ¡</span>
    flinger-&gt;<span class="hljs-built_in">init</span>();

    <span class="hljs-comment">// æ³¨å†Œåˆ°ServiceManager</span>
    <span class="hljs-function">sp&lt;IServiceManager&gt; <span class="hljs-title">sm</span><span class="hljs-params">(defaultServiceManager())</span></span>;
    sm-&gt;<span class="hljs-built_in">addService</span>(<span class="hljs-built_in">String16</span>(SurfaceFlinger::<span class="hljs-built_in">getServiceName</span>()), flinger,
                   <span class="hljs-literal">false</span>, IServiceManager::DUMP_FLAG_PRIORITY_CRITICAL |
                          IServiceManager::DUMP_FLAG_PROTO);

    <span class="hljs-comment">// å¯åŠ¨çº¿ç¨‹æ± </span>
    <span class="hljs-built_in">startDisplayService</span>(); <span class="hljs-comment">// dependency on SF getting registered above</span>

    <span class="hljs-comment">// è¿è¡Œä¸»å¾ªç¯</span>
    flinger-&gt;<span class="hljs-built_in">run</span>();

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-14">æ ¸å¿ƒæ•°æ®ç»“æ„åˆå§‹åŒ–</h3>
<p>åœ¨<code>SurfaceFlinger::init()</code>ä¸­ï¼Œä¼šåˆå§‹åŒ–å¤§é‡æ ¸å¿ƒç»„ä»¶ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp (ç®€åŒ–)</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::init</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">ALOGI</span>(<span class="hljs-string">"SurfaceFlinger is starting"</span>);

    <span class="hljs-comment">// 1. åˆ›å»ºHWComposerï¼ˆç¡¬ä»¶åˆæˆå™¨ï¼‰</span>
    mCompositionEngine-&gt;<span class="hljs-built_in">setHwComposer</span>(<span class="hljs-built_in">getFactory</span>().<span class="hljs-built_in">createHWComposer</span>(mHwcServiceName));

    <span class="hljs-comment">// 2. åˆ›å»ºRenderEngineï¼ˆGPUæ¸²æŸ“å¼•æ“ï¼‰</span>
    mCompositionEngine-&gt;<span class="hljs-built_in">setRenderEngine</span>(
        renderengine::RenderEngine::<span class="hljs-built_in">create</span>(
            renderengine::RenderEngineCreationArgs::<span class="hljs-built_in">Builder</span>()
                .<span class="hljs-built_in">setPixelFormat</span>(defaultCompositionPixelFormat)
                .<span class="hljs-built_in">setImageCacheSize</span>(maxFrameBufferAcquiredBuffers)
                .<span class="hljs-built_in">setUseColorManagerment</span>(useColorManagement)
                .<span class="hljs-built_in">setEnableProtectedContext</span>(<span class="hljs-built_in">enable_protected_contents</span>(<span class="hljs-literal">false</span>))
                .<span class="hljs-built_in">setPrecacheToneMapperShaderOnly</span>(<span class="hljs-literal">false</span>)
                .<span class="hljs-built_in">setSupportsBackgroundBlur</span>(mSupportsBlur)
                .<span class="hljs-built_in">setContextPriority</span>(useContextPriority
                    ? renderengine::RenderEngine::ContextPriority::REALTIME
                    : renderengine::RenderEngine::ContextPriority::MEDIUM)
                .<span class="hljs-built_in">build</span>()));

    <span class="hljs-comment">// 3. åˆ›å»ºSchedulerï¼ˆè°ƒåº¦å™¨ï¼Œç®¡ç†Vsyncï¼‰</span>
    mScheduler = <span class="hljs-built_in">getFactory</span>().<span class="hljs-built_in">createScheduler</span>(...)

    <span class="hljs-comment">// 4. åˆå§‹åŒ–DisplayDevice</span>
    <span class="hljs-built_in">initializeDisplays</span>();

    <span class="hljs-comment">// 5. åˆ›å»ºEventThreadï¼ˆäº‹ä»¶çº¿ç¨‹ï¼‰</span>
    mEventThreads.<span class="hljs-built_in">push_back</span>(
        mScheduler-&gt;<span class="hljs-built_in">makeEventThread</span>(<span class="hljs-string">"app"</span>, ...));  <span class="hljs-comment">// app-vsync</span>
    mEventThreads.<span class="hljs-built_in">push_back</span>(
        mScheduler-&gt;<span class="hljs-built_in">makeEventThread</span>(<span class="hljs-string">"appSf"</span>, ...)); <span class="hljs-comment">// sf-vsync</span>

    <span class="hljs-comment">// 6. å¯åŠ¨åˆæˆå¾ªç¯</span>
    mScheduler-&gt;<span class="hljs-built_in">startThin</span>();

    <span class="hljs-built_in">ALOGI</span>(<span class="hljs-string">"SurfaceFlinger init completed"</span>);
}
</code></pre>
<p><strong>æ ¸å¿ƒç»„ä»¶è¯´æ˜</strong>ï¼š</p>
<p><strong>HWComposer (Hardware Composer)</strong></p>
<ul>
<li>ä¸ç¡¬ä»¶åˆæˆå™¨HALäº¤äº’</li>
<li>ç®¡ç†Displayè®¾å¤‡</li>
<li>å†³å®šLayerçš„åˆæˆç­–ç•¥ï¼ˆGPU vs ç¡¬ä»¶ï¼‰</li>
</ul>
<p><strong>RenderEngine</strong></p>
<ul>
<li>å°è£…GPUæ¸²æŸ“èƒ½åŠ›</li>
<li>é€šå¸¸åŸºäºOpenGL ESæˆ–Skia</li>
<li>è´Ÿè´£GPUåˆæˆè·¯å¾„</li>
</ul>
<p><strong>Scheduler</strong></p>
<ul>
<li>ç®¡ç†Vsyncä¿¡å·</li>
<li>è°ƒåº¦åˆæˆæ—¶æœº</li>
<li>æ§åˆ¶åˆ·æ–°ç‡</li>
</ul>
<p><strong>EventThread</strong></p>
<ul>
<li>åˆ†å‘Vsyncäº‹ä»¶</li>
<li><code>app-vsync</code>: é€šçŸ¥åº”ç”¨å±‚ï¼ˆChoreographerï¼‰</li>
<li><code>sf-vsync</code>: é€šçŸ¥SurfaceFlingerè‡ªå·±</li>
</ul>
<h3 data-id="heading-15">ä¸ç³»ç»ŸæœåŠ¡çš„äº¤äº’</h3>
<p>SurfaceFlingeréœ€è¦ä¸å¤šä¸ªç³»ç»ŸæœåŠ¡åä½œï¼š</p>
<p><strong>1. å‘ServiceManageræ³¨å†Œ</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ³¨å†Œä¸ºISurfaceComposeræœåŠ¡</span>
sm-&gt;<span class="hljs-built_in">addService</span>(<span class="hljs-built_in">String16</span>(<span class="hljs-string">"SurfaceFlinger"</span>), flinger, ...)
</code></pre>
<p>å…¶ä»–è¿›ç¨‹å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–SurfaceFlingeræœåŠ¡ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">sp&lt;ISurfaceComposer&gt; sf = <span class="hljs-built_in">interface_cast</span>&lt;ISurfaceComposer&gt;(
    <span class="hljs-built_in">defaultServiceManager</span>()-&gt;<span class="hljs-built_in">getService</span>(<span class="hljs-built_in">String16</span>(<span class="hljs-string">"SurfaceFlinger"</span>)));
</code></pre>
<p><strong>2. ä¸WindowManagerServiceåä½œ</strong></p>
<ul>
<li>WMSè´Ÿè´£çª—å£ç®¡ç†å’Œç­–ç•¥å†³ç­–</li>
<li>SurfaceFlingerè´Ÿè´£å®é™…çš„å›¾å½¢åˆæˆ</li>
<li>é€šè¿‡Binder IPCè¿›è¡Œé€šä¿¡</li>
</ul>
<p><strong>3. æ¥æ”¶ç¡¬ä»¶Vsync</strong></p>
<ul>
<li>ä»Display Driveræ¥æ”¶ç¡¬ä»¶Vsyncä¸­æ–­</li>
<li>é€šè¿‡HWC HALä¼ é€’ç»™SurfaceFlinger</li>
<li>é©±åŠ¨æ•´ä¸ªæ¸²æŸ“ç®¡çº¿</li>
</ul>
<hr/>
<h2 data-id="heading-16">Surfaceåˆ›å»ºä¸ç®¡ç†æœºåˆ¶</h2>
<p>Surfaceæ˜¯Androidæ˜¾ç¤ºç³»ç»Ÿä¸­æœ€æ ¸å¿ƒçš„æ¦‚å¿µä¹‹ä¸€ï¼Œç†è§£Surfaceçš„æœ¬è´¨å’Œç®¡ç†æœºåˆ¶æ˜¯æŒæ¡æ˜¾ç¤ºç³»ç»Ÿçš„å…³é”®ã€‚</p>
<h3 data-id="heading-17">Surfaceçš„æœ¬è´¨ï¼šè·¨è¿›ç¨‹å…±äº«çš„ç”»å¸ƒ</h3>
<p><strong>Surfaceæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè·¨è¿›ç¨‹å…±äº«çš„ç»˜åˆ¶ç¼“å†²åŒºçš„å°è£…</strong>ã€‚å®ƒè¿æ¥äº†ä¸¤ä¸ªè§’è‰²ï¼š</p>
<ul>
<li><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong>: åº”ç”¨è¿›ç¨‹ï¼Œè´Ÿè´£ç»˜åˆ¶å†…å®¹</li>
<li><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>: SurfaceFlingerè¿›ç¨‹ï¼Œè´Ÿè´£åˆæˆæ˜¾ç¤º</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Surfaceçš„æ ¸å¿ƒç»“æ„ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Surface</span> {
    <span class="hljs-comment">// æŒ‡å‘Nativeå±‚Surfaceå¯¹è±¡</span>
    sp&lt;IGraphicBufferProducer&gt; mGraphicBufferProducer;

    <span class="hljs-comment">// å½“å‰æ­£åœ¨ä½¿ç”¨çš„GraphicBuffer</span>
    sp&lt;GraphicBuffer&gt; mLockedBuffer;

    <span class="hljs-comment">// BufferQueueçš„é…ç½®</span>
    <span class="hljs-type">uint32_t</span> mReqWidth;
    <span class="hljs-type">uint32_t</span> mReqHeight;
    PixelFormat mReqFormat;
};
</code></pre>
<h3 data-id="heading-18">Surfaceåˆ›å»ºæµç¨‹è¯¦è§£</h3>
<p>è®©æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸ªActivityçª—å£çš„Surfaceåˆ›å»ºå…¨è¿‡ç¨‹ï¼š</p>
<h4 data-id="heading-19">1. åº”ç”¨ä¾§ï¼šActivityå¯åŠ¨</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Activity.onCreate()è¢«è°ƒç”¨å</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">Activity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        <span class="hljs-comment">// æ­¤æ—¶è¿˜æ²¡æœ‰Surface</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onResume</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onResume()
        <span class="hljs-comment">// ViewRootImplå·²åˆ›å»ºï¼ŒSurfaceå³å°†åˆ›å»º</span>
    }
}
</code></pre>
<h4 data-id="heading-20">2. Frameworkä¾§ï¼šViewRootImplåˆ›å»ºSurface</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// frameworks/base/core/java/android/view/ViewRootImpl.java (ç®€åŒ–)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewRootImpl</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">Surface</span> <span class="hljs-variable">mSurface</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Surface</span>(); <span class="hljs-comment">// åˆ›å»ºSurfaceå¯¹è±¡</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performTraversals</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡å¸ƒå±€æ—¶ï¼Œè¯·æ±‚åˆ›å»ºSurface</span>
        <span class="hljs-keyword">if</span> (mSurfaceHolder == <span class="hljs-literal">null</span>) {
            relayoutWindow(params, viewVisibility, insetsPending);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-title function_">relayoutWindow</span><span class="hljs-params">(WindowManager.LayoutParams params, ...)</span> {
        <span class="hljs-comment">// é€šè¿‡WMSè¯·æ±‚SurfaceFlingeråˆ›å»ºSurface</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">relayoutResult</span> <span class="hljs-operator">=</span> mWindowSession.relayout(
            mWindow, params, ..., mSurface); <span class="hljs-comment">// mSurfaceä½œä¸ºè¾“å‡ºå‚æ•°</span>

        <span class="hljs-keyword">return</span> relayoutResult;
    }
}
</code></pre>
<h4 data-id="heading-21">3. Nativeä¾§ï¼šSurfaceFlingeråˆ›å»ºLayerå’ŒBufferQueue</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp (ç®€åŒ–)</span>
<span class="hljs-function"><span class="hljs-type">status_t</span> <span class="hljs-title">SurfaceFlinger::createLayer</span><span class="hljs-params">(<span class="hljs-type">const</span> String8&amp; name,
                                     <span class="hljs-type">const</span> sp&lt;Client&gt;&amp; client,
                                     <span class="hljs-type">uint32_t</span> w, <span class="hljs-type">uint32_t</span> h,
                                     PixelFormat format,
                                     <span class="hljs-type">uint32_t</span> flags,
                                     sp&lt;IBinder&gt;* handle,
                                     sp&lt;IGraphicBufferProducer&gt;* gbp)</span> </span>{
    <span class="hljs-comment">// 1. åˆ›å»ºLayerå¯¹è±¡</span>
    sp&lt;Layer&gt; layer;
    <span class="hljs-keyword">switch</span> (flags &amp; ISurfaceComposerClient::eFXSurfaceMask) {
        <span class="hljs-keyword">case</span> ISurfaceComposerClient::eFXSurfaceBufferQueue:
            <span class="hljs-comment">// æ™®é€šçš„Buffer Layer</span>
            layer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BufferQueueLayer</span>(<span class="hljs-keyword">this</span>, client, name, w, h, flags);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> ISurfaceComposerClient::eFXSurfaceEffect:
            <span class="hljs-comment">// ç‰¹æ•ˆLayerï¼ˆå¦‚æ¨¡ç³Šã€é¢œè‰²ï¼‰</span>
            layer = <span class="hljs-keyword">new</span> <span class="hljs-built_in">EffectLayer</span>(<span class="hljs-keyword">this</span>, client, name, w, h, flags);
            <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-comment">// 2. åˆ›å»ºBufferQueue</span>
    sp&lt;IGraphicBufferProducer&gt; producer;
    sp&lt;IGraphicBufferConsumer&gt; consumer;
    BufferQueue::<span class="hljs-built_in">createBufferQueue</span>(&amp;producer, &amp;consumer);

    <span class="hljs-comment">// 3. Layerä¸BufferQueueå…³è”</span>
    layer-&gt;<span class="hljs-built_in">setBufferConsumer</span>(consumer);

    <span class="hljs-comment">// 4. è¿”å›ç»™åº”ç”¨</span>
    *handle = layer-&gt;<span class="hljs-built_in">getHandle</span>();
    *gbp = producer; <span class="hljs-comment">// è¿”å›Produceræ¥å£</span>

    <span class="hljs-comment">// 5. å°†LayeråŠ å…¥Layeræ ‘</span>
    mCurrentState.layersSortedByZ.<span class="hljs-built_in">add</span>(layer);

    <span class="hljs-keyword">return</span> NO_ERROR;
}
</code></pre>
<p><strong>åˆ›å»ºæµç¨‹æ€»ç»“</strong>ï¼š</p>
<ol>
<li>Activityå¯åŠ¨ â†’ ViewRootImplåˆ›å»º</li>
<li>ViewRootImplé€šè¿‡WMSè¯·æ±‚åˆ›å»ºSurface</li>
<li>SurfaceFlingeråˆ›å»ºå¯¹åº”çš„Layerå’ŒBufferQueue</li>
<li>IGraphicBufferProducerè¿”å›ç»™åº”ç”¨</li>
<li>åº”ç”¨é€šè¿‡Produceræ¥å£è¿›è¡Œç»˜åˆ¶</li>
</ol>
<h3 data-id="heading-22">Layerçš„ç±»å‹ä¸ç®¡ç†</h3>
<p>åœ¨SurfaceFlingerå†…éƒ¨ï¼Œæ¯ä¸ªSurfaceå¯¹åº”ä¸€ä¸ªLayerã€‚Androidå®šä¹‰äº†å¤šç§Layerç±»å‹ï¼š</p>
<p><strong>BufferQueueLayerï¼ˆæœ€å¸¸è§ï¼‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferQueueLayer</span> : <span class="hljs-keyword">public</span> BufferLayer {
    <span class="hljs-comment">// æŒæœ‰BufferQueueçš„Consumerç«¯</span>
    sp&lt;BufferQueueConsumer&gt; mConsumer;

    <span class="hljs-comment">// Layerçš„å±æ€§</span>
    Rect mBounds;          <span class="hljs-comment">// ä½ç½®å’Œå¤§å°</span>
    <span class="hljs-type">float</span> mAlpha;          <span class="hljs-comment">// é€æ˜åº¦</span>
    <span class="hljs-type">int32_t</span> mZOrder;       <span class="hljs-comment">// Zè½´é¡ºåº</span>
    mat4 mTransform;       <span class="hljs-comment">// å˜æ¢çŸ©é˜µ</span>
};
</code></pre>
<p><strong>EffectLayerï¼ˆç‰¹æ•ˆLayerï¼‰</strong></p>
<ul>
<li>ç”¨äºé¢œè‰²å¡«å……ã€æ¨¡ç³Šæ•ˆæœç­‰</li>
<li>ä¸éœ€è¦BufferQueue</li>
<li>ç›´æ¥ç”±GPUæ¸²æŸ“ç‰¹æ•ˆ</li>
</ul>
<p><strong>ContainerLayerï¼ˆå®¹å™¨Layerï¼‰</strong></p>
<ul>
<li>ä¸åŒ…å«å®é™…å†…å®¹</li>
<li>ç”¨äºç»„ç»‡Layerå±‚çº§</li>
<li>ä¾‹å¦‚ï¼šActivityRecordçš„æ ¹Layer</li>
</ul>
<h3 data-id="heading-23">Layeræ ‘çš„ç»„ç»‡ç»“æ„</h3>
<p>æ‰€æœ‰Layerç»„ç»‡æˆä¸€æ£µæ ‘ï¼Œæ ¹æ®Z-orderè¿›è¡Œæ’åºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">RootLayer
  â”œâ”€â”€ WallpaperLayer (<span class="hljs-attr">Z</span>=-<span class="hljs-number">1</span>)
  â”œâ”€â”€ AppLayer1 (<span class="hljs-attr">Z</span>=<span class="hljs-number">0</span>)
  â”‚     â”œâ”€â”€ SurfaceView1 (<span class="hljs-attr">Z</span>=<span class="hljs-number">0</span>)
  â”‚     â””â”€â”€ SurfaceView2 (<span class="hljs-attr">Z</span>=<span class="hljs-number">1</span>)
  â”œâ”€â”€ AppLayer2 (<span class="hljs-attr">Z</span>=<span class="hljs-number">1</span>)
  â”œâ”€â”€ SystemUI (<span class="hljs-attr">Z</span>=<span class="hljs-number">100000</span>)
  â”‚     â”œâ”€â”€ StatusBar
  â”‚     â””â”€â”€ NavigationBar
  â””â”€â”€ BootAnimation (<span class="hljs-attr">Z</span>=<span class="hljs-number">200000</span>)
</code></pre>
<p><strong>Z-orderæ’åºè§„åˆ™</strong>ï¼š</p>
<ul>
<li>æ•°å€¼è¶Šå¤§ï¼Œè¶Šé è¿‘ç”¨æˆ·ï¼ˆæ˜¾ç¤ºåœ¨ä¸Šå±‚ï¼‰</li>
<li>SystemUIå±‚çº§æœ€é«˜ï¼Œå§‹ç»ˆæ˜¾ç¤ºåœ¨æœ€ä¸Šé¢</li>
<li>æ™®é€šåº”ç”¨çš„Z-orderé€šå¸¸åœ¨0é™„è¿‘</li>
<li>åŒä¸€çˆ¶Layerä¸‹çš„å­Layerï¼Œä¹Ÿæœ‰ç›¸å¯¹Z-order</li>
</ul>
<h3 data-id="heading-24">Layerçš„å…³é”®å±æ€§</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Layerçš„æ ¸å¿ƒå±æ€§ï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">LayerState</span> {
    <span class="hljs-comment">// å‡ ä½•å±æ€§</span>
    Rect crop;              <span class="hljs-comment">// è£å‰ªåŒºåŸŸ</span>
    Rect frame;             <span class="hljs-comment">// æ˜¾ç¤ºåŒºåŸŸ</span>
    <span class="hljs-type">float</span> cornerRadius;     <span class="hljs-comment">// åœ†è§’åŠå¾„</span>
    mat4 matrix;            <span class="hljs-comment">// å˜æ¢çŸ©é˜µï¼ˆæ—‹è½¬ã€ç¼©æ”¾ã€å¹³ç§»ï¼‰</span>

    <span class="hljs-comment">// è§†è§‰å±æ€§</span>
    half4 color;            <span class="hljs-comment">// é¢œè‰²ï¼ˆRGBAï¼‰</span>
    <span class="hljs-type">float</span> alpha;            <span class="hljs-comment">// ä¸é€æ˜åº¦</span>
    <span class="hljs-type">uint32_t</span> flags;         <span class="hljs-comment">// æ ‡å¿—ä½ï¼ˆéšè—ã€å®‰å…¨ç­‰ï¼‰</span>

    <span class="hljs-comment">// åˆæˆå±æ€§</span>
    <span class="hljs-type">int32_t</span> z;              <span class="hljs-comment">// Zè½´é¡ºåº</span>
    <span class="hljs-type">uint32_t</span> layerStack;    <span class="hljs-comment">// æ‰€å±Display</span>

    <span class="hljs-comment">// å†…å®¹å±æ€§</span>
    sp&lt;GraphicBuffer&gt; buffer;         <span class="hljs-comment">// å½“å‰Buffer</span>
    sp&lt;Fence&gt; acquireFence;           <span class="hljs-comment">// åŒæ­¥Fence</span>
    Rect transparentRegion;           <span class="hljs-comment">// é€æ˜åŒºåŸŸ</span>
    Region opaqueRegion;              <span class="hljs-comment">// ä¸é€æ˜åŒºåŸŸ</span>
};
</code></pre>
<hr/>
<h2 data-id="heading-25">SurfaceFlingerçš„åˆæˆæµç¨‹</h2>
<p>SurfaceFlingerçš„åˆæˆæµç¨‹æ˜¯æ˜¾ç¤ºç³»ç»Ÿçš„æ ¸å¿ƒï¼Œç†è§£è¿™ä¸ªæµç¨‹æ˜¯æŒæ¡Androidæ˜¾ç¤ºæœºåˆ¶çš„å…³é”®ã€‚</p>
<h3 data-id="heading-26">åˆæˆå¾ªç¯çš„è§¦å‘æœºåˆ¶</h3>
<p>SurfaceFlingerçš„åˆæˆå¾ªç¯ç”±ä¸¤ç§æ–¹å¼è§¦å‘ï¼š</p>
<p><strong>1. Vsyncä¿¡å·è§¦å‘ï¼ˆä¸»è¦æ–¹å¼ï¼‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Vsyncåˆ°è¾¾ â†’ Schedulerè°ƒåº¦ â†’ SurfaceFlinger::composite()</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::onVsync</span><span class="hljs-params">(<span class="hljs-type">nsecs_t</span> expectedVsyncTime)</span> </span>{
    <span class="hljs-comment">// æ”¶åˆ°Vsyncä¿¡å·ï¼Œå¼€å§‹æ–°çš„ä¸€å¸§</span>
    <span class="hljs-built_in">composite</span>();
}
</code></pre>
<p><strong>2. Transactionè§¦å‘ï¼ˆå±æ€§å˜æ›´ï¼‰</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åº”ç”¨ä¿®æ”¹Layerå±æ€§ â†’ æäº¤Transaction â†’ è§¦å‘åˆæˆ</span>
surface.<span class="hljs-built_in">setPosition</span>(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>);  <span class="hljs-comment">// Javaå±‚</span>
surface.<span class="hljs-built_in">setAlpha</span>(<span class="hljs-number">0.5f</span>);
<span class="hljs-comment">// â†’ Nativeå±‚æäº¤Transaction</span>
<span class="hljs-comment">// â†’ SurfaceFlingerå¤„ç†Transaction</span>
<span class="hljs-comment">// â†’ è§¦å‘é‡æ–°åˆæˆ</span>
</code></pre>
<h3 data-id="heading-27">åˆæˆæµç¨‹æ ¸å¿ƒæ­¥éª¤</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b459bd57ba3442d69d427cc15b4e8e89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769258025&amp;x-signature=7hkthaAV9%2F9wt%2BkJakXorjl0lkU%3D" alt="01-02-surfaceflinger-composition-flow.png" loading="lazy"/></p>
<p><em>å›¾2: SurfaceFlingerçš„åˆæˆæµç¨‹</em></p>
<p>è®©æˆ‘ä»¬æ·±å…¥åˆ†æåˆæˆæµç¨‹çš„æ¯ä¸ªé˜¶æ®µï¼š</p>
<h4 data-id="heading-28">é˜¶æ®µ1ï¼šTransactionå¤„ç† (<code>commitTransactions</code>)</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// frameworks/native/services/surfaceflinger/SurfaceFlinger.cpp (ç®€åŒ–)</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::commitTransactions</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">ATRACE_CALL</span>();

    <span class="hljs-comment">// 1. å¤„ç†ç­‰å¾…ä¸­çš„Transactions</span>
    <span class="hljs-type">bool</span> transactionFlushNeeded = <span class="hljs-built_in">transactionFlushNeeded</span>();
    <span class="hljs-keyword">if</span> (transactionFlushNeeded) {
        <span class="hljs-built_in">commitTransactionsLocked</span>(eDisplayTransactionNeeded);
    }
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::commitTransactionsLocked</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> transactionFlags)</span> </span>{
    <span class="hljs-comment">// éå†æ‰€æœ‰Transactions</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; [handle, compositorState] : mCompositorStates) {
        sp&lt;Layer&gt; layer = <span class="hljs-built_in">fromHandleLocked</span>(handle).<span class="hljs-built_in">promote</span>();
        <span class="hljs-keyword">if</span> (layer) {
            <span class="hljs-comment">// åº”ç”¨å±æ€§å˜æ›´åˆ°Layer</span>
            layer-&gt;<span class="hljs-built_in">setPosition</span>(compositorState.x, compositorState.y);
            layer-&gt;<span class="hljs-built_in">setAlpha</span>(compositorState.alpha);
            layer-&gt;<span class="hljs-built_in">setMatrix</span>(compositorState.matrix);
            <span class="hljs-comment">// ... å…¶ä»–å±æ€§</span>
        }
    }

    <span class="hljs-comment">// æ ‡è®°éœ€è¦é‡æ–°è®¡ç®—å¯è§åŒºåŸŸ</span>
    mVisibleRegionsDirty = <span class="hljs-literal">true</span>;
}
</code></pre>
<p><strong>Transactionå¤„ç†çš„å…³é”®ä»»åŠ¡</strong>ï¼š</p>
<ul>
<li>åº”ç”¨Layerå±æ€§å˜æ›´ï¼ˆä½ç½®ã€å¤§å°ã€é€æ˜åº¦ç­‰ï¼‰</li>
<li>æ›´æ–°Layeræ ‘ç»“æ„ï¼ˆæ·»åŠ ã€åˆ é™¤Layerï¼‰</li>
<li>æ ‡è®°éœ€è¦é‡æ–°è®¡ç®—çš„åŒºåŸŸ</li>
</ul>
<h4 data-id="heading-29">é˜¶æ®µ2ï¼šLayeréå†ä¸å‡†å¤‡ (<code>latchBuffers</code>)</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::latchBuffers</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">ATRACE_CALL</span>();

    <span class="hljs-comment">// éå†æ‰€æœ‰Layer</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; layer : mDrawingState.layersSortedByZ) {
        <span class="hljs-comment">// 1. ä»BufferQueueè·å–æœ€æ–°çš„Buffer</span>
        <span class="hljs-type">bool</span> bufferUpdated = layer-&gt;<span class="hljs-built_in">latchBuffer</span>();

        <span class="hljs-comment">// 2. æ›´æ–°Layerçš„å†…å®¹åŒºåŸŸ</span>
        <span class="hljs-keyword">if</span> (bufferUpdated) {
            Region dirtyRegion = layer-&gt;<span class="hljs-built_in">getDirtyRegion</span>();
            mDirtyRegion.<span class="hljs-built_in">orSelf</span>(dirtyRegion);
        }
    }

    <span class="hljs-comment">// è®¡ç®—å¯è§åŒºåŸŸ</span>
    <span class="hljs-built_in">computeVisibleRegions</span>();
}
</code></pre>
<p><strong>å…³é”®æ“ä½œ</strong>ï¼š</p>
<ul>
<li><strong>latchBuffer()</strong>: ä»BufferQueueè·å–æœ€æ–°çš„GraphicBuffer</li>
<li><strong>getDirtyRegion()</strong>: è®¡ç®—éœ€è¦é‡ç»˜çš„åŒºåŸŸ</li>
<li><strong>computeVisibleRegions()</strong>: è®¡ç®—æ¯ä¸ªLayerçš„å¯è§éƒ¨åˆ†ï¼ˆè€ƒè™‘é®æŒ¡å…³ç³»ï¼‰</li>
</ul>
<h4 data-id="heading-30">é˜¶æ®µ3ï¼šåˆæˆç­–ç•¥å†³ç­–</h4>
<p>SurfaceFlingeréœ€è¦å†³å®šä½¿ç”¨GPUåˆæˆè¿˜æ˜¯HWCç¡¬ä»¶åˆæˆï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç®€åŒ–çš„å†³ç­–é€»è¾‘</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::computeCompositionType</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. å…ˆå‡è®¾æ‰€æœ‰Layeréƒ½ç”¨GPUåˆæˆ</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; layer : layers) {
        layer-&gt;<span class="hljs-built_in">setCompositionType</span>(CompositionType::CLIENT);
    }

    <span class="hljs-comment">// 2. è¯¢é—®HWCæ˜¯å¦èƒ½ç¡¬ä»¶åˆæˆ</span>
    hwc-&gt;<span class="hljs-built_in">validateDisplay</span>(displayId, &amp;numTypes, &amp;numRequests);

    <span class="hljs-comment">// 3. HWCä¼šä¿®æ”¹Layerçš„åˆæˆç±»å‹</span>
    <span class="hljs-comment">// CompositionType::DEVICE - HWCå¯ä»¥ç¡¬ä»¶åˆæˆ</span>
    <span class="hljs-comment">// CompositionType::CLIENT - éœ€è¦GPUåˆæˆ</span>
    <span class="hljs-comment">// CompositionType::SOLID_COLOR - çº¯è‰²å¡«å……</span>
    <span class="hljs-comment">// CompositionType::CURSOR - ç¡¬ä»¶å…‰æ ‡</span>
}
</code></pre>
<p><strong>åˆæˆç±»å‹è¯´æ˜</strong>ï¼š</p>






























<table><thead><tr><th align="left">åˆæˆç±»å‹</th><th align="left">è¯´æ˜</th><th align="left">æ€§èƒ½</th></tr></thead><tbody><tr><td align="left"><code>DEVICE</code></td><td align="left">HWCç¡¬ä»¶åˆæˆ</td><td align="left">æœ€é«˜ï¼ˆä½åŠŸè€—ï¼‰</td></tr><tr><td align="left"><code>CLIENT</code></td><td align="left">GPUåˆæˆï¼ˆOpenGL/Vulkanï¼‰</td><td align="left">ä¸­ç­‰</td></tr><tr><td align="left"><code>SOLID_COLOR</code></td><td align="left">çº¯è‰²å¡«å……ï¼ˆæ— Bufferï¼‰</td><td align="left">æœ€é«˜</td></tr><tr><td align="left"><code>CURSOR</code></td><td align="left">ç¡¬ä»¶å…‰æ ‡å åŠ </td><td align="left">æœ€é«˜</td></tr></tbody></table>

**ä¼˜åŒ–æŠ€å·§**: HWCç¡¬ä»¶åˆæˆçš„åŠŸè€—è¿œä½äºGPUåˆæˆã€‚åº”ç”¨å¼€å‘æ—¶ï¼Œå°½é‡é¿å…ä½¿ç”¨HWCä¸æ”¯æŒçš„ç‰¹æ€§ï¼ˆå¦‚å¤æ‚çš„Shaderã€æ—‹è½¬ç­‰ï¼‰ï¼Œè®©æ›´å¤šLayerèµ°ç¡¬ä»¶åˆæˆè·¯å¾„ã€‚

<h4 data-id="heading-31">é˜¶æ®µ4ï¼šæ‰§è¡Œåˆæˆ</h4>
<p>æ ¹æ®åˆæˆç­–ç•¥ï¼Œåˆ†åˆ«æ‰§è¡ŒGPUåˆæˆå’ŒHWCåˆæˆï¼š</p>
<p><strong>GPUåˆæˆè·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::doComposeSurfaces</span><span class="hljs-params">(<span class="hljs-type">const</span> DisplayDevice&amp; display)</span> </span>{
    <span class="hljs-keyword">auto</span>&amp; engine = <span class="hljs-built_in">getRenderEngine</span>();

    <span class="hljs-comment">// 1. å‡†å¤‡æ¸²æŸ“ç›®æ ‡ï¼ˆFrameBufferæˆ–ç¦»å±Bufferï¼‰</span>
    <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; outputState = display.<span class="hljs-built_in">getState</span>();
    <span class="hljs-keyword">auto</span> framebuffer = outputState.framebuffer;

    <span class="hljs-comment">// 2. è®¾ç½®æ¸²æŸ“å‚æ•°</span>
    engine-&gt;<span class="hljs-built_in">setViewportAndProjection</span>(width, height, viewport, projection);
    engine-&gt;<span class="hljs-built_in">setOutputDataSpace</span>(outputDataSpace);
    engine-&gt;<span class="hljs-built_in">setDisplayMaxLuminance</span>(maxLuminance);

    <span class="hljs-comment">// 3. éå†éœ€è¦GPUåˆæˆçš„Layer</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; layer : clientCompositionLayers) {
        <span class="hljs-comment">// æ„å»ºLayeræ¸²æŸ“è®¾ç½®</span>
        <span class="hljs-keyword">auto</span> settings = layer-&gt;<span class="hljs-built_in">prepareClientCompositionSettings</span>(
            clip, needsFiltering, isSecure, ...);

        <span class="hljs-comment">// æ·»åŠ åˆ°æ¸²æŸ“åˆ—è¡¨</span>
        clientCompositionList.<span class="hljs-built_in">push_back</span>(settings);
    }

    <span class="hljs-comment">// 4. æ‰§è¡Œæ¸²æŸ“</span>
    engine-&gt;<span class="hljs-built_in">drawLayers</span>(clientCompositionList, framebuffer, ...);
}
</code></pre>
<p><strong>HWCåˆæˆè·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::presentDisplay</span><span class="hljs-params">(<span class="hljs-type">const</span> DisplayDevice&amp; display)</span> </span>{
    <span class="hljs-keyword">auto</span>&amp; hwc = <span class="hljs-built_in">getHwComposer</span>();

    <span class="hljs-comment">// 1. è®¾ç½®Layerä¿¡æ¯åˆ°HWC</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; layer : layers) {
        <span class="hljs-keyword">if</span> (layer-&gt;<span class="hljs-built_in">getCompositionType</span>() == CompositionType::DEVICE) {
            hwc-&gt;<span class="hljs-built_in">setLayerBuffer</span>(displayId, layerId,
                               layer-&gt;<span class="hljs-built_in">getBuffer</span>(),
                               layer-&gt;<span class="hljs-built_in">getAcquireFence</span>());
            hwc-&gt;<span class="hljs-built_in">setLayerDisplayFrame</span>(displayId, layerId, layer-&gt;<span class="hljs-built_in">getFrame</span>());
            hwc-&gt;<span class="hljs-built_in">setLayerSourceCrop</span>(displayId, layerId, layer-&gt;<span class="hljs-built_in">getCrop</span>());
            <span class="hljs-comment">// ... å…¶ä»–å±æ€§</span>
        }
    }

    <span class="hljs-comment">// 2. æ‰§è¡Œç¡¬ä»¶åˆæˆ</span>
    hwc-&gt;<span class="hljs-built_in">presentDisplay</span>(displayId, &amp;presentFence);

    <span class="hljs-comment">// 3. ç­‰å¾…åˆæˆå®Œæˆ</span>
    presentFence-&gt;<span class="hljs-built_in">waitForever</span>();
}
</code></pre>
<h4 data-id="heading-32">é˜¶æ®µ5ï¼šè¾“å‡ºåˆ°Display</h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SurfaceFlinger::postComposition</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. è·å–Present Fence</span>
    <span class="hljs-keyword">auto</span> fence = display-&gt;<span class="hljs-built_in">getCompositionDisplay</span>()-&gt;<span class="hljs-built_in">getReleaseFence</span>();

    <span class="hljs-comment">// 2. å‘é€åˆ°Display Driver</span>
    display-&gt;<span class="hljs-built_in">present</span>();

    <span class="hljs-comment">// 3. é‡Šæ”¾æ—§çš„Buffer</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; layer : layers) {
        layer-&gt;<span class="hljs-built_in">onPostComposition</span>(fence);
    }

    <span class="hljs-comment">// 4. é€šçŸ¥åº”ç”¨Bufferå¯ä»¥é‡Šæ”¾</span>
    mTransactionCallbackInvoker.<span class="hljs-built_in">sendCallbacks</span>();
}
</code></pre>
<h3 data-id="heading-33">Frame bufferç®¡ç†ä¸FenceåŒæ­¥</h3>
<p><strong>Frame buffer</strong>ï¼š</p>
<ul>
<li>å­˜å‚¨æœ€ç»ˆåˆæˆç»“æœçš„Buffer</li>
<li>é€šå¸¸æœ‰2-3ä¸ªï¼ˆåŒç¼“å†²/ä¸‰é‡ç¼“å†²ï¼‰</li>
<li>ä¸€ä¸ªæ­£åœ¨æ˜¾ç¤ºï¼Œä¸€ä¸ªæ­£åœ¨åˆæˆï¼Œä¸€ä¸ªç©ºé—²</li>
</ul>
<p><strong>FenceåŒæ­¥æœºåˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Fenceç”¨äºåŒæ­¥GPU/HWCçš„å¼‚æ­¥æ“ä½œ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Fence</span> {
    <span class="hljs-type">int</span> mFenceFd;  <span class="hljs-comment">// å†…æ ¸fenceæ–‡ä»¶æè¿°ç¬¦</span>

    <span class="hljs-comment">// ç­‰å¾…fenceä¿¡å·ï¼ˆé˜»å¡ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">status_t</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-type">int</span> timeout)</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sync_wait</span>(mFenceFd, timeout);
    }

    <span class="hljs-comment">// æ£€æŸ¥fenceæ˜¯å¦å·²ç»ä¿¡å·</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isValid</span><span class="hljs-params">()</span> </span>{ <span class="hljs-keyword">return</span> mFenceFd != <span class="hljs-number">-1</span>; }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
sp&lt;Fence&gt; acquireFence = layer-&gt;<span class="hljs-built_in">getAcquireFence</span>();
acquireFence-&gt;<span class="hljs-built_in">waitForever</span>(<span class="hljs-string">"Waiting for buffer"</span>);
<span class="hljs-comment">// Bufferç°åœ¨å¯ä»¥å®‰å…¨è¯»å–äº†</span>
</code></pre>
<p><strong>Fenceçš„ä½œç”¨</strong>ï¼š</p>
<ul>
<li><strong>acquireFence</strong>: åº”ç”¨å†™å®ŒBufferåè®¾ç½®ï¼ŒSurfaceFlingerç­‰å¾…æ­¤Fenceæ‰èƒ½è¯»å–Buffer</li>
<li><strong>releaseFence</strong>: SurfaceFlingerè¯»å®ŒBufferåè®¾ç½®ï¼Œåº”ç”¨ç­‰å¾…æ­¤Fenceæ‰èƒ½é‡ç”¨Buffer</li>
<li><strong>presentFence</strong>: æ˜¾ç¤ºå®Œæˆåè®¾ç½®ï¼Œç”¨äºç»Ÿè®¡çœŸå®çš„æ˜¾ç¤ºæ—¶é—´</li>
</ul>
<hr/>
<h2 data-id="heading-34">è°ƒè¯•æŠ€å·§ä¸å¸¸è§é—®é¢˜</h2>
<p>æŒæ¡è°ƒè¯•æŠ€å·§æ˜¯ç†è§£å’Œè§£å†³æ˜¾ç¤ºé—®é¢˜çš„å…³é”®ã€‚</p>
<h3 data-id="heading-35">dumpsys SurfaceFlingerè¯¦è§£</h3>
<p><code>dumpsys SurfaceFlinger</code>æ˜¯æœ€å¸¸ç”¨çš„è°ƒè¯•å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹SurfaceFlingerå®Œæ•´çŠ¶æ€</span>
adb shell dumpsys SurfaceFlinger

<span class="hljs-comment"># æŸ¥çœ‹Layeråˆ—è¡¨</span>
adb shell dumpsys SurfaceFlinger --list

<span class="hljs-comment"># æŸ¥çœ‹Vsyncä¿¡æ¯</span>
adb shell dumpsys SurfaceFlinger --vsync-info

<span class="hljs-comment"># æŸ¥çœ‹Displayä¿¡æ¯</span>
adb shell dumpsys SurfaceFlinger --display-id

<span class="hljs-comment"># æŸ¥çœ‹æ¸²æŸ“ç»Ÿè®¡</span>
adb shell dumpsys SurfaceFlinger --frame-stats
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SurfaceFlinger (platform 35, AOSP-Android 15)
Build: Android 15 / xxxxx

Displays:
  Display 0 (primary)
    size: 1080x2400
    refresh: 90 Hz
    power: ON

Visible Layers:
  Layer 1234 (com.example.app/MainActivity)
    <span class="hljs-attr">z</span>=<span class="hljs-number">0</span>, alpha=<span class="hljs-number">1.0</span>, pos=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), size=(<span class="hljs-number">1080</span>, <span class="hljs-number">2400</span>)
    <span class="hljs-attr">compositionType</span>=DEVICE
    <span class="hljs-attr">buffer</span>=<span class="hljs-number">0</span>x7f8a9c0000 (<span class="hljs-number">1080</span>x2400 RGBA_8888)

  Layer 5678 (StatusBar)
    <span class="hljs-attr">z</span>=<span class="hljs-number">100000</span>, alpha=<span class="hljs-number">1.0</span>, pos=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), size=(<span class="hljs-number">1080</span>, <span class="hljs-number">100</span>)
    <span class="hljs-attr">compositionType</span>=DEVICE
    <span class="hljs-attr">buffer</span>=<span class="hljs-number">0</span>x7f8a9d0000 (<span class="hljs-number">1080</span>x100 RGBA_8888)
</code></pre>
<h3 data-id="heading-36">å¸¸ç”¨è°ƒè¯•å±æ€§</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼ºåˆ¶GPUåˆæˆï¼ˆç¦ç”¨HWCï¼‰</span>
adb shell setprop debug.sf.disable_hwc 1

<span class="hljs-comment"># æ˜¾ç¤ºLayerè¾¹ç•Œ</span>
adb shell setprop debug.sf.show_layers 1

<span class="hljs-comment"># æ˜¾ç¤ºCPUä½¿ç”¨æƒ…å†µ</span>
adb shell setprop debug.sf.show_cpu 1

<span class="hljs-comment"># æ˜¾ç¤ºåˆ·æ–°ç‡</span>
adb shell setprop debug.sf.show_refresh_rate 1

<span class="hljs-comment"># ç¦ç”¨ä¸‰é‡ç¼“å†²</span>
adb shell setprop debug.sf.enable_triple_buffer 0

<span class="hljs-comment"># é‡å¯SurfaceFlingerä½¿å±æ€§ç”Ÿæ•ˆ</span>
adb shell stop surfaceflinger &amp;&amp; adb shell start surfaceflinger
</code></pre>
<h3 data-id="heading-37">é»‘å±/èŠ±å±é—®é¢˜æ’æŸ¥</h3>
<p><strong>é»‘å±é—®é¢˜æ’æŸ¥æ€è·¯</strong>ï¼š</p>
<ol>
<li><strong>æ£€æŸ¥Surfaceæ˜¯å¦åˆ›å»ºæˆåŠŸ</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger --list | grep &lt;package-name&gt;
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰è¾“å‡ºï¼Œè¯´æ˜Surfaceæœªåˆ›å»º</span>
</code></pre>
<ol start="2">
<li><strong>æ£€æŸ¥Bufferæ˜¯å¦æäº¤</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger | grep -A20 &lt;layer-name&gt;
<span class="hljs-comment"># æŸ¥çœ‹bufferå­—æ®µæ˜¯å¦ä¸ºnull</span>
</code></pre>
<ol start="3">
<li><strong>æ£€æŸ¥Displayç”µæºçŠ¶æ€</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys SurfaceFlinger | grep power
<span class="hljs-comment"># åº”è¯¥æ˜¾ç¤º power: ON</span>
</code></pre>
<ol start="4">
<li><strong>æŸ¥çœ‹æ—¥å¿—</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash">adb logcat -b all | grep -E <span class="hljs-string">"SurfaceFlinger|BufferQueue|GraphicBuffer"</span>
</code></pre>
<p><strong>èŠ±å±é—®é¢˜æ’æŸ¥</strong>ï¼š</p>
<ul>
<li>æ£€æŸ¥Bufferæ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆRGBA vs YUVï¼‰</li>
<li>æ£€æŸ¥strideå¯¹é½é—®é¢˜</li>
<li>æŸ¥çœ‹æ˜¯å¦æœ‰GPUæ¸²æŸ“é”™è¯¯</li>
</ul>
<h3 data-id="heading-38">æ€§èƒ½åˆ†æå·¥å…·</h3>
<p><strong>systrace / Perfetto</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŠ“å–æ˜¾ç¤ºç³»ç»Ÿtrace</span>
python systrace.py -t 10 gfx view <span class="hljs-built_in">sched</span> freq -o trace.html

<span class="hljs-comment"># é‡ç‚¹å…³æ³¨ï¼š</span>
<span class="hljs-comment"># - SurfaceFlinger: åˆæˆè€—æ—¶</span>
<span class="hljs-comment"># - RenderThread: åº”ç”¨ä¾§æ¸²æŸ“è€—æ—¶</span>
<span class="hljs-comment"># - VSYNC: æ˜¯å¦æŒ‰æ—¶å®Œæˆ</span>
</code></pre>
<p><strong>GPUå‘ˆç°æ¨¡å¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å¯ç”¨"GPUå‘ˆç°æ¨¡å¼åˆ†æ"</span>
<span class="hljs-comment"># æˆ–é€šè¿‡å‘½ä»¤ï¼š</span>
adb shell setprop debug.hwui.profile <span class="hljs-literal">true</span>
adb shell setprop debug.hwui.profile.maxframes 128
</code></pre>
<hr/>
<h2 data-id="heading-39">æ€»ç»“ä¸å±•æœ›</h2>
<p>æœ¬æ–‡ä½œä¸ºã€ŠAndroid 15æ ¸å¿ƒå­ç³»ç»Ÿæ·±åº¦è§£æã€‹ç³»åˆ—çš„å¼€ç¯‡ä¹‹ä½œï¼Œå…¨é¢ä»‹ç»äº†Androidæ˜¾ç¤ºç³»ç»Ÿçš„æ•´ä½“æ¶æ„å’ŒSurfaceFlingerçš„æ ¸å¿ƒæœºåˆ¶ã€‚</p>
<h3 data-id="heading-40">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>Androidæ˜¾ç¤ºç³»ç»Ÿé‡‡ç”¨å››å±‚æ¶æ„</strong>ï¼šåº”ç”¨å±‚ã€Frameworkå±‚ã€Nativeå±‚ã€é©±åŠ¨å±‚ï¼Œå„å¸å…¶èŒï¼ŒååŒå·¥ä½œ</p>
</li>
<li>
<p><strong>SurfaceFlingeræ˜¯æ˜¾ç¤ºç³»ç»Ÿçš„æ ¸å¿ƒ</strong>ï¼š</p>
<ul>
<li>è´Ÿè´£æ‰€æœ‰Layerçš„åˆæˆ</li>
<li>ç”±Vsyncé©±åŠ¨å·¥ä½œ</li>
<li>æ™ºèƒ½é€‰æ‹©GPU/HWCåˆæˆç­–ç•¥</li>
</ul>
</li>
<li>
<p><strong>Surfaceæ˜¯è·¨è¿›ç¨‹å…±äº«çš„ç»˜åˆ¶ç¼“å†²åŒº</strong>ï¼š</p>
<ul>
<li>åº”ç”¨é€šè¿‡Produceræ¥å£ç»˜åˆ¶</li>
<li>SurfaceFlingeré€šè¿‡Consumeræ¥å£æ¶ˆè´¹</li>
<li>BufferQueueå®ç°ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼</li>
</ul>
</li>
<li>
<p><strong>åˆæˆæµç¨‹åŒ…å«äº”ä¸ªå…³é”®é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>Transactionå¤„ç†</li>
<li>Layeréå†ä¸å‡†å¤‡</li>
<li>åˆæˆç­–ç•¥å†³ç­–</li>
<li>æ‰§è¡Œåˆæˆï¼ˆGPUæˆ–HWCï¼‰</li>
<li>è¾“å‡ºåˆ°Display</li>
</ul>
</li>
<li>
<p><strong>Android 15çš„æ˜¾ç¤ºä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>Canvasç°ä»£åŒ–</li>
<li>HWC 3.0æ”¯æŒ</li>
<li>åŠ¨æ€åˆ·æ–°ç‡</li>
<li>HDRå¢å¼º</li>
</ul>
</li>
</ol>
<h3 data-id="heading-41">ä¸‹ä¸€æ­¥å­¦ä¹ </h3>
<p>åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ã€Šå›¾å½¢ç¼“å†²åŒºç®¡ç†ä¸HWCç¡¬ä»¶åˆæˆã€‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>GraphicBufferå’ŒBufferQueueçš„å®ç°ç»†èŠ‚</li>
<li>Gralloc HALçš„å·¥ä½œæœºåˆ¶</li>
<li>HWC 3.0çš„æ¶æ„å’Œåˆæˆç­–ç•¥</li>
<li>FenceåŒæ­¥çš„åº•å±‚åŸç†</li>
<li>Android 15çš„Bufferç®¡ç†ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-42">å®è·µå»ºè®®</h3>
<ol>
<li><strong>åŠ¨æ‰‹å®éªŒ</strong>ï¼šä¿®æ”¹<code>debug.sf.*</code>å±æ€§ï¼Œè§‚å¯Ÿæ˜¾ç¤ºè¡Œä¸ºå˜åŒ–</li>
<li><strong>é˜…è¯»æºç </strong>ï¼šä»<code>main_surfaceflinger.cpp</code>å¼€å§‹ï¼Œè·Ÿè¸ªå®Œæ•´å¯åŠ¨æµç¨‹</li>
<li><strong>ä½¿ç”¨å·¥å…·</strong>ï¼šç†Ÿç»ƒä½¿ç”¨systraceå’Œdumpsysåˆ†æå®é™…é—®é¢˜</li>
<li><strong>å…³æ³¨æ€§èƒ½</strong>ï¼šç†è§£HWCç¡¬ä»¶åˆæˆçš„ä¼˜åŠ¿ï¼Œä¼˜åŒ–åº”ç”¨æ¸²æŸ“ç­–ç•¥</li>
</ol>
<hr/>
<h2 data-id="heading-43">å‚è€ƒèµ„æº</h2>
<h3 data-id="heading-44">æºç è·¯å¾„</h3>
<pre><code class="hljs language-bash" lang="bash">frameworks/native/services/surfaceflinger/  <span class="hljs-comment"># SurfaceFlingerä¸»ç›®å½•</span>
frameworks/native/libs/gui/                 <span class="hljs-comment"># GUIåº“(Surface, BufferQueue)</span>
frameworks/native/libs/ui/                  <span class="hljs-comment"># UIåº“(GraphicBuffer)</span>
frameworks/base/core/java/android/view/     <span class="hljs-comment"># Frameworkå±‚</span>
</code></pre>
<h3 data-id="heading-45">å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics" target="_blank" title="https://source.android.com/docs/core/graphics" ref="nofollow noopener noreferrer">Android Graphics Architecture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdocs%2Fcore%2Fgraphics%2Fsurfaceflinger-windowmanager" target="_blank" title="https://source.android.com/docs/core/graphics/surfaceflinger-windowmanager" ref="nofollow noopener noreferrer">SurfaceFlinger and WindowManager</a></li>
</ul>
<h3 data-id="heading-46">è°ƒè¯•å‘½ä»¤é€ŸæŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># SurfaceFlingerçŠ¶æ€</span>
adb shell dumpsys SurfaceFlinger

<span class="hljs-comment"># Layeråˆ—è¡¨</span>
adb shell dumpsys SurfaceFlinger --list

<span class="hljs-comment"># å¼ºåˆ¶GPUåˆæˆ</span>
adb shell setprop debug.sf.disable_hwc 1

<span class="hljs-comment"># SystraceæŠ“å–</span>
python systrace.py -t 10 gfx view <span class="hljs-built_in">sched</span> -o trace.html
</code></pre>
<h3 data-id="heading-47">ç³»åˆ—æ–‡ç« </h3>
<ul>
<li><a href="https://link.juejin.cn?target=.%2F02-android15-display-subsystem-02-graphicbuffer-hwc" target="_blank" title="./02-android15-display-subsystem-02-graphicbuffer-hwc" ref="nofollow noopener noreferrer">ä¸‹ä¸€ç¯‡ï¼šAndroid 15 æ˜¾ç¤ºå­ç³»ç»Ÿæ·±åº¦è§£æ(äºŒ)ï¼šå›¾å½¢ç¼“å†²åŒºç®¡ç†ä¸HWCç¡¬ä»¶åˆæˆ</a></li>
</ul>
<hr/>
<p><em>æ¬¢è¿æ¥æˆ‘ä¸­çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a>æ‰¾åˆ°æ›´å¤šæœ‰ç”¨çš„çŸ¥è¯†å’Œæœ‰è¶£çš„äº§å“</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AsyncTaskæºç è§£æ]]></title>    <link>https://juejin.cn/post/7595974133096955938</link>    <guid>https://juejin.cn/post/7595974133096955938</guid>    <pubDate>2026-01-17T13:39:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133096955938" data-draft-id="7595974133096792098" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AsyncTaskæºç è§£æ"/> <meta itemprop="keywords" content="æºç "/> <meta itemprop="datePublished" content="2026-01-17T13:39:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AsyncTaskæºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:39:05.000Z" title="Sat Jan 17 2026 13:39:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰è¨€</h3>
<p>æˆ‘ä»¬åœ¨çº¿ç¨‹ä¸­æ‰§è¡Œè€—æ—¶ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦æ›´æ–° UI æ˜¾ç¤ºä»»åŠ¡è¿›åº¦ï¼Œå¯ä»¥ä½¿ç”¨ Handler æ¥æ›´æ–° UIï¼Œä½†æ˜¯è¿™æ ·åšç›¸å¯¹æ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚æœä½¿ç”¨ AsyncTask æ¥å®ç°ï¼Œä»£ç ä¼šç®€æ´å¾ˆå¤šã€‚ä»å®ç°ä¸Šæ¥è¯´ï¼ŒAsynTask å°è£…äº†çº¿ç¨‹æ± å’Œ Handlerã€‚</p>
<h3 data-id="heading-1">AsyncTaskç®€ä»‹</h3>
<p>AsyncTask ç»è¿‡å‡ æ¬¡ä¿®æ”¹ï¼Œå¯¼è‡´äº†å¯¹äºä¸åŒçš„ API ç‰ˆæœ¬çš„ AsyncTask å…·æœ‰ä¸åŒçš„è¡¨ç°ï¼Œå°¤å…¶æ˜¯å¤šä»»åŠ¡çš„å¹¶å‘æ‰§è¡Œä¸Šã€‚</p>
<p>æ‰“å¼€ AsyncTask çš„æºç ï¼ˆè·¯å¾„ï¼šframeworks\base\core\java\android\os\AsyncTask.javaï¼Œæœ¬æ–‡åŸºäºAndroid 11.0ï¼‰ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Deprecated</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTask</span>&lt;Params, Progress, Result&gt; {
    ...
}
</code></pre>
<p>å‘ç°ä¸Šé¢å·²ç»æ ‡è®°äº† @Deprecatedï¼Œå®˜æ–¹æ›´æ¨èå¼€å‘è€…ä½¿ç”¨ Kotlin çš„åç¨‹è¿›è¡Œå¼‚æ­¥æ“ä½œï¼š</p>
<blockquote>
<p>Deprecated
Use the standard java.util.concurrent or Kotlin concurrency utilities instead.</p>
</blockquote>
<p><a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask" title="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fos%2FAsyncTask" target="_blank">AsyncTaskçš„å®˜æ–¹æ–‡æ¡£</a> ä¸­åˆ—ä¸¾äº†æŠŠå®ƒæ ‡è®°ä¸ºè¿‡æ—¶çš„åŸå› ï¼Œå…¶å®è¿™ä¹Ÿæ˜¯ AsyncTask ä¸€ç›´ä»¥æ¥éƒ½è¢«è¯Ÿç—…çš„åœ°æ–¹ï¼š</p>
<ol>
<li>å®¹æ˜“å¯¼è‡´ context çš„æ³„éœ²ï¼›</li>
<li>å¿˜è®°å›è°ƒï¼›</li>
<li>æ¨ªç«–å±åˆ‡æ¢å¯¼è‡´å´©æºƒï¼›</li>
<li>ä¸åŒç‰ˆæœ¬çš„ AsyncTask çš„å…¼å®¹é—®é¢˜ï¼›</li>
<li>åœ¨ doInBackground() ä¸­æŠŠå¼‚å¸¸ç›´æ¥åæ‰äº†ï¼›</li>
</ol>
<p>AsyncTask æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ³›å‹ç±»ï¼Œå®ƒæä¾›äº† Paramsã€Progress å’Œ Result è¿™ä¸‰ä¸ªæ³›å‹å‚æ•°ï¼Œå…¶ä¸­ Params è¡¨ç¤ºå‚æ•°çš„ç±»å‹ï¼ŒProgress è¡¨ç¤ºåå°ä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦çš„ç±»å‹ï¼Œè€Œ Result åˆ™è¡¨ç¤ºåå°ä»»åŠ¡çš„è¿”å›ç»“æœçš„ç±»å‹ï¼Œå¦‚æœ AsyncTask ç¡®å®ä¸éœ€è¦ä¼ é€’å…·ä½“çš„å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸‰ä¸ªæ³›å‹å‚æ•°å¯ä»¥ç”¨ Void æ¥ä»£æ›¿ã€‚</p>
<p>AsyncTask æä¾›äº† 4 ä¸ªæ ¸å¿ƒæ–¹æ³•ï¼Œå®ƒä»¬çš„å«ä¹‰å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<ol>
<li>onPreExecute()ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œåœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¹‹å‰ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œä¸€èˆ¬å¯ä»¥ç”¨äºåšä¸€äº›å‡†å¤‡å·¥ä½œã€‚</li>
<li>doInBackground(Params...params)ï¼Œåœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œï¼Œæ­¤æ–¹æ³•ç”¨äºæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œparams å‚æ•°è¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡çš„è¾“å…¥å‚æ•°ã€‚åœ¨æ­¤æ–¹æ³•ä¸­å¯ä»¥é€šè¿‡ publishProgress() æ–¹æ³•æ¥æ›´æ–°ä»»åŠ¡çš„è¿›åº¦ï¼ŒpublishProgress() æ–¹æ³•ä¼šè°ƒç”¨ onProgressUpdate() æ–¹æ³•ã€‚å¦å¤–æ­¤æ–¹æ³•éœ€è¦è¿”å›è®¡ç®—ç»“æœç»™ onPostExecute() æ–¹æ³•ã€‚</li>
<li>onProgressUpdate(Progress...values)ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå½“åå°ä»»åŠ¡çš„æ‰§è¡Œè¿›åº¦å‘ç”Ÿæ”¹å˜æ—¶æ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚</li>
<li>onPostExecute(Result result)ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œåœ¨å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œä¹‹åï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå…¶ä¸­ result å‚æ•°æ˜¯åå°ä»»åŠ¡çš„è¿”å›å€¼ï¼Œå³ dolnBackground() çš„è¿”å›å€¼ã€‚</li>
</ol>
<p>ä¸Šé¢è¿™å‡ ä¸ªæ–¹æ³•ï¼ŒonPreExecute() å…ˆæ‰§è¡Œï¼Œæ¥ç€æ˜¯ doInBackground()ï¼Œæœ€åæ‰æ˜¯ onPostExecute()ã€‚</p>
<p>é™¤äº†ä¸Šè¿°å››ä¸ªæ–¹æ³•ä»¥å¤–ï¼ŒAsyncTask è¿˜æä¾›äº† onCancelled() æ–¹æ³•ï¼Œå®ƒåŒæ ·åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå½“å¼‚æ­¥ä»»åŠ¡è¢«å–æ¶ˆæ—¶ï¼ŒonCancelled() æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™ onPostExecute() åˆ™ä¸ä¼šè¢«è°ƒç”¨ã€‚</p>
<h3 data-id="heading-2">AsyncTaskçš„ä½¿ç”¨</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ AsyncTask æ¨¡æ‹Ÿè€—æ—¶ä¸‹è½½ä»»åŠ¡çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-keyword">private</span> TextView myText;

    <span class="hljs-keyword">private</span> DownloadFilesTask task;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myText = findViewById(R.id.my_text);

        task = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DownloadFilesTask</span>(<span class="hljs-built_in">this</span>, myText);
        task.execute();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DownloadFilesTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;Void, Integer, Boolean&gt; {

        <span class="hljs-keyword">private</span> TextView myText;

        <span class="hljs-keyword">private</span> Context context;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">DownloadFilesTask</span><span class="hljs-params">(Context context, TextView myText)</span> {
            <span class="hljs-built_in">this</span>.context = context;
            <span class="hljs-built_in">this</span>.myText = myText;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPreExecute</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// å¼€å§‹ä¸‹è½½å‰æç¤º</span>
            Toast.makeText(context, <span class="hljs-string">"Start download"</span>, Toast.LENGTH_SHORT).show();
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> Boolean <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... voids)</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶ä¸‹è½½</span>
                    Thread.sleep(<span class="hljs-number">100</span>);
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                }
                <span class="hljs-comment">// é€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ä¸‹è½½è¿›åº¦</span>
                publishProgress((i));
                <span class="hljs-comment">// Escape early if cancel() is called</span>
                <span class="hljs-keyword">if</span> (isCancelled()) <span class="hljs-keyword">break</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onProgressUpdate</span><span class="hljs-params">(Integer... progress)</span> {
            <span class="hljs-comment">// UIæ›´æ–°ä¸‹è½½è¿›åº¦</span>
            myText.setText(<span class="hljs-string">" Current progress is : "</span> + Integer.valueOf(progress[<span class="hljs-number">0</span>]));
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Boolean result)</span> {
            <span class="hljs-comment">// ä»»åŠ¡ç»“æŸåï¼Œæ˜¾ç¤ºä¸‹è½½æˆåŠŸè¿˜æ˜¯å¤±è´¥</span>
            <span class="hljs-keyword">if</span> (result) {
                Toast.makeText(context, <span class="hljs-string">"Download succeed"</span>, Toast.LENGTH_SHORT).show();
            } <span class="hljs-keyword">else</span> {
                Toast.makeText(context, <span class="hljs-string">"Download failed"</span>, Toast.LENGTH_SHORT).show();
            }
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onDestroy();
        <span class="hljs-keyword">if</span> (task != <span class="hljs-literal">null</span>) {
            task.cancel(<span class="hljs-literal">true</span>);
            task = <span class="hljs-literal">null</span>;
        }
    }
}
</code></pre>
<p>ä½¿ç”¨ AsyncTask è¦æ³¨æ„:</p>
<ul>
<li>AsyncTask çš„å¯¹è±¡å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»ºã€‚</li>
<li>ä¸è¦åœ¨ç¨‹åºä¸­ç›´æ¥è°ƒç”¨ onPreExecute()ã€onPostExecute()ã€doInBackground() å’Œ
onProgressUpdate() æ–¹æ³•ã€‚</li>
</ul>
<p>AsyncTask åœ¨ä¸åŒçš„ç‰ˆæœ¬ä¸­æ‰§è¡Œä»»åŠ¡çš„æ–¹å¼ä¸åŒï¼š</p>
<ul>
<li>åœ¨ Android1.6 ä»¥å‰ï¼ŒAsyncTask æ˜¯ä¸²è¡Œæ‰§è¡Œä»»åŠ¡çš„ã€‚</li>
<li>ä» Android1.6 åˆ° 2.3ï¼Œæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œå®ç°åŸç†æ˜¯ç”¨ä¸€ä¸ªçº¿ç¨‹æ•°ä¸º 5 çš„çº¿ç¨‹æ± è¿›è¡Œå¹¶è¡Œæ‰§è¡Œï¼Œä½†æ˜¯å¦‚æœå‰ 5 ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿ï¼Œå°±ä¼šé˜»å¡åé¢ä»»åŠ¡çš„æ‰§è¡Œï¼Œæ‰€ä»¥ä¸é€‚åˆå¤§é‡ä»»åŠ¡å¹¶å‘æ‰§è¡Œã€‚</li>
<li>Android3.0 ä¹‹åï¼Œä¸ºäº†é¿å… AsyncTask æ‰€å¸¦æ¥çš„å¹¶å‘é”™è¯¯ï¼Œåˆæ”¹ä¸ºäº†ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ï¼Œä¸è¿‡ä½ å¯ä»¥é€šè¿‡ AsyncTask çš„ executeOnExecutor() æ–¹æ³•è‡ªå·±æŒ‡å®šçº¿ç¨‹æ± æ¥å¹¶è¡Œåœ°æ‰§è¡Œä»»åŠ¡ã€‚</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹åœ¨ Android 11.0 ä¸­æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œã€‚</p>
<p>æ€ä¹ˆéªŒè¯å‘¢ï¼Ÿæˆ‘ä»¬åŒæ—¶æ‰§è¡Œ 3 ä¸ª AsyncTask, åœ¨ AsyncTask çš„ doInBackground() æ–¹æ³•é‡Œé¢ sleep 2 ç§’åæ‰“å°ä¸€æ¡ Logï¼Œå¦‚æœæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œå¤§æ¦‚ 2s å·¦å³å°±èƒ½æŠŠ 3 ä¸ª Log éƒ½æ‰“å°å‡ºæ¥ï¼›åä¹‹ï¼Œå¦‚æœæ˜¯ä¸²è¡Œæ‰§è¡Œï¼Œæ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹å¤§æ¦‚éœ€è¦ 6s å·¦å³ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-keyword">private</span> MyAsyncTask mTask;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"MyAsyncTask"</span>;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
            mTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAsyncTask</span>();
            mTask.execute();
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAsyncTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncTask</span>&lt;Void, Void, Void&gt; {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPreExecute</span><span class="hljs-params">()</span> {
            <span class="hljs-built_in">super</span>.onPreExecute();
            Log.d(TAG, <span class="hljs-string">"onPreExecute"</span>);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> Void <span class="hljs-title function_">doInBackground</span><span class="hljs-params">(Void... voids)</span> {
            <span class="hljs-keyword">try</span> {
                Thread.sleep(<span class="hljs-number">2000</span>);
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
            }
            Log.d(TAG, Thread.currentThread().getName() + <span class="hljs-string">": doInBackground"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPostExecute</span><span class="hljs-params">(Void unused)</span> {
            <span class="hljs-built_in">super</span>.onPostExecute(unused);
            Log.d(TAG, <span class="hljs-string">"onPostExecute"</span>);
        }
    }
}
</code></pre>
<p>æ‰“å°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024-04-11 21:59:44.819 </span><span class="hljs-number">10346</span><span class="hljs-number">-10346</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">onPreExecute</span>
<span class="hljs-number">2024-04-11 21:59:44.820 </span><span class="hljs-number">10346</span><span class="hljs-number">-10346</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">onPreExecute</span>
<span class="hljs-number">2024-04-11 21:59:46.821 </span><span class="hljs-number">10346</span><span class="hljs-number">-10371</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">AsyncTask</span> <span class="hljs-comment">#1: doInBackground</span>
<span class="hljs-number">2024-04-11 21:59:46.822 </span><span class="hljs-number">10346</span><span class="hljs-number">-10346</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">onPostExecute</span>
<span class="hljs-number">2024-04-11 21:59:48.834 </span><span class="hljs-number">10346</span><span class="hljs-number">-10372</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">AsyncTask</span> <span class="hljs-comment">#2: doInBackground</span>
<span class="hljs-number">2024-04-11 21:59:48.835 </span><span class="hljs-number">10346</span><span class="hljs-number">-10346</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">onPostExecute</span>
<span class="hljs-number">2024-04-11 21:59:50.842 </span><span class="hljs-number">10346</span><span class="hljs-number">-10371</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">AsyncTask</span> <span class="hljs-comment">#1: doInBackground</span>
<span class="hljs-number">2024-04-11 21:59:50.843 </span><span class="hljs-number">10346</span><span class="hljs-number">-10346</span> <span class="hljs-string">MyAsyncTask</span> <span class="hljs-string">com.example.test</span> <span class="hljs-string">D</span> <span class="hljs-string">onPostExecute</span>
</code></pre>
<p>æ•´ä¸ªè¿‡ç¨‹è€—æ—¶å¤§æ¦‚ 6 ç§’ï¼Œç”±æ­¤å¯çŸ¥åœ¨ Android 11.0 ä¸­ <strong>AsyncTask é»˜è®¤æ˜¯ä¸²è¡Œæ‰§è¡Œå¼‚æ­¥ä»»åŠ¡çš„</strong>ã€‚</p>
<h3 data-id="heading-3">æºç è§£æ</h3>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡æºç æ¥åˆ†æ AsyncTask çš„å®ç°åŸç†ï¼Œå…ˆæ¥çœ‹çœ‹ AsyncTask çš„æ„é€ æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTask</span>&lt;Params, Progress, Result&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> InternalHandler sHandler;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> WorkerRunnable&lt;Params, Result&gt; mWorker;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> FutureTask&lt;Result&gt; mFuture;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Handler mHandler;

    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¿…é¡»åœ¨ UI çº¿ç¨‹ä¸Šè°ƒç”¨æ­¤æ„é€ å‡½æ•°ã€‚</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AsyncTask</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>((Looper) <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AsyncTask</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Handler handler)</span> {
        <span class="hljs-built_in">this</span>(handler != <span class="hljs-literal">null</span> ? handler.getLooper() : <span class="hljs-literal">null</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AsyncTask</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Looper callbackLooper)</span> {
        mHandler = callbackLooper == <span class="hljs-literal">null</span> || callbackLooper == Looper.getMainLooper()
                ? getMainHandler()
                : <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(callbackLooper);

        mWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerRunnable</span>&lt;Params, Result&gt;() {
            <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
                mTaskInvoked.set(<span class="hljs-literal">true</span>);
                <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
                <span class="hljs-keyword">try</span> {
                    Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
                    <span class="hljs-comment">//noinspection unchecked</span>
                    result = doInBackground(mParams);
                    Binder.flushPendingCommands();
                } <span class="hljs-keyword">catch</span> (Throwable tr) {
                    mCancelled.set(<span class="hljs-literal">true</span>);
                    <span class="hljs-keyword">throw</span> tr;
                } <span class="hljs-keyword">finally</span> {
                    postResult(result);
                }
                <span class="hljs-keyword">return</span> result;
            }
        };

        mFuture = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FutureTask</span>&lt;Result&gt;(mWorker) {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">done</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">try</span> {
                    postResultIfNotInvoked(get());
                } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                    android.util.Log.w(LOG_TAG, e);
                } <span class="hljs-keyword">catch</span> (ExecutionException e) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"An error occurred while executing doInBackground()"</span>,
                            e.getCause());
                } <span class="hljs-keyword">catch</span> (CancellationException e) {
                    postResultIfNotInvoked(<span class="hljs-literal">null</span>);
                }
            }
        };
    }
}
</code></pre>
<p>åœ¨ AsyncTask çš„æ„é€ æ–¹æ³•ä¸­ï¼Œåˆ†åˆ«å¯¹ mHandlerã€mWorkerã€mFuture è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œ WorkerRunnable æ˜¯ AsyncTask çš„æŠ½è±¡é™æ€å†…éƒ¨ç±»ï¼Œå®ç°äº† Callable æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WorkerRunnable</span>&lt;Params, Result&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Callable</span>&lt;Result&gt; {
    Params[] mParams;
}
</code></pre>
<p>åœ¨è¿™é‡Œåˆ›å»ºäº† WorkerRunnable çš„å®ä¾‹ mWorkerï¼Œ å¹¶å¯¹ call() æ–¹æ³•è¿›è¡Œäº†å®ç°ï¼Œç„¶åæŠŠ mWorker ä½œä¸ºå‚æ•°ä¼ ç»™äº† FutureTaskï¼ŒFutureTask é‡å†™äº† done() æ–¹æ³•ï¼Œdone() æ–¹æ³•åœ¨ä»»åŠ¡æ‰§è¡Œç»“æŸçš„æ—¶å€™è°ƒç”¨ã€‚</p>
<p>ä¸‹é¢çœ‹çœ‹ AsyncTask çš„ execute() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncTask</span>&lt;Params, Progress, Result&gt; {

    <span class="hljs-comment">// æŒ‰é¡ºåºä¸€æ¬¡æ‰§è¡Œä¸€ä¸ªä»»åŠ¡</span>
    <span class="hljs-meta">@Deprecated</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Executor</span> <span class="hljs-variable">SERIAL_EXECUTOR</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SerialExecutor</span>();

    <span class="hljs-meta">@UnsupportedAppUsage</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">Executor</span> <span class="hljs-variable">sDefaultExecutor</span> <span class="hljs-operator">=</span> SERIAL_EXECUTOR;

    <span class="hljs-meta">@MainThread</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> AsyncTask&lt;Params, Progress, Result&gt; <span class="hljs-title function_">execute</span><span class="hljs-params">(Params... params)</span> {
        <span class="hljs-keyword">return</span> executeOnExecutor(sDefaultExecutor, params);
    }

    <span class="hljs-meta">@MainThread</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> AsyncTask&lt;Params, Progress, Result&gt; <span class="hljs-title function_">executeOnExecutor</span><span class="hljs-params">(Executor exec,
                                                                       Params... params)</span> {
        <span class="hljs-keyword">if</span> (mStatus != Status.PENDING) {
            <span class="hljs-keyword">switch</span> (mStatus) {
                <span class="hljs-keyword">case</span> RUNNING:
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Cannot execute task:"</span>
                            + <span class="hljs-string">" the task is already running."</span>);
                <span class="hljs-keyword">case</span> FINISHED:
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Cannot execute task:"</span>
                            + <span class="hljs-string">" the task has already been executed "</span>
                            + <span class="hljs-string">"(a task can be executed only once)"</span>);
            }
        }

        mStatus = Status.RUNNING;

        onPreExecute();

        mWorker.mParams = params;
        exec.execute(mFuture);

        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
    }
}
</code></pre>
<p>åœ¨ executeOnExecutor() æ–¹æ³•ä¸­ï¼ŒAsyncTask çš„ onPreExecute æ–¹æ³•æœ€å…ˆæ‰§è¡Œï¼Œç„¶åçº¿ç¨‹æ± å¼€å§‹æ‰§è¡Œã€‚çº¿ç¨‹æ± æ‰§è¡Œå‰ï¼Œä¼šæŠŠ params èµ‹å€¼ç»™ mWorker.mParamsï¼Œçº¿ç¨‹æ± çš„ execute() æ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸º mFutureã€‚</p>
<p>å½“ä½ è°ƒç”¨ AsyncTask çš„ execute() æ–¹æ³•æ—¶ï¼Œä½¿ç”¨çš„æ˜¯é»˜è®¤çš„çº¿ç¨‹æ±  sDefaultExecutorï¼Œé‡Œé¢æ‰§è¡Œä»»åŠ¡æ˜¯ä¸²è¡Œçš„ã€‚SerialExecutor ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SerialExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Executor</span> {
    <span class="hljs-keyword">final</span> ArrayDeque&lt;Runnable&gt; mTasks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayDeque</span>&lt;Runnable&gt;();
    Runnable mActive;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(<span class="hljs-keyword">final</span> Runnable r)</span> {
        mTasks.offer(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                <span class="hljs-keyword">try</span> {
                    r.run();
                } <span class="hljs-keyword">finally</span> {
                    scheduleNext();
                }
            }
        });
        <span class="hljs-keyword">if</span> (mActive == <span class="hljs-literal">null</span>) {
            scheduleNext();
        }
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleNext</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> ((mActive = mTasks.poll()) != <span class="hljs-literal">null</span>) {
            THREAD_POOL_EXECUTOR.execute(mActive);
        }
    }
}
</code></pre>
<p>SerialExecutor æ˜¯ AsyncTask çš„å†…éƒ¨ç±»ï¼ŒSerialExecutor çš„ execute() æ–¹æ³•ä¸Šä½¿ç”¨äº† synchronized å…³é”®å­—ä¿®é¥°ï¼Œé”çš„æ˜¯è¿™ä¸ª SerialExecutor çš„å®ä¾‹ï¼Œåˆç”±äº SerialExecutor çš„å®ä¾‹â€”â€”sDefaultExecutor æ˜¯ static volatile ç±»å‹çš„ï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­åªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥å¿…é¡»ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡åœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚execute() æ–¹æ³•ä¼ å…¥çš„å‚æ•°ä¸º FutureTaskï¼ŒFutureTask å®ç°äº† Runnable æ¥å£ã€‚execute() æ–¹æ³•é¦–å…ˆä¼šæŠŠ FutureTask å¯¹è±¡æ’å…¥åˆ°ä»»åŠ¡é˜Ÿåˆ— mTasks ä¸­ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™æ²¡æœ‰æ­£åœ¨æ´»åŠ¨çš„ AsyncTask ä»»åŠ¡ï¼Œå°±ä¼šè°ƒç”¨ SerialExecutor çš„ scheduleNext() æ–¹æ³•æ¥æ‰§è¡Œä¸‹ä¸€ä¸ª AsyncTask ä»»åŠ¡ã€‚åŒæ—¶å½“ä¸€ä¸ª AsyncTask ä»»åŠ¡æ‰§è¡Œå®Œåï¼ŒAsyncTask ä¼šç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡ç›´åˆ°æ‰€æœ‰çš„ä»»åŠ¡éƒ½è¢«æ‰§è¡Œä¸ºæ­¢ã€‚</p>
<p>AsyncTask ä¸­çš„å¦ä¸€ä¸ªçº¿ç¨‹æ±  THREAD_POOL_EXECUTOR ç”¨äºçœŸæ­£åœ°æ‰§è¡Œä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">CORE_POOL_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAXIMUM_POOL_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">KEEP_ALIVE_SECONDS</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ThreadFactory</span> <span class="hljs-variable">sThreadFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactory</span>() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">mCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">public</span> Thread <span class="hljs-title function_">newThread</span><span class="hljs-params">(Runnable r)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r, <span class="hljs-string">"AsyncTask #"</span> + mCount.getAndIncrement());
    }
};

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Executor THREAD_POOL_EXECUTOR;

<span class="hljs-keyword">static</span> {
    <span class="hljs-type">ThreadPoolExecutor</span> <span class="hljs-variable">threadPoolExecutor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
            CORE_POOL_SIZE, MAXIMUM_POOL_SIZE, KEEP_ALIVE_SECONDS, TimeUnit.SECONDS,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SynchronousQueue</span>&lt;Runnable&gt;(), sThreadFactory);
    <span class="hljs-comment">// ä»»åŠ¡è¢«æ‹’ç»æ‰§è¡Œçš„ç­–ç•¥ </span>
    threadPoolExecutor.setRejectedExecutionHandler(sRunOnSerialPolicy);
    THREAD_POOL_EXECUTOR = threadPoolExecutor;
}
</code></pre>
<p>THREAD_POOL_EXECUTOR çš„æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º1ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º20ï¼Œé—²ç½®æ—¶é—´ä¸º3ç§’ã€‚</p>
<p>å‰é¢åˆ†æ Android 11.0 ä¸­é»˜è®¤æ˜¯ä¸²è¡Œè¿˜æ˜¯å¹¶è¡Œçš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥æŠŠ execute() æ–¹æ³•æ”¹æˆå¹¶è¡Œæ‰§è¡Œçš„æ–¹å¼ï¼Œä¼ å…¥è¿™ä¸ªçº¿ç¨‹æ± ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++){
    mTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyAsyncTask</span>();
    mTask.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
}
</code></pre>
<p>å†çœ‹çœ‹æ‰“å°çš„æ—¶é—´æ˜¯ä¸æ˜¯ä¸ä¸€æ ·ã€‚</p>
<p>ç”±äº FutureTask çš„ run() æ–¹æ³•ä¼šè°ƒç”¨ mWorker çš„ call() æ–¹æ³•ï¼Œå› æ­¤ mWorker çš„ call() æ–¹æ³•æœ€ç»ˆä¼šåœ¨çº¿ç¨‹æ± ä¸­æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-java" lang="java">mWorker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WorkerRunnable</span>&lt;Params, Result&gt;() {
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">call</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception {
        mTaskInvoked.set(<span class="hljs-literal">true</span>);
        <span class="hljs-type">Result</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">try</span> {
            Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND);
            <span class="hljs-comment">//noinspection unchecked</span>
            result = doInBackground(mParams);
            Binder.flushPendingCommands();
        } <span class="hljs-keyword">catch</span> (Throwable tr) {
            mCancelled.set(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">throw</span> tr;
        } <span class="hljs-keyword">finally</span> {
            postResult(result);
        }
        <span class="hljs-keyword">return</span> result;
    }
};
</code></pre>
<p>åœ¨ mWorker çš„ call() æ–¹æ³•ä¸­ï¼Œé¦–å…ˆå°† mTaskInvoked è®¾ä¸º trueï¼Œè¡¨ç¤ºå½“å‰ä»»åŠ¡å·²ç»è¢«è°ƒç”¨è¿‡äº†ï¼Œç„¶åæ‰§è¡Œ doInBackground() æ–¹æ³•ï¼Œæ¥ç€å°†å…¶è¿”å›å€¼ä¼ é€’ç»™ postResult() æ–¹æ³•ï¼Œå®ƒçš„å®ç°å¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Result <span class="hljs-title function_">postResult</span><span class="hljs-params">(Result result)</span> {
    <span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> getHandler().obtainMessage(MESSAGE_POST_RESULT,
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTaskResult</span>&lt;Result&gt;(<span class="hljs-built_in">this</span>, result));
    message.sendToTarget();
    <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>postResult() æ–¹æ³•ä¼šé€šè¿‡ mHandler å‘é€ä¸€ä¸ª MESSAGE_POST_RESULT çš„æ¶ˆæ¯ï¼ŒmHandler æ¥è‡ª getMainHandler() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Handler <span class="hljs-title function_">getMainHandler</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">synchronized</span> (AsyncTask.class) {
        <span class="hljs-keyword">if</span> (sHandler == <span class="hljs-literal">null</span>) {
            sHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">InternalHandler</span>(Looper.getMainLooper());
        }
        <span class="hljs-keyword">return</span> sHandler;
    }
}
</code></pre>
<p>åœ¨ getMainHandler() æ–¹æ³•ä¸­æ–°å»ºäº† InternalHandler å®ä¾‹ï¼Œä¼ å‚ä¸ºä¸»çº¿ç¨‹çš„ Looper å¯¹è±¡ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ InternalHandler çš„ handleMessage() æ–¹æ³•è¿è¡Œåœ¨ä¸»çº¿ç¨‹ã€‚InternalHandlerä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InternalHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Handler</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InternalHandler</span><span class="hljs-params">(Looper looper)</span> {
        <span class="hljs-built_in">super</span>(looper);
    }

    <span class="hljs-meta">@SuppressWarnings({"unchecked", "RawUseOfParameterizedType"})</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
        AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj;
        <span class="hljs-keyword">switch</span> (msg.what) {
            <span class="hljs-keyword">case</span> MESSAGE_POST_RESULT:
                <span class="hljs-comment">// There is only one result</span>
                result.mTask.finish(result.mData[<span class="hljs-number">0</span>]);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> MESSAGE_POST_PROGRESS:
                result.mTask.onProgressUpdate(result.mData);
                <span class="hljs-keyword">break</span>;
        }
    }
}
</code></pre>
<p>InternalHandler æ”¶åˆ° MESSAGE_POST_RESULT æ¶ˆæ¯åè°ƒç”¨ AsyncTask çš„ finish() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">finish</span><span class="hljs-params">(Result result)</span> {
    <span class="hljs-keyword">if</span> (isCancelled()) {
        onCancelled(result);
    } <span class="hljs-keyword">else</span> {
        onPostExecute(result);
    }
    mStatus = Status.FINISHED;
}
</code></pre>
<p>é‡Œé¢åˆ¤æ–­å¦‚æœ AsyncTask è¢«å–æ¶ˆæ‰§è¡Œäº†ï¼Œå°±è°ƒç”¨ onCancelled() æ–¹æ³•ï¼Œå¦åˆ™è°ƒç”¨ onPostExecute() æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ° doInBackground() çš„è¿”å›ç»“æœä¼šä¼ é€’ç»™ onPostExecute() æ–¹æ³•ï¼Œåˆ°è¿™é‡Œ AsyncTask çš„å·¥ä½œæµç¨‹å°±åˆ†æå®Œæ¯•äº†ã€‚</p>
<p>å‰é¢çš„ä»£ç ä¸­åˆ›å»º THREAD_POOL_EXECUTOR çš„æ—¶å€™ï¼Œç»™å®ƒè®¾ç½®äº†æ‹’ç»ç­–ç•¥ sRunOnSerialPolicyï¼Œå½“THREAD_POOL_EXECUTOR æ‹’ç»æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™ï¼Œå…·ä½“çš„å¤„ç†é€»è¾‘å°±ä¼šåˆ†å‘åˆ° sRunOnSerialPolicy é‡Œé¢çš„rejectedExecution()æ–¹æ³•ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">BACKUP_POOL_SIZE</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadPoolExecutor sBackupExecutor;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> LinkedBlockingQueue&lt;Runnable&gt; sBackupExecutorQueue;

<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">RejectedExecutionHandler</span> <span class="hljs-variable">sRunOnSerialPolicy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RejectedExecutionHandler</span>() {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">rejectedExecution</span><span class="hljs-params">(Runnable r, ThreadPoolExecutor e)</span> {
        android.util.Log.w(LOG_TAG, <span class="hljs-string">"Exceeded ThreadPoolExecutor pool size"</span>);
        <span class="hljs-comment">// As a last ditch fallback, run it on an executor with an unbounded queue.</span>
        <span class="hljs-comment">// Create this executor lazily, hopefully almost never.</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            <span class="hljs-keyword">if</span> (sBackupExecutor == <span class="hljs-literal">null</span>) {
                sBackupExecutorQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;();
                sBackupExecutor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(
                        BACKUP_POOL_SIZE, BACKUP_POOL_SIZE, KEEP_ALIVE_SECONDS,
                        TimeUnit.SECONDS, sBackupExecutorQueue, sThreadFactory);
                sBackupExecutor.allowCoreThreadTimeOut(<span class="hljs-literal">true</span>);
            }
        }
        sBackupExecutor.execute(r);
    }
};
</code></pre>
<p>é‡Œé¢å¯ç”¨äº†ä¸€ä¸ªå¤‡ç”¨çš„çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5 ï¼Œè®©å¤‡ç”¨çš„çº¿ç¨‹æ± æ¥æ‰§è¡Œè¢«æ‹’ç»çš„ä»»åŠ¡ã€‚è¿™é‡Œè®¾ç½®äº†æ ¸å¿ƒçº¿ç¨‹ä¹Ÿéµå¾ªé—²æ—¶ç­–ç•¥ï¼Œè®©æ ¸å¿ƒçº¿ç¨‹åœ¨æ²¡æœ‰ä»»åŠ¡æ‰§è¡Œä¸€æ®µæ—¶é—´åè‡ªåŠ¨ç»ˆæ­¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - Huggingfaceä¸Transformersç®€ä»‹]]></title>    <link>https://juejin.cn/post/7595894884956766259</link>    <guid>https://juejin.cn/post/7595894884956766259</guid>    <pubDate>2026-01-17T11:09:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884956766259" data-draft-id="7595842144907034674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - Huggingfaceä¸Transformersç®€ä»‹"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T11:09:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°é”‹java1234"/> <meta itemprop="url" content="https://juejin.cn/user/4152222342709933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€æŠ€æœ¯ä¸“é¢˜ã€‘AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ - Huggingfaceä¸Transformersç®€ä»‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4152222342709933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°é”‹java1234
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:09:01.000Z" title="Sat Jan 17 2026 11:09:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é”‹å“¥ã€‚æœ€è¿‘è¿è½½æ›´æ–°ã€ŠAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ã€‹æŠ€æœ¯ä¸“é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59e83cc7b7e643a89fe7753e1afcd8a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253051&amp;x-signature=uDF8XosHEEnMqEjuzuAwljeDSpc%3D" alt="QQæˆªå›¾20260117190029.jpg" loading="lazy"/>
æœ¬è¯¾ç¨‹ä¸»è¦ä»‹ç»å’Œè®²è§£Hugging Faceå’ŒTransformersï¼ŒåŒ…æ‹¬åŠ è½½é¢„è®­ç»ƒæ¨¡å‹ï¼Œè‡ªå®šä¹‰æ•°æ®é›†ï¼Œæ¨¡å‹æ¨ç†ï¼Œæ¨¡å‹å¾®è°ƒï¼Œæ¨¡å‹æ€§èƒ½è¯„ä¼°ç­‰ã€‚æ˜¯AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘çš„å…¥é—¨å¿…å¤‡çŸ¥è¯†ã€‚
åŒæ—¶ä¹Ÿé…å¥—è§†é¢‘æ•™ç¨‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11L6RBwE8m%2F" target="_blank" title="https://www.bilibili.com/video/BV11L6RBwE8m/" ref="nofollow noopener noreferrer">ã€Š2027ç‰ˆ AIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å…¥é—¨-æ‹¥æŠ±Hugging Faceä¸Transformersç”Ÿæ€ è§†é¢‘æ•™ç¨‹(æ— åºŸè¯ç‰ˆ) ç©å‘½æ›´æ–°ä¸­~ã€‹</a></p>
<h2 data-id="heading-0">Huggingfaceç®€ä»‹</h2>
<p>Hugging Faceï¼ˆä¸­æ–‡åï¼šæŠ±æŠ±è„¸ï¼‰æ˜¯ 2016 å¹´æˆç«‹äºç¾å›½çº½çº¦çš„ Franco - American å¼€æº AI å…¬å¸ï¼Œä»¥ Transformers åº“ä¸ AI æ¨¡å‹å…±äº«å¹³å°ä¸ºæ ¸å¿ƒï¼Œæ„å»ºäº†è¦†ç›–å¤šæ¨¡æ€çš„ AI å¼€å‘ç”Ÿæ€ï¼Œè¢«èª‰ä¸º â€œAI ç•Œçš„ GitHubâ€ï¼Œè‡´åŠ›äºæ¨åŠ¨ AI æŠ€æœ¯å¼€æºå…±äº«ã€‚</p>
<p>å®˜æ–¹ç«™ç‚¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2F" target="_blank" title="https://huggingface.co/" ref="nofollow noopener noreferrer">huggingface.co/</a></p>
<p><strong>ä¸€ã€æ ¸å¿ƒåŸºç¡€ä¿¡æ¯</strong></p>
<ul>
<li><strong>åˆ›ç«‹ä¸å®šä½</strong>ï¼š2016 å¹´ç”± ClÃ©ment Delangueã€Julien Chaumond å’Œ Thomas Wolf åˆ›ç«‹ï¼Œæœ€åˆæ˜¯é¢å‘é’å°‘å¹´çš„èŠå¤©æœºå™¨äººå…¬å¸ï¼Œåè½¬å‹ä¸ºä¸“æ³¨æœºå™¨å­¦ä¹ å·¥å…·å¼€å‘çš„å¹³å°ï¼Œæ ¸å¿ƒä½¿å‘½æ˜¯é™ä½ AI å¼€å‘é—¨æ§›ï¼Œè®©ä¼˜è´¨æœºå™¨å­¦ä¹ å®è·µæ™®åŠåŒ–ã€‚</li>
<li><strong>æ ¸å¿ƒå›¢é˜Ÿ</strong>ï¼šClÃ©ment Delangueï¼ˆCEOï¼‰ã€Julien Chaumondï¼ˆCTOï¼‰ã€Thomas Wolfï¼ˆCSOï¼‰ã€‚</li>
<li><strong>ç”Ÿæ€è§„æ¨¡</strong>ï¼šæˆªè‡³ 2026 å¹´1æœˆï¼ŒHugging Face Hub æ‰˜ç®¡è¶… 200ä¸‡+ä¸ªé¢„è®­ç»ƒæ¨¡å‹ã€60ä¸‡ + æ•°æ®é›†ã€30 ä¸‡ + AI åº”ç”¨å®ä¾‹ï¼Œå¸å¼•å…¨çƒ 500 ä¸‡å¼€å‘è€…å‚ä¸ã€‚</li>
</ul>
<p><strong>äºŒã€æ ¸å¿ƒäº§å“ä¸æŠ€æœ¯</strong></p>
<ol start="0">
<li>
<p><strong>Transformers åº“</strong>ï¼šHugging Face çš„æ ¸å¿ƒ Python åº“ï¼Œæä¾› BERTã€GPTã€T5 ç­‰ä¸»æµ Transformer æ¨¡å‹çš„å¼€æºå®ç°ï¼Œå…¼å®¹ PyTorchã€TensorFlow å’Œ JAX æ¡†æ¶ï¼Œå¯å¿«é€Ÿå®Œæˆæ¨¡å‹åŠ è½½ã€å¾®è°ƒä¸æ¨ç†ï¼Œå¤§å¹…ç®€åŒ– NLPã€CVã€è¯­éŸ³ç­‰å¤šæ¨¡æ€ä»»åŠ¡å¼€å‘æµç¨‹ã€‚</p>
</li>
<li>
<p><strong>Hugging Face Hub</strong>ï¼šé›†æ¨¡å‹ã€æ•°æ®é›†ã€åº”ç”¨ï¼ˆSpacesï¼‰äºä¸€ä½“çš„æ‰˜ç®¡å¹³å°ï¼Œæ”¯æŒ Git ç‰ˆæœ¬æ§åˆ¶ï¼Œå¼€å‘è€…å¯å…±äº«ã€å‘ç°èµ„æºï¼Œä¹Ÿèƒ½å€ŸåŠ© Spaces å¿«é€Ÿæ„å»ºå’Œæ¼”ç¤º AI åº”ç”¨ã€‚</p>
</li>
<li>
<p><strong>è¾…åŠ©å·¥å…·åº“</strong></p>

























<table><thead><tr><th>å·¥å…·åº“</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Datasets</td><td>ç®€åŒ–æ•°æ®é›†åŠ è½½ã€é¢„å¤„ç†ï¼Œæ”¯æŒæµå¼åŠ è½½ã€å†…å­˜æ˜ å°„ç­‰ï¼Œé€‚é…å¤§è§„æ¨¡æ•°æ®å¤„ç†</td></tr><tr><td>Accelerate</td><td>ç®€åŒ–å¤š GPU/TPU åˆ†å¸ƒå¼è®­ç»ƒæµç¨‹ï¼Œæå‡è®­ç»ƒæ•ˆç‡</td></tr><tr><td>Diffusers</td><td>æä¾›æ‰©æ•£æ¨¡å‹å®ç°ï¼ŒåŠ©åŠ›å›¾åƒç”Ÿæˆç­‰ä»»åŠ¡å¼€å‘</td></tr><tr><td>Tokenizers</td><td>é«˜æ•ˆå¿«é€Ÿçš„åˆ†è¯å·¥å…·ï¼Œé€‚é…å„ç±»æ¨¡å‹çš„æ–‡æœ¬å¤„ç†éœ€æ±‚</td></tr></tbody></table>
</li>
<li>
<p><strong>å®‰å…¨ä¸æ ¼å¼ä¼˜åŒ–</strong>ï¼šæ¨å‡º Safetensors æ ¼å¼ï¼Œ2023 å¹´æˆä¸ºé»˜è®¤æ ¼å¼ï¼Œè§£å†³ Python pickle æ ¼å¼çš„å®‰å…¨éšæ‚£ï¼Œæ”¯æŒå¼ é‡å»¶è¿ŸåŠ è½½ã€‚</p>
</li>
</ol>
<p><strong>ä¸‰ã€åº”ç”¨åœºæ™¯</strong></p>
<ul>
<li><strong>ç§‘ç ”é¢†åŸŸ</strong>ï¼šç ”ç©¶è€…å¯å¿«é€Ÿè·å–å‰æ²¿é¢„è®­ç»ƒæ¨¡å‹ä¸æ•°æ®é›†ï¼Œç”¨äº NLPã€CVã€è¯­éŸ³ç­‰å¤šé¢†åŸŸçš„æ¨¡å‹æµ‹è¯•ä¸ä¼˜åŒ–ï¼Œæ— éœ€ä»é›¶è®­ç»ƒï¼ŒèŠ‚çœç®—åŠ›ä¸æ—¶é—´ã€‚</li>
<li><strong>ä¼ä¸šå¼€å‘</strong>ï¼šä¼ä¸šå¯åˆ©ç”¨å¹³å°èµ„æºå¼€å‘èŠå¤©æœºå™¨äººã€æ–‡æœ¬åˆ†æç³»ç»Ÿã€å›¾åƒè¯†åˆ«å·¥å…·ç­‰ï¼Œé€šè¿‡ä¼ä¸šçº§æ¨¡å‹æ‰˜ç®¡ã€å®‰å…¨éƒ¨ç½²ç­‰æœåŠ¡ï¼Œå¿«é€Ÿå®ç° AI æŠ€æœ¯å•†ä¸šåŒ–è½åœ°ã€‚</li>
<li><strong>ä¸ªäººä¸ç¤¾åŒº</strong>ï¼šå¼€å‘è€…å¯åœ¨ Spaces æ­å»º AI æ¼”ç¤ºåº”ç”¨ï¼Œåˆ†äº«åˆ›æ„ï¼›æ–°æ‰‹å¯é€šè¿‡æ•™ç¨‹ã€ç¤¾åŒºäº¤æµå¿«é€Ÿå…¥é—¨ AI å¼€å‘ã€‚</li>
</ul>
<p><strong>å››ã€å•†ä¸šæ¨¡å¼</strong></p>
<ul>
<li><strong>å¼€æºå…è´¹</strong>ï¼šæ ¸å¿ƒåº“ï¼ˆå¦‚ Transformersï¼‰ã€åŸºç¡€æ¨¡å‹ä¸æ•°æ®é›†å…è´¹å¼€æ”¾ï¼Œé™ä½å¼€å‘è€…å…¥é—¨æˆæœ¬ï¼Œå¸å¼•ç¤¾åŒºå‚ä¸ã€‚</li>
<li><strong>ä»˜è´¹å¢å€¼</strong>ï¼šä¸ºä¼ä¸šæä¾›å®šåˆ¶åŒ–æœåŠ¡ï¼ŒåŒ…æ‹¬ç§æœ‰æ¨¡å‹æ‰˜ç®¡ã€å®‰å…¨åˆè§„éƒ¨ç½²ã€æŠ€æœ¯æ”¯æŒç­‰ï¼Œæ»¡è¶³ä¼ä¸šçº§éœ€æ±‚ã€‚</li>
</ul>
<p><strong>äº”ã€è¡Œä¸šå½±å“</strong></p>
<p>Hugging Face æ¨åŠ¨äº† AI æŠ€æœ¯çš„å¼€æºå…±äº«è¿›ç¨‹ï¼Œè®©å°å›¢é˜Ÿä¸ä¸ªäººå¼€å‘è€…ä¹Ÿèƒ½é«˜æ•ˆä½¿ç”¨å‰æ²¿æ¨¡å‹å¼€å±•ç ”å‘ï¼ŒåŒæ—¶å…¶ç¤¾åŒºåä½œæ¨¡å¼åŠ é€Ÿäº† AI æŠ€æœ¯è¿­ä»£ï¼Œæˆä¸ºè¿æ¥ç§‘ç ”ä¸äº§ä¸šçš„é‡è¦æ¡¥æ¢ï¼ŒMetaã€Google ç­‰ä¼ä¸šåŠä¼—å¤šç ”ç©¶æœºæ„å‡ä¸ºå…¶ç”Ÿæ€è´¡çŒ®åŠ›é‡ã€‚</p>
<h2 data-id="heading-1">Transformersç®€ä»‹</h2>
<p>Transformers æ˜¯ç”± Hugging Face å¼€å‘å¹¶ç»´æŠ¤çš„ä¸€ä¸ªå¼€æº Python åº“ï¼Œä¸“æ³¨äº è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ å’Œ å¤šæ¨¡æ€ä»»åŠ¡ã€‚å®ƒæä¾›äº†å¯¹å¤§é‡é¢„è®­ç»ƒæ¨¡å‹çš„ç»Ÿä¸€ APIï¼Œä½¿å¾—ç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆèƒ½å¤Ÿå¿«é€ŸåŠ è½½ã€å¾®è°ƒå’Œéƒ¨ç½²å…ˆè¿›çš„æ¨¡å‹ã€‚ç”¨äºæ–‡æœ¬ã€è§†è§‰ã€éŸ³é¢‘å’Œå¤šæ¨¡æ€æ¨¡å‹çš„æœ€å…ˆè¿›çš„æœºå™¨å­¦ä¹ æ¨¡å‹çš„æ¨¡å‹å®šä¹‰æ¡†æ¶ï¼Œå¯ç”¨äºæ¨ç†å’Œè®­ç»ƒã€‚</p>
<p>githubå¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhuggingface%2Ftransformers" target="_blank" title="https://github.com/huggingface/transformers" ref="nofollow noopener noreferrer">github.com/huggingfaceâ€¦</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdocs%2Ftransformers" target="_blank" title="https://huggingface.co/docs/transformers" ref="nofollow noopener noreferrer">huggingface.co/docs/transfâ€¦</a></p>
<p>å®ƒæ”¯æŒï¼š</p>
<ul>
<li><strong>æ–‡æœ¬ä»»åŠ¡</strong>ï¼šæ–‡æœ¬åˆ†ç±»ã€æ–‡æœ¬ç”Ÿæˆã€ç¿»è¯‘ã€é—®ç­”ã€æ‘˜è¦ã€æƒ…æ„Ÿåˆ†æç­‰ã€‚</li>
<li><strong>å›¾åƒä»»åŠ¡</strong>ï¼šå›¾åƒåˆ†ç±»ã€å›¾æ–‡æ£€ç´¢ç­‰ã€‚</li>
<li><strong>éŸ³é¢‘ä»»åŠ¡</strong>ï¼šè¯­éŸ³è¯†åˆ«ã€éŸ³é¢‘åˆ†ç±»ç­‰ã€‚</li>
<li><strong>å¤šæ¨¡æ€ä»»åŠ¡</strong>ï¼šå¦‚å›¾æ–‡ç»“åˆçš„ CLIP æ¨¡å‹ã€‚</li>
</ul>

























<table><thead><tr><th>ç‰¹ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç»Ÿä¸€æ˜“ç”¨çš„API</strong></td><td>æ— è®ºèƒŒåæ˜¯BERTã€GPTè¿˜æ˜¯å…¶ä»–ä»»ä½•æ¨¡å‹ï¼Œéƒ½æä¾›<code>from_pretrained()</code>åŠ è½½ã€<code>pipeline()</code>å¿«é€Ÿæ¨ç†ç­‰ä¸€è‡´æ¥å£ã€‚</td></tr><tr><td><strong>åºå¤§çš„æ¨¡å‹åº“</strong></td><td>é›†æˆäº†æ•°ä¸‡ä¸ªç”±ç¤¾åŒºå’Œä¼ä¸šè´¡çŒ®çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ¶µç›–æ–‡æœ¬ã€è§†è§‰ã€éŸ³é¢‘ç­‰å¤šæ¨¡æ€ä»»åŠ¡ã€‚</td></tr><tr><td><strong>æ¡†æ¶æ— ç¼å…¼å®¹</strong></td><td>å…¨é¢æ”¯æŒPyTorchã€TensorFlowå’ŒJAXï¼Œç”¨æˆ·å¯æŒ‰åå¥½é€‰æ‹©ã€‚</td></tr><tr><td><strong>å¼ºå¤§çš„ç¤¾åŒºä¸å·¥å…·é“¾</strong></td><td>ä¸Hugging Face Hubã€Datasetsã€Tokenizersç­‰å·¥å…·æ·±åº¦é›†æˆï¼Œå½¢æˆå¼€å‘ç”Ÿæ€ã€‚</td></tr></tbody></table>
<p>å…¶å‘å±•å†ç¨‹å¯æ¦‚æ‹¬ä¸ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d97cda17596410697549461bc293be1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP6ZSLamF2YTEyMzQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769253051&amp;x-signature=jRJb90JQAXBxiUqb%2FFQxpNUgIpM%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ç‰¹å¾</strong></p>
<p>Transformers æä¾›ä½¿ç”¨æœ€å…ˆè¿›çš„é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œæ¨ç†æˆ–è®­ç»ƒæ‰€éœ€çš„ä¸€åˆ‡ã€‚å…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdocs%2Ftransformers%2Fpipeline_tutorial" target="_blank" title="https://huggingface.co/docs/transformers/pipeline_tutorial" ref="nofollow noopener noreferrer">Pipeline</a>ï¼šç®€å•ä¸”ä¼˜åŒ–çš„æ¨ç†ç±»ï¼Œé€‚ç”¨äºè®¸å¤šæœºå™¨å­¦ä¹ ä»»åŠ¡ï¼Œä¾‹å¦‚æ–‡æœ¬ç”Ÿæˆã€å›¾åƒåˆ†å‰²ã€è‡ªåŠ¨è¯­éŸ³è¯†åˆ«ã€æ–‡æ¡£é—®ç­”ç­‰ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdocs%2Ftransformers%2Ftrainer" target="_blank" title="https://huggingface.co/docs/transformers/trainer" ref="nofollow noopener noreferrer">è®­ç»ƒå™¨</a>ï¼šä¸€ä¸ªç»¼åˆæ€§çš„è®­ç»ƒå™¨ï¼Œæ”¯æŒæ··åˆç²¾åº¦ã€torch.compile å’Œ FlashAttention ç­‰åŠŸèƒ½ï¼Œç”¨äº PyTorch æ¨¡å‹çš„è®­ç»ƒå’Œåˆ†å¸ƒå¼è®­ç»ƒã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fdocs%2Ftransformers%2Fllm_tutorial" target="_blank" title="https://huggingface.co/docs/transformers/llm_tutorial" ref="nofollow noopener noreferrer">ç”Ÿæˆ</a>ï¼šä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) å’Œè§†è§‰è¯­è¨€æ¨¡å‹ (VLM) å¿«é€Ÿç”Ÿæˆæ–‡æœ¬ï¼ŒåŒ…æ‹¬æ”¯æŒæµå¼ä¼ è¾“å’Œå¤šç§è§£ç ç­–ç•¥ã€‚</li>
</ul>
<h2 data-id="heading-2">é­”å¡”&amp;modelscopeç®€ä»‹</h2>
<p>ModelScopeï¼ˆé­”æ­ç¤¾åŒºï¼‰æ˜¯ 2022 å¹´ç”±é˜¿é‡Œå·´å·´é€šä¹‰å®éªŒå®¤ï¼ˆåŸè¾¾æ‘©é™¢ï¼‰è”åˆä¸­å›½è®¡ç®—æœºå­¦ä¼šï¼ˆCCFï¼‰å¼€æºå‘å±•å§”å‘˜ä¼šå‘èµ·çš„ AI æ¨¡å‹å³æœåŠ¡ï¼ˆMaaSï¼‰å¼€æºå¹³å°ï¼Œå®šä½ä¸ºä¸­æ–‡å‹å¥½çš„ä¸€ç«™å¼æ¨¡å‹å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†å¹³å°ï¼Œè¦†ç›–æ¨¡å‹æ¢ç´¢ã€è®­ç»ƒã€å¾®è°ƒã€éƒ¨ç½²ä¸ç¤¾åŒºåä½œï¼Œé™ä½ AI å¼€å‘é—¨æ§›ï¼Œæ¨åŠ¨æŠ€æœ¯æ™®æƒ åŒ–é­”æ­ç¤¾åŒºã€‚</p>
<p>å®˜æ–¹ç½‘ç«™ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.modelscope.cn%2F" target="_blank" title="https://www.modelscope.cn/" ref="nofollow noopener noreferrer">www.modelscope.cn/</a></p>
<p>å¯¹åº”çš„å¼€å‘åº“æ˜¯modelscopeï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.modelscope.cn%2Fdocs%2F" target="_blank" title="https://www.modelscope.cn/docs/" ref="nofollow noopener noreferrer">www.modelscope.cn/docs/</a></p>
<hr/>
<p><strong>ä¸€ã€æ ¸å¿ƒå®šä½ä¸èƒŒæ™¯</strong></p>
<ul>
<li><strong>å‘èµ·æ–¹</strong>ï¼šé˜¿é‡Œå·´å·´é€šä¹‰å®éªŒå®¤ + CCF å¼€æºå‘å±•å§”å‘˜ä¼šï¼Œ2022 å¹´ 11 æœˆæ­£å¼å‘å¸ƒï¼Œæ˜¯å›½å†…é¢†å…ˆçš„ AI æ¨¡å‹å¼€æºç”Ÿæ€ç¤¾åŒºModelScopeã€‚</li>
<li><strong>æ ¸å¿ƒç†å¿µ</strong>ï¼šâ€œæ¨¡å‹å³æœåŠ¡ï¼ˆMaaSï¼‰â€ï¼Œæä¾›ä»æ¨¡å‹å‘ç°ã€æ¨ç†ã€å¾®è°ƒã€éƒ¨ç½²åˆ°ç›‘æ§çš„å…¨é“¾è·¯å·¥å…·é“¾ï¼Œè®© AI åº”ç”¨å¼€å‘æ›´ç®€å•ModelScopeã€‚</li>
<li><strong>å·®å¼‚åŒ–ä¼˜åŠ¿</strong>ï¼šä»¥ä¸­æ–‡ä¸ºæ ¸å¿ƒï¼Œé€‚é…å›½äº§ç®—åŠ›ï¼Œé›†æˆé˜¿é‡Œç”Ÿæ€èµ„æºï¼Œè¦†ç›–å¤šæ¨¡æ€ä¸ç§‘å­¦è®¡ç®—ç­‰å‰æ²¿é¢†åŸŸï¼Œå…¼é¡¾å¼€æºå…±äº«ä¸å·¥ä¸šçº§è½åœ°é­”æ­ç¤¾åŒºã€‚</li>
</ul>
<hr/>
<p><strong>äºŒã€æ ¸å¿ƒåŠŸèƒ½ä¸æŠ€æœ¯ç‰¹ç‚¹</strong></p>
<ol start="0">
<li>ä¸°å¯Œçš„å¤šæ¨¡æ€æ¨¡å‹åº“</li>
</ol>
<ul>
<li>è¦†ç›– NLPã€è®¡ç®—æœºè§†è§‰ã€è¯­éŸ³ã€å¤šæ¨¡æ€ã€AI for Science ç­‰é¢†åŸŸï¼ŒåŒ…å«é€šä¹‰åƒé—®ï¼ˆQwenï¼‰ã€BLIP-2ã€Wav2Vec2 ç­‰ä¸»æµæ¨¡å‹ï¼Œæ”¯æŒ 0.5B-110B å‚æ•°è§„æ¨¡ã€‚</li>
<li>ä¸­æ–‡æ¨¡å‹å æ¯”é«˜ï¼Œé€‚é…ä¸­æ–‡ NLP ä»»åŠ¡ï¼ˆå¦‚åˆ†è¯ã€è¯­ä¹‰ç†è§£ã€æœºå™¨ç¿»è¯‘ï¼‰ï¼ŒåŒæ—¶å…¼å®¹å›½é™…ä¸»æµæ¨¡å‹ï¼Œæ–¹ä¾¿è·¨è¯­è¨€åº”ç”¨å¼€å‘ã€‚</li>
<li>æä¾› SOTA æ¨¡å‹ä¸é¢†åŸŸä¸“ç”¨æ¨¡å‹ï¼ˆå¦‚åŒ»ç–—å½±åƒã€å·¥ä¸šè´¨æ£€ï¼‰ï¼Œæ»¡è¶³é€šç”¨ä¸å‚ç›´åœºæ™¯éœ€æ±‚é­”æ­ç¤¾åŒºã€‚</li>
</ul>
<ol start="2">
<li>ä¸€ç«™å¼å¼€å‘å·¥å…·é“¾</li>
</ol>





























<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td>æ¨¡å‹åŠ è½½</td><td>ä¸€è¡Œä»£ç è°ƒç”¨é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ”¯æŒ PyTorch/TensorFlowï¼Œé€‚é…æœ¬åœ°ä¸äº‘ç«¯æ¨ç†ModelScope</td></tr><tr><td>æ•°æ®ç®¡ç†</td><td>æä¾›å…¬å¼€ä¸é˜¿é‡Œè‡ªç ”æ•°æ®é›†ï¼Œæ”¯æŒ Git ç‰ˆæœ¬ç®¡ç†ï¼Œé€‚é…æ¨¡å‹è®­ç»ƒä¸è¯„æµ‹éœ€æ±‚ModelScope</td></tr><tr><td>å¾®è°ƒä¸è®­ç»ƒ</td><td>æä¾›ä½ä»£ç å¾®è°ƒæ¥å£ã€åˆ†å¸ƒå¼è®­ç»ƒæ”¯æŒã€æ··åˆç²¾åº¦è®­ç»ƒï¼Œé€‚é…å• GPU / å¤š GPU/TPU</td></tr><tr><td>éƒ¨ç½²èƒ½åŠ›</td><td>æ”¯æŒäº‘ç«¯ APIã€è¾¹ç¼˜éƒ¨ç½²ã€å®¹å™¨åŒ–è¾“å‡ºï¼Œå…¼å®¹ CPU/GPUï¼Œæä¾›å¼¹æ€§ä¼¸ç¼©ä¸æŒ‰éœ€ä»˜è´¹</td></tr><tr><td>è¯„æµ‹ç›‘æ§</td><td>å†…ç½® ModelEval è‡ªåŠ¨åŒ–è¯„æµ‹æ¡†æ¶ï¼Œæ”¯æŒæ¨¡å‹æ€§èƒ½å¯¹æ¯”ã€ç‰ˆæœ¬ç®¡ç†ä¸çº¿ä¸Šç›‘æ§</td></tr></tbody></table>
<ol start="3">
<li>åˆ†å±‚ API è®¾è®¡</li>
</ol>
<ul>
<li><strong>é«˜é˜¶ APIï¼ˆPipelineï¼‰</strong> ï¼šå°è£…æ¨¡å‹è°ƒç”¨å…¨æµç¨‹ï¼Œé€‚åˆå¿«é€ŸéªŒè¯ä»»åŠ¡ï¼Œå¦‚æ–‡æœ¬ç”Ÿæˆã€å›¾åƒåˆ†ç±»ç­‰ï¼Œå‡ è¡Œä»£ç å®Œæˆæ¨ç†ã€‚</li>
<li><strong>ä¸­é˜¶ APIï¼ˆModel/Tokenizerï¼‰</strong> ï¼šçµæ´»åŠ è½½æ¨¡å‹ä¸åˆ†è¯å™¨ï¼Œæ”¯æŒè‡ªå®šä¹‰è¾“å…¥å¤„ç†ä¸è¾“å‡ºè§£æï¼Œé€‚é…å¤æ‚åœºæ™¯ã€‚</li>
<li><strong>ä½é˜¶ APIï¼ˆåº•å±‚å¼•æ“ï¼‰</strong> ï¼šæ”¯æŒæ¨¡å‹ä¿®æ”¹ã€è‡ªå®šä¹‰è®­ç»ƒå¾ªç¯ã€é‡åŒ–ä¼˜åŒ–ï¼ˆå¦‚ INT8ï¼‰ï¼Œæ»¡è¶³æ·±åº¦å®šåˆ¶éœ€æ±‚ã€‚</li>
</ul>
<ol start="4">
<li>ç”Ÿæ€ä¸ç¤¾åŒºæ”¯æŒ</li>
</ol>
<ul>
<li><strong>ç¤¾åŒºåä½œ</strong>ï¼šæ”¯æŒæ¨¡å‹ä¸Šä¼ ã€ç‰ˆæœ¬ç®¡ç†ã€ç¤¾åŒºè¯„ä»·ï¼Œå¼€å‘è€…å¯å…±äº«æ¨¡å‹å¹¶è·å–åé¦ˆã€‚</li>
<li><strong>é«˜æ ¡åˆä½œ</strong>ï¼šä¸æ¸…åã€åŒ—å¤§ç­‰ 20 ä½™æ‰€é«˜æ ¡è”åˆå¼€å‘è¯¾ç¨‹ï¼Œæ­å»º AI æ•™è‚²å®è®­å¹³å°ï¼Œæ¨åŠ¨äººæ‰åŸ¹å…»ã€‚</li>
<li><strong>ä¼ä¸šé€‚é…</strong>ï¼šå…¼å®¹å›½äº§èŠ¯ç‰‡ï¼ˆå¦‚æ˜‡è…¾ï¼‰ï¼Œæä¾›é˜¿é‡Œäº‘ç®—åŠ›æ”¯æŒï¼Œæ–¹ä¾¿ä¼ä¸šçº§åº”ç”¨å¿«é€Ÿè½åœ°ã€‚</li>
</ul>
<hr/>
<p><strong>ä¸‰ã€ä¸ Hugging Face çš„å¯¹æ¯”</strong></p>

























<table><thead><tr><th>ç»´åº¦</th><th>ModelScope</th><th>Hugging Face</th></tr></thead><tbody><tr><td>è¯­è¨€ä¸ç”Ÿæ€</td><td>ä¸­æ–‡å‹å¥½ï¼Œé€‚é…å›½äº§ç®—åŠ›ï¼Œé›†æˆé˜¿é‡Œç”Ÿæ€</td><td>å›½é™…ç¤¾åŒºä¸»å¯¼ï¼Œæ¨¡å‹å¤šæ ·æ€§é«˜ï¼Œæ¡†æ¶å…¼å®¹æ€§å¼º</td></tr><tr><td>æ ¸å¿ƒä¼˜åŠ¿</td><td>ä¸€ç«™å¼ MaaS æœåŠ¡ï¼Œå·¥ä¸šçº§éƒ¨ç½²æ”¯æŒï¼Œä¸­æ–‡æ¨¡å‹ä¸°å¯Œ</td><td>æ¨¡å‹æ•°é‡åºå¤§ï¼Œç¤¾åŒºæ´»è·ƒï¼Œç¬¬ä¸‰æ–¹å·¥å…·é›†æˆåº¦é«˜</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¸­æ–‡ NLPã€å›½äº§ç®—åŠ›éƒ¨ç½²ã€ä¼ä¸šçº§åº”ç”¨è½åœ°</td><td>è·¨è¯­è¨€ç ”ç©¶ã€å¿«é€ŸåŸå‹éªŒè¯ã€å¼€æºç¤¾åŒºåä½œ</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain ç¬¬äºŒè¯¾ï¼šæ‹’ç»â€œåºŸè¯â€ï¼Œç”¨ Zod å¼ºåˆ¶ AI è¾“å‡ºæ ‡å‡† JSON]]></title>    <link>https://juejin.cn/post/7595808703074779162</link>    <guid>https://juejin.cn/post/7595808703074779162</guid>    <pubDate>2026-01-17T11:24:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703074779162" data-draft-id="7595894884956717107" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain ç¬¬äºŒè¯¾ï¼šæ‹’ç»â€œåºŸè¯â€ï¼Œç”¨ Zod å¼ºåˆ¶ AI è¾“å‡ºæ ‡å‡† JSON"/> <meta itemprop="keywords" content="LangChain,JSON,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T11:24:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="San30"/> <meta itemprop="url" content="https://juejin.cn/user/1766294768060816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain ç¬¬äºŒè¯¾ï¼šæ‹’ç»â€œåºŸè¯â€ï¼Œç”¨ Zod å¼ºåˆ¶ AI è¾“å‡ºæ ‡å‡† JSON
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1766294768060816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    San30
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T11:24:23.000Z" title="Sat Jan 17 2026 11:24:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><strong>æ‘˜è¦</strong>ï¼šåœ¨äººå·¥æ™ºèƒ½åº”ç”¨å¼€å‘ä¸­ï¼Œæœ€è®©äººå¤´ç–¼çš„ä¸æ˜¯ AI ä¸å¤Ÿèªæ˜ï¼Œè€Œæ˜¯å®ƒâ€œå¤ªçˆ±è¯´è¯â€ã€‚æœ¬æ–‡å°†æ·±å…¥æµ…å‡ºåœ°ä»‹ç»å¦‚ä½•åˆ©ç”¨ LangChain çš„ <code>JsonOutputParser</code> å’Œ Zodï¼Œç»™ AI æˆ´ä¸Šâ€œç´§ç®å’’â€ï¼Œå°†å®ƒä»ä¸€ä¸ªéšæ„çš„èŠå¤©å¯¹è±¡ï¼Œå˜æˆä¸€ä¸ªç²¾å‡†çš„ç»“æ„åŒ–æ•°æ®ç”Ÿæˆå™¨ã€‚</p>
<h2 data-id="heading-0">å¼•è¨€ï¼šå½“ AI é‡ä¸Šç¨‹åºä»£ç </h2>
<p>åœ¨ ChatGPT ç­‰å¤§æ¨¡å‹ï¼ˆLLMï¼‰çˆ†ç«çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ä¹ æƒ¯äº†ç”¨è‡ªç„¶è¯­è¨€å’Œ AI å¯¹è¯ã€‚ä½ é—®å®ƒï¼šâ€œä»€ä¹ˆæ˜¯ Promiseï¼Ÿâ€å®ƒä¼šæ´‹æ´‹æ´’æ´’ç»™ä½ å†™ä¸€ç¯‡å‡ ç™¾å­—çš„æ–‡ç« ï¼Œç”šè‡³è´´å¿ƒåœ°åŠ ä¸Šä»£ç ç¤ºä¾‹å’Œæ€»ç»“ã€‚</p>
<p>è¿™å¯¹äººç±»æ¥è¯´éå¸¸å®Œç¾ï¼Œä½†å¯¹äºç¨‹åºå¼€å‘æ¥è¯´ï¼Œè¿™ç®€ç›´æ˜¯åœºâ€œç¾éš¾â€ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºç¨‹åºä»£ç å¬ä¸æ‡‚â€œæ•£æ–‡â€ã€‚å¦‚æœä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªè‡ªåŠ¨ç”ŸæˆæŠ€æœ¯æ–‡æ¡£çš„è½¯ä»¶ï¼Œä½ çš„ä»£ç éœ€è¦çš„æ˜¯ç²¾ç¡®çš„ã€ç»“æ„åŒ–çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-JSON" lang="JSON"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Promise"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ç­‰"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ..."</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦‚æœä½ ç›´æ¥é—® AIï¼Œå®ƒå¯èƒ½ä¼šåœ¨ JSON æ•°æ®å¤–é¢åŒ…ä¸Šä¸€å±‚ Markdown æ ¼å¼ï¼Œæˆ–è€…åœ¨å¼€å¤´åŠ ä¸€å¥â€œå¥½çš„ï¼Œè¿™æ˜¯ä½ è¦çš„æ•°æ®â€ï¼Œç”šè‡³æŠŠå­—æ®µå <code>difficulty</code> éšæ‰‹å†™æˆ <code>level</code>ã€‚åªè¦æœ‰ä¸€ä¸ªç¬¦å·ä¸å¯¹ï¼Œä½ çš„ç¨‹åºå°±ä¼šæŠ¥é”™å´©æºƒã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­ç§˜ä¸€ç§â€œé©¯æœâ€ AI çš„æŠ€æœ¯æ‰‹æ®µâ€”â€”åˆ©ç”¨ <strong>LangChain</strong> æ¡†æ¶é…åˆ <strong>Zod</strong> éªŒè¯åº“ï¼Œè®© AI ä¹–ä¹–å¬è¯ï¼Œåªè¾“å‡ºæˆ‘ä»¬æƒ³è¦çš„æ ‡å‡†æ ¼å¼ï¼Œæœ€åä¼šé™„ä¸Šæˆ‘çš„ä¸€æ®µå®Œæ•´å®ä¾‹ä»£ç ã€‚</p>
<h2 data-id="heading-1">æ ¸å¿ƒæ­¦å™¨ï¼šLangChain ä¸ Zod</h2>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—ä¸¥å¯†çš„â€œæµæ°´çº¿â€ã€‚åœ¨è¿™ä¸ªæµæ°´çº¿ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸¤ä¸ªå…³é”®è§’è‰²ï¼š</p>
<ol>
<li><strong>Zodï¼ˆè§„åˆ™åˆ¶å®šè€…ï¼‰</strong> ï¼šå®ƒè´Ÿè´£å®šä¹‰â€œä»€ä¹ˆæ˜¯æ­£ç¡®çš„æ•°æ®æ ¼å¼â€ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæ¨¡å…·ï¼Œæ‰€æœ‰å‡ºå‚çš„äº§å“å¿…é¡»é•¿å¾—å’Œå®ƒä¸€æ ·ã€‚</li>
<li><strong>JsonOutputParserï¼ˆç›‘å·¥ï¼‰</strong> ï¼šå®ƒæ˜¯ LangChain æä¾›çš„è§£æå™¨ï¼Œè´Ÿè´£æŠŠ Zod å®šä¹‰çš„è§„åˆ™ç¿»è¯‘æˆ AI èƒ½å¬æ‡‚çš„æŒ‡ä»¤ï¼Œå¹¶è´Ÿè´£æ£€æŸ¥ AI çš„è¾“å‡ºæ˜¯å¦åˆæ ¼ã€‚</li>
</ol>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡å®é™…çš„ä»£ç é€»è¾‘ï¼ˆåŸºäº DeepSeek æ¨¡å‹ï¼‰ï¼Œçœ‹çœ‹è¿™å¥—æœºåˆ¶æ˜¯å¦‚ä½•è¿è½¬çš„ã€‚</p>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰â€œå¥‘çº¦â€ (Schema)</h3>
<p>ä¸€åˆ‡å§‹äºè§„åˆ™ã€‚æˆ‘ä»¬éœ€è¦æ˜ç¡®å‘Šè¯‰è®¡ç®—æœºï¼Œæˆ‘ä»¬æƒ³è¦ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚</p>
<p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>zod</code> åº“æ¥åˆ›å»ºä¸€ä¸ªâ€œæ¦‚å¿µæ¨¡å‹â€ã€‚å‡è®¾æˆ‘ä»¬è¦è®© AI è§£é‡Šå‰ç«¯æŠ€æœ¯æ¦‚å¿µï¼Œæˆ‘ä»¬è§„å®šè¾“å‡ºå¿…é¡»åŒ…å«å››ä¸ªç‰¹å®šçš„ä¿¡æ¯ç‚¹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// å®šä¹‰æ•°æ®çš„â€œæ¨¡å…·â€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">FrontendConceptSchema</span> = z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ¦‚å¿µåç§°'</span>),
    <span class="hljs-attr">core</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ ¸å¿ƒè¦ç‚¹'</span>),
    <span class="hljs-attr">useCase</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å¸¸è§ä½¿ç”¨åœºæ™¯'</span>),
    <span class="hljs-attr">difficulty</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">'ç®€å•'</span>, <span class="hljs-string">'ä¸­ç­‰'</span>, <span class="hljs-string">'å›°éš¾'</span>]).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å­¦ä¹ éš¾åº¦'</span>)
});
</code></pre>
<p>è¿™æ®µä»£ç çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æš—è—ç„æœºï¼š</p>
<ul>
<li><strong>ç²¾ç¡®çš„ç±»å‹</strong>ï¼šè§„å®š <code>name</code> å¿…é¡»æ˜¯æ–‡å­—ï¼Œ<code>useCase</code> å¿…é¡»æ˜¯æ•°ç»„ã€‚</li>
<li><strong>ä¸¥æ ¼çš„é€‰é¡¹</strong>ï¼š<code>difficulty</code>ï¼ˆéš¾åº¦ï¼‰åªèƒ½åœ¨â€œç®€å•ã€ä¸­ç­‰ã€å›°éš¾â€è¿™ä¸‰ä¸ªè¯é‡Œé€‰ï¼ŒAI å¦‚æœè‡ªåˆ›ä¸€ä¸ªâ€œåœ°ç‹±çº§â€ï¼Œå°±ä¼šè¢«åˆ¤å®šä¸ºè¿è§„ã€‚</li>
<li><strong>è¯­ä¹‰æè¿°</strong>ï¼šæ³¨æ„ <code>.describe(...)</code> è¿™ä¸€éƒ¨åˆ†ã€‚è¿™ä¸ä»…ä»…æ˜¯ç»™ç¨‹åºå‘˜çœ‹çš„æ³¨é‡Šï¼ŒLangChain ä¼šæŠŠè¿™äº›æ–‡å­—æå–å‡ºæ¥ä¼ ç»™ AIï¼Œå‘Šè¯‰å®ƒæ¯ä¸ªå­—æ®µå…·ä½“ä»£è¡¨ä»€ä¹ˆå«ä¹‰ã€‚</li>
</ul>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šè˜è¯·â€œç›‘å·¥â€ (Parser)</h3>
<p>æœ‰äº†è§„åˆ™ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ‰§è¡Œè€…ã€‚æˆ‘ä»¬å°†åˆšæ‰å®šä¹‰çš„ Schema äº¤ç»™ <code>JsonOutputParser</code>ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> jsonParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>(<span class="hljs-title class_">FrontendConceptSchema</span>);
</code></pre>
<p>è¿™ä¸ªè§£æå™¨æœ‰ä¸€ä¸ªæå…¶å¼ºå¤§çš„åŠŸèƒ½ï¼š<code>getFormatInstructions()</code>ã€‚å®ƒä¼šè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„è§„åˆ™ï¼Œç”Ÿæˆä¸€æ®µä¸“é—¨å†™ç»™ AI çœ‹çš„â€œæç¤ºè¯æŒ‡ä»¤â€ã€‚è¿™æ®µæŒ‡ä»¤å¤§æ¦‚é•¿è¿™æ ·ï¼ˆç¿»è¯‘åï¼‰ï¼š</p>
<blockquote>
<p><em>â€œä½ å¿…é¡»è¾“å‡ºä¸€ä¸ª JSON å¯¹è±¡ï¼Œå­—æ®µå¿…é¡»åŒ…å« nameã€coreã€useCase... ä¸è¦è¾“å‡ºä»»ä½• Markdown æ ‡è®°ï¼Œç¡®ä¿å¯ä»¥è¢«ä»£ç è§£æ...â€</em></p>
</blockquote>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šæ„å»ºæŒ‡ä»¤ä¸æ¨¡å‹ (Prompt &amp; Model)</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é…ç½® AI æ¨¡å‹ã€‚è¿™é‡Œä½¿ç”¨çš„æ˜¯æ¨ç†èƒ½åŠ›å¼ºå¤§çš„ <strong>DeepSeek</strong> (<code>deepseek-reasoner</code>)ã€‚ä¸ºäº†è®©è¾“å‡ºæ›´ç¨³å®šï¼Œæˆ‘ä»¬å°†æ¨¡å‹çš„ <code>temperature</code> è®¾ç½®ä¸º 0ï¼Œæ„å‘³ç€è®©å®ƒç”±â€œåˆ›æ„æ¨¡å¼â€åˆ‡æ¢ä¸ºâ€œä¸¥è°¨æ¨¡å¼â€ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å°†â€œç›‘å·¥â€ç”Ÿæˆçš„æŒ‡ä»¤åµŒå…¥åˆ°ç»™ AI çš„æœ€ç»ˆæç¤ºè¯ä¸­ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  ä½ æ˜¯ä¸€ä¸ªåªä¼šè¾“å‡º JSON çš„ APIï¼Œä¸å…è®¸è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚

  âš ï¸ ä½ å¿…é¡»ã€åªè¿”å›ã€‘ç¬¦åˆä»¥ä¸‹ Schema çš„ JSONï¼š
  - ä¸å…è®¸å¢åŠ å­—æ®µ
  - ä¸å…è®¸å‡å°‘å­—æ®µ
  - å­—æ®µåå¿…é¡»å®Œå…¨ä¸€è‡´
  {format_instructions} 

  å‰ç«¯æ¦‚å¿µï¼š{topic}
`</span>);
</code></pre>
<p>æ³¨æ„ <code>{format_instructions}</code> è¿™ä¸ªå ä½ç¬¦ï¼Œè§£æå™¨ç”Ÿæˆçš„å¤æ‚æŒ‡ä»¤ä¼šè‡ªåŠ¨å¡«å……åˆ°è¿™é‡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å»å†™é‚£äº›ç¹ççš„æ ¼å¼è¦æ±‚ï¼Œå…¨éƒ¨è‡ªåŠ¨åŒ–å®Œæˆã€‚</p>
<h3 data-id="heading-5">ç¬¬å››æ­¥ï¼šå¯åŠ¨æµæ°´çº¿ (Chain)</h3>
<p>LangChain çš„é­…åŠ›åœ¨äºå¯ä»¥å°†å„ä¸ªæ­¥éª¤åƒç®¡é“ä¸€æ ·è¿æ¥èµ·æ¥ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// æµç¨‹ï¼šæç¤ºè¯ -&gt; æ¨¡å‹æ€è€ƒ -&gt; JSONè§£ææ ¡éªŒ</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(jsonParser);
</code></pre>
<p>è¿™ä¸ªé“¾æ¡çš„å·¥ä½œæµç¨‹éå¸¸æ¸…æ™°ï¼š</p>
<ol>
<li><strong>è¾“å…¥</strong>ï¼šç”¨æˆ·è¾“å…¥ä¸»é¢˜ï¼ˆä¾‹å¦‚â€œPromiseâ€ï¼‰ã€‚</li>
<li><strong>Prompt</strong>ï¼šç³»ç»Ÿè‡ªåŠ¨ç»„åˆå‡ºåŒ…å«ä¸¥æ ¼æ ¼å¼è¦æ±‚çš„å®Œæ•´æç¤ºè¯ã€‚</li>
<li><strong>Model</strong>ï¼šDeepSeek æ¨¡å‹æ¥æ”¶æŒ‡ä»¤ï¼Œè¿›è¡Œæ¨ç†ï¼Œç”Ÿæˆç¬¦åˆè¦æ±‚çš„æ–‡æœ¬ã€‚</li>
<li><strong>JsonOutputParser</strong>ï¼šè§£æå™¨æ‹¦æˆªæ¨¡å‹çš„è¾“å‡ºï¼Œå°†å…¶æ¸…æ´—ã€éªŒè¯ï¼Œå¹¶è½¬åŒ–ä¸ºçœŸæ­£çš„ JavaScript å¯¹è±¡ã€‚</li>
</ol>
<h3 data-id="heading-6">æœ€ç»ˆæ•ˆæœ</h3>
<p>å½“æˆ‘ä»¬è¿è¡Œè¿™æ®µä»£ç ï¼Œå‘ç³»ç»Ÿè¯¢é—® "Promise" è¿™ä¸ªæ¦‚å¿µæ—¶ï¼Œæˆ‘ä»¬å°†ä¸å†å¾—åˆ°ä¸€æ®µæ¨¡ç³Šçš„èŠå¤©è®°å½•ï¼Œè€Œæ˜¯å¾—åˆ°ä¸€ä¸ªå®Œç¾çš„æ•°æ®å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-JSON" lang="JSON"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Promise"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"core"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Promise æ˜¯ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„å¯¹è±¡..."</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"useCase"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span> <span class="hljs-string">"ç½‘ç»œè¯·æ±‚"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"æ–‡ä»¶è¯»å–"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"æ•°æ®åº“æŸ¥è¯¢"</span> <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"difficulty"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸­ç­‰"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç¨‹åºå¯ä»¥ç›´æ¥è¯»å– <code>response.difficulty</code> æ¥åšé€»è¾‘åˆ¤æ–­ï¼Œæˆ–è€…ç›´æ¥éå† <code>response.useCase</code> æ¸²æŸ“é¡µé¢åˆ—è¡¨ã€‚</p>
<h2 data-id="heading-7">ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ</h2>
<p>å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œè¿™ä¼¼ä¹åªæ˜¯ç¨‹åºå‘˜çš„â€œå¼ºè¿«ç—‡â€ã€‚ä½†å¯¹äº AI åº”ç”¨çš„å‘å±•æ¥è¯´ï¼Œè¿™æ˜¯ä¸€æ¬¡è´¨çš„é£è·ƒã€‚</p>
<ol>
<li><strong>è‡ªåŠ¨åŒ–é›†æˆçš„åŸºçŸ³</strong>ï¼šåªæœ‰å½“ AI çš„è¾“å‡ºæ˜¯ç»“æ„åŒ–ã€å¯é¢„æµ‹çš„ï¼Œå®ƒæ‰èƒ½è¢«åµŒå…¥åˆ°å¤æ‚çš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼ˆæ¯”å¦‚è‡ªåŠ¨æŠ¥è¡¨ç”Ÿæˆã€æ™ºèƒ½å®¢æœå·¥å•ç³»ç»Ÿï¼‰ã€‚</li>
<li><strong>å‘Šåˆ«â€œå¹»è§‰â€</strong> ï¼šé€šè¿‡ Zod çš„ä¸¥æ ¼æ ¡éªŒï¼Œæˆ‘ä»¬èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šè¿‡æ»¤æ‰ AI çç¼–ä¹±é€ çš„æ ¼å¼ï¼Œä¿è¯ç³»ç»Ÿç¨³å®šæ€§ã€‚</li>
<li><strong>å¼€å‘æ•ˆç‡å€å¢</strong>ï¼šå¼€å‘è€…ä¸å†éœ€è¦ç¼–å†™å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼å»æ¸…æ´— AI çš„å›ç­”ï¼Œä¸€åˆ‡ç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆã€‚</li>
</ol>
<p>é€šè¿‡ <code>JsonOutputParser</code>ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å°†â€œç”Ÿæˆå¼ AIâ€å…³è¿›äº†â€œç»“æ„åŒ–æ•°æ®â€çš„ç¬¼å­é‡Œï¼Œè®©å®ƒä»ä¸€ä¸ªåªä¼šèŠå¤©çš„æ–‡ç§‘ç”Ÿï¼Œå˜æˆäº†ä¸€ä¸ªä¸¥è°¨å·¥ä½œçš„ç†ç§‘ç”Ÿã€‚è¿™å°±æ˜¯ç°ä»£ AI å·¥ç¨‹åŒ–çš„åŠ›é‡ã€‚</p>
<h2 data-id="heading-8">æºç </h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatDeepSeek</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/deepseek'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PromptTemplate</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/prompts'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JsonOutputParser</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/output_parsers'</span>;
<span class="hljs-comment">// Zod æ˜¯ä¸€ä¸ªç”¨äº TypeScript çš„é«˜æ€§èƒ½ã€å£°æ˜å¼ schema éªŒè¯åº“ï¼Œæ”¯æŒè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ä¸é™æ€ç±»å‹æ¨å¯¼ã€‚</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'dotenv/config'</span>

<span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({
    <span class="hljs-attr">model</span>: <span class="hljs-string">'deepseek-reasoner'</span>,
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,
});

<span class="hljs-keyword">const</span> <span class="hljs-title class_">FrontendConceptSchema</span> = z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ¦‚å¿µåç§°'</span>),
    <span class="hljs-attr">core</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'æ ¸å¿ƒè¦ç‚¹'</span>),
    <span class="hljs-attr">useCase</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å¸¸è§ä½¿ç”¨åœºæ™¯'</span>),
    <span class="hljs-attr">difficulty</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">'ç®€å•'</span>, <span class="hljs-string">'ä¸­ç­‰'</span>, <span class="hljs-string">'å›°éš¾'</span>]).<span class="hljs-title function_">describe</span>(<span class="hljs-string">'å­¦ä¹ éš¾åº¦'</span>)
})

<span class="hljs-keyword">const</span> jsonParser = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonOutputParser</span>(<span class="hljs-title class_">FrontendConceptSchema</span>);

<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">PromptTemplate</span>.<span class="hljs-title function_">fromTemplate</span>(<span class="hljs-string">`
  ä½ æ˜¯ä¸€ä¸ªåªä¼šè¾“å‡º JSON çš„ APIï¼Œä¸å…è®¸è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—ã€‚

  âš ï¸ ä½ å¿…é¡»ã€åªè¿”å›ã€‘ç¬¦åˆä»¥ä¸‹ Schema çš„ JSONï¼š
  - ä¸å…è®¸å¢åŠ å­—æ®µ
  - ä¸å…è®¸å‡å°‘å­—æ®µ
  - å­—æ®µåå¿…é¡»å®Œå…¨ä¸€è‡´ï¼Œä½¿ç”¨nameã€coreã€useCaseã€difficulty
  - è¿”å›ç»“æœå¿…é¡»å¯ä»¥è¢« JSON.parse æˆåŠŸè§£æ

  {format_instructions}

  å‰ç«¯æ¦‚å¿µï¼š{topic}
`</span>);


<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(model).<span class="hljs-title function_">pipe</span>(jsonParser);

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">invoke</span>({
    <span class="hljs-attr">topic</span>: <span class="hljs-string">'Promise'</span>,
    <span class="hljs-attr">format_instructions</span>: jsonParser.<span class="hljs-title function_">getFormatInstructions</span>(),
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡]]></title>    <link>https://juejin.cn/post/7596066987472650282</link>    <guid>https://juejin.cn/post/7596066987472650282</guid>    <pubDate>2026-01-18T02:03:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596066987472650282" data-draft-id="7596066987472617514" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡"/> <meta itemprop="keywords" content="Docker,å®¹å™¨,MySQL"/> <meta itemprop="datePublished" content="2026-01-18T02:03:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="starkå¼ å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/1983974643871069"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€ƒç¦» Docker Hub é™é€Ÿï¼å›½å†…é•œåƒ + å®Œæ•´ Docker Compose éƒ¨ç½² Node ä¸ MySQL æœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1983974643871069/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    starkå¼ å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T02:03:01.000Z" title="Sun Jan 18 2026 02:03:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ Docker Composeå®¹å™¨åŒ–Nodeã€Mysqlæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-1">Docker å’Œ Docker Compose</h3>
<p>åœ¨ä¹‹å‰ä½¿ç”¨Dockerå‰ï¼Œåœ¨Docker Hub é‡Œæ‹‰å–é•œåƒéå¸¸ä¸æ»‘ï¼Œä½†æ˜¯è¿‘æœŸåœ¨è¯•çš„æ—¶å€™å‘ç°äº†å¾ˆå¤šé—®é¢˜ï¼Œå°¤å…¶æ˜¯é•œåƒçš„æ‹‰å–ï¼Œæˆäº†ä¸å°çš„ç¾éš¾ï¼Œåæ¥æ‰¾äº†ä¸€æ¬¾å›½å†…é•œåƒï¼ˆè½©è¾•é•œåƒï¼‰çš„ä¸€æ¬¾äº§å“ï¼Œè§£å†³äº†æˆ‘çš„ç‡ƒçœ‰ä¹‹æ€¥ï¼Œä¸å¾—ä¸è¯´ç°åœ¨æ²¡æœ‰äººæ°‘å¸åŸºæœ¬ç©ä¸ä¸‹å»ï¼Œä»–ä»¬å®˜ç½‘çš„ä¸€é”®å®‰è£…è„šæœ¬éå¸¸æ–¹ä¾¿ï¼Œè¿™ä¸å¾—ä¸å¤¸èµ Lnmpæ¶æ„ï¼Œå¼€æºä¸”æ— é™ç»­èˆªã€‚</p>
<p>Docker çš„ä¼˜ç‚¹å°±æ˜¯è§£å†³éƒ¨ç½²æœåŠ¡çš„ç—›ç‚¹ï¼Œæåç«¯æœåŠ¡çš„æ‡‚ï¼Œå„ç§ç¯å¢ƒçš„ç‰ˆæœ¬å’Œç”Ÿæ€æ˜¯çœŸçƒ¦äººã€‚</p>
<pre><code class="hljs language-bash" lang="bash">bash &lt;(wget -qO- https://xuanyuan.cloud/docker.sh)

<span class="hljs-comment"># è®¾ç½®å¼€æœºå¯åŠ¨</span>
sudo systemctl <span class="hljs-built_in">enable</span> docker

<span class="hljs-comment"># éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</span>
docker --version

<span class="hljs-comment">#å°†å½“å‰ç”¨æˆ·åŠ å…¥dockerç»„</span>
sudo usermod -aG docker <span class="hljs-variable">$USER</span>
<span class="hljs-comment"># é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿ç»„æ›´æ”¹ç”Ÿæ•ˆ</span>
newgrp docker
</code></pre>
<p>Docker ã€Docker Compose å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash">[root@bogon ~]<span class="hljs-comment"># docker -v</span>
Docker version 20.10.24, build 297e128
[root@bogon ~]<span class="hljs-comment"># docker-compose version</span>
Docker Compose version v5.0.1
</code></pre>
<p>æ¸…ç†å®¹å™¨çš„å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">docker system prune -a
</code></pre>
<p><code>docker-compose</code> å¯åŠ¨æ„å»ºæœåŠ¡å‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">docker-compose build   <span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker-compose up -d <span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
docker-compose down <span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
docker-compose logs -f <span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
</code></pre>
<h3 data-id="heading-2">Node</h3>
<p>å¼€å§‹è®¾è®¡è¿™å¥—ç¨‹åºçš„åˆå¿ƒæ˜¯åœ¨centos7.9ä¸Šå®‰è£…ä¸€ä¸ªå¤šç‰ˆæœ¬çš„nvmè¿›è¡Œç®¡ç†ï¼Œä½†æ˜¯å› ä¸º Centos7.9 éœ€è¦å‡çº§æ‰èƒ½æ”¯æŒ22.12.0çš„ç‰ˆæœ¬ï¼Œæœ‰å…¼å®¹é—®é¢˜æ‰€ä»¥ç´¢æ€§å°±å¤§æ”¹ä¸€ä¸‹è¿™é‡Œçš„æœåŠ¡ï¼Œä½¿ç”¨ <code>Dockerfile</code> ã€<code>docker-compose.yml </code>ã€‚</p>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p>dist æ˜¯æ‰“åŒ…çš„æ–‡ä»¶å¤¹ ï¼Œä½ç½®ä¸èƒ½æé”™ï¼Œä¸ç„¶Docker compose åœ¨æ„å»ºçš„æ—¶å€™ä¼šæŠ¥é”™ï¼Œserver.js æ˜¯ä»£ç†æœåŠ¡çš„è„šæœ¬ï¼Œè¦è§£å†³çš„é—®é¢˜æ˜¯ <strong>æŠŠæœ¬åœ°è¿è¡Œå¥½çš„Vueå‰ç«¯é¡¹ç›®ï¼Œæ‰“åŒ…ä¸Šä¼ åˆ°é•œåƒçš„æ˜ å°„ç›®å½•é‡Œè¿›è¡Œè®¿é—®ï¼Œä½¿ç”¨<code>Node http-proxy-middleware</code> è¿›è¡Œä»£ç†ã€‚</strong></p>
<pre><code class="hljs language-bash" lang="bash">[root@localhost node]<span class="hljs-comment"># tree</span>
.
â”œâ”€â”€ dist
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ package.json
â””â”€â”€ server.js
</code></pre>
<p><code>Dockerfile</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-Dockerfile" lang="Dockerfile"># ä½¿ç”¨å®˜æ–¹Node.jsåŸºç¡€é•œåƒï¼ˆåŸºäºDebianï¼‰
FROM node:22.12.0-bullseye-slim

# è®¾ç½®ç¯å¢ƒå˜é‡é¿å…äº¤äº’å¼æç¤º
ENV DEBIAN_FRONTEND=noninteractive \
 Â   NVM_DIR=/usr/local/nvm \
 Â   NODE_VERSION=22.12.0

# 1. æ›´æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒæºå¹¶å®‰è£…åŸºç¡€å·¥å…·
RUN sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list &amp;&amp; \
 Â   sed -i 's/security.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list &amp;&amp; \
 Â   apt-get update &amp;&amp; \
 Â   apt-get install -y --no-install-recommends \
 Â  Â  Â   curl \
 Â  Â  Â   wget \
 Â  Â  Â   git \
 Â  Â  Â   ca-certificates \
 Â  Â  Â   bash \
 Â   &amp;&amp; rm -rf /var/lib/apt/lists/*

# 2. å®‰è£…nvmå¹¶è®¾ç½®Node.jsç‰ˆæœ¬
RUN mkdir -p $NVM_DIR &amp;&amp; \
 Â   curl -o /tmp/install_nvm.sh -fsSL https://gitee.com/mirrors/nvm/raw/v0.39.5/install.sh || \
 Â   wget -O /tmp/install_nvm.sh https://gitee.com/mirrors/nvm/raw/v0.39.5/install.sh &amp;&amp; \
 Â   PROFILE=/dev/null bash /tmp/install_nvm.sh &amp;&amp; \
 Â   rm -f /tmp/install_nvm.sh

# 3. åŠ è½½nvmå¹¶å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Node.js
RUN . $NVM_DIR/nvm.sh &amp;&amp; \
 Â   nvm install $NODE_VERSION &amp;&amp; \
 Â   nvm alias default $NODE_VERSION &amp;&amp; \
 Â   nvm use default

# 4. å°†nvmå’ŒNode.jsè·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡
ENV PATH=$NVM_DIR/versions/node/v$NODE_VERSION/bin:$NVM_DIR:$PATH

# 5. å®‰è£…serveé™æ€æœåŠ¡å™¨
RUN npm install -g serve@latest

# 6. éªŒè¯å®‰è£…
RUN node --version &amp;&amp; npm --version

WORKDIR /app

# 6. å¤åˆ¶package.jsonå’Œä»£ç†æœåŠ¡å™¨æ–‡ä»¶
COPY package*.json ./
COPY server.js ./

# 7. å®‰è£…ä¾èµ–ï¼ˆåŒ…æ‹¬expresså’Œhttp-proxy-middlewareï¼‰
RUN npm install express http-proxy-middleware

# 8. æš´éœ²ç«¯å£
EXPOSE 3000

# 9. å¥åº·æ£€æŸ¥
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
 Â  Â CMD curl -f http://localhost:3000/ || exit 1

# 10. å¯åŠ¨è‡ªå®šä¹‰æœåŠ¡å™¨
CMD ["node", "server.js"]
</code></pre>
<p><code>docker-compose.yml æ–‡ä»¶</code></p>
<pre><code class="hljs language-bash" lang="bash">version: <span class="hljs-string">'3.8'</span>

services:
  node-app:
 Â   build:
 Â  Â   context: .
 Â  Â   dockerfile: Dockerfile
 Â   container_name: nvm-node-app
 Â   ports:
 Â  Â   - <span class="hljs-string">"3000:3000"</span>
 Â   volumes:
 Â  Â  Â <span class="hljs-comment"># å°†æœ¬åœ°distç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„/app/distç›®å½•</span>
 Â  Â   - ./dist:/app/dist:ro Â <span class="hljs-comment"># roè¡¨ç¤ºåªè¯»ï¼Œæé«˜å®‰å…¨æ€§</span>
 Â   environment:
 Â  Â  Â <span class="hljs-comment"># è®¾ç½®Node.jsç›¸å…³ç¯å¢ƒå˜é‡</span>
 Â  Â   - NODE_ENV=production
 Â  Â   - NVM_DIR=/usr/local/nvm
 Â  Â <span class="hljs-comment"># å¯ä»¥ç›´æ¥ä½¿ç”¨CMDï¼Œå› ä¸ºDockerfileä¸­å·²ç»æŒ‡å®šäº†serveå‘½ä»¤</span>
 Â  Â <span class="hljs-comment"># å¦‚æœéœ€è¦å¯åŠ¨bashï¼Œå¯ä»¥å–æ¶ˆä¸‹é¢çš„æ³¨é‡Š</span>
 Â  Â <span class="hljs-comment"># command: bash -c "source $NVM_DIR/nvm.sh &amp;&amp; bash"</span>
 Â   working_dir: /app
 Â   restart: unless-stopped
 Â   networks:
 Â  Â   - app-network
 Â  Â <span class="hljs-comment"># æ·»åŠ èµ„æºé™åˆ¶</span>
 Â   deploy:
 Â  Â   resources:
 Â  Â  Â   limits:
 Â  Â  Â  Â   memory: 512M
 Â  Â  Â   reservations:
 Â  Â  Â  Â   memory: 256M

networks:
  app-network:
 Â   driver: bridge
</code></pre>
<p>Node åå‘ä»£ç†çš„ <code>server.js</code>ï¼ŒæŠŠ <a href="https://link.juejin.cn?target=http%3A%2F%2Fnode.stark.com%2F" target="_blank" title="http://node.stark.com/" ref="nofollow noopener noreferrer">node.stark.com</a> æ›´æ¢ä½ è‡ªå·±çš„åç«¯APIåœ°å€</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>);
<span class="hljs-keyword">const</span> { createProxyMiddleware } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'http-proxy-middleware'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> host = <span class="hljs-string">'http://node.stark.com'</span>; <span class="hljs-comment">// æ›´æ¢ä½ è‡ªå·±çš„åç«¯APIåœ°å€</span>

<span class="hljs-comment">// é™æ€æ–‡ä»¶æœåŠ¡ï¼ˆæŒ‡å‘distç›®å½•ï¼‰</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dist'</span>)));

<span class="hljs-comment">// APIä»£ç†é…ç½®</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api'</span>, <span class="hljs-title function_">createProxyMiddleware</span>({
  <span class="hljs-attr">target</span>: host,
  <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">pathRewrite</span>: {
 Â   <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span>, <span class="hljs-comment">// å»æ‰/apiå‰ç¼€</span>
  },
  <span class="hljs-attr">onProxyReq</span>: <span class="hljs-function">(<span class="hljs-params">proxyReq, req, res</span>) =&gt;</span> {
 Â   <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ è¯·æ±‚å¤´ç­‰</span>
 Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Proxying request: <span class="hljs-subst">${req.method}</span> <span class="hljs-subst">${req.url}</span>`</span>);
  },
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">err, req, res</span>) =&gt;</span> {
 Â   <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Proxy error:'</span>, err);
 Â   res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">'Proxy error'</span>);
  }
}));

<span class="hljs-comment">// å¤„ç†SPAè·¯ç”±ï¼ˆæ‰€æœ‰æœªåŒ¹é…çš„è¯·æ±‚è¿”å›index.htmlï¼‰</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> {
  res.<span class="hljs-title function_">sendFile</span>(path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'dist'</span>, <span class="hljs-string">'index.html'</span>));
});

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>;
app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server is running on port <span class="hljs-subst">${PORT}</span>`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`API requests are proxied to: `</span>+ host);
});
</code></pre>
<h3 data-id="heading-3">Mysql</h3>
<p>æ„å»ºmysqlçš„å®ä¾‹å®¹å™¨æ­¥éª¤å¦‚ä¸‹ï¼Œå…ˆçœ‹ä¸‹æ–‡ä»¶ç›®å½•ï¼Œå¿ƒé‡Œå¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µï¼Œåœ¨å¼€å§‹Mysql5.7çš„æ„å»ºï¼ŒMysql5.7æ„å»ºæˆåŠŸï¼Œå¦‚æœä½ æƒ³æ›´æ¢å…¶ä»–ç‰ˆæœ¬ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘æå‰ä¸‹è½½å¥½äº†<strong>mysql</strong>:5.7.44çš„å®˜æ–¹é•œåƒã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql57/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ Dockerfile Â  Â  Â  Â  Â 
â”œâ”€â”€ conf/
â”‚ Â  â””â”€â”€ my.cnf
â”œâ”€â”€ logs/
â”œâ”€â”€ data/
â””â”€â”€ init/
 Â   â””â”€â”€ init.sql
</code></pre>
<p>1ã€å…ˆåˆ›å»ºç›®å½•ï¼Œæ”¾ç½®å¯¹åº”çš„<code>Dockerfile</code> æ–‡ä»¶ã€<code>docker-compose.yml</code> æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p mysql57/{conf,logs,data,init}
</code></pre>
<p><code>Dockerfile</code> æ–‡ä»¶</p>
<pre><code class="hljs language-Dockerfile" lang="Dockerfile"># Dockerfile
FROM mysql:5.7.44

# è®¾ç½®ç¯å¢ƒå˜é‡
ENV MYSQL_ROOT_PASSWORD=123456

# åˆ›å»ºMySQLé…ç½®ç›®å½•
RUN mkdir -p /etc/mysql/conf.d

# åˆ›å»ºæ—¥å¿—å’Œæ•°æ®ç›®å½•
RUN mkdir -p /logs /var/lib/mysql

# å¤åˆ¶è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
# COPY conf/my.cnf /etc/mysql/conf.d/

# æš´éœ²ç«¯å£
EXPOSE 3306

# ä½¿ç”¨MySQLçš„é»˜è®¤å¯åŠ¨å‘½ä»¤
CMD ["mysqld"]
</code></pre>
<p><code>docker-compose.yml</code> æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">version: <span class="hljs-string">'3.8'</span>

services:
  mysql57:
 Â   image: mysql:5.7.44
 Â   container_name: mysql57
 Â   ports:
 Â  Â   - <span class="hljs-string">"3306:3306"</span>
 Â   volumes:
 Â  Â   - ./conf:/etc/mysql/conf.d
 Â  Â   - ./logs:/logs
 Â  Â   - ./data:/var/lib/mysql
 Â  Â   - ./init:/docker-entrypoint-initdb.d  <span class="hljs-comment"># æ·»åŠ è¿™ä¸€è¡Œ</span>
 Â   environment:
 Â  Â   MYSQL_ROOT_PASSWORD: 123456
 Â  Â   MYSQL_DATABASE: <span class="hljs-built_in">test</span>  <span class="hljs-comment"># å¯é€‰ï¼šåˆ›å»ºé»˜è®¤æ•°æ®åº“</span>
 Â   restart: unless-stopped
</code></pre>
<p>2ã€ç¼–å†™åˆå§‹åŒ–è„šæœ¬ï¼Œä¸»è¦åˆ›å»ºdevç”¨æˆ·ï¼Œåˆ›å»ºtestæ•°æ®åº“</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- init/init.sql</span>
<span class="hljs-comment">-- åˆ›å»ºtestæ•°æ®åº“</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> test <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

<span class="hljs-comment">-- åˆ›å»ºdevç”¨æˆ·å¹¶æˆäºˆæƒé™</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span> IDENTIFIED <span class="hljs-keyword">BY</span> <span class="hljs-string">'dev_password'</span>;

<span class="hljs-comment">-- æˆäºˆdevç”¨æˆ·å¯¹æ‰€æœ‰æ•°æ®åº“çš„æƒé™ï¼ˆåŒ…æ‹¬testæ•°æ®åº“ï¼‰</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> <span class="hljs-operator">*</span>.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span> <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">GRANT</span> OPTION;

<span class="hljs-comment">-- ç‰¹åˆ«æˆäºˆå¯¹testæ•°æ®åº“çš„æƒé™ï¼ˆç¡®ä¿æƒé™ç”Ÿæ•ˆï¼‰</span>
<span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> PRIVILEGES <span class="hljs-keyword">ON</span> test.<span class="hljs-operator">*</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'dev'</span>@<span class="hljs-string">'%'</span>;

<span class="hljs-comment">-- åˆ·æ–°æƒé™</span>
FLUSH PRIVILEGES;
</code></pre>
<p>3ã€ç¡®ä¿MySQLå…è®¸è¿œç¨‹è¿æ¥ï¼Œç¼–å†™é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">[mysqld]
bind-address = 0.0.0.0
character-set-server = utf8mb4
collation-server = utf8mb4_unicode_ci

[client]
default-character-set = utf8mb4
</code></pre>
<p>4ã€ä½¿ç”¨ <code>dev/123456</code> æ„å»ºå’Œå¯åŠ¨å°±å¯ä»¥äº†</p>
<h3 data-id="heading-4">Docker ç¯å¢ƒ</h3>
<pre><code class="hljs language-bash" lang="bash">[root@localhost node]<span class="hljs-comment"># docker ps</span>
CONTAINER ID Â  IMAGE Â  Â  Â  Â  Â  COMMAND Â  Â  Â  Â  Â  Â  Â  Â   CREATED Â  Â  Â  Â   STATUS Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   PORTS Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   NAMES
e5278552bf17 Â  node-node-app Â  <span class="hljs-string">"docker-entrypoint.sâ€¦"</span> Â  0.0.0.0:3000-&gt;3000/tcp, :::3000-&gt;3000/tcp Â  Â  Â  Â  Â  Â   node22
e30ea98d20a4 Â  mysql:5.7.44 Â   <span class="hljs-string">"docker-entrypoint.sâ€¦"</span> Â  0.0.0.0:3306-&gt;3306/tcp, :::3306-&gt;3306/tcp, 33060/tcp Â  mysql57
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596025264456744996</link>    <guid>https://juejin.cn/post/7596025264456744996</guid>    <pubDate>2026-01-18T00:12:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596025264456744996" data-draft-id="7596148446383177734" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T00:12:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ49ï¼‰Hibernateçš„äºŒçº§ç¼“å­˜å¦‚ä½•é…ç½®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:12:03.000Z" title="Sun Jan 18 2026 00:12:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„äºŒçº§ç¼“å­˜ï¼ˆSecond-Level Cacheï¼‰æ˜¯ä¸€ç§å¯é€‰çš„ç¼“å­˜æœºåˆ¶ï¼Œå®ƒå…è®¸åœ¨å¤šä¸ªä¼šè¯ä¹‹é—´å…±äº«æ•°æ®ï¼Œä»è€Œæé«˜åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚äºŒçº§ç¼“å­˜ä¸»è¦ç”¨äºç¼“å­˜å®ä½“å¯¹è±¡ã€é›†åˆå’ŒæŸ¥è¯¢ç»“æœã€‚ä¸‹é¢è¯¦ç»†ä»‹ç»å¦‚ä½•é…ç½®Hibernateçš„äºŒçº§ç¼“å­˜ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<h3 data-id="heading-0">1. é€‰æ‹©ç¼“å­˜æä¾›è€…</h3>
<p>Hibernateæ”¯æŒå¤šç§ç¼“å­˜æä¾›è€…ï¼Œå¦‚Ehcacheã€Infinispanã€Hazelcastç­‰ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Ehcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</p>
<h3 data-id="heading-1">2. æ·»åŠ ä¾èµ–</h3>
<p>é¦–å…ˆï¼Œéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ Ehcacheå’ŒHibernateçš„ç›¸å…³ä¾èµ–ã€‚ä»¥ä¸‹æ˜¯Mavenä¾èµ–é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Core --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.3.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Ehcache --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.9.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Hibernate Ehcache Integration --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hibernate<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hibernate-ehcache<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.6.3.Final<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">3. é…ç½®Hibernate</h3>
<p>æ¥ä¸‹æ¥ï¼Œéœ€è¦åœ¨Hibernateçš„é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code> ä¸­å¯ç”¨äºŒçº§ç¼“å­˜ï¼Œå¹¶æŒ‡å®šEhcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å¯ç”¨äºŒçº§ç¼“å­˜ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_second_level_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.region.factory_class"</span>&gt;</span>org.hibernate.cache.jcache.JCacheRegionFactory<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.javax.cache.provider"</span>&gt;</span>org.ehcache.jsr107.EhcacheCachingProvider<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.cache.use_query_cache"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">4. é…ç½®Ehcache</h3>
<p>åˆ›å»ºEhcacheçš„é…ç½®æ–‡ä»¶ <code>ehcache.xml</code>ï¼Œå¹¶å°†å…¶æ”¾ç½®åœ¨ç±»è·¯å¾„çš„æ ¹ç›®å½•ä¸‹ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">config</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">'http://www.w3.org/2001/XMLSchema-instance'</span>
        <span class="hljs-attr">xmlns</span>=<span class="hljs-string">'http://www.ehcache.org/v3'</span>
        <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.0.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">cache</span> <span class="hljs-attr">alias</span>=<span class="hljs-string">"com.example.domain.Product"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">key-type</span>&gt;</span>java.lang.Long<span class="hljs-tag">&lt;/<span class="hljs-name">key-type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">value-type</span>&gt;</span>com.example.domain.Product<span class="hljs-tag">&lt;/<span class="hljs-name">value-type</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">expiry</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ttl</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"seconds"</span>&gt;</span>600<span class="hljs-tag">&lt;/<span class="hljs-name">ttl</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">expiry</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">heap</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"entries"</span>&gt;</span>1000<span class="hljs-tag">&lt;/<span class="hljs-name">heap</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">offheap</span> <span class="hljs-attr">unit</span>=<span class="hljs-string">"MB"</span>&gt;</span>100<span class="hljs-tag">&lt;/<span class="hljs-name">offheap</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">cache</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">config</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">5. é…ç½®å®ä½“ç±»</h3>
<p>åœ¨éœ€è¦ç¼“å­˜çš„å®ä½“ç±»ä¸Šæ·»åŠ ç¼“å­˜æ³¨è§£ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;
<span class="hljs-keyword">import</span> org.hibernate.annotations.Cache;
<span class="hljs-keyword">import</span> org.hibernate.annotations.CacheConcurrencyStrategy;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-meta">@Cacheable</span>
<span class="hljs-meta">@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h3 data-id="heading-5">6. ä½¿ç”¨äºŒçº§ç¼“å­˜</h3>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateSecondLevelCacheExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// æ’å…¥ä¸€ä¸ªäº§å“</span>
        insertProduct(<span class="hljs-string">"Laptop"</span>, <span class="hljs-number">1000.0</span>);

        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼ˆä¼šä»æ•°æ®åº“ä¸­åŠ è½½ï¼‰</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> getProductById(<span class="hljs-number">1L</span>);
        System.out.println(<span class="hljs-string">"First query: "</span> + product1.getName());

        <span class="hljs-comment">// ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼ˆä¼šä»ç¼“å­˜ä¸­åŠ è½½ï¼‰</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> getProductById(<span class="hljs-number">1L</span>);
        System.out.println(<span class="hljs-string">"Second query: "</span> + product2.getName());

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertProduct</span><span class="hljs-params">(String name, Double price)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
            product.setName(name);
            product.setPrice(price);
            session.save(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Product "</span> + name + <span class="hljs-string">" inserted"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Product <span class="hljs-title function_">getProductById</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> session.get(Product.class, productId);
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-6">è§£é‡Š</h3>
<ol>
<li><strong>é…ç½®Hibernate</strong>ï¼šåœ¨<code>hibernate.cfg.xml</code>ä¸­å¯ç”¨äº†äºŒçº§ç¼“å­˜ï¼Œå¹¶æŒ‡å®šäº†Ehcacheä½œä¸ºç¼“å­˜æä¾›è€…ã€‚</li>
<li><strong>é…ç½®Ehcache</strong>ï¼šåœ¨<code>ehcache.xml</code>ä¸­å®šä¹‰äº†ç¼“å­˜çš„è¯¦ç»†é…ç½®ï¼Œå¦‚ç¼“å­˜çš„å­˜å‚¨å¤§å°å’Œè¿‡æœŸæ—¶é—´ã€‚</li>
<li><strong>é…ç½®å®ä½“ç±»</strong>ï¼šåœ¨éœ€è¦ç¼“å­˜çš„å®ä½“ç±»<code>Product</code>ä¸Šæ·»åŠ äº†<code>@Cacheable</code>å’Œ<code>@Cache</code>æ³¨è§£ã€‚</li>
<li><strong>ä½¿ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šé€šè¿‡<code>session.get(Product.class, productId)</code>æ–¹æ³•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢ä¼šä»æ•°æ®åº“ä¸­åŠ è½½ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°äºŒçº§ç¼“å­˜ä¸­ã€‚ç¬¬äºŒæ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®æ—¶ï¼Œä¼šä»ç¼“å­˜ä¸­åŠ è½½ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</li>
</ol>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥é…ç½®å¹¶ä½¿ç”¨Hibernateçš„äºŒçº§ç¼“å­˜æ¥æå‡åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚é€‰æ‹©åˆé€‚çš„ç¼“å­˜æä¾›è€…å’Œé…ç½®ç¼“å­˜ç­–ç•¥å¯¹äºå……åˆ†å‘æŒ¥äºŒçº§ç¼“å­˜çš„ä¼˜åŠ¿è‡³å…³é‡è¦ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„äºŒçº§ç¼“å­˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7596134842481737769</link>    <guid>https://juejin.cn/post/7596134842481737769</guid>    <pubDate>2026-01-18T00:13:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596134842481737769" data-draft-id="7596148446383194118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-18T00:13:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ50ï¼‰Hibernateçš„æ‰¹é‡æ’å…¥å¦‚ä½•ä¼˜åŒ–ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:13:22.000Z" title="Sun Jan 18 2026 00:13:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‰¹é‡æ’å…¥æ˜¯æé«˜æ•°æ®åº“å†™å…¥æ€§èƒ½çš„é‡è¦æŠ€æœ¯ï¼Œç‰¹åˆ«æ˜¯å½“éœ€è¦æ’å…¥å¤§é‡æ•°æ®æ—¶ã€‚Hibernateæä¾›äº†ä¸€äº›ä¼˜åŒ–æ‰¹é‡æ’å…¥çš„æŠ€å·§å’Œé…ç½®ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">ä¼˜åŒ–æ‰¹é‡æ’å…¥çš„æŠ€å·§</h3>
<ol>
<li><strong>ä½¿ç”¨JDBCæ‰¹é‡å¤„ç†</strong>ï¼šé€šè¿‡Hibernateçš„æ‰¹é‡å¤„ç†åŠŸèƒ½ï¼Œæ‰¹é‡å‘é€SQLè¯­å¥ã€‚</li>
<li><strong>è°ƒæ•´æ‰¹é‡å¤§å°</strong>ï¼šé€šè¿‡é…ç½®<code>hibernate.jdbc.batch_size</code>å±æ€§æ¥æ§åˆ¶æ¯æ‰¹æ¬¡å¤„ç†çš„è®°å½•æ•°ã€‚</li>
<li><strong>ç¦ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šåœ¨æ‰¹é‡æ“ä½œæ—¶ï¼Œå¯ä»¥æš‚æ—¶ç¦ç”¨äºŒçº§ç¼“å­˜ï¼Œä»¥å‡å°‘å†…å­˜æ¶ˆè€—ã€‚</li>
<li><strong>ç¦ç”¨è‡ªåŠ¨åˆ·æ–°</strong>ï¼šåœ¨æ‰¹é‡æ’å…¥ä¸­ï¼Œå¯ä»¥ç¦ç”¨è‡ªåŠ¨åˆ·æ–°ï¼Œä»¥å‡å°‘æ•°æ®åº“äº¤äº’æ¬¡æ•°ã€‚</li>
<li><strong>æ¸…ç†å’Œåˆ†æ‰¹å¤„ç†Session</strong>ï¼šåœ¨æ¯æ‰¹æ¬¡å¤„ç†åï¼Œæ¸…ç†Sessionä»¥é‡Šæ”¾å†…å­˜ã€‚</li>
</ol>
<h3 data-id="heading-1">é…ç½®Hibernate</h3>
<p>åœ¨Hibernateé…ç½®æ–‡ä»¶<code>hibernate.cfg.xml</code>ä¸­ï¼Œè¿›è¡Œä»¥ä¸‹é…ç½®æ¥ä¼˜åŒ–æ‰¹é‡æ’å…¥ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- å¯ç”¨æ‰¹é‡å¤„ç† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.jdbc.batch_size"</span>&gt;</span>50<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_inserts"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_updates"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.jdbc.batch_versioned_data"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">å®ä½“ç±»</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h3 data-id="heading-3">æ‰¹é‡æ’å…¥ä»£ç ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨Hibernateè¿›è¡Œæ‰¹é‡æ’å…¥ï¼Œå¹¶æŒ‰ç…§ä¸Šè¿°ä¼˜åŒ–æŠ€å·§è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateBatchInsertExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">50</span>; <span class="hljs-comment">// ä¸hibernate.jdbc.batch_sizeè®¾ç½®ä¸€è‡´</span>
        batchInsert(<span class="hljs-number">1000</span>, batchSize);
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsert</span><span class="hljs-params">(<span class="hljs-type">int</span> totalRecords, <span class="hljs-type">int</span> batchSize)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= totalRecords; i++) {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
                product.setName(<span class="hljs-string">"Product "</span> + i);
                product.setPrice(<span class="hljs-number">100.0</span> + i);
                session.save(product);

                <span class="hljs-keyword">if</span> (i % batchSize == <span class="hljs-number">0</span>) {
                    session.flush();
                    session.clear();
                }
            }
            transaction.commit();
            System.out.println(totalRecords + <span class="hljs-string">" products inserted"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-4">è§£é‡Š</h3>
<ol>
<li><strong>é…ç½®Hibernate</strong>ï¼šåœ¨<code>hibernate.cfg.xml</code>ä¸­ï¼Œé€šè¿‡<code>hibernate.jdbc.batch_size</code>é…ç½®æ‰¹å¤„ç†å¤§å°ä¸º50ï¼Œå¹¶å¯ç”¨äº†æ‰¹é‡æ“ä½œçš„ç›¸å…³é…ç½®é¡¹å¦‚<code>hibernate.order_inserts</code>å’Œ<code>hibernate.jdbc.batch_versioned_data</code>ã€‚</li>
<li><strong>å®ä½“ç±»</strong>ï¼šå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>ã€‚</li>
<li><strong>æ‰¹é‡æ’å…¥ä»£ç </strong>ï¼š
<ul>
<li><code>batchInsert</code>æ–¹æ³•æ¥å—æ€»è®°å½•æ•°å’Œæ‰¹å¤„ç†å¤§å°ä½œä¸ºå‚æ•°ã€‚</li>
<li>åœ¨å¾ªç¯ä¸­é€ä¸ªåˆ›å»ºå¹¶ä¿å­˜<code>Product</code>å¯¹è±¡ã€‚</li>
<li>æ¯å½“è¾¾åˆ°æ‰¹å¤„ç†å¤§å°æ—¶ï¼Œè°ƒç”¨<code>session.flush()</code>å’Œ<code>session.clear()</code>æ–¹æ³•ï¼Œå°†æ•°æ®æ‰¹é‡æ’å…¥æ•°æ®åº“å¹¶æ¸…é™¤Sessionç¼“å­˜ï¼Œé‡Šæ”¾å†…å­˜ã€‚</li>
<li>æœ€åæäº¤äº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-5">æ‰¹é‡æ’å…¥ä¼˜åŒ–æ€»ç»“</h3>
<ol>
<li><strong>JDBCæ‰¹é‡å¤„ç†</strong>ï¼šé€šè¿‡é…ç½®<code>hibernate.jdbc.batch_size</code>å®ç°æ‰¹é‡å¤„ç†åŠŸèƒ½ã€‚</li>
<li><strong>è°ƒæ•´æ‰¹é‡å¤§å°</strong>ï¼šåˆç†è®¾ç½®<code>batchSize</code>ï¼Œä»¥å¹³è¡¡å†…å­˜æ¶ˆè€—å’Œæ€§èƒ½ã€‚</li>
<li><strong>ç¦ç”¨äºŒçº§ç¼“å­˜</strong>ï¼šåœ¨æ‰¹é‡æ“ä½œæ—¶ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æˆ–ç¨‹åºä»£ç åŠ¨æ€ç¦ç”¨äºŒçº§ç¼“å­˜ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚</li>
<li><strong>ç¦ç”¨è‡ªåŠ¨åˆ·æ–°</strong>ï¼šé€šè¿‡<code>session.flush()</code>æ‰‹åŠ¨åˆ·æ–°Sessionï¼Œé¿å…æ¯æ¬¡æ’å…¥æ“ä½œéƒ½ä¸æ•°æ®åº“äº¤äº’ã€‚</li>
<li><strong>æ¸…ç†å’Œåˆ†æ‰¹å¤„ç†Session</strong>ï¼šé€šè¿‡<code>session.clear()</code>å®šæœŸæ¸…ç†Sessionï¼Œé‡Šæ”¾å†…å­˜ï¼Œé˜²æ­¢å†…å­˜æº¢å‡ºã€‚</li>
</ol>
<p>é€šè¿‡åˆç†é…ç½®å’Œä¼˜åŒ–æ‰¹é‡æ’å…¥æ“ä½œï¼Œå¯ä»¥æ˜¾è‘—æé«˜Hibernateåº”ç”¨ç¨‹åºçš„æ’å…¥æ€§èƒ½ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„æ‰¹é‡æ’å…¥ä¼˜åŒ–æŠ€æœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§]]></title>    <link>https://juejin.cn/post/7595886887523762216</link>    <guid>https://juejin.cn/post/7595886887523762216</guid>    <pubDate>2026-01-18T00:17:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595886887523762216" data-draft-id="7595974133097218082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-18T00:17:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:17:34.000Z" title="Sun Jan 18 2026 00:17:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>JavaScriptæ€§èƒ½æå‡æŒ‡å—ï¼š10ä¸ª90%å¼€å‘è€…ä¸çŸ¥é“çš„ä¼˜åŒ–æŠ€å·§</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webå¼€å‘ä¸­ï¼ŒJavaScriptçš„æ€§èƒ½ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒã€SEOæ’åå’Œä¸šåŠ¡è½¬åŒ–ç‡ã€‚å°½ç®¡è®¸å¤šå¼€å‘è€…ç†Ÿæ‚‰åŸºç¡€çš„ä¼˜åŒ–æŠ€å·§ï¼ˆå¦‚å‡å°‘DOMæ“ä½œæˆ–ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼‰ï¼Œä½†ä»æœ‰å¤§é‡é«˜é˜¶ä¼˜åŒ–æ–¹æ³•è¢«å¿½è§†ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨10ä¸ªé²œä¸ºäººçŸ¥ä½†æ•ˆæœæ˜¾è‘—çš„JavaScriptæ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¸®åŠ©ä½ åœ¨å…³é”®åœºæ™¯ä¸­å¤§å¹…æå‡ä»£ç æ•ˆç‡ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. åˆ©ç”¨<code>requestIdleCallback</code>è°ƒåº¦éå…³é”®ä»»åŠ¡</h3>
<p><strong>é—®é¢˜</strong>ï¼šä¸»çº¿ç¨‹é˜»å¡ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ï¼Œè€Œ<code>setTimeout</code>æˆ–<code>setInterval</code>æ— æ³•ç²¾ç¡®æ§åˆ¶æ‰§è¡Œæ—¶æœºã€‚<br/>
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">requestIdleCallback</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ‰§è¡Œä½ä¼˜å…ˆçº§ä»»åŠ¡ï¼ˆå¦‚æ—¥å¿—ä¸ŠæŠ¥ã€é¢„åŠ è½½ï¼‰</span>
}, { <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span> }); <span class="hljs-comment">// è¶…æ—¶ä¿è¯æ‰§è¡Œ</span>
</code></pre>
<ul>
<li><strong>åŸç†</strong>ï¼šæµè§ˆå™¨ç©ºé—²æ—¶è§¦å‘å›è°ƒï¼Œé¿å…æŠ¢å UIæ¸²æŸ“èµ„æºã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®åˆ†æã€éå…³é”®DOMæ›´æ–°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">2. ä½¿ç”¨<code>Web Workers</code>è§£æ”¾ä¸»çº¿ç¨‹</h3>
<p><strong>é—®é¢˜</strong>ï¼šCPUå¯†é›†å‹ä»»åŠ¡ï¼ˆå¦‚åŠ å¯†ã€å›¾åƒå¤„ç†ï¼‰ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚<br/>
<strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-string">'task.js'</span>);
worker.<span class="hljs-title function_">postMessage</span>(data);
worker.<span class="hljs-property">onmessage</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">data</span>);
</code></pre>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼šWorkerå†…æ— æ³•è®¿é—®DOMï¼Œéœ€é€šè¿‡<code>postMessage</code>é€šä¿¡ã€‚</li>
<li><strong>æ€§èƒ½æ”¶ç›Š</strong>ï¼šå®æµ‹å¯å°†æ–æ³¢é‚£å¥‘æ•°åˆ—è®¡ç®—è€—æ—¶ä»120msé™è‡³30msï¼ˆ4æ ¸CPUï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">3. é¿å…éšè—ç±»ç ´åï¼ˆHidden Class Breakdownï¼‰</h3>
<p>V8å¼•æ“é€šè¿‡éšè—ç±»ä¼˜åŒ–å¯¹è±¡å±æ€§è®¿é—®ï¼Œä»¥ä¸‹å†™æ³•ä¼šç ´åä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åŠ¨æ€æ·»åŠ å±æ€§</span>
<span class="hljs-keyword">const</span> obj = {};
obj.<span class="hljs-property">a</span> = <span class="hljs-number">1</span>;
obj.<span class="hljs-property">b</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// éšè—ç±»å˜æ›´</span>

<span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§åˆå§‹åŒ–</span>
<span class="hljs-keyword">const</span> obj = { <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> };
</code></pre>
<ul>
<li><strong>Benchmark</strong>ï¼šè§„èŒƒçš„å±æ€§å®šä¹‰å¯æé€Ÿ20%-50%ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">4. <code>TypedArray</code>å¤„ç†äºŒè¿›åˆ¶æ•°æ®</h3>
<p>ä¼ ç»Ÿæ•°ç»„å­˜å‚¨æ•°å­—æ—¶å­˜åœ¨ç±»å‹è£…ç®±å¼€é”€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æ™®é€šæ•°ç»„</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// JSNumberç±»å‹</span>

<span class="hljs-comment">// âœ… TypedArray</span>
<span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint32Array</span>(<span class="hljs-number">1000</span>); <span class="hljs-comment">// ç›´æ¥å†…å­˜åˆ†é…</span>
</code></pre>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå†…å­˜å ç”¨å‡å°‘70%ï¼Œéå†é€Ÿåº¦æå‡5å€ï¼ˆBenchmark.jsæµ‹è¯•ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">5. <code>debounce</code>ä¸<code>throttle</code>çš„å¾®è§‚ä¼˜åŒ–</h3>
<p>ç»å…¸å®ç°å­˜åœ¨é—­åŒ…å†…å­˜æ³„æ¼é£é™©ï¼Œæ”¹è¿›æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">throttle</span>(<span class="hljs-params">fn, delay</span>) {
  <span class="hljs-keyword">let</span> lastCall = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">if</span> (now - lastCall &gt;= delay) {
      <span class="hljs-title function_">fn</span>(...args);
      lastCall = now;
    }
  };
}
</code></pre>
<ul>
<li><strong>å…³é”®æ”¹è¿›</strong>ï¼šé¿å…é¢‘ç¹åˆ›å»ºé—­åŒ…ï¼ŒGCå‹åŠ›é™ä½90%ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">6. CSSOM APIæ›¿ä»£å¼ºåˆ¶åŒæ­¥å¸ƒå±€ï¼ˆFSLï¼‰</h3>
<p>è¯»å–ä»¥ä¸‹å±æ€§ä¼šè§¦å‘å¼ºåˆ¶å¸ƒå±€è®¡ç®—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ </span>
<span class="hljs-keyword">const</span> width = element.<span class="hljs-property">offsetWidth</span>; <span class="hljs-comment">// FSL!</span>
<span class="hljs-title function_">doSomething</span>(width);

<span class="hljs-comment">// âœ… </span>
<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> width = element.<span class="hljs-property">offsetWidth</span>;
});
</code></pre>
<ul>
<li><strong>åŸç†</strong>ï¼šå°†è¯»æ“ä½œå»¶è¿Ÿåˆ°æµè§ˆå™¨è‡ªç„¶å¸ƒå±€å‘¨æœŸåã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">7. WASMåŠ é€Ÿæç«¯æ€§èƒ½åœºæ™¯</h3>
<p>å¯¹äº3Dæ¸²æŸ“ã€ç‰©ç†å¼•æ“ç­‰åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">WebAssembly</span>.<span class="hljs-title function_">instantiateStreaming</span>(<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'module.wasm'</span>))
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> {
    instance.<span class="hljs-property">exports</span>.<span class="hljs-title function_">compute</span>();
});
</code></pre>
<ul>
<li><strong>æ¡ˆä¾‹</strong>ï¼šæŸå›¾åƒæ»¤æ³¢ç®—æ³•ä»JSçš„200msé™è‡³WASMçš„20msã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9">8. <code>Intersection Observer</code>æ‡’åŠ è½½ä¼˜åŒ–</h3>
<p>æ›¿ä»£æ»šåŠ¨äº‹ä»¶ç›‘å¬çš„é«˜æ•ˆæ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
 entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
   <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
     entry.<span class="hljs-property">target</span>.<span class="hljs-property">src</span> = entry.<span class="hljs-property">target</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">src</span>;
     observer.<span class="hljs-title function_">unobserve</span>(entry.<span class="hljs-property">target</span>);
   }
 });
});
images.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(img));
</code></pre>
<ul>
<li><strong>æ€§èƒ½å¯¹æ¯”</strong>ï¼šæ»šåŠ¨äº‹ä»¶ç›‘å¬å¯¼è‡´1% CPUå ç”¨ï¼Œè€ŒIntersectionObserverä»…0.1%ã€‚</li>
</ul>
<hr/>
<p>###9. <code>Object.freeze()</code>æå‡å¯¹è±¡è®¿é—®é€Ÿåº¦</p>
<p>å†»ç»“ä¸å¯å˜é…ç½®å¯¹è±¡å¯è·³è¿‡V8çš„å˜æ›´æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> config = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">freeze</span>({ <span class="hljs-attr">API_ENDPOINT</span>: <span class="hljs-string">'...'</span> });
<span class="hljs-comment">// V8å¼•æ“ä¼šå¯ç”¨å¿«é€Ÿè·¯å¾„è®¿é—®</span>
</code></pre>
<ul>
<li><strong>å®æµ‹ç»“æœ</strong>ï¼šç™¾ä¸‡æ¬¡è®¿é—®è€—æ—¶ä»380msé™è‡³220msã€‚</li>
</ul>
<hr/>
<p>###10. Service Workerç¼“å­˜ç­–ç•¥è¿›é˜¶</p>
<p>åŠ¨æ€å†…å®¹ç¼“å­˜æ–¹æ¡ˆç¤ºä¾‹ï¼ˆStale-While-Revalidateï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">self.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'fetch'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
 e.<span class="hljs-title function_">respondWith</span>(
   caches.<span class="hljs-title function_">match</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cached</span> =&gt;</span> {
     <span class="hljs-keyword">const</span> fetchPromise = <span class="hljs-title function_">fetch</span>(e.<span class="hljs-property">request</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">networkResponse</span> =&gt;</span> {
       caches.<span class="hljs-title function_">open</span>(<span class="hljs-string">'v1'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">cache</span> =&gt;</span> cache.<span class="hljs-title function_">put</span>(e.<span class="hljs-property">request</span>, networkResponse));
     });
     <span class="hljs-keyword">return</span> cached || fetchPromise;
   })
 );
});
</code></pre>
<ul>
<li><strong>ç½‘ç»œèŠ‚çœ</strong>ï¼šé‡å¤èµ„æºè¯·æ±‚å‡å°‘80%ã€‚</li>
</ul>
<hr/>
<p>###æ€»ç»“</p>
<p>JavaScriptæ€§èƒ½ä¼˜åŒ–éœ€è¦æ·±å…¥ç†è§£è¿è¡Œæ—¶ç‰¹æ€§ä¸æµè§ˆå™¨å·¥ä½œåŸç†ã€‚æœ¬æ–‡ä»‹ç»çš„10ä¸ªæŠ€å·§æ¶µç›–äº†ä»å¾®è§‚ä»£ç ä¹ æƒ¯ï¼ˆå¦‚éšè—ç±»ä¿æŠ¤ï¼‰åˆ°å®è§‚æ¶æ„è®¾è®¡ï¼ˆå¦‚WASMé›†æˆï¼‰çš„å¤šå±‚æ¬¡ä¼˜åŒ–æ‰‹æ®µã€‚çœŸæ­£çš„æ€§èƒ½é£è·ƒå¾€å¾€æ¥è‡ªäºå¯¹è¿™äº›"éšå½¢"ç»†èŠ‚çš„æŠŠæ§ï¼Œè€Œéè¡¨é¢çš„ä»£ç ç¼©å‡ã€‚å»ºè®®é€šè¿‡Chrome DevToolsçš„Performanceé¢æ¿æŒç»­éªŒè¯ä¼˜åŒ–æ•ˆæœï¼Œå½¢æˆæ•°æ®é©±åŠ¨çš„è¿­ä»£é—­ç¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7595808703075303450</link>    <guid>https://juejin.cn/post/7595808703075303450</guid>    <pubDate>2026-01-18T00:25:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595808703075303450" data-draft-id="7595894884957863987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-18T00:25:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-18T00:25:20.000Z" title="Sun Jan 18 2026 00:25:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-18
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨</h2>
<p>å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFPï¼‰å·²ç»å­˜åœ¨å‡ åå¹´äº†ï¼Œä½†è¿‘å¹´æ¥åœ¨å®é™…å¼€å‘ä¸­ç”¨å¾—è¶Šæ¥è¶Šå¤šã€‚è¿™ç¯‡æ–‡ç« æ•´ç†ä¸€ä¸‹ FP çš„æ ¸å¿ƒæ¦‚å¿µå’Œå®é™…åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹</h3>
<p>åœ¨æ·±å…¥ä¼˜åŠ¿å’Œåº”ç”¨ä¹‹å‰ï¼Œå…ˆå¿«é€Ÿå›é¡¾ä¸€ä¸‹å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä»€ä¹ˆã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯æŠŠè®¡ç®—å½“ä½œæ•°å­¦å‡½æ•°çš„æ±‚å€¼ã€‚å®ƒæ˜¯ä¸€ç§å£°æ˜å¼ç¼–ç¨‹é£æ ¼ï¼Œæè¿°çš„æ˜¯"è¦ä»€ä¹ˆ"ï¼Œè€Œä¸æ˜¯"æ€ä¹ˆåš"ã€‚åœ¨ FP ä¸­ï¼Œå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼Œå¯ä»¥ä»å‡½æ•°è¿”å›ï¼Œä¹Ÿå¯ä»¥èµ‹å€¼ç»™å˜é‡ã€‚</p>
<p>FP çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™æ˜¯ä¸å¯å˜æ€§â€”â€”ä¸€æ—¦ç»™å˜é‡èµ‹å€¼ï¼Œå°±ä¸èƒ½å†æ”¹å˜ã€‚è¿™æ¶ˆé™¤äº†å‰¯ä½œç”¨ï¼Œè®©ä»£ç æ›´å¯é¢„æµ‹ã€æ›´å®¹æ˜“è°ƒè¯•ã€‚å¦ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µæ˜¯çº¯å‡½æ•°ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¼šä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Ffunctional-programming-paradigms-2026" target="_blank" title="https://catchadmin.com/post/2026-01/functional-programming-paradigms-2026" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´ PHP å‡½æ•°å¼ç¼–ç¨‹ ä¼˜åŠ¿ä¸å®é™…åº”ç”¨</a></p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆå¼€å‘è€…åº”è¯¥å…³æ³¨å‡½æ•°å¼ç¼–ç¨‹</h3>
<h4 data-id="heading-3">æ›´ç®€æ´ã€æ›´æ˜“ç»´æŠ¤çš„ä»£ç </h4>
<p>å‡½æ•°å¼ç¼–ç¨‹é¼“åŠ±ç¼–å†™æ¨¡å—åŒ–ã€æ˜“äºç†è§£çš„ä»£ç ã€‚å› ä¸ºå‡½æ•°æ˜¯çº¯çš„ï¼ˆä¸ä¿®æ”¹çŠ¶æ€ï¼‰ï¼Œæ„å¤–è¡Œä¸ºçš„ç©ºé—´æ›´å°ï¼Œä»£ç åº“æ›´å¹²å‡€ã€‚è¿™è®©è°ƒè¯•ã€æµ‹è¯•å’Œåç»­ä¿®æ”¹éƒ½æ›´å®¹æ˜“ã€‚</p>
<p>å‡è®¾ä½ åœ¨åšä¸€ä¸ª PHP é¡¹ç›®ã€‚ä½¿ç”¨å‡½æ•°å¼æŠ€æœ¯å¯ä»¥å‡å°‘å‰¯ä½œç”¨ï¼Œç¡®ä¿åº”ç”¨é€»è¾‘è¢«éš”ç¦»æˆæ›´å°çš„ã€å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µã€‚è¿™ä¹Ÿè®©åç»­æ›´æ–°æˆ–é‡æ„æ›´å®¹æ˜“ï¼Œå› ä¸ºå‡½æ•°å¼ä»£ç çš„ä¾èµ–é€šå¸¸æ›´å°‘ã€‚</p>
<h4 data-id="heading-4">å¹¶å‘å’Œå¹¶è¡Œ</h4>
<p>ç°ä»£è½¯ä»¶çš„ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¤„ç†å¹¶å‘å’Œå¹¶è¡Œã€‚éšç€å¤šæ ¸å¤„ç†å™¨å’Œåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ™®åŠï¼Œç¼–å†™èƒ½é«˜æ•ˆå¤„ç†å¤šä»»åŠ¡çš„ä»£ç æ¯”ä»¥å¾€æ›´é‡è¦ã€‚</p>
<p>å‡½æ•°å¼ç¼–ç¨‹åœ¨è¿™æ–¹é¢æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼šå› ä¸ºå‡½æ•°é¿å…ä¿®æ”¹å…±äº«çŠ¶æ€ï¼Œå®ƒä»¬å¤©ç”Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚è¿™è®©ç¼–å†™å¹¶å‘åº”ç”¨æ›´å®¹æ˜“ï¼Œä¸ç”¨æ‹…å¿ƒç«æ€æ¡ä»¶æˆ–æ­»é”ã€‚</p>
<p>æ¯”å¦‚ä¸€ä¸ªéœ€è¦å¤„ç†å¤§æ•°æ®é›†çš„ PHP åº”ç”¨ã€‚ä½¿ç”¨ä¸å¯å˜æ•°æ®ç»“æ„å’Œå¹¶è¡Œå¤„ç†æŠ€æœ¯ï¼Œå¯ä»¥ç¡®ä¿åº”ç”¨çš„ä¸åŒéƒ¨åˆ†å¹¶å‘è¿è¡Œè€Œä¸äº’ç›¸å¹²æ‰°ã€‚</p>
<h4 data-id="heading-5">æ›´å¥½çš„æŠ½è±¡å’Œå¤ç”¨</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹ä¿ƒè¿›é«˜å±‚æŠ½è±¡çš„åˆ›å»ºã€‚å‡½æ•°å¯ä»¥è½»æ¾ç»„åˆã€ä¼ é€’ï¼Œåœ¨åº”ç”¨çš„ä¸åŒéƒ¨åˆ†å¤ç”¨ã€‚</p>
<p>æ¯”å¦‚åœ¨ PHP ä¸­ï¼Œä¸å…¶å†™é‡å¤çš„ä»£ç å¤„ç†æŸäº›æ“ä½œï¼Œä¸å¦‚å†™å°çš„çº¯å‡½æ•°ï¼Œç„¶åçµæ´»åœ°ç»„åˆèµ·æ¥ã€‚è¿™å‡å°‘äº†ä»£ç é‡å¤ï¼Œæ›´å¥½åœ°éµå¾ª DRYï¼ˆDon't Repeat Yourselfï¼‰åŸåˆ™ã€‚</p>
<h4 data-id="heading-6">PHP ä¸­çš„å‡½æ•°å¼å·¥å…·</h4>
<p>PHP ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†å†…ç½®çš„ <code>array_map()</code>ã€<code>array_filter()</code>ã€<code>array_reduce()</code> ç­‰å‡½æ•°æä¾›äº†åŸºæœ¬çš„å‡½æ•°å¼æ“ä½œèƒ½åŠ›ã€‚ç¬¬ä¸‰æ–¹åº“å¦‚ Ramdaã€Lodash ä¹Ÿå¯ä»¥ç”¨ã€‚</p>
<h3 data-id="heading-7">å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒåŸåˆ™</h3>
<p>ä¸‹é¢æ¢è®¨å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€äº›æ ¸å¿ƒåŸåˆ™ï¼Œä»¥åŠå®ƒä»¬åœ¨å®é™…ç¼–ç¨‹ä¸­çš„åº”ç”¨ã€‚</p>
<h4 data-id="heading-8">ä¸å¯å˜æ€§</h4>
<p>åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæ•°æ®æ˜¯ä¸å¯å˜çš„ã€‚ä¸€æ—¦è®¾ç½®äº†å€¼ï¼Œå°±ä¸èƒ½æ”¹å˜ã€‚è¿™ä¸ªæ¦‚å¿µå‡å°‘äº†ä¸å¯å˜çŠ¶æ€å˜åŒ–ç›¸å…³çš„ bugï¼Œç®€åŒ–äº†å¯¹ç¨‹åºè¡Œä¸ºçš„ç†è§£ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addItemToList</span>(<span class="hljs-params"><span class="hljs-variable">$list</span>, <span class="hljs-variable">$item</span></span>) </span>{
    <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªåŒ…å«æ–°å…ƒç´ çš„æ–°åˆ—è¡¨</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_merge</span>(<span class="hljs-variable">$list</span>, [<span class="hljs-variable">$item</span>]);
}

<span class="hljs-variable">$list</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-variable">$newList</span> = <span class="hljs-title function_ invoke__">addItemToList</span>(<span class="hljs-variable">$list</span>, <span class="hljs-number">4</span>);

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$list</span>);     <span class="hljs-comment">// è¾“å‡º: [1, 2, 3]ï¼ˆåŸåˆ—è¡¨ä¸å˜ï¼‰</span>
<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$newList</span>);  <span class="hljs-comment">// è¾“å‡º: [1, 2, 3, 4]ï¼ˆåŒ…å«æ–°å…ƒç´ çš„æ–°åˆ—è¡¨ï¼‰</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŸå§‹çš„ <code>$list</code> ä¿æŒä¸å˜ï¼Œå› ä¸º PHP æ•°ç»„æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚è¿™å±•ç¤ºäº†ä¸å¯å˜æ€§â€”â€”åŸå§‹æ•°æ®ç»“æ„è¢«ä¿ç•™ï¼Œè¿”å›çš„æ˜¯åŒ…å«æ–°å…ƒç´ çš„æ–°ç»“æ„ã€‚</p>
<h4 data-id="heading-9">çº¯å‡½æ•°</h4>
<p>çº¯å‡½æ•°å¯¹äºç›¸åŒçš„è¾“å…¥æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼Œä¸ä¼šäº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ã€‚è¿™è®©çº¯å‡½æ•°å¯é¢„æµ‹ä¸”æ˜“äºæµ‹è¯•ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params"><span class="hljs-variable">$number</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$number</span> * <span class="hljs-variable">$number</span>;
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">square</span>(<span class="hljs-number">4</span>); <span class="hljs-comment">// è¾“å‡º: 16</span>
</code></pre>
<p><code>square()</code> å‡½æ•°æ˜¯çº¯çš„ï¼Œå› ä¸ºå¯¹äºç›¸åŒçš„è¾“å…¥ï¼ˆ4ï¼‰æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„è¾“å‡ºï¼ˆ16ï¼‰ï¼Œè€Œä¸”ä¸ä¿®æ”¹ä»»ä½•å¤–éƒ¨çŠ¶æ€ã€‚</p>
<h4 data-id="heading-10">é«˜é˜¶å‡½æ•°</h4>
<p>é«˜é˜¶å‡½æ•°æ˜¯å¯ä»¥æ¥å—å…¶ä»–å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è¿”å›å‡½æ•°çš„å‡½æ•°ã€‚è¿™å®ç°äº†å¼ºå¤§çš„æŠ½è±¡å’Œä»£ç å¤ç”¨ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">applyFunction</span>(<span class="hljs-params"><span class="hljs-variable">$func</span>, <span class="hljs-variable">$value</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$func</span>(<span class="hljs-variable">$value</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">double</span>(<span class="hljs-params"><span class="hljs-variable">$x</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> * <span class="hljs-number">2</span>;
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">applyFunction</span>(<span class="hljs-string">'double'</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// è¾“å‡º: 10</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>applyFunction()</code> æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºå®ƒæ¥å—å¦ä¸€ä¸ªå‡½æ•°ï¼ˆ<code>double()</code>ï¼‰ä½œä¸ºå‚æ•°å¹¶åº”ç”¨åˆ°ä¸€ä¸ªå€¼ä¸Šã€‚</p>
<h4 data-id="heading-11">å‡½æ•°ç»„åˆ</h4>
<p>å‡½æ•°ç»„åˆæ˜¯æŠŠç®€å•å‡½æ•°ç»„åˆæˆæ›´å¤æ‚å‡½æ•°çš„è¿‡ç¨‹ã€‚è¿™è®©ä½ å¯ä»¥ä»æ›´å°çš„ã€å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤æ‚è¡Œä¸ºã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">add</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> + <span class="hljs-variable">$y</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">multiply</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$x</span> * <span class="hljs-variable">$y</span>;
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addThenMultiply</span>(<span class="hljs-params"><span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>, <span class="hljs-variable">$z</span></span>) </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">multiply</span>(<span class="hljs-title function_ invoke__">add</span>(<span class="hljs-variable">$x</span>, <span class="hljs-variable">$y</span>), <span class="hljs-variable">$z</span>);
}

<span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">addThenMultiply</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>); <span class="hljs-comment">// è¾“å‡º: 20ï¼ˆadd(2, 3) = 5, multiply(5, 4) = 20ï¼‰</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>addThenMultiply()</code> å‡½æ•°å±•ç¤ºäº†å¦‚ä½•æŠŠæ›´å°çš„å‡½æ•°ç»„åˆèµ·æ¥åˆ›å»ºæ–°åŠŸèƒ½ã€‚è¿™é¼“åŠ±ä»£ç å¤ç”¨å’Œæ¨¡å—åŒ–ã€‚</p>
<h3 data-id="heading-12">å‡½æ•°å¼ç¼–ç¨‹çš„å®é™…åº”ç”¨</h3>
<p>å‡½æ•°å¼ç¼–ç¨‹ä¸åªæ˜¯ç†è®ºæ¦‚å¿µâ€”â€”å®ƒæ­£åœ¨å®é™…åº”ç”¨ä¸­ä½¿ç”¨ã€‚ä¸‹é¢çœ‹çœ‹å‡½æ•°å¼ç¼–ç¨‹åœ¨ä¸åŒé¢†åŸŸçš„ä¸€äº›å®é™…ä¾‹å­ã€‚</p>
<h4 data-id="heading-13">æ•°æ®è½¬æ¢å’Œ ETL æµç¨‹</h4>
<p>åœ¨æ•°æ®å¯†é›†å‹åº”ç”¨ä¸­ï¼Œæ¯”å¦‚æ•°æ®è½¬æ¢æˆ– ETLï¼ˆExtract, Transform, Loadï¼‰æµç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹è¡¨ç°å‡ºè‰²ã€‚å®ƒè®©å¼€å‘è€…å¯ä»¥ä¸å¯å˜åœ°æ“ä½œå¤§æ•°æ®é›†ï¼Œä½¿ç”¨é«˜å±‚æŠ½è±¡è¿›è¡Œè½¬æ¢ã€‚</p>
<p>PHP ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$data</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];

<span class="hljs-comment">// ä½¿ç”¨å‡½æ•°å¼æ–¹æ³•å¤„ç†æ•°æ®</span>
<span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">array_map</span>(fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-variable">$x</span> * <span class="hljs-number">2</span>, <span class="hljs-variable">$data</span>);  <span class="hljs-comment">// æ¯ä¸ªå€¼ç¿»å€</span>
<span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">array_filter</span>(<span class="hljs-variable">$result</span>, fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-variable">$x</span> &gt; <span class="hljs-number">5</span>); <span class="hljs-comment">// åªä¿ç•™å¤§äº 5 çš„å€¼</span>

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$result</span>);  <span class="hljs-comment">// è¾“å‡º: [6, 8, 10]</span>
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>array_map()</code> å’Œ <code>array_filter()</code> ä¸å¯å˜åœ°è½¬æ¢å’Œè¿‡æ»¤æ•°æ®é›†ï¼Œè¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„å¸¸è§æ¨¡å¼ã€‚</p>
<h4 data-id="heading-14">åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¹¶å‘</h4>
<p>å‡½æ•°å¼ç¼–ç¨‹å¯¹ä¸å¯å˜æ€§å’Œçº¯å‡½æ•°çš„å¼ºè°ƒï¼Œä½¿å®ƒæˆä¸ºå¹¶å‘å’Œå¹¶è¡Œå¤„ç†ä»»åŠ¡çš„ç†æƒ³é€‰æ‹©ã€‚ä½ å¯ä»¥æ”¾å¿ƒåœ°ç¼–å†™å¹¶å‘åº”ç”¨ï¼Œä¸ç”¨æ‹…å¿ƒç«æ€æ¡ä»¶ã€‚</p>
<p>æ¯”å¦‚ï¼Œåœ¨ PHP ä¸­æ„å»ºä¸€ä¸ªå¹¶å‘å¤„ç†ç”¨æˆ·è¯·æ±‚çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œè€Œä¸ä¼šå¼•å…¥ä¸å¯å˜å…±äº«çŠ¶æ€ç›¸å…³çš„ bugã€‚</p>
<h4 data-id="heading-15">æ„å»º API ç«¯ç‚¹å’Œå¾®æœåŠ¡</h4>
<p>æ„å»ºå¾®æœåŠ¡æˆ– API æ—¶ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¯ä»¥å¸®åŠ©åˆ›å»ºç®€æ´ã€æ˜“ç»´æŠ¤çš„ç«¯ç‚¹ã€‚é€šè¿‡ç¡®ä¿æ¯ä¸ªå‡½æ•°å¤„ç†ç‰¹å®šä»»åŠ¡ä¸”æ˜¯çº¯çš„ã€ç¡®å®šæ€§çš„ï¼Œå¯ä»¥è®©æ¯ä¸ªå¾®æœåŠ¡æ›´å®¹æ˜“æµ‹è¯•å’Œæ‰©å±•ã€‚</p>
<h3 data-id="heading-16">å°ç»“</h3>
<p>å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ˜¯ä¸å¯å˜æ€§ã€çº¯å‡½æ•°å’Œé«˜é˜¶å‡½æ•°ã€‚è¿™äº›æ¦‚å¿µåœ¨å¹¶å‘å¤„ç†ã€æ•°æ®è½¬æ¢ç­‰åœºæ™¯ä¸‹æ¯”è¾ƒå®ç”¨ã€‚PHP è™½ç„¶ä¸æ˜¯çº¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†å†…ç½®å‡½æ•°å’Œç¬¬ä¸‰æ–¹åº“å·²ç»æä¾›äº†è¶³å¤Ÿçš„æ”¯æŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ]]></title>    <link>https://juejin.cn/post/7595893785907265570</link>    <guid>https://juejin.cn/post/7595893785907265570</guid>    <pubDate>2026-01-17T16:13:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595893785907265570" data-draft-id="7595896809652142120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2026-01-17T16:13:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ssshooter"/> <meta itemprop="url" content="https://juejin.cn/user/3122268751795101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vercel React æœ€ä½³å®è·µ ä¸­æ–‡ç‰ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268751795101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ssshooter
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T16:13:44.000Z" title="Sat Jan 17 2026 16:13:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React æœ€ä½³å®è·µ</h2>
<p><strong>ç‰ˆæœ¬ 1.0.0</strong><br/>
Vercel å·¥ç¨‹å›¢é˜Ÿ<br/>
2026å¹´1æœˆ</p>
<blockquote>
<p><strong>æ³¨æ„ï¼š</strong><br/>
æœ¬æ–‡æ¡£ä¸»è¦ä¾› Agent å’Œ LLM åœ¨ Vercel ç»´æŠ¤ã€ç”Ÿæˆæˆ–é‡æ„ React åŠ Next.js ä»£ç åº“æ—¶éµå¾ªã€‚äººç±»å¼€å‘è€…ä¹Ÿä¼šå‘ç°å…¶å¯¹äºä¿æŒä¸€è‡´æ€§å’Œè‡ªåŠ¨åŒ–ä¼˜åŒ–éå¸¸æœ‰å¸®åŠ©ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>è¿™æ˜¯ä¸€ä»½é’ˆå¯¹ React å’Œ Next.js åº”ç”¨ç¨‹åºçš„ç»¼åˆæ€§èƒ½ä¼˜åŒ–æŒ‡å—ï¼Œä¸“ä¸º AI Agent å’Œ LLM è®¾è®¡ã€‚åŒ…å« 8 ä¸ªç±»åˆ«çš„ 40 å¤šæ¡è§„åˆ™ï¼ŒæŒ‰å½±å“åŠ›ä»å…³é”®ï¼ˆæ¶ˆé™¤ç€‘å¸ƒæµã€å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼‰åˆ°å¢é‡ï¼ˆé«˜çº§æ¨¡å¼ï¼‰æ’åºã€‚æ¯æ¡è§„åˆ™éƒ½åŒ…å«è¯¦ç»†çš„è§£é‡Šã€é”™è¯¯ä¸æ­£ç¡®å®ç°çš„çœŸå®ä»£ç å¯¹æ¯”ï¼Œä»¥åŠå…·ä½“çš„å½±å“æŒ‡æ ‡ï¼Œä»¥æŒ‡å¯¼è‡ªåŠ¨é‡æ„å’Œä»£ç ç”Ÿæˆã€‚</p>
<hr/>
<h3 data-id="heading-2">ç›®å½•</h3>
<ol>
<li><a href="#1-%E6%B6%88%E9%99%A4%E7%80%91%E5%B8%83%E6%B5%81" title="#1-%E6%B6%88%E9%99%A4%E7%80%91%E5%B8%83%E6%B5%81">æ¶ˆé™¤ç€‘å¸ƒæµ</a> â€” <strong>å…³é”®</strong>
<ul>
<li>1.1 <a href="#11-%E6%8E%A8%E8%BF%9F-await-%E7%9B%B4%E5%88%B0%E9%9C%80%E8%A6%81%E6%97%B6" title="#11-%E6%8E%A8%E8%BF%9F-await-%E7%9B%B4%E5%88%B0%E9%9C%80%E8%A6%81%E6%97%B6">æ¨è¿Ÿ Await ç›´åˆ°éœ€è¦æ—¶</a></li>
<li>1.2 <a href="#12-%E5%9F%BA%E4%BA%8E%E4%BE%9D%E8%B5%96%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96" title="#12-%E5%9F%BA%E4%BA%8E%E4%BE%9D%E8%B5%96%E7%9A%84%E5%B9%B6%E8%A1%8C%E5%8C%96">åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–</a></li>
<li>1.3 <a href="#13-%E9%98%B2%E6%AD%A2-api-%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%80%91%E5%B8%83%E9%93%BE" title="#13-%E9%98%B2%E6%AD%A2-api-%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%80%91%E5%B8%83%E9%93%BE">é˜²æ­¢ API è·¯ç”±ä¸­çš„ç€‘å¸ƒé“¾</a></li>
<li>1.4 <a href="#14-%E5%AF%B9%E7%8B%AC%E7%AB%8B%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8-promiseall" title="#14-%E5%AF%B9%E7%8B%AC%E7%AB%8B%E6%93%8D%E4%BD%9C%E4%BD%BF%E7%94%A8-promiseall">å¯¹ç‹¬ç«‹æ“ä½œä½¿ç”¨ Promise.all()</a></li>
<li>1.5 <a href="#15-%E7%AD%96%E7%95%A5%E6%80%A7-suspense-%E8%BE%B9%E7%95%8C" title="#15-%E7%AD%96%E7%95%A5%E6%80%A7-suspense-%E8%BE%B9%E7%95%8C">ç­–ç•¥æ€§ Suspense è¾¹ç•Œ</a></li>
</ul>
</li>
<li><a href="#2-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96" title="#2-%E6%89%93%E5%8C%85%E4%BD%93%E7%A7%AF%E4%BC%98%E5%8C%96">æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</a> â€” <strong>å…³é”®</strong>
<ul>
<li>2.1 <a href="#21-%E9%81%BF%E5%85%8D-barrel-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5" title="#21-%E9%81%BF%E5%85%8D-barrel-%E6%96%87%E4%BB%B6%E5%AF%BC%E5%85%A5">é¿å… Barrel æ–‡ä»¶å¯¼å…¥</a></li>
<li>2.2 <a href="#22-%E6%9D%A1%E4%BB%B6%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD" title="#22-%E6%9D%A1%E4%BB%B6%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD">æ¡ä»¶æ¨¡å—åŠ è½½</a></li>
<li>2.3 <a href="#23-%E6%8E%A8%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93" title="#23-%E6%8E%A8%E8%BF%9F%E9%9D%9E%E5%85%B3%E9%94%AE%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93">æ¨è¿Ÿéå…³é”®ç¬¬ä¸‰æ–¹åº“</a></li>
<li>2.4 <a href="#24-%E9%87%8D%E5%9E%8B%E7%BB%84%E4%BB%B6%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5" title="#24-%E9%87%8D%E5%9E%8B%E7%BB%84%E4%BB%B6%E5%8A%A8%E6%80%81%E5%AF%BC%E5%85%A5">é‡å‹ç»„ä»¶åŠ¨æ€å¯¼å…¥</a></li>
<li>2.5 <a href="#25-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E6%84%8F%E5%9B%BE%E9%A2%84%E5%8A%A0%E8%BD%BD" title="#25-%E5%9F%BA%E4%BA%8E%E7%94%A8%E6%88%B7%E6%84%8F%E5%9B%BE%E9%A2%84%E5%8A%A0%E8%BD%BD">åŸºäºç”¨æˆ·æ„å›¾é¢„åŠ è½½</a></li>
</ul>
</li>
<li><a href="#3-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%80%A7%E8%83%BD" title="#3-%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%80%A7%E8%83%BD">æœåŠ¡ç«¯æ€§èƒ½</a> â€” <strong>é«˜</strong>
<ul>
<li>3.1 <a href="#31-%E8%B7%A8%E8%AF%B7%E6%B1%82-lru-%E7%BC%93%E5%AD%98" title="#31-%E8%B7%A8%E8%AF%B7%E6%B1%82-lru-%E7%BC%93%E5%AD%98">è·¨è¯·æ±‚ LRU ç¼“å­˜</a></li>
<li>3.2 <a href="#32-%E6%9C%80%E5%B0%8F%E5%8C%96-rsc-%E8%BE%B9%E7%95%8C%E5%BA%8F%E5%88%97%E5%8C%96" title="#32-%E6%9C%80%E5%B0%8F%E5%8C%96-rsc-%E8%BE%B9%E7%95%8C%E5%BA%8F%E5%88%97%E5%8C%96">æœ€å°åŒ– RSC è¾¹ç•Œåºåˆ—åŒ–</a></li>
<li>3.3 <a href="#33-%E9%80%9A%E8%BF%87%E7%BB%84%E4%BB%B6%E7%BB%84%E5%90%88%E5%B9%B6%E8%A1%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE" title="#33-%E9%80%9A%E8%BF%87%E7%BB%84%E4%BB%B6%E7%BB%84%E5%90%88%E5%B9%B6%E8%A1%8C%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE">é€šè¿‡ç»„ä»¶ç»„åˆå¹¶è¡Œè·å–æ•°æ®</a></li>
<li>3.4 <a href="#34-%E4%BD%BF%E7%94%A8-reactcache-%E8%BF%9B%E8%A1%8C%E6%8C%89%E8%AF%B7%E6%B1%82%E5%8E%BB%E9%87%8D" title="#34-%E4%BD%BF%E7%94%A8-reactcache-%E8%BF%9B%E8%A1%8C%E6%8C%89%E8%AF%B7%E6%B1%82%E5%8E%BB%E9%87%8D">ä½¿ç”¨ React.cache() è¿›è¡ŒæŒ‰è¯·æ±‚å»é‡</a></li>
<li>3.5 <a href="#35-%E4%BD%BF%E7%94%A8-after-%E5%A4%84%E7%90%86%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%93%8D%E4%BD%9C" title="#35-%E4%BD%BF%E7%94%A8-after-%E5%A4%84%E7%90%86%E9%9D%9E%E9%98%BB%E5%A1%9E%E6%93%8D%E4%BD%9C">ä½¿ç”¨ after() å¤„ç†éé˜»å¡æ“ä½œ</a></li>
</ul>
</li>
<li><a href="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96" title="#4-%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96">å®¢æˆ·ç«¯æ•°æ®è·å–</a> â€” <strong>ä¸­é«˜</strong>
<ul>
<li>4.1 <a href="#41-%E5%8E%BB%E9%87%8D%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8" title="#41-%E5%8E%BB%E9%87%8D%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E5%99%A8">å»é‡å…¨å±€äº‹ä»¶ç›‘å¬å™¨</a></li>
<li>4.2 <a href="#42-%E4%BD%BF%E7%94%A8-swr-%E8%87%AA%E5%8A%A8%E5%8E%BB%E9%87%8D" title="#42-%E4%BD%BF%E7%94%A8-swr-%E8%87%AA%E5%8A%A8%E5%8E%BB%E9%87%8D">ä½¿ç”¨ SWR è‡ªåŠ¨å»é‡</a></li>
</ul>
</li>
<li><a href="#5-%E9%87%8D%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96" title="#5-%E9%87%8D%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96">é‡æ¸²æŸ“ä¼˜åŒ–</a> â€” <strong>ä¸­</strong>
<ul>
<li>5.1 <a href="#51-%E6%8E%A8%E8%BF%9F%E7%8A%B6%E6%80%81%E8%AF%BB%E5%8F%96%E5%88%B0%E4%BD%BF%E7%94%A8%E7%82%B9" title="#51-%E6%8E%A8%E8%BF%9F%E7%8A%B6%E6%80%81%E8%AF%BB%E5%8F%96%E5%88%B0%E4%BD%BF%E7%94%A8%E7%82%B9">æ¨è¿ŸçŠ¶æ€è¯»å–åˆ°ä½¿ç”¨ç‚¹</a></li>
<li>5.2 <a href="#52-%E6%8F%90%E5%8F%96%E4%B8%BA%E8%AE%B0%E5%BF%86%E5%8C%96%E7%BB%84%E4%BB%B6" title="#52-%E6%8F%90%E5%8F%96%E4%B8%BA%E8%AE%B0%E5%BF%86%E5%8C%96%E7%BB%84%E4%BB%B6">æå–ä¸ºè®°å¿†åŒ–ç»„ä»¶</a></li>
<li>5.3 <a href="#53-%E7%BC%A9%E5%B0%8F-effect-%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4" title="#53-%E7%BC%A9%E5%B0%8F-effect-%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4">ç¼©å° Effect ä¾èµ–èŒƒå›´</a></li>
<li>5.4 <a href="#54-%E8%AE%A2%E9%98%85%E6%B4%BE%E7%94%9F%E7%8A%B6%E6%80%81" title="#54-%E8%AE%A2%E9%98%85%E6%B4%BE%E7%94%9F%E7%8A%B6%E6%80%81">è®¢é˜…æ´¾ç”ŸçŠ¶æ€</a></li>
<li>5.5 <a href="#55-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F-setstate-%E6%9B%B4%E6%96%B0" title="#55-%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%BC%8F-setstate-%E6%9B%B4%E6%96%B0">ä½¿ç”¨å‡½æ•°å¼ setState æ›´æ–°</a></li>
<li>5.6 <a href="#56-%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E7%8A%B6%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96" title="#56-%E4%BD%BF%E7%94%A8%E6%83%B0%E6%80%A7%E7%8A%B6%E6%80%81%E5%88%9D%E5%A7%8B%E5%8C%96">ä½¿ç”¨æƒ°æ€§çŠ¶æ€åˆå§‹åŒ–</a></li>
<li>5.7 <a href="#57-%E5%AF%B9%E9%9D%9E%E7%B4%A7%E6%80%A5%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%94%A8-transitions" title="#57-%E5%AF%B9%E9%9D%9E%E7%B4%A7%E6%80%A5%E6%9B%B4%E6%96%B0%E4%BD%BF%E7%94%A8-transitions">å¯¹éç´§æ€¥æ›´æ–°ä½¿ç”¨ Transitions</a></li>
</ul>
</li>
<li><a href="#6-%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD" title="#6-%E6%B8%B2%E6%9F%93%E6%80%A7%E8%83%BD">æ¸²æŸ“æ€§èƒ½</a> â€” <strong>ä¸­</strong>
<ul>
<li>6.1 <a href="#61-%E5%8A%A8%E7%94%BB%E5%8C%96-svg-%E5%8C%85%E8%A3%85%E5%99%A8%E8%80%8C%E9%9D%9E-svg-%E5%85%83%E7%B4%A0" title="#61-%E5%8A%A8%E7%94%BB%E5%8C%96-svg-%E5%8C%85%E8%A3%85%E5%99%A8%E8%80%8C%E9%9D%9E-svg-%E5%85%83%E7%B4%A0">åŠ¨ç”»åŒ– SVG åŒ…è£…å™¨è€Œé SVG å…ƒç´ </a></li>
<li>6.2 <a href="#62-%E9%95%BF%E5%88%97%E8%A1%A8%E4%BD%BF%E7%94%A8-css-content-visibility" title="#62-%E9%95%BF%E5%88%97%E8%A1%A8%E4%BD%BF%E7%94%A8-css-content-visibility">é•¿åˆ—è¡¨ä½¿ç”¨ CSS content-visibility</a></li>
<li>6.3 <a href="#63-%E6%8F%90%E5%8D%87%E9%9D%99%E6%80%81-jsx-%E5%85%83%E7%B4%A0" title="#63-%E6%8F%90%E5%8D%87%E9%9D%99%E6%80%81-jsx-%E5%85%83%E7%B4%A0">æå‡é™æ€ JSX å…ƒç´ </a></li>
<li>6.4 <a href="#64-%E4%BC%98%E5%8C%96-svg-%E7%B2%BE%E5%BA%A6" title="#64-%E4%BC%98%E5%8C%96-svg-%E7%B2%BE%E5%BA%A6">ä¼˜åŒ– SVG ç²¾åº¦</a></li>
<li>6.5 <a href="#65-%E6%97%A0%E9%97%AA%E7%83%81%E9%98%B2%E6%AD%A2%E6%B0%B4%E5%90%88%E4%B8%8D%E5%8C%B9%E9%85%8D" title="#65-%E6%97%A0%E9%97%AA%E7%83%81%E9%98%B2%E6%AD%A2%E6%B0%B4%E5%90%88%E4%B8%8D%E5%8C%B9%E9%85%8D">æ— é—ªçƒé˜²æ­¢æ°´åˆä¸åŒ¹é…</a></li>
<li>6.6 <a href="#66-%E4%BD%BF%E7%94%A8-activity-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F" title="#66-%E4%BD%BF%E7%94%A8-activity-%E7%BB%84%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%98%BE%E7%A4%BA%E9%9A%90%E8%97%8F">ä½¿ç”¨ Activity ç»„ä»¶è¿›è¡Œæ˜¾ç¤º/éšè—</a></li>
<li>6.7 <a href="#67-%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8F%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93" title="#67-%E4%BD%BF%E7%94%A8%E6%98%BE%E5%BC%8F%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93">ä½¿ç”¨æ˜¾å¼æ¡ä»¶æ¸²æŸ“</a></li>
</ul>
</li>
<li><a href="#7-javascript-%E6%80%A7%E8%83%BD" title="#7-javascript-%E6%80%A7%E8%83%BD">JavaScript æ€§èƒ½</a> â€” <strong>ä¸­ä½</strong>
<ul>
<li>7.1 <a href="#71-%E6%89%B9%E9%87%8F-dom-css-%E6%9B%B4%E6%94%B9" title="#71-%E6%89%B9%E9%87%8F-dom-css-%E6%9B%B4%E6%94%B9">æ‰¹é‡ DOM CSS æ›´æ”¹</a></li>
<li>7.2 <a href="#72-%E4%B8%BA%E9%87%8D%E5%A4%8D%E6%9F%A5%E6%89%BE%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95-map" title="#72-%E4%B8%BA%E9%87%8D%E5%A4%8D%E6%9F%A5%E6%89%BE%E6%9E%84%E5%BB%BA%E7%B4%A2%E5%BC%95-map">ä¸ºé‡å¤æŸ¥æ‰¾æ„å»ºç´¢å¼• Map</a></li>
<li>7.3 <a href="#73-%E5%9C%A8%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%BC%93%E5%AD%98%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE" title="#73-%E5%9C%A8%E5%BE%AA%E7%8E%AF%E4%B8%AD%E7%BC%93%E5%AD%98%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE">åœ¨å¾ªç¯ä¸­ç¼“å­˜å±æ€§è®¿é—®</a></li>
<li>7.4 <a href="#74-%E7%BC%93%E5%AD%98%E9%87%8D%E5%A4%8D%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8" title="#74-%E7%BC%93%E5%AD%98%E9%87%8D%E5%A4%8D%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8">ç¼“å­˜é‡å¤å‡½æ•°è°ƒç”¨</a></li>
<li>7.5 <a href="#75-%E7%BC%93%E5%AD%98-storage-api-%E8%B0%83%E7%94%A8" title="#75-%E7%BC%93%E5%AD%98-storage-api-%E8%B0%83%E7%94%A8">ç¼“å­˜ Storage API è°ƒç”¨</a></li>
<li>7.6 <a href="#76-%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3" title="#76-%E5%90%88%E5%B9%B6%E5%A4%9A%E4%B8%AA%E6%95%B0%E7%BB%84%E8%BF%AD%E4%BB%A3">åˆå¹¶å¤šä¸ªæ•°ç»„è¿­ä»£</a></li>
<li>7.7 <a href="#77-%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%89%8D%E5%85%88%E6%A3%80%E6%9F%A5%E9%95%BF%E5%BA%A6" title="#77-%E6%95%B0%E7%BB%84%E6%AF%94%E8%BE%83%E5%89%8D%E5%85%88%E6%A3%80%E6%9F%A5%E9%95%BF%E5%BA%A6">æ•°ç»„æ¯”è¾ƒå‰å…ˆæ£€æŸ¥é•¿åº¦</a></li>
<li>7.8 <a href="#78-%E5%87%BD%E6%95%B0%E6%8F%90%E5%89%8D%E8%BF%94%E5%9B%9E" title="#78-%E5%87%BD%E6%95%B0%E6%8F%90%E5%89%8D%E8%BF%94%E5%9B%9E">å‡½æ•°æå‰è¿”å›</a></li>
<li>7.9 <a href="#79-%E6%8F%90%E5%8D%87-regexp-%E5%88%9B%E5%BB%BA" title="#79-%E6%8F%90%E5%8D%87-regexp-%E5%88%9B%E5%BB%BA">æå‡ RegExp åˆ›å»º</a></li>
<li>7.10 <a href="#710-%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%B1%82%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC%E8%80%8C%E9%9D%9E%E6%8E%92%E5%BA%8F" title="#710-%E4%BD%BF%E7%94%A8%E5%BE%AA%E7%8E%AF%E6%B1%82%E6%9C%80%E5%B0%8F%E6%9C%80%E5%A4%A7%E5%80%BC%E8%80%8C%E9%9D%9E%E6%8E%92%E5%BA%8F">ä½¿ç”¨å¾ªç¯æ±‚æœ€å°/æœ€å¤§å€¼è€Œéæ’åº</a></li>
<li>7.11 <a href="#711-%E4%BD%BF%E7%94%A8-setmap-%E8%BF%9B%E8%A1%8C-o1-%E6%9F%A5%E6%89%BE" title="#711-%E4%BD%BF%E7%94%A8-setmap-%E8%BF%9B%E8%A1%8C-o1-%E6%9F%A5%E6%89%BE">ä½¿ç”¨ Set/Map è¿›è¡Œ O(1) æŸ¥æ‰¾</a></li>
<li>7.12 <a href="#712-%E4%BD%BF%E7%94%A8-tosorted-%E4%BB%A3%E6%9B%BF-sort-%E4%BB%A5%E4%BF%9D%E8%AF%81%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7" title="#712-%E4%BD%BF%E7%94%A8-tosorted-%E4%BB%A3%E6%9B%BF-sort-%E4%BB%A5%E4%BF%9D%E8%AF%81%E4%B8%8D%E5%8F%AF%E5%8F%98%E6%80%A7">ä½¿ç”¨ toSorted() ä»£æ›¿ sort() ä»¥ä¿è¯ä¸å¯å˜æ€§</a></li>
</ul>
</li>
<li><a href="#8-%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F" title="#8-%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%BC%8F">é«˜çº§æ¨¡å¼</a> â€” <strong>ä½</strong>
<ul>
<li>8.1 <a href="#81-%E5%9C%A8-refs-%E4%B8%AD%E5%AD%98%E5%82%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F" title="#81-%E5%9C%A8-refs-%E4%B8%AD%E5%AD%98%E5%82%A8%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F">åœ¨ Refs ä¸­å­˜å‚¨äº‹ä»¶å¤„ç†ç¨‹åº</a></li>
<li>8.2 <a href="#82-%E4%BD%BF%E7%94%A8-uselatest-%E8%8E%B7%E5%8F%96%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%9B%9E%E8%B0%83-refs" title="#82-%E4%BD%BF%E7%94%A8-uselatest-%E8%8E%B7%E5%8F%96%E7%A8%B3%E5%AE%9A%E7%9A%84%E5%9B%9E%E8%B0%83-refs">ä½¿ç”¨ useLatest è·å–ç¨³å®šçš„å›è°ƒ Refs</a></li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-3">1. æ¶ˆé™¤ç€‘å¸ƒæµ</h3>
<p><strong>å½±å“åŠ›: å…³é”®</strong></p>
<p>ç€‘å¸ƒæµï¼ˆWaterfallsï¼‰æ˜¯å¤´å·æ€§èƒ½æ€æ‰‹ã€‚æ¯ä¸€ä¸ªè¿ç»­çš„ <code>await</code> éƒ½ä¼šå¢åŠ å®Œæ•´çš„ç½‘ç»œå»¶è¿Ÿã€‚æ¶ˆé™¤å®ƒä»¬èƒ½å¸¦æ¥æœ€å¤§çš„æ”¶ç›Šã€‚</p>
<h4 data-id="heading-4">1.1 æ¨è¿Ÿ Await ç›´åˆ°éœ€è¦æ—¶</h4>
<p><strong>å½±å“åŠ›: é«˜ (é¿å…é˜»å¡ä¸ä½¿ç”¨çš„ä»£ç è·¯å¾„)</strong></p>
<p>å°† <code>await</code> æ“ä½œç§»åŠ¨åˆ°å®é™…ä½¿ç”¨å®ƒä»¬çš„åˆ†æ”¯ä¸­ï¼Œä»¥é¿å…é˜»å¡ä¸éœ€è¦å®ƒä»¬çš„ä»£ç è·¯å¾„ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡äº†ä¸¤ä¸ªåˆ†æ”¯</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
  <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)
  
  <span class="hljs-keyword">if</span> (skipProcessing) {
    <span class="hljs-comment">// ç«‹å³è¿”å›ï¼Œä½†ä»ç„¶ç­‰å¾…äº† userData</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
  }
  
  <span class="hljs-comment">// åªæœ‰è¿™ä¸ªåˆ†æ”¯ä½¿ç”¨äº† userData</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨éœ€è¦æ—¶é˜»å¡</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">userId: <span class="hljs-built_in">string</span>, skipProcessing: <span class="hljs-built_in">boolean</span></span>) {
  <span class="hljs-keyword">if</span> (skipProcessing) {
    <span class="hljs-comment">// ä¸ç­‰å¾…ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">skipped</span>: <span class="hljs-literal">true</span> }
  }
  
  <span class="hljs-comment">// ä»…åœ¨éœ€è¦æ—¶è·å–</span>
  <span class="hljs-keyword">const</span> userData = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserData</span>(userId)
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">processUserData</span>(userData)
}
</code></pre>
<p><strong>å¦ä¸€ä¸ªä¾‹å­ï¼šæå‰è¿”å›ä¼˜åŒ–</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é”™è¯¯ï¼šæ€»æ˜¯è·å–æƒé™</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateResource</span>(<span class="hljs-params">resourceId: <span class="hljs-built_in">string</span>, userId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> permissions = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPermissions</span>(userId)
  <span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getResource</span>(resourceId)
  
  <span class="hljs-keyword">if</span> (!resource) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Not found'</span> }
  }
  
  <span class="hljs-keyword">if</span> (!permissions.<span class="hljs-property">canEdit</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Forbidden'</span> }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateResourceData</span>(resource, permissions)
}

<span class="hljs-comment">// æ­£ç¡®ï¼šä»…åœ¨éœ€è¦æ—¶è·å–</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateResource</span>(<span class="hljs-params">resourceId: <span class="hljs-built_in">string</span>, userId: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> resource = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getResource</span>(resourceId)
  
  <span class="hljs-keyword">if</span> (!resource) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Not found'</span> }
  }
  
  <span class="hljs-keyword">const</span> permissions = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPermissions</span>(userId)
  
  <span class="hljs-keyword">if</span> (!permissions.<span class="hljs-property">canEdit</span>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">error</span>: <span class="hljs-string">'Forbidden'</span> }
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateResourceData</span>(resource, permissions)
}
</code></pre>
<p>å½“è¢«è·³è¿‡çš„åˆ†æ”¯ç»å¸¸è¢«æ‰§è¡Œï¼Œæˆ–è€…è¢«æ¨è¿Ÿçš„æ“ä½œéå¸¸æ˜‚è´µæ—¶ï¼Œè¿™ç§ä¼˜åŒ–é€šè¿‡å°¤ä¸ºæœ‰ä»·å€¼ã€‚</p>
<h4 data-id="heading-5">1.2 åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>å¯¹äºå…·æœ‰éƒ¨åˆ†ä¾èµ–å…³ç³»çš„æ“ä½œï¼Œä½¿ç”¨ <code>better-all</code> æ¥å³æœ€å¤§åŒ–å¹¶è¡Œæ€§ã€‚å®ƒä¼šåœ¨å°½å¯èƒ½æ—©çš„æ—¶åˆ»å¯åŠ¨æ¯ä¸ªä»»åŠ¡ã€‚</p>
<p><strong>é”™è¯¯ï¼šprofile ä¸å¿…è¦åœ°ç­‰å¾… config</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> [user, config] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetchUser</span>(),
  <span class="hljs-title function_">fetchConfig</span>()
])
<span class="hljs-keyword">const</span> profile = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProfile</span>(user.<span class="hljs-property">id</span>)
</code></pre>
<p><strong>æ­£ç¡®ï¼šconfig å’Œ profile å¹¶è¡Œè¿è¡Œ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { all } <span class="hljs-keyword">from</span> <span class="hljs-string">'better-all'</span>

<span class="hljs-keyword">const</span> { user, config, profile } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">all</span>({
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">user</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchUser</span>() },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">config</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchConfig</span>() },
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">profile</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetchProfile</span>((<span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">$</span>.<span class="hljs-property">user</span>).<span class="hljs-property">id</span>)
  }
})
</code></pre>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuding%2Fbetter-all" target="_blank" title="https://github.com/shuding/better-all" ref="nofollow noopener noreferrer">github.com/shuding/betâ€¦</a></p>
<h4 data-id="heading-6">1.3 é˜²æ­¢ API è·¯ç”±ä¸­çš„ç€‘å¸ƒé“¾</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>åœ¨ API è·¯ç”±å’Œ Server Actions ä¸­ï¼Œå³ä½¿æ­¤æ—¶è¿˜ä¸ <code>await</code> å®ƒä»¬ï¼Œä¹Ÿè¦ç«‹å³å¯åŠ¨ç‹¬ç«‹çš„æ“ä½œã€‚</p>
<p><strong>é”™è¯¯ï¼šconfig ç­‰å¾… authï¼Œdata ç­‰å¾…ä¸¤è€…</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchConfig</span>()
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šauth å’Œ config ç«‹å³å¯åŠ¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">GET</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-keyword">const</span> sessionPromise = <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">const</span> configPromise = <span class="hljs-title function_">fetchConfig</span>()
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> sessionPromise
  <span class="hljs-keyword">const</span> [config, data] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    configPromise,
    <span class="hljs-title function_">fetchData</span>(session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span>)
  ])
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Response</span>.<span class="hljs-title function_">json</span>({ data, config })
}
</code></pre>
<p>å¯¹äºå…·æœ‰æ›´å¤æ‚ä¾èµ–é“¾çš„æ“ä½œï¼Œä½¿ç”¨ <code>better-all</code> è‡ªåŠ¨æœ€å¤§åŒ–å¹¶è¡Œæ€§ï¼ˆå‚è§"åŸºäºä¾èµ–çš„å¹¶è¡ŒåŒ–"ï¼‰ã€‚</p>
<h4 data-id="heading-7">1.4 å¯¹ç‹¬ç«‹æ“ä½œä½¿ç”¨ Promise.all()</h4>
<p><strong>å½±å“åŠ›: å…³é”® (2-10å€ æå‡)</strong></p>
<p>å½“å¼‚æ­¥æ“ä½œæ²¡æœ‰ç›¸äº’ä¾èµ–å…³ç³»æ—¶ï¼Œä½¿ç”¨ <code>Promise.all()</code> å¹¶å‘æ‰§è¡Œå®ƒä»¬ã€‚</p>
<p><strong>é”™è¯¯ï¼šé¡ºåºæ‰§è¡Œï¼Œ3 æ¬¡å¾€è¿”</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()
<span class="hljs-keyword">const</span> posts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchPosts</span>()
<span class="hljs-keyword">const</span> comments = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchComments</span>()
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¹¶è¡Œæ‰§è¡Œï¼Œ1 æ¬¡å¾€è¿”</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> [user, posts, comments] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
  <span class="hljs-title function_">fetchUser</span>(),
  <span class="hljs-title function_">fetchPosts</span>(),
  <span class="hljs-title function_">fetchComments</span>()
])
</code></pre>
<h4 data-id="heading-8">1.5 ç­–ç•¥æ€§ Suspense è¾¹ç•Œ</h4>
<p><strong>å½±å“åŠ›: é«˜ (æ›´å¿«çš„é¦–æ¬¡ç»˜åˆ¶)</strong></p>
<p>ä¸è¦åœ¨å¼‚æ­¥ç»„ä»¶ä¸­ç­‰å¾…æ•°æ®åå†è¿”å› JSXï¼Œè€Œæ˜¯ä½¿ç”¨ Suspense è¾¹ç•Œåœ¨æ•°æ®åŠ è½½æ—¶æ›´å¿«åœ°æ˜¾ç¤ºåŒ…è£…å™¨ UIã€‚</p>
<p><strong>é”™è¯¯ï¼šåŒ…è£…å™¨è¢«æ•°æ®è·å–é˜»å¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>() <span class="hljs-comment">// é˜»å¡æ•´ä¸ªé¡µé¢</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å³ä¾¿åªæœ‰ä¸­é—´éƒ¨åˆ†éœ€è¦æ•°æ®ï¼Œæ•´ä¸ªå¸ƒå±€ä¹Ÿä¼šç­‰å¾…æ•°æ®ã€‚</p>
<p><strong>æ­£ç¡®ï¼šåŒ…è£…å™¨ç«‹å³æ˜¾ç¤ºï¼Œæ•°æ®æµå¼ä¼ è¾“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>() <span class="hljs-comment">// ä»…é˜»å¡æ­¤ç»„ä»¶</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>Sidebarã€Header å’Œ Footer ç«‹å³æ¸²æŸ“ã€‚åªæœ‰ DataDisplay ç­‰å¾…æ•°æ®ã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šåœ¨ç»„ä»¶é—´å…±äº« promise</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç«‹å³å¼€å§‹è·å–ï¼Œä½†ä¸è¦ await</span>
  <span class="hljs-keyword">const</span> dataPromise = <span class="hljs-title function_">fetchData</span>()
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Sidebar<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">Skeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">DataDisplay</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">DataSummary</span> <span class="hljs-attr">dataPromise</span>=<span class="hljs-string">{dataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Footer<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataDisplay</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise) <span class="hljs-comment">// è§£åŒ… promise</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DataSummary</span>(<span class="hljs-params">{ dataPromise }: { dataPromise: <span class="hljs-built_in">Promise</span>&lt;Data&gt; }</span>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-title function_">use</span>(dataPromise) <span class="hljs-comment">// å¤ç”¨åŒä¸€ä¸ª promise</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.summary}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>ä¸¤ä¸ªç»„ä»¶å…±äº«åŒä¸€ä¸ª promiseï¼Œå› æ­¤åªä¼šè¿›è¡Œä¸€æ¬¡è·å–ã€‚å¸ƒå±€ç«‹å³æ¸²æŸ“ï¼Œè€Œä¸¤ä¸ªç»„ä»¶ä¸€èµ·ç­‰å¾…ã€‚</p>
<p><strong>ä½•æ—¶ä¸ä½¿ç”¨æ­¤æ¨¡å¼ï¼š</strong></p>
<ul>
<li>
<p>å¸ƒå±€å†³ç­–æ‰€éœ€çš„å…³é”®æ•°æ®ï¼ˆå½±å“å®šä½ï¼‰</p>
</li>
<li>
<p>é¦–å±ï¼ˆAbove the foldï¼‰çš„ SEO å…³é”®å†…å®¹</p>
</li>
<li>
<p>Suspense å¼€é”€ä¸å€¼å¾—çš„å°å‹å¿«é€ŸæŸ¥è¯¢</p>
</li>
<li>
<p>å½“ä½ æƒ³è¦é¿å…å¸ƒå±€åç§»ï¼ˆåŠ è½½ä¸­ â†’ å†…å®¹è·³åŠ¨ï¼‰æ—¶</p>
</li>
</ul>
<p><strong>æƒè¡¡ï¼š</strong> æ›´å¿«çš„é¦–æ¬¡ç»˜åˆ¶ vs æ½œåœ¨çš„å¸ƒå±€åç§»ã€‚æ ¹æ®ä½ çš„ UX ä¼˜å…ˆçº§è¿›è¡Œé€‰æ‹©ã€‚</p>
<hr/>
<h3 data-id="heading-9">2. æ‰“åŒ…ä½“ç§¯ä¼˜åŒ–</h3>
<p><strong>å½±å“åŠ›: å…³é”®</strong></p>
<p>å‡å°‘åˆå§‹æ‰“åŒ…ä½“ç§¯å¯ä»¥æ”¹å–„å¯äº¤äº’æ—¶é—´ (TTI) å’Œæœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)ã€‚</p>
<h4 data-id="heading-10">2.1 é¿å… Barrel æ–‡ä»¶å¯¼å…¥</h4>
<p><strong>å½±å“åŠ›: å…³é”® (200-800ms å¯¼å…¥æˆæœ¬, ç¼“æ…¢çš„æ„å»º)</strong></p>
<p>ç›´æ¥ä»æºæ–‡ä»¶å¯¼å…¥è€Œä¸æ˜¯ä» Barrel æ–‡ä»¶å¯¼å…¥ï¼Œä»¥é¿å…åŠ è½½æ•°åƒä¸ªæœªä½¿ç”¨çš„æ¨¡å—ã€‚<strong>Barrel æ–‡ä»¶</strong>æ˜¯é‡æ–°å¯¼å‡ºå¤šä¸ªæ¨¡å—çš„å…¥å£ç‚¹ï¼ˆä¾‹å¦‚ï¼Œæ‰§è¡Œ <code>export * from './module'</code> çš„ <code>index.js</code>ï¼‰ã€‚</p>
<p>æµè¡Œçš„å›¾æ ‡å’Œç»„ä»¶åº“åœ¨å…¶å…¥å£æ–‡ä»¶ä¸­å¯èƒ½æœ‰ <strong>å¤šè¾¾ 10,000 ä¸ªé‡å¯¼å‡º</strong>ã€‚å¯¹äºè®¸å¤š React åŒ…ï¼Œ<strong>ä»…å¯¼å…¥å®ƒä»¬å°±éœ€è¦ 200-800ms</strong>ï¼Œè¿™ä¼šå½±å“å¼€å‘é€Ÿåº¦å’Œç”Ÿäº§ç¯å¢ƒçš„å†·å¯åŠ¨ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆ tree-shaking æ²¡æœ‰å¸®åŠ©ï¼š</strong> å½“åº“è¢«æ ‡è®°ä¸ºå¤–éƒ¨ï¼ˆä¸æ‰“åŒ…ï¼‰æ—¶ï¼Œæ‰“åŒ…å™¨æ— æ³•å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚å¦‚æœä½ å°†å…¶æ‰“åŒ…ä»¥å¯ç”¨ tree-shakingï¼Œåˆ†ææ•´ä¸ªæ¨¡å—å›¾ä¼šå¯¼è‡´æ„å»ºå˜å¾—éå¸¸ç¼“æ…¢ã€‚</p>
<p><strong>é”™è¯¯ï¼šå¯¼å…¥æ•´ä¸ªåº“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Check</span>, X, <span class="hljs-title class_">Menu</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>
<span class="hljs-comment">// åŠ è½½ 1,583 ä¸ªæ¨¡å—ï¼Œå¼€å‘ç¯å¢ƒé¢å¤–è€—æ—¶ ~2.8s</span>
<span class="hljs-comment">// è¿è¡Œæ—¶æˆæœ¬ï¼šæ¯æ¬¡å†·å¯åŠ¨ 200-800ms</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span>, <span class="hljs-title class_">TextField</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>
<span class="hljs-comment">// åŠ è½½ 2,225 ä¸ªæ¨¡å—ï¼Œå¼€å‘ç¯å¢ƒé¢å¤–è€—æ—¶ ~4.2s</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…å¯¼å…¥ä½ éœ€è¦çš„å†…å®¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Check</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/check'</span>
<span class="hljs-keyword">import</span> X <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/x'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Menu</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react/dist/esm/icons/menu'</span>
<span class="hljs-comment">// ä»…åŠ è½½ 3 ä¸ªæ¨¡å— (~2KB vs ~1MB)</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material/Button'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TextField</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material/TextField'</span>
<span class="hljs-comment">// ä»…åŠ è½½ä½ ä½¿ç”¨çš„å†…å®¹</span>
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šNext.js 13.5+</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// next.config.js - ä½¿ç”¨ optimizePackageImports</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">experimental</span>: {
    <span class="hljs-attr">optimizePackageImports</span>: [<span class="hljs-string">'lucide-react'</span>, <span class="hljs-string">'@mui/material'</span>]
  }
}

<span class="hljs-comment">// è¿™æ ·ä½ å¯ä»¥ä¿ç•™ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„ Barrel å¯¼å…¥ï¼š</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Check</span>, X, <span class="hljs-title class_">Menu</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lucide-react'</span>
<span class="hljs-comment">// åœ¨æ„å»ºæ—¶è‡ªåŠ¨è½¬æ¢ä¸ºç›´æ¥å¯¼å…¥</span>
</code></pre>
<p>ç›´æ¥å¯¼å…¥å¯æä¾› 15-70% æ›´å¿«çš„å¼€å‘å¯åŠ¨é€Ÿåº¦ï¼Œ28% æ›´å¿«çš„æ„å»ºé€Ÿåº¦ï¼Œ40% æ›´å¿«çš„å†·å¯åŠ¨é€Ÿåº¦ï¼Œä»¥åŠæ˜¾è‘—æ›´å¿«çš„ HMRã€‚</p>
<p>å—å½±å“çš„å¸¸è§åº“ï¼š<code>lucide-react</code>, <code>@mui/material</code>, <code>@mui/icons-material</code>, <code>@tabler/icons-react</code>, <code>react-icons</code>, <code>@headlessui/react</code>, <code>@radix-ui/react-*</code>, <code>lodash</code>, <code>ramda</code>, <code>date-fns</code>, <code>rxjs</code>, <code>react-use</code>ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-optimized-package-imports-in-next-js" target="_blank" title="https://vercel.com/blog/how-we-optimized-package-imports-in-next-js" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></p>
<h4 data-id="heading-11">2.2 æ¡ä»¶æ¨¡å—åŠ è½½</h4>
<p><strong>å½±å“åŠ›: é«˜ (ä»…åœ¨éœ€è¦æ—¶åŠ è½½å¤§æ•°æ®)</strong></p>
<p>ä»…åœ¨åŠŸèƒ½æ¿€æ´»æ—¶åŠ è½½å¤§æ•°æ®æˆ–æ¨¡å—ã€‚</p>
<p><strong>ä¾‹å­ï¼šæ‡’åŠ è½½åŠ¨ç”»å¸§</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">AnimationPlayer</span>(<span class="hljs-params">{ enabled }: { enabled: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">const</span> [frames, setFrames] = useState&lt;<span class="hljs-title class_">Frame</span>[] | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (enabled &amp;&amp; !frames &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-keyword">import</span>(<span class="hljs-string">'./animation-frames.js'</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> <span class="hljs-title function_">setFrames</span>(mod.<span class="hljs-property">frames</span>))
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setEnabled</span>(<span class="hljs-literal">false</span>))
    }
  }, [enabled, frames])

  <span class="hljs-keyword">if</span> (!frames) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Canvas</span> <span class="hljs-attr">frames</span>=<span class="hljs-string">{frames}</span> /&gt;</span></span>
}
</code></pre>
<p><code>typeof window !== 'undefined'</code> æ£€æŸ¥å¯é˜²æ­¢åœ¨ SSR æ—¶æ‰“åŒ…æ­¤æ¨¡å—ï¼Œä»è€Œä¼˜åŒ–æœåŠ¡ç«¯åŒ…ä½“ç§¯å’Œæ„å»ºé€Ÿåº¦ã€‚</p>
<h4 data-id="heading-12">2.3 æ¨è¿Ÿéå…³é”®ç¬¬ä¸‰æ–¹åº“</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ°´åˆååŠ è½½)</strong></p>
<p>åˆ†æã€æ—¥å¿—è®°å½•å’Œé”™è¯¯è·Ÿè¸ªä¸ä¼šé˜»å¡ç”¨æˆ·äº¤äº’ã€‚åº”å½“åœ¨æ°´åˆï¼ˆHydrationï¼‰ä¹‹ååŠ è½½å®ƒä»¬ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡åˆå§‹åŒ…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Analytics</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vercel/analytics/react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ°´åˆååŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Analytics</span> = <span class="hljs-title function_">dynamic</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@vercel/analytics/react'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">Analytics</span>),
  { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{ children }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        {children}
        <span class="hljs-tag">&lt;<span class="hljs-name">Analytics</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-13">2.4 é‡å‹ç»„ä»¶åŠ¨æ€å¯¼å…¥</h4>
<p><strong>å½±å“åŠ›: å…³é”® (ç›´æ¥å½±å“ TTI å’Œ LCP)</strong></p>
<p>ä½¿ç”¨ <code>next/dynamic</code> æ‡’åŠ è½½åˆå§‹æ¸²æŸ“ä¸éœ€è¦çš„å¤§å‹ç»„ä»¶ã€‚</p>
<p><strong>é”™è¯¯ï¼šMonaco éšä¸» chunk æ‰“åŒ… ~300KB</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">MonacoEditor</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./monaco-editor'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CodePanel</span>(<span class="hljs-params">{ code }: { code: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MonacoEditor</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{code}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šMonaco æŒ‰éœ€åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> dynamic <span class="hljs-keyword">from</span> <span class="hljs-string">'next/dynamic'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MonacoEditor</span> = <span class="hljs-title function_">dynamic</span>(
  <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">MonacoEditor</span>),
  { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }
)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">CodePanel</span>(<span class="hljs-params">{ code }: { code: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MonacoEditor</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{code}</span> /&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-14">2.5 åŸºäºç”¨æˆ·æ„å›¾é¢„åŠ è½½</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å‡å°‘æ„ŸçŸ¥å»¶è¿Ÿ)</strong></p>
<p>åœ¨éœ€è¦ä¹‹å‰é¢„åŠ è½½ç¹é‡çš„åŒ…ï¼Œä»¥å‡å°‘æ„ŸçŸ¥å»¶è¿Ÿã€‚</p>
<p><strong>ä¾‹å­ï¼šæ‚¬åœ/èšç„¦æ—¶é¢„åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">EditorButton</span>(<span class="hljs-params">{ onClick }: { onClick: () =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">preload</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-built_in">void</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>)
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>
      <span class="hljs-attr">onMouseEnter</span>=<span class="hljs-string">{preload}</span>
      <span class="hljs-attr">onFocus</span>=<span class="hljs-string">{preload}</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>
    &gt;</span>
      æ‰“å¼€ç¼–è¾‘å™¨
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ä¾‹å­ï¼šå½“åŠŸèƒ½æ ‡å¿—å¯ç”¨æ—¶é¢„åŠ è½½</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FlagsProvider</span>(<span class="hljs-params">{ children, flags }: Props</span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (flags.<span class="hljs-property">editorEnabled</span> &amp;&amp; <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>) {
      <span class="hljs-built_in">void</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./monaco-editor'</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> mod.<span class="hljs-title function_">init</span>())
    }
  }, [flags.<span class="hljs-property">editorEnabled</span>])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlagsContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{flags}</span>&gt;</span>
    {children}
  <span class="hljs-tag">&lt;/<span class="hljs-name">FlagsContext.Provider</span>&gt;</span></span>
}
</code></pre>
<p><code>typeof window !== 'undefined'</code> æ£€æŸ¥å¯é˜²æ­¢åœ¨ SSR æ—¶æ‰“åŒ…é¢„åŠ è½½æ¨¡å—ï¼Œä»è€Œä¼˜åŒ–æœåŠ¡ç«¯åŒ…ä½“ç§¯å’Œæ„å»ºé€Ÿåº¦ã€‚</p>
<hr/>
<h3 data-id="heading-15">3. æœåŠ¡ç«¯æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: é«˜</strong></p>
<p>ä¼˜åŒ–æœåŠ¡ç«¯æ¸²æŸ“å’Œæ•°æ®è·å–å¯æ¶ˆé™¤æœåŠ¡ç«¯ç€‘å¸ƒæµå¹¶å‡å°‘å“åº”æ—¶é—´ã€‚</p>
<h4 data-id="heading-16">3.1 è·¨è¯·æ±‚ LRU ç¼“å­˜</h4>
<p><strong>å½±å“åŠ›: é«˜ (è·¨è¯·æ±‚ç¼“å­˜)</strong></p>
<p><code>React.cache()</code> ä»…åœ¨ä¸€ä¸ªè¯·æ±‚å†…æœ‰æ•ˆã€‚å¯¹äºè·¨è¿ç»­è¯·æ±‚å…±äº«çš„æ•°æ®ï¼ˆç”¨æˆ·ç‚¹å‡»æŒ‰é’® A ç„¶åç‚¹å‡»æŒ‰é’® Bï¼‰ï¼Œè¯·ä½¿ç”¨ LRU ç¼“å­˜ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">LRUCache</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'lru-cache'</span>

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LRUCache</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;({
  <span class="hljs-attr">max</span>: <span class="hljs-number">1000</span>,
  <span class="hljs-attr">ttl</span>: <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>  <span class="hljs-comment">// 5 åˆ†é’Ÿ</span>
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> cached = cache.<span class="hljs-title function_">get</span>(id)
  <span class="hljs-keyword">if</span> (cached) <span class="hljs-keyword">return</span> cached

  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({ <span class="hljs-attr">where</span>: { id } })
  cache.<span class="hljs-title function_">set</span>(id, user)
  <span class="hljs-keyword">return</span> user
}

<span class="hljs-comment">// è¯·æ±‚ 1: DB æŸ¥è¯¢, ç»“æœè¢«ç¼“å­˜</span>
<span class="hljs-comment">// è¯·æ±‚ 2: ç¼“å­˜å‘½ä¸­, æ—  DB æŸ¥è¯¢</span>
</code></pre>
<p>å½“é¡ºåºçš„ç”¨æˆ·æ“ä½œåœ¨å‡ ç§’é’Ÿå†…å‘½ä¸­å¤šä¸ªéœ€è¦ç›¸åŒæ•°æ®çš„ç«¯ç‚¹æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</p>
<p><strong>é…åˆ Vercel çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fdocs%2Ffluid-compute" target="_blank" title="https://vercel.com/docs/fluid-compute" ref="nofollow noopener noreferrer">Fluid Compute</a>ï¼š</strong> LRU ç¼“å­˜ç‰¹åˆ«æœ‰æ•ˆï¼Œå› ä¸ºå¤šä¸ªå¹¶å‘è¯·æ±‚å¯ä»¥å…±äº«åŒä¸€ä¸ªå‡½æ•°å®ä¾‹å’Œç¼“å­˜ã€‚è¿™æ„å‘³ç€ç¼“å­˜å¯ä»¥è·¨è¯·æ±‚æŒä¹…åŒ–ï¼Œè€Œæ— éœ€ Redis ç­‰å¤–éƒ¨å­˜å‚¨ã€‚</p>
<p><strong>åœ¨ä¼ ç»Ÿ Serverless ä¸­ï¼š</strong> æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯éš”ç¦»è¿è¡Œçš„ï¼Œå› æ­¤è¯·è€ƒè™‘ä½¿ç”¨ Redis è¿›è¡Œè·¨è¿›è€Œç¼“å­˜ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fisaacs%2Fnode-lru-cache" target="_blank" title="https://github.com/isaacs/node-lru-cache" ref="nofollow noopener noreferrer">github.com/isaacs/nodeâ€¦</a></p>
<h4 data-id="heading-17">3.2 æœ€å°åŒ– RSC è¾¹ç•Œåºåˆ—åŒ–</h4>
<p><strong>å½±å“åŠ›: é«˜ (å‡å°‘ä¼ è¾“æ•°æ®å¤§å°)</strong></p>
<p>React Server/Client è¾¹ç•Œä¼šå°†æ‰€æœ‰å¯¹è±¡å±æ€§åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶å°†å®ƒä»¬åµŒå…¥åˆ° HTML å“åº”å’Œåç»­çš„ RSC è¯·æ±‚ä¸­ã€‚æ­¤åºåˆ—åŒ–æ•°æ®ç›´æ¥å½±å“é¡µé¢é‡é‡å’ŒåŠ è½½æ—¶é—´ï¼Œå› æ­¤ <strong>å¤§å°éå¸¸é‡è¦</strong>ã€‚ä»…ä¼ é€’å®¢æˆ·ç«¯å®é™…ä½¿ç”¨çš„å­—æ®µã€‚</p>
<p><strong>é”™è¯¯ï¼šåºåˆ—åŒ–æ‰€æœ‰ 50 ä¸ªå­—æ®µ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()  <span class="hljs-comment">// 50 ä¸ªå­—æ®µ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Profile</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span></span>
}

<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user }: { user: User }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>  <span class="hljs-comment">// ä½¿ç”¨ 1 ä¸ªå­—æ®µ</span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åºåˆ—åŒ– 1 ä¸ªå­—æ®µ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUser</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Profile</span> <span class="hljs-attr">name</span>=<span class="hljs-string">{user.name}</span> /&gt;</span></span>
}

<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ name }: { name: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-18">3.3 é€šè¿‡ç»„ä»¶ç»„åˆå¹¶è¡Œè·å–æ•°æ®</h4>
<p><strong>å½±å“åŠ›: å…³é”® (æ¶ˆé™¤æœåŠ¡ç«¯ç€‘å¸ƒæµ)</strong></p>
<p>React Server Components åœ¨æ ‘ä¸­é¡ºåºæ‰§è¡Œã€‚ä½¿ç”¨ç»„åˆé‡æ„ä»¥å¹¶è¡ŒåŒ–æ•°æ®è·å–ã€‚</p>
<p><strong>é”™è¯¯ï¼šSidebar ç­‰å¾… Page çš„ fetch å®Œæˆ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> header = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä¸¤è€…åŒæ—¶è·å–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>ä½¿ç”¨ children prop çš„æ›¿ä»£æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Layout</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">const</span> header = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchHeader</span>()
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{header}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> items = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchSidebarItems</span>()
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>{items.map(renderItem)}<span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Layout</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Sidebar</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Layout</span>&gt;</span></span>
  )
}
</code></pre>
<h4 data-id="heading-19">3.4 ä½¿ç”¨ React.cache() è¿›è¡ŒæŒ‰è¯·æ±‚å»é‡</h4>
<p><strong>å½±å“åŠ›: ä¸­ (è¯·æ±‚å†…å»é‡)</strong></p>
<p>ä½¿ç”¨ <code>React.cache()</code> è¿›è¡ŒæœåŠ¡ç«¯è¯·æ±‚å»é‡ã€‚èº«ä»½éªŒè¯å’Œæ•°æ®åº“æŸ¥è¯¢å—ç›Šæœ€å¤§ã€‚</p>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { cache } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getCurrentUser = <span class="hljs-title function_">cache</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> session = <span class="hljs-keyword">await</span> <span class="hljs-title function_">auth</span>()
  <span class="hljs-keyword">if</span> (!session?.<span class="hljs-property">user</span>?.<span class="hljs-property">id</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> db.<span class="hljs-property">user</span>.<span class="hljs-title function_">findUnique</span>({
    <span class="hljs-attr">where</span>: { <span class="hljs-attr">id</span>: session.<span class="hljs-property">user</span>.<span class="hljs-property">id</span> }
  })
})
</code></pre>
<p>åœ¨å•ä¸ªè¯·æ±‚ä¸­ï¼Œå¯¹ <code>getCurrentUser()</code> çš„å¤šæ¬¡è°ƒç”¨åªä¼šæ‰§è¡Œä¸€æ¬¡æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-20">3.5 ä½¿ç”¨ after() å¤„ç†éé˜»å¡æ“ä½œ</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ›´å¿«çš„å“åº”æ—¶é—´)</strong></p>
<p>ä½¿ç”¨ Next.js çš„ <code>after()</code> æ¥è°ƒåº¦åº”åœ¨å‘é€å“åº”åæ‰§è¡Œçš„å·¥ä½œã€‚è¿™å¯ä»¥é˜²æ­¢æ—¥å¿—è®°å½•ã€åˆ†æå’Œå…¶ä»–å‰¯ä½œç”¨é˜»å¡å“åº”ã€‚</p>
<p><strong>é”™è¯¯ï¼šé˜»å¡å“åº”</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { logUserAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/app/utils'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-comment">// æ‰§è¡Œå˜æ›´</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateDatabase</span>(request)
  
  <span class="hljs-comment">// æ—¥å¿—è®°å½•é˜»å¡äº†å“åº”</span>
  <span class="hljs-keyword">const</span> userAgent = request.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'user-agent'</span>) || <span class="hljs-string">'unknown'</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">logUserAction</span>({ userAgent })
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span> }), {
    <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
  })
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šéé˜»å¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { after } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/server'</span>
<span class="hljs-keyword">import</span> { headers, cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>
<span class="hljs-keyword">import</span> { logUserAction } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/app/utils'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">request: Request</span>) {
  <span class="hljs-comment">// æ‰§è¡Œå˜æ›´</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">updateDatabase</span>(request)
  
  <span class="hljs-comment">// å“åº”å‘é€åè®°å½•æ—¥å¿—</span>
  <span class="hljs-title function_">after</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> userAgent = (<span class="hljs-keyword">await</span> <span class="hljs-title function_">headers</span>()).<span class="hljs-title function_">get</span>(<span class="hljs-string">'user-agent'</span>) || <span class="hljs-string">'unknown'</span>
    <span class="hljs-keyword">const</span> sessionCookie = (<span class="hljs-keyword">await</span> <span class="hljs-title function_">cookies</span>()).<span class="hljs-title function_">get</span>(<span class="hljs-string">'session-id'</span>)?.<span class="hljs-property">value</span> || <span class="hljs-string">'anonymous'</span>
    
    <span class="hljs-title function_">logUserAction</span>({ sessionCookie, userAgent })
  })
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">'success'</span> }), {
    <span class="hljs-attr">status</span>: <span class="hljs-number">200</span>,
    <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
  })
}
</code></pre>
<p>å“åº”ç«‹å³å‘é€ï¼Œè€Œæ—¥å¿—è®°å½•åœ¨åå°å‘ç”Ÿã€‚</p>
<p><strong>å¸¸è§ç”¨ä¾‹ï¼š</strong></p>
<ul>
<li>
<p>åˆ†æè·Ÿè¸ª</p>
</li>
<li>
<p>å®¡è®¡æ—¥å¿—</p>
</li>
<li>
<p>å‘é€é€šçŸ¥</p>
</li>
<li>
<p>ç¼“å­˜å¤±æ•ˆ</p>
</li>
<li>
<p>æ¸…ç†ä»»åŠ¡</p>
</li>
</ul>
<p><strong>é‡è¦è¯´æ˜ï¼š</strong></p>
<ul>
<li>
<p>å³ä½¿å“åº”å¤±è´¥æˆ–é‡å®šå‘ï¼Œ<code>after()</code> ä¹Ÿä¼šè¿è¡Œ</p>
</li>
<li>
<p>é€‚ç”¨äº Server Actionsã€Route Handlers å’Œ Server Components</p>
</li>
</ul>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org%2Fdocs%2Fapp%2Fapi-reference%2Ffunctions%2Fafter" target="_blank" title="https://nextjs.org/docs/app/api-reference/functions/after" ref="nofollow noopener noreferrer">nextjs.org/docs/app/apâ€¦</a></p>
<hr/>
<h3 data-id="heading-21">4. å®¢æˆ·ç«¯æ•°æ®è·å–</h3>
<p><strong>å½±å“åŠ›: ä¸­é«˜</strong></p>
<p>è‡ªåŠ¨å»é‡å’Œé«˜æ•ˆçš„æ•°æ®è·å–æ¨¡å¼å‡å°‘äº†å¤šä½™çš„ç½‘ç»œè¯·æ±‚ã€‚</p>
<h4 data-id="heading-22">4.1 å»é‡å…¨å±€äº‹ä»¶ç›‘å¬å™¨</h4>
<p><strong>å½±å“åŠ›: ä½ (N ä¸ªç»„ä»¶å…±ç”¨å•ä¸ªç›‘å¬å™¨)</strong></p>
<p>ä½¿ç”¨ <code>useSWRSubscription()</code> åœ¨ç»„ä»¶å®ä¾‹ä¹‹é—´å…±äº«å…¨å±€äº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<p><strong>é”™è¯¯ï¼šN ä¸ªå®ä¾‹ = N ä¸ªç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, callback: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">metaKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === key) {
        <span class="hljs-title function_">callback</span>()
      }
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
  }, [key, callback])
}
</code></pre>
<p>å½“å¤šæ¬¡ä½¿ç”¨ <code>useKeyboardShortcut</code> é’©å­æ—¶ï¼Œæ¯ä¸ªå®ä¾‹éƒ½ä¼šæ³¨å†Œä¸€ä¸ªæ–°çš„ç›‘å¬å™¨ã€‚</p>
<p><strong>æ­£ç¡®ï¼šN ä¸ªå®ä¾‹ = 1 ä¸ªç›‘å¬å™¨</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> useSWRSubscription <span class="hljs-keyword">from</span> <span class="hljs-string">'swr/subscription'</span>

<span class="hljs-comment">// æ¨¡å—çº§ Map è·Ÿè¸ªæ¯ä¸ªé”®çš„å›è°ƒ</span>
<span class="hljs-keyword">const</span> keyCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Set</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>&gt;&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, callback: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-comment">// åœ¨ Map ä¸­æ³¨å†Œæ­¤å›è°ƒ</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (!keyCallbacks.<span class="hljs-title function_">has</span>(key)) {
      keyCallbacks.<span class="hljs-title function_">set</span>(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>())
    }
    keyCallbacks.<span class="hljs-title function_">get</span>(key)!.<span class="hljs-title function_">add</span>(callback)

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> set = keyCallbacks.<span class="hljs-title function_">get</span>(key)
      <span class="hljs-keyword">if</span> (set) {
        set.<span class="hljs-title function_">delete</span>(callback)
        <span class="hljs-keyword">if</span> (set.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
          keyCallbacks.<span class="hljs-title function_">delete</span>(key)
        }
      }
    }
  }, [key, callback])

  <span class="hljs-title function_">useSWRSubscription</span>(<span class="hljs-string">'global-keydown'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params">e: KeyboardEvent</span>) =&gt; {
      <span class="hljs-keyword">if</span> (e.<span class="hljs-property">metaKey</span> &amp;&amp; keyCallbacks.<span class="hljs-title function_">has</span>(e.<span class="hljs-property">key</span>)) {
        keyCallbacks.<span class="hljs-title function_">get</span>(e.<span class="hljs-property">key</span>)!.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">cb</span> =&gt;</span> <span class="hljs-title function_">cb</span>())
      }
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'keydown'</span>, handler)
  })
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å¤šä¸ªå¿«æ·é”®å°†å…±äº«åŒä¸€ä¸ªç›‘å¬å™¨</span>
  <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-string">'p'</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> }) 
  <span class="hljs-title function_">useKeyboardShortcut</span>(<span class="hljs-string">'k'</span>, <span class="hljs-function">() =&gt;</span> { <span class="hljs-comment">/* ... */</span> })
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-23">4.2 ä½¿ç”¨ SWR è‡ªåŠ¨å»é‡</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (è‡ªåŠ¨å»é‡)</strong></p>
<p>SWR æ”¯æŒè·¨ç»„ä»¶å®ä¾‹çš„è¯·æ±‚å»é‡ã€ç¼“å­˜å’Œé‡æ–°éªŒè¯ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ— å»é‡ï¼Œæ¯ä¸ªå®ä¾‹éƒ½è·å–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [users, setUsers] = <span class="hljs-title function_">useState</span>([])
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/users'</span>)
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>())
      .<span class="hljs-title function_">then</span>(setUsers)
  }, [])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¤šä¸ªå®ä¾‹å…±äº«ä¸€ä¸ªè¯·æ±‚</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> useSWR <span class="hljs-keyword">from</span> <span class="hljs-string">'swr'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: users } = <span class="hljs-title function_">useSWR</span>(<span class="hljs-string">'/api/users'</span>, fetcher)
}
</code></pre>
<p><strong>å¯¹äºä¸å¯å˜æ•°æ®ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useImmutableSWR } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/swr'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">StaticContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { data } = <span class="hljs-title function_">useImmutableSWR</span>(<span class="hljs-string">'/api/config'</span>, fetcher)
}
</code></pre>
<p><strong>å¯¹äºå˜å¼‚ (Mutations)ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useSWRMutation } <span class="hljs-keyword">from</span> <span class="hljs-string">'swr/mutation'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UpdateButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { trigger } = <span class="hljs-title function_">useSWRMutation</span>(<span class="hljs-string">'/api/user'</span>, updateUser)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> trigger()}&gt;æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fswr.vercel.app" target="_blank" title="https://swr.vercel.app" ref="nofollow noopener noreferrer">swr.vercel.app</a></p>
<hr/>
<h3 data-id="heading-24">5. é‡æ¸²æŸ“ä¼˜åŒ–</h3>
<p><strong>å½±å“åŠ›: ä¸­</strong></p>
<p>å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“å¯æœ€å¤§é™åº¦åœ°å‡å°‘æµªè´¹çš„è®¡ç®—å¹¶æé«˜ UI å“åº”èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-25">5.1 æ¨è¿ŸçŠ¶æ€è¯»å–åˆ°ä½¿ç”¨ç‚¹</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…ä¸å¿…è¦çš„è®¢é˜…)</strong></p>
<p>å¦‚æœä½ åªåœ¨å›è°ƒä¸­è¯»å–åŠ¨æ€çŠ¶æ€ï¼ˆæœç´¢å‚æ•°ã€localStorageï¼‰ï¼Œåˆ™ä¸è¦è®¢é˜…å®ƒã€‚</p>
<p><strong>é”™è¯¯ï¼šè®¢é˜…æ‰€æœ‰ searchParams æ›´æ”¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ShareButton</span>(<span class="hljs-params">{ chatId }: { chatId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> searchParams = <span class="hljs-title function_">useSearchParams</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleShare</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> ref = searchParams.<span class="hljs-title function_">get</span>(<span class="hljs-string">'ref'</span>)
    <span class="hljs-title function_">shareChat</span>(chatId, { ref })
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleShare}</span>&gt;</span>åˆ†äº«<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæŒ‰éœ€è¯»å–ï¼Œæ— è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ShareButton</span>(<span class="hljs-params">{ chatId }: { chatId: <span class="hljs-built_in">string</span> }</span>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleShare</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">search</span>)
    <span class="hljs-keyword">const</span> ref = params.<span class="hljs-title function_">get</span>(<span class="hljs-string">'ref'</span>)
    <span class="hljs-title function_">shareChat</span>(chatId, { ref })
  }

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleShare}</span>&gt;</span>åˆ†äº«<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-26">5.2 æå–ä¸ºè®°å¿†åŒ–ç»„ä»¶</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å¯ç”¨æå‰è¿”å›)</strong></p>
<p>å°†æ˜‚è´µçš„å·¥ä½œæå–åˆ°è®°å¿†åŒ– (memoized) ç»„ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨è®¡ç®—åŠä»¥å‰æå‰è¿”å›ã€‚</p>
<p><strong>é”™è¯¯ï¼šå³ä½¿åœ¨åŠ è½½æ—¶ä¹Ÿè®¡ç®—å¤´åƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user, loading }: Props</span>) {
  <span class="hljs-keyword">const</span> avatar = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">computeAvatarId</span>(user)
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{id}</span> /&gt;</span></span>
  }, [user])

  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{avatar}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåŠ è½½æ—¶è·³è¿‡è®¡ç®—</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">UserAvatar</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserAvatar</span>(<span class="hljs-params">{ user }: { user: User }</span>) {
  <span class="hljs-keyword">const</span> id = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">computeAvatarId</span>(user), [user])
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{id}</span> /&gt;</span></span>
})

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Profile</span>(<span class="hljs-params">{ user, loading }: Props</span>) {
  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Skeleton</span> /&gt;</span></span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">UserAvatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{user}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œåˆ™æ— éœ€ä½¿ç”¨ <code>memo()</code> å’Œ <code>useMemo()</code> è¿›è¡Œæ‰‹åŠ¨è®°å¿†åŒ–ã€‚ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¼˜åŒ–é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-27">5.3 ç¼©å° Effect ä¾èµ–èŒƒå›´</h4>
<p><strong>å½±å“åŠ›: ä½ (æœ€å°åŒ– effect é‡æ–°è¿è¡Œ)</strong></p>
<p>æŒ‡å®šåŸå§‹å€¼ä¾èµ–é¡¹è€Œä¸æ˜¯å¯¹è±¡ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘ effect çš„é‡æ–°è¿è¡Œã€‚</p>
<p><strong>é”™è¯¯ï¼šåœ¨ä»»ä½•ç”¨æˆ·å­—æ®µæ›´æ”¹æ—¶é‡æ–°è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">id</span>)
}, [user])
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨ id æ›´æ”¹æ—¶é‡æ–°è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">id</span>)
}, [user.<span class="hljs-property">id</span>])
</code></pre>
<p><strong>å¯¹äºæ´¾ç”ŸçŠ¶æ€ï¼Œåœ¨ effect å¤–éƒ¨è®¡ç®—ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é”™è¯¯ï¼šåœ¨ width=767, 766, 765... æ—¶è¿è¡Œ</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (width &lt; <span class="hljs-number">768</span>) {
    <span class="hljs-title function_">enableMobileMode</span>()
  }
}, [width])

<span class="hljs-comment">// æ­£ç¡®ï¼šä»…åœ¨å¸ƒå°”å€¼è½¬æ¢æ—¶è¿è¡Œ</span>
<span class="hljs-keyword">const</span> isMobile = width &lt; <span class="hljs-number">768</span>
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (isMobile) {
    <span class="hljs-title function_">enableMobileMode</span>()
  }
}, [isMobile])
</code></pre>
<h4 data-id="heading-28">5.4 è®¢é˜…æ´¾ç”ŸçŠ¶æ€</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é™ä½é‡æ¸²æŸ“é¢‘ç‡)</strong></p>
<p>è®¢é˜…æ´¾ç”Ÿçš„å¸ƒå°”çŠ¶æ€è€Œä¸æ˜¯è¿ç»­å€¼ï¼Œä»¥é™ä½é‡æ¸²æŸ“é¢‘ç‡ã€‚</p>
<p><strong>é”™è¯¯ï¼šåœ¨æ¯ä¸ªåƒç´ å˜åŒ–æ—¶é‡æ¸²æŸ“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">useWindowWidth</span>()  <span class="hljs-comment">// æŒç»­æ›´æ–°</span>
  <span class="hljs-keyword">const</span> isMobile = width &lt; <span class="hljs-number">768</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isMobile</span> ? '<span class="hljs-attr">mobile</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">desktop</span>'}&gt;</span>
}
</span></code></pre>
<p><strong>æ­£ç¡®ï¼šä»…åœ¨å¸ƒå°”å€¼æ›´æ”¹æ—¶é‡æ¸²æŸ“</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Sidebar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> isMobile = <span class="hljs-title function_">useMediaQuery</span>(<span class="hljs-string">'(max-width: 767px)'</span>)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isMobile</span> ? '<span class="hljs-attr">mobile</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">desktop</span>'}&gt;</span>
}
</span></code></pre>
<h4 data-id="heading-29">5.5 ä½¿ç”¨å‡½æ•°å¼ setState æ›´æ–°</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é˜²æ­¢é—­åŒ…é™·é˜±å’Œä¸å¿…è¦çš„å›è°ƒé‡å»º)</strong></p>
<p>å½“åŸºäºå½“å‰çŠ¶æ€å€¼æ›´æ–°çŠ¶æ€æ—¶ï¼Œä½¿ç”¨ <code>setState</code> çš„å‡½æ•°å¼æ›´æ–°å½¢å¼ï¼Œè€Œä¸æ˜¯ç›´æ¥å¼•ç”¨çŠ¶æ€å˜é‡ã€‚è¿™å¯ä»¥é˜²æ­¢é—­åŒ…é™·é˜± (stale closures)ï¼Œæ¶ˆé™¤ä¸å¿…è¦çš„ä¾èµ–ï¼Œå¹¶åˆ›å»ºç¨³å®šçš„å›è°ƒå¼•ç”¨ã€‚</p>
<p><strong>é”™è¯¯ï¼šéœ€è¦ state ä½œä¸ºä¾èµ–</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>(initialItems)
  
  <span class="hljs-comment">// å›è°ƒå¿…é¡»ä¾èµ– itemsï¼Œåœ¨æ¯æ¬¡ items æ›´æ”¹æ—¶é‡å»º</span>
  <span class="hljs-keyword">const</span> addItems = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newItems: Item[]</span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>([...items, ...newItems])
  }, [items])  <span class="hljs-comment">// âŒ items ä¾èµ–å¯¼è‡´é‡å»º</span>
  
  <span class="hljs-comment">// å¦‚æœå¿˜è®°ä¾èµ–ï¼Œä¼šæœ‰é—­åŒ…é™·é˜±é£é™©</span>
  <span class="hljs-keyword">const</span> removeItem = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> !== id))
  }, [])  <span class="hljs-comment">// âŒ ç¼ºå°‘ items ä¾èµ– - å°†ä½¿ç”¨é™ˆæ—§çš„ itemsï¼</span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ItemsEditor</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addItems}</span> <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{removeItem}</span> /&gt;</span></span>
}
</code></pre>
<p>ç¬¬ä¸€ä¸ªå›è°ƒæ¯æ¬¡ <code>items</code> æ›´æ”¹æ—¶éƒ½ä¼šé‡å»ºï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å­ç»„ä»¶ä¸å¿…è¦åœ°é‡æ¸²æŸ“ã€‚ç¬¬äºŒä¸ªå›è°ƒæœ‰ä¸€ä¸ªé—­åŒ…é™·é˜± bugâ€”â€”å®ƒå°†å§‹ç»ˆå¼•ç”¨åˆå§‹çš„ <code>items</code> å€¼ã€‚</p>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„å›è°ƒï¼Œæ— é—­åŒ…é™·é˜±</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>(initialItems)
  
  <span class="hljs-comment">// ç¨³å®šçš„å›è°ƒï¼Œä»æœªé‡å»º</span>
  <span class="hljs-keyword">const</span> addItems = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">newItems: Item[]</span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(<span class="hljs-function"><span class="hljs-params">curr</span> =&gt;</span> [...curr, ...newItems])
  }, [])  <span class="hljs-comment">// âœ… ä¸éœ€è¦ä¾èµ–</span>
  
  <span class="hljs-comment">// å§‹ç»ˆä½¿ç”¨æœ€æ–°çŠ¶æ€ï¼Œæ— é—­åŒ…é™·é˜±é£é™©</span>
  <span class="hljs-keyword">const</span> removeItem = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-title function_">setItems</span>(<span class="hljs-function"><span class="hljs-params">curr</span> =&gt;</span> curr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> !== id))
  }, [])  <span class="hljs-comment">// âœ… å®‰å…¨ä¸”ç¨³å®š</span>
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ItemsEditor</span> <span class="hljs-attr">items</span>=<span class="hljs-string">{items}</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addItems}</span> <span class="hljs-attr">onRemove</span>=<span class="hljs-string">{removeItem}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>å¥½å¤„ï¼š</strong></p>
<ol>
<li>
<p><strong>ç¨³å®šçš„å›è°ƒå¼•ç”¨</strong> - çŠ¶æ€æ›´æ”¹æ—¶æ— éœ€é‡å»ºå›è°ƒ</p>
</li>
<li>
<p><strong>æ— é—­åŒ…é™·é˜±</strong> - å§‹ç»ˆå¯¹æœ€æ–°çŠ¶æ€å€¼è¿›è¡Œæ“ä½œ</p>
</li>
<li>
<p><strong>æ›´å°‘çš„ä¾èµ–</strong> - ç®€åŒ–äº†ä¾èµ–æ•°ç»„å¹¶å‡å°‘äº†å†…å­˜æ³„æ¼</p>
</li>
<li>
<p><strong>é˜²æ­¢é”™è¯¯</strong> - æ¶ˆé™¤äº† React é—­åŒ… bug çš„æœ€å¸¸è§æ¥æº</p>
</li>
</ol>
<p><strong>ä½•æ—¶ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ï¼š</strong></p>
<ul>
<li>
<p>ä»»ä½•ä¾èµ–äºå½“å‰çŠ¶æ€å€¼çš„ setState</p>
</li>
<li>
<p>åœ¨éœ€è¦ state çš„ useCallback/useMemo å†…éƒ¨</p>
</li>
<li>
<p>å¼•ç”¨ state çš„äº‹ä»¶å¤„ç†ç¨‹åº</p>
</li>
<li>
<p>æ›´æ–° state çš„å¼‚æ­¥æ“ä½œ</p>
</li>
</ul>
<p><strong>ä½•æ—¶ç›´æ¥æ›´æ–°æ˜¯å¯ä»¥çš„ï¼š</strong></p>
<ul>
<li>
<p>å°† state è®¾ç½®ä¸ºé™æ€å€¼ï¼š<code>setCount(0)</code></p>
</li>
<li>
<p>ä»…ä» props/å‚æ•°è®¾ç½® stateï¼š<code>setName(newName)</code></p>
</li>
<li>
<p>State ä¸ä¾èµ–äºå…ˆå‰çš„å€¼</p>
</li>
</ul>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨ä¼˜åŒ–æŸäº›æƒ…å†µï¼Œä½†ä»å»ºè®®ä½¿ç”¨å‡½æ•°å¼æ›´æ–°ä»¥ç¡®ä¿è¯æ­£ç¡®æ€§å¹¶é˜²æ­¢é—­åŒ…é™·é˜± bugã€‚</p>
<h4 data-id="heading-30">5.6 ä½¿ç”¨æƒ°æ€§çŠ¶æ€åˆå§‹åŒ–</h4>
<p><strong>å½±å“åŠ›: ä¸­ (æ¯æ¬¡æ¸²æŸ“éƒ½æµªè´¹è®¡ç®—)</strong></p>
<p>å°†å‡½æ•°ä¼ é€’ç»™ <code>useState</code> ç”¨äºæ˜‚è´µçš„åˆå§‹å€¼ã€‚å¦‚æœä¸ä½¿ç”¨å‡½æ•°å½¢å¼ï¼Œåˆå§‹åŒ–ç¨‹åºå°†åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œï¼Œå³ä½¿è¯¥å€¼ä»…ä½¿ç”¨ä¸€æ¬¡ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½è¿è¡Œ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FilteredList</span>(<span class="hljs-params">{ items }: { items: Item[] }</span>) {
  <span class="hljs-comment">// buildSearchIndex() åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œï¼Œå³ä½¿åœ¨åˆå§‹åŒ–ä¹‹å</span>
  <span class="hljs-keyword">const</span> [searchIndex, setSearchIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-title function_">buildSearchIndex</span>(items))
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-comment">// å½“ query æ›´æ”¹æ—¶ï¼ŒbuildSearchIndex å†æ¬¡ä¸å¿…è¦åœ°è¿è¡Œ</span>
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchResults</span> <span class="hljs-attr">index</span>=<span class="hljs-string">{searchIndex}</span> <span class="hljs-attr">query</span>=<span class="hljs-string">{query}</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// JSON.parse åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [settings, setSettings] = <span class="hljs-title function_">useState</span>(
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'settings'</span>) || <span class="hljs-string">'{}'</span>)
  )
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SettingsForm</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{settings}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setSettings}</span> /&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä»…è¿è¡Œä¸€æ¬¡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">FilteredList</span>(<span class="hljs-params">{ items }: { items: Item[] }</span>) {
  <span class="hljs-comment">// buildSearchIndex() ä»…åœ¨åˆå§‹æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [searchIndex, setSearchIndex] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">buildSearchIndex</span>(items))
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SearchResults</span> <span class="hljs-attr">index</span>=<span class="hljs-string">{searchIndex}</span> <span class="hljs-attr">query</span>=<span class="hljs-string">{query}</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// JSON.parse ä»…åœ¨åˆå§‹æ¸²æŸ“æ—¶è¿è¡Œ</span>
  <span class="hljs-keyword">const</span> [settings, setSettings] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> stored = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'settings'</span>)
    <span class="hljs-keyword">return</span> stored ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(stored) : {}
  })
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">SettingsForm</span> <span class="hljs-attr">settings</span>=<span class="hljs-string">{settings}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setSettings}</span> /&gt;</span></span>
}
</code></pre>
<p>å½“ä» localStorage/sessionStorage è®¡ç®—åˆå§‹å€¼ã€æ„å»ºæ•°æ®ç»“æ„ï¼ˆç´¢å¼•ã€Mapï¼‰ã€ä» DOM è¯»å–æˆ–æ‰§è¡Œç¹é‡çš„è½¬æ¢æ˜¯ï¼Œè¯·ä½¿ç”¨æƒ°æ€§åˆå§‹åŒ–ã€‚</p>
<p>å¯¹äºç®€å•çš„åŸå§‹å€¼ (<code>useState(0)</code>)ã€ç›´æ¥å¼•ç”¨ (<code>useState(props.value)</code>) æˆ–å»‰ä»·çš„å­—é¢é‡ (<code>useState({})</code>)ï¼Œå‡½æ•°å½¢å¼æ˜¯ä¸å¿…è¦çš„ã€‚</p>
<h4 data-id="heading-31">5.7 å¯¹éç´§æ€¥æ›´æ–°ä½¿ç”¨ Transitions</h4>
<p><strong>å½±å“åŠ›: ä¸­ (ä¿æŒ UI å“åº”åŠ)</strong></p>
<p>å°†é¢‘ç¹çš„ã€éç´§æ€¥çš„çŠ¶æ€æ›´æ–°æ ‡è®°ä¸º transitionsï¼Œä»¥ä¿æŒ UI å“åº”èƒ½åŠ›ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ»šåŠ¨éƒ½é˜»å¡ UI</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollTracker</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [scrollY, setScrollY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setScrollY</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>)
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handler, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handler)
  }, [])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šéé˜»å¡æ›´æ–°</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { startTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ScrollTracker</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [scrollY, setScrollY] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handler</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">startTransition</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setScrollY</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>))
    }
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, handler, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> })
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'scroll'</span>, handler)
  }, [])
}
</code></pre>
<hr/>
<h3 data-id="heading-32">6. æ¸²æŸ“æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: ä¸­</strong></p>
<p>ä¼˜åŒ–æ¸²æŸ“è¿‡ç¨‹å¯å‡å°‘æµè§ˆå™¨éœ€è¦åšçš„å·¥ä½œã€‚</p>
<h4 data-id="heading-33">6.1 åŠ¨ç”»åŒ– SVG åŒ…è£…å™¨è€Œé SVG å…ƒç´ </h4>
<p><strong>å½±å“åŠ›: ä½ (å¯ç”¨ç¡¬ä»¶åŠ é€Ÿ)</strong></p>
<p>è®¸å¤šæµè§ˆå™¨ä¸æ”¯æŒå¯¹ SVG å…ƒç´ çš„ CSS3 åŠ¨ç”»è¿›è¡Œç¡¬ä»¶åŠ é€Ÿã€‚å°† SVG åŒ…è£…åœ¨ <code>&lt;div&gt;</code> ä¸­å¹¶å¯¹åŒ…è£…å™¨è¿›è¡ŒåŠ¨ç”»å¤„ç†ã€‚</p>
<p><strong>é”™è¯¯ï¼šç›´æ¥åŠ¨ç”»åŒ– SVG - æ— ç¡¬ä»¶åŠ é€Ÿ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSpinner</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">svg</span> 
      <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-spin"</span>
      <span class="hljs-attr">width</span>=<span class="hljs-string">"24"</span> 
      <span class="hljs-attr">height</span>=<span class="hljs-string">"24"</span> 
      <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåŠ¨ç”»åŒ–åŒ…è£…å™¨ div - ç¡¬ä»¶åŠ é€Ÿ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSpinner</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-spin"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> 
        <span class="hljs-attr">width</span>=<span class="hljs-string">"24"</span> 
        <span class="hljs-attr">height</span>=<span class="hljs-string">"24"</span> 
        <span class="hljs-attr">viewBox</span>=<span class="hljs-string">"0 0 24 24"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">"12"</span> <span class="hljs-attr">r</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">"currentColor"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™é€‚ç”¨äºæ‰€æœ‰ CSS å˜æ¢å’Œè¿‡æ¸¡ï¼ˆ<code>transform</code>, <code>opacity</code>, <code>translate</code>, <code>scale</code>, <code>rotate</code>ï¼‰ã€‚åŒ…è£…å™¨ div å…è®¸æµè§ˆå™¨ä½¿ç”¨ GPU åŠ é€Ÿæ¥å®ç°æ›´æµç•…çš„åŠ¨ç”»ã€‚</p>
<h4 data-id="heading-34">6.2 é•¿åˆ—è¡¨ä½¿ç”¨ CSS content-visibility</h4>
<p><strong>å½±å“åŠ›: é«˜ (æ›´å¿«çš„é¦–æ¬¡æ¸²æŸ“)</strong></p>
<p>åº”ç”¨ <code>content-visibility: auto</code> ä»¥æ¨è¿Ÿå±å¹•å¤–æ¸²æŸ“ã€‚</p>
<p><strong>CSS:</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.message-item</span> {
  <span class="hljs-attribute">content-visibility</span>: auto;
  <span class="hljs-attribute">contain</span>-intrinsic-size: <span class="hljs-number">0</span> <span class="hljs-number">80px</span>;
}
</code></pre>
<p><strong>ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">MessageList</span>(<span class="hljs-params">{ messages }: { messages: Message[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"overflow-y-auto h-screen"</span>&gt;</span>
      {messages.map(msg =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{msg.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-item"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Avatar</span> <span class="hljs-attr">user</span>=<span class="hljs-string">{msg.author}</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{msg.content}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å¯¹äº 1000 æ¡æ¶ˆæ¯ï¼Œæµè§ˆå™¨ä¼šè·³è¿‡ ~990 ä¸ªå±å¹•å¤–é¡¹ç›®çš„å¸ƒå±€/ç»˜åˆ¶ï¼ˆé¦–æ¬¡æ¸²æŸ“å¿« 10 å€ï¼‰ã€‚</p>
<h4 data-id="heading-35">6.3 æå‡é™æ€ JSX å…ƒç´ </h4>
<p><strong>å½±å“åŠ›: ä½ (é¿å…é‡æ–°åˆ›å»º)</strong></p>
<p>å°†é™æ€ JSX æå–åˆ°ç»„ä»¶å¤–éƒ¨ä»¥é¿å…é‡æ–°åˆ›å»ºã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°åˆ›å»ºå…ƒç´ </strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">LoadingSkeleton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-pulse h-20 bg-gray-200"</span> /&gt;</span></span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Container</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">LoadingSkeleton</span> /&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šå¤ç”¨ç›¸åŒå…ƒç´ </strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> loadingSkeleton = (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"animate-pulse h-20 bg-gray-200"</span> /&gt;</span></span>
)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Container</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {loading &amp;&amp; loadingSkeleton}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>è¿™å¯¹äºå¤§å‹å’Œé™æ€çš„ SVG èŠ‚ç‚¹ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°åˆ›å»ºå®ƒä»¬å¯èƒ½ä¼šå¾ˆæ˜‚è´µã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœä½ çš„é¡¹ç›®å¯ç”¨äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Flearn%2Freact-compiler" target="_blank" title="https://react.dev/learn/react-compiler" ref="nofollow noopener noreferrer">React Compiler</a>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æå‡é™æ€ JSX å…ƒç´ å¹¶ä¼˜åŒ–ç»„ä»¶é‡æ¸²æŸ“ï¼Œä½¿å¾—æ‰‹åŠ¨æå‡å˜å¾—ä¸å¿…è¦ã€‚</p>
<h4 data-id="heading-36">6.4 ä¼˜åŒ– SVG ç²¾åº¦</h4>
<p><strong>å½±å“åŠ›: ä½ (å‡å°æ–‡ä»¶å¤§å°)</strong></p>
<p>é™ä½ SVG åæ ‡ç²¾åº¦ä»¥å‡å°æ–‡ä»¶å¤§å°ã€‚æœ€ä½³ç²¾åº¦å–å†³äº viewBox å¤§å°ï¼Œä½†åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”è€ƒè™‘é™ä½ç²¾åº¦ã€‚</p>
<p><strong>é”™è¯¯ï¼šè¿‡é«˜çš„ç²¾åº¦</strong></p>
<pre><code class="hljs language-svg" lang="svg"><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M 10.293847 20.847362 L 30.938472 40.192837"</span> /&gt;</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼š1 ä½å°æ•°</strong></p>
<pre><code class="hljs language-svg" lang="svg"><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">"M 10.3 20.8 L 30.9 40.2"</span> /&gt;</span>
</code></pre>
<p><strong>ä½¿ç”¨ SVGO è‡ªåŠ¨åŒ–ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">npx svgo --precision=1 --multipass icon.svg
</code></pre>
<h4 data-id="heading-37">6.5 æ— é—ªçƒé˜²æ­¢æ°´åˆä¸åŒ¹é…</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…è§†è§‰é—ªçƒå’Œæ°´åˆé”™è¯¯)</strong></p>
<p>å½“æ¸²æŸ“ä¾èµ–äºå®¢æˆ·ç«¯å­˜å‚¨ï¼ˆlocalStorage, cookiesï¼‰çš„å†…å®¹æ—¶ï¼Œé€šè¿‡æ³¨å…¥ä¸€ä¸ªåŒæ­¥è„šæœ¬åœ¨ React æ°´åˆä¹‹å‰æ›´æ–° DOMï¼Œä»¥é¿å… SSR ä¸­æ–­å’Œæ°´åˆåçš„é—ªçƒã€‚</p>
<p><strong>é”™è¯¯ï¼šç ´å SSR</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-comment">// localStorage åœ¨æœåŠ¡å™¨ä¸Šä¸å¯ç”¨ - æŠ›å‡ºé”™è¯¯</span>
  <span class="hljs-keyword">const</span> theme = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>) || <span class="hljs-string">'light'</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>æœåŠ¡ç«¯æ¸²æŸ“å°†å¤±è´¥ï¼Œå› ä¸º <code>localStorage</code> æœªå®šä¹‰ã€‚</p>
<p><strong>é”™è¯¯ï¼šè§†è§‰é—ªçƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'light'</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åœ¨æ°´åˆåè¿è¡Œ - å¯¼è‡´å¯è§çš„é—ªçƒ</span>
    <span class="hljs-keyword">const</span> stored = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>)
    <span class="hljs-keyword">if</span> (stored) {
      <span class="hljs-title function_">setTheme</span>(stored)
    }
  }, [])
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{theme}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>ç»„ä»¶é¦–å…ˆä½¿ç”¨é»˜è®¤å€¼ï¼ˆ<code>light</code>ï¼‰æ¸²æŸ“ï¼Œç„¶ååœ¨æ°´åˆåæ›´æ–°ï¼Œå¯¼è‡´ä¸æ­£ç¡®å†…å®¹çš„å¯è§é—ªçƒã€‚</p>
<p><strong>æ­£ç¡®ï¼šæ— é—ªçƒï¼Œæ— æ°´åˆä¸åŒ¹é…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeWrapper</span>(<span class="hljs-params">{ children }: { children: ReactNode }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"theme-wrapper"</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
        <span class="hljs-attr">dangerouslySetInnerHTML</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">__html:</span> `
            (<span class="hljs-attr">function</span>() {
              <span class="hljs-attr">try</span> {
                <span class="hljs-attr">var</span> <span class="hljs-attr">theme</span> = <span class="hljs-string">localStorage.getItem(</span>'<span class="hljs-attr">theme</span>') || '<span class="hljs-attr">light</span>';
                <span class="hljs-attr">var</span> <span class="hljs-attr">el</span> = <span class="hljs-string">document.getElementById(</span>'<span class="hljs-attr">theme-wrapper</span>');
                <span class="hljs-attr">if</span> (<span class="hljs-attr">el</span>) <span class="hljs-attr">el.className</span> = <span class="hljs-string">theme;</span>
              } <span class="hljs-attr">catch</span> (<span class="hljs-attr">e</span>) {}
            })();
          `,
        }}
      /&gt;</span><span class="xml">
    <span class="hljs-tag">&lt;/&gt;</span></span></span>
  )
}
</code></pre>
<p>å†…è”è„šæœ¬åœ¨æ˜¾ç¤ºå…ƒç´ ä¹‹å‰åŒæ­¥æ‰§è¡Œï¼Œç¡®ä¿ DOM å·²ç»å…·æœ‰æ­£ç¡®çš„å€¼ã€‚æ— é—ªçƒï¼Œæ— æ°´åˆä¸åŒ¹é…ã€‚</p>
<p>æ­¤æ¨¡å¼å¯¹äºä¸»é¢˜åˆ‡æ¢ã€ç”¨æˆ·åå¥½ã€èº«ä»½éªŒè¯çŠ¶æ€ä»¥åŠä»»ä½•åº”ç«‹å³æ¸²æŸ“è€Œä¸é—ªçƒé»˜è®¤å€¼çš„ä»…å®¢æˆ·ç«¯æ•°æ®ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<h4 data-id="heading-38">6.6 ä½¿ç”¨ Activity ç»„ä»¶è¿›è¡Œæ˜¾ç¤º/éšè—</h4>
<p><strong>å½±å“åŠ›: ä¸­ (ä¿ç•™çŠ¶æ€/DOM)</strong></p>
<p>ä½¿ç”¨ React çš„ <code>&lt;Activity&gt;</code> æ¥ä¸ºé¢‘ç¹åˆ‡æ¢å¯è§æ€§çš„æ˜‚è´µç»„ä»¶ä¿ç•™çŠ¶æ€/DOMã€‚</p>
<p><strong>ç”¨æ³•ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Activity</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Dropdown</span>(<span class="hljs-params">{ isOpen }: Props</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Activity</span> <span class="hljs-attr">mode</span>=<span class="hljs-string">{isOpen</span> ? '<span class="hljs-attr">visible</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">hidden</span>'}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ExpensiveMenu</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Activity</span>&gt;</span></span>
  )
}
</code></pre>
<p>é¿å…æ˜‚è´µçš„é‡æ¸²æŸ“å’ŒçŠ¶æ€ä¸¢å¤±ã€‚</p>
<h4 data-id="heading-39">6.7 ä½¿ç”¨æ˜¾å¼æ¡ä»¶æ¸²æŸ“</h4>
<p><strong>å½±å“åŠ›: ä½ (é˜²æ­¢æ¸²æŸ“ 0 æˆ– NaN)</strong></p>
<p>å½“æ¡ä»¶å¯èƒ½ä¸º <code>0</code>ã€<code>NaN</code> æˆ–å…¶ä»–ä¼šæ¸²æŸ“çš„å‡å€¼æ—¶ï¼Œä½¿ç”¨æ˜¾å¼ä¸‰å…ƒè¿ç®—ç¬¦ (<code>? :</code>) è€Œä¸æ˜¯ <code>&amp;&amp;</code> è¿›è¡Œæ¡ä»¶æ¸²æŸ“ã€‚</p>
<p><strong>é”™è¯¯ï¼šå½“ count ä¸º 0 æ—¶æ¸²æŸ“ "0"</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Badge</span>(<span class="hljs-params">{ count }: { count: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {count &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"badge"</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// å½“ count = 0, æ¸²æŸ“: &lt;div&gt;0&lt;/div&gt;</span>
<span class="hljs-comment">// å½“ count = 5, æ¸²æŸ“: &lt;div&gt;&lt;span class="badge"&gt;5&lt;/span&gt;&lt;/div&gt;</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šå½“ count ä¸º 0 æ—¶ä¸æ¸²æŸ“ä»»ä½•å†…å®¹</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Badge</span>(<span class="hljs-params">{ count }: { count: <span class="hljs-built_in">number</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {count &gt; 0 ? <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"badge"</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> : null}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}

<span class="hljs-comment">// å½“ count = 0, æ¸²æŸ“: &lt;div&gt;&lt;/div&gt;</span>
<span class="hljs-comment">// å½“ count = 5, æ¸²æŸ“: &lt;div&gt;&lt;span class="badge"&gt;5&lt;/span&gt;&lt;/div&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-40">7. JavaScript æ€§èƒ½</h3>
<p><strong>å½±å“åŠ›: ä¸­ä½</strong></p>
<p>å¯¹çƒ­è·¯å¾„çš„å¾®ä¼˜åŒ–å¯ä»¥ç´¯ç§¯æˆæœ‰æ„ä¹‰çš„æ”¹è¿›ã€‚</p>
<h4 data-id="heading-41">7.1 æ‰¹é‡ DOM CSS æ›´æ”¹</h4>
<p><strong>å½±å“åŠ›: ä¸­ (å‡å°‘é‡æ’/é‡ç»˜)</strong></p>
<p>é¿å…é€šè¿‡ä¸€æ¬¡ä¿®æ”¹ä¸€ä¸ªå±æ€§çš„æ–¹å¼æ›´æ”¹æ ·å¼ã€‚é€šè¿‡ç±»æˆ– <code>cssText</code> å°†å¤šä¸ª CSS æ›´æ”¹ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘æµè§ˆå™¨é‡æ’ (reflows)ã€‚</p>
<p><strong>é”™è¯¯ï¼šå¤šæ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  <span class="hljs-comment">// æ¯ä¸€è¡Œéƒ½ä¼šè§¦å‘ä¸€æ¬¡é‡æ’</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100px'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'200px'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'blue'</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">border</span> = <span class="hljs-string">'1px solid black'</span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ·»åŠ ç±» - å•æ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// CSS æ–‡ä»¶</span>
.<span class="hljs-property">highlighted</span>-box {
  <span class="hljs-attr">width</span>: 100px;
  <span class="hljs-attr">height</span>: 200px;
  background-<span class="hljs-attr">color</span>: blue;
  <span class="hljs-attr">border</span>: 1px solid black;
}

<span class="hljs-comment">// JavaScript</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  element.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'highlighted-box'</span>)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ”¹å˜ cssText - å•æ¬¡é‡æ’</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">updateElementStyles</span>(<span class="hljs-params">element: HTMLElement</span>) {
  element.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    width: 100px;
    height: 200px;
    background-color: blue;
    border: 1px solid black;
  `</span>
}
</code></pre>
<p><strong>React ä¾‹å­ï¼š</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// é”™è¯¯ï¼šé€ä¸ªæ›´æ”¹æ ·å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">{ isHighlighted }: { isHighlighted: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">const</span> ref = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>)
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (ref.<span class="hljs-property">current</span> &amp;&amp; isHighlighted) {
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">'100px'</span>
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'200px'</span>
      ref.<span class="hljs-property">current</span>.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">'blue'</span>
    }
  }, [isHighlighted])
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}

<span class="hljs-comment">// æ­£ç¡®ï¼šåˆ‡æ¢ç±»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Box</span>(<span class="hljs-params">{ isHighlighted }: { isHighlighted: <span class="hljs-built_in">boolean</span> }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{isHighlighted</span> ? '<span class="hljs-attr">highlighted-box</span>' <span class="hljs-attr">:</span> ''}&gt;</span>
      å†…å®¹
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p>å°½å¯èƒ½ä½¿ç”¨ CSS ç±»è€Œä¸æ˜¯å†…è”æ ·å¼ã€‚ç±»ä¼šè¢«æµè§ˆå™¨ç¼“å­˜ï¼Œå¹¶æä¾›æ›´å¥½çš„å…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>
<h4 data-id="heading-42">7.2 ä¸ºé‡å¤æŸ¥æ‰¾æ„å»ºç´¢å¼• Map</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (1M æ“ä½œ -&gt; 2K æ“ä½œ)</strong></p>
<p>åŒä¸€é”®çš„å¤šæ¬¡ <code>.find()</code> è°ƒç”¨åº”ä½¿ç”¨ Mapã€‚</p>
<p><strong>é”™è¯¯ (æ¯æ¬¡æŸ¥æ‰¾ O(n))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrders</span>(<span class="hljs-params">orders: Order[], users: User[]</span>) {
  <span class="hljs-keyword">return</span> orders.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">order</span> =&gt;</span> ({
    ...order,
    <span class="hljs-attr">user</span>: users.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">id</span> === order.<span class="hljs-property">userId</span>)
  }))
}
</code></pre>
<p><strong>æ­£ç¡® (æ¯æ¬¡æŸ¥æ‰¾ O(1))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrders</span>(<span class="hljs-params">orders: Order[], users: User[]</span>) {
  <span class="hljs-keyword">const</span> userById = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(users.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> [u.<span class="hljs-property">id</span>, u]))

  <span class="hljs-keyword">return</span> orders.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">order</span> =&gt;</span> ({
    ...order,
    <span class="hljs-attr">user</span>: userById.<span class="hljs-title function_">get</span>(order.<span class="hljs-property">userId</span>)
  }))
}
</code></pre>
<p>æ„å»ºä¸€æ¬¡ Map (O(n))ï¼Œç„¶åæ‰€æœ‰æŸ¥æ‰¾éƒ½æ˜¯ O(1)ã€‚</p>
<p>å¯¹äº 1000 ä¸ªè®¢å• Ã— 1000 ä¸ªç”¨æˆ·ï¼š100ä¸‡æ¬¡æ“ä½œ â†’ 2000 æ¬¡æ“ä½œã€‚</p>
<h4 data-id="heading-43">7.3 åœ¨å¾ªç¯ä¸­ç¼“å­˜å±æ€§è®¿é—®</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘æŸ¥æ‰¾)</strong></p>
<p>åœ¨çƒ­è·¯å¾„ä¸­ç¼“å­˜å¯¹è±¡å±æ€§æŸ¥æ‰¾ã€‚</p>
<p><strong>é”™è¯¯ï¼š3 æ¬¡æŸ¥æ‰¾ Ã— N æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-title function_">process</span>(obj.<span class="hljs-property">config</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">value</span>)
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šæ€»è¿‡ 1 æ¬¡æŸ¥æ‰¾</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> value = obj.<span class="hljs-property">config</span>.<span class="hljs-property">settings</span>.<span class="hljs-property">value</span>
<span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
  <span class="hljs-title function_">process</span>(value)
}
</code></pre>
<h4 data-id="heading-44">7.4 ç¼“å­˜é‡å¤å‡½æ•°è°ƒç”¨</h4>
<p><strong>å½±å“åŠ›: ä¸­ (é¿å…å†—ä½™è®¡ç®—)</strong></p>
<p>å½“åœ¨æ¸²æŸ“æœŸé—´ä½¿ç”¨ç›¸åŒçš„è¾“å…¥é‡å¤è°ƒç”¨ç›¸åŒçš„å‡½æ•°æ—¶ï¼Œä½¿ç”¨æ¨¡å—çº§ Map ç¼“å­˜å‡½æ•°ç»“æœã€‚</p>
<p><strong>é”™è¯¯ï¼šå†—ä½™è®¡ç®—</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ProjectList</span>(<span class="hljs-params">{ projects }: { projects: Project[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {projects.map(project =&gt; {
        // slugify() å¯¹ç›¸åŒçš„é¡¹ç›®åç§°è°ƒç”¨äº† 100+ æ¬¡
        const slug = slugify(project.name)
        
        return <span class="hljs-tag">&lt;<span class="hljs-name">ProjectCard</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{project.id}</span> <span class="hljs-attr">slug</span>=<span class="hljs-string">{slug}</span> /&gt;</span>
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¼“å­˜ç»“æœ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ¨¡å—çº§ç¼“å­˜</span>
<span class="hljs-keyword">const</span> slugifyCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">cachedSlugify</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">if</span> (slugifyCache.<span class="hljs-title function_">has</span>(text)) {
    <span class="hljs-keyword">return</span> slugifyCache.<span class="hljs-title function_">get</span>(text)!
  }
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">slugify</span>(text)
  slugifyCache.<span class="hljs-title function_">set</span>(text, result)
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProjectList</span>(<span class="hljs-params">{ projects }: { projects: Project[] }</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {projects.map(project =&gt; {
        // æ¯ä¸ªå”¯ä¸€çš„é¡¹ç›®åç§°ä»…è®¡ç®—ä¸€æ¬¡
        const slug = cachedSlugify(project.name)
        
        return <span class="hljs-tag">&lt;<span class="hljs-name">ProjectCard</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{project.id}</span> <span class="hljs-attr">slug</span>=<span class="hljs-string">{slug}</span> /&gt;</span>
      })}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>å•å€¼å‡½æ•°çš„æ›´ç®€å•æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">isLoggedInCache</span>: <span class="hljs-built_in">boolean</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isLoggedIn</span>(<span class="hljs-params"/>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-keyword">if</span> (isLoggedInCache !== <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> isLoggedInCache
  }
  
  isLoggedInCache = <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'auth='</span>)
  <span class="hljs-keyword">return</span> isLoggedInCache
}

<span class="hljs-comment">// èº«ä»½éªŒè¯æ›´æ”¹æ—¶æ¸…é™¤ç¼“å­˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">onAuthChange</span>(<span class="hljs-params"/>) {
  isLoggedInCache = <span class="hljs-literal">null</span>
}
</code></pre>
<p>ä½¿ç”¨ Mapï¼ˆè€Œä¸æ˜¯ hookï¼‰ï¼Œè¿™æ ·å®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å·¥ä½œï¼šå·¥å…·å‡½æ•°ã€äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯ React ç»„ä»¶ã€‚</p>
<p>å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-made-the-vercel-dashboard-twice-as-fast" target="_blank" title="https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></p>
<h4 data-id="heading-45">7.5 ç¼“å­˜ Storage API è°ƒç”¨</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘æ˜‚è´µçš„ I/O)</strong></p>
<p><code>localStorage</code>, <code>sessionStorage</code> å’Œ <code>document.cookie</code> æ˜¯åŒæ­¥ä¸”æ˜‚è´µçš„ã€‚åœ¨å†…å­˜ä¸­ç¼“å­˜è¯»å–ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡è°ƒç”¨éƒ½è¯»å–å­˜å‚¨</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getTheme</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'theme'</span>) ?? <span class="hljs-string">'light'</span>
}
<span class="hljs-comment">// è°ƒç”¨ 10 æ¬¡ = 10 æ¬¡å­˜å‚¨è¯»å–</span>
</code></pre>
<p><strong>æ­£ç¡®ï¼šMap ç¼“å­˜</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> storageCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLocalStorage</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (!storageCache.<span class="hljs-title function_">has</span>(key)) {
    storageCache.<span class="hljs-title function_">set</span>(key, <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key))
  }
  <span class="hljs-keyword">return</span> storageCache.<span class="hljs-title function_">get</span>(key)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">setLocalStorage</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, value)
  storageCache.<span class="hljs-title function_">set</span>(key, value)  <span class="hljs-comment">// ä¿æŒç¼“å­˜åŒæ­¥</span>
}
</code></pre>
<p>ä½¿ç”¨ Mapï¼ˆè€Œä¸æ˜¯ hookï¼‰ï¼Œè¿™æ ·å®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹å·¥ä½œï¼šå·¥å…·å‡½æ•°ã€äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸ä»…ä»…æ˜¯ React ç»„ä»¶ã€‚</p>
<p><strong>Cookie ç¼“å­˜ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">cookieCache</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCookie</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (!cookieCache) {
    cookieCache = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'; '</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-title function_">split</span>(<span class="hljs-string">'='</span>))
    )
  }
  <span class="hljs-keyword">return</span> cookieCache[name]
}
</code></pre>
<p><strong>é‡è¦ï¼šåœ¨å¤–éƒ¨æ›´æ”¹æ—¶å¤±æ•ˆ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'storage'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span>) storageCache.<span class="hljs-title function_">delete</span>(e.<span class="hljs-property">key</span>)
})

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">visibilityState</span> === <span class="hljs-string">'visible'</span>) {
    storageCache.<span class="hljs-title function_">clear</span>()
  }
})
</code></pre>
<p>å¦‚æœå­˜å‚¨å¯ä»¥åœ¨å¤–éƒ¨æ›´æ”¹ï¼ˆå¦ä¸€ä¸ªæ ‡ç­¾é¡µã€æœåŠ¡å™¨è®¾ç½®çš„ cookieï¼‰ï¼Œè¯·ä½¿ç¼“å­˜å¤±æ•ˆã€‚</p>
<h4 data-id="heading-46">7.6åˆå¹¶å¤šä¸ªæ•°ç»„è¿­ä»£</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (å‡å°‘è¿­ä»£)</strong></p>
<p>å¤šä¸ª <code>.filter()</code> æˆ– <code>.map()</code> è°ƒç”¨ä¼šå¤šæ¬¡è¿­ä»£æ•°ç»„ã€‚åˆå¹¶ä¸ºä¸€ä¸ªå¾ªç¯ã€‚</p>
<p><strong>é”™è¯¯ï¼š3 æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> admins = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isAdmin</span>)
<span class="hljs-keyword">const</span> testers = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> u.<span class="hljs-property">isTester</span>)
<span class="hljs-keyword">const</span> inactive = users.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">u</span> =&gt;</span> !u.<span class="hljs-property">isActive</span>)
</code></pre>
<p><strong>æ­£ç¡®ï¼š1 æ¬¡è¿­ä»£</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">admins</span>: <span class="hljs-title class_">User</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">testers</span>: <span class="hljs-title class_">User</span>[] = []
<span class="hljs-keyword">const</span> <span class="hljs-attr">inactive</span>: <span class="hljs-title class_">User</span>[] = []

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isAdmin</span>) admins.<span class="hljs-title function_">push</span>(user)
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">isTester</span>) testers.<span class="hljs-title function_">push</span>(user)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">isActive</span>) inactive.<span class="hljs-title function_">push</span>(user)
}
</code></pre>
<h4 data-id="heading-47">7.7 æ•°ç»„æ¯”è¾ƒå‰å…ˆæ£€æŸ¥é•¿åº¦</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (é¿å…é•¿åº¦ä¸åŒæ—¶çš„æ˜‚è´µæ“ä½œ)</strong></p>
<p>åœ¨é€šè¿‡æ˜‚è´µæ“ä½œï¼ˆæ’åºã€æ·±åº¦ç›¸ç­‰ã€åºåˆ—åŒ–ï¼‰æ¯”è¾ƒæ•°ç»„æ—¶ï¼Œå…ˆæ£€æŸ¥é•¿åº¦ã€‚å¦‚æœé•¿åº¦ä¸åŒï¼Œæ•°ç»„å°±ä¸å¯èƒ½ç›¸ç­‰ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå½“æ¯”è¾ƒè¿è¡Œåœ¨çƒ­è·¯å¾„ï¼ˆäº‹ä»¶å¤„ç†ç¨‹åºã€æ¸²æŸ“å¾ªç¯ï¼‰ä¸­æ—¶ï¼Œæ­¤ä¼˜åŒ–é€šè¿‡å°¤ä¸ºæœ‰ä»·å€¼ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ€»æ˜¯è¿è¡Œæ˜‚è´µçš„æ¯”è¾ƒ</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChanges</span>(<span class="hljs-params">current: <span class="hljs-built_in">string</span>[], original: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-comment">// å³ä½¿é•¿åº¦ä¸åŒï¼Œä¹Ÿæ€»æ˜¯è¿›è¡Œæ’åºå’Œè¿æ¥</span>
  <span class="hljs-keyword">return</span> current.<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">join</span>() !== original.<span class="hljs-title function_">sort</span>().<span class="hljs-title function_">join</span>()
}
</code></pre>
<p>å³ä½¿ <code>current.length</code> æ˜¯ 5 è€Œ <code>original.length</code> æ˜¯ 100ï¼Œä¹Ÿä¼šè¿è¡Œä¸¤æ¬¡ O(n log n) æ’åºã€‚è¿æ¥æ•°ç»„å’Œæ¯”è¾ƒå­—ç¬¦ä¸²ä¹Ÿæœ‰å¼€é”€ã€‚</p>
<p><strong>æ­£ç¡® (å…ˆè¿›è¡Œ O(1) é•¿åº¦æ£€æŸ¥)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">hasChanges</span>(<span class="hljs-params">current: <span class="hljs-built_in">string</span>[], original: <span class="hljs-built_in">string</span>[]</span>) {
  <span class="hljs-comment">// å¦‚æœé•¿åº¦ä¸åŒï¼Œæå‰è¿”å›</span>
  <span class="hljs-keyword">if</span> (current.<span class="hljs-property">length</span> !== original.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
  <span class="hljs-comment">// ä»…å½“é•¿åº¦åŒ¹é…æ—¶æ‰æ’åº/è¿æ¥</span>
  <span class="hljs-keyword">const</span> currentSorted = current.<span class="hljs-title function_">toSorted</span>()
  <span class="hljs-keyword">const</span> originalSorted = original.<span class="hljs-title function_">toSorted</span>()
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; currentSorted.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (currentSorted[i] !== originalSorted[i]) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p>è¿™ç§æ–°æ–¹æ³•æ›´é«˜æ•ˆï¼Œå› ä¸ºï¼š</p>
<ul>
<li>
<p>å½“é•¿åº¦ä¸åŒæ—¶ï¼Œå®ƒé¿å…äº†æ’åºå’Œè¿æ¥æ•°ç»„çš„å¼€é”€</p>
</li>
<li>
<p>å®ƒé¿å…äº†æ¶ˆè€—å†…å­˜æ¥è¿æ¥å­—ç¬¦ä¸²ï¼ˆå¯¹äºå¤§æ•°ç»„å°¤å…¶é‡è¦ï¼‰</p>
</li>
<li>
<p>å®ƒé¿å…äº†ä¿®æ”¹åŸå§‹æ•°ç»„</p>
</li>
<li>
<p>å‘ç°å·®å¼‚æ—¶æå‰è¿”å›</p>
</li>
</ul>
<h4 data-id="heading-48">7.8 å‡½æ•°æå‰è¿”å›</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (é¿å…ä¸å¿…è¦çš„è®¡ç®—)</strong></p>
<p>ç¡®å½“å®šç»“æœæ—¶æå‰è¿”å›ï¼Œä»¥è·³è¿‡ä¸å¿…è¦çš„å¤„ç†ã€‚</p>
<p><strong>é”™è¯¯ï¼šå³ä½¿æ‰¾åˆ°ç­”æ¡ˆä¹Ÿå¤„ç†æ‰€æœ‰é¡¹ç›®</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUsers</span>(<span class="hljs-params">users: User[]</span>) {
  <span class="hljs-keyword">let</span> hasError = <span class="hljs-literal">false</span>
  <span class="hljs-keyword">let</span> errorMessage = <span class="hljs-string">''</span>
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) {
      hasError = <span class="hljs-literal">true</span>
      errorMessage = <span class="hljs-string">'Email required'</span>
    }
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) {
      hasError = <span class="hljs-literal">true</span>
      errorMessage = <span class="hljs-string">'Name required'</span>
    }
    <span class="hljs-comment">// å³ä½¿å‘ç°é”™è¯¯ä¹Ÿç»§ç»­æ£€æŸ¥æ‰€æœ‰ç”¨æˆ·</span>
  }
  
  <span class="hljs-keyword">return</span> hasError ? { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: errorMessage } : { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> }
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šä¸€å‘ç°é”™è¯¯ç«‹å³è¿”å›</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUsers</span>(<span class="hljs-params">users: User[]</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'Email required'</span> }
    }
    <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'Name required'</span> }
    }
  }

  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> }
}
</code></pre>
<h4 data-id="heading-49">7.9 æå‡ RegExp åˆ›å»º</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (é¿å…é‡æ–°åˆ›å»º)</strong></p>
<p>ä¸è¦åœ¨ render å†…éƒ¨åˆ›å»º RegExpã€‚æå‡åˆ°æ¨¡å—ä½œç”¨åŸŸæˆ–ä½¿ç”¨ <code>useMemo()</code> è¿›è¡Œè®°å¿†åŒ–ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½åˆ›å»ºæ–°çš„ RegExp</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Highlighter</span>(<span class="hljs-params">{ text, query }: Props</span>) {
  <span class="hljs-keyword">const</span> regex = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">${query}</span>)`</span>, <span class="hljs-string">'gi'</span>)
  <span class="hljs-keyword">const</span> parts = text.<span class="hljs-title function_">split</span>(regex)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{parts.map((part, i) =&gt; ...)}<span class="hljs-tag">&lt;/&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šè®°å¿†åŒ–æˆ–æå‡</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">EMAIL_REGEX</span> = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Highlighter</span>(<span class="hljs-params">{ text, query }: Props</span>) {
  <span class="hljs-keyword">const</span> regex = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(<span class="hljs-string">`(<span class="hljs-subst">${escapeRegex(query)}</span>)`</span>, <span class="hljs-string">'gi'</span>),
    [query]
  )
  <span class="hljs-keyword">const</span> parts = text.<span class="hljs-title function_">split</span>(regex)
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;&gt;</span>{parts.map((part, i) =&gt; ...)}<span class="hljs-tag">&lt;/&gt;</span></span>
}
</code></pre>
<p><strong>è­¦å‘Šï¼šå…¨å±€ regex å…·æœ‰å¯å˜çŠ¶æ€</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/foo/g</span>
regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'foo'</span>)  <span class="hljs-comment">// true, lastIndex = 3</span>
regex.<span class="hljs-title function_">test</span>(<span class="hljs-string">'foo'</span>)  <span class="hljs-comment">// false, lastIndex = 0</span>
</code></pre>
<p>å…¨å±€ regex (<code>/g</code>) å…·æœ‰å¯å˜çš„ <code>lastIndex</code> çŠ¶æ€ã€‚</p>
<h4 data-id="heading-50">7.10 ä½¿ç”¨å¾ªç¯æ±‚æœ€å°/æœ€å¤§å€¼è€Œéæ’åº</h4>
<p><strong>å½±å“åŠ›: ä½ (O(n) è€Œé O(n log n))</strong></p>
<p>æŸ¥æ‰¾æœ€å°æˆ–æœ€å¤§å…ƒç´ åªéœ€è¦éå†æ•°ç»„ä¸€æ¬¡ã€‚æ’åºæ˜¯æµªè´¹ä¸”æ›´æ…¢çš„ã€‚</p>
<p><strong>é”™è¯¯ (O(n log n) - æ’åºä»¥æŸ¥æ‰¾æœ€æ–°)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Project</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">updatedAt</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getLatestProject</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">const</span> sorted = [...projects].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> b.<span class="hljs-property">updatedAt</span> - a.<span class="hljs-property">updatedAt</span>)
  <span class="hljs-keyword">return</span> sorted[<span class="hljs-number">0</span>]
}
</code></pre>
<p>ä»…ä¸ºäº†æŸ¥æ‰¾æœ€å¤§å€¼è€Œå¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€‚</p>
<p><strong>é”™è¯¯ (O(n log n) - æ’åºä»¥æŸ¥æ‰¾æœ€æ—§å’Œæœ€æ–°)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getOldestAndNewest</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">const</span> sorted = [...projects].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">updatedAt</span> - b.<span class="hljs-property">updatedAt</span>)
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">oldest</span>: sorted[<span class="hljs-number">0</span>], <span class="hljs-attr">newest</span>: sorted[sorted.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>] }
}
</code></pre>
<p>ä»…éœ€è¦æœ€å°/æœ€å¤§å€¼æ—¶ä»ç„¶ä¸å¿…è¦åœ°æ’åºã€‚</p>
<p><strong>æ­£ç¡® (O(n) - å•æ¬¡å¾ªç¯)ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getLatestProject</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">if</span> (projects.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  
  <span class="hljs-keyword">let</span> latest = projects[<span class="hljs-number">0</span>]
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; projects.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &gt; latest.<span class="hljs-property">updatedAt</span>) {
      latest = projects[i]
    }
  }
  
  <span class="hljs-keyword">return</span> latest
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getOldestAndNewest</span>(<span class="hljs-params">projects: Project[]</span>) {
  <span class="hljs-keyword">if</span> (projects.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> { <span class="hljs-attr">oldest</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">newest</span>: <span class="hljs-literal">null</span> }
  
  <span class="hljs-keyword">let</span> oldest = projects[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> newest = projects[<span class="hljs-number">0</span>]
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>; i &lt; projects.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &lt; oldest.<span class="hljs-property">updatedAt</span>) oldest = projects[i]
    <span class="hljs-keyword">if</span> (projects[i].<span class="hljs-property">updatedAt</span> &gt; newest.<span class="hljs-property">updatedAt</span>) newest = projects[i]
  }
  
  <span class="hljs-keyword">return</span> { oldest, newest }
}
</code></pre>
<p>å•æ¬¡éå†æ•°ç»„ï¼Œæ— å¤åˆ¶ï¼Œæ— æ’åºã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šMath.min/Math.max ç”¨äºå°æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">8</span>, <span class="hljs-number">1</span>, <span class="hljs-number">9</span>]
<span class="hljs-keyword">const</span> min = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(...numbers)
<span class="hljs-keyword">const</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...numbers)
</code></pre>
<p>è¿™å¯¹äºå°æ•°ç»„æœ‰æ•ˆï¼Œä½†å¯¹äºéå¸¸å¤§çš„æ•°ç»„ï¼Œç”±äºå±•å¼€è¿ç®—ç¬¦çš„é™åˆ¶ï¼Œå¯èƒ½ä¼šæ›´æ…¢ã€‚ä¸ºäº†å¯é æ€§ï¼Œå»ºè®®ä½¿ç”¨å¾ªç¯æ–¹æ³•ã€‚</p>
<h4 data-id="heading-51">7.11 ä½¿ç”¨ Set/Map è¿›è¡Œ O(1) æŸ¥æ‰¾</h4>
<p><strong>å½±å“åŠ›: ä¸­ä½ (O(n) -&gt; O(1))</strong></p>
<p>å°†æ•°ç»„è½¬æ¢ä¸º Set/Map ä»¥è¿›è¡Œé‡å¤çš„æˆå‘˜èº«ä»½æ£€æŸ¥ã€‚</p>
<p><strong>é”™è¯¯ (æ¯æ¬¡æ£€æŸ¥ O(n))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> allowedIds = [<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, ...]
items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> allowedIds.<span class="hljs-title function_">includes</span>(item.<span class="hljs-property">id</span>))
</code></pre>
<p><strong>æ­£ç¡® (æ¯æ¬¡æ£€æŸ¥ O(1))ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> allowedIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-string">'a'</span>, <span class="hljs-string">'b'</span>, <span class="hljs-string">'c'</span>, ...])
items.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> allowedIds.<span class="hljs-title function_">has</span>(item.<span class="hljs-property">id</span>))
</code></pre>
<h4 data-id="heading-52">7.12 ä½¿ç”¨ toSorted() ä»£æ›¿ sort() ä»¥ä¿è¯ä¸å¯å˜æ€§</h4>
<p><strong>å½±å“åŠ›: ä¸­é«˜ (é˜²æ­¢ React çŠ¶æ€ä¸­çš„å˜å¼‚ bug)</strong></p>
<p><code>.sort()</code> ä¼šåŸåœ°ä¿®æ”¹æ•°ç»„ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ React çŠ¶æ€å’Œ props å‡ºç° bugã€‚ä½¿ç”¨ <code>.toSorted()</code> åˆ›å»ºä¸€ä¸ªæ–°çš„æ’åºæ•°ç»„è€Œä¸è¿›è¡Œå˜å¼‚ã€‚</p>
<p><strong>é”™è¯¯ï¼šä¿®æ”¹åŸå§‹æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params">{ users }: { users: User[] }</span>) {
  <span class="hljs-comment">// ä¿®æ”¹äº† users prop æ•°ç»„ï¼</span>
  <span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> users.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">name</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">name</span>)),
    [users]
  )
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{sorted.map(renderUser)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šåˆ›å»ºæ–°æ•°ç»„</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params">{ users }: { users: User[] }</span>) {
  <span class="hljs-comment">// åˆ›å»ºæ–°çš„æ’åºæ•°ç»„ï¼ŒåŸå§‹æ•°ç»„æœªæ›´æ”¹</span>
  <span class="hljs-keyword">const</span> sorted = <span class="hljs-title function_">useMemo</span>(
    <span class="hljs-function">() =&gt;</span> users.<span class="hljs-title function_">toSorted</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">name</span>.<span class="hljs-title function_">localeCompare</span>(b.<span class="hljs-property">name</span>)),
    [users]
  )
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{sorted.map(renderUser)}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™åœ¨ React ä¸­å¾ˆé‡è¦ï¼š</strong></p>
<ol>
<li>
<p>Props/state å˜å¼‚æ‰“ç ´äº† React çš„ä¸å¯å˜æ€§æ¨¡å‹ - React æœŸæœ› props å’Œ state è¢«è§†ä¸ºåªè¯»</p>
</li>
<li>
<p>å¯¼è‡´é—­åŒ…é™·é˜± bug - åœ¨é—­åŒ…ï¼ˆå›è°ƒã€effectsï¼‰å†…ä¿®æ”¹æ•°ç»„å¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸º</p>
</li>
</ol>
<p><strong>æµè§ˆå™¨æ”¯æŒï¼šæ—§ç‰ˆæµè§ˆå™¨å›é€€</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—§ç‰ˆæµè§ˆå™¨çš„å›é€€</span>
<span class="hljs-keyword">const</span> sorted = [...items].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a.<span class="hljs-property">value</span> - b.<span class="hljs-property">value</span>)
</code></pre>
<p><code>.toSorted()</code> åœ¨æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ˆChrome 110+, Safari 16+, Firefox 115+, Node.js 20+ï¼‰ä¸­å‡å¯ç”¨ã€‚å¯¹äºæ—§ç¯å¢ƒï¼Œä½¿ç”¨å±•å¼€è¿ç®—ç¬¦ã€‚</p>
<p><strong>å…¶ä»–ä¸å¯å˜æ•°ç»„æ–¹æ³•ï¼š</strong></p>
<ul>
<li>
<p><code>.toSorted()</code> - ä¸å¯å˜æ’åº</p>
</li>
<li>
<p><code>.toReversed()</code> - ä¸å¯å˜åè½¬</p>
</li>
<li>
<p><code>.toSpliced()</code> - ä¸å¯å˜æ‹¼æ¥</p>
</li>
<li>
<p><code>.with()</code> - ä¸å¯å˜å…ƒç´ æ›¿æ¢</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-53">8. é«˜çº§æ¨¡å¼</h3>
<p><strong>å½±å“åŠ›: ä½</strong></p>
<p>é’ˆå¯¹éœ€è¦è°¨æ…å®ç°çš„ç‰¹å®šæƒ…å†µçš„é«˜çº§æ¨¡å¼ã€‚</p>
<h4 data-id="heading-54">8.1 åœ¨ Refs ä¸­å­˜å‚¨äº‹ä»¶å¤„ç†ç¨‹åº</h4>
<p><strong>å½±å“åŠ›: ä½ (ç¨³å®šçš„è®¢é˜…)</strong></p>
<p>å½“åœ¨ä¸åº”å› å›è°ƒæ›´æ”¹è€Œé‡æ–°è®¢é˜…çš„ effect ä¸­ä½¿ç”¨æ—¶ï¼Œå°†å›è°ƒå­˜å‚¨åœ¨ refs ä¸­ã€‚</p>
<p><strong>é”™è¯¯ï¼šæ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowEvent</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, handler: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(event, handler)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(event, handler)
  }, [event, handler])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„è®¢é˜…</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useEffectEvent } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useWindowEvent</span>(<span class="hljs-params">event: <span class="hljs-built_in">string</span>, handler: () =&gt; <span class="hljs-built_in">void</span></span>) {
  <span class="hljs-keyword">const</span> onEvent = <span class="hljs-title function_">useEffectEvent</span>(handler)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(event, onEvent)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(event, onEvent)
  }, [event])
}
</code></pre>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼šå¦‚æœä½ ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆ Reactï¼Œè¯·ä½¿ç”¨ <code>useEffectEvent</code>ï¼š</strong></p>
<p><code>useEffectEvent</code> ä¸ºç›¸åŒçš„æ¨¡å¼æä¾›äº†æ›´æ¸…æ™°çš„ APIï¼šå®ƒåˆ›å»ºä¸€ä¸ªç¨³å®šçš„å‡½æ•°å¼•ç”¨ï¼Œè¯¥å¼•ç”¨å§‹ç»ˆè°ƒç”¨å¤„ç†ç¨‹åºçš„æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<h4 data-id="heading-55">8.2 ä½¿ç”¨ useLatest è·å–ç¨³å®šçš„å›è°ƒ Refs</h4>
<p><strong>å½±å“åŠ›: ä½ (é˜²æ­¢ effect é‡æ–°è¿è¡Œ)</strong></p>
<p>åœ¨ä¸å°†å€¼æ·»åŠ åˆ°ä¾èµ–æ•°ç»„çš„æƒ…å†µä¸‹è®¿é—®å›è°ƒä¸­çš„æœ€æ–°å€¼ã€‚é˜²æ­¢ effect é‡æ–°è¿è¡Œï¼ŒåŒæ—¶é¿å…é—­åŒ…é™·é˜±ã€‚</p>
<p><strong>å®ç°ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> useLatest&lt;T&gt;(<span class="hljs-attr">value</span>: T) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(value)
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    ref.<span class="hljs-property">current</span> = value
  }, [value])
  <span class="hljs-keyword">return</span> ref
}
</code></pre>
<p><strong>é”™è¯¯ï¼šåœ¨æ¯æ¬¡å›è°ƒæ›´æ”¹æ—¶é‡æ–°è¿è¡Œ effect</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchInput</span>(<span class="hljs-params">{ onSearch }: { onSearch: (q: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">onSearch</span>(query), <span class="hljs-number">300</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeout)
  }, [query, onSearch])
}
</code></pre>
<p><strong>æ­£ç¡®ï¼šç¨³å®šçš„ effectï¼Œæ–°é²œçš„å›è°ƒ</strong></p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchInput</span>(<span class="hljs-params">{ onSearch }: { onSearch: (q: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) {
  <span class="hljs-keyword">const</span> [query, setQuery] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>)
  <span class="hljs-keyword">const</span> onSearchRef = <span class="hljs-title function_">useLatest</span>(onSearch)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> onSearchRef.<span class="hljs-title function_">current</span>(query), <span class="hljs-number">300</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timeout)
  }, [query])
}
</code></pre>
<hr/>
<h3 data-id="heading-56">å‚è€ƒèµ„æ–™</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev" target="_blank" title="https://react.dev" ref="nofollow noopener noreferrer">react.dev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnextjs.org" target="_blank" title="https://nextjs.org" ref="nofollow noopener noreferrer">nextjs.org</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fswr.vercel.app" target="_blank" title="https://swr.vercel.app" ref="nofollow noopener noreferrer">swr.vercel.app</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshuding%2Fbetter-all" target="_blank" title="https://github.com/shuding/better-all" ref="nofollow noopener noreferrer">github.com/shuding/betâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fisaacs%2Fnode-lru-cache" target="_blank" title="https://github.com/isaacs/node-lru-cache" ref="nofollow noopener noreferrer">github.com/isaacs/nodeâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-optimized-package-imports-in-next-js" target="_blank" title="https://vercel.com/blog/how-we-optimized-package-imports-in-next-js" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fvercel.com%2Fblog%2Fhow-we-made-the-vercel-dashboard-twice-as-fast" target="_blank" title="https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast" ref="nofollow noopener noreferrer">vercel.com/blog/how-weâ€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Monorepoå…¥é—¨]]></title>    <link>https://juejin.cn/post/7595878718172381220</link>    <guid>https://juejin.cn/post/7595878718172381220</guid>    <pubDate>2026-01-17T16:35:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172381220" data-draft-id="7593212374921117723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Monorepoå…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-17T16:35:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Hyyy"/> <meta itemprop="url" content="https://juejin.cn/user/2673667942934333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Monorepoå…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2673667942934333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Hyyy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T16:35:32.000Z" title="Sat Jan 17 2026 16:35:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. Monorepo ä»‹ç»</h2>
<blockquote>
<p>æ ¸å¿ƒä»·å€¼ï¼š<strong>æŠŠâ€œéœ€è¦ä¸€èµ·æ¼”è¿›çš„ä¸€ç»„é¡¹ç›®â€æ”¾åœ¨åŒä¸€ä¸ªç‰ˆæœ¬ç©ºé—´é‡Œ</strong>ï¼Œä»è€Œè®©è·¨é¡¹ç›®æ”¹åŠ¨ï¼ˆAPI å˜æ›´ã€é‡æ„ã€å‡çº§ï¼‰èƒ½åœ¨ä¸€æ¬¡æäº¤é‡Œå®Œæˆå¹¶éªŒè¯</p>
</blockquote>
<p>Monorepo æ˜¯æŠŠå¤šä¸ªç›¸å…³é¡¹ç›®/åŒ…æ”¾åœ¨åŒä¸€ä¸ª Git ä»“åº“ä¸­ç®¡ç†çš„<strong>ç­–ç•¥</strong>ï¼Œæœ‰åŠ©äºè·¨é¡¹ç›®è”åŠ¨ä¿®æ”¹ã€å†…éƒ¨åŒ…å…±äº«æ›´é¡ºç•…ã€ç»Ÿä¸€è§„èŒƒä¸ CIã€ç‰ˆæœ¬æ§åˆ¶ã€æ„å»ºå’Œéƒ¨ç½²ç­‰æ–¹é¢çš„å¤æ‚æ€§ï¼Œå¹¶æä¾›æ›´å¥½çš„å¯é‡ç”¨æ€§å’Œåä½œæ€§ã€‚</p>
<p>Monorepo æå€¡äº†å¼€æ”¾ã€é€æ˜ã€å…±äº«çš„ç»„ç»‡æ–‡åŒ–ï¼Œè¿™ç§æ–¹æ³•å·²ç»è¢«å¾ˆå¤šå¤§å‹å…¬å¸å¹¿æ³›ä½¿ç”¨ï¼Œå¦‚ Googleã€Facebook å’Œ Microsoft ç­‰ã€‚</p>
<h2 data-id="heading-1">2. Monorepo æ¼”è¿›</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54fbc99a045243dc845a2f3a73d80f36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHl5eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769273310&amp;x-signature=N9tx7UWbYq8mCFWk19GSAD3Q5F8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">2.1 é˜¶æ®µä¸€ï¼šå•ä»“åº“å·¨çŸ³åº”ç”¨(Monolith)</h3>
<p>åˆæœŸå¾ˆçˆ½ï¼šä¸€ä¸ªä»“åº“ã€ä¸€ä¸ª package.jsonã€ä¸€ä¸ª node_modulesã€ä¸€ä¸ªæ„å»ºæµç¨‹,ä½†éšç€è¿­ä»£ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œé¡¹ç›®ä»£ç ä¼šå˜å¾—è¶Šæ¥è¶Šå¤šï¼Œè¶Šæ¥è¶Šå¤æ‚ï¼Œå¤§é‡ä»£ç æ„å»ºæ•ˆç‡ä¹Ÿä¼šé™ä½ï¼Œæœ€ç»ˆå¯¼è‡´äº†å•ä½“å·¨çŸ³åº”ç”¨ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º Monolithã€‚</p>
<p>é—®é¢˜åœ¨äºï¼šä¸šåŠ¡ä¸€æ—¦å˜å¤§ï¼Œå°±å®¹æ˜“å‡ºç°ï¼š</p>
<ul>
<li>æ¨¡å—è¾¹ç•Œä¸æ¸…æ™°ã€æ”¹åŠ¨å½±å“èŒƒå›´è¶Šæ¥è¶Šå¤§</li>
<li>æ„å»º/æµ‹è¯•å˜æ…¢</li>
<li>å¤šäººåä½œå†²çªå¤š</li>
</ul>
<p>äºæ˜¯å›¢é˜Ÿä¼šè‡ªç„¶æƒ³åˆ°ï¼šâ€œæ‹†å¼€â€ï¼Œæ•…æ­¤è¿æ¥é˜¶æ®µäºŒã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„ Monolith æ˜¯â€œä¸€ä¸ªåº”ç”¨è¶Šé•¿è¶Šå¤§â€ã€‚å®ƒå’Œåé¢çš„ Monorepoï¼ˆå¤šä¸ªåŒ…/é¡¹ç›®åŒä»“ï¼‰ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µã€‚</p>
</blockquote>
<h3 data-id="heading-3">2.2 é˜¶æ®µäºŒï¼šå¤šä»“åº“å¤šæ¨¡å—åº”ç”¨</h3>
<p>æŠŠç³»ç»Ÿæ‹†æˆå¤šä¸ªä»“åº“ï¼ˆä¾‹å¦‚ï¼šç»„ä»¶åº“ä»“åº“ã€ä¸šåŠ¡ A ä»“åº“ã€ä¸šåŠ¡ B ä»“åº“ï¼‰ï¼Œä¼šå¸¦æ¥ç«‹ç«¿è§å½±çš„æ”¶ç›Šï¼š</p>
<ul>
<li>æ¯ä¸ªä»“åº“æ›´å°ã€owner æ›´æ˜ç¡®ã€æƒé™æ›´æ¸…æ™°</li>
<li>æ¯ä¸ªæ¨¡å—å¯ä»¥ç‹¬ç«‹å‘ç‰ˆ</li>
<li>å•ä»“åº“çš„ CI çœ‹èµ·æ¥æ›´å¿«ï¼ˆåªè·‘è‡ªå·±çš„ï¼‰</li>
</ul>
<p>ä»£ç ç®¡ç†å˜å¾—ç®€åŒ–ï¼Œæ„å»ºæ•ˆç‡ä¹Ÿå¾—ä»¥æå‡ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º MultiRepoã€‚</p>
<p>ä½†å½“ä»“åº“è¶Šæ¥è¶Šå¤šï¼Œæ–°çš„æˆæœ¬ä¹Ÿä¼šè¶Šæ¥è¶Šæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>è”åŠ¨ä¿®æ”¹å¾ˆéš¾â€œåŸå­åŒ–â€</strong>ï¼šæ”¹ç»„ä»¶åº“ API åï¼Œä½ éœ€è¦å‘å¸ƒç»„ä»¶åº“ï¼Œç„¶åä¸šåŠ¡ä»“åº“åˆ†åˆ«å‡çº§ã€åˆ†åˆ«ä¿®ã€åˆ†åˆ«è·‘ CIã€‚</li>
<li><strong>ç‰ˆæœ¬åŒæ­¥é“¾è·¯å˜é•¿</strong>ï¼šåº•å±‚åº“å‡çº§ï¼Œä¸Šå±‚ä¸€å †ä»“åº“è¦è·Ÿç€å‡çº§éªŒè¯ã€‚</li>
<li><strong>å·¥ç¨‹é…ç½®å®¹æ˜“æ¼‚ç§»</strong>ï¼šeslint/tsconfig/æ„å»ºè„šæœ¬åœ¨å¤šä¸ªä»“åº“é€æ¸ä¸ä¸€è‡´ï¼Œæ²»ç†éš¾åº¦ä¸Šå‡ã€‚</li>
</ul>
<p>è¿™æ—¶å€™å›¢é˜Ÿä¼šæ„è¯†åˆ°ï¼šæ‹†ä»“åº“è§£å†³äº†å±€éƒ¨è‡ªæ²»ï¼Œä½†æ”¾å¤§äº†â€œåä½œä¸ä¸€è‡´æ€§â€çš„æˆæœ¬ã€‚</p>
<h3 data-id="heading-4">2.3 é˜¶æ®µä¸‰ï¼šå•ä»“åº“å¤šæ¨¡å—åº”ç”¨</h3>
<p>éšç€ä¸šåŠ¡å¤æ‚åº¦çš„æå‡ï¼Œæ¨¡å—ä»“åº“è¶Šæ¥è¶Šå¤šï¼ŒMultiRepoè¿™ç§æ–¹å¼è™½ç„¶ä»ä¸šåŠ¡ä¸Šè§£è€¦äº†ï¼Œä½†å¢åŠ äº†é¡¹ç›®å·¥ç¨‹ç®¡ç†çš„éš¾åº¦ï¼Œéšç€æ¨¡å—ä»“åº“è¾¾åˆ°ä¸€å®šæ•°é‡çº§ï¼Œä¼šæœ‰å‡ ä¸ªé—®é¢˜ï¼šè·¨ä»“åº“ä»£ç éš¾å…±äº«ï¼›åˆ†æ•£åœ¨å•ä»“åº“çš„æ¨¡å—ä¾èµ–ç®¡ç†å¤æ‚ï¼ˆåº•å±‚æ¨¡å—å‡çº§åï¼Œå…¶ä»–ä¸Šå±‚ä¾èµ–éœ€è¦åŠæ—¶æ›´æ–°ï¼Œå¦åˆ™æœ‰é—®é¢˜ï¼‰ï¼›å¢åŠ äº†æ„å»ºè€—æ—¶ã€‚äºæ˜¯å°†å¤šä¸ªé¡¹ç›®é›†æˆåˆ°ä¸€ä¸ªä»“åº“ä¸‹ï¼Œå…±äº«å·¥ç¨‹é…ç½®ï¼ŒåŒæ—¶åˆå¿«æ·åœ°å…±äº«æ¨¡å—ä»£ç ï¼Œæˆä¸ºè¶‹åŠ¿ï¼Œè¿™ç§ä»£ç ç®¡ç†æ–¹å¼ç§°ä¹‹ä¸º Monorepoã€‚</p>
<p>å½“â€œè·¨ä»“åº“è”åŠ¨æˆæœ¬â€è¶…è¿‡æ”¶ç›Šæ—¶ï¼ŒMonorepo å°±å˜å¾—æœ‰å¸å¼•åŠ›ï¼š</p>
<ul>
<li>æ”¹å…¬å…±åŒ… + æ”¹æ‰€æœ‰ä½¿ç”¨æ–¹ï¼Œå¯ä»¥åœ¨ä¸€ä¸ª PR ä¸€æ¬¡æ€§å®Œæˆå¹¶éªŒè¯</li>
<li>é…ç½®é›†ä¸­åŒ–ï¼Œå·¥ç¨‹è§„èŒƒæ›´æ˜“ç»Ÿä¸€</li>
<li>å…¬å…±èƒ½åŠ›æ›´å®¹æ˜“æ²‰æ·€æˆ packagesï¼Œå‡å°‘å¤åˆ¶ç²˜è´´å’Œé‡å¤é€ è½®å­</li>
</ul>
<p>å½“ç„¶ï¼ŒMonorepo ä¹Ÿä¸æ˜¯æ²¡æœ‰ä»£ä»·ï¼š</p>
<ul>
<li>ä»“åº“ä¼šå˜å¤§ï¼ˆcloneã€ç´¢å¼•ã€IDE è´Ÿæ‹…ä¸Šå‡ï¼‰</li>
<li>å¦‚æœæ²¡æœ‰â€œæŒ‰å½±å“èŒƒå›´æ‰§è¡Œï¼ˆaffectedï¼‰+ ç¼“å­˜â€ï¼ŒCI å¯èƒ½ä¼šå˜æ…¢ï¼‰</li>
</ul>
<h2 data-id="heading-5">3. Monorepo ä¼˜åŠ£</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d82bbb2d96149a386ffd438a16d6aef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHl5eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769273310&amp;x-signature=sQWKrYZ6Na4bIob%2BAX6gUhD7B6g%3D" alt="image.png" loading="lazy"/></p>








































<table><thead><tr><th><strong>åœºæ™¯</strong></th><th><strong>MultiRepo</strong></th><th><strong>MonoRepo</strong></th></tr></thead><tbody><tr><td>ä»£ç å¯è§æ€§</td><td>âœ… ä»£ç éš”ç¦»ï¼Œç ”å‘è€…åªéœ€å…³æ³¨è‡ªå·±è´Ÿè´£çš„ä»“åº“<br/> âŒ åŒ…ç®¡ç†æŒ‰ç…§å„è‡ªowneråˆ’åˆ†ï¼Œå½“å‡ºç°é—®é¢˜æ—¶ï¼Œéœ€è¦åˆ°ä¾èµ–åŒ…ä¸­è¿›è¡Œåˆ¤æ–­å¹¶è§£å†³ã€‚</td><td>âœ… ä¸€ä¸ªä»“åº“ä¸­å¤šä¸ªç›¸å…³é¡¹ç›®ï¼Œå¾ˆå®¹æ˜“çœ‹åˆ°æ•´ä¸ªä»£ç åº“çš„å˜åŒ–è¶‹åŠ¿ï¼Œæ›´å¥½çš„å›¢é˜Ÿåä½œã€‚ <br/>âŒ å¢åŠ äº†éowneræ”¹åŠ¨ä»£ç çš„é£é™©</td></tr><tr><td>ä¾èµ–ç®¡ç†</td><td>âŒ å¤šä¸ªä»“åº“éƒ½æœ‰è‡ªå·±çš„ node_modulesï¼Œå­˜åœ¨ä¾èµ–é‡å¤å®‰è£…æƒ…å†µï¼Œå ç”¨ç£ç›˜å†…å­˜å¤§ã€‚</td><td>âœ… å¤šé¡¹ç›®ä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œç›¸åŒç‰ˆæœ¬ä¾èµ–æå‡åˆ°é¡¶å±‚åªå®‰è£…ä¸€æ¬¡ï¼ŒèŠ‚çœç£ç›˜å†…å­˜ï¼Œ</td></tr><tr><td>ä»£ç æƒé™</td><td>âœ… å„é¡¹ç›®å•ç‹¬ä»“åº“ï¼Œä¸ä¼šå‡ºç°ä»£ç è¢«è¯¯æ”¹çš„æƒ…å†µï¼Œå•ä¸ªé¡¹ç›®å‡ºç°é—®é¢˜ä¸ä¼šå½±å“å…¶ä»–é¡¹ç›®ã€‚</td><td>âŒ å¤šä¸ªé¡¹ç›®ä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œæ²¡æœ‰é¡¹ç›®ç²’åº¦çš„æƒé™ç®¡æ§ï¼Œä¸€ä¸ªé¡¹ç›®å‡ºé—®é¢˜ï¼Œå¯èƒ½å½±å“æ‰€æœ‰é¡¹ç›®ã€‚(</td></tr><tr><td>å¼€å‘è¿­ä»£</td><td>âœ… ä»“åº“ä½“ç§¯å°ï¼Œæ¨¡å—åˆ’åˆ†æ¸…æ™°ï¼Œå¯ç»´æŠ¤æ€§å¼ºã€‚ <br/>âŒ å¤šä»“åº“æ¥å›åˆ‡æ¢ï¼ˆç¼–è¾‘å™¨åŠå‘½ä»¤è¡Œï¼‰ï¼Œé¡¹ç›®å¤šçš„è¯æ•ˆç‡å¾ˆä½ã€‚å¤šä»“åº“è§å­˜åœ¨ä¾èµ–æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨ <code>npm link</code>ï¼Œæ“ä½œç¹çã€‚ <br/>âŒ ä¾èµ–ç®¡ç†ä¸ä¾¿ï¼Œå¤šä¸ªä¾èµ–å¯èƒ½åœ¨å¤šä¸ªä»“åº“ä¸­å­˜åœ¨ä¸åŒç‰ˆæœ¬ï¼Œé‡å¤å®‰è£…ï¼Œnpm link æ—¶ä¸åŒé¡¹ç›®çš„ä¾èµ–ä¼šå­˜åœ¨å†²çªã€‚</td><td>âœ… å¤šä¸ªé¡¹ç›®éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œå¯çœ‹åˆ°ç›¸å…³é¡¹ç›®å…¨è²Œï¼Œç¼–ç éå¸¸æ–¹ä¾¿ã€‚ <br/>âœ… ä»£ç å¤ç”¨é«˜ï¼Œæ–¹ä¾¿è¿›è¡Œä»£ç é‡æ„ã€‚ <br/>âŒ å¤šé¡¹ç›®åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œä»£ç ä½“ç§¯å¤šå¤§å‡ ä¸ª Gï¼Œ<code>git clone</code>æ—¶é—´è¾ƒé•¿ã€‚ <br/>âœ… ä¾èµ–è°ƒè¯•æ–¹ä¾¿ï¼Œä¾èµ–åŒ…è¿­ä»£åœºæ™¯ä¸‹ï¼Œå€ŸåŠ©å·¥å…·è‡ªåŠ¨ npm linkï¼Œç›´æ¥ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä¾èµ–ï¼Œç®€åŒ–äº†æ“ä½œæµç¨‹ã€‚</td></tr><tr><td>å·¥ç¨‹é…ç½®</td><td>âŒ å„é¡¹ç›®æ„å»ºã€æ‰“åŒ…ã€ä»£ç æ ¡éªŒéƒ½å„è‡ªç»´æŠ¤ï¼Œä¸ä¸€è‡´æ—¶ä¼šå¯¼è‡´ä»£ç å·®å¼‚æˆ–æ„å»ºå·®å¼‚ã€‚</td><td>âœ… å¤šé¡¹ç›®åœ¨ä¸€ä¸ªä»“åº“ï¼Œå·¥ç¨‹é…ç½®ä¸€è‡´ï¼Œä»£ç è´¨é‡æ ‡å‡†åŠé£æ ¼ä¹Ÿå¾ˆå®¹æ˜“ä¸€è‡´ã€‚</td></tr><tr><td>æ„å»ºéƒ¨ç½²</td><td>âŒ å¤šä¸ªé¡¹ç›®é—´å­˜åœ¨ä¾èµ–ï¼Œéƒ¨ç½²æ—¶éœ€è¦æ‰‹åŠ¨åˆ°ä¸åŒçš„ä»“åº“æ ¹æ®å…ˆåé¡ºåºå»ä¿®æ”¹ç‰ˆæœ¬åŠè¿›è¡Œéƒ¨ç½²ï¼Œæ“ä½œç¹çæ•ˆç‡ä½ã€‚</td><td>âœ… æ„å»ºæ€§ Monorepo å·¥å…·å¯ä»¥é…ç½®ä¾èµ–é¡¹ç›®çš„æ„å»ºä¼˜å…ˆçº§ï¼Œå¯ä»¥å®ç°ä¸€æ¬¡å‘½ä»¤å®Œæˆæ‰€æœ‰çš„éƒ¨ç½²ã€‚</td></tr></tbody></table>
<h2 data-id="heading-6">4. Monorepo åœºæ™¯</h2>
<p><strong>åœºæ™¯ä¸€</strong>ï¼šå¤§å‹é¡¹ç›®ä¸å¤šé¡¹ç›®åä½œ</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šä¼ä¸šæˆ–å›¢é˜Ÿç»´æŠ¤å¤šä¸ªç´§å¯†å…³è”çš„é¡¹ç›®ï¼ˆå¦‚å‰ç«¯ã€åç«¯ã€å·¥å…·åº“ç­‰ï¼‰ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé›†ä¸­ç®¡ç†ä»£ç ï¼Œæ–¹ä¾¿è·¨é¡¹ç›®ä¿®æ”¹å’Œåä½œï¼Œé¿å…ä»£ç åˆ†æ•£å¯¼è‡´çš„é‡å¤åŠ³åŠ¨ã€‚</li>
</ul>
<hr/>
<p><strong>åœºæ™¯äºŒ</strong>ï¼šå…±äº«ä»£ç ä¸ä¾èµ–</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šå¤šä¸ªé¡¹ç›®å…±ç”¨ç»„ä»¶åº“ã€å·¥å…·å‡½æ•°æˆ–é…ç½®ï¼ˆå¦‚ UI ç»„ä»¶ã€é€šç”¨ SDKï¼‰ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šç›´æ¥å¼•ç”¨å†…éƒ¨æ¨¡å—ï¼Œé¿å…å¤šä»“åº“çš„ç‰ˆæœ¬åŒæ­¥é—®é¢˜ï¼Œç¡®ä¿ä¾èµ–ä¸€è‡´æ€§ã€‚</li>
</ul>
<hr/>
<p><strong>åœºæ™¯ä¸‰</strong>ï¼šç»Ÿä¸€æ„å»ºä¸æŒç»­é›†æˆï¼ˆCI/CDï¼‰</p>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šéœ€è¦æ ‡å‡†åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æµç¨‹ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé›†ä¸­é…ç½® CI/CDï¼Œä»…é’ˆå¯¹å˜æ›´éƒ¨åˆ†è§¦å‘æ„å»ºï¼ˆå¢é‡æ„å»ºï¼‰ï¼Œæå‡æ•ˆç‡ã€‚</li>
</ul>
<hr/>
<p><strong>ä½•æ—¶è°¨æ…ä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li><strong>ä»£ç é‡è¿‡å¤§</strong>ï¼šéœ€è¦è€ƒè™‘æ„å»ºæ€§èƒ½ã€ä»£ç å¯ç»´æŠ¤æ€§</li>
<li><strong>æƒé™ç®¡ç†å¤æ‚</strong>ï¼šéœ€ç»†åŒ–ç›®å½•æƒé™æ§åˆ¶</li>
<li><strong>å›¢é˜Ÿç‹¬ç«‹æ€§é«˜</strong>ï¼šè‹¥å­å›¢é˜Ÿé«˜åº¦è‡ªæ²»ï¼Œå¤šä»“åº“å¯èƒ½æ›´çµæ´»</li>
</ul>
<h2 data-id="heading-7">5. Monorepo å·¥å…·</h2>
<p>åœ¨é‡‡ç”¨ Monorepoï¼ˆå•ä¸€ä»“åº“ï¼‰æ¶æ„çš„è½¯ä»¶å¼€å‘ä¸­ï¼Œå·¥å…·çš„é€‰æ‹©æ˜¯è‡³å…³é‡è¦çš„ã€‚åˆé€‚çš„ Monorepo å·¥å…·èƒ½å¤Ÿå¸®åŠ©å›¢é˜Ÿæ›´é«˜æ•ˆåœ°ç®¡ç†å¤§è§„æ¨¡ä»£ç åº“ã€æå‡ååŒå¼€å‘ä½“éªŒä»¥åŠä¼˜åŒ–æ„å»ºå’Œéƒ¨ç½²æµç¨‹ã€‚</p>
<p>ç›´è‡³ 2026 å¹´å¹´åˆï¼Œç›®å‰åœ¨å‰ç«¯ç•Œæ¯”è¾ƒæµè¡Œçš„ Monorepo å·¥å…·æœ‰ <code>Pnpm Workspaces</code>ã€<code>Yarn Workspaces</code>ã€<code>npm Workspaces</code>ã€<code>Rush</code>ã€<code>Turborepo</code>ã€<code>Yalc</code>ã€å’Œ <code>Nx</code></p>
<h3 data-id="heading-8">5.1 <strong>ä¾èµ–ç®¡ç†å·¥å…·</strong></h3>
<p><strong>æ²¡æœ‰ workspace/å·¥å…·é“¾æ—¶</strong>ï¼šA åŒ…è¦ç”¨ B åŒ…ï¼Œåªèƒ½Â <code>npm link</code>ã€å¤åˆ¶ä»£ç ã€æˆ–èµ°ç›¸å¯¹/ç»å¯¹è·¯å¾„ï¼Œéå¸¸åˆ«æ‰­ä¸”å®¹æ˜“é”™ã€‚</p>
<p>è´Ÿè´£â€œæ€ä¹ˆå®‰è£…ä¾èµ–ã€æ€ä¹ˆæŠŠ workspace åŒ…é“¾æ¥èµ·æ¥â€</p>
<p><strong>pnpm workspace æ˜¯åŒ…ç®¡ç†å™¨å±‚é¢çš„å·¥ä½œåŒºèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æ”¯æŒ monorepo å†…éƒ¨åŒ…ä¹‹é—´ç”¨â€œåŒ…åâ€äº’ç›¸ä¾èµ–ï¼ˆä¸æ˜¯è·¯å¾„å¼•ç”¨ï¼‰ï¼Œå¹¶è‡ªåŠ¨é“¾æ¥åˆ°æœ¬åœ°æºç </li>
<li>pnpm æœ‰å…¨å±€çš„å†…å®¹å­˜å‚¨ï¼ˆstoreï¼‰ï¼Œä¸åŒé¡¹ç›®/ä¸åŒ workspace ä¹‹é—´å¯ä»¥å¤ç”¨åŒç‰ˆæœ¬ä¾èµ–ï¼›å†é€šè¿‡é“¾æ¥æŠŠä¾èµ–ç»„ç»‡åˆ°å„åŒ…çš„ node_modules ç»“æ„ä¸­ã€‚ï¼šç›´è§‚æ•ˆæœï¼šåŒä¸€ä¸ªä¾èµ–ä¸éœ€è¦åœ¨ N ä¸ªåœ°æ–¹å¤åˆ¶ N ä»½ã€‚</li>
<li>ä¾èµ–å®‰è£…æ›´å¿«ã€æ›´çœç©ºé—´ï¼ˆå…¨å±€ store å¤ç”¨ + é“¾æ¥ï¼‰</li>
<li>é»˜è®¤ä¾èµ–éš”ç¦»æ›´ä¸¥æ ¼ï¼Œå¯æ˜¾è‘—å‡å°‘â€œå¹½çµä¾èµ–â€</li>
</ul>
<p><strong>å¼ºçƒˆæ¨èä½¿ç”¨</strong><code>Pnpm Workspaces</code> <strong>ä½œä¸º Monorepo é¡¹ç›®çš„ä¾èµ–ç®¡ç†å·¥å…·</strong>ğŸ˜ğŸ˜ğŸ˜</p>
<ul>
<li><strong>pnpm</strong>ï¼šé€šè¿‡å…¨å±€ store + é“¾æ¥æ–¹å¼ï¼Œé€šå¸¸<strong>æ—¢çœç©ºé—´åˆæ›´ä¸¥æ ¼</strong>ã€‚</li>
</ul>
<h4 data-id="heading-9">5.1.1 é¿å…å¹½çµä¾èµ–</h4>
<p>npm/yarn å®‰è£…ä¾èµ–æ—¶ï¼Œå­˜åœ¨ä¾èµ–æå‡ï¼ŒæŸä¸ªé¡¹ç›®ä½¿ç”¨çš„ä¾èµ–ï¼Œå¹¶æ²¡æœ‰åœ¨å…¶ package.json ä¸­å£°æ˜ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œè¿™ç§ç°è±¡ç§°ä¹‹ä¸º â€œå¹½çµä¾èµ–â€ï¼›éšç€é¡¹ç›®è¿­ä»£ï¼Œè¿™ä¸ªä¾èµ–ä¸å†è¢«å…¶ä»–é¡¹ç›®ä½¿ç”¨ï¼Œä¸å†è¢«å®‰è£…ï¼Œä½¿ç”¨å¹½çµä¾èµ–çš„é¡¹ç›®ï¼Œä¼šå› ä¸ºæ— æ³•æ‰¾åˆ°ä¾èµ–è€ŒæŠ¥é”™ï¼Œè€Œ pnpm å½»åº•è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>æ‰€è°“å¹½çµä¾èµ–ï¼Œå¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>æŸä¸ªåŒ…æ²¡æœ‰åœ¨è‡ªå·±çš„ package.json å£°æ˜ä¾èµ–ï¼Œä½†å› ä¸ºå®‰è£…ç»“æ„/æå‡ç­‰åŸå› ï¼Œä»£ç ä¾ç„¶èƒ½ import åˆ°å®ƒï¼Œç›´åˆ°æŸå¤©ä¾èµ–ç»“æ„å˜åŒ–æ‰çªç„¶æŠ¥é”™ã€‚</p>
</blockquote>
<p>pnpm é»˜è®¤å¯¹ä¾èµ–è®¿é—®æ›´ä¸¥æ ¼ï¼Œèƒ½æ›´æ—©æš´éœ²â€œæœªå£°æ˜å´åœ¨ä½¿ç”¨â€çš„é—®é¢˜ï¼Œè®©é”™è¯¯æ›´æ—©å‡ºç°ã€å®šä½æ›´å®¹æ˜“ã€‚</p>
<h5 data-id="heading-10">ä»€ä¹ˆæ˜¯å¹½çµä¾èµ–</h5>
<p>å…ˆæé—®ï¼šä½ è§‰å¾—â€œä¸€ä¸ªåŒ…èƒ½ import æŸä¸ªä¾èµ–â€çš„å‰ææ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ­£å¸¸ç­”æ¡ˆåº”è¯¥æ˜¯ï¼š</p>
<blockquote>
<p>è¿™ä¸ªåŒ…çš„Â <code>package.json</code>Â é‡ŒÂ <strong>dependencies/devDependencies</strong>Â å£°æ˜äº†å®ƒã€‚</p>
</blockquote>
<p>å¹½çµä¾èµ–å°±æ˜¯ï¼š<strong>æ²¡å£°æ˜ï¼Œä½†å±…ç„¶è¿˜èƒ½ import å¹¶è¿è¡ŒæˆåŠŸ</strong>ã€‚</p>
<p>æœ€å°ä¾‹å­ï¼ˆç”¨ npm/yarn ç»å…¸å®‰è£…æ–¹å¼æ›´å®¹æ˜“å‡ºç°ï¼‰ï¼š</p>
<p>å‡è®¾æ˜¯ monorepoï¼š</p>
<ul>
<li>æ ¹Â <code>package.json</code>Â æ²¡æœ‰ lodash</li>
<li><code>packages/a/package.json</code>Â <strong>å£°æ˜äº†</strong>Â <code>lodash</code></li>
<li><code>packages/b/package.json</code>Â <strong>æ²¡å£°æ˜</strong>Â <code>lodash</code></li>
</ul>
<p>ä½†åœ¨Â <code>packages/b/src/index.ts</code>Â é‡Œå†™äº†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> _ <span class="hljs-keyword">from</span> <span class="hljs-string">"lodash"</span>;
</code></pre>
<p>åœ¨Â <strong>npm/yarnï¼ˆnode_modules æå‡/hoistï¼‰</strong> Â çš„æŸäº›å®‰è£…ç»“æœä¸‹ï¼Œ<code>lodash</code>Â å¯èƒ½è¢«â€œæå‡â€åˆ°äº†æ›´ä¸Šå±‚çš„Â <code>node_modules</code>ï¼Œå¯¼è‡´Â <code>b</code>Â è™½ç„¶æ²¡å£°æ˜ï¼Œä¹Ÿèƒ½â€œç¢°å·§â€æ‰¾åˆ° lodashï¼Œäºæ˜¯ï¼š</p>
<ul>
<li>å¼€å‘é˜¶æ®µï¼šä½ ä»¥ä¸ºæ²¡é—®é¢˜</li>
<li>æŸå¤© a åˆ é™¤äº† lodash æˆ–ç‰ˆæœ¬å˜åŒ–/å®‰è£…ç»“æ„å˜åŒ–ï¼šb çªç„¶å°±æŒ‚äº†</li>
</ul>
<p>è¿™å°±åƒï¼šä½ å®¶éš”å£æœ‰ä¸ªé”¤å­ï¼Œä½ æ²¡ä¹°ä½†ä½ ä¸€ç›´å»å€Ÿç”¨ï¼›ç›´åˆ°éš”å£æ¬å®¶ï¼Œä½ æ‰å‘ç°è‡ªå·±å…¶å®ä»æ¥æ²¡æ‹¥æœ‰å®ƒã€‚</p>
<h5 data-id="heading-11">ä¸ºä»€ä¹ˆ pnpm æ›´å®¹æ˜“é¿å…ï¼Ÿ</h5>
<p>pnpm çš„é»˜è®¤ç­–ç•¥æ›´â€œä¸¥æ ¼â€ï¼š</p>
<ul>
<li>æ¯ä¸ª package èƒ½è®¿é—®åˆ°çš„ä¾èµ–ï¼ŒåŸºæœ¬åªé™äºå®ƒå£°æ˜çš„é‚£ä¸€åœˆï¼ˆé€šè¿‡é“¾æ¥+éš”ç¦»ç»“æ„å®ç°ï¼‰</li>
<li>æ‰€ä»¥Â <strong>b æ²¡å£°æ˜ lodashï¼Œå°±æ›´å®¹æ˜“ç›´æ¥æŠ¥é”™</strong>ï¼ˆè¿™åè€Œæ˜¯å¥½äº‹ï¼šæ—©å‘ç°æ—©ä¿®ï¼‰</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ä½ å¯ä»¥å†™è¿›æ–‡ç« ï¼š</p>
<blockquote>
<p>å¹½çµä¾èµ–ï¼š<strong>æœªåœ¨å½“å‰åŒ…çš„ package.json å£°æ˜ï¼Œå´å› ä¸ºä¾èµ–æå‡ç­‰åŸå› åœ¨è¿è¡Œæ—¶èƒ½è¢«è§£æåˆ°çš„ä¾èµ–</strong>ï¼›pnpm é€šè¿‡æ›´ä¸¥æ ¼çš„ä¾èµ–éš”ç¦»ï¼Œèƒ½æ˜¾è‘—å‡å°‘è¿™ç±»é—®é¢˜ã€‚</p>
</blockquote>
<h4 data-id="heading-12">5.1.2 ä¾èµ–å®‰è£…è€—æ—¶é•¿</h4>
<p>MonoRepo ä¸­æ¯ä¸ªé¡¹ç›®éƒ½æœ‰è‡ªå·±çš„ package.json ä¾èµ–åˆ—è¡¨ï¼Œéšç€ MonoRepo ä¸­ä¾èµ–æ€»æ•°çš„å¢é•¿ï¼Œæ¯æ¬¡ <code>install</code> æ—¶ï¼Œè€—æ—¶ä¼šè¾ƒé•¿ã€‚ä½¿ç”¨ pnpm æŒ‰éœ€å®‰è£…åŠä¾èµ–ç¼“å­˜ï¼Œç›¸åŒç‰ˆæœ¬ä¾èµ–æå‡åˆ° Monorepo æ ¹ç›®å½•ä¸‹ï¼Œå‡å°‘å†—ä½™ä¾èµ–å®‰è£…ï¼›</p>
<p><strong>é‚£ä¹ˆ Monorepo ä¸åŒ…ç®¡ç†å·¥å…·ï¼ˆnpmã€yarnã€pnpmï¼‰ä¹‹é—´æ˜¯ä¸€ç§æ€æ ·çš„å…³ç³»ï¼Ÿ</strong></p>
<p>è¿™äº›åŒ…ç®¡ç†å·¥å…·ä¸ monorepo çš„å…³ç³»åœ¨äºï¼Œå®ƒä»¬å¯ä»¥ä¸º monorepo æä¾›ä¾èµ–å®‰è£…ä¸ä¾èµ–ç®¡ç†çš„æ”¯æŒï¼Œå€ŸåŠ©è‡ªèº«å¯¹ workspace çš„æ”¯æŒï¼Œå…è®¸åœ¨ monorepo ä¸­çš„ä¸åŒå­é¡¹ç›®ä¹‹é—´å…±äº«ä¾èµ–é¡¹ï¼Œå¹¶æä¾›ä¸€ç§ç®¡ç†è¿™äº›å…±äº«ä¾èµ–é¡¹çš„æ–¹å¼ï¼Œè¿™å¯ä»¥ç®€åŒ–ä¾èµ–é¡¹ç®¡ç†å’Œæ„å»ºè¿‡ç¨‹ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<h4 data-id="heading-13">5.1.3 æ„å»ºæ‰“åŒ…è€—æ—¶é•¿</h4>
<p><strong>é—®é¢˜</strong>ï¼šå¤šä¸ªé¡¹ç›®æ„å»ºä»»åŠ¡å­˜åœ¨ä¾èµ–æ—¶ï¼Œå¾€å¾€æ˜¯ä¸²è¡Œæ„å»º æˆ– å…¨é‡æ„å»ºï¼Œå¯¼è‡´æ„å»ºæ—¶é—´è¾ƒé•¿ï¼Œå¯ä»¥ä½¿ç”¨å¢é‡æ„å»ºï¼Œè€Œéå…¨é‡æ„å»ºï¼›ä¹Ÿå¯ä»¥å°†ä¸²è¡Œæ„å»ºï¼Œä¼˜åŒ–æˆå¹¶è¡Œæ„å»ºã€‚</p>
<p>npmã€yarnã€pnpm ç­‰æ˜¯ç”¨æ¥ç®¡ç†é¡¹ç›®ä¾èµ–ã€å‘å¸ƒåŒ…ã€å®‰è£…ä¾èµ–çš„å·¥å…·ï¼Œä»–ä»¬éƒ½æä¾›äº†å¯¹å·¥ä½œåŒºï¼ˆworkspaceï¼‰çš„æ”¯æŒï¼Œå…è®¸åœ¨å•ä¸ªä»£ç åº“ä¸­ç®¡ç†å¤šä¸ªé¡¹ç›®æˆ–åŒ…ã€‚è¿™ç§å·¥ä½œåŒºæ”¯æŒåœ¨å•ä¸ªä»£ç åº“ä¸­åŒæ—¶å¼€å‘ã€æµ‹è¯•å’Œç®¡ç†å¤šä¸ªçš„é¡¹ç›®ï¼Œè€Œæ— éœ€ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„ä»£ç ä»“åº“ã€‚</p>
<p>è¿™äº›åŒ…ç®¡ç†å·¥å…·ä¸ monorepo çš„å…³ç³»åœ¨äºä»–ä»¬å¯ä»¥ä¸º monorepo æä¾›ä¾èµ–å®‰è£…ä¸ä¾èµ–ç®¡ç†çš„æ”¯æŒï¼Œå€ŸåŠ©è‡ªèº«å¯¹workspaceçš„æ”¯æŒï¼Œå…è®¸åœ¨monorepoä¸­çš„ä¸åŒå­é¡¹ç›®ä¹‹é—´å…±äº«ä¾èµ–é¡¹ï¼Œå¹¶æä¾›ä¸€ç§ç®¡ç†è¿™äº›å…±äº«ä»¥æ¥æƒ³çš„æ–¹å¼ï¼Œè¿™å¯ä»¥ç®€åŒ–ä¾èµ–é¡¹ç®¡ç†å’Œæ„å»ºè¿‡ç¨‹ï¼Œå¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚</p>
<p>ç¡¬é“¾æ¥æŒ‡å‘åŒä¸€ä»½æ–‡ä»¶æ•°æ®ï¼Œå› æ­¤å¯ä»¥å¤ç”¨ç£ç›˜ç©ºé—´ã€‚</p>
<h3 data-id="heading-14">5.2 ä»»åŠ¡ç¼–æ’/æ„å»ºç³»ç»Ÿ</h3>
<p>è´Ÿè´£â€œæœ‰å“ªäº›ä»»åŠ¡è¦è·‘ã€å“ªäº›å¯ä»¥å¹¶è¡Œã€å“ªäº›å¯ä»¥è·³è¿‡ã€ç»“æœæ€ä¹ˆç¼“å­˜å¤ç”¨ï¼ˆå¢é‡æ„å»ºï¼‰â€</p>
<p><strong>æ²¡æœ‰ä»»åŠ¡ç¼–æ’/å¢é‡æ„å»ºæ—¶</strong>ï¼šä¸€ä¸ªä»“åº“å¤šä¸ªåŒ…ï¼Œä½† CI/æ„å»ºç»å¸¸åªèƒ½å…¨é‡è·‘ï¼Œæ…¢ï¼›å‘å¸ƒä¹Ÿéº»çƒ¦ã€‚</p>
<p><strong>Nx/Turborepo/Rush</strong></p>
<h2 data-id="heading-15">ç”¨ä¸€ä¸ªåœºæ™¯ç«‹åˆ»åŒºåˆ†ï¼šåªæ”¹äº† UI ç»„ä»¶åº“ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h2>
<p>å‡è®¾ monorepo é‡Œæœ‰ï¼š</p>
<ul>
<li><code>packages/ui</code>ï¼ˆç»„ä»¶åº“ï¼‰</li>
<li><code>apps/web</code>ï¼ˆä¸šåŠ¡ï¼‰</li>
<li><code>apps/admin</code></li>
</ul>
<p>æ”¹äº†Â <code>packages/ui/Button.tsx</code></p>
<ul>
<li><strong>pnpm workspace ä¼šåšä»€ä¹ˆï¼Ÿ</strong><br/>
è®©Â <code>apps/web</code>Â ä¾èµ–çš„Â <code>@repo/ui</code>Â æŒ‡å‘æœ¬ä»“åº“çš„ ui æºç ï¼ˆé“¾æ¥ï¼‰ï¼Œå¹¶ä¿è¯ä¾èµ–å®‰è£…æ­£ç¡®ã€è¾¹ç•Œæ›´ä¸¥æ ¼ã€‚</li>
<li><strong>turbo/nx ä¼šåšä»€ä¹ˆï¼Ÿ</strong><br/>
è®¡ç®—â€œå—å½±å“èŒƒå›´â€ï¼š<code>ui</code>Â å˜äº† â‡’Â <code>web/admin</code>Â å¯èƒ½éƒ½å—å½±å“<br/>
ç„¶ååªè·‘ï¼š<code>ui build</code>Â +Â <code>web build</code>Â +Â <code>admin build</code>ï¼ˆè€Œä¸æ˜¯å…¨ä»“åº“æ‰€æœ‰åŒ…éƒ½ buildï¼‰<br/>
å¹¶ä¸”èƒ½å¹¶è¡Œã€èƒ½ç¼“å­˜ã€‚</li>
</ul>
<h2 data-id="heading-16">6. æ€»ç»“</h2>
<ul>
<li>Monorepo å¹¶ä¸æ˜¯é“¶å¼¹ï¼Œè€Œæ˜¯ä¸€ç§æƒè¡¡å·¥ç¨‹ç®¡ç†ä¸é¡¹ç›®åä½œå¤æ‚æ€§çš„æœ€ä½³å®è·µä¹‹ä¸€ã€‚é€‚ç”¨äºé¡¹ç›®å…³è”ç´§å¯†ã€éœ€é¢‘ç¹è”åŠ¨ã€å¼ºè°ƒä¸€è‡´æ€§çš„ä¸­å¤§å‹å›¢é˜Ÿ/ä¼ä¸šã€‚</li>
<li>é€šè¿‡å¼•å…¥ç°ä»£çš„åŒ…ç®¡ç†å·¥å…·ï¼ˆå¦‚ pnpm workspaceï¼‰å’Œä»»åŠ¡ç¼–æ’ç³»ç»Ÿï¼ˆå¦‚ Turborepoã€Nxï¼‰ï¼ŒMonorepo ç®¡ç†çš„ä¼˜åŠ¿å¯ä»¥æœ€å¤§åŒ–ï¼ŒåŒæ—¶å‡è½»ä¾èµ–å’Œæ„å»ºä¸Šçš„å‹åŠ›ã€‚</li>
<li>é‡‡ç”¨ Monorepo å¯ä»¥ä¿ƒè¿›å›¢é˜Ÿåä½œã€ç»Ÿä¸€è§„èŒƒå’Œå¤ç”¨ä»£ç ï¼Œä½†ä¹Ÿéœ€ç•™æ„ä»“åº“å¢å¤§ã€æƒé™ç»†åŒ–ç­‰å®é™…æŒ‘æˆ˜ã€‚</li>
<li>æ˜¯å¦é‡‡çº³ Monorepoï¼Œéœ€ç»“åˆä¼ä¸šé¡¹ç›®è§„æ¨¡ã€å›¢é˜Ÿåä½œæ–¹å¼ã€åŸºç¡€è®¾æ–½æ”¯æŒç­‰å¤šæ–¹é¢å› ç´ ç»¼åˆè€ƒé‡ã€‚</li>
<li>æ€»ä¹‹ï¼Œåˆç†ç»„åˆå·¥å…·å’Œè§„èŒƒï¼Œæ‰èƒ½çœŸæ­£å‘æŒ¥ Monorepo çš„ä»·å€¼ï¼Œä¸ºå›¢é˜Ÿé™æœ¬å¢æ•ˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7596181746061819931</link>    <guid>https://juejin.cn/post/7596181746061819931</guid>    <pubDate>2026-01-17T15:03:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746061819931" data-draft-id="7595808703075172378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:03:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:03:42.000Z" title="Sat Jan 17 2026 15:03:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹è¯†åˆ«é¡¹ç›® [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜å¼•å…¥</h3>
<p>åœ¨æ™ºæ…§äº¤é€šä½“ç³»ä¸­ï¼Œâ€œçœ‹å¾—æ¸…ã€åˆ†å¾—å‡†ã€è·‘å¾—å¿«â€å§‹ç»ˆæ˜¯è§†è§‰æ„ŸçŸ¥ç³»ç»Ÿçš„æ ¸å¿ƒè¯‰æ±‚ã€‚ä¼ ç»ŸåŸºäºè§„åˆ™æˆ–ç‰¹å¾å·¥ç¨‹çš„æ–¹æ³•ï¼Œåœ¨å¤æ‚é“è·¯ç¯å¢ƒã€å¯†é›†è½¦æµã€å¤šè½¦å‹æ··è¡Œçš„åœºæ™¯ä¸‹ï¼Œå¾€å¾€å­˜åœ¨é²æ£’æ€§ä¸è¶³ã€ç»´æŠ¤æˆæœ¬é«˜çš„é—®é¢˜ã€‚</p>
<p>éšç€æ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æˆç†Ÿï¼Œ<strong>YOLO ç³»åˆ—</strong>é€æ¸æˆä¸ºäº¤é€šè§†è§‰é¢†åŸŸçš„ä¸»æµæ–¹æ¡ˆã€‚å…¶ä¸­ï¼ŒYOLOv8 ä»¥å…¶ <strong>Anchor-Free æ¶æ„ã€æ›´ä¼˜çš„é€Ÿåº¦â€“ç²¾åº¦å¹³è¡¡ä»¥åŠå®Œå–„çš„å·¥ç¨‹ç”Ÿæ€</strong>ï¼Œéå¸¸é€‚åˆç”¨äºå®æ—¶è½¦è¾†æ£€æµ‹ä¸ç³»ç»Ÿçº§è½åœ°ã€‚</p>
<p>æœ¬æ–‡å°†ä»å·¥ç¨‹å®è·µè§’åº¦ï¼Œå®Œæ•´ä»‹ç»ä¸€ä¸ª <strong>æ”¯æŒ 12 ç±»å¸¸è§äº¤é€šè½¦è¾†ã€å…·å¤‡å›¾å½¢åŒ–ç•Œé¢ã€å¯ç›´æ¥éƒ¨ç½²è¿è¡Œ</strong> çš„å®æ—¶æ£€æµ‹ç³»ç»Ÿè®¾è®¡ä¸å®ç°æ€è·¯ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e2ebe017e74133a8ad9c9618e21789~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=nmxlqQ8xV453QexV5Z0sCb6%2B3dI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1dwg5zCEkL%2F" target="_blank" title="https://www.bilibili.com/video/BV1dwg5zCEkL/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1dwâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb2ecd6f751242ca8e73eb51f14153c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=5ES3RyLpsd0Sr%2B7iqCANKnqr8IU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">äºŒã€ç³»ç»Ÿæ•´ä½“æ¶æ„è®¾è®¡</h3>
<p>è¯¥ç³»ç»Ÿå¹¶éä»…åœç•™åœ¨â€œæ¨¡å‹æ¨ç†â€å±‚é¢ï¼Œè€Œæ˜¯ä»¥<strong>å®Œæ•´åº”ç”¨ç³»ç»Ÿ</strong>ä¸ºç›®æ ‡è¿›è¡Œè®¾è®¡ï¼Œæ•´ä½“æ¶æ„å¯åˆ’åˆ†ä¸ºå››ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®è¾“å…¥å±‚ â”‚  â† å›¾ç‰‡ / è§†é¢‘ / æ‘„åƒå¤´ / æ–‡ä»¶å¤¹
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  æ£€æµ‹å¼•æ“å±‚ â”‚  â† YOLOv8 Detection Model
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  ç»“æœå¤„ç†å±‚ â”‚  â† NMS / ç½®ä¿¡åº¦è¿‡æ»¤ / å¯è§†åŒ–
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚
â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  UI äº¤äº’å±‚  â”‚  â† PyQt5 å›¾å½¢ç•Œé¢
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>è¿™ç§åˆ†å±‚ç»“æ„å…·å¤‡ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç®—æ³•ä¸ç•Œé¢è§£è€¦ï¼Œä¾¿äºæ¨¡å‹å‡çº§</li>
<li>è¾“å…¥æ–¹å¼å¯æ‰©å±•ï¼ˆæ— äººæœºã€RTSPæµç­‰ï¼‰</li>
<li>æ˜“äºäºŒæ¬¡å¼€å‘ä¸åŠŸèƒ½å åŠ </li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2541c2137d9340b7b5668011d599f9e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=zKcwJ6eTK3PkNCJwFObZe%2BL2V8c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06d8922a85684cddb9fb41fff6232b90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=ADKSDyddfx4wudkYvG3wYjHj84Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒåŠŸèƒ½èƒ½åŠ›è§£æ</h3>
<h4 data-id="heading-5">3.1 å¤šæºè¾“å…¥çš„ç»Ÿä¸€æ£€æµ‹æµç¨‹</h4>
<p>ç³»ç»Ÿæ”¯æŒå¤šç§æ•°æ®æºæ¥å…¥ï¼Œå¹¶ç»Ÿä¸€èµ°åŒä¸€å¥—æ£€æµ‹é€»è¾‘ï¼š</p>
<ul>
<li><strong>å•å¼ å›¾ç‰‡æ£€æµ‹</strong>ï¼šé€‚åˆç¦»çº¿åˆ†æä¸æµ‹è¯•</li>
<li><strong>æ–‡ä»¶å¤¹æ‰¹é‡æ£€æµ‹</strong>ï¼šç”¨äºæ•°æ®æ¸…æ´—ä¸æ ‡æ³¨æ ¡éªŒ</li>
<li><strong>è§†é¢‘æ–‡ä»¶æ£€æµ‹</strong>ï¼šé€‚é…é“è·¯ç›‘æ§å½•åƒ</li>
<li><strong>å®æ—¶æ‘„åƒå¤´æ£€æµ‹</strong>ï¼šæ»¡è¶³åœ¨çº¿ç›‘æ§éœ€æ±‚</li>
</ul>
<p>åœ¨åº•å±‚å®ç°ä¸Šï¼Œé€šè¿‡å¯¹è¾“å…¥æºè¿›è¡ŒæŠ½è±¡å°è£…ï¼Œç¡®ä¿æ¨¡å‹æ¨ç†é€»è¾‘ä¿æŒä¸€è‡´ï¼Œé¿å…é‡å¤ä»£ç ã€‚</p>
<hr/>
<h4 data-id="heading-6">3.2 å¤šè½¦å‹ç²¾ç»†åŒ–è¯†åˆ«</h4>
<p>æœ¬é¡¹ç›®é’ˆå¯¹çœŸå®äº¤é€šåœºæ™¯ï¼Œå®šä¹‰äº† <strong>12 ç±»å¸¸è§è½¦è¾†ç±»å‹</strong>ï¼Œæ¶µç›–ï¼š</p>
<ul>
<li>è½¿è½¦ã€SUVã€é¢åŒ…è½¦</li>
<li>å…¬äº¤è½¦ã€å¡è½¦ã€å·¥ç¨‹è½¦è¾†</li>
<li>ç‰¹æ®Šç”¨é€”è½¦è¾†ç­‰</li>
</ul>
<p>YOLOv8 çš„ Anchor-Free æœºåˆ¶åœ¨å¤šå°ºåº¦ç›®æ ‡ï¼ˆè¿œè·ç¦»å°è½¦ / è¿‘æ™¯å¤§è½¦ï¼‰æ£€æµ‹ä¸­è¡¨ç°ç¨³å®šï¼Œæœ‰æ•ˆé™ä½æ¼æ£€ä¸è¯¯æ£€ç‡ã€‚</p>
<hr/>
<h4 data-id="heading-7">3.3 PyQt5 å›¾å½¢åŒ–äº¤äº’ç³»ç»Ÿ</h4>
<p>ä¸ºäº†é™ä½ç³»ç»Ÿä½¿ç”¨é—¨æ§›ï¼Œå¼•å…¥ PyQt5 æ„å»ºæ¡Œé¢çº§åº”ç”¨ç•Œé¢ï¼Œæ ¸å¿ƒè®¾è®¡åŸåˆ™æ˜¯ï¼š</p>
<ul>
<li><strong>æ— éœ€ç¼–ç¨‹ç»éªŒå³å¯ä½¿ç”¨</strong></li>
<li><strong>æ“ä½œè·¯å¾„æ¸…æ™°</strong></li>
<li><strong>ç»“æœå¯è§†ã€å¯ä¿å­˜</strong></li>
</ul>
<p>ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>è¾“å…¥æºé€‰æ‹©ä¸åˆ‡æ¢</li>
<li>æ£€æµ‹å¯åŠ¨ / åœæ­¢æ§åˆ¶</li>
<li>å®æ—¶ç”»é¢æ˜¾ç¤ºï¼ˆå¸¦æ£€æµ‹æ¡†ï¼‰</li>
<li>æ£€æµ‹ç»“æœè‡ªåŠ¨ä¿å­˜</li>
</ul>
<p>è¿™ä½¿å¾—æ¨¡å‹èƒ½åŠ›çœŸæ­£è½¬åŒ–ä¸ºâ€œå¯ä½¿ç”¨çš„è½¯ä»¶â€ï¼Œè€Œä¸ä»…æ˜¯è„šæœ¬çº§ Demoã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ffa5f34e85e4453882fc86cc63af347f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=ZFeR%2FlQJliQZfNYaAzXYeruA5iI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-8">å››ã€YOLOv8 æ¨¡å‹è®­ç»ƒä¸è¯„ä¼°å®è·µ</h3>
<h4 data-id="heading-9">4.1 æ•°æ®é›†ç»„ç»‡è§„èŒƒ</h4>
<p>é¡¹ç›®é‡‡ç”¨æ ‡å‡† YOLO æ•°æ®æ ¼å¼ï¼Œä¾¿äºå¤ç”¨ä¸è¿ç§»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train
â”‚   â””â”€â”€ <span class="hljs-keyword">val</span>
â””â”€â”€ labels/
    â”œâ”€â”€ train
    â””â”€â”€ <span class="hljs-keyword">val</span>
</code></pre>
<p>æ ‡ç­¾æ–‡ä»¶é‡‡ç”¨å½’ä¸€åŒ–åæ ‡ï¼Œå…¼å®¹ Ultralytics å®˜æ–¹è®­ç»ƒæ¥å£ã€‚</p>
<hr/>
<h4 data-id="heading-10">4.2 æ¨¡å‹è®­ç»ƒç­–ç•¥</h4>
<p>è®­ç»ƒé˜¶æ®µåŸºäº YOLOv8 é¢„è®­ç»ƒæƒé‡è¿›è¡Œå¾®è°ƒï¼Œæ ¸å¿ƒå…³æ³¨ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šå®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šè½¦è¾†ç±»åˆ«åŒºåˆ†èƒ½åŠ›</li>
<li><strong>dfl_loss</strong>ï¼šè¾¹æ¡†è´¨é‡ä¼˜åŒ–</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå½“ <code>mAP@0.5</code> ç¨³å®šè¶…è¿‡ <strong>90%</strong>ï¼Œå³å¯æ»¡è¶³å·¥ç¨‹éƒ¨ç½²éœ€æ±‚ã€‚</p>
<hr/>
<h4 data-id="heading-11">4.3 æ¨ç†ä¸éƒ¨ç½²æ–¹å¼</h4>
<p>æ¨¡å‹æ¨ç†é€šè¿‡ Ultralytics å®˜æ–¹ API å®Œæˆï¼Œå…·å¤‡å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ¥å£ç®€æ´ï¼Œä»£ç é‡å°‘</li>
<li>æ”¯æŒ CPU / GPU è‡ªé€‚åº”</li>
<li>å¯å¯¼å‡º ONNX / TensorRT</li>
</ul>
<p>ç»“åˆ UI å±‚ï¼Œå¯ç›´æ¥å½¢æˆâ€œå³ç‚¹å³æ£€â€çš„å®Œæ•´å·¥ä½œæµã€‚</p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/34362c66872b4e30bed5fffb7d3b74df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=d7OtaSjGvbqvN%2FZvjFvDrqCAfkM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-12">äº”ã€å·¥ç¨‹åŒ–è½åœ°ä¸å¯æ‰©å±•æ€§</h3>
<p>ä¸å•çº¯ç®—æ³•å®éªŒä¸åŒï¼Œè¯¥é¡¹ç›®åœ¨å·¥ç¨‹å±‚é¢å…·å¤‡ä»¥ä¸‹å®ç”¨ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å®Œæ•´æºç ä¸æƒé‡æ‰“åŒ…</strong></li>
<li><strong>ä¸€è¡Œå‘½ä»¤å¯åŠ¨ç³»ç»Ÿ</strong></li>
<li><strong>è®­ç»ƒ / æ¨ç† / UI å…¨æµç¨‹è¦†ç›–</strong></li>
</ul>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå¯è¿›ä¸€æ­¥æ‹“å±•ï¼š</p>
<ul>
<li>è½¦è¾†è½¨è¿¹è·Ÿè¸ªï¼ˆDeepSORT / ByteTrackï¼‰</li>
<li>è½¦æµé‡ç»Ÿè®¡ä¸æ—¶é—´åºåˆ—åˆ†æ</li>
<li>å¤šè·¯æ‘„åƒå¤´å¹¶è¡Œæ£€æµ‹</li>
<li>æ™ºæ…§äº¤é€šå¹³å°å¯¹æ¥</li>
</ul>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7febb44e32eb4813aaa6098a95099315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=8%2BF%2BNSBgZSBRbFw2jXU6ueAcqwI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9935ddfd218347629e8def85c127113d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=Rrta6MsLZbuDxPGcuZGC1k6au%2Fw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">å…­ã€æ€»ç»“ä¸å±•æœ›</h3>
<p>æœ¬æ–‡ä»ç³»ç»Ÿè§†è§’å‡ºå‘ï¼Œå®Œæ•´ä»‹ç»äº†ä¸€å¥— <strong>åŸºäº YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹å¹³å°</strong> çš„è®¾è®¡ä¸å®ç°æ€è·¯ã€‚é€šè¿‡å°†é«˜æ€§èƒ½ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸ PyQt5 å›¾å½¢ç•Œé¢æ·±åº¦èåˆï¼Œå®ç°äº†ä»ç®—æ³•èƒ½åŠ›åˆ°å®é™…å¯ç”¨ç³»ç»Ÿçš„æœ‰æ•ˆè½¬åŒ–ã€‚</p>
<p>è¯¥é¡¹ç›®ä¸ä»…é€‚ç”¨äºæ™ºæ…§äº¤é€šä¸åŸå¸‚ç›‘æ§åœºæ™¯ï¼Œä¹Ÿéå¸¸é€‚åˆä½œä¸ºï¼š</p>
<ul>
<li>è®¡ç®—æœºè§†è§‰å·¥ç¨‹å®æˆ˜æ¡ˆä¾‹</li>
<li>AI æ•™å­¦ä¸ç§‘ç ”å®éªŒå¹³å°</li>
<li>å·¥ä¸šçº§è§†è§‰ç³»ç»ŸåŸå‹</li>
</ul>
<p>éšç€æ¨¡å‹ä¸ç®—åŠ›çš„æŒç»­æ¼”è¿›ï¼Œäº¤é€šè§†è§‰ç³»ç»Ÿå°†ä¸å†åªæ˜¯â€œçœ‹è§è½¦è¾†â€ï¼Œè€Œæ˜¯é€æ­¥èµ°å‘ <strong>ç†è§£äº¤é€šã€é¢„æµ‹äº¤é€šã€ä¼˜åŒ–äº¤é€š</strong>ã€‚è¿™ä¸€é¡¹ç›®ï¼Œæ­£æ˜¯è¿ˆå‘è¯¥ç›®æ ‡çš„ä¸€ä¸ªæ‰å®èµ·ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1086afe0b49248c497a5c87ff999dff4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267022&amp;x-signature=A8ORyXDlKWqYFNSXjJERYNxDS4A%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ¬æ–‡ä»å·¥ç¨‹åŒ–ä¸ç³»ç»ŸåŒ–çš„è§’åº¦ï¼Œä»‹ç»äº†ä¸€å¥—åŸºäº <strong>YOLOv8 çš„å¤šè½¦å‹äº¤é€šè½¦è¾†å®æ—¶æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œå®Œæ•´è¦†ç›–äº†æ•°æ®è¾“å…¥ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†éƒ¨ç½²ä»¥åŠ PyQt5 å›¾å½¢åŒ–äº¤äº’ç­‰å…³é”®ç¯èŠ‚ã€‚é€šè¿‡å°†é«˜ç²¾åº¦ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸æ˜“ç”¨çš„æ¡Œé¢ç«¯ç•Œé¢ç›¸ç»“åˆï¼Œç³»ç»Ÿå®ç°äº†å¯¹å¤šç§äº¤é€šåœºæ™¯ä¸‹è½¦è¾†ç›®æ ‡çš„ç¨³å®šè¯†åˆ«ä¸å®æ—¶å±•ç¤ºï¼Œæ˜¾è‘—é™ä½äº†æ·±åº¦å­¦ä¹ æŠ€æœ¯åœ¨æ™ºæ…§äº¤é€šé¢†åŸŸçš„ä½¿ç”¨é—¨æ§›ã€‚æ•´ä½“æ–¹æ¡ˆç»“æ„æ¸…æ™°ã€å¯æ‰©å±•æ€§å¼ºï¼Œä¸ä»…å…·å¤‡ç›´æ¥è½åœ°åº”ç”¨çš„å·¥ç¨‹ä»·å€¼ï¼Œä¹Ÿä¸ºåç»­åœ¨è½¦æµç»Ÿè®¡ã€è¡Œä¸ºåˆ†æå’Œäº¤é€šæ™ºèƒ½å†³ç­–ç­‰æ–¹å‘ä¸Šçš„åŠŸèƒ½æ‰©å±•æä¾›äº†è‰¯å¥½çš„æŠ€æœ¯åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„]]></title>    <link>https://juejin.cn/post/7595894884957536307</link>    <guid>https://juejin.cn/post/7595894884957536307</guid>    <pubDate>2026-01-17T15:09:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595894884957536307" data-draft-id="7596299957276966939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-17T15:09:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‘¸é±¼çš„æ˜¥å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1714893870865303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GPT-5.2 ä¸ƒå¤©â€œæ‰‹æ“â€Chromeï¼Œç¤¾åŒºè¯„ä»·ï¼šä¾æ‰˜å¤§çš„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893870865303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‘¸é±¼çš„æ˜¥å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:09:39.000Z" title="Sat Jan 17 2026 15:09:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨AIè¿™è¡Œï¼Œè¥é”€çš„æ²¹é—¨ï¼Œå¥½åƒæ€»æ¯”æŠ€æœ¯çš„è½®å­è¸©å¾—çŒ›ã€‚</p>
<p>æœ€è¿‘ï¼ŒCursorå›¢é˜Ÿï¼ˆç”±ä»–ä»¬çš„CEO Michael Truelläº²è‡ªæ¼”ç¤ºï¼‰å‘äº†ä¸€æ®µè§†é¢‘ï¼Œåœ¨ç§‘æŠ€åœˆé‡Œç®€ç›´ç‚¸å¼€äº†é”…ã€‚è§†é¢‘é‡Œè¯´ï¼Œä»–ä»¬ç”¨æœ€æ–°çš„GPT-5.2æ¨¡å‹ï¼Œé€šè¿‡ä¸€ä¸ªå«â€œShadowâ€çš„AIæ™ºèƒ½ä½“ï¼ŒåªèŠ±äº†7å¤©ï¼Œå°±è®©AIè‡ªå·±å†™äº†300ä¸‡è¡Œä»£ç ï¼Œä»é›¶åˆ°ä¸€æå‡ºäº†ä¸€ä¸ªâ€œChromeçº§åˆ«â€çš„ç°ä»£æµè§ˆå™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/031aaac6d8d1468d8f334b63da2543c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=I20ib5q478ypv2pd%2FNCGwVtEEEg%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªæ•…äº‹ï¼Œå‡ ä¹é›†é½äº†æ‰€æœ‰è®©æŠ•èµ„äººå’ŒæŠ€æœ¯å®…çƒ­è¡€æ²¸è…¾çš„å…ƒç´ ï¼šä¸çŸ¥ç–²å€¦çš„AIåŠ³å·¥ã€é£™å‡çš„ç”Ÿäº§åŠ›ï¼Œè¿˜æœ‰å¯¹äººç±»ç¼–ç¨‹å·¥ä½œçš„â€œé™ç»´æ‰“å‡»â€ã€‚ä½†å¦‚æœæˆ‘ä»¬å‰¥å¼€è¿™å±‚é‡‘å…‰é—ªé—ªçš„åŒ…è£…ï¼Œçœ‹åˆ°çš„çœŸçš„æ˜¯â€œå¥‡è¿¹â€å—ï¼Œè¿˜æ˜¯åªæ˜¯ä¸€åœºç²¾å¿ƒè®¾è®¡çš„â€œè°ƒåŒ…â€æˆæ³•ã€‚</p>
<h2 data-id="heading-0">ç¥è¯è¯ç”Ÿâ€”â€”è§†é¢‘é‡Œçš„â€œå¥‡è¿¹ä¸ƒå¤©â€</h2>
<p>åœ¨Cursorå›¢é˜ŸCEO Michael Truellçš„æ¼”ç¤ºé‡Œï¼Œæ•…äº‹è®²å¾—é‚£å«ä¸€ä¸ªå®å¤§ã€‚</p>
<p>Truellä»‹ç»äº†ä¸€ä¸ªå«â€œShadowâ€çš„AIæ™ºèƒ½ä½“ç³»ç»Ÿã€‚å®ƒå’Œä»¥å‰åªèƒ½è¡¥å‡ è¡Œä»£ç çš„Copilotå¯ä¸ä¸€æ ·ï¼Œè¢«æè¿°æˆä¸€ä¸ªå…¨è‡ªåŠ¨çš„è½¯ä»¶å·¥ç¨‹å¸ˆã€‚æ®è¯´å®ƒèƒ½ç†è§£åºå¤§çš„ä»£ç åº“ï¼Œæœ‰é•¿æœŸè®°å¿†ï¼Œè¿˜èƒ½è‡ªå·±è§„åˆ’ä»»åŠ¡ã€‚</p>
<p>æŒ‰ç…§è§†é¢‘çš„è¯´æ³•ï¼Œè¿™ä¸ªAIåœ¨7å¤©é‡Œå‡ ä¹æ²¡ä¼‘æ¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc1c040e2feb4e47ae8ab05f2c5c0dab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=zxiPR0IlF1t41PzIVII6AUz0qxo%3D" alt="" loading="lazy"/></p>
<p>å®ƒå…ˆè‡ªå·±æ‹¿ä¸»æ„ï¼Œå†³å®šéœ€è¦ä»€ä¹ˆæ¨¡å—ï¼Œè‡ªå·±è®¾è®¡æ¶æ„ã€‚æ¥ç€è‡ªå·±ä¿®Bugï¼Œé‡åˆ°ç¼–è¯‘é”™è¯¯æˆ–è€…é€»è¾‘é—®é¢˜ï¼Œå®ƒä¼šåƒäººä¸€æ ·å»çœ‹æŠ¥é”™ä¿¡æ¯ï¼Œç„¶åæ”¹ä»£ç ï¼Œç›´åˆ°è·‘é€šä¸ºæ­¢ã€‚æœ€ç»ˆäº§å‡ºäº†ä¸€ä¸ªå«<code>fastrender</code>çš„é¡¹ç›®ï¼Œæ®è¯´æœ‰300ä¸‡è¡Œä»£ç ã€‚è§†é¢‘ç”šè‡³æ˜é‡Œæš—é‡Œåœ°æš—ç¤ºï¼Œè¿™ä¸ªæµè§ˆå™¨å¤æ‚å¾—å¾ˆï¼ŒAIè¿HTMLè§£æå™¨ã€CSSå¸ƒå±€å¼•æ“ã€æ–‡æœ¬æ¸²æŸ“ç³»ç»Ÿéƒ½è‡ªå·±å†™äº†ï¼Œç”šè‡³è¿˜æå®šäº†ä¸€ä¸ªJavaScriptè™šæ‹Ÿæœºã€‚</p>
<p>æ¼”ç¤ºè€…çš„è¯é‡Œè¯å¤–éƒ½åœ¨è¡¨è¾¾ï¼Œè¿™ä¸ä»…ä»…æ˜¯ä¸ªæµè§ˆå™¨ï¼Œç®€ç›´æ˜¯AIè¦å–ä»£äººç±»ç¨‹åºå‘˜çš„â€œè½¬æŠ˜ç‚¹â€ã€‚å¬èµ·æ¥ï¼ŒAIå·²ç»ä¸å†æ˜¯è¾…åŠ©å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½ç‹¬ç«‹å®Œæˆä»è®¾è®¡åˆ°å®ç°å…¨è¿‡ç¨‹çš„â€œè¶…çº§åŒ…å·¥å¤´â€äº†ã€‚</p>
<h2 data-id="heading-1">æ³¡æ²«ç ´è£‚â€”â€”é™¤äº†èƒ¶æ°´ï¼Œå•¥ä¹Ÿä¸æ˜¯</h2>
<p>å¯æ˜¯ï¼Œå½“ç¤¾åŒºçš„å¼€å‘è€…ä»¬çœŸçš„å»çœ‹äº†ä»£ç ä»“åº“ï¼Œä¹Ÿå°±æ˜¯GitHubä¸Šçš„<code>wilsonzlin/fastrender</code>ï¼Œå°¤å…¶æ˜¯æ£€æŸ¥äº†é‚£ä¸ªå…³é”®çš„<code>Cargo.toml</code>ï¼ˆRusté¡¹ç›®çš„ä¾èµ–é…ç½®æ–‡ä»¶ï¼‰ä¹‹åï¼Œè¿™åœºâ€œé€ ç¥è¿åŠ¨â€ç«‹é©¬å˜æˆäº†ä¸€ä¸ªç¬‘è¯ã€‚</p>
<p>æ‰€è°“çš„â€œä»é›¶è‡ªç ”â€ï¼Œåœ¨äº‹å®é¢å‰æ ¹æœ¬ç«™ä¸ä½è„šã€‚</p>
<p>è§†é¢‘é‡Œå¹å¾—ç¥ä¹å…¶ç¥çš„â€œæ ¸å¿ƒåº•å±‚æŠ€æœ¯â€ï¼Œå…¶å®å…¨æ˜¯AIï¼Œä¹Ÿå°±æ˜¯GPT-5.2ï¼Œä»Rustå¼€æºç¤¾åŒºâ€œå€Ÿâ€æ¥çš„ç°æˆè½®å­ã€‚é‚£300ä¸‡è¡Œä»£ç ï¼Œç»å¤§éƒ¨åˆ†æ˜¯è¿™äº›ç¬¬ä¸‰æ–¹åº“çš„ï¼Œæˆ–è€…æ˜¯AIä¸ºäº†è°ƒç”¨è¿™äº›åº“è€Œå†™å‡ºæ¥çš„ã€è‡ƒè‚¿çš„â€œèƒ¶æ°´ä»£ç â€ã€‚</p>
<p>æ¥çœ‹çœ‹è¿™ä¸ªâ€œAIå¥‡è¿¹â€çš„çœŸé¢ç›®å§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0ca060ebca24d06a176e48f1660957e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pG46bG855qE5pil5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267379&amp;x-signature=Znk%2BSq5SGXfNTf91eP6kGqSvblc%3D" alt="" loading="lazy"/></p>
<p>å®ƒæ ¹æœ¬æ²¡å†™HTMLè§£æé€»è¾‘ï¼Œç›´æ¥è°ƒç”¨äº†<strong>Servoâ€˜s HTML parser</strong>ã€‚è¿™æ˜¯Mozillaï¼ˆç«ç‹èƒŒåçš„å›¢é˜Ÿï¼‰ä¸ºServoå¼•æ“è€•è€˜äº†åå‡ å¹´çš„æˆæœã€‚å®ƒä¹Ÿæ²¡å¤„ç†å¤æ‚çš„CSSæƒé‡å’ŒåŒ¹é…ï¼Œç”¨çš„æ˜¯<strong>Servoâ€˜s CSS parser</strong>å’Œ<strong>selectors</strong>åº“ã€‚å¯¹äºæµè§ˆå™¨æœ€éš¾çš„éƒ¨åˆ†JavaScriptå¼•æ“ï¼Œå®ƒç›´æ¥æŠŠ<strong>QuickJS</strong>ï¼ˆé€šè¿‡<code>rquickjs</code>ç»‘å®šï¼‰å¡è¿›å»äº†ï¼Œå‹æ ¹æ²¡å†™è™šæ‹Ÿæœºï¼Œåªæ˜¯å†™äº†ä¸ªâ€œå¯åŠ¨QuickJSâ€çš„å‡½æ•°ã€‚æ­¤å¤–ï¼ŒSVGæ¸²æŸ“é çš„æ˜¯<strong>resvg</strong>ï¼Œå›¾å½¢æ¸²æŸ“é çš„æ˜¯<strong>wgpu</strong>å’Œ<strong>tiny-skia</strong>ï¼ŒGUIç•Œé¢ç”¨çš„æ˜¯<strong>egui</strong>ï¼Œè€ŒWebSocketæ”¯æŒåˆ™ä¾èµ–<strong>tungstenite</strong>ã€‚</p>
<p>è¿™å°±åƒæœ‰äººå·ç§°è‡ªå·±â€œä¸ƒå¤©ä»é›¶é€ äº†è¾†æ³•æ‹‰åˆ©â€ï¼Œç»“æœå¤§å®¶å‘ç°ä»–åªæ˜¯ä¸Šç½‘ä¹°äº†æ³•æ‹‰åˆ©çš„å‘åŠ¨æœºã€ä¿æ—¶æ·çš„è½®å­ã€ç‰¹æ–¯æ‹‰çš„åº•ç›˜ï¼Œç„¶åç”¨èƒ¶å¸¦æŠŠå®ƒä»¬æ†åœ¨ä¸€å—ï¼Œæœ€åç»™å¤–å£³å–·äº†ä¸ªæ¼†ã€‚</p>
<h2 data-id="heading-2">ç¤¾åŒºçš„ç¾¤å˜²ï¼šä¸€å †æ²¡ç”¨çš„â€œä»£ç å±±â€</h2>
<p>è¿™ç§å·¥ç¨‹åœ¨æŠ€æœ¯åœˆé‡Œå¼•å‘äº†å¤§é‡çš„åæ§½ï¼Œå¤§å®¶æ™®éè§‰å¾—ï¼Œè¿™æ¬¡æ¼”ç¤ºä¸ä»…æ²¡è¯æ˜AIå¤šå‰å®³ï¼Œåè€Œæš´éœ²äº†ç°åœ¨å¤§è¯­è¨€æ¨¡å‹å†™ä»£ç çš„å¤§é—®é¢˜ã€‚</p>
<p>ç¤¾åŒºå¼€å‘è€…è°ƒä¾ƒè¯´ï¼Œå¦‚æœè¿™ä¹Ÿèƒ½å«â€œé€ æµè§ˆå™¨â€ï¼Œé‚£ä»»ä½•ä¸€ä¸ªå­¦è¿‡Rustçš„åˆçº§ç¨‹åºå‘˜ï¼Œåªè¦ä¼šç”¨<code>cargo add</code>å‘½ä»¤ï¼Œéƒ½èƒ½åœ¨åŠå¤©å†…â€œé€ â€å‡ºä¸€ä¸ªæ¥ã€‚AIå¹²çš„ä¸»è¦æ´»å„¿ï¼Œå°±æ˜¯ç”¨ä¸€ç§ä¸æ€ä¹ˆä¼˜é›…çš„æ–¹å¼ï¼ŒæŠŠè¿™äº›ç°æˆçš„ã€è®¾è®¡å¾—æŒºå¥½çš„åº“ç»™æ‹¼èµ·æ¥ã€‚</p>
<p>å®£ç§°çš„â€œ300ä¸‡è¡Œä»£ç â€æˆäº†æœ€å¤§çš„è®½åˆºã€‚å¯¹äºä¸€ä¸ªä¸»è¦èµ·è¿æ¥ä½œç”¨çš„é¡¹ç›®ï¼Œä»£ç è¶Šå¤šï¼Œé€šå¸¸æ„å‘³ç€å·¥ç¨‹è¶Šå·®ã€‚çœŸæ­£çš„å·¥ç¨‹å¸ˆè¿½æ±‚ç”¨æ›´å°‘çš„ä»£ç åšæ›´å¤šçš„äº‹ï¼ˆKISSåŸåˆ™ï¼‰ã€‚è€ŒAIç”Ÿæˆäº†ä¸€å¤§å †æ ·æ¿ä»£ç ã€é‡å¤çš„é€»è¾‘åˆ¤æ–­å’Œå†—ä½™çš„ç±»å‹è½¬æ¢ã€‚è¿™æ ¹æœ¬ä¸æ˜¯åŠŸåŠ³ï¼Œè€Œæ˜¯æŠ€æœ¯è´Ÿæ‹…ã€‚<strong>çƒ§äº†å‡ äº¿Tokenæ¢æ¥çš„ï¼Œæ˜¯ä¸€ä¸ªäººç±»æ²¡æ³•ç»´æŠ¤ã€æ²¡æ³•é˜…è¯»ã€ä¸€æ—¦ä¾èµ–åº“å‡çº§å°±å¯èƒ½å…¨ç›˜å´©æºƒçš„æ•°å­—åƒåœ¾åœºã€‚</strong></p>
<p>æµè§ˆå™¨çš„æ ¸å¿ƒéš¾ç‚¹ï¼Œæ¯”å¦‚DOMæ ‘çš„æ„å»ºã€å¤æ‚çš„æ¸²æŸ“æµæ°´çº¿ä¼˜åŒ–ã€JITç¼–è¯‘å™¨çš„å®‰å…¨æ€§ç­‰ç­‰ï¼ŒShadowä¸€ä¸ªéƒ½æ²¡è§£å†³ï¼Œå®ƒåªæ˜¯ç»•å¼€äº†ã€‚è¿™è¯´æ˜AIæ“…é•¿<strong>æœç´¢å’Œæ‹¼æ¥</strong>ï¼Œä½†æ ¹æœ¬ä¸å…·å¤‡<strong>ç³»ç»Ÿçº§çš„å·¥ç¨‹åˆ›æ–°èƒ½åŠ›</strong>ã€‚</p>
<h2 data-id="heading-3">å†™åœ¨æœ€å</h2>
<p>GPT-5.2çš„è¿™æ¬¡æ¼”ç¤ºï¼Œä¸å…¶è¯´æ˜¯å±•ç¤ºäº†AIçš„ç¼–ç¨‹å®åŠ›ï¼Œä¸å¦‚è¯´æ˜¯å±•ç¤ºäº†AIçš„â€œç”»é¥¼â€å®åŠ›ã€‚</p>
<p>å®ƒæ´»çµæ´»ç°åœ°æ¨¡ä»¿äº†ä¸€ä¸ªåªä¼šä¸œæŠ„æŠ„ã€è¥¿æŠ„æŠ„ï¼Œç„¶åæŠŠä»£ç é‡å †å¾—è€é«˜æ¥ç³Šå¼„äººçš„æ™®é€šç¨‹åºå‘˜ã€‚å¯¹èµ„æœ¬å¸‚åœºæ¥è¯´ï¼Œè¿™æˆ–è®¸æ˜¯ä¸ªå¥½å¬çš„æ•…äº‹ï¼›ä½†å¯¹è®¤çœŸçš„è½¯ä»¶å·¥ç¨‹æ¥è¯´ï¼Œè¿™åªæ˜¯ä¸€æ¬¡æ—¢æµªè´¹é’±åˆæ²¡å•¥æ„ä¹‰çš„æŠ˜è…¾ã€‚</p>
<p>æˆ‘ä»¬ä¸éœ€è¦AIç”¨300ä¸‡è¡Œä»£ç æŠŠåˆ«äººçš„æˆæœé‡æ–°åŒ…è£…ä¸€éï¼Œæˆ‘ä»¬æ›´å¸Œæœ›å®ƒèƒ½ç”¨30è¡Œä»£ç è§£å†³ä¸€ä¸ªäººç±»æƒ³äº†å¾ˆä¹…çš„éš¾é¢˜ã€‚å¾ˆå¯æƒœï¼Œè¿™ä¸€æ¬¡ï¼Œå®ƒäº¤å‡ºçš„æ˜¯ä¸€ä»½ä¸åŠæ ¼çš„ç­”å·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼]]></title>    <link>https://juejin.cn/post/7595878718172332068</link>    <guid>https://juejin.cn/post/7595878718172332068</guid>    <pubDate>2026-01-17T15:13:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172332068" data-draft-id="7595878718172282916" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:13:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArcGIS Pro æ·»åŠ åº•å›¾çš„æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:13:44.000Z" title="Sat Jan 17 2026 15:13:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<h2 data-id="heading-1">å‰è¨€</h2>
<blockquote>
<p>â</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œ<code>ArcGIS Pro</code>ä¸­æ¥è‡ª<code>ESRI</code>å…¬å¸çš„åº•å›¾è¢«å°ç¦äº†ï¼Œè™½ç„¶ä½¿ç”¨å¤©åœ°å›¾æ•°æ®æºè¿›è¡Œäº†æ›¿æ¢ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ€»æ„Ÿè§‰å·®ç‚¹å„¿æ„æ€ï¼Œä¸é‚£ä¹ˆè®©äººèˆ’æœã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯å¦æƒ³åŠæ³•æŠŠ<code>ESRI</code>åŸåº•å›¾ç»™åŠ è¿›æ¥ã€‚</p>
</blockquote>
<p>ä¹‹å‰é€šè¿‡<code>Map</code>èœå•ä¸‹çš„<code>Basemap</code>é€‰é¡¹ä¾¿å¯ä»¥ç›´æ¥æ·»åŠ åº•å›¾ï¼Œä¾¿æ·åˆçœåŠ›ã€‚å¯æ¶çš„æ˜¯æˆ‘çš„åº•å›¾è¿™é‡Œç«Ÿç„¶æ˜¯ç©ºç©ºå¦‚ä¹Ÿï¼Œè¿å¤©åœ°å›¾ä¹Ÿæ¶ˆå¤±ä¸è§ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13edd8473754456d9a2411cd05240b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=jWHQpC3CbDvIm39mrND8kiIINFw%3D" alt="" loading="lazy"/></p>
<p>è¿˜æ˜¯å¾—è‡ªç«‹æ›´ç”Ÿå•Šã€‚å»ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œå¥½å¤šæ–‡ç« æ¯”è¾ƒè€ï¼Œæ¨èçš„æ•°æ®æºåœ°å€è¿˜æ˜¯ï¼š<code>https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer</code></p>
<p>ç»“æœç»™æˆ‘æ­»æ´»éƒ½åŠ è½½ä¸äº†ï¼Œæµè§ˆå™¨ä¹Ÿæ— æ³•è®¿é—®ï¼Œæ‰“å¼€å‘½ä»¤è¡Œæµ‹è¯•ä¸€ä¸‹åŸŸåæ˜¯å¦èƒ½å¤Ÿè”é€šã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76168b986dc44d5bad427e1c815cd42a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=6KGpZMGx%2BfgHE4TvP4Cy6mETgIo%3D" alt="" loading="lazy"/>å¥½å®¶ä¼™ï¼Œç›´æ¥è¯·æ±‚è¶…æ—¶äº†ï¼Œä¼°è®¡æ˜¯åŸŸåæ¢äº†ï¼Œç»§ç»­é‡æ–°æ‰¾èµ„æºã€‚</p>
<p>è¿™æ˜¯æ–°çš„æœåŠ¡åœ°å€ï¼ŒåŸæ¥åŸŸåç”±ä»¥å‰çš„<code>services</code>æ”¹ä¸º<code>server</code>äº†ã€‚</p>
<p><code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb54d0e158e64ca59f3aa98fbc62f87d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=pvGgccKWIm392x9HaxBkJJLd%2FlE%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥pingé€šï¼Œç»§ç»­åœ¨æµè§ˆå™¨é‡Œé¢æµ‹è¯•ä¸€ä¸‹çœ‹çœ‹æ˜¯å¦èƒ½æ­£å¸¸æ‰“å¼€ï¼Œç»éªŒè¯æ˜¯å¯ä»¥ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1473f5ce8c094a7891217dac18bced2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=R9y%2FMfbAeRn3GsJq%2F%2BNXNkexZbA%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨<code>ArcGIS API</code>é¢„è§ˆä¸€ä¸‹æœåŠ¡ï¼Œå‘ç°éƒ½æ˜¯<code>ok</code>çš„ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a3b2ea299a548c2b2737ff1bc304e01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=TQQFzYJIiTviOk7J%2BoWkAfFZ2%2Fk%3D" alt="" loading="lazy"/></p>
<p>é‚£ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>ArcGIS Pro</code>æ¥è¿æ¥ä¸€ä¸‹åœ¨çº¿æœåŠ¡äº†ã€‚</p>
<h2 data-id="heading-2">1. é€šè¿‡ArcGIS Serveræ·»åŠ </h2>
<p>å…ˆæŒ‰ç…§ä»¥ä¸‹å››æ­¥è¿›è¡Œæ“ä½œï¼š</p>
<p><strong>(1)ã€</strong> ç‚¹å‡»èœå•æ <code>Insert</code>æŒ‰é’®</p>
<p><strong>(2)ã€</strong> æ‰“å¼€<code>Connections</code>ä¸‹æ‹‰èœå•</p>
<p><strong>(3)ã€</strong> é€‰æ‹©<code>Server</code>é€‰é¡¹</p>
<p><strong>(4)ã€</strong> æœ€åç‚¹å‡»å³ä¾§<code>New ArcGIS Server</code><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebff546103ea48c2962418fdaa62c333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=J7M2Ih0Qybh0hAwTZ2je0VdjE50%3D" alt="" loading="lazy"/></p>
<p>åœ¨æ·»åŠ æœåŠ¡å¯¹è¯æ¡†ä¸­è¾“å…¥åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code>ï¼Œç„¶åç‚¹å‡»<code>OK</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/825a092584154062a514a488a2b05a47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=%2F61Moa3tIOzzkDCIjwcY4XjPjqM%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ç›®å½•ä¸­çš„<code>Servers</code>é€‰é¡¹ï¼Œç„¶åé€‰æ‹©æ·»åŠ çš„æœåŠ¡é“¾æ¥å³å¯æŸ¥çœ‹æ·»åŠ çš„æœåŠ¡ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51fba7cf3cd343089be420de5bf562c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=LuoKAmJ2nVH4Vuez2tHkbzVMIkg%3D" alt="" loading="lazy"/></p>
<p>åœ¨ä½ è¦æ·»åŠ æœåŠ¡ä¸Šå³é”®ï¼Œå¯ä»¥é€‰æ‹©å°†å›¾å±‚æ·»åŠ åˆ°å½“å‰åœ°å›¾æˆ–è€…æ·»åŠ æ–°åœ°å›¾ã€åœºæ™¯ã€‚ä¹Ÿå¯ä»¥ç›´æ¥æ‹–åŠ¨å›¾å±‚åˆ°åœ°å›¾å®¹å™¨æˆ–è€…åœºæ™¯ä¸­è¿›è¡ŒæŸ¥çœ‹ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/416380a23be844919694f136861a60fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=lXxwx9DALcv9%2FVi1s%2BXEgmP5gw8%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ çš„è½¯ä»¶æ²¡æœ‰æ˜¾ç¤ºç›®å½•æˆ–è€…ä½ æ²¡æœ‰æ‰¾åˆ°<code>Servers</code>é€‰é¡¹çš„è¯ï¼Œå¯ä»¥é€šè¿‡é¡¶éƒ¨èœå•æ è¿›è¡Œæ‰“å¼€ã€‚</p>
<p>é¦–å…ˆç‚¹å‡»èœå•æ <code>View</code>é€‰é¡¹ï¼Œç„¶åæ‰“å¼€<code>Catalog Pane</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/359b66d06c4a4721a6f177658fa8312a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=6Sc%2B3mi7ZSidJTzi6LW%2FdrYoIBM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">2. é€šè¿‡Add Data æ·»åŠ </h2>
<p><strong>ï¼ˆ1ï¼‰</strong> ç‚¹å‡»èœå•æ <code>Map</code></p>
<p><strong>ï¼ˆ2ï¼‰</strong> é€‰æ‹©<code>Add Data</code>é€‰é¡¹</p>
<p><strong>ï¼ˆ3ï¼‰</strong> ç‚¹å‡»From PathÂ·Â·Â·Â·Â·Â·Â·Â·<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c94265fc44d24a219151d95973000e29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=ZSSjkGUiKwlvgCeQWGFKKgdovig%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå†æ·»åŠ æ•°æ®å¯¹è¯æ¡†ä¸­å¡«å…¥åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer</code>ï¼Œç„¶åç‚¹å‡»<code>Add</code>ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbf1dc46a9074b97a48861d5c606f4d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=U29iY2xklNKdDU00HC1FtW2t4%2Bg%3D" alt="" loading="lazy"/></p>
<p>å›¾å±‚æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/466677317520435e921b4ee4b7f6acb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=u%2BxfTnQmsGk%2BmMIMybF3nFloayE%3D" alt="" loading="lazy"/></p>
<p>è¿˜å¯ä»¥ç›´æ¥åœ¨å¯¹è¯æ¡†ä¸­å¡«å…¥xyzæœåŠ¡åœ°å€ï¼š<code>https://server.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}</code>ï¼Œç„¶åç‚¹å‡»<code>Add</code>ã€‚</p>
<p>æ­¤ç§æ–¹å¼æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ã€‚<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/544713d332084496bb921b2dbf95e406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=10P2v9FEkHP2nnw%2FmTfGIJAN544%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">3. æœåŠ¡åœ°å€</h2>
<p>ä¸‹é¢æ¨èå‡ ä¸ªå¸¸ç”¨çš„åœ°å›¾æœåŠ¡åœ°å€ï¼Œå…·æœ‰<code>xyz</code>æœåŠ¡ç±»å‹ï¼Œä¹Ÿæœ‰<code>ArcGIS</code>åœ°å›¾æœåŠ¡ç±»å‹ã€‚å¯ä»¥æ·»åŠ å½±åƒåº•å›¾ã€çŸ¢é‡åº•å›¾å’Œåœ°å½¢æ•°æ®ã€‚</p>
<p><strong>ï¼ˆä¸€ï¼‰ArcGIS xyz åˆ‡ç‰‡</strong></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># Esri Imagery æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Imagery/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}

<span class="hljs-comment"># Esri Topographic æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Topo_Map/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}

<span class="hljs-comment"># Esri Terrain æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Terrain_Base/</span><span class="hljs-title class_">MapServer</span>/tile/{z}/{y}/{x}
</code></pre>
<p><strong>ï¼ˆäºŒï¼‰ArcGIS MapServer</strong></p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># USA æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/sampleserver6.arcgisonline.com/</span><span class="hljs-title class_">Arc</span>GIS/rest/services/<span class="hljs-variable constant_">USA</span>/<span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Wildfire æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/sampleserver6.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/Wildfire/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Imagery æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Imagery/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Topographic æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Topo_Map/</span><span class="hljs-title class_">MapServer</span>

<span class="hljs-comment"># Esri Terrain æœåŠ¡</span>
<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/server.arcgisonline.com/arcgis</span><span class="hljs-regexp">/rest/services</span><span class="hljs-regexp">/World_Terrain_Base/</span><span class="hljs-title class_">MapServer</span>
</code></pre>
<p>åŸåŸŸå<code>services.arcgisonline.com</code>å·²ç»ä¸èƒ½ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer
</code></pre>
<p><strong><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab5cede7f1a248138ac927960a559501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=kvraz4TZ%2BvRuv46HBYRgRhprJxw%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>vector</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1d0e63e962d4cf898647d45c78d8bdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=2wwp%2BlsHs1c6ErRok0zJhKi8RU4%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f01a5a3b82584793b1185c57141b9784~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=3WGWBSU3nuu5ypNdvA06%2BZAi3xc%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e6ceb7a5d0a4319b6dfdb09c07e4f45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=z%2BwsZQCMvtkMK3JK%2BNB50hYZzZo%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7478f5b8d1164e9cba5e3c5aa54226c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769267623&amp;x-signature=t4Wvz4QWdgrBCoH4rZzIQKAtggQ%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FE9BrT9VzidvziCayXgRCQA" target="_blank" title="https://mp.weixin.qq.com/s/E9BrT9VzidvziCayXgRCQA" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhBXfq6zRK9twSicMXw69jw" target="_blank" title="https://mp.weixin.qq.com/s/hBXfq6zRK9twSicMXw69jw" ref="nofollow noopener noreferrer">ArcGIS Pro å®ç°å½±åƒæ³¢æ®µåˆæˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQVFiW5C5wXQ6a1WODCaH0g" target="_blank" title="https://mp.weixin.qq.com/s/QVFiW5C5wXQ6a1WODCaH0g" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨å…šç»„å…³äºè‹—æ³½ç­‰4ååŒå¿—èŒåŠ¡ä»»å…çš„é€šçŸ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJmv3J_bjbBG-4jB72zS3hw" target="_blank" title="https://mp.weixin.qq.com/s/Jmv3J_bjbBG-4jB72zS3hw" ref="nofollow noopener noreferrer">GDAL åˆ›å»ºçŸ¢é‡å›¾å±‚çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwkHv2NnJfuPhtyjJcFLrEQ" target="_blank" title="https://mp.weixin.qq.com/s/wkHv2NnJfuPhtyjJcFLrEQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è½¬æ¢å¤„ç†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMZIQ57Ka3NQfKFi9AuEQEg" target="_blank" title="https://mp.weixin.qq.com/s/MZIQ57Ka3NQfKFi9AuEQEg" ref="nofollow noopener noreferrer">GDAL å®ç°æŠ•å½±è½¬æ¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEqpOD--IdOUO6gyzwBc6RA" target="_blank" title="https://mp.weixin.qq.com/s/EqpOD--IdOUO6gyzwBc6RA" ref="nofollow noopener noreferrer">å‰æ—ä¸€å·å›½å†…é¦–å¼ é«˜åˆ†è¾¨ç‡å½©è‰²å¤œå…‰å«æ˜Ÿå½±åƒå‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FznfhqB1_3JbQHG7CEqWSCw" target="_blank" title="https://mp.weixin.qq.com/s/znfhqB1_3JbQHG7CEqWSCw" ref="nofollow noopener noreferrer">2025 å¹´åº¦ä¿¡åˆ›é¢†å†›ä¼ä¸šåå•å‡ºç‚‰ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼]]></title>    <link>https://juejin.cn/post/7595901379015000074</link>    <guid>https://juejin.cn/post/7595901379015000074</guid>    <pubDate>2026-01-17T15:33:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015000074" data-draft-id="7595901379014983690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼"/> <meta itemprop="keywords" content="API"/> <meta itemprop="datePublished" content="2026-01-17T15:33:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Banana API æ¥äº†ï¼šä¸åˆ°åŠä»·äº«å®˜æ–¹åŒæ¬¾å“è´¨ï¼Œä»…éœ€çº¦ Â¥0.10/å¼ ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:33:14.000Z" title="Sat Jan 17 2026 15:33:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘è¢«è°·æ­Œæ–°å‘å¸ƒçš„ <strong>Nano Bananaï¼ˆGemini 2.5 Flash Imageï¼‰å›¾åƒç”Ÿæˆæ¨¡å‹</strong> éœ¸å±äº†ã€‚</p>
<p>ä»æ‰‹åŠç§’å˜çœŸäººçº§ Cosplayï¼Œåˆ°ä¸€é”®ç»Ÿä¸€å¤šå›¾é£æ ¼ï¼Œä»ä¸ªæ€§åŒ–å¤´åƒåˆ°äº§å“æ¦‚å¿µè®¾è®¡ï¼Œç”šè‡³è¿é™æ€ç”»ä½œéƒ½èƒ½ä¸€é”®ç”Ÿæˆç”µå½±çº§åŠ¨æ€åˆ†é•œâ€”â€”è¿™æ³¢ AI ç”Ÿå›¾æµªæ½®ï¼ŒçœŸçš„åœ¨é‡æ–°å®šä¹‰åˆ›ä½œï¼</p>
<p>Ace Data Cloud å¹³å° <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud" target="_blank" title="https://platform.acedata.cloud" ref="nofollow noopener noreferrer">platform.acedata.cloud</a> ç°ä¹Ÿæ¨å‡º <strong>Nano Banana API</strong>ï¼šä»·æ ¼ï¼šçº¦ Â¥0.10/å¼ ï¼Œæˆæœ¬ç›¸æ¯”å®˜æ–¹ç›´æ¥çœä¸€åŠï¼Œæ€§èƒ½æ•ˆæœæ¯«ä¸æ‰“æŠ˜ã€‚æ˜¯æ›´å¿«ã€æ›´ç¨³ã€æ›´çœé’±çš„å›¾ç‰‡ç”Ÿäº§çº¿</p>
<h2 data-id="heading-0">Nano Banana å¼ºåœ¨å“ªï¼Ÿ</h2>
<p>å®ƒæœ€å‰å®³çš„åœ°æ–¹ï¼Œæ˜¯èƒ½è½»æ¾å®ç° <strong>é«˜ç²¾åº¦çš„ä¸€è‡´æ€§ç”Ÿæˆ</strong>ã€‚
æ— è®ºæ˜¯æ¢èƒŒæ™¯ã€æ”¹é£æ ¼ã€è°ƒè¡¨æƒ…ï¼Œè¿˜æ˜¯å¤„ç†å¤æ‚åŠ¨ä½œä¸æœè£…ï¼Œè¿‡æ¸¡éƒ½éå¸¸è‡ªç„¶ï¼Œæ•ˆæœé«˜åº¦ç»Ÿä¸€ï¼Œå‡ ä¹çœ‹ä¸å‡º AI ç”Ÿæˆçš„ç—•è¿¹ï¼</p>
<h2 data-id="heading-1">è¶…å®ç”¨çš„ç©æ³•ç¤ºä¾‹</h2>
<h3 data-id="heading-2">1. 2D å›¾ç‰‡è½¬ 3D æ‰‹åŠ</h3>
<p>å½“å‰æœ€ç«çš„å‡ºåœˆç©æ³•ï¼</p>
<p><strong>æŒ‡ä»¤</strong>ï¼šç”Ÿæˆä¸€å¹…å›¾ç‰‡ä¸­è§’è‰²çš„å•†å“åŒ–æ¨¡å‹ï¼Œç¯å¢ƒå†™å®ã€‚æ¨¡å‹æ”¾ç”µè„‘æ¡Œä¸Šï¼Œä½¿ç”¨åœ†å½¢äºšå…‹åŠ›åº•åº§ã€‚ç”µè„‘å±å¹•æ˜¾ç¤ºå»ºæ¨¡è¿‡ç¨‹ï¼Œæ—è¾¹æ”¾ç½®å°æœ‰åŸå›¾çš„ BANDAI åŒ…è£…ç›’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07749c8d8dd34d278d2b10158f8873c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=SgbqVsdCL3h%2BaDU8exSM%2FL407UE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2. äº§å“å†…éƒ¨ç»“æ„è§£æ</h3>
<p><strong>æç¤ºè¯</strong>ï¼šè¶…è¯¦ç»†çš„äº§å“çˆ†ç‚¸è§†å›¾ï¼Œé‡‘å±é›¶ä»¶å’Œç”µå­å…ƒä»¶æ¼‚æµ®åœ¨åŠç©ºä¸­ï¼Œå®Œç¾æ’åˆ—ï¼Œæ­ç¤ºå†…éƒ¨ç»“æ„ï¼Œæœªæ¥ä¸»ä¹‰æŠ€æœ¯ç¾å­¦ï¼Œ8K åˆ†è¾¨ç‡ï¼ŒæŸ”å’Œçš„ç”µå½±ç…§æ˜ï¼Œé«˜åº¦é€¼çœŸã€‚èƒŒæ™¯æ˜¯çº¯ç™½è‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d60109719b6479eb40c4af07ee22ec0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=jfFAEpUT%2F7LtOvXem3YFVLvlQFw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">3. è€ç…§ç‰‡ä¿®å¤</h3>
<p><strong>æç¤ºè¯</strong>ï¼šè¯·ä¿®å¤è¿™å¼ å……æ»¡åˆ’ç—•çš„é»‘ç™½è€ç…§ç‰‡ã€‚ç§»é™¤æ‰€æœ‰æ±¡ç‚¹å’Œç ´æŸï¼Œå¤§å¹…æå‡æ¸…æ™°åº¦ï¼Œå¹¶è¿›è¡Œè‡ªç„¶ã€é€¼çœŸçš„ä¸Šè‰²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/236c41b03b5d464daaf604d7fcac0afa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=mNQ0%2BN4Yk98JaMGxNeOs2lkTRho%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">4. å¤šå…ƒç´ ç»„å›¾ / ç”µå•†äº§å“æ¤å…¥</h3>
<p><strong>æç¤ºè¯</strong>ï¼šä¸€ä½æ¨¡ç‰¹ç«™åœ¨ä¸€è¾†ç™½è‰²çš„è½¦å‰é¢æ‘†æ‹ï¼Œåœºæ™¯ä¸ºè¡—åŒºè·¯é¢ï¼Œä¸¤è¾¹æ˜¯å»ºç­‘ã€‚å¥¹ç©¿ç€é»‘è‰²è¿è¡£è£™å’Œç™½è‰²é«˜è·Ÿé‹ï¼Œä¸€æ‰‹æ‹ç€ç™½è‰²çš„åŒ…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b73742d727494c43b6cc6b9ec3be6fa0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769268794&amp;x-signature=a%2B4qwd0Kzze%2BejXk1btDgauDMN4%3D" alt="" loading="lazy"/></p>
<p>è¿˜æœ‰æ›´å¤šå®ç”¨åœºæ™¯ï¼šä¸€é”®æ¢è£…/æ¢è¡¨æƒ…/æ¢åŠ¨ä½œã€å¤šè§’åº¦é•œå¤´ã€äººç‰©åˆå½±ã€è¡¨æƒ…åŒ…ä¹å®«æ ¼ã€æ¨¡ç‰¹ OOTD æœè£…å¹³é“ºå±•ç¤ºã€æ‰‹ç¨¿è½¬ 3D å®ç‰©å›¾ã€å»ºç­‘ç­‰è½´æµ‹å»ºæ¨¡ã€åœ°å›¾è½¬å®æ™¯è§£æâ€¦â€¦ç»Ÿç»Ÿéƒ½èƒ½é«˜æ•ˆå®Œæˆï¼</p>
<p>åœ¨å±•ç¤ºäº† Nano Banana å¦‚æ­¤å¤šä»¤äººæƒŠè‰³çš„ç©æ³•ä¹‹åï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼šè¿™ä¹ˆå¼ºå¤§çš„èƒ½åŠ›ï¼Œæ¥å…¥èµ·æ¥ä¸€å®šå¾ˆå¤æ‚ï¼Œæˆæœ¬ä¹Ÿå¾ˆéš¾æ§åˆ¶å§ï¼Ÿ
æ— è®ºæ˜¯ AI äº§å“çš„å¼€å‘è€…æƒ³è¦å¿«é€Ÿé›†æˆï¼Œè¿˜æ˜¯ä¸ªäººç”¨æˆ·å¸Œæœ›ç›´æ¥ä½“éªŒï¼ŒAce Data Cloud éƒ½è®©è¿™ä¸€åˆ‡å˜å¾—ç®€å•ã€å¯æ§ä¸”ç»æµã€‚</p>
<h2 data-id="heading-6">ä»·æ ¼</h2>
<p>è¯´åˆ°ä»·æ ¼ï¼ŒAce Data Cloud ç»å¯¹æ˜¯ä½ çš„æ€§ä»·æ¯”ä¹‹é€‰ï¼š</p>
<ul>
<li>Google å®˜æ–¹ï¼šçº¦ç¾å…ƒ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.039</mn><mi mathvariant="normal">/</mi><mtext>å¼ ï¼ŒæŒ‰</mtext></mrow><annotation encoding="application/x-tex">0.039/å¼ ï¼ŒæŒ‰ </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">0.039/</span><span class="mord cjk_fallback">å¼ ï¼ŒæŒ‰</span></span></span></span></span>1 â‰ˆ Â¥7.2 è®¡ç®—ï¼Œäººæ°‘å¸å¤§çº¦ Â¥0.28/å¼ ã€‚</li>
<li>AceDataCloudï¼šç»Ÿä¸€ Â¥0.10/å¼ ã€‚</li>
</ul>
<p>å¦å¤–å¹¶å‘æ”¯æŒæ›´å®½è£•ï¼Œå“åº”æ›´ç¨³å®šï¼Œæä¾›ä¸“å±å®¢æœï¼Œ7Ã—24 å°æ—¶å¯ç”¨æ€§ä¿éšœï¼Œå…·ä½“ä»·æ ¼ä¸é…é¢è¯·è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fservices%2Fnano-banana" target="_blank" title="https://platform.acedata.cloud/services/nano-banana" ref="nofollow noopener noreferrer">platform.acedata.cloud/services/naâ€¦</a>ã€‚</p>
<h2 data-id="heading-7">å¿«é€Ÿæ¥å…¥ï¼Œç«‹å³ä½“éªŒé«˜å“è´¨ä½æˆæœ¬å›¾åƒç”Ÿæˆï¼</h2>
<p>æˆ‘ä»¬æä¾›ç®€æ´çš„ API å’Œå®Œæ•´çš„å¼€å‘æ–‡æ¡£ï¼ŒåŠ©ä½ å¿«é€Ÿé›†æˆåˆ°æ—¢æœ‰å·¥ä½œæµæˆ–æ–°äº§å“ã€‚</p>
<ul>
<li>å¼€å‘é›†æˆæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2Fnano-banana-images-integration" target="_blank" title="https://platform.acedata.cloud/documents/nano-banana-images-integration" ref="nofollow noopener noreferrer">platform.acedata.cloud/documents/nâ€¦</a></li>
<li>ç«‹å³è´­ä¹°ä¸ä½¿ç”¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fservices%2Fnano-banana" target="_blank" title="https://platform.acedata.cloud/services/nano-banana" ref="nofollow noopener noreferrer">platform.acedata.cloud/documents/nâ€¦</a></li>
<li>æŠ€æœ¯æ”¯æŒä¸å’¨è¯¢ï¼šéšæ—¶è”ç³»æˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fsupport" target="_blank" title="https://platform.acedata.cloud/support" ref="nofollow noopener noreferrer">platform.acedata.cloud/support</a></li>
</ul>
<p>ä¸‹é¢æ˜¯æ ·ä¾‹è°ƒç”¨è¯´æ˜ï¼Œè½»æ¾ä¸€ä¸ª API å°±èƒ½å¾—åˆ°ä½ æƒ³è¦çš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl -X POST <span class="hljs-string">'https://api.acedata.cloud/nano-banana/images'</span> \
  -H <span class="hljs-string">'authorization: Bearer {token}'</span> \
  -H <span class="hljs-string">'accept: application/json'</span> \
  -H <span class="hljs-string">'content-type: application/json'</span> \
  -d <span class="hljs-string">'{
    "action": "generate",
    "prompt": "A photorealistic close-up portrait of an elderly Japanese ceramicist with deep, sun-etched wrinkles and a warm, knowing smile. He is carefully inspecting a freshly glazed tea bowl. The setting is his rustic, sun-drenched workshop. The scene is illuminated by soft, golden hour light streaming through a window, highlighting the fine texture of the clay. Captured with an 85mm portrait lens, resulting in a soft, blurred background (bokeh). The overall mood is serene and masterful. Vertical portrait orientation."
  }'</span>
</code></pre>
<p>è¿”å›ç»“æœï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"task_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"056f0589-a3dd-4ec2-8440-ad61f5038dfa"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"trace_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c48de83f-0077-426e-b02b-ff1d58179064"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"prompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"A photorealistic close-up portrait of an elderly Japanese ceramicist with deep, sun-etched wrinkles and a warm, knowing smile. He is carefully inspecting a freshly glazed tea bowl. The setting is his rustic, sun-drenched workshop. The scene is illuminated by soft, golden hour light streaming through a window, highlighting the fine texture of the clay. Captured with an 85mm portrait lens, resulting in a soft, blurred background (bokeh). The overall mood is serene and masterful. Vertical portrait orientation."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"image_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://platform.cdn.acedata.cloud/nanobanana/69790adb-c85d-4362-ad9e-0c9ba4352cf4.png"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å…¶ä¸­ image_url å°±æ˜¯ Nano Banana ç”Ÿæˆçš„çš„å›¾ç‰‡ï¼Œæ°¸ä¹…å¯è®¿é—®ã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ Ace Data Cloud çš„ Nano Banana API çš„ä»‹ç»ï¼Œå¿«æ¥è¯•è¯•å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™]]></title>    <link>https://juejin.cn/post/7595994039109140516</link>    <guid>https://juejin.cn/post/7595994039109140516</guid>    <pubDate>2026-01-17T15:39:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039109140516" data-draft-id="7595858760134656063" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-17T15:39:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PinMe:é›¶æˆæœ¬ä¸‰ç§’å‘å¸ƒä½ çš„ç½‘ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:39:19.000Z" title="Sat Jan 17 2026 15:39:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ¸´æœ›å°†è‡ªå·±çš„åšå®¢ç½‘ç«™éƒ¨ç½²ä¸Šçº¿ï¼Œå´å› é«˜æ˜‚çš„æœåŠ¡å™¨å’ŒåŸŸåè´¹ç”¨ã€ç¹ççš„é…ç½®æµç¨‹è€Œæœ›è€Œå´æ­¥ï¼Ÿä½ æ˜¯å¦å¸Œæœ›å‘å¸ƒä¸€ä¸ªæ´»åŠ¨é¡µé¢æˆ–å›¾ä¹¦ä»‹ç»ç½‘ç«™ï¼Œå´ä¸æ„¿è´­ä¹°æœåŠ¡å™¨ï¼Œä¹Ÿä¸æƒ³ç»å†å¤æ‚çš„éƒ¨ç½²æ­¥éª¤ï¼Ÿ</p>
<p>æœ€è¿‘åœ¨æµè§ˆ GitHub æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªå¾ˆæ£’çš„é¡¹ç›®â€”â€”PinMeã€‚ PinMe çš„ç›®æ ‡ï¼Œå°±æ˜¯æŠŠå‘å¸ƒè¿™ä»¶äº‹ç®€åŒ–æˆä¸€å¥è¯ï¼š</p>
<p>ã€Œæœ¬åœ°æœ‰ä¸€ä»½é™æ€èµ„æºï¼Œä¸Šä¼ åˆ°ç½‘ç«™å‘ä¸Šå»æˆ–è€…ç»™æˆ‘ä¸€ä¸ªå‘½ä»¤ï¼Œæˆ‘å¸®ä½ å‘ä¸Šå»ã€‚ã€</p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œè¿™å¥—å‘å¸ƒæ–¹æ¡ˆè¿˜å¤©ç”Ÿå…·å¤‡ â€œå†…å®¹å¯éªŒè¯â€ ä¸ â€œæŠ—ç¯¡æ”¹â€ çš„ç‰¹ç‚¹ã€‚ ä»Šå¤©å°±æ¥ç»™å¤§å®¶æ¨èè¿™ä¸ªé¡¹ç›®ï¼Œç›¸ä¿¡å®ƒä¼šè®©ä½ çš„å‘å¸ƒä¹‹è·¯å˜å¾—è½»æ¾åˆå¯é ï¼ğŸš€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d03d08f4e26044dfbd03991e1fcf5432~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=gqYWv7g8Or4fw%2BJQ%2Bt1PvYMl5Ac%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ”ä»€ä¹ˆæ˜¯PinMeï¼Ÿ</h2>
<p>PinMe æ˜¯ä¸€æ¬¾é›¶é…ç½®çš„å‰ç«¯éƒ¨ç½²å·¥å…·ã€‚æ— éœ€æœåŠ¡å™¨ã€æ— éœ€è´¦å·ã€æ— éœ€è®¾ç½®ã€‚</p>
<p>æ— è®ºæ˜¯æ„å»ºé™æ€ç«™ç‚¹ã€ä½¿ç”¨ AI ç”Ÿæˆé¡µé¢ï¼Œè¿˜æ˜¯å¯¼å‡ºå‰ç«¯é¡¹ç›® â€” åªéœ€ä¸€æ¡å‘½ä»¤æˆ–è€…æ‹–åŠ¨æ–‡ä»¶å¤¹ä¸Šä¼ å³å¯å³æ—¶éƒ¨ç½²ã€‚</p>
<p>PinMe å°†æ‚¨çš„ç½‘ç«™å‘å¸ƒä¸ºå¯éªŒè¯çš„å†…å®¹ï¼Œç›¸æ¯”ä¼ ç»Ÿæ‰˜ç®¡ï¼Œèƒ½æ›´æœ‰æ•ˆåœ°é˜²æ­¢é™é»˜ç¯¡æ”¹å’Œæ„å¤–æŸåã€‚</p>
<p>æ‚¨æ— éœ€ç®¡ç†æœåŠ¡å™¨ã€åŒºåŸŸæˆ–è¿è¡Œæ—¶é—´ã€‚PinMe ä¸ºæ‚¨å¤„ç†å¯ç”¨æ€§å’ŒæŒä¹…æ€§ã€‚</p>
<p>githubåœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fglitternetwork%2Fpinme" target="_blank" title="https://github.com/glitternetwork/pinme" ref="nofollow noopener noreferrer">github.com/glitternetwâ€¦</a></p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinme.eth.limo%2F" target="_blank" title="https://pinme.eth.limo/" ref="nofollow noopener noreferrer">pinme.eth.limo/</a></p>
<p>è¯¥é¡¹ç›®åœ¨github æœ‰2.6k â­ï¸star</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f0ddd070c34b6c9cc71058a3d72866~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=jXVzXntfO69scY5%2FFCo3eA1X6FE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">âœ’ï¸ æ ¸å¿ƒç‰¹æ€§</h2>
<h3 data-id="heading-2">ğŸš€ æç®€éƒ¨ç½²</h3>
<ul>
<li>ç½‘é¡µéƒ¨ç½²ï¼šè¿›å…¥ç½‘ç«™ï¼Œä¸Šä¼ æ–‡ä»¶jar</li>
<li>å‘½ä»¤è¡Œéƒ¨ç½²ï¼š åªéœ€æ‰§è¡Œå‡ è¡Œç®€å•çš„å‘½ä»¤</li>
</ul>
<h3 data-id="heading-3">ğŸ”’ å»ä¸­å¿ƒåŒ–å­˜å‚¨</h3>
<p>PinMeåŸºäºIPFSï¼ˆæ˜Ÿé™…æ–‡ä»¶ç³»ç»Ÿï¼‰æŠ€æœ¯ï¼Œå°†ä½ çš„ç½‘ç«™å†…å®¹å­˜å‚¨åœ¨å»ä¸­å¿ƒåŒ–ç½‘ç»œä¸­ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>ä¸å¯ç¯¡æ”¹ï¼šä¸Šä¼ çš„å†…å®¹ä¼šç”Ÿæˆå”¯ä¸€çš„å“ˆå¸Œå€¼ï¼Œç¡®ä¿å†…å®¹å®Œæ•´æ€§</li>
<li>æ°¸ä¹…è®¿é—®ï¼šå³ä½¿å•ä¸ªèŠ‚ç‚¹ç¦»çº¿ï¼Œä½ çš„ç½‘ç«™ä»ç„¶å¯ä»¥é€šè¿‡å…¶ä»–èŠ‚ç‚¹è®¿é—®</li>
<li>å…¨çƒåŠ é€Ÿï¼šå†…å®¹é€šè¿‡IPFSç½‘ç»œåˆ†å¸ƒï¼Œå®ç°å°±è¿‘è®¿é—®</li>
</ul>
<h3 data-id="heading-4">ğŸ†“ å®Œå…¨å…è´¹</h3>
<p>ç›®å‰PinMeæä¾›å…è´¹çš„éƒ¨ç½²æœåŠ¡ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>å•ä¸ªæ–‡ä»¶æœ€å¤§200MB</li>
<li>æ•´ä¸ªç›®å½•æœ€å¤§1GB</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68778d89312e406b97aa6497788ff4c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=H7G64j5gYK8LcABTIsykE7%2FMZqc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸš‚å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-6">ğŸ•¸ï¸ ç½‘ç«™ä¸Šä¼ éƒ¨ç½²ï¼ˆå°ç™½æ¨èï¼‰</h3>
<p>æµè§ˆå™¨æ‰“å¼€ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinme.eth.limo%2F" target="_blank" title="https://pinme.eth.limo/" ref="nofollow noopener noreferrer">pinme.eth.limo/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f77e64d7144d4b618202ced9a39f1934~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=emNQkuKHLC3J7eHTtk8xZ6OXEAQ%3D" alt="" loading="lazy"/></p>
<p>å°†ä½ æ„å»ºå¥½çš„å‰ç«¯é¡¹ç›®æˆ–è€…é™æ€ç½‘é¡µæ–‡ä»¶ä¸Šä¼ ï¼Œä¸Šä¼ æˆåŠŸä¹‹åä¼šè¿”å›ä¸€ä¸ªurlåœ°å€ï¼ˆä¿å­˜å¥½æ­¤åœ°å€ï¼‰ï¼Œä½¿ç”¨æ­¤åœ°å€å³å¯è®¿é—®ä½ çš„ç½‘ç«™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/962d281b2bae49bbbffa9c9e6c06d786~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=jdtM0mxWmuRA5SKfuy3RIoFolhY%3D" alt="" loading="lazy"/></p>
<p>éƒ¨ç½²ç¤ºä¾‹ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2F34759bf5.pinit.eth.limo%2F" target="_blank" title="https://34759bf5.pinit.eth.limo/" ref="nofollow noopener noreferrer">34759bf5.pinit.eth.limo/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4c880955bd4d8c9c0ced52fa2d9453~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=WYVKfPF5iJjz5Aa2%2FNy4AarLMXM%3D" alt="pinme-web-example.png" loading="lazy"/></p>
<blockquote>
<p>æ³¨ï¼šå»ºè®®ä½¿ç”¨githubè´¦å·ç™»å½•ï¼Œç™»å½•ä¹‹åæ¯æ¬¡ä¸Šä¼ æœ‰å†å²è®°å½•å¯ä»¥æŸ¥çœ‹ï¼Œå†å²è®°å½•ä¸­å¯ä»¥æŸ¥è¯¢åˆ°æˆ‘ä»¬çš„åœ°å€</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f5b42eab818443baec9711de97dce94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=cI2%2B5JMVB2MgKmop3LGIZnot1%2BU%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ğŸ–¥ï¸ å‘½ä»¤è¡Œéƒ¨ç½²ï¼ˆå¼€å‘æ¨èï¼‰</h3>
<ol>
<li>å‡†å¤‡ç¯å¢ƒ</li>
</ol>
<blockquote>
<p>è¦æ±‚ Node.js ç‰ˆæœ¬ â‰¥ 16.13.0</p>
</blockquote>
<p>å¦‚æœç‰ˆæœ¬è¿‡ä½ï¼Œå…ˆå‡çº§ Nodeã€‚</p>
<ol start="2">
<li>å®‰è£… PinMe CLI</li>
</ol>
<p>ä½¿ç”¨ npmï¼š</p>
<pre><code class="hljs">npm install -g pinme
</code></pre>
<p>3.  æ„å»ºå¹¶ä¸Šä¼ </p>
<p>ä»¥å¸¸è§çš„å‰ç«¯å·¥ç¨‹ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"># Vite / React / Vue é¡¹ç›®ï¼Œä¸€èˆ¬æ˜¯ï¼š
npm run build
</code></pre>
<p>å®Œæˆæ„å»ºåï¼Œä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ€å¸¸è§çš„ dist ç›®å½•</span>
pinme upload dist
</code></pre>
<p>å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œä½ å°†å¾—åˆ°ï¼š</p>
<ol>
<li>ä¸€ä¸ª IPFS å†…å®¹ hash</li>
<li>ä¸€ä¸ªé¢„è§ˆé¡µé¢é“¾æ¥ï¼š<br/>
<code>https://pinme.eth.limo/#/preview/*</code></li>
</ol>
<p>æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œå°±èƒ½åœ¨çº¿è®¿é—®ä½ çš„ç«™ç‚¹ã€‚</p>
<h2 data-id="heading-8">â³ PinMe CLIï¼šå¸¸ç”¨å‘½ä»¤ä¸€è§ˆ</h2>
<p>PinMe ä¸»è¦é€šè¿‡ CLI æä¾›èƒ½åŠ›ï¼Œæ•´ä½“å‘½ä»¤é›†å¾ˆç®€æ´ã€‚</p>
<h3 data-id="heading-9">â¬†ï¸ 1. ä¸Šä¼ ï¼ˆæ ¸å¿ƒå‘½ä»¤ï¼‰</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># äº¤äº’å¼ä¸Šä¼ ï¼ˆä¼šè®©ä½ é€‰æ‹©è¦ä¸Šä¼ çš„ç›®å½•/æ–‡ä»¶ï¼‰</span>
pinme upload

<span class="hljs-comment"># ç›´æ¥æŒ‡å®šè·¯å¾„ä¸Šä¼ </span>
pinme upload /path/to/file-<span class="hljs-keyword">or</span>-directory

<span class="hljs-comment"># ä¸Šä¼ å¹¶ç»‘å®šä¸€ä¸ªå›ºå®šå­åŸŸåï¼ˆéœ€è¦ AppKey &amp; Plus ä¼šå‘˜ï¼‰</span>
pinme upload dist --domain <span class="hljs-keyword">my</span>-site
<span class="hljs-comment"># ç®€å†™</span>
pinme upload dist -d <span class="hljs-keyword">my</span>-site
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å›ºå®šåŸŸåä½¿ç”¨çš„æ˜¯ <code>https://&lt;name&gt;.pinit.eth.limo</code> è¿™ç§å½¢å¼</li>
<li>ç»‘å®šå›ºå®šåŸŸåéœ€è¦ AppKey ä¸”å¼€é€š Plus ä¼šå‘˜ï¼›æ™®é€šç”¨æˆ·å¯ä»¥ä½¿ç”¨é¢„è§ˆé“¾æ¥è®¿é—®ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-10">ğŸ”„ 2. æŸ¥çœ‹ä¸Šä¼ å†å²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘ 10 æ¡ä¸Šä¼ è®°å½•</span>
pinme list
<span class="hljs-comment"># æˆ–ç®€å†™</span>
pinme <span class="hljs-built_in">ls</span>

<span class="hljs-comment"># æŒ‡å®šæ•°é‡</span>
pinme list -l 5

<span class="hljs-comment"># æ¸…ç©ºæœ¬åœ°ä¸Šä¼ å†å²</span>
pinme list -c
</code></pre>
<h3 data-id="heading-11">â™»ï¸ 3. åˆ é™¤ä¸æ¸…ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># äº¤äº’å¼åˆ é™¤ï¼ˆä»å†å²ä¸­é€‰æ‹©ï¼‰</span>
pinme <span class="hljs-built_in">rm</span>

<span class="hljs-comment"># æŒ‡å®š IPFS hash åˆ é™¤</span>
pinme <span class="hljs-built_in">rm</span> &lt;IPFS_hash&gt;
</code></pre>
<p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ<code>rm</code> å®é™…åšçš„æ˜¯ä» PinMe ä½¿ç”¨çš„ IPFS èŠ‚ç‚¹ä¸­ã€Œå–æ¶ˆ pin å¹¶ç§»é™¤ ENS è®°å½•ã€ï¼Œå¹¶ä¸æ„å‘³ç€å…¨ç½‘ IPFS éƒ½ä¼šç«‹åˆ»åˆ é™¤å†…å®¹ã€‚</p>
<h3 data-id="heading-12">ğŸ”“ 4. ç™»å½•ä¸èº«ä»½ï¼ˆAppKeyï¼‰</h3>
<p>PinMe ä½¿ç”¨ <strong>AppKey</strong> æ¥æ ‡è¯†ç”¨æˆ·ï¼Œç”¨äºï¼š</p>
<ul>
<li>è´¦å·ç™»å½•</li>
<li>ä¸Šä¼ å†å²åˆå¹¶</li>
<li>å›ºå®šåŸŸåç»‘å®š</li>
</ul>
<p>appkeyå¯åœ¨ç½‘é¡µç«¯ Account Information é¡µé¢æŸ¥çœ‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48cab80659ac421ab1231777a1bb5ae0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269159&amp;x-signature=3CSb8pfR6IVHlfFeL6qgRADqT4Y%3D" alt="" loading="lazy"/></p>
<p>ç›¸å…³å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® AppKey</span>
pinme set-appkey

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰ AppKey ä¿¡æ¯ï¼ˆä¼šåšæ©ç å¤„ç†ï¼‰</span>
pinme show-appkey
pinme appkey

<span class="hljs-comment"># ç™»å‡ºå¹¶æ¸…é™¤æœ¬åœ°è®¤è¯ä¿¡æ¯</span>
pinme <span class="hljs-built_in">logout</span>

<span class="hljs-comment"># æŸ¥çœ‹å½“å‰è´¦å·æ‹¥æœ‰çš„åŸŸå</span>
pinme my-domains
pinme domain
</code></pre>
<h3 data-id="heading-13">ğŸ‘ï¸â€ğŸ—¨ï¸ 5. å¸®åŠ©ä¿¡æ¯</h3>
<pre><code class="hljs language-bash" lang="bash">pinme <span class="hljs-built_in">help</span>
</code></pre>
<h2 data-id="heading-14">ğŸ“‚ ä¸Šä¼ å¤§å°é™åˆ¶ä¸å­˜å‚¨è¯´æ˜</h2>
<p>å…è´¹è®¡åˆ’ä¸‹çš„é™åˆ¶ï¼ˆä»¥ README ä¸ºå‡†ï¼‰ï¼š</p>

















<table><thead><tr><th>ç±»å‹</th><th>é™åˆ¶</th></tr></thead><tbody><tr><td>å•ä¸ªæ–‡ä»¶</td><td>200 MB</td></tr><tr><td>æ•´ä¸ªç›®å½•æ€»å’Œ</td><td>1 GB</td></tr></tbody></table>
<p>ä¸Šä¼ åæ–‡ä»¶ä¼šå­˜å‚¨åœ¨ IPFS ç½‘ç»œä¸­ï¼Œå¹¶é€šè¿‡ Glitter Protocol çš„ IPFS ç½‘å…³æä¾›è®¿é—®ã€‚</p>
<p>æˆåŠŸä¸Šä¼ åä½ ä¼šè·å¾—ï¼š</p>
<ol>
<li>IPFS å†…å®¹ hash</li>
<li>é¢„è§ˆé“¾æ¥ï¼š<code>https://pinme.eth.limo/#/preview/*</code></li>
<li>å¯é€‰å›ºå®šåŸŸåï¼š<code>https://*.pinit.eth.limo</code>ï¼ˆéœ€ Plusï¼‰</li>
</ol>
<p>æœ¬åœ°æ—¥å¿—é»˜è®¤ä¿å­˜åœ¨ï¼š</p>
<ul>
<li>Linux / macOS: <code>~/.pinme/</code></li>
<li>Windows: <code>%USERPROFILE%.pinme</code></li>
</ul>
<p>â¤ï¸ ç»“è¯­</p>
<p>PinMeä»£è¡¨äº†å‰ç«¯éƒ¨ç½²çš„æœªæ¥æ–¹å‘â€”â€”ç®€å•ã€å¿«é€Ÿã€å¯é ã€‚æ— è®ºä½ æ˜¯ç‹¬ç«‹å¼€å‘è€…ã€åˆ›ä¸šå›¢é˜Ÿï¼Œè¿˜æ˜¯å¤§å‹ä¼ä¸šï¼ŒPinMeéƒ½èƒ½ä¸ºä½ èŠ‚çœå®è´µçš„æ—¶é—´å’Œèµ„æºã€‚</p>
<p>å‘Šåˆ«ç¹ççš„æœåŠ¡å™¨é…ç½®ï¼Œæ‹¥æŠ±ä¸€é”®éƒ¨ç½²çš„æ–°æ—¶ä»£ã€‚è¯•è¯•PinMeï¼Œä½“éªŒå‰æ‰€æœªæœ‰çš„éƒ¨ç½²ä½“éªŒï¼</p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šæ„å»ºä½ çš„ç½‘ç«™ï¼Œè¿è¡Œpinme uploadï¼Œç„¶åå°±å¯ä»¥åˆ†äº«é“¾æ¥äº†ã€‚å°±è¿™ä¹ˆç®€å•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“]]></title>    <link>https://juejin.cn/post/7595911076014768164</link>    <guid>https://juejin.cn/post/7595911076014768164</guid>    <pubDate>2026-01-17T15:44:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595911076014768164" data-draft-id="7596025264455794724" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-17T15:44:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å‰–æooderAI Agentçš„Sceneä¸Groupæœºåˆ¶ï¼šå¤šAgentè‡ªä¸»åä½œçš„æ ¸å¿ƒå¼•æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:44:00.000Z" title="Sat Jan 17 2026 15:44:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨äººå·¥æ™ºèƒ½æŠ€æœ¯å¿«é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œ<strong>å¤šAgentç³»ç»Ÿ</strong>å·²æˆä¸ºå®ç°å¤æ‚ä»»åŠ¡åä½œçš„é‡è¦æ¶æ„ã€‚ooderAI Agentç³»ç»Ÿåˆ›æ–°æ€§åœ°å¼•å…¥äº†<strong>Sceneï¼ˆåœºæ™¯ï¼‰<strong>å’Œ</strong>Groupï¼ˆç»„ï¼‰<strong>æœºåˆ¶ï¼Œä¸º</strong>å¤šAgenté—´çš„è‡ªä¸»åä½œ</strong>æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚è¿™ä¸€æœºåˆ¶ä½¿å¾—Agentå’ŒSkillèƒ½å¤Ÿæ ¹æ®ä¸šåŠ¡åœºæ™¯è‡ªåŠ¨ç»„ç»‡æˆåä½œå›¢é˜Ÿï¼Œå®ç°é«˜æ•ˆçš„ä»»åŠ¡åˆ†é…ã€æ‰§è¡Œå’Œç»“æœèšåˆï¼Œæ˜¯å®ç°å¤§è§„æ¨¡å¤šAgentåä½œçš„æ ¸å¿ƒå¼•æ“ã€‚</p>
<p>æœ¬æ–‡å°†ä»5Wï¼ˆWhat, Who, When, Where, Whyï¼‰è§’åº¦æ·±å…¥å‰–æè¿™ä¸€æœºåˆ¶ï¼Œé‡ç‚¹çªå‡º<strong>å¤šAgentåä½œ</strong>çš„è®¾è®¡ç†å¿µã€å·¥ä½œåŸç†å’Œåº”ç”¨åœºæ™¯ï¼Œå¸®åŠ©è¯»è€…å…¨é¢ç†è§£ooderAI Agentç³»ç»Ÿå¦‚ä½•å®ç°é«˜æ•ˆçš„å¤šAgentè‡ªä¸»åä½œã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Whatï¼šSceneä¸Groupåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 æ ¸å¿ƒæ¦‚å¿µå®šä¹‰</h3>
<p><strong>Sceneï¼ˆåœºæ™¯ï¼‰</strong></p>
<p>Sceneæ˜¯<strong>å¤šAgentå’ŒSkillåä½œçš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ï¼Œç”¨äºæè¿°ç‰¹å®šçš„ä¸šåŠ¡æˆ–æŠ€æœ¯ä¸Šä¸‹æ–‡ã€‚å®ƒå®šä¹‰äº†ä¸€ç»„Agentå’ŒSkillåä½œçš„è§„åˆ™ã€ç›®æ ‡å’Œçº¦æŸæ¡ä»¶ï¼Œä¸º<strong>å¤šAgentåä½œ</strong>æä¾›äº†æ˜ç¡®çš„ä¸Šä¸‹æ–‡è¾¹ç•Œã€‚æ¯ä¸ªSceneéƒ½æœ‰æ˜ç¡®çš„ç±»å‹ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„<strong>å¤šAgentåä½œåœºæ™¯</strong>ã€‚</p>
<p><strong>Groupï¼ˆåœºæ™¯ç»„ï¼‰</strong></p>
<p>Groupæ˜¯åŸºäºSceneè‡ªåŠ¨å½¢æˆçš„<strong>å¤šAgentåä½œç»„</strong>ï¼Œç”¨äºç®¡ç†åŒä¸€åœºæ™¯ä¸‹çš„Skillåä½œã€‚å®ƒæ˜¯Sceneçš„å…·ä½“å®ä¾‹åŒ–ï¼ŒåŒ…å«äº†å®é™…å‚ä¸åä½œçš„<strong>å¤šAgent/Skillåˆ—è¡¨</strong>ã€ç»„æ‰€æœ‰è€…å’Œç»„ç®¡ç†è§„åˆ™ï¼Œæ˜¯å®ç°<strong>å¤šAgentè‡ªä¸»åä½œ</strong>çš„å…·ä½“æ‰§è¡Œå•å…ƒã€‚</p>
<p><strong>SceneDeclarationï¼ˆåœºæ™¯å£°æ˜ï¼‰</strong></p>
<p>SceneDeclarationæ˜¯ç”¨äºSkillå£°æ˜æ”¯æŒæŸä¸ªSceneï¼Œæˆ–Route/MCPå£°æ˜Sceneæ‰€æœ‰è€…çš„æœºåˆ¶ã€‚é€šè¿‡SceneDeclarationï¼Œç³»ç»Ÿå¯ä»¥<strong>è‡ªåŠ¨å‘ç°å’Œç»„ç»‡å¤šAgentåä½œèµ„æº</strong>ï¼Œå®ç°<strong>å¤šAgentåä½œå›¢é˜Ÿçš„åŠ¨æ€å½¢æˆ</strong>ã€‚</p>
<h3 data-id="heading-3">1.2 åœºæ™¯ç±»å‹åˆ—è¡¨</h3>
<p>ooderAI Agentç³»ç»Ÿä¸­å­˜åœ¨ä¸¤ç§åœºæ™¯ç±»å‹ï¼šæ ¸å¿ƒåœºæ™¯ç±»å‹å’Œåº”ç”¨åœºæ™¯ç±»å‹ã€‚</p>
<h4 data-id="heading-4">1.2.1 æ ¸å¿ƒåœºæ™¯ç±»å‹ï¼ˆSceneTypeï¼‰</h4>
<p>æ ¸å¿ƒåœºæ™¯ç±»å‹ç”¨äºæè¿°ç³»ç»Ÿå†…éƒ¨çš„å‘½ä»¤æ‰§è¡Œåœºæ™¯ï¼ŒåŸºäºç³»ç»Ÿæ“ä½œå’ŒæŠ€æœ¯ç»´åº¦è®¾è®¡ï¼š</p>



































































































































<table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">åœºæ™¯ç±»å‹</th><th align="left">æè¿°</th><th align="left">æ ‡è¯†</th><th align="left">å…¸å‹åº”ç”¨</th></tr></thead><tbody><tr><td align="left"><strong>ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸ</strong></td><td align="left">INITIALIZATION</td><td align="left">ç³»ç»Ÿåˆå§‹åŒ–åœºæ™¯</td><td align="left">init</td><td align="left">ç³»ç»Ÿå¯åŠ¨ã€ç»„ä»¶åˆå§‹åŒ–</td></tr><tr><td align="left">â€‹</td><td align="left">UPGRADE</td><td align="left">ç³»ç»Ÿå‡çº§åœºæ™¯</td><td align="left">upgrade</td><td align="left">ç³»ç»Ÿç‰ˆæœ¬å‡çº§ã€ç»„ä»¶æ›´æ–°</td></tr><tr><td align="left">â€‹</td><td align="left">SHUTDOWN</td><td align="left">ç³»ç»Ÿå…³é—­åœºæ™¯</td><td align="left">shutdown</td><td align="left">ç³»ç»Ÿä¼˜é›…å…³é—­ã€èµ„æºé‡Šæ”¾</td></tr><tr><td align="left"><strong>è¿è¡Œæ—¶æ“ä½œ</strong></td><td align="left">CONFIGURATION</td><td align="left">é…ç½®ç®¡ç†åœºæ™¯</td><td align="left">config</td><td align="left">åŠ¨æ€é…ç½®æ›´æ–°ã€å‚æ•°è°ƒæ•´</td></tr><tr><td align="left">â€‹</td><td align="left">EXECUTION</td><td align="left">å‘½ä»¤æ‰§è¡Œåœºæ™¯</td><td align="left">execute</td><td align="left">ä»»åŠ¡æ‰§è¡Œã€å‘½ä»¤ä¸‹å‘</td></tr><tr><td align="left">â€‹</td><td align="left">CONTROL</td><td align="left">ç³»ç»Ÿæ§åˆ¶åœºæ™¯</td><td align="left">control</td><td align="left">æµç¨‹æ§åˆ¶ã€çŠ¶æ€ç®¡ç†</td></tr><tr><td align="left"><strong>ç›‘æ§ä¸ç»´æŠ¤</strong></td><td align="left">MONITORING</td><td align="left">ç³»ç»Ÿç›‘æ§åœºæ™¯</td><td align="left">monitor</td><td align="left">æ€§èƒ½ç›‘æ§ã€çŠ¶æ€ä¸ŠæŠ¥</td></tr><tr><td align="left">â€‹</td><td align="left">MAINTENANCE</td><td align="left">ç³»ç»Ÿç»´æŠ¤åœºæ™¯</td><td align="left">maintain</td><td align="left">æ—¥å¿—æ¸…ç†ã€æ•°æ®å¤‡ä»½</td></tr><tr><td align="left"><strong>è°ƒè¯•ä¸æµ‹è¯•</strong></td><td align="left">DEBUGGING</td><td align="left">ç³»ç»Ÿè°ƒè¯•åœºæ™¯</td><td align="left">debug</td><td align="left">é—®é¢˜æ’æŸ¥ã€è°ƒè¯•ä¿¡æ¯æ”¶é›†</td></tr><tr><td align="left">â€‹</td><td align="left">TESTING</td><td align="left">ç³»ç»Ÿæµ‹è¯•åœºæ™¯</td><td align="left">test</td><td align="left">åŠŸèƒ½æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•</td></tr><tr><td align="left"><strong>æ•°æ®å¤„ç†</strong></td><td align="left">DATA_TRANSFER</td><td align="left">æ•°æ®ä¼ è¾“åœºæ™¯</td><td align="left">data_transfer</td><td align="left">æ•°æ®åŒæ­¥ã€æ–‡ä»¶ä¼ è¾“</td></tr><tr><td align="left">â€‹</td><td align="left">DATA_STORAGE</td><td align="left">æ•°æ®å­˜å‚¨åœºæ™¯</td><td align="left">data_storage</td><td align="left">æ•°æ®æŒä¹…åŒ–ã€å­˜å‚¨ç®¡ç†</td></tr><tr><td align="left">â€‹</td><td align="left">REPORTING</td><td align="left">æŠ¥å‘Šç”Ÿæˆåœºæ™¯</td><td align="left">report</td><td align="left">ç»Ÿè®¡æŠ¥è¡¨ã€æ•°æ®åˆ†æ</td></tr><tr><td align="left"><strong>å®‰å…¨ä¸å®¡è®¡</strong></td><td align="left">SECURITY</td><td align="left">å®‰å…¨ç®¡ç†åœºæ™¯</td><td align="left">security</td><td align="left">æƒé™ç®¡ç†ã€åŠ å¯†è§£å¯†</td></tr><tr><td align="left">â€‹</td><td align="left">AUDIT</td><td align="left">å®¡è®¡æ—¥å¿—åœºæ™¯</td><td align="left">audit</td><td align="left">æ“ä½œå®¡è®¡ã€æ—¥å¿—è®°å½•</td></tr><tr><td align="left"><strong>å¤‡ä»½ä¸æ¢å¤</strong></td><td align="left">BACKUP</td><td align="left">æ•°æ®å¤‡ä»½åœºæ™¯</td><td align="left">backup</td><td align="left">æ•°æ®å¤‡ä»½ã€å¿«ç…§ç®¡ç†</td></tr><tr><td align="left">â€‹</td><td align="left">RECOVERY</td><td align="left">æ•°æ®æ¢å¤åœºæ™¯</td><td align="left">recovery</td><td align="left">ç¾éš¾æ¢å¤ã€æ•°æ®è¿˜åŸ</td></tr></tbody></table>
<h4 data-id="heading-5">1.2.2 åº”ç”¨åœºæ™¯ç±»å‹ï¼ˆAgentSceneEnumï¼‰</h4>
<p>åº”ç”¨åœºæ™¯ç±»å‹ç”¨äºæè¿°Agentçš„å…·ä½“åº”ç”¨åœºæ™¯ï¼ŒåŸºäºä¸šåŠ¡ç»´åº¦è®¾è®¡ï¼Œç”¨äºsuperAgentè‡ªåŠ©åä½œï¼š</p>





















































































































































































































<table><thead><tr><th align="left">ç±»åˆ«</th><th align="left">åœºæ™¯ç±»å‹</th><th align="left">æè¿°</th><th align="left">æ ‡è¯†</th><th align="left">å…¸å‹åº”ç”¨</th><th align="left">é€‚ç”¨èŒƒå›´</th></tr></thead><tbody><tr><td align="left"><strong>åŸºç¡€åœºæ™¯ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</strong></td><td align="left">DEVICE_CONTROL</td><td align="left">è®¾å¤‡æ§åˆ¶</td><td align="left">deviceControl</td><td align="left">æ§åˆ¶å„ç±»æ™ºèƒ½è®¾å¤‡</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">SENSOR_DATA</td><td align="left">ä¼ æ„Ÿå™¨æ•°æ®</td><td align="left">sensorData</td><td align="left">é‡‡é›†å’Œå±•ç¤ºä¼ æ„Ÿå™¨æ•°æ®</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">SECURITY_MONITOR</td><td align="left">å®‰å…¨ç›‘æ§</td><td align="left">securityMonitor</td><td align="left">ç›‘æ§è®¾å¤‡å’Œç¯å¢ƒå®‰å…¨</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">ENERGY_MANAGEMENT</td><td align="left">èƒ½æºç®¡ç†</td><td align="left">energyManagement</td><td align="left">ç®¡ç†å’Œä¼˜åŒ–èƒ½æºä½¿ç”¨</td><td align="left">all</td></tr><tr><td align="left"><strong>æ™ºèƒ½ç”Ÿæ´»åœºæ™¯</strong></td><td align="left">SMART_HOME</td><td align="left">æ™ºèƒ½å®¶å±…</td><td align="left">smartHome</td><td align="left">æ‰“é€ æ™ºèƒ½èˆ’é€‚çš„å®¶å±…ç¯å¢ƒ</td><td align="left">residential</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_LIGHTING</td><td align="left">æ™ºèƒ½ç…§æ˜</td><td align="left">smartLighting</td><td align="left">æ™ºèƒ½æ§åˆ¶ç¯å…‰ç³»ç»Ÿ</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_THERMOSTAT</td><td align="left">æ™ºèƒ½æ¸©æ§</td><td align="left">smartThermostat</td><td align="left">æ™ºèƒ½è°ƒèŠ‚æ¸©åº¦å’Œæ¹¿åº¦</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_SECURITY</td><td align="left">æ™ºèƒ½å®‰é˜²</td><td align="left">smartSecurity</td><td align="left">æ™ºèƒ½ç›‘æ§å’Œå®‰å…¨é˜²æŠ¤</td><td align="left">residential,commercial</td></tr><tr><td align="left">â€‹</td><td align="left">PERSONAL_ASSISTANT</td><td align="left">ä¸ªäººåŠ©æ‰‹</td><td align="left">personalAssistant</td><td align="left">æä¾›ä¸ªæ€§åŒ–çš„æ™ºèƒ½åŠ©æ‰‹æœåŠ¡</td><td align="left">personal</td></tr><tr><td align="left"><strong>æ™ºèƒ½åŠå…¬åœºæ™¯</strong></td><td align="left">SMART_OFFICE</td><td align="left">æ™ºèƒ½åŠå…¬</td><td align="left">smartOffice</td><td align="left">æ‰“é€ é«˜æ•ˆæ™ºèƒ½çš„åŠå…¬ç¯å¢ƒ</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">MEETING_ROOM</td><td align="left">æ™ºèƒ½ä¼šè®®å®¤</td><td align="left">meetingRoom</td><td align="left">æ™ºèƒ½ç®¡ç†ä¼šè®®å®¤èµ„æº</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">OFFICE_AUTOMATION</td><td align="left">åŠå…¬è‡ªåŠ¨åŒ–</td><td align="left">officeAutomation</td><td align="left">è‡ªåŠ¨åŒ–å¤„ç†åŠå…¬äº‹åŠ¡</td><td align="left">commercial</td></tr><tr><td align="left"><strong>è¡Œä¸šåº”ç”¨åœºæ™¯</strong></td><td align="left">INDUSTRIAL_AUTOMATION</td><td align="left">å·¥ä¸šè‡ªåŠ¨åŒ–</td><td align="left">industrialAutomation</td><td align="left">å®ç°å·¥ä¸šç”Ÿäº§è‡ªåŠ¨åŒ–</td><td align="left">industrial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_RETAIL</td><td align="left">æ™ºèƒ½é›¶å”®</td><td align="left">smartRetail</td><td align="left">æ‰“é€ æ™ºèƒ½é›¶å”®ä½“éªŒ</td><td align="left">commercial</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_HEALTHCARE</td><td align="left">æ™ºèƒ½åŒ»ç–—</td><td align="left">smartHealthcare</td><td align="left">æ™ºèƒ½åŒ»ç–—æœåŠ¡å’Œç®¡ç†</td><td align="left">healthcare</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_AGRICULTURE</td><td align="left">æ™ºèƒ½å†œä¸š</td><td align="left">smartAgriculture</td><td align="left">æ™ºèƒ½å†œä¸šç”Ÿäº§ç®¡ç†</td><td align="left">agriculture</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_TRAFFIC</td><td align="left">æ™ºèƒ½äº¤é€š</td><td align="left">smartTraffic</td><td align="left">æ™ºèƒ½äº¤é€šç®¡ç†ç³»ç»Ÿ</td><td align="left">transportation</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_LOGISTICS</td><td align="left">æ™ºèƒ½ç‰©æµ</td><td align="left">smartLogistics</td><td align="left">æ™ºèƒ½ç‰©æµç®¡ç†</td><td align="left">logistics</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_EDUCATION</td><td align="left">æ™ºèƒ½æ•™è‚²</td><td align="left">smartEducation</td><td align="left">æ™ºèƒ½æ•™è‚²æœåŠ¡å’Œç®¡ç†</td><td align="left">education</td></tr><tr><td align="left"><strong>ç¯å¢ƒä¸å…¬å…±æœåŠ¡åœºæ™¯</strong></td><td align="left">ENVIRONMENT_MONITOR</td><td align="left">ç¯å¢ƒç›‘æµ‹</td><td align="left">environmentMonitor</td><td align="left">ç›‘æµ‹å’Œåˆ†æç¯å¢ƒæ•°æ®</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">PUBLIC_SERVICE</td><td align="left">å…¬å…±æœåŠ¡</td><td align="left">publicService</td><td align="left">æä¾›æ™ºèƒ½å…¬å…±æœåŠ¡</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_CITY</td><td align="left">æ™ºæ…§åŸå¸‚</td><td align="left">smartCity</td><td align="left">æ‰“é€ æ™ºèƒ½é«˜æ•ˆçš„åŸå¸‚ç®¡ç†</td><td align="left">public</td></tr><tr><td align="left">â€‹</td><td align="left">SMART_PARKING</td><td align="left">æ™ºèƒ½åœè½¦</td><td align="left">smartParking</td><td align="left">æ™ºèƒ½åœè½¦ç®¡ç†ç³»ç»Ÿ</td><td align="left">transportation</td></tr><tr><td align="left"><strong>ç‰¹æ®Šåœºæ™¯</strong></td><td align="left">EMERGENCY_RESPONSE</td><td align="left">åº”æ€¥å“åº”</td><td align="left">emergencyResponse</td><td align="left">å¤„ç†ç´§æ€¥æƒ…å†µå’Œç¾å®³</td><td align="left">all</td></tr><tr><td align="left">â€‹</td><td align="left">REMOTE_MAINTENANCE</td><td align="left">è¿œç¨‹ç»´æŠ¤</td><td align="left">remoteMaintenance</td><td align="left">è¿œç¨‹è®¾å¤‡ç»´æŠ¤å’Œæ•…éšœå¤„ç†</td><td align="left">all</td></tr></tbody></table>
<h2 data-id="heading-6">äºŒã€Whoï¼šè°å‚ä¸Sceneä¸Groupçš„ç®¡ç†å’Œåä½œï¼Ÿ</h2>
<h3 data-id="heading-7">2.1 è§’è‰²å®šä¹‰</h3>
<p><strong>Sceneæ‰€æœ‰è€…</strong></p>
<p>Sceneæ‰€æœ‰è€…æ˜¯è´Ÿè´£ç®¡ç†å’Œç»´æŠ¤ç‰¹å®šSceneçš„è§’è‰²ï¼Œåªèƒ½ç”±Routeæˆ–MCPï¼ˆMaster Control Programï¼‰æ‹…ä»»ã€‚Sceneæ‰€æœ‰è€…æ‹¥æœ‰è¯¥Sceneä¸‹æ‰€æœ‰Groupçš„ç®¡ç†æƒé™ã€‚</p>
<p><strong>Skill</strong></p>
<p>Skillæ˜¯å®é™…æ‰§è¡Œä»»åŠ¡çš„ç»„ä»¶ï¼Œå¯ä»¥å£°æ˜æ”¯æŒä¸€ä¸ªæˆ–å¤šä¸ªSceneï¼Œå¹¶åœ¨Sceneä¸­æ‹…ä»»ä¸åŒçš„è§’è‰²ï¼š</p>
<ul>
<li><strong>agentRouteï¼ˆèšåˆä¸­ç»§ï¼‰</strong>ï¼šè´Ÿè´£æ¥æ”¶ä»»åŠ¡ã€åˆ†å‘ä»»åŠ¡å’Œèšåˆç»“æœ</li>
<li><strong>endAgentï¼ˆç»ˆç«¯ï¼‰</strong>ï¼šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œ</li>
</ul>
<p><strong>SceneManager</strong></p>
<p>SceneManageræ˜¯ç³»ç»Ÿçº§çš„åœºæ™¯ç®¡ç†ä¸­å¿ƒï¼Œè´Ÿè´£å¤„ç†SceneDeclarationã€è‡ªåŠ¨åˆ›å»ºGroupã€ç®¡ç†Sceneå’ŒGroupä¿¡æ¯ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-8">2.2 è§’è‰²åä½œå…³ç³»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/597ce017ecd14b33a650b56f661ab772~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=QvuBhZt2PCBuPUhEy9tdFUORBuI%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h2 data-id="heading-9">ä¸‰ã€Whenï¼šSceneä¸Groupæœºåˆ¶ä½•æ—¶ç”Ÿæ•ˆï¼Ÿ</h2>
<h3 data-id="heading-10">3.1 ç”Ÿå‘½å‘¨æœŸ</h3>
<p><strong>Sceneçš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ol>
<li><strong>å£°æ˜é˜¶æ®µ</strong>ï¼šRoute/MCPå£°æ˜ä¸ºSceneæ‰€æœ‰è€…</li>
<li><strong>å½¢æˆé˜¶æ®µ</strong>ï¼šSkillå£°æ˜æ”¯æŒè¯¥Scene</li>
<li><strong>æ´»è·ƒé˜¶æ®µ</strong>ï¼šSceneGroupè‡ªåŠ¨å½¢æˆï¼Œå¼€å§‹åä½œ</li>
<li><strong>æ¼”åŒ–é˜¶æ®µ</strong>ï¼šSkillåŠ¨æ€åŠ å…¥æˆ–ç¦»å¼€Group</li>
<li><strong>è§£æ•£é˜¶æ®µ</strong>ï¼šæ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…å–æ¶ˆå£°æ˜</li>
</ol>
<p><strong>Groupçš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ol>
<li><strong>åˆ›å»ºé˜¶æ®µ</strong>ï¼šå½“SceneåŒæ—¶å­˜åœ¨æ‰€æœ‰è€…å’Œè‡³å°‘ä¸€ä¸ªSkillå£°æ˜æ—¶è‡ªåŠ¨åˆ›å»º</li>
<li><strong>è¿è¡Œé˜¶æ®µ</strong>ï¼šæ¥æ”¶ä»»åŠ¡ã€æ‰§è¡Œåä½œ</li>
<li><strong>æ›´æ–°é˜¶æ®µ</strong>ï¼šæ·»åŠ /ç§»é™¤Skillï¼Œæ›´æ–°é…ç½®</li>
<li><strong>åˆ é™¤é˜¶æ®µ</strong>ï¼šå½“æ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…åˆ é™¤æ—¶è‡ªåŠ¨è§£æ•£</li>
</ol>
<h3 data-id="heading-11">3.2 è§¦å‘æ—¶æœº</h3>
<ul>
<li><strong>SceneDeclaration</strong>ï¼šå½“Route/MCPå¯åŠ¨æˆ–Skillæ³¨å†Œæ—¶è§¦å‘</li>
<li><strong>Groupåˆ›å»º</strong>ï¼šå½“SceneåŒæ—¶æ»¡è¶³"æœ‰æ‰€æœ‰è€…"å’Œ"è‡³å°‘ä¸€ä¸ªSkillå£°æ˜"æ¡ä»¶æ—¶è§¦å‘</li>
<li><strong>Groupæ›´æ–°</strong>ï¼šå½“æœ‰æ–°SkillåŠ å…¥æˆ–ç°æœ‰Skillç¦»å¼€æ—¶è§¦å‘</li>
<li><strong>Groupåˆ é™¤</strong>ï¼šå½“æ‰€æœ‰Skillç¦»å¼€æˆ–æ‰€æœ‰è€…åˆ é™¤Groupæ—¶è§¦å‘</li>
</ul>
<h2 data-id="heading-12">å››ã€Whereï¼šSceneä¸Groupæœºåˆ¶åœ¨ç³»ç»Ÿæ¶æ„ä¸­çš„ä½ç½®ï¼Ÿ</h2>
<h3 data-id="heading-13">4.1 ç³»ç»Ÿæ¶æ„ä¸­çš„ä½ç½®</h3>
<p>Sceneä¸Groupæœºåˆ¶ä½äºooderAI Agentç³»ç»Ÿçš„åä½œç®¡ç†å±‚ï¼Œè¿æ¥äº†ä¸Šå±‚çš„ä¸šåŠ¡é€»è¾‘å’Œä¸‹å±‚çš„æ‰§è¡Œå¼•æ“ã€‚å®ƒè´Ÿè´£å°†æŠ½è±¡çš„ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºå…·ä½“çš„åä½œä»»åŠ¡ï¼Œå¹¶ç»„ç»‡åˆé€‚çš„Skillå®Œæˆè¿™äº›ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-14">4.2 ä¸å…¶ä»–ç»„ä»¶çš„å…³ç³»</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aae32dbb2dde47089a14197f7e5f4a5f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=MshY2Da4JTcpJzNEO1WCllmHDCY%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h3 data-id="heading-15">4.3 éƒ¨ç½²ä½ç½®</h3>
<ul>
<li><strong>SceneManager</strong>ï¼šé€šå¸¸éƒ¨ç½²åœ¨MCPèŠ‚ç‚¹ï¼Œä½œä¸ºç³»ç»Ÿçº§æœåŠ¡è¿è¡Œ</li>
<li><strong>SceneDeclaration</strong>ï¼šåˆ†å¸ƒåœ¨å„ä¸ªRouteå’ŒSkillèŠ‚ç‚¹ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ä¸SceneManageré€šä¿¡</li>
<li><strong>SceneGroupä¿¡æ¯</strong>ï¼šå­˜å‚¨åœ¨åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œç¡®ä¿é«˜å¯ç”¨æ€§å’Œä¸€è‡´æ€§</li>
</ul>
<h2 data-id="heading-16">äº”ã€Whyï¼šä¸ºä»€ä¹ˆéœ€è¦Sceneä¸Groupæœºåˆ¶ï¼Ÿ</h2>
<h3 data-id="heading-17">5.1 è®¾è®¡ç†å¿µ</h3>
<p>Sceneä¸Groupæœºåˆ¶çš„è®¾è®¡åŸºäºä»¥ä¸‹æ ¸å¿ƒç†å¿µï¼š</p>
<ul>
<li><strong>è‡ªä¸»åä½œ</strong>ï¼šAgentå’ŒSkillå¯ä»¥è‡ªä¸»å£°æ˜å’Œå‘ç°åä½œæœºä¼šï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®</li>
<li><strong>åœºæ™¯é©±åŠ¨</strong>ï¼šåŸºäºåœºæ™¯ç»„ç»‡åä½œï¼Œä½¿åä½œæ›´æœ‰é’ˆå¯¹æ€§å’Œæ•ˆç‡</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ”¯æŒåä½œç»„çš„åŠ¨æ€å½¢æˆå’Œè°ƒæ•´ï¼Œé€‚åº”ç³»ç»Ÿå˜åŒ–</li>
<li><strong>æ¾è€¦åˆ</strong>ï¼šé€šè¿‡åœºæ™¯æŠ½è±¡ï¼Œé™ä½Agentå’ŒSkillä¹‹é—´çš„ç›´æ¥ä¾èµ–</li>
</ul>
<h3 data-id="heading-18">5.2 è§£å†³çš„æ ¸å¿ƒé—®é¢˜</h3>
<ol>
<li><strong>åä½œå¤æ‚æ€§é—®é¢˜</strong>ï¼šåœ¨å¤šAgentç³»ç»Ÿä¸­ï¼Œå¦‚ä½•æœ‰æ•ˆç»„ç»‡å¤§é‡Agentå’ŒSkillè¿›è¡Œåä½œæ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚Sceneä¸Groupæœºåˆ¶é€šè¿‡åœºæ™¯æŠ½è±¡å’Œè‡ªåŠ¨ç»„å½¢æˆï¼Œç®€åŒ–äº†åä½œç®¡ç†ã€‚</li>
<li><strong>åŠ¨æ€æ‰©å±•æ€§é—®é¢˜</strong>ï¼šä¼ ç»Ÿçš„åä½œæœºåˆ¶éš¾ä»¥é€‚åº”ç³»ç»Ÿè§„æ¨¡çš„åŠ¨æ€å˜åŒ–ã€‚Sceneä¸Groupæœºåˆ¶æ”¯æŒSkillçš„åŠ¨æ€åŠ å…¥å’Œç¦»å¼€ï¼Œä½¿ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€‚</li>
<li><strong>èµ„æºåˆ©ç”¨ç‡é—®é¢˜</strong>ï¼šå¦‚ä½•å°†åˆé€‚çš„Skillåˆ†é…ç»™åˆé€‚çš„ä»»åŠ¡æ˜¯æé«˜èµ„æºåˆ©ç”¨ç‡çš„å…³é”®ã€‚Sceneä¸Groupæœºåˆ¶é€šè¿‡åœºæ™¯åŒ¹é…ï¼Œå®ç°äº†èµ„æºçš„é«˜æ•ˆåˆ†é…ã€‚</li>
<li><strong>ç³»ç»Ÿé²æ£’æ€§é—®é¢˜</strong>ï¼šå½“æŸä¸ªSkillæ•…éšœæ—¶ï¼Œå¦‚ä½•ä¿è¯ç³»ç»Ÿçš„ç»§ç»­è¿è¡Œæ˜¯ä¸€ä¸ªé‡è¦é—®é¢˜ã€‚Sceneä¸Groupæœºåˆ¶æ”¯æŒSkillçš„åŠ¨æ€æ›¿æ¢ï¼Œæé«˜äº†ç³»ç»Ÿçš„é²æ£’æ€§ã€‚</li>
</ol>
<h3 data-id="heading-19">5.3 å¸¦æ¥çš„ä»·å€¼</h3>
<ul>
<li><strong>é™ä½å¼€å‘æˆæœ¬</strong>ï¼šå¼€å‘è€…æ— éœ€æ‰‹åŠ¨é…ç½®åä½œå…³ç³»ï¼Œåªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘</li>
<li><strong>æé«˜ç³»ç»Ÿçµæ´»æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€è°ƒæ•´åä½œå…³ç³»ï¼Œé€‚åº”ä¸šåŠ¡å˜åŒ–</li>
<li><strong>å¢å¼ºç³»ç»Ÿå¯æ‰©å±•æ€§</strong>ï¼šæ”¯æŒå¤§è§„æ¨¡Agentå’ŒSkillçš„åä½œç®¡ç†</li>
<li><strong>æé«˜èµ„æºåˆ©ç”¨ç‡</strong>ï¼šå®ç°èµ„æºçš„æŒ‰éœ€åˆ†é…å’ŒåŠ¨æ€è°ƒæ•´</li>
<li><strong>å¢å¼ºç³»ç»Ÿé²æ£’æ€§</strong>ï¼šæ”¯æŒæ•…éšœè½¬ç§»å’ŒåŠ¨æ€æ›¿æ¢</li>
</ul>
<h2 data-id="heading-20">å…­ã€Howï¼šSceneä¸Groupæœºåˆ¶å¦‚ä½•å®ç°å¤šAgentè‡ªä¸»åä½œï¼Ÿ</h2>
<h3 data-id="heading-21">6.1 å¤šAgentåä½œå·¥ä½œæµç¨‹è¯¦è§£</h3>
<h4 data-id="heading-22">6.1.1 å¤šAgentåœºæ™¯å£°æ˜ä¸ç»„å½¢æˆæµç¨‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0d198dfa6bd425b904b4d2245f2214f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=1SuNkdmDD7ygbPPFIYZgYokbpDE%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<h4 data-id="heading-23">6.1.2 å¤šAgentåä½œç»„è‡ªåŠ¨å½¢æˆè¿‡ç¨‹</h4>
<ol>
<li><strong>æ­¥éª¤1ï¼šSceneæ‰€æœ‰è€…å£°æ˜</strong>
<ul>
<li>Route/MCPé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜ä¸ºæŸä¸ªSceneçš„æ‰€æœ‰è€…</li>
<li>SceneManagerå­˜å‚¨æ‰€æœ‰è€…ä¿¡æ¯ï¼Œä¸º<strong>å¤šAgentåä½œ</strong>åˆ›å»ºåŸºç¡€</li>
</ul>
</li>
<li><strong>æ­¥éª¤2ï¼šSkillåœºæ™¯æ”¯æŒå£°æ˜</strong>
<ul>
<li>Skillé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜æ”¯æŒæŸä¸ªScene</li>
<li>æŒ‡å®šSkillè§’è‰²(agentRoute/endAgent)ï¼Œæ˜ç¡®<strong>å¤šAgentåä½œ</strong>ä¸­çš„è§’è‰²å®šä½</li>
<li>SceneManagerå­˜å‚¨Skillå£°æ˜ä¿¡æ¯ï¼Œæ„å»º<strong>å¤šAgentåä½œ</strong>èµ„æºæ± </li>
</ul>
</li>
<li><strong>æ­¥éª¤3ï¼šè‡ªåŠ¨ç»„å½¢æˆæ¡ä»¶æ£€æŸ¥</strong>
<ul>
<li>SceneManageræ£€æŸ¥è¯¥Sceneæ˜¯å¦åŒæ—¶æ»¡è¶³ï¼š
<ul>
<li>å­˜åœ¨æ‰€æœ‰è€…</li>
<li>å­˜åœ¨è‡³å°‘ä¸€ä¸ªSkillå£°æ˜</li>
</ul>
</li>
<li>æ»¡è¶³æ¡ä»¶åˆ™è§¦å‘<strong>å¤šAgentåä½œç»„</strong>è‡ªåŠ¨å½¢æˆ</li>
</ul>
</li>
<li><strong>æ­¥éª¤4ï¼šå¤šAgentåä½œç»„åˆ›å»º</strong>
<ul>
<li>ç”ŸæˆGroup IDï¼šæ ¼å¼ä¸º"group_åœºæ™¯ç±»å‹_æ‰€æœ‰è€…"</li>
<li>åˆ›å»ºSceneGroupå¯¹è±¡ï¼ŒåŒ…å«<strong>å¤šAgent/Skillåä½œåˆ—è¡¨</strong>ã€ç»„æ‰€æœ‰è€…å’Œç»„ç®¡ç†è§„åˆ™</li>
<li>å­˜å‚¨SceneGroupä¿¡æ¯ï¼Œå®Œæˆ<strong>å¤šAgentåä½œå›¢é˜Ÿ</strong>çš„ç»„å»º</li>
</ul>
</li>
<li><strong>æ­¥éª¤5ï¼šé€šçŸ¥ç›¸å…³æ–¹</strong>
<ul>
<li>é€šçŸ¥Sceneæ‰€æœ‰è€…ï¼šæ–°çš„<strong>å¤šAgentåä½œç»„</strong>å·²åˆ›å»º</li>
<li>é€šçŸ¥æ‰€æœ‰ç›¸å…³Skillï¼šå·²åŠ å…¥æ–°çš„<strong>å¤šAgentåä½œç»„</strong>ï¼Œå¯ä»¥å¼€å§‹åä½œ</li>
</ul>
</li>
</ol>
<h4 data-id="heading-24">6.1.3 å¤šAgentä»»åŠ¡åä½œæ‰§è¡Œæµç¨‹</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04b0763becac4872ac0caf4987eb5055~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769269439&amp;x-signature=2stRqiyixby0GUDw%2BJu8QUD8LMk%3D" alt="Mermaid Diagram" loading="lazy"/></p>
<p>è¿™ä¸ª<strong>å¤šAgentåä½œæ‰§è¡Œæµç¨‹</strong>å±•ç¤ºäº†ooderAI Agentç³»ç»Ÿå¦‚ä½•å®ç°é«˜æ•ˆçš„ä»»åŠ¡åˆ†é…å’Œæ‰§è¡Œï¼š</p>
<ul>
<li><strong>ä»»åŠ¡åˆ†å‘</strong>ï¼šSceneGroupå°†ä¸šåŠ¡è¯·æ±‚åˆ†å‘ç»™agentRouteè§’è‰²çš„Skill</li>
<li><strong>å­ä»»åŠ¡åˆ†é…</strong>ï¼šagentRouteä½œä¸º<strong>å¤šAgentåè°ƒè€…</strong>ï¼Œå°†ä»»åŠ¡åˆ†è§£ä¸ºå­ä»»åŠ¡å¹¶åˆ†é…ç»™å¤šä¸ªendAgent</li>
<li><strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼šå¤šä¸ªendAgentä½œä¸º<strong>å¤šAgentæ‰§è¡Œè€…</strong>ï¼Œå¹¶è¡Œæ‰§è¡Œå­ä»»åŠ¡</li>
<li><strong>ç»“æœèšåˆ</strong>ï¼šagentRouteèšåˆæ‰€æœ‰æ‰§è¡Œç»“æœï¼Œå½¢æˆæœ€ç»ˆå“åº”</li>
<li><strong>ç»“æœè¿”å›</strong>ï¼šå°†èšåˆç»“æœè¿”å›ç»™Sceneæ‰€æœ‰è€…ï¼Œå®Œæˆä¸šåŠ¡è¯·æ±‚</li>
</ul>
<p>è¿™ç§è®¾è®¡å®ç°äº†<strong>å¤šAgenté—´çš„é«˜æ•ˆåä½œ</strong>ï¼Œå……åˆ†åˆ©ç”¨äº†ç³»ç»Ÿèµ„æºï¼Œæé«˜äº†ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ã€‚</p>
<h3 data-id="heading-25">6.2 æ ¸å¿ƒå‘½ä»¤ä½“ç³»</h3>
<h4 data-id="heading-26">6.2.1 Sceneç®¡ç†å‘½ä»¤</h4>























<table><thead><tr><th align="left">å‘½ä»¤åç§°</th><th align="left">æè¿°</th><th align="left">è°ƒç”¨æ–¹</th><th align="left">ä¸»è¦å‚æ•°</th></tr></thead><tbody><tr><td align="left">SceneDeclare</td><td align="left">åœºæ™¯å£°æ˜</td><td align="left">Route/MCP/Skill</td><td align="left">sceneOwner, sceneType, skillId, skillRole, isOwnerDeclaration</td></tr><tr><td align="left">SceneDeclareCancel</td><td align="left">å–æ¶ˆåœºæ™¯å£°æ˜</td><td align="left">Route/MCP/Skill</td><td align="left">sceneType, skillId</td></tr></tbody></table>
<h4 data-id="heading-27">6.2.2 Groupç®¡ç†å‘½ä»¤</h4>















































<table><thead><tr><th align="left">å‘½ä»¤åç§°</th><th align="left">æè¿°</th><th align="left">è°ƒç”¨æ–¹</th><th align="left">ä¸»è¦å‚æ•°</th></tr></thead><tbody><tr><td align="left">SceneGroupCreate</td><td align="left">åˆ›å»ºåœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, sceneType, groupName, skillIds</td></tr><tr><td align="left">SceneGroupUpdate</td><td align="left">æ›´æ–°åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, groupName, skillIds</td></tr><tr><td align="left">SceneGroupDelete</td><td align="left">åˆ é™¤åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId</td></tr><tr><td align="left">SceneGroupAddSkill</td><td align="left">æ·»åŠ Skillåˆ°åœºæ™¯ç»„</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, skillId</td></tr><tr><td align="left">SceneGroupRemoveSkill</td><td align="left">ä»åœºæ™¯ç»„ç§»é™¤Skill</td><td align="left">Sceneæ‰€æœ‰è€…</td><td align="left">groupId, skillId</td></tr><tr><td align="left">SceneGroupQuery</td><td align="left">æŸ¥è¯¢åœºæ™¯ç»„ä¿¡æ¯</td><td align="left">ä»»æ„è§’è‰²</td><td align="left">groupId</td></tr></tbody></table>
<h2 data-id="heading-28">ä¸ƒã€å®æˆ˜æ¡ˆä¾‹ï¼šå·¥ä½œæ—¥æŠ¥è‡ªåŠ¨ç”Ÿæˆåœºæ™¯</h2>
<h3 data-id="heading-29">7.1 åœºæ™¯æè¿°</h3>
<p><strong>åœºæ™¯ç±»å‹</strong>ï¼šREPORTINGï¼ˆæŠ¥å‘Šç”Ÿæˆåœºæ™¯ï¼‰</p>
<p><strong>åœºæ™¯æ‰€æœ‰è€…</strong>ï¼šRouteèŠ‚ç‚¹</p>
<p><strong>å‚ä¸Skill</strong>ï¼š</p>
<ul>
<li>å·¥ä½œæ—¥æŠ¥Skillï¼ˆagentRouteè§’è‰²ï¼‰ï¼šè´Ÿè´£èšåˆå„ç³»ç»Ÿæ•°æ®ï¼Œç”Ÿæˆå·¥ä½œæ—¥æŠ¥</li>
<li>é‚®ä»¶Skillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£å‘é€å·¥ä½œæ—¥æŠ¥é‚®ä»¶</li>
<li>OAç³»ç»ŸSkillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£è·å–OAç³»ç»Ÿä¸­çš„å®¡æ‰¹æ•°æ®</li>
<li>é¡¹ç›®ç®¡ç†Skillï¼ˆendAgentè§’è‰²ï¼‰ï¼šè´Ÿè´£è·å–é¡¹ç›®è¿›åº¦æ•°æ®</li>
</ul>
<h3 data-id="heading-30">7.2 å®ç°è¿‡ç¨‹</h3>
<ol>
<li><strong>Sceneæ‰€æœ‰è€…å£°æ˜</strong>
<ul>
<li>RouteèŠ‚ç‚¹å¯åŠ¨æ—¶ï¼Œé€šè¿‡SceneDeclareå‘½ä»¤å£°æ˜ä¸ºREPORTINGåœºæ™¯çš„æ‰€æœ‰è€…</li>
<li>å‘½ä»¤å‚æ•°ï¼šsceneType=REPORTING, isOwnerDeclaration=true, sceneOwner=route_001</li>
</ul>
</li>
<li><strong>Skillåœºæ™¯æ”¯æŒå£°æ˜</strong>
<ul>
<li>å·¥ä½œæ—¥æŠ¥Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºagentRoute</li>
<li>é‚®ä»¶Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
<li>OAç³»ç»ŸSkillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
<li>é¡¹ç›®ç®¡ç†Skillæ³¨å†Œæ—¶ï¼Œå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼Œè§’è‰²ä¸ºendAgent</li>
</ul>
</li>
<li><strong>è‡ªåŠ¨Groupå½¢æˆ</strong>
<ul>
<li>SceneManageræ£€æµ‹åˆ°REPORTINGåœºæ™¯åŒæ—¶æœ‰æ‰€æœ‰è€…å’Œå¤šä¸ªSkillå£°æ˜</li>
<li>è‡ªåŠ¨åˆ›å»ºSceneGroupï¼šgroupId=group_report_route_001</li>
<li>ç»„å†…åŒ…å«æ‰€æœ‰å£°æ˜æ”¯æŒè¯¥åœºæ™¯çš„Skill</li>
</ul>
</li>
<li><strong>ä»»åŠ¡æ‰§è¡Œ</strong>
<ul>
<li>æ¯å¤©17:30ï¼ŒRouteèŠ‚ç‚¹å‘groupId=group_report_route_001å‘é€ç”Ÿæˆå·¥ä½œæ—¥æŠ¥çš„å‘½ä»¤</li>
<li>å·¥ä½œæ—¥æŠ¥Skillï¼ˆagentRouteï¼‰æ¥æ”¶å‘½ä»¤ï¼Œå‘OAç³»ç»ŸSkillå’Œé¡¹ç›®ç®¡ç†Skillå‘é€æ•°æ®æŸ¥è¯¢è¯·æ±‚</li>
<li>OAç³»ç»ŸSkillè¿”å›å½“å¤©çš„å®¡æ‰¹æ•°æ®</li>
<li>é¡¹ç›®ç®¡ç†Skillè¿”å›å½“å¤©çš„é¡¹ç›®è¿›åº¦æ•°æ®</li>
<li>å·¥ä½œæ—¥æŠ¥Skillèšåˆæ‰€æœ‰æ•°æ®ï¼Œç”Ÿæˆå·¥ä½œæ—¥æŠ¥</li>
<li>å·¥ä½œæ—¥æŠ¥Skillå‘é‚®ä»¶Skillå‘é€å‘é€é‚®ä»¶è¯·æ±‚ï¼ŒåŒ…å«ç”Ÿæˆçš„å·¥ä½œæ—¥æŠ¥</li>
<li>é‚®ä»¶Skillå‘é€å·¥ä½œæ—¥æŠ¥é‚®ä»¶ç»™ç›¸å…³äººå‘˜</li>
</ul>
</li>
</ol>
<h3 data-id="heading-31">7.3 åŠ¨æ€è°ƒæ•´</h3>
<ul>
<li><strong>æ–°SkillåŠ å…¥</strong>ï¼šå¦‚æœåç»­æœ‰æ–°çš„HRç³»ç»ŸSkillå£°æ˜æ”¯æŒREPORTINGåœºæ™¯ï¼ŒSceneManagerä¼šè‡ªåŠ¨å°†å…¶æ·»åŠ åˆ°group_report_route_001ç»„ä¸­</li>
<li><strong>Skillç¦»å¼€</strong>ï¼šå¦‚æœé¡¹ç›®ç®¡ç†Skillæš‚æ—¶ä¸å¯ç”¨ï¼ŒSceneManagerä¼šå°†å…¶ä»ç»„ä¸­ç§»é™¤ï¼Œå·¥ä½œæ—¥æŠ¥Skillä¼šè‡ªåŠ¨è°ƒæ•´æ•°æ®èšåˆé€»è¾‘</li>
</ul>
<h2 data-id="heading-32">å…«ã€è®¾è®¡äº®ç‚¹ä¸åˆ›æ–°</h2>
<h3 data-id="heading-33">8.1 è‡ªä¸»åä½œæœºåˆ¶</h3>
<p>ooderAI Agentçš„Sceneä¸Groupæœºåˆ¶å®ç°äº†çœŸæ­£çš„è‡ªä¸»åä½œï¼ŒAgentå’ŒSkillå¯ä»¥è‡ªä¸»å£°æ˜å’Œå‘ç°åä½œæœºä¼šï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚è¿™ç§è®¾è®¡æå¤§åœ°æé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
<h3 data-id="heading-34">8.2 åœºæ™¯é©±åŠ¨è®¾è®¡</h3>
<p>é€šè¿‡åœºæ™¯é©±åŠ¨çš„è®¾è®¡ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚è‡ªåŠ¨ç»„ç»‡åˆé€‚çš„åä½œèµ„æºï¼Œå®ç°äº†èµ„æºçš„æŒ‰éœ€åˆ†é…å’ŒåŠ¨æ€è°ƒæ•´ã€‚</p>
<h3 data-id="heading-35">8.3 åŠ¨æ€æ‰©å±•æ€§</h3>
<p>æ”¯æŒSkillçš„åŠ¨æ€åŠ å…¥å’Œç¦»å¼€ï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿé€‚åº”ä¸šåŠ¡éœ€æ±‚çš„å˜åŒ–å’Œç³»ç»Ÿè§„æ¨¡çš„æ‰©å±•ã€‚</p>
<h3 data-id="heading-36">8.4 è§’è‰²æ¸…æ™°åˆ†å·¥</h3>
<p>å°†Skillåˆ†ä¸ºagentRouteå’ŒendAgentä¸¤ç§è§’è‰²ï¼Œæ˜ç¡®äº†å„è§’è‰²çš„èŒè´£å’Œåä½œå…³ç³»ï¼Œæé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯é æ€§ã€‚</p>
<h3 data-id="heading-37">8.5 å®Œæ•´çš„å‘½ä»¤ä½“ç³»</h3>
<p>æä¾›äº†å®Œæ•´çš„Sceneå’ŒGroupç®¡ç†å‘½ä»¤ï¼Œä¾¿äºç³»ç»Ÿç®¡ç†å’Œç›‘æ§ï¼Œæ”¯æŒä»å£°æ˜åˆ°æ‰§è¡Œçš„å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</p>
<h2 data-id="heading-38">ä¹ã€æœªæ¥å‘å±•æ–¹å‘</h2>
<h3 data-id="heading-39">9.1 å¢å¼ºåœºæ™¯ç±»å‹è®¾è®¡</h3>
<ul>
<li>å¢åŠ ä¸šåŠ¡åœºæ™¯ç±»å‹ï¼Œæ”¯æŒæ›´å¤šä¸šåŠ¡éœ€æ±‚</li>
<li>æ”¯æŒè‡ªå®šä¹‰åœºæ™¯ç±»å‹ï¼Œæé«˜ç³»ç»Ÿçµæ´»æ€§</li>
<li>å®ç°åœºæ™¯ç±»å‹çš„å±‚çº§å…³ç³»ï¼Œä¾¿äºåœºæ™¯ç®¡ç†</li>
</ul>
<h3 data-id="heading-40">9.2 å®Œå–„åœºæ™¯ç»„æœºåˆ¶</h3>
<ul>
<li>æ”¯æŒä¸€ä¸ªåœºæ™¯ä¸‹å½¢æˆå¤šä¸ªåœºæ™¯ç»„</li>
<li>å®ç°åœºæ™¯ç»„çš„åŠ¨æ€è°ƒæ•´å’Œä¼˜åŒ–</li>
<li>æ”¯æŒåœºæ™¯ç»„çš„è´Ÿè½½å‡è¡¡å’Œå®¹é”™æœºåˆ¶</li>
</ul>
<h3 data-id="heading-41">9.3 ä¸°å¯ŒSkillè§’è‰²</h3>
<ul>
<li>å¢åŠ æ›´å¤šSkillè§’è‰²ç±»å‹ï¼Œæ”¯æŒå¤æ‚åä½œæ¨¡å¼</li>
<li>å®ç°è§’è‰²çš„åŠ¨æ€è½¬æ¢å’Œæƒé™è°ƒæ•´</li>
<li>æ”¯æŒè§’è‰²é—´çš„åä½œåè®®</li>
</ul>
<h3 data-id="heading-42">9.4 å¢å¼ºè·¨åœºæ™¯åä½œ</h3>
<ul>
<li>è®¾è®¡åœºæ™¯é—´çš„å…³è”æœºåˆ¶</li>
<li>å®ç°è·¨åœºæ™¯çš„å‘½ä»¤è·¯ç”±å’Œåä½œ</li>
<li>ä¿éšœè·¨åœºæ™¯åä½œçš„å®‰å…¨æ€§å’Œå¯é æ€§</li>
</ul>
<h2 data-id="heading-43">åã€ç»“è®º</h2>
<p>ooderAI Agentçš„Sceneä¸Groupæœºåˆ¶æ˜¯ä¸€ç§åˆ›æ–°çš„å¤šAgentåä½œç®¡ç†æ–¹å¼ï¼Œå®ƒé€šè¿‡è‡ªä¸»åä½œã€åœºæ™¯é©±åŠ¨ã€åŠ¨æ€æ‰©å±•ç­‰è®¾è®¡ç†å¿µï¼Œè§£å†³äº†ä¼ ç»Ÿå¤šAgentç³»ç»Ÿä¸­çš„åä½œå¤æ‚æ€§ã€åŠ¨æ€æ‰©å±•æ€§ã€èµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿé²æ£’æ€§ç­‰æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>è¿™ä¸€æœºåˆ¶çš„å®ç°ï¼Œä¸ºå¤§è§„æ¨¡Agentç³»ç»Ÿçš„åä½œç®¡ç†æä¾›äº†ä¸€ç§é«˜æ•ˆã€çµæ´»ã€å¯é çš„è§£å†³æ–¹æ¡ˆï¼Œå…·æœ‰å¹¿é˜”çš„åº”ç”¨å‰æ™¯ã€‚éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•å’Œå®Œå–„ï¼ŒSceneä¸Groupæœºåˆ¶å°†åœ¨æ›´å¤šé¢†åŸŸå‘æŒ¥é‡è¦ä½œç”¨ï¼Œæ¨åŠ¨å¤šAgentç³»ç»Ÿå‘æ›´é«˜å±‚æ¬¡å‘å±•ã€‚</p>
<h2 data-id="heading-44">é™„å½•ï¼šæ ¸å¿ƒç±»ä¸æ¥å£</h2>
<ul>
<li><strong>Command.java</strong>ï¼šå‘½ä»¤åŸºç±»ï¼Œå®šä¹‰äº†å‘½ä»¤çš„åŸºæœ¬ç»“æ„</li>
<li><strong>SceneType.java</strong>ï¼šåœºæ™¯ç±»å‹æšä¸¾ï¼Œå®šä¹‰äº†åœºæ™¯ç±»å‹</li>
<li><strong>SceneDeclarationCommand.java</strong>ï¼šåœºæ™¯å£°æ˜å‘½ä»¤ï¼Œç”¨äºåœºæ™¯å£°æ˜</li>
<li><strong>SceneGroupCommand.java</strong>ï¼šåœºæ™¯ç»„å‘½ä»¤ï¼Œç”¨äºåœºæ™¯ç»„ç®¡ç†</li>
<li><strong>SceneManager.java</strong>ï¼šåœºæ™¯ç®¡ç†å™¨ï¼Œè´Ÿè´£åœºæ™¯å’Œç»„ç®¡ç†</li>
<li><strong>CommandEnums.java</strong>ï¼šå‘½ä»¤æšä¸¾ï¼Œå®šä¹‰äº†æ‰€æœ‰å‘½ä»¤ç±»å‹</li>
</ul>
<hr/>
<p><strong>ä½œè€…</strong>ï¼šooderAI Agentç³»ç»Ÿè®¾è®¡å›¢é˜Ÿ</p>
<p><strong>å‘å¸ƒæ—¥æœŸ</strong>ï¼š2026-01-17</p>
<p><strong>ç‰ˆæœ¬</strong>ï¼šv1.0</p>
<p><strong>ç‰ˆæƒæ‰€æœ‰</strong>ï¼šooderAI</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ]]></title>    <link>https://juejin.cn/post/7595901379015180298</link>    <guid>https://juejin.cn/post/7595901379015180298</guid>    <pubDate>2026-01-17T15:59:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379015180298" data-draft-id="7595894884957650995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java,maven"/> <meta itemprop="datePublished" content="2026-01-17T15:59:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Mavenç»ˆæå®æˆ˜æŒ‡å—ï¼šä»é›¶å…¥é—¨åˆ°ä¼ä¸šçº§é¡¹ç›®æ„å»º-å«Maven Wrapperä¸å…¨å‘½ä»¤è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:59:10.000Z" title="Sat Jan 17 2026 15:59:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¸©é¦¨æç¤ºï¼šæœ¬æ–‡å…³äºé…ç½®çš„å†…å®¹è¾ƒé•¿æ‚¨å¯æ ¹æ®ç›®å½•å¤§çº²ï¼Œç›´æ¥è·³è½¬åˆ°æœ€å›°æ‰°ä½ çš„ç« èŠ‚ã€‚å»ºè®®æ­é…å’–å•¡â˜•æˆ–èŒ¶ğŸµäº«ç”¨ï¼Œé£å‘³æ›´ä½³~</strong></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Mavenæ˜¯Javaç”Ÿæ€ç³»ç»Ÿä¸­æœ€æµè¡Œçš„ <strong>é¡¹ç›®ç®¡ç†å’Œæ„å»ºè‡ªåŠ¨åŒ–</strong> å·¥å…·ä¹‹ä¸€ã€‚</p>
<p>å®ƒé€šè¿‡æ ‡å‡†çš„é¡¹ç›®ç»“æ„å’Œçº¦å®šçš„é…ç½®æ–¹å¼ï¼Œç®€åŒ–äº†é¡¹ç›®çš„æ„å»ºã€ä¾èµ–ç®¡ç†å’Œéƒ¨ç½²è¿‡ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Mavençš„æ ¸å¿ƒæ¦‚å¿µã€å‘½ä»¤ä½¿ç”¨ã€é«˜çº§æŠ€å·§ä»¥åŠIDEé›†æˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€MavenåŸºç¡€æ¦‚å¿µ</h2>
<h3 data-id="heading-2">1.1 Mavenæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>Mavenæ˜¯ä¸€ä¸ªåŸºäºé¡¹ç›®å¯¹è±¡æ¨¡å‹ - <strong>Project Object Model (POM)</strong> çš„é¡¹ç›®ç®¡ç†å·¥å…·ï¼Œå®ƒåŒ…å«äº†ï¼š</p>
<ul>
<li><strong>é¡¹ç›®æ„å»º</strong>ï¼šç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€éƒ¨ç½²</li>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šè‡ªåŠ¨ä¸‹è½½å’Œç®¡ç†é¡¹ç›®ä¾èµ–ï¼Œè‡ªåŠ¨ä¸‹è½½ã€ä¼ é€’ä¾èµ–ã€è§£å†³å†²çª</li>
<li><strong>é¡¹ç›®ä¿¡æ¯ç®¡ç†</strong>ï¼šæ–‡æ¡£ç”Ÿæˆã€æŠ¥å‘Šç”Ÿæˆ</li>
<li><strong>é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šæ ‡å‡†åŒ–çš„æ„å»ºè¿‡ç¨‹ï¼Œclean â†’ default â†’ site ä¸‰å¤§ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ªé˜¶æ®µç»‘å®šæ’ä»¶ç›®æ ‡</li>
</ul>
<h3 data-id="heading-3">1.2 Mavenå®‰è£…ä¸é…ç½®</h3>
<h4 data-id="heading-4">å®‰è£…Maven</h4>
<blockquote>
<p>æ“ä½œæ˜¯åœ¨ Linux ç¯å¢ƒä¸‹</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½æœ€æ–°ç‰ˆMaven</span>
wget https://dlcdn.apache.org/maven/maven-3/3.9.12/binaries/apache-maven-3.9.12-bin.tar.gz
tar -zxvf apache-maven-3.9.12-bin.tar.gz  -C /home/warehouse/
</code></pre>
<p>æ­¤æ—¶å¯ä»¥ä¿®æ”¹æ„å»ºéƒ¨ä»¶çš„å­˜å‚¨ä½ç½®ä»¥åŠä¸­å¤®ä»“åº“åœ°å€ï¼Œå¦‚æœä¸ä¿®æ”¹ï¼Œé‚£ä¹ˆæ„å»ºçš„ç»“æœéƒ¨ä»¶å°†ä¼šå­˜å‚¨åˆ°é»˜è®¤ä½ç½® <code>${user.home}/.m2/repository</code> ï¼Œæ‹‰å–é•œåƒæ˜¯ä»é»˜è®¤çš„ä¸­å¤®ä»“åº“æ‹‰å–ï¼ˆç½‘ç»œä¸å¥½çš„æƒ…å†µä¸‹å¯èƒ½å¾ˆæ…¢ç”šè‡³æ‹‰å–å¤±è´¥ï¼‰ã€‚</p>
<p>å»ºè®®ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /home/warehouse/apache-maven-3.9.12/conf
vim settings.xml
</code></pre>
<p>æ ¹æ®éœ€è¦ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>/home/mvn_repo<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">ç¯å¢ƒå˜é‡é…ç½®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨~/.bashrcæˆ–~/.zshrcä¸­æ·»åŠ </span>
<span class="hljs-built_in">export</span> MAVEN_HOME=/home/warehouse/apache-maven-3.9.12
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$MAVEN_HOME</span>/bin:<span class="hljs-variable">$PATH</span>

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
mvn -v
</code></pre>
<pre><code class="hljs language-bash" lang="bash">[root@local-dev conf]<span class="hljs-comment"># vim settings.xml </span>
[root@local-dev conf]<span class="hljs-comment"># </span>
[root@local-dev conf]<span class="hljs-comment"># vim ~/.bashrc</span>
[root@local-dev conf]<span class="hljs-comment"># source ~/.bashrc</span>
[root@local-dev conf]<span class="hljs-comment"># mvn -v</span>
Apache Maven 3.9.12 (848fbb4bf2d427b72bdb2471c22fced7ebd9a7a1)
Maven home: /home/warehouse/apache-maven-3.9.12
Java version: 1.8.0_421, vendor: Oracle Corporation, runtime: /home/warehouse/jdk1.8.0_421/jre
Default locale: en_US, platform encoding: UTF-8
OS name: <span class="hljs-string">"linux"</span>, version: <span class="hljs-string">"5.14.0-570.17.1.el9_6.x86_64"</span>, <span class="hljs-built_in">arch</span>: <span class="hljs-string">"amd64"</span>, family: <span class="hljs-string">"unix"</span>
[root@local-dev conf]<span class="hljs-comment"># </span>

</code></pre>
<p>windows ç¯å¢ƒä¸‹é…ç½® maven éå¸¸ç®€å•ï¼Œè§£å‹åï¼Œåœ¨ç³»ç»Ÿå±æ€§çš„é«˜çº§å±æ€§ä¸­é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64d7a20171c042cf9540d9178196d842~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=xVZFjbn5T%2FEbWmG9lyTBVB%2B79Yo%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åï¼Œåœ¨powersherllç»ˆç«¯éªŒè¯ï¼š</p>
<pre><code class="hljs language-powershell" lang="powershell">PS C:\Users\adm&gt; mvn -v
Apache Maven 3.9.9 (8e8579a9e76f7d015ee5ec7bfcdc97d260186937)
Maven home: D:\Java\apache-maven-3.9.9
Java version: 1.8.0_421, vendor: Oracle Corporation, runtime: D:\Java\java-8\jdk-1.8\jre
Default locale: zh_CN, platform encoding: GBK
OS name: "windows 11", version: "10.0", arch: "amd64", family: "windows"
</code></pre>
<h2 data-id="heading-6">äºŒã€åˆ›å»ºMavené¡¹ç›®</h2>
<blockquote>
<p>ç°åœ¨ä» IDE ä¸Šåˆ›å»º maven é¡¹ç›®éå¸¸ç®€å•ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<p>å½“ç„¶å¦‚æœä½ å°±æƒ³ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºï¼Œå¯ä»¥ä½¿ç”¨Maven Archetypeè¿™æ ·åˆ›å»ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=my-app \
  -DarchetypeArtifactId=maven-archetype-quickstart \
  -DinteractiveMode=<span class="hljs-literal">false</span> \
  -Dversion=1.0.0
</code></pre>
<pre><code class="hljs language-bash" lang="bash">mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=my-webapp \
  -DarchetypeArtifactId=maven-archetype-webapp \
  -DinteractiveMode=<span class="hljs-literal">false</span>
</code></pre>
</blockquote>
<p>è¿™é‡Œï¼Œæˆ‘ä»¥æˆ‘ä»¥æˆ‘çš„å¼€æºé¡¹ç›® <code>spring-insight-sca-demo</code>  ä¸ºä¾‹ï¼Œè¿›è¡Œmavenæ“ä½œå±•ç¤ºã€‚</p>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fiweidujiang%2Fspring-insight-sca-demo" target="_blank" title="https://github.com/iweidujiang/spring-insight-sca-demo" ref="nofollow noopener noreferrer">github.com/iweidujiangâ€¦</a></p>
</blockquote>
<h3 data-id="heading-7">2.1 é¡¹ç›®ç»“æ„è§£æ</h3>
<p>ä¸€ä¸ªmavené¡¹ç›®çš„é¡¹ç›®ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less">é¡¹ç›®æ ¹ç›®å½•
â”‚
â”œâ”€â”€ <span class="hljs-selector-tag">src</span>
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">main</span>
â”‚   â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">java</span>        <span class="hljs-comment">// ä¸»ä»£ç </span>
â”‚   â”‚   â””â”€â”€ <span class="hljs-selector-tag">resources</span>   <span class="hljs-comment">// ä¸»èµ„æºæ–‡ä»¶</span>
â”‚   â””â”€â”€ <span class="hljs-selector-tag">test</span>
â”‚       â”œâ”€â”€ <span class="hljs-selector-tag">java</span>        <span class="hljs-comment">// æµ‹è¯•ä»£ç </span>
â”‚       â””â”€â”€ <span class="hljs-selector-tag">resources</span>   <span class="hljs-comment">// æµ‹è¯•èµ„æºæ–‡ä»¶</span>
â”‚
â”œâ”€â”€ <span class="hljs-selector-tag">target</span>              <span class="hljs-comment">// ç¼–è¯‘è¾“å‡ºç›®å½•</span>
â”‚
â””â”€â”€ <span class="hljs-selector-tag">pom</span><span class="hljs-selector-class">.xml</span>            <span class="hljs-comment">// é¡¹ç›®å¯¹è±¡æ¨¡å‹æ–‡ä»¶</span>
</code></pre>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">â”‚  <span class="hljs-selector-class">.gitignore</span>
â”‚  pom<span class="hljs-selector-class">.xml</span>
â”‚
â””â”€<span class="hljs-attribute">src</span>
    â”œâ”€<span class="hljs-selector-tag">main</span>
    â”‚  â”œâ”€java
    â”‚  â”‚  â””â”€io
    â”‚  â”‚      â””â”€github
    â”‚  â”‚          â””â”€iweidujiang
    â”‚  â”‚              â””â”€gateway
    â”‚  â”‚                      ScaGatewayApplication<span class="hljs-selector-class">.java</span>
    â”‚  â”‚
    â”‚  â””â”€resources
    â””â”€test
        â””â”€java
            â””â”€io
                â””â”€github
                    â””â”€iweidujiang
                        â””â”€gateway
                                ScaGatewayApplicationTests<span class="hljs-selector-class">.java</span>
</code></pre>
<h3 data-id="heading-8">2.2 POM.XMLæ•´ä½“ç»“æ„è§£æ</h3>
<h4 data-id="heading-9">2.2.1 åŸºæœ¬éª¨æ¶</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 
         http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ ¹å…ƒç´ ï¼Œå¿…é¡»çš„å‘½åç©ºé—´å’Œæ¨¡å¼å®šä¹‰ --&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å›ºå®šå€¼ï¼Œè¡¨ç¤ºä½¿ç”¨çš„POMæ¨¡å‹ç‰ˆæœ¬ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- åæ ‡ä¸‰è¦ç´ ï¼šå”¯ä¸€æ ‡è¯†ä¸€ä¸ªé¡¹ç›® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company.project<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    <span class="hljs-comment">&lt;!-- ç»„ç»‡æˆ–å…¬å¸æ ‡è¯† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-application<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>    <span class="hljs-comment">&lt;!-- é¡¹ç›®æ ‡è¯† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>         <span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å· --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ‰“åŒ…ç±»å‹ï¼šjar, war, pom, earç­‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®åç§°å’Œæè¿° --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>My Application<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>A demo application for POM explanation<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://www.company.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç»§æ‰¿å’Œèšåˆé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®ä¿¡æ¯ï¼šå¼€å‘è€…ã€è´¡çŒ®è€…ã€è®¸å¯è¯ç­‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">developers</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">developers</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">contributors</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">contributors</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">licenses</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">licenses</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç»„ç»‡ä¿¡æ¯ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">organization</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">organization</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æºä»£ç ç®¡ç†ç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scm</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">scm</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é—®é¢˜è·Ÿè¸ªç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">issueManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">issueManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æŒç»­é›†æˆç³»ç»Ÿ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ciManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">ciManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- é¡¹ç›®é‚®ä»¶åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mailingLists</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">mailingLists</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å±æ€§å®šä¹‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾èµ–ç®¡ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ä¾èµ–åˆ—è¡¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ„å»ºé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æŠ¥å‘Šé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">reporting</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">reporting</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- ç¯å¢ƒé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h4 data-id="heading-10">2.2.2 åæ ‡ä¸é¡¹ç›®åŸºæœ¬ä¿¡æ¯</h4>
<h5 data-id="heading-11">åæ ‡ç³»ç»Ÿè¯¦è§£</h5>
<p>åæ ‡æ˜¯Mavené¡¹ç›®çš„å”¯ä¸€æ ‡è¯†ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åæ ‡æ˜¯Mavené¡¹ç›®çš„å”¯ä¸€æ ‡è¯† --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company.division.project<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å‘½åè§„èŒƒï¼šåå‘åŸŸå + éƒ¨é—¨/äº§å“çº¿ + é¡¹ç›®å
     ä¾‹å¦‚ï¼šcom.company.division.project â†’ å…¬å¸.éƒ¨é—¨.é¡¹ç›®
     å®é™…æ¡ˆä¾‹ï¼šcom.alibaba.nacos.client --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-application-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-comment">&lt;!-- é¡¹ç›®åç§°ï¼Œé€šå¸¸ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
     å‘½åè§„èŒƒï¼šé¡¹ç›®å-æ¨¡å—å[-å­æ¨¡å—å]
     ä¾‹å¦‚ï¼šspring-boot-starter-web --&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.1-RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç‰ˆæœ¬å·å‘½åè§„èŒƒï¼š
     - ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·[-çŠ¶æ€ç‰ˆæœ¬]
     - SNAPSHOTï¼šå¼€å‘ç‰ˆæœ¬ï¼Œå¯è¢«è¦†ç›–
     - RELEASEï¼šæ­£å¼ç‰ˆæœ¬ï¼Œä¸å¯è¢«è¦†ç›–
     - ç¤ºä¾‹ï¼š1.0.0, 2.1.3-SNAPSHOT, 3.0.0-RELEASE --&gt;</span>

<span class="hljs-comment">&lt;!-- ç‰ˆæœ¬èŒƒå›´è¯­æ³•ï¼ˆåœ¨ä¾èµ–ä¸­ä½¿ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,2.0)<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <span class="hljs-comment">&lt;!-- 1.0 â‰¤ version &lt; 2.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,2.0]<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>  <span class="hljs-comment">&lt;!-- 1.0 â‰¤ version â‰¤ 2.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>(,1.0]<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- version â‰¤ 1.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>[1.0,)<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- version â‰¥ 1.0 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>LATEST<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>     <span class="hljs-comment">&lt;!-- æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>    <span class="hljs-comment">&lt;!-- æœ€æ–°å‘å¸ƒç‰ˆï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ --&gt;</span>
</code></pre>
<h5 data-id="heading-12">ç»§æ‰¿é…ç½®ï¼ˆparentï¼‰</h5>
<p>ä½¿ç”¨ç»§æ‰¿é…ç½®çš„å¥½å¤„ï¼š</p>
<ul>
<li>ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬</li>
<li>ç»Ÿä¸€æ’ä»¶é…ç½®</li>
<li>ç»Ÿä¸€æ„å»ºé…ç½®</li>
<li>ç»Ÿä¸€é¡¹ç›®ä¿¡æ¯</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç»§æ‰¿çˆ¶POMï¼Œå¤ç”¨é…ç½® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.7.18<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç›¸å¯¹è·¯å¾„ï¼Œé»˜è®¤ä¸º../pom.xml --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰çˆ¶POMç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.company<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>company-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>&gt;</span>../parent/pom.xml<span class="hljs-tag">&lt;/<span class="hljs-name">relativePath</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
</code></pre>
<h5 data-id="heading-13">å¤šæ¨¡å—èšåˆï¼ˆmodulesï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- çˆ¶POMä¸­å®šä¹‰å­æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>module1<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>          <span class="hljs-comment">&lt;!-- åŒçº§ç›®å½•ä¸‹çš„module1 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>../module2<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>       <span class="hljs-comment">&lt;!-- ç›¸å¯¹è·¯å¾„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>subprojects/module3<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span> <span class="hljs-comment">&lt;!-- å­ç›®å½•ä¸­çš„æ¨¡å— --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å®é™…ä¼ä¸šé¡¹ç›®ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-domain<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-repository<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-api<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-web<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>ecommerce-batch<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
</code></pre>
<h4 data-id="heading-14">2.2.3 å±æ€§é…ç½®ï¼ˆpropertiesï¼‰</h4>
<h5 data-id="heading-15">é¢„å®šä¹‰å±æ€§</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. æ„å»ºç›¸å…³å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. Javaç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.release</span>&gt;</span>${java.version}<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.release</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. é¡¹ç›®ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">project.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">revision</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">revision</span>&gt;</span>  <span class="hljs-comment">&lt;!-- Maven 3.5.0+ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sha1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sha1</span>&gt;</span>                            <span class="hljs-comment">&lt;!-- Git commit hash --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">changelist</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">changelist</span>&gt;</span>                <span class="hljs-comment">&lt;!-- ç”¨äºç‰ˆæœ¬åç¼€ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. ä¾èµ–ç‰ˆæœ¬ï¼ˆé›†ä¸­ç®¡ç†ï¼‰ --&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.10<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.6<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ•°æ®åº“ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mybatis.version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mybatis-plus.version</span>&gt;</span>3.5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">mybatis-plus.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å·¥å…· --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">lombok.version</span>&gt;</span>1.18.26<span class="hljs-tag">&lt;/<span class="hljs-name">lombok.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mapstruct.version</span>&gt;</span>1.5.5.Final<span class="hljs-tag">&lt;/<span class="hljs-name">mapstruct.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">guava.version</span>&gt;</span>31.1-jre<span class="hljs-tag">&lt;/<span class="hljs-name">guava.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æµ‹è¯• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">junit.version</span>&gt;</span>5.9.2<span class="hljs-tag">&lt;/<span class="hljs-name">junit.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mockito.version</span>&gt;</span>5.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">mockito.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. æ’ä»¶ç‰ˆæœ¬ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-compiler-plugin.version</span>&gt;</span>3.11.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-compiler-plugin.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-surefire-plugin.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-surefire-plugin.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">maven-failsafe-plugin.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">maven-failsafe-plugin.version</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. ç¯å¢ƒç›¸å…³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">active.profile</span>&gt;</span>${env}<span class="hljs-tag">&lt;/<span class="hljs-name">active.profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 7. è‡ªå®šä¹‰å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">company.name</span>&gt;</span>MyCompany<span class="hljs-tag">&lt;/<span class="hljs-name">company.name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.license</span>&gt;</span>Apache-2.0<span class="hljs-tag">&lt;/<span class="hljs-name">project.license</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">docker.registry</span>&gt;</span>registry.company.com<span class="hljs-tag">&lt;/<span class="hljs-name">docker.registry</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">docker.namespace</span>&gt;</span>${company.name}<span class="hljs-tag">&lt;/<span class="hljs-name">docker.namespace</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 8. ç³»ç»Ÿå±æ€§å¼•ç”¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">user.home</span>&gt;</span>${user.home}<span class="hljs-tag">&lt;/<span class="hljs-name">user.home</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">java.io.tmpdir</span>&gt;</span>${java.io.tmpdir}<span class="hljs-tag">&lt;/<span class="hljs-name">java.io.tmpdir</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 9. Mavenå±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.basedir</span>&gt;</span>${project.basedir}<span class="hljs-tag">&lt;/<span class="hljs-name">project.basedir</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.directory</span>&gt;</span>${project.build.directory}<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.directory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.outputDirectory</span>&gt;</span>${project.build.outputDirectory}<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.outputDirectory</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 10. æ¡ä»¶å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">skip.docker.build</span>&gt;</span>${skipTests}<span class="hljs-tag">&lt;/<span class="hljs-name">skip.docker.build</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<h5 data-id="heading-16">å±æ€§ä¼˜å…ˆçº§å’Œä½œç”¨åŸŸ</h5>
<p>åœ¨ <code>pom.xml</code> ä¸­å®šä¹‰çš„å±æ€§æŸ¥æ‰¾é¡ºåºä»é«˜åˆ°ä½æ’åˆ—å¦‚ä¸‹ï¼š</p>
<ol>
<li>å‘½ä»¤è¡Œå±æ€§ï¼š-Dproperty=value</li>
<li>POMä¸­çš„properties</li>
<li>settings.xmlä¸­çš„properties</li>
<li>ç³»ç»Ÿå±æ€§</li>
<li>ç¯å¢ƒå˜é‡</li>
<li>èµ„æºè¿‡æ»¤ä¸­çš„propertiesæ–‡ä»¶</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å±æ€§æŸ¥æ‰¾é¡ºåºï¼ˆä»é«˜åˆ°ä½ï¼‰ï¼š
     1. å‘½ä»¤è¡Œå±æ€§ï¼š-Dproperty=value
     2. POMä¸­çš„properties
     3. settings.xmlä¸­çš„properties
     4. ç³»ç»Ÿå±æ€§
     5. ç¯å¢ƒå˜é‡
     6. èµ„æºè¿‡æ»¤ä¸­çš„propertiesæ–‡ä»¶ --&gt;</span>

<span class="hljs-comment">&lt;!-- ç¤ºä¾‹ï¼šä¸åŒæ¥æºçš„å±æ€§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- POMä¸­çš„å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">app.name</span>&gt;</span>MyApp<span class="hljs-tag">&lt;/<span class="hljs-name">app.name</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨settings.xmlä¸­çš„å±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">nexus.url</span>&gt;</span>${settings.nexus.url}<span class="hljs-tag">&lt;/<span class="hljs-name">nexus.url</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨ç³»ç»Ÿå±æ€§ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">line.separator</span>&gt;</span>${line.separator}<span class="hljs-tag">&lt;/<span class="hljs-name">line.separator</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•ç”¨ç¯å¢ƒå˜é‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">jenkins.build.number</span>&gt;</span>${env.BUILD_NUMBER}<span class="hljs-tag">&lt;/<span class="hljs-name">jenkins.build.number</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
</code></pre>
<h4 data-id="heading-17">2.2.4 ä¾èµ–ç®¡ç†ï¼ˆdependencies &amp; dependencyManagementï¼‰</h4>
<h5 data-id="heading-18">ä¾èµ–å£°æ˜è¯¦è§£</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. ç¼–è¯‘æœŸä¾èµ–ï¼ˆé»˜è®¤scopeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ä¸éœ€è¦å†™versionï¼Œå¦‚æœçˆ¶POMæˆ–dependencyManagementä¸­å·²å®šä¹‰ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. ä¾èµ–ä½œç”¨åŸŸï¼ˆscopeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. ä¾èµ–æ’é™¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>ch.qos.logback<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>logback-classic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. åˆ†ç±»å™¨ï¼ˆclassifierï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.spark<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spark-core_2.12<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>hadoop3.2<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. ç³»ç»Ÿä¾èµ–ï¼ˆä¸æ¨èï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>custom-lib<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>system<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemPath</span>&gt;</span>${project.basedir}/lib/custom-lib.jar<span class="hljs-tag">&lt;/<span class="hljs-name">systemPath</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. å¯é€‰ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${guava.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 7. ç±»å‹ï¼ˆtypeï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>my-service<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å¯¼å…¥pomç±»å‹çš„ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 8. æµ‹è¯•ä¾èµ– --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.junit.jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-jupiter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${junit.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h5 data-id="heading-19">ä¾èµ–ä½œç”¨åŸŸè¯¦è§£</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- scopeçš„å…­ç§ç±»å‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. compileï¼ˆé»˜è®¤ï¼‰ï¼šç¼–è¯‘ã€æµ‹è¯•ã€è¿è¡Œéƒ½æœ‰æ•ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. providedï¼šç¼–è¯‘å’Œæµ‹è¯•æœ‰æ•ˆï¼Œè¿è¡Œæ—¶ç”±å®¹å™¨æä¾› --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>javax.servlet<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>javax.servlet-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. runtimeï¼šè¿è¡Œå’Œæµ‹è¯•æœ‰æ•ˆï¼Œç¼–è¯‘ä¸éœ€è¦ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. testï¼šä»…åœ¨æµ‹è¯•æ—¶æœ‰æ•ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mockito<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mockito-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. systemï¼šç±»ä¼¼providedï¼Œä½†éœ€è¦æŒ‡å®šsystemPath --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.sun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>tools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>system<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">systemPath</span>&gt;</span>${java.home}/../lib/tools.jar<span class="hljs-tag">&lt;/<span class="hljs-name">systemPath</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. importï¼šä»…ç”¨äºdependencyManagementä¸­ --&gt;</span>
    <span class="hljs-comment">&lt;!-- åœ¨dependencyManagementéƒ¨åˆ†ä½¿ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h5 data-id="heading-20">ä¾èµ–ç®¡ç†ï¼ˆdependencyManagementï¼‰</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- çˆ¶POMä¸­çš„dependencyManagement --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 1. ç»Ÿä¸€ç®¡ç†ä¾èµ–ç‰ˆæœ¬ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 2. è‡ªå®šä¹‰ä¾èµ–ç‰ˆæœ¬ç®¡ç† --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-databind<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.14.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${guava.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 3. å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬ï¼ˆè¦†ç›–ä¼ é€’ä¾èµ–ï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>slf4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 4. BOMå¯¼å…¥ï¼ˆBill of Materialsï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å­æ¨¡å—ä¸­åªéœ€å£°æ˜groupIdå’ŒartifactId --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç‰ˆæœ¬ä»çˆ¶POMçš„dependencyManagementç»§æ‰¿ --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h4 data-id="heading-21">2.2.5 æ„å»ºé…ç½®ï¼ˆbuildï¼‰</h4>
<h5 data-id="heading-22">åŸºç¡€æ„å»ºé…ç½®</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. è¾“å‡ºç›®å½•é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/target<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ„å»ºè¾“å‡ºç›®å½• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/classes<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">testOutputDirectory</span>&gt;</span>${project.build.directory}/test-classes<span class="hljs-tag">&lt;/<span class="hljs-name">testOutputDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">sourceDirectory</span>&gt;</span>${project.basedir}/src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">sourceDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">testSourceDirectory</span>&gt;</span>${project.basedir}/src/test/java<span class="hljs-tag">&lt;/<span class="hljs-name">testSourceDirectory</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ˜¯å¦å¯ç”¨èµ„æºè¿‡æ»¤ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.yaml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.secret<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/test/**<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- å¤šèµ„æºç›®å½•é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/main/config<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">targetPath</span>&gt;</span>config<span class="hljs-tag">&lt;/<span class="hljs-name">targetPath</span>&gt;</span>  <span class="hljs-comment">&lt;!-- è¾“å‡ºåˆ°classes/config --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>${project.basedir}/src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. æ’ä»¶é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- ç¼–è¯‘å™¨æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-compiler-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>${maven.compiler.source}<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>${maven.compiler.target}<span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">release</span>&gt;</span>${maven.compiler.release}<span class="hljs-tag">&lt;/<span class="hljs-name">release</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>${project.build.sourceEncoding}<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">parameters</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">parameters</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ä¿ç•™æ–¹æ³•å‚æ•°å --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">showWarnings</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">showWarnings</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">showDeprecation</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">showDeprecation</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">compilerArgs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Xlint:all<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Xlint:-processing<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">arg</span>&gt;</span>-Werror<span class="hljs-tag">&lt;/<span class="hljs-name">arg</span>&gt;</span>  <span class="hljs-comment">&lt;!-- å°†è­¦å‘Šè§†ä¸ºé”™è¯¯ --&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">compilerArgs</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- æ³¨è§£å¤„ç†å™¨é…ç½® --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">annotationProcessorPaths</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${lombok.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">path</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mapstruct<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mapstruct-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${mapstruct.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">annotationProcessorPaths</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æµ‹è¯•æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-surefire-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>${skipTests}<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">testFailureIgnore</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">testFailureIgnore</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*Test.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*Tests.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*IntegrationTest.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*IT.java<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">parallel</span>&gt;</span>classes<span class="hljs-tag">&lt;/<span class="hljs-name">parallel</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">threadCount</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">threadCount</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">forkCount</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">forkCount</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">reuseForks</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">reuseForks</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">argLine</span>&gt;</span>-Xmx512m<span class="hljs-tag">&lt;/<span class="hljs-name">argLine</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">systemPropertyVariables</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">java.awt.headless</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">java.awt.headless</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">user.timezone</span>&gt;</span>UTC<span class="hljs-tag">&lt;/<span class="hljs-name">user.timezone</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">systemPropertyVariables</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- é›†æˆæµ‹è¯•æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-failsafe-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-failsafe-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>${skipITs}<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*IT.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*IntegrationTest.java<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>integration-test<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. æ’ä»¶ç®¡ç† --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${maven-compiler-plugin.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. æ‰©å±•é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">extensions</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">extension</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.wagon<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>wagon-ssh<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">extension</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">extensions</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. é»˜è®¤ç›®æ ‡é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">defaultGoal</span>&gt;</span>install<span class="hljs-tag">&lt;/<span class="hljs-name">defaultGoal</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 6. è¿‡æ»¤å™¨é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">filters</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>${project.basedir}/src/main/filters/${env}.properties<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h5 data-id="heading-23">é«˜çº§æ’ä»¶é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 1. JARæ‰“åŒ…æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jar-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">addClasspath</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">addClasspath</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">classpathPrefix</span>&gt;</span>lib/<span class="hljs-tag">&lt;/<span class="hljs-name">classpathPrefix</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifestEntries</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Title</span>&gt;</span>${project.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Title</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Version</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Version</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Implementation-Vendor</span>&gt;</span>${company.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Implementation-Vendor</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Built-By</span>&gt;</span>${user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">Built-By</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Build-Timestamp</span>&gt;</span>${maven.build.timestamp}<span class="hljs-tag">&lt;/<span class="hljs-name">Build-Timestamp</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">Created-By</span>&gt;</span>Maven ${maven.version}<span class="hljs-tag">&lt;/<span class="hljs-name">Created-By</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifestEntries</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 2. èµ„æºæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">delimiters</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">delimiter</span>&gt;</span>@<span class="hljs-tag">&lt;/<span class="hljs-name">delimiter</span>&gt;</span>  <span class="hljs-comment">&lt;!-- é»˜è®¤æ˜¯${}ï¼Œå¯æ”¹ä¸º@ --&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">delimiters</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">useDefaultDelimiters</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">useDefaultDelimiters</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">escapeString</span>&gt;</span>\<span class="hljs-tag">&lt;/<span class="hljs-name">escapeString</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">overwrite</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overwrite</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">includeEmptyDirs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">includeEmptyDirs</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 3. æºç æ‰“åŒ…æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-source-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-sources<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar-no-fork<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 4. Javadocæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-javadoc-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">show</span>&gt;</span>private<span class="hljs-tag">&lt;/<span class="hljs-name">show</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">nohelp</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">nohelp</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">detectJavaApiLink</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">detectJavaApiLink</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">doclint</span>&gt;</span>all<span class="hljs-tag">&lt;/<span class="hljs-name">doclint</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">failOnError</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">failOnError</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">source</span>&gt;</span>${maven.compiler.source}<span class="hljs-tag">&lt;/<span class="hljs-name">source</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>${project.build.sourceEncoding}<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">charset</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">charset</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">docencoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">docencoding</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>attach-javadocs<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>jar<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 5. ä¾èµ–æ‹·è´æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-dependency-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>copy-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>copy-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/lib<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteReleases</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteReleases</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteSnapshots</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteSnapshots</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">overWriteIfNewer</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">overWriteIfNewer</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">includeScope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">includeScope</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">excludeTransitive</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">excludeTransitive</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">silent</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">silent</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 6. Assemblyæ’ä»¶ï¼ˆæ‰“åŒ…å¯æ‰§è¡ŒJARï¼‰ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-assembly-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">descriptorRefs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">descriptorRef</span>&gt;</span>jar-with-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">descriptorRef</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">descriptorRefs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">archive</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">archive</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">appendAssemblyId</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">appendAssemblyId</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>make-assembly<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>single<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 7. Spring Bootæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">mainClass</span>&gt;</span>com.company.MainApplication<span class="hljs-tag">&lt;/<span class="hljs-name">mainClass</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">layout</span>&gt;</span>JAR<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>  <span class="hljs-comment">&lt;!-- JAR, WAR, ZIP, DIR, NONE --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">executable</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">executable</span>&gt;</span>  <span class="hljs-comment">&lt;!-- è®¾ç½®ä¸ºtrueç”Ÿæˆå¯æ‰§è¡Œè„šæœ¬ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">classifier</span>&gt;</span>exec<span class="hljs-tag">&lt;/<span class="hljs-name">classifier</span>&gt;</span>  <span class="hljs-comment">&lt;!-- åˆ†ç±»å™¨ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">jvmArguments</span>&gt;</span>-Xmx512m -Xms256m<span class="hljs-tag">&lt;/<span class="hljs-name">jvmArguments</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">arguments</span>&gt;</span>--spring.profiles.active=${env}<span class="hljs-tag">&lt;/<span class="hljs-name">arguments</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">embeddedLaunchScript</span>&gt;</span>launch.script<span class="hljs-tag">&lt;/<span class="hljs-name">embeddedLaunchScript</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>repackage<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 8. ç‰ˆæœ¬æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.codehaus.mojo<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>versions-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.15.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">generateBackupPoms</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">generateBackupPoms</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowMajorUpdates</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">allowMajorUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowMinorUpdates</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">allowMinorUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowIncrementalUpdates</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">allowIncrementalUpdates</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">allowSnapshots</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">allowSnapshots</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span>org.springframework.boot:*<span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 9. è¦†ç›–ç‡æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jacoco<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jacoco-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.8.9<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>prepare-agent<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>report<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>report<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">outputDirectory</span>&gt;</span>${project.build.directory}/jacoco-report<span class="hljs-tag">&lt;/<span class="hljs-name">outputDirectory</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">rules</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">rule</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">element</span>&gt;</span>BUNDLE<span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">limits</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-name">limit</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">counter</span>&gt;</span>INSTRUCTION<span class="hljs-tag">&lt;/<span class="hljs-name">counter</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>COVEREDRATIO<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
                                        <span class="hljs-tag">&lt;<span class="hljs-name">minimum</span>&gt;</span>0.80<span class="hljs-tag">&lt;/<span class="hljs-name">minimum</span>&gt;</span>
                                    <span class="hljs-tag">&lt;/<span class="hljs-name">limit</span>&gt;</span>
                                <span class="hljs-tag">&lt;/<span class="hljs-name">limits</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">rule</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">rules</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 10. æ£€æŸ¥æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-checkstyle-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">configLocation</span>&gt;</span>checkstyle.xml<span class="hljs-tag">&lt;/<span class="hljs-name">configLocation</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">encoding</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">consoleOutput</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">consoleOutput</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">failsOnError</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">failsOnError</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">linkXRef</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">linkXRef</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- 11. Dockeræ„å»ºæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.spotify<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>dockerfile-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.4.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>${docker.registry}/${docker.namespace}/${project.artifactId}<span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">tag</span>&gt;</span>${project.version}<span class="hljs-tag">&lt;/<span class="hljs-name">tag</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">buildArgs</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">JAR_FILE</span>&gt;</span>${project.build.finalName}.jar<span class="hljs-tag">&lt;/<span class="hljs-name">JAR_FILE</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">buildArgs</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">skip</span>&gt;</span>${skip.docker.build}<span class="hljs-tag">&lt;/<span class="hljs-name">skip</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>build-image<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>package<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>build<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>push-image<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>deploy<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>push<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">tag</span>&gt;</span>latest<span class="hljs-tag">&lt;/<span class="hljs-name">tag</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h4 data-id="heading-24">2.2.6 Profileé…ç½®</h4>
<h5 data-id="heading-25">ProfileåŸºç¡€é…ç½®</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- 1. å¼€å‘ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æ¿€æ´»æ¡ä»¶ï¼šé»˜è®¤æ¿€æ´» --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºæ–‡ä»¶å­˜åœ¨ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">file</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">exists</span>&gt;</span>src/main/resources/application-dev.yml<span class="hljs-tag">&lt;/<span class="hljs-name">exists</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">file</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºæ“ä½œç³»ç»Ÿ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">os</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">family</span>&gt;</span>Windows<span class="hljs-tag">&lt;/<span class="hljs-name">family</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Windows 10<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">arch</span>&gt;</span>amd64<span class="hljs-tag">&lt;/<span class="hljs-name">arch</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">os</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºJDKç‰ˆæœ¬ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>[11,18)<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- æˆ–åŸºäºå±æ€§ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>DEBUG<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å¼€å‘ç¯å¢ƒä¸“ç”¨ä¾èµ– --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-dev.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">jvmArguments</span>&gt;</span>
                            -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005
                        <span class="hljs-tag">&lt;/<span class="hljs-name">jvmArguments</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 2. æµ‹è¯•ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>INFO<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">database.url</span>&gt;</span>jdbc:mysql://test-db:3306/app_test<span class="hljs-tag">&lt;/<span class="hljs-name">database.url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-test.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 3. ç”Ÿäº§ç¯å¢ƒProfile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>env<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">env</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">env</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">spring.profiles.active</span>&gt;</span>prod<span class="hljs-tag">&lt;/<span class="hljs-name">spring.profiles.active</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">log.level</span>&gt;</span>WARN<span class="hljs-tag">&lt;/<span class="hljs-name">log.level</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">database.url</span>&gt;</span>jdbc:mysql://prod-db:3306/app_prod?useSSL=true<span class="hljs-tag">&lt;/<span class="hljs-name">database.url</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç§»é™¤å¼€å‘ä¾èµ– --&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/application-prod.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">executable</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">executable</span>&gt;</span>  <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒç”Ÿæˆå¯æ‰§è¡ŒJAR --&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 4. ä»£ç è´¨é‡Profile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>quality<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipTests</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipTests</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">skipITs</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">skipITs</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-checkstyle-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-pmd-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.20.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>verify<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jacoco<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jacoco-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>check<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- 5. éƒ¨ç½²Profile --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>deploy<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">deploy.skip</span>&gt;</span>false<span class="hljs-tag">&lt;/<span class="hljs-name">deploy.skip</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">distributionManagement</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">repository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-releases<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Releases Repository<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus.company.com/repository/maven-releases/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">repository</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">snapshotRepository</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-snapshots<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Snapshots Repository<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://nexus.company.com/repository/maven-snapshots/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">snapshotRepository</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">distributionManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">skip</span>&gt;</span>${deploy.skip}<span class="hljs-tag">&lt;/<span class="hljs-name">skip</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span>
</code></pre>
<h5 data-id="heading-26">Profileæ¿€æ´»ä¸ä½¿ç”¨</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- settings.xmlä¸­çš„Profileæ¿€æ´» --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">activeProfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activeProfile</span>&gt;</span>dev<span class="hljs-tag">&lt;/<span class="hljs-name">activeProfile</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">activeProfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å‘½ä»¤è¡Œæ¿€æ´»Profile --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -P dev,test --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -P !prod --&gt;</span>  <span class="hljs-comment">&lt;!-- æ’é™¤prod --&gt;</span>
<span class="hljs-comment">&lt;!-- mvn clean install -Denv=test --&gt;</span>  <span class="hljs-comment">&lt;!-- é€šè¿‡å±æ€§æ¿€æ´» --&gt;</span>
</code></pre>
<h3 data-id="heading-27">2.3 æ¡ˆä¾‹</h3>
<p>ä¸‹é¢æ˜¯æˆ‘çš„å¼€æºé¡¹ç›® <code>spring-insight</code> çš„æµ‹è¯•é¡¹ç›®ï¼Œä»¥mavenå¤šæ¨¡å—çˆ¶å­é¡¹ç›®æ„å»ºï¼Œçˆ¶é¡¹ç›® pom.xmlï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-sca-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-order<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-product<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>sca-user<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.boot.version</span>&gt;</span>3.5.9<span class="hljs-tag">&lt;/<span class="hljs-name">spring.boot.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.cloud.version</span>&gt;</span>2023.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">spring.cloud.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.cloud.alibaba.version</span>&gt;</span>2023.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring.cloud.alibaba.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring.insight.version</span>&gt;</span>0.1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">spring.insight.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Cloud --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Cloud Alibaba --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.cloud.alibaba.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

            <span class="hljs-comment">&lt;!-- Spring Insight --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring.insight.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<p>å­æ¨¡å— <code>sca-gateway</code> çš„ pom.xmlï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span>
         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-sca-demo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sca-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>ç½‘å…³æœåŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Cloud Gateway --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Nacos Discovery --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Spring Insight --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.iweidujiang<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-insight-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h2 data-id="heading-28">ä¸‰ã€Mavenæ ¸å¿ƒå‘½ä»¤è¯¦è§£</h2>
<h3 data-id="heading-29">3.1 ç”Ÿå‘½å‘¨æœŸå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¸…ç†é¡¹ç›®</span>
mvn clean
<span class="hljs-comment"># æ¸…ç†å¹¶åˆ é™¤targetç›®å½•</span>
mvn clean -Dclean.verbose=<span class="hljs-literal">true</span>

<span class="hljs-comment"># ç¼–è¯‘é¡¹ç›®</span>
mvn compile
<span class="hljs-comment"># åªç¼–è¯‘ç‰¹å®šæ¨¡å—</span>
mvn compile -pl module-name
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•ç¼–è¯‘</span>
mvn compile -DskipTests

<span class="hljs-comment"># æµ‹è¯•é¡¹ç›®</span>
mvn <span class="hljs-built_in">test</span>
<span class="hljs-comment"># è¿è¡Œç‰¹å®šæµ‹è¯•ç±»</span>
mvn <span class="hljs-built_in">test</span> -Dtest=TestClass
<span class="hljs-comment"># è¿è¡ŒåŒ¹é…æ¨¡å¼çš„æµ‹è¯•</span>
mvn <span class="hljs-built_in">test</span> -Dtest=<span class="hljs-string">"*Test"</span>
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•</span>
mvn <span class="hljs-built_in">test</span> -DskipTests
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•ç¼–è¯‘å’Œæ‰§è¡Œ</span>
mvn <span class="hljs-built_in">test</span> -DskipTests -DskipITs

<span class="hljs-comment"># æ‰“åŒ…é¡¹ç›®</span>
mvn package
<span class="hljs-comment"># æŒ‡å®šæ‰“åŒ…ç±»å‹</span>
mvn package -Dpackaging=jar
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•æ‰“åŒ…</span>
mvn package -DskipTests

<span class="hljs-comment"># å®‰è£…åˆ°æœ¬åœ°ä»“åº“</span>
mvn install
<span class="hljs-comment"># è·³è¿‡æµ‹è¯•å®‰è£…</span>
mvn install -DskipTests
<span class="hljs-comment"># å¼ºåˆ¶é‡æ–°å®‰è£…</span>
mvn install -U

<span class="hljs-comment"># éƒ¨ç½²åˆ°è¿œç¨‹ä»“åº“</span>
mvn deploy
<span class="hljs-comment"># éƒ¨ç½²åˆ°ç‰¹å®šä»“åº“</span>
mvn deploy -DaltDeploymentRepository=<span class="hljs-built_in">id</span>::layout::url

<span class="hljs-comment"># éªŒè¯é¡¹ç›®</span>
mvn validate

<span class="hljs-comment"># ç”Ÿæˆç«™ç‚¹æ–‡æ¡£</span>
mvn site
mvn site:deploy
</code></pre>
<h3 data-id="heading-30">3.2 ä¾èµ–ç®¡ç†å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ä¾èµ–æ ‘</span>
mvn dependency:tree
<span class="hljs-comment"># æ˜¾ç¤ºç‰¹å®šèŒƒå›´çš„ä¾èµ–æ ‘</span>
mvn dependency:tree -Dincludes=groupId:artifactId
<span class="hljs-comment"># æ˜¾ç¤ºé‡å¤ä¾èµ–</span>
mvn dependency:tree -Dverbose

<span class="hljs-comment"># åˆ†æä¾èµ–</span>
mvn dependency:analyze
mvn dependency:analyze-duplicate
mvn dependency:analyze-only

<span class="hljs-comment"># å¤åˆ¶ä¾èµ–åˆ°ç›®å½•</span>
mvn dependency:copy-dependencies
mvn dependency:copy-dependencies -DoutputDirectory=lib

<span class="hljs-comment"># è§£å†³ä¾èµ–é—®é¢˜</span>
mvn dependency:resolve
mvn dependency:resolve-plugins

<span class="hljs-comment"># ä¸‹è½½æºç </span>
mvn dependency:sources
<span class="hljs-comment"># ä¸‹è½½javadoc</span>
mvn dependency:javadoc

<span class="hljs-comment"># æ£€æŸ¥ä¾èµ–æ›´æ–°</span>
mvn versions:display-dependency-updates
mvn versions:display-plugin-updates

<span class="hljs-comment"># æ›´æ–°ä¾èµ–ç‰ˆæœ¬</span>
mvn versions:use-latest-versions
mvn versions:use-next-releases
</code></pre>
<h3 data-id="heading-31">3.3 æ’ä»¶ç›¸å…³å‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰æ’ä»¶</span>
mvn <span class="hljs-built_in">help</span>:effective-pom
mvn <span class="hljs-built_in">help</span>:effective-settings

<span class="hljs-comment"># æ’ä»¶å¸®åŠ©</span>
mvn <span class="hljs-built_in">help</span>:describe -Dplugin=compiler
mvn <span class="hljs-built_in">help</span>:describe -Dplugin=compiler -Ddetail

<span class="hljs-comment"># è¿è¡Œæ’ä»¶ç›®æ ‡</span>
mvn compiler:compile
mvn surefire:<span class="hljs-built_in">test</span>
mvn jar:jar

<span class="hljs-comment"># ç”Ÿæˆé¡¹ç›®æ–‡æ¡£</span>
mvn javadoc:javadoc
mvn javadoc:jar

<span class="hljs-comment"># ç”Ÿæˆå¯æ‰§è¡ŒJAR</span>
mvn assembly:single
mvn assembly:assembly -DdescriptorId=jar-with-dependencies
</code></pre>
<h3 data-id="heading-32">3.4 å¤šæ¨¡å—é¡¹ç›®ç®¡ç†</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå¤šæ¨¡å—é¡¹ç›®ç»“æ„</span>
mvn archetype:generate \
  -DgroupId=com.example \
  -DartifactId=parent-project \
  -DarchetypeArtifactId=maven-archetype-site-simple \
  -DinteractiveMode=<span class="hljs-literal">false</span>

<span class="hljs-comment"># æ„å»ºæ‰€æœ‰æ¨¡å—</span>
mvn clean install
<span class="hljs-comment"># æ„å»ºç‰¹å®šæ¨¡å—</span>
mvn clean install -pl module1,module2
<span class="hljs-comment"># æ„å»ºæ¨¡å—åŠå…¶ä¾èµ–</span>
mvn clean install -pl module1 -am
<span class="hljs-comment"># ä»æŒ‡å®šæ¨¡å—å¼€å§‹æ„å»º</span>
mvn clean install -rf module1

<span class="hljs-comment"># å¹¶è¡Œæ„å»º</span>
mvn clean install -T 4
mvn clean install -T 1C  <span class="hljs-comment"># æ¯ä¸ªCPUæ ¸å¿ƒä¸€ä¸ªçº¿ç¨‹</span>
</code></pre>
<h2 data-id="heading-33">å››ã€Maven Wrapperè¯¦è§£</h2>
<h3 data-id="heading-34">4.1 ä¸ºä»€ä¹ˆéœ€è¦Maven Wrapperï¼Ÿ</h3>
<p>Maven Wrapperç¡®ä¿é¡¹ç›®ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬çš„Mavenï¼Œæ— éœ€åœ¨ç³»ç»Ÿä¸Šå…¨å±€å®‰è£…Mavenã€‚</p>
<h3 data-id="heading-35">4.2 åˆå§‹åŒ–Maven Wrapper</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸ºç°æœ‰é¡¹ç›®æ·»åŠ Maven Wrapper</span>
mvn wrapper:wrapper
<span class="hljs-comment"># æŒ‡å®šMavenç‰ˆæœ¬</span>
mvn wrapper:wrapper -Dmaven=3.9.9

<span class="hljs-comment"># æˆ–è€…ä½¿ç”¨wrapperç›®æ ‡</span>
mvn -N io.takari:maven:wrapper -DmavenVersion=3.9.9
</code></pre>
<p>æ‰§è¡Œåï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ <code>.mvn</code> æ–‡ä»¶å¤¹ä»¥åŠ <code>mvnw</code> (Linuxä¸‹çš„æ‰§è¡Œå‘½å)å’Œ <code>mvnw.cmd</code> (Windowsä¸‹çš„æ‰§è¡Œå‘½ä»¤)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8bd2797baf4163a701abb98e4f178c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=EMMXHS0VDog4SytG4GBa7cnxiF8%3D" alt="image-20260117221734397.png" loading="lazy"/></p>
<h3 data-id="heading-36">4.3 ä½¿ç”¨Maven Wrapper</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Unix/Linux/Mac</span>
./mvnw clean install

<span class="hljs-comment"># Windows</span>
mvnw.cmd clean install

<span class="hljs-comment"># æ›´æ–°Maven Wrapperç‰ˆæœ¬</span>
./mvnw wrapper:wrapper -Dmaven=3.9.9
</code></pre>
<h3 data-id="heading-37">4.4 è‡ªå®šä¹‰Maven Wrapperé…ç½®</h3>
<p><code>.mvn/wrapper/maven-wrapper.properties</code>:</p>
<pre><code class="hljs language-properties" lang="properties">distributionUrl=https://maven.aliyun.com/repository/public/org/apache/maven/apache-maven/3.9.9/apache-maven-3.9.9-bin.zip
wrapperUrl=https://repo.maven.apache.org/maven2/org/apache/maven/wrapper/maven-wrapper/3.3.4/maven-wrapper-3.1.1.jar
</code></pre>
<h3 data-id="heading-38">4.5 è¿›é˜¶Wrapperä½¿ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¦»çº¿æ¨¡å¼</span>
./mvnw clean install -o

<span class="hljs-comment"># è°ƒè¯•æ¨¡å¼</span>
./mvnw clean install -X

<span class="hljs-comment"># æŒ‡å®šæœ¬åœ°ä»“åº“</span>
./mvnw clean install -Dmaven.repo.local=/path/to/repo
</code></pre>
<h2 data-id="heading-39">äº”ã€å®æˆ˜é¡¹ç›®ï¼šæ„å»ºä¸€ä¸ªå¤šæ¨¡å—Spring Bootåº”ç”¨</h2>
<h3 data-id="heading-40">5.1 é¡¹ç›®ç»“æ„è®¾è®¡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1bc258a36e24383a03175084f6c8bd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=uAkWoBiL%2FRrYBkIKPicarNLBXcg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-41">5.2 æ„å»ºå‘½ä»¤ç¤ºä¾‹</h3>
<p>åˆå§‹åŒ– maven wrapper</p>
<pre><code class="hljs language-powershell" lang="powershell">PS E:\code_repository\openSource\spring-insight-sca-demo&gt; mvn wrapper:wrapper
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨                    [pom]
[INFO] ç½‘å…³æœåŠ¡                                                               [jar]
[INFO] SCA Order                                                          [jar]
[INFO] SCA Product                                                        [jar]
[INFO] SCA User                                                           [jar]
... ä¸€äº›ä¸‹è½½ä¿¡æ¯ ...
[INFO]
[INFO] -----------&lt; io.github.iweidujiang:spring-insight-sca-demo &gt;------------
[INFO] Building Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ 1.0.0-SNAPSHOT [1/5]
[INFO]   from pom.xml
[INFO] --------------------------------[ pom ]---------------------------------
[INFO] 
... ä¸€äº›ä¸‹è½½ä¿¡æ¯ ...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary for Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ 1.0.0-SNAPSHOT:
[INFO]
[INFO] Spring Insight åœ¨ Spring Cloud Alibaba å¾®æœåŠ¡é¡¹ç›®ä¸­çš„ä½¿ç”¨ .... SUCCESS [  0.638 s]
[INFO] ç½‘å…³æœåŠ¡ ............................................... SKIPPED
[INFO] SCA Order .......................................... SKIPPED
[INFO] SCA Product ........................................ SKIPPED
[INFO] SCA User ........................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.001 s
[INFO] Finished at: 2026-01-17T22:03:10+08:00
[INFO] ------------------------------------------------------------------------
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2f72a6901844989a491c7d1b5aad854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769270349&amp;x-signature=6vsfOd1VskgSAe2g0lJPMuIlPiY%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åæˆ‘ä»¬å†åšä¸€äº›é…ç½®ï¼Œä½¿ maven åœ¨é¡¹ç›®çº§ç”Ÿæ•ˆï¼Œä¸å½±å“å…¶ä»–é¡¹ç›®ï¼Œè¿™ä¹Ÿæ˜¯æœ€ä½³å®è·µã€‚</p>
<p>é¦–å…ˆï¼Œ<strong>åœ¨ <code>.mvn</code> æ–‡ä»¶å¤¹å†…æ–°å»º <code>maven.config</code> æ–‡ä»¶</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚ä¸‹é…ç½®è¡¨ç¤ºmavenä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„settings.xml</span>
-ssettings.xml
</code></pre>
<p>ç„¶åï¼Œ<strong>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º settings.xmlï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.2.0"</span>
          <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
          <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">localRepository</span>&gt;</span>D:/Java/mvn_repo<span class="hljs-tag">&lt;/<span class="hljs-name">localRepository</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- é…ç½®é•œåƒ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é˜¿é‡Œäº‘ä¸­å¤®ä»“åº“é•œåƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>aliyunmaven<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p>ä¸‹é¢å°±å¯ä»¥ä½¿ç”¨ <code>mvnw.cmd</code> æ¥æ„å»ºé¡¹ç›®äº†ï¼ˆLinuxä¸‹ç”¨ <code>mvnw</code> ï¼Œçœ‹å‰é¢ç« èŠ‚ï¼‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ–é¡¹ç›®</span>
mvnw.cmd clean install -DskipTests

<span class="hljs-comment"># 2. è¿è¡Œæ‰€æœ‰æµ‹è¯•</span>
mvnw.cmd <span class="hljs-built_in">test</span>

<span class="hljs-comment"># 3. æ‰“åŒ…æ‰€æœ‰æ¨¡å—</span>
mvnw.cmd clean package

<span class="hljs-comment"># 4. è·³è¿‡æµ‹è¯•æ‰“åŒ…</span>
mvnw.cmd clean package -DskipTests

<span class="hljs-comment"># 5. åªæ„å»ºwebæ¨¡å—åŠå…¶ä¾èµ–</span>
mvnw.cmd clean install -pl web -am

<span class="hljs-comment"># 6. ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®æ‰“åŒ…</span>
mvnw.cmd clean package -Pprod

<span class="hljs-comment"># 7. è¿è¡ŒSpring Bootåº”ç”¨</span>
mvnw.cmd spring-boot:run

<span class="hljs-comment"># 8. ç”Ÿæˆä¾èµ–æ ‘</span>
mvnw.cmd dependency:tree -Dverbose

<span class="hljs-comment"># 9. æ£€æŸ¥ä¾èµ–æ›´æ–°</span>
mvnw.cmd versions:display-dependency-updates

<span class="hljs-comment"># 10. ç”Ÿæˆé¡¹ç›®ç«™ç‚¹</span>
mvnw.cmd site
</code></pre>
<h2 data-id="heading-42">å…­ã€Mavené«˜çº§æŠ€å·§</h2>
<h3 data-id="heading-43">6.1 è‡ªå®šä¹‰ç”Ÿå‘½å‘¨æœŸ</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-antrun-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">executions</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">execution</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">phase</span>&gt;</span>validate<span class="hljs-tag">&lt;/<span class="hljs-name">phase</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">goals</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">goal</span>&gt;</span>run<span class="hljs-tag">&lt;/<span class="hljs-name">goal</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">goals</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">target</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">echo</span>&gt;</span>Custom validation step<span class="hljs-tag">&lt;/<span class="hljs-name">echo</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">target</span>&gt;</span>
                    <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">execution</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">executions</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3 data-id="heading-44">6.2 èµ„æºè¿‡æ»¤</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.properties<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">testResources</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">testResource</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/test/resources<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">filtering</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">filtering</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">testResource</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">testResources</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">filters</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>src/main/filters/dev.properties<span class="hljs-tag">&lt;/<span class="hljs-name">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">filters</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span>
</code></pre>
<h3 data-id="heading-45">6.3 æ„å»ºä¼˜åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ„å»ºç¼“å­˜</span>
mvn clean install -Dmaven.build.cache.enabled=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 2. è·³è¿‡ä¸å¿…è¦çš„æ’ä»¶</span>
mvn clean install -Dmaven.site.skip=<span class="hljs-literal">true</span> -Dmaven.javadoc.skip=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 3. ä½¿ç”¨é•œåƒä»“åº“ï¼ˆåŠ é€Ÿï¼‰</span>
<span class="hljs-comment"># åœ¨~/.m2/settings.xmlä¸­é…ç½®</span>
&lt;mirror&gt;
    &lt;<span class="hljs-built_in">id</span>&gt;aliyun-maven&lt;/id&gt;
    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;
    &lt;name&gt;Aliyun Maven Mirror&lt;/name&gt;
    &lt;url&gt;https://maven.aliyun.com/repository/central&lt;/url&gt;
&lt;/mirror&gt;
</code></pre>
<h3 data-id="heading-46">6.4 æ•…éšœæ’æŸ¥</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è°ƒè¯•æ¨¡å¼</span>
mvn clean install -X

<span class="hljs-comment"># 2. æ˜¾ç¤ºè¯¦ç»†é”™è¯¯</span>
mvn clean install -e

<span class="hljs-comment"># 3. ç¦»çº¿æ¨¡å¼æ’æŸ¥</span>
mvn clean install -o

<span class="hljs-comment"># 4. æŸ¥çœ‹ä¾èµ–å†²çª</span>
mvn dependency:tree -Dverbose

<span class="hljs-comment"># 5. æ¸…ç†æœ¬åœ°ä»“åº“ç¼“å­˜</span>
mvn dependency:purge-local-repository
</code></pre>
<h2 data-id="heading-47">ä¸ƒã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-48">7.1 ä¾èµ–å†²çªè§£å†³</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¯†åˆ«å†²çª</span>
mvn dependency:tree -Dverbose | grep conflict

<span class="hljs-comment"># 2. æ’é™¤ç‰¹å®šä¾èµ–</span>
&lt;dependency&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;problematic-artifact&lt;/artifactId&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;groupId&gt;conflicting-group&lt;/groupId&gt;
            &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;

<span class="hljs-comment"># 3. å¼ºåˆ¶ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬</span>
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;conflicting-group&lt;/groupId&gt;
            &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;
            &lt;version&gt;1.2.3&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
</code></pre>
<h3 data-id="heading-49">7.2 æ„å»ºæ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¹¶è¡Œæ„å»º</span>
mvn clean install -T 1C  <span class="hljs-comment"># æ¯ä¸ªCPUæ ¸å¿ƒä¸€ä¸ªçº¿ç¨‹</span>

<span class="hljs-comment"># 2. å¢é‡ç¼–è¯‘</span>
mvn compile -Dmaven.compiler.useIncrementalCompilation=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 3. è·³è¿‡æµ‹è¯•</span>
mvn clean install -DskipTests -DskipITs

<span class="hljs-comment"># 4. ä½¿ç”¨æ„å»ºç¼“å­˜</span>
mvn clean install -Dmaven.build.cache.enabled=<span class="hljs-literal">true</span>

<span class="hljs-comment"># 5. é™åˆ¶å†…å­˜ä½¿ç”¨</span>
<span class="hljs-built_in">export</span> MAVEN_OPTS=<span class="hljs-string">"-Xmx2g -XX:MaxMetaspaceSize=512m"</span>
</code></pre>
<h2 data-id="heading-50">å…«ã€æœ€ä½³å®è·µæ€»ç»“</h2>
<ol>
<li><strong>ä½¿ç”¨Maven Wrapper</strong>ï¼šç¡®ä¿å›¢é˜Ÿä½¿ç”¨ç›¸åŒçš„Mavenç‰ˆæœ¬</li>
<li><strong>ç»Ÿä¸€ä¾èµ–ç®¡ç†</strong>ï¼šåœ¨çˆ¶pomä¸­ä½¿ç”¨dependencyManagement</li>
<li><strong>åˆç†ä½¿ç”¨Profile</strong>ï¼šåŒºåˆ†å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒ</li>
<li><strong>é…ç½®é•œåƒä»“åº“</strong>ï¼šåŠ é€Ÿä¾èµ–ä¸‹è½½</li>
<li><strong>å®šæœŸæ›´æ–°ä¾èµ–</strong>ï¼šä½¿ç”¨versionsæ’ä»¶æ£€æŸ¥æ›´æ–°</li>
<li><strong>ä¿æŒpomæ•´æ´</strong>ï¼šåŠæ—¶æ¸…ç†æ— ç”¨ä¾èµ–</li>
<li><strong>ä½¿ç”¨æ ‡å‡†ç›®å½•ç»“æ„</strong>ï¼šéµå¾ªMavençº¦å®š</li>
<li><strong>é…ç½®ç¼–ç </strong>ï¼šç»Ÿä¸€ä½¿ç”¨UTF-8ç¼–ç </li>
</ol>
<p>è‡³æ­¤ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†Mavençš„æ ¸å¿ƒæ¦‚å¿µå’Œé«˜çº§ç”¨æ³•ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚çµæ´»è¿ç”¨è¿™äº›çŸ¥è¯†å’ŒæŠ€å·§ã€‚</p>
<p>å…³æ³¨æˆ‘ï¼Œè·å–æ›´å¤šå®æˆ˜æŠ€æœ¯å¹²è´§ï¼ â­ï¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜]]></title>    <link>https://juejin.cn/post/7595901379014623242</link>    <guid>https://juejin.cn/post/7595901379014623242</guid>    <pubDate>2026-01-17T14:03:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595901379014623242" data-draft-id="7595901379014606858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-17T14:03:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:03:37.000Z" title="Sat Jan 17 2026 14:03:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šç”¨ sklearn åš KMeans èšç±»ï¼Œæƒ³è§£é‡Šä¸­å¿ƒç‚¹/æŸå¤±ï¼Œå¹¶ç”¨æŒ‡æ ‡é€‰ Kã€‚</li>
<li>ç»“è®ºï¼šinertia_ åªèƒ½â€œè¶Šå°è¶Šå¥½ä½†ä¸å¯æ¯”â€ï¼Œé€‰ K æ›´åº”çœ‹ -silhouette_score çš„å³°å€¼ï¼›ä»£ç é‡Œè¦ä¿®æ­£ idxmin/å˜é‡åæ··ç”¨ã€‚</li>
<li>äº§å‡ºï¼šä¸€å¥—å¯å¤ç”¨çš„â€œå±æ€§è§£è¯» + é€‰ K æ›²çº¿ + ç‰ˆæœ¬å·®å¼‚ + æŠ¥é”™æ’æŸ¥â€æ¨¡æ¿ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7ebd27195374e6e90dc6a9bae951591~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=siY8ys3sVAXOe8zqLN3WbY54WD8%3D" alt="å¤§æ•°æ®-215 sklearn KMeans å…³é”®å±æ€§ä¸è¯„ä¼°ï¼šcluster_centers_ã€inertia_ã€è½®å»“ç³»æ•°é€‰ K å®æˆ˜" loading="lazy"/></p>
<h2 data-id="heading-1">sklearnå®ç° K-Means</h2>
<h3 data-id="heading-2">cluster.cluster_centers_</h3>
<pre><code class="hljs language-python" lang="python">centroid = cluster.cluster_centers_
centroid
centroid.shape
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0bb9a81c7d98414aa9a1e00c26a35589~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=RZ%2BSVEmtdyGDEIzgWeyLxjglq%2F4%3D" alt="cluster.cluster_centers_" loading="lazy"/></p>
<h3 data-id="heading-3">cluster.inertia_</h3>
<p>æŸ¥çœ‹æ€»è·ç¦»çš„å¹³æ–¹å’Œï¼š</p>
<pre><code class="hljs language-python" lang="python">inertia = cluster.inertia_
inertia
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/835a3e54a3d04b3b8add0f8fec6bc35d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=m%2FsxaByIvtonTn3A94G5%2FZR4TTw%3D" alt="cluster.inertia_" loading="lazy"/>
å¦‚æœæˆ‘ä»¬æŠŠç°‡çš„æ•°é‡æ¢æˆ 4ï¼ŒInertia ä¼šæ€ä¹ˆæ ·ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">4</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a92975fbccf45748713729a8e5c9820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=xxSLyIUZ3FRzkkPoKl%2BJ%2BxFH7MM%3D" alt="cluster.inertia_" loading="lazy"/>
å¦‚æœæ¢æˆ 5ï¼š</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">5</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/663be61c94f2411586f030d6a4fe0b27~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=F%2FRpStGxuHxUR0c5cPFxrAgSR0M%3D" alt="KMeans(n_clusters=n_clusters," loading="lazy"/>
å¦‚æœæ¢æˆ 6ï¼š</p>
<pre><code class="hljs language-python" lang="python">n_clusters = <span class="hljs-number">6</span>
cluster_ = KMeans(n_clusters=n_clusters, random_state=<span class="hljs-number">0</span>).fit(X)
inertia_ = cluster_.inertia_
inertia_
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3cbf05481384b3abc3c262478e2472d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=pK249QNDcOVlTIJTn6M3ug9IZ4I%3D" alt="KMeans(n_clusters=n_clusters," loading="lazy"/></p>
<h2 data-id="heading-4">èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°</h2>
<p>ä¸åŒäºåˆ†ç±»æ¨¡å‹å’Œå›å½’ï¼Œèšç±»ç®—æ³•çš„æ¨¡å‹è¯„ä¼°ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹ï¼Œåœ¨åˆ†ç±»ä¸­ï¼Œæœ‰ç›´æ¥ç»“æœï¼ˆæ ‡ç­¾ï¼‰çš„è¾“å‡ºï¼Œå¹¶ä¸”åˆ†ç±»ç»“æœæœ‰æ­£è´Ÿä¹‹åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨é¢„æµ‹çš„å‡†ç¡®åº¦ï¼Œæ··æ·†çŸ©é˜µï¼ŒROC æ›²çº¿ç­‰ç­‰æŒ‡æ ‡æ¥è¿›è¡Œè¯„ä¼°ï¼Œä½†æ— è®ºå¦‚ä½•è¯„ä¼°ï¼Œéƒ½æ˜¯åœ¨â€æ¨¡å‹æ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆâ€œçš„èƒ½åŠ›ã€‚è€Œå›å½’ä¸­ï¼Œç”±äºè¦æ‹Ÿåˆæ•°æ®ï¼Œæˆ‘ä»¬æœ‰ SSE å‡æ–¹è¯¯å·®ï¼Œæœ‰æŸå¤±å‡½æ•°æ¥è¡¡é‡æ¨¡å‹çš„æ‹Ÿåˆç¨‹åº¦ï¼Œä½†è¿™äº›è¡¡é‡æŒ‡æ ‡éƒ½ä¸èƒ½å¤Ÿä½¿ç”¨äºèšç±»ã€‚</p>
<h2 data-id="heading-5">å¦‚ä½•è¡¡é‡èšç±»ç®—æ³•çš„æ•ˆæœ</h2>
<p>èšç±»æ¨¡å‹çš„ç»“æœä¸æ˜¯æŸç§æ ‡ç­¾è¾“å‡ºï¼Œå¹¶ä¸”èšç±»çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œå…¶ä¼˜åŠ£ç”±ä¸šåŠ¡éœ€æ±‚æˆ–ç®—æ³•éœ€æ±‚æ¥å†³å®šï¼Œå¹¶ä¸”æ°¸è¿œæ²¡æœ‰æ­£ç¡®ç­”æ¡ˆã€‚é‚£æˆ‘ä»¬å¦‚ä½•è¡¡é‡èšç±»çš„æ•ˆæœå‘¢ï¼Ÿ
è®°å¾—æˆ‘ä»¬è¯´è¿‡ï¼ŒKMeans çš„ç›®æ ‡æ˜¯ç¡®ä¿â€œç°‡å†…å·®å¼‚å°ï¼Œç°‡å¤–å·®å¼‚å¤§â€ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¡¡é‡ç°‡å†…å·®å¼‚æ¥è¡¡é‡èšç±»çš„æ•ˆæœã€‚æˆ‘ä»¬åˆšæ‰è¯´è¿‡ï¼ŒInertia æ˜¯ç”¨è·ç¦»æ¥è¡¡é‡ç°‡å†…å·®å¼‚çš„æŒ‡æ ‡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä½¿ç”¨ Inertia æ¥ä½œä¸ºèšç±»çš„è¡¡é‡æŒ‡æ ‡å‘¢ï¼ŸInertia è¶Šå°æ¨¡å‹è¶Šå¥½ã€‚
å¯ä»¥ï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡æ ‡çš„ç¼ºç‚¹å’Œæé™å¤ªå¤§äº†ï¼š</p>
<ul>
<li>å®ƒä¸æ˜¯æœ‰ç•Œçš„ï¼Œæˆ‘ä»¬åªçŸ¥é“ï¼ŒInertia æ˜¯è¶Šå°è¶Šå¥½ï¼Œæ˜¯ 0 æœ€å¥½ï¼Œä½†æˆ‘ä»¬ä¸çŸ¥é“ï¼Œä¸€ä¸ªè¾ƒå°çš„Inertiaç©¶ç«Ÿæœ‰æ²¡æœ‰è¾¾åˆ°æ¨¡å‹çš„æé™ï¼Œæ˜¯å¦èƒ½å¤Ÿç»§ç»­æé«˜ã€‚</li>
<li>å®ƒçš„è®¡ç®—å¤ªå®¹æ˜“å—åˆ°ç‰¹å¾æ•°ç›®çš„å½±å“ï¼Œæ•°æ®ç»´åº¦å¾ˆå¤§çš„æ—¶å€™ï¼ŒInertia çš„è®¡ç®—é‡ä¼šé™·å…¥ç»´åº¦è¯…å’’ä¹‹ä¸­ï¼Œè®¡ç®—é‡ä¼šçˆ†ç‚¸ï¼Œä¸é€‚åˆç”¨æ¥ä¸€æ¬¡æ¬¡è¯„ä¼°æ¨¡å‹ã€‚</li>
<li>å®ƒä¼šæ”¶åˆ°è¶…å‚æ•° K çš„å½±å“ï¼Œåœ¨æˆ‘ä»¬ä¹‹å‰çš„å°è¯•ä¸­å…¶å®æˆ‘ä»¬å·²ç»å‘ç°ï¼Œéšç€ K çš„è¶Šå¤§ï¼ŒIntertia ä¼šè¶Šæ¥è¶Šå°ï¼Œä½†æ˜¯è¿™ä¸èƒ½ä»£è¡¨æˆ‘ä»¬çš„æ¨¡å‹è¶Šæ¥è¶Šå¥½ã€‚</li>
<li>Inertia ä½œä¸ºè¯„ä¼°æŒ‡æ ‡ï¼Œä¼šè®©èšç±»ç®—æ³•åœ¨ä¸€äº›ç»†é•¿ç°‡ï¼Œç¯å½¢ç°‡ï¼Œæˆ–è€…ä¸è§„åˆ™çš„è¡¨ç°ä¸ä½³ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b2eb55088b4443fbcede77c2c8f7a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=3jcBvVlaIiOZRP6u7AMS6xGE%2BlM%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/>
é‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»€ä¹ˆæŒ‡æ ‡å‘¢ï¼Ÿèšç±»æ˜¯æ²¡æœ‰æ ‡ç­¾çš„ï¼Œå³ä¸çŸ¥é“çœŸå®ç­”æ¡ˆçš„é¢„æµ‹ç®—æ³•ï¼Œæˆ‘ä»¬å¿…é¡»å®Œå…¨ä¾èµ–è¯„ä»·ç°‡å†…ç¨ å¯†ç¨‹åº¦ï¼ˆç°‡å†…å·®å¼‚å°ï¼‰å’Œç°‡é—´çš„ç¦»æ•£ç¨‹åº¦ï¼ˆç°‡å¤–å·®å¼‚å¤§ï¼‰æ¥è¯„ä¼°èšç±»çš„æ•ˆæœã€‚å…¶ä¸­è½®å»“ç³»æ•°æ˜¯æœ€å¸¸ç”¨çš„èšç±»ç®—æ³•çš„è¯„ä»·æŒ‡æ ‡ã€‚å®ƒæ˜¯å¯¹æ¯ä¸ªæ ·æœ¬æ¥å®šä¹‰çš„ï¼Œå®ƒèƒ½å¤ŸåŒæ—¶è¡¡é‡ï¼š</p>
<ul>
<li>æ ·æœ¬ä¸å…¶è‡ªèº«æ‰€åœ¨çš„ç°‡ä¸­çš„å…¶ä»–æ ·æœ¬çš„ç›¸ä¼¼åº¦ aï¼Œç­‰äºæ ·æœ¬ä¸åŒä¸€ç°‡æ‰€æœ‰å…¶ä»–ç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»</li>
<li>æ ·æœ¬ä¸å…¶ä»–ç°‡ä¸­çš„æ ·æœ¬ç›¸ä¼¼åº¦ b ï¼Œç­‰äºæ ·æœ¬ä¸ä¸‹ä¸€ä¸ªæœ€è¿‘çš„ç°‡ä¸­çš„æ‰€æœ‰ç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»</li>
</ul>
<p>æ ¹æ®èšç±»çš„è¦æ±‚ï¼šâ€œç°‡å†…å·®å¼‚å°ï¼Œç°‡å¤–å·®å¼‚å¤§â€ï¼Œæˆ‘ä»¬å¸Œæœ› b æ°¸è¿œå¤§äº aï¼Œå¹¶ä¸”å¤§çš„è¶Šå¤šè¶Šå¥½ï¼Œå•ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ä¸ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a75f86d9d874fe29fe1d5e25f677536~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=k%2BlMbDRNvMLciHTZXGrP4Qb%2BvmQ%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/>
è¿™ä¸ªå…¬å¼å¯ä»¥è¢«è§£æä¸ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e76d48418cd455a9273c76cfc0c3c5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=sqA6uPCYqweDtJi6hK0bpI7%2FnJ4%3D" alt="èšç±»ç®—æ³•æ¨¡å‹è¯„ä¼°ï¼šè½®å»“ç³»æ•°" loading="lazy"/></p>
<p>å¾ˆå®¹æ˜“ç†è§£çš„è½®å»“ç³»æ•°èŒƒå›´æ˜¯ï¼šï¼ˆ-1,1ï¼‰ï¼š</p>
<ul>
<li>è½®å»“ç³»æ•°è¶Šæ¥è¿‘ 1ï¼šæ ·æœ¬ä¸è‡ªå·±æ‰€åœ¨ç°‡ä¸­çš„æ ·æœ¬å¾ˆç›¸ä¼¼ï¼Œå¹¶ä¸”ä¸å…¶ä»–ç°‡ä¸­çš„æ ·æœ¬ä¸ç›¸ä¼¼</li>
<li>è½®å»“ç³»æ•°ä¸º 0 æ—¶ï¼Œä¸¤ä¸ªç°‡ä¸­çš„æ ·æœ¬ç›¸ä¼¼åº¦ä¸€è‡´ï¼Œä¸¤ä¸ªç°‡æœ¬åº”è¯¥æ˜¯ä¸€ä¸ªç°‡ã€‚</li>
<li>è½®å»“ä¸ºè´Ÿæ—¶ï¼šæ ·æœ¬ç‚¹ä¸ç°‡å¤–çš„æ ·æœ¬æ›´ç›¸ä¼¼ã€‚</li>
</ul>
<p>å¦‚æœä¸€ä¸ªç°‡ä¸­çš„å¤§å¤šæ•°æ ·æœ¬å…·æœ‰æ¯”è¾ƒé«˜çš„è½®å»“ç³»æ•°ï¼Œåˆ™ç°‡ä¼šæœ‰è¾ƒé«˜çš„æ€»è½®å»“ç³»æ•°ï¼Œåˆ™æ•´ä¸ªæ•°æ®é›†çš„å¹³å‡è½®å»“ç³»æ•°è¾ƒé«˜ï¼Œåˆ™èšç±»æ—¶åˆé€‚çš„ã€‚
å¦‚æœè®¸å¤šæ ·æœ¬ç‚¹å…·æœ‰ä½è½®å»“ç³»æ•°ç”šè‡³è´Ÿå€¼ï¼Œåˆ™èšç±»æ˜¯ä¸åˆé€‚çš„ï¼Œèšç±»çš„è¶…å‚æ•° K å¯èƒ½è®¾å®šçš„å¤ªå¤§æˆ–è€…å¤ªå°ã€‚</p>
<p>åœ¨ sklearn ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¨¡å— metrics ä¸­çš„ç±» sihouette_score æ¥è®¡ç®—è½®å»“ç³»æ•°ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°æ®é›†ä¸­ï¼Œæ‰€æœ‰æ ·æœ¬çš„è½®åº“ç³»æ•°çš„å‡å€¼ï¼Œä½†æˆ‘ä»¬è¿˜æœ‰åŒåœ¨ metrics æ¨¡å—ä¸­çš„ sihouette_sampleï¼Œå®ƒçš„å‚æ•°ä¸è½®å»“ç³»æ•°ä¸€è‡´ï¼Œä½†è¿”å›çš„æ•°æ®é›†ä¸­æ¯ä¸ªæ ·æœ¬è‡ªå·±çš„è½®å»“ç³»æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_score
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_samples

X
y_pred
</code></pre>
<p>æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º:
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bbeb7260007448b9f2e16844ae6b46c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=eb126mP1yK29toSTMdqleGc7pas%3D" alt="æ‰§è¡Œç»“æœ" loading="lazy"/>
è§‚å¯Ÿä¸€ä¸‹ä¸åŒçš„ K ï¼Œè½®å»“ç³»æ•°å‘ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#è§‚å¯Ÿä¸€ä¸‹ä¸åŒçš„Kä¸‹ï¼Œè½®å»“ç³»æ•°å‘ç”Ÿä»€ä¹ˆå˜åŒ–ï¼Ÿ</span>
cluster = KMeans(n_clusters=<span class="hljs-number">3</span>, random_state=<span class="hljs-number">0</span>).fit(X)
silhouette_score(X,cluster_.labels_) <span class="hljs-comment">#è®¡ç®—æ‰€æœ‰æ ·æœ¬çš„è½®å»“ç³»æ•°å‡å€¼ã€‚</span>
silhouette_samples(X,cluster.labels_) <span class="hljs-comment">#è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„è½®å»“ç³»æ•°ã€‚</span>
</code></pre>
<p>è¿è¡Œä¹‹åç”Ÿæˆçš„ç»“æœå¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386ca0d012a4474f9875389779633ca2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769263417&amp;x-signature=LS9h9ycwz4L2PQ6gTvTbJp4XTVg%3D" alt="æ‰§è¡Œç»“æœ" loading="lazy"/></p>
<p>æˆ‘ä»¬ç»§ç»­ç¼–å†™ä»£ç ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans
<span class="hljs-keyword">from</span> sklearn.metrics <span class="hljs-keyword">import</span> silhouette_score

<span class="hljs-comment"># å®šä¹‰å­˜å‚¨è¯„åˆ†çš„åˆ—è¡¨</span>
score = []

<span class="hljs-comment"># è¿›è¡Œ KMeans èšç±»å¹¶è®¡ç®— silhouette_score</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>):
    cluster = KMeans(n_clusters=i, random_state=<span class="hljs-number">0</span>).fit(X)
    score.append(silhouette_score(X, cluster.labels_))

<span class="hljs-comment"># ç»˜åˆ¶ silhouette_score çš„å˜åŒ–æ›²çº¿</span>
plt.plot(<span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>), score)

<span class="hljs-comment"># æ‰¾åˆ° silhouette_score æœ€å°å€¼å¯¹åº”çš„ç´¢å¼•ï¼Œå¹¶ç»˜åˆ¶ä¸€æ¡å‚ç›´çº¿</span>
plt.axvline(pd.DataFrame(score).idxmin()[<span class="hljs-number">0</span>] + <span class="hljs-number">2</span>, ls=<span class="hljs-string">':'</span>)

<span class="hljs-comment"># æ·»åŠ æ ‡é¢˜å’Œåæ ‡è½´æ ‡ç­¾</span>
plt.title(<span class="hljs-string">'Silhouette Score vs Number of Clusters'</span>)
plt.xlabel(<span class="hljs-string">'Number of Clusters'</span>)
plt.ylabel(<span class="hljs-string">'Silhouette Score'</span>)

<span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span>
plt.show()

</code></pre>
<p>è½®å»“ç³»æ•°(Silhouette Coefficient)æ˜¯ä¸€ç§å¸¸ç”¨çš„èšç±»æ•ˆæœè¯„ä¼°æŒ‡æ ‡ï¼Œå…·æœ‰ä»¥ä¸‹æ˜¾è‘—ä¼˜ç‚¹ï¼š</p>
<ol>
<li>
<p>å–å€¼èŒƒå›´æ˜ç¡®ï¼š</p>
<ul>
<li>æ•°å€¼èŒƒå›´å›ºå®šåœ¨[-1,1]ä¹‹é—´ï¼Œä½¿å¾—è¯„ä¼°ç»“æœå…·æœ‰å¯æ¯”æ€§</li>
<li>å€¼è¶Šæ¥è¿‘1è¡¨ç¤ºèšç±»æ•ˆæœè¶Šå¥½</li>
<li>å€¼ä¸º0è¡¨ç¤ºæ ·æœ¬ç‚¹åœ¨ç°‡è¾¹ç•Œä¸Š</li>
<li>è´Ÿå€¼è¡¨ç¤ºå¯èƒ½è¢«åˆ†é”™äº†ç°‡</li>
</ul>
</li>
<li>
<p>é€‚ç”¨æ€§å¹¿æ³›ï¼š</p>
<ul>
<li>ä¸è¦æ±‚æ•°æ®æœä»ç‰¹å®šåˆ†å¸ƒï¼Œé€‚ç”¨äºå„ç§å½¢æ€çš„æ•°æ®é›†</li>
<li>å¯¹çƒå½¢ç°‡ã€å‡¸å½¢ç°‡ç­‰å¸¸è§èšç±»å½¢æ€éƒ½èƒ½æœ‰æ•ˆè¯„ä¼°</li>
<li>ç‰¹åˆ«é€‚åˆè¯„ä¼°K-meansç­‰åŸºäºè·ç¦»çš„èšç±»ç®—æ³•æ•ˆæœ</li>
</ul>
</li>
<li>
<p>ç›´è§‚è§£é‡Šæ€§å¼ºï¼š</p>
<ul>
<li>åŒæ—¶è€ƒè™‘äº†ç°‡å†…ç´§å¯†åº¦å’Œç°‡é—´åˆ†ç¦»åº¦</li>
<li>é€šè¿‡è®¡ç®—æ ·æœ¬ä¸åŒç°‡å…¶ä»–ç‚¹çš„å¹³å‡è·ç¦»(a)å’Œä¸æœ€è¿‘å…¶ä»–ç°‡ç‚¹çš„å¹³å‡è·ç¦»(b)å¾—å‡º</li>
<li>è®¡ç®—å…¬å¼ä¸ºï¼šs = (b - a)/max(a,b)</li>
</ul>
</li>
</ol>
<p>ç„¶è€Œï¼Œè½®å»“ç³»æ•°ä¹Ÿå­˜åœ¨ä¸€äº›å±€é™æ€§ï¼š</p>
<ol>
<li>
<p>å¯¹ç‰¹å®šèšç±»ç±»å‹çš„è¯„ä¼°åå·®ï¼š</p>
<ul>
<li>å¯¹äºDBSCANç­‰åŸºäºå¯†åº¦çš„èšç±»ç®—æ³•ï¼Œå¯èƒ½ç»™å‡ºè™šé«˜çš„è¯„åˆ†</li>
<li>åœ¨è¯„ä¼°ä¸è§„åˆ™å½¢çŠ¶çš„ç°‡æ—¶è¡¨ç°ä¸ä½³</li>
<li>å½“æ•°æ®ä¸­å­˜åœ¨å™ªå£°ç‚¹æ—¶ï¼Œè¯„ä¼°ç»“æœå¯èƒ½å¤±çœŸ</li>
</ul>
</li>
<li>
<p>æœ€ä½³é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>åœ¨ç°‡é—´è¾¹ç•Œæ¸…æ™°ã€å„ç°‡å¯†åº¦ç›¸è¿‘æ—¶è¡¨ç°æœ€å¥½</li>
<li>é€‚ç”¨äºè¯„ä¼°é¢„å…ˆç¡®å®šç°‡æ•°é‡çš„èšç±»ç®—æ³•</li>
<li>å¯¹äºå±‚æ¬¡èšç±»ç­‰ä¸ç¡®å®šç°‡æ•°é‡çš„ç®—æ³•è¯„ä¼°æ•ˆæœæœ‰é™</li>
</ul>
</li>
<li>
<p>è®¡ç®—å¤æ‚åº¦é—®é¢˜ï¼š</p>
<ul>
<li>éœ€è¦è®¡ç®—æ‰€æœ‰æ ·æœ¬ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œæ—¶é—´å¤æ‚åº¦è¾ƒé«˜</li>
<li>åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šè®¡ç®—ä»£ä»·è¾ƒå¤§</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®å°†è½®å»“ç³»æ•°ä¸å…¶ä»–è¯„ä¼°æŒ‡æ ‡(å¦‚Calinski-HarabaszæŒ‡æ•°ã€Davies-BouldinæŒ‡æ•°ç­‰)ç»“åˆä½¿ç”¨ï¼Œä»¥è·å¾—æ›´å…¨é¢çš„èšç±»æ•ˆæœè¯„ä¼°ã€‚åŒæ—¶è¦æ³¨æ„ï¼Œå¯¹äºç‰¹æ®Šå½¢æ€çš„æ•°æ®é›†æˆ–ç‰¹å®šç±»å‹çš„èšç±»ç®—æ³•ï¼Œå¯èƒ½éœ€è¦é€‰ç”¨æ›´é€‚åˆçš„è¯„ä¼°æ–¹æ³•ã€‚</p>
<h2 data-id="heading-6">é”™è¯¯é€ŸæŸ¥</h2>















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>è¿è¡Œ <code>silhouette_score(X, cluster_.labels_)</code> æŠ¥é”™æˆ–ç»“æœå¼‚å¸¸</td><td>å˜é‡æ··ç”¨ï¼š<code>cluster</code> ä¸ <code>cluster_</code> ä¸ä¸€è‡´</td><td>æ£€æŸ¥ <code>fit(X)</code> çš„è¿”å›å¯¹è±¡åˆ°åº•èµ‹ç»™äº†è°</td><td>ç»Ÿä¸€å˜é‡åï¼š<code>cluster = KMeans(...).fit(X)</code> åç”¨ <code>cluster.labels_</code></td></tr><tr><td>é€‰ K ç”»çº¿è½åœ¨â€œæœ€å·®ç‚¹â€è€Œä¸æ˜¯â€œæœ€å¥½ç‚¹â€</td><td>ç”¨äº† <code>idxmin()</code>ï¼›è½®å»“ç³»æ•°åº”å–æœ€å¤§å€¼é™„è¿‘</td><td>çœ‹ä»£ç ï¼š<code>pd.DataFrame(score).idxmin()</code></td><td>æ”¹ä¸º <code>idxmax()</code>ï¼Œå¹¶æ˜ç¡®â€œå–å³°å€¼é™„è¿‘ä½œä¸ºå€™é€‰ Kâ€</td></tr><tr><td>åŒä¸€ä»½æ•°æ®åœ¨ä¸åŒæœºå™¨/ç‰ˆæœ¬ä¸‹ KMeans ç»“æœä¸ä¸€è‡´</td><td>sklearn 1.4 èµ· <code>n_init</code> é»˜è®¤ 'auto'ï¼›åˆå§‹åŒ–æ¬¡æ•°/ç­–ç•¥å˜åŒ–</td><td>æ‰“å° sklearn ç‰ˆæœ¬ä¸ KMeans å‚æ•°</td><td>æ˜¾å¼æŒ‡å®š <code>n_init</code>ã€<code>init</code>ã€<code>random_state</code>ï¼ˆè·¨ç‰ˆæœ¬å¯¹æ¯”å¿…é¡»å›ºå®šï¼‰ã€‚</td></tr><tr><td><code>inertia</code> å¾ˆå¤§ã€è‚˜éƒ¨ä¸æ˜æ˜¾</td><td>ç‰¹å¾æœªæ ‡å‡†åŒ–/é‡çº²å·®å¼‚å¤§ï¼›é«˜ç»´å¯¼è‡´è·ç¦»ä¸»å¯¼</td><td>è§‚å¯Ÿç‰¹å¾é‡çº²ä¸æ–¹å·®ï¼›å¯¹æ¯”æ ‡å‡†åŒ–å‰åæ›²çº¿</td><td>å…ˆåšæ ‡å‡†åŒ–/å½’ä¸€åŒ–ï¼›å†çœ‹ <code>inertia</code>/è½®å»“æ›²çº¿</td></tr><tr><td><code>silhouette_score</code> è®¡ç®—å¾ˆæ…¢</td><td>è½®å»“ç³»æ•°éœ€è¦å¤§é‡è·ç¦»è®¡ç®—ï¼Œæ ·æœ¬å¤§æ—¶æˆæœ¬é«˜</td><td>K æ‰«æèŒƒå›´è¿‡å¤§ï¼ˆ2..100ï¼‰ä¸” n è¾ƒå¤§</td><td>ç¼©å° K æœç´¢åŒºé—´ï¼›å…ˆæŠ½æ ·è¯„ä¼°ï¼Œå†å…¨é‡éªŒè¯</td></tr><tr><td><code>silhouette</code> å‡ºç°å¤§é‡è´Ÿå€¼</td><td>K ä¸åˆé€‚/ç°‡é‡å ä¸¥é‡/æ•°æ®ä¸é€‚åˆ KMeansï¼ˆéå‡¸å½¢ç°‡ã€å™ªå£°å¤šï¼‰</td><td>ç”¨ <code>silhouette_samples</code> çœ‹åˆ†å¸ƒï¼Œå®šä½è´Ÿå€¼é›†ä¸­ç°‡</td><td>è°ƒæ•´ Kã€æ¢ç‰¹å¾å·¥ç¨‹ï¼›å¿…è¦æ—¶æ”¹ç”¨ GMM/DBSCAN ç­‰ç®—æ³•</td></tr></tbody></table>
<h2 data-id="heading-7">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-8">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-132 Java ç”Ÿæ€å‰æ²¿ 2025ï¼šSpringã€Quarkusã€GraalVMã€CRaC ä¸äº‘åŸç”Ÿè½åœ°</strong></p>
<h3 data-id="heading-9">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-218 RocketMQ Java API å®æˆ˜ï¼šåŒæ­¥/å¼‚æ­¥ Producer ä¸ Pull/Push Consumer</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS å·²å®Œç»“ï¼ŒOSSå·²å®Œç»“ï¼ŒGuavaCacheå·²å®Œç»“ï¼ŒEVCacheå·²å®Œç»“ï¼ŒRabbitMQå·²å®Œç»“ï¼ŒRocketMQæ­£åœ¨æ›´æ–°... æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-10">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595974133097136162</link>    <guid>https://juejin.cn/post/7595974133097136162</guid>    <pubDate>2026-01-17T14:56:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595974133097136162" data-draft-id="7595772638880317491" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-17T14:56:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€•æµªçŒ«"/> <meta itemprop="url" content="https://juejin.cn/user/2832784963939438"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘ä¸ºä»€ä¹ˆå®¹æ˜“è¢«è¾¹ç¼˜åŒ–ï¼Ÿæœ‰ä»€ä¹ˆé›„èµ·çš„è·¯å¾„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2832784963939438/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€•æµªçŒ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:56:22.000Z" title="Sat Jan 17 2026 14:56:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d47da8ea8034b42b365d0f15ee0cfc7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCV5rWq54yr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266582&amp;x-signature=sABwmFole%2FzG5xifN9sbl463D1Y%3D" alt="å°æœ‹å‹æƒ³åƒçš„æœªä¾†ä¸–ç•Œ.jpg" loading="lazy"/></p>
<h3 data-id="heading-0">æŠ€æœ¯è®¤çŸ¥çš„å†å²åŒ…è¢±</h3>
<p>â€œå‰ç«¯å°±æ˜¯å†™å†™é¡µé¢ï¼Œè°ƒè°ƒæ ·å¼â€çš„åˆ»æ¿å°è±¡åœ¨éƒ¨åˆ†ä¼ ç»ŸæŠ€æœ¯å›¢é˜Ÿä¸­ä¾ç„¶å­˜åœ¨ã€‚å½“ä¼ä¸šæŠ€æœ¯æ–‡åŒ–ä»ä»¥åç«¯ä¸ºä¸­å¿ƒæ—¶ï¼Œå‰ç«¯å¾€å¾€è¢«è§†ä¸ºå®ç°å±‚è€Œéæ¶æ„å±‚ï¼Œè¿™ç§è®¤çŸ¥åå·®ç›´æ¥å½±å“äº†å‰ç«¯åœ¨æŠ€æœ¯å†³ç­–ä¸­çš„è¯è¯­æƒã€‚</p>
<h3 data-id="heading-1">æŠ€æœ¯è¿­ä»£çš„â€œè¯…å’’â€</h3>
<p>å‰ç«¯ç”Ÿæ€ä»¥é«˜é€Ÿè¿­ä»£è‘—ç§°ï¼ŒæŠ€æœ¯æ ˆæ¯2-3å¹´å°±å¯èƒ½å®Œå…¨é©æ–°ã€‚è¿™ç§å¿«é€Ÿå˜åŒ–å¸¦æ¥åŒé‡å›°å¢ƒï¼šä¸€æ–¹é¢ï¼ŒæŒç»­å­¦ä¹ å‹åŠ›å·¨å¤§ï¼›å¦ä¸€æ–¹é¢ï¼Œé¢‘ç¹çš„æŠ€æœ¯æ›´æ›¿è®©éƒ¨åˆ†ç®¡ç†è€…è´¨ç–‘å‰ç«¯å·¥ä½œçš„â€œæŠ€æœ¯æ·±åº¦â€ã€‚</p>
<h3 data-id="heading-2">é—¨æ§›çš„â€œåŒåˆƒå‰‘â€</h3>
<p>ç°ä»£å‰ç«¯å·¥å…·é“¾çš„å‘å±•ä½¿å¾—åŸºç¡€é¡µé¢æ­å»ºé—¨æ§›é™ä½ï¼Œå¯è§†åŒ–å·¥å…·ã€ä½ä»£ç å¹³å°ç”šè‡³èƒ½è®©éæŠ€æœ¯äººå‘˜åˆ›å»ºç®€å•é¡µé¢ã€‚è¿™ç§â€œæ°‘ä¸»åŒ–â€è¿›ç¨‹æ— æ„ä¸­å‰Šå¼±äº†åˆçº§å‰ç«¯å·¥ä½œçš„ä¸“ä¸šå£å’ã€‚</p>
<h3 data-id="heading-3">å…¨æ ˆè¶‹åŠ¿çš„æŒ¤å‹</h3>
<p>â€œå…¨æ ˆå·¥ç¨‹å¸ˆâ€æ¦‚å¿µçš„æµè¡Œï¼Œä½¿è®¸å¤šåç«¯å¼€å‘è€…é€šè¿‡æŒæ¡åŸºç¡€å‰ç«¯æŠ€èƒ½è€Œç›´æ¥å‚ä¸å‰ç«¯å¼€å‘ã€‚åœ¨è¿½æ±‚äººæ•ˆçš„ä¼ä¸šä¸­ï¼Œä¸“é—¨çš„å‰ç«¯å²—ä½å¯èƒ½è¢«å‹ç¼©ï¼Œå°¤å…¶æ˜¯åœ¨ä¸­å°å‹å›¢é˜Ÿã€‚</p>
<h3 data-id="heading-4">ä»·å€¼è¡¡é‡çš„æ¨¡ç³Šæ€§</h3>
<p>ç›¸æ¯”åç«¯çš„å¹¶å‘æ•°ã€æ•°æ®åº“æ€§èƒ½ç­‰ç¡¬æŒ‡æ ‡ï¼Œå‰ç«¯çš„ç”¨æˆ·ä½“éªŒä»·å€¼æ›´éš¾ä»¥é‡åŒ–ã€‚å½“æŠ€æœ¯æŠ•å…¥éœ€è¦è¢«è¯æ˜å•†ä¸šä»·å€¼æ—¶ï¼Œå‰ç«¯å¾€å¾€å¤„äºâ€œé‡è¦ä½†éš¾ä»¥è¯æ˜â€çš„å°´å°¬å¢ƒåœ°ã€‚</p>
<h3 data-id="heading-5">ç ´èŒ§ï¼ˆèƒ¡è¯´å…«é“çš„ä¾‹å­ï¼‰</h3>
<p><strong>é™ˆèˆª</strong>æ˜¯ä¸€å®¶ç”µå•†å…¬å¸çš„æ™®é€šå‰ç«¯ï¼Œæ¯å¤©é‡å¤ç€å•†å“åˆ—è¡¨ã€è¯¦æƒ…é¡µçš„å¼€å‘ã€‚è½¬æŠ˜ç‚¹å‡ºç°åœ¨ä¸€æ¬¡å¤§ä¿ƒï¼Œé¡µé¢åŠ è½½ç¼“æ…¢å¯¼è‡´è½¬åŒ–ç‡ç›´æ¥ä¸‹é™30%ã€‚é™ˆèˆªæ²¡æœ‰æ­¢æ­¥äºâ€œä¼˜åŒ–ä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>å»ºç«‹é‡åŒ–ä½“ç³»</strong>ï¼šå¼•å…¥æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå°†â€œç™½å±æ—¶é—´â€ã€â€œå¯äº¤äº’æ—¶é—´â€è½¬åŒ–ä¸ºå…·ä½“æ•°æ®</li>
<li><strong>æ¨åŠ¨å…¨é“¾è·¯ä¼˜åŒ–</strong>ï¼šä¸ä»…ä¼˜åŒ–å‰ç«¯ä»£ç ï¼Œæ›´æ¨åŠ¨CDNç­–ç•¥è°ƒæ•´ã€å›¾ç‰‡æœåŠ¡å‡çº§</li>
<li><strong>è®¾è®¡æ€§èƒ½æ ‡å‡†</strong>ï¼šåˆ¶å®šå›¢é˜Ÿæ€§èƒ½å‡†å…¥æ ‡å‡†ï¼Œä¸åˆæ ¼çš„é¡µé¢ä¸å¾—ä¸Šçº¿</li>
</ol>
<p>ä¸€å¹´åï¼Œä»–ä¸»å¯¼çš„â€œæè‡´ä½“éªŒé¡¹ç›®â€å°†æ ¸å¿ƒé¡µé¢åŠ è½½é€Ÿåº¦æå‡äº†65%ï¼Œç›´æ¥å¸¦åŠ¨è½¬åŒ–ç‡æå‡18%ã€‚å…¬å¸ä¸ºæ­¤ä¸“é—¨è®¾ç«‹äº†â€œç”¨æˆ·ä½“éªŒæ¶æ„å¸ˆâ€å²—ä½ï¼Œè€Œä»–ï¼Œæˆä¸ºäº†è¿™ä¸ªæ–°å²—ä½çš„è´Ÿè´£äººã€‚</p>
<p><strong>æ—æ‚¦</strong>åŠ å…¥ä¸€å®¶å¿«é€Ÿæ‰©å¼ çš„äº’è”ç½‘å…¬å¸æ—¶ï¼Œå‰ç«¯å›¢é˜Ÿè¿˜å¤„äºâ€œåˆ€è€•ç«ç§â€é˜¶æ®µï¼šæ²¡æœ‰æ„å»ºè§„èŒƒï¼Œå„é¡¹ç›®æŠ€æœ¯æ ˆæ··ä¹±ï¼Œæ¯æ¬¡å‘å¸ƒéƒ½åƒä¸€åœºèµŒåšã€‚</p>
<p>å¥¹æ²¡æœ‰æŠ±æ€¨ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li><strong>é»˜é»˜æ­å»º</strong>ï¼šç”¨ä¸‰ä¸ªæœˆæ—¶é—´å»ºç«‹èµ·å®Œæ•´çš„å·¥ç¨‹åŒ–ä½“ç³»ï¼ŒåŒ…æ‹¬ç»Ÿä¸€æ„å»ºã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€ç»„ä»¶åº“</li>
<li><strong>ç”¨æ•°æ®è¯´è¯</strong>ï¼šç»Ÿè®¡æ˜¾ç¤ºï¼Œæ–°ä½“ç³»ä¸‹éœ€æ±‚å¹³å‡äº¤ä»˜æ—¶é—´ç¼©çŸ­40%ï¼Œçº¿ä¸Šäº‹æ•…å‡å°‘70%</li>
<li><strong>ä¸»åŠ¨èµ‹èƒ½</strong>ï¼šä¸ºå…¶ä»–å›¢é˜Ÿæä¾›è„šæ‰‹æ¶å’ŒåŸ¹è®­ï¼Œå°†ä¸ªäººèƒ½åŠ›è½¬åŒ–ä¸ºå›¢é˜Ÿèµ„äº§</li>
</ul>
<p>å½“CTOåœ¨å¹´åº¦æ€»ç»“ä¸­ä¸“é—¨è¡¨å½°â€œå‰ç«¯å·¥ç¨‹åŒ–å¸¦æ¥çš„æ•ˆç‡é©å‘½â€æ—¶ï¼Œæ—æ‚¦å’Œå¥¹çš„å›¢é˜Ÿå·²ä»â€œèµ„æºéƒ¨é—¨â€è½¬å˜ä¸ºâ€œæ•ˆç‡å¼•æ“â€ã€‚</p>
<p>å‰ç«¯å·¥ç¨‹å¸ˆ<strong>å°ç‹</strong>ã€‚åœ¨ä¸‰å¹´å‰çš„å…¬å¸ï¼Œä»–çš„å·¥ä½œè¢«ä¸¥æ ¼é™å®šåœ¨â€œå°†è®¾è®¡ç¨¿è½¬åŒ–ä¸ºHTML/CSSâ€ï¼Œæ‰€æœ‰ä¸šåŠ¡é€»è¾‘ã€æ•°æ®äº¤äº’éƒ½ç”±åç«¯å†³å®šã€‚ä¸€æ¬¡è¯„å®¡ä¼šä¸Šï¼Œå½“ä»–å¯¹ä¸€ä¸ªäº¤äº’æµç¨‹æå‡ºä¼˜åŒ–å»ºè®®æ—¶ï¼Œå¾—åˆ°çš„å›åº”æ˜¯ï¼šâ€œä½ å…ˆæŠŠæ ·å¼è°ƒå¥½ï¼Œä¸šåŠ¡é€»è¾‘ä¸ç”¨ä½ æ“å¿ƒã€‚â€</p>
<p><strong>å¼ æ¶›</strong>åœ¨ä¸€å®¶ä¼ ç»Ÿä¼ä¸šè½¬å‹äº’è”ç½‘çš„å…¬å¸ï¼Œå½“å…¬å¸è¦è¯„ä¼°æŠ€æœ¯å›¢é˜Ÿè´¡çŒ®æ—¶ï¼Œåç«¯åŒäº‹å¯ä»¥å±•ç¤ºâ€œç³»ç»ŸQPSä»1000æå‡åˆ°5000â€ã€â€œæ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ç¼©çŸ­80%æ—¶é—´â€ç­‰ç¡¬æ ¸æŒ‡æ ‡ï¼Œè€Œä»–ç²¾å¿ƒå®ç°çš„â€œé¦–å±åŠ è½½ä»3ç§’é™åˆ°1ç§’â€å´è¢«è§†ä¸ºâ€œä½“éªŒä¼˜åŒ–ï¼Œä¸æ˜¯æ ¸å¿ƒéœ€æ±‚â€ã€‚</p>
<p><strong>æè–‡</strong>æ‰€åœ¨çš„åˆ›ä¸šå…¬å¸ï¼ŒCTOæ˜¯åç«¯å‡ºèº«ï¼ŒæŠ€æœ¯æ¶æ„ä¼šè®®ä»ä¸é‚€è¯·å‰ç«¯å‚ä¸ã€‚ç›´åˆ°é¡¹ç›®ä¸Šçº¿åå‡ºç°å¤§é‡ç§»åŠ¨ç«¯å…¼å®¹æ€§é—®é¢˜ï¼Œç”¨æˆ·æµå¤±ç‡é£™å‡ï¼Œæ‰æ„è¯†åˆ°å‰ç«¯æŠ€æœ¯å†³ç­–çš„é‡è¦æ€§â€”â€”ä½†æ­¤æ—¶è¡¥æ•‘çš„æˆæœ¬å·²æ˜¯é¢„é˜²çš„åå€ã€‚</p>
<h3 data-id="heading-6">é›„èµ·ä¹‹è·¯</h3>
<p><strong>ä¸è¦åªåšéœ€æ±‚çš„æ‰§è¡Œè€…ï¼Œè¦åšç”¨æˆ·ä½“éªŒçš„å®ˆæŠ¤è€…å’Œä¸šåŠ¡ä»·å€¼çš„å‘ç°è€…ã€‚</strong></p>
<p>åƒ<strong>å¼ æ˜</strong>é‚£æ ·ï¼Œå½“æ¥åˆ°ä¸€ä¸ªâ€œä¼˜åŒ–è¡¨å•é¡µé¢â€çš„éœ€æ±‚æ—¶ï¼Œä»–ä¸ä»…å®Œæˆäº†å¼€å‘ï¼Œæ›´é€šè¿‡ç”¨æˆ·è¡Œä¸ºåˆ†æå‘ç°ï¼šè¡¨å•æ¯å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œæµå¤±ç‡å¢åŠ 5%ã€‚ä»–æ®æ­¤æå‡ºâ€œåˆ†æ­¥è¡¨å•+è¿›åº¦æŒ‡ç¤ºâ€æ–¹æ¡ˆï¼Œä½¿è¡¨å•å®Œæˆç‡æå‡äº†34%ã€‚å½“ä½ èƒ½å°†æŠ€æœ¯å®ç°ç›´æ¥å…³è”åˆ°ä¸šåŠ¡å¢é•¿ï¼Œæ²¡äººä¼šå†å¿½è§†ä½ çš„å£°éŸ³ã€‚</p>
<p><strong>åœ¨å¿«é€Ÿå˜åŒ–çš„ç”Ÿæ€ä¸­ï¼Œæ·±åº¦æ˜¯æŠµå¾¡â€œå¯æ›¿ä»£æ€§â€çš„æœ€ä½³é˜²å¾¡ã€‚</strong></p>
<p>ä¸“æ³¨äºå¯è§†åŒ–é¢†åŸŸçš„<strong>èµµå³°</strong>ï¼Œå¸¦é¢†å›¢é˜Ÿè‡ªä¸»ç ”å‘äº†å…¬å¸çš„æ•°æ®å¯è§†åŒ–å¼•æ“ï¼Œè§£å†³äº†å¤æ‚å›¾è¡¨æ€§èƒ½ç“¶é¢ˆã€‚å½“ç«äº‰å¯¹æ‰‹è¿˜åœ¨ä½¿ç”¨å¼€æºæ–¹æ¡ˆå¡é¡¿æ—¶ï¼Œä»–ä»¬çš„äº§å“å®ç°äº†ä¸‡çº§æ•°æ®ç‚¹çš„æµç•…æ¸²æŸ“ã€‚è¿™ä»½ä¸“ä¸šæ·±åº¦ï¼Œè®©ä»–æˆä¸ºäº†å…¬å¸ä¸å¯æ›¿ä»£çš„æŠ€æœ¯ä¸“å®¶ã€‚</p>
<p><strong>ä¸ªäººçš„ä¼˜ç§€ç»ˆæœ‰å¤©èŠ±æ¿ï¼Œä½“ç³»çš„å¼ºå¤§æ‰èƒ½å¸¦æ¥æ ¹æœ¬æ€§æ”¹å˜ã€‚</strong></p>
<p>èµ„æ·±å‰ç«¯<strong>å‘¨æ¶›</strong>åœ¨æ„è¯†åˆ°å›¢é˜Ÿåä½œæ•ˆç‡ä½ä¸‹åï¼Œä¸»å¯¼æ­å»ºäº†å…¬å¸çš„å¾®å‰ç«¯æ¶æ„å’Œè®¾è®¡ç³»ç»Ÿã€‚è¿™ä¸ä»…è§£å†³äº†å¤šä¸ªå›¢é˜Ÿå¹¶è¡Œå¼€å‘çš„å†²çªé—®é¢˜ï¼Œæ›´ä½¿æ–°ä¸šåŠ¡çš„å¯åŠ¨æ—¶é—´ä»ä¸¤å‘¨ç¼©çŸ­åˆ°ä¸¤å¤©ã€‚ä»–ç°åœ¨è¢«ç§°ä¸ºâ€œå‰ç«¯åŸºç¡€è®¾æ–½è´Ÿè´£äººâ€ï¼Œè€Œä¸å†æ˜¯â€œé«˜çº§å‰ç«¯å¼€å‘â€ã€‚</p>
<p><strong>æœ€å±é™©çš„ä¸æ˜¯æŠ€èƒ½å•ä¸€ï¼Œè€Œæ˜¯æ€ç»´å±€é™ã€‚</strong></p>
<p><strong>å´ç³</strong>åŸæœ¬æ˜¯çº¯å‰ç«¯å¼€å‘è€…ï¼Œåœ¨æ¥è§¦äº†Node.jsåï¼Œå¥¹ä¸»åŠ¨æ‰¿æ‹…èµ·BFFå±‚çš„å¼€å‘ï¼Œæ‰“é€šäº†å‰ç«¯ä¸åç«¯çš„æ•°æ®é¸¿æ²Ÿã€‚æ¥ç€ï¼Œå¥¹è¿›ä¸€æ­¥æ¢ç´¢AIGCä¸å‰ç«¯ç»“åˆï¼Œå¼€å‘å‡ºæ™ºèƒ½UIç”Ÿæˆå·¥å…·ï¼Œå°†é‡å¤æ€§é¡µé¢å¼€å‘æ•ˆç‡æå‡60%ã€‚å¥¹çš„è§’è‰²å·²æ— æ³•ç”¨ä¼ ç»Ÿâ€œå‰ç«¯â€å®šä¹‰ï¼Œè€Œæ˜¯â€œä½“éªŒæŠ€æœ¯ä¸“å®¶â€ã€‚</p>
<p>é›„èµ·ä¹‹è·¯ï¼Œåœ¨ä½ ä¸‹ä¸€æ¬¡ä¸åªæ˜¯å®Œæˆä»»åŠ¡ï¼Œè€Œæ˜¯åˆ›é€ ä»·å€¼çš„æŠ‰æ‹©ä¸­ã€‚</p>
<h3 data-id="heading-7">ç»“è¯­</h3>
<p>é‚£äº›æ—¢èƒ½æ·±å…¥æŠ€æœ¯ç»†èŠ‚ï¼Œåˆèƒ½è¿æ¥ç”¨æˆ·éœ€æ±‚ï¼›æ—¢èƒ½å®ç°ç²¾ç¾ç•Œé¢ï¼Œåˆèƒ½æ„å»ºå·¥ç¨‹ä½“ç³»çš„å‰ç«¯å¼€å‘è€…ï¼Œæ°¸è¿œä¸ä¼šè¢«è¾¹ç¼˜åŒ–â€”â€”å› ä¸ºä»–ä»¬æ­£åœ¨å®šä¹‰æ•°å­—ä½“éªŒçš„æœªæ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘]]></title>    <link>https://juejin.cn/post/7595858760134557759</link>    <guid>https://juejin.cn/post/7595858760134557759</guid>    <pubDate>2026-01-17T14:58:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595858760134557759" data-draft-id="7595858760134541375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T14:58:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            QTè·¨å¹³å°ä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„ç¼–è¯‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:58:53.000Z" title="Sat Jan 17 2026 14:58:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šè½¯ä»¶å¼€å‘é¢†åŸŸï¼Œâ€œè·¨å¹³å°â€å·²ä»ä¸€ä¸ªæŠ€æœ¯ç†æƒ³è½¬å˜ä¸ºå®é™…éœ€æ±‚ã€‚å½“æˆ‘ä»¬è°ˆè®ºè·¨å¹³å°æ¡†æ¶æ—¶ï¼ŒQTæ— ç–‘æ˜¯å…¶ä¸­æœ€è€€çœ¼çš„åå­—ä¹‹ä¸€ã€‚ä½†QTç©¶ç«Ÿå¦‚ä½•å®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œåˆ°å¤„è¿è¡Œâ€çš„æ‰¿è¯ºï¼Ÿå®ƒçš„è·¨å¹³å°æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-0">æŠ½è±¡çš„è‰ºæœ¯ï¼šä¸æ­¢äºè¡¨é¢çš„ç»Ÿä¸€</h3>
<p>QTè·¨å¹³å°çš„æ ¸å¿ƒç­–ç•¥ä¸æ˜¯ç®€å•çš„â€œæ¡ä»¶ç¼–è¯‘â€ï¼Œè€Œæ˜¯æ„å»ºäº†ä¸€å¥—ç²¾å¦™çš„<strong>æŠ½è±¡å±‚æ¶æ„</strong>ã€‚è¿™ä¸€æ¶æ„ä½äºæ“ä½œç³»ç»ŸAPIä¹‹ä¸Šï¼Œåˆåœ¨åº”ç”¨ç¨‹åºä¹‹ä¸‹ï¼Œå……å½“äº†ç¿»è¯‘å®˜çš„è§’è‰²ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šå½“ä½ è°ƒç”¨<code>QWidget::show()</code>æ–¹æ³•æ˜¾ç¤ºä¸€ä¸ªçª—å£æ—¶ï¼Œåœ¨Windowsä¸Šï¼ŒQTå°†æ­¤è°ƒç”¨è½¬æ¢ä¸ºè°ƒç”¨Win32 APIçš„<code>CreateWindowEx</code>å’Œ<code>ShowWindow</code>ï¼›åœ¨macOSä¸Šï¼Œå®ƒä½¿ç”¨Cocoaæ¡†æ¶çš„<code>NSWindow</code>ï¼›åœ¨Linuxä¸Šï¼Œåˆ™å¯èƒ½ä½¿ç”¨X11æˆ–Waylandåè®®ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œä½ æ— éœ€å…³å¿ƒè¿™äº›åº•å±‚å·®å¼‚â€”â€”åŒä¸€è¡Œä»£ç åœ¨ä¸åŒå¹³å°ä¸Šè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„å®ç°è·¯å¾„ã€‚</p>
<p>è¿™ç§æŠ½è±¡ä¸ä»…é™äºGUIç³»ç»Ÿï¼Œè¿˜å»¶ä¼¸è‡³æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œé€šä¿¡ã€æ•°æ®åº“è®¿é—®ã€å¤šåª’ä½“å¤„ç†ç­‰å‡ ä¹æ¯ä¸€ä¸ªä¸æ“ä½œç³»ç»Ÿäº¤äº’çš„é¢†åŸŸã€‚QTå›¢é˜Ÿä¸ºæ¯ä¸ªæ”¯æŒçš„å¹³å°ç»´æŠ¤ä¸€å¥—â€œåç«¯å®ç°â€ï¼Œè¿™äº›å®ç°æä¾›äº†ç›¸åŒçš„æ¥å£ï¼Œä½†å†…éƒ¨å®ç°å®Œå…¨ä¸åŒã€‚</p>
<h3 data-id="heading-1">å…ƒå¯¹è±¡ç³»ç»Ÿï¼šè¶…è¶ŠC++çš„è¯­è¨€æ‰©å±•</h3>
<p>QTçš„è·¨å¹³å°èƒ½åŠ›è¿˜æºäºå…¶ç‹¬ç‰¹çš„<strong>å…ƒå¯¹è±¡ç³»ç»Ÿï¼ˆMeta-Object Systemï¼‰</strong>ã€‚é€šè¿‡æ‰©å±•C++è¯­è¨€ï¼ˆå€ŸåŠ©mocå…ƒå¯¹è±¡ç¼–è¯‘å™¨ï¼‰ï¼ŒQTå¼•å…¥äº†ä¿¡å·æ§½æœºåˆ¶ã€è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯å’ŒåŠ¨æ€å±æ€§ç³»ç»Ÿç­‰ç‰¹æ€§ã€‚è¿™äº›ç‰¹æ€§æœ¬èº«æ˜¯å¹³å°æ— å…³çš„ï¼Œä¸ºé«˜çº§åŠŸèƒ½æä¾›äº†ç»Ÿä¸€åŸºç¡€ã€‚</p>
<p>ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…ƒå¯¹è±¡ç³»ç»Ÿä½¿å¾—QTèƒ½å¤Ÿåˆ›å»ºçµæ´»çš„ã€å¯è„šæœ¬åŒ–çš„ç»„ä»¶æ¶æ„ï¼Œè¿™è¿›ä¸€æ­¥å¢å¼ºäº†å…¶è·¨å¹³å°èƒ½åŠ›ã€‚å› ä¸ºåº”ç”¨é€»è¾‘ä¸å¹³å°ç»†èŠ‚è§£è€¦ï¼Œå¤§éƒ¨åˆ†ä¸šåŠ¡ä»£ç å¯ä»¥åœ¨ä¸åŒå¹³å°é—´å…±äº«ã€‚</p>
<h3 data-id="heading-2">æ¸è¿›å¼æŠ½è±¡ï¼šåˆ†å±‚è®¾è®¡å“²å­¦</h3>
<p>QTå¹¶éå°†æ‰€æœ‰ä¸œè¥¿éƒ½æŠ½è±¡åŒ–ï¼Œè€Œæ˜¯é‡‡ç”¨äº†ä¸€ç§å·§å¦™çš„<strong>åˆ†å±‚è®¾è®¡</strong>ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒæ¨¡å—</strong>ï¼ˆQtCoreï¼‰ï¼šæä¾›åŸºç¡€å®¹å™¨ã€çº¿ç¨‹ã€æ–‡ä»¶IOç­‰ï¼ŒæŠ½è±¡ç¨‹åº¦æœ€é«˜</li>
<li><strong>GUIæ¨¡å—</strong>ï¼ˆQtGuiï¼‰ï¼šæŠ½è±¡å›¾å½¢ç»˜åˆ¶ã€äº‹ä»¶å¤„ç†ï¼Œä½†ä¿ç•™å„å¹³å°è§†è§‰ç‰¹è‰²</li>
<li><strong>å¹³å°æ¨¡å—</strong>ï¼šåŒ…å«å¹³å°ç‰¹å®šå®ç°ï¼Œå¯¹å¤–é€æ˜</li>
<li><strong>å·¥å…·æ¨¡å—</strong>ï¼ˆç½‘ç»œã€æ•°æ®åº“ç­‰ï¼‰ï¼šåœ¨æ ¸å¿ƒæŠ½è±¡åŸºç¡€ä¸Šæä¾›é«˜çº§åŠŸèƒ½</li>
</ol>
<p>è¿™ç§è®¾è®¡å…è®¸å¼€å‘è€…åœ¨ä¿æŒè·¨å¹³å°å…¼å®¹æ€§çš„åŒæ—¶ï¼Œåœ¨å¿…è¦æ—¶è®¿é—®å¹³å°ç‰¹æœ‰åŠŸèƒ½â€”â€”QTæä¾›äº†æ¡ä»¶ç¼–è¯‘å’Œå¹³å°æ£€æµ‹æœºåˆ¶ï¼Œç”¨äºå¤„ç†ä¸å¯é¿å…çš„å¹³å°å·®å¼‚ã€‚</p>
<h3 data-id="heading-3">æ„å»ºç³»ç»Ÿï¼šç»Ÿä¸€çš„æ„å»ºä½“éªŒ</h3>
<p>QTçš„è·¨å¹³å°æ€§ä¸ä»…ä½“ç°åœ¨è¿è¡Œæ—¶ï¼Œä¹Ÿè´¯ç©¿äºå¼€å‘è¿‡ç¨‹ã€‚qmakeï¼ˆåŠåæ¥çš„CMakeé›†æˆï¼‰èƒ½å¤Ÿç”Ÿæˆé€‚ç”¨äºä¸åŒå¹³å°å’Œç¼–è¯‘å™¨çš„æ„å»ºæ–‡ä»¶ï¼ˆå¦‚Windowsçš„MSVCã€Linuxçš„GCCã€macOSçš„Clangï¼‰ã€‚è¿™ç§æ„å»ºç³»ç»Ÿçš„ç»Ÿä¸€æå¤§ç®€åŒ–äº†å¤šå¹³å°å¼€å‘çš„ç®¡ç†å¤æ‚åº¦ã€‚</p>
<h3 data-id="heading-4">ç°ä»£æŒ‘æˆ˜ä¸æ¼”è¿›</h3>
<p>éšç€ç§»åŠ¨å¹³å°å’ŒWebAssemblyçš„å…´èµ·ï¼ŒQTçš„è·¨å¹³å°ç­–ç•¥ä¹Ÿåœ¨ä¸æ–­æ¼”è¿›ã€‚é¢å¯¹iOSå’ŒAndroidï¼ŒQTéœ€è¦å¤„ç†è§¦æ‘¸ç•Œé¢ã€ç§»åŠ¨è®¾å¤‡ä¼ æ„Ÿå™¨ç­‰æ–°ç»´åº¦ï¼›è€Œå¯¹WebAssemblyçš„æ”¯æŒï¼Œåˆ™æ„å‘³ç€å°†æ¡Œé¢åº”ç”¨é€»è¾‘ç§»æ¤åˆ°æµè§ˆå™¨ç¯å¢ƒä¸­è¿è¡Œã€‚</p>
<p>è¿™äº›æ–°æŒ‘æˆ˜ä¿ƒä½¿QTå‘å±•å‡ºæ›´ç²¾ç»†çš„å¹³å°æŠ½è±¡ç­–ç•¥ï¼Œä¾‹å¦‚é€šè¿‡Qt Quickä¸ºä¸åŒå±å¹•å°ºå¯¸å’Œäº¤äº’æ¨¡å¼æä¾›è‡ªé€‚åº”ç•Œé¢ï¼ŒåŒæ—¶ä¿æŒæ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„å¹³å°æ— å…³æ€§ã€‚</p>
<h3 data-id="heading-5">ç»“è®ºï¼šæŠ½è±¡çš„è‰ºæœ¯ä¸å·¥ç¨‹</h3>
<p>QTè·¨å¹³å°çš„æœ¬è´¨æ˜¯ä¸€ç§<strong>ç²¾å¿ƒè®¾è®¡çš„æŠ½è±¡è‰ºæœ¯ä¸ç³»ç»Ÿå·¥ç¨‹</strong>çš„ç»“åˆã€‚å®ƒä¸æ˜¯ç®€å•åœ°éšè—å¹³å°å·®å¼‚ï¼Œè€Œæ˜¯é€šè¿‡æ·±æ€ç†Ÿè™‘çš„æ¶æ„è®¾è®¡ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€è‡´çš„æ¦‚å¿µæ¨¡å‹å’Œç¼–ç¨‹æ¥å£ï¼ŒåŒæ—¶åœ¨åº•å±‚ä¸ºæ¯ä¸ªå¹³å°æä¾›æœ€ä¼˜åŒ–çš„å®ç°ã€‚</p>
<p>è¿™ç§è·¨å¹³å°ç­–ç•¥çš„æˆåŠŸï¼ŒæºäºQTé¡¹ç›®äºŒåå¤šå¹´æ¥å¯¹â€œä¸€è‡´æ€§â€ä¸â€œæœ¬åœ°åŒ–â€å¹³è¡¡çš„æŒç»­è¿½æ±‚â€”â€”æ—¢ä¸è®©å¼€å‘è€…è¢«å¹³å°ç»†èŠ‚å›°æ‰°ï¼Œä¹Ÿä¸å¼ºè¿«æ‰€æœ‰å¹³å°å‘ˆç°å®Œå…¨ç›¸åŒçš„ä½“éªŒã€‚æ­£æ˜¯åœ¨è¿™ç§å¹³è¡¡ä¸­ï¼ŒQTè¯æ˜äº†çœŸæ­£å¯æŒç»­çš„è·¨å¹³å°æ¡†æ¶ï¼Œåº”å½“å°Šé‡æ¯ä¸ªå¹³å°çš„ç‹¬ç‰¹ä¸ªæ€§ï¼ŒåŒæ—¶æä¾›ç»Ÿä¸€çš„å¼€å‘å¿ƒæ™ºæ¨¡å‹ã€‚</p>
<p>åœ¨æ—¥ç›Šç¢ç‰‡åŒ–çš„è®¡ç®—ä¸–ç•Œä¸­ï¼ŒQTçš„è·¨å¹³å°å“²å­¦æä¾›äº†ä¸€æ¡åŠ¡å®è·¯å¾„ï¼šä¸æ˜¯åˆ›é€ ä¸€ä¸ªå®Œå…¨ç»Ÿä¸€çš„ä¸–ç•Œï¼Œè€Œæ˜¯æ¶è®¾é€šå¾€ä¸åŒä¸–ç•Œçš„æ¡¥æ¢ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè‡ªç”±å¾€æ¥å…¶é—´ï¼Œè€Œæ— éœ€é‡å­¦æ¯ä¸€ç§â€œæ–¹è¨€â€ã€‚è¿™æˆ–è®¸æ‰æ˜¯è·¨å¹³å°çš„æœ€é«˜å¢ƒç•Œâ€”â€”åœ¨å·®å¼‚ä¸­å¯»æ‰¾ç»Ÿä¸€ï¼Œåœ¨å¤šæ ·æ€§ä¸­åˆ›é€ ä»·å€¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]]]></title>    <link>https://juejin.cn/post/7596181746061787163</link>    <guid>https://juejin.cn/post/7596181746061787163</guid>    <pubDate>2026-01-17T14:59:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596181746061787163" data-draft-id="7595894884957519923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T14:59:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯æ°å°¼"/> <meta itemprop="url" content="https://juejin.cn/user/4200579899599495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4200579899599495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯æ°å°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T14:59:17.000Z" title="Sat Jan 17 2026 14:59:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åŸºäº YOLOv8 çš„æ¡¥æ¢ç—…å®³ï¼ˆå…«ç±»ç¼ºé™·ã€ç—…å®³é«˜ç²¾åº¦ï¼‰è‡ªåŠ¨æ£€æµ‹ [ç›®æ ‡æ£€æµ‹å®Œæ•´æºç ]</h2>
<h3 data-id="heading-1">ä¸€ã€èƒŒæ™¯ä¸é—®é¢˜ï¼šæ¡¥æ¢æ£€æµ‹ä¸ºä»€ä¹ˆéœ€è¦ AIï¼Ÿ</h3>
<p>æ¡¥æ¢ä½œä¸ºåŸå¸‚ä¸äº¤é€šç½‘ç»œä¸­çš„å…³é”®åŸºç¡€è®¾æ–½ï¼Œå…¶æœå½¹å‘¨æœŸé•¿ã€å—åŠ›å¤æ‚ã€ç¯å¢ƒå½±å“æ˜¾è‘—ã€‚éšç€æ—¶é—´æ¨ç§»ï¼Œæ¡¥æ¢ç»“æ„ä¸å¯é¿å…åœ°ä¼šå‡ºç°<strong>è£‚ç¼æ‰©å±•ã€æ··å‡åœŸé€€åŒ–ã€é’¢ç­‹è…èš€ã€æ½®æ¹¿æ¸—æ°´ç­‰ç—…å®³é—®é¢˜</strong>ã€‚è‹¥ä¸èƒ½åŠæ—¶å‘ç°å¹¶å¤„ç†ï¼Œè½»åˆ™å½±å“é€šè¡Œå®‰å…¨ï¼Œé‡åˆ™å¼•å‘ç»“æ„æ€§é£é™©ã€‚</p>
<p>ä¼ ç»Ÿæ¡¥æ¢æ£€æµ‹ä¸»è¦ä¾èµ–äººå·¥ç›®æµ‹æˆ–äººå·¥+ä»ªå™¨ç»“åˆçš„æ–¹å¼ï¼Œæ™®éå­˜åœ¨ä»¥ä¸‹ç—›ç‚¹ï¼š</p>
<ul>
<li>æ£€æµ‹æ•ˆç‡ä½ï¼Œéš¾ä»¥è¦†ç›–å¤§è§„æ¨¡æ¡¥æ¢èµ„äº§</li>
<li>å¯¹æ£€æµ‹äººå‘˜ç»éªŒä¾èµ–å¼ºï¼Œç»“æœä¸»è§‚æ€§é«˜</li>
<li>æ•°æ®éš¾ä»¥ç»“æ„åŒ–ï¼Œä¸åˆ©äºé•¿æœŸå¥åº·è¯„ä¼°</li>
</ul>
<p>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒåŸºäºè®¡ç®—æœºè§†è§‰çš„<strong>è‡ªåŠ¨åŒ–æ¡¥æ¢ç—…å®³æ£€æµ‹</strong>é€æ¸æˆä¸ºæ™ºèƒ½è¿ç»´çš„é‡è¦å‘å±•æ–¹å‘ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58c690947407426fa78ba64f63dcc183~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=DcFA3hrnUTOGMuSeJrvVZ59clGQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-2">æºç ä¸‹è½½ä¸æ•ˆæœæ¼”ç¤º</h3>
<p>å“”å“©å“”å“©è§†é¢‘ä¸‹æ–¹è§‚çœ‹ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1m8g8z6Ejp%2F" target="_blank" title="https://www.bilibili.com/video/BV1m8g8z6Ejp/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1m8â€¦</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49f7c46d0ed49f6be72fa5b8e432ae1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=EpzfAkqHB11Vnhu8ayVIng9hy3M%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
åŒ…å«ï¼š</p>
<p>ğŸ“¦å®Œæ•´é¡¹ç›®æºç </p>
<p>ğŸ“¦ é¢„è®­ç»ƒæ¨¡å‹æƒé‡</p>
<p>ğŸ—‚ï¸ æ•°æ®é›†åœ°å€ï¼ˆå«æ ‡æ³¨è„šæœ¬</p>
<h3 data-id="heading-3">äºŒã€æ•´ä½“è§£å†³æ–¹æ¡ˆæ¦‚è¿°</h3>
<p>æœ¬æ–‡ä»‹ç»çš„ä¸€å¥—æ¡¥æ¢ç—…å®³æ£€æµ‹ç³»ç»Ÿï¼Œé‡‡ç”¨ <strong>YOLOv8 ç›®æ ‡æ£€æµ‹æ¨¡å‹</strong> ä½œä¸ºæ ¸å¿ƒç®—æ³•ï¼Œå¹¶ç»“åˆ <strong>PyQt5 æ¡Œé¢ç«¯å¯è§†åŒ–å·¥å…·</strong>ï¼Œæ„å»ºäº†ä¸€æ¡ä»æ¨¡å‹è®­ç»ƒåˆ°å·¥ç¨‹åº”ç”¨çš„å®Œæ•´æŠ€æœ¯é“¾è·¯ã€‚</p>
<h4 data-id="heading-4">ç³»ç»Ÿæ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆ</h4>
<ul>
<li>æ”¯æŒ <strong>8 ç±»å…¸å‹æ¡¥æ¢ç¼ºé™·ä¸ç—…å®³è¯†åˆ«</strong></li>
<li>è¦†ç›– <strong>å›¾ç‰‡ã€æ‰¹é‡å›¾ç‰‡ã€è§†é¢‘ã€æ‘„åƒå¤´</strong> ç­‰å¤šç§è¾“å…¥å½¢å¼</li>
<li>æä¾› <strong>å›¾å½¢åŒ–æ“ä½œç•Œé¢</strong>ï¼Œé™ä½ä½¿ç”¨é—¨æ§›</li>
<li>æ”¯æŒæ¨¡å‹å†è®­ç»ƒä¸å·¥ç¨‹çº§éƒ¨ç½²</li>
</ul>
<p>è¯¥ç³»ç»Ÿæ—¢å¯ä½œä¸ºç§‘ç ”ä¸æ•™å­¦æ¡ˆä¾‹ï¼Œä¹Ÿå¯ç›´æ¥ç”¨äºå·¥ç¨‹æ£€æµ‹ä¸å·¡æ£€è¾…åŠ©ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92cb19d1de6b451e85f969ea354bee8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=2wWDrP%2BDDiLT%2BzQ32AUJa3Z81lM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d2f9c31fd784df9b4bf328bba64145b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=zbaggZF7We6Fchks4F4YmHOSq2c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸‰ã€æ£€æµ‹ç›®æ ‡è®¾è®¡ï¼šè®©æ¨¡å‹â€œçœ‹æ‡‚â€æ¡¥æ¢é—®é¢˜</h3>
<p>åœ¨æ¡¥æ¢ç»“æ„è¡¨é¢ï¼Œç—…å®³å¾€å¾€å‘ˆç°å‡º<strong>å°ºåº¦å°ã€çº¹ç†ç»†ã€å½¢æ€å¤šæ ·</strong>çš„ç‰¹ç‚¹ã€‚é’ˆå¯¹å·¥ç¨‹å®è·µéœ€æ±‚ï¼Œç³»ç»Ÿå®šä¹‰äº†ä»¥ä¸‹å…«ç±»æ£€æµ‹ç›®æ ‡ï¼š</p>
<ol>
<li>è£‚ç¼</li>
<li>æ”¶ç¼©è£‚ç¼</li>
<li>åº•å±‚æ”¶ç¼©è£‚ç¼</li>
<li>æ··å‡åœŸé€€åŒ–</li>
<li>æ··å‡åœŸç©ºæ´</li>
<li>è…èš€</li>
<li>æ½®æ¹¿</li>
<li>è·¯é¢åŠ£åŒ–</li>
</ol>
<p>è¿™äº›ç±»åˆ«åŸºæœ¬è¦†ç›–äº†å¸¸è§æ¡¥æ¢è¡¨è§‚ç—…å®³ç±»å‹ï¼Œä¸ºåç»­å¥åº·è¯„ä¼°ä¸ç»´ä¿®å†³ç­–æä¾›äº†ç»“æ„åŒ–è¾“å…¥ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67df1e73065f490294af013f4e196e9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=XRGq0Wz7SAV9cKVFdSZHNy%2FMTXE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-6">å››ã€ä¸ºä»€ä¹ˆé€‰æ‹© YOLOv8ï¼Ÿ</h3>
<p>YOLOv8 æ˜¯ Ultralytics æ¨å‡ºçš„æ–°ä¸€ä»£å®æ—¶ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œåœ¨å·¥ç¨‹å®è·µä¸­è¡¨ç°å‡ºæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>Anchor-Free æ¶æ„</strong>
å¯¹ç»†é•¿è£‚ç¼ã€å°å°ºåº¦ç¼ºé™·æ›´å‹å¥½ï¼Œå‡å°‘äººä¸ºå…ˆéªŒçº¦æŸã€‚</p>
</li>
<li>
<p><strong>æ¨ç†é€Ÿåº¦å¿«</strong>
èƒ½å¤Ÿæ»¡è¶³è§†é¢‘æµä¸å®æ—¶æ£€æµ‹åœºæ™¯éœ€æ±‚ã€‚</p>
</li>
<li>
<p><strong>è®­ç»ƒä¸éƒ¨ç½²æµç¨‹æˆç†Ÿ</strong>
æ¨¡å‹é…ç½®çµæ´»ï¼Œæ”¯æŒå¿«é€Ÿå¤ç°ä¸è¿ç§»å­¦ä¹ ã€‚</p>
</li>
<li>
<p><strong>å¤šä»»åŠ¡æ‰©å±•èƒ½åŠ›å¼º</strong>
ä¸ºåç»­å¼•å…¥åˆ†å‰²ã€å§¿æ€æˆ–å¤šæ¨¡æ€ä»»åŠ¡å¥ å®šåŸºç¡€ã€‚</p>
</li>
</ul>
<p>åœ¨æ¡¥æ¢ç—…å®³è¿™ç±»â€œå¤æ‚èƒŒæ™¯ + å°ç›®æ ‡â€çš„åœºæ™¯ä¸­ï¼ŒYOLOv8 åœ¨ç²¾åº¦ä¸é€Ÿåº¦ä¹‹é—´å–å¾—äº†è‰¯å¥½å¹³è¡¡ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/370d251dc1c44bc992d774176a169a51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=xlM5fHolXIkK5jkKfVXiJkqDBVk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-7">äº”ã€æ•°æ®é›†æ„å»ºä¸è®­ç»ƒæµç¨‹</h3>
<h4 data-id="heading-8">1. æ•°æ®ç»„ç»‡æ–¹å¼</h4>
<p>ç³»ç»Ÿé‡‡ç”¨æ ‡å‡† YOLO æ•°æ®æ ¼å¼ï¼Œæ¸…æ™°åˆ’åˆ†è®­ç»ƒé›†ä¸éªŒè¯é›†ï¼Œä¾¿äºæ¨¡å‹è¿­ä»£ï¼š</p>
<pre><code class="hljs language-text" lang="text">dataset/
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
â”œâ”€â”€ labels/
â”‚   â”œâ”€â”€ train/
â”‚   â””â”€â”€ val/
</code></pre>
<p>æ¯å¼ å›¾åƒå‡é…æœ‰å¯¹åº”æ ‡æ³¨æ–‡ä»¶ï¼Œè®°å½•ç›®æ ‡ç±»åˆ«åŠå½’ä¸€åŒ–è¾¹ç•Œæ¡†ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-9">2. è®­ç»ƒä¸è¯„ä¼°ç­–ç•¥</h4>
<p>æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œé‡ç‚¹å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š</p>
<ul>
<li><strong>box_loss</strong>ï¼šå®šä½ç²¾åº¦</li>
<li><strong>cls_loss</strong>ï¼šç±»åˆ«åŒºåˆ†èƒ½åŠ›</li>
<li><strong>mAP@0.5</strong>ï¼šæ•´ä½“æ£€æµ‹æ€§èƒ½</li>
</ul>
<p>å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šè¾¾åˆ°ç¨³å®šæ”¶æ•›å¹¶å–å¾—è¾ƒé«˜ mAP åï¼Œå³å¯è¿›å…¥éƒ¨ç½²ä¸åº”ç”¨é˜¶æ®µã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c173f5c65d84200a0eb68d6c070bb37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=LDZeagcqPw8WJsyJ%2BXxfxrqUmT8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-10">å…­ã€æ¨ç†ä¸å¯è§†åŒ–ç³»ç»Ÿå®ç°</h3>
<h4 data-id="heading-11">1. æ¨¡å‹æ¨ç†é€»è¾‘</h4>
<p>ç³»ç»ŸåŸºäº PyTorch æ¨ç†æ¥å£åŠ è½½è®­ç»ƒå®Œæˆçš„ YOLOv8 æ¨¡å‹ï¼Œå¯¹è¾“å…¥å›¾åƒæˆ–è§†é¢‘é€å¸§æ‰§è¡Œæ£€æµ‹ï¼Œè¾“å‡ºåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç¼ºé™·ç±»åˆ«</li>
<li>ç½®ä¿¡åº¦</li>
<li>è¾¹ç•Œæ¡†åæ ‡</li>
</ul>
<p>è¿™äº›ä¿¡æ¯å¯è¿›ä¸€æ­¥ç”¨äºç»Ÿè®¡åˆ†ææˆ–é£é™©è¯„ä¼°ã€‚</p>
<h4 data-id="heading-12">2. PyQt5 å›¾å½¢åŒ–ç•Œé¢ä¼˜åŠ¿</h4>
<p>é€šè¿‡ PyQt5 å°è£…æ¨ç†æµç¨‹ï¼Œç³»ç»Ÿå®ç°äº†ï¼š</p>
<ul>
<li>å›¾åƒ/è§†é¢‘/æ‘„åƒå¤´ä¸€é”®åŠ è½½</li>
<li>æ£€æµ‹ç»“æœå®æ—¶å±•ç¤º</li>
<li>è‡ªåŠ¨ä¿å­˜æ£€æµ‹å›¾ç‰‡ä¸æ—¥å¿—</li>
<li>æ— éœ€å‘½ä»¤è¡Œæ“ä½œçš„å·¥ç¨‹åŒ–ä½“éªŒ</li>
</ul>
<p>è¿™ä½¿å¾—ç³»ç»Ÿä¸ä»…é¢å‘ç®—æ³•å·¥ç¨‹å¸ˆï¼Œä¹Ÿé€‚ç”¨äºæ£€æµ‹äººå‘˜ä¸å·¥ç¨‹ç®¡ç†äººå‘˜ä½¿ç”¨ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2c22c2c2e51429c8183e40272c07158~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=LeuaM7M6n3Hd0lQioodUbnp8G6w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-13">ä¸ƒã€å…¸å‹åº”ç”¨åœºæ™¯</h3>
<p>è¯¥ç³»ç»Ÿåœ¨å¤šä¸ªå®é™…åœºæ™¯ä¸­å…·å¤‡åº”ç”¨æ½œåŠ›ï¼š</p>
<ul>
<li>æ¡¥æ¢æ—¥å¸¸å·¡æ£€ä¸å¿«é€Ÿç­›æŸ¥</li>
<li>å†å²ç—…å®³æ•°æ®å¯¹æ¯”ä¸è¶‹åŠ¿åˆ†æ</li>
<li>ç§‘ç ”æœºæ„æ¡¥æ¢å¥åº·ç›‘æµ‹ç ”ç©¶</li>
<li>é«˜æ ¡åœŸæœ¨ä¸æ™ºèƒ½å»ºé€ è¯¾ç¨‹æ•™å­¦</li>
</ul>
<p>é€šè¿‡æŒç»­ç§¯ç´¯æ£€æµ‹ç»“æœï¼Œè¿˜å¯è¿›ä¸€æ­¥æ„å»ºæ¡¥æ¢å…¨ç”Ÿå‘½å‘¨æœŸå¥åº·ç®¡ç†ä½“ç³»ã€‚</p>
<hr/>
<h3 data-id="heading-14">å…«ã€æœªæ¥æ‰©å±•æ–¹å‘</h3>
<p>åœ¨å½“å‰ç³»ç»ŸåŸºç¡€ä¸Šï¼Œå¯è¿›ä¸€æ­¥æ‹“å±•ä»¥ä¸‹èƒ½åŠ›ï¼š</p>
<ul>
<li>å¼•å…¥ <strong>å›¾åƒåˆ†å‰²æ¨¡å‹</strong>ï¼Œå®ç°è£‚ç¼ç²¾ç»†åŒ–æµ‹é‡</li>
<li>èåˆ <strong>çº¢å¤–æˆ–å¤šå…‰è°±æ•°æ®</strong>ï¼Œå¢å¼ºéšè”½ç—…å®³è¯†åˆ«</li>
<li>éƒ¨ç½²è‡³ <strong>è¾¹ç¼˜è®¡ç®—è®¾å¤‡æˆ–æ— äººæœºå¹³å°</strong></li>
<li>ç»“åˆæ—¶åºæ•°æ®ï¼Œåˆ†æç—…å®³æ¼”åŒ–è¶‹åŠ¿</li>
</ul>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d636186e1b942c59d8beaec1043b02d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv5p2w5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769266757&amp;x-signature=7%2FnPWLf2iFBXyHnXH8N0yDEGhmM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-15">ç»“è¯­</h3>
<p>æœ¬æ–‡ä»‹ç»äº†ä¸€å¥—é¢å‘å®é™…å·¥ç¨‹åº”ç”¨çš„ <strong>æ¡¥æ¢ç—…å®³æ™ºèƒ½æ£€æµ‹ç³»ç»Ÿ</strong>ï¼Œé€šè¿‡ YOLOv8 é«˜æ€§èƒ½ç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸ PyQt5 å¯è§†åŒ–å·¥å…·çš„ç»“åˆï¼Œå®ç°äº†ä»æ•°æ®ã€æ¨¡å‹åˆ°åº”ç”¨çš„å®Œæ•´é—­ç¯ã€‚</p>
<p>è¯¥æ–¹æ¡ˆåœ¨æå‡æ£€æµ‹æ•ˆç‡ã€é™ä½äººå·¥æˆæœ¬ã€å¢å¼ºç»“æœä¸€è‡´æ€§æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼Œä¸ºæ¡¥æ¢æ™ºèƒ½å·¡æ£€ä¸ç»“æ„å¥åº·ç›‘æµ‹æä¾›äº†ä¸€æ¡å¯è½åœ°ã€å¯æ‰©å±•çš„æŠ€æœ¯è·¯å¾„ï¼Œä¹Ÿä¸ºå·¥ä¸šè§†è§‰åœ¨åŸºç¡€è®¾æ–½é¢†åŸŸçš„åº”ç”¨æä¾›äº†æœ‰ä»·å€¼çš„å®è·µå‚è€ƒã€‚</p>
<p>æœ¬æ–‡ä»å®é™…å·¥ç¨‹åº”ç”¨è§’åº¦å‡ºå‘ï¼Œç³»ç»Ÿæ¢³ç†äº†ä¸€å¥—åŸºäºæ·±åº¦å­¦ä¹ ç›®æ ‡æ£€æµ‹æ¨¡å‹çš„æ™ºèƒ½è¯†åˆ«è§£å†³æ–¹æ¡ˆï¼Œå®Œæ•´è¦†ç›–äº†æ•°æ®å‡†å¤‡ã€æ¨¡å‹è®­ç»ƒã€æ¨ç†éªŒè¯ä»¥åŠåº”ç”¨ç³»ç»Ÿé›†æˆç­‰å…³é”®ç¯èŠ‚ã€‚é€šè¿‡å°†ç®—æ³•èƒ½åŠ›ä¸å¯è§†åŒ–åº”ç”¨ç›¸ç»“åˆï¼Œå®ç°äº†ä»æ¨¡å‹æ•ˆæœéªŒè¯åˆ°ä¸šåŠ¡å¯ç”¨ç³»ç»Ÿè½åœ°çš„è½¬åŒ–ï¼Œä½“ç°äº†äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨çœŸå®åœºæ™¯ä¸­çš„å·¥ç¨‹ä»·å€¼ã€‚æ•´ä½“æ–¹æ¡ˆç»“æ„æ¸…æ™°ã€æŠ€æœ¯è·¯çº¿æˆç†Ÿï¼Œæ—¢å…·å¤‡è¾ƒå¼ºçš„å¤ç”¨æ€§ä¸æ‰©å±•æ€§ï¼Œä¹Ÿä¸ºç›¸å…³é¢†åŸŸçš„æ™ºèƒ½åŒ–å‡çº§æä¾›äº†å¯å‚è€ƒã€å¯è½åœ°çš„å®ç°èŒƒå¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595878718172266532</link>    <guid>https://juejin.cn/post/7595878718172266532</guid>    <pubDate>2026-01-17T15:01:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172266532" data-draft-id="7595858760134574143" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-17T15:01:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åšå®¢ä¸çŸ­è§†é¢‘è°æ›´èƒ½æˆå°±ä½ çš„ä¸ªäººå“ç‰Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T15:01:22.000Z" title="Sat Jan 17 2026 15:01:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>äººç‰©ï¼š</strong><br/>
è€æ´¾åšå®¢ï¼ˆåšå“¥ï¼‰â€”â€”æ–‡å­—çˆ±å¥½è€…ï¼Œå´‡å°šæ·±åº¦ä¸æŒä¹…<br/>
æ–°é”çŸ­è§†é¢‘ï¼ˆæŠ–å¦¹ï¼‰â€”â€”è§†è§‰è¾¾äººï¼Œè¿½æ±‚ä¼ æ’­ä¸äº’åŠ¨</p>
<p><strong>åœºæ™¯ï¼š</strong> è™šæ‹Ÿçš„â€œå“ç‰Œå’–å•¡é¦†â€å†…ï¼Œä¸¤äººéš”ç€æ¡Œå­é¢å¯¹é¢åç€ã€‚ç©ºæ°”ä¸­å¼¥æ¼«ç€æ·¡æ·¡çš„å’–å•¡é¦™ä¸éšçº¦çš„é”®ç›˜æ•²å‡»å£°ã€‚</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼ˆæ¨äº†æ¨çœ¼é•œï¼Œå•œä¸€å£é»‘å’–å•¡ï¼‰ï¼šâ€œå“ç‰Œä¸æ˜¯çƒŸèŠ±ï¼Œè€Œæ˜¯é™ˆå¹´ä½³é…¿ã€‚ä½ æƒ³è¢«è®°ä½ä¸‰ç§’ï¼Œè¿˜æ˜¯è¢«ä¿¡èµ–ä¸‰å¹´ï¼Ÿåšå®¢ç”¨æ–‡å­—æ„å»ºæ€æƒ³å®«æ®¿ï¼Œæ¯ä¸€ç¯‡éƒ½æ˜¯ä½ çš„åŸºçŸ³ã€‚â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆæ‰‹æœºå±çš„å…‰æ˜ åœ¨ç¬‘è„¸ä¸Šï¼‰ï¼šâ€œåšå“¥ï¼Œç°åœ¨æ˜¯æ³¨æ„åŠ›ç»æµæ—¶ä»£ã€‚ä¸€æ¡çˆ†æ¬¾çŸ­è§†é¢‘24å°æ—¶èƒ½è§¦è¾¾ç™¾ä¸‡äººâ€”â€”ä½ åšå®¢ä¸‰å¹´é˜…è¯»é‡çš„æ€»å’Œã€‚å“ç‰Œé¦–å…ˆå¾—è¢«äººâ€˜çœ‹è§â€™ï¼Œå¯¹å§ï¼Ÿâ€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼šâ€œçœ‹è§ç„¶åå‘¢ï¼Ÿç¢ç‰‡åŒ–çš„å¨±ä¹èƒ½ç•™ä¸‹ä»€ä¹ˆï¼Ÿæˆ‘çš„è¯»è€…ä¼šåœ¨æ·±å¤œé‡è¯»æˆ‘äº”å¹´å‰å…³äºâ€˜èŒåœºéŸ§æ€§â€™çš„æ–‡ç« ï¼Œç•™è¨€è¯´å®ƒæ”¹å˜äº†èŒä¸šè½¨è¿¹ã€‚è¿™ç§æ·±åº¦è¿æ¥ï¼Œç®—æ³•èƒ½ç»™ä½ å—ï¼Ÿâ€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆæ‰‹æŒ‡è½»ç›ˆåˆ’è¿‡å±å¹•ï¼‰ï¼šâ€œæ·±åº¦ä¸å¿…æ’æ–¥å¹¿åº¦å‘€ã€‚æˆ‘ç”¨60ç§’è®²é€â€˜æ—¶é—´ç®¡ç†é™·é˜±â€™ï¼Œè¯„è®ºåŒºå˜æˆåƒäººäº’åŠ©ç¤¾åŒºã€‚è§†è§‰+æƒ…æ„Ÿ+å³æ—¶äº’åŠ¨â€”â€”è¿™æ˜¯å¤šç»´åº¦çš„å“ç‰Œæ¸—é€ã€‚å¯¹äº†ï¼Œä¸Šå‘¨æˆ‘é‚£æ¡â€˜ä¹¦æˆ¿å¸ƒç½®å“²å­¦â€™æ’­æ”¾é‡ç ´500ä¸‡ï¼Œé¡ºä¾¿å¸¦ç«äº†æˆ‘çš„çº¿ä¸Šè¯¾ç¨‹ã€‚â€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼šâ€œå¯ä¾èµ–å¹³å°ç®—æ³•å¦‚åŒåœ¨æµæ²™ä¸Šç­‘å¡”ã€‚ä½ çš„å†…å®¹å¯¿å‘½æœ‰å¤šé•¿ï¼Ÿæˆ‘çš„æ–‡ç« åå¹´åä»èƒ½è¢«æœç´¢å¼•æ“å‘ç°ï¼ŒæŒç»­å¸¦æ¥å’¨è¯¢å®¢æˆ·ã€‚SEOæ˜¯è€å¿ƒçš„å¤åˆ©è€…ã€‚â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼šâ€œä½†â€˜å“ç‰Œäººæ ¼åŒ–â€™éœ€è¦æ¸©åº¦ï¼æˆ‘çš„è¡¨æƒ…ã€è¯­è°ƒã€ä¹¦æˆ¿èƒŒæ™¯ç”šè‡³çŒ«çš„å…¥é•œï¼Œéƒ½åœ¨ä¼ é€’çœŸå®æ„Ÿã€‚ç”¨æˆ·è¯´â€˜æ„Ÿè§‰åƒæ¯å‘¨è§é¢çš„æœ‹å‹â€™â€”â€”è¿™ç§äº²å’ŒåŠ›è½¬åŒ–ç‡æ¯”å†·æ–‡å­—é«˜47%ï¼Œæ•°æ®è¯´çš„ã€‚â€</p>
<hr/>
<p><strong>ï¼ˆæ²‰é»˜ç‰‡åˆ»ï¼Œå’–å•¡æœºå‘å‡ºè’¸æ±½çš„å˜¶é¸£ï¼‰</strong></p>
<p><strong>åšå“¥</strong>ï¼ˆè¯­æ°”ç¨ç¼“ï¼‰ï¼šâ€œæˆ‘æ‰¿è®¤ï¼Œä½ è®©å¤æ‚æ¦‚å¿µå˜å¾—å¹³æ˜“è¿‘äººã€‚ä½†æ–‡å­—æ‰€ç‹¬æœ‰çš„æŠ½è±¡æ€è¾¨ç©ºé—´â€¦â€¦â€</p>
<p><strong>æŠ–å¦¹</strong>ï¼ˆèº«ä½“å‰å€¾ï¼‰ï¼šâ€œå…¶å®æˆ‘æ‚„æ‚„æŠŠä½ çš„é•¿æ–‡æ‹†è§£æˆç³»åˆ—çŸ­è§†é¢‘ï¼Œæ ‡æ³¨â€˜æ·±åº¦ç‰ˆè§åšå®¢é“¾æ¥â€™ã€‚æˆ‘çš„è§‚ä¼—ä¸­23%ä¼šç‚¹è¿‡å»â€”â€”æˆ‘ä»¬æœ¬å°±ä¸æ˜¯æ•Œäººã€‚â€</p>
<hr/>
<p><strong>åšå“¥</strong>ï¼ˆè‹¥æœ‰æ‰€æ€åœ°è½¬åŠ¨å’–å•¡æ¯ï¼‰ï¼šâ€œæ‰€ä»¥ä½ åœ¨åšæˆ‘çš„é¢„å‘Šç‰‡ï¼Ÿâ€</p>
<p><strong>æŠ–å¦¹</strong>ï¼šâ€œè€Œä½ æ˜¯æˆ‘çš„èµ„æ–™åº“ã€‚å“ç‰Œå»ºè®¾ä»æ¥ä¸æ˜¯å•é€‰â€”â€”æ˜¯è®©çŸ­è§†é¢‘æˆä¸ºå¸å¼•åŠ›çš„æ—‹æ¶¡ï¼Œè®©åšå®¢æˆä¸ºæ²‰æ·€æ„Ÿçš„åœ£æ®¿ã€‚åˆ«å¿˜äº†ï¼Œé‚£äº›æœ€æŒä¹…çš„ä¸ªäººå“ç‰Œï¼Œéƒ½åœ¨ç”¨è§†é¢‘æ‰©å¤§å£°é‡ï¼Œå†ç”¨æ–‡å­—å·©å›ºä¿¡ä»»ã€‚â€</p>
<hr/>
<h2 data-id="heading-0"><strong>æœ€ç»ˆç»“è®º</strong></h2>
<p>è¿™åœºè¾©è®ºæ²¡æœ‰è¾“å®¶ï¼Œä½†<strong>çŸ­è§†é¢‘åœ¨ä¸ªäººå“ç‰Œå¯åŠ¨é˜¶æ®µå…·æœ‰å†³å®šæ€§ä¼˜åŠ¿</strong>ã€‚åŸå› åœ¨äºï¼š</p>
<ol>
<li><strong>ä¼ æ’­æ•ˆç‡çš„ç»´åº¦å·®å¼‚</strong>ï¼šçŸ­è§†é¢‘èƒ½åŒæ—¶ä¼ é€’è§†è§‰ç¬¦å·ã€å£°éŸ³é­…åŠ›ã€åœºæ™¯æ°›å›´ä¸æƒ…ç»ªå†²å‡»ï¼Œåœ¨å•ä½æ—¶é—´å†…æ„å»ºæ›´ç«‹ä½“çš„â€œäººæ ¼ç”»åƒâ€ï¼Œè¿™å¯¹åˆæœŸå»ºç«‹å“ç‰Œè®¤çŸ¥è‡³å…³é‡è¦ã€‚</li>
<li><strong>ç®—æ³•èµ‹èƒ½çš„å†·å¯åŠ¨</strong>ï¼šå»ä¸­å¿ƒåŒ–åˆ†å‘æœºåˆ¶è®©ç´ äººæœ‰æœºä¼šçªç ´åœˆå±‚ï¼Œè¿™æ˜¯ä¼ ç»Ÿåšå®¢éš¾ä»¥ä¼åŠçš„ã€‚</li>
<li><strong>ä¿¡ä»»åŠ é€Ÿå™¨</strong>ï¼šé¢éƒ¨å‡ºé•œå¸¦æ¥çš„â€œå¯è§†å¯ä¿¡åº¦â€ï¼Œèƒ½å¿«é€Ÿè·¨è¶Šé™Œç”Ÿä¿¡ä»»é—¨æ§›ã€‚</li>
</ol>
<p>ä½†è¿™å¹¶éç»ˆç‚¹ã€‚<strong>çœŸæ­£çš„æ™ºæ…§åœ¨äºæ„å»ºâ€œçŸ­è§†é¢‘å…¥å£+åšå®¢æ²‰æ·€â€çš„ç”Ÿæ€é—­ç¯</strong>ï¼š</p>
<ul>
<li>ç”¨çŸ­è§†é¢‘çš„é’©å­å¸å¼•æµ·é‡å…³æ³¨</li>
<li>ä»¥åšå®¢çš„æ·±åº¦å®Œæˆä»·å€¼ç­›é€‰ä¸ä¿¡ä»»æ·±åŒ–</li>
<li>è®©ä¸¤è€…å½¢æˆå†…å®¹å±‚é¢çš„ç›¸äº’å¯¼æµ</li>
</ul>
<p><strong>ä¸ªäººå“ç‰Œçš„ç»ˆæå½¢æ€ï¼Œæ˜¯æˆä¸ºä¸€åº§æ—¢æœ‰çƒ­é—¹é—¨åº­ï¼ˆçŸ­è§†é¢‘ï¼‰ï¼Œåˆæœ‰æ·±é‚ƒæ®¿å ‚ï¼ˆåšå®¢ï¼‰çš„è®¤çŸ¥åŸå¸‚ã€‚</strong> è€Œåœ¨è¿™ä¸ªæ³¨æ„åŠ›ç¨€ç¼ºçš„æ—¶ä»£ï¼Œ<strong>é€‰æ‹©ä»¥çŸ­è§†é¢‘ä¸ºå…ˆé”‹ï¼Œä¸æ˜¯æ”¾å¼ƒæ·±åº¦ï¼Œè€Œæ˜¯ä»¥æ›´ç¬¦åˆäººæ€§æ„ŸçŸ¥è§„å¾‹çš„æ–¹å¼ï¼Œä¸ºä½ çš„æ€æƒ³æ‰“å¼€ç¬¬ä¸€æ‰‡é—¨ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7595994039108861988</link>    <guid>https://juejin.cn/post/7595994039108861988</guid>    <pubDate>2026-01-17T13:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595994039108861988" data-draft-id="7596025264455581732" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-17T13:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GISä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/4346787284915481"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆæ¯æ¬¡æ‰“å¼€ ArcGIS Pro é¡µé¢åŠ è½½éƒ½å¦‚æ­¤ç¼“æ…¢ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4346787284915481/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GISä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:33:22.000Z" title="Sat Jan 17 2026 13:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">^Â å…³æ³¨æˆ‘ï¼Œå¸¦ä½ ä¸€èµ·å­¦GISÂ ^</h2>
<p>å¤§å®¶æœ‰æ²¡æœ‰è¿™ç§ç»å†ï¼Œæ¯æ¬¡æ–°å»ºæˆ–è€…æ‰“å¼€ä¸€ä¸ªå·²æœ‰çš„<code>ArcGIS Pro</code>å·¥ç¨‹çš„è¯ï¼Œåœ¨åŠ è½½åœºæ™¯é¡µé¢éƒ½è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´ï¼Œè¿™æ— ç–‘å¯¹ä½¿ç”¨ä½“éªŒé€ æˆéå¸¸ä¸å¥½çš„å½±å“ã€‚</p>
<p>é¦–å…ˆéœ€è¦æ£€æŸ¥ä¸€ä¸‹ç”µè„‘é…ç½®ï¼Œå¦‚æœä½ çš„ç”µè„‘è¿è¡Œå†…å­˜ç¨å¾®ä½ä¸€ç‚¹ï¼Œæ˜¾å¡ä¹Ÿä¸å¤ªç»™åŠ›ï¼Œå¯¹è½¯ä»¶è¿è¡Œä¼šé€ æˆä¸€å®šå½±å“ã€‚</p>
<p>å¯è®¿é—®<code>ESRI</code>ç½‘ç«™æŸ¥çœ‹é…ç½®éœ€æ±‚ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/628c22adb13d4a9f9b7db994d4d02662~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=ob37WJtamryyONRKm7jBZa43fo0%3D" alt="" loading="lazy"/></p>
<p>è®¿é—®å¦‚ä¸‹åœ°å€ï¼Œå¯æ£€æµ‹æœ¬æœºè¿è¡Œç¯å¢ƒã€‚</p>
<p><code>https://www.systemrequirementslab.com/client-app?refid=1256&amp;appkey=6D681CD0-BA6C-4B6B-9A82-639759CFD094&amp;requirementsetid=23091</code></p>
<p>æ ‡è¯†<code>ArcGIS Pro</code>ç‰ˆæœ¬ä¸º3.3åˆ°3.6ï¼Œæˆ‘æœ¬æœºçš„æ˜¯3.5ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91d861b2567f408f9ac94948dadff0d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=d5wIO58FPfCMpVk10j3oMRlUKKE%3D" alt="" loading="lazy"/></p>
<p>å¥½å§ï¼Œè™½ç„¶Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·ï¼Œä½†æ˜¯æˆ‘çš„ç”µè„‘æ²¡è¿è¡Œå‡ºç»“æœï¼Œæˆ–è€…è¯´æ£€æµ‹å‡ºé”™äº†ï¼Œä¼°è®¡æ˜¯ä¸ª<code>bug</code>ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e2a5276aef5466382016e254c823c9b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=H%2BhilOrv7T4sKeZf4m49u9DQe0E%3D" alt="" loading="lazy"/>æœ‰å®Œæ•´è¿è¡Œç»“æœçš„åŒå­¦å¯ä»¥æˆªå›¾çœ‹ä¸€ä¸‹ã€‚</p>
<p>ç”µè„‘é…ç½®è¿™å…³è¿‡äº†çš„è¯ï¼Œå’±ä¹ˆå¯ä»¥è¿›è¡Œè½¯ä»¶è®¾ç½®äº†ã€‚</p>
<p>æˆ‘çš„ä¸»è¦é—®é¢˜æ˜¯æ¯æ¬¡æ–°å»ºå·¥ç¨‹æˆ–è€…æ‰“å¼€åŸæœ‰å·¥ç¨‹ï¼Œåˆ›å»ºåœºæ™¯çš„æ—¶é—´éƒ½å¾ˆæ¼«é•¿ï¼ˆåº•å›¾æ²¡è¢«å°ä¹‹å‰å°±åŠ è½½ç¼“æ…¢ï¼‰ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ç½‘ç»œçš„åŸå› ã€‚</p>
<p>ä½†æˆ‘çš„éœ€æ±‚å…¶å®ä¸éœ€è¦ä¸€å¼€å§‹å°±æ·»åŠ ä¸€ä¸ªå®Œæ•´çš„åº•å›¾ï¼ŒåŒ…æ‹¬åœ°å½¢ã€å½±åƒæˆ–è€…çŸ¢é‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘åªéœ€è¦ä¸€ä¸ªç©ºç™½å·¥ç¨‹å°±å¯ä»¥äº†ï¼Œæ‰€ä»¥æˆ‘çš„è§£å†³åŠæ³•æ˜¯åœ¨è®¾ç½®é‡Œé¢å°†é»˜è®¤åŠ è½½åº•å›¾å»é™¤ã€‚</p>
<p>é¦–å…ˆï¼Œæ‰“å¼€è®¾ç½®é€‰é¡¹<code>Options</code>ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bdb2fcc55f5447b9bb2c11acf40ad5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=s%2BM06sB0%2FQRPpSTgdaBfPaQxpEE%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæ‰¾åˆ°<code>Map and Scene</code>ï¼Œåœ¨å³ä¾§å°†<code>Map</code>é¡¹å’Œ<code>Scene</code>é¡¹ä¿®æ”¹ä¸º<code>None</code>ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤ä¸åŠ è½½åº•å›¾ã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41077acacc4e4e4eb71d7dce57d7b1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=addYSno54FbBdGrmc1AIOEtDbZY%3D" alt="" loading="lazy"/></p>
<p>ç»è¿‡æ­¤æ­¥éª¤ä¹‹åï¼Œæˆ‘å†æ‰“å¼€<code>ArcGIS Pro</code>é‚£å°±èˆ’æœå¤šäº†ã€‚</p>
<p><strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b3e8a07e2fc4b05ac6fab2283399a72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=EzrV7HZdxUjpc%2Bd7sKh1awPkPY4%3D" alt="" loading="lazy"/></strong></p>
<blockquote>
<p>â</p>
<p>OpenLayersç¤ºä¾‹æ•°æ®ä¸‹è½½ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>vector</strong></p>
<p>å…¨å›½ä¿¡æ¯åŒ–å·¥ç¨‹å¸ˆï¼GIS åº”ç”¨æ°´å¹³è€ƒè¯•èµ„æ–™ï¼Œè¯·åœ¨å…¬ä¼—å·åå°å›å¤ï¼š<strong>GISè€ƒè¯•</strong></p>
</blockquote>
<blockquote>
<p>â</p>
<p><em><strong>GISä¹‹è·¯</strong></em> å…¬ä¼—å·å·²ç»æ¥å…¥äº†<strong>æ™ºèƒ½</strong> <strong>åŠ©æ‰‹</strong>ï¼Œå¯ä»¥åœ¨å¯¹è¯æ¡†è¿›è¡Œæé—®ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æœç´¢å†å²æ–‡ç« è¿›è¡ŒæŸ¥çœ‹ã€‚</p>
</blockquote>
<p>éƒ½çœ‹åˆ°è¿™äº†ï¼Œä¸è¦å¿˜è®°<em><strong>ç‚¹èµã€æ”¶è—</strong></em> <strong>+</strong> <em><strong>å…³æ³¨</strong></em> å“¦ <strong>ï¼</strong></p>
<p>æœ¬å·ä¸å®šæ—¶æ›´æ–°æœ‰å…³Â <em><strong>GISå¼€å‘</strong></em> ç›¸å…³å†…å®¹ï¼Œ<em><strong>æ¬¢è¿å…³æ³¨Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03e439ae87384734a48383956f4cdfa8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=pRYo%2FG6AxkjWzKrfjNwuw2OCjYs%3D" alt="" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3b0bebb588f4086be4dbdf15a4aaa51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=vy75MPdVP3hRQgBWxS5rHqtslh8%3D" alt="" loading="lazy"/></strong></em></p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/185d313dc123458e820c445972f6ce3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=zWlsfqqtDA9NXTfauJzQHL9jl2s%3D" alt="" loading="lazy"/></p>
<p>Â  Â <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98596a98205f42a3acfa4cdbcdc07666~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR0lT5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769261602&amp;x-signature=6z1DpmGs%2BgdmgMgQoGvRdcD7Qsw%3D" alt="" loading="lazy"/>Â </p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487953%26idx%3D1%26sn%3D0b2d5aeefdb290583cf8cdd82f3c2077%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487953&amp;idx=1&amp;sn=0b2d5aeefdb290583cf8cdd82f3c2077&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">GeoTools å¼€å‘åˆé›†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwOTEzNjI5NQ%3D%3D%26mid%3D2247487119%26idx%3D1%26sn%3Dc313efa84c27bf933ef2f2a47991ef2d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwOTEzNjI5NQ==&amp;mid=2247487119&amp;idx=1&amp;sn=c313efa84c27bf933ef2f2a47991ef2d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">OpenLayers å¼€å‘åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhBXfq6zRK9twSicMXw69jw" target="_blank" title="https://mp.weixin.qq.com/s/hBXfq6zRK9twSicMXw69jw" ref="nofollow noopener noreferrer">ArcGIS Pro å®ç°å½±åƒæ³¢æ®µåˆæˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FQVFiW5C5wXQ6a1WODCaH0g" target="_blank" title="https://mp.weixin.qq.com/s/QVFiW5C5wXQ6a1WODCaH0g" ref="nofollow noopener noreferrer">è‡ªç„¶èµ„æºéƒ¨å…šç»„å…³äºè‹—æ³½ç­‰4ååŒå¿—èŒåŠ¡ä»»å…çš„é€šçŸ¥</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FJmv3J_bjbBG-4jB72zS3hw" target="_blank" title="https://mp.weixin.qq.com/s/Jmv3J_bjbBG-4jB72zS3hw" ref="nofollow noopener noreferrer">GDAL åˆ›å»ºçŸ¢é‡å›¾å±‚çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fi77nCatd4V2nuybZFIs-xA" target="_blank" title="https://mp.weixin.qq.com/s/i77nCatd4V2nuybZFIs-xA" ref="nofollow noopener noreferrer">GDAL æ•°æ®ç±»å‹å¤§å…¨</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwkHv2NnJfuPhtyjJcFLrEQ" target="_blank" title="https://mp.weixin.qq.com/s/wkHv2NnJfuPhtyjJcFLrEQ" ref="nofollow noopener noreferrer">GDAL å®ç°çŸ¢é‡æ•°æ®è½¬æ¢å¤„ç†ï¼ˆå…¨ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FMZIQ57Ka3NQfKFi9AuEQEg" target="_blank" title="https://mp.weixin.qq.com/s/MZIQ57Ka3NQfKFi9AuEQEg" ref="nofollow noopener noreferrer">GDAL å®ç°æŠ•å½±è½¬æ¢</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FSX2u2ww1iNOtqR5m3BE93g" target="_blank" title="https://mp.weixin.qq.com/s/SX2u2ww1iNOtqR5m3BE93g" ref="nofollow noopener noreferrer">å›½äº§ç‰ˆçš„Google Earthï¼Œå‰æ—ä¸€å·å«æ˜ŸAppâ€œå…±ç”Ÿåœ°çƒâ€æ¥äº†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfWufqSyplniNj4Q3BRRbAQ" target="_blank" title="https://mp.weixin.qq.com/s/fWufqSyplniNj4Q3BRRbAQ" ref="nofollow noopener noreferrer">2026å¹´å…¨å›½è‡ªç„¶èµ„æºå·¥ä½œä¼šè®®å¬å¼€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FRq7mCSrKU7DA7WRGDEy6Cg" target="_blank" title="https://mp.weixin.qq.com/s/Rq7mCSrKU7DA7WRGDEy6Cg" ref="nofollow noopener noreferrer">æ—¥æœ¬æ¬²æ‰“é€ â€œæœ¬åœŸç‰ˆâ€æ˜Ÿé“¾ç³»ç»Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FEqpOD--IdOUO6gyzwBc6RA" target="_blank" title="https://mp.weixin.qq.com/s/EqpOD--IdOUO6gyzwBc6RA" ref="nofollow noopener noreferrer">å‰æ—ä¸€å·å›½å†…é¦–å¼ é«˜åˆ†è¾¨ç‡å½©è‰²å¤œå…‰å«æ˜Ÿå½±åƒå‘å¸ƒ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FznfhqB1_3JbQHG7CEqWSCw" target="_blank" title="https://mp.weixin.qq.com/s/znfhqB1_3JbQHG7CEqWSCw" ref="nofollow noopener noreferrer">2025 å¹´åº¦ä¿¡åˆ›é¢†å†›ä¼ä¸šåå•å‡ºç‚‰ï¼</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»]]></title>    <link>https://juejin.cn/post/7595878718172135460</link>    <guid>https://juejin.cn/post/7595878718172135460</guid>    <pubDate>2026-01-17T13:36:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7595878718172135460" data-draft-id="7596025264455614500" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»"/> <meta itemprop="keywords" content="RabbitMQ"/> <meta itemprop="datePublished" content="2026-01-17T13:36:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼”è§’è‰²ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-17T13:36:56.000Z" title="Sat Jan 17 2026 13:36:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-17
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>RabbitMQ åœ¨ Celery ä¸­æ‰®æ¼” <strong>æ¶ˆæ¯ä¸­é—´ä»¶ï¼ˆMessage Brokerï¼‰</strong> çš„æ ¸å¿ƒè§’è‰²ï¼Œè´Ÿè´£åœ¨ <strong>ä»»åŠ¡ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong> å’Œ <strong>ä»»åŠ¡æ¶ˆè´¹è€…ï¼ˆWorkerï¼‰</strong> ä¹‹é—´<strong>å¯é åœ°ä¼ é€’ä»»åŠ¡æ¶ˆæ¯</strong>ã€‚å®ƒæ˜¯ Celery å®ç°<strong>å¼‚æ­¥ä»»åŠ¡ã€åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ã€å®šæ—¶ä»»åŠ¡</strong>çš„åŸºç¡€è®¾æ–½ã€‚</p>
<p>ä¸‹é¢é€šè¿‡ <strong>åŸç†è¯¦è§£ + å›¾ç¤º + ä»£ç ç¤ºä¾‹</strong> å…¨é¢è§£æã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€æ ¸å¿ƒè§’è‰²ä¸æµç¨‹</h2>
<h3 data-id="heading-1">1. <strong>å››å¤§æ ¸å¿ƒç»„ä»¶</strong></h3>






























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>ç±»æ¯”</th></tr></thead><tbody><tr><td><strong>Clientï¼ˆç”Ÿäº§è€…ï¼‰</strong></td><td>å‘é€ä»»åŠ¡åˆ° Broker</td><td>é¤å…é¡¾å®¢ï¼ˆç‚¹èœï¼‰</td></tr><tr><td><strong>Brokerï¼ˆRabbitMQï¼‰</strong></td><td>æ¥æ”¶ã€å­˜å‚¨ã€è½¬å‘ä»»åŠ¡æ¶ˆæ¯</td><td>é¤å…ä¼ èœç³»ç»Ÿï¼ˆè®¢å•æ± ï¼‰</td></tr><tr><td><strong>Workerï¼ˆæ¶ˆè´¹è€…ï¼‰</strong></td><td>ä» Broker è·å–ä»»åŠ¡å¹¶æ‰§è¡Œ</td><td>å¨å¸ˆï¼ˆåšèœï¼‰</td></tr><tr><td><strong>Result Backendï¼ˆå¯é€‰ï¼‰</strong></td><td>å­˜å‚¨ä»»åŠ¡æ‰§è¡Œç»“æœï¼ˆå¦‚ Redisï¼‰</td><td>ä¸Šèœè®°å½•æœ¬</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>RabbitMQ çš„æ ¸å¿ƒèŒè´£ï¼šè§£è€¦ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ï¼Œå®ç°å¼‚æ­¥é€šä¿¡</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ–¼ï¸ äºŒã€å·¥ä½œæµç¨‹å›¾è§£</h2>
<pre><code class="hljs language-css" lang="css">graph LR
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[Client\n(ä»»åŠ¡ç”Ÿäº§è€…)]</span> --&gt;|<span class="hljs-number">1</span>. å‘é€ä»»åŠ¡| <span class="hljs-selector-tag">B</span>(RabbitMQ\nBroker)
    <span class="hljs-selector-tag">B</span> --&gt;|<span class="hljs-number">2</span>. å­˜å‚¨ä»»åŠ¡åˆ° Queue| C<span class="hljs-selector-attr">[Queue: default]</span>
    D<span class="hljs-selector-attr">[Worker 1]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    E<span class="hljs-selector-attr">[Worker 2]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    F<span class="hljs-selector-attr">[Worker N]</span> --&gt;|<span class="hljs-number">3</span>. æ‹‰å–ä»»åŠ¡| C
    D --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    E --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    F --&gt;|<span class="hljs-number">4</span>. æ‰§è¡Œä»»åŠ¡| G
    <span class="hljs-selector-tag">A</span> --&gt;|<span class="hljs-number">5</span>. æŸ¥è¯¢ç»“æœ| G
</code></pre>
<h3 data-id="heading-3">ğŸ” è¯¦ç»†æ­¥éª¤ï¼š</h3>
<ol>
<li><strong>Client</strong> è°ƒç”¨ <code>add.delay(2, 3)</code>ï¼ŒCelery å°†ä»»åŠ¡åºåˆ—åŒ–ä¸ºæ¶ˆæ¯ï¼›</li>
<li>æ¶ˆæ¯å‘é€åˆ° <strong>RabbitMQ</strong>ï¼Œå­˜å…¥æŒ‡å®šçš„ <strong>Queue</strong>ï¼ˆå¦‚ <code>celery</code>ï¼‰ï¼›</li>
<li><strong>å¤šä¸ª Worker</strong> ç›‘å¬è¯¥ Queueï¼Œç«äº‰æ¶ˆè´¹ä»»åŠ¡ï¼ˆè´Ÿè½½å‡è¡¡ï¼‰ï¼›</li>
<li>Worker æ‰§è¡Œä»»åŠ¡å‡½æ•°ï¼Œå°†ç»“æœå­˜å…¥ <strong>Result Backend</strong>ï¼›</li>
<li>Client å¯é€šè¿‡ <code>result.get()</code> ä» Result Backend è·å–ç»“æœã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">âš™ï¸ ä¸‰ã€RabbitMQ åœ¨ Celery ä¸­çš„å…·ä½“ä½œç”¨</h2>
<h3 data-id="heading-5">1. <strong>ä»»åŠ¡è·¯ç”±ï¼ˆRoutingï¼‰</strong></h3>
<ul>
<li>
<p>é€šè¿‡ <strong>Exchange + Queue + Binding</strong> å®ç°çµæ´»çš„ä»»åŠ¡åˆ†å‘ã€‚</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼šå°†ä¸åŒä»»åŠ¡å‘é€åˆ°ä¸åŒé˜Ÿåˆ—</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># tasks.py</span>
<span class="hljs-variable">@app</span>.task
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(): ...

<span class="hljs-variable">@app</span>.task
<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_video</span>(): ...

<span class="hljs-comment"># å‘é€æ—¶æŒ‡å®šé˜Ÿåˆ—</span>
send_email.apply_async(queue=<span class="hljs-string">'email'</span>)
process_video.apply_async(queue=<span class="hljs-string">'video'</span>)
</code></pre>
<p>RabbitMQ é…ç½®ï¼š</p>
<ul>
<li>Exchange: <code>celery</code></li>
<li>Queue <code>email</code> â†’ ç»‘å®š routing key <code>email</code></li>
<li>Queue <code>video</code> â†’ ç»‘å®š routing key <code>video</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">2. <strong>æŒä¹…åŒ–ï¼ˆPersistenceï¼‰</strong></h3>
<ul>
<li>RabbitMQ å¯å°†æ¶ˆæ¯<strong>å†™å…¥ç£ç›˜</strong>ï¼Œå³ä½¿æœåŠ¡é‡å¯ä¹Ÿä¸ä¸¢å¤±ä»»åŠ¡ã€‚</li>
<li>Celery é»˜è®¤å¼€å¯æ¶ˆæ¯æŒä¹…åŒ–ï¼ˆéœ€é…ç½® Queue å’Œ Message ä¸º durableï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">3. <strong>è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰</strong></h3>
<ul>
<li>å¤šä¸ª Worker è®¢é˜…åŒä¸€ Queueï¼ŒRabbitMQ <strong>è½®è¯¢åˆ†å‘</strong>ä»»åŠ¡ï¼ˆRound-Robinï¼‰ã€‚</li>
<li>è‡ªåŠ¨å®ç°æ¨ªå‘æ‰©å±•ï¼šåŠ æœºå™¨ = åŠ  Worker = æå‡ååé‡ã€‚</li>
</ul>
<h3 data-id="heading-8">4. <strong>æµé‡å‰Šå³°ï¼ˆBufferingï¼‰</strong></h3>
<ul>
<li>å½“ä»»åŠ¡çªå‘æ¿€å¢æ—¶ï¼ŒRabbitMQ ä½œä¸º<strong>ç¼“å†²åŒº</strong>æš‚å­˜ä»»åŠ¡ï¼Œé¿å… Worker å´©æºƒã€‚</li>
<li>Worker æŒ‰è‡ªèº«èƒ½åŠ›åŒ€é€Ÿæ¶ˆè´¹ã€‚</li>
</ul>
<h3 data-id="heading-9">5. <strong>å¯é æ€§ä¿éšœ</strong></h3>
<ul>
<li><strong>ACK æœºåˆ¶</strong>ï¼šWorker æ‰§è¡ŒæˆåŠŸåæ‰ ACKï¼Œå¤±è´¥åˆ™æ¶ˆæ¯é‡å› Queueï¼ˆæˆ–è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼‰ã€‚</li>
<li><strong>æ¶ˆæ¯ç¡®è®¤</strong>ï¼šç¡®ä¿ä»»åŠ¡ä¸ä¸¢å¤±ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ› ï¸ å››ã€ä»£ç é…ç½®ç¤ºä¾‹</h2>
<h3 data-id="heading-11">1. å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">pip install celery
<span class="hljs-comment"># RabbitMQ ä½œä¸º Broker</span>
<span class="hljs-comment"># Redis ä½œä¸º Result Backendï¼ˆå¯é€‰ï¼‰</span>
</code></pre>
<h3 data-id="heading-12">2. Celery é…ç½® (<code>celery_app.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery <span class="hljs-keyword">import</span> Celery

<span class="hljs-comment"># ä½¿ç”¨ RabbitMQ ä½œä¸º Brokerï¼ŒRedis ä½œä¸ºç»“æœå­˜å‚¨</span>
app = Celery(
    <span class="hljs-string">'myapp'</span>,
    broker=<span class="hljs-string">'pyamqp://guest@localhost//'</span>,  <span class="hljs-comment"># RabbitMQ è¿æ¥ URL</span>
    backend=<span class="hljs-string">'redis://localhost:6379/0'</span>
)

<span class="hljs-comment"># å¯é€‰ï¼šé…ç½®é˜Ÿåˆ—</span>
app.conf.task_routes = {
    <span class="hljs-string">'tasks.send_email'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'email'</span>},
    <span class="hljs-string">'tasks.process_video'</span>: {<span class="hljs-string">'queue'</span>: <span class="hljs-string">'video'</span>},
}
</code></pre>
<h3 data-id="heading-13">3. å®šä¹‰ä»»åŠ¡ (<code>tasks.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> celery_app <span class="hljs-keyword">import</span> app

<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):
    <span class="hljs-keyword">return</span> x + y

<span class="hljs-meta">@app.task</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">send_email</span>(<span class="hljs-params">to</span>):
    <span class="hljs-comment"># æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</span>
    <span class="hljs-keyword">import</span> time
    time.sleep(<span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Email sent to <span class="hljs-subst">{to}</span>"</span>
</code></pre>
<h3 data-id="heading-14">4. å¯åŠ¨ Worker</h3>
<pre><code class="hljs language-css" lang="css"># ç›‘å¬é»˜è®¤é˜Ÿåˆ—
celery -<span class="hljs-selector-tag">A</span> celery_app worker <span class="hljs-attr">--loglevel</span>=info

# ç›‘å¬ç‰¹å®šé˜Ÿåˆ—
celery -<span class="hljs-selector-tag">A</span> celery_app worker -<span class="hljs-selector-tag">Q</span> email,<span class="hljs-selector-tag">video</span> <span class="hljs-attr">--loglevel</span>=info
</code></pre>
<h3 data-id="heading-15">5. è°ƒç”¨ä»»åŠ¡ (<code>client.py</code>)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> tasks <span class="hljs-keyword">import</span> add, send_email

<span class="hljs-comment"># å¼‚æ­¥å‘é€ä»»åŠ¡</span>
result = add.delay(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Task ID:"</span>, result.<span class="hljs-built_in">id</span>)

<span class="hljs-comment"># è·å–ç»“æœï¼ˆé˜»å¡ç­‰å¾…ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Result:"</span>, result.get(timeout=<span class="hljs-number">10</span>))
</code></pre>
<hr/>
<h2 data-id="heading-16">âš ï¸ äº”ã€ä¸ºä»€ä¹ˆé€‰æ‹© RabbitMQï¼Ÿ vs å…¶ä»– Broker</h2>





























<table><thead><tr><th>Broker</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>RabbitMQ</strong></td><td>åŠŸèƒ½å¼ºå¤§ã€é«˜å¯é ã€æ”¯æŒå¤æ‚è·¯ç”±</td><td>è¿ç»´ç¨å¤æ‚</td><td>é‡‘èã€ç”µå•†ç­‰å¼ºå¯é æ€§åœºæ™¯</td></tr><tr><td><strong>Redis</strong></td><td>ç®€å•ã€é«˜æ€§èƒ½</td><td>æ¶ˆæ¯å¯èƒ½ä¸¢å¤±ï¼ˆéæŒä¹…åŒ–ï¼‰</td><td>å¿«é€ŸåŸå‹ã€å®¹å¿å°‘é‡ä¸¢å¤±</td></tr><tr><td><strong>Kafka</strong></td><td>é«˜ååã€æ—¥å¿—å‹</td><td>ä¸é€‚åˆä½å»¶è¿Ÿä»»åŠ¡</td><td>å¤§æ•°æ®ç®¡é“ã€äº‹ä»¶æº¯æº</td></tr></tbody></table>
<blockquote>
<p>âœ… <strong>RabbitMQ ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å®Œæ•´çš„ AMQP åè®®æ”¯æŒ</li>
<li>æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLXï¼‰å¤„ç†å¤±è´¥ä»»åŠ¡</li>
<li>ç®¡ç†ç•Œé¢ï¼ˆManagement Pluginï¼‰å¯è§†åŒ–ç›‘æ§</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-17">ğŸ“Š å…­ã€RabbitMQ å†…éƒ¨ç»“æ„ï¼ˆCelery è§†è§’ï¼‰</h2>
<pre><code class="hljs language-lua" lang="lua">graph TB
    subgraph RabbitMQ
        E[Exchange: celery] <span class="hljs-comment">--&gt;|routing key: celery| Q1[Queue: celery]</span>
        E <span class="hljs-comment">--&gt;|routing key: email| Q2[Queue: email]</span>
        E <span class="hljs-comment">--&gt;|routing key: video| Q3[Queue: video]</span>
    <span class="hljs-keyword">end</span>

    Client <span class="hljs-comment">--&gt;|Publish task| E</span>
    Worker1 <span class="hljs-comment">--&gt;|Consume| Q1</span>
    Worker2 <span class="hljs-comment">--&gt;|Consume| Q2</span>
    Worker3 <span class="hljs-comment">--&gt;|Consume| Q3</span>
</code></pre>
<ul>
<li><strong>Exchange ç±»å‹</strong>ï¼šCelery é»˜è®¤ä½¿ç”¨ <code>direct</code> Exchange</li>
<li><strong>Queue å£°æ˜</strong>ï¼šCelery è‡ªåŠ¨åˆ›å»º Queueï¼ˆå¯é…ç½®æŒä¹…åŒ–ï¼‰</li>
<li><strong>æ¶ˆæ¯æ ¼å¼</strong>ï¼šJSON æˆ– pickle åºåˆ—åŒ–çš„ä»»åŠ¡å…ƒæ•°æ®</li>
</ul>
<hr/>
<h2 data-id="heading-18">ğŸ›¡ï¸ ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h2>
<ol>
<li>
<p><strong>æŒä¹…åŒ–é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¡®ä¿æ¶ˆæ¯å’Œé˜Ÿåˆ—æŒä¹…åŒ–</span>
<span class="hljs-attr">app.conf.task_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.result_serializer</span> = <span class="hljs-string">'json'</span>
<span class="hljs-attr">app.conf.accept_content</span> = [<span class="hljs-string">'json'</span>]
<span class="hljs-attr">app.conf.task_acks_late</span> = <span class="hljs-literal">True</span>  <span class="hljs-comment"># ä»»åŠ¡æ‰§è¡Œå®Œå† ACK</span>
</code></pre>
</li>
<li>
<p><strong>ç›‘æ§ RabbitMQ</strong>ï¼š</p>
<ul>
<li>å¯ç”¨ Management Pluginï¼š<code>rabbitmq-plugins enable rabbitmq_management</code></li>
<li>è®¿é—® <code>http://localhost:15672</code> æŸ¥çœ‹é˜Ÿåˆ—ç§¯å‹ã€æ¶ˆè´¹è€…çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†</strong>ï¼š</p>
<ul>
<li>é…ç½®æ­»ä¿¡é˜Ÿåˆ—ï¼ˆDLXï¼‰æ•è·å¤±è´¥ä»»åŠ¡</li>
<li>ä½¿ç”¨ <code>autoretry_for</code> è‡ªåŠ¨é‡è¯•</li>
</ul>
</li>
<li>
<p><strong>èµ„æºéš”ç¦»</strong>ï¼š</p>
<ul>
<li>ä¸ºä¸åŒç±»å‹ä»»åŠ¡åˆ›å»ºç‹¬ç«‹ Queueï¼Œé¿å…äº’ç›¸é˜»å¡</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-19">âœ… æ€»ç»“ï¼šRabbitMQ åœ¨ Celery ä¸­çš„æ ¸å¿ƒä»·å€¼</h2>





























<table><thead><tr><th>èƒ½åŠ›</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å¼‚æ­¥è§£è€¦</strong></td><td>ç”Ÿäº§è€…æ— éœ€ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ</td></tr><tr><td><strong>å¯é æŠ•é€’</strong></td><td>æ¶ˆæ¯æŒä¹…åŒ– + ACK æœºåˆ¶ä¿è¯ä¸ä¸¢å¤±</td></tr><tr><td><strong>å¼¹æ€§ä¼¸ç¼©</strong></td><td>åŠ¨æ€å¢å‡ Worker åº”å¯¹æµé‡å˜åŒ–</td></tr><tr><td><strong>æµé‡å‰Šå³°</strong></td><td>ç¼“å†²çªå‘è¯·æ±‚ï¼Œä¿æŠ¤åç«¯æœåŠ¡</td></tr><tr><td><strong>çµæ´»è·¯ç”±</strong></td><td>æŒ‰ä¸šåŠ¡ç±»å‹åˆ†å‘åˆ°ä¸åŒé˜Ÿåˆ—</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ä¸€å¥è¯</strong>ï¼š<br/>
<strong>RabbitMQ æ˜¯ Celery çš„â€œä¸­æ¢ç¥ç»â€ï¼Œæ²¡æœ‰å®ƒï¼ŒCelery å°±æ— æ³•å®ç°åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ã€‚</strong></p>
</blockquote>
<p>å¦‚æœéœ€è¦ <strong>RabbitMQ é«˜å¯ç”¨é›†ç¾¤éƒ¨ç½²æ–¹æ¡ˆ</strong>ã€<strong>Celery ä»»åŠ¡é‡è¯•ç­–ç•¥è¯¦è§£</strong> æˆ– <strong>æ­»ä¿¡é˜Ÿåˆ—é…ç½®ç¤ºä¾‹</strong>ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>