<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ç ´å±€è§†é¢‘ç¿»è¯‘ã€æœ€åä¸€å…¬é‡Œã€‘â€“â€“ä»è¯­éŸ³å…‹éš†åˆ°å£å‹å¯¹é½çš„å®Œæ•´å·¥ç¨‹æ€è·¯]]></title>    <link>https://juejin.cn/post/7576856418471034890</link>    <guid>https://juejin.cn/post/7576856418471034890</guid>    <pubDate>2025-11-26T18:08:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576856418471034890" data-draft-id="7576907627016781875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç ´å±€è§†é¢‘ç¿»è¯‘ã€æœ€åä¸€å…¬é‡Œã€‘â€“â€“ä»è¯­éŸ³å…‹éš†åˆ°å£å‹å¯¹é½çš„å®Œæ•´å·¥ç¨‹æ€è·¯"/> <meta itemprop="keywords" content="Python,AIGC,GitHub"/> <meta itemprop="datePublished" content="2025-11-26T18:08:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mortimer"/> <meta itemprop="url" content="https://juejin.cn/user/4441682704623992"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç ´å±€è§†é¢‘ç¿»è¯‘ã€æœ€åä¸€å…¬é‡Œã€‘â€“â€“ä»è¯­éŸ³å…‹éš†åˆ°å£å‹å¯¹é½çš„å®Œæ•´å·¥ç¨‹æ€è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4441682704623992/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mortimer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T18:08:07.000Z" title="Wed Nov 26 2025 18:08:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3e09d1fcbf54dbb8874d4bb8b0ebcae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbW9ydGltZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764785286&amp;x-signature=0fGGpA5vYEyMPuK%2BNH2t4R3FG%2BA%3D" alt="" loading="lazy"/></p>
<p>ElevenLabsã€HeyGen ç­‰é—­æºæœåŠ¡å·²ç»æŠŠè·¨è¯­è¨€<strong>è§†é¢‘ç¿»è¯‘</strong>ä½“éªŒæ¨åˆ°è¿‘ä¹â€œå®Œç¾â€çº§åˆ«ï¼š
<strong>å˜´å‹ç²¾å‡†åŒæ­¥ã€éŸ³è‰²è‡ªç„¶è¿˜åŸã€ç”»é¢å®Œæ•´ä¸å¤±çœŸ</strong>ï¼Œå‡ ä¹å°±æ˜¯å·¥ä¸šæ ‡å‡†ã€‚</p>
<p>ä½†ä¸€æ—¦æ¶‰åŠ <strong>ç§æœ‰åŒ–éƒ¨ç½²</strong> æˆ– <strong>å¼€æºè½åœ°</strong>ï¼Œç°å®ç«‹åˆ»å˜å¾—æ®‹é…·ï¼š</p>
<ul>
<li>å•†ç”¨ API æˆæœ¬é«˜ã€é™åˆ¶æ­»ã€å¯æ§æ€§å·®ï¼Œèƒ½é€‰çš„ä¾›åº”å•†å±ˆæŒ‡å¯æ•°</li>
<li>å¼€æºç”Ÿæ€é«˜åº¦ç¢ç‰‡åŒ–ï¼Œå„æ¨¡å—æ•ˆæœæ–­å±‚ä¸¥é‡ï¼Œå·¥ç¨‹é“¾è·¯éš¾ä»¥æ‰“ç£¨åˆ°ç”Ÿäº§å¯ç”¨</li>
</ul>
<p>å°¤å…¶æ˜¯åœ¨ã€Œ<strong>æ ¹æ®éŸ³é¢‘ä¿®æ”¹åŸè§†é¢‘ä¸­äººç‰©å£å‹</strong>ã€è¿™ä¸€æ ¸å¿ƒèƒ½åŠ›ä¸Šå‡ ä¹æ˜¯æ–­æ¡£ï¼š
å›½å†…æ•°å­—äººæŠ€æœ¯ç”Ÿæ€ç¡®å®æˆç†Ÿï¼Œä½†é‚£ä¸»è¦æ˜¯ <strong>â€œç»™ä¸€å¼ ç…§ç‰‡åšå£æ’­â€</strong> æˆ– <strong>â€œåˆæˆè™šæ‹Ÿä¸»æ’­â€</strong>ã€‚
çœŸæ­£éœ€è¦ <strong>â€œé©±åŠ¨åŸè§†é¢‘äººç‰©çš„å˜´å‹ï¼Œä¸æ–°è¯­éŸ³é€å¸§å¯¹é½â€</strong> çš„å¼€æ”¾ API æå…¶ç¨€ç¼ºï¼Œ
ç›®å‰åªæœ‰ç§‘çµã€é˜¿é‡Œæä¾›ä¸€äº›åŸºç¡€æ¥å£ï¼Œä½†é™åˆ¶å¤šã€å¯æ§æ€§ä¸è¶³ï¼Œå¾ˆéš¾åœ¨çœŸå®ä¸šåŠ¡ä¸­ä½¿ç”¨ã€‚</p>
<p>å› æ­¤ï¼ŒçœŸæ­£çš„è§†é¢‘ç¿»è¯‘ç»ä¸åªæ˜¯â€œASR â†’ ç¿»è¯‘ â†’ TTSâ€è¿™ä¹ˆä¸€æ¡ä¸‰æ­¥æµæ°´çº¿ã€‚
æ•´ä¸ªéš¾ç‚¹æµ“ç¼©æˆä¸€ä¸ªè¯ï¼š<strong>è§†å¬ä¸€è‡´æ€§</strong>â€”â€”å¦‚ä½•åœ¨æ›¿æ¢è¯­éŸ³åï¼Œè®©åŸè§†é¢‘äººç‰©çš„å˜´å‹ã€è¡¨æƒ…ã€å¾®åŠ¨ä½œéƒ½ä¸æ–°å£°éŸ³ä¸¥æ ¼åŒæ­¥ï¼Œå¹¶ä¸”ä¿æŒç”»è´¨ä¸å´©ã€‚</p>
<hr/>
<h2 data-id="heading-0">è§†å¬ä¸€è‡´æ€§</h2>
<p>å³æ›´æ¢è¯­éŸ³åï¼Œå¦‚ä½•è®© <strong>äººç‰©çš„å£å‹ã€è¡¨æƒ…ã€å˜´å”‡åŠ¨æ€ã€å¤´éƒ¨å¾®åŠ¨ã€ç”»è´¨ç»†èŠ‚</strong> ä¸æ–°è¯­éŸ³é«˜åº¦ä¸€è‡´ï¼ŒåŒæ—¶ä¸ç ´ååŸè§†é¢‘è´¨é‡ã€‚</p>
<p>æœ¬æ–‡å°†å°è¯•ç³»ç»Ÿæ‹†è§£ä¸€å¥— <strong>å¯è‡ªéƒ¨ç½²çš„å®Œæ•´å·¥ç¨‹é“¾è·¯</strong>ï¼Œè¦†ç›–ä»éŸ³é¢‘æ¸…æ´—ã€å£°çº¹èšç±»ã€éŸ³ç´ çº§å¯¹é½ï¼Œåˆ°å£å‹é©±åŠ¨ã€ç”»è´¨ä¿®å¤çš„å…¨æµç¨‹ç»“æ„ï¼ŒçœŸæ­£ç›´å‡»è§†é¢‘ç¿»è¯‘çš„â€œæœ€åä¸€å…¬é‡Œâ€ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ„å»ºè¯­éŸ³å…‹éš†æ‰€éœ€çš„é«˜è´¨é‡å‚è€ƒéŸ³é¢‘</h2>
<p>è¯­éŸ³å…‹éš†æ•ˆæœçš„ä¸Šé™ï¼Œ<strong>99% å–å†³äºå‚è€ƒéŸ³æºçš„è´¨é‡</strong>ã€‚
åŸå§‹äº’è”ç½‘è§†é¢‘ä¸­çš„éŸ³é¢‘å‡ ä¹å¿…ç„¶åŒ…å«ï¼š</p>
<ul>
<li>èƒŒæ™¯éŸ³ä¹</li>
<li>ç¯å¢ƒå™ªéŸ³</li>
<li>æˆ¿é—´æ··å“</li>
<li>å‹ç¼©ä¼ªå½±</li>
</ul>
<p>è¿™äº›é—®é¢˜ä¸è§£å†³ï¼Œåç»­ TTS å…‹éš†å†å¼ºä¹Ÿåªèƒ½â€œåƒåœ¾è¿›ã€åƒåœ¾å‡ºâ€ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. äººå£°åˆ†ç¦» + å»æ··å“ â€”â€” ä¸¤æ­¥ç¼ºä¸€ä¸å¯</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰äººå£°ä¼´å¥åˆ†ç¦»</h4>
<p>æ¨èæ–¹æ¡ˆï¼š<strong>UVR5 + MDX-Net æ¨¡å‹æ—</strong></p>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰å»æ··å“</h4>
<p>åªåšäººå£°åˆ†ç¦»æ˜¯ä¸å¤Ÿçš„ã€‚åŸè§†é¢‘å¸¸ä¼šå¸¦å¼ºçƒˆæˆ¿é—´æ··å“ï¼Œå…‹éš†åçš„è¯­éŸ³ä¼šå‡ºç°â€œç”µå­è…”è°ƒâ€â€œæµ´å®¤éŸ³â€ã€‚</p>
<p>æ¨èå¼€æºæ–¹æ¡ˆï¼š<strong>DeepFilterNet</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FRikorose%2FDeepFilterNet" target="_blank" title="https://github.com/Rikorose/DeepFilterNet" ref="nofollow noopener noreferrer">github.com/Rikorose/Deâ€¦</a>)</p>
<blockquote>
<p>pyVideoTrans å½“å‰ä»…ä½¿ç”¨ <code>UVR-MDX-NET-Voc_FT</code> åšäººå£°åˆ†ç¦»ï¼Œå¹¶æœªåŒ…å«å»æ··å“ç¯èŠ‚ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">2. VAD â†’ å£°çº¹èšç±» â†’ æ„å»ºé•¿å‚è€ƒéŸ³é¢‘</h3>
<p>é«˜è´¨é‡ TTS é€šå¸¸éœ€è¦<strong>15â€“60ç§’</strong>è¿ç»­ã€å¹²å‡€ã€åŒè¯´è¯äººçš„éŸ³é¢‘ã€‚
ä½†åŸå§‹å­—å¹•åˆ‡ç‰‡åªæœ‰ 2â€“10 ç§’ï¼Œè€Œä¸”å¤šè¯´è¯äººè§†é¢‘éå¸¸æ™®éã€‚</p>
<ol>
<li><strong>ç²¾å‡† VAD åˆ‡åˆ†</strong></li>
</ol>
<ul>
<li>å¯ç”¨ Silero VAD æˆ– WhisperX è‡ªå¸¦ VAD</li>
<li>å»æ‰é™éŸ³ï¼Œåˆ‡æˆå¯ç”¨è¯­éŸ³å•å…ƒ</li>
</ul>
<ol start="2">
<li>
<p><strong>æå–å£°çº¹åµŒå…¥</strong>
æ¨èï¼š</p>
<ul>
<li>Pyannote.audio (<a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fpyannote%2Fspeaker-diarization-3.1" target="_blank" title="https://huggingface.co/pyannote/speaker-diarization-3.1" ref="nofollow noopener noreferrer">huggingface.co/pyannote/spâ€¦</a>)</li>
<li>speechbrain ç›¸å…³å£°çº¹æ¨¡å‹ (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspeechbrain%2Fspeechbrain" target="_blank" title="https://github.com/speechbrain/speechbrain" ref="nofollow noopener noreferrer">github.com/speechbrainâ€¦</a>)</li>
</ul>
</li>
<li>
<p><strong>æŒ‰å£°çº¹èšç±»ï¼ŒåŒºåˆ†ä¸åŒè¯´è¯äºº</strong></p>
</li>
<li>
<p><strong>å¯¹åŒè¯´è¯äººçš„çŸ­ç‰‡æ®µè¿›è¡Œæ‹¼æ¥</strong>
å¾—åˆ°è¿ç»­ 30~60 ç§’çš„å‚è€ƒéŸ³é¢‘ï¼Œç”¨äº TTS å…‹éš†ã€‚</p>
</li>
</ol>
<blockquote>
<p>pyVideoTrans å½“å‰ä½¿ç”¨ Silero VAD + ç®€æ˜“å£°çº¹åŒºåˆ†ï¼ˆeres2net / NeMo titanetsmallï¼‰ï¼Œå°šæœªæ”¯æŒåŒç°‡ç‰‡æ®µæ‹¼æ¥ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-6">äºŒã€è¯­éŸ³åˆæˆä¸æ—¶åŸŸå¯¹é½ï¼šè§£å†³â€œéŸ³ç”»ä¸åŒæ­¥â€çš„æ ¹æº</h2>
<p>è¯­è¨€ä¹‹é—´çš„æ—¶é•¿å·®å¼‚æ˜¯ä¸å¯é¿å…çš„ã€‚
è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡é€šå¸¸ä¼š <strong>å˜é•¿ 20â€“50%</strong>ï¼Œè‹¥ä¸å¤„ç†ï¼Œä¼šå‡ºç°ï¼š</p>
<ul>
<li>ç”»é¢è¿˜æ²¡è¯´å®Œï¼Œä½†éŸ³é¢‘å·²ç»ç»“æŸ</li>
<li>å£å‹èŠ‚å¥æ˜æ˜¾å¯¹ä¸ä¸Š</li>
<li>äººç‰©å¼ å˜´æ—¶éŸ³é¢‘æ— å£°ï¼Œé—­å˜´æ—¶å‡ºç°è¯­éŸ³</li>
</ul>
<p>è¡Œä¸šæ‰€æœ‰æˆç†Ÿæ–¹æ¡ˆéƒ½é‡‡ç”¨ <strong>éŸ³ç´ çº§ç²¾å¯¹é½ + æ—¶é•¿æ§åˆ¶</strong> çš„æ–¹å¼æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-7">1. éŸ³ç´ çº§å¼ºåˆ¶å¯¹é½</h3>
<p>æ™®é€š Whisper åªæœ‰ <strong>è¯çº§</strong> æ—¶é—´æˆ³ï¼Œåšä¸äº†å£å‹é©±åŠ¨ã€‚
å¿…é¡»ä½¿ç”¨èƒ½æä¾› <strong>éŸ³ç´ çº§</strong>å¯¹é½çš„ ASRã€‚</p>
<p>æ¨èï¼š<strong>WhisperX</strong> (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fm-bain%2FwhisperX" target="_blank" title="https://github.com/m-bain/whisperX" ref="nofollow noopener noreferrer">github.com/m-bain/whisâ€¦</a>)</p>
<blockquote>
<p>pyVideoTrans å½“å‰æœªé›†æˆéŸ³ç´ çº§å¯¹é½ï¼Œä»ä½¿ç”¨æ™®é€š Whisperã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">2. TTS ç­‰æ—¶æ€§æ§åˆ¶</h3>
<p><strong>æƒ³è¾¾åˆ°å·¥ç¨‹çº§æ§åˆ¶é“¾è‡³å°‘åŒ…æ‹¬ä»¥ä¸‹ä¸‰æ­¥</strong></p>
<h4 data-id="heading-9">ï¼ˆ1ï¼‰ç¿»è¯‘é˜¶æ®µé™åˆ¶éŸ³èŠ‚/å­—æ•°</h4>
<p>åœ¨ LLM Prompt ä¸­åŠ å…¥ï¼š</p>
<ul>
<li>æœ€å¤§éŸ³èŠ‚æ•°</li>
<li>å¯¹é½åŸå¥æ—¶é•¿çš„çº¦æŸ</li>
</ul>
<p>ä»æºå¤´å‡å°‘æ—¶é•¿åå·®ã€‚</p>
<h4 data-id="heading-10">ï¼ˆ2ï¼‰é«˜è‡ªç„¶åº¦è¯­éŸ³å…‹éš†æ¨¡å‹</h4>
<p>æ¨èï¼ˆä¸­è‹±åŒè¯­ï¼‰ï¼š</p>
<ul>
<li><strong>CosyVoice 2.0</strong></li>
<li><strong>F5-TTS</strong></li>
<li><strong>Index-TTS2</strong></li>
<li><strong>Fish-Speech v1.5</strong></li>
</ul>
<p>ç‰¹ç‚¹ï¼šè‡ªç„¶åº¦é«˜ã€å…‹éš†æ•ˆæœç¨³å®šã€‚</p>
<h4 data-id="heading-11">ï¼ˆ3ï¼‰ç²¾ç»†æ—¶åŸŸæ‹‰ä¼¸/å‹ç¼©ï¼ˆä¿æŒéŸ³è°ƒä¸å˜ï¼‰</h4>
<p>ä½¿ç”¨ <strong>rubberband</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fbreakfastquay.com%2Frubberband%2F%25EF%25BC%2589" target="_blank" title="https://breakfastquay.com/rubberband/%EF%BC%89" ref="nofollow noopener noreferrer">breakfastquay.com/rubberband/â€¦</a>
å°† TTS è¾“å‡ºæ§åˆ¶åœ¨åŸè§†é¢‘æ—¶é•¿çš„ <strong>0.9Ã—â€“1.2Ã—</strong> å†…ã€‚</p>
<blockquote>
<p>pyVideoTrans ç›®å‰ä»…æ”¯æŒ API çº§å…‹éš†ï¼ŒæœªåŒ…å«å®Œæ•´çš„éŸ³èŠ‚æ§åˆ¶ + æ—¶é•¿æ§åˆ¶é“¾è·¯ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€è§†è§‰é‡æ„ï¼šå£å‹é©±åŠ¨çš„çœŸæ­£æ ¸å¿ƒä¸éš¾ç‚¹</h2>
<p>ç›®æ ‡éå¸¸æ˜ç¡®ï¼š<strong>åªåŠ¨å˜´ï¼Œä¸åŠ¨è„¸ã€‚ä¸ç ´åè§†é¢‘ç”»è´¨</strong></p>
<p>è§†è§‰éƒ¨åˆ†çš„å·¥ç¨‹é‡ä¸ç®—åŠ›æŠ•å…¥åœ¨æ•´ä¸ªé“¾è·¯ä¸­æ˜¯æœ€é«˜çš„ã€‚</p>
<hr/>
<h3 data-id="heading-13">1. æ—¶é•¿å·®å¼‚ä¸‹çš„è§†é¢‘å¸§å¤„ç†ç­–ç•¥</h3>

















<table><thead><tr><th>æ—¶é•¿å·®è·</th><th>æ¨èå¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td>â‰¤20%</td><td>éŸ³é¢‘ rubberband å¾®è°ƒ + FFmpeg setpts å¯¹é½</td></tr><tr><td>&gt;20%</td><td>å¿…é¡»æ’å¸§ï¼Œå¿…è¦æ—¶ç”Ÿæˆé™æ€å¾®åŠ¨å¸§</td></tr></tbody></table>
<p><strong>æ¨èå¼€æºï¼š</strong></p>
<ul>
<li>
<p><strong>RIFE</strong>ï¼ˆè§†é¢‘æ’å¸§ï¼‰
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhzwer%2FPractical-RIFE" target="_blank" title="https://github.com/hzwer/Practical-RIFE" ref="nofollow noopener noreferrer">github.com/hzwer/Practâ€¦</a></p>
</li>
<li>
<p><strong>Stable Video Diffusion</strong>
ç”Ÿæˆè‡ªç„¶çš„çœ¨çœ¼ã€è½»å¾®å¤´éƒ¨è¿åŠ¨ç­‰å¾®åŠ¨ç”»é¢</p>
</li>
</ul>
<blockquote>
<p>pyVideoTrans ç›®å‰åªåšç®€å•çš„ setpts æ—¶é—´æ‹‰ä¼¸ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-14">2. å¤šäººåŒæ¡†æ—¶çš„â€œé¢éƒ¨é”å®šâ€</h3>
<p>å¦‚æœä¸å¯¹äººç‰©èº«ä»½è¿›è¡Œç»‘å®šï¼ŒèƒŒæ™¯äººè„¸ä¼šè«åå¼ å˜´ï¼Œè§†é¢‘ä¼šç›´æ¥æ¯æ‰ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä½¿ç”¨ <strong>InsightFace</strong> åšäººè„¸æ£€æµ‹ + äººè„¸è¯†åˆ« (<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdeepinsight%2Finsightface%25EF%25BC%2589" target="_blank" title="https://github.com/deepinsight/insightface%EF%BC%89" ref="nofollow noopener noreferrer">github.com/deepinsightâ€¦</a></li>
<li>å°†æ¯ä¸ªè¯´è¯äººçš„å£°çº¹IDä¸å±å¹•ä¸Šçš„è„¸IDç»‘å®š</li>
<li>å½“å‰è¯´è¯äºº â†’ åªé©±åŠ¨å¯¹åº”é¢éƒ¨åŒºåŸŸ</li>
<li>å…¶ä»–è„¸ä¿æŒé™æ­¢</li>
<li>ä¾§è„¸/é®æŒ¡å¸§è‡ªåŠ¨è·³è¿‡æ¨ç†</li>
</ul>
<hr/>
<h3 data-id="heading-15">3. é«˜ä¿çœŸå£å‹é©±åŠ¨</h3>
<ul>
<li>
<p>å½“å‰å¼€æºæœ€ä¼˜é€‰ï¼š MuseTalkï¼ˆè…¾è®¯ï¼‰
å®æ—¶æ¨ç†ã€å”‡å½¢è‡ªç„¶ã€ç‰™é½¿çº¹ç†ä¼˜ç§€ï¼Œç”»è´¨ä¿ç•™å¥½ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTMElyralab%2FMuseTalk" target="_blank" title="https://github.com/TMElyralab/MuseTalk" ref="nofollow noopener noreferrer">github.com/TMElyralab/â€¦</a></p>
</li>
<li>
<p>æ¬¡é€‰ï¼š VideoReTalking
æ•ˆæœç¨³å®šä½†è¾ƒæ…¢ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenTalker%2Fvideo-retalking" target="_blank" title="https://github.com/OpenTalker/video-retalking" ref="nofollow noopener noreferrer">github.com/OpenTalker/â€¦</a></p>
</li>
</ul>
<blockquote>
<p>pyVideoTrans å½“å‰å®Œå…¨æ²¡æœ‰å£å‹é©±åŠ¨èƒ½åŠ›ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-16">å››ã€åå¤„ç†ï¼šç”»è´¨ä¿®å¤ä¸æœ€ç»ˆåˆæˆ</h2>
<p>å£å‹é©±åŠ¨æ¨¡å‹ä¸€èˆ¬åªåœ¨ <strong>96Ã—96 æˆ– 128Ã—128</strong> çš„å°åŒºåŸŸæ¨ç†ã€‚
ç›´æ¥è´´å›è§†é¢‘å¿…ç„¶äº§ç”Ÿï¼š</p>
<ul>
<li>å˜´éƒ¨æ¨¡ç³Š</li>
<li>å±€éƒ¨é©¬èµ›å…‹</li>
<li>é¢éƒ¨ç»†èŠ‚ä¸å®Œæ•´</li>
</ul>
<p>å¿…é¡»è¿›è¡Œ <strong>é¢éƒ¨è¶…åˆ†è¾¨ç‡</strong>ã€‚</p>
<h3 data-id="heading-17">æ¨èå¼€æºæ–¹æ¡ˆæµç¨‹ï¼š</h3>
<ol>
<li>
<p><strong>GPEN</strong> é€Ÿåº¦å¿«ã€é¢éƒ¨çº¹ç†è¿˜åŸå¥½
<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyangxy%2FGPEN" target="_blank" title="https://github.com/yangxy/GPEN" ref="nofollow noopener noreferrer">github.com/yangxy/GPEN</a></em></p>
</li>
<li>
<p><strong>CodeFormer</strong> èº«ä»½ä¿æŒæå¼ºã€å¯ä½œä¸ºè¡¥å¿é˜¶æ®µ
<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fsczhou%2FCodeFormer" target="_blank" title="https://github.com/sczhou/CodeFormer" ref="nofollow noopener noreferrer">github.com/sczhou/Codeâ€¦</a></em></p>
</li>
<li>
<p><strong>GFPGAN</strong> ç»å…¸ã€ç¨³å¥ï¼Œå¯åœ¨é“¾è·¯ä¸­å…œåº•
<em><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencentARC%2FGFPGAN" target="_blank" title="https://github.com/TencentARC/GFPGAN" ref="nofollow noopener noreferrer">github.com/TencentARC/â€¦</a></em></p>
</li>
</ol>
<p>æœ€ç»ˆä½¿ç”¨ FFmpegï¼š</p>
<ul>
<li>åˆå¹¶æ–°éŸ³é¢‘æµ</li>
<li>åˆæˆå¤„ç†åçš„è§†é¢‘æµ</li>
<li>æ’å…¥å¯¹é½çš„å­—å¹•</li>
</ul>
<hr/>
<h2 data-id="heading-18">çœŸæ­£å·¥ä¸šçº§çš„è§†é¢‘ç¿»è¯‘é“¾è·¯</h2>
<p><strong>äººå£°åˆ†ç¦» â†’ å»æ··å“ â†’ å£°çº¹èšç±» â†’ é•¿å‚è€ƒéŸ³é¢‘ â†’ éŸ³ç´ çº§ ASR â†’ å¯¹é½ç¿»è¯‘ â†’ é«˜å“è´¨ TTS å…‹éš† â†’ æ—¶é•¿æ§åˆ¶  â†’ é¢éƒ¨è¯†åˆ«ä¸é”å®š â†’ MuseTalk é©±åŠ¨ â†’ GPEN/CodeFormer ä¿®å¤ â†’ FFmpeg åˆæˆ</strong></p>
<p>çŒœæµ‹è¿™æ¡é“¾è·¯åœ¨ç»“æ„ä¸Šåº”ä¸ ElevenLabs / HeyGen ç›¸å·®æ— å‡ ï¼Œä½†å…¨éƒ¨ä½¿ç”¨å¼€æºå¯è‡ªéƒ¨ç½²æ¨¡å‹ã€‚</p>
<p>æƒ³å®ç°è¿™å¥—æµç¨‹ï¼Œæ˜¾ç„¶æ‰€éœ€è¾ƒå¤šçš„ç¡¬ä»¶èµ„æºï¼Œä»¥åŠä¸å°çš„æŠ€æœ¯éš¾åº¦ï¼Œå‡ºäº pyVideoTrans ä¸šä½™çˆ±å¥½é¡¹ç›®çš„å®šä½ï¼Œæœªè€ƒè™‘å®Œæ•´ç¯èŠ‚ï¼Œ ä¸¢å¤±äº† <em>å»æ··å“ã€ å£°çº¹èšç±»ä¸æ‹¼æ¥ã€éŸ³ç´ çº§å¯¹é½ã€ é¢éƒ¨é”å®šã€ é«˜ä¿çœŸå£å‹é©±åŠ¨ã€ é¢éƒ¨ä¿®å¤</em> è¿™äº›è¾ƒå›°éš¾çš„éƒ¨åˆ†ã€‚</p>
<p><strong>çœŸæ­£è¦ç ´å±€è§†é¢‘ç¿»è¯‘çš„â€œæœ€åä¸€å…¬é‡Œâ€ï¼Œå¿…é¡»æŠŠä¸Šè¿°æ¯ä¸€æ­¥éƒ½è¡¥é½â€”â€”ç¼ºä¸€ä¸å¯ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Langchain æµ…å‡º]]></title>    <link>https://juejin.cn/post/7576861477267308563</link>    <guid>https://juejin.cn/post/7576861477267308563</guid>    <pubDate>2025-11-26T18:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576861477267308563" data-draft-id="7576861477267275795" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Langchain æµ…å‡º"/> <meta itemprop="keywords" content="LangChain,LLM,Python"/> <meta itemprop="datePublished" content="2025-11-26T18:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´ä½³æµ©"/> <meta itemprop="url" content="https://juejin.cn/user/2696441245481975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Langchain æµ…å‡º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2696441245481975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´ä½³æµ©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T18:32:33.000Z" title="Wed Nov 26 2025 18:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">Langchain æµ…å‡º</h2>
<blockquote>
<p>åŸæœ¬çš„è®¡åˆ’æ˜¯å‘ä¸€ç¯‡ã€Šlangchainæ·±å…¥æµ…å‡ºã€‹ï¼Œä½†æ˜¯å¤ªé•¿äº†å°±åˆ‡å‰²æˆäº†ä¸¤éƒ¨ä»½ï¼Œå…ˆå‘äº†è¿™ç¯‡æµ…å‡º
ä¸­é—´è¿˜ç»å†äº†å¤§ç‰ˆæœ¬çš„æ›´æ–°â•®(â•¯â–½â•°)â•­ä½†æ˜¯æœ‰æƒŠæ— é™©è¿˜æ˜¯å†™å®Œäº†ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2a3016eef8c4ab0933e83e98f1dd875~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC05L2z5rWp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764786752&amp;x-signature=9QBMD3JS4fCsYV%2BHC86WRTg%2FIbk%3D" alt="äººå·¥æ™ºèƒ½çš„æ— é™å¯èƒ½.png" loading="lazy"/></p>
<p><strong>ä½œè€…</strong>ï¼šå´ä½³æµ©</p>
<p><strong>æœ€åæ›´æ–°</strong>ï¼š2025-11-27</p>
<p><strong>é€‚ç”¨ç‰ˆæœ¬</strong>ï¼šLangChain v1.0+</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä»€ä¹ˆæ˜¯ LangChain</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ç¯å¢ƒå‡†å¤‡</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">æ ¸å¿ƒæ¦‚å¿µ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">å®æˆ˜æ¡ˆä¾‹</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯Langchain</h3>
<blockquote>
<p>è¿™é‡Œæˆ‘å°±ä¸å¤šè¯å¤ªå¤šæ—¶é—´å’Œå¤§å®¶æ‰¯æ·¡äº† ä¸€å¥è¯æ¦‚æ‹¬ä»€ä¹ˆæ˜¯langchain</p>
<p>LangChain æ˜¯æŠŠâ€œæ¨¡å‹ã€æç¤ºã€å·¥å…·ã€è®°å¿†â€ç­‰æ¨¡å—æŒ‰ç»Ÿä¸€ Runnable æ¥å£ä¸²æˆ pipelineï¼Œè®©å¼€å‘è€…åƒæ­ç§¯æœ¨ä¸€æ ·å¿«é€Ÿæ­å»º LLM åº”ç”¨çš„ç”Ÿäº§çº§æ¡†æ¶ã€‚</p>
</blockquote>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºç»„åˆå’Œæ‰©å±•</li>
<li>æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ˆOpenAIã€Anthropicã€ollamaæœ¬åœ°æ¨¡å‹ç­‰ï¼‰</li>
<li>ä¸°å¯Œçš„é¢„æ„å»ºç»„ä»¶</li>
</ul>
<hr/>
<h3 data-id="heading-3">æ ¸å¿ƒæ¦‚å¿µæ·±åº¦è§£æ</h3>
<h4 data-id="heading-4">1. LangChain çš„å·¥ä½œåŸç†</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">%% LangChain v1 å…³é”®æµç¨‹ï¼ˆRunnable ç‰ˆï¼‰
graph LR
    A[ç”¨æˆ·è¾“å…¥] --&gt; B[ChatPromptTemplate]
    B --&gt; C[RunnableWithMessageHistory]
    C --&gt; D[Chat Model]
    D --&gt; E[Output Parser]
    E --&gt; F[ç»“æœ]
</code></pre>
<p><strong>å…³é”®æµç¨‹ï¼ˆLangChain v1ï¼‰</strong>ï¼š</p>
<ol>
<li>
<p><strong>è¾“å…¥å¤„ç†</strong><br/>
ç”¨æˆ·è¾“å…¥ â†’ <code>ChatPromptTemplate.invoke()</code> â†’ ç”Ÿæˆæ¶ˆæ¯åˆ—è¡¨ã€‚</p>
</li>
<li>
<p><strong>å†å²æ³¨å…¥ï¼ˆå¯é€‰ï¼‰</strong><br/>
<code>RunnableWithMessageHistory</code> è‡ªåŠ¨æŠŠä¹‹å‰å¯¹è¯æ‹¼è¿›æ¶ˆæ¯ï¼Œå†ä¼ ç»™æ¨¡å‹ã€‚</p>
</li>
<li>
<p><strong>æ¨¡å‹è°ƒç”¨</strong><br/>
<code>ChatModel.invoke(messages)</code> â†’ è¿”å› <code>AIMessage</code>ã€‚</p>
</li>
<li>
<p><strong>è¾“å‡ºè§£æ</strong><br/>
<code>OutputParser.invoke(ai_message)</code> â†’ ç»“æ„åŒ–æ•°æ® / å­—ç¬¦ä¸²ã€‚</p>
</li>
<li>
<p><strong>ç»“æœè¿”å›</strong><br/>
è§£æåçš„å†…å®¹å³ä¸ºæœ€ç»ˆç­”æ¡ˆï¼ŒåŒæ—¶å†å²è¢«æŒä¹…åŒ–ï¼Œä¾›ä¸‹è½®ä½¿ç”¨ã€‚</p>
</li>
<li>
<h6 data-id="heading-5"><strong>è®°å¿†ç®¡ç†</strong>ï¼šå¯¹è¯å†å²å­˜å‚¨åœ¨ Memory ä¸­ä¾›åç»­ä½¿ç”¨</h6>
</li>
</ol>
<hr/>
<h3 data-id="heading-6">ç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-7">æ­¥éª¤ 1ï¼šå®‰è£… Python</h4>
<h5 data-id="heading-8">macOS</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å·²å®‰è£… Pythonï¼ˆæ¨è 3.8+ï¼‰</span>
python3 --version

<span class="hljs-comment"># å¦‚æœæœªå®‰è£…ï¼Œä½¿ç”¨ Homebrew å®‰è£…</span>
/bin/bash -c <span class="hljs-string">"<span class="hljs-subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)</span>"</span>
brew install python@3.12.11
</code></pre>
<h5 data-id="heading-9">Windows</h5>
<pre><code class="hljs language-powershell" lang="powershell"># ä¸‹è½½ Python å®‰è£…åŒ…
# è®¿é—®ï¼šhttps://www.python.org/downloads/
# ä¸‹è½½ Python 3.12.11+ å®‰è£…åŒ…
# å®‰è£…æ—¶å‹¾é€‰ "Add Python to PATH"

# éªŒè¯å®‰è£…
python --version
</code></pre>
<h4 data-id="heading-10">æ­¥éª¤ 2ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•</h4>
<h5 data-id="heading-11">macOS</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹</span>
<span class="hljs-built_in">mkdir</span> langchain-demo
<span class="hljs-built_in">cd</span> langchain-demo

<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python3 -m venv venv

<span class="hljs-comment"># æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-built_in">source</span> venv/bin/activate
</code></pre>
<h5 data-id="heading-12">Windows</h5>
<pre><code class="hljs language-powershell" lang="powershell"># åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹
mkdir langchain-demo
cd langchain-demo

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
.\venv\Scripts\activate
</code></pre>
<h4 data-id="heading-13">æ­¥éª¤ 3ï¼šå®‰è£… LangChain</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ ¸å¿ƒéª¨æ¶ï¼ˆå¿…è£…ï¼‰</span>
pip install -U langchain==1.0.0 langchain-core

<span class="hljs-comment"># 2. æ¨¡å‹/åµŒå…¥æ”¯æŒï¼ˆæŒ‰éœ€é€‰ï¼‰</span>
pip install langchain-openai          <span class="hljs-comment"># OpenAI / Azure</span>
pip install langchain-ollama          <span class="hljs-comment"># Ollama æœ¬åœ°æ¨¡å‹</span>
pip install langchain-huggingface     <span class="hljs-comment"># HuggingFace æ¨¡å‹/åµŒå…¥</span>

<span class="hljs-comment"># 3. å‘é‡åº“ï¼ˆRAG å¿…è£…å…¶ä¸€ï¼‰</span>
pip install chromadb                  <span class="hljs-comment"># æœ¬åœ°æ–‡ä»¶å‹</span>
<span class="hljs-comment"># pip install faiss-cpu               # å¦ä¸€è½»é‡é€‰æ‹©</span>

<span class="hljs-comment"># 4. è¾…åŠ©å·¥å…·</span>
pip install python-dotenv             <span class="hljs-comment"># è¯» .env</span>
pip install tiktoken                  <span class="hljs-comment"># OpenAI token è®¡æ•° æˆ‘ä¸»è¦æ˜¯ç”¨æœ¬åœ°çš„ollamaæš‚æ—¶ä¸ç”¨ æœ‰éœ€è¦çš„é…Œæƒ…å®‰è£…</span>
pip install pydantic                  <span class="hljs-comment"># ç»“æ„åŒ–è¾“å‡º/æ•°æ®éªŒè¯</span>
pip install langgraph                 <span class="hljs-comment"># éœ€è¦å¤æ‚ Agent æµç¨‹æ—¶å†è£…</span>
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤ 4ï¼šé…ç½® API å¯†é’¥</h4>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶æ¥å­˜å‚¨ API å¯†é’¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º .env æ–‡ä»¶</span>
<span class="hljs-built_in">touch</span> .<span class="hljs-built_in">env</span>  <span class="hljs-comment"># macOS</span>
<span class="hljs-comment"># æˆ–</span>
<span class="hljs-built_in">type</span> nul &gt; .<span class="hljs-built_in">env</span>  <span class="hljs-comment"># Windows</span>
</code></pre>
<p>åœ¨ <code>.env</code> æ–‡ä»¶ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">OPENAI_API_KEY=ä½ çš„_OpenAI_API_å¯†é’¥
# æˆ–ä½¿ç”¨å…¶ä»– LLM æä¾›å•†
# ANTHROPIC_API_KEY=ä½ çš„_Anthropic_API_å¯†é’¥

</code></pre>
<p><em><strong>æ³¨æ„è¿™é‡Œä½ å¦‚æœä½¿ç”¨çš„æ˜¯æœ¬åœ°çš„ollama é‚£ä¹ˆåˆ™æ— éœ€é…ç½®ç§˜é’¥</strong></em></p>
<hr/>
<p><strong>äººç‹ è¯ä¸å¤š</strong> <strong>å«å£°æµ©å“¥</strong></p>
<p>**ä¸Šå‘†ä¹ˆï¼ˆdemoï¼‰**ğŸ˜„ğŸ˜„</p>
<hr/>
<h3 data-id="heading-15">å®Œæ•´é¡¹ç›®ç»“æ„</h3>
<p>å› ä¸ºæˆ‘è¿™é‡Œæœ‰ä¸¤å¥—ç¯å¢ƒ Mac 7b &amp; Windowså°±ç”¨30bæ‰€ä»¥ä¼šå‡ºç°ä¸Šä¸‹çš„demo ä½¿ç”¨çš„æ¨¡å‹å‡ºç°äº›è®¸çš„å‡ºå…¥ï¼Œè¿™ç‚¹åœ¨è¿™é‡Œä¹Ÿåšä¸€ä¸ªè¯´æ˜ï¼Œé˜²æ­¢çœ‹ç€äº›çš„æœ‹å‹å‡ºç°ä¸€äº›å›°æƒ‘ã€‚</p>
<p>è¿˜æœ‰åˆ«é—®æˆ‘venvå“ªé‡Œæ¥çš„ å¦‚æœè¿™ä½ éƒ½ä¸ä¼šé‚£ä¹ˆå»ºè®®ä½ å»çœ‹æˆ‘çš„<a href="https://juejin.cn/post/7292014439384793098" target="_blank" title="https://juejin.cn/post/7292014439384793098">Pythonå…¥é—¨æŒ‡å—ç³»åˆ—</a></p>
<pre><code class="hljs language-bash" lang="bash">langchain-demo/
â”œâ”€â”€ venv/                      <span class="hljs-comment"># è™šæ‹Ÿç¯å¢ƒ</span>
â”œâ”€â”€ .<span class="hljs-built_in">env</span>                       <span class="hljs-comment"># ç¯å¢ƒå˜é‡é…ç½®</span>
â”œâ”€â”€ requirements.txt           <span class="hljs-comment"># ä¾èµ–åŒ…åˆ—è¡¨</span>
â”œâ”€â”€ demo1_basic.py            <span class="hljs-comment"># æ¡ˆä¾‹1ï¼šåŸºç¡€è°ƒç”¨</span>
â”œâ”€â”€ demo2_prompt_template.py  <span class="hljs-comment"># æ¡ˆä¾‹2ï¼šæç¤ºè¯æ¨¡æ¿</span>
â”œâ”€â”€ demo3_chains.py           <span class="hljs-comment"># æ¡ˆä¾‹3ï¼šé“¾å¼è°ƒç”¨</span>
â”œâ”€â”€ demo4_memory.py           <span class="hljs-comment"># æ¡ˆä¾‹4ï¼šå¯¹è¯è®°å¿†</span>
â”œâ”€â”€ demo5_document_qa.py      <span class="hljs-comment"># æ¡ˆä¾‹5ï¼šæ–‡æ¡£é—®ç­”</span>
â”œâ”€â”€ demo6_agent.py            <span class="hljs-comment"># æ¡ˆä¾‹6ï¼šAgentä»£ç†</span>
â””â”€â”€ run_all_demos.py          <span class="hljs-comment"># è¿è¡Œæ‰€æœ‰ç¤ºä¾‹</span>
</code></pre>
<p>åˆ›å»º <code>requirements.txt</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-txt" lang="txt"># LangChain v1 æœ€å°å¯ç”¨ç»„åˆ
langchain&gt;=1.0.0           # ä¸»åŒ…æ­£å¼ç‰ˆ
langchain-core&gt;=1.0.0      # æ ¸å¿ƒåè®®ï¼ˆå¯çœç•¥ï¼Œä¸»åŒ…ä¼šæ‹‰æœ€æ–°ï¼‰
langchain-openai&gt;=1.0.0    # OpenAI ç³»åˆ—
langchain-ollama&gt;=1.0.0    # æœ¬åœ° Ollama
tiktoken&gt;=0.7.0            # OpenAI token è®¡æ•°
python-dotenv&gt;=1.0.0       # ç¯å¢ƒå˜é‡
chromadb&gt;=0.5.0            # å‘é‡æ•°æ®åº“
</code></pre>
<p>å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install -r requirements.txt
</code></pre>
<hr/>
<h3 data-id="heading-16">å®æˆ˜æ¡ˆä¾‹</h3>
<h4 data-id="heading-17">æ¡ˆä¾‹ 1ï¼šåŸºç¡€ LLM è°ƒç”¨</h4>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo1_basic.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æ¡ˆä¾‹ 1ï¼šåŸºç¡€çš„ LLM è°ƒç”¨
å±•ç¤ºå¦‚ä½•ä½¿ç”¨ LangChain è°ƒç”¨è¯­è¨€æ¨¡å‹
"""</span>
<span class="hljs-comment"># å¦‚æœä½¿ç”¨çš„OpenApidengç›¸å…³çš„å†…å®¹åˆ™ä½¿ç”¨ä»¥ä¸‹çš„æ’ä»¶</span>
<span class="hljs-comment"># from langchain_openai import ChatOllama</span>

 
<span class="hljs-comment"># å¦‚æœä½¿ç”¨çš„æ˜¯ollamaçš„è¯é‚£ä¹ˆç›´æ¥ä½¿ç”¨æœ¬æ’ä»¶ </span>
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama <span class="hljs-comment"># æ–°</span>
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ å¦‚æœä½¿ç”¨çš„æœ¬åœ°çš„ollama è¿™é‡Œå¯ä»¥ç›´æ¥çœç•¥</span>
load_dotenv() 

<span class="hljs-keyword">def</span> <span class="hljs-title function_">basic_llm_call</span>():
    <span class="hljs-string">"""æœ€ç®€å•çš„ LLM è°ƒç”¨ç¤ºä¾‹"""</span>
    
    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    <span class="hljs-comment"># temperature: æ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼ˆ0-1ï¼‰ï¼Œ0 è¡¨ç¤ºç¡®å®šæ€§è¾“å‡º</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"Qwen2.5:7b"</span>,
        temperature=<span class="hljs-number">0.7</span>
    )
    
    <span class="hljs-comment"># ç›´æ¥è°ƒç”¨æ¨¡å‹</span>
    response = llm.invoke(<span class="hljs-string">"è¯·ç”¨ä¸€å¥è¯ä»‹ç»ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½"</span>)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åŸºç¡€ LLM è°ƒç”¨ç»“æœï¼š"</span>)
    <span class="hljs-built_in">print</span>(response.content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    basic_llm_call()
</code></pre>
<p><strong>è¿è¡Œæ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python demo1_basic.py
</code></pre>
<p><strong>è¾“å‡ºç»“æœ:</strong></p>
<pre><code class="hljs language-bash" lang="bash">Langchainæ·±å…¥æµ…å‡º % python demo_basic.py
==================================================
æœ¬åœ° Ollama (Qwen2.5:7b) è°ƒç”¨ç»“æœï¼š
äººå·¥æ™ºèƒ½æ˜¯æŒ‡ç”±æœºå™¨æˆ–è½¯ä»¶æ‰€è¡¨ç°å‡ºçš„æ™ºèƒ½è¡Œä¸ºã€‚
==================================================
</code></pre>
<hr/>
<h4 data-id="heading-18">æ¡ˆä¾‹ 2ï¼šä½¿ç”¨æç¤ºè¯æ¨¡æ¿</h4>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo2_prompt_template.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate,ChatPromptTemplate <span class="hljs-comment"># å¯¼å…¥æç¤ºè¯æ¨¡æ¿ç±»</span>
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama  <span class="hljs-comment"># å¯¼å…¥OllamaèŠå¤©æ¨¡å‹ç±»</span>

<span class="hljs-comment"># 1.simple prompt template example</span>
<span class="hljs-comment">#   ç®€å•çš„æç¤ºè¯æ¨¡ç‰ˆç¤ºä¾‹</span>
<span class="hljs-comment">#   åŠŸèƒ½ï¼šå±•ç¤ºå¦‚ä½•ä½¿ç”¨æç¤ºè¯æ¨¡æ¿ç”Ÿæˆè¥é”€æ–‡æ¡ˆ</span>
<span class="hljs-comment">#   æµç¨‹ï¼š</span>
<span class="hljs-comment">#   1. åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
<span class="hljs-comment">#   2. åˆå§‹åŒ–è¯­è¨€æ¨¡å‹</span>
<span class="hljs-comment">#   3. å¡«å……æ¨¡æ¿å‚æ•°</span>
<span class="hljs-comment">#   4. è°ƒç”¨æ¨¡å‹ç”Ÿæˆå“åº”</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_prompt_template</span>():
    <span class="hljs-string">"""\n\tç®€å•çš„æç¤ºè¯æ¨¡ç‰ˆç¤ºä¾‹\n\tåŠŸèƒ½ï¼šå±•ç¤ºå¦‚ä½•ä½¿ç”¨æç¤ºè¯æ¨¡æ¿ç”Ÿæˆè¥é”€æ–‡æ¡ˆ\n\tæµç¨‹ï¼š\n\t\t1. åˆ›å»ºæç¤ºè¯æ¨¡æ¿\n\t\t2. åˆå§‹åŒ–è¯­è¨€æ¨¡å‹\n\t\t3. å¡«å……æ¨¡æ¿å‚æ•°\n\t\t4. è°ƒç”¨æ¨¡å‹ç”Ÿæˆå“åº”\n\t"""</span>
    <span class="hljs-string">"""ç®€å•çš„æç¤ºè¯æ¨¡ç‰ˆç¤ºä¾‹"""</span>
    <span class="hljs-comment"># åˆ›å»ºæç¤ºè¯æ¨¡ç‰ˆ</span>
    <span class="hljs-comment"># {product}æ˜¯å ä½ç¬¦ï¼Œå¯ä»¥åŠ¨æ€æ›¿æ¢</span>
    myTemplate = <span class="hljs-string">"""
    ä½ æ˜¯ä¸€åäº§å“è¥é”€æ–‡æ¡ˆä¸“å®¶ï¼Œè¯·å¸®æˆ‘ä¸ºä»¥ä¸‹äº§å“æ’°å†™ä¸€æ®µå¸å¼•äººçš„è¥é”€æ–‡æ¡ˆï¼š
    äº§å“åç§°ï¼š{product}
    äº§å“æè¿°ï¼š{description}
    äº§å“ç‰¹ç‚¹ï¼š{features}
    è¯·ç”¨è½»æ¾æ´»æ³¼çš„è¯­æ°”ï¼Œå­—æ•°æ§åˆ¶åœ¨ 100 å­—ä»¥å†…ã€‚
    """</span>
    <span class="hljs-comment"># åˆ›å»ºæç¤ºè¯æ¨¡ç‰ˆå¯¹è±¡</span>
    prompt = PromptTemplate(
        input_variables=[<span class="hljs-string">"product"</span>, <span class="hljs-string">"description"</span>, <span class="hljs-string">"features"</span>],  <span class="hljs-comment"># å®šä¹‰æ¨¡æ¿ä¸­å¯æ›¿æ¢çš„å˜é‡</span>
        template=myTemplate  <span class="hljs-comment"># ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„æ¨¡æ¿å­—ç¬¦ä¸²</span>
    )
    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen2.5:7b"</span>,  <span class="hljs-comment"># æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹åç§°</span>
        temperature=<span class="hljs-number">0.7</span>,  <span class="hljs-comment"># è®¾ç½®æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§</span>
    )
    
    <span class="hljs-comment"># å¡«å……æç¤ºè¯æ¨¡ç‰ˆ</span>
    formatted_prompt = prompt.<span class="hljs-built_in">format</span>(
        product=<span class="hljs-string">"æ™ºèƒ½æ‰‹ç¯"</span>,  <span class="hljs-comment"># æ›¿æ¢æ¨¡æ¿ä¸­çš„productå˜é‡</span>
        description=<span class="hljs-string">"å¹´è½»çš„è¿åŠ¨çˆ±å¥½è€…"</span>,  <span class="hljs-comment"># æ›¿æ¢æ¨¡æ¿ä¸­çš„descriptionå˜é‡</span>
        features=<span class="hljs-string">"å¿ƒç‡ç›‘æµ‹ã€ç¡çœ è¿½è¸ªã€é˜²æ°´è®¾è®¡"</span>  <span class="hljs-comment"># æ›¿æ¢æ¨¡æ¿ä¸­çš„featureså˜é‡</span>
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)  <span class="hljs-comment"># æ‰“å°åˆ†éš”çº¿</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”Ÿæˆçš„æç¤ºè¯ï¼š"</span>)  <span class="hljs-comment"># æ‰“å°æç¤ºä¿¡æ¯</span>
    <span class="hljs-built_in">print</span>(formatted_prompt)  <span class="hljs-comment"># æ‰“å°æ ¼å¼åŒ–åçš„æç¤ºè¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

    <span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ä½¿ç”¨æ¨¡å‹å¤„ç†æ ¼å¼åŒ–åçš„æç¤ºè¯</span>
    respone = llm.invoke(formatted_prompt)  


    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ¨¡å‹å“åº”:"</span>)  <span class="hljs-comment"># æ‰“å°æç¤ºä¿¡æ¯</span>
    <span class="hljs-built_in">print</span>(respone.content)  <span class="hljs-comment"># æ‰“å°æ¨¡å‹çš„å“åº”å†…å®¹</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)  <span class="hljs-comment"># æ‰“å°åˆ†éš”çº¿</span>

<span class="hljs-comment"># 2.å¯¹è¯å¼æç¤ºè¯æ¨¡ç‰ˆ</span>
<span class="hljs-comment">#   å¯¹è¯å¼æç¤ºè¯æ¨¡ç‰ˆç¤ºä¾‹</span>
<span class="hljs-comment">#   åŠŸèƒ½ï¼šå±•ç¤ºå¦‚ä½•ä½¿ç”¨æç¤ºè¯æ¨¡æ¿è¿›è¡Œå¯¹è¯å¼äº¤äº’</span>
<span class="hljs-comment">#   æµç¨‹ï¼š</span>
<span class="hljs-comment">#   1. åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
<span class="hljs-comment">#   2. åˆå§‹åŒ–è¯­è¨€æ¨¡å‹</span>
<span class="hljs-comment">#   3. å¡«å……æ¨¡æ¿å‚æ•°æ ¼å¼åŒ–</span>
<span class="hljs-comment">#   4. è°ƒç”¨æ¨¡å‹ç”Ÿæˆå“åº”</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_prompt_template</span>():
    <span class="hljs-comment">#åˆ›å»ºå¯¹è¯æ¨¡ç‰ˆ</span>
    <span class="hljs-comment">#å¯ä»¥æŒ‡å®šç³»ç»Ÿæ¶ˆæ¯ã€äººç±»æ¶ˆæ¯ç­‰ä¸åŒçš„è§’è‰²</span>
    chat_template = ChatPromptTemplate.from_messages([
        (<span class="hljs-string">"system"</span>, <span class="hljs-string">"ä½ æ˜¯ä¸€åèµ„æ·±çš„{role}ï¼Œæ‹¥æœ‰10å¹´ä»¥ä¸Šçš„ä»ä¸šç»éªŒ"</span>),
        (<span class="hljs-string">"human"</span>, <span class="hljs-string">"è¯·å¸®æˆ‘åˆ†æ:{question}"</span>)
    ])

    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen2.5:7b"</span>,  <span class="hljs-comment"># æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹åç§°</span>
        temperature=<span class="hljs-number">0.7</span>,  <span class="hljs-comment"># è®¾ç½®æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§</span>
    )

    <span class="hljs-comment"># å¡«å……æç¤ºè¯æ¨¡ç‰ˆ</span>
    messages = chat_template.format_messages(
        role=<span class="hljs-string">"Pythonå·¥ç¨‹å¸ˆ"</span>,  <span class="hljs-comment"># æ›¿æ¢æ¨¡æ¿ä¸­çš„roleå˜é‡</span>
        question=<span class="hljs-string">"å¦‚ä½•ä¼˜åŒ–Pythonä»£ç çš„æ€§èƒ½ï¼Ÿ"</span>  <span class="hljs-comment"># æ›¿æ¢æ¨¡æ¿ä¸­çš„topicå˜é‡</span>
    )

    <span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ä½¿ç”¨æ¨¡å‹å¤„ç†æ ¼å¼åŒ–åçš„æç¤ºè¯</span>
    response = llm.invoke(messages)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¯¹è¯æ¨¡æ¿å“åº”ï¼š"</span>)
    <span class="hljs-built_in">print</span>(response.content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

<span class="hljs-comment"># åˆ¤æ–­æ˜¯å¦ä¸ºä¸»ç¨‹åºè¿è¡Œï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨simple_prompt_templateå‡½æ•°ï¼Œå¦åˆ™ä¸æ‰§è¡Œ</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
        simple_prompt_template()
        chat_prompt_template()
</code></pre>
<p><strong>è¾“å‡ºç»“æœ:</strong></p>
<pre><code class="hljs language-bash" lang="bash">==================================================
ç”Ÿæˆçš„æç¤ºè¯ï¼š

    ä½ æ˜¯ä¸€åäº§å“è¥é”€æ–‡æ¡ˆä¸“å®¶ï¼Œè¯·å¸®æˆ‘ä¸ºä»¥ä¸‹äº§å“æ’°å†™ä¸€æ®µå¸å¼•äººçš„è¥é”€æ–‡æ¡ˆï¼š
    äº§å“åç§°ï¼šæ™ºèƒ½æ‰‹ç¯
    äº§å“æè¿°ï¼šå¹´è½»çš„è¿åŠ¨çˆ±å¥½è€…
    äº§å“ç‰¹ç‚¹ï¼šå¿ƒç‡ç›‘æµ‹ã€ç¡çœ è¿½è¸ªã€é˜²æ°´è®¾è®¡
    è¯·ç”¨è½»æ¾æ´»æ³¼çš„è¯­æ°”ï¼Œå­—æ•°æ§åˆ¶åœ¨ 100 å­—ä»¥å†…ã€‚
    
==================================================

æ¨¡å‹å“åº”:
æƒ³æˆä¸ºæœ‹å‹åœˆé‡Œçš„è¿åŠ¨å°æ˜æ˜Ÿå—ï¼Ÿæ¥è¯•è¯•æˆ‘ä»¬çš„æ™ºèƒ½æ‰‹ç¯å§ï¼å®ƒä¸“ä¸ºå¹´è½»çš„è¿åŠ¨çˆ±å¥½è€…æ‰“é€ ï¼Œä¸ä»…æœ‰æ—¶å°šå¤–è§‚ï¼Œè¿˜æœ‰å¿ƒç‡ç›‘æµ‹å’Œç¡çœ è¿½è¸ªåŠŸèƒ½å“¦ã€‚é˜²æ°´è®¾è®¡è®©ä½ æ— å¿§è¿åŠ¨ï¼Œè®°å½•æ¯ä¸€æ¬¡æŒ¥æ±—å¦‚é›¨çš„æ—¶åˆ»ã€‚æˆ´ä¸Šå®ƒï¼Œå¼€å¯ä½ çš„æ´»åŠ›äººç”Ÿï¼
==================================================

å¯¹è¯æ¨¡æ¿å“åº”ï¼š
ä¼˜åŒ–Pythonä»£ç çš„æ€§èƒ½æ˜¯ä¸€ä¸ªå¤šæ–¹é¢çš„å·¥ä½œï¼Œé€šå¸¸éœ€è¦è€ƒè™‘ç®—æ³•å¤æ‚åº¦ã€æ•°æ®ç»“æ„é€‰æ‹©ä»¥åŠç‰¹å®šåº“å’Œå·¥å…·çš„åº”ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸è§çš„ä¼˜åŒ–ç­–ç•¥ï¼š

<span class="hljs-comment">### 1. åˆ†æç“¶é¢ˆ</span>

- **ä½¿ç”¨`cProfile`æˆ–`line_profiler`**ï¼šé¦–å…ˆå®šä½ç¨‹åºä¸­çš„çƒ­ç‚¹ï¼ˆå³æ‰§è¡Œæ—¶é—´æœ€é•¿çš„éƒ¨åˆ†ï¼‰ã€‚è¿™æœ‰åŠ©äºç¡®å®šä¼˜åŒ–çš„é‡ç‚¹ã€‚
- **äº†è§£Pythonçš„æ€§èƒ½ç‰¹æ€§**ï¼šä¾‹å¦‚ï¼Œé¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»ºã€å‡å°‘å‡½æ•°è°ƒç”¨æ¬¡æ•°ç­‰ã€‚

<span class="hljs-comment">### 2. é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„å’Œç®—æ³•</span>

- æ ¹æ®é—®é¢˜çš„å…·ä½“æƒ…å†µé€‰æ‹©æœ€é€‚åˆçš„æ•°æ®ç»“æ„ã€‚æ¯”å¦‚ä½¿ç”¨`collections.deque`ä»£æ›¿åˆ—è¡¨è¿›è¡Œé¢‘ç¹çš„æ·»åŠ å’Œåˆ é™¤æ“ä½œï¼Œæˆ–ä½¿ç”¨`heapq`æ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚
- ä»”ç»†è€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦ä½¿ç”¨å­—å…¸æˆ–é›†åˆï¼Œæœ‰æ—¶å€™åˆ—è¡¨å¯èƒ½è¶³å¤Ÿä¸”æ›´å¿«ã€‚

<span class="hljs-comment">### 3. ä½¿ç”¨å†…ç½®å‡½æ•°</span>

- Pythonåº“ä¸­çš„å¾ˆå¤šå‡½æ•°éƒ½æ˜¯ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œæ‰§è¡Œé€Ÿåº¦è¿œå¿«äºPythonä»£ç ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨`map()`ã€`filter()`ç­‰é«˜é˜¶å‡½æ•°ä»£æ›¿å¾ªç¯ã€‚
- åˆ©ç”¨`itertools`æ¨¡å—æä¾›çš„é«˜æ•ˆè¿­ä»£å™¨å·¥å…·ï¼Œå¦‚`chain()`, `accumulate()`ç­‰ã€‚

<span class="hljs-comment">### 4. é¿å…å…¨å±€å˜é‡</span>

- å…¨å±€å˜é‡åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½éœ€è¦æŸ¥æ‰¾ï¼Œè¿™ä¼šé™ä½ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ã€‚å°½é‡å‡å°‘å¯¹å…¨å±€å˜é‡çš„ä¾èµ–ã€‚
  
<span class="hljs-comment">### 5. ä½¿ç”¨å¤šçº¿ç¨‹æˆ–å¼‚æ­¥ç¼–ç¨‹</span>

- å¦‚æœä½ çš„ä»»åŠ¡æ˜¯I/Oå¯†é›†å‹ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰ï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨`asyncio`å®ç°å¼‚æ­¥IOæ“ä½œæ¥æé«˜æ•ˆç‡ã€‚
- å¯¹äºCPUå¯†é›†å‹çš„ä»»åŠ¡ï¼Œå¯ä»¥åˆ©ç”¨`multiprocessing`æ¨¡å—åˆ›å»ºè¿›ç¨‹æ¥å¹¶è¡Œæ‰§è¡Œã€‚

<span class="hljs-comment">### 6. ç¼–è¯‘Pythonä»£ç </span>

- ä½¿ç”¨PyPyè§£é‡Šå™¨å¯èƒ½ä¼šå¸¦æ¥æ˜¾è‘—çš„é€Ÿåº¦æå‡ã€‚è™½ç„¶æ ‡å‡†çš„CPythoné€šå¸¸å·²è¶³å¤Ÿå¿«ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨PyPyå¯ä»¥å®ç°æ›´å¿«çš„è¿è¡Œæ—¶ã€‚
- åˆ©ç”¨Numbaè¿™æ ·çš„å·¥å…·å°†éƒ¨åˆ†æˆ–å…¨éƒ¨Pythonå‡½æ•°ç¼–è¯‘æˆæœºå™¨ç ã€‚

<span class="hljs-comment">### 7. å‡å°‘å†…å­˜æ¶ˆè€—</span>

- ä½¿ç”¨`numpy`ã€`pandas`ç­‰åº“å¤„ç†å¤§è§„æ¨¡æ•°æ®é›†å¾€å¾€æ¯”çº¯Pythonå®ç°æ›´é«˜æ•ˆï¼Œå› ä¸ºå®ƒä»¬åº•å±‚ä½¿ç”¨äº†Cè¯­è¨€ç¼–å†™ï¼Œå¹¶ä¸”è¿›è¡Œäº†ä¼˜åŒ–ã€‚
  
<span class="hljs-comment">### 8. å†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶</span>

- ç¡®ä¿æ­£ç¡®åœ°ä½¿ç”¨èµ„æºå’Œç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚é¿å…ä¸å¿…è¦çš„å†…å­˜æ³„æ¼ã€‚

é€šè¿‡ä¸Šè¿°æ–¹æ³•çš„ç»¼åˆåº”ç”¨ï¼Œé€šå¸¸å¯ä»¥æ˜¾è‘—æé«˜Pythonä»£ç çš„æ‰§è¡Œé€Ÿåº¦å’Œæ•ˆç‡ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ€§èƒ½ä¼˜åŒ–åº”å½“åœ¨ç¡®ä¿ç¨‹åºåŠŸèƒ½çš„å‰æä¸‹è¿›è¡Œï¼Œå¹¶ä¸”è¦è¡¡é‡æ‰€ä»˜å‡ºçš„åŠªåŠ›æ˜¯å¦å€¼å¾—å¾—åˆ°çš„æ€§èƒ½æå‡ã€‚
==================================================
</code></pre>
<p><strong>å°ç»“</strong></p>






























<table><thead><tr><th>ç»´åº¦</th><th><code>PromptTemplate</code></th><th><code>ChatPromptTemplate</code></th></tr></thead><tbody><tr><td>ç»“æ„</td><td>å•ä¸€æ®µè½å­—ç¬¦ä¸²ï¼ˆæ— è§’è‰²ï¼‰</td><td>å¸¦è§’è‰²çš„æ¶ˆæ¯åˆ—è¡¨ï¼ˆç³»ç»Ÿ / äººç±» / AIï¼‰</td></tr><tr><td>äº¤äº’æ–¹å¼</td><td>ä¼ é€’çº¯æ–‡æœ¬</td><td>ä¼ é€’æ¶ˆæ¯åˆ—è¡¨</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å•è½®ä»»åŠ¡ã€ç®€å•æŒ‡ä»¤</td><td>å¤šè½®å¯¹è¯ã€éœ€è¦è§’è‰²è®¾å®šçš„ä»»åŠ¡</td></tr><tr><td>æ¨¡å‹ç†è§£æ–¹å¼</td><td>ä½œä¸ºæ•´ä½“æŒ‡ä»¤å¤„ç†</td><td>æŒ‰è§’è‰²ä¼˜å…ˆçº§å’Œä¸Šä¸‹æ–‡å¤„ç†</td></tr></tbody></table>
<p>ç®€å•æ¥è¯´ï¼Œ<code>PromptTemplate</code> æ˜¯ â€œç»™æ¨¡å‹ä¸€æ®µè¯â€ï¼Œ<code>ChatPromptTemplate</code> æ˜¯ â€œç»™æ¨¡å‹ä¸€æ®µå¸¦è§’è‰²çš„å¯¹è¯å†å²â€ï¼Œåè€…æ›´é€‚åˆæ¨¡æ‹ŸçœŸå®äº¤äº’åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-19">æ¡ˆä¾‹ 3ï¼šé“¾å¼è°ƒç”¨ï¼ˆChainï¼‰</h4>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo3_chains.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æ¡ˆä¾‹ 3ï¼šé“¾å¼è°ƒç”¨ï¼ˆLangChain v1ç‰ˆæœ¬ æ–°å†™æ³•ï¼‰
å±•ç¤ºå¦‚ä½•ç”¨ RunnableSequence æ›¿ä»£ LLMChain / SequentialChain
"""</span>
<span class="hljs-comment">#æœ¬åœ°ä½¿ç”¨ollama è¿™é‡Œæš‚æ—¶æ³¨é‡Š</span>
<span class="hljs-comment">#from dotenv import load_dotenv</span>
<span class="hljs-comment">#load_dotenv()</span>

<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> PromptTemplate
<span class="hljs-comment"># from langchain.chains import LLMChain, SequentialChain #è¢«ç‰ˆæœ¬åˆ é™¤ä½¿ç”¨ä¸‹é¢çš„æ›¿ä»£</span>
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableSequence, RunnablePassthrough <span class="hljs-comment"># æ–°å¼•å…¥çš„ç±»ï¼Œç”¨äºæ›¿ä»£ LLMChain / SequentialChainï¼Œå®ç°é“¾å¼è°ƒç”¨</span>



<span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_chain</span>():
    <span class="hljs-string">"""ç®€å•é“¾å¼è°ƒç”¨ç¤ºä¾‹"""</span>


    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen2.5:7b"</span>,
        temperature=<span class="hljs-number">0.7</span>,
    )

    <span class="hljs-comment"># åˆ›å»ºæç¤ºè¯æ¨¡æ¿</span>
    prompt = PromptTemplate(
        input_variables=[<span class="hljs-string">"topic"</span>],
        template=<span class="hljs-string">"è¯·ä¸ºä»¥ä¸‹ä¸»é¢˜å†™ä¸€ä¸ªæ ‡é¢˜{topic}"</span>
    )

    <span class="hljs-comment"># çªå‡ºè¯­æ³•å˜åŒ–ï¼šç”¨æœ€ç²¾ç®€çš„é€»è¾‘ï¼ˆè¾“å…¥â†’æ ¼å¼åŒ–â†’ç”Ÿæˆï¼‰å±•ç¤ºæ–°ç‰ˆ API çš„æ ¸å¿ƒè¯­æ³•ï¼Œå‡å°‘å…¶ä»–å¹²æ‰°ã€‚</span>
    <span class="hljs-comment"># åˆ›å»ºé“¾å¼è°ƒç”¨</span>
    chain = prompt | llm




    <span class="hljs-comment"># è¿è¡Œé“¾å¼è°ƒç”¨</span>
    result = chain.invoke({<span class="hljs-string">"topic"</span>: <span class="hljs-string">"äººå·¥æ™ºèƒ½"</span>})

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"é“¾å¼è°ƒç”¨ç»“æœï¼š"</span>)
<span class="hljs-comment">#    content='"æ¢ç´¢æœªæ¥ï¼šäººå·¥æ™ºèƒ½çš„æŠ€æœ¯è¿›æ­¥ä¸åº”ç”¨å‰æ™¯"' additional_kwargs={} response_metadata={'model': 'qwen2.5:7b', 'created_at': '2025-11-20T08:12:53.783476Z', 'done': True, 'done_reason': 'stop', 'total_duration': 5279829084, 'load_duration': 836230125, 'prompt_eval_count': 37, 'prompt_eval_duration': 4001584375, 'eval_count': 12, 'eval_duration': 439842917, 'logprobs': None, 'model_name': 'qwen2.5:7b', 'model_provider': 'ollama'} id='lc_run--3fa4a36d-9887-4a5d-af20-1daa48daf5ff-0' usage_metadata={'input_tokens': 37, 'output_tokens': 12, 'total_tokens': 49}</span>
    <span class="hljs-built_in">print</span>(result.content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)




<span class="hljs-keyword">def</span> <span class="hljs-title function_">sequential_chain</span>():
    <span class="hljs-string">"""é¡ºåºé“¾ç¤ºä¾‹ï¼ˆæ–°ç‰ˆ Runnable APIï¼Œå®ç°ä¸ SequentialChain ç­‰ä»·ï¼‰"""</span>
    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen2.5:7b"</span>,
        temperature=<span class="hljs-number">0.7</span>,
    )

    <span class="hljs-comment"># Step 1: ç”Ÿæˆæ ‡é¢˜</span>
    title_prompt = PromptTemplate(
        input_variables=[<span class="hljs-string">"topic"</span>],
        template=<span class="hljs-string">"è¯·ä¸ºä»¥ä¸‹ä¸»é¢˜å†™ä¸€ä¸ªæ ‡é¢˜ï¼š{topic}"</span>
    )
    title_chain = title_prompt | llm

    <span class="hljs-comment"># Step 2: ç”Ÿæˆå¤§çº²</span>
    outline_prompt = PromptTemplate(
        input_variables=[<span class="hljs-string">"title"</span>],
        template=<span class="hljs-string">"è¯·æ ¹æ®ä»¥ä¸‹æ ‡é¢˜å†™ä¸€æ®µç®€ä»‹ï¼š{title}"</span>
    )
    outline_chain = outline_prompt | llm

    <span class="hljs-comment"># Step 3: ç”Ÿæˆå¼€å¤´</span>
    intro_prompt = PromptTemplate(
        input_variables=[<span class="hljs-string">"title"</span>, <span class="hljs-string">"outline"</span>],
        template=<span class="hljs-string">"""
        æ–‡ç« æ ‡é¢˜ï¼š{title}
        æ–‡ç« å¤§çº²ï¼š{outline}
        è¯·æ ¹æ®ä»¥ä¸Šä¿¡æ¯ï¼Œå†™ä¸€æ®µå¼•äººå…¥èƒœçš„å¼€å¤´ï¼ˆ100å­—å·¦å³ï¼‰  
        """</span> 
    )
    intro_chain = intro_prompt | llm

    <span class="hljs-comment"># åˆ›å»ºé¡ºåºé“¾å¼è°ƒç”¨</span>
    <span class="hljs-comment"># åˆ›å»ºé¡ºåºé“¾å¼è°ƒç”¨</span>
    <span class="hljs-comment"># æ³¨æ„ï¼šRunnableSequence ä¸æ¥å— steps å‚æ•°ï¼Œåº”ä½¿ç”¨ | è¿ç®—ç¬¦è¿æ¥</span>
    <span class="hljs-comment"># RunnablePassthrough	æ— ä¿®æ”¹é€ä¼ è¾“å…¥	è¾“å‡º = è¾“å…¥ï¼ˆæ•°æ®å®Œå…¨ä¸å˜ï¼‰</span>
    <span class="hljs-comment"># RunnablePassthrough.assign()	é€ä¼ è¾“å…¥ + æ–°å¢ / æ›´æ–°å­—æ®µ	è¾“å‡º = åŸæœ‰è¾“å…¥ + æ–°å­—æ®µï¼ˆå¢é‡æ‰©å±•ï¼‰</span>
    overall_chain = (
        RunnablePassthrough() <span class="hljs-comment">#è¿™ä¸€æ­¥çº¯å¤šä½™å°±æ˜¯å•çº¯çš„ç”¨ä¸€ä¸‹ å½“åšäº†è§£å§  Aiæ˜¯æ°¸è¿œçŒœä¸é€äººç±»çš„è„‘å›è·¯çš„ åªæœ‰äººç±»æ‰èƒ½å†™å‡ºè¿™æ ·çš„ä»£ç æ—¢æ²¡ç”¨ä¹Ÿæ— å®³å“ˆå“ˆå“ˆå“ˆ</span>
        |RunnablePassthrough.assign(title=title_chain)
        | RunnablePassthrough.assign(outline=(<span class="hljs-keyword">lambda</span> x :{<span class="hljs-string">"title"</span>:x[<span class="hljs-string">"title"</span>].content}) | outline_chain) <span class="hljs-comment"># é€ä¼ è¾“å…¥ + æ–°å¢ / æ›´æ–°å­—æ®µ, </span>
        | RunnablePassthrough.assign(introduction=(<span class="hljs-keyword">lambda</span> x :{<span class="hljs-string">"title"</span>:x[<span class="hljs-string">"title"</span>].content,<span class="hljs-string">"outline"</span>:x[<span class="hljs-string">"outline"</span>].content}) | intro_chain)<span class="hljs-comment"># é€ä¼ è¾“å…¥ + æ–°å¢ / æ›´æ–°å­—æ®µ</span>
    )

    <span class="hljs-comment"># è¿è¡Œé¡ºåºé“¾å¼è°ƒç”¨</span>
    result = overall_chain.invoke({<span class="hljs-string">"topic"</span>: <span class="hljs-string">"é‡å­è®¡ç®—çš„å®é™…ç”¨ä¾‹"</span>})

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"é¡ºåºé“¾æ‰§è¡Œç»“æœï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\næ ‡é¢˜ï¼š\n"</span>, result[<span class="hljs-string">"title"</span>].content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¤§çº²ï¼š\n"</span>, result[<span class="hljs-string">"outline"</span>].content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¼€å¤´æ®µè½ï¼š\n"</span>, result[<span class="hljs-string">"introduction"</span>].content)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)




<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
        simple_chain()
        sequential_chain()
</code></pre>
<p><strong>è¡¥å……</strong></p>
<blockquote>
<p>LangChain ä¸­æ„å»ºé¡ºåºé“¾ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ï¼Œæ ¸å¿ƒé€»è¾‘ç­‰ä»·ä½†å†™æ³•ä¸åŒï¼š</p>
<ol>
<li><strong><code>|</code>è¿ç®—ç¬¦</strong>ï¼šæœ€ç®€æ´ï¼Œç›´æ¥ä¸²è”ç»„ä»¶ï¼ˆå¦‚<code>r1 | r2 | r3</code>ï¼‰ï¼ŒLangChain æ¨èç”¨æ³•ï¼›</li>
<li><strong><code>RunnableSequence(ç»„ä»¶1, ç»„ä»¶2)</code></strong>ï¼šæ˜¾å¼é€šè¿‡ä½ç½®å‚æ•°æ„å»ºï¼Œä¸<code>|</code>è¿ç®—ç¬¦åŠŸèƒ½ä¸€è‡´ï¼›</li>
<li><strong><code>RunnableSequence.from_list([ç»„ä»¶])</code></strong>ï¼šé€šè¿‡åˆ—è¡¨å®šä¹‰æ­¥éª¤ï¼Œé€‚åˆæ­¥éª¤è¾ƒå¤šæ—¶é›†ä¸­ç®¡ç†ã€‚</li>
</ol>
<p>ä¸‰è€…æœ¬è´¨éƒ½æ˜¯å®ç°ç»„ä»¶çš„é¡ºåºæ‰§è¡Œï¼Œä»…è¯­æ³•å½¢å¼ä¸åŒï¼Œå¯æ ¹æ®ä»£ç å¯è¯»æ€§å’Œåœºæ™¯éœ€æ±‚é€‰æ‹©ã€‚</p>
</blockquote>
<p>ç‰ˆæœ¬ 2ï¼šç›´æ¥ä¼ å…¥ä½ç½®å‚æ•°</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableSequence, RunnablePassthrough

<span class="hljs-comment"># å®šä¹‰å„æ­¥éª¤ç»„ä»¶</span>
step1 = RunnablePassthrough.assign(title=title_chain)  <span class="hljs-comment"># æ–°å¢titleå­—æ®µ</span>
step2 = RunnablePassthrough.assign(
    outline=(<span class="hljs-keyword">lambda</span> x: {<span class="hljs-string">"title"</span>: x[<span class="hljs-string">"title"</span>].content}) | outline_chain
)  <span class="hljs-comment"># æ–°å¢outlineå­—æ®µ</span>
step3 = RunnablePassthrough.assign(
    introduction=(<span class="hljs-keyword">lambda</span> x: {<span class="hljs-string">"title"</span>: x[<span class="hljs-string">"title"</span>].content, <span class="hljs-string">"outline"</span>: x[<span class="hljs-string">"outline"</span>].content}) | intro_chain
)  <span class="hljs-comment"># æ–°å¢introductionå­—æ®µ</span>

<span class="hljs-comment"># ç”¨RunnableSequenceä¸²è”æ­¥éª¤ï¼ˆç›´æ¥ä¼ ä½ç½®å‚æ•°ï¼‰</span>
overall_chain = RunnableSequence(step1, step2, step3)
</code></pre>
<p>ç‰ˆæœ¬ 3ï¼šç”¨<code>from_list()</code>æ–¹æ³•ï¼ˆæ›´ç›´è§‚ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnableSequence, RunnablePassthrough

<span class="hljs-comment"># å®šä¹‰æ­¥éª¤åˆ—è¡¨</span>
steps = [
    RunnablePassthrough.assign(title=title_chain),
    RunnablePassthrough.assign(
        outline=(<span class="hljs-keyword">lambda</span> x: {<span class="hljs-string">"title"</span>: x[<span class="hljs-string">"title"</span>].content}) | outline_chain
    ),
    RunnablePassthrough.assign(
        introduction=(<span class="hljs-keyword">lambda</span> x: {<span class="hljs-string">"title"</span>: x[<span class="hljs-string">"title"</span>].content, <span class="hljs-string">"outline"</span>: x[<span class="hljs-string">"outline"</span>].content}) | intro_chain
    )
]

<span class="hljs-comment"># ç”¨from_list()åˆ›å»ºRunnableSequence</span>
overall_chain = RunnableSequence.from_list(steps)
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">==================================================
é“¾å¼è°ƒç”¨ç»“æœï¼š
<span class="hljs-string">"æ¢ç´¢æœªæ¥ï¼šäººå·¥æ™ºèƒ½çš„æŠ€æœ¯è¿›æ­¥ä¸åº”ç”¨å‰æ™¯"</span>
==================================================

==================================================
é¡ºåºé“¾æ‰§è¡Œç»“æœï¼š

æ ‡é¢˜ï¼š
 é‡å­è®¡ç®—çš„ç°å®åº”ç”¨æ¡ˆä¾‹æ¢ç©¶

å¤§çº²ï¼š
 é‡å­è®¡ç®—ä½œä¸ºä¸€ç§å‰æ²¿æŠ€æœ¯ï¼Œåˆ©ç”¨é‡å­åŠ›å­¦åŸç†è¿›è¡Œä¿¡æ¯å¤„ç†å’Œè®¡ç®—ï¼Œå…·æœ‰è¶…è¶Šä¼ ç»Ÿè®¡ç®—æœºçš„å¼ºå¤§æ½œåŠ›ã€‚æœ¬ç ”ç©¶æ—¨åœ¨æ¢è®¨é‡å­è®¡ç®—åœ¨ç°å®ä¸–ç•Œä¸­çš„å…·ä½“åº”ç”¨æ¡ˆä¾‹ï¼Œåˆ†æå…¶å¦‚ä½•è§£å†³å®é™…é—®é¢˜å¹¶å¸¦æ¥åˆ›æ–°è§£å†³æ–¹æ¡ˆã€‚

é€šè¿‡æ·±å…¥å‰–æä¸åŒè¡Œä¸šé¢†åŸŸçš„åº”ç”¨åœºæ™¯ï¼Œå¦‚è¯ç‰©å‘ç°ã€é‡‘èå»ºæ¨¡ã€ä¼˜åŒ–ç®—æ³•ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ™°åœ°çœ‹åˆ°é‡å­è®¡ç®—æŠ€æœ¯çš„æ½œåŠ›å’ŒæŒ‘æˆ˜ã€‚ä¾‹å¦‚ï¼Œåœ¨åŒ»è¯ç ”å‘ä¸­ï¼Œåˆ©ç”¨é‡å­è®¡ç®—æœºæ¨¡æ‹Ÿåˆ†å­ç»“æ„å’Œååº”è¿‡ç¨‹ï¼Œå¯ä»¥åŠ é€Ÿæ–°è¯å¼€å‘æµç¨‹ï¼›åœ¨é‡‘èæœåŠ¡é¢†åŸŸï¼Œé‡å­è®¡ç®—èƒ½å¤Ÿå¤„ç†å¤æ‚çš„é£é™©åˆ†æä¸æŠ•èµ„ç»„åˆä¼˜åŒ–é—®é¢˜ã€‚

æ­¤å¤–ï¼Œæœ¬ç ”ç©¶è¿˜å°†ä»‹ç»å½“å‰å®ç°è¿™äº›åº”ç”¨çš„æŠ€æœ¯è¿›å±•ã€é¢ä¸´çš„éšœç¢åŠæœªæ¥å‘å±•æ–¹å‘ã€‚é€šè¿‡å¯¹æ¡ˆä¾‹çš„è¯¦ç»†è§£æï¼Œä¸ä»…æœ‰åŠ©äºæ·±åŒ–å¯¹é‡å­è®¡ç®—æŠ€æœ¯çš„ç†è§£ï¼Œä¹Ÿä¸ºç›¸å…³é¢†åŸŸçš„ç ”ç©¶äººå‘˜å’Œä»ä¸šè€…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒä¿¡æ¯ã€‚

å¼€å¤´æ®µè½ï¼š
 åœ¨å½“ä»Šç§‘æŠ€æ—¥æ–°æœˆå¼‚çš„æ—¶ä»£ï¼Œé‡å­è®¡ç®—ä½œä¸ºä¸€ç§é¢ è¦†æ€§çš„å‰æ²¿æŠ€æœ¯ï¼Œæ­£é€æ¸æ­å¼€å…¶ç¥ç§˜é¢çº±ã€‚ä¸åŒäºä¼ ç»Ÿè®¡ç®—æœºåŸºäºäºŒè¿›åˆ¶åŸç†çš„å·¥ä½œæ–¹å¼ï¼Œé‡å­è®¡ç®—æœºåˆ©ç”¨é‡å­åŠ›å­¦ä¸­çš„å åŠ æ€å’Œçº ç¼ æ€ç‰¹æ€§ï¼Œå®ç°äº†å‰æ‰€æœªæœ‰çš„ä¿¡æ¯å¤„ç†é€Ÿåº¦ä¸èƒ½åŠ›ã€‚ä»åŠ é€Ÿè¯ç‰©ç ”å‘åˆ°ä¼˜åŒ–é‡‘èæŠ•èµ„ç»„åˆï¼Œé‡å­è®¡ç®—æ­£åœ¨ä¸ºè§£å†³å¤æ‚ç°å®é—®é¢˜æä¾›åˆ›æ–°è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è¿™äº›åº”ç”¨æ¡ˆä¾‹ï¼Œæ­ç¤ºå…¶èƒŒåçš„æŠ€æœ¯å¥¥ç§˜ä¸æŒ‘æˆ˜ï¼Œå¼•é¢†æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªå……æ»¡æ— é™å¯èƒ½çš„æ–°æ—¶ä»£ã€‚
</code></pre>
<p><strong>æµç¨‹ç†è§£  åˆšå¼€å§‹çœ‹ç¨å¾®ç¨å¾®æœ‰ç‚¹æŠ½è±¡ ä¸è¿‡ç†ä¸€å°±æ¸…æ™°å¤šäº†</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
   A["è¾“å…¥ï¼š{'topic': 'é‡å­è®¡ç®—çš„å®é™…ç”¨ä¾‹'}"] --&gt; B["RunnablePassthrough.assign(title=title_chain)"]
   
   %% Step1ï¼šç”Ÿæˆtitle
   B --&gt; C["title_chainæ‰§è¡Œï¼štitle_prompt + llm"]
   C --&gt; D["è¾“å‡ºtitleç»“æœï¼ˆå¸¦.contentå±æ€§ï¼‰"]
   D --&gt; B1["ä¸Šä¸‹æ–‡æ›´æ–°ï¼š{'topic': ..., 'title': ç»“æœå¯¹è±¡}"]
   
   %% Step2ï¼šç”Ÿæˆoutline
   B1 --&gt; E["RunnablePassthrough.assign(outline=lambda+outline_chain)"]
   E --&gt; F["lambdaæå–ï¼š{'title': x['title'].content}"]
   F --&gt; G["outline_chainæ‰§è¡Œï¼šoutline_prompt + llm"]
   G --&gt; H["è¾“å‡ºoutlineç»“æœï¼ˆå¸¦.contentå±æ€§ï¼‰"]
   H --&gt; E1["ä¸Šä¸‹æ–‡æ›´æ–°ï¼š{'topic': ..., 'title': ..., 'outline': ç»“æœå¯¹è±¡}"]
   
   %% Step3ï¼šç”Ÿæˆintroduction
   E1 --&gt; I["RunnablePassthrough.assign(introduction=lambda+intro_chain)"]
   I --&gt; J["lambdaæå–ï¼š{'title': x['title'].content, 'outline': x['outline'].content}"]
   J --&gt; K["intro_chainæ‰§è¡Œï¼šintro_prompt + llm"]
   K --&gt; L["è¾“å‡ºintroductionç»“æœï¼ˆå¸¦.contentå±æ€§ï¼‰"]
   L --&gt; M["æœ€ç»ˆä¸Šä¸‹æ–‡ï¼š{'topic': ..., 'title': ..., 'outline': ..., 'introduction': ...}"]
   
   %% ç»“æœè¾“å‡º
   M --&gt; N["æ‰“å°ç»“æœï¼štitle.content / outline.content / introduction.content"]
</code></pre>
<hr/>
<h4 data-id="heading-20">æ¡ˆä¾‹ 4ï¼šå¯¹è¯è®°å¿†ï¼ˆMemoryï¼‰</h4>
<p>åœ¨å†™è¿™ä¸ªdemoçš„æ—¶å€™ç‰ˆæœ¬æ›´æ–°äº†langchain æ­£å¼çš„è¿ˆå…¥äº†1.xçš„æ—¶ä»£ï¼Œéšä¹‹åæ¥çš„å˜åŒ–ä¹Ÿæ˜¯å·¨å¤§çš„å°±å¥½åƒæˆ‘ä»¬ä¸‹é¢çš„è¿™ä¸ªç¤ºä¾‹</p>
<p>æ—§ç‰ˆ Agent ä¾èµ–å›ºå®šçš„<strong>ç¡¬ç¼–ç å¾ªç¯</strong>ï¼ˆAgentExecutorï¼‰ï¼Œéš¾ä»¥å¤„ç†å¤æ‚çš„åˆ†æ”¯å’Œå¤šæ­¥ä»»åŠ¡ã€‚</p>
<p>LangChain v1 çš„ç›®æ ‡æ˜¯æ„å»ºç”Ÿäº§çº§ã€å¯å®šåˆ¶çš„è‡ªä¸»æ™ºèƒ½ä½“ï¼Œè¿™è¦æ±‚æµç¨‹å…·å¤‡<strong>çŠ¶æ€ç®¡ç†å’Œéçº¿æ€§å†³ç­–èƒ½åŠ›</strong>ã€‚</p>
<p>å› æ­¤ï¼ŒLangGraph ä½œä¸ºåº•å±‚çš„<strong>çŠ¶æ€æœºè¿è¡Œæ—¶</strong>ï¼Œå–ä»£äº†æ—§çš„æ‰§è¡Œå™¨ï¼Œèµ‹äºˆ Agent æµç¨‹<strong>è‡ªå®šä¹‰çš„æŸ”æ€§</strong>ã€‚</p>
<p>ä¼ªä»£ç å…¬å¼ï¼š</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>v</mi><mn>1</mn><mi mathvariant="normal">_</mi><mi>A</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>â‰¡</mo><mi>G</mi><mi>r</mi><mi>a</mi><mi>p</mi><mi>h</mi><mo stretchy="false">(</mo><mtext>State</mtext><munderover><mo stretchy="true" minsize="3.0em">â†’</mo><mpadded width="+0.6em" lspace="0.3em"><mtext>ToolÂ Output</mtext></mpadded><mpadded width="+0.6em" lspace="0.3em"><mtext>NodeÂ Logic</mtext></mpadded></munderover><mtext>NextÂ Step</mtext><mo stretchy="false">)</mo><mtext>v1_Agent</mtext><mo>â‰¡</mo><mtext>å›¾</mtext><mo stretchy="false">(</mo><mtext>å½“å‰çŠ¶æ€</mtext><munderover><mo stretchy="true" minsize="3.0em">â†’</mo><mpadded width="+0.6em" lspace="0.3em"><mtext>å·¥å…·è¾“å‡º</mtext></mpadded><mpadded width="+0.6em" lspace="0.3em"><mtext>å†³ç­–å‡½æ•°</mtext></mpadded></munderover><mtext>ä¸‹ä¸€èŠ‚ç‚¹</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">v1\_Agent \equiv Graph(\text{State} \xrightarrow[\text{Tool Output}]{\text{Node Logic}} \text{Next Step})
\text{v1\_Agent} \equiv \text{å›¾}(\text{å½“å‰çŠ¶æ€} \xrightarrow[\text{å·¥å…·è¾“å‡º}]{\text{å†³ç­–å‡½æ•°}} \text{ä¸‹ä¸€èŠ‚ç‚¹})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9933em;vertical-align:-0.31em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord" style="margin-right:0.02778em;">1_</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.8523em;vertical-align:-0.7442em;"/><span class="mord mathnormal">G</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">p</span><span class="mord mathnormal">h</span><span class="mopen">(</span><span class="mord text"><span class="mord">State</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1081em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">NodeÂ Logic</span></span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"/><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128&#10;-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20&#10; 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7&#10; 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85&#10;-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5&#10;-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67&#10; 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span><span style="top:-2.0919em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">ToolÂ Output</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.7442em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"/><span class="mord text"><span class="mord">NextÂ Step</span></span><span class="mclose">)</span><span class="mord text"><span class="mord">v1_Agent</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.7007em;vertical-align:-0.6003em;"/><span class="mord text"><span class="mord cjk_fallback">å›¾</span></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">å½“å‰çŠ¶æ€</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1003em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å†³ç­–å‡½æ•°</span></span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"/><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128&#10;-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20&#10; 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7&#10; 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85&#10;-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5&#10;-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67&#10; 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span><span style="top:-2.0997em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å·¥å…·è¾“å‡º</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.6003em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord cjk_fallback">ä¸‹ä¸€èŠ‚ç‚¹</span></span><span class="mclose">)</span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>v1_Agent</mtext><mo>â‰¡</mo><mtext>å›¾</mtext><mo stretchy="false">(</mo><mtext>å½“å‰çŠ¶æ€</mtext><munderover><mo stretchy="true" minsize="3.0em">â†’</mo><mpadded width="+0.6em" lspace="0.3em"><mtext>å·¥å…·è¾“å‡º</mtext></mpadded><mpadded width="+0.6em" lspace="0.3em"><mtext>å†³ç­–å‡½æ•°</mtext></mpadded></munderover><mtext>ä¸‹ä¸€èŠ‚ç‚¹</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{v1\_Agent} \equiv \text{å›¾}(\text{å½“å‰çŠ¶æ€} \xrightarrow[\text{å·¥å…·è¾“å‡º}]{\text{å†³ç­–å‡½æ•°}} \text{ä¸‹ä¸€èŠ‚ç‚¹})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9933em;vertical-align:-0.31em;"/><span class="mord text"><span class="mord">v1_Agent</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰¡</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.7007em;vertical-align:-0.6003em;"/><span class="mord text"><span class="mord cjk_fallback">å›¾</span></span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">å½“å‰çŠ¶æ€</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1003em;"><span style="top:-3.322em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å†³ç­–å‡½æ•°</span></span></span></span></span><span class="svg-align" style="top:-2.689em;"><span class="pstrut" style="height:2.7em;"/><span class="hide-tail" style="height:0.522em;min-width:1.469em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="0.522em" viewbox="0 0 400000 522" preserveaspectratio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128&#10;-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20&#10; 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7&#10; 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85&#10;-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5&#10;-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67&#10; 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span><span style="top:-2.0997em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">å·¥å…·è¾“å‡º</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.6003em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord cjk_fallback">ä¸‹ä¸€èŠ‚ç‚¹</span></span><span class="mclose">)</span></span></span></span></span></div>
<hr/>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo4_memory.py</code>ï¼š
ä¸‹é¢çš„demoå°†ä¼šåˆ†ä¸ºä¸¤ä¸ªå‡½æ•°ä¸€ä¸ªæ˜¯ä»¥å‰çš„æ–¹æ³•æ—¨åœ¨ç”¨æ¥æ¯”è¾ƒä»¥å‰å’Œç°åœ¨çš„åŒºåˆ«ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æ¡ˆä¾‹ 4ï¼šå¯¹è¯è®°å¿†
å±•ç¤ºå¦‚ä½•è®© AI è®°ä½ä¹‹å‰çš„å¯¹è¯å†…å®¹

 è¿™é‡Œä¸å†è¯´æ˜ä¸ºä½•æ²¡æœ‰å¼•å…¥ openai åº“ï¼Œè¯·å‚è€ƒ README.md ä¸­çš„è¯´æ˜ ä»¥åŠdotenv æ–‡ä»¶é…ç½®è¯´æ˜
"""</span>
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama
<span class="hljs-keyword">from</span> langchain_classic.chains <span class="hljs-keyword">import</span> ConversationChain
<span class="hljs-keyword">from</span> langchain_classic.memory <span class="hljs-keyword">import</span> ConversationBufferMemory <span class="hljs-comment"># å¯¹è¯è®°å¿†</span>

<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent<span class="hljs-comment"># from dotenv import load_dotenv</span>
<span class="hljs-comment"># load_dotenv()</span>

<span class="hljs-keyword">def</span>  <span class="hljs-title function_">conversation_with_memory</span>():
    <span class="hljs-string">"""å¸¦æœ‰å¯¹è¯è®°å¿†çš„èŠå¤©ç¤ºä¾‹"""</span>

    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen3-coder:30b"</span>,
        temperature=<span class="hljs-number">0.7</span>,
    )

    <span class="hljs-comment"># åˆ›å»ºè®°å¿†ç»„ä»¶</span>
    <span class="hljs-comment"># CoversationBufferMemory ä¼šä¿å­˜å¯¹è¯çš„å†å²è®°å½•ï¼Œå¹¶åœ¨æ¯æ¬¡è°ƒç”¨æ¨¡å‹æ—¶å°†å…¶ä½œä¸ºä¸Šä¸‹æ–‡ä¼ é€’</span>
    memory = ConversationBufferMemory()

    <span class="hljs-comment"># åˆ›å»ºå¯¹è¯é“¾</span>
    conversation = ConversationChain(
        llm=llm,
        memory=memory,
        verbose = <span class="hljs-literal">True</span> <span class="hljs-comment"># æ˜¯å¦æ‰“å°è¯¦ç»†æ—¥å¿—</span>
     )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¤šè½®å¯¹è¯ï¼ˆå¸¦è®°å¿†ï¼‰ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-comment"># ç¬¬ä¸€æ¬¡å¯¹è¯</span>
    response1 =conversation.invoke(<span class="hljs-built_in">input</span>=<span class="hljs-string">"ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç”¨æˆ·ï¼šä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AIï¼š<span class="hljs-subst">{response1}</span>\n"</span>)
    


    <span class="hljs-comment"># ç¬¬äºŒæ¬¡å¯¹è¯</span>
    response2 = conversation.invoke(<span class="hljs-built_in">input</span>=<span class="hljs-string">"æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nç”¨æˆ·ï¼šæˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AIï¼š<span class="hljs-subst">{response2}</span>\n"</span>)

    <span class="hljs-comment">#ç¬¬ä¸‰æ¬¡å¯¹è¯ï¼šæ£€æŸ¥è®°å¿†æ˜¯å¦ç”Ÿæ•ˆ</span>
    response3 = conversation.invoke(<span class="hljs-built_in">input</span>=<span class="hljs-string">"ä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ"</span>)

    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”¨æˆ·ï¼šä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AIï¼š<span class="hljs-subst">{response3}</span>\n"</span>)


    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(memory.buffer) <span class="hljs-comment"># æ‰“å°å¯¹è¯å†å²</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)


<span class="hljs-comment"># å†™æ³•å¤ªæ—§äº† ä¸èƒ½ç”¨äº†</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">conversation_with_summary_memory</span>():
    <span class="hljs-string">"""ä½¿ç”¨æ‘˜è¦è®°å¿†çš„å¯¹è¯"""</span>
    
    <span class="hljs-comment"># åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(
        model=<span class="hljs-string">"qwen3-coder:30b"</span>,
        temperature=<span class="hljs-number">0.7</span>,
    )
    

    <span class="hljs-comment">#è‡ªåŠ¨æ€»ç»“å¯¹è¯å†å²ConversationSummaryMemory</span>
    <span class="hljs-comment"># memory.buffer å¯ä»¥è·å–å¯¹è¯å†å²ï¼Œä½†ä¼šè‡ªåŠ¨è¿›è¡Œæ€»ç»“ï¼Œ</span>
    <span class="hljs-comment">#é€‚åˆé•¿å¯¹è¯ï¼Œå¯ä»¥èŠ‚çœtoken</span>

    memory = ConversationSummaryMemory()



    <span class="hljs-comment"># åˆ›å»ºå¯¹è¯é“¾</span>
    conversation = ConversationChain(
        llm=llm,
        verbose = <span class="hljs-literal">True</span> <span class="hljs-comment"># æ˜¯å¦æ‰“å°è¯¦ç»†æ—¥å¿—</span>
     )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹å¤šè½®å¯¹è¯ï¼ˆä¸å¸¦è®°å¿†ï¼‰ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-comment"># æ¨¡æ‹Ÿå¤šè½®å¯¹è¯</span>
    conversation.predict(<span class="hljs-built_in">input</span>=<span class="hljs-string">"æˆ‘ä»Šå¤©å»äº†å…¬å›­ï¼Œçœ‹åˆ°äº†å¾ˆå¤šèŠ±ã€‚"</span>)
    conversation.predict(<span class="hljs-built_in">input</span>=<span class="hljs-string">"å…¬å›­é‡Œè¿˜æœ‰ä¸€ä¸ªæ¹–ï¼Œæ¹–é¢ä¸Šæœ‰å¾ˆå¤šé¸­å­ã€‚"</span>)
    conversation.predict(<span class="hljs-built_in">input</span>=<span class="hljs-string">"æˆ‘åœ¨å…¬å›­å¾…äº†ä¸¤ä¸ªå°æ—¶ï¼Œæ„Ÿè§‰å¾ˆæ”¾æ¾ã€‚"</span>) 
        <span class="hljs-comment"># æŸ¥çœ‹æ‘˜è¦</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¯¹è¯æ‘˜è¦ï¼š"</span>)
    <span class="hljs-built_in">print</span>(memory.buffer)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">conversation_v1_modern</span>():
    <span class="hljs-string">"""LangChain v1 æ ‡å‡†å†™æ³• (ä½¿ç”¨ LangGraph)"""</span>
    
    <span class="hljs-comment"># 1. åˆå§‹åŒ–æ¨¡å‹</span>
    llm = ChatOllama(model=<span class="hljs-string">"qwen3-coder:30b"</span>, temperature=<span class="hljs-number">0.7</span>)

    <span class="hljs-comment"># 2. åˆå§‹åŒ–è®°å¿†ä¿å­˜å™¨ (Checkpointer)</span>
    <span class="hljs-comment"># v1 ä¸å†åŒºåˆ† "Buffer" è¿˜æ˜¯ "Summary"ï¼Œå®ƒç›´æ¥æŠŠçŠ¶æ€å­˜åˆ°è¿™é‡Œ</span>
    memory = MemorySaver()

    <span class="hljs-comment"># 3. åˆ›å»º Agent (æˆ–è€…ç®€å•çš„å›¾)</span>
    <span class="hljs-comment"># create_agent è‡ªå¸¦äº†æ¶ˆæ¯ç®¡ç†å¾ªç¯</span>
    agent = create_agent(model=llm, tools=[], checkpointer=memory)

    <span class="hljs-comment"># 4. è®¾å®šçº¿ç¨‹ ID (ç±»ä¼¼äºç”¨æˆ· IDï¼Œç”¨äºåŒºåˆ†ä¸åŒå¯¹è¯çš„è®°å¿†)</span>
    config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"user_001"</span>}}

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹ LangGraph å¯¹è¯ (è‡ªåŠ¨æŒä¹…åŒ–)ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)

    <span class="hljs-comment"># 5. ç¬¬ä¸€è½®</span>
    input_msg = <span class="hljs-string">"æˆ‘ä»Šå¤©å»äº†å…¬å›­ï¼Œçœ‹åˆ°äº†å¾ˆå¤šèŠ±ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"User: <span class="hljs-subst">{input_msg}</span>"</span>)
    <span class="hljs-comment"># invoke ä¼šè‡ªåŠ¨è¯»å– thread_id å¯¹åº”çš„å†å²ï¼Œæ‹¼æ¥åˆ° prompt ä¸­</span>
    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> agent.stream({<span class="hljs-string">"messages"</span>: [HumanMessage(content=input_msg)]}, config=config):
        <span class="hljs-keyword">if</span> <span class="hljs-string">"agent"</span> <span class="hljs-keyword">in</span> event:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI: <span class="hljs-subst">{event[<span class="hljs-string">'agent'</span>][<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content}</span>"</span>)

    <span class="hljs-comment"># 6. ç¬¬äºŒè½® (å®ƒä¼šè‡ªåŠ¨è®°å¾—ä¸Šä¸€è½®)</span>
    input_msg = <span class="hljs-string">"æˆ‘åˆšæ‰è¯´æˆ‘åœ¨å“ªé‡Œï¼Ÿ"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\nUser: <span class="hljs-subst">{input_msg}</span>"</span>)
    <span class="hljs-keyword">for</span> event <span class="hljs-keyword">in</span> agent.stream({<span class="hljs-string">"messages"</span>: [HumanMessage(content=input_msg)]}, config=config):
        <span class="hljs-keyword">if</span> <span class="hljs-string">"agent"</span> <span class="hljs-keyword">in</span> event:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI: <span class="hljs-subst">{event[<span class="hljs-string">'agent'</span>][<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content}</span>"</span>)
            
    <span class="hljs-comment"># 7. æŸ¥çœ‹å½“å‰ä¿å­˜çš„çŠ¶æ€ (ç›¸å½“äºæ—§ç‰ˆçš„ memory.buffer)</span>
    snapshot = agent.get_state(config)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[å½“å‰è®°å¿†çŠ¶æ€]ï¼š"</span>)
    <span class="hljs-comment"># è¿™é‡Œä¿å­˜äº†å®Œæ•´çš„å¯¹è¯å†å²åˆ—è¡¨</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(snapshot.values[<span class="hljs-string">'messages'</span>]), <span class="hljs-string">"æ¡æ¶ˆæ¯è®°å½•"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
        conversation_with_memory()
        <span class="hljs-comment"># conversation_with_summary_memory()</span>
        conversation_v1_modern()
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">==================================================
å¼€å§‹å¤šè½®å¯¹è¯ï¼ˆå¸¦è®°å¿†ï¼‰ï¼š
==================================================


&gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not 
know the answer to a question, it truthfully says it does not know.

Current conversation:

Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜
AI:

&gt; Finished chain.

ç”¨æˆ·ï¼šä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜
AIï¼š{<span class="hljs-string">'input'</span>: <span class="hljs-string">'ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜'</span>, <span class="hljs-string">'history'</span>: <span class="hljs-string">''</span>, <span class="hljs-string">'response'</span>: <span class="hljs-string">'ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»
éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨å¾ˆå¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†
å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚'</span>}



&gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not 
know the answer to a question, it truthfully says it does not know.

Current conversation:
Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜
AI: ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰
ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨å¾ˆå¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚
Human: æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿
AI:

&gt; Finished chain.

ç”¨æˆ·ï¼šæˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿
AIï¼š{<span class="hljs-string">'input'</span>: <span class="hljs-string">'æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿'</span>, <span class="hljs-string">'history'</span>: <span class="hljs-string">'Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜\nAI: ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„
æ·±ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨ 
å¾ˆå¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚'</span>, <span class="hljs-string">'response'</span>: <span class="hljs-string">'å¾ˆé«˜å…´ä½ å¯¹AIå‘å±•è¶‹åŠ¿æ„Ÿå…´è¶£ï¼ŒAlbenï¼ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIçš„å…³æ³¨éå¸¸åŠ
æ—¶ï¼Œå› ä¸ºAIæ­£åœ¨æ·±åˆ»æ”¹å˜æ•´ä¸ªç¼–ç¨‹å’Œå¼€å‘é¢†åŸŸã€‚\n\nä»æˆ‘äº†è§£åˆ°çš„ä¿¡æ¯æ¥çœ‹ï¼ŒAIå‘å±•è¶‹åŠ¿ä¸»è¦é›†ä¸­åœ¨å‡ ä¸ªæ–¹é¢ï¼š\n\n**æŠ€æœ¯å±‚é¢**ï¼š\n- å¤§è¯­è¨€æ¨¡å‹æŒç»­è¿›åŒ–ï¼Œæ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€å¤„ç†èƒ½ 
åŠ›ä¸æ–­æå‡\n- AutoMLå’ŒAIGCï¼ˆAIç”Ÿæˆå†…å®¹ï¼‰æŠ€æœ¯å¿«é€Ÿå‘å±•\n- è¾¹ç¼˜AIè®¡ç®—å’Œæ¨¡å‹å‹ç¼©æŠ€æœ¯æ—¥è¶‹æˆç†Ÿ\n\n**åº”ç”¨å±‚é¢**ï¼š\n- AIåœ¨ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢åº”ç”¨è¶Šæ¥è¶Šå¹¿ 
æ³›\n- ä¼ä¸šçº§AIåº”ç”¨ä»è¯•ç‚¹èµ°å‘è§„æ¨¡åŒ–éƒ¨ç½²\n- AIä¸å„è¡Œä¸šæ·±åº¦èåˆï¼Œæ¯”å¦‚åŒ»ç–—ã€é‡‘èã€åˆ¶é€ ç­‰\n\n**å¯¹å¼€å‘è€…çš„å½±å“**ï¼š\n- ç¼–ç¨‹å·¥å…·å’ŒIDEæ­£åœ¨é›†æˆæ›´å¤šAIè¾…åŠ©åŠŸèƒ½\n- ä½ä»£ç /æ— ä»£ 
ç å¹³å°å€ŸåŠ©AIæŠ€æœ¯å¿«é€Ÿæ™®åŠ\n- å¼€å‘è€…éœ€è¦æŒæ¡AIç›¸å…³çš„æŠ€èƒ½ï¼Œå¦‚æ¨¡å‹å¾®è°ƒã€Promptå·¥ç¨‹ç­‰\n\nä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è®¤ä¸ºAIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹å…³æ³¨ï¼Ÿæˆ–è€…ä½ å·²ç»åœ¨å“ªäº›å…·ä½“åœºæ™¯ä¸­å° 
è¯•è¿‡AIåº”ç”¨äº†ï¼Ÿ'</span>}



&gt; Entering new ConversationChain chain...
Prompt after formatting:
The following is a friendly conversation between a human and an AI. The AI is talkative and provides lots of specific details from its context. If the AI does not 
know the answer to a question, it truthfully says it does not know.

Current conversation:
Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜
AI: ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰
ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨å¾ˆå¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚
Human: æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿
AI: å¾ˆé«˜å…´ä½ å¯¹AIå‘å±•è¶‹åŠ¿æ„Ÿå…´è¶£ï¼ŒAlbenï¼ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIçš„å…³æ³¨éå¸¸åŠæ—¶ï¼Œå› ä¸ºAIæ­£åœ¨æ·±åˆ»æ”¹å˜æ•´ä¸ªç¼–ç¨‹å’Œå¼€å‘é¢†åŸŸã€‚

ä»æˆ‘äº†è§£åˆ°çš„ä¿¡æ¯æ¥çœ‹ï¼ŒAIå‘å±•è¶‹åŠ¿ä¸»è¦é›†ä¸­åœ¨å‡ ä¸ªæ–¹é¢ï¼š

**æŠ€æœ¯å±‚é¢**ï¼š
- å¤§è¯­è¨€æ¨¡å‹æŒç»­è¿›åŒ–ï¼Œæ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€å¤„ç†èƒ½åŠ›ä¸æ–­æå‡
- AutoMLå’ŒAIGCï¼ˆAIç”Ÿæˆå†…å®¹ï¼‰æŠ€æœ¯å¿«é€Ÿå‘å±•
- è¾¹ç¼˜AIè®¡ç®—å’Œæ¨¡å‹å‹ç¼©æŠ€æœ¯æ—¥è¶‹æˆç†Ÿ

**åº”ç”¨å±‚é¢**ï¼š
- AIåœ¨ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›
- ä¼ä¸šçº§AIåº”ç”¨ä»è¯•ç‚¹èµ°å‘è§„æ¨¡åŒ–éƒ¨ç½²
- AIä¸å„è¡Œä¸šæ·±åº¦èåˆï¼Œæ¯”å¦‚åŒ»ç–—ã€é‡‘èã€åˆ¶é€ ç­‰

**å¯¹å¼€å‘è€…çš„å½±å“**ï¼š
- ç¼–ç¨‹å·¥å…·å’ŒIDEæ­£åœ¨é›†æˆæ›´å¤šAIè¾…åŠ©åŠŸèƒ½
- ä½ä»£ç /æ— ä»£ç å¹³å°å€ŸåŠ©AIæŠ€æœ¯å¿«é€Ÿæ™®åŠ
- å¼€å‘è€…éœ€è¦æŒæ¡AIç›¸å…³çš„æŠ€èƒ½ï¼Œå¦‚æ¨¡å‹å¾®è°ƒã€Promptå·¥ç¨‹ç­‰

ä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è®¤ä¸ºAIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹å…³æ³¨ï¼Ÿæˆ–è€…ä½ å·²ç»åœ¨å“ªäº›å…·ä½“åœºæ™¯ä¸­å°è¯•è¿‡AIåº”ç”¨äº†ï¼Ÿ
Human: ä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ
AI:

&gt; Finished chain.
ç”¨æˆ·ï¼šä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ
AIï¼š{<span class="hljs-string">'input'</span>: <span class="hljs-string">'ä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ'</span>, <span class="hljs-string">'history'</span>: <span class="hljs-string">'Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜\nAI: ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„æ·±
ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨å¾ˆ 
å¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚\nHuman: æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿\nAI: å¾ˆé«˜å…´ä½ å¯¹AIå‘å±•è¶‹åŠ¿æ„Ÿå…´è¶£ï¼ŒAlben 
ï¼ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIçš„å…³æ³¨éå¸¸åŠæ—¶ï¼Œå› ä¸ºAIæ­£åœ¨æ·±åˆ»æ”¹å˜æ•´ä¸ªç¼–ç¨‹å’Œå¼€å‘é¢†åŸŸã€‚\n\nä»æˆ‘äº†è§£åˆ°çš„ä¿¡æ¯æ¥çœ‹ï¼ŒAIå‘å±•è¶‹åŠ¿ä¸»è¦é›†ä¸­åœ¨å‡ ä¸ªæ–¹é¢ï¼š\n\n**æŠ€æœ¯å±‚é¢**ï¼š\n- å¤§è¯­è¨€ 
æ¨¡å‹æŒç»­è¿›åŒ–ï¼Œæ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€å¤„ç†èƒ½åŠ›ä¸æ–­æå‡\n- AutoMLå’ŒAIGCï¼ˆAIç”Ÿæˆå†…å®¹ï¼‰æŠ€æœ¯å¿«é€Ÿå‘å±•\n- è¾¹ç¼˜AIè®¡ç®—å’Œæ¨¡å‹å‹ç¼©æŠ€æœ¯æ—¥è¶‹æˆç†Ÿ\n\n**åº”ç”¨å±‚é¢**ï¼š\n- AIåœ¨ä»£ç ç”Ÿæˆã€è‡ª 
åŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›\n- ä¼ä¸šçº§AIåº”ç”¨ä»è¯•ç‚¹èµ°å‘è§„æ¨¡åŒ–éƒ¨ç½²\n- AIä¸å„è¡Œä¸šæ·±åº¦èåˆï¼Œæ¯”å¦‚åŒ»ç–—ã€é‡‘èã€åˆ¶é€ ç­‰\n\n**å¯¹å¼€å‘è€…çš„å½±å“**ï¼š\n- ç¼–ç¨‹å·¥å…·å’ŒIDEæ­£
åœ¨é›†æˆæ›´å¤šAIè¾…åŠ©åŠŸèƒ½\n- ä½ä»£ç /æ— ä»£ç å¹³å°å€ŸåŠ©AIæŠ€æœ¯å¿«é€Ÿæ™®åŠ\n- å¼€å‘è€…éœ€è¦æŒæ¡AIç›¸å…³çš„æŠ€èƒ½ï¼Œå¦‚æ¨¡å‹å¾®è°ƒã€Promptå·¥ç¨‹ç­‰\n\nä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è®¤ä¸ºAIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹
å…³æ³¨ï¼Ÿæˆ–è€…ä½ å·²ç»åœ¨å“ªäº›å…·ä½“åœºæ™¯ä¸­å°è¯•è¿‡AIåº”ç”¨äº†ï¼Ÿ'</span>, <span class="hljs-string">'response'</span>: <span class="hljs-string">'æ˜¯çš„ï¼Œæˆ‘å½“ç„¶è®°å¾—ä½ çš„åå­—ï¼ä½ å«Albenï¼Œè€Œä¸”æˆ‘æ¸…æ¥šåœ°è®°å¾—ä½ æœ€è¿‘åœ¨ç ”ç©¶AIã€‚ä½ åˆšæ‰è¿˜è·Ÿæˆ‘åˆ†äº«äº†ä½ å¯¹AIå‘å±•è¶‹
åŠ¿çš„å…´è¶£ï¼Œè¿˜æåˆ°ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIæŠ€æœ¯çš„å„ä¸ªå±‚é¢éƒ½å¾ˆå…³æ³¨ï¼ŒåŒ…æ‹¬å¤§è¯­è¨€æ¨¡å‹ã€AutoMLã€AIGCã€è¾¹ç¼˜AIè®¡ç®—ç­‰æŠ€æœ¯å‘å±•ï¼Œä»¥åŠAIåœ¨ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢çš„åº” 
ç”¨ã€‚\n\nä½ ä¹‹å‰è¿˜æåˆ°ï¼Œä½ å¯¹AIå¯¹å¼€å‘è€…å½±å“çš„æ–¹é¢ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚ç¼–ç¨‹å·¥å…·é›†æˆAIè¾…åŠ©åŠŸèƒ½ã€ä½ä»£ç /æ— ä»£ç å¹³å°çš„å‘å±•ï¼Œä»¥åŠå¼€å‘è€…éœ€è¦æŒæ¡çš„AIç›¸å…³æŠ€èƒ½ç­‰ã€‚\n\nä½ å½“æ—¶è¿˜é—®æˆ‘ï¼Œ
ä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è§‰å¾—AIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹å…³æ³¨ï¼Ÿæˆ‘å°è±¡å¾ˆæ·±å‘¢ï¼'</span>}

==================================================
Human: ä½ å¥½ï¼Œæˆ‘æ˜¯Albenï¼Œæ˜¯ä¸€åèµ„æ·±ç¨‹åºå‘˜
AI: ä½ å¥½Albenï¼å¾ˆé«˜å…´è®¤è¯†ä½ è¿™ä½èµ„æ·±ç¨‹åºå‘˜ï¼ä½œä¸ºä¸€åèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ ä¸€å®šæœ‰å¾ˆå¤šä¸°å¯Œçš„ç¼–ç¨‹ç»éªŒå’ŒæŠ€å·§å§ã€‚æˆ‘å¾ˆå¥½å¥‡ä½ ä¸»è¦ä¸“æ³¨äºå“ªäº›ç¼–ç¨‹è¯­è¨€å’ŒæŠ€æœ¯é¢†åŸŸå‘¢ï¼Ÿæ˜¯åå‘åç«¯å¼€å‘ã€å‰
ç«¯å¼€å‘ï¼Œè¿˜æ˜¯å…¶ä»–ç‰¹å®šçš„æŠ€æœ¯æ–¹å‘ï¼Ÿæˆ‘ä½œä¸ºAIåŠ©æ‰‹ï¼Œè™½ç„¶åœ¨å¾ˆå¤šç¼–ç¨‹ç›¸å…³çš„è¯é¢˜ä¸Šéƒ½æœ‰æ‰€äº†è§£ï¼Œä½†å¾ˆæœŸå¾…å¬å¬ä½ ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜çš„å®é™…ç»éªŒå’Œè§è§£ã€‚
Human: æˆ‘æœ€è¿‘åœ¨ç ”ç©¶AIï¼Œæƒ³äº†è§£ä¸€ä¸‹AIçš„å‘å±•è¶‹åŠ¿
AI: å¾ˆé«˜å…´ä½ å¯¹AIå‘å±•è¶‹åŠ¿æ„Ÿå…´è¶£ï¼ŒAlbenï¼ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIçš„å…³æ³¨éå¸¸åŠæ—¶ï¼Œå› ä¸ºAIæ­£åœ¨æ·±åˆ»æ”¹å˜æ•´ä¸ªç¼–ç¨‹å’Œå¼€å‘é¢†åŸŸã€‚

ä»æˆ‘äº†è§£åˆ°çš„ä¿¡æ¯æ¥çœ‹ï¼ŒAIå‘å±•è¶‹åŠ¿ä¸»è¦é›†ä¸­åœ¨å‡ ä¸ªæ–¹é¢ï¼š

**æŠ€æœ¯å±‚é¢**ï¼š
- å¤§è¯­è¨€æ¨¡å‹æŒç»­è¿›åŒ–ï¼Œæ¨ç†èƒ½åŠ›å’Œå¤šæ¨¡æ€å¤„ç†èƒ½åŠ›ä¸æ–­æå‡
- AutoMLå’ŒAIGCï¼ˆAIç”Ÿæˆå†…å®¹ï¼‰æŠ€æœ¯å¿«é€Ÿå‘å±•
- è¾¹ç¼˜AIè®¡ç®—å’Œæ¨¡å‹å‹ç¼©æŠ€æœ¯æ—¥è¶‹æˆç†Ÿ

**åº”ç”¨å±‚é¢**ï¼š
- AIåœ¨ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢åº”ç”¨è¶Šæ¥è¶Šå¹¿æ³›
- ä¼ä¸šçº§AIåº”ç”¨ä»è¯•ç‚¹èµ°å‘è§„æ¨¡åŒ–éƒ¨ç½²
- AIä¸å„è¡Œä¸šæ·±åº¦èåˆï¼Œæ¯”å¦‚åŒ»ç–—ã€é‡‘èã€åˆ¶é€ ç­‰

**å¯¹å¼€å‘è€…çš„å½±å“**ï¼š
- ç¼–ç¨‹å·¥å…·å’ŒIDEæ­£åœ¨é›†æˆæ›´å¤šAIè¾…åŠ©åŠŸèƒ½
- ä½ä»£ç /æ— ä»£ç å¹³å°å€ŸåŠ©AIæŠ€æœ¯å¿«é€Ÿæ™®åŠ
- å¼€å‘è€…éœ€è¦æŒæ¡AIç›¸å…³çš„æŠ€èƒ½ï¼Œå¦‚æ¨¡å‹å¾®è°ƒã€Promptå·¥ç¨‹ç­‰

ä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è®¤ä¸ºAIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹å…³æ³¨ï¼Ÿæˆ–è€…ä½ å·²ç»åœ¨å“ªäº›å…·ä½“åœºæ™¯ä¸­å°è¯•è¿‡AIåº”ç”¨äº†ï¼Ÿ
Human: ä½ è¿˜è®°å¾—æˆ‘çš„åå­—å—ï¼Ÿæˆ‘æœ€è¿‘åœ¨ç ”ç©¶ä»€ä¹ˆ
AI: æ˜¯çš„ï¼Œæˆ‘å½“ç„¶è®°å¾—ä½ çš„åå­—ï¼ä½ å«Albenï¼Œè€Œä¸”æˆ‘æ¸…æ¥šåœ°è®°å¾—ä½ æœ€è¿‘åœ¨ç ”ç©¶AIã€‚ä½ åˆšæ‰è¿˜è·Ÿæˆ‘åˆ†äº«äº†ä½ å¯¹AIå‘å±•è¶‹åŠ¿çš„å…´è¶£ï¼Œè¿˜æåˆ°ä½œä¸ºèµ„æ·±ç¨‹åºå‘˜ï¼Œä½ å¯¹AIæŠ€æœ¯çš„å„ä¸ªå±‚é¢éƒ½å¾ˆå…³æ³¨
ï¼ŒåŒ…æ‹¬å¤§è¯­è¨€æ¨¡å‹ã€AutoMLã€AIGCã€è¾¹ç¼˜AIè®¡ç®—ç­‰æŠ€æœ¯å‘å±•ï¼Œä»¥åŠAIåœ¨ä»£ç ç”Ÿæˆã€è‡ªåŠ¨åŒ–æµ‹è¯•ã€æ™ºèƒ½è°ƒè¯•ç­‰æ–¹é¢çš„åº”ç”¨ã€‚

ä½ ä¹‹å‰è¿˜æåˆ°ï¼Œä½ å¯¹AIå¯¹å¼€å‘è€…å½±å“çš„æ–¹é¢ç‰¹åˆ«æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚ç¼–ç¨‹å·¥å…·é›†æˆAIè¾…åŠ©åŠŸèƒ½ã€ä½ä»£ç /æ— ä»£ç å¹³å°çš„å‘å±•ï¼Œä»¥åŠå¼€å‘è€…éœ€è¦æŒæ¡çš„AIç›¸å…³æŠ€èƒ½ç­‰ã€‚

ä½ å½“æ—¶è¿˜é—®æˆ‘ï¼Œä½œä¸ºç¨‹åºå‘˜ï¼Œä½ è§‰å¾—AIæŠ€æœ¯çš„å“ªä¸ªæ–¹é¢æœ€å€¼å¾—é‡ç‚¹å…³æ³¨ï¼Ÿæˆ‘å°è±¡å¾ˆæ·±å‘¢ï¼
==================================================
==================================================
å¼€å§‹ LangGraph å¯¹è¯ (è‡ªåŠ¨æŒä¹…åŒ–)ï¼š
==================================================
User: æˆ‘ä»Šå¤©å»äº†å…¬å›­ï¼Œçœ‹åˆ°äº†å¾ˆå¤šèŠ±ã€‚

User: æˆ‘åˆšæ‰è¯´æˆ‘åœ¨å“ªé‡Œï¼Ÿ

[å½“å‰è®°å¿†çŠ¶æ€]ï¼š
4 æ¡æ¶ˆæ¯è®°å½•
</code></pre>
<hr/>
<h4 data-id="heading-21">è¿›é˜¶ç¤ºä¾‹</h4>
<h4 data-id="heading-22">æ¡ˆä¾‹ 5ï¼šæ–‡æ¡£é—®ç­”ç³»ç»Ÿ</h4>
<blockquote>
<p>è¯¥ Demo æ˜¯ä¸€ä¸ª <strong>LangChain v1 LCEL</strong> çš„æ ‡å‡† RAG å®ç°ï¼Œä½¿ç”¨ <strong>Ollama</strong> è¿›è¡Œæœ¬åœ°éƒ¨ç½²ã€‚æœ‰äº›å°å‰æ</p>
</blockquote>
<h6 data-id="heading-23">å¿…è¦çš„å®‰è£…åŒ…</h6>
<p>ä¸ºäº†è¿è¡Œè¿™ä¸ªæœ¬åœ° RAG ç³»ç»Ÿï¼Œæ‚¨éœ€è¦å®‰è£…ä»¥ä¸‹ Python åŒ…ï¼Œå¹¶ç¡®ä¿æœ¬åœ° Ollama æœåŠ¡å·²å¯åŠ¨ä¸”æ¨¡å‹å·²æ‹‰å–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ ¸å¿ƒ LCEL ä¾èµ–é€šå¸¸éšå…¶ä»–åŒ…å®‰è£…ï¼Œä½†æˆ‘ä»¬æ˜ç¡®åˆ—å‡ºæ‰€éœ€åŠŸèƒ½åŒ…ï¼š</span>
pip install -U langchain-ollama langchain-community langchain-text-splitters
pip install -U chroma-db 
</code></pre>
<h4 data-id="heading-24">Ollama æ¨¡å‹å‡†å¤‡ (å‘½ä»¤è¡Œæ“ä½œ)</h4>
<p>ç¡®ä¿æ‚¨çš„ Ollama æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œå¹¶æ‹‰å–äº†ä»¥ä¸‹æ¨¡å‹ï¼š</p>
<ol>
<li>
<p><strong>åµŒå…¥æ¨¡å‹ (Embedding Model):</strong> ç”¨äºå‘é‡åŒ–æ–‡æ¡£ã€‚</p>
<p>Bash</p>
<pre><code class="hljs language-bash" lang="bash">ollama pull nomic-embed-text
</code></pre>
</li>
<li>
<p><strong>èŠå¤©æ¨¡å‹ (Chat Model):</strong> ç”¨äºé—®ç­”ç”Ÿæˆã€‚</p>
<p>Bash</p>
<pre><code class="hljs language-bash" lang="bash">ollama pull qwen2.5:7b
æœ‰æ¡ä»¶çš„
ollma pull qwen3-coder:30b
</code></pre>
<p>å› ä¸ºæˆ‘è¿™é‡Œæœ‰ä¸¤å¥—ç¯å¢ƒ Mac 7b Windowså°±ç”¨30bæ‰€ä»¥ä¼šå‡ºç°ä¸Šä¸‹çš„demo ä½¿ç”¨çš„æ¨¡å‹å‡ºç°äº›è®¸çš„å‡ºå…¥ï¼Œè¿™ç‚¹åœ¨è¿™é‡Œä¹Ÿåšä¸€ä¸ªè¯´æ˜ï¼Œé˜²æ­¢çœ‹ç€äº›çš„æœ‹å‹å‡ºç°ä¸€äº›å›°æƒ‘ã€‚</p>
<hr/>
</li>
</ol>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo5_document_qa.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æ¡ˆä¾‹ 5ï¼šæ–‡æ¡£é—®ç­”ç³»ç»Ÿ (Ollama çº¯æœ¬åœ° RAG ç‰ˆæœ¬)
Embedding å’Œ Chat æ¨¡å‹å‡ä½¿ç”¨ Ollamaã€‚

è¯·ç¡®ä¿å·²åœ¨ Ollama ä¸­æ‹‰å–äº†åµŒå…¥æ¨¡å‹ (å¦‚ nomic-embed-text)ã€‚
è¿è¡Œå‘½ä»¤ç¤ºä¾‹ï¼šollama pull nomic-embed-text
"""</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-comment"># from dotenv import load_dotenv # âŒ ä¸å†éœ€è¦ï¼Œå› ä¸ºæ²¡æœ‰å¤–éƒ¨ API Key</span>
<span class="hljs-comment"># import os # ä¿ç•™ï¼Œç”¨äºæ–‡ä»¶æ“ä½œ</span>

<span class="hljs-comment"># V1 æ ¸å¿ƒç»„ä»¶å¯¼å…¥ (æ¥è‡ª langchain_core)</span>
<span class="hljs-keyword">from</span> langchain_core.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate
<span class="hljs-keyword">from</span> langchain_core.runnables <span class="hljs-keyword">import</span> RunnablePassthrough
<span class="hljs-keyword">from</span> langchain_core.output_parsers <span class="hljs-keyword">import</span> StrOutputParser

<span class="hljs-comment"># V1 ä¸“ç”¨åŒ…å¯¼å…¥ (ä¿®æ­£äº† text_splitter çš„è·¯å¾„)</span>
<span class="hljs-keyword">from</span> langchain_text_splitters <span class="hljs-keyword">import</span> RecursiveCharacterTextSplitter 

<span class="hljs-comment"># V1 ç¤¾åŒº/æŠ€æœ¯ç»„ä»¶å¯¼å…¥</span>
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama, OllamaEmbeddings <span class="hljs-comment"># âœ… æ–°å¢ OllamaEmbeddings </span>
<span class="hljs-comment"># from langchain_openai import OpenAIEmbeddings # âŒ ä¸å†éœ€è¦</span>

<span class="hljs-keyword">from</span> langchain_community.vectorstores <span class="hljs-keyword">import</span> Chroma 
<span class="hljs-keyword">from</span> langchain_community.document_loaders <span class="hljs-keyword">import</span> TextLoader

<span class="hljs-comment"># load_dotenv() # âŒ ä¸å†éœ€è¦åŠ è½½ .env æ–‡ä»¶</span>

<span class="hljs-comment"># --- è¾…åŠ©å‡½æ•°ï¼šæ ¼å¼åŒ–æ–‡æ¡£ (å–ä»£ chain_type="stuff") ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">format_docs</span>(<span class="hljs-params">docs</span>):
    <span class="hljs-string">"""å°†æ£€ç´¢åˆ°çš„æ–‡æ¡£åˆ—è¡¨æ ¼å¼åŒ–ä¸ºä¸€ä¸ªå•ç‹¬çš„å­—ç¬¦ä¸²ï¼Œç”¨äºæ³¨å…¥ Promptã€‚"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">"\n\n"</span>.join(doc.page_content <span class="hljs-keyword">for</span> doc <span class="hljs-keyword">in</span> docs)

<span class="hljs-comment"># --- è¾…åŠ©å‡½æ•°ï¼šåˆ›å»ºç¤ºä¾‹æ–‡æ¡£ ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_sample_document</span>():
    <span class="hljs-comment"># ... (å‡½æ•°ä½“ä¸å†…å®¹ä¿æŒä¸å˜)</span>
    content = <span class="hljs-string">"""
    Python æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚
    Python çš„è®¾è®¡å“²å­¦å¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚
    
    Python å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š
    1. ç®€å•æ˜“å­¦ï¼šPython çš„è¯­æ³•ç®€æ´æ˜äº†ï¼Œé€‚åˆåˆå­¦è€…ã€‚
    2. åŠŸèƒ½å¼ºå¤§ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
    3. è·¨å¹³å°ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
    4. è§£é‡Šå‹è¯­è¨€ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
    5. é¢å‘å¯¹è±¡ï¼šæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ã€‚
    
    Python çš„åº”ç”¨é¢†åŸŸéå¸¸å¹¿æ³›ï¼š
    - Web å¼€å‘ï¼šä½¿ç”¨ Djangoã€Flask ç­‰æ¡†æ¶
    - æ•°æ®ç§‘å­¦ï¼šä½¿ç”¨ NumPyã€Pandasã€Matplotlib ç­‰åº“
    - äººå·¥æ™ºèƒ½ï¼šä½¿ç”¨ TensorFlowã€PyTorch ç­‰æ¡†æ¶
    - è‡ªåŠ¨åŒ–è¿ç»´ï¼šä½¿ç”¨ Ansibleã€Fabric ç­‰å·¥å…·
    - çˆ¬è™«å¼€å‘ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“
    
    Python çš„ç‰ˆæœ¬å†å²ï¼š
    - Python 2.xï¼š2000 å¹´å‘å¸ƒï¼Œ2020 å¹´åœæ­¢ç»´æŠ¤
    - Python 3.xï¼š2008 å¹´å‘å¸ƒï¼Œæ˜¯å½“å‰ä¸»æµç‰ˆæœ¬
    """</span>
    
    doc_path = <span class="hljs-string">"python_intro.txt"</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(doc_path, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        f.write(content)
    
    <span class="hljs-keyword">return</span> doc_path

<span class="hljs-comment"># --- æ ¸å¿ƒ RAG é€»è¾‘å‡½æ•° (v1 LCEL) ---</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">document_qa_system_v1</span>():
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»ºæ–‡æ¡£é—®ç­”ç³»ç»Ÿ (Ollama çº¯æœ¬åœ°ç‰ˆ)..."</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    
    <span class="hljs-comment"># æ­¥éª¤ 1-2ï¼šåˆ›å»ºã€åŠ è½½ã€åˆ†å‰²æ–‡æ¡£</span>
    doc_path = create_sample_document()
    loader = TextLoader(doc_path, encoding=<span class="hljs-string">"utf-8"</span>)
    documents = loader.load()
    text_splitter = RecursiveCharacterTextSplitter(chunk_size=<span class="hljs-number">200</span>, chunk_overlap=<span class="hljs-number">50</span>)
    texts = text_splitter.split_documents(documents)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ“ å·²åˆ†å‰²æ–‡æ¡£ï¼Œå…± <span class="hljs-subst">{<span class="hljs-built_in">len</span>(texts)}</span> ä¸ªç‰‡æ®µ"</span>)
    
    <span class="hljs-comment"># æ­¥éª¤ 3ï¼šåˆ›å»ºå‘é‡å­˜å‚¨å’Œæ£€ç´¢å™¨</span>
    <span class="hljs-comment"># ğŸŒŸ å…³é”®ä¿®æ”¹ï¼šä½¿ç”¨ OllamaEmbeddings</span>
    <span class="hljs-comment"># è¯·ç¡®ä¿ 'nomic-embed-text' (æˆ–ä½ é€‰æ‹©çš„ä»»ä½• Ollama åµŒå…¥æ¨¡å‹) å·²æ‹‰å–</span>
    embeddings = OllamaEmbeddings(model=<span class="hljs-string">"nomic-embed-text"</span>) 
    
    vectorstore = Chroma.from_documents(documents=texts, embedding=embeddings)
    retriever = vectorstore.as_retriever(search_kwargs={<span class="hljs-string">"k"</span>: <span class="hljs-number">3</span>})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ å·²åˆ›å»ºå‘é‡å­˜å‚¨å’Œæ£€ç´¢å™¨ (ä½¿ç”¨ Ollama Embedding)"</span>)
    
    <span class="hljs-comment"># æ­¥éª¤ 4ï¼šå®šä¹‰ LLM å’Œ Prompt</span>
    llm = ChatOllama(model=<span class="hljs-string">"qwen3-coder:30b"</span>, temperature=<span class="hljs-number">0</span>) <span class="hljs-comment"># Ollama Chat Model ä¿æŒä¸å˜</span>
    
    prompt = ChatPromptTemplate.from_template(<span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é—®ç­”åŠ©æ‰‹ï¼Œè¯·åŸºäºæä¾›çš„ä¸Šä¸‹æ–‡ (Context) æ¥å›ç­”é—®é¢˜ (Question)ã€‚
        å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰è¶³å¤Ÿçš„ä¿¡æ¯ï¼Œè¯·è¯´æ˜ä½ æ— æ³•æ‰¾åˆ°ç›¸å…³ä¿¡æ¯ã€‚
        
        ---
        Context:
        {context}
        ---
        
        Question: {question}
        """</span>)

    <span class="hljs-comment"># æ­¥éª¤ 5-7ï¼šæ„å»º LCEL Chain å’Œæ‰§è¡Œé€»è¾‘ (ä¿æŒä¸å˜)</span>
    
    rag_chain_core = (
        RunnablePassthrough.assign(
            context=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-string">"context"</span>]
        )
        | prompt
        | llm
        | StrOutputParser()
    )

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_source_and_answer</span>(<span class="hljs-params">query: <span class="hljs-built_in">str</span></span>):
        source_documents = retriever.invoke(query)
        chain_input = {
            <span class="hljs-string">"question"</span>: query,
            <span class="hljs-string">"context"</span>: format_docs(source_documents)
        }
        result = rag_chain_core.invoke(chain_input)
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"query"</span>: query,
            <span class="hljs-string">"result"</span>: result,
            <span class="hljs-string">"source_documents"</span>: source_documents,
        }
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ å·²åˆ›å»º LCEL RAG åŒ…è£…å‡½æ•°"</span>)

    <span class="hljs-comment"># è¿›è¡Œé—®ç­”</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹é—®ç­”ï¼š"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    
    questions = [
        <span class="hljs-string">"Python æ˜¯è°å‘æ˜çš„ï¼Ÿ"</span>,
        <span class="hljs-string">"Python æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ"</span>,
        <span class="hljs-string">"Python å¯ä»¥ç”¨äºå“ªäº›é¢†åŸŸï¼Ÿ"</span>,
        <span class="hljs-string">"Python 2 ä»€ä¹ˆæ—¶å€™åœæ­¢ç»´æŠ¤çš„ï¼Ÿ"</span>
    ]
    
    <span class="hljs-keyword">for</span> question <span class="hljs-keyword">in</span> questions:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\né—®é¢˜ï¼š<span class="hljs-subst">{question}</span>"</span>)
        result = get_source_and_answer(question)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç­”æ¡ˆï¼š<span class="hljs-subst">{result[<span class="hljs-string">'result'</span>]}</span>"</span>)
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nå¼•ç”¨çš„æ–‡æ¡£ç‰‡æ®µï¼š"</span>)
        <span class="hljs-keyword">for</span> i, doc <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(result[<span class="hljs-string">'source_documents'</span>], <span class="hljs-number">1</span>):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  ç‰‡æ®µ <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{doc.page_content[:<span class="hljs-number">100</span>]}</span>..."</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">50</span>)
        
    <span class="hljs-comment"># æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
    os.remove(doc_path)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nâœ“ å·²æ¸…ç†ä¸´æ—¶æ–‡ä»¶"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    document_qa_system_v1()
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">==================================================
åˆ›å»ºæ–‡æ¡£é—®ç­”ç³»ç»Ÿ (Ollama çº¯æœ¬åœ°ç‰ˆ)...
==================================================
âœ“ å·²åˆ†å‰²æ–‡æ¡£ï¼Œå…± 4 ä¸ªç‰‡æ®µ
âœ“ å·²åˆ›å»ºå‘é‡å­˜å‚¨å’Œæ£€ç´¢å™¨ (ä½¿ç”¨ Ollama Embedding)
âœ“ å·²åˆ›å»º LCEL RAG åŒ…è£…å‡½æ•°

==================================================
å¼€å§‹é—®ç­”ï¼š
==================================================

é—®é¢˜ï¼šPython æ˜¯è°å‘æ˜çš„ï¼Ÿ
ç­”æ¡ˆï¼šæ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒPython æ˜¯ç”± Guido van Rossum å‘æ˜çš„ã€‚ä»–åœ¨ 1991 å¹´é¦–æ¬¡å‘å¸ƒäº†è¿™é—¨ç¼–ç¨‹è¯­è¨€ã€‚

å¼•ç”¨çš„æ–‡æ¡£ç‰‡æ®µï¼š
  ç‰‡æ®µ 1ï¼šPython æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚
    Python çš„è®¾è®¡å“²å­¦å¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚    
    
  ...
  ç‰‡æ®µ 2ï¼š- çˆ¬è™«å¼€å‘ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“
    
    Python çš„ç‰ˆæœ¬å†å²ï¼š
    - Python 2.xï¼š2000 å¹´å‘å¸ƒï¼Œ2020 å¹´åœæ­¢ç»´æŠ¤
    - ...
  ç‰‡æ®µ 3ï¼š2. åŠŸèƒ½å¼ºå¤§ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
    3. è·¨å¹³å°ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
    4. è§£é‡Šå‹è¯­è¨€ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
    5....
--------------------------------------------------

é—®é¢˜ï¼šPython æœ‰å“ªäº›ç‰¹ç‚¹ï¼Ÿ
ç­”æ¡ˆï¼šæ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡ï¼ŒPython å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

1. **ç®€å•æ˜“å­¦**ï¼šPython çš„è¯­æ³•ç®€æ´æ˜äº†ï¼Œé€‚åˆåˆå­¦è€…ã€‚
2. **åŠŸèƒ½å¼ºå¤§**ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
3. **è·¨å¹³å°**ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
4. **è§£é‡Šå‹è¯­è¨€**ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
5. **é¢å‘å¯¹è±¡**ï¼šæ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹èŒƒå¼ã€‚
6. **ä»£ç å¯è¯»æ€§å¼º**ï¼šå¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚

è¿™äº›ç‰¹ç‚¹ä½¿å¾— Python æˆä¸ºä¸€é—¨æ—¢æ˜“äºå­¦ä¹ åˆåŠŸèƒ½å¼ºå¤§çš„ç¼–ç¨‹è¯­è¨€ã€‚

å¼•ç”¨çš„æ–‡æ¡£ç‰‡æ®µï¼š
  ç‰‡æ®µ 1ï¼šPython æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚
    Python çš„è®¾è®¡å“²å­¦å¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚

  ...
  ç‰‡æ®µ 2ï¼š- çˆ¬è™«å¼€å‘ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“

    Python çš„ç‰ˆæœ¬å†å²ï¼š
    - Python 2.xï¼š2000 å¹´å‘å¸ƒï¼Œ2020 å¹´åœæ­¢ç»´æŠ¤
    - ...
  ç‰‡æ®µ 3ï¼š2. åŠŸèƒ½å¼ºå¤§ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
    3. è·¨å¹³å°ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
    4. è§£é‡Šå‹è¯­è¨€ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
    5....
--------------------------------------------------

é—®é¢˜ï¼šPython å¯ä»¥ç”¨äºå“ªäº›é¢†åŸŸï¼Ÿ
ç­”æ¡ˆï¼šæ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒPython å¯ä»¥ç”¨äºä»¥ä¸‹é¢†åŸŸï¼š

1. **Web å¼€å‘**ï¼šä½¿ç”¨ Djangoã€Flask ç­‰æ¡†æ¶
2. **çˆ¬è™«å¼€å‘**ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“

æ­¤å¤–ï¼Œè™½ç„¶ä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰æ˜ç¡®æåˆ°ï¼Œä½†æ ¹æ® Python çš„ç‰¹ç‚¹ï¼ˆå¦‚åŠŸèƒ½å¼ºå¤§ã€è·¨å¹³å°ã€è§£é‡Šå‹è¯­è¨€ã€é¢å‘å¯¹è±¡ç­‰ï¼‰ï¼Œå®ƒè¿˜å¯ä»¥åº”ç”¨äºï¼š
- æ•°æ®åˆ†æå’Œç§‘å­¦è®¡ç®—
- äººå·¥æ™ºèƒ½å’Œæœºå™¨å­¦ä¹ 
- è‡ªåŠ¨åŒ–è„šæœ¬
- è½¯ä»¶å¼€å‘
- ç½‘ç»œç¼–ç¨‹ç­‰

ä¸è¿‡ï¼ŒåŸºäºä¸Šä¸‹æ–‡ç›´æ¥æä¾›çš„ä¿¡æ¯ï¼Œä¸»è¦æåˆ°äº† Web å¼€å‘å’Œçˆ¬è™«å¼€å‘è¿™ä¸¤ä¸ªé¢†åŸŸã€‚

å¼•ç”¨çš„æ–‡æ¡£ç‰‡æ®µï¼š
  ç‰‡æ®µ 1ï¼šPython æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚
    Python çš„è®¾è®¡å“²å­¦å¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚

  ...
  ç‰‡æ®µ 2ï¼š- çˆ¬è™«å¼€å‘ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“

    Python çš„ç‰ˆæœ¬å†å²ï¼š
    - Python 2.xï¼š2000 å¹´å‘å¸ƒï¼Œ2020 å¹´åœæ­¢ç»´æŠ¤
    - ...
  ç‰‡æ®µ 3ï¼š2. åŠŸèƒ½å¼ºå¤§ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
    3. è·¨å¹³å°ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
    4. è§£é‡Šå‹è¯­è¨€ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
    5....
--------------------------------------------------

é—®é¢˜ï¼šPython 2 ä»€ä¹ˆæ—¶å€™åœæ­¢ç»´æŠ¤çš„ï¼Ÿ
ç­”æ¡ˆï¼šæ ¹æ®æä¾›çš„ä¸Šä¸‹æ–‡ï¼ŒPython 2.x ç‰ˆæœ¬äº **2020 å¹´åœæ­¢ç»´æŠ¤**ã€‚

å¼•ç”¨çš„æ–‡æ¡£ç‰‡æ®µï¼š
  ç‰‡æ®µ 1ï¼šPython æ˜¯ä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œç”± Guido van Rossum äº 1991 å¹´é¦–æ¬¡å‘å¸ƒã€‚
    Python çš„è®¾è®¡å“²å­¦å¼ºè°ƒä»£ç çš„å¯è¯»æ€§å’Œç®€æ´çš„è¯­æ³•ï¼Œä½¿ç”¨ç¼©è¿›æ¥è¡¨ç¤ºä»£ç å—ã€‚

  ...
  ç‰‡æ®µ 2ï¼š- çˆ¬è™«å¼€å‘ï¼šä½¿ç”¨ Scrapyã€BeautifulSoup ç­‰åº“

    Python çš„ç‰ˆæœ¬å†å²ï¼š
    - Python 2.xï¼š2000 å¹´å‘å¸ƒï¼Œ2020 å¹´åœæ­¢ç»´æŠ¤
    - ...
  ç‰‡æ®µ 3ï¼š2. åŠŸèƒ½å¼ºå¤§ï¼šæ‹¥æœ‰ä¸°å¯Œçš„æ ‡å‡†åº“å’Œç¬¬ä¸‰æ–¹åº“ã€‚
    3. è·¨å¹³å°ï¼šå¯ä»¥åœ¨ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œã€‚
    4. è§£é‡Šå‹è¯­è¨€ï¼šæ— éœ€ç¼–è¯‘ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œã€‚
    5....
--------------------------------------------------

âœ“ å·²æ¸…ç†ä¸´æ—¶æ–‡ä»¶

</code></pre>
<h5 data-id="heading-25">ğŸ“ ä»£ç ç»“æ„å’Œæµç¨‹è¯´æ˜</h5>
<ol>
<li><strong>æ•°æ®å‡†å¤‡ (Data Preparation):</strong>
<ul>
<li>ä½¿ç”¨ <code>TextLoader</code> åŠ è½½æœ¬åœ°æ–‡ä»¶ã€‚</li>
<li>ä½¿ç”¨ <code>RecursiveCharacterTextSplitter</code> å°†å¤§æ–‡æ¡£åˆ†å‰²æˆå°ç‰‡æ®µ (<code>texts</code>)ï¼Œç¡®ä¿ä¸Šä¸‹æ–‡ä¸ä¼šä¸¢å¤±ã€‚</li>
<li>ä½¿ç”¨ <code>OllamaEmbeddings</code> å°†è¿™äº›ç‰‡æ®µè½¬æ¢ä¸ºå‘é‡ï¼Œå¹¶å­˜å‚¨åˆ° <code>Chroma</code> æ•°æ®åº“ã€‚</li>
</ul>
</li>
<li><strong>RAG é“¾å®šä¹‰ (LCEL Chain Definition):</strong>
<ul>
<li><code>rag_chain_core</code> å®šä¹‰äº†é—®ç­”çš„é€»è¾‘æµï¼šå…ˆæ¥æ”¶è¾“å…¥-&gt; ç»“åˆ Prompt -&gt;è°ƒç”¨ LLM -&gt; è§£æè¾“å‡ºã€‚</li>
<li><code>get_source_and_answer</code> æ˜¯ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œè´Ÿè´£æ‰§è¡Œ <strong>æ£€ç´¢</strong> (<code>retriever.invoke(query)</code>)ï¼Œç„¶åå°†æ£€ç´¢ç»“æœï¼ˆ<code>context</code>ï¼‰å’ŒåŸå§‹é—®é¢˜ä¸€èµ·ä¼ å…¥æ ¸å¿ƒ LCEL Chain ä¸­ç”Ÿæˆç­”æ¡ˆã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph Prepare["å‡†å¤‡é˜¶æ®µ (ä»…è¿è¡Œä¸€æ¬¡)"]
        A[æ–‡æ¡£å†…å®¹] --&gt; B(æ–‡æœ¬åˆ†å‰²å™¨);
        B --&gt; C(OllamaEmbeddings);
        C --&gt; D[Chroma å‘é‡æ•°æ®åº“];
    end

    subgraph Execute["è¿è¡Œé˜¶æ®µ (æ¯è½®é—®ç­”)"]
        Q[ç”¨æˆ·é—®é¢˜ Query] --&gt; |1. è½¬æ¢ä¸ºå‘é‡| R(Retriever æ£€ç´¢å™¨);
        R --&gt; F{è·å– K ä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£ç‰‡æ®µ};
        Q --&gt; G[åŸå§‹é—®é¢˜];
        F --&gt; H[æ ¼å¼åŒ–å‡½æ•° format_docs];
        H --&gt; I{Context ä¸Šä¸‹æ–‡};
        I &amp; G --&gt; J[ChatPromptTemplate];
        J --&gt; K(ChatOllama LLM);
        K --&gt; L[StrOutputParser];
        L --&gt; M[æœ€ç»ˆç­”æ¡ˆ Answer];
    end
</code></pre>
<h6 data-id="heading-26">æ€»ç»“:</h6>
<p>é€šè¿‡ä»¥ä¸Šçš„å®è·µï¼Œä½ å°±å·²ç»å®Œæˆäº†ä¸€ä¸ªæœ€åŸºç¡€çš„çš„æœ¬åœ°RAGäº†ã€‚å¦‚æœä½ ä¹Ÿåœ¨å­¦ä¹ é‚£ä¹ˆæ˜¯ä¸æ˜¯ä¹Ÿä¼šè§‰å¾—æœ‰ç‚¹æ„æ€ã€‚</p>
<hr/>
<h4 data-id="heading-27">æ¡ˆä¾‹ 6ï¼šä½¿ç”¨ Agentï¼ˆä»£ç†ï¼‰</h4>
<p>é¦–å…ˆäº†è§£ä¸€ä¸‹å·¥ä½œçš„æµç¨‹:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">%% ReAct å¾ªç¯ï¼ˆLangChain v1 æœ€å°ç‰ˆï¼‰
flowchart TD
    A[ç”¨æˆ·æé—®] --&gt; B[create_agent å…¥å£]
    B --&gt; C{ReAct Prompt\n+ å·¥å…·æè¿°}
    C --&gt; D[LLM ç”Ÿæˆ Thought\n+ Action]
    D --&gt; E[å·¥å…·è°ƒç”¨]
    E --&gt; F[Observation]
    F --&gt; G{è¶³å¤Ÿä¿¡æ¯?}
    G --&gt;|å¦| D
    G --&gt;|æ˜¯| H[LLM ç”Ÿæˆ Final Answer]
    H --&gt; I[ç»“æœè¾“å‡º]
</code></pre>
<hr/>
<p>åˆ›å»ºæ–‡ä»¶ <code>demo6_agent.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
æ¡ˆä¾‹ 6ï¼šAgentï¼ˆä»£ç†ï¼‰å±•ç¤ºå¦‚ä½•è®© AI è‡ªä¸»ä½¿ç”¨å·¥å…·å®Œæˆä»»åŠ¡ (LangChain v1 æœ€ç»ˆç‰ˆ)

ç‰¹ç‚¹ï¼š
1. çº¯æœ¬åœ° Agentï¼Œä½¿ç”¨ Ollama qwen3-coder:30b æ¨¡å‹ã€‚
2. é‡‡ç”¨ç®€æ´çš„ LangChain v1 LCEL é£æ ¼ï¼šcreate_agent åç›´æ¥ invoke()ï¼Œæ— éœ€ AgentExecutorã€‚
"""</span>
<span class="hljs-comment"># ----------------------------------------------------</span>
<span class="hljs-comment"># å¯¼å…¥ä¿®æ­£ä¸æ ¸å¿ƒç»„ä»¶</span>
<span class="hljs-comment"># ----------------------------------------------------</span>
<span class="hljs-keyword">from</span> langchain_ollama <span class="hljs-keyword">import</span> ChatOllama             <span class="hljs-comment"># ä» Ollama åŒ…ä¸­å¯¼å…¥èŠå¤©æ¨¡å‹</span>
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent           <span class="hljs-comment"># V1 Agent æ ¸å¿ƒå·¥å‚å‡½æ•°ï¼Œç”¨äºåˆ›å»º Agent Runnable</span>
<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool               <span class="hljs-comment"># ç”¨äºè£…é¥° Python å‡½æ•°ï¼Œå°†å…¶æ³¨å†Œä¸º LLM å¯ç”¨çš„å·¥å…·</span>
<span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage    <span class="hljs-comment"># ç”¨äºæ ¼å¼åŒ–ç”¨æˆ·è¾“å…¥ï¼Œç¬¦åˆ V1 Agent çš„æ ‡å‡†è¾“å…¥æ ¼å¼</span>
<span class="hljs-keyword">import</span> math                                         <span class="hljs-comment"># ä¾›è®¡ç®—å™¨å·¥å…·ä½¿ç”¨çš„æ ‡å‡†æ•°å­¦åº“</span>
<span class="hljs-comment"># ----------------------------------------------------</span>
<span class="hljs-comment"># é Ollama ç¯å¢ƒç›¸å…³å†…å®¹ (å·²æ³¨é‡Š)</span>
<span class="hljs-comment"># from dotenv import load_dotenv </span>
<span class="hljs-comment"># load_dotenv() # å¦‚æœä½¿ç”¨ OpenAI ç­‰éœ€è¦ API Key çš„æœåŠ¡ï¼Œæ­¤å¤„ç”¨äºåŠ è½½ç¯å¢ƒå˜é‡</span>
<span class="hljs-comment"># ----------------------------------------------------</span>

<span class="hljs-comment"># --- 1. å·¥å…·å®šä¹‰ï¼šä½¿ç”¨ @tool è£…é¥°å™¨å®ç°è‡ªå®šä¹‰å·¥å…· ---</span>
<span class="hljs-comment"># å®ç°å·¥å…·çš„æ„ä¹‰åœ¨äºï¼Œè®© LLM å¯ä»¥è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œå®Œæˆç‰¹å®šçš„ä»»åŠ¡ï¼Œè¡¥é½ LLM çš„èƒ½åŠ›çŸ­æ¿ã€‚</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculator</span>(<span class="hljs-params">expression: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ç”¨äºæ‰§è¡Œæ•°å­¦è®¡ç®—ã€‚è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªæ•°å­¦è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š'2 + 2' æˆ– 'math.sqrt(16)'"""</span>
    <span class="hljs-comment"># è¿™ä¸ª Docstring ä¼šè¢« Agent è¯»å–ï¼Œä½œä¸ºå·¥å…·çš„ä½¿ç”¨è¯´æ˜</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># evalçš„ä½œç”¨æ˜¯æ‰§è¡Œå­—ç¬¦ä¸²å½¢å¼çš„è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›ç»“æœ</span>
        <span class="hljs-comment"># expressionæ˜¯ä¼ å…¥çš„å­—ç¬¦ä¸²å½¢å¼çš„å˜é‡</span>
        <span class="hljs-comment"># é™åˆ¶å‘½åç©ºé—´ï¼š{'__builtins__': None} ç¦ç”¨æ‰€æœ‰å†…ç½®å‡½æ•°ï¼Œ</span>
        <span class="hljs-comment"># ä»…å…è®¸è®¿é—® 'math' åº“ï¼Œä»¥æé«˜ eval çš„å®‰å…¨æ€§ï¼ˆè™½ç„¶ä»éœ€è°¨æ…ï¼‰</span>
        result = <span class="hljs-built_in">eval</span>(expression, {<span class="hljs-string">"__builtins__"</span>: <span class="hljs-literal">None</span>, <span class="hljs-string">"math"</span>: math}) 
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—ç»“æœï¼š<span class="hljs-subst">{result}</span>"</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—é”™è¯¯ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>

<span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ç”¨äºæŸ¥è¯¢åŸå¸‚çš„å¤©æ°”æƒ…å†µã€‚è¾“å…¥åº”è¯¥æ˜¯ä¸€ä¸ªåŸå¸‚åç§°ï¼Œä¾‹å¦‚ï¼š'åŒ—äº¬'"""</span>
    <span class="hljs-comment"># è¿™æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå·¥å…·ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ­¤å‡½æ•°ä½“åº”è¯¥åŒ…å«å¯¹å¤–éƒ¨å¤©æ°” API çš„è°ƒç”¨é€»è¾‘ã€‚</span>
    weather_data = {
        <span class="hljs-string">"åŒ—äº¬"</span>: <span class="hljs-string">"æ™´å¤©ï¼Œæ°”æ¸© 20Â°C"</span>,
        <span class="hljs-string">"ä¸Šæµ·"</span>: <span class="hljs-string">"å¤šäº‘ï¼Œæ°”æ¸© 25Â°C"</span>,
        <span class="hljs-string">"æ·±åœ³"</span>: <span class="hljs-string">"é›¨å¤©ï¼Œæ°”æ¸© 28Â°C"</span>
    }
    <span class="hljs-keyword">return</span> weather_data.get(city, <span class="hljs-string">f"æŠ±æ­‰ï¼Œæ²¡æœ‰ <span class="hljs-subst">{city}</span> çš„å¤©æ°”æ•°æ®"</span>)

<span class="hljs-comment"># --- 2. Agent é€»è¾‘ ---</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">agent_example_v1</span>():
    <span class="hljs-string">"""Agent ç¤ºä¾‹ (LangChain v1 æœ€å°å¯è¿è¡Œç‰ˆæœ¬)"""</span>
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ›å»º Agentï¼ˆLangChain v1 LCEL æœ€å°ç‰ˆï¼‰..."</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
        
    <span class="hljs-comment"># åˆå§‹åŒ– LLM æ¨¡å‹</span>
    <span class="hljs-comment"># ç¡®ä¿ Ollama æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œå¹¶ä¸” qwen3-coder:30b æ¨¡å‹å·²é€šè¿‡ ollama pull æ‹‰å–</span>
    llm = ChatOllama(model=<span class="hljs-string">"qwen3-coder:30b"</span>, temperature=<span class="hljs-number">0</span>) 
        
    <span class="hljs-comment"># å®šä¹‰å·¥å…·åˆ—è¡¨ï¼šå°†æ‰€æœ‰ç”¨ @tool è£…é¥°çš„å‡½æ•°æ”¶é›†èµ·æ¥</span>
    tools = [calculator, get_weather] 
        
    <span class="hljs-comment"># â‘¢ V1 æ ¸å¿ƒï¼šåˆ›å»º Agent Runnable</span>
    <span class="hljs-comment"># create_agent å†…éƒ¨ä¼šç”Ÿæˆä¸€ä¸ª ReAct æ¨¡å¼çš„ Promptï¼Œå¹¶å°† tools æ³¨å†Œç»™ LLMã€‚</span>
    <span class="hljs-comment"># å®ƒè¿”å›ä¸€ä¸ª Runnable å¯¹è±¡ï¼Œå¯ç›´æ¥è°ƒç”¨ã€‚</span>
    agent = create_agent(llm, tools)
        
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ“ Agent Runnable å·²åˆ›å»º\n"</span>)
        
    <span class="hljs-comment"># æµ‹è¯•ç”¨ä¾‹</span>
    test_cases = [
        <span class="hljs-string">"å¸®æˆ‘è®¡ç®— 15 çš„å¹³æ–¹æ ¹æ˜¯å¤šå°‘"</span>,
        <span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>,
        <span class="hljs-string">"ä¸Šæµ·çš„å¤©æ°”å¦‚ä½•ï¼Œæ¸©åº¦é€‚åˆå¤–å‡ºå—ï¼Ÿ"</span>,
        <span class="hljs-string">"è¯·è®¡ç®— (25 + 75) * 2 çš„ç»“æœ"</span>
    ]
        
    <span class="hljs-keyword">for</span> i, query <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(test_cases, <span class="hljs-number">1</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æµ‹è¯• <span class="hljs-subst">{i}</span>ï¼š<span class="hljs-subst">{query}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">50</span>)
                
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># ğŸŒŸ V1 è°ƒç”¨ï¼šç›´æ¥ invoke Runnable</span>
            <span class="hljs-comment"># è¾“å…¥æ ¼å¼ï¼š{"messages": [HumanMessage(content=query)]}</span>
            <span class="hljs-comment"># Agent ä¼šæ ¹æ®è¿™ä¸ªè¾“å…¥å¼€å§‹å®ƒçš„ ReAct å¾ªç¯ï¼ˆæ€è€ƒ-&gt;è°ƒç”¨å·¥å…·-&gt;è§‚å¯Ÿ-&gt;å†æ¬¡æ€è€ƒï¼‰</span>
            result = agent.invoke(
                {<span class="hljs-string">"messages"</span>: [HumanMessage(content=query)]}
            )
            
            <span class="hljs-comment"># æœ€ç»ˆç­”æ¡ˆï¼šAgent çš„è¾“å‡ºæ˜¯ä¸€ä¸ªåŒ…å«å¤šè½®æ€è€ƒå’Œæ¶ˆæ¯çš„å­—å…¸ã€‚</span>
            <span class="hljs-comment"># æœ€ç»ˆçš„ç­”æ¡ˆï¼ˆç”¨æˆ·çš„å›å¤ï¼‰ä½äº messages åˆ—è¡¨çš„æœ€åä¸€æ¡æ¶ˆæ¯ä¸­ã€‚</span>
            answer = result[<span class="hljs-string">"messages"</span>][-<span class="hljs-number">1</span>].content
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næœ€ç»ˆç­”æ¡ˆï¼š<span class="hljs-subst">{answer}</span>\n"</span>) 
            
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-comment"># æ•è·æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é”™è¯¯ï¼Œä¾‹å¦‚ Ollama æœåŠ¡ä¸­æ–­æˆ– LLM è§£æå¤±è´¥</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\næ‰§è¡Œå‡ºé”™ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>\n"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    agent_example_v1()
</code></pre>
<p><strong>è¾“å‡ºç»“æœï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">==================================================
åˆ›å»º Agentï¼ˆLangChain v1 LCEL æœ€å°ç‰ˆï¼‰...
==================================================
âœ“ Agent Runnable å·²åˆ›å»º

==================================================
æµ‹è¯• 1ï¼šå¸®æˆ‘è®¡ç®— 15 çš„å¹³æ–¹æ ¹æ˜¯å¤šå°‘
==================================================

æœ€ç»ˆç­”æ¡ˆï¼š15 çš„å¹³æ–¹æ ¹çº¦ç­‰äº 3.873ã€‚

==================================================
æµ‹è¯• 2ï¼šåŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ
==================================================

æœ€ç»ˆç­”æ¡ˆï¼šåŒ—äº¬ä»Šå¤©å¤©æ°”æ™´æœ—ï¼Œæ°”æ¸©ä¸º 20Â°Cã€‚

==================================================
æµ‹è¯• 3ï¼šä¸Šæµ·çš„å¤©æ°”å¦‚ä½•ï¼Œæ¸©åº¦é€‚åˆå¤–å‡ºå—ï¼Ÿ
==================================================

æœ€ç»ˆç­”æ¡ˆï¼šä¸Šæµ·ç›®å‰å¤©æ°”å¤šäº‘ï¼Œæ°”æ¸©ä¸º25Â°Cã€‚è¿™æ ·çš„æ¸©åº¦æ¯”è¾ƒèˆ’é€‚ï¼Œé€‚åˆå¤–å‡ºæ´»åŠ¨ã€‚ä¸è¿‡å»ºè®®æºå¸¦ä¸€ä»¶è–„å¤–å¥—ï¼Œä»¥é˜²å¤©æ°”å˜åŒ–æˆ–æ—©æ™šæ¸©å·®è¾ƒå¤§ã€‚

==================================================
æµ‹è¯• 4ï¼šè¯·è®¡ç®— (25 + 75) * 2 çš„ç»“æœ
==================================================

æœ€ç»ˆç­”æ¡ˆï¼šè®¡ç®—ç»“æœä¸º 200ã€‚


</code></pre>
<p><strong>æºç é€Ÿè§ˆ</strong></p>
<ul>
<li><code>@tool</code>ï¼šæŠŠæ™®é€šå‡½æ•°å˜æˆ LLM å¯è°ƒç”¨çš„ <strong>Action</strong></li>
<li><code>create_agent</code>ï¼šå°è£… ReAct Promptï¼Œè¿”å› <strong>Runnable</strong></li>
<li><code>invoke({"messages": [...]})</code>ï¼šv1 æ ‡å‡†è¾“å…¥ï¼Œ<strong>æœ€åä¸€æ¡æ¶ˆæ¯</strong>å³æœ€ç»ˆç­”æ¡ˆ</li>
</ul>
<p><strong>å°ç»“</strong></p>
<p><strong>demo6</strong> ç”¨æœ€å°‘çš„ä»£ç å±•ç¤ºäº† LangChain v1 çš„ ReAct Agent å…¨è²Œï¼šæœ¬åœ°æ¨¡å‹ã€è‡ªå®šä¹‰å·¥å…·ã€å³åˆ›å³è·‘ï¼Œå¤åˆ¶å³å¯ä½“éªŒâ€œè®© AI è‡ªå·±åŠ¨è„‘å­â€ã€‚</p>
<hr/>
<h4 data-id="heading-28">è¿è¡Œæ‰€æœ‰ç¤ºä¾‹</h4>
<p>åˆ›å»ºæ–‡ä»¶ <code>run_all_demos.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-string">"""
è¿è¡Œæ‰€æœ‰ç¤ºä¾‹
"""</span>

<span class="hljs-keyword">import</span> subprocess
<span class="hljs-keyword">import</span> sys

<span class="hljs-keyword">def</span> <span class="hljs-title function_">run_demo</span>(<span class="hljs-params">demo_name</span>):
    <span class="hljs-string">"""è¿è¡Œå•ä¸ªç¤ºä¾‹"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿è¡Œ <span class="hljs-subst">{demo_name}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span> + <span class="hljs-string">"\n"</span>)
    
    <span class="hljs-keyword">try</span>:
        subprocess.run([sys.executable, demo_name], check=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">except</span> subprocess.CalledProcessError <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¿è¡Œ <span class="hljs-subst">{demo_name}</span> æ—¶å‡ºé”™ï¼š<span class="hljs-subst">{e}</span>"</span>)
    <span class="hljs-keyword">except</span> FileNotFoundError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾ä¸åˆ°æ–‡ä»¶ï¼š<span class="hljs-subst">{demo_name}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    demos = [
        <span class="hljs-string">"demo1_basic.py"</span>,
        <span class="hljs-string">"demo2_prompt_template.py"</span>,
        <span class="hljs-string">"demo3_chains.py"</span>,
        <span class="hljs-string">"demo4_memory.py"</span>,
        <span class="hljs-string">"demo5_document_qa.py"</span>,
        <span class="hljs-string">"demo6_agent.py"</span>
    ]
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹è¿è¡Œæ‰€æœ‰ LangChain ç¤ºä¾‹..."</span>)
    
    <span class="hljs-keyword">for</span> demo <span class="hljs-keyword">in</span> demos:
        run_demo(demo)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰€æœ‰ç¤ºä¾‹è¿è¡Œå®Œæˆï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span> * <span class="hljs-number">70</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<hr/>
<h3 data-id="heading-29">æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šé¢çš„çš„å…­ä¸ªdemo ç›¸ä¿¡ä½ å¯¹langchinå·²ç»æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†äº†ï¼Œä¸ºäº†èŠ‚çº¦å¾ˆå¤šåŒå­¦çš„å­¦ä¹ æˆæœ¬ã€‚</p>
<p>å¦‚æœä½ çš„æœ¬åœ°åªæœ‰ä¸€å°Mac  å»ºè®®ä½ ä½¿ç”¨ollama qwen2.5:7b åŸºæœ¬è½»æ¾æ— æ³•å‹åŠ›ã€‚</p>
<p>é‚£ä¹ˆå¦‚æœä½ çš„é¢„ç®—æ¯”è¾ƒå……è¶³æˆ–è€…ä½ çš„æœ¬åœ°çš„é…ç½®æ¯”è¾ƒé«˜
å¯ä»¥å°è¯•å’Œæˆ‘ä½¿ç”¨åŒæ ·çš„æœ¬åœ°æ¨¡å‹qwen3-coder:30bã€‚</p>
<p><em><strong>6 ä¸ª demo è¦†ç›–æ ¸å¿ƒï¼šè°ƒç”¨ â†’ é“¾ â†’ è®°å¿† â†’ RAG â†’ Agent</strong></em></p>
<p><strong>ä¸‹ä¸€ç¯‡æˆ‘ä»¬è®²ã€Šlangchinæ·±å…¥ã€‹</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†è®©Claudeä¹±å†™ä»£ç äº†ï¼ä¸€ä¸ªé…ç½®æ–‡ä»¶è®©AIå‡†ç¡®ç‡æå‡10%]]></title>    <link>https://juejin.cn/post/7576861477267079187</link>    <guid>https://juejin.cn/post/7576861477267079187</guid>    <pubDate>2025-11-26T15:04:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576861477267079187" data-draft-id="7577042546094817322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†è®©Claudeä¹±å†™ä»£ç äº†ï¼ä¸€ä¸ªé…ç½®æ–‡ä»¶è®©AIå‡†ç¡®ç‡æå‡10%"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹,æ•æ·å¼€å‘"/> <meta itemprop="datePublished" content="2025-11-26T15:04:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†è®©Claudeä¹±å†™ä»£ç äº†ï¼ä¸€ä¸ªé…ç½®æ–‡ä»¶è®©AIå‡†ç¡®ç‡æå‡10%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T15:04:35.000Z" title="Wed Nov 26 2025 15:04:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec42c13f23f14ba1ba71ab6b7bedd781~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775779&amp;x-signature=rvQunk5btaRKYcHpLiS4xpeKV%2B8%3D" alt="CLAUDE.mdç¼–å†™æŠ€å·§.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæ»¡æ€€æœŸå¾…åœ°æ‰“å¼€Claude Codeï¼Œç»“æœå®ƒå¯¹ä½ çš„é¡¹ç›®ä¸€å¤´é›¾æ°´ï¼Ÿæ˜æ˜æ˜¯ä¸ªReacté¡¹ç›®ï¼Œå®ƒå´ç»™ä½ ç”ŸæˆVueçš„ä»£ç ï¼›æ˜æ˜æŠ€æœ¯æ ˆæ–‡æ¡£é‡Œå†™ç€ç”¨TypeScriptï¼Œå®ƒååè¾“å‡ºä¸€å †JavaScriptã€‚</p>
<p>æˆ‘ç¬¬ä¸€æ¬¡ç”¨Claude Codeçš„æ—¶å€™å°±è¸©äº†è¿™ä¸ªå‘ã€‚å½“æ—¶åœ¨åšä¸€ä¸ªNode.jsåç«¯é¡¹ç›®ï¼ŒClaudeè‡ªä½œä¸»å¼ ç”¨Expressé‡å†™äº†æˆ‘åŸºäºKoaçš„ä»£ç ï¼Œå¯¼è‡´æ•´ä¸ªä¸­é—´ä»¶ç³»ç»Ÿå…¨éƒ¨å¤±æ•ˆã€‚é‚£ä¸€åˆ»æˆ‘æ‰æ„è¯†åˆ°ï¼šAIå†èªæ˜ï¼Œä¹Ÿéœ€è¦ä½ å‘Šè¯‰å®ƒ"æ¸¸æˆè§„åˆ™"ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ¯”æƒ³è±¡ä¸­ç®€å•â€”â€”ä¸€ä¸ªå«CLAUDE.mdçš„é…ç½®æ–‡ä»¶ã€‚è¿™ä¸ªæ–‡ä»¶å°±åƒç»™AIå‘çš„ä¸€ä»½"é¡¹ç›®è¯´æ˜ä¹¦"ï¼Œå‘Šè¯‰å®ƒä½ çš„æŠ€æœ¯æ ˆã€ä»£ç è§„èŒƒã€å·¥ä½œæµç¨‹ã€‚æ ¹æ®Anthropicçš„å®é™…æµ‹è¯•ï¼Œé…ç½®è‰¯å¥½çš„CLAUDE.mdèƒ½è®©AIçš„ç¼–ç å‡†ç¡®ç‡æå‡5%-10%ï¼ŒåŒæ—¶å‡å°‘å¤§é‡æ— æ•ˆå»ºè®®ã€‚</p>
<p>ä»Šå¤©æˆ‘æƒ³åˆ†äº«7ä¸ªå®æˆ˜æŠ€å·§ï¼Œå¸®ä½ å†™å‡ºçœŸæ­£æœ‰æ•ˆçš„CLAUDE.mdã€‚è¿™äº›æŠ€å·§éƒ½æ˜¯æˆ‘è¸©è¿‡å‘åæ€»ç»“å‡ºæ¥çš„ï¼Œæ¯ä¸ªéƒ½é…æœ‰å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ç¤ºä¾‹ä»£ç ã€‚</p>
<h2 data-id="heading-1">CLAUDE.mdåˆ°åº•æ˜¯ä»€ä¹ˆ</h2>
<p>è¯´ç™½äº†ï¼ŒCLAUDE.mdå°±æ˜¯æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•çš„ä¸€ä¸ªMarkdownæ–‡ä»¶ï¼Œä¸“é—¨ç”¨æ¥æŒ‡å¯¼Claude Codeç†è§£ä½ çš„é¡¹ç›®ã€‚å®ƒç±»ä¼¼äº<code>.editorconfig</code>æˆ–è€…<code>README.md</code>ï¼Œä½†ä½œç”¨æ›´å…·ä½“â€”â€”å‘Šè¯‰AIè¯¥æ€ä¹ˆå¸®ä½ å†™ä»£ç ã€‚</p>
<p><strong>å·¥ä½œæœºåˆ¶å¾ˆç›´æ¥</strong>ï¼šå½“ä½ åœ¨é¡¹ç›®é‡Œä½¿ç”¨Claude Codeæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¯»å–è¿™ä¸ªæ–‡ä»¶ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£è¯´ä¼šè‡ªåŠ¨åŠ è½½ï¼Œä½†ç¤¾åŒºç»éªŒå‘Šè¯‰æˆ‘ä»¬æœ€å¥½ç”¨<code>/init</code>å‘½ä»¤æ˜¾å¼æé†’ä¸€æ¬¡ï¼Œç¡®ä¿AIå·²ç»"è¯»æ‡‚"ä½ çš„é…ç½®ã€‚æ–‡ä»¶å†…å®¹ä¼šè¢«åŠ è½½åˆ°AIçš„ä¸Šä¸‹æ–‡è®°å¿†é‡Œï¼Œå½±å“å®ƒåç»­æ‰€æœ‰çš„ä»£ç ç”Ÿæˆå’Œå»ºè®®ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªå…³é”®ç‰¹æ€§â€”â€”Claude Codeæ”¯æŒ<strong>å±‚çº§é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">project-root/

â”œâ”€â”€ CLAUDE.md Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># å…¨å±€é…ç½®ï¼ˆæ•´ä¸ªé¡¹ç›®é€šç”¨ï¼‰</span>
â”œâ”€â”€ frontend/
â”‚ Â  â””â”€â”€ .claude/
â”‚ Â  Â  Â  â””â”€â”€ CLAUDE.md Â  Â  <span class="hljs-comment"># å‰ç«¯ç‰¹å®šé…ç½®</span>
â””â”€â”€ backend/
Â  Â  â””â”€â”€ .claude/
Â  Â  Â  Â  â””â”€â”€ CLAUDE.md Â  Â  <span class="hljs-comment"># åç«¯ç‰¹å®šé…ç½®</span>
</code></pre>
<p>è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨æ ¹ç›®å½•å®šä¹‰é€šç”¨è§„èŒƒï¼Œç„¶ååœ¨å­æ¨¡å—é‡Œè¦†ç›–ç‰¹å®šè§„åˆ™ã€‚æ¯”å¦‚å‰ç«¯ç”¨Reactï¼Œåç«¯ç”¨Node.jsï¼Œå„è‡ªç»´æŠ¤è‡ªå·±çš„é…ç½®ã€‚</p>
<h2 data-id="heading-2">å››ä¸ªæ ¸å¿ƒæ€»åˆ™</h2>
<p>å†™CLAUDE.mdä¹‹å‰ï¼Œå…ˆè®°ä½è¿™å››ä¸ªåŸåˆ™ã€‚æˆ‘ä¸€å¼€å§‹æ²¡æ³¨æ„è¿™äº›ï¼Œå†™äº†300å¤šè¡Œçš„"å²è¯—çº§"é…ç½®æ–‡ä»¶ï¼Œç»“æœClaudeè¡¨ç°åè€Œå˜å·®äº†ã€‚</p>
<h3 data-id="heading-3">1. ç®€æ´æ€§ï¼š100è¡Œä»¥å†…åŸåˆ™</h3>
<p>è€å®è¯´ï¼Œè¿™æ˜¯æˆ‘ä»˜å‡ºä»£ä»·æ‰å­¦åˆ°çš„æ•™è®­ã€‚CLAUDE.mdä¸æ˜¯READMEï¼Œä¸éœ€è¦é•¿ç¯‡å¤§è®ºã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦ç®€æ´ï¼Ÿä»æŠ€æœ¯è§’åº¦è®²ï¼ŒClaudeçš„ä¸Šä¸‹æ–‡çª—å£è™½ç„¶å¾ˆå¤§ï¼Œä½†CLAUDE.mdä¼šå ç”¨ä½ çš„tokené…é¢ã€‚æ–‡ä»¶è¶Šé•¿ï¼Œç•™ç»™å®é™…ä»£ç åˆ†æçš„tokenå°±è¶Šå°‘ã€‚æ ¹æ®Arize AIçš„ç ”ç©¶ï¼Œ100è¡Œä»¥å†…çš„é…ç½®æ–‡ä»¶æ•ˆæœæœ€ä½³ã€‚</p>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼ˆå†—é•¿é‡å¤ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ç®€ä»‹</span>
è¿™æ˜¯ä¸€ä¸ªåŸºäºReactçš„å‰ç«¯é¡¹ç›®ã€‚æˆ‘ä»¬ä½¿ç”¨Reactæ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚
Reactæ˜¯ä¸€ä¸ªç”±Facebookå¼€å‘çš„JavaScriptåº“...ï¼ˆæ­¤å¤„çœç•¥200å­—Reactä»‹ç»ï¼‰

<span class="hljs-section"># æŠ€æœ¯æ ˆ</span>
æˆ‘ä»¬çš„æŠ€æœ¯æ ˆåŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š
<span class="hljs-bullet">-</span> React - è¿™æ˜¯æˆ‘ä»¬çš„UIæ¡†æ¶ï¼Œç‰ˆæœ¬æ˜¯18.2...
<span class="hljs-bullet">-</span> TypeScript - æˆ‘ä»¬ç”¨å®ƒæ¥åšç±»å‹æ£€æŸ¥...
</code></pre>
<p>âœ… <strong>æ­£ç¡®ç¤ºä¾‹</strong>ï¼ˆç²¾ç®€ç›´æ¥ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> React 18.2 (Hooksä¼˜å…ˆï¼Œé¿å…Classç»„ä»¶)
<span class="hljs-bullet">-</span> TypeScript (ä¸¥æ ¼æ¨¡å¼)
<span class="hljs-bullet">-</span> TailwindCSS (utilitiesä¼˜å…ˆ)

<span class="hljs-section"># ä»£ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> å‡½æ•°ç»„ä»¶ + è‡ªå®šä¹‰Hooks
<span class="hljs-bullet">-</span> Propsè§£æ„èµ‹å€¼
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨constï¼Œé¿å…let
</code></pre>
<p>çœ‹åˆ°åŒºåˆ«äº†å—ï¼Ÿç¬¬äºŒä¸ªç‰ˆæœ¬åªç”¨äº†60ä¸ªå­—ç¬¦å°±ä¼ è¾¾äº†åŒæ ·ç”šè‡³æ›´å¤šçš„æœ‰æ•ˆä¿¡æ¯ã€‚</p>
<h3 data-id="heading-4">2. ç‰¹å®šæ€§ï¼šè¯´äººè¯ï¼Œåˆ«æ¨¡ç³Š</h3>
<p>è¿™ä¸ªåŸåˆ™å¬èµ·æ¥ç®€å•ï¼Œä½†å¾ˆå®¹æ˜“çŠ¯é”™ã€‚</p>
<p>âŒ <strong>é”™è¯¯ç¤ºä¾‹</strong>ï¼ˆæ¨¡ç³Šä¸æ¸…ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä»£ç é£æ ¼</span>
<span class="hljs-bullet">-</span> ä¿æŒä»£ç ç®€æ´
<span class="hljs-bullet">-</span> ä½¿ç”¨æœ€ä½³å®è·µ
<span class="hljs-bullet">-</span> æ³¨æ„æ€§èƒ½ä¼˜åŒ–
</code></pre>
<p>è¿™ç§å†™æ³•ç­‰äºæ²¡å†™ã€‚ä»€ä¹ˆå«"ç®€æ´"ï¼Ÿä»€ä¹ˆå«"æœ€ä½³å®è·µ"ï¼ŸAIæ ¹æœ¬æ²¡æ³•æ‰§è¡Œã€‚</p>
<p>âœ… <strong>æ­£ç¡®ç¤ºä¾‹</strong>ï¼ˆå…·ä½“å¯æ‰§è¡Œï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-section"># ä»£ç é£æ ¼</span>
<span class="hljs-bullet">-</span> å•å‡½æ•°ä¸è¶…è¿‡50è¡Œï¼Œè¶…è¿‡åˆ™æ‹†åˆ†
<span class="hljs-bullet">-</span> APIè°ƒç”¨å¿…é¡»åŒ…å«é”™è¯¯å¤„ç†å’ŒloadingçŠ¶æ€
<span class="hljs-bullet">-</span> åˆ—è¡¨æ¸²æŸ“å¿…é¡»æ·»åŠ keyå±æ€§ï¼Œç”¨IDè€Œéindex
<span class="hljs-bullet">-</span> é¿å…åµŒå¥—ä¸‰å…ƒè¡¨è¾¾å¼ï¼Œæ”¹ç”¨if/elseæˆ–æ—©æœŸreturn
</code></pre>
<p>ç°åœ¨AIçŸ¥é“è¯¥åšä»€ä¹ˆäº†ã€‚æ¯æ¡è§„åˆ™éƒ½æ˜¯æ˜ç¡®çš„ã€å¯éªŒè¯çš„ã€‚</p>
<h3 data-id="heading-5">3. å¯è¿­ä»£æ€§ï¼šåˆ«æ€•æ”¹ï¼Œéšæ—¶æ›´æ–°</h3>
<p>æˆ‘è§è¿‡æœ‰å¼€å‘è€…åœ¨é¡¹ç›®åˆæœŸå†™äº†CLAUDE.mdï¼Œç„¶ååŠå¹´éƒ½ä¸ç¢°å®ƒã€‚ç»“æœé¡¹ç›®ä»Vue 2è¿ç§»åˆ°Vue 3äº†ï¼Œé…ç½®æ–‡ä»¶è¿˜åœ¨è¯´"ä½¿ç”¨Options API"ã€‚</p>
<p><strong>ç”¨#é”®å¿«é€Ÿæ›´æ–°</strong>ï¼šè¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„ä¸€ä¸ªæŠ€å·§ã€‚åœ¨Claude Codeé‡Œï¼ŒæŒ‰<code>#</code>é”®å¯ä»¥å¿«é€Ÿå¼•ç”¨å’Œç¼–è¾‘CLAUDE.mdã€‚å½“ä½ å‘ç°AIçš„è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸæ—¶ï¼Œç«‹åˆ»æ”¹é…ç½®ï¼Œä¸è¦æ‹–å»¶ã€‚</p>
<p>çœŸå®åœºæ™¯ï¼šä¸Šå‘¨æˆ‘åœ¨åšä¸€ä¸ªé¡¹ç›®ï¼ŒClaudeè€æ˜¯ç”¨<code>axios</code>ç”Ÿæˆä»£ç ï¼Œä½†æˆ‘ä»¬å›¢é˜Ÿå·²ç»ç»Ÿä¸€ç”¨<code>fetch</code> + è‡ªå®šä¹‰å°è£…ã€‚æˆ‘ç›´æ¥æŒ‰<code>#</code>é”®ï¼Œåœ¨CLAUDE.mdé‡ŒåŠ äº†ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># HTTPè¯·æ±‚</span>
<span class="hljs-bullet">-</span> ç»Ÿä¸€ä½¿ç”¨ <span class="hljs-code">`src/utils/request.ts`</span> å°è£…çš„fetch
<span class="hljs-bullet">-</span> ç¦æ­¢ç›´æ¥ä½¿ç”¨axiosæˆ–åŸç”Ÿfetch
</code></pre>
<p>ä¿å­˜åï¼ŒClaudeå°±å†ä¹Ÿæ²¡çŠ¯è¿‡è¿™ä¸ªé”™è¯¯ã€‚</p>
<h3 data-id="heading-6">4. å›¢é˜Ÿå…±äº«ï¼šçº³å…¥ç‰ˆæœ¬æ§åˆ¶</h3>
<p>è¿™æ¡å¾ˆå¤šäººä¼šå¿½ç•¥ã€‚CLAUDE.mdå¿…é¡»æäº¤åˆ°Gitä»“åº“ï¼Œå’Œ<code>.gitignore</code>ä¸€æ ·é‡è¦ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºä½ çš„é…ç½®ä»£è¡¨äº†å›¢é˜Ÿçš„ç¼–ç å…±è¯†ã€‚å¦‚æœæ¯ä¸ªäººæœ¬åœ°éƒ½æœ‰ä¸åŒç‰ˆæœ¬çš„CLAUDE.mdï¼ŒAIç»™å¼ ä¸‰ç”Ÿæˆçš„ä»£ç é£æ ¼å’Œç»™æå››ç”Ÿæˆçš„å®Œå…¨ä¸åŒï¼Œè¿™å°±ä¹±å¥—äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># .gitignore ä¸­ä¸è¦å¿½ç•¥CLAUDE.md</span>
<span class="hljs-comment"># âŒ é”™è¯¯åšæ³•</span>
*.md

<span class="hljs-comment"># âœ… æ­£ç¡®åšæ³•</span>
*.md
!CLAUDE.md
!README.md
</code></pre>
<p>è€Œä¸”è¦åœ¨Code Reviewæ—¶æ£€æŸ¥CLAUDE.mdçš„å˜æ›´ã€‚å¦‚æœæœ‰äººæ”¹äº†é…ç½®ï¼Œæ•´ä¸ªå›¢é˜Ÿéƒ½åº”è¯¥çŸ¥é“ã€‚</p>
<h2 data-id="heading-7">å¿…é¡»åŒ…å«çš„5ä¸ªå†…å®¹æ¨¡å—</h2>
<p>è¿™æ˜¯æˆ‘æ€»ç»“çš„æœ€å°å¯ç”¨é…ç½®ã€‚å°‘äº†è¿™äº›æ¨¡å—ï¼ŒCLAUDE.mdåŸºæœ¬æ²¡å•¥ç”¨ã€‚</p>
<h3 data-id="heading-8">1. æŠ€æœ¯æ ˆå£°æ˜</h3>
<p>å¿…é¡»æ˜ç¡®åˆ—å‡ºä½ ç”¨çš„æ¡†æ¶ã€åº“å’Œç‰ˆæœ¬ã€‚è¿™æ˜¯æœ€åŸºç¡€çš„ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># æŠ€æœ¯æ ˆ</span>
<span class="hljs-strong">**å‰ç«¯**</span>
<span class="hljs-bullet">-</span> Next.js 14 (App Router)
<span class="hljs-bullet">-</span> React 18 (Server Componentsä¼˜å…ˆ)
<span class="hljs-bullet">-</span> TypeScript 5.2
<span class="hljs-bullet">-</span> Tailwind CSS 3.4

<span class="hljs-strong">**åç«¯**</span>
<span class="hljs-bullet">-</span> Node.js 20 LTS
<span class="hljs-bullet">-</span> Express 4.18
<span class="hljs-bullet">-</span> Prisma ORM
<span class="hljs-bullet">-</span> PostgreSQL 15
</code></pre>
<p>æ³¨æ„æˆ‘å†™äº†ç‰ˆæœ¬å·ã€‚å¦‚æœä¸å†™ç‰ˆæœ¬ï¼ŒClaudeå¯èƒ½ç”¨æ—§APIç”Ÿæˆä»£ç ã€‚æ¯”å¦‚Next.js 13å’Œ14çš„è·¯ç”±å†™æ³•å®Œå…¨ä¸åŒï¼Œä¸æŒ‡å®šç‰ˆæœ¬å¾ˆå±é™©ã€‚</p>
<h3 data-id="heading-9">2. é¡¹ç›®ç»“æ„è¯´æ˜</h3>
<p>å‘Šè¯‰AIä½ çš„æ–‡ä»¶æ˜¯æ€ä¹ˆç»„ç»‡çš„ï¼Œè¿™æ ·å®ƒæ‰èƒ½æŠŠä»£ç æ”¾å¯¹ä½ç½®ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ç»“æ„</span>
src/
â”œâ”€â”€ app/ Â  Â  Â  Â  Â  Â  Â # Next.jsé¡µé¢è·¯ç”±
â”œâ”€â”€ components/ Â  Â  Â  # å¯å¤ç”¨UIç»„ä»¶
â”‚ Â  â”œâ”€â”€ ui/ Â  Â  Â  Â  Â # åŸºç¡€ç»„ä»¶(Button, Input)
â”‚ Â  â””â”€â”€ features/ Â  Â # ä¸šåŠ¡ç»„ä»¶(UserCard, OrderList)
â”œâ”€â”€ lib/ Â  Â  Â  Â  Â  Â  # å·¥å…·å‡½æ•°å’Œhooks
â”œâ”€â”€ services/ Â  Â  Â  Â # APIè°ƒç”¨å±‚
â””â”€â”€ types/ Â  Â  Â  Â  Â  # TypeScriptç±»å‹å®šä¹‰

<span class="hljs-section"># æ–‡ä»¶å‘½å</span>
<span class="hljs-bullet">-</span> ç»„ä»¶ï¼šPascalCase (UserProfile.tsx)
<span class="hljs-bullet">-</span> å·¥å…·å‡½æ•°ï¼šcamelCase (formatDate.ts)
<span class="hljs-bullet">-</span> å¸¸é‡ï¼šUPPER<span class="hljs-emphasis">_SNAKE_</span>CASE (API<span class="hljs-emphasis">_BASE_</span>URL)

</code></pre>
<p>æœ‰äº†è¿™ä¸ªï¼ŒClaudeå°±çŸ¥é“æ–°å»ºä¸€ä¸ªç”¨æˆ·å¡ç‰‡ç»„ä»¶åº”è¯¥æ”¾åœ¨<code>components/features/UserCard.tsx</code>ï¼Œè€Œä¸æ˜¯éšä¾¿æ‰¾ä¸ªåœ°æ–¹ã€‚</p>
<h3 data-id="heading-10">3. å¸¸ç”¨å‘½ä»¤</h3>
<p>è¿™éƒ¨åˆ†ç»å¸¸è¢«å¿½ç•¥ï¼Œä½†è¶…çº§æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å¼€å‘å‘½ä»¤</span>
npm run dev Â  Â  Â  Â  Â # å¯åŠ¨å¼€å‘æœåŠ¡å™¨(localhost:3000)
npm run build Â  Â  Â  Â # ç”Ÿäº§æ„å»º
npm run test Â  Â  Â  Â  # è¿è¡ŒJestæµ‹è¯•
npm run lint Â  Â  Â  Â  # ESLintæ£€æŸ¥
npm run type-check Â  # TypeScriptç±»å‹æ£€æŸ¥

<span class="hljs-section"># æ•°æ®åº“</span>
npx prisma studio Â  Â # æ‰“å¼€æ•°æ®åº“GUI
npx prisma migrate dev Â # è¿è¡Œæ•°æ®åº“è¿ç§»
</code></pre>
<p>ä¸ºä»€ä¹ˆè¦å†™è¿™ä¸ªï¼Ÿå› ä¸ºClaudeæœ‰æ—¶å€™éœ€è¦éªŒè¯ä»£ç æˆ–è€…è¿è¡Œæµ‹è¯•ï¼Œå‘Šè¯‰å®ƒæ­£ç¡®çš„å‘½ä»¤èƒ½é¿å…å¾ˆå¤šé—®é¢˜ã€‚</p>
<h3 data-id="heading-11">4. ä»£ç é£æ ¼è§„èŒƒ</h3>
<p>è¿™æ˜¯é‡å¤´æˆã€‚è¦å†™å¾—è¶³å¤Ÿå…·ä½“ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä»£ç è§„èŒƒ</span>
<span class="hljs-section">## Reactç»„ä»¶</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨å‡½æ•°ç»„ä»¶ + Hooksï¼Œç¦æ­¢Classç»„ä»¶
<span class="hljs-bullet">-</span> Propsç±»å‹å®šä¹‰åœ¨ç»„ä»¶ä¸Šæ–¹ï¼Œä½¿ç”¨interfaceè€Œétype
<span class="hljs-bullet">-</span> ç»„ä»¶å†…éƒ¨é¡ºåºï¼šPropså®šä¹‰ â†’ ç»„ä»¶å‡½æ•° â†’ å¯¼å‡º

<span class="hljs-section">## çŠ¶æ€ç®¡ç†</span>
<span class="hljs-bullet">-</span> æœ¬åœ°çŠ¶æ€ï¼šuseState/useReducer
<span class="hljs-bullet">-</span> æœåŠ¡å™¨çŠ¶æ€ï¼šTanStack Query
<span class="hljs-bullet">-</span> å…¨å±€çŠ¶æ€ï¼šZustand (é¿å…ä½¿ç”¨Context)

<span class="hljs-section">## é”™è¯¯å¤„ç†</span>
<span class="hljs-bullet">-</span> APIè°ƒç”¨å¿…é¡»try-catch
<span class="hljs-bullet">-</span> ç”¨æˆ·å¯è§é”™è¯¯ä½¿ç”¨toastæç¤º
<span class="hljs-bullet">-</span> å¼€å‘ç¯å¢ƒconsole.errorï¼Œç”Ÿäº§ç¯å¢ƒä¸ŠæŠ¥Sentry
</code></pre>
<h3 data-id="heading-12">5. å·¥ä½œæµå’Œé™åˆ¶</h3>
<p>å‘Šè¯‰AIä»€ä¹ˆèƒ½åšã€ä»€ä¹ˆä¸èƒ½åšã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å·¥ä½œæµ</span>
<span class="hljs-bullet">-</span> æ–°åŠŸèƒ½å¼€å‘ï¼šå…ˆå†™ç±»å‹å®šä¹‰ â†’ å†™ç»„ä»¶ â†’ å†™æµ‹è¯•
<span class="hljs-bullet">-</span> ä¿®Bugï¼šå…ˆå†™å¤ç°æµ‹è¯• â†’ ä¿®å¤ä»£ç  â†’ éªŒè¯æµ‹è¯•é€šè¿‡

<span class="hljs-section"># é™åˆ¶äº‹é¡¹</span>
<span class="hljs-bullet">-</span> âŒ ä¸è¦ä¿®æ”¹ <span class="hljs-code">`/prisma/schema.prisma`</span> (éœ€å›¢é˜Ÿè¯„å®¡)
<span class="hljs-bullet">-</span> âŒ ä¸è¦å®‰è£…æ–°ä¾èµ–åŒ… (éœ€åœ¨package.json reviewæ—¶è®¨è®º)
<span class="hljs-bullet">-</span> âŒ ä¸è¦ä¿®æ”¹ <span class="hljs-code">`/lib/auth/*`</span> (è®¤è¯é€»è¾‘æ•æ„Ÿ)
<span class="hljs-bullet">-</span> âœ… å¯ä»¥è‡ªç”±ä¿®æ”¹ <span class="hljs-code">`/components`</span> å’Œ <span class="hljs-code">`/app`</span> ä¸‹çš„ä¸šåŠ¡ä»£ç 
</code></pre>
<p>è¿™èƒ½é˜²æ­¢AI"å¥½å¿ƒåŠåäº‹"ï¼Œè¯¯æ”¹å…³é”®ä»£ç ã€‚</p>
<h2 data-id="heading-13">7ä¸ªè®©æ•ˆæœç¿»å€çš„å®æˆ˜æŠ€å·§</h2>
<h3 data-id="heading-14">æŠ€å·§1ï¼šç”¨SHOULD/MUSTå¼ºè°ƒä¼˜å…ˆçº§</h3>
<p>ä¸æ˜¯æ‰€æœ‰è§„åˆ™éƒ½åŒç­‰é‡è¦ã€‚ç”¨å…³é”®è¯åŒºåˆ†ä¼˜å…ˆçº§ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è§„èŒƒä¼˜å…ˆçº§</span>
<span class="hljs-strong">**MUST (å¿…é¡»éµå®ˆ)**</span>
<span class="hljs-bullet">-</span> MUST ä½¿ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼
<span class="hljs-bullet">-</span> MUST ä¸ºæ‰€æœ‰APIæ·»åŠ é”™è¯¯å¤„ç†

<span class="hljs-strong">**SHOULD (æ¨èéµå®ˆ)**</span>
<span class="hljs-bullet">-</span> SHOULD ç»„ä»¶ä¸è¶…è¿‡200è¡Œ
<span class="hljs-bullet">-</span> SHOULD æå–é‡å¤é€»è¾‘ä¸ºè‡ªå®šä¹‰Hook

<span class="hljs-strong">**COULD (å¯é€‰)**</span>
<span class="hljs-bullet">-</span> COULD æ·»åŠ JSDocæ³¨é‡Š
</code></pre>
<p>è¿™ä¸ªæŠ€å·§æ¥è‡ªRFCè§„èŒƒæ–‡æ¡£çš„å†™æ³•ã€‚ç”¨äº†ä¹‹åï¼ŒClaudeæ˜æ˜¾å¯¹"MUST"çš„è§„åˆ™æ‰§è¡Œå¾—æ›´ä¸¥æ ¼ã€‚</p>
<h3 data-id="heading-15">æŠ€å·§2ï¼šå–„ç”¨/initå‘½ä»¤</h3>
<p>è™½ç„¶å®˜æ–¹è¯´CLAUDE.mdä¼šè‡ªåŠ¨åŠ è½½ï¼Œä½†æˆ‘å¼ºçƒˆå»ºè®®æ¯æ¬¡æ‰“å¼€é¡¹ç›®å…ˆè¿è¡Œ<code>/init</code>å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">ä½ ï¼š/init
Claudeï¼šå·²åŠ è½½é¡¹ç›®é…ç½®ï¼Œå½“å‰æŠ€æœ¯æ ˆï¼šReact 18 + TypeScript...
</code></pre>
<p>è¿™å°±åƒç»™AI"åˆ·æ–°"ä¸€ä¸‹è®°å¿†ã€‚ç‰¹åˆ«æ˜¯å½“ä½ åˆšæ”¹å®ŒCLAUDE.mdï¼Œç”¨<code>/init</code>èƒ½è®©å˜æ›´ç«‹å³ç”Ÿæ•ˆã€‚</p>
<h3 data-id="heading-16">æŠ€å·§3ï¼šç¤ºä¾‹ä»£ç èƒœè¿‡åƒè¨€ä¸‡è¯­</h3>
<p>ä¸å…¶æè¿°è§„èŒƒï¼Œä¸å¦‚ç›´æ¥ç»™ç¤ºä¾‹ã€‚</p>
<p>âŒ <strong>çº¯æ–‡å­—æè¿°</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span> APIå‡½æ•°éœ€è¦åŒ…å«ç±»å‹å®šä¹‰ã€é”™è¯¯å¤„ç†å’ŒloadingçŠ¶æ€
</code></pre>
<p>âœ… <strong>å¸¦ç¤ºä¾‹ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># APIè°ƒç”¨è§„èŒƒ</span>
å‚è€ƒç¤ºä¾‹ï¼š
\<span class="hljs-code">`\`</span>\`typescript
// src/services/user.ts
export async function getUser(id: string): Promise<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">User</span>&gt;</span></span> {
Â  try {
Â  Â  const response = await fetch(<span class="hljs-code">`/api/users/${id}`</span>);
Â  Â  if (!response.ok) throw new Error('Failed to fetch user');
Â  Â  return await response.json();
Â  } catch (error) {
Â  Â  console.error('getUser error:', error);
Â  Â  throw error;
Â  }
}
\<span class="hljs-code">`\`</span>\`
æ‰€æœ‰APIå‡½æ•°éƒ½éµå¾ªæ­¤æ¨¡å¼ï¼šç±»å‹è¿”å›å€¼ + try-catch + é”™è¯¯æ—¥å¿—
</code></pre>
<p>Claudeçœ‹åˆ°ç¤ºä¾‹åï¼Œç”Ÿæˆçš„ä»£ç ä¼šéå¸¸æ¥è¿‘ä½ çš„æœŸæœ›ã€‚</p>
<h3 data-id="heading-17">æŠ€å·§4ï¼šåˆ†å±‚é…ç½®ç®¡ç†ï¼ˆMonorepoå¿…å¤‡ï¼‰</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®æ˜¯Monorepoæ¶æ„ï¼Œä¸€å®šè¦ç”¨åˆ†å±‚é…ç½®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">monorepo-root/
â”œâ”€â”€ CLAUDE.md Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment"># å…¨å±€ï¼šé€šç”¨è§„èŒƒã€Gitå·¥ä½œæµ</span>
â”œâ”€â”€ apps/
â”‚ Â  â”œâ”€â”€ web/
â”‚ Â  â”‚ Â  â””â”€â”€ .claude/CLAUDE.md Â  <span class="hljs-comment"># Webåº”ç”¨ï¼šReact + Next.js</span>
â”‚ Â  â””â”€â”€ mobile/
â”‚ Â  Â  Â  â””â”€â”€ .claude/CLAUDE.md Â  <span class="hljs-comment"># ç§»åŠ¨ç«¯ï¼šReact Native</span>
â””â”€â”€ packages/
Â  Â  â””â”€â”€ shared/
Â  Â  Â  Â  â””â”€â”€ .claude/CLAUDE.md Â  <span class="hljs-comment"># å…±äº«åŒ…ï¼šçº¯TSå·¥å…·åº“</span>
</code></pre>
<p><strong>æ ¹ç›®å½•CLAUDE.md</strong>ï¼ˆå…¨å±€è§„èŒƒï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Monorepoé€šç”¨è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨pnpmä½œä¸ºåŒ…ç®¡ç†å™¨
<span class="hljs-bullet">-</span> ç»Ÿä¸€TypeScripté…ç½®ç»§æ‰¿è‡ªæ ¹ç›®å½•tsconfig.json
<span class="hljs-bullet">-</span> Commitä¿¡æ¯éµå¾ªConventional Commits

<span class="hljs-section"># å·¥ä½œæµ</span>
<span class="hljs-bullet">-</span> ä»£ç ä¿®æ”¹å‰å…ˆè¿è¡Œ <span class="hljs-code">`pnpm install`</span>
<span class="hljs-bullet">-</span> æäº¤å‰è¿è¡Œ <span class="hljs-code">`pnpm run lint`</span> æ£€æŸ¥æ‰€æœ‰åŒ…
</code></pre>
<p><strong>apps/web/.claude/CLAUDE.md</strong>ï¼ˆå‰ç«¯ä¸“å±ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Webåº”ç”¨ç‰¹å®šé…ç½®</span>
ç»§æ‰¿æ ¹ç›®å½•è§„èŒƒï¼Œä»¥ä¸‹æ˜¯é¢å¤–é…ç½®ï¼š
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šNext.js 14 + React 18
<span class="hljs-bullet">-</span> æ ·å¼ï¼šTailwind CSS
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†ï¼šZustand
</code></pre>
<p>Claudeä¼šå…ˆè¯»å–æ ¹ç›®å½•é…ç½®ï¼Œç„¶åæ ¹æ®ä½ å½“å‰å·¥ä½œç›®å½•è¯»å–å­é…ç½®ã€‚è¿™æ ·å°±ä¸ç”¨åœ¨æ¯ä¸ªå­é¡¹ç›®é‡å¤å†™é€šç”¨è§„èŒƒäº†ã€‚</p>
<h3 data-id="heading-18">æŠ€å·§5ï¼šç”¨âŒå’Œâœ…åšå¯¹æ¯”</h3>
<p>äººç±»å’ŒAIéƒ½å–œæ¬¢å¯¹æ¯”å­¦ä¹ ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># çŠ¶æ€æ›´æ–°è§„èŒƒ</span>
âŒ é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹state
\<span class="hljs-code">`\`</span>\`typescript
const [user, setUser] = useState({name: 'John', age: 30});
user.age = 31; // é”™è¯¯ï¼ç›´æ¥ä¿®æ”¹äº†å¯¹è±¡
\<span class="hljs-code">`\`</span>\`

âœ… æ­£ç¡®ï¼šä½¿ç”¨ä¸å¯å˜æ›´æ–°
\<span class="hljs-code">`\`</span>\`typescript
const [user, setUser] = useState({name: 'John', age: 30});
setUser(prev =&gt; ({...prev, age: 31}));
\<span class="hljs-code">`\`</span>\`
</code></pre>
<p>è¿™ç§å¯¹æ¯”è®©è§„åˆ™ä¸€ç›®äº†ç„¶ï¼ŒClaudeå­¦ä¹ æ•ˆç‡ä¹Ÿæ›´é«˜ã€‚</p>
<h3 data-id="heading-19">æŠ€å·§6ï¼šè®°å½•å¸¸è§é”™è¯¯æ¨¡å¼</h3>
<p>æŠŠå›¢é˜Ÿç»å¸¸çŠ¯çš„é”™è¯¯å†™è¿›å»ï¼Œè®©AIå¸®ä½ æŠŠå…³ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># âš ï¸ å¸¸è§é”™è¯¯å’Œé¿å‘æŒ‡å—</span>
<span class="hljs-section">## 1. å¿˜è®°æ¸…ç†å‰¯ä½œç”¨</span>
âŒ é—®é¢˜ä»£ç ï¼š
\<span class="hljs-code">`\`</span>\`typescript
useEffect(() =&gt; {
Â  const timer = setInterval(() =&gt; {/* ... <span class="hljs-emphasis">*/}, 1000);
Â  // å¿˜è®°æ¸…ç†ï¼
}, []);
\`\`\`

âœ… æ­£ç¡®åšæ³•ï¼š
\`\`\`typescript
useEffect(() =&gt; {
Â  const timer = setInterval(() =&gt; {/*</span> ... <span class="hljs-emphasis">*/}, 1000);
Â  return () =&gt; clearInterval(timer); // æ¸…ç†å®šæ—¶å™¨
}, []);
\`\`\`

## 2. ç¼ºå¤±ä¾èµ–é¡¹
å¦‚æœESLintæç¤ºä¾èµ–é¡¹ç¼ºå¤±ï¼Œä¸è¦ç¦ç”¨è­¦å‘Šï¼Œè¦ä¹ˆæ·»åŠ ä¾èµ–ï¼Œè¦ä¹ˆç”¨useCallback/useMemoä¼˜åŒ–
</span></code></pre>
<p>æœ‰äº†è¿™ä¸ªï¼ŒClaudeåœ¨ç”Ÿæˆä»£ç æ—¶ä¼šä¸»åŠ¨é¿å…è¿™äº›å‘ã€‚</p>
<h3 data-id="heading-20">æŠ€å·§7ï¼šé“¾æ¥åˆ°è¯¦ç»†æ–‡æ¡£</h3>
<p>CLAUDE.mdè¦ç®€æ´ï¼Œä½†å¯ä»¥é“¾æ¥åˆ°è¯¦ç»†æ–‡æ¡£ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è¯¦ç»†è§„èŒƒæ–‡æ¡£</span>
<span class="hljs-bullet">-</span> [<span class="hljs-string">APIè®¾è®¡è§„èŒƒ</span>](<span class="hljs-link">./docs/api-guidelines.md</span>) - RESTful APIè®¾è®¡æ ‡å‡†
<span class="hljs-bullet">-</span> [<span class="hljs-string">ç»„ä»¶å¼€å‘æŒ‡å—</span>](<span class="hljs-link">./docs/component-guide.md</span>) - ç»„ä»¶æ‹†åˆ†å’Œå¤ç”¨åŸåˆ™
<span class="hljs-bullet">-</span> [<span class="hljs-string">æµ‹è¯•è§„èŒƒ</span>](<span class="hljs-link">./docs/testing.md</span>) - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦æ±‚
</code></pre>
<p>è¿™æ ·æ—¢ä¿æŒäº†CLAUDE.mdçš„ç®€æ´ï¼Œåˆèƒ½åœ¨éœ€è¦æ—¶æä¾›è¯¦ç»†ä¿¡æ¯ã€‚Claudeå¯ä»¥é€šè¿‡è¿™äº›é“¾æ¥è·å–æ›´å¤šä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-21">5ä¸ªæœ€å®¹æ˜“è¸©çš„å‘</h2>
<h3 data-id="heading-22">å‘1ï¼šæ–‡ä»¶å¤ªé•¿ï¼Œå¡ä¸€åˆ‡å†…å®¹</h3>
<p>æ–°æ‰‹æœ€å¸¸çŠ¯çš„é”™è¯¯ã€‚æŠŠREADMEã€APIæ–‡æ¡£ã€ä¸šåŠ¡é€»è¾‘è¯´æ˜å…¨å¡è¿›CLAUDE.mdã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼šå ç”¨å¤ªå¤štokenï¼Œåè€Œç¨€é‡Šäº†é‡è¦ä¿¡æ¯ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šä¸¥æ ¼æ§åˆ¶åœ¨100è¡Œä»¥å†…ï¼Œåªå†™AIç¼–ç æ—¶çœŸæ­£éœ€è¦çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-23">å‘2ï¼šä»ä¸æ›´æ–°é…ç½®</h3>
<p>é¡¹ç›®åœ¨å˜åŒ–ï¼ŒCLAUDE.mdå´ä¸€æˆä¸å˜ã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼šè¿‡æ—¶çš„é…ç½®å¯¼è‡´AIç”Ÿæˆé”™è¯¯ä»£ç ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šå…»æˆä¹ æƒ¯ï¼Œæ¯æ¬¡é‡å¤§é‡æ„åæ›´æ–°CLAUDE.mdï¼Œå¹¶åœ¨PRä¸­reviewé…ç½®å˜æ›´ã€‚</p>
<h3 data-id="heading-24">å‘3ï¼šå¿˜è®°ç‰ˆæœ¬æ§åˆ¶</h3>
<p>æŠŠCLAUDE.mdåŠ å…¥<code>.gitignore</code>æˆ–è€…ä¸æäº¤åˆ°ä»“åº“ã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼šå›¢é˜Ÿæˆå‘˜å„è‡ªä¸ºæ”¿ï¼Œä»£ç é£æ ¼æ··ä¹±ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šå¿…é¡»çº³å…¥Gitï¼Œå’Œä»£ç ä¸€èµ·reviewã€‚</p>
<h3 data-id="heading-25">å‘4ï¼šè¿‡äºç¬¼ç»Ÿçš„è§„åˆ™</h3>
<p>å†™"ä¿æŒä»£ç ç®€æ´"ã€"éµå¾ªæœ€ä½³å®è·µ"è¿™ç§ç©ºè¯ã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼šAIæ— æ³•æ‰§è¡Œï¼Œç­‰äºæ²¡å†™ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šæ¯æ¡è§„åˆ™å¿…é¡»å…·ä½“ã€å¯éªŒè¯ã€å¯æ‰§è¡Œã€‚</p>
<h3 data-id="heading-26">å‘5ï¼šæ•æ„Ÿä¿¡æ¯æ³„éœ²</h3>
<p>æŠŠAPIå¯†é’¥ã€æ•°æ®åº“å¯†ç å†™è¿›CLAUDE.mdã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼šé…ç½®æ–‡ä»¶ä¼šæäº¤åˆ°ä»“åº“ï¼Œæ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚</p>
<p><strong>è§£å†³</strong>ï¼šåªæè¿°é…ç½®æ–¹å¼ï¼Œä¸å†™å…·ä½“å€¼ã€‚</p>
<pre><code class="hljs language-markdown" lang="markdown">âŒ é”™è¯¯
\<span class="hljs-code">`\`</span>\`markdown
<span class="hljs-section"># æ•°æ®åº“é…ç½®</span>
DATABASE<span class="hljs-emphasis">_URL=postgresql://admin:password123@localhost:5432/mydb
\`\`\`

âœ… æ­£ç¡®
\`\`\`markdown
# ç¯å¢ƒå˜é‡
- DATABASE_</span>URL: ä».env.localè¯»å–ï¼Œæ ¼å¼å‚è€ƒ.env.example
<span class="hljs-bullet">-</span> API<span class="hljs-emphasis">_KEY: ä»ç¯å¢ƒå˜é‡è·å–ï¼Œæœ¬åœ°å¼€å‘è”ç³»@å¼ ä¸‰è·å–æµ‹è¯•key
\`\`\`
</span></code></pre>
<h2 data-id="heading-27">3ä¸ªçœŸå®é¡¹ç›®æ¡ˆä¾‹</h2>
<h3 data-id="heading-28">æ¡ˆä¾‹1ï¼šReactå‰ç«¯é¡¹ç›®</h3>
<p>è¿™æ˜¯æˆ‘ç›®å‰åœ¨ç»´æŠ¤çš„ä¸€ä¸ªç”µå•†å‰ç«¯é¡¹ç›®çš„é…ç½®ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç”µå•†å‰ç«¯é¡¹ç›®</span>
<span class="hljs-section">## æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> Next.js 14.0 (App Router)
<span class="hljs-bullet">-</span> React 18.2
<span class="hljs-bullet">-</span> TypeScript 5.2
<span class="hljs-bullet">-</span> Tailwind CSS 3.4
<span class="hljs-bullet">-</span> Zustand (çŠ¶æ€ç®¡ç†)
<span class="hljs-bullet">-</span> TanStack Query (æœåŠ¡å™¨çŠ¶æ€)

<span class="hljs-section">## é¡¹ç›®ç»“æ„</span>
src/
â”œâ”€â”€ app/ Â  Â  Â  Â  Â # é¡µé¢è·¯ç”±
â”œâ”€â”€ components/ Â  # ç»„ä»¶
â”‚ Â  â”œâ”€â”€ ui/ Â  Â  Â # åŸºç¡€ç»„ä»¶
â”‚ Â  â””â”€â”€ features/ # ä¸šåŠ¡ç»„ä»¶
â”œâ”€â”€ lib/ Â  Â  Â  Â  # å·¥å…·å‡½æ•°
â””â”€â”€ services/ Â  Â # APIè°ƒç”¨

  


<span class="hljs-section">## ä»£ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ç»„ä»¶ï¼šå‡½æ•°ç»„ä»¶ + Hooks
<span class="hljs-bullet">-</span> çŠ¶æ€ï¼šæœ¬åœ°ç”¨useStateï¼Œå…¨å±€ç”¨Zustandï¼ŒæœåŠ¡å™¨ç”¨TanStack Query
<span class="hljs-bullet">-</span> æ ·å¼ï¼šTailwind utilitiesï¼Œå¤æ‚å¸ƒå±€æŠ½å–ä¸ºç»„ä»¶
<span class="hljs-bullet">-</span> é”™è¯¯å¤„ç†ï¼šAPIè°ƒç”¨å¿…é¡»try-catch


<span class="hljs-section">## å‘½ä»¤</span>
npm run dev Â  Â  Â # å¼€å‘æœåŠ¡å™¨
npm run build Â  Â # ç”Ÿäº§æ„å»º
npm run lint Â  Â  # ä»£ç æ£€æŸ¥

<span class="hljs-section">## é™åˆ¶</span>
<span class="hljs-bullet">-</span> ä¸è¦ä¿®æ”¹ /lib/auth/* (è®¤è¯é€»è¾‘)
<span class="hljs-bullet">-</span> ä¸è¦å®‰è£…æ–°åŒ… (éœ€å›¢é˜Ÿè®¨è®º)
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šç”¨äº†è¿™ä¸ªé…ç½®åï¼ŒClaudeç”Ÿæˆçš„ç»„ä»¶ç»“æ„å’Œæˆ‘æ‰‹å†™çš„åŸºæœ¬ä¸€è‡´ï¼ŒèŠ‚çœäº†å¤§é‡è°ƒæ•´æ—¶é—´ã€‚</p>
<h3 data-id="heading-29">æ¡ˆä¾‹2ï¼šNode.jsåç«¯é¡¹ç›®</h3>
<p>è¿™æ˜¯ä¸€ä¸ªExpress APIé¡¹ç›®çš„é…ç½®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># è®¢å•ç®¡ç†ç³»ç»ŸAPI</span>
<span class="hljs-section">## æŠ€æœ¯æ ˆ</span>
<span class="hljs-bullet">-</span> Node.js 20 LTS
<span class="hljs-bullet">-</span> Express 4.18
<span class="hljs-bullet">-</span> Prisma ORM
<span class="hljs-bullet">-</span> PostgreSQL 15
<span class="hljs-bullet">-</span> Zod (æ•°æ®éªŒè¯)

<span class="hljs-section">## é¡¹ç›®ç»“æ„</span>
src/
â”œâ”€â”€ routes/ Â  Â  Â  # è·¯ç”±å®šä¹‰
â”œâ”€â”€ controllers/ Â # ä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ services/ Â  Â  # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ middleware/ Â  # ä¸­é—´ä»¶
â””â”€â”€ utils/ Â  Â  Â  Â # å·¥å…·å‡½æ•°

<span class="hljs-section">## ç¼–ç è§„èŒƒ</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰APIå¿…é¡»åŒ…å«ï¼šè¯·æ±‚éªŒè¯(Zod) + é”™è¯¯å¤„ç† + æ—¥å¿—è®°å½•
<span class="hljs-bullet">-</span> æ•°æ®åº“æ“ä½œç»Ÿä¸€æ”¾åœ¨serviceså±‚
<span class="hljs-bullet">-</span> æ§åˆ¶å™¨åªåšè¯·æ±‚å“åº”ï¼Œä¸å†™ä¸šåŠ¡é€»è¾‘
<span class="hljs-bullet">-</span> ä½¿ç”¨async/awaitï¼Œé¿å…å›è°ƒ

<span class="hljs-section">## APIç¤ºä¾‹</span>
\<span class="hljs-code">`\`</span>\`typescript
// controllers/order.controller.ts
export async function createOrder(req: Request, res: Response) {
Â  try {
Â  Â  const data = orderSchema.parse(req.body); // ZodéªŒè¯
Â  Â  const order = await orderService.create(data);
Â  Â  logger.info('Order created', { orderId: order.id });
Â  Â  res.json({ success: true, data: order });
Â  } catch (error) {
Â  Â  logger.error('Create order failed', error);
Â  Â  res.status(500).json({ success: false, error: 'Internal error' });
Â  }
}
\<span class="hljs-code">`\`</span>\`

<span class="hljs-section">## å‘½ä»¤</span>
npm run dev Â  Â  Â  # å¼€å‘æ¨¡å¼(nodemon)
npm run build Â  Â  # TypeScriptç¼–è¯‘
npm test Â  Â  Â  Â  Â # Jestæµ‹è¯•
npx prisma studio # æ•°æ®åº“GUI
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šClaudeç°åœ¨ç”Ÿæˆçš„APIç«¯ç‚¹éƒ½è‡ªå¸¦ZodéªŒè¯å’Œé”™è¯¯å¤„ç†ï¼Œè´¨é‡æå‡æ˜æ˜¾ã€‚</p>
<h3 data-id="heading-30">æ¡ˆä¾‹3ï¼šMonorepoæ¶æ„</h3>
<p>è¿™æ˜¯ä¸€ä¸ªåŒæ—¶åŒ…å«å‰åç«¯çš„Monorepoé¡¹ç›®ï¼š</p>
<p><strong>æ ¹ç›®å½•CLAUDE.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å…¨æ ˆåº”ç”¨Monorepo</span>

<span class="hljs-section">## æ¶æ„</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨pnpm workspaces
<span class="hljs-bullet">-</span> apps/: åº”ç”¨ç¨‹åº
<span class="hljs-bullet">-</span> packages/: å…±äº«åŒ…

<span class="hljs-section">## é€šç”¨è§„èŒƒ</span>
<span class="hljs-bullet">-</span> TypeScriptä¸¥æ ¼æ¨¡å¼
<span class="hljs-bullet">-</span> ESLint + Prettierç»Ÿä¸€æ ¼å¼åŒ–
<span class="hljs-bullet">-</span> Commitéµå¾ªConventional Commits

<span class="hljs-section">## å‘½ä»¤</span>
pnpm install Â  Â  Â  Â  Â  # å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm run dev Â  Â  Â  Â  Â  # åŒæ—¶å¯åŠ¨å‰åç«¯
pnpm run lint Â  Â  Â  Â  Â # æ£€æŸ¥æ‰€æœ‰åŒ…
pnpm --filter web dev Â # åªå¯åŠ¨webåº”ç”¨
</code></pre>
<p><strong>apps/web/.claude/CLAUDE.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Webåº”ç”¨é…ç½®</span>
ç»§æ‰¿æ ¹ç›®å½•è§„èŒƒ

<span class="hljs-bullet">-</span> Next.js 14 + React
<span class="hljs-bullet">-</span> ç«¯å£ï¼š3000
<span class="hljs-bullet">-</span> è¯¦ç»†è§„èŒƒè§æ ¹ç›®å½•CLAUDE.md
</code></pre>
<p><strong>apps/api/.claude/CLAUDE.md</strong>ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># APIæœåŠ¡é…ç½®</span>
ç»§æ‰¿æ ¹ç›®å½•è§„èŒƒ

<span class="hljs-bullet">-</span> Express + Prisma
<span class="hljs-bullet">-</span> ç«¯å£ï¼š4000
<span class="hljs-bullet">-</span> è¯¦ç»†è§„èŒƒè§æ ¹ç›®å½•CLAUDE.md
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šClaudeèƒ½æ ¹æ®å½“å‰å·¥ä½œç›®å½•è‡ªåŠ¨åˆ‡æ¢ä¸Šä¸‹æ–‡ï¼Œåœ¨å‰ç«¯ç›®å½•ç”ŸæˆReactä»£ç ï¼Œåœ¨åç«¯ç›®å½•ç”ŸæˆExpressä»£ç ã€‚</p>
<h2 data-id="heading-31">ç»“è®ºï¼šä»ä»Šå¤©å¼€å§‹ä¼˜åŒ–ä½ çš„CLAUDE.md</h2>
<p>çœ‹å®Œè¿™7ä¸ªæŠ€å·§ï¼Œä½ åº”è¯¥å¯¹å¦‚ä½•å†™å¥½CLAUDE.mdæœ‰äº†æ¸…æ™°çš„è®¤è¯†ã€‚è®°ä½æœ€é‡è¦çš„ä¸‰ç‚¹ï¼š</p>
<ol>
<li>
<p><strong>ä¿æŒç®€æ´</strong> - 100è¡Œä»¥å†…ï¼Œåªå†™å¿…è¦ä¿¡æ¯</p>
</li>
<li>
<p><strong>è¶³å¤Ÿå…·ä½“</strong> - æ¯æ¡è§„åˆ™éƒ½å¯æ‰§è¡Œã€å¯éªŒè¯</p>
</li>
<li>
<p><strong>æŒç»­æ›´æ–°</strong> - é¡¹ç›®åœ¨å˜ï¼Œé…ç½®ä¹Ÿè¦è·Ÿç€å˜</p>
</li>
</ol>
<p>ä»æˆ‘çš„å®é™…ç»éªŒæ¥çœ‹ï¼Œä¸€ä¸ªå¥½çš„CLAUDE.mdèƒ½æŠŠAIçš„å·¥ä½œæ•ˆç‡æå‡è‡³å°‘30%ã€‚ä½ ä¸éœ€è¦ä¸€æ¬¡æ€§å†™å®Œæ‰€æœ‰å†…å®¹ï¼Œå¯ä»¥ä»æœ€åŸºç¡€çš„æŠ€æœ¯æ ˆå£°æ˜å¼€å§‹ï¼Œç„¶åæ¯æ¬¡é‡åˆ°AIçŠ¯é”™æ—¶ï¼Œå°±å¾€CLAUDE.mdé‡ŒåŠ ä¸€æ¡è§„åˆ™ã€‚</p>
<p>ç°åœ¨å°±æ‰“å¼€ä½ çš„é¡¹ç›®ï¼Œåˆ›å»ºæˆ–ä¼˜åŒ–ä½ çš„CLAUDE.mdå§ã€‚å¦‚æœä½ è¿˜æ²¡å¼€å§‹ç”¨Claude Codeï¼Œè¿™ä¸ªé…ç½®æ–‡ä»¶ä¼šæ˜¯ä½ çš„ç¬¬ä¸€æ­¥ã€‚å¦‚æœä½ å·²ç»åœ¨ç”¨ï¼Œä½†AIè¡¨ç°ä¸å¤Ÿç†æƒ³ï¼Œè¯•è¯•ä»Šå¤©åˆ†äº«çš„è¿™äº›æŠ€å·§ã€‚</p>
<p>æœ€åæé†’ä¸€å¥ï¼šCLAUDE.mdä¸æ˜¯ä¸€æ¬¡æ€§å·¥ä½œï¼Œå®ƒåº”è¯¥å’Œä½ çš„é¡¹ç›®ä¸€èµ·æˆé•¿ã€‚æ¯æ¬¡é‡å¤§é‡æ„ã€æŠ€æœ¯æ ˆå‡çº§ã€è§„èŒƒå˜æ›´ï¼Œéƒ½åˆ«å¿˜äº†æ›´æ–°è¿™ä¸ªæ–‡ä»¶ã€‚è®©AIçœŸæ­£ç†è§£ä½ çš„é¡¹ç›®ï¼Œä»å†™å¥½CLAUDE.mdå¼€å§‹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2Fposts%2Fai%2F20251122-claude-md-writing-guide%2F" target="_blank" title="https://blog.betterlink.top/zh/posts/ai/20251122-claude-md-writing-guide/" ref="nofollow noopener noreferrer">blog.betterlink.top/zh/posts/aiâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®©Trae CN SOLOè‡ªä¸»å‘æŒ¥ï¼Œçœ‹çœ‹èƒ½åšå‡ºä¸€ä¸ªä»€ä¹ˆæ ·çš„é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7576867727718662179</link>    <guid>https://juejin.cn/post/7576867727718662179</guid>    <pubDate>2025-11-26T15:20:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576867727718662179" data-draft-id="7576853741758201890" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®©Trae CN SOLOè‡ªä¸»å‘æŒ¥ï¼Œçœ‹çœ‹èƒ½åšå‡ºä¸€ä¸ªä»€ä¹ˆæ ·çš„é¡¹ç›®"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T15:20:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é“¶ç©ºé£ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/1086796427178429"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®©Trae CN SOLOè‡ªä¸»å‘æŒ¥ï¼Œçœ‹çœ‹èƒ½åšå‡ºä¸€ä¸ªä»€ä¹ˆæ ·çš„é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1086796427178429/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é“¶ç©ºé£ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T15:20:16.000Z" title="Wed Nov 26 2025 15:20:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>å¾ˆæ—©ä¹‹å‰å°±åœ¨å…¬å¸å†…éƒ¨ç”¨è¿‡è¿™ç§å…¨æ ˆè‡ªåŠ¨åŒ–å¼€å‘çš„å¤§æ¨¡å‹å·¥å…·ï¼Œç„¶åå½“æ—¶åœ¨ç”¨çš„Trae CNç¼–è¾‘å™¨ä¹Ÿä¸€ç›´è¯´è¦æ¨å‡ºè¯¥èƒ½åŠ›ï¼Œæ—©æ—©çš„å°±åŠ åˆ°äº†å€™è¡¥ç™½åå•ä¸­ï¼Œç»ˆäºåœ¨ä»Šå¤©æ”¶åˆ°çŸ­ä¿¡ï¼Œæ­£å¥½å€Ÿç€è¿è¥å°å§å§å‘Šè¯‰æˆ‘çš„å¹³å°æ´»åŠ¨ï¼Œäºæ˜¯æ¥è¯•ç”¨ä¸€ä¸‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c18be91de44206b54edc7a851d7471~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=QQqLtEBU7tp0fWXoOIELFjhXDdQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ç•Œé¢å±•ç¤º</h2>
<p>SOLOæ¨¡å¼æœ¬è´¨ä¸Šå°±æ˜¯å¼€å‘è€…å•¥éƒ½ä¸ç”¨å¹²ï¼Œç»™å¤§æ¨¡å‹ä¸€ä¸ªæŒ‡ä»¤ï¼Œç„¶åå¤§æ¨¡å‹è‡ªä¸»å®Œæˆä»é¡¹ç›®è®¾è®¡ã€ä»£ç å¼€å‘ã€è‡ªä¸»è¿è¡Œã€åˆ°è‡ªåŠ¨debugæœ€ç»ˆä¸Šçº¿çš„ä¸€æ•´å¥—å…¨æ ˆå¼€å‘æµç¨‹ã€‚</p>
<p>ä½ å¯ä»¥æå‰ç»™å®ƒè®¾å®šå¥½æŠ€æœ¯æ ˆï¼Œæˆ–è€…ç»™å®ƒè¯¦ç»†çš„äº§å“è®¾è®¡ï¼Œè®©å®ƒæŒ‰ç…§ä½ çš„æ€è·¯æï¼Œæœ€åç”±ä½ æ¥éªŒæ”¶ã€‚</p>
<p>æ‰“å¼€Trae CNçš„SOLOç•Œé¢</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaabe51a622f483e8d4fd1559888b595~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=ZdjMCCOwtLLs4kfrrsqFeyeRNd4%3D" alt="" loading="lazy"/></p>
<p>è·Ÿå½“åˆTraeå›½é™…ç‰ˆç•Œé¢æœ‰ç‚¹ä¸åŒï¼Œå›½é™…ç‰ˆæ”¯æŒä¸¤ç§æ¨¡å¼ï¼šå°é¡¹ç›®æ¨¡å¼å’Œå¤§é¡¹ç›®è¿­ä»£æ¨¡å¼ï¼Œè¿™é‡Œçœ‹CNç‰ˆçš„å°±ä¸€ç§æ¨¡å¼ï¼Œå·¦è¾¹çš„å·¥å…·æ éƒ½æ˜¯åœ¨SOLOå¼€å‘ä¸­ä¼šè‡ªä¸»è°ƒç”¨çš„ï¼ŒåŒ…æ‹¬ç”¨æˆ·è‡ªå·±çš„å¯¼å…¥çš„MCPã€æ™ºèƒ½ä½“å¿…è¦æ—¶ä¹Ÿä¼šè¢«è°ƒç”¨å‘æŒ¥ä½œç”¨ã€‚</p>
<p>æ•´ä½“èƒ½åŠ›ä¸Šè·Ÿå›½é™…ç‰ˆçš„ç›¸æ¯”åº”è¯¥æœ‰ä¸€äº›é˜‰å‰²ï¼Œä¸è¿‡ä¸é‡è¦ï¼Œçœ‹çœ‹å¯¹äºå°å‹é¡¹ç›®æ¥è®²èƒ½åšåˆ°ä»€ä¹ˆç¨‹åº¦å§ã€‚</p>
<h2 data-id="heading-2">è‡ªåŠ¨åŒ–å¼€å‘</h2>
<p>å¼€å§‹ç»™å®ƒæç¤ºè¯è®©å…¶è‡ªç”±å‘æŒ¥ï¼Œåœ¨å‘é€æç¤ºè¯ä¹‹å‰ï¼Œå…ˆè¿›è¡Œä¸€æ³¢æç¤ºè¯æè¿°ä¼˜åŒ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62991ce8b99b4948b0c2c133be2ef18f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=E2qc6wWVPefsXXNDqbXmjWCS2mY%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–åçš„æ•ˆæœå¦‚ä¸‹</p>
<blockquote>
<p>è®¾è®¡å¹¶å¼€å‘ä¸€ä¸ªåŸºäºç°ä»£WebæŠ€æœ¯æ ˆçš„å®Œæ•´ç½‘ç«™åº”ç”¨ï¼Œè¦æ±‚åŠŸèƒ½å®Œå¤‡ã€å…·æœ‰åˆ›æ–°æ€§å’Œå®ç”¨æ€§ã€‚æŠ€æœ¯å®ç°éœ€é‡‡ç”¨æ ‡å‡†Webå¼€å‘æŠ€æœ¯ï¼ˆHTML5ã€CSS3ã€JavaScript/TypeScriptï¼‰ï¼Œå¯ç»“åˆä¸»æµå‰ç«¯æ¡†æ¶ï¼ˆå¦‚Reactã€Vueæˆ–Angularï¼‰æå‡å¼€å‘æ•ˆç‡ã€‚ç½‘ç«™éœ€åŒ…å«å®Œæ•´çš„ç”¨æˆ·äº¤äº’æµç¨‹ï¼Œè‡³å°‘æ¶µç›–é¦–é¡µã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—é¡µã€ç”¨æˆ·è®¾ç½®é¡µç­‰å…³é”®é¡µé¢ã€‚åŠŸèƒ½è®¾è®¡åº”å…·æœ‰ç‹¬ç‰¹æ€§å’Œåˆ›æ–°æ€§ï¼Œé¿å…ç®€å•æ¨¡ä»¿ç°æœ‰ç½‘ç«™ã€‚æ‰€æœ‰ç”¨æˆ·æ•°æ®å’Œåº”ç”¨çŠ¶æ€å¿…é¡»ä½¿ç”¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆï¼ˆlocalStorage/sessionStorage/IndexedDBï¼‰å®ç°æŒä¹…åŒ–ç®¡ç†ï¼Œç¡®ä¿åœ¨ç”¨æˆ·åˆ·æ–°é¡µé¢æˆ–é‡æ–°è®¿é—®æ—¶æ•°æ®ä¸ä¸¢å¤±ã€‚ç½‘ç«™éœ€æ»¡è¶³å“åº”å¼è®¾è®¡è¦æ±‚ï¼Œé€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨è®¾å¤‡ç­‰ä¸åŒå±å¹•å°ºå¯¸ã€‚å¼€å‘è¿‡ç¨‹ä¸­éœ€å®ç°åˆç†çš„ä»£ç ç»“æ„ã€ç»„ä»¶åŒ–è®¾è®¡å’Œé”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿åº”ç”¨çš„å¯ç»´æŠ¤æ€§å’Œç¨³å®šæ€§ã€‚</p>
</blockquote>
<p>OKï¼Œéœ€æ±‚æ˜ç¡®åï¼Œè®©SOLOæ¨¡å¼å¼€å·¥å§ï¼Œé¦–å…ˆè¿›è¡Œä»»åŠ¡è®¾è®¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91c19af4c84a4fe088a4a52b09cd12bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=L6N0ttGrWWG%2F8qCghbSTWw0%2FnTg%3D" alt="" loading="lazy"/></p>
<p>ç„¶åçœ‹åˆ°äº†å®ƒè‡ªç”±å‘æŒ¥äº†ä¸‰ä¸ªåŠŸèƒ½ï¼Œæ„Ÿè§‰ä¸­é—´æ²¡æœ‰ä»€ä¹ˆå…³è”</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39c413cb5d1e4b6cb3043b880d08ae19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=dqqTKi6C96MXjjoxF4eJs5JdvO0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849bb9f13425485c9a512f5766eba3e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=dQh2kqsViPBVZRjdv%2BlJwaHcS%2Fo%3D" alt="" loading="lazy"/></p>
<p>ç»ˆäºå®Œæˆäº†ï¼Œæ‰“å¼€å†…ç½®æµè§ˆå™¨ä¸€çœ‹ï¼ŒæŠ¥é”™</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fab09034ef04dc6a73cf4084feaaadf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=YjTQ3nje5MmS4X64Yzn3bj6i86s%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»å³ä¸‹è§’å°†æŠ¥é”™ä¿¡æ¯æ·»åŠ åˆ°å¯¹è¯ï¼Œè®©å®ƒæ”¹bugå§</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcf81fc1d61646658ea989f116611559~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=VAMp0OwGgU1lVquWWQftlOvL5Uo%3D" alt="" loading="lazy"/></p>
<p>åˆç­‰äº†ä¸€ä¼šï¼ŒOKäº†ã€‚å°è¯•ä½¿ç”¨ä¸€ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b1ee576e22d43ccac0a7b58b65f180f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=f5cdx8jcQ%2B1DXvvcajPytmTtvq4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ddab247f14c49ee90a9f8f6b62a13ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=iAbV1wmQl8BjgmZzBRQoP8ZUnS8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c39d75fe00e4909a6c81479c5ca1fd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=YI9ptT9sVm%2B0CdGFGn2PQyQ3ae0%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0e2e0380d2141679d1ad2888f5baf7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6ZO256m66aOe5769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764775370&amp;x-signature=PPu2002rsh%2FLbZxNb8vGAeOXutc%3D" alt="" loading="lazy"/>
æ„Ÿè§‰å¯ä»¥å“¦ï¼Œæ˜¯ä¸ªç›®æ ‡ä»»åŠ¡ç®¡ç†ç½‘ç«™ï¼Œå¯ä»¥è®¾ç½®ä»»åŠ¡ã€ç›®æ ‡ï¼Œè®¾ç½®ä¸­è¿˜èƒ½è®¾ç½®ä¸»é¢˜ï¼Œç”šè‡³è¿˜æœ‰è¿›åº¦æ¡è¿™ç§å°ç»†èŠ‚ï¼Œä½œä¸ºä¸€ä¸ªé¡¹ç›®ç®¡ç†å·¥å…·çœŸå¿ƒä¸é”™ã€‚</p>
<p>æœ¬æ¬¡æ¯”è¾ƒä»“ä¿ƒï¼Œç¡®å®æ²¡æƒ³åˆ°ä»€ä¹ˆéœ€æ±‚ï¼Œå°±ç´¢æ€§ç›´æ¥è®©Traeè‡ªå·±åˆ›é€ éœ€æ±‚ï¼Œå®ç°éœ€æ±‚ï¼ŒåŸºæœ¬æ˜¯ä¸€ç«™å¼å¼€å‘ï¼Œåªæœ‰ä¸€äº›æ“ä½œæ˜¯éœ€è¦æˆ‘æ¥ç¡®è®¤çš„ï¼Œå…¶ä»–åŸºæœ¬å°±æ‰”åå°ä¸ç®¡äº†ï¼Œè¿˜æ˜¯æŒºçœå¿ƒçš„ã€‚ç­‰ä»¥åæœ‰åˆšéœ€äº†å†å¥½å¥½è¯•è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æå‡ EdgeWorker å¯è§‚æµ‹æ€§ï¼šä½¿ç”¨ DataStream è®¾ç½®æ—¥å¿—åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7576844295434485769</link>    <guid>https://juejin.cn/post/7576844295434485769</guid>    <pubDate>2025-11-26T15:56:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576844295434485769" data-draft-id="7576907627016732723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æå‡ EdgeWorker å¯è§‚æµ‹æ€§ï¼šä½¿ç”¨ DataStream è®¾ç½®æ—¥å¿—åŠŸèƒ½"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2025-11-26T15:56:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AKAMAI"/> <meta itemprop="url" content="https://juejin.cn/user/829502942352628"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æå‡ EdgeWorker å¯è§‚æµ‹æ€§ï¼šä½¿ç”¨ DataStream è®¾ç½®æ—¥å¿—åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/829502942352628/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AKAMAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T15:56:56.000Z" title="Wed Nov 26 2025 15:56:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…³äºä½œè€…ï¼šAJ Johnson æ˜¯ Akamai Technologies çš„é«˜çº§äº§å“ç»ç†ï¼Œä¸“æ³¨äºå¹³å°å³æœåŠ¡ï¼ˆPaaSï¼‰ï¼Œå¹¶é¢†å¯¼æ—¨åœ¨æ‰©å±•å’Œä¼˜åŒ–å…¬å¸äº‘å¹³å°èƒ½åŠ›çš„æˆ˜ç•¥è®¡åˆ’ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d7341fdca8e4c6285d317b92d69162f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764777416&amp;x-signature=d3ZCwSaCS5NIfEp7%2BeydGtQTlTQ%3D" alt="" loading="lazy"/></p>
<p>å¦‚æ‚¨æ‰€åœ¨çš„ä¼ä¸šä¹Ÿåœ¨è€ƒè™‘é‡‡è´­äº‘æœåŠ¡æˆ–è¿›è¡Œäº‘è¿ç§»ï¼Œ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linode.com%2Fzh%2Flp%2Fakamai-cloud-computing-freetrial%2F%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejin_251126_blogarticles230" target="_blank" title="https://www.linode.com/zh/lp/akamai-cloud-computing-freetrial/?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejin_251126_blogarticles230" ref="nofollow noopener noreferrer">ç‚¹å‡»é“¾æ¥</a>äº†è§£Akamai Linodeè§£å†³æ–¹æ¡ˆï¼Œç°åœ¨ç”³è¯·è¯•ç”¨å¯å¾—é«˜è¾¾500ç¾å…ƒä¸“å±é¢åº¦</p>
<hr/>
<p>è¯¢é—®ä»»ä½•å¼€å‘è€…ï¼Œä»–ä»¬éƒ½ä¼šå‘Šè¯‰æ‚¨ï¼Œè‰¯å¥½ä¸”åŠæ—¶çš„åº”ç”¨é¥æµ‹å¯¹äºæ„å»ºã€ç»´æŠ¤å’Œä¼˜åŒ–åº”ç”¨ç¨‹åºè‡³å…³é‡è¦ã€‚æ²¡æœ‰é€‚å½“çš„åé¦ˆï¼Œå¼€å‘äººå‘˜å°±å¦‚åŒåœ¨é»‘æš—ä¸­æ‘¸ç´¢ï¼Œéš¾ä»¥è¯†åˆ«é€»è¾‘é”™è¯¯ã€åˆè§„æ€§é—®é¢˜ä»¥åŠä¼˜åŒ–ç©ºé—´ã€‚åº”ç”¨æ—¥å¿—è®°å½•æ˜¯å¼€å‘è¿‡ç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œåœ¨ä»£ç ä»æ¦‚å¿µèµ°å‘ç”Ÿäº§çš„è¿‡ç¨‹ä¸­æä¾›å…³é”®æ´å¯Ÿã€‚è€Œé•¿æœŸä»¥æ¥ï¼Œè¿™ä¸€åŠŸèƒ½åœ¨ EdgeWorkers ä¸­ä¸€ç›´ç¼ºå¤±ã€‚</p>
<p>EdgeWorkersÂ æ˜¯å…¨çƒåˆ†å¸ƒæœ€å¹¿çš„æ— æœåŠ¡å™¨è¾¹ç¼˜è®¡ç®—å¹³å°ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿå°†ä¸šåŠ¡é€»è¾‘æ”¾ç½®åœ¨è¾¹ç¼˜ï¼Œä»¥å‡å°‘å»¶è¿Ÿã€åŠ å¿«å“åº”æ—¶é—´ã€æé«˜æ€§èƒ½ï¼Œå¹¶ä¸ºå…¨çƒå®¢æˆ·æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼ŒEdgeWorkers çš„å¯è§‚æµ‹æ€§å¾—åˆ°äº†æå¤§æ”¹å–„ï¼è‡ª Akamai æ¨å‡º EdgeWorkers ä¸ DataStreamï¼ˆä¸€ä¸ªå…è´¹çš„é›†ä¸­å¼æ•°æ®æ”¶é›†å’Œäº¤ä»˜å¹³å°ï¼‰çš„é›†æˆä»¥æ¥ï¼Œå·²ç»è¿‡å»äº†å‡ ä¸ªæœˆã€‚å€ŸåŠ©è¿™é¡¹æ–°çš„æ—¥å¿—è®°å½•é›†æˆï¼Œå¼€å‘äººå‘˜ç°åœ¨å¯ä»¥ä¸ºå…¶å…³é”®ä»»åŠ¡çš„ EdgeWorker å·¥ä½œè´Ÿè½½è®¾ç½®æ—¥å¿—ã€‚æŒ‰ç…§æ—¥å¿—è®°å½•çš„æ ‡å‡†ï¼Œæä¾›äº†å¤šç§è¯¦ç»†çº§åˆ«ï¼šè·Ÿè¸ªã€è°ƒè¯•ã€ä¿¡æ¯ã€è­¦å‘Šå’Œé”™è¯¯ã€‚æ§åˆ¶æ—¥å¿—çº§åˆ«ä¸ºåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜æä¾›äº†çµæ´»æ€§å’Œé€‰é¡¹ï¼Œä»¥ä¾¿æ’æŸ¥å…¶ EdgeWorkers é€»è¾‘æ•…éšœã€‚</p>
<p>åœ¨æ¨å‡º DataStream é›†æˆä¹‹å‰ï¼ŒEdgeWorker å¼€å‘äººå‘˜ä¼šä½¿ç”¨é«˜çº§æ ‡å¤´å’Œæ‰‹åŠ¨æ£€æŸ¥æ¥è°ƒè¯•å…¶ä»£ç å’Œå·¥ä½œæµï¼Œè¿™ç§æ–¹å¼ç¹çã€è€—æ—¶ä¸”å®¹æ˜“å‡ºé”™ï¼Œå¾ˆå®¹æ˜“é”™è¿‡å…³é”®æ´å¯Ÿã€‚æ­¤å¤–ï¼Œå€ŸåŠ©å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ›´è½»æ¾åœ°æ£€æµ‹é‚£äº›åœ¨ç®€å• cURL è¯·æ±‚ä¸­å¯èƒ½æ— æ³•æ˜¾ç°çš„å¼‚å¸¸æƒ…å†µã€‚</p>
<p>DataStream é›†æˆçš„ä¸€ä¸ªä¾¿æ·ç‰¹æ€§æ˜¯ï¼Œæ— éœ€ç¼–è¾‘å’Œé‡æ–°éƒ¨ç½²ä»£ç å³å¯ä¿®æ”¹åœ¨ EdgeWorkers ä»£ç åŒ…ä¸­å®šä¹‰çš„æ—¥å¿—çº§åˆ«ã€‚ä½¿ç”¨æ—¥å¿—"è¦†ç›–"ï¼Œå¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢å‡½æ•°æ—¥å¿—ä»¥è®¾ç½®æ—¥å¿—çº§åˆ«å’Œè¯¦ç»†ç¨‹åº¦ï¼Œå…è®¸ç”¨æˆ·ä»…åœ¨éœ€è¦æ›´ç»†ç²’åº¦ä¿¡æ¯ä¹‹å‰è®°å½•é”™è¯¯ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯çµæ´»æ€§ï¼ŒåŒæ—¶æ§åˆ¶æ—¥å¿—é‡ä»¥é¿å…é¢å¤–çš„å¯è§‚æµ‹æ€§æˆæœ¬ã€‚è¯·å‚é˜…ä»¥ä¸‹ç¤ºä¾‹ï¼Œäº†è§£å¦‚ä½•é€šè¿‡ UI æˆ–ä½¿ç”¨ CLI æ§åˆ¶æ—¥å¿—çº§åˆ«ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9a0a65c66614881929790e3e4fad977~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764777416&amp;x-signature=a2eRqas9FxNMmeon8EwC9FurquU%3D" alt="" loading="lazy"/></p>
<p>ä½¿ç”¨ UI è®¾ç½®æ—¥å¿—çº§åˆ«ï¼ˆæ— éœ€é‡æ–°éƒ¨ç½²ä»£ç ï¼‰</p>
<p>ä½¿ç”¨ Akamai CLIï¼Œæ‚¨å¯ä»¥é€šè¿‡ç±»ä¼¼ä»¥ä¸‹å‘½ä»¤è®¾ç½®æ—¥å¿—çº§åˆ«ï¼š</p>
<p>akamai ew log-level set 82236 production debug;</p>
<p>è‡ªè¯¥é›†æˆæ¨å‡ºä»¥æ¥ï¼Œæˆ‘ä»¬å·²ç»å¸çº³äº†ä¼—å¤š Akamai çš„ EdgeWorker å®¢æˆ·ï¼Œä»–ä»¬å·²é…ç½®äº†åº”ç”¨ç¨‹åºæ—¥å¿—æµã€‚EdgeWorker å®¢æˆ·å¯ä»¥é€‰æ‹©å°†å…¶æ—¥å¿—æ•°æ®å‘é€åˆ°ä»–ä»¬é€‰æ‹©çš„ç›®çš„åœ°ï¼Œä¾‹å¦‚æµè¡Œçš„å†…éƒ¨å¯è§‚æµ‹æ€§å·¥å…·ï¼Œå¦‚ Splunkã€New Relic ç­‰ã€‚æœ‰å…³æ”¯æŒçš„ç«¯ç‚¹çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜… DataStream ç›®çš„åœ°åˆ—è¡¨ã€‚</p>
<p>éšç€è®¸å¤šå®¢æˆ·é‡‡ç”¨è¿™ä¸€æ–°åŠŸèƒ½ï¼Œæ—©æœŸåé¦ˆæ˜¯ç§¯æçš„ã€‚ä¸€ä½æ¬§æ´²æ¸¸æˆå®¢æˆ·æåˆ°ï¼Œä»–ä»¬ä½¿ç”¨æ–°çš„ JavaScript æ—¥å¿—è®°å½•åŠŸèƒ½åœ¨ä¸Šçº¿å‰éš”ç¦»äº†æ–°ä¸šåŠ¡é€»è¾‘çš„é—®é¢˜ã€‚å¦ä¸€ä½å®¢æˆ·å¼ºè°ƒäº†æ‹¥æœ‰å¯ç”¨æ—¥å¿—å¯¹äºæ›´å¿«å‘ç°é—®é¢˜çš„é‡è¦æ€§ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ EdgeWorker æ—¥å¿—è®°å½•çš„ä¸»è¦ç›®çš„åœ°ï¼š</p>
<p><strong><strong>EdgeWorker DataStream ä¸»è¦ç›®çš„åœ°</strong></strong></p>
<ul>
<li>AWS S3</li>
<li>Splunk</li>
<li>Datadog</li>
<li>Google Cloud Storage</li>
<li>HTTPS</li>
<li>New Relic</li>
<li>Azure Storage</li>
<li>S3 å…¼å®¹å­˜å‚¨ï¼ˆåŒ…æ‹¬ Akamai çš„å¯¹è±¡å­˜å‚¨ï¼‰</li>
<li>TrafficPeak</li>
<li>Sumo Logic</li>
</ul>
<h4 data-id="heading-0"><strong><strong>EdgeWorker æ—¥å¿—è®°å½•å…¥é—¨</strong></strong></h4>
<p>ä¸ºæ‚¨çš„ EdgeWorkers è®¾ç½®æ—¥å¿—è®°å½•éå¸¸ç®€å•ï¼Œå‰ææ˜¯æ‚¨å·²ç»åœ¨ä»£ç åŒ…ä¸­æ·»åŠ äº†æ—¥å¿—æ¶ˆæ¯ã€‚é¦–å…ˆï¼Œç¡®ä¿æ‚¨çš„åˆçº¦ä¸­åŒ…å«äº†ç”¨äº EdgeWorkers çš„ DataStreamã€‚è¿™æ˜¯ä¸€é¡¹å…è´¹æœåŠ¡ï¼Œä½†éœ€è¦åˆçº¦æˆæƒæ‰èƒ½å¯ç”¨ã€‚è¦æ·»åŠ ç”¨äº EdgeWorkers çš„ DataStreamï¼Œè¯·è”ç³»æ‚¨çš„å®¢æˆ·ä»£è¡¨ã€‚ç„¶åï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¯ç”¨æœåŠ¡ï¼š</p>
<ol>
<li>é€šè¿‡ Control Center çš„é€šç”¨æœåŠ¡éƒ¨åˆ†å¯¼èˆªåˆ° DataStream æœåŠ¡</li>
<li>é€‰æ‹©"åˆ›å»º EdgeWorkers æµ"</li>
<li>ä¸ºæ‚¨çš„æµå‘½å</li>
<li>æœ€åï¼Œä»ç»“æ„åŒ–æˆ– JSON æ ¼å¼ä¸­é€‰æ‹©ï¼Œå¹¶é€‰æ‹©ç›®æ ‡ç›®çš„åœ°ã€‚</li>
</ol>
<p>å°±è¿™æ ·ï¼æ‚¨ç°åœ¨å¯ä»¥ç¼–å†™æ‚¨çš„ EdgeWorkers æ—¥å¿—è®°å½•é€»è¾‘äº†ï¼Œä¸€æ—¦æ¿€æ´»ï¼Œå³å¯å¯ç”¨ Datastream æ¥ä½¿ç”¨å®ƒã€‚è¦äº†è§£æ›´å¤šä¿¡æ¯å¹¶è·å¾—å®Œæ•´çš„åˆ†æ­¥è¯´æ˜ï¼Œè¯·å‚é˜…æœ‰å…³å¯ç”¨å’Œé…ç½® EdgeWorker æ—¥å¿—æµçš„è¯¦ç»†æ–‡æ¡£ã€‚è¯·å‚è€ƒ EdgeWorker JavaScript DataStream è®¾ç½®é¡µé¢ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›è®¾ç½®è¿‡ç¨‹çš„ç¤ºä¾‹æˆªå›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9de1aba16d2149138e0cf8825a4cdf1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764777416&amp;x-signature=Qh6ptPiWuueypuMEqgOfX2VR%2BlY%3D" alt="" loading="lazy"/></p>
<p><strong>è®¾ç½® EW æ—¥å¿—æµ</strong></p>
<p><strong><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb0702ac82784a709f64e889daaafd39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764777416&amp;x-signature=QFmOxZGrjIyOmC7pJaSZPXS6mh0%3D" alt="" loading="lazy"/></strong></p>
<p><strong>é…ç½®æ—¥å¿—æµç›®çš„åœ°</strong></p>
<h4 data-id="heading-1"><strong><strong>EdgeWorker å¯è§‚æµ‹æ€§æœ‰å“ªäº›æ–°åŠŸèƒ½å’Œå³å°†æ¨å‡ºçš„åŠŸèƒ½ï¼Ÿ</strong></strong></h4>
<p>æœªæ¥çš„æ”¹è¿›è®¾æƒ³åŒ…æ‹¬å¯ç”¨ OpenTelemetry æ ¼å¼ã€æ”¯æŒæ•°æ®æœ¬åœ°åŒ–ï¼Œä»¥åŠå¯èƒ½å…è®¸åŸºäºå±æ€§çš„æµå¼ä¼ è¾“ï¼Œè€Œä¸æ˜¯æŒ‰æ¯ä¸ª EdgeWorker è¿›è¡Œè·Ÿè¸ªã€‚å…³äºå¯è§‚æµ‹æ€§æ–¹é¢ï¼Œæ‚¨å¯ä»¥åœ¨ ACC é—¨æˆ·ä¸­çš„ EdgeWorkers æ‰§è¡ŒæŠ¥å‘Šä¸­æœŸå¾…æ”¹è¿›ï¼Œå› ä¸ºæˆ‘ä»¬å¾ˆå¿«å°†æ·»åŠ æŒ‚é’Ÿæ—¶é—´è·Ÿè¸ªã€åˆå§‹åŒ–æŒ‡æ ‡å¹¶ç®€åŒ–æŠ¥å‘Šã€‚</p>
<p>ä¸€å¦‚æ—¢å¾€ï¼Œå¦‚æœæ‚¨å¯¹å¦‚ä½•æ”¹è¿› EdgeWorker å¯è§‚æµ‹æ€§æˆ–æœåŠ¡çš„ä»»ä½•å…¶ä»–æ–¹é¢æœ‰ä»»ä½•ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»æ‚¨çš„å®¢æˆ·ä»£è¡¨ï¼Œæˆ–åœ¨æˆ‘ä»¬<a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.akamai.com%2Fcustomers%2Fs%2F%3Flanguage%3Dzh_CN%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251126_external1_blogarticles230" target="_blank" title="https://community.akamai.com/customers/s/?language=zh_CN?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251126_external1_blogarticles230" ref="nofollow noopener noreferrer">ç¤¾åŒºç½‘ç«™</a>ä¸Šç»™æˆ‘ä»¬ç•™è¨€ã€‚ç¥æ‚¨æ—¥å¿—è®°å½•æ„‰å¿«ï¼</p>
<h4 data-id="heading-2"><strong><strong>äº†è§£æ›´å¤šå…³äº Akamai EdgeWorkers çš„ä¿¡æ¯</strong></strong></h4>
<p>æŸ¥çœ‹è¿™äº› Akamai èµ„æºï¼Œäº†è§£ Akamai EdgeWorkers å¦‚ä½•ä½¿æ‚¨çš„ç»„ç»‡å—ç›Šï¼š</p>
<ul>
<li>EdgeWorkers TechDocs æ–‡æ¡£</li>
<li>EdgeCompute æä¾›çš„ EdgeWorkers ä»£ç ç¤ºä¾‹</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcommunity.akamai.com%2Fcustomers%2Fs%2F%3Flanguage%3Dzh_CN%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejing_251126_external2_blogarticles230" target="_blank" title="https://community.akamai.com/customers/s/?language=zh_CN?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejing_251126_external2_blogarticles230" ref="nofollow noopener noreferrer">Akamai å¼€å‘è€…è®¨è®ºè®ºå›</a></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86d8e91c09a44f92ac095b95313ad95c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUtBTUFJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764777416&amp;x-signature=a6aQMDIPynw%2FDxWMTrxV02iFPhs%3D" alt="" loading="lazy"/></p>
<p>å¦‚æ‚¨æ‰€åœ¨çš„ä¼ä¸šä¹Ÿåœ¨è€ƒè™‘é‡‡è´­äº‘æœåŠ¡æˆ–è¿›è¡Œäº‘è¿ç§»ï¼Œ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linode.com%2Fzh%2Flp%2Fakamai-cloud-computing-freetrial%2F%3Futm_campaign%3Df-mc-65893%26utm_id%3Dapj_cc%26utm_source%3Djuejin%26utm_medium%3Darticle_advertorial%26utm_content%3Djuejin_251126_blogarticles230_end" target="_blank" title="https://www.linode.com/zh/lp/akamai-cloud-computing-freetrial/?utm_campaign=f-mc-65893&amp;utm_id=apj_cc&amp;utm_source=juejin&amp;utm_medium=article_advertorial&amp;utm_content=juejin_251126_blogarticles230_end" ref="nofollow noopener noreferrer">ç‚¹å‡»é“¾æ¥</a>äº†è§£Akamai Linodeè§£å†³æ–¹æ¡ˆï¼Œç°åœ¨ç”³è¯·è¯•ç”¨å¯å¾—é«˜è¾¾500ç¾å…ƒä¸“å±é¢åº¦</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[K8s: å¦‚ä½•é€šè¿‡kubectlå‘½ä»¤å®æ—¶ç›‘æ§æ»šåŠ¨æ›´æ–°çš„è¯¦ç»†è¿‡ç¨‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576893180080504874</link>    <guid>https://juejin.cn/post/7576893180080504874</guid>    <pubDate>2025-11-26T14:06:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576893180080504874" data-draft-id="7576888607479562259" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="K8s: å¦‚ä½•é€šè¿‡kubectlå‘½ä»¤å®æ—¶ç›‘æ§æ»šåŠ¨æ›´æ–°çš„è¯¦ç»†è¿‡ç¨‹ï¼Ÿ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-26T14:06:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            K8s: å¦‚ä½•é€šè¿‡kubectlå‘½ä»¤å®æ—¶ç›‘æ§æ»šåŠ¨æ›´æ–°çš„è¯¦ç»†è¿‡ç¨‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:06:48.000Z" title="Wed Nov 26 2025 14:06:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kubernetes ä¸­å®æ—¶ç›‘æ§æ»šåŠ¨æ›´æ–°çš„è¯¦ç»†è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡ç»„åˆä½¿ç”¨å¤šä¸ª <code>kubectl</code>å‘½ä»¤æ¥å®ç°ã€‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ±‡æ€»äº†æœ€æ ¸å¿ƒçš„å‘½ä»¤åŠå…¶ç”¨é€”ï¼Œä½ å¯ä»¥æ ¹æ®ä¸åŒçš„ç›‘æ§éœ€æ±‚æ¥é€‰æ‹©ã€‚</p>






























<table><thead><tr><th>ç›‘æ§å‘½ä»¤</th><th>ä¸»è¦ç”¨é€”</th><th>å…³é”®å‚æ•° / è¯´æ˜</th></tr></thead><tbody><tr><td><code>kubectl rollout status deployment/&lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>æ ¸å¿ƒè¿›åº¦ç›‘æ§</strong>ï¼šå®æ—¶æ˜¾ç¤ºæ›´æ–°æ•´ä½“è¿›åº¦ï¼Œç›´åˆ°å®Œæˆæˆ–å¤±è´¥ã€‚</td><td>æ— ç‰¹æ®Šå‚æ•°ï¼Œä¸“æ³¨äºè¿›åº¦çŠ¶æ€ã€‚</td></tr><tr><td><code>kubectl get pods -w -l &lt;æ ‡ç­¾&gt;</code></td><td><strong>Podçº§åˆ«è¯¦æƒ…</strong>ï¼šåŠ¨æ€æ˜¾ç¤ºPodçš„æ–°æ—§æ›¿æ¢ã€çŠ¶æ€å˜åŒ–ç­‰è¯¦ç»†è¿‡ç¨‹ã€‚</td><td><code>-w</code>ç”¨äºå®æ—¶ç›‘è§†ï¼›<code>-l</code>æŒ‰æ ‡ç­¾ç­›é€‰ç‰¹å®šDeploymentçš„Podã€‚</td></tr><tr><td><code>kubectl describe deployment &lt;éƒ¨ç½²åç§°&gt;</code></td><td><strong>äº‹ä»¶ä¸é…ç½®æ´å¯Ÿ</strong>ï¼šæŸ¥çœ‹æ›´æ–°è§¦å‘åŸå› ã€ReplicaSetå˜åŒ–åŠå…³é”®äº‹ä»¶æ—¥å¿—ã€‚</td><td>è¾“å‡ºä¿¡æ¯è¯¦ç»†ï¼Œé€‚åˆåœ¨æ›´æ–°åœæ»æˆ–å‡ºé”™æ—¶æ·±æŒ–åŸå› ã€‚</td></tr><tr><td><code>kubectl get replicasets -w</code></td><td><strong>å¹•åè§†è§’</strong>ï¼šè§‚å¯Ÿä¸ºæ–°æ—§ç‰ˆæœ¬åˆ›å»ºçš„ReplicaSetåŠå…¶å‰¯æœ¬æ•°é‡çš„å˜åŒ–ã€‚</td><td>äº†è§£Deploymentæ§åˆ¶å™¨å¦‚ä½•é€šè¿‡ç®¡ç†ReplicaSetæ¥å®Œæˆæ»šåŠ¨æ›´æ–°ã€‚</td></tr></tbody></table>
<h3 data-id="heading-0">ğŸ§© ç†è§£ç›‘æ§çš„å…³é”®èŠ‚ç‚¹</h3>
<p>åœ¨ç›‘æ§æ—¶ï¼Œç†è§£ä¸€äº›å…³é”®çŠ¶æ€çš„å«ä¹‰èƒ½è®©ä½ æ›´æ¸…æ¥šæ›´æ–°è¿›è¡Œåˆ°äº†å“ªä¸€æ­¥ï¼š</p>
<ul>
<li><strong><code>UP-TO-DATE</code></strong>ï¼šæ˜¾ç¤ºå½“å‰å·²æ›´æ–°åˆ°æ–°ç‰ˆæœ¬çš„ Pod æ•°é‡ã€‚</li>
<li><strong><code>AVAILABLE</code></strong>ï¼šæ˜¾ç¤ºå½“å‰å¯ä¾›ç”¨æˆ·ä½¿ç”¨çš„ Pod æ•°é‡ï¼Œè¿™äº› Pod å·²ç»å¤„äºå°±ç»ªï¼ˆReadyï¼‰çŠ¶æ€ã€‚</li>
<li><strong>Pod çš„çŠ¶æ€</strong>ï¼šåœ¨ <code>kubectl get pods</code>çš„è¾“å‡ºä¸­ï¼Œ<code>ContainerCreating</code>è¡¨ç¤ºPodæ­£åœ¨åˆ›å»ºï¼Œ<code>Terminating</code>è¡¨ç¤ºæ—§Podæ­£åœ¨ç»ˆæ­¢ã€‚</li>
</ul>
<h3 data-id="heading-1">ğŸ› ï¸ ç»¼åˆç›‘æ§å®æˆ˜ç¤ºä¾‹</h3>
<p>å‡è®¾ä½ è¦ç›‘æ§ä¸€ä¸ªåä¸º <code>my-app</code>çš„ Deployment çš„æ›´æ–°è¿‡ç¨‹ã€‚</p>
<ol>
<li>
<p><strong>è§¦å‘æ›´æ–°</strong>ï¼šé¦–å…ˆæ‰§è¡Œæ›´æ–°å‘½ä»¤ï¼Œä¾‹å¦‚æ›´æ–°é•œåƒç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">kubectl set image deployment/<span class="hljs-keyword">my</span>-app <span class="hljs-keyword">my</span>-app=<span class="hljs-keyword">my</span>-app:v2.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>
</code></pre>
</li>
<li>
<p><strong>å¼€å¯å¤šä¸ªç»ˆç«¯æ ‡ç­¾é¡µè¿›è¡Œç»¼åˆç›‘æ§</strong>ï¼š</p>
<ul>
<li>
<p><strong>æ ‡ç­¾é¡µ1ï¼šå¯åŠ¨æ ¸å¿ƒè¿›åº¦ç›‘æ§</strong></p>
<pre><code class="hljs language-bash" lang="bash">kubectl rollout status deployment/my-app
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤ä¼šæŒç»­è¾“å‡ºç±»ä¼¼ <code>Waiting for rollout to finish: 2 out of 3 new replicas have been updated...</code>çš„ä¿¡æ¯ï¼Œå¹¶åœ¨æˆåŠŸåæç¤º <code>deployment "my-app" successfully rolled out</code>ã€‚</p>
</li>
<li>
<p><strong>æ ‡ç­¾é¡µ2ï¼šå¯åŠ¨Podè¯¦æƒ…ç›‘æ§</strong></p>
<pre><code class="hljs language-ini" lang="ini">kubectl get pods -w -l <span class="hljs-attr">app</span>=my-app
</code></pre>
<p>è¿™é‡Œä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°Kuberneteså¦‚ä½•é€æ­¥å¯åŠ¨æ–°Podï¼ˆçŠ¶æ€ä» <code>Pending</code>åˆ° <code>ContainerCreating</code>å†åˆ° <code>Running</code>ï¼‰ï¼Œå¹¶ç»ˆæ­¢æ—§Podï¼ˆçŠ¶æ€å˜ä¸º <code>Terminating</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ ‡ç­¾é¡µ3ï¼ˆå¯é€‰ï¼‰ï¼šå¯åŠ¨å¹•åè§†è§’ç›‘æ§</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">kubectl get replicasets -w
</code></pre>
<p>æ­¤å‘½ä»¤å¯è®©ä½ è§‚å¯Ÿåˆ°ï¼ŒDeployment ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ ReplicaSet æ¥ç®¡ç†æ–°ç‰ˆæœ¬çš„ Podï¼ˆå…¶å‰¯æœ¬æ•°ä»0é€æ­¥å¢åŠ ï¼‰ï¼Œè€Œæ—§çš„ ReplicaSet çš„å‰¯æœ¬æ•°åˆ™é€æ¸ç¼©å‡åˆ°0ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é‡åˆ°é—®é¢˜æ—¶è¿›è¡Œæ·±åº¦æ’æŸ¥</strong>ï¼šå¦‚æœæ›´æ–°å¡ä½æˆ–å¤±è´¥ï¼Œä½¿ç”¨ <code>describe</code>å‘½ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å’Œäº‹ä»¶ã€‚</p>
<pre><code class="hljs language-perl" lang="perl">kubectl describe deployment <span class="hljs-keyword">my</span>-app
</code></pre>
<p>åœ¨è¾“å‡ºç»“æœçš„ <code>Events</code>éƒ¨åˆ†ï¼ŒåŒ…å«äº†å…³äºæ»šåŠ¨æ›´æ–°è¿‡ç¨‹çš„è¯¦ç»†æ—¥å¿—ï¼Œä¾‹å¦‚ <code>Scaled up replica set my-app-7c54d5c99 to 1</code>ï¼ˆæ‰©å®¹æ–°ReplicaSetï¼‰å’Œ <code>Scaled down replica set my-app-7d47f45c6 to 2</code>ï¼ˆç¼©å®¹æ—§ReplicaSetï¼‰ç­‰ï¼Œè¿™å¯¹äºæ’æŸ¥å°±ç»ªæ¢é’ˆå¤±è´¥ã€èµ„æºä¸è¶³ç­‰é—®é¢˜éå¸¸æœ‰å¸®åŠ©ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">ğŸ’¡ è¿›é˜¶æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h3>
<ul>
<li>
<p><strong>å°±ç»ªæ¢é’ˆçš„é‡è¦æ€§</strong>ï¼šä¸ºäº†ä½¿ <code>rollout status</code>å‘½ä»¤èƒ½å‡†ç¡®åˆ¤æ–­æ–°Podæ˜¯å¦å¯ç”¨ï¼Œä½ çš„Podå®šä¹‰ä¸­å¿…é¡»é…ç½®æœ‰æ•ˆçš„ <code>readinessProbe</code>ï¼ˆå°±ç»ªæ¢é’ˆï¼‰ã€‚Kubernetes åªæœ‰åœ¨æ–°Podçš„å°±ç»ªæ¢é’ˆæ£€æŸ¥é€šè¿‡åï¼Œæ‰ä¼šè®¤ä¸ºè¯¥Podå·²å°±ç»ªï¼Œç„¶åç»§ç»­æ›¿æ¢ä¸‹ä¸€ä¸ªæ—§Podã€‚</p>
</li>
<li>
<p><strong>è¿›åº¦æœŸé™</strong>ï¼šDeployment æœ‰ä¸€ä¸ª <code>progressDeadlineSeconds</code>é…ç½®ï¼ˆé»˜è®¤ä¸º600ç§’ï¼‰ã€‚å¦‚æœæ›´æ–°è¿‡ç¨‹è¶…è¿‡æ­¤æ—¶é—´ä»æœªå®Œæˆï¼ŒKubernetes ä¼šå°†å…¶æ ‡è®°ä¸ºå¤±è´¥ã€‚ä½ å¯ä»¥é€šè¿‡ <code>kubectl describe deployment</code>å‘½ä»¤çš„ç»“æœæ¥æŸ¥çœ‹çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>ä¸€é”®å›æ»š</strong>ï¼šå¦‚æœå‘ç°æ–°ç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œå¯ä»¥å¿«é€Ÿå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">kubectl rollout undo deployment/my-app
</code></pre>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Grab åŸç†ç¯‡ï¼šå®ƒæ˜¯æ€ä¹ˆ"å·çª¥" React çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576843726011973658</link>    <guid>https://juejin.cn/post/7576843726011973658</guid>    <pubDate>2025-11-26T14:21:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011973658" data-draft-id="7576856418470707210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Grab åŸç†ç¯‡ï¼šå®ƒæ˜¯æ€ä¹ˆ&quot;å·çª¥&quot; React çš„ï¼Ÿ"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,äººå·¥æ™ºèƒ½,React.js"/> <meta itemprop="datePublished" content="2025-11-26T14:21:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Grab åŸç†ç¯‡ï¼šå®ƒæ˜¯æ€ä¹ˆ"å·çª¥" React çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:21:33.000Z" title="Wed Nov 26 2025 14:21:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬ä»‹ç»äº† React Grab æ˜¯ä»€ä¹ˆã€æ€ä¹ˆç”¨ã€‚</p>
<p>è¿™ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¥èŠç‚¹ç¡¬æ ¸çš„â€”â€”<strong>å®ƒåˆ°åº•æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</strong></p>
<p>å½“ä½ æŒ‰ä¸‹ <code>âŒ˜C</code> ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒæ˜¯æ€ä¹ˆçŸ¥é“è¿™ä¸ªæŒ‰é’®ï¼š</p>
<ul>
<li>ä½åœ¨å“ªä¸ªæ–‡ä»¶</li>
<li>ç¬¬å‡ è¡Œä»£ç </li>
<li>å±äºå“ªä¸ªç»„ä»¶</li>
<li>æœ‰ä»€ä¹ˆæ ·å¼</li>
</ul>
<p>è®©æˆ‘ä»¬æ€å¼€å®ƒçš„åº•è£¤çœ‹çœ‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">æ•´ä½“æ¶æ„ï¼šä¸‰å±‚è›‹ç³•</h2>
<p>React Grab çš„æ¶æ„å¯ä»¥ç†è§£ä¸ºä¸‰å±‚è›‹ç³•ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph ReactGrab["React Grab"]
        subgraph Layers["ä¸‰å±‚æ¶æ„"]
            Event["ğŸ¯ äº‹ä»¶å±‚&lt;br/&gt;(åŸç”Ÿ DOM)"]
            Analysis["ğŸ” åˆ†æå±‚&lt;br/&gt;(bippy)"]
            UI["ğŸ¨ UI å±‚&lt;br/&gt;(Solid.js)"]
        end

        Core["âš™ï¸ æ ¸å¿ƒåè°ƒå™¨&lt;br/&gt;(core.tsx)"]
        Clipboard["ğŸ“‹ å‰ªè´´æ¿ API"]

        Event --&gt; Core
        Analysis --&gt; Core
        UI --&gt; Core
        Core --&gt; Clipboard
    end

    style Event fill:#e1f5fe
    style Analysis fill:#fff3e0
    style UI fill:#f3e5f5
    style Core fill:#e8f5e9
    style Clipboard fill:#fce4ec
</code></pre>
<p><strong>ç¬¬ä¸€å±‚ï¼šäº‹ä»¶å±‚</strong> - ç›‘å¬ä½ çš„é”®ç›˜å’Œé¼ æ ‡ï¼ŒçŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™æƒ³"æŠ“"ä¸œè¥¿</p>
<p><strong>ç¬¬äºŒå±‚ï¼šåˆ†æå±‚</strong> - æ‹¿åˆ°ä½ ç‚¹å‡»çš„å…ƒç´ åï¼Œå» React å†…éƒ¨"å·"ä¿¡æ¯</p>
<p><strong>ç¬¬ä¸‰å±‚ï¼šUI å±‚</strong> - åœ¨é¡µé¢ä¸Šç”»é«˜äº®æ¡†ã€æ˜¾ç¤ºæ ‡ç­¾</p>
<p>æœ€åï¼Œæ ¸å¿ƒåè°ƒå™¨æŠŠæ‰€æœ‰ä¿¡æ¯æ‰“åŒ…ï¼Œæ‰”è¿›å‰ªè´´æ¿ã€‚</p>
<hr/>
<h2 data-id="heading-2">ç¬¬ä¸€å±‚ï¼šäº‹ä»¶ç›‘å¬</h2>
<h3 data-id="heading-3">å®ƒæ€ä¹ˆçŸ¥é“ä½ è¦æŠ“ï¼Ÿ</h3>
<p>ç”¨æˆ·äº¤äº’çš„çŠ¶æ€æœºï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2
    [*] --&gt; å¾…å‘½: é¡µé¢åŠ è½½

    å¾…å‘½ --&gt; æŠ“å–æ¨¡å¼: æŒ‰ä¸‹ âŒ˜C / Ctrl+C
    æŠ“å–æ¨¡å¼ --&gt; å¾…å‘½: æ¾å¼€æŒ‰é”®

    æŠ“å–æ¨¡å¼ --&gt; æ‚¬åœé«˜äº®: é¼ æ ‡ç§»åŠ¨åˆ°å…ƒç´ 
    æ‚¬åœé«˜äº® --&gt; æŠ“å–æ¨¡å¼: é¼ æ ‡ç§»å¼€

    æ‚¬åœé«˜äº® --&gt; æ‰§è¡ŒæŠ“å–: é¼ æ ‡ç‚¹å‡»
    æ‰§è¡ŒæŠ“å– --&gt; å¤åˆ¶å®Œæˆ: å†™å…¥å‰ªè´´æ¿
    å¤åˆ¶å®Œæˆ --&gt; æŠ“å–æ¨¡å¼: ç»§ç»­é€‰æ‹©å…¶ä»–å…ƒç´ 
    å¤åˆ¶å®Œæˆ --&gt; å¾…å‘½: æ¾å¼€æŒ‰é”®
</code></pre>
<p>React Grab ç›‘å¬ä¸‰ç±»äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ AbortController ç»Ÿä¸€ç®¡ç†äº‹ä»¶ç›‘å¬å™¨</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();

<span class="hljs-comment">// 1. é”®ç›˜äº‹ä»¶ï¼šæ£€æµ‹ Cmd+C / Ctrl+C</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> ((e.<span class="hljs-property">metaKey</span> || e.<span class="hljs-property">ctrlKey</span>) &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">'c'</span>) {
    <span class="hljs-title function_">activateGrabMode</span>();  <span class="hljs-comment">// è¿›å…¥"æŠ“å–æ¨¡å¼"</span>
  }
}, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });

<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keyup'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">'Meta'</span> || e.<span class="hljs-property">key</span> === <span class="hljs-string">'Control'</span>) {
    <span class="hljs-title function_">deactivateGrabMode</span>();  <span class="hljs-comment">// é€€å‡º"æŠ“å–æ¨¡å¼"</span>
  }
}, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });

<span class="hljs-comment">// 2. é¼ æ ‡ç§»åŠ¨ï¼šè¿½è¸ªæ‚¬åœä½ç½®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousemove'</span>, handleMouseMove, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });

<span class="hljs-comment">// 3. é¼ æ ‡ç‚¹å‡»ï¼šæ‰§è¡ŒæŠ“å–</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mousedown'</span>, handleMouseDown, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'mouseup'</span>, handleMouseUp, { <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span> });
</code></pre>
<h3 data-id="heading-4">ä¸ºä»€ä¹ˆé«˜äº®ä¸ä¼š"æŠ–"ï¼Ÿ</h3>
<p>å¦‚æœé¼ æ ‡ç¨å¾®åŠ¨ä¸€ä¸‹å°±åˆ‡æ¢é«˜äº®å…ƒç´ ï¼Œä½“éªŒä¼šå¾ˆå·®ã€‚</p>
<p>React Grab ç”¨äº†ä¸€ä¸ªå°æŠ€å·§â€”â€”<strong>ç¨³å®šæ£€æµ‹</strong>ï¼š</p>
<ul>
<li>é¼ æ ‡ç§»åŠ¨è¶…è¿‡ 200px æ‰é‡æ–°è®¡ç®—</li>
<li>åœç•™ 100ms åæ‰æ˜¾ç¤ºé«˜äº®</li>
<li>åªæœ‰"ç¨³å®š"æ‚¬åœæ—¶æ‰è§¦å‘</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¿«é€Ÿåˆ’è¿‡å…ƒç´ æ—¶ï¼Œé«˜äº®æ¡†ä¸ä¼šç–¯ç‹‚é—ªçƒã€‚</p>
<hr/>
<h2 data-id="heading-5">ç¬¬äºŒå±‚ï¼šReact Fiber è®¿é—®ï¼ˆæ ¸å¿ƒé»‘é­”æ³•ï¼‰</h2>
<p>è¿™æ˜¯æ•´ä¸ªå·¥å…·æœ€ç²¾å½©çš„éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯ Fiberï¼Ÿ</h3>
<p>Fiber æ˜¯ React 16+ çš„å†…éƒ¨æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸º React çš„"ç§äººç¬”è®°æœ¬"ï¼Œè®°å½•äº†æ¯ä¸ªç»„ä»¶çš„ï¼š</p>
<ul>
<li>å®ƒæ˜¯è°ï¼ˆç»„ä»¶ç±»å‹ï¼‰</li>
<li>å®ƒé•¿ä»€ä¹ˆæ ·ï¼ˆpropsï¼‰</li>
<li>å®ƒç°åœ¨çš„çŠ¶æ€ï¼ˆstateï¼‰</li>
<li>å®ƒçš„å®¶äººæ˜¯è°ï¼ˆçˆ¶/å­/å…„å¼ŸèŠ‚ç‚¹ï¼‰</li>
<li><strong>å®ƒä»å“ªé‡Œæ¥</strong>ï¼ˆæºä»£ç ä½ç½®ï¼‰</li>
</ul>
<p>æœ€åä¸€æ¡æ˜¯å…³é”®â€”â€”React åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¼šå·å·è®°å½•æ¯ä¸ªç»„ä»¶çš„æºä»£ç ä½ç½®ã€‚</p>
<h3 data-id="heading-7">æ€ä¹ˆè®¿é—® Fiberï¼Ÿ</h3>
<p>React Grab ä½¿ç”¨äº†ä¸€ä¸ªå« <code>bippy</code> çš„åº“ï¼ˆä¹Ÿæ˜¯ä½œè€… Aiden Bai å†™çš„ï¼‰æ¥è®¿é—® Fiberï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { _fiberRoots <span class="hljs-keyword">as</span> fiberRoots, instrument } <span class="hljs-keyword">from</span> <span class="hljs-string">"bippy"</span>;

<span class="hljs-comment">// æ³¨å†Œä¸€ä¸ª"é—´è°"ï¼Œç›‘å¬ React çš„ commit é˜¶æ®µ</span>
<span class="hljs-title function_">instrument</span>({
  <span class="hljs-title function_">onCommitFiberRoot</span>(<span class="hljs-params">_, fiberRoot</span>) {
    <span class="hljs-comment">// æ¯æ¬¡ React æ¸²æŸ“å®Œæˆï¼Œå°±æŠŠ fiber æ ¹èŠ‚ç‚¹æ”¶é›†èµ·æ¥</span>
    fiberRoots.<span class="hljs-title function_">add</span>(fiberRoot);
  },
});
</code></pre>
<p>è¿™æ®µä»£ç åšäº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>React æ¯æ¬¡æ¸²æŸ“å®Œæˆï¼ˆcommitï¼‰ï¼Œéƒ½ä¼šè§¦å‘è¿™ä¸ªå›è°ƒ</li>
<li><code>bippy</code> æŠŠ Fiber æ ¹èŠ‚ç‚¹å­˜èµ·æ¥</li>
<li>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥ä»è¿™äº›æ ¹èŠ‚ç‚¹éå†æ•´æ£µ Fiber æ ‘</li>
</ol>
<h3 data-id="heading-8">ä» DOM åˆ° Fiber</h3>
<p>å½“ä½ ç‚¹å‡»ä¸€ä¸ª DOM å…ƒç´ ï¼ŒReact Grab éœ€è¦æ‰¾åˆ°å®ƒå¯¹åº”çš„ Fiber èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    DOM["ğŸ–±ï¸ DOM å…ƒç´ &lt;br/&gt;(HTMLElement)"]
    Fiber["ğŸ§¬ Fiber èŠ‚ç‚¹&lt;br/&gt;(_debugSource)"]
    Source["ğŸ“ æºä»£ç ä½ç½®&lt;br/&gt;(fileName, lineNumber)"]

    DOM --&gt;|"__reactFiber$xxx"| Fiber
    Fiber --&gt;|"è¯»å– _debugSource"| Source

    style DOM fill:#e3f2fd
    style Fiber fill:#fff8e1
    style Source fill:#e8f5e9
</code></pre>
<p>å…·ä½“æ€ä¹ˆåšï¼ŸReact ä¼šåœ¨ DOM å…ƒç´ ä¸ŠæŒ‚ä¸€ä¸ªéšè—å±æ€§ï¼ŒæŒ‡å‘å¯¹åº”çš„ Fiber èŠ‚ç‚¹ã€‚<code>bippy</code> å°è£…äº†è¿™ä¸ªé€»è¾‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> {
  getSourceFromHostInstance,
  normalizeFileName,
  isSourceFile
} <span class="hljs-keyword">from</span> <span class="hljs-string">"bippy/dist/source"</span>;

<span class="hljs-comment">// ä» DOM å…ƒç´ è·å–æºä»£ç ä½ç½®</span>
<span class="hljs-keyword">const</span> source = <span class="hljs-title function_">getSourceFromHostInstance</span>(domElement);
<span class="hljs-comment">// è¿”å›: { fileName: 'src/Button.tsx', lineNumber: 42, columnNumber: 5 }</span>
</code></pre>
<p>ä¸€è¡Œä»£ç ï¼Œå°±æ‹¿åˆ°äº†æ–‡ä»¶è·¯å¾„å’Œè¡Œå·ã€‚</p>
<hr/>
<h2 data-id="heading-9">æºä»£ç ä½ç½®æ˜¯å“ªæ¥çš„ï¼Ÿ</h2>
<p>ä½ å¯èƒ½å¥½å¥‡ï¼šReact æ€ä¹ˆçŸ¥é“æ¯ä¸ªç»„ä»¶åœ¨æºä»£ç çš„å“ªä¸€è¡Œï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>Babel æ’ä»¶</strong>ã€‚</p>
<h3 data-id="heading-10">ç¼–è¯‘æ—¶æ³¨å…¥</h3>
<p>æ•´ä¸ªæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph Dev["å¼€å‘æ—¶"]
        JSX["ğŸ“ JSX ä»£ç &lt;br/&gt;&amp;lt;Button&amp;gt;æäº¤&amp;lt;/Button&amp;gt;"]
        Babel["ğŸ”§ Babel ç¼–è¯‘"]
        JS["ğŸ“„ å¸¦ __source çš„ JS"]
    end

    subgraph Runtime["è¿è¡Œæ—¶"]
        React["âš›ï¸ React åˆ›å»º Fiber"]
        Fiber["ğŸ§¬ Fiber èŠ‚ç‚¹&lt;br/&gt;_debugSource"]
    end

    subgraph Tool["React Grab"]
        Grab["ğŸ¯ è¯»å– _debugSource"]
        Output["ğŸ“‹ è¾“å‡ºä½ç½®ä¿¡æ¯"]
    end

    JSX --&gt;|"@babel/plugin-transform-react-jsx-source"| Babel
    Babel --&gt; JS
    JS --&gt;|"React.createElement()"| React
    React --&gt; Fiber
    Fiber --&gt;|"bippy"| Grab
    Grab --&gt; Output

    style JSX fill:#e3f2fd
    style Babel fill:#fff3e0
    style JS fill:#e8f5e9
    style React fill:#e1f5fe
    style Fiber fill:#fff8e1
    style Grab fill:#f3e5f5
    style Output fill:#fce4ec
</code></pre>
<p>å½“ä½ å†™ JSXï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx">&lt;<span class="hljs-title class_">Button</span> onClick={handleClick}&gt;æäº¤&lt;/<span class="hljs-title class_">Button</span>&gt;
</code></pre>
<p>Babel åœ¨å¼€å‘æ¨¡å¼ä¸‹ä¼šæŠŠå®ƒè½¬æ¢æˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Button</span>, {
  <span class="hljs-attr">onClick</span>: handleClick,
  <span class="hljs-attr">__source</span>: {
    <span class="hljs-attr">fileName</span>: <span class="hljs-string">"/src/App.tsx"</span>,
    <span class="hljs-attr">lineNumber</span>: <span class="hljs-number">42</span>,
    <span class="hljs-attr">columnNumber</span>: <span class="hljs-number">5</span>
  }
}, <span class="hljs-string">"æäº¤"</span>)
</code></pre>
<p>çœ‹åˆ°äº†å—ï¼Ÿ<code>__source</code> å±æ€§æ˜¯ Babel è‡ªåŠ¨åŠ çš„ã€‚</p>
<p>è¿™æ˜¯ç”± <code>@babel/plugin-transform-react-jsx-source</code> æ’ä»¶å®Œæˆçš„ï¼ŒReact è„šæ‰‹æ¶ï¼ˆCreate React Appã€Viteã€Next.jsï¼‰åœ¨å¼€å‘æ¨¡å¼ä¸‹éƒ½ä¼šè‡ªåŠ¨å¯ç”¨å®ƒã€‚</p>
<h3 data-id="heading-11">å­˜å‚¨åœ¨ Fiber ä¸­</h3>
<p>React æ‹¿åˆ° <code>__source</code> åï¼Œä¼šæŠŠå®ƒå­˜åˆ° Fiber èŠ‚ç‚¹çš„ <code>_debugSource</code> å­—æ®µï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">fiber.<span class="hljs-property">_debugSource</span> = {
  <span class="hljs-attr">fileName</span>: <span class="hljs-string">"/src/App.tsx"</span>,
  <span class="hljs-attr">lineNumber</span>: <span class="hljs-number">42</span>,
  <span class="hljs-attr">columnNumber</span>: <span class="hljs-number">5</span>
}
</code></pre>
<p>è¿™å°±æ˜¯ React Grab èƒ½ç²¾å‡†å®šä½æºä»£ç çš„ç§˜å¯†â€”â€”<strong>React è‡ªå·±å°±è®°ç€å‘¢</strong>ï¼Œå®ƒåªæ˜¯æŠŠä¿¡æ¯è¯»å‡ºæ¥è€Œå·²ã€‚</p>
<hr/>
<h2 data-id="heading-12">ç¬¬ä¸‰å±‚ï¼šUI æ¸²æŸ“</h2>
<h3 data-id="heading-13">ä¸€ä¸ªæœ‰è¶£çš„é€‰æ‹©</h3>
<p>React Grab çš„ UIï¼ˆé«˜äº®æ¡†ã€æ ‡ç­¾ï¼‰æ˜¯ç”¨ <strong>Solid.js</strong> å†™çš„ï¼Œä¸æ˜¯ Reactã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createSignal, createMemo, createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">'solid-js'</span>;

<span class="hljs-comment">// å“åº”å¼çŠ¶æ€</span>
<span class="hljs-keyword">const</span> [isActive, setIsActive] = <span class="hljs-title function_">createSignal</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> [hoveredElement, setHoveredElement] = createSignal&lt;<span class="hljs-title class_">Element</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// æ´¾ç”ŸçŠ¶æ€ï¼šé«˜äº®æ¡†çš„ä½ç½®</span>
<span class="hljs-keyword">const</span> highlightStyle = <span class="hljs-title function_">createMemo</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> el = <span class="hljs-title function_">hoveredElement</span>();
  <span class="hljs-keyword">if</span> (!el) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> rect = el.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">top</span>: rect.<span class="hljs-property">top</span> + <span class="hljs-string">'px'</span>,
    <span class="hljs-attr">left</span>: rect.<span class="hljs-property">left</span> + <span class="hljs-string">'px'</span>,
    <span class="hljs-attr">width</span>: rect.<span class="hljs-property">width</span> + <span class="hljs-string">'px'</span>,
    <span class="hljs-attr">height</span>: rect.<span class="hljs-property">height</span> + <span class="hljs-string">'px'</span>
  };
});
</code></pre>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆä¸ç”¨ Reactï¼Ÿ</h3>
<p>å››ä¸ªåŸå› ï¼š</p>
<ol>
<li><strong>éš”ç¦»æ€§</strong> - ä¸ä¼šå’Œä½ åº”ç”¨çš„ React å†²çªã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä¸€ä¸ªæ£€æµ‹ React çš„å·¥å…·è‡ªå·±ä¹Ÿç”¨ Reactï¼Œé‚£ä¸æ˜¯å¥—å¨ƒå—ï¼Ÿ</li>
<li><strong>è½»é‡</strong> - Solid.js çš„è¿è¡Œæ—¶åªæœ‰å‡  KBï¼ŒReact è¦å¤§å¾—å¤š</li>
<li><strong>æ€§èƒ½</strong> - Solid.js æ˜¯ç»†ç²’åº¦å“åº”å¼ï¼Œæ›´æ–° UI æ›´é«˜æ•ˆ</li>
<li><strong>æ— ä¾èµ–</strong> - ä¸éœ€è¦å®Œæ•´çš„ React è¿è¡Œæ—¶</li>
</ol>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆèªæ˜çš„æ¶æ„å†³ç­–ã€‚</p>
<hr/>
<h2 data-id="heading-15">æœ€åä¸€æ­¥ï¼šå‰ªè´´æ¿</h2>
<h3 data-id="heading-16">æ•°æ®ç»“æ„</h3>
<p>React Grab æŠŠæ”¶é›†åˆ°çš„ä¿¡æ¯æ‰“åŒ…æˆä¸€ä¸ªç»“æ„åŒ–å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">GrabData</span> {
  <span class="hljs-comment">// æºä»£ç ä¿¡æ¯</span>
  <span class="hljs-attr">source</span>: {
    <span class="hljs-attr">fileName</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">lineNumber</span>: <span class="hljs-built_in">number</span>;
    <span class="hljs-attr">columnNumber</span>: <span class="hljs-built_in">number</span>;
  };

  <span class="hljs-comment">// ç»„ä»¶ä¿¡æ¯</span>
  <span class="hljs-attr">component</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">ancestors</span>: <span class="hljs-built_in">string</span>[];  <span class="hljs-comment">// ç»„ä»¶å±‚çº§é“¾</span>
  };

  <span class="hljs-comment">// DOM ä¿¡æ¯</span>
  <span class="hljs-attr">dom</span>: {
    <span class="hljs-attr">selector</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">tagName</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">className</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">dimensions</span>: { <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span> };
  };

  <span class="hljs-comment">// HTML ç‰‡æ®µ</span>
  <span class="hljs-attr">htmlSnippet</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<h3 data-id="heading-17">CSS é€‰æ‹©å™¨ç”Ÿæˆ</h3>
<p>ä¸ºäº†è®© AI èƒ½ç²¾å‡†å®šä½å…ƒç´ ï¼Œè¿˜éœ€è¦ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ CSS é€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { finder } <span class="hljs-keyword">from</span> <span class="hljs-string">'@medv/finder'</span>;

<span class="hljs-keyword">const</span> selector = <span class="hljs-title function_">finder</span>(element);
<span class="hljs-comment">// è¿”å›: "#app &gt; div.container &gt; button.submit-btn"</span>
</code></pre>
<p><code>@medv/finder</code> æ˜¯ä¸€ä¸ªä¸“é—¨å¹²è¿™ä¸ªçš„åº“ï¼Œå®ƒä¼šç”Ÿæˆæœ€çŸ­ä¸”å”¯ä¸€çš„é€‰æ‹©å™¨ã€‚</p>
<h3 data-id="heading-18">å†™å…¥å‰ªè´´æ¿</h3>
<p>æœ€åä¸€æ­¥ï¼ŒæŠŠæ•°æ®å†™å…¥å‰ªè´´æ¿ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ç°ä»£ Clipboard API</span>
navigator.<span class="hljs-property">clipboard</span>.<span class="hljs-title function_">write</span>([
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClipboardItem</span>({
    <span class="hljs-string">'text/html'</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([htmlContent], { <span class="hljs-attr">type</span>: <span class="hljs-string">'text/html'</span> }),
    <span class="hljs-string">'text/plain'</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([plainText], { <span class="hljs-attr">type</span>: <span class="hljs-string">'text/plain'</span> })
  })
]);
</code></pre>
<p>æ³¨æ„å®ƒåŒæ—¶å†™äº†ä¸¤ç§æ ¼å¼ï¼š</p>
<ul>
<li><code>text/html</code> - ç»“æ„åŒ–æ•°æ®ï¼ŒAI å·¥å…·å¯ä»¥è§£æ</li>
<li><code>text/plain</code> - çº¯æ–‡æœ¬ï¼Œç›´æ¥ç²˜è´´ä¹Ÿèƒ½çœ‹</li>
</ul>
<hr/>
<h2 data-id="heading-19">æŠ€æœ¯æ ˆæ€»ç»“</h2>
<p>React Grab ç”¨åˆ°çš„æ ¸å¿ƒæŠ€æœ¯ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">mindmap
  root((React Grab))
    äº‹ä»¶å±‚
      åŸç”Ÿ DOM API
      é”®ç›˜äº‹ä»¶
      é¼ æ ‡äº‹ä»¶
      AbortController
    åˆ†æå±‚
      bippy
      Fiber è®¿é—®
      _debugSource
      ç»„ä»¶å±‚çº§
    UI å±‚
      Solid.js
      é«˜äº®æ¡†
      æ ‡ç­¾æç¤º
      å“åº”å¼æ›´æ–°
    è¾“å‡ºå±‚
      Clipboard API
      @medv/finder
      ç»“æ„åŒ–æ•°æ®
</code></pre>








































<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>äº‹ä»¶ç›‘å¬</td><td>åŸç”Ÿ DOM API</td><td>æ•è·é”®ç›˜/é¼ æ ‡äº‹ä»¶</td></tr><tr><td>Fiber è®¿é—®</td><td>bippy</td><td>è¯»å– React å†…éƒ¨æ•°æ®</td></tr><tr><td>æºç å®šä½</td><td>Babel æ’ä»¶</td><td>ç¼–è¯‘æ—¶æ³¨å…¥ä½ç½®ä¿¡æ¯</td></tr><tr><td>é€‰æ‹©å™¨ç”Ÿæˆ</td><td>@medv/finder</td><td>ç”Ÿæˆå”¯ä¸€ CSS é€‰æ‹©å™¨</td></tr><tr><td>UI æ¸²æŸ“</td><td>Solid.js</td><td>ç»˜åˆ¶é«˜äº®æ¡†å’Œæ ‡ç­¾</td></tr><tr><td>æ•°æ®ä¼ é€’</td><td>Clipboard API</td><td>å¤åˆ¶åˆ°å‰ªè´´æ¿</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-20">å‡ ä¸ªç²¾å¦™çš„è®¾è®¡</h2>
<h3 data-id="heading-21">1. ä¸ä¾µå…¥åº”ç”¨ä»£ç </h3>
<p>React Grab å®Œå…¨æ˜¯"å¤–æŒ‚"å¼çš„ï¼š</p>
<ul>
<li>ä¸éœ€è¦ä¿®æ”¹ä½ çš„ç»„ä»¶ä»£ç </li>
<li>ä¸éœ€è¦å®‰è£… Babel æ’ä»¶ï¼ˆReact è‡ªå¸¦çš„å°±å¤Ÿäº†ï¼‰</li>
<li>ä¸ä¼šå½±å“åº”ç”¨çš„æ­£å¸¸è¿è¡Œ</li>
</ul>
<h3 data-id="heading-22">2. å¼€å‘æ¨¡å¼é™å®š</h3>
<p>å®ƒä¾èµ–çš„ <code>_debugSource</code> åªåœ¨å¼€å‘æ¨¡å¼å­˜åœ¨ï¼Œæ‰€ä»¥ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒå¤©ç„¶æ— æ•ˆ</li>
<li>ä¸ä¼šæ³„éœ²æºç ä¿¡æ¯</li>
<li>ä¸ä¼šå¢åŠ ç”Ÿäº§åŒ…ä½“ç§¯</li>
</ul>
<h3 data-id="heading-23">3. è½»é‡ä¸”ç‹¬ç«‹</h3>
<p>ç”¨ Solid.js è€Œä¸æ˜¯ React æ¥åš UIï¼Œæ—¢ä¿è¯äº†è½»é‡ï¼Œåˆé¿å…äº†å’Œåº”ç”¨ React çš„å†²çªã€‚</p>
<hr/>
<h2 data-id="heading-24">å±€é™æ€§</h2>
<p>å½“ç„¶ï¼Œè¿™å¥—æ–¹æ¡ˆä¹Ÿæœ‰å±€é™ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    subgraph Works["âœ… èƒ½ç”¨"]
        React["React 16+"]
        Dev["å¼€å‘æ¨¡å¼"]
        Modern["ç°ä»£æµè§ˆå™¨"]
    end

    subgraph NotWork["âŒ ä¸èƒ½ç”¨"]
        Vue["Vue"]
        Angular["Angular"]
        Svelte["Svelte"]
        Prod["ç”Ÿäº§ç¯å¢ƒ"]
        IE["IE æµè§ˆå™¨"]
    end

    React -.-&gt;|"Fiber æ¶æ„"| Works
    Dev -.-&gt;|"_debugSource"| Works

    Vue -.-&gt;|"æ—  Fiber"| NotWork
    Angular -.-&gt;|"ä¸åŒæ¶æ„"| NotWork
    Svelte -.-&gt;|"ç¼–è¯‘æ—¶æ¡†æ¶"| NotWork
    Prod -.-&gt;|"æ— è°ƒè¯•ä¿¡æ¯"| NotWork

    style Works fill:#e8f5e9
    style NotWork fill:#ffebee
</code></pre>
<h3 data-id="heading-25">åªèƒ½ç”¨äº React</h3>
<p>å®ƒæ·±åº¦ä¾èµ– React Fiber æ¶æ„ï¼Œæ‰€ä»¥ï¼š</p>
<ul>
<li>âŒ Vue - æ²¡æœ‰ Fiber</li>
<li>âŒ Angular - å®Œå…¨ä¸åŒçš„æ¶æ„</li>
<li>âŒ Svelte - ç¼–è¯‘æ—¶æ¡†æ¶ï¼Œè¿è¡Œæ—¶æ²¡æœ‰ç»„ä»¶æ ‘</li>
</ul>
<h3 data-id="heading-26">åªèƒ½ç”¨äºå¼€å‘æ¨¡å¼</h3>
<p>ç”Ÿäº§ç¯å¢ƒçš„ä»£ç ï¼š</p>
<ul>
<li>æ²¡æœ‰ <code>_debugSource</code></li>
<li>è¢«å‹ç¼©æ··æ·†äº†</li>
<li>Source Map é€šå¸¸ä¹Ÿä¸å¼€æ”¾</li>
</ul>
<p>æ‰€ä»¥åªèƒ½åœ¨å¼€å‘æ—¶ç”¨ã€‚</p>
<h3 data-id="heading-27">ä¾èµ– Source Map</h3>
<p>å¦‚æœä½ çš„æ„å»ºå·¥å…·æ²¡æœ‰ç”Ÿæˆ Source Mapï¼Œæˆ–è€…ç¦ç”¨äº† JSX source æ’ä»¶ï¼Œå®šä½å°±ä¼šå¤±æ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>React Grab çš„åŸç†å¯ä»¥ç”¨ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>åˆ©ç”¨ React åœ¨å¼€å‘æ¨¡å¼ä¸‹è‡ªå¸¦çš„æºç ä½ç½®ä¿¡æ¯ï¼Œé€šè¿‡ Fiber æ ‘åå‘æŸ¥æ‰¾ï¼ŒæŠŠå…ƒç´ çš„"èº«ä»½è¯"å¤åˆ¶ç»™ AIã€‚</strong></p>
</blockquote>
<p>å®ƒä¸æ˜¯ä»€ä¹ˆé»‘ç§‘æŠ€ï¼Œè€Œæ˜¯å·§å¦™åœ°åˆ©ç”¨äº† React å·²æœ‰çš„è°ƒè¯•æœºåˆ¶ã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒèƒ½åšåˆ°ï¼š</p>
<ul>
<li>é›¶é…ç½®</li>
<li>é›¶ä¾µå…¥</li>
<li>é›¶æ€§èƒ½å½±å“</li>
</ul>
<p>å› ä¸ºè„æ´»ç´¯æ´»ï¼ŒReact å’Œ Babel å·²ç»å¸®ä½ å¹²å®Œäº†ã€‚</p>
<hr/>
<h2 data-id="heading-29">ç›¸å…³èµ„æº</h2>
<ul>
<li><strong>React Grab GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidenybai%2Freact-grab" target="_blank" title="https://github.com/aidenybai/react-grab" ref="nofollow noopener noreferrer">github.com/aidenybai/râ€¦</a></li>
<li><strong>bippyï¼ˆFiber è®¿é—®åº“ï¼‰</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidenybai%2Fbippy" target="_blank" title="https://github.com/aidenybai/bippy" ref="nofollow noopener noreferrer">github.com/aidenybai/bâ€¦</a></li>
<li><strong>@medv/finderï¼ˆé€‰æ‹©å™¨ç”Ÿæˆï¼‰</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fantonmedv%2Ffinder" target="_blank" title="https://github.com/antonmedv/finder" ref="nofollow noopener noreferrer">github.com/antonmedv/fâ€¦</a></li>
<li><strong>Solid.js</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.solidjs.com%2F" target="_blank" title="https://www.solidjs.com/" ref="nofollow noopener noreferrer">www.solidjs.com/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Helmæ·±åº¦è§£æï¼šKubernetesåº”ç”¨ç®¡ç†çš„åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7576888607479627795</link>    <guid>https://juejin.cn/post/7576888607479627795</guid>    <pubDate>2025-11-26T14:26:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576888607479627795" data-draft-id="7576888607479578643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Helmæ·±åº¦è§£æï¼šKubernetesåº”ç”¨ç®¡ç†çš„åˆ©å™¨"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-11-26T14:26:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Helmæ·±åº¦è§£æï¼šKubernetesåº”ç”¨ç®¡ç†çš„åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:26:32.000Z" title="Wed Nov 26 2025 14:26:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦Helmï¼Ÿ</h2>
<p>åœ¨ç°ä»£äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼ŒKuberneteså·²æˆä¸ºå®¹å™¨ç¼–æ’çš„äº‹å®æ ‡å‡†ã€‚ç„¶è€Œï¼Œå½“åº”ç”¨å¤æ‚åº¦å¢åŠ æ—¶ï¼Œç›´æ¥ä½¿ç”¨kubectlç®¡ç†Kubernetesèµ„æºæ–‡ä»¶å˜å¾—å¼‚å¸¸ç¹çã€‚æ¯ä¸ªå¾®æœåŠ¡éƒ½å¯èƒ½æ¶‰åŠDeploymentã€Serviceã€ConfigMapç­‰å¤šç§èµ„æºï¼Œè€Œå¤šç¯å¢ƒéƒ¨ç½²æ›´æ˜¯é›ªä¸ŠåŠ éœœã€‚è¿™æ­£æ˜¯Helmçš„ç”¨æ­¦ä¹‹åœ°â€”â€”ä½œä¸ºKubernetesçš„åŒ…ç®¡ç†å™¨ï¼Œå®ƒå°†åº”ç”¨æ‰“åŒ…æˆå¯å¤ç”¨çš„Chartï¼Œæå¤§ç®€åŒ–äº†éƒ¨ç½²å’Œç®¡ç†æµç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥è§£æHelmçš„æ ¸å¿ƒæœºåˆ¶ï¼Œå¹¶é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤ºå…¶å¼ºå¤§åŠŸèƒ½ï¼ŒåŒæ—¶æ­ç¤ºæœ€ä½³å®è·µå’Œå¸¸è§é™·é˜±ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Helmæ ¸å¿ƒæ¶æ„ä¸å·¥ä½œåŸç†</h2>
<h3 data-id="heading-2">1.1 Helmä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>Helmçš„æ¶æ„å»ºç«‹åœ¨ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µä¹‹ä¸Šï¼Œå®ƒä»¬å…±åŒæ„æˆäº†ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç®¡ç†ç”Ÿæ€ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>Chart</strong>ï¼šHelmçš„åº”ç”¨åŒ…è£…æ ¼å¼ï¼ŒåŒ…å«åº”ç”¨çš„æ‰€æœ‰Kubernetesèµ„æºå®šä¹‰æ¨¡æ¿å’Œé…ç½®å‚æ•°ã€‚ç±»æ¯”äºLinuxç³»ç»Ÿä¸­çš„RPMæˆ–DEBåŒ…ã€‚</li>
<li><strong>Release</strong>ï¼šChartåœ¨Kubernetesé›†ç¾¤ä¸­çš„è¿è¡Œå®ä¾‹ã€‚æ¯æ¬¡å®‰è£…éƒ½ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„Releaseï¼Œè®°å½•è¯¥æ¬¡éƒ¨ç½²çš„é…ç½®å’ŒçŠ¶æ€ã€‚</li>
<li><strong>Repository</strong>ï¼šChartçš„å­˜å‚¨å’Œåˆ†å‘ä¸­å¿ƒï¼Œæ”¯æŒHTTP/Så’ŒOCIåè®®ï¼Œä¾¿äºå›¢é˜Ÿå…±äº«å’Œå¤ç”¨åº”ç”¨æ¨¡æ¿ã€‚</li>
</ul>
<h3 data-id="heading-3">1.2 Helm 3çš„é©å‘½æ€§æ”¹è¿›</h3>
<p>Helm 3ç§»é™¤äº†Tillerç»„ä»¶ï¼Œç›´æ¥é€šè¿‡kubeconfigä¸Kubernetes APIäº¤äº’ï¼Œæ˜¾è‘—æå‡äº†å®‰å…¨æ€§å’Œç®€åŒ–äº†æ¶æ„ã€‚è¿™ä¸€å˜åŒ–è§£å†³äº†Helm 2ä¸­å­˜åœ¨çš„å®‰å…¨éšæ‚£å’Œå¤æ‚çš„RBACé…ç½®é—®é¢˜ã€‚</p>
<h2 data-id="heading-4">äºŒã€Helm Chartæ·±åº¦è®¾è®¡ä¸å®æˆ˜</h2>
<h3 data-id="heading-5">2.1 å¤šå±‚å¾®æœåŠ¡Chartè®¾è®¡</h3>
<p>è€ƒè™‘ä¸€ä¸ªå…¸å‹çš„ä¸‰å±‚åº”ç”¨æ¶æ„ï¼ˆå‰ç«¯ã€åç«¯ã€æ•°æ®åº“ï¼‰ï¼ŒHelmé€šè¿‡å­Chartä¾èµ–å…³ç³»ä¼˜é›…åœ°ç®¡ç†è¿™ç§å¤æ‚åº”ç”¨ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Chart.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v2</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">ecommerce-app</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">A</span> <span class="hljs-string">multi-tier</span> <span class="hljs-string">ecommerce</span> <span class="hljs-string">application</span>
<span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
<span class="hljs-attr">dependencies:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">file://../frontend</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">file://../backend</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">database</span>
    <span class="hljs-attr">version:</span> <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
    <span class="hljs-attr">repository:</span> <span class="hljs-string">file://../database</span>
</code></pre>
<p><strong>ä¾èµ–ç®¡ç†ç­–ç•¥</strong>æœ‰ä¸¤ç§ä¸»è¦æ–¹å¼ï¼š</p>
<ul>
<li><strong>åµŒå…¥å¼ä¾èµ–</strong>ï¼šå­Chartä½œä¸ºçˆ¶Chartçš„ä¸€éƒ¨åˆ†ï¼Œç´§è€¦åˆï¼Œç®€å•ä½†ä¸å¤Ÿçµæ´»</li>
<li><strong>ä¾èµ–å¯¼å…¥å¼</strong>ï¼šå„Chartç‹¬ç«‹å¼€å‘è°ƒè¯•ï¼Œæ¾è€¦åˆï¼Œå¤æ‚ä½†æ›´çµæ´»</li>
</ul>
<h3 data-id="heading-6">2.2 æ¨¡æ¿å¼•æ“é«˜çº§ç”¨æ³•</h3>
<p>Helmä½¿ç”¨Goæ¨¡æ¿è¯­è¨€å®ç°é…ç½®çš„åŠ¨æ€åŒ–ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„Deploymentæ¨¡æ¿ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Release.Name</span> }}<span class="hljs-string">-{{</span> <span class="hljs-string">.Chart.Name</span> <span class="hljs-string">}}</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> {{ <span class="hljs-string">.Chart.Name</span> }}
    <span class="hljs-attr">version:</span> {{ <span class="hljs-string">.Chart.AppVersion</span> }}
    <span class="hljs-attr">environment:</span> {{ <span class="hljs-string">.Values.environment</span> <span class="hljs-string">|</span> <span class="hljs-string">default</span> <span class="hljs-string">"prod"</span> }}
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> {{ <span class="hljs-string">.Values.replicaCount</span> }}
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> {{ <span class="hljs-string">.Chart.Name</span> }}
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> {{ <span class="hljs-string">.Chart.Name</span> }}
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> {{ <span class="hljs-string">.Chart.Name</span> }}
          <span class="hljs-attr">image:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Values.image.repository }}</span>:<span class="hljs-template-variable">{{ .Values.image.tag }}</span>"</span>
          <span class="hljs-attr">imagePullPolicy:</span> {{ <span class="hljs-string">.Values.image.pullPolicy</span> }}
          {{<span class="hljs-bullet">-</span> <span class="hljs-string">with</span> <span class="hljs-string">.Values.resources</span> }}
          <span class="hljs-attr">resources:</span>
            {{<span class="hljs-bullet">-</span> <span class="hljs-string">toYaml</span> <span class="hljs-string">.</span> <span class="hljs-string">|</span> <span class="hljs-string">nindent</span> <span class="hljs-number">12</span> }}
          {{<span class="hljs-bullet">-</span> <span class="hljs-string">end</span> }}
          <span class="hljs-attr">env:</span>
          {{<span class="hljs-bullet">-</span> <span class="hljs-string">range</span> <span class="hljs-string">$name</span>, <span class="hljs-string">$value</span> <span class="hljs-string">:=</span> <span class="hljs-string">.Values.env</span> }}
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> {{ <span class="hljs-string">$name</span> }}
              <span class="hljs-attr">value:</span> {{ <span class="hljs-string">$value</span> <span class="hljs-string">|</span> <span class="hljs-string">quote</span> }}
          {{<span class="hljs-bullet">-</span> <span class="hljs-string">end</span> }}
</code></pre>
<p>æ¨¡æ¿ä¸­æ”¯æŒå¤æ‚çš„æ§åˆ¶ç»“æ„ã€å‡½æ•°å’Œç®¡é“æ“ä½œï¼Œå¤§å¤§å¢å¼ºäº†çµæ´»æ€§ã€‚</p>
<h3 data-id="heading-7">2.3 å€¼æ–‡ä»¶è®¾è®¡ä¸å¤šç¯å¢ƒç®¡ç†</h3>
<p>é€šè¿‡åˆ†å±‚é…ç½®ç®¡ç†ï¼Œå¯ä»¥å®ç°ä¸€å¥—Chartå¤šç¯å¢ƒéƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># values-prod.yaml</span>
<span class="hljs-attr">global:</span>
  <span class="hljs-attr">environment:</span> <span class="hljs-string">production</span>
  <span class="hljs-attr">domain:</span> <span class="hljs-string">example.com</span>

<span class="hljs-attr">frontend:</span>
  <span class="hljs-attr">replicaCount:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">image:</span>
    <span class="hljs-attr">tag:</span> <span class="hljs-string">"stable"</span>
  <span class="hljs-attr">resources:</span>
    <span class="hljs-attr">requests:</span>
      <span class="hljs-attr">memory:</span> <span class="hljs-string">"256Mi"</span>
      <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
    <span class="hljs-attr">limits:</span>
      <span class="hljs-attr">memory:</span> <span class="hljs-string">"512Mi"</span>
      <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>

<span class="hljs-attr">backend:</span>
  <span class="hljs-attr">replicaCount:</span> <span class="hljs-number">2</span>
  <span class="hljs-attr">database:</span>
    <span class="hljs-attr">host:</span> <span class="hljs-string">"mysql-production"</span>
</code></pre>
<h2 data-id="heading-8">ä¸‰ã€Helmé«˜çº§ç‰¹æ€§ä¸éƒ¨ç½²æ§åˆ¶</h2>
<h3 data-id="heading-9">3.1 èµ„æºéƒ¨ç½²é¡ºåºæ§åˆ¶</h3>
<p>Helmä¸ä¼šç®€å•åœ°æŒ‰æ–‡ä»¶é¡ºåºéƒ¨ç½²èµ„æºï¼Œè€Œæ˜¯éµå¾ªæ™ºèƒ½çš„æ’åºè§„åˆ™ã€‚æ ¹æ®æºç åˆ†æï¼Œå†…ç½®çš„èµ„æºç±»å‹ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>Namespace, NetworkPolicy</strong>ï¼ˆåŸºç¡€ç¯å¢ƒéš”ç¦»ï¼‰</li>
<li><strong>ConfigMap, Secret</strong>ï¼ˆé…ç½®ä¸æ•æ„Ÿä¿¡æ¯ï¼‰</li>
<li><strong>PersistentVolumeClaim</strong>ï¼ˆå­˜å‚¨èµ„æºï¼‰</li>
<li><strong>ServiceAccount, Role, RoleBinding</strong>ï¼ˆæƒé™æ§åˆ¶ï¼‰</li>
<li><strong>Service</strong>ï¼ˆç½‘ç»œè®¿é—®å…¥å£ï¼‰</li>
<li><strong>Deployment, StatefulSet, DaemonSet</strong>ï¼ˆå·¥ä½œè´Ÿè½½ï¼‰</li>
<li><strong>Ingress</strong>ï¼ˆå¤–éƒ¨æµé‡è·¯ç”±ï¼‰</li>
</ol>
<p>è¿™ç§æ’åºç¡®ä¿äº†"åŸºç¡€è®¾æ–½ä¼˜å…ˆäºåº”ç”¨è´Ÿè½½"çš„éƒ¨ç½²é€»è¾‘ã€‚</p>
<h3 data-id="heading-10">3.2 ç”Ÿå‘½å‘¨æœŸé’©å­ç²¾å‡†æ§åˆ¶</h3>
<p>Helmé’©å­å…è®¸åœ¨ç‰¹å®šæ—¶é—´ç‚¹æ‰§è¡Œè‡ªå®šä¹‰æ“ä½œï¼Œå¸¸è§é’©å­ç±»å‹åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>pre-install</code>ï¼šåœ¨å®‰è£…å‰æ‰§è¡Œï¼ˆå¦‚é¢„æ£€æ£€æŸ¥ï¼‰</li>
<li><code>post-install</code>ï¼šåœ¨å®‰è£…åæ‰§è¡Œï¼ˆå¦‚åˆå§‹åŒ–æ•°æ®åº“ï¼‰</li>
<li><code>pre-upgrade</code>ï¼šåœ¨å‡çº§å‰æ‰§è¡Œï¼ˆå¦‚å¤‡ä»½æ•°æ®ï¼‰</li>
<li><code>post-upgrade</code>ï¼šåœ¨å‡çº§åæ‰§è¡Œï¼ˆå¦‚æ¸…ç†ä¸´æ—¶æ–‡ä»¶)</li>
</ul>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ•°æ®åº“è¿ç§»é’©å­çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Job</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Release.Name }}</span>-db-migrate"</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">"helm.sh/hook":</span> <span class="hljs-string">post-install,post-upgrade</span>
    <span class="hljs-attr">"helm.sh/hook-weight":</span> <span class="hljs-string">"5"</span>
    <span class="hljs-attr">"helm.sh/hook-delete-policy":</span> <span class="hljs-string">hook-succeeded</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">Never</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">migrate</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Values.image.repository }}</span>:<span class="hljs-template-variable">{{ .Values.image.tag }}</span>"</span>
        <span class="hljs-attr">command:</span> [<span class="hljs-string">'sh'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'python manage.py migrate'</span>]
</code></pre>
<h3 data-id="heading-11">3.3 ä¾èµ–ç­‰å¾…ä¸å°±ç»ªæ£€æŸ¥</h3>
<p>å¯¹äºæœ‰ä¸¥æ ¼ä¾èµ–å…³ç³»çš„æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨initContainerå®ç°ä¾èµ–ç­‰å¾…ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">initContainers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">wait-for-db</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">busybox:1.35</span>
        <span class="hljs-attr">command:</span> [<span class="hljs-string">'sh'</span>, <span class="hljs-string">'-c'</span>, <span class="hljs-string">'until nc -z <span class="hljs-template-variable">{{ .Values.mysql.host }}</span> <span class="hljs-template-variable">{{ .Values.mysql.port }}</span>; do echo "ç­‰å¾…MySQLå°±ç»ª..."; sleep 2; done'</span>]
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">"<span class="hljs-template-variable">{{ .Values.image.repository }}</span>:<span class="hljs-template-variable">{{ .Values.image.tag }}</span>"</span>
</code></pre>
<h2 data-id="heading-12">å››ã€Helmåœ¨CI/CDä¸­çš„å®æˆ˜é›†æˆ</h2>
<h3 data-id="heading-13">4.1 GitOpsæµæ°´çº¿é›†æˆ</h3>
<p>å°†Helmä¸Argo CDç­‰GitOpså·¥å…·ç»“åˆï¼Œå¯ä»¥å®ç°å£°æ˜å¼çš„æŒç»­éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># argo-app.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">argoproj.io/v1alpha1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Application</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">production-app</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">destination:</span>
    <span class="hljs-attr">server:</span> <span class="hljs-string">https://kubernetes.default.svc</span>
  <span class="hljs-attr">project:</span> <span class="hljs-string">default</span>
  <span class="hljs-attr">source:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">charts/myapp</span>
    <span class="hljs-attr">repoURL:</span> <span class="hljs-string">https://git.example.com/helm-charts.git</span>
    <span class="hljs-attr">targetRevision:</span> <span class="hljs-string">main</span>
    <span class="hljs-attr">helm:</span>
      <span class="hljs-attr">valueFiles:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">values-prod.yaml</span>
  <span class="hljs-attr">syncPolicy:</span>
    <span class="hljs-attr">automated:</span>
      <span class="hljs-attr">prune:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">selfHeal:</span> <span class="hljs-literal">true</span>
</code></pre>
<h3 data-id="heading-14">4.2 å®‰å…¨æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>Secretç®¡ç†</strong>ï¼šé¿å…åœ¨values.yamlä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯ï¼Œä½¿ç”¨å¤–éƒ¨Secretå­˜å‚¨ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">helm install myapp ./chart --set-file dbPassword=./secrets/pass.txt
</code></pre>
<ol>
<li><strong>ç‰ˆæœ¬é”å®š</strong>ï¼šé˜²æ­¢ä¾èµ–ç‰ˆæœ¬æ¼‚ç§»å¯¼è‡´çš„ä¸å¯é¢„æµ‹è¡Œä¸ºï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css">helm dependency build <span class="hljs-attr">--verify</span>
</code></pre>
<ol>
<li><strong>RBACæœ€å°æƒé™</strong>ï¼šä¸ºHelmåˆ›å»ºä¸“å±ServiceAccountï¼Œéµå¾ªæœ€å°æƒé™åŸåˆ™ã€‚</li>
</ol>
<h2 data-id="heading-15">äº”ã€Helmé™·é˜±ä¸è§„é¿ç­–ç•¥</h2>
<h3 data-id="heading-16">5.1 è¿‡åº¦æ¨¡æ¿åŒ–é™·é˜±</h3>
<p><strong>ç—‡çŠ¶</strong>ï¼šæ¨¡æ¿ä¸­å¤§é‡æ¡ä»¶åˆ¤æ–­ã€å•ä¸ªChartç®¡ç†è¿‡å¤šå¾®æœåŠ¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šéµå¾ª"å•ä¸€Chartå•ä¸€æœåŠ¡"åŸåˆ™ï¼Œå¤æ‚åœºæ™¯æ‹†åˆ†ä¸ºSubchartã€‚</p>
<h3 data-id="heading-17">5.2 è°ƒè¯•æŠ€å·§</h3>
<p>Helmæä¾›å¤šç§è°ƒè¯•å·¥å…·ï¼Œå¸®åŠ©å®šä½é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¨¡æ¿æ¸²æŸ“è°ƒè¯•</span>
helm template --debug ./chart

<span class="hljs-comment"># ä¸é›†ç¾¤ä¸­å®é™…çŠ¶æ€å·®å¼‚å¯¹æ¯”</span>
helm diff upgrade myapp ./chart

<span class="hljs-comment"># å¹²è·‘æ¨¡å¼éªŒè¯</span>
helm install --dry-run --debug ./chart
</code></pre>
<h3 data-id="heading-18">5.3 ç‰ˆæœ¬å…¼å®¹æ€§ç®¡ç†</h3>
<p>ä¸¥æ ¼éµå¾ªSemVerç‰ˆæœ¬è§„èŒƒï¼Œç¡®ä¿å‡çº§çš„å…¼å®¹æ€§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Chart.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v2</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">myapp</span>
<span class="hljs-attr">version:</span> <span class="hljs-number">1.2</span><span class="hljs-number">.3</span>  <span class="hljs-comment"># ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·</span>
<span class="hljs-attr">appVersion:</span> <span class="hljs-number">2.1</span><span class="hljs-number">.0</span>
</code></pre>
<h2 data-id="heading-19">å…­ã€çœŸå®åœºæ™¯æ¡ˆä¾‹ï¼šç”µå•†å¹³å°HelmåŒ–æ”¹é€ </h2>
<p>æŸç”µå•†å¹³å°åœ¨2022å¹´åŒåä¸€å‰å®ŒæˆHelmåŒ–æ”¹é€ ï¼Œå–å¾—äº†æ˜¾è‘—æˆæ•ˆï¼š</p>
<ul>
<li><strong>éƒ¨ç½²æ—¶é—´</strong>ï¼šä»3å°æ—¶ç¼©çŸ­è‡³8åˆ†é’Ÿ</li>
<li><strong>å›æ»šæ•ˆç‡</strong>ï¼šä»äººå·¥æ£€æŸ¥YAMLå˜ä¸ºä¸€é”®å›æ»š</li>
<li><strong>é…ç½®é”™è¯¯ç‡</strong>ï¼šé™ä½92%</li>
</ul>
<p>å…¶æ ¸å¿ƒæ”¹é€ ç­–ç•¥åŒ…æ‹¬ï¼š</p>
<ol>
<li>å°†20+å¾®æœåŠ¡æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å­Chart</li>
<li>é€šè¿‡å…¨å±€Valuesç®¡ç†è·¨æœåŠ¡é…ç½®</li>
<li>ä½¿ç”¨Helmé’©å­å¤„ç†æ•°æ®åº“è¿ç§»å’Œåˆå§‹åŒ–</li>
<li>é›†æˆåˆ°CI/CDæµæ°´çº¿å®ç°è‡ªåŠ¨å‘å¸ƒ</li>
</ol>
<h2 data-id="heading-20">ç»“è®º</h2>
<p>Helmä½œä¸ºKubernetesåº”ç”¨ç®¡ç†çš„å¼ºå¤§å·¥å…·ï¼Œé€šè¿‡æ¨¡æ¿åŒ–ã€ç‰ˆæœ¬æ§åˆ¶å’Œä¾èµ–ç®¡ç†ï¼Œæå¤§åœ°ç®€åŒ–äº†å¤æ‚åº”ç”¨çš„éƒ¨ç½²å’Œç®¡ç†ã€‚ç„¶è€Œï¼Œå®ƒä¹Ÿæ˜¯ä¸€æŠŠåŒåˆƒå‰‘â€”â€”ä¸å½“ä½¿ç”¨ä¼šå¯¼è‡´é…ç½®å¤æ‚åº¦åè€Œå¢åŠ ã€‚</p>
<p>æŒæ¡Helmçš„å…³é”®åœ¨äºï¼š<strong>ç†è§£å…¶è®¾è®¡å“²å­¦ï¼Œéµå¾ªæœ€ä½³å®è·µï¼Œé€‚æ—¶ä½¿ç”¨é«˜çº§ç‰¹æ€§</strong>ã€‚ç®€å•åœºæ™¯é€‚åº¦ä½¿ç”¨ï¼Œå¤æ‚ç³»ç»Ÿæ·±åº¦æ•´åˆï¼Œå§‹ç»ˆéµå¾ª"åŸºç¡€è®¾æ–½å³ä»£ç "åŸåˆ™ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é»‘æ£®æ—çªè¢­ï¼FLUX.2å‘å¸ƒï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦çš„â€œç”Ÿäº§åŠ›æ€ªå…½â€]]></title>    <link>https://juejin.cn/post/7576893180080619562</link>    <guid>https://juejin.cn/post/7576893180080619562</guid>    <pubDate>2025-11-26T14:41:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576893180080619562" data-draft-id="7577042546094800938" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é»‘æ£®æ—çªè¢­ï¼FLUX.2å‘å¸ƒï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦çš„â€œç”Ÿäº§åŠ›æ€ªå…½â€"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-26T14:41:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é»‘æ£®æ—çªè¢­ï¼FLUX.2å‘å¸ƒï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦çš„â€œç”Ÿäº§åŠ›æ€ªå…½â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:41:29.000Z" title="Wed Nov 26 2025 14:41:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨2025å¹´11æœˆ25æ—¥ï¼Œé‚£ä¸ªè¢«æ— æ•°AIç»˜ç”»çˆ±å¥½è€…è§†ä½œâ€œæŠ€æœ¯ç¯å¡”â€çš„é»‘æ£®æ—å®éªŒå®¤ï¼ˆBlack Forest Labsï¼‰ï¼Œç»ˆäºç”©å‡ºäº†ä»–ä»¬çš„ç‹ç‚¸â€”â€”FLUX.2ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨çº ç»“ä¸Šä¸€ä»£æ¨¡å‹çš„æ‰‹éƒ¨ç»†èŠ‚æˆ–æ˜¯ç”±äºç¼ºä¹ä¸€è‡´æ€§è€Œæ— æ³•å°†å…¶çœŸæ­£æŠ•å…¥å·¥ä½œæµï¼Œé‚£ä¹ˆè¿™æ¬¡çš„æ›´æ–°å¯èƒ½ä¼šè®©ä½ çœ¼å‰ä¸€äº®ã€‚ç®€å•æ¥è¯´ï¼ŒFLUX.2 å¹¶ä¸æ˜¯ä¸€æ¬¡ç®€å•çš„ç‰ˆæœ¬å·å åŠ ï¼Œå®ƒæ˜¯ä»â€œä»¥æ­¤ç‚«æŠ€â€å‘â€œç”Ÿäº§åŠ›å·¥å…·â€çš„ä¸€æ¬¡æš´åŠ›è½¬å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-26_22.32.59-1024x528.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-26_22.32.59-1024x528.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10209cf26f6c4c8382506294cc4b68d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764772889&amp;x-signature=LgaBh2Xk1zte0xQybHz9%2FZhKWfw%3D" alt="iShot_2025-11-26_22.32.59" loading="lazy"/></a></p>
<p><strong>ä¸å†æ˜¯â€œæŠ½å¡â€æ¸¸æˆï¼Œè€Œæ˜¯ç²¾å‡†æ§åˆ¶</strong></p>
<p>ä»¥å‰æˆ‘ä»¬ç©æ–‡ç”Ÿå›¾ï¼Œå¤šå°‘å¸¦ç€ç‚¹â€œæŠ½å¡â€çš„è¿æ°”æˆåˆ†ã€‚ä½†FLUX.2 æ˜¾ç„¶æƒ³ç»ˆç»“è¿™ä¸ªæ—¶ä»£ã€‚</p>
<p>è¿™æ¬¡æœ€è®©äººå¤´çš®å‘éº»çš„åŠŸèƒ½ï¼Œè«è¿‡äºâ€œå¤šå‚è€ƒå›¾åƒç”Ÿæˆâ€ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½œä¸ºè®¾è®¡å¸ˆï¼Œä½ éœ€è¦ä¸ºä¸€ä¸ªè§’è‰²ç”»ä¸€å¥—åˆ†é•œï¼Œä»¥å‰ä½ éœ€è¦æ— æ•°å¤æ‚çš„LoRAè®­ç»ƒå’ŒControlNetè°ƒè¯•æ¥ç»´æŒè§’è‰²è„¸éƒ¨ä¸å´©ã€‚ç°åœ¨ï¼ŒFLUX.2 å…è®¸ä½ ç›´æ¥æ‰”è¿›å»æœ€å¤š10å¼ å‚è€ƒå›¾ã€‚å®ƒèƒ½åƒé€è§’è‰²çš„é¢éƒ¨ç‰¹å¾ã€æœè£…é£æ ¼ç”šè‡³æ˜¯ç‰¹å®šçš„äº§å“ç»†èŠ‚ï¼Œç„¶åç”Ÿæˆé«˜åº¦ä¸€è‡´çš„æ–°å›¾åƒã€‚è¿™å¯¹äºåšæ•…äº‹æ¿ã€ç”µå•†å›¾æˆ–è€…æ˜¯æ¸¸æˆèµ„äº§çš„äººæ¥è¯´ï¼Œç®€ç›´æ˜¯é™ç»´æ‰“å‡»ã€‚</p>
<p>è€Œä¸”ï¼Œå®ƒå˜â€œèªæ˜â€äº†ã€‚å¾—ç›Šäºèåˆäº†Mistral-3è§†è§‰è¯­è¨€æ¨¡å‹ï¼ŒFLUX.2 å¯¹äºå¤æ‚çš„é€»è¾‘æœ‰äº†æƒŠäººçš„ç†è§£åŠ›ã€‚ä½ å‘Šè¯‰å®ƒâ€œç”»7ä¸ªè‹¹æœâ€ï¼Œå®ƒä¸ä¼šç»™ä½ ç”»6ä¸ªæˆ–è€…8ä¸ªï¼›ä½ ç»™å®ƒä¸€ä¸ªå…·ä½“çš„HEXé¢œè‰²ä»£ç ï¼ˆæ¯”å¦‚#ff0088ï¼‰ï¼Œå®ƒèƒ½ç²¾å‡†æ¸²æŸ“å‡ºé‚£ä¸ªç‰¹å®šçš„ç²‰è‰²ï¼Œè€Œä¸æ˜¯â€œå¤§æ¦‚æ˜¯ç²‰è‰²â€ã€‚å®ƒç”šè‡³èƒ½åƒç¨‹åºå‘˜ä¸€æ ·ç†è§£ç»“æ„åŒ–çš„JSONæç¤ºè¯ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åƒè°ƒæ•´ç›¸æœºå‚æ•°ä¸€æ ·å»å¾®è°ƒç”»é¢ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-26_22.32.21-1024x787.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-26_22.32.21-1024x787.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e935303f644942269fb318490473230d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764772889&amp;x-signature=i5HWRR1tqAquuhVMRgXwgJpqh14%3D" alt="iShot_2025-11-26_22.32.21" loading="lazy"/></a></p>
<p><strong>ç”»è´¨ä¸ç»†èŠ‚çš„ç‹‚é£™</strong></p>
<p>å¾ˆå¤šå¼€æºæ¨¡å‹åœ¨ç”Ÿæˆå¤§å›¾æ—¶å®¹æ˜“å‡ºç°ç»“æ„å´©åï¼Œä½†FLUX.2 ç›´æ¥æŠŠåˆ†è¾¨ç‡æ”¯æŒæ‹‰åˆ°äº†400ä¸‡åƒç´ ï¼ˆ4MPï¼‰ã€‚è¿™æ„å‘³ç€ç”Ÿæˆçš„å›¾ç‰‡ä¸å†æ˜¯åªèƒ½å‘å‘æœ‹å‹åœˆçš„â€œå°æ ·â€ï¼Œè€Œæ˜¯å¯ä»¥ç›´æ¥æ‹¿å»ç²¾ä¿®ã€æ‰“å°çš„æˆå“ã€‚</p>
<p>æ–‡å­—æ¸²æŸ“èƒ½åŠ›ä¹Ÿæå‡äº†ä¸€ä¸ªå°é˜¶ã€‚ä»¥å‰AIç”Ÿæˆçš„å›¾ç‰‡é‡Œï¼Œæ–‡å­—å¾€å¾€æ˜¯ä¸€å›¢ä¹±ç ï¼Œç°åœ¨FLUX.2 å·²ç»å¯ä»¥å¤„ç†å¤æ‚çš„æ’ç‰ˆå’ŒUIç•Œé¢ï¼Œç”šè‡³æ˜¯ä¸€äº›ç»†å°çš„è¯´æ˜æ–‡å­—ä¹Ÿèƒ½æ¸…æ™°å¯è¯»ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-26_22.32.28-1024x600.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-26_22.32.28-1024x600.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61e98b602eb943eeb9c2ac338c91bedf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764772889&amp;x-signature=udhkeY8ytW2%2FFcPm%2FU01elkvDTs%3D" alt="iShot_2025-11-26_22.32.28" loading="lazy"/></a></p>
<p><strong>æ˜¾å¡ç‡ƒçƒ§ï¼Ÿè¿™æ¬¡æˆ–è®¸è¿˜å¥½</strong></p>
<p>å¬åˆ°320äº¿å‚æ•°ï¼ˆ32Bï¼‰ï¼Œä½ çš„ç¬¬ä¸€ååº”å¯èƒ½æ˜¯ï¼šæˆ‘çš„æ˜¾å¡è¦ç‚¸äº†ã€‚</p>
<p>åŸå§‹çš„FLUX.2æ¨¡å‹ç¡®å®åºå¤§ï¼ŒåŠ è½½å®ƒåŸæœ¬éœ€è¦å¤¸å¼ çš„90GBæ˜¾å­˜ã€‚ä½†å¥½æ¶ˆæ¯æ˜¯ï¼Œé»‘æ£®æ—å®éªŒå®¤è¿™æ¬¡å’ŒNVIDIAä»¥åŠComfyUIæäº†æ·±åº¦åˆä½œã€‚é€šè¿‡FP8é‡åŒ–æŠ€æœ¯å’Œå†…å­˜å¸è½½åŠŸèƒ½ï¼Œä»–ä»¬ç¡¬ç”Ÿç”ŸæŠŠæ˜¾å­˜éœ€æ±‚ç æ‰äº†40%ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼Œè™½ç„¶å®ƒä¾ç„¶æ˜¯ä¸ªå¤§å®¶ä¼™ï¼Œä½†å·²ç»ä¸å†æ˜¯æ•°æ®ä¸­å¿ƒç‹¬äº«çš„å¥¢ä¾ˆå“ã€‚å¾ˆå¤šæ¶ˆè´¹çº§çš„GeForce RTXæ˜¾å¡ç°åœ¨ä¹Ÿèƒ½è·‘å¾—èµ·æ¥ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-26_22.32.38-1024x779.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-26_22.32.38-1024x779.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d23768699bc34968b465da3d0740774e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764772889&amp;x-signature=ErIxecEVzUV4JfLUMJLlii5duys%3D" alt="iShot_2025-11-26_22.32.38" loading="lazy"/></a></p>
<p><strong>å¼€æºä¸å•†ä¸šçš„å¹³è¡¡è‰ºæœ¯</strong></p>
<p>é»‘æ£®æ—å®éªŒå®¤è¿™æ¬¡çš„ç­–ç•¥éå¸¸æ¸…æ™°ï¼Œä¸æƒ³è®©æ‰€æœ‰äººâ€œç™½å«–â€ï¼Œä½†ä¹Ÿç»™äº†ç¤¾åŒºè¶³å¤Ÿçš„è¯šæ„ã€‚</p>
<ul>
<li><strong>FLUX.2 [pro]</strong>ï¼šè¿™æ˜¯ç»™ç”šè‡³ä¸å·®é’±çš„ä¼ä¸šå‡†å¤‡çš„ï¼Œé—­æºï¼Œæ€§èƒ½æœ€å¼ºï¼Œé€Ÿåº¦æœ€å¿«ï¼Œåªèƒ½é€šè¿‡APIä½¿ç”¨ã€‚</li>
<li><strong>FLUX.2 [dev]</strong>ï¼šè¿™æ˜¯ç»™ç¤¾åŒºçš„ç¤¼ç‰©ã€‚æƒé‡å¼€æ”¾ï¼Œè™½ç„¶ä¸èƒ½å•†ç”¨ï¼Œä½†ç ”ç©¶äººå‘˜å’Œæå®¢ä»¬å¯ä»¥åœ¨æœ¬åœ°å°½æƒ…æŠ˜è…¾ï¼ŒåŸºäºå®ƒå¼€å‘å„ç§æ’ä»¶å’Œç”Ÿæ€ã€‚</li>
<li><strong>FLUX.2 [flex]</strong> &amp; <strong>[klein]</strong>ï¼šä»‹äºä¸¤è€…ä¹‹é—´ï¼ŒFlexç»™äº†å¼€å‘è€…æ›´å¤šå‚æ•°æ§åˆ¶æƒï¼Œè€Œå³å°†æ¨å‡ºçš„Kleinåˆ™æ˜¯é¢å‘è¾¹ç¼˜è®¾å¤‡çš„è½»é‡ç‰ˆã€‚</li>
</ul>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä½œä¸ºæ¨¡å‹åº•åº§çš„VAEï¼ˆå˜åˆ†è‡ªç¼–ç å™¨ï¼‰æ˜¯å®Œå…¨åŸºäºApache 2.0åè®®å¼€æºçš„ï¼Œè¿™ä¸ºæœªæ¥çš„ç”Ÿæ€äº’æ“ä½œæ€§æ‰“ä¸‹äº†å¾ˆå¥½çš„åŸºç¡€ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-26_22.32.53-1024x793.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-26_22.32.53-1024x793.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/562a0240d6fb4114963130c68351c49a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764772889&amp;x-signature=hXG%2BVuF5nP1clZijpNBulg8eelI%3D" alt="iShot_2025-11-26_22.32.53" loading="lazy"/></a></p>
<p><strong>å†™åœ¨æœ€å</strong></p>
<p>FLUX.2 çš„å‡ºç°ï¼Œæ ‡å¿—ç€å¼€æºå›¾ç”Ÿå›¾æ¨¡å‹çœŸæ­£æ‹¥æœ‰äº†å«æ¿é—­æºé¡¶çº§æ¨¡å‹ï¼ˆå¦‚Midjourney v6.1æˆ–DALL-E 3ï¼‰çš„åº•æ°”ã€‚å®ƒä¸å†ä»…ä»…æ˜¯ç”¨æ¥ç”Ÿæˆæ¼‚äº®å°å§å§çš„ç©å…·ï¼Œè€Œæ˜¯ä¸€æŠŠå› ä¸ºç²¾å‡†æ§åˆ¶å’Œé€»è¾‘ç†è§£è€Œå˜å¾—é”‹åˆ©æ— æ¯”çš„ç”Ÿäº§åŠ›ç‘å£«å†›åˆ€ã€‚</p>
<p>ç›®å‰ï¼ŒComfyUIå·²ç»ç¬¬ä¸€æ—¶é—´é›†æˆäº†æ”¯æŒã€‚å¦‚æœä½ æ‰‹å¤´æœ‰å¼ ä¸é”™çš„Nå¡ï¼Œæˆ–è€…åªæ˜¯æƒ³çœ‹çœ‹AIè¿›åŒ–çš„æ–°é«˜åº¦ï¼Œç°åœ¨å°±æ˜¯åŠ¨æ‰‹çš„æœ€ä½³æ—¶æœºã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†å½“ AI çš„"äººè‚‰å®šä½å™¨"äº†ï¼šä¸€ä¸ªå·¥å…·è®© React ç»„ä»¶ç§’å®šä½]]></title>    <link>https://juejin.cn/post/7576843726011908122</link>    <guid>https://juejin.cn/post/7576843726011908122</guid>    <pubDate>2025-11-26T13:53:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011908122" data-draft-id="7576844295434158089" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†å½“ AI çš„&quot;äººè‚‰å®šä½å™¨&quot;äº†ï¼šä¸€ä¸ªå·¥å…·è®© React ç»„ä»¶ç§’å®šä½"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2025-11-26T13:53:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†å½“ AI çš„"äººè‚‰å®šä½å™¨"äº†ï¼šä¸€ä¸ªå·¥å…·è®© React ç»„ä»¶ç§’å®šä½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T13:53:14.000Z" title="Wed Nov 26 2025 13:53:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼€ç¯‡</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<p>ä½ æ­£åœ¨å’Œ AI åŠ©æ‰‹æ„‰å¿«åœ°ç»“å¯¹ç¼–ç¨‹ï¼Œçªç„¶æƒ³è®©å®ƒå¸®ä½ æ”¹ä¸€ä¸‹é¡µé¢ä¸Šé‚£ä¸ª"æœ‰ç‚¹ä¸‘"çš„æŒ‰é’®ã€‚</p>
<p>äºæ˜¯ä½ è¾“å…¥ï¼š</p>
<blockquote>
<p>"å¸®æˆ‘æŠŠå³ä¸Šè§’é‚£ä¸ªè“è‰²çš„æŒ‰é’®æ”¹æˆåœ†è§’çš„"</p>
</blockquote>
<p>AI å›å¤ï¼š</p>
<blockquote>
<p>"å¥½çš„ï¼Œè¯·é—®æ˜¯å“ªä¸ªæ–‡ä»¶ï¼Ÿå«ä»€ä¹ˆç»„ä»¶ï¼Ÿæˆ‘éœ€è¦æ›´å¤šä¿¡æ¯..."</p>
</blockquote>
<p>ä½ ç¿»äº†ä¸ªç™½çœ¼ï¼Œå¼€å§‹åœ¨é¡¹ç›®é‡Œä¸€ä¸ªä¸ªæ–‡ä»¶å¤¹æ‰¾é‚£ä¸ªæŒ‰é’®åˆ°åº•è—åœ¨å“ªé‡Œ...</p>
<p><strong>è¿™ç§ç—›ï¼ŒReact Grab æ‡‚ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">å®ƒæ˜¯è°ï¼Ÿ</h2>
<p>React Grab æ˜¯ä¸€ä¸ªå¼€æºçš„å¼€å‘è€…å·¥å…·ï¼Œåšçš„äº‹æƒ…å¾ˆç®€å•â€”â€”<strong>è®©ä½ ç‚¹ä¸€ä¸‹é¡µé¢å…ƒç´ ï¼Œå°±èƒ½æŠŠå®ƒçš„"èº«ä»½è¯"å¤åˆ¶ç»™ AI</strong>ã€‚</p>
<p>ä»€ä¹ˆæ˜¯"èº«ä»½è¯"ï¼Ÿå°±æ˜¯è¿™ä¸ªå…ƒç´ çš„ï¼š</p>
<ul>
<li>ä½åœ¨å“ªä¸ªæ–‡ä»¶ã€ç¬¬å‡ è¡Œä»£ç </li>
<li>å®ƒçˆ¸çˆ¸æ˜¯è°ï¼ˆçˆ¶ç»„ä»¶ï¼‰</li>
<li>å®ƒé•¿ä»€ä¹ˆæ ·ï¼ˆDOM ç»“æ„ã€CSS é€‰æ‹©å™¨ï¼‰</li>
<li>å®ƒçš„å®Œæ•´å®¶è°±ï¼ˆç»„ä»¶å±‚çº§ï¼‰</li>
</ul>
<p>æœ‰äº†è¿™äº›ä¿¡æ¯ï¼ŒAI å°±ä¸ä¼šå†è¿·è·¯äº†ã€‚</p>
<p><strong>é¡¹ç›®åç‰‡</strong>ï¼š</p>
<ul>
<li>ğŸ  å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Freact-grab.com" target="_blank" title="https://react-grab.com" ref="nofollow noopener noreferrer">react-grab.com</a></li>
<li>ğŸ“¦ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faidenybai%2Freact-grab" target="_blank" title="https://github.com/aidenybai/react-grab" ref="nofollow noopener noreferrer">github.com/aidenybai/râ€¦</a></li>
<li>ğŸ‘¨â€ğŸ’» ä½œè€…ï¼šAiden Baiï¼ˆMillion.js çš„ä½œè€…ï¼ŒReact æ€§èƒ½ä¼˜åŒ–å¤§ä½¬ï¼‰</li>
<li>ğŸ“œ è®¸å¯è¯ï¼šMITï¼ˆå®Œå…¨å…è´¹ï¼Œæ”¾å¿ƒç”¨ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<h3 data-id="heading-3">æ²¡æœ‰å®ƒä¹‹å‰</h3>
<p>è®© AI å¸®ä½ æ”¹ UIï¼Œä½ éœ€è¦ï¼š</p>
<ol start="0">
<li><strong>å½“ä¾¦æ¢</strong> ğŸ” - åœ¨é¡¹ç›®é‡Œç¿»ç®±å€’æŸœæ‰¾ç»„ä»¶æ–‡ä»¶</li>
<li><strong>å½“ç¿»è¯‘</strong> ğŸ“ - è´¹å°½å£èˆŒæè¿°"å°±æ˜¯é‚£ä¸ª...é¡µé¢ä¸­é—´åå³...æœ‰ä¸ªå›¾æ ‡çš„...æŒ‰é’®"</li>
<li><strong>å½“å¤è¯»æœº</strong> ğŸ”„ - AI ç†è§£é”™äº†ï¼Ÿå†è§£é‡Šä¸€é...</li>
<li><strong>å½“æ¬è¿å·¥</strong> ğŸ“‹ - æ‰‹åŠ¨å¤åˆ¶ä»£ç ï¼Œç²˜è´´ï¼Œå†å¤åˆ¶ï¼Œå†ç²˜è´´...</li>
</ol>
<h3 data-id="heading-4">æœ‰äº†å®ƒä¹‹å</h3>
<ol start="0">
<li>æŒ‰ä½ <code>âŒ˜C</code>ï¼ˆMacï¼‰æˆ– <code>Ctrl+C</code>ï¼ˆWindowsï¼‰</li>
<li>ç‚¹ä¸€ä¸‹ä½ æƒ³æ”¹çš„å…ƒç´ </li>
<li>ç²˜è´´ç»™ AI</li>
<li>å®Œäº‹</li>
</ol>
<p><strong>å°±è¿™ä¹ˆç®€å•ã€‚</strong></p>
<hr/>
<h2 data-id="heading-5">å®ƒèƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-6">ğŸ¯ ç²¾å‡†æŠ“å–</h3>
<p>æŒ‰ä½å¿«æ·é”®ï¼Œé¼ æ ‡ç§»åˆ°å…ƒç´ ä¸Šï¼Œå®ƒä¼šè´´å¿ƒåœ°å¸®ä½ é«˜äº®æ˜¾ç¤ºï¼š</p>
<blockquote>
<p>"ä½ è¦çš„æ˜¯è¿™ä¸ªå—ï¼Ÿå®ƒå« <code>&lt;button&gt;</code>ï¼Œä½åœ¨ <code>MyComponent</code> é‡Œ"</p>
</blockquote>
<p>ç‚¹ä¸€ä¸‹ï¼Œä¿¡æ¯å°±åˆ°å‰ªè´´æ¿äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb5686565d5d41a7abca62e7cc3e8e01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764769993&amp;x-signature=mf8GtTREVuZTFiJ7dd91P%2FJh0zI%3D" alt="image-20251126212651365.png" loading="lazy"/></p>
<h3 data-id="heading-7">ğŸ“¦ åŒºåŸŸé€‰æ‹©</h3>
<p>æƒ³ä¸€æ¬¡æ”¹å¥½å‡ ä¸ªå…ƒç´ ï¼Ÿæ²¡é—®é¢˜ã€‚</p>
<p>æŒ‰ä½å¿«æ·é”®ï¼Œæ‹–ä¸ªæ¡†æŠŠå®ƒä»¬åœˆèµ·æ¥ï¼Œæ‰€æœ‰å…ƒç´ çš„ä¿¡æ¯æ‰“åŒ…å¸¦èµ°ã€‚</p>
<h3 data-id="heading-8">ğŸ§¬ å®Œæ•´ä¿¡æ¯</h3>
<p>å¤åˆ¶çš„å†…å®¹é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">selected_element</span>&gt;</span>
- selector: [data-lov-name="img"]
- width: 187
- height: 40
HTML snippet:
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Main</span> <span class="hljs-attr">used-at</span>=<span class="hljs-string">"//localhost:3001/src/components/common/page.tsx:22:26"</span>&gt;</span>
 Â   <span class="hljs-comment">&lt;!-- å®Œæ•´çš„ç»„ä»¶å±‚çº§... --&gt;</span>
 Â   <span class="hljs-comment">&lt;!-- IMPORTANT: selected element --&gt;</span>
 Â   <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"h-10 w-auto"</span> <span class="hljs-attr">data-component-path</span>=<span class="hljs-string">"src/page/login/index..."</span>
 Â  Â  Â  Â  <span class="hljs-attr">data-component-line</span>=<span class="hljs-string">"157"</span> <span class="hljs-attr">...</span>&gt;</span>
 Â   <span class="hljs-tag">&lt;/<span class="hljs-name">img</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Main</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">selected_element</span>&gt;</span>
</code></pre>
<p>AI çœ‹åˆ°è¿™ä¸ªï¼Œç«‹é©¬å°±çŸ¥é“ï¼š</p>
<ul>
<li>è¿™æ˜¯ä¸ª <code>img</code> æ ‡ç­¾</li>
<li>åœ¨ <code>src/page/login/index.tsx</code> æ–‡ä»¶çš„ç¬¬ 157 è¡Œ</li>
<li>å®ƒçš„çˆ¶ç»„ä»¶æ˜¯ <code>Main</code>ï¼Œå®šä¹‰åœ¨ <code>page.tsx</code> çš„ç¬¬ 22 è¡Œ</li>
<li>å°ºå¯¸æ˜¯ 187Ã—40</li>
</ul>
<p><strong>é›¶æ­§ä¹‰ï¼Œé›¶è¿·è·¯ï¼Œé›¶åºŸè¯ã€‚</strong></p>
<hr/>
<h2 data-id="heading-9">è°èƒ½ç”¨ï¼Ÿ</h2>
<p>å¥½æ¶ˆæ¯ï¼š<strong>ä¸æ˜¯ Cursor ä¸“å±</strong>ï¼</p>





























<table><thead><tr><th>AI åŠ©æ‰‹</th><th>èƒ½ç”¨å—ï¼Ÿ</th></tr></thead><tbody><tr><td>Cursor</td><td>âœ… å½“ç„¶å¯ä»¥</td></tr><tr><td>Claude Code</td><td>âœ… å®Œå…¨æ”¯æŒ</td></tr><tr><td>OpenCode</td><td>âœ… æ²¡é—®é¢˜</td></tr><tr><td>Windsurf</td><td>âœ… ç†è®ºä¸Šéƒ½è¡Œ</td></tr><tr><td>ä»»ä½•èƒ½ç²˜è´´çš„å·¥å…·</td><td>âœ… åªè¦æ”¯æŒå‰ªè´´æ¿å°±è¡Œ</td></tr></tbody></table>
<p>æœ¬è´¨ä¸Šï¼ŒReact Grab åªæ˜¯æŠŠä¿¡æ¯å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚æ‰€ä»¥åªè¦ä½ çš„ AI å·¥å…·èƒ½æ¥æ”¶ç²˜è´´å†…å®¹ï¼Œå°±èƒ½ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">åœºæ™¯ä¸€ï¼šæ”¹æ ·å¼</h3>
<blockquote>
<p>"å¸®æˆ‘æŠŠè¿™ä¸ªæŒ‰é’®æ”¹æˆæ¸å˜èƒŒæ™¯ï¼ŒåŠ ä¸ª hover åŠ¨æ•ˆ"</p>
</blockquote>
<p>ä»¥å‰ï¼šæ‰¾æ–‡ä»¶ â†’ æè¿°ä½ç½® â†’ å¯èƒ½è¿˜æ‰¾é”™äº† ç°åœ¨ï¼šç‚¹ä¸€ä¸‹ â†’ ç²˜è´´ â†’ æå®š</p>
<h3 data-id="heading-12">åœºæ™¯äºŒï¼šDebug</h3>
<blockquote>
<p>"è¿™ä¸ªå¡ç‰‡æ˜¾ç¤ºæœ‰é—®é¢˜ï¼Œå¸®æˆ‘çœ‹çœ‹"</p>
</blockquote>
<p>ç›´æ¥ç‚¹å‡»æœ‰é—®é¢˜çš„å…ƒç´ ï¼ŒAI ç«‹åˆ»çŸ¥é“å»å“ªä¸ªæ–‡ä»¶æ‰¾ã€‚</p>
<h3 data-id="heading-13">åœºæ™¯ä¸‰ï¼šé‡æ„</h3>
<blockquote>
<p>"æŠŠè¿™å‡ ä¸ªæŒ‰é’®æŠ½æˆä¸€ä¸ªé€šç”¨ç»„ä»¶"</p>
</blockquote>
<p>æ¡†é€‰å¤šä¸ªå…ƒç´ ï¼ŒAI èƒ½çœ‹åˆ°å®ƒä»¬çš„å…±åŒæ¨¡å¼ã€‚</p>
<h3 data-id="heading-14">åœºæ™¯å››ï¼šå­¦ä¹ </h3>
<blockquote>
<p>"è¿™ä¸ªåŠ¨ç”»æ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"</p>
</blockquote>
<p>ç‚¹ä¸€ä¸‹ï¼ŒAI å°±èƒ½å®šä½åˆ°æºç ç»™ä½ è®²è§£ã€‚</p>
<hr/>
<h2 data-id="heading-15">å®ƒçš„è„¾æ°”</h2>
<p>äº†è§£ä¸€ä¸‹ React Grab çš„ç‰¹ç‚¹ï¼Œèƒ½è®©ä½ ä»¬ç›¸å¤„å¾—æ›´æ„‰å¿«ï¼š</p>
<h3 data-id="heading-16">ğŸ˜Š å®ƒå–œæ¬¢</h3>
<ul>
<li><strong>React é¡¹ç›®</strong> - è¿™æ˜¯å®ƒçš„ä¸»åœº</li>
<li><strong>å¼€å‘æ¨¡å¼</strong> - Source Map å¼€ç€ï¼Œå®ƒæ‰èƒ½å‡†ç¡®å®šä½</li>
<li><strong>ç°ä»£æµè§ˆå™¨</strong> - Chromeã€Edgeã€Firefox éƒ½ OK</li>
</ul>
<h3 data-id="heading-17">ğŸ˜• å®ƒä¸å¤ªè¡Œ</h3>
<ul>
<li><strong>Vue / Angular / Svelte</strong> - æŠ±æ­‰ï¼Œåªè®¤ React</li>
<li><strong>ç”Ÿäº§ç¯å¢ƒ</strong> - ä»£ç å‹ç¼©åå®ƒå°±è¿·è·¯äº†</li>
<li><strong>è¿œå¤æµè§ˆå™¨</strong> - IEï¼Ÿé‚£æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<h3 data-id="heading-18">ğŸ’¡ å°è´´å£«</h3>
<ul>
<li>å®ƒ<strong>ä¸ä¼š</strong>å½±å“ä½ çš„åº”ç”¨æ€§èƒ½ï¼ˆåªåœ¨æŒ‰å¿«æ·é”®æ—¶æ¿€æ´»ï¼‰</li>
<li>å®ƒ<strong>ä¸ä¼š</strong>å‡ºç°åœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆåªè¦ä½ é…ç½®æ­£ç¡®ï¼‰</li>
<li>å®ƒ<strong>ä¸ä¼š</strong>å’Œ React DevTools å†²çªï¼ˆå®ƒä»¬æ˜¯å¥½æœ‹å‹ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-19">å’Œ React DevTools çš„åŒºåˆ«</h2>
<p>ç»å¸¸æœ‰äººé—®ï¼šæœ‰ React DevTools äº†ï¼Œè¿˜è¦è¿™ä¸ªå¹²å˜›ï¼Ÿ</p>
<p>å®ƒä»¬æ˜¯ä¸åŒç‰©ç§ï¼š</p>






























<table><thead><tr><th/><th>React Grab</th><th>React DevTools</th></tr></thead><tbody><tr><td><strong>æœåŠ¡å¯¹è±¡</strong></td><td>AI åŠ©æ‰‹</td><td>äººç±»å¼€å‘è€…</td></tr><tr><td><strong>äº¤äº’æ–¹å¼</strong></td><td>ç‚¹å‡»å¤åˆ¶</td><td>é¢æ¿æµè§ˆ</td></tr><tr><td><strong>è¾“å‡ºæ ¼å¼</strong></td><td>æ–‡æœ¬ä¿¡æ¯</td><td>å¯è§†åŒ–ç•Œé¢</td></tr><tr><td><strong>ä½¿ç”¨åœºæ™¯</strong></td><td>å–‚ç»™ AI</td><td>è‡ªå·±çœ‹ç€è°ƒè¯•</td></tr></tbody></table>
<p><strong>React DevTools æ˜¯ç»™ä½ çœ‹çš„ï¼ŒReact Grab æ˜¯ç»™ AI çœ‹çš„ã€‚</strong></p>
<hr/>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>React Grab è§£å†³çš„é—®é¢˜å¾ˆçº¯ç²¹ï¼š</p>
<blockquote>
<p><strong>è®© AI èƒ½"çœ‹è§"ä½ é¡µé¢ä¸Šçš„å…ƒç´ ã€‚</strong></p>
</blockquote>
<p>ä¸éœ€è¦ä½ å½“ç¿»è¯‘ã€å½“ä¾¦æ¢ã€å½“æ¬è¿å·¥ã€‚</p>
<p>ç‚¹ä¸€ä¸‹ï¼Œç²˜è´´ï¼Œç„¶åä½ å°±å¯ä»¥ä¸“æ³¨äº<strong>æè¿°ä½ æƒ³è¦ä»€ä¹ˆ</strong>ï¼Œè€Œä¸æ˜¯<strong>è§£é‡Šé‚£æ˜¯ä»€ä¹ˆ</strong>ã€‚</p>
<p>è¿™å°±æ˜¯å®ƒå­˜åœ¨çš„æ„ä¹‰ã€‚</p>
<hr/>
<h2 data-id="heading-21">æ€ä¹ˆè£…ï¼Ÿ</h2>
<p>æ”¾å¿ƒï¼Œå®‰è£…æ¯”æ³¡é¢è¿˜ç®€å•ã€‚</p>
<h3 data-id="heading-22">æ–¹å¼ä¸€ï¼šä¸€è¡Œè„šæœ¬æå®šï¼ˆæ¨èæ–°æ‰‹ï¼‰</h3>
<p>åœ¨ä½ çš„ HTML æ–‡ä»¶é‡ŒåŠ ä¸€è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;script
 Â <span class="hljs-attr">src</span>=<span class="hljs-string">"//unpkg.com/react-grab/dist/index.global.js"</span>
 Â <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>
 Â <span class="hljs-attr">data-enabled</span>=<span class="hljs-string">"true"</span>
&gt;&lt;/script&gt;
</code></pre>
<p>å°±è¿™æ ·ï¼Œæ²¡äº†ã€‚åˆ·æ–°é¡µé¢å°±èƒ½ç”¨ã€‚</p>
<h3 data-id="heading-23">æ–¹å¼äºŒï¼šNext.js App Router</h3>
<p>åœ¨ <code>app/layout.tsx</code> é‡ŒåŠ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Script</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'next/script'</span>;
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">RootLayout</span>(<span class="hljs-params">{
 Â children,
}: {
 Â children: React.ReactNode;
}</span>) {
 Â <span class="hljs-keyword">return</span> (
 Â  Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
 Â  Â  Â   {process.env.NODE_ENV === 'development' &amp;&amp; (
 Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Script</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">src</span>=<span class="hljs-string">"//unpkg.com/react-grab/dist/index.global.js"</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">crossOrigin</span>=<span class="hljs-string">"anonymous"</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">data-enabled</span>=<span class="hljs-string">"true"</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">strategy</span>=<span class="hljs-string">"afterInteractive"</span>
 Â  Â  Â  Â  Â /&gt;</span><span class="xml">
 Â  Â  Â   )}
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>{children}<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></span></span>
  );
}
</code></pre>
<p>æ³¨æ„é‚£ä¸ª <code>process.env.NODE_ENV === 'development'</code>â€”â€”<strong>åªåœ¨å¼€å‘ç¯å¢ƒåŠ è½½</strong>ï¼Œç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨æ¶ˆå¤±ã€‚</p>
<h3 data-id="heading-24">æ–¹å¼ä¸‰ï¼šNext.js Pages Router</h3>
<p>åœ¨ <code>pages/_document.tsx</code> é‡ŒåŠ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Html</span>, <span class="hljs-title class_">Head</span>, <span class="hljs-title class_">Main</span>, <span class="hljs-title class_">NextScript</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/document'</span>;
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Document</span>(<span class="hljs-params"/>) {
 Â <span class="hljs-keyword">return</span> (
 Â  Â <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Html</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Head</span>&gt;</span>
 Â  Â  Â   {process.env.NODE_ENV === 'development' &amp;&amp; (
 Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">script</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">src</span>=<span class="hljs-string">"//unpkg.com/react-grab/dist/index.global.js"</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">crossOrigin</span>=<span class="hljs-string">"anonymous"</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">data-enabled</span>=<span class="hljs-string">"true"</span>
 Â  Â  Â  Â  Â /&gt;</span><span class="xml">
 Â  Â  Â   )}
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">Head</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">Main</span> /&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">NextScript</span> /&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">Html</span>&gt;</span></span></span>
  );
}
</code></pre>
<h3 data-id="heading-25">æ–¹å¼å››ï¼šVite é¡¹ç›®</h3>
<p>å…ˆè£…åŒ…ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm install react-grab
<span class="hljs-meta"># æˆ–è€…</span>
pnpm <span class="hljs-keyword">add</span> react-grab
<span class="hljs-meta"># æˆ–è€…</span>
yarn <span class="hljs-keyword">add</span> react-grab
</code></pre>
<p>ç„¶ååœ¨ <code>index.html</code> é‡ŒåŠ ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
 Â <span class="hljs-keyword">if</span> (<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">DEV</span>) {
 Â  Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'react-grab'</span>);
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>åŒæ ·ï¼Œ<code>import.meta.env.DEV</code> ç¡®ä¿åªåœ¨å¼€å‘æ—¶åŠ è½½ã€‚</p>
<hr/>
<h2 data-id="heading-26">è£…å®Œæ€ä¹ˆç”¨ï¼Ÿ</h2>
<ol start="0">
<li><strong>å¯åŠ¨é¡¹ç›®</strong> - <code>npm run dev</code></li>
<li><strong>æ‰“å¼€æµè§ˆå™¨</strong> - è®¿é—®ä½ çš„åº”ç”¨</li>
<li><strong>æŒ‰ä½å¿«æ·é”®</strong> - <code>âŒ˜C</code>ï¼ˆMacï¼‰æˆ– <code>Ctrl+C</code>ï¼ˆWindowsï¼‰</li>
<li><strong>ç§»åŠ¨é¼ æ ‡</strong> - ä½ ä¼šçœ‹åˆ°å…ƒç´ è¢«é«˜äº®</li>
<li><strong>ç‚¹å‡»</strong> - ä¿¡æ¯è‡ªåŠ¨å¤åˆ¶</li>
<li><strong>ç²˜è´´ç»™ AI</strong> - å¼€å§‹æ„‰å¿«åœ°æ”¹ä»£ç </li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[30 åˆ†é’Ÿè½åœ°å…¨æ ˆäº¤äº’ï¼šOneCode CLI+SVG æ’è¯¾è¡¨å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576859345935286326</link>    <guid>https://juejin.cn/post/7576859345935286326</guid>    <pubDate>2025-11-26T13:55:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859345935286326" data-draft-id="7576861477266833427" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="30 åˆ†é’Ÿè½åœ°å…¨æ ˆäº¤äº’ï¼šOneCode CLI+SVG æ’è¯¾è¡¨å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T13:55:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            30 åˆ†é’Ÿè½åœ°å…¨æ ˆäº¤äº’ï¼šOneCode CLI+SVG æ’è¯¾è¡¨å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T13:55:47.000Z" title="Wed Nov 26 2025 13:55:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€œæ’è¯¾ç³»ç»Ÿå¼€å‘ä¸€å‘¨èµ·æ­¥ï¼Ÿâ€â€”â€”åˆ«å†è¢«ä¼ ç»Ÿè·¨æ ˆå¼€å‘ç»‘æ¶æ•ˆç‡äº†ã€‚å¯¹äºæ•™è‚²ç³»ç»Ÿé«˜é¢‘ä½¿ç”¨çš„æ’è¯¾è¡¨æ¨¡å—ï¼Œå¼€å‘è€…å¾€å¾€é™·å…¥â€œå‰ç«¯ç”»SVGã€åç«¯å†™æ¥å£ã€è”è°ƒè€—åŠå¤©â€çš„å›°å¢ƒï¼Œè€Œç”¨æˆ·å´åœ¨ä¸ºâ€œç‚¹å‡»æ²¡åé¦ˆã€åŠ è½½æ…¢åŠæ‹â€çš„ä½“éªŒåæ§½ã€‚</p>
<p>ç°åœ¨ï¼ŒOneCode CLIå½»åº•æ‰“ç ´è¿™ä¸ªåƒµå±€ï¼šæ— éœ€åˆ‡æ¢å¼€å‘å·¥å…·ï¼Œä¸ç”¨ç²¾é€šå‰åç«¯åŒæŠ€æœ¯æ ˆï¼Œä»…é ä¸€å¥—CLIæŒ‡ä»¤+ä½ä»£ç å¯è§†åŒ–é…ç½®ï¼Œ30åˆ†é’Ÿå°±èƒ½ä»ç¯å¢ƒæ­å»ºåˆ°éƒ¨ç½²ä¸Šçº¿ï¼Œåšå‡ºå…·å¤‡â€œæ‚¬åœé«˜äº®ã€ç‚¹å‡»ç¼©æ”¾ã€å†²çªé—ªçƒé¢„è­¦â€çš„å…¨æ ˆäº¤äº’SVGæ’è¯¾è¡¨ã€‚æœ¬æ–‡å°±æ˜¯ä½ çš„â€œè®¡æ—¶å®æˆ˜æ‰‹å†Œâ€ï¼Œæ¯ä¸€æ­¥éƒ½æ ‡æ³¨æ ¸å¿ƒåŠ¨ä½œä¸è€—æ—¶ï¼Œè·Ÿç€æ“ä½œï¼Œç»“æŸæ—¶å°±èƒ½å¸¦èµ°ä¸€ä¸ªå¯ç›´æ¥ç”¨çš„é«˜ä½“éªŒæ’è¯¾ç³»ç»Ÿã€‚</p>
<p>OneCodeå¹³å°çš„å…¨æ ˆæ•´åˆèƒ½åŠ›æ°å¥½ç ´è§£è¿™ä¸€å›°å±€ï¼Œå…¶é…å¥—çš„Qoder CLIå·¥å…·æ›´æ˜¯æ‰“é€šâ€œå‰ç«¯ç»„ä»¶-åŠ¨æ€äº¤äº’-åç«¯æœåŠ¡â€çš„å¼€å‘é“¾è·¯ï¼šæ— éœ€è·¨å·¥å…·åˆ‡æ¢ï¼Œä»…é€šè¿‡CLIæŒ‡ä»¤å³å¯å®Œæˆç»„ä»¶ç”Ÿæˆã€äº¤äº’ç»‘å®šã€æ•°æ®è”è°ƒå…¨æµç¨‹ï¼Œå¿«é€Ÿå®ç°å…·å¤‡â€œæ‚¬åœé«˜äº®ã€ç‚¹å‡»åé¦ˆã€å†²çªé¢„è­¦â€çš„åŠ¨æ€æ’è¯¾è¡¨ã€‚æœ¬æ–‡ä»¥è¯¥æ’è¯¾è¡¨ä¸ºå®æˆ˜æ¡ˆä¾‹ï¼Œæ‰‹æŠŠæ‰‹æ¼”ç¤ºå¦‚ä½•é€šè¿‡OneCode+Qoder CLIæ„å»ºå…¨æ ˆåŠ¨æ€äº¤äº’åº”ç”¨ï¼Œæ—¢ä¿éšœå¼€å‘æ•ˆç‡ï¼Œæ›´è®©æœ€ç»ˆäº§å“çš„ç”¨æˆ·ä½“éªŒå®ç°è´¨çš„æå‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9751eac9e6b2490192c8caae18e2b149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgT25lQ29kZUNO:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770147&amp;x-signature=8VytQyF6QmcMIqQzLvKtP3z2YbM%3D" alt="ç¨‹åºå±•ç°SVGæ•ˆæœ" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€é¡¹ç›®æ ¸å¿ƒä»·å€¼ï¼š30åˆ†é’Ÿè½åœ°çš„â€œæ•ˆç‡+ä½“éªŒâ€åŒä¼˜æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">1.1 é¡¹ç›®å®šä½</h3>
<p>æœ¬æ¬¡å¼€å‘çš„SVGåŠ¨æ€æ’è¯¾è¡¨ï¼Œæ ¸å¿ƒè§£å†³â€œä¼ ç»Ÿå¼€å‘å‘¨æœŸé•¿â€ä¸â€œç”¨æˆ·ä½“éªŒå·®â€ä¸¤å¤§æ ¸å¿ƒé—®é¢˜ï¼Œ30åˆ†é’Ÿå†…å®ç°å››å¤§æ ¸å¿ƒä»·å€¼åŠŸèƒ½ï¼Œå…¼é¡¾å¼€å‘è€…æ•ˆç‡ä¸ç»ˆç«¯ç”¨æˆ·ä½“éªŒï¼š</p>
<ul>
<li>é¼ æ ‡æ‚¬åœé«˜äº®ï¼šè¯¾ç¨‹å—é¢œè‰²æ¸å˜+å¾®ç¼©æ”¾ï¼Œäº¤äº’åé¦ˆæ¸…æ™°</li>
<li>ç‚¹å‡»ç¼©æ”¾åé¦ˆï¼šè§¦å‘150msçŸ­ä¿ƒåŠ¨ç”»ï¼Œæ“ä½œæ„ŸçŸ¥æ˜ç¡®</li>
<li>å†²çªé—ªçƒé¢„è­¦ï¼šçº¢æ©™äº¤æ›¿é—ªçƒï¼Œæ’è¯¾é”™è¯¯å³æ—¶æé†’</li>
<li>æ•°æ®å®æ—¶åŒæ­¥ï¼šåç«¯æ›´æ–°è‡ªåŠ¨æ¨é€ï¼Œæ— éœ€é¡µé¢åˆ·æ–°</li>
</ul>
<p>æœ€ç»ˆäº§ç‰©é€‚é…PCç«¯ä¸ç§»åŠ¨ç«¯ï¼Œå¯ç›´æ¥åµŒå…¥ç°æœ‰æ•™è‚²ç®¡ç†ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">1.2 æŠ€æœ¯æ ˆé€‰å‹</h3>
<p>ä¾æ‰˜OneCodeå¹³å°çš„å…¨æ ˆæ•´åˆèƒ½åŠ›ï¼Œæ— éœ€è·¨å·¥å…·åˆ‡æ¢å³å¯å®Œæˆå‰åç«¯å¼€å‘ï¼Œæ ¸å¿ƒæŠ€æœ¯å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¼€å‘å¹³å°</strong>ï¼šOneCode v4.0+ï¼ˆSVGæ³¨è§£/åŠ¨ç”»ç»„ä»¶/æœåŠ¡æ¡†æ¶ä¸€ä½“åŒ–ï¼‰</li>
<li><strong>å‰ç«¯æŠ€æœ¯</strong>ï¼šSVGçŸ¢é‡å›¾å½¢ï¼ˆé«˜æ¸…æ— é”¯é½¿ï¼Œé€‚é…å¤šè®¾å¤‡ï¼‰</li>
<li><strong>åç«¯æŠ€æœ¯</strong>ï¼šJava Spring Bootï¼ˆOneCodeåŸç”Ÿé›†æˆï¼Œé›¶é¢å¤–é…ç½®ï¼‰</li>
<li><strong>æ ¸å¿ƒå·¥å…·</strong>ï¼šOneCode QoderCLIï¼ˆä»£ç ç”Ÿæˆ/æ‰¹é‡æ“ä½œ/é€»è¾‘è¡¥å…¨ï¼Œæ•ˆç‡æ ¸å¿ƒï¼‰</li>
</ul>
<h2 data-id="heading-3">äºŒã€ç¯å¢ƒå‡†å¤‡ï¼š3åˆ†é’Ÿæå®šï¼Œä¸º30åˆ†é’Ÿè½åœ°æŠ¢æ—¶é—´</h2>
<p>æ ¸å¿ƒç›®æ ‡ï¼šå¿«é€Ÿå®ŒæˆOneCodeä¸Qoder CLIç¯å¢ƒé…ç½®ï¼Œç¡®ä¿åç»­å¼€å‘â€œé›¶å¡é¡¿â€ã€‚ä»¥ä¸‹æŒ‡ä»¤å¤åˆ¶ç²˜è´´å³å¯æ‰§è¡Œï¼Œå…¨ç¨‹3åˆ†é’Ÿå†…å®Œæˆã€‚</p>
<h3 data-id="heading-4">2.1 å®‰è£…OneCode CLIä¸é¡¹ç›®åˆå§‹åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"># <span class="hljs-number">1.</span> å®‰è£…<span class="hljs-title class_">OneCode</span> <span class="hljs-variable constant_">CLI</span>ï¼ˆå¤šç³»ç»Ÿé€šç”¨ï¼‰
curl -fsSL <span class="hljs-attr">https</span>:<span class="hljs-comment">//onecode-official.oss-cn-hangzhou.aliyuncs.com/install.sh | bash</span>

# <span class="hljs-number">2.</span> éªŒè¯å®‰è£…ï¼ˆéœ€v2<span class="hljs-number">.0</span><span class="hljs-number">.0</span>+æ”¯æŒ<span class="hljs-variable constant_">SVG</span>æ³¨è§£ï¼‰
onecode --version
# é¢„æœŸè¾“å‡ºï¼š<span class="hljs-title class_">OneCode</span> <span class="hljs-variable constant_">CLI</span> v2<span class="hljs-number">.1</span><span class="hljs-number">.5</span> (æ”¯æŒ<span class="hljs-variable constant_">SVG</span>ä¸<span class="hljs-title class_">MCPv2</span>åè®®)

# <span class="hljs-number">3.</span> åˆå§‹åŒ–æ’è¯¾è¡¨é¡¹ç›®ï¼ˆæŒ‡å®š<span class="hljs-title class_">Spring</span> <span class="hljs-title class_">Boot</span>æ¡†æ¶ï¼‰
onecode project create svg-schedule-demo \
  --framework <span class="hljs-attr">springboot</span>:<span class="hljs-number">2.7</span><span class="hljs-number">.0</span> \
  --description <span class="hljs-string">"OneCode SVGåŠ¨æ€æ’è¯¾è¡¨ç¤ºä¾‹"</span>

# <span class="hljs-number">4.</span> è¿›å…¥é¡¹ç›®ç›®å½•å¹¶åŠ è½½ä¾èµ–
cd svg-schedule-demo
onecode deps sync
</code></pre>
<h3 data-id="heading-5">2.2 é…ç½®QoderCLIèƒ½åŠ›</h3>
<p>é€šè¿‡QoderCLIå…³è”OneCodeä»£ç†ï¼Œç¡®ä¿å¼€å‘è¿‡ç¨‹ä¸­å¯å®æ—¶è·å–è¾…åŠ©èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"># <span class="hljs-number">1.</span> ç™»å½•<span class="hljs-title class_">OneCode</span>æ§åˆ¶å°è·å–<span class="hljs-variable constant_">API</span>å¯†é’¥ï¼ˆä¸ªäººä¸­å¿ƒâ†’å¼€å‘è€…è®¾ç½®ï¼‰
# <span class="hljs-number">2.</span> é…ç½®å…¨å±€<span class="hljs-title class_">QoderCLI</span>å¯†é’¥
onecode config set <span class="hljs-variable language_">global</span>.<span class="hljs-property">api</span>-key <span class="hljs-string">"ä½ çš„OneCode APIå¯†é’¥"</span>

# <span class="hljs-number">3.</span> éªŒè¯<span class="hljs-title class_">QoderCLI</span>è¿æ¥
qodercli mcp test onecode --check tool
# é¢„æœŸè¾“å‡ºï¼š<span class="hljs-title class_">QoderCLI</span>ä»£ç†çŠ¶æ€ï¼šåœ¨çº¿ï¼ˆæ”¯æŒä»£ç ç”Ÿæˆ/æ³¨è§£æ¨èï¼‰
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€æ ¸å¿ƒå®ç°ï¼š25åˆ†é’Ÿå®Œæˆå…¨æ ˆå¼€å‘ï¼ˆåˆ†æ­¥éª¤è®¡æ—¶ï¼‰</h2>
<h3 data-id="heading-7">3.0 ä½ä»£ç SVGç”»å¸ƒç»„ä»¶ï¼šå¯è§†åŒ–å¼€å‘çš„åŸºçŸ³</h3>
<p>OneCodeä½ä»£ç SVGç”»å¸ƒç»„ä»¶æ˜¯è¡”æ¥å¯è§†åŒ–é…ç½®ä¸ä»£ç å¼€å‘çš„æ ¸å¿ƒè½½ä½“ï¼Œå®ƒæ‰“ç ´äº†â€œä½ä»£ç åªèƒ½æ‹–æ‹½ç®€å•å…ƒç´ â€çš„è®¤çŸ¥å±€é™ï¼Œæä¾›â€œå¯è§†åŒ–å¸ƒå±€+æ³¨è§£åŒ–é…ç½®+ä»£ç æ‰©å±•â€ä¸‰é‡èƒ½åŠ›ï¼Œä¸ºå¤æ‚åŠ¨æ€æ’è¯¾è¡¨å¼€å‘å¥ å®šåŸºç¡€ã€‚å…¶æ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å¯è§†åŒ–ç”»å¸ƒåŸºåº§</strong>ï¼šå†…ç½®SVGç”»å¸ƒç¼–è¾‘å™¨ï¼Œæ”¯æŒæ‹–æ‹½æ·»åŠ è¯¾ç¨‹å—ã€æ–‡æœ¬ã€æ—¶é—´è½´ç­‰åŸºç¡€ç»„ä»¶ï¼Œå®æ—¶é¢„è§ˆå¸ƒå±€æ•ˆæœï¼Œç”Ÿæˆçš„å¯è§†åŒ–é…ç½®å¯ç›´æ¥è½¬åŒ–ä¸ºJavaæ³¨è§£ä»£ç ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™åæ ‡ä¸æ ·å¼ã€‚</li>
<li><strong>ç»„ä»¶åŒ–å¤ç”¨æœºåˆ¶</strong>ï¼šæä¾›è¯¾ç¨‹å—ã€çŠ¶æ€æ ‡ç­¾ã€é¢„è­¦å›¾æ ‡ç­‰é¢„åˆ¶ç»„ä»¶åº“ï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶å°è£…ä¸å›¢é˜Ÿå…±äº«ï¼Œæ’è¯¾è¡¨ä¸­é‡å¤çš„è¯¾ç¨‹å…ƒç´ å¯é€šè¿‡ç»„ä»¶å¤ç”¨å‡å°‘å¼€å‘é‡ã€‚</li>
<li><strong>å…¨æ ˆè”åŠ¨èƒ½åŠ›</strong>ï¼šç»„ä»¶å¯ç›´æ¥ç»‘å®šåç«¯æœåŠ¡æ¥å£ï¼ˆå¦‚é€šè¿‡å¯è§†åŒ–é…ç½®é€‰æ‹©å…³è”<code>ScheduleService</code>ï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™å‰åç«¯å¯¹æ¥ä»£ç ï¼Œå®ç°â€œç»„ä»¶æ‹–æ‹½å³æ¥å£å…³è”â€ã€‚</li>
<li><strong>å¼€æ”¾æ‰©å±•æ¥å£</strong>ï¼šæ”¯æŒé€šè¿‡æ³¨è§£ä¸Javaä»£ç æ‰©å±•ç»„ä»¶é€»è¾‘ï¼Œä½ä»£ç é…ç½®è´Ÿè´£åŸºç¡€ç»“æ„ï¼Œä»£ç æ‰©å±•è´Ÿè´£å¤æ‚ä¸šåŠ¡ï¼Œå…¼é¡¾å¼€å‘æ•ˆç‡ä¸çµæ´»æ€§ã€‚</li>
</ul>
<p>æ ¸å¿ƒå¼€å‘é“¾è·¯ï¼ˆæ€»è€—æ—¶25åˆ†é’Ÿï¼‰ï¼šä½ä»£ç æ­éª¨æ¶ï¼ˆ5åˆ†é’Ÿï¼‰â†’åŠ¨ç”»äº¤äº’é…ç½®ï¼ˆ8åˆ†é’Ÿï¼‰â†’åç«¯æœåŠ¡å¼€å‘ï¼ˆ7åˆ†é’Ÿï¼‰â†’Qoder CLIä¼˜åŒ–ï¼ˆ5åˆ†é’Ÿï¼‰ã€‚å€ŸåŠ©OneCodeæ³¨è§£ä¸Qoder CLIè¾…åŠ©ï¼Œæ¯ä¸€æ­¥éƒ½ç›´å‡»æ ¸å¿ƒï¼Œä¸åšå†—ä½™æ“ä½œã€‚</p>
<h3 data-id="heading-8">3.1 ç¬¬ä¸€æ­¥ï¼ˆ5åˆ†é’Ÿï¼‰ï¼šä½ä»£ç +Qoder CLIï¼Œé€Ÿæ­SVGæ’è¯¾è¡¨éª¨æ¶</h3>
<p>å…³é”®åŠ¨ä½œï¼šä½ä»£ç æ‹–æ‹½ç”ŸæˆåŸºç¡€å¸ƒå±€ï¼ŒQoder CLIè¡¥å…¨ä»£ç ç»†èŠ‚ï¼Œ5åˆ†é’Ÿå®Œæˆâ€œå¯è§†åŒ–â†’ä»£ç â€è½¬æ¢ï¼Œæ¯”çº¯æ‰‹å†™å¿«10å€ã€‚</p>
<p><strong>ä½ä»£ç å¯è§†åŒ–é…ç½®æµç¨‹ï¼ˆå‰ç½®æ“ä½œï¼‰</strong>ï¼šç™»å½•OneCodeå¹³å°â†’è¿›å…¥â€œSVGç”»å¸ƒç¼–è¾‘å™¨â€â†’é€‰æ‹©â€œæ’è¯¾è¡¨æ¨¡æ¿â€â†’æ‹–æ‹½â€œå‘¨ä¸€è‡³å‘¨äº”â€æ—¶é—´è½´ç»„ä»¶ä¸â€œè¯¾ç¨‹å—â€ç»„ä»¶â†’è°ƒæ•´ä½ç½®ä¸åŸºç¡€æ ·å¼ï¼ˆå¦‚é¢œè‰²ã€å¤§å°ï¼‰â†’ç‚¹å‡»â€œç”Ÿæˆæ³¨è§£ä»£ç â€ï¼Œå³å¯å¾—åˆ°<code>WeeklyScheduleView</code>çš„åŸºç¡€ç±»ç»“æ„ï¼Œåç»­ä»…éœ€è¡¥å……ç»†èŠ‚é€»è¾‘ã€‚</p>
<p>è¿™ç§â€œä½ä»£ç æ­éª¨æ¶+QoderCLIè¡¥ç»†èŠ‚â€çš„æ¨¡å¼ï¼Œä½¿æ’è¯¾è¡¨åŸºç¡€ç»“æ„å¼€å‘æ—¶é—´ä»1å°æ—¶ç¼©çŸ­è‡³5åˆ†é’Ÿï¼Œä¸”ç”Ÿæˆçš„ä»£ç å¤©ç„¶ç¬¦åˆOneCodeè§„èŒƒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">package com.<span class="hljs-property">onecode</span>.<span class="hljs-property">view</span>;

<span class="hljs-keyword">import</span> com.<span class="hljs-property">onecode</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">svg</span>.*;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">onecode</span>.<span class="hljs-property">service</span>.<span class="hljs-property">ScheduleService</span>;

<span class="hljs-comment">/**
 * SVGåŠ¨æ€æ’è¯¾è¡¨è§†å›¾
 * æ³¨è§£è¯´æ˜ï¼š<span class="hljs-doctag">@SVGPaperFormAnnotation</span>å®šä¹‰ç”»å¸ƒï¼Œ<span class="hljs-doctag">@SVGRectCombAnnotation</span>å®šä¹‰è¯¾ç¨‹å—
 * QoderCLIè¾…åŠ©ï¼šè‡ªåŠ¨è¡¥å…¨æ³¨è§£å±æ€§ä¸åŸºç¡€ç»“æ„
 */</span>
@<span class="hljs-title class_">SVGPaperFormAnnotation</span>(
    width = <span class="hljs-string">"100%"</span>,
    height = <span class="hljs-string">"600px"</span>,
    selectable = <span class="hljs-literal">true</span>,
    customService = <span class="hljs-title class_">ScheduleService</span>.<span class="hljs-property">class</span> <span class="hljs-comment">// å…³è”åç«¯æœåŠ¡</span>
)
public <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeeklyScheduleView</span> {
    <span class="hljs-comment">// æ’è¯¾è¡¨è¡¨å¤´ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰</span>
    @<span class="hljs-title class_">SVGText</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(
        text = <span class="hljs-string">"å‘¨ä¸€"</span>,
        left = <span class="hljs-string">"150px"</span>,
        top = <span class="hljs-string">"80px"</span>,
        fontSize = <span class="hljs-string">"16px"</span>,
        fontWeight = <span class="hljs-string">"bold"</span>,
        fill = <span class="hljs-string">"#333333"</span>
    )
    private <span class="hljs-title class_">SVGText</span> mondayTitle;
    
    @<span class="hljs-title class_">SVGText</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(text = <span class="hljs-string">"å‘¨äºŒ"</span>, left = <span class="hljs-string">"280px"</span>, top = <span class="hljs-string">"80px"</span>, fontSize = <span class="hljs-string">"16px"</span>, fontWeight = <span class="hljs-string">"bold"</span>)
    private <span class="hljs-title class_">SVGText</span> tuesdayTitle;
    
    <span class="hljs-comment">// æ•°å­¦è¯¾è¯¾ç¨‹å—ï¼ˆæ ¸å¿ƒäº¤äº’å…ƒç´ ï¼‰</span>
    @<span class="hljs-title class_">SVGRectCombAnnotation</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(
        width = <span class="hljs-string">"120px"</span>,
        height = <span class="hljs-string">"80px"</span>,
        left = <span class="hljs-string">"150px"</span>,
        top = <span class="hljs-string">"100px"</span>,
        fill = <span class="hljs-string">"#4CAF50"</span>,
        stroke = <span class="hljs-string">"#388E3C"</span>,
        strokeWidth = <span class="hljs-string">"2"</span>
    )
    @<span class="hljs-title class_">SVGAttrAnnotation</span>(rx = <span class="hljs-string">"5"</span>, ry = <span class="hljs-string">"5"</span>) <span class="hljs-comment">// åœ†è§’é…ç½®ï¼ˆQoderCLIæ¨èå±æ€§ï¼‰</span>
    private <span class="hljs-title class_">SVGRectCombAnnotation</span> mondayMathClass;
    
    <span class="hljs-comment">// è¯¾ç¨‹æ–‡æœ¬å†…å®¹</span>
    @<span class="hljs-title class_">SVGText</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(
        text = <span class="hljs-string">"æ•°å­¦è¯¾\n9:00-10:30"</span>,
        left = <span class="hljs-string">"160px"</span>,
        top = <span class="hljs-string">"120px"</span>,
        fontSize = <span class="hljs-string">"14px"</span>,
        fill = <span class="hljs-string">"#FFFFFF"</span>,
        fontWeight = <span class="hljs-string">"bold"</span>
    )
    private <span class="hljs-title class_">SVGText</span> mondayMathText;
    
    <span class="hljs-comment">// è‹±è¯­è¯¾è¯¾ç¨‹å—ï¼ˆé€šè¿‡QoderCLIæ‰¹é‡ç”Ÿæˆï¼‰</span>
    @<span class="hljs-title class_">SVGRectCombAnnotation</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(width = <span class="hljs-string">"120px"</span>, height = <span class="hljs-string">"80px"</span>, left = <span class="hljs-string">"150px"</span>, top = <span class="hljs-string">"200px"</span>, fill = <span class="hljs-string">"#2196F3"</span>)
    private <span class="hljs-title class_">SVGRectCombAnnotation</span> mondayEnglishClass;
    
    @<span class="hljs-title class_">SVGText</span>
    @<span class="hljs-title class_">SVGAnnotation</span>(text = <span class="hljs-string">"è‹±è¯­è¯¾\n10:40-12:10"</span>, left = <span class="hljs-string">"160px"</span>, top = <span class="hljs-string">"220px"</span>, fontSize = <span class="hljs-string">"14px"</span>, fill = <span class="hljs-string">"#FFFFFF"</span>)
    private <span class="hljs-title class_">SVGText</span> mondayEnglishText;
}
</code></pre>
<p>QoderCLIè¾…åŠ©æŠ€å·§ï¼šå½“ç¼–å†™è¯¾ç¨‹å—æ³¨è§£æ—¶ï¼ŒOneCode QoderCLIä¼šå®æ—¶æ¨èå¸¸ç”¨å±æ€§ï¼ˆå¦‚åœ†è§’rx/ryã€è¾¹æ¡†å®½åº¦ï¼‰ï¼Œå¹¶è‡ªåŠ¨åŒ¹é…OneCodeä¸»é¢˜è‰²ï¼Œé¿å…è§†è§‰é£æ ¼æ··ä¹±ã€‚</p>
<h3 data-id="heading-9">3.2 ç¬¬äºŒæ­¥ï¼ˆ8åˆ†é’Ÿï¼‰ï¼šæ³¨è§£åŒ–é…ç½®ï¼Œè®©è¯¾ç¨‹å—â€œæ´»â€èµ·æ¥</h3>
<p>æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ç”¨å†™ä¸€è¡ŒJS/CSSåŠ¨ç”»ä»£ç ï¼Œé€šè¿‡OneCode @AnimBinderæ³¨è§£é…ç½®ï¼Œé…åˆQoder CLIè‡ªåŠ¨è¡¥å…¨å‚æ•°ï¼Œ8åˆ†é’Ÿå®ç°æ‰€æœ‰äº¤äº’åŠ¨æ•ˆã€‚</p>
<h4 data-id="heading-10">åœºæ™¯1ï¼šé¼ æ ‡æ‚¬åœé«˜äº®åŠ¨ç”»</h4>
<p>ä¸ºè¯¾ç¨‹å—æ·»åŠ â€œé¢œè‰²æ¸å˜+è½»å¾®ç¼©æ”¾â€çš„æ‚¬åœæ•ˆæœï¼Œæå‡äº¤äº’åé¦ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeeklyScheduleView</span> {
    <span class="hljs-comment">// æ‚¬åœåŠ¨ç”»ç»‘å®šï¼ˆQoderCLIç”Ÿæˆå®Œæ•´é…ç½®ï¼‰</span>
    @<span class="hljs-title class_">AnimBinder</span>(
        customAnim = <span class="hljs-title class_">CustomAnimType</span>.<span class="hljs-property">combine</span>, <span class="hljs-comment">// ç»„åˆåŠ¨ç”»</span>
        name = <span class="hljs-string">"classHoverEffect"</span>,
        trigger = <span class="hljs-title class_">AnimTrigger</span>.<span class="hljs-property">MOUSE_OVER</span>, <span class="hljs-comment">// è§¦å‘æ¡ä»¶ï¼šé¼ æ ‡æ‚¬åœ</span>
        params = {
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"fillColor"</span>, value = <span class="hljs-string">"#66BB6A"</span>), <span class="hljs-comment">// é«˜äº®é¢œè‰²</span>
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"scale"</span>, value = <span class="hljs-string">"1.05"</span>), <span class="hljs-comment">// ç¼©æ”¾æ¯”ä¾‹</span>
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"duration"</span>, value = <span class="hljs-string">"300ms"</span>) <span class="hljs-comment">// åŠ¨ç”»æ—¶é•¿</span>
        },
        bindElements = {<span class="hljs-string">"mondayMathClass"</span>, <span class="hljs-string">"mondayEnglishClass"</span>} <span class="hljs-comment">// ç»‘å®šå¤šä¸ªè¯¾ç¨‹å—</span>
    )
    private <span class="hljs-title class_">AnimBinder</span> hoverAnimation;
    
    <span class="hljs-comment">// é¼ æ ‡ç¦»å¼€æ¢å¤åŠ¨ç”»</span>
    @<span class="hljs-title class_">AnimBinder</span>(
        customAnim = <span class="hljs-title class_">CustomAnimType</span>.<span class="hljs-property">reset</span>,
        name = <span class="hljs-string">"classResetEffect"</span>,
        trigger = <span class="hljs-title class_">AnimTrigger</span>.<span class="hljs-property">MOUSE_OUT</span>,
        params = @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"duration"</span>, value = <span class="hljs-string">"200ms"</span>),
        bindElements = {<span class="hljs-string">"mondayMathClass"</span>, <span class="hljs-string">"mondayEnglishClass"</span>}
    )
    private <span class="hljs-title class_">AnimBinder</span> resetAnimation;
}
</code></pre>
<h4 data-id="heading-11">åœºæ™¯2ï¼šç‚¹å‡»åé¦ˆä¸è¯¾ç¨‹è¯¦æƒ…å¼¹çª—</h4>
<p>ç‚¹å‡»è¯¾ç¨‹å—æ—¶è§¦å‘â€œç¼©æ”¾+é¢œè‰²åŠ æ·±â€åŠ¨ç”»ï¼Œå¹¶è°ƒç”¨åç«¯æœåŠ¡æ˜¾ç¤ºè¯¾ç¨‹è¯¦æƒ…ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeeklyScheduleView</span> {
    <span class="hljs-comment">// ç‚¹å‡»åŠ¨ç”»</span>
    @<span class="hljs-title class_">AnimBinder</span>(
        customAnim = <span class="hljs-title class_">CustomAnimType</span>.<span class="hljs-property">combine</span>,
        name = <span class="hljs-string">"classClickEffect"</span>,
        trigger = <span class="hljs-title class_">AnimTrigger</span>.<span class="hljs-property">CLICK</span>,
        params = {
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"fillColor"</span>, value = <span class="hljs-string">"#2E7D32"</span>),
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"scale"</span>, value = <span class="hljs-string">"0.98"</span>),
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"duration"</span>, value = <span class="hljs-string">"150ms"</span>)
        },
        bindElements = {<span class="hljs-string">"mondayMathClass"</span>}
    )
    private <span class="hljs-title class_">AnimBinder</span> clickAnimation;
    
    <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶ç»‘å®šï¼ˆå…³è”åç«¯æœåŠ¡æ–¹æ³•ï¼‰</span>
    @<span class="hljs-title class_">SVGEvent</span>(
        eventEnum = <span class="hljs-title class_">SVGEventEnum</span>.<span class="hljs-property">onClick</span>,
        actions = {
            @<span class="hljs-title class_">CustomAction</span>(
                type = <span class="hljs-title class_">ActionTypeEnum</span>.<span class="hljs-property">METHOD</span>,
                name = <span class="hljs-string">"showCourseDetail"</span>,
                method = <span class="hljs-string">"getCourseById"</span> <span class="hljs-comment">// åç«¯æœåŠ¡æ–¹æ³•</span>
            )
        }
    )
    private <span class="hljs-title class_">SVGRectCombAnnotation</span> mathClassClickEvent;
    
    <span class="hljs-comment">// æ¥æ”¶åç«¯è¿”å›çš„è¯¾ç¨‹è¯¦æƒ…</span>
    private <span class="hljs-title class_">CourseDetail</span> currentCourseDetail;
}
</code></pre>
<h4 data-id="heading-12">åœºæ™¯3ï¼šè¯¾ç¨‹å†²çªé¢„è­¦é—ªçƒåŠ¨ç”»</h4>
<p>å½“æ£€æµ‹åˆ°åŒä¸€æ—¶é—´æ®µé‡å¤æ’è¯¾æ—¶ï¼Œè¯¾ç¨‹å—è‡ªåŠ¨è§¦å‘â€œçº¢æ©™äº¤æ›¿é—ªçƒâ€åŠ¨ç”»ï¼Œæé†’ç®¡ç†å‘˜å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">public <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeeklyScheduleView</span> {
    <span class="hljs-comment">// å†²çªé¢„è­¦åŠ¨ç”»</span>
    @<span class="hljs-title class_">AnimBinder</span>(
        customAnim = <span class="hljs-title class_">CustomAnimType</span>.<span class="hljs-property">blinkAlertLoop</span>,
        name = <span class="hljs-string">"conflictAlertEffect"</span>,
        params = {
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"color1"</span>, value = <span class="hljs-string">"#F44336"</span>),
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"color2"</span>, value = <span class="hljs-string">"#FFCDD2"</span>),
            @<span class="hljs-title class_">AnimParam</span>(key = <span class="hljs-string">"interval"</span>, value = <span class="hljs-string">"500ms"</span>)
        }
    )
    private <span class="hljs-title class_">AnimBinder</span> conflictAnimation;
    
    <span class="hljs-comment">// æ¥æ”¶åç«¯å†²çªé€šçŸ¥ï¼Œè§¦å‘åŠ¨ç”»</span>
    public <span class="hljs-keyword">void</span> <span class="hljs-title function_">onScheduleConflict</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> courseId</span>) {
        <span class="hljs-comment">// å®šä½å†²çªè¯¾ç¨‹å—å¹¶ç»‘å®šåŠ¨ç”»</span>
        <span class="hljs-title class_">SVGRectCombAnnotation</span> conflictBlock = <span class="hljs-title function_">getCourseBlockById</span>(courseId);
        conflictAnimation.<span class="hljs-title function_">bindElement</span>(conflictBlock);
        conflictAnimation.<span class="hljs-title function_">start</span>();
        
        <span class="hljs-comment">// æ˜¾ç¤ºå†²çªæç¤ºï¼ˆOneCodeå†…ç½®å¼¹çª—ç»„ä»¶ï¼‰</span>
        <span class="hljs-title class_">OneCodeDialog</span>.<span class="hljs-title function_">showWarning</span>(<span class="hljs-string">"è¯¾ç¨‹å†²çª"</span>, currentCourseDetail.<span class="hljs-title function_">getConflictReason</span>());
    }
}
</code></pre>
<h3 data-id="heading-13">3.3 ç¬¬ä¸‰æ­¥ï¼ˆ7åˆ†é’Ÿï¼‰ï¼šå…¨æ ˆè”åŠ¨ï¼Œåç«¯æœåŠ¡ä¸€é”®ç”Ÿæˆ</h3>
<p>æ ¸å¿ƒæ•ˆç‡ç‚¹ï¼šQoder CLIä¸€é”®ç”ŸæˆæœåŠ¡ç±»åŸºç¡€ç»“æ„ï¼Œä»…éœ€è¡¥å……5è¡Œä¸šåŠ¡é€»è¾‘ï¼Œ7åˆ†é’Ÿå®Œæˆâ€œæ•°æ®åŠ è½½-äº‹ä»¶å¤„ç†-ä¸»åŠ¨æ¨é€â€å…¨é“¾è·¯æœåŠ¡ï¼Œæ— éœ€æ‰‹åŠ¨å†™æ¥å£æ³¨è§£ä¸è¿”å›æ ¼å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£withContextå’Œlaunchçš„çœŸæ­£åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7577001324416712754</link>    <guid>https://juejin.cn/post/7577001324416712754</guid>    <pubDate>2025-11-26T13:59:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577001324416712754" data-draft-id="7576518316137087027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£withContextå’Œlaunchçš„çœŸæ­£åŒºåˆ«"/> <meta itemprop="keywords" content="Kotlin,Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-26T13:59:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨€æœ‰çŒ¿è¯‰"/> <meta itemprop="url" content="https://juejin.cn/user/2788017216685784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£withContextå’Œlaunchçš„çœŸæ­£åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017216685784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨€æœ‰çŒ¿è¯‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T13:59:27.000Z" title="Wed Nov 26 2025 13:59:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¯‘è‡ªã€ŒThe Real Difference Between withContext(Dispatchers.IO) and launch(Dispatchers.IO)ã€ï¼ŒåŸæ–‡é“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fproandroiddev.com%2Fthe-real-difference-between-withcontext-dispatchers-io-and-launch-dispatchers-io-b70ec00a33f2" target="_blank" title="https://proandroiddev.com/the-real-difference-between-withcontext-dispatchers-io-and-launch-dispatchers-io-b70ec00a33f2" ref="nofollow noopener noreferrer">proandroiddev.com/the-real-diâ€¦</a>ï¼Œç”±
Anatolii Frolovå‘å¸ƒäº2025å¹´11æœˆ20æ—¥ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30bc5447b8124c14a0e977e4fcfb30ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iA5pyJ54y_6K-J:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764770367&amp;x-signature=Zstme%2FcfUwhZEmfTU2VpoaWcp28%3D" alt="0.png" loading="lazy"/></p>
<p>åœ¨ä½¿ç”¨ Kotlin åç¨‹æ—¶ï¼Œå¾ˆå®¹æ˜“é‡åˆ°ä¸¤ç§çœ‹èµ·æ¥ å‡ ä¹ç›¸åŒçš„æ¨¡å¼ã€‚å®ƒä»¬éƒ½ä½¿ç”¨äº† <code>Dispatchers.IO</code>ã€‚å®ƒä»¬éƒ½å°†å·¥ä½œç§»å‡ºä¸»çº¿ç¨‹ã€‚å®ƒä»¬éƒ½å‡ºç°åœ¨ä¸åŒå›¢é˜Ÿç¼–å†™çš„ä»“åº“ã€æœåŠ¡å±‚å’Œ ViewModel ä»£ç ä¸­ã€‚</p>
<p>ä½†ç›¸ä¼¼ä¹‹å¤„ä»…é™äºè¡¨é¢ã€‚å®ƒä»¬çš„è¡Œä¸ºæˆªç„¶ä¸åŒâ€”â€”è¿™ç§å·®å¼‚ä¼šå½±å“å®é™… Android é¡¹ç›®ä¸­çš„é¡ºåºã€æ­£ç¡®æ€§ï¼Œç”šè‡³çº¿ç¨‹å®‰å…¨ã€‚å½“åå°æ“ä½œå½±å“ UI çŠ¶æ€æˆ–å…±äº«æ•°æ®æ—¶ï¼Œè¿™ä¸€ç‚¹å°¤ä¸ºé‡è¦ã€‚</p>
<p>è¿™ç§å›°æƒ‘ä¸éš¾ç†è§£ã€‚å®ƒä»¬çš„è¯­æ³•å‡ ä¹ç›¸åŒï¼Œå¹¶ä¸”éƒ½åœ¨åŒä¸€ä¸ªè°ƒåº¦å™¨ä¸Šè¿è¡Œã€‚ä½†ä¸€ä¸ªä¼šæš‚åœç›´åˆ°å·¥ä½œå®Œæˆï¼Œè€Œå¦ä¸€ä¸ªä¼šå¯åŠ¨å¹¶è¡Œå·¥ä½œå¹¶ç«‹å³è¿”å›ã€‚è¿™åˆ›å»ºäº†ä¸åŒçš„æ‰§è¡Œè·¯å¾„ï¼Œå¾ˆå®¹æ˜“è¢«å¿½ç•¥ã€‚</p>
<p>æœ¬æ–‡è§£é‡Šäº† <code>withContext(Dispatchers.IO)</code> å’Œ <code>launch(Dispatchers.IO)</code> ä¹‹é—´çš„çœŸæ­£åŒºåˆ«ï¼Œé€šè¿‡å®é™…ä»£ç å±•ç¤ºäº†å®ƒä»¬çš„è¡Œä¸ºå·®å¼‚ï¼Œå¹¶é‡ç‚¹ä»‹ç»äº†è¿™ç§å·®å¼‚åœ¨ç”Ÿäº§ç¯å¢ƒ Android åº”ç”¨ä¸­çš„é‡è¦æ€§ã€‚</p>
<h2 data-id="heading-0">çœ‹ä¼¼ç›¸åŒçš„ä»£ç è¡Œä¸ºå´æˆªç„¶ä¸åŒ</h2>
<p>ä»¥ä¸‹ä¸¤æ®µä»£ç çœ‹èµ·æ¥å‡ ä¹ä¸€æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">withContext(Dispatchers.IO) {
    <span class="hljs-comment">// work</span>
}launch(Dispatchers.IO) {
    <span class="hljs-comment">// work</span>
}
</code></pre>
<p>å®ƒä»¬è¿è¡Œåœ¨åŒä¸€ä¸ªè°ƒåº¦å™¨ä¸Šã€‚å®ƒä»¬éƒ½å°†å·¥ä½œè½¬ç§»åˆ°åå°çº¿ç¨‹ã€‚ä½†å®ƒä»¬çš„è¡Œä¸º<strong>å¹¶ä¸</strong>ç›¸åŒã€‚</p>
<p>ä»¥ä¸‹æ˜¯å¹¶æ’è¿è¡Œå®ƒä»¬çš„ç»“æœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> = runBlocking {
    println(<span class="hljs-string">"Start"</span>)

    launch(Dispatchers.IO) {
        delay(<span class="hljs-number">100</span>)
        println(<span class="hljs-string">"Inside launch"</span>)
    }

    withContext(Dispatchers.IO) {
        delay(<span class="hljs-number">50</span>)
        println(<span class="hljs-string">"Inside withContext"</span>)
    }

    println(<span class="hljs-string">"End"</span>)
}
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Start
Inside withContext
End
Inside launch
</code></pre>
<p>è¿™å±•ç¤ºäº†å…³é”®åŒºåˆ«ã€‚</p>
<p><code>withContext</code> ä¼šç­‰å¾…å…¶å·¥ä½œå®Œæˆæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</p>
<p><code>launch</code> åˆ™å®Œå…¨ä¸ç­‰å¾…â€”â€”å®ƒå¹¶è¡Œè¿è¡Œï¼Œå¹¶åœ¨ç¨åå®Œæˆã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µ</h2>
<p><code>withContext</code> æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ã€‚è¿™æ„å‘³ç€å½“å‰åç¨‹ä¼šåœ¨è¯¥è¡Œæš‚åœï¼Œåˆ‡æ¢åˆ° <code>Dispatchers.IO</code>ï¼Œæ‰§è¡Œä»£ç å—ï¼Œç„¶åä»ä¸­æ–­çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚è¿™é‡Œçš„å…³é”®è¯æ˜¯<strong>ç­‰å¾…</strong>ã€‚åœ¨è¯¥è¡Œä¹‹åçš„ä»»ä½•ä»£ç éƒ½ä¼šç­‰å¾…ä»£ç å—æ‰§è¡Œå®Œæ¯•ã€‚</p>
<p><code>launch</code> ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹å¹¶ç«‹å³è¿”å›ã€‚å½“å‰åç¨‹ä¼šç«‹å³ç»§ç»­æ‰§è¡Œï¼Œè€Œæ–°åˆ›å»ºçš„ä»£ç å—ä¼šç‹¬ç«‹æ‰§è¡Œã€‚è¿™æ˜¯ä¸€ç§â€œè§¦å‘å¹¶ç»§ç»­â€æ¨¡å¼ã€‚é™¤éä½ æ˜¾å¼åœ°å¯¹æ–°åˆ›å»ºçš„åç¨‹è°ƒç”¨ <code>join()</code>ï¼Œå¦åˆ™ä¸ä¼šæœ‰ç­‰å¾…ã€‚</p>
<p>è¿™ä¸æ˜¯ä¸€ä¸ª bugï¼Œè€Œæ˜¯åç¨‹æ„å»ºå™¨çš„è®¾è®¡å†³ç­–ã€‚</p>
<p><code>withContext</code> ç¡®ä¿å•ä¸ªåç¨‹å†…éƒ¨çš„æ‰§è¡Œé¡ºåºã€‚</p>
<p><code>launch</code> çš„è®¾è®¡æœ¬èº«å°±å¼•å…¥äº†å¹¶å‘æ€§ã€‚</p>
<p>è¿™ç§è§†è§‰ä¸Šçš„ç›¸ä¼¼æ€§æ©ç›–äº†è¡Œä¸ºä¸Šçš„å·®å¼‚ã€‚å‰è€…ä¿æŒä»£ç çš„å¯é¢„æµ‹é¡ºåºï¼Œè€Œåè€…å¼•å…¥äº†å¹¶è¡Œå·¥ä½œï¼Œè¿™äº›å·¥ä½œå¯èƒ½ä¼šæ ¹æ®è°ƒåº¦å’Œè´Ÿè½½æƒ…å†µéšæ—¶å®Œæˆã€‚</p>
<h2 data-id="heading-2">è¿™ç§å·®å¼‚åœ¨å®é™…é¡¹ç›®ä¸­çš„é‡è¦æ€§</h2>
<p>åœ¨è®¸å¤š Android åœºæ™¯ä¸­ï¼Œä»»åŠ¡å®Œæˆçš„ç¡®åˆ‡æ—¶é—´è‡³å…³é‡è¦ã€‚å“ªæ€•æ˜¯é¡ºåºä¸Šçš„ç»†å¾®å·®åˆ«ï¼Œéƒ½å¯èƒ½å¯¼è‡´ä¸€äº›éš¾ä»¥å¯Ÿè§‰çš„ bugï¼Œç›´åˆ°ç”Ÿäº§ç¯å¢ƒæ‰ä¼šè¢«å‘ç°ã€‚</p>
<h3 data-id="heading-3">1. åå°ä»»åŠ¡å®Œæˆåæ›´æ–° UI</h3>
<p>åœ¨ ViewModel ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">viewModelScope.launch {
    <span class="hljs-keyword">val</span> user = withContext(Dispatchers.IO) {
        userRepository.loadUser()
    }
    _state.value = user
}
</code></pre>
<p>è¾“å‡ºï¼ˆæ¦‚å¿µå›¾ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">User loaded first
UI updated second
</code></pre>
<p>ç”±äº <code>withContext</code> ä¼šç­‰å¾…ï¼Œå› æ­¤ UI åªæœ‰åœ¨åŠ è½½å®Œæˆåæ‰ä¼šæ›´æ–°ã€‚</p>
<p>ä½†å¦‚æœå°†å…¶æ›¿æ¢ä¸º <code>launch(Dispatchers.IO)</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">viewModelScope.launch {
    <span class="hljs-keyword">var</span> result: User? = <span class="hljs-literal">null</span>

    launch(Dispatchers.IO) {
        result = userRepository.loadUser()
    }

    _state.value = result
}
</code></pre>
<p>è¾“å‡ºï¼ˆæ¦‚å¿µå›¾ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">UI updated first
User loaded later
</code></pre>
<p>è¿™é‡Œï¼ŒUI åœ¨åå°ä»»åŠ¡å®Œæˆä¹‹å‰å°±æ›´æ–°äº†ã€‚è¯­æ³•ä¸Šçš„è§†è§‰ç›¸ä¼¼æ€§æ©ç›–äº†æ‰§è¡Œé¡ºåºçš„ä¸åŒã€‚</p>
<h3 data-id="heading-4">2.åè°ƒå¤šæ­¥éª¤åå°æ“ä½œ</h3>
<p>åœ¨è‡ªå®šä¹‰ä»“åº“ä»£ç ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ“ä½œä¸¥æ ¼æŒ‰ç…§é¡ºåºæ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œå…ˆä¿å­˜æ•°æ®ï¼Œç„¶åå†™å…¥æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">withContext(Dispatchers.IO) {
    fileWriter.save(<span class="hljs-keyword">data</span>)
}

withContext(Dispatchers.IO) {
    logWriter.write(<span class="hljs-string">"Saved"</span>)
}
</code></pre>
<p><code>suspend</code> ä¿è¯äº†æ“ä½œé¡ºåºã€‚æ—¥å¿—å†™å…¥å¿…é¡»åœ¨ä¿å­˜å®Œæˆåæ‰èƒ½è¿›è¡Œã€‚</p>
<p>ä½†ä½¿ç”¨ <code>launch</code> åˆ™ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">launch(Dispatchers.IO) { fileWriter.save(<span class="hljs-keyword">data</span>) }
launch(Dispatchers.IO) { logWriter.write(<span class="hljs-string">"Saved"</span>) }
</code></pre>
<p>è¿™ä¸¤ä¸ªæ“ä½œå¯ä»¥ä»¥ä»»æ„é¡ºåºæ‰§è¡Œã€‚åœ¨è´Ÿè½½è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œæ—¥å¿—å†™å…¥å¯èƒ½æ—©äºä¿å­˜æ“ä½œã€‚è¿™å¬èµ·æ¥ä¼¼ä¹æ— å…³ç´§è¦ï¼Œä½†ä¸€æ—¦è°ƒè¯•æˆ–å®¡è®¡å˜å¾—å›°éš¾ï¼Œå°±ä¼šé€ æˆé—®é¢˜ã€‚</p>
<h3 data-id="heading-5">3. è®¿é—®å…±äº«çŠ¶æ€</h3>
<p>ä½¿ç”¨ <code>withContext</code> è¿›è¡Œé¡ºåºæ‰§è¡Œåœ¨æ›´æ–°å…±äº«å¯¹è±¡æ—¶æ›´å®‰å…¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">withContext(Dispatchers.IO) {
    cache.update(item)
}
</code></pre>
<p>ä½¿ç”¨ <code>launch</code>ï¼Œä¸¤ä¸ªæ›´æ–°æ“ä½œå¯ä»¥åŒæ—¶è¿è¡Œï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">launch(Dispatchers.IO) { cache.update(item1) }
launch(Dispatchers.IO) { cache.update(item2) }
</code></pre>
<p>é™¤éç¼“å­˜æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦åˆ™å¹¶è¡Œå†™å…¥å¯èƒ½ä¼šå¯¼è‡´ç«æ€æ¡ä»¶ã€‚</p>
<h2 data-id="heading-6">ä¸ºä»€ä¹ˆè¿™ç§å·®å¼‚å®¹æ˜“è¢«å¿½ç•¥</h2>
<p>ä¸»è¦åŸå› æ˜¯è¯­æ³•ã€‚ä¸¤è€…éƒ½ä½¿ç”¨ç›¸åŒçš„æ‹¬å·ã€‚ä¸¤è€…éƒ½æ˜¾ç¤º <code>Dispatchers.IO</code>ã€‚ä¸¤è€…éƒ½å°†ä»£ç åŒ…è£¹åœ¨ä»£ç å—ä¸­ã€‚äººä»¬çš„æ³¨æ„åŠ›ä¼šé›†ä¸­åœ¨è°ƒåº¦å™¨ä¸Šï¼Œè€Œä¸æ˜¯åç¨‹æ„å»ºå™¨ä¸Šã€‚</p>
<p>å¦ä¸€ä¸ªåŸå› æ˜¯è®¸å¤šç°ä»£åº“å·²ç»åœ¨å†…éƒ¨å¤„ç†çº¿ç¨‹ã€‚Room DAO æ–¹æ³•å’Œ Retrofit çš„æŒ‚èµ·å‡½æ•°ä¸éœ€è¦ <code>withContext(Dispatchers.IO)</code>ã€‚ç”±äºè¿™äº›åº“å‡å°‘äº†æ‰‹åŠ¨åˆ‡æ¢è°ƒåº¦å™¨ï¼Œå¼€å‘è€…çœ‹åˆ°çš„åç¨‹æ„å»ºå™¨ä¹‹é—´çš„æ˜æ˜¾å·®å¼‚è¾ƒå°‘ã€‚</p>
<p>è¿™å¯èƒ½ä¼šé€ æˆä¸€ç§é”™è§‰ï¼Œå³æ‰€æœ‰è°ƒåº¦å™¨çš„ç”¨æ³•éƒ½å¯ä»¥äº’æ¢ï¼Œä½†å¯¹äºè‡ªå®šä¹‰æ“ä½œæ¥è¯´å¹¶éå¦‚æ­¤ã€‚</p>
<h2 data-id="heading-7">ä¸ async/await çš„æ·±å…¥æ¯”è¾ƒ</h2>
<p>ä¸ºäº†è¿›ä¸€æ­¥çªå‡ºå·®å¼‚ï¼Œè¯·æ¯”è¾ƒä»¥ä¸‹ä¸‰ä¸ªç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> deferred = async(Dispatchers.IO) {
    loadData()
}<span class="hljs-keyword">val</span> result = deferred.await()
println(result)
</code></pre>
<p>è¾“å‡ºï¼ˆæ¦‚å¿µå›¾ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">loadData completes
result printed
</code></pre>
<p><code>async</code> çš„è¡Œä¸ºç±»ä¼¼äº <code>launch</code>ï¼Œä½†è¿”å› <code>Deferred</code>ã€‚</p>
<p><code>await()</code> ä¼šå°†å…¶è½¬æ¢ä¸ºé¡ºåºè¡Œä¸ºâ€”â€”å°±åƒ <code>withContext</code> ä¸€æ ·ã€‚</p>
<p>å…³é”®ç‚¹ï¼š<strong>é¡ºåºè¡Œä¸ºä»…åœ¨æ˜¾å¼ç­‰å¾…æ—¶å‘ç”Ÿã€‚</strong></p>
<h2 data-id="heading-8">å¼‚å¸¸å¤„ç†è¡Œä¸º</h2>
<p><code>withContext</code> ç›´æ¥åœ¨è°ƒç”¨åç¨‹ä¸­æŠ›å‡ºå¼‚å¸¸ã€‚å®ƒä»¬ä¸ä¼šè¢«å»¶è¿Ÿæˆ–å­˜å‚¨ã€‚</p>
<p><code>launch</code> å°†å¼‚å¸¸æŠ¥å‘Šç»™å…¶çˆ¶ä½œç”¨åŸŸã€‚å¦‚æœè¯¥ä½œç”¨åŸŸæœ‰ supervisor æˆ–è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ç¨‹åºï¼Œåˆ™æ•ˆæœä¸åŒã€‚å¼‚å¸¸ä¸ä¼šç«‹å³ä¸­æ–­è°ƒç”¨è€…çš„æ‰§è¡Œè·¯å¾„ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">withContext(Dispatchers.IO) { error(<span class="hljs-string">"Boom"</span>) }
println(<span class="hljs-string">"Next"</span>)
</code></pre>
<p>å´©æºƒä¼šåœ¨â€œNextâ€æ‰§è¡Œä¹‹å‰åœæ­¢åç¨‹ã€‚</p>
<p>ä½†ä½¿ç”¨ <code>launch</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">launch(Dispatchers.IO) { error(<span class="hljs-string">"Boom"</span>) }
println(<span class="hljs-string">"Next"</span>)
</code></pre>
<p>â€œNextâ€ä»ç„¶ä¼šæ‰“å°ã€‚å¯åŠ¨çš„åç¨‹ä¼šè‡ªè¡Œå´©æºƒã€‚</p>
<h2 data-id="heading-9">éœ€è¦è®°ä½çš„å†…å®¹</h2>
<ul>
<li>
<p><code>withContext</code> <strong>ç­‰å¾…</strong>ä»£ç å—æ‰§è¡Œå®Œæ¯•åæ‰ä¼šç»§ç»­æ‰§è¡Œã€‚</p>
</li>
<li>
<p><code>launch</code> ä¼šå¯åŠ¨<strong>å¹¶è¡Œ</strong>å·¥ä½œå¹¶ç«‹å³è¿”å›ã€‚</p>
</li>
<li>
<p>å½“<strong>ç»“æœæˆ–é¡ºåº</strong>è‡³å…³é‡è¦æ—¶ï¼Œè¯·ä½¿ç”¨ <code>withContext</code>ã€‚</p>
</li>
<li>
<p>å½“ä½ éœ€è¦<strong>å¹¶å‘å·¥ä½œ</strong>ä¸”æ— éœ€é˜»å¡è°ƒç”¨è€…æ—¶ï¼Œè¯·ä½¿ç”¨ <code>launch</code>ã€‚</p>
</li>
<li>
<p>è§†è§‰ä¸Šçš„ç›¸ä¼¼æ€§æ©ç›–äº†è¡Œä¸ºä¸Šçš„å·®å¼‚â€”â€”åç¨‹æ„å»ºå™¨å®šä¹‰äº†è¯­ä¹‰ï¼Œè€Œä¸æ˜¯è°ƒåº¦å™¨ã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p><code>withContext(Dispatchers.IO)</code> å’Œ <code>launch(Dispatchers.IO)</code> çœ‹èµ·æ¥ç›¸ä¼¼ï¼Œä½†è¡Œä¸ºå´ä¸åŒã€‚å‰è€…ä¼šæš‚åœå¹¶ç¡®ä¿é¡ºåºæ‰§è¡Œï¼Œè€Œåè€…ä¼šåˆ›å»ºå¹¶å‘å¹¶ç«‹å³ç»§ç»­æ‰§è¡Œã€‚å½“å·¥ä½œé¡ºåºã€å…±äº«çŠ¶æ€ã€UI æ›´æ–°æˆ–å¼‚å¸¸å¤„ç†ä¾èµ–äºå·¥ä½œå®Œæˆæ—¶é—´æ—¶ï¼Œè¿™ç§å·®å¼‚è‡³å…³é‡è¦ã€‚</p>
<p>ç†è§£è¿™ç§åŒºåˆ«å¯ä»¥ä½¿åç¨‹ä»£ç æ›´æ˜“äºé¢„æµ‹ï¼Œå¹¶é¿å…é‚£äº›åªæœ‰åœ¨å®é™…åº”ç”¨ä¸­æ‰ä¼šæ˜¾ç°çš„ç»†å¾®é”™è¯¯ã€‚</p>
<blockquote>
<p>æ¬¢è¿æœç´¢å¹¶å…³æ³¨ <em>å…¬ä¼—å·<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fqrcode%3Fscene%3D10000004%26size%3D512%26__biz%3DMzU1MDg0NDczNA%3D%3D%26mid%3D2247484417%26idx%3D1%26sn%3D60c15f0d3c4be75e37748c2472a74102" target="_blank" title="https://mp.weixin.qq.com/mp/qrcode?scene=10000004&amp;size=512&amp;__biz=MzU1MDg0NDczNA==&amp;mid=2247484417&amp;idx=1&amp;sn=60c15f0d3c4be75e37748c2472a74102" ref="nofollow noopener noreferrer">ã€Œç¨€æœ‰çŒ¿è¯‰ã€</a></em> è·å–æ›´å¤šçš„ä¼˜è´¨æ–‡ç« ï¼</p>
<p>ä¿æŠ¤åŸåˆ›ï¼Œè¯·å‹¿è½¬è½½ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DeepAgentså®˜æ–¹æ–‡æ¡£ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7576859345935302710</link>    <guid>https://juejin.cn/post/7576859345935302710</guid>    <pubDate>2025-11-26T14:03:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859345935302710" data-draft-id="7576838552472240171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DeepAgentså®˜æ–¹æ–‡æ¡£ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T14:03:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¡œå¹é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/1179091901098269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DeepAgentså®˜æ–¹æ–‡æ¡£ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1179091901098269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¡œå¹é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T14:03:08.000Z" title="Wed Nov 26 2025 14:03:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>DeepAgents.jså®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Fdeepagents%2Foverview" target="_blank" title="https://docs.langchain.com/oss/javascript/deepagents/overview" ref="nofollow noopener noreferrer">Deep Agents</a></p>
<hr/>
<h2 data-id="heading-0">Deep Agents æ¦‚è§ˆ</h2>
<p><strong>æ„å»ºèƒ½å¤Ÿè§„åˆ’ã€ä½¿ç”¨ subagents ä»¥åŠåˆ©ç”¨æ–‡ä»¶ç³»ç»Ÿå¤„ç†å¤æ‚ä»»åŠ¡çš„ agents</strong></p>
<p><code>deepagents</code> æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº“ï¼Œä¸“ä¸ºæ„å»ºèƒ½å¤Ÿå¤„ç†å¤æ‚ã€å¤šæ­¥éª¤ä»»åŠ¡çš„ agents è€Œè®¾è®¡ã€‚å®ƒåŸºäº <strong>LangGraph</strong> æ„å»ºï¼Œçµæ„Ÿæ¥æºäº <strong>Claude Code</strong>ã€<strong>Deep Research</strong> å’Œ <strong>Manus</strong> ç­‰åº”ç”¨ã€‚Deep agents è‡ªå¸¦è§„åˆ’èƒ½åŠ›ã€ç”¨äºä¸Šä¸‹æ–‡ç®¡ç†çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä»¥åŠç”Ÿæˆ (spawn) <strong>subagents</strong> çš„èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä½•æ—¶ä½¿ç”¨ deep agents</h3>
<p>å½“æ‚¨éœ€è¦å…·å¤‡ä»¥ä¸‹èƒ½åŠ›çš„ agents æ—¶ï¼Œè¯·ä½¿ç”¨ deep agentsï¼š</p>
<ul>
<li>å¤„ç†éœ€è¦è§„åˆ’å’Œåˆ†è§£çš„<strong>å¤æ‚ã€å¤šæ­¥éª¤ä»»åŠ¡</strong></li>
<li>é€šè¿‡æ–‡ä»¶ç³»ç»Ÿ tools <strong>ç®¡ç†å¤§é‡ä¸Šä¸‹æ–‡</strong></li>
<li>å°†<strong>å·¥ä½œå§”æ‰˜</strong>ç»™ä¸“é—¨çš„ subagents ä»¥å®ç°ä¸Šä¸‹æ–‡éš”ç¦»</li>
<li>è·¨å¯¹è¯å’Œ <strong>threads</strong> æŒä¹…åŒ– <strong>memory</strong></li>
</ul>
<p>å¯¹äºæ›´ç®€å•çš„ç”¨ä¾‹ï¼Œè¯·è€ƒè™‘ä½¿ç”¨ <strong>LangChain</strong> çš„ <code>create_agent</code> æˆ–æ„å»ºè‡ªå®šä¹‰çš„ <strong>LangGraph workflow</strong>ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒèƒ½åŠ› (Core capabilities)</h3>
<h4 data-id="heading-3">è§„åˆ’ä¸ä»»åŠ¡åˆ†è§£ (Planning and task decomposition)</h4>
<p>Deep agents åŒ…å«ä¸€ä¸ªå†…ç½®çš„ <code>write_todos</code> toolï¼Œä½¿ agents èƒ½å¤Ÿå°†å¤æ‚ä»»åŠ¡åˆ†è§£ä¸ºç¦»æ•£çš„æ­¥éª¤ï¼Œè·Ÿè¸ªè¿›åº¦ï¼Œå¹¶éšç€æ–°ä¿¡æ¯çš„å‡ºç°åŠ¨æ€è°ƒæ•´è®¡åˆ’ã€‚</p>
<h4 data-id="heading-4">ä¸Šä¸‹æ–‡ç®¡ç† (Context management)</h4>
<p>æ–‡ä»¶ç³»ç»Ÿ <strong>tools</strong> (<code>ls</code>, <code>read_file</code>, <code>write_file</code>, <code>edit_file</code>) å…è®¸ agents å°†å¤§é‡ä¸Šä¸‹æ–‡å¸è½½ (offload) åˆ° <strong>memory</strong> ä¸­ï¼Œä»è€Œé˜²æ­¢ <strong>context window</strong> æº¢å‡ºï¼Œå¹¶æ”¯æŒå¤„ç†å˜é•¿çš„ tool ç»“æœã€‚</p>
<h4 data-id="heading-5">Subagent ç”Ÿæˆ (Subagent spawning)</h4>
<p>å†…ç½®çš„ <code>task</code> tool å…è®¸ agents ç”Ÿæˆä¸“é—¨çš„ <strong>subagents</strong> ä»¥è¿›è¡Œä¸Šä¸‹æ–‡éš”ç¦»ã€‚è¿™æ—¢ä¿æŒäº†ä¸» agent çš„ä¸Šä¸‹æ–‡æ•´æ´ï¼Œåˆèƒ½é’ˆå¯¹ç‰¹å®šçš„å­ä»»åŠ¡è¿›è¡Œæ·±å…¥å¤„ç†ã€‚</p>
<h4 data-id="heading-6">é•¿æœŸè®°å¿† (Long-term memory)</h4>
<p>åˆ©ç”¨ <strong>LangGraph</strong> çš„ <strong>Store</strong> æ‰©å±• agentsï¼Œä½¿å…¶å…·å¤‡è·¨ <strong>threads</strong> çš„æŒä¹…åŒ– <strong>memory</strong>ã€‚Agents å¯ä»¥ä¿å­˜å¹¶æ£€ç´¢å…ˆå‰å¯¹è¯ä¸­çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-7">ä¸ LangChain ç”Ÿæ€ç³»ç»Ÿçš„å…³ç³»</h3>
<p>Deep agents æ„å»ºäºä»¥ä¸‹åŸºç¡€ä¹‹ä¸Šï¼š</p>
<ul>
<li><strong>LangGraph</strong> - æä¾›åº•å±‚çš„ graph æ‰§è¡Œå’Œ <strong>state</strong> ç®¡ç†</li>
<li><strong>LangChain</strong> - <strong>Tools</strong> å’Œ <strong>model</strong> é›†æˆå¯ä¸ deep agents æ— ç¼åä½œ</li>
<li><strong>LangSmith</strong> - æä¾› <strong>Observability</strong> (å¯è§‚æµ‹æ€§)ã€è¯„ä¼°å’Œéƒ¨ç½²æ”¯æŒ</li>
</ul>
<p>Deep agents åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ <strong>LangSmith Deployment</strong> è¿›è¡Œéƒ¨ç½²ï¼Œå¹¶ä½¿ç”¨ <strong>LangSmith Observability</strong> è¿›è¡Œç›‘æ§ã€‚
è¿™é‡Œæ˜¯æ ¹æ® LangChain DeepAgents JavaScript æ–‡æ¡£ï¼ˆå‚è€ƒ <code>langchain-ai/deepagentsjs</code> å®˜æ–¹ä»“åº“åŠæ–‡æ¡£ç»“æ„ï¼‰è¿›è¡Œçš„ä¸“ä¸šç¿»è¯‘ã€‚</p>
<hr/>
<h2 data-id="heading-8">å¿«é€Ÿå¼€å§‹ (Quickstart)</h2>
<p>åœ¨å‡ åˆ†é’Ÿå†…æ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªDeepAgent</p>
<p>æœ¬æŒ‡å—å°†æŒ‡å¯¼æ‚¨åˆ›å»ºå…·å¤‡è§„åˆ’ã€æ–‡ä»¶ç³»ç»Ÿå·¥å…·å’Œå­AgentåŠŸèƒ½çš„DeepAgentã€‚æ‚¨å°†æ„å»ºä¸€ä¸ªèƒ½å¤Ÿè¿›è¡Œç ”ç©¶å¹¶æ’°å†™æŠ¥å‘Šçš„ç ”ç©¶Agentã€‚</p>
<h3 data-id="heading-9">å…ˆå†³æ¡ä»¶</h3>
<p>å¼€å§‹å‰ï¼Œè¯·ç¡®ä¿å·²ä»æ¨¡å‹æä¾›å•†ï¼ˆå¦‚ Anthropicã€OpenAIï¼‰è·å– API å¯†é’¥ã€‚</p>
<h4 data-id="heading-10">æ­¥éª¤1ï¼šå®‰è£…ä¾èµ–é¡¹</h4>
<p>é¦–å…ˆï¼Œå®‰è£… <code>deepagents</code> åŒ…ä»¥åŠå¿…è¦çš„ä¾èµ–é¡¹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install deepagents @langchain/tavily  
<span class="hljs-comment"># æˆ–  </span>
yarn add deepagents @langchain/tavily  
<span class="hljs-comment"># æˆ–  </span>
pnpm add deepagents @langchain/tavily
</code></pre>
<h4 data-id="heading-11">æ­¥éª¤2ï¼šè®¾ç½® API å¯†é’¥</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> ANTHROPIC_API_KEY=<span class="hljs-string">"your-api-key"</span>  
<span class="hljs-built_in">export</span> TAVILY_API_KEY=<span class="hljs-string">"your-tavily-api-key"</span>
</code></pre>
<h4 data-id="heading-12">æ­¥éª¤3ï¼šåˆ›å»ºæœç´¢å·¥å…·</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain"</span>;  
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TavilySearch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/tavily"</span>;  
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;  

<span class="hljs-keyword">const</span> internetSearch = <span class="hljs-title function_">tool</span>(  
  <span class="hljs-keyword">async</span> ({}: {  
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;  
    maxResults?: <span class="hljs-built_in">number</span>;  
    topic?: <span class="hljs-string">"general"</span> | <span class="hljs-string">"news"</span> | <span class="hljs-string">"finance"</span>;  
    includeRawContent?: <span class="hljs-built_in">boolean</span>;  
  }) =&gt; {  
    <span class="hljs-keyword">const</span> tavilySearch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TavilySearch</span>({  
      maxResults,  
      <span class="hljs-attr">tavilyApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TAVILY_API_KEY</span>,  
      includeRawContent,  
      topic,  
    });  
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> tavilySearch.<span class="hljs-title function_">_call</span>({ query });  
  },  
  {  
    <span class="hljs-attr">name</span>: <span class="hljs-string">"internet_search"</span>,  
    <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‰§è¡Œç½‘ç»œæœç´¢"</span>,  
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({  
      <span class="hljs-attr">query</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœç´¢æŸ¥è¯¢"</span>),  
      <span class="hljs-attr">maxResults</span>: z  
        .<span class="hljs-title function_">number</span>()  
        .<span class="hljs-title function_">optional</span>()  
        .<span class="hljs-title function_">default</span>(<span class="hljs-number">5</span>)  
        .<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœ€å¤§è¿”å›ç»“æœæ•°"</span>),  
      <span class="hljs-attr">topic</span>: z  
        .<span class="hljs-title function_">enum</span>([<span class="hljs-string">"general"</span>, <span class="hljs-string">"news"</span>, <span class="hljs-string">"finance"</span>])  
        .<span class="hljs-title function_">optional</span>()  
        .<span class="hljs-title function_">default</span>(<span class="hljs-string">"general"</span>)  
        .<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœç´¢ä¸»é¢˜åˆ†ç±»"</span>),  
      <span class="hljs-attr">includeRawContent</span>: z  
        .<span class="hljs-title function_">boolean</span>()  
        .<span class="hljs-title function_">optional</span>()  
        .<span class="hljs-title function_">default</span>(<span class="hljs-literal">false</span>)  
        .<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ˜¯å¦åŒ…å«åŸå§‹å†…å®¹"</span>),  
    }),  
  }  
);
</code></pre>
<h4 data-id="heading-13">æ­¥éª¤4ï¼šåˆ›å»ºdeep agent</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createDeepAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"deepagents"</span>;  

<span class="hljs-comment">// å¼•å¯¼Agentæˆä¸ºä¸“å®¶ç ”ç©¶å‘˜çš„ç³»ç»Ÿæç¤º  </span>
<span class="hljs-keyword">const</span> researchInstructions = <span class="hljs-string">`æ‚¨æ˜¯ä¸€ä½ä¸“å®¶ç ”ç©¶å‘˜ã€‚æ‚¨çš„ä»»åŠ¡æ˜¯è¿›è¡Œå½»åº•çš„ç ”ç©¶ï¼Œç„¶åæ’°å†™ä¸€ä»½ç²¾ç‚¼çš„æŠ¥å‘Šã€‚

æ‚¨å¯ä»¥é€šè¿‡äº’è”ç½‘æœç´¢å·¥å…·ä½œä¸ºä¸»è¦ä¿¡æ¯æ”¶é›†æ‰‹æ®µã€‚

## \`internet_search\`

ä½¿ç”¨æ­¤å·¥å…·é’ˆå¯¹ç»™å®šæŸ¥è¯¢æ‰§è¡Œç½‘ç»œæœç´¢ã€‚æ‚¨å¯ä»¥æŒ‡å®šè¿”å›ç»“æœçš„æœ€å¤§æ•°é‡ã€ä¸»é¢˜ä»¥åŠæ˜¯å¦åŒ…å«åŸå§‹å†…å®¹ã€‚`</span>;  

<span class="hljs-keyword">const</span> agent = <span class="hljs-title function_">createDeepAgent</span>({  
  <span class="hljs-attr">tools</span>: [internetSearch],  
  <span class="hljs-attr">systemPrompt</span>: researchInstructions,  
});
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤5ï¼šè¿è¡ŒAgent</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> agent.<span class="hljs-title function_">invoke</span>({  
  <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">"user"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"ä»€ä¹ˆæ˜¯ LangGraphï¼Ÿ"</span> }],  
});  

<span class="hljs-comment">// è¾“å‡ºAgentçš„æœ€ç»ˆå“åº”  </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">messages</span>[result.<span class="hljs-property">messages</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">content</span>);
</code></pre>
<h3 data-id="heading-15">å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>æ‚¨çš„DeepAgentè‡ªåŠ¨å®Œæˆäº†ä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li><strong>è§„åˆ’ç­–ç•¥</strong>ï¼šä½¿ç”¨å†…ç½®Â <code>write_todos</code>å·¥å…·åˆ†è§£ç ”ç©¶ä»»åŠ¡</li>
<li><strong>å¼€å±•ç ”ç©¶</strong>ï¼šè°ƒç”¨Â <code>internet_search</code>å·¥å…·æ”¶é›†ä¿¡æ¯</li>
<li><strong>ä¸Šä¸‹æ–‡ç®¡ç†</strong>ï¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå·¥å…·ï¼ˆ<code>write_file</code>ã€<code>read_file</code>ï¼‰å¸è½½å¤§å‹æœç´¢ç»“æœ</li>
<li><strong>ç”Ÿæˆå­Agent</strong>ï¼ˆå¦‚éœ€ï¼‰ï¼šå°†å¤æ‚å­ä»»åŠ¡å§”æ‰˜ç»™ä¸“ç”¨å­Agent</li>
<li><strong>ç»¼åˆæŠ¥å‘Š</strong>ï¼šå°†å‘ç°ç¼–è¯‘ä¸ºè¿è´¯çš„å“åº”</li>
</ul>
<h3 data-id="heading-16">ä¸‹ä¸€æ­¥</h3>
<p>å®Œæˆé¦–ä¸ªDeepAgentåï¼Œæ‚¨å¯ä»¥ï¼š</p>
<ul>
<li><strong>è‡ªå®šä¹‰Agent</strong>ï¼šå­¦ä¹ è‡ªå®šä¹‰é€‰é¡¹ï¼ˆç³»ç»Ÿæç¤ºã€å·¥å…·ã€å­Agentï¼‰</li>
<li><strong>ç†è§£ä¸­é—´ä»¶</strong>ï¼šæ·±å…¥æ¢ç©¶é©±åŠ¨DeepAgentçš„ä¸­é—´ä»¶æ¶æ„</li>
<li><strong>æ·»åŠ é•¿æœŸè®°å¿†</strong>ï¼šå®ç°è·¨ä¼šè¯çš„æŒä¹…åŒ–è®°å¿†</li>
<li><strong>ç”Ÿäº§éƒ¨ç½²</strong>ï¼šäº†è§£ LangGraph åº”ç”¨çš„éƒ¨ç½²æ–¹æ¡ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-17">å®šåˆ¶DeepAgent</h2>
<p>å­¦ä¹ å¦‚ä½•é€šè¿‡ç³»ç»Ÿæç¤ºã€å·¥å…·ã€å­Agentç­‰æ–¹å¼å®šåˆ¶DeepAgent</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    Create[create_deep_agent] --&gt; Core[Core Config]
    Create --&gt; Features[Features]

    Core --&gt; Model[Model]
    Core --&gt; Prompt[System Prompt]
    Core --&gt; Tools[Tools]

    Features --&gt; Backend[Backend]
    Features --&gt; Sub[Subagents]
    Features --&gt; Interrupt[Interrupts]

    Model --&gt; Agent[Customized Agent]
    Prompt --&gt; Agent
    Tools --&gt; Agent
    Backend --&gt; Agent
    Sub --&gt; Agent
    Interrupt --&gt; Agent
</code></pre>
<h3 data-id="heading-18">æ¨¡å‹</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>deepagents</code>ä½¿ç”¨Â <code>claude-sonnet-4-5-20250929</code>ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¼ é€’ä»»æ„ LangChain æ¨¡å‹å¯¹è±¡è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatAnthropic</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/anthropic"</span>;  
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;  
<span class="hljs-keyword">import</span> { createDeepAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"deepagents"</span>;  

<span class="hljs-comment">// ä½¿ç”¨ Anthropic æ¨¡å‹  </span>
<span class="hljs-keyword">const</span> agent = <span class="hljs-title function_">createDeepAgent</span>({  
  <span class="hljs-attr">model</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatAnthropic</span>({  
    <span class="hljs-attr">model</span>: <span class="hljs-string">"claude-sonnet-4-20250514"</span>,  
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,  
  }),  
});  

<span class="hljs-comment">// ä½¿ç”¨ OpenAI æ¨¡å‹  </span>
<span class="hljs-keyword">const</span> agent2 = <span class="hljs-title function_">createDeepAgent</span>({  
  <span class="hljs-attr">model</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({  
    <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-5"</span>,  
    <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>,  
  }),  
});
</code></pre>
<h3 data-id="heading-19">ç³»ç»Ÿæç¤º</h3>
<p>æ·±åº¦ä»£ç†å†…ç½®åŸºäº Claude Code ç³»ç»Ÿæç¤ºçš„é»˜è®¤å¼•å¯¼æç¤ºã€‚è¯¥é»˜è®¤æç¤ºåŒ…å«ä½¿ç”¨å†…ç½®è§„åˆ’å·¥å…·ã€æ–‡ä»¶ç³»ç»Ÿå·¥å…·å’Œå­ä»£ç†çš„è¯¦ç»†è¯´æ˜ã€‚</p>
<p><strong>æ¯ä¸ªé¢å‘ç‰¹å®šåœºæ™¯çš„æ·±åº¦ä»£ç†éƒ½åº”åŒ…å«é’ˆå¯¹è¯¥åœºæ™¯çš„è‡ªå®šä¹‰ç³»ç»Ÿæç¤º</strong>ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createDeepAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"deepagents"</span>;  

<span class="hljs-keyword">const</span> researchInstructions = <span class="hljs-string">`æ‚¨æ˜¯ä¸€ä½ä¸“å®¶ç ”ç©¶å‘˜ã€‚æ‚¨çš„ä»»åŠ¡æ˜¯è¿›è¡Œå½»åº•çš„ç ”ç©¶ï¼Œç„¶åæ’°å†™ä¸€ä»½ç²¾ç‚¼çš„æŠ¥å‘Šã€‚`</span>;  

<span class="hljs-keyword">const</span> agent = <span class="hljs-title function_">createDeepAgent</span>({  
  <span class="hljs-attr">systemPrompt</span>: researchInstructions,  
});
</code></pre>
<h3 data-id="heading-20">å·¥å…·</h3>
<p>ä¸å·¥å…·è°ƒç”¨ä»£ç†ç±»ä¼¼ï¼Œæ·±åº¦ä»£ç†å¯è®¿é—®ä¸€ç»„é¡¶å±‚å·¥å…·ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain"</span>;  
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TavilySearch</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/tavily"</span>;  
<span class="hljs-keyword">import</span> { createDeepAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"deepagents"</span>;  
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;  

<span class="hljs-keyword">const</span> internetSearch = <span class="hljs-title function_">tool</span>(  
  <span class="hljs-keyword">async</span> ({  
    query,  
    maxResults = <span class="hljs-number">5</span>,  
    topic = <span class="hljs-string">"general"</span>,  
    includeRawContent = <span class="hljs-literal">false</span>,  
  }: {  
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;  
    maxResults?: <span class="hljs-built_in">number</span>;  
    topic?: <span class="hljs-string">"general"</span> | <span class="hljs-string">"news"</span> | <span class="hljs-string">"finance"</span>;  
    includeRawContent?: <span class="hljs-built_in">boolean</span>;  
  }) =&gt; {  
    <span class="hljs-keyword">const</span> tavilySearch = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TavilySearch</span>({  
      maxResults,  
      <span class="hljs-attr">tavilyApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">TAVILY_API_KEY</span>,  
      includeRawContent,  
      topic,  
    });  
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> tavilySearch.<span class="hljs-title function_">_call</span>({ query });  
  },  
  {  
    <span class="hljs-attr">name</span>: <span class="hljs-string">"internet_search"</span>,  
    <span class="hljs-attr">description</span>: <span class="hljs-string">"æ‰§è¡Œç½‘ç»œæœç´¢"</span>,  
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({  
      <span class="hljs-attr">query</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æœç´¢æŸ¥è¯¢"</span>),  
      <span class="hljs-attr">maxResults</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">default</span>(<span class="hljs-number">5</span>),  
      <span class="hljs-attr">topic</span>: z.<span class="hljs-title function_">enum</span>([<span class="hljs-string">"general"</span>, <span class="hljs-string">"news"</span>, <span class="hljs-string">"finance"</span>]).<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">default</span>(<span class="hljs-string">"general"</span>),  
      <span class="hljs-attr">includeRawContent</span>: z.<span class="hljs-title function_">boolean</span>().<span class="hljs-title function_">optional</span>().<span class="hljs-title function_">default</span>(<span class="hljs-literal">false</span>),  
    }),  
  }  
);  

<span class="hljs-keyword">const</span> agent = <span class="hljs-title function_">createDeepAgent</span>({  
  <span class="hljs-attr">tools</span>: [internetSearch],  
});
</code></pre>
<p>é™¤è‡ªå®šä¹‰å·¥å…·å¤–ï¼Œæ·±åº¦ä»£ç†è¿˜å†…ç½®ä»¥ä¸‹é»˜è®¤å·¥å…·ï¼š</p>
<ul>
<li><code>write_todos</code>ï¼šæ›´æ–°ä»£ç†çš„å¾…åŠäº‹é¡¹åˆ—è¡¨</li>
<li><code>ls</code>ï¼šåˆ—å‡ºä»£ç†æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ‰€æœ‰æ–‡ä»¶</li>
<li><code>read_file</code>ï¼šä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ–‡ä»¶</li>
<li><code>write_file</code>ï¼šå‘æ–‡ä»¶ç³»ç»Ÿä¸­å†™å…¥æ–°æ–‡ä»¶</li>
<li><code>edit_file</code>ï¼šç¼–è¾‘ç°æœ‰æ–‡ä»¶</li>
<li><code>task</code>ï¼šç”Ÿæˆå­ä»£ç†å¤„ç†ç‰¹å®šä»»åŠ¡</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Manimè¿›é˜¶ï¼šç”¨èƒŒæ™¯å›¾ç‰‡è®©ä½ çš„æ•°å­¦è§†é¢‘è„±é¢–è€Œå‡º]]></title>    <link>https://juejin.cn/post/7576838552472191019</link>    <guid>https://juejin.cn/post/7576838552472191019</guid>    <pubDate>2025-11-26T12:12:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838552472191019" data-draft-id="7576841976928534564" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Manimè¿›é˜¶ï¼šç”¨èƒŒæ™¯å›¾ç‰‡è®©ä½ çš„æ•°å­¦è§†é¢‘è„±é¢–è€Œå‡º"/> <meta itemprop="keywords" content="Python,åŠ¨æ•ˆ"/> <meta itemprop="datePublished" content="2025-11-26T12:12:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Manimè¿›é˜¶ï¼šç”¨èƒŒæ™¯å›¾ç‰‡è®©ä½ çš„æ•°å­¦è§†é¢‘è„±é¢–è€Œå‡º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:12:03.000Z" title="Wed Nov 26 2025 12:12:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åš<code>Manim</code>åŠ¨ç”»ä¹…äº†ï¼Œä½ æ˜¯å¦åŒå€¦äº†é‚£ä¸‡å¹´ä¸å˜çš„é»‘è‰²è™šç©ºï¼Ÿ</p>
<p>å¾ˆå¤šåˆå­¦è€…ï¼ˆç”šè‡³è€æ‰‹ï¼‰éƒ½æƒ³ç»™åŠ¨ç”»åŠ ä¸ªèƒŒæ™¯å›¾ï¼Œä½†å¾€å¾€ä¼šé‡åˆ°ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>æ€ä¹ˆåŠ </strong>ï¼Ÿ æ˜¯æŠŠå›¾ç‰‡æ”¾è¿›å»ï¼Œè¿˜æ˜¯è®¾ç½®ç›¸æœºï¼Ÿ</li>
<li><strong>çœ‹ä¸æ¸…</strong>ï¼ èƒŒæ™¯èŠ±é‡Œèƒ¡å“¨ï¼Œå‰é¢çš„æ–‡å­—å…¬å¼ç¬é—´â€œéšèº«â€äº†ã€‚</li>
</ol>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€<code>Manim</code>åŠ¨ç”»ä¸­ä¸€ä¸ªç®€å•å´å¼ºå¤§çš„æŠ€å·§--ä¸ºåŠ¨ç”»æ·»åŠ èƒŒæ™¯ã€‚</p>
<p>é€šè¿‡å‡ ä¸ªå°ç¤ºä¾‹ï¼Œåˆ†åˆ«æ¼”ç¤ºä¸¤ç§å®Œå…¨ä¸åŒçš„èƒŒæ™¯å¤„ç†æ€è·¯ã€‚</p>
<h2 data-id="heading-0">1. èˆå°å¸ƒæ™¯æ³•</h2>
<p>ä½¿ç”¨<code>ImageMobject</code>ç±»ï¼Œè¿™æ˜¯æœ€ç›´è§‚ã€æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚</p>
<p>å®ƒçš„<strong>é€»è¾‘</strong>æ˜¯ï¼šèƒŒæ™¯å›¾ç‰‡åªæ˜¯èˆå°ä¸Šçš„ä¸€ä¸ªæ™®é€šæ¼”å‘˜ï¼Œåªæ˜¯å®ƒé•¿å¾—ç‰¹åˆ«å¤§ï¼Œè€Œä¸”ç«™å¾—ç‰¹åˆ«é åã€‚</p>
<p>è¿™ç§æ–¹å¼çš„<strong>ç‰¹ç‚¹</strong>æ˜¯ï¼š</p>
<ul>
<li>
<p><strong>é«˜åº¦çµæ´»</strong>ï¼šèƒŒæ™¯å°±æ˜¯ä¸ªå¯¹è±¡ï¼ˆ<code>Mobject</code>ï¼‰ï¼Œæ‰€ä»¥å®ƒå¯ä»¥åŠ¨ï¼ä½ å¯ä»¥è®©èƒŒæ™¯æ—‹è½¬ã€å¹³ç§»ã€ç¼©æ”¾ï¼Œç”šè‡³æ”¹å˜é¢œè‰²ã€‚</p>
</li>
<li>
<p><strong>å±‚çº§ç®¡ç†</strong>ï¼šéœ€è¦æ‰‹åŠ¨æŠŠå®ƒçš„ <code>z_index</code> è®¾ä½ï¼Œæˆ–è€…æœ€å…ˆæ·»åŠ å®ƒã€‚</p>
</li>
</ul>
<p>ä¸‹é¢çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œå®ç°ä¸€ä¸ªç®€å•çš„<strong>åŠ¨æ€èƒŒæ™¯</strong>ï¼Œæ“ä½œ<strong>èƒŒæ™¯</strong>å’Œæ“ä½œä¸€èˆ¬çš„<code>Mobject</code>æ˜¯ä¸€æ ·çš„ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Method1ImageMobject</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 1. åŠ è½½å›¾ç‰‡ï¼ˆç¡®ä¿è¿™ä¸ªå›¾ç‰‡æ˜¯å­˜åœ¨çš„ï¼‰</span>
        bg = ImageMobject(<span class="hljs-string">"./assets/ç´«è‰²æ¢¦å¹»æ˜Ÿç©º.jpg"</span>)

        <span class="hljs-comment"># 2. æ ¸å¿ƒæ“ä½œï¼šæ’‘æ»¡å±å¹•å¹¶å…è®¸è¶…å‡º</span>
        <span class="hljs-comment"># æˆ‘ä»¬æŠŠé«˜åº¦è®¾ä¸ºå±å¹•é«˜åº¦çš„ 2 å€ï¼Œè¿™æ ·æ‰æœ‰ç§»åŠ¨çš„ç©ºé—´</span>
        bg.scale_to_fit_height(config.frame_height * <span class="hljs-number">2</span>)

        <span class="hljs-comment"># 3. æ ¸å¿ƒæ“ä½œï¼šæ”¾åˆ°æœ€åº•å±‚</span>
        bg.set_z_index(-<span class="hljs-number">100</span>)

        self.add(bg)

        <span class="hljs-comment"># å‰æ™¯ç‰©ä½“</span>
        text = Text(<span class="hljs-string">"æ–¹æ³•ä¸€ï¼šImageMobject"</span>, font_size=<span class="hljs-number">40</span>, color=WHITE)
        sub = Text(<span class="hljs-string">"èƒŒæ™¯å¯ä»¥åŠ¨ï¼"</span>, font_size=<span class="hljs-number">24</span>, color=YELLOW).next_to(text, DOWN)

        self.play(Write(text), FadeIn(sub))

        <span class="hljs-comment"># 4. æ¼”ç¤ºä¼˜åŠ¿ï¼šè®©èƒŒæ™¯ç¼“æ…¢ç§»åŠ¨</span>
        self.play(bg.animate.shift(LEFT * <span class="hljs-number">2</span>), rate_func=linear)
        self.play(bg.animate.shift(UP * <span class="hljs-number">2</span>), rate_func=linear)
        self.play(bg.animate.shift(RIGHT * <span class="hljs-number">2</span>), rate_func=linear)
        self.play(bg.animate.shift(DOWN * <span class="hljs-number">2</span>), rate_func=linear)
        self.wait()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/061bb7b7bbc04a56b9da5766fa01197c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764763923&amp;x-signature=j6qOcgtvxSDXv1NOUOc%2BjPJpDSY%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢çš„ç¤ºä¾‹ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ˜¾ç¤ºä¸€æ®µç®€å•çš„å…¬å¼ã€‚</p>
<p>ä¸è¿‡ï¼Œå¤§å®¶å¯ä»¥æ¯”è¾ƒçœ‹çœ‹ï¼Œç›¸æ¯”äºé»˜è®¤çš„é»‘è‰²èƒŒæ™¯ï¼ŒåŠ ä¸€ä¸ªå­¦æ ¡çš„é»‘æ¿èƒŒæ™¯ï¼Œæ˜¯ä¸æ˜¯æ›´æœ‰äº²å’ŒåŠ›ï¼Ÿ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Method2ImageMobject</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 1. åŠ è½½å›¾ç‰‡</span>
        bg = ImageMobject(<span class="hljs-string">"./assets/é»‘æ¿.jpg"</span>)

        <span class="hljs-comment"># 2. è°ƒæ•´å¤§å°é“ºæ»¡å±å¹•</span>
        bg.scale_to_fit_height(config.frame_height)
        bg.scale_to_fit_width(config.frame_width)

        <span class="hljs-comment"># 3. æ ¸å¿ƒæ“ä½œï¼šæ”¾åˆ°æœ€åº•å±‚</span>
        bg.set_z_index(-<span class="hljs-number">100</span>)
        self.add(bg)

        <span class="hljs-comment"># å‰æ™¯ç‰©ä½“</span>
        math = MathTex(<span class="hljs-string">r"\int_0^\infty e^{-x^2} dx = \frac{\sqrt{\pi}}{2}"</span>)
        self.play(Write(math))
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/724f8e6c53344fe8b80ecd523d8ad594~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764763923&amp;x-signature=jQeh67hJOUrKJJxZNloxY7%2Bdu88%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. ä¸»è§’å…‰ç¯æ³•</h2>
<p>é™¤äº†ä¸Šé¢ä¸¤ç§ï¼Œè¿˜æœ‰ä¸€ç§æ¯”è¾ƒç‰¹æ®Šçš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯<code>BackgroundColoredVMobjectDisplayer</code>ç±»ã€‚</p>
<p>å®ƒæ˜¯ä¸€ä¸ª<strong>è´Ÿè´£æ¸²æŸ“</strong>çš„ç±»ï¼Œä¸“é—¨å¤„ç†ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼š<strong>å½“ç‰©ä½“æ‹¥æœ‰â€œèƒŒæ™¯è‰²æè¾¹â€æ—¶ï¼Œå¦‚ä½•é®æŒ¡ä½å®ƒèƒŒåçš„ä¸œè¥¿</strong>ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ <code>set_background_stroke()</code> æ¥è°ƒç”¨è¿™ä¸ªæœºåˆ¶ã€‚</p>
<p>ä¸¥æ ¼æ¥è¯´ä¸æ˜¯ <strong>â€œè®¾ç½®å…¨å±èƒŒæ™¯â€</strong>ï¼Œè€Œæ˜¯ <strong>â€œç»™ç‰©ä½“åŠ ä¸€ä¸ªå±€éƒ¨èƒŒæ™¯ï¼ˆMatteï¼‰â€</strong>ï¼Œè¿™æ˜¯åœ¨èŠ±å“¨èƒŒæ™¯ä¸‹ç”Ÿå­˜çš„å¿…å¤‡æŠ€èƒ½ã€‚</p>
<p>å®ƒçš„<strong>ç‰¹ç‚¹</strong>æ˜¯ï¼š</p>
<ul>
<li><strong>å±€éƒ¨é®æŒ¡</strong>ï¼šåœ¨æ–‡å­—æˆ–å…¬å¼å‘¨å›´ç”Ÿæˆä¸€åœˆä¸é€æ˜çš„è½®å»“ã€‚</li>
<li><strong>å¢å¼ºå¯¹æ¯”</strong>ï¼šä¸“é—¨ç”¨äºè§£å†³â€œèƒŒæ™¯å¤ªèŠ±ï¼Œæ–‡å­—çœ‹ä¸æ¸…â€çš„é—®é¢˜ã€‚</li>
</ul>
<p>ä¸‹é¢çš„ç¤ºä¾‹æ•…æ„æ„é€ äº†ä¸€ä¸ªæ··ä¹±çš„èƒŒæ™¯ï¼Œç„¶åæ¯”è¾ƒçœ‹çœ‹ï¼Œè¿™ä¸¤ä¸ªä¸€æ ·çš„å…¬å¼ï¼Œæ˜¯ä¸æ˜¯åŠ äº†å±€éƒ¨èƒŒæ™¯çš„å…¬å¼æ›´åŠ æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadableFormulaOnImage</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># 1. å…ˆè®¾ç½®ä¸€ä¸ªå¾ˆèŠ±çš„èƒŒæ™¯ï¼ˆè¿™é‡Œä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬ç”¨éšæœºå™ªç‚¹æ¨¡æ‹Ÿä¸€å¼ å¤æ‚çš„å›¾ï¼‰</span>
        <span class="hljs-comment"># å®é™…ä½¿ç”¨ä¸­ï¼Œè¯·æ¢æˆä½ çš„ image.jpg</span>
        noise = Rectangle(width=<span class="hljs-number">16</span>, height=<span class="hljs-number">10</span>)
        noise.set_fill(color=[BLUE, RED, GREEN, YELLOW], opacity=<span class="hljs-number">0.5</span>)
        <span class="hljs-comment"># æŠŠå®ƒæå¾—ä¹±ä¸€ç‚¹</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">20</span>):
            line = Line(
                start=[np.random.uniform(-<span class="hljs-number">7</span>, <span class="hljs-number">7</span>), np.random.uniform(-<span class="hljs-number">4</span>, <span class="hljs-number">4</span>), <span class="hljs-number">0</span>],
                end=[np.random.uniform(-<span class="hljs-number">7</span>, <span class="hljs-number">7</span>), np.random.uniform(-<span class="hljs-number">4</span>, <span class="hljs-number">4</span>), <span class="hljs-number">0</span>],
                color=random_color(),
                stroke_width=<span class="hljs-number">5</span>,
            )
            self.add(line)
        self.add(noise)

        <span class="hljs-comment"># 2. æ™®é€šçš„æ–‡å­—ï¼ˆåœ¨èŠ±èƒŒæ™¯ä¸‹å¾ˆéš¾çœ‹æ¸…ï¼‰</span>
        bad_text = MathTex(<span class="hljs-string">r"\frac{-b \pm \sqrt{b^2 - 4ac}}{2a}"</span>)
        bad_text.shift(UP)

        <span class="hljs-comment"># 3. ã€æ ¸å¿ƒæŠ€å·§ã€‘ä½¿ç”¨ BackgroundColoredVMobject æœºåˆ¶</span>
        <span class="hljs-comment"># set_background_stroke ä¼šç»™æ–‡å­—åŠ ä¸€å±‚â€œæè¾¹â€</span>
        <span class="hljs-comment"># è¿™å±‚æè¾¹æ˜¯ä¸é€æ˜çš„ï¼Œä¼šåˆ©ç”¨ Displayer ç±»é®æŒ¡ä½èƒŒæ™¯ï¼</span>
        good_text = MathTex(<span class="hljs-string">r"\frac{-b \pm \sqrt{b^2 - 4ac}}{2a}"</span>)
        good_text.set_background_stroke(color=BLACK, width=<span class="hljs-number">8</span>)  <span class="hljs-comment"># é»‘è‰²æè¾¹ï¼Œå®½åº¦è®¾å¤§ä¸€ç‚¹</span>
        good_text.shift(DOWN)

        <span class="hljs-comment"># åŠ¨ç”»æ¼”ç¤ºå¯¹æ¯”</span>
        self.play(Write(bad_text))

        self.play(Write(good_text))  <span class="hljs-comment"># æ¸…æ™°å¯è§ï¼</span>
        self.wait()
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4748c568b7ab457997efa40adcd02869~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764763923&amp;x-signature=9VFU8qZ%2Bi8B%2FrD1Tl8IPW2cBao8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">3. ä¸¤ç§æ–¹å¼æ¯”è¾ƒ</h2>
<p>ä¸¤ç§æ–¹å¼å„æœ‰è‡ªå·±çš„åº”ç”¨åœºæ™¯ï¼Œå¯¹æ¯”å¦‚ä¸‹ï¼š</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>èˆå°å¸ƒæ™¯æ³•</th><th>ä¸»è§’å…‰ç¯æ³•</th></tr></thead><tbody><tr><td>æœ¬è´¨</td><td>åœºæ™¯ä¸­çš„ä¸€ä¸ªå·¨å¤§ç‰©ä½“</td><td>ç‰©ä½“è‡ªèº«çš„æè¾¹å±æ€§</td></tr><tr><td>ä¸»è¦ç”¨é€”</td><td>åŠ¨æ€èƒŒæ™¯ã€è§†å·®æ»šåŠ¨ã€å¤šå±‚èƒŒæ™¯</td><td>é«˜äº®ä¸»ä½“ã€å¯¹æŠ—èŠ±å“¨èƒŒæ™¯</td></tr><tr><td>åŠ¨ç”»èƒ½åŠ›</td><td>â­â­â­â­â­ (æå¼º)</td><td>â­â­â­ (è·Ÿéšç‰©ä½“è¿åŠ¨)</td></tr><tr><td>ä»£ç å¤æ‚åº¦</td><td>ä¸­ (éœ€æ‰‹åŠ¨è°ƒå¤§å°/å±‚çº§)</td><td>ä½ (ä¸€è¡Œè®¾ç½®)</td></tr><tr><td>æ–‡æ¡£å¯¹åº”</td><td><code>Mobject </code>ç±»</td><td><code>BackgroundColoredVMobjectDisplayer</code></td></tr><tr><td>æœ€ä½³åœºæ™¯</td><td>æ¼‚æµ®çš„äº‘ã€ç§»åŠ¨çš„æ˜Ÿç©º</td><td>å­—å¹•ã€å¤æ‚èƒŒæ™¯ä¸‹çš„å…¬å¼</td></tr></tbody></table>
<h2 data-id="heading-3">4. æ€»ç»“</h2>
<p>ç®€å•æ¥è¯´ï¼Œå¦‚æœä½ æƒ³åšä¸€æ®µç”µå½±æ„Ÿçš„ç‰‡å¤´ï¼ŒèƒŒæ™¯éœ€è¦ç¼“æ…¢æ¨ç§»ï¼Œè¯·ç”¨ <strong>èˆå°å¸ƒæ™¯æ³•</strong>ï¼›</p>
<p>å¦‚æœä½ å‘ç°æ–‡å­—çœ‹ä¸æ¸…äº†ï¼Œè¯·ä½¿ç”¨ <strong>ä¸»è§’å…‰ç¯æ³•</strong> (<code>set_background_stroke</code>) ç»™æ–‡å­—åŠ ä¸ª <strong>â€œå…‰ç¯â€</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Solidityåˆçº¦å‡çº§ï¼šè®©ä½ çš„åŒºå—é“¾ä»£ç æ°¸è‘†é’æ˜¥çš„ç¡¬æ ¸æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7576859594359668736</link>    <guid>https://juejin.cn/post/7576859594359668736</guid>    <pubDate>2025-11-26T12:22:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594359668736" data-draft-id="7576867727718432803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Solidityåˆçº¦å‡çº§ï¼šè®©ä½ çš„åŒºå—é“¾ä»£ç æ°¸è‘†é’æ˜¥çš„ç¡¬æ ¸æ”»ç•¥"/> <meta itemprop="keywords" content="Solidity,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2025-11-26T12:22:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©æ¶¯å­¦é¦†"/> <meta itemprop="url" content="https://juejin.cn/user/3394916565129287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Solidityåˆçº¦å‡çº§ï¼šè®©ä½ çš„åŒºå—é“¾ä»£ç æ°¸è‘†é’æ˜¥çš„ç¡¬æ ¸æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3394916565129287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©æ¶¯å­¦é¦†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:22:02.000Z" title="Wed Nov 26 2025 12:22:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©å’±ä»¬æ¥èŠèŠSolidityé‡Œä¸€ä¸ªè¶…ç¡¬æ ¸çš„æŠ€æœ¯â€”â€”åˆçº¦å‡çº§ï¼åŒºå—é“¾ä¸Šçš„æ™ºèƒ½åˆçº¦ä¸€æ—¦éƒ¨ç½²ï¼Œé»˜è®¤æ˜¯â€œé“æ‰“ä¸åŠ¨â€çš„ï¼Œä½†ç°å®ä¸­éœ€æ±‚æ€»åœ¨å˜ï¼Œbugä¹Ÿå¾—ä¿®ï¼Œå’‹åŠï¼Ÿåˆçº¦å‡çº§å°±æ˜¯æ•‘æ˜Ÿï¼å®ƒèƒ½è®©ä½ åœ¨ä¸æ¢åœ°å€ã€ä¸ä¸¢æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæ‚„æ‚„æŠŠåˆçº¦é€»è¾‘æ›´æ–°ï¼Œç®€ç›´åƒç»™ä»£ç æ¢äº†ä¸ªæ–°çš®è‚¤ï¼å’±ä»¬ä¼šç”¨å¤§ç™½è¯æŠŠåˆçº¦å‡çº§çš„å¥—è·¯è®²é€ï¼Œä»æœ€ç®€å•çš„ä»£ç†æ¨¡å¼åˆ°OpenZeppelinçš„é€æ˜ä»£ç†å’ŒUUPSï¼Œå†åˆ°å¤šç­¾æ§åˆ¶å‡çº§ï¼Œé…åˆç¡¬æ ¸ä»£ç å’ŒHardhatæµ‹è¯•ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥å®ç°å®‰å…¨çš„åˆçº¦å‡çº§ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>å…ˆæ¥ææ˜ç™½å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸å¯å˜æ€§</strong>ï¼šä»¥å¤ªåŠæ™ºèƒ½åˆçº¦éƒ¨ç½²åï¼Œå­—èŠ‚ç å’Œå­˜å‚¨é€šå¸¸ä¸å¯æ›´æ”¹ã€‚</li>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šé€šè¿‡ä»£ç†åˆçº¦ï¼ˆProxyï¼‰åˆ†ç¦»å­˜å‚¨å’Œé€»è¾‘ï¼Œä»£ç†ä¿å­˜æ•°æ®ï¼Œé€»è¾‘åˆçº¦æä¾›ä»£ç ï¼Œå‡çº§æ—¶åªæ¢é€»è¾‘åˆçº¦ã€‚</li>
<li><strong>å§”æ‰˜è°ƒç”¨ï¼ˆdelegatecallï¼‰</strong>ï¼šä»£ç†é€šè¿‡<code>delegatecall</code>è°ƒç”¨é€»è¾‘åˆçº¦ï¼Œé€»è¾‘åˆçº¦çš„ä»£ç åœ¨ä»£ç†çš„å­˜å‚¨ä¸Šä¸‹æ–‡æ‰§è¡Œã€‚</li>
<li><strong>å­˜å‚¨å¸ƒå±€</strong>ï¼šä»£ç†å’Œé€»è¾‘åˆçº¦çš„å­˜å‚¨æ§½å¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™æ•°æ®ä¼šä¹±å¥—ã€‚</li>
<li><strong>å‡çº§æœºåˆ¶</strong>ï¼šæ›´æ–°ä»£ç†æŒ‡å‘çš„é€»è¾‘åˆçº¦åœ°å€ï¼Œå®ç°åŠŸèƒ½å‡çº§ã€‚</li>
<li><strong>å®‰å…¨é£é™©</strong>ï¼š
<ul>
<li><strong>å­˜å‚¨å†²çª</strong>ï¼šæ–°é€»è¾‘åˆçº¦çš„å­˜å‚¨å¸ƒå±€å˜åŒ–å¯èƒ½è¦†ç›–æ—§æ•°æ®ã€‚</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šè°èƒ½å‡çº§ï¼Ÿæ²¡é™åˆ¶å¯èƒ½è¢«é»‘å®¢æä¹±ã€‚</li>
<li><strong>åˆå§‹åŒ–</strong>ï¼šæ–°é€»è¾‘åˆçº¦éœ€è¦æ­£ç¡®åˆå§‹åŒ–ã€‚</li>
</ul>
</li>
<li><strong>OpenZeppelin</strong>ï¼šæä¾›é€æ˜ä»£ç†ï¼ˆTransparent Proxyï¼‰å’ŒUUPSï¼ˆUniversal Upgradeable Proxy Standardï¼‰å®ç°ã€‚</li>
<li><strong>Solidity 0.8.x</strong>ï¼šè‡ªå¸¦æº¢å‡º/ä¸‹æº¢æ£€æŸ¥ï¼Œå®‰å…¨å¯é ã€‚</li>
<li><strong>Hardhat</strong>ï¼šå¼€å‘å’Œæµ‹è¯•å·¥å…·ï¼Œæ–¹ä¾¿éƒ¨ç½²å’ŒéªŒè¯ã€‚</li>
</ul>
<p>å’±ä»¬ç”¨Solidity 0.8.20ï¼Œç»“åˆOpenZeppelinå’ŒHardhatï¼Œä»åŸºç¡€ä»£ç†åˆ°é«˜çº§UUPSå’Œå¤šç­¾å‡çº§ï¼Œé€æ­¥å®ç°å®‰å…¨çš„åˆçº¦å‡çº§ã€‚</p>
<h2 data-id="heading-1">ç¯å¢ƒå‡†å¤‡</h2>
<p>ç”¨Hardhatæ­å»ºå¼€å‘ç¯å¢ƒï¼Œå†™å’Œæµ‹è¯•åˆçº¦ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> upgrade-demo
<span class="hljs-built_in">cd</span> upgrade-demo
npm init -y
npm install --save-dev hardhat @nomicfoundation/hardhat-toolbox @openzeppelin/contracts @openzeppelin/contracts-upgradeable
npm install ethers
</code></pre>
<p>åˆå§‹åŒ–Hardhatï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx hardhat init
</code></pre>
<p>é€‰æ‹©TypeScripté¡¹ç›®ï¼Œå®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install --save-dev ts-node typescript @types/node @types/mocha
</code></pre>
<p>ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">upgrade-demo/
â”œâ”€â”€ contracts/
â”‚   â”œâ”€â”€ SimpleProxy.sol
â”‚   â”œâ”€â”€ LogicV1.sol
â”‚   â”œâ”€â”€ LogicV2.sol
â”‚   â”œâ”€â”€ TransparentProxy.sol
â”‚   â”œâ”€â”€ UUPSProxy.sol
â”‚   â”œâ”€â”€ MultiSigUpgrade.sol
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ deploy.ts
â”œâ”€â”€ test/
â”‚   â”œâ”€â”€ Upgrade.test.ts
â”œâ”€â”€ hardhat.<span class="hljs-built_in">config</span>.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ <span class="hljs-built_in">package</span>.json
</code></pre>
<p><code>tsconfig.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ES2020"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"CommonJS"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"strict"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"esModuleInterop"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"moduleResolution"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"node"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"resolveJsonModule"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"outDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./dist"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"rootDir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"include"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"hardhat.config.ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"scripts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"test"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><code>hardhat.config.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">HardhatUserConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat/config"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@nomicfoundation/hardhat-toolbox"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">HardhatUserConfig</span> = {
  <span class="hljs-attr">solidity</span>: <span class="hljs-string">"0.8.20"</span>,
  <span class="hljs-attr">networks</span>: {
    <span class="hljs-attr">hardhat</span>: {
      <span class="hljs-attr">chainId</span>: <span class="hljs-number">1337</span>,
    },
  },
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config;
</code></pre>
<p>è·‘æœ¬åœ°èŠ‚ç‚¹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx hardhat node
</code></pre>
<h2 data-id="heading-2">åŸºç¡€ä»£ç†åˆçº¦</h2>
<p>å…ˆæä¸€ä¸ªç®€å•çš„ä»£ç†åˆçº¦ï¼Œå¼„æ¸…æ¥š<code>delegatecall</code>å’Œå‡çº§çš„å¥—è·¯ã€‚</p>
<h3 data-id="heading-3">åˆçº¦ä»£ç </h3>
<p><code>contracts/LogicV1.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract LogicV1 {
    address public owner;
    uint256 public value;

    function initialize(address _owner) public {
        require(owner == address(0), "Already initialized");
        owner = _owner;
    }

    function setValue(uint256 _value) public {
        require(msg.sender == owner, "Only owner");
        value = _value;
    }

    function getValue() public view returns (uint256) {
        return value;
    }
}
</code></pre>
<p><code>contracts/LogicV2.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract LogicV2 {
    address public owner;
    uint256 public value;

    function initialize(address _owner) public {
        require(owner == address(0), "Already initialized");
        owner = _owner;
    }

    function setValue(uint256 _value) public {
        require(msg.sender == owner, "Only owner");
        value = _value * 2; // V2 doubles the value
    }

    function getValue() public view returns (uint256) {
        return value;
    }
}
</code></pre>
<p><code>contracts/SimpleProxy.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract SimpleProxy {
    address public implementation;
    address public owner;

    constructor(address _implementation) {
        owner = msg.sender;
        implementation = _implementation;
    }

    function upgrade(address _newImplementation) public {
        require(msg.sender == owner, "Only owner");
        implementation = _newImplementation;
    }

    fallback() external payable {
        address impl = implementation;
        require(impl != address(0), "Implementation not set");

        assembly {
            let ptr := mload(0x40)
            calldatacopy(ptr, 0, calldatasize())
            let result := delegatecall(gas(), impl, ptr, calldatasize(), 0, 0)
            let size := returndatasize()
            returndatacopy(ptr, 0, size)
            switch result
            case 0 { revert(ptr, size) }
            default { return(ptr, size) }
        }
    }

    receive() external payable {}
}
</code></pre>
<h3 data-id="heading-4">è§£æ</h3>
<ul>
<li><strong>LogicV1</strong>ï¼šåŸºç¡€é€»è¾‘åˆçº¦ï¼Œå­˜<code>owner</code>å’Œ<code>value</code>ï¼Œæä¾›<code>initialize</code>ã€<code>setValue</code>ã€<code>getValue</code>ã€‚</li>
<li><strong>LogicV2</strong>ï¼šå‡çº§ç‰ˆï¼Œ<code>setValue</code>å°†è¾“å…¥å€¼ç¿»å€ï¼Œå­˜å‚¨å¸ƒå±€ä¸V1ä¸€è‡´ã€‚</li>
<li><strong>SimpleProxy</strong>ï¼š
<ul>
<li>å­˜<code>implementation</code>ï¼ˆé€»è¾‘åˆçº¦åœ°å€ï¼‰å’Œ<code>owner</code>ã€‚</li>
<li><code>upgrade</code>ï¼šæ›´æ–°é€»è¾‘åˆçº¦åœ°å€ï¼Œä»…<code>owner</code>å¯è°ƒç”¨ã€‚</li>
<li><code>fallback</code>ï¼šç”¨<code>delegatecall</code>è½¬å‘è°ƒç”¨åˆ°<code>implementation</code>ï¼Œç”¨æ±‡ç¼–å®ç°ä½çº§è°ƒç”¨ã€‚</li>
</ul>
</li>
<li><strong>delegatecall</strong>ï¼šé€»è¾‘åˆçº¦çš„ä»£ç åœ¨ä»£ç†çš„å­˜å‚¨ä¸Šä¸‹æ–‡æ‰§è¡Œï¼Œ<code>owner</code>å’Œ<code>value</code>å­˜åœ¨ä»£ç†åˆçº¦ã€‚</li>
<li><strong>å®‰å…¨ç‰¹æ€§</strong>ï¼š
<ul>
<li><code>onlyOwner</code>é™åˆ¶å‡çº§æƒé™ã€‚</li>
<li>æ£€æŸ¥<code>implementation</code>ä¸ä¸ºç©ºã€‚</li>
<li>åˆå§‹åŒ–æ£€æŸ¥é˜²æ­¢é‡å¤è®¾ç½®ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">æµ‹è¯•</h3>
<p><code>test/Upgrade.test.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ethers } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">"chai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SimpleProxy</span>, <span class="hljs-title class_">LogicV1</span>, <span class="hljs-title class_">LogicV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../typechain-types"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"SimpleProxy"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">proxy</span>: <span class="hljs-title class_">SimpleProxy</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV1</span>: <span class="hljs-title class_">LogicV1</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV2</span>: <span class="hljs-title class_">LogicV2</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">owner</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">addr1</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    [owner, addr1] = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getSigners</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>);
    logicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV1.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"SimpleProxy"</span>);
    proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyFactory</span>.<span class="hljs-title function_">deploy</span>(logicV1.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV2Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV2"</span>);
    logicV2 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV2Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV2.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">initialize</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should initialize correctly"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should set and get value"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict setValue to owner"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxyAsLogicV1.<span class="hljs-title function_">connect</span>(addr1).<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Only owner"</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should upgrade to LogicV2"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">upgrade</span>(logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">10</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">20</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict upgrade to owner"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxy.<span class="hljs-title function_">connect</span>(addr1).<span class="hljs-title function_">upgrade</span>(logicV2.<span class="hljs-property">address</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Only owner"</span>);
  });
});
</code></pre>
<p>è·‘æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx hardhat <span class="hljs-built_in">test</span>
</code></pre>
<ul>
<li><strong>è§£æ</strong>ï¼š
<ul>
<li>éƒ¨ç½²ï¼š<code>LogicV1</code>å’Œ<code>SimpleProxy</code>ï¼Œé€šè¿‡ä»£ç†è°ƒç”¨<code>initialize</code>ã€‚</li>
<li>æ“ä½œï¼šè®¾ç½®<code>value</code>ä¸º42ï¼ŒéªŒè¯å­˜å‚¨åœ¨ä»£ç†ã€‚</li>
<li>å‡çº§ï¼šåˆ‡æ¢åˆ°<code>LogicV2</code>ï¼Œ<code>setValue(10)</code>è¿”å›20ï¼Œ<code>owner</code>ä¸å˜ã€‚</li>
<li>æƒé™ï¼šé<code>owner</code>æ— æ³•å‡çº§ã€‚</li>
</ul>
</li>
<li><strong>å­˜å‚¨</strong>ï¼šä»£ç†ä¿å­˜<code>owner</code>å’Œ<code>value</code>ï¼Œ<code>delegatecall</code>ç¡®ä¿é€»è¾‘åˆçº¦æ“ä½œä»£ç†å­˜å‚¨ã€‚</li>
</ul>
<h2 data-id="heading-6">å­˜å‚¨å†²çªçš„å‘</h2>
<p>å­˜å‚¨å¸ƒå±€ä¸ä¸€è‡´ä¼šå¯¼è‡´æ•°æ®é”™ä¹±ï¼Œæ¥çœ‹ä¸ªé”™è¯¯ä¾‹å­ã€‚</p>
<h3 data-id="heading-7">é”™è¯¯ç¤ºä¾‹</h3>
<p><code>contracts/BadLogicV2.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

contract BadLogicV2 {
    uint256 public value; // Slot 0 (wrong order)
    address public owner; // Slot 1 (wrong order)

    function initialize(address _owner) public {
        require(owner == address(0), "Already initialized");
        owner = _owner;
    }

    function setValue(uint256 _value) public {
        require(msg.sender == owner, "Only owner");
        value = _value * 2;
    }

    function getValue() public view returns (uint256) {
        return value;
    }
}
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<p><code>test/Upgrade.test.ts</code>ï¼ˆæ·»åŠ ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">it</span>(<span class="hljs-string">"should fail with storage collision"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
  <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">BadLogicV2Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"BadLogicV2"</span>);
  <span class="hljs-keyword">const</span> badLogicV2 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">BadLogicV2Factory</span>.<span class="hljs-title function_">deploy</span>();
  <span class="hljs-keyword">await</span> badLogicV2.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">upgrade</span>(badLogicV2.<span class="hljs-property">address</span>);
  <span class="hljs-keyword">const</span> proxyAsBadLogicV2 = <span class="hljs-title class_">BadLogicV2Factory</span>.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>);
  <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsBadLogicV2.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-property">not</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
});
</code></pre>
<ul>
<li><strong>é—®é¢˜</strong>ï¼š<code>LogicV1</code>çš„<code>owner</code>(slot 0), <code>value</code>(slot 1)ï¼Œ<code>BadLogicV2</code>çš„<code>value</code>(slot 0), <code>owner</code>(slot 1)ï¼Œå‡çº§å<code>owner</code>è¢«è¦†ç›–ä¸º<code>value</code>çš„å€¼ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šæ–°é€»è¾‘åˆçº¦å¿…é¡»ä¿æŒå­˜å‚¨å¸ƒå±€ä¸€è‡´ï¼Œæˆ–ç”¨OpenZeppelinçš„å·¥å…·è§„èŒƒåŒ–ã€‚</li>
</ul>
<h2 data-id="heading-8">é€æ˜ä»£ç†ï¼ˆTransparent Proxyï¼‰</h2>
<p>ç”¨OpenZeppelinçš„é€æ˜ä»£ç†ï¼Œè§£å†³ç®¡ç†å‘˜å’Œç”¨æˆ·è°ƒç”¨å†²çªã€‚</p>
<p><code>contracts/LogicV1.sol</code>ï¼ˆæ›´æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";

contract LogicV1 is Initializable, OwnableUpgradeable {
    uint256 public value;

    function initialize(address _owner) public initializer {
        __Ownable_init(_owner);
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value;
    }

    function getValue() public view returns (uint256) {
        return value;
    }
}
</code></pre>
<p><code>contracts/LogicV2.sol</code>ï¼ˆæ›´æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";

contract LogicV2 is Initializable, OwnableUpgradeable {
    uint256 public value;

    function initialize(address _owner) public initializer {
        __Ownable_init(_owner);
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value * 2;
    }

    function getValue() public view returns (uint256) {
        return value;
    }
}
</code></pre>
<p><code>contracts/TransparentProxy.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/proxy/transparent/TransparentUpgradeableProxy.sol";

contract TransparentProxy is TransparentUpgradeableProxy {
    constructor(address logic, address admin, bytes memory data)
        TransparentUpgradeableProxy(logic, admin, data)
    {}
}
</code></pre>
<h3 data-id="heading-9">è§£æ</h3>
<ul>
<li><strong>LogicV1/V2</strong>ï¼š
<ul>
<li>ç”¨<code>Initializable</code>å’Œ<code>OwnableUpgradeable</code>ï¼Œæ”¯æŒä»£ç†åˆå§‹åŒ–ã€‚</li>
<li><code>initializer</code>ç¡®ä¿åˆå§‹åŒ–åªæ‰§è¡Œä¸€æ¬¡ã€‚</li>
</ul>
</li>
<li><strong>TransparentProxy</strong>ï¼š
<ul>
<li>ç»§æ‰¿<code>TransparentUpgradeableProxy</code>ã€‚</li>
<li>æ„é€ å‡½æ•°è®¾ç½®é€»è¾‘åˆçº¦ã€ç®¡ç†å‘˜åœ°å€ã€åˆå§‹åŒ–æ•°æ®ã€‚</li>
<li>é€æ˜æœºåˆ¶ï¼šç®¡ç†å‘˜è°ƒç”¨æ“ä½œä»£ç†ï¼ˆå¦‚å‡çº§ï¼‰ï¼Œæ™®é€šç”¨æˆ·è°ƒç”¨è½¬å‘åˆ°é€»è¾‘åˆçº¦ã€‚</li>
</ul>
</li>
<li><strong>å®‰å…¨ç‰¹æ€§</strong>ï¼š
<ul>
<li>é˜²æ­¢ç®¡ç†å‘˜è¯¯è°ƒç”¨é€»è¾‘åˆçº¦ã€‚</li>
<li><code>OwnableUpgradeable</code>ç®¡ç†æƒé™ã€‚</li>
<li>æ ‡å‡†åŒ–çš„å­˜å‚¨å¸ƒå±€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-10">æµ‹è¯•</h3>
<p><code>test/Upgrade.test.ts</code>ï¼ˆæ›´æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ethers } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">"chai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TransparentProxy</span>, <span class="hljs-title class_">LogicV1</span>, <span class="hljs-title class_">LogicV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../typechain-types"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"TransparentProxy"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">proxy</span>: <span class="hljs-title class_">TransparentProxy</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV1</span>: <span class="hljs-title class_">LogicV1</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV2</span>: <span class="hljs-title class_">LogicV2</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">owner</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">addr1</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">admin</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    [owner, addr1, admin] = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getSigners</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>);
    logicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV1.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"TransparentProxy"</span>);
    <span class="hljs-keyword">const</span> initData = <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-property">interface</span>.<span class="hljs-title function_">encodeFunctionData</span>(<span class="hljs-string">"initialize"</span>, [owner.<span class="hljs-property">address</span>]);
    proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyFactory</span>.<span class="hljs-title function_">deploy</span>(logicV1.<span class="hljs-property">address</span>, admin.<span class="hljs-property">address</span>, initData);
    <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV2Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV2"</span>);
    logicV2 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV2Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV2.<span class="hljs-title function_">deployed</span>();
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should initialize correctly"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should set and get value"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict setValue to owner"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxyAsLogicV1.<span class="hljs-title function_">connect</span>(addr1).<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Ownable: caller is not the owner"</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should upgrade to LogicV2"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyAdminFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"ProxyAdmin"</span>, admin);
    <span class="hljs-keyword">const</span> proxyAdmin = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyAdminFactory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> proxyAdmin.<span class="hljs-title function_">deployed</span>();
    <span class="hljs-keyword">await</span> proxyAdmin.<span class="hljs-title function_">connect</span>(admin).<span class="hljs-title function_">upgrade</span>(proxy.<span class="hljs-property">address</span>, logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">10</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">20</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict upgrade to admin"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyAdminFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"ProxyAdmin"</span>, admin);
    <span class="hljs-keyword">const</span> proxyAdmin = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyAdminFactory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> proxyAdmin.<span class="hljs-title function_">deployed</span>();
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxyAdmin.<span class="hljs-title function_">connect</span>(addr1).<span class="hljs-title function_">upgrade</span>(proxy.<span class="hljs-property">address</span>, logicV2.<span class="hljs-property">address</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Ownable: caller is not the owner"</span>);
  });
});
</code></pre>
<ul>
<li><strong>è§£æ</strong>ï¼š
<ul>
<li>éƒ¨ç½²ï¼š<code>LogicV1</code>å’Œ<code>TransparentProxy</code>ï¼Œé€šè¿‡<code>initData</code>åˆå§‹åŒ–ã€‚</li>
<li>æ“ä½œï¼šè®¾ç½®<code>value</code>ä¸º42ã€‚</li>
<li>å‡çº§ï¼šç”¨<code>ProxyAdmin</code>åˆ‡æ¢åˆ°<code>LogicV2</code>ï¼Œ<code>setValue(10)</code>è¿”å›20ã€‚</li>
<li>æƒé™ï¼šåªæœ‰<code>admin</code>å¯å‡çº§ã€‚</li>
</ul>
</li>
<li><strong>é€æ˜æœºåˆ¶</strong>ï¼šç®¡ç†å‘˜è°ƒç”¨ç›´æ¥æ“ä½œä»£ç†ï¼Œæ™®é€šç”¨æˆ·è°ƒç”¨è½¬å‘åˆ°é€»è¾‘åˆçº¦ã€‚</li>
</ul>
<h2 data-id="heading-11">UUPSä»£ç†ï¼ˆUniversal Upgradeable Proxy Standardï¼‰</h2>
<p>UUPSæŠŠå‡çº§é€»è¾‘æ”¾é€»è¾‘åˆçº¦ï¼Œä»£ç†æ›´è½»é‡ã€‚</p>
<p><code>contracts/UUPSLogicV1.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";

contract UUPSLogicV1 is Initializable, OwnableUpgradeable, UUPSUpgradeable {
    uint256 public value;

    function initialize(address _owner) public initializer {
        __Ownable_init(_owner);
        __UUPSUpgradeable_init();
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value;
    }

    function getValue() public view returns (uint256) {
        return value;
    }

    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
}
</code></pre>
<p><code>contracts/UUPSLogicV2.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";

contract UUPSLogicV2 is Initializable, OwnableUpgradeable, UUPSUpgradeable {
    uint256 public value;

    function initialize(address _owner) public initializer {
        __Ownable_init(_owner);
        __UUPSUpgradeable_init();
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value * 2;
    }

    function getValue() public view returns (uint256) {
        return value;
    }

    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
}
</code></pre>
<p><code>contracts/UUPSProxy.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/proxy/ERC1967/ERC1967Proxy.sol";

contract UUPSProxy is ERC1967Proxy {
    constructor(address logic, bytes memory data) ERC1967Proxy(logic, data) {}
}
</code></pre>
<h3 data-id="heading-12">è§£æ</h3>
<ul>
<li><strong>UUPSLogicV1/V2</strong>ï¼š
<ul>
<li>ç»§æ‰¿<code>UUPSUpgradeable</code>ï¼ŒåŒ…å«å‡çº§é€»è¾‘ã€‚</li>
<li><code>_authorizeUpgrade</code>ï¼šé™åˆ¶å‡çº§æƒé™ã€‚</li>
</ul>
</li>
<li><strong>UUPSProxy</strong>ï¼š
<ul>
<li>ç»§æ‰¿<code>ERC1967Proxy</code>ï¼Œé€»è¾‘åœ°å€å­˜æ ‡å‡†æ§½ä½ã€‚</li>
<li>æ„é€ å‡½æ•°ï¼šè®¾ç½®é€»è¾‘åˆçº¦å’Œåˆå§‹åŒ–æ•°æ®ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼š
<ul>
<li>ä»£ç†åˆçº¦è½»é‡ï¼Œå‡çº§é€»è¾‘åœ¨é€»è¾‘åˆçº¦ã€‚</li>
<li>å¯é€šè¿‡è‡ªæ¯ç§»é™¤å‡çº§åŠŸèƒ½ã€‚</li>
</ul>
</li>
<li><strong>å®‰å…¨ç‰¹æ€§</strong>ï¼š
<ul>
<li><code>onlyOwner</code>æ§åˆ¶å‡çº§ã€‚</li>
<li><code>Initializer</code>é˜²æ­¢é‡å¤åˆå§‹åŒ–ã€‚</li>
<li>ERC1967æ ‡å‡†æ§½ä½ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-13">æµ‹è¯•</h3>
<p><code>test/Upgrade.test.ts</code>ï¼ˆæ›´æ–°ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ethers } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">"chai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UUPSProxy</span>, <span class="hljs-title class_">UUPSLogicV</span>1, <span class="hljs-title class_">UUPSLogicV</span>2 } <span class="hljs-keyword">from</span> <span class="hljs-string">"../typechain-types"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"UUPSProxy"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">proxy</span>: <span class="hljs-title class_">UUPSProxy</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV1</span>: <span class="hljs-title class_">UUPSLogicV</span>1;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV2</span>: <span class="hljs-title class_">UUPSLogicV</span>2;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">owner</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">addr1</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    [owner, addr1] = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getSigners</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>);
    logicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV1.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSProxy"</span>);
    <span class="hljs-keyword">const</span> initData = <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-property">interface</span>.<span class="hljs-title function_">encodeFunctionData</span>(<span class="hljs-string">"initialize"</span>, [owner.<span class="hljs-property">address</span>]);
    proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyFactory</span>.<span class="hljs-title function_">deploy</span>(logicV1.<span class="hljs-property">address</span>, initData);
    <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV2Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV2"</span>);
    logicV2 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV2Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV2.<span class="hljs-title function_">deployed</span>();
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should initialize correctly"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should set and get value"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should upgrade to LogicV2"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">upgradeTo</span>(logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">10</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">20</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">owner</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict upgrade to owner"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxyAsLogicV1.<span class="hljs-title function_">connect</span>(addr1).<span class="hljs-title function_">upgradeTo</span>(logicV2.<span class="hljs-property">address</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Ownable: caller is not the owner"</span>);
  });
});
</code></pre>
<ul>
<li><strong>è§£æ</strong>ï¼š
<ul>
<li>éƒ¨ç½²ï¼š<code>UUPSLogicV1</code>å’Œ<code>UUPSProxy</code>ï¼Œé€šè¿‡<code>initData</code>åˆå§‹åŒ–ã€‚</li>
<li>æ“ä½œï¼šè®¾ç½®<code>value</code>ä¸º42ã€‚</li>
<li>å‡çº§ï¼šè°ƒç”¨<code>upgradeTo</code>åˆ‡æ¢åˆ°<code>LogicV2</code>ï¼Œ<code>setValue(10)</code>è¿”å›20ã€‚</li>
<li>æƒé™ï¼šé<code>owner</code>æ— æ³•å‡çº§ã€‚</li>
</ul>
</li>
<li><strong>UUPSç‰¹ç‚¹</strong>ï¼šå‡çº§é€»è¾‘åœ¨é€»è¾‘åˆçº¦ï¼Œä»£ç†æ›´è½»é‡ã€‚</li>
</ul>
<h2 data-id="heading-14">å¤šç­¾æ§åˆ¶å‡çº§</h2>
<p>ä¸ºå‡çº§åŠ å¤šç­¾æœºåˆ¶ï¼Œéœ€å¤šäººåŒæ„ã€‚</p>
<p><code>contracts/MultiSigUpgrade.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";

contract MultiSigUpgrade is Initializable, UUPSUpgradeable, OwnableUpgradeable {
    address[] public owners;
    uint256 public required;
    uint256 public transactionCount;
    mapping(uint256 =&gt; Transaction) public transactions;
    mapping(uint256 =&gt; mapping(address =&gt; bool)) public confirmations;
    uint256 public value;

    struct Transaction {
        address newImplementation;
        bool executed;
        uint256 confirmationCount;
    }

    event SubmitUpgrade(uint256 indexed txId, address indexed newImplementation);
    event ConfirmUpgrade(uint256 indexed txId, address indexed owner);
    event ExecuteUpgrade(uint256 indexed txId, address indexed newImplementation);
    event RevokeConfirmation(uint256 indexed txId, address indexed owner);

    modifier onlyOwner() {
        bool isOwner = false;
        for (uint256 i = 0; i &lt; owners.length; i++) {
            if (owners[i] == msg.sender) {
                isOwner = true;
                break;
            }
        }
        require(isOwner, "Not owner");
        _;
    }

    function initialize(address[] memory _owners, uint256 _required) public initializer {
        __Ownable_init(msg.sender);
        __UUPSUpgradeable_init();
        require(_owners.length &gt; 0, "Owners required");
        require(_required &gt; 0 &amp;&amp; _required &lt;= _owners.length, "Invalid required");
        owners = _owners;
        required = _required;
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value;
    }

    function getValue() public view returns (uint256) {
        return value;
    }

    function submitUpgrade(address newImplementation) public onlyOwner {
        require(newImplementation != address(0), "Invalid implementation");
        uint256 txId = transactionCount++;
        transactions[txId] = Transaction({
            newImplementation: newImplementation,
            executed: false,
            confirmationCount: 0
        });
        emit SubmitUpgrade(txId, newImplementation);
    }

    function confirmUpgrade(uint256 txId) public onlyOwner {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(!confirmations[txId][msg.sender], "Already confirmed");

        confirmations[txId][msg.sender] = true;
        transaction.confirmationCount++;
        emit ConfirmUpgrade(txId, msg.sender);

        if (transaction.confirmationCount &gt;= required) {
            executeUpgrade(txId);
        }
    }

    function executeUpgrade(uint256 txId) internal {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(transaction.confirmationCount &gt;= required, "Insufficient confirmations");

        transaction.executed = true;
        _authorizeUpgrade(transaction.newImplementation);
        _upgradeTo(transaction.newImplementation);
        emit ExecuteUpgrade(txId, transaction.newImplementation);
    }

    function revokeConfirmation(uint256 txId) public onlyOwner {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(confirmations[txId][msg.sender], "Not confirmed");

        confirmations[txId][msg.sender] = false;
        transaction.confirmationCount--;
        emit RevokeConfirmation(txId, msg.sender);
    }

    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
}
</code></pre>
<p><code>contracts/MultiSigLogicV2.sol</code>ï¼š</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol";
import "@openzeppelin/contracts-upgradeable/proxy/utils/UUPSUpgradeable.sol";
import "@openzeppelin/contracts-upgradeable/access/OwnableUpgradeable.sol";

contract MultiSigLogicV2 is Initializable, UUPSUpgradeable, OwnableUpgradeable {
    address[] public owners;
    uint256 public required;
    uint256 public transactionCount;
    mapping(uint256 =&gt; Transaction) public transactions;
    mapping(uint256 =&gt; mapping(address =&gt; bool)) public confirmations;
    uint256 public value;

    struct Transaction {
        address newImplementation;
        bool executed;
        uint256 confirmationCount;
    }

    event SubmitUpgrade(uint256 indexed txId, address indexed newImplementation);
    event ConfirmUpgrade(uint256 indexed txId, address indexed owner);
    event ExecuteUpgrade(uint256 indexed txId, address indexed newImplementation);
    event RevokeConfirmation(uint256 indexed txId, address indexed owner);

    modifier onlyOwner() {
        bool isOwner = false;
        for (uint256 i = 0; i &lt; owners.length; i++) {
            if (owners[i] == msg.sender) {
                isOwner = true;
                break;
            }
        }
        require(isOwner, "Not owner");
        _;
    }

    function initialize(address[] memory _owners, uint256 _required) public initializer {
        __Ownable_init(msg.sender);
        __UUPSUpgradeable_init();
        require(_owners.length &gt; 0, "Owners required");
        require(_required &gt; 0 &amp;&amp; _required &lt;= _owners.length, "Invalid required");
        owners = _owners;
        required = _required;
    }

    function setValue(uint256 _value) public onlyOwner {
        value = _value * 2; // V2 doubles the value
    }

    function getValue() public view returns (uint256) {
        return value;
    }

    function submitUpgrade(address newImplementation) public onlyOwner {
        require(newImplementation != address(0), "Invalid implementation");
        uint256 txId = transactionCount++;
        transactions[txId] = Transaction({
            newImplementation: newImplementation,
            executed: false,
            confirmationCount: 0
        });
        emit SubmitUpgrade(txId, newImplementation);
    }

    function confirmUpgrade(uint256 txId) public onlyOwner {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(!confirmations[txId][msg.sender], "Already confirmed");

        confirmations[txId][msg.sender] = true;
        transaction.confirmationCount++;
        emit ConfirmUpgrade(txId, msg.sender);

        if (transaction.confirmationCount &gt;= required) {
            executeUpgrade(txId);
        }
    }

    function executeUpgrade(uint256 txId) internal {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(transaction.confirmationCount &gt;= required, "Insufficient confirmations");

        transaction.executed = true;
        _authorizeUpgrade(transaction.newImplementation);
        _upgradeTo(transaction.newImplementation);
        emit ExecuteUpgrade(txId, transaction.newImplementation);
    }

    function revokeConfirmation(uint256 txId) public onlyOwner {
        Transaction storage transaction = transactions[txId];
        require(!transaction.executed, "Transaction already executed");
        require(confirmations[txId][msg.sender], "Not confirmed");

        confirmations[txId][msg.sender] = false;
        transaction.confirmationCount--;
        emit RevokeConfirmation(txId, msg.sender);
    }

    function _authorizeUpgrade(address newImplementation) internal override onlyOwner {}
}
</code></pre>
<h3 data-id="heading-15">è§£æ</h3>
<ul>
<li><strong>MultiSigUpgrade</strong>ï¼š
<ul>
<li>ç»§æ‰¿<code>UUPSUpgradeable</code>ï¼Œæ”¯æŒå¤šç­¾å‡çº§ã€‚</li>
<li><code>owners</code>å’Œ<code>required</code>æ§åˆ¶å¤šç­¾ã€‚</li>
<li><code>submitUpgrade</code>ï¼šæäº¤å‡çº§ææ¡ˆã€‚</li>
<li><code>confirmUpgrade</code>ï¼šç¡®è®¤ææ¡ˆï¼Œè¾¾æ ‡åæ‰§è¡Œã€‚</li>
<li><code>executeUpgrade</code>ï¼šè°ƒç”¨<code>_upgradeTo</code>åˆ‡æ¢é€»è¾‘ã€‚</li>
<li><code>revokeConfirmation</code>ï¼šæ’¤é”€ç¡®è®¤ã€‚</li>
</ul>
</li>
<li><strong>MultiSigLogicV2</strong>ï¼šå‡çº§ç‰ˆï¼Œ<code>setValue</code>ç¿»å€ã€‚</li>
<li><strong>å®‰å…¨ç‰¹æ€§</strong>ï¼š
<ul>
<li>å¤šç­¾é˜²æ­¢å•äººè¯¯æ“ä½œã€‚</li>
<li><code>onlyOwner</code>é™åˆ¶æ“ä½œã€‚</li>
<li>æ£€æŸ¥<code>newImplementation</code>æœ‰æ•ˆæ€§ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-16">æµ‹è¯•</h3>
<p><code>test/Upgrade.test.ts</code>ï¼ˆæ·»åŠ ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ethers } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;
<span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">"chai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UUPSProxy</span>, <span class="hljs-title class_">MultiSigUpgrade</span>, <span class="hljs-title class_">MultiSigLogicV2</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"../typechain-types"</span>;

<span class="hljs-title function_">describe</span>(<span class="hljs-string">"MultiSigUpgrade"</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> <span class="hljs-attr">proxy</span>: <span class="hljs-title class_">UUPSProxy</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV1</span>: <span class="hljs-title class_">MultiSigUpgrade</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">logicV2</span>: <span class="hljs-title class_">MultiSigLogicV2</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">owner1</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">owner2</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">owner3</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">nonOwner</span>: <span class="hljs-built_in">any</span>;

  <span class="hljs-title function_">beforeEach</span>(<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    [owner1, owner2, owner3, nonOwner] = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getSigners</span>();
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>);
    logicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV1.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">ProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSProxy"</span>);
    <span class="hljs-keyword">const</span> initData = <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-property">interface</span>.<span class="hljs-title function_">encodeFunctionData</span>(<span class="hljs-string">"initialize"</span>, [
      [owner1.<span class="hljs-property">address</span>, owner2.<span class="hljs-property">address</span>, owner3.<span class="hljs-property">address</span>],
      <span class="hljs-number">2</span>,
    ]);
    proxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">ProxyFactory</span>.<span class="hljs-title function_">deploy</span>(logicV1.<span class="hljs-property">address</span>, initData);
    <span class="hljs-keyword">await</span> proxy.<span class="hljs-title function_">deployed</span>();

    <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV2Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigLogicV2"</span>);
    logicV2 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV2Factory</span>.<span class="hljs-title function_">deploy</span>();
    <span class="hljs-keyword">await</span> logicV2.<span class="hljs-title function_">deployed</span>();
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should initialize correctly"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">owners</span>(<span class="hljs-number">0</span>)).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner1.<span class="hljs-property">address</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.required()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">2</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should set and get value"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">42</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should upgrade with multi-sig"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">42</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">submitUpgrade</span>(logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner2).<span class="hljs-title function_">confirmUpgrade</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner3).<span class="hljs-title function_">confirmUpgrade</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigLogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">10</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">20</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">owners</span>(<span class="hljs-number">0</span>)).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(owner1.<span class="hljs-property">address</span>);
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should not upgrade without enough confirmations"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">submitUpgrade</span>(logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner2).<span class="hljs-title function_">confirmUpgrade</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigLogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">setValue</span>(<span class="hljs-number">10</span>);
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// Still V1</span>
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should allow revoking confirmation"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">submitUpgrade</span>(logicV2.<span class="hljs-property">address</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner2).<span class="hljs-title function_">confirmUpgrade</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner2).<span class="hljs-title function_">revokeConfirmation</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">await</span> proxyAsLogicV1.<span class="hljs-title function_">connect</span>(owner3).<span class="hljs-title function_">confirmUpgrade</span>(<span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> proxyAsLogicV2 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigLogicV2"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-title function_">expect</span>(<span class="hljs-keyword">await</span> proxyAsLogicV2.<span class="hljs-title function_">getValue</span>()).<span class="hljs-property">to</span>.<span class="hljs-title function_">equal</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// Still V1</span>
  });

  <span class="hljs-title function_">it</span>(<span class="hljs-string">"should restrict upgrade to owners"</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> proxyAsLogicV1 = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">attach</span>(proxy.<span class="hljs-property">address</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">expect</span>(proxyAsLogicV1.<span class="hljs-title function_">connect</span>(nonOwner).<span class="hljs-title function_">submitUpgrade</span>(logicV2.<span class="hljs-property">address</span>)).<span class="hljs-property">to</span>.<span class="hljs-property">be</span>.<span class="hljs-title function_">revertedWith</span>(<span class="hljs-string">"Not owner"</span>);
  });
});
</code></pre>
<ul>
<li><strong>è§£æ</strong>ï¼š
<ul>
<li>éƒ¨ç½²ï¼š3ä¸ª<code>owners</code>ï¼Œéœ€2äººç¡®è®¤ã€‚</li>
<li>æ“ä½œï¼šè®¾ç½®<code>value</code>ä¸º42ã€‚</li>
<li>å‡çº§ï¼šæäº¤ææ¡ˆï¼Œ2äººç¡®è®¤ååˆ‡æ¢åˆ°<code>LogicV2</code>ï¼Œ<code>setValue(10)</code>è¿”å›20ã€‚</li>
<li>æ’¤é”€ï¼šæ’¤é”€ç¡®è®¤é˜»æ­¢å‡çº§ã€‚</li>
</ul>
</li>
<li><strong>å®‰å…¨</strong>ï¼šå¤šç­¾æœºåˆ¶é˜²æ­¢å•äººè¯¯æ“ä½œã€‚</li>
</ul>
<h2 data-id="heading-17">éƒ¨ç½²è„šæœ¬</h2>
<p><code>scripts/deploy.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { ethers } <span class="hljs-keyword">from</span> <span class="hljs-string">"hardhat"</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [owner, admin, owner1, owner2, owner3] = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getSigners</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">LogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"LogicV1"</span>);
  <span class="hljs-keyword">const</span> logicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
  <span class="hljs-keyword">await</span> logicV1.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`LogicV1 deployed to: <span class="hljs-subst">${logicV1.address}</span>`</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">TransparentProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"TransparentProxy"</span>);
  <span class="hljs-keyword">const</span> initData = <span class="hljs-title class_">LogicV1Factory</span>.<span class="hljs-property">interface</span>.<span class="hljs-title function_">encodeFunctionData</span>(<span class="hljs-string">"initialize"</span>, [owner.<span class="hljs-property">address</span>]);
  <span class="hljs-keyword">const</span> transparentProxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">TransparentProxyFactory</span>.<span class="hljs-title function_">deploy</span>(logicV1.<span class="hljs-property">address</span>, admin.<span class="hljs-property">address</span>, initData);
  <span class="hljs-keyword">await</span> transparentProxy.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`TransparentProxy deployed to: <span class="hljs-subst">${transparentProxy.address}</span>`</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">UUPSLogicV</span>1Factory = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSLogicV1"</span>);
  <span class="hljs-keyword">const</span> uupsLogicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">UUPSLogicV</span>1Factory.<span class="hljs-title function_">deploy</span>();
  <span class="hljs-keyword">await</span> uupsLogicV1.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`UUPSLogicV1 deployed to: <span class="hljs-subst">${uupsLogicV1.address}</span>`</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">UUPSProxyFactory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"UUPSProxy"</span>);
  <span class="hljs-keyword">const</span> uupsProxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">UUPSProxyFactory</span>.<span class="hljs-title function_">deploy</span>(uupsLogicV1.<span class="hljs-property">address</span>, initData);
  <span class="hljs-keyword">await</span> uupsProxy.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`UUPSProxy deployed to: <span class="hljs-subst">${uupsProxy.address}</span>`</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title class_">MultiSigLogicV1Factory</span> = <span class="hljs-keyword">await</span> ethers.<span class="hljs-title function_">getContractFactory</span>(<span class="hljs-string">"MultiSigUpgrade"</span>);
  <span class="hljs-keyword">const</span> multiSigLogicV1 = <span class="hljs-keyword">await</span> <span class="hljs-title class_">MultiSigLogicV1Factory</span>.<span class="hljs-title function_">deploy</span>();
  <span class="hljs-keyword">await</span> multiSigLogicV1.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`MultiSigUpgrade deployed to: <span class="hljs-subst">${multiSigLogicV1.address}</span>`</span>);

  <span class="hljs-keyword">const</span> multiSigInitData = <span class="hljs-title class_">MultiSigLogicV1Factory</span>.<span class="hljs-property">interface</span>.<span class="hljs-title function_">encodeFunctionData</span>(<span class="hljs-string">"initialize"</span>, [
    [owner1.<span class="hljs-property">address</span>, owner2.<span class="hljs-property">address</span>, owner3.<span class="hljs-property">address</span>],
    <span class="hljs-number">2</span>,
  ]);
  <span class="hljs-keyword">const</span> multiSigProxy = <span class="hljs-keyword">await</span> <span class="hljs-title class_">UUPSProxyFactory</span>.<span class="hljs-title function_">deploy</span>(multiSigLogicV1.<span class="hljs-property">address</span>, multiSigInitData);
  <span class="hljs-keyword">await</span> multiSigProxy.<span class="hljs-title function_">deployed</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`MultiSigProxy deployed to: <span class="hljs-subst">${multiSigProxy.address}</span>`</span>);
}

<span class="hljs-title function_">main</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
  process.<span class="hljs-property">exitCode</span> = <span class="hljs-number">1</span>;
});
</code></pre>
<p>è·‘éƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx hardhat run scripts/deploy.ts --network hardhat
</code></pre>
<ul>
<li><strong>è§£æ</strong>ï¼šéƒ¨ç½²æ‰€æœ‰ä»£ç†å’Œé€»è¾‘åˆçº¦ï¼Œè®°å½•åœ°å€ã€‚</li>
</ul>
<h2 data-id="heading-18">æ€§èƒ½åˆ†æ</h2>
<ul>
<li><strong>éƒ¨ç½²</strong>ï¼š
<ul>
<li><code>SimpleProxy</code>ï¼š~0.6M gasã€‚</li>
<li><code>TransparentProxy</code>ï¼š~1.2M gasã€‚</li>
<li><code>UUPSProxy</code>ï¼š~0.8M gasã€‚</li>
<li><code>LogicV1</code>/<code>UUPSLogicV1</code>ï¼š~1M gasã€‚</li>
<li><code>MultiSigUpgrade</code>ï¼š~1.5M gasã€‚</li>
</ul>
</li>
<li><strong>æ“ä½œ</strong>ï¼š
<ul>
<li>åˆå§‹åŒ–ï¼š~100k gasã€‚</li>
<li>è®¾ç½®å€¼ï¼š~50k gasã€‚</li>
<li>å‡çº§ï¼š~~60k gasï¼ˆé€æ˜ï¼‰ï¼Œ~~40k gasï¼ˆUUPSï¼‰ï¼Œ~100k gasï¼ˆå¤šç­¾ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<p>è·‘ä»£ç ï¼Œä½“éªŒSolidityåˆçº¦å‡çº§çš„ç¡¬æ ¸ç©æ³•å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576821684252475435</link>    <guid>https://juejin.cn/post/7576821684252475435</guid>    <pubDate>2025-11-26T12:36:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252475435" data-draft-id="7576859345935089718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="Trae,Solo,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T12:36:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:36:45.000Z" title="Wed Nov 26 2025 12:36:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸€é˜µå­åˆ·åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æ“ä½œï¼šæœ‰äººç›´æ¥æŠŠä¸€å°æœåŠ¡å™¨çš„æƒé™æ‰”ç»™äº† AIï¼Œå¹¶ç®€å•è¯´äº†å¥ç›®æ ‡ã€‚</p>
<p>ç„¶åï¼ŒAI å°±ä»é›¶å¼€å§‹å®‰è£…ç¯å¢ƒã€é…ä¾èµ–ï¼Œæ‹‰ä»“åº“ï¼Œå¯åŠ¨æœåŠ¡ï¼Œæœ€åæˆåŠŸå®Œæˆäº†å¯¹å¤–æœåŠ¡çš„æä¾›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å°è¯•ä¸‹è¿™ä¸ªæ€è·¯ï¼šè®© <code>TRAE SOLO</code> è‡ªè¡Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸­æ­å»ºä¸€å¥— <code>MinerU</code> ç¯å¢ƒã€‚</p>
<h2 data-id="heading-0">MinerU</h2>
<p>é¦–å…ˆï¼Œç®€å•ä»‹ç»ä¸‹ <code>MinerU</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f6d82478d04e299eb19d753a2feee7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=eyAcvMYv80Ko0lYxi894%2BhOMfN4%3D" alt="" loading="lazy"/></p>
<p><code>MinerU</code> æ˜¯ä¸€æ¬¾èƒ½å°†<strong>PDF/å›¾ç‰‡è½¬æ¢ä¸ºæœºå™¨å¯è¯»æ ¼å¼</strong>ï¼ˆä¾‹å¦‚ <code>markdown</code>ã€<code>JSON</code>ï¼‰çš„å·¥å…·ï¼Œè¯ç”Ÿäºä¸Šæµ·äººå·¥æ™ºèƒ½å®éªŒå®¤å‡ºå“å¤§æ¨¡å‹ <code>InternLM</code> çš„é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ã€‚</p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¤šæ¨¡æ€æ–‡æ¡£è§£æ</strong>ï¼šæ”¯æŒå¤šç§æ–‡æ¡£ç±»å‹ï¼ŒåŒ…æ‹¬æ‰«æç‰ˆ PDF</li>
<li><strong>ç»“æ„åŒ–è¿˜åŸ</strong>ï¼šå¯è¯†åˆ«è¡¨æ ¼ã€å…¬å¼ã€åˆ†å­å¼ç­‰</li>
<li><strong>é«˜ä¿çœŸè¯­ä¹‰ç†è§£</strong>ï¼šåˆ©ç”¨å¸ƒå±€åˆ†æå’Œé˜…è¯»é¡ºåºæ¨ç†ï¼Œé¿å…ä¼ ç»Ÿ OCR æœºæ¢°è¯†åˆ«å¯¼è‡´çš„é€»è¾‘é”™ä¹±ã€‚</li>
<li><strong>æœ¬åœ°åŒ– &amp; å¼€æºå…è´¹</strong>ï¼šå…¨éƒ¨æ¨¡å‹å’Œä»£ç å¼€æºï¼Œå¯ç§æœ‰éƒ¨ç½²ï¼Œæ— éœ€è°ƒç”¨å¤–éƒ¨ APIï¼Œä¿éšœæ•°æ®éšç§ã€‚</li>
</ul>
<h2 data-id="heading-1">å…±ç»©ç®—åŠ›</h2>
<p>AI è¦éƒ¨ç½²çš„åº”ç”¨å·²ç»äº†è§£äº†ï¼Œç°åœ¨éœ€è¦ç»™ AI æ‰¾ä¸€ä¸ªå¯ä»¥æ“ä½œçš„æœåŠ¡å™¨ã€‚</p>
<p>æœ€è¿‘æˆ‘ä½¿ç”¨çš„ç®—åŠ›å¹³å°æ˜¯â€œå…±ç»©ç®—åŠ›â€ï¼Œ<code>RTX 4090</code> åªè¦ <code>1.68</code> å…ƒ/å°æ—¶ï¼Œè¿˜èƒ½æŒ‰æ¯«ç§’è®¡è´¹ã€è‡ªåŠ¨æ‰©å®¹ï¼Œéå¸¸ä¾¿äºæˆ‘æ ¹æ®ç ”ç©¶çš„æ¨¡å‹æŒ‘é€‰åˆé€‚çš„èŠ‚ç‚¹é…ç½®ã€‚</p>
<p>å°¤å…¶æ˜¯ç›®å‰ï¼Œå¹³å°è¿˜æœ‰ç¦åˆ©ï¼Œ<strong>æ³¨å†Œå°±é€ç®—åŠ›åˆ¸</strong>ã€‚</p>
<h2 data-id="heading-2">å®æ“è®°å½•</h2>
<h3 data-id="heading-3">èŠ‚ç‚¹å»ºç«‹</h3>
<p>æ³¨å†Œå¹¶ç™»å½•â€œå…±ç»©ç®—åŠ›â€å¹³å°ã€‚</p>
<p>åœ¨â€œäº‘ä¸»æœºâ€é¡µé¢é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381d765e27df439a89ad4481f0287395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=Rc4YtH5x9fML4ri8vP5vSZVT9jw%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ç±»å‹åï¼Œé…ç½®ç›¸å…³é•œåƒã€å­˜å‚¨ç­‰ï¼Œæˆ‘è¿™é‡Œé…ç½®äº†â€œåŸºç¡€é•œåƒâ€ï¼Œç”±äºæ˜¯æµ‹è¯•æ­å»ºæ¨¡å‹ï¼Œæœªé…ç½®ç›¸å…³å­˜å‚¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45720f1c6b0c433eb1630a9778577e87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=ZHXguh3rd2MYd2LyIXgx%2F%2FIF8wI%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç§Ÿç”¨ï¼Œè´¦æˆ·ä½™é¢ä¸º 0ï¼Œä¼šè¦æ±‚å……å€¼ä¸€ä¸‹ï¼ˆ0.01å…ƒå³å¯ï¼‰ï¼Œç„¶åï¼Œéœ€è¦åœ¨ä¸ªäººä¸­å¿ƒå…³æ³¨ä¸‹å…¬ä¼—å·ï¼Œè¿™äº›æŒ‰ç…§é¡µé¢æç¤ºè¿›è¡Œå³å¯ã€‚</p>
<p>ç§Ÿç”¨æˆåŠŸåï¼Œä¼šåœ¨â€œæ§åˆ¶å°â€-â€œäº‘ä¸»æœºåˆ—è¡¨â€ä¸­çœ‹åˆ°ç§Ÿç”¨çš„èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced2f6fccc284a258c6b961f3df6fc34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=c53clo2VeJABljwf1KwMHtyaP8E%3D" alt="" loading="lazy"/></p>
<p>24G æ˜¾å­˜ã€63G å†…å­˜ï¼Œ1å°æ—¶ 1.68 å…ƒï¼Œå¹¶ä¸”æœ‰ç®—åŠ›åˆ¸æŠµæ‰£ï¼Œè¿˜å¾ˆåˆé€‚çš„ã€‚</p>
<h3 data-id="heading-4">è¿œç¨‹è¿æ¥</h3>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œæˆ‘ä»¬å…ˆæ¥è°ƒæ•´ä¸‹ <code>SSH</code> è¿æ¥çš„å‘½ä»¤ï¼Œè®©å…¶æ”¯æŒç«¯å£æ˜ å°„ï¼Œæ–¹ä¾¿è®¿é—® demoã€‚</p>
<p>åœ¨ä¸Šä¸€æ­¥çš„â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­ï¼Œå¤åˆ¶å‡ºç™»å½•æŒ‡ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-css" lang="css">ssh root<span class="hljs-keyword">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å¢åŠ <strong>ç«¯å£æ˜ å°„å‚æ•°</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java">ssh -vvN -L <span class="hljs-number">7860</span>:<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">7860</span> root<span class="hljs-meta">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å…¶ä¸­ <code>7860</code> æ˜¯ <code>MinerU demo</code> çš„æœåŠ¡ç«¯å£ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>TRAE</code> è¿›è¡Œè¿œç¨‹è¿æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f9b703dfe8241f19585bdafa24cd984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=M1BqQ%2FKJfoL%2FPVZAlOzkjla%2Fc70%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥ä¸Šé¢çš„æŒ‡ä»¤ï¼Œå›è½¦å³å¯ã€‚</p>
<p>æ­¤æ—¶ä¼šè¦æ±‚å½•å…¥å¯†ç ï¼Œå†æ¬¡ä»â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­å¤åˆ¶â€œç™»å½•å¯†ç â€å³å¯ã€‚</p>
<blockquote>
<p>å¦‚æœåŒä¸€åœ°å€è¿æ¥å¤šæ¬¡ï¼Œå¯èƒ½ä¼šåœ¨ SSH è¿æ¥ä¸­ç”Ÿæˆå¤šä¸ªç›¸åŒçš„ Hostï¼Œæ­¤æ—¶ä¼šå‡ºç°ç™»å½•å¤±è´¥çš„æƒ…å†µï¼Œæ‰‹åŠ¨åˆ é™¤é‡å¤çš„ Host å³å¯ã€‚</p>
</blockquote>
<p>æˆåŠŸè¿æ¥åï¼Œç»ˆç«¯ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a9b28a6d3d742e1a8102d68ad591783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=m8gIiVOKAC5gAOWKDOX9fEqEBFc%3D" alt="" loading="lazy"/></p>
<p>æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¿œç¨‹æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤äº†ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œæˆ‘ä»¬éƒ½äº¤ç»™ AIã€‚</p>
<h3 data-id="heading-5">ç¯å¢ƒéƒ¨ç½²</h3>
<p>å¼€å‘ç¯å¢ƒï¼šå›½é™…ç‰ˆ <code>SOLO Coder</code> æ™ºèƒ½ä½“ï¼Œæœªé€‰æ‹© <code>Plan</code> æ¨¡å¼ã€‚</p>
<p>ç›´æ¥åœ¨ <code>Chat</code> çª—å£å½•å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç­‰å¾…å®Œæˆã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<p>æŒ‡ä»¤éå¸¸ç®€å•ï¼Œè®© AI å‚è€ƒ <code>MinerU</code> å®˜æ–¹ä»“åº“æ–‡æ¡£ï¼Œè‡ªè¡Œå®Œæˆéƒ¨ç½²ã€‚</p>
<p>å› ä¸ºæ¨¡å‹ä¸‹è½½æ¶‰åŠåˆ° <code>HuggingFace</code> çš„ç½‘ç»œé—®é¢˜ï¼Œä¸€èˆ¬å„å¤§ç®—åŠ›ä¼ä¸šéƒ½ä¼šæä¾›é•œåƒå†…å®¹ï¼Œè¿™é‡ŒæŠŠâ€œå…±ç»©ç®—åŠ›â€çš„é•œåƒæ–‡æ¡£ä¹Ÿæ”¾ä¸Šäº†ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">å‚è€ƒgithubæ–‡æ¡£<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/opendatalab</span><span class="hljs-regexp">/mineru?tab=readme-ov-file ï¼Œå¸®æˆ‘å®Œæˆmineruçš„å®‰è£…ï¼Œå¹¶å®Œæˆdemoå¯åŠ¨ã€‚
äº‘æœåŠ¡å™¨æ–‡æ¡£ï¼šhttps:/</span><span class="hljs-regexp">/www.gongjiyun.com/docs</span><span class="hljs-regexp">/server/introduction</span><span class="hljs-regexp">/rznmwsy13i4a8yktuyycoxyinmg/</span> 
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>è¿‡ç¨‹å¾ˆæ¸…æ™°ï¼šå®‰è£…ä¾èµ–ã€ä¸‹è½½æ¨¡å‹ã€å¯åŠ¨Demoã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ed996c916d140cdb6e08f5c1fdf5da5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=zqHwEcUepdAd22Ase9gK8vIZOhs%3D" alt="" loading="lazy"/></p>
<p>åé¢è¿˜æœ‰è¯¦ç»†çš„å®‰è£…æ­¥éª¤ã€ç½‘ç»œåŠ é€Ÿä¸é•œåƒå»ºè®®ã€å¸¸ç”¨å‚æ•°ä¸ä¼˜åŒ–ã€é—®é¢˜æ’æŸ¥ã€åç»­å¯é€‰å¢å¼ºç­‰å†…å®¹ï¼Œä¾¿äºæˆ‘ä»¬å›é¡¾å®¡é˜…ã€‚</p>
<p><strong>SOLO æ¨¡å¼çš„å¥½å¤„å°±æ˜¯ä¸­é—´é‡åˆ°é—®é¢˜ï¼Œå®ƒå¯ä»¥è‡ªè¡Œè§£å†³</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a961e3db9aa7494f8246f58bcf74ae20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=xQkx4ScwbTogw%2Bfyg2KosdmFI84%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¿˜ç»™å‡ºäº† demo çš„è®¿é—®æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad9688c470114572ba55130ceef88e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=BzTO%2FbDrygPDuRktGgBxwy02eHw%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œ<code>SOLO</code> å†…ç½®æµè§ˆå™¨å·²ç»å¸®æˆ‘æŠŠ demo æ‰“å¼€äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbb24fca4efe455ea6f1c14f79537ddb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=1diCpbeVDiDxzba0NULY8kS%2F6PU%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œå¯ä»¥é€šè¿‡ <code>http://localhost:7860/</code> è®¿é—®åˆ°æœåŠ¡å™¨ï¼Œå°±æ˜¯å› ä¸ºâ€œè¿œç¨‹è¿æ¥â€ç« èŠ‚ä¸­çš„ SSH å‘½ä»¤ä¸­å¢åŠ äº†ç«¯å£æ˜ å°„ã€‚</p>
<h3 data-id="heading-6">è°ƒè¯•ä¼˜åŒ–</h3>
<p>ä¸Šé¢è·‘èµ·æ¥çš„ demoï¼Œä¸Šä¼ æµ‹è¯•çš„ PDF åï¼Œè½¬æ¢æŠ¥é”™ã€‚</p>
<p>ä¸ç€æ€¥ï¼Œæˆ‘ä»¬ç›´æ¥è®© <code>SOLO</code> å¸®å¿™ä¿®å¤ä¸‹ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">demoä¸­ä¸Šä¼ åæŠ¥é”™ï¼Œè¯·å¸®æˆ‘ä¿®å¤
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p><code>SOLO</code> å¯ä»¥ä»ç»ˆç«¯ä¸­è·å–é”™è¯¯ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼š</p>
<p>â€œä¸Šä¼ è§£ææ—¶æŠ¥é”™çš„æ ¹å› æ˜¯ Gradio å¤„ç†æµç¨‹åœ¨è§£ææ—¶å°è¯•è®¿é—® HuggingFace è·å–æ¨¡å‹å…ƒæ•°æ®ï¼Œå‡ºç° SSL é”™è¯¯å¯¼è‡´å‡½æ•°è¿”å› None ï¼Œæœ€ç»ˆè§¦å‘ TypeError: cannot unpack non-iterable NoneType object â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147e903ead2f409eb39b6ffa8b9c95c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=NjQAkBUNiBJd0hRoLD75Qfim%2B1c%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å†æ¬¡ä¸Šä¼  <code>PDF</code>ï¼Œå¯ä»¥çœ‹åˆ°æå–ç»“æœäº†ï¼Œå·²ç»å®Œæˆäº†ä»Šå¤©çš„æ—¢å®šç›®æ ‡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fad90c7e2c44072961045993260da4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=nZEk2Y46KqYNQjC%2F79J7mgqmy%2FQ%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæ¨¡å‹å‚æ•°æœªè°ƒä¼˜ï¼Œè¯†åˆ«ä¸­å­˜åœ¨äº›è®¸é—®é¢˜ï¼Œéæ­¤æ¬¡åˆ†äº«é‡ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸å†è®¨è®ºäº†ã€‚</p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯éå¸¸é¡ºåˆ©çš„ï¼Œé™¤äº†æˆ‘ç¬¬ä¸€æ¬¡å¿˜è®°é…ç½®æ¨¡å‹é•œåƒä¸‹è½½å¯¼è‡´çš„å¤±è´¥ã€‚</p>
<p>ä¹‹å‰ä»¥ä¸º AI å¯ä»¥è‡ªå·± <code>SOLO</code> ä»£ç å°±å¾ˆé…·äº†ï¼Œæ²¡æƒ³åˆ°ï¼ŒAI éƒ½å·²ç»å¯ä»¥è‡ªå·±æŒæ§æœåŠ¡å™¨äº†ã€‚</p>
<p>ç»™ä¸ªç›®æ ‡ï¼Œå°±èƒ½ç›´æ¥ç­‰å¾…éªŒæ”¶ï¼Ÿé‚£åç»­æŠ€æœ¯éªŒè¯ã€ç¯å¢ƒæ­å»ºè„šæœ¬å²‚ä¸æ˜¯æ›´è½»æ¾äº†ã€‚</p>
<p>å½“éƒ¨ç½²ã€è°ƒè¯•ã€ä¼˜åŒ–ä¹Ÿèƒ½äº¤ç»™ AI è‡ªä¸»å®Œæˆåï¼Œå¼€å‘è€…å°±æœ‰äº†æ›´å¤šçš„æ—¶é—´å»æ€è€ƒâ€œåšä»€ä¹ˆâ€è€Œéâ€œæ€ä¹ˆåšâ€â€”â€”è¿™æˆ–è®¸æ‰æ˜¯æ™ºèƒ½æ—¶ä»£çš„ç”Ÿäº§åŠ›è·ƒè¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LLM æ¨ç†çš„â€œæ˜¾å­˜å¢™â€ä¸â€œé€šä¿¡å¢™â€ï¼šä»æ˜¾å­˜åˆ†å¸ƒåˆ°éƒ¨ç½²åŸåˆ™]]></title>    <link>https://juejin.cn/post/7576852209565499419</link>    <guid>https://juejin.cn/post/7576852209565499419</guid>    <pubDate>2025-11-26T11:12:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576852209565499419" data-draft-id="7576838095519219763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" LLM æ¨ç†çš„â€œæ˜¾å­˜å¢™â€ä¸â€œé€šä¿¡å¢™â€ï¼šä»æ˜¾å­˜åˆ†å¸ƒåˆ°éƒ¨ç½²åŸåˆ™"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-11-26T11:12:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             LLM æ¨ç†çš„â€œæ˜¾å­˜å¢™â€ä¸â€œé€šä¿¡å¢™â€ï¼šä»æ˜¾å­˜åˆ†å¸ƒåˆ°éƒ¨ç½²åŸåˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:12:53.000Z" title="Wed Nov 26 2025 11:12:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯ä¸€ç¯‡åŸºäºæˆ‘ä»¬ä¹‹å‰çš„å¯¹è¯å†…å®¹æ•´åˆè€Œæˆçš„æ·±åº¦æŠ€æœ¯æ–‡ç« ã€‚æ–‡ç« ä»ä½ æä¾›çš„å…³äºâ€œæ˜¾å­˜ä¸å¸¦å®½é™åˆ¶â€çš„ç²¾è¾Ÿè®ºè¿°å‡ºå‘ï¼Œæ·±å…¥å‰–æäº† Llama-3-70B çš„å®é™…æ•°æ®ï¼Œå¯¹æ¯”äº† MHA ä¸ GQA çš„å·¨å¤§å·®å¼‚ï¼Œå¹¶æ¢è®¨äº† LLM æ¨ç†ç³»ç»Ÿçš„æ ¸å¿ƒç“¶é¢ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ç ´è§£ LLM æ¨ç†çš„â€œæ˜¾å­˜å¢™â€ä¸â€œé€šä¿¡å¢™â€ï¼šä»æ˜¾å­˜åˆ†å¸ƒåˆ°éƒ¨ç½²åŸåˆ™</h2>
<h4 data-id="heading-1">å¼•è¨€ï¼šæ¨ç†ç³»ç»Ÿçš„åŒé‡æŸç¼š</h4>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ LLM çš„æ¨ç†éƒ½æ˜¯åœ¨ GPU ä¸Šè¿›è¡Œã€‚å•å¼  GPU çš„æ˜¾å­˜æ˜¯æœ‰é™çš„ï¼Œè¿™æ„æˆäº†å¤§æ¨¡å‹è½åœ°çš„ç¬¬ä¸€é“ç‰©ç†å±éšœã€‚æ˜¾å­˜çš„å ç”¨ä¸»è¦åˆ†ä¸ºä¸¤å¤§éƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>é™æ€æ˜¾å­˜ï¼ˆStatic Memoryï¼‰</strong> ï¼šç”¨äºå­˜æ”¾æ¨¡å‹çš„å‚æ•°ï¼ˆWeightsï¼‰å’Œå‰å‘è®¡ç®—çš„ä¸´æ—¶æ¿€æ´»å€¼ï¼ˆActivationsï¼‰ã€‚è¿™éƒ¨åˆ†ä¾èµ–äºæ¨¡å‹çš„ä½“é‡ï¼Œä¸€æ—¦é€‰å®šæ¨¡å‹ï¼ˆå¦‚ 70B æˆ– 405Bï¼‰ï¼Œå®ƒå‡ ä¹å°±æ˜¯ä¸€ä¸ªå›ºå®šçš„å¸¸æ•°ï¼Œæ˜¯æˆ‘ä»¬è¿›å…¥æ¸¸æˆçš„â€œé—¨ç¥¨â€ã€‚</li>
<li><strong>åŠ¨æ€æ˜¾å­˜ï¼ˆDynamic Memoryï¼‰</strong> ï¼šä¸»è¦ç”¨äºå­˜æ”¾ <strong>KV Cache</strong>ã€‚è¿™éƒ¨åˆ†ä¸ä»…ä¾èµ–äºæ¨¡å‹çš„ä½“é‡ï¼Œæ›´å¼ºä¾èµ–äºæ¨¡å‹çš„è¾“å…¥é•¿åº¦ï¼ˆContext Lengthï¼‰å’Œå¹¶å‘é‡ï¼ˆBatch Sizeï¼‰ã€‚åœ¨æ¨ç†è¿‡ç¨‹ä¸­ï¼Œå®ƒæ˜¯åŠ¨æ€çº¿æ€§å¢é•¿çš„ã€‚å½“ Context é•¿åº¦è¶³å¤Ÿé•¿æ—¶ï¼Œå®ƒçš„å¤§å°å°±ä¼šåå®¢ä¸ºä¸»ï¼Œå æ®ä¸»å¯¼åœ°ä½ï¼Œç”šè‡³è½»æ¾è¶…å‡ºä¸€å¼ å¡ã€ä¸€å°æœºï¼ˆ8å¼ å¡ï¼‰çš„æ€»æ˜¾å­˜é‡ã€‚</li>
</ol>
<p>åœ¨ GPU ä¸Šéƒ¨ç½²æ¨¡å‹æœ‰ä¸€ä¸ªé»„é‡‘åŸåˆ™ï¼š<strong>èƒ½ä¸€å¼ å¡éƒ¨ç½²çš„ï¼Œå°±ä¸è¦è·¨å¤šå¼ å¡ï¼›èƒ½ä¸€å°æœºéƒ¨ç½²çš„ï¼Œå°±ä¸è¦è·¨å¤šå°æœºã€‚</strong></p>
<p>è¿™æ˜¯å› ä¸ºæ•°æ®ä¼ è¾“éµå¾ªä¸¥æ ¼çš„ç‰©ç†å±‚çº§ï¼š <strong>â€œå¡å†…é€šä¿¡å¸¦å®½ï¼ˆSRAM â†” HBMï¼‰ &gt; å¡é—´é€šä¿¡å¸¦å®½ï¼ˆNVLinkï¼‰ &gt; æœºé—´é€šä¿¡å¸¦å®½ï¼ˆInfiniband/Ethernetï¼‰â€</strong> ã€‚ç”±äºâ€œæœ¨æ¡¶æ•ˆåº”â€ï¼Œæ¨¡å‹éƒ¨ç½²æ—¶è·¨è¶Šçš„ç‰©ç†è®¾å¤‡è¶Šå¤šï¼Œå—ä½é€Ÿé€šä¿¡å¸¦å®½çš„â€œæ‹–ç´¯â€å°±è¶Šå¤§ã€‚äº‹å®ä¸Šï¼Œå³ä¾¿æ˜¯ç›®å‰æœ€é¡¶çº§çš„ H100ï¼Œå…¶å¡å†…æ˜¾å­˜å¸¦å®½ï¼ˆHBM3ï¼‰è™½ç„¶è¾¾åˆ°äº† 3TB/sï¼Œä½†å¯¹äº Short Context æ¨ç†ï¼ˆMemory Bound åœºæ™¯ï¼‰æ¥è¯´ï¼Œè¿™ä¸ªé€Ÿåº¦ä¾ç„¶æ˜¯ç“¶é¢ˆï¼Œæ›´ä¸ç”¨è¯´é€Ÿåº¦ä¸‹é™æ•°ä¸ªæ•°é‡çº§çš„å¡é—´å’Œæœºé—´é€šä¿¡äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe1a1cd2190a4c8c9a82828f1387ba5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbXdxMzAxMjM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760388&amp;x-signature=fP4lCr0rriERst%2BCyMS7rj3crJ0%3D" alt="æˆªå±2025-11-26 19.11.37.png" loading="lazy"/></p>
<h4 data-id="heading-2">ä¸€ã€ æ˜¾å­˜è´¦æœ¬ï¼šLlama-3-70B çš„çœŸå®å¼€é”€</h4>
<p>ä¸ºäº†å…·è±¡åŒ–ç†è§£ä¸Šè¿°åŸåˆ™ï¼Œæˆ‘ä»¬ä»¥ <strong>Llama-3-70B</strong> æ¨¡å‹åœ¨ <strong>FP16</strong> ç²¾åº¦ä¸‹çš„éƒ¨ç½²ä¸ºä¾‹ï¼Œç®—ä¸€ç¬”æ˜¾å­˜çš„è´¦ã€‚</p>
<h5 data-id="heading-3">1. é™æ€æ˜¾å­˜ï¼šæ˜‚è´µçš„å…¥åœºåˆ¸</h5>
<p>Llama-3-70B æ‹¥æœ‰ 700 äº¿å‚æ•°ã€‚åœ¨ FP16 ç²¾åº¦ä¸‹ï¼Œæ¯ä¸ªå‚æ•°å ç”¨ 2 Bytesã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>StaticÂ Usage</mtext><mo>â‰ˆ</mo><mn>70</mn><mo>Ã—</mo><mn>1</mn><msup><mn>0</mn><mn>9</mn></msup><mo>Ã—</mo><mn>2</mn><mtext>Â Bytes</mtext><mo>â‰ˆ</mo><mrow><mn mathvariant="bold">140</mn><mtext>Â GB</mtext></mrow></mrow><annotation encoding="application/x-tex">\text{Static Usage} \approx 70 \times 10^9 \times 2 \text{ Bytes} \approx \mathbf{140 \text{ GB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord text"><span class="mord">StaticÂ Usage</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">70</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"/><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord">2</span><span class="mord text"><span class="mord">Â Bytes</span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord"><span class="mord mathbf">140</span><span class="mord text"><span class="mord">Â GB</span></span></span></span></span></span></span></p>
<p>è¿™æ„å‘³ç€ï¼Œä»…ä»…æ˜¯ä¸ºäº†åŠ è½½æ¨¡å‹ï¼Œä½ å°±è‡³å°‘éœ€è¦ <strong>2å¼  80GB çš„ A100/H100</strong>ã€‚å¦‚æœåªæœ‰ä¸€å¼ å¡ï¼Œè¿æ¨¡å‹éƒ½æ— æ³•å¯åŠ¨ã€‚è¿™ 140GB æ˜¯é›·æ‰“ä¸åŠ¨çš„â€œå›ºå®šæˆæœ¬â€ã€‚</p>
<h5 data-id="heading-4">2. åŠ¨æ€æ˜¾å­˜ï¼šè¢«å¿½è§†çš„éšå½¢æ€æ‰‹</h5>
<p>åŠ¨æ€æ˜¾å­˜çš„æ ¸å¿ƒæ˜¯ KV Cacheã€‚å®ƒå­˜å‚¨äº†æ‰€æœ‰å†å² Token çš„é”®ï¼ˆKeyï¼‰å’Œå€¼ï¼ˆValueï¼‰ï¼Œä»¥é¿å…é‡å¤è®¡ç®—ã€‚Llama-3-70B é‡‡ç”¨äº† <strong>GQAï¼ˆåˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›ï¼‰</strong> æŠ€æœ¯ï¼Œå°† KV Heads çš„æ•°é‡å‹ç¼©åˆ°äº† 8 ä¸ªã€‚</p>
<p>åœ¨æ­¤æ¶æ„ä¸‹ï¼Œæ¯ç”Ÿæˆæˆ–å¤„ç† <strong>1 ä¸ª Token</strong>ï¼Œå…¶ KV Cache çš„æ˜¾å­˜å ç”¨çº¦ä¸ºï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>Mem</mtext><mtext>token</mtext></msub><mo>â‰ˆ</mo><mrow><mn mathvariant="bold">0.31</mn><mtext>Â MB</mtext></mrow></mrow><annotation encoding="application/x-tex">\text{Mem}_{\text{token}} \approx \mathbf{0.31 \text{ MB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord text"><span class="mord">Mem</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">token</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord"><span class="mord mathbf">0.31</span><span class="mord text"><span class="mord">Â MB</span></span></span></span></span></span></span></p>
<blockquote>
<p>æ–‡ç« åº•éƒ¨æœ‰è®¡ç®—è¿‡ç¨‹</p>
</blockquote>
<p>çœ‹ä¼¼å¾ˆå°ï¼Ÿè®©æˆ‘ä»¬çœ‹çœ‹åœ¨ä¸åŒåœºæ™¯ä¸‹çš„<strong>æ€»è´¦</strong>ï¼š</p>
<ul>
<li>
<p><strong>åœºæ™¯ Aï¼ˆé•¿æ–‡æ¡£åˆ†æï¼‰</strong> ï¼šBatch Size=1ï¼ŒContext=32kã€‚</p>
<ul>
<li>KV Cache <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>10</mn><mtext>Â GB</mtext></mrow><annotation encoding="application/x-tex">\approx 10 \text{ GB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">10</span><span class="mord text"><span class="mord">Â GB</span></span></span></span></span></span>ã€‚æ­¤æ—¶ 2å¼ å¡ï¼ˆå…±160GBï¼Œå‰©20GBå¯ç”¨ï¼‰è¿˜èƒ½å‹‰å¼ºåº”ä»˜ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœºæ™¯ Bï¼ˆé«˜å¹¶å‘æœåŠ¡ï¼‰</strong> ï¼šBatch Size=64ï¼ŒContext=2kã€‚</p>
<ul>
<li>KV Cache <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â‰ˆ</mo><mn>41</mn><mtext>Â GB</mtext></mrow><annotation encoding="application/x-tex">\approx 41 \text{ GB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord">41</span><span class="mord text"><span class="mord">Â GB</span></span></span></span></span></span>ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šæ­¤æ—¶æ€»æ˜¾å­˜éœ€æ±‚è¾¾åˆ° 181GBï¼Œ<strong>2å¼ å¡ç›´æ¥æ˜¾å­˜æº¢å‡ºï¼ˆOOMï¼‰</strong> ï¼Œç³»ç»Ÿå´©æºƒã€‚</li>
</ul>
</li>
</ul>
<p>è¿™éªŒè¯äº†å¼•è¨€ä¸­çš„åˆ¤æ–­ï¼š<strong>åœ¨é•¿æ–‡æœ¬æˆ–é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒåŠ¨æ€æ˜¾å­˜ä¼šè¿…é€Ÿåå™¬å‰©ä½™ç©ºé—´ï¼Œè¿«ä½¿æˆ‘ä»¬å¢åŠ æ›´å¤šæ˜‚è´µçš„ GPUã€‚</strong></p>
<h4 data-id="heading-5">äºŒã€ æ¶æ„çš„æ¼”è¿›ï¼šä¸ºä½• MHA æ­£åœ¨è¢«æŠ›å¼ƒï¼Ÿ</h4>
<p>ä¸ºäº†è§£å†³â€œåŠ¨æ€æ˜¾å­˜çˆ†ç‚¸â€çš„é—®é¢˜ï¼Œç°ä»£å¤§æ¨¡å‹ï¼ˆå¦‚ Llama 3, Mistralï¼‰çº·çº·æŠ›å¼ƒäº†ä¼ ç»Ÿçš„ <strong>MHAï¼ˆå¤šå¤´æ³¨æ„åŠ›ï¼‰</strong> ï¼Œè½¬è€Œä½¿ç”¨ <strong>GQAï¼ˆåˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›ï¼‰</strong> ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ª<strong>åäº‹å®å‡è®¾</strong>ï¼šå¦‚æœ Llama-3-70B åšæŒä½¿ç”¨ MHAï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<p>åœ¨ MHA æ¶æ„ä¸‹ï¼ŒKV Heads çš„æ•°é‡å¿…é¡»ä¸ Query Heads ä¸€è‡´ï¼ˆ64ä¸ªï¼‰ï¼Œè¿™æ„å‘³ç€ KV Cache çš„å¤§å°å°†ç›´æ¥<strong>ç¿» 8 å€</strong>ã€‚</p>

























<table><thead><tr><th><strong>æŒ‡æ ‡</strong></th><th><strong>Llama-3-70B (å®é™… GQA)</strong></th><th><strong>Llama-3-70B (å‡è®¾ MHA)</strong></th></tr></thead><tbody><tr><td><strong>å• Token æ˜¾å­˜å ç”¨</strong></td><td><strong>0.31 MB</strong></td><td><strong>2.5 MB</strong></td></tr><tr><td><strong>32k é•¿æ–‡ (BS=1)</strong></td><td>10 GB (è½»æ¾)</td><td><strong>80 GB</strong> (å æ»¡ä¸€å¼  H100)</td></tr><tr><td><strong>128k è¶…é•¿æ–‡ (BS=1)</strong></td><td>40 GB (å¯æ¥å—)</td><td><strong>320 GB</strong> (ç¾éš¾çº§)</td></tr></tbody></table>
<p>å¦‚æœä½¿ç”¨ MHAï¼Œä»…ä¸ºäº†å¤„ç†ä¸€ä¸ª 128k çš„é•¿æ–‡æœ¬è¯·æ±‚ï¼Œå…‰æ˜¯ KV Cache å°±éœ€è¦ <strong>4å¼  H100</strong>ï¼ŒåŠ ä¸Šæƒé‡åˆ™éœ€è¦ <strong>6-8å¼ </strong>ã€‚è¿™å°†å¯¼è‡´æ¨ç†æˆæœ¬é«˜åˆ°æ— æ³•å•†ä¸šåŒ–ã€‚å› æ­¤ï¼Œä» MHA å‘ GQA/MLA çš„æ¼”è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€åœº<strong>ä¸ºäº†åœ¨æœ‰é™æ˜¾å­˜å†…å¡å…¥æ›´é•¿ Context çš„è‡ªæ•‘è¿åŠ¨</strong>ã€‚</p>
<h4 data-id="heading-6">ä¸‰ã€ å¸¦å®½ç“¶é¢ˆï¼šä¸ä»…ä»…æ˜¯å­˜ä¸ä¸‹</h4>
<p>å½“æˆ‘ä»¬è¢«è¿«å› ä¸ºæ˜¾å­˜ä¸è¶³è€Œå¢åŠ  GPU æ•°é‡æ—¶ï¼ˆä»å•å¡ -&gt; å¤šå¡ -&gt; å¤šæœºï¼‰ï¼Œæˆ‘ä»¬ç«‹åˆ»æ’ä¸Šäº†ç¬¬äºŒé“å¢™ï¼š<strong>é€šä¿¡å¸¦å®½</strong>ã€‚</p>
<p>LLM çš„æ¨ç†è¿‡ç¨‹ï¼ˆDecoding é˜¶æ®µï¼‰æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>Memory Boundï¼ˆå†…å­˜å—é™ï¼‰</strong> ä»»åŠ¡ã€‚</p>
<ul>
<li><strong>è®¡ç®—æ ¸å¿ƒï¼ˆTensor Coreï¼‰</strong> åƒæ˜¯ä¸€ä¸ªåˆ‡èœæå¿«çš„å¨å¸ˆï¼ˆç®—åŠ›è¿‡å‰©ï¼‰ã€‚</li>
<li><strong>æ˜¾å­˜ï¼ˆHBMï¼‰</strong> åƒæ˜¯å†°ç®±ã€‚</li>
<li>æ¯ç”Ÿæˆä¸€ä¸ª Tokenï¼Œå¨å¸ˆéƒ½éœ€è¦æŠŠå†°ç®±é‡Œé‡è¾¾ <strong>140GB</strong> çš„é£Ÿæï¼ˆæƒé‡ï¼‰å…¨éƒ¨æ¬è¿ä¸€éï¼Œåˆ‡ä¸€åˆ€ï¼Œç„¶åæ”¾å›å»ã€‚</li>
</ul>
<p>å³ä¾¿ H100 çš„ HBM3 å¸¦å®½é«˜è¾¾ 3TB/sï¼Œæ¬è¿ä¸€æ¬¡ 140GB æ•°æ®ä¹Ÿéœ€è¦çº¦ <strong>46ms</strong>ã€‚è¿™æ„å‘³ç€ï¼Œ<strong>ç†è®ºä¸Šé™</strong>æ¯ç§’åªèƒ½ç”Ÿæˆçº¦ 20 ä¸ª Tokenã€‚</p>
<p>è€Œä¸€æ—¦æˆ‘ä»¬å°†æ¨¡å‹åˆ‡åˆ†åˆ°å¤šå°æœºå™¨ï¼ˆModel Parallelismï¼‰ï¼š</p>
<ol>
<li>è®¡ç®—ä¸å†æ˜¯ç“¶é¢ˆï¼Œ<strong>ç½‘ç»œ</strong>æˆäº†ç“¶é¢ˆã€‚</li>
<li>è®¾å¤‡é—´é€šä¿¡å¸¦å®½ä» 3TB/s éª¤é™è‡³ 50-100GB/sï¼ˆInfinibandï¼‰ã€‚</li>
<li>æ¯ä¸€æ¬¡çŸ©é˜µä¹˜æ³•ï¼ˆMatrix Multiplicationï¼‰éƒ½éœ€è¦åœ¨æœºå™¨é—´åŒæ­¥æ•°æ®ã€‚</li>
<li>åŸæœ¬ 46ms çš„å»¶è¿Ÿå¯èƒ½ä¼šå˜æˆ 500ms ç”šè‡³æ›´é«˜ï¼Œå¯¼è‡´ç”¨æˆ·ä½“éªŒäº§ç”Ÿæå…¶æ˜æ˜¾çš„å¡é¡¿ã€‚</li>
</ol>
<h4 data-id="heading-7">ç»“è¯­</h4>
<p>ç†è§£äº†æ˜¾å­˜çš„é™æ€ä¸åŠ¨æ€åˆ†å¸ƒï¼Œä»¥åŠé€šä¿¡å¸¦å®½çš„å±‚çº§å·®å¼‚ï¼Œæˆ‘ä»¬å°±èƒ½æ˜ç™½å½“å‰å¤§æ¨¡å‹æ¨ç†ä¼˜åŒ–çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<ol>
<li><strong>é‡åŒ–ï¼ˆQuantizationï¼‰</strong> ï¼šé€šè¿‡ Int8/Int4 å‹ç¼©é™æ€æƒé‡ï¼Œè¯•å›¾æŠŠ 70B æ¨¡å‹å¡è¿›å•å¡æˆ–æ›´å°‘çš„å¡ä¸­ï¼Œé¿å…è·¨è®¾å¤‡é€šä¿¡ã€‚</li>
<li><strong>æ¶æ„æ”¹è‰¯ï¼ˆGQA/MLAï¼‰</strong> ï¼šé€šè¿‡å‡å°‘ KV Cache çš„ä½“ç§¯ï¼Œå»¶ç¼“åŠ¨æ€æ˜¾å­˜çš„æº¢å‡ºï¼Œä»è€Œæ”¯æŒè¶…é•¿ä¸Šä¸‹æ–‡ï¼ˆLong Contextï¼‰ã€‚</li>
<li><strong>ç®—å­èåˆï¼ˆKernel Fusionï¼‰</strong> ï¼šå‡å°‘æ•°æ®åœ¨ HBM å’Œ SRAM ä¹‹é—´çš„æ¬è¿æ¬¡æ•°ï¼Œçªç ´å¸¦å®½ç“¶é¢ˆã€‚</li>
</ol>
<p>åœ¨æ˜¾å­˜å¢™ä¸å¸¦å®½å¢™è¢«å½»åº•æ‰“ç ´ä¹‹å‰ï¼Œ <strong>â€œèƒ½å•å¡ä¸è·¨å¡ï¼Œèƒ½å•æœºä¸è·¨æœºâ€</strong> å°†å§‹ç»ˆæ˜¯ LLM éƒ¨ç½²çš„æœ€é«˜å‡†åˆ™ã€‚</p>
<h4 data-id="heading-8">å•ä¸ª Token çš„ KV Cache æ˜¾å­˜å ç”¨è®¡ç®—</h4>
<p>ä»¥ä¸‹æ˜¯ <strong>Llama-3-70B</strong> å•ä¸ª Token çš„ KV Cache æ˜¾å­˜å ç”¨è®¡ç®—å…¬å¼çš„è¯¦ç»†æ¨å¯¼è¿‡ç¨‹ã€‚</p>
<h5 data-id="heading-9">1. é€šç”¨è®¡ç®—å…¬å¼</h5>
<p>ä»»ä½• Transformer ç±»æ¨¡å‹çš„ KV Cacheï¼ˆæ¯ä¸ª Tokenï¼‰æ˜¾å­˜å ç”¨å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>Mem</mtext><mtext>token</mtext></msub><mo>=</mo><mn>2</mn><mo>Ã—</mo><msub><mi>n</mi><mtext>layers</mtext></msub><mo>Ã—</mo><msub><mi>n</mi><mtext>kv_heads</mtext></msub><mo>Ã—</mo><msub><mi>d</mi><mtext>head</mtext></msub><mo>Ã—</mo><msub><mi>P</mi><mtext>bytes</mtext></msub></mrow><annotation encoding="application/x-tex">\text{Mem}_{\text{token}} = 2 \times n_{\text{layers}} \times n_{\text{kv\_heads}} \times d_{\text{head}} \times P_{\text{bytes}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"/><span class="mord"><span class="mord text"><span class="mord">Mem</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">token</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">layers</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.9503em;vertical-align:-0.367em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">kv_heads</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">head</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">bytes</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></p>
<p><strong>å‚æ•°å«ä¹‰æ‹†è§£ï¼š</strong></p>
<ul>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">2</span></span></span></span></span></strong> ï¼šä»£è¡¨ <strong>Key</strong> å’Œ <strong>Value</strong> ä¸¤ä¸ªçŸ©é˜µï¼ˆQuery ä¸éœ€è¦ç¼“å­˜ï¼‰ã€‚</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mtext>layers</mtext></msub></mrow><annotation encoding="application/x-tex">n_{\text{layers}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">layers</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></strong> ï¼šæ¨¡å‹çš„æ€»å±‚æ•°ï¼ˆLayersï¼‰ã€‚</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mtext>kv_heads</mtext></msub></mrow><annotation encoding="application/x-tex">n_{\text{kv\_heads}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7976em;vertical-align:-0.367em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">kv_heads</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span/></span></span></span></span></span></span></span></span></span></strong> ï¼šç”¨äºå­˜å‚¨ KV çš„æ³¨æ„åŠ›å¤´æ•°é‡ï¼ˆGQA/MQA æ¶æ„ä¸‹ï¼Œè¿™ä¸ªæ•°å€¼å°äº Query å¤´æ•°ï¼‰ã€‚</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mtext>head</mtext></msub></mrow><annotation encoding="application/x-tex">d_{\text{head}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">head</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span></strong> ï¼šå•ä¸ªæ³¨æ„åŠ›å¤´çš„ç»´åº¦å¤§å°ã€‚</li>
<li><strong><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mtext>bytes</mtext></msub></mrow><annotation encoding="application/x-tex">P_{\text{bytes}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">bytes</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span></strong> ï¼šæ•°æ®ç²¾åº¦å ç”¨çš„å­—èŠ‚æ•°ï¼ˆFP16/BF16 é€šå¸¸ä¸º 2 Bytesï¼‰ã€‚</li>
</ul>
<hr/>
<h5 data-id="heading-10">2. Llama-3-70B çš„å…·ä½“å‚æ•°ä»£å…¥</h5>
<p>æ ¹æ® Llama-3-70B çš„æ¶æ„é…ç½®ï¼š</p>
<ol>
<li>
<p><strong>ç²¾åº¦ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mtext>bytes</mtext></msub></mrow><annotation encoding="application/x-tex">P_{\text{bytes}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">bytes</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>)</strong> ï¼šé€šå¸¸æ¨ç†ä½¿ç”¨ FP16ï¼Œå³ <strong>2 Bytes</strong>ã€‚</p>
</li>
<li>
<p><strong>å±‚æ•° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mtext>layers</mtext></msub></mrow><annotation encoding="application/x-tex">n_{\text{layers}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">layers</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span/></span></span></span></span></span></span></span></span></span>)</strong> ï¼š<strong>80 å±‚</strong>ã€‚</p>
</li>
<li>
<p><strong>KV å¤´æ•° (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mtext>kv_heads</mtext></msub></mrow><annotation encoding="application/x-tex">n_{\text{kv\_heads}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7976em;vertical-align:-0.367em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">kv_heads</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span/></span></span></span></span></span></span></span></span></span>)</strong> ï¼š</p>
<ul>
<li>Llama-3-70B ä½¿ç”¨äº† <strong>GQA (Grouped Query Attention)</strong> ã€‚</li>
<li>è™½ç„¶å®ƒçš„ Query Heads æ˜¯ 64ï¼Œä½† KV Heads è¢«å‹ç¼©åˆ°äº† <strong>8</strong>ã€‚</li>
</ul>
</li>
<li>
<p><strong>å•å¤´ç»´åº¦ (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mtext>head</mtext></msub></mrow><annotation encoding="application/x-tex">d_{\text{head}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">head</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span>)</strong> ï¼š</p>
<ul>
<li>è®¡ç®—å…¬å¼ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>HiddenÂ Size</mtext><mi mathvariant="normal">/</mi><mtext>QueryÂ Heads</mtext></mrow><annotation encoding="application/x-tex">\text{Hidden Size} / \text{Query Heads}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord text"><span class="mord">HiddenÂ Size</span></span><span class="mord">/</span><span class="mord text"><span class="mord">QueryÂ Heads</span></span></span></span></span></span></li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>8192</mn><mi mathvariant="normal">/</mi><mn>64</mn><mo>=</mo><mn mathvariant="bold">128</mn></mrow><annotation encoding="application/x-tex">8192 / 64 = \mathbf{128}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">8192/64</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord"><span class="mord mathbf">128</span></span></span></span></span></span>ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h5 data-id="heading-11">3. è®¡ç®—æ­¥éª¤</h5>
<p>å°†ä¸Šè¿°æ•°å€¼ä»£å…¥å…¬å¼ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mtext>Mem</mtext><mtext>token</mtext></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mn>2</mn><mo>Ã—</mo><mn>80</mn><mo>Ã—</mo><mn>8</mn><mo>Ã—</mo><mn>128</mn><mo>Ã—</mo><mn>2</mn><mtext>Â (Bytes)</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mn>160</mn><mo>Ã—</mo><mn>8</mn><mo>Ã—</mo><mn>256</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mn>1280</mn><mo>Ã—</mo><mn>256</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow/></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow/><mo>=</mo><mrow><mn mathvariant="bold">327</mn><mo separator="true">,</mo><mn mathvariant="bold">680</mn><mtext>Â Bytes</mtext></mrow></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned} \text{Mem}_{\text{token}} &amp;= 2 \times 80 \times 8 \times 128 \times 2 \text{ (Bytes)} \\ &amp;= 160 \times 8 \times 256 \\ &amp;= 1280 \times 256 \\ &amp;= \mathbf{327,680 \text{ Bytes}} \end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:6em;vertical-align:-2.75em;"/><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord text"><span class="mord">Mem</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">token</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"/></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"/></span><span style="top:-0.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"/></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span/></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.25em;"><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">2</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">80</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">128</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">2</span><span class="mord text"><span class="mord">Â (Bytes)</span></span></span></span><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">160</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">8</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">256</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord">1280</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mord">256</span></span></span><span style="top:-0.91em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"/><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mord"><span class="mord mathbf">327</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathbf">680</span><span class="mord text"><span class="mord">Â Bytes</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.75em;"><span/></span></span></span></span></span></span></span></span></span></span></p>
<h5 data-id="heading-12">4. å•ä½æ¢ç®—ï¼ˆBytes <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>â†’</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">â†’</span></span></span></span></span> MBï¼‰</h5>
<p>å°†å­—èŠ‚è½¬æ¢ä¸ºå…†å­—èŠ‚ï¼ˆMBï¼‰ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>Mem</mtext><mtext>tokenÂ (MB)</mtext></msub><mo>=</mo><mfrac><mrow><mn>327</mn><mo separator="true">,</mo><mn>680</mn></mrow><mrow><mn>1024</mn><mo>Ã—</mo><mn>1024</mn></mrow></mfrac><mo>â‰ˆ</mo><mrow><mn mathvariant="bold">0.3125</mn><mtext>Â MB</mtext></mrow></mrow><annotation encoding="application/x-tex">\text{Mem}_{\text{token (MB)}} = \frac{327,680}{1024 \times 1024} \approx \mathbf{0.3125 \text{ MB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0385em;vertical-align:-0.3552em;"/><span class="mord"><span class="mord text"><span class="mord">Mem</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.5198em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">tokenÂ (MB)</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.3552em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.3005em;vertical-align:-0.4033em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8972em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1024</span><span class="mbin mtight">Ã—</span><span class="mord mtight">1024</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">327</span><span class="mpunct mtight">,</span><span class="mord mtight">680</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord"><span class="mord mathbf">0.3125</span><span class="mord text"><span class="mord">Â MB</span></span></span></span></span></span></span></p>
<p>è¿™å°±æ˜¯æ–‡ä¸­æåˆ°çš„ <strong>0.31 MB</strong> çš„ç”±æ¥ã€‚</p>
<hr/>
<h5 data-id="heading-13">è¡¥å……ï¼šå¦‚æœæ˜¯ MHA ä¼šæ€æ ·ï¼Ÿ</h5>
<p>å¦‚æœå–æ¶ˆ GQAï¼Œæ”¹å›ä¼ ç»Ÿçš„ MHAï¼Œåˆ™ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>n</mi><mtext>kv_heads</mtext></msub></mrow><annotation encoding="application/x-tex">n_{\text{kv\_heads}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7976em;vertical-align:-0.367em;"/><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">kv_heads</span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span/></span></span></span></span></span></span></span></span></span> ä¼šä» 8 å˜æˆ 64ã€‚</p>
<p>è®¡ç®—ç»“æœç›´æ¥ä¹˜ä»¥ 8ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0.3125</mn><mtext>Â MB</mtext><mo>Ã—</mo><mn>8</mn><mo>=</mo><mrow><mn mathvariant="bold">2.5</mn><mtext>Â MB</mtext></mrow></mrow><annotation encoding="application/x-tex">0.3125 \text{ MB} \times 8 = \mathbf{2.5 \text{ MB}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"/><span class="mord">0.3125</span><span class="mord text"><span class="mord">Â MB</span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">8</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord"><span class="mord mathbf">2.5</span><span class="mord text"><span class="mord">Â MB</span></span></span></span></span></span></span></p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ GQA å¯¹äºæ˜¾å­˜ä¼˜åŒ–å¦‚æ­¤é‡è¦çš„æ•°å­¦è¯æ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç©è½¬ Pipelines ä¹‹ä¿®æ­£é“¾è·¯é”™è¯¯çŠ¶æ€ç ]]></title>    <link>https://juejin.cn/post/7576853741757743138</link>    <guid>https://juejin.cn/post/7576853741757743138</guid>    <pubDate>2025-11-26T11:17:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576853741757743138" data-draft-id="7576859594359504896" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç©è½¬ Pipelines ä¹‹ä¿®æ­£é“¾è·¯é”™è¯¯çŠ¶æ€ç "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T11:17:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç©è½¬ Pipelines ä¹‹ä¿®æ­£é“¾è·¯é”™è¯¯çŠ¶æ€ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:17:17.000Z" title="Wed Nov 26 2025 11:17:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Pipelines æ˜¯ä¸€ç§è¿è¡Œåœ¨ DataKit ä¸Šçš„è½»é‡çº§è„šæœ¬è¯­è¨€ï¼Œç”¨äºå¯¹é‡‡é›†åˆ°çš„æ•°æ®è¿›è¡Œè‡ªå®šä¹‰è§£æå’Œä¿®æ”¹ã€‚é€šè¿‡å®šä¹‰è§£æè§„åˆ™ï¼Œå®ƒä»¬èƒ½å¤Ÿå°†ä¸åŒç§ç±»çš„æ•°æ®ç»†ç²’åº¦åœ°åˆ‡å‰²å¹¶è½¬æ¢ä¸ºç»“æ„åŒ–çš„æ ¼å¼ï¼Œä»¥æ»¡è¶³å…·ä½“çš„æ•°æ®ç®¡ç†éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ Pipelines æå–æ—¥å¿—ä¸­çš„æ—¶é—´æˆ³ã€çŠ¶æ€å’Œå…¶ä»–å…³é”®å­—æ®µï¼Œå¹¶å°†è¿™äº›ä¿¡æ¯ä½œä¸ºæ ‡ç­¾ä½¿ç”¨ã€‚</p>
<p>DataKit åˆ©ç”¨ Pipelines çš„å¼ºå¤§åŠŸèƒ½ï¼Œä½¿å¾—ç”¨æˆ·èƒ½å¤Ÿåœ¨å·¥ä½œç©ºé—´é¡µé¢ä¸Šç›´æ¥ç¼–å†™å’Œè°ƒè¯• Pipeline è„šæœ¬ï¼Œä»è€Œå®ç°å¯¹æ•°æ®çš„æ›´ç»†ç²’åº¦çš„ç»“æ„åŒ–å¤„ç†ã€‚è¿™ç§å¤„ç†ä¸ä»…æé«˜äº†æ•°æ®çš„å¯ç®¡ç†æ€§ï¼Œè€Œä¸”é€šè¿‡ Pipeline æä¾›çš„ä¸°å¯Œå‡½æ•°åº“ï¼Œæ”¯æŒå¯¹å¸¸è§æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–æ“ä½œï¼Œå¦‚è§£ææ—¶é—´å­—ç¬¦ä¸²å’Œè¡¥å…¨ IP åœ°å€çš„åœ°ç†ä¿¡æ¯ç­‰ã€‚</p>
<h2 data-id="heading-0">åœºæ™¯åˆ†æ</h2>
<p>ç”¨æˆ·åœ¨ä¸ŠæŠ¥åº”ç”¨æ€§èƒ½ç›‘æµ‹æ•°æ®çš„æ—¶å€™ï¼Œå¦‚æœåœ¨ä¸šåŠ¡ä¾§åšäº†ä¸€äº›è‡ªå®šä¹‰çŠ¶æ€ç ï¼Œæ¯”å¦‚è‡ªå®šä¹‰ 4xxï¼Œä½†è¿™ç§åœ¨ä¸šåŠ¡ä¸Šå±äºæ­£å¸¸çš„å¿ƒè·³ç›‘æ§ï¼Œä¸éœ€è¦åœ¨è§‚æµ‹äº‘ä¸Šå½’ç±»ä¸ºé”™è¯¯è¯·æ±‚ã€‚è¿™æ—¶å€™æ€ä¹ˆåœ¨è§‚æµ‹äº‘ä¸Šè¿›è¡Œä¿®æ­£çŠ¶æ€ç ï¼Œä»è€Œå‡å°‘é”™è¯¯åˆ†æï¼Œä»¥åŠè¯¯å‘Šè­¦ã€‚</p>
<h2 data-id="heading-1">å®æ–½æ–¹æ¡ˆ</h2>
<p>å¦‚ä¸‹é“¾è·¯åŸæ–‡å¸¦æœ‰Â <code>status=error</code>Â çš„æ ‡ç­¾ï¼Œå®é™…ç”¨æˆ·åœ¨ "error_type"="com.xxx.cloud.os.service.exceptions.OsServiceException" çš„é”™è¯¯ç±»å‹ä¸‹ï¼Œéƒ½å±äºæ­£å¸¸çš„ä¸šåŠ¡è¯·æ±‚ï¼Œéœ€è¦ä»æºå¤´æŠŠè¿™ç±»å‹çš„æŠ¥é”™ä¿®æ­£ä¸ºæ­£å¸¸çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-python" lang="python">{
  <span class="hljs-string">"time"</span>: <span class="hljs-number">1761533611771</span>,
  <span class="hljs-string">"__docid"</span>: <span class="hljs-string">"T_1761533611771_d3vdtb2c600s73e27rpg"</span>,
  <span class="hljs-string">"__namespace"</span>: <span class="hljs-string">"tracing"</span>,
  <span class="hljs-string">"__source"</span>: <span class="hljs-string">"user-xxx-eks"</span>,
  <span class="hljs-string">"cluster_name_k8s"</span>: <span class="hljs-string">"eks-prod"</span>,
  <span class="hljs-string">"create_time"</span>: <span class="hljs-number">1761533612872</span>,
  <span class="hljs-string">"date"</span>: <span class="hljs-number">1761533611771</span>,
  <span class="hljs-string">"date_ns"</span>: <span class="hljs-number">1761533611771449300</span>,
  <span class="hljs-string">"dd_version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"dk_fingerprint"</span>: <span class="hljs-string">"ip-xxx-16-xx-229.us-west-2.xxx.internal"</span>,
  <span class="hljs-string">"duration"</span>: <span class="hljs-number">19712</span>,
  <span class="hljs-string">"env"</span>: <span class="hljs-string">"prod"</span>,
  <span class="hljs-string">"host"</span>: <span class="hljs-string">"ip-172xxx-220.us-west-2.xxx.internal"</span>,
  <span class="hljs-string">"host_ip"</span>: <span class="hljs-string">"172.16.12.xxx"</span>,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"{"</span>service<span class="hljs-string">":"</span>user-xxx-eks<span class="hljs-string">","</span>name<span class="hljs-string">":"</span>spring.handle<span class="hljs-string">r","</span>resource<span class="hljs-string">":"</span>PointRightPublicController.listGiftCardRight<span class="hljs-string">","</span>start<span class="hljs-string">":1761533611771449259,"</span>duration<span class="hljs-string">":19712571,"</span>erro<span class="hljs-string">r":0,"</span>meta<span class="hljs-string">":{"</span>_dd.p.tid<span class="hljs-string">":"</span>68fedeab00000000<span class="hljs-string">","</span>thread.name<span class="hljs-string">":"</span>http-nio-<span class="hljs-number">9602</span>-<span class="hljs-built_in">exec</span>-<span class="hljs-number">11</span><span class="hljs-string">","</span>language<span class="hljs-string">":"</span>jvm<span class="hljs-string">","</span>trace_128_bit_id<span class="hljs-string">":"</span>68fedeab000000003d47a83b00ad5ef0<span class="hljs-string">","</span>component<span class="hljs-string">":"</span>spring-web-controlle<span class="hljs-string">r"},"</span>metrics<span class="hljs-string">":{"</span>_dd.measured<span class="hljs-string">":1,"</span>thread.<span class="hljs-built_in">id</span><span class="hljs-string">":207},"</span><span class="hljs-built_in">type</span><span class="hljs-string">":"</span>we<span class="hljs-string">b"}"</span>,
  <span class="hljs-string">"operation"</span>: <span class="hljs-string">"spring.handler"</span>,
  <span class="hljs-string">"parent_id"</span>: <span class="hljs-string">"6497552948601585817"</span>,
  <span class="hljs-string">"pod_name"</span>: <span class="hljs-string">"user-service-xxx-xxx"</span>,
  <span class="hljs-string">"pod_namespace"</span>: <span class="hljs-string">"xxx-prod"</span>,
  <span class="hljs-string">"region"</span>: <span class="hljs-string">"us-xxx-2"</span>,
  <span class="hljs-string">"remote_ip"</span>: <span class="hljs-string">"172.16.xx.xxx"</span>,
  <span class="hljs-string">"resource"</span>: <span class="hljs-string">"PointRightPublicController.listGiftCardRight"</span>,
  <span class="hljs-string">"service"</span>: <span class="hljs-string">"user-xxx-eks"</span>,
  <span class="hljs-string">"source"</span>: <span class="hljs-string">"ddtrace"</span>,
  <span class="hljs-string">"source_type"</span>: <span class="hljs-string">"web"</span>,
  <span class="hljs-string">"span_id"</span>: <span class="hljs-string">"744311550763894067"</span>,
  <span class="hljs-string">"span_kind"</span>: <span class="hljs-string">"server"</span>,
  <span class="hljs-string">"span_type"</span>: <span class="hljs-string">"local"</span>,
  <span class="hljs-string">"start"</span>: <span class="hljs-number">1761533611771449</span>,
  <span class="hljs-string">"status"</span>: <span class="hljs-string">"error"</span>,
  <span class="hljs-string">"time_us"</span>: <span class="hljs-number">1761533611771449.2</span>,
  <span class="hljs-string">"trace_id"</span>: <span class="hljs-string">"68fedeab000000003d47a83b00ad5ef0"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"zone_id"</span>: <span class="hljs-string">"usw2-xxx"</span>,
  <span class="hljs-string">"error_type"</span>: <span class="hljs-string">"com.xxx.cloud.os.service.exceptions.OsServiceException"</span>
}
</code></pre>
<p>æ–°å»º Pipelines</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee694a50582a487ea1bf843c1169065f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760636&amp;x-signature=ruSNi6hq4wFxOiOH%2BQi%2FitS0Y0w%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©åº”ç”¨æ€§èƒ½ç›‘æ§--&gt;æœåŠ¡é€‰æ‹©--&gt;ä¸€é”®è·å–æ ·æœ¬</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdfd62261cbb485788b973235f738e6f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760636&amp;x-signature=Yh4I3kTexc%2BqkElBNCz9Ck%2BwuDQ%3D" alt="" loading="lazy"/></p>
<p>åˆ¤æ–­å¦‚æœæ˜¯ error_type ç­‰äºcom.xxxxx.cloud.os.service.exceptions.OsServiceException åˆ™ä¸ºä¸šåŠ¡è‡ªå®šä¹‰é”™è¯¯ï¼Œè¿™ä¸ªå¯ä»¥å½’ç±»ä¸ºæ­£å¸¸è¯·æ±‚ï¼Œæ— éœ€åˆ°é”™è¯¯è¿½è¸ªï¼ŒæŠŠ status ä¿®æ­£ä¸º ok å³å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/006e5de3287243d0aa57d13ad3807eac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760636&amp;x-signature=u9RbYbaCbZHBdfTorEhJ4vuBJeo%3D" alt="" loading="lazy"/></p>
<p>å®Œæ•´çš„ Pipelines è§„åˆ™</p>
<pre><code class="hljs language-lua" lang="lua"># <span class="hljs-number">1.</span> æå– JSON åŸå§‹æ•°æ®ä¸­çš„ <span class="hljs-string">"status"</span> å­—æ®µï¼ˆåŸæ–‡ä¸º JSONï¼Œç”¨ _ è¡¨ç¤ºåŸå§‹è¾“å…¥ï¼‰
# è¯­æ³•ï¼šjson(è¾“å…¥æº, JSONè·¯å¾„, æå–åå­—æ®µå)ï¼Œæ­¤å¤„å­—æ®µåä¸è·¯å¾„ä¸€è‡´ï¼ˆå‡ä¸º <span class="hljs-built_in">status</span>ï¼‰
json(_, <span class="hljs-built_in">status</span>, <span class="hljs-built_in">status</span>)

# <span class="hljs-number">2.</span> åˆ¤æ–­ <span class="hljs-built_in">status</span> å­—æ®µæ˜¯å¦ç­‰äº <span class="hljs-string">"ok"</span>ï¼ˆå­—ç¬¦ä¸²æ¯”è¾ƒéœ€å¸¦åŒå¼•å·ï¼‰
<span class="hljs-keyword">if</span> <span class="hljs-built_in">status</span> == <span class="hljs-string">"error"</span> {
    # æ»¡è¶³æ¡ä»¶æ—¶ï¼Œæ·»åŠ æ–°å­—æ®µ kindï¼Œå€¼ä¸º <span class="hljs-number">1</span>ï¼ˆæ•´æ•°ç±»å‹ï¼‰
  json(_, error_type, error_type)
  <span class="hljs-keyword">if</span> error_type == <span class="hljs-string">"com.xxxxx.cloud.os.service.exceptions.OsServiceException"</span> {
  #set_tag(<span class="hljs-built_in">status</span>,<span class="hljs-string">"ok"</span>)
  add_key(<span class="hljs-built_in">status</span>,<span class="hljs-string">"ok"</span>)
  }

}
</code></pre>
<p>å¤„ç†ç»“æœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2083dc61a7d4523b981d76560f8e46f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760636&amp;x-signature=8nVoZqNusFtUNYjRW3nfFhtTpMs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58afdf4a18df4683b3f3e8996623903a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764760636&amp;x-signature=ET0ZODm13HkNohAMPzjSlpIV2D0%3D" alt="" loading="lazy"/></p>
<p>å¦‚ä¸Šæ¼”ç¤ºå¯çœ‹åˆ°ï¼Œè¯¯æŠ¥åˆ°é”™è¯¯è¿½è¸ªçš„é“¾è·¯ï¼Œ å·²ç»ä¿®æ­£å¤„ç†å®Œæˆï¼Œæ­£å¸¸åœ¨é“¾è·¯åˆ—è¡¨å±•ç¤ºäº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++26ï¼šå¼€å¯æ–°çºªå…ƒ]]></title>    <link>https://juejin.cn/post/7576859594359521280</link>    <guid>https://juejin.cn/post/7576859594359521280</guid>    <pubDate>2025-11-26T11:17:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594359521280" data-draft-id="7576676694784720930" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++26ï¼šå¼€å¯æ–°çºªå…ƒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T11:17:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++26ï¼šå¼€å¯æ–°çºªå…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:17:53.000Z" title="Wed Nov 26 2025 11:17:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¯¹äºC++å¼€å‘è€…è€Œè¨€ï¼Œè¯­è¨€çš„è¿›åŒ–ä»æœªåœæ­¢ã€‚C++26ï¼Œä½œä¸ºC++23ä¹‹åçš„ä¸‹ä¸€ä»£æ ‡å‡†ï¼Œå¹¶éä¸€æ¬¡ç®€å•çš„ä¿®è¡¥ï¼Œè€Œæ˜¯ä¸€æ¬¡æ—¨åœ¨é‡å¡‘æˆ‘ä»¬ç¼–å†™é«˜æ€§èƒ½ã€é«˜ç»´æŠ¤æ€§ä»£ç æ–¹å¼çš„é›„å¿ƒå‹ƒå‹ƒçš„å°è¯•ã€‚å®ƒå°†å¹¶å‘ç¼–ç¨‹ã€ç¼–è¯‘æ—¶è®¡ç®—å’Œç±»å‹å®‰å…¨æå‡åˆ°äº†å‰æ‰€æœªæœ‰çš„é«˜åº¦ï¼Œè¿™è¶³ä»¥é¢ è¦†æˆ‘ä»¬é•¿æœŸä»¥æ¥å½¢æˆçš„æŸäº›ç¼–ç¨‹ä¹ æƒ¯å’Œè®¤çŸ¥ã€‚</p>
<h4 data-id="heading-0"><strong>ä¸€ã€ å¹¶å‘ç¼–ç¨‹çš„èŒƒå¼è½¬ç§»ï¼šä»â€œæ‰‹å·¥ç®¡ç†â€åˆ°â€œå£°æ˜å¼æ‰§è¡Œâ€</strong></h4>
<p>ä¼ ç»Ÿçš„C++å¹¶å‘ç¼–ç¨‹ä¾èµ–äºç›´æ¥æ“ä½œ <code>std::thread</code>ã€<code>std::async</code> å’Œ <code>std::mutex</code>ã€‚è¿™ç§æ–¹å¼å¼ºå¤§ä½†ç¹çï¼Œä¸”ææ˜“å‡ºé”™ã€‚C++26 å¼•å…¥çš„ <code>std::execution</code> æ—¨åœ¨å°†å¹¶å‘ç¼–ç¨‹å¸¦å…¥å£°æ˜å¼çš„æ–°æ—¶ä»£ã€‚</p>
<p><strong>æ—§è®¤çŸ¥ï¼š</strong> æˆ‘å¿…é¡»æ‰‹åŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œç®¡ç†ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶å°å¿ƒç¿¼ç¿¼åœ°å¤„ç†çº¿ç¨‹åŒæ­¥ã€‚
<strong>æ–°è®¤çŸ¥ï¼š</strong> æˆ‘åªéœ€å£°æ˜ä»»åŠ¡çš„<strong>æ‰§è¡Œç­–ç•¥</strong>ï¼Œè¿è¡Œæ—¶åº“ä¼šè‡ªåŠ¨ä»¥æœ€ä¼˜æ–¹å¼è°ƒåº¦å’Œæ‰§è¡Œã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šå¹¶è¡Œæ’åºç®—æ³•çš„æ¼”å˜</strong></p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªéœ€è¦å¹¶è¡Œæ’åºçš„å¤§å‘é‡ã€‚</p>
<ul>
<li>
<p><strong>C++17/20 æ–¹å¼ï¼ˆåŸºäº <code>std::async</code>ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; data = { ... }; <span class="hljs-comment">// å¤§é‡æ•°æ®</span>
<span class="hljs-comment">// æ‰‹åŠ¨åˆ†å—å¹¶å¼‚æ­¥æ’åºï¼Œå†åˆå¹¶ï¼Œä»£ç å¤æ‚ä¸”å®¹æ˜“å‡ºé”™</span>
<span class="hljs-keyword">auto</span> future = std::<span class="hljs-built_in">async</span>(std::launch::async, [&amp;data] {
    std::<span class="hljs-built_in">sort</span>(data.<span class="hljs-built_in">begin</span>(), data.<span class="hljs-built_in">end</span>());
});
future.<span class="hljs-built_in">wait</span>();
</code></pre>
</li>
<li>
<p><strong>C++26 æ–¹å¼ï¼ˆåŸºäº <code>std::execution</code>ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;execution&gt;</span></span>
std::vector&lt;<span class="hljs-type">int</span>&gt; data = { ... }; <span class="hljs-comment">// å¤§é‡æ•°æ®</span>

<span class="hljs-comment">// å£°æ˜å¼å¹¶è¡Œï¼šåªéœ€æŒ‡å®šæ‰§è¡Œç­–ç•¥</span>
std::<span class="hljs-built_in">sort</span>(std::execution::par, data.<span class="hljs-built_in">begin</span>(), data.<span class="hljs-built_in">end</span>());
</code></pre>
<p><strong>é¢ è¦†æ€§è§£è¯»ï¼š</strong>
<code>std::execution::par</code> åªæ˜¯ä¸€ä¸ªç­–ç•¥ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>std::execution::par_unseq</code> æ¥å…è®¸å‘é‡åŒ–ï¼ˆä¸SIMDç»“åˆï¼‰ï¼Œæˆ–è€… <code>std::execution::seq</code> è¡¨ç¤ºé¡ºåºæ‰§è¡Œã€‚<strong>ä»£ç çš„æ ¸å¿ƒé€»è¾‘ï¼ˆ<code>std::sort</code>ï¼‰ä¸å¹¶å‘ç­–ç•¥è§£è€¦äº†</strong>ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸å†å…³å¿ƒçº¿ç¨‹æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œè€Œæ˜¯å…³å¿ƒä»»åŠ¡<strong>åº”è¯¥ä»¥ä½•ç§å±æ€§</strong>è¢«æ‰§è¡Œã€‚è¿™ç§æŠ½è±¡æ˜¯é©å‘½æ€§çš„ï¼Œå®ƒè®©å¹¶è¡Œç®—æ³•åƒä¸²è¡Œç®—æ³•ä¸€æ ·æ˜“äºä½¿ç”¨ã€‚</p>
</li>
</ul>
<h4 data-id="heading-1"><strong>äºŒã€ SIMDçš„å¹³æ°‘åŒ–ï¼šä»å†…è”æ±‡ç¼–åˆ°æ ‡å‡†åº“æ³›å‹</strong></h4>
<p>SIMDï¼ˆå•æŒ‡ä»¤å¤šæ•°æ®ï¼‰æ˜¯æ€§èƒ½ä¼˜åŒ–çš„â€œåœ£æ¯â€ï¼Œä½†è¿‡å»é€šå¸¸éœ€è¦é€šè¿‡ç¼–è¯‘å™¨å†…ç½®å‡½æ•°ï¼ˆIntrinsicsï¼‰æˆ–å†…è”æ±‡ç¼–æ¥ä½¿ç”¨ï¼Œä»£ç æ—¢ä¸‘é™‹åˆä¸å¯ç§»æ¤ã€‚</p>
<p><strong>æ—§è®¤çŸ¥ï¼š</strong> è¦æƒ³æè‡´æ€§èƒ½ï¼Œå¿…é¡»æ·±å…¥ç¡¬ä»¶ç‰¹å®šæŒ‡ä»¤ï¼Œç‰ºç‰²ä»£ç å¯è¯»æ€§å’Œå¯ç§»æ¤æ€§ã€‚
<strong>æ–°è®¤çŸ¥ï¼š</strong> æˆ‘å¯ä»¥ç¼–å†™å¯ç§»æ¤çš„ã€æ³›å‹çš„C++ä»£ç ï¼Œå¹¶ç”±æ ‡å‡†åº“åœ¨åº•å±‚è‡ªåŠ¨æ˜ å°„ä¸ºæœ€ä¼˜çš„SIMDæŒ‡ä»¤ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šæ•°ç»„å…ƒç´ ä¹˜æ³•çš„æ€§èƒ½é£è·ƒ</strong></p>
<ul>
<li>
<p><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">multiply_arrays</span><span class="hljs-params">(<span class="hljs-type">float</span>* a, <span class="hljs-type">float</span>* b, <span class="hljs-type">float</span>* result, <span class="hljs-type">size_t</span> n)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) {
        result[i] = a[i] * b[i];
    }
}
<span class="hljs-comment">// ç¼–è¯‘å™¨å¯èƒ½è‡ªåŠ¨å‘é‡åŒ–ï¼Œä½†å¯¹äºå¤æ‚é€»è¾‘ï¼Œå¾€å¾€éœ€è¦æ‰‹åŠ¨æç¤ºæˆ–ä½¿ç”¨Intrinsicsã€‚</span>
</code></pre>
</li>
<li>
<p><strong>C++26 SIMD æ–¹å¼ï¼ˆåŸºäºææ¡ˆ <code>std::simd</code>ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;experimental/simd&gt;</span> <span class="hljs-comment">// é¢„è®¡åœ¨C++26ä¸­è¿›å…¥std::</span></span>
<span class="hljs-keyword">namespace</span> stdx = std::experimental;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">multiply_arrays</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">float</span>* a, <span class="hljs-type">const</span> <span class="hljs-type">float</span>* b, <span class="hljs-type">float</span>* result, <span class="hljs-type">size_t</span> n)</span> </span>{
    <span class="hljs-keyword">using</span> V = stdx::native_simd&lt;<span class="hljs-type">float</span>&gt;; <span class="hljs-comment">// è‡ªåŠ¨é€‰æ‹©å½“å‰å¹³å°æœ€åˆé€‚çš„å‘é‡å®½åº¦</span>
    <span class="hljs-type">size_t</span> vec_size = V::<span class="hljs-built_in">size</span>();
    
    <span class="hljs-comment">// å¤„ç†å®Œæ•´å‘é‡éƒ¨åˆ†</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i + vec_size &lt;= n; i += vec_size) {
        <span class="hljs-function">V <span class="hljs-title">va</span><span class="hljs-params">(a + i, stdx::vector_aligned)</span></span>;
        <span class="hljs-function">V <span class="hljs-title">vb</span><span class="hljs-params">(b + i, stdx::vector_aligned)</span></span>;
        V vresult = va * vb; <span class="hljs-comment">// è¿ç®—ç¬¦é‡è½½ï¼Œç›´è§‚çš„é€å…ƒç´ ä¹˜æ³•</span>
        vresult.<span class="hljs-built_in">copy_to</span>(result + i, stdx::vector_aligned);
    }
    <span class="hljs-comment">// ... å¤„ç†å°¾éƒ¨å‰©ä½™å…ƒç´ </span>
}
</code></pre>
<p><strong>é¢ è¦†æ€§è§£è¯»ï¼š</strong>
è¿™æ®µä»£ç æ˜¯<strong>å¹³å°æ— å…³çš„</strong>ã€‚<code>stdx::native_simd&lt;float&gt;</code> åœ¨x86 AVX2å¹³å°ä¸Šå¯èƒ½æ˜¯8ä¸ªfloatï¼Œåœ¨ARM NEONä¸Šå¯èƒ½æ˜¯4ä¸ªï¼Œä½†ä»£ç æ— éœ€ä¿®æ”¹ã€‚æˆ‘ä»¬ä½¿ç”¨ç†Ÿæ‚‰çš„C++è¿ç®—ç¬¦ï¼ˆ<code>*</code>ï¼‰æ¥æ“ä½œæ•´ä¸ªå‘é‡ï¼Œè€Œä¸æ˜¯ç¹ççš„ <code>_mm256_load_ps</code> å’Œ <code>_mm256_mul_ps</code>ã€‚è¿™æå¤§åœ°é™ä½äº†ä½¿ç”¨SIMDçš„é—¨æ§›ï¼Œä½¿å¾—æ•°æ®å¹¶è¡Œç¼–ç¨‹æˆä¸ºå¹¿å¤§C++å¼€å‘è€…çš„å¸¸è§„æ­¦å™¨ï¼Œè€Œä¸ä»…ä»…æ˜¯å°‘æ•°ä¸“å®¶çš„ç§˜æŠ€ã€‚</p>
</li>
</ul>
<h4 data-id="heading-2"><strong>ä¸‰ã€ ç¼–è¯‘æ—¶ä¸–ç•Œçš„è¾¹ç•Œæ‰©å¼ ï¼š<code>constexpr</code> çš„è¿›ä¸€æ­¥èƒœåˆ©</strong></h4>
<p>C++çš„ <code>constexpr</code> ä¸€ç›´åœ¨å°†è¿è¡Œæ—¶è®¡ç®—æ¨å‘ç¼–è¯‘æ—¶ã€‚C++26ç»§ç»­è¿™ä¸€è¶‹åŠ¿ï¼Œå…è®¸åœ¨ <code>constexpr</code> ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œæ›´å¤šæ“ä½œã€‚</p>
<p><strong>æ—§è®¤çŸ¥ï¼š</strong> ç¼–è¯‘æ—¶è®¡ç®—ä¸»è¦ç”¨äºç®€å•çš„æ•°å­¦è¿ç®—å’Œç±»å‹ä½“æ“ã€‚
<strong>æ–°è®¤çŸ¥ï¼š</strong> æ›´å¤æ‚çš„ç®—æ³•ã€ç”šè‡³éƒ¨åˆ†æ ‡å‡†åº“å®¹å™¨å’Œç®—æ³•éƒ½å¯ä»¥åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œå®ç°â€œé›¶æˆæœ¬æŠ½è±¡â€çš„ç»ˆæå½¢æ€ã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šç¼–è¯‘æ—¶ç”ŸæˆæŸ¥æ‰¾è¡¨</strong></p>
<ul>
<li><strong>ä¼ ç»Ÿæ–¹å¼ï¼š</strong> åœ¨è¿è¡Œæ—¶åˆå§‹åŒ–ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼Œæˆ–ä½¿ç”¨æ¨¡æ¿å…ƒç¼–ç¨‹ä½†ä»£ç æå…¶å¤æ‚ã€‚</li>
<li><strong>C++26 æ–¹å¼ï¼š</strong>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">constexpr</span> std::array&lt;<span class="hljs-type">int</span>, 256&gt; <span class="hljs-title">generate_sine_lookup_table</span><span class="hljs-params">()</span> </span>{
    std::array&lt;<span class="hljs-type">int</span>, 256&gt; table{};
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; table.<span class="hljs-built_in">size</span>(); ++i) {
        <span class="hljs-type">double</span> angle = <span class="hljs-number">2</span> * <span class="hljs-number">3.1415926535</span> * i / table.<span class="hljs-built_in">size</span>();
        table[i] = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(std::<span class="hljs-built_in">sin</span>(angle) * <span class="hljs-number">1024</span>); <span class="hljs-comment">// å®šç‚¹æ•°</span>
    }
    <span class="hljs-keyword">return</span> table;
}

<span class="hljs-comment">// æ­¤è¡¨åœ¨ç¼–è¯‘æœŸå°±å·²è®¡ç®—å¹¶åµŒå…¥äºŒè¿›åˆ¶ä»£ç ï¼Œè¿è¡Œæ—¶é›¶å¼€é”€ï¼</span>
<span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">auto</span> SIN_LUT = <span class="hljs-built_in">generate_sine_lookup_table</span>();

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">fast_sine_approximation</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> value = SIN_LUT[<span class="hljs-number">128</span>]; <span class="hljs-comment">// ç›´æ¥è®¿é—®ï¼Œæ— è®¡ç®—æˆæœ¬</span>
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<strong>é¢ è¦†æ€§è§£è¯»ï¼š</strong>
æ³¨æ„ï¼Œ<code>std::array</code> çš„ææ„å’Œ <code>std::sin</code> ç­‰å‡½æ•°ç°åœ¨éƒ½å¯èƒ½æˆä¸º <code>constexpr</code>ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ç¼–è¯‘æœŸæ¨¡æ‹Ÿå‡ ä¹å®Œæ•´çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œå°†é‚£äº›ç¡®å®šæ€§çš„ã€è€—æ—¶çš„åˆå§‹åŒ–å·¥ä½œå½»åº•ä»è¿è¡Œæ—¶å‰¥ç¦»ã€‚è¿™å¯¹äºåµŒå…¥å¼ç³»ç»Ÿã€æ¸¸æˆå¼•æ“å’Œé«˜æ€§èƒ½è®¡ç®—è‡³å…³é‡è¦ï¼Œå®ƒæ”¹å˜äº†æˆ‘ä»¬åœ¨â€œå¼€å‘æ—¶â€å’Œâ€œè¿è¡Œæ—¶â€ä¹‹é—´åˆ†é…è®¡ç®—è´Ÿè½½çš„æ€ç»´æ¨¡å¼ã€‚</li>
</ul>
<h4 data-id="heading-3"><strong>å››ã€ å†…å­˜å®‰å…¨ä¸å¹¶å‘å®‰å…¨çš„æ–°å·¥å…·</strong></h4>
<p>è™½ç„¶C++ä¸ä¼šå˜æˆRustï¼Œä½†C++26é€šè¿‡åº“ç»„ä»¶ç§¯æåº”å¯¹å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å†…å­˜å®‰å…¨é—®é¢˜ã€‚</p>
<p><strong>æ—§è®¤çŸ¥ï¼š</strong> æ— é”ç¼–ç¨‹æ˜¯æ·±æ¸Šï¼Œæ‰‹åŠ¨ç®¡ç†å¤šçº¿ç¨‹ä¸‹çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸææ˜“å¯¼è‡´use-after-freeã€‚
<strong>æ–°è®¤çŸ¥ï¼š</strong> æ ‡å‡†åº“æä¾›äº†å¦‚é£é™©æŒ‡é’ˆå’ŒRCUç­‰é«˜çº§èŒƒå¼ï¼Œå¯ä»¥å®‰å…¨ä¸”é«˜æ•ˆåœ°ç®¡ç†å¹¶å‘å¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p><strong>ä»£ç ç¤ºä¾‹ï¼šä½¿ç”¨é£é™©æŒ‡é’ˆè¿›è¡Œå®‰å…¨è¯»å–</strong></p>
<p>ï¼ˆæ­¤å¤„ä¸ºæ¦‚å¿µæ€§ä»£ç ï¼ŒåŸºäºææ¡ˆ <code>std::hazard_pointer</code>ï¼‰</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ¦‚å¿µæ€§ä»£ç ï¼Œå±•ç¤ºæ€æƒ³</span>
std::atomic&lt;MyObject*&gt; global_obj{<span class="hljs-literal">nullptr</span>};
std::hazard_pointer_domain hp_domain;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">reader</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. è·å–ä¸€ä¸ªé£é™©æŒ‡é’ˆï¼Œå¹¶å°†å…¶ä¸å½“å‰çº¿ç¨‹å…³è”</span>
    <span class="hljs-keyword">auto</span> hp = hp_domain.<span class="hljs-built_in">acquire</span>();
    
    MyObject* obj = <span class="hljs-literal">nullptr</span>;
    <span class="hljs-keyword">do</span> {
        <span class="hljs-comment">// 2. å®‰å…¨åœ°åŠ è½½åŸå­æŒ‡é’ˆ</span>
        obj = global_obj.<span class="hljs-built_in">load</span>(std::memory_order_acquire);
        <span class="hljs-comment">// 3. å°†åŠ è½½çš„æŒ‡é’ˆâ€œä¿æŠ¤â€èµ·æ¥ï¼Œå‘ŠçŸ¥ç³»ç»Ÿæˆ‘æ­£åœ¨ä½¿ç”¨å®ƒ</span>
        hp.<span class="hljs-built_in">protect</span>(obj);
        <span class="hljs-comment">// 4. å†æ¬¡æ£€æŸ¥æŒ‡é’ˆæ˜¯å¦å·²è¢«å…¶ä»–å†™è€…ä¿®æ”¹</span>
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ï¼Œåˆ™è¯´æ˜æˆ‘ä»¬æˆåŠŸä¿æŠ¤äº†objï¼Œå¯ä»¥å®‰å…¨ä½¿ç”¨</span>
    } <span class="hljs-keyword">while</span> (obj != global_obj.<span class="hljs-built_in">load</span>(std::memory_order_acquire));
    
    <span class="hljs-comment">// 5. å®‰å…¨åœ°ä½¿ç”¨objï¼Œæ­¤æ—¶å³ä½¿æœ‰å†™è€…åˆ é™¤äº†æ—§å¯¹è±¡ï¼Œä¹Ÿä¸ä¼šå›æ”¶å®ƒ</span>
    obj-&gt;<span class="hljs-built_in">do_something</span>();
    
    <span class="hljs-comment">// 6. é‡Šæ”¾é£é™©æŒ‡é’ˆ</span>
    hp.<span class="hljs-built_in">release</span>();
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">writer</span><span class="hljs-params">()</span> </span>{
    MyObject* new_obj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">MyObject</span>(...);
    MyObject* old_obj = global_obj.<span class="hljs-built_in">exchange</span>(new_obj, std::memory_order_acq_rel);
    
    <span class="hljs-comment">// å°è¯•å›æ”¶æ—§å¯¹è±¡ã€‚å¦‚æœæ—§å¯¹è±¡æ­£è¢«ä»»ä½•é£é™©æŒ‡é’ˆä¿æŠ¤ï¼Œåˆ™å»¶è¿Ÿå›æ”¶</span>
    hp_domain.<span class="hljs-built_in">retire</span>(old_obj, [](MyObject* ptr) { <span class="hljs-keyword">delete</span> ptr; });
}
</code></pre>
<p><strong>é¢ è¦†æ€§è§£è¯»ï¼š</strong>
é£é™©æŒ‡é’ˆå’ŒRCUç­‰æœºåˆ¶ï¼Œå°†æˆ‘ä»¬ä»ç¹çä¸”å®¹æ˜“å‡ºé”™çš„â€œæ‰‹åŠ¨å¼•ç”¨è®¡æ•°â€æˆ–â€œå®Œå…¨æ— é”â€ä¸­è§£æ”¾å‡ºæ¥ã€‚å®ƒä»¬æä¾›äº†ä¸€ç§<strong>åä½œå¼</strong>çš„å†…å­˜å›æ”¶åè®®ï¼Œè¯»è€…é€šè¿‡é£é™©æŒ‡é’ˆå®£å‘Šâ€œæˆ‘æ­£åœ¨ä½¿ç”¨æ­¤å¯¹è±¡â€ï¼Œå†™è€…åˆ™è´Ÿè´£åœ¨ç¡®è®¤æ— äººä½¿ç”¨æ—¶å†è¿›è¡Œå›æ”¶ã€‚è¿™ä¸ºæ„å»ºé«˜æ€§èƒ½ã€æ— é”çš„å¹¶å‘æ•°æ®ç»“æ„æä¾›äº†æ ‡å‡†åŒ–ã€æ›´å®‰å…¨çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-4"><strong>æ€»ç»“ï¼šè®¤çŸ¥çš„é¢ è¦†ä¸æ¼”è¿›</strong></h4>
<p>C++26 çš„å˜é©æ˜¯æ·±å±‚æ¬¡çš„ï¼š</p>
<ol>
<li><strong>å¹¶å‘æŠ½è±¡åŒ–ï¼š</strong> æˆ‘ä»¬ä»å…³å¿ƒçº¿ç¨‹ï¼ˆ<code>std::thread</code>ï¼‰è½¬å‘å…³å¿ƒä»»åŠ¡å’Œç­–ç•¥ï¼ˆ<code>std::execution</code>ï¼‰ã€‚</li>
<li><strong>æ•°æ®å¹¶è¡Œå¹³æ°‘åŒ–ï¼š</strong> SIMDä»ç¡¬ä»¶ç‰¹å®šæŠ€å·§å˜æˆäº†å¯ç§»æ¤çš„æ³›å‹ç¼–ç¨‹å·¥å…·ã€‚</li>
<li><strong>ç¼–è¯‘æ—¶è®¡ç®—å¸¸æ€åŒ–ï¼š</strong> ç¼–è¯‘æœŸä¸è¿è¡Œæ—¶çš„ç•Œé™è¿›ä¸€æ­¥æ¨¡ç³Šï¼Œæˆ‘ä»¬å¯ä»¥å°†æ›´å¤šå·¥ä½œé™æ€åŒ–ã€‚</li>
<li><strong>å†…å­˜å®‰å…¨ç³»ç»ŸåŒ–ï¼š</strong> æ ‡å‡†åº“å¼€å§‹æä¾›é«˜çº§æ„ä»¶ï¼Œæ¥ç³»ç»Ÿæ€§åœ°è§£å†³å¹¶å‘ç¯å¢ƒä¸‹çš„å†…å­˜ç®¡ç†éš¾é¢˜ã€‚</li>
</ol>
<p>è¿™äº›å˜åŒ–è¦æ±‚æˆ‘ä»¬ä¸æ–­æ›´æ–°è‡ªå·±çš„çŸ¥è¯†åº“å’Œæ€ç»´æ–¹å¼ã€‚C++26 ä¸æ˜¯åœ¨åŸæœ‰è·¯å¾„ä¸Šå°ä¿®å°è¡¥ï¼Œè€Œæ˜¯åœ¨ä¸ºæˆ‘ä»¬é“ºå°±ä¸€æ¡é€šå¾€æ›´é«˜æ€§èƒ½ã€æ›´é«˜ç”Ÿäº§åŠ›å’Œæ›´é«˜ä»£ç è´¨é‡çš„æ–°é“è·¯ã€‚å®ƒæé†’æˆ‘ä»¬ï¼ŒC++çš„å“²å­¦ä¾ç„¶æ˜¯â€œä¿¡ä»»ç¨‹åºå‘˜ï¼Œä½†ä¸ç»™ç¨‹åºå‘˜ä¸å¿…è¦çš„è´Ÿæ‹…â€ï¼Œè€Œå¦‚ä»Šï¼Œå®ƒæ­£é€šè¿‡æ›´å¼ºå¤§çš„æŠ½è±¡æ¥å…‘ç°è¿™ä¸€æ‰¿è¯ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ç¨‹åºæ‰§è¡Œèµ·ç‚¹ä¸æ˜¯mainï¼šé¢ è¦†ä½ è®¤çŸ¥çš„çœŸç›¸]]></title>    <link>https://juejin.cn/post/7576861477266620435</link>    <guid>https://juejin.cn/post/7576861477266620435</guid>    <pubDate>2025-11-26T11:24:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576861477266620435" data-draft-id="7576838552472092715" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ç¨‹åºæ‰§è¡Œèµ·ç‚¹ä¸æ˜¯mainï¼šé¢ è¦†ä½ è®¤çŸ¥çš„çœŸç›¸"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T11:24:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ç¨‹åºæ‰§è¡Œèµ·ç‚¹ä¸æ˜¯mainï¼šé¢ è¦†ä½ è®¤çŸ¥çš„çœŸç›¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:24:08.000Z" title="Wed Nov 26 2025 11:24:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½ ä»¥ä¸ºmainå‡½æ•°æ˜¯èµ·ç‚¹ï¼ŸC++çš„è¿è¡Œæœºåˆ¶è¿œæ¯”è¿™å¤æ‚ï¼</p>
</blockquote>
<p>åœ¨C++å­¦ä¹ ä¹‹è·¯ä¸Šï¼Œæˆ‘ä»¬éƒ½è¢«æ•™å¯¼è¿‡ä¸€ä¸ªâ€œåŸºæœ¬äº‹å®â€ï¼šç¨‹åºä»mainå‡½æ•°å¼€å§‹æ‰§è¡Œã€‚ä½†ä»Šå¤©ï¼Œæˆ‘è¦å¸¦ä½ æ­å¼€è¿™ä¸ªå¹¿ä¸ºæµä¼ çš„è¯¯è§£èƒŒåçš„çœŸç›¸ã€‚</p>
<h2 data-id="heading-0">ä¸€ä¸ªä»¤äººæƒŠè®¶çš„å®éªŒ</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•ä¾‹å­æ¥è§‚å¯ŸC++ç¨‹åºçš„å®é™…å¯åŠ¨è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LifecycleTracker</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">LifecycleTracker</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name) : <span class="hljs-built_in">name</span>(name) {
        cout &lt;&lt; <span class="hljs-string">"ã€æ„é€ ã€‘"</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">" - æ­¤æ—¶mainå°šæœªå¼€å§‹"</span> &lt;&lt; endl;
    }
    
    ~<span class="hljs-built_in">LifecycleTracker</span>() {
        cout &lt;&lt; <span class="hljs-string">"ã€ææ„ã€‘"</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">" - æ­¤æ—¶mainå·²ç»ç»“æŸ"</span> &lt;&lt; endl;
    }

<span class="hljs-keyword">private</span>:
    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* name;
};

<span class="hljs-comment">// å…¨å±€å¯¹è±¡</span>
<span class="hljs-function">LifecycleTracker <span class="hljs-title">global_obj</span><span class="hljs-params">(<span class="hljs-string">"å…¨å±€å¯¹è±¡"</span>)</span></span>;

<span class="hljs-comment">// å…¨å±€å˜é‡åˆå§‹åŒ–</span>
<span class="hljs-type">int</span> global_var = []() {
    cout &lt;&lt; <span class="hljs-string">"ã€åˆå§‹åŒ–ã€‘å…¨å±€å˜é‡ - åœ¨mainä¹‹å‰"</span> &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;
}();

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    cout &lt;&lt; <span class="hljs-string">"ã€è¿›å…¥ã€‘mainå‡½æ•°å¼€å§‹æ‰§è¡Œ"</span> &lt;&lt; endl;
    <span class="hljs-function">LifecycleTracker <span class="hljs-title">local_obj</span><span class="hljs-params">(<span class="hljs-string">"å±€éƒ¨å¯¹è±¡"</span>)</span></span>;
    cout &lt;&lt; <span class="hljs-string">"ã€é€€å‡ºã€‘mainå‡½æ•°å³å°†ç»“æŸ"</span> &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-css" lang="css">ã€åˆå§‹åŒ–ã€‘å…¨å±€å˜é‡ - åœ¨<span class="hljs-selector-tag">main</span>ä¹‹å‰
ã€æ„é€ ã€‘å…¨å±€å¯¹è±¡ - æ­¤æ—¶<span class="hljs-selector-tag">main</span>å°šæœªå¼€å§‹
ã€è¿›å…¥ã€‘<span class="hljs-selector-tag">main</span>å‡½æ•°å¼€å§‹æ‰§è¡Œ
ã€æ„é€ ã€‘å±€éƒ¨å¯¹è±¡ - åœ¨<span class="hljs-selector-tag">main</span>å†…éƒ¨
ã€é€€å‡ºã€‘<span class="hljs-selector-tag">main</span>å‡½æ•°å³å°†ç»“æŸ
ã€ææ„ã€‘å±€éƒ¨å¯¹è±¡ - åœ¨<span class="hljs-selector-tag">main</span>ä¹‹å
ã€ææ„ã€‘å…¨å±€å¯¹è±¡ - æ­¤æ—¶<span class="hljs-selector-tag">main</span>å·²ç»ç»“æŸ
</code></pre>
<p>çœ‹åˆ°è¯æ®äº†å—ï¼Ÿåœ¨mainå‡½æ•°ç™»åœºå‰ï¼ŒC++è¿è¡Œæ—¶å·²ç»åšäº†å¤§é‡å‡†å¤‡å·¥ä½œï¼</p>
<h2 data-id="heading-1">C++ç¨‹åºçš„çœŸå®å¯åŠ¨æµç¨‹</h2>
<h3 data-id="heading-2">ç¬¬ä¸€é˜¶æ®µï¼šæ“ä½œç³»ç»Ÿå‡†å¤‡</h3>
<p>å½“ä½ è¿è¡Œç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿé¦–å…ˆæ¥ç®¡æ§åˆ¶æƒï¼š</p>
<ol>
<li><strong>åŠ è½½å¯æ‰§è¡Œæ–‡ä»¶</strong>åˆ°å†…å­˜</li>
<li><strong>åˆ›å»ºè¿›ç¨‹å’Œçº¿ç¨‹</strong>ç»“æ„</li>
<li><strong>åˆ†é…å†…å­˜ç©ºé—´</strong>ï¼ˆæ ˆã€å †ç­‰ï¼‰</li>
<li><strong>åŠ è½½ä¾èµ–åº“</strong>ï¼ˆåŠ¨æ€é“¾æ¥åº“ï¼‰</li>
<li><strong>ä¼ é€’ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°</strong></li>
</ol>
<p>è¿™å°±åƒç”µå½±å¼€æ‹å‰ï¼Œåˆ¶ç‰‡æ–¹è¦å‡†å¤‡å¥½åœºåœ°ã€è®¾å¤‡å’Œäººå‘˜ã€‚</p>
<h3 data-id="heading-3">ç¬¬äºŒé˜¶æ®µï¼šC++è¿è¡Œæ—¶åˆå§‹åŒ–</h3>
<p>æ“ä½œç³»ç»Ÿå®ŒæˆåŸºç¡€å‡†å¤‡åï¼Œå°†æ§åˆ¶æƒäº¤ç»™C++è¿è¡Œæ—¶ç¯å¢ƒã€‚è¿™ä¸ªé˜¶æ®µåŒ…æ‹¬ï¼š</p>
<ul>
<li>åˆå§‹åŒ–Cæ ‡å‡†åº“</li>
<li>è®¾ç½®å †å†…å­˜ç®¡ç†å™¨</li>
<li>å‡†å¤‡I/Oç³»ç»Ÿ</li>
<li><strong>åˆå§‹åŒ–å…¨å±€å’Œé™æ€å˜é‡</strong></li>
<li><strong>è°ƒç”¨å…¨å±€å¯¹è±¡çš„æ„é€ å‡½æ•°</strong></li>
<li>æ•´ç†å‘½ä»¤è¡Œå‚æ•°</li>
</ul>
<p>åªæœ‰åœ¨æ‰€æœ‰è¿™äº›å‡†å¤‡å·¥ä½œå®Œæˆåï¼Œè¿è¡Œæ—¶ç¯å¢ƒæ‰ä¼šè°ƒç”¨æˆ‘ä»¬ç†Ÿæ‚‰çš„mainå‡½æ•°ã€‚</p>
<h3 data-id="heading-4">ç¬¬ä¸‰é˜¶æ®µï¼šmainå‡½æ•°æ‰§è¡Œ</h3>
<p>ç°åœ¨æ‰è½®åˆ°æˆ‘ä»¬çš„â€œä¸»è§’â€ç™»åœºï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ä½ çš„ä»£ç åœ¨è¿™é‡Œæ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// æˆ–è€…å¸¦å‚æ•°ç‰ˆæœ¬</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span>* argv[])</span> </span>{
    <span class="hljs-comment">// ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>é‡è¦çš„æ˜¯ç†è§£ï¼š<strong>mainå‡½æ•°æ˜¯è¢«C++è¿è¡Œæ—¶è°ƒç”¨çš„</strong>ï¼Œè€Œä¸æ˜¯ç¨‹åºçš„çœŸæ­£èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-5">ç¬¬å››é˜¶æ®µï¼šç¨‹åºæ”¶å°¾å·¥ä½œ</h3>
<p>mainå‡½æ•°è¿”å›åï¼Œç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸè¿˜æœªç»“æŸï¼š</p>
<ol>
<li>æ¥æ”¶mainçš„è¿”å›å€¼</li>
<li><strong>è°ƒç”¨å…¨å±€å¯¹è±¡çš„ææ„å‡½æ•°</strong></li>
<li>æ¸…ç†èµ„æº</li>
<li>å‘æ“ä½œç³»ç»Ÿè¿”å›é€€å‡ºç </li>
<li>ç»“æŸè¿›ç¨‹</li>
</ol>
<h2 data-id="heading-6">æ·±å…¥ç†è§£åˆå§‹åŒ–é¡ºåºé—®é¢˜</h2>
<p>ç†è§£C++å¯åŠ¨æœºåˆ¶å¯¹è§£å†³å®é™…é—®é¢˜è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å…¨å±€å¯¹è±¡æ—¶ã€‚</p>
<h3 data-id="heading-7">å•æ–‡ä»¶å†…çš„åˆå§‹åŒ–é¡ºåº</h3>
<p>åœ¨åŒä¸€ä¸ªæºæ–‡ä»¶ä¸­ï¼Œåˆå§‹åŒ–é¡ºåºæ˜¯ç¡®å®šçš„ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;

<span class="hljs-type">int</span> a = []() {
    cout &lt;&lt; <span class="hljs-string">"åˆå§‹åŒ–a"</span> &lt;&lt; endl;
    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
}();

<span class="hljs-type">int</span> b = []() {
    cout &lt;&lt; <span class="hljs-string">"åˆå§‹åŒ–bï¼Œa="</span> &lt;&lt; a &lt;&lt; endl;  <span class="hljs-comment">// aå·²åˆå§‹åŒ–</span>
    <span class="hljs-keyword">return</span> a + <span class="hljs-number">1</span>;
}();

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">MyClass</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* name) {
        cout &lt;&lt; <span class="hljs-string">"æ„é€ "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">"ï¼Œb="</span> &lt;&lt; b &lt;&lt; endl;
    }
};

<span class="hljs-function">MyClass <span class="hljs-title">obj1</span><span class="hljs-params">(<span class="hljs-string">"å¯¹è±¡1"</span>)</span></span>;  <span class="hljs-comment">// bå·²åˆå§‹åŒ–</span>
<span class="hljs-function">MyClass <span class="hljs-title">obj2</span><span class="hljs-params">(<span class="hljs-string">"å¯¹è±¡2"</span>)</span></span>;  <span class="hljs-comment">// æŒ‰é¡ºåºæ„é€ </span>
</code></pre>
<p>è¾“å‡ºå°†æ˜¯å¯é¢„æµ‹çš„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹åŒ–a
åˆå§‹åŒ–bï¼Œ<span class="hljs-attr">a</span>=<span class="hljs-number">1</span>
æ„é€ å¯¹è±¡1ï¼Œ<span class="hljs-attr">b</span>=<span class="hljs-number">2</span>
æ„é€ å¯¹è±¡2ï¼Œ<span class="hljs-attr">b</span>=<span class="hljs-number">2</span>
</code></pre>
<h3 data-id="heading-8">å¤šæ–‡ä»¶é—´çš„åˆå§‹åŒ–é™·é˜±</h3>
<p>é—®é¢˜å‡ºç°åœ¨å¤šä¸ªæºæ–‡ä»¶ä¹‹é—´ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// file1.cpp</span>
<span class="hljs-keyword">extern</span> <span class="hljs-type">int</span> external_var;  <span class="hljs-comment">// åœ¨file2.cppä¸­å®šä¹‰</span>
<span class="hljs-type">int</span> my_var = external_var + <span class="hljs-number">10</span>;  <span class="hljs-comment">// å±é™©ï¼external_varå¯èƒ½æœªåˆå§‹åŒ–</span>

<span class="hljs-comment">// file2.cpp</span>
<span class="hljs-keyword">extern</span> <span class="hljs-type">int</span> my_var;  <span class="hljs-comment">// åœ¨file1.cppä¸­å®šä¹‰  </span>
<span class="hljs-type">int</span> external_var = my_var * <span class="hljs-number">2</span>;  <span class="hljs-comment">// åŒæ ·å±é™©ï¼</span>
</code></pre>
<p>è¿™ç§<strong>é™æ€åˆå§‹åŒ–é¡ºåºé—®é¢˜</strong>æ˜¯C++ä¸­ç»å…¸çš„é™·é˜±ä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-9">è§£å†³æ–¹æ¡ˆï¼šå»¶è¿Ÿåˆå§‹åŒ–</h3>
<p>ä½¿ç”¨å‡½æ•°å†…çš„é™æ€å˜é‡å¯ä»¥ä¼˜é›…åœ°è§£å†³è¿™ä¸ªé—®é¢˜ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®‰å…¨çš„å…¨å±€å˜é‡è®¿é—®</span>
<span class="hljs-function"><span class="hljs-type">int</span>&amp; <span class="hljs-title">getConfig</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">static</span> <span class="hljs-type">int</span> config = <span class="hljs-built_in">initializeConfig</span>();  <span class="hljs-comment">// é¦–æ¬¡è°ƒç”¨æ—¶åˆå§‹åŒ–</span>
    <span class="hljs-keyword">return</span> config;
}

<span class="hljs-comment">// å•ä¾‹æ¨¡å¼ç¡®ä¿åˆå§‹åŒ–é¡ºåº</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Database</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">static</span> Database&amp; <span class="hljs-title">getInstance</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">static</span> Database instance;  <span class="hljs-comment">// çº¿ç¨‹å®‰å…¨çš„å»¶è¿Ÿåˆå§‹åŒ–</span>
        <span class="hljs-keyword">return</span> instance;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">connect</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// æ•°æ®åº“è¿æ¥æ“ä½œ</span>
    }
    
<span class="hljs-keyword">private</span>:
    <span class="hljs-built_in">Database</span>() {
        <span class="hljs-comment">// æ„é€ å‡½æ•°</span>
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">businessLogic</span><span class="hljs-params">()</span> </span>{
    Database::<span class="hljs-built_in">getInstance</span>().<span class="hljs-built_in">connect</span>();  <span class="hljs-comment">// é¦–æ¬¡ä½¿ç”¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–</span>
}
</code></pre>
<h2 data-id="heading-10">å®é™…åº”ç”¨ä»·å€¼</h2>
<p>ç†è§£C++å¯åŠ¨è¿‡ç¨‹ä¸ä»…ä»…æ˜¯ç†è®ºçŸ¥è¯†ï¼Œå®ƒåœ¨å®é™…å¼€å‘ä¸­æå…¶æœ‰ç”¨ï¼š</p>
<h3 data-id="heading-11">1. è°ƒè¯•å¤æ‚é—®é¢˜</h3>
<p>å½“é‡åˆ°ç¨‹åºå¯åŠ¨æ—¶å´©æºƒï¼Œä½†mainå‡½æ•°ä¸­æ‰¾ä¸åˆ°åŸå› æ—¶ï¼Œé—®é¢˜å¯èƒ½å‡ºåœ¨å…¨å±€å¯¹è±¡çš„æ„é€ å‡½æ•°ä¸­ã€‚</p>
<h3 data-id="heading-12">2. èµ„æºç®¡ç†</h3>
<p>çŸ¥é“ææ„å‡½æ•°çš„è°ƒç”¨æ—¶æœºï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ­£ç¡®ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸã€‚</p>
<h3 data-id="heading-13">3. æ¶æ„è®¾è®¡</h3>
<p>åœ¨è®¾è®¡åº“æ¡†æ¶æ—¶ï¼Œç»å¸¸éœ€è¦åœ¨mainæ‰§è¡Œå‰åè‡ªåŠ¨æ‰§è¡Œåˆå§‹åŒ–/æ¸…ç†ä»£ç ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LibraryInitializer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">LibraryInitializer</span>() {
        <span class="hljs-comment">// åº“çš„è‡ªåŠ¨åˆå§‹åŒ–</span>
        <span class="hljs-built_in">initializeLibrary</span>();
    }
    
    ~<span class="hljs-built_in">LibraryInitializer</span>() {
        <span class="hljs-comment">// åº“çš„è‡ªåŠ¨æ¸…ç†</span>
        <span class="hljs-built_in">cleanupLibrary</span>();
    }
};

<span class="hljs-comment">// å…¨å±€å®ä¾‹ç¡®ä¿è‡ªåŠ¨åˆå§‹åŒ–</span>
LibraryInitializer library_init;
</code></pre>
<h3 data-id="heading-14">4. æ€§èƒ½ä¼˜åŒ–</h3>
<p>é¿å…åœ¨å…¨å±€å¯¹è±¡æ„é€ å‡½æ•°ä¸­è¿›è¡Œå¤æ‚è®¡ç®—ï¼Œè¿™ä¼šæ‹–æ…¢ç¨‹åºå¯åŠ¨é€Ÿåº¦ã€‚</p>
<h2 data-id="heading-15">é«˜çº§æŠ€å·§ï¼šæ§åˆ¶å¯åŠ¨è¿‡ç¨‹</h2>
<h3 data-id="heading-16">åœ¨mainä¹‹å‰æ‰§è¡Œä»£ç </h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–¹æ³•1ï¼šå…¨å±€å¯¹è±¡æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">StartupManager</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">StartupManager</span>() {
        <span class="hljs-built_in">setupLogging</span>();
        <span class="hljs-built_in">loadConfiguration</span>();
    }
};
StartupManager startup;  <span class="hljs-comment">// åœ¨mainå‰è‡ªåŠ¨åˆå§‹åŒ–</span>

<span class="hljs-comment">// æ–¹æ³•2ï¼šç¼–è¯‘å™¨ç‰¹å®šå±æ€§ï¼ˆGCC/Clangï¼‰</span>
__attribute__((constructor))
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">before_main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// åœ¨mainä¹‹å‰æ‰§è¡Œ</span>
}
</code></pre>
<h3 data-id="heading-17">åœ¨mainä¹‹åæ‰§è¡Œä»£ç </h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cstdlib&gt;</span></span>

<span class="hljs-comment">// æ–¹æ³•1ï¼šatexitå‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// æ¸…ç†å·¥ä½œ</span>
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">atexit</span>(cleanup);  <span class="hljs-comment">// æ³¨å†Œé€€å‡ºæ—¶æ‰§è¡Œçš„å‡½æ•°</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// æ–¹æ³•2ï¼šå…¨å±€å¯¹è±¡ææ„å‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ShutdownManager</span> {
<span class="hljs-keyword">public</span>:
    ~<span class="hljs-built_in">ShutdownManager</span>() {
        <span class="hljs-built_in">saveState</span>();
        <span class="hljs-built_in">closeConnections</span>();
    }
};
ShutdownManager shutdown;  <span class="hljs-comment">// åœ¨mainåè‡ªåŠ¨æ¸…ç†</span>
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>ç°åœ¨ä½ åº”è¯¥æ˜ç™½äº†ï¼š</p>
<ul>
<li><strong>mainå‡½æ•°ä¸æ˜¯èµ·ç‚¹</strong>ï¼šå®ƒæ˜¯è¢«C++è¿è¡Œæ—¶è°ƒç”¨çš„</li>
<li><strong>å…¨å±€å¯¹è±¡åœ¨mainä¹‹å‰æ„é€ </strong>ï¼šè¿™æ˜¯åˆå§‹åŒ–é¡ºåºé—®é¢˜çš„æ ¹æº</li>
<li><strong>ç¨‹åºåœ¨mainä¹‹åç»§ç»­è¿è¡Œ</strong>ï¼šå®Œæˆæ¸…ç†å·¥ä½œåæ‰çœŸæ­£ç»“æŸ</li>
<li><strong>ç†è§£è¿™äº›æœºåˆ¶è‡³å…³é‡è¦</strong>ï¼šå¯¹è°ƒè¯•ã€è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–éƒ½æœ‰å¸®åŠ©</li>
</ul>
<p>C++ç¨‹åºçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸæ›´åƒæ˜¯ä¸€éƒ¨ç²¾å¿ƒç¼–æ’çš„æˆå‰§ï¼šmainå‡½æ•°æ˜¯ä¸»è§’çš„ç™»åœºï¼Œä½†å‰åéƒ½æœ‰é‡è¦çš„åºå¹•å’Œå°¾å£°ã€‚</p>
<p>ä¸‹æ¬¡æœ‰äººé—®ä½ "C++ç¨‹åºä»å“ªé‡Œå¼€å§‹"ï¼Œä½ å¯ä»¥è‡ªä¿¡åœ°ç»™å‡ºå®Œæ•´ç­”æ¡ˆäº†ï¼è¿™ä¸ä»…ä¼šè®©ä½ åœ¨æŠ€æœ¯è®¨è®ºä¸­è„±é¢–è€Œå‡ºï¼Œæ›´èƒ½å¸®åŠ©ä½ å†™å‡ºæ›´å¥å£®ã€å¯é çš„C++ä»£ç ã€‚</p>
<p>è®°ä½ï¼ŒçœŸæ­£çš„é«˜æ‰‹ä¸ä»…çŸ¥é“æ€ä¹ˆç”¨è¯­è¨€ç‰¹æ€§ï¼Œæ›´ç†è§£å®ƒä»¬èƒŒåçš„è¿è¡Œæœºåˆ¶ã€‚è¿™æ­£æ˜¯åŒºåˆ†æ™®é€šç¨‹åºå‘˜å’Œä¸“å®¶çš„å…³é”®æ‰€åœ¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Qoder CLI ä¸ OneCode å¹³å°æ·±åº¦æ•´åˆæŠ€æœ¯å®è·µï¼šCLIå§”æ‰˜é©±åŠ¨çš„å¼€å‘èŒƒå¼é©æ–°]]></title>    <link>https://juejin.cn/post/7576838552472125483</link>    <guid>https://juejin.cn/post/7576838552472125483</guid>    <pubDate>2025-11-26T11:26:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838552472125483" data-draft-id="7576861477266636819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Qoder CLI ä¸ OneCode å¹³å°æ·±åº¦æ•´åˆæŠ€æœ¯å®è·µï¼šCLIå§”æ‰˜é©±åŠ¨çš„å¼€å‘èŒƒå¼é©æ–°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T11:26:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Qoder CLI ä¸ OneCode å¹³å°æ·±åº¦æ•´åˆæŠ€æœ¯å®è·µï¼šCLIå§”æ‰˜é©±åŠ¨çš„å¼€å‘èŒƒå¼é©æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T11:26:57.000Z" title="Wed Nov 26 2025 11:26:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½è¾…åŠ©ç¼–ç¨‹æŠ€æœ¯è¿…çŒ›å‘å±•çš„å½“ä¸‹ï¼Œå¼€å‘è€…å¯¹æ™ºèƒ½åŒ–ç¼–ç å¹³å°çš„ä¾èµ–ç¨‹åº¦æŒç»­åŠ æ·±ã€‚Qoder CLIä½œä¸ºä¸€æ¬¾å…ˆè¿›çš„AIé©±åŠ¨å‹ç»ˆç«¯ç¼–ç å·¥å…·ï¼Œä¸ä»…å…·å¤‡å¼ºå¤§çš„å‘½ä»¤è¡Œç¼–ç èƒ½åŠ›ï¼Œæ›´é€šè¿‡åˆ›æ–°çš„å§”æ‰˜æ¨¡å¼ä¸OneCodeå¹³å°å®ç°æ·±åº¦ååŒï¼Œæ¨åŠ¨OneCodeå¼€å‘èŒƒå¼äº§ç”Ÿæ ¹æœ¬æ€§å˜é©ã€‚æœ¬æ–‡èšç„¦CLIå§”æ‰˜æ¨¡å¼çš„æ ¸å¿ƒä»·å€¼ï¼Œç»“åˆOneCodeå¯è§†åŒ–IDEçš„æœ€æ–°ç‰¹æ€§ï¼Œç³»ç»Ÿé˜è¿°äºŒè€…æ•´åˆçš„æŠ€æœ¯è·¯å¾„ä¸å®è·µä»·å€¼ã€‚</p>
<p>ä¸€ã€æ ¸å¿ƒæ¦‚å¿µè§£æ</p>
<p>1.1 ä»€ä¹ˆæ˜¯Qoder CLIï¼Ÿ</p>
<p>Qoder CLIæ˜¯åŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯æ„å»ºçš„ç»ˆç«¯ç¼–ç å·¥å…·ï¼Œæ”¯æŒå¼€å‘è€…åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸­å®Œæˆå¤æ‚ç¼–ç ä»»åŠ¡ï¼Œæ— éœ€è„±ç¦»ç»ˆç«¯å³å¯å®ç°ä»£ç ç”Ÿæˆã€é‡æ„åŠå·¥ä½œæµè‡ªåŠ¨åŒ–ã€‚å…¶æ ¸å¿ƒç‰¹æ€§ä»¥â€œå§”æ‰˜èƒ½åŠ›â€ä¸ºæ ¸å¿ƒæ„å»ºï¼š</p>
<ul>
<li>
<p>æ™ºèƒ½ä»»åŠ¡å§”æ‰˜ï¼šæ¥æ”¶è‡ªç„¶è¯­è¨€æŒ‡ä»¤åï¼Œèƒ½å¤Ÿè‡ªåŠ¨å®Œæˆä»»åŠ¡æ‹†è§£ä¸æ‰§è¡Œæ–¹æ¡ˆç”Ÿæˆï¼Œæ”¯æŒå¤æ‚éœ€æ±‚çš„ç«¯åˆ°ç«¯è½åœ°</p>
</li>
<li>
<p>é¡¹ç›®æ„ŸçŸ¥èƒ½åŠ›ï¼šæ·±åº¦è§£æOneCodeé¡¹ç›®ç»“æ„ã€ä¾èµ–å…³ç³»åŠç¼–ç è§„èŒƒï¼Œç¡®ä¿ç”Ÿæˆå†…å®¹ä¸å¹³å°çš„å…¼å®¹æ€§</p>
</li>
<li>
<p>MCPåè®®æ‰©å±•ï¼šé€šè¿‡æ¨¡å‹æ§åˆ¶åè®®ï¼ˆModel Control Protocolï¼‰ä¸OneCodeå¹³å°å»ºç«‹ç¨³å®šé€šä¿¡é“¾è·¯ï¼Œå®ç°æŒ‡ä»¤ä¸æ•°æ®çš„åŒå‘æµè½¬</p>
</li>
<li>
<p>å¼‚æ­¥ä»»åŠ¡ç®¡ç†ï¼šæ”¯æŒå°†å¤§è§„æ¨¡ä»£ç ç”Ÿæˆã€é¡¹ç›®é‡æ„ç­‰è€—æ—¶ä»»åŠ¡å§”æ‰˜è‡³äº‘ç«¯æ‰§è¡Œï¼Œæœ‰æ•ˆé‡Šæ”¾æœ¬åœ°è®¡ç®—èµ„æº</p>
</li>
</ul>
<p>1.2 ä»€ä¹ˆæ˜¯OneCodeå¹³å°ï¼Ÿ</p>
<p>OneCodeå¹³å°æ˜¯é¢å‘ä¼ä¸šçº§åº”ç”¨å¼€å‘çš„ç°ä»£åŒ–å¼€å‘æ¡†æ¶ï¼Œä»¥â€œä½ä»£ç å¼€å‘+AIèƒ½åŠ›å¢å¼ºâ€ä¸ºæ ¸å¿ƒå®šä½ï¼Œæ—¨åœ¨ç®€åŒ–å¤æ‚é¡¹ç›®çš„æ„å»ºä¸ç»´æŠ¤æµç¨‹ã€‚è¯¥å¹³å°æ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>ç»Ÿä¸€ä»£ç ç®¡ç†ï¼šé›†ä¸­ç®¡æ§å¤šé¡¹ç›®ä»£ç åº“ï¼Œä¿éšœå›¢é˜Ÿç¼–ç è§„èŒƒçš„ä¸€è‡´æ€§</p>
</li>
<li>
<p>æ¨¡å—åŒ–æ¶æ„ï¼šæ”¯æŒç»„ä»¶åŒ–å¼€å‘ä¸å¤ç”¨æœºåˆ¶ï¼Œé™ä½ç³»ç»Ÿè€¦åˆåº¦</p>
</li>
<li>
<p>è‡ªåŠ¨åŒ–éƒ¨ç½²æµæ°´çº¿ï¼šåŸç”Ÿæ”¯æŒCI/CDæµç¨‹é›†æˆï¼Œå®ç°ä»å¼€å‘åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ— ç¼è¡”æ¥</p>
</li>
<li>
<p>å¯è§†åŒ–IDEæ–°ç‰¹æ€§ï¼šæœ€æ–°ç‰ˆæœ¬æ¨å‡ºä»»åŠ¡è§„åˆ’ã€å›¾ç”Ÿä»£ç å¤šAgentæ¨¡å¼ã€æ·±åº¦AIé›†æˆä»£ç†ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œå¼ºåŒ–äººå·¥æ™ºèƒ½ä¸å¼€å‘æµç¨‹çš„æ·±åº¦èåˆ</p>
</li>
</ul>
<p>äºŒã€æ•´åˆå‡†å¤‡å·¥ä½œ</p>
<p>åœ¨å¯åŠ¨æ•´åˆå·¥ä½œå‰ï¼Œéœ€å®ŒæˆåŸºç¡€ç¯å¢ƒé…ç½®ï¼Œç¡®ä¿Qoder CLIä¸OneCodeå¹³å°ä¹‹é—´çš„é€šä¿¡é“¾è·¯ç•…é€šã€‚æ ¸å¿ƒå‰ææ¡ä»¶å¦‚ä¸‹ï¼š</p>
<ol>
<li>
<p>å·²å®ŒæˆQoder CLIå·¥å…·çš„å®‰è£…éƒ¨ç½²åŠæˆæƒé…ç½®</p>
</li>
<li>
<p>å·²å®ŒæˆOneCodeå¹³å°éƒ¨ç½²ï¼Œå¹¶è·å–ç›¸åº”çš„è®¿é—®æƒé™</p>
</li>
<li>
<p>å…·å¤‡åŸºç¡€å‘½ä»¤è¡Œæ“ä½œèƒ½åŠ›åŠOneCodeé¡¹ç›®ç®¡ç†æƒé™</p>
</li>
</ol>
<p>2.1 å®‰è£…ä¸é…ç½®Qoder CLI</p>
<p>é€šè¿‡å®˜æ–¹æ¨èçš„æ ‡å‡†åŒ–æ–¹å¼å®ŒæˆQoder CLIçš„å®‰è£…éƒ¨ç½²ï¼Œéœ€ç¡®ä¿æ‰€å®‰è£…ç‰ˆæœ¬æ”¯æŒMCPåè®®åŠå§”æ‰˜æ¨¡å¼ï¼š</p>
<h2 data-id="heading-0">ä¸‰ç§ä¸»æµå®‰è£…æ–¹å¼å¯é€‰</h2>
<h2 data-id="heading-1">1. Curlè„šæœ¬å®‰è£…ï¼ˆé€šç”¨è·¨å¹³å°ï¼‰</h2>
<p>curl -fsSL <a href="https://link.juejin.cn?target=https%3A%2F%2Fqoder.com%2Finstall" target="_blank" title="https://qoder.com/install" ref="nofollow noopener noreferrer">qoder.com/install</a> | bash</p>
<h2 data-id="heading-2">2. Homebrewå®‰è£…ï¼ˆmacOS/Linuxç³»ç»Ÿï¼‰</h2>
<p>brew install qoderai/qoder/qodercli --cask</p>
<h2 data-id="heading-3">3. NPMå®‰è£…ï¼ˆNode.jsç¯å¢ƒä¾èµ–ï¼‰</h2>
<p>npm install -g @qoder-ai/qodercli</p>
<h2 data-id="heading-4">éªŒè¯å®‰è£…ç»“æœåŠç‰ˆæœ¬å…¼å®¹æ€§ï¼ˆéœ€v0.3.0åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒOneCodeå§”æ‰˜æ¨¡å¼ï¼‰</h2>
<p>qodercli --version</p>
<h2 data-id="heading-5">é¢„æœŸè¾“å‡ºï¼šQoder CLI v0.3.5 (æ”¯æŒOneCodeå§”æ‰˜æ¨¡å¼)</h2>
<p>2.2 é…ç½®OneCodeå¹³å°ç¯å¢ƒ</p>
<p>OneCodeå¹³å°éœ€é€šè¿‡å®˜æ–¹æ ‡å‡†åŒ–å·¥å…·é“¾å®Œæˆå®‰è£…é…ç½®ï¼Œè¯¥å·¥å…·é“¾æ”¯æŒWindowsã€macOSã€Linuxå…¨ç³»ç»Ÿï¼Œä¸”æ— éœ€ä¾èµ–Nodeç¯å¢ƒã€‚æ ¸å¿ƒæµç¨‹åˆ†ä¸ºCLIå·¥å…·å®‰è£…ã€APIå¯†é’¥é…ç½®ã€é¡¹ç›®åˆå§‹åŒ–ä¸‰æ­¥ï¼Œå…·ä½“æ“ä½œä»¥å®˜æ–¹æœ€æ–°æ–‡æ¡£ä¸ºå‡†ï¼šOneCodeå¹³å°æ¨èé€šè¿‡Giteeä»“åº“ä¸‹è½½æºç ç¼–è¯‘å®‰è£…ï¼Œè¯¥æ–¹å¼å¯è·å–æœ€æ–°ç¨³å®šç‰ˆæœ¬ï¼Œæ”¯æŒæŒ‰éœ€å®šåˆ¶åŠŸèƒ½ï¼Œä¸”é€‚é…Windowsã€macOSã€Linuxå…¨ç³»ç»Ÿã€‚æ ¸å¿ƒæµç¨‹åˆ†ä¸ºæºç è·å–ã€ç¼–è¯‘æ„å»ºã€ç¯å¢ƒé…ç½®ä¸‰æ­¥ï¼Œéœ€æå‰å®‰è£…Gitä¸Mavenï¼ˆ3.6+ï¼‰ä¾èµ–ï¼š</p>
<h2 data-id="heading-6">ä¸€ã€OneCode CLIå·¥å…·å®‰è£…ï¼ˆå¤šç³»ç»Ÿé€‚é…ï¼‰</h2>
<h2 data-id="heading-7">1. Linux/macOS/WSLç³»ç»Ÿï¼ˆæ¨èï¼‰</h2>
<p>curl -fsSL <a href="https://link.juejin.cn?target=https%3A%2F%2Fonecode-official.oss-cn-hangzhou.aliyuncs.com%2Finstall.sh" target="_blank" title="https://onecode-official.oss-cn-hangzhou.aliyuncs.com/install.sh" ref="nofollow noopener noreferrer">onecode-official.oss-cn-hangzhou.aliyuncs.com/install.sh</a> | bash</p>
<h2 data-id="heading-8">2. macOSç³»ç»Ÿï¼ˆHomebrewè¾…åŠ©å®‰è£…ï¼‰</h2>
<p>brew tap onecode-dev/offical
brew install onecode-cli</p>
<h2 data-id="heading-9">3. Windowsç³»ç»Ÿï¼ˆPowerShellç®¡ç†å‘˜æ¨¡å¼ï¼‰</h2>
<p>Set-ExecutionPolicy Bypass -Scope Process -Force;
iwr -useb <a href="https://link.juejin.cn?target=https%3A%2F%2Fonecode-official.oss-cn-hangzhou.aliyuncs.com%2Finstall.ps1" target="_blank" title="https://onecode-official.oss-cn-hangzhou.aliyuncs.com/install.ps1" ref="nofollow noopener noreferrer">onecode-official.oss-cn-hangzhou.aliyuncs.com/install.ps1</a> | iex</p>
<h2 data-id="heading-10">4. ç‰ˆæœ¬éªŒè¯ï¼ˆéœ€v2.0.0åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒMCPåè®®ä¸Qoderé›†æˆï¼‰</h2>
<p>onecode --version</p>
<h2 data-id="heading-11">é¢„æœŸè¾“å‡ºï¼šOneCode CLI v2.1.5 (Build: 20250610) - æ”¯æŒMCPv2åè®®</h2>
<h2 data-id="heading-12">äºŒã€APIå¯†é’¥è·å–ä¸é…ç½®</h2>
<h2 data-id="heading-13">1. ç™»å½•OneCodeå®˜æ–¹æ§åˆ¶å°ï¼ˆäº‘ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.onecode.cn%25EF%25BC%259B%25E7%25A7%2581%25E6%259C%2589%25E9%2583%25A8%25E7%25BD%25B2%25E7%2589%2588%25E9%259C%2580%25E6%259B%25BF%25E6%258D%25A2%25E4%25B8%25BA%25E4%25BC%2581%25E4%25B8%259A%25E5%2586%2585%25E7%25BD%2591%25E5%259C%25B0%25E5%259D%2580%25EF%25BC%2589" target="_blank" title="https://console.onecode.cn%EF%BC%9B%E7%A7%81%E6%9C%89%E9%83%A8%E7%BD%B2%E7%89%88%E9%9C%80%E6%9B%BF%E6%8D%A2%E4%B8%BA%E4%BC%81%E4%B8%9A%E5%86%85%E7%BD%91%E5%9C%B0%E5%9D%80%EF%BC%89" ref="nofollow noopener noreferrer">console.onecode.cnï¼›ç§æœ‰éƒ¨ç½²ç‰ˆéœ€æ›¿æ¢ä¸ºä¼ä¸šå†…ç½‘åœ°å€ï¼‰</a></h2>
<h2 data-id="heading-14">2. è¿›å…¥ã€Œä¸ªäººä¸­å¿ƒã€â†’ã€Œå¼€å‘è€…è®¾ç½®ã€â†’ã€ŒAPIå¯†é’¥ç®¡ç†ã€</h2>
<h2 data-id="heading-15">3. ç‚¹å‡»ã€Œæ–°å»ºå¯†é’¥ã€ï¼Œå¤‡æ³¨ç”¨é€”ä¸ºã€ŒQoder CLIé›†æˆã€ï¼Œå¤åˆ¶ç”Ÿæˆçš„å¯†é’¥ä¸²ï¼ˆä»…æ˜¾ç¤ºä¸€æ¬¡ï¼Œéœ€å¦¥å–„ä¿å­˜ï¼‰</h2>
<h2 data-id="heading-16">4. é…ç½®å…¨å±€APIå¯†é’¥ï¼ˆé¿å…æ¯æ¬¡å‘½ä»¤é‡å¤è¾“å…¥ï¼‰</h2>
<p>onecode config set global.api-key "your-onecode-api-key"</p>
<h2 data-id="heading-17">ä¸‰ã€OneCodeé¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒéªŒè¯</h2>
<h2 data-id="heading-18">1. åˆå§‹åŒ–è¯¾ç¨‹è¡¨ç®¡ç†é¡¹ç›®ï¼ˆæŒ‡å®šæ¡†æ¶ä¸ç‰ˆæœ¬ï¼‰</h2>
<p>onecode project create my-course-schedule <br/>
--framework springboot <br/>
--version 2.7.0 <br/>
--description "é«˜æ ¡è¯¾ç¨‹è¡¨ç®¡ç†ç³»ç»Ÿ"</p>
<h2 data-id="heading-19">2. è¿›å…¥é¡¹ç›®å·¥ä½œç›®å½•</h2>
<p>cd my-course-schedule</p>
<h2 data-id="heading-20">3. åŠ è½½é¡¹ç›®ä¾èµ–ï¼ˆè‡ªåŠ¨åŒæ­¥OneCodeå¹³å°ç»„ä»¶ï¼‰</h2>
<p>onecode deps sync</p>
<h2 data-id="heading-21">4. å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡ï¼ˆé»˜è®¤8080ç«¯å£ï¼Œå†²çªå¯é€šè¿‡--portæŒ‡å®šï¼‰</h2>
<p>onecode server start --port 8080</p>
<h2 data-id="heading-22">é¢„æœŸè¾“å‡ºï¼šOneCode Development Server [RUNNING]</h2>
<h2 data-id="heading-23">Access Console: <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fonecode-console" target="_blank" title="http://localhost:8080/onecode-console" ref="nofollow noopener noreferrer">http://localhost:8080/onecode-console</a></h2>
<h2 data-id="heading-24">Service Status: HEALTHY</h2>
<h2 data-id="heading-25">5. ç¯å¢ƒè¿é€šæ€§æµ‹è¯•ï¼ˆéªŒè¯ä¸Qoder CLIé€šä¿¡é“¾è·¯ï¼‰</h2>
<p>onecode mcp test --target qoder</p>
<h2 data-id="heading-26">é¢„æœŸè¾“å‡ºï¼šMCP Link Established - Qoder CLI Compatible</h2>
<h2 data-id="heading-27">ä¸€ã€å‰ç½®ä¾èµ–å‡†å¤‡ï¼ˆå¿…è£…ï¼‰</h2>
<h2 data-id="heading-28">1. å®‰è£…Gitï¼ˆç‰ˆæœ¬2.30+ï¼Œç”¨äºæºç å…‹éš†ï¼‰</h2>
<h2 data-id="heading-29">Linux</h2>
<p>sudo apt-get install git -y</p>
<h2 data-id="heading-30">macOS</h2>
<p>brew install git</p>
<h2 data-id="heading-31">Windowsï¼šä¸‹è½½å®‰è£…åŒ… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgit-scm.com%2Fdownload%2Fwin" target="_blank" title="https://git-scm.com/download/win" ref="nofollow noopener noreferrer">git-scm.com/download/wiâ€¦</a></h2>
<h2 data-id="heading-32">2. å®‰è£…Mavenï¼ˆç‰ˆæœ¬3.6.3+ï¼Œç”¨äºæºç ç¼–è¯‘ï¼‰</h2>
<h2 data-id="heading-33">Linux/macOS</h2>
<p>wget <a href="https://link.juejin.cn?target=https%3A%2F%2Farchive.apache.org%2Fdist%2Fmaven%2Fmaven-3%2F3.9.6%2Fbinaries%2Fapache-maven-3.9.6-bin.tar.gz" target="_blank" title="https://archive.apache.org/dist/maven/maven-3/3.9.6/binaries/apache-maven-3.9.6-bin.tar.gz" ref="nofollow noopener noreferrer">archive.apache.org/dist/maven/â€¦</a>
tar -zxvf apache-maven-3.9.6-bin.tar.gz
sudo mv apache-maven-3.9.6 /usr/local/</p>
<h2 data-id="heading-34">é…ç½®Mavenç¯å¢ƒå˜é‡ï¼ˆLinux/macOSï¼‰</h2>
<p>echo "export MAVEN_HOME=/usr/local/apache-maven-3.9.6" &gt;&gt; ~/.bashrc
echo "export PATH=$MAVEN_HOME/bin:$PATH" &gt;&gt; ~/.bashrc
source ~/.bashrc</p>
<h2 data-id="heading-35">Windowsï¼šä¸‹è½½å®‰è£…åŒ… <a href="https://link.juejin.cn?target=https%3A%2F%2Fmaven.apache.org%2Fdownload.cgi%25EF%25BC%258C%25E9%2585%258D%25E7%25BD%25AE%25E7%25B3%25BB%25E7%25BB%259F%25E7%258E%25AF%25E5%25A2%2583%25E5%258F%2598%25E9%2587%258FMAVEN_HOME" target="_blank" title="https://maven.apache.org/download.cgi%EF%BC%8C%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8FMAVEN_HOME" ref="nofollow noopener noreferrer">maven.apache.org/download.cgâ€¦</a></h2>
<h2 data-id="heading-36">éªŒè¯ä¾èµ–</h2>
<p>git --version &amp;&amp; mvn --version</p>
<h2 data-id="heading-37">é¢„æœŸè¾“å‡ºï¼šGitç‰ˆæœ¬â‰¥2.30ï¼ŒMavenç‰ˆæœ¬â‰¥3.6.3</h2>
<h2 data-id="heading-38">äºŒã€ä»Giteeä¸‹è½½OneCodeæºç å¹¶ç¼–è¯‘</h2>
<h2 data-id="heading-39">1. å…‹éš†å®˜æ–¹æºç ä»“åº“ï¼ˆç¨³å®šåˆ†æ”¯ï¼šrelease-2.1.xï¼‰</h2>
<p>git clone -b release-2.1.x <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fonecode-dev%2Fonecode-platform.git" target="_blank" title="https://gitee.com/onecode-dev/onecode-platform.git" ref="nofollow noopener noreferrer">gitee.com/onecode-devâ€¦</a>
cd onecode-platform</p>
<h2 data-id="heading-40">2. æºç ç¼–è¯‘ï¼ˆè·³è¿‡æµ‹è¯•åŠ é€Ÿæ„å»ºï¼Œä¾èµ–Java 8/11ï¼‰</h2>
<h2 data-id="heading-41">ç¼–è¯‘æ ¸å¿ƒCLIæ¨¡å—åŠå¹³å°æœåŠ¡</h2>
<p>mvn clean package -DskipTests -pl onecode-cli,onecode-server -am</p>
<h2 data-id="heading-42">3. éªŒè¯ç¼–è¯‘ç»“æœ</h2>
<h2 data-id="heading-43">ç¼–è¯‘äº§ç‰©è·¯å¾„ï¼šonecode-cli/target/onecode-cli-2.1.5-bin.tar.gz</h2>
<p>ls onecode-cli/target | grep "onecode-cli-.*-bin.tar.gz"</p>
<h2 data-id="heading-44">é¢„æœŸè¾“å‡ºï¼šonecode-cli-2.1.5-bin.tar.gz</h2>
<h2 data-id="heading-45">ä¸‰ã€OneCode å®‰è£…ä¸ç¯å¢ƒé…ç½®</h2>
<h2 data-id="heading-46">1. ä¸‹è½½ç¼–è¯‘onecode  é¡¹ç›®</h2>
<h2 data-id="heading-47">2. é…ç½®å…¨å±€å·¥ç¨‹</h2>
<h2 data-id="heading-48">3. åˆå§‹åŒ–è¯¾ç¨‹è¡¨ç®¡ç†é¡¹ç›®ï¼ˆè¡”æ¥åç»­æ•´åˆå®è·µï¼‰</h2>
<p>onecode project create my-course-schedule <br/>
--framework springboot <br/>
--version 2.7.0 <br/>
--description "é«˜æ ¡è¯¾ç¨‹è¡¨ç®¡ç†ç³»ç»Ÿ"</p>
<h2 data-id="heading-49">4. å¯åŠ¨æœ¬åœ°æœåŠ¡éªŒè¯ç¯å¢ƒ</h2>
<p>cd my-course-schedule
onecode server start --port 8080</p>
<h2 data-id="heading-50">é¢„æœŸè¾“å‡ºï¼šOneCode Development Server [RUNNING]</h2>
<h2 data-id="heading-51">Access Console: <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fonecode-console" target="_blank" title="http://localhost:8080/onecode-console" ref="nofollow noopener noreferrer">http://localhost:8080/onecode-console</a></h2>
<h2 data-id="heading-52">Service Status: HEALTHY</h2>
<p>ä¸‰ã€CLIå§”æ‰˜æ¨¡å¼å¸¦æ¥çš„OneCodeå¼€å‘èŒƒå¼é©å‘½</p>
<p>åœ¨ä¼ ç»ŸOneCodeå¼€å‘æµç¨‹ä¸­ï¼Œå¼€å‘è€…éœ€åœ¨å¯è§†åŒ–IDEä¸ä»£ç ç¼–è¾‘å™¨ä¹‹é—´é¢‘ç¹åˆ‡æ¢ï¼Œå®Œæˆâ€œéœ€æ±‚æ‹†è§£-ç»„ä»¶è®¾è®¡-ä»£ç ç¼–å†™-é…ç½®éƒ¨ç½²â€çš„å…¨æµç¨‹æ“ä½œã€‚Qoder CLIçš„å§”æ‰˜æ¨¡å¼å½»åº•æ”¹å˜è¿™ä¸€å·¥ä½œæ¨¡å¼ï¼Œæ„å»ºâ€œæŒ‡ä»¤è¾“å…¥-AIæ‰§è¡Œ-ç»“æœåé¦ˆâ€çš„å…¨æ–°å¼€å‘é“¾è·¯ï¼Œæ ¸å¿ƒå˜é©ä½“ç°åœ¨ä»¥ä¸‹å››ä¸ªç»´åº¦ï¼š</p>
<p>3.1 å¼€å‘æµç¨‹ï¼šä»â€œæ‰‹åŠ¨æ“ä½œâ€åˆ°â€œæŒ‡ä»¤é©±åŠ¨â€çš„è·ƒè¿</p>
<p>åœ¨ä¼ ç»Ÿå¼€å‘æ¨¡å¼ä¸‹ï¼Œå¼€å‘ä¸€æ¬¾è¯¾ç¨‹è¡¨åº”ç”¨éœ€ç»å†â€œåˆ›å»ºå®ä½“ç±»-è®¾è®¡æœåŠ¡å±‚-ç¼–å†™å‰ç«¯ç»„ä»¶-é…ç½®æ•°æ®åº“æ˜ å°„-éƒ¨ç½²æµ‹è¯•â€ç­‰12é¡¹æ‰‹åŠ¨æ“ä½œæ­¥éª¤ï¼Œæ€»è€—æ—¶çº¦2ä¸ªå·¥ä½œæ—¥ã€‚é‡‡ç”¨CLIå§”æ‰˜æ¨¡å¼åï¼Œå¼€å‘è€…ä»…éœ€è¾“å…¥æ ¸å¿ƒéœ€æ±‚æŒ‡ä»¤ï¼Œåç»­ç¼–ç ä¸é…ç½®å·¥ä½œå¯å…¨éƒ¨å§”æ‰˜Qoder CLIå®Œæˆï¼š</p>
<h2 data-id="heading-53">å§”æ‰˜Qoder CLIå®Œæˆè¯¾ç¨‹è¡¨åº”ç”¨å¼€å‘</h2>
<p>qodercli delegate onecode "åœ¨å½“å‰OneCodeé¡¹ç›®ä¸­æ„å»ºè¯¾ç¨‹è¡¨åº”ç”¨ï¼Œéœ€æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p>
<ol>
<li>æ•°æ®å®ä½“åŒ…å«è¯¾ç¨‹IDã€è¯¾ç¨‹åç§°ã€æˆè¯¾æ•™å¸ˆã€ä¸Šè¯¾æ—¶é—´ã€æ•™å®¤ä½ç½®ç­‰æ ¸å¿ƒå­—æ®µ</li>
<li>æœåŠ¡å±‚å®ç°æ•°æ®çš„å¢åˆ æ”¹æŸ¥æ“ä½œåŠæŒ‰æ—¶é—´æ®µæŸ¥è¯¢åŠŸèƒ½</li>
<li>ä»£ç éœ€ç¬¦åˆOneCode @DBFieldæ³¨è§£è§„èŒƒåŠå¹³å°ç¼–ç é£æ ¼</li>
<li>è‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“åˆå§‹åŒ–è„šæœ¬" --async</li>
</ol>
<h2 data-id="heading-54">æŸ¥çœ‹å§”æ‰˜ä»»åŠ¡æ‰§è¡Œè¿›åº¦</h2>
<p>qodercli task status</p>
<h2 data-id="heading-55">é¢„æœŸè¾“å‡ºï¼šTask-123 | æ‰§è¡Œä¸­(65%) | å·²å®Œæˆï¼šå®ä½“ç±»ç”Ÿæˆã€æœåŠ¡å±‚ç¼–ç  | å¾…å®Œæˆï¼šå‰ç«¯ç»„ä»¶å¼€å‘ã€æ•°æ®åº“è„šæœ¬ç”Ÿæˆ</h2>
<p>è¯¥æ¨¡å¼å¯å°†å¼€å‘å‘¨æœŸç¼©çŸ­è‡³30åˆ†é’Ÿä»¥å†…ï¼Œæ¨åŠ¨å¼€å‘è€…ä»ä¼ ç»Ÿçš„â€œä»£ç æ‰§è¡Œè€…â€å‘â€œä¸šåŠ¡éœ€æ±‚å®šä¹‰è€…â€è½¬å˜ï¼Œä½¿å…¶èƒ½å¤Ÿèšç„¦æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è®¾è®¡è€Œéé‡å¤ç¼–ç å·¥ä½œã€‚</p>
<p>3.2 ä»»åŠ¡åä½œï¼šæœ¬åœ°ç»ˆç«¯ä¸äº‘ç«¯èƒ½åŠ›çš„æ— ç¼ååŒ</p>
<p>Qoder CLIçš„Quest Remoteè¿œç¨‹å§”æ´¾åŠŸèƒ½ï¼Œå¯ä¸ºOneCodeå¼€å‘æä¾›äº‘ç«¯ç®—åŠ›æ”¯æ’‘ã€‚é’ˆå¯¹å¤§å‹é¡¹ç›®çš„ä»£ç ç”Ÿæˆã€æ¶æ„é‡æ„ç­‰è€—æ—¶ä»»åŠ¡ï¼Œå¯ç›´æ¥å§”æ‰˜è‡³äº‘ç«¯æ²™ç®±ç¯å¢ƒæ‰§è¡Œï¼Œæœ¬åœ°ç»ˆç«¯ä»…éœ€æ¥æ”¶æ‰§è¡Œç»“æœï¼Œå®ç°â€œè½»é‡è¾“å…¥-é‡åº¦æ‰§è¡Œâ€çš„ååŒæ¨¡å¼ï¼š</p>
<h2 data-id="heading-56">å¯ç”¨è¿œç¨‹å§”æ´¾æ¨¡å¼ï¼ˆé€‚ç”¨äºå¤§å‹OneCodeé¡¹ç›®ï¼‰</h2>
<p>qodercli config set delegate.mode remote</p>
<h2 data-id="heading-57">å§”æ‰˜äº‘ç«¯æ‰§è¡Œå¤§è§„æ¨¡ä»£ç é‡æ„ä»»åŠ¡</h2>
<p>qodercli delegate onecode "å¯¹ç°æœ‰è¯¾ç¨‹è¡¨åº”ç”¨è¿›è¡Œæ¶æ„é‡æ„ï¼Œå…·ä½“è¦æ±‚ï¼š</p>
<ol>
<li>ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢è¯­å¥æ€§èƒ½ï¼Œæ·»åŠ å­—æ®µç´¢å¼•æ³¨è§£</li>
<li>å°†å†—ä½™çš„CourseServiceç±»æ‹†åˆ†ä¸ºæŸ¥è¯¢æœåŠ¡ä¸æ“ä½œæœåŠ¡</li>
<li>é‡æ„åä»£ç éœ€ç¬¦åˆOneCodeæ¨¡å—åŒ–è§„èŒƒ" --priority high</li>
</ol>
<h2 data-id="heading-58">ä»»åŠ¡æ‰§è¡Œå®Œæˆåè‡ªåŠ¨åŒæ­¥è‡³æœ¬åœ°OneCodeé¡¹ç›®</h2>
<p>qodercli task sync Task-123</p>
<p>è¯¥åä½œæ¨¡å¼æœ‰æ•ˆè§£å†³äº†æœ¬åœ°ç¯å¢ƒç®—åŠ›ä¸è¶³ã€ä¾èµ–å†²çªç­‰é—®é¢˜ï¼ŒåŒæ—¶é€šè¿‡äº‘ç«¯ç¯å¢ƒæ ‡å‡†åŒ–é…ç½®ï¼Œç¡®ä¿ç”Ÿæˆä»£ç ä¸OneCodeå¹³å°çš„å…¼å®¹æ€§ã€‚</p>
<p>3.3 è§„èŒƒè½åœ°ï¼šä»â€œäººå·¥æ£€æŸ¥â€åˆ°â€œAIå¼ºåˆ¶çº¦æŸâ€çš„å‡çº§</p>
<p>OneCodeå¹³å°çš„ç¼–ç è§„èŒƒï¼ˆåŒ…æ‹¬æ³¨è§£ä½¿ç”¨ã€ç›®å½•ç»“æ„ã€å‘½åè§„åˆ™ç­‰ï¼‰åœ¨ä¼ ç»Ÿå¼€å‘æ¨¡å¼ä¸­éœ€é€šè¿‡äººå·¥å®¡æŸ¥æˆ–IDEæ’ä»¶ä¿éšœï¼Œå­˜åœ¨æ‰§è¡Œä¸åˆ°ä½çš„é£é™©ã€‚åœ¨CLIå§”æ‰˜æ¨¡å¼ä¸‹ï¼ŒQoder CLIå·²é¢„å…ˆå­¦ä¹ OneCodeå¹³å°è§„èŒƒï¼Œç”Ÿæˆä»£ç æ—¶å¯è‡ªåŠ¨æ»¡è¶³çº¦æŸæ¡ä»¶ï¼Œæ— éœ€é¢å¤–äººå·¥å¹²é¢„ï¼š</p>
<p>// å§”æ‰˜ç”Ÿæˆçš„CourseScheduleEntityç±»ï¼ˆè‡ªåŠ¨ç¬¦åˆOneCodeè§„èŒƒï¼‰
@EntityMapping(
table = "course_schedule",
primaryKey = "schedule_id",
primaryKeyStrategy = PrimaryKeyStrategy.AUTO
)
@DBTable(tableName = "course_schedule", primaryKey = "schedule_id", cname = "è¯¾ç¨‹è¡¨")
public class CourseScheduleEntity {</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Uid</span>
<span class="hljs-meta">@DBField</span>(dbFieldName = <span class="hljs-string">"schedule_id"</span>, dbType = <span class="hljs-title class_">ColType</span>.<span class="hljs-property">VARCHAR</span>, length = <span class="hljs-number">36</span>, isNull = <span class="hljs-literal">false</span>, cnName = <span class="hljs-string">"è¯¾ç¨‹è¡¨ID"</span>)
<span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> scheduleId;

<span class="hljs-meta">@DBField</span>(dbFieldName = <span class="hljs-string">"course_name"</span>, dbType = <span class="hljs-title class_">ColType</span>.<span class="hljs-property">VARCHAR</span>, length = <span class="hljs-number">20</span>, isNull = <span class="hljs-literal">false</span>, cnName = <span class="hljs-string">"è¯¾ç¨‹åç§°"</span>)
<span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> courseName;

<span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ OneCodeå¹³å°è¦æ±‚çš„åºåˆ—åŒ–æ¥å£ä¸toStringæ–¹æ³•</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">toString</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"CourseScheduleEntity{"</span> +
            <span class="hljs-string">"scheduleId='"</span> + scheduleId + <span class="hljs-string">'\''</span> +
            <span class="hljs-string">", courseName='"</span> + courseName + <span class="hljs-string">'\''</span> +
            <span class="hljs-string">'}'</span>;
}
</code></pre>
<p>}</p>
<p>é’ˆå¯¹é¡¹ç›®ä¸­å·²å­˜åœ¨çš„éè§„èŒƒä»£ç ï¼Œå¯é€šè¿‡å§”æ‰˜æŒ‡ä»¤å®ç°æ‰¹é‡ä¿®æ­£ï¼Œå¤§å¹…é™ä½ä»£ç å®¡æŸ¥æˆæœ¬ï¼š</p>
<h2 data-id="heading-59">å§”æ‰˜ä¿®æ­£é¡¹ç›®ä¸­æ‰€æœ‰ä¸ç¬¦åˆè§„èŒƒçš„ä»£ç </h2>
<p>qodercli delegate onecode "æ‰«æå½“å‰OneCodeé¡¹ç›®ä»£ç ï¼Œæ‰§è¡Œä»¥ä¸‹ä¼˜åŒ–æ“ä½œï¼š</p>
<ol>
<li>è¡¥å…¨æ‰€æœ‰å®ä½“ç±»ä¸­ç¼ºå¤±çš„@DBFieldæ³¨è§£</li>
<li>ä¿®æ­£ä¸ç¬¦åˆé©¼å³°å‘½åè§„èŒƒçš„æ–¹æ³•å</li>
<li>åˆ é™¤æœªè¢«å¼•ç”¨çš„å¯¼å…¥è¯­å¥" --scope all</li>
</ol>
<p>3.4 é›†æˆèƒ½åŠ›ï¼šCLIä¸å¯è§†åŒ–IDEçš„åŒå‘èµ‹èƒ½</p>
<p>Qoder CLIçš„å§”æ‰˜æ¨¡å¼å¹¶éæ›¿ä»£OneCodeå¯è§†åŒ–IDEï¼Œè€Œæ˜¯å½¢æˆâ€œCLIå¤„ç†æ‰¹é‡ä»»åŠ¡+IDEå®Œæˆç²¾ç»†è°ƒæ•´â€çš„ååŒæœºåˆ¶ã€‚OneCodeå¯è§†åŒ–IDEçš„æœ€æ–°åŠŸèƒ½ä¸CLIå§”æ‰˜æ¨¡å¼å¯å®ç°æ— ç¼è¡”æ¥ï¼Œè¾¾æˆ1+1&gt;2çš„åº”ç”¨æ•ˆæœï¼š</p>
<ul>
<li>
<p>CLIç”Ÿæˆçš„ä»£ç å¯ç›´æ¥åœ¨IDEä¸­æ‰“å¼€ï¼Œè¿›è¡Œå¯è§†åŒ–è°ƒæ•´ä¸ä¼˜åŒ–</p>
</li>
<li>
<p>IDEä¸­çš„ä»»åŠ¡è§„åˆ’ç»“æœå¯å¯¼å‡ºä¸ºæ ‡å‡†åŒ–CLIæŒ‡ä»¤ï¼Œå®ç°æ‰¹é‡æ‰§è¡Œ</p>
</li>
<li>
<p>å›¾ç”Ÿä»£ç åŠŸèƒ½ç”Ÿæˆçš„ç•Œé¢åŸå‹ï¼Œå¯é€šè¿‡CLIå§”æ‰˜å®Œæˆä¸šåŠ¡é€»è¾‘å¡«å……</p>
</li>
</ul>
<p>å››ã€OneCodeå¯è§†åŒ–IDEæ–°åŠŸèƒ½ä¸CLIçš„ååŒå®è·µ</p>
<p>OneCodeå¯è§†åŒ–IDEæœ€æ–°æ¨å‡ºçš„ä»»åŠ¡è§„åˆ’ã€å›¾ç”Ÿä»£ç å¤šAgentæ¨¡å¼ã€æ·±åº¦AIé›†æˆä»£ç†ä¸‰å¤§åŠŸèƒ½ï¼Œä¸Qoder CLIçš„å§”æ‰˜æ¨¡å¼å½¢æˆèƒ½åŠ›äº’è¡¥ï¼Œæ„å»ºå…¨æµç¨‹AIå¼€å‘ä½“ç³»ã€‚ä»¥ä¸‹ä¸ºå…·ä½“ååŒåº”ç”¨åœºæ™¯ï¼š</p>
<p>4.1 ä»»åŠ¡è§„åˆ’ï¼šä»å¯è§†åŒ–æ‹†è§£åˆ°CLIæ‰¹é‡æ‰§è¡Œ</p>
<p>OneCode IDEçš„ä»»åŠ¡è§„åˆ’åŠŸèƒ½æ”¯æŒå¼€å‘è€…é€šè¿‡æ‹–æ‹½æ–¹å¼å°†éœ€æ±‚æ‹†è§£ä¸ºâ€œå®ä½“è®¾è®¡-æœåŠ¡å¼€å‘-å‰ç«¯ç»„ä»¶-éƒ¨ç½²é…ç½®â€ç­‰å­ä»»åŠ¡ï¼Œå¹¶ç”Ÿæˆæ ‡å‡†åŒ–ä»»åŠ¡æ¸…å•ã€‚è¯¥æ¸…å•å¯ç›´æ¥å¯¼å‡ºä¸ºCLIæŒ‡ä»¤ï¼Œé€šè¿‡å§”æ‰˜æ¨¡å¼å®ç°æ‰¹é‡æ‰§è¡Œï¼š</p>
<h2 data-id="heading-60">åŸºäºOneCode IDEä»»åŠ¡è§„åˆ’ç»“æœç”ŸæˆCLIæ‰§è¡ŒæŒ‡ä»¤</h2>
<h2 data-id="heading-61">1. å¯¼å‡ºIDEä»»åŠ¡è§„åˆ’ç»“æœï¼ˆç”Ÿæˆtask-plan.jsoné…ç½®æ–‡ä»¶ï¼‰</h2>
<p>onecode ide export-task --format json --output task-plan.json</p>
<h2 data-id="heading-62">2. åŸºäºä»»åŠ¡æ¸…å•æ‰§è¡Œæ‰¹é‡å§”æ‰˜</h2>
<p>qodercli delegate onecode --from task-plan.json --sync-ide</p>
<h2 data-id="heading-63">æ‰§è¡Œå®ŒæˆååŒæ­¥ä»»åŠ¡çŠ¶æ€è‡³IDE</h2>
<p>qodercli task sync-ide Task-456</p>
<p>è¯¥æ¨¡å¼æ—¢ä¿ç•™äº†IDEå¯è§†åŒ–è§„åˆ’çš„ç›´è§‚æ€§ï¼Œåˆå‘æŒ¥äº†CLIæ‰¹é‡æ‰§è¡Œçš„é«˜æ•ˆæ€§ï¼Œç‰¹åˆ«é€‚ç”¨äºå›¢é˜Ÿåä½œä¸­çš„éœ€æ±‚è½åœ°åœºæ™¯ã€‚</p>
<p>4.2 å›¾ç”Ÿä»£ç å¤šAgentæ¨¡å¼ï¼šCLIé©±åŠ¨çš„ååŒç”Ÿæˆ</p>
<p>OneCode IDEçš„å›¾ç”Ÿä»£ç åŠŸèƒ½æ”¯æŒä¸Šä¼ UIè®¾è®¡å›¾ï¼Œé€šè¿‡å¤šAgentåä½œæœºåˆ¶ç”Ÿæˆå‰ç«¯ç»„ä»¶ä»£ç ï¼ˆå¸ƒå±€Agentè´Ÿè´£é¡µé¢ç»“æ„ã€æ ·å¼Agentè´Ÿè´£è§†è§‰ç¾åŒ–ã€é€»è¾‘Agentè´Ÿè´£äº¤äº’å®ç°ï¼‰ã€‚å½“éœ€è¦æ‰¹é‡ç”Ÿæˆç›¸ä¼¼ç»„ä»¶æ—¶ï¼Œå¯é€šè¿‡CLIå§”æ‰˜æ¨¡å¼é©±åŠ¨è¯¥æµç¨‹è‡ªåŠ¨åŒ–ï¼š</p>
<h2 data-id="heading-64">å§”æ‰˜CLIè°ƒç”¨OneCodeå¤šAgentæ¨¡å¼æ‰¹é‡ç”Ÿæˆå‰ç«¯ç»„ä»¶</h2>
<p>qodercli delegate onecode "åŸºäºå›¾ç”Ÿä»£ç å¤šAgentæ¨¡å¼æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>æ‰¹é‡å¤„ç†./designç›®å½•ä¸‹çš„5å¼ è¯¾ç¨‹è¡¨ç›¸å…³UIè®¾è®¡å›¾</li>
<li>å¸ƒå±€Agenté‡‡ç”¨OneCodeæ ‡å‡†æ …æ ¼ç³»ç»Ÿè¿›è¡Œé¡µé¢ç»“æ„è®¾è®¡</li>
<li>æ ·å¼Agentä½¿ç”¨å¹³å°é»˜è®¤ä¸»é¢˜è¿›è¡Œè§†è§‰ç¾åŒ–</li>
<li>é€»è¾‘Agentç»‘å®šå·²ç”Ÿæˆçš„CourseServiceæœåŠ¡æ¥å£</li>
<li>ç»„ä»¶ç”Ÿæˆåè‡ªåŠ¨æ³¨å†Œè‡³OneCodeç»„ä»¶åº“"</li>
</ol>
<h2 data-id="heading-65">æŸ¥çœ‹å„Agentæ‰§è¡Œæ—¥å¿—è¯¦æƒ…</h2>
<p>qodercli task log Task-789 --agent all</p>
<p>CLIçš„æ‰¹é‡å¤„ç†èƒ½åŠ›ä¸å¤šAgentçš„ä¸“ä¸šåˆ†å·¥ç›¸ç»“åˆï¼Œå¯ä½¿å‰ç«¯ç»„ä»¶å¼€å‘æ•ˆç‡æå‡80%ä»¥ä¸Šï¼Œå°¤å…¶é€‚ç”¨äºæ ‡å‡†åŒ–ç¨‹åº¦é«˜çš„ä¼ä¸šçº§åº”ç”¨å¼€å‘åœºæ™¯ã€‚</p>
<p>4.3 æ·±åº¦AIé›†æˆä»£ç†ï¼šCLIè§¦å‘çš„å…¨æµç¨‹æ™ºèƒ½æ”¯æŒ</p>
<p>OneCodeå¹³å°çš„æ·±åº¦AIé›†æˆä»£ç†åŠŸèƒ½ï¼Œå¯åœ¨å¼€å‘å…¨æµç¨‹ä¸­æä¾›éœ€æ±‚åˆ†æã€ä»£ç ä¼˜åŒ–ã€ç¼ºé™·ä¿®å¤ç­‰æ™ºèƒ½æ”¯æŒã€‚é€šè¿‡CLIå§”æ‰˜æ¨¡å¼ï¼Œå¯å°†è¯¥ä»£ç†èƒ½åŠ›åµŒå…¥è‡ªåŠ¨åŒ–æµç¨‹ï¼Œå®ç°å¼€å‘å…¨å‘¨æœŸçš„AIèµ‹èƒ½ï¼š</p>
<h2 data-id="heading-66">1. å§”æ‰˜AIä»£ç†åˆ†æéœ€æ±‚æ–‡æ¡£å¹¶ç”Ÿæˆå¼€å‘æ–¹æ¡ˆ</h2>
<p>qodercli delegate onecode-agent "åˆ†æ./requirements/course-schedule.mdéœ€æ±‚æ–‡æ¡£ï¼Œç”ŸæˆOneCodeå¼€å‘æ–¹æ¡ˆï¼Œå†…å®¹éœ€åŒ…å«æŠ€æœ¯é€‰å‹ã€æ¥å£è®¾è®¡ã€æ•°æ®åº“è¡¨ç»“æ„å®šä¹‰" --output dev-plan.md</p>
<h2 data-id="heading-67">2. åŸºäºå¼€å‘æ–¹æ¡ˆè‡ªåŠ¨ç”Ÿæˆé¡¹ç›®åŸºç¡€éª¨æ¶</h2>
<p>qodercli delegate onecode --from dev-plan.md --action generate-skeleton</p>
<h2 data-id="heading-68">3. å¼€å‘å®Œæˆåå§”æ‰˜AIä»£ç†è¿›è¡Œä»£ç å®¡æŸ¥ä¸ä¼˜åŒ–</h2>
<p>qodercli delegate onecode-agent "å®¡æŸ¥å½“å‰é¡¹ç›®ä»£ç ï¼Œé‡ç‚¹æ£€æŸ¥ä»¥ä¸‹ç»´åº¦ï¼š</p>
<ul>
<li>ä»£ç ä¸OneCodeå¹³å°è§„èŒƒçš„ç¬¦åˆæ€§</li>
<li>æ•°æ®åº“æŸ¥è¯¢è¯­å¥çš„æ€§èƒ½ä¼˜åŒ–ç©ºé—´</li>
<li>å¼‚å¸¸å¤„ç†é€»è¾‘çš„å®Œæ•´æ€§
å¹¶è‡ªåŠ¨ç”Ÿæˆä¼˜åŒ–å»ºè®®åŠä¿®å¤æ–¹æ¡ˆ" --fix auto</li>
</ul>
<p>è¿™ç§â€œéœ€æ±‚åˆ†æ-éª¨æ¶ç”Ÿæˆ-å¼€å‘æ‰§è¡Œ-ä»£ç ä¼˜åŒ–â€çš„å…¨æµç¨‹å§”æ‰˜æ¨¡å¼ï¼Œæ¨åŠ¨OneCodeå¼€å‘ä»â€œå·¥å…·è¾…åŠ©â€é˜¶æ®µè¿ˆå‘â€œæ™ºèƒ½é©±åŠ¨â€çš„æ–°é˜¶æ®µã€‚</p>
<p>äº”ã€æ•´åˆè¿‡ç¨‹ä¸­çš„å…³é”®é…ç½®ä¸æœ€ä½³å®è·µ</p>
<p>5.1 æ ¸å¿ƒé…ç½®ï¼šMCPæœåŠ¡å™¨ä¸æƒé™ç®¡ç†</p>
<p>Qoder CLIä¸OneCodeå¹³å°çš„é€šä¿¡åŸºäºMCPåè®®å®ç°ï¼Œéœ€å®Œæˆä»¥ä¸‹é…ç½®ä»¥ç¡®ä¿å§”æ‰˜åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼š</p>
<h2 data-id="heading-69">1. æ³¨å†ŒOneCode MCPæœåŠ¡èŠ‚ç‚¹ï¼ˆå…³è”AIä»£ç†èƒ½åŠ›ï¼‰</h2>
<h2 data-id="heading-70">å‘½ä»¤è¯´æ˜ï¼š--commandæŒ‡å®šMCPæœåŠ¡å¯åŠ¨æŒ‡ä»¤ï¼Œ--envæ³¨å…¥ç¯å¢ƒå˜é‡ï¼Œ--timeoutè®¾ç½®è¿æ¥è¶…æ—¶é˜ˆå€¼</h2>
<p>qodercli mcp add onecode <br/>
--command "onecode mcp start --port 9090" <br/>
--env ONECODE_API_KEY=your-valid-api-key <br/>
--timeout 30s</p>
<h2 data-id="heading-71">2. å¤šç»´éªŒè¯MCPè¿æ¥æœ‰æ•ˆæ€§</h2>
<h2 data-id="heading-72">æ£€æŸ¥é¡¹åŒ…æ‹¬ï¼šç½‘ç»œè¿é€šæ€§ã€AIä»£ç†çŠ¶æ€ã€èƒ½åŠ›çŸ©é˜µåŒ¹é…åº¦</h2>
<p>qodercli mcp test onecode --check all</p>
<h2 data-id="heading-73">é¢„æœŸè¾“å‡ºï¼š</h2>
<h2 data-id="heading-74">ç½‘ç»œè¿æ¥ï¼šOKï¼ˆTCP 9090ç«¯å£å¯è¾¾ï¼‰</h2>
<h2 data-id="heading-75">AIä»£ç†çŠ¶æ€ï¼šåœ¨çº¿ï¼ˆç‰ˆæœ¬v1.2.0ï¼‰</h2>
<h2 data-id="heading-76">æ”¯æŒèƒ½åŠ›ï¼šä»£ç ç”Ÿæˆã€è§„èŒƒæ£€æŸ¥ã€éœ€æ±‚è§£æã€å¤šAgentè°ƒåº¦</h2>
<h2 data-id="heading-77">å…¼å®¹æ€§ï¼šQoder CLI v0.3.5 ä¸ OneCode v4.0 åŒ¹é…</h2>
<h2 data-id="heading-78">3. é…ç½®é¡¹ç›®çº§å§”æ‰˜ç­–ç•¥ï¼ˆä¼˜å…ˆçº§ï¼šé¡¹ç›®é…ç½®&gt;å…¨å±€é…ç½®ï¼‰</h2>
<h2 data-id="heading-79">æ ¸å¿ƒç­–ç•¥ï¼šä¼˜å…ˆä½¿ç”¨è¿œç¨‹AIä»£ç†ã€å¯ç”¨ä»»åŠ¡æ—¥å¿—åŒæ­¥ã€æŒ‡å®šAgentæ‰§è¡Œé¡ºåº</h2>
<p>cat &gt; .qoder-delegate.json &lt;&lt; EOF
{
"defaultTarget": "onecode",
"taskPriority": "medium",
"syncIde": true,
"logSyncInterval": 10s,
"agentConfig": {
"preferRemote": true,
"logLevel": "info",
"defaultAgentOrder": ["analysis", "generate", "optimize"]
},
"retryPolicy": {
"maxRetries": 3,
"retryDelay": 5s
}
}
EOF</p>
<h2 data-id="heading-80">4. éªŒè¯é…ç½®ç”Ÿæ•ˆçŠ¶æ€</h2>
<p>qodercli config validate --scope project</p>
<h2 data-id="heading-81">é¢„æœŸè¾“å‡ºï¼šé¡¹ç›®çº§é…ç½®æœ‰æ•ˆï¼Œæ— å†²çªé¡¹</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«]]></title>    <link>https://juejin.cn/post/7576821684252262443</link>    <guid>https://juejin.cn/post/7576821684252262443</guid>    <pubDate>2025-11-26T10:25:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252262443" data-draft-id="7576859345934598198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T10:25:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tomato_404"/> <meta itemprop="url" content="https://juejin.cn/user/2179677551600074"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬åœ°ç³»ç»Ÿã€è™šæ‹Ÿæœºã€è¿œç¨‹æœåŠ¡å™¨ä¸‰è€…ä¹‹é—´çš„æ ¸å¿ƒåŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179677551600074/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tomato_404
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:25:15.000Z" title="Wed Nov 26 2025 10:25:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒ ä¸€å¥è¯æ€»ç»“</h2>
<p>âœ… ä½ ä¹‹æ‰€ä»¥ç”¨ <strong>Tabby è¿æ¥å…¬å¸æœåŠ¡å™¨</strong> ä¸éœ€è¦è™šæ‹Ÿæœºï¼Œ<br/>
æ˜¯å› ä¸ºé‚£å°æœåŠ¡å™¨ <strong>å·²ç»æ˜¯ä¸€å°è¿è¡Œç€ Ubuntu çš„ç‹¬ç«‹ç”µè„‘ï¼ˆè¿œç¨‹æœºå™¨ï¼‰</strong> ã€‚<br/>
è€Œä½ è¦åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šâ€œæ‹¥æœ‰ä¸€ä¸ª Ubuntu ç¯å¢ƒâ€ï¼Œ<br/>
å°±å¾—è‡ªå·±â€œé€ å‡ºâ€è¿™æ ·ä¸€å°è™šæ‹Ÿçš„ç”µè„‘â€”â€”é‚£å°±æ˜¯è™šæ‹Ÿæœºã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§  ç±»æ¯”ç†è§£ï¼šè™šæ‹Ÿæœº vs è¿œç¨‹æœåŠ¡å™¨</h2>





























<table><thead><tr><th>æ¦‚å¿µ</th><th>æ˜¯ä»€ä¹ˆ</th><th>åœ¨å“ªå„¿è¿è¡Œ</th><th>ä½ å¦‚ä½•è¿›å…¥</th></tr></thead><tbody><tr><td>ğŸ’» ä½ è‡ªå·±çš„ç”µè„‘ï¼ˆWindowsï¼‰</td><td>ç‰©ç†æœº</td><td>æ¡Œå­ä¸Šçš„ç”µè„‘</td><td>ç›´æ¥æ“ä½œ</td></tr><tr><td>ğŸ§± è™šæ‹Ÿæœºï¼ˆVMï¼‰</td><td>ä¸€å°â€œåœ¨ä½ ç”µè„‘é‡Œæ¨¡æ‹Ÿå‡ºæ¥çš„å¦ä¸€å°ç”µè„‘â€</td><td>è¿è¡Œåœ¨ä½ çš„ç‰©ç†æœºé‡Œ</td><td>é€šè¿‡è™šæ‹Ÿæœºè½¯ä»¶æ‰“å¼€</td></tr><tr><td>ğŸ–¥ï¸ å…¬å¸æœåŠ¡å™¨ï¼ˆUbuntuï¼‰</td><td>ä¸€å°çœŸå®å­˜åœ¨çš„è¿œç¨‹ç”µè„‘ï¼ˆåœ¨æœºæˆ¿æˆ–äº‘ä¸Šï¼‰</td><td>è¿è¡Œåœ¨å…¬å¸ç½‘ç»œ</td><td>ç”¨ SSHï¼ˆå¦‚ Tabbyï¼‰è¿œç¨‹è¿æ¥</td></tr></tbody></table>
<p>æ‰€ä»¥åŒºåˆ«å°±åœ¨äºï¼š</p>
<ul>
<li><strong>è™šæ‹Ÿæœº = åœ¨ä½ ç”µè„‘é‡Œâ€œæ¨¡æ‹Ÿå‡ºå¦ä¸€å°ç”µè„‘â€</strong> ï¼›</li>
<li><strong>æœåŠ¡å™¨ = å·²ç»å­˜åœ¨çš„â€œå¦ä¸€å°çœŸå®ç”µè„‘â€</strong> ï¼›</li>
<li><strong>SSHï¼ˆTabbyï¼‰ = ä½ ç”¨ç½‘çº¿è¿è¿‡å»è¿œç¨‹æ“ä½œé‚£å°ç”µè„‘çš„â€œé”®ç›˜å’Œå±å¹•â€ã€‚</strong></li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ” æ›´æ·±å…¥ä¸€ç‚¹ï¼šTabby å¹¶ä¸æ˜¯è¿è¡Œ Ubuntuï¼Œè€Œæ˜¯åœ¨â€œè¿œç¨‹ç™»å½•â€Ubuntu</h2>
<p>å½“ä½ è¿è¡Œï¼š</p>
<pre><code class="hljs language-sql" lang="sql">ssh <span class="hljs-keyword">user</span><span class="hljs-variable">@192</span><span class="hljs-number">.168</span><span class="hljs-number">.31</span><span class="hljs-number">.185</span>
</code></pre>
<p>æˆ–ç”¨ Tabby è¿æ¥å…¬å¸æœåŠ¡å™¨æ—¶ï¼š</p>
<ul>
<li>ä½ çš„ç”µè„‘åªæ˜¯ä¸€ä¸ª<strong>ç»ˆç«¯ç•Œé¢</strong>ï¼ˆç›¸å½“äºâ€œæ˜¾ç¤ºå™¨ + é”®ç›˜â€ï¼‰ï¼›</li>
<li>è¿è¡Œå‘½ä»¤ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œé…ç½®éƒ½å‘ç”Ÿåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼›</li>
<li>æ‰€ä»¥ä½ ä¼šçœ‹åˆ°é‚£è¾¹çš„ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li>Ubuntu ç³»ç»Ÿ</li>
<li>å·²ç»å®‰è£…å¥½çš„ nginxã€docker ç­‰ç­‰ï¼›</li>
<li>ä½ åªæ˜¯åœ¨æ“ä½œé‚£å°è¿œç¨‹æœºå™¨ã€‚</li>
</ul>
</li>
</ul>
<p>è€Œå¦‚æœä½ æƒ³åœ¨<strong>è‡ªå·±çš„ç”µè„‘ä¸Š</strong>ä¹Ÿæœ‰ä¸€æ ·çš„ Ubuntu ç¯å¢ƒï¼Œ<br/>
å› ä¸ºä½ æ‰‹ä¸Šè¿™å°æœºå™¨è¿è¡Œçš„å¯èƒ½æ˜¯ <strong>Windows</strong> æˆ– <strong>macOS</strong>ï¼Œ<br/>
é‚£å°±å¾—â€œè™šæ‹Ÿâ€å‡ºä¸€å° Ubuntu ç³»ç»Ÿçš„ç”µè„‘ï¼Œé è™šæ‹Ÿæœºå®ç°ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§© å¯¹æ¯”ä¸€ä¸‹ä½ çš„ä¸¤ç§æƒ…å†µï¼š</h2>























<table><thead><tr><th>åœºæ™¯</th><th>è¿è¡Œçš„ç³»ç»Ÿ</th><th>ç‰©ç†æœºå™¨æ˜¯è°</th><th>ä¸ºä»€ä¹ˆèƒ½ç”¨ Ubuntu</th></tr></thead><tbody><tr><td>â‘  Tabby è¿å…¬å¸æœåŠ¡å™¨</td><td>Ubuntu</td><td>æœåŠ¡å™¨ï¼ˆ192.168.31.185ï¼‰</td><td>æœåŠ¡å™¨å·²ç»è£…å¥½äº† Ubuntu</td></tr><tr><td>â‘¡ è‡ªå·±ç”µè„‘ï¼ˆWindowsï¼‰</td><td>Windows</td><td>ä½ è‡ªå·±çš„ç¬”ç”µ / PC</td><td>æ²¡æœ‰ Ubuntuï¼Œéœ€è¦è™šæ‹Ÿæœºæˆ– WSL</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">âš™ï¸ é‚£å¦‚æœæˆ‘æƒ³åƒå…¬å¸æœåŠ¡å™¨é‚£æ ·ï¼Œæœ¬æœºä¹Ÿèƒ½è·‘ Ubuntuï¼Œæœ‰å“ªäº›é€‰æ‹©ï¼Ÿ</h2>






























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>åŸç†</th><th>æ˜¯å¦éœ€è¦è™šæ‹Ÿæœº</th></tr></thead><tbody><tr><td><strong>VirtualBox / VMware å®‰è£… Ubuntu</strong></td><td>ç›´æ¥åœ¨ Windows ä¸Šå¼€ä¸€å°â€œè™šæ‹Ÿç”µè„‘â€è£… Ubuntu</td><td>âœ… éœ€è¦è™šæ‹Ÿæœº</td></tr><tr><td><strong>WSL2 (Windows Subsystem for Linux)</strong></td><td>å¾®è½¯æä¾›çš„è½»é‡ Linux å­ç³»ç»Ÿ</td><td>âŒ ä¸éœ€è¦ä¼ ç»Ÿè™šæ‹Ÿæœºï¼Œæ¨è</td></tr><tr><td><strong>Docker Desktop</strong></td><td>å®ƒåœ¨åº•å±‚ç”¨è½»é‡è™šæ‹ŸåŒ–è·‘ Linux å†…æ ¸</td><td>âš™ï¸ è‡ªåŠ¨ç®¡ç†è™šæ‹Ÿå±‚ï¼Œæ— éœ€ä½ é…ç½®</td></tr><tr><td><strong>ä¹°/ç§Ÿäº‘æœåŠ¡å™¨ï¼ˆè¿œç¨‹ä¸»æœºï¼‰</strong></td><td>ç›´æ¥è¿è¿œç¨‹ Ubuntu</td><td>âŒ ä¸éœ€è¦è™šæ‹Ÿæœºï¼Œæœ¬èº«å°±æ˜¯æœåŠ¡å™¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">ğŸ§­ ä½ å¯ä»¥è¿™æ ·ç†è§£ä¸€æ¡ä¸»çº¿ï¼š</h2>
<p>ç‰©ç†æœºå™¨ï¼ˆä½ çš„ç”µè„‘ æˆ– å…¬å¸æœåŠ¡å™¨ï¼‰<br/>
â†’ ä¸Šé¢è¿è¡Œç³»ç»Ÿï¼ˆWindows æˆ– Ubuntuï¼‰<br/>
â†’ ç³»ç»Ÿé‡Œè£…ç¯å¢ƒï¼ˆnginxã€docker ç­‰ï¼‰</p>
<p>å½“ä½ è¿æ¥æœåŠ¡å™¨æ—¶ï¼Œ<br/>
ä½ æ˜¯â€œå€Ÿç”¨å…¬å¸é‚£å° Ubuntu æœºå™¨çš„ç³»ç»Ÿâ€ï¼›<br/>
å½“ä½ åœ¨æœ¬æœºè£…è™šæ‹Ÿæœºæ—¶ï¼Œ<br/>
ä½ æ˜¯åœ¨â€œè‡ªå·±ç”µè„‘é‡Œå†åˆ›å»ºä¸€å° Ubuntu æœºå™¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸš€ æ¨èä½ ç›®å‰æœ€æ–¹ä¾¿çš„åšæ³•ï¼ˆå¦‚æœä½ æ˜¯ Windows ç”¨æˆ·ï¼‰</h2>
<p>ğŸ‘‰ <strong>ä½¿ç”¨ WSL2 + Ubuntu å­ç³»ç»Ÿ</strong><br/>
ä¸éœ€è¦è™šæ‹Ÿæœºè½¯ä»¶ã€ä¸å å¤ªå¤šèµ„æºã€å‘½ä»¤ä¸å…¬å¸æœåŠ¡å™¨å®Œå…¨ä¸€è‡´ã€‚</p>
<p>å®‰è£…å‘½ä»¤ï¼ˆç®¡ç†å‘˜ PowerShellï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">wsl <span class="hljs-attr">--install</span>
</code></pre>
<p>å®‰è£…å®Œæˆåï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wsl -l -v   <span class="hljs-comment"># æŸ¥çœ‹ Ubuntu æ˜¯å¦å®‰è£…æˆåŠŸ</span>
wsl         <span class="hljs-comment"># è¿›å…¥ Ubuntu ç»ˆç«¯</span>
</code></pre>
<p>ç°åœ¨ä½ å°±åœ¨ä¸€ä¸ªçœŸæ­£çš„ Ubuntu ç¯å¢ƒé‡Œäº†ï¼Œ<br/>
å¯ä»¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-lua" lang="lua">sudo apt update
sudo apt install nginx docker.<span class="hljs-built_in">io</span> -y
</code></pre>
<p>è¿™æ—¶ä½ æœ¬åœ°ç¯å¢ƒçš„ä½¿ç”¨ä½“éªŒï¼Œå°±å’Œä½ ç”¨ Tabby è¿å…¬å¸æœåŠ¡å™¨éå¸¸æ¥è¿‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—]]></title>    <link>https://juejin.cn/post/7576197876717797414</link>    <guid>https://juejin.cn/post/7576197876717797414</guid>    <pubDate>2025-11-25T02:45:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876717797414" data-draft-id="7575102209606303770" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-25T02:45:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¥³æœ‹å‹åˆç»™æˆ‘å‡ºéš¾é¢˜äº†ï¼šè§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:45:00.000Z" title="Tue Nov 25 2025 02:45:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    900
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¥³æœ‹å‹åšå¹¿å‘Šç­–åˆ’ï¼Œæ¯å¤©è¦ä»æµ·é‡ç½‘ç«™å’Œç´ æä¸­æ‘˜æŠ„æ–‡æ¡ˆã€‚</p>
<p>å¾®ä¿¡æˆ–é£ä¹¦æˆªå›¾éƒ½æœ‰ OCRï¼Œä½†å¥¹æ€»è¦â€œåˆ‡å¾®ä¿¡/é£ä¹¦ â†’ è¯†åˆ« â†’ å¤åˆ¶ â†’ åˆ‡å›æµè§ˆå™¨â€ï¼Œæ¥å›æŠ˜è…¾å¥½éº»çƒ¦ï¼Œç»å¸¸è¢«æ‰“æ–­æ€è·¯ã€‚</p>
<p><strong>ä¸¤ä¸ªæœ€å¸¸è§çš„çƒ¦æ¼</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç¦æ­¢å¤åˆ¶çš„é¡µé¢</strong>ï¼šè®¾è®¡çµæ„Ÿç«™ã€ç´ æç«™ã€æ–‡åº“ç±»ç½‘ç«™ï¼Œæ˜æ˜èƒ½çœ‹åˆ°æ–‡å­—ï¼Œå°±æ˜¯é€‰ä¸äº†ã€å³é”®ä¹Ÿæ²¡ç”¨ï¼Œåªèƒ½æ‰‹æ•²ã€‚</p>
</li>
<li>
<p><strong>å›¾ç‰‡é‡Œçš„æ–‡å­—æ— æ³•å¿«é€Ÿæå–</strong>ï¼šçœ‹åˆ°ä¸€å¼ å›¾ï¼Œå¾—åˆ‡åˆ°å¾®ä¿¡ã€ç‚¹â€œæå–æ–‡å­—â€ã€ç­‰è¯†åˆ«ã€å¤åˆ¶ã€å†åˆ‡å›æ¥ç²˜è´´ã€‚</p>
</li>
</ul>
<p><strong>ä¸€å¼ å›¾ï¼Œå¥½å‡ ä¸ªæ­¥éª¤ï¼Œæ¥å›åˆ‡æ¢ä¸‰æ¬¡ã€‚</strong></p>
<p>æœ‰å¤©æ™šä¸Šå¥¹åœ¨èµ¶æ–¹æ¡ˆï¼Œä¸€è¾¹æ“ä½œä¸€è¾¹å¿µå¨ï¼šâ€œå¤ªéº»çƒ¦äº†ï¼Œæ€è·¯éƒ½æ–­äº†â€¦â€¦â€</p>
<p>æˆ‘è¯´ï¼šâ€œè¦ä¸æˆ‘ç»™ä½ å†™ä¸ªæ’ä»¶ï¼Ÿâ€</p>
<p>äºæ˜¯å‘¨æœ«ä¸¤å¤©ï¼Œåšäº†è¿™ä¸ª <strong>ã€Œå›¾æ–‡è§£é”å™¨ã€</strong>ï¼š</p>
<ol>
<li><strong>ä¸€é”®è§£é™¤ç½‘é¡µé™åˆ¶</strong> â€”â€” ç¦é€‰ä¸­ã€ç¦å³é”®çš„ç½‘ç«™ï¼Œç‚¹ä¸€ä¸‹å°±èƒ½æ­£å¸¸å¤åˆ¶</li>
<li><strong>æµè§ˆå™¨é‡Œç›´æ¥æ‹–æ¡†è¯†åˆ«</strong> â€”â€” ä¸ç”¨åˆ‡å¾®ä¿¡ï¼Œçœ‹åˆ°å“ªé‡Œæ¡†å“ªé‡Œï¼Œå‡ ç§’å‡ºç»“æœ</li>
<li><strong>æ‰€æœ‰æ“ä½œåœ¨ä¾§è¾¹æ å®Œæˆ</strong> â€”â€” ä¸é®æŒ¡é¡µé¢ï¼Œä¸ç”¨æ¥å›åˆ‡çª—å£</li>
</ol>
<p>å‘¨ä¸€å¥¹ç”¨ä¸Šä¹‹åçš„è¯„ä»·ï¼šâ€œç»ˆäºé¡ºæ‰‹äº†ï¼é‚£äº›æ¶å¿ƒçš„ç¦æ­¢å¤åˆ¶ç½‘ç«™ç°åœ¨éšä¾¿å¤åˆ¶ï¼Œå›¾ç‰‡è¯†åˆ«ä¹Ÿä¸ç”¨è·³æ¥è·³å»äº†ã€‚â€</p>
<p>ä¸‹é¢è®²è®²å¼€å‘è¿‡ç¨‹å’ŒæŠ€æœ¯å®ç° ğŸ‘‡</p>
</blockquote>
<h2 data-id="heading-0">æ•ˆæœæ¼”ç¤º: è§£é”ç½‘é¡µç¦ç”¨å¤åˆ¶ + ä¸€é”®æå–å›¾ç‰‡æ–‡å­—</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dce2ce2f9c5043b690a3184eb6f0d1de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=6g1TP6c5jRKOc%2FeqrH6m5S%2FmWCs%3D" alt="copy-everything.gif" loading="lazy"/></p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<h3 data-id="heading-2">1.  è§£é™¤ç½‘é¡µé™åˆ¶</h3>
<ul>
<li>ä¸€é”®è§£é™¤å¤åˆ¶é™åˆ¶</li>
<li>æ¢å¤å³é”®èœå•</li>
<li>å…è®¸æ–‡æœ¬é€‰ä¸­</li>
<li>æ”¯æŒåŠ¨æ€åŠ è½½çš„ç½‘é¡µå†…å®¹è§£é™¤é™åˆ¶</li>
</ul>
<h3 data-id="heading-3">2. OCR æ–‡å­—è¯†åˆ«ï¼ˆæ–¹å¼ä¸ç‰¹æ€§ï¼‰</h3>






























<table><thead><tr><th>æ–¹å¼</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>é¡µé¢æˆªå›¾</strong></td><td>å¿«é€Ÿæˆªå–å½“å‰å¯è§åŒºåŸŸ</td><td>ä¸€é”®è¯†åˆ«ç½‘é¡µå…¨éƒ¨å†…å®¹</td></tr><tr><td><strong>è‡ªé€‰åŒºåŸŸ</strong></td><td>æ‹–æ‹½é€‰æ‹©ä»»æ„åŒºåŸŸ</td><td>åªè¯†åˆ«ä½ é€‰ä¸­çš„ç‰¹å®šåŒºåŸŸ</td></tr><tr><td><strong>ç‚¹å‡»ä¸Šä¼ </strong></td><td>é€‰æ‹©æœ¬åœ°å›¾ç‰‡æ–‡ä»¶</td><td>è¯†åˆ«æœ¬åœ°å›¾ç‰‡ä¸­çš„æ–‡å­—</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>æ‹–å…¥å›¾ç‰‡å³å¯è¯†åˆ«</td><td>æ–¹ä¾¿ä¸Šä¼ å›¾ç‰‡å¹¶è¯†åˆ«æ–‡å­—</td></tr></tbody></table>
<ul>
<li>åŸºäºè…¾è®¯äº‘ OCR APIï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰</li>
<li>å†…ç½®å›¾ç‰‡é¢„è§ˆï¼Œè¯†åˆ«å‰å¯ç¡®è®¤å†…å®¹</li>
<li>è¯†åˆ«ç»“æœä¸€é”®å¤åˆ¶ï¼Œæ”¯æŒåç»­ç²˜è´´ä½¿ç”¨</li>
<li>è¯†åˆ«æµç¨‹ï¼šé€‰æ‹©æ–¹å¼ â†’ é¢„è§ˆ â†’ å¼€å§‹è¯†åˆ« â†’ å¤åˆ¶/ä¸‹è½½</li>
</ul>
<h2 data-id="heading-4">å¿«é€Ÿå¼€å§‹ï¼ˆå®‰è£…ä½¿ç”¨ï¼‰</h2>
<h3 data-id="heading-5">1. è·å–ä»£ç </h3>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2Fcopy-everything" target="_blank" title="https://github.com/Teernage/copy-everything" ref="nofollow noopener noreferrer">github.com/Teernage/coâ€¦</a> â­ å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿Star</li>
<li><strong>Gitee</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2Fcopy-everything" target="_blank" title="https://gitee.com/xuzhenxin110/copy-everything" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
<h3 data-id="heading-6">2. å®‰è£…æ‰©å±•ï¼ˆæœ¬åœ°åŠ è½½ï¼‰</h3>
<ol>
<li>æ‰“å¼€ Chromeï¼Œåœ°å€æ è¾“å…¥ chrome://extensions/</li>
<li>å³ä¸Šè§’å¼€å¯â€œå¼€å‘è€…æ¨¡å¼â€</li>
<li>ç‚¹å‡»â€œåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºâ€</li>
<li>é€‰æ‹©æ’ä»¶ç›®å½•</li>
<li>å®‰è£…å®Œæˆ</li>
</ol>
<p><code>å°è´´å£«ï¼šSide Panel ä¾èµ–è¾ƒæ–°ç‰ˆæœ¬ Chromeï¼Œå»ºè®® 114+ã€‚</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a20851ca20744c5fb2660860839141cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=QB6ADXsHczAk%2Fp4t0W88i2byf4A%3D" alt="å®‰è£…copy-everything.gif" loading="lazy"/></p>
<h3 data-id="heading-7">3. é¦–æ¬¡ä½¿ç”¨</h3>
<ul>
<li>ç‚¹å‡»æ’ä»¶å›¾æ ‡æ‰“å¼€ä¾§è¾¹æ </li>
<li>ç‚¹å‡»ã€Œä¸€é”®è§£é™¤ã€å³å¯è§£é™¤é¡µé¢å¤åˆ¶é™åˆ¶</li>
<li>ä½¿ç”¨æˆªå›¾åŠŸèƒ½ï¼ˆé¡µé¢æˆªå›¾ / è‡ªé€‰åŒºåŸŸï¼‰æˆ–æœ¬åœ°ä¸Šä¼ ï¼ˆç‚¹å‡»ä¸Šä¼  / æ‹–æ‹½ä¸Šä¼ ï¼‰è¿›è¡Œ OCR è¯†åˆ«</li>
<li>é¦–æ¬¡ä½“éªŒå¯ç›´æ¥ä½¿ç”¨ä»¥ä¸‹è´¦å·ï¼ˆæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ï¼‰ï¼š
<ul>
<li>SecretIdï¼š AKIDLUQ7aqsjNmwufWFm590d1BxXs0xgBRTH</li>
<li>SecretKeyï¼š c09OVP4aw75oIYZMvFO8j5C5uiIgspIc</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ åä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«</li>
</ul>
</li>
</ul>
<p><code>æ³¨ï¼šå¦‚å…è´¹é¢åº¦ç”¨å®Œï¼Œè¯·æ ¹æ®ä¸‹æ–¹æŒ‡å¯¼ç”³è¯·å±äºä½ è‡ªå·±çš„è´¦å·å“¦ã€‚ğŸ‘‡</code></p>
<h4 data-id="heading-8">è…¾è®¯äº‘ OCR å¼€é€šä¸é…ç½®</h4>
<p>æ’ä»¶æ”¯æŒè…¾è®¯äº‘ OCRï¼Œæ¯æœˆæœ‰çº¦ 1000 æ¬¡å…è´¹é¢åº¦ï¼Œè¶³å¤Ÿæ—¥å¸¸ä½¿ç”¨ã€‚é¦–æ¬¡è¯†åˆ«å‰ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤å¼€é€šå¹¶é…ç½®ï¼š</p>
<ol>
<li>è¿›å…¥ è…¾è®¯äº‘æ–‡å­—è¯†åˆ«æ§åˆ¶å°<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Focr%2Fv2%2Foverview" target="_blank" title="https://console.cloud.tencent.com/ocr/v2/overview" ref="nofollow noopener noreferrer">console.cloud.tencent.com/ocr/v2/overâ€¦</a> ï¼Œå‹¾é€‰æ¡æ¬¾å¹¶å¼€é€šæœåŠ¡ã€‚</li>
<li>å‰å¾€ API å¯†é’¥ç®¡ç†<a href="https://link.juejin.cn?target=https%3A%2F%2Fconsole.cloud.tencent.com%2Fcam%2Fcapi" target="_blank" title="https://console.cloud.tencent.com/cam/capi" ref="nofollow noopener noreferrer">console.cloud.tencent.com/cam/capi</a> è·å–è‡ªå·±çš„ SecretId å’Œ SecretKeyã€‚</li>
<li>å°† SecretId å’Œ SecretKey å¡«å…¥æ’ä»¶ä¾§è¾¹æ å¹¶ä¿å­˜è®¾ç½®ï¼Œå³å¯å¼€å§‹å›¾æ–‡è¯†åˆ«ã€‚</li>
</ol>
<h3 data-id="heading-9">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li>
<p><strong>API è´¹ç”¨</strong>ï¼šè…¾è®¯äº‘ OCR æ¯ä¸ªæœˆæœ‰1000ä¸ªè¯·æ±‚çš„å…è´¹é¢åº¦ï¼Œè¶…å‡ºåæŒ‰é‡è®¡è´¹</p>
</li>
<li>
<p><strong>æƒé™è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>activeTab</code>ï¼šè®¿é—®å½“å‰æ ‡ç­¾é¡µ</li>
<li><code>scripting</code>ï¼šæ³¨å…¥è„šæœ¬</li>
<li><code>storage</code>ï¼šä¿å­˜é…ç½®</li>
<li><code>sidePanel</code>ï¼šä¾§è¾¹æ åŠŸèƒ½</li>
</ul>
</li>
<li>
<p><strong>å…¼å®¹æ€§</strong>ï¼š</p>
<ul>
<li>Chrome 114+ ï¼ˆSide Panel API è¦æ±‚ï¼‰</li>
<li>éƒ¨åˆ†ç½‘ç«™å¯èƒ½æœ‰é¢å¤–é˜²æŠ¤</li>
</ul>
</li>
</ol>
<h2 data-id="heading-10">æŠ€æœ¯å®ç°åŸç†</h2>
<h3 data-id="heading-11">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>Manifest V3</strong>ï¼šChrome æ‰©å±•æœ€æ–°è§„èŒƒ</li>
<li><strong>Side Panel API</strong>ï¼šä¾§è¾¹æ ç•Œé¢</li>
<li><strong>Content Scripts</strong>ï¼šé¡µé¢æ³¨å…¥è„šæœ¬</li>
<li><strong>Tencent Cloud OCR</strong>ï¼šè…¾è®¯äº‘æ–‡å­—è¯†åˆ« API</li>
<li><strong>Canvas API</strong>ï¼šå›¾ç‰‡è£å‰ª</li>
</ul>
<h3 data-id="heading-12">æ¶æ„è®¾è®¡</h3>
<pre><code class="hljs language-bash" lang="bash">copy-everything
â”œâ”€â”€ manifest.json         <span class="hljs-comment"># æ’ä»¶é…ç½®</span>
â”œâ”€â”€ icons                 <span class="hljs-comment"># æ’ä»¶å›¾æ ‡</span>
â”œâ”€â”€ background.js         <span class="hljs-comment"># åå°æœåŠ¡</span>
â”œâ”€â”€ content.js            <span class="hljs-comment"># å†…å®¹è„šæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</span>
â”œâ”€â”€ inject.js             <span class="hljs-comment"># æ³¨å…¥é¡µé¢è„šæœ¬ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰</span>
â”œâ”€â”€ sidepanel.html        <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢</span>
â”œâ”€â”€ sidepanel.js          <span class="hljs-comment"># ä¾§è¾¹æ ç•Œé¢é€»è¾‘</span>
â”œâ”€â”€ sidepanel.css         <span class="hljs-comment"># ä¾§è¾¹æ æ ·å¼</span>
â””â”€â”€ tencentOCR.js         <span class="hljs-comment"># OCR SDK</span>

</code></pre>
<h2 data-id="heading-13">æ ¸å¿ƒä»£ç è§£æ</h2>
<h3 data-id="heading-14">1. è§£é™¤å¤åˆ¶é™åˆ¶  ï¼ˆäº”å±‚é˜²æŠ¤ï¼‰</h3>
<h4 data-id="heading-15">è¿™æ˜¯æ’ä»¶çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œé€šè¿‡å¤šå±‚é˜²æŠ¤ç¡®ä¿è§£é™¤é™åˆ¶ï¼š</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b625ffe3f14f719c51acb48cc6483d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=ke%2F2EtVHZzSQrjYga2Gt9AoHwfg%3D" alt="image.png" width="30%" loading="lazy"/>
<h4 data-id="heading-16">å®ç°åŸç†</h4>
<p>é€šè¿‡<strong>äº”å±‚é˜²æŠ¤</strong>ç¡®ä¿è§£é™¤é™åˆ¶</p>
<h4 data-id="heading-17">ç¬¬ä¸€å±‚ï¼šCSS å¼ºåˆ¶è¦†ç›–</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> style = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'style'</span>);
style.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  html, body, * {
    -webkit-user-select: text !important;
    -moz-user-select: text !important;
    user-select: text !important;
  }
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(style);
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šå¼ºåˆ¶å…è®¸æ–‡æœ¬é€‰ä¸­ï¼Œè¦†ç›–ç½‘ç«™çš„ CSS é™åˆ¶ã€‚</p>
<h4 data-id="heading-18">ç¬¬äºŒå±‚ï¼šäº‹ä»¶æ‹¦æˆªï¼ˆæ•è·é˜¶æ®µï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨æ•è·é˜¶æ®µæ‹¦æˆªæ‰€æœ‰é™åˆ¶äº‹ä»¶</span>
<span class="hljs-keyword">const</span> restrictedEvents = [
  <span class="hljs-string">'copy'</span>, <span class="hljs-string">'cut'</span>, <span class="hljs-string">'paste'</span>, <span class="hljs-string">'contextmenu'</span>, 
  <span class="hljs-string">'selectstart'</span>, <span class="hljs-string">'dragstart'</span>, <span class="hljs-string">'keydown'</span>, <span class="hljs-string">'keyup'</span>, <span class="hljs-string">'keypress'</span>
];

<span class="hljs-keyword">const</span> <span class="hljs-title function_">stopEvent</span> = (<span class="hljs-params">e</span>) =&gt; {
  e.<span class="hljs-title function_">stopPropagation</span>();
  e.<span class="hljs-property">stopImmediatePropagation</span>?.(); <span class="hljs-comment">// é˜»æ­¢å…¶ä»–ç›‘å¬å™¨æ‰§è¡Œ</span>
};

<span class="hljs-comment">// åœ¨ windowã€documentã€documentElementã€body å››ä¸ªå±‚çº§åŒæ—¶ç›‘å¬</span>
[<span class="hljs-variable language_">window</span>, <span class="hljs-variable language_">document</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">target</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (target) {
    restrictedEvents.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventType</span> =&gt;</span> {
      target.<span class="hljs-title function_">addEventListener</span>(eventType, stopEvent, <span class="hljs-literal">true</span>); <span class="hljs-comment">// â† æ•è·é˜¶æ®µ</span>
    });
  }
});
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨<strong>æ•è·é˜¶æ®µ</strong>æ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰</li>
<li>ä½¿ç”¨Â <code>stopImmediatePropagation()</code>Â é˜»æ­¢å…¶ä»–ç›‘å¬å™¨</li>
<li>åœ¨å››ä¸ªå±‚çº§ç›‘å¬ï¼ˆwindow â†’ document â†’ html â†’ bodyï¼‰</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¦ç”¨æ•è·é˜¶æ®µï¼Ÿ</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">äº‹ä»¶æµï¼šæ•è·é˜¶æ®µ â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡é˜¶æ®µ 
<span class="hljs-code">        â†“
  æˆ‘ä»¬åœ¨è¿™é‡Œæ‹¦æˆªï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
</span></code></pre>
<h4 data-id="heading-19">ç¬¬ä¸‰å±‚ï¼šç§»é™¤å†…è”äº‹ä»¶å±æ€§</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç§»é™¤æ‰€æœ‰äº‹ä»¶å±æ€§ï¼ˆå¦‚ oncopy="return false"ï¼‰</span>
<span class="hljs-keyword">const</span> eventAttrs = [
  <span class="hljs-string">'oncopy'</span>, <span class="hljs-string">'oncut'</span>, <span class="hljs-string">'onpaste'</span>, <span class="hljs-string">'oncontextmenu'</span>,
  <span class="hljs-string">'onselectstart'</span>, <span class="hljs-string">'onkeydown'</span>, <span class="hljs-string">'ondragstart'</span>
];

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(eventAttrs.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> <span class="hljs-string">`[<span class="hljs-subst">${a}</span>]`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">','</span>))
  .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> {
    eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> el.<span class="hljs-title function_">removeAttribute</span>(attr));
  });
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç§»é™¤ HTML æ ‡ç­¾ä¸Šçš„å†…è”äº‹ä»¶ï¼ˆå¦‚ <code>oncopy="return false"</code>ï¼‰</p>
<h4 data-id="heading-20">ç¬¬å››å±‚ï¼šAPI åŠ«æŒï¼ˆé‡å†™ preventDefaultï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ³¨å…¥åˆ°é¡µé¢ä¸Šä¸‹æ–‡ï¼Œé‡å†™åŸç”Ÿæ–¹æ³•</span>
<span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);
script.<span class="hljs-property">textContent</span> = <span class="hljs-string">`
  (function() {
    if (window.__preventDefaultDisabled) return;
    window.__preventDefaultDisabled = true;
    
    const blockedEvents = new Set(<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(restrictedEvents)}</span>);
    const originalPreventDefault = Event.prototype.preventDefault;
    
    Event.prototype.preventDefault = function() {
      if (blockedEvents.has(this.type)) return; // â† ç¦ç”¨ preventDefault
      return originalPreventDefault.call(this);
    };
  })();
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">appendChild</span>(script);
script.<span class="hljs-title function_">remove</span>();
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ³¨å…¥ <code>&lt;script&gt;</code> æ ‡ç­¾ï¼Ÿ</strong></p>
<ul>
<li>Content Script è¿è¡Œåœ¨<strong>éš”ç¦»ç¯å¢ƒ</strong>ï¼ˆIsolated Worldï¼‰</li>
<li>æ— æ³•ç›´æ¥ä¿®æ”¹é¡µé¢çš„Â <code>Event.prototype</code></li>
<li>é€šè¿‡Â <code>&lt;script&gt;</code>Â æ ‡ç­¾æ³¨å…¥åˆ°<strong>é¡µé¢ä¸Šä¸‹æ–‡</strong>ï¼ˆMain Worldï¼‰</li>
</ul>
<p><code>ğŸ’¡ æ·±å…¥ç†è§£è„šæœ¬é€šä¿¡æœºåˆ¶</code></p>
<p>å¦‚æœä½ æƒ³æ·±å…¥äº†è§£æ’ä»¶è„šæœ¬é€šä¿¡æœºåˆ¶ï¼Œå¼ºçƒˆæ¨èé˜…è¯»ï¼š <strong><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯ Chrome æ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a></strong>   <a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">juejin.cn/post/757352â€¦</a> è¿™ç¯‡æ–‡ç« ç”¨åŸç†+ç¤ºä¾‹æ‹†è§£äº†å¸¸è§è¯¯åŒºä¸æ­£ç¡®åšæ³•ï¼Œèƒ½å¸®ä½ æ›´é€å½»åœ°ç†è§£æœ¬æ’ä»¶çš„é€šä¿¡æœºåˆ¶ã€‚</p>
<h4 data-id="heading-21">ç¬¬äº”å±‚ï¼šåŠ¨æ€å†…å®¹ç›‘å¬</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ </span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
  mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">mutation</span>) =&gt;</span> {
    mutation.<span class="hljs-property">addedNodes</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">node</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (node <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Element</span>) {
        <span class="hljs-comment">// ç§»é™¤äº‹ä»¶å±æ€§</span>
        eventAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> node.<span class="hljs-title function_">removeAttribute</span>(attr));
        <span class="hljs-comment">// å¼ºåˆ¶å…è®¸é€‰ä¸­</span>
        node.<span class="hljs-property">style</span>?.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'user-select'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'important'</span>);
      }
    });
  });
});

observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>, {
  <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
});
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼šç›‘å¬ DOM å˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†åŠ¨æ€åŠ è½½çš„å…ƒç´ ï¼ˆå¦‚ React/Vue æ¸²æŸ“çš„å†…å®¹ï¼‰ã€‚</p>
<h3 data-id="heading-22">2. è‡ªé€‰åŒºåŸŸæˆªå›¾</h3>
<h3 data-id="heading-23">ä¸‰æ­¥å®Œæˆæˆªå›¾</h3>
<ol>
<li><strong>æŒ‰ä¸‹æŒ‰é’®</strong>Â â†’ å±å¹•å˜æš—</li>
<li><strong>æ‹–åŠ¨æ¡†</strong>Â â†’ ï¼šæŒ‰ä½é¼ æ ‡æ‹–å‡ºä¸€ä¸ªæ¡†ï¼Œé€‰å‡ºä½ æƒ³è¦çš„åŒºåŸŸ</li>
<li><strong>æ¾å¼€æ‰‹</strong>Â â†’ è‡ªåŠ¨æˆªå–æ¡†å†…å†…å®¹</li>
</ol>
<h4 data-id="heading-24">å®ç°æ­¥éª¤</h4>
<h3 data-id="heading-25">Â è¿™èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-26"><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºé€‰æ¡†å·¥å…·</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»ºé®ç½©å±‚ï¼ˆå°±åƒç»™å±å¹•ç›–äº†ä¸€å±‚ç£¨ç ‚ç»ç’ƒï¼‰</span>
<span class="hljs-keyword">const</span> overlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
overlay.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
  position: fixed;
  left: 0; top: 0;
  width: 100vw; height: 100vh;
  background: rgba(0,0,0,0.5);  /* åŠé€æ˜é»‘è‰² */
  cursor: crosshair;             /* åå­—å‡†æ˜Ÿ */
  z-index: 999999;
`</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(overlay);

</code></pre>
<p>å½“ä½ ç‚¹å‡»"è‡ªé€‰åŒºåŸŸ"åï¼Œæ’ä»¶ä¼šï¼š</p>
<ul>
<li>åœ¨å±å¹•ä¸Šç›–ä¸€å±‚åŠé€æ˜é»‘è‰²é®ç½©ï¼ˆè®©ä½ çœ‹æ¸…æ¥šè¦é€‰ä»€ä¹ˆï¼‰</li>
<li>é¼ æ ‡å˜æˆåå­—å‡†æ˜Ÿï¼ˆæç¤ºä½ å¯ä»¥å¼€å§‹æ‹–æ¡†äº†ï¼‰</li>
<li>å‡†å¤‡å¥½ä¸€ä¸ªç»¿è‰²è¾¹æ¡†ï¼ˆç­‰ä½ æ‹–å‡ºæ¥å°±æ˜¾ç¤ºï¼‰</li>
</ul>
<h4 data-id="heading-27"><strong>2. è·Ÿéšä½ çš„é¼ æ ‡ç”»æ¡†ï¼ˆå®æ—¶åé¦ˆï¼‰</strong></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// é¼ æ ‡æŒ‰ä¸‹ â†’ è®°å½•èµ·ç‚¹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseDown</span>(<span class="hljs-params">e</span>) {
  startX = e.<span class="hljs-property">clientX</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ X åæ ‡</span>
  startY = e.<span class="hljs-property">clientY</span>;  <span class="hljs-comment">// è®°ä½ä½ ç‚¹å‡»çš„ Y åæ ‡</span>
}

<span class="hljs-comment">// é¼ æ ‡ç§»åŠ¨ â†’ å®æ—¶æ›´æ–°æ¡†çš„å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleMouseMove</span>(<span class="hljs-params">e</span>) {
  currentX = e.<span class="hljs-property">clientX</span>;
  currentY = e.<span class="hljs-property">clientY</span>;
  
  <span class="hljs-comment">// è®¡ç®—æ¡†çš„ä½ç½®å’Œå¤§å°ï¼ˆæ”¯æŒåå‘æ‹–æ‹½ï¼‰</span>
  <span class="hljs-keyword">const</span> left = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startX, currentX);   <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºå·¦è¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> top = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startY, currentY);    <span class="hljs-comment">// å–æœ€å°å€¼ä½œä¸ºä¸Šè¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentX - startX); <span class="hljs-comment">// å®½åº¦ = ç»å¯¹å€¼</span>
  <span class="hljs-keyword">const</span> height = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(currentY - startY);<span class="hljs-comment">// é«˜åº¦ = ç»å¯¹å€¼</span>
  
  <span class="hljs-comment">// æ›´æ–°ç»¿è‰²è¾¹æ¡†çš„ä½ç½®</span>
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">left</span> = left + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = top + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = width + <span class="hljs-string">'px'</span>;
  selectionBox.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = height + <span class="hljs-string">'px'</span>;
}

</code></pre>
<p>å½“ä½ æŒ‰ä½é¼ æ ‡æ‹–åŠ¨æ—¶ï¼š</p>
<ul>
<li>è®°å½•ä½ <strong>æŒ‰ä¸‹çš„ä½ç½®</strong>ï¼ˆèµ·ç‚¹ï¼‰</li>
<li>è®°å½•ä½ <strong>å½“å‰çš„ä½ç½®</strong>ï¼ˆç»ˆç‚¹ï¼‰</li>
<li>ç”¨è¿™ä¸¤ä¸ªç‚¹çš„æ¨ªåæ ‡å’Œçºµåæ ‡çš„å·®å€¼ç”»å‡ºä¸€ä¸ªçŸ©å½¢æ¡†</li>
</ul>
<p><strong>æ”¯æŒåå‘æ‹–æ‹½</strong>ï¼šä¸ç®¡ä½ ä»å·¦ä¸Šå¾€å³ä¸‹æ‹–ï¼Œè¿˜æ˜¯ä»å³ä¸‹å¾€å·¦ä¸Šæ‹–ï¼Œéƒ½èƒ½æ­£ç¡®è¯†åˆ«ï¼</p>
<p><strong>ä¸¾ä¸ªä¾‹å­</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">ä½ ä» (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>) æ‹–åˆ° (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>)
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

ä½ ä» (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>) æ‹–åˆ° (<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)ï¼ˆåå‘ï¼‰
â†’ æ¡†çš„ä½ç½®ï¼šleft=<span class="hljs-number">100</span>, top=<span class="hljs-number">100</span>, width=<span class="hljs-number">200</span>, height=<span class="hljs-number">200</span> âœ…

</code></pre>
<h4 data-id="heading-28"><strong>3. ç²¾å‡†è£å‰ªï¼ˆåƒå‰ªåˆ€ä¸€æ ·è£å›¾ï¼‰</strong></h4>
<p>å½“ä½ æ¾å¼€é¼ æ ‡åï¼Œæ’ä»¶ä¼šï¼š</p>
<ol>
<li><strong>å…ˆæˆªå–æ•´ä¸ªé¡µé¢</strong>ï¼ˆå°±åƒæ‹äº†ä¸€å¼ å…¨å±ç…§ç‰‡ï¼‰</li>
<li><strong>å†è£å‰ªå‡ºä½ é€‰ä¸­çš„éƒ¨åˆ†</strong>ï¼ˆå°±åƒç”¨å‰ªåˆ€å‰ªå‡ºä½ è¦çš„åŒºåŸŸï¼‰</li>
</ol>
<p><strong>å…³é”®æŠ€æœ¯ï¼šCanvas ç”»å¸ƒè£å‰ª</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç”»å¸ƒï¼ˆå°±åƒå‡†å¤‡ä¸€å¼ ç™½çº¸ï¼‰</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);

<span class="hljs-comment">// 2. è®¾ç½®ç”»å¸ƒå¤§å° = ä½ é€‰ä¸­åŒºåŸŸçš„å¤§å°</span>
canvas.<span class="hljs-property">width</span> = width;
canvas.<span class="hljs-property">height</span> = height;

<span class="hljs-comment">// 3. æŠŠå…¨å±æˆªå›¾çš„"é€‰ä¸­éƒ¨åˆ†"ç”»åˆ°ç”»å¸ƒä¸Š</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,  <span class="hljs-comment">// å…¨å±æˆªå›¾</span>
  left, top,        <span class="hljs-comment">// ä»å“ªé‡Œå¼€å§‹è£å‰ªï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å·¦ä¸Šè§’ï¼‰</span>
  width, height,    <span class="hljs-comment">// è£å‰ªå¤šå¤§ï¼ˆä½ é€‰ä¸­åŒºåŸŸçš„å®½é«˜ï¼‰</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,             <span class="hljs-comment">// ç”»åˆ°ç”»å¸ƒçš„å“ªé‡Œï¼ˆä»ç”»å¸ƒå·¦ä¸Šè§’å¼€å§‹ï¼‰</span>
  width, height     <span class="hljs-comment">// ç”»å¤šå¤§ï¼ˆå¡«æ»¡æ•´ä¸ªç”»å¸ƒï¼‰</span>
);

<span class="hljs-comment">// 4. å¯¼å‡ºæˆå›¾ç‰‡</span>
<span class="hljs-keyword">const</span> croppedImage = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);

</code></pre>
<p><strong>ç”¨ç”Ÿæ´»åœºæ™¯ç±»æ¯”</strong>ï¼š</p>
<ul>
<li>å…¨å±æˆªå›¾ = æ‹äº†ä¸€å¼ ç­çº§ç…§</li>
<li>ä½ é€‰ä¸­çš„åŒºåŸŸ = ä½ åªæƒ³è¦ç…§ç‰‡é‡Œçš„æŸä¸ªäºº</li>
<li>Canvas è£å‰ª = ç”¨å‰ªåˆ€æŠŠé‚£ä¸ªäººå‰ªä¸‹æ¥</li>
</ul>
<h4 data-id="heading-29"><strong>æ­¥éª¤ 4ï¼šå››é®ç½©é«˜äº®æ•ˆæœ</strong></h4>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚æœåªç”¨ä¸€ä¸ªå…¨å±é®ç½©ï¼Œé€‰ä¸­çš„åŒºåŸŸä¹Ÿä¼šè¢«é®ä½ï¼Œç”¨æˆ·çœ‹ä¸æ¸…é€‰äº†ä»€ä¹ˆã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ 4 ä¸ªé®ç½©å—å›´ç»•é€‰åŒºã€‚</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ä¸Šé®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å·¦é®ç½©â”‚   é€‰åŒºï¼ˆé«˜äº®ï¼‰ â”‚  å³é®ç½©   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    ä¸‹é®ç½©ï¼ˆåŠé€æ˜é»‘è‰²ï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

</code></pre>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ›å»º 4 ä¸ªé®ç½©å—</span>
<span class="hljs-keyword">const</span> masks = [<span class="hljs-string">'top'</span>, <span class="hljs-string">'right'</span>, <span class="hljs-string">'bottom'</span>, <span class="hljs-string">'left'</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">position</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> mask = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  mask.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = <span class="hljs-string">`
    position: fixed;
    background: rgba(0,0,0,0.5);
    pointer-events: none; /* ä¸é˜»æŒ¡é¼ æ ‡äº‹ä»¶ */
  `</span>;
  <span class="hljs-keyword">return</span> mask;
});

<span class="hljs-comment">// æ ¹æ®é€‰åŒºä½ç½®æ›´æ–°é®ç½©å—å¤§å°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateMasks</span>(<span class="hljs-params">left, top, width, height</span>) {
  masks[<span class="hljs-number">0</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:0; width:100vw; height:<span class="hljs-subst">${top}</span>px;`</span>; <span class="hljs-comment">// ä¸Š</span>
  masks[<span class="hljs-number">1</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:<span class="hljs-subst">${left+width}</span>px; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerWidth-left-width}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å³</span>
  masks[<span class="hljs-number">2</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top+height}</span>px; width:100vw; height:<span class="hljs-subst">${<span class="hljs-variable language_">window</span>.innerHeight-top-height}</span>px;`</span>; <span class="hljs-comment">// ä¸‹</span>
  masks[<span class="hljs-number">3</span>].<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> += <span class="hljs-string">`left:0; top:<span class="hljs-subst">${top}</span>px; width:<span class="hljs-subst">${left}</span>px; height:<span class="hljs-subst">${height}</span>px;`</span>; <span class="hljs-comment">// å·¦</span>
}

</code></pre>
<h4 data-id="heading-30">é«˜åˆ†å±é€‚é…ï¼ˆè®©å›¾ç‰‡æ›´æ¸…æ™°ï¼‰</h4>
<p><strong>é—®é¢˜</strong>ï¼šRetina å±å¹•ï¼ˆå¦‚ MacBookï¼‰çš„åƒç´ å¯†åº¦æ˜¯æ™®é€šå±å¹•çš„ 2 å€ï¼Œå¦‚æœä¸å¤„ç†ä¼šå¯¼è‡´æˆªå›¾æ¨¡ç³Šã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¹˜ä»¥è®¾å¤‡åƒç´ æ¯”</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> scale = <span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span> || <span class="hljs-number">1</span>; <span class="hljs-comment">// Retina å±å¹• = 2ï¼Œæ™®é€šå±å¹• = 1</span>

<span class="hljs-comment">// è®¾ç½®ç”»å¸ƒå¤§å°æ—¶è¦ä¹˜ä»¥ scale</span>
canvas.<span class="hljs-property">width</span> = width * scale;
canvas.<span class="hljs-property">height</span> = height * scale;

<span class="hljs-comment">// è£å‰ªæ—¶ä¹Ÿè¦ä¹˜ä»¥ scale</span>
ctx.<span class="hljs-title function_">drawImage</span>(
  fullScreenImage,
  left * scale, top * scale,     <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  width * scale, height * scale, <span class="hljs-comment">// â† ä¹˜ä»¥ scale</span>
  <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,
  width * scale, height * scale
);

</code></pre>
<h4 data-id="heading-31">å®Œæ•´æµç¨‹</h4>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ef6def5a66b46c584a8f038e0b0ff3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764748905&amp;x-signature=Myi4TWTPsH05RTxorW%2B1%2BNqRZNw%3D" alt="image.png" width="30%" loading="lazy"/>
<h2 data-id="heading-32">æ—¶åºå›¾</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
  participant SP as Sidepanel
  participant CT as Content Script
  participant BG as Background

  SP-&gt;&gt;CT: startAreaCapture
  CT-&gt;&gt;CT: createCaptureUI + äº‹ä»¶ç»‘å®š
  CT-&gt;&gt;CT: ç”¨æˆ·æ‹–æ‹½/æ›´æ–°é€‰åŒº
  CT-&gt;&gt;CT: mouseup â†’ captureSelectedArea
  CT-&gt;&gt;BG: captureVisible
  BG--&gt;&gt;CT: DataURL(æ•´é¡µå¯è§åŒºåŸŸ)
  CT-&gt;&gt;CT: Canvas è£å‰ª(è€ƒè™‘ devicePixelRatio)
  CT-&gt;&gt;SP: areaCaptureDone(DataURL)
  SP-&gt;&gt;SP: é¢„è§ˆ + OCR è¯†åˆ«
</code></pre>
<h3 data-id="heading-33">3. æœ¬åœ°ä¸Šä¼ å›¾ç‰‡</h3>
<h4 data-id="heading-34">æ–¹å¼ä¸€ï¼šç‚¹å‡»ä¸Šä¼ </h4>
<p><strong>HTML</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;input type=<span class="hljs-string">"file"</span> id=<span class="hljs-string">"uploadInput"</span> accept=<span class="hljs-string">"image/*"</span> style=<span class="hljs-string">"display:none"</span>&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"document.getElementById('uploadInput').click()"</span>&gt;</span>
  ğŸ“ ä¸Šä¼ å›¾ç‰‡
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<p><strong>JavaScript</strong>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'uploadInput'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">target</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file) <span class="hljs-keyword">return</span>;
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<h4 data-id="heading-35">æ–¹å¼äºŒï¼šæ‹–æ‹½ä¸Šä¼ </h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> dropZone = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'dropZone'</span>);

<span class="hljs-comment">// 1. é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>, <span class="hljs-string">'dragleave'</span>, <span class="hljs-string">'drop'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();
  });
});

<span class="hljs-comment">// 2. è§†è§‰åé¦ˆ</span>
[<span class="hljs-string">'dragenter'</span>, <span class="hljs-string">'dragover'</span>].<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">eventName</span> =&gt;</span> {
  dropZone.<span class="hljs-title function_">addEventListener</span>(eventName, <span class="hljs-function">() =&gt;</span> {
    dropZone.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'drag-over'</span>);
  });
});

<span class="hljs-comment">// 3. å¤„ç†æ–‡ä»¶</span>
dropZone.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> file = e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">files</span>[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">if</span> (!file.<span class="hljs-property">type</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'image/'</span>)) {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼'</span>);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();
  reader.<span class="hljs-property">onload</span> = <span class="hljs-keyword">async</span> (event) =&gt; {
    <span class="hljs-keyword">const</span> base64 = event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
  };
  reader.<span class="hljs-title function_">readAsDataURL</span>(file);
});

</code></pre>
<p><strong>CSS</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-id">#dropZone</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> dashed <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-id">#dropZone</span><span class="hljs-selector-class">.drag-over</span> {
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#4CAF50</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">76</span>, <span class="hljs-number">175</span>, <span class="hljs-number">80</span>, <span class="hljs-number">0.1</span>);
}

</code></pre>
<ul>
<li>ä½œç”¨ï¼šæŠŠå›¾ç‰‡æ‹–è¿›ä¸Šä¼ å›¾ç‰‡åŒºåŸŸ ï¼Œæ‹¦ä½æµè§ˆå™¨é»˜è®¤è¡Œä¸ºï¼Œåœ¨ drop æ—¶è¯»æ–‡ä»¶å¹¶è¯†åˆ«æˆ–é¢„è§ˆã€‚</li>
</ul>
<h3 data-id="heading-36">Â 4.é¡µé¢æˆªå›¾</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> capturePageBtn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'capturePageBtn'</span>);

capturePageBtn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">const</span> [tab] = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">query</span>({ <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">currentWindow</span>: <span class="hljs-literal">true</span> });
  
  <span class="hljs-keyword">const</span> dataUrl = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">tabs</span>.<span class="hljs-title function_">captureVisibleTab</span>(tab.<span class="hljs-property">windowId</span>, {
    <span class="hljs-attr">format</span>: <span class="hljs-string">'png'</span>
  });
  
  <span class="hljs-keyword">const</span> base64 = dataUrl.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>)[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">recognizeText</span>(base64);
});
</code></pre>
<p>ç›´æ¥ä½¿ç”¨chromeæ’ä»¶çš„æˆªå›¾åŠŸèƒ½
<strong>æƒé™é…ç½®</strong>ï¼ˆmanifest.jsonï¼‰ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span> <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"activeTab"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tabs"</span><span class="hljs-punctuation">]</span> <span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-37">5. OCR è¯†åˆ«</h3>
<p>ä½¿ç”¨è…¾è®¯äº‘ OCR APIï¼Œé€šè¿‡ TC3-HMAC-SHA256 ç­¾åè°ƒç”¨ <code>GeneralBasicOCR</code> æ¥å£ï¼Œæ¯æœˆ 1000 æ¬¡å…è´¹é¢åº¦ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ ¸å¿ƒè°ƒç”¨ä»£ç </span>
<span class="hljs-keyword">const</span> ocr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TencentOCR</span>(secretId, secretKey);
<span class="hljs-keyword">const</span> text = <span class="hljs-keyword">await</span> ocr.<span class="hljs-title function_">recognizeText</span>(imageBase64);
</code></pre>
<h2 data-id="heading-38">æ€»ç»“</h2>
<p>è¿™ä¸ªæ’ä»¶è§£å†³äº†æ—¥å¸¸æµè§ˆç½‘é¡µæ—¶çš„ä¸¤å¤§ç—›ç‚¹ï¼š</p>
<ol>
<li><strong>è§£é™¤é™åˆ¶</strong>ï¼šè®©ä½ è‡ªç”±å¤åˆ¶ä»»ä½•å†…å®¹</li>
<li><strong>OCR è¯†åˆ«</strong>ï¼šå¿«é€Ÿæå–å›¾ç‰‡æ–‡å­—</li>
</ol>
<h3 data-id="heading-39">æŠ€æœ¯äº®ç‚¹</h3>






























<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>éš¾ç‚¹</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>è§£é™¤é™åˆ¶</strong></td><td>ç½‘ç«™å¤šå±‚é˜²æŠ¤</td><td>äº”å±‚æ‹¦æˆª + API åŠ«æŒ</td></tr><tr><td><strong>è‡ªé€‰æˆªå›¾</strong></td><td>é«˜åˆ†å±æ¨¡ç³Š</td><td>devicePixelRatio é€‚é…</td></tr><tr><td><strong>æ‹–æ‹½ä¸Šä¼ </strong></td><td>è§†è§‰åé¦ˆ</td><td>CSS è¿‡æ¸¡åŠ¨ç”»</td></tr><tr><td><strong>OCR è¯†åˆ«</strong></td><td>API ç­¾å</td><td>TC3-HMAC-SHA256</td></tr></tbody></table>
<p>å¸Œæœ›è¿™ä¸ªæ’ä»¶èƒ½å¸®åˆ°å¤§å®¶ï¼å¦‚æœæœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï½</p>
<h2 data-id="heading-40">ğŸ”— ç›¸å…³é“¾æ¥</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fextensions%2F" target="_blank" title="https://developer.chrome.com/docs/extensions/" ref="nofollow noopener noreferrer">Chrome Extension å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.tencent.com%2Fdocument%2Fproduct%2F866" target="_blank" title="https://cloud.tencent.com/document/product/866" ref="nofollow noopener noreferrer">è…¾è®¯äº‘ OCR æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FCanvas_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API" ref="nofollow noopener noreferrer">Canvas API æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FHTML_Drag_and_Drop_API" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/HTML_Drag_and_Drop_API" ref="nofollow noopener noreferrer">Drag and Drop API</a></li>
</ul>
<blockquote>
<p>æœ¬æ’ä»¶ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·éµå®ˆä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>åˆæ³•ä½¿ç”¨</strong>ï¼šè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”æˆ–ä¾µçŠ¯ä»–äººçŸ¥è¯†äº§æƒ</li>
<li><strong>å°Šé‡ç‰ˆæƒ</strong>ï¼šéµå®ˆç½‘ç«™æœåŠ¡æ¡æ¬¾</li>
</ol>
<p>å¦‚æœè§‰å¾—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ ğŸ‘ æ”¶è— â­ å…³æ³¨ ğŸ”” æ”¯æŒä¸€ä¸‹ï¼</p>
<p><strong>å¾€æœŸå®æˆ˜æ¨èï¼š</strong></p>
<ul>
<li>
<p><a href="https://juejin.cn/post/7549096640340426802" target="_blank" title="https://juejin.cn/post/7549096640340426802">Vue3 åå°åˆ†é¡µå†™è…»äº†ï¼Ÿæˆ‘ç”¨ 1 ä¸ª Hook åˆ æ‰ 90% é‡å¤ä»£ç ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7511332054941188147" target="_blank" title="https://juejin.cn/post/7511332054941188147">âš¡ ä¸€ä¸ªVueè‡ªå®šä¹‰æŒ‡ä»¤æå®šä¸æ»‘æ‹–æ‹½åˆ—è¡¨ï¼Œå‘Šåˆ«å¤æ‚ç»„ä»¶å°è£…
</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7543806966926802971" target="_blank" title="https://juejin.cn/post/7543806966926802971">ğŸ”¥ è¿™æ‰æ˜¯ Vue é©±åŠ¨çš„ Chrome æ’ä»¶å·¥ç¨‹åŒ–æ­£ç¡®æ‰“å¼€æ–¹å¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566299971643424819" target="_blank" title="https://juejin.cn/post/7566299971643424819">  è€æ¿é—®æˆ‘ï¼šAIçœŸèƒ½ä¸€é”®ç”»å¹¿å·æ—…æ¸¸è·¯çº¿å›¾ï¼Ÿæˆ‘ç”¨ MCP ç°åœºå¼€å›¾</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7559124639323242506" target="_blank" title="https://juejin.cn/post/7559124639323242506">ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘ï¼šå‘Šåˆ«å³é”®å¦å­˜ï¼Œä¸åˆ° 50 è¡Œä»£ç ä¸€é”®æ‰¹é‡ä¸‹è½½ç½‘é¡µå›¾ç‰‡</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7561612065707065390" target="_blank" title="https://juejin.cn/post/7561612065707065390"> å¥³æœ‹å‹ç‚¸äº†ï¼šåˆšæ‰“å¼€çš„ç½‘é¡µæ€ä¹ˆåˆæ²¡äº†ï¼Ÿæˆ‘åæ‰‹ç”©å‡ºä¸€é”®æ¢å¤æŒ‰é’®ï¼</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7562859113246343178" target="_blank" title="https://juejin.cn/post/7562859113246343178"> ä½ å®¶å­©å­åˆå·ç©ç½‘é¡µæ¸¸æˆ? è¯•è¯•è¿™ä¸ªé˜²æ²‰è¿·å·¥å…·</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7563830723057647643" target="_blank" title="https://juejin.cn/post/7563830723057647643">  å¥¹è¯´æƒ³è¦æµªæ¼«ï¼Œæˆ‘æŠŠæµè§ˆå™¨é¼ æ ‡æ¢æˆäº†æŸ´çŠ¬ï¼Œç‚¹ä¸€ä¸‹å°±æœ‰çƒŸèŠ±ï¼ˆé™„æºç ï¼‰</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7566677296801071155" target="_blank" title="https://juejin.cn/post/7566677296801071155"> å¥³æœ‹å‹è¢«é“¾æ¥æŠ˜ç£¨ç–¯äº†ï¼Œæˆ‘å†™äº†ä¸ªå·¥å…·ä¸€é”®è§£æ•‘</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7568055953310662707" target="_blank" title="https://juejin.cn/post/7568055953310662707"> ä¸Šç­æ‘¸é±¼çœ‹æ˜é‡‘ï¼Œè€æ¿çªç„¶å‡ºç°åœ¨èº«å...</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238"> ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955"> å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a></p>
</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼]]></title>    <link>https://juejin.cn/post/7576210031873409065</link>    <guid>https://juejin.cn/post/7576210031873409065</guid>    <pubDate>2025-11-25T02:46:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576210031873409065" data-draft-id="7576181242582630463" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-25T02:46:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸å¦‚æ‘¸é±¼å»"/> <meta itemprop="url" content="https://juejin.cn/user/26044011388510"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼å‘å¸ƒäº†ï¼Ÿæˆ‘ç”¨å®ƒå°†åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºå¼€æºäº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26044011388510/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸å¦‚æ‘¸é±¼å»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:46:27.000Z" title="Tue Nov 25 2025 02:46:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    172
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸å¦‚æ‘¸é±¼å»ï¼Œæ¬¢è¿æ¥åˆ°æˆ‘çš„ AI ç¼–ç¨‹åˆ†äº«ä¸“æ ã€‚</p>
<p>ä¸€ä¸ªæœˆå‰æˆ‘å‘å¸ƒçš„ä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7554225547117576243" target="_blank" title="https://juejin.cn/post/7554225547117576243">ã€è€ä¹¡é¸¡ä¹Ÿå¼€æºï¼Ÿæˆ‘ç”¨ Trae SOLO åšäº†ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºï¼ã€‘</a>ï¼Œè®°å½•äº†ä½œä¸ºä¸€åçˆ±åšé¥­çš„ç¨‹åºå‘˜çš„æˆ‘ï¼Œä½¿ç”¨ TRAE SOLO å¿«é€Ÿæ„å»ºäº†ä¸€ä¸ªåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºçš„è¿‡ç¨‹ï¼Œåº”æœ‹å‹ä»¬çš„è¦æ±‚ï¼Œè¶ç€ TRAE SOLO æ­£å¼å‘å¸ƒï¼Œç”¨å®ƒæŠŠè¿™ä¸ªå°ç¨‹åºå¼€æºäº†ã€‚</p>
<h2 data-id="heading-0">TRAE SOLO æ­£å¼ç‰ˆ</h2>
<p>11 æœˆ 12 æ—¥ TRAE SOLO æ­£å¼ç‰ˆä¸Šçº¿äº†ï¼Œæ–°å¢ä¸‰æ å¸ƒå±€ã€DiffView å·¥å…·ã€SOLO Coder + Planï¼Œæ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œç­‰åŠŸèƒ½ï¼Œå¹¶ä¸Šçº¿äº†å…è´¹ä½“éªŒæ´»åŠ¨ï¼Œäººäººéƒ½å¯ä»¥ç”¨ SOLO äº†ã€‚</p>
<p>æˆ‘å¯æ˜¯ TRAE SOLO è€ç”¨æˆ·äº†ï¼ŒSOLO æ¨¡å¼ï¼ˆBeta ç‰ˆï¼‰ä¸Šçº¿çš„æ—¶å€™æˆ‘å°±æ‹¿åˆ°äº† SOLO CODEï¼Œå¹¶ä¸”ä½¿ç”¨å®ƒå®Œæˆäº†ã€Œå¤åˆ»ç«¥å¹´å¦å…‹å¤§æˆ˜ã€ã€ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­å°ç¨‹åºã€ç­‰å®è·µï¼Œå¹¶ä¸”åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨ TRAE å‚ä¸äº†å¾ˆå¤šä»»åŠ¡çš„å¼€å‘ã€‚å¦‚ä»Šæ­£å¼ç‰ˆå‘å¸ƒï¼Œè‡ªç„¶ä¸èƒ½é”™è¿‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4584916d38934f7e8e12a6e01b47e51d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=TLpMojBXj3XBaDhXyee5K0EOW%2B8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­</h2>
<p>ä¸€åˆ‡éƒ½æºè‡ªäºè€ä¹¡é¸¡å‘å¸ƒçš„ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ï¼Œ<code>CookLikeHOC</code>æ˜¯ä¸€ä¸ªæ‹¥æœ‰ 22k æ˜Ÿæ˜Ÿçš„ GitHub ä»“åº“ï¼Œå®ƒæ”¶å½•äº†ã€Šè€ä¹¡é¸¡èœå“æº¯æºæŠ¥å‘Šã€‹ä¸­å…¬å¸ƒçš„æ‰€æœ‰èœå“ã€‚</p>
<h2 data-id="heading-2">æŠ€æœ¯æ ˆ</h2>
<p>æˆ‘ä»¬å»¶ç»­ä¸Šç¯‡æ–‡ç« é€‰æ‹©å¥½çš„æŠ€æœ¯æ ˆï¼Œè¿™æ · AI å¯ä»¥åœ¨æˆ‘ä»¬è§„åˆ’å¥½çš„è·¯çº¿ä¸Šè¿›è¡Œå¼€å‘ï¼Œå¯ä»¥è¾¾åˆ°äº‹åŠåŠŸå€çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">å‰ç«¯æŠ€æœ¯æ ˆ</h3>
<p>å› ä¸ºæˆ‘æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‰ç«¯ç¨‹åºå‘˜ï¼Œæ‰€ä»¥å‰ç«¯æŠ€æœ¯æ ˆæ¯”è¾ƒç†Ÿï¼Œç›´æ¥é€‰æ‹©å¸¸ç”¨çš„æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>å°ç¨‹åºçš„å¼€å‘æ¡†æ¶: uni-app</li>
<li>å¼€å‘æ¨¡æ¿é¡¹ç›®: wot-starter åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
<li>ç»„ä»¶åº“: wot-ui åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwot-ui.cn%2F" target="_blank" title="https://wot-ui.cn/" ref="nofollow noopener noreferrer">wot-ui.cn/</a></li>
</ul>
<h3 data-id="heading-4">åç«¯æŠ€æœ¯æ ˆ</h3>
<p>æœåŠ¡ç«¯ä»ç„¶é€‰æ‹© TRAE SOLO é›†æˆçš„ Supabase ä½œä¸ºæˆ‘ä»¬çš„äº‘ç«¯æœåŠ¡ã€‚</p>
<h2 data-id="heading-5">å¼€å§‹SOLO</h2>
<p>æˆ‘ä»¬ä¹‹å‰å·²ç»æ­å»ºå¥½å°ç¨‹åºçš„åŸºç¡€é¡µé¢äº†ï¼Œç°åœ¨å¯ä»¥å¼€å§‹ä¼˜åŒ–éƒ¨åˆ†åŠŸèƒ½æ•´ç†å¼€å‘é˜¶æ®µçš„ SQL å’Œè„šæœ¬ä»¥ä¾¿å°†å°ç¨‹åºå¼€æºäº†ã€‚</p>
<h3 data-id="heading-6">ä¼˜åŒ– UI æ ·å¼</h3>
<blockquote>
<p>è¿™é‡Œæˆ‘ä»¬å…¨ç¨‹ä½¿ç”¨ SOLO Coder æ¨¡å¼ï¼Œå› ä¸ºå®ƒæ›´é€‚åˆè§£å†³å¤æ‚ç¼–ç¨‹é—®é¢˜ã€‚</p>
</blockquote>
<p>æ›´æ–°é¦–é¡µåˆ†ç±»å±•ç¤ºï¼Œæ”¯æŒå±•ç¤ºå…¨éƒ¨åˆ†ç±»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b8993eceada4be5bc69bd61fd4a5838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=m%2FPn4HU0c8M5WkiLefbFz4RkiHA%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥ä½¿ç”¨ DiffView åŠŸèƒ½æŸ¥çœ‹æ›´æ–°å†…å®¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70a474beefac4f31a37350af42a44c16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=V16kAPUDrJlO8tUOHZcDaNLj0eo%3D" alt="" loading="lazy"/></p>
<p>æ›´æ–°åæ•ˆæœå¦‚ä¸‹ï¼Œä½¿ç”¨ swiper å±•ç¤ºåˆ†ç±»ï¼Œæ”¯æŒå·¦å³æ»‘åŠ¨åˆ‡æ¢å±•ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6853318dd74e4aebac5ea01b4beba92f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=NyA%2B8qJigZi2Xc4l2kDiMawUCuA%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä½¿ç”¨ å³æ¢¦AI ç»™ä¸åŒåˆ†ç±»ç”Ÿæˆäº†ä¸ªå¯çˆ±çš„å›¾æ ‡ï¼Œéå¸¸ç®€å•çš„æç¤ºè¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d975f61a10304aecbd61f80e804dd397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2FvCekxtsx85pqIwZ5Z1QR6BLIxc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">ä¼˜åŒ–æ•°æ®å–å€¼</h3>
<p>æ‰“å¼€ TRAE SOLO æ¨¡å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°â€œé›†æˆâ€åŠŸèƒ½
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee498491217b4596b3d9d71244a5bd70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2BPEuy2a6RUgLk%2Bi3XKCBVdPV7lE%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨â€œé›†æˆâ€åŠŸèƒ½æ—¶ï¼Œæœ€å¥½åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œå› ä¸ºåœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æ‰æœ‰â€œé›†æˆâ€åŠŸèƒ½ï¼Œä¸‹å›¾æ˜¯ SOLO Coder å’Œ SOLO Builder çš„åŒºåˆ«ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43e0f0c378344ab79ae856060ad2178a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=0S0w0DcQnD%2B0pd3AqpbWMygfa0c%3D" alt="" loading="lazy"/></p>
<p>è¿›å…¥â€œé›†æˆâ€åŠŸèƒ½ï¼Œé€‰æ‹©è¿æ¥æˆ‘ä»¬çš„ supbaseã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20f438517539486a927246697f802626~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=XTpHq0%2BYBbEKmTjp8OnbdUSZp%2B4%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–é¦–é¡µå±•ç¤ºæ¯æ—¥æ¨èèœè°±çš„é€»è¾‘ï¼Œæ¯å¤©éšæœºä»æ¯ä¸ªåˆ†ç±»ä¸­æŸ¥è¯¢ 2 é“èœå±•ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aebc2295121b4eb2ae0d587376fd0ceb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=qucpO5vrAWfjzXER08CC%2BoICQ9M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88d91a6e88b344a9bdbe37e815604be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=MsqbtMg%2Fj2wwFZ%2Fe5jQbNLl5e5A%3D" alt="" loading="lazy"/></p>
<p>ä¼˜åŒ–èœè°±è¯¦æƒ…é¡µé¢ç›¸å…³æ¨èçš„é€»è¾‘ï¼Œå½“å‰èœè°±çš„ç›¸åŒåˆ†ç±»ä¸­éšæœºæ¨èäº”é“èœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/156b0d6199a64c728c790c05ae19b774~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=hinl4KG0O9dHNpcXml9av%2F5C%2BCM%3D" alt="" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d7c2f09b4a0467497e166b77d0e811f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=S5XY0OFa6ALygVmPZuSu0t87bzI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ•´ç†è„šæœ¬å¹¶å¼€æº</h3>
<p>ç”±äºè¿™ä¸ªæ”¹åŠ¨æ¶‰åŠæ–‡ä»¶å¤šï¼Œæ”¹åŠ¨å¤§ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åœ¨ SOLO Coder ä¸‹å¼€å¯ plan æ¨¡å¼ï¼Œè®© TRAE æå‰ç»™å‡ºè®¡åˆ’ï¼Œæˆ‘ä»¬ç¡®è®¤åå†ç”± TRAE è¿›è¡Œå¼€å‘ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5e9076d234c4ae3aa3474c1b7615116~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=McOKK0g6SY7Ihaz%2BjTIbJh9co3M%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a4ed207aac84810902c68e54f5367be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=i4eq8mRXz6ulLrtSCiu4pGwB7Qs%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä»”ç»†çœ‹ä¸€ä¸‹ SOLO Coder çš„æ–¹æ¡ˆï¼Œæ²¡æœ‰é—®é¢˜å°±è®©å®ƒå¼€å§‹æ‰§è¡Œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3bf0d032e47c4bf3b48e780480306063~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=7%2B1TC%2BgIVd%2BCirrwMml2IMCXXLA%3D" alt="" loading="lazy"/></p>
<p>SOLO Coder æ‰§è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬ç‚¹å‡»æŸ¥çœ‹å˜æ›´ï¼Œä½¿ç”¨ DiffView åŠŸèƒ½æ£€æŸ¥å˜æ›´æ–‡ä»¶ï¼Œåˆ¤æ–­ SOLO æ‰§è¡Œæ˜¯å¦æ­£ç¡®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b48b1c8323794644b92b90f592cbe5dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=1HJ7ccJmuonIqxLMwFaEj4c7H80%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„æ“ä½œéœ€è¦æ“ä½œæ•°æ®åº“ï¼Œå¯ä»¥åˆ‡æ¢åˆ° SOLO Builder æ¨¡å¼ï¼Œè®©å®ƒååŠ©æ“ä½œï¼Œå»ºè¡¨ã€æ‰§è¡ŒSQLã€è·å– supbase é…ç½®ï¼Œå®ƒéƒ½å¯ä»¥èƒœä»»ã€‚</p>
<h3 data-id="heading-9">é…ç½®CI/CD</h3>
<p>æˆ‘ä»¬ä½¿ç”¨ uni-mini-ci å®Œæˆæœ¬å°ç¨‹åºçš„ CI/CDæŒç»­é›†æˆï¼Œå°ç¨‹åºä¸€é”®éƒ¨ç½²ä¸å†æ˜¯æ¢¦ï¼Œè¿™é‡Œå°±ä¸è´´å®Œæ•´çš„ GitHub Action ä»£ç äº†ï¼Œå¤§å®¶å¯ä»¥å°ç¨‹åºçš„ GitHub ä»“åº“ä¸­çœ‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/866febb66aa94aa4aa33e9fd1dad0fa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=dBE1VUe86LNombeHW5veWLJIg8Q%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54cb9ff2f40444e0aa7940faeef6c1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=HJ4GBMK6SFaSsNoVuY%2BNQ2Ub7sc%3D" alt="" loading="lazy"/></p>
<p>å°† GitHub Action é…ç½®æ–‡ä»¶æ¨é€åˆ° GitHub ä¸Šï¼Œå°±å¯ä»¥æŒ‰ç…§ä¸‹å›¾æ“ä½œè¿›è¡Œæ‰‹åŠ¨å‘ç‰ˆï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡æ‰“ tag è§¦å‘å‘ç‰ˆï¼Œå‘ç‰ˆæ‰§è¡Œä¼šå°†ä»£ç æ¨é€åˆ°å¾®ä¿¡å°ç¨‹åºåå°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbb678aac5e3427d9329e9997acf4a1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=DFMBEHRk9%2F1ICuvyHhzxl9PpeaM%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åºåå°çœ‹åˆ°å¯¹åº”çš„å¼€å‘ç‰ˆæœ¬ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea6f6297bea543ec870916263ae1f315~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=Ey4cw2WZ5jVEfvDzPs3iuNa1lTw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">å®Œæ•´æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a25e26f54ce44f65a149ecd4085a419d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=pCw1tyb0Yfv4VNZz%2Fk9%2BT9aj8Qo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a76c41632884997a3c38078fd49b09f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=TMIiRJfc1a%2Fm%2Fi%2B%2BWaJlr08y5XQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20963583d96947379c373efe8e9dedd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5aaC5pG46bG85Y67:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650998&amp;x-signature=%2Fg6TuenSlLN5el0uySNaMwVhXbQ%3D" alt="" loading="lazy"/></p>
<p><em><strong>ä¹Ÿå¯ä»¥è‡ªè¡Œæœç´¢ã€Œé±¼å“¥èœè°±ã€è¿›è¡Œä½“éªŒ</strong></em></p>
<h2 data-id="heading-11">TRAE SOLO æ­£å¼ç‰ˆä½“éªŒ</h2>
<p>TRAE SOLO æ­£å¼ç‰ˆæ–°å¢äº† Plan æ¨¡å¼å’Œ SOLO Coder ç­‰ï¼Œå¯¹ç¼–ç¨‹ä½“éªŒçš„æå‡å¾ˆå¤§ï¼Œå‡å°‘äº†å¾ˆå¤š AI ä»‹å…¥åçš„å–„åå·¥ä½œã€‚ä¸è¿‡å¤±å» Claude ä»å¯¹å…¶èƒ½åŠ›é€ æˆäº†ä¸å°çš„å½±å“ï¼ŒæœŸå¾…åç»­å¯ä»¥åœ¨ SOLO æ¨¡å¼é›†æˆå¼ºå¤§çš„ Gemini 3 å’Œä¼˜ç§€çš„å›½äº§æ¨¡å‹ GLM ç­‰ï¼ŒIDE ä¸æ¨¡å‹ 2 è€…æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚</p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æˆ‘ä»¬å‡ ä¹é›¶ä»£ç  ç”¨ Trae SOLO å®Œæˆäº†ã€Œåƒè€ä¹¡é¸¡é‚£æ ·åšé¥­ã€å°ç¨‹åºçš„å¼€æºä¸ CI/CD æµç¨‹ï¼Œè¿‡ç¨‹ä¸­ä¿æŒæ•°æ®å¹²å‡€ã€çº¯å‡€ä¸Šä¸‹æ–‡ã€å¢é‡å¼æ²Ÿé€šç­‰ä¸‰ä¸ªåŸåˆ™ä»ç„¶æ˜¯ä½¿æˆ‘ä»¬äº‹åŠåŠŸå€çš„åˆ©å™¨ï¼Œè¿™å…¶å®å’Œå½“ä¸‹å¾ˆæµè¡Œçš„ SDD è§„èŒƒç›¸ç¬¦ï¼Œåœ¨è¿™ç§å°å‹é¡¹ç›®ä¸­ï¼ŒåŸºäºä¸€ä¸ªä¼˜ç§€çš„é¡¹ç›®æ¨¡æ¿å’Œè‰¯å¥½çš„éœ€æ±‚è¾“å…¥å’Œå¼€å‘è®¡åˆ’ï¼Œç”±è§„èŒƒé©±åŠ¨å¼€å‘ï¼Œèƒ½è®©é¡¹ç›®åšçš„æ›´å¥½ã€èµ°å¾—æ›´è¿œã€‚</p>
<p>å¥½äº†ï¼Œå®ç°è¿™ä¸ªå°ç¨‹åºåï¼Œå¤§å®¶ä¹Ÿå¯ä»¥åƒè€ä¹¡é¸¡é‚£æ ·åšé¥­äº†ï¼</p>
<h2 data-id="heading-13">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>å°ç¨‹åºï¼šã€Œé±¼å“¥èœè°±ã€</li>
<li>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMoonofweisheng%2FMyCookLikeHOC" target="_blank" title="https://github.com/Moonofweisheng/MyCookLikeHOC" ref="nofollow noopener noreferrer">github.com/Moonofweishâ€¦</a></li>
<li>CookLikeHOCï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGar-b-age%2FCookLikeHOC" target="_blank" title="https://github.com/Gar-b-age/CookLikeHOC" ref="nofollow noopener noreferrer">github.com/Gar-b-age/Câ€¦</a></li>
<li>é¡¹ç›®æ¨¡æ¿ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fstarter.wot-ui.cn%2F" target="_blank" title="https://starter.wot-ui.cn/" ref="nofollow noopener noreferrer">starter.wot-ui.cn/</a></li>
</ul>
<p><em><strong>æ¬¢è¿è¯„è®ºåŒºæ²Ÿé€šã€è®¨è®ºğŸ‘‡ğŸ‘‡</strong></em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576181242582892607</link>    <guid>https://juejin.cn/post/7576181242582892607</guid>    <pubDate>2025-11-25T03:15:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582892607" data-draft-id="7576212547235135531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T03:15:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹çŒ«deå°éƒ­"/> <meta itemprop="url" content="https://juejin.cn/user/817692379985752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°·æ­Œæ–°è®ºæ–‡ï¼šä¸ºä»€ä¹ˆå½“å‰ AI æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692379985752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹çŒ«deå°éƒ­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:15:24.000Z" title="Tue Nov 25 2025 03:15:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›¸ä¿¡å¤§å®¶éƒ½ç»å†è¿‡è¿™æ ·çš„ç–‘æƒ‘ï¼Œåœ¨ä½¿ç”¨ AI çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆæˆ‘æ˜æ˜éƒ½çº æ­£è¿‡å®ƒçš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¸‹æ¬¡è¿˜æ˜¯ä¾ç„¶ä¼šçŠ¯åŒæ ·çš„é”™è¯¯ï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸å¾—ä¸é’ˆå¯¹æ€§å†™å¤§é‡çš„è§„åˆ™æ¥çº¦æŸæ•´ä¸ª Vibe Coding çš„è¿‡ç¨‹ã€‚</p>
<blockquote>
<p>ä½†æ˜¯å°±ç®—æœ‰è¯¦ç»†çš„ rule ï¼Œæœ‰äº›å€”å¼ºçš„æ¨¡å‹ä¾ç„¶å–œæ¬¢æˆ‘è¡Œæˆ‘ç´ ï¼Œæ¯”å¦‚ Gemini 3 Pro å°±å®¹æ˜“å‡ºç°ï¼Œ <strong>å†™çš„å¤ªè¯¦ç»†çš„ prompt ï¼Œæ•ˆæœå±…ç„¶ä¸å¦‚æ¨¡ç³Šçš„</strong>ï¼Œä½ çº æ­£ä»–ï¼Œä»–ä¼šå…ˆè‚¯å®šä½ ï¼Œç„¶åè¯´è¿˜æ˜¯è¯¥æŒ‰ç…§æˆ‘çš„æ¥Â·Â·Â·Â·</p>
</blockquote>
<h2 data-id="heading-0">é—®é¢˜</h2>
<p>è°·æ­Œè¿™æ¬¡å…¬å¸ƒçš„è®ºæ–‡å¾ˆç›´è§‚çš„è§£é‡Šäº†è¿™ä¸ªé—®é¢˜ï¼š<strong>å› ä¸ºå¤§æ¨¡å‹æ— æ³•åœ¨è®­ç»ƒåç»§ç»­å­¦ä¹ </strong> ï¼Œè®ºæ–‡æŠŠå½“å‰çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¢«æ¯”ä½œæ‚£æœ‰ <strong>â€œé¡ºè¡Œæ€§é—å¿˜ç—‡â€ï¼ˆAnterograde Amnesiaï¼‰</strong> çš„ç—…äºº ï¼Œè¿™ç§ç—…äººåªèƒ½ä¿ç•™å‘ç—…å‰çš„é•¿æœŸè®°å¿†ï¼Œæ— æ³•å½¢æˆæ–°çš„é•¿æœŸè®°å¿†ï¼Œåªèƒ½ä¾é çŸ­æš‚çš„çŸ­æœŸè®°å¿†ç”Ÿæ´»ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/369b747e84a34869b11b90b1b06394a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=SPT%2BjNorfMdl%2FlkYebROM39BP90%3D" alt="image-20251125103150345" loading="lazy"/></p>
<p>å…·ä½“å¯ä»¥è§£é‡Šä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š</p>
<h3 data-id="heading-1">A. â€œæ•°å­—å¤±å¿†ç—‡â€ï¼šåªæœ‰ä¸¤æï¼Œæ²¡æœ‰ä¸­é—´æ€</h3>
<p>ç›®å‰çš„æ¨¡å‹åªæœ‰ä¸¤ç§è®°å¿†çŠ¶æ€ï¼Œä¸­é—´å­˜åœ¨å·¨å¤§çš„æ–­å±‚ï¼š</p>
<ol>
<li><strong>æå¿«ä¸”çŸ­æš‚çš„è®°å¿†</strong>ï¼ˆIn-Context Learningï¼‰ï¼š ä¹Ÿå°±æ˜¯ä½ çš„ <code>Prompt</code> æˆ–ä¸Šä¸‹æ–‡çª—å£ï¼Œè¿™éƒ¨åˆ†é€šè¿‡æ³¨æ„åŠ›æœºåˆ¶ï¼ˆAttentionï¼‰å¤„ç†ï¼Œæ›´æ–°æå¿«ï¼Œä½†è¿™åªæ˜¯â€œä¸´æ—¶çš„â€ï¼Œä¸€æ—¦çª—å£å…³é—­æˆ–è¶…å‡ºé•¿åº¦ï¼Œä¿¡æ¯å°±æ¶ˆå¤±äº† ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒå¹¶èƒ½å¸å–ä½ çš„æ•™è®­çš„åŸå› </li>
<li><strong>å†»ç»“çš„é•¿æœŸè®°å¿†ï¼ˆPre-trained Weightsï¼‰ï¼š</strong> å¯¹åº”çš„æ˜¯æ¨¡å‹çš„ <code>MLP</code> å±‚ï¼ˆå‚æ•°ï¼‰ï¼Œè¿™éƒ¨åˆ†æ˜¯åœ¨é¢„è®­ç»ƒé˜¶æ®µé€šè¿‡æµ·é‡æ•°æ®â€œå›ºåŒ–â€ä¸‹æ¥çš„ï¼Œä¸€æ—¦éƒ¨ç½²äº†ï¼Œè¿™äº›å‚æ•°å°±æ˜¯é™æ€çš„ï¼Œæ— æ³•æ›´æ”¹ ã€‚</li>
</ol>
<p>è€Œç›®å‰çš„é—®é¢˜åœ¨äºï¼šå½“å‰æ¨¡å‹ç¼ºä¹å°†â€œå³æ—¶å¯¹è¯â€è½¬åŒ–ä¸ºâ€œé•¿æœŸå‚æ•°â€çš„æœºåˆ¶ï¼Œä¹Ÿå°±æ˜¯å®ƒä»¬ç¼ºä¹ä¸­é—´çš„é¢‘è°±ï¼š<strong>é‚£äº›åº”è¯¥ä»çŸ­æœŸé€æ¸å˜ä¸ºé•¿æœŸçš„è®°å¿†</strong>ã€‚</p>
<h3 data-id="heading-2">B. ç»´åº¦å•ä¸€ï¼šåªå †å äº†â€œæ·±åº¦â€ï¼Œå¿½ç•¥äº†â€œæ—¶é—´â€</h3>
<p>åœ¨è®ºæ–‡é‡Œï¼Œä¼ ç»Ÿçš„â€œæ·±åº¦å­¦ä¹ â€ä¸»è¦å…³æ³¨å †å æ›´å¤šçš„å±‚ï¼ˆDepthï¼‰æ¥å¢åŠ å®¹é‡ ï¼Œä½†è¿™ä¸€ç»´åº¦æ˜¯é™æ€çš„ã€‚</p>
<p>ç ”ç©¶äººå‘˜å‘ç°<strong>çœŸæ­£çš„å­¦ä¹ éœ€è¦æ­£äº¤çš„å¦ä¸€ä¸ªç»´åº¦ï¼šæ—¶é—´ï¼ˆæˆ–é¢‘ç‡ï¼‰</strong> ï¼Œå¤§è„‘å¹¶ä¸æ˜¯ä»¥ç»Ÿä¸€çš„é€Ÿåº¦æ›´æ–°æ‰€æœ‰ç¥ç»å…ƒçš„ï¼Œè€Œæ˜¯ä»¥ä¸åŒçš„é¢‘ç‡ï¼ˆè„‘æ³¢ï¼‰è¿ä½œï¼Œè€Œç›®å‰çš„ LLM å°±åƒæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ‰€æœ‰æ¥¼å±‚éƒ½é™æ­¢ä¸åŠ¨çš„å»ºç­‘ï¼Œåªæœ‰æœ€é¡¶å±‚çš„â€œæ¥å¾…å¤„â€ï¼ˆContextï¼‰åœ¨å·¥ä½œã€‚</p>
<h3 data-id="heading-3">C. ä¼˜åŒ–å™¨ä¸æ¶æ„çš„åˆ†ç¦»</h3>
<p>åœ¨ä¼ ç»Ÿæ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>æ¶æ„</strong>ï¼ˆå¦‚ Transformerï¼‰å’Œ<strong>ä¼˜åŒ–å™¨</strong>ï¼ˆå¦‚ Adamï¼‰è¢«çœ‹ä½œæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ä¸œè¥¿ï¼Œæ¶æ„è´Ÿè´£æ¨ç†ï¼Œä¼˜åŒ–å™¨è´Ÿè´£åœ¨è®­ç»ƒæ—¶æ›´æ–°å‚æ•°ã€‚</p>
<p>è€Œè®ºæ–‡çš„é¢ è¦†æ€§è§‚ç‚¹æ˜¯ï¼š ä¼˜åŒ–å™¨æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§<strong>è”æƒ³è®°å¿†æ¨¡å—ï¼ˆAssociative Memoryï¼‰</strong> ï¼Œç›®å‰çš„æ¨¡å‹åœ¨éƒ¨ç½²åä¸¢å¼ƒäº†ä¼˜åŒ–å™¨ï¼Œå¯¼è‡´å®ƒä»¬å¤±å»äº†â€œè‡ªæˆ‘ä¿®æ”¹â€å’Œâ€œå‹ç¼©æ¢¯åº¦â€çš„èƒ½åŠ›ï¼Œä»è€Œå¤±å»äº†å­¦ä¹ èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-4">è§£å†³åŠæ³•</h2>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè°·æ­Œæå‡ºäº†ä¸€ç§æ–°çš„èŒƒå¼ï¼Œä¸å†æŠŠæ¨¡å‹çœ‹ä½œä¸€ä¸ªæ‰å¹³çš„ç¥ç»ç½‘ç»œï¼Œè€Œæ˜¯çœ‹ä½œ<strong>ä¸€ç»„åµŒå¥—çš„ä¼˜åŒ–é—®é¢˜</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/412bd2c859c6487a995362d8eb2bc841~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=GbFVHZaKtmRueCmIGPhwLQiTjnY%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">A. æ ¸å¿ƒç†å¿µï¼šè¿ç»­è®°å¿†é¢‘è°± (Continuum Memory System)</h3>
<p>å°±åƒäººç±»å¤§è„‘æœ‰ä¸åŒé¢‘ç‡çš„è„‘æ³¢ï¼ˆDeltaæ³¢ã€Thetaæ³¢ã€Alphaæ³¢ç­‰ï¼‰åˆ†åˆ«è´Ÿè´£ä¸åŒå±‚çº§çš„è®°å¿†æ•´åˆä¸€æ · ï¼Œæ¨¡å‹ä¹Ÿåº”è¯¥æœ‰ä¸åŒæ›´æ–°é¢‘ç‡çš„ç»„ä»¶ã€‚</p>
<ul>
<li>
<p><strong>ä¼ ç»Ÿæ¨¡å‹ï¼š</strong> é¢‘ç‡åªæœ‰ 0 ï¼ˆå†»ç»“çš„å‚æ•°ï¼‰å’Œ â™¾ï¸ï¼ˆæå¿«çš„ Attentionï¼‰ã€‚</p>
</li>
<li>
<p><strong>åµŒå¥—å­¦ä¹ æ¨¡å‹ï¼š</strong> åˆ›å»ºä¸€ä¸ªï¼š</p>
<ul>
<li><strong>Level 1 (æå¿«):</strong> å¤„ç†å½“å‰çš„ Tokenã€‚</li>
<li><strong>Level 2 (ä¸­ç­‰):</strong> æ¯éš” 16 ä¸ª Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰çŸ­æœŸä¸Šä¸‹æ–‡</li>
<li><strong>Level 3 (æ…¢é€Ÿ):</strong> æ¯éš” 100ä¸‡ Token æ›´æ–°ä¸€æ¬¡ï¼Œæ•æ‰é•¿æœŸçŸ¥è¯†</li>
<li><strong>Level 4 (ææ…¢):</strong> ç±»ä¼¼ç›®å‰çš„é¢„è®­ç»ƒçŸ¥è¯†</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œå·¦å›¾ï¼ˆDeep Learningï¼‰å±•ç¤ºäº†é€šå¸¸ç†è§£çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼ˆå¦‚ RNN + Attentionï¼‰ï¼Œæ˜¯ä¸€ä¸ªæ‰å¹³çš„åºåˆ— ï¼Œè¿™ç§è§†è§’éšè—äº†å†…éƒ¨çš„æ¢¯åº¦æµåŠ¨ ã€‚</p>
<p>è€Œå³å›¾ï¼ˆNeural Learning Moduleï¼‰ï¼š*æ˜¯è®ºæ–‡çš„æ ¸å¿ƒè§†è§’ï¼Œå®ƒå°†æ¨¡å‹çœ‹ä½œä¸€ä¸ªä¸ª<strong>åµŒå¥—çš„ç«‹æ–¹ä½“</strong>ï¼Œæ¯ä¸€ä¸ªç«‹æ–¹ä½“ä»£è¡¨ä¸€ä¸ªâ€œä¼˜åŒ–é—®é¢˜â€ ï¼Œä»è€Œå®ç°ä¸åŒ Level çš„è¿ç»­é¢‘è°±ï¼Œæ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„æ¢¯åº¦æµï¼ˆGradient Flowï¼‰å’Œæ›´æ–°ç›®æ ‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28937766376b45368aa2ef073529650e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=7yBZTFJmwdmXzYOvjKLLhmvhF3o%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯ <strong>â€œå±‚ï¼ˆLayerï¼‰â€ä¸ä»…ä»…æ˜¯ç©ºé—´çš„å †å ï¼Œè€Œæ˜¯æ—¶é—´ä¸Šçš„åµŒå¥—</strong>ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆæ¨¡å‹åº”è¯¥åŒ…å«â€œå†…éƒ¨ä¼˜åŒ–å™¨â€ï¼šå³æ¨¡å‹åœ¨æ¨ç†æ—¶ï¼Œå†…éƒ¨çš„å°ç›’å­åº”è¯¥åœ¨ä¸æ–­è‡ªæˆ‘ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-6">B. æ–°æ¶æ„ï¼šHOPE (Self-Modifying Titans + Continuum Memory)</h3>
<p>è®ºæ–‡ä½œè€…æå‡ºäº† <strong>HOPE</strong> çš„å…·ä½“å®ç°æ¨¡å‹ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªå…³é”®æŠ€æœ¯ï¼š</p>
<ol>
<li>è‡ªæˆ‘ä¿®æ”¹çš„ Titans** (Self-Modifying Titans)</li>
</ol>
<p>æ¨¡å‹ä¸å†ä¾èµ–å¤–éƒ¨çš„ä¼˜åŒ–å™¨ï¼ˆå¦‚ Adamï¼‰æ¥å‘Šè¯‰å®ƒå¦‚ä½•æ›´æ–°ï¼Œè€Œæ˜¯å­¦ä¹ å¦‚ä½•ä¿®æ”¹è‡ªå·±ï¼Œæ¨¡å‹å†…éƒ¨åŒ…å«äº†ä¸€ä¸ªâ€œå­¦ä¹ æ¨¡å—â€ï¼Œå®ƒèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—æ¢¯åº¦å¹¶æ›´æ–°è‡ªå·±çš„å‚æ•°ï¼Œè¿™æ„å‘³ç€æ¨¡å‹åœ¨å’Œä½ å¯¹è¯çš„è¿‡ç¨‹ä¸­ï¼Œå®é™…ä¸Šåœ¨å¾®è°ƒå®ƒè‡ªå·±çš„éƒ¨åˆ†ç»“æ„</p>
<ol start="2">
<li>å¤šçº§ MLP ç³»ç»Ÿ</li>
</ol>
<p>HOPE ä½¿ç”¨äº†ä¸€ç³»åˆ—åµŒå¥—çš„ MLPï¼ˆå¤šå±‚æ„ŸçŸ¥æœºï¼‰å—ï¼Œæ¯ä¸ªå—æœ‰ä¸åŒçš„â€œå—å¤§å°â€ï¼ˆChunk Sizeï¼‰å’Œæ›´æ–°é¢‘ç‡ï¼š</p>
<ul>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆå¿«ï¼Œè´Ÿè´£è®°ä½åˆšæ‰çš„å¯¹è¯</li>
<li>æœ‰äº›å±‚æ›´æ–°å¾—å¾ˆæ…¢ï¼Œè´Ÿè´£æ²‰æ·€çŸ¥è¯†</li>
</ul>
<p>ç»„åˆèµ·æ¥ï¼Œå°±æ„æˆäº†â€œæ¢¯åº¦è®°å¿†æ›²çº¿â€ ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc5b0a9cccc041b0b6468a03185b4a0a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=pBDlZP47djcKi1OWHewdrYZ0aqA%3D" alt="" loading="lazy"/></p>
<p>å¯¹æ¯” Transformer çš„æç«¯é¢‘ç‡ï¼Œå¯ä»¥çœ‹å‡ºæ¥ HOPE (å·¦ä¾§)è¿™æ˜¯ä¸€ä¸ªè¿ç»­çš„é¢‘è°±ï¼Œ</p>
<ul>
<li>High Frequency FFNï¼šå—å¤§å°ï¼ˆChunk Lengthï¼‰ä¸º 16ï¼Œæ›´æ–°é¢‘ç‡é«˜ ã€‚</li>
<li>Mid Frequency FFNï¼šå—å¤§å°ä¸º 1Mï¼ˆä¸€ç™¾ä¸‡ï¼‰ï¼Œæ›´æ–°é¢‘ç‡ä¸­ç­‰ã€‚</li>
<li>Low Frequency FFNï¼šæ›´æ–°ææ…¢ ã€‚</li>
</ul>
<p>ä»è€Œè§£å†³â€œæ— æ³•ç»§ç»­å­¦ä¹ â€çš„é—®é¢˜ï¼Œå±•ç¤ºäº†å¦‚ä½•å¡«è¡¥â€œçŸ­æœŸè®°å¿†â€å’Œâ€œé•¿æœŸè®°å¿†â€ä¹‹é—´çš„ç©ºç™½ï¼Œåˆ›å»ºäº†ä¸åŒé€Ÿç‡çš„è®°å¿†å±‚çº§ã€‚</p>
<h3 data-id="heading-7">C. æ·±åº¦ä¼˜åŒ–å™¨ (Deep Optimizers)</h3>
<p>è®ºæ–‡è¯æ˜äº†åŠ¨é‡æ¢¯åº¦ä¸‹é™ï¼ˆMomentum SGDï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª 2 çº§çš„è”æƒ³è®°å¿†ç³»ç»Ÿ ï¼ŒHOPE åˆ©ç”¨è¿™ä¸€å‘ç°ï¼Œè®¾è®¡äº†æ›´å…·è¡¨è¾¾èƒ½åŠ›çš„ä¼˜åŒ–å™¨ï¼Œä½¿å…¶æˆä¸ºæ¨¡å‹æœ¬èº«çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯è®­ç»ƒå®Œå°±æ‰”æ‰çš„å·¥å…·ã€‚</p>
<h2 data-id="heading-8">å®éªŒç»“æœä¸æ„ä¹‰</h2>
<p>åœ¨å®éªŒä¸­ï¼ŒHOPE æ¨¡å‹ï¼ˆ760M å’Œ 1.3B å‚æ•°é‡ï¼‰åœ¨è¯­è¨€å»ºæ¨¡å’Œå¸¸è¯†æ¨ç†ä»»åŠ¡ä¸Šï¼Œ<strong>å‡»è´¥äº†åŒç­‰è§„æ¨¡çš„ Transformer++ã€RetNet å’Œ Mamba (Titans)</strong> ï¼Œ æ›´é‡è¦çš„æ˜¯å®ƒå±•ç¤ºäº†æ›´ä½çš„å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰ï¼Œè¯æ˜äº†è¿™ç§â€œåŠ¨æ€æ›´æ–°â€æœºåˆ¶çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b22fce82bb4efb87493f8830614f4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oGL54yrZGXlsI_pg60=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764645324&amp;x-signature=BoT%2BDUA%2BYoU2s2x8fx2pifdNY%2FI%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–è®ºæ–‡çš„æ„ä¹‰ä¸ä»…ä»…åœ¨äºæå‡ºäº†ä¸€ä¸ªæ–°æ¨¡å‹ï¼Œè€Œåœ¨äºå®ƒæŒ‘æˆ˜äº†â€œæ·±åº¦å­¦ä¹ â€è¿™ä¸ªåå­—æœ¬èº« ï¼š</p>
<ul>
<li><strong>ä»â€œæ·±åº¦â€åˆ°â€œåµŒå¥—â€ï¼š</strong> æœªæ¥çš„ AI ç«äº‰å¯èƒ½ä¸å†å•çº¯æ˜¯å †å å±‚æ•°å’Œå‚æ•°è§„æ¨¡ï¼ˆScaleï¼‰ï¼Œè€Œæ˜¯è®¾è®¡æ›´åˆç†çš„<strong>æ—¶é—´æ›´æ–°é¢‘ç‡ï¼ˆTime/Frequencyï¼‰</strong></li>
</ul>

<ul>
<li><strong>ç»ˆèº«å­¦ä¹  (Lifelong Learning)ï¼š</strong> å¦‚æœ HOPE æ¶æ„è¢«è§„æ¨¡åŒ–ï¼Œä¹Ÿè®¸å¯ä»¥ä¼šçœ‹åˆ°çœŸæ­£çš„â€œå…»æˆç³»â€ AIï¼Œå®ƒä¸ä¼šåœ¨å‘å¸ƒé‚£å¤©å°±åœæ­¢æˆé•¿ï¼Œè€Œæ˜¯é€šè¿‡æ¯ä¸€æ¬¡äº¤äº’ï¼Œå°†ä¿¡æ¯ä»çŸ­æœŸè®°å¿†é€æ¸æ¸—é€åˆ°é•¿æœŸè®°å¿†ä¸­ï¼ŒçœŸæ­£è§£å†³â€œç¾éš¾æ€§é—å¿˜â€å’Œâ€œæ— æ³•æŒç»­å­¦ä¹ â€çš„ç—›ç‚¹ã€‚</li>
</ul>
<p>æ€»ç»“èµ·æ¥ï¼Œä¹‹å‰çš„ ChatGPT å’Œ Gemini åƒæ˜¯ä¸€ä¸ªåªæœ‰â€œæ­¤æ—¶æ­¤åˆ»â€å’Œâ€œå‡ºå‚è®¾ç½®â€çš„æœºå™¨ï¼›è€Œ Google æå‡ºçš„ HOPE æ¶æ„ï¼Œè¯•å›¾èµ‹äºˆ AI â€œä»æ­¤åˆ»èµ°å‘æ°¸æ’â€çš„è®°å¿†èƒ½åŠ›ï¼Œè®©æ¨¡å‹åœ¨è¿è¡Œä¸­é€šè¿‡è‡ªæˆ‘ä¿®æ”¹æ¥æŒç»­è¿›åŒ–ã€‚</p>
<blockquote>
<p>è€Œå®é™…ä¸Šå¯¹åº”ä¹‹å‰ Deepseek åˆ©ç”¨å›¾ç‰‡æ¥å‹ç¼©è®°å¿†çš„å®ç°ï¼Œä¹Ÿæ˜¯åœ¨è®°å¿†æ—¶æ•ˆæ€§ä¸Šçš„æ¢ç´¢ã€‚</p>
</blockquote>
<h2 data-id="heading-9">æœ€å</h2>
<p><strong>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œèƒ½â€œåƒä¸€å ‘é•¿ä¸€æ™ºâ€çš„ AI ä¹Ÿè®¸ç¦»æˆ‘ä»¬å°±ä¸è¿œäº†</strong>ï¼Œä¸è¿‡å¯ä»¥çŒœæµ‹ï¼Œè¿™ç§å®ç°ä¹Ÿæœ‰è¿™ç›¸åº”çš„å±€é™æ€§é—®é¢˜éœ€è¦å¤„ç†ï¼Œä¾‹å¦‚ HOPE æ¶æ„çš„æ ¸å¿ƒåœ¨äºâ€œæ¨¡å‹åœ¨æ¨ç†è¿‡ç¨‹ä¸­ä¿®æ”¹è‡ªå·±â€ ï¼Œè¿™æ„å‘³ç€å®ƒä¸èƒ½åƒä¼ ç»Ÿ Transformer é‚£æ ·åªè¿›è¡Œç®€å•çš„çŸ©é˜µä¹˜æ³•ï¼Œè¿˜éœ€è¦è¿›è¡Œæ¢¯åº¦çš„è®¡ç®—å’Œå‚æ•°æ›´æ–°ï¼Œä¹Ÿå°±æ˜¯ï¼š</p>
<ul>
<li>æ›´å¤šçš„æ€§èƒ½å¼€é”€ï¼Œä¾‹å¦‚é¢å¤–çš„ MLP è¿ç®—å’Œå®æ—¶æ¢¯åº¦è®¡ç®—</li>
<li>æ›´å¤šçš„å†…å­˜å ç”¨ï¼Œæ¯”å¦‚ HOPE éœ€è¦å­˜å‚¨â€œä¼˜åŒ–å™¨çŠ¶æ€â€ å’Œç®¡ç†çŠ¶æ€å¤§å°</li>
<li>HOPE è¦æ±‚å‚æ•°åœ¨ <code>Forward</code> è¿‡ç¨‹ä¸­åŠ¨æ€å˜åŒ– ï¼Œè¿™ç§â€œè‡ªæˆ‘ä¿®æ”¹â€çš„ä»£ç å®ç°éš¾åº¦å¤§ï¼Œä¸”éš¾ä»¥åˆ©ç”¨ç°æœ‰çš„åº•å±‚ Kernel ä¼˜åŒ–</li>
<li>å¤šåµŒå¥—ä¸‹çš„æ¢¯åº¦æµç®¡ç†å’Œç‹¬ç«‹é—®é¢˜</li>
<li>Â·Â·Â·Â·Â·</li>
</ul>
<blockquote>
<p>æœ€åï¼Œæœ¬æ–‡è§£è¯»ä¸»è¦å‚è€ƒ Gemini åˆ†æã€‚</p>
</blockquote>
<h2 data-id="heading-10">åŸæ–‡é“¾æ¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fabehrouz.github.io%2Ffiles%2FNL.pdf" target="_blank" title="https://abehrouz.github.io/files/NL.pdf" ref="nofollow noopener noreferrer">abehrouz.github.io/files/NL.pdâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS]]></title>    <link>https://juejin.cn/post/7576468602304495654</link>    <guid>https://juejin.cn/post/7576468602304495654</guid>    <pubDate>2025-11-25T07:38:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576468602304495654" data-draft-id="7576378563574808591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-25T07:38:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:38:13.000Z" title="Tue Nov 25 2025 07:38:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9406a89e16ac4345bc2ecc9958596ff6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=HKGQlG4tuN2%2BMq1ZIfmDADVmuDU%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½!ğŸ˜ã€‚</p>
<p>Code Review çš„æ—¶å€™ï¼Œæˆ‘æœ€æ€•çœ‹åˆ°ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸æ˜¯å¤æ‚çš„ç®—æ³•ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ­£åˆ™ã€‚è€Œæ˜¯<strong>æ˜æ˜ä¸€ä¸ª HTML æ ‡ç­¾å°±èƒ½æå®šçš„äº‹ï¼Œæœ‰äººéè¦å†™å‡ ç™¾è¡Œ JS + CSS å»é‡æ–°å‘æ˜è½®å­</strong> ã€‚</p>
<p>å‰å‡ å¤©ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªæ–°åŒå­¦ä¸ºäº†å†™ä¸€ä¸ªæŠ˜å é¢æ¿ï¼ˆAccordionï¼‰ï¼Œå¼•å…¥äº†ä¸€ä¸ªé‡å‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜å†™äº†ä¸€å † <code>useState</code>ã€<code>onClick</code> å’ŒåŠ¨ç”»é€»è¾‘ã€‚</p>
<p>æˆ‘é»˜é»˜åœ°æŠŠä»–çš„ä»£ç å…¨åˆ äº†ï¼Œæ¢æˆäº† 3 è¡Œ <code>&lt;details&gt;</code>ã€‚ä»–çœ‹æˆ‘çš„çœ¼ç¥ï¼Œä»¿ä½›åœ¨çœ‹ä¸€ä¸ªå¤–æ˜ŸäººğŸ¤£ã€‚</p>
<p>åœ¨ 2025 å¹´çš„ä»Šå¤©ï¼Œæµè§ˆå™¨åŸç”Ÿ HTML çš„èƒ½åŠ›æ—©å·²ä»Šéæ˜”æ¯”ã€‚å¾ˆå¤šæˆ‘ä»¬ä¹ æƒ¯ç”¨ JS å»æ¨¡æ‹Ÿçš„äº¤äº’ï¼Œç°åœ¨ä¸ä»…æœ‰åŸç”Ÿæ”¯æŒï¼Œè€Œä¸”<strong>æ€§èƒ½æ›´å¥½ã€å…¼å®¹æ€§æ›´å¼ºã€æ— éšœç¢ï¼ˆa11yï¼‰æ›´å®Œå–„</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±æ¥ç›˜ç‚¹ 5 ä¸ªè¢«ä¸¥é‡ä½ä¼°çš„HTMLæ ‡ç­¾ğŸ‘‡ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong><code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code>ï¼šæŠ˜å ç»„ä»¶</strong></h3>
<p>ä½ æ˜¯ä¸æ˜¯è¿˜åœ¨å†™è¿™æ ·çš„ React ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// JS æ¨¡æ‹Ÿç‰ˆ</span>
<span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"accordion"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(!isOpen)}&gt;
      ç‚¹å‡»å±•å¼€ {isOpen ? 'â¬†ï¸' : 'â¬‡ï¸'}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    {isOpen &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>ä¸ºäº†è¿™ä¸ªåŠŸèƒ½ï¼Œä½ è¿˜å¾—å†™ CSS åŠ¨ç”»ï¼Œè¿˜å¾—å¤„ç†é”®ç›˜äº‹ä»¶ï¼ˆTab é”®èƒ½ä¸èƒ½é€‰åˆ°ï¼Ÿå›è½¦èƒ½ä¸èƒ½å±•å¼€ï¼Ÿç­‰ç­‰ï¼‰ã€‚</p>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>ç‚¹å‡»å±•å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
    è¿™é‡Œæ˜¯å±•å¼€åçš„å†…å®¹ï¼ŒåŸç”Ÿæ”¯æŒ Ctrl+F é¡µå†…æœç´¢ï¼
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ²¡æœ‰ä»»ä½•JS</strong>ï¼šè‡ªå¸¦ç‚¹å‡»å±•å¼€/æ”¶èµ·äº¤äº’ã€‚</li>
<li><strong>æ— éšœç¢ï¼ˆa11yï¼‰æ»¡åˆ†</strong>ï¼šå±å¹•é˜…è¯»å™¨èƒ½å®Œç¾è¯†åˆ«ï¼ŒTab é”®ã€å›è½¦é”®åŸç”Ÿæ”¯æŒã€‚</li>
<li><strong>é¡µå†…æœç´¢</strong>ï¼šè¿™æ˜¯ JS æ¨¡æ‹Ÿç‰ˆæœ€å¤§çš„ç—›ç‚¹ã€‚å¦‚æœå†…å®¹è¢« JS éšè—äº†ï¼ˆ<code>display: none</code>ï¼‰ï¼Œæµè§ˆå™¨çš„ Ctrl+F å¾€å¾€æœä¸åˆ°ã€‚ä½† <code>&lt;details&gt;</code> é‡Œçš„å†…å®¹ï¼Œå³ä½¿æŠ˜å ï¼Œæµè§ˆå™¨ä¹Ÿèƒ½æœåˆ°å¹¶è‡ªåŠ¨å±•å¼€ï¼</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9c863dafadc46c4a208d26d6b5641f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=vMtXW6eygD%2FdQTk35yZ4ndeH5vI%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<p>é…åˆ CSS ğŸ‘‡</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">details</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-tag">summary</span> {
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-comment">/* åŒ…ä½å†…å®¹ï¼Œè®©å®ƒèƒ½åŠ¨ç”»é«˜åº¦ */</span>
<span class="hljs-selector-tag">details</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: max-height .<span class="hljs-number">45s</span> ease, opacity .<span class="hljs-number">3s</span> ease;
}

<span class="hljs-comment">/* details å¤„äº open çŠ¶æ€æ—¶ */</span>
<span class="hljs-selector-tag">details</span><span class="hljs-selector-attr">[open]</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">200px</span>; <span class="hljs-comment">/* ä½ å†…å®¹é«˜åº¦å¤§æ¦‚å¤šå°‘è®¾å¤šå°‘ï¼Œè¶³å¤Ÿå¤§å³å¯ */</span>
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<p>ä¾ç„¶å¯ä»¥åšåŠ¨ç”»ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong><code>&lt;dialog&gt;</code>ï¼šå¼¹çª—ç»„ä»¶</strong></h3>
<p>å†™æ¨¡æ€æ¡†ï¼ˆModalï¼‰æ˜¯å‰ç«¯æœ€å¤§çš„å‘ä¹‹ä¸€ã€‚ä½ éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><code>z-index</code> å±‚çº§ä¼šä¸ä¼šè¢«é®æŒ¡ï¼Ÿ</li>
<li>ç‚¹å‡»é®ç½©å±‚å…³é—­ï¼Ÿ</li>
<li><strong>Focus Trapï¼ˆç„¦ç‚¹é”å®šï¼‰</strong> ï¼šæ‰“å¼€å¼¹çª—åï¼ŒTab é”®ä¸èƒ½è·‘åˆ°åº•å±‚é¡µé¢å»ã€‚</li>
<li>æŒ‰ä¸‹ <code>Esc</code> é”®å…³é—­ï¼Ÿ</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥ <code>Antd Modal</code> æˆ–è€… <code>React Portal</code>ã€‚ä½†åœ¨è½»é‡çº§åœºæ™¯ä¸‹ï¼ŒåŸç”Ÿ <code>&lt;dialog&gt;</code> æ‰æ˜¯ç¥ğŸ«…ã€‚</p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myModal"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"dialog"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªåŸç”Ÿæ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å…³é—­ï¼ˆè‡ªåŠ¨ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myModal.showModal()"</span>&gt;</span>æ‰“å¼€å¼¹çª—â<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ae231b2a4af4c8694ff5a0843a5747d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=Oi6OWEl7QtlHnfEpPS3hwJBmyrw%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<ol>
<li><strong>Top Layerï¼ˆé¡¶å±‚ç‰¹æ€§ï¼‰</strong> ï¼šæµè§ˆå™¨ä¼šæŠŠå®ƒæ¸²æŸ“åœ¨æ‰€æœ‰ DOM çš„æœ€ä¸Šå±‚ï¼Œ<strong>å½»åº•æ— è§†</strong>çˆ¶å…ƒç´ çš„ <code>z-index</code> å’Œ <code>overflow: hidden</code>ã€‚</li>
<li><strong>::backdrop ä¼ªå…ƒç´ </strong>ï¼šç›´æ¥ç”¨ CSS å®šåˆ¶é®ç½©å±‚æ ·å¼ã€‚</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* èƒŒæ™¯é®ç½© */</span>
dialog<span class="hljs-selector-pseudo">::backdrop</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.45</span>);
    backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">3px</span>);
    <span class="hljs-attribute">transition</span>: opacity .<span class="hljs-number">3s</span> ease;
}
</code></pre>
<ol start="3">
<li><strong>åŸç”Ÿäº¤äº’</strong>ï¼šè‡ªå¸¦ <code>Esc</code> å…³é—­ï¼Œè‡ªå¸¦ç„¦ç‚¹ç®¡ç†ï¼Œè¡¨å•æäº¤è‡ªåŠ¨å…³é—­ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2"><strong><code>&lt;datalist&gt;</code>ï¼šæœç´¢è‡ªåŠ¨è¡¥å…¨</strong></h3>
<p>å½“äº§å“ç»ç†è¦æ±‚åšä¸€ä¸ªå¸¦æœç´¢å»ºè®®çš„è¾“å…¥æ¡†æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ä¸æ˜¯ï¼šâ€œå¿«ï¼å¼•å…¥ <code>Select2</code> æˆ–è€… <code>Antd AutoComplete</code>ï¼ğŸ˜–</p>
<p>ä¸”æ…¢ã€‚å¦‚æœåªæ˜¯ç®€å•çš„å»ºè®®åˆ—è¡¨ï¼Œå‡  KB çš„ JS åº“éƒ½æ˜¾å¾—å¤ªé‡äº†ã€‚</p>
<p><strong>HTML åŸç”Ÿç‰ˆï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é€‰æ‹©ä½ å–œæ¬¢çš„æ¡†æ¶ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">list</span>=<span class="hljs-string">"frameworks"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">datalist</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"frameworks"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"React"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Vue"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Svelte"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Angular"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Solid"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">datalist</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ¨¡ç³Šæœç´¢</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆæ‰“ u ä¼šå‡ºæ¥ Vueï¼‰ã€‚</li>
<li><strong>å“åº”å¼</strong>ï¼šåœ¨æ‰‹æœºä¸Šï¼Œå®ƒä¼šè°ƒç”¨ç³»ç»ŸåŸç”Ÿçš„ä¸‹æ‹‰é€‰æ‹© UIï¼Œä½“éªŒæ¯”ç½‘é¡µæ¨¡æ‹Ÿçš„æ›´é¡ºæ»‘ã€‚</li>
<li><strong>è§£è€¦</strong>ï¼šå®ƒåªæ˜¯ä¸€ä¸ªå»ºè®®åˆ—è¡¨ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥è¾“å…¥åˆ—è¡¨é‡Œæ²¡æœ‰çš„å€¼ï¼ˆè¿™ç‚¹å’Œ Select ä¸åŒï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3"><strong><code>&lt;fieldset&gt;</code> &amp; <code>disabled</code>ï¼šä¸€é”®ç¦ç”¨æ•´ä¸ªè¡¨å•</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤ï¼Œæˆ‘ä»¬éœ€è¦<strong>ç¦ç”¨è¡¨å•é‡Œçš„æ‰€æœ‰è¾“å…¥æ¡†</strong>ã€‚</p>
<p><strong>JS ç¬¨åŠæ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// è¿˜è¦ä¸€ä¸ªä¸ªå»æ‹¿ DOMï¼Œæˆ–è€…ç»´æŠ¤ä¸€ä¸ª loading çŠ¶æ€ä¼ ç»™æ‰€æœ‰ç»„ä»¶</span>
inputs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">btn</span> =&gt;</span> btn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
</code></pre>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"login-group"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// ä¸€è¡Œä»£ç æå®šçŠ¶æ€åˆ‡æ¢</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'login-group'</span>).<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>; 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d86311c7162b449d9e6b77c5e87b4af3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=GIo5a4J0SdBaWGlymX6COE7iqjU%3D" alt="clideo_editor_c3a7f45a392f482ea0added4098a5be3.gif" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªæå¥½çš„<strong>åˆ†ç»„</strong>æ€ç»´ã€‚é€šè¿‡ç»™ <code>&lt;fieldset&gt;</code> è®¾ç½® <code>disabled</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç¦ç”¨å†…éƒ¨æ‰€æœ‰çš„ <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code>ã€‚ä¸ç”¨å†™å¾ªç¯ï¼Œä¸ç”¨ç»´æŠ¤å¤æ‚çš„ Stateã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong><code>&lt;input type="file" capture&gt;</code>ï¼šH5 è°ƒç”¨æ‰‹æœºç›¸æœº</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šä¸šåŠ¡éœ€è¦ç”¨æˆ·ä¸Šä¼ ä¸€å¼ ç…§ç‰‡ï¼Œå¯ä»¥æ˜¯ç›¸å†Œé€‰çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>å½“åœºæ‹çš„</strong>ã€‚</p>
<p>å¾ˆå¤šæ–°æ‰‹çš„ååº”æ˜¯ï¼šæ˜¯ä¸æ˜¯è¦æ¥å¾®ä¿¡ JSSDKï¼Ÿæ˜¯ä¸æ˜¯è¦å†™ä¸ª Bridge è°ƒåŸç”Ÿ App èƒ½åŠ›ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ä¸éœ€è¦ï¼</strong></p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">"environment"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span>&gt;</span>
</code></pre>
<p>åªè¦åŠ ä¸Š capture å±æ€§ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼ˆiOS/Androidï¼‰ç‚¹å‡»ä¸Šä¼ æ—¶ï¼Œç³»ç»Ÿä¼šç›´æ¥æ‹‰èµ·ç›¸æœºï¼Œè€Œä¸æ˜¯è®©ä½ å»é€‰æ–‡ä»¶ã€‚æ‹å®Œç…§åï¼Œä½ æ‹¿åˆ°çš„å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ File å¯¹è±¡ã€‚</p>
<p>ä¸éœ€è¦ä»€ä¹ˆ JS SDKï¼Œå®ç°åŸç”Ÿçº§ä½“éªŒğŸ‘ã€‚</p>
<hr/>
<p>æˆ‘æ€»æ˜¯å¼ºè°ƒ <strong>æœ€å¥½çš„ä»£ç ï¼Œæ˜¯æ²¡æœ‰ä»£ç ï¼</strong></p>
<p>HTML æ ‡å‡†ä¸€ç›´åœ¨è¿›åŒ–ï¼Œå¾ˆå¤šæ›¾ç»éœ€è¦é‡å‹ JS æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨å·²ç»æˆäº†æµè§ˆå™¨çš„å‡ºå‚è®¾ç½®äº†ã€‚</p>
<p>ä½¿ç”¨è¿™äº›åŸç”Ÿæ ‡ç­¾ï¼Œä¸ä»…èƒ½å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼Œæ›´èƒ½è®©ä½ çš„åº”ç”¨åœ¨<strong>å¯è®¿é—®æ€§</strong>å’Œ<strong>æ€§èƒ½</strong>ä¸Šå¤©ç„¶é¢†å…ˆã€‚</p>
<p>ä¸‹æ¬¡å†æƒ³ <code>npm install</code> ä¸€ä¸ª UI åº“ä¹‹å‰ï¼Œå…ˆæŸ¥æŸ¥ MDNã€‚è¯´ä¸å®šï¼ŒHTML æ—©å°±å¸®ä½ åšå¥½äº†ğŸ¤”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576264484688379944</link>    <guid>https://juejin.cn/post/7576264484688379944</guid>    <pubDate>2025-11-25T05:51:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484688379944" data-draft-id="7573950036897087528" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-25T05:51:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3659622444970574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3659622444970574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T05:51:59.000Z" title="Tue Nov 25 2025 05:51:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9456ab9014694573909de2733acc5b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=w4sPNHGfhJ%2Bv0Xhu3jDr%2BmOaPz0%3D" alt="test.gif" loading="lazy"/></p>
<blockquote>
<p><strong>è®¾è®¡å°å§å§</strong>ï¼š  â€œæä¸€ä¸‹è¿™æ ·çš„<strong>å›å¼¹</strong>æ•ˆæœï¼Œä½ è¡Œä¸è¡Œï¼Ÿâ€<br/>
<strong>æˆ‘</strong>ï¼šâ€œè¡Œï¼ç›´æ¥æ¢­å“ˆ 50 è¡Œ keyframes + transform + å„ç§ç™¾åˆ†æ¯”ï¼Œæå®š â€<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šâ€œå¤ªç¡¬ï¼ˆæ’‡å˜´ï¼‰ï¼Œä¸å¤Ÿ Q å¼¹ï¼ˆé„™è§†ï¼‰â€<br/>
<strong>æˆ‘</strong>ï¼š(è£‚å¼€)<br/>
<strong>éš”å£è€ç‹</strong>ï¼šè¿™ä¹ˆç®€å•ä½ éƒ½ä¸è¡Œï¼Œæˆ‘æ¥ä¸€è¡Œè´å¡å°” cubic-bezier(0.3, 1.15, 0.33, 1.57) ç§’äº†ğŸ˜<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šå“‡å“¦ï¼ï¼ˆå…´å¥‹ï¼‰å¥½å¸…ï¼ï¼ˆæ˜Ÿæ˜Ÿçœ¼ğŸŒŸï¼‰å¥½Qå¼¹ï¼ï¼ˆä¸€è„¸å´‡æ‹œğŸ˜ï¼‰<br/>
<strong>æˆ‘</strong>ï¼š<strong>â€œï¼Ÿï¼Ÿï¼Ÿâ€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä¸ºä»€ä¹ˆä¸€è¡Œè´å¡å°”å°±èƒ½â€œDuangâ€èµ·æ¥ï¼Ÿ</h2>
<h3 data-id="heading-1">1ï¸âƒ£ cubic-bezier æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨ CSS åŠ¨ç”»é‡Œï¼Œæˆ‘ä»¬ç»å¸¸å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> ease;
</code></pre>
<p>ä½†å…¶å® <code>ease</code>ã€<code>linear</code>ã€<code>ease-in-out</code> è¿™äº›éƒ½åªæ˜¯å°è£…å¥½çš„è´å¡å°”æ›²çº¿ã€‚<br/>
åº•å±‚åŸç†æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">cubic-bezier(x1, y1, x2, y2)
</code></pre>
<p>è¿™å››ä¸ªå‚æ•°å®šä¹‰äº†<strong>æ—¶é—´å‡½æ•°æ›²çº¿</strong>ï¼Œæ§åˆ¶åŠ¨ç”»é€Ÿåº¦çš„å˜åŒ–ã€‚</p>
<ul>
<li><code>x</code>ï¼šæ—¶é—´è½´ï¼ˆå¿…é¡»åœ¨ 0ï½1 ä¹‹é—´ï¼‰</li>
<li><code>y</code>ï¼šæ•°å€¼è½´ï¼ˆå¯ä»¥è¶…å‡º 0ï½1ï¼ï¼‰</li>
</ul>
<p>ğŸ‘‰ å½“ y è¶…è¿‡ 1 æˆ–å°äº 0 æ—¶ï¼ŒåŠ¨ç”»å€¼å°±ä¼š<strong>å†²è¿‡ç»ˆç‚¹å†å›å¼¹</strong>ï¼Œ<br/>
è¿™å°±æ˜¯â€œå›å¼¹æ„Ÿâ€çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">2ï¸âƒ£ å›å¼¹çš„æœ¬è´¨ï¼šè¿‡å†² + è¡°å‡</h3>
<p>æƒ³è±¡ä¸€ä¸ªçƒæ‰ä¸‹æ¥ï¼š</p>
<ul>
<li><strong>è¿‡å†²</strong>ï¼šçƒè½åœ°æ—¶ä¼šå‹æ‰ï¼ˆè¶…å‡ºç»ˆç‚¹ï¼‰</li>
<li><strong>å›å¼¹</strong>ï¼šç„¶ååå¼¹å›æ¥ï¼Œå†é€æ¸ç¨³å®š</li>
</ul>
<p>åœ¨åŠ¨ç”»ä¸­ï¼Œè¿™ä¸ªâ€œè¿‡å†²â€å°±æ˜¯ y&gt;1 çš„éƒ¨åˆ†ï¼Œ<br/>
è€Œâ€œå›å¼¹â€å°±æ˜¯æ›²çº¿å›åˆ° y=1 çš„è¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§ª äºŒã€ä¸€è¡Œè´å¡å°”çš„é­”æ³•</h2>
<h3 data-id="heading-4">âœ… ç«ç®­å‘å°„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d945616e56f74171afda7e6b38b97c8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=lUyE6LGLXrjzlCGpwDn2f6gf%2F8M%3D" alt="export_1764044056566.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bounce"</span>&gt;</span>ğŸš€å‘å°„ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.bounce</span> {
 <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.8s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.27</span>, <span class="hljs-number">1.55</span>);
}
<span class="hljs-selector-class">.bounce</span><span class="hljs-selector-pseudo">:hover</span> {
 <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">500px</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><span href="https://code.juejin.cn/pen/7576535022065647654" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7576535022065647654" data-src="https://code.juejin.cn/pen/7576535022065647654" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span>
ğŸ’¡ <strong>å‚æ•°è§£æï¼š</strong></p>
<ul>
<li>y1 = -0.55 â†’ å…ˆè½»å¾®åå‘ç¼©å°</li>
<li>y2 = 1.55 â†’ å†å†²è¿‡å¤´ 55%ï¼Œæœ€åå›å¼¹åˆ°åŸä½</li>
</ul>
<h2 data-id="heading-5">ğŸ§© å››ã€å¸¸ç”¨è´å¡å°”å‚æ•°</h2>



































<table><thead><tr><th>æ•ˆæœæè¿°</th><th>è´å¡å°”å‚æ•°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>å¾®å›å¼¹ï¼ˆæŒ‰é’®ï¼‰</td><td><code>cubic-bezier(0.34, 1.31, 0.7, 1)</code></td><td>è½»æŸ”å¼¹æ€§</td></tr><tr><td>å¼ºå›å¼¹ï¼ˆå¡ç‰‡ï¼‰</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>çˆ†å‘åŠ›å¼º</td></tr><tr><td>æŸ”å’Œå‡ºå…¥</td><td><code>cubic-bezier(0.4, 0, 0.2, 1.4)</code></td><td>iOS é£</td></tr><tr><td>å¼¹æ€§æ”¾å¤§</td><td><code>cubic-bezier(0.175, 0.885, 0.32, 1.275)</code></td><td>å¼¹ç°§æ„Ÿ</td></tr><tr><td>ç«ç®­çŒ›å†²</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>æ¨èƒŒæ„Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ§° äº”ã€è°ƒè¯•ç¥å™¨æ¨è</h2>
<ul>
<li>
<p>ğŸ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcubic-bezier.com" target="_blank" title="https://cubic-bezier.com" ref="nofollow noopener noreferrer">cubic-bezier.com</a><br/>
æ‹–åŠ¨æ‰‹æŸ„å®æ—¶é¢„è§ˆåŠ¨ç”»ï¼Œå¤åˆ¶å‚æ•°ä¸€é”®æå®šã€‚</p>
</li>
<li>
<p>âš™ï¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Feasings.net" target="_blank" title="https://easings.net" ref="nofollow noopener noreferrer">easings.net</a><br/>
æ”¶å½•å„ç§ easing å‡½æ•°ï¼ˆå«ç‰©ç†å¼¹ç°§ã€é˜»å°¼ç­‰ï¼‰ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†]]></title>    <link>https://juejin.cn/post/7576197876716748838</link>    <guid>https://juejin.cn/post/7576197876716748838</guid>    <pubDate>2025-11-25T00:19:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576197876716748838" data-draft-id="7576105442214330418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†"/> <meta itemprop="keywords" content="GitHub,å¼€æº,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-25T00:19:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloGitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384091320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯” MySQL è½»ï¼Œæ¯” SQLite å¼ºï¼šç»ˆäºæœ‰äººæŠŠ AI æ•°æ®åº“åšå¯¹äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384091320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloGitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:19:55.000Z" title="Tue Nov 25 2025 00:19:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19f57e8e53b549d2a5fa1eafd945fccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=D9%2FsddVGJGhrzo7o7qk7aloo6P8%3D" alt="" loading="lazy"/></p>
<p>å‰å‡ å¤©ï¼Œæˆ‘çœ‹åˆ°äº†ä¸€ä¸ªæ¥è‡ª Turso åˆ›å§‹äºº Pekka çš„è§‚ç‚¹ï¼š</p>
<blockquote>
<p>SQLite è¢«è®¤ä¸ºæ˜¯ AI agent çš„ç†æƒ³æ•°æ®åº“ï¼Œå› ä¸ºå®ƒè½»é‡çº§ä¸”é€‚ç”¨äº AI agent çš„å„ç§åœºæ™¯ï¼Œä½†ä»ç„¶éœ€è¦è¿›åŒ–ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35d656b3e981498f9ebdcbcd8a127606~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=S2tn8ybJo6m058%2BxmEtikklnojk%3D" alt="" loading="lazy"/></p>
<p>è¯„è®ºåŒºé‡Œä¹Ÿæœ‰æ„æ€ï¼Œæœ‰äººä¼šå’Œå¤§å®¶åˆ†äº«è‡ªå·±ä¸ºäº† SQLite çš„è¿›åŒ–åšäº†å“ªäº›äº‹æƒ…ï¼ˆæ¯”å¦‚å¼€æºäº† Super SQLite ä¹‹ç±»çš„é¡¹ç›®ï¼‰ï¼Œä¹Ÿæœ‰äººä¼šæ¨èæœ‰å“ªäº› SQLite çš„è¿›åŒ–ç‰ˆäº§å“ï¼Œå¹¶å’Œå¤§å®¶è®¨è®ºè¿™äº›äº§å“çš„ä¼˜åŠ£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eaea769ca6d24bcc919823f5214e32d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=sCQbdeIC9PdWvm9pnQELxr03n3A%3D" alt="" loading="lazy"/></p>
<p>å®é™…ä¸Šï¼ŒAI åº”ç”¨å¼€å‘è€…å¯¹è½»é‡çº§æ•°æ®åº“çš„è¯‰æ±‚ï¼Œè¿œè¿œä¸æ­¢ AI Agent è¿™ä¸€ä¸ªåœºæ™¯ã€‚é‚£äº›åœ¨ Web æ—¶ä»£å’Œç§»åŠ¨äº’è”ç½‘æ—¶ä»£æ”¯æ’‘äº†ä¸‡äº¿çº§åº”ç”¨çš„ä¼ ç»Ÿæ•°æ®åº“ï¼Œå¦‚ä»Šåœ¨é¢å¯¹ AI åº”ç”¨çš„æ•æ·ã€è½»é‡ã€é«˜é¢‘è¿­ä»£çš„éœ€æ±‚æ—¶ï¼Œéƒ½çº·çº·å¼€å§‹æš´éœ²å‡ºå®ƒä»¬çš„æ°´åœŸä¸æœã€‚</p>
<p>é™¤äº†ä¼ ç»Ÿæ•°æ®åº“å‡ ä¸ªæœ€æ˜æ˜¾çš„é—®é¢˜ â€”â€” <strong>éƒ¨ç½²å¤æ‚åº¦é«˜ã€èµ„æºå ç”¨å¤šã€è¿‡åº¦è®¾è®¡å½±å“æ‰§è¡Œæ•ˆç‡</strong> ä»¥å¤–ï¼Œå¾ˆå¤š AI åº”ç”¨éƒ½ä¼šæŠŠæ•°æ®å’Œæ¨¡å‹ç´§å¯†ç»“åˆï¼Œåœ¨è®¾å¤‡ç«¯ï¼ˆå¦‚æ‰‹æœºã€ç‰©è”ç½‘è®¾å¤‡ï¼‰å®ç°æœ¬åœ°åŒ–è¿è¡Œï¼Œä¼ ç»Ÿæ•°æ®åº“é€šè¿‡å®¢æˆ·ç«¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨çš„æ¨¡å¼ï¼Œä¹Ÿæ— æ³•æ»¡è¶³è¿™ç§åµŒå…¥å¼ï¼Œç”šè‡³ç¦»çº¿åµŒå…¥å¼çš„éœ€æ±‚ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91fb112cc10549f0aa304a3ad341d3da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=sq6yHywgjveQ9Uv0FuuFYSUMX4Y%3D" alt="" loading="lazy"/></p>
<p>ä¸ºäº†è®© AI å¼€å‘è€…ä¸æµªè´¹å¤ªå¤šæ—¶é—´åœ¨ä¸æ•°æ®åŸºç¡€è®¾æ–½çš„ææ–—ä¸Šï¼Œè€Œæ˜¯èƒ½å¤Ÿä¸“æ³¨äº AI ç®—æ³•ä¸åº”ç”¨é€»è¾‘æœ¬èº«ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–°å‹æ•°æ®åº“ï¼Œèƒ½å¤Ÿå°†è‡ªå·±ä»è¿™ç§æ— è°“çš„æ¶ˆè€—ä¸­è§£æ”¾å‡ºæ¥ã€‚</p>
<h2 data-id="heading-0">0x01. seekdb çš„æ¥é¾™å»è„‰</h2>
<p>OceanBase åˆšå¼€å§‹åªæ˜¯è´Ÿè´£æ·˜å®å’Œæ”¯ä»˜å®çš„å„ç§äº¤æ˜“æ”¯ä»˜ç›¸å…³ä¸šåŠ¡ï¼Œç„¶åæ˜¯å„ç§é“¶è¡Œå’Œé‡‘èæœºæ„ï¼Œæ¥ä¸‹æ¥æ˜¯ä»æ³›äº’è”ç½‘è¡Œä¸šæ‰©å±•åˆ°å„è¡Œå„ä¸šï¼Œè¯¦è§ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFng44Ft1gNKKP2mYK1vsew" target="_blank" title="https://mp.weixin.qq.com/s/Fng44Ft1gNKKP2mYK1vsew" ref="nofollow noopener noreferrer">ã€Šå¼€æº 4 å¹´ã€æ‰“ç£¨ 15 å¹´ã€300 ä¸‡è¡Œä»£ç çš„å¼€æºé¡¹ç›®ã€‹</a>ã€‚</p>
<p>ä½†åœ¨ AI æ—¶ä»£ï¼Œå¯¹äºå¼€å‘è€…ï¼Œç±»ä¼¼äº SQLite è¿™ç§è½»é‡çº§æ•°æ®åº“çš„èƒ½åŠ›éå¸¸æœ‰é™ï¼ˆå‘é‡èƒ½åŠ›å’Œä¼ ç»Ÿ SQL èƒ½åŠ›éš¾ä»¥å…¼å¾—ï¼‰ï¼Œè€Œä¼ ç»Ÿæ•°æ®åº“åˆæœ‰éƒ¨ç½²å¤æ‚åº¦é«˜ã€èµ„æºå ç”¨å¤šç­‰é—®é¢˜ã€‚è¿™ä¸¤ç±»æ•°æ®åº“å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œéƒ½ä¸å¤Ÿå‹å¥½ã€‚</p>
<p>å› æ­¤ï¼ŒOceanBase ä¸“é—¨ä¸º AI æ—¶ä»£çš„å¼€å‘è€…ï¼Œæ‰“é€ äº†ä¸€ä¸ªå¼€æºå…è´¹ã€è½»é‡æ˜“ç”¨ã€æ‹¥æœ‰å¼ºå¤§ AI æœç´¢èƒ½åŠ›çš„æ•°æ®åº“ â€”â€” <strong>seekdb</strong>ã€‚ä¸ªäººç¬”è®°æœ¬å®‰è£…æ— å‹åŠ›ï¼Œè®©å¤§å®¶åªè¦æœ‰æœºå™¨ï¼Œå°±èƒ½è·‘ OBï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb24ebddac6f46579eebf998f5984dde~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=%2BRrmzUB7F0L9ADAK7XdQth5P4%2Fw%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">github.com/oceanbase/sâ€¦</a></p>
</blockquote>
<h2 data-id="heading-1">0x10. seekdb ç®€ä»‹</h2>
<p><strong>seekdb</strong> æ˜¯ OceanBase ä¸“é—¨ä¸ºå¼€å‘è€…æ‰“é€ çš„ä¸€æ¬¾å¼€ç®±å³ç”¨ã€è½»é‡çº§çš„æ•°æ®åº“äº§å“ï¼Œä¸“æ³¨äºä¸º AI åº”ç”¨æä¾›é«˜æ•ˆçš„æ··åˆæœç´¢èƒ½åŠ›ï¼Œæ”¯æŒå‘é‡ã€å…¨æ–‡åŠå¤šæ¨¡æ•°æ®çš„ç»Ÿä¸€å­˜å‚¨ä¸æ£€ç´¢ï¼Œæ˜¯æ„å»º AI åº”ç”¨çš„æ–°é€‰æ‹©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5db2ad4595541008f207eb1a6bade25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=nlpGMKvs34NjEGJ6JmgfdhJ0srI%3D" alt="" loading="lazy"/></p>
<p>seekdb åœ¨ç»§æ‰¿äº†æ·˜å®å’Œæ”¯ä»˜å®èƒŒåçš„ OceanBase æ•°æ®åº“æ ¸å¿ƒå¼•æ“é«˜æ€§èƒ½ä¼˜åŠ¿ä¸ MySQL å…¨é¢å…¼å®¹ç‰¹æ€§çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡æ·±åº¦ä¼˜åŒ–æ•°æ®æœç´¢æ¶æ„ï¼Œä¸ºå¼€å‘è€…æä¾›äº†æ›´ç¬¦åˆ AI åº”ç”¨æ•°æ®å¤„ç†éœ€æ±‚çš„å„é¡¹èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">äº§å“èƒ½åŠ›çŸ©é˜µå¯¹æ¯”</h3>






























































































































<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="center">seekdb</th><th align="center">OceanBase</th><th align="center">Chroma</th><th align="center">Milvus</th><th align="center">MySQL 9.0</th><th align="center">PostgreSQL + pgvector</th><th align="center">DuckDB</th><th align="center">Elasticsearch</th></tr></thead><tbody><tr><td align="left"><strong>åµŒå…¥å¼æ•°æ®åº“</strong></td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>å•æœºæ•°æ®åº“</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>åˆ†å¸ƒå¼æ•°æ®åº“</strong></td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>MySQL å…¼å®¹</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>å‘é‡æœç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>å…¨æ–‡æ£€ç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âš ï¸</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>æ··åˆæœç´¢</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âš ï¸</td><td align="center">âŒ</td><td align="center">âœ…</td></tr><tr><td align="left"><strong>OLTP</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td></tr><tr><td align="left"><strong>OLAP</strong></td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âŒ</td><td align="center">âœ…</td><td align="center">âœ…</td><td align="center">âš ï¸</td></tr><tr><td align="left"><strong>å¼€æºåè®®</strong></td><td align="center">Apache 2.0</td><td align="center">MulanPubL 2.0</td><td align="center">Apache 2.0</td><td align="center">Apache 2.0</td><td align="center">GPL 2.0</td><td align="center">PostgreSQL License</td><td align="center">MIT</td><td align="center">AGPLv3+ SSPLv1+ Elastic 2.0</td></tr></tbody></table>
<blockquote>
<p>MySQL 8.0 ç§»é™¤äº†åµŒå…¥å¼èƒ½åŠ›</p>
</blockquote>
<h3 data-id="heading-3">seekdb çš„é€‚ç”¨åœºæ™¯</h3>
<ul>
<li><strong>RAG åº”ç”¨</strong>ï¼šé¢å‘ä»¥æ™ºèƒ½èŠå¤©æœºå™¨äººã€çŸ¥è¯†åº“ã€é¢†åŸŸä¸“å®¶ç³»ç»Ÿä¸ºä»£è¡¨çš„ RAG åœºæ™¯ï¼Œseekdb æ”¯æŒäº†å®Œæ•´çš„ RAG Pipeline è§£å†³æ–¹æ¡ˆã€‚å†…ç½®æ–‡æ¡£è§£æå¤„ç†åŠŸèƒ½ï¼Œé›†æˆå‘é‡åµŒå…¥ï¼ˆEmbeddingï¼‰ã€é‡æ’åºï¼ˆRerankï¼‰åŠå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œæ”¯æŒå‘é‡/å…¨æ–‡/æ ‡é‡æ··åˆæœç´¢ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åº“å®ä¾‹å†…å®ç° <strong>Doc In Data Out</strong>ã€‚</li>
<li><strong>AI è¾…åŠ©ç¼–ç¨‹</strong>ï¼šé¢å‘ AI è¾…åŠ©ç¼–ç¨‹åœºæ™¯ï¼Œseekdb æ”¯æŒå¯¹ä»£ç ä»“åº“æ„å»ºå‘é‡å’Œå…¨æ–‡ç´¢å¼•ï¼ŒåŸºäºä»£ç å…³é”®è¯æˆ–ä»£ç è¯­ä¹‰ï¼Œè¿›è¡Œé«˜æ•ˆçš„ä»£ç æœç´¢å’Œç”Ÿæˆè¡¥å…¨ã€‚</li>
<li><strong>AI Agent å¹³å°ç±»åº”ç”¨</strong>ï¼šé¢å‘ AI Agent å¼€å‘åœºæ™¯ï¼Œseekdb æä¾›äº†å¿«é€Ÿå¯åŠ¨å’ŒåµŒå…¥å¼éƒ¨ç½²èƒ½åŠ›ï¼Œæ”¯æŒè¢«å¿«é€Ÿæ‹‰èµ·æä¾›æœåŠ¡ã€‚æä¾›é«˜é¢‘å¢åˆ æ”¹å’Œå®æ—¶æŸ¥è¯¢èƒ½åŠ›ï¼Œé¿å…æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆå¼•èµ· AI å¼€å‘æ•ˆç‡é™ä½çš„é—®é¢˜ã€‚æä¾›å‘é‡æœç´¢ã€å…¨æ–‡æœç´¢åŠæ··åˆæœç´¢ç‰¹æ€§å’Œçµæ´»çš„å…ƒæ•°æ®ç®¡ç†èƒ½åŠ›ï¼Œç»“åˆä¼šè¯ç®¡ç†ä¸è®°å¿†å­˜å‚¨èƒ½åŠ›ï¼Œæ— éœ€å†å¼•å…¥å…¶ä»–åº“å°±å¯å¿«é€Ÿæ„å»º AI Agentã€‚æä¾› MCP Server ç»„ä»¶ï¼Œæ— ç¼æ¥å…¥ AI ç”Ÿæ€ã€‚</li>
<li><strong>è¯­ä¹‰æœç´¢å¼•æ“</strong>ï¼šé¢å‘ä»¥ç”µå•†å•†å“æœç´¢å’Œæ¨èã€å¤šåª’ä½“å†…å®¹æ£€ç´¢ã€å›¾ç‰‡æœç´¢ç­‰è¯­ä¹‰æœç´¢åœºæ™¯ï¼Œseekdb æ”¯æŒå¯¹æ¥ä¸»æµå‘é‡åµŒå…¥æ¨¡å‹å¹¶æä¾›äº†å‘é‡æœç´¢èƒ½åŠ›ã€‚åŒæ—¶æä¾›äº† Hybrid Index åŠŸèƒ½ï¼Œæ”¯æŒåŸºäºæ–‡æœ¬æŸ¥è¯¢æ¡ä»¶è¿›è¡Œè¯­ä¹‰æœç´¢ï¼Œå¯¹ç”¨æˆ·å±è”½å‘é‡åµŒå…¥å’ŒæŸ¥è¯¢ç»“æœ Rerank çš„å¤æ‚æµç¨‹ã€‚</li>
<li><strong>MySQL åº”ç”¨ç°ä»£åŒ–å’Œ AI åŒ–å‡çº§</strong>ï¼šseekdb ç»§æ‰¿äº† OceanBase å•æœºå­˜å‚¨å¼•æ“ã€æ‰§è¡Œå¼•æ“ã€äº‹åŠ¡å¼•æ“ã€é«˜çº§æŸ¥è¯¢ä¼˜åŒ–å™¨çš„å®Œæ•´èƒ½åŠ›ï¼Œé«˜åº¦å…¼å®¹ MySQLï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±• AI èƒ½åŠ›ã€‚å°è§„æ ¼å¯ç”¨äºç‰©è”ç½‘è¾¹ç¼˜è®¾å¤‡æ•°æ®é‡‡é›†ã€å°å‹åº”ç”¨å¼€å‘å’Œå®éªŒæ•™å­¦ç­‰åœºæ™¯ï¼Œä¸­å¤§è§„æ ¼å¯ç”¨äºå„è¡Œä¸š OLTPã€HTAP æˆ– AI ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-4">seekdb çš„äº§å“æ¶æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c0aecd44d5646d8aee38fa0fc4eae7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=x3GUudtrz0ITBIxXTkA0BEfA0rM%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>éƒ¨ç½²æ¨¡å¼</strong>ï¼šæ”¯æŒ Client/Server å’ŒåµŒå…¥å¼ä¸¤ç§éƒ¨ç½²æ¨¡å¼ã€‚åµŒå…¥å¼æ¨¡å¼ä¸‹å¯å°† seekdb ç›´æ¥é›†æˆè¿› Python åº”ç”¨ï¼Œä¾¿äºè¿›è¡Œä¸ªäººå¼€å‘ã€‚</li>
<li><strong>å…·æœ‰ ACID äº‹åŠ¡è¯­ä¹‰çš„å­˜å‚¨å±‚</strong>ï¼šåŸºäº LSM-Tree æ¶æ„çš„è¡Œå­˜åˆ—å­˜ä¸€ä½“åŒ–å­˜å‚¨å¼•æ“ï¼Œè‡ªç ”é«˜æ•ˆçš„ç¼–ç å‹ç¼©æœºåˆ¶é™ä½å­˜å‚¨æˆæœ¬ã€‚æ”¯æŒæ•°æ®é«˜é¢‘å®æ—¶å†™å…¥ï¼Œå’Œé¢å‘ä¸åŒè´Ÿè½½çš„é«˜æ€§èƒ½æŸ¥è¯¢ã€‚</li>
<li><strong>å¤šæ¨¡æ•°æ®ä¸ç´¢å¼•å±‚</strong>ï¼šæ”¯æŒåŸºç¡€ç±»å‹ï¼Œå‘é‡ã€å¤§æ–‡æœ¬ã€JSON ã€GISã€Array ç­‰å¤šæ¨¡æ•°æ®ç±»å‹ï¼Œå¹¶æä¾›é«˜æ•ˆçš„ç´¢å¼•æ”¯æŒã€‚åŒ…æ‹¬ HNSW / IVF å‘é‡ç´¢å¼•åŠç´¢å¼•é‡åŒ–ç®—æ³•ï¼Œè¦†ç›–å¤šç§åˆ†è¯å™¨å’ŒæŸ¥è¯¢æ¨¡å¼çš„åŸºäº BM25 ç›¸å…³æ€§è®¡ç®—ç®—æ³•çš„å…¨æ–‡ç´¢å¼•ï¼Œé€‚ç”¨äºè¯­ä¹‰æœç´¢çš„æ··åˆç´¢å¼•ï¼ŒåŠ JSON å¤šå€¼ç´¢å¼•ã€ä¸»é”®å’ŒäºŒçº§ç´¢å¼•ã€GIS ç´¢å¼•ç­‰ã€‚</li>
<li><strong>æ”¯æŒæ··åˆè´Ÿè½½çš„å¤šæ¨¡è®¡ç®—å±‚</strong>ï¼šæ”¯æŒå‘é‡ã€å…¨æ–‡ã€æ ‡é‡ç­‰æ¡ä»¶çš„æ··åˆæœç´¢ã€‚æä¾› AI Function èƒ½åŠ›ï¼Œå®ç°åº“å†…å®æ—¶æ¨ç†ã€‚æ”¯æŒå®Œæ•´çš„ ACID äº‹åŠ¡ç‰¹æ€§åŠåŸºäº MVCC çš„å¤šç‰ˆæœ¬å¹¶å‘è®¿é—®èƒ½åŠ›ï¼Œæä¾›é«˜çº§æŸ¥è¯¢ä¼˜åŒ–å™¨å’Œå…·å¤‡å‘é‡åŒ–æ‰§è¡Œèƒ½åŠ›çš„é«˜æ•ˆæ‰§è¡Œå¼•æ“ã€‚</li>
<li><strong>ç»Ÿä¸€åº”ç”¨æ¥å£</strong>ï¼šå…¼å®¹ MySQL åŸç”Ÿé©±åŠ¨ï¼Œæä¾›åŸºäº SQL çš„æ”¯æŒå¤šæ¨¡æ•°æ®çš„ç»Ÿä¸€æŸ¥è¯¢è¯­è¨€ã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†é¢å‘å¼€å‘è€…æ›´åŠ å‹å¥½çš„å‘é‡åº“/æ··æœ SDKã€‚é€‚é… LangChainã€LlamaIndexã€Dify ç­‰ AI åº”ç”¨å¼€å‘æ¡†æ¶ã€‚æä¾› MCP Serverï¼Œæ— ç¼æ¥å…¥ AI ç”Ÿæ€ã€‚</li>
</ul>
<h3 data-id="heading-5">seekdb çš„æ ¸å¿ƒç‰¹æ€§</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fd01ba9f0714c84b779540f26a20538~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=LVVDo6VRxeKlIZnBSz%2BRBsVOzIk%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>å¼€ç®±å³ç”¨ï¼Œæé€Ÿå¼€å‘ï¼Œæ˜“å­¦æ˜“ç”¨</strong>ï¼šå•ç‚¹æ¶æ„è®¾è®¡ï¼Œæ— å…¶ä»–ç»„ä»¶ä¾èµ–ã€‚æ”¯æŒ yumã€dockerã€windows/macos æ¡Œé¢ç‰ˆéƒ¨ç½²ä»¥åŠåŸç”Ÿ Python åµŒå…¥å¼é›†æˆã€‚</li>
<li><strong>æ”¯æŒ 1C2G å°è§„æ ¼ï¼Œå‚ç›´å¼¹æ€§æ‰©ç¼©å®¹</strong>ï¼šæœåŠ¡ç«¯ 1 æ ¸ CPU + 2GB å†…å­˜å³å¯è·‘ VectorDBBench Performance1536D50Kã€‚</li>
<li><strong>é«˜æ€§èƒ½å‘é‡ç´¢å¼•ã€å…¨æ–‡ç´¢å¼•ï¼Œæ”¯æŒå‘é‡ã€å…¨æ–‡ã€æ ‡é‡æ··åˆæœç´¢</strong>
<ul>
<li><strong>å‘é‡æœç´¢</strong>ï¼šæ”¯æŒé«˜è¾¾ 16,000 ç»´å‘é‡å­˜å‚¨ï¼Œå…¼å®¹ L2ã€å†…ç§¯ã€ä½™å¼¦ç›¸ä¼¼åº¦ã€‚</li>
<li><strong>å…¨æ–‡æœç´¢</strong>ï¼šåŸºäº BM25 ç®—æ³•ï¼Œæä¾› Spaceã€Bengã€Ngramã€IKã€Jieba ç­‰å¤šç§åˆ†è¯å™¨ã€‚</li>
<li><strong>æ··åˆæœç´¢</strong>ï¼šä¸€æ¡ SQL å®Œæˆå¤šè·¯æŸ¥è¯¢ä¸é‡æ’åºã€‚</li>
</ul>
</li>
<li><strong>æ··æœåœºæ™¯å‡çº§ï¼ŒåŸºäº Hybrid Index æŒ‡å®šæ–‡æœ¬ä¹Ÿå¯è¿›è¡Œè¯­ä¹‰æœç´¢</strong>ï¼šåªéœ€å†™å…¥æ–‡æœ¬æ•°æ®ï¼Œç³»ç»Ÿè‡ªåŠ¨è¿›è¡Œ Embedding å¹¶ç”Ÿæˆå‘é‡ç´¢å¼•ï¼ŒæŸ¥è¯¢æ—¶ä»…éœ€æŒ‡å®šæ–‡æœ¬æœç´¢æ¡ä»¶ã€‚</li>
<li><strong>æ— ç¼å¯¹æ¥å„ç±»æ¨¡å‹ï¼Œå†…ç½® AI Function å®ç°åº“å†…å®æ—¶æ¨ç†</strong>ï¼šé€šè¿‡ <code>DBMS_AI_SERVICE</code> ç³»ç»ŸåŒ…å®ç°æ¨¡å‹æ³¨å†Œå’Œç®¡ç†ã€‚å†…ç½® <code>AI_COMPLETE</code>ã€<code>AI_PROMPT</code>ã€<code>AI_EMBED</code>ã€<code>AI_RERANK</code> ç­‰å‡½æ•°ã€‚</li>
<li><strong>åŸºäº JSON çš„åŠ¨æ€ Schema</strong>ï¼šæ”¯æŒ JSON æ•°æ®ç±»å‹åŠåŠ¨æ€ Schemaï¼Œæä¾› JSON å‡½æ•°ç´¢å¼•ã€å¤šå€¼ç´¢å¼•ã€‚</li>
<li><strong>æ•°æ®å®æ—¶å†™å…¥ï¼Œå®æ—¶å¯æŸ¥</strong>ï¼šåŸºäº LSM-Treeï¼Œæ•°æ®å…¥åº“æˆåŠŸç«‹å³å¯æŸ¥ï¼ŒåŒæ­¥æ„å»ºå„ç±»ç´¢å¼•ã€‚</li>
<li><strong>å…¼å®¹ MySQL ä¸æ­¢äº MySQLï¼Œæ”¯æ’‘ HTAP æ··åˆè´Ÿè½½</strong>ï¼šæ·±åº¦å…¼å®¹ MySQL è¯­æ³•åè®®ï¼Œä¸€ä¸ªå®ä¾‹åŒæ—¶æ”¯æŒè”æœºäº¤æ˜“å’Œå®æ—¶åˆ†æã€‚</li>
</ol>
<h2 data-id="heading-6">0x11. å¿«é€Ÿéƒ¨ç½² seekdb ä½“éªŒç¯å¢ƒ</h2>
<blockquote>
<p>æœåŠ¡å™¨é…ç½®è¦æ±‚è¯¦è§å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oceanbase.ai%2Fdocs%2Fzh-CN%2Fdeploy-seekdb-testing-environment" target="_blank" title="https://www.oceanbase.ai/docs/zh-CN/deploy-seekdb-testing-environment" ref="nofollow noopener noreferrer">deploy-seekdb-testing-environment</a></p>
</blockquote>
<h3 data-id="heading-7">1. ä½¿ç”¨ yum install å¿«é€Ÿéƒ¨ç½²</h3>
<p><strong>æ·»åŠ  seekdb é•œåƒæºï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum-config-manager --add-repo https://mirrors.aliyun.com/oceanbase/OceanBase.repo
</code></pre>
<p><strong>å®‰è£… seekdb å’Œ obclient å®¢æˆ·ç«¯ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo yum install seekdb obclient
</code></pre>
<p>å¦‚æœåœ¨å¯åŠ¨å‰éœ€è¦æ›´æ”¹é…ç½®ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ <code>/etc/oceanbase/seekdb.cnf</code>ï¼Œé…ç½®é¡¹å¾ˆå°‘å¯æŒ‰éœ€ä¿®æ”¹ã€‚</p>
<p><strong>å»ºè®® <code>cpu_count</code> å’Œ <code>memory_limit</code> æœ€å¥½å¤§äº 1C2Gï¼Œäº²æµ‹ 1C1G ä¹Ÿ No Problemã€‚</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ç¤ºä¾‹é…ç½®</span>
<span class="hljs-attr">port</span>=<span class="hljs-number">1234</span>
<span class="hljs-attr">base-dir</span>=/var/lib/oceanbase
<span class="hljs-attr">data-dir</span>=/var/lib/oceanbase/store
<span class="hljs-attr">redo-dir</span>=/var/lib/oceanbase/store/redo
<span class="hljs-attr">datafile_size</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">datafile_next</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">datafile_maxsize</span>=<span class="hljs-number">50</span>G
<span class="hljs-attr">cpu_count</span>=<span class="hljs-number">4</span>
<span class="hljs-attr">memory_limit</span>=<span class="hljs-number">2</span>G
<span class="hljs-attr">log_disk_size</span>=<span class="hljs-number">2</span>G
</code></pre>
<p><strong>å¯åŠ¨ä¸ç®¡ç† seekdbï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ seekdb</span>
sudo systemctl start seekdb

<span class="hljs-comment"># æŸ¥çœ‹å¯åŠ¨çŠ¶æ€ (æ˜¾ç¤º Service is ready å³æˆåŠŸ)</span>
sudo systemctl status seekdb

<span class="hljs-comment"># è¿æ¥ seekdb</span>
obclient -h127.0.0.1 -uroot -P1234 -A oceanbase

<span class="hljs-comment"># åœæ­¢æœåŠ¡</span>
sudo systemctl stop seekdb

<span class="hljs-comment"># å¼€æœºå¯åŠ¨</span>
sudo systemctl <span class="hljs-built_in">enable</span> seekdb
</code></pre>
<h3 data-id="heading-8">2. åµŒå…¥å¼å®‰è£…</h3>
<p>seekdb æä¾›äº†åµŒå…¥å¼éƒ¨ç½²æ–¹å¼ï¼Œå¯ä»¥ä½œä¸ºä¸€ä¸ªâ€œåº“â€è¿è¡Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºå†…éƒ¨ã€‚</p>
<p><strong>Python ç¤ºä¾‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> seekdb

<span class="hljs-comment"># Open a database</span>
seekdb.<span class="hljs-built_in">open</span>()

<span class="hljs-comment"># Connect to a database</span>
conn = seekdb.connect()

<span class="hljs-comment"># Use the connection</span>
cursor = conn.cursor()
cursor.execute(<span class="hljs-string">"select version();"</span>)
results = cursor.fetchall()
<span class="hljs-built_in">print</span>(results)

<span class="hljs-comment"># Close the connection</span>
conn.close()
</code></pre>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<pre><code class="hljs language-bash" lang="bash">$ python3 sample.py
[(<span class="hljs-string">'1.2.34-OceanBase NewProduct-v5.6.7.8'</span>,)]
</code></pre>
<h3 data-id="heading-9">3. å…¶ä»–éƒ¨ç½²æ–¹å¼</h3>
<p>é™¤æ­¤ä¹‹å¤–ï¼ŒOB å®˜æ–¹è¿˜æä¾›äº† seekdb çš„ Docker é•œåƒå’Œæ¡Œé¢ç‰ˆç®¡ç†å·¥å…·ï¼Œç¯‡å¹…æœ‰é™è¿™é‡Œå°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥ç§»æ­¥æ–‡æ¡£æŸ¥çœ‹ï¼ˆoceanbase.ai/docsï¼‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d85b5dd0eb994f4c809fa11de6b8d15d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=n4lTC1Ft929%2BUSddEHzXLziw%2FMc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">0xFF. å†™åœ¨æœ€å</h2>
<p>å›æƒ³å»å¹´ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ç”¨ OceanBase æ•°æ®åº“åš RAG åº”ç”¨ï¼Œå½“æ—¶ç”¨ 16GB å†…å­˜çš„ MacBook Pro å¯åŠ¨ OB ç«Ÿç„¶è¿˜ä¼šå› ä¸ºå†…å­˜ä¸å¤Ÿè€Œå¤±è´¥â˜¹ï¸ï¼Œé‚£æ—¶å€™çš„ OB å¼ºå¤§å´ç•¥æ˜¾â€œé«˜å†·â€ã€‚</p>
<p>è€Œ seekdb çš„å‡ºç°ï¼Œè®©æˆ‘æœ‰ä¸€ç§â€œå£«åˆ«ä¸‰æ—¥å½“åˆ®ç›®ç›¸çœ‹â€çš„æ„Ÿè§‰ã€‚OceanBase ä»æ˜”æ—¥â€œé«˜ä¸å¯æ”€â€çš„é‡‘èçº§æ•°æ®åº“ï¼Œåˆ°å¦‚ä»Šâ€œè§¦æ‰‹å¯åŠâ€çš„ seekdbï¼ŒOceanBase å›¢é˜Ÿè¿™æ¬¡çœŸæ­£çœ‹æ‡‚äº†å¼€å‘è€…åœ¨ AI æ—¶ä»£å¯¹æ•°æ®åº“æœŸæœ›çš„æ ·å­ï¼šæ— ç—›çš„ä¸Šæ‰‹ä½“éªŒï¼Œä¸åƒèµ„æºã€é…ç½®ç®€å•ã€å¼€ç®±å³ç”¨ï¼Œå´ä¾ç„¶å¼ºå¤§å¯é ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f28ced87a97448884d366a67c63a2fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764634795&amp;x-signature=BM9NWjZsJcEfZkpIo0Qd%2BNx9O48%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>GitHub åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">github.com/oceanbase/sâ€¦</a></p>
</blockquote>
<p>ç°åœ¨çš„ seekdb ä¹Ÿè®¸è¿˜ä¸æ˜¯â€œæœ€ç»ˆå½¢æ€â€ï¼Œä½†å®ƒç»å¯¹æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„èµ·ç‚¹ï¼Œè®©æˆ‘ä»¬ä¸€èµ·è§è¯è¿™æ¬¾â€œæ›´æ‡‚ AI çš„æ•°æ®åº“â€æˆé•¿ä¹‹è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡]]></title>    <link>https://juejin.cn/post/7576378563575545871</link>    <guid>https://juejin.cn/post/7576378563575545871</guid>    <pubDate>2025-11-25T08:10:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563575545871" data-draft-id="7576208176007905332" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡"/> <meta itemprop="keywords" content="å‰ç«¯,Flutter,uni-app"/> <meta itemprop="datePublished" content="2025-11-25T08:10:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°"/> <meta itemprop="url" content="https://juejin.cn/user/3320949647350765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Webå‰ç«¯ä»¬ï¼æˆ‘ç”¨ä¸‰å¹´äº²èº«ç»å†ï¼Œè¯´è¯´ä» uniapp åˆ° Flutteræ€ä¹ˆè½¬å‹çš„ï¼Œè¿™æ¡è·¯æˆ‘çˆ¬è¿‡ï¼Œå‘æˆ‘è¸©è¿‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3320949647350765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—çš„è·¨ç«¯å¼€å‘æ—¥è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T08:10:26.000Z" title="Tue Nov 25 2025 08:10:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    118
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ã€å°æ—ã€‘</p>
<p>è¯´æ¥æœ‰ç‚¹æ„æ€ï¼Œæˆ‘çš„åå°ç§ä¿¡ï¼Œæœ€è¿‘æœ‰ç‚¹çƒ­é—¹çƒ­é—¹ï¼Œç‚¹å¼€ä¸€çœ‹ï¼Œç¿»æ¥è¦†å»éƒ½æ˜¯åŒä¸€ä¸ªé—®é¢˜ï¼š</p>
<p><strong>â€œå“¥ä»¬ï¼Œæˆ‘ä¸€Webå‰ç«¯ï¼Œèƒ½è½¬ RN/Flutter å—ï¼Ÿå¥½è½¬å—ï¼Ÿæ°´æ·±ä¸ï¼Ÿâ€</strong></p>
<p>é—®çš„äººå¤šäº†ï¼Œæˆ‘ä¸€ä¸ªä¸ªå›å®åœ¨æœ‰ç‚¹ç´¯ã€‚è€Œä¸”æˆ‘å‘ç°ï¼Œè¿™å·²ç»ä¸æ˜¯ä¸€ä¸ªç®€å•çš„â€œèƒ½ä¸èƒ½â€çš„é—®é¢˜ï¼ŒèƒŒåæ˜¯ Web å¼€å‘è€…å¯¹æœªçŸ¥ç§»åŠ¨ç«¯é¢†åŸŸçš„ä¸€ç³»åˆ—å›°æƒ‘ã€ç„¦è™‘å’Œå¥½å¥‡ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘å†³å®šå¹²è„†å†™ä¸€ç¯‡æ–‡ç« ï¼ŒæŠŠæˆ‘ä»ä¸€ä¸ªçº¯ç²¹çš„ Web å‰ç«¯ï¼Œä¸€æ­¥æ­¥â€œçˆ¬â€åˆ° Flutter å¼€å‘çš„ç»å†å’Œæ€è€ƒï¼Œæ°å¼€æ‰ç¢äº†åˆ†äº«ç»™å¤§å®¶ã€‚æˆ‘ä¸è®²æŸä¸ª API æ€ä¹ˆç”¨ï¼Œä¹Ÿä¸è´´å¤§æ®µçš„æºç ï¼Œå’±å°±èŠç‚¹å¤§å®è¯ï¼ŒèŠèŠè¿™æ¡è·¯åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚</p>
<p>å…ˆè‡ªæŠ¥å®¶é—¨ï¼Œè®©å¤§å®¶çŸ¥é“æˆ‘ä¸æ˜¯åœ¨â€œçå¿½æ‚ â€ã€‚</p>
<p>æˆ‘ï¼Œ22å¹´æ¯•ä¸šå°±åšäº† Web å‰ç«¯ã€‚ç¬¬ä¸€ä»½å·¥ä½œåœ¨ä¸Šæµ·ä¸€å®¶å°å…¬å¸ï¼Œä¸Šæ¥å°±æ˜¯ç¡¬ä»—ï¼Œç”¨Â <code>uni-app</code>Â ä»0åˆ°1ææ¢ç”µå°ç¨‹åºçš„å¾®ä¿¡å’Œæ”¯ä»˜å®ç‰ˆã€‚åæ¥è€æ¿ä¸ºäº†èèµ„ï¼Œè¯´å°ç¨‹åºä½“éªŒä¸è¡Œï¼Œè¦åš Appï¼Œäºæ˜¯æˆ‘åˆä¸´å±å—å‘½ï¼Œåœ¨Â <code>uni-app</code>ã€<code>RN</code>ã€<code>Flutter</code>Â ä¸‰ä¸ªæŠ€æœ¯é‡Œé€‰å‹ï¼Œæœ€åç¡¬ç€å¤´çš®ä¸Šäº†Â <code>Flutter</code>ï¼Œé‚£æ—¶å€™å¯æ²¡ç°åœ¨è¿™ä¹ˆå¤š AI èƒ½å¸®ä½ ï¼Œå…¨é ä¸€è¡Œè¡Œæ‰‹æ•²ï¼Œæ„£æ˜¯æŠŠ App ç»™å¹²ä¸Šçº¿äº†ã€‚</p>
<p>åæ¥è·³æ§½åˆ°äº†åŒ—äº¬ä¸€å®¶ä¸Šå¸‚å…¬å¸ï¼Œæ­£å¼æˆä¸ºä¸€å Flutter å¼€å‘ï¼Œåš AIGC é¡¹ç›®ï¼Œå°±æ˜¯å¤§å®¶ç©çš„æ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾é‚£äº›ã€‚å†åæ¥ï¼Œæˆ‘åˆå»äº†å°ç±³ï¼ˆå¤–åŒ…ï¼‰ï¼Œå‚ä¸é’±åŒ…é‡Œçš„ AI è®°è´¦æ¨¡å—ï¼Œä½“éªŒäº†ä¸€æŠŠå¤§å‚çš„æ··åˆå¼€å‘æ¨¡å¼ã€‚ç°åœ¨å…¥èŒä¸€å®¶ä¸­å‚ï¼Œæœ‰ä¸“é—¨çš„FlutteræŠ€æœ¯å›¢é˜Ÿ...</p>
<p>ä¸€è·¯ä¸Šï¼Œä»Â <code>uni-app</code>Â çš„ WebViewï¼Œåˆ° Flutter çš„è‡ªç»˜å¼•æ“ï¼Œä»ä¸€ä¸ªäººå•æ‰“ç‹¬æ–—ï¼Œåˆ°å’ŒåŸç”Ÿå¼€å‘ååŒä½œæˆ˜ï¼Œä¹Ÿè‡ªå·±å°è£…äº†å‡ ä¸ªæ’ä»¶å‘å¸ƒåˆ° pub.devï¼Œç®—æ˜¯æ··äº†ä¸ªè„¸ç†Ÿã€‚</p>
<p>æ‰€ä»¥ï¼Œå…³äºâ€œWebå‰ç«¯è½¬è·¨å¹³å°â€è¿™ä¸ªè¯é¢˜ï¼Œæˆ‘è§‰å¾—æˆ‘è¿˜æ˜¯èƒ½èŠå‡ å¥çš„ã€‚</p>
<h2 data-id="heading-1">ç¯‡ç« ä¸€ï¼š æ‹ç›´æ¦‚å¿µï¼Œä»€ä¹ˆæ˜¯è·¨å¹³å°åˆ°å¼€å‘</h2>
<p>åœ¨å¾ˆå¤š Web åŒå­¦çœ¼é‡Œä¹ŸåŒ…æ‹¬æ›¾ç»çš„æˆ‘ï¼Œç§»åŠ¨ç«¯å¼€å‘å°±ä¿©ç‰©ç§ï¼š<strong>åŸç”Ÿï¼ˆNativeï¼‰</strong> Â å’ŒÂ <strong>è·¨å¹³å°ï¼ˆCross-Platformï¼‰</strong> ã€‚</p>
<h3 data-id="heading-2">åŸç”Ÿå¼€å‘å’Œè·¨å¹³å°å¼€å‘çš„åŒºåˆ«åœ¨å“ªï¼Ÿ</h3>
<p>è¿™ä¸ªç†è§£æ²¡é”™ï¼Œä½†æœ‰ç‚¹ç¬¼ç»Ÿã€‚æˆ‘ä»¬ç”¨ä¸ªå¥½æ‡‚çš„æ¯”å–»æ¥è§£é‡Šã€‚</p>
<p><strong>åŸç”Ÿå¼€å‘ï¼ˆNative Developmentï¼‰</strong></p>
<blockquote>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åœ¨åŒ—äº¬å’Œä¸Šæµ·å„å¼€ä¸€å®¶æœ¬åœ°ç‰¹è‰²èœé¦†ã€‚</p>
<p>ä½ ä¼šåœ¨åŒ—äº¬è¯·ä¸€ä½ç²¾é€šäº¬é…±è‚‰ä¸ã€çƒ¤é¸­çš„åŒ—äº¬æœ¬åœ°å¨å¸ˆï¼ˆ<strong>Android å¼€å‘è€…</strong>ï¼‰ï¼Œç”¨æœ¬åœ°çš„é£Ÿæå’Œç¶å…·ï¼ˆ<strong>Java/Kotlin + Android SDK</strong>ï¼‰ã€‚</p>
<p>ä½ ä¼šåœ¨ä¸Šæµ·è¯·ä¸€ä½ç²¾é€šçº¢çƒ§è‚‰ã€è…Œç¬ƒé²œçš„ä¸Šæµ·æœ¬åœ°å¨å¸ˆï¼ˆ<strong>iOS å¼€å‘è€…</strong>ï¼‰ï¼Œç”¨ä¸Šæµ·çš„é£Ÿæå’Œç¶å…·ï¼ˆ<strong>Objective-C/Swift + iOS SDK</strong>ï¼‰ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä¸¤å®¶èœé¦†éƒ½åšå‡ºäº†æœ€åœ°é“ã€æœ€åŸæ±åŸå‘³ã€ä¸Šèœæœ€å¿«çš„æœ¬åœ°èœï¼ˆ<strong>æ€§èƒ½æœ€å¥½ã€ä½“éªŒæœ€æ£’ã€æœ€è´´åˆç³»ç»Ÿç‰¹æ€§</strong>ï¼‰ã€‚<br/>
<strong>ç¼ºç‚¹</strong>ï¼šä½ å¾—é›‡ä¸¤ä¸ªå¨å¸ˆï¼Œæ²Ÿé€šä¸¤å¥—èœå•ï¼Œç®¡ç†ä¸¤ä¸ªå¨æˆ¿ï¼Œæˆæœ¬ç›´æ¥ç¿»å€ï¼ˆ<strong>å¼€å‘æˆæœ¬é«˜ã€å‘¨æœŸé•¿ã€å›¢é˜Ÿç»´æŠ¤éš¾</strong>ï¼‰ã€‚</p>
</blockquote>
<p><strong>åŸç”Ÿå¼€å‘è§£å†³çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼šæ¦¨å¹²å¹³å°æ€§èƒ½ï¼Œæä¾›æè‡´çš„ç”¨æˆ·ä½“éªŒã€‚</strong> Â ä»»ä½•ä¸ç³»ç»Ÿåº•å±‚æ·±åº¦äº¤äº’çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å®šåˆ¶åŒ–çš„ç³»ç»Ÿçº§æœåŠ¡ã€å¤æ‚çš„è“ç‰™/NFCé€šä¿¡ã€é«˜æ€§èƒ½çš„å›¾å½¢å¤„ç†ï¼ŒåŸç”Ÿéƒ½æ˜¯å½“ä¹‹æ— æ„§çš„ç‹è€…ã€‚åœ¨æˆ‘åšAIGCé¡¹ç›®æ—¶ï¼Œé‚£ä¸¤ä¸ªå®‰å“å’ŒiOSçš„åŒäº‹ï¼Œä»–ä»¬ä¸ç›´æ¥å‚ä¸ä¸šåŠ¡å¼€å‘ï¼Œä½†ä»–ä»¬è´Ÿè´£æ‰“åŒ…ã€è´Ÿè´£æŠŠç®—æ³•å›¢é˜Ÿç»™çš„ C++ SDK é›†æˆåˆ°åŸç”Ÿå·¥ç¨‹é‡Œï¼Œå†æš´éœ²æ¥å£ç»™æˆ‘ä»¬ Flutter è°ƒç”¨ã€‚è¿™å°±æ˜¯åŸç”Ÿçš„â€œç‰¹åŒºâ€ï¼Œè·¨å¹³å°æŠ€æœ¯è½»æ˜“ä¸æ•¢æ¶‰è¶³ã€‚</p>
<p><strong>è·¨å¹³å°å¼€å‘ï¼ˆCross-Platform Developmentï¼‰</strong></p>
<blockquote>
<p>ç°åœ¨ï¼Œä½ è§‰å¾—ä¸¤å®¶åº—æˆæœ¬å¤ªé«˜ï¼Œå†³å®šå¼€ä¸€å®¶èåˆèœé¦†ã€‚</p>
<p>ä½ è¯·æ¥ä¸€ä½å¤©æ‰å¤§å¨ï¼ˆ<strong>è·¨å¹³å°æ¡†æ¶</strong>ï¼‰ï¼Œä»–å¸¦æ¥äº†ä¸€å¥—è‡ªå·±ç‹¬é—¨çš„ä¸‡èƒ½å¨å…·å’Œæ ‡å‡†åŒ–çš„çƒ¹é¥ªæµç¨‹ï¼ˆ<strong>ä¸€å¥—ä»£ç </strong>ï¼‰ã€‚</p>
<p>ä»–ç”¨è¿™å¥—æµç¨‹ï¼Œæ—¢èƒ½åšå‡ºå…«ä¹ä¸ç¦»åçš„äº¬é…±è‚‰ä¸ï¼Œä¹Ÿèƒ½åšå‡ºå‘³é“ä¸é”™çš„çº¢çƒ§è‚‰ï¼Œè€Œä¸”ä¸¤é“èœå¯ä»¥åŒæ—¶å¼€ç«ï¼Œæ•ˆç‡æé«˜ï¼ˆ<strong>ä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œï¼Œé™æœ¬å¢æ•ˆ</strong>ï¼‰ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä½ åªéœ€è¦ç®¡ç†ä¸€ä¸ªå¨å¸ˆå’Œä¸€ä¸ªå¨æˆ¿ï¼Œæˆæœ¬å¤§å¤§é™ä½ï¼Œä¸Šæ–°èœä¹Ÿå¿«ï¼ˆ<strong>å¼€å‘æˆæœ¬ä½ã€æ•ˆç‡é«˜ã€UIä¸€è‡´æ€§å¥½</strong>ï¼‰ã€‚<br/>
<strong>ç¼ºç‚¹</strong>ï¼šè™½ç„¶èœå¥½åƒï¼Œä½†ç»ˆç©¶ä¸æ˜¯æœ¬åœ°è€å¸ˆå‚…åšçš„ï¼Œå£æ„Ÿä¸Šå¯èƒ½å·®é‚£ä¹ˆç‚¹â€œåœ°é“â€çš„æ„Ÿè§‰ï¼ˆ<strong>æ€§èƒ½å’Œä½“éªŒé€šå¸¸æœ‰æŸè€—</strong>ï¼‰ï¼Œè€Œä¸”å¦‚æœé‡åˆ°ç‰¹åˆ«åˆé’»çš„æœ¬åœ°é£Ÿæï¼ˆ<strong>ç‰¹å®šç³»ç»ŸAPI</strong>ï¼‰ï¼Œè¿™ä½å¤§å¨ä¹Ÿå¾—å»è¯·æ•™æœ¬åœ°å¨å¸ˆæ€ä¹ˆå¤„ç†ï¼ˆ<strong>éœ€è¦åŸç”Ÿè¾…åŠ©</strong>ï¼‰ã€‚</p>
</blockquote>
<p><strong>è·¨å¹³å°è§£å†³çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼šåœ¨ä¿è¯ä½“éªŒåŸºæœ¬ç›˜çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§åŒ–åœ°å¤ç”¨ä»£ç ï¼Œé™ä½æˆæœ¬ï¼Œæå‡æ•ˆç‡ã€‚</strong> Â å®ƒæ˜¯å•†ä¸šå’ŒæŠ€æœ¯æƒè¡¡ä¸‹çš„äº§ç‰©ï¼Œå°¤å…¶é€‚åˆé‚£äº›ä¸šåŠ¡é€»è¾‘å¤æ‚ã€UIå¤šæ ·çš„åº”ç”¨ã€‚</p>
<h3 data-id="heading-3">ç§»åŠ¨ç«¯å¼€å‘éœ€è¦çš„æ€ç»´æ¨¡å¼</h3>
<p>åœ¨èŠæŠ€æœ¯ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆèŠç‚¹æ›´é‡è¦çš„ä¸œè¥¿ï¼š<strong>æ€ç»´æ¨¡å¼</strong>ã€‚ä» Web è½¬ç§»åŠ¨ç«¯ï¼Œæœ€å¤§çš„åä¸æ˜¯å­¦ Dart æˆ– Reactï¼Œè€Œæ˜¯ä½ å¤§è„‘é‡Œæ ¹æ·±è’‚å›ºçš„â€œæµè§ˆå™¨æ€ç»´â€ã€‚</p>
<ul>
<li><strong>ä»â€œæ— çŠ¶æ€â€çš„ç½‘é¡µåˆ°â€œæœ‰çŠ¶æ€â€çš„åº”ç”¨</strong><br/>
Web çš„ä¸–ç•Œï¼Œæœ¬è´¨æ˜¯è¯·æ±‚-å“åº”ã€‚ç”¨æˆ·ç‚¹ä¸€ä¸‹ï¼Œé¡µé¢åˆ·ä¸€ä¸‹ï¼Œå¤§éƒ¨åˆ†æ—¶å€™æˆ‘ä»¬ä¸å…³å¿ƒç”¨æˆ·ä¸Šä¸€æ­¥å¹²äº†å•¥ã€‚è€Œ App æ˜¯ä¸€ä¸ª<strong>æ´»ç‰©</strong>ï¼Œå®ƒæœ‰ç”Ÿå‘½å‘¨æœŸï¼šä»åå°è¢«å”¤é†’ã€è¢«ä¸€ä¸ªç”µè¯æ‰“æ–­ã€è¢«ç³»ç»Ÿå› ä¸ºå†…å­˜ä¸è¶³è€Œæ€æ­»â€¦â€¦ä½ å†™çš„æ¯ä¸€è¡Œä»£ç ï¼Œéƒ½å¾—åƒä¸ªæ“å¿ƒçš„è€å¦ˆå­ï¼Œè€ƒè™‘è¿™ä¸ªâ€œæ´»ç‰©â€åœ¨å„ç§çŠ¶æ€ä¸‹çš„è¡¨ç°ã€‚è¿™æ˜¯ä¸€ç§ä»â€œé¢å‘æ–‡æ¡£â€åˆ°â€œé¢å‘çŠ¶æ€â€çš„æ ¹æœ¬è½¬å˜ã€‚</li>
<li><strong>ä»â€œæ¸©å®¤â€çš„æµè§ˆå™¨åˆ°â€œä¸¥é…·â€çš„ç§»åŠ¨ç¯å¢ƒ</strong><br/>
åœ¨ Web ç«¯ï¼Œæˆ‘ä»¬æ˜¯æ¸©å®¤é‡Œçš„èŠ±æœµï¼ŒèƒŒåæœ‰å¼ºå¤§çš„æœåŠ¡å™¨å’Œç¨³å®šçš„ç½‘ç»œã€‚ä½†åœ¨ç§»åŠ¨ç«¯ï¼Œä½ çš„ App æ˜¯åœ¨ä¸€ä¸ªèµ„æºæå…¶æœ‰é™ã€ç¯å¢ƒæå…¶æ¶åŠ£çš„â€œè’é‡â€æ±‚ç”Ÿã€‚<strong>æ€§èƒ½</strong>ä¸å†æ˜¯é”¦ä¸Šæ·»èŠ±ï¼Œè€Œæ˜¯ç”Ÿæ­»çº¿ã€‚æˆ‘åš AIGC é¡¹ç›®æ—¶ï¼Œä¸€å¼ å›¾çš„ç”Ÿæˆè¿‡ç¨‹ï¼Œå¦‚æœå¯¼è‡´ UI æ‰å¸§ï¼Œç”¨æˆ·ä¼šç«‹åˆ»æ„Ÿè§‰åˆ°å¡é¡¿ï¼›å¦‚æœå†…å­˜æ§åˆ¶ä¸å¥½ï¼Œä½ç«¯æœºç›´æ¥é—ªé€€ã€‚ç”µé‡ã€å†…å­˜ã€ç½‘ç»œæŠ–åŠ¨ã€CPU å ç”¨â€¦â€¦è¿™äº›è¿‡å»æˆ‘ä»¬ä¸å¤ªå…³å¿ƒçš„æŒ‡æ ‡ï¼Œç°åœ¨æˆäº†æ‚¬åœ¨å¤´ä¸Šçš„è¾¾æ‘©å…‹åˆ©æ–¯ä¹‹å‰‘ã€‚</li>
<li><strong>ä»â€œæ–‡æ¡£æµâ€çš„å¸ƒå±€åˆ°â€œçº¦æŸâ€çš„å¸ƒå±€</strong><br/>
Web å¸ƒå±€æ˜¯â€œé¡ºæµè€Œä¸‹â€ï¼Œæˆ‘ä»¬ç”¨ Flexã€Grid æ”¹å˜æ°´æµæ–¹å‘ã€‚è€Œç§»åŠ¨ç«¯å¸ƒå±€æ˜¯â€œæˆ´ç€é•£é“è·³èˆâ€ï¼Œæ¯ä¸ªç»„ä»¶éƒ½è¢«çˆ¶çº§æ­»æ­»åœ°â€œçº¦æŸâ€åœ¨ä¸€ä¸ªçŸ©å½¢å†…ã€‚ä½ å¿…é¡»å­¦ä¼šä»â€œæˆ‘æƒ³æŠŠå®ƒæ”¾å“ªâ€è½¬å˜ä¸ºâ€œæˆ‘è¯¥å¦‚ä½•çº¦æŸå®ƒï¼Œè®©å®ƒåœ¨æˆ‘æƒ³è¦çš„ä½ç½®â€ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œå¿ƒæ€æ‘†æ­£äº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹æŠ€æœ¯ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šè®¾è®¡çš„â€œæ‰€ä»¥ç„¶â€ã€‚</p>
<h2 data-id="heading-4">ç¯‡ç« äºŒï¼šç›´å‡»åº•å±‚ï¼šä¸‰å¤§è·¨å¹³å°æ¡†æ¶çš„æ¶æ„åŸç†å‰–æ</h2>
<h3 data-id="heading-5">Â uni-app: WebView å®¹å™¨çš„é›†å¤§æˆè€…</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šWebView + JSBridge</strong><br/>
<code>uni-app</code>Â åœ¨æ„å»º App æ—¶çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ˜¯å°†ä½ çš„ Vue.js åº”ç”¨è¿è¡Œåœ¨ä¸€ä¸ªåŸç”Ÿçš„â€œå®¹å™¨â€ä¹‹å†…ï¼Œè€Œè¿™ä¸ªå®¹å™¨çš„ä¸»è¦ç»„ä»¶å°±æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„Â <strong>WebView</strong>ã€‚WebView æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåµŒå…¥åœ¨ App å†…éƒ¨çš„ã€è¢«é˜‰å‰²å’Œå¼ºåŒ–çš„æµè§ˆå™¨å†…æ ¸ï¼ˆiOS çš„ WKWebViewï¼ŒAndroid çš„ WebViewï¼‰ã€‚ä½ çš„æ‰€æœ‰é¡µé¢å’Œç»„ä»¶ï¼Œå®é™…ä¸Šéƒ½æ˜¯åœ¨æ¸²æŸ“ä¸€ä¸ªæœ¬åœ°çš„ HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶</strong><br/>
UI çš„æ¸²æŸ“å·¥ä½œå®Œå…¨ç”± WebView çš„æ¸²æŸ“å¼•æ“è´Ÿè´£ã€‚è¿™æ„å‘³ç€ï¼Œä½ å†™çš„Â <code>&lt;view&gt;</code>Â æ ‡ç­¾æœ€ç»ˆä¼šè¢«æ¸²æŸ“æˆÂ <code>&lt;div&gt;</code>ï¼ŒåŠ¨ç”»æ•ˆæœä¾èµ–äº CSS Transitions/Animationsï¼Œå¸ƒå±€éµå¾ªæ ‡å‡†çš„ Web æ–‡æ¡£æµå’Œ Flexbox æ¨¡å‹ã€‚è¿™å¯¹äº Web å¼€å‘è€…æ˜¯é›¶æˆæœ¬ä¸Šæ‰‹ï¼Œä½†åŒæ—¶ä¹Ÿæ„å‘³ç€ï¼Œ<strong>UI çš„æ€§èƒ½ä¸Šé™è¢« WebView æœ¬èº«ç‰¢ç‰¢é”æ­»</strong>ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼šJSBridge</strong><br/>
å½“ä½ çš„ Web é¡µé¢ï¼ˆJS ä»£ç ï¼‰éœ€è¦è°ƒç”¨åŸç”Ÿçš„èƒ½åŠ›æ—¶ï¼Œæ¯”å¦‚æ‰«ç ã€è·å–åœ°ç†ä½ç½®ï¼Œå°±éœ€è¦é€šè¿‡Â <strong>JSBridge</strong>Â è¿™ä¸ªâ€œä¿¡ä½¿â€æ¥å®Œæˆã€‚å…¶å·¥ä½œæµç¨‹é€šå¸¸æ˜¯ï¼š</p>
<ol>
<li><strong>JavaScript è°ƒç”¨</strong>ï¼šä½ åœ¨ JS ä¸­è°ƒç”¨Â <code>uni.scanCode()</code>ã€‚</li>
<li><strong>æ•°æ®åºåˆ—åŒ–</strong>ï¼šJSBridge å°†è¿™ä¸ªè°ƒç”¨å’Œå‚æ•°æ‰“åŒ…æˆä¸€ä¸ªç‰¹å®šæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰ã€‚</li>
<li><strong>æ¶ˆæ¯ä¼ é€’</strong>ï¼šé€šè¿‡ WebView æä¾›ç»™åŸç”Ÿç¯å¢ƒçš„æ¥å£ï¼Œå°†è¿™ä¸ªå­—ç¬¦ä¸²æ¶ˆæ¯å‘é€ç»™åŸç”Ÿä»£ç ã€‚</li>
<li><strong>åŸç”Ÿæ‰§è¡Œ</strong>ï¼šåŸç”Ÿä»£ç æ¥æ”¶å¹¶è§£ææ¶ˆæ¯ï¼Œæ‰§è¡ŒçœŸæ­£çš„æ‰«ç æ“ä½œã€‚</li>
<li><strong>ç»“æœè¿”å›</strong>ï¼šåŸç”Ÿå°†ç»“æœå†æ¬¡åºåˆ—åŒ–ï¼Œé€šè¿‡å›è°ƒæœºåˆ¶ä¼ å›ç»™ WebView ä¸­çš„ JavaScriptã€‚</li>
</ol>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ uni-app é¡µé¢é‡Œ</span>
uni.<span class="hljs-title function_">scanCode</span>({
  <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¡ç å†…å®¹ï¼š'</span> + res.<span class="hljs-property">result</span>);
  }
});
<span class="hljs-comment">// uni.scanCode è¿™ä¸ªJS APIï¼Œåº•å±‚å°±æ˜¯é€šè¿‡ JSBridge</span>
<span class="hljs-comment">// å»è°ƒç”¨äº†åŸç”Ÿå®‰å“æˆ–iOSçš„æ‰«ç åŠŸèƒ½</span>
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹æ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œå¹¶ä¸”æ¶‰åŠå¤šæ¬¡<strong>æ•°æ®åºåˆ—åŒ–/ååºåˆ—åŒ–</strong>å’Œ<strong>çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢</strong>ï¼ˆJavaScript çº¿ç¨‹ â†” åŸç”Ÿ UI çº¿ç¨‹ï¼‰ã€‚å¯¹äºä½é¢‘è°ƒç”¨ï¼Œè¿™æ²¡æœ‰é—®é¢˜ï¼›ä½†å¯¹äºé«˜é¢‘äº¤äº’ï¼ˆå¦‚è‡ªå®šä¹‰æ‰‹åŠ¿ã€å®æ—¶é€šä¿¡ï¼‰ï¼ŒJSBridge å°±ä¼šæˆä¸ºæ˜æ˜¾çš„æ€§èƒ½ç“¶é¢ˆã€‚</p>
<ul>
<li><strong>æ¶æ„æ€»ç»“</strong><br/>
<code>uni-app</code>Â çš„æ¶æ„æ˜¯ä¸€ç§æè‡´çš„å®ç”¨ä¸»ä¹‰ã€‚å®ƒç”¨ Web å¼€å‘è€…æœ€ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼Œä»¥æœ€ä½çš„æˆæœ¬å®ç°äº†è·¨ç«¯ã€‚ä½†å…¶ä»£ä»·æ˜¯æ€§èƒ½å’Œä½“éªŒçš„å¤©èŠ±æ¿è¾ƒä½ï¼Œæ°¸è¿œæ— æ³•æ‘†è„±â€œç½‘é¡µæ„Ÿâ€ï¼Œå› ä¸ºå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªé«˜åº¦ä¼˜åŒ–çš„æœ¬åœ°ç½‘ç«™ã€‚</li>
</ul>
<h3 data-id="heading-6">React Native: è¿ˆå‘â€œæ— æ¡¥æ¥â€æ–°æ—¶ä»£çš„åŸç”Ÿ UI æ˜ å°„</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šJavaScript çº¿ç¨‹ + åŸç”Ÿ UI çº¿ç¨‹</strong><br/>
RN çš„è®¾è®¡å“²å­¦ä¸ WebView å®Œå…¨ä¸åŒã€‚å®ƒå¹¶æ²¡æœ‰æŠŠä½ çš„ä»£ç è·‘åœ¨æµè§ˆå™¨é‡Œï¼Œè€Œæ˜¯å¯åŠ¨äº†ä¸€ä¸ªç‹¬ç«‹çš„Â <strong>JavaScript çº¿ç¨‹</strong>ï¼ˆé€šå¸¸ä½¿ç”¨ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–çš„Â <strong>Hermes</strong>Â å¼•æ“ï¼‰æ¥æ‰§è¡Œä½ çš„ React ä»£ç ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰ã€‚å½“ä½ çš„ç»„ä»¶æ ‘å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒRN ä¼šè®¡ç®—å‡ºæœ€å°åŒ–çš„ UI æ›´æ–°æ“ä½œï¼Œç„¶åé€šè¿‡ä¸€å¥—é€šä¿¡æœºåˆ¶ï¼Œå‘ŠçŸ¥<strong>åŸç”Ÿ UI çº¿ç¨‹</strong>å»åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤å¯¹åº”çš„<strong>åŸç”Ÿ UI ç»„ä»¶</strong>ã€‚</p>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶</strong><br/>
ä½ å†™çš„Â <code>&lt;View&gt;</code>Â ç»„ä»¶ï¼Œæœ€ç»ˆä¼šç”± RN è½¬åŒ–ä¸º iOS ä¸Šçš„Â <code>UIView</code>Â æˆ– Android ä¸Šçš„Â <code>android.view.View</code>ã€‚<strong>æ¸²æŸ“å·¥ä½œæ˜¯100%ç”±åŸç”Ÿç³»ç»Ÿå®Œæˆçš„</strong>ã€‚è¿™ä½¿å¾— RN åº”ç”¨åœ¨å¤–è§‚å’ŒåŸºç¡€äº¤äº’ä¸Šèƒ½å¤Ÿè¾¾åˆ°ä¸åŸç”Ÿåº”ç”¨å‡ ä¹æ— å¼‚çš„æ°´å¹³ã€‚</p>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼ˆåˆ’é‡ç‚¹ï¼šæ¶æ„çš„æ¼”è¿›ï¼‰</strong><br/>
RN çš„é€šä¿¡æœºåˆ¶æ˜¯å…¶æ€§èƒ½æ¼”è¿›çš„å…³é”®ï¼Œç»å†äº†ä¸¤ä¸ªæ—¶ä»£ï¼š</p>
<ul>
<li>
<p><strong>æ—§æ¶æ„ (Bridge)</strong> ï¼šè¿™æ˜¯ RN æ—©æœŸçš„é€šä¿¡æ ¸å¿ƒã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>å¼‚æ­¥çš„ã€å¯æ‰¹å¤„ç†çš„æ¡¥</strong>ã€‚JS çº¿ç¨‹å’ŒåŸç”Ÿçº¿ç¨‹é€šè¿‡è¿™ä¸ªæ¡¥æ¥å›ä¼ é€’åºåˆ—åŒ–åçš„ JSON æ¶ˆæ¯ã€‚è¿™ä¸ªè®¾è®¡çš„ç“¶é¢ˆåœ¨äºï¼š1)Â <strong>å¼‚æ­¥</strong>ï¼šJS æ— æ³•åŒæ­¥è°ƒç”¨åŸç”Ÿæ–¹æ³•å¹¶ç«‹å³è·å¾—ç»“æœã€‚2)Â <strong>åºåˆ—åŒ–å¼€é”€</strong>ï¼šå¯¹äºå¤§é‡æˆ–é¢‘ç¹çš„æ•°æ®äº¤æ¢ï¼ˆå¦‚åˆ—è¡¨æ»šåŠ¨æ—¶çš„äº‹ä»¶æ•°æ®ï¼‰ï¼ŒJSON è½¬æ¢çš„å¼€é”€å¾ˆå¤§ã€‚è¿™å¯¼è‡´äº†åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼ŒUI å“åº”å¯èƒ½ä¼šå»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>æ–°æ¶æ„ (JSI - JavaScript Interface)</strong> ï¼šè¿™æ˜¯ RN çš„é©å‘½æ€§å‡çº§ã€‚JSI å…è®¸ JavaScript ç›´æ¥æŒæœ‰ä¸€ä¸ªå¯¹ C++ å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶é€šè¿‡è¿™ä¸ªå¼•ç”¨<strong>åŒæ­¥è°ƒç”¨</strong>è¯¥å¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ol>
<li><strong>å‘Šåˆ« JSON åºåˆ—åŒ–</strong>ï¼šæ•°æ®å¯ä»¥ç›´æ¥åœ¨å†…å­˜ä¸­å…±äº«ï¼Œæ— éœ€ä½æ•ˆçš„å­—ç¬¦ä¸²è½¬æ¢ã€‚</li>
<li><strong>å®ç°åŒæ­¥è°ƒç”¨</strong>ï¼šJS å¯ä»¥åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·è°ƒç”¨åŸç”ŸåŠŸèƒ½ï¼Œè¿™å¯¹äºéœ€è¦å³æ—¶åé¦ˆçš„å¤æ‚äº¤äº’è‡³å…³é‡è¦ã€‚<br/>
åŸºäº JSIï¼ŒRN æ¨å‡ºäº†æ–°çš„æ¸²æŸ“å™¨Â <strong>Fabric</strong>Â å’Œæ–°çš„åŸç”Ÿæ¨¡å—ç³»ç»ŸÂ <strong>TurboModules</strong>ï¼Œå…±åŒæ„æˆäº†â€œæ— æ¡¥æ¥â€çš„æ–°æ—¶ä»£ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">View</span>, <span class="hljs-title class_">Text</span>, <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä½ å†™çš„è¿™ä¸ª &lt;View&gt; å’Œ &lt;Text&gt;</span>
  <span class="hljs-comment">// æœ€ç»ˆå¹¶ä¸ä¼šå˜æˆ HTML æ ‡ç­¾</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Hello, Native World!<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"Click Me"</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> console.log('Button pressed!')} /&gt;
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
}
<span class="hljs-comment">// React Native ä¼šæŠŠè¿™ä¸ªç»„ä»¶æ ‘ä¿¡æ¯ï¼Œé€šè¿‡ Bridge å‘é€ç»™åŸç”Ÿ</span>
<span class="hljs-comment">// åŸç”Ÿé‚£è¾¹æ”¶åˆ°åï¼Œå°±ä¼šå»åˆ›å»ºçœŸæ­£çš„ Android.View å’Œ Android.TextView</span>

</code></pre>
<ul>
<li>
<p><strong>ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li><strong>Bridge æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šå½“ä½ çš„é¥æ§å™¨æŒ‰å¾—å¤ªå¿«ï¼ˆæ¯”å¦‚é¢‘ç¹çš„åŠ¨ç”»ã€åˆ—è¡¨å¿«é€Ÿæ»šåŠ¨ï¼‰ï¼Œä¿¡å·å¤ªå¤šï¼Œç”µè§†æœºå°±å¯èƒ½ååº”ä¸è¿‡æ¥ï¼Œå¯¼è‡´å¡é¡¿ã€‚è¿™æ˜¯ RN å†å²ä¸Šä¸€ç›´è¢«è¯Ÿç—…çš„é—®é¢˜ï¼Œè™½ç„¶ç°åœ¨æœ‰äº†æ–°çš„æ¶æ„ï¼ˆJSIï¼‰åœ¨æ”¹è¿›ï¼Œä½†è¿™ä¸ªé€šä¿¡æˆæœ¬æ˜¯å®¢è§‚å­˜åœ¨çš„ã€‚</li>
<li><strong>â€œWrite once, debug everywhereâ€</strong> ï¼šå› ä¸º RN åªæ˜¯â€œè°ƒç”¨â€åŸç”Ÿç»„ä»¶ï¼Œè€Œä¸¤ç«¯åŸç”Ÿç»„ä»¶çš„è¡¨ç°æœ‰æ—¶ä¼šæœ‰ç»†å¾®å·®å¼‚ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå‡ºç°ä¸€ä¸ªå¸ƒå±€åœ¨ iOS ä¸Šå¥½å¥½çš„ï¼Œåœ¨ Android ä¸Šå°±æ­ªäº†çš„æƒ…å†µï¼Œéœ€è¦å†™å¹³å°ç‰¹å®šçš„ä»£ç æ¥æŠ¹å¹³å·®å¼‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¶æ„æ€»ç»“</strong><br/>
RN æä¾›çš„æ˜¯çœŸæ­£çš„åŸç”Ÿ UI ä½“éªŒã€‚å®ƒçš„æ¶æ„æ¼”è¿›ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨ä¸æ–­è§£å†³â€œå¦‚ä½•è®©ä¸¤ä¸ªåˆ†ç¦»çš„ä¸–ç•Œï¼ˆJS ä¸ Nativeï¼‰æ›´é«˜æ•ˆã€æ›´åŒæ­¥åœ°å¯¹è¯â€è¿™ä¸€æ ¸å¿ƒé—®é¢˜ã€‚æ–°æ¶æ„æå¤§åœ°æå‡äº†å…¶æ€§èƒ½ä¸Šé™ï¼Œä½¿å…¶åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹éƒ½è¡¨ç°å‡ºè‰²ã€‚</p>
</li>
</ul>
<h3 data-id="heading-7">Flutter: AOT ç¼–è¯‘ä¸è‡ªç»˜å¼•æ“çš„æ€§èƒ½çŒ›å…½</h3>
<ul>
<li>
<p><strong>æ ¸å¿ƒæ¶æ„ï¼šDart AOT ç¼–è¯‘ + C++ æ¸²æŸ“å¼•æ“ (Impeller/Skia)</strong><br/>
Flutter çš„æ¶æ„ç‹¬æ ‘ä¸€å¸œï¼Œå®ƒå®Œå…¨ç‹¬ç«‹äºç³»ç»ŸåŸç”Ÿ UI ç»„ä»¶ã€‚å…¶æœ¬è´¨ä¸Šæ›´åƒä¸€ä¸ªæ¸¸æˆå¼•æ“ï¼Œåªä¸è¿‡å®ƒæ¸²æŸ“çš„æ˜¯ UI å…ƒç´ è€Œéæ¸¸æˆè§’è‰²ã€‚</p>
<ul>
<li><strong>ä»£ç æ‰§è¡Œ</strong>ï¼šä½ çš„ Dart ä»£ç åœ¨å‘å¸ƒæ¨¡å¼ä¸‹ï¼Œä¼šè¢«Â <strong>AOT (Ahead-of-Time) ç¼–è¯‘</strong>æˆå¹³å°ç›¸å…³çš„åŸç”Ÿ ARM æœºå™¨ç ã€‚è¿™æ„å‘³ç€è¿è¡Œæ—¶æ²¡æœ‰ä¸­é—´å±‚ï¼ˆå¦‚ JS è™šæ‹Ÿæœºï¼‰çš„è§£é‡Šå¼€é”€ï¼Œä»£ç æ‰§è¡Œæ•ˆç‡æé«˜ï¼Œæ€§èƒ½ç¨³å®šå¯é¢„æµ‹ã€‚</li>
<li><strong>UI æ¸²æŸ“</strong>ï¼šFlutter æ¥ç®¡äº†æ•´ä¸ªå±å¹•çš„æ¸²æŸ“ã€‚å®ƒè¦æ±‚æ“ä½œç³»ç»Ÿæä¾›ä¸€å—ç©ºç™½çš„ç”»å¸ƒï¼ˆ<code>Surface</code>ï¼‰ï¼Œç„¶åè°ƒç”¨å…¶è‡ªå¸¦çš„ C++ æ¸²æŸ“å¼•æ“ï¼Œä¸€ä¸ªåƒç´ ä¸€ä¸ªåƒç´ åœ°å°†æ•´ä¸ªç•Œé¢ç»˜åˆ¶å‡ºæ¥ã€‚</li>
</ul>
</li>
<li>
<p><strong>UI æ¸²æŸ“æœºåˆ¶ï¼ˆåˆ’é‡ç‚¹ï¼šå¼•æ“çš„è¿›åŒ–ï¼‰</strong><br/>
Flutter çš„æ¸²æŸ“å¼•æ“æ˜¯å…¶æ€§èƒ½çš„åŸºçŸ³ï¼Œä¹Ÿç»å†äº†ä¸€æ¬¡é‡å¤§æ¼”è¿›ï¼š</p>
<ul>
<li><strong>Skia å¼•æ“</strong>ï¼šè¿™æ˜¯ Google å¼€æºçš„ 2D å›¾å½¢åº“ï¼Œä¹Ÿæ˜¯ Chrome å’Œ Android çš„åº•å±‚å›¾å½¢å¼•æ“ã€‚Skia æ€§èƒ½å¼ºå¤§ï¼Œä½†å­˜åœ¨ä¸€ä¸ªè¢«ç§°ä¸ºâ€œ<strong>ç€è‰²å™¨ç¼–è¯‘å¡é¡¿ (Shader Compilation Jank)</strong> â€çš„é—®é¢˜ã€‚å³å½“ä¸€ä¸ªå¤æ‚çš„åŠ¨ç”»æˆ–æ•ˆæœé¦–æ¬¡å‡ºç°æ—¶ï¼ŒSkia éœ€è¦åœ¨è¿è¡Œæ—¶åŠ¨æ€ç¼–è¯‘å…¶æ‰€éœ€çš„ç€è‰²å™¨ï¼ˆShaderï¼‰ï¼Œè¿™ä¸ªç¼–è¯‘è¿‡ç¨‹å¯èƒ½å¯¼è‡´é›¶ç‚¹å‡ ç§’çš„æ‰å¸§ï¼Œå½±å“é¦–æ¬¡ä½“éªŒçš„æµç•…åº¦ã€‚</li>
<li><strong>Impeller å¼•æ“</strong>ï¼šä¸ºäº†æ ¹æ²»æ­¤é—®é¢˜ï¼ŒFlutter å¼€å‘äº†æ–°çš„æ¸²æŸ“å¼•æ“ Impellerï¼ˆç›®å‰åœ¨ iOS ä¸Šå·²é»˜è®¤å¯ç”¨ï¼‰ã€‚Impeller çš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼Œå®ƒä¼šåœ¨ App æ„å»ºæ—¶<strong>é¢„ç¼–è¯‘æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„ç€è‰²å™¨</strong>ã€‚è¿™æ ·ï¼Œåœ¨è¿è¡Œæ—¶å°±ä¸å†æœ‰ç¼–è¯‘å¼€é”€ï¼Œä»æ ¹æœ¬ä¸Šæ¶ˆé™¤äº†â€œé¦–æ¬¡å¡é¡¿â€ç°è±¡ï¼Œä½¿å¾—åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœå¦‚é»„æ²¹èˆ¬ä¸æ»‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>é€»è¾‘ä¸åŸç”Ÿé€šä¿¡ï¼šPlatform Channels</strong><br/>
å½“ Flutter éœ€è¦ä¸å¹³å°åŸç”ŸæœåŠ¡ï¼ˆå¦‚è“ç‰™ã€ç”µé‡ã€ç›¸æœºï¼‰äº¤äº’æ—¶ï¼Œå®ƒä½¿ç”¨ä¸€ç§åä¸ºÂ <strong>Platform Channels</strong>Â çš„æœºåˆ¶ã€‚è¿™æ˜¯ä¸€ç§ç±»ä¼¼äº JSBridge çš„å¼‚æ­¥æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼ŒåŒæ ·æ¶‰åŠæ•°æ®åºåˆ—åŒ–ã€‚ä½†å…³é”®åŒºåˆ«åœ¨äºï¼š<strong>Flutter ä»…åœ¨éœ€è¦è°ƒç”¨åŸç”ŸæœåŠ¡æ—¶æ‰ä½¿ç”¨å®ƒï¼Œè€Œ UI æ¸²æŸ“å®Œå…¨ä¸ä¾èµ–å®ƒ</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒRN çš„æ—§æ¶æ„ä¸­ï¼Œæ¯ä¸€æ¬¡ UI æ›´æ–°éƒ½éœ€è¦è·¨æ¡¥é€šä¿¡ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Dart ä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyWidget</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// è¿™ä¸ª Container, Center, Text éƒ½æ˜¯ Flutter è‡ªå·±ç”»çš„</span>
    <span class="hljs-comment">// å’ŒåŸç”Ÿç³»ç»Ÿçš„ UI ç»„ä»¶åº“æ²¡æœ‰ä»»ä½•å…³ç³»</span>
    <span class="hljs-keyword">return</span> Container(
      color: Colors.blue,
      child: Center(
        child: Text(
          <span class="hljs-string">'Hello, I drew this myself!'</span>,
          style: TextStyle(color: Colors.white),
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li><strong>æ€»ç»“</strong><br/>
Flutter çš„æ¶æ„é€‰æ‹©äº†ä¸€æ¡â€œå¤§åŒ…å¤§æ½â€çš„é“è·¯ã€‚é€šè¿‡ AOT ç¼–è¯‘å’Œè‡ªç»˜å¼•æ“ï¼Œå®ƒåœ¨è·¨å¹³å° UI æ¸²æŸ“çš„<strong>æ€§èƒ½</strong>å’Œ<strong>ä¸€è‡´æ€§</strong>ä¸Šè¾¾åˆ°äº†å·…å³°ã€‚è¿™ç§æ¶æ„ç¡®ä¿äº†å¤æ‚çš„ UI ä¹Ÿèƒ½ç¨³å®šè¿è¡Œåœ¨ 60/120fpsï¼Œä»£ä»·æ˜¯æ›´å¤§çš„åˆå§‹åŒ…ä½“å’Œä¸åŸç”Ÿ UI ç”Ÿæ€çš„éš”ç¦»ã€‚</li>
</ul>
<h2 data-id="heading-8">ç¯‡ç« ä¸‰ï¼šå·…å³°å¯¹å†³ï¼šåˆ°åº•è°æ‰æ˜¯â€œæµç•…åº¦ä¹‹ç‹â€ï¼Ÿ</h2>
<p>èŠäº†è¿™ä¹ˆå¤šåº•å±‚ï¼Œæœ€ç»ˆéƒ½è¦åæ˜ åœ¨ç”¨æˆ·æŒ‡å°–çš„æ„Ÿå—ä¸Šã€‚æˆ‘ä»¬æ¥ä¸€åœºä¸å®¢è§‚ã€ä½†å¾ˆçœŸå®çš„â€œ60/120 FPS æ»šåŠ¨ä¸åŠ¨ç”»â€æµç•…åº¦å¯¹å†³ã€‚</p>
<ul>
<li>
<p>ğŸ¥‡Â <strong>å¹¶åˆ—ç‹è€…ï¼šåŸç”Ÿ iOS / Flutter (Impeller å¼•æ“)</strong></p>
<ul>
<li><strong>åŸç”Ÿ iOS</strong>ï¼šäº²å„¿å­ï¼Œä¸å¤šè§£é‡Šã€‚æœ€å°çš„ç³»ç»Ÿå¼€é”€ï¼Œæœ€ç›´æ¥çš„ç¡¬ä»¶è®¿é—®ã€‚</li>
<li><strong>Flutter (Impeller)</strong> ï¼šå‡­å€Ÿ Impeller å¼•æ“çš„â€œæå‰å¤‡æˆ˜â€ç­–ç•¥å’Œ Dart AOT ç¼–è¯‘æˆåŸç”Ÿæœºå™¨ç çš„â€œè‚Œè‚‰è®°å¿†â€ï¼ŒFlutter åœ¨ UI æ¸²æŸ“ä¸Šå‡ ä¹æŠ¹å¹³äº†ä¸åŸç”Ÿçš„å·®è·ã€‚å®ƒå°±åƒä¸€ä¸ªé¡¶çº§çš„æ¸¸æˆå¼•æ“ï¼Œç›®æ ‡å°±æ˜¯ç¨³å®šåœ°â€œåˆ·å¸§â€ï¼Œåœ¨ UI å¯†é›†å‹åº”ç”¨ä¸­ï¼Œå®ƒçš„è¡¨ç°ä»¤äººæƒŠå¹ã€‚</li>
</ul>
</li>
<li>
<p>ğŸ¥ˆÂ <strong>ç™½é“¶éª‘å£«ï¼šåŸç”Ÿ Android</strong></p>
<ul>
<li>æ€§èƒ½åŒæ ·é¡¶çº§ã€‚ä½†ç”±äºå®‰å“æœºå‹ç¢ç‰‡åŒ–å’Œ JVM å¶å°”çš„ GC (åƒåœ¾å›æ”¶) åœé¡¿ï¼Œåœ¨æŸäº›ä½ç«¯è®¾å¤‡æˆ–æç«¯æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°äººçœ¼å¯æ„ŸçŸ¥çš„å¾®å°å¡é¡¿ã€‚ä½†è¿™ä¾ç„¶æ˜¯æ ‡æ†çº§çš„å­˜åœ¨ã€‚</li>
</ul>
</li>
<li>
<p>ğŸ¥‰Â <strong>é’é“œè´µæ—ï¼šReact Native (æ–°æ¶æ„)</strong></p>
<ul>
<li>åˆ«è¯¯ä¼šï¼Œâ€œé’é“œâ€åªæ˜¯ç›¸å¯¹äºå‰é¢å‡ ä¸ªâ€œæ€ªç‰©â€è€Œè¨€ã€‚åœ¨æ–°æ¶æ„çš„åŠ æŒä¸‹ï¼ŒRN åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹å·²ç»éå¸¸æµç•…ã€‚ä½†å®ƒçš„â€œåŸç½ªâ€åœ¨äºï¼Œ<strong>JS çº¿ç¨‹ä¾ç„¶æ˜¯ä¸šåŠ¡é€»è¾‘çš„ä¸­å¿ƒ</strong>ã€‚å½“ä½ çš„ JS çº¿ç¨‹å¿™äºå¤„ç†å¤æ‚è®¡ç®—æˆ–æµ·é‡æ•°æ®æ—¶ï¼Œå®ƒä¼ é€’ç»™ UI çº¿ç¨‹çš„â€œå¿ƒçµæ„Ÿåº”â€å°±å¯èƒ½å»¶è¿Ÿï¼Œå¯¼è‡´åŠ¨ç”»æ‰å¸§ã€‚è™½ç„¶æœ‰ â€œWorkletsâ€ ç­‰æŠ€æœ¯åœ¨åŠªåŠ›ç»•å¼€è¿™ä¸ªé—®é¢˜ï¼Œä½†è¿™ä¸ªæ¶æ„æ€§ç‰¹ç‚¹å†³å®šäº†å®ƒçš„ç†è®ºä¸Šé™ç•¥ä½äº Flutterã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-9">æœ€ç»ˆç« ï¼šWebå‰ç«¯ï¼Œä½ çš„è·¯åœ¨ä½•æ–¹ï¼Ÿ</h2>
<p>å¥½äº†ï¼Œæ•…äº‹è®²å®Œäº†ï¼Œæˆ‘ä»¬å›åˆ°ç°å®ã€‚</p>
<ul>
<li><strong>å¦‚æœä½ æƒ³â€œé™ç»´æ‰“å‡»â€å°ç¨‹åºï¼Œæˆ–å¿«é€Ÿå°† Web åº”ç”¨ App åŒ–</strong>ï¼š<br/>
<code>uni-app</code>Â æ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚ç”¨ä½ æœ€ç†Ÿæ‚‰çš„ Vueï¼Œå¿«é€Ÿå‡ºæ´»ï¼Œæˆæœ¬æœ€ä½ã€‚æ¥å—å®ƒçš„å¤©èŠ±æ¿ï¼Œç”¨å®ƒæ¥è§£å†³ 80% çš„å¸¸è§„éœ€æ±‚ã€‚</li>
<li><strong>å¦‚æœä½ æ˜¯ React æ­»å¿ ï¼Œå›¢é˜ŸæŠ€æœ¯æ ˆç»Ÿä¸€</strong>ï¼š<br/>
æ‹¥æŠ±Â <code>React Native</code>Â çš„æ–°æ¶æ„ã€‚å®ƒèƒ½è®©ä½ åœ¨ç§»åŠ¨ç«¯çš„ä¸–ç•Œé‡Œæœ€å¤§åŒ–åœ°å¤ç”¨ä½ çš„ React çŸ¥è¯†ã€‚ç”Ÿæ€åºå¤§ï¼Œç¤¾åŒºæ´»è·ƒï¼Œæ‰¾è§£å†³æ–¹æ¡ˆä¹Ÿæ›´å®¹æ˜“ã€‚</li>
<li><strong>å¦‚æœä½ è¿½æ±‚æè‡´çš„è·¨å¹³å°ä½“éªŒï¼Œä¸ç•æƒ§å­¦ä¹ ï¼Œæƒ³æˆä¸ºâ€œå…¨èƒ½è‰ºæœ¯å®¶â€</strong> ï¼š<br/>
<strong>æˆ‘ä¸ªäººï¼Œæ¯«æ— ä¿ç•™åœ°æ¨èä½ ï¼Œå’Œæˆ‘ä¸€æ ·ï¼Œè·³è¿›Â <code>Flutter</code>Â çš„â€œå‘â€é‡Œ</strong>ã€‚å®ƒå¯èƒ½éœ€è¦ä½ ä»˜å‡ºä¸€ä¸ªå‘¨æœ«å»å­¦ä¹  Dartï¼Œä½†å®ƒå›é¦ˆç»™ä½ çš„æ˜¯ä¸€ä¸ªæ€§èƒ½é€¼è¿‘åŸç”Ÿã€UI è¡¨ç°åŠ›ç™»å³°é€ æã€æœªæ¥å……æ»¡æƒ³è±¡åŠ›çš„å…¨æ–°ä¸–ç•Œã€‚ä»è¢« WebView æ€§èƒ½æŸç¼šï¼Œåˆ°ç”¨ Flutter éšå¿ƒæ‰€æ¬²åœ°ç»˜åˆ¶ UIï¼Œè¿™ç§ä»â€œå·¥åŒ â€åˆ°â€œè‰ºæœ¯å®¶â€çš„èœ•å˜ï¼Œå¸¦æ¥çš„æˆå°±æ„Ÿæ˜¯æ— ä¸ä¼¦æ¯”çš„ã€‚</li>
</ul>
<p><strong>æŠ€æœ¯çš„æ¼”è¿›ï¼Œæ°¸æ— æ­¢å¢ƒã€‚</strong> Â RN åœ¨åŠªåŠ›å¡«å¹³â€œæ¡¥â€çš„é¸¿æ²Ÿï¼ŒFlutter åœ¨ä¸æ–­æ‰“ç£¨è‡ªå·±çš„â€œç”»ç¬”â€ã€‚æ²¡æœ‰æœ€å¥½çš„æŠ€æœ¯ï¼Œåªæœ‰æœ€é€‚åˆä½ å’Œä½ çš„ä¸šåŠ¡åœºæ™¯çš„æŠ€æœ¯ã€‚</p>
<p>ä»ä¸€ä¸ª Web å‰ç«¯å‡ºå‘ï¼Œè¿™æ¡è·¯æˆ–è®¸é™¡å³­ï¼Œä½†æ²¿é€”çš„é£æ™¯ï¼Œç»å¯¹å€¼å¾—ä½ ä¸ºä¹‹æ”€ç™»ã€‚ä½ æ”¶è·çš„å°†ä¸ä»…ä»…æ˜¯å†™å‡º App çš„èƒ½åŠ›ï¼Œæ›´æ˜¯å¯¹å›¾å½¢å­¦ã€æ“ä½œç³»ç»Ÿã€ç¼–è¯‘åŸç†æ›´æ·±å±‚æ¬¡çš„æ´å¯Ÿã€‚</p>
<p>è€Œè¿™äº›ï¼Œå°†è®©ä½ æ— è®ºå°†æ¥å›åˆ° Webï¼Œè¿˜æ˜¯ç»§ç»­åœ¨ç§»åŠ¨ç«¯æ·±è€•ï¼Œéƒ½ç«™å¾—æ›´é«˜ï¼Œçœ‹å¾—æ›´è¿œã€‚</p>
<h2 data-id="heading-10">å¾€æœŸæ–‡ç« å›é¡¾</h2>
<h4 data-id="heading-11">Flutter å›¾ç‰‡ç¼–è¾‘å™¨</h4>
<ul>
<li><a href="https://juejin.cn/post/7571067260053585946" target="_blank" title="https://juejin.cn/post/7571067260053585946">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_monitor_sdk" target="_blank" title="https://pub.dev/packages/flutter_monitor_sdk" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_monitor_sdk" target="_blank" title="https://github.com/xinqingaa/flutter_monitor_sdk" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-12">Flutter å…¨é“¾è·¯ç›‘æ§ SDK</h4>
<ul>
<li><a href="https://juejin.cn/post/7564977973260173338" target="_blank" title="https://juejin.cn/post/7564977973260173338">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fflutter_img_editor" target="_blank" title="https://pub.dev/packages/flutter_img_editor" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fflutter_img_editor" target="_blank" title="https://github.com/xinqingaa/flutter_img_editor" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-13">Flutter å…¨åœºæ™¯å¼¹æ¡†</h4>
<ul>
<li><a href="https://juejin.cn/post/7538324216594726950" target="_blank" title="https://juejin.cn/post/7538324216594726950">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Funified_popups" target="_blank" title="https://pub.dev/packages/unified_popups" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Funified_popups" target="_blank" title="https://github.com/xinqingaa/unified_popups" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-14">Flutteræ—¥å†ç»„ä»¶</h4>
<ul>
<li><a href="https://juejin.cn/post/7531976064496123931" target="_blank" title="https://juejin.cn/post/7531976064496123931">æ˜é‡‘æ–‡ç« </a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_calendar_view" target="_blank" title="https://pub.dev/packages/omni_calendar_view" ref="nofollow noopener noreferrer">pubdev</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_calendar_view" target="_blank" title="https://github.com/xinqingaa/omni_calendar_view" ref="nofollow noopener noreferrer">github</a></li>
</ul>
<h4 data-id="heading-15">æ—¥æœŸé€‰æ‹©å™¨</h4>
<ul>
<li>
<p><a href="https://juejin.cn/post/7524159959480991753" target="_blank" title="https://juejin.cn/post/7524159959480991753">æ˜é‡‘æ–‡ç« </a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fomni_date_picker" target="_blank" title="https://pub.dev/packages/omni_date_picker" ref="nofollow noopener noreferrer">pubdev</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxinqingaa%2Fomni_date_picker" target="_blank" title="https://github.com/xinqingaa/omni_date_picker" ref="nofollow noopener noreferrer">github</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»]]></title>    <link>https://juejin.cn/post/7576130918078251043</link>    <guid>https://juejin.cn/post/7576130918078251043</guid>    <pubDate>2025-11-25T00:56:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576130918078251043" data-draft-id="7573892650816077839" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»"/> <meta itemprop="keywords" content="Android,Kotlin"/> <meta itemprop="datePublished" content="2025-11-25T00:56:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº”åˆ†é’Ÿå®æˆ˜ Compose å±•å¼€/æ”¶èµ·åŠ¨ç”»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T00:56:34.000Z" title="Tue Nov 25 2025 00:56:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64b2a54f63f94ca7a3529032a1b7e8f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=bL%2BUaRKB%2BMIDFnmKPgGF8nenGDc%3D" alt="0.png" loading="lazy"/></p>
<p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨ Jetpack Compose æ„å»ºä¸€ä¸ªå±å¹•ç•Œé¢ï¼Œå¹¶ä¸”å¸Œæœ›å®ç°æŸäº›å†…å®¹çš„å±•å¼€æˆ–æ”¶èµ·æ•ˆæœ â€”â€” æ¯”å¦‚å¸¸è§é—®é¢˜è§£ç­”éƒ¨åˆ†ã€ä¸‹æ‹‰é¢æ¿æˆ–ç­›é€‰èœå•ã€‚</p>
<p>ä½ å¯èƒ½ä¼šæƒ³ï¼š</p>
<p>æˆ‘è¦å¦‚ä½•å®ç°å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœå‘¢ï¼Ÿ</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼šJetpack Compose è®©è¿™ä¸ªéœ€æ±‚å˜å¾—ç›¸å½“å®¹æ˜“å®ç°ã€‚</p>
<p>è¯¥ç¯‡æ–‡ç« ï¼Œè®©æˆ‘ä¸ºå¤§å®¶è¯¦ç»†ä»‹ç»å¤„ç†å±•å¼€/æ”¶èµ·åŠ¨ç”»çš„æ‰€æœ‰å®ç”¨æ–¹æ³• â€”â€” æ¯ç§æ–¹æ³•éƒ½é€‚ç”¨äºä¸åŒçš„ç”¨ä¾‹ã€‚</p>
<h2 data-id="heading-0">é«˜åº¦çš„å¹³æ»‘å¢é•¿</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæ–¹å—ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å®ƒæ—¶ï¼Œä¸‹æ–¹ä¼šæ˜¾ç¤ºä¸€äº›å†…å®¹ï¼Œè€Œä½ å¸Œæœ›æ•´ä¸ªè¿‡ç¨‹èƒ½å¤Ÿè‡ªç„¶å±•å¼€ï¼Œä¸å‡ºç°è·³åŠ¨ã€‚</p>
<p>å¯¹äºè¿™ç§æƒ…å†µï¼ŒJetpack Compose æœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„ä¿®é¥°ç¬¦ï¼š<code>animateContentSize()</code>ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ExpandableBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    Column(modifier = Modifier
        .clickable { expanded = !expanded }
        .background(Color.DarkGray)
        .padding(<span class="hljs-number">16.</span>dp)
        .animateContentSize() <span class="hljs-comment">// é«˜åº¦å˜åŒ–äº§ç”ŸåŠ¨ç”»</span>
    ) {
        Text(<span class="hljs-string">"Q: What is Compose?"</span>, color = Color.White)
        <span class="hljs-keyword">if</span> (expanded) {
            Text(
                <span class="hljs-string">"A: It's a modern UI toolkit for Android that replaces XML."</span>, color = Color.LightGray, modifier = Modifier.padding(top = <span class="hljs-number">8.</span>dp)
            )
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e8abbf6e52f48849732afa0b3e768d3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=jXMRnachA4o%2BMvAIOEMsoRKgLHk%3D" alt="11.gif" loading="lazy"/></p>
<p>åªéœ€è¦è¿™ä¸€ä¸ªä¿®é¥°ç¬¦â€”â€”å°±è¿™æ ·ï¼Œæ¯å½“é«˜åº¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±èƒ½å®ç°å¹³æ»‘è¿‡æ¸¡ã€‚</p>
<p>å½“ç„¶ï¼Œå®ƒçš„å·¥ä½œåŸç†å®é™…ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p>
<p>å½“ä½ å°† <code>animateContentSize</code> åº”ç”¨åˆ°ä¸€ä¸ª <code>Composable</code> ä¸Šæ—¶ï¼ŒCompose ä¼šç›‘å¬è¯¥ç»„ä»¶å†…å®¹å®½é«˜çš„å˜åŒ–ã€‚å¦‚æœå†…å®¹å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå› ä¸ºå†…éƒ¨æ–‡æœ¬å˜é•¿ã€å­å…ƒç´ å¢åˆ ç­‰ï¼‰ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨æ—§å°ºå¯¸å’Œæ–°å°ºå¯¸ä¹‹é—´æ‰§è¡Œä¸€ä¸ªå¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»ã€‚</p>
<h2 data-id="heading-1">æ·¡å…¥æ·¡å‡ºä¸æ»‘åŠ¨</h2>
<p>å¦‚æœä½ ä¸åªæ˜¯æƒ³å¢åŠ é«˜åº¦ï¼Œè¿˜å¸Œæœ›å†…å®¹åœ¨å¯è§æ—¶æ·¡å…¥ã€æ»‘å…¥æˆ–æ”¾å¤§ã€‚</p>
<p>è¿™å°±æ¥åˆ°äº† <code>AnimatedVisibility()</code> çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªç”¨äºæ˜¾ç¤º/éšè—é¢æ¿çš„åˆ‡æ¢æŒ‰é’®ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•å·§å¦™åœ°å®ç°åŠ¨ç”»æ•ˆæœï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ToggleInfoPanel</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> show <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">true</span>) }
    
    Column(modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)) {
        Button(onClick = { show = !show }) {
            Text(<span class="hljs-keyword">if</span> (show) <span class="hljs-string">"Hide Info"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"Show Info"</span>)
        }
        AnimatedVisibility(
            visible = show, enter = fadeIn() + slideInVertically(), exit = fadeOut() + slideOutVertically()
        ) {
            Box(
                Modifier
                    .fillMaxWidth()
                    .background(Color.Magenta)
                    .padding(<span class="hljs-number">16.</span>dp)
            ) {
                Text(<span class="hljs-string">"This is a toggleable info section"</span>, color = Color.White)
            }
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47b901f4c52f41f4ae75b4bac16b8928~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=Z4uYBkiHbGu2XDjbcrGRJM%2Bf%2FFU%3D" alt="2.gif" loading="lazy"/></p>
<p>åœ¨è¿™é‡Œï¼Œä½ æ§åˆ¶çš„æ˜¯å®ƒå¦‚ä½•å‡ºç°æˆ–æ¶ˆå¤±ï¼Œè€Œä¸ä»…ä»…æ˜¯å®ƒæ˜¯å¦æ˜¾ç¤ºã€‚</p>
<p><code>AnimatedVisibility()</code> åŒ…è£¹å¦ä¸€ä¸ª <code>Composable</code>ï¼Œå¹¶æ ¹æ®å…¶ <code>visible</code> çš„å€¼ï¼ˆ<code>true</code>/<code>false</code>ï¼‰æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºå†…éƒ¨å†…å®¹ã€‚å½“ <code>visible</code> çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰§è¡ŒæŒ‡å®šçš„è¿›å…¥åŠ¨ç”»æˆ–é€€å‡ºåŠ¨ç”»ã€‚</p>
<h2 data-id="heading-2">å‚ç›´å±•å¼€/æ”¶èµ·çš„æ»‘åŠ¨é¢æ¿</h2>
<p>å‡è®¾ä½ æ­£åœ¨æ„å»ºä¸€ä¸ªç­›é€‰ä¸‹æ‹‰èœå•æˆ–æ‰‹é£ç´å¼éƒ¨åˆ†ï¼Œå¹¶ä¸”å¸Œæœ›å®ƒåœ¨å±•å¼€æ—¶ä»é¡¶éƒ¨å‘ä¸‹æ»‘åŠ¨æ‰“å¼€ï¼Œåœ¨æ”¶èµ·æ—¶å‘ä¸Šæ”¶ç¼©å›å»ã€‚</p>
<p>ä½ å¯ä»¥åœ¨Â <code>AnimatedVisibility()</code>Â ä¸­ä½¿ç”¨Â <code>expandVertically()</code>Â å’ŒÂ <code>shrinkVertically()</code>ï¼š</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">FilterDropdown</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    Column(modifier = Modifier.padding(<span class="hljs-number">16.</span>dp)) {

        Text(<span class="hljs-string">"Filters"</span>, modifier = Modifier
            .clickable { expanded = !expanded }
            .background(Color.Gray)
            .padding(<span class="hljs-number">12.</span>dp), color = Color.White)

        AnimatedVisibility(
            visible = expanded, enter = expandVertically(), exit = shrinkVertically()
        ) {
            Column(
                Modifier
                    .fillMaxWidth()
                    .background(Color.LightGray)
                    .padding(<span class="hljs-number">16.</span>dp)
            ) {
                Text(<span class="hljs-string">"Sort by Price"</span>)
                Text(<span class="hljs-string">"Sort by Rating"</span>)
                Text(<span class="hljs-string">"Sort by Availability"</span>)
            }
        }
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa5d12b179b749daad88cd609a0b53dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=GYby4y4yqCPFI7NVixaAHXdmlNA%3D" alt="3.gif" loading="lazy"/></p>
<p>æµç•…çš„å‚ç›´æ»‘åŠ¨æ•ˆæœï¼Œéå¸¸é€‚åˆå¯å±•å¼€çš„é¢æ¿ã€‚</p>
<h2 data-id="heading-3">å¤šä¸ªå…ƒç´ çš„åŠ¨ç”»</h2>
<p>å¦‚æœä½ æƒ³è®©é«˜åº¦ã€èƒŒæ™¯é¢œè‰²å’Œé€æ˜åº¦åœ¨å±•å¼€æ—¶åŒæ­¥è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>è½®åˆ° <code>updateTransition()</code> å¤§æ˜¾èº«æ‰‹äº†ã€‚å®ƒçš„ä½¿ç”¨ç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†èƒ½è®©ä½ å®Œå…¨æŒæ§åŠ¨ç”»æ•ˆæœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">FancyExpandBox</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    <span class="hljs-keyword">val</span> transition = updateTransition(targetState = expanded, label = <span class="hljs-string">"transition"</span>)
    <span class="hljs-keyword">val</span> txtSize <span class="hljs-keyword">by</span> transition.animateInt(label = <span class="hljs-string">"text"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">24</span> <span class="hljs-keyword">else</span> <span class="hljs-number">14</span>
    }
    <span class="hljs-keyword">val</span> height <span class="hljs-keyword">by</span> transition.animateDp(label = <span class="hljs-string">"height"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">200.</span>dp <span class="hljs-keyword">else</span> <span class="hljs-number">60.</span>dp
    }
    <span class="hljs-keyword">val</span> bgColor <span class="hljs-keyword">by</span> transition.animateColor(label = <span class="hljs-string">"color"</span>) {
        <span class="hljs-keyword">if</span> (it) Color.Blue <span class="hljs-keyword">else</span> Color.Gray
    }
    <span class="hljs-keyword">val</span> alpha <span class="hljs-keyword">by</span> transition.animateFloat(label = <span class="hljs-string">"alpha"</span>) {
        <span class="hljs-keyword">if</span> (it) <span class="hljs-number">1f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.5f</span>
    }
    Box(
        modifier = Modifier
            .clickable { expanded = !expanded }
            .fillMaxWidth()
            .height(height)
            .background(bgColor.copy(alpha = alpha))
            .padding(<span class="hljs-number">16.</span>dp)
    ) {
        Text(<span class="hljs-string">"Tap to expand or collapse"</span>, color = Color.White, fontSize = txtSize.sp)
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47ab002bcdb04b9aa4d72fc3b6a09ff3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=0jUVQU9C1p9GBfW5FLF%2Fuc9V0yw%3D" alt="4.gif" loading="lazy"/></p>
<p><em>è¯¥æ–¹æ³•éœ€è¦æ·»åŠ  <code>androidx.compose.animation:animation-core</code> ä¾èµ–ã€‚</em></p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡Œå¯¹ä»»ä½•å±æ€§è¿›è¡ŒåŠ¨ç”»å¤„ç† â€”â€” è¾¹è·ã€å½¢çŠ¶ã€æ–‡å­—å¤§å° â€”â€” å®ƒä»¬éƒ½ä¼šä¸€èµ·è¿‡æ¸¡å˜åŒ–ã€‚</p>
<p><code>updateTransition</code> æ˜¯ä¸€ä¸ªçŠ¶æ€é©±åŠ¨çš„åŠ¨ç”»åè°ƒå™¨ã€‚å®ƒé€šè¿‡è§‚å¯Ÿä¸€ä¸ªå…³é”®çŠ¶æ€çš„å˜åŒ–ï¼Œè‡ªåŠ¨ç®¡ç†ä¸€ç»„ç›¸å…³è§†è§‰å±æ€§çš„åŠ¨ç”»ï¼Œå°†å®ƒä»¬ä»æ—§çŠ¶æ€çš„ç›®æ ‡å€¼æµç•…åœ°è¿‡æ¸¡åˆ°æ–°çŠ¶æ€çš„ç›®æ ‡å€¼ï¼Œéå¸¸é€‚åˆå¤„ç†å¤æ‚çš„ã€å¤šæ­¥éª¤çš„ UI çŠ¶æ€åˆ‡æ¢åŠ¨ç”»ã€‚</p>
<h2 data-id="heading-4">ä¸ºå¸ƒå±€æƒé‡åšåŠ¨ç”»</h2>
<p>å¦‚æœä½ æœ‰ä¸¤ä¸ªé¢æ¿å¹¶æ’æ”¾ç½®æˆ–å‚ç›´å †å ï¼Œå¹¶ä¸”å¸Œæœ›ä¸€ä¸ªé¢æ¿å˜å¤§è€Œå¦ä¸€ä¸ªé¢æ¿å˜å° â€”â€” é‚£å°±å¯¹æƒé‡è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">WeightAnimationDemo</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">var</span> expanded <span class="hljs-keyword">by</span> remember { mutableStateOf(<span class="hljs-literal">false</span>) }
    <span class="hljs-keyword">val</span> weight <span class="hljs-keyword">by</span> animateFloatAsState(targetValue = <span class="hljs-keyword">if</span> (expanded) <span class="hljs-number">0.8f</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0.3f</span>)
    Column(modifier = Modifier.height(<span class="hljs-number">200.</span>dp)) {
        Box(
            modifier = Modifier
                .weight(weight)
                .fillMaxWidth()
                .background(Color.Blue)
                .clickable { expanded = !expanded })
        Box(
            modifier = Modifier
                .weight(<span class="hljs-number">1f</span> - weight)
                .fillMaxWidth()
                .background(Color.DarkGray)
        )
    }
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de6907433c345b494afb5efa2a24d16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764636993&amp;x-signature=VKU%2BRViYZTo%2FR2c3ssKTFGFc114%3D" alt="5.gif" loading="lazy"/></p>
<p>ç‚¹å‡»é¡¶éƒ¨æ¡†ä¼šå¹³æ»‘åœ°è°ƒæ•´ä¸¤ä¸ªéƒ¨åˆ†çš„å¤§å°ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<ul>
<li>å¦‚æœä½ çš„è§†å›¾åªæ˜¯å¤§å°å‘ç”Ÿå¢é•¿æˆ–ç¼©å° â€”â€” <code>animateContentSize()</code>ã€‚</li>
<li>å¦‚æœä½ æƒ³è¦æ·¡å…¥ã€æ»‘åŠ¨æˆ–ç¼©æ”¾åŠ¨ç”» â€”â€” <code>AnimatedVisibility()</code>ã€‚</li>
<li>å¯¹äºæ›´é«˜çº§çš„å¸ƒå±€å˜åŒ–æˆ–ç»„åˆæ•ˆæœ â€”â€” <code>updateTransition()</code>ã€‚</li>
<li>æƒ³è¦ä½¿ç”¨å¸ƒå±€æƒé‡è°ƒæ•´å¤§å°ï¼Ÿ â€”â€” <code>animateFloatAsState()</code>ã€‚</li>
</ul>
<p>ä¸€æ—¦ä½ ç†Ÿæ‚‰äº†è¿™äº›å·¥å…·ï¼Œä½ ä¼šå‘ç°åœ¨ Compose ä¸­æ„å»ºå¤§å¤šæ•°å±•å¼€/æ”¶èµ·çš„ç”¨æˆ·ç•Œé¢å˜å¾—è¶…çº§ç›´è§‚ â€”â€” è€Œä¸”å®ƒä»¬æ¯”ä½¿ç”¨ <code>XML</code> æ—¶æ›´åŠ æµç•…ï¼Œæ›´åŠ ç›´è§‚ï¼Œæ›´åŠ æ–¹ä¾¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ]]></title>    <link>https://juejin.cn/post/7576158801972969518</link>    <guid>https://juejin.cn/post/7576158801972969518</guid>    <pubDate>2025-11-25T01:59:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576158801972969518" data-draft-id="7571758212473536563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜è¯´: &quot;ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ"/> <meta itemprop="keywords" content="å‰ç«¯,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-25T01:59:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜è¯´: "ä½ æ€ä¹ˆæŠŠ Radio ç»„ä»¶ç©å‡ºèŠ±çš„ï¼Œæ•™æ•™æˆ‘ï¼ â€œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T01:59:53.000Z" title="Tue Nov 25 2025 01:59:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>é¢è¯•å®˜é—®æˆ‘ <code>radio</code> ç»„ä»¶çŸ¥é“æ€ä¹ˆå®ç°å—ï¼Ÿæˆ‘æŠŠæˆ‘çš„ç»„ä»¶åº“ <code>radio</code> ç½‘é¡µä¸¢ç»™å®ƒï¼Œæˆ‘è¯´æˆ‘è¿™ä¸ª <code>radio</code> ç»„ä»¶ä»€ä¹ˆæ ·å¼éƒ½æ”¯æŒï¼Œä½ çœ‹è¿™æ˜¯ä¼ ç»Ÿæ ·å¼ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75c2ad19d3cb4428a13e7c8a0399aa21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=ml%2BhD5AE6jLUQLfPnOhfj4l96Io%3D" alt="image.png" loading="lazy"/></p>
<p>ä½ çœ‹ï¼Œè¿™æ˜¯è‡ªå®šä¹‰æ ·å¼ï¼Œç†è®ºä¸Šä»€ä¹ˆæ ·å¼éƒ½å¯ä»¥ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de85c9e8911649baab344ed9773f44f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=iqFlFs2EvF0D0%2BMvItCLhOOOEfw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9bf5a0123034518b14bb1f05482abef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=EBol8%2FM%2Bjpwly5V5FEZ%2BCVemlnY%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæˆ‘å˜¿å˜¿ä¸€ç¬‘è¯´ï¼š"æˆ‘çš„ <code>radio</code> ç»„ä»¶æœ¬è´¨ä¸Šä¸æ¶‰åŠä»»ä½•æ ·å¼ï¼Œåªè´Ÿè´£å²æœˆé™å¥½ï¼Œä½¿ç”¨è€…è´Ÿè´£è²Œç¾å¦‚èŠ±ï¼"</p>
<p>æœ€åé¢è¯•å®Œæ¯•ï¼Œé¢è¯•å®˜å¾ˆæ»¡æ„ï¼Œå¹¶é—®è¿™ä¸ªæ€ä¹ˆå®ç°çš„ï¼Œæˆ‘å°±å†™ä¸€ç¯‡æ–‡ç« æ¥è¯´è¯´å§ï¼</p>
<p>è¿™æ˜¯ä¸Šé¢ç»„ä»¶çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio%2Fexample%2Ftailwind-traditional-example" target="_blank" title="https://www.frontlight.tech/radio/example/tailwind-traditional-example" ref="nofollow noopener noreferrer">ç½‘ç«™åœ°å€</a></p>
<p>æ›´å¤šç»„ä»¶åº“æ•™ç¨‹ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github</a> ä¸Šç»™ä¸ª starï¼ŒåŠ ç¾¤äº¤æµå“¦ï¼</p>
<p>æœ¬æ–‡ç« åŠæ›´å¤šæ¡ˆä¾‹å·²ç»åœ¨å®˜ç½‘ä¸Šäº†ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fradio" target="_blank" title="https://www.frontlight.tech/radio" ref="nofollow noopener noreferrer">æœ¬æ–‡é“¾æ¥</a></p>
<h2 data-id="heading-1">å¯è‡ªå®šä¹‰çš„æ ¸å¿ƒ</h2>
<p>æ­£å¸¸çš„ <code>radio</code> ç»„ä»¶ä¸»è¦æ˜¯é€šè¿‡ <code>&lt;input&gt;</code> æ ‡ç­¾å±æ€§ <code>type="radio"</code> å®ç°çš„ï¼Œæµè§ˆå™¨éƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªé»˜è®¤çš„æ ·å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰€ä»¥æˆ‘ä»¬è¦è‡ªå®šä¹‰æ ·å¼ï¼Œå°±ä¸èƒ½ä½¿ç”¨åŸç”Ÿçš„ <code>radio</code>æ ·å¼ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä½ æ˜¯ä¸æ˜¯åªè¦å®ç°äº† <code>radio</code> å†…åœ¨çš„é€»è¾‘ï¼Œå…¶å®ä¹Ÿå°±æ˜¯å®ç°äº† <code>radio</code> ç»„ä»¶ï¼Œæœ‰äººä¼šé—®ï¼Ÿå†…åœ¨çš„é€»è¾‘æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<ul>
<li>å…¶ä¸€ï¼Œé€‰ä¸­æ€é€»è¾‘ï¼Œå°±æ˜¯å¤šä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬åªè¦ç‚¹å‡»ï¼Œå°±æ˜¯é€‰ä¸­æ€ï¼ˆcheckedï¼‰</li>
<li>å…¶äºŒï¼Œä¼ å…¥ <code>disabled</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½ç‚¹å‡»ï¼ˆæˆ–è€… <code>cursor</code>ï¼ˆä¹Ÿå°±æ˜¯é¼ æ ‡çš„çŠ¶æ€ï¼‰è®¾ç½®ä¸º <code>not-allowed</code> ä¹Ÿå°±æ˜¯ä¸å¯é€‰ä¸­ï¼‰</li>
<li>å…¶ä¸‰ï¼ŒåŸç”Ÿ <code>radio</code> å¹¶ä¸æ”¯æŒ  <code>readyonly</code> çŠ¶æ€ï¼Œä½†æˆ‘ä»¬è‡ªå®šä¹‰ç»„ä»¶åº”è¯¥å®ç°ï¼Œåœ¨è¡¨å•ä¸­ï¼Œ <code>readyonly</code> æ˜¯ä¸€ç§å¾ˆå¸¸è§çš„ä¸šåŠ¡éœ€æ±‚ã€‚æ‰€ä»¥ä¼ å…¥ <code>readyonly</code> å‚æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±ä¸èƒ½æ”¹å˜çŠ¶æ€ï¼Œåªèƒ½çœ‹ã€‚</li>
<li>æœ€åæœ€æœ€é‡è¦çš„é€»è¾‘æ˜¯å¤šä¸ª <code>radio</code> å…ƒç´ ç»„åˆæ—¶ï¼Œä½ åªèƒ½é€‰ä¸­å…¶ä¸­ä¸€ä¸ªï¼Œå³å•é€‰çš„é€»è¾‘ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä»¬åªè¦å®ç°äº†ä¸Šè¿°é€»è¾‘ï¼Œé‚£å°±æ˜¯è·ŸåŸç”Ÿçš„å•é€‰å°±æ²¡æœ‰åŒºåˆ«äº†ã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†ï¼Œèƒ½ä¸èƒ½æ—¢ä¿æŒ <code>radio</code> ç»„ä»¶çš„åŸæœ¬çš„é€»è¾‘ï¼Œè¿˜èƒ½æ”¯æŒè‡ªå®šä¹‰å‘¢ï¼Ÿä¹Ÿå°±æ˜¯ç”¨æˆ·å¦‚æœè¿˜æ˜¯å¸Œæœ›ä½¿ç”¨åŸç”Ÿ <code>radio</code> æˆ‘ä»¬æ”¯æŒï¼Œè‡ªå®šä¹‰ä¹Ÿæ”¯æŒå‘¢ï¼Ÿè¿™æ ·çš„è¯ï¼Œè¯­ä¹‰æ€§å®Œå¥½çš„åŸºç¡€ä¸Šè¿˜èƒ½è‡ªç”±æ‹“å±•ï¼Œç®€ç›´å®Œç¾ï¼</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬çš„ç»„ä»¶å°±æ˜¯è¿™æ ·çš„ã€‚</p>
<p>åœ¨ä»‹ç»æ ¸å¿ƒé€»è¾‘ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¯´ä¸€ä¸ªå°æŠ€å·§ã€‚</p>
<h2 data-id="heading-2">radio ç»„ä»¶åŸºæœ¬ç»“æ„</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6211bf2122614c088f5f3de73dbf1438~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764640792&amp;x-signature=429AOW6GsoGnPXBmS0u5kKNk0jM%3D" alt="image.png" loading="lazy"/></p>
<p>é¦–å…ˆå…ˆä»‹ç»ä¸€ä¸€ä¸ªå°æŠ€å·§ï¼Œå¦‚ä¸Šå›¾ï¼Œä¸€èˆ¬ <code>radio</code> åŒ…å«äº†ä¸€ä¸ªåœ†åœˆè¡¨ç¤ºæ˜¯å¦é€‰ä¸­ï¼Œåœ†åœˆçš„å³è¾¹æ˜¯æ–‡å­—ï¼Œæ­£å¸¸æ¥è¯´ï¼Œæˆ‘ä»¬ç‚¹å‡»åœ†åœˆæ‰èƒ½é€‰ä¸­ï¼Œå¯è¿™äº›ç»„ä»¶åº“å¦‚ä½•å®ç°çš„ç‚¹å‡»åœ†åœˆå³è¾¹çš„æ–‡å­—ä¹Ÿèƒ½é€‰ä¸­åœ†åœˆå‘¢ï¼Ÿè¿™å°±æ¶‰åŠåˆ° <code>&lt;label&gt;</code> æ ‡ç­¾äº†ã€‚</p>
<p>å¦‚ä¸Šå›¾æ˜¯ <code>MDN</code> ä¸­çš„æ–¹å¼:</p>
<pre><code class="hljs language-html" lang="html">  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"drone"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> <span class="hljs-attr">checked</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"huey"</span>&gt;</span>Huey<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<ul>
<li>é¦–å…ˆéœ€è¦åœ¨ <code>input</code> ä¸Šä½¿ç”¨ <code>id</code> å±æ€§</li>
<li>ç„¶ååœ¨ <code>label</code> ç»„ä»¶ä¸Šä½¿ç”¨ <code>for</code>å±æ€§ï¼Œè·Ÿ <code>id</code> çš„å€¼ä¸€è‡´å³å¯å®ç°ç‚¹å‡» <code>label</code> æ ‡ç­¾å°±èƒ½é€‰ä¸­å¯¹åº”çš„ <code>radio</code></li>
</ul>
<p>ä½†è¿™ç§æ–¹å¼æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬çš„ç»„ä»¶ä½¿ç”¨çš„å¦ä¸€ç§æ–¹å¼è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œå°±æ˜¯ <code>label</code> å°† <code>input</code> æ ‡ç­¾åŒ…è£¹å°±å¥½ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>
 <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"huey"</span> /&gt;</span>
huey
<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
</code></pre>
<p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¢³ç†ä¸€ä¸‹çŠ¶æ€çš„åˆ‡æ¢é€»è¾‘ï¼Œè¿™æ ·æˆ‘ä»¬å®ç°èµ·æ¥å°±æœ‰ä¸€ä¸ªè“å›¾ï¼š</p>
<ul>
<li>é¦–å…ˆç‚¹å‡» <code>label</code> ï¼Œä¹Ÿå°±æ˜¯ç»‘å®šåœ¨  <code>label</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li>ç„¶åè¿™ä¸ª <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘ <code>input</code>ï¼ˆradioï¼‰ ä¸Šçš„ <code>onClick</code> äº‹ä»¶</li>
<li><code>input</code> ä¸Šçš„ <code>onClick</code> äº‹ä»¶ä¼šè§¦å‘è‡ªèº«çš„ <code>onChange</code> äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯é€‰ä¸­çš„value å€¼åœ¨ <code>onChange</code> çš„æ—¶å€™å¯ä»¥è®¾ç½®ä¸ºç‚¹å‡»çš„ <code>input</code> çš„å€¼ï¼Œ
<ul>
<li>è¿™é‡Œæœ‰äº›æ–°åŒå­¦å¯èƒ½ä¸çŸ¥é“ <code>input</code> è¿™ç±»è¡¨å•å…ƒç´ ï¼Œç›®çš„å°±æ˜¯æ”¶é›†å€¼ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¼ å…¥ <code>value</code> å±æ€§ã€‚</li>
</ul>
</li>
</ul>
<p>æ•´ä½“é€»è¾‘å¾ˆæ¸…æ™°ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œä½†å…¶ä¸­çš„å‘ä¸å°‘ï¼Œæˆ‘ä»¬æŠŠå‘ä»‹ç»å®Œï¼ŒåŸºæœ¬ä¸Šä½ å°±å¯ä»¥å®ç°ä¸€ä¸ªè‡ªå·±çš„ <code>radio</code> ç»„ä»¶äº†</p>
<h2 data-id="heading-3">æ ¸å¿ƒé€»è¾‘æ¢³ç†</h2>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯ç»™ <code>label</code> æ ‡ç­¾ç»‘å®š <code>onClick</code> äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-keyword">const</span> onLabelClick = <span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) {
    <span class="hljs-comment">// åªè¯»æˆ–ç¦ç”¨æ—¶ï¼Œé˜»æ­¢ç‚¹å‡»äº§ç”Ÿä»»ä½•è¡Œä¸º</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-keyword">return</span>;
    }
    rest?.<span class="hljs-property">onClick</span>?.(e);
  };

</code></pre>
<p>éœ€è¦æ³¨æ„</p>
<ul>
<li>å½“å¤–ç•Œä¼ å…¥ <code>disabled</code> æˆ–è€… <code>readonly</code> å‚æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ <code>return</code></li>
<li>æ³¨æ„è¦ä½¿ç”¨ <code> e.preventDefault();</code> æ¥ç»„ç»‡é»˜è®¤äº‹ä»¶ï¼Œé»˜è®¤äº‹ä»¶å°±æ˜¯ç‚¹å‡» <code>label</code> è§¦å‘ <code>input</code> çš„ <code>onClick</code> äº‹ä»¶ï¼Œä»è€Œé˜»æ­¢<code>input</code> ä¸Šå€¼è¢«é€‰ä¸­</li>
</ul>
<p>ç„¶åéœ€è¦ç»™ <code>input</code> ç»‘å®š <code>onClick</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript">onClick={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
   <span class="hljs-comment">// é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†</span>
   e.<span class="hljs-title function_">stopPropagation</span>();
}}
</code></pre>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯</p>
<ul>
<li>è°ƒç”¨ <code>e.stopPropagation();</code> é˜²æ­¢ç”¨æˆ·åœ¨ç›´æ¥ç‚¹å‡» <code>input</code>ï¼ˆradioï¼‰ çš„æ—¶å€™ï¼Œäº‹ä»¶å†’æ³¡åˆ° <code>label</code> æ ‡ç­¾ï¼Œä»è€Œå¤šæ¬¡è§¦å‘ <code>label</code> çš„ <code>onClick</code> äº‹ä»¶ã€‚</li>
</ul>
<p>æœ€åï¼Œå°±æ˜¯åœ¨ <code>input</code> ç»‘å®š <code>onChange</code> äº‹ä»¶</p>
<pre><code class="hljs language-javascript" lang="javascript"> <span class="hljs-keyword">const</span> [checked, setChecked] = <span class="hljs-title function_">useMergeValue</span>(<span class="hljs-literal">false</span>, {
    <span class="hljs-attr">value</span>: propsChecked,
    <span class="hljs-attr">defaultValue</span>: mergeProps.<span class="hljs-property">defaultChecked</span>,
  });
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onChange</span> = (<span class="hljs-params">e</span>) =&gt; {
    e.<span class="hljs-title function_">persist</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();

    <span class="hljs-comment">// ç¦ç”¨æˆ–åªè¯»éƒ½ä¸æ”¹å˜çŠ¶æ€ï¼Œä¸è§¦å‘å¤–éƒ¨ onChange</span>
    <span class="hljs-keyword">if</span> (disabled || readonly) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
      context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
      <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
    }
    <span class="hljs-keyword">if</span> (!checked) {
      propsOnChange?.(<span class="hljs-literal">true</span>, e);
    }
  };
</code></pre>
<p>å…¶ä¸­ç»†èŠ‚å¾ˆå¤šï¼Œæˆ‘ä»¬ç®€å•è¯´ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>e.persist();</code> åœ¨ <code>react</code> 17 ä¹‹å‰éœ€è¦ï¼ˆç°åœ¨éƒ½å·²ç» 19 ç‰ˆæœ¬ï¼Œæ˜¯å¯ä»¥åˆ æ‰è¿™è¡Œä»£ç çš„ï¼‰ï¼Œå¤§æ¦‚ä»‹ç»ä¸‹å®ƒçš„ä½œç”¨</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React 16 åŠä¹‹å‰ç‰ˆæœ¬çš„é—®é¢˜ï¼Œåœ¨ setTimeout ä¸­æ— æ³•è·å¾—æ­£å¸¸çš„äº‹ä»¶å¯¹è±¡çš„å€¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">e</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// æ­£å¸¸è®¿é—®</span>
  
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">type</span>); <span class="hljs-comment">// null æˆ– undefinedï¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>); <span class="hljs-comment">// nullï¼</span>
  }, <span class="hljs-number">1000</span>);
};
</code></pre>
<ul>
<li><code>e.stopPropagation();</code> é˜»æ­¢äº‹ä»¶å†’æ³¡
<ul>
<li>å¦‚æœ Radio åµŒå¥— Radioï¼Œç‚¹å‡»é‡Œé¢çš„ Radio å°±ä¼šè®© <code>onChnage</code> äº‹ä»¶å†’æ³¡åˆ°å¤–å±‚å»ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çš„ï¼Œæ‰€ä»¥éš”ç¦»ä¸€ä¸‹</li>
</ul>
</li>
<li><code>if (disabled || readonly) return;</code> æ£€æŸ¥æ˜¯å¦æ˜¯ disabled æˆ–è€… readonly çŠ¶æ€ï¼Œè¿™æ ·çš„çŠ¶æ€ä¸èƒ½è®©å®ƒè§¦å‘ <code>onChange</code> äº‹ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (context.<span class="hljs-property">group</span>) {
  context?.<span class="hljs-property">onChangeValue</span>?.(value, e);
}
</code></pre>
<p>è¿™ä¸ªæˆ‘ä»¬æš‚ä¸”ä¸è®²ï¼Œæ˜¯è¦é…åˆ <code>Radio.Group</code> ç»„ä»¶ä½¿ç”¨ï¼Œè¿™ä¸ª context æ˜¯ä½¿ç”¨ <code>useContext</code> api è·å–çš„ <code>Radio.Group</code> é€ä¼ çš„æ•°æ®ã€‚ä¹Ÿå°±æ˜¯çŠ¶æ€æœ€ç»ˆä¼šè¢«  <code>Radio.Group</code> æ¥ç®¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<ul>
<li>
<p>ä½œç”¨ï¼šç‹¬ç«‹ä½¿ç”¨æ—¶çš„çŠ¶æ€ç®¡ç†</p>
</li>
<li>
<p><code>!('checked' in props)</code>ï¼šæ£€æŸ¥æ˜¯å¦æ˜¯<strong>éå—æ§ç»„ä»¶</strong>ï¼Œè¿™æ˜¯è¯†åˆ«æ˜¯å¦æ˜¯å—æ§è¿˜æ˜¯éå—æ§ç»„ä»¶çš„å…³é”®ã€‚</p>
<ul>
<li>æ²¡æœ‰ä¼ å…¥Â <code>checked</code>Â prop â†’ ç»„ä»¶è‡ªå·±ç®¡ç†çŠ¶æ€</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œéå¸¸éå¸¸ç»†èŠ‚ï¼Œæœ‰äººå¯èƒ½ç–‘æƒ‘äº†ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼Œè€Œä¸æ˜¯ç”¨ <code>checked === undefined</code> æ¥åˆ¤æ–­ï¼Œå› ä¸ºä¸ä¼ çš„å€¼é»˜è®¤ä¸æ˜¯ <code>undefined</code> å—ï¼Ÿæˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹</p>
<p>å¤§å®¶éœ€è¦æ³¨æ„ï¼Œå‡è®¾ä½ è¿™æ ·ä¼ å…¥ <code>checked</code> å‚æ•°</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Radio <span class="hljs-attr">checked</span>={undefiend} /&gt;
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>true</code> å› ä¸ºä½ è¿˜æ˜¯ä¼ äº† <code>undefined</code> å€¼</li>
</ul>
<p>åªæœ‰è¿™æ ·</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Radio</span> /&gt;</span>
</code></pre>
<ul>
<li><code>'checked' in props</code> å¾—åˆ°çš„æ˜¯ <code>false</code>, ä¹Ÿå°±æ˜¯ä»€ä¹ˆä¹Ÿæ²¡ä¼ ï¼Œä»£è¡¨æ˜¯éå—æ§ç»„ä»¶ã€</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">} <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(<span class="hljs-string">'checked'</span> <span class="hljs-keyword">in</span> props) &amp;&amp; !checked) {
  <span class="hljs-title function_">setChecked</span>(<span class="hljs-literal">true</span>);
}
</code></pre>
<p>ç„¶å <code> setChecked(true);</code> è¿™ä¸ªå¾ˆå…³é”®ï¼Œæœ‰çš„äººè¯´ï¼Œ<code>!('checked' in props)</code> ä¸æ˜¯ä»£è¡¨éå—æ§ç»„ä»¶å—ï¼Œéå—æ§ç»„ä»¶æ˜¯ç»„ä»¶è‡ªå·±æ§åˆ¶å€¼ï¼Œæ€ä¹ˆè¿˜æœ‰ç›´æ¥ <code>setCheck</code> æ§åˆ¶ï¼Œè¿™ä¸æ˜¯å—æ§ç»„ä»¶çš„æ§åˆ¶çš„æ–¹å¼å—ï¼Ÿ</p>
<p>è¿™é‡Œéœ€è¦è§£é‡Šä¸¤ç‚¹</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œå¾ˆå¤šç»„ä»¶åº“ï¼Œä¸€èˆ¬éƒ½ä¼šç”¨å—æ§çš„å½¢å¼æ¥æ¨¡æ‹Ÿéå—æ§ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬è¦ç¡®ç¡®å®å®æ‹¿åˆ° Radio ç»„ä»¶çš„ <code>checked</code>ï¼ˆé€‰ä¸­ï¼‰ è¿˜æ˜¯ é <code>checked</code> çŠ¶æ€ï¼Œå¦‚æœéƒ½äº¤ç»™åŸç”Ÿï¼Œæˆ‘ä»¬è·å–å¾ˆä¸æ–¹ä¾¿</p>
</li>
<li>
<p>å…¶æ¬¡ <code>useMergeValue</code> æ˜¯ç»„ä»¶åº“å¾ˆå¸¸ç”¨å‡½æ•°ï¼Œå®ƒæŠŠå—æ§å’Œéå—æ§ç»„åˆèµ·æ¥ï¼Œæ˜¯ä¸ªéå¸¸å®ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹é€»è¾‘ã€‚ç›¸ä¿¡ä½ å†™ç»„ä»¶åº“ä¹Ÿä¸€å®šä¼šç”¨åˆ°ã€‚</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-string">'use client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { isUndefined } <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils'</span>;
<span class="hljs-keyword">import</span> { usePrevious } <span class="hljs-keyword">from</span> <span class="hljs-string">'./use-previous'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useMergeValue&lt;T&gt;(
  <span class="hljs-attr">defaultStateValue</span>: T,
  props?: {
    defaultValue?: T;
    value?: T;
  },
): [T, <span class="hljs-title class_">React</span>.<span class="hljs-property">Dispatch</span>&lt;<span class="hljs-title class_">React</span>.<span class="hljs-property">SetStateAction</span>&lt;T&gt;&gt;, T] {
  <span class="hljs-keyword">const</span> { defaultValue, value } = props || {};
  <span class="hljs-keyword">const</span> firstRenderRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> prevPropsValue = <span class="hljs-title function_">usePrevious</span>(props?.<span class="hljs-property">value</span>);

  <span class="hljs-keyword">const</span> [stateValue, setStateValue] = useState&lt;T&gt;(
    !<span class="hljs-title function_">isUndefined</span>(value) ? value : !<span class="hljs-title function_">isUndefined</span>(defaultValue) ? defaultValue : defaultStateValue,
  );

  <span class="hljs-comment">// å—æ§è½¬ä¸ºéå—æ§çš„æ—¶å€™ï¼Œéœ€è¦åšè½¬æ¢å¤„ç†</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (firstRenderRef.<span class="hljs-property">current</span>) {
      firstRenderRef.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span> &amp;&amp; prevPropsValue !== value) {
      <span class="hljs-title function_">setStateValue</span>(value);
    }
  }, [value]);

  <span class="hljs-keyword">const</span> mergedValue = <span class="hljs-title function_">isUndefined</span>(value) ? stateValue : value;

  <span class="hljs-keyword">return</span> [mergedValue, setStateValue, stateValue];
}
</code></pre>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œå…¶å®å°±æ˜¯ä½ ä¼ äº†Â <code>value</code>Â æˆ‘å°±è®¤ä¸ºä½ æ˜¯å—æ§ç»„ä»¶ï¼Œç„¶åÂ <code>value</code>Â å°±é€ä¼ å‡ºå»ï¼ŒÂ <code>defaultValue</code>Â æˆ–è€…ç»„ä»¶åº“æƒ³é»˜è®¤ç»™ä¸ªé»˜è®¤å€¼ï¼Œ æˆ‘ä¼šç”¨è¿™ä¸ªå€¼å…¶åˆå§‹åŒ–Â <code>stateValue</code>Â ç„¶åä¼ å‡ºå»ã€‚å¹¶ä¸”Â <code>setStateValue</code>Â æ–¹æ³•èƒ½æ”¹å˜å…¶å€¼ã€‚</p>
<p><code>setStateValue</code>Â å…¶å®åœ¨ä¼ å…¥Â <code>value</code>Â çš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œå› ä¸ºæ”¹å˜ä¸äº†Â <code>value</code>Â çš„å€¼ã€‚</p>
<h2 data-id="heading-4">å¦‚ä½•å°†çŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶</h2>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>context</code> apiï¼Œå°†æœ€ç»ˆçš„ <code>checked</code>, <code>disabled</code>, <code>readonly</code> çŠ¶æ€è®©å­ç»„ä»¶ä½¿ç”¨ <code>useContext</code> æ¥è·å–ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">RadioContext.Provider</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-5">å¦‚ä½•ä¿æŒè¯­ä¹‰æ€§</h2>
<p>æˆ‘ä»¬åªéœ€è¦å°† <code>input</code> ç»„ä»¶ä¾ç„¶æ¥å—ä¹‹å‰æˆ‘ä»¬çš„çŠ¶æ€ï¼Œå°±èƒ½ä¿æŒåŸç”Ÿ <code>radio</code> ç»„ä»¶çš„è¯­ä¹‰æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå–„ä¸€ä¸‹ <code>input</code> ç»„ä»¶,ä¹Ÿå°±æ˜¯æŠŠä¹‹å‰çš„çŠ¶æ€ä¼ é€’è¿‡å»å³å¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span> value={{ checked, disabled, readonly }}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onLabelClick}</span> <span class="hljs-attr">aria-disabled</span>=<span class="hljs-string">{!!disabled}</span> <span class="hljs-attr">aria-readonly</span>=<span class="hljs-string">{!!readonly}</span> <span class="hljs-attr">aria-checked</span>=<span class="hljs-string">{!!checked}</span>&gt;</span>
        {/* ä¸ºä»€ä¹ˆæ²¡æœ‰ readonly çŠ¶æ€ï¼Œ æ ‡å‡†é‡Œæœ¬æ¥ä¹Ÿæ²¡æœ‰ */}
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">ref</span>=<span class="hljs-string">{inputRef}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{!!disabled}</span>
          <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>
          <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
          <span class="hljs-attr">checked</span>=<span class="hljs-string">{!!checked}</span>
          <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onChange}</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            // é˜»æ­¢ input çš„ç‚¹å‡»äº‹ä»¶å†’æ³¡ï¼Œé¿å…é‡å¤å¤„ç†
            e.stopPropagation();
          }}
          aria-readonly={!!readonly}
        /&gt;
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>
    &lt;/<span class="hljs-title class_">RadioContext</span>.<span class="hljs-property">Provider</span>&gt;
</code></pre>
<h2 data-id="heading-6">Radio Group é€»è¾‘</h2>
<p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ <code>Radio Group</code> ç»„ä»¶åŒ…è£¹ä¸Šé¢æˆ‘ä»¬å®Œæˆçš„ <code>Radio</code> ç»„ä»¶ã€‚
æ ¸å¿ƒé€»è¾‘ä¸º, ä½¿ç”¨åŒæ ·æ˜¯ <code>useContext</code> apiï¼Œæˆ‘ä»¬å‘½åä¸º <code>RadioGroupContext</code> æ¥æŠŠå½“å‰é€‰ä¸­çš„ <code>Radio</code> æ ‡ç­¾çš„ <code>value</code> ä¼ é€’å³å¯ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">    &lt;div role=<span class="hljs-string">"radiogroup"</span> {...rest}&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RadioGroupContext.Provider</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">onChangeValue</span>,
          <span class="hljs-attr">type</span>,
          <span class="hljs-attr">value</span>,
          <span class="hljs-attr">disabled</span>,
          <span class="hljs-attr">readonly</span>,
          <span class="hljs-attr">group:</span> <span class="hljs-attr">true</span>,
          <span class="hljs-attr">name</span>,
        }}
      &gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">RadioGroupContext.Provider</span>&gt;</span></span>
    &lt;/div&gt;
</code></pre>
<h2 data-id="heading-7">å°ç»“</h2>
<p>æ–‡ç« æŠŠä¸»è¦çš„æ ¸å¿ƒé€»è¾‘æ¢³ç†äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰è¿‡å¤šè§£é‡Šæ¯è¡Œä»£ç ã€‚å¦‚æœä½ æƒ³è®¨è®ºå…³äºå¦‚ä½•å®ç°è‡ªå·±ç»„ä»¶åº“çš„çš„å†…å®¹ï¼Œæ¬¢è¿åŠ ç¾¤ä¸€èµ·è®¨è®ºï¼Œç»„ä»¶è¿˜åœ¨ä¸æ–­æ‹“å±•ä¸­ï¼Œæœ€ç»ˆä¼šå¯¹æ ‡å¤§å‚ç»„ä»¶åº“ã€‚</p>
<p>å…¶å®å¯¹äºä¸€ä¸ªå‰ç«¯æ¥è¯´ï¼Œç»„ä»¶åº“ç®—æ˜¯å›Šæ‹¬æ‰€æœ‰æ—¥å¸¸å¸¸è§çš„å‰ç«¯æŠ€æœ¯äº†ï¼Œæ— è®ºæ˜¯å­¦ä¹ è¿˜æ˜¯é¢è¯•ï¼Œéƒ½æ˜¯ç»ä½³çš„é¡¹ç›®ã€‚</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">ç›®å‰çš„å®˜ç½‘</a></li>
<li>æ„Ÿè°¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576129509935546387</link>    <guid>https://juejin.cn/post/7576129509935546387</guid>    <pubDate>2025-11-24T23:42:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576129509935546387" data-draft-id="7576181242581647423" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-24T23:42:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¯å±±æœ‰é£æ¥"/> <meta itemprop="url" content="https://juejin.cn/user/3940246036939358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3æ ·å¼æ·±åº¦é€‰æ‹©å™¨ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦:deep()ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3940246036939358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¯å±±æœ‰é£æ¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T23:42:23.000Z" title="Mon Nov 24 2025 23:42:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    46
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿåœ¨Vue 3é¡¹ç›®é‡Œï¼Œæƒ³è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼ï¼Œç»“æœå‘ç°ä¸ç®¡æ€ä¹ˆå†™CSSéƒ½ä¸ç”Ÿæ•ˆã€‚æ˜æ˜ä»£ç çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œä½†æ ·å¼å°±æ˜¯æ— æ³•ç©¿é€åˆ°å­ç»„ä»¶å†…éƒ¨ã€‚</p>
<p>è¿™ç§æƒ…å†µåœ¨å‰ç«¯å¼€å‘ä¸­å¤ªå¸¸è§äº†ã€‚ç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹UIåº“çš„æ—¶å€™ï¼Œæƒ³è¦å¾®è°ƒæŸä¸ªç»„ä»¶çš„æ ·å¼ï¼Œå´å‘ç°è‡ªå·±è¢«CSSä½œç”¨åŸŸé™åˆ¶å¾—æ­»æ­»çš„ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£Vue 3ä¸­çš„æ ·å¼æ·±åº¦é€‰æ‹©å™¨<code>:deep()</code>ï¼Œä»å®ƒè¯ç”Ÿçš„èƒŒæ™¯åˆ°å…·ä½“çš„ä½¿ç”¨æ–¹æ³•ï¼Œå†åˆ°å®é™…å¼€å‘ä¸­çš„æœ€ä½³å®è·µã€‚è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ å°†å½»åº•æŒæ¡å¦‚ä½•ä¼˜é›…åœ°è§£å†³ç»„ä»¶æ ·å¼ç©¿é€é—®é¢˜ï¼Œå†ä¹Ÿä¸ç”¨ä¸ºä¿®æ”¹å­ç»„ä»¶æ ·å¼è€Œå¤´ç–¼äº†ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦æ·±åº¦é€‰æ‹©å™¨ï¼Ÿ</h2>
<p>åœ¨ç†è§£<code>:deep()</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆæ˜ç™½Vueç»„ä»¶æ ·å¼çš„ä½œç”¨åŸŸé—®é¢˜ã€‚Vueå•æ–‡ä»¶ç»„ä»¶ä¸­çš„<code>&lt;style&gt;</code>æ ‡ç­¾é»˜è®¤æ˜¯å…¨å±€ä½œç”¨åŸŸçš„ï¼Œè¿™æ„å‘³ç€ä½ åœ¨ä¸€ä¸ªç»„ä»¶é‡Œå†™çš„æ ·å¼å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–ç»„ä»¶ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVueå¼•å…¥äº†<code>scoped</code>æ ·å¼ã€‚å½“ä½ åœ¨<code>&lt;style&gt;</code>æ ‡ç­¾ä¸Šæ·»åŠ <code>scoped</code>å±æ€§æ—¶ï¼ŒVueä¼šè‡ªåŠ¨ä¸ºç»„ä»¶ä¸­çš„æ¯ä¸ªå…ƒç´ æ·»åŠ ä¸€ä¸ªå”¯ä¸€çš„å±æ€§ï¼Œç„¶åé€šè¿‡å±æ€§é€‰æ‹©å™¨æ¥ç¡®ä¿æ ·å¼åªä½œç”¨äºå½“å‰ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.demo</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* è¿™ä¸ªæ ·å¼æ— æ³•å½±å“åˆ°child-componentå†…éƒ¨çš„å…ƒç´  */</span>
<span class="hljs-selector-class">.child-content</span> {
  <span class="hljs-attribute">color</span>: red; <span class="hljs-comment">/* ä¸ä¼šç”Ÿæ•ˆï¼ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ä½†è¿™æ ·å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼šå½“æˆ‘ä»¬ç¡®å®éœ€è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼æ—¶ï¼Œä½œç”¨åŸŸæ ·å¼å°±æˆäº†éšœç¢ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ ä½¿ç”¨äº†æŸä¸ªUIåº“çš„æŒ‰é’®ç»„ä»¶ï¼Œä½†éœ€è¦ç¨å¾®è°ƒæ•´å®ƒçš„å†…è¾¹è·ï¼Œè¿™æ—¶å€™è¯¥æ€ä¹ˆåŠï¼Ÿ</p>
<p>è¿™å°±æ˜¯æ·±åº¦é€‰æ‹©å™¨è¯ç”Ÿçš„åŸå› ã€‚å®ƒæä¾›äº†ä¸€ç§"ç©¿é€"ç»„ä»¶æ ·å¼ä½œç”¨åŸŸçš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ã€‚</p>
<h2 data-id="heading-1">:deep()çš„å‰ä¸–ä»Šç”Ÿ</h2>
<p>åœ¨Vue 2æ—¶ä»£ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>&gt;&gt;&gt;</code>ã€<code>/deep/</code>æˆ–<code>::v-deep</code>æ¥å®ç°æ ·å¼ç©¿é€ã€‚ä½†è¿™äº›è¯­æ³•å­˜åœ¨ä¸€äº›é—®é¢˜ï¼šæœ‰çš„å·²ç»è¢«CSSè§„èŒƒåºŸå¼ƒï¼Œæœ‰çš„æµè§ˆå™¨æ”¯æŒä¸ä¸€è‡´ï¼Œè¿˜æœ‰çš„å†™æ³•æ¯”è¾ƒå†—é•¿ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- Vue 2ä¸­çš„å„ç§æ·±åº¦é€‰æ‹©å™¨å†™æ³• --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* åŸç”ŸCSSçš„æ·±åº¦é€‰æ‹©å™¨ï¼ŒæŸäº›æµè§ˆå™¨ä¸æ”¯æŒ */</span>
<span class="hljs-selector-class">.parent</span> &gt;&gt;&gt; <span class="hljs-selector-class">.child</span> { <span class="hljs-attribute">color</span>: red; }

<span class="hljs-comment">/* Sassç­‰é¢„å¤„ç†å™¨ä¸­çš„å†™æ³• */</span>
<span class="hljs-selector-class">.parent</span> /deep/ <span class="hljs-selector-class">.child</span> { <span class="hljs-attribute">color</span>: red; }

<span class="hljs-comment">/* Vueç‰¹æœ‰çš„è¯­æ³• */</span>
<span class="hljs-selector-class">.parent</span> ::v-deep .child { <span class="hljs-attribute">color</span>: red; }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>Vue 3å›¢é˜Ÿåœ¨è®¾è®¡æ–°çš„æ ·å¼ç³»ç»Ÿæ—¶ï¼Œå†³å®šç»Ÿä¸€è¿™ä¸ªè¯­æ³•ã€‚ä»–ä»¬é€‰æ‹©äº†<code>:deep()</code>ä½œä¸ºæ–°çš„æ·±åº¦é€‰æ‹©å™¨ï¼Œè¿™æ—¢ç¬¦åˆCSSè§„èŒƒçš„å‘å±•è¶‹åŠ¿ï¼Œä¹Ÿæä¾›äº†æ›´å¥½çš„å¼€å‘ä½“éªŒã€‚</p>
<p><code>:deep()</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªCSSä¼ªç±»ï¼Œå®ƒåœ¨ç¼–è¯‘æ—¶ä¼šè¢«Vueçš„å¤„ç†å·¥å…·è½¬æ¢ä¸ºé€‚å½“çš„é€‰æ‹©å™¨ï¼Œç¡®ä¿æ ·å¼èƒ½å¤Ÿæ­£ç¡®ç©¿é€åˆ°å­ç»„ä»¶ã€‚</p>
<h2 data-id="heading-2">:deep()çš„åŸºæœ¬ç”¨æ³•</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡å‡ ä¸ªå®é™…çš„ä¾‹å­æ¥çœ‹çœ‹<code>:deep()</code>æ€ä¹ˆç”¨ã€‚</p>
<p>æœ€åŸºæœ¬çš„ç”¨æ³•å°±æ˜¯åœ¨éœ€è¦ç©¿é€åˆ°å­ç»„ä»¶çš„é€‰æ‹©å™¨å‰åŠ ä¸Š<code>:deep()</code>ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"parent"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"child-comp"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.parent</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-comment">/* ä½¿ç”¨:deep()ç©¿é€åˆ°å­ç»„ä»¶ */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child-comp) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f0f0</span>;
}

<span class="hljs-comment">/* ä¹Ÿå¯ä»¥è¿™æ ·å†™ */</span>
:<span class="hljs-built_in">deep</span>(.child-comp) {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;
}
</span></code></pre>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä¿®æ”¹ç¬¬ä¸‰æ–¹ç»„ä»¶çš„æ ·å¼ã€‚æ¯”å¦‚ä½¿ç”¨Element Plusçš„æŒ‰é’®ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-btn"</span>&gt;</span>
      è‡ªå®šä¹‰æŒ‰é’®
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.page</span> :<span class="hljs-built_in">deep</span>(.custom-btn) {
  <span class="hljs-comment">/* ä¿®æ”¹Element PlusæŒ‰é’®çš„å†…è¾¹è· */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span> <span class="hljs-number">24px</span>;
  
  <span class="hljs-comment">/* ä¿®æ”¹è¾¹æ¡†åŠå¾„ */</span>
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  
  <span class="hljs-comment">/* ä¿®æ”¹èƒŒæ™¯é¢œè‰² */</span>
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4f46e5</span>;
}

<span class="hljs-selector-class">.page</span> :<span class="hljs-built_in">deep</span>(.custom-btn:hover) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4338ca</span>;
}
</span></code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>:deep()</code>åº”è¯¥ç”¨åœ¨é€‰æ‹©å™¨çš„å¼€å¤´ï¼Œæˆ–è€…ç´§è·Ÿåœ¨çˆ¶é€‰æ‹©å™¨ä¹‹åã€‚é”™è¯¯çš„ä½¿ç”¨æ–¹å¼ä¼šå¯¼è‡´æ ·å¼ä¸ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* é”™è¯¯çš„å†™æ³• - :deep()ä¸èƒ½æ”¾åœ¨æœ€å */</span>
<span class="hljs-selector-class">.parent</span> <span class="hljs-selector-class">.child</span> :<span class="hljs-built_in">deep</span>() {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* é”™è¯¯çš„å†™æ³• - é€‰æ‹©å™¨ç»“æ„ä¸åˆç† */</span>
:<span class="hljs-built_in">deep</span>() .parent .child {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* æ­£ç¡®çš„å†™æ³• */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child) {
  <span class="hljs-attribute">color</span>: red;
}

:<span class="hljs-built_in">deep</span>(.parent .child) {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-3">å®é™…åœºæ™¯ä¸­çš„åº”ç”¨æŠ€å·§</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°å„ç§éœ€è¦ä½¿ç”¨<code>:deep()</code>çš„åœºæ™¯ã€‚ä¸‹é¢åˆ†äº«å‡ ä¸ªå®ç”¨çš„æŠ€å·§ã€‚</p>
<p><strong>åœºæ™¯ä¸€ï¼šä¿®æ”¹UIç»„ä»¶åº“çš„é»˜è®¤æ ·å¼</strong></p>
<p>å‡è®¾æˆ‘ä»¬åœ¨ä½¿ç”¨Naive UIçš„è¡¨æ ¼ç»„ä»¶ï¼Œéœ€è¦è°ƒæ•´è¡¨å¤´çš„æ ·å¼ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"data-table"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">n-data-table</span>
      <span class="hljs-attr">:columns</span>=<span class="hljs-string">"columns"</span>
      <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-table"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-thead) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8fafc</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
}

<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-th) {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">16px</span> <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-selector-class">.data-table</span> :<span class="hljs-built_in">deep</span>(.custom-table .n-table-td) {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">13px</span>;
}
</span></code></pre>
<p><strong>åœºæ™¯äºŒï¼šåœ¨æ’æ§½å†…å®¹ä¸­åº”ç”¨æ ·å¼</strong></p>
<p>å½“ä½¿ç”¨æ’æ§½æ—¶ï¼Œæ’æ§½å†…å®¹çš„æ ·å¼ä¹Ÿéœ€è¦é€šè¿‡<code>:deep()</code>æ¥ç©¿é€ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">modal-dialog</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">header</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-title"</span>&gt;</span>è‡ªå®šä¹‰æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">content</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"dialog-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™é‡Œæ˜¯å¯¹è¯æ¡†å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">modal-dialog</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* ä¿®æ”¹å¯¹è¯æ¡†å®¹å™¨çš„æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.modal-container) {
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">12px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">25px</span> -<span class="hljs-number">5px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> / <span class="hljs-number">0.1</span>);
}

<span class="hljs-comment">/* ä¿®æ”¹æ’æ§½å†…å®¹çš„æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.dialog-title) {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#1f2937</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>;
}

:<span class="hljs-built_in">deep</span>(.dialog-content) {
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#6b7280</span>;
}
</span></code></pre>
<p><strong>åœºæ™¯ä¸‰ï¼šé…åˆCSSå˜é‡ä½¿ç”¨</strong></p>
<p><code>:deep()</code>è¿˜å¯ä»¥ä¸CSSå˜é‡ç»“åˆï¼Œå®ç°æ›´çµæ´»çš„æ ·å¼å®šåˆ¶ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"theme-wrapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-theme"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.theme-wrapper</span> {
  <span class="hljs-comment">/* å®šä¹‰CSSå˜é‡ */</span>
  <span class="hljs-attr">--primary-color</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attr">--secondary-color</span>: <span class="hljs-number">#ef4444</span>;
  <span class="hljs-attr">--border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.theme-wrapper</span> :<span class="hljs-built_in">deep</span>(.custom-theme) {
  <span class="hljs-comment">/* åœ¨æ·±åº¦é€‰æ‹©å™¨ä¸­ä½¿ç”¨CSSå˜é‡ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--secondary-color);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">var</span>(--border-radius);
}

<span class="hljs-selector-class">.theme-wrapper</span> :<span class="hljs-built_in">deep</span>(.custom-theme .item) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">var</span>(--primary-color);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--border-radius) - <span class="hljs-number">2px</span>);
}
</span></code></pre>
<h2 data-id="heading-4">æ€§èƒ½ä¸æœ€ä½³å®è·µ</h2>
<p>è™½ç„¶<code>:deep()</code>å¾ˆå¼ºå¤§ï¼Œä½†æ»¥ç”¨ä¼šå¯¼è‡´æ ·å¼éš¾ä»¥ç»´æŠ¤å’Œæ€§èƒ½é—®é¢˜ã€‚ä¸‹é¢æ˜¯ä¸€äº›æœ€ä½³å®è·µå»ºè®®ï¼š</p>
<p><strong>1. å°½é‡å°‘ç”¨æ·±åº¦é€‰æ‹©å™¨</strong></p>
<p>æ·±åº¦é€‰æ‹©å™¨ç ´åäº†ç»„ä»¶çš„æ ·å¼å°è£…ï¼Œåº”è¯¥ä½œä¸ºæœ€åçš„æ‰‹æ®µã€‚ä¼˜å…ˆè€ƒè™‘é€šè¿‡propsä¼ é€’æ ·å¼é…ç½®ï¼Œæˆ–è€…ä½¿ç”¨CSSå˜é‡ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- ä¸æ¨èçš„å†™æ³•ï¼šè¿‡åº¦ä½¿ç”¨:deep() --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
:<span class="hljs-built_in">deep</span>(.child-component) {
  <span class="hljs-comment">/* å„ç§æ ·å¼è¦†ç›– */</span>
}

:<span class="hljs-built_in">deep</span>(.child-component .title) {
  <span class="hljs-comment">/* æ›´å¤šæ ·å¼è¦†ç›– */</span>
}

:<span class="hljs-built_in">deep</span>(.child-component .content) {
  <span class="hljs-comment">/* ç»§ç»­è¦†ç›– */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ¨èçš„å†™æ³•ï¼šé€šè¿‡CSSå˜é‡å®šåˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-child"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.custom-child</span> {
  <span class="hljs-attr">--child-primary-color</span>: <span class="hljs-number">#3b82f6</span>;
  <span class="hljs-attr">--child-padding</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attr">--child-border-radius</span>: <span class="hljs-number">8px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>2. ä¿æŒé€‰æ‹©å™¨çš„ç®€æ´æ€§</strong></p>
<p>è¿‡äºå¤æ‚çš„é€‰æ‹©å™¨ä¼šå½±å“æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹åº”ç”¨ä¸­ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* ä¸æ¨èï¼šé€‰æ‹©å™¨è¿‡äºå¤æ‚ */</span>
<span class="hljs-selector-class">.container</span> :<span class="hljs-built_in">deep</span>(.child &gt; .grandchild .item:first-of-type span.text) {
  <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* æ¨èï¼šå°½é‡ç®€åŒ–é€‰æ‹©å™¨ */</span>
<span class="hljs-selector-class">.container</span> :<span class="hljs-built_in">deep</span>(.text-highlight) {
  <span class="hljs-attribute">color</span>: red;
}
</span></code></pre>
<p><strong>3. ä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»å</strong></p>
<p>ä¸ºéœ€è¦æ·±åº¦æ ·å¼çš„å…ƒç´ æ·»åŠ æœ‰æ„ä¹‰çš„ç±»åï¼Œæé«˜ä»£ç å¯è¯»æ€§ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-styling"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ¸…æ™°çš„ç±»åè®©ä»£ç æ›´æ˜“ç†è§£ */</span>
<span class="hljs-selector-class">.custom-styling</span> :<span class="hljs-built_in">deep</span>(.tp-button--primary) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#10b981</span>;
}

<span class="hljs-selector-class">.custom-styling</span> :<span class="hljs-built_in">deep</span>(.tp-button--primary:hover) {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#059669</span>;
}
</span></code></pre>
<h2 data-id="heading-5">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<p>åœ¨å®é™…ä½¿ç”¨<code>:deep()</code>æ—¶ï¼Œå¼€å‘è€…ç»å¸¸ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ã€‚è¿™é‡Œæ€»ç»“å‡ ä¸ªå¸¸è§çš„æƒ…å†µï¼š</p>
<p><strong>é—®é¢˜ä¸€ï¼šæ ·å¼ä¸ç”Ÿæ•ˆ</strong></p>
<p>è¿™ç§æƒ…å†µé€šå¸¸æ˜¯å› ä¸ºé€‰æ‹©å™¨å†™å¾—ä¸å¯¹ï¼Œæˆ–è€…Vueç‰ˆæœ¬ä¸æ”¯æŒã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šVueç‰ˆæœ¬è¿‡ä½ */</span>
<span class="hljs-comment">/* ç¡®ä¿ä½¿ç”¨Vue 3.2+ ç‰ˆæœ¬ */</span>

<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šé€‰æ‹©å™¨ç»“æ„é”™è¯¯ */</span>
<span class="hljs-selector-class">.parent</span> :<span class="hljs-built_in">deep</span>(.child .grandchild) {
  <span class="hljs-comment">/* æ­£ç¡®çš„ç»“æ„ */</span>
}

<span class="hljs-comment">/* å¯èƒ½çš„é—®é¢˜ï¼šç¼ºå°‘å¿…è¦çš„ç±»å */</span>
<span class="hljs-comment">/* æ£€æŸ¥å­ç»„ä»¶æ˜¯å¦çœŸçš„æœ‰è¿™ä¸ªç±»å */</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜äºŒï¼šæ ·å¼è¦†ç›–å†²çª</strong></p>
<p>å½“å¤šä¸ª<code>:deep()</code>é€‰æ‹©å™¨ targeting åŒä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ ·å¼å†²çªã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-comment">/* æ–¹æ¡ˆä¸€ï¼šæé«˜é€‰æ‹©å™¨ç‰¹å¼‚æ€§ */</span>
<span class="hljs-selector-class">.page-container</span> <span class="hljs-selector-class">.section</span> :<span class="hljs-built_in">deep</span>(.target-element) {
  <span class="hljs-attribute">color</span>: blue;
}

<span class="hljs-comment">/* æ–¹æ¡ˆäºŒï¼šä½¿ç”¨!importantï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ */</span>
<span class="hljs-selector-class">.page-container</span> :<span class="hljs-built_in">deep</span>(.target-element) {
  <span class="hljs-attribute">color</span>: blue <span class="hljs-meta">!important</span>;
}

<span class="hljs-comment">/* æ–¹æ¡ˆä¸‰ï¼šè°ƒæ•´æ ·å¼é¡ºåº */</span>
<span class="hljs-comment">/* åé¢çš„æ ·å¼ä¼šè¦†ç›–å‰é¢çš„ */</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>é—®é¢˜ä¸‰ï¼šä¸é¢„å¤„ç†å™¨å†²çª</strong></p>
<p>åœ¨ä½¿ç”¨Sassã€Lessç­‰é¢„å¤„ç†å™¨æ—¶ï¼Œéœ€è¦æ³¨æ„è¯­æ³•å…¼å®¹æ€§ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span>
.parent {
  padding: 20px;

  /* åœ¨Sassä¸­æ­£å¸¸ä½¿ç”¨ */
  :deep(.child) {
    margin: 10px;
    
    .grandchild {
      color: red;
    }
  }
}

/* æˆ–è€…ä½¿ç”¨æ’å€¼è¯­æ³• */
.parent :deep(#{$child-selector}) {
  background: white;
}
<span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-6">ç»“åˆComposition APIä½¿ç”¨</h2>
<p>åœ¨Vue 3çš„Composition APIä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ›´ç¼–ç¨‹å¼çš„æ–¹å¼æ¥å¤„ç†æ ·å¼é—®é¢˜ã€‚</p>
<p>è™½ç„¶ä¸èƒ½ç›´æ¥é€šè¿‡Composition APIä¿®æ”¹å­ç»„ä»¶æ ·å¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€ç±»åå’Œæ ·å¼çš„æ–¹å¼æ¥é…åˆ<code>:deep()</code>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"containerClass"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">third-party-component</span> 
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"componentClass"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"componentStyle"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">variant</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'primary'</span>
  }
})

<span class="hljs-keyword">const</span> containerClass = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'theme-container'</span>: <span class="hljs-literal">true</span>,
  [<span class="hljs-string">`theme-<span class="hljs-subst">${props.variant}</span>`</span>]: <span class="hljs-literal">true</span>
}))

<span class="hljs-keyword">const</span> componentClass = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'custom-component'</span>: <span class="hljs-literal">true</span>,
  [<span class="hljs-string">`variant-<span class="hljs-subst">${props.variant}</span>`</span>]: <span class="hljs-literal">true</span>
}))

<span class="hljs-keyword">const</span> componentStyle = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-string">'--custom-primary'</span>: props.<span class="hljs-property">variant</span> === <span class="hljs-string">'primary'</span> ? <span class="hljs-string">'#3b82f6'</span> : <span class="hljs-string">'#ef4444'</span>
}))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.theme-container</span> :<span class="hljs-built_in">deep</span>(.custom-component) {
  <span class="hljs-comment">/* åŸºç¡€æ ·å¼ */</span>
}

<span class="hljs-selector-class">.theme-container</span><span class="hljs-selector-class">.theme-primary</span> :<span class="hljs-built_in">deep</span>(.custom-component.variant-primary) {
  <span class="hljs-comment">/* ä¸»è¦å˜ä½“æ ·å¼ */</span>
}

<span class="hljs-selector-class">.theme-container</span><span class="hljs-selector-class">.theme-danger</span> :<span class="hljs-built_in">deep</span>(.custom-component.variant-danger) {
  <span class="hljs-comment">/* å±é™©å˜ä½“æ ·å¼ */</span>
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p><code>:deep()</code>é€‰æ‹©å™¨æ˜¯Vue 3æ ·å¼ç³»ç»Ÿä¸­ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥å¤„ç†ç»„ä»¶æ ·å¼ç©¿é€çš„éœ€æ±‚ã€‚ä»Vue 2çš„å„ç§æ··ä¹±è¯­æ³•åˆ°Vue 3çš„ç»Ÿä¸€<code>:deep()</code>ï¼Œè¿™åæ˜ äº†Vueå›¢é˜Ÿåœ¨æ”¹å–„å¼€å‘è€…ä½“éªŒæ–¹é¢çš„æŒç»­åŠªåŠ›ã€‚</p>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„é‡ç‚¹ï¼š<code>:deep()</code>è§£å†³äº†ç»„ä»¶æ ·å¼ä½œç”¨åŸŸå¸¦æ¥çš„é™åˆ¶ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨çˆ¶ç»„ä»¶ä¸­ä¿®æ”¹å­ç»„ä»¶çš„æ ·å¼ã€‚å®ƒçš„è¯­æ³•ç®€æ´æ˜äº†ï¼Œä¸ç°ä»£CSSæ ‡å‡†ä¿æŒä¸€è‡´ï¼Œè€Œä¸”ä¸å„ç§é¢„å¤„ç†å™¨è‰¯å¥½å…¼å®¹ã€‚</p>
<p>ä½†æ˜¯ï¼Œèƒ½åŠ›è¶Šå¤§è´£ä»»è¶Šå¤§ã€‚æˆ‘ä»¬åº”è¯¥è°¨æ…ä½¿ç”¨<code>:deep()</code>ï¼Œä¼˜å…ˆè€ƒè™‘é€šè¿‡ç»„ä»¶æ¥å£(propsã€emits)å’ŒCSSå˜é‡æ¥å®ç°æ ·å¼å®šåˆ¶ã€‚åªæœ‰å½“è¿™äº›æ–¹æ³•éƒ½æ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨<code>:deep()</code>ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåˆç†ä½¿ç”¨<code>:deep()</code>å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç æ›´æ•´æ´ã€æ›´æ˜“ç»´æŠ¤ã€‚è®°ä½æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„æœ€ä½³å®è·µï¼šä¿æŒé€‰æ‹©å™¨ç®€æ´ã€ä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»åã€é¿å…è¿‡åº¦ä½¿ç”¨ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Vue 3çš„<code>:deep()</code>é€‰æ‹©å™¨ã€‚ç°åœ¨ï¼Œå½“ä½ åœ¨é¡¹ç›®ä¸­é‡åˆ°éœ€è¦ä¿®æ”¹å­ç»„ä»¶æ ·å¼çš„æƒ…å†µæ—¶ï¼Œä½ åº”è¯¥èƒ½å¤Ÿè‡ªä¿¡åœ°é€‰æ‹©æœ€åˆé€‚çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæˆ–è€…æœ‰æ›´å¥½çš„ä½¿ç”¨æŠ€å·§ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒã€‚ Happy codingï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹]]></title>    <link>https://juejin.cn/post/7576245169844764712</link>    <guid>https://juejin.cn/post/7576245169844764712</guid>    <pubDate>2025-11-25T09:16:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576245169844764712" data-draft-id="7576338796846137384" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹"/> <meta itemprop="keywords" content="å‰ç«¯,æ•°æ®åˆ†æ,æ•°æ®ç»“æ„"/> <meta itemprop="datePublished" content="2025-11-25T09:16:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾—ç‰©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2392954206960247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ•°å­—åˆ°ç‰ˆé¢ï¼šå¾—ç‰©æ•°æ®äº§å“é‡Œæ•°å­—æ ¼å¼åŒ–çš„é‚£äº›äº‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392954206960247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾—ç‰©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T09:16:15.000Z" title="Tue Nov 25 2025 09:16:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰ è¨€</h2>
<p>åšæ•°æ®å‰ç«¯ï¼Œä½ ä¼šå¾ˆå¿«å»ºç«‹ä¸€ä¸ªå…±è¯†ï¼š</p>
<p>æ€æ ·æŠŠæ¯ç‡¥çš„æ•°å­—ç”¨åˆé€‚çš„æ–¹å¼å±•ç¤ºå‡ºæ¥ï¼Œæ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€è¦åŠ¡ï¼Œä½†è¿™åªæ˜¯èµ·ç‚¹ã€‚</p>
<p>å¦‚æœè¯´<strong>è§„èŒƒçš„æ•°å­—æ’ç‰ˆæ˜¯ä¸­åå°ç³»ç»Ÿçš„â€œåœ°åŸºâ€</strong> ï¼Œä¿è¯äº†ä¿¡æ¯çš„å‡†ç¡®ä¼ è¾¾ï¼›é‚£ä¹ˆ<strong>å¯è§†åŒ–å›¾è¡¨å°±æ˜¯åœ°åŸºä¹‹ä¸Šçš„â€œå»ºç­‘â€</strong> ã€‚åœ°åŸºç¨³å›ºï¼Œå»ºç­‘æ‰èƒ½å‘æŒ¥å…¶åŠŸèƒ½â€”â€”è®©ç”¨æˆ·ä»å¾®è§‚çš„è¯»æ•°ä¸­è§£æ”¾å‡ºæ¥ï¼Œæ›´å¿«é€Ÿåœ°è¯†åˆ«è¶‹åŠ¿ã€å®šä½å¼‚å¸¸ï¼Œä»è€ŒçœŸæ­£ä»æ•°æ®ä¸­è·å–è§„å¾‹ã€‚</p>
<p><strong>ä½†è¿™ç¯‡ä¸»è¦æƒ³èŠçš„ï¼Œä¸æ˜¯é‚£åº§â€œå»ºç­‘â€ï¼Œè€Œæ˜¯è¿™å—å¾€å¾€è¢«å¿½è§†ï¼Œå´å†³å®šäº†æ•´ä¸ªç³»ç»Ÿä¸“ä¸šåº¦çš„â€œåœ°åŸºâ€â€”â€”æ•°å­—æ ¼å¼åŒ–ã€‚</strong></p>
<p>è¯·çœ‹å¾—ç‰©å„ä¸šåŠ¡çº¿é‡Œçš„è¿™äº›æ—¥å¸¸åœºæ™¯ï¼š</p>
<ul>
<li>å•†å“è¯¦æƒ…é¡µï¼šåˆ¸åä»·ã€æŠ˜æ‰£ã€åˆ†æœŸå•ä»·ç­‰ï¼›</li>
<li>æ™ºç ï¼ˆå¾—ç‰©ç¤¾åŒºè¿è¥å¹³å°ï¼‰ã€å¾—æ•°ï¼ˆè‡ªåŠ©å–æ•°å¹³å°ï¼‰ã€æ™ºèƒ½è¿è¥ï¼ˆå¾—ç‰©äº¤æ˜“è¿è¥å¹³å°ï¼‰é‡Œçš„ GMVã€è½¬åŒ–ç‡ã€ç•™å­˜ç‡ã€PVCTRç­‰ï¼›</li>
<li>ç¤¾åŒºé‡Œå¸–å­é˜…è¯»é‡ã€ç‚¹èµæ•°ã€ç²‰ä¸æ•°ã€‚</li>
</ul>
<p>è¿™äº›æ•°å­—è¡¨é¢ä¸Šåªæ˜¯ numberï¼Œä¸€æ—¦å‡ºç°åœ¨å±å¹•ä¸Šï¼Œå°±è‡ªåŠ¨å˜æˆç‰ˆé¢çš„ä¸€éƒ¨åˆ†ï¼š</p>
<p>å¯¹é½æ–¹å¼ã€ä½æ•°é•¿çŸ­ã€å°æ•°å‡ ä½ã€æœ‰æ²¡æœ‰â€œä¸‡ / äº¿â€ã€å•ä½æ€ä¹ˆæ”¾â€”â€”éƒ½ä¼šå½±å“åˆ°æ•´ä¸ªé¡µé¢çš„èŠ‚å¥å’Œä¸“ä¸šæ„Ÿã€‚</p>
<p><strong>æ’ç‰ˆæœ¬è´¨ä¸Šæ˜¯åœ¨ç®¡ç†ä¿¡æ¯å’Œç§©åºï¼šå±‚çº§ã€èŠ‚å¥ã€å¯¹é½ã€ç•™ç™½ã€‚è€Œæ•°å­—ä¸æ˜¯æ’ç‰ˆçš„â€œé™„å±å“â€ï¼Œæ°æ°æ˜¯è¿™äº›åŸåˆ™æœ€å¯†é›†çš„è½½ä½“ã€‚</strong></p>
<p>æœ¬æ–‡ä¸å‘æ•£å»è°ˆæ•°æ®å¯è§†åŒ–ï¼Œåªä¸“æ³¨äºâ€œæ•°å­—æ ¼å¼åŒ–â€è¿™ä¸€ä»¶äº‹ï¼š</p>
<ol>
<li>ä»€ä¹ˆæ˜¯æ•°å­—æ ¼å¼åŒ–ï¼Ÿå®ƒèƒŒåæœ‰å“ªäº›é²œä¸ºäººçŸ¥çš„æ–‡åŒ–å·®å¼‚å’ŒæŠ€æœ¯ç»†èŠ‚ï¼Ÿ</li>
<li>å¦‚æœæ²¡æœ‰ç»Ÿä¸€æ–¹æ¡ˆï¼Œå¤±æ§çš„æ•°å­—ä¼šç»™äº§å“å†³ç­–ã€UI æ’ç‰ˆå’Œå·¥ç¨‹ç»´æŠ¤å¸¦æ¥ä»€ä¹ˆéº»çƒ¦ï¼Ÿ</li>
<li>å¾—ç‰©æ•°æ®å‰ç«¯åœ¨å¾—æ•° / æ™ºç  / æ™ºèƒ½è¿è¥é‡Œï¼Œæ˜¯æ€ä¹ˆæŠŠè¿™ä»¶äº‹ä»â€œå·¥å…·å‡½æ•°â€åšæˆâ€œåŸºç¡€è®¾æ–½â€çš„ï¼Ÿ</li>
<li>æˆ‘ä»¬åŸºäºIntl.NumberFormatå’Œ@dfx/number-format çš„æ–¹æ¡ˆï¼Œæ¶æ„æ˜¯æ€æ ·çš„ï¼Œå¸¦æ¥äº†å“ªäº›å®é™…æ”¶ç›Šï¼Ÿ</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯â€œæ•°å­—æ ¼å¼åŒ–â€ï¼Ÿä¸åªæ˜¯toFixed(2)</h2>
<p>ä¸€æåˆ°æåˆ°æ•°å­—æ ¼å¼åŒ–ï¼Œç¬¬ä¸€ååº”æ˜¯ï¼štoFixed(2)ã€æ‹¼ä¸ª%ã€åŠ ä¸ªÂ¥å°±å®Œäº‹äº†æˆ–è€…é€šè¿‡æ­£åˆ™æ¥æ‹¼æ¥åƒåˆ†ç¬¦ã€‚ä½†åœ¨çœŸå®ä¸–ç•Œé‡Œï¼Œâ€œ<strong>åŒä¸€ä¸ªæ•°é•¿æˆä»€ä¹ˆæ ·</strong>â€è¿œæ¯”æƒ³è±¡å¤æ‚ã€‚</p>
<h4 data-id="heading-2">2.1 æ•°å­—å†™æ³•æœ¬èº«å°±æ˜¯â€œæ–‡åŒ–å·®å¼‚â€</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50ae74d6a809495db83f38d7669db48b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=ZG5XEBI4Hs9EfefFPfT9m%2Bz68Ig%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%25B0%258F%25E6%2595%25B0%25E7%2582%25B9" target="_blank" title="https://zh.wikipedia.org/wiki/%E5%B0%8F%E6%95%B0%E7%82%B9" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/å°æ•°ç‚¹</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/869fea91289547eab5c50a48d72560b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=9SyFwJfxRI6SrACQcir%2B3I0pkZg%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4872c79288c348a3906ceb38efff3d79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=2gzyGZfycuft2%2Bavseg4mxm7yyA%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><strong>å°æ•°åˆ†éš”ç¬¦çš„ç¬¦å·æ¼”å˜å²</strong></p>
<p>æ®Florian Cajori 1928å¹´çš„è‘—ä½œã€Šæ•°å­¦ç¬¦å·å²ã€‹è®°è½½ï¼Œå°æ•°åˆ†éš”ç¬¦ï¼ˆæ—§ç§° separatrixï¼‰çš„æ¼”å˜ç»å†äº†ä¸€ä¸ªæ¼«é•¿çš„æ ‡å‡†åŒ–è¿‡ç¨‹ã€‚</p>
<p>åœ¨æ—©æœŸæ•°å­¦æ–‡çŒ®ä¸­ï¼Œä¸åŒåœ°åŒºå¯¹å°æ•°çš„å¤„ç†æ–¹å¼å„å¼‚ã€‚ä»¥æ•°å€¼ 34.65 ä¸ºä¾‹ï¼Œä¸­ä¸–çºªæ–‡çŒ®å¸¸é‡‡ç”¨åœ¨æ•´æ•°ä¸å°æ•°é—´åŠ æ¨ªçº¿æˆ–åœ¨ä¸ªä½æ•°å­—ä¸Šæ–¹åŠ æ³¨æ ‡è®°çš„æ–¹å¼ã€‚è‹±å›½æ—©æœŸæ›¾é‡‡ç”¨ç«–çº¿â€œ|â€ä½œä¸ºåˆ†éš”ï¼Œååœ¨å°åˆ·ä¸­é€æ¸ç®€åŒ–ä¸ºé€—å·æˆ–ç‚¹ï¼Œè¿™ä¸å½“æ—¶é˜¿æ‹‰ä¼¯æ•°å­¦å®¶ä¸»è¦ä½¿ç”¨é€—å·çš„ä¹ æƒ¯ç›¸å‘¼åº”ã€‚</p>
<p><strong>â€œç‚¹â€ä¸â€œé€—å·â€åˆ†æµçš„å†å²æˆå› </strong></p>
<p>17 ä¸–çºªæœ«è‡³ 18 ä¸–çºªåˆæ˜¯ç¬¦å·æ ‡å‡†åŒ–çš„å…³é”®æ—¶æœŸï¼Œä¹Ÿæ˜¯è‹±ç¾ä½“ç³»ä¸æ¬§æ´²å¤§é™†ä½“ç³»äº§ç”Ÿåˆ†æ­§çš„èµ·ç‚¹ã€‚è¿™ä¸€å·®å¼‚åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ°äº†å¾®ç§¯åˆ†å‘æ˜è€…åŠå…¶ç¬¦å·ä½“ç³»çš„å½±å“ï¼š</p>
<ol>
<li><strong>æ¬§æ´²å¤§é™†ï¼ˆè±å¸ƒå°¼èŒ¨çš„å½±å“ï¼‰</strong> ï¼šå¾·å›½æ•°å­¦å®¶è±å¸ƒå°¼èŒ¨æè®®ä½¿ç”¨â€œç‚¹â€ä½œä¸ºä¹˜æ³•ç¬¦å·ã€‚è¿™ä¸€æè®®ç»ç”±å…‹é‡Œæ–¯è’‚å®‰Â·æ²ƒå°”å¤«ç­‰å­¦è€…çš„æ¨å¹¿ï¼Œåœ¨æ¬§æ´²å¤§é™†æ•™ç§‘ä¹¦ä¸­å¹¿æ³›æ™®åŠã€‚ä¸ºäº†é¿å…ç¬¦å·å«ä¹‰çš„å†²çªï¼Œæ¬§æ´²å¤§é™†æ•°å­¦å®¶æ™®éé‡‡ç”¨äº†â€œé€—å·â€ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ã€‚</li>
<li><strong>è‹±å›½ï¼ˆç‰›é¡¿ä½“ç³»çš„å»¶ç»­ï¼‰</strong> ï¼šè‹±å›½æ•°å­¦ç•Œæœªé‡‡çº³è±å¸ƒå°¼èŒ¨çš„ä¹˜æ³•ç¬¦å·ï¼Œè€Œæ˜¯æ²¿ç”¨â€œXâ€è¡¨ç¤ºä¹˜æ³•ã€‚å› æ­¤ï¼Œâ€œç‚¹â€åœ¨è‹±å›½å¹¶æœªè¢«ä¹˜æ³•å ç”¨ï¼Œå¾—ä»¥ç»§ç»­ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ä½¿ç”¨ã€‚æ®ç»Ÿè®¡ï¼Œ18 ä¸–çºªåˆçš„è‹±å›½æ•™ç§‘ä¹¦ä¸­ï¼Œçº¦ 60% ä½¿ç”¨ç‚¹ï¼Œ40% ä½¿ç”¨é€—å·ï¼›è€Œåˆ°äº† 18 ä¸–çºªæœ«ï¼Œç‚¹å·²æˆä¸ºè‹±å›½çš„ç»å¯¹ä¸»æµã€‚</li>
</ol>
<p><strong>æ ‡å‡†çš„ç¡®ç«‹</strong></p>
<p>å°½ç®¡æ¯”åˆ©æ—¶å’Œæ„å¤§åˆ©ç­‰å›½æ›¾é•¿æœŸåšæŒä½¿ç”¨ç‚¹ä½œä¸ºå°æ•°åˆ†éš”ç¬¦ï¼Œä½†æœ€ç»ˆå‡å‘æ¬§æ´²å¤§é™†çš„ä¸»æµæ ‡å‡†é æ‹¢ï¼Œæ”¹ç”¨äº†é€—å·ã€‚è‡³æ­¤ï¼Œè‹±ç¾ä½¿ç”¨â€œå°æ•°ç‚¹â€ã€æ¬§æ´²å¤§é™†ä½¿ç”¨â€œå°æ•°é€—å·â€çš„æ ¼å±€åŸºæœ¬å®šå‹ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œç›´è‡³20ä¸–çºªåˆï¼Œç¬¦å·çš„ç»Ÿä¸€ä»æœªå®Œå…¨å®Œæˆï¼Œå„ç±»æ–‡çŒ®ä¸­ä»å¯è§ç­‰éæ ‡å‡†å†™æ³•ã€‚</p>
<ul>
<li>è‹±è¯­ç³» / ä¸­å›½å¸¸è§å†™æ³•ï¼š1,234,567.89</li>
<li>å¾ˆå¤šæ¬§æ´²å›½å®¶ï¼š1.234.567,89ï¼ˆç‚¹æ˜¯åƒåˆ†ä½ï¼Œé€—å·æ˜¯å°æ•°ï¼‰</li>
<li>ç‘å£«ä¹ æƒ¯ï¼š1'234.56æˆ–1'234,56ï¼Œç”¨æ’‡å· ' åšåˆ†ç»„ã€‚</li>
</ul>
<p>è¿™äº›è§„åˆ™éƒ½å·²ç»è¢«æ•´ç†è¿›Unicode CLDRå’ŒICUæ•°æ®åº“ï¼Œç°ä»£æµè§ˆå™¨çš„Intl.NumberFormatå°±æ˜¯å»ºç«‹åœ¨è¿™å¥—æ•°æ®ä¹‹ä¸Šï¼Œèƒ½æ ¹æ® locale è‡ªé€‚åº”è¿™äº›å†™æ³•ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸€ä¸ªç®€å•çš„1,000ï¼š</p>
<ul>
<li>åœ¨ç¾å›½äººæˆ–ä¸­å›½äººçœ¼é‡Œæ˜¯â€œ one thousand / ä¸€åƒâ€ï¼›</li>
<li>åœ¨æŸäº›æ¬§æ´²è¯­å¢ƒä¸‹å¯èƒ½è¢«è¯»æˆâ€œä¿ç•™ä¸‰ä½å°æ•°çš„ä¸€ç‚¹é›¶â€ã€‚</li>
</ul>
<p>ä¸€æ—¦ä½ åšç”µå•†ã€è·¨å¢ƒã€æ•°æ®äº§å“ï¼Œè¿™ç§â€œå†™æ³•â€çš„å·®å¼‚ï¼Œå°±ä¸å†æ˜¯å°é—®é¢˜ï¼Œè€Œæ˜¯ç›´æ¥å½±å“å†³ç­–å’Œåˆè§„çš„ä¸œè¥¿ã€‚</p>
<h4 data-id="heading-3">2.2 æ•°å­—ä¸åªæ˜¯â€œå¤§å°â€è¿˜æœ‰è¯­ä¹‰å’Œè¯­æ°”</h4>
<p>åœ¨ UI é‡Œï¼Œæˆ‘ä»¬å…¶å®ç»å¸¸åœ¨è¡¨è¾¾â€œæ•°å­—çš„è¯­æ°”â€ï¼š</p>
<ul>
<li>+12.3%ï¼šä¸æ˜¯çº¯æ•°å­¦â€œåŠ å·â€ï¼Œè€Œæ˜¯ä¸€ç§â€œä¸Šæ¶¨â€çš„ä¿¡å·ï¼Œæ’ç‰ˆä¸Šå¸¸å¸¸é…åˆçº¢/ç»¿é¢œè‰²ï¼›</li>
<li>1.2M / 120 ä¸‡ï¼šä¸ºäº†èŠ‚çœç©ºé—´å’Œé™ä½è®¤çŸ¥è´Ÿæ‹…ï¼Œç”¨ç¼©å†™è¡¨ç¤ºé‡çº§ï¼›</li>
<li>&lt; 0.01ï¼šæå°æ•°å€¼ï¼Œè®©ç”¨æˆ·çŸ¥é“â€œæ¥è¿‘ 0â€ï¼Œè€Œä¸æ˜¯ç›¯ç€ä¸€ä¸² 0.000032 çš„æ•°å­—å°¾å·´å‘å‘†ï¼›</li>
<li>â€” /N/Aï¼šå‘Šè¯‰ç”¨æˆ·â€œè¿™é‡Œæ˜¯æ²¡æ•°æ® / å¼‚å¸¸â€ï¼Œè€Œä¸æ˜¯â€œå°±æ˜¯ 0â€ã€‚</li>
</ul>
<p>è¿™äº›éƒ½å±äºâ€œ<strong>æ•°å­—çš„è¡¨è¾¾</strong>â€è€Œéâ€œ<strong>è¿ç®—ç»“æœ</strong>â€ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åªç”¨toFixedå’Œæ‹¼å­—ç¬¦ä¸²ï¼Œå¾ˆéš¾è®©è¿™äº›è¯­æ°”åœ¨æ•´ä¸ªç³»ç»Ÿå†…ä¿æŒä¸€è‡´ã€‚</p>
<h4 data-id="heading-4">2.3æµè§ˆå™¨å’Œ Node å·²ç»ç»™äº†æˆ‘ä»¬ä¸€ä¸ªâ€œå¼•æ“â€</h4>
<p>ECMAScript 402æ ‡å‡†ä¸­æä¾›çš„ Intl.NumberFormatï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨åšæœ¬åœ°åŒ–æ•°å­—æ ¼å¼åŒ–çš„æ„é€ å™¨ã€‚</p>
<p>å®ƒæ”¯æŒï¼š</p>
<ul>
<li>æ ¹æ® locale åˆ‡æ¢å°æ•°ç‚¹ã€åˆ†ç»„è§„åˆ™ã€æ•°å­—ç¬¦å·ï¼›</li>
<li>è´§å¸æ ¼å¼ï¼šstyle: "currency" + currency: "CNY" | "JPY" | ...ï¼›</li>
<li>ç™¾åˆ†æ¯”ï¼šstyle: "percent"ï¼Œè‡ªåŠ¨ä¹˜ 100 å¹¶åŠ  %ï¼›</li>
<li>ç´§å‡‘è¡¨ç¤ºï¼šnotation: "compact"ï¼Œè¾“å‡º 9.9Mã€9.9äº¿ç­‰ç¼©å†™ï¼›</li>
<li>formatToParts()ï¼šæŠŠæ•°å­—æ‹†æˆæ•´æ•°ã€å°æ•°ç‚¹ã€å°æ•°ã€è´§å¸ç¬¦å·ç­‰ç‰‡æ®µï¼Œæ–¹ä¾¿åšæ›´ç²¾ç»†çš„æ’ç‰ˆã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼Œæ•°å­—æ ¼å¼åŒ–çš„â€œå¼•æ“é—®é¢˜â€å…¶å®å·²ç»æœ‰äººå¸®æˆ‘ä»¬è§£å†³äº†â€”â€”çœŸæ­£éš¾çš„æ˜¯ï¼š</p>
<ul>
<li>æ€ä¹ˆç»“åˆä¸šåŠ¡è¯­ä¹‰ï¼›</li>
<li>æ€ä¹ˆç»“åˆæ’ç‰ˆè§„èŒƒï¼›</li>
<li>æ€ä¹ˆåœ¨å¤šä¸ªç³»ç»Ÿä¹‹é—´åšåˆ°ä¸€è‡´ï¼›</li>
<li>æ€ä¹ˆæ²»ç†â€œä¸ä¹±å†™â€çš„å·¥ç¨‹å®è·µã€‚</li>
</ul>
<p>è¿™å°±å›åˆ°æˆ‘ä»¬è‡ªå·±çš„æ•…äº‹ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€å¦‚æœæ²¡æœ‰ç»Ÿä¸€æ–¹æ¡ˆï¼šä¸‰ä¸ªæ•°æ®äº§å“çš„æ—¥å¸¸</h2>
<p>ä¸‹é¢è¿™å‡ ä¸ªåœºæ™¯ï¼Œç›¸ä¿¡ä½ åœ¨å¾—ç‰©æˆ–ç±»ä¼¼ç”µå•†/æ•°æ®å¹³å°é‡Œä¸€å®šè§è¿‡ã€‚</p>
<p>æƒ³è±¡ä¸€å¼ å…¸å‹åå°é¡µé¢ï¼š</p>
<ul>
<li>é¡¶éƒ¨æ˜¯æ´»åŠ¨çœ‹æ¿ KPI å¡ç‰‡ï¼›</li>
<li>ä¸­é—´æ˜¯æŒ‰å“ç±»/æ¸ é“æ‹†å¼€çš„è¡¨æ ¼ï¼›</li>
<li>ä¸‹æ–¹æ˜¯åˆ›ä½œè€…è¡¨ç°åˆ—è¡¨ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb6e4bcd844a49108c0f3f8e646b6062~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=4Q5vJZa8O5q0rhIvH9xNUWxMqdE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/373cea9240df4ca7b85787500142ff2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=rjADyhgP9W35CoMS2xJtghk2TZc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8335ff638ef948d7924e43d81cb3e1bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=JeJSox8PW2H5BzBU88aAgCwhOto%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<h4 data-id="heading-6">3.1 ä»·æ ¼ï¼šåŒä¸€å¼ è®¢å•ï¼Œä¸åŒç³»ç»Ÿâ€œé•¿å¾—ä¸åŒâ€</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15a4b4e842a84935877591a196779c14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=FoT7%2Bf%2Fr%2Fcllem9%2FyohBf6N7wVs%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>é‚£ä¹ˆï¼Œä»¥å‰æˆ‘ä»¬æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ</p>
<p>åœ¨æ²¡æœ‰ç»Ÿä¸€è§„èŒƒçš„â€œè›®è’æ—¶ä»£â€ï¼Œé¢å¯¹ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ååº”å¾€å¾€æ˜¯ï¼šâ€œè¿™è¿˜ä¸ç®€å•ï¼Ÿæ‹¼ä¸ªå­—ç¬¦ä¸²ä¸å°±å®Œäº‹äº†ï¼Ÿâ€</p>
<p>è¿™ç§ä»£ç ï¼Œä½ ä¸€å®šå†™è¿‡ï¼Œæˆ–è€…åœ¨é¡¹ç›®çš„æŸä¸ªè§’è½å®å®åœ¨åœ¨åœ°è§è¿‡ï¼š</p>
<p><strong>åœºæ™¯ä¸€ï¼šç®€å•ç²—æš´çš„æ‹¼æ¥ä¸€æŠŠæ¢­</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// "æˆ‘ç®¡ä½ ä»€ä¹ˆåœºæ™¯ï¼Œå…ˆæ‹¼ä¸Šå»å†è¯´"</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">formatPrice</span>(<span class="hljs-params">value: number</span>) {
Â Â <span class="hljs-comment">// éšæ‚£åŸ‹é›·ï¼šè¿™é‡Œæ˜¯å…¨è§’ï¿¥è¿˜æ˜¯åŠè§’Â¥ï¼Ÿnull ä¼šå˜æˆ "Â¥null" å—ï¼Ÿ</span>
Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">'Â¥'</span>Â + value.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>);
}
</code></pre>
<p><strong>åœºæ™¯äºŒï¼šä¸ºäº†åƒåˆ†ä½ï¼Œæ‰‹å†™æ­£åˆ™â€œç‚«æŠ€â€</strong></p>
<pre><code class="hljs language-ini" lang="ini">// "ç½‘ä¸Šä¸€æœä¸€å¤§æŠŠçš„æ­£åˆ™ï¼Œçœ‹ç€èƒ½è·‘å°±è¡Œ"
exportÂ constÂ <span class="hljs-attr">formatNumberWithCommas</span>Â = (number:Â numberÂ |Â string) =&gt; {
Â Â constÂ <span class="hljs-attr">parts</span> =Â number.toString().split(<span class="hljs-string">'.'</span>)<span class="hljs-comment">;</span>
Â Â 
Â Â // ç»å…¸çš„æ­£åˆ™æ›¿æ¢ï¼Œä½†è¿™çœŸçš„è¦†ç›–äº†æ‰€æœ‰è´Ÿæ•°ã€æå¤§å€¼åœºæ™¯å—ï¼Ÿ
Â  parts<span class="hljs-section">[0]</span> = parts<span class="hljs-section">[0]</span>.replace(/\B(?=(\d{3})+(?!\d))/g,Â ',')<span class="hljs-comment">;</span>
Â Â 
Â Â // æ‰‹åŠ¨è¡¥é›¶é€»è¾‘ï¼Œä¸ä»…éš¾ç»´æŠ¤ï¼Œè¿˜å®¹æ˜“åœ¨è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ undefinedï¼‰ä¸‹æŠ¥é”™
Â Â ifÂ (parts.lengthÂ &gt;Â 1Â &amp;&amp; parts<span class="hljs-section">[1]</span>?.<span class="hljs-attr">length</span>Â ===Â <span class="hljs-number">1</span>) {
Â  Â  parts<span class="hljs-section">[1]</span> = ${parts<span class="hljs-section">[1]</span>}0<span class="hljs-comment">;</span>
Â  }
Â Â returnÂ parts.join('.')<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™çœ‹èµ·æ¥ä¼¼ä¹â€œèƒ½ç”¨â€ï¼Œå¹¶ä¸”ç”¨èµ·æ¥è²Œä¼¼ä¹Ÿæ²¡å•¥é—®é¢˜ã€‚ä½†å½“ä¸šåŠ¡å¤æ‚åº¦ç¨å¾®ä¸Šæ¥ä¸€ç‚¹æˆ–è€…éœ€è¦åšå›½é™…åŒ–çš„æ—¶å€™ï¼Œé‚£æ¥æ‰‹è¿™ä¸ªéœ€æ±‚çš„åŒå­¦åªèƒ½å‘å‡ºä¸€å¥ã€å“¦å¼ã€ã€‚</p>
<ol>
<li><strong>è§†è§‰ä¸Šçš„â€œå„è‡ªä¸ºæ”¿â€</strong></li>
<li>
<ol>
<li><strong>ç¬¦å·æ‰“æ¶</strong>ï¼š å•†å“å¡ç‰‡ç”¨åŠè§’ â Â¥ï¼Œè¯¦æƒ…é¡µç”¨å…¨è§’ â ï¿¥ï¼Œç”šè‡³æœ‰çš„åœ°æ–¹æ··ç”¨äº† â CNYã€‚</li>
<li><strong>ç²¾åº¦éšå¿ƒ</strong>ï¼š æœ‰çš„å¼€å‘è§‰å¾— â toFixedï¼ˆ2ï¼‰ ä¸¥è°¨ï¼Œæœ‰çš„è§‰å¾— â ã€‚00 å¤ªå¤šä½™ç›´æ¥ç æ‰ï¼Œå¯¼è‡´åŒä¸€ä¸ªé¡µé¢é‡Œï¼Œå¯¼è‡´åŒä¸€ä¸ªé¡µé¢é‡Œï¼Œæ•°å­—åƒé”¯é½¿ä¸€æ ·å‚å·®ä¸é½ã€‚</li>
</ol>
</li>
<li><strong>æ’ç‰ˆä¸Šçš„â€œç§©åºå´©å¡Œâ€</strong></li>
<li>
<ol>
<li>è¯•æƒ³ä¸€ä¸ªè¡¨æ ¼åˆ—ï¼šâ 1299ã€â 1ï¼Œ299.00ã€â 1299.0 æ··åœ¨ä¸€èµ·ã€‚</li>
<li>å¯¹é½åŸºå‡†çº¿å®Œå…¨é”™ä¹±ï¼Œå°¤å…¶åœ¨è¡¨æ ¼é‡Œï¼Œå°±å’Œã€ç‹—å•ƒè¿‡ä¸€æ ·ã€ï¼ŒçŠ¬ç‰™äº¤é”™ï¼Œå‚å·®ä¸é½ï¼Œç”¨æˆ·çš„çœ¼ç›éœ€è¦åœ¨ä¸åŒçš„å°æ•°ä½ä¹‹é—´æ¥å›è·³è·ƒï¼Œé˜…è¯»ä½“éªŒæå·®ã€‚</li>
</ol>
</li>
<li><strong>å›½é™…åŒ–ä¸Šçš„â€œæ­»èƒ¡åŒâ€</strong></li>
<li>
<ol>
<li>è¿™ç§ç¡¬ç¼–ç é€»è¾‘ï¼ˆHardcodeï¼‰ï¼Œå®Œå…¨å µæ­»äº†å›½é™…åŒ–çš„è·¯ã€‚</li>
<li>ä¸€æ—¦ä¸šåŠ¡è¦æ”¯æŒ USDï¼ˆç¾å…ƒï¼‰ã€JPYï¼ˆæ—¥å…ƒï¼Œé»˜è®¤æ— å°æ•°ï¼‰ã€EURï¼ˆæ¬§å…ƒï¼Œéƒ¨åˆ†å›½å®¶ç”¨é€—å·åšå°æ•°ç‚¹ï¼‰ã€‚</li>
<li>æ¯”å¦‚ â 1,234ï¼Œ567.89ï¼ˆè‹±ç¾ï¼‰å’Œ â 1.234.567ï¼Œ89ï¼ˆå¾·æ„ï¼‰ï¼Œè¿™å®Œå…¨ä¸æ˜¯æ”¹ä¸ªç¬¦å·å°±èƒ½è§£å†³çš„ï¼Œè€Œæ˜¯æ•´ä¸ª<strong>æ•°å­—ä¹¦å†™é€»è¾‘</strong>çš„æ ¹æœ¬å·®å¼‚ã€‚</li>
</ol>
</li>
</ol>
<p><strong>æˆ‘ä»¬åŸæœ¬æƒ³çœäº‹å†™çš„å°å‡½æ•°ï¼Œæœ€ç»ˆå˜æˆäº†é˜»ç¢ç³»ç»Ÿæ¼”è¿›çš„æŠ€æœ¯å€ºåŠ¡ã€‚</strong></p>
<h4 data-id="heading-7">3.2çœ‹ä¼¼æ™ºèƒ½çš„â€œä¸‡/äº¿â€ç¼©å†™ï¼Œå…¶å®æ˜¯ç¡¬ç¼–ç çš„é™·é˜±</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70447d69189446d4a63a6de64ae4c95d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=P4GD2l1gaVXlZc7N5qTA8yW3PjY%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨åˆ›ä½œè€…ä¸­å¿ƒæˆ–å†…å®¹ç¤¾åŒºï¼Œæˆ‘ä»¬å¸Œæœ›é˜…è¯»é‡ï¼ˆPVï¼‰èƒ½ç¬¦åˆç”¨æˆ·çš„ç›´è§‰è®¤çŸ¥ï¼š</p>
<ul>
<li><strong>å°æ•°å€¼</strong>ï¼šâ &lt; 10,000 æ—¶ï¼Œæ˜¾ç¤ºå®Œæ•´æ•°å­—ï¼Œç²¾ç¡®åˆ°ä¸ªä½ï¼›</li>
<li><strong>ä¸­é‡çº§</strong>ï¼šâ â‰¥ 10,000 æ—¶ï¼Œç¼©å†™ä¸º â X.X ä¸‡ï¼›</li>
<li><strong>æµ·é‡çº§</strong>ï¼šâ‰¥ 100,000,000 æ—¶ï¼Œç¼©å†™ä¸º â X.X äº¿ã€‚</li>
</ul>
<p>å¦‚æœæ˜¯æµ·å¤–ç‰ˆï¼Œéœ€æ±‚åˆå˜æˆäº†ï¼šâ 1.2k/â 3.4M/5.6Bã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬å†™å‡ºäº†é‚£æ®µç»å…¸çš„â formatPv</p>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">formatPv</span>(count: number) {
Â Â ifÂ (count &lt;Â <span class="hljs-number">10000</span>)Â returnÂ <span class="hljs-built_in">String</span>(count);
Â Â ifÂ (count &lt;Â <span class="hljs-number">100000000</span>)Â returnÂ (count /Â <span class="hljs-number">10000</span>)<span class="hljs-selector-class">.toFixed</span>(<span class="hljs-number">1</span>) +Â 'ä¸‡';
Â Â returnÂ (count /Â <span class="hljs-number">100000000</span>)<span class="hljs-selector-class">.toFixed</span>(<span class="hljs-number">1</span>) +Â 'äº¿';
}
</code></pre>
<p>è¿™æ®µä»£ç é€»è¾‘æ¸…æ™°ï¼Œçœ‹ä¼¼è§£å†³äº†é—®é¢˜ã€‚ä½†åœ¨çœŸå®åœºæ™¯ä¸­ï¼Œå®ƒå´æ˜¯ä¸€ä¸ªâ€œ<strong>Bug åˆ¶é€ æœº</strong>â€ï¼š</p>
<p><strong>1.ä¸´ç•Œç‚¹çš„â€œè§†è§‰çªå˜â€</strong></p>
<ul>
<li>9999 ä¸‹ä¸€ç§’å˜æˆ â 1.0 ä¸‡ï¼Ÿäº§å“ä¼šç«‹åˆ»æ‰¾ä½ ï¼šâ€œè¿™ä¸ªæ•°å±•ç¤ºæ˜¯ä¸æ˜¯ä¸å¤§å¯¹ï¼Œèƒ½ä¸èƒ½9999ä¹‹åæ˜¾ç¤º 1.0w è€Œä¸æ˜¯ 1.0 ä¸‡ï¼Ÿâ€</li>
<li>99950 å››èˆäº”å…¥å˜æˆ â 10.0 ä¸‡ï¼Œè¦ä¸è¦æ˜¾ç¤ºæˆæ›´ç›´è§‚çš„ â 10 ä¸‡ï¼Ÿè¿™äº›å¾®å°çš„ç»†èŠ‚ï¼Œéœ€è¦å †ç Œå¤§é‡çš„ â if-else æ¥ä¿®è¡¥ã€‚</li>
</ul>
<p><strong>2.ç»´æŠ¤ä¸Šçš„â€œå¤åˆ¶ç²˜è´´åœ°ç‹±â€</strong></p>
<ul>
<li>ä¸­æ–‡ç‰ˆå†™ä¸€å¥—ï¼Œè‹±æ–‡ç‰ˆ â formatPvEn å†å†™ä¸€å¥—ï¼Œç­‰å’±ä»¬çš„ä¸šåŠ¡åšå¾€ä¸–ç•Œå„åœ°çš„æ—¶å€™ï¼Œé‚£å¾—è¦å¤šå°‘ formatPvï¼ˆxxï¼‰å‘¢ï¼Ÿ</li>
<li>A é¡¹ç›®æ‹·ä¸€ä»½ï¼ŒB é¡¹ç›®æ‹·ä¸€ä»½ã€‚ç­‰å“ªå¤©äº§å“è¯´â€œä¸‡â€åé¢ä¸ç•™å°æ•°äº†ï¼Œä½ å¾—å» N ä¸ªä»“åº“é‡ŒæŠŠè¿™è¡Œä»£ç æ‰¾å‡ºæ¥æ”¹ä¸€éã€‚æœ€ç»ˆç»“æœå°±æ˜¯ï¼š<strong>å…¨ç«™çš„ç¼©å†™ç­–ç•¥å¤„äºä¸€ç§â€œç›¸ä¼¼ä½†ä¸ä¸€è‡´â€çš„è–›å®šè°”çŠ¶æ€ã€‚</strong></li>
</ul>
<p><strong>3.æ–‡åŒ–é€‚é…ä¸Šçš„â€œç›²åŒºâ€</strong></p>
<ul>
<li>è¿™å¥—é€»è¾‘æ˜¯å…¸å‹çš„â€œç®€ä½“ä¸­æ–‡ä¸­å¿ƒä¸»ä¹‰â€ã€‚</li>
<li><strong>å°åº¦ç”¨æˆ·</strong>çœ‹åˆ°â 100k æ˜¯æ²¡æ„Ÿè§‰çš„ï¼Œä»–ä»¬ä¹ æƒ¯ç”¨ â Lakh ï¼ˆ10 ä¸‡ï¼‰ å’Œ â Crore ï¼ˆ1000 ä¸‡ï¼‰ï¼›</li>
<li><strong>é˜¿æ‹‰ä¼¯è¯­åŒº</strong>å¯èƒ½éœ€è¦ç”¨ä¸œé˜¿æ‹‰ä¼¯æ•°å­—ã€‚</li>
</ul>
<p>è¿™ä¸ä»…ä»…æ˜¯æŠŠâ€œä¸‡â€ç¿»è¯‘æˆâ€œWanâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>æ•°å­—åˆ†çº§é€»è¾‘</strong>åœ¨ä¸åŒæ–‡åŒ–ä¸­å®Œå…¨ä¸åŒï¼Œåœ¨å‰é¢é’ˆå¯¹ç¬¦å·ç³»ç»Ÿæˆ‘ä»¬ä¹Ÿæåˆ°è¿‡ã€‚</p>
<p>æˆ‘ä»¬åœ¨ UI ä¸Šç¡¬å¡äº†ä¸€å¥—â€œåªèƒ½åœ¨ç®€ä½“ä¸­æ–‡é‡Œè‡ªæ´½â€çš„è§„åˆ™ï¼Œè¿™åœ¨å›½é™…åŒ–äº§å“ä¸­æ˜¯è¡Œä¸é€šçš„ã€‚</p>
<h4 data-id="heading-8">3.3 è¢«â€œæŠ¹å¹³â€çš„è¯­ä¹‰â€”0ã€ç©ºå€¼ä¸æå°å€¼</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9829b94976884ec5b64815a5a79b7fb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=Wr55kBhFt%2BGf4GClUCPWCqjOgRE%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>åœ¨å¾—æ•°ï¼ˆè‡ªåŠ©å–æ•°å¹³å°ï¼‰ã€æ™ºç ï¼ˆå¾—ç‰©ç¤¾åŒºè¿è¥å¹³å°ï¼‰ã€æ™ºèƒ½è¿è¥ï¼ˆå¾—ç‰©äº¤æ˜“è¿è¥å¹³å°ï¼‰è¿™ç±»é‡åº¦æ•°æ®çœ‹æ¿ä¸­ï¼Œæˆ‘ä»¬å……æ–¥ç€å„ç§<strong>æ¯”ç‡å‹æŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li><strong>é£æ§ç±»</strong>ï¼šé‰´åˆ«é€šè¿‡ç‡ã€æ‹¦æˆªç‡ï¼›</li>
<li><strong>å±¥çº¦ç±»</strong>ï¼šè¶…æ—¶ç‡ã€æŠ•è¯‰æˆåŠŸç‡ï¼›</li>
<li><strong>å¢é•¿ç±»</strong>ï¼šæ´»åŠ¨è½¬åŒ–ç‡ã€å¤è´­ç‡ã€‚</li>
</ul>
<p>é¢å¯¹è¿™äº›æŒ‡æ ‡ï¼Œä»¥å‰æœ€å¸¸è§çš„å¤„ç†æ–¹å¼æ˜¯å†™ä¸€ä¸ªé€šç”¨çš„ formatPercentï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span>Â <span class="hljs-title function_">formatPercent</span>(<span class="hljs-params">value: number |Â <span class="hljs-literal">null</span>Â |Â <span class="hljs-literal">undefined</span></span>) {
Â Â <span class="hljs-comment">// "æ²¡æ•°æ®å°±å½“ 0 ç®—å‘—ï¼Œçœå¾—æŠ¥é”™"</span>
Â Â <span class="hljs-keyword">return</span>Â ((value ||Â <span class="hljs-number">0</span>) *Â <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) +Â <span class="hljs-string">'%'</span>;
}
</code></pre>
<p>è¿™è¡Œä»£ç è™½ç„¶åªæœ‰ä¸€å¥è¯ï¼Œå´åœ¨ä¸šåŠ¡å±‚é¢çŠ¯äº†<strong>ä¸‰ä¸ªä¸¥é‡çš„é”™è¯¯ï¼š</strong></p>
<p><strong>1. æ··æ·†äº†â€œäº‹å®â€ä¸â€œç¼ºå¤±â€</strong></p>
<ul>
<li>â null ä»£è¡¨æ•°æ®æœªäº§å‡ºæˆ–é“¾è·¯å¼‚å¸¸ï¼ˆå°±æ˜¯æ²¡æ•°ï¼‰ï¼Œè€Œ â 0 ä»£è¡¨ä¸šåŠ¡ç»“æœç¡®å®ä¸ºé›¶ã€‚</li>
<li>ä»£ç ç²—æš´åœ°å°† â null è½¬ä¸º â 0.00%ï¼Œä¼šè®©ç”¨æˆ·è¯¯ä»¥ä¸ºâ€œä»Šå¤©æ²¡äººæŠ•è¯‰â€æˆ–â€œè½¬åŒ–ç‡ä¸º 0â€ï¼Œä»è€Œæ©ç›–äº†èƒŒåçš„ç³»ç»Ÿæ•…éšœæˆ–æ•°æ®å»¶è¿Ÿã€‚</li>
</ul>
<p><strong>2. â€œæŠ¹æ€â€äº†é•¿å°¾æ•°æ®çš„ä»·å€¼</strong></p>
<ul>
<li>å¯¹äº AB æˆ–ç®—æ³•æ¨¡å‹æ¥è¯´ï¼Œâ 0.000032 æ˜¯ä¸€ä¸ªå…·å¤‡ç»Ÿè®¡æ„ä¹‰çš„æ¦‚ç‡å€¼ã€‚</li>
<li>è¢«è¿™è¡Œä»£ç å¼ºè¡Œæˆªæ–­ä¸º â 0.00% åï¼Œä¸šåŠ¡åŒå­¦ä¼šå›°æƒ‘ï¼šâ€œä¸ºä»€ä¹ˆ P å€¼è¿˜èƒ½æ˜¯ 0 çš„å˜›ï¼Ÿâ€è¿™ç›´æ¥æŸå®³äº†æ•°æ®çš„å…¬ä¿¡åŠ›ï¼Œä¸¥é‡ç‚¹æ¥è¯´ï¼Œéƒ½ä¼šå½±å“ä¸šåŠ¡å†³ç­–ã€‚</li>
</ul>
<p><strong>3. é˜»æ–­äº†ç²¾ç»†åŒ–è¡¨è¾¾çš„å¯èƒ½</strong></p>
<p>å½“ä½ æƒ³æŠŠæå°å€¼ä¼˜åŒ–ä¸º â &lt; 0.01% è¿™ç§æ›´ç§‘å­¦çš„è¡¨è¾¾æ—¶ï¼Œä½ é€šè¿‡ vscode ä¸€æœä»£ç ï¼Œ500+ æ–‡ä»¶ï¼Œç›´æ¥å°±ä¸¤çœ¼ä¸€é»‘ã€‚</p>
<p>ä»æ’ç‰ˆè®¾è®¡çš„è§’åº¦çœ‹ï¼Œè¿™ä¸‰è€…æœ¬åº”æ‹¥æœ‰å®Œå…¨ä¸åŒçš„è§†è§‰å±‚çº§ï¼š</p>
<ul>
<li><strong>ç©ºå€¼ï¼ˆNo Dataï¼‰</strong> ï¼šä½¿ç”¨ â â€” æˆ–ç°è‰²å ä½ç¬¦ï¼Œè¡¨ç¤ºâ€œæ­¤å¤„æ— ä¿¡æ¯â€ï¼Œé™ä½è§†è§‰å¹²æ‰°ï¼›</li>
<li><strong>å¼‚å¸¸å€¼ï¼ˆErrorï¼‰</strong> ï¼šä½¿ç”¨ â N/A æˆ–è­¦ç¤ºè‰²ï¼Œæç¤ºç”¨æˆ·â€œæ•°æ®æœ‰é—®é¢˜â€ï¼›</li>
<li><strong>æå°å€¼ï¼ˆTiny Valueï¼‰</strong> ï¼šä½¿ç”¨ â &lt; 0.01% æˆ–è€…â‰ˆ 0ï¼Œä¿ç•™æ•°æ®çš„å­˜åœ¨æ„Ÿï¼ŒåŒæ—¶ä¼ è¾¾â€œæ¥è¿‘äºé›¶â€çš„å‡†ç¡®è¯­ä¹‰ã€‚</li>
</ul>
<p>å¾—æ•°DataHubåœ¨æ²»ç†å±•ç¤ºå±‚æ—¶å‘ç°ï¼Œå¤§é‡â€œåŒä¸€ä¸ªæŒ‡æ ‡åœ¨ä¸åŒé¡µé¢é•¿å¾—ä¸ä¸€æ ·â€ï¼Œæ ¹æºå°±åœ¨äºè¿™äº›å„è‡ªä¸ºæ”¿ã€ç¼ºä¹è¯­ä¹‰åŒºåˆ†çš„æ ¼å¼åŒ–è§„åˆ™ã€‚</p>
<h2 data-id="heading-9">å››ã€ä»â€œå†™å·¥å…·å‡½æ•°â€åˆ°â€œå®šä¹‰å±•ç¤ºè¯­ä¹‰â€</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a75a01a0ad6c4a9092e43f0b2141d167~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=OQX7zmusHsyF9zdVRPa9pp9ct3M%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>å›é¡¾ä¸Šè¿°åœºæ™¯ï¼Œé€è¿‡é‚£äº›æ··ä¹±çš„ä»£ç ç‰‡æ®µï¼Œå¯ä»¥å‘ç°ä¸‰ä¸ªå…±æ€§çš„ç³»ç»Ÿæ€§éš¾é¢˜ï¼š</p>
<ol>
<li><strong>é€»è¾‘ç†µå¢</strong>ï¼šæ¯ä¸ªä¸šåŠ¡çº¿ã€ç”šè‡³æ¯ä¸ªé¡µé¢éƒ½åœ¨é‡å¤é€ è½®å­ã€‚â formatPriceã€â formatPercent éåœ°å¼€èŠ±ï¼Œå‰åç«¯é€»è¾‘å‰²è£‚ï¼Œç»´æŠ¤æˆæœ¬éšç€ä¸šåŠ¡æ‰©å¼ å‘ˆæŒ‡æ•°çº§ä¸Šå‡ã€‚</li>
<li><strong>æ— æ³•æ²»ç†</strong>ï¼šæƒ³æŠŠå…¨ç«™çš„â€œä¸‡ / äº¿â€é˜ˆå€¼ç»Ÿä¸€ï¼Ÿæˆ–è€…æŠŠæŸç§è´¹ç‡çš„ç²¾åº¦ä»ä¸¤ä½æ”¹æˆå››ä½ï¼Ÿè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ä»»åŠ¡ã€‚</li>
<li><strong>ä½“éªŒå¤±æ§</strong>ï¼šè®¾è®¡è§„èŒƒè™½ç„¶å†™ç€â€œç©ºå€¼ç”¨ â€”â€ï¼Œä½†è½å®åˆ°ä»£ç é‡Œå…¨çœ‹å¼€å‘å¿ƒæƒ…ã€‚ç»“æœå°±æ˜¯ç”¨æˆ·åœ¨ä¸åŒç³»ç»Ÿé—´åˆ‡æ¢æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯ä¸€ç§â€œä¼¼æ˜¯è€Œéâ€çš„ç»Ÿä¸€ï¼Œä¸¥é‡å½±å“äº†äº§å“çš„ä¸“ä¸šæ„Ÿã€‚</li>
</ol>
<p><strong>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œåœ¨æ•°æ®åŸŸäº§å“ä¸­ï¼Œæˆ‘ä»¬å¯¹â€œæ ¼å¼åŒ–â€è¿™ä»¶äº‹è¿›è¡Œäº†é‡æ–°å®šä¹‰ï¼š</strong></p>
<p>å®ƒä¸åªæ˜¯å‰ç«¯çš„ UI æ¸²æŸ“é€»è¾‘ï¼Œè€Œæ˜¯æŒ‡æ ‡å®šä¹‰çš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>æˆ‘ä»¬ä¸ä»…è¦å®šä¹‰â€œæŒ‡æ ‡çš„è®¡ç®—å£å¾„â€ï¼Œæ›´è¦å®šä¹‰â€œæŒ‡æ ‡çš„å±•ç¤ºè¯­ä¹‰â€ã€‚</p>
<p>åœ¨ Galaxyï¼ˆæŒ‡æ ‡ç®¡ç†å¹³å°ï¼‰å®šä¹‰å¥½â€œæ•°æ˜¯æ€ä¹ˆç®—å‡ºæ¥çš„â€ä¹‹åï¼Œå¾—æ•° DataHub æ‰¿æ‹…èµ·äº†å®šä¹‰â€œæ•°è¯¥æ€ä¹ˆè¢«çœ‹è§â€çš„èŒè´£ã€‚æˆ‘ä»¬å°†è¿™å±‚é€»è¾‘æŠ½è±¡ä¸º <strong>â€œå±•ç¤ºè¯­ä¹‰â€ï¼ˆVisualization Semanticsï¼‰</strong> ï¼š</p>
<ul>
<li><strong>å®šç±»å‹ï¼ˆTypeï¼‰</strong> ï¼šå®ƒæ˜¯é‡‘é¢ï¼ˆCurrencyï¼‰ã€æ¯”ç‡ï¼ˆRatioï¼‰ï¼Œè¿˜æ˜¯è®¡æ•°ï¼ˆIntegerï¼‰ï¼Ÿ</li>
<li><strong>å®šå•ä½ï¼ˆUnitï¼‰</strong> ï¼šé»˜è®¤æ˜¯å…ƒ / ä¸‡å…ƒï¼Œè¿˜æ˜¯ %ã€â€° ï¼ˆåƒåˆ†æ¯”ï¼‰ æˆ– bp ï¼ˆåŸºç‚¹ï¼‰ï¼Ÿ</li>
<li><strong>å®šç²¾åº¦ï¼ˆPrecisionï¼‰</strong> ï¼šå°æ•°ä½æ˜¯å›ºå®šä¿ç•™ä¸¤ä½ï¼Œè¿˜æ˜¯æ ¹æ®æ•°å€¼å¤§å°åŠ¨æ€æˆªæ–­ï¼Ÿ</li>
<li><strong>å®šçŠ¶æ€ï¼ˆStateï¼‰</strong> ï¼šé‡åˆ° Nullï¼ˆç©ºå€¼ï¼‰ã€Errorï¼ˆå¼‚å¸¸ï¼‰æˆ– Epsilonï¼ˆæå°å€¼ï¼‰ï¼Œå±•ç¤ºå±‚è¯¥å¦‚ä½•å…œåº•ï¼Ÿ</li>
<li><strong>å®šåœºæ™¯ï¼ˆContextï¼‰</strong> ï¼š åœ¨ç©ºé—´å±€ä¿ƒçš„ KPI å¡ç‰‡é‡Œï¼ˆè¿½æ±‚ç®€æ´ï¼‰ï¼Œå’Œéœ€è¦è´¢åŠ¡æ ¸å¯¹çš„ æ˜ç»†è¡¨æ ¼é‡Œï¼ˆè¿½æ±‚ç²¾ç¡®ï¼‰ï¼Œæ˜¯å¦åº”ç”¨ä¸åŒçš„æ¸²æŸ“ç­–ç•¥ï¼Ÿ</li>
</ul>
<p><strong>è¿™æ˜¯ä¸€ç§æ¶æ„ä¸Šçš„å‡ç»´ï¼š</strong></p>
<p>è¿™äº›å…³äºâ€œé•¿ä»€ä¹ˆæ ·â€çš„é€»è¾‘ï¼Œä»æ­¤ä¸å†æ•£è½åœ¨ä¸šåŠ¡ä»£ç çš„ â if-else é‡Œï¼Œè€Œæ˜¯è¢«ç»Ÿä¸€æ”¶æ‹¢åˆ°å…ƒæ•°æ®ç³»ç»Ÿä¸­è¿›è¡Œç®¡ç†ã€‚</p>
<p>ä»è¿™ä¸€åˆ»èµ·ï¼Œæ•°å­—æ ¼å¼åŒ–ä¸å†æ˜¯å‰ç«¯æ¨¡æ¿é‡Œçš„ä¸€ä¸ªå°å·¥å…·ï¼Œè€Œæ˜¯æˆä¸ºäº†å¾—æ•°ä½“ç³»çš„ä¸€é¡¹<strong>åŸºç¡€è®¾æ–½</strong>â€”â€”ä¸€å±‚ç‹¬ç«‹ã€å¯é…ç½®ã€å¯æ²»ç†çš„<strong>æ•°æ®é¢†åŸŸæœåŠ¡</strong>ã€‚</p>
<h2 data-id="heading-10">äº”ã€å¼€å§‹é€ è½®å­ï¼šç«™åœ¨Intl.NumberFormat è‚©è†€ä¸Š</h2>
<p>åœ¨ç€æ‰‹å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆç¡®ç«‹äº†ä¸€ä¸ªåŸåˆ™ï¼š<strong>åº•å±‚èƒ½åŠ›ä¸é€ è½®å­ï¼Œæ‹¥æŠ± Web æ ‡å‡†ã€‚</strong></p>
<p>ECMAScript 402 æ ‡å‡†ä¸­çš„ â Intl.NumberFormat å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªæå…¶å¼ºå¤§çš„æœ¬åœ°åŒ–æ ¼å¼åŒ–å¼•æ“ã€‚å®ƒçš„èƒ½åŠ›è¿œè¶…å¤§å¤šæ•°æ‰‹å†™çš„æ­£åˆ™æ›¿æ¢ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â n =Â <span class="hljs-number">123456.789</span>;


<span class="hljs-comment">// å¾·å›½ï¼šç‚¹å·åˆ†ç»„ã€é€—å·å°æ•°</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'de-DE'</span>).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "123.456,789"</span>


<span class="hljs-comment">// å°åº¦ï¼šlakh/crore åˆ†ç»„</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'en-IN'</span>).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "1,23,456.789"</span>


<span class="hljs-comment">// æ—¥å…ƒè´§å¸ï¼šé»˜è®¤ 0 ä½å°æ•°</span>
<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Intl</span>.<span class="hljs-title class_">NumberFormat</span>(<span class="hljs-string">'ja-JP'</span>, {
Â Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'currency'</span>,
Â Â <span class="hljs-attr">currency</span>:Â <span class="hljs-string">'JPY'</span>,
}).<span class="hljs-title function_">format</span>(n);
<span class="hljs-comment">// "ï¿¥123,457"</span>
</code></pre>
<p>å®ƒå®Œç¾è§£å†³äº†é‚£äº›æœ€è®©å‰ç«¯å¤´ç–¼çš„<strong>å›½é™…åŒ–åº•å±‚é—®é¢˜</strong>ï¼š</p>
<ul>
<li><strong>æ–‡åŒ–å·®å¼‚</strong>ï¼šå…¨çƒå„åœ°çš„åƒåˆ†ä½ã€å°æ•°ç‚¹ã€æ•°å­—ç¬¦å·ä¹ æƒ¯ï¼›</li>
<li><strong>è´§å¸è§„åˆ™</strong>ï¼šä¸åŒå¸ç§çš„æ ‡å‡†å°æ•°ä½ï¼ˆå¦‚æ—¥å…ƒ 0 ä½ï¼Œç¾å…ƒ 2 ä½ï¼‰å’Œç¬¦å·ä½ç½®ï¼›</li>
<li><strong>å¤šæ€æ”¯æŒ</strong>ï¼šå†…ç½®äº†ç™¾åˆ†æ¯”ã€ç´§å‡‘ç¼©å†™ï¼ˆCompact Notationï¼‰ã€ç§‘å­¦è®¡æ•°æ³•ç­‰æ¨¡å¼ï¼›</li>
<li><strong>æ’ç‰ˆèƒ½åŠ›</strong>ï¼šé€šè¿‡ <strong>â formatToPartsï¼ˆï¼‰</strong> å°†æ•°å­—æ‹†è§£ä¸ºæ•°ç»„ï¼ˆæ•´æ•°éƒ¨åˆ†ã€å°æ•°éƒ¨åˆ†ã€ç¬¦å·ç­‰ï¼‰ï¼Œä¸ºç²¾ç»†åŒ–æ’ç‰ˆæä¾›äº†å¯èƒ½ï¼Œæ¯”å¦‚åœ¨å°æ•°æˆ–ç™¾åˆ†æ¯”ç¬¦å·æ¯”æ•´æ•°å° 2 ä¸ªå­—å·ã€‚</li>
</ul>
<p><strong>ä½†æ˜¯ï¼Œå®ƒå¤©ç„¶â€œä¸æ‡‚â€ä¸šåŠ¡ï¼š</strong></p>
<ul>
<li>å®ƒä¸æ‡‚<strong>ä¸­æ–‡çš„ä¹ æƒ¯</strong>ï¼šæ— æ³•ç›´æ¥å®ç°â€œ<strong>å…†/äº¬/å“</strong>â€è¿™ç§ä¸­æ–‡è¶…å¤§æ•°ç¼©å†™é€»è¾‘ï¼ˆæ ‡å‡†æœ€å¤šæ”¯æŒåˆ°äº¿ï¼‰ï¼›</li>
<li>å®ƒä¸æ‡‚<strong>å¾—æ•°çš„è§„èŒƒ</strong>ï¼šä¸çŸ¥é“ â *_rate ç±»å‹çš„æŒ‡æ ‡åœ¨ç©ºå€¼æ—¶è¦æ˜¾ç¤º â "-"ï¼Œåœ¨æå°å€¼æ—¶è¦æ˜¾ç¤º â &lt; 0.01%ï¼›</li>
<li>å®ƒä¸æ‡‚<strong>ä¸šåŠ¡çš„ä¸Šä¸‹æ–‡</strong>ï¼šä¸çŸ¥é“ GMV åœ¨ KPI å¡ç‰‡é‡Œè¦æŒ‰â€œä¸‡å…ƒâ€å±•ç¤ºï¼Œè€Œåœ¨è´¢åŠ¡æŠ¥è¡¨é‡Œå¿…é¡»ç²¾ç¡®åˆ°â€œå˜â€ã€‚</li>
</ul>
<p><strong>å› æ­¤ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆçš„æ¶æ„ç­–ç•¥æ˜¯ï¼š</strong></p>
<p>ä»¥ â Intl.NumberFormat ä¸ºåº•å±‚çš„â€œæ¸²æŸ“å¼•æ“â€ï¼›</p>
<p>åœ¨å…¶ä¹‹ä¸Šæ­å»ºä¸€å±‚â€œæ•°å­—é¢†åŸŸå±‚â€ï¼ˆDomain Layerï¼‰ï¼›</p>
<p>ä¸“é—¨ç”¨äºè½¬è¯‘å¾—ç‰©çš„ä¸šåŠ¡è§„åˆ™å’Œæ’ç‰ˆè¯­ä¹‰ã€‚</p>
<h2 data-id="heading-11">å…­ã€@dfx/number-formatï¼šæ„å»ºæ•°å­—çš„â€œé¢†åŸŸå±‚â€</h2>
<p>åœ¨å¾—ç‰©æ•°æ®å‰ç«¯çš„å¤§ä»“é‡Œï¼Œæˆ‘ä»¬æŠŠè¿™å±‚èƒ½åŠ›å®ç°ä¸ºä¸€ä¸ªç‹¬ç«‹åŒ…ï¼š@dfx/number-formatã€‚ä¸“é—¨æœåŠ¡å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥ç­‰å†…éƒ¨ç³»ç»Ÿã€‚</p>
<p>å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸‰ä»¶äº‹çš„ç»„åˆï¼š</p>
<ul>
<li>ä¸€ä¸ªç»Ÿä¸€å°è£…äº†Intl.NumberFormatçš„<strong>æ ¸å¿ƒå¼•æ“</strong>ï¼ˆå«ç¼“å­˜ã€è§£æï¼‰ï¼›</li>
<li>ä¸€å¥—å¯ä»¥è¢«é…ç½®çš„<strong>ä¸šåŠ¡è§„åˆ™ / é¢„è®¾ ï¼ˆpresetï¼‰å’Œæ’ä»¶ç³»ç»Ÿ</strong>ï¼›</li>
<li>ä¸€ç»„é¢å‘ React å’Œ Node ç¯å¢ƒçš„<strong>æ¥å£</strong>ï¼ˆç»„ä»¶ + Hook + FP å‡½æ•°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">6.1 å£°æ˜å¼å¼€å‘ï¼šæŠŠâ€œæ•°å­—é•¿ä»€ä¹ˆæ ·â€æŠ½è±¡æˆè§„åˆ™</h4>
<p>åœ¨ä¸šåŠ¡å¼€å‘ä¾§ï¼Œæœ€ç»ˆæœŸæœ›çš„ç›®æ ‡æ˜¯ï¼š<strong>è®©å¼€å‘è€…åªå…³å¿ƒâ€œè¿™æ˜¯ä»€ä¹ˆæŒ‡æ ‡â€ï¼Œè€Œä¸å…³å¿ƒâ€œå®ƒè¯¥æ€ä¹ˆå±•ç¤ºâ€ã€‚</strong></p>
<p><strong>åœºæ™¯ä¸€ï¼šåŸºç¡€æ ¼å¼åŒ–</strong></p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç»„ä»¶ï¼Œä»¥å£°æ˜å¼çš„æ–¹å¼è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">importÂ {Â NumberFormatÂ }Â fromÂ '@dfx/number-format'<span class="hljs-comment">;</span>
// æ— è®ºåœ¨å“ªä¸ªé¡µé¢ï¼Œä»·æ ¼éƒ½åªéœ€è¿™æ ·å†™
&lt;NumberFormat
Â Â <span class="hljs-attr">value</span>={price}
Â Â <span class="hljs-attr">options</span>={{Â style:Â <span class="hljs-string">'currency'</span>,Â currency:Â <span class="hljs-string">'CNY'</span> }}
/&gt;
</code></pre>
<p><strong>åœºæ™¯äºŒï¼šåŸºäºè¯­ä¹‰çš„è‡ªåŠ¨æ ¼å¼åŒ–</strong></p>
<p>æ›´è¿›é˜¶çš„ç”¨æ³•æ˜¯ï¼Œåœ¨ç³»ç»Ÿå±‚é¢å®šä¹‰å¥½â€œè§„åˆ™é›†â€ï¼Œä¸šåŠ¡ç»„ä»¶åªéœ€ä¼ å…¥æŒ‡æ ‡åç§°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">NumberFormatProvider</span>,Â <span class="hljs-title class_">AutoMetricNumber</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@dfx/number-format'</span>;
<span class="hljs-comment">// 1. å®šä¹‰è§„åˆ™ï¼šæ‰€æœ‰ "price.cny" ç±»å‹çš„æŒ‡æ ‡ï¼Œéƒ½éµå¾ªäººæ°‘å¸æ ¼å¼</span>
<span class="hljs-keyword">const</span>Â rules = [
Â  {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'price.cny'</span>,Â <span class="hljs-attr">options</span>: {Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'currency'</span>,Â <span class="hljs-attr">currency</span>:Â <span class="hljs-string">'CNY'</span>Â } },
];
<span class="hljs-comment">// 2. æ³¨å…¥ä¸Šä¸‹æ–‡</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">NumberFormatProvider</span>Â <span class="hljs-attr">options</span>=<span class="hljs-string">{{</span>Â <span class="hljs-attr">rules</span>Â }}&gt;</span>
Â  {/* 3. ä¸šåŠ¡ä½¿ç”¨ï¼šå®Œå…¨è§£è€¦ï¼Œåªä¼ è¯­ä¹‰ */}
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">AutoMetricNumber</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"price.cny"</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{price}</span>Â /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">NumberFormatProvider</span>&gt;</span></span>
</code></pre>
<p><strong>æ”¶ç›Šæ˜¾è€Œæ˜“è§ï¼š</strong></p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šCNY è‡ªåŠ¨å¸¦ä¸¤ä½å°æ•°ï¼Œåˆ‡åˆ° JPY è‡ªåŠ¨å˜ 0 ä½å°æ•°ï¼Œé€»è¾‘å®Œå…¨ç”±åº•å±‚æ¥ç®¡ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šå…¨ç«™æ‰€æœ‰ â price.cny çš„åœ°æ–¹ï¼Œåƒåˆ†ä½ã€ç¬¦å·ä½ç½®ä¸¥æ ¼ç»Ÿä¸€ï¼Œç‰ˆé¢èŠ‚å¥è‡ªç„¶å¯¹é½ã€‚</li>
</ul>
<p><strong>åœºæ™¯ä¸‰ï¼šæ‰¹é‡åŒ¹é…æ¯”ç‡æŒ‡æ ‡</strong></p>
<p>å¯¹äºæˆç™¾ä¸Šåƒä¸ªè½¬åŒ–ç‡æŒ‡æ ‡ï¼Œæˆ‘ä»¬ä¸éœ€è¦é€ä¸€å®šä¹‰ï¼Œåªéœ€ä¸€æ¡æ­£åˆ™è§„åˆ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â rules = [
Â Â <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰ä»¥ _rate ç»“å°¾çš„æŒ‡æ ‡ï¼Œè‡ªåŠ¨è½¬ä¸ºç™¾åˆ†æ¯”ï¼Œä¿ç•™2ä½å°æ•°</span>
Â  {Â <span class="hljs-attr">pattern</span>:Â <span class="hljs-regexp">/_rate$/i</span>,Â <span class="hljs-attr">options</span>: {Â <span class="hljs-attr">style</span>:Â <span class="hljs-string">'percent'</span>,Â <span class="hljs-attr">maximumFractionDigits</span>:Â <span class="hljs-number">2</span>Â } },
];


<span class="hljs-comment">// é¡µé¢ä»£ç æå…¶å¹²å‡€</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AutoMetricNumber</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"conversion_rate"</span>Â <span class="hljs-attr">value</span>=<span class="hljs-string">{conversionRate}</span>Â /&gt;</span></span>
</code></pre>
<p>ç©ºå€¼ä¸å¼‚å¸¸å€¼å¦‚ä½•å±•ç¤ºã€æå°å€¼æ˜¯å¦æ˜¾ç¤º &lt; 0.01%ã€ä¸¤ä½å°æ•°ä»å“ªé‡Œæ¥ï¼Œå…¨éƒ¨åœ¨è§„åˆ™ + æ’ä»¶é‡Œå¤„ç†ã€‚</p>
<h4 data-id="heading-13">6.2æ’ä»¶ç³»ç»Ÿï¼šæ”¶å£é‚£äº›â€œå¥‡æ€ªä½†å¸¸è§â€çš„éœ€æ±‚</h4>
<p>å¾—ç‰©çš„ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œå­˜åœ¨å¤§é‡ â Intl æ ‡å‡†æ— æ³•ç›´æ¥è¦†ç›–çš„è¾¹ç¼˜éœ€æ±‚ã€‚æˆ‘ä»¬å°†è¿™äº›éœ€æ±‚ç»Ÿä¸€å»ºæ¨¡ä¸º<strong>æ’ä»¶ï¼ˆFormat Pluginï¼‰</strong> ï¼Œä»‹å…¥æ ¼å¼åŒ–çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<ul>
<li><strong>åƒåˆ†æ¯” / åŸºç‚¹ ï¼ˆbpsï¼‰</strong> ï¼šéœ€åœ¨ â pre-process é˜¶æ®µå°†æ•°å€¼ä¹˜ 1000 æˆ– 10000ï¼›</li>
<li><strong>ä¸­æ–‡å¤§å†™é‡‘é¢</strong>ï¼šä¼šè®¡ä¸åˆåŒåœºæ™¯çš„ç‰¹æ®Šè½¬æ¢ï¼›</li>
<li><strong>æå°å€¼å…œåº•</strong>ï¼šè®¾å®šé˜ˆå€¼ï¼Œå½“æ•°å€¼å°äº â 0.0001 æ—¶ï¼Œâ post-process é˜¶æ®µè¾“å‡º â &lt; 0.01%ï¼›</li>
<li><strong>ä¼šè®¡æ ¼å¼</strong>ï¼šè´Ÿæ•°ä½¿ç”¨æ‹¬å· â ï¼ˆ1ï¼Œ234.56ï¼‰ è€Œéè´Ÿå·ï¼›</li>
<li><strong>åŠ¨æ€ç²¾åº¦ç­–ç•¥</strong>ï¼šæ ¹æ®æ•°å€¼å¤§å°åŠ¨æ€å†³å®šä¿ç•™å‡ ä½å°æ•°ã€‚</li>
</ul>
<p><strong>è¿™å¥—æ’ä»¶æœºåˆ¶çš„æ„ä¹‰åœ¨äºâ€œæ²»ç†â€ï¼š</strong></p>
<p>å®ƒè®©â€œåœ¨æŸä¸ªä¸šåŠ¡ä»“åº“é‡Œå·å·å†™ä¸€ä¸ªç‰¹æ®Šæ­£åˆ™â€æˆä¸ºè¿‡å»å¼ã€‚ä»»ä½•æ–°çš„æ ¼å¼åŒ–éœ€æ±‚ï¼Œéƒ½å¿…é¡»ä»¥æ’ä»¶å½¢å¼æ¥å…¥ï¼Œç”±æ•°æ®å‰ç«¯ç»Ÿä¸€è¯„å®¡ã€æ²‰æ·€ï¼Œæœ€ç»ˆå¤ç”¨åˆ°å…¨ç«™ã€‚</p>
<h4 data-id="heading-14">6.3 å…¨é“¾è·¯æ‰“é€šï¼šä»Galaxyå…ƒæ•°æ®åˆ°UIæ¸²æŸ“</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60ccb2a6339c4eb68d7f2915714592e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6X54mp5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764666974&amp;x-signature=9QYAo6JXNJmsp5kb%2BiheKIS%2BgUc%3D" alt="" loading="lazy"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/></p>
<p>æœ€åï¼Œå°†è¿™å¥—ç³»ç»Ÿä¸å¾—æ•°çš„ä¸­å°èƒ½åŠ›æ‰“é€šï¼ˆä¹Ÿæ˜¯ç›®å‰æˆ‘ä»¬æ­£åœ¨åšçš„ï¼‰ï¼Œå½¢æˆäº†ä¸€æ¡å®Œæ•´çš„æ¸²æŸ“é“¾è·¯ã€‚</p>
<p>åœ¨Galaxyå’Œå¾—æ•°çš„å…ƒæ•°æ®é‡Œï¼ŒæŒ‡æ ‡æœ¬èº«å·²ç»æœ‰codeã€labelã€type ç­‰å­—æ®µã€‚æˆ‘ä»¬åªéœ€è¦å†åŠ ä¸€ç‚¹çº¦å®šï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"metricCode"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"gmv"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"GMV"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"currency"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-comment">// åŸºç¡€ç±»å‹</span>
Â Â <span class="hljs-attr">"meta"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â  Â Â <span class="hljs-attr">"formatConfig"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span><span class="hljs-attr">"style"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"currency"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"maximumFractionDigits"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">2</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>Â 
Â  Â Â <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">[</span><span class="hljs-string">"äº¤æ˜“æŒ‡æ ‡"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
Â  Â Â <span class="hljs-attr">"displayConfig"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>Â <span class="hljs-attr">"table"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"precise"</span><span class="hljs-punctuation">,</span>Â <span class="hljs-attr">"card"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"compact"</span>Â <span class="hljs-punctuation">}</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>å‰ç«¯æ¸²æŸ“æ—¶</strong>ï¼š</p>
<ul>
<li>é…ç½®ä¸‹å‘ï¼šé¡µé¢åŠ è½½æ—¶ï¼Œè·å–æŒ‡æ ‡çš„ â Code åŠå…ƒä¿¡æ¯ï¼Œè½¬æ¢ä¸ºå‰ç«¯çš„ â MetricFormatRule[]ã€‚</li>
<li>ä¸Šä¸‹æ–‡æ³¨å…¥ï¼šåœ¨åº”ç”¨æ ¹èŠ‚ç‚¹é€šè¿‡ â NumberFormatProvider æ³¨å…¥è§„åˆ™é›†ã€‚</li>
<li>å‚»ç“œå¼ä½¿ç”¨ï¼šè¡¨æ ¼ã€å¡ç‰‡ã€å›¾è¡¨ç»„ä»¶åªéœ€æ¶ˆè´¹æŒ‡æ ‡ IDï¼š</li>
</ul>
<p>è¿™æ ·ä¸€æ¥å°±å®ç°äº†çœŸæ­£çš„ã€æ•°æ®é©±åŠ¨ UIã€ï¼š</p>
<ul>
<li>â€œæŒ‡æ ‡é•¿ä»€ä¹ˆæ ·â€åªåœ¨å¾—æ•°å…ƒæ•°æ®ç®¡ç†ä¸­å®šä¹‰ä¸€æ¬¡ã€‚</li>
<li>ä¿®æ”¹å±•ç¤ºè§„åˆ™ï¼ˆå¦‚è°ƒæ•´ç²¾åº¦ï¼‰ï¼Œåªéœ€æ”¹é…ç½®ï¼Œ<strong>æ— éœ€æ‰¹é‡ä¿®æ”¹å‰ç«¯ä»£ç ï¼Œæ›´æ— éœ€é‡æ–°å‘ç‰ˆï¼›</strong></li>
<li>å‰å°ä¸šåŠ¡ä¸ä¸­å°æŠ¥è¡¨çœ‹åˆ°çš„åŒä¸€ä¸ªæŒ‡æ ‡ï¼Œæ ¼å¼æ°¸è¿œæ˜¯ç‰©ç†ä¸Šçš„ä¸€è‡´ã€‚</li>
</ul>
<h2 data-id="heading-15">ä¸ƒã€ç»Ÿä¸€ä¹‹åï¼šé‡å¡‘è®¾è®¡ã€å·¥ç¨‹ä¸ä¸šåŠ¡çš„ä»·å€¼</h2>
<p>ä»æˆ‘ä»¬çš„è§†è§’å‡ºå‘ï¼Œè¿™å¥—ç»Ÿä¸€æ•°å­—æ ¼å¼æ–¹æ¡ˆçš„è½åœ°ï¼Œå¸¦æ¥çš„æ”¶ç›Šè¿œä¸æ­¢â€œä»£ç æ•´æ´â€é‚£ä¹ˆç®€å•ï¼Œå®ƒåœ¨ä¸‰ä¸ªå±‚é¢äº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚</p>
<h4 data-id="heading-16">7.1 å¯¹è®¾è®¡ä¸æ’ç‰ˆï¼šç‰ˆé¢ç»ˆäºå¯æ§äº†</h4>
<p>æ›¾ç»ï¼Œäº§å“éœ€è¦åœ¨æ¯ä¸ªé¡µé¢çš„éªŒæ”¶ä¸­åå¤çº ç»“æ•°å­—çš„å¯¹é½å’Œç²¾åº¦ã€‚ç°åœ¨ï¼Œè®¾è®¡è§„èŒƒåªéœ€åœ¨æ–‡æ¡£ä¸­å®šä¹‰ä¸€æ¬¡ï¼š</p>
<ul>
<li><strong>é‡‘é¢ç±»</strong>ï¼šç»Ÿä¸€ä¿ç•™ä¸¤ä½å°æ•°ï¼Œå¼ºåˆ¶å³å¯¹é½ï¼Œè´§å¸ç¬¦å·åŠè§’åŒ–ï¼›</li>
<li><strong>æ¯”ç‡ç±»</strong>ï¼šç©ºå€¼å…œåº•ä¸º â â€”ï¼Œå¼‚å¸¸å€¼æ˜¾ç¤º â N/Aï¼Œæå°å€¼è½¬è¯‘ä¸º â &lt; 0.01%ï¼›</li>
<li><strong>ç¼©å†™ç­–ç•¥</strong>ï¼šå…¨ç«™ç»Ÿä¸€éµå¾ªâ€œä¸­æ–‡ä¸‡/äº¿ã€è‹±æ–‡ k/M/Bâ€çš„æ¢¯åº¦é€»è¾‘ã€‚</li>
</ul>
<p>å¼€å‘åŒå­¦ä¸å†æ˜¯ã€å¤æ³•æ‰‹æ“ã€ï¼Œè€Œæ˜¯ç›´æ¥æ¥å…¥ç»Ÿä¸€çš„ Preset å’Œæ’ä»¶ã€‚</p>
<p>æ— è®ºæ˜¯çœ‹æ¿ã€è¯¦æƒ…é¡µï¼Œè¿˜æ˜¯å¯¼å‡ºçš„ Excel æŠ¥è¡¨ï¼Œæ•°å­—é£æ ¼ä¿æŒäº†åƒç´ çº§çš„ä¸€è‡´ã€‚ä»è§†è§‰è§’åº¦çœ‹ï¼Œæˆ‘ä»¬ç›¸å½“äº<strong>ç»™æ•°å­—å»ºç«‹äº†ä¸€å¥—Design Token</strong>ï¼šç²¾åº¦ã€å•ä½ã€å ä½ç¬¦éƒ½æœ‰äº†æ ‡å‡†ç´¢å¼•ï¼Œè®©æ•´ä¸ªå¹³å°å‘ˆç°å‡ºé«˜åº¦ç»Ÿä¸€çš„<strong>ä¸“ä¸šæ„Ÿå’ŒèŠ‚å¥æ„Ÿ</strong>ã€‚</p>
<h4 data-id="heading-17">7.2 å¯¹å·¥ç¨‹è´¨é‡ä¸æ•ˆç‡ï¼šä»â€œæœç´¢toFixedâ€åˆ°â€œæ”¹ä¸€å¤„ç”Ÿæ•ˆå…¨ç«™â€</h4>
<p>æ‰€æœ‰æ•°å­—æ ¼å¼é€»è¾‘é›†ä¸­åœ¨ä¸€ä¸ªé¢†åŸŸå±‚å’Œé…ç½®ä¸­å¿ƒã€‚</p>
<p>ä¸€ç±»æŒ‡æ ‡çš„è§„åˆ™å˜æ›´ï¼ˆç²¾åº¦ã€å•ä½ã€ç©ºå€¼ç­–ç•¥ï¼‰å¯ä»¥é…ç½®åŒ–è°ƒæ•´ã€‚</p>
<p>è§„çº¦å¯ä»¥è¿›å…¥ Lintï¼ˆæ•°å­—æ ¼å¼åŒ–é™åˆ¶ï¼‰ / Code Reviewï¼š</p>
<ul>
<li>ç¦æ­¢ç›´æ¥åœ¨ä¸šåŠ¡ä»£ç ä¸­new Intl.NumberFormatã€toFixedæ‹¼å­—ç¬¦ä¸²ï¼›</li>
<li>é¼“åŠ±æ‰€æœ‰æ•°å­—å±•ç¤ºå…¨éƒ¨èµ°@dfx/number-formatä¸ DataHub è§„åˆ™ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å·¥ç¨‹æ²»ç†å±‚é¢çš„ä»·å€¼ï¼šå®ƒå°†â€œä¾èµ–å¼€å‘è€…è‡ªè§‰â€çš„è½¯çº¦æŸï¼Œå˜æˆäº† <strong>â€œå¯é…ç½®ã€å¯ç»´æŠ¤ã€å¯è¿­ä»£â€çš„ç³»ç»Ÿèƒ½åŠ›</strong>ã€‚</p>
<h4 data-id="heading-18">7.3 å¯¹ä¸šåŠ¡å’Œæ•°æ®ä¿¡ä»»ï¼šä»â€œæ€€ç–‘è¿™æ•°æœ‰é—®é¢˜â€åˆ°â€œæ„¿æ„ç”¨æ¥å†³ç­–â€</h4>
<p>ç»Ÿä¸€æ•°å­—æ ¼å¼è¿˜æœ‰ä¸€ä¸ªæœ€éšæ€§ã€å´æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼š<strong>é‡æ„æ•°æ®ä¿¡ä»»ã€‚</strong></p>
<ul>
<li><strong>æ¶ˆé™¤æ­§ä¹‰</strong>ï¼šå‰å°å•†å“ä»·æ ¼ä¸ä¸­å°æŠ¥è¡¨é‡‘é¢å®Œå…¨ä¸€è‡´ï¼Œè¿è¥ä¸å†å› ä¸ºâ€œæ˜¾ç¤ºç²¾åº¦ä¸åŒâ€è€Œå»è´¨ç–‘æ•°æ®å‡†ç¡®æ€§ï¼›</li>
<li><strong>ç²¾å‡†è¯­ä¹‰</strong>ï¼šç©ºå€¼ï¼ˆNullï¼‰å’Œé›¶ï¼ˆZeroï¼‰è¢«æ¸…æ™°åŒºåˆ†ï¼Œé¿å…äº†å› æ ¼å¼é—®é¢˜å¯¼è‡´çš„é”™è¯¯å†³ç­–ã€‚</li>
</ul>
<p>åœ¨å¾—ç‰©ï¼Œ<strong>ä¸¥è°¨æ˜¯éœ€è¦åˆ»åœ¨åŸºå› é‡Œçš„å…³é”®è¯</strong>ã€‚</p>
<p>ä½œä¸ºæ•°æ®å‰ç«¯ï¼Œæˆ‘ä»¬æ·±çŸ¥ï¼š<strong>æ‡‚æ•°æ®ï¼Œå¹¶èƒ½ç”¨æœ€ä¸“ä¸šçš„æ–¹å¼å‘ˆç°æ•°æ®ï¼Œæ˜¯è¿™ä¸€å²—ä½çš„æ ¸å¿ƒç´ å…»</strong>ã€‚ å½“æˆ‘ä»¬ä¸ä»…èƒ½äº¤ä»˜ä»£ç ï¼Œè¿˜èƒ½é€šè¿‡ç²¾å‡†çš„æ•°å­—å±•ç¤ºæ¶ˆé™¤æ­§ä¹‰ã€ä¼ é€’ä¿¡ä»»æ—¶ï¼ŒæŠ€æœ¯ä¸ä¸šåŠ¡ä¹‹é—´å°±å»ºç«‹èµ·äº†ä¸€ç§æ·±å±‚çš„é»˜å¥‘ã€‚</p>
<p>è¿™ç§å¯¹æ•°å­—ç»†èŠ‚çš„æè‡´è¿½æ±‚ï¼Œä¸ä»…æ˜¯å¯¹ç”¨æˆ·ä½“éªŒçš„å°Šé‡ï¼Œæ›´æ˜¯å¯¹å¾—ç‰©â€œæ­£å“æ„Ÿâ€å“ç‰Œå¿ƒæ™ºåœ¨æ•°å­—ä¸–ç•Œçš„å»¶ä¼¸ã€‚</p>
<h2 data-id="heading-19">å…«ã€æ•°å­—ï¼Œæ˜¯ç‰ˆé¢çš„ã€æœ€åä¸€å…¬é‡Œã€</h2>
<p>å›å¤´çœ‹ï¼Œå¾—ç‰©æ•°æ®å‰ç«¯åœ¨å¾—æ•°ã€æ™ºç æ™ºèƒ½è¿è¥è¿™æ¡çº¿åšçš„ï¼Œå…¶å®æœ‰ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li><strong>ç»™äºˆæ•°å­—åº”æœ‰çš„â€œè®¾è®¡å°Šä¸¥â€</strong></li>
</ul>
<p>æˆ‘ä»¬ä¸å†å°†æ•°å­—è§†ä¸ºæ¨¡æ¿å­—ç¬¦ä¸²é‡Œä¸€ä¸ªéšæ—¶å¯æ›¿æ¢çš„â€œé»‘æ´â€ï¼Œè€Œæ˜¯å°†å…¶è§†ä½œä¸å­—ä½“ã€è‰²å½©ã€é—´è·åŒç­‰é‡è¦çš„æ’ç‰ˆå…ƒç´ ï¼Œçº³å…¥ç»Ÿä¸€çš„è®¾è®¡è¯­è¨€ç³»ç»Ÿã€‚</p>
<ul>
<li><strong>ä¸ºæ•°å­—æ„å»ºä¸“å±çš„â€œåŸºç¡€è®¾æ–½â€</strong></li>
</ul>
<p>æˆ‘ä»¬ä»¥ Web æ ‡å‡†â Intl.NumberFormatä¸ºå¼•æ“ï¼Œä»¥ â @dfx/number-formatä¸ºé¢†åŸŸå±‚ï¼Œä»¥å¾—æ•° Schema ä¸ºé…ç½®ä¸­æ¢ï¼Œå°†â€œæ•°å­—å¦‚ä½•å±•ç¤ºâ€è¿™ä¸€å‘½é¢˜ï¼Œä»ç¡¬ç¼–ç çš„æ³¥æ½­ä¸­è§£æ”¾å‡ºæ¥ï¼Œè½¬å˜ä¸ºä¸€ç§<strong>å¯é…ç½®ã€å¯æ²»ç†ã€å¯æ¼”è¿›çš„ç³»ç»Ÿèƒ½åŠ›ã€‚</strong></p>
<p>å½“ä½ å†å›å¤´çœ‹å…¬å¸äº§å“çš„å„ä¸ªé¡µé¢â€”â€”</p>
<ul>
<li>å‰å°å•†å“è¯¦æƒ…é¡µçš„ä»·æ ¼å’Œåˆ¸åä»·ï¼›</li>
<li>ç¤¾åŒºé‡Œçš„é˜…è¯»å’Œç‚¹èµæ•°å­—ï¼›</li>
<li>æ™ºç çš„ç­–ç•¥çœ‹æ¿ï¼›</li>
<li>å¾—æ•°çš„è‡ªåŠ©åˆ†ææŠ¥è¡¨ã€‚</li>
</ul>
<p>ä½ ä¼šå‘ç°å®ƒä»¬æ‹¥æœ‰äº†ä¸€ä¸ªå…±åŒçš„ç‰¹å¾ï¼š</p>
<p><strong>è¿™äº›æ•°å­—ä¸å†æ˜¯å„è¯´å„è¯çš„å™ªç‚¹ï¼Œè€Œæ˜¯å…±åŒæ“ç€åŒä¸€ç§ç²¾å‡†ã€ä¼˜é›…çš„â€œæ’ç‰ˆè¯­è¨€â€ã€‚</strong></p>
<p><strong>è¿™å°±æ˜¯æˆ‘ä»¬åšâ€œæ•°å­—æ ¼å¼åŒ–â€çš„åˆè¡·ï¼šç”¨æŠ€æœ¯çš„ç¡®å®šæ€§ï¼Œæ¢å–ä¸šåŠ¡çš„ä¸“æ³¨åŠ›ã€‚</strong></p>
<p>æ­¤æ—¶æ­¤åˆ»ï¼Œå½¼æ—¶å½¼åˆ»ï¼Œä½œä¸ºå‰ç«¯å¼€å‘ï¼Œä½ å¯ä»¥åšå®šåœ°è¯´å‡ºï¼šæˆ‘è¿™å±•ç¤ºçš„æ²¡é—®é¢˜ï¼Œæ˜¯æ•°å‡ºé—®é¢˜äº†ï½</p>
<h2 data-id="heading-20">ä¹ã€èµ°å‡ºæ•°æ®åŸŸï¼šä»å†…éƒ¨é—¨æˆ·åˆ°å…¨ä¸šåŠ¡</h2>
<p>å‰é¢çš„ç¯‡å¹…ï¼Œæ›´å¤šå›´ç»•ç€å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥ç­‰ä¸­åå°ç³»ç»Ÿå±•å¼€ã€‚åœ¨è¿™äº›åœºæ™¯ä¸‹ï¼Œæ•°å­—æ ¼å¼åŒ–çš„æ ¸å¿ƒç”¨æˆ·æ˜¯è¿è¥ã€åˆ†æå¸ˆå’Œç®—æ³•åŒå­¦â€”â€”å¸®åŠ©ä»–ä»¬é€è¿‡æ•°æ®çœ‹æ¸…ä¸šåŠ¡èµ°åŠ¿ã€‚</p>
<p>ä½†è¿™å¥—èƒ½åŠ›å¹¶ä¸åº”å±€é™äºâ€œåå°â€ã€‚å®ƒå®Œå…¨å…·å¤‡èµ°å‡ºæ•°æ®åŸŸçš„æ½œåŠ›ï¼Œæˆä¸ºå¾—ç‰©å…¨ä¸šåŠ¡çº¿å…±äº«çš„ä¸€å±‚<strong>å…³é”®åŸºç¡€è®¾æ–½</strong>ã€‚</p>
<h4 data-id="heading-21">9.1 è·¨ä¸šåŠ¡çº¿ï¼šä»â€œè¿è¥çœ‹æ¿â€èµ°å‘â€œäº¤æ˜“é“¾è·¯â€</h4>
<p>ç›®å‰@dfx/number-format è™½ç„¶ç”Ÿé•¿äºæ•°æ®åœŸå£¤ï¼Œä½†å…¶è§£å†³çš„é—®é¢˜æ˜¯é€šç”¨çš„ã€‚æœªæ¥ï¼Œå®ƒå¯ä»¥è‡ªç„¶åœ°æ¸—é€åˆ°æ›´å¹¿é˜”çš„ä¸šåŠ¡åœºæ™¯ï¼š</p>
<ul>
<li><strong>äº¤æ˜“åŸŸ</strong>ï¼š ç»Ÿä¸€å•†å“è¯¦æƒ…é¡µã€ç»“ç®—é¡µçš„ä»·æ ¼ã€åˆ†æœŸè´¹ç‡ã€ç¨è´¹å±•ç¤ºé€»è¾‘ï¼›</li>
<li><strong>ç¤¾åŒºåŸŸ</strong>ï¼š æ ‡å‡†åŒ–ç¤¾åŒºè¯¦æƒ…é¡µä¸­çš„é£é™©åˆ†ã€é˜ˆå€¼ã€å‘½ä¸­ç‡ç²¾åº¦ï¼›</li>
<li><strong>å®¢æœåŸŸ</strong>ï¼š è§„èŒƒèµ”ä»˜é‡‘é¢ã€å·¥å•æ—¶é•¿çš„å±•ç¤ºå£å¾„ã€‚</li>
</ul>
<p><strong>è¿™åœ¨å·¥ç¨‹ä¸Šæ„å‘³ç€ä¸€æ¬¡â€œå‡ç»´â€ï¼š</strong></p>
<ul>
<li><strong>ä¾èµ–å‡çº§</strong>ï¼šå°† â @dfx/number-format ä»æ•°æ®åŸŸç§æœ‰åŒ…æå‡ä¸ºå…¬å¸çº§çš„åŸºç¡€ä¾èµ–ï¼›</li>
<li><strong>å¼€å‘èŒƒå¼</strong>ï¼šæ–°ä¸šåŠ¡åœ¨å¤„ç†æ•°å­—å±•ç¤ºæ—¶ï¼Œé»˜è®¤åŠ¨ä½œä¸å†æ˜¯â€œæ‰‹å†™ä¸€ä¸ª format å‡½æ•°â€ï¼Œè€Œæ˜¯æŸ¥é˜…ç°æœ‰çš„ Preset å’Œæ’ä»¶ï¼›</li>
</ul>
<p><strong>æœ€ç»ˆå¸¦æ¥çš„ä½“éªŒè´¨å˜æ˜¯ï¼š</strong></p>
<p>ç”¨æˆ·æ— è®ºæ˜¯åœ¨å¾—ç‰© Appçš„å‰å°é¡µé¢ï¼Œè¿˜æ˜¯åœ¨å†…éƒ¨çš„å„ç±»ç®¡ç†ç³»ç»Ÿä¸­ï¼Œçœ‹åˆ°çš„æ•°å­—éƒ½æ‹¥æœ‰<strong>åŒä¸€å¥—å‘¼å¸æ„Ÿå’Œè§†è§‰ä¹ æƒ¯</strong>ã€‚è¿™ç§è·¨ç«¯çš„ä¸€è‡´æ€§ï¼Œæ˜¯å“ç‰Œä¸“ä¸šæ„Ÿæœ€ç›´æ¥çš„ä½“ç°ã€‚</p>
<h4 data-id="heading-22">9.2 è·¨åœ°åŒºä¸æ±‡ç‡ï¼šæ„å»ºç‹¬ç«‹çš„â€œå…¨çƒåŒ–ä»·æ ¼èƒ½åŠ›â€</h4>
<p>éšç€å¾—ç‰©ä¸šåŠ¡çš„å‡ºæµ·ï¼Œå¤šåœ°åŒºã€å¤šå¸ç§æ˜¯ç»•ä¸å¼€çš„æŒ‘æˆ˜ã€‚æ­¤æ—¶ï¼Œæ•°å­—é¢†åŸŸå±‚ä¸ä»…è¦è´Ÿè´£â€œé•¿ä»€ä¹ˆæ ·â€ï¼Œæ›´è¦æ‰¿æ‹…èµ·â€œå±•ç¤ºç­–ç•¥â€çš„èŒè´£ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥è®¾æƒ³ä¸€ä¸ª**ã€Œå…¨çƒåŒ–ä»·æ ¼ç»„ä»¶ã€**ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;MultiRegionPrice
Â  <span class="hljs-attr">skuId</span>=<span class="hljs-string">"123456"</span>
Â  <span class="hljs-attr">basePriceCny</span>={price}
Â  <span class="hljs-attr">regions</span>={[
Â  Â  {Â locale:Â <span class="hljs-string">'zh-CN'</span>,Â currency:Â <span class="hljs-string">'CNY'</span>Â },
Â  Â  {Â locale:Â <span class="hljs-string">'en-US'</span>,Â currency:Â <span class="hljs-string">'USD'</span>Â },
Â  Â  {Â locale:Â <span class="hljs-string">'ja-JP'</span>,Â currency:Â <span class="hljs-string">'JPY'</span>Â },
Â  ]}
/&gt;
</code></pre>
<p>è¿™ä¸ªç»„ä»¶å°†è´Ÿè´£ä¸¤å±‚é€»è¾‘çš„è§£è€¦ï¼š</p>
<ul>
<li><strong>è®¡ç®—å±‚</strong>ï¼š è´Ÿè´£å®æ—¶æ±‡ç‡æ¢ç®—ã€å¤šå¸ç§ä»·æ ¼è®¡ç®—ã€‚</li>
<li><strong>å±•ç¤ºç­–ç•¥å±‚</strong>ï¼š</li>
<li>
<ul>
<li><strong>å¯¹ç…§å±•ç¤º</strong>ï¼š æ˜¯å¦æ˜¾ç¤ºâ€œåŸå¸ç§ + æœ¬åœ°å‚è€ƒä»·â€ï¼ˆå¦‚ â JPÂ¥ 20,000 ï¼ˆâ‰ˆ $135.00ï¼‰ï¼‰ï¼›</li>
<li><strong>æ–‡åŒ–é€‚é…</strong>ï¼š æ˜¯å¦éµå¾ªå½“åœ°çš„â€œå¿ƒç†ä»·ä½â€ç­–ç•¥ï¼ˆå¦‚ â <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>199.99</mn><mi>v</mi><mi>s</mi><mtext>â </mtext></mrow><annotation encoding="application/x-tex">199.99 vs â </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">199.99</span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">s</span><span class="mord">â </span></span></span></span></span>200ï¼‰ï¼›</li>
<li><strong>æ ¼å¼æ¸²æŸ“</strong>ï¼š æœ€ç»ˆè°ƒç”¨ â @dfx/number-formatï¼Œç¡®ä¿æ—¥å…ƒæ— å°æ•°ã€ç¾å…ƒæœ‰å°æ•°ã€åˆ†èŠ‚å·æ­£ç¡®ã€‚</li>
</ul>
</li>
</ul>
<p>ä»å·¥ç¨‹è§†è§’çœ‹ï¼Œè¿™é¿å…äº†â€œæ±‡ç‡ç®—å¯¹äº†ã€æ•°å­—æ’ç‰ˆå…¨ä¹±äº†â€çš„å°´å°¬ï¼›ä»äº§å“è§†è§’çœ‹ï¼Œè¿™æ­£æ˜¯å¾—ç‰©æ²‰æ·€â€œ<strong>å‡ºæµ·æŠ€æœ¯å¥—ä»¶</strong>â€çš„é‡è¦ä¸€æ­¥ï¼ˆæ¯”å¦‚å›½é™…æ™ºèƒ½è¿è¥ï¼‰ã€‚</p>
<h4 data-id="heading-23">9.3 æ—¶é—´ä¸æ—¥æœŸï¼šç”¨åŒæ ·çš„æ€è·¯ï¼Œå»åšç¬¬äºŒæ¡â€œæ ¼å¼åŒ–ä¸»çº¿â€</h4>
<p>æ•°å­—æ˜¯ä¸€ç±»æŒ‘æˆ˜ï¼Œâ€œæ—¶é—´â€åˆ™æ˜¯å¦ä¸€ç±»ã€‚è·¨æ—¶åŒºè½¬æ¢ã€ç›¸å¯¹æ—¶é—´ï¼ˆæ­¤åˆ»ï¼‰ã€ä¸åŒåœ°åŒºçš„æ—¥æœŸå†™æ³•ï¼ˆâ DD/MM vs â MM/DDï¼‰ï¼Œå…¶å¤æ‚åº¦ä¸æ¯«ä¸äºšäºæ•°å­—ã€‚</p>
<p>æ—¢ç„¶æµè§ˆå™¨æä¾›äº†<strong>Intl.DateTimeFormat</strong>ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å¤åˆ»æ•°å­—é¢†åŸŸå±‚çš„æˆåŠŸè·¯å¾„ï¼Œå†èµ¢ä¸€æ¬¡ï¼š</p>
<ul>
<li><strong>åŸºç¡€è®¾æ–½</strong>ï¼šæ„å»º â @dfx/date-formatï¼Œç»Ÿä¸€å°è£…æ—¶é—´æ ¼å¼åŒ–ä¸ç›¸å¯¹æ—¶é—´é€»è¾‘ï¼›</li>
<li><strong>é¢„è®¾ç®¡ç†</strong>ï¼šå®šä¹‰æ ‡å‡† Presetï¼ˆå¦‚â€œè¿è¥æŠ¥è¡¨ç”¨ â YYYY-MM-DDâ€ã€â€œC ç«¯åŠ¨æ€ç”¨ â ä»Šå¤© 12:30â€ï¼‰ï¼›</li>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼šæä¾› â  å’Œ â  ç»„ä»¶ï¼›</li>
<li><strong>å…ƒæ•°æ®æ‰“é€š</strong>ï¼šåœ¨å¾—æ•°çš„å…ƒæ•°æ®ä¸­ï¼Œé’ˆå¯¹æ—¶é—´å‹çš„ç»´åº¦ä¹ŸåŒæ ·è¿›è¡Œé…ç½®ã€‚</li>
</ul>
<p>è¿™æ ·ï¼Œæ•°æ®å‰ç«¯çš„å±•ç¤ºå±‚å°±æ‹¥æœ‰äº†ä¸¤æ¡æ¸…æ™°çš„ä¸»çº¿ï¼š</p>
<ul>
<li><strong>æ•°å€¼ä¸»çº¿</strong>ï¼šâ Intl.NumberFormat â†’ â @dfx/number-format â†’Â <strong>æ•°å­—å±•ç¤ºè§„èŒƒ</strong></li>
<li><strong>æ—¶é—´ä¸»çº¿</strong>ï¼šâ Intl.DateTimeFormat â†’ â @dfx/date-format â†’Â <strong>æ—¶é—´å±•ç¤ºè§„èŒƒ</strong></li>
</ul>
<p>æœªæ¥ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥æŠ½è±¡å‡ºæ›´ä¸Šå±‚çš„ â @dfx/data-formatï¼Œè®©â€œä»»ä½•å­—æ®µè¯¥æ€ä¹ˆå±•ç¤ºâ€ï¼Œå®Œå…¨ç”± Schema é…ç½® + é¢†åŸŸå±‚è§„åˆ™å…±åŒå†³å®šã€‚</p>
<h2 data-id="heading-24">åã€æœ€åï¼šæŠŠâ€œå±•ç¤ºâ€è¿™ä»¶äº‹åšåˆ°æè‡´</h2>
<p>å¦‚æœåªçœ‹ä»£ç ï¼Œæˆ‘ä»¬åšçš„äº‹æƒ…ä¼¼ä¹å¾ˆç®€å•ï¼š</p>
<p>æŠŠ â Intl æ ‡å‡†ç”¨åˆ°æè‡´ï¼Œå°è£…äº†ä¸€å±‚é¢†åŸŸåº“ï¼Œå¹¶æ¥é€šäº†å…ƒæ•°æ®é…ç½®ï¼Œå†™äº†ä¸ªå·¥å…·åº“ã€‚</p>
<p>ä½†å¦‚æœä»äº§å“ä½“éªŒå’Œå·¥ç¨‹æ¼”è¿›çš„è§’åº¦çœ‹ï¼Œæˆ‘ä»¬å…¶å®å®Œæˆäº†ä¸€æ¬¡<strong>åŸºç¡€è®¾æ–½çš„å‡çº§</strong>ï¼š</p>
<p>æŠŠå‰ç«¯å¼€å‘ä¸­æœ€çç¢ã€æœ€å®¹æ˜“è¢«å¿½è§†çš„â€œæ•°å­—ä¸æ—¶é—´å±•ç¤ºâ€ï¼Œä»â€œåˆ°å¤„ç²˜è´´çš„å°å·¥å…·â€ï¼Œå‡çº§æˆäº†â€œæœ‰ç»Ÿä¸€è§„èŒƒã€æœ‰å¯è§‚æµ‹æ€§ã€æœ‰è¿­ä»£ç©ºé—´çš„ç³»ç»Ÿèƒ½åŠ›â€ã€‚</p>
<p>ç°åœ¨ï¼Œè¿™å¥—èƒ½åŠ›å·²ç»è®©å¾—æ•°ã€æ™ºç ã€æ™ºèƒ½è¿è¥çš„éƒ¨åˆ†æ¨¡å—é•¿å‡ºäº†ç»Ÿä¸€çš„â€œæ•°å­—æ°”è´¨â€ã€‚</p>
<p>æœªæ¥ï¼ŒæœŸæœ›å®ƒèƒ½å¤Ÿèµ°å‡ºæ•°æ®å¹³å°ï¼Œæ”¯æ’‘å¾—ç‰©æ›´å¹¿æ³›çš„ä¸šåŠ¡åœºæ™¯ï¼Œ<strong>è®©åŒä¸€ä»¶å•†å“ï¼Œåœ¨ä¸åŒåœ°åŒºã€ä¸åŒè¯­è¨€ã€ä¸åŒç»ˆç«¯ä¸Šï¼Œæ—¢ç®—å¾—å¯¹ï¼Œåˆçœ‹å¾—é¡ºã€‚</strong></p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcldr.unicode.org%2F" target="_blank" title="https://cldr.unicode.org/" ref="nofollow noopener noreferrer">cldr.unicode.org/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.douban.com%2Fsubject%2F1927608%2F" target="_blank" title="https://book.douban.com/subject/1927608/" ref="nofollow noopener noreferrer">book.douban.com/subject/192â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2FAskHistorians%2Fcomments%2F104tkkj%2Fwhy_is_it_that_some_countries_use_the_and_as_a%2F%3Ftl%3Dzh-hans" target="_blank" title="https://www.reddit.com/r/AskHistorians/comments/104tkkj/why_is_it_that_some_countries_use_the_and_as_a/?tl=zh-hans" ref="nofollow noopener noreferrer">www.reddit.com/r/AskHistorâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fecma-international.org%2Fpublications-and-standards%2Fstandards%2Fecma-402%2F" target="_blank" title="https://ecma-international.org/publications-and-standards/standards/ecma-402/" ref="nofollow noopener noreferrer">ecma-international.org/publicationâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fglobalization%2Flocale%2Fnumber-formatting" target="_blank" title="https://learn.microsoft.com/en-us/globalization/locale/number-formatting" ref="nofollow noopener noreferrer">learn.microsoft.com/en-us/globaâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%25B0%258F%25E6%2595%25B8%25E9%25BB%259E" target="_blank" title="https://zh.wikipedia.org/wiki/%E5%B0%8F%E6%95%B8%E9%BB%9E" ref="nofollow noopener noreferrer">zh.wikipedia.org/wiki/%E5%B0â€¦</a></li>
</ul>
<h4 data-id="heading-25">å¾€æœŸå›é¡¾</h4>
<ol>
<li>
<p>ä¸€æ–‡è§£æå¾—ç‰©è‡ªå»º Redis æœ€æ–°æŠ€æœ¯æ¼”è¿›</p>
</li>
<li>
<p>Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>RNä¸hawkç¢°æ’çš„ç«èŠ±ä¹‹C++å¼‚å¸¸æ•è·ï½œå¾—ç‰©æŠ€æœ¯</p>
</li>
<li>
<p>å¾—ç‰©TiDBå‡çº§å®è·µ</p>
</li>
<li>
<p>å¾—ç‰©ç®¡ç†ç±»ç›®é…ç½®çº¿ä¸ŠåŒ–ï¼šä»ä¸šåŠ¡ç—›ç‚¹åˆ°æŠ€æœ¯å®ç°</p>
</li>
</ol>
<h4 data-id="heading-26">æ–‡ /æŸé”</h4>
<p>å…³æ³¨å¾—ç‰©æŠ€æœ¯ï¼Œæ¯å‘¨æ›´æ–°æŠ€æœ¯å¹²è´§</p>
<p>è¦æ˜¯è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œæ¬¢è¿è¯„è®ºè½¬å‘ç‚¹èµï½</p>
<p>æœªç»å¾—ç‰©æŠ€æœ¯è®¸å¯ä¸¥ç¦è½¬è½½ï¼Œå¦åˆ™ä¾æ³•è¿½ç©¶æ³•å¾‹è´£ä»»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°]]></title>    <link>https://juejin.cn/post/7576155969606303779</link>    <guid>https://juejin.cn/post/7576155969606303779</guid>    <pubDate>2025-11-25T03:53:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155969606303779" data-draft-id="7574967214128906266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,MCP"/> <meta itemprop="datePublished" content="2025-11-25T03:53:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:53:32.000Z" title="Tue Nov 25 2025 03:53:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡åˆ†äº«ã€Š<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ã€‹ä¸­ç¬”è€…ç³»ç»Ÿä»‹ç»äº†åŸºäº LangChain 1.0 æ„å»ºå¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼Œå¹¶å®Œæˆäº†æ™ºèƒ½é—®ç­”åŸºç¡€æ¨¡å—çš„å¼€å‘ï¼Œå®ç°äº†å¯¹è¯å†å²ç®¡ç†ã€æµå¼å“åº”ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>æœ¬ç¯‡ç¬”è€…å°†åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å®ç°å¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„ä¸¤ä¸ªé‡è¦æ‰©å±•åŠŸèƒ½ï¼š<strong>å›¾ç‰‡å†…å®¹åˆ†æ</strong>ä¸<strong>è¯­éŸ³ä¿¡æ¯è½¬å†™</strong>ã€‚é€šè¿‡å¼•å…¥å¯¹å›¾åƒå’Œè¯­éŸ³æ•°æ®çš„å¤„ç†èƒ½åŠ›ï¼Œè®© RAG ç³»ç»ŸçœŸæ­£å…·å¤‡ç†è§£å’Œå“åº”å¤šç§æ¨¡æ€ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p>
<p><strong>å­¦ä¹ å‰ç½®è¦æ±‚</strong>ï¼šæœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…ˆæŒæ¡ç¬¬ä¸€ç¯‡ä¸­ä»‹ç»çš„é¡¹ç›®æ¶æ„ã€ç¯å¢ƒé…ç½®å’ŒåŸºç¡€ä»£ç å®ç°ï¼Œè¿™å°†æœ‰åŠ©äºå¤§å®¶æ›´å¥½åœ°ç†è§£æœ¬æ–‡çš„å†…å®¹ã€‚</p>
<p>æœ¬ç³»åˆ—å†…å®¹é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚å½“ç„¶ï¼Œå¦‚æœå¤§å®¶å·²ç»å­¦ä¹ è¿‡æˆ‘çš„ä¸“æ <a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ï¼Œç›¸ä¿¡å¯ä»¥æ›´å¿«ä¸Šæ‰‹ã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 27è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å›¾ç‰‡åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå›¾ç‰‡åˆ†æç³»ç»Ÿå»ºè®¾æ€è·¯</h3>
<p>åœ¨æ„å»ºå›¾ç‰‡åˆ†æç³»ç»Ÿæ—¶ï¼Œä¼ ç»ŸæŠ€æœ¯æ–¹æ¡ˆé€šå¸¸é‡‡ç”¨å¤šé˜¶æ®µå¤„ç†æµç¨‹ï¼š</p>
<p><strong>æ ¸å¿ƒæŠ€æœ¯è·¯å¾„ï¼š</strong></p>
<ul>
<li><strong>å›¾åƒé¢„å¤„ç†</strong>ï¼šä½¿ç”¨ OpenCVã€PIL ç­‰ Python åº“å¯¹åŸå§‹å›¾åƒè¿›è¡Œå°ºå¯¸è°ƒæ•´ã€è‰²å½©æ ¡æ­£ã€å™ªå£°è¿‡æ»¤ç­‰é¢„å¤„ç†æ“ä½œ</li>
<li><strong>æ–‡å­—ä¿¡æ¯æå–</strong>ï¼šé€šè¿‡ OCR æ¨¡å‹ï¼ˆå¦‚ MonkeyOCRã€DeepSeek-OCRï¼‰è¯†åˆ«å¹¶æå–å›¾åƒä¸­çš„æ–‡æœ¬å†…å®¹</li>
<li><strong>è¯­ä¹‰ç†è§£åˆ†æ</strong>ï¼šå€ŸåŠ©å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆå¦‚ Qwen-VL ç³»åˆ—ï¼‰å¯¹å›¾åƒè¿›è¡Œæ·±åº¦è¯­ä¹‰è§£æï¼Œç†è§£å›¾åƒåœºæ™¯ã€å¯¹è±¡å…³ç³»ç­‰é«˜å±‚è¯­ä¹‰ä¿¡æ¯</li>
</ul>
<p>è¿™ç§åˆ†å±‚å¤„ç†æ¶æ„è™½ç„¶æŠ€æœ¯æˆç†Ÿï¼Œä½†å­˜åœ¨æµç¨‹å¤æ‚ã€è¯¯å·®ç´¯ç§¯ç­‰é—®é¢˜ã€‚éšç€å¤šæ¨¡æ€å¤§æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œç¬”è€…è¿™é‡Œé‡‡ç”¨æ›´ç®€æ´é«˜æ•ˆçš„ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">1.2 å¤šæ¨¡æ€ RAG å›¾ç‰‡åˆ†æå®ç°</h3>
<p>æœ¬ç³»ç»Ÿå¾—ç›ŠäºQwen3-Omniåœ¨æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘å…¨æ¨¡æ€ä»»åŠ¡ä¸­ä¿æŒçš„é¡¶å°–æ€§èƒ½ï¼Œå®ç°ä¸€ä½“åŒ–çš„å›¾ç‰‡åˆ†æåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">1.2.1 æ•°æ®ç»“æ„å›é¡¾ä¸è®¾è®¡</h4>
<p>é¦–å…ˆå›é¡¾ç¬”è€…åœ¨<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ä¸­å®šä¹‰çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¤šæ¨¡æ€RAGç³»ç»Ÿä¼šå°†å›¾ç‰‡ç»è¿‡base64ç¼–ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ä¸­å­˜å‚¨åœ¨<code>ContentBlock</code>ä¸­ï¼Œä¸æ–‡å­—å†…å®¹åŒæ­¥é€å…¥Qwen3-Omniå¤§æ¨¡å‹å¤„ç†ï¼Œè¿™é‡Œä¸éœ€è¦å˜åŠ¨æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-5">1.2.2 å›¾åƒç¼–ç å¤„ç†å·¥å…·</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºÂ <code>utils.py</code>Â æ–‡ä»¶ï¼Œå®ç°å›¾åƒç¼–ç å·¥å…·ç±»ï¼Œå›¾åƒç¼–ç å·¥å…·ç±»è´Ÿè´£è¯†åˆ«ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ ¼å¼å¹¶å°†å…¶ç¼–ç ä¸ºbase64å­—ç¬¦ä¸²:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> UploadFile, HTTPException


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProcessor</span>:
    <span class="hljs-string">"""å›¾åƒå¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">image_to_base64</span>(<span class="hljs-params">image_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = image_file.file.read()
            <span class="hljs-comment"># è¿›è¡Œbase64ç¼–ç </span>
            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"å›¾åƒç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_image_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'jpg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'jpeg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'png'</span>: <span class="hljs-string">'image/png'</span>,
            <span class="hljs-string">'gif'</span>: <span class="hljs-string">'image/gif'</span>,
            <span class="hljs-string">'bmp'</span>: <span class="hljs-string">'image/bmp'</span>,
            <span class="hljs-string">'webp'</span>: <span class="hljs-string">'image/webp'</span>
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'image/jpeg'</span>)
</code></pre>
<h4 data-id="heading-6">1.2.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»º</h4>
<p>ä¿®æ”¹å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºé€»è¾‘ï¼Œæ”¯æŒå›¾åƒæ•°æ®çš„å¤„ç†ï¼Œè¯†åˆ«å›¾ç‰‡åç¼€æ ¼å¼å¹¶å°†å…¶å¤„ç†ä¸ºbase64å­—ç¬¦ä¸²ï¼Œæ„é€ æ ¼å¼ä¸º<code>{"type":"image_url", "image_url":{"url": å›¾ç‰‡base64æ ¼å¼}}</code>çš„å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile</span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })

    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-7">1.2.4 å†å²è®°å½•å¤šæ¨¡æ€æ”¯æŒ</h4>
<p>å¢å¼ºå†å²è®°å½•å¤„ç†å‡½æ•°ï¼Œæ·»åŠ å›¾åƒåˆ†æçš„ç³»ç»Ÿæç¤ºå’Œå¤šæ¨¡æ€å†…å®¹æ”¯æŒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-8">1.2.5 æ¥å£æ ¼å¼è°ƒæ•´</h4>
<p>ç”±äºç°åœ¨éœ€è¦åŒæ—¶æ”¯æŒ JSON æ•°æ®å’Œæ–‡ä»¶ä¸Šä¼ ï¼Œå°†æ¥å£è°ƒæ•´ä¸ºÂ <code>multipart/form-data</code>Â æ ¼å¼ï¼Œä¿®æ”¹<code>chat_stream</code>æ¥å£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile = File(<span class="hljs-params">...</span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<p>å®Œæˆä»¥ä¸Šäº”ä¸ªæ ¸å¿ƒæ¨¡å—çš„ä¿®æ”¹åï¼Œç³»ç»Ÿå°±å…·å¤‡äº†å®Œæ•´çš„å›¾ç‰‡åˆ†æèƒ½åŠ›ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾åƒå¹¶è¿›è¡Œæ™ºèƒ½é—®ç­”~</p>
<h3 data-id="heading-9">1.3 å›¾ç‰‡åˆ†æåŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œæˆ‘ä»¬é€šè¿‡ Postman å¯¹å›¾ç‰‡åˆ†æåŠŸèƒ½è¿›è¡Œå®Œæ•´æµ‹è¯•ã€‚</p>
<h4 data-id="heading-10">æµ‹è¯•é…ç½®æ­¥éª¤</h4>
<p><strong>1. è¯·æ±‚å¤´è®¾ç½®</strong><br/>
åœ¨ Postman çš„ Headers é€‰é¡¹å¡ä¸­é…ç½®ï¼š</p>
<ul>
<li><code>Content-Type</code>:Â <code>multipart/form-data</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d0bbb40ce04007acdefbd6c7f5014d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=WSSGEbzKXxwY4A6%2BuZqbQd%2FLYNw%3D" alt="0.png" loading="lazy"/></p>
<p><strong>2. è¯·æ±‚ä½“é…ç½®</strong><br/>
åœ¨ Body é€‰é¡¹å¡ä¸­é€‰æ‹©Â <code>form-data</code>Â æ ¼å¼ï¼Œæ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š</p>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>image_file</code></td><td>File</td><td>é€‰æ‹© Gemini 3.0 Logo å›¾ç‰‡æ–‡ä»¶</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·åˆ†æè¿™å¼ å›¾ç‰‡"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7952e8bbe8d34d339c12833cf661790c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=am8rJbG3YKlpgHzHE1i%2BQLirLZA%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb12dbca73d54784ac8447e2801115bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=uuC4hnkm%2B94MfssbaPrXsrPU7wc%3D" alt="1.png" loading="lazy"/></p>
<p><strong>3. æµ‹è¯•æ‰§è¡Œ</strong><br/>
å‘Â <code>/api/chat/stream</code>Â ç«¯ç‚¹å‘é€ POST è¯·æ±‚ï¼Œç³»ç»Ÿè¿”å›æµå¼å“åº”ã€‚</p>
<h4 data-id="heading-11">æµ‹è¯•ç»“æœéªŒè¯</h4>
<p>ä»å“åº”ç»“æœå¯è§ï¼Œç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶åˆ†æäº†æµ‹è¯•å›¾ç‰‡ï¼š</p>
<ul>
<li>å‡†ç¡®è¯†åˆ«å‡ºå›¾ç‰‡åŒ…å« Gemini 3.0 çš„ Logo</li>
<li>è¯¦ç»†æè¿°äº† Logo çš„è®¾è®¡å…ƒç´ å’Œè§†è§‰ç‰¹å¾</li>
<li>æä¾›äº†å®Œæ•´çš„å›¾ç‰‡å†…å®¹åˆ†æ</li>
</ul>
<p>æµ‹è¯•ç»“æœè¡¨æ˜ï¼Œå›¾ç‰‡åˆ†æåŠŸèƒ½å·²æ­£å¸¸é›†æˆåˆ°å¤šæ¨¡æ€ RAG ç³»ç»Ÿä¸­ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å¹¶ç»“åˆé—®é¢˜è¿›è¡Œæ™ºèƒ½åˆ†æã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd03b25877941bd85574d5f26e8113c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=kQhFHuiDpMLYpYD4d0KxMeBNpFk%3D" alt="3.png" loading="lazy"/></p>
<h2 data-id="heading-12">äºŒã€éŸ³é¢‘åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-13">2.1 å¤šæ¨¡æ€RAGéŸ³é¢‘å¤„ç†çš„å®ç°</h3>
<p>éŸ³é¢‘åˆ†æåŠŸèƒ½çš„å®ç°æ€è·¯ä¸å›¾ç‰‡åˆ†æç±»ä¼¼ï¼Œä¸»è¦é€šè¿‡ Base64 ç¼–ç å’Œæ ¼å¼è½¬æ¢å®ç°éŸ³é¢‘æ•°æ®çš„å¤„ç†ä¸ä¼ è¾“ã€‚</p>
<h4 data-id="heading-14">2.1.1 æ•°æ®ç»“æ„è®¾è®¡</h4>
<p>éŸ³é¢‘æ•°æ®é‡‡ç”¨ä¸å›¾ç‰‡ç›¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œé€šè¿‡ Base64 ç¼–ç å­˜å‚¨åœ¨Â <code>content</code>Â å­—æ®µä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-15">2.1.2 éŸ³é¢‘å¤„ç†å·¥å…·ç±»</h4>
<p>åœ¨Â <code>utils.py</code>Â ä¸­æ·»åŠ éŸ³é¢‘å¤„ç†å·¥å…·ç±»ï¼Œæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼Œé’ˆå¯¹éŸ³é¢‘æ ¼å¼çš„å¤„ç†ç¬”è€…é¢å¤–æ·»åŠ äº†ä¸Šä¼ æ–‡ä»¶å¤§å°çš„ç›¸å…³é™åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioProcessor</span>:
    <span class="hljs-string">"""éŸ³é¢‘å¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">audio_to_base64</span>(<span class="hljs-params">audio_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶ç±»å‹</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> AudioProcessor.is_valid_audio_type(audio_file.content_type, audio_file.filename):
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">"ä¸æ”¯æŒçš„éŸ³é¢‘æ ¼å¼ï¼Œæ”¯æŒçš„æ ¼å¼æœ‰: MP3, WAV, OGG, M4A, FLAC"</span>
                )

            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = audio_file.file.read()

            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆå¯é€‰ï¼šé™åˆ¶ä¸º10MBï¼‰</span>
            max_size = <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>  <span class="hljs-comment"># 10MB</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(contents) &gt; max_size:
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">f"éŸ³é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ <span class="hljs-subst">{max_size // <span class="hljs-number">1024</span> // <span class="hljs-number">1024</span>}</span>MB"</span>
                )

            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded

        <span class="hljs-keyword">except</span> HTTPException:
            <span class="hljs-keyword">raise</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"éŸ³é¢‘ç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_audio_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'mp3'</span>: <span class="hljs-string">'audio/mpeg'</span>,
            <span class="hljs-string">'wav'</span>: <span class="hljs-string">'audio/wav'</span>,
            <span class="hljs-string">'m4a'</span>: <span class="hljs-string">'audio/mp4'</span>,
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'audio/mpeg'</span>)  <span class="hljs-comment"># é»˜è®¤ä¸ºMP3</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_valid_audio_type</span>(<span class="hljs-params">content_type: <span class="hljs-built_in">str</span>, filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-comment"># è·å–æ”¯æŒçš„MIMEç±»å‹åˆ—è¡¨</span>
        supported_mimes = {
            <span class="hljs-string">'audio/mpeg'</span>, <span class="hljs-string">'audio/wav'</span>, <span class="hljs-string">'audio/mp4'</span>
        }

        <span class="hljs-comment"># æ£€æŸ¥content_type</span>
        <span class="hljs-keyword">if</span> content_type <span class="hljs-keyword">and</span> content_type <span class="hljs-keyword">in</span> supported_mimes:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

        <span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ‰©å±•å</span>
        file_extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        supported_extensions = {<span class="hljs-string">'mp3'</span>, <span class="hljs-string">'wav'</span>, <span class="hljs-string">'m4a'</span>}

        <span class="hljs-keyword">return</span> file_extension <span class="hljs-keyword">in</span> supported_extensions
</code></pre>
<h4 data-id="heading-16">2.1.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºå¢å¼º</h4>
<p>æ‰©å±•Â <code>create_multimodal_message</code>Â å‡½æ•°ï¼Œæ”¯æŒéŸ³é¢‘æ•°æ®çš„å¤„ç†, é¦–å…ˆæå–éŸ³é¢‘æ–‡ä»¶åç¼€å¹¶å°†å…¶å¤„ç†ä¸ºbase64æ ¼å¼ï¼ŒåŒæ—¶æ„é€ æ ¼å¼ä¸º<code>{"type":"audio_url", "audio_url":{"url": éŸ³é¢‘base64æ ¼å¼}}</code>å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile | <span class="hljs-literal">None</span>, audio_file:UploadFile | <span class="hljs-literal">None</span></span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })
    <span class="hljs-keyword">if</span> audio_file:
        processor = AudioProcessor()
        mime_type = processor.get_audio_mime_type(audio_file.filename)
        base64_audio = processor.audio_to_base64(audio_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
            <span class="hljs-string">"audio_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_audio}</span>"</span>
            },
        })
    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"audio"</span>:
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:audio"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                    <span class="hljs-string">"audio_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })

    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-17">2.1.4 å†å²è®°å½•å¤„ç†å¢å¼º</h4>
<p>æ›´æ–°ç³»ç»Ÿæç¤ºè¯ï¼Œæ·»åŠ éŸ³é¢‘å¤„ç†èƒ½åŠ›ï¼Œå¹¶å¢å¼ºå†å²è®°å½•å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        3. éŸ³é¢‘è½¬å†™ä¸åˆ†æ
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"audio"</span>:
                    audio_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> audio_data.startswith(<span class="hljs-string">"data:audio"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                            <span class="hljs-string">"image_url"</span>: {
                                <span class="hljs-string">"url"</span>: audio_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-18">2.1.5 æ¥å£å®Œæ•´å®ç°</h4>
<p>æ›´æ–°èŠå¤©æ¥å£ï¼ŒåŒæ—¶æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘æ–‡ä»¶ä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        audio_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file=image_file, audio_file=audio_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<h3 data-id="heading-19">2.2 åŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œé€šè¿‡ Postman å¯¹éŸ³é¢‘åˆ†æåŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯•é…ç½®ï¼š</strong></p>
<ul>
<li><strong>è¯·æ±‚å¤´</strong>ï¼š<code>Content-Type: multipart/form-data</code></li>
<li><strong>è¯·æ±‚ä½“</strong>ï¼ˆform-dataæ ¼å¼ï¼‰ï¼š</li>
</ul>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>audio_file</code></td><td>File</td><td>é€‰æ‹©æµ‹è¯•éŸ³é¢‘æ–‡ä»¶ï¼ˆåŒ…å«"ä½ å¥½"çš„å½•éŸ³ï¼‰</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·è§£æéŸ³é¢‘å†…å®¹"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong><br/>
ç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶è½¬å†™äº†éŸ³é¢‘å†…å®¹ï¼Œå‡†ç¡®è¾“å‡ºä¸‰ä¸ª"ä½ å¥½"ï¼ŒéªŒè¯äº†éŸ³é¢‘åˆ†æåŠŸèƒ½çš„æ­£ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3c07ecb430d4db79d611bb0fba1123b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=6MrKCRb7euGwZhFKRgtVY6SmsZg%3D" alt="5.png" loading="lazy"/></p>
<h2 data-id="heading-20">ä¸‰ã€æ€»ç»“</h2>
<p>æœ¬æœŸåˆ†äº«é€šè¿‡é›†æˆå…¨æ¨¡æ€å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼ŒæˆåŠŸæ„å»ºäº†æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘åˆ†æçš„å¤šæ¨¡æ€ RAG ç³»ç»Ÿã€‚è¿™ç§ç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆå¤§å¤§ç®€åŒ–äº†ä¼ ç»Ÿå¤šæ¨¡æ€å¤„ç†çš„å¤æ‚æ€§ï¼Œå±•ç°äº†æœªæ¥å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ã€‚ä¸‹æœŸåˆ†äº«ç¬”è€…å°†å’Œå¤§å®¶ä¸€èµ·å¤„ç†å¤šæ¨¡æ€PDFæ–‡æ¡£ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¤šæ¨¡æ€RAGç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…~</p>
<p><a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ä¸“æ å†…å®¹æºè‡ªç¬”è€…åœ¨å®é™…å­¦ä¹ å’Œå·¥ä½œä¸­å¯¹ LangChain ä¸ LangGraph çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶ç³»ç»Ÿæ€§åœ°ã€é«˜æ•ˆåœ°æŒæ¡ AI Agent çš„å¼€å‘æ–¹æ³•ï¼Œåœ¨å„å¤§æŠ€æœ¯å¹³å°è·å¾—äº†ä¸å°‘å…³æ³¨ä¸æ”¯æŒã€‚ç›®å‰å·²æ›´æ–°28è®²ï¼Œæ­£åœ¨æ›´æ–°å®æˆ˜ç¯‡å’ŒLangChain1.0å®æˆ˜é¡¹ç›®å¤šæ¨¡æ€RAGç³»ç»Ÿå¼€å‘ï¼Œå¹¶éšæ—¶è¡¥å……ç¬”è€…åœ¨å®é™…å·¥ä½œä¸­æ€»ç»“çš„æ‹“å±•çŸ¥è¯†ç‚¹ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾]]></title>    <link>https://juejin.cn/post/7576371992615649316</link>    <guid>https://juejin.cn/post/7576371992615649316</guid>    <pubDate>2025-11-25T10:03:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576371992615649316" data-draft-id="7576276707332177926" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-11-25T10:03:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¶¨è§è¯†äº†ï¼ŒError.cause è®© JavaScript é”™è¯¯è°ƒè¯•æ›´è½»æ¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T10:03:58.000Z" title="Tue Nov 25 2025 10:03:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>åœ¨ JavaScript ä¸­ï¼ŒæŠ›å‡ºé”™è¯¯å¾ˆå®¹æ˜“ï¼Œä½†è¿½æº¯åŸå› å´æœ‰äº›éº»çƒ¦ï¼Œè¿™å°±æ˜¯ <code>cause</code>å±æ€§çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p>
<p>è¿™æ˜¯æˆ‘ä»¬ä¼ ç»Ÿçš„å¤„ç†é”™è¯¯çš„åšæ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ bad json }"</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Something went wrong: "</span> + err.<span class="hljs-property">message</span>);
}
</code></pre>
<p>è™½ç„¶åŒ…è£…äº†é”™è¯¯ï¼Œä½†å·²ç»ä¸¢å¤±äº†åŸå§‹çš„å †æ ˆä¿¡æ¯å’Œé”™è¯¯ç±»å‹ã€‚</p>
<p>å½“é—®é¢˜å‘ç”Ÿæ—¶ï¼Œä½ åªèƒ½çœ‹åˆ°æœ€é¡¶å±‚çš„é”™è¯¯ä¿¡æ¯ï¼Œå´ä¸çŸ¥é“æ ¹æœ¬åŸå› æ˜¯ä»€ä¹ˆã€‚</p>
<p>ä½ å¥½ï¼Œæˆ‘æ˜¯å†´ç¾½ã€‚å‰ç«¯èµ„è®¯ã€å‰ç«¯å¹²è´§ï¼Œæ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šå†´ç¾½</p>
<h2 data-id="heading-1">2. å¼•å…¥ Error.cause</h2>
<p>ES2022 å¼•å…¥äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FError%2Fcause" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error/cause" ref="nofollow noopener noreferrer">Error.cause</a> å±æ€§ï¼Œå¯ä»¥ä¿ç•™åŸå§‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ bad json }"</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Something went wrong"</span>, { <span class="hljs-attr">cause</span>: err });
  }
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">stack</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Caused by:"</span>, err.<span class="hljs-property">cause</span>.<span class="hljs-property">stack</span>);
}
</code></pre>
<p>æ­¤æ—¶ä½ å¯ä»¥çœ‹åˆ°å®Œæ•´çš„é”™è¯¯é“¾ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">Error</span>: <span class="hljs-title class_">Something</span> went wrong
    at ...
<span class="hljs-title class_">Caused</span> <span class="hljs-attr">by</span>: <span class="hljs-title class_">SyntaxError</span>: <span class="hljs-title class_">Unexpected</span> token b <span class="hljs-keyword">in</span> <span class="hljs-title class_">JSON</span> at position <span class="hljs-number">2</span>
    at <span class="hljs-title class_">JSON</span>.<span class="hljs-property">parse</span> (&lt;anonymous&gt;)
    at ...
</code></pre>
<p>ç°åœ¨ï¼Œä½ æ—¢ä¿ç•™äº†åŸå§‹é”™è¯¯ï¼Œåˆèƒ½æä¾›æ¸…æ™°çš„é¡¶å±‚é”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-2">3. å®é™…åº”ç”¨ç¤ºä¾‹</h2>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæ›´å®é™…çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-string">"{ broken: true }"</span>); <span class="hljs-comment">// â† è¿™é‡Œä¼šå¤±è´¥</span>
  } <span class="hljs-keyword">catch</span> (parseError) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to fetch user data"</span>, { <span class="hljs-attr">cause</span>: parseError });
  }
}

<span class="hljs-keyword">try</span> {
  <span class="hljs-title function_">fetchUserData</span>();
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">message</span>); <span class="hljs-comment">// "Failed to fetch user data"</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span>); <span class="hljs-comment">// [SyntaxError: Unexpected token b in JSON]</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">SyntaxError</span>); <span class="hljs-comment">// true</span>
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä»£ç éå¸¸æ¸…æ™°ç›´è§‚ã€‚</p>
<p><strong>è€Œä¸” cause å±æ€§è¢«å®šä¹‰ä¸ºä¸å¯æšä¸¾</strong>ï¼Œå› æ­¤å®ƒä¸ä¼šæ±¡æŸ“æ—¥å¿—æˆ– for...in å¾ªç¯ï¼Œé™¤éä½ æ˜¾å¼è®¿é—®å®ƒã€‚</p>
<h2 data-id="heading-3">4. è‡ªå®šä¹‰é”™è¯¯ç±»</h2>
<p>ä½ å¯ä»¥åœ¨è‡ªå®šä¹‰é”™è¯¯ç±»ä¸­ä½¿ç”¨ <code>cause</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message, { cause } = {}</span>) {
    <span class="hljs-variable language_">super</span>(message, { cause });
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"DatabaseError"</span>;
  }
}
</code></pre>
<p>å¦‚æœä½ çš„è¿è¡Œç¯å¢ƒæ˜¯ ES2022+ï¼Œè¿™å·²ç»è¶³å¤Ÿäº†ï¼š<code>super(message, { cause })</code> ä¼šè‡ªåŠ¨å¤„ç†ä¸€åˆ‡ã€‚</p>
<p>å¯¹äº TypeScript ç”¨æˆ·ï¼Œç¡®ä¿ <code>tsconfig.json</code> é…ç½®äº†ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"compilerOptions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es2022"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lib"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"es2022"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å¦åˆ™ï¼Œåœ¨å°† <code>{ cause }</code> ä¼ é€’ç»™ Error æ„é€ å‡½æ•°æ—¶å¯èƒ½ä¼šçœ‹åˆ°ç±»å‹é”™è¯¯ã€‚</p>
<h2 data-id="heading-4">5. æ›´å¥½çš„æµ‹è¯•æ–­è¨€</h2>
<p>å‡è®¾ä½ çš„æœåŠ¡æŠ›å‡ºäº†ä¸€ä¸ª <code>UserCreationError</code>ï¼Œè¿™æ˜¯ç”±ä¸€ä¸ª <code>ValidationError</code> å¼•å‘çš„ã€‚</p>
<p>ä½ å¯ä»¥è¿™æ ·å†™æ–­è¨€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">expect</span>(err.<span class="hljs-property">cause</span>).<span class="hljs-title function_">toBeInstanceOf</span>(<span class="hljs-title class_">ValidationError</span>);
</code></pre>
<p>è¿™æ ·æµ‹è¯•ä¼šæ›´æ¸…æ™°ã€æ›´å¥å£®ã€‚</p>
<h2 data-id="heading-5">6. æ³¨æ„äº‹é¡¹</h2>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>console.error(err)</code> åªä¼šæ‰“å°é¡¶å±‚é”™è¯¯ã€‚<code>cause</code>é“¾ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼Œå› æ­¤éœ€è¦æ‰‹åŠ¨æ‰“å°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Caused by:"</span>, err.<span class="hljs-property">cause</span>);
</code></pre>
<p>å°½ç®¡ cause å¾ˆå¥½ï¼Œä½†ä¹Ÿä¸è¦æ»¥ç”¨ã€‚æ¯ä¸ªå°é”™è¯¯éƒ½åŒ…è£…å¯èƒ½æ›´ä¹±ï¼Œå› æ­¤åªåœ¨çœŸæ­£éœ€è¦ä¸Šä¸‹æ–‡çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-6">7. é€’å½’æ‰“å°å®Œæ•´é”™è¯¯é“¾</h2>
<p>è¿™æ˜¯ä¸€ä¸ªå®‰å…¨éå†é”™è¯¯é“¾çš„å·¥å…·å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logErrorChain</span>(<span class="hljs-params">err, level = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">if</span> (!err) <span class="hljs-keyword">return</span>;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">" "</span>.<span class="hljs-title function_">repeat</span>(level * <span class="hljs-number">2</span>) + <span class="hljs-string">`<span class="hljs-subst">${err.name}</span>: <span class="hljs-subst">${err.message}</span>`</span>);

  <span class="hljs-keyword">if</span> (err.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) {
    <span class="hljs-title function_">logErrorChain</span>(err.<span class="hljs-property">cause</span>, level + <span class="hljs-number">1</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err.<span class="hljs-property">cause</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">" "</span>.<span class="hljs-title function_">repeat</span>((level + <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>) + <span class="hljs-title class_">String</span>(err.<span class="hljs-property">cause</span>));
  }
}
</code></pre>
<p>å¦‚æœéœ€è¦å®Œæ•´å †æ ˆä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logFullErrorChain</span>(<span class="hljs-params">err</span>) {
  <span class="hljs-keyword">let</span> current = err;
  <span class="hljs-keyword">while</span> (current) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(current.<span class="hljs-property">stack</span>);
    current = current.<span class="hljs-property">cause</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span> ? current.<span class="hljs-property">cause</span> : <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<p>å¯¹äºç»“æ„å¤æ‚ã€å¯èƒ½åœ¨ä¸åŒå±‚çº§å‡ºç°å¤šç§æ•…éšœçš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™éå¸¸æœ‰ç”¨ã€‚</p>
<h2 data-id="heading-7">8. è·¨å±‚é”™è¯¯é“¾ç¤ºä¾‹</h2>
<p>å‡è®¾è°ƒç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ•°æ®åº“è¿æ¥å¤±è´¥ï¼ŒæŠ›å‡º <code>ConnectionTimeoutError</code></li>
<li>æ•è·ååŒ…è£…æˆ <code>DatabaseError</code></li>
<li>å†æ¬¡æ•è·å¹¶åŒ…è£…æˆ <code>ServiceUnavailableError</code></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionTimeoutError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceUnavailableError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {}

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionTimeoutError</span>(<span class="hljs-string">"DB connection timed out"</span>);
    } <span class="hljs-keyword">catch</span> (networkErr) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseError</span>(<span class="hljs-string">"Failed to connect to database"</span>, { <span class="hljs-attr">cause</span>: networkErr });
    }
  } <span class="hljs-keyword">catch</span> (dbErr) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceUnavailableError</span>(<span class="hljs-string">"Unable to save user data"</span>, { <span class="hljs-attr">cause</span>: dbErr });
  }
} <span class="hljs-keyword">catch</span> (finalErr) {
  <span class="hljs-title function_">logErrorChain</span>(finalErr);
}
</code></pre>
<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title class_">ServiceUnavailableError</span>: <span class="hljs-title class_">Unable</span> to save user data
  <span class="hljs-title class_">DatabaseError</span>: <span class="hljs-title class_">Failed</span> to connect to database
    <span class="hljs-title class_">ConnectionTimeoutError</span>: <span class="hljs-variable constant_">DB</span> connection timed out
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé”™è¯¯é“¾æä¾›äº†ä¸€ä¸ªæ¸…æ™°çš„è§†å›¾ï¼Œå‘Šè¯‰ä½ å‘ç”Ÿäº†ä»€ä¹ˆä»¥åŠåœ¨å“ªé‡Œå‘ç”Ÿçš„ã€‚</p>
<h2 data-id="heading-8">9. æ”¯æŒåº¦</h2>
<p><code>.cause</code> å‚æ•°åœ¨æ‰€æœ‰ç°ä»£ç¯å¢ƒä¸­éƒ½æ”¯æŒï¼š</p>
<ul>
<li>âœ… Chrome 93+ã€Firefox 91+ã€Safari 15+ã€Edge 93+</li>
<li>âœ… Node.js 16.9+</li>
<li>âœ… Bun å’Œ Denoï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰</li>
</ul>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¼€å‘è€…å·¥å…·å¯èƒ½ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤º causeã€‚</p>
<p>æ‰€ä»¥éœ€è¦æ˜¾å¼è®°å½•å®ƒï¼ˆ<code>console.error('Caused by:', err.cause)</code>ï¼‰ã€‚</p>
<p>è¿˜è¦æ³¨æ„ï¼šå¦‚æœä½¿ç”¨ Babel æˆ– TypeScript è¿›è¡Œè½¬è¯‘ï¼Œæ­¤åŠŸèƒ½ä¸ä¼šè¢« polyfillã€‚</p>
<h2 data-id="heading-9">10. å¼‚æ­¥æ“ä½œä¸­çš„é”™è¯¯å¤„ç†</h2>
<p>Error.cause åŒæ ·é€‚ç”¨äºå¼‚æ­¥æ“ä½œã€‚ç»“åˆ async/await å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/data"</span>);
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP error! Status: <span class="hljs-subst">${response.status}</span>`</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•°æ®è·å–å¤±è´¥:"</span>, error);
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Failed to fetch data"</span>, { <span class="hljs-attr">cause</span>: error });
  }
}
</code></pre>
<p>è¿™ç§æ–¹å¼è®©å¼‚æ­¥ä»£ç çš„é”™è¯¯å¤„ç†é€»è¾‘çœ‹èµ·æ¥ä¸åŒæ­¥ä»£ç æ— å¼‚ï¼Œå¤§å¤§æå‡äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-10">11. æ€»ç»“</h2>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œ<strong>ç°ä»£é”™è¯¯é“¾å¤„ç†çš„æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>new Error(message, { cause })</code> ä¿ç•™ä¸Šä¸‹æ–‡</li>
<li>é€‚ç”¨äºå†…ç½®é”™è¯¯ç±»å’Œè‡ªå®šä¹‰é”™è¯¯ç±»</li>
<li>æ‰€æœ‰ç°ä»£è¿è¡Œæ—¶ç¯å¢ƒéƒ½æ”¯æŒï¼ˆæµè§ˆå™¨ã€Node.jsã€Denoã€Bunï¼‰</li>
<li>å¯ä»¥æ”¹å–„æ—¥å¿—ã€è°ƒè¯•å’Œæµ‹è¯•æ–­è¨€</li>
<li>æ³¨æ„ TypeScriptï¼šè®¾ç½® <code>"target": "es2022"</code> å’Œ <code>"lib": ["es2022"]</code></li>
<li>æ³¨æ„è®°å½• <code>err.cause</code> æˆ–æ‰‹åŠ¨éå†é”™è¯¯é“¾</li>
</ul>
<p>ä»è€Œå®ç°æ›´æ¸…æ™°çš„å †æ ˆè·Ÿè¸ªã€æ›´å¥½çš„ä¸Šä¸‹æ–‡ã€æ›´æ„‰å¿«çš„è°ƒè¯•ä½“éªŒã€‚</p>
<p>Error.cause å°±æ˜¯ä½ é”™è¯¯å¤„ç†ä¸­ç¼ºå°‘çš„é‚£ä¸€ç¯ã€‚</p>
<h2 data-id="heading-11">12. å‚è€ƒé“¾æ¥</h2>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fallthingssmitty.com%2F2025%2F11%2F10%2Ferror-chaining-in-javascript-cleaner-debugging-with-error-cause%2F" target="_blank" title="https://allthingssmitty.com/2025/11/10/error-chaining-in-javascript-cleaner-debugging-with-error-cause/" ref="nofollow noopener noreferrer">allthingssmitty.com/2025/11/10/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FError%2Fcause" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Error/cause" ref="nofollow noopener noreferrer">developer.mozilla.org/zh-CN/docs/â€¦</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°]]></title>    <link>https://juejin.cn/post/7576844295433699337</link>    <guid>https://juejin.cn/post/7576844295433699337</guid>    <pubDate>2025-11-26T10:31:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576844295433699337" data-draft-id="7576838095519170611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T10:31:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‚’ç±³2333"/> <meta itemprop="url" content="https://juejin.cn/user/1283857659996893"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šä¹‰åƒé—®Qwen3-Coderæ¨¡å‹å¸®æˆ‘æ€»ç»“çš„typescriptç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1283857659996893/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‚’ç±³2333
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:31:43.000Z" title="Wed Nov 26 2025 10:31:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•å­¦äº†å­¦typescriptï¼Œä½†æ˜¯åˆè§‰å¾—åšç¬”è®°éº»çƒ¦ï¼Œäºæ˜¯æ‰¾AIå¸®å¸®å¿™ï¼Œæç¤ºè¯ä¸ºâ€œå¸®æˆ‘æ€»ç»“typescriptçš„å¸¸ç”¨çŸ¥è¯†ç‚¹ï¼Œå¹¶ç”Ÿæˆä¸€ç¯‡markdownã€‚â€ ç”Ÿæˆäº†ä¸‹é¢çš„å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">TypeScript å¸¸ç”¨çŸ¥è¯†ç‚¹é€ŸæŸ¥</h2>
<p>TypeScript (TS) æ˜¯ JavaScript çš„è¶…é›†ï¼Œæ·»åŠ äº†é™æ€ç±»å‹ç³»ç»Ÿï¼Œæœ‰åŠ©äºæé«˜ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒå’Œå¸¸ç”¨çš„ç‰¹æ€§æ€»ç»“ã€‚</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%259F%25BA%25E7%25A1%2580%25E7%25B1%25BB%25E5%259E%258B" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B" ref="nofollow noopener noreferrer">åŸºç¡€ç±»å‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%258F%2598%25E9%2587%258F%25E5%25A3%25B0%25E6%2598%258E%25E4%25B8%258E%25E7%25B1%25BB%25E5%259E%258B%25E6%25B3%25A8%25E8%25A7%25A3" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E%E4%B8%8E%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3" ref="nofollow noopener noreferrer">å˜é‡å£°æ˜ä¸ç±»å‹æ³¨è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%258E%25A5%25E5%258F%25A3-interfaces" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%8E%A5%E5%8F%A3-interfaces" ref="nofollow noopener noreferrer">æ¥å£ (Interfaces)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E7%25B1%25BB%25E5%259E%258B%25E5%2588%25AB%25E5%2590%258D-type-aliases" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D-type-aliases" ref="nofollow noopener noreferrer">ç±»å‹åˆ«å (Type Aliases)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E8%2581%2594%25E5%2590%2588%25E7%25B1%25BB%25E5%259E%258B-union-types--%25E4%25BA%25A4%25E5%258F%2589%25E7%25B1%25BB%25E5%259E%258B-intersection-types" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B-union-types--%E4%BA%A4%E5%8F%89%E7%B1%BB%E5%9E%8B-intersection-types" ref="nofollow noopener noreferrer">è”åˆç±»å‹ (Union Types) &amp; äº¤å‰ç±»å‹ (Intersection Types)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%2595%25B0%25E7%25BB%2584%25E4%25B8%258E%25E5%2585%2583%25E7%25BB%2584-tuples" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%95%B0%E7%BB%84%E4%B8%8E%E5%85%83%E7%BB%84-tuples" ref="nofollow noopener noreferrer">æ•°ç»„ä¸å…ƒç»„ (Tuples)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%2587%25BD%25E6%2595%25B0%25E7%25B1%25BB%25E5%259E%258B" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B" ref="nofollow noopener noreferrer">å‡½æ•°ç±»å‹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E7%25B1%25BB-classes" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E7%B1%BB-classes" ref="nofollow noopener noreferrer">ç±» (Classes)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%25B3%259B%25E5%259E%258B-generics" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%B3%9B%E5%9E%8B-generics" ref="nofollow noopener noreferrer">æ³›å‹ (Generics)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E6%25A8%25A1%25E5%259D%2597-modules-%25E5%2592%258C-%25E5%25AF%25BC%25E5%2585%25A5%25E5%25AF%25BC%25E5%2587%25BA" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E6%A8%A1%E5%9D%97-modules-%E5%92%8C-%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA" ref="nofollow noopener noreferrer">æ¨¡å— (Modules) å’Œ å¯¼å…¥/å¯¼å‡º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E8%25A3%2585%25E9%25A5%25B0%25E5%2599%25A8-decorators" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E8%A3%85%E9%A5%B0%E5%99%A8-decorators" ref="nofollow noopener noreferrer">è£…é¥°å™¨ (Decorators)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tongyi.com%2F%3Fst%3Dnull%26bizPassParams%3D%2526x-platform%253DexternalH5%26sessionId%3D6ab83cd9bd4e4652b985bbb9ba54cedc%23%25E5%25AE%259E%25E7%2594%25A8%25E5%25B7%25A5%25E5%2585%25B7%25E7%25B1%25BB%25E5%259E%258B-utility-types" target="_blank" title="https://www.tongyi.com/?st=null&amp;bizPassParams=%26x-platform%3DexternalH5&amp;sessionId=6ab83cd9bd4e4652b985bbb9ba54cedc#%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%9E%8B-utility-types" ref="nofollow noopener noreferrer">å®ç”¨å·¥å…·ç±»å‹ (Utility Types)</a></li>
</ol>
<hr/>
<h3 data-id="heading-2">åŸºç¡€ç±»å‹</h3>
<p>TypeScript æä¾›äº†ä¸€ç³»åˆ—åŸºç¡€æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li><code>number</code>: æ•°å­—ç±»å‹ (æ•´æ•°æˆ–æµ®ç‚¹æ•°)ã€‚</li>
<li><code>string</code>: å­—ç¬¦ä¸²ç±»å‹ã€‚</li>
<li><code>boolean</code>: å¸ƒå°”å€¼ (<code>true</code> æˆ– <code>false</code>)ã€‚</li>
<li><code>null</code> å’Œ <code>undefined</code>: å®ƒä»¬æœ‰è‡ªå·±çš„ç±»å‹ <code>null</code> å’Œ <code>undefined</code>ã€‚ä½†åœ¨ <code>strictNullChecks</code> æ¨¡å¼ä¸‹ï¼ˆæ¨èï¼‰ï¼Œå®ƒä»¬åªèƒ½èµ‹å€¼ç»™ <code>any</code> å’Œå„è‡ªçš„ç±»å‹ï¼›å¦åˆ™ï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰ï¼Œå®ƒä»¬æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚</li>
<li><code>symbol</code>: ES6 æ–°å¢çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ã€‚</li>
<li><code>bigint</code>: å¤§æ•´æ•°ç±»å‹ã€‚</li>
<li><code>void</code>: é€šå¸¸ç”¨äºè¡¨ç¤ºæ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›ç±»å‹ã€‚</li>
<li><code>any</code>: å…è®¸ä»»ä½•ç±»å‹çš„å€¼ï¼Œä¼šè·³è¿‡ç±»å‹æ£€æŸ¥ï¼ˆä¸æ¨èæ»¥ç”¨ï¼‰ã€‚</li>
<li><code>unknown</code>: ä»£è¡¨ä»»ä½•å€¼ã€‚ä¸ <code>any</code> ä¸åŒçš„æ˜¯ï¼Œåœ¨å¯¹ <code>unknown</code> ç±»å‹çš„å€¼æ‰§è¡Œæ“ä½œå‰ï¼Œå¿…é¡»è¿›è¡Œç±»å‹æ£€æŸ¥æˆ–ç±»å‹æ–­è¨€ã€‚</li>
<li><code>never</code>: è¡¨ç¤ºæ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬ä¸å¯èƒ½æœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›ç±»å‹ã€‚</li>
<li><code>object</code>: éåŸå§‹ç±»å‹ï¼ˆå³é™¤ number, string, boolean, symbol, null, undefined, bigint ä¹‹å¤–çš„ç±»å‹ï¼‰ã€‚æ³¨æ„ï¼šå®ƒä¸åŒäº <code>{}</code>ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">å˜é‡å£°æ˜ä¸ç±»å‹æ³¨è§£</h3>
<p>ä½¿ç”¨ <code>let</code>, <code>const</code>, <code>var</code> å£°æ˜å˜é‡ï¼Œå¹¶é€šè¿‡å†’å· <code>:</code> æ·»åŠ ç±»å‹æ³¨è§£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">isDone</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">decimal</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">6</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">color</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">"blue"</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">list</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">u</span>: <span class="hljs-literal">undefined</span> = <span class="hljs-literal">undefined</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">n</span>: <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹æ³¨è§£</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
    <span class="hljs-keyword">return</span> x + y;
}
</code></pre>
<hr/>
<h3 data-id="heading-4">æ¥å£ (Interfaces)</h3>
<p>æ¥å£ç”¨äºå®šä¹‰å¯¹è±¡çš„ç»“æ„ï¼ˆShapeï¼‰ï¼Œæ˜¯ä¸€ç§å¥‘çº¦ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
    address?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span>
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">Person</span> = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Alice"</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,
    <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>
};
<span class="hljs-comment">// user.id = 2; // Error: Cannot assign to 'id' because it is a read-only property.</span>

<span class="hljs-comment">// å‡½æ•°ç±»å‹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">SearchFunc</span> {
    (<span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">subString</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;
}
<span class="hljs-keyword">let</span> <span class="hljs-attr">mySearch</span>: <span class="hljs-title class_">SearchFunc</span>;
mySearch = <span class="hljs-keyword">function</span>(<span class="hljs-params">src, sub</span>) { <span class="hljs-comment">// å‚æ•°åä¸å¿…ä¸æ¥å£ä¸­å®šä¹‰çš„åå­—ç›¸åŒ¹é…</span>
    <span class="hljs-keyword">let</span> result = src.<span class="hljs-title function_">search</span>(sub);
    <span class="hljs-keyword">return</span> result &gt; -<span class="hljs-number">1</span>;
}
</code></pre>
<hr/>
<h3 data-id="heading-5">ç±»å‹åˆ«å (Type Aliases)</h3>
<p>ç±»å‹åˆ«åä¸ºç±»å‹åˆ›å»ºä¸€ä¸ªæ–°çš„åç§°ã€‚å®ƒå¯ä»¥ç”¨äºåŸå§‹å€¼ã€è”åˆç±»å‹ã€å…ƒç»„ä»¥åŠå…¶å®ƒä»»ä½•ä½ éœ€è¦æ‰‹å†™çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">type <span class="hljs-attr">Name</span> = string<span class="hljs-comment">;</span>
type <span class="hljs-attr">NameResolver</span> = () =&gt; string<span class="hljs-comment">;</span>
type <span class="hljs-attr">NameOrResolver</span> = Name | NameResolver<span class="hljs-comment">;</span>

function getName(n: NameOrResolver): Name {
    if (typeof <span class="hljs-attr">n</span> === <span class="hljs-string">'string'</span>) {
        return n<span class="hljs-comment">;</span>
    } else {
        return n()<span class="hljs-comment">;</span>
    }
}

// ä¹Ÿå¯ä»¥åƒæ¥å£ä¸€æ ·æè¿°å¯¹è±¡å½¢çŠ¶
type <span class="hljs-attr">Point</span> = {
    x: number<span class="hljs-comment">;</span>
    y: number<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// ç±»å‹åˆ«åå¯ä»¥ä½¿ç”¨äº¤é›†å’Œè”åˆ
type <span class="hljs-attr">PartialPoint</span> = { x: number<span class="hljs-comment">; } | { y: number; };</span>
</code></pre>
<p><strong>æ¥å£ vs ç±»å‹åˆ«å</strong>:</p>
<ul>
<li>æ¥å£å¯ä»¥â€œæ‰“å¼€â€å¹¶æ‰©å±•ï¼ˆDeclaration Mergingï¼‰ã€‚</li>
<li>ç±»å‹åˆ«åä¸èƒ½è¢«é‡æ–°æ‰“å¼€ä»¥æ·»åŠ æ–°çš„å±æ€§ã€‚</li>
<li>æ¥å£é€šå¸¸ç”¨äºå®šä¹‰å¯¹è±¡çš„ç»“æ„ï¼Œè€Œç±»å‹åˆ«åæ›´é€šç”¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-6">è”åˆç±»å‹ (Union Types) &amp; äº¤å‰ç±»å‹ (Intersection Types)</h3>
<ul>
<li>
<p><strong>è”åˆç±»å‹</strong>: è¡¨ç¤ºä¸€ä¸ªå€¼å¯ä»¥æ˜¯å‡ ç§ç±»å‹ä¹‹ä¸€ã€‚ä½¿ç”¨ <code>|</code> åˆ†éš”æ¯ä¸ªç±»å‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">let value: string | number<span class="hljs-comment">;</span>
<span class="hljs-attr">value</span> = <span class="hljs-string">"hello"</span><span class="hljs-comment">; // OK</span>
<span class="hljs-attr">value</span> = <span class="hljs-number">42</span><span class="hljs-comment">;      // OK</span>
// <span class="hljs-attr">value</span> = <span class="hljs-literal">true</span><span class="hljs-comment">; // Error</span>
</code></pre>
</li>
<li>
<p><strong>äº¤å‰ç±»å‹</strong>: å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ä½¿ç”¨ <code>&amp;</code> è¿æ¥ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">interface Colorful {
    color: string<span class="hljs-comment">;</span>
}
interface Circle {
    radius: number<span class="hljs-comment">;</span>
}

type <span class="hljs-attr">ColorfulCircle</span> = Colorful &amp; Circle<span class="hljs-comment">;</span>

const cc: <span class="hljs-attr">ColorfulCircle</span> = {
    color: "red",
    radius: 10
}<span class="hljs-comment">; // å¿…é¡»åŒæ—¶æ»¡è¶³ Colorful å’Œ Circle çš„è¦æ±‚</span>
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">æ•°ç»„ä¸å…ƒç»„ (Tuples)</h3>
<ul>
<li>
<p><strong>æ•°ç»„</strong>: å­˜å‚¨ç›¸åŒç±»å‹çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">list1</span>: <span class="hljs-built_in">number</span>[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">let</span> <span class="hljs-attr">list2</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-built_in">number</span>&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]; <span class="hljs-comment">// æ³›å‹è¯­æ³•</span>
</code></pre>
</li>
<li>
<p><strong>å…ƒç»„</strong>: å…è®¸è¡¨ç¤ºä¸€ä¸ªå·²çŸ¥å…ƒç´ æ•°é‡å’Œç±»å‹çš„æ•°ç»„ï¼Œå„å…ƒç´ çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚</p>
<pre><code class="hljs language-python" lang="python">let <span class="hljs-built_in">tuple</span>: [string, number] = [<span class="hljs-string">'hello'</span>, <span class="hljs-number">10</span>];
// <span class="hljs-built_in">tuple</span>[<span class="hljs-number">0</span>] = <span class="hljs-number">10</span>; // Error: <span class="hljs-type">Type</span> <span class="hljs-string">'number'</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> assignable to <span class="hljs-built_in">type</span> <span class="hljs-string">'string'</span>.
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-8">å‡½æ•°ç±»å‹</h3>
<ul>
<li>
<p><strong>å‡½æ•°å£°æ˜/è¡¨è¾¾å¼ä¸­çš„ç±»å‹æ³¨è§£</strong>:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">greet</span>(<span class="hljs-params">name: <span class="hljs-keyword">string</span></span>): <span class="hljs-title">string</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
}

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">greeter</span> = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">name: <span class="hljs-keyword">string</span></span>): <span class="hljs-title">string</span> </span>{
     <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
};

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">arrowGreeter</span> = (name: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">string</span> =&gt; {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name;
};
</code></pre>
</li>
<li>
<p><strong>å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</strong>:</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildName</span>(<span class="hljs-params">firstName: <span class="hljs-keyword">string</span>, lastName?: <span class="hljs-keyword">string</span></span>) </span>{ ... } <span class="hljs-comment">// lastName æ˜¯å¯é€‰çš„</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">buildNameWithDefault</span>(<span class="hljs-params">firstName: <span class="hljs-keyword">string</span>, lastName = <span class="hljs-string">"Smith"</span></span>) </span>{ ... } <span class="hljs-comment">// é»˜è®¤å‚æ•°</span>
</code></pre>
</li>
<li>
<p><strong>å‰©ä½™å‚æ•°</strong>:</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function">function <span class="hljs-title">buildNameRest</span>(<span class="hljs-params">firstName: <span class="hljs-built_in">string</span>, ...restOfName: <span class="hljs-built_in">string</span>[]</span>)</span> {
    <span class="hljs-keyword">return</span> firstName + <span class="hljs-string">" "</span> + restOfName.<span class="hljs-keyword">join</span>(<span class="hljs-string">" "</span>);
}
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">ç±» (Classes)</h3>
<p>TypeScript æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç±»ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç§æœ‰å±æ€§</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-attr">species</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å—ä¿æŠ¤çš„å±æ€§</span>
    <span class="hljs-keyword">readonly</span> <span class="hljs-attr">legs</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">4</span>; <span class="hljs-comment">// åªè¯»å±æ€§</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">theName: <span class="hljs-built_in">string</span>, theAge: <span class="hljs-built_in">number</span>, theSpecies: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = theName;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = theAge;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">species</span> = theSpecies;
    }

    <span class="hljs-title function_">move</span>(<span class="hljs-params">distanceInMeters: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> moved <span class="hljs-subst">${distanceInMeters}</span>m.`</span>);
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
    <span class="hljs-attr">breed</span>: <span class="hljs-built_in">string</span>;

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, age: <span class="hljs-built_in">number</span>, species: <span class="hljs-built_in">string</span>, breed: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">super</span>(name, age, species); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">breed</span> = breed;
    }

    <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Woof! Woof!'</span>);
    }

    <span class="hljs-title function_">move</span>(<span class="hljs-params">distanceInMeters = <span class="hljs-number">5</span></span>) { <span class="hljs-comment">// é‡å†™çˆ¶ç±»æ–¹æ³•</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Running..."</span>);
        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">move</span>(distanceInMeters);
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">æ³›å‹ (Generics)</h3>
<p>æ³›å‹å…è®¸ä½ ç¼–å†™å¯å¤ç”¨çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶å¯ä»¥å·¥ä½œåœ¨å¤šç§ç±»å‹ä¹‹ä¸Šã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ³›å‹å‡½æ•°</span>
<span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-keyword">return</span> arg;
}
<span class="hljs-keyword">let</span> output1 = identity&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"myString"</span>); <span class="hljs-comment">// type argument specified</span>
<span class="hljs-keyword">let</span> output2 = <span class="hljs-title function_">identity</span>(<span class="hljs-string">"myString"</span>); <span class="hljs-comment">// type argument inferred</span>

<span class="hljs-comment">// æ³›å‹æ¥å£</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GenericIdentityFn</span>&lt;T&gt; {
    (<span class="hljs-attr">arg</span>: T): T;
}
<span class="hljs-keyword">let</span> <span class="hljs-attr">myIdentity</span>: <span class="hljs-title class_">GenericIdentityFn</span>&lt;<span class="hljs-built_in">number</span>&gt; = identity;

<span class="hljs-comment">// æ³›å‹ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericNumber</span>&lt;T&gt; {
    <span class="hljs-attr">zeroValue</span>: T;
    <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">x: T, y: T</span>) =&gt;</span> T;
}

<span class="hljs-keyword">let</span> myGenericNumber = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericNumber</span>&lt;<span class="hljs-built_in">number</span>&gt;();
myGenericNumber.<span class="hljs-property">zeroValue</span> = <span class="hljs-number">0</span>;
myGenericNumber.<span class="hljs-property">add</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) { <span class="hljs-keyword">return</span> x + y; };

<span class="hljs-comment">// æ³›å‹çº¦æŸ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lengthwise</span> {
    <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-keyword">function</span> loggingIdentity&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Lengthwise</span>&gt;(<span class="hljs-attr">arg</span>: T): T {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg.<span class="hljs-property">length</span>); <span class="hljs-comment">// Now we know it has a .length property, so no more error</span>
    <span class="hljs-keyword">return</span> arg;
}
<span class="hljs-comment">// loggingIdentity(3); // Error, number doesn't have a .length property</span>
<span class="hljs-title function_">loggingIdentity</span>({<span class="hljs-attr">length</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>}); <span class="hljs-comment">// OK</span>
</code></pre>
<hr/>
<h3 data-id="heading-11">æ¨¡å— (Modules) å’Œ å¯¼å…¥/å¯¼å‡º</h3>
<p>å°†ä»£ç ç»„ç»‡åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œå¹¶æ§åˆ¶å®ƒä»¬ä¹‹é—´çš„å¯è§æ€§ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// math.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> pi = <span class="hljs-number">3.14</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x: <span class="hljs-built_in">number</span>, y: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">return</span> x + y;
}
<span class="hljs-comment">// æˆ–è€…ç»Ÿä¸€å¯¼å‡º</span>
<span class="hljs-comment">// const pi = 3.14;</span>
<span class="hljs-comment">// function add(x: number, y: number) { return x + y; }</span>
<span class="hljs-comment">// export { pi, add };</span>

<span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { pi, add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pi); <span class="hljs-comment">// 3.14</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// 3</span>

<span class="hljs-comment">// å¯¼å…¥é‡å‘½å</span>
<span class="hljs-keyword">import</span> { add <span class="hljs-keyword">as</span> sum } <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;

<span class="hljs-comment">// å¯¼å…¥æ•´ä¸ªæ¨¡å—</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> math <span class="hljs-keyword">from</span> <span class="hljs-string">'./math'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(math.<span class="hljs-property">pi</span>);

<span class="hljs-comment">// é»˜è®¤å¯¼å‡º</span>
<span class="hljs-comment">// export default class Calculator { ... }</span>
<span class="hljs-comment">// import Calculator from './Calculator'; // æ³¨æ„æ²¡æœ‰èŠ±æ‹¬å· {}</span>
</code></pre>
<hr/>
<h3 data-id="heading-12">è£…é¥°å™¨ (Decorators)</h3>
<p>ä¸€ç§ç‰¹æ®Šç±»å‹çš„å£°æ˜ï¼Œå¯ä»¥è¢«é™„åŠ åˆ°ç±»å£°æ˜ï¼Œæ–¹æ³•ï¼Œè®¿é—®ç¬¦ï¼Œå±æ€§æˆ–å‚æ•°ä¸Šã€‚è£…é¥°å™¨ä½¿ç”¨ <code>@expression</code> è¿™ç§å½¢å¼ï¼Œ<code>expression</code> æ±‚å€¼åå¿…é¡»ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ã€‚</p>
<p>éœ€è¦å¯ç”¨å®éªŒæ€§æ”¯æŒ (<code>"experimentalDecorators": true</code> in <code>tsconfig.json</code>)ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç±»è£…é¥°å™¨ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sealed</span>(<span class="hljs-params">constructor: <span class="hljs-built_in">Function</span></span>) {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor);
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">seal</span>(constructor.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>);
}

<span class="hljs-meta">@sealed</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Greeter</span> {
    <span class="hljs-attr">greeting</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span></span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span> = message;
    }
    <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">greeting</span>;
    }
}
</code></pre>
<hr/>
<h3 data-id="heading-13">å®ç”¨å·¥å…·ç±»å‹ (Utility Types)</h3>
<p>TypeScript å†…ç½®äº†ä¸€äº›éå¸¸æœ‰ç”¨çš„å·¥å…·ç±»å‹æ¥ç®€åŒ–å¸¸è§çš„ç±»å‹è½¬æ¢ã€‚</p>
<ul>
<li><code>Partial&lt;T&gt;</code>: æ„é€ ç±»å‹ <code>T</code>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸ºå¯é€‰çš„ã€‚</li>
<li><code>Readonly&lt;T&gt;</code>: æ„é€ ç±»å‹ <code>T</code>ï¼Œå¹¶å°†å®ƒæ‰€æœ‰çš„å±æ€§è®¾ç½®ä¸ºåªè¯»çš„ã€‚</li>
<li><code>Record&lt;K, T&gt;</code>: æ„é€ ä¸€ä¸ªç±»å‹ï¼Œå…¶å±æ€§åçš„ç±»å‹æ˜¯ <code>K</code>ï¼Œå±æ€§å€¼çš„ç±»å‹æ˜¯ <code>T</code>ã€‚</li>
<li><code>Pick&lt;T, K&gt;</code>: ä»ç±»å‹ <code>T</code> ä¸­é€‰æ‹©å‡ºå±æ€§ <code>K</code>ï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„ç±»å‹ã€‚</li>
<li><code>Omit&lt;T, K&gt;</code>: ä»ç±»å‹ <code>T</code> ä¸­æ’é™¤æ‰å±æ€§ <code>K</code>ï¼Œæ„é€ æˆä¸€ä¸ªæ–°çš„ç±»å‹ã€‚</li>
<li><code>Exclude&lt;T, U&gt;</code>: ä» <code>T</code> ä¸­æ’é™¤æ‰é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚</li>
<li><code>Extract&lt;T, U&gt;</code>: ä» <code>T</code> ä¸­æå–é‚£äº›å¯ä»¥èµ‹å€¼ç»™ <code>U</code> çš„ç±»å‹ã€‚</li>
<li><code>NonNullable&lt;T&gt;</code>: ä» <code>T</code> ä¸­æ’é™¤ <code>null</code> å’Œ <code>undefined</code>ã€‚</li>
<li><code>Parameters&lt;T&gt;</code>: è·å–å‡½æ•°ç±»å‹çš„å‚æ•°ç±»å‹ç»„æˆçš„å…ƒç»„ç±»å‹ã€‚</li>
<li><code>ReturnType&lt;T&gt;</code>: è·å–å‡½æ•°ç±»å‹çš„è¿”å›å€¼ç±»å‹ã€‚</li>
<li><code>InstanceType&lt;T&gt;</code>: è·å–æ„é€ å‡½æ•°ç±»å‹çš„å®ä¾‹ç±»å‹ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">interface Todo {
  title: string<span class="hljs-comment">;</span>
  description: string<span class="hljs-comment">;</span>
  completed: boolean<span class="hljs-comment">;</span>
}

type <span class="hljs-attr">TodoPreview</span> = Pick&lt;Todo, <span class="hljs-string">'title'</span> | <span class="hljs-string">'completed'</span>&gt;<span class="hljs-comment">; // { title: string; completed: boolean; }</span>

type <span class="hljs-attr">TodoInfo</span> = Omit&lt;Todo, <span class="hljs-string">'description'</span>&gt;<span class="hljs-comment">; // { title: string; completed: boolean; }</span>

type <span class="hljs-attr">Status</span> = <span class="hljs-string">'pending'</span> | <span class="hljs-string">'fulfilled'</span> | <span class="hljs-string">'rejected'</span><span class="hljs-comment">;</span>
type <span class="hljs-attr">SyncStatus</span> = Exclude&lt;Status, <span class="hljs-string">'pending'</span>&gt;<span class="hljs-comment">; // 'fulfilled' | 'rejected'</span>

function f1(s: string) { return { a: 1, b: s }<span class="hljs-comment">; }</span>
type <span class="hljs-attr">F1Params</span> = Parameters&lt;typeof f1&gt;<span class="hljs-comment">; // [s: string]</span>
type <span class="hljs-attr">F1ReturnType</span> = ReturnType&lt;typeof f1&gt;<span class="hljs-comment">; // { a: number; b: string; }</span>
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»]]></title>    <link>https://juejin.cn/post/7576863819981504521</link>    <guid>https://juejin.cn/post/7576863819981504521</guid>    <pubDate>2025-11-26T10:41:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819981504521" data-draft-id="7574621387574050862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T10:41:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="__èŠ±èŠ±ä¸–ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/1724480211391783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ—¥å¸¸å·¥ä½œå¼€å‘æŠ€å·§æ±‡æ€»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1724480211391783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    __èŠ±èŠ±ä¸–ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:41:21.000Z" title="Wed Nov 26 2025 10:41:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€JSç¯‡</h2>
<h4 data-id="heading-1">1. structuredClone æ·±æ‹·è´</h4>
<p><strong>JavaScript</strong> å†…ç½®äº†ä¸€ä¸ª <code>structuredClone()</code> çš„æ–¹æ³•ï¼Œ æ­¤æ–¹æ³•æä¾›äº†ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹æ³•æ¥æ·±åº¦å…‹éš†å¯¹è±¡ï¼Œ<strong>æ”¯æŒå¤æ‚æ•°æ®ç±»å‹</strong>ï¼ŒåŒ…æ‹¬Â <code>Date</code>ã€<code>RegExp</code>ã€<code>Map</code>ã€<code>Set</code>ã€<code>ArrayBuffer</code>ã€<code>Blob</code>ã€<code>File</code>Â ç­‰ã€‚æµè§ˆå™¨åº•å±‚å®ç°ï¼Œé€šå¸¸æ¯”æ‰‹åŠ¨é€’å½’æˆ– JSON æ–¹æ³•æ›´é«˜æ•ˆã€‚</p>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f56dcee5695b4ea081d4baee7741274b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=t1FHAqcqBJ1xz6FK0H9ziIf%2Fsek%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-2">2. å‡½æ•°å¼ç¼–ç¨‹</h4>
<p><strong>ES14</strong> æ›´æ–°äº†è®¸å¤šæ•°ç»„æ–¹æ³•æˆ–è€…ä¸ºåŸæœ‰çš„æ•°ç»„æ–¹æ³•å¢åŠ <strong>ä¸ä¼šå¸¦æ¥çªå˜(without mutation)</strong> çš„äº’è¡¥æ–¹æ³•ã€‚<code>æ„å‘³ç€å®ƒä»¬ä¼šåŸºäºåŸæ•°ç»„åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ã€‚</code></p>
<p>æ–°å¢çš„äº’è¡¥æ–¹æ³•æœ‰</p>
<ul>
<li><code>Array.sort() -&gt; Array.toSorted()</code></li>
<li><code>Array.splice() -&gt; Array.toSpliced()</code></li>
<li><code>Array.reverse() -&gt; Array.toReversed()</code></li>
</ul>
<p>æ–°å¢çš„æ–°æ•°ç»„æ–¹æ³•æœ‰ï¼š<code>Array.with()</code>ã€<code>Array.findLast()</code>ã€<code>Array.findLastIndex()</code></p>
<ul>
<li><code>Array.with()</code><br/>è¿”å›ä¸€ä¸ª<strong>æ–°æ•°ç»„</strong>ï¼Œå°†åŸæ•°ç»„ä¸­æŒ‡å®šç´¢å¼•Â <code>index</code>Â çš„å…ƒç´ æ›¿æ¢ä¸ºÂ <code>value</code>ï¼Œ<strong>ä¸ä¿®æ”¹åŸæ•°ç»„</strong></li>
</ul>
<p><strong>è¯­æ³•</strong>  <br/><code>index</code>ï¼šè¦æ›¿æ¢çš„å…ƒç´ çš„ç´¢å¼•ï¼ˆå¯ä»¥æ˜¯è´Ÿæ•°ï¼Œè¡¨ç¤ºä»æœ«å°¾å¼€å§‹è®¡æ•°ï¼‰ã€‚<br/>
<code>value</code>ï¼šæ›¿æ¢åçš„æ–°å€¼</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> newArray = array.<span class="hljs-title function_">with</span>(index, value)

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];
<span class="hljs-keyword">const</span> newArr = arr.<span class="hljs-title function_">with</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"hello"</span>); <span class="hljs-comment">// æ›¿æ¢ç´¢å¼• 1 çš„å…ƒç´  </span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr);    <span class="hljs-comment">// [1, 2, 3, 4]ï¼ˆåŸæ•°ç»„ä¸å˜ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr); <span class="hljs-comment">// [1, "hello", 3, 4]ï¼ˆæ–°æ•°ç»„ï¼‰</span>

<span class="hljs-comment">// æ”¯æŒè´Ÿæ•°ç´¢å¼•ï¼ˆä»æœ«å°¾å¼€å§‹ï¼‰</span>
<span class="hljs-keyword">const</span> newArr2 = arr.<span class="hljs-title function_">with</span>(-<span class="hljs-number">2</span>, <span class="hljs-string">"world"</span>); <span class="hljs-comment">// æ›¿æ¢å€’æ•°ç¬¬ 2 ä¸ªå…ƒç´ </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newArr2); <span class="hljs-comment">// [1, 2, "world", 4]</span>
</code></pre>
<ul>
<li>
<p><code>Array.findLast()</code><br/>ä»æ•°ç»„<strong>æœ«å°¾å‘å‰</strong>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³Â <code>callback</code>Â æ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å›Â <code>undefined</code></p>
</li>
<li>
<p><code>Array.findLastIndex()</code> <br/>ä»æ•°ç»„<strong>æœ«å°¾å‘å‰</strong>æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³Â <code>callback</code>Â æ¡ä»¶çš„å…ƒç´ ï¼Œå¹¶è¿”å›å…¶<strong>ç´¢å¼•</strong>ã€‚å¦‚æœæœªæ‰¾åˆ°ï¼Œè¿”å›Â <code>-1</code></p>
</li>
</ul>
<h4 data-id="heading-3">3. æƒ°æ€§å‡½æ•°</h4>
<p>JavaScript ä¸­çš„ <strong>æƒ°æ€§å‡½æ•°ï¼ˆLazy Functionï¼‰</strong> æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å‡½æ•°åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æˆ–åˆ¤æ–­é€»è¾‘ï¼Œå¹¶åœ¨æ‰§è¡Œåå°†è‡ªèº«é‡å®šä¹‰ä¸ºä¸€ä¸ªæ›´é«˜æ•ˆæˆ–æ›´ç®€å•çš„ç‰ˆæœ¬ï¼Œåç»­è°ƒç”¨å°±ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ–°ç‰ˆæœ¬ï¼Œé¿å…é‡å¤å¼€é”€</strong>ã€‚</p>
<p><strong>æ™®é€šå†™æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">copyToClipboard</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨Clipboard API</span>
    <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">clipboard</span>) {
      <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">clipboard</span>
        .<span class="hljs-title function_">writeText</span>(text)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-title class_">Message</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'å¤åˆ¶æˆåŠŸ'</span>)
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä½¿ç”¨Clipboard APIå¤åˆ¶å¤±è´¥: '</span>, err)
          <span class="hljs-comment">// å¦‚æœClipboard APIå¤±è´¥ï¼Œå°è¯•ä½¿ç”¨é™çº§æ–¹æ¡ˆ</span>
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text)
        })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœä¸æ”¯æŒClipboard APIï¼Œç›´æ¥ä½¿ç”¨é™çº§æ–¹æ¡ˆ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text)
    }
}
</code></pre>
<p><strong>æƒ°æ€§å†™æ³•</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">copyToClipboard</span>(<span class="hljs-params">text</span>) {
  <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶è¿›è¡Œèƒ½åŠ›æ£€æµ‹ï¼Œå¹¶é‡å®šä¹‰è‡ªèº«</span>
  <span class="hljs-keyword">if</span> (navigator.<span class="hljs-property">clipboard</span>) {
    <span class="hljs-comment">// æ”¯æŒ Clipboard API</span>
    copyToClipboard = <span class="hljs-keyword">function</span> (<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">return</span> navigator.<span class="hljs-property">clipboard</span>
        .<span class="hljs-title function_">writeText</span>(text)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡æœ¬å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿'</span>);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Clipboard API å¤åˆ¶å¤±è´¥:'</span>, err);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        });
    };
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ä¸æ”¯æŒ Clipboard APIï¼Œä½¿ç”¨ execCommand é™çº§æ–¹æ¡ˆ</span>
    copyToClipboard = <span class="hljs-keyword">function</span> (<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyUsingExecCommand</span>(text);
    };
  }

  <span class="hljs-comment">// æ‰§è¡Œç¬¬ä¸€æ¬¡è°ƒç”¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">copyToClipboard</span>(text);
}
</code></pre>
<h2 data-id="heading-4">äºŒã€CSSç¯‡</h2>
<h4 data-id="heading-5">1. æ»šåŠ¨å¸é™„</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"Snap"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">overflow-x</span>: scroll;
  // å¸é™„æ•ˆæœ mandatory: å¿…é¡»å¸é™„  proximity: é è¿‘æ—¶å¸é™„
  scroll-snap-type: x mandatory;
  <span class="hljs-selector-class">.item</span> {
    <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ccc</span>;
    // å¸é™„ä½ç½®
    <span class="hljs-attribute">scroll-snap-align</span>: start;
    <span class="hljs-attribute">scroll-snap-stop</span>: always;
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f56c6c</span>;
    }
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#67c23a</span>;
    }
    &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409eff</span>;
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-6">å…¼å®¹æ€§è¾ƒé«˜</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4327c9d267b84ae8bcf5aa54f36681c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=np5sbIn%2B2aSmOTYIg3slPaJF2aU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-7">2. å­—ä½“è‡ªé€‚åº”å®¹å™¨å¤§å°</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­—ä½“è‡ªé€‚åº”å®¹å™¨å¤§å°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">background-color</span>: aquamarine;
  container-type: inline-size; // å¯ç”¨å®¹å™¨æŸ¥è¯¢ size:åŸºäºå®½é«˜ / inline-size åŸºäºå®½åº¦ / normal ä¸å¯ç”¨
  p {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5</span>cqh;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-8">å…¼å®¹æ€§è¿˜è¡Œ</h5>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e230868923f34c4dbca1b082b089f37d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=r4u88S18aAeewAVFsBFoTVZO4Lg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">3. é€‰æ‹©å™¨</h4>
<ul>
<li><strong>é€‰æ‹©å™¨ç‰¹å®šæ€§</strong>ï¼ˆé€šå¸¸å«åšé€‰æ‹©å™¨æƒé‡ï¼‰</li>
</ul>
<p>å½“å¸Œæœ›æŸä¸ªcsså±æ€§ä¼˜å…ˆçº§é«˜äºå…¶ä»–å±æ€§å€¼æ—¶ï¼Œå°½é‡ä¸è¦ä½¿ç”¨<code>!important</code>ï¼Œ<code>!important</code>ä¼šæ‰“ç ´è¿™äº›å›ºæœ‰çš„çº§è”è§„åˆ™ï¼Œä½¿å¾—æ ·å¼çš„åº”ç”¨å˜å¾—ä¸é‚£ä¹ˆå¯é¢„æµ‹ã€‚è¿™å¯èƒ½ä¼šå¯¼è‡´æ ·å¼è¡¨éš¾ä»¥ç»´æŠ¤å’Œç†è§£ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹é¡¹ç›®ä¸­ã€‚å¢åŠ è°ƒè¯•éš¾åº¦ï¼Œä¹Ÿé™åˆ¶äº†æ ·å¼çš„çµæ´»æ€§ã€‚</p>
<p><strong>æ›¿ä»£æ–¹æ¡ˆï¼š</strong>
é€šè¿‡ç¼–å†™æ›´å…·ä½“ï¼ˆæˆ–æ›´ç²¾ç¡®ï¼‰çš„é€‰æ‹©å™¨æ¥è¦†ç›–æ ·å¼ï¼Œæˆ–è€…å åŠ é€‰æ‹©å™¨ï¼Œæ¯”å¦‚ï¼š222</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.el-button</span><span class="hljs-selector-class">.el-button</span> {
    <span class="hljs-attribute">color</span>: red;
}
</code></pre>
<ul>
<li><strong>æ–°å‹é€‰æ‹©å™¨</strong></li>
</ul>
<p><strong><code>:has()</code>é€‰æ‹©å™¨ï¼š</strong> æ ¹æ®ä¸€ä¸ªå…ƒç´ æ˜¯å¦åŒ…å«æŸäº›ç‰¹å®šçš„åä»£å…ƒç´ ï¼Œæˆ–è€…å…¶åçš„åŒçº§å…ƒç´ æ˜¯å¦æ»¡è¶³æŸäº›æ¡ä»¶ï¼Œæ¥é€‰ä¸­è¯¥å…ƒç´ æœ¬èº«ã€‚è¿™å®ç°äº†â€œå‘ä¸‹â€è§‚å¯Ÿçš„èƒ½åŠ›ã€‚</p>
<p><strong>ç¤ºä¾‹1ï¼š</strong> é€‰æ‹©åŒ…å« <code>&lt;img&gt;</code> çš„ <code>&lt;div&gt;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¿™ä¸ª div æ²¡æœ‰å›¾ç‰‡ï¼Œä¸ä¼šè¢«é€‰ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"example.jpg"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>&gt;</span>
    è¿™ä¸ª div åŒ…å«å›¾ç‰‡ï¼Œä¼šè¢«çº¢è‰²è¾¹æ¡†åŒ…å›´
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€‰æ‹©åŒ…å« &lt;img&gt; çš„ div */</span> 
<span class="hljs-selector-tag">div</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">img</span>) {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid red; <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
}
</code></pre>
<p><strong>ç¤ºä¾‹2ï¼š</strong> é€‰æ‹©ç´§è·Ÿç€ <code>&lt;p&gt;</code> çš„ <code>&lt;h2&gt;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™ä¸ª h2 åé¢æ²¡æœ‰ç´§è·Ÿç€ pï¼Œä¸ä¼šè¢«é€‰ä¸­<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åˆ†éš”å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>è¿™ä¸ª h2 åé¢ç´§è·Ÿç€ p<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™ä¸ª p æ˜¯ h2 çš„ç´§é‚»å…„å¼Ÿå…ƒç´ ï¼Œå› æ­¤ h2 ä¼šå˜æˆè“è‰²æ–œä½“<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é€‰æ‹©åé¢ç´§è·Ÿç€ &lt;p&gt; çš„ h2 */</span>
<span class="hljs-selector-tag">h2</span><span class="hljs-selector-pseudo">:has</span>(+ <span class="hljs-selector-tag">p</span>) {
    <span class="hljs-attribute">color</span>: blue; <span class="hljs-attribute">font-style</span>: italic;
}
</code></pre>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efa8564f41134e47ae0fcfdef826952b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=sDA5b43VZ5wPnfwjzbdece7iJlU%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>:is()</code>é€‰æ‹©å™¨ï¼š</strong> å®ƒæ¥å—ä¸€ä¸ªé€—å·åˆ†éš”çš„é€‰æ‹©å™¨åˆ—è¡¨ä½œä¸ºå‚æ•°ï¼Œå¹¶åŒ¹é…å…¶ä¸­ä»»æ„ä¸€ä¸ªé€‰æ‹©å™¨ã€‚è¿™æœ‰åŠ©äºå‡å°‘å†—ä½™ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚<code>:is()</code>Â çš„æƒé‡ç­‰äºå®ƒæ‹¬å·é‡Œæ‰€æœ‰é€‰æ‹©å™¨ä¸­æƒé‡æœ€é«˜çš„é‚£ä¸ªã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ header çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ main çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™æ˜¯ footer çš„ h1ï¼ˆç´«è‰²ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>è¿™ä¸ª h1 ä¸åœ¨ :is() èŒƒå›´å†…ï¼Œä¿æŒé»˜è®¤é¢œè‰²<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç»Ÿä¸€è®¾ç½® headerã€mainã€footer ä¸‹çš„ h1 æ ·å¼ */</span>
<span class="hljs-selector-pseudo">:is</span>(<span class="hljs-selector-tag">header</span>, <span class="hljs-selector-tag">main</span>, <span class="hljs-selector-tag">footer</span>) <span class="hljs-selector-tag">h1</span> {
    <span class="hljs-attribute">color</span>: purple; <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
}
</code></pre>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/892277d505d948f6b61481cc02b3d4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=3YQLihRTHYObL6AU3nb0rNQYAdw%3D" alt="image.png" loading="lazy"/></p>
<p><strong><code>:where()</code>é€‰æ‹©å™¨ï¼š</strong> ä¸Â <code>:is()</code>Â ç±»ä¼¼ï¼Œä½†æƒé‡æ°¸è¿œä¸º 0ï¼Œé€‚åˆé»˜è®¤æ ·å¼ã€‚</p>
<p><strong>å…¼å®¹æ€§</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5818dff5442848959d448ea4fa93f8aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX1_oirHoirHkuJbnlYw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764758481&amp;x-signature=MYqlBPUofbEppMEMhfD911X6ga0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">ä¸‰ã€VUEç¯‡</h2>
<h4 data-id="heading-11">1. v-memo</h4>
<p>Vue 3 æä¾›çš„æ€§èƒ½ä¼˜åŒ–æŒ‡ä»¤ï¼Œå…¶ä½œç”¨æ˜¯é€šè¿‡ç¼“å­˜æ¨¡æ¿å­æ ‘çš„æ¸²æŸ“ç»“æœï¼Œä»…åœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶é‡æ–°æ¸²æŸ“ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„è™šæ‹Ÿ DOM è®¡ç®—å’Œæ›´æ–°æ“ä½œã€‚</p>
<p><code>v-memo</code>Â æ¥æ”¶ä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼šä¼˜åŒ–å¤§å‹åˆ—è¡¨æ¸²æŸ“ï¼Œé¿å…å…¨é‡æ›´æ–°ã€‚
å½“Â <code>item.id</code>Â æˆ–Â <code>item.status</code>Â å˜åŒ–æ—¶ï¼Œä»…æ›´æ–°å¯¹åº”é¡¹ï¼›å…¶ä»–é¡¹å¤ç”¨ç¼“å­˜ç»“æœ</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in list"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span> <span class="hljs-attr">v-memo</span>=<span class="hljs-string">"[item.id, item.status]"</span>&gt;</span>
  {{ item.content }}
  <span class="hljs-tag">&lt;<span class="hljs-name">StatusBadge</span> <span class="hljs-attr">:status</span>=<span class="hljs-string">"item.status"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h4 data-id="heading-12">2. watch â€”â€” å‰¯ä½œç”¨å’Œæ·±åº¦ç›‘å¬</h4>
<h4 data-id="heading-13">3. customRef â€”â€”â€” è‡ªå®šä¹‰å“åº”å¼ä¾èµ–è¿½è¸ª</h4>
<h4 data-id="heading-14">4. ç»„ä»¶çš„äºŒæ¬¡å°è£…</h4>
<h2 data-id="heading-15">å››ã€Chromeæµè§ˆå™¨è°ƒè¯•æŠ€å·§</h2>
<h4 data-id="heading-16">1. <code>$0</code></h4>
<h4 data-id="heading-17">2. æ¨¡æ‹Ÿèšç„¦ç½‘é¡µ</h4>
<h4 data-id="heading-18">3. é‡æ”¾XHR</h4>
<h2 data-id="heading-19">äº”ã€VSCodeç¼–è¾‘å™¨æ’ä»¶åˆ†äº«</h2>
<h4 data-id="heading-20">1. i18n Ally</h4>
<ul>
<li>ä»£ç å†…ç›´æ¥é¢„è§ˆç¿»è¯‘æ–‡æœ¬</li>
<li>å¿«é€Ÿç”Ÿæˆåˆå§‹ç¿»è¯‘</li>
<li>ä¸€é”®è·³è½¬è‡³å¯¹åº”ç¿»è¯‘æ¡ç›®</li>
<li>é›†ä¸­ç®¡ç†</li>
</ul>

<pre><code class="hljs language-json" lang="json">  <span class="hljs-attr">"i18n-ally.localesPaths"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"./src/i18n/lang/locales"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æ–‡ä»¶å¤¹è·¯å¾„</span>
  <span class="hljs-attr">"i18n-ally.pathMatcher"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"{locale}/**/{namespace}.json"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘ç›®æ ‡æ–‡ä»¶è·¯å¾„åŒ¹é…</span>
  <span class="hljs-attr">"i18n-ally.keystyle"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"nested"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘è·¯å¾„æ ¼å¼,</span>
  <span class="hljs-attr">"i18n-ally.sourceLanguage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zh-CN"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æºè¯­è¨€</span>
  <span class="hljs-attr">"i18n-ally.displayLanguage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zh-CN"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">//æ˜¾ç¤ºè¯­è¨€ï¼Œ è¿™é‡Œä¹Ÿå¯ä»¥è®¾ç½®æ˜¾ç¤ºè‹±æ–‡ä¸ºen</span>
  <span class="hljs-attr">"i18n-ally.sortKeys"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ˜¯å¦è‡ªåŠ¨æ’åº</span>
  <span class="hljs-attr">"i18n-ally.namespace"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ˜¯å¦å¯ç”¨å‘½åç©ºé—´ï¼Œä¸€èˆ¬åœ¨ç§¯æ”’å¤šä¸ªå¾…ç¿»è¯‘æ–‡æ¡ˆæ—¶å¯ç”¨ï¼Œå¯ä»¥è‡ªåŠ¨ç¼–è¾‘è‡³å¯¹åº”æ–‡ä»¶ä¸­</span>
  <span class="hljs-attr">"i18n-ally.enabledParsers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"ts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"js"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"json"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç¿»è¯‘æ–‡ä»¶å¯å…è®¸çš„æ ¼å¼ï¼Œé»˜è®¤json</span>
</code></pre>
<h4 data-id="heading-21">2. koroFileHeader @4.9.2</h4>
<p>ç”¨äºç”Ÿæˆæ–‡ä»¶å¤´éƒ¨æ³¨é‡Šå’Œå‡½æ•°æ³¨é‡Šçš„æ’ä»¶</p>
<p><strong>å¿«æ·é”®</strong>â€Œï¼š</p>
<ul>
<li>å¤´éƒ¨æ³¨é‡Šï¼š<code>Ctrl+Win+I</code>ï¼ˆWindows/Linuxï¼‰æˆ–Â <code>Ctrl+Cmd+I</code>ï¼ˆMacï¼‰</li>
<li>å‡½æ•°æ³¨é‡Šï¼š<code>Ctrl+Win+T</code>ï¼ˆWindows/Linuxï¼‰æˆ–Â <code>Ctrl+Cmd+T</code>ï¼ˆMacï¼‰</li>
</ul>

<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å¤´éƒ¨æ³¨é‡Š</span>
<span class="hljs-attr">"fileheader.customMade"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
<span class="hljs-attr">"Author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git config user.name &amp;&amp; git config user.email"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// åŒæ—¶è·å–ç”¨æˆ·åä¸é‚®ç®±</span>
<span class="hljs-attr">"Date"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
<span class="hljs-attr">"LastEditors"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"git config user.name &amp;&amp; git config user.email"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶æœ€åç¼–è¾‘è€… ä¸Authorå­—æ®µä¸€è‡´</span>
<span class="hljs-attr">"LastEditTime"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶æœ€åç¼–è¾‘æ—¶é—´</span>
<span class="hljs-attr">"FilePath"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Do not edit"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ–‡ä»¶åœ¨é¡¹ç›®ä¸­çš„ç›¸å¯¹è·¯å¾„ è‡ªåŠ¨æ›´æ–°</span>
<span class="hljs-attr">"Description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span> <span class="hljs-comment">// æ–‡ä»¶æè¿°</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7576859594359439360</link>    <guid>https://juejin.cn/post/7576859594359439360</guid>    <pubDate>2025-11-26T10:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576859594359439360" data-draft-id="7576681897298231311" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T10:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="www_stdio"/> <meta itemprop="url" content="https://juejin.cn/user/631558156323657"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/631558156323657/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    www_stdio
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:45:29.000Z" title="Wed Nov 26 2025 10:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ˆï¼ˆStackï¼‰è¯¦è§£ï¼šä»åŸç†åˆ°å®ç°ï¼Œå†åˆ°æ‹¬å·åŒ¹é…åº”ç”¨</h2>
<p>æ ˆæ˜¯ä¸€ç§åŸºç¡€è€Œé‡è¦çš„çº¿æ€§æ•°æ®ç»“æ„ï¼Œåœ¨è®¡ç®—æœºç§‘å­¦ä¸­è¢«å¹¿æ³›åº”ç”¨äºå‡½æ•°è°ƒç”¨ã€è¡¨è¾¾å¼æ±‚å€¼ã€å›æº¯ç®—æ³•ç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†å›´ç»•æ ˆçš„å®šä¹‰ã€æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰ã€ES6 å®ç°æ–¹å¼ï¼ˆæ•°ç»„ä¸é“¾è¡¨ï¼‰ã€æ€§èƒ½å¯¹æ¯”ï¼Œä»¥åŠä¸€ä¸ªç»å…¸åº”ç”¨åœºæ™¯â€”â€”<strong>æ‹¬å·åŒ¹é…é—®é¢˜</strong>ï¼Œè¿›è¡Œç³»ç»Ÿè®²è§£ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯æ ˆï¼Ÿ</h3>
<p>æ ˆï¼ˆStackï¼‰æ˜¯ä¸€ç§éµå¾ª <strong>å…ˆè¿›åå‡ºï¼ˆFirst In Last Out, FILOï¼‰</strong> åŸåˆ™çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€æ‘ç›˜å­ï¼šä½ åªèƒ½ä»é¡¶éƒ¨æ”¾å…¥ï¼ˆå…¥æ ˆï¼‰æˆ–å–å‡ºï¼ˆå‡ºæ ˆï¼‰ç›˜å­ï¼Œä¸èƒ½ä»ä¸­é—´æˆ–åº•éƒ¨æ“ä½œã€‚</p>
<h4 data-id="heading-2">æ ˆçš„æ ¸å¿ƒæ“ä½œåŒ…æ‹¬ï¼š</h4>
<ul>
<li><strong>push(x)</strong> ï¼šå°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚</li>
<li><strong>pop()</strong> ï¼šå¼¹å‡ºå¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚</li>
<li><strong>peek() / top()</strong> ï¼šæŸ¥çœ‹æ ˆé¡¶å…ƒç´ ä½†ä¸ç§»é™¤ã€‚</li>
<li><strong>isEmpty()</strong> ï¼šåˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©ºã€‚</li>
<li><strong>size()</strong> ï¼šè·å–æ ˆä¸­å…ƒç´ ä¸ªæ•°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">äºŒã€æ ˆçš„æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆADTï¼‰</h3>
<p>æŠ½è±¡æ•°æ®ç±»å‹ï¼ˆAbstract Data Type, ADTï¼‰æ˜¯å¯¹æ•°æ®ç»“æ„è¡Œä¸ºçš„è§„èŒƒæè¿°ï¼Œä¸æ¶‰åŠå…·ä½“å®ç°ã€‚æ ˆçš„ ADT åº”åŒ…å«ä»¥ä¸‹å±æ€§å’Œæ–¹æ³•ï¼š</p>

































<table><thead><tr><th>å±æ€§/æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>size</code></td><td>åªè¯»å±æ€§ï¼Œè¿”å›å½“å‰æ ˆçš„å¤§å°</td></tr><tr><td><code>isEmpty()</code></td><td>åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º</td></tr><tr><td><code>push(val)</code></td><td>å…¥æ ˆæ“ä½œ</td></tr><tr><td><code>pop()</code></td><td>å‡ºæ ˆæ“ä½œï¼Œè‹¥æ ˆç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>peek()</code></td><td>è¿”å›æ ˆé¡¶å…ƒç´ ï¼Œè‹¥æ ˆç©ºåˆ™æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><code>toArray()</code></td><td>ï¼ˆå¯é€‰ï¼‰å°†æ ˆå†…å®¹è½¬æ¢ä¸ºæ•°ç»„ï¼Œä¾¿äºè°ƒè¯•æˆ–è¾“å‡º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">ä¸‰ã€ES6 Class å®ç°æ ˆ</h3>
<p>ES6 å¼•å…¥äº† <code>class</code> è¯­æ³•ï¼Œä½¿é¢å‘å¯¹è±¡ç¼–ç¨‹æ›´åŠ æ¸…æ™°ã€‚ç»“åˆç§æœ‰å­—æ®µï¼ˆ<code>#</code>ï¼‰ã€<code>get</code> è®¿é—®å™¨ç­‰ç‰¹æ€§ï¼Œå¯ä»¥ä¼˜é›…åœ°å°è£…æ ˆçš„å®ç°ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5">1. åŸºäºé“¾è¡¨å®ç°æ ˆï¼ˆLinkedListStackï¼‰</h4>
<p>é“¾è¡¨å¤©ç„¶é€‚åˆåŠ¨æ€å¢é•¿ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«å€¼å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span> {
    <span class="hljs-keyword">constructor</span>(<span class="hljs-keyword">val</span>) {
        <span class="hljs-keyword">this</span>.<span class="hljs-keyword">val</span> = <span class="hljs-keyword">val</span>;
        <span class="hljs-keyword">this</span>.next = <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedListStack</span> {
    #stackPeek = <span class="hljs-literal">null</span>; <span class="hljs-comment">// ç§æœ‰æ ˆé¡¶æŒ‡é’ˆ</span>
    #size = <span class="hljs-number">0</span>;

    push(num) {
        <span class="hljs-keyword">const</span> node = new ListNode(num);
        node.next = <span class="hljs-keyword">this</span>.#stackPeek;
        <span class="hljs-keyword">this</span>.#stackPeek = node;
        <span class="hljs-keyword">this</span>.#size++;
    }

    pop() {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.#stackPeek) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> = <span class="hljs-keyword">this</span>.#stackPeek.<span class="hljs-keyword">val</span>;
        <span class="hljs-keyword">this</span>.#stackPeek = <span class="hljs-keyword">this</span>.#stackPeek.next;
        <span class="hljs-keyword">this</span>.#size--;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">val</span>;
    }

    peek() {
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.#stackPeek) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">'æ ˆä¸ºç©º'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stackPeek.<span class="hljs-keyword">val</span>;
    }

    <span class="hljs-keyword">get</span> size() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#size; }
    isEmpty() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#size === <span class="hljs-number">0</span>; }

    toArray() {
        let node = <span class="hljs-keyword">this</span>.#stackPeek;
        <span class="hljs-keyword">const</span> res = new Array(<span class="hljs-keyword">this</span>.#size);
        <span class="hljs-keyword">for</span> (let i = res.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
            res[i] = node.<span class="hljs-keyword">val</span>;
            node = node.next;
        }
        <span class="hljs-keyword">return</span> res;
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šåŠ¨æ€æ‰©å®¹ï¼Œæ— ç©ºé—´æµªè´¹ï¼›æ’å…¥/åˆ é™¤å‡ä¸º O(1)<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼šæ¯ä¸ªèŠ‚ç‚¹éœ€é¢å¤–å­˜å‚¨æŒ‡é’ˆï¼Œå†…å­˜å¼€é”€ç•¥å¤§</p>
</blockquote>
<hr/>
<h4 data-id="heading-6">2. åŸºäºæ•°ç»„å®ç°æ ˆï¼ˆArrayStackï¼‰</h4>
<p>åˆ©ç”¨ JavaScript æ•°ç»„çš„ <code>push</code> å’Œ <code>pop</code> æ–¹æ³•ï¼Œå¯å¿«é€Ÿå®ç°æ ˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayStack</span> {
    #stack = [];

    <span class="hljs-keyword">get</span> size() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack.length; }
    isEmpty() { <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.size === <span class="hljs-number">0</span>; }

    push(num) {
        <span class="hljs-keyword">this</span>.#stack.push(num);
    }

    pop() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack.pop();
    }

    peek() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isEmpty()) <span class="hljs-keyword">throw</span> new Error(<span class="hljs-string">"æ ˆä¸ºç©º"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.#stack[<span class="hljs-keyword">this</span>.size - <span class="hljs-number">1</span>];
    }

    toArray() {
        <span class="hljs-keyword">return</span> [...<span class="hljs-keyword">this</span>.#stack]; <span class="hljs-comment">// è¿”å›å‰¯æœ¬æ›´å®‰å…¨</span>
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜ç‚¹</strong>ï¼šç¼“å­˜å‹å¥½ï¼Œè®¿é—®å¿«ï¼›ä»£ç ç®€æ´<br/>
âŒ <strong>ç¼ºç‚¹</strong>ï¼šæ‰©å®¹æ—¶éœ€å¤åˆ¶æ•´ä¸ªæ•°ç»„ï¼ˆO(n)ï¼‰ï¼Œä½†å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä»ä¸º O(1)</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">å››ã€æ•°ç»„ vs é“¾è¡¨å®ç°æ ˆï¼šæ€§èƒ½å¯¹æ¯”</h3>






























<table><thead><tr><th>ç»´åº¦</th><th>æ•°ç»„å®ç°</th><th>é“¾è¡¨å®ç°</th></tr></thead><tbody><tr><td><strong>æ—¶é—´æ•ˆç‡</strong></td><td>å¹³å‡ O(1)ï¼Œæ‰©å®¹æ—¶ O(n)</td><td>ç¨³å®š O(1)</td></tr><tr><td><strong>ç©ºé—´æ•ˆç‡</strong></td><td>å¯èƒ½æœ‰é¢„åˆ†é…ç©ºé—´æµªè´¹</td><td>æ¯ä¸ªèŠ‚ç‚¹å¤šä¸€ä¸ªæŒ‡é’ˆå¼€é”€</td></tr><tr><td><strong>å†…å­˜å¸ƒå±€</strong></td><td>è¿ç»­å†…å­˜ï¼Œç¼“å­˜å‘½ä¸­ç‡é«˜</td><td>ç¦»æ•£å†…å­˜ï¼Œç¼“å­˜å±€éƒ¨æ€§å·®</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ•°æ®é‡å¯é¢„ä¼°ã€è¿½æ±‚é€Ÿåº¦</td><td>åŠ¨æ€æ€§å¼ºã€å†…å­˜æ•æ„Ÿ</td></tr></tbody></table>
<blockquote>
<p>ğŸ’¡ åœ¨å¤§å¤šæ•°å®é™…åº”ç”¨ä¸­ï¼Œ<strong>æ•°ç»„å®ç°çš„æ ˆæ›´å¸¸ç”¨</strong>ï¼Œå› ä¸ºå…¶ç®€å•é«˜æ•ˆï¼Œä¸”ç°ä»£ JavaScript å¼•æ“å¯¹æ•°ç»„ä¼˜åŒ–æä½³ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">äº”ã€å®æˆ˜åº”ç”¨ï¼šæ‹¬å·åŒ¹é…é—®é¢˜</h3>
<p>æ ˆçš„ç»å…¸åº”ç”¨åœºæ™¯ä¹‹ä¸€æ˜¯<strong>éªŒè¯æ‹¬å·å­—ç¬¦ä¸²æ˜¯å¦åˆæ³•</strong>ã€‚ä¾‹å¦‚ï¼š<code>"([{}])"</code> åˆæ³•ï¼Œè€Œ <code>"([)]"</code> ä¸åˆæ³•ã€‚</p>
<h4 data-id="heading-9">è§£é¢˜æ€è·¯ï¼š</h4>
<ol>
<li>é‡åˆ°å·¦æ‹¬å· <code>(</code>ã€<code>[</code>ã€<code>{</code>ï¼Œå°†å…¶å¯¹åº”çš„å³æ‹¬å·å‹å…¥æ ˆï¼›</li>
<li>é‡åˆ°å³æ‹¬å·ï¼Œæ£€æŸ¥æ˜¯å¦ä¸æ ˆé¡¶å…ƒç´ åŒ¹é…ï¼›</li>
<li>è‹¥ä¸åŒ¹é…æˆ–æ ˆä¸ºç©ºï¼Œåˆ™éæ³•ï¼›</li>
<li>éå†ç»“æŸåï¼Œæ ˆå¿…é¡»ä¸ºç©ºæ‰åˆæ³•ã€‚</li>
</ol>
<h4 data-id="heading-10">ä»£ç å®ç°ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-type">const</span> leftToRight = {
    <span class="hljs-string">"("</span>: <span class="hljs-string">")"</span>,
    <span class="hljs-string">"["</span>: <span class="hljs-string">"]"</span>,
    <span class="hljs-string">"{"</span>: <span class="hljs-string">"}"</span>
};

<span class="hljs-function">function <span class="hljs-title">isValid</span><span class="hljs-params">(s)</span> </span>{
    <span class="hljs-keyword">if</span> (!s) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    <span class="hljs-type">const</span> stack = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> ch of s) {
        <span class="hljs-keyword">if</span> (ch in leftToRight) {
            stack.<span class="hljs-built_in">push</span>(leftToRight[ch]); <span class="hljs-comment">// å‹å…¥æœŸæœ›çš„å³æ‹¬å·</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (!stack.length || stack.<span class="hljs-built_in">pop</span>() !== ch) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// ä¸åŒ¹é…æˆ–æ ˆç©º</span>
            }
        }
    }
    <span class="hljs-keyword">return</span> stack.length === <span class="hljs-number">0</span>; <span class="hljs-comment">// å¿…é¡»å®Œå…¨åŒ¹é…</span>
}
</code></pre>
<blockquote>
<p>âœ… æ—¶é—´å¤æ‚åº¦ï¼šO(n)<br/>
âœ… ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼ˆæœ€åæƒ…å†µå…¨ä¸ºå·¦æ‹¬å·ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">å…­ã€æ€»ç»“</h3>
<ul>
<li>æ ˆæ˜¯ä¸€ç§ <strong>FILO</strong> çš„çº¿æ€§ç»“æ„ï¼Œæ ¸å¿ƒæ“ä½œä¸º <code>push</code>ã€<code>pop</code>ã€<code>peek</code>ã€‚</li>
<li>ES6 çš„ <code>class</code>ã€ç§æœ‰å­—æ®µ <code>#</code> å’Œ <code>get</code> è®¿é—®å™¨ï¼Œè®©æ ˆçš„å®ç°æ›´å®‰å…¨ã€æ›´æ¸…æ™°ã€‚</li>
<li><strong>æ•°ç»„å®ç°</strong>ç®€å•é«˜æ•ˆï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼›<strong>é“¾è¡¨å®ç°</strong>åŠ¨æ€çµæ´»ï¼Œé€‚åˆä¸ç¡®å®šè§„æ¨¡çš„åœºæ™¯ã€‚</li>
<li>æ ˆåœ¨ç®—æ³•ä¸­ç”¨é€”å¹¿æ³›ï¼Œå¦‚æ‹¬å·åŒ¹é…ã€è¡¨è¾¾å¼æ±‚å€¼ã€æ·±åº¦ä¼˜å…ˆæœç´¢ï¼ˆDFSï¼‰ç­‰ã€‚</li>
</ul>
<p>æŒæ¡æ ˆï¼Œä¸ä»…æ˜¯ç†è§£æ•°æ®ç»“æ„çš„ç¬¬ä¸€æ­¥ï¼Œæ›´æ˜¯æ‰“å¼€ç®—æ³•ä¸–ç•Œå¤§é—¨çš„é’¥åŒ™ã€‚</p>
<hr/>
<blockquote>
<p>ğŸ“Œ æç¤ºï¼šåœ¨å®é™…å¼€å‘ä¸­ï¼Œé™¤éæœ‰ç‰¹æ®Šéœ€æ±‚ï¼ˆå¦‚é™åˆ¶ä½¿ç”¨å†…ç½®æ•°ç»„æ–¹æ³•ï¼‰ï¼Œå¦åˆ™ç›´æ¥ä½¿ç”¨ <code>Array</code> çš„ <code>push</code>/<code>pop</code> å³å¯é«˜æ•ˆæ¨¡æ‹Ÿæ ˆè¡Œä¸ºã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7576821684252311595</link>    <guid>https://juejin.cn/post/7576821684252311595</guid>    <pubDate>2025-11-26T10:38:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252311595" data-draft-id="7576841976928321572" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T10:38:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiåˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1734350779716649"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue.jsä¸­çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1734350779716649/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiåˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:38:22.000Z" title="Wed Nov 26 2025 10:38:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Vue.jså¼€å‘ä¸­ï¼Œç»„ä»¶åŒ–æ¶æ„ä½¿å¾—ä»£ç æ›´æ¨¡å—åŒ–å’Œå¯ç»´æŠ¤ï¼Œä½†æœ‰æ—¶çˆ¶ç»„ä»¶éœ€è¦ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œä¾‹å¦‚è§¦å‘å­ç»„ä»¶çš„ç‰¹å®šåŠŸèƒ½æˆ–çŠ¶æ€æ›´æ–°ã€‚æœ¬æ–‡å°†é‡ç‚¹è®²è§£å¦‚ä½•ä½¿ç”¨refså®ç°è¿™ä¸€éœ€æ±‚ï¼Œé¿å…æ³›æ³›è€Œè°ˆï¼Œç¡®ä¿å†…å®¹æ·±åº¦å’Œé€»è¾‘æ¸…æ™°ã€‚</p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>Vue.jsç»„ä»¶é€šå¸¸é€šè¿‡propså‘ä¸‹ä¼ é€’æ•°æ®å’Œäº‹ä»¶å‘ä¸Šé€šä¿¡æ¥ä¿æŒç‹¬ç«‹æ€§ã€‚ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œçˆ¶ç»„ä»¶å¯èƒ½éœ€è¦ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨çˆ¶ç»„ä»¶ä¸­è§¦å‘å­ç»„ä»¶çš„é‡ç½®æˆ–è®¡ç®—æ“ä½œã€‚ä½¿ç”¨refsæ˜¯ä¸€ç§ç›´æ¥ä¸”é«˜æ•ˆçš„æ–¹å¼ï¼Œä½†å®ƒéœ€è¦è°¨æ…ä½¿ç”¨ä»¥é¿å…ç ´åç»„ä»¶çš„å°è£…æ€§ã€‚</p>
<h2 data-id="heading-1">ä½¿ç”¨refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</h2>
<p>refsæ˜¯Vue.jsæä¾›çš„ç‰¹æ€§ï¼Œå…è®¸çˆ¶ç»„ä»¶é€šè¿‡å¼•ç”¨ç›´æ¥è®¿é—®å­ç»„ä»¶çš„å®ä¾‹ã€‚è¿™ç§æ–¹æ³•ç®€å•ç›´æ¥ï¼Œä½†éœ€æ³¨æ„å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œç¡®ä¿åœ¨ç»„ä»¶æŒ‚è½½åè°ƒç”¨ã€‚</p>
<h3 data-id="heading-2">å®ç°æ­¥éª¤</h3>
<ol>
<li><strong>åœ¨å­ç»„ä»¶ä¸­å®šä¹‰å†…éƒ¨æ–¹æ³•</strong>ï¼šå­ç»„ä»¶éœ€è¦æš´éœ²ä¸€ä¸ªå¯ä¾›è°ƒç”¨çš„æ–¹æ³•ã€‚</li>
<li><strong>åœ¨çˆ¶ç»„ä»¶æ¨¡æ¿ä¸­æ·»åŠ refå±æ€§</strong>ï¼šä¸ºå­ç»„ä»¶æ ‡ç­¾è®¾ç½®refï¼Œä»¥ä¾¿åœ¨çˆ¶ç»„ä»¶ä¸­å¼•ç”¨ã€‚</li>
<li>**åœ¨çˆ¶ç»„ä»¶ä¸­é€šè¿‡<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mi>e</mi><mi>f</mi><mi>s</mi><mtext>è°ƒç”¨æ–¹æ³•</mtext><mo>âˆ—</mo><mo>âˆ—</mo><mtext>ï¼šä½¿ç”¨</mtext><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">refsè°ƒç”¨æ–¹æ³•**ï¼šä½¿ç”¨this.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"/><span class="mord mathnormal">re</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">è°ƒç”¨æ–¹æ³•</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">âˆ—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.6944em;"/><span class="mord">âˆ—</span><span class="mord cjk_fallback">ï¼šä½¿ç”¨</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>refsè®¿é—®å­ç»„ä»¶å®ä¾‹å¹¶æ‰§è¡Œæ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-3">ä»£ç ç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå±•ç¤ºçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶çš„internalMethodæ–¹æ³•ã€‚ç¤ºä¾‹åŸºäºVue 2.xç‰ˆæœ¬ï¼Œä»£ç ä¸¥è°¨ä¸”å¯è¿è¡Œã€‚</p>
<h4 data-id="heading-4">å­ç»„ä»¶ä»£ç  (ChildComponent.vue)</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å­ç»„ä»¶å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">internalMethod</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å†…éƒ¨æ–¹æ³•ç¤ºä¾‹ï¼šæ›´æ–°æ•°æ®æˆ–æ‰§è¡Œæ“ä½œ</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å­ç»„ä»¶å†…éƒ¨æ–¹æ³•è¢«è°ƒç”¨'</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'æ–¹æ³•æ‰§è¡ŒæˆåŠŸ'</span>;
    }
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">message</span>: <span class="hljs-string">''</span>
    };
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-5">çˆ¶ç»„ä»¶ä»£ç  (ParentComponent.vue)</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">child-component</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"childRef"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">child-component</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"callChildMethod"</span>&gt;</span>è°ƒç”¨å­ç»„ä»¶æ–¹æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>çŠ¶æ€: {{ status }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ChildComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ChildComponent.vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">components</span>: {
    <span class="hljs-title class_">ChildComponent</span>
  },
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">status</span>: <span class="hljs-string">''</span>
    };
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">callChildMethod</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// é€šè¿‡refsè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">childRef</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">childRef</span>.<span class="hljs-title function_">internalMethod</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">status</span> = <span class="hljs-string">'å­ç»„ä»¶æ–¹æ³•å·²è°ƒç”¨'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å­ç»„ä»¶æœªæ­£ç¡®å¼•ç”¨'</span>);
      }
    }
  }
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-6">æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸç¡®ä¿</strong>ï¼šåœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨å­ç»„ä»¶æ–¹æ³•æ—¶ï¼Œéœ€ç¡®ä¿å­ç»„ä»¶å·²æŒ‚è½½ï¼ˆä¾‹å¦‚ï¼Œåœ¨mountedé’©å­åè°ƒç”¨ï¼‰ï¼Œå¦åˆ™å¯èƒ½è®¿é—®ä¸åˆ°$refsã€‚</li>
<li><strong>å°è£…æ€§è€ƒè™‘</strong>ï¼šè¿‡åº¦ä½¿ç”¨refså¯èƒ½è¿åç»„ä»¶è®¾è®¡åŸåˆ™ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨propså’Œäº‹ä»¶è¿›è¡Œé€šä¿¡ï¼Œä»…åœ¨å¿…è¦æ—¶é‡‡ç”¨æ­¤æ–¹æ³•ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåº”æ·»åŠ é”™è¯¯å¤„ç†ï¼Œä¾‹å¦‚æ£€æŸ¥$refsæ˜¯å¦å­˜åœ¨ï¼Œä»¥é¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
</ul>
<h2 data-id="heading-7">å…¶ä»–æ–¹æ³•æ¯”è¾ƒ</h2>
<p>é™¤äº†refsï¼ŒVue.jsè¿˜æ”¯æŒé€šè¿‡äº‹ä»¶æˆ–propså›è°ƒå®ç°ç±»ä¼¼åŠŸèƒ½ï¼Œä½†è¿™äº›æ–¹å¼æ›´é€‚ç”¨äºå­ç»„ä»¶ä¸»åŠ¨é€šä¿¡ã€‚ä¸‹è¡¨ç®€è¦æ¯”è¾ƒä¸åŒæ–¹æ³•ï¼š</p>

































<table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>refs</td><td>ç›´æ¥è®¿é—®å­ç»„ä»¶å®ä¾‹</td><td>çˆ¶ç»„ä»¶éœ€ç›´æ¥è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</td><td>ç®€å•ç›´æ¥ï¼Œæ€§èƒ½é«˜</td><td>å¯èƒ½ç ´åå°è£…ï¼Œéœ€æ³¨æ„ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td>äº‹ä»¶</td><td>å­ç»„ä»¶å‘å°„äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶ç›‘å¬</td><td>å­ç»„ä»¶ä¸»åŠ¨é€šçŸ¥çˆ¶ç»„ä»¶</td><td>ç¬¦åˆVueæ•°æ®æµåŸåˆ™</td><td>éœ€è¦å­ç»„ä»¶é…åˆï¼Œä¸é€‚ç”¨äºç›´æ¥è°ƒç”¨</td></tr><tr><td>propså›è°ƒ</td><td>é€šè¿‡propsä¼ é€’å‡½æ•°</td><td>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’å›è°ƒ</td><td>çµæ´»ï¼Œæ˜“äºæµ‹è¯•</td><td>ä»£ç å¯èƒ½å†—é•¿ï¼Œä¸é€‚åˆå¤æ‚åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>é€šè¿‡refsï¼Œçˆ¶ç»„ä»¶å¯ä»¥é«˜æ•ˆè°ƒç”¨å­ç»„ä»¶çš„å†…éƒ¨æ–¹æ³•ï¼Œä½†å¼€å‘è€…åº”æƒè¡¡å°è£…æ€§å’Œä¾¿åˆ©æ€§ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®ç»“åˆé¡¹ç›®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼Œå¹¶éµå¾ªVue.jsçš„æœ€ä½³å®è·µä»¥ä¿æŒä»£ç å¯ç»´æŠ¤æ€§ã€‚æœ¬ç¤ºä¾‹æä¾›äº†å®Œæ•´çš„å®ç°ä»£ç ï¼Œå¸®åŠ©è¯»è€…å¿«é€Ÿä¸Šæ‰‹åº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜]]></title>    <link>https://juejin.cn/post/7576838095519203379</link>    <guid>https://juejin.cn/post/7576838095519203379</guid>    <pubDate>2025-11-26T10:51:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095519203379" data-draft-id="7576863819981488137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-26T10:51:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ArkPppp"/> <meta itemprop="url" content="https://juejin.cn/user/4484239094198752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4484239094198752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ArkPppp
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:51:10.000Z" title="Wed Nov 26 2025 10:51:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¤§é“è‡³ç®€-Shadcn/uiè®¾è®¡ç³»ç»Ÿåˆä½“éªŒï¼ˆä¸‹ï¼‰ï¼šThemeä¸è‰²å½©ç³»ç»Ÿå®æˆ˜</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†shadcn/uiçš„å®‰è£…ã€ç»„ä»¶å¼•å…¥å’ŒåŸºç¡€å®šåˆ¶ã€‚æœ¬æ–‡å°†ç»§ç»­æ·±å…¥ï¼Œå…³æ³¨ä¸€ä¸ªæ›´æ ¸å¿ƒçš„è¯é¢˜â€”â€”ä¸»é¢˜ç³»ç»Ÿè®¾è®¡ã€‚ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬éƒ½æ˜ç™½ä¸€ä¸ªå¥½çš„è®¾è®¡ç³»ç»Ÿä¸ä»…è¦æœ‰ç¾è§‚çš„ç»„ä»¶ï¼Œæ›´éœ€è¦ä¸€å¥—å®Œæ•´ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•çš„è‰²å½©ä½“ç³»ã€‚æœ¬æ–‡å°†é€šè¿‡å®é™…é¡¹ç›®å®è·µï¼Œè¯¦ç»†åˆ†æshadcn/uiå¦‚ä½•é€šè¿‡CSSå˜é‡å’ŒTailwindCSSæ„å»ºè¿™å¥—ä½“ç³»ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€è‡ªå®šä¹‰ä¸»é¢˜é…ç½®ï¼šä»CSSå˜é‡åˆ°TailwindCSS</h3>
<h4 data-id="heading-3">1.1 shadcn/uiçš„ä¸»é¢˜ç³»ç»ŸåŸç†</h4>
<p>shadcn/uié‡‡ç”¨äº†åŸºäºCSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰çš„è®¾è®¡æ¨¡å¼ã€‚æ¯ä¸ªä¸»é¢˜å®é™…ä¸Šå°±æ˜¯ä¸€å¥—CSSå˜é‡çš„é›†åˆã€‚ä¸åŒäºä¼ ç»Ÿç»„ä»¶åº“é€šè¿‡JavaScriptåŠ¨æ€è®¡ç®—é¢œè‰²å€¼ï¼Œshadcn/uié€‰æ‹©åœ¨CSSå±‚é¢å®šä¹‰å¥½æ‰€æœ‰é¢œè‰²çŠ¶æ€ï¼Œç„¶åé€šè¿‡ç±»ååˆ‡æ¢æ¥å®ç°ä¸»é¢˜å˜æ¢ã€‚</p>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li>æ— éœ€JavaScriptè®¡ç®—ï¼Œé¿å…é¢‘ç¹çš„é‡æ’é‡ç»˜</li>
<li>é¢œè‰²å€¼åœ¨æ„å»ºé˜¶æ®µå°±å·²ç»ç¡®å®šï¼Œæ€§èƒ½æ›´å¥½</li>
<li>CSSå˜é‡å¤©ç„¶æ”¯æŒç»§æ‰¿å’Œçº§è”ï¼Œä¾¿äºç®¡ç†å¤æ‚çš„è‰²å½©ä½“ç³»</li>
</ul>
<p>è®©æˆ‘ä»¬æŸ¥çœ‹é¡¹ç›®çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* src/index.css */</span>
<span class="hljs-keyword">@import</span> <span class="hljs-string">"tailwindcss"</span>;

<span class="hljs-keyword">@custom-variant</span> dark (&amp;:is(.dark *));

<span class="hljs-keyword">@theme</span> {
  <span class="hljs-attr">--color-border</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--border));
  <span class="hljs-attr">--color-input</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--input));
  <span class="hljs-attr">--color-ring</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--ring));
  <span class="hljs-attr">--color-background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--background));
  <span class="hljs-attr">--color-foreground</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--foreground));
  <span class="hljs-comment">/* ... æ›´å¤šé¢œè‰²å˜é‡ */</span>
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œä½¿ç”¨TailwindCSS 4çš„æ–°è¯­æ³• <code>@theme</code> æ›¿ä»£äº†ä¼ ç»Ÿçš„ <code>tailwind.config.js</code> é…ç½®ã€‚è¿™ç§æ–¹å¼å°†ä¸»é¢˜é…ç½®ç›´æ¥å†…è”åˆ°CSSæ–‡ä»¶ä¸­ï¼Œæ›´åŠ ç›´è§‚ã€‚</p>
<h4 data-id="heading-4">1.2 ä¸»é¢˜è‰²å½©å®šä¹‰</h4>
<p>shadcn/uiä½¿ç”¨HSLè‰²å½©ç©ºé—´æ¥å®šä¹‰é¢œè‰²ã€‚HSLç”±è‰²ç›¸(Hue)ã€é¥±å’Œåº¦(Saturation)ã€äº®åº¦(Lightness)ä¸‰ä¸ªåˆ†é‡ç»„æˆï¼Œç›¸æ¯”RGBæ›´å®¹æ˜“ç†è§£å’Œè°ƒæ•´ã€‚</p>
<p>æˆ‘ä»¬é¡¹ç›®çš„å®é™…é…è‰²ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* èƒŒæ™¯ä¸å‰æ™¯è‰² */</span>
  <span class="hljs-attr">--background</span>: <span class="hljs-number">210</span> <span class="hljs-number">20%</span> <span class="hljs-number">96%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">222</span> <span class="hljs-number">15%</span> <span class="hljs-number">15%</span>;

  <span class="hljs-comment">/* ä¸»è‰²è°ƒ - æµ…è“è‰²ç³» */</span>
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--primary-foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">40%</span> <span class="hljs-number">98%</span>;

  <span class="hljs-comment">/* æ¬¡è¦è‰² - æµ…ç»¿è‰²ç³» */</span>
  <span class="hljs-attr">--secondary</span>: <span class="hljs-number">145</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--secondary-foreground</span>: <span class="hljs-number">222</span> <span class="hljs-number">15%</span> <span class="hljs-number">15%</span>;

  <span class="hljs-comment">/* å¼ºè°ƒè‰² - é’ç»¿è‰²ç³» */</span>
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">175</span> <span class="hljs-number">70%</span> <span class="hljs-number">55%</span>;
  <span class="hljs-attr">--accent-foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">40%</span> <span class="hljs-number">98%</span>;
}

<span class="hljs-selector-class">.dark</span> {
  <span class="hljs-comment">/* æ·±è‰²ä¸»é¢˜é…è‰² */</span>
  <span class="hljs-attr">--background</span>: <span class="hljs-number">210</span> <span class="hljs-number">15%</span> <span class="hljs-number">10%</span>;
  <span class="hljs-attr">--foreground</span>: <span class="hljs-number">210</span> <span class="hljs-number">15%</span> <span class="hljs-number">92%</span>;
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--secondary</span>: <span class="hljs-number">145</span> <span class="hljs-number">60%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--accent</span>: <span class="hljs-number">175</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<p>é…è‰²æ–¹æ¡ˆçš„è®¾è®¡éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>è¯­ä¹‰åŒ–å‘½å</strong>ï¼šæ¯ä¸ªé¢œè‰²éƒ½æœ‰æ˜ç¡®çš„è¯­ä¹‰ï¼ˆbackgroundã€primaryã€secondaryç­‰ï¼‰</li>
<li><strong>çŠ¶æ€é…å¥—</strong>ï¼šæ¯ä¸ªä¸»è¦é¢œè‰²éƒ½æœ‰å¯¹åº”çš„foregroundè‰²ï¼Œä¿è¯å¯è¯»æ€§</li>
<li><strong>æ˜æš—é€‚é…</strong>ï¼šæ·±è‰²æ¨¡å¼ä¸‹é€‚å½“è°ƒæ•´äº®åº¦å’Œé¥±å’Œåº¦</li>
</ol>
<h4 data-id="heading-5">1.3 æ‰©å±•è‰²ç³»ï¼šæˆåŠŸä¸è­¦å‘Š</h4>
<p>é™¤äº†æ ‡å‡†çš„è®¾è®¡è¯­è¨€è‰²å½©ï¼Œshadcn/uiè¿˜å…è®¸å®šä¹‰æ‰©å±•è‰²ç³»ï¼Œç”¨äºè¡¨è¾¾ç‰¹å®šçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--success</span>: <span class="hljs-number">145</span> <span class="hljs-number">60%</span> <span class="hljs-number">50%</span>;
  <span class="hljs-attr">--success-light</span>: <span class="hljs-number">145</span> <span class="hljs-number">65%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--success-dark</span>: <span class="hljs-number">145</span> <span class="hljs-number">55%</span> <span class="hljs-number">45%</span>;

  <span class="hljs-attr">--warning</span>: <span class="hljs-number">45</span> <span class="hljs-number">85%</span> <span class="hljs-number">60%</span>;
  <span class="hljs-attr">--warning-light</span>: <span class="hljs-number">45</span> <span class="hljs-number">90%</span> <span class="hljs-number">65%</span>;
  <span class="hljs-attr">--warning-dark</span>: <span class="hljs-number">45</span> <span class="hljs-number">80%</span> <span class="hljs-number">55%</span>;
}
</code></pre>
<p>è¿™ç§å‘½åæ–¹å¼ï¼ˆåŸºç¡€è‰²-light-darkï¼‰ä¸ºæ¯ä¸ªè¯­ä¹‰è‰²æä¾›äº†ä¸‰ä¸ªäº®åº¦çº§åˆ«ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¯ä»¥æ ¹æ®ä¸åŒåœºæ™¯é€‰æ‹©åˆé€‚çš„æ·±æµ…ã€‚</p>
<h3 data-id="heading-6">äºŒã€é¢œè‰²ç³»ç»Ÿè®¾è®¡ï¼šCSSå˜é‡ä¸OKLCHè‰²å½©ç©ºé—´</h3>
<h4 data-id="heading-7">2.1 CSSå˜é‡çš„é«˜çº§ç‰¹æ€§</h4>
<p>CSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰ä¸ä»…ä»…æ˜¯ç®€å•çš„é”®å€¼å¯¹ï¼Œå®ƒå…·å¤‡è®¸å¤šå¼ºå¤§çš„ç‰¹æ€§ï¼š</p>
<p><strong>1. ç»§æ‰¿æ€§</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}

<span class="hljs-selector-class">.card-header</span> {
  <span class="hljs-comment">/* è‡ªåŠ¨ç»§æ‰¿çˆ¶å…ƒç´ çš„ --primary */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}
</code></pre>
<p><strong>2. åŠ¨æ€è®¡ç®—</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--primary-light</span>: <span class="hljs-number">205</span> <span class="hljs-number">85%</span> <span class="hljs-built_in">calc</span>(<span class="hljs-number">60%</span> + <span class="hljs-number">10%</span>);
}
</code></pre>
<p><strong>3. ä½œç”¨åŸŸæ§åˆ¶</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å…¨å±€ä½œç”¨åŸŸ */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--global-primary</span>: blue;
}

<span class="hljs-comment">/* å±€éƒ¨ä½œç”¨åŸŸ */</span>
<span class="hljs-selector-class">.theme-dark</span> {
  <span class="hljs-attr">--local-primary</span>: red;
}
</code></pre>
<p>è¿™äº›ç‰¹æ€§ä½¿å¾—CSSå˜é‡éå¸¸é€‚åˆæ„å»ºå¤æ‚çš„é¢œè‰²ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-8">2.2 OKLCHè‰²å½©ç©ºé—´ï¼šä¸‹ä¸€ä»£è‰²å½©æ ‡å‡†</h4>
<p>ä¼ ç»Ÿçš„HSLè‰²å½©ç©ºé—´æœ‰ä¸€ä¸ªæ˜æ˜¾ç¼ºé™·ï¼š<strong>æ„ŸçŸ¥ä¸å‡åŒ€æ€§</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨HSLä¸­åŒæ ·æ•°å€¼çš„å˜åŒ–ï¼Œäººçœ¼æ„ŸçŸ¥çš„å·®å¼‚å¹¶ä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼ŒHSLä¸­é¥±å’Œåº¦ä»50%åˆ°60%çš„å˜åŒ–ï¼Œçœ‹èµ·æ¥æ¯”60%åˆ°70%çš„å˜åŒ–æ›´æ˜æ˜¾ã€‚</p>
<p>OKLCHï¼ˆLightness-Chroma-Hueï¼‰è‰²å½©ç©ºé—´è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚OKLCHæ˜¯åŸºäºCIELABè‰²å½©ç©ºé—´çš„ç°ä»£è‰²å½©æ¨¡å‹ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ„ŸçŸ¥å‡åŒ€</strong>ï¼šæ•°å€¼çš„å¾®å°å˜åŒ–å¯¹åº”äººçœ¼æ„ŸçŸ¥çš„å¾®å°å˜åŒ–</li>
<li><strong>è‰²åŸŸæ›´å¹¿</strong>ï¼šæ”¯æŒæ›´å¤šå¯è§è‰²å½©</li>
<li><strong>å¯¹æ¯”åº¦å¯æ§</strong>ï¼šæ›´å®¹æ˜“æ»¡è¶³WCAGå¯è®¿é—®æ€§æ ‡å‡†</li>
</ul>
<p>è™½ç„¶æµè§ˆå™¨å¯¹OKLCHçš„æ”¯æŒè¿˜åœ¨é€æ­¥å®Œå–„ä¸­ï¼Œä½†TailwindCSSå·²ç»å¼€å§‹é‡‡ç”¨OKLCHã€‚æœªæ¥shadcn/uiå¾ˆå¯èƒ½ä¼šè¿ç§»åˆ°OKLCHè‰²å½©ç©ºé—´ã€‚</p>
<h4 data-id="heading-9">2.3 æ„å»ºè¯­ä¹‰åŒ–é¢œè‰²ç³»ç»Ÿ</h4>
<p>ä¸€ä¸ªå¥½çš„é¢œè‰²ç³»ç»Ÿéœ€è¦é¿å…ç›´æ¥ä½¿ç”¨åº•å±‚è‰²å½©å€¼ï¼Œè€Œæ˜¯é€šè¿‡è¯­ä¹‰åŒ–å˜é‡æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ ä¸å¥½çš„åšæ³• - ç›´æ¥ä½¿ç”¨åº•å±‚é¢œè‰² */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">59</span>, <span class="hljs-number">130</span>, <span class="hljs-number">246</span>);
}

<span class="hljs-comment">/* âœ… å¥½çš„åšæ³• - ä½¿ç”¨è¯­ä¹‰åŒ–å˜é‡ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-built_in">var</span>(--primary));
}
</code></pre>
<p>è¿™ç§è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>å¯ç»´æŠ¤æ€§å¼º</strong>ï¼šä¿®æ”¹ä¸»é¢˜æ—¶åªéœ€æ›´æ”¹CSSå˜é‡å®šä¹‰</li>
<li><strong>ä¸€è‡´æ€§ä¿è¯</strong>ï¼šå…¨ç«™ä½¿ç”¨ç»Ÿä¸€çš„è¯­ä¹‰åŒ–è‰²å½©</li>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šå¯ä»¥é’ˆå¯¹ä¸åŒåŒºåŸŸè¦†ç›–ç‰¹å®šå˜é‡</li>
</ol>
<h3 data-id="heading-10">ä¸‰ã€é¡¹ç›®å®è·µï¼šTodoListçš„ä¸»é¢˜æ›´æ–°å®ç°</h3>
<h4 data-id="heading-11">3.1 ThemeProviderè®¾è®¡</h4>
<p>shadcn/uiæä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„ThemeProviderå®ç°ï¼Œä½äº <code>src/components/theme-provider.tsx</code>ã€‚è¿™ä¸ªå®ç°æ›¿ä»£äº†ä¼ ç»Ÿçš„next-themesï¼Œæ›´è½»é‡ä¸”å®Œå…¨åŸºäºåŸç”ŸWeb APIã€‚</p>
<p>æ ¸å¿ƒå®ç°åˆ†æï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeProvider</span>(<span class="hljs-params">{
  children,
  defaultTheme = <span class="hljs-string">'system'</span>,
  storageKey = <span class="hljs-string">'vite-ui-theme'</span>,
}: ThemeProviderProps</span>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = useState&lt;<span class="hljs-title class_">Theme</span>&gt;(
    <span class="hljs-function">() =&gt;</span> (<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(storageKey) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Theme</span>) || defaultTheme
  )

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">window</span>.<span class="hljs-property">document</span>.<span class="hljs-property">documentElement</span>

    root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'light'</span>, <span class="hljs-string">'dark'</span>)

    <span class="hljs-keyword">if</span> (theme === <span class="hljs-string">'system'</span>) {
      <span class="hljs-keyword">const</span> systemTheme = <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">matchMedia</span>(<span class="hljs-string">'(prefers-color-scheme: dark)'</span>)
        .<span class="hljs-property">matches</span>
        ? <span class="hljs-string">'dark'</span>
        : <span class="hljs-string">'light'</span>

      root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(systemTheme)
      <span class="hljs-keyword">return</span>
    }

    root.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(theme)
  }, [theme])

  <span class="hljs-keyword">const</span> value = {
    theme,
    <span class="hljs-attr">setTheme</span>: <span class="hljs-function">(<span class="hljs-params">theme: Theme</span>) =&gt;</span> {
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(storageKey, theme)
      <span class="hljs-title function_">setTheme</span>(theme)
    },
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeProviderContext.Provider</span> {<span class="hljs-attr">...props</span>} <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ThemeProviderContext.Provider</span>&gt;</span></span>
  )
}
</code></pre>
<p>å…³é”®ç‚¹åˆ†æï¼š</p>
<ol>
<li>
<p><strong>ä¸‰ç§ä¸»é¢˜æ¨¡å¼</strong></p>
<ul>
<li><code>light</code>: å¼ºåˆ¶ä½¿ç”¨æµ…è‰²ä¸»é¢˜</li>
<li><code>dark</code>: å¼ºåˆ¶ä½¿ç”¨æ·±è‰²ä¸»é¢˜</li>
<li><code>system</code>: è·Ÿéšç³»ç»Ÿè®¾ç½®</li>
</ul>
</li>
<li>
<p><strong>æœ¬åœ°å­˜å‚¨æŒä¹…åŒ–</strong>
ä½¿ç”¨localStorageä¿å­˜ç”¨æˆ·åå¥½ï¼Œåº”ç”¨é‡å¯åè‡ªåŠ¨æ¢å¤ã€‚</p>
</li>
<li>
<p><strong>ç±»ååˆ‡æ¢æœºåˆ¶</strong>
é€šè¿‡æ“ä½œdocumentElementçš„classListæ¥åˆ‡æ¢ä¸»é¢˜ï¼Œé¿å…é¢‘ç¹çš„styleé‡å†™ã€‚</p>
</li>
</ol>
<h4 data-id="heading-12">3.2 TodoListä¸­çš„ä¸»é¢˜åˆ‡æ¢æŒ‰é’®</h4>
<p>åœ¨TodoListç»„ä»¶ä¸­ï¼Œä¸»é¢˜åˆ‡æ¢æŒ‰é’®çš„å®ç°ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useTheme } <span class="hljs-keyword">from</span> <span class="hljs-string">'./theme-provider'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">TodoList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { theme, setTheme } = <span class="hljs-title function_">useTheme</span>()

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleTheme</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setTheme</span>(theme === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
      <span class="hljs-attr">variant</span>=<span class="hljs-string">"ghost"</span>
      <span class="hljs-attr">size</span>=<span class="hljs-string">"icon"</span>
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleTheme}</span>
      <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"åˆ‡æ¢ä¸»é¢˜"</span>
    &gt;</span>
      {theme === 'light' ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">Moon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">Sun</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-4 w-4"</span> /&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
  )
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œçš„å®ç°ç»†èŠ‚ï¼š</p>
<ul>
<li>ä½¿ç”¨aria-labelæå‡å¯è®¿é—®æ€§</li>
<li>æ ¹æ®å½“å‰ä¸»é¢˜æ˜¾ç¤ºå¯¹åº”å›¾æ ‡ï¼ˆæœˆäº®/å¤ªé˜³ï¼‰</li>
<li>variantè®¾ä¸ºghostä¿æŒè§†è§‰ç®€æ´</li>
</ul>
<h4 data-id="heading-13">3.3 ä¸»é¢˜å˜é‡çš„å®é™…åº”ç”¨</h4>
<p>åœ¨TodoListç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å„ç§shadcn/uiç»„ä»¶éƒ½ä½¿ç”¨äº†è¯­ä¹‰åŒ–çš„é¢œè‰²å˜é‡ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;div className=<span class="hljs-string">"min-h-screen bg-background text-foreground transition-colors"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border-border"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">CardHeader</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CardTitle</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent"</span>&gt;</span>
        å¾…åŠäº‹é¡¹åˆ—è¡¨
      <span class="hljs-tag">&lt;/<span class="hljs-name">CardTitle</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">CardHeader</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span></span>
&lt;/div&gt;
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>bg-background</code> å’Œ <code>text-foreground</code>ï¼šä½¿ç”¨è¯­ä¹‰å˜é‡ç¡®ä¿æ–‡æœ¬å¯è¯»æ€§</li>
<li><code>border-border</code>ï¼šè¾¹æ¡†é¢œè‰²éšä¸»é¢˜å˜åŒ–</li>
<li>æ¸å˜è‰²ä½¿ç”¨CSSå˜é‡ï¼Œä¿æŒä¸»é¢˜ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-14">å››ã€shadcn/uiçš„è®¾è®¡å“²å­¦æ€»ç»“</h3>
<p>é€šè¿‡ä¸Šä¸‹ä¸¤ç¯‡æ–‡ç« çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“shadcn/uiçš„è®¾è®¡å“²å­¦ï¼š</p>
<h4 data-id="heading-15">4.1 é›¶æŠ½è±¡æˆæœ¬</h4>
<p>shadcn/uiä¸å°†ç»„ä»¶å°è£…ä¸ºé»‘ç›’ï¼Œè€Œæ˜¯æä¾›å®Œæ•´æºä»£ç ã€‚è¿™ç§"ä»£ç æ‰€æœ‰æƒ"æ¨¡å¼è®©å¼€å‘è€…å¯ä»¥ï¼š</p>
<ul>
<li>ä»»æ„ä¿®æ”¹ç»„ä»¶å®ç°</li>
<li>æ·±å…¥ç†è§£ç»„ä»¶é€»è¾‘</li>
<li>æ— æ¡†æ¶ä¾èµ–ï¼Œä¾¿äºè¿ç§»</li>
</ul>
<h4 data-id="heading-16">4.2 åŸå­åŒ–è®¾è®¡</h4>
<p>æ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ã€æ— æ ·å¼åŸºç¡€çš„ï¼ˆheadlessï¼‰ï¼Œæ ·å¼å®Œå…¨é€šè¿‡TailwindCSSç±»æ§åˆ¶ã€‚è¿™å¸¦æ¥ï¼š</p>
<ul>
<li>æ ·å¼å®Œå…¨å¯æ§</li>
<li>é¿å…CSSä¼˜å…ˆçº§å†²çª</li>
<li>æ›´å¥½çš„Tree-shakingæ•ˆæœ</li>
</ul>
<h4 data-id="heading-17">4.3 è®¾è®¡ä»¤ç‰Œé©±åŠ¨</h4>
<p>é€šè¿‡CSSå˜é‡ç³»ç»Ÿï¼Œshadcn/uiå»ºç«‹äº†å®Œæ•´çš„è®¾è®¡ä»¤ç‰Œï¼ˆDesign Tokensï¼‰ä½“ç³»ï¼š</p>
<ul>
<li>é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰éƒ½æœ‰å¯¹åº”çš„ä»¤ç‰Œ</li>
<li>ä»¤ç‰Œæ”¯æŒå±‚çº§ç»§æ‰¿</li>
<li>ä¾¿äºå®ç°è®¾è®¡ç³»ç»Ÿçš„ä¸€è‡´æ€§</li>
</ul>
<h4 data-id="heading-18">4.4 å¯è®¿é—®æ€§ä¼˜å…ˆ</h4>
<p>åŸºäºRadix UIæ„å»ºï¼Œæ‰€æœ‰ç»„ä»¶éƒ½å…·å¤‡ï¼š</p>
<ul>
<li>å®Œæ•´çš„é”®ç›˜å¯¼èˆªæ”¯æŒ</li>
<li>æ­£ç¡®çš„ARIAå±æ€§</li>
<li>è¯­ä¹‰åŒ–çš„HTMLç»“æ„</li>
</ul>
<h4 data-id="heading-19">4.5 ç°ä»£åŒ–å·¥å…·é“¾</h4>
<p>shadcn/uiæ·±åº¦é›†æˆäº†ç°ä»£å‰ç«¯å·¥å…·ï¼š</p>
<ul>
<li>TailwindCSS 4ï¼ˆæœ€æ–°è¯­æ³•ï¼‰</li>
<li>TypeScriptï¼ˆå®Œæ•´ç±»å‹å®šä¹‰ï¼‰</li>
<li>Viteï¼ˆå¿«é€Ÿæ„å»ºï¼‰</li>
<li>ESLintï¼ˆä»£ç è§„èŒƒï¼‰</li>
</ul>
<h3 data-id="heading-20">5.æˆæœå±•ç¤º</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆçš„æˆæœå§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d971df593d3a4b6c963d6199e81fa00e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJrUHBwcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759070&amp;x-signature=0dXKeedhKGCjORg6egGJnd3sgr0%3D" alt="LightMode.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bad9e9cb53384119b7949f065dc3ddd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQXJrUHBwcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759070&amp;x-signature=laIwrGY4GGVXmgysiVvZytDIHxk%3D" alt="NightMode.png" loading="lazy"/></p>
<h3 data-id="heading-21">ç»“è¯­</h3>
<p><code>shadcn/ui</code>ä¸ä»…ä»…æ˜¯ä¸€ä¸ªç»„ä»¶åº“ï¼Œæ›´æ˜¯ä¸€å¥—å®Œæ•´çš„è®¾è®¡ç³»ç»Ÿå®ç°æ–¹æ¡ˆã€‚å®ƒé€šè¿‡CSSå˜é‡ã€TailwindCSSå’Œç°ä»£Reactæ¨¡å¼çš„ç»“åˆï¼Œä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å…¨æ–°çš„ç»„ä»¶åº“æ„å»ºæ€è·¯ã€‚</p>
<p>è¿™ç§"å¤§é“è‡³ç®€"çš„è®¾è®¡ç†å¿µâ€”â€”å°†å¤æ‚çš„UIæŠ½è±¡è¿˜åŸä¸ºç®€å•çš„CSSå˜é‡å’Œå¯ç»„åˆçš„ç»„ä»¶â€”â€”æˆ–è®¸æ­£æ˜¯å‰ç«¯å¼€å‘çš„ä¸€ç§æ–°èŒƒå¼ã€‚åœ¨AIç¼–ç¨‹å·¥å…·æ—¥ç›Šæˆç†Ÿï¼ŒVibe Codingæ„ˆå‘æ™®éçš„ä»Šå¤©ï¼Œä¸€ä¸ªå¼€æ”¾ã€å¯å®šåˆ¶ã€æ— é»‘ç›’çš„ç»„ä»¶åº“å°†æ›´å…·ç”Ÿå‘½åŠ›ã€‚</p>
<hr/>
<h3 data-id="heading-22">å‚è€ƒï¼š</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fui.shadcn.com%2Fdocs" target="_blank" title="https://ui.shadcn.com/docs" ref="nofollow noopener noreferrer">shadcn/uiå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftailwindcss.com%2Fdocs%2Ftheme" target="_blank" title="https://tailwindcss.com/docs/theme" ref="nofollow noopener noreferrer">TailwindCSSä¸»é¢˜é…ç½®</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FUsing_CSS_custom_properties" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" ref="nofollow noopener noreferrer">CSSè‡ªå®šä¹‰å±æ€§MDNæ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fevilmartians.com%2Fchronicles%2Foklch-in-css-why-quotas-from-a-perceptual-point-of-view" target="_blank" title="https://evilmartians.com/chronicles/oklch-in-css-why-quotas-from-a-perceptual-point-of-view" ref="nofollow noopener noreferrer">OKLCHè‰²å½©ç©ºé—´ä»‹ç»</a></li>
<li>Claude Codeå‚ä¸éƒ¨åˆ†ç¼–å†™å·¥ä½œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA]]></title>    <link>https://juejin.cn/post/7576863819981537289</link>    <guid>https://juejin.cn/post/7576863819981537289</guid>    <pubDate>2025-11-26T10:53:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576863819981537289" data-draft-id="7576852209565466651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,OpenAI"/> <meta itemprop="datePublished" content="2025-11-26T10:53:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœºå™¨ä¹‹å¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1873223543167902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°ç±³å¼€æºé¦–ä¸ªè·¨åŸŸå…·èº«åŸºåº§æ¨¡å‹MiMo-Embodiedï¼Œ29ä¸ªæ¦œå•SOTA
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1873223543167902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœºå™¨ä¹‹å¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:53:53.000Z" title="Wed Nov 26 2025 10:53:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¯¥ç ”ç©¶ç”±<strong>å°ç±³å…·èº«æ™ºèƒ½å›¢é˜Ÿï¼ˆXiaomi Embodied Intelligence Teamï¼‰</strong> å…±åŒå®Œæˆã€‚ç”±è¯¥å›¢é˜Ÿçš„<strong>éƒå­å¸…</strong>æ‹…ä»»æ ¸å¿ƒè´¡çŒ®ç¬¬ä¸€ä½œè€…ï¼Œé¡¹ç›®è´Ÿè´£äººåˆ™æ˜¯å°ç±³æ™ºé©¾å›¢é˜Ÿé¦–å¸­ç§‘å­¦å®¶<strong>é™ˆé¾™</strong>ã€‚å›¢é˜Ÿè‡´åŠ›äºæ‰“ç ´å•ä¸€é¢†åŸŸçš„ç•Œé™ï¼Œæ„å»ºèƒ½å¤ŸåŒæ—¶ç†è§£ç‰©ç†ä¸–ç•Œå¹¶è¿›è¡Œå¤æ‚æ¨ç†çš„é€šç”¨æ™ºèƒ½ä½“ï¼ˆæ¨¡å‹ï¼‰ï¼Œæ±‡èšäº†è‡ªåŠ¨é©¾é©¶ä¸å…·èº«æ™ºèƒ½é¢†åŸŸçš„é¡¶å°–ç ”ç©¶åŠ›é‡ã€‚</p>
<h2 data-id="heading-0"/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/691f5ab3db894f518b3eb54a368c85a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=x41e4w7StjueWSlIq%2FANyd5umoY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸å¤šæ¨¡æ€å¤§è¯­è¨€æ¨¡å‹ï¼ˆMLLMï¼‰çš„æµªæ½®æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å¸­å· AI é¢†åŸŸï¼Œä½†å½“ç®—æ³•è¯•å›¾èµ°å‡ºæ•°å­—ä¸–ç•Œï¼Œè¿ˆå…¥ç‰©ç†å®ä½“æ—¶ï¼Œå´é­é‡äº†ä¸¥é‡çš„â€œæ°´åœŸä¸æœâ€ã€‚</p>
<p>åœ¨ä¼ ç»Ÿçš„å…·èº«æ™ºèƒ½ç ”å‘èŒƒå¼ä¸­ï¼Œ<strong>è‡ªåŠ¨é©¾é©¶</strong>ï¼ˆAutonomous Drivingï¼‰<strong>ä¸å…·èº«æ™ºèƒ½</strong>ï¼ˆEmbodied AIï¼‰é•¿æœŸè¢«è§†ä¸ºä¸¤æ¡å¹³è¡Œçº¿ã€‚å‰è€…åœ¨æˆ·å¤–é«˜é€ŸåŠ¨æ€ç¯å¢ƒä¸­ï¼Œé€šè¿‡æ¿€å…‰é›·è¾¾ä¸ç›¸æœºæ„ŸçŸ¥è½¦æµä¸çº¢ç»¿ç¯ï¼›åè€…åˆ™åœ¨å®¤å†…é™æ€æˆ–ä½é€Ÿç¯å¢ƒä¸­ï¼Œä¾èµ–æœºå™¨äººæœ¬ä½“è¿›è¡Œç²¾ç»†çš„å¯¼èˆªå’Œæ“ä½œä»»åŠ¡ã€‚</p>
<p>è¿™ç§â€œå„ç®¡ä¸€æ‘Šâ€çš„å±€é¢ï¼Œå¯¼è‡´äº†ä¸¥é‡çš„é¢†åŸŸå‰²è£‚ã€‚ç°æœ‰çš„ä¸“ç”¨æ¨¡å‹å¾€å¾€â€œåç§‘â€ä¸¥é‡ï¼šè‡ªåŠ¨é©¾é©¶æ¨¡å‹ï¼ˆå¦‚ DriveLMMï¼‰ç¼ºä¹å¯¹ç‰©ä½“éƒ¨ä»¶çº§çš„ç²¾ç»†ç†è§£ï¼Œè€Œæœºå™¨äººæ¨¡å‹ï¼ˆå¦‚ RoboBrain2.0ï¼‰åˆ™éš¾ä»¥åº”å¯¹å¤æ‚çš„äº¤é€šåšå¼ˆä¸é«˜åŠ¨æ€åœºæ™¯ã€‚</p>
<p>ç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬å§‹ç»ˆç¼ºä¹ä¸€ä¸ªèƒ½å¤Ÿæ‰“é€šå®¤å†…å¤–ã€èåˆåŠ¨é™æ€æ„ŸçŸ¥çš„ç»Ÿä¸€â€œå¤§è„‘â€ã€‚</p>
<p>åœ¨11.21æ—¥å‘è¡¨çš„æŠ€æœ¯æŠ¥å‘Šã€ŠMiMo-Embodied: X-Embodied Foundation Modelã€‹ä¸­ï¼Œå°ç±³å…·èº«æ™ºèƒ½å›¢é˜ŸæŒ‡å‡ºäº†è¿™ä¸€ç—›ç‚¹ï¼Œå¹¶å‘å¸ƒäº†Â <strong>MiMo-Embodied</strong>â€”â€”è¿™æ˜¯é¦–ä¸ªå¼€æºçš„ã€æˆåŠŸèåˆäº†è‡ªåŠ¨é©¾é©¶ä¸å…·èº«æ™ºèƒ½çš„è·¨åŸŸåŸºåº§æ¨¡å‹ã€‚</p>
<p>ç ”ç©¶æ•°æ®æ˜¾ç¤ºï¼ŒMiMo-Embodied åœ¨<strong>17ä¸ªå…·èº«æ™ºèƒ½åŸºå‡†</strong>å’Œ<strong>12ä¸ªè‡ªåŠ¨é©¾é©¶åŸºå‡†</strong>ä¸Šå‡åˆ·æ–°äº†è®°å½•ï¼ˆSOTAï¼‰ï¼Œä¸ä»…å¤§å¹…è¶…è¶Šäº†å¼€æºåŸºçº¿ï¼Œæ›´åœ¨ç©ºé—´æ¨ç†ä¸è§„åˆ’ç­‰å…³é”®æŒ‡æ ‡ä¸Šå‡»è´¥äº† GPT-4oã€Gemini-Pro ç­‰é—­æºæ¨¡å‹ï¼Œè¯æ˜äº†è·¨åŸŸçŸ¥è¯†èåˆçš„å·¨å¤§æ½œåŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8393b7afac6541cf8cb3d8a5d22d3b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=JoY6XOQ3bvdwBM3lLR2NjGElz0Q%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è®ºæ–‡é¢˜ç›®ï¼š</strong> Â </p>
<p>MiMo-Embodied: X-Embodied Foundation Model**</p>
<p><strong>è®ºæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2511.16518" target="_blank" title="https://arxiv.org/abs/2511.16518" ref="nofollow noopener noreferrer">arxiv.org/abs/2511.16â€¦</a>**</p>
<p><strong>é¡¹ç›®ä¸»é¡µï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FXiaomiMiMo%2FMiMo-Embodied" target="_blank" title="https://github.com/XiaomiMiMo/MiMo-Embodied" ref="nofollow noopener noreferrer">github.com/XiaomiMiMo/â€¦</a></p>
<h4 data-id="heading-1"/>
<h4 data-id="heading-2">ç»Ÿä¸€ç‰©ç†ä¸–ç•Œçš„è®¤çŸ¥åŸºåº§</h4>
<p>è¦è§£å†³é¢†åŸŸå‰²è£‚ï¼Œä¸èƒ½ç®€å•åœ°è¿›è¡Œæ¨¡å‹æ‹¼æ¥ã€‚MiMo-Embodied çš„æ ¸å¿ƒåœ¨äºæ„å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„æ„ŸçŸ¥ä¸æ¨ç†æ¨¡å‹æ¶æ„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0510190c715345f59e3d31842b757123~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=MjxVjKbdZS%2FS5FBkCqRItIDFwKo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¥æ¨¡å‹åŸºäºå°ç±³è‡ªç ”çš„Â <strong>MiMo-VL</strong>Â æ¶æ„ï¼ˆåŒ…å« Vision Transformer è§†è§‰ç¼–ç å™¨ä¸ MLP æŠ•å½±å±‚ï¼‰ï¼Œå°†ç‰©ç†ä¸–ç•Œçš„äº¤äº’èƒ½åŠ›è§£æ„ä¸ºå…­å¤§æ ¸å¿ƒç»´åº¦ï¼š</p>
<p>åœ¨<strong>è‡ªåŠ¨é©¾é©¶ä¾§</strong>ï¼Œæ¨¡å‹ä¸ä»…è¦è¿›è¡Œç¯å¢ƒæ„ŸçŸ¥ï¼ˆè¯†åˆ«è½¦é“ã€éšœç¢ç‰©ï¼‰ï¼Œæ›´éœ€å…·å¤‡çŠ¶æ€é¢„æµ‹ï¼ˆStatus Predictionï¼‰<strong>ä¸</strong>é©¾é©¶è§„åˆ’ï¼ˆDriving Planningï¼‰èƒ½åŠ›â€”â€”å³åƒè€å¸æœºä¸€æ ·ï¼Œé¢„æµ‹æ—è½¦æ„å›¾ï¼Œå¹¶ç”Ÿæˆç¬¦åˆäº¤é€šè§„åˆ™çš„é©¾é©¶è½¨è¿¹ã€‚</p>
<p>åœ¨<strong>å…·èº«æ™ºèƒ½ä¾§</strong>ï¼Œæ¨¡å‹é‡ç‚¹æ”»å…‹<strong>å¯ä¾›æ€§é¢„æµ‹ï¼ˆAffordance Predictionï¼‰ä¸ç©ºé—´ç†è§£ï¼ˆSpatial Understandingï¼‰</strong> ã€‚è¿™æ„å‘³ç€æ¨¡å‹ä¸ä»…è¦è¯†åˆ«ç‰©ä½“ï¼Œè¿˜è¦ç†è§£ç‰©ä½“â€œå“ªé‡Œèƒ½æŠ“â€ã€â€œå“ªé‡Œèƒ½æ”¾â€ï¼Œå¹¶èƒ½è§£æå¤æ‚çš„ç©ºé—´ä»‹è¯ï¼ˆå¦‚â€œåœ¨...å·¦è¾¹çš„ç‰©ä½“ï¼Œåœ¨...çš„å‰æ–¹åŒºåŸŸâ€ï¼‰ã€‚</p>
<h4 data-id="heading-3">å››é˜¶æ®µè¿›åŒ–ï¼šä»â€œçœ‹æ‡‚â€åˆ°â€œå†³ç­–â€</h4>
<h4 data-id="heading-4"/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5085e6eb9f94310a6905fbdd7c61b0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=7KAtGQxoX8WpbODynfAtyEfITnA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚ä½•åœ¨å•ä¸€æ¨¡å‹ä¸­èåˆå·®å¼‚å·¨å¤§çš„è·¨åŸŸæ•°æ®ï¼ŒåŒæ—¶é¿å…â€œç¾éš¾æ€§é—å¿˜â€ï¼Ÿå°ç±³å›¢é˜Ÿè®¾è®¡äº†ä¸€å¥—ä¸¥è°¨çš„<strong>å››é˜¶æ®µæ¸è¿›å¼è®­ç»ƒç­–ç•¥ï¼ˆProgressive Four-stage Training Strategyï¼‰</strong> ï¼Œè¿™ä¹Ÿæ˜¯è¯¥æ¨¡å‹æ€§èƒ½å“è¶Šçš„å…³é”®ã€‚</p>
<p>ç®€å•çš„æ··åˆè®­ç»ƒå¾€å¾€ä¼šå¯¼è‡´â€œç¾éš¾æ€§é—å¿˜â€ã€‚å›¢é˜Ÿé¦–å…ˆåˆ©ç”¨æµ·é‡é€šç”¨æ•°æ®ä¸å…·èº«æ•°æ®å¥ å®šåŸºç¡€ï¼Œå»ºç«‹æ¨¡å‹å¯¹ç‰©ä½“ä¸ç©ºé—´çš„åˆçº§è®¤çŸ¥ï¼›éšåå¼•å…¥å¤§è§„æ¨¡è‡ªåŠ¨é©¾é©¶æ•°æ®ï¼Œé€šè¿‡æ··åˆç›‘ç£å­¦ä¹ ï¼Œè®©æ¨¡å‹åœ¨æŒæ¡é«˜é€ŸåŠ¨æ€æ„ŸçŸ¥çš„åŒæ—¶ï¼Œä¿ç•™å¯¹å®¤å†…ç²¾ç»†æ“ä½œçš„ç†è§£ã€‚</p>
<p><strong>é˜¶æ®µä¸€ï¼šå…·èº«ä¸é€šç”¨çŸ¥è¯†å¥ åŸºã€‚</strong> è¿™ä¸€é˜¶æ®µç±»ä¼¼äºäººç±»çš„â€œé€šè¯†æ•™è‚²â€ã€‚æ¨¡å‹åˆ©ç”¨æµ·é‡é€šç”¨å›¾æ–‡æ•°æ®ï¼ˆVisual Groundingã€OCRï¼‰å’Œå…·èº«æ™ºèƒ½æ•°æ®ï¼ˆå¦‚ RoboRefItã€Cosmos-Reason1ï¼‰è¿›è¡Œç›‘ç£å¾®è°ƒã€‚è¿™å»ºç«‹äº†æ¨¡å‹å¯¹ç»†ç²’åº¦ç‰©ä½“éƒ¨ä»¶çš„å®šä½èƒ½åŠ›ï¼Œä»¥åŠå¯¹åŸºç¡€ç©ºé—´å…³ç³»çš„ç†è§£ï¼Œä½¿å…¶å­¦ä¼šâ€œçœ‹æ‡‚â€é™æ€ç‰©ç†ä¸–ç•Œã€‚</p>
<p><strong>é˜¶æ®µäºŒï¼šè‡ªåŠ¨é©¾é©¶çŸ¥è¯†æ³¨å…¥ä¸æ··åˆç›‘ç£ã€‚</strong> æ¨¡å‹éšåè¿›å…¥â€œé©¾æ ¡â€ã€‚å›¢é˜Ÿå¼•å…¥äº†åŒ…æ‹¬ CODA-LMï¼ˆé•¿å°¾åœºæ™¯ï¼‰ã€nuScenes-QA åœ¨å†…çš„å¤§è§„æ¨¡è‡ªåŠ¨é©¾é©¶æ•°æ®ã€‚å…³é”®åˆ›æ–°åœ¨äº<strong>æ··åˆç›‘ç£ï¼ˆMixed Supervisionï¼‰</strong> â€”â€”åœ¨æ³¨å…¥é«˜é€ŸåŠ¨æ€é©¾é©¶çŸ¥è¯†çš„åŒæ—¶ï¼Œä¿ç•™éƒ¨åˆ†å…·èº«æ•°æ®ã€‚è¿™ç¡®ä¿æ¨¡å‹åœ¨å­¦ä¹ è¯†åˆ«çº¢ç»¿ç¯å’Œè½¦é“çº¿æ—¶ï¼Œä¸ä¼šé—å¿˜å¦‚ä½•è¯†åˆ«å®¤å†…çš„æ°´æ¯å’ŒæŠŠæ‰‹ã€‚</p>
<p><strong>é˜¶æ®µä¸‰ï¼šæ€ç»´é“¾æ¨ç†ï¼ˆCoTï¼‰çš„é€»è¾‘å‡åã€‚</strong> åªä¼šæ„ŸçŸ¥è¿˜ä¸å¤Ÿï¼Œæ™ºèƒ½ä½“å¿…é¡»å…·å¤‡é€»è¾‘æ¨ç†èƒ½åŠ›ã€‚å›¢é˜Ÿæ„å»ºäº†åŒ…å«æ˜¾å¼æ¨ç†æ­¥éª¤ï¼ˆRationaleï¼‰çš„æ•°æ®é›†ï¼Œåˆ©ç”¨Â <strong>Chain-of-Thought (CoT)</strong> Â æŠ€æœ¯è¿›è¡Œå¾®è°ƒã€‚ ä¾‹å¦‚ï¼Œåœ¨é¢å¯¹â€œè½¦è¾†æ˜¯å¦åº”è¯¥å˜é“ï¼Ÿâ€çš„é—®é¢˜æ—¶ï¼Œæ¨¡å‹ä¸å†ç›´æ¥è¾“å‡ºâ€œæ˜¯/å¦â€ï¼Œè€Œæ˜¯ç”Ÿæˆä¸€æ®µå®Œæ•´çš„æ€è€ƒè·¯å¾„ï¼šâ€œæ£€æµ‹åˆ°å‰æ–¹æ‹¥å µ -&gt; å·¦ä¾§è½¦é“ç©ºé—² -&gt; ä¸”åæ–¹æ— å¿«é€Ÿæ¥è½¦ -&gt; å› æ­¤å»ºè®®å˜é“â€ã€‚è¿™ç§æ˜¾å¼çš„é€»è¾‘ç”Ÿæˆï¼Œæå¤§æå‡äº†æ¨¡å‹åœ¨é•¿å°¾å¤æ‚åœºæ™¯ä¸‹çš„é²æ£’æ€§ä¸å¯è§£é‡Šæ€§ã€‚</p>
<p><strong>é˜¶æ®µå››ï¼šå¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰çš„ç»ˆææ‰“ç£¨ã€‚</strong> è¿™æ˜¯ç”»é¾™ç‚¹ç›çš„ä¸€ç¬”ã€‚é’ˆå¯¹å¤šæ¨¡æ€æ¨¡å‹å¸¸æœ‰çš„â€œå¹»è§‰â€é—®é¢˜ï¼ˆå¦‚ç”Ÿæˆçš„åæ ‡ä¸å‡†ç¡®ï¼‰ï¼Œå›¢é˜Ÿåˆ©ç”¨Â <strong>GRPO</strong>ç®—æ³•ã€‚é€šè¿‡è®¾è®¡é’ˆå¯¹æ€§çš„å¥–åŠ±å‡½æ•°ï¼ŒRL ç®—æ³•è¿«ä½¿æ¨¡å‹åœ¨é¢å¯¹åŒä¸€ä¸ªé—®é¢˜æ—¶ï¼Œä»å¤šä¸ªå€™é€‰ç­”æ¡ˆä¸­æ”¶æ•›åˆ°é€»è¾‘æ›´ä¸¥å¯†ã€åæ ‡æ›´ç²¾å‡†çš„è¾“å‡ºã€‚è¿™å°±åƒæ˜¯è€ƒå‰çš„â€œé«˜å¼ºåº¦åˆ·é¢˜â€ï¼Œå°†æ¨¡å‹çš„æ‰§è¡Œç²¾åº¦æ¨å‘äº†æè‡´ã€‚</p>
<p>æ€»ä½“æ•°æ®é›†è§„æ¨¡ä¸é…ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/130fa3863769409f952c1461758e7048~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=uGNUiTunMJhfxyj0bqDBi9SrIRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-5"/>
<h4 data-id="heading-6">å®éªŒç»“æœï¼šæ­£å‘è¿ç§»å¼•å‘çš„æ€§èƒ½è·ƒå‡</h4>
<p>è¿™ç§â€œå››æ­¥èµ°â€ç­–ç•¥å¸¦æ¥çš„æ•ˆæœæ˜¯ç»“æ„æ€§çš„ã€‚å®éªŒè¡¨æ˜ï¼ŒMiMo-Embodied å¹¶éä¸¤ä¸ªé¢†åŸŸçš„ç®€å•å åŠ ï¼Œè€Œæ˜¯å®ç°äº†<strong>æ­£å‘è¿ç§»</strong>ã€‚</p>
<h3 data-id="heading-7">ğŸ¯ å…·èº«æ™ºèƒ½åŸºå‡†æµ‹è¯•ï¼š17é¡¹SOTAå…¨é¢çªç ´</h3>
<h3 data-id="heading-8"/>
<p>åœ¨17ä¸ªå…·èº«æ™ºèƒ½åŸºå‡†æµ‹è¯•ä¸­ï¼ŒMiMo-Embodied åœ¨å¯ä¾›æ€§é¢„æµ‹ï¼ˆAffordance Predictionï¼‰ã€ä»»åŠ¡è§„åˆ’ï¼ˆTask Planningï¼‰å’Œç©ºé—´ç†è§£ï¼ˆSpatial Understandingï¼‰ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ä¸Šå…¨é¢åˆ·æ–°è®°å½•ã€‚</p>
<h4 data-id="heading-9">å¯ä¾›æ€§é¢„æµ‹èƒ½åŠ›</h4>
<h4 data-id="heading-10"/>
<p>MiMo-Embodied æ¨¡å‹åœ¨ RoboRefItã€Where2Placeã€VABench-Pointã€Part-Afford å’Œ RoboAfford-Eval äº”ä¸ªä¸“ä¸šåŸºå‡†ä¸Šå‡è¾¾åˆ°æœ€ä¼˜æ€§èƒ½ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒMiMo-Embodied åœ¨ VABench-Pointã€Part-Afford å’Œ RoboAfford-Eval ä¸Šå¤§å¹…é¢†å…ˆå…¶ä»–å…·èº«æ™ºèƒ½æ¨¡å‹ï¼Œå±•ç°å‡ºåœ¨ç²¾ç»†å¯ä¾›æ€§æ¨ç†æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-11">ä»»åŠ¡è§„åˆ’èƒ½åŠ›</h4>
<h4 data-id="heading-12"/>
<p>MiMo-Embodied åœ¨ RoboVQA åŸºå‡†ä¸Šè¡¨ç°æœ€ä¼˜ï¼Œå±•ç¤ºäº†åœ¨å› æœæ¨ç†å’Œç›®æ ‡å¯¼å‘ç»“æœç†è§£æ–¹é¢çš„å“è¶Šèƒ½åŠ›ã€‚åœ¨é•¿æ—¶è§„åˆ’åŸºå‡† EgoPlan2 ä¸Šä¹Ÿå–å¾—äº†æå…·ç«äº‰åŠ›çš„æˆç»©ï¼Œå……åˆ†è¯æ˜äº†æ¨¡å‹åœ¨é•¿æ—¶æ¨ç†æ–¹é¢çš„æœ‰æ•ˆæ€§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ba49befc420443c802fe29f2a4ecd97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=f1riC19%2BAMxT6Yys2I1EQ64gXIE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-13"/>
<h4 data-id="heading-14">ç©ºé—´ç†è§£èƒ½åŠ›</h4>
<h4 data-id="heading-15"/>
<p>MiMo-Embodiedåœ¨ç»¼åˆç©ºé—´æ™ºèƒ½ä»»åŠ¡ CV-Bench ä¸Šå–å¾—æœ€ä¼˜ç»“æœï¼Œåœ¨ç©ºé—´å…³ç³»æ¨ç†çš„ RoboSpatialã€RefSpatial-Bench å’Œ CRPE å…³ç³»å­é›†ä¸Šå‡é¢†å…ˆã€‚è¿™äº›ç»“æœéªŒè¯äº† MiMo-Embodied åœ¨ç‰©ç†ä¸–ç•Œå…·èº«æ¨ç†æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15193a63ee76473491ae2b2a2537f634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=2UzBZ5%2B61cSVT%2BXQXnWvm3i6o0g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-16"/>
<h3 data-id="heading-17">ğŸš— è‡ªåŠ¨é©¾é©¶åŸºå‡†æµ‹è¯•ï¼š12é¡¹æŒ‡æ ‡å…¨é¢é¢†å…ˆ</h3>
<h3 data-id="heading-18"/>
<p>MiMo-Embodied åœ¨12ä¸ªè‡ªåŠ¨é©¾é©¶åŸºå‡†ä¸Šè¡¨ç°å“è¶Šï¼Œæ¶µç›–ç¯å¢ƒæ„ŸçŸ¥ã€çŠ¶æ€é¢„æµ‹å’Œé©¾é©¶è§„åˆ’ä¸‰å¤§ç»´åº¦ã€‚</p>
<h4 data-id="heading-19">ç¯å¢ƒæ„ŸçŸ¥èƒ½åŠ›</h4>
<h4 data-id="heading-20"/>
<p>åœ¨å…¨æ™¯è¯­ä¹‰ç†è§£ä»»åŠ¡ä¸Šå±•ç°æœ€ä¼˜è¡¨ç°ï¼Œåœ¨å…·æœ‰æŒ‘æˆ˜æ€§çš„å±€éƒ¨æ„ŸçŸ¥åœºæ™¯ä¸­ä¹Ÿè¡¨ç°å‡ºå“è¶Šçš„é²æ£’æ€§ã€‚å®éªŒç»“æœä»¤äººä¿¡æœåœ°è¯æ˜ï¼ŒMiMo-Embodied å…·å¤‡å¤šå±‚æ¬¡ã€é«˜ä¿çœŸçš„ç¯å¢ƒæ„ŸçŸ¥èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-21">çŠ¶æ€é¢„æµ‹èƒ½åŠ›</h4>
<h4 data-id="heading-22"/>
<p>åœ¨å•å›¾åƒåŸºå‡† MME-RealWorld å’Œå¤šè§†å›¾å›¾åƒåŸºå‡† DriveLM ä¸Šå‡å–å¾—å¼ºåŠ²è¡¨ç°ï¼Œå‡†ç¡®æ•æ‰ä¸ªä½“è¡Œä¸ºæ„å›¾å¹¶æœ‰æ•ˆå»ºæ¨¡å¤šæ™ºèƒ½ä½“é—´çš„å¤æ‚äº¤äº’ã€‚</p>
<h4 data-id="heading-23">é©¾é©¶è§„åˆ’èƒ½åŠ›</h4>
<h4 data-id="heading-24"/>
<p>åœ¨æ‰€æœ‰é¢å‘è§„åˆ’çš„åŸºå‡†æµ‹è¯•ä¸­å‡è¡¨ç°çªå‡ºã€‚è¿™ç§æŒç»­çš„ä¼˜è¶Šæ€§å……åˆ†è¯´æ˜ï¼Œæ¨¡å‹ä¸ä»…èƒ½ç”Ÿæˆå‡†ç¡®ã€ç¬¦åˆæƒ…å¢ƒçš„é©¾é©¶å†³ç­–ï¼Œè¿˜èƒ½äº§ç”Ÿä¸ç°å®ä¸–ç•Œäº¤é€šé€»è¾‘å’Œé©¾é©¶è§„èŒƒç›¸ç¬¦çš„è¿è´¯ã€å¯è§£é‡Šçš„æ¨ç†è¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf4198ec70e746caa4cf43c61d77acfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=ZTaqq53%2FWK9Es4yBVgoK70XcRB8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/edf587d15ac64299ac42e5a0a78f99be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=1A4hv2%2BTSo3OPM7sHHuToqev4AQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-25"/>
<h3 data-id="heading-26">ğŸ’ª çœŸå®ä¸–ç•Œåœºæ™¯éªŒè¯ï¼šä»ä»¿çœŸåˆ°å®æˆ˜</h3>
<h3 data-id="heading-27"/>
<h4 data-id="heading-28">å…·èº«å¯¼èˆªä¸æ“ä½œ</h4>
<h4 data-id="heading-29"/>
<p>å›¢é˜Ÿåœ¨å…·èº«å¯¼èˆªå’Œæ“ä½œä¸¤ä¸ªåŸºç¡€ä¸‹æ¸¸åº”ç”¨ä¸­éªŒè¯äº†æ¨¡å‹çš„å®ç”¨æ€§ã€‚åœ¨å¯¼èˆªä»»åŠ¡ä¸­ï¼ŒMiMo-Embodied åœ¨å››ä¸ªå®¶åº­å¯¼èˆªåœºæ™¯ä¸­è¡¨ç°ä¼˜å¼‚ï¼šå®šä½å§å®¤ä¸­çš„åºŠã€åœ¨é¤å…æ‰¾åˆ°å¸å°˜å™¨ã€åœ¨ä¹¦æˆ¿è¯†åˆ«æ¤ç‰©ã€åœ¨æµ´å®¤å®šä½é©¬æ¡¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56fc6923fbff4882af8fe56c1f58e4f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=tgxKht1uYkX0WnmQTTAgWVvQKuQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ“ä½œä»»åŠ¡ä¸­ï¼Œæ¨¡å‹å±•ç°äº†å‡ºè‰²çš„å¯ä¾›æ€§é¢„æµ‹å’Œç©ºé—´æ¨ç†æ•´åˆèƒ½åŠ›ï¼Œåœ¨è¯†åˆ«ç²‰è‰²å‹ºå­çš„å¯æŠ“å–æŠŠæ‰‹ã€å®šä½åº•æ’æ©™å­ä¹‹é—´çš„ä¸­é—´æ”¾ç½®ä½ç½®ã€é€‰æ‹©æœ€å·¦ä¾§é¢åŒ…ç­‰åŠŸèƒ½å¯¼å‘ä»»åŠ¡ä¸­å‡è¡¨ç°å‡ºè‰²ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53519e77aec649c69d5128126df5772a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=gFESgZd9nbwBI5KMnqDMe%2BSGMHg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-30"/>
<h4 data-id="heading-31">è‡ªåŠ¨é©¾é©¶è½¨è¿¹è§„åˆ’</h4>
<h4 data-id="heading-32"/>
<h5 data-id="heading-33">å…¬å¼€åŸºå‡†è¡¨ç°ã€‚åœ¨ NAVSIM åŸºå‡†ä¸Šï¼ŒMiMo-Embodied æ˜¾è‘—è¶…è¶Šç«äº‰æ¨¡å‹ï¼Œåœ¨æ¨¡ä»¿å­¦ä¹ ï¼ˆILï¼‰é˜¶æ®µå’Œå¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰é˜¶æ®µå‡å–å¾—æœ€ä¼˜æ€§èƒ½ã€‚</h5>
<p>å®šæ€§ç»“æœè¡¨æ˜ï¼ŒMiMo-Embodied èƒ½å¤Ÿå¤„ç†å¤šæ ·åŒ–çš„è‡ªåŠ¨é©¾é©¶åœºæ™¯å¹¶å®Œæˆå…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬è·¯å£è½¬å¼¯ã€å¼¯é“æ‰å¤´ã€è·Ÿè½¦å’Œå˜é“è¶…è½¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/923b1d5bbaff4a8ea1a984e88cf67fd4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=ruXsh9yxwORWQXYjlx3bw10nsm8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h5 data-id="heading-34"/>
<h5 data-id="heading-35">ä¸“æœ‰æ•°æ®é›†éªŒè¯ã€‚åœ¨å¤§è§„æ¨¡ä¸“æœ‰æ•°æ®é›†ä¸Šçš„è¯„ä¼°æ˜¾ç¤ºï¼ŒMiMo-Embodied åœ¨æ‰€æœ‰è¯„ä¼°ç±»åˆ«ä¸­å‡æ˜¾è‘—è¶…è¶ŠåŸºçº¿ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨å¤æ‚çš„äº¤äº’ä»»åŠ¡ï¼ˆå¦‚è½¬å¼¯ã€ç»•éšœå’Œå˜é“ï¼‰ä¸­æ€§èƒ½æå‡æœ€ä¸ºæ˜¾è‘—ã€‚</h5>
<p>è¿™ç§åœ¨é«˜å¤æ‚åº¦åœºæ™¯ä¸­çš„å¤§å¹…æ”¹è¿›ï¼Œæœ‰åŠ›è¯æ˜äº†å…·èº«è®­ç»ƒèŒƒå¼èµ‹äºˆæ¨¡å‹åœ¨å¤æ‚é©¾é©¶æƒ…å¢ƒä¸­æ›´å¼ºçš„æ¨ç†èƒ½åŠ›ï¼Œå¹¶è½¬åŒ–ä¸ºæ›´å‡†ç¡®ã€æ›´ç¬¦åˆäººç±»ä¸“å®¶é©¾é©¶è¡Œä¸ºçš„è½¨è¿¹ç”Ÿæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a99b3ecdc69c406faad254c67af869a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=F%2FejU72iTPa9Syc0mIq054izDJ8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-36"/>
<h3 data-id="heading-37">ğŸ”¬Â æ¶ˆèå®éªŒï¼šå¤šé˜¶æ®µç­–ç•¥çš„å…³é”®ä½œç”¨</h3>
<h3 data-id="heading-38"/>
<p>ä¸ºéªŒè¯å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥çš„æœ‰æ•ˆæ€§ï¼Œå›¢é˜Ÿè¿›è¡Œäº†ç³»ç»Ÿæ€§æ¶ˆèå®éªŒã€‚ç»“æœæ˜¾ç¤ºï¼š</p>
<ul>
<li>
<p>ä»…ä½¿ç”¨å…·èº«æ•°æ®è®­ç»ƒçš„æ¨¡å‹åœ¨ä¸¤ä¸ªé¢†åŸŸå‡è¡¨ç°å¼ºåŠ²ï¼Œä½†ä»…ä½¿ç”¨è‡ªåŠ¨é©¾é©¶æ•°æ®è®­ç»ƒçš„æ¨¡å‹åœ¨å…·èº«ä»»åŠ¡ä¸Šæ€§èƒ½æ˜¾è‘—ä¸‹é™</p>
</li>
<li>
<p>ç›´æ¥æ··åˆè®­ç»ƒä¸¤ä¸ªé¢†åŸŸçš„æ•°æ®ï¼Œå…·èº«ä»»åŠ¡æœ‰æ‰€æ”¹è¿›ï¼Œä½†è‡ªåŠ¨é©¾é©¶æ€§èƒ½ç•¥æœ‰ä¸‹é™</p>
</li>
<li>
<p>é‡‡ç”¨å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥çš„ MiMo-Embodied åœ¨å…·èº«ä»»åŠ¡ä¸Šå¹³å‡è¾¾åˆ°62.4%ï¼ˆç›¸æ¯”æ··åˆè®­ç»ƒæå‡4%ï¼‰ï¼Œåœ¨è‡ªåŠ¨é©¾é©¶ä»»åŠ¡ä¸Šè¾¾åˆ°æœ€ä¼˜çš„63.3%ï¼ˆç›¸æ¯”æ··åˆè®­ç»ƒæå‡8.1%ï¼‰</p>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0612da37efd64f2294e504881b9a1c06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5py65Zmo5LmL5b-D:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764759233&amp;x-signature=lIBNcZ1fqIcLoksTHXvw9GBRDBA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™å……åˆ†è¯æ˜ï¼Œ<strong>å¤šé˜¶æ®µè®­ç»ƒç­–ç•¥èƒ½å¤Ÿåœ¨ä¸ç‰ºç‰²å•ä¸€ä»»åŠ¡æ€§èƒ½çš„å‰æä¸‹ï¼Œå®ç°å…·èº«æ™ºèƒ½å’Œè‡ªåŠ¨é©¾é©¶èƒ½åŠ›çš„ååŒæå‡</strong>ï¼Œä¸ºæ„å»ºç»Ÿä¸€çš„å…·èº«åŸºåº§æ¨¡å‹æä¾›äº†æœ‰æ•ˆçš„è®­ç»ƒèŒƒå¼ã€‚</p>
<h4 data-id="heading-39">ç»“è¯­</h4>
<p>MiMo-Embodied çš„å‡ºç°ï¼Œæ ‡å¿—ç€å…·èº«æ™ºèƒ½ç ”ç©¶è¿›å…¥äº†ä¸€ä¸ªæ–°çš„é˜¶æ®µã€‚</p>
<p>å®ƒè¯æ˜äº†ç‰©ç†ä¸–ç•Œçš„è®¤çŸ¥é€»è¾‘æ˜¯ç»Ÿä¸€çš„â€”â€”æ— è®ºæ˜¯æ§åˆ¶æœºå™¨äººè¿˜æ˜¯é©¾é©¶æ±½è½¦ï¼Œéƒ½ä¾èµ–äºå¯¹ä¸‰ç»´ç©ºé—´ã€å› æœå…³ç³»åŠè¡Œä¸ºé¢„æµ‹çš„æ·±åˆ»ç†è§£ã€‚å°ç±³å…·èº«æ™ºèƒ½å›¢é˜Ÿé€šè¿‡æ„å»ºç»Ÿä¸€çš„è·¨åŸŸåŸºåº§æ¨¡å‹ï¼ŒæˆåŠŸæ‰“ç ´äº†é•¿æœŸä»¥æ¥çš„é¢†åŸŸå£å’ï¼Œè®©æ•°æ®åœ¨ä¸åŒå…·èº«å½¢æ€é—´äº§ç”Ÿäº†â€œåŒ–å­¦ååº”â€ã€‚</p>
<p>è¿™é¡¹å·¥ä½œä¸ä»…ä¸ºæ„å»ºé€šç”¨çš„Â <strong>VLAï¼ˆVision-Language-Actionï¼‰</strong> Â æ¨¡å‹æä¾›äº†åŸºç¡€ï¼Œä¹Ÿè®©â€œä¸€ä¸ªå¤§è„‘ï¼Œé€šç”¨äºç™¾å˜æœºèº«â€çš„æœªæ¥æ„¿æ™¯å˜å¾—è§¦æ‰‹å¯åŠã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»]]></title>    <link>https://juejin.cn/post/7576821684251901995</link>    <guid>https://juejin.cn/post/7576821684251901995</guid>    <pubDate>2025-11-26T09:11:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251901995" data-draft-id="7576821684251885611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T09:11:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ— éœ€æºç çš„ iOS åŠ å›ºæ–¹æ¡ˆ é¢å‘å¤–åŒ…é¡¹ç›®ä¸å­˜é‡åº”ç”¨çš„å¤šå±‚å®‰å…¨ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:11:19.000Z" title="Wed Nov 26 2025 09:11:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ iOS å¼€å‘åœˆï¼Œè¶Šæ¥è¶Šå¤šå›¢é˜Ÿé‡åˆ°ä¸€ç§ç°å®ï¼š
<strong>é¡¹ç›®åªæœ‰ IPAï¼Œæ²¡æœ‰æºç ï¼Œä½†ä»éœ€è¦è¿›è¡ŒåŠ å›ºã€å®‰å…¨æ£€æµ‹æˆ–é‡æ–°ä¸Šçº¿ã€‚</strong></p>
<p>å…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>å¤–åŒ…å…¬å¸åªäº¤ä»˜æˆå“åŒ…</li>
<li>å¤šå¹´å‰çš„å­˜é‡é¡¹ç›®æºç ç¼ºå¤±</li>
<li>æŸäº›æ¨¡å—ç”±ç¬¬ä¸‰æ–¹æä¾›é—­æº SDK</li>
<li>å®‰å…¨å›¢é˜Ÿéœ€åœ¨ä¸æ”¹æºç çš„æƒ…å†µä¸‹åŠ ä¸€å±‚æ··æ·†</li>
<li>æ¸ é“åŒ…ã€å®šåˆ¶ç‰ˆ App éœ€è¦é¢å¤–ä¿æŠ¤</li>
<li>äº§å“è¦åœ¨æäº¤å®¡æ ¸å‰è¿›è¡Œâ€œæˆå“çº§åŠ å›ºâ€</li>
</ul>
<p>ä¼ ç»Ÿçš„ Swift/ObjC æºç æ··æ·†ï¼ˆSwift Shieldã€obfuscator-llvm ç­‰ï¼‰åœ¨è¿™ç§æƒ…å†µä¸‹éƒ½æ— æ³•ä½¿ç”¨ã€‚
å› æ­¤ï¼ŒçœŸæ­£å¯è¡Œçš„è·¯å¾„æ˜¯ï¼š<strong>ä»¥ IPA ä¸ºä¸­å¿ƒå»ºç«‹ä¸€å¥—å®Œæ•´çš„â€œæ— éœ€æºç åŠ å›ºæ–¹æ¡ˆâ€</strong>ï¼Œè¦†ç›–ç¬¦å·æ··æ·†ã€èµ„æºä¿æŠ¤ã€ç»“æ„æ‰°åŠ¨ã€å®Œæ•´æ€§æ ¡éªŒã€é‡ç­¾éªŒè¯ç­‰ç¯èŠ‚ã€‚</p>
<p>æœ¬æ–‡åŸºäºçœŸå®å¼€å‘ç»éªŒï¼Œæ€»ç»“ä¸€å¥—å¯ç›´æ¥è½åœ°çš„å·¥ç¨‹åŒ–æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆâ€œæ— éœ€æºç â€çš„åŠ å›ºå¿…é¡»å­˜åœ¨ï¼Ÿ</h3>
<p>å› ä¸ºå¾ˆå¤šé¡¹ç›®ç»“æ„å¤©ç„¶å¤æ‚ï¼Œæºç ä¸å¯æ§ï¼š</p>
<h4 data-id="heading-1"><strong>1ï¼‰å¤–åŒ…é¡¹ç›®äº¤ä»˜ä¸å®Œæ•´</strong></h4>
<p>åªç»™æˆå“åŒ…ï¼Œä¸ç»™é¡¹ç›®å·¥ç¨‹ã€‚</p>
<h4 data-id="heading-2"><strong>2ï¼‰å­˜é‡é¡¹ç›®å·²æ— äººç»´æŠ¤</strong></h4>
<p>å¤šäººæ¥æ‰‹å¤šå¹´ï¼Œæºç æœ‰ç¼ºå¤±æˆ–ä¸ä¸€è‡´é—®é¢˜ã€‚</p>
<h4 data-id="heading-3"><strong>3ï¼‰éƒ¨åˆ†æ¨¡å—æ˜¯é—­æº SDK</strong></h4>
<p>æºç ä¸å¯æ”¹ï¼Œåªèƒ½åœ¨ IPA å±‚å¤„ç†ã€‚</p>
<h4 data-id="heading-4"><strong>4ï¼‰å¤šç‰ˆæœ¬åˆ†å‘ä¸‹éœ€è¦é€åŒ…ä¿æŠ¤</strong></h4>
<p>å¦‚æ¸ é“åŒ…ã€ç°åº¦åŒ…ã€ç™½æ ‡ Appã€‚</p>
<h4 data-id="heading-5"><strong>5ï¼‰å®‰å…¨åˆè§„è¦æ±‚å¿…é¡»åŠ å›º</strong></h4>
<p>ä½†åˆä¸å…è®¸ä¿®æ”¹å†…éƒ¨å·¥ç¨‹ã€‚</p>
<p>å› æ­¤ï¼ŒåŠ å›ºå¿…é¡»ä»â€œæºç æ€ç»´â€è½¬å‘â€œæˆå“åŒ…æ€ç»´â€ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€æ— éœ€æºç çš„ iOS åŠ å›ºéœ€è¦å“ªäº›å·¥å…·ï¼Ÿï¼ˆæ ¸å¿ƒèƒ½åŠ›çŸ©é˜µï¼‰</h2>













































<table><thead><tr><th>åŠ å›ºç¯èŠ‚</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>é™æ€åˆ†æ</td><td>MobSFã€class-dump</td><td>äº†è§£å¯è¯»ç¬¦å·ã€èµ„æºåˆ†å¸ƒ</td></tr><tr><td>ç¬¦å·æ··æ·†ï¼ˆæ ¸å¿ƒï¼‰</td><td>Ipa Guard CLI</td><td>æ— éœ€æºç æ··æ·†ç±»å/æ–¹æ³•å/å˜é‡å</td></tr><tr><td>èµ„æºä¿æŠ¤</td><td>Ipa Guardã€è„šæœ¬å·¥å…·</td><td>é‡å‘½åå›¾ç‰‡ã€JSONã€JSã€H5 ç­‰</td></tr><tr><td>MD5 æ‰°åŠ¨</td><td>Ipa Guard</td><td>é˜²æ­¢èµ„æºæ›¿æ¢ä¸ç¯¡æ”¹</td></tr><tr><td>åŠ¨æ€é€†å‘æ£€æŸ¥</td><td>Fridaã€Hopper</td><td>æµ‹è¯• Hook ä¸åç¼–è¯‘éš¾åº¦</td></tr><tr><td>é‡ç­¾åéªŒè¯</td><td>kxsign</td><td>éªŒè¯åŠ å›ºå IPA æ˜¯å¦èƒ½æ­£å¸¸è¿è¡Œ</td></tr><tr><td>æ˜ å°„æ²»ç†</td><td>KMSã€Bugly/Sentry</td><td>ç¬¦å·è¡¨å­˜å‚¨ä¸å´©æºƒå®šä½</td></tr></tbody></table>
<p>å®Œæ•´åŠ å›ºä¾èµ–å·¥å…·é“¾åä½œï¼Œè€Œä¸æ˜¯å•ç‚¹æ“ä½œã€‚</p>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€æ— éœ€æºç çš„ IPA åŠ å›ºæµç¨‹ï¼ˆå·¥ç¨‹åŒ–å¯ç›´æ¥å¤åˆ¶ï¼‰</h3>
<p>ä¸‹é¢ç»™å‡ºçš„æµç¨‹é€‚ç”¨äºæ‰€æœ‰é¡¹ç›®ï¼Œåªè¦ä½ èƒ½è·å¾— IPAã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>æ­¥éª¤ 1ï¼šé™æ€åˆ†æï¼ˆäº†è§£ IPA å†…éƒ¨ç»“æ„ï¼‰</strong></h3>
<h4 data-id="heading-9">ä½¿ç”¨ MobSF</h4>
<p>è¯†åˆ«ï¼š</p>
<ul>
<li>JSã€JSONã€å›¾ç‰‡ã€H5 è·¯å¾„</li>
<li>èµ„æºç»“æ„</li>
<li>SDK è°ƒç”¨</li>
<li>ç½‘ç»œæ¥å£</li>
</ul>
<h4 data-id="heading-10">ä½¿ç”¨ class-dump</h4>
<pre><code class="hljs language-lua" lang="lua">class-<span class="hljs-built_in">dump</span> app.ipa &gt; <span class="hljs-built_in">dump</span>.txt
</code></pre>
<p>è¯†åˆ«ï¼š</p>
<ul>
<li>Swift/ObjC ç±»å</li>
<li>æ–¹æ³•å</li>
<li>å±æ€§å</li>
<li>selector</li>
<li>è°ƒç”¨ç»“æ„</li>
</ul>
<p>è¿™äº›ä¿¡æ¯å†³å®šåç»­å“ªäº›ç¬¦å·è¦æ··æ·†ã€å“ªäº›è¦ä¿ç•™ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>æ­¥éª¤ 2ï¼šå¯¼å‡ºå¯æ··æ·†ç¬¦å·ï¼ˆIpa Guard æ ¸å¿ƒåŠŸèƒ½ï¼‰</strong></h3>
<p>æ— éœ€æºç å³å¯å¯¼å‡ºç¬¦å·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p><code>sym.json</code> ä¸­åŒ…å«ï¼š</p>
<ul>
<li>æ‰€æœ‰å¯æ··æ·†çš„ç±»åã€æ–¹æ³•åã€å˜é‡å</li>
<li>Flutter/RN Bridge åç§°</li>
<li>JS/H5 å¼•ç”¨ä½ç½®</li>
<li>ä¸èµ„æºç›¸å…³çš„æ–‡ä»¶å¼•ç”¨</li>
<li>æ˜¯å¦å®‰å…¨æ··æ·†çš„æç¤ºå­—æ®µ</li>
</ul>
<p>è¿™ä»½æ–‡ä»¶æ˜¯ç­–ç•¥çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>æ­¥éª¤ 3ï¼šç¼–è¾‘æ··æ·†ç­–ç•¥ï¼ˆå¿…é¡»æ‰‹åŠ¨å®¡æ ¸ï¼‰</strong></h3>
<h4 data-id="heading-13"><strong>ä¸èƒ½æ··æ·†ï¼ˆå¦åˆ™ä¼šå´©æºƒï¼‰ï¼š</strong></h4>
<ul>
<li>selector åå°„æ–¹æ³•</li>
<li>Storyboard id</li>
<li>JSBridge å›è°ƒæ–¹æ³•</li>
<li>Flutter MethodChannel</li>
<li>RN Bridge</li>
<li>ç¬¬ä¸‰æ–¹ SDK åˆå§‹åŒ–æ¥å£</li>
</ul>
<p>é€šè¿‡åœ¨ sym.json ä¸­è®¾ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"confuse"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
</code></pre>
<p>é¿å…ç ´åè¿è¡Œé€»è¾‘ã€‚</p>
<hr/>
<h4 data-id="heading-14"><strong>å¿…é¡»æ··æ·†ï¼ˆæé«˜é€†å‘æˆæœ¬ï¼‰ï¼š</strong></h4>
<ul>
<li>ä¸šåŠ¡ç±»å</li>
<li>æ§åˆ¶å™¨</li>
<li>å·¥å…·ç±»ã€å†…éƒ¨é€»è¾‘</li>
<li>Swift æ–¹æ³•å</li>
<li>ObjC æ–¹æ³•å</li>
<li>ç§æœ‰å˜é‡å</li>
<li>å†…éƒ¨æ¨¡å‹ä½“ç³»</li>
</ul>
<p>è¿™äº›å­—æ®µæ˜¯æ”»å‡»è€…æœ€ä¾èµ–çš„å…¥å£ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>æ­¥éª¤ 4ï¼šæ‰§è¡Œ IPA æ··æ·†ä¸èµ„æºæ‰°åŠ¨</strong></h3>
<p>çœŸæ­£æé«˜å®‰å…¨æ€§çš„æ ¸å¿ƒå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect app.ipa -c sym.json --email dev@team.com --image --js -o protected.ipa
</code></pre>
<p>æ•ˆæœåŒ…æ‹¬ï¼š</p>
<p>âœ” Swift/ObjC ç¬¦å·æ··æ·†
âœ” æ–¹æ³•åã€ç±»åã€å˜é‡åä¹±ç åŒ–
âœ” å›¾ç‰‡ã€jsonã€plistã€JSã€H5 è·¯å¾„æ”¹å
âœ” èµ„æº MD5 æ‰°åŠ¨
âœ” è¾“å‡ºæ˜ å°„è¡¨</p>
<p>åœ¨æ²¡æœ‰æºç çš„æƒ…å†µä¸‹ï¼Œèƒ½åšåˆ°è¿™æ ·å·²ç»éå¸¸å¼ºå¤§ã€‚</p>
<hr/>
<h3 data-id="heading-16"><strong>æ­¥éª¤ 5ï¼šé‡ç­¾åå¹¶è¿›è¡Œå…¨é‡æµ‹è¯•ï¼ˆå¿…åšï¼‰</strong></h3>
<p>ä½¿ç”¨ kxsignï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kxsign sign protected.ipa -c cert.p12 -p <span class="hljs-built_in">pwd</span> \
  -m dev.mobileprovision -z signed.ipa -i
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<ul>
<li>å¯åŠ¨</li>
<li>é¡µé¢è·³è½¬</li>
<li>JS/H5 æ¸²æŸ“</li>
<li>Flutter/RN åˆå§‹åŒ–</li>
<li>ç™»å½•ã€æ”¯ä»˜ã€æ¨é€æ¨¡å—</li>
<li>æ€§èƒ½æ˜¯å¦æ­£å¸¸</li>
</ul>
<p>ç¡®ä¿æ··æ·†æ²¡æœ‰ç ´åä¸šåŠ¡åŠŸèƒ½ã€‚</p>
<hr/>
<h3 data-id="heading-17"><strong>æ­¥éª¤ 6ï¼šéªŒè¯é˜²æŠ¤æ•ˆæœï¼ˆé€†å‘éš¾åº¦æµ‹è¯•ï¼‰</strong></h3>
<h4 data-id="heading-18">â‘  Hopper/IDA éªŒè¯</h4>
<p>ç¡®è®¤ï¼š</p>
<ul>
<li>ç±»åæ˜¯å¦ä¹±ç </li>
<li>æ–¹æ³•ç»“æ„æ˜¯å¦ä¸å¯è¯»</li>
<li>æ˜¯å¦ä»èƒ½æ¨æ–­ä¸šåŠ¡é€»è¾‘</li>
</ul>
<h4 data-id="heading-19">â‘¡ Frida Hook æµ‹è¯•</h4>
<pre><code class="hljs language-css" lang="css">frida -U -f com<span class="hljs-selector-class">.app</span> <span class="hljs-attr">--no-pause</span> -l hook<span class="hljs-selector-class">.js</span>
</code></pre>
<p>ç¡®è®¤ï¼š</p>
<ul>
<li>å…³é”®æ–¹æ³•æ˜¯å¦éš¾ä»¥ Hook</li>
<li>å­—ç¬¦ä¸²æ˜¯å¦è¢«æ··æ·†éšè—</li>
<li>JSBridge æ˜¯å¦éš¾ä»¥å®šä½</li>
</ul>
<p>è¿™ä¸¤æ­¥æ˜¯â€œé˜²æŠ¤æ•ˆæœâ€çš„æœ€ç»ˆéªŒè¯ã€‚</p>
<hr/>
<h3 data-id="heading-20"><strong>æ­¥éª¤ 7ï¼šæ˜ å°„æ²»ç†ï¼ˆä¿è¯é•¿æœŸå¯ç»´æŠ¤ï¼‰</strong></h3>
<p>ä¿å­˜ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>sym.json</li>
<li>æ„å»ºå·</li>
<li>ç­¾åæŒ‡çº¹</li>
<li>IPA ç‰ˆæœ¬ä¸å¯¹åº”ç­–ç•¥</li>
</ul>
<p>å­˜æ”¾åœ¨ï¼š</p>
<ul>
<li>KMS</li>
<li>Git åŠ å¯†ä»“åº“</li>
<li>CI è‡ªåŠ¨å½’æ¡£</li>
</ul>
<p>ç”¨äºå›æ»šä¸å´©æºƒå®šä½ã€‚</p>
<hr/>
<h3 data-id="heading-21">å››ã€æœ€ç»ˆæ•ˆæœï¼šæ— éœ€æºç ä¹Ÿèƒ½å®ç°ä¸“ä¸šçº§åŠ å›º</h3>
<p>å®Œæˆä¸Šè¿°æµç¨‹åï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªï¼š</p>
<p>åç¼–è¯‘åå®Œå…¨ä¸å¯è¯»çš„ IPA
ç±»åã€æ–¹æ³•åã€å˜é‡åå…¨ä¹±ç 
è°ƒç”¨é“¾æ— æ³•æ¨æ–­
JS/H5 è·¯å¾„è¢«å®Œå…¨æ”¹å†™
å›¾ç‰‡ä¸ JSON èµ„æºä¸å¯æ›¿æ¢
Hook éš¾åº¦å¤§å¹…æå‡
äºŒæ¬¡ä¿®æ”¹å®¹æ˜“å¯¼è‡´å´©æºƒ
åŠ å›ºç­–ç•¥å¯æŒç»­ç»´æŠ¤ã€æœ‰æ˜ å°„å¯å›æ»š</p>
<p>è¿™å°±æ˜¯ç°ä»£ä¼ä¸šçº§ iOS åŠ å›ºåº”æœ‰çš„æ ·å­ã€‚</p>
<hr/>
<h3 data-id="heading-22">çœŸæ­£çš„â€œæ— éœ€æºç åŠ å›ºâ€ï¼Œé çš„æ˜¯æµç¨‹ï¼Œè€Œä¸æ˜¯æŸä¸ªå·¥å…·</h3>
<p>æ¨èçš„å®Œæ•´æŠ€æœ¯ç»„åˆï¼š</p>
<h4 data-id="heading-23"><strong>åˆ†æå±‚</strong></h4>
<p>MobSFã€class-dump</p>
<h4 data-id="heading-24"><strong>åŠ å›ºå±‚ï¼ˆæ ¸å¿ƒèƒ½åŠ›ï¼‰</strong></h4>
<p>Ipa Guard CLI</p>
<ul>
<li>æ— éœ€æºç æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>æ–¹æ³•/ç±»åå˜é‡åæ··æ·†</li>
<li>å…¨å¹³å°æ”¯æŒ</li>
<li>å¯ç”¨äºæ¸ é“åŒ…ã€å°ç‰ˆæœ¬å¿«é€Ÿå¤„ç†</li>
</ul>
<h4 data-id="heading-25"><strong>éªŒè¯å±‚</strong></h4>
<p>kxsignï¼ˆé‡ç­¾ï¼‰ã€Fridaï¼ˆåŠ¨æ€ Hook æµ‹è¯•ï¼‰ã€Hopperï¼ˆåç¼–è¯‘éªŒè¯ï¼‰</p>
<h4 data-id="heading-26"><strong>æ²»ç†å±‚</strong></h4>
<p>KMSã€Bugly/Sentryã€Git åŠ å¯†ä»“åº“</p>
<p>å³ä½¿æ²¡æœ‰æºç ï¼Œä¹Ÿèƒ½æ„å»ºä¸€ä¸ªå®Œæ•´ã€å¯ç»´æŠ¤ã€å¯å›æ»šçš„ iOS åŠ å›ºä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹]]></title>    <link>https://juejin.cn/post/7576681897297903631</link>    <guid>https://juejin.cn/post/7576681897297903631</guid>    <pubDate>2025-11-26T09:12:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576681897297903631" data-draft-id="7576827115968069667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T09:12:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Geaflowæ¨ç†æ¡†æ¶Geaflow-infer è§£æç³»åˆ—ï¼ˆä¸ƒï¼‰æ•°æ®è¯»å†™æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:12:35.000Z" title="Wed Nov 26 2025 09:12:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬7ç« ï¼šæ•°æ®è¯»å†™æµç¨‹</h2>
<h3 data-id="heading-1">ç« èŠ‚å¯¼è¯»</h3>
<p>æœ¬ç« è®²è§£ <code>InferDataWriter</code> å’Œ <code>InferDataReader</code> å¦‚ä½•åœ¨å…±äº«å†…å­˜ä¸Šè¿›è¡Œé«˜æ•ˆçš„æ•°æ®è¯»å†™ã€‚ç†è§£æœ¬ç« å†…å®¹ï¼Œä½ å°†æŒæ¡ï¼š</p>
<ul>
<li>æ•°æ®å¸§æ ¼å¼ï¼ˆ4å­—èŠ‚é•¿åº¦ + æ•°æ®ä½“ï¼‰</li>
<li>å­—èŠ‚åºå¤„ç†ï¼ˆLittle Endianï¼‰</li>
<li>æµå¼ I/O ä¸ç¼“å†²åŒºç®¡ç†</li>
</ul>
<h5 data-id="heading-2">æ ¸å¿ƒè®¾è®¡</h5>
<pre><code class="hljs language-css" lang="css">âœ“ è‡ªæè¿°çš„æ•°æ®å¸§ï¼ˆé•¿åº¦å¤´ï¼‰
âœ“ ç»Ÿä¸€çš„å­—èŠ‚åºçº¦å®š
âœ“ æ ‡å‡†çš„ Java <span class="hljs-selector-tag">I</span>/O æ¥å£
âœ“ æµå¼å¤„ç†æ”¯æŒå¤§æ•°æ®
âœ“ æ— é”é«˜æ€§èƒ½
</code></pre>
<hr/>
<h3 data-id="heading-3">7.1 InferDataWriter å®ç°</h3>
<h4 data-id="heading-4">æ ¸å¿ƒèŒè´£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferDataWriter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Closeable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">HEADER_LENGTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;  <span class="hljs-comment">// 4 å­—èŠ‚é•¿åº¦å¤´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataQueueOutputStream outputStream;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">byte</span>[] dataHeaderBytes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ByteBuffer headerByteBuffer;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InferDataWriter</span><span class="hljs-params">(DataExchangeQueue queue)</span> {
        <span class="hljs-built_in">this</span>.outputStream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQueueOutputStream</span>(queue);
        <span class="hljs-comment">// å‡†å¤‡é•¿åº¦å¤´ç¼“å†²åŒº</span>
        <span class="hljs-built_in">this</span>.dataHeaderBytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[HEADER_LENGTH];
        <span class="hljs-built_in">this</span>.headerByteBuffer = ByteBuffer.wrap(dataHeaderBytes);
        <span class="hljs-built_in">this</span>.headerByteBuffer.order(ByteOrder.LITTLE_ENDIAN);
    }
    
    <span class="hljs-comment">/**
     * å†™å…¥å•æ¡è®°å½•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] record)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-keyword">return</span> write(record, <span class="hljs-number">0</span>, record.length);
    }
    
    <span class="hljs-comment">/**
     * å†™å…¥éƒ¨åˆ†æ•°æ®ï¼ˆæ”¯æŒ offsetï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] record, <span class="hljs-type">int</span> offset, <span class="hljs-type">int</span> length)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        
        <span class="hljs-comment">// æ€»å¤§å° = 4 å­—èŠ‚é•¿åº¦å¤´ + æ•°æ®ä½“</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">outputSize</span> <span class="hljs-operator">=</span> HEADER_LENGTH + (length - offset);
        
        <span class="hljs-comment">// 1. é¢„ç•™ç©ºé—´ï¼ˆæ— é”æ£€æŸ¥ï¼‰</span>
        <span class="hljs-keyword">if</span> (!outputStream.tryReserveBeforeWrite(outputSize)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;  <span class="hljs-comment">// é˜Ÿåˆ—å·²æ»¡</span>
        }
        
        <span class="hljs-comment">// 2. ç”Ÿæˆé•¿åº¦å¤´ï¼ˆLittle Endianï¼‰</span>
        <span class="hljs-type">byte</span>[] headerData = extractHeaderData(length);
        
        <span class="hljs-comment">// 3. å…ˆå†™é•¿åº¦å¤´</span>
        outputStream.write(headerData, <span class="hljs-number">0</span>, HEADER_LENGTH);
        
        <span class="hljs-comment">// 4. å†å†™æ•°æ®ä½“</span>
        outputStream.write(record, offset, length);
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-comment">/**
     * ç”Ÿæˆ Little Endian é•¿åº¦å¤´
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] extractHeaderData(<span class="hljs-type">int</span> length) {
        headerByteBuffer.clear();
        headerByteBuffer.putInt(length);
        <span class="hljs-keyword">return</span> dataHeaderBytes;
    }
}
</code></pre>
<h4 data-id="heading-5">æ•°æ®å¸§æ ¼å¼</h4>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  InferDataWriter å†™å…¥çš„æ•°æ®æ ¼å¼   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-selector-attr">[4å­—èŠ‚é•¿åº¦å¤´ (Little Endian)]</span>     â”‚
â”‚  <span class="hljs-number">0</span>x0A <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00  â†’ <span class="hljs-number">10</span>       â”‚
â”‚  (è¡¨ç¤ºåç»­ <span class="hljs-number">10</span> å­—èŠ‚çš„æ•°æ®)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ <span class="hljs-selector-attr">[æ•°æ®ä½“ 10å­—èŠ‚]</span>                   â”‚
â”‚  <span class="hljs-number">0</span>x48 <span class="hljs-number">0</span>x65 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6C ...        â”‚
â”‚  (H    e    l    l    o    ...)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç¤ºä¾‹: åºåˆ—åŒ– <span class="hljs-string">"Hello World"</span> (<span class="hljs-number">11</span> å­—èŠ‚)

ç¬¬ä¸€å¸§:
  Length: <span class="hljs-number">0</span>x0B <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00
  Data:   <span class="hljs-number">0</span>x48 <span class="hljs-number">0</span>x65 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x6F <span class="hljs-number">0</span>x20 (H e l l o [space])

ç¬¬äºŒå¸§:
  Length: <span class="hljs-number">0</span>x05 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00 <span class="hljs-number">0</span>x00
  Data:   <span class="hljs-number">0</span>x57 <span class="hljs-number">0</span>x6F <span class="hljs-number">0</span>x72 <span class="hljs-number">0</span>x6C <span class="hljs-number">0</span>x64 (W o r l d)
</code></pre>
<h4 data-id="heading-6">å­—èŠ‚åºå¤„ç†</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Little Endian vs Big Endian</span>

æ•´æ•° <span class="hljs-number">0x12345678</span>

Big <span class="hljs-title function_">Endian</span> <span class="hljs-params">(ç½‘ç»œå­—èŠ‚åº)</span>:
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">0</span>: <span class="hljs-number">0x12</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">1</span>: <span class="hljs-number">0x34</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">2</span>: <span class="hljs-number">0x56</span>
  â””â”€ <span class="hljs-type">byte</span> <span class="hljs-number">3</span>: <span class="hljs-number">0x78</span>

Little <span class="hljs-title function_">Endian</span> <span class="hljs-params">(x86/ARM åŸç”Ÿ)</span>:
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">0</span>: <span class="hljs-number">0x78</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">1</span>: <span class="hljs-number">0x56</span>
  â”œâ”€ <span class="hljs-type">byte</span> <span class="hljs-number">2</span>: <span class="hljs-number">0x34</span>
  â””â”€ <span class="hljs-type">byte</span> <span class="hljs-number">3</span>: <span class="hljs-number">0x12</span>

<span class="hljs-comment">// Java ByteBuffer æ”¯æŒä¸¤ç§æ–¹å¼</span>
<span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">bb</span> <span class="hljs-operator">=</span> ByteBuffer.wrap(bytes);

<span class="hljs-comment">// æ–¹å¼ 1: Big Endian (é»˜è®¤)</span>
bb.putInt(<span class="hljs-number">0x12345678</span>);  
<span class="hljs-comment">// ç»“æœ: [0x12, 0x34, 0x56, 0x78]</span>

<span class="hljs-comment">// æ–¹å¼ 2: Little Endian (GeaFlow ä½¿ç”¨)</span>
bb.order(ByteOrder.LITTLE_ENDIAN);
bb.putInt(<span class="hljs-number">0x12345678</span>);
<span class="hljs-comment">// ç»“æœ: [0x78, 0x56, 0x34, 0x12]</span>

<span class="hljs-comment">// ä¸ºä»€ä¹ˆé€‰æ‹© Little Endian?</span>
<span class="hljs-comment">// âœ“ x86/ARM å¤„ç†å™¨åŸç”Ÿæ”¯æŒ</span>
<span class="hljs-comment">// âœ“ é¿å…å­—èŠ‚åºè½¬æ¢å¼€é”€</span>
<span class="hljs-comment">// âœ“ Java å’Œ Python mmap éƒ½èƒ½å¿«é€Ÿè®¿é—®</span>
</code></pre>
<hr/>
<h3 data-id="heading-7">7.2 InferDataReader å®ç°</h3>
<h4 data-id="heading-8">æ ¸å¿ƒèŒè´£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InferDataReader</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Closeable</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">HEADER_LENGTH</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataInputStream input;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicBoolean</span> <span class="hljs-variable">END</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicBoolean</span>(<span class="hljs-literal">false</span>);
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InferDataReader</span><span class="hljs-params">(DataExchangeQueue queue)</span> {
        <span class="hljs-type">DataQueueInputStream</span> <span class="hljs-variable">dataQueueInputStream</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataQueueInputStream</span>(queue);
        <span class="hljs-built_in">this</span>.input = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataInputStream</span>(dataQueueInputStream);
    }
    
    <span class="hljs-comment">/**
     * è¯»å–ä¸€æ¡è®°å½•
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">byte</span>[] read() <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// 1. è¯»å– 4 å­—èŠ‚é•¿åº¦å¤´</span>
        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[HEADER_LENGTH];
        <span class="hljs-type">int</span> <span class="hljs-variable">bytesNum</span> <span class="hljs-operator">=</span> input.read(buffer);
        
        <span class="hljs-comment">// å¤„ç† EOF æˆ–è¯»å–å¤±è´¥</span>
        <span class="hljs-keyword">if</span> (bytesNum &lt; <span class="hljs-number">0</span>) {
            END.set(<span class="hljs-literal">true</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-comment">// å¦‚æœé•¿åº¦å¤´æœªè¯»å®Œï¼Œç»§ç»­è¯»</span>
        <span class="hljs-keyword">if</span> (bytesNum &lt; buffer.length) {
            input.readFully(buffer, bytesNum, buffer.length - bytesNum);
        }
        
        <span class="hljs-comment">// 2. è§£æé•¿åº¦ï¼ˆLittle Endianï¼‰</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> fromInt32LE(buffer);
        
        <span class="hljs-comment">// 3. è¯»å–æ•°æ®ä½“</span>
        <span class="hljs-type">byte</span>[] data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[len];
        input.readFully(data);  <span class="hljs-comment">// é˜»å¡ç›´åˆ°è¯»æ»¡</span>
        
        <span class="hljs-keyword">return</span> data;
    }
    
    <span class="hljs-comment">/**
     * ä» Little Endian å­—èŠ‚è½¬æ¢ä¸ºæ•´æ•°
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">fromInt32LE</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] bytes)</span> {
        <span class="hljs-keyword">return</span> (bytes[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xFF</span>) 
            | ((bytes[<span class="hljs-number">1</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">8</span>) 
            | ((bytes[<span class="hljs-number">2</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">16</span>) 
            | ((bytes[<span class="hljs-number">3</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; <span class="hljs-number">24</span>);
    }
}
</code></pre>
<h4 data-id="heading-9">è¯»å–æµç¨‹</h4>
<pre><code class="hljs language-scss" lang="scss">DataQueueInputStream
  â†“
åº•å±‚è¿æ¥åˆ° DataExchangeQueue
  â”œâ”€ è½®è¯¢ç­‰å¾…æ•°æ®
  â”œâ”€ å½“æ•°æ®åˆ°è¾¾æ—¶ï¼Œè¿”å›
  â””â”€ æ”¯æŒé˜»å¡/è¶…æ—¶

DataInputStream
  â†“
åŒ…è£… DataQueueInputStream
  â”œâ”€ æä¾›ç¼“å†² <span class="hljs-selector-tag">I</span>/O
  â”œâ”€ <span class="hljs-built_in">readFully</span>() ç¡®ä¿è¯»è¶³ N å­—èŠ‚
  â””â”€ å¤„ç† EOF å’Œé”™è¯¯
</code></pre>
<hr/>
<h3 data-id="heading-10">7.3 æ•°æ®å¸§è®¾è®¡çš„ä¼˜é›…æ€§</h3>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆè¦æœ‰é•¿åº¦å¤´ï¼Ÿ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">1:</span> <span class="hljs-string">æ— é•¿åº¦å¤´ï¼ˆç›´æ¥å†™æ•°æ®ï¼‰</span>
  <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">Reader</span> <span class="hljs-string">ä¸çŸ¥é“ä½•æ—¶åœæ­¢</span>
  <span class="hljs-attr">Example:</span>
    <span class="hljs-string">Writer</span> <span class="hljs-string">å†™å…¥:</span> [<span class="hljs-number">0x48</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6F</span>]
    <span class="hljs-string">Reader</span> <span class="hljs-string">è¯»å–:</span> <span class="hljs-string">åº”è¯¥è¯»</span> <span class="hljs-number">5</span> <span class="hljs-string">ä¸ªå­—èŠ‚è¿˜æ˜¯</span> <span class="hljs-number">10</span> <span class="hljs-string">ä¸ªï¼Ÿæ— æ³•åˆ¤æ–­</span>

<span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">2:</span> <span class="hljs-string">æœ‰é•¿åº¦å¤´ï¼ˆæ¨èï¼‰</span>
  <span class="hljs-string">ä¼˜ç‚¹:</span> <span class="hljs-string">æ•°æ®è‡ªæè¿°ï¼ŒReader</span> <span class="hljs-string">çŸ¥é“ä½•æ—¶åœæ­¢</span>
  <span class="hljs-attr">Example:</span>
    <span class="hljs-string">Writer</span> <span class="hljs-string">å†™å…¥:</span> [<span class="hljs-number">0x05</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>, <span class="hljs-number">0x00</span>][<span class="hljs-number">0x48</span>, <span class="hljs-number">0x65</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6C</span>, <span class="hljs-number">0x6F</span>]
    <span class="hljs-attr">Reader:</span> <span class="hljs-string">å…ˆè¯»</span> <span class="hljs-number">4</span> <span class="hljs-string">å­—èŠ‚é•¿åº¦</span> <span class="hljs-string">=</span> <span class="hljs-number">5</span><span class="hljs-string">ï¼Œå†è¯»</span> <span class="hljs-number">5</span> <span class="hljs-string">å­—èŠ‚æ•°æ®</span> <span class="hljs-string">âœ“</span>

<span class="hljs-string">æ–¹æ¡ˆ</span> <span class="hljs-attr">3:</span> <span class="hljs-string">åˆ†ç•Œç¬¦ï¼ˆä¸æ¨èï¼‰</span>
  <span class="hljs-string">é—®é¢˜:</span> <span class="hljs-string">æ•°æ®å¯èƒ½åŒ…å«åˆ†ç•Œç¬¦ï¼Œéœ€è¦è½¬ä¹‰</span>
  <span class="hljs-string">å¤æ‚åº¦:</span> <span class="hljs-string">é«˜</span>
</code></pre>
<h4 data-id="heading-12">å­—èŠ‚åºçš„å¿…è¦æ€§</h4>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ 1: Java å†™ï¼ŒPython è¯»ï¼ˆéƒ½ç”¨ Little Endianï¼‰
  Java:   int <span class="hljs-attr">length</span> = <span class="hljs-number">10</span>
          å°†å…¶ç¼–ç ä¸º <span class="hljs-section">[0x0A, 0x00, 0x00, 0x00]</span>
          å†™å…¥å…±äº«å†…å­˜
  
  Python: ä»å…±äº«å†…å­˜è¯»å– <span class="hljs-section">[0x0A, 0x00, 0x00, 0x00]</span>
          ä½¿ç”¨ struct.unpack('&lt;I', ...) è§£æ
          å¾—åˆ° 10 âœ“

åœºæ™¯ 2: å¦‚æœ Java ç”¨ Big Endian, Python ç”¨ Little Endian
  Java:   int <span class="hljs-attr">length</span> = <span class="hljs-number">10</span>
          ç¼–ç ä¸º <span class="hljs-section">[0x00, 0x00, 0x00, 0x0A]</span>  â† Big Endian
          å†™å…¥å…±äº«å†…å­˜
  
  Python: ä»å…±äº«å†…å­˜è¯»å– <span class="hljs-section">[0x00, 0x00, 0x00, 0x0A]</span>
          ä½¿ç”¨ struct.unpack('&lt;I', ...) è§£æ
          å¾—åˆ° 167772160 âœ— å®Œå…¨é”™è¯¯!

ç»“è®º: åŒæ–¹å¿…é¡»çº¦å®šåŒä¸€ç§å­—èŠ‚åº
</code></pre>
<hr/>
<h3 data-id="heading-13">7.4 æµå¼ I/O ä¸ç¼“å†²</h3>
<h4 data-id="heading-14">DataQueueOutputStream</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQueueOutputStream</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OutputStream</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataExchangeQueue queue;
    
    <span class="hljs-comment">/**
     * é¢„ç•™ç©ºé—´ï¼ˆæ— é”æ£€æŸ¥ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">tryReserveBeforeWrite</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> {
        <span class="hljs-comment">// æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦æœ‰è¶³å¤Ÿç©ºé—´</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">writeIndex</span> <span class="hljs-operator">=</span> UNSAFE.getVolatileLong(<span class="hljs-built_in">this</span>, WRITE_PTR);
        <span class="hljs-type">long</span> <span class="hljs-variable">readIndex</span> <span class="hljs-operator">=</span> UNSAFE.getVolatileLong(<span class="hljs-built_in">this</span>, READ_PTR);
        
        <span class="hljs-type">long</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> (readIndex + capacity) - writeIndex;
        <span class="hljs-keyword">return</span> available &gt;= size;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">int</span> b)</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1</span>];
        bytes[<span class="hljs-number">0</span>] = (<span class="hljs-type">byte</span>) b;
        write(bytes);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] b, <span class="hljs-type">int</span> off, <span class="hljs-type">int</span> len)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// è°ƒç”¨ DataExchangeQueue çš„åº•å±‚å†™æ–¹æ³•</span>
        queue.put(b, off, len);
    }
}
</code></pre>
<h4 data-id="heading-15">DataQueueInputStream</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataQueueInputStream</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputStream</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DataExchangeQueue queue;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">DEFAULT_TIMEOUT</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;  <span class="hljs-comment">// 1 ç§’</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">read</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-type">byte</span>[] buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1</span>];
        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> read(buffer);
        <span class="hljs-keyword">return</span> n &gt; <span class="hljs-number">0</span> ? buffer[<span class="hljs-number">0</span>] &amp; <span class="hljs-number">0xFF</span> : -<span class="hljs-number">1</span>;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">read</span><span class="hljs-params">(<span class="hljs-type">byte</span>[] b, <span class="hljs-type">int</span> off, <span class="hljs-type">int</span> len)</span> 
            <span class="hljs-keyword">throws</span> IOException {
        <span class="hljs-comment">// è½®è¯¢ç­‰å¾…æ•°æ®ï¼ˆå¸¦è¶…æ—¶ï¼‰</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
            <span class="hljs-type">byte</span>[] data = queue.get();  <span class="hljs-comment">// éé˜»å¡</span>
            
            <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">null</span>) {
                System.arraycopy(data, <span class="hljs-number">0</span>, b, off, len);
                <span class="hljs-keyword">return</span> len;
            }
            
            <span class="hljs-comment">// è¶…æ—¶æ£€æŸ¥</span>
            <span class="hljs-keyword">if</span> (System.currentTimeMillis() - startTime 
                    &gt; DEFAULT_TIMEOUT) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SocketTimeoutException</span>(
                    <span class="hljs-string">"è¯»å–é˜Ÿåˆ—æ•°æ®è¶…æ—¶"</span>);
            }
            
            Thread.sleep(<span class="hljs-number">10</span>);  <span class="hljs-comment">// è®©å‡º CPUï¼Œé¿å…å¿™è½®è¯¢</span>
        }
    }
}
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹]]></title>    <link>https://juejin.cn/post/7576843726011039770</link>    <guid>https://juejin.cn/post/7576843726011039770</guid>    <pubDate>2025-11-26T09:12:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011039770" data-draft-id="7575363120798826496" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹"/> <meta itemprop="keywords" content="ç”µå­ä¹¦,ç¬”è®°"/> <meta itemprop="datePublished" content="2025-11-26T09:12:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡‰å‡‰çš„çŸ¥è¯†åº“"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428311326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¹¦æµ·æ‹¾é—ï¼šã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428311326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡‰å‡‰çš„çŸ¥è¯†åº“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:12:54.000Z" title="Wed Nov 26 2025 09:12:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹æ¨èçš„äººéå¸¸å¤šï¼Œæœ€è¿‘ç»ˆäºèŠ±æ—¶é—´è¯»å®Œäº†æœ¬ä¹¦ã€‚å…¶ä¸­è®¸å¤šè§‚ç‚¹ç¡®å®è®©äººè€³ç›®ä¸€æ–°ã€‚å®é™…ä¸Šä½œè€…çš„è§‚ç‚¹åœ¨ä¹¦ä¸­éƒ½æœ‰ç€ä¸¥è°¨çš„æ¨ç†å’Œè¯æ˜ï¼Œå—é™äºç¯‡å¹…æˆ‘åªæ˜¯éå¸¸ç®€é™‹çš„æ¦‚æ‹¬äº†æœ¬ä¹¦ä½œè€…çš„ç»“è®ºï¼Œå¦‚æœä½ å¯¹è¿™äº›è§‚ç‚¹æ„Ÿå…´è¶£ï¼Œå¼ºçƒˆå»ºè®®ä½ ä»”ç»†çš„é˜…è¯»åŸä¹¦</p>
</blockquote>
<p>ã€Šæªç‚®ã€ç—…èŒä¸é’¢é“ã€‹æ˜¯è´¾é›·å¾·Â·æˆ´è’™å¾·ï¼ˆJared Diamondï¼‰1997å¹´å‡ºç‰ˆçš„è‘—ä½œï¼Œ1998å¹´å³è·å¾—æ™®åˆ©ç­–å¥–ã€‚ä½œè€…æ˜¯ç¾å›½æ¼”åŒ–ç”Ÿç‰©å­¦å®¶ã€ç”Ÿç†å­¦å®¶ä¸åœ°ç†å­¦å®¶ï¼Œç¾å›½å›½å®¶ç§‘å­¦é™¢é™¢å£«ã€‚æœ¬ä¹¦æ ¸å¿ƒçš„è§£é‡Šäº†è¿™æ ·çš„ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä½•åœ¨è¿‡å»13,000å¹´é—´ï¼Œä¸åŒå¤§é™†çš„äººç±»ç¤¾ä¼šå‘ˆç°å‡ºå¦‚æ­¤å·¨å¤§çš„å‘å±•å·®å¼‚ï¼Ÿä¸ºä½•æ˜¯æ¬§äºšå¤§é™†æ–‡æ˜å¾æœäº†ç¾æ´²ã€éæ´²å’Œå¤§æ´‹æ´²ï¼Œè€Œä¸æ˜¯ç›¸åã€‚</p>
<p>æ˜¯å› ä¸ºä¸åŒåœ°åŒºæŠ€æœ¯å‘å±•å·®å¼‚å¯¼è‡´çš„ä¹ˆï¼Ÿé‚£æŠ€æœ¯å·®å¼‚æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿæ˜¯ä¸åŒåœ°åŒºçš„æ–‡åŒ–ã€åˆ¶åº¦å·®å¼‚å¯¼è‡´çš„ä¹ˆï¼Ÿé‚£ä¸åŒçš„æ–‡åŒ–ã€åˆ¶åº¦å·®å¼‚åˆæ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Ÿä½œè€…æˆ´è’™å¾·å¸Œæœ›æ¢å¯»è¿™ä¸€åˆ‡çš„ç»ˆæå› ï¼Œåœ¨å…¨ä¹¦å¼€ç¯‡å³äº®å‡ºäº†é¢ è¦†æ€§çš„æ ¸å¿ƒè§‚ç‚¹ï¼šâ€œä¸åŒæ°‘æ—çš„å†å²éµå¾ªä¸åŒçš„é“è·¯å‰è¿›ï¼Œå…¶åŸå› æ˜¯åœ°ç†ç¯å¢ƒçš„å·®å¼‚ï¼Œè€Œä¸æ˜¯æ°‘æ—è‡ªèº«åœ¨ç”Ÿç‰©å­¦ä¸Šçš„å·®å¼‚â€</p>
<p>å„å¤§æ´²çš„ç¯å¢ƒæœ‰è®¸å¤šä¸åŒçš„ç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾éƒ½èƒ½å½±å“äººç±»å†å²çš„å‘å±•ï¼Œä½œè€…è®¤ä¸ºå…¶ä¸­å››ç»„æ˜¯æœ€é‡è¦çš„ã€‚</p>
<p><strong>ç¬¬ä¸€ç»„å› ç´ æ˜¯ç¯å¢ƒå·®å¼‚ï¼Œå„å¤§æ´²ä¸Šå¯ä¾›é©¯åŒ–çš„åŠ¨æ¤ç‰©èµ„æºä¸åŒã€‚</strong> å…¨çƒä»…æœ‰å°‘æ•°å‡ ä¸ªç‹¬ç«‹å†œä¸šèµ·æºä¸­å¿ƒï¼Œå…¶ä»–åœ°åŒºçš„ä¸»è¦ä½œç‰©å’Œå¤§å‹å®¶ç•œéƒ½æ˜¯ä»å‘æºåœ°ä¼ æ’­è€Œæ¥ï¼Œè¿™å¹¶ä¸æ˜¯å› ä¸ºå„åœ°åŒºç§æ—é©¯åŒ–åŠ¨æ¤ç‰©çš„èƒ½åŠ›å·®è·ï¼Œè€Œæ˜¯é©¯åŒ–èµ„æºçš„åˆ†å¸ƒä¸å‡ã€‚</p>
<p>ä½œè€…ç»™å‡ºçš„ç†ç”±ä¹‹ä¸€æ˜¯å³ä½¿ç°ä»£ç¤¾ä¼šç§‘æŠ€å‘å±•æ°´å¹³å¦‚æ­¤ä¹‹é«˜ï¼Œäººç±»å¹¶æ²¡æœ‰é©¯åŒ–å‡ºæ›´å¤šçš„åŠ¨æ¤ç‰©ã€‚å› ä¸ºé©¯åŒ–çš„å€™é€‰åŠ¨ç‰©å¿…é¡»å…·å¤‡è®¸å¤šç‰¹è´¨æ‰èƒ½è„±é¢–è€Œå‡ºï¼ˆä½œè€…ä¹Ÿåˆ†æäº†å“ªäº›ç‰¹è´¨è¿™é‡Œä¸èµ˜è¿°ï¼‰ï¼Œå°‘äº†ä»»ä½•ä¸€ç‚¹éƒ½æœ‰å¯èƒ½åŠŸè´¥å‚æˆã€‚ä»¥å¯ä¾›é©¯åŒ–çš„ç”Ÿç‰©èµ„æºæ¥è¯´ï¼Œæ¬§äºšå¤§é™†æœ€å¾—å¤©ç‹¬åšï¼Œéæ´²æ¬¡ä¹‹ï¼Œç¾æ´²å°±å·®å¤šäº†ï¼Œè€Œæ¾³å¤§åˆ©äºšç®€ç›´æ˜¯ä¸æ¯›ä¹‹åœ°ï¼Œè¿™ç§å†œä¸šå‘å±•æ—¶é—´å·®ä¸ºæ¬§äºšå¤§é™†æ–‡æ˜èµ¢å¾—äº†å…³é”®å‘å±•å…ˆæœºã€‚</p>
<p>é£Ÿç‰©ç”Ÿäº§éå¸¸é‡è¦ï¼Œç›¸æ¯”ç‹©çŒâ€”é‡‡é›†æ–¹å¼ï¼Œå†œä¸šäº§å‡ºæ›´å¤šé£Ÿç‰©çš„åŒæ—¶éœ€è¦äººä»¬å®šå±…ï¼Œä¿ƒæˆäº†äººå£å¯†åº¦çš„å¢åŠ ï¼Œç›ˆä½™çš„é£Ÿç‰©åˆå¯ä»¥æ¥ä¾›å…»ä¸äº‹ç”Ÿäº§çš„ä¸“å®¶æˆ–è€…å®˜åƒšï¼Œäººç±»æ—ç¾¤é€æ­¥ä»ç®€å•çš„äººäººå¹³ç­‰çš„æ¸¸æ—ä¸æ–­æ¼”è¿›åˆ°éƒ¨è½ã€é…‹é‚¦ã€å›½å®¶ï¼Œå½¢æˆå¤æ‚çš„ç¤¾ä¼šåˆ¶åº¦ã€‚</p>
<p>å®šå±…ã€é›†æƒã€ç¤¾ä¼šåˆ†å±‚ã€ç»æµå¤æ‚ã€æŠ€æœ¯åˆ›æ–°çš„ç¤¾ä¼šï¼Œä¸“å®¶å¯ä»¥æŠ€æœ¯åˆ›æ–°å‘æ˜å·¥å…·ã€æ–‡å­—æˆ–è€…æ­¦å™¨æå‡å†œä¸šä¸å†›äº‹æ°´å¹³ï¼Œå®˜åƒšé˜¶çº§å¯ä»¥è¶‹åŠ¿å¥´éš¶ä¸å†›é˜Ÿä¿®å»ºå¤§å‹å†œä¸šè®¾æ–½æˆ–å¯¹å¤–æˆ˜äº‰ã€‚æœ€æ—©è±¢å…»å®¶ç•œçš„äººç±»è¿˜ä¼šå’Œå®¶å…»åŠ¨ç‰©ä¸€èµ·æ¼”åŒ–çš„ç—…èŒï¼Œå½“è¿™äº›æ‹¥æœ‰æŠ—ä½“çš„äººä¸ä»æ¥ä¸æ›¾æ„ŸæŸ“è¿‡è¿™ç±»ç—…èŒçš„äººä»¬æ¥è§¦æ—¶ä¼šé€ æˆä¼ æŸ“ç—…çš„å¤§æµè¡Œã€‚</p>
<p>ä½œç‰©å’Œç‰²ç•œçš„æœ‰æ— ï¼Œä»æ ¹æœ¬ä¸Šè§£é‡Šäº†ä¸ºä½•å¸å›½ã€æ–‡å­—ã€é’¢é“æ­¦å™¨æœ€æ—©åœ¨æ¬§äºšå¤§é™†å‡ºç°ï¼Œè€Œåœ¨å…¶ä»–åœ°æ–¹è¾ƒæ™šç”šè‡³æ²¡æœ‰å‡ºç°ã€‚å†åŠ ä¸Šé©¬åŒ¹å’Œéª†é©¼åœ¨å†›äº‹ä¸Šçš„ä½œç”¨ï¼Œä»¥åŠæºè‡ªåŠ¨ç‰©çš„ç—…èŒçš„æ€ä¼¤åŠ›ï¼Œè¶³ä»¥å¾æœå…¶ä»–è½åçš„æ—ç¾¤ã€‚</p>
<p><strong>ç¬¬äºŒç»„å› ç´ æ˜¯å½±å“ä¼ æ’­ä¸è¿å¾™é€Ÿåº¦çš„æ¡ä»¶ï¼Œå„å¤§æ´²åœ¨è¿™æ–¹é¢æœ‰å¾ˆå¤§çš„å·®å¼‚ã€‚</strong> åœ¨æ¬§äºšå¤§é™†ä¸Šï¼Œä¼ æ’­ä¸è¿å¾™çš„é€Ÿåº¦æœ€å¿«ï¼Œå› ä¸ºæ¬§äºšå¤§é™†çš„å¤§é™†è½´çº¿æ˜¯ä¸œè¥¿å‘çš„ï¼Œè€Œä¸”ç”Ÿæ€ä¸åœ°ç†éšœç¢æ¯”è¾ƒå°‘ã€‚å¯¹ç‰²å£ä¸å†œä½œç‰©çš„ä¼ æ’­è€Œè¨€ï¼Œå‘è‚²ã€æ»‹é•¿å—æ°”å€™çš„å½±å“ï¼Œè€Œæ°”å€™åˆå—çº¬åº¦å½±å“ã€‚ç›¸æ¯”äºéæ´²å—åŒ—å‘è½´çº¿ï¼Œä¸åŒåœ°åŒºçš„æ°”å€™ä¸åŒï¼Œä¸¥é‡é˜»ç¢äº†å†œä¸šæŠ€æœ¯çš„ä¼ æ’­ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56d5aae71c7c456c94734ec269cf6a73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YeJ5YeJ55qE55-l6K-G5bqT:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753591&amp;x-signature=Q2sPgSvQDyrNy2EKi4DewHnxa8M%3D" alt="ä¸–ç•Œåœ°å›¾" loading="lazy"/></p>
<p><strong>ç¬¬ä¸‰ç»„å› ç´ æ˜¯å„å¤§æ´²ä¹‹é—´ä¼ æ’­çš„éš¾æ˜“ç¨‹åº¦ä¸åŒ</strong>ã€‚ä½œç‰©ã€ç‰²å£ã€æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å„å¤§æ´²ä¹‹é—´çš„ä¼ æ’­è·å¾—ï¼Œä»æ¬§äºšå¤§é™†åˆ°æ’’å“ˆæ‹‰ä»¥å—éæ´²çš„ä¼ æ’­æ˜¯æœ€å®¹æ˜“çš„ï¼Œæ¾³å¤§åˆ©äºšåœŸè‘—ä¸æ¬§äºšå¤§é™†éš”ç€å¤§æ´‹éš¾åº¦æœ€å¤§ã€‚</p>
<p><strong>ç¬¬å››ç»„ä¹Ÿæ˜¯æœ€åä¸€ç»„å› ç´ ï¼Œæ˜¯å„å¤§æ´²åœ¨é¢ç§¯æˆ–äººå£æ€»æ•°ä¸Šçš„å·®å¼‚ã€‚</strong> é¢ç§¯è¶Šå¤§ã€äººå£æ€»æ•°è¶Šå¤šçš„å¤§æ´²ï¼Œå‘æ˜å®¶è¶Šå¤šï¼Œç›¸äº’ç«äº‰çš„ç¤¾ä¼šè¶Šå¤šï¼Œåˆ›æ–°ä¹Ÿè¶Šå¤šâ€”â€”é‡‡å€Ÿå’Œä¿æŒåˆ›æ–°çš„å‹åŠ›æ›´å¤§ï¼Œå› ä¸ºä¸è¿™ä¹ˆåšå°±ä¼šè¢«ç«äº‰å¯¹æ‰‹æ·˜æ±°ã€‚ä¸–ç•Œä¸Šçš„å„ä¸ªé™†å—ä¸­ï¼Œæ¬§äºšå¤§é™†çš„é¢ç§¯æœ€å¤§ï¼Œç›¸äº’ç«äº‰çš„ç¤¾ä¼šæ•°é‡ä¹Ÿæœ€å¤šã€‚ç¾æ´²çš„é¢ç§¯è™½ç„¶å¾ˆå¤§ï¼Œåœ¨åœ°ç†å’Œç”Ÿæ€ä¸Šå´å¾ˆç¢ç‰‡åŒ–ï¼Œå®é™…ä¸Šåƒæ˜¯æ²¡æœ‰ç´§å¯†è”ç³»çš„å‡ ä¸ªå°é™†å—ã€‚</p>
<p>ç”±æ­¤æ„å»ºäº†æ¸…æ™°çš„å› æœå…³ç³»é“¾ï¼šå„å¤§é™†ä¸åŒçš„åœ°ç†ç¯å¢ƒæ¡ä»¶ï¼ˆå°¤å…¶æ˜¯å¯é©¯åŒ–åŠ¨æ¤ç‰©èµ„æºï¼‰â†’ ç²®é£Ÿç”Ÿäº§å‡ºç°æ—¶é—´ä¸ä¼ æ’­é€Ÿåº¦å·®å¼‚ â†’ äººå£å¯†åº¦ã€ç¤¾ä¼šåˆ†å·¥ä¸æŠ€æœ¯åˆ›æ–°å·®å¼‚ â†’ æªç‚®ã€ç—…èŒä¸é’¢é“çš„å‘å±•ä¸å¹³è¡¡ â†’ æ¬§æ´²å¯¹ç¾æ´²ç­‰åœ°çš„å¾æœã€‚</p>
<p>è™½ç„¶ä½œè€…å£«åœ¨ä¹¦ä¸­æŠŠç¯å¢ƒå› ç´ è§†ä¸ºå†å²å‘å±•çš„ç»ˆæå› ï¼Œä½†ä»–ä¹Ÿè®¤è¯†åˆ°ç¯å¢ƒå› ç´ ä¸å¯èƒ½æ˜¯å”¯ä¸€çš„ï¼Œå†å²ç³»ç»Ÿå³ä½¿æœ‰ç»ˆæçš„ç¡®å®šæ€§ï¼Œä¹Ÿä»æ—§æ˜¯å¤æ‚ã€ä¸å¯é¢„æµ‹çš„ã€‚ä½†é€šè¿‡æŠŠäººç±»ç¤¾ä¼šçš„å†å²å¯ä»¥å½“ä½œç§‘å­¦æ¥ç ”ç©¶ï¼Œå°±åƒç ”ç©¶æé¾™ä¸€æ ·ï¼Œæˆ‘ä»¬çš„æ”¶è·å¯¹å½“ä»Šçš„ç¤¾ä¼šæœ‰ç›Šï¼Œå› ä¸ºæˆ‘ä»¬ä¼šæ˜ç™½ä»€ä¹ˆå¡‘é€ äº†ç°ä»£ä¸–ç•Œï¼Œä»€ä¹ˆåˆå¯èƒ½å¡‘é€ æˆ‘ä»¬çš„æœªæ¥ã€‚</p>
<hr/>
<p>âœ¨ å¾®ä¿¡å…¬ä¼—å·ã€<strong>å‡‰å‡‰çš„çŸ¥è¯†åº“</strong>ã€‘åŒæ­¥æ›´æ–°ï¼Œæ¬¢è¿å…³æ³¨è·å–æœ€æ–°æœ€æœ‰ç”¨çš„çŸ¥è¯† âœ¨</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰]]></title>    <link>https://juejin.cn/post/7576853741757300770</link>    <guid>https://juejin.cn/post/7576853741757300770</guid>    <pubDate>2025-11-26T09:16:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576853741757300770" data-draft-id="7576827115968102435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-26T09:16:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JavaGuide"/> <meta itemprop="url" content="https://juejin.cn/user/166781497383294"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¾å›¢2026å±Šåç«¯ä¸€äºŒé¢ï¼ˆé™„è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/166781497383294/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JavaGuide
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:16:09.000Z" title="Wed Nov 26 2025 09:16:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026 å±Šç§‹æ‹›é™†ç»­å¼€å¥–å…¬å¸çš„è¶Šæ¥è¶Šå¤šäº†ï¼Œå¤§å®¶æ¯”è¾ƒæœŸå¾…çš„ç¾å›¢ä¹Ÿå¼€äº†ï¼</p>
<p>æ ¹æ®ç½‘ä¸Šå·²ç»çˆ†å‡ºçš„è–ªèµ„æ¥çœ‹ï¼Œä¸‹é¢æ˜¯ç¾å›¢åç«¯å’Œå…¶ä»–éƒ¨åˆ†å²—ä½ä»Šå¹´å·²ç»å¼€å¥–çš„è–ªèµ„æƒ…å†µï¼š</p>
<ul>
<li>åç«¯ï¼š23k * 15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœï¼Œ</li>
<li>åç«¯ï¼šï¼ˆ25~26)k * 15.5ï¼ŒåŒ—äº¬ï¼Œå° SP</li>
<li>åç«¯ï¼š28k * 15.5ï¼ŒåŒ—äº¬ï¼Œå¤§ SPï¼Œ</li>
<li>åç«¯ï¼šï¼ˆ30~32ï¼‰k * 15.5ï¼ŒåŒ—äº¬ï¼ŒSSP</li>
<li>å‰ç«¯ï¼š23k * 15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœ</li>
<li>æµ‹å¼€ï¼š23K*15.5ï¼ŒåŒ—äº¬ï¼Œç™½èœ</li>
<li>å¤§æ¨¡å‹ï¼ˆåŒ—æ–—è®¡åˆ’ï¼‰ï¼š48*15.5ï¼ŒåŒ—äº¬</li>
</ul>
<p>å’Œå»å¹´å¼€çš„å·®ä¸å¤šï¼ŒåŒºåˆ«ä¸å¤§ï¼åç«¯ç™½èœå¹´åŒ…ä¹Ÿæœ‰æ¥è¿‘ 35.5w+ ï¼Œè¿˜æ˜¯ä¸é”™çš„ã€‚ç¾å›¢çš„å…¬ç§¯é‡‘ç¼´çº³æ¯”ä¾‹å„åœ°ä¸åŒï¼ŒåŒ—äº¬å¯è¾¾ 12%ï¼Œä¸Šæµ·ä¸º 7%ï¼Œæˆéƒ½ä¸º 8%ã€‚</p>
<p>ç¾å›¢å¯¹æ–°äººçš„åŸ¹å…»è¿˜æ˜¯ä¸é”™çš„ï¼Œæœ‰å¾ˆå¤šåŸ¹è®­çš„è¯¾ç¨‹ï¼Œå…¬å¸é‡Œä¹Ÿæœ‰å¾ˆå¤šæŠ€æœ¯å¤§ä½¬ã€‚ä½ å¹³æ—¶å¦‚æœçœ‹ç¾å›¢æŠ€æœ¯å›¢é˜Ÿçš„æ–‡ç« çš„è¯ï¼Œåº”è¯¥å¯¹ç¾å›¢çš„æŠ€æœ¯æ°´å¹³æ˜¯æ¯”è¾ƒè®¤å¯çš„ã€‚å›¢é˜Ÿæ°›å›´çš„è¯ï¼Œè¿™ä¸ªè¦çœ‹å…·ä½“çš„é¡¹ç›®ç»„ï¼Œå¤§éƒ¨åˆ†åº”è¯¥éƒ½æ˜¯æ¯”è¾ƒå’Œè°çš„ã€‚</p>
<p>ä¸‹é¢æ˜¯æ˜Ÿçƒé‡Œä¸€ä½åœ¨ç¾å›¢å®ä¹ å¹¶è½¬æ­£çš„çƒå‹å¯¹ç¾å›¢çš„ä¸€äº›æ„Ÿå—ï¼š</p>
<blockquote>
<p>åˆšè¿›å…¥ç¾å›¢å®ä¹ æ—¶ï¼Œæˆ‘å¯¹ç¾å›¢çš„å®Œå–„çš„åŸºç ”ä½“ç³»æ„Ÿåˆ°éœ‡æƒŠï¼ˆç›¸è¾ƒäºå­¦æ ¡è€Œè¨€ï¼‰ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç°æˆçš„è§£å†³æ–¹æ¡ˆï¼Œè€Œä¸éœ€è¦é‡å¤é€ è½®å­ã€‚æ­¤å¤–ï¼Œç¾å›¢è¿˜æœ‰å®Œå–„çš„å†…éƒ¨æ–‡æ¡£ç³»ç»Ÿï¼Œå¤§å®¶éƒ½å†™å¾—å¾ˆå¥½ï¼ˆè¿™ç‚¹è®©æˆ‘æœ‰ç‚¹å·ï¼‰ã€‚åœ¨å®ä¹ çš„ä¸‰ä¸ªæœˆé‡Œï¼Œæˆ‘ä¹Ÿç»å†äº†ä¸€äº›å›°éš¾å’Œå‹åŠ›ï¼Œä½†æ˜¯æˆ‘æ„è¯†åˆ°æ‰“å·¥å°±æ˜¯è¿™æ ·ï¼Œä¸ç®¡å»å“ªé‡Œéƒ½æ˜¯ä¸€æ ·çš„ã€‚åœ¨å®ä¹ æœŸé—´ï¼Œæˆ‘æ›´å¤šåœ°å­¦ä¹ äº†ä¸€äº›æ€ç»´æ–¹å¼ï¼Œåšä¿¡åªè¦æˆ‘ä¸ä¼šçš„ä¸œè¥¿ï¼Œæˆ‘å°±å¯ä»¥å­¦ä¼šã€‚æ¯å¤©éƒ½å–å¾—ä¸€ç‚¹è¿›æ­¥ï¼Œä¿æŒå‰è¿›ã€‚</p>
</blockquote>
<p>ä»Šå¹´ç§‹æ‹›ä¹Ÿæœ‰ä¸å°‘çƒå‹è¿›äº†ç¾å›¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11ec095ca4e1489bbe931de9f663550e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=W9FDgNEk4YNIhT4ovfSYJZLXRjQ%3D" alt="" loading="lazy"/></p>
<p>ç¾å›¢çš„é¢è¯•éš¾åº¦è¿˜æ˜¯ç›¸å¯¹åé«˜ä¸€ç‚¹çš„ï¼ŒæŠ€æœ¯ä¸€é¢å’ŒäºŒé¢å¯èƒ½åŠ èµ·æ¥èƒ½æ‹·æ‰“ä½ ä¸¤ä¸ªå¤šå°æ—¶ã€‚</p>
<p>ä¸‹é¢ç»™å¤§å®¶åˆ†äº«ä¸€ç¯‡ç¾å›¢ä»Šå¹´ç§‹æ‹›çš„åç«¯é¢ç»ã€‚æˆ‘ç²¾é€‰äº†ä¸€äºŒé¢ä¸­çš„ä¸€äº›æ¯”è¾ƒå…¸å‹çš„é¢è¯•é—®é¢˜è¿›è¡Œè§£ç­”ï¼Œ å¤§å®¶å¯ä»¥æ„Ÿå—ä¸€ä¸‹ç¾å›¢çš„é¢è¯•éš¾åº¦å¦‚ä½•ã€‚</p>
<h2 data-id="heading-0">æ‹·æ‰“é¡¹ç›®</h2>
<p>é¢è¯•å¯¹ç€é¡¹ç›®æé—®æ¶æ„è®¾è®¡ä»¥åŠä¸€äº›åŠŸèƒ½çš„å¼€å‘æ€è·¯ã€‚</p>
<p>è¿™é‡Œè®°å½•ä¸€äº›æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„é¡¹ç›®æ‹·æ‰“é—®é¢˜ï¼Œæ¶‰åŠå¤ªé¡¹ç›®ç»†èŠ‚çš„éƒ¨åˆ†å°±çœç•¥äº†ã€‚</p>
<h3 data-id="heading-1">ä½ ä¸ºä»€ä¹ˆé€‰æ‹© JWT åšèº«ä»½éªŒè¯ï¼Ÿ</h3>
<p>ç›¸æ¯”äº Session è®¤è¯çš„æ–¹å¼æ¥è¯´ï¼Œä½¿ç”¨ JWT è¿›è¡Œèº«ä»½è®¤è¯ä¸»è¦æœ‰ä¸‹é¢ 4 ä¸ªä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>æ— çŠ¶æ€</strong>ï¼šJWT è‡ªèº«åŒ…å«äº†èº«ä»½éªŒè¯æ‰€éœ€è¦çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬çš„æœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ Session ä¿¡æ¯ã€‚è¿™æ˜¾ç„¶å¢åŠ äº†ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œä¼¸ç¼©æ€§ï¼Œå¤§å¤§å‡è½»äº†æœåŠ¡ç«¯çš„å‹åŠ›ã€‚ä¸è¿‡ï¼Œä¹Ÿæ­£æ˜¯ç”±äº JWT çš„æ— çŠ¶æ€ï¼Œä¹Ÿå¯¼è‡´äº†å®ƒæœ€å¤§çš„ç¼ºç‚¹ï¼š<strong>ä¸å¯æ§ï¼</strong></li>
<li><strong>æœ‰æ•ˆé¿å…äº† CSRF æ”»å‡»</strong>ï¼šä½¿ç”¨ JWT è¿›è¡Œèº«ä»½éªŒè¯ä¸éœ€è¦ä¾èµ– Cookie ï¼Œå› æ­¤å¯ä»¥é¿å… CSRF æ”»å‡»ã€‚</li>
<li><strong>é€‚åˆç§»åŠ¨ç«¯åº”ç”¨</strong>ï¼šä½¿ç”¨ Session è¿›è¡Œèº«ä»½è®¤è¯çš„è¯ï¼Œéœ€è¦ä¿å­˜ä¸€ä»½ä¿¡æ¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œä¸”è¿™ç§æ–¹å¼ä¼šä¾èµ–åˆ° Cookieï¼ˆéœ€è¦ Cookie ä¿å­˜ <code>SessionId</code>ï¼‰ï¼Œæ‰€ä»¥ä¸é€‚åˆç§»åŠ¨ç«¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è¿›è¡Œèº«ä»½è®¤è¯å°±ä¸ä¼šå­˜åœ¨è¿™ç§é—®é¢˜ï¼Œå› ä¸ºåªè¦ JWT å¯ä»¥è¢«å®¢æˆ·ç«¯å­˜å‚¨å°±èƒ½å¤Ÿä½¿ç”¨ï¼Œè€Œä¸” JWT è¿˜å¯ä»¥è·¨è¯­è¨€ä½¿ç”¨ã€‚</li>
<li><strong>å•ç‚¹ç™»å½•å‹å¥½</strong>ï¼šä½¿ç”¨ Session è¿›è¡Œèº«ä»½è®¤è¯çš„è¯ï¼Œå®ç°å•ç‚¹ç™»å½•ï¼Œéœ€è¦æˆ‘ä»¬æŠŠç”¨æˆ·çš„ Session ä¿¡æ¯ä¿å­˜åœ¨ä¸€å°ç”µè„‘ä¸Šï¼Œå¹¶ä¸”è¿˜ä¼šé‡åˆ°å¸¸è§çš„ Cookie è·¨åŸŸçš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è¿›è¡Œè®¤è¯çš„è¯ï¼Œ JWT è¢«ä¿å­˜åœ¨å®¢æˆ·ç«¯ï¼Œä¸ä¼šå­˜åœ¨è¿™äº›é—®é¢˜ã€‚</li>
</ol>
<p>ä½† JWT å¹¶ä¸æ˜¯é“¶å¼¹ï¼Œä¾ç„¶å­˜åœ¨å¾ˆå¤šé—®é¢˜éœ€è¦è§£å†³ï¼Œä¾‹å¦‚ï¼š</p>
<ol>
<li><strong>æ³¨é”€ç™»å½•ç­‰åœºæ™¯ä¸‹ JWT è¿˜æœ‰æ•ˆ</strong>ï¼šè¿™ä¸ªé—®é¢˜ä¸å­˜åœ¨äº Session è®¤è¯æ–¹å¼ä¸­ï¼Œå› ä¸ºåœ¨ Session è®¤è¯æ–¹å¼ä¸­ï¼Œé‡åˆ°è¿™ç§æƒ…å†µçš„è¯æœåŠ¡ç«¯åˆ é™¤å¯¹åº”çš„ Session è®°å½•å³å¯ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ JWT è®¤è¯çš„æ–¹å¼å°±ä¸å¥½è§£å†³äº†ã€‚æˆ‘ä»¬ä¹Ÿè¯´è¿‡äº†ï¼ŒJWT ä¸€æ—¦æ´¾å‘å‡ºå»ï¼Œå¦‚æœåç«¯ä¸å¢åŠ å…¶ä»–é€»è¾‘çš„è¯ï¼Œå®ƒåœ¨å¤±æ•ˆä¹‹å‰éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚</li>
<li><strong>ç»­ç­¾é—®é¢˜</strong>ï¼šJWT é€šå¸¸æœ‰ä¸€ä¸ªæœ‰æ•ˆæœŸï¼ˆ<code>exp</code> å­—æ®µï¼‰ï¼Œå½“ä»¤ç‰Œè¿‡æœŸæ—¶ï¼Œç”¨æˆ·éœ€è¦é‡æ–°ç™»å½•æˆ–è·å–ä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ç»­ç­¾ï¼ˆrefreshï¼‰é—®é¢˜ã€‚</li>
<li><strong>JWT ä½“ç§¯å¤ªå¤§</strong>ï¼šJWT ç»“æ„å¤æ‚ï¼ˆHeaderã€Payload å’Œ Signatureï¼‰ï¼ŒåŒ…å«äº†æ›´å¤šé¢å¤–çš„ä¿¡æ¯ï¼Œè¿˜éœ€è¦è¿›è¡Œ Base64Url ç¼–ç ï¼Œè¿™ä¼šä½¿å¾— JWT ä½“ç§¯è¾ƒå¤§ï¼Œå¢åŠ äº†ç½‘ç»œä¼ è¾“çš„å¼€é”€ã€‚</li>
</ol>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œä¸ç”¨ JWT ç›´æ¥ä½¿ç”¨æ™®é€šçš„ Token(éšæœºç”Ÿæˆçš„ IDï¼Œä¸åŒ…å«å…·ä½“çš„ä¿¡æ¯) ç»“åˆ Redis æ¥åšèº«ä»½è®¤è¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¼ ç»Ÿçš„ Token é€šå¸¸åªæ˜¯ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯¹åº”çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚ç”¨æˆ· IDã€Token è¿‡æœŸæ—¶é—´ã€æƒé™ä¿¡æ¯ï¼‰å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œé€šå¸¸ä¼šé€šè¿‡ Redis ä¿å­˜ã€‚ä¼ ç»Ÿ Token ä½“ç§¯æ›´å°ï¼Œä¹Ÿæ›´å®¹æ˜“è§£å†³ JWT å­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚</p>
<p>å…³äº JWT çš„è¯¦ç»†ä»‹ç»ä»¥åŠå¸¸è§é—®é¢˜çš„è§£å†³å¯ä»¥é˜…è¯»æˆ‘å†™çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fsecurity%2Fjwt-intro.html" target="_blank" title="https://javaguide.cn/system-design/security/jwt-intro.html" ref="nofollow noopener noreferrer">JWT åŸºç¡€æ¦‚å¿µè¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fsecurity%2Fadvantages-and-disadvantages-of-jwt.html" target="_blank" title="https://javaguide.cn/system-design/security/advantages-and-disadvantages-of-jwt.html" ref="nofollow noopener noreferrer">JWT èº«ä»½è®¤è¯ä¼˜ç¼ºç‚¹åˆ†æ</a></li>
</ul>
<h3 data-id="heading-2">æ•æ„Ÿè¯è„±æ•å¦‚ä½•å®ç°çš„ï¼Ÿ</h3>
<p>åç«¯è¿”å›æ•°æ®ç»™å‰ç«¯çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦å¯¹æ•æ„Ÿè¯è„±æ•ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1aa14b01e5a248659b9aa1df73610a24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=xb4PvQUciKIkHApPuXYl%2BNnzn9o%3D" alt="" loading="lazy"/></p>
<p>è„±æ•çš„è§„åˆ™æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>æ›¿æ¢(å¸¸ç”¨)ï¼šå°†æ•æ„Ÿæ•°æ®ä¸­çš„ç‰¹å®šå­—ç¬¦æˆ–å­—ç¬¦åºåˆ—æ›¿æ¢ä¸ºå…¶ä»–å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œå°†ä¿¡ç”¨å¡å·ä¸­çš„ä¸­é—´å‡ ä½æ•°å­—æ›¿æ¢ä¸ºæ˜Ÿå·ï¼ˆ*ï¼‰æˆ–å…¶ä»–å­—ç¬¦ã€‚</li>
<li>åˆ é™¤ï¼šå°†æ•æ„Ÿæ•°æ®ä¸­çš„éƒ¨åˆ†å†…å®¹éšæœºåˆ é™¤ã€‚ä¾‹å¦‚ï¼Œå°†ç”µè¯å·ç çš„éšæœº 3 ä½æ•°å­—è¿›è¡Œåˆ é™¤ã€‚</li>
<li>é‡æ’ï¼šå°†åŸå§‹æ•°æ®ä¸­çš„æŸäº›å­—ç¬¦æˆ–å­—æ®µçš„é¡ºåºæ‰“ä¹±ã€‚ä¾‹å¦‚ï¼Œå°†èº«ä»½è¯å·ç çš„éšæœºä½äº¤é”™äº’æ¢ã€‚</li>
<li>åŠ å™ªï¼šåœ¨æ•°æ®ä¸­æ³¨å…¥ä¸€äº›è¯¯å·®æˆ–è€…å™ªéŸ³ï¼Œè¾¾åˆ°å¯¹æ•°æ®è„±æ•çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼Œåœ¨æ•æ„Ÿæ•°æ®ä¸­æ·»åŠ ä¸€äº›éšæœºç”Ÿæˆçš„å­—ç¬¦ã€‚</li>
<li>......</li>
</ul>
<p>è¿™é‡Œä»¥æœ€å¸¸ç”¨çš„æ›¿æ¢ä¸ºä¾‹è¿›è¡Œä»‹ç»ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘çš„é¡¹ç›®ç”¨åˆ°çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘æ˜¯åˆ©ç”¨ Hutool æä¾›çš„ <code>DesensitizedUtil</code>è„±æ•å·¥å…·ç±»é…åˆ Jackson é€šè¿‡æ³¨è§£çš„æ–¹å¼å®Œæˆæ•°æ®è„±æ•çš„ã€‚</p>
<p>å¦‚æœä¸æƒ³å¼•å…¥ Hutool çš„è¯ï¼Œä¹Ÿå¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªè„±æ•å·¥å…·ç±»ï¼Œå®ç°é€»è¾‘éå¸¸ç®€å•ã€‚</p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥çœ‹ç¬”è€…å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FvVhB8uJBz4WMlOZHJ2Zbog" target="_blank" title="https://mp.weixin.qq.com/s/vVhB8uJBz4WMlOZHJ2Zbog" ref="nofollow noopener noreferrer">ä½ çš„é¡¹ç›®æ•æ„Ÿè¯è„±æ•æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</a> ã€‚</p>
<h3 data-id="heading-3">è®²ä¸€ä¸‹ MySQL åŒæ­¥ ES çš„å®ç°</h3>
<p>ä½¿ç”¨ Canal å¯ä»¥åšåˆ°ä¸šåŠ¡ä»£ç å®Œå…¨è§£è€¦ï¼ŒAPI å®Œå…¨è§£è€¦ï¼Œé›¶ä»£ç å®ç°å‡†å®æ—¶åŒæ­¥, Canal é€šè¿‡è§£æ MySQL çš„ binlog æ—¥å¿—æ–‡ä»¶è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</p>
<p>Canal çš„åŸç†æœ¬è´¨ä¸Šæ˜¯ <strong>æ¨¡æ‹Ÿäº† MySQL çš„ä¸»ä»å¤åˆ¶åè®®</strong> ï¼š</p>
<ol>
<li><strong>ä¼ªè£…æˆä»åº“ (Slave)ï¼š</strong> Canal Server ä¼šå‘ MySQL Master å‘é€å’Œæ ‡å‡† MySQL Slave å®Œå…¨ä¸€æ ·çš„æ¡æ‰‹åŒ…ï¼Œå°†è‡ªå·±ä¼ªè£…æˆä¸€ä¸ªä»åº“ã€‚</li>
<li><strong>è®¢é˜… Binlogï¼š</strong> MySQL Master éªŒè¯é€šè¿‡åï¼Œå°±ä¼šæŠŠå®ƒå½“æˆä¸€ä¸ªçœŸæ­£çš„ä»åº“ã€‚ä» Canal æŒ‡å®šçš„ä½ç‚¹ï¼ˆPosition æˆ– GTIDï¼‰å¼€å§‹ï¼ŒæŒç»­åœ°ã€æµå¼åœ°æŠŠäºŒè¿›åˆ¶æ—¥å¿—ï¼ˆBinlogï¼‰æ¨é€ç»™ Canalã€‚Binlog è®°å½•äº†æ•°æ®åº“ä¸­æ‰€æœ‰çš„æ•°æ®å˜æ›´æ“ä½œï¼ˆINSERT, UPDATE, DELETEï¼‰ã€‚</li>
<li><strong>è§£æä¸æŠ•é€’ï¼š</strong> Canal æ¥æ”¶åˆ°è¿™äº›åŸå§‹çš„äºŒè¿›åˆ¶æ—¥å¿—æµåï¼Œä¼šåœ¨å†…éƒ¨è¿›è¡Œè§£æï¼Œå°†å®ƒä»¬è½¬æ¢æˆç»“æ„åŒ–çš„ã€æ˜“äºæ¶ˆè´¹çš„æ•°æ®æ ¼å¼ï¼ˆæ¯”å¦‚ JSONï¼‰ã€‚æœ€åï¼Œå†å°†è¿™äº›ç»“æ„åŒ–çš„å˜æ›´äº‹ä»¶æŠ•é€’å‡ºå»ï¼Œé€šå¸¸æ˜¯æŠ•é€’åˆ°åƒ Kafka æˆ– RocketMQ è¿™æ ·çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œç”±ä¸‹æ¸¸çš„æ¶ˆè´¹ç¨‹åºï¼ˆæ¯”å¦‚æˆ‘ä»¬çš„åŒæ­¥æœåŠ¡ï¼‰è®¢é˜…å¹¶å†™å…¥åˆ° Elasticsearchã€‚</li>
</ol>
<p>ä¸è¿‡ï¼ŒCanal ä»…ä»…æ”¯æŒå¢é‡åŒæ­¥ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥å€ŸåŠ©å…¨é‡å¯¼å…¥å·¥å…·å®ç°å…¨é‡åŒæ­¥ï¼Œä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FDataX" target="_blank" title="https://github.com/alibaba/DataX" ref="nofollow noopener noreferrer">Datax</a> ï¼Œåç»­å†é€šè¿‡ Canal å®ç°å¢é‡åŒæ­¥ï¼Œç›¸å¯¹æ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p>ä¸ºäº†è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿæ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥æ¶ˆæ¯é˜Ÿåˆ— (MQ) ä½œä¸ºä¸­é—´å±‚ï¼Œè§£è€¦ Canal å’Œ Elasticsearchï¼Œ</p>
<p>å¼•å…¥ MQ çš„ä¼˜åŠ¿:</p>
<ul>
<li><strong>å¼‚æ­¥å¤„ç†:</strong> Canal å°†æ•°æ®å˜æ›´æ¶ˆæ¯å‘é€åˆ° MQ åï¼Œæ— éœ€ç­‰å¾… ES å¤„ç†å®Œæˆå³å¯è¿”å›ï¼Œæé«˜ Canal çš„ååé‡ã€‚</li>
<li><strong>æµé‡æ§åˆ¶:</strong> MQ ä½œä¸ºç¼“å†²åŒºï¼Œå¯ä»¥å‰Šå³°å¡«è°·ï¼Œé¿å… Elasticsearch ç¬æ—¶å†™å…¥å‹åŠ›è¿‡å¤§ã€‚</li>
<li><strong>æ•°æ®å¤„ç†:</strong> å¯ä»¥åœ¨æ¶ˆè´¹ MQ æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­è¿›è¡Œæ•°æ®æ¸…æ´—ã€è½¬æ¢ç­‰æ“ä½œï¼Œä¾‹å¦‚æ•°æ®æ ¼å¼åŒ–ã€å­—æ®µæ˜ å°„ç­‰ã€‚</li>
<li><strong>ç³»ç»Ÿè§£è€¦:</strong> Canal å’Œ Elasticsearch ä¹‹é—´ä¸å†ç›´æ¥ä¾èµ–ï¼Œæé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<p>å¼•å…¥ MQ åï¼ŒMySQL æ•°æ®åŒæ­¥åˆ° Elasticsearch çš„æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4374febf287491da7a99c3d9fea60fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=9IjbF4vEorQyUbGKA9owS42guGU%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>ç›‘å¬è§£æ:</strong> Canal è¯»å– binlogï¼Œè§£æå˜æ›´äº‹ä»¶ã€‚</li>
<li><strong>å‘é€æ¶ˆæ¯:</strong> Canal å°†äº‹ä»¶å°è£…æˆæ¶ˆæ¯å‘é€åˆ° MQã€‚</li>
<li><strong>æ¶ˆè´¹æ¶ˆæ¯:</strong> æ¶ˆè´¹ç«¯ç›‘å¬ MQï¼Œè·å–å˜æ›´æ¶ˆæ¯ã€‚</li>
<li><strong>åŒæ­¥æ•°æ®:</strong> æ¶ˆè´¹ç«¯å¤„ç†æ¶ˆæ¯ï¼Œæ›´æ–° Elasticsearch ç´¢å¼•ã€‚</li>
</ol>
<p>Canal ä» 1.1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œé»˜è®¤æ”¯æŒå°†æ¥æ”¶åˆ°çš„ binlog æ•°æ®ç›´æ¥æŠ•é€’åˆ° MQï¼Œç®€åŒ–äº†é›†æˆæµç¨‹ã€‚ ä½ åªéœ€è¦é…ç½® Canal è¿æ¥ MQ çš„ç›¸å…³ä¿¡æ¯ï¼Œå³å¯å®ç° Canal ä¸ MQ çš„è”åŠ¨ã€‚</p>
<h3 data-id="heading-4">é¡¹ç›®ä¸­ç”¨äº†å“ªäº›å¤šçº¿ç¨‹çš„çŸ¥è¯†</h3>
<p>åœ¨æˆ‘ä»¬çš„è®¢å•ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·ä¸‹å•æˆåŠŸåï¼Œç³»ç»Ÿéœ€è¦æ‰§è¡Œä¸€ç³»åˆ—éæ ¸å¿ƒçš„åç»­æ“ä½œï¼Œæ¯”å¦‚ï¼šå‘é€ä¸‹å•æˆåŠŸçŸ­ä¿¡ã€ä¸ºç”¨æˆ·å¢åŠ ç§¯åˆ†ã€é€šçŸ¥ç‰©æµç³»ç»Ÿå¤‡è´§ã€‚è¿™äº›æ“ä½œéƒ½æ¯”è¾ƒè€—æ—¶ï¼Œå¦‚æœè®©ç”¨æˆ·åœ¨ä¸‹å•æ¥å£é‡ŒåŒæ­¥ç­‰å¾…å®ƒä»¬å…¨éƒ¨å®Œæˆï¼Œä¼šå¯¼è‡´æ¥å£å“åº”æ—¶é—´å˜å¾—å¾ˆé•¿ï¼Œä½“éªŒå¾ˆå·®ã€‚</p>
<p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œ å°†è¿™äº›éæ ¸å¿ƒæ“ä½œå…¨éƒ¨æŠ½å–æˆç‹¬ç«‹çš„ Service æ–¹æ³•ï¼Œå¹¶ç”¨ <code>@Async</code> æ³¨è§£æ ‡è®°ï¼Œå°†å®ƒä»¬å¼‚æ­¥åŒ–ã€‚è¿™æ ·ï¼Œä¸»ä¸‹å•æµç¨‹å¯ä»¥è¿…é€Ÿå®Œæˆå¹¶å‘ç”¨æˆ·è¿”å›æˆåŠŸï¼Œè€Œè¿™äº›è€—æ—¶æ“ä½œåˆ™è¢«æäº¤åˆ°åå°çº¿ç¨‹æ± ä¸­æ…¢æ…¢æ‰§è¡Œï¼Œæå¤§åœ°ä¼˜åŒ–äº†ä¸»æµç¨‹çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</p>
<p><code>@Async</code> æ³¨è§£ç”± Spring æ¡†æ¶æä¾›ï¼Œè¢«è¯¥æ³¨è§£æ ‡æ³¨çš„ç±»æˆ–æ–¹æ³•ä¼šåœ¨ <strong>å¼‚æ­¥çº¿ç¨‹</strong> ä¸­æ‰§è¡Œã€‚è¿™æ„å‘³ç€å½“æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…å°†ä¸ä¼šç­‰å¾…è¯¥æ–¹æ³•æ‰§è¡Œå®Œæˆï¼Œè€Œæ˜¯å¯ä»¥ç»§ç»­æ‰§è¡Œåç»­çš„ä»£ç ã€‚</p>
<p><code>@Async</code> æ³¨è§£çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œéœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ <code>@EnableAsync</code> ï¼Œå¼€å¯å¼‚æ­¥ä»»åŠ¡ã€‚</li>
<li>åœ¨éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„æ–¹æ³•æˆ–ç±»ä¸Šæ·»åŠ æ³¨è§£ <code>@Async</code> ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-comment">// å¼€å¯å¼‚æ­¥ä»»åŠ¡</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YourApplication</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        SpringApplication.run(YourApplication.class, args);
    }
}

<span class="hljs-comment">// å¼‚æ­¥æœåŠ¡ç±»</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> {

    <span class="hljs-comment">// æ¨èä½¿ç”¨è‡ªå®šä¹‰çº¿ç¨‹æ± ï¼Œè¿™é‡Œåªæ˜¯æ¼”ç¤ºåŸºæœ¬ç”¨æ³•</span>
    <span class="hljs-meta">@Async</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;String&gt; <span class="hljs-title function_">doSomethingAsync</span><span class="hljs-params">()</span> {

        <span class="hljs-comment">// è¿™é‡Œä¼šæœ‰ä¸€äº›ä¸šåŠ¡è€—æ—¶æ“ä½œ</span>
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// ä½¿ç”¨ CompletableFuture å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤„ç†å¼‚æ­¥ä»»åŠ¡çš„ç»“æœï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</span>
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(<span class="hljs-string">"Async Task Completed"</span>);
    }

}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨ @Async æ³¨è§£å®ç°å¼‚æ­¥æœ‰ä»€ä¹ˆéœ€è¦æ³¨æ„çš„å—ï¼Ÿæ‰§è¡Œå‡ºç°å¼‚å¸¸æ€ä¹ˆåŠï¼Ÿ</h3>
<p>å¦‚æœæ²¡æœ‰æ˜¾å¼åœ°é…ç½®çº¿ç¨‹æ± ï¼Œåœ¨ <code>@Async</code> åº•å±‚ä¼šå…ˆåœ¨ <code>BeanFactory</code> ä¸­å°è¯•è·å–çº¿ç¨‹æ± ï¼Œå¦‚æœè·å–ä¸åˆ°ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ª <code>SimpleAsyncTaskExecutor</code> å®ç°ã€‚<code>SimpleAsyncTaskExecutor</code> æœ¬è´¨ä¸Šä¸ç®—æ˜¯ä¸€ä¸ªçœŸæ­£çš„çº¿ç¨‹æ± ï¼Œå› ä¸ºå®ƒå¯¹äºæ¯ä¸ªè¯·æ±‚éƒ½ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹è€Œä¸é‡ç”¨ç°æœ‰çº¿ç¨‹ï¼Œè¿™ä¼šå¸¦æ¥ä¸€äº›æ½œåœ¨çš„é—®é¢˜ï¼Œä¾‹å¦‚èµ„æºæ¶ˆè€—è¿‡å¤§ã€‚</p>
<p>ä¸€å®šè¦æ˜¾å¼é…ç½®ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œæ¨è<code>ThreadPoolTaskExecutor</code>ã€‚å¹¶ä¸”ï¼Œè¿˜å¯ä»¥æ ¹æ®ä»»åŠ¡çš„æ€§è´¨å’Œéœ€æ±‚ï¼Œä¸ºä¸åŒçš„å¼‚æ­¥æ–¹æ³•æŒ‡å®šä¸åŒçš„çº¿ç¨‹æ± ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> {

    <span class="hljs-meta">@Bean(name = "executor1")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">executor1</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">3</span>);
        executor.setMaxPoolSize(<span class="hljs-number">5</span>);
        executor.setQueueCapacity(<span class="hljs-number">50</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"AsyncExecutor1-"</span>);
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }

    <span class="hljs-meta">@Bean(name = "executor2")</span>
    <span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">executor2</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        executor.setCorePoolSize(<span class="hljs-number">2</span>);
        executor.setMaxPoolSize(<span class="hljs-number">4</span>);
        executor.setQueueCapacity(<span class="hljs-number">100</span>);
        executor.setThreadNamePrefix(<span class="hljs-string">"AsyncExecutor2-"</span>);
        executor.initialize();
        <span class="hljs-keyword">return</span> executor;
    }
}
</code></pre>
<p>å¼‚æ­¥æ–¹æ³•ä¸­æŠ›å‡ºçš„å¼‚å¸¸é»˜è®¤ä¸ä¼šè¢«è°ƒç”¨è€…æ•è·ã€‚ä¸ºäº†ç®¡ç†è¿™äº›å¼‚å¸¸ï¼Œå»ºè®®ä½¿ç”¨<code>CompletableFuture</code>çš„å¼‚å¸¸å¤„ç†åŠŸèƒ½ï¼Œæˆ–è€…é…ç½®ä¸€ä¸ªå…¨å±€çš„<code>AsyncUncaughtExceptionHandler</code>æ¥å¤„ç†æ²¡æœ‰æ­£ç¡®æ•è·çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AsyncConfigurer</span>{

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> AsyncUncaughtExceptionHandler <span class="hljs-title function_">getAsyncUncaughtExceptionHandler</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomAsyncExceptionHandler</span>();
    }

}

<span class="hljs-comment">// è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomAsyncExceptionHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AsyncUncaughtExceptionHandler</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleUncaughtException</span><span class="hljs-params">(Throwable ex, Method method, Object... params)</span> {
        <span class="hljs-comment">// æ—¥å¿—è®°å½•æˆ–å…¶ä»–å¤„ç†é€»è¾‘</span>
    }
}
</code></pre>
<p>JavaGuide ç½‘ç«™å¯¹è¿™å—å†…å®¹æœ‰è¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fsystem-design%2Fframework%2Fspring%2Fasync.html" target="_blank" title="https://javaguide.cn/system-design/framework/spring/async.html" ref="nofollow noopener noreferrer">Async æ³¨è§£åŸç†åˆ†æ</a>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8a95788770049708b27f5823fcb8899~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=PspGW8DNLpTpN3W7rfgRpao9Bvc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">æ€ä¹ˆä½¿ç”¨ Arthas æ’æŸ¥é—®é¢˜çš„ï¼Ÿ</h3>
<p>å¯ä»¥å‚è€ƒç¬”è€…åˆ†äº«çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fgi5IovECxwpX3v6OcMbQxA" target="_blank" title="https://mp.weixin.qq.com/s/gi5IovECxwpX3v6OcMbQxA" ref="nofollow noopener noreferrer">è‡ªä»å­¦ä¼š Arthasï¼Œæ—¥å¸¸å¼€å‘æ•ˆç‡ç›´æ¥èµ·é£ï¼</a>ã€‚</p>
<h3 data-id="heading-7">é¡¹ç›®ä¸­ Jmeter å‹æµ‹æ˜¯æ€ä¹ˆåšçš„</h3>
<p>åš JMeter å‹æµ‹ï¼Œä¸»è¦éµå¾ªå››æ­¥æµç¨‹ï¼š</p>
<ol>
<li><strong>è§„åˆ’</strong>ï¼šä¼šå…ˆå®šå¥½æ˜ç¡®çš„æ€§èƒ½ç›®æ ‡ï¼Œæ¯”å¦‚ QPS è¦è¾¾åˆ°å¤šå°‘ï¼Œå“åº”æ—¶é—´è¦ä½äºå¤šå°‘ã€‚</li>
<li><strong>å‡†å¤‡è„šæœ¬</strong>ï¼šç”¨ JMeter å†™å¥½è¯·æ±‚è„šæœ¬ï¼Œå¹¶ä¸”å¯¹ç”¨æˆ· IDã€å•†å“ ID è¿™äº›å˜é‡è¿›è¡Œå‚æ•°åŒ–ï¼Œè®©è¯·æ±‚æ›´çœŸå®ã€‚</li>
<li><strong>æ‰§è¡Œå’Œç›‘æ§</strong> ï¼šåœ¨ç”¨ JMeter åŠ å‹çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šé‡ç‚¹ç›‘æ§æœåŠ¡å™¨çš„ CPUã€å†…å­˜ã€GC ç­‰æŒ‡æ ‡ã€‚å› ä¸ºçœŸæ­£çš„ç“¶é¢ˆä¿¡æ¯åœ¨æœåŠ¡å™¨ç«¯ï¼Œè€Œä¸æ˜¯åœ¨ JMeter çš„æŠ¥å‘Šé‡Œã€‚</li>
<li><strong>åˆ†æå’Œè°ƒä¼˜</strong> ï¼š å‹æµ‹ç»“æŸåï¼Œæˆ‘ä»¬ä¼šæ ¹æ®ç›‘æ§æ•°æ®å’ŒæŠ¥å‘Šæ¥åˆ†æç“¶é¢ˆã€‚æ¯”å¦‚ï¼Œå¦‚æœæ˜¯ CPU é«˜äº†ï¼Œæˆ‘ä»¬å°±ç”¨ Arthas å»çœ‹çƒ­ç‚¹ä»£ç ï¼›å¦‚æœæ˜¯æ•°æ®åº“æ…¢äº†ï¼Œå°±å»ä¼˜åŒ– SQLã€‚ä¼˜åŒ–å®Œå†å‹ä¸€è½®ï¼Œç›´åˆ°è¾¾åˆ°ç›®æ ‡ä¸ºæ­¢ã€‚</li>
</ol>
<h2 data-id="heading-8">MySQL</h2>
<h3 data-id="heading-9">MySQL å­˜å‚¨å¼•æ“çŸ¥é“å“ªäº›ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«?</h3>
<p>MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œä½ å¯ä»¥é€šè¿‡ <code>SHOW ENGINES</code> å‘½ä»¤æ¥æŸ¥çœ‹ MySQL æ”¯æŒçš„æ‰€æœ‰å­˜å‚¨å¼•æ“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4370a86ad04844c0ac3ce0a63954d618~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=NFNWBdJctv97kb5ntAfJKwcXrRw%3D" alt="æŸ¥çœ‹ MySQL æä¾›çš„æ‰€æœ‰å­˜å‚¨å¼•æ“" loading="lazy"/></p>
<p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å‡ºï¼Œ MySQL å½“å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“æ˜¯ InnoDBã€‚å¹¶ä¸”ï¼Œæ‰€æœ‰çš„å­˜å‚¨å¼•æ“ä¸­åªæœ‰ InnoDB æ˜¯äº‹åŠ¡æ€§å­˜å‚¨å¼•æ“ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ InnoDB æ”¯æŒäº‹åŠ¡ã€‚</p>
<p>æˆ‘è¿™é‡Œä½¿ç”¨çš„ MySQL ç‰ˆæœ¬æ˜¯ 8.xï¼Œä¸åŒçš„ MySQL ç‰ˆæœ¬ä¹‹é—´å¯èƒ½ä¼šæœ‰å·®åˆ«ã€‚</p>
<p>MySQL 5.5.5 ä¹‹å‰ï¼ŒMyISAM æ˜¯ MySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚5.5.5 ç‰ˆæœ¬ä¹‹åï¼ŒInnoDB æ˜¯ MySQL çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ <code>SELECT VERSION()</code> å‘½ä»¤æŸ¥çœ‹ä½ çš„ MySQL ç‰ˆæœ¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql&gt; SELECT VERSION();
+-----------+
| VERSION() |
+-----------+
| 8.0.27    |
+-----------+
1 row <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥é€šè¿‡ <code>SHOW VARIABLES LIKE '%storage_engine%'</code> å‘½ä»¤ç›´æ¥æŸ¥çœ‹ MySQL å½“å‰é»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">mysql&gt; SHOW VARIABLES  LIKE <span class="hljs-string">'%storage_engine%'</span>;
+---------------------------------+-----------+
| Variable_name                   | Value     |
+---------------------------------+-----------+
| default_storage_engine          | InnoDB    |
| default_tmp_storage_engine      | InnoDB    |
| disabled_storage_engines        |           |
| internal_tmp_mem_storage_engine | TempTable |
+---------------------------------+-----------+
4 rows <span class="hljs-keyword">in</span> <span class="hljs-built_in">set</span> (0.00 sec)
</code></pre>
<p>å…³äº MyISAM å’Œ InnoDB çš„å¯¹æ¯”å†…å®¹è¾ƒå¤šï¼Œå¯ä»¥å‚è€ƒç¬”è€…å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-questions-01.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-questions-01.html" ref="nofollow noopener noreferrer">MySQL å¸¸è§é¢è¯•é¢˜æ€»ç»“</a>ï¼ˆMySQL åŸºç¡€ã€å­˜å‚¨å¼•æ“ã€äº‹åŠ¡ã€ç´¢å¼•ã€é”ã€æ€§èƒ½ä¼˜åŒ–ç­‰ï¼‰ã€‚</p>
<p>æ›´å¤š MySQL é«˜é¢‘çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-index.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-index.html" ref="nofollow noopener noreferrer">MySQL ç´¢å¼•è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fmysql-logs.html" target="_blank" title="https://javaguide.cn/database/mysql/mysql-logs.html" ref="nofollow noopener noreferrer">MySQL ä¸‰å¤§æ—¥å¿—(binlogã€redo log å’Œ undo log)è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Ftransaction-isolation-level.html" target="_blank" title="https://javaguide.cn/database/mysql/transaction-isolation-level.html" ref="nofollow noopener noreferrer">MySQL äº‹åŠ¡éš”ç¦»çº§åˆ«è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Finnodb-implementation-of-mvcc.html" target="_blank" title="https://javaguide.cn/database/mysql/innodb-implementation-of-mvcc.html" ref="nofollow noopener noreferrer">InnoDB å­˜å‚¨å¼•æ“å¯¹ MVCC çš„å®ç°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Fhow-sql-executed-in-mysql.html" target="_blank" title="https://javaguide.cn/database/mysql/how-sql-executed-in-mysql.html" ref="nofollow noopener noreferrer">SQL è¯­å¥åœ¨ MySQL ä¸­çš„æ‰§è¡Œè¿‡ç¨‹</a></li>
</ul>
<h3 data-id="heading-10">SELECT * ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆå—ï¼Ÿ</h3>
<p><code>SELECT *</code> ä¸ä¼šç›´æ¥å¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼ˆå¦‚æœä¸èµ°ç´¢å¼•å¤§æ¦‚ç‡æ˜¯å› ä¸º where æŸ¥è¯¢èŒƒå›´è¿‡å¤§å¯¼è‡´çš„ï¼‰ï¼Œä½†å®ƒå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›å…¶ä»–çš„æ€§èƒ½é—®é¢˜æ¯”å¦‚é€ æˆç½‘ç»œä¼ è¾“å’Œæ•°æ®å¤„ç†çš„æµªè´¹ã€æ— æ³•ä½¿ç”¨ç´¢å¼•è¦†ç›–ã€‚</p>
<h3 data-id="heading-11">ç´¢å¼•å¤±æ•ˆçš„åŸå› æœ‰å“ªäº›ï¼Ÿ</h3>
<ol>
<li>åˆ›å»ºäº†ç»„åˆç´¢å¼•ï¼Œä½†æŸ¥è¯¢æ¡ä»¶æœªéµå®ˆæœ€å·¦åŒ¹é…åŸåˆ™;</li>
<li>åœ¨ç´¢å¼•åˆ—ä¸Šè¿›è¡Œè®¡ç®—ã€å‡½æ•°ã€ç±»å‹è½¬æ¢ç­‰æ“ä½œ;</li>
<li>ä»¥ % å¼€å¤´çš„ LIKE æŸ¥è¯¢æ¯”å¦‚ <code>LIKE '%abc';</code>;</li>
<li>æŸ¥è¯¢æ¡ä»¶ä¸­ä½¿ç”¨ ORï¼Œä¸” OR çš„å‰åæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªåˆ—æ²¡æœ‰ç´¢å¼•ï¼Œæ¶‰åŠçš„ç´¢å¼•éƒ½ä¸ä¼šè¢«ä½¿ç”¨åˆ°;</li>
<li>IN çš„å–å€¼èŒƒå›´è¾ƒå¤§æ—¶ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œèµ°å…¨è¡¨æ‰«æ(NOT IN å’Œ IN çš„å¤±æ•ˆåœºæ™¯ç›¸åŒ);</li>
<li>å‘ç”Ÿ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fmysql%2Findex-invalidation-caused-by-implicit-conversion.html" title="https://javaguide.cn/database/mysql/index-invalidation-caused-by-implicit-conversion.html" target="_blank" ref="nofollow noopener noreferrer">éšå¼è½¬æ¢</a>;</li>
</ol>
<h3 data-id="heading-12">MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å—ï¼Ÿ</h3>
<p>ç®€åŒ–ç‰ˆå‚è€ƒç­”æ¡ˆï¼šMySQL InnoDB å­˜å‚¨å¼•æ“çš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ <strong>REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰</strong>ã€‚æ ‡å‡†çš„ SQL éš”ç¦»çº§åˆ«å®šä¹‰é‡Œï¼ŒREPEATABLE-READ(å¯é‡å¤è¯»)æ˜¯ä¸å¯ä»¥é˜²æ­¢å¹»è¯»çš„ï¼Œä½† InnoDB å®ç°çš„ REPEATABLE-READ éš”ç¦»çº§åˆ«å…¶å®æ˜¯å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å‘ç”Ÿçš„ã€‚</p>
<p>è¯¦ç»†å‚è€ƒç­”æ¡ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FN4WHYAa00ZhDjMLaqnlgRQ" target="_blank" title="https://mp.weixin.qq.com/s/N4WHYAa00ZhDjMLaqnlgRQ" ref="nofollow noopener noreferrer">MySQL çš„é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆ?å¯ä»¥è§£å†³å¹»è¯»é—®é¢˜å—ï¼Ÿ</a></p>
<h2 data-id="heading-13">Redis</h2>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆè¦ç”¨ Redisï¼Ÿ</h3>
<h3 data-id="heading-15">é¡¹ç›®ä¸­å¼•å…¥ Redis å…·ä½“åšäº†å“ªäº›äº‹æƒ…ï¼Ÿ</h3>
<p>Redis é™¤äº†å¯ä»¥ç”¨æ¥ç¼“å­˜é«˜é¢‘è®¿é—®çš„æ•°æ®ä¹‹å¤–ï¼Œè¿˜ä»¥ç”¨æ¥å®ç°ï¼š</p>
<ul>
<li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šé€šè¿‡ Redis æ¥åšåˆ†å¸ƒå¼é”æ˜¯ä¸€ç§æ¯”è¾ƒå¸¸è§çš„æ–¹å¼ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäº Redisson æ¥å®ç°åˆ†å¸ƒå¼é”ã€‚å…³äº Redis å®ç°åˆ†å¸ƒå¼é”çš„è¯¦ç»†ä»‹ç»ï¼Œå¯ä»¥çœ‹æˆ‘å†™çš„è¿™ç¯‡æ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fy8kAflIenRpa4zIwCP_8iA" target="_blank" title="https://mp.weixin.qq.com/s/y8kAflIenRpa4zIwCP_8iA" ref="nofollow noopener noreferrer">å¦‚ä½•åŸºäº Redis å®ç°åˆ†å¸ƒå¼é”ï¼Ÿ</a>ã€‚</li>
<li><strong>é™æµ</strong>ï¼šä¸€èˆ¬æ˜¯é€šè¿‡ Redis + Lua è„šæœ¬çš„æ–¹å¼æ¥å®ç°é™æµã€‚å¦‚æœä¸æƒ³è‡ªå·±å†™ Lua è„šæœ¬çš„è¯ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åˆ©ç”¨ Redisson ä¸­çš„ <code>RRateLimiter</code> æ¥å®ç°åˆ†å¸ƒå¼é™æµï¼Œå…¶åº•å±‚å®ç°å°±æ˜¯åŸºäº Lua ä»£ç +ä»¤ç‰Œæ¡¶ç®—æ³•ã€‚</li>
<li><strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼šRedis è‡ªå¸¦çš„ List æ•°æ®ç»“æ„å¯ä»¥ä½œä¸ºä¸€ä¸ªç®€å•çš„é˜Ÿåˆ—ä½¿ç”¨ã€‚Redis 5.0 ä¸­å¢åŠ çš„ Stream ç±»å‹çš„æ•°æ®ç»“æ„æ›´åŠ é€‚åˆç”¨æ¥åšæ¶ˆæ¯é˜Ÿåˆ—ã€‚å®ƒæ¯”è¾ƒç±»ä¼¼äº Kafkaï¼Œæœ‰ä¸»é¢˜å’Œæ¶ˆè´¹ç»„çš„æ¦‚å¿µï¼Œæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–ä»¥åŠ ACK æœºåˆ¶ã€‚</li>
<li><strong>å»¶æ—¶é˜Ÿåˆ—</strong>ï¼šRedisson å†…ç½®äº†å»¶æ—¶é˜Ÿåˆ—ï¼ˆåŸºäº Sorted Set å®ç°çš„ï¼‰ã€‚</li>
<li><strong>åˆ†å¸ƒå¼ Session</strong> ï¼šåˆ©ç”¨ String æˆ–è€… Hash æ•°æ®ç±»å‹ä¿å­˜ Session æ•°æ®ï¼Œæ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å¯ä»¥è®¿é—®ã€‚</li>
<li><strong>å¤æ‚ä¸šåŠ¡åœºæ™¯</strong>ï¼šé€šè¿‡ Redis ä»¥åŠ Redis æ‰©å±•ï¼ˆæ¯”å¦‚ Redissonï¼‰æä¾›çš„æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å®Œæˆå¾ˆå¤šå¤æ‚çš„ä¸šåŠ¡åœºæ™¯æ¯”å¦‚é€šè¿‡ Bitmap ç»Ÿè®¡æ´»è·ƒç”¨æˆ·ã€é€šè¿‡ Sorted Set ç»´æŠ¤æ’è¡Œæ¦œã€‚</li>
</ul>
<p>é¢è¯•ä¸­ï¼Œæ ¹æ®ä½ é¡¹ç›®çš„å®é™…æƒ…å†µå»å›ç­”å³å¯ï¼</p>
<p>æ›´å¤š Redis é«˜é¢‘é¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fredis%2Fredis-questions-01.html" target="_blank" title="https://javaguide.cn/database/redis/redis-questions-01.html" ref="nofollow noopener noreferrer">Redis å¸¸è§é¢è¯•é¢˜æ€»ç»“ï¼ˆä¸Šï¼‰</a>ï¼ˆRedis åŸºç¡€ã€åº”ç”¨ã€æ•°æ®ç±»å‹ã€æŒä¹…åŒ–æœºåˆ¶ã€çº¿ç¨‹æ¨¡å‹ç­‰ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fdatabase%2Fredis%2Fredis-questions-02.html" target="_blank" title="https://javaguide.cn/database/redis/redis-questions-02.html" ref="nofollow noopener noreferrer">Redis å¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)</a>ï¼ˆRedis äº‹åŠ¡ã€æ€§èƒ½ä¼˜åŒ–ã€ç”Ÿäº§é—®é¢˜ã€é›†ç¾¤ã€ä½¿ç”¨è§„èŒƒç­‰ï¼‰</li>
</ul>
<h3 data-id="heading-16">ä½¿ç”¨ HyperLogLog ç»Ÿè®¡é¡µé¢ UV æ€ä¹ˆåšçš„ï¼Ÿ</h3>
<p>ä½¿ç”¨ HyperLogLog ç»Ÿè®¡é¡µé¢ UV ä¸»è¦éœ€è¦ç”¨åˆ°ä¸‹é¢è¿™ä¸¤ä¸ªå‘½ä»¤ï¼š</p>
<ul>
<li><code>PFADD key element1 element2 ...</code>ï¼šæ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ° HyperLogLog ä¸­ã€‚</li>
<li><code>PFCOUNT key1 key2</code>ï¼šè·å–ä¸€ä¸ªæˆ–è€…å¤šä¸ª HyperLogLog çš„å”¯ä¸€è®¡æ•°ã€‚</li>
</ul>
<p>1ã€å°†è®¿é—®æŒ‡å®šé¡µé¢çš„æ¯ä¸ªç”¨æˆ· ID æ·»åŠ åˆ° <code>HyperLogLog</code> ä¸­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PFADD PAGE_1:UV USER1 USER2 ...... USERn
</code></pre>
<p>2ã€ç»Ÿè®¡æŒ‡å®šé¡µé¢çš„ UVã€‚</p>
<pre><code class="hljs language-bash" lang="bash">PFCOUNT PAGE_1:UV
</code></pre>
<h3 data-id="heading-17">å¦‚æœç¼“å­˜çš„æ•°æ®é‡å¤ªå¤§ï¼Œå†…å­˜ä¸å¤Ÿç”¨æ€ä¹ˆåŠï¼Ÿ</h3>
<ol>
<li><strong>å‚ç›´æ‰©å±•ï¼ˆå¢åŠ ç¡¬ä»¶é…ç½®ï¼‰ï¼š</strong> æœ€ç›´æ¥çš„æ–¹å¼æ˜¯å‡çº§ç°æœ‰ Redis æœåŠ¡å™¨çš„å†…å­˜å®¹é‡ï¼Œé€‰æ‹©é…ç½®æ›´é«˜ã€å†…å­˜æ›´å¤§çš„æœåŠ¡å™¨æ¥éƒ¨ç½² Redis å®ä¾‹ã€‚ ä¸è¿‡ï¼Œè¿™ä¼šå—åˆ°ç¡¬ä»¶æˆæœ¬å’Œå•æœºå†…å­˜å®¹é‡ä¸Šé™çš„é™åˆ¶ã€‚</li>
<li><strong>æ°´å¹³æ‰©å±•ï¼ˆRedis åˆ‡ç‰‡é›†ç¾¤ï¼‰ï¼š</strong> Redis åˆ‡ç‰‡é›†ç¾¤å°±æ˜¯éƒ¨ç½²å¤šå° Redis ä¸»èŠ‚ç‚¹ï¼ˆmasterï¼‰ï¼Œè¿™äº›èŠ‚ç‚¹ä¹‹é—´å¹³ç­‰ï¼Œå¹¶æ²¡æœ‰ä¸»ä»ä¹‹è¯´ï¼ŒåŒæ—¶å¯¹å¤–æä¾›è¯»/å†™æœåŠ¡ã€‚ç¼“å­˜çš„æ•°æ®åº“ç›¸å¯¹å‡åŒ€åœ°åˆ†å¸ƒåœ¨è¿™äº› Redis å®ä¾‹ä¸Šï¼Œå®¢æˆ·ç«¯çš„è¯·æ±‚é€šè¿‡è·¯ç”±è§„åˆ™è½¬å‘åˆ°ç›®æ ‡ master ä¸Šã€‚Redis åˆ‡ç‰‡é›†ç¾¤å¯¹äºæ¨ªå‘æ‰©å±•éå¸¸å‹å¥½ï¼Œåªéœ€è¦å¢åŠ  Redis èŠ‚ç‚¹åˆ°é›†ç¾¤ä¸­å³å¯ã€‚</li>
</ol>
<h3 data-id="heading-18">Redis åˆ‡ç‰‡é›†ç¾¤å¦‚ä½•å®ç°ï¼Ÿ</h3>
<p>Redis 3.0 å®˜æ–¹æ¨å‡ºäº†åˆ†ç‰‡é›†ç¾¤è§£å†³æ–¹æ¡ˆ Redis Cluster ã€‚ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„æŒç»­å®Œå–„ï¼ŒRedis Cluster æˆä¸º Redis åˆ‡ç‰‡é›†ç¾¤çš„é¦–é€‰æ–¹æ¡ˆï¼Œæ»¡è¶³ç»å¤§éƒ¨åˆ†é«˜å¹¶å‘ä¸šåŠ¡åœºæ™¯éœ€æ±‚ã€‚</p>
<p>å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯ Redis 3.0 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ Twemproxyã€Codis è¿™ç±»å¼€æºåˆ†ç‰‡é›†ç¾¤æ–¹æ¡ˆã€‚Twemproxyã€Codis å°±ç›¸å½“äºæ˜¯ Proxy å±‚ï¼Œè´Ÿè´£ç»´æŠ¤è·¯ç”±è§„åˆ™ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚</p>
<h2 data-id="heading-19">æ“ä½œç³»ç»Ÿ</h2>
<h3 data-id="heading-20">è¿›ç¨‹çº¿ç¨‹åŒºåˆ«</h3>
<p>è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œå…·å¤‡ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼›çº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œå¤ç”¨æ‰€å±è¿›ç¨‹çš„èµ„æºã€‚äºŒè€…æ ¸å¿ƒå·®å¼‚åœ¨äºéš”ç¦»æ€§ä¸å…±äº«æ€§ï¼šè¿›ç¨‹å½¼æ­¤éš”ç¦»ï¼Œçº¿ç¨‹é—´å…±äº«å†…å­˜ã€‚å¼•å…¥çº¿ç¨‹çš„ç›®çš„ï¼Œæ˜¯åœ¨å•ä¸€åº”ç”¨å†…éƒ¨å®ç°ä½å¼€é”€ã€é«˜æ•ˆç‡çš„å¹¶å‘ï¼Œé™ä½èµ„æºå ç”¨ä¸é€šä¿¡æˆæœ¬ï¼Œå……åˆ†é‡Šæ”¾å¤šæ ¸æ½œèƒ½ã€‚</p>
<p>è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FyFggyRl3xYtGlHKVXWQDCw" target="_blank" title="https://mp.weixin.qq.com/s/yFggyRl3xYtGlHKVXWQDCw" ref="nofollow noopener noreferrer">è¿›ç¨‹å’Œçº¿ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæœ‰äº†è¿›ç¨‹ä¸ºä»€ä¹ˆè¿˜éœ€è¦çº¿ç¨‹?</a>ã€‚</p>
<h3 data-id="heading-21">è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•æœ‰å“ªäº›?</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3967d1ed573543f193fe76971c85edb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=TyzZvJ8lTHCzSg1GKS7C2iXoLd4%3D" alt="å¸¸è§è¿›ç¨‹è°ƒåº¦ç®—æ³•" loading="lazy"/></p>
<p>è¿›ç¨‹è°ƒåº¦ç®—æ³•çš„æ ¸å¿ƒç›®æ ‡æ˜¯å†³å®šå°±ç»ªé˜Ÿåˆ—ä¸­çš„å“ªä¸ªè¿›ç¨‹åº”è¯¥è·å¾— CPU èµ„æºï¼Œå…¶è®¾è®¡ç›®æ ‡é€šå¸¸æ˜¯åœ¨<strong>ååé‡ã€å‘¨è½¬æ—¶é—´ã€å“åº”æ—¶é—´</strong>å’Œ<strong>å…¬å¹³æ€§</strong>ä¹‹é—´åšæƒè¡¡ã€‚</p>
<p>æˆ‘ä¹ æƒ¯å°†è¿™äº›ç®—æ³•åˆ†ä¸ºä¸¤å¤§ç±»ï¼š<strong>éæŠ¢å å¼</strong>å’Œ<strong>æŠ¢å å¼</strong>ã€‚</p>
<p><strong>ç¬¬ä¸€ç±»ï¼šéæŠ¢å å¼è°ƒåº¦ (Non-Preemptive)</strong></p>
<p>è¿™ç§æ–¹å¼ä¸‹ï¼Œä¸€æ—¦ CPU åˆ†é…ç»™ä¸€ä¸ªè¿›ç¨‹ï¼Œå®ƒå°±ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œç›´åˆ°ä»»åŠ¡å®Œæˆæˆ–ä¸»åŠ¨æ”¾å¼ƒï¼ˆæ¯”å¦‚ç­‰å¾… I/Oï¼‰ã€‚</p>
<ol>
<li><strong>å…ˆåˆ°å…ˆæœåŠ¡è°ƒåº¦ç®—æ³•(FCFSï¼ŒFirst Come, First Served)</strong> : è¿™æ˜¯æœ€ç®€å•çš„ï¼Œå°±åƒæ’é˜Ÿï¼Œè°å…ˆæ¥è°å…ˆç”¨ã€‚ä¼˜ç‚¹æ˜¯å…¬å¹³ã€å®ç°ç®€å•ã€‚ä½†ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå¦‚æœä¸€ä¸ªå¾ˆé•¿çš„ä»»åŠ¡å…ˆåˆ°äº†ï¼Œåé¢æ— æ•°ä¸ªçŸ­ä»»åŠ¡éƒ½å¾—ç­‰ç€ï¼Œè¿™ä¼šå¯¼è‡´å¹³å‡ç­‰å¾…æ—¶é—´å¾ˆé•¿ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæŠ¤èˆªæ•ˆåº”â€ã€‚</li>
<li><strong>çŸ­ä½œä¸šä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•(SJFï¼ŒShortest Job First)</strong> : ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºã€‚ç†è®ºä¸Šï¼Œå®ƒçš„å¹³å‡ç­‰å¾…æ—¶é—´æ˜¯æœ€çŸ­çš„ï¼Œååé‡å¾ˆé«˜ã€‚ä½†ç¼ºç‚¹æ˜¯ï¼Œå®ƒéœ€è¦é¢„æµ‹è¿è¡Œæ—¶é—´ï¼Œè¿™å¾ˆéš¾åšåˆ°ï¼Œè€Œä¸”å¯èƒ½ä¼šå¯¼è‡´é•¿ä½œä¸šâ€œé¥¿æ­»â€ï¼Œæ°¸è¿œå¾—ä¸åˆ°æ‰§è¡Œã€‚</li>
</ol>
<p><strong>ç¬¬äºŒç±»ï¼šæŠ¢å å¼è°ƒåº¦ (Preemptive)</strong></p>
<p>æ“ä½œç³»ç»Ÿå¯ä»¥å¼ºåˆ¶å‰¥å¤ºå½“å‰è¿›ç¨‹çš„ CPU ä½¿ç”¨æƒï¼Œåˆ†é…ç»™å…¶ä»–æ›´é‡è¦çš„è¿›ç¨‹ã€‚ç°ä»£æ“ä½œç³»ç»ŸåŸºæœ¬éƒ½é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³•ï¼ˆRRï¼ŒRound-Robinï¼‰</strong> : è¿™æ˜¯æœ€ç»å…¸ã€æœ€å…¬å¹³çš„æŠ¢å å¼ç®—æ³•ã€‚å®ƒç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç‰‡ï¼Œç”¨å®Œäº†å°±æŠŠå®ƒæ”¾åˆ°é˜Ÿå°¾ï¼Œåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚å®ƒéå¸¸é€‚åˆåˆ†æ—¶ç³»ç»Ÿï¼Œä¿è¯äº†æ¯ä¸ªè¿›ç¨‹éƒ½èƒ½å¾—åˆ°å“åº”ï¼Œä½†æ—¶é—´ç‰‡çš„è®¾ç½®å¾ˆå…³é”®ï¼šå¤ªé•¿äº†é€€åŒ–æˆ FCFSï¼Œå¤ªçŸ­äº†åˆ™ä¼šå¯¼è‡´è¿‡äºé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚</li>
<li><strong>ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆPriorityï¼‰</strong>ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œè¿›ç¨‹è°ƒåº¦å™¨æ€»æ˜¯é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„è¿›ç¨‹ï¼Œå…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹ä»¥ FCFS æ–¹å¼æ‰§è¡Œã€‚è¿™å¾ˆçµæ´»ï¼Œå¯ä»¥æ ¹æ®å†…å­˜è¦æ±‚ï¼Œæ—¶é—´è¦æ±‚æˆ–ä»»ä½•å…¶ä»–èµ„æºè¦æ±‚æ¥ç¡®å®šä¼˜å…ˆçº§ï¼Œä½†åŒæ ·å¯èƒ½å¯¼è‡´ä½ä¼˜å…ˆçº§è¿›ç¨‹â€œé¥¿æ­»â€ã€‚</li>
</ul>
<p>å‰é¢ä»‹ç»çš„å‡ ç§è¿›ç¨‹è°ƒåº¦çš„ç®—æ³•éƒ½æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå¦‚ï¼š<strong>çŸ­è¿›ç¨‹ä¼˜å…ˆçš„è°ƒåº¦ç®—æ³•ï¼Œä»…ç…§é¡¾äº†çŸ­è¿›ç¨‹è€Œå¿½ç•¥äº†é•¿è¿›ç¨‹</strong> ã€‚é‚£æœ‰æ²¡æœ‰ä¸€ç§ç»“åˆäº†ä¸Šé¢è¿™äº›è¿›ç¨‹è°ƒåº¦ç®—æ³•ä¼˜ç‚¹çš„å‘¢ï¼Ÿ</p>
<p><strong>å¤šçº§åé¦ˆé˜Ÿåˆ—è°ƒåº¦ç®—æ³•ï¼ˆMFQï¼ŒMulti-level Feedback Queueï¼‰</strong> æ˜¯ç°å®ä¸–ç•Œä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œæ¯”å¦‚æ—©æœŸçš„ UNIXã€‚å®ƒéå¸¸èªæ˜ï¼Œç»“åˆäº† RR å’Œä¼˜å…ˆçº§è°ƒåº¦ã€‚å®ƒè®¾ç½®äº†å¤šä¸ªä¸åŒä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œæ¯ä¸ªé˜Ÿåˆ—ä½¿ç”¨ RR è°ƒåº¦ï¼Œæ—¶é—´ç‰‡å¤§å°ä¹Ÿä¸åŒã€‚æ–°è¿›ç¨‹å…ˆè¿›å…¥æœ€é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼›å¦‚æœåœ¨ä¸€ä¸ªæ—¶é—´ç‰‡å†…æ²¡æ‰§è¡Œå®Œï¼Œå°±ä¼šè¢«é™çº§åˆ°ä¸‹ä¸€ä¸ªé˜Ÿåˆ—ã€‚è¿™æ ·æ—¢ç…§é¡¾äº†çŸ­ä½œä¸šï¼ˆåœ¨é«˜ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å¿«é€Ÿå®Œæˆï¼‰ï¼Œä¹Ÿä¿è¯äº†é•¿ä½œä¸šä¸ä¼šé¥¿æ­»ï¼ˆæœ€ç»ˆä¼šåœ¨ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ä¸­å¾—åˆ°æ‰§è¡Œï¼‰ï¼Œæ˜¯ä¸€ç§éå¸¸å‡è¡¡çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-22">æ­»é”ï¼Œæ­»é”æ¡ä»¶</h3>
<p>æ­»é”ï¼ˆDeadlockï¼‰æè¿°çš„æ˜¯è¿™æ ·ä¸€ç§æƒ…å†µï¼šå¤šä¸ªè¿›ç¨‹/çº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½åœ¨ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ã€‚ç”±äºè¿›ç¨‹/çº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚</p>
<p>ä¸€ä¸ªæœ€ç»å…¸çš„ä¾‹å­å°±æ˜¯**â€œäº¤å‰æŒé”â€**ã€‚æƒ³è±¡æœ‰ä¸¤ä¸ªçº¿ç¨‹å’Œä¸¤ä¸ªé”:</p>
<ul>
<li>çº¿ç¨‹ 1 å…ˆæ‹¿åˆ°äº†é” Aï¼Œç„¶åå°è¯•å»è·å–é” Bã€‚</li>
<li>å‡ ä¹åŒæ—¶ï¼Œçº¿ç¨‹ 2 æ‹¿åˆ°äº†é” Bï¼Œç„¶åå°è¯•å»è·å–é” Aã€‚</li>
</ul>
<p>è¿™æ—¶ï¼Œçº¿ç¨‹ 1 ç­‰ç€çº¿ç¨‹ 2 é‡Šæ”¾é” Bï¼Œè€Œçº¿ç¨‹ 2 ç­‰ç€çº¿ç¨‹ 1 é‡Šæ”¾é” Aï¼ŒåŒæ–¹éƒ½æŒæœ‰å¯¹æ–¹éœ€è¦çš„èµ„æºï¼Œå¹¶ç­‰å¾…å¯¹æ–¹é‡Šæ”¾ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªâ€œæ­»ç»“â€ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/887a8e98ab9e425296400f217973164d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=DvbwaWoH5dw%2FuQr%2BXx5LnRqsWz0%3D" loading="lazy"/>
<p>æ­»é”çš„å‘ç”Ÿå¹¶ä¸æ˜¯å¶ç„¶çš„ï¼Œå®ƒéœ€è¦åŒæ—¶æ»¡è¶³<strong>å››ä¸ªå¿…è¦æ¡ä»¶</strong>ï¼š</p>
<ol>
<li><strong>äº’æ–¥</strong>ï¼šèµ„æºå¿…é¡»å¤„äºéå…±äº«æ¨¡å¼ï¼Œå³ä¸€æ¬¡åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœå¦ä¸€è¿›ç¨‹ç”³è¯·è¯¥èµ„æºï¼Œé‚£ä¹ˆå¿…é¡»ç­‰å¾…ç›´åˆ°è¯¥èµ„æºè¢«é‡Šæ”¾ä¸ºæ­¢ã€‚</li>
<li><strong>å æœ‰å¹¶ç­‰å¾…</strong>ï¼šä¸€ä¸ªè¿›ç¨‹è‡³å°‘åº”è¯¥å æœ‰ä¸€ä¸ªèµ„æºï¼Œå¹¶ç­‰å¾…å¦ä¸€èµ„æºï¼Œè€Œè¯¥èµ„æºè¢«å…¶ä»–è¿›ç¨‹æ‰€å æœ‰ã€‚</li>
<li><strong>éæŠ¢å </strong>ï¼šèµ„æºä¸èƒ½è¢«æŠ¢å ã€‚åªèƒ½åœ¨æŒæœ‰èµ„æºçš„è¿›ç¨‹å®Œæˆä»»åŠ¡åï¼Œè¯¥èµ„æºæ‰ä¼šè¢«é‡Šæ”¾ã€‚</li>
<li><strong>å¾ªç¯ç­‰å¾…</strong>ï¼šæœ‰ä¸€ç»„ç­‰å¾…è¿›ç¨‹ {P0, P1,..., Pn}ï¼Œ P0 ç­‰å¾…çš„èµ„æºè¢« P1 å æœ‰ï¼ŒP1 ç­‰å¾…çš„èµ„æºè¢« P2 å æœ‰ï¼Œâ€¦â€¦ï¼ŒPn-1 ç­‰å¾…çš„èµ„æºè¢« Pn å æœ‰ï¼ŒPn ç­‰å¾…çš„èµ„æºè¢« P0 å æœ‰ã€‚</li>
</ol>
<p><strong>æ³¨æ„ âš ï¸</strong>ï¼šè¿™å››ä¸ªæ¡ä»¶æ˜¯äº§ç”Ÿæ­»é”çš„ <strong>å¿…è¦æ¡ä»¶</strong> ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ç³»ç»Ÿå‘ç”Ÿæ­»é”ï¼Œè¿™äº›æ¡ä»¶å¿…ç„¶æˆç«‹ï¼Œè€Œåªè¦ä¸Šè¿°æ¡ä»¶ä¹‹ä¸€ä¸æ»¡è¶³ï¼Œå°±ä¸ä¼šå‘ç”Ÿæ­»é”ã€‚</p>
<h3 data-id="heading-23">ä¸­æ–­å’Œè½®è¯¢çš„åŒºåˆ«</h3>






























<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>è½®è¯¢ï¼ˆPollingï¼‰</th><th>ä¸­æ–­ï¼ˆInterruptï¼‰</th></tr></thead><tbody><tr><td>æ ¸å¿ƒé€»è¾‘</td><td>CPU ä¸»åŠ¨å¾ªç¯æŸ¥è¯¢è®¾å¤‡çŠ¶æ€</td><td>è®¾å¤‡ä¸»åŠ¨å‘ä¿¡å·é€šçŸ¥ CPU</td></tr><tr><td>CPU èµ„æºå ç”¨</td><td>é«˜ï¼ˆå¿™ç­‰ï¼Œæ— æ•ˆå¾ªç¯æµªè´¹ç®—åŠ›ï¼‰</td><td>ä½ï¼ˆä»…å“åº”æ—¶å ç”¨ï¼Œå¹³æ—¶ä¸å¹²æ‰°ï¼‰</td></tr><tr><td>å®æ—¶æ€§</td><td>ä½ï¼ˆä¾èµ–æŸ¥è¯¢é—´éš”ï¼Œæœ‰å»¶è¿Ÿï¼‰</td><td>é«˜ï¼ˆå³æ—¶å“åº”ï¼Œå»¶è¿Ÿæä½ï¼‰</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>è®¾å¤‡æ•°æ®é¢‘ç‡å›ºå®šã€ç®€å•åœºæ™¯ï¼ˆå¦‚å•ç‰‡æœºè¯»å–ä½é€Ÿä¼ æ„Ÿå™¨ï¼‰</td><td>è®¾å¤‡æ•°æ®éšæœºã€å®æ—¶æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼ˆå¦‚é”®ç›˜ã€ç£ç›˜ IOã€ç½‘ç»œé€šä¿¡ï¼‰</td></tr></tbody></table>
<p>æ›´å¤šæ“ä½œç³»ç»Ÿé«˜é¢‘çŸ¥è¯†ç‚¹å’Œé¢è¯•é¢˜æ€»ç»“ï¼Œå¯ä»¥é˜…è¯»ç¬”è€…å†™çš„è¿™å‡ ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Foperating-system-basic-questions-01.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-01.html" ref="nofollow noopener noreferrer">æ“ä½œç³»ç»Ÿå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸Š)</a>ï¼ˆæ“ä½œç³»ç»ŸåŸºç¡€ã€è¿›ç¨‹å’Œçº¿ç¨‹ã€æ­»é”ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Foperating-system-basic-questions-02.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/operating-system-basic-questions-02.html" ref="nofollow noopener noreferrer">æ“ä½œç³»ç»Ÿå¸¸è§é¢è¯•é¢˜æ€»ç»“(ä¸‹)</a>ï¼ˆå†…å­˜ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Foperating-system%2Flinux-intro.html" target="_blank" title="https://javaguide.cn/cs-basics/operating-system/linux-intro.html" ref="nofollow noopener noreferrer">Linux åŸºç¡€çŸ¥è¯†æ€»ç»“</a></li>
</ul>
<h2 data-id="heading-24">ç½‘ç»œ</h2>
<h3 data-id="heading-25">DNS è§£æçš„è¿‡ç¨‹</h3>
<p>æ•´ä¸ªè¿‡ç¨‹çš„æ­¥éª¤æ¯”è¾ƒå¤šï¼Œæˆ‘å•ç‹¬å†™äº†ä¸€ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Fnetwork%2Fdns.html" target="_blank" title="https://javaguide.cn/cs-basics/network/dns.html" ref="nofollow noopener noreferrer">DNS åŸŸåç³»ç»Ÿè¯¦è§£ï¼ˆåº”ç”¨å±‚ï¼‰</a>ã€‚</p>
<h3 data-id="heading-26">ç”¨æˆ·è¾“å…¥ç½‘å€åˆ°æ˜¾ç¤ºå¯¹åº”é¡µé¢çš„å…¨è¿‡ç¨‹</h3>
<p>å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼ˆæ¥æºäºã€Šå›¾è§£ HTTPã€‹ï¼‰ï¼š</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bc5c0f9ce864d4c86e502901c639db4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YUd1aWRl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753368&amp;x-signature=eh90LYq7mgUieMuKL35FMG24QhA%3D" loading="lazy"/>
<p>ä¸Šå›¾æœ‰ä¸€ä¸ªé”™è¯¯éœ€è¦æ³¨æ„ï¼šæ˜¯ OSPF ä¸æ˜¯ OPSFã€‚ OSPFï¼ˆOpen Shortest Path Firstï¼Œospfï¼‰å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®, æ˜¯ç”± Internet å·¥ç¨‹ä»»åŠ¡ç»„å¼€å‘çš„è·¯ç”±é€‰æ‹©åè®®</p>
<p>æ€»ä½“æ¥è¯´åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤:</p>
<ol>
<li>åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æŒ‡å®šç½‘é¡µçš„ URLã€‚</li>
<li>æµè§ˆå™¨é€šè¿‡ DNS åè®®ï¼Œè·å–åŸŸåå¯¹åº”çš„ IP åœ°å€ã€‚</li>
<li>æµè§ˆå™¨æ ¹æ® IP åœ°å€å’Œç«¯å£å·ï¼Œå‘ç›®æ ‡æœåŠ¡å™¨å‘èµ·ä¸€ä¸ª TCP è¿æ¥è¯·æ±‚ã€‚</li>
<li>æµè§ˆå™¨åœ¨ TCP è¿æ¥ä¸Šï¼Œå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ª HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚è·å–ç½‘é¡µçš„å†…å®¹ã€‚</li>
<li>æœåŠ¡å™¨æ”¶åˆ° HTTP è¯·æ±‚æŠ¥æ–‡åï¼Œå¤„ç†è¯·æ±‚ï¼Œå¹¶è¿”å› HTTP å“åº”æŠ¥æ–‡ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨æ”¶åˆ° HTTP å“åº”æŠ¥æ–‡åï¼Œè§£æå“åº”ä½“ä¸­çš„ HTML ä»£ç ï¼Œæ¸²æŸ“ç½‘é¡µçš„ç»“æ„å’Œæ ·å¼ï¼ŒåŒæ—¶æ ¹æ® HTML ä¸­çš„å…¶ä»–èµ„æºçš„ URLï¼ˆå¦‚å›¾ç‰‡ã€CSSã€JS ç­‰ï¼‰ï¼Œå†æ¬¡å‘èµ· HTTP è¯·æ±‚ï¼Œè·å–è¿™äº›èµ„æºçš„å†…å®¹ï¼Œç›´åˆ°ç½‘é¡µå®Œå…¨åŠ è½½æ˜¾ç¤ºã€‚</li>
<li>æµè§ˆå™¨åœ¨ä¸éœ€è¦å’ŒæœåŠ¡å™¨é€šä¿¡æ—¶ï¼Œå¯ä»¥ä¸»åŠ¨å…³é—­ TCP è¿æ¥ï¼Œæˆ–è€…ç­‰å¾…æœåŠ¡å™¨çš„å…³é—­è¯·æ±‚</li>
</ol>
<p>è¯¦ç»†ä»‹ç»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjavaguide.cn%2Fcs-basics%2Fnetwork%2Fthe-whole-process-of-accessing-web-pages.html" target="_blank" title="https://javaguide.cn/cs-basics/network/the-whole-process-of-accessing-web-pages.html" ref="nofollow noopener noreferrer">è®¿é—®ç½‘é¡µçš„å…¨è¿‡ç¨‹ï¼ˆçŸ¥è¯†ä¸²è”ï¼‰</a>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ]]></title>    <link>https://juejin.cn/post/7576821684251918379</link>    <guid>https://juejin.cn/post/7576821684251918379</guid>    <pubDate>2025-11-26T09:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251918379" data-draft-id="7576575703166402566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-26T09:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:13:00.000Z" title="Wed Nov 26 2025 09:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><p>æƒé™æ§åˆ¶æ˜¯å‰ç«¯åº”ç”¨ï¼ˆå°¤å…¶æ˜¯ä¸­å¤§å‹ç³»ç»Ÿï¼‰çš„æ ¸å¿ƒå®‰å…¨ä¸ä½“éªŒä¿éšœï¼Œå®Œæ•´çš„æƒé™ä½“ç³»éœ€è¦†ç›–ã€Œè·¯ç”±æƒé™ã€é¡µé¢å…ƒç´ æƒé™ã€æ¥å£æƒé™ã€ä¸‰å¤§åœºæ™¯ã€‚æœ¬æ–‡ç»“åˆçœŸå®é¡¹ç›®è½åœ°ç»éªŒï¼Œç³»ç»Ÿæ¢³ç†å„åœºæ™¯çš„åº”ç”¨é€»è¾‘ã€å®ç°æ–¹æ¡ˆã€è®¾è®¡æ¨¡å¼ä¸å­˜å‚¨å®‰å…¨ï¼Œè¡¥å……ä¼ä¸šçº§å¼€å‘çš„å…³é”®ç»†èŠ‚ä¸é¿å‘è¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è·¯ç”±æƒé™ï¼šé¡µé¢è®¿é—®çš„ â€œç¬¬ä¸€é“é—¨æ§›â€</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è§’è‰²å·®å¼‚åŒ–è®¿é—®</strong>ï¼šä¼ä¸šåå°ä¸­ï¼Œç®¡ç†å‘˜å¯è®¿é—®ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®é¡µï¼Œè¿è¥ä»…èƒ½è®¿é—®è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†é¡µã€‚</li>
<li><strong>SaaS å¤šç§Ÿæˆ·å®šåˆ¶</strong>ï¼šä¸åŒç§Ÿæˆ·ï¼ˆå®¢æˆ·ï¼‰å¼€é€šä¸åŒåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ A ç§Ÿæˆ·æœ‰æŠ¥è¡¨åˆ†ææ¨¡å—ï¼ŒB ç§Ÿæˆ·æ— ï¼‰ï¼Œåç«¯æ ¹æ®ç§Ÿæˆ· ID è¿”å›å¯¹åº”è·¯ç”±ã€‚</li>
<li><strong>æƒé™åŠ¨æ€å˜æ›´</strong>ï¼šç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹ç”¨æˆ·è§’è‰²åï¼Œå‰ç«¯æ— éœ€é‡å¯åº”ç”¨ï¼Œå®æ—¶æ›´æ–°å¯è®¿é—®é¡µé¢ã€‚</li>
<li><strong>åˆ·æ–°ä¸¢å¤±ä¿®å¤</strong>ï¼šå•é¡µåº”ç”¨ï¼ˆSPAï¼‰åˆ·æ–°åï¼ŒåŠ¨æ€æ·»åŠ çš„è·¯ç”±ä¼šä¸¢å¤±ï¼Œéœ€é‡æ–°åŠ è½½è·¯ç”±é…ç½®ã€‚</li>
<li><strong>è·¯ç”±æ‡’åŠ è½½é€‚é…</strong>ï¼šå¤§å‹åº”ç”¨ä¸­ï¼Œè·¯ç”±ç»„ä»¶ä½“ç§¯å¤§ï¼Œéœ€ç»“åˆæƒé™é¢„æ ¡éªŒå®ç°æŒ‰éœ€åŠ è½½ï¼Œé¿å…æ— æ•ˆèµ„æºè¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰æ··åˆå¼è·¯ç”±é…ç½®ï¼ˆå‰ç«¯é¢„è®¾ + åç«¯è¿‡æ»¤ï¼‰</h4>
<p>çº¯åç«¯è¿”å›è·¯ç”±çµæ´»æ€§å·®ï¼Œçº¯å‰ç«¯é¢„è®¾è·¯ç”±éš¾ä»¥åº”å¯¹æƒé™å˜æ›´ï¼Œå®é™…é¡¹ç›®å¸¸ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<ul>
<li>å‰ç«¯é¢„è®¾ã€ŒåŸºç¡€è·¯ç”±ã€ï¼ˆç™»å½•é¡µã€404 é¡µã€é¦–é¡µï¼‰å’Œã€Œæƒé™è·¯ç”±æ¨¡æ¿ã€ï¼ˆå« meta.permission æ ‡è¯†é¡µé¢æ‰€éœ€æƒé™ï¼‰ã€‚</li>
<li>ç™»å½•åï¼Œåç«¯è¿”å›ç”¨æˆ·ã€Œæƒé™æ ‡è¯†åˆ—è¡¨ã€ï¼Œå‰ç«¯è¿‡æ»¤å‡ºå¯è®¿é—®çš„æƒé™è·¯ç”±ï¼ŒåŠ¨æ€æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯é¢„è®¾è·¯ç”±æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> asyncRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user-manage'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserManage'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/UserManage.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'user:manage'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span> } <span class="hljs-comment">// é¡µé¢æ‰€éœ€æƒé™æ ‡è¯†</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/system-config'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SystemConfig'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/SystemConfig.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'system:config'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç³»ç»Ÿé…ç½®'</span> }
  }
];

<span class="hljs-comment">// ç”Ÿæˆå¯è®¿é—®è·¯ç”±ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateAccessibleRoutes</span> = (<span class="hljs-params">permissions</span>) =&gt; {
  <span class="hljs-keyword">return</span> asyncRoutes.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-comment">// æ— æƒé™æ ‡è¯†çš„è·¯ç”±é»˜è®¤å¯è®¿é—®ï¼Œæœ‰æƒé™æ ‡è¯†éœ€åŒ¹é…ç”¨æˆ·æƒé™</span>
    <span class="hljs-keyword">return</span> !route.<span class="hljs-property">meta</span>?.<span class="hljs-property">permission</span> || permissions.<span class="hljs-title function_">includes</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">permission</span>);
  });
};
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰è·¯ç”±å®ˆå«çš„ â€œè´£ä»»é“¾æ ¡éªŒâ€</h4>
<p>å°†ç™»å½•æ ¡éªŒã€æƒé™æ ¡éªŒã€åˆ·æ–°ä¿®å¤ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹å®ˆå«ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œé™ä½è€¦åˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">router.beforeEach(<span class="hljs-keyword">async</span> (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = localStorage.getItem(<span class="hljs-comment">'token');</span>
  <span class="hljs-keyword">const</span> userPermissions = store.getters.userPermissions;

  // <span class="hljs-number">1</span>. æœªç™»å½•æ‹¦æˆªï¼ˆè´£ä»»é“¾ç¬¬ä¸€ç¯ï¼‰
  <span class="hljs-keyword">if</span> (!token &amp;&amp; <span class="hljs-keyword">to</span>.path !== <span class="hljs-comment">'/login') {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/login?redirect=' + to.fullPath); // è®°å½•è·³è½¬ç›®æ ‡ï¼Œç™»å½•åå›è·³</span>
  }

  // <span class="hljs-number">2</span>. å·²ç™»å½•ä½†æ— æƒé™è®¿é—®ï¼ˆè´£ä»»é“¾ç¬¬äºŒç¯ï¼‰
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">to</span>.meta.permission &amp;&amp; !userPermissions.includes(<span class="hljs-keyword">to</span>.meta.permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/403'); // è·³è½¬åˆ°è‡ªå®šä¹‰æ— æƒé™é¡µï¼Œæå‡ä½“éªŒ</span>
  }

  // <span class="hljs-number">3</span>. åˆ·æ–°ååŠ¨æ€è·¯ç”±ä¸¢å¤±ä¿®å¤ï¼ˆè´£ä»»é“¾ç¬¬ä¸‰ç¯ï¼‰
  <span class="hljs-keyword">if</span> (store.getters.accessRoutes.length === <span class="hljs-number">0</span> &amp;&amp; token) {
    <span class="hljs-keyword">const</span> accessibleRoutes = generateAccessibleRoutes(userPermissions);
    store.dispatch(<span class="hljs-comment">'setAccessRoutes', accessibleRoutes);</span>
    accessibleRoutes.forEach(route =&gt; router.addRoute(route));
    // é‡æ–°è§¦å‘è·¯ç”±è·³è½¬ï¼Œé¿å…ç©ºç™½é¡µ
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>({ ...<span class="hljs-keyword">to</span>, replace: <span class="hljs-literal">true</span> });
  }

  <span class="hljs-keyword">next</span>();
});
</code></pre>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰è·¯ç”±ç‹¬äº«å®ˆå«å¢å¼º</h4>
<p>é’ˆå¯¹æ•æ„Ÿé¡µé¢ï¼ˆå¦‚è´¢åŠ¡å¯¹è´¦ã€ç”¨æˆ·æƒé™é…ç½®ï¼‰ï¼Œæ·»åŠ äºŒæ¬¡æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> routes = [
  {
    path: <span class="hljs-comment">'/financial-reconciliation',</span>
    component: FinancialReconciliation,
    meta: { permission: <span class="hljs-comment">'financial:view' },</span>
    beforeEnter: (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
      // é¢å¤–æ ¡éªŒï¼šä»…å·¥ä½œæ—¶é—´å¯è®¿é—®
      <span class="hljs-keyword">const</span> hour = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>().getHours();
      <span class="hljs-keyword">if</span> (hour &lt; <span class="hljs-number">9</span> || hour &gt; <span class="hljs-number">18</span>) {
        ElMessage.warning(<span class="hljs-comment">'ä»…å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰å¯è®¿é—®');</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-keyword">from</span>.path);
      }
      <span class="hljs-keyword">next</span>();
    }
  }
];
</code></pre>
<h3 data-id="heading-6">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šè·¯ç”±å®ˆå«æŒ‰ â€œç™»å½•æ ¡éªŒâ†’æƒé™æ ¡éªŒâ†’åˆ·æ–°ä¿®å¤â€ çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªå®ˆå«è´Ÿè´£å•ä¸€èŒè´£ï¼Œå¯çµæ´»å¢åˆ è°ƒæ•´ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆå¦‚ adminã€editorï¼‰åº”ç”¨ä¸åŒçš„è·¯ç”±è¿‡æ»¤ç­–ç•¥ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ä¿ç•™æ‰€æœ‰æƒé™è·¯ç”±ï¼Œè¿è¥ä»…ä¿ç•™ä¸šåŠ¡ç›¸å…³è·¯ç”±ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šæƒé™å˜æ›´æ—¶ï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™ï¼‰ï¼Œè§¦å‘è·¯ç”±é‡æ–°åŠ è½½äº‹ä»¶ï¼Œæ›´æ–°å¯è®¿é—®è·¯ç”±åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-7">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>è·¯ç”±é…ç½®ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œåˆ·æ–°åé‡æ–°è¯·æ±‚åç«¯è·å–ï¼Œé¿å… localStorage å­˜å‚¨æ•æ„Ÿè·¯ç”±è§„åˆ™ï¼ˆå¦‚æ¥å£åœ°å€ã€æƒé™æ ‡è¯†ï¼‰ã€‚</li>
<li>ç”¨æˆ·æƒé™æ ‡è¯†ï¼šé‡‡ç”¨ â€œlocalStorageï¼ˆæŒä¹…åŒ–ï¼‰+ Vuex/Piniaï¼ˆå†…å­˜è®¿é—®ï¼‰â€ åŒå­˜å‚¨ï¼ŒlocalStorage ç¡®ä¿åˆ·æ–°åä¸ä¸¢å¤±ï¼ŒVuex/Pinia æå‡è®¿é—®æ•ˆç‡ã€‚</li>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorage æˆ– sessionStorageï¼Œå»ºè®®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œé™ä½æ³„éœ²é£é™©ã€‚</li>
</ul>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>æƒé™æ ‡è¯†åŠ å¯†ï¼šå¯¹ localStorage ä¸­çš„æƒé™æ ‡è¯†åšç®€å•åŠ å¯†ï¼ˆå¦‚ Base64ï¼‰ï¼Œé¿å…æ˜æ–‡æ³„éœ²ï¼ˆè™½ä¸èƒ½é˜²ç ´è§£ï¼Œä½†èƒ½æå‡åŸºç¡€å®‰å…¨ï¼‰ã€‚</li>
<li>é˜² URL ç»•è¿‡ï¼šå³ä½¿å‰ç«¯éšè—è·¯ç”±ï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥ URL è®¿é—®æ—¶ï¼Œåç«¯éœ€å¯¹ â€œé¡µé¢åˆå§‹åŒ–æ¥å£â€ åšæƒé™æ ¡éªŒï¼ˆå¦‚è®¿é—®<code>/system-config</code>æ—¶ï¼Œåç«¯æ ¡éªŒ<code>system:config</code>æƒé™ï¼‰ã€‚</li>
<li>æ•æ„Ÿè·¯ç”±éšè—ï¼šæ— æƒé™çš„è·¯ç”±ä¸æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼ŒåŒæ—¶åœ¨èœå•æ¸²æŸ“æ—¶è¿‡æ»¤ï¼Œé¿å…ç”¨æˆ·æ„ŸçŸ¥æœªæˆæƒåŠŸèƒ½ã€‚</li>
</ul>
<h2 data-id="heading-10">äºŒã€é¡µé¢å…ƒç´ æƒé™ï¼šç»†ç²’åº¦çš„ â€œåŠŸèƒ½å¯è§æ€§æ§åˆ¶â€</h2>
<h3 data-id="heading-11">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ“ä½œæƒé™å·®å¼‚åŒ–</strong>ï¼šåŒä¸€é¡µé¢ä¸­ï¼Œç®¡ç†å‘˜å¯çœ‹åˆ° â€œåˆ é™¤ç”¨æˆ·â€â€œæ‰¹é‡å¯¼å‡ºâ€ æŒ‰é’®ï¼Œæ™®é€šç”¨æˆ·ä»…èƒ½çœ‹åˆ° â€œæŸ¥çœ‹è¯¦æƒ…â€ æŒ‰é’®ã€‚</li>
<li><strong>æ•°æ®åˆ—æƒé™</strong>ï¼šè¡¨æ ¼ä¸­ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ â€œæ‰‹æœºå·â€â€œèº«ä»½è¯å·â€ åˆ—ï¼Œè¿è¥ä»…èƒ½æŸ¥çœ‹ â€œç”¨æˆ·åâ€â€œè®¢å•å·â€ åˆ—ã€‚</li>
<li><strong>å¤æ‚æƒé™ç»„åˆ</strong>ï¼šæŒ‰é’®æ˜¾ç¤ºéœ€æ»¡è¶³ â€œè§’è‰²ä¸º editor + æ‹¥æœ‰ order:edit æƒé™ + æ•°æ®å½’å±æœ¬éƒ¨é—¨â€ ç­‰å¤šæ¡ä»¶ç»„åˆã€‚</li>
<li><strong>ç°åº¦åŠŸèƒ½å‘å¸ƒ</strong>ï¼šæ–°åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œä»…å¯¹éƒ¨åˆ†ç”¨æˆ·ï¼ˆå¦‚å†…éƒ¨æµ‹è¯•è´¦å·ï¼‰æ˜¾ç¤ºå…¥å£ï¼Œé€æ­¥å…¨é‡å¼€æ”¾ã€‚</li>
<li><strong>æƒé™åŠ¨æ€æ›´æ–°</strong>ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé¡µé¢å…ƒç´ å®æ—¶åˆ·æ–°ï¼ˆå¦‚ç«‹å³éšè— â€œåˆ é™¤â€ æŒ‰é’®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰æƒé™ä¸­å¿ƒå°è£…ï¼ˆè§£å†³ç¢ç‰‡åŒ–é—®é¢˜ï¼‰</h4>
<p>æ„å»ºå…¨å±€æƒé™ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†æƒé™æ ¡éªŒé€»è¾‘ï¼Œé¿å…æ•£è½åœ¨å„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/utils/permissionCenter.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionCenter</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.permissions = []; <span class="hljs-comment">// æƒé™ç åˆ—è¡¨ï¼ˆå¦‚["user:add", "order:edit"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.roles = []; <span class="hljs-comment">// è§’è‰²åˆ—è¡¨ï¼ˆå¦‚["admin", "editor"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.customRules = new Map(); <span class="hljs-comment">// è‡ªå®šä¹‰æƒé™è§„åˆ™ï¼ˆåº”å¯¹å¤æ‚åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">this</span>.cache = new Map(); <span class="hljs-comment">// æ ¡éªŒç»“æœç¼“å­˜ï¼Œæå‡æ€§èƒ½</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–æƒé™æ•°æ®</span>
  <span class="hljs-keyword">init</span>(permissions, roles) {
    <span class="hljs-keyword">this</span>.permissions = permissions;
    <span class="hljs-keyword">this</span>.roles = roles;
    <span class="hljs-keyword">this</span>.cache.clear(); <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ¸…ç©ºç¼“å­˜</span>
  }

  <span class="hljs-comment">// åŸºç¡€æƒé™æ ¡éªŒï¼ˆæƒé™ç åŒ¹é…ï¼‰</span>
  hasPermission(code) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cache.has(code)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">get</span>(code);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">this</span>.permissions.includes(code);
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">set</span>(code, result); <span class="hljs-comment">// ç¼“å­˜æ ¡éªŒç»“æœ</span>
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  hasRole(role) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.roles.includes(role);
  }

  <span class="hljs-comment">// å¤æ‚è§„åˆ™æ ¡éªŒï¼ˆæ”¯æŒå¤šæ¡ä»¶ç»„åˆï¼‰</span>
  checkCustomRule(ruleName, ...args) {
    <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">get</span>(ruleName);
    <span class="hljs-keyword">if</span> (!rule) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> rule(...args);
  }

  <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰è§„åˆ™</span>
  registerCustomRule(ruleName, ruleFn) {
    <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">set</span>(ruleName, ruleFn);
  }

  <span class="hljs-comment">// æƒé™æ›´æ–°ï¼ˆè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ï¼‰</span>
  updatePermissions(permissions, roles) {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>(permissions, roles);
    <span class="hljs-comment">// è§¦å‘Vueå“åº”å¼æ›´æ–°ï¼ˆéœ€ç»“åˆVuex/Piniaï¼‰</span>
    store.dispatch(<span class="hljs-string">'updateUserPermissions'</span>, { permissions, roles });
  }
}

export default new PermissionCenter();
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰æŒ‡ä»¤ + ç»„ä»¶çš„åŒå±‚æ§åˆ¶</h4>
<ul>
<li><strong>å…¨å±€æŒ‡ä»¤ï¼ˆv-permï¼‰</strong> ï¼šè´Ÿè´£åŸºç¡€æƒé™æ ¡éªŒï¼Œå¿«é€Ÿéšè—æ— æƒé™å…ƒç´ ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// æ³¨å†Œå…¨å±€æƒé™æŒ‡ä»¤
app.directive('perm', {
  mounted(el, binding) {
    const { value, arg } = binding<span class="hljs-comment">;</span>
    let <span class="hljs-attr">hasAccess</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

    // æ”¯æŒæƒé™ç æ ¡éªŒï¼ˆ<span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>ï¼‰å’Œè‡ªå®šä¹‰è§„åˆ™æ ¡éªŒï¼ˆv-perm:rule=<span class="hljs-string">"xxx"</span>ï¼‰
    if (<span class="hljs-attr">arg</span> === <span class="hljs-string">'rule'</span>) {
      const { name, args } = value<span class="hljs-comment">;</span>
      <span class="hljs-attr">hasAccess</span> = permissionCenter.checkCustomRule(name, ...args)<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">hasAccess</span> = permissionCenter.hasPermission(value)<span class="hljs-comment">;</span>
    }

    // æ— æƒé™æ—¶ç§»é™¤å…ƒç´ ï¼ˆé¿å…ç”¨æˆ·é€šè¿‡DOMæ“ä½œæ˜¾ç¤ºï¼‰
    if (!hasAccess) {
      el.parentNode?.removeChild(el)<span class="hljs-comment">;</span>
    }
  },
  // æƒé™æ›´æ–°æ—¶é‡æ–°æ ¡éªŒï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹æƒé™åï¼‰
  updated(el, binding) {
    // å¤ç”¨mountedé€»è¾‘ï¼Œé‡æ–°æ ¡éªŒæƒé™
    this.mounted(el, binding)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><strong>æƒé™ç»„ä»¶ï¼ˆPermissionWrapï¼‰</strong> ï¼šåº”å¯¹å¤æ‚åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆã€æƒé™å˜æ›´åˆ·æ–°ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- components/PermissionWrap.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasAccess"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> permissionCenter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/permissionCenter'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// æƒé™ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">perm</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è§’è‰²ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">role</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
  <span class="hljs-attr">customRule</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> }
});

<span class="hljs-comment">// æƒé™æ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">const</span> hasAccess = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æƒé™ç æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">perm</span>) {
    <span class="hljs-keyword">const</span> perms = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">perm</span>) ? props.<span class="hljs-property">perm</span> : [props.<span class="hljs-property">perm</span>];
    <span class="hljs-keyword">if</span> (!perms.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasPermission</span>(perm))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">role</span>) {
    <span class="hljs-keyword">const</span> roles = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">role</span>) ? props.<span class="hljs-property">role</span> : [props.<span class="hljs-property">role</span>];
    <span class="hljs-keyword">if</span> (!roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasRole</span>(role))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">customRule</span>) {
    <span class="hljs-keyword">const</span> { name, args } = props.<span class="hljs-property">customRule</span>;
    <span class="hljs-keyword">if</span> (!permissionCenter.<span class="hljs-title function_">checkCustomRule</span>(name, ...args)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ï¼ˆ3ï¼‰é¡µé¢ä¸­ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€æƒé™æŒ‰é’® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è§’è‰²+æƒé™ç»„åˆæ§åˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">perm</span>=<span class="hljs-string">"order:export"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"admin"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ‰¹é‡å¯¼å‡ºè®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¤æ‚è‡ªå®šä¹‰è§„åˆ™ï¼ˆä»…èƒ½æ“ä½œè‡ªå·±åˆ›å»ºçš„è®¢å•ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">:custom-rule</span>=<span class="hljs-string">"{ name: 'canOperateOrder', args: [order] }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"editOrder(order.id)"</span>&gt;</span>ç¼–è¾‘è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¡¨æ ¼åˆ—æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ‰‹æœºå·"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"permissionCenter.hasPermission('user:view:phone')"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"scope"</span>&gt;</span>{{ scope.row.phone }}<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šé€šè¿‡<code>v-perm</code>æŒ‡ä»¤æˆ–<code>PermissionWrap</code>ç»„ä»¶åŒ…è£…åŸæœ‰å…ƒç´ ï¼Œæ·»åŠ æƒé™æ§åˆ¶é€»è¾‘ï¼Œä¸ä¿®æ”¹å…ƒç´ æœ¬èº«ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
<li><strong>ç»„åˆæ¨¡å¼</strong>ï¼šå°†åŸºç¡€æƒé™æ ¡éªŒã€è§’è‰²æ ¡éªŒã€è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒç»„åˆä¸ºå¤æ‚æƒé™é€»è¾‘ï¼Œæ”¯æŒçµæ´»ç»„åˆä¸æ‰©å±•ã€‚</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæƒé™ä¸­å¿ƒï¼ˆPermissionCenterï¼‰é‡‡ç”¨å•ä¾‹è®¾è®¡ï¼Œç¡®ä¿å…¨åº”ç”¨æƒé™æ•°æ®ä¸€è‡´ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 data-id="heading-17">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>æƒé™ç  / è§’è‰²åˆ—è¡¨ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰+ localStorageï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œä¸è·¯ç”±æƒé™å…±ç”¨å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è‡ªå®šä¹‰è§„åˆ™ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒå®ä¾‹ä¸­ï¼ˆå†…å­˜ï¼‰ï¼Œåˆå§‹åŒ–æ—¶æ³¨å†Œï¼Œæ— éœ€æŒä¹…åŒ–ã€‚</li>
<li>æ ¡éªŒç»“æœç¼“å­˜ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒçš„<code>cache</code>å±æ€§ï¼ˆå†…å­˜ï¼‰ï¼Œé¡µé¢åˆ·æ–°åæ¸…ç©ºï¼Œé¿å…ç¼“å­˜è¿‡æœŸã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>é˜² DOM ç¯¡æ”¹ï¼šä»…ç”¨<code>v-if</code>éšè—å…ƒç´ ä¸å¤Ÿï¼Œéœ€ç”¨<code>el.remove()</code>å½»åº•ç§»é™¤ï¼Œé¿å…ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°ä¿®æ”¹ DOM æ˜¾ç¤ºæ— æƒé™å…ƒç´ ã€‚</li>
<li>äºŒæ¬¡æ ¡éªŒï¼šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­æ·»åŠ æƒé™äºŒæ¬¡æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡æ§åˆ¶å°è§¦å‘äº‹ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> handleDelete = (userId) =&gt; {
  <span class="hljs-keyword">if</span> (!permissionCenter.hasPermission(<span class="hljs-string">'user:delete'</span>)) {
    ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ— åˆ é™¤æƒé™'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ‰§è¡Œåˆ é™¤é€»è¾‘</span>
};
</code></pre>
<ul>
<li>æƒé™æ›´æ–°åŒæ­¥ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯è°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æƒé™æ•°æ®ï¼Œè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<h2 data-id="heading-20">ä¸‰ã€æ¥å£æƒé™ï¼šç³»ç»Ÿå®‰å…¨çš„ â€œæœ€åä¸€é“é˜²çº¿â€</h2>
<h3 data-id="heading-21">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•æ„Ÿæ“ä½œæ¥å£æ§åˆ¶</strong>ï¼š<code>/api/user/delete</code>ï¼ˆåˆ é™¤ç”¨æˆ·ï¼‰ã€<code>/api/order/update-status</code>ï¼ˆä¿®æ”¹è®¢å•çŠ¶æ€ï¼‰ç­‰é«˜å±æ¥å£ï¼Œä»…æˆæƒè§’è‰²å¯è°ƒç”¨ã€‚</li>
<li><strong>æ•°æ®èŒƒå›´æƒé™</strong>ï¼š<code>/api/order/list</code>æ¥å£ï¼Œç®¡ç†å‘˜è¿”å›æ‰€æœ‰è®¢å•ï¼Œæ™®é€šç”¨æˆ·ä»…è¿”å›è‡ªå·±åˆ›å»ºçš„è®¢å•ã€‚</li>
<li><strong>æ¥å£é¢‘ç‡é™åˆ¶</strong>ï¼šå…è´¹ç”¨æˆ·è°ƒç”¨<code>/api/search</code>æ¥å£æ¯åˆ†é’Ÿæœ€å¤š 10 æ¬¡ï¼Œä»˜è´¹ç”¨æˆ·æ— é™åˆ¶ã€‚</li>
<li><strong>æ¥å£ç‰ˆæœ¬æƒé™</strong>ï¼šæ–°ç‰ˆæœ¬æ¥å£ï¼ˆå¦‚<code>/api/v2/order</code>ï¼‰ä»…å¯¹å·²å‡çº§ç‰ˆæœ¬çš„ç§Ÿæˆ·å¼€æ”¾ã€‚</li>
<li><strong>Token å¤±æ•ˆ / æƒé™å˜æ›´å¤„ç†</strong>ï¼šToken è¿‡æœŸæˆ–æƒé™è¢«å›æ”¶æ—¶ï¼Œæ¥å£è¿”å› 403/401ï¼Œå‰ç«¯éœ€ä¼˜é›…å¤„ç†ï¼ˆå¦‚ç™»å‡ºã€åˆ·æ–° Tokenï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-23">ï¼ˆ1ï¼‰è¯·æ±‚ / å“åº”æ‹¦æˆªå™¨çš„å…¨é“¾è·¯æ§åˆ¶</h4>
<ul>
<li><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong>ï¼šæ·»åŠ  Tokenã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. æ·»åŠ Tokenï¼ˆé‰´æƒåŸºç¡€ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }

    <span class="hljs-comment">// 2. æ¥å£æƒé™é¢„åˆ¤ï¼ˆå‡å°‘æ— æ•ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">const</span> { url, method } = config;
    <span class="hljs-comment">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆå¦‚"DELETE:/api/user/delete" â†’ "user:delete"ï¼‰</span>
    <span class="hljs-keyword">const</span> apiPerm = <span class="hljs-title function_">generateApiPermissionKey</span>(method, url);
    <span class="hljs-keyword">if</span> (apiPerm &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasPermission</span>(apiPerm)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æ¥å£æƒé™ï¼š<span class="hljs-subst">${apiPerm}</span>`</span>));
    }

    <span class="hljs-comment">// 3. æ•°æ®èŒƒå›´å‚æ•°ï¼ˆé…åˆåç«¯è¿‡æ»¤ï¼‰</span>
    <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/order/list'</span>) &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasRole</span>(<span class="hljs-string">'admin'</span>)) {
      config.<span class="hljs-property">params</span> = { ...config.<span class="hljs-property">params</span>, <span class="hljs-attr">creatorId</span>: store.<span class="hljs-property">getters</span>.<span class="hljs-property">userId</span> };
    }

    <span class="hljs-comment">// 4. å¹‚ç­‰æ€§å¤„ç†ï¼ˆæ•æ„Ÿæ¥å£é˜²é‡å¤è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> ([<span class="hljs-string">'POST'</span>, <span class="hljs-string">'PUT'</span>, <span class="hljs-string">'DELETE'</span>].<span class="hljs-title function_">includes</span>(method)) {
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">'X-Request-Id'</span>] = <span class="hljs-title function_">uuidv4</span>();
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);
</code></pre>
<ul>
<li><strong>å“åº”æ‹¦æˆªå™¨</strong>ï¼šå¤„ç†æƒé™å¼‚å¸¸ã€Token å¤±æ•ˆï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">axios.interceptors.response.use(
  (response) =&gt; {
    <span class="hljs-comment">// ç¼“å­˜é¢‘ç¹è°ƒç”¨çš„éæ•æ„Ÿæ¥å£ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (response.config.url === <span class="hljs-string">'/api/user/info'</span> &amp;&amp; response.status === <span class="hljs-number">200</span>) {
      store.dispatch(<span class="hljs-string">'cacheUserInfo'</span>, response.data);
    }
    <span class="hljs-keyword">return</span> response;
  },
  (<span class="hljs-type">error</span>) =&gt; {
    <span class="hljs-keyword">const</span> { status, data } = <span class="hljs-type">error</span>.response || {};
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
        <span class="hljs-comment">// Tokenå¤±æ•ˆï¼Œç™»å‡ºå¹¶è·³è½¬ç™»å½•é¡µ</span>
        ElMessage.<span class="hljs-type">error</span>(data.msg || <span class="hljs-string">'ç™»å½•å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        store.dispatch(<span class="hljs-string">'logout'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
        <span class="hljs-comment">// åŒºåˆ†æ¥å£æƒé™ä¸è¶³å’Œæ•°æ®æƒé™ä¸è¶³</span>
        <span class="hljs-keyword">const</span> msg = data.msg || <span class="hljs-string">'æ— æ¥å£è®¿é—®æƒé™'</span>;
        ElMessage.<span class="hljs-type">error</span>(msg);
        <span class="hljs-comment">// æ•æ„Ÿæ“ä½œæƒé™ä¸è¶³ï¼Œå¯è®°å½•æ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (msg.includes(<span class="hljs-string">'æ•æ„Ÿæ“ä½œ'</span>)) {
          reportPermissionError({ url: <span class="hljs-type">error</span>.config.url, msg });
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">429</span>:
        ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ¥å£è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'</span>);
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-type">error</span>);
  }
);
</code></pre>
<h4 data-id="heading-24">ï¼ˆ2ï¼‰æ¥å£æƒé™æ ‡è¯†ç”Ÿæˆè§„åˆ™</h4>
<p>ç»Ÿä¸€æ¥å£ä¸æƒé™ç çš„æ˜ å°„å…³ç³»ï¼Œé¿å…æ··ä¹±ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆmethod + æ¥å£è·¯å¾„ç®€åŒ–ï¼‰
const <span class="hljs-attr">generateApiPermissionKey</span> = (method, url) =&gt; {
  // ç¤ºä¾‹ï¼šDELETE /api/user/123 â†’ user:delete
  // ç¤ºä¾‹ï¼šGET /api/order/list â†’ order:list
  const <span class="hljs-attr">pathParts</span> = url.replace(/^/api//, <span class="hljs-string">''</span>).split(<span class="hljs-string">'/'</span>)<span class="hljs-comment">;</span>
  if (<span class="hljs-attr">pathParts.length</span> === <span class="hljs-number">0</span>) return <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">resource</span> = pathParts[<span class="hljs-number">0</span>]<span class="hljs-comment">; // èµ„æºåï¼ˆuser/orderï¼‰</span>
  let <span class="hljs-attr">action</span> = method.toLowerCase()<span class="hljs-comment">; // æ“ä½œï¼ˆget/post/deleteï¼‰</span>
  // ç‰¹æ®Šæ˜ å°„ï¼šgetåˆ—è¡¨ â†’ listï¼Œgetè¯¦æƒ… â†’ view
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.includes(<span class="hljs-string">'list'</span>)) action = <span class="hljs-string">'list'</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.length &gt;= <span class="hljs-number">2</span> &amp;&amp; !isNaN(pathParts[<span class="hljs-number">1</span>])) action = <span class="hljs-string">'view'</span><span class="hljs-comment">;</span>
  return `${resource}:${action}`<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-25">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šè¯·æ±‚æ‹¦æˆªå™¨ä½œä¸ºæ¥å£è°ƒç”¨çš„ä»£ç†ï¼Œç»Ÿä¸€æ·»åŠ é‰´æƒä¿¡æ¯ã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼Œä¸ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚ä»£ç ã€‚</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šåç«¯æ¥å£æ ¡éªŒæŒ‰ â€œToken æ ¡éªŒâ†’æƒé™ç æ ¡éªŒâ†’æ•°æ®èŒƒå›´æ ¡éªŒâ†’é¢‘ç‡é™åˆ¶â€ çš„é¡ºåºæ‰§è¡Œï¼Œå‰ç«¯å“åº”æ‹¦æˆªå™¨æŒ‰ â€œ401 å¤„ç†â†’403 å¤„ç†â†’429 å¤„ç†â€ é¡ºåºå¤„ç†å¼‚å¸¸ã€‚</li>
<li><strong>ç¼“å­˜æ¨¡å¼</strong>ï¼šå¯¹éæ•æ„Ÿæ¥å£ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼Œæå‡æ€§èƒ½ï¼ˆéœ€åœ¨æƒé™å˜æ›´æ—¶æ¸…ç©ºç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorageï¼ˆæŒä¹…åŒ–ï¼‰æˆ– sessionStorageï¼ˆä¼šè¯çº§ï¼‰ï¼Œå»ºè®®è®¾ç½®<code>HttpOnly</code>å’Œ<code>Secure</code>å±æ€§ï¼ˆéœ€åç«¯é…åˆï¼‰ï¼Œé˜²æ­¢ XSS æ”»å‡»ã€‚</li>
<li>æ¥å£æƒé™æ ‡è¯†æ˜ å°„è§„åˆ™ï¼šå‰ç«¯é¢„è®¾ï¼ˆå¦‚<code>user:delete</code>å¯¹åº”<code>/api/user/delete</code>ï¼‰ï¼Œæ— éœ€æŒä¹…åŒ–ï¼Œç¡®ä¿ä¸åç«¯ä¸€è‡´ã€‚</li>
<li>æ¥å£ç¼“å­˜ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œç¼“å­˜ key åŒ…å«ç”¨æˆ· ID å’Œæƒé™æ ‡è¯†ï¼Œé¿å…å¤šç”¨æˆ·æ•°æ®æ··æ·†ã€‚</li>
</ul>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>åç«¯ç»å¯¹æ ¡éªŒï¼šå‰ç«¯æƒé™é¢„åˆ¤ä»…ä¸ºä½“éªŒä¼˜åŒ–ï¼Œåç«¯å¿…é¡»å¯¹æ¯ä¸ªæ¥å£åšç‹¬ç«‹æƒé™æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡ Postman ç­‰å·¥å…·ç»•è¿‡å‰ç«¯æ‹¦æˆªã€‚</li>
<li>Token åŠ å¯†ä¼ è¾“ï¼šæ‰€æœ‰æ¥å£é‡‡ç”¨ HTTPS åè®®ï¼ŒToken åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œé¿å…ä¸­é—´äººæ”»å‡»ã€‚</li>
<li>æ•æ„Ÿæ¥å£äºŒæ¬¡éªŒè¯ï¼šæ ¸å¿ƒæ¥å£ï¼ˆå¦‚åˆ é™¤ç”¨æˆ·ã€è½¬è´¦ï¼‰éœ€æ·»åŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚è¾“å…¥å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ï¼‰ï¼Œå³ä½¿æƒé™æ ¡éªŒé€šè¿‡ï¼Œä¹Ÿéœ€ç¡®è®¤æ“ä½œæ„å›¾ã€‚</li>
<li>æƒé™æ—¥å¿—è®°å½•ï¼šå‰ç«¯è°ƒç”¨æ•æ„Ÿæ¥å£æ—¶ï¼Œä¼ é€’æ“ä½œäººã€æ“ä½œæ—¶é—´ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œåç«¯å­˜å‚¨æ—¥å¿—ï¼Œä¾¿äºå®‰å…¨è¿½æº¯ã€‚</li>
</ul>
<h2 data-id="heading-29">å››ã€é™è®¾è®¡çš„é¢å¤–å…³é”®è¦ç‚¹</h2>
<h3 data-id="heading-30">1. æƒé™å¯è§†åŒ–é…ç½®</h3>
<ul>
<li>ç®¡ç†å‘˜é€šè¿‡ç³»ç»Ÿåå°çš„ â€œæƒé™é…ç½®é¡µé¢â€ï¼Œå‹¾é€‰è§’è‰²å¯¹åº”çš„æƒé™ï¼ˆå¦‚ â€œç”¨æˆ·ç®¡ç†â€â†’â€œåˆ é™¤ç”¨æˆ·â€ï¼‰ï¼Œåç«¯å­˜å‚¨è§’è‰² - æƒé™æ˜ å°„å…³ç³»ã€‚</li>
<li>å‰ç«¯æ¸²æŸ“ â€œæƒé™æ ‘â€ï¼Œæ”¯æŒæŒ‰æ¨¡å—æŠ˜å  / å±•å¼€ï¼Œä¾¿äºç®¡ç†å‘˜æ“ä½œï¼›æ”¯æŒæ‰¹é‡åˆ†é…æƒé™ï¼ˆå¦‚ç»™ â€œè¿è¥â€ è§’è‰²åˆ†é…æ‰€æœ‰è®¢å•ç›¸å…³æƒé™ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-31">2. æƒé™åŠ¨æ€æ›´æ–°ä¸åŒæ­¥</h3>
<ul>
<li>ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯é€šè¿‡ WebSocket æˆ–è½®è¯¢å®æ—¶è·å–æœ€æ–°æƒé™ï¼Œè°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æ•°æ®ï¼Œæ— éœ€ç”¨æˆ·åˆ·æ–°é¡µé¢ã€‚</li>
<li>è·¨æ ‡ç­¾é¡µæƒé™åŒæ­¥ï¼šé€šè¿‡<code>localStorage</code>ç›‘å¬äº‹ä»¶ï¼Œä¸€ä¸ªæ ‡ç­¾é¡µä¿®æ”¹æƒé™åï¼Œå…¶ä»–æ ‡ç­¾é¡µè‡ªåŠ¨æ›´æ–°æƒé™çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-32">3. è·¨ç«¯æƒé™ç»Ÿä¸€ç®¡ç†</h3>
<ul>
<li>è‹¥é¡¹ç›®åŒ…å« PC ç«¯ã€ç§»åŠ¨ç«¯ã€å°ç¨‹åºï¼Œè®¾è®¡ç»Ÿä¸€çš„æƒé™ä¸­å¿ƒï¼ˆåç«¯ï¼‰ï¼Œå„ç«¯å…±ç”¨ä¸€å¥—æƒé™ç å’Œè§’è‰²ä½“ç³»ï¼ˆå¦‚<code>user:delete</code>åœ¨æ‰€æœ‰ç«¯å«ä¹‰ä¸€è‡´ï¼‰ã€‚</li>
<li>å‰ç«¯å„ç«¯å¤ç”¨æƒé™æ ¡éªŒé€»è¾‘ï¼ˆå¦‚<code>permissionCenter</code>å·¥å…·ç±»ï¼‰ï¼Œç¡®ä¿æƒé™æ§åˆ¶è¡Œä¸ºä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-33">4. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æƒé™æ ¡éªŒç¼“å­˜ï¼šå¯¹é¢‘ç¹æ ¡éªŒçš„æƒé™ç ï¼ˆå¦‚è¡¨æ ¼åˆ—æƒé™ï¼‰è¿›è¡Œç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li>åŠ¨æ€è·¯ç”±æ‡’åŠ è½½ï¼šåŠ¨æ€æ·»åŠ çš„è·¯ç”±ç»„ä»¶é‡‡ç”¨æ‡’åŠ è½½ï¼ˆ<code>() =&gt; import('../views/xxx.vue')</code>ï¼‰ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li>
<li>æƒé™æ•°æ®æ‰¹é‡è¯·æ±‚ï¼šç™»å½•åä¸€æ¬¡æ€§è·å–ç”¨æˆ·è§’è‰²ã€æƒé™ç ã€è·¯ç”±é…ç½®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚åç«¯ã€‚</li>
</ul>
<h3 data-id="heading-34">5. ç°åº¦å‘å¸ƒä¸ A/B æµ‹è¯•</h3>
<ul>
<li>æƒé™ä¸­å¿ƒæ”¯æŒ â€œç°åº¦è§„åˆ™â€ï¼Œå¦‚ â€œç”¨æˆ· ID åœ¨ç™½åå•å†…â€â€œéƒ¨é—¨ä¸ºæµ‹è¯•éƒ¨â€ çš„ç”¨æˆ·å¯è®¿é—®æ–°åŠŸèƒ½è·¯ç”±å’ŒæŒ‰é’®ã€‚</li>
<li>é€šè¿‡æƒé™é…ç½®å®ç° A/B æµ‹è¯•ï¼Œç»™ä¸åŒç”¨æˆ·ç»„åˆ†é…ä¸åŒæƒé™ï¼ŒéªŒè¯åŠŸèƒ½æ•ˆæœåå…¨é‡å¼€æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-35">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-36">1. æƒé™è®¾è®¡çš„ä¸‰å±‚é€»è¾‘</h3>
<ul>
<li>å‰ç«¯è·¯ç”±æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦è®¿é—®é¡µé¢â€ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ã€‚</li>
<li>å‰ç«¯å…ƒç´ æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦çœ‹åˆ°åŠŸèƒ½â€ï¼Œéšè—æ— æƒé™å…ƒç´ ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘ã€‚</li>
<li>åç«¯æ¥å£æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦æ‰§è¡Œæ“ä½œâ€ï¼Œæ˜¯å®‰å…¨æ ¸å¿ƒï¼Œå¿…é¡»ç»å¯¹å¯é ã€‚</li>
</ul>
<h3 data-id="heading-37">2. å®‰å…¨æ€§åŸåˆ™</h3>
<ul>
<li>å‰ç«¯æƒé™æ˜¯ â€œä½“éªŒå±‚â€ï¼Œä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼›åç«¯æƒé™æ˜¯ â€œå®‰å…¨å±‚â€ï¼Œå¿…é¡»è¦†ç›–æ‰€æœ‰æ•æ„Ÿæ“ä½œã€‚</li>
<li>æ•æ„Ÿä¿¡æ¯ï¼ˆTokenã€æƒé™æ ‡è¯†ï¼‰éœ€åŠ å¯†å­˜å‚¨å’Œä¼ è¾“ï¼Œé˜²æ­¢æ³„éœ²ã€‚</li>
<li>æƒé™å˜æ›´éœ€å®æ—¶åŒæ­¥ï¼Œé¿å…æƒé™ä¸ä¸€è‡´å¯¼è‡´çš„å®‰å…¨éšæ‚£ã€‚</li>
</ul>
<h3 data-id="heading-38">3. å¯æ‰©å±•æ€§åŸåˆ™</h3>
<ul>
<li>é‡‡ç”¨è®¾è®¡æ¨¡å¼ï¼ˆå¦‚è´£ä»»é“¾ã€è£…é¥°å™¨ã€å•ä¾‹ï¼‰é™ä½ä»£ç è€¦åˆï¼Œä¾¿äºåæœŸæ‰©å±•æƒé™è§„åˆ™ã€‚</li>
<li>é¢„ç•™è‡ªå®šä¹‰æƒé™è§„åˆ™æ¥å£ï¼Œåº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆæƒé™ï¼‰ã€‚</li>
<li>æƒé™é…ç½®å¯è§†åŒ–ã€åŠ¨æ€åŒ–ï¼Œå‡å°‘å‰ç«¯å‘ç‰ˆé¢‘ç‡ï¼Œæå‡è¿è¥æ•ˆç‡ã€‚</li>
</ul>
<p>é¡¹ç›®ä¸­ï¼Œæƒé™è®¾è®¡å¹¶éä¸€æˆä¸å˜ï¼Œéœ€æ ¹æ®ä¸šåŠ¡è§„æ¨¡å’Œå®‰å…¨è¦æ±‚é€æ­¥è¿­ä»£ï¼šåˆæœŸå¯é‡‡ç”¨ â€œè§’è‰² + é™æ€æƒé™â€ï¼Œä¸­æœŸå¼•å…¥ â€œæƒé™ç  + åŠ¨æ€è·¯ç”±â€ï¼ŒåæœŸå‡çº§ä¸º â€œå¯è§†åŒ–é…ç½® + ç»†ç²’åº¦æ•°æ®æƒé™â€ï¼Œæœ€ç»ˆå®ç° â€œå®‰å…¨ã€çµæ´»ã€æ˜“ç»´æŠ¤â€ çš„æƒé™ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è]]></title>    <link>https://juejin.cn/post/7576852209565106203</link>    <guid>https://juejin.cn/post/7576852209565106203</guid>    <pubDate>2025-11-26T09:14:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576852209565106203" data-draft-id="7576852209565089819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-26T09:14:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å‡Œè§ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3350967174565198"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€é”®å»æ°´å°ï½œ5 æ¬¾å…è´¹å°çº¢ä¹¦è§£æå·¥å…·æ¨è
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3350967174565198/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å‡Œè§ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:14:28.000Z" title="Wed Nov 26 2025 09:14:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åˆ·çŸ­è§†é¢‘æ—¶ï¼Œçœ‹åˆ°å–œæ¬¢çš„å†…å®¹æƒ³å­˜åˆ°æ‰‹æœºé‡Œï¼Œç»“æœç‚¹"ä¿å­˜"å´æç¤º"ä¸å…è®¸"ï¼Ÿåˆ«æ…Œï¼Œä¸æ˜¯æ‰‹æœºåäº†ï¼Œè€Œæ˜¯ä½œè€…æˆ–å¹³å°æŠŠä¸‹è½½å¼€å…³å…³æ‰äº†ã€‚ä¸‹é¢æ•™ä½ å‡ æ‹›ï¼Œç…§æ ·èƒ½æŠŠè§†é¢‘"æ•‘"å›æ¥â€”â€”é€‚ç”¨äºæŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰ä¸»æµ Appï¼Œå…¨ç¨‹å¤§ç™½è¯ï¼Œä¸€çœ‹å°±ä¼šã€‚</p>
<h2 data-id="heading-1">äºŒã€<strong>ç›´æ¥ä¿å­˜åˆ°ç›¸å†Œ</strong></h2>
<p>å¯¹äºæœªé™åˆ¶ä¸‹è½½æƒé™çš„è§†é¢‘ï¼Œæ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>ç‚¹å‡»<strong>åˆ†äº«</strong>æŒ‰é’®ã€‚</li>
<li>åœ¨å¼¹å‡ºçš„é€‰é¡¹ä¸­ï¼Œé€‰æ‹©<strong>ä¿å­˜åˆ°ç›¸å†Œ</strong>ã€‚</li>
<li>è§†é¢‘ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æ‰‹æœºç›¸å†Œä¸­ã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€<strong>æ— æ³•ç›´æ¥ä¿å­˜çš„è§†é¢‘</strong></h2>
<p>æœ‰äº›è§†é¢‘å› åˆ›ä½œè€…è®¾ç½®äº†"ç¦æ­¢ä¸‹è½½"åŠŸèƒ½ï¼Œ<strong>ä¿å­˜åˆ°ç›¸å†Œ</strong>æŒ‰é’®ä¼šæ˜¾ç¤ºä¸ºç°è‰²ï¼Œæ— æ³•ç›´æ¥ç‚¹å‡»ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<h3 data-id="heading-3">1. å±å¹•å½•åˆ¶</h3>
<ul>
<li>åˆ©ç”¨æ‰‹æœºè‡ªå¸¦çš„å±å¹•å½•åˆ¶åŠŸèƒ½ï¼Œæ‰‹åŠ¨å½•åˆ¶è§†é¢‘å†…å®¹ã€‚</li>
<li>ç¼ºç‚¹ï¼šå¯èƒ½éœ€è¦åç»­è£å‰ªå¤šä½™çš„å†…å®¹ã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>2. å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·</strong></h3>
<p>ä¸‹é¢å‡ ä¸ªåœ¨çº¿å·¥å…·äº²æµ‹å¯ç”¨ï¼Œæ”¯æŒæŠ–éŸ³ + å°çº¢ä¹¦ã€‚è¯·æŒ‰éœ€é€‰æ‹©ï¼Œç”¨å®Œå³èµ°ï¼š</p>









































<table><thead><tr><th>å·¥å…·åç§° &amp; å…¥å£</th><th>æ”¯æŒå¹³å°</th><th>é€Ÿåº¦/ç¨³å®šæ€§</th><th>ç‰¹è‰²å°åŠŸèƒ½</th></tr></thead><tbody><tr><td><strong>å»æ°´å°ä¸‹è½½é¸­</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fnologo.code24.top%2F" target="_blank" title="https://nologo.code24.top/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fnologo.code24.top" target="_blank" title="https://nologo.code24.top" ref="nofollow noopener noreferrer">nologo.code24.top</a></td><td>æŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰</td><td>å¿«ï¼ˆCDN å›½å†…åŒçº¿ï¼‰</td><td>æµè§ˆå™¨æ’ä»¶+å°ç¨‹åºï¼›è‡ªåŠ¨è¯†åˆ«å‰ªè´´æ¿</td></tr><tr><td><strong>å°çº¢ä¹¦ä¸“ç”¨ä¸‹è½½</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xhs-download.online%2F" target="_blank" title="https://www.xhs-download.online/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xhs-download.online" target="_blank" title="https://www.xhs-download.online" ref="nofollow noopener noreferrer">www.xhs-download.online</a></td><td>ä»…å°çº¢ä¹¦</td><td>æå¿«ï¼ˆèŠ‚ç‚¹åœ¨é¦™æ¸¯ï¼Œæ™šé«˜å³°ä¹Ÿç¨³ï¼‰</td><td>ä¸“æ³¨å°çº¢ä¹¦é«˜æ¸…å»æ°´å°ä¸‹è½½</td></tr><tr><td><strong>ä¸‹è½½ç‹—</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiazaitool.com%2Fxhs" target="_blank" title="https://www.xiazaitool.com/xhs" ref="nofollow noopener noreferrer">www.xiazaitool.com/xhs</a></td><td>æŠ–éŸ³ã€å°çº¢ä¹¦ã€å¿«æ‰‹ç­‰</td><td>ä¸­ç­‰ï¼ˆæ•™è‚²ç½‘å¯ç”¨ï¼‰</td><td>è½»é‡çº§å°çº¢ä¹¦å»æ°´å°ç¥å™¨ï¼Œå›¾ç‰‡ã€è§†é¢‘ä¸€é”®åœ¨çº¿å»æ°´å°ï¼›æ— å¹¿å‘Š</td></tr><tr><td><strong>å°çº¢åˆ·</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaohongshua.com%2F" target="_blank" title="https://www.xiaohongshua.com/" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.xiaohongshua.com" target="_blank" title="https://www.xiaohongshua.com" ref="nofollow noopener noreferrer">www.xiaohongshua.com</a></td><td>ä»…å°çº¢ä¹¦</td><td>å¿«</td><td>ç•Œé¢æç®€ï¼Œä¸‰æ­¥æå®š</td></tr><tr><td>RedNote è§†é¢‘ä¸‹è½½å™¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rednote-downloader.com%2Fzh" target="_blank" title="https://www.rednote-downloader.com/zh" ref="nofollow noopener noreferrer">www.rednote-downloader.com/zh</a></td><td>ä»…å°çº¢ä¹¦</td><td>å¿«</td><td>ç•Œé¢æç®€</td></tr></tbody></table>
<p><strong>ä½¿ç”¨æµç¨‹ï¼ˆå¤§åŒå°å¼‚ï¼‰ï¼š</strong></p>
<ol>
<li>åœ¨ App é‡Œç‚¹"åˆ†äº« â†’ å¤åˆ¶é“¾æ¥"</li>
<li>æŠŠé“¾æ¥ç²˜è´´åˆ°å¯¹åº”ç½‘é¡µçš„è¾“å…¥æ¡†</li>
<li>ç­‰å¾… 3-5 ç§’å‡ºç°ä¸‹è½½æŒ‰é’® â†’ å³é”®/é•¿æŒ‰ä¿å­˜å³å¯</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•]]></title>    <link>https://juejin.cn/post/7576838552471224363</link>    <guid>https://juejin.cn/post/7576838552471224363</guid>    <pubDate>2025-11-26T08:37:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838552471224363" data-draft-id="7576838552471207979" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•"/> <meta itemprop="keywords" content="æ•°æ®åº“,åç«¯"/> <meta itemprop="datePublished" content="2025-11-26T08:37:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ«å¶æ¢¨èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123816055"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ Kettle ä¸­æ–‡ä¹±ç å†™å…¥å¤±è´¥çš„å®Œæ•´æ’æŸ¥å®å½•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123816055/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ«å¶æ¢¨èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:37:44.000Z" title="Wed Nov 26 2025 08:37:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©åœ¨ç”¨ Kettleï¼ˆPDIï¼‰åšæ•°æ®è¿ç§»æ—¶ï¼Œè¸©äº†ä¸€ä¸ªå…¸å‹çš„ä¸­æ–‡ç¼–ç å‘ã€‚é”™è¯¯ä¿¡æ¯çœ‹èµ·æ¥æŒºå“äººï¼š</p>
<pre><code class="hljs language-sql" lang="sql">Incorrect string <span class="hljs-keyword">value</span>: <span class="hljs-string">'\xC9\xDC\xD0\xCB\xCA\xD0...'</span> <span class="hljs-keyword">for</span> <span class="hljs-keyword">column</span> <span class="hljs-string">'content'</span> <span class="hljs-keyword">at</span> <span class="hljs-type">row</span> <span class="hljs-number">1</span>
</code></pre>
<p>ä¹ä¸€çœ‹ä»¥ä¸ºæ˜¯ç›®æ ‡åº“å­—ç¬¦é›†é—®é¢˜ï¼Œç»“æœä¸€è·¯æ’æŸ¥ä¸‹æ¥ï¼Œå‘ç°æ ¹æºè—å¾—ç‰¹åˆ«æ·±ã€‚ä»Šå¤©æŠŠæ•´ä¸ªè¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°é‡åˆ°åŒæ ·é—®é¢˜çš„æœ‹å‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">èµ·å› ï¼šä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„æ•°æ®åŒæ­¥ä»»åŠ¡</h2>
<p>æˆ‘çš„ä»»åŠ¡å¾ˆæ˜ç¡®ï¼š</p>
<ul>
<li><strong>æºåº“</strong>ï¼šMySQL 8.0ï¼ŒIP <code>180.23.1.1:3306</code>ï¼Œåº“å <code>oldtest</code></li>
<li><strong>ç›®æ ‡åº“</strong>ï¼šå¦ä¸€ä¸ª MySQL 8.0 å®ä¾‹ï¼Œç«¯å£ <code>3315</code>ï¼Œåº“å <code>newtest</code></li>
<li><strong>å·¥å…·</strong>ï¼šKettle 7.1ï¼ˆåˆ«é—®ä¸ºä»€ä¹ˆä¸ç”¨æ–°ç‰ˆï¼Œè€é¡¹ç›®ï¼‰</li>
</ul>
<p>ä¸¤ä¸ªè¡¨ç»“æ„å‡ ä¹ä¸€æ ·ï¼Œ<code>content</code> å­—æ®µéƒ½æ˜¯ <code>LONGTEXT</code> ç±»å‹ã€‚æˆ‘ä»¥ä¸ºç›´æ¥â€œè¡¨è¾“å…¥ â†’ è¡¨è¾“å‡ºâ€å°±èƒ½æå®šï¼Œç»“æœä¸€è·‘å°±æŠ¥é”™ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€é˜¶æ®µï¼šè¯¯åˆ¤ä¸ºè¿æ¥å‚æ•°æ ¼å¼é”™è¯¯</h2>
<p>æœ€åˆæŠ¥çš„é”™æ ¹æœ¬ä¸æ˜¯ç¼–ç é—®é¢˜ï¼Œè€Œæ˜¯ï¼š</p>
<pre><code class="hljs language-python" lang="python">Invalid ID <span class="hljs-keyword">for</span> region-based ZoneId, invalid <span class="hljs-built_in">format</span>: Asia/Shanghai;Driver <span class="hljs-keyword">class</span>=...
</code></pre>
<p>æˆ‘ä¸€å¼€å§‹å®Œå…¨æ‡µäº†ï¼šæ˜æ˜ URL å†™å¾—å¥½å¥½çš„ï¼Œæ€ä¹ˆ driver class è¢«æ‹¼è¿›å‚æ•°å€¼é‡Œäº†ï¼Ÿ</p>
<p>ğŸ” <strong>æ’æŸ¥è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>åå¤æ£€æŸ¥ Custom URLï¼Œç¡®è®¤æ²¡æœ‰å¤šä½™å­—ç¬¦</li>
<li>çªç„¶æƒ³åˆ°ï¼šä¼šä¸ä¼šæ˜¯ â€œOptionsâ€ è¡¨æ ¼é‡Œå†™äº†ä¸œè¥¿ï¼Ÿ</li>
<li>æ‰“å¼€ä¸€çœ‹â€”â€”æœç„¶ï¼ä¹‹å‰æµ‹è¯•æ—¶éšæ‰‹åœ¨ Options é‡Œå¡«è¿‡ä¸€è¡Œï¼ŒValue åˆ—ä¸å°å¿ƒç²˜è´´è¿›äº† <code>Driver class=...</code> è¿™ç§éæ³•å†…å®¹</li>
</ul>
<p>âœ… <strong>è§£å†³</strong>ï¼šæ¸…ç©º Options è¡¨æ ¼ï¼Œæ‰€æœ‰å‚æ•°ç»Ÿä¸€å†™è¿› Custom URLï¼Œç”¨ <code>&amp;</code> åˆ†éš”ã€‚</p>
<p>æ•™è®­ï¼š<strong>Kettle çš„ Options è¡¨æ ¼å’Œ Custom URL æ˜¯åˆå¹¶ä½¿ç”¨çš„ï¼Œè„æ•°æ®ä¼šæ±¡æŸ“æ•´ä¸ªè¿æ¥ä¸²</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ç¬¬äºŒé˜¶æ®µï¼šçœŸæ­£çš„æ•Œäººâ€”â€”ä¸­æ–‡ç¼–ç é—®é¢˜æµ®å‡ºæ°´é¢</h2>
<p>æ¸…ç†å®Œè¿æ¥å‚æ•°åï¼Œèƒ½è¿ä¸Šæ•°æ®åº“äº†ï¼Œä½†ä¸€å†™æ•°æ®å°±æŠ¥ï¼š</p>
<pre><code class="hljs language-c" lang="c">Incorrect <span class="hljs-built_in">string</span> value: <span class="hljs-string">'\xC9\xDC\xD0\xCB\xCA\xD0...'</span> <span class="hljs-keyword">for</span> column <span class="hljs-string">'content'</span>
</code></pre>
<p><code>\xC9\xDC</code> æ˜¯å•¥ï¼ŸæŸ¥äº†ä¸€ä¸‹ï¼Œè¿™æ˜¯ GBK ç¼–ç ä¸‹â€œæ·±â€å­—çš„åå…­è¿›åˆ¶ã€‚è¯´æ˜æ•°æ®æºé‡Œå­˜çš„æ˜¯ GBK å­—èŠ‚ï¼Œä½† MySQL å½“ UTF8 è§£æï¼Œè‡ªç„¶å¤±è´¥ã€‚</p>
<p>ğŸ” <strong>åˆæ­¥åˆ¤æ–­</strong>ï¼š</p>
<ul>
<li>æºè¡¨å£°æ˜æ˜¯ <code>utf8</code>ï¼Œä½†å®é™…å­˜çš„æ˜¯ GBK æ•°æ®ï¼ˆå†å²é—ç•™ï¼‰</li>
<li>ç›®æ ‡è¡¨æ˜¯ <code>utf8mb4</code>ï¼Œç†è®ºä¸Šå…¼å®¹ï¼Œä½†å‰ææ˜¯ä¼ å…¥çš„æ˜¯åˆæ³• UTF8 å­—ç¬¦ä¸²</li>
</ul>
<p>äºæ˜¯æˆ‘åœ¨ä¸¤ä¸ªè¿æ¥é‡Œåˆ†åˆ«åŠ äº†ç¼–ç å‚æ•°ï¼š</p>
<ul>
<li>æºåº“ï¼š<code>characterEncoding=GBK</code></li>
<li>ç›®æ ‡åº“ï¼š<code>characterEncoding=utf8</code></li>
</ul>
<p>ä½†è¿˜æ˜¯å¤±è´¥ï¼</p>
<hr/>
<h2 data-id="heading-3">ç¬¬ä¸‰é˜¶æ®µï¼šè¢«å¿½ç•¥çš„å…³é”®å‚æ•°â€”â€”useUnicode=true</h2>
<p>è¿™æ—¶å€™æˆ‘å¼€å§‹æ€€ç–‘äººç”Ÿï¼šé…ç½®æ˜æ˜æ²¡é”™ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¸è¡Œï¼Ÿ</p>
<p>çµæœºä¸€åŠ¨ï¼Œæƒ³èµ·ä»¥å‰çœ‹è¿‡ MySQL JDBC æ–‡æ¡£æåˆ°ï¼š<strong>ä» 5.1 å¼€å§‹ï¼Œå¿…é¡»æ˜¾å¼å¼€å¯ Unicode æ”¯æŒï¼Œå¦åˆ™ characterEncoding å¯èƒ½è¢«å¿½ç•¥</strong>ã€‚</p>
<p>èµ¶ç´§åŠ ä¸Š <code>useUnicode=true</code>ï¼š</p>
<pre><code class="hljs language-text" lang="text"># æºåº“
jdbc:mysql://...?useUnicode=true&amp;characterEncoding=GBK&amp;...

# ç›®æ ‡åº“
jdbc:mysql://...?useUnicode=true&amp;characterEncoding=utf8&amp;...
</code></pre>
<p>æ”¹å®Œä¹‹åï¼Œ<strong>è¿˜æ˜¯å¤±è´¥</strong>ã€‚</p>
<p>æˆ‘å·®ç‚¹æ”¾å¼ƒï¼Œç›´åˆ°åšäº†æœ€åä¸€ä»¶äº‹â€”â€”<strong>é‡å¯ Spoon</strong>ã€‚</p>
<p>ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼šè½¬æ¢æˆåŠŸè·‘é€šï¼Œä¸­æ–‡æ­£å¸¸å†™å…¥ï¼</p>
<hr/>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆé‡å¯æ‰ç”Ÿæ•ˆï¼Ÿ</h2>
<p>åæ¥å¤ç›˜å‘ç°ï¼ŒKettle 7.1 æœ‰ä¸ªéšè—å‘ç‚¹ï¼š</p>
<blockquote>
<p><strong>æ•°æ®åº“è¿æ¥å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼Œå³ä½¿ä½ ä¿®æ”¹äº† URLï¼Œæ—§çš„è¿æ¥å¯èƒ½è¿˜åœ¨ç”¨</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘è™½ç„¶æ”¹äº†è¿æ¥é…ç½®ï¼Œä½† Kettle å†…éƒ¨ä»ç„¶ç”¨ç€ä¹‹å‰æ²¡åŠ  <code>useUnicode=true</code> çš„è¿æ¥æ± å®ä¾‹ã€‚åªæœ‰é‡å¯ Spoonï¼Œæ‰èƒ½å½»åº•æ¸…ç©ºç¼“å­˜ï¼Œè®©æ–°é…ç½®ç”Ÿæ•ˆã€‚</p>
<hr/>
<h2 data-id="heading-5">æœ€ç»ˆéªŒè¯ï¼šç¡®ä¿æ¯ä¸€æ­¥éƒ½æ­£ç¡®</h2>
<p>ä¸ºäº†ä¿é™©ï¼Œæˆ‘åœ¨â€œè¡¨è¾“å…¥â€å’Œâ€œè¡¨è¾“å‡ºâ€ä¹‹é—´åŠ äº†ä¸ªâ€œå†™æ—¥å¿—â€æ­¥éª¤ï¼Œæ‰“å° <code>content</code> å­—æ®µã€‚çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„æ˜¯â€œæ·±åœ³å¸‚æŸæŸå•ä½â€è¿™æ ·çš„æ­£å¸¸ä¸­æ–‡ï¼Œå¿ƒé‡Œæ‰è¸å®ã€‚</p>
<p>åŒæ—¶ç¡®è®¤ç›®æ ‡è¡¨ç¡®å®æ˜¯ <code>utf8mb4</code>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> target_table;
<span class="hljs-comment">-- è¾“å‡ºåŒ…å«ï¼šCHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci</span>
</code></pre>
<hr/>
<h2 data-id="heading-6">ç»éªŒæ€»ç»“</h2>
<ol>
<li>
<p><strong>ä¸è¦ç›¸ä¿¡è¡¨çš„å­—ç¬¦é›†å£°æ˜</strong><br/>
å¾ˆå¤šè€ç³»ç»ŸæŠŠ GBK æ•°æ®å¡è¿› <code>utf8</code> è¡¨ï¼Œå®é™…å­˜å‚¨çš„æ˜¯ GBK å­—èŠ‚ã€‚è¦é€šè¿‡ <code>HEX(content)</code> éªŒè¯çœŸå®ç¼–ç ã€‚</p>
</li>
<li>
<p><strong>JDBC è¿æ¥å¿…é¡»æ˜¾å¼å¼€å¯ Unicode</strong><br/>
å…‰å†™ <code>characterEncoding=GBK</code> ä¸å¤Ÿï¼Œä¸€å®šè¦åŠ  <code>useUnicode=true</code>ã€‚</p>
</li>
<li>
<p><strong>Kettle çš„ Options è¡¨æ ¼æ˜¯åŒåˆƒå‰‘</strong><br/>
å®å¯å…¨å†™è¿› Custom URLï¼Œä¹Ÿä¸è¦æ··ç”¨ï¼Œé¿å…å‚æ•°æ±¡æŸ“ã€‚</p>
</li>
<li>
<p><strong>æ”¹å®Œé…ç½®è®°å¾—é‡å¯ Spoon</strong><br/>
Kettle 7.1 çš„è¿æ¥ç¼“å­˜æœºåˆ¶ä¼šè®©ä½ è¯¯ä»¥ä¸ºé…ç½®æ²¡ç”Ÿæ•ˆã€‚</p>
</li>
<li>
<p><strong>ç”¨â€œå†™æ—¥å¿—â€æ­¥éª¤éªŒè¯ä¸­é—´æ•°æ®</strong><br/>
åœ¨å…³é”®èŠ‚ç‚¹æ‰“å°å­—æ®µå€¼ï¼Œèƒ½å¿«é€Ÿå®šä½æ˜¯è¯»å–é—®é¢˜è¿˜æ˜¯å†™å…¥é—®é¢˜ã€‚</p>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">é™„ï¼šæ¨èçš„å®Œæ•´è¿æ¥é…ç½®</h2>
<p><strong>æºåº“ï¼ˆè¯»å– GBK æ•°æ®ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jdbc:mysql://180.23.1.1:3306/oldtest?
  <span class="hljs-attr">useUnicode</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">characterEncoding</span>=GBK&amp;
  <span class="hljs-attr">useSSL</span>=<span class="hljs-literal">false</span>&amp;
  <span class="hljs-attr">allowPublicKeyRetrieval</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">serverTimezone</span>=Asia/Shanghai
</code></pre>
<p><strong>ç›®æ ‡åº“ï¼ˆå†™å…¥ UTF8MB4ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">jdbc:mysql://180.23.1.1:3315/newtest?
  <span class="hljs-attr">useUnicode</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">characterEncoding</span>=utf8&amp;
  <span class="hljs-attr">useSSL</span>=<span class="hljs-literal">false</span>&amp;
  <span class="hljs-attr">allowPublicKeyRetrieval</span>=<span class="hljs-literal">true</span>&amp;
  <span class="hljs-attr">serverTimezone</span>=Asia/Shanghai
</code></pre>
<p>è¿æ¥ç±»å‹é€‰ <strong>Generic database</strong>ï¼ŒDriver class å¡« <code>com.mysql.cj.jdbc.Driver</code>ï¼ŒOptions è¡¨æ ¼ç•™ç©ºã€‚</p>
<hr/>
<p>è¿™æ¬¡æ’æŸ¥èŠ±äº†æˆ‘å¤§åŠå¤©æ—¶é—´ï¼Œä½†ææ¸…æ¥šåŸç†åï¼Œä»¥åå†é‡åˆ°ç±»ä¼¼é—®é¢˜å°±èƒ½ç§’è§£ã€‚å¸Œæœ›è¿™ç¯‡è®°å½•èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Paimonæºç è§£è¯» -- PartialUpdateMerge]]></title>    <link>https://juejin.cn/post/7576838095518793779</link>    <guid>https://juejin.cn/post/7576838095518793779</guid>    <pubDate>2025-11-26T08:45:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576838095518793779" data-draft-id="7576307259385282587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Paimonæºç è§£è¯» -- PartialUpdateMerge"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Flink"/> <meta itemprop="datePublished" content="2025-11-26T08:45:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="expect7g"/> <meta itemprop="url" content="https://juejin.cn/user/3514471387235735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Paimonæºç è§£è¯» -- PartialUpdateMerge
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3514471387235735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    expect7g
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:45:49.000Z" title="Wed Nov 26 2025 08:45:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€.çˆ¶æ¥å£MergeFunction</h2>
<p>å…¶å®ç°å­ç±»å¦‚ä¸‹å›¾</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daf9fba698f7473fa2181dbd37491923~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZXhwZWN0N2c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751549&amp;x-signature=155mxf12PrZdVJ0K2qzUUPgTt5w%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPaimonä¸­æ‰€æœ‰çš„Merge Engineéƒ½å®ç°äº†MergeFunctionæ¥å£ï¼Œé‚£ä¹ˆç»§ç»­çœ‹è¯¥æ¥å£ä¸­çš„4ä¸ªæŠ½è±¡æ–¹æ³•</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MergeFunction</span>&lt;T&gt; {

    <span class="hljs-comment">/**
     * é‡ç½®æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨add()å‰æˆ–getResult()åè¢«è°ƒç”¨
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">reset</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * åˆå¹¶æ–¹æ³•ï¼šå°†è¾“å…¥çš„kvåŠ å…¥åˆ°åˆå¹¶functionä¸­ï¼Œè¿›è¡Œåˆå¹¶
     * <span class="hljs-doctag">@param</span> kv
     */</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(KeyValue kv)</span>;

    <span class="hljs-comment">/**
     * è·å–ç»“æœï¼šè·å–å½“å‰åˆå¹¶åçš„ç»“æœ
     * <span class="hljs-doctag">@return</span>
     */</span>
    T <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span>;

    <span class="hljs-comment">/**
     * ç¼“å­˜ï¼šæŒ‰éœ€å¤åˆ¶è¾“å…¥æ¥çš„kvï¼Œæ”¾å…¥å†…å­˜ä¸­
     * <span class="hljs-doctag">@return</span>
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">requireCopy</span><span class="hljs-params">()</span>;
}
</code></pre>
<h2 data-id="heading-1">äºŒ.PartialUpdateMergeFunction</h2>
<h3 data-id="heading-2">1.å±æ€§å’Œå…³é”®å‡½æ•°</h3>
<h4 data-id="heading-3">(1) å±æ€§å’Œæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SEQUENCE_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"sequence-group"</span>; <span class="hljs-comment">// åºåˆ—ç»„çš„æ ‡è¯†å­—ç¬¦ä¸²ï¼Œåç»­ä¼šåˆ¤æ–­æœ‰æ²¡æœ‰é…ç½®sequence-group</span>
    <span class="hljs-comment">// 1.é…ç½®ç›¸å…³</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> InternalRow.FieldGetter[] getters; <span class="hljs-comment">// å­—æ®µå–å€¼å™¨ï¼Œå¯ä»¥ç†è§£ä¸ºåå°„è·å–Rowä¸­å­—æ®µçš„å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> ignoreDelete; <span class="hljs-comment">// æ˜¯å¦å¿½ç•¥DEKETEç±»å‹ï¼Œè¿™ä¹Ÿæ˜¯å’Œé…ç½®'ignore-delete'ç»‘å®š</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; fieldSeqComparators; <span class="hljs-comment">// æ¯”è¾ƒå™¨ï¼Œç”¨äºå†³å®šèšåˆæ“ä½œä¸­çš„æ–‡ä»¶çš„èšåˆé¡ºåº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> fieldSequenceEnabled; <span class="hljs-comment">// æ˜¯å¦å¯ç”¨äº†field-sequnceï¼Œå’Œé…ç½®'sequnce-group'ç»‘å®šï¼Œé»˜è®¤æ˜¯none</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; fieldAggregators; <span class="hljs-comment">// fieldèšåˆå™¨ï¼Œå’Œé…ç½®'fields.xxx.aggregate-function'ç»‘å®š</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> removeRecordOnDelete; <span class="hljs-comment">// å½“rowkindæ”¶åˆ°-Dï¼Œæ˜¯å¦ç§»é™¤è¯¥è¡Œæ•°æ®ï¼Œå’Œé…ç½®'partial-update.remove-record-on-delete'ç»‘å®šï¼Œé»˜è®¤æ˜¯falseä¸ç§»é™¤</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Set&lt;Integer&gt; sequenceGroupPartialDelete; <span class="hljs-comment">// å½“sequnce-group-deleteç»‘å®šçš„å­—æ®µæ”¶åˆ°-Dï¼Œæ˜¯å¦ç§»é™¤æ”¹è¡Œå­—æ®µï¼Œå’Œé…ç½®'partial-update.remove-record-on-sequence-group'ç»‘å®šï¼Œé»˜è®¤æ˜¯noneï¼Œä¸ç»‘å®šsgçš„deleteå­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span>[] nullables; <span class="hljs-comment">// æ ‡è¯†æ¯ä¸ªå­—æ®µæ˜¯å¦å…è®¸ä¸ºnull</span>
    <span class="hljs-comment">// 2.çŠ¶æ€ç›¸å…³</span>
    <span class="hljs-keyword">private</span> InternalRow currentKey; <span class="hljs-comment">// å½“å‰æ­£åœ¨å¤„ç†çš„Keyä¸»é”®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> latestSequenceNumber; <span class="hljs-comment">// å½“å‰è¯¥Keyä¸‹è®°å½•çš„æœ€æ–°sequnceNumberåºåˆ—å·</span>
    <span class="hljs-keyword">private</span> GenericRow row; <span class="hljs-comment">// ç”¨äºç¼“å­˜èšåˆä¸­é—´ç»“æœçš„å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> KeyValue reused; <span class="hljs-comment">// å¤ç”¨çš„KVå¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> currentDeleteRow; <span class="hljs-comment">// æ ‡è®°å½“å‰èšåˆçš„ç»“æœæ˜¯å¦ä¸ºDeleteç±»å‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> notNullColumnFilled; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦å·²ç»å¡«å……äº†énullåˆ—</span>

    <span class="hljs-comment">/**
     * å¦‚æœé¦–ä¸ªå€¼ä¸ºå›é€€retractæ“ä½œï¼Œä¸”æœªæ”¶åˆ°insertè®°å½•ï¼Œåˆ™è¯¥è¡Œçš„rowkindåº”è¯¥ä¸ºRowKind.DELETE
     * æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰æ”¶åˆ°RowKind.INSERTçš„æ•°æ®ï¼Œé‚£ä¹ˆpuè¡¨çš„seuqnce-groupå¯èƒ½æ— æ³•æ­£ç¡®è®¾ç½®currentDeleteRow
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> meetInsert; <span class="hljs-comment">// æ ‡è®°æ˜¯å¦é‡åˆ°è¿‡ INSERT ç±»å‹çš„è®°å½•ï¼Œç”¨äºå¤„ç†å¤æ‚çš„åˆ é™¤é€»è¾‘ã€‚</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-title function_">PartialUpdateMergeFunction</span><span class="hljs-params">(
            InternalRow.FieldGetter[] getters,
            <span class="hljs-type">boolean</span> ignoreDelete,
            Map&lt;Integer, FieldsComparator&gt; fieldSeqComparators,
            Map&lt;Integer, FieldAggregator&gt; fieldAggregators,
            <span class="hljs-type">boolean</span> fieldSequenceEnabled,
            <span class="hljs-type">boolean</span> removeRecordOnDelete,
            Set&lt;Integer&gt; sequenceGroupPartialDelete,
            <span class="hljs-type">boolean</span>[] nullables)</span> {
        <span class="hljs-built_in">this</span>.getters = getters;
        <span class="hljs-built_in">this</span>.ignoreDelete = ignoreDelete;
        <span class="hljs-built_in">this</span>.fieldSeqComparators = getKeySortedListFromMap(fieldSeqComparators);
        <span class="hljs-built_in">this</span>.fieldAggregators = getKeySortedListFromMap(fieldAggregators);
        <span class="hljs-built_in">this</span>.fieldSequenceEnabled = fieldSequenceEnabled;
        <span class="hljs-built_in">this</span>.removeRecordOnDelete = removeRecordOnDelete;
        <span class="hljs-built_in">this</span>.sequenceGroupPartialDelete = sequenceGroupPartialDelete;
        <span class="hljs-built_in">this</span>.nullables = nullables;
    }
</code></pre>
<h4 data-id="heading-4">(2) fieldSeqComparatorsçš„åˆ›å»ºæ–¹æ³•</h4>
<p>è¯¥fieldSeqComparatorsæ˜¯åœ¨Factoryçš„æ„é€ å‡½æ•°ä¸­åˆ›å»ºçš„ï¼Œå¾ˆé•¿ï¼Œæˆ‘ä»¬å°±çœ‹ç›¸å…³ä»£ç å³å¯</p>
<p><strong>è¿™æ˜¯å…³é”®ç‚¹ï¼ï¼ï¼</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/* æ¡ˆä¾‹å¦‚ä¸‹
"fields.se_sign.sequence-group" : "uids,pids,views",
"fields.views.aggregate-function" : "sum",
*/</span>
<span class="hljs-keyword">for</span> (Map.Entry&lt;String, String&gt; entry : options.toMap().entrySet()) {
    <span class="hljs-type">String</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> entry.getKey(); <span class="hljs-comment">// "fields.se_sign.sequence-group"</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">v</span> <span class="hljs-operator">=</span> entry.getValue(); <span class="hljs-comment">// "uids,pids,views"</span>
    <span class="hljs-keyword">if</span> (k.startsWith(FIELDS_PREFIX) &amp;&amp; k.endsWith(SEQUENCE_GROUP)) {
        List&lt;String&gt; sequenceFields =
                Arrays.stream(
                                k.substring(
                                                FIELDS_PREFIX.length() + <span class="hljs-number">1</span>,
                                                k.length()
                                                        - SEQUENCE_GROUP.length()
                                                        - <span class="hljs-number">1</span>)
                                        .split(FIELDS_SEPARATOR))
                        .map(fieldName -&gt; validateFieldName(fieldName, fieldNames))
                        .collect(Collectors.toList()); <span class="hljs-comment">// [se_sign]</span>
        allSequenceFields.addAll(sequenceFields); <span class="hljs-comment">// [se_sign]</span>

        Supplier&lt;FieldsComparator&gt; userDefinedSeqComparator =
                () -&gt; UserDefinedSeqComparator.create(rowType, sequenceFields, <span class="hljs-literal">true</span>); <span class="hljs-comment">// se_signçš„æ¯”è¾ƒå™¨</span>
        Arrays.stream(v.split(FIELDS_SEPARATOR))
                .map(
                        fieldName -&gt;
                                fieldNames.indexOf(
                                        validateFieldName(fieldName, fieldNames)))
                .forEach(<span class="hljs-comment">// éå†[uids,pids,views]çš„index</span>
                        field -&gt; {
                            <span class="hljs-keyword">if</span> (fieldSeqComparators.containsKey(field)) {
                                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(
                                        String.format(
                                                <span class="hljs-string">"Field %s is defined repeatedly by multiple groups: %s"</span>,
                                                fieldNames.get(field), k));
                            }
                            fieldSeqComparators.put(field, userDefinedSeqComparator);
                            <span class="hljs-comment">/* ç”Ÿæˆä¸€ä¸ªmapä¸‰ä¸ªé”®å€¼å¯¹
                              uidsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                              pidsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                              viewsçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨
                             */</span>
                        });

        <span class="hljs-comment">// add self</span>
        sequenceFields.forEach(
                fieldName -&gt; {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> fieldNames.indexOf(fieldName);
                    fieldSeqComparators.put(index, userDefinedSeqComparator); <span class="hljs-comment">// æœ€åæ”¾se_signçš„index -&gt; se_signçš„æ¯”è¾ƒå™¨</span>
                    sequenceGroupMap.put(fieldName, index);
                });
    }
}
</code></pre>
<h3 data-id="heading-5">2.<code>reset()</code>é‡ç½®æ–¹æ³•</h3>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * é‡ç½®åˆå¹¶å‡½æ•°çš„æ‰€æœ‰å†…éƒ¨çŠ¶æ€
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reset</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.currentKey = <span class="hljs-literal">null</span>;
        <span class="hljs-built_in">this</span>.meetInsert = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">this</span>.notNullColumnFilled = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">this</span>.row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length); <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„GenericRowå¯¹è±¡ä½œä¸ºåˆå¹¶ç»“æœçš„è½½ä½“ï¼Œé•¿åº¦ä¸å­—æ®µæ•°é‡ï¼ˆgetters.lengthï¼‰ä¸€è‡´ã€‚</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œrowæ˜¯åˆ›å»ºæ–°å¯¹è±¡è€Œéå¤ç”¨æ—§å¯¹è±¡ï¼Œé¿å…æ—§åˆ†ç»„çš„æ•°æ®æ®‹ç•™å½±å“æ–°åˆ†ç»„çš„ç»“æœ</span>
        <span class="hljs-built_in">this</span>.latestSequenceNumber = <span class="hljs-number">0</span>;
        fieldAggregators.forEach(w -&gt; w.getValue().reset()); <span class="hljs-comment">// éå†æ‰€æœ‰å­—æ®µèšåˆå™¨ï¼ˆFieldAggregatorï¼‰ï¼Œå¹¶è°ƒç”¨å®ƒä»¬å„è‡ªçš„reset()æ–¹æ³•ã€‚è¿™æ˜¯å› ä¸ºèšåˆå™¨ï¼ˆå¦‚ SUMã€MAX ç­‰ï¼‰è‡ªèº«ä¹Ÿç»´æŠ¤ç€ä¸­é—´çŠ¶æ€ï¼ˆä¾‹å¦‚ç´¯åŠ å’Œï¼‰ï¼Œéœ€è¦ä¸ºæ–°åˆ†ç»„é‡ç½®è¿™äº›çŠ¶æ€ã€‚</span>
    }
</code></pre>
<h3 data-id="heading-6">3.<code>add()</code>åˆå¹¶æ–¹æ³• -- æ ¸å¿ƒé€»è¾‘</h3>
<h4 data-id="heading-7">(1) <code>add()</code></h4>
<ul>
<li>kvï¼šå½“å‰æ¥çš„æ•°æ®</li>
<li>rowï¼šç¼“å­˜çš„ä¸­é—´èšåˆåçš„æ•°æ®</li>
</ul>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">/**
     * åˆå¹¶é€»è¾‘çš„æ ¸å¿ƒæ“ä½œ
     * <span class="hljs-doctag">@param</span> kv
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">// refresh key object to avoid reference overwritten</span>
        currentKey = kv.key();
        currentDeleteRow = <span class="hljs-literal">false</span>;
        <span class="hljs-comment">// 1.å¤„ç†å›æ’¤è®°å½•ï¼Œå°±æ˜¯å¤„ç†RowKindä¸º-Uæˆ–-Dçš„</span>
        <span class="hljs-keyword">if</span> (kv.valueKind().isRetract()) {
            <span class="hljs-comment">// åˆå§‹åŒ–ç©ºè¡Œï¼šå¦‚æœè¿˜æœªå¡«å……éç©ºåˆ—ï¼Œåˆ™è°ƒinitRow()åˆå§‹åŒ–è¿›è¡Œèµ‹å€¼</span>
            <span class="hljs-keyword">if</span> (!notNullColumnFilled) {
                initRow(row, kv.value());
                notNullColumnFilled = <span class="hljs-literal">true</span>;
            }

            <span class="hljs-comment">// In 0.7- versions, the delete records might be written into data file even when</span>
            <span class="hljs-comment">// ignore-delete configured, so ignoreDelete still needs to be checked</span>
            <span class="hljs-comment">// è§£å†³Paimon0.7ç‰ˆæœ¬çš„bugï¼Œå½“æ—¶é…ç½®äº†ignore-deleteä¸ä¼šç”Ÿæ•ˆï¼Œå› æ­¤ï¼Œè¿™é‡Œä»ç„¶è¦åˆ¤æ–­ä¸€ä¸‹ï¼Œå®ç°é…ç½®äº†ignore-delete=true ä¸å¤„ç†</span>
            <span class="hljs-comment">// CASE-1: è‹¥é…ç½®äº†ignore-deleteä¸ºtrueï¼Œåˆ™ç›´æ¥è·³è¿‡è¯¥æ¡æ•°æ®çš„å¤„ç†</span>
            <span class="hljs-keyword">if</span> (ignoreDelete) {
                <span class="hljs-keyword">return</span>;
            }

            latestSequenceNumber = kv.sequenceNumber(); <span class="hljs-comment">// æ›´æ–°latestSequenceNumber</span>

            <span class="hljs-comment">// CASE-2: è‹¥å¼€å¯äº†field-sequneceï¼Œä¹Ÿå°±æ˜¯é…ç½®äº†'sequence-group'ï¼Œåˆ™è°ƒretractWithSequenceGroup()ï¼Œè¿›è¡Œæ›´ç»†åŒ–çš„å›æ’¤å¤„ç†</span>
            <span class="hljs-keyword">if</span> (fieldSequenceEnabled) {
                retractWithSequenceGroup(kv);
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-comment">// CASE-3: è‹¥é…ç½®äº†partial-update.remove-record-on-deleteä¸ºtrueï¼Œä¸”å½“å‰RowKinkæ˜¯-Dï¼Œé‚£ä¹ˆè°ƒinitRow()ï¼Œå¹¶æ ‡è®°currentDeleteRow = true é‡ç½®è¯¥è¡Œæ•°æ®</span>
            <span class="hljs-keyword">if</span> (removeRecordOnDelete) {
                <span class="hljs-keyword">if</span> (kv.valueKind() == RowKind.DELETE) {
                    currentDeleteRow = <span class="hljs-literal">true</span>;
                    row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length);
                    initRow(row, kv.value());
                }
                <span class="hljs-keyword">return</span>;
            }
            <span class="hljs-comment">// æœ€åï¼Œè‹¥ä»€ä¹ˆéƒ½æ²¡é…ç½®ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œæé†’ç”¨æˆ·å¿…é¡»é€‰æ‹©ä¸€ç§å›æ’¤æµçš„å¤„ç†æ–¹å¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span>
                    String.join(
                            <span class="hljs-string">"\n"</span>,
                            <span class="hljs-string">"By default, Partial update can not accept delete records,"</span>
                                    + <span class="hljs-string">" you can choose one of the following solutions:"</span>,
                            <span class="hljs-string">"1. Configure 'ignore-delete' to ignore delete records."</span>,
                            <span class="hljs-string">"2. Configure 'partial-update.remove-record-on-delete' to remove the whole row when receiving delete records."</span>,
                            <span class="hljs-string">"3. Configure 'sequence-group's to retract partial columns. Also configure 'partial-update.remove-record-on-sequence-group' to remove the whole row when receiving deleted records of `specified sequence group`."</span>);

            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(msg);
        }
        <span class="hljs-comment">// å¤„ç†æ­£å¸¸æµï¼Œä¹Ÿå°±æ˜¯RowKindä¸º+Iã€+Uçš„æ•°æ®</span>
        latestSequenceNumber = kv.sequenceNumber(); <span class="hljs-comment">// æ›´æ–°latestSequenceNumber</span>
        <span class="hljs-keyword">if</span> (fieldSeqComparators.isEmpty()) { <span class="hljs-comment">// è‹¥æ²¡æœ‰å­—æ®µçº§çš„æ¯”è¾ƒå™¨ï¼Œåˆ™è°ƒupdateNonNullFields()å»éç©ºè¦†ç›–</span>
            updateNonNullFields(kv);
        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// è‹¥é…ç½®äº†å­—æ®µçº§çš„æ¯”è¾ƒå™¨ï¼Œåˆ™è°ƒupdateNonNullFields()å»æŒ‰sequnce-groupå»æ›´æ–°</span>
            updateWithSequenceGroup(kv); <span class="hljs-comment">// è¿™æ˜¯é‡ç‚¹</span>
        }
        meetInsert = <span class="hljs-literal">true</span>;
        notNullColumnFilled = <span class="hljs-literal">true</span>;
    }
</code></pre>
<h4 data-id="heading-8">(2) è°ƒç”¨çš„<code>initRow()</code>å’Œ<code>updateNonNullFields()</code></h4>
<p>è¿™ä¿©æ–¹æ³•éƒ½æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åˆå§‹åŒ–èµ‹å€¼ï¼Œå­—æ®µä¸å…è®¸ä¸ºnullï¼Œä½†æ˜¯fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
å…¶å®å°±æ˜¯éç©ºè¦†ç›–</p>
<p><strong>ç–‘é—®ï¼šä¸ºä»€ä¹ˆè¿™é‡Œæ˜¯è¦†ç›–ï¼Œè€Œä¸èƒ½èšåˆå‘¢ï¼Ÿé‚£å¦‚æœæˆ‘å°±æ˜¯å»ºpuè¡¨çš„æ—¶å€™é…ç½®äº†èšåˆå‡½æ•°å‘¢ï¼Ÿ</strong>
<strong>è§£ç­”</strong>ï¼š1.3ç‰ˆæœ¬åï¼Œè‹¥partial-updateè¡¨é‡Œé¢è¦é…ç½®aggregate-functionï¼Œå¿…é¡»ç”¨sequnce-groupæŒ‡å®šï¼Œå¦åˆ™DDLå°±ä¼šæŠ¥é”™<code>[ERROR]Â CouldÂ notÂ executeÂ SQLÂ statement.Â Reason:   java.lang.IllegalArgumentException:Â MustÂ useÂ sequenceÂ groupÂ forÂ aggregationÂ functionsÂ butÂ notÂ foundÂ forÂ fieldÂ views.</code></p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-comment">// åˆå§‹åŒ–èµ‹å€¼ï¼Œå­—æ®µä¸å…è®¸ä¸ºnullï¼Œä½†æ˜¯fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initRow</span><span class="hljs-params">(GenericRow row, InternalRow value)</span> {
        <span class="hljs-comment">// éå†Rowç±»å‹çš„æ¯ä¸€ä¸ªå­—æ®µï¼Œæ£€æŸ¥æ˜¯å¦å…è®¸ä¸ºnullï¼Œä¸å…è®¸ï¼Œåˆ™æŠ›å¼‚å¸¸</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(value); <span class="hljs-comment">// è¯¥è¡Œæ•°æ®å¯¹åº”ä½ç½®çš„å­—æ®µå€¼ï¼Œè‹¥æ²¡æœ‰ï¼Œåˆ™ç»™nullã€‚</span>
            <span class="hljs-keyword">if</span> (!nullables[i]) {
                <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) {
                    row.setField(i, field); <span class="hljs-comment">// ç»™è¯¥å­—æ®µè¿›è¡Œèµ‹å€¼</span>
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Field "</span> + i + <span class="hljs-string">" can not be null"</span>);
                }
            }
        }
    }
    
    <span class="hljs-comment">// é€»è¾‘å’ŒinitRowç±»ä¼¼ï¼Œéƒ½æ˜¯å­—æ®µä¸å…è®¸nullï¼Œä½†fieldå€¼ä¸ºnullï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateNonNullFields</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
            <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) {
                row.setField(i, field);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">if</span> (!nullables[i]) {
                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Field "</span> + i + <span class="hljs-string">" can not be null"</span>);
                }
            }
        }
    }
</code></pre>
<h4 data-id="heading-9">(3) è°ƒç”¨çš„<code>updateWithSequenceGroup()</code> -- æ ¸å¿ƒ1</h4>
<p>è¯¥æ–¹æ³•æ˜¯é’ˆå¯¹é…ç½®äº†sequnce-groupçš„ä¸€ä¸ªåˆå¹¶é€»è¾‘ï¼Œå¹¶ä¸”ä¹Ÿæ¶‰åŠåˆ°puæ¨¡å‹çš„aggregate-functionèšåˆæ“ä½œ -- é‡ç‚¹ï¼ï¼ï¼</p>
<p>æ¡ˆä¾‹ï¼š</p>
<blockquote>
<p>"fields.se_sign.sequence-group" : "uids,pids,views",<br/>
"fields.views.aggregate-function" : "sum",</p>
</blockquote>
<p>é‚£ä¹ˆï¼Œsequnce-groupçš„æ ‡è®°å­—æ®µä¸ºï¼šse_signï¼Œç»‘å®šå­—æ®µä¸ºï¼šuidsã€pidsã€views</p>
<p><strong>æµç¨‹å¦‚ä¸‹ï¼šé‡ç‚¹ï¼ï¼ï¼</strong></p>
<ol>
<li>è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œè¿™é‡Œæ˜¯se_signï¼›</li>
<li>è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨ï¼Œè¿™é‡Œæ˜¯viewsçš„sumï¼›</li>
<li>éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†ï¼š
<ol>
<li>åŒ¹é…æ‰¾åˆ°å½“å‰ä½ç½®içš„å­—æ®µå¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨ï¼›</li>
<li>è·å–iä½ç½®å­—æ®µå½“å‰çš„ç´¯åŠ å’Œï¼Œrowä¸­çš„iä½ç½®å­—æ®µå€¼ï¼›</li>
<li>CASE-1: å¤„ç†æ²¡æœ‰åŒ¹é…åˆ°çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œè¯´æ˜è¯¥å­—æ®µæ²¡æœ‰è¢«sequnce-groupç»‘å®šï¼Œå› æ­¤ç›´æ¥è¿›è¡Œæ›´æ–°(æœ‰èšåˆï¼Œå°±èšåˆï¼›æ²¡æœ‰å°±ç›´æ¥è¦†ç›–)ï¼›</li>
<li>CASE-2ï¼šå¤„ç†æœ‰åŒ¹é…åˆ°çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼š
<ul>
<li>è‹¥å½“å‰è¡Œæ•°æ®çš„sequnce-groupæ ‡è®°å­—æ®µä¸ºnullï¼Œåˆ™ç›´æ¥è·³è¿‡ç»‘å®šå­—æ®µå’Œæ ‡è®°å­—æ®µçš„å…¨éƒ¨å¤„ç†ï¼›</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ—å€¼ &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—å€¼ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå½“å‰è¡Œçš„se_signçš„å€¼ &gt;= rowä¸­çš„se_signå€¼ï¼›
<ol>
<li>å½“å‰å­—æ®µæ˜¯sequnce-groupçš„<strong>æ ‡è®°å­—æ®µ</strong>ï¼Œå¦‚se_signï¼Œåˆ™è¿›è¡ŒåŸå­æ€§æ“ä½œï¼›</li>
<li>å½“å‰å­—æ®µæ˜¯sequnce-groupçš„<strong>ç»‘å®šå­—æ®µ</strong>ï¼Œå¦‚uidsã€viewsï¼Œåˆ™ç›´æ¥æ‰§è¡Œè¦†ç›–æˆ–èšåˆæ“ä½œï¼›</li>
</ol>
</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ— &lt; ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œåˆ™ä»ç„¶è¿›è¡Œèšåˆï¼›</li>
</ul>
<blockquote>
<p>è¿™é‡Œä¸ªäººè®¤ä¸ºæ˜¯ä¸€ä¸ªBUGï¼Œåç»­å¸Œæœ›ç¤¾åŒºèƒ½ä¿®æ”¹å§ï¼Œå…¶å®å¯ä»¥å¼€å¯ä¸€ä¸ªå¼€å…³ï¼Œé’ˆå¯¹2ç§ä¸åŒæƒ…å†µ</p>
<ol>
<li>æœ‰çš„ä¸šåŠ¡æ˜¯ä¸å…è®¸è¦†ç›–ç»´åº¦ï¼Œä½†æ˜¯æŒ‡æ ‡è¿˜æ˜¯è¦çš„ï¼›</li>
<li>æœ‰çš„ä¸šåŠ¡æ˜¯ç»´åº¦å’ŒæŒ‡æ ‡åŸå­ç»‘å®šï¼Œè¦ä¹ˆä¸€èµ·æ›´æ–°ï¼Œè¦ä¹ˆå…¨éƒ½ä¸æ›´æ–°ï¼›</li>
</ol>
</blockquote>
</li>
</ol>
</li>
</ol>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateWithSequenceGroup</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">/* ä¾‹å¦‚ï¼š
        "fields.se_sign.sequence-group" : "uids,pids,views",
        "fields.views.aggregate-function" : "sum",
         */</span>
        <span class="hljs-comment">// 1.è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œå°±æ˜¯se_sign</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; comparatorIter =
                fieldSeqComparators.iterator(); <span class="hljs-comment">// se_sign</span>
        WrapperWithFieldIndex&lt;FieldsComparator&gt; curComparator =
                comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// 2.è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; aggIter = fieldAggregators.iterator(); <span class="hljs-comment">// views</span>
        WrapperWithFieldIndex&lt;FieldAggregator&gt; curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// è®°å½•å“ªäº›å­—æ®µæ‰€å±çš„sequnce-groupä¸ºnullï¼Œé¿å…å¯¹åŒä¸€ä¸ªç©ºsgç»„è¿›è¡Œé‡å¤å¤„ç†</span>
        <span class="hljs-type">boolean</span>[] isEmptySequenceGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[getters.length];
        <span class="hljs-comment">// 3.éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-comment">// 3-1ï¼šä¸ºå½“å‰å­—æ®µåŒ¹é…å¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨</span>
            <span class="hljs-type">FieldsComparator</span> <span class="hljs-variable">seqComparator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curComparator != <span class="hljs-literal">null</span> &amp;&amp; curComparator.fieldIndex == i) {
                seqComparator = curComparator.getValue();
                curComparator = comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">FieldAggregator</span> <span class="hljs-variable">aggregator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curAgg != <span class="hljs-literal">null</span> &amp;&amp; curAgg.fieldIndex == i) {
                aggregator = curAgg.getValue();
                curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> row.getField(i); <span class="hljs-comment">// è·å–iä½ç½®å­—æ®µå½“å‰çš„ç´¯åŠ å’Œ</span>
            <span class="hljs-comment">/* è¿™é‡Œçš„rowæ˜¯å½“å‰ä¸»é”®åˆ†ç»„ä¸‹æ­£åœ¨æ„å»ºçš„åˆå¹¶ç»“æœè¡Œ
            å½“å¤„ç†å±äºåŒä¸€ä¸ªä¸»é”®çš„å¤šæ¡è®°å½•æ—¶ï¼Œæ‰€æœ‰æ›´æ–°æ“ä½œéƒ½ä¼šç´¯ç§¯åˆ°è¿™ä¸ª row å¯¹è±¡ä¸Š
            å½“åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªä¸»é”®åˆ†ç»„æ—¶ï¼Œreset() ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ rowï¼Œæ—§çš„ row ä¼šè¢«ä¸¢å¼ƒæˆ–è¾“å‡º
             */</span>
            <span class="hljs-comment">// 3-2ï¼šå¤„ç†æ²¡æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µ</span>
            <span class="hljs-keyword">if</span> (seqComparator == <span class="hljs-literal">null</span>) {
                <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
                <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// è‹¥æœ‰èšåˆå™¨ï¼Œåˆ™æ‰§è¡Œç›¸åº”çš„èšåˆæ“ä½œï¼Œå¦‚SUMã€MAXç­‰</span>
                    row.setField(i, aggregator.agg(accumulator, field));
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field != <span class="hljs-literal">null</span>) { <span class="hljs-comment">// æ— èšåˆå™¨ï¼Œä½†å­—æ®µä¸ä¸ºnullï¼Œåˆ™è¦†ç›– å…¶å®å°±ç›¸å½“äºé»˜è®¤æ˜¯éç©ºè¦†ç›–</span>
                    row.setField(i, field);
                }
            } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// 3-3ï¼šå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µ</span>
                <span class="hljs-comment">// CASE-1: å¦‚æœsequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯null,åˆ™è·³è¿‡è¯¥ç»‘å®šå­—æ®µçš„å¤„ç†ï¼Œæ¯”å¦‚å½“å‰è¡Œä¸­uidsã€pidsã€viewsçš„se_signä¸ºnullï¼Œåˆ™ä¼šè·³è¿‡è¿™ä¸‰ä¸ªå­—æ®µçš„å¤„ç†</span>
                <span class="hljs-keyword">if</span> (isEmptySequenceGroup(kv, seqComparator, isEmptySequenceGroup)) {
                    <span class="hljs-comment">// skip null sequence group</span>
                    <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡çš„æ˜¯å½“å‰sequence-groupæ ‡è®°å­—æ®µçš„å¤„ç†</span>
                }
                <span class="hljs-comment">// å½“sequnce-groupçš„æ ‡è®°å­—æ®µä¸ä¸ºnullçš„æƒ…å†µè¿›è¡Œå¤„ç†ï¼Œse_signä¸ä¸ºnull</span>
                <span class="hljs-type">Object</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(kv.value());
                <span class="hljs-comment">// CASE-2: å½“å‰è®°å½•çš„åºåˆ— &gt;= ç¼“å­˜è¡Œçš„åºåˆ—ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå°±æ˜¯æ¯”è¾ƒse_signçš„å€¼</span>
                <span class="hljs-keyword">if</span> (seqComparator.compare(kv.value(), row) &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> i;

                    <span class="hljs-comment">// Multiple sequence fields should be updated at once.</span>
                    <span class="hljs-comment">// é’ˆå¯¹å¤šä¸ªsequnce-groupæ ‡è®°å­—æ®µï¼Œå¦‚"fields.a,b.sequence-group" : "d,e,f", é‚£ä¹ˆå°±ä¼šå¯¹aå’Œbè¿›è¡ŒåŸå­æ“ä½œ</span>
                    <span class="hljs-comment">// å¦‚æœå½“å‰iä½ç½®çš„å­—æ®µæ˜¯sequnce-groupçš„æ ‡è®°å­—æ®µï¼Œå¦‚se_signï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œä¸‹é¢çš„if+forçš„åŸå­æ€§æ“ä½œ</span>
                    <span class="hljs-keyword">if</span> (Arrays.stream(seqComparator.compareFields())
                            .anyMatch(seqIndex -&gt; seqIndex == index)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : seqComparator.compareFields()) {
                            row.setField(
                                    fieldIndex, getters[fieldIndex].getFieldOrNull(kv.value()));
                        }
                        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡çš„æ˜¯å½“å‰sequence-groupæ ‡è®°å­—æ®µçš„å¤„ç†</span>
                    }
                    <span class="hljs-comment">/* æ›´æ–°èšåˆæ“ä½œ
                        1.æœ‰èšåˆå™¨ï¼ŒæŒ‰ç…§èšåˆé€»è¾‘å»æ“ä½œï¼›
                        2.æ— èšåˆå™¨ï¼Œç›´æ¥è¦†ç›–
                        æ³¨æ„ï¼šè¿™é‡Œçš„è¦†ç›–ä¸æ˜¯éç©ºè¦†ç›–ï¼Œå› æ­¤ï¼Œä¸ºäº†è§£å†³nullçš„è¦†ç›–é—®é¢˜ï¼Œéœ€è¦é…ç½®"fields.default-aggregate-function" : "last_non_null_value", å› ä¸ºé»˜è®¤æ˜¯none
                     */</span>
                    row.setField(
                            i, aggregator == <span class="hljs-literal">null</span> ? field : aggregator.agg(accumulator, field));
                }
                <span class="hljs-comment">// CASE-3: å½“å‰è®°å½•çš„åºåˆ— &lt; ç»“æœè¡Œçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œä»ç„¶è¿›è¡Œèšåˆï¼Œè¿™ä¸ªaggReversed(accumulator, field)å…¶å®å°±æ˜¯agg(field,accumulator)å‚æ•°ä½ç½®æ¢äº†ï¼Œæ²¡åŒºåˆ«</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) {
                    row.setField(i, aggregator.aggReversed(accumulator, field));
                }
            }
        }
    }
</code></pre>
<h4 data-id="heading-10">(4) è°ƒç”¨çš„<code>isEmptySequenceGroup()</code></h4>
<p>è¯¥æ–¹æ³•ä¸»è¦ç”¨äºåˆ¤æ–­sequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯å¦å…¨ä¸ºnullçš„</p>
<p><strong>æ³¨æ„</strong>ï¼šåªæœ‰å…¨éƒ¨çš„æ ‡è®°å­—æ®µéƒ½ä¸ºnullæ‰ä¼šè¿›å…¥ç¼“å­˜ï¼Œç„¶åå†å¤„ç†åç»­çš„æ ‡è®°å­—æ®µæ—¶ï¼Œåªéœ€è¦ç”¨ç¼“å­˜åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å¦ä¸ºtrueå³å¯</p>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmptySequenceGroup</span><span class="hljs-params">(
            KeyValue kv, FieldsComparator comparator, <span class="hljs-type">boolean</span>[] isEmptySequenceGroup)</span> {

        <span class="hljs-comment">// If any flag of the sequence fields is set, it means the sequence group is empty.</span>
        <span class="hljs-comment">// CASE-1. ç¼“å­˜å‘½ä¸­ï¼šå¿«é€Ÿåˆ¤æ–­åºåˆ—ç»„ç¬¬ä¸€ä¸ªæ ‡è®°å­—æ®µæ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºï¼Œåˆ™ç›´æ¥return trueäº†</span>
        <span class="hljs-comment">// è¿™é‡Œéœ€è¦ç»“åˆCASE-3æ‰èƒ½è§£é‡Šï¼Œåªæœ‰å…¨éƒ¨çš„æ ‡è®°å­—æ®µéƒ½ä¸ºnullæ‰ä¼šè¿›å…¥ç¼“å­˜ï¼Œç„¶åå†å¤„ç†åç»­çš„æ ‡è®°å­—æ®µæ—¶ï¼Œåªéœ€è¦ç”¨ç¼“å­˜åˆ¤æ–­ç¬¬ä¸€ä¸ªå­—æ®µæ˜¯å¦ä¸ºtrueå³å¯</span>
        <span class="hljs-keyword">if</span> (isEmptySequenceGroup[comparator.compareFields()[<span class="hljs-number">0</span>]]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// CASE-2.éå†å…¨éƒ¨çš„sequnce-groupçš„æ ‡è®°å­—æ®µï¼Œè¿›è¡Œèƒ½åˆ¤ç©ºï¼Œæœ‰ä¸€ä¸ªä¸ä¸ºnullï¼Œåˆ™return falseï¼›</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : comparator.compareFields()) {
            <span class="hljs-keyword">if</span> (getters[fieldIndex].getFieldOrNull(kv.value()) != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }

        <span class="hljs-comment">// Set the flag of all the sequence fields of the sequence group.</span>
        <span class="hljs-comment">// CASE-3.ç¼“å­˜å…¨éƒ¨ä¸ºnullçš„sequnce-groupæ ‡è®°å­—æ®µ</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> fieldIndex : comparator.compareFields()) {
            isEmptySequenceGroup[fieldIndex] = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
</code></pre>
<h4 data-id="heading-11">(5) è°ƒç”¨çš„<code>retractWithSequenceGroup()</code> -- æ ¸å¿ƒ2</h4>
<p>ä»£ç å¤„ç†é€»è¾‘å’Œ<code>updateWithSequenceGroup()</code>ç±»ä¼¼ï¼Œåªæ˜¯æœ€åå¤„ç†æœ‰ç‚¹ä¸åŒï¼Œæ¶‰åŠåˆ°å›æ’¤æ“ä½œ</p>
<p>è¿˜æ˜¯ä»¥ä¸Šé¢çš„æ¡ˆä¾‹</p>
<ol>
<li>è¿­ä»£sequnce-groupçš„æ ‡è®°å­—æ®µçš„æ¯”è¾ƒå™¨ï¼Œè¿™é‡Œæ˜¯se_signï¼›</li>
<li>è¿­ä»£field-aggregate-functionå­—æ®µçš„èšåˆå™¨ï¼Œè¿™é‡Œæ˜¯viewsçš„sumï¼›</li>
<li>éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†ï¼š
<ol>
<li>åŒ¹é…æ‰¾åˆ°å½“å‰ä½ç½®içš„å­—æ®µå¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨ï¼›</li>
<li>åªå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œå› ä¸ºåªæœ‰é…ç½®äº†sequnce-groupçš„æ‰ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•å†…
<ul>
<li>è‹¥å½“å‰è¡Œæ•°æ®çš„sequnce-groupæ ‡è®°å­—æ®µä¸ºnullï¼Œåˆ™ç›´æ¥è·³è¿‡ç»‘å®šå­—æ®µå’Œæ ‡è®°å­—æ®µçš„å…¨éƒ¨å¤„ç†ï¼›</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ—å€¼ &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—å€¼ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå½“å‰è¡Œçš„se_signçš„å€¼ &gt;= rowä¸­çš„se_signå€¼ï¼›
<ol>
<li><strong>å›æ’¤æ ‡è®°å­—æ®µ</strong>ï¼Œå¦‚se_signï¼Œåˆ™è°ƒ<code>init()</code>å®ç°åŸå­æ€§å›æ’¤æ“ä½œï¼›</li>
<li><strong>å›æ’¤å…¶ä»–å­—æ®µ</strong>ï¼›æ— èšåˆå™¨å¦‚uidsï¼Œç”¨nullè¦†ç›–ï¼›æœ‰èšåˆå™¨å¦‚viewsï¼Œè°ƒ<code>aggregator.retract()</code>å»è¿›è¡Œå›æ’¤</li>
</ol>
<blockquote>
<p>åº•å±‚å¦‚sumæ˜¯åšå‡æ³•ï¼Œmaxå’Œminæ˜¯æ²¡æœ‰å›æ’¤çš„ï¼Œè°ƒFieldAggregatorçš„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå…·ä½“çœ‹FieldAggregatorçš„å­ç±»</p>
</blockquote>
</li>
<li>è‹¥å½“å‰è®°å½•kvçš„åºåˆ— &lt; ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œè°ƒ<code>aggregator.retract()</code>å»è¿›è¡Œå›æ’¤ï¼›</li>
</ul>
</li>
</ol>
</li>
</ol>
<blockquote>
<p>æ³¨æ„: å³ä½¿æˆ‘ä»¬é…ç½®äº†"fields.default-aggregate-function" : "last_non_null_value"å›æ’¤çš„æ—¶å€™ä»ç„¶æ˜¯nullï¼Œå› ä¸ºFieldLastNonNullValueAggå‡½æ•°çš„retractå°±æ˜¯å›æ’¤æµçš„å­—æ®µå€¼éç©ºåˆ™ç»™nullï¼Œç©ºç»™accumulator</p>
</blockquote>
<pre><code class="hljs language-java" lang="java">    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">retractWithSequenceGroup</span><span class="hljs-params">(KeyValue kv)</span> {
        <span class="hljs-comment">// 0.åˆå§‹åŒ–updatedSequenceFields</span>
        Set&lt;Integer&gt; updatedSequenceFields = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-comment">// 1.è¿­ä»£æ¯”è¾ƒå™¨ï¼Œå¦‚se_sign</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldsComparator&gt;&gt; comparatorIter =
                fieldSeqComparators.iterator();
        WrapperWithFieldIndex&lt;FieldsComparator&gt; curComparator =
                comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// 2.è¿­ä»£èšåˆå™¨ï¼Œå¦‚viewsçš„sum</span>
        Iterator&lt;WrapperWithFieldIndex&lt;FieldAggregator&gt;&gt; aggIter = fieldAggregators.iterator();
        WrapperWithFieldIndex&lt;FieldAggregator&gt; curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
        <span class="hljs-comment">// è®°å½•å“ªäº›å­—æ®µæ‰€å±çš„sequnce-groupä¸ºnullï¼Œé¿å…å¯¹åŒä¸€ä¸ªç©ºsgç»„è¿›è¡Œé‡å¤å¤„ç†ï¼Œæ¯ä¸€è½®éƒ½ä¼šnewä¸€ä¸ªæ–°çš„ï¼Œé˜²æ­¢ç¼“å­˜å½±å“</span>
        <span class="hljs-type">boolean</span>[] isEmptySequenceGroup = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[getters.length];
        <span class="hljs-comment">// 3.éå†æ‰€æœ‰å­—æ®µè¿›è¡Œæ¯”è¾ƒå’Œèšåˆå¤„ç†</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; getters.length; i++) {
            <span class="hljs-comment">// 3-1ï¼šä¸ºå½“å‰å­—æ®µåŒ¹é…å¯¹åº”çš„æ¯”è¾ƒå™¨å’Œèšåˆå™¨</span>
            <span class="hljs-type">FieldsComparator</span> <span class="hljs-variable">seqComparator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curComparator != <span class="hljs-literal">null</span> &amp;&amp; curComparator.fieldIndex == i) {
                seqComparator = curComparator.getValue();
                curComparator = comparatorIter.hasNext() ? comparatorIter.next() : <span class="hljs-literal">null</span>;
            }

            <span class="hljs-type">FieldAggregator</span> <span class="hljs-variable">aggregator</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (curAgg != <span class="hljs-literal">null</span> &amp;&amp; curAgg.fieldIndex == i) {
                aggregator = curAgg.getValue();
                curAgg = aggIter.hasNext() ? aggIter.next() : <span class="hljs-literal">null</span>;
            }
            <span class="hljs-comment">// 3-2ï¼šåªå¤„ç†æœ‰åŒ¹é…çš„æ¯”è¾ƒå™¨çš„å­—æ®µï¼Œå› ä¸ºåªæœ‰é…ç½®äº†sequnce-groupçš„æ‰ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•å†…</span>
            <span class="hljs-keyword">if</span> (seqComparator != <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// CASE-1: å¦‚æœsequnce-groupçš„æ ‡è®°å­—æ®µæ˜¯null,åˆ™è·³è¿‡è¯¥ç»‘å®šå­—æ®µçš„å¤„ç†ï¼Œæ¯”å¦‚å½“å‰è¡Œä¸­uidsã€pidsã€viewsçš„se_signä¸ºnullï¼Œåˆ™ä¼šè·³è¿‡è¿™ä¸‰ä¸ªå­—æ®µçš„å¤„ç†</span>
                <span class="hljs-keyword">if</span> (isEmptySequenceGroup(kv, seqComparator, isEmptySequenceGroup)) {
                    <span class="hljs-comment">// skip null sequence group</span>
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-comment">// CASE-2: å½“å‰è®°å½•kvçš„åºåˆ— &gt;= ç¼“å­˜è¡Œrowçš„åºåˆ—ï¼Œæ‰§è¡Œèšåˆæ›´æ–°ï¼Œå°±æ˜¯æ¯”è¾ƒse_signçš„å€¼</span>
                <span class="hljs-keyword">if</span> (seqComparator.compare(kv.value(), row) &gt;= <span class="hljs-number">0</span>) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> i;

                    <span class="hljs-comment">// Multiple sequence fields should be updated at once.</span>
                    <span class="hljs-comment">// (1) åŸå­æ€§å›æ’¤æ›´æ–°åºåˆ—ç»„å†…çš„æ ‡è®°å­—æ®µ</span>
                    <span class="hljs-keyword">if</span> (Arrays.stream(seqComparator.compareFields())
                            .anyMatch(field -&gt; field == index)) {
                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> field : seqComparator.compareFields()) {
                            <span class="hljs-comment">// æ²¡å¤„ç†è¿‡è¯¥æ ‡è®°å­—æ®µï¼Œåˆ™è¿›è¡Œå¤„ç†</span>
                            <span class="hljs-keyword">if</span> (!updatedSequenceFields.contains(field)) {
                                <span class="hljs-comment">// è‹¥å½“å‰çš„RowKindä¸º-Dï¼Œä¸”é…ç½®çš„partial-update.remove-record-on-sequence-groupå­—æ®µä¸ºå½“å‰çš„æ ‡è®°fieldï¼Œåˆ™è¿›è¡Œåˆå§‹åŒ–rowï¼Œç„¶åreturnå‡ºå»</span>
                                <span class="hljs-keyword">if</span> (kv.valueKind() == RowKind.DELETE
                                        &amp;&amp; sequenceGroupPartialDelete.contains(field)) {
                                    currentDeleteRow = <span class="hljs-literal">true</span>;
                                    row = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericRow</span>(getters.length);
                                    initRow(row, kv.value());
                                    <span class="hljs-keyword">return</span>;
                                } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// å¦åˆ™ï¼Œç›´æ¥è¦†ç›–åˆ°ç¼“å­˜rowä¸­</span>
                                    row.setField(field, getters[field].getFieldOrNull(kv.value()));
                                    updatedSequenceFields.add(field);
                                }
                            }
                        }
                    }
                    <span class="hljs-comment">// (2) å›æ’¤å…¶ä»–å­—æ®µ</span>
                    <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// retract normal field</span>
                        <span class="hljs-comment">// è‹¥æ²¡æœ‰èšåˆå™¨ï¼Œåˆ™ç”¨nullè¦†ç›–</span>
                        <span class="hljs-keyword">if</span> (aggregator == <span class="hljs-literal">null</span>) {
                            row.setField(i, <span class="hljs-literal">null</span>);
                        } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// è‹¥æœ‰èšåˆå™¨ï¼Œåˆ™è°ƒaggregator.retract()å»è¿›è¡Œå›æ’¤ï¼Œåº•å±‚å¦‚sumæ˜¯åšå‡æ³•ï¼Œmaxå’Œminæ˜¯æ²¡æœ‰å›æ’¤çš„ï¼Œè°ƒFieldAggregatorçš„ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå…·ä½“çœ‹FieldAggregatorçš„å­ç±»</span>
                            <span class="hljs-comment">// retract agg field</span>
                            <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(row);
                            row.setField(
                                    i,
                                    aggregator.retract(
                                            accumulator, getters[i].getFieldOrNull(kv.value())));
                        }
                    }
                }
                <span class="hljs-comment">// CASE-3: å½“å‰è®°å½•çš„åºåˆ— &lt; ç»“æœè¡Œçš„åºåˆ—ï¼Œä½†æœ‰èšåˆå™¨ï¼Œè°ƒaggregator.retract()å»è¿›è¡Œå›æ’¤</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aggregator != <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// retract agg field for old sequence</span>
                    <span class="hljs-type">Object</span> <span class="hljs-variable">accumulator</span> <span class="hljs-operator">=</span> getters[i].getFieldOrNull(row);
                    row.setField(
                            i,
                            aggregator.retract(accumulator, getters[i].getFieldOrNull(kv.value())));
                }
            }
        }
    }
</code></pre>
<h3 data-id="heading-12">4.<code>getResult()</code>è·å–åˆå¹¶åçš„ç»“æœ</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è·å–åˆå¹¶åçš„ç»“æœ</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> KeyValue <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// é‡‡ç”¨reusedç¼“å­˜kvå®ä¾‹ï¼Œé¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (reused == <span class="hljs-literal">null</span>) {
        reused = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KeyValue</span>();
    }
    <span class="hljs-comment">/* æ ¹æ®ä¸¤ä¸ªçŠ¶æ€åˆ¤æ–­æœ€ç»ˆçš„å˜æ›´ç±»å‹
        1. currentDeleteRowï¼šæ ‡è®° â€œå½“å‰è®°å½•æ˜¯å¦éœ€è¦è¢«åˆ é™¤â€ï¼Œåœ¨ä¸Šé¢retractWithSequenceGroupä¸­æ‰§è¡Œ-Då›æ’¤çš„æ—¶å€™ä¼šèµ‹true
        2. !meetInsertï¼šæ ‡è®° â€œå½“å‰è®°å½•æ˜¯å¦ä¸æ»¡è¶³æ’å…¥æ¡ä»¶â€ï¼Œé‡ç½®æ˜¯falseï¼Œaddä¼šç»™true
    è‹¥currentDeleteRowä¸ºtrue æˆ– !meetInsertä¸ºtrueï¼šç”ŸæˆRowKind.DELETE
     */</span>
    <span class="hljs-type">RowKind</span> <span class="hljs-variable">rowKind</span> <span class="hljs-operator">=</span> currentDeleteRow || !meetInsert ? RowKind.DELETE : RowKind.INSERT;
    <span class="hljs-keyword">return</span> reused.replace(currentKey, latestSequenceNumber, rowKind, row); <span class="hljs-comment">// æ›´æ–°åˆå¹¶åçš„ç»“æœå¹¶è¿”å›</span>
}
</code></pre>
<h3 data-id="heading-13">5.<code>requireCopy()</code></h3>
<p>ä¸éœ€è¦å¤åˆ¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Override</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">requireCopy</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h2 data-id="heading-14">ä¸‰.æ€»ç»“</h2>
<p>é¦–å…ˆæ˜¯å‚æ•°é…ç½®</p>
<ol>
<li>private final boolean ignoreDelete; -&gt; ç”±<code>ignore-delete</code>é…ç½®ç»‘å®š;</li>
<li>private final List&lt;WrapperWithFieldIndex&gt; fieldSeqComparators; -&gt; ç”±<code>sequnce-group</code>é…ç½®ç»‘å®š;</li>
<li>private final boolean fieldSequenceEnabled; -&gt; ä¸Šé¢å‚æ•°fieldSeqComparatorsä¸ä¸ºç©ºï¼Œåˆ™å®ƒä¸ºtrue;</li>
<li>private final List&lt;WrapperWithFieldIndex&gt; fieldAggregators; -&gt; ç”±<code>aggregate-function</code>ç»‘å®š;</li>
<li>private final boolean removeRecordOnDelete; -&gt; ç”±<code>partial-update.remove-record-on-delete</code>é…ç½®ç»‘å®š;</li>
<li>private final Set sequenceGroupPartialDelete; -&gt; ç”±<code>partial-update.remove-record-on-sequence-group</code>é…ç½®ç»‘å®šï¼›</li>
</ol>
<p>å…¶æ¬¡æ˜¯addèšåˆæµç¨‹
æ¡ˆä¾‹ï¼š</p>
<blockquote>
<p>"fields.se_sign.sequence-group" : "uids,pids,views",<br/>
"fields.views.aggregate-function" : "sum",</p>
</blockquote>
<ol>
<li>è‹¥å½“å‰è¡Œkvæ•°æ®çš„RowKindä¸º-U/-Dï¼Œåˆ™è¿›è¡Œå›æ’¤æ“ä½œ;</li>
<li>è‹¥å½“å‰è¡Œkvæ•°æ®çš„RowKindä¸º+I/+Uï¼Œåˆ™è¿›è¡Œupdateèšåˆæ›´æ–°æ“ä½œ;</li>
<li>é‡ç‚¹æ˜¯é…ç½®sequnce-groupçš„å­—æ®µï¼Œåˆ†ä¸ºæ ‡è®°å­—æ®µå’Œç»‘å®šå­—æ®µ
<ul>
<li>æ ‡è®°å­—æ®µï¼šå¦‚se_signï¼Œä¼šè¿›è¡ŒåŸå­æ€§å›æ’¤/æ›´æ–° -- å…¶å®å°±æ˜¯è¦†ç›–</li>
<li>ç»‘å®šå­—æ®µï¼šå¦‚uidsã€viewsï¼Œä¼šè¿›è¡Œå›æ’¤/æ›´æ–°
<ul>
<li>éèšåˆçš„ï¼šå›æ’¤ä¼šç›´æ¥ç»™nullï¼›æ›´æ–°æ˜¯ç›´æ¥è¦†ç›–</li>
<li>èšåˆçš„ï¼šè°ƒèšåˆå™¨çš„retract()å›æ’¤ï¼Œå¦‚sumå°±æ˜¯åšå‡æ³•ï¼›æ›´æ–°æ˜¯ç›´æ¥è°ƒagg()èšåˆï¼Œå¦‚sumæ˜¯åšåŠ æ³•</li>
</ul>
</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>