<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹]]></title>    <link>https://juejin.cn/post/7575031395862855726</link>    <guid>https://juejin.cn/post/7575031395862855726</guid>    <pubDate>2025-11-22T11:36:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575031395862855726" data-draft-id="7575065042158698546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2025-11-22T11:36:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å…‰ä¹‹æ¢¦"/> <meta itemprop="url" content="https://juejin.cn/user/1579348606325623"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŠopenGausså…¨å¯†æ€ä¸é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šäº‘ä¸Šæ•°æ®å®‰å…¨ä¸å¯ä¿¡çš„æ–°èŒƒå¼ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1579348606325623/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å…‰ä¹‹æ¢¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:36:34.000Z" title="Sat Nov 22 2025 11:36:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>openGauss æ¨å‡º <strong>å…¨å¯†æ€è®¡ç®—ï¼ˆFully Encrypted Databaseï¼‰</strong> Â ä¸ <strong>é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼ˆLedger DBï¼‰</strong> ï¼Œä»¥â€œå¯ä¿¡æ‰§è¡Œç¯å¢ƒ + åˆ†å¸ƒå¼æ ¡éªŒè´¦æœ¬â€ä¸ºæ ¸å¿ƒï¼Œå®ç°äº†ä»â€œæ•°æ®å®‰å…¨â€åˆ°â€œæ•°æ®å¯ä¿¡â€çš„è·¨è¶Šã€‚</p>
<h2 data-id="heading-0"><strong>å…¨å¯†æ€è®¡ç®—ï¼šæ•°æ®ä¸è§£å¯†ä¹Ÿèƒ½ç®—</strong></h2>
<p>å…¨å¯†æ€è®¡ç®—çš„ç›®æ ‡æ˜¯ï¼š</p>
<p>â€œè®©æ•°æ®åœ¨åŠ å¯†çŠ¶æ€ä¸‹å®Œæˆè¯»å†™ã€æŸ¥è¯¢ä¸è®¡ç®—ï¼Œè®©æ•°æ®åº“ç®¡ç†å‘˜ä¹Ÿæ— æ³•çª¥è§†æ˜æ–‡ã€‚â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d9388862e404221a08df2905bf247f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=asvUy77qhj%2F8bpEmOcFO%2BbEF414%3D" alt="" loading="lazy"/>Â </p>
<p>è¯¥å›¾å±•ç¤ºäº† openGauss åœ¨<strong>åŠ å¯†é©±åŠ¨å±‚ã€æ•°æ®åº“å†…æ ¸å±‚ã€å¯ä¿¡æ‰§è¡Œç¯å¢ƒ</strong>ä¸‰å±‚ç»“æ„ä¸‹çš„æ•°æ®æµåŠ¨è·¯å¾„ï¼š</p>
<p>1.Â Â <strong>Application API</strong>ï¼šä¸Šå±‚ä¸šåŠ¡ä»¥æ˜æ–‡å½¢å¼æäº¤ SQLï¼›</p>
<p>2.Â Â <strong>ODBC/JDBC é©±åŠ¨</strong>ï¼šè´Ÿè´£å°†æ˜æ–‡è½¬ä¸ºå¯†æ–‡ï¼›</p>
<p>3.Â Â <strong>User-Side åŠ å¯†æ¨¡å—</strong>ï¼šåœ¨å®¢æˆ·ç«¯å®ŒæˆåŠ å¯†ï¼Œä¸ä¼ è¾“æ˜æ–‡ï¼›</p>
<p>4.Â Â <strong>GaussDB Kernel</strong>ï¼šåœ¨å¯†æ–‡çŠ¶æ€ä¸‹æ‰§è¡ŒæŸ¥è¯¢ï¼›</p>
<p>5.Â Â <strong>TEEï¼ˆå¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼‰</strong> ï¼šåœ¨éš”ç¦»ç¡¬ä»¶åŒºåŸŸä¸­è¿›è¡Œæ˜æ–‡è®¡ç®—ï¼›</p>
<p>6.Â Â <strong>REEï¼ˆRich Execution Environmentï¼‰</strong> ï¼šå¤„ç†å¯†æ–‡æ“ä½œï¼Œä¿éšœæ€§èƒ½ã€‚</p>
<p>æ•°æ®å…¨ç¨‹å¯†æ–‡ä¼ è¾“ä¸è®¡ç®—ï¼ŒæœåŠ¡å™¨ç«¯ä¸ä¿å­˜ä»»ä½•æ˜æ–‡å¯†é’¥ã€‚</p>
<p>Â </p>
<h2 data-id="heading-1"><strong>ä¸‰å±‚å¯†é’¥æœºåˆ¶ä¸åŠ å¯†æµç¨‹</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/780981a874344bf98a60aa8a11adc21d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=mdsb8mBpVAfRwfPZtDRCQL3GpPI%3D" alt="" loading="lazy"/>Â </p>
<p>å¯†é’¥ä½“ç³»åŒ…æ‹¬ä¸‰ç±»ï¼š</p>
<p>1.Â Â <strong>æ ¹å¯†é’¥ï¼ˆRoot Keyï¼‰</strong></p>
<p>2.Â Â å­˜å‚¨äºæ“ä½œç³»ç»Ÿå¯†é’¥ç®¡ç†æ¨¡å—ï¼ˆå¦‚ secGearã€EulerOS KMSï¼‰ï¼›<strong>ä¸»å¯†é’¥ï¼ˆMaster Keyï¼‰</strong></p>
<p>3.Â Â ç”±å®¢æˆ·ç«¯ç”Ÿæˆå¹¶é€šè¿‡å¯ä¿¡é€šé“ä¼ è¾“ç»™æ•°æ®åº“å†…æ ¸ï¼›<strong>åˆ—åŠ å¯†å¯†é’¥ï¼ˆColumn Encryption Key, CEKï¼‰</strong> Â ç»‘å®šç‰¹å®šåˆ—æˆ–å­—æ®µï¼Œå®ç°ç»†ç²’åº¦æ•°æ®åŠ å¯†ã€‚</p>
<p>Â </p>
<p>åŠ å¯†æµç¨‹å¦‚ä¸‹ï¼š</p>
<p>1.Â Â <strong>å®¢æˆ·ç«¯å±‚åŠ å¯†</strong>ï¼šæ•°æ®åœ¨æœ¬åœ°é€šè¿‡ CEK åŠ å¯†ï¼›</p>
<p>2.Â Â <strong>ä¼ è¾“å±‚ä¿æŠ¤</strong>ï¼šé€šè¿‡ SSL / TEE é€šé“åŠ å¯†ä¼ è¾“ï¼›</p>
<p>3.Â Â <strong>æ•°æ®åº“å±‚è®¡ç®—</strong>ï¼šåœ¨å¯†æ–‡çŠ¶æ€ä¸‹å®Œæˆç­‰å€¼æˆ–èŒƒå›´æŸ¥è¯¢ã€‚</p>
<p>Â </p>
<h2 data-id="heading-2"><strong>å¯†æ€è®¡ç®—æ•°æ®æµï¼šä»åŠ å¯†åˆ°æŸ¥è¯¢çš„å…¨è¿‡ç¨‹</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4c882fe913d43d089a7f7f65c420c21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=m%2FjJEn3r7Z7ePq2RDCGegTdqx4Q%3D" alt="" loading="lazy"/>Â </p>
<p>å®ä¾‹æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> c1 <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> c1 <span class="hljs-operator">&gt;</span> <span class="hljs-number">123</span>;
</code></pre>
<p>1 å®¢æˆ·ç«¯ä½¿ç”¨ CEK åŠ å¯†å¸¸é‡ 123 â†’ 0xfe31da05ï¼›</p>
<p>2 åŠ å¯†è¯·æ±‚é€šè¿‡ SSL é€šé“å‘é€è‡³ openGaussï¼›</p>
<p>3 GaussDB åœ¨ <strong>REE ç¯å¢ƒ</strong>æ‰§è¡Œå¯†æ–‡æ¯”è¾ƒï¼›</p>
<p>4 è‹¥å¯ç”¨ç¡¬ä»¶ TEEï¼Œåˆ™åœ¨å®‰å…¨ enclave ä¸­æ‰§è¡Œæ˜æ–‡è¿ç®—ï¼›</p>
<p>5 è¿”å›ç»“æœæ—¶å†ç”±å®¢æˆ·ç«¯è§£å¯†å±•ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6eae84af9597411b8b474bb5d48f935f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=ws9K9pg8%2FyFCH0Wvmh%2FFx5oBIyM%3D" alt="" loading="lazy"/>Â 
è¿™æ ·ï¼ŒæœåŠ¡å™¨ç«¯å³ä½¿è¢«æ”»ç ´ï¼Œä¹Ÿæ— æ³•æ¨å¯¼å‡ºçœŸå®ä¸šåŠ¡æ•°æ®ã€‚</p>
<p>Â </p>
<h2 data-id="heading-3"><strong>é˜²ç¯¡æ”¹è´¦æœ¬æ•°æ®åº“ï¼šå¯ä¿¡å¯è¿½æº¯çš„äº‹åŠ¡é“¾</strong></h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b45b6249a1d34a8e92f6fffe3f0fa475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=sd5In60oF2nxs6mKFgh%2Flpk8pEg%3D" alt="" loading="lazy"/>Â </p>
<p>è´¦æœ¬æ•°æ®åº“æ˜¯åœ¨ä¼ ç»Ÿäº‹åŠ¡æ•°æ®åº“ï¼ˆACIDï¼‰åŸºç¡€ä¸Šæ‰©å±•çš„<strong>åŠ å¯†æ—¶é—´é“¾ç³»ç»Ÿ</strong>ï¼Œ</p>
<p>å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<p>1.Â Â <strong>å¢é‡æ ¡éªŒç®—æ³•</strong>ï¼šæ¯ä¸ª Checkpoint å‡è®°å½•å¢é‡å˜æ›´å“ˆå¸Œï¼›</p>
<p>2.Â Â <strong>ä¸€è‡´æ€§éªŒè¯</strong>ï¼šä»»æ„èŠ‚ç‚¹å¯å¿«é€Ÿæ ¡éªŒè´¦æœ¬ä¸€è‡´æ€§ï¼›</p>
<p>3.Â Â <strong>åˆ†å¸ƒå¼å­˜å‚¨</strong>ï¼šè´¦æœ¬åˆ‡ç‰‡ï¼ˆslice1, slice2, â€¦ï¼‰æ”¯æŒè·¨èŠ‚ç‚¹äº’å®¡ã€‚</p>
<p>è´¦æœ¬è¡¨ç»“æ„demoï¼š
Â </p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> audit_ledger (  
Â Â Â Â tx_id <span class="hljs-type">BIGINT</span>,  
Â Â Â Â operator TEXT,  
Â Â Â Â action TEXT,  
Â Â Â Â ts <span class="hljs-type">TIMESTAMP</span>  
) <span class="hljs-keyword">WITH</span> (ledger <span class="hljs-operator">=</span> <span class="hljs-string">'on'</span>);  
</code></pre>
<p>æ•°æ®å†™å…¥æ—¶è‡ªåŠ¨ç”Ÿæˆé“¾å¼å“ˆå¸Œï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL">TX_HASH: <span class="hljs-number">8</span>fe91ac9cde0...  
PREV_HASH: <span class="hljs-number">3</span>ae15f477b81...  
</code></pre>
<p>ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤è´¦æœ¬é“¾å…³ç³»ï¼Œæ”¯æŒâ€œä¸å¯ç¯¡æ”¹ã€å¯è¿½æº¯â€çš„å†å²æŸ¥è¯¢ã€‚</p>
<p>Â </p>
<h3 data-id="heading-4"><strong>æ ¡éªŒä¸æ¢å¤</strong></h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- éªŒè¯è´¦æœ¬å®Œæ•´æ€§  </span>
<span class="hljs-keyword">SELECT</span> ledger_verify(<span class="hljs-string">'audit_ledger'</span>);  
</code></pre>
<p>Â 
è¾“å‡ºï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL">Ledger verified: OK (<span class="hljs-keyword">no</span> tampering detected)  
</code></pre>
<p>å³ä½¿ä¸»æœºé­åˆ°ç ´åï¼Œå¤‡æœºè´¦æœ¬é“¾ä»èƒ½å®Œæ•´æ¢å¤</p>
<p>Â </p>
<h2 data-id="heading-5"><strong>å¯ä¿¡æ‰§è¡Œç¯å¢ƒï¼ˆTEEï¼‰ä¸å¯†æ€è®¡ç®—ååŒ</strong></h2>
<p>openGauss çš„å…¨å¯†æ€èƒ½åŠ›ä¸ <strong>secGear + Kunpeng + EulerOS</strong>Â æ·±åº¦é›†æˆï¼Œå½¢æˆâ€œè½¯ç¡¬ä¸€ä½“åŒ–å¯ä¿¡æ‰§è¡Œç¯å¢ƒâ€ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52db432c88464cf6849f28ebc47830a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YWJ5LmL5qKm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764416194&amp;x-signature=hRbDBeo4Qv4QrCq7ZsVFcChaHC4%3D" alt="" loading="lazy"/>Â </p>
<p>è¿™ç§â€œTEE + æ•°æ®åº“â€çš„è®¾è®¡ä½¿å¾—å¯†æ–‡è®¡ç®—åœ¨ç¡¬ä»¶éš”ç¦»ç©ºé—´æ‰§è¡Œï¼Œä»è€Œå®ç°<strong>åŠ å¯†è®¡ç®—æ€§èƒ½æå‡ 2.3Ã—ï¼Œæ³„éœ²é£é™©è¶‹è¿‘äºé›¶</strong>ã€‚</p>
<p>Â </p>
<h2 data-id="heading-6"><strong>è½åœ°å®è·µï¼š</strong> <strong>å¯†æ€è®¡ç®— + è´¦æœ¬å®¡è®¡ä¸€ä½“åŒ–æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-7">ä¸€ã€Â  <strong><strong><strong>ç¯å¢ƒä¸åº“åˆå§‹åŒ–ï¼ˆopenGaussï¼‰</strong></strong></strong></h3>
<p>ä½ å·²æœ‰å¯ç”¨çš„ openGauss é›†ç¾¤å³å¯ï¼Œä»¥ä¸‹å‘½ä»¤å‡åœ¨ <strong>gsql</strong>Â å®¢æˆ·ç«¯æ‰§è¡Œã€‚è‹¥æ˜¯å®¹å™¨/å•æœºç‰ˆï¼Œåªè¦èƒ½ gsql -d postgres -p 5432 -r è¿›åº“å³å¯ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"># è¿æ¥ï¼ˆè¯·æ›¿æ¢ç«¯å£<span class="hljs-operator">/</span>ç”¨æˆ·<span class="hljs-operator">/</span>å¯†ç ï¼‰  
gsql <span class="hljs-operator">-</span>d postgres <span class="hljs-operator">-</span>p <span class="hljs-number">5432</span> <span class="hljs-operator">-</span>U omm <span class="hljs-operator">-</span>r  
</code></pre>
<h4 data-id="heading-8">1)Â  <strong><strong><strong>å»ºä¸šåŠ¡åº“ä¸ä¸“ç”¨ schemaã€è§’è‰²</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ä¸šåŠ¡æ•°æ®åº“  </span>
<span class="hljs-keyword">CREATE</span> DATABASE secure_demo;  
\c secure_demo;  
Â   
<span class="hljs-comment">-- åº”ç”¨ä¸“ç”¨ schema ä¸è§’è‰²  </span>
<span class="hljs-keyword">CREATE</span> SCHEMA IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> secure <span class="hljs-keyword">AUTHORIZATION</span> <span class="hljs-built_in">CURRENT_USER</span>;  
<span class="hljs-keyword">CREATE</span> ROLE app_rw LOGIN PASSWORD <span class="hljs-string">'AppSecret!123'</span>;  
<span class="hljs-keyword">GRANT</span> USAGE <span class="hljs-keyword">ON</span> SCHEMA secure <span class="hljs-keyword">TO</span> app_rw;  
</code></pre>
<h3 data-id="heading-9"><strong>äºŒã€</strong> <strong><strong><strong>è¡¨ç»“æ„è®¾è®¡ï¼šå¯†æ€å­˜å‚¨ + ç­‰å€¼ç´¢å¼• + è´¦æœ¬è¡¨</strong></strong></strong></h3>
<p>æˆ‘ä»¬é‡‡ç”¨<strong>åº”ç”¨ä¾§ AES-GCM åŠ å¯†</strong>ï¼Œæ•°æ®åº“é‡Œåªå­˜<strong>å¯†æ–‡</strong>ï¼›ä¸ºäº†æ”¯æŒ<strong>ç­‰å€¼æŸ¥è¯¢</strong>ï¼Œé¢å¤–å­˜ä¸€åˆ—<strong>ä¸å¯é€†çš„ç­‰å€¼æ£€ç´¢é”®</strong>ï¼ˆHMAC/Hashï¼‰ï¼Œå¹¶åœ¨è¯¥åˆ—ä¸Šå»ºç´¢å¼•ã€‚å®¡è®¡æ–¹é¢ï¼Œç”¨ä¸€å¼ <strong>é“¾å¼è´¦æœ¬è¡¨</strong>è®°å½•æ¯æ¬¡æ“ä½œçš„æ‘˜è¦å“ˆå¸Œï¼Œè§¦å‘å™¨è‡ªåŠ¨å†™å…¥ï¼Œæ”¯æŒä¹‹åçš„<strong>é“¾å¼æ ¡éªŒ</strong>ã€‚</p>
<h4 data-id="heading-10">1)Â  <strong><strong><strong>ä¸šåŠ¡æ•°æ®è¡¨ï¼ˆåªå­˜å¯†æ–‡ï¼Œä¸è½æ˜æ–‡ï¼‰</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> secure;  
Â   
<span class="hljs-comment">-- ç”¨æˆ·ä¿¡æ¯å¯†æ€è¡¨ï¼šä¸ä¿å­˜æ˜æ–‡  </span>
<span class="hljs-comment">-- name_hashï¼šç­‰å€¼æ£€ç´¢é”®ï¼ˆHMAC/MD5/å…¶ä»–ä¸å¯é€†æ‘˜è¦ï¼‰ï¼Œç”¨äº WHERE ç­‰å€¼æŸ¥è¯¢  </span>
<span class="hljs-comment">-- name_ct/phone_ctï¼šAES-GCM å¯†æ–‡ï¼ˆå¯†é’¥/nonce åœ¨å®¢æˆ·ç«¯ç®¡ç†ï¼Œä¸å…¥åº“ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.user_info_secure (  
Â Â Â Â id Â Â Â Â Â Â Â Â Â BIGSERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â name_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">64</span>) Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- 64ä½åå…­è¿›åˆ¶ä¸²ï¼ˆç¤ºä¾‹ç”¨ SHA-256 çš„ hexï¼‰  </span>
Â Â Â Â name_ct Â Â Â Â BYTEA Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- å§“åå¯†æ–‡  </span>
Â Â Â Â phone_ct Â Â Â BYTEA Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â <span class="hljs-comment">-- æ‰‹æœºå¯†æ–‡  </span>
Â Â Â Â created_at Â <span class="hljs-type">TIMESTAMP</span> Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now()  
);  
Â   
<span class="hljs-comment">-- ç­‰å€¼æŸ¥è¯¢ç´¢å¼•ï¼ˆå‘½ä¸­ name_hashï¼‰  </span>
<span class="hljs-keyword">CREATE</span> INDEX idx_user_info_name_hash <span class="hljs-keyword">ON</span> secure.user_info_secure (name_hash);  
</code></pre>
<h4 data-id="heading-11">2)Â  <strong><strong><strong>è´¦æœ¬è¡¨ï¼ˆé“¾å¼å“ˆå¸Œï¼Œé˜²ç¯¡æ”¹ï¼‰</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ç®€æ´çš„è´¦æœ¬è¡¨ï¼šæ¯æ¡ä¸šåŠ¡å˜æ›´éƒ½ä¼šè®°ä¸€æ¡ â€œåŒºå—â€  </span>
<span class="hljs-comment">-- prev_hash ä¸²èµ·é“¾è·¯ï¼Œcurr_hash ä¸ºæœ¬æ¬¡åŒºå—å“ˆå¸Œï¼ˆå«å‰ä¸€ä¸ªåŒºå—å“ˆå¸Œã€å½“å‰è¡Œæ‘˜è¦ã€æ—¶é—´æˆ³ç­‰ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.audit_ledger (  
Â Â Â Â block_id Â Â Â BIGSERIAL <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â table_name Â TEXT Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â op Â Â Â Â Â Â Â Â Â TEXT Â Â Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- INSERT / UPDATE / DELETE  </span>
Â Â Â Â row_pk Â Â Â Â Â <span class="hljs-type">BIGINT</span> Â Â Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- ç›®æ ‡è¡Œä¸»é”®ï¼ˆuser_info_secure.idï¼‰  </span>
Â Â Â Â row_digest Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>, Â Â Â Â Â Â <span class="hljs-comment">-- è¯¥è¡Œæ‘˜è¦ï¼ˆä½¿ç”¨ md5 ä»¥é¿å…æ‰©å±•ä¾èµ–ï¼‰  </span>
Â Â Â Â prev_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â curr_hash Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) Â Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,  
Â Â Â Â op_at Â Â Â Â Â Â <span class="hljs-type">TIMESTAMP</span> Â Â <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> now()  
);  
Â   
<span class="hljs-comment">-- ä¿å­˜å…¨å±€â€œä¸Šä¸€ä¸ªåŒºå—å“ˆå¸Œâ€ï¼›æˆ‘ä»¬ç”¨ä¸€å¼ ä»… 1 è¡Œçš„å°è¡¨åšâ€œé“¾å¤´æŒ‡é’ˆâ€  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> secure.audit_head (  
Â Â Â Â id Â Â Â Â Â <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,  
Â Â Â Â tip Â Â Â Â <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> Â Â Â Â Â Â Â <span class="hljs-comment">-- æœ€æ–°åŒºå—å“ˆå¸Œ  </span>
);  
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> secure.audit_head (id, tip) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, md5(<span class="hljs-string">'genesis'</span>)); Â <span class="hljs-comment">-- åˆ›ä¸– tip </span>
</code></pre>
<h4 data-id="heading-12">3)Â  <strong><strong><strong>è§¦å‘å™¨ï¼šè‡ªåŠ¨å†™è´¦æœ¬åŒºå—</strong></strong></strong></h4>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- ç”Ÿæˆå½“å‰è¡Œçš„æ‘˜è¦ï¼ˆæŠŠå…³é”®å­—æ®µåºåˆ—åŒ–å md5ï¼‰  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.digest_user_row(_id <span class="hljs-type">BIGINT</span>, _name_ct BYTEA, _phone_ct BYTEA)  
<span class="hljs-keyword">RETURNS</span> <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>)  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â s TEXT;  
<span class="hljs-keyword">BEGIN</span>  
Â Â <span class="hljs-comment">-- æ³¨æ„ï¼šæˆ‘ä»¬ä¸æŠŠå¯†é’¥ç›¸å…³ä¿¡æ¯è½åº“ï¼›ä»…å¯¹å¯†æ–‡è¿›è¡Œæ‘˜è¦  </span>
Â Â s :<span class="hljs-operator">=</span> _id <span class="hljs-operator">||</span> <span class="hljs-string">':'</span> <span class="hljs-operator">||</span> encode(_name_ct, <span class="hljs-string">'hex'</span>) <span class="hljs-operator">||</span> <span class="hljs-string">':'</span> <span class="hljs-operator">||</span> encode(_phone_ct, <span class="hljs-string">'hex'</span>);  
Â Â <span class="hljs-keyword">RETURN</span> md5(s);  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-comment">-- å†™å…¥è´¦æœ¬åŒºå—ï¼šprev_hash = audit_head.tipï¼›curr_hash = md5(prev_hash || row_digest || op || now)  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.append_ledger(_tbl TEXT, _op TEXT, _pk <span class="hljs-type">BIGINT</span>, _row_digest <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>))  
<span class="hljs-keyword">RETURNS</span> VOID  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â prev <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
Â Â now_hash <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
<span class="hljs-keyword">BEGIN</span>  
Â Â <span class="hljs-keyword">SELECT</span> tip <span class="hljs-keyword">INTO</span> prev <span class="hljs-keyword">FROM</span> secure.audit_head <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;  
Â Â now_hash :<span class="hljs-operator">=</span> md5(prev <span class="hljs-operator">||</span> _row_digest <span class="hljs-operator">||</span> _op <span class="hljs-operator">||</span> now()::text);  
Â   
Â Â <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> secure.audit_ledger(table_name,op,row_pk,row_digest,prev_hash,curr_hash)  
Â Â <span class="hljs-keyword">VALUES</span>(_tbl,_op,_pk,_row_digest,prev,now_hash);  
Â   
Â Â <span class="hljs-keyword">UPDATE</span> secure.audit_head <span class="hljs-keyword">SET</span> tip <span class="hljs-operator">=</span> now_hash <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-comment">-- ä¸‰ç±» DML çš„è¡Œçº§è§¦å‘å™¨  </span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">FUNCTION</span> secure.tg_user_info_ledger()  
<span class="hljs-keyword">RETURNS</span> <span class="hljs-keyword">TRIGGER</span>  
<span class="hljs-keyword">LANGUAGE</span> plpgsql <span class="hljs-keyword">AS</span> $$  
<span class="hljs-keyword">DECLARE</span>  
Â Â d <span class="hljs-type">CHAR</span>(<span class="hljs-number">32</span>);  
<span class="hljs-keyword">BEGIN</span>  
Â Â IF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'INSERT'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(NEW.id, NEW.name_ct, NEW.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'INSERT'</span>,NEW.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;  
Â Â ELSIF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'UPDATE'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(NEW.id, NEW.name_ct, NEW.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'UPDATE'</span>,NEW.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">NEW</span>;  
Â Â ELSIF TG_OP <span class="hljs-operator">=</span> <span class="hljs-string">'DELETE'</span> <span class="hljs-keyword">THEN</span>  
Â Â Â Â d :<span class="hljs-operator">=</span> secure.digest_user_row(OLD.id, OLD.name_ct, OLD.phone_ct);  
Â Â Â Â PERFORM secure.append_ledger(<span class="hljs-string">'user_info_secure'</span>,<span class="hljs-string">'DELETE'</span>,OLD.id,d);  
Â Â Â Â <span class="hljs-keyword">RETURN</span> <span class="hljs-keyword">OLD</span>;  
Â Â <span class="hljs-keyword">END</span> IF;  
<span class="hljs-keyword">END</span>;  
$$;  
Â   
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TRIGGER</span> trg_user_info_ledger  
AFTER <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">ON</span> secure.user_info_secure  
<span class="hljs-keyword">FOR</span> <span class="hljs-keyword">EACH</span> <span class="hljs-type">ROW</span> <span class="hljs-keyword">EXECUTE</span> <span class="hljs-keyword">FUNCTION</span> secure.tg_user_info_ledger();  
</code></pre>
<h3 data-id="heading-13"><strong>ä¸‰ã€</strong> <strong><strong><strong>éªŒè¯/å®¡è®¡å·¥å…· SQLï¼ˆé“¾å¼è‡ªæ ¡éªŒï¼‰</strong></strong></strong></h3>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-comment">-- 1) æ£€æŸ¥é“¾è·¯æ˜¯å¦è¿ç»­ï¼ˆcurr_hash-&gt;prev_hashï¼‰  </span>
<span class="hljs-keyword">WITH</span> <span class="hljs-keyword">RECURSIVE</span> chain <span class="hljs-keyword">AS</span> (  
Â Â <span class="hljs-keyword">SELECT</span> block_id, prev_hash, curr_hash  
Â Â <span class="hljs-keyword">FROM</span> secure.audit_ledger  
Â Â <span class="hljs-keyword">WHERE</span> block_id <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">min</span>(block_id) <span class="hljs-keyword">FROM</span> secure.audit_ledger)  
Â Â <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>  
Â Â <span class="hljs-keyword">SELECT</span> l.block_id, l.prev_hash, l.curr_hash  
Â Â <span class="hljs-keyword">FROM</span> secure.audit_ledger l  
Â Â <span class="hljs-keyword">JOIN</span> chain c <span class="hljs-keyword">ON</span> l.prev_hash <span class="hljs-operator">=</span> c.curr_hash  
)  
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> blocks_on_chain, (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> secure.audit_ledger) <span class="hljs-keyword">AS</span> total_blocks  
<span class="hljs-keyword">FROM</span> chain;  
Â   
<span class="hljs-comment">-- 2) é‡ç®—æ¯ä¸ªåŒºå—çš„ curr_hash å¹¶æ¯”å¯¹ï¼Œæ£€æµ‹æ˜¯å¦è¢«ç¯¡æ”¹  </span>
<span class="hljs-keyword">SELECT</span> block_id,  
Â Â Â Â Â Â Â curr_hash <span class="hljs-keyword">AS</span> stored,  
Â Â Â Â Â Â Â md5(prev_hash <span class="hljs-operator">||</span> row_digest <span class="hljs-operator">||</span> op <span class="hljs-operator">||</span> op_at::text) <span class="hljs-keyword">AS</span> recomputed,  
Â Â Â Â Â Â Â (curr_hash <span class="hljs-operator">=</span> md5(prev_hash <span class="hljs-operator">||</span> row_digest <span class="hljs-operator">||</span> op <span class="hljs-operator">||</span> op_at::text)) <span class="hljs-keyword">AS</span> ok  
<span class="hljs-keyword">FROM</span> secure.audit_ledger  
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> block_id;  
</code></pre>
<h3 data-id="heading-14">å››ã€Â <strong>ä¸šåŠ¡ä¾§å¯†æ€ç­‰å€¼æŸ¥è¯¢ï¼šPython ç«¯å®Œæ•´ä»£ç </strong></h3>
<p>é‡‡ç”¨ cryptography å®ç° <strong>AES-256-GCM</strong>ï¼›</p>
<p><strong>HMAC-SHA256</strong>Â ç”Ÿæˆ name_hashï¼ˆç­‰å€¼æ£€ç´¢é”®ï¼Œå¯é‡å¤ã€ä¸å¯é€†ï¼Œç”¨äº WHERE åŒ¹é…ï¼‰ï¼›</p>
<p>æ˜æ–‡<strong>åªåœ¨å®¢æˆ·ç«¯å†…å­˜</strong>å‡ºç°ï¼ŒopenGauss <strong>ä»…ä¿å­˜å¯†æ–‡</strong>ä¸ hashã€‚
Â </p>
<pre><code class="hljs language-sql" lang="sql"># requirements:  
# Â Â pip install psycopg2<span class="hljs-operator">-</span><span class="hljs-type">binary</span> cryptography  
Â   
import os  
import hmac  
import hashlib  
import secrets  
import psycopg2  
<span class="hljs-keyword">from</span> cryptography.hazmat.primitives.ciphers.aead import AESGCM  
Â   
DSN <span class="hljs-operator">=</span> "dbname=secure_demo user=omm password=YourPass host=127.0.0.1 port=5432"  
Â   
# <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span> å®¢æˆ·ç«¯å¯†é’¥ï¼ˆDemoï¼šæœ¬åœ°ç¯å¢ƒå˜é‡<span class="hljs-operator">/</span>æ–‡ä»¶ï¼›ç”Ÿäº§ç¯å¢ƒè¯·æ¥å…¥ KMS<span class="hljs-operator">/</span>TEEï¼‰ <span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>  
# æ•°æ®åŠ å¯†å¯†é’¥ï¼ˆDEKï¼‰ <span class="hljs-operator">&amp;</span> HMAC å¯†é’¥  
DEK <span class="hljs-operator">=</span> os.environ.get("DEK_HEX") <span class="hljs-keyword">or</span> secrets.token_hex(<span class="hljs-number">32</span>) Â Â # <span class="hljs-number">32</span> bytes <span class="hljs-operator">=</span><span class="hljs-operator">&gt;</span> AES<span class="hljs-number">-256</span>  
HMK <span class="hljs-operator">=</span> os.environ.get("HMK_HEX") <span class="hljs-keyword">or</span> secrets.token_hex(<span class="hljs-number">32</span>) Â Â # <span class="hljs-number">32</span> bytes <span class="hljs-keyword">for</span> HMAC<span class="hljs-operator">-</span>SHA256  
Â   
aesgcm <span class="hljs-operator">=</span> AESGCM(bytes.fromhex(DEK))  
hmac_key <span class="hljs-operator">=</span> bytes.fromhex(HMK)  
Â   
def hmac_sha256_hex(msg: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> str:  
Â Â Â Â <span class="hljs-keyword">return</span> hmac.new(hmac_key, msg, hashlib.sha256).hexdigest()  
Â   
def aes_gcm_encrypt(plaintext: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> bytes:  
Â Â Â Â nonce <span class="hljs-operator">=</span> secrets.token_bytes(<span class="hljs-number">12</span>) Â # GCM æ ‡å‡† <span class="hljs-number">96</span><span class="hljs-operator">-</span>bit nonce  
Â Â Â Â ct <span class="hljs-operator">=</span> aesgcm.encrypt(nonce, plaintext, associated_data<span class="hljs-operator">=</span><span class="hljs-keyword">None</span>)  
Â Â Â Â <span class="hljs-keyword">return</span> nonce <span class="hljs-operator">+</span> ct Â # æ‹¼æ¥å­˜åº“ï¼šnonce<span class="hljs-operator">|</span>ciphertext<span class="hljs-operator">|</span>tag  
Â   
def aes_gcm_decrypt(<span class="hljs-type">blob</span>: bytes) <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> bytes:  
Â Â Â Â nonce, ct <span class="hljs-operator">=</span> <span class="hljs-type">blob</span>[:<span class="hljs-number">12</span>], <span class="hljs-type">blob</span>[<span class="hljs-number">12</span>:]  
Â Â Â Â <span class="hljs-keyword">return</span> aesgcm.decrypt(nonce, ct, associated_data<span class="hljs-operator">=</span><span class="hljs-keyword">None</span>)  
Â   
def insert_user(name: str, phone: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â name_ct Â Â <span class="hljs-operator">=</span> aes_gcm_encrypt(name.encode("utf-8"))  
Â Â Â Â phone_ct Â <span class="hljs-operator">=</span> aes_gcm_encrypt(phone.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â INSERT INTO secure.user_info_secure (name_hash, name_ct, phone_ct)  
Â Â Â Â Â Â Â Â Â Â Â Â VALUES (%s, %s, %s)  
Â Â Â Â Â Â Â Â Â Â Â Â RETURNING id;  
Â Â Â Â Â Â Â Â """, (name_hash, psycopg2.Binary(name_ct), psycopg2.Binary(phone_ct)))  
Â Â Â Â Â Â Â Â uid <span class="hljs-operator">=</span> cur.fetchone()[<span class="hljs-number">0</span>]  
Â Â Â Â Â Â Â Â print(f"insert ok, id={uid}")  
Â   
def query_user_by_name(name: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â SELECT id, name_ct, phone_ct, created_at  
Â Â Â Â Â Â Â Â Â Â Â Â FROM secure.user_info_secure  
Â Â Â Â Â Â Â Â Â Â Â Â WHERE name_hash = %s  
Â Â Â Â Â Â Â Â Â Â Â Â ORDER BY id;  
Â Â Â Â Â Â Â Â """, (name_hash,))  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> cur.fetchall()  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">result</span> <span class="hljs-operator">=</span> []  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span> uid, name_ct, phone_ct, ts <span class="hljs-keyword">in</span> <span class="hljs-keyword">rows</span>:  
Â Â Â Â Â Â Â Â Â Â Â Â name_pt Â <span class="hljs-operator">=</span> aes_gcm_decrypt(bytes(name_ct)).decode("utf-8")  
Â Â Â Â Â Â Â Â Â Â Â Â phone_pt <span class="hljs-operator">=</span> aes_gcm_decrypt(bytes(phone_ct)).decode("utf-8")  
Â Â Â Â Â Â Â Â Â Â Â Â result.append((uid, name_pt, phone_pt, ts))  
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">result</span>  
Â   
def update_phone(name: str, new_phone: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â phone_ct Â <span class="hljs-operator">=</span> aes_gcm_encrypt(new_phone.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("""  
Â Â Â Â Â Â Â Â Â Â Â Â UPDATE secure.user_info_secure  
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â SET phone_ct = %s  
Â Â Â Â Â Â Â Â Â Â Â Â Â WHERE name_hash = %s;  
Â Â Â Â Â Â Â Â """, (psycopg2.Binary(phone_ct), name_hash))  
Â Â Â Â Â Â Â Â print(f"update rows = {cur.rowcount}")  
Â   
def delete_user(name: str):  
Â Â Â Â name_hash <span class="hljs-operator">=</span> hmac_sha256_hex(name.encode("utf-8"))  
Â Â Â Â <span class="hljs-keyword">with</span> psycopg2.connect(DSN) <span class="hljs-keyword">as</span> conn, conn.cursor() <span class="hljs-keyword">as</span> cur:  
Â Â Â Â Â Â Â Â cur.execute("DELETE FROM secure.user_info_secure WHERE name_hash=%s;", (name_hash,))  
Â Â Â Â Â Â Â Â print(f"delete rows = {cur.rowcount}")  
Â   
if __name__ <span class="hljs-operator">=</span><span class="hljs-operator">=</span> "__main__":  
Â Â Â Â # å†™å…¥ä¸¤æ¡å¯†æ€æ•°æ®  
Â Â Â Â insert_user("å¼ ä¸‰", "13800000001")  
Â Â Â Â insert_user("æå››", "13800000002")  
Â   
Â Â Â Â # ç­‰å€¼æŸ¥è¯¢ï¼ˆåº“ç«¯åŒ¹é… hashï¼Œå®¢æˆ·ç«¯è§£å¯†å±•ç¤ºï¼‰  
Â Â Â Â print("æŸ¥è¯¢ å¼ ä¸‰ï¼š", query_user_by_name("å¼ ä¸‰"))  
Â   
Â Â Â Â # æ›´æ–°ä¸åˆ é™¤ï¼ˆè§¦å‘å™¨ä¼šè‡ªåŠ¨å†™è´¦æœ¬åŒºå—ï¼‰  
Â Â Â Â update_phone("å¼ ä¸‰", "13912345678")  
Â Â Â Â print("æŸ¥è¯¢ å¼ ä¸‰ï¼š", query_user_by_name("å¼ ä¸‰"))  
Â   
Â Â Â Â delete_user("æå››")  
</code></pre>
<h4 data-id="heading-15"><strong>è¿è¡Œç»“æœ</strong></h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">insert</span> ok, id<span class="hljs-operator">=</span><span class="hljs-number">1</span>  
<span class="hljs-keyword">insert</span> ok, id<span class="hljs-operator">=</span><span class="hljs-number">2</span>  
æŸ¥è¯¢ å¼ ä¸‰ï¼š [(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13800000001'</span>, datetime.datetime(<span class="hljs-number">2025</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">33</span>, <span class="hljs-number">47</span>, ...))]  
<span class="hljs-keyword">update</span> <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  
æŸ¥è¯¢ å¼ ä¸‰ï¼š [(<span class="hljs-number">1</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13912345678'</span>, datetime.datetime(<span class="hljs-number">2025</span>, <span class="hljs-number">11</span>, <span class="hljs-number">1</span>, <span class="hljs-number">10</span>, <span class="hljs-number">33</span>, <span class="hljs-number">47</span>, ...))]  
<span class="hljs-keyword">delete</span> <span class="hljs-keyword">rows</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>  
</code></pre>
<h2 data-id="heading-16"><strong>ç»“è¯­</strong></h2>
<p>openGauss é€šè¿‡ <strong>å…¨å¯†æ€è®¡ç®— + è´¦æœ¬æ•°æ®åº“ + TEE ç¡¬ä»¶å®‰å…¨ï¼Œ</strong> æ„å»ºäº†å¯å®ç°â€œ<strong>æ•°æ®ä¸è§£å¯†å¯è®¡ç®—ï¼Œäº¤æ˜“å…¨ç¨‹å¯è¿½æº¯</strong>â€çš„æ•°æ®åº“å®‰å…¨ä½“ç³»ã€‚å®ƒä¸ä»…æ»¡è¶³æ”¿åŠ¡ã€é‡‘èã€èƒ½æºç­‰è¡Œä¸šçš„é«˜å®‰å…¨éœ€æ±‚ï¼Œæ›´ä¸º AI å¤§æ¨¡å‹æä¾›äº†å®‰å…¨å¯ä¿¡çš„æ•°æ®åº•åº§ã€‚æœªæ¥ï¼ŒopenGauss å°†æˆä¸ºäº‘ä¸Šâ€œå¯ä¿¡è®¡ç®— + æ•°æ®æ™ºèƒ½â€èåˆçš„å…³é”®å¼•æ“ï¼Œè®©æ•°æ®çœŸæ­£åšåˆ°ï¼šâ€œ<strong>å¯ç”¨ä¸å¯è§ï¼Œå¯æŸ¥å¯è¯ï¼Œå¯æ§å¯å®¡ã€‚</strong> â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£]]></title>    <link>https://juejin.cn/post/7575230119104299049</link>    <guid>https://juejin.cn/post/7575230119104299049</guid>    <pubDate>2025-11-22T15:20:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575230119104299049" data-draft-id="7575320672570851370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£"/> <meta itemprop="keywords" content="ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-22T15:20:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›´å·¾å“¥è§å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/1222312659548446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312659548446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›´å·¾å“¥è§å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:20:13.000Z" title="Sat Nov 22 2025 15:20:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI é©±åŠ¨ä¸‹çš„ Google Chrome æ‰©å±•å¿«é€Ÿå¼€å‘å®è·µï¼šä»¥å±å¹•æ ‡æ³¨å·¥å…·çš„å®ç°ä¸ºä¾‹ğŸ§£</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae0162f86a6748dc9aac6e114d771e22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=G1d%2BxE8wRHYZXiPGPZ4cY8joewk%3D" alt="æˆªå±2025-11-22 23.18.48.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1P7U4BiED2%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1P7U4BiED2/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">CCFç¨‹åºå‘˜å¤§ä¼šç åŠ›å…¨å¼€ï¼šæ–¹å‘1-å·¥å…·ææ•ˆ-å±å¹•æ ‡æ³¨å·¥å…· | å›´å·¾å“¥è§å°˜ğŸ§£</a></p>
<p><strong>ä½œè€…ï¼š</strong> å›´å·¾å“¥è§å°˜</p>
<p><strong>æ‘˜è¦ï¼š</strong> æœ¬æ–‡è®°å½•äº†åˆ©ç”¨ç™¾åº¦æ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰å‚ä¸ CCCF å¤§ä¼šâ€œé©¬åŠ›å…¨å¼€ AI åŠ é€Ÿâ€æ´»åŠ¨çš„ä½œå“å¼€å‘è¿‡ç¨‹ã€‚è¯¥é¡¹ç›®ç›®æ ‡æ˜¯è§£å†³æ—¥å¸¸å·¥ä½œä¸­çš„ä¿¡æ¯åé¦ˆæ•ˆç‡é—®é¢˜ï¼Œèšç„¦äº<strong>å·¥å…·ææ•ˆ</strong>æ–¹å‘ã€‚é€šè¿‡ AI åŠ é€Ÿå¼€å‘ï¼Œåœ¨<strong>å¤§çº¦ä¸¤å¤©çš„æ—¶é—´</strong>å†…ï¼ŒæˆåŠŸå®Œæˆäº†ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„ Google Chrome å±å¹•æ ‡æ³¨æ‰©å±•æ’ä»¶çš„å¼€å‘ä¸è¿­ä»£ã€‚æœ¬æ–‡é‡ç‚¹é˜è¿°äº†ä»ç®€æ´æç¤ºè¯åˆ°åŠŸèƒ½å®ç°çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä»¥åŠåœ¨è°ƒè¯•å’Œä¼˜åŒ–ä¸­é‡åˆ°çš„æ ¸å¿ƒæŠ€æœ¯é—®é¢˜åŠå…¶è§£å†³åŠæ³•ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a7b42f8aacb4b3d940da85632bfce19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=MTp3djQ7pzohPSwtIlWM4wIJOxw%3D" alt="æˆªå±2025-11-22 23.12.18.png" loading="lazy"/></p>
<hr/>
<h4 data-id="heading-1">ä¸€ã€ å¼•è¨€ï¼ˆIntroductionï¼‰</h4>
<p>ä¸ºå“åº”ç™¾åº¦æ–‡å¿ƒå¿«ç ï¼ˆComateï¼‰CCF å¤§ä¼šçš„å·å¬ï¼Œå³åœ¨â€œæœ€ä½³ææ•ˆâ€ã€â€œæœ€ä½³åˆ›æ„â€ç­‰æ–¹å‘åˆ©ç”¨ AI æé€Ÿå¼€å‘ï¼Œæˆ‘ä»¬é€‰å®šäº†å¼€å‘ä¸€æ¬¾å®ç”¨çš„å±å¹•æ ‡æ³¨æ‰©å±•æ’ä»¶ã€‚è¯¥æ’ä»¶æ—¨åœ¨ä¸ºç”¨æˆ·æä¾›å¿«é€Ÿçš„ç½‘é¡µæ ‡è®°èƒ½åŠ›ï¼Œæ”¯æŒç”»ç¬”ã€çŸ©å½¢ã€ç®­å¤´ä»¥åŠå¯ç§»åŠ¨çš„æ–‡å­—æ ‡æ³¨ç­‰åŠŸèƒ½ã€‚æœ¬æ¬¡å¼€å‘çš„æ ¸å¿ƒä»·å€¼åœ¨äºéªŒè¯å’Œå±•ç¤º AI å·¥å…·åœ¨å¤æ‚åº”ç”¨å¼€å‘ï¼Œç‰¹åˆ«æ˜¯ Chrome æ‰©å±•å¼€å‘é¢†åŸŸçš„åŠ é€Ÿèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-2">äºŒã€ å¼€å‘æ–¹æ³•ä¸ AI åŠ é€Ÿå®æ–½ï¼ˆMethodology and Implementationï¼‰</h4>
<p>æ•´ä¸ªé¡¹ç›®å¯åŠ¨åï¼Œå¼€å‘é€Ÿåº¦çš„å…³é”®ä¾èµ–äºæ–‡å¿ƒå¿«ç çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ã€‚</p>
<p><strong>1. åˆå§‹ä»£ç ç”Ÿæˆï¼š</strong> é¡¹ç›®æ²¡æœ‰ä»é›¶å¼€å§‹ç¼–å†™åŸºç¡€æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥å‘æ–‡å¿ƒå¿«ç è¾“å…¥äº†ä¸€ä¸ªç®€æ´çš„æ ¸å¿ƒæç¤ºè¯ï¼Œè¦æ±‚å…¶ç”Ÿæˆæ’ä»¶çš„æ¡†æ¶å’ŒåŠŸèƒ½ã€‚</p>
<ul>
<li><strong>ä½¿ç”¨çš„æç¤ºè¯ä¸ºï¼š</strong> â€œä½ æ˜¯ä¸€ä¸ªè°·æ­Œæ‰©å±•æ’ä»¶å¼€å‘ä¸“å®¶ï¼Œå¼€å‘ä¸€ä¸ªå±å¹•æ ‡æ³¨çš„è°·æ­Œæ’ä»¶â€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ce327c86dd843eca802b4f08367ffdc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=5gH16iMIiGoR0pJTOzZGqbQzUOE%3D" alt="æˆªå±2025-11-22 23.11.24.png" loading="lazy"/>
æ–‡å¿ƒå¿«ç åœ¨æ”¶åˆ°æç¤ºåï¼Œ<strong>å¼€å‘é€Ÿåº¦ç›¸å½“å¿«</strong>ï¼Œè¿…é€Ÿå®Œæˆäº†æ’ä»¶çš„åˆæ­¥å¼€å‘ã€‚è¿™ä½¿å¾—å¼€å‘è€…çš„ä¸»è¦å·¥ä½œé‡ç‚¹ä»æ¶æ„æ­å»ºå’ŒåŠŸèƒ½å®ç°ï¼Œè½¬ç§»åˆ°äº†åç»­çš„è°ƒè¯•å’Œä¼˜åŒ–ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb4dbfac00ff4832a2fc0c7337183422~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=8bZUATudiDUC3X92EreP9GilbOg%3D" alt="æˆªå±2025-11-22 23.23.09.png" loading="lazy"/></p>
<p><strong>2. å¼€å‘è€…ä¸»è¦å·¥ä½œé‡å¿ƒï¼š</strong> åœ¨ AI å®Œæˆåˆæ­¥å¼€å‘åï¼Œå¼€å‘è¿‡ç¨‹çš„ä¸»è¦ç²¾åŠ›è¢«æŠ•å…¥åˆ°**ä¿® bugï¼ˆä¿®æ­£ç¨‹åºé”™è¯¯ï¼‰**ä¸Šï¼Œè¿™ä¸€ç¯èŠ‚èŠ±è´¹äº†ä¸»è¦çš„æ—¶é—´ã€‚æ­¤å¤–ï¼Œè¿˜æ¶‰åŠåˆ°æ’ä»¶å›¾æ ‡çš„è®¾è®¡å’Œåˆ¶ä½œã€‚å›¾æ ‡æ˜¯ä½¿ç”¨â€œè±†åŒ…â€è®¾è®¡å·¥å…·å®Œæˆçš„ï¼Œéšååˆ©ç”¨å¼€å‘è€…æ­¤å‰å¼€å‘çš„ <code>Smart Icon Converter</code> å·¥å…·å®Œæˆäº†å›¾æ ‡å°ºå¯¸çš„åˆ¶ä½œã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fsmart-icon-converter.vercel.app%2F" target="_blank" title="https://smart-icon-converter.vercel.app/" ref="nofollow noopener noreferrer">smart-icon-converter.vercel.app/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5357ac1e46fb4df1b076ad47849ca0d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429949&amp;x-signature=YYoG4Vdv6kWH9eJgX2A3SJQyzrk%3D" alt="æˆªå±2025-11-22 23.24.07.png" loading="lazy"/></p>
<h4 data-id="heading-3">ä¸‰ã€ è°ƒè¯•ã€é—®é¢˜ä¸è§£å†³ï¼ˆDebugging, Problems, and Solutionsï¼‰</h4>
<p>è™½ç„¶ AI å®ç°äº†å¿«é€Ÿç”Ÿæˆï¼Œä½†åœ¨å®é™…åº”ç”¨å’Œç”¨æˆ·ä½“éªŒæ–¹é¢ï¼Œä»éœ€è¦äººå·¥ä»‹å…¥è§£å†³ä¸€ç³»åˆ—é—®é¢˜ã€‚</p>






























<table><thead><tr><th align="left">é‡åˆ°çš„é—®é¢˜ (Problem)</th><th align="left">è§£å†³åŠæ³• (Solution)</th><th align="left">æ¥æº</th></tr></thead><tbody><tr><td align="left"><strong>P1ï¼šç¼–ç ä¸ä¹±ç é—®é¢˜</strong></td><td align="left">åˆå§‹ç”Ÿæˆçš„ä»£ç å­˜åœ¨åŠŸèƒ½ä¸å¯ç”¨çš„ç°è±¡ã€‚</td><td align="left">è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ <strong>bug ä¿®å¤ï¼ˆä¿®æ‰ bugï¼‰</strong> ã€‚</td></tr><tr><td align="left"><strong>P2ï¼šç•Œé¢æœ¬åœ°åŒ–ç¼ºå¤±</strong></td><td align="left">æ’ä»¶åˆå§‹ç•Œé¢å…¨éƒ¨æ˜¯<strong>è‹±æ–‡çš„</strong>ï¼Œæ²¡æœ‰ä¸­æ–‡æ”¯æŒã€‚</td><td align="left">æ‰‹åŠ¨è°ƒæ•´ï¼Œä½¿å…¶å®Œæˆä¸­æ–‡æ ‡æ³¨çš„é€‚é…ã€‚</td></tr><tr><td align="left"><strong>P3ï¼šå·¥å…·äº¤äº’æ€§ä¸è¶³</strong></td><td align="left">å¤šä¸ªæ ‡æ³¨å·¥å…·çš„ç»†èŠ‚å­˜åœ¨ç¼ºé™·ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼ša. ç®­å¤´å°ºå¯¸è¿‡å°ã€‚b. ç”»ç¬”å·¥å…·ä¸æ˜¯æ‰€éœ€çš„æ–¹å—å½¢çŠ¶ã€‚c. æ–‡å­—æ ‡æ³¨å®Œæˆå<strong>æ— æ³•å¾ˆå¥½åœ°ç§»åŠ¨</strong>ã€‚</td><td align="left">é’ˆå¯¹æ€§åœ°å®Œæˆäº†ä¿®æ”¹ï¼Œä¿®å¤äº†ç®­å¤´å’Œç”»ç¬”çš„å°ºå¯¸å’Œå½¢çŠ¶é—®é¢˜ï¼Œå¹¶è§£å†³äº†æ–‡å­—æ ‡æ³¨çš„ç§»åŠ¨åŠŸèƒ½ã€‚</td></tr><tr><td align="left"><strong>P4ï¼šåŠŸèƒ½å–èˆä¸å®Œæˆåº¦</strong></td><td align="left">æ’ä»¶ä¸­çš„<strong>æˆªå±åŠŸèƒ½ä¸€ç›´æœªèƒ½å¾ˆå¥½åœ°å®ç°</strong>ï¼Œå½±å“äº†äº§å“çš„æ•´ä½“å®Œæˆåº¦ã€‚</td><td align="left">ä¸ºç¡®ä¿äº§å“æ•´ä½“çš„<strong>å®Œæˆåº¦æ›´å¼º</strong>ï¼Œå†³å®šå°†è¯¥æœªèƒ½è‰¯å¥½å®ç°çš„åŠŸèƒ½å»é™¤ã€‚</td></tr></tbody></table>
<h4 data-id="heading-4">å››ã€ ç»“è®ºï¼ˆConclusionï¼‰</h4>
<p>é€šè¿‡æœ¬æ¬¡å±å¹•æ ‡æ³¨ Chrome æ‰©å±•çš„å¼€å‘å®è·µï¼Œæˆ‘ä»¬æˆåŠŸå±•ç¤ºäº†æ–‡å¿ƒå¿«ç åœ¨æå‡å¼€å‘æ•ˆç‡æ–¹é¢çš„å·¨å¤§æ½œåŠ›ã€‚å€ŸåŠ© AI å¿«é€Ÿç”Ÿæˆä¸»ä½“ä»£ç ï¼Œå¼€å‘äººå‘˜å¾—ä»¥å°†ç²¾åŠ›é›†ä¸­åœ¨è§£å†³ç»†èŠ‚ã€ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œä¿®å¤å…·ä½“ Bug ä¸Šï¼Œä»è€Œåœ¨**æçŸ­çš„æ—¶é—´å†…ï¼ˆçº¦ä¸¤å¤©ï¼‰**äº¤ä»˜äº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å·¥å…·ã€‚è¿™ä¸€è¿‡ç¨‹æœ‰åŠ›åœ°å°è¯äº†â€œç åŠ›å…¨å¼€ AI åŠ é€Ÿâ€çš„ä¸»é¢˜ï¼Œå¹¶æœŸæœ›åœ¨æœ¬æ¬¡å¾æ–‡ä¸­èƒ½äº‰å–åˆ°â€œæœ€ä½³ææ•ˆâ€çš„å¥–é¡¹ã€‚</p>
<p>é¡¹ç›®æœ€ç»ˆå®ç°äº†é¢œè‰²é€‰æ‹©ã€ç”»ç¬”ã€çŸ©å½¢ã€ç®­å¤´å’Œå¯ç§»åŠ¨æ–‡å­—æ ‡æ³¨ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<hr/>
<p><strong>ç±»æ¯”æ€»ç»“ï¼š</strong></p>
<p>å¦‚æœå°†ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘æ¯”ä½œä»é›¶å¼€å§‹å»ºé€ ä¸€åº§å¤æ‚çš„å»ºç­‘ï¼Œé‚£ä¹ˆæœ¬æ¬¡åˆ©ç”¨æ–‡å¿ƒå¿«ç çš„ AI åŠ é€Ÿå¼€å‘è¿‡ç¨‹ï¼Œå°±åƒæ˜¯ AI å¿«é€Ÿæä¾›äº†ä¸€ä¸ªé«˜åº¦ç²¾å¯†çš„é¢„åˆ¶æ¡†æ¶ã€‚å¼€å‘è€…æ— éœ€åœ¨åŸºç¡€ç»“æ„ä¸Šè€—è´¹æ—¶é—´ï¼Œè€Œæ˜¯å¯ä»¥ç«‹å³è·³åˆ°å†…é¥°è£…ä¿®ã€ç»†èŠ‚è°ƒæ•´å’Œè§£å†³ç»“æ„å°ç¼ºé™·çš„ç¯èŠ‚ï¼Œæå¤§ç¼©çŸ­äº†ä»æ¦‚å¿µåˆ°äº¤ä»˜çš„å‘¨æœŸã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575104251865726986</link>    <guid>https://juejin.cn/post/7575104251865726986</guid>    <pubDate>2025-11-22T14:00:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251865726986" data-draft-id="7575083657994076187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T14:00:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éª‘ç€bugçš„coder"/> <meta itemprop="url" content="https://juejin.cn/user/1922418579089566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åƒçƒ¤é±¼æ—¶çªç„¶æ‚Ÿåˆ°çš„ï¼šä¸ºä»€ä¹ˆ Java çº¿ç¨‹æ± çš„æ‰©å®¹é€»è¾‘æ˜¯â€œåç›´è§‰â€çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922418579089566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éª‘ç€bugçš„coder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:00:13.000Z" title="Sat Nov 22 2025 14:00:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©å»åƒçƒ¤é±¼ï¼Œæ’é˜Ÿçš„æ—¶å€™æˆ‘çªç„¶é™·å…¥äº†æ€è€ƒã€‚</p>
<p>åœºæ™¯å¤ç°ï¼šè¿™å®¶åº—ç”Ÿæ„å¾ˆç«ã€‚</p>
<ol>
<li>åº—é‡ŒåŸæœ¬æœ‰ 10 å¼ æ¡Œå­ï¼ˆæ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œå…¨åæ»¡äº†ã€‚</li>
<li>è€æ¿çœ‹åˆ°è¿˜æœ‰äººæ¥ï¼Œç«‹é©¬æŠŠé—¨å£éœ²å¤©çš„ 5 å¼ æŠ˜å æ¡Œä¹Ÿæ”¯æ£±èµ·æ¥äº†ï¼ˆæœ€å¤§çº¿ç¨‹ï¼‰ã€‚</li>
<li>æŠ˜å æ¡Œä¹Ÿåæ»¡äº†ï¼Œè€æ¿æ‰å¼€å§‹å‘å·ï¼Œè®©å¤§å®¶åœ¨é—¨å£åå°æ¿å‡³æ’é˜Ÿï¼ˆé˜Ÿåˆ—ï¼‰ã€‚</li>
<li>æ’é˜Ÿçš„äººå®åœ¨å¤ªå¤šï¼Œè€æ¿åªèƒ½å‡ºæ¥æŒ¥æ‰‹ï¼šâ€œåˆ«æ’äº†ï¼Œä»Šå¤©çš„é±¼å–å®Œäº†â€ï¼ˆæ‹’ç»ç­–ç•¥ï¼‰ã€‚</li>
</ol>
<p>è¿™é€»è¾‘å¾ˆé¡ºå§ï¼Ÿ<br/>
<strong>å…ˆå°½å…¨åŠ›æ¥å¾…ï¼ˆæ‰©å®¹ï¼‰ï¼Œå®åœ¨ä¸è¡Œäº†å†è®©äººç­‰ï¼ˆæ’é˜Ÿï¼‰ã€‚</strong></p>
<p>å¯æˆ‘è½¬å¿µä¸€æƒ³â€”â€”</p>
<p><strong>Java åŸç”Ÿçº¿ç¨‹æ± ï¼ˆThreadPoolExecutorï¼‰çš„é€»è¾‘æ€ä¹ˆæ˜¯åç€æ¥çš„ï¼Ÿ</strong></p>
<p>å®ƒçš„æµç¨‹æ˜¯ï¼š<br/>
<strong>æ ¸å¿ƒçº¿ç¨‹æ»¡ â†’ è¿›é˜Ÿåˆ—æ’é˜Ÿ â†’ é˜Ÿåˆ—æ»¡äº†æ‰å»æ‰©å®¹ï¼ˆåˆ›å»ºæœ€å¤§çº¿ç¨‹ï¼‰</strong></p>
<p>è¿™å°±å¥½æ¯”ï¼šåº—é‡Œ 10 å¼ æ¡Œå­åæ»¡äº†ï¼Œè€æ¿ä¸å…ˆæ”¯æŠ˜å æ¡Œï¼Œè€Œæ˜¯éè¦è®©å®¢äººåœ¨é—¨å£æ’é˜Ÿã€‚<br/>
ç›´åˆ°é—¨å£å°æ¿å‡³éƒ½åä¸ä¸‹äº†ï¼Œæ‰ä¸æƒ…ä¸æ„¿åœ°å»æ”¯æŠ˜å æ¡Œã€‚</p>
<p>è¿™ä¸æ˜¯åäººç±»å—ï¼Ÿ</p>
<p>å›æ¥åæˆ‘ç¿»äº†æºç ï¼Œç»ˆäºæƒ³é€šäº†å…¶ä¸­çš„åšå¼ˆã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒçŸ›ç›¾ï¼šèµ„æºè§†è§’çš„å·®å¼‚</h2>
<p><strong>çƒ¤é±¼åº—è§†è§’ï¼ˆIO å¯†é›†å‹ / å“åº”ä¼˜å…ˆï¼‰</strong></p>
<ul>
<li>ç›®æ ‡ï¼šèµšé’±ï¼Œä¸è®©å®¢äººè·‘äº†</li>
<li>æˆæœ¬ï¼šæŠ˜å æ¡Œï¼ˆçº¿ç¨‹ï¼‰å¾ˆä¾¿å®œï¼Œå®¢äººç­‰ä¹…äº†ä¼šèµ°</li>
<li>ç­–ç•¥ï¼šä¿å“åº”ï¼Œåªè¦æœ‰ç©ºåœ°ï¼Œèµ¶ç´§æŠŠæ¡Œå­æ”¯èµ·æ¥ï¼Œåˆ«è®©å®¢äººå¹²ç­‰</li>
</ul>
<p><strong>Java JDK è§†è§’ï¼ˆè®¡ç®—å¯†é›†å‹ / èµ„æºä¼˜å…ˆï¼‰</strong></p>
<ul>
<li>ç›®æ ‡ï¼šä¿æŠ¤ CPUï¼Œé˜²æ­¢ç³»ç»Ÿå´©ç›˜</li>
<li>æˆæœ¬ï¼šçº¿ç¨‹æ˜¯æ˜‚è´µèµ„æº
<ul>
<li>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹é»˜è®¤å  1MB æ ˆç©ºé—´ï¼ˆæ ˆï¼‰</li>
<li>çº¿ç¨‹å¤ªå¤šï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢ä¼šæŠŠ CPU æ‹–æ­»</li>
</ul>
</li>
<li>é˜Ÿåˆ—æ˜¯å»‰ä»·èµ„æºï¼šä¸€ä¸ªä»»åŠ¡å¯¹è±¡æ‰”å †é‡Œï¼Œå‡ ä¹ä¸èŠ±é’±</li>
<li>ç­–ç•¥ï¼šçœèµ„æºï¼Œåªè¦æ ¸å¿ƒçº¿ç¨‹èƒ½æ‰›ï¼Œå°±ç»ä¸è½»æ˜“åŠ äºº<br/>
â€œå…ˆè®©ä»»åŠ¡åœ¨å†…å­˜é‡Œæ’ä¼šå„¿é˜Ÿå§ï¼Œå®åœ¨æ‰›ä¸ä½æˆ‘å†åŠ äººã€‚â€</li>
</ul>
<h2 data-id="heading-1">2. ç ´å±€ï¼šTomcat çš„â€œçƒ¤é±¼æµâ€çº¿ç¨‹æ± </h2>
<p>éš¾é“ Java å°±ä¸èƒ½åƒçƒ¤é±¼åº—ä¸€æ ·å·¥ä½œå—ï¼Ÿ</p>
<p><strong>èƒ½ï¼Œè€Œä¸” Tomcat/Jetty å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚</strong></p>
<p>Web è¯·æ±‚æ˜¯å…¸å‹çš„ IO å¯†é›†å‹ä»»åŠ¡ï¼ˆè¯» DBã€è°ƒæ¥å£ï¼ŒCPU ç»å¸¸ç©ºé—²ï¼‰ã€‚<br/>
å¦‚æœæŒ‰ JDK é»˜è®¤é€»è¾‘ï¼ˆå…ˆæ’é˜Ÿï¼‰ï¼Œç”¨æˆ·åœ¨æµè§ˆå™¨å‰å°±ç­‰åˆ°æ­»ã€‚</p>
<p>Tomcat çš„éªšæ“ä½œï¼š</p>
<p>å®ƒç»§æ‰¿äº† ThreadPoolExecutorï¼Œä½†é­”æ”¹äº†é˜Ÿåˆ—ï¼ˆTaskQueueï¼‰ã€‚</p>
<ul>
<li>æ ¸å¿ƒçº¿ç¨‹æ»¡äº†ï¼Œä»»åŠ¡æƒ³å…¥é˜Ÿæ—¶ï¼Œé˜Ÿåˆ—ä¼š<strong>ä¼ªé€ â€œæˆ‘å·²æ»¡â€çš„å‡è±¡</strong>ï¼ˆoffer è¿”å› falseï¼‰</li>
<li>çº¿ç¨‹æ± ä¸€å¬â€œé˜Ÿåˆ—æ»¡äº†â€ï¼Œç«‹åˆ»åˆ›å»ºæ–°çº¿ç¨‹ï¼ˆæ”¯æŠ˜å æ¡Œï¼‰</li>
<li>åªæœ‰å½“çº¿ç¨‹æ•°çœŸçš„è¾¾åˆ° maximumPoolSizeï¼Œé˜Ÿåˆ—æ‰ä¼šçœŸæ­£æ¥æ”¶ä»»åŠ¡å¼€å§‹æ’é˜Ÿ</li>
</ul>
<h2 data-id="heading-2">3. JDK é»˜è®¤çº¿ç¨‹æ± çš„ä¸–çºªå¤§å‘</h2>
<p>åˆå­¦è€…å–œæ¬¢è¿™ä¹ˆå†™ï¼š</p>
<pre><code class="hljs language-java" lang="java">Executors.newFixedThreadPool(<span class="hljs-number">10</span>)
</code></pre>
<p>å±•å¼€å…¶å®æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExecutorService <span class="hljs-title function_">newFixedThreadPool</span><span class="hljs-params">(<span class="hljs-type">int</span> nThreads)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(nThreads, nThreads,
                                  <span class="hljs-number">0L</span>, TimeUnit.MILLISECONDS,
                                  <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;()); <span class="hljs-comment">// âš ï¸ å‘åœ¨è¿™é‡Œ</span>
}
</code></pre>
<p><strong>LinkedBlockingQueue æ˜¯æ— ç•Œé˜Ÿåˆ—ï¼ˆé»˜è®¤ Integer.MAX_VALUEï¼‰</strong></p>
<p>åæœï¼š</p>
<ol>
<li>é˜Ÿåˆ—æ°¸è¿œè£…ä¸æ»¡ â†’ <code>maximumPoolSize</code> å‚æ•°ç›´æ¥å¤±æ•ˆï¼ˆæ°¸è¿œè½®ä¸åˆ°å®ƒå‡ºåœºï¼‰</li>
<li>ä»»åŠ¡å¤„ç†ä¸è¿‡æ¥æ—¶ï¼Œé˜Ÿåˆ—æ— é™è†¨èƒ€ â†’ OOM â†’ æœåŠ¡ç›´æ¥æŒ‚æ‰</li>
</ol>
<p>è¿™æ‰æ˜¯çœŸæ­£çš„ç”Ÿäº§äº‹æ•…ä¹‹ç‹ã€‚</p>
<h2 data-id="heading-3">4. æ€»ç»“ä¸é¿å‘æŒ‡å—</h2>
<p><strong>ä¸¤ç§é€»è¾‘å¯¹æ¯”ï¼š</strong></p>




















<table><thead><tr><th>åœºæ™¯</th><th>æ‰§è¡Œé¡ºåº</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>JDK é»˜è®¤</td><td>æ ¸å¿ƒ â†’ é˜Ÿåˆ— â†’ æœ€å¤§ â†’ æ‹’ç»</td><td>åå°è®¡ç®—ä»»åŠ¡ã€ä¿æŠ¤ CPU</td></tr><tr><td>çƒ¤é±¼åº—/Tomcat</td><td>æ ¸å¿ƒ â†’ æœ€å¤§ â†’ é˜Ÿåˆ— â†’ æ‹’ç»</td><td>é«˜å¹¶å‘ Webã€è¿½æ±‚ä½å»¶è¿Ÿ</td></tr></tbody></table>
<p><strong>ç”Ÿäº§ç¯å¢ƒé“å¾‹ï¼š</strong></p>
<ol>
<li>ç¦æ­¢ä½¿ç”¨ <code>Executors</code> çš„å¿«æ·æ–¹æ³•åˆ›å»ºçº¿ç¨‹æ± </li>
<li>å¿…é¡»æ‰‹åŠ¨ <code>new ThreadPoolExecutor(...)</code></li>
<li>å¿…é¡»ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼ˆæ¨è <code>ArrayBlockingQueue</code>ï¼‰</li>
<li>æ‹’ç»ç­–ç•¥æ¨è <code>CallerRunsPolicy</code>ï¼ˆè®©è°ƒç”¨è€…çº¿ç¨‹è‡ªå·±å¹²æ´»ï¼Œå®ç°å¤©ç„¶èƒŒå‹ï¼‰</li>
</ol>
<p>ä¸‹æ¬¡ä½ å»åƒçƒ¤é±¼æ’é˜Ÿæ—¶ï¼Œæ³¨æ„çœ‹è€æ¿æ˜¯å…ˆæ”¯æŠ˜å æ¡Œï¼Œè¿˜æ˜¯å…ˆè®©ä½ ä»¬æ’é˜Ÿã€‚</p>
<p>å¦‚æœä»–å…ˆæ”¯æŠ˜å æ¡Œâ€”â€”<br/>
æ­å–œä½ ï¼Œè¿™è€æ¿æ‡‚é«˜å¹¶å‘ï¼Œæ¯”å¾ˆå¤šå†™ Java çš„éƒ½å¼ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£]]></title>    <link>https://juejin.cn/post/7575103881422078006</link>    <guid>https://juejin.cn/post/7575103881422078006</guid>    <pubDate>2025-11-22T15:36:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881422078006" data-draft-id="7575230119104036905" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£"/> <meta itemprop="keywords" content="Cè¯­è¨€"/> <meta itemprop="datePublished" content="2025-11-22T15:36:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·04354377195"/> <meta itemprop="url" content="https://juejin.cn/user/1118624308269680"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1118624308269680/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·04354377195
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:36:57.000Z" title="Sat Nov 22 2025 15:36:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Cè¯­è¨€ï¼šæ•°ç»„å…¥é—¨åŠå…¶åŸºç¡€ç®—æ³•è¯¦è§£(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</h2>
<blockquote>
<p>æœ¬ç¯‡æ–‡ç« æˆ‘ä¼šç”¨æˆ‘çš„ç†è§£ä»‹ç»ä»€ä¹ˆæ˜¯æ•°ç»„ï¼Œä»¥åŠæ•°ç»„çš„ä¸€äº›åŸºç¡€ç®—æ³•ï¼ŒåŒ…å«é¡ºåºæŸ¥æ‰¾ï¼Œå¯»æ‰¾æœ€å¤§å€¼/æœ€å°å€¼ï¼Œæ•°æ®æ’å…¥ï¼Œæ•°æ®åˆ é™¤ï¼Œæ•°æ®å€’ç½®ï¼Œå†’æ³¡æ’åºï¼Œé€‰æ‹©æ’åºï¼ŒäºŒåˆ†æŸ¥æ‰¾å…±å…«ä¸ªç®—æ³•è®²è§£åŠç¤ºä¾‹ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€.ä»€ä¹ˆæ˜¯æ•°ç»„?</h3>
<p>æœ¬ç¯‡æ–‡ç« çš„é‡ç‚¹æ˜¯ç®—æ³•è¯¦è§£ï¼ŒåŸºæœ¬æ¦‚å¿µç®€å•æä¸€ä¸‹ã€‚</p>
<h4 data-id="heading-2">å®šä¹‰</h4>
<p>ä½ å¯ä»¥æŠŠæ•°ç»„æƒ³è±¡æˆä¸€ä¸ª<strong>æœ‰å¾ˆå¤šä¸ªæ ¼å­çš„å‚¨ç‰©æŸœ</strong>ï¼Œå…¶æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>åŒä¸€æ•°æ®ç±»å‹ï¼š</strong> å‚¨ç‰©æŸœæ¯ä¸ªæ ¼å­éƒ½åªèƒ½å­˜æ”¾<strong>åŒç§ç±»å‹</strong>çš„ç‰©å“ï¼ˆæ¯”å¦‚å…¨æ˜¯ä¹¦æˆ–è€…å…¨æ˜¯è¡£æœï¼‰ï¼Œåœ¨ç¼–ç¨‹ä¸­ï¼Œå³å…ƒç´ å‡ä¸º<strong>åŒç§æ•°æ®ç±»å‹</strong>ï¼ˆå…¨æ˜¯æ•´å‹intæˆ–å…¨æ˜¯å­—ç¬¦å‹char)</li>
<li><strong>è¿ç»­å†…å­˜ç©ºé—´ï¼š</strong> è¿™äº›æ ¼å­æ˜¯ä¸€ä¸ªæ¥ä¸€ä¸ªï¼Œè¿ç»­æ’åˆ—çš„</li>
<li><strong>ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰è®¿é—®ï¼š</strong> æ¯ä¸ªæ ¼å­éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œæˆ‘ä»¬ç§°ä½œä¸‹æ ‡æˆ–ç´¢å¼•ï¼Œä¸”<strong>ç¼–å·ä»0å¼€å§‹</strong></li>
</ul>
<h4 data-id="heading-3">è¡¨ç¤º</h4>
<p>åŸºæœ¬æ ¼å¼ï¼š</p>
<ul>
<li>æ•°ç»„æ•°æ®ç±»å‹ æ•°ç»„åç§°[å…ƒç´ ä¸ªæ•°];</li>
<li>æ•°ç»„æ•°æ®ç±»å‹ æ•°ç»„åç§°[ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰]={å…ƒç´ 1ï¼Œå…ƒç´ 2...å…ƒç´ n};</li>
</ul>
<p>ç¬¬äºŒç§å½¢å¼ä¸‹çš„å…ƒç´ ä¸ªæ•°å¯ä¸å†™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—åé¢{}ä¸­çš„å…ƒç´ ä¸ªæ•°ï¼Œè‹¥å¡«å†™ï¼Œæ­¤å½¢å¼ä¸‹çš„"å…ƒç´ ä¸ªæ•°"åº”â‰¥n</p>
<p><strong>eg</strong>:int num[5] ={1,2,3,4,5};  å…¶ä¸­ï¼Œnum[0] = 1;num[3] = 4ï¼›</p>
<h3 data-id="heading-4">å¸¸ç”¨åŸºç¡€ç®—æ³•(ï½¡â€¢Ì€á´—-)âœ§</h3>
<p>ä»¥ä¸‹ç®—æ³•å…¨éƒ¨åŸºäº int num[5] = {1,2,3,4,5};è¿›è¡Œ</p>
<h4 data-id="heading-5">1.é¡ºåºæŸ¥æ‰¾</h4>
<h5 data-id="heading-6">å°±åƒåœ¨ä¸€æ’æˆ¿å­é‡Œæ‰¾äººï¼Œä»ç¬¬ä¸€å®¶å¼€å§‹é—®</h5>
<p>eg : æŸ¥æ‰¾æ•°ç»„ num ä¸­å€¼ä¸º 4 çš„å…ƒç´ åŠå…¶ä½ç½®</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">4</span>;<span class="hljs-comment">//è¦æ‰¾çš„å…ƒç´ </span>
    <span class="hljs-type">int</span> found = <span class="hljs-number">0</span>;<span class="hljs-comment">//0è¡¨ç¤ºæ²¡æ‰¾åˆ°ï¼Œ1è¡¨ç¤ºæ‰¾åˆ°äº†ï¼Œå…ˆå‡è®¾æ²¡æ‰¾åˆ°</span>
    
    <span class="hljs-type">int</span> i;
    <span class="hljs-comment">//ä»ç¬¬ä¸€ä¸ªå¼€å§‹é€ä¸ªå¯»æ‰¾ï¼ˆä¹Ÿç§°éå†æ•°ç»„ï¼‰</span>
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-keyword">if</span>(num[i]==n){ <span class="hljs-comment">//å¦‚æœç¬¬iä½æ•°å­—ç­‰äºnï¼Œä»£è¡¨æ‰¾åˆ°</span>
    		found = <span class="hljs-number">1</span>;
    		<span class="hljs-keyword">break</span>;<span class="hljs-comment">//æ‰¾åˆ°å°±åœæ­¢å¾ªç¯</span>
		}
	}
	<span class="hljs-keyword">if</span>(found==<span class="hljs-number">1</span>){
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ‰¾åˆ°äº†ï¼%dåœ¨æ•°ç»„ç¬¬%dä½"</span>,n,i+<span class="hljs-number">1</span>); <span class="hljs-comment">//æ³¨æ„ï¼šæ•°ç»„ä»0å¼€å§‹è®¡æ•°ï¼Œå› æ­¤æ­¤å¤„ä¸ºi+1</span>
	}
	<span class="hljs-keyword">else</span>{
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ²¡æ‰¾åˆ°ï¼"</span>);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//æ‰¾åˆ°äº†ï¼4åœ¨æ•°ç»„ç¬¬4ä½</span>
</code></pre>
<h4 data-id="heading-7">2.å¯»æ‰¾æœ€å¤§å€¼/æœ€å°å€¼</h4>
<h5 data-id="heading-8">å°±åƒé€‰ç­é•¿ï¼Œå…ˆå®šä¸‹ä¸€ä¸ªäººï¼Œå†è·Ÿå…¶ä»–äººè¿›è¡Œæ¯”è¾ƒ</h5>
<p>eg : å¯»æ‰¾å¹¶è¾“å‡ºæ•°ç»„ num ä¸­çš„æœ€å¤§å€¼</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">4</span>;
    <span class="hljs-type">int</span> max = num[<span class="hljs-number">0</span>];<span class="hljs-comment">//å…ˆå‡è®¾æœ€å¤§å€¼ä¸ºnum[0],å³1</span>
    
    <span class="hljs-type">int</span> i;
    <span class="hljs-comment">//éå†æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>;i &lt; <span class="hljs-number">5</span>;i++){<span class="hljs-comment">//æ­¤å¤„iä»1å¼€å§‹ï¼Œå› ä¸ºnum[0]å·²ç»è¢«å‡è®¾ä¸ºæœ€å¤§å€¼ï¼Œä¸éœ€è¦å†å’Œè‡ªå·±æ¯”è¾ƒä¸€æ¬¡</span>
    	<span class="hljs-keyword">if</span>(num[i]&gt;max){
    		max = num[i];<span class="hljs-comment">//æ‰¾åˆ°æ›´å¤§çš„å°±æ›´æ–°</span>
		}
	}
<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æœ€å¤§å€¼ä¸º%d"</span>,max);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//æœ€å¤§å€¼ä¸º5</span>
</code></pre>
<h4 data-id="heading-9">3.æ•°æ®æ’å…¥</h4>
<h5 data-id="heading-10">å°±åƒæ’é˜Ÿæ’é˜Ÿï¼Œåé¢çš„äººéƒ½è¦å¾€åæŒªä¸€ä½</h5>
<p>eg ï¼šå…ˆè¾“å‡ºæ’å…¥å‰çš„æ•°ç»„ num ,å†åœ¨æ•°ç»„ num ä¸­ç¬¬2ä½å’Œç¬¬3ä½æ•°å­—ä¸­é—´æ’å…¥ä¸€ä¸ªæ•°å­—10å¹¶è¾“å‡ºæ’å…¥åçš„æ–°æ•°ç»„</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">6</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">10</span>;<span class="hljs-comment">//è¦æ’å…¥çš„æ•°å­—</span>
    <span class="hljs-type">int</span> position = <span class="hljs-number">2</span>;<span class="hljs-comment">//è¦æ’å…¥çš„ä½ç½®ï¼ˆç¬¬3ä½ï¼‰ï¼ˆæ•°ç»„ä»0å¼€å§‹è®¡æ•°ï¼Œå› æ­¤æ­¤å¤„æ˜¯2ï¼‰</span>
    
    <span class="hljs-comment">//æ‰“å°æ’å…¥å‰æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
   
   <span class="hljs-comment">//å¼€å§‹æ’å…¥æ“ä½œ</span>
   <span class="hljs-comment">//ä»åå¾€å‰ï¼Œå°†æ’å…¥ä½ç½®åŠå…¶ä¹‹åçš„å…ƒç´ å¾€åç§»ä¸€ä½</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">4</span>;i&gt;=position;i--){
        <span class="hljs-comment">//æ€è€ƒæ­¤å¤„iä¸ºä»€ä¹ˆä¸èƒ½ç­‰äº5ï¼Ÿå› ä¸ºæ­¤æ—¶æ•°ç»„è®¡æ•°èŒƒå›´ä¸º0~5å…±6ä¸ªæ•°å­—ï¼Œè‹¥i=5ï¼Œåœ¨æ‰§è¡Œä¸‹è¡Œæ“ä½œæ—¶ï¼Œä¼šå˜æˆnum[6]=num[5],num[6]è¶…è¿‡è®¡æ•°èŒƒå›´ï¼ˆä¹Ÿç§°è¶Šç•Œï¼‰ï¼Œç¨‹åºé”™è¯¯</span>
		num[i+<span class="hljs-number">1</span>] = num[i];
	}
        
   <span class="hljs-comment">//æ’å…¥æ–°å€¼n</span>
	num[position] = n;
        
   <span class="hljs-comment">//æ‰“å°æ’å…¥åçš„æ–°æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">6</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5</span>
<span class="hljs-comment">//1 2 10 3 4 5</span>
</code></pre>
<h4 data-id="heading-11">4.æ•°æ®åˆ é™¤</h4>
<h5 data-id="heading-12">å°±åƒæœ‰äººç¦»å¼€é˜Ÿä¼ï¼Œåé¢çš„äººå¾€å‰è¡¥ä¸Š</h5>
<p>eg : å…ˆè¾“åˆ é™¤å‰çš„æ•°ç»„ï¼Œå†å°†æ•°ç»„ä¸­å€¼ä¸º3çš„å…ƒç´ åˆ é™¤å¹¶è¾“å‡ºåˆ é™¤åçš„æ–°æ•°ç»„</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> position = <span class="hljs-number">2</span>;<span class="hljs-comment">//è¦åˆ é™¤çš„ä½ç½®ï¼ˆç¬¬ä¸‰ä½ï¼‰</span>
    
    <span class="hljs-comment">//æ‰“å°åˆ é™¤å‰çš„æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);

    <span class="hljs-comment">//å¼€å§‹åˆ é™¤æ“ä½œ</span>
    <span class="hljs-comment">//ä»å‰å¾€åï¼Œå°†åˆ é™¤ä½ç½®ä¹‹åçš„ä½ç½®å¾€å‰è¿›ä¸€ä½</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = position+<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">5</span>;i++){<span class="hljs-comment">//æ³¨æ„è¿™é‡Œåˆ é™¤ä½ç½®ä¸å‚ä¸å¾ªç¯ï¼Œæ‰€ä»¥i=position+1</span>
		num[i<span class="hljs-number">-1</span>] = num[i];
	}
	
    <span class="hljs-comment">//æ‰“å°åˆ é™¤åçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">4</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5 </span>
<span class="hljs-comment">//1 2 4 5 </span>
</code></pre>
<h4 data-id="heading-13">5.æ•°æ®å€’ç½®</h4>
<h5 data-id="heading-14">å°±åƒæŠŠä¸€æœ¬ä¹¦å€’è¿‡æ¥è¯»</h5>
<p>eg : å…ˆå°†åŸæ•°ç»„æ‰“å°ï¼Œå†å°†æ•°ç»„ num æŒ‰ç›¸åé¡ºåºæ‰“å°</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
  
   <span class="hljs-comment">//å¼€å§‹å€’ç½®æ“ä½œ</span>
   <span class="hljs-comment">//äº¤æ¢ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªï¼Œäº¤æ¢ç¬¬äºŒä¸ªå’Œå€’æ•°ç¬¬äºŒä¸ª</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">2</span>;i++){<span class="hljs-comment">//åªéœ€è¦æ‰§è¡Œ äº¤æ¢å‰ä¸€åŠ çš„æ“ä½œï¼Œå› æ­¤i&lt;2</span>
		<span class="hljs-type">int</span> temp = num[i];
		num[i] = num[<span class="hljs-number">4</span>-i];
		num[<span class="hljs-number">4</span>-i] = temp;
	}
   
   <span class="hljs-comment">//æ‰“å°å€’ç½®åçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//1 2 3 4 5</span>
<span class="hljs-comment">//5 4 3 2 1</span>
</code></pre>
<p>å¦‚æœè§‰å¾—è¿™ç§æ–¹æ³•ä¸å¥½ç†è§£ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦ä¸€ç§ï¼ˆä¹Ÿæ˜¯æˆ‘æ¯”è¾ƒå–œæ¬¢ç”¨çš„ä¸€ç§ï¼‰ï¼šå®šä¹‰ä¸€ä¸ªæ–°çš„ç©ºæ•°ç»„ï¼Œå°†æ•°ç»„ num ä»åå¾€å‰éå†ï¼Œå¹¶ä¾æ¬¡ä»å‰å¾€åå¡«å…¥æ–°æ•°ç»„ï¼Œæ–°æ•°ç»„å³ä¸ºå€’ç½®åçš„æ•°ç»„num.ï¼ˆå¯ä»¥å°è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œå°±ä¸å†™å‡ºæ¥äº†ï¼Œæˆ‘è§‰å¾—å¾ˆå¥½ç†è§£(ï½ï¿£â–½ï¿£)ï½</p>
<h4 data-id="heading-15">6.å†’æ³¡æ’åºï¼ˆæ¯è½®æ’å‡ºæœ€å¤§çš„æ•°ï¼‰</h4>
<h5 data-id="heading-16">å°±åƒæ°´ä¸­çš„æ°”æ³¡ï¼Œå¤§çš„å¾€ä¸Šå†’ï¼ˆè™½ç„¶è¿™ä¹ˆå–åï¼Œä½†ä»å°åˆ°å¤§æ’åˆ—å’Œä»å¤§åˆ°å°æ’åˆ—å‡å¯ç”¨æ­¤æ–¹æ³•ï¼‰</h5>
<p><strong>è¿™ä¸ªç®—æ³•æˆ‘è®¤ä¸ºç›´æ¥çœ‹ä»£ç å’Œæ³¨é‡Šå¾ˆæŠ½è±¡ï¼Œå¾ˆéš¾ç†è§£ï¼Œå»ºè®®å…ˆä¸Šç½‘æœç´¢â€œå†’æ³¡æ’åºç®—æ³•åŠ¨ç”»æ¼”ç¤ºâ€å…ˆçœ‹è§†é¢‘ç†è§£ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—å¸®åŠ©å¾ˆå¤§(=ï½€Ï‰Â´=)</strong></p>
<p>eg : å…ˆå°†æ•°ç»„ int num[5] = {2,5,4,1,3}; æ‰“å°ï¼Œå†å°†å…¶å†…å…ƒç´ æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡º</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
    <span class="hljs-comment">//å¼€å§‹å†’æ³¡æ’åº</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++){ <span class="hljs-comment">//éœ€è¦æ¯”è¾ƒ4è½®ï¼Œå³ï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°-1ï¼‰è½®</span>
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;j&lt;<span class="hljs-number">4</span>-i;j++){ <span class="hljs-comment">//æ¯è½®æ¯”è¾ƒæ¬¡æ•°å‡å°</span>
			<span class="hljs-keyword">if</span>(num[j]&gt;num[j+<span class="hljs-number">1</span>]){ <span class="hljs-comment">//å¦‚æœå‰é¢çš„æ¯”åé¢çš„å¤§</span>
                        <span class="hljs-comment">//äº¤æ¢ä¸¤ä¸ªæ•°</span>
				<span class="hljs-type">int</span> temp = num[j+<span class="hljs-number">1</span>];
				num[j+<span class="hljs-number">1</span>] = num[j];
				num[j] = temp;
			}
		}
	}

    <span class="hljs-comment">//æ‰“å°æ’åºåçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//2 5 4 1 3</span>
<span class="hljs-comment">//1 2 3 4 5</span>
</code></pre>
<h4 data-id="heading-17">7.ç®€å•é€‰æ‹©æ’åºï¼ˆæ¯è½®æ’å‡ºæœ€å°çš„æ•°ï¼‰</h4>
<h5 data-id="heading-18">å°±åƒé€‰æœ€å°çš„è‹¹æœæ”¾åˆ°æœ€å‰é¢ï¼ˆåŒ6.æ­¤æ–¹æ³•å¯ç”¨äºä»å°åˆ°å¤§å’Œä»å¤§åˆ°å°æ’åºï¼‰</h5>
<p><strong>å’Œå†’æ³¡æ’åºä¸€æ ·ï¼Œå»ºè®®é…åˆç½‘ä¸Šçš„æ‰§è¡ŒåŠ¨ç”»ä¸€èµ·çœ‹( Ë™ê’³Ë™ )</strong></p>
<p>eg : å…ˆå°†æ•°ç»„ int num[5] = {2,5,4,1,3}; æ‰“å°ï¼Œå†å°†å…¶å†…å…ƒç´ æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºè¾“å‡º</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">2</span>,<span class="hljs-number">5</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">3</span>};
    
    <span class="hljs-comment">//æ‰“å°åŸæ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
    <span class="hljs-comment">//å¼€å§‹é€‰æ‹©æ’åº</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++){ <span class="hljs-comment">//éœ€è¦é€‰æ‹©4æ¬¡ï¼Œå³ï¼ˆæ•°ç»„å…ƒç´ ä¸ªæ•°-1ï¼‰æ¬¡</span>
		<span class="hljs-type">int</span> min = i;<span class="hljs-comment">//å‡è®¾æœ€å°çš„æ•°æ˜¯æ•°ç»„ç¬¬iä½å…ƒç´ </span>
		
                
                <span class="hljs-comment">//åœ¨å‰©ä¸‹çš„é‡Œé¢æ‰¾çœŸæ­£çš„æœ€å°å€¼</span>
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = i+<span class="hljs-number">1</span>;j&lt;<span class="hljs-number">5</span>;j++){
			<span class="hljs-keyword">if</span>(num[j]&lt;num[min]){ <span class="hljs-comment">//ä¾æ¬¡æ¯”è¾ƒï¼Œæ‰¾å‡ºæœ€å°å€¼</span>
				min = j;
			}
		}
		
                <span class="hljs-comment">//è‹¥å‡è®¾çš„æœ€å°å€¼ä¸æ˜¯çœŸæ­£çš„æœ€å°å€¼ï¼Œåˆ™å°†è¿™ä¸¤ä¸ªå…ƒç´ äº’æ¢ä½ç½®</span>
		<span class="hljs-keyword">if</span>(min != i){
			<span class="hljs-type">int</span> temp = num[i];
			num[i] = num[min];
			num[min] = temp;
		}
	}
       
     <span class="hljs-comment">//æ‰“å°æ’åºåçš„æ•°ç»„</span>
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;i &lt; <span class="hljs-number">5</span>;i++){
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>,num[i]);
	}
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//2 5 4 1 3</span>
<span class="hljs-comment">//1 2 3 4 5</span>
</code></pre>
<h4 data-id="heading-19">8.äºŒåˆ†æŸ¥æ‰¾(!!!è¦æ±‚æ•°ç»„å¿…é¡»æ˜¯æœ‰åºçš„ï¼‰</h4>
<h5 data-id="heading-20">å°±åƒçŒœæ•°å­—æ¸¸æˆï¼Œæ¯æ¬¡éƒ½çŒœä¸­é—´å€¼</h5>
<p>eg : æŸ¥æ‰¾ num æ•°åˆ—ä¸­å€¼ä¸º30çš„å…ƒç´ å¹¶æ‰“å°å…¶ä½ç½®</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> num[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> n = <span class="hljs-number">3</span>; <span class="hljs-comment">//è¦æ‰¾çš„æ•°</span>
    
    <span class="hljs-type">int</span> left = <span class="hljs-number">0</span>; <span class="hljs-comment">//å·¦è¾¹èµ·ç‚¹</span>
    <span class="hljs-type">int</span> right = <span class="hljs-number">4</span>; <span class="hljs-comment">//å³è¾¹èµ·ç‚¹</span>
    <span class="hljs-type">int</span> found = <span class="hljs-number">0</span>; <span class="hljs-comment">//æ˜¯å¦æ‰¾åˆ°</span>
    
    <span class="hljs-keyword">while</span>(left&lt;=right){
    	<span class="hljs-type">int</span> mid = (left+right)/<span class="hljs-number">2</span>; <span class="hljs-comment">//ä¸­é—´ä½ç½®</span>
    	
    	<span class="hljs-built_in">printf</span>(<span class="hljs-string">"åœ¨%dåˆ°%dä¹‹é—´æŸ¥æ‰¾ï¼Œä¸­é—´æ˜¯%d\n"</span>,left,right,mid);
    	
    	<span class="hljs-keyword">if</span>(num[mid]==n){
    		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ‰¾åˆ°äº†ï¼åœ¨ç¬¬%dä¸ªä½ç½®(ä¸‹æ ‡%d)\n"</span>,mid+<span class="hljs-number">1</span>,mid);
    		found = <span class="hljs-number">1</span>;
    		<span class="hljs-keyword">break</span>;<span class="hljs-comment">//æ‰¾åˆ°è¾“å‡ºï¼Œå¹¶åœæ­¢å¾ªç¯</span>
		}
		<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(num[mid]&lt;n){ <span class="hljs-comment">//ä¸­é—´çš„æ•°å°äºè¦æ‰¾çš„æ•°</span>
			left = mid+<span class="hljs-number">1</span>; <span class="hljs-comment">//åœ¨å³åŠè¾¹æ‰¾</span>
		}
		<span class="hljs-keyword">else</span>{ <span class="hljs-comment">//ä¸­é—´çš„æ•°å¤§äºè¦æ‰¾çš„æ•°</span>
			right = mid<span class="hljs-number">-1</span>; <span class="hljs-comment">//åœ¨å·¦åŠè¾¹æ‰¾</span>
		}
	}
	
	<span class="hljs-keyword">if</span>(!found){
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ²¡æ‰¾åˆ°"</span>);
	}
    
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-comment">//è¾“å‡º</span>
<span class="hljs-comment">//åœ¨0åˆ°4ä¹‹é—´æŸ¥æ‰¾ï¼Œä¸­é—´æ˜¯2</span>
<span class="hljs-comment">//æ‰¾åˆ°äº†ï¼åœ¨ç¬¬3ä¸ªä½ç½®ï¼ˆä¸‹æ ‡2ï¼‰</span>
</code></pre>
<h2 data-id="heading-21">ä»¥ä¸Šä¸ºæœ¬ç¯‡æ–‡ç« å…¨éƒ¨å†…å®¹ï¼Œç´¯æ­»æˆ‘äº†ï¼Œç»“æŸï¼¼(ï¿£ï¸¶ï¿£)ï¼ï¼</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°]]></title>    <link>https://juejin.cn/post/7575106644498661410</link>    <guid>https://juejin.cn/post/7575106644498661410</guid>    <pubDate>2025-11-22T15:51:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498661410" data-draft-id="7575062687627149312" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°"/> <meta itemprop="keywords" content="Electron,Vue.js"/> <meta itemprop="datePublished" content="2025-11-22T15:51:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™å›½æµªå­"/> <meta itemprop="url" content="https://juejin.cn/user/1943592291275886"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592291275886/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™å›½æµªå­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:51:46.000Z" title="Sat Nov 22 2025 15:51:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¨ å°è¯´å†™ä½œè½¯ä»¶ä¸­çš„æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼šåŸºäº TipTap çš„å¤šå½©æ ‡è®°æŠ€æœ¯å®ç°</h2>
<blockquote>
<p>ğŸ’¡ æœ¬æ–‡æ·±å…¥æ¢è®¨äº†åœ¨å°è¯´å†™ä½œè½¯ä»¶çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­å®ç°æ–‡æœ¬é«˜äº®åŠŸèƒ½çš„æŠ€æœ¯æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å¤šé¢œè‰²é«˜äº®ã€æœç´¢é«˜äº®ã€çŠ¶æ€ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½çš„å®Œæ•´å®ç°ï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€å¥—å®Œæ•´çš„æ–‡æœ¬æ ‡è®°è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“‹ ç›®å½•</h3>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF" title="#%E9%A1%B9%E7%9B%AE%E8%83%8C%E6%99%AF">é¡¹ç›®èƒŒæ™¯</a></li>
<li><a href="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" title="#%E6%8A%80%E6%9C%AF%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">æŠ€æœ¯æ¶æ„è®¾è®¡</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0" title="#%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0">æ ¸å¿ƒåŠŸèƒ½å®ç°</a></li>
<li><a href="#%E9%AB%98%E4%BA%AE%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8" title="#%E9%AB%98%E4%BA%AE%E9%A2%9C%E8%89%B2%E9%80%89%E6%8B%A9%E5%99%A8">é«˜äº®é¢œè‰²é€‰æ‹©å™¨</a></li>
<li><a href="#%E6%90%9C%E7%B4%A2%E9%AB%98%E4%BA%AE%E9%9B%86%E6%88%90" title="#%E6%90%9C%E7%B4%A2%E9%AB%98%E4%BA%AE%E9%9B%86%E6%88%90">æœç´¢é«˜äº®é›†æˆ</a></li>
<li><a href="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BA%A4%E4%BA%92" title="#%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BA%A4%E4%BA%92">çŠ¶æ€ç®¡ç†ä¸äº¤äº’</a></li>
<li><a href="#%E6%A0%B7%E5%BC%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E4%BC%98%E5%8C%96" title="#%E6%A0%B7%E5%BC%8F%E6%B8%B2%E6%9F%93%E4%B8%8E%E4%BC%98%E5%8C%96">æ ·å¼æ¸²æŸ“ä¸ä¼˜åŒ–</a></li>
<li><a href="#%E6%8A%80%E6%9C%AF%E4%BA%AE%E7%82%B9%E6%80%BB%E7%BB%93" title="#%E6%8A%80%E6%9C%AF%E4%BA%AE%E7%82%B9%E6%80%BB%E7%BB%93">æŠ€æœ¯äº®ç‚¹æ€»ç»“</a></li>
<li><a href="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B" title="#%E6%80%BB%E7%BB%93%E4%B8%8E%E5%B1%95%E6%9C%9B">æ€»ç»“ä¸å±•æœ›</a></li>
</ul>
<h3 data-id="heading-2">ğŸ¯ é¡¹ç›®èƒŒæ™¯</h3>
<p>åœ¨å°è¯´åˆ›ä½œè¿‡ç¨‹ä¸­ï¼Œä½œè€…ç»å¸¸éœ€è¦å¯¹ç¬”è®°ä¸­çš„å…³é”®ä¿¡æ¯è¿›è¡Œæ ‡è®°å’Œåˆ†ç±»ï¼Œæ¯”å¦‚é‡è¦äººç‰©ã€åœ°ç‚¹ã€è®¾å®šç­‰ã€‚ä¼ ç»Ÿçš„æ–‡æœ¬ç¼–è¾‘å™¨å¾€å¾€åªæ”¯æŒå•ä¸€é¢œè‰²çš„é«˜äº®ï¼Œæ— æ³•æ»¡è¶³å¤æ‚çš„ä¸–ç•Œè§‚ç®¡ç†éœ€æ±‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ 51mazi çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­è®¾è®¡äº†ä¸€ä¸ªå¤šé¢œè‰²æ–‡æœ¬é«˜äº®åŠŸèƒ½ï¼Œè®©ä½œè€…èƒ½å¤Ÿç”¨ä¸åŒé¢œè‰²æ ‡è®°ä¸åŒç±»å‹çš„å†…å®¹ã€‚</p>
<h4 data-id="heading-3">ğŸ¨ é«˜äº®åŠŸèƒ½å±•ç¤º</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0701007ddf7a4c6a895fdf563bdf7a94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6b6Z5Zu95rWq5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764431506&amp;x-signature=x4oTcWzjvMQp65C3fKBDfGeACw8%3D" alt="ç¬”è®°ç¼–è¾‘å™¨" loading="lazy"/></p>
<p><em>å¤šå½©æ–‡æœ¬é«˜äº®åŠŸèƒ½ - æ”¯æŒ5ç§é¢œè‰²æ ‡è®°ä¸åŒç±»å‹çš„å†…å®¹</em></p>
<h4 data-id="heading-4">âœ¨ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</h4>
<ul>
<li>ğŸ¨ <strong>å¤šé¢œè‰²é«˜äº®</strong>: æ”¯æŒ5ç§é¢œè‰²ï¼ˆé»„è‰²ã€ç»¿è‰²ã€è“è‰²ã€ç²‰è‰²ã€ç´«è‰²ï¼‰è¿›è¡Œæ–‡æœ¬æ ‡è®°</li>
<li>ğŸ” <strong>æœç´¢é«˜äº®</strong>: æœç´¢åŠŸèƒ½è‡ªåŠ¨é«˜äº®åŒ¹é…é¡¹ï¼Œå½“å‰åŒ¹é…é¡¹ç‰¹æ®Šæ ‡è®°</li>
<li>ğŸ¯ <strong>ç²¾ç¡®æ§åˆ¶</strong>: æ”¯æŒå¯¹é€‰ä¸­æ–‡æœ¬åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
<li>ğŸ’¾ <strong>æ•°æ®æŒä¹…åŒ–</strong>: é«˜äº®ä¿¡æ¯éšå†…å®¹ä¸€èµ·ä¿å­˜å’ŒåŠ è½½</li>
<li>ğŸ­ <strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€</li>
</ul>
<h3 data-id="heading-5">ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-6">æ ¸å¿ƒæŠ€æœ¯æ ˆ</h4>
<ul>
<li><strong>TipTap 2.12.0</strong>: åŸºäº ProseMirror çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>@tiptap/extension-highlight</strong>: TipTap å®˜æ–¹é«˜äº®æ‰©å±•</li>
<li><strong>Vue 3.5.13</strong>: æ¸è¿›å¼ JavaScript æ¡†æ¶</li>
<li><strong>Element Plus 2.10.1</strong>: ä¼ä¸šçº§ UI ç»„ä»¶åº“</li>
</ul>
<h4 data-id="heading-7">ç³»ç»Ÿæ¶æ„è®¾è®¡</h4>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å·¥å…·æ ç»„ä»¶     â”‚    â”‚   ç¼–è¾‘å™¨ç»„ä»¶     â”‚    â”‚   TipTapæ‰©å±•    â”‚
â”‚ EditorMenubar   â”‚â—„â”€â”€â–ºâ”‚ EditorPanel     â”‚â—„â”€â”€â–ºâ”‚ Highlight       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              é«˜äº®çŠ¶æ€ç®¡ç†ä¸å‘½ä»¤æ‰§è¡Œ                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<h4 data-id="heading-8">ğŸ“ ç»„ä»¶ç»“æ„è®¾è®¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"editor-menubar"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é«˜äº®æŒ‰é’® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-popover</span> <span class="hljs-attr">v-model:visible</span>=<span class="hljs-string">"highlightPopoverVisible"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">reference</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">:type</span>=<span class="hljs-string">"isHighlight ? 'primary' : 'default'"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">SvgIcon</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"highlight"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- é¢œè‰²é€‰æ‹©å™¨ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"highlight-color-picker"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- 5ç§é¢œè‰²é€‰é¡¹ --&gt;</span>
        <span class="hljs-comment">&lt;!-- ç§»é™¤é«˜äº®é€‰é¡¹ --&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-popover</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-9">ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°</h3>
<h4 data-id="heading-10">1. TipTap Highlight æ‰©å±•é…ç½®</h4>
<p>TipTap çš„ Highlight æ‰©å±•æ”¯æŒå¤šé¢œè‰²é«˜äº®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¼–è¾‘å™¨åˆå§‹åŒ–æ—¶è¿›è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/NoteEditorContent.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Highlight</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/extension-highlight'</span>

<span class="hljs-comment">// è·å–ç¬”è®°ç¼–è¾‘å™¨çš„æ‰©å±•é…ç½®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getNoteExtensions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> [
    <span class="hljs-comment">// ... å…¶ä»–æ‰©å±•</span>
    <span class="hljs-title class_">Highlight</span>.<span class="hljs-title function_">configure</span>({
      <span class="hljs-attr">multicolor</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨å¤šé¢œè‰²æ”¯æŒ</span>
      <span class="hljs-title class_">HTMLAttributes</span>: {
        <span class="hljs-attr">class</span>: <span class="hljs-string">'search-highlight'</span>  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰ç±»å</span>
      }
    })
  ]
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/ChapterEditorContent.vue</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Highlight</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@tiptap/extension-highlight'</span>

<span class="hljs-comment">// è·å–ç« èŠ‚ç¼–è¾‘å™¨çš„æ‰©å±•é…ç½®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getChapterExtensions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> [
    <span class="hljs-title class_">StarterKit</span>,
    <span class="hljs-comment">// ... å…¶ä»–æ‰©å±•</span>
    <span class="hljs-title class_">Highlight</span>.<span class="hljs-title function_">configure</span>({
      <span class="hljs-attr">multicolor</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯ç”¨å¤šé¢œè‰²æ”¯æŒ</span>
      <span class="hljs-title class_">HTMLAttributes</span>: {
        <span class="hljs-attr">class</span>: <span class="hljs-string">'search-highlight'</span>  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰ç±»å</span>
      }
    })
  ]
}
</code></pre>
<p><strong>å…³é”®é…ç½®è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>multicolor: true</code>: å¯ç”¨å¤šé¢œè‰²æ”¯æŒï¼Œå…è®¸ä¸ºä¸åŒçš„é«˜äº®è®¾ç½®ä¸åŒçš„é¢œè‰²</li>
<li><code>HTMLAttributes</code>: ä¸ºé«˜äº®å…ƒç´ æ·»åŠ è‡ªå®šä¹‰ HTML å±æ€§ï¼Œè¿™é‡Œæ·»åŠ äº† <code>search-highlight</code> ç±»åï¼Œæ–¹ä¾¿æ ·å¼æ§åˆ¶</li>
</ul>
<h4 data-id="heading-11">2. é«˜äº®é¢œè‰²å®šä¹‰</h4>
<p>åœ¨å·¥å…·æ ç»„ä»¶ä¸­å®šä¹‰å¯ç”¨çš„é«˜äº®é¢œè‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®é¢œè‰²é€‰é¡¹ï¼ˆ5ä¸ªæµ…è‰²ã€äº®è‰²ï¼‰</span>
<span class="hljs-keyword">const</span> highlightColors = [
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#ffeb3b'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'é»„è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#a8e6cf'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç»¿è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#a8c8ec'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'è“è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#ffb3ba'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç²‰è‰²'</span> },
  { <span class="hljs-attr">value</span>: <span class="hljs-string">'#dda0dd'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'ç´«è‰²'</span> }
]
</code></pre>
<p><strong>é¢œè‰²é€‰æ‹©åŸåˆ™</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨æµ…è‰²ã€äº®è‰²ï¼Œç¡®ä¿åœ¨ç™½è‰²èƒŒæ™¯ä¸Šæ¸…æ™°å¯è§</li>
<li>é¢œè‰²åŒºåˆ†åº¦è¶³å¤Ÿï¼Œä¾¿äºå¿«é€Ÿè¯†åˆ«ä¸åŒç±»å‹çš„å†…å®¹</li>
<li>ç¬¦åˆè§†è§‰è®¾è®¡è§„èŒƒï¼Œä¸ä¼šè¿‡äºåˆºçœ¼</li>
</ul>
<h4 data-id="heading-12">3. é«˜äº®çŠ¶æ€æ£€æµ‹</h4>
<p>æ£€æµ‹å½“å‰é€‰ä¸­æ–‡æœ¬æ˜¯å¦å·²åº”ç”¨é«˜äº®ï¼Œä»¥åŠä½¿ç”¨çš„é¢œè‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®çŠ¶æ€ï¼ˆä»…ç¬”è®°ç¼–è¾‘å™¨ï¼‰</span>
<span class="hljs-keyword">const</span> isHighlight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ç¬”è®°ç¼–è¾‘å™¨ï¼šæ ¹æ®å½“å‰é€‰ä¸­æ–‡æœ¬çš„æ ¼å¼</span>
    <span class="hljs-keyword">return</span> props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">isActive</span>(<span class="hljs-string">'highlight'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
})

<span class="hljs-comment">// æ£€æŸ¥å½“å‰é«˜äº®æ˜¯å¦ä½¿ç”¨æŒ‡å®šé¢œè‰²</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">isHighlightColorActive</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span> || !isHighlight.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> attrs = props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">getAttributes</span>(<span class="hljs-string">'highlight'</span>)
  <span class="hljs-comment">// å¦‚æœæ²¡æœ‰ color å±æ€§ï¼Œé»˜è®¤æ˜¯é»„è‰²</span>
  <span class="hljs-keyword">const</span> currentColor = attrs.<span class="hljs-property">color</span> || <span class="hljs-string">'#ffeb3b'</span>
  <span class="hljs-keyword">return</span> currentColor === color
}
</code></pre>
<p><strong>çŠ¶æ€æ£€æµ‹é€»è¾‘</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>editor.isActive('highlight')</code> æ£€æµ‹å½“å‰é€‰ä¸­æ–‡æœ¬æ˜¯å¦å·²åº”ç”¨é«˜äº®</li>
<li>ä½¿ç”¨ <code>editor.getAttributes('highlight')</code> è·å–é«˜äº®çš„å±æ€§ï¼ŒåŒ…æ‹¬é¢œè‰²</li>
<li>å¦‚æœæ²¡æœ‰é¢œè‰²å±æ€§ï¼Œé»˜è®¤ä½¿ç”¨é»„è‰²ï¼ˆ<code>#ffeb3b</code>ï¼‰</li>
</ul>
<h3 data-id="heading-13">ğŸ¨ é«˜äº®é¢œè‰²é€‰æ‹©å™¨</h3>
<h4 data-id="heading-14">1. é¢œè‰²é€‰æ‹©å™¨ UI å®ç°</h4>
<p>ä½¿ç”¨ Element Plus çš„ Popover ç»„ä»¶å®ç°é¢œè‰²é€‰æ‹©å™¨ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- src/renderer/src/components/EditorMenubar.vue --&gt;
&lt;el-popover
  v-if="isNoteEditor"
  v-model:visible="highlightPopoverVisible"
  placement="bottom"
  :width="230"
  trigger="click"
  popper-style="padding: 6px;"
&gt;
  &lt;template #reference&gt;
    &lt;el-button
      size="small"
      class="toolbar-item"
      :type="isHighlight ? 'primary' : 'default'"
      title="é«˜äº®"
    &gt;
      &lt;SvgIcon name="highlight" :size="12" /&gt;
    &lt;/el-button&gt;
  &lt;/template&gt;
  &lt;div class="highlight-color-picker"&gt;
    &lt;div class="highlight-colors"&gt;
      &lt;!-- é¢œè‰²é€‰é¡¹ --&gt;
      &lt;div
        v-for="color in highlightColors"
        :key="color.value"
        class="highlight-color-item"
        :class="{ active: isHighlightColorActive(color.value) }"
        :title="color.label"
        @click="applyHighlight(color.value)"
      &gt;
        &lt;div
          :style="{ backgroundColor: color.value }"
          class="hightlight-color-item-main"
        &gt;&lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- åˆ†éš”çº¿ --&gt;
      &lt;div class="highlight-color-split"&gt;&lt;/div&gt;
      &lt;!-- ç§»é™¤é«˜äº®é€‰é¡¹ --&gt;
      &lt;div
        :class="{ active: !isHighlight }"
        class="highlight-color-item highlight-color-none"
        title="æ— é«˜äº®"
      &gt;
        &lt;SvgIcon
          class="hightlight-color-item-main"
          :size="20"
          name="ban"
          @click="removeHighlight"
        /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/el-popover&gt;
</code></pre>
<h4 data-id="heading-15">2. é¢œè‰²é€‰æ‹©å™¨æ ·å¼</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-selector-class">.highlight-colors</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-wrap</span>: wrap;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.highlight-color-item</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">flex-shrink</span>: <span class="hljs-number">0</span>;

  <span class="hljs-selector-class">.hightlight-color-item-main</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid transparent;
  }

  &amp;<span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.15</span>);
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3e3e3</span>;
    <span class="hljs-selector-class">.hightlight-color-item-main</span> {
      <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--el-color-primary);
    }
  }

  &amp;<span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3e3e3</span>;
    <span class="hljs-selector-class">.hightlight-color-item-main</span> {
      <span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">var</span>(--el-color-primary);
    }
  }
}

<span class="hljs-selector-class">.highlight-color-split</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#999</span>;
}
</code></pre>
<p><strong>æ ·å¼è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ†å½¢é¢œè‰²å—ï¼Œè§†è§‰æ¸…æ™°</li>
<li>æ‚¬åœå’Œæ¿€æ´»çŠ¶æ€çš„è§†è§‰åé¦ˆ</li>
<li>å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”»</li>
<li>å“åº”å¼å¸ƒå±€ï¼Œé€‚é…ä¸åŒå±å¹•</li>
</ul>
<h4 data-id="heading-16">3. åº”ç”¨é«˜äº®é¢œè‰²</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// åº”ç”¨é«˜äº®é¢œè‰²</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlight</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ä½¿ç”¨ setHighlight ç¡®ä¿åº”ç”¨æ­£ç¡®çš„é¢œè‰²</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">chain</span>().<span class="hljs-title function_">focus</span>().<span class="hljs-title function_">setHighlight</span>({ color }).<span class="hljs-title function_">run</span>()
    highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}

<span class="hljs-comment">// ç§»é™¤é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">removeHighlight</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">chain</span>().<span class="hljs-title function_">focus</span>().<span class="hljs-title function_">unsetHighlight</span>().<span class="hljs-title function_">run</span>()
    highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
</code></pre>
<p><strong>å‘½ä»¤æ‰§è¡Œé€»è¾‘</strong>ï¼š</p>
<ul>
<li><code>editor.chain().focus()</code>: ç¡®ä¿ç¼–è¾‘å™¨è·å¾—ç„¦ç‚¹</li>
<li><code>.setHighlight({ color })</code>: ä¸ºé€‰ä¸­æ–‡æœ¬åº”ç”¨æŒ‡å®šé¢œè‰²çš„é«˜äº®</li>
<li><code>.unsetHighlight()</code>: ç§»é™¤é€‰ä¸­æ–‡æœ¬çš„é«˜äº®</li>
<li><code>.run()</code>: æ‰§è¡Œå‘½ä»¤é“¾</li>
</ul>
<h3 data-id="heading-17">ğŸ” æœç´¢é«˜äº®é›†æˆ</h3>
<h4 data-id="heading-18">1. æœç´¢é«˜äº®å®ç°</h4>
<p>æœç´¢åŠŸèƒ½ä¹Ÿä½¿ç”¨ Highlight æ‰©å±•æ¥é«˜äº®åŒ¹é…é¡¹ï¼Œå½“å‰åŒ¹é…é¡¹ä½¿ç”¨è“è‰²ï¼Œå…¶ä»–åŒ¹é…é¡¹ä½¿ç”¨é»„è‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/SearchPanel.vue</span>
<span class="hljs-comment">// ä¸ºæ‰€æœ‰åŒ¹é…é¡¹æ·»åŠ è§†è§‰é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addVisualHighlights</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span> || matches.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„é«˜äº®</span>
  <span class="hljs-title function_">clearVisualHighlights</span>()

  <span class="hljs-comment">// ä¸ºæ¯ä¸ªåŒ¹é…é¡¹æ·»åŠ é«˜äº®æ ‡è®°</span>
  matches.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">match, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> isCurrent = index === currentMatchIndex.<span class="hljs-property">value</span>

    <span class="hljs-comment">// ä½¿ç”¨Tiptapçš„setMarkå‘½ä»¤æ·»åŠ é«˜äº®</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setTextSelection</span>({
      <span class="hljs-attr">from</span>: match.<span class="hljs-property">from</span>,
      <span class="hljs-attr">to</span>: match.<span class="hljs-property">to</span>
    })

    <span class="hljs-comment">// æ·»åŠ é«˜äº®æ ‡è®°ï¼Œä½¿ç”¨highlightæ‰©å±•</span>
    props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setHighlight</span>({
      <span class="hljs-attr">color</span>: isCurrent ? <span class="hljs-string">'#409eff'</span> : <span class="hljs-string">'#ffeb3b'</span>
    })
  })

  <span class="hljs-comment">// æ¢å¤å½“å‰åŒ¹é…é¡¹çš„é€‰æ‹©</span>
  <span class="hljs-keyword">if</span> (currentMatchIndex.<span class="hljs-property">value</span> &gt;= <span class="hljs-number">0</span> &amp;&amp; currentMatchIndex.<span class="hljs-property">value</span> &lt; matches.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>) {
    <span class="hljs-title function_">highlightMatch</span>(matches.<span class="hljs-property">value</span>[currentMatchIndex.<span class="hljs-property">value</span>])
  }
}

<span class="hljs-comment">// æ¸…é™¤è§†è§‰é«˜äº®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearVisualHighlights</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span>

  <span class="hljs-comment">// é€‰æ‹©æ•´ä¸ªæ–‡æ¡£</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">selectAll</span>()

  <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰é«˜äº®æ ‡è®°</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">unsetHighlight</span>()

  <span class="hljs-comment">// æ¸…é™¤é€‰æ‹©</span>
  props.<span class="hljs-property">editor</span>.<span class="hljs-property">commands</span>.<span class="hljs-title function_">setTextSelection</span>(<span class="hljs-number">0</span>)
}
</code></pre>
<p><strong>æœç´¢é«˜äº®ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>å½“å‰åŒ¹é…é¡¹ä½¿ç”¨è“è‰²ï¼ˆ<code>#409eff</code>ï¼‰ï¼Œçªå‡ºæ˜¾ç¤º</li>
<li>å…¶ä»–åŒ¹é…é¡¹ä½¿ç”¨é»„è‰²ï¼ˆ<code>#409eff</code>ï¼‰ï¼Œç»Ÿä¸€æ ‡è®°</li>
<li>åˆ‡æ¢åŒ¹é…é¡¹æ—¶ï¼Œé‡æ–°åº”ç”¨æ‰€æœ‰é«˜äº®ä»¥æ›´æ–°é¢œè‰²</li>
</ul>
<h4 data-id="heading-19">2. æœç´¢é«˜äº®ä¸æ‰‹åŠ¨é«˜äº®çš„åè°ƒ</h4>
<p>æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®ä½¿ç”¨ç›¸åŒçš„ Highlight æ‰©å±•ï¼Œä½†é€šè¿‡ä¸åŒçš„é¢œè‰²è¿›è¡ŒåŒºåˆ†ï¼š</p>
<ul>
<li>æœç´¢é«˜äº®ï¼šä¸´æ—¶æ€§ï¼Œä»…åœ¨æœç´¢æ—¶æ˜¾ç¤ºï¼Œä½¿ç”¨è“è‰²å’Œé»„è‰²</li>
<li>æ‰‹åŠ¨é«˜äº®ï¼šæŒä¹…æ€§ï¼Œéšå†…å®¹ä¿å­˜ï¼Œä½¿ç”¨5ç§è‡ªå®šä¹‰é¢œè‰²</li>
</ul>
<h3 data-id="heading-20">ğŸ­ çŠ¶æ€ç®¡ç†ä¸äº¤äº’</h3>
<h4 data-id="heading-21">1. é«˜äº®çŠ¶æ€åŒæ­¥</h4>
<p>å·¥å…·æ æŒ‰é’®çš„çŠ¶æ€éœ€è¦å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/renderer/src/components/EditorMenubar.vue</span>
<span class="hljs-comment">// é«˜äº®çŠ¶æ€ï¼ˆä»…ç¬”è®°ç¼–è¾‘å™¨ï¼‰</span>
<span class="hljs-keyword">const</span> isHighlight = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!props.<span class="hljs-property">editor</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">const</span> isNoteEditor = editorStore.<span class="hljs-property">file</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'note'</span>
  <span class="hljs-keyword">if</span> (isNoteEditor) {
    <span class="hljs-comment">// ç¬”è®°ç¼–è¾‘å™¨ï¼šæ ¹æ®å½“å‰é€‰ä¸­æ–‡æœ¬çš„æ ¼å¼</span>
    <span class="hljs-keyword">return</span> props.<span class="hljs-property">editor</span>.<span class="hljs-title function_">isActive</span>(<span class="hljs-string">'highlight'</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
})
</code></pre>
<p><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ Vue 3 çš„ <code>computed</code> å“åº”å¼è®¡ç®—å±æ€§</li>
<li>åŸºäº TipTap ç¼–è¾‘å™¨çš„ <code>isActive()</code> æ–¹æ³•æ£€æµ‹çŠ¶æ€</li>
<li>å½“ç”¨æˆ·é€‰æ‹©ä¸åŒæ–‡æœ¬æ—¶ï¼ŒçŠ¶æ€è‡ªåŠ¨æ›´æ–°</li>
</ul>
<h4 data-id="heading-22">2. äº¤äº’ä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åº”ç”¨é«˜äº®åè‡ªåŠ¨å…³é—­é¢œè‰²é€‰æ‹©å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">applyHighlight</span>(<span class="hljs-params">color</span>) {
  <span class="hljs-comment">// ... åº”ç”¨é«˜äº®é€»è¾‘</span>
  highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>  <span class="hljs-comment">// å…³é—­å¼¹çª—</span>
}

<span class="hljs-comment">// ç§»é™¤é«˜äº®åè‡ªåŠ¨å…³é—­é¢œè‰²é€‰æ‹©å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">removeHighlight</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ... ç§»é™¤é«˜äº®é€»è¾‘</span>
  highlightPopoverVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>  <span class="hljs-comment">// å…³é—­å¼¹çª—</span>
}
</code></pre>
<p><strong>äº¤äº’ä¼˜åŒ–è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>é€‰æ‹©é¢œè‰²åè‡ªåŠ¨å…³é—­å¼¹çª—ï¼Œå‡å°‘æ“ä½œæ­¥éª¤</li>
<li>æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é€‰ä¸­æ–‡æœ¬çš„é«˜äº®çŠ¶æ€</li>
<li>é¢œè‰²é€‰æ‹©å™¨ä¸­çš„å½“å‰é¢œè‰²é«˜äº®æ˜¾ç¤º</li>
</ul>
<h3 data-id="heading-23">ğŸ¨ æ ·å¼æ¸²æŸ“ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-24">1. TipTap Highlight æ‰©å±•çš„æ ·å¼æ¸²æŸ“</h4>
<p>TipTap çš„ Highlight æ‰©å±•é€šè¿‡å†…è”æ ·å¼è®¾ç½®èƒŒæ™¯è‰²ï¼Œç¡®ä¿é¢œè‰²æ­£ç¡®æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/renderer/src/components/EditorPanel.vue</span>
<span class="hljs-comment">// Tiptap highlightæ‰©å±•çš„æ ·å¼ï¼ˆæ”¯æŒå¤šé¢œè‰²ï¼‰</span>
<span class="hljs-comment">// ç¡®ä¿æœ‰ data-color å±æ€§çš„ mark å…ƒç´ ä½¿ç”¨ TipTap æ‰©å±•è®¾ç½®çš„é¢œè‰²</span>
<span class="hljs-comment">// TipTap æ‰©å±•ä¼šé€šè¿‡å†…è” style è®¾ç½® background-colorï¼Œä¼˜å…ˆçº§é«˜äºç±»é€‰æ‹©å™¨</span>
</code></pre>
<p><strong>æ ·å¼æ¸²æŸ“æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>TipTap æ‰©å±•é€šè¿‡å†…è” <code>style</code> å±æ€§è®¾ç½® <code>background-color</code></li>
<li>å†…è”æ ·å¼ä¼˜å…ˆçº§é«˜äº CSS ç±»é€‰æ‹©å™¨</li>
<li>æ”¯æŒå¤šé¢œè‰²ï¼Œæ¯ç§é¢œè‰²ç‹¬ç«‹æ¸²æŸ“</li>
</ul>
<h4 data-id="heading-25">2. é«˜äº®æ ·å¼ä¼˜åŒ–</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æœç´¢é«˜äº®æ ·å¼ - ä½¿ç”¨é€‰æ‹©é«˜äº®</span>
<span class="hljs-selector-pseudo">::selection</span> {
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#409eff</span>;
  <span class="hljs-attribute">color</span>: white;
}
</code></pre>
<p><strong>æ ·å¼ä¼˜åŒ–ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨å†…è”æ ·å¼ç¡®ä¿é¢œè‰²å‡†ç¡®æ˜¾ç¤º</li>
<li>ä¿æŒé«˜äº®é¢œè‰²ä¸æ–‡æœ¬é¢œè‰²çš„è‰¯å¥½å¯¹æ¯”åº¦</li>
<li>é¿å…è¿‡åº¦è£…é¥°ï¼Œä¿æŒç®€æ´ç¾è§‚</li>
</ul>
<h3 data-id="heading-26">ğŸ¯ æŠ€æœ¯äº®ç‚¹æ€»ç»“</h3>
<h4 data-id="heading-27">1. å¤šé¢œè‰²é«˜äº®æ”¯æŒ</h4>
<ul>
<li><strong>çµæ´»çš„é¢œè‰²ç³»ç»Ÿ</strong>: æ”¯æŒ5ç§é¢œè‰²ï¼Œæ»¡è¶³ä¸åŒåˆ†ç±»éœ€æ±‚</li>
<li><strong>é¢œè‰²æŒä¹…åŒ–</strong>: é«˜äº®é¢œè‰²éšå†…å®¹ä¸€èµ·ä¿å­˜å’ŒåŠ è½½</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ æŒ‰é’®çŠ¶æ€å®æ—¶åæ˜ å½“å‰é«˜äº®çŠ¶æ€</li>
</ul>
<h4 data-id="heading-28">2. æœç´¢ä¸é«˜äº®é›†æˆ</h4>
<ul>
<li><strong>ç»Ÿä¸€æŠ€æœ¯æ–¹æ¡ˆ</strong>: æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®ä½¿ç”¨ç›¸åŒçš„æ‰©å±•</li>
<li><strong>é¢œè‰²åŒºåˆ†</strong>: é€šè¿‡ä¸åŒé¢œè‰²åŒºåˆ†æœç´¢é«˜äº®å’Œæ‰‹åŠ¨é«˜äº®</li>
<li><strong>åŠ¨æ€æ›´æ–°</strong>: æœç´¢åŒ¹é…é¡¹åˆ‡æ¢æ—¶ï¼Œé«˜äº®é¢œè‰²è‡ªåŠ¨æ›´æ–°</li>
</ul>
<h4 data-id="heading-29">3. ç”¨æˆ·ä½“éªŒä¼˜åŒ–</h4>
<ul>
<li><strong>ç›´è§‚çš„é¢œè‰²é€‰æ‹©å™¨</strong>: åœ†å½¢é¢œè‰²å—ï¼Œè§†è§‰æ¸…æ™°</li>
<li><strong>å³æ—¶åé¦ˆ</strong>: åº”ç”¨é«˜äº®åç«‹å³æ˜¾ç¤ºæ•ˆæœ</li>
<li><strong>æ“ä½œä¾¿æ·</strong>: ä¸€é”®åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
</ul>
<h4 data-id="heading-30">4. æŠ€æœ¯æ¶æ„ä¼˜åŠ¿</h4>
<ul>
<li><strong>åŸºäº TipTap æ‰©å±•</strong>: åˆ©ç”¨æˆç†Ÿçš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨æ¡†æ¶</li>
<li><strong>å“åº”å¼çŠ¶æ€ç®¡ç†</strong>: åŸºäº Vue 3 çš„å“åº”å¼ç³»ç»Ÿ</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>: é«˜äº®åŠŸèƒ½ç‹¬ç«‹å°è£…ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<h3 data-id="heading-31">ğŸ”® æ€»ç»“ä¸å±•æœ›</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†åœ¨å°è¯´å†™ä½œè½¯ä»¶çš„ç¬”è®°ç¼–è¾‘å™¨ä¸­å®ç°æ–‡æœ¬é«˜äº®åŠŸèƒ½çš„æŠ€æœ¯æ–¹æ¡ˆã€‚é€šè¿‡ TipTap çš„ Highlight æ‰©å±•ã€Vue 3 çš„å“åº”å¼ç³»ç»Ÿä»¥åŠç²¾å¿ƒè®¾è®¡çš„äº¤äº’é€»è¾‘ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€ç”¨æˆ·ä½“éªŒä¼˜ç§€çš„å¤šé¢œè‰²æ–‡æœ¬é«˜äº®åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-32">æŠ€æœ¯ä¼˜åŠ¿</h4>
<ul>
<li>âœ… <strong>å¤šé¢œè‰²æ”¯æŒ</strong>: 5ç§é¢œè‰²æ»¡è¶³ä¸åŒåˆ†ç±»éœ€æ±‚</li>
<li>âœ… <strong>çŠ¶æ€åŒæ­¥</strong>: å·¥å…·æ çŠ¶æ€å®æ—¶åæ˜ é«˜äº®çŠ¶æ€</li>
<li>âœ… <strong>æœç´¢é›†æˆ</strong>: æœç´¢åŠŸèƒ½ä¸é«˜äº®åŠŸèƒ½æ— ç¼é›†æˆ</li>
<li>âœ… <strong>ç”¨æˆ·å‹å¥½</strong>: ç›´è§‚çš„é¢œè‰²é€‰æ‹©å™¨ï¼Œæ“ä½œä¾¿æ·</li>
</ul>
<h4 data-id="heading-33">æœªæ¥ä¼˜åŒ–æ–¹å‘</h4>
<ul>
<li>ğŸ”® <strong>æ›´å¤šé¢œè‰²</strong>: æ”¯æŒè‡ªå®šä¹‰é¢œè‰²é€‰æ‹©å™¨</li>
<li>ğŸ”® <strong>é«˜äº®åˆ†ç±»</strong>: ä¸ºä¸åŒé¢œè‰²æ·»åŠ æ ‡ç­¾å’Œè¯´æ˜</li>
<li>ğŸ”® <strong>æ‰¹é‡æ“ä½œ</strong>: æ”¯æŒæ‰¹é‡åº”ç”¨æˆ–ç§»é™¤é«˜äº®</li>
<li>ğŸ”® <strong>å¯¼å‡ºæ”¯æŒ</strong>: å¯¼å‡ºæ—¶ä¿ç•™é«˜äº®ä¿¡æ¯</li>
</ul>
<p>é€šè¿‡è¿™å¥—æŠ€æœ¯æ–¹æ¡ˆï¼Œæˆ‘ä»¬ä¸ºå°è¯´åˆ›ä½œè€…æä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œç›´è§‚çš„æ–‡æœ¬æ ‡è®°å·¥å…·ï¼Œå¤§å¤§æå‡äº†ç¬”è®°ç®¡ç†å’Œä¸–ç•Œè§‚æ„å»ºçš„æ•ˆç‡ã€‚</p>
<hr/>
<h4 data-id="heading-34">ğŸ“š ç›¸å…³é“¾æ¥</h4>
<ul>
<li><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaoshengxianjun%2F51mazi" target="_blank" title="https://github.com/xiaoshengxianjun/51mazi" ref="nofollow noopener noreferrer">GitHub - 51mazi</a>ï¼Œç»™ä¸ª Star å“¦~</li>
<li><strong>TipTap å®˜ç½‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Ftiptap.dev" target="_blank" title="https://tiptap.dev" ref="nofollow noopener noreferrer">tiptap.dev</a></li>
<li><strong>æŠ€æœ¯æ ˆ</strong>: TipTap + Vue 3 + Electron + Element Plus</li>
</ul>
<h4 data-id="heading-35">ğŸ·ï¸ æ ‡ç­¾</h4>
<p><code>#TipTap</code> <code>#æ–‡æœ¬é«˜äº®</code> <code>#Vue3</code> <code>#Electron</code> <code>#å°è¯´å†™ä½œ</code> <code>#å¯Œæ–‡æœ¬ç¼–è¾‘</code> <code>#å‰ç«¯å¼€å‘</code> <code>#ç”¨æˆ·ä½“éªŒ</code></p>
<hr/>
<blockquote>
<p>ğŸ’¡ <strong>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ æ”¯æŒä¸€ä¸‹ï¼</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ]]></title>    <link>https://juejin.cn/post/7575102209605353498</link>    <guid>https://juejin.cn/post/7575102209605353498</guid>    <pubDate>2025-11-22T19:14:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605353498" data-draft-id="7575104251866038282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-11-22T19:14:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GeekPMAlex"/> <meta itemprop="url" content="https://juejin.cn/user/2326992765334446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python SQLiteå¤šçº¿ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸ç”Ÿæˆå™¨å…¨é¢è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2326992765334446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GeekPMAlex
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T19:14:50.000Z" title="Sat Nov 22 2025 19:14:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨Pythonå¼€å‘ä¸­ï¼Œæœ‰ä¸€äº›æ ¸å¿ƒæ¦‚å¿µ</p>
<ul>
<li>SQLiteæ•°æ®åº“æ“ä½œ</li>
<li>ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼ˆéå¤§æ¨¡å‹çš„ä¸Šä¸‹æ–‡ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯é“¾æ¥å…³é—­æ•°æ®åº“ï¼‰</li>
<li>è¿­ä»£å™¨å’Œç”Ÿæˆå™¨</li>
</ul>
<p>æœ¬æ–‡é€šè¿‡å®é™…ä»£ç ç¤ºä¾‹ï¼Œè¯¦ç»†è®²è§£è¿™äº›æŠ€æœ¯çš„åŸç†å’Œåº”ç”¨ã€‚</p>
<h2 data-id="heading-1">1. SQLiteå¤šçº¿ç¨‹æ”¯æŒ</h2>
<h3 data-id="heading-2">æ£€æŸ¥SQLiteçº¿ç¨‹å®‰å…¨æ¨¡å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3

<span class="hljs-comment"># æ–¹æ³•1ï¼šæ£€æŸ¥ç¼–è¯‘é€‰é¡¹</span>
conn = sqlite3.connect(<span class="hljs-string">':memory:'</span>)
cursor = conn.cursor()
cursor.execute(<span class="hljs-string">'PRAGMA compile_options;'</span>)
options = [row[<span class="hljs-number">0</span>] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> cursor.fetchall()]
thread_options = [opt <span class="hljs-keyword">for</span> opt <span class="hljs-keyword">in</span> options <span class="hljs-keyword">if</span> <span class="hljs-string">'THREAD'</span> <span class="hljs-keyword">in</span> opt.upper()]
<span class="hljs-built_in">print</span>(<span class="hljs-string">"çº¿ç¨‹å®‰å…¨é€‰é¡¹:"</span>, thread_options)

<span class="hljs-comment"># æ–¹æ³•2ï¼šå®é™…å¤šçº¿ç¨‹æµ‹è¯•</span>
<span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_thread_safety</span>():
    results = {}
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">worker</span>(<span class="hljs-params">thread_id, db_path, results</span>):
        <span class="hljs-keyword">try</span>:
            conn = sqlite3.connect(db_path, check_same_thread=<span class="hljs-literal">False</span>)
            cursor = conn.cursor()
            cursor.execute(<span class="hljs-string">'''
                CREATE TABLE IF NOT EXISTS test (id INTEGER, data TEXT)
            '''</span>)
            cursor.execute(
                <span class="hljs-string">"INSERT INTO test VALUES (?, ?)"</span>, 
                (thread_id, <span class="hljs-string">f"Data from <span class="hljs-subst">{thread_id}</span>"</span>)
            )
            conn.commit()
            conn.close()
            results[thread_id] = <span class="hljs-string">"æˆåŠŸ"</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            results[thread_id] = <span class="hljs-string">f"å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>

    threads = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>):
        thread = threading.Thread(target=worker, args=(i, <span class="hljs-string">':memory:'</span>, results))
        threads.append(thread)
        thread.start()
    
    <span class="hljs-keyword">for</span> thread <span class="hljs-keyword">in</span> threads:
        thread.join()
    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">all</span>(<span class="hljs-string">"æˆåŠŸ"</span> <span class="hljs-keyword">in</span> result <span class="hljs-keyword">for</span> result <span class="hljs-keyword">in</span> results.values())

<span class="hljs-built_in">print</span>(<span class="hljs-string">"å¤šçº¿ç¨‹æ”¯æŒ:"</span>, test_thread_safety())
</code></pre>
<h3 data-id="heading-3">SQLiteå¤šçº¿ç¨‹æœ€ä½³å®è·µ(WMLæ¨¡å¼)</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> sqlite3
<span class="hljs-keyword">import</span> threading

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadSafeDatabase</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, db_path</span>):
        self.db_path = db_path
        self.local = threading.local()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_connection</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""æ¯ä¸ªçº¿ç¨‹ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥"""</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-built_in">hasattr</span>(self.local, <span class="hljs-string">'conn'</span>):
            self.local.conn = sqlite3.connect(
                self.db_path, 
                check_same_thread=<span class="hljs-literal">False</span>
            )
            <span class="hljs-comment"># å¯ç”¨WALæ¨¡å¼æå‡å¹¶å‘æ€§èƒ½</span>
            self.local.conn.execute(<span class="hljs-string">"PRAGMA journal_mode=WAL;"</span>)
        <span class="hljs-keyword">return</span> self.local.conn

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
db_manager = ThreadSafeDatabase(<span class="hljs-string">'test.db'</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">worker_thread</span>(<span class="hljs-params">thread_id</span>):
    conn = db_manager.get_connection()
    cursor = conn.cursor()
    cursor.execute(<span class="hljs-string">"INSERT INTO data VALUES (?, ?)"</span>, (thread_id, <span class="hljs-string">f"Message"</span>))
    conn.commit()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"çº¿ç¨‹<span class="hljs-subst">{thread_id}</span>æ“ä½œå®Œæˆ"</span>)
</code></pre>
<h2 data-id="heading-4">2. ä¸Šä¸‹æ–‡ç®¡ç†å™¨ä¸@contextmanager</h2>
<h3 data-id="heading-5">åŸºç¡€ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»Ÿæ–‡ä»¶æ“ä½œ</span>
file = <span class="hljs-built_in">open</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'w'</span>)
<span class="hljs-keyword">try</span>:
    file.write(<span class="hljs-string">'Hello'</span>)
<span class="hljs-keyword">finally</span>:
    file.close()  <span class="hljs-comment"># å¿…é¡»æ‰‹åŠ¨å…³é—­</span>

<span class="hljs-comment"># ä½¿ç”¨withè¯­å¥</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">'test.txt'</span>, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> file:
    file.write(<span class="hljs-string">'Hello'</span>)
<span class="hljs-comment"># æ–‡ä»¶è‡ªåŠ¨å…³é—­</span>
</code></pre>
<h3 data-id="heading-6">è‡ªå®šä¹‰ä¸Šä¸‹æ–‡ç®¡ç†å™¨ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Timer</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__enter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">import</span> time
        self.start = time.time()
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__exit__</span>(<span class="hljs-params">self, exc_type, exc_val, exc_tb</span>):
        self.end = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è€—æ—¶: <span class="hljs-subst">{self.end - self.start:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)

<span class="hljs-keyword">with</span> Timer():
    <span class="hljs-keyword">import</span> time
    time.sleep(<span class="hljs-number">1</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ“ä½œå®Œæˆ"</span>)
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨@contextmanagerç®€åŒ–</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">import</span> time

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">timer</span>(<span class="hljs-params">description=<span class="hljs-string">"æ“ä½œ"</span></span>):
    start = time.time()
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span>  <span class="hljs-comment"># æš‚åœç‚¹ï¼Œæ‰§è¡Œwithå—å†…çš„ä»£ç </span>
    <span class="hljs-keyword">finally</span>:
        end = time.time()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{description}</span>è€—æ—¶: <span class="hljs-subst">{end - start:<span class="hljs-number">.2</span>f}</span>ç§’"</span>)

<span class="hljs-keyword">with</span> timer(<span class="hljs-string">"æ•°æ®åº“æŸ¥è¯¢"</span>):
    time.sleep(<span class="hljs-number">0.5</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æŸ¥è¯¢å®Œæˆ"</span>)
</code></pre>
<h3 data-id="heading-8">æ•°æ®åº“äº‹åŠ¡ä¸Šä¸‹æ–‡ç®¡ç†å™¨</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> contextlib <span class="hljs-keyword">import</span> contextmanager
<span class="hljs-keyword">import</span> sqlite3

<span class="hljs-meta">@contextmanager</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">database_transaction</span>(<span class="hljs-params">db_path</span>):
    <span class="hljs-string">"""è‡ªåŠ¨ç®¡ç†æ•°æ®åº“äº‹åŠ¡çš„ä¸Šä¸‹æ–‡ç®¡ç†å™¨"""</span>
    conn = sqlite3.connect(db_path)
    cursor = conn.cursor()
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">yield</span> cursor  <span class="hljs-comment"># å°†cursoräº¤ç»™withå—ä½¿ç”¨</span>
        conn.commit()  <span class="hljs-comment"># æ²¡æœ‰å¼‚å¸¸æ—¶æäº¤</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… äº‹åŠ¡æäº¤æˆåŠŸ"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        conn.rollback()  <span class="hljs-comment"># æœ‰å¼‚å¸¸æ—¶å›æ»š</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ äº‹åŠ¡å›æ»š: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">raise</span> e
    <span class="hljs-keyword">finally</span>:
        conn.close()  <span class="hljs-comment"># æ€»æ˜¯å…³é—­è¿æ¥</span>

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">with</span> database_transaction(<span class="hljs-string">':memory:'</span>) <span class="hljs-keyword">as</span> cursor:
    cursor.execute(<span class="hljs-string">"CREATE TABLE users (id INTEGER, name TEXT)"</span>)
    cursor.execute(<span class="hljs-string">"INSERT INTO users VALUES (1, 'Alice')"</span>)
</code></pre>
<h2 data-id="heading-9">3. è¿­ä»£å™¨è¯¦è§£</h2>
<h3 data-id="heading-10">åŸºç¡€è¿­ä»£å™¨ä½¿ç”¨</h3>
<p>inter()çš„ç”¨æ³•ï¼šæ¯æ¬¡è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ—è¡¨æ˜¯å¯è¿­ä»£å¯¹è±¡</span>
my_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]

<span class="hljs-comment"># æ‰‹åŠ¨ä½¿ç”¨è¿­ä»£å™¨</span>
iterator = <span class="hljs-built_in">iter</span>(my_list)
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterator))  <span class="hljs-comment"># 3</span>

<span class="hljs-comment"># forå¾ªç¯èƒŒåå°±æ˜¯è¿­ä»£å™¨</span>
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> my_list:
    <span class="hljs-built_in">print</span>(item)
</code></pre>
<h3 data-id="heading-11">è‡ªå®šä¹‰è¿­ä»£å™¨ç±»</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Counter</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, start, end</span>):
        self.current = start
        self.end = end
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> self
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">if</span> self.current &lt;= self.end:
            result = self.current
            self.current += <span class="hljs-number">1</span>
            <span class="hljs-keyword">return</span> result
        <span class="hljs-keyword">raise</span> StopIteration()

<span class="hljs-comment"># ä½¿ç”¨è‡ªå®šä¹‰è¿­ä»£å™¨</span>
counter = Counter(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> counter:
    <span class="hljs-built_in">print</span>(num)  <span class="hljs-comment"># 1, 2, 3</span>
</code></pre>
<h2 data-id="heading-12">4. ç”Ÿæˆå™¨æ·±åº¦è§£æ</h2>
<p>åªè¦æœ‰yield å°±æ˜¯ç”Ÿæˆå™¨</p>
<h3 data-id="heading-13">ç”Ÿæˆå™¨å‡½æ•°åŸºç¡€</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">simple_generator</span>():
    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>
    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>

<span class="hljs-comment"># ç”Ÿæˆå™¨å‡½æ•°è¿”å›ç”Ÿæˆå™¨å¯¹è±¡</span>
gen = simple_generator()
<span class="hljs-built_in">print</span>(gen)  <span class="hljs-comment"># &lt;generator object simple_generator at 0x...&gt;</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 2</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))  <span class="hljs-comment"># 3</span>
</code></pre>
<h3 data-id="heading-14">ç”Ÿæˆå™¨ vs æ™®é€šå‡½æ•°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">normal_function</span>():
    result = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
        result.append(i)
    <span class="hljs-keyword">return</span> result  <span class="hljs-comment"># ä¸€æ¬¡æ€§è¿”å›æ‰€æœ‰æ•°æ®ï¼Œå ç”¨å¤§é‡å†…å­˜</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generator_function</span>():
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000000</span>):
        <span class="hljs-keyword">yield</span> i  <span class="hljs-comment"># æ¯æ¬¡åªç”Ÿæˆä¸€ä¸ªæ•°æ®ï¼ŒèŠ‚çœå†…å­˜</span>

<span class="hljs-comment"># å†…å­˜å ç”¨å¯¹æ¯”</span>
<span class="hljs-keyword">import</span> sys
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ—è¡¨å†…å­˜: <span class="hljs-subst">{sys.getsizeof(normal_function())}</span> å­—èŠ‚"</span>)
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”Ÿæˆå™¨å†…å­˜: <span class="hljs-subst">{sys.getsizeof(generator_function())}</span> å­—èŠ‚"</span>)
</code></pre>
<h3 data-id="heading-15">ç”Ÿæˆå™¨è¡¨è¾¾å¼</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ—è¡¨æ¨å¯¼å¼ - ç«‹å³åˆ›å»ºå®Œæ•´åˆ—è¡¨</span>
squares_list = [x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)]
<span class="hljs-built_in">print</span>(squares_list)  <span class="hljs-comment"># [0, 1, 4, 9, 16]</span>

<span class="hljs-comment"># ç”Ÿæˆå™¨è¡¨è¾¾å¼ - æŒ‰éœ€ç”Ÿæˆ</span>
squares_gen = (x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>))
<span class="hljs-built_in">print</span>(squares_gen)  <span class="hljs-comment"># &lt;generator object &lt;genexpr&gt; at 0x...&gt;</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">list</span>(squares_gen))  <span class="hljs-comment"># [0, 1, 4, 9, 16]</span>
</code></pre>
<h3 data-id="heading-16">å®ç”¨ç”Ÿæˆå™¨æ¡ˆä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¯»å–å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_large_file</span>(<span class="hljs-params">filename</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:
            <span class="hljs-keyword">yield</span> line.strip()  <span class="hljs-comment"># æ¯æ¬¡åªè¯»ä¸€è¡Œåˆ°å†…å­˜</span>

<span class="hljs-comment"># æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">limit</span>):
    a, b = <span class="hljs-number">0</span>, <span class="hljs-number">1</span>
    count = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> count &lt; limit:
        <span class="hljs-keyword">yield</span> a
        a, b = b, a + b
        count += <span class="hljs-number">1</span>

<span class="hljs-keyword">for</span> i, fib <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(fibonacci(<span class="hljs-number">10</span>)):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"F(<span class="hljs-subst">{i}</span>) = <span class="hljs-subst">{fib}</span>"</span>)
</code></pre>
<h3 data-id="heading-17">ç”Ÿæˆå™¨çŠ¶æ€ä¿æŒ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">interactive_generator</span>():
    total = <span class="hljs-number">0</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        value = <span class="hljs-keyword">yield</span> total  <span class="hljs-comment"># å¯ä»¥æ¥æ”¶å¤–éƒ¨å‘é€çš„å€¼</span>
        <span class="hljs-keyword">if</span> value <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
            total += value
        <span class="hljs-keyword">else</span>:
            total += <span class="hljs-number">1</span>

gen = interactive_generator()
<span class="hljs-built_in">next</span>(gen)  <span class="hljs-comment"># å¯åŠ¨ç”Ÿæˆå™¨ï¼Œè¿”å›0</span>
<span class="hljs-built_in">print</span>(gen.send(<span class="hljs-number">10</span>))  <span class="hljs-comment"># å‘é€10ï¼Œè¿”å›10</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(gen))     <span class="hljs-comment"># åŠ 1ï¼Œè¿”å›11</span>
<span class="hljs-built_in">print</span>(gen.send(<span class="hljs-number">5</span>))   <span class="hljs-comment"># å‘é€5ï¼Œè¿”å›16</span>
</code></pre>
<h2 data-id="heading-18">5. å…³é”®çŸ¥è¯†ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-19">SQLiteå¤šçº¿ç¨‹è¦ç‚¹</h3>
<ul>
<li>æ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“è¿æ¥</li>
<li>å¯ç”¨WALæ¨¡å¼æå‡å¹¶å‘æ€§èƒ½</li>
<li>ä½¿ç”¨è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥</li>
<li>è®¾ç½®é€‚å½“çš„è¶…æ—¶æ—¶é—´å¤„ç†é”ç«äº‰</li>
</ul>
<h3 data-id="heading-20">ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ ¸å¿ƒæ¦‚å¿µ</h3>
<ul>
<li><code>with</code>è¯­å¥è‡ªåŠ¨ç®¡ç†èµ„æºç”Ÿå‘½å‘¨æœŸ</li>
<li><code>@contextmanager</code>è£…é¥°å™¨ç®€åŒ–ä¸Šä¸‹æ–‡ç®¡ç†å™¨åˆ›å»º</li>
<li>SETUPä»£ç åœ¨<code>yield</code>ä¹‹å‰æ‰§è¡Œ</li>
<li>CLEANUPä»£ç åœ¨<code>yield</code>ä¹‹åæ‰§è¡Œ</li>
<li>ä½¿ç”¨<code>try-finally</code>ç¡®ä¿æ¸…ç†ä»£ç æ€»æ˜¯æ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-21">è¿­ä»£å™¨ä¸ç”Ÿæˆå™¨åŒºåˆ«</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>è¿­ä»£å™¨</th><th>ç”Ÿæˆå™¨</th></tr></thead><tbody><tr><td>åˆ›å»ºæ–¹å¼</td><td>å®ç°<code>__iter__</code>å’Œ<code>__next__</code></td><td>ä½¿ç”¨<code>yield</code>å…³é”®å­—</td></tr><tr><td>ä»£ç å¤æ‚åº¦</td><td>ç›¸å¯¹å¤æ‚</td><td>ç®€å•ç›´è§‚</td></tr><tr><td>å†…å­˜æ•ˆç‡</td><td>æŒ‰éœ€åŠ è½½</td><td>æŒ‰éœ€åŠ è½½</td></tr><tr><td>çŠ¶æ€ç®¡ç†</td><td>æ‰‹åŠ¨ç»´æŠ¤</td><td>è‡ªåŠ¨ä¿æŒ</td></tr></tbody></table>
<h3 data-id="heading-22">é‡è¦è§„åˆ™</h3>
<ol>
<li><strong>ä»»ä½•åŒ…å«<code>yield</code>å…³é”®å­—çš„å‡½æ•°éƒ½æ˜¯ç”Ÿæˆå™¨å‡½æ•°</strong></li>
<li><strong>ç”Ÿæˆå™¨å‡½æ•°è°ƒç”¨æ—¶è¿”å›ç”Ÿæˆå™¨å¯¹è±¡ï¼Œä¸ç«‹å³æ‰§è¡Œå‡½æ•°ä½“</strong></li>
<li><strong>éœ€è¦è°ƒç”¨<code>next()</code>æˆ–ç”¨äºå¾ªç¯æ‰ä¼šæ‰§è¡Œç”Ÿæˆå™¨ä»£ç </strong></li>
<li><strong>ç”Ÿæˆå™¨åœ¨<code>yield</code>å¤„æš‚åœï¼Œä¿æŒå½“å‰çŠ¶æ€</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§]]></title>    <link>https://juejin.cn/post/7575133880435277875</link>    <guid>https://juejin.cn/post/7575133880435277875</guid>    <pubDate>2025-11-22T20:21:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435277875" data-draft-id="7575031395861463086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§"/> <meta itemprop="keywords" content="Go,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2025-11-22T20:21:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ›²æ°´æµå•†åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/26814017181144"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go sync.Mutex æºç è§£æï¼šè®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/26814017181144/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ›²æ°´æµå•†åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T20:21:23.000Z" title="Sat Nov 22 2025 20:21:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨å¹¶å‘ç¼–ç¨‹çš„ä¸–ç•Œä¸­ï¼Œäº’æ–¥é”æ˜¯å®ˆæŠ¤å…±äº«èµ„æºçš„åŸºçŸ³ã€‚Goè¯­è¨€çš„<code>sync.Mutex</code>ä»¥å…¶ç®€æ´çš„APIèƒŒåï¼Œéšè—ç€ç²¾å·§è€Œé«˜æ•ˆçš„è®¾è®¡ã€‚ä»å¿«é€Ÿè·¯å¾„çš„æè‡´ä¼˜åŒ–åˆ°æ…¢é€Ÿè·¯å¾„çš„æ™ºèƒ½è‡ªé€‚åº”ï¼Œä»æ­£å¸¸æ¨¡å¼çš„é«˜æ€§èƒ½åˆ°é¥¥é¥¿æ¨¡å¼çš„å¼ºå…¬å¹³ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚éƒ½å‡èšç€Goå›¢é˜Ÿå¯¹å¹¶å‘ç¼–ç¨‹çš„æ·±åˆ»ç†è§£ã€‚æœ¬æ–‡å°†æ·±å…¥<code>sync.Mutex</code>çš„æºç ä¸–ç•Œï¼Œæ¢å¯»å…¶èƒŒåçš„è®¾è®¡å“²å­¦ä¸å·¥ç¨‹æ™ºæ…§ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„ã€çŠ¶æ€æ ‡å¿—å’Œæ–¹æ³•</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Mutex <span class="hljs-keyword">struct</span> {
    state <span class="hljs-type">int32</span>
    sema  <span class="hljs-type">uint32</span>
}
</code></pre>
<ul>
<li><code>state</code>ï¼šè¡¨ç¤ºé”çš„çŠ¶æ€ï¼ŒåŒ…å«å¤šä¸ªä¿¡æ¯ï¼ˆæ˜¯å¦é”å®šã€æ˜¯å¦å”¤é†’ã€æ˜¯å¦é¥¥é¥¿ã€ç­‰å¾…è€…æ•°é‡ï¼‰ã€‚</li>
<li><code>sema</code>ï¼šä¿¡å·é‡ï¼Œç”¨äºé˜»å¡å’Œå”¤é†’goroutineã€‚</li>
</ul>
<p>çŠ¶æ€æ ‡å¿—</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> (
    mutexLocked = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-literal">iota</span> <span class="hljs-comment">// mutex is locked</span>
    mutexWoken
    mutexStarving
    mutexWaiterShift = <span class="hljs-literal">iota</span>

    starvationThresholdNs = <span class="hljs-number">1e6</span>
)
</code></pre>
<ul>
<li>ä½¿ç”¨ä½æ“ä½œæ¥åœ¨ä¸€ä¸ª32ä½çš„æ•´æ•°ä¸­å­˜å‚¨å¤šä¸ªçŠ¶æ€ã€‚</li>
<li>å¸¸é‡å®šä¹‰ï¼š
<ul>
<li><code>mutexLocked</code>ï¼šæœ€ä½ä½ï¼Œè¡¨ç¤ºé”æ˜¯å¦è¢«æŒæœ‰ã€‚</li>
<li><code>mutexWoken</code>ï¼šç¬¬äºŒä½ï¼Œè¡¨ç¤ºæœ‰goroutineè¢«å”¤é†’ã€‚</li>
<li><code>mutexStarving</code>ï¼šç¬¬ä¸‰ä½ï¼Œè¡¨ç¤ºå½“å‰å¤„äºé¥¥é¥¿æ¨¡å¼ã€‚</li>
<li><code>mutexWaiterShift</code>ï¼š<code>mutexWaiterShift = 3</code>ï¼Œç­‰å¾…è€…æ•°é‡å ç”¨ç¬¬3-31ä½ã€‚</li>
</ul>
</li>
<li>è§£é‡ŠçŠ¶æ€ç»„åˆï¼Œä¾‹å¦‚ï¼š<code>state</code>ä¸º<code>0001</code>ï¼ˆäºŒè¿›åˆ¶ï¼‰è¡¨ç¤ºé”è¢«æŒæœ‰ï¼Œæ— ç­‰å¾…è€…ã€‚</li>
</ul>
<pre><code class="hljs language-text" lang="text">|   31..3  |     2    |   1   |   0   |
|----------|----------|-------|-------|
| ç­‰å¾…è€…æ•°é‡ | starving | woken |locked |
</code></pre>
<p>æ–¹æ³•</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Lock() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> TryLock() <span class="hljs-type">bool</span> {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> lockSlow() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Unlock() {}
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> unlockSlow(<span class="hljs-built_in">new</span> <span class="hljs-type">int32</span>) {}
</code></pre>
<h2 data-id="heading-2">äºŒã€æ¨¡å¼ä»‹ç»</h2>
<p>åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œé”çš„è®¾è®¡æ°¸è¿œé¢ä¸´ä¸€ä¸ªæ ¹æœ¬æ€§çŸ›ç›¾ï¼šå¦‚ä½•åœ¨<strong>æ€§èƒ½</strong>å’Œ<strong>å…¬å¹³æ€§</strong>ä¹‹é—´æ‰¾åˆ°æœ€ä½³å¹³è¡¡ç‚¹ã€‚Go è¯­è¨€çš„Â <code>sync.Mutex</code>Â é€šè¿‡åˆ›æ–°çš„<strong>åŒæ¨¡å¼è®¾è®¡</strong>ä¼˜é›…åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-3">2.1 æ­£å¸¸æ¨¡å¼ï¼ˆNormal Modeï¼‰ï¼š</h3>
<ul>
<li>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œç­‰å¾…çš„goroutinesä¼šæŒ‰ç…§FIFOçš„é¡ºåºæ’é˜Ÿï¼Œä½†æ˜¯è¢«å”¤é†’çš„ç­‰å¾…è€…ï¼ˆåˆšåˆšè¢«å”¤é†’çš„goroutineï¼‰å¹¶ä¸ä¼šç«‹å³è·å¾—é”ï¼Œè€Œæ˜¯éœ€è¦å’Œ newly arriving goroutinesï¼ˆæ–°åˆ°è¾¾çš„goroutineï¼‰ç«äº‰ã€‚æ–°åˆ°è¾¾çš„goroutineæœ‰ä¸€ä¸ªä¼˜åŠ¿ï¼Œå› ä¸ºå®ƒä»¬å·²ç»åœ¨CPUä¸Šè¿è¡Œäº†ï¼Œæ‰€ä»¥å¯èƒ½æ¯”åˆšè¢«å”¤é†’çš„goroutineæ›´æœ‰ç«äº‰åŠ›ã€‚å› æ­¤ï¼Œåˆšè¢«å”¤é†’çš„goroutineå¾ˆå¯èƒ½ç«äº‰å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¢«å”¤é†’çš„goroutineä¼šåŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å‰é¢ã€‚å¦‚æœå®ƒç«äº‰å¤±è´¥è¶…è¿‡1msï¼Œé‚£ä¹ˆmutexå°±ä¼šåˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</p>
</li>
<li>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œæ€§èƒ½è¾ƒé«˜ï¼Œå› ä¸ºæ–°åˆ°è¾¾çš„goroutineå¯ä»¥æœ‰æœºä¼šç›´æ¥è·å–é”ï¼Œè€Œä¸éœ€è¦ç­‰å¾…ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">2.2 é¥¥é¥¿æ¨¡å¼ï¼ˆStarvation Modeï¼‰ï¼š</h3>
<ul>
<li>
<p>åœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œmutexçš„æ‰€æœ‰æƒç›´æ¥ä»è§£é”çš„goroutineç§»äº¤ç»™ç­‰å¾…é˜Ÿåˆ—æœ€å‰ç«¯çš„goroutineã€‚æ–°åˆ°è¾¾çš„goroutinesä¸ä¼šå°è¯•å»è·å–é”ï¼Œå³ä½¿mutexçœ‹èµ·æ¥æ˜¯è§£é”çŠ¶æ€ã€‚å®ƒä»¬ä¹Ÿä¸ä¼šè‡ªæ—‹ã€‚ç›¸åï¼Œå®ƒä»¬ä¼šæŠŠè‡ªå·±åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚</p>
</li>
<li>
<p>é¥¥é¥¿æ¨¡å¼æ˜¯ä¸ºäº†é˜²æ­¢ç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutinesé•¿æ—¶é—´è·å–ä¸åˆ°é”ï¼Œå³é˜²æ­¢â€œå°¾å»¶è¿Ÿâ€ã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">2.3 æ¨¡å¼åˆ‡æ¢çš„æ—¶æœºï¼š</h3>
<ul>
<li>æ­£å¸¸æ¨¡å¼ -&gt; é¥¥é¥¿æ¨¡å¼ï¼šå½“ä¸€ä¸ªgoroutineç­‰å¾…é”çš„æ—¶é—´è¶…è¿‡1msæ—¶ï¼Œmutexåˆ‡æ¢åˆ°é¥¥é¥¿æ¨¡å¼ã€‚</li>
<li>é¥¥é¥¿æ¨¡å¼ -&gt; æ­£å¸¸æ¨¡å¼ï¼šå½“è·å–åˆ°é”çš„goroutineæ˜¯ç­‰å¾…é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªç­‰å¾…è€…ï¼Œæˆ–è€…å®ƒç­‰å¾…çš„æ—¶é—´å°äº1msæ—¶ï¼Œmutexåˆ‡æ¢å›æ­£å¸¸æ¨¡å¼ã€‚</li>
</ul>
<p>è¿™ç§è®¾è®¡æ—¢ä¿è¯äº†æ–°åˆ°è¾¾goroutineçš„ç«äº‰æœºä¼šï¼ˆæé«˜æ€§èƒ½ï¼‰ï¼Œåˆé¿å…äº†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„goroutineæ°¸è¿œæ— æ³•è·å–é”ï¼ˆä¿è¯å…¬å¹³æ€§ï¼‰ã€‚</p>
<p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>state</code>å­—æ®µçš„<code>mutexStarving</code>ä½æ¥è¡¨ç¤ºé¥¥é¥¿æ¨¡å¼ï¼Œé€šè¿‡ç­‰å¾…æ—¶é—´ï¼ˆ<code>waitStartTime</code>ï¼‰å’Œ<code>starvationThresholdNs</code>ï¼ˆ1e6çº³ç§’ï¼Œå³1msï¼‰æ¥è§¦å‘æ¨¡å¼åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-6">ä¸‰ã€æ‚²è§‚é”ä¸ä¹è§‚é”æ€æƒ³</h2>
<p>åœ¨ä¸€èˆ¬çš„è®¾è®¡é”è®¾è®¡ä¸­ï¼Œæœ‰2ç§åŸºæœ¬æ€æƒ³â€”â€”<code>æ‚²è§‚é”</code>å’Œ<code>ä¹è§‚é”</code>ï¼Œç”±æ­¤äº§ç”Ÿäº†åŠ é”å¤±è´¥åçš„2ç§åŸºæœ¬ç­–ç•¥ï¼š<code>é˜»å¡ï¼ˆBlockingï¼‰</code>å’Œ<code>è‡ªæ—‹ï¼ˆSpinningï¼‰</code>ã€‚</p>
<h3 data-id="heading-7">3.1 ä¹è§‚é”æ€æƒ³ä¸è‡ªæ—‹ï¼ˆSpinningï¼‰ï¼š</h3>
<p><strong>ä¹è§‚é”æ€æƒ³</strong>ï¼šæ€»æ˜¯å‡è®¾æœ€å¥½çš„æƒ…å†µï¼Œæ¯æ¬¡è®¿é—®å…±äº«èµ„æºæ—¶éƒ½è®¤ä¸ºæ²¡æœ‰å…¶ä»–çº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œå› æ­¤ä¸ä¼šåŠ é”ã€‚åœ¨äº’æ–¥é”ä¸­ï¼Œå¦‚æœåŠ é”å¤±è´¥ï¼Œçº¿ç¨‹ä¸ä¼šé˜»å¡ï¼Œè€Œæ˜¯ä¸æ–­é‡è¯•ï¼ˆè‡ªæ—‹ï¼‰ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == mutexLocked &amp;&amp; runtime_canSpin(iter) {
    <span class="hljs-comment">// ä¹è§‚å‡è®¾ï¼šé”å¾ˆå¿«ä¼šé‡Šæ”¾ï¼Œè‡ªæ—‹ç­‰å¾…</span>
    runtime_doSpin()
    iter++
    old = m.state
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<ul>
<li>æ“ä½œï¼šçº¿ç¨‹ä¸æ–­å¾ªç¯æ£€æŸ¥é”æ˜¯å¦è¢«é‡Šæ”¾ï¼Œåœ¨æ­¤æœŸé—´ä¸ä¼šè®©å‡ºCPUã€‚</li>
<li>ä¼˜ç‚¹ï¼šé¿å…ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå¦‚æœé”çš„æŒæœ‰æ—¶é—´å¾ˆçŸ­ï¼Œåˆ™èƒ½å¾ˆå¿«è·å–åˆ°é”ã€‚</li>
<li>ç¼ºç‚¹ï¼šæ¶ˆè€—CPUï¼Œå¦‚æœé”æŒæœ‰æ—¶é—´è¾ƒé•¿ï¼Œåˆ™ä¼šæµªè´¹å¤§é‡CPUå‘¨æœŸã€‚</li>
</ul>
<p><em>æ³¨æ„ï¼Œåœ¨æ•°æ®åº“æˆ–CASï¼ˆCompare-And-Swapï¼‰æ“ä½œä¸­ï¼Œä¹è§‚é”é€šå¸¸é€šè¿‡ç‰ˆæœ¬å·æˆ–CASæ“ä½œæ¥å®ç°ï¼Œè€Œä¸ä½¿ç”¨äº’æ–¥é”ã€‚</em></p>
<h3 data-id="heading-8">3.2 æ‚²è§‚é”æ€æƒ³ä¸é˜»å¡ï¼ˆBlockingï¼‰ï¼š</h3>
<p><strong>æ‚²è§‚é”æ€æƒ³</strong>ï¼šæ€»æ˜¯å‡è®¾æœ€åæƒ…å†µï¼Œè®¤ä¸ºå…±äº«èµ„æºæ¯æ¬¡è¢«è®¿é—®æ—¶éƒ½ä¼šå‘ç”Ÿå†²çªï¼Œå› æ­¤æ¯æ¬¡è®¿é—®æ—¶éƒ½ä¼šå…ˆåŠ é”ï¼Œé˜²æ­¢å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, old, <span class="hljs-built_in">new</span>) {
    <span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == <span class="hljs-number">0</span> {
            <span class="hljs-keyword">break</span> <span class="hljs-comment">// locked the mutex with CAS</span>
    }
    queueLifo := waitStartTime != <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> waitStartTime == <span class="hljs-number">0</span> {
        waitStartTime = runtime_nanotime()
    }
    <span class="hljs-comment">// æ‚²è§‚ç°å®ï¼šè¿›å…¥é˜»å¡</span>
    runtime_SemacquireMutex(&amp;m.sema, queueLifo, <span class="hljs-number">2</span>)
}
</code></pre>
<ul>
<li>æ“ä½œï¼šå°†å½“å‰çº¿ç¨‹ï¼ˆæˆ–goroutineï¼‰æ”¾å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶è®©å‡ºCPUï¼Œè¿›å…¥ç¡çœ çŠ¶æ€ã€‚</li>
<li>ä¼˜ç‚¹ï¼šä¸æ¶ˆè€—CPUå‘¨æœŸï¼Œé€‚åˆé•¿æ—¶é—´ç­‰å¾…æˆ–é«˜ç«äº‰åœºæ™¯ã€‚</li>
<li>ç¼ºç‚¹ï¼šä¸Šä¸‹æ–‡åˆ‡æ¢ï¼ˆç”¨æˆ·æ€åˆ°å†…æ ¸æ€ï¼‰çš„å¼€é”€è¾ƒå¤§ï¼Œå¦‚æœé”çš„æŒæœ‰æ—¶é—´å¾ˆçŸ­ï¼Œé‚£ä¹ˆå”¤é†’çº¿ç¨‹çš„å¼€é”€å¯èƒ½æ¯”é”æŒæœ‰æ—¶é—´è¿˜é•¿ã€‚</li>
</ul>
<p>Go sync.Mutex çš„è®¾è®¡æ²¡æœ‰ç®€å•åœ°äºŒé€‰ä¸€ï¼Œè€Œæ˜¯è®¾è®¡äº†ä¸€ä¸ª<strong>è‡ªé€‚åº”çš„æ··åˆç­–ç•¥</strong></p>
<h2 data-id="heading-9">å››ã€åŠ é”è¿‡ç¨‹ï¼ˆLockï¼‰</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Lock() {
    <span class="hljs-comment">// å¿«é€Ÿè·¯å¾„ï¼šå½“é”å®Œå…¨ç©ºé—²æ—¶ï¼Œé€šè¿‡ä¸€æ¬¡åŸå­æ“ä½œç›´æ¥è·å–é”</span>
    <span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, <span class="hljs-number">0</span>, mutexLocked) {
        <span class="hljs-keyword">if</span> race.Enabled {
            race.Acquire(unsafe.Pointer(m))
        }
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-comment">// æ…¢é€Ÿè·¯å¾„</span>
    m.lockSlow()
}
</code></pre>
<p><em>æ³¨æ„ï¼šm.lockSlow()è¢«å•ç‹¬æ‹¿å‡ºæ¥ï¼Œè¿™æ ·å¿«é€Ÿè·¯å¾„å°±å¯ä»¥è¢«Goç¼–è¯‘å™¨å†…è”ä¼˜åŒ–ã€‚</em></p>
<h3 data-id="heading-10">å¿«é€Ÿè·¯å¾„</h3>
<ul>
<li>é€šè¿‡CASå°è¯•å°†<code>state</code>ä»0è®¾ç½®ä¸º<code>mutexLocked</code>ï¼ŒæˆåŠŸåˆ™è¿”å›ã€‚</li>
</ul>
<h3 data-id="heading-11">æ…¢é€Ÿè·¯å¾„ï¼ˆlockSlowï¼‰</h3>
<ul>
<li>åˆå§‹åŒ–ä¸€äº›å˜é‡ï¼š<code>waitStartTime</code>ï¼ˆå¼€å§‹ç­‰å¾…çš„æ—¶é—´ï¼‰ã€<code>starving</code>ï¼ˆæ˜¯å¦é¥¥é¥¿ï¼‰ã€<code>awoke</code>ï¼ˆæ˜¯å¦è¢«å”¤é†’ï¼‰ã€<code>iter</code>ï¼ˆè‡ªæ—‹è®¡æ•°å™¨ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> waitStartTime <span class="hljs-type">int64</span>
starving := <span class="hljs-literal">false</span>
awoke := <span class="hljs-literal">false</span>
iter := <span class="hljs-number">0</span>
old := m.state
</code></pre>
<ul>
<li>
<p>å¾ªç¯å°è¯•è·å–é”ï¼š</p>
<ul>
<li><strong>è‡ªæ—‹æ¡ä»¶</strong>ï¼šæ­£å¸¸æ¨¡å¼ã€é”è¢«æŒæœ‰ã€è‡ªæ—‹æ¬¡æ•°æœªè¶…è¿‡ä¸Šé™ï¼ˆç”±goè¿è¡Œæ—¶åˆ¤æ–­ï¼‰ï¼Œåˆ™è¿›è¡Œè‡ªæ—‹ã€‚
<ul>
<li>è‡ªæ—‹ä¸­å°è¯•è®¾ç½®<code>mutexWoken</code>ï¼Œä»¥é€šçŸ¥è§£é”è€…ä¸è¦å”¤é†’å…¶ä»–goroutineã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexStarving) == mutexLocked &amp;&amp; runtime_canSpin(iter) {
    <span class="hljs-keyword">if</span> !awoke &amp;&amp; old&amp;mutexWoken == <span class="hljs-number">0</span> &amp;&amp; old&gt;&gt;mutexWaiterShift != <span class="hljs-number">0</span> &amp;&amp;
        atomic.CompareAndSwapInt32(&amp;m.state, old, old|mutexWoken) {
        awoke = <span class="hljs-literal">true</span>
    }
    runtime_doSpin()
    iter++
    old = m.state
    <span class="hljs-keyword">continue</span>
}
</code></pre>
<pre><code class="hljs language-text" lang="text">|   31..3  |     2    |   1   |   0   |
|----------|----------|-------|-------|
| ç­‰å¾…è€…æ•°é‡ | starving | woken |locked |
|   x      |     0    |   y   |   0   |
</code></pre>
<p>ä¸Šè¿°æ¡ä»¶ï¼š</p>
<ul>
<li>
<p><code>mutexWoken == 0</code>Â å¯¹åº”çš„æ˜¯è¡¨æ ¼ä¸­çš„Â <code>y = 0</code>ï¼ˆå³ woken ä½ä¸º 0ï¼‰ã€‚</p>
</li>
<li>
<p><code>old&gt;&gt;mutexWaiterShift != 0</code>Â å¯¹åº”çš„æ˜¯è¡¨æ ¼ä¸­çš„Â <code>x &gt; 0</code>ï¼ˆå³ç­‰å¾…è€…æ•°é‡å¤§äº 0ï¼‰ã€‚</p>
</li>
<li>
<p><strong>çŠ¶æ€è®¡ç®—</strong>ï¼š</p>
<ul>
<li>å¦‚æœä¸åœ¨é¥¥é¥¿æ¨¡å¼ï¼Œåˆ™å°è¯•è®¾ç½®é”æ ‡å¿—ã€‚</li>
<li>å¦‚æœé”è¢«æŒæœ‰æˆ–é¥¥é¥¿ï¼Œåˆ™å¢åŠ ç­‰å¾…è€…è®¡æ•°ã€‚</li>
<li>å¦‚æœå½“å‰goroutineå·²ç»æ ‡è®°ä¸ºé¥¥é¥¿ä¸”é”è¢«æŒæœ‰ï¼Œåˆ™è®¾ç½®é¥¥é¥¿æ¨¡å¼ã€‚</li>
<li>å¦‚æœå½“å‰goroutineæ˜¯è¢«å”¤é†’çš„ï¼Œéœ€è¦æ¸…é™¤<code>mutexWoken</code>æ ‡å¿—ï¼Œå³å°†yè®¾ç½®ä¸º0ã€‚</li>
</ul>
</li>
<li>
<p><strong>CASæ›´æ–°çŠ¶æ€</strong>ï¼šå¦‚æœæˆåŠŸï¼Œåˆ™æ ¹æ®æ—§çŠ¶æ€åˆ¤æ–­ï¼š</p>
<ul>
<li>å¦‚æœæ—§çŠ¶æ€æœªé”å®šä¸”éé¥¥é¥¿ï¼Œåˆ™æˆåŠŸè·å–é”ï¼Œé€€å‡ºå¾ªç¯ã€‚</li>
<li>å¦åˆ™ï¼Œæ’é˜Ÿç­‰å¾…ï¼ˆå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç­‰å¾…ï¼Œè®°å½•å¼€å§‹æ—¶é—´ï¼Œå¹¶æ’é˜Ÿåˆ°é˜Ÿåˆ—å°¾éƒ¨ï¼›å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡ï¼Œåˆ™æ’é˜Ÿåˆ°é˜Ÿåˆ—å¤´éƒ¨ï¼‰ã€‚</li>
<li>é€šè¿‡ä¿¡å·é‡é˜»å¡ç­‰å¾…ã€‚</li>
<li>è¢«å”¤é†’åï¼Œæ£€æŸ¥ç­‰å¾…æ—¶é—´æ˜¯å¦è¶…è¿‡1msï¼Œæ›´æ–°é¥¥é¥¿æ ‡å¿—ã€‚</li>
<li>å¦‚æœå¤„äºé¥¥é¥¿æ¨¡å¼ï¼Œåˆ™è°ƒæ•´çŠ¶æ€ï¼ˆå‡å°‘ç­‰å¾…è€…è®¡æ•°ï¼Œå¹¶è®¾ç½®é”æ ‡å¿—ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™é€€å‡ºé¥¥é¥¿æ¨¡å¼ï¼‰ã€‚
<ul>
<li>é€€å‡ºé¥¥é¥¿æ¨¡å¼çš„æ¡ä»¶ï¼ˆäºŒè€…æ»¡è¶³å…¶ä¸€å³å¯ï¼‰ï¼ša. ç«äº‰ä¸æ¿€çƒˆï¼ˆé˜»å¡å°é›¨1msï¼‰ï¼Œb. å½“å‰ä¸ºæœ€åä¸€ä¸ªç­‰å¾…è€…ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>å¦‚æœCASå¤±è´¥ï¼Œåˆ™é‡æ–°è¯»å–çŠ¶æ€ï¼Œç»§ç»­å¾ªç¯ã€‚</p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-12">æ€è€ƒï¼šä¸ºä»€ä¹ˆè¢«å”¤é†’åå¤„äºé¥¥é¥¿æ¨¡å¼å¯ä»¥ç›´æ¥è°ƒæ•´çŠ¶æ€å¹¶è¿”å›ï¼ˆå³è·å–é”ï¼‰ï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go">runtime_SemacquireMutex(&amp;m.sema, queueLifo, <span class="hljs-number">2</span>)
starving = starving || runtime_nanotime()-waitStartTime &gt; starvationThresholdNs
old = m.state
<span class="hljs-keyword">if</span> old&amp;mutexStarving != <span class="hljs-number">0</span> {
    <span class="hljs-keyword">if</span> old&amp;(mutexLocked|mutexWoken) != <span class="hljs-number">0</span> || old&gt;&gt;mutexWaiterShift == <span class="hljs-number">0</span> {
        throw(<span class="hljs-string">"sync: inconsistent mutex state"</span>)
    }
    delta := <span class="hljs-type">int32</span>(mutexLocked - <span class="hljs-number">1</span>&lt;&lt;mutexWaiterShift)
    <span class="hljs-keyword">if</span> !starving || old&gt;&gt;mutexWaiterShift == <span class="hljs-number">1</span> {
        delta -= mutexStarving
    }
    atomic.AddInt32(&amp;m.state, delta)
    <span class="hljs-keyword">break</span>
}
</code></pre>
<p>å› ä¸ºåœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œé”çš„æ‰€æœ‰æƒé€šè¿‡<strong>ç›´æ¥ç§»äº¤</strong>æœºåˆ¶ä¿è¯â€”â€”è§£é”æ“ä½œä¼šç›´æ¥å°†é”äº¤ç»™ç­‰å¾…é˜Ÿåˆ—å¤´éƒ¨çš„ goroutineã€‚å½“å‰ goroutine è¢«å”¤é†’æ—¶ï¼Œå®ƒå·²ç»è¢«é€‰å®šä¸ºé”çš„ä¸‹ä¸€ä¸ªæŒæœ‰è€…ï¼Œæ— éœ€å†å‚ä¸ç«äº‰ã€‚åŒæ—¶ï¼Œæ–°æ¥çš„ goroutine è¢«å¼ºåˆ¶æ’åˆ°é˜Ÿå°¾ï¼Œç¡®ä¿äº†ä¸¥æ ¼çš„ FIFO é¡ºåºï¼Œä»æ ¹æœ¬ä¸Šé˜²æ­¢äº†<strong>é¥¥é¥¿ç°è±¡</strong>ã€‚</p>
<h2 data-id="heading-13">äº”. è§£é”è¿‡ç¨‹ï¼ˆUnlockï¼‰</h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mutex)</span></span> Unlock() {
    <span class="hljs-keyword">if</span> race.Enabled {
        _ = m.state
        race.Release(unsafe.Pointer(m))
    }
    <span class="hljs-built_in">new</span> := atomic.AddInt32(&amp;m.state, -mutexLocked)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">new</span> != <span class="hljs-number">0</span> {
        m.unlockSlow(<span class="hljs-built_in">new</span>)
    }
}
</code></pre>
<h3 data-id="heading-14">å¿«é€Ÿè·¯å¾„</h3>
<ul>
<li>å°†<code>state</code>å‡å»<code>mutexLocked</code>ï¼Œå¦‚æœç»“æœä¸º0ï¼Œåˆ™æ²¡æœ‰ç­‰å¾…è€…ï¼Œç›´æ¥è¿”å›ã€‚</li>
</ul>
<h3 data-id="heading-15">æ…¢é€Ÿè·¯å¾„ï¼ˆunlockSlowï¼‰</h3>
<ul>
<li>
<p>æ£€æŸ¥è§£é”çŠ¶æ€ï¼šå¦‚æœå¯¹æœªé”å®šçš„é”è§£é”ï¼Œåˆ™panicã€‚</p>
</li>
<li>
<p>æ ¹æ®æ˜¯å¦å¤„äºé¥¥é¥¿æ¨¡å¼åˆ†åˆ«å¤„ç†ï¼š</p>
<ul>
<li>
<p><strong>æ­£å¸¸æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>å¦‚æœæ²¡æœ‰ç­‰å¾…è€…ï¼Œæˆ–è€…å·²ç»æœ‰goroutineè¢«å”¤é†’æˆ–è·å–é”ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚</li>
<li>å¦åˆ™ï¼Œå°è¯•å‡å°‘ä¸€ä¸ªç­‰å¾…è€…å¹¶è®¾ç½®å”¤é†’æ ‡å¿—ä¸º1ï¼Œç„¶åå”¤é†’ä¸€ä¸ªgoroutineã€‚</li>
</ul>
</li>
<li>
<p><strong>é¥¥é¥¿æ¨¡å¼</strong>ï¼š</p>
<ul>
<li>ç›´æ¥é€šè¿‡ä¿¡å·é‡å”¤é†’é˜Ÿåˆ—å¤´éƒ¨çš„goroutineï¼ˆç§»äº¤é”çš„æ‰€æœ‰æƒï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>åœ¨è§£é”è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡Â <code>runtime_Semrelease</code>Â çš„Â <code>handoff</code>Â å‚æ•°æ§åˆ¶é”çš„ç§»äº¤æ–¹å¼ï¼š</p>
<ul>
<li><strong>æ­£å¸¸æ¨¡å¼</strong>Â (<code>handoff=false</code>)ï¼šå”¤é†’é˜Ÿå¤´ç­‰å¾…è€…<strong>å‚ä¸é”ç«äº‰</strong></li>
<li><strong>é¥¥é¥¿æ¨¡å¼</strong>Â (<code>handoff=true</code>)ï¼šç›´æ¥å°†é”<strong>ç§»äº¤ç»™é˜Ÿå¤´ç­‰å¾…è€…</strong>ï¼Œæ–°æ¥çš„ goroutine åªèƒ½æ’é˜Ÿã€‚</li>
</ul>
<p>ç›´æ¥ç§»äº¤çš„å®ç°æ¶‰åŠåˆ°GMPæ¨¡å‹çš„è°ƒåº¦ï¼Œå¯ä»¥é˜…è¯»åšå®¢<a href="https://juejin.cn/editor/drafts/7572515402795499570" target="_blank" title="https://juejin.cn/editor/drafts/7572515402795499570">Goè¯­è¨€GMPè°ƒåº¦æ¨¡å‹è§£æ</a></p>
<p>å…¶æ ¸å¿ƒä»£ç å®ç° <code>runtime/sema.go</code> ä¸­</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> handoff &amp;&amp; cansemacquire(addr) {
    s.ticket = <span class="hljs-number">1</span>
}
readyWithTime(s, <span class="hljs-number">5</span>+skipframes)
<span class="hljs-keyword">if</span> s.ticket == <span class="hljs-number">1</span> &amp;&amp; getg().m.locks == <span class="hljs-number">0</span> &amp;&amp; getg() != getg().m.g0 {
    goyield()
}
</code></pre>
<p>ç®€å•æ¥è¯´ï¼Œåœ¨é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œè§£é”æ“ä½œä¼šé€šè¿‡è¿è¡Œæ—¶ä¿¡å·é‡çš„ç‰¹æ®Šæœºåˆ¶ï¼Œå°†é”çš„æ‰€æœ‰æƒç›´æ¥ç§»äº¤ç»™ç­‰å¾…é˜Ÿåˆ—æœ€å‰ç«¯çš„goroutineï¼Œå¹¶é€šè¿‡<code>goyield()</code>ç«‹å³è®©å‡ºCPUï¼Œä½¿è¢«å”¤é†’çš„goroutineèƒ½é©¬ä¸Šå¼€å§‹æ‰§è¡Œã€‚</p>
<h4 data-id="heading-16">æ€è€ƒï¼šä¸ºä»€ä¹ˆåœ¨æ­£å¸¸æ¨¡å¼ä¸‹è§£é”ï¼Œéœ€è¦å°†å”¤é†’æ ‡å¿—ç½®ä¸º1ï¼Ÿ</h4>
<pre><code class="hljs language-go" lang="go"><span class="hljs-built_in">new</span> = (old - <span class="hljs-number">1</span>&lt;&lt;mutexWaiterShift) | mutexWoken
<span class="hljs-keyword">if</span> atomic.CompareAndSwapInt32(&amp;m.state, old, <span class="hljs-built_in">new</span>) {
    runtime_Semrelease(&amp;m.sema, <span class="hljs-literal">false</span>, <span class="hljs-number">2</span>)
    <span class="hljs-keyword">return</span>
}
</code></pre>
<p>åœ¨æ­£å¸¸æ¨¡å¼ä¸‹ï¼Œè§£é”æ“ä½œä¸­è®¾ç½®mutexWokenä¸ºäº†åè°ƒå¤šä¸ªè§£é”è€…å¹¶å‘è§£é”å”¤é†’å¤šä¸ªç­‰å¾…è€…ï¼Œç¡®ä¿åªæœ‰ä¸€ä¸ªç­‰å¾…çš„gorutineè¢«å”¤é†’ï¼Œä»è€Œé¿å…æƒŠç¾¤æ•ˆåº”å’Œä¸å¿…è¦çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p>
<h2 data-id="heading-17">å…­ã€TryLockæ–¹æ³•</h2>
<ul>
<li>æ£€æŸ¥é”çš„çŠ¶æ€ï¼Œå¦‚æœå·²é”å®šæˆ–å¤„äºé¥¥é¥¿æ¨¡å¼ï¼Œåˆ™è¿”å›falseã€‚</li>
<li>å¦åˆ™ï¼Œå°è¯•é€šè¿‡CASè·å–é”ã€‚</li>
</ul>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>Goè¯­è¨€çš„<code>sync.Mutex</code>æ˜¯ä¸€ä¸ªå·¥ç¨‹å®è·µçš„å…¸èŒƒï¼Œå®ƒé€šè¿‡ç²¾å·§çš„è®¾è®¡åœ¨æ€§èƒ½ã€å…¬å¹³æ€§å’Œå¤æ‚åº¦ä¹‹é—´æ‰¾åˆ°äº†æœ€ä½³å¹³è¡¡ç‚¹ï¼š</p>
<p><strong>è®¾è®¡æ™ºæ…§ä½“ç°åœ¨</strong>ï¼š</p>
<ul>
<li><strong>åˆ†å±‚ä¼˜åŒ–</strong>ï¼šå¿«é€Ÿè·¯å¾„ä¸æ…¢é€Ÿè·¯å¾„åˆ†ç¦»ï¼Œä¸ºæ— ç«äº‰åœºæ™¯æä¾›æè‡´æ€§èƒ½</li>
<li><strong>æ™ºèƒ½è‡ªé€‚åº”</strong>ï¼šæ ¹æ®è¿è¡Œæ—¶æƒ…å†µåœ¨æ­£å¸¸æ¨¡å¼ä¸é¥¥é¥¿æ¨¡å¼é—´åŠ¨æ€åˆ‡æ¢</li>
<li><strong>æ··åˆç­–ç•¥</strong>ï¼šç»“åˆè‡ªæ—‹ä¸é˜»å¡ï¼Œåœ¨çŸ­ç­‰å¾…ä¸é•¿ç­‰å¾…åœºæ™¯ä¸‹éƒ½èƒ½è¡¨ç°ä¼˜å¼‚</li>
<li><strong>çŠ¶æ€é©±åŠ¨</strong>ï¼šé€šè¿‡ä½æ“ä½œå®ç°ç´§å‡‘çš„çŠ¶æ€ç®¡ç†ï¼Œä¿è¯æ“ä½œçš„åŸå­æ€§</li>
</ul>
<p><strong>å·¥ç¨‹ä»·å€¼åœ¨äº</strong>ï¼š</p>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šå¯¹å¤–æä¾›ç®€æ´çš„<code>Lock()/Unlock()</code>æ¥å£</li>
<li><strong>è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šå†…éƒ¨è‡ªé€‚åº”å„ç§ç«äº‰å¼ºåº¦ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒä¼˜</li>
<li><strong>å¥å£®å¯é </strong>ï¼šä¸¥æ ¼çš„çŠ¶æ€æ£€æŸ¥ç¡®ä¿åœ¨å„ç§è¾¹ç•Œæƒ…å†µä¸‹æ­£ç¡®å·¥ä½œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7575152891955216384</link>    <guid>https://juejin.cn/post/7575152891955216384</guid>    <pubDate>2025-11-23T00:30:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955216384" data-draft-id="7575112613777571874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ"/> <meta itemprop="keywords" content="é¢è¯•,Java"/> <meta itemprop="datePublished" content="2025-11-23T00:30:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Webå¤©æ¢¯ä¹‹è·¯"/> <meta itemprop="url" content="https://juejin.cn/user/2825061103052843"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸Šç¯‡è®²å‘ï¼Œè¿™ç¯‡è®² â€œæ ¹â€ï¼Java æ•°æ®ç±»å‹åº•å±‚é€»è¾‘å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2825061103052843/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Webå¤©æ¢¯ä¹‹è·¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T00:30:40.000Z" title="Sun Nov 23 2025 00:30:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸Šç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†7ä¸­åŸºæœ¬æ•°æ®ç±»å‹çš„å‘ï¼Œä»Šå¤©è®©æˆ‘ä»¬æ¥æ¢ç©¶ä¸‹è¿™äº›å‘èƒŒåçš„é‚£äº›äº‹ï¼ŒçŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å‘1:éšå¼ç±»å‹è½¬æ¢ï¼ˆå°è½¬å¤§ï¼‰çš„æ„å¤–</h2>
<p>å°èŒƒå›´å‘å¤§èŒƒå›´è½¬æ¢æ—¶ï¼Œå¯èƒ½å› ä¸­é—´è®¡ç®—æº¢å‡ºå¯¼è‡´ç»“æœé”™è¯¯ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"> <span class="hljs-built_in">int</span> a1 = Integer.MAX_VALUE; <span class="hljs-comment">// 2147483647</span>
 <span class="hljs-built_in">int</span> b1 = a1 + <span class="hljs-number">1</span>; 
 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"b1="</span>+b1);<span class="hljs-comment">// æº¢å‡ºå˜ä¸º b1=-2147483648ï¼ˆæ•´æ•°æº¢å‡ºå›ç»•ï¼‰</span>
 <span class="hljs-built_in">long</span> c1 = b1; 
 System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"c1="</span>+c1);<span class="hljs-comment">// ç»“æœä¸º c1=-2147483648ï¼ˆé”™è¯¯ï¼Œå›  b å·²æº¢å‡ºï¼‰</span>
</code></pre>
<p>æˆ‘é—¨æ¥æ¢ç©¶ä¸‹<code>b1</code>ä¸ºä»€ä¹ˆç­‰äº<code>-2147483648</code>:</p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†</strong>ï¼š</p>
<p>é¦–é€‰Â <code>int</code>Â æ˜¯Â <strong>32ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰ ä½æœ‰ç¬¦å·æ•´æ•°</strong>ï¼Œé‡‡ç”¨Â äºŒè¿›åˆ¶è¡¥ç æ¥è¡¨ç¤ºï¼Œæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œ0ä»£è¡¨éè´Ÿæ•°ï¼ˆ0å’Œè¯ä¹¦ï¼‰ï¼Œ1ä»£è¡¨è´Ÿæ•°ã€‚è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1089adb0b7ce4addacc149b7e2666727~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2Vi5aSp5qKv5LmL6Lev:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764462640&amp;x-signature=onU1zSdhbDrEU9i2RHcK9ghcQI4%3D" alt="image.png" loading="lazy"/></p>
<p><code>æœ€å°å€¼ï¼š</code>-2^31 = -2147483648<code>ï¼Œæœ€å¤§å€¼ï¼š</code>2^31 - 1 = 2147483647`</p>
<p><strong>2ã€äºŒè¿›åˆ¶è¡¨ç¤º</strong>ï¼š</p>
<p><code>Integer.MAX_VALUE = 2147483647</code> çš„äºŒè¿›åˆ¶æ˜¯ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111 </span><span class="hljs-number">1111</span>
</code></pre>
<p>åŠ  1 åå˜æˆï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬æ¢ä¸º10è¿›åˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">=-1*2^31+0*2^30+0*2^29+...+0*2^<span class="hljs-attr">0</span> 
=-1*2^<span class="hljs-attr">31</span>
=-2^<span class="hljs-attr">31</span>
=-2147483648
</code></pre>
<p><strong>æ€»ç»“</strong>ï¼šJava çš„ int ä½¿ç”¨ 32 ä½äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºï¼Œå½“ <code>2147483647 + 1</code> è¶…å‡ºæœ€å¤§å€¼æ—¶ï¼ŒäºŒè¿›åˆ¶è¿›ä½ä½¿ç¬¦å·ä½å˜ä¸º 1ï¼Œç»“æœè¢«è§£é‡Šä¸ºè¡¥ç ä¸‹çš„æœ€å°è´Ÿæ•° <code>-2147483648</code>ï¼Œå³å‘ç”Ÿâ€œæ•´æ•°æº¢å‡ºå›ç»•â€</p>
<h2 data-id="heading-1">äºŒã€å‘2:æ˜¾å¼ç±»å‹è½¬æ¢ï¼ˆå¤§è½¬å°ï¼‰çš„ç²¾åº¦ä¸¢å¤±</h2>
<p>å¤§èŒƒå›´ç±»å‹å¼ºåˆ¶è½¬ä¸ºå°èŒƒå›´ç±»å‹æ—¶ï¼Œç›´æ¥ä¸¢å¼ƒé«˜ä½å­—èŠ‚ï¼Œå¯¼è‡´æ•°æ®å¤±çœŸã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-built_in">long</span> a2 = <span class="hljs-number">2147483648L</span>; <span class="hljs-comment">// è¶…å‡º int æœ€å¤§å€¼</span>
<span class="hljs-built_in">int</span> b2 = (<span class="hljs-built_in">int</span>)a2;
System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"b2="</span>+b2);<span class="hljs-comment">// ç»“æœä¸º -2147483648ï¼ˆé«˜ä½ä¸¢å¤±ï¼Œæº¢å‡ºå›ç»•ï¼‰</span>
</code></pre>
<p><strong>1ã€äºŒè¿›åˆ¶è¡¨ç¤ºï¼š</strong></p>
<p>èƒŒæ™¯çŸ¥è¯†å‚è€ƒå‘1ï¼Œlongä¸º8å­—èŠ‚ï¼Œ<code>2147483648L</code>åœ¨äºŒè¿›åˆ¶ä¸­è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>2ã€å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</strong></p>
<p>longè½¬æ¢ä¸ºintæ—¶ï¼Œé«˜ä½æˆªæ–­ä¸¢å¼ƒå˜ä¸ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">1000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬æ¢ä¸ºåè¿›åˆ¶ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">=-1*2^31+0*2^30+0*2^29+...+0*2^<span class="hljs-attr">0</span> 
=-1*2^<span class="hljs-attr">31</span>
=-2^<span class="hljs-attr">31</span>
=-2147483648
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€å‘3:æ•´æ•°è¿ç®—æº¢å‡º</h2>
<p><strong>å‘</strong>ï¼š<code>int</code>/<code>long</code>Â è¿ç®—ç»“æœè¶…å‡ºèŒƒå›´æ—¶ï¼Œä¸ä¼šæŠ¥é”™ï¼Œè€Œæ˜¯æŒ‰ â€œæ¨¡ 2^nâ€ å›ç»•ï¼ˆè´Ÿæ•°ç”¨è¡¥ç è¡¨ç¤ºï¼‰ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">int <span class="hljs-attr">a3</span> = <span class="hljs-number">1100000000</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">b3</span> = <span class="hljs-number">1100000000</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">c3</span> = a3 + b3<span class="hljs-comment">;</span>
System.out.println("<span class="hljs-attr">c3</span>=<span class="hljs-string">"+c3);// ç»“æœä¸º c3=-2094967296ï¼ˆæº¢å‡ºï¼‰
</span></code></pre>
<p><strong>1ã€è½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼š</strong></p>
<p>åè¿›åˆ¶<code>1100000000</code>è½¬ä¸ºäºŒè¿›åˆ¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>

<pre><code class="hljs language-yaml" lang="yaml">  <span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
<span class="hljs-string">+</span>
  <span class="hljs-number">0100 </span><span class="hljs-number">0001 </span><span class="hljs-number">1001 </span><span class="hljs-number">0000 </span><span class="hljs-number">1010 </span><span class="hljs-number">1011 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
<span class="hljs-string">=</span> 
  <span class="hljs-number">1000 </span><span class="hljs-number">0011 </span><span class="hljs-number">0010 </span><span class="hljs-number">0001 </span><span class="hljs-number">0101 </span><span class="hljs-number">0110 </span><span class="hljs-number">0000 </span><span class="hljs-number">0000</span>
</code></pre>
<p><strong>3ã€è½¬ä¸º10è¿›åˆ¶</strong></p>
<p>å¥—ç”¨è®¡ç®—å…¬å¼<code>1000 0011 0010 0001 0101 0110 0000 0000</code> è½¬æ¢ä¸º10è¿›åˆ¶ä¸º-2094967296</p>
<h2 data-id="heading-3">å››ã€å‘4ï¼šæµ®ç‚¹æ•°ç›¸åŠ ï¼Œç»“æœä¸å¯é¢„æµ‹ï¼</h2>
<pre><code class="hljs language-ini" lang="ini">double <span class="hljs-attr">a4</span> = <span class="hljs-number">0.1</span><span class="hljs-comment">;</span>
double <span class="hljs-attr">b4</span> = <span class="hljs-number">0.2</span><span class="hljs-comment">;</span>
System.out.println(a4 + <span class="hljs-attr">b4</span> == <span class="hljs-number">0.3</span>)<span class="hljs-comment">; // falseï¼</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šä¸ºä»€ä¹ˆ0.1å’Œ0.2åœ¨äºŒè¿›åˆ¶ä¸­æ— æ³•ç²¾ç¡®è¡¨ç¤ºï¼ˆç±»ä¼¼ 1/3 åœ¨åè¿›åˆ¶ä¸­æ˜¯ 0.333...ï¼‰ï¼Ÿ</p>
<p><strong>å…·ä½“åˆ†æï¼š</strong></p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†ï¼š</strong></p>
<p>10è¿›åˆ¶å°æ•°ä½è½¬2è¿›åˆ¶è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>å°†å°æ•°éƒ¨åˆ†ä¸æ–­ Ã— 2ï¼›</li>
<li>è‹¥ç»“æœ â‰¥ 1 â†’ è®°Â <strong>1</strong>ï¼Œå–å°æ•°éƒ¨åˆ†ç»§ç»­ï¼›</li>
<li>è‹¥ç»“æœ &lt; 1 â†’ è®°Â <strong>0</strong>ï¼Œç”¨æ•´ä¸ªç»“æœç»§ç»­ï¼›</li>
<li>é‡å¤ç›´åˆ°å°æ•°éƒ¨åˆ†ä¸º 0ï¼ˆæœ‰é™ï¼‰æˆ–å‡ºç°å¾ªç¯ï¼ˆæ— é™ï¼‰ã€‚</li>
</ul>
<p><strong>2ã€è®¡ç®—è¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">0.1 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.2</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.2 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.4</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.4 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.8</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span>
0.8 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">1.6</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">1</span>ï¼Œå°æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0.6</span>
0.6 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">1.2</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">1</span>ï¼Œå°æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0.2</span>
0.2 Ã— <span class="hljs-attr">2</span> = <span class="hljs-number">0.4</span> â†’ æ•´æ•°éƒ¨åˆ†ï¼š<span class="hljs-number">0</span> ï¼ˆå¼€å§‹é‡å¤ï¼‰
...
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä»ç¬¬äºŒæ­¥è¿›å…¥å¾ªç¯ï¼š0.2 â†’ 0.4 â†’ 0.8 â†’ 0.6 â†’ 0.2...</p>
<p>å› æ­¤0.1çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">0.0</span> <span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011 </span><span class="hljs-number">0011</span><span class="hljs-string">...ï¼ˆæ— é™ä¸ª0011ï¼‰</span>
</code></pre>
<h2 data-id="heading-4">äº”ã€å‘5ï¼šåŒ…è£…ç±»ä¸º<code>null</code>Â æ‹†ç®±ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼</h2>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">x</span> = null<span class="hljs-comment">;</span>
int <span class="hljs-attr">y</span> = x<span class="hljs-comment">; //  NullPointerException!</span>
</code></pre>
<p>åŸå› åˆ†æï¼š</p>
<p><strong>1ã€èƒŒæ™¯çŸ¥è¯†ï¼š</strong></p>
<p>javaè‡ªåŠ¨è£…æ‹†ç®±ç¼–è¯‘å™¨å¤„ç†ï¼šä»¥intä¸ºä¾‹ï¼Œè£…ç®±ä¼šé»˜è®¤è°ƒç”¨<code>valueOf</code>æ–¹æ³•,æ‹†ç®±ä¼šè°ƒç”¨x.intValue()æ–¹æ³•ï¼Œå…¶ä»–åŸºæœ¬æ•°æ®ç±»å‹è£…æ‹†ç®±ç±»ä¼¼ã€‚</p>
<p><strong>2ã€åŸå› åˆ†æ</strong></p>
<p>å›åˆ°é—®é¢˜ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">x</span> = null<span class="hljs-comment">;</span>

int <span class="hljs-attr">y</span> = x<span class="hljs-comment">;</span>
ç›¸å½“äº
int <span class="hljs-attr">y</span>=x.intValue()<span class="hljs-comment">;</span>
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç›¸å½“äºå¯¹<code>null</code>å€¼è¿›è¡Œæ–¹æ³•è°ƒç”¨ï¼Œå½“ç„¶æŠ›ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚</p>
<h2 data-id="heading-5">å…­ã€å‘6ï¼š<code>==</code>Â æ¯”è¾ƒåŒ…è£…ç±»ï¼Œç»“æœä¸å¯é¢„æµ‹ï¼</h2>
<p>ä¸Šç¯‡æ–‡ç« å·²ç»è®²çš„æ¯”è¾ƒè¯¦ç»†ï¼Œæˆ‘ä»¬å†æ¥å›é¡¾ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Integer <span class="hljs-attr">a6</span> = <span class="hljs-number">127</span><span class="hljs-comment">;</span>
Integer <span class="hljs-attr">b6</span> = <span class="hljs-number">127</span><span class="hljs-comment">;</span>
System.out.println(<span class="hljs-attr">a6</span> == b6)<span class="hljs-comment">; // true</span>

Integer <span class="hljs-attr">a66</span> = <span class="hljs-number">128</span><span class="hljs-comment">;</span>
Integer <span class="hljs-attr">b66</span> = <span class="hljs-number">128</span><span class="hljs-comment">;</span>
System.out.println(<span class="hljs-attr">a66</span> == b66)<span class="hljs-comment">; // false</span>
</code></pre>
<p><strong>åŸå› åˆ†æ</strong>ï¼šJava å¯¹ <code>-128 ~ 127</code> çš„ <code>Integer</code> åšäº†<strong>ç¼“å­˜</strong>ã€‚ç¼–è¯‘å™¨ä¼šåœ¨<strong>åŸºæœ¬ç±»å‹</strong>è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ã€‚</p>
<ul>
<li>ç¼“å­˜æ± èŒƒå›´å†…ä»ç¼“å­˜ä¸­å–ï¼Œè¿”å›çš„æ˜¯ç›¸åŒå¯¹è±¡ã€‚</li>
<li>è¶…å‡ºèŒƒå›´åˆ™æ¯æ¬¡æ–°å»ºå¯¹è±¡ï¼Œè¿”å›çš„æ˜¯ä¸åŒå¯¹è±¡ã€‚</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> Integer <span class="hljs-title">valueOf</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> </span>{
    <span class="hljs-comment">//-128 ~ 127å‡å–è‡ªIntegerCacheï¼Œå³åŒä¸€ä¸ªå¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)
        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];

    <span class="hljs-comment">//è¶…å‡ºèŒƒå›´ï¼Œnewä¸€ä¸ªæ–°å¯¹è±¡</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Integer</span>(i);
}
</code></pre>
<h2 data-id="heading-6">ä¸ƒã€å‘7:å¸ƒå°”ç±»å‹çš„éšå¼è½¬æ¢è¯¯åŒº</h2>
<p>Java ä¸å…è®¸Â <code>boolean</code>Â ä¸å…¶ä»–åŸºæœ¬ç±»å‹ï¼ˆå¦‚Â <code>int</code>ï¼‰ç›¸äº’è½¬æ¢ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">boolean <span class="hljs-attr">a7</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
int <span class="hljs-attr">b7</span> = (int)a7<span class="hljs-comment">; // ç¼–è¯‘æŠ¥é”™ï¼ˆæ— æ³•å¼ºåˆ¶è½¬æ¢ï¼‰</span>
</code></pre>
<p>è¿™æ›´å¤šçš„æ˜¯è¯­è¨€è®¾è®¡ç†å¿µä¸Šçš„é—®é¢˜ï¼Œæˆ‘å°±ä¸å»ç­é—¨å¼„æ–§äº†ã€‚</p>
<blockquote>
<p>è§‰å¾—å†™çš„ä¸é”™çš„å°ä¼™ä¼´ ï¼Œç‚¹ä¸ªå…³æ³¨ï¼Œæ›´æ–°ä¸è¿·è·¯</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€]]></title>    <link>https://juejin.cn/post/7575083657994551323</link>    <guid>https://juejin.cn/post/7575083657994551323</guid>    <pubDate>2025-11-23T01:36:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994551323" data-draft-id="7575102474639425587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T01:36:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T01:36:38.000Z" title="Sun Nov 23 2025 01:36:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Protocol Buffers æŠ€æœ¯è§£æï¼šä¸ºä»€ä¹ˆå«ã€Œåè®®ç¼“å†²åŒºã€</h2>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<p>Protocol Buffers æ˜¯GRpcçš„åºåˆ—åŒ–å±‚ï¼Œå…¶æ ¸å¿ƒè®¾è®¡ç†å¿µæºäºã€Œåè®®å®šä¹‰+äºŒè¿›åˆ¶å®¹å™¨ã€çš„é«˜æ•ˆæ•°æ®äº¤æ¢æ¨¡å¼ã€‚</p>
<p>é€šè¿‡é¢„å®šä¹‰æ•°æ®ç»“æ„ä½œä¸ºåè®®çº¦å®šï¼Œåºåˆ—åŒ–æ—¶å°†å­—æ®µåæ›¿æ¢ä¸ºæ•°å­—ç¼–å·ï¼Œç»“åˆäºŒè¿›åˆ¶ç¼–ç ã€Varintå‹ç¼©ã€çœç•¥é»˜è®¤å€¼ç­‰å¤šé‡ä¼˜åŒ–ï¼Œå®ç°è¿œè¶…JSON/XMLçš„ä¼ è¾“æ•ˆç‡ã€‚</p>
<p>è¿™ç§ç»“æ„åŒ–äºŒè¿›åˆ¶å®¹å™¨çš„æ€æƒ³åœ¨ç½‘ç»œåè®®ã€æ•°æ®åº“å­˜å‚¨ç­‰é¢†åŸŸæœ‰ç€å¹¿æ³›åº”ç”¨ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»äº†Protobufçš„åŸç†ï¼ŒGRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„ï¼Œ ä»¥åŠvarintæŠ€æœ¯ã€‚</p>
<h3 data-id="heading-2">ç›®å½•</h3>
<ul>
<li><a href="#1-%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90protocol-buffers%E7%9A%84%E7%94%B1%E6%9D%A5" title="#1-%E5%90%8D%E7%A7%B0%E8%A7%A3%E6%9E%90protocol-buffers%E7%9A%84%E7%94%B1%E6%9D%A5">1. åç§°è§£æï¼šProtocol Buffers çš„ç”±æ¥</a></li>
<li><a href="#2-%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8C%96%E6%9C%BA%E5%88%B6" title="#2-%E6%A0%B8%E5%BF%83%E4%BC%98%E5%8C%96%E6%9C%BA%E5%88%B6">2. æ ¸å¿ƒä¼˜åŒ–æœºåˆ¶</a></li>
<li><a href="#3-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3" title="#3-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%BC%96%E7%A0%81%E8%AF%A6%E8%A7%A3">3. äºŒè¿›åˆ¶ç¼–ç è¯¦è§£</a></li>
<li><a href="#4-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AF%B9%E6%AF%94" title="#4-%E4%B8%8E%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AF%B9%E6%AF%94">4. ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</a></li>
<li><a href="#5-%E7%B1%BB%E4%BC%BC%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5" title="#5-%E7%B1%BB%E4%BC%BC%E6%A8%A1%E5%BC%8F%E7%9A%84%E6%8A%80%E6%9C%AF%E5%AE%9E%E8%B7%B5">5. ç±»ä¼¼æ¨¡å¼çš„æŠ€æœ¯å®è·µ</a></li>
<li><a href="#6-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E6%80%BB%E7%BB%93" title="#6-%E8%AE%BE%E8%AE%A1%E5%93%B2%E5%AD%A6%E6%80%BB%E7%BB%93">6. è®¾è®¡å“²å­¦æ€»ç»“</a></li>
<li>é™„1 GRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„</li>
<li>é™„2 Varintå‹ç¼©</li>
</ul>
<h3 data-id="heading-3">1. åç§°è§£æï¼šProtocol Buffers çš„ç”±æ¥</h3>
<p>gRpcæ¡†æ¶çš„åºåˆ—åŒ–å·¥å…·æœ‰ä¸€ä¸ªåå­—ï¼Œå«åšprotobuf, åˆå« protocol bufferï¼Œ æˆ‘å¯¹è¿™ä¸ªåå­—ä¸€ç›´è§‰å¾—å¾ˆå¥‡æ€ªï¼Œå› æ­¤åœ¨è¿™é‡Œæ‹†è§£ä¸€ä¸‹ã€‚</p>
<p>Protobuffer å°±æ˜¯ Protocol Buffer çš„å¸¸ç”¨ç®€ç§°å’Œæ˜µç§°ã€‚</p>
<p>ç±»ä¼¼äºï¼š</p>
<p>JavaScript â†’ JS</p>
<p>HyperText Markup Language â†’ HTML</p>
<p>Portable Network Graphics â†’ PNG</p>
<h4 data-id="heading-4">1.1 Protocolï¼ˆåè®®ï¼‰çš„å«ä¹‰</h4>
<p>Protocol æŒ‡æ•°æ®äº¤æ¢çš„é¢„å…ˆçº¦å®šï¼Œä½“ç°åœ¨ <code>.proto</code> æ–‡ä»¶ä¸­å®šä¹‰çš„ç»“æ„åŒ–æ•°æ®å¥‘çº¦ï¼š</p>
<pre><code class="hljs language-protobuf" lang="protobuf">message Person {
  string name = 1;    // å­—æ®µç¼–å·1
  int32 id = 2;       // å­—æ®µç¼–å·2
  string email = 3;   // å­—æ®µç¼–å·3
}
</code></pre>
<p>è¿™ç§å®šä¹‰æ˜ç¡®äº†æ•°æ®æ ¼å¼ã€å­—æ®µç±»å‹å’Œç¼–å·è§„åˆ™ï¼Œæ„æˆäº†é€šä¿¡åŒæ–¹å¿…é¡»éµå®ˆçš„åè®®è§„èŒƒã€‚</p>
<h4 data-id="heading-5">1.2 Bufferï¼ˆç¼“å†²åŒºï¼‰çš„å«ä¹‰</h4>
<p>Buffer å¹¶éä¼ ç»Ÿæ„ä¹‰çš„ä¸´æ—¶ç¼“å†²åŒºï¼Œè€Œæ˜¯æŒ‡<strong>åºåˆ—åŒ–åçš„ç»“æ„åŒ–äºŒè¿›åˆ¶æ•°æ®å®¹å™¨</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å­—èŠ‚åºåˆ—ï¼Œæ‰¿è½½ç€æŒ‰ç…§åè®®è§„èŒƒç¼–ç çš„å®Œæ•´æ•°æ®å•å…ƒã€‚</p>
<h3 data-id="heading-6">2. æ ¸å¿ƒä¼˜åŒ–æœºåˆ¶</h3>
<h4 data-id="heading-7">2.1 å­—æ®µç¼–å·æ›¿ä»£å­—æ®µå</h4>
<p>é€šè¿‡ç”¨æ•°å­—ç¼–å·æ›¿æ¢å­—ç¬¦ä¸²å­—æ®µåï¼Œå¤§å¹…å‡å°‘æ•°æ®ä¼ è¾“é‡ï¼š</p>
<ul>
<li>å­—æ®µå <code>"name"</code>ï¼ˆ4å­—èŠ‚ï¼‰â†’ ç¼–å· <code>1</code>ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰</li>
<li>å­—æ®µå <code>"email"</code>ï¼ˆ5å­—èŠ‚ï¼‰â†’ ç¼–å· <code>3</code>ï¼ˆé€šå¸¸1å­—èŠ‚ï¼‰</li>
</ul>
<p>nameå’Œemailæœ¬èº«ï¼Œå› ä¸ºprotoå®šä¹‰å·²ç»æ˜¯å…¨å±€çŸ¥æ™“è¿™ä¸ªç»“æ„çš„å®šä¹‰ï¼Œæ‰€ä»¥</p>
<h4 data-id="heading-8">2.2 äºŒè¿›åˆ¶ç¼–ç ä¼˜åŠ¿</h4>
<ul>
<li>æ— å†—ä½™å­—ç¬¦ï¼šçœç•¥å¼•å·ã€æ‹¬å·ã€é€—å·ç­‰æ ¼å¼ç¬¦å·</li>
<li>ç´§å‡‘å¸ƒå±€ï¼šæ•°æ®è¿ç»­æ’åˆ—ï¼Œæ— å¡«å……å¯¹é½å¼€é”€</li>
<li>ç±»å‹é›†æˆï¼šå­—æ®µç¼–å·ä¸ç±»å‹ä¿¡æ¯åˆå¹¶ç¼–ç </li>
</ul>
<h4 data-id="heading-9">2.3 Varint å¯å˜é•¿åº¦æ•´æ•°</h4>
<p>å°æ•°å€¼å ç”¨æ›´å°‘å­—èŠ‚ï¼š</p>
<ul>
<li>å€¼ <code>1</code> â†’ <code>01</code>ï¼ˆ1å­—èŠ‚ï¼‰</li>
<li>å€¼ <code>300</code> â†’ <code>AC 02</code>ï¼ˆ2å­—èŠ‚ï¼‰</li>
<li>è€Œéå›ºå®š4å­—èŠ‚å­˜å‚¨</li>
</ul>
<h4 data-id="heading-10">2.4 é»˜è®¤å€¼çœç•¥</h4>
<p>å¦‚æœå­—æ®µå€¼ä¸ºç±»å‹é»˜è®¤å€¼ï¼ˆ0ã€falseã€ç©ºå­—ç¬¦ä¸²ç­‰ï¼‰ï¼Œç›´æ¥ä¸ä¼ è¾“è¯¥å­—æ®µã€‚</p>
<h3 data-id="heading-11">3. äºŒè¿›åˆ¶ç¼–ç è¯¦è§£</h3>
<h4 data-id="heading-12">3.1 å®é™…ç¼–ç ç¤ºä¾‹</h4>
<p>å¯¹äºæ•°æ®ï¼š<code>{name: "Alice", id: 123}</code></p>
<p>Protocol Buffers ç¼–ç ç»“æœï¼š</p>
<pre><code class="hljs">0A 05 41 6C 69 63 65 10 7B
</code></pre>
<p>9ä¸ªå­—èŠ‚ã€‚</p>
<h4 data-id="heading-13">3.2 ç¼–ç æ‹†è§£åˆ†æ</h4>
<p><strong>nameå­—æ®µéƒ¨åˆ†</strong> <code>0A 05 41 6C 69 63 65</code>ï¼š</p>
<ul>
<li><code>0A</code> = <code>00001010</code>ï¼šå‰5ä½<code>00001</code>ï¼ˆå­—æ®µç¼–å·1ï¼‰ï¼Œå3ä½<code>010</code>ï¼ˆå­—ç¬¦ä¸²ç±»å‹ï¼‰ï¼Œ</li>
<li><code>05</code>ï¼šå­—ç¬¦ä¸²é•¿åº¦5å­—èŠ‚</li>
<li><code>41 6C 69 63 65</code>ï¼š"Alice"çš„ASCIIç </li>
</ul>
<p><strong>idå­—æ®µéƒ¨åˆ†</strong> <code>10 7B</code>ï¼š</p>
<ul>
<li><code>10</code> = <code>00010000</code>ï¼šå3ä½<code>000</code>ï¼ˆVarintç±»å‹ï¼‰ï¼Œå‰5ä½<code>00010</code>ï¼ˆå­—æ®µç¼–å·2ï¼‰</li>
<li><code>7B</code>ï¼šåè¿›åˆ¶123çš„Varintç¼–ç </li>
</ul>
<h4 data-id="heading-14">3.3 æ•ˆç‡å¯¹æ¯”</h4>
<p>ç›¸åŒæ•°æ®çš„JSONéœ€è¦çº¦40å­—èŠ‚ï¼Œè€ŒProtocol Buffersä»…éœ€9å­—èŠ‚ï¼Œå‹ç¼©æ¯”è¶…è¿‡4:1ã€‚</p>
<h3 data-id="heading-15">4. ä¸å…¶ä»–æŠ€æœ¯çš„å¯¹æ¯”</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>JSON/XML</th><th>Protocol Buffers</th></tr></thead><tbody><tr><td>æ•°æ®æ ¼å¼</td><td>æ–‡æœ¬</td><td>äºŒè¿›åˆ¶</td></tr><tr><td>å­—æ®µä¼ è¾“</td><td>å®Œæ•´å­—æ®µå</td><td>æ•°å­—ç¼–å·</td></tr><tr><td>å…ƒæ•°æ®</td><td>å¼•å·ã€æ‹¬å·ç­‰</td><td>æ— </td></tr><tr><td>åºåˆ—åŒ–å¤§å°</td><td>å¤§</td><td>å°</td></tr><tr><td>è§£ææ€§èƒ½</td><td>æ…¢</td><td>å¿«</td></tr><tr><td>å¯è¯»æ€§</td><td>å¥½</td><td>å·®</td></tr></tbody></table>
<h3 data-id="heading-16">5. ç±»ä¼¼æ¨¡å¼çš„æŠ€æœ¯å®è·µ</h3>
<h4 data-id="heading-17">5.1 Apache Thrift</h4>
<p>å‡ ä¹ç›¸åŒçš„è®¾è®¡ç†å¿µï¼š</p>
<pre><code class="hljs language-thrift" lang="thrift">struct Person {
  1: string name,
  2: i32 id,
  3: string email
}
</code></pre>
<h4 data-id="heading-18">5.2 ç½‘ç»œåè®®è®¾è®¡</h4>
<p>TCP/IPåŒ…å¤´ã€HTTP/2å¸§ç»“æ„ç­‰éƒ½é‡‡ç”¨ç±»ä¼¼çš„ã€Œå›ºå®šæ ¼å¼äºŒè¿›åˆ¶å®¹å™¨ã€è®¾è®¡ã€‚</p>
<h4 data-id="heading-19">5.3 æ•°æ®åº“å­˜å‚¨æ ¼å¼</h4>
<p>MySQLè¡Œæ ¼å¼ã€åˆ—å¼å­˜å‚¨ç­‰éƒ½ä½¿ç”¨é¢„å®šä¹‰ç»“æ„+äºŒè¿›åˆ¶ç¼–ç çš„æ¨¡å¼ã€‚</p>
<h4 data-id="heading-20">5.4 å¤šåª’ä½“å®¹å™¨</h4>
<p>MP4ã€AVIç­‰åª’ä½“æ ¼å¼ä½¿ç”¨ç±»ä¼¼çš„box/chunkç»“æ„æ‰¿è½½ç¼–ç æ•°æ®ã€‚</p>
<h3 data-id="heading-21">6. è®¾è®¡å“²å­¦æ€»ç»“</h3>
<p>Protocol Buffers çš„æˆåŠŸæºäºä»¥ä¸‹å‡ ä¸ªå…³é”®è®¾è®¡ç†å¿µï¼š</p>
<ol>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šåè®®å®šä¹‰ä¸å…·ä½“å®ç°è§£è€¦</li>
<li><strong>æ•ˆç‡ä¼˜å…ˆ</strong>ï¼šä»ç¼–ç å±‚åˆ°ä¼ è¾“å±‚çš„å…¨æ–¹ä½ä¼˜åŒ–</li>
<li><strong>å…¼å®¹æ€§è®¾è®¡</strong>ï¼šé€šè¿‡å­—æ®µç¼–å·æœºåˆ¶æ”¯æŒå‘å‰å‘åå…¼å®¹</li>
<li><strong>é€šç”¨æ€§</strong>ï¼šè·¨è¯­è¨€ã€è·¨å¹³å°çš„ç»Ÿä¸€è§£å†³æ–¹æ¡ˆ</li>
<li><strong>å·¥å…·é“¾æ”¯æŒ</strong>ï¼šä»£ç ç”Ÿæˆã€éªŒè¯ç­‰å®Œæ•´ç”Ÿæ€</li>
</ol>
<p>è¿™ç§ã€Œåè®®å®šä¹‰+äºŒè¿›åˆ¶å®¹å™¨ã€çš„æ¨¡å¼ä¹‹æ‰€ä»¥åœ¨è®¡ç®—æœºç§‘å­¦ä¸­å¹¿æ³›å­˜åœ¨ï¼Œæ˜¯å› ä¸ºå®ƒå®Œç¾å¹³è¡¡äº†æ•ˆç‡ã€å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ï¼Œæ˜¯æ„å»ºé«˜æ€§èƒ½åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³æŠ€æœ¯ã€‚</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šProtocol Buffers ä¸æ˜¯å‘æ˜äº†æ–°æ¦‚å¿µï¼Œè€Œæ˜¯å°†ä¹…ç»è€ƒéªŒçš„äºŒè¿›åˆ¶æ•°æ®äº¤æ¢æ¨¡å¼æ ‡å‡†åŒ–ã€å·¥å…·åŒ–ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘è€Œéæ•°æ®ä¼ è¾“ç»†èŠ‚ã€‚</p>
<h2 data-id="heading-22">é™„1 GRpcå¦‚ä½•è¯†åˆ«ä¸€ä¸ªprotobufferç»“æ„</h2>
<p>protobufferæœ¬èº«å¯¹å­—æ®µåè¿›è¡Œäº†å‹ç¼©ï¼Œå®ƒæ€ä¹ˆçŸ¥é“ä¸€ä¸ªç»“æ„ä½“æ˜¯è¿™ä¸ªç»“æ„ä½“ï¼Ÿ</p>
<p>Protobuf åœ¨ç¼–ç æ—¶<strong>å»æ‰äº†å­—æ®µå</strong>ï¼ˆæ¯”å¦‚ <code>username</code>, <code>user_id</code>ï¼‰ï¼Œè¿™ç¡®å®æå¤§åœ°å‹ç¼©äº†æ•°æ®ã€‚ä½†å®ƒä¹‹æ‰€ä»¥èƒ½â€œçŸ¥é“â€ä¸€ä¸ªç»“æ„ä½“æ˜¯å“ªä¸ªç»“æ„ä½“ï¼Œå…³é”®åœ¨äºå®ƒä¾èµ–çš„æ˜¯ä¸€å¥—<strong>é¢„å…ˆä¸¥æ ¼å®šä¹‰å¥½çš„â€œå¥‘çº¦â€</strong>â€”â€”ä¹Ÿå°±æ˜¯ <code>.proto</code> æ–‡ä»¶ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†è§£ä¸ºä»¥ä¸‹å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<h4 data-id="heading-23">1. å¥‘çº¦å…ˆè¡Œï¼š.proto æ–‡ä»¶æ˜¯æ ¸å¿ƒ</h4>
<p>æ‰€æœ‰ä½¿ç”¨ Protobuf çš„é€šä¿¡åŒæ–¹ï¼ˆå‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼‰<strong>å¿…é¡»</strong>åœ¨é€šä¿¡ä¹‹å‰å°±æ‹¥æœ‰<strong>å®Œå…¨ç›¸åŒ</strong>çš„ <code>.proto</code> æ–‡ä»¶å®šä¹‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨æˆ·æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-protobuf" lang="protobuf">// user.proto
message User {
  string user_name = 1;
  int64 favorite_number = 2;
}
</code></pre>
<p>è¿™ä¸ª <code>.proto</code> æ–‡ä»¶å°±æ˜¯â€œå¥‘çº¦â€ã€‚å®ƒè§„å®šäº†ï¼š</p>
<ul>
<li>æœ‰ä¸€ä¸ªå«åš <code>User</code> çš„æ¶ˆæ¯ç±»å‹ã€‚</li>
<li>è¿™ä¸ªç±»å‹æœ‰ä¸¤ä¸ªå­—æ®µã€‚</li>
<li>æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ª<strong>å”¯ä¸€çš„æ•°å­—æ ‡ç­¾</strong>ï¼ˆ1 å’Œ 2ï¼‰å’Œä¸€ä¸ª<strong>æ•°æ®ç±»å‹</strong>ï¼ˆ<code>string</code>, <code>int64</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-24">2. ç¼–ç ï¼šç”¨æ•°å­—æ ‡ç­¾ä»£æ›¿å­—æ®µå</h4>
<p>å½“ä½ çš„ç¨‹åºè¦åºåˆ—åŒ–ä¸€ä¸ª <code>User</code> å¯¹è±¡æ—¶ï¼ˆæ¯”å¦‚ <code>user_name="Alice"</code>, <code>favorite_number=42</code>ï¼‰ï¼ŒProtobuf ç¼–ç å™¨ä¸ä¼šæŠŠå­—ç¬¦ä¸² <code>"user_name"</code> å’Œ <code>"favorite_number"</code> å†™å…¥äºŒè¿›åˆ¶æµã€‚</p>
<p>å®ƒå†™å…¥çš„æ˜¯ï¼š</p>
<ul>
<li><strong>å­—æ®µ1</strong>ï¼šæ ‡ç­¾ <code>1</code> + å€¼ <code>"Alice"</code></li>
<li><strong>å­—æ®µ2</strong>ï¼šæ ‡ç­¾ <code>2</code> + å€¼ <code>42</code></li>
</ul>
<p>è¿™äº›æ ‡ç­¾ï¼ˆ1, 2ï¼‰å°±æ˜¯äºŒè¿›åˆ¶æ•°æ®ä¸­<strong>å”¯ä¸€æ ‡è¯†å­—æ®µçš„å¯†é’¥</strong>ã€‚</p>
<h4 data-id="heading-25">3. è§£ç ï¼šæŒ‰å›¾ç´¢éª¥</h4>
<p>æ¥æ”¶æ–¹æ‹¿åˆ°äºŒè¿›åˆ¶æ•°æ®åï¼Œç”¨è‡ªå·±çš„ <code>User</code> æ¶ˆæ¯å®šä¹‰ï¼ˆå³åŒä¸€ä¸ª <code>.proto</code> æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆçš„ä»£ç ï¼‰æ¥è§£ç ã€‚</p>
<p>è§£ç è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>è¯»å–ä¸€ä¸ªå­—æ®µçš„æ ‡ç­¾ï¼ˆæ¯”å¦‚ <code>1</code>ï¼‰å’Œå®ƒçš„æ•°æ®ç±»å‹ã€‚</li>
<li>åœ¨æœ¬åœ°çš„ <code>User</code> æ¶ˆæ¯å®šä¹‰ä¸­æŸ¥æ‰¾ï¼šâ€œå“ªä¸ªå­—æ®µçš„æ ‡ç­¾æ˜¯ <code>1</code>ï¼Ÿâ€</li>
<li>æ‰¾åˆ°äº†ï¼æ ‡ç­¾ <code>1</code> å¯¹åº”ç€ <code>user_name</code> å­—æ®µï¼Œç±»å‹æ˜¯ <code>string</code>ã€‚</li>
<li>äºæ˜¯ï¼Œå®ƒæ­£ç¡®åœ°åˆ›å»ºä¸€ä¸ª <code>User</code> å¯¹è±¡ï¼Œå¹¶å°†è§£ç å‡ºçš„å­—ç¬¦ä¸² <code>"Alice"</code> å¡«å…¥è¯¥å¯¹è±¡çš„ <code>user_name</code> å±æ€§ã€‚</li>
<li>ç»§ç»­è¯»å–ä¸‹ä¸€ä¸ªå­—æ®µï¼Œé‡å¤æ­¤è¿‡ç¨‹ã€‚</li>
</ol>
<h4 data-id="heading-26">å…³é”®ç‰¹æ€§ï¼šçµæ´»æ€§ã€å…¼å®¹æ€§ä¸æœªçŸ¥å­—æ®µ</h4>
<p>è¿™ç§åŸºäºæ•°å­—æ ‡ç­¾çš„æœºåˆ¶å¸¦æ¥äº†å·¨å¤§çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p><strong>å‘å/å‘å‰å…¼å®¹</strong>ï¼šå¦‚æœæ¥æ”¶æ–¹çš„ <code>.proto</code> ç‰ˆæœ¬æ¯”è¾ƒè€ï¼Œç¼ºå°‘å‘é€æ–¹æ•°æ®ä¸­çš„æŸäº›æ–°å­—æ®µï¼ˆæ¯”å¦‚å‘é€æ–¹ç”¨äº† <code>email = 3;</code>ï¼‰ï¼Œæ¥æ”¶æœºåœ¨è§£ç æ—¶çœ‹åˆ°ä¸è®¤è¯†çš„æ ‡ç­¾ï¼ˆå¦‚ <code>3</code>ï¼‰ï¼Œå®ƒä¼šç®€å•åœ°<strong>å¿½ç•¥è¿™ä¸ªå­—æ®µ</strong>ï¼Œè€Œä¸ä¼šæŠ¥é”™ã€‚è¿™å°±æ˜¯å‘å‰å…¼å®¹ã€‚åŒæ ·ï¼Œè€ç‰ˆæœ¬çš„å®¢æˆ·ç«¯å‘é€ç¼ºå°‘æ–°å­—æ®µçš„æ•°æ®ç»™æ–°ç‰ˆæœ¬çš„æœåŠ¡ç«¯ï¼Œæ–°æœåŠ¡ç«¯ä¹Ÿèƒ½æ­£å¸¸å¤„ç†ï¼ˆå‘åå…¼å®¹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>ç»“æ„ä½“ç±»å‹çš„è¯†åˆ«</strong>ï¼šProtobuf æ¶ˆæ¯æœ¬èº«æ˜¯<strong>è‡ªæè¿°</strong>çš„ï¼Œä½†åªæè¿°åˆ°å­—æ®µçº§åˆ«ï¼Œä¸æè¿°æ¶ˆæ¯ç±»å‹ã€‚é‚£ä¹ˆï¼Œä¸€ä¸ªæ›´æ ¹æœ¬çš„é—®é¢˜æ˜¯ï¼š<strong>æ¥æ”¶æ–¹å¦‚ä½•çŸ¥é“è¿™æ®µäºŒè¿›åˆ¶æ•°æ®åº”è¯¥è¢«è§£ç æˆ <code>User</code> æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯ <code>Product</code> æ¶ˆæ¯ï¼Ÿ</strong></p>
<p><strong>ç­”æ¡ˆåœ¨äºä¸Šå±‚çš„åº”ç”¨ç¨‹åºåè®®ã€‚</strong> Protobuf é€šå¸¸è¢«ç”¨ä½œæ›´é«˜çº§åˆ«åè®®çš„æ•°æ®è½½ä½“ã€‚è¯†åˆ«æ¶ˆæ¯ç±»å‹çš„æ–¹æ³•é€šå¸¸æœ‰ï¼š</p>
<ul>
<li><strong>åŒ…è£…åœ¨ä¸€ä¸ªå¤–å±‚æ¶ˆæ¯ä¸­</strong>ï¼šå®šä¹‰ä¸€ä¸ªé¡¶çº§çš„ã€åŒ…å«æ‰€æœ‰å¯èƒ½æ¶ˆæ¯ç±»å‹çš„åŒ…è£…æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-protobuf" lang="protobuf">message TopLevelMessage {
  oneof message_type {
    User user = 1;
    Product product = 2;
    // ...
  }
}
</code></pre>
<p>è§£ç æ—¶å…ˆè§£ç  <code>TopLevelMessage</code>ï¼Œæ ¹æ®å…¶ä¸­çš„ <code>oneof</code> å­—æ®µåˆ¤æ–­å…·ä½“ç±»å‹ã€‚</p>
<ul>
<li><strong>åœ¨åè®®å¤´ä¸­æŒ‡å®š</strong>ï¼šæ¯”å¦‚ï¼Œåœ¨ gRPC ä¸­ï¼ŒHTTP è¯·æ±‚è·¯å¾„å°±éšå«äº†è¦è°ƒç”¨çš„æœåŠ¡å’Œæ–¹æ³•ï¼Œä»è€Œç¡®å®šäº†æ¶ˆæ¯ç±»å‹ã€‚</li>
<li><strong>é¢„å…ˆçº¦å®š</strong>ï¼šåœ¨ç®€å•çš„ç‚¹å¯¹ç‚¹é€šä¿¡ä¸­ï¼ŒåŒæ–¹å¯èƒ½å°±çº¦å®šå¥½â€œè¿™ä¸ªSocketè¿æ¥ä¸Šåªå‘é€ <code>User</code> æ¶ˆæ¯â€ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">æ€»ç»“</h4>
<p>Protobuf èƒ½çŸ¥é“ä¸€ä¸ªç»“æ„ä½“æ˜¯å“ªä¸ªç»“æ„ä½“ï¼Œ<strong>å¹¶ä¸æ˜¯é äºŒè¿›åˆ¶æ•°æ®æœ¬èº«æºå¸¦äº†ç±»å‹å</strong>ï¼Œè€Œæ˜¯ä¾èµ–äºï¼š</p>
<ol>
<li><strong>é€šä¿¡åŒæ–¹å…±äº«çš„ <code>.proto</code> å¥‘çº¦</strong>ï¼šè¿™æ˜¯è§£ç çš„â€œå¯†ç æœ¬â€ã€‚</li>
<li><strong>å”¯ä¸€çš„æ•°å­—æ ‡ç­¾</strong>ï¼šè¿™æ˜¯äºŒè¿›åˆ¶æµä¸­è¯†åˆ«å­—æ®µçš„â€œé’¥åŒ™â€ã€‚</li>
<li><strong>ä¸Šå±‚çš„åº”ç”¨ç¨‹åºåè®®</strong>ï¼šè¿™è´Ÿè´£å‘Šè¯‰æ¥æ”¶æ–¹â€œè¯·ä½¿ç”¨ <code>User.proto</code> è¿™ä¸ªå¯†ç æœ¬æ¥è§£ç æ¥ä¸‹æ¥çš„æ•°æ®â€ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡å®ç°äº†æ•°æ®çš„é«˜åº¦å‹ç¼©ï¼ŒåŒæ—¶æä¾›äº†å‡ºè‰²çš„ç‰ˆæœ¬å…¼å®¹æ€§ã€‚</p>
<h2 data-id="heading-28">é™„2 Varint å‹ç¼©ï¼šå°æ•°å­—å ç”¨æ›´å°‘å­—èŠ‚çš„ç¼–ç è‰ºæœ¯</h2>
<p>åœ¨Proto Bufferä¸­ï¼Œæˆ‘ä»¬æåˆ°è¿‡ Varint, è¿™é‡Œæˆ‘åšä¸€ä¸ªè¡¥å……ã€‚</p>
<h3 data-id="heading-29">ä»€ä¹ˆæ˜¯ Varintï¼Ÿ</h3>
<p><strong>Varint</strong>ï¼ˆVariable-length Integerï¼Œå¯å˜é•¿åº¦æ•´æ•°ï¼‰æ˜¯ä¸€ç§æ™ºèƒ½çš„æ•´æ•°ç¼–ç æŠ€æœ¯ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>å°æ•°å€¼å ç”¨æ›´å°‘å­—èŠ‚ï¼Œå¤§æ•°å€¼æ‰å ç”¨æ›´å¤šå­—èŠ‚</strong>ã€‚</p>
<p>æ€æƒ³ç±»ä¼¼äºå“ˆå¤«æ›¼ç¼–ç ï¼Œä½†æ˜¯ä¸å®Œå…¨ç›¸ç­‰ï¼Œå“ˆå¤«æ›¼ç¼–ç åŸºäºé¢‘ç‡ï¼Œè€ŒVarintåŸºäºæ•°å­—æœ¬èº«çš„å¤§å°ã€‚</p>
<h3 data-id="heading-30">ä¼ ç»Ÿæ•´æ•°çš„å±€é™</h3>
<p>åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œæ•´æ•°ç±»å‹æœ‰å›ºå®šé•¿åº¦ï¼š</p>
<ul>
<li><code>int32</code>ï¼šå›ºå®š 4 å­—èŠ‚ï¼ˆ32ä½ï¼‰</li>
<li><code>int64</code>ï¼šå›ºå®š 8 å­—èŠ‚ï¼ˆ64ä½ï¼‰</li>
</ul>
<p>è¿™æ„å‘³ç€å³ä½¿æ•°å€¼å¾ˆå°ï¼ˆæ¯”å¦‚æ•°å­— <code>1</code>ï¼‰ï¼Œä¹Ÿè¦å ç”¨å®Œæ•´çš„ 4 ä¸ªå­—èŠ‚ï¼Œé€ æˆç©ºé—´æµªè´¹ã€‚</p>
<h3 data-id="heading-31">Varint ç¼–ç åŸç†</h3>
<h4 data-id="heading-32">åŸºæœ¬è§„åˆ™</h4>
<ol>
<li>
<p><strong>æ¯ä¸ªå­—èŠ‚åªç”¨ 7 ä½å­˜å‚¨æ•°æ®</strong>ï¼Œæœ€é«˜ä½ï¼ˆMSBï¼‰ä½œä¸ºç»§ç»­æ ‡å¿—ï¼š</p>
<ul>
<li><code>0</code>ï¼šè¡¨ç¤ºè¿™æ˜¯æœ€åä¸€ä¸ªå­—èŠ‚</li>
<li><code>1</code>ï¼šè¡¨ç¤ºåé¢è¿˜æœ‰æ›´å¤šå­—èŠ‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®æŒ‰å°ç«¯åºæ’åˆ—</strong>ï¼šä½ä½å­—èŠ‚åœ¨å‰</p>
</li>
</ol>
<h4 data-id="heading-33">ç¼–ç è¿‡ç¨‹ç¤ºä¾‹</h4>
<p><strong>ä¾‹1ï¼šæ•°å­— <code>1</code> çš„ç¼–ç </strong></p>
<pre><code class="hljs language-scss" lang="scss">äºŒè¿›åˆ¶ï¼š<span class="hljs-number">00000001</span>
Varintï¼š<span class="hljs-number">00000001</span>  (<span class="hljs-number">1</span>å­—èŠ‚)
</code></pre>
<ul>
<li>åªæœ‰1ä¸ªå­—èŠ‚ï¼Œæœ€é«˜ä½ä¸º <code>0</code></li>
</ul>
<p><strong>ä¾‹2ï¼šæ•°å­— <code>300</code> çš„ç¼–ç </strong></p>
<pre><code class="hljs language-scss" lang="scss">äºŒè¿›åˆ¶ï¼š<span class="hljs-number">100101100</span> (<span class="hljs-number">300</span>çš„äºŒè¿›åˆ¶)
åˆ†ç»„ï¼š  <span class="hljs-number">0000010</span>   <span class="hljs-number">0101100</span>  (æŒ‰<span class="hljs-number">7</span>ä½åˆ†ç»„)
åè½¬ï¼š  <span class="hljs-number">0101100</span>   <span class="hljs-number">0000010</span>  (å°ç«¯åº)
åŠ æ ‡å¿—ï¼š<span class="hljs-number">10101100</span>  <span class="hljs-number">00000010</span> (æœ€é«˜ä½ï¼š<span class="hljs-number">1</span>-ç»§ç»­, <span class="hljs-number">0</span>-ç»“æŸ)
åå…­è¿›åˆ¶ï¼šAC <span class="hljs-number">02</span>
</code></pre>
<ul>
<li>å ç”¨ 2 å­—èŠ‚ï¼š<code>0xAC 0x02</code></li>
</ul>
<p><strong>ä¾‹3ï¼šæ•°å­— <code>1</code> çš„ä¼ ç»Ÿ vs Varint å¯¹æ¯”</strong></p>
<pre><code class="hljs language-protobuf" lang="protobuf">int32 value = 1;
</code></pre>
<ul>
<li>ä¼ ç»Ÿå›ºå®šé•¿åº¦ï¼š<code>00 00 00 01</code>ï¼ˆ4å­—èŠ‚ï¼‰</li>
<li>Varint ç¼–ç ï¼š<code>01</code>ï¼ˆ1å­—èŠ‚ï¼‰</li>
<li><strong>èŠ‚çœ 75% ç©ºé—´ï¼</strong></li>
</ul>
<h3 data-id="heading-34">Protocol Buffers ä¸­çš„ Varint åº”ç”¨</h3>
<h4 data-id="heading-35">å®é™…ç¼–ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-protobuf" lang="protobuf">message Test {
  int32 id = 1; // å«ä¹‰ï¼šå­—æ®µåä¸ºidçš„å€¼ä¸º1
  ...
}
</code></pre>
<p>ä¸åŒå–å€¼çš„ç¼–ç ç»“æœï¼š</p>
<pre><code class="hljs language-python" lang="python">int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">1</span>      â†’ ç¼–ç : 08 01          (<span class="hljs-number">2</span>å­—èŠ‚)
int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">300</span>    â†’ ç¼–ç : 08 AC 02       (<span class="hljs-number">3</span>å­—èŠ‚)  
int32 <span class="hljs-built_in">id</span> = <span class="hljs-number">65536</span>  â†’ ç¼–ç : 08 <span class="hljs-number">80</span> <span class="hljs-number">80</span> 04    (<span class="hljs-number">4</span>å­—èŠ‚)
</code></pre>
<p>08 01 = 0000 1000 0000 0001</p>
<p>0000 1000 å‰5ä½è¡¨ç¤º å­—æ®µåºå·ï¼Œå3ä½è¡¨ç¤ºå­—æ®µç±»å‹ï¼Œè¡¨ç¤ºå­—æ®µå¤´ï¼Œç¬¬ä¸€ä¸ªå­—æ®µï¼Œintç±»å‹</p>
<p>0000 0001 è¡¨ç¤ºå€¼ä¸º1ã€‚</p>
<h4 data-id="heading-36">å­—æ®µå¤´ä¹Ÿæ˜¯ Varint</h4>
<p>å­—æ®µç¼–å·å’Œç±»å‹çš„ç»„åˆä¹Ÿä½¿ç”¨ Varint ç¼–ç ï¼š</p>
<pre><code class="hljs language-python" lang="python">08 = <span class="hljs-number">0000</span>1000  <span class="hljs-comment"># å­—æ®µ1ï¼ŒVarintç±»å‹</span>
</code></pre>
<h3 data-id="heading-37">ä¼˜åŠ¿ä¸å±€é™</h3>
<h4 data-id="heading-38">âœ… ä¼˜åŠ¿</h4>
<ol>
<li><strong>ç©ºé—´é«˜æ•ˆ</strong>ï¼šå°æ•°å­—å ç”¨æå°‘ç©ºé—´</li>
<li><strong>è‡ªæè¿°</strong>ï¼šä»æ•°æ®æœ¬èº«å¯çŸ¥é•¿åº¦</li>
<li><strong>é€šç”¨æ€§å¼º</strong>ï¼šé€‚åˆå„ç§æ•´æ•°ç±»å‹</li>
</ol>
<h4 data-id="heading-39">âŒ å±€é™</h4>
<ol>
<li><strong>å¤§æ•°ä»£ä»·</strong>ï¼šæå¤§æ•°å­—å¯èƒ½æ¯”å›ºå®šé•¿åº¦æ›´å ç©ºé—´</li>
<li><strong>è§£æå¼€é”€</strong>ï¼šéœ€è¦åŠ¨æ€è§£æå­—èŠ‚æ•°</li>
</ol>
<p>è¿™æ ·å°†å°è´Ÿæ•°è½¬æ¢ä¸ºå°æ­£æ•°ï¼Œå†åˆ©ç”¨ Varint çš„é«˜æ•ˆç¼–ç ã€‚</p>
<h3 data-id="heading-40">å®é™…å½±å“</h3>
<p>åœ¨çœŸå®ä¸šåŠ¡æ•°æ®ä¸­ï¼š</p>
<ul>
<li>å¤§å¤šæ•° IDã€çŠ¶æ€ç ã€æ•°é‡éƒ½æ˜¯å°æ•°å€¼</li>
<li>90% çš„æ•´æ•°å¯ä»¥ç”¨ 1-2 ä¸ªå­—èŠ‚è¡¨ç¤º</li>
<li>æ•´ä½“æ•°æ®å¤§å°å‡å°‘ 30-50% å¾ˆå¸¸è§</li>
</ul>
<h3 data-id="heading-41">æ€»ç»“</h3>
<p>Varint å‹ç¼©æ˜¯ Protocol Buffers é«˜æ•ˆæ€§çš„å…³é”®æŠ€æœ¯ä¹‹ä¸€ï¼Œå®ƒé€šè¿‡ã€ŒæŒ‰éœ€åˆ†é…ã€çš„æ™ºèƒ½ç¼–ç æ–¹å¼ï¼Œåœ¨äºŒè¿›åˆ¶çº§åˆ«å®ç°äº†æ•°æ®çš„æœ€å°åŒ–è¡¨ç¤ºï¼Œç‰¹åˆ«é€‚åˆç½‘ç»œä¼ è¾“å’Œå­˜å‚¨ä¼˜åŒ–åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²]]></title>    <link>https://juejin.cn/post/7575112613777653794</link>    <guid>https://juejin.cn/post/7575112613777653794</guid>    <pubDate>2025-11-23T01:58:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613777653794" data-draft-id="7575112613777637410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²"/> <meta itemprop="keywords" content="åç«¯,Java,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2025-11-23T01:58:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‚Ÿç©ºç å­—"/> <meta itemprop="url" content="https://juejin.cn/user/3139860942296830"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æŠŠæ‰‹æ­å»ºJavaå¾®æœåŠ¡ï¼šä»æŠ€æœ¯é€‰å‹åˆ°ç”Ÿäº§éƒ¨ç½²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860942296830/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‚Ÿç©ºç å­—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T01:58:21.000Z" title="Sun Nov 23 2025 01:58:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾®æœåŠ¡æ¶æ„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå…³äº"è¾¹ç•Œ"çš„å“²å­¦é—®é¢˜ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<p>æ¯ä¸ªæœåŠ¡è¾¹ç•Œçš„ç¡®ç«‹ï¼Œéƒ½æ˜¯åœ¨å›ç­”ä¸€ä¸ªåŸºæœ¬é—®é¢˜ï¼š"ä»€ä¹ˆåº”è¯¥åœ¨ä¸€èµ·ï¼Œä»€ä¹ˆåº”è¯¥åˆ†ç¦»ï¼Ÿ"è¿™ä¸æˆ‘ä»¬äººç”Ÿä¸­å…³äºäººé™…å…³ç³»ã€èŒä¸šå‘å±•çš„å†³ç­–ä½•å…¶ç›¸ä¼¼ã€‚è¿‡åº¦çš„è€¦åˆå¦‚åŒè¿‡åº¦ä¾èµ–çš„äººé™…å…³ç³»ï¼Œè®©äººå¤±å»ç‹¬ç«‹æ€§ï¼›è€Œè¿‡åº¦çš„æ‹†åˆ†åˆ™åƒæç«¯ä¸ªäººä¸»ä¹‰ï¼Œå¯¼è‡´åä½œæˆæœ¬æ¿€å¢ã€‚</p>
<p>å¦‚ä½•ä½¿ç”¨ Java æ­å»ºå¾®æœåŠ¡ç³»ç»Ÿã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„å¾®æœåŠ¡æ¶æ„æ­å»ºæ–¹æ¡ˆï¼š</p>
<h2 data-id="heading-0">1. æŠ€æœ¯æ ˆé€‰æ‹©</h2>
<h3 data-id="heading-1">æ ¸å¿ƒæ¡†æ¶</h3>
<ul>
<li><strong>Spring Boot</strong> - å¿«é€Ÿå¼€å‘æ¡†æ¶</li>
<li><strong>Spring Cloud</strong> - å¾®æœåŠ¡å…¨å®¶æ¡¶</li>
<li><strong>Spring Cloud Alibaba</strong> - é˜¿é‡Œå¾®æœåŠ¡è§£å†³æ–¹æ¡ˆ</li>
</ul>
<h3 data-id="heading-2">æœåŠ¡æ²»ç†</h3>
<ul>
<li><strong>Nacos</strong> - æœåŠ¡æ³¨å†Œä¸é…ç½®ä¸­å¿ƒ</li>
<li><strong>Spring Cloud Gateway</strong> - APIç½‘å…³</li>
<li><strong>OpenFeign</strong> - æœåŠ¡é—´è°ƒç”¨</li>
<li><strong>LoadBalancer</strong> - è´Ÿè½½å‡è¡¡</li>
</ul>
<h3 data-id="heading-3">å®¹é”™ä¸ç›‘æ§</h3>
<ul>
<li><strong>Sentinel</strong> - æµé‡æ§åˆ¶ä¸ç†”æ–­é™çº§</li>
<li><strong>Sleuth + Zipkin</strong> - åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª</li>
</ul>
<h2 data-id="heading-4">2. é¡¹ç›®ç»“æ„è®¾è®¡</h2>
<pre><code class="hljs language-perl" lang="perl">microservices-<span class="hljs-keyword">system</span>/
â”œâ”€â”€ gateway-service/          <span class="hljs-comment"># APIç½‘å…³</span>
â”œâ”€â”€ user-service/            <span class="hljs-comment"># ç”¨æˆ·æœåŠ¡</span>
â”œâ”€â”€ order-service/           <span class="hljs-comment"># è®¢å•æœåŠ¡</span>
â”œâ”€â”€ product-service/         <span class="hljs-comment"># å•†å“æœåŠ¡</span>
â”œâ”€â”€ common/                  <span class="hljs-comment"># å…¬å…±æ¨¡å—</span>
â””â”€â”€ pom.xml                  <span class="hljs-comment"># çˆ¶POM</span>
</code></pre>
<h2 data-id="heading-5">3. å…·ä½“å®ç°æ­¥éª¤</h2>
<h3 data-id="heading-6">3.1 çˆ¶å·¥ç¨‹é…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">project</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.example<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>microservices-system<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">packaging</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">packaging</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">modules</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>gateway-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>user-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>order-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>product-service<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">module</span>&gt;</span>common<span class="hljs-tag">&lt;/<span class="hljs-name">module</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">modules</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-boot.version</span>&gt;</span>2.7.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-boot.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud.version</span>&gt;</span>2021.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud.version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>2021.0.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">spring-cloud-alibaba.version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- Spring Boot --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-boot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- Spring Cloud --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            
            <span class="hljs-comment">&lt;!-- Spring Cloud Alibaba --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-cloud-alibaba.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3.2 å…¬å…±æ¨¡å— (common)</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç»Ÿä¸€å“åº”å¯¹è±¡</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Integer</span> code;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> message;
    <span class="hljs-keyword">private</span> T data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">success</span>(<span class="hljs-params">T data</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">200</span>, <span class="hljs-string">"success"</span>, data);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-title class_">Result</span>&lt;T&gt; <span class="hljs-title function_">error</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> message</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">500</span>, message, <span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// å…¨å±€å¼‚å¸¸å¤„ç†</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-meta">@ExceptionHandler</span>(<span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Result</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">handleException</span>(<span class="hljs-params">Exception e</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Result</span>.<span class="hljs-title function_">error</span>(e.<span class="hljs-title function_">getMessage</span>());
    }
}
</code></pre>
<h3 data-id="heading-8">3.3 ç”¨æˆ·æœåŠ¡ (user-service)</h3>
<p><strong>pom.xml</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-loadbalancer<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><strong>application.yml</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8081</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">user-service</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/user_db?useSSL=false</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">password</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>

<span class="hljs-attr">mybatis-plus:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span>
</code></pre>
<p><strong>UserController.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/users"</span>)
public class UserController {
    
    <span class="hljs-variable">@Autowired</span>
    private UserService userService;
    
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    public Result&lt;User&gt; <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">user</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.getById</span>(id);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(user);
    }
    
    @<span class="hljs-selector-tag">PostMapping</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">User</span>&gt; <span class="hljs-selector-tag">createUser</span>(<span class="hljs-variable">@RequestBody</span> User user) {
        <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.save</span>(user);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(user);
    }
    
    @<span class="hljs-selector-tag">GetMapping</span>
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">User</span>&gt;&gt; <span class="hljs-selector-tag">getAllUsers</span>() {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(userService.<span class="hljs-built_in">list</span>());
    }
}
</code></pre>
<p><strong>User.java</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@TableName</span>(<span class="hljs-string">"users"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-meta">@TableId</span>(<span class="hljs-keyword">type</span> = <span class="hljs-title class_">IdType</span>.<span class="hljs-property">AUTO</span>)
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Long</span> id;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> username;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> email;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> phone;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> createTime;
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">Date</span> updateTime;
}
</code></pre>
<h3 data-id="heading-9">3.4 è®¢å•æœåŠ¡ (order-service)</h3>
<p><strong>OrderController.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
<span class="hljs-variable">@RequestMapping</span>(<span class="hljs-string">"/orders"</span>)
public class OrderController {
    
    <span class="hljs-variable">@Autowired</span>
    private OrderService orderService;
    
    <span class="hljs-variable">@Autowired</span>
    private UserFeignClient userFeignClient;
    
    <span class="hljs-variable">@PostMapping</span>
    public Result&lt;Order&gt; <span class="hljs-built_in">createOrder</span>(<span class="hljs-variable">@RequestBody</span> Order order) {
        <span class="hljs-comment">// è°ƒç”¨ç”¨æˆ·æœåŠ¡éªŒè¯ç”¨æˆ·</span>
        <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">User</span>&gt; <span class="hljs-selector-tag">userResult</span> = <span class="hljs-selector-tag">userFeignClient</span><span class="hljs-selector-class">.getUserById</span>(order.<span class="hljs-built_in">getUserId</span>());
        <span class="hljs-selector-tag">if</span> (userResult.<span class="hljs-built_in">getCode</span>() != <span class="hljs-number">200</span>) {
            <span class="hljs-selector-tag">throw</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RuntimeException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        }
        
        <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.save</span>(order);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(order);
    }
    
    @<span class="hljs-selector-tag">GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">Result</span>&lt;<span class="hljs-selector-tag">Order</span>&gt; <span class="hljs-selector-tag">getOrderById</span>(<span class="hljs-variable">@PathVariable</span> Long id) {
        <span class="hljs-selector-tag">Order</span> <span class="hljs-selector-tag">order</span> = <span class="hljs-selector-tag">orderService</span><span class="hljs-selector-class">.getById</span>(id);
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Result</span><span class="hljs-selector-class">.success</span>(order);
    }
}
</code></pre>
<p><strong>UserFeignClient.java</strong></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@FeignClient</span>(name = <span class="hljs-string">"user-service"</span>, path = <span class="hljs-string">"/users"</span>)
public interface UserFeignClient {
    
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/{id}"</span>)
    Result&lt;User&gt; <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id);
}
</code></pre>
<h3 data-id="heading-10">3.5 APIç½‘å…³ (gateway-service)</h3>
<p><strong>pom.xml</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<p><strong>application.yml</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">gateway-service</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:8848</span>
    <span class="hljs-attr">gateway:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">locator:</span>
          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">routes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">user-service</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://user-service</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/users/**</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=1</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">order-service</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://order-service</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/api/orders/**</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=1</span>
</code></pre>
<h3 data-id="heading-11">3.6 é…ç½®ä¸­å¿ƒä½¿ç”¨</h3>
<p>åœ¨Nacosä¸­åˆ›å»º <code>user-service.yaml</code> é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># user-service ç‰¹å®šé…ç½®</span>
<span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">com.example:</span> <span class="hljs-string">debug</span>

<span class="hljs-attr">custom:</span>
  <span class="hljs-attr">config:</span> <span class="hljs-string">user-service-config</span>
</code></pre>
<h2 data-id="heading-12">4. æœåŠ¡æ³¨å†Œä¸å‘ç°</h2>
<h3 data-id="heading-13">å¯åŠ¨Nacos</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½Nacoså¹¶å¯åŠ¨</span>
sh startup.sh -m standalone
</code></pre>
<h3 data-id="heading-14">æœåŠ¡æ³¨å†Œ</h3>
<p>æ¯ä¸ªå¾®æœåŠ¡é€šè¿‡ <code>@EnableDiscoveryClient</code> è‡ªåŠ¨æ³¨å†Œï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@SpringBootApplication</span>
<span class="hljs-variable">@EnableDiscoveryClient</span>
<span class="hljs-variable">@EnableFeignClients</span>
public class UserServiceApplication {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(UserServiceApplication.class, args);
    }
}
</code></pre>
<h2 data-id="heading-15">5. ç†”æ–­ä¸é™çº§</h2>
<h3 data-id="heading-16">ä½¿ç”¨Sentinel</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@FeignClient(name = <span class="hljs-string">"user-service"</span>, fallback = UserFeignClientFallback.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFeignClient</span> {
    <span class="hljs-comment">// ...</span>
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserFeignClientFallback</span> <span class="hljs-title">implements</span> <span class="hljs-title">UserFeignClient</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Result&lt;User&gt; getUserById(<span class="hljs-built_in">Long</span> id) {
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">"ç”¨æˆ·æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>);
    }
}
</code></pre>
<h2 data-id="heading-17">6. éƒ¨ç½²ä¸è¿è¡Œ</h2>
<h3 data-id="heading-18">ä½¿ç”¨Docker Compose</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nacos:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">nacos/nacos-server:latest</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MODE=standalone</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8848:8848"</span>
  
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">MYSQL_ROOT_PASSWORD=password</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3306:3306"</span>
</code></pre>
<h2 data-id="heading-19">7. ç›‘æ§ä¸è¿ç»´</h2>
<h3 data-id="heading-20">é“¾è·¯è¿½è¸ªé…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">sleuth:</span>
    <span class="hljs-attr">sampler:</span>
      <span class="hljs-attr">probability:</span> <span class="hljs-number">1.0</span>
  <span class="hljs-attr">zipkin:</span>
    <span class="hljs-attr">base-url:</span> <span class="hljs-string">http://localhost:9411</span>
</code></pre>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>è¿™ä¸ªå¾®æœåŠ¡ç³»ç»Ÿæä¾›äº†ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ³¨å†Œå‘ç°</strong> - åŸºäºNacos</li>
<li><strong>APIç½‘å…³</strong> - ç»Ÿä¸€å…¥å£å’Œè·¯ç”±</li>
<li><strong>æœåŠ¡é—´è°ƒç”¨</strong> - åŸºäºOpenFeign</li>
<li><strong>é…ç½®ç®¡ç†</strong> - é›†ä¸­å¼é…ç½®</li>
<li><strong>ç†”æ–­é™çº§</strong> - åŸºäºSentinel</li>
<li><strong>è´Ÿè½½å‡è¡¡</strong> - åŸºäºLoadBalancer</li>
</ol>
<p>æ ¹æ®å®é™…éœ€æ±‚æ‰©å±•æ›´å¤šåŠŸèƒ½ï¼Œå¦‚åˆ†å¸ƒå¼äº‹åŠ¡ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç›‘æ§å‘Šè­¦ç­‰ã€‚</p>
<p>å¾®æœåŠ¡æŠ€æœ¯æ ˆçš„æ›´æ–°é€Ÿåº¦å·²ç»è¶…è¿‡äº†å¤§å¤šæ•°å›¢é˜Ÿçš„å®é™…éœ€æ±‚ï¼Œå½¢æˆäº†ä¸€ç§æŠ€æœ¯çš„"æ—¶å°šç«èµ›"ã€‚</p>
<p>å¾ˆå¤šå›¢é˜Ÿåœ¨Spring Cloudã€Dubboã€Kubernetes + Istioä¹‹é—´åå¤æ¨ªè·³ï¼Œå´å¿½ç•¥äº†æœ€æ ¹æœ¬çš„é—®é¢˜ï¼šè¿™äº›æŠ€æœ¯å˜é©æ˜¯å¦çœŸçš„ä¸ºä¸šåŠ¡åˆ›é€ äº†ä»·å€¼ï¼Ÿè¿˜æ˜¯ä»…ä»…ä¸ºäº†æŠ€æœ¯äººçš„"ç®€å†å·¥ç¨‹"ï¼Ÿ</p>
<p>æœ€æˆåŠŸçš„å¾®æœåŠ¡æ¶æ„ï¼Œå¾€å¾€ä¸æ˜¯æŠ€æœ¯æœ€è¶…å‰çš„ï¼Œè€Œæ˜¯ä¸å›¢é˜Ÿèƒ½åŠ›ã€ä¸šåŠ¡å‘å±•é˜¶æ®µæœ€åŒ¹é…çš„ã€‚æŠ€æœ¯å†³ç­–åº”è¯¥æ˜¯ä¸€åœºç†æ€§çš„ä»·å€¼æŠ•èµ„ï¼Œè€Œä¸æ˜¯æ„Ÿæ€§çš„æ—¶å°šè¿½é€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83ac37f1a22643a788a7461753e60610~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oKf56m656CB5a2X:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764467901&amp;x-signature=FqGy0BtlB0dlo6%2BhlbEjuvzKpaE%3D" alt="image.png" loading="lazy"/></p>
<p><strong>è°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œæ—¢ç„¶çœ‹åˆ°è¿™é‡Œäº†ï¼Œå¦‚æœè§‰å¾—ä¸é”™ï¼Œéšæ‰‹ç‚¹ä¸ªèµã€è½¬å‘ã€åœ¨çœ‹ä¸‰è¿å§ï¼Œæ„Ÿè°¢æ„Ÿè°¢ã€‚é‚£æˆ‘ä»¬ï¼Œä¸‹æ¬¡å†è§ã€‚</strong></p>
<p>æ‚¨çš„ä¸€é”®ä¸‰è¿ï¼Œæ˜¯æˆ‘æ›´æ–°çš„æœ€å¤§åŠ¨åŠ›ï¼Œè°¢è°¢</p>
<p>å±±æ°´æœ‰ç›¸é€¢ï¼Œæ¥æ—¥çš†å¯æœŸï¼Œè°¢è°¢é˜…è¯»ï¼Œæˆ‘ä»¬å†ä¼š</p>
<p>æˆ‘æ‰‹ä¸­çš„é‡‘ç®æ£’ï¼Œä¸Šèƒ½é€šå¤©ï¼Œä¸‹èƒ½æ¢æµ·</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)]]></title>    <link>https://juejin.cn/post/7575655132747726884</link>    <guid>https://juejin.cn/post/7575655132747726884</guid>    <pubDate>2025-11-23T02:32:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132747726884" data-draft-id="7575655132747710500" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®,C++"/> <meta itemprop="datePublished" content="2025-11-23T02:32:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å¯çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/3590319025687584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            enetæºç è§£æï¼ˆ3ï¼‰æ•°æ®åŒ… (ENetPacket)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3590319025687584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å¯çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:32:48.000Z" title="Sun Nov 23 2025 02:32:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ ENet ä¸­ï¼Œæˆ‘ä»¬ä¸ç›´æ¥å‘é€æ•£ä¹±çš„å­—èŠ‚æµï¼Œè€Œæ˜¯å°†æ•°æ®å°è£…åœ¨<strong>æ•°æ®åŒ… (ENetPacket)</strong> ä¸­ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦ ENetPacketï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ åœ¨ç©ä¸€ä¸ªå¿«èŠ‚å¥çš„å°„å‡»æ¸¸æˆï¼š</p>
<ol>
<li><strong>åœºæ™¯ A</strong>ï¼šä½ å¼€äº†ä¸€æªã€‚è¿™ä¸ªä¿¡æ¯<strong>å¿…é¡»</strong>åˆ°è¾¾æœåŠ¡å™¨ï¼Œå¦åˆ™ä½ æ‰“ä¸­äººéƒ½æ²¡ä¼¤å®³ã€‚</li>
<li><strong>åœºæ™¯ B</strong>ï¼šä½ çš„è§’è‰²åœ¨ç§»åŠ¨ã€‚å¦‚æœä¸¢å¤±äº†ä¸€ä¸¤ä¸ªä½ç½®æ›´æ–°åŒ…ï¼ŒæœåŠ¡å™¨å¯ä»¥ç”¨ä¸‹ä¸€ä¸ªåŒ…ä¿®æ­£ä½ç½®ï¼Œé—®é¢˜ä¸å¤§ã€‚</li>
</ol>
<p>å¦‚æœç›´æ¥ä½¿ç”¨åŸå§‹çš„ UDP åè®®ï¼Œå®ƒå°±åƒå¯„å¹³ä¿¡ï¼Œæ—¢å®¹æ˜“ä¸¢ï¼Œä¹Ÿä¸ä¿è¯é¡ºåºã€‚
<code>ENetPacket</code> çš„å‡ºç°å°±æ˜¯ä¸ºäº†ç»™è¿™äº›æ•°æ®è´´ä¸Šâ€œæ ‡ç­¾â€ã€‚å®ƒå…è®¸ä½ å‘Šè¯‰ ENetï¼šâ€œè¿™å°ä¿¡éå¸¸é‡è¦ï¼Œå¿…é¡»é€åˆ°ï¼ˆReliableï¼‰â€æˆ–è€…â€œè¿™å°ä¿¡ä¸¢äº†ä¹Ÿæ²¡å…³ç³»ï¼ˆUnreliableï¼‰â€ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ¦‚å¿µï¼šå¯é æ€§ä¸æ ‡å¿—</h2>
<p>åœ¨åˆ›å»ºæ•°æ®åŒ…æ—¶ï¼Œæœ€é‡è¦çš„å‚æ•°æ˜¯ <code>flags</code>ï¼ˆæ ‡å¿—ä½ï¼‰ã€‚å®ƒå†³å®šäº†æ•°æ®åŒ…çš„ä¼ è¾“è¡Œä¸ºã€‚</p>
<h3 data-id="heading-2">2.1 å¯é æ•°æ®åŒ… (Reliable)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>ENET_PACKET_FLAG_RELIABLE</code></li>
<li><strong>è¡Œä¸º</strong>ï¼šå°±åƒ TCP åè®®ã€‚å¦‚æœæ•°æ®åŒ…ä¸¢å¤±ï¼ŒENet ä¼šè‡ªåŠ¨é‡ä¼ ï¼Œç›´åˆ°å¯¹æ–¹ç¡®è®¤æ”¶åˆ°ã€‚ä¸”ä¿è¯æŒ‰å‘é€é¡ºåºåˆ°è¾¾ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šèŠå¤©ä¿¡æ¯ã€è´­ä¹°ç‰©å“ã€é‡Šæ”¾æŠ€èƒ½ã€‚</li>
</ul>
<h3 data-id="heading-3">2.2 ä¸å¯é æ•°æ®åŒ… (Unreliable)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>0</code> (æ— æ ‡å¿—)</li>
<li><strong>è¡Œä¸º</strong>ï¼šå°±åƒåŸå§‹ UDPã€‚å‘å‡ºå»å°±ä¸ç®¡äº†ï¼Œä¸¢äº†å°±ä¸¢äº†ã€‚ä½† ENet ä¾ç„¶ä¼šå¸®ä½ è¿›è¡ŒåŸºæœ¬çš„å®Œæ•´æ€§æ ¡éªŒï¼ˆCRCï¼‰ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šé¢‘ç¹çš„ä½ç½®æ›´æ–°ã€è¯­éŸ³æ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-4">2.3 æ— åºæ•°æ®åŒ… (Unsequenced)</h3>
<ul>
<li><strong>æ ‡å¿—</strong>ï¼š<code>ENET_PACKET_FLAG_UNSEQUENCED</code></li>
<li><strong>è¡Œä¸º</strong>ï¼šæ•°æ®åŒ…ä¸ä»…ä¸å¯é ï¼Œè€Œä¸”ä¸ä¿è¯é¡ºåºã€‚åé¢çš„åŒ…å¯èƒ½æ¯”å‰é¢çš„å…ˆåˆ°ã€‚</li>
<li><strong>é€‚ç”¨</strong>ï¼šæç«¯è¿½æ±‚ä½å»¶è¿Ÿä¸”å¯¹æ—§æ•°æ®å®Œå…¨ä¸æ„Ÿå…´è¶£çš„åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-5">3. å®æˆ˜ï¼šåˆ›å»ºä¸å‘é€</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡ä»£ç æ¥çœ‹çœ‹å¦‚ä½•å°è£…å¹¶å‘é€ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡æ•°æ®ä¸åˆ›å»ºåŒ…</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-comment">// ... åˆå§‹åŒ–ä»£ç ç•¥ ...</span>

<span class="hljs-type">const</span> <span class="hljs-type">char</span> * message = <span class="hljs-string">"Hello, ENet!"</span>;

<span class="hljs-comment">// åˆ›å»ºæ•°æ®åŒ…</span>
<span class="hljs-comment">// å‚æ•°1: æ•°æ®å†…å®¹æŒ‡é’ˆ</span>
<span class="hljs-comment">// å‚æ•°2: æ•°æ®é•¿åº¦ (è®°å¾—åŒ…å«å­—ç¬¦ä¸²ç»“å°¾çš„ \0)</span>
<span class="hljs-comment">// å‚æ•°3: æ ‡å¿—ä½ (è¿™é‡Œæˆ‘ä»¬é€‰æ‹©å¯é ä¼ è¾“)</span>
ENetPacket * packet = enet_packet_create(message, 
                                         <span class="hljs-built_in">strlen</span>(message) + <span class="hljs-number">1</span>, 
                                         ENET_PACKET_FLAG_RELIABLE);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š
å½“ä½ è°ƒç”¨ <code>enet_packet_create</code> æ—¶ï¼ŒENet ä¼šåœ¨å†…éƒ¨ç”³è¯·ä¸€å—æ–°çš„å†…å­˜ï¼Œå¹¶å°†ä½ çš„ <code>message</code> <strong>å¤åˆ¶</strong> è¿›å»ã€‚è¿™æ„å‘³ç€åœ¨è¿™ä¸ªå‡½æ•°è¿”å›åï¼Œä½ å¯ä»¥éšæ„ä¿®æ”¹æˆ–é”€æ¯åŸæ¥çš„ <code>message</code> å˜é‡ï¼Œä¸ä¼šå½±å“æ•°æ®åŒ…ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šå‘é€ç»™å¯¹ç­‰èŠ‚ç‚¹</h3>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‘é€æ•°æ®åŒ…</span>
<span class="hljs-comment">// å‚æ•°1: ç›®æ ‡èŠ‚ç‚¹ (peer)</span>
<span class="hljs-comment">// å‚æ•°2: é€šé“ ID (0) - ç¨ååœ¨ä¸‹ä¸€ç« è¯¦ç»†è®²è§£</span>
<span class="hljs-comment">// å‚æ•°3: æ•°æ®åŒ…å¯¹è±¡</span>
<span class="hljs-type">int</span> result = enet_peer_send(peer, <span class="hljs-number">0</span>, packet);

<span class="hljs-keyword">if</span> (result &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">"å‘é€å¤±è´¥ï¼\n"</span>);
    <span class="hljs-comment">// å¦‚æœå‘é€å¤±è´¥ï¼Œä½ éœ€è¦è‡ªå·±é”€æ¯è¿™ä¸ªåŒ…</span>
    enet_packet_destroy(packet); 
}
</code></pre>
<ul>
<li>å…³äºé€šé“çš„çŸ¥è¯†ï¼Œè¯·å‚è€ƒ <a href="https://link.juejin.cn?target=04_%25E5%25A4%259A%25E9%2580%259A%25E9%2581%2593%25E6%259C%25BA%25E5%2588%25B6__channels__.md" target="_blank" title="04_%E5%A4%9A%E9%80%9A%E9%81%93%E6%9C%BA%E5%88%B6__channels__.md" ref="nofollow noopener noreferrer">å¤šé€šé“æœºåˆ¶ (Channels)</a>ã€‚</li>
</ul>
<p><strong>é‡è¦è§„åˆ™</strong>ï¼š</p>
<ul>
<li>å¦‚æœ <code>enet_peer_send</code> æˆåŠŸï¼ˆè¿”å› 0ï¼‰ï¼Œ<strong>ENet æ¥ç®¡äº†æ•°æ®åŒ…çš„æ‰€æœ‰æƒ</strong>ã€‚ä½ <strong>åƒä¸‡ä¸è¦</strong>å†è°ƒç”¨ destroyï¼ŒENet ä¼šåœ¨å‘å®Œåè‡ªåŠ¨é”€æ¯å®ƒã€‚</li>
<li>å¦‚æœå‘é€å¤±è´¥ï¼Œä½ éœ€è¦æ‰‹åŠ¨é”€æ¯å®ƒä»¥é˜²å†…å­˜æ³„æ¼ã€‚</li>
</ul>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šæ¥æ”¶æ•°æ®åŒ…</h3>
<p>åœ¨æ¥æ”¶ç«¯ï¼ˆEvent Loop ä¸­ï¼‰ï¼Œæˆ‘ä»¬è§£åŒ…æ•°æ®ã€‚</p>
<pre><code class="hljs language-c" lang="c">ENetEvent event;
<span class="hljs-keyword">while</span> (enet_host_service(host, &amp;event, <span class="hljs-number">1000</span>) &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">switch</span> (event.type) {
        <span class="hljs-keyword">case</span> ENET_EVENT_TYPE_RECEIVE:
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°æ¶ˆæ¯: %s\n"</span>, (<span class="hljs-type">char</span>*)event.packet-&gt;data);
            
            <span class="hljs-comment">// é‡è¦ï¼šæ¥æ”¶åˆ°çš„åŒ…å¿…é¡»ç”±ç”¨æˆ·è´Ÿè´£é”€æ¯ï¼</span>
            enet_packet_destroy(event.packet);
            <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šENet ä¸çŸ¥é“ä½ ä»€ä¹ˆæ—¶å€™ç”¨å®Œæ•°æ®ï¼Œæ‰€ä»¥åœ¨ <code>ENET_EVENT_TYPE_RECEIVE</code> äº‹ä»¶å¤„ç†å®Œæ¯•åï¼Œä½ <strong>å¿…é¡»</strong>è°ƒç”¨ <code>enet_packet_destroy</code>ï¼Œå¦åˆ™å†…å­˜ä¼šä¸€ç›´è¢«å ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-9">4. å†…éƒ¨åŸç†è§£æ</h2>
<p>å½“ä½ åˆ›å»ºä¸€ä¸ªæ•°æ®åŒ…æ—¶ï¼Œå†…å­˜é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant API as enet_packet_create
    participant Mem as å †å†…å­˜ (Heap)

    User-&gt;&gt;API: è¯·æ±‚åˆ›å»ºåŒ… ("Hello", é•¿åº¦ 6)
    API-&gt;&gt;Mem: malloc(sizeof(ENetPacket))
    Note right of Mem: åˆ†é…ç»“æ„ä½“å¤´ä¿¡æ¯
    API-&gt;&gt;Mem: malloc(6 bytes)
    Note right of Mem: åˆ†é…æ•°æ®è½½è·ç©ºé—´
    API-&gt;&gt;Mem: memcpy("Hello" -&gt; buffer)
    Note right of Mem: å¤åˆ¶ç”¨æˆ·æ•°æ®åˆ°æ–°ç©ºé—´
    API--&gt;&gt;User: è¿”å› Packet æŒ‡é’ˆ
</code></pre>
<h3 data-id="heading-10">4.1 æ·±å…¥ä»£ç  (packet.c)</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>enet_packet_create</code> çš„ç®€åŒ–ç‰ˆå®ç°ï¼Œç†è§£å®ƒæ˜¯å¦‚ä½•ç®¡ç†å†…å­˜çš„ã€‚</p>
<p><strong>1. åˆ†é…å¤´éƒ¨</strong>
é¦–å…ˆï¼Œåˆ†é… <code>ENetPacket</code> ç»“æ„ä½“æœ¬èº«çš„å†…å­˜ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
ENetPacket * <span class="hljs-title function_">enet_packet_create</span> <span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">void</span> * data, <span class="hljs-type">size_t</span> dataLength, enet_uint32 flags)</span>
{
    <span class="hljs-comment">// 1. åˆ†é…ç»“æ„ä½“</span>
    ENetPacket * packet = (ENetPacket *) enet_malloc (<span class="hljs-keyword">sizeof</span> (ENetPacket));
    <span class="hljs-keyword">if</span> (packet == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// å†…å­˜ä¸è¶³</span>
</code></pre>
<p><strong>2. åˆ†é…ä¸å¤åˆ¶æ•°æ®</strong>
è¿™æ˜¯å…³é”®ç‚¹ã€‚é™¤éä½ æŒ‡å®šäº† <code>ENET_PACKET_FLAG_NO_ALLOCATE</code>ï¼ˆé«˜çº§ç”¨æ³•ï¼‰ï¼Œå¦åˆ™ ENet æ€»æ˜¯ä¼šå¤åˆ¶æ•°æ®ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
    <span class="hljs-comment">// 2. åˆ†é…æ•°æ®ç¼“å†²åŒº</span>
    packet -&gt; data = (enet_uint8 *) enet_malloc (dataLength);

    <span class="hljs-comment">// 3. å¤åˆ¶ç”¨æˆ·æ•°æ®</span>
    <span class="hljs-keyword">if</span> (data != <span class="hljs-literal">NULL</span>)
        <span class="hljs-built_in">memcpy</span> (packet -&gt; data, data, dataLength);
</code></pre>
<p><strong>3. è®¾ç½®å±æ€§</strong>
æœ€åï¼Œåˆå§‹åŒ–æ ‡å¿—ä½å’Œå¼•ç”¨è®¡æ•°ã€‚</p>
<pre><code class="hljs language-c" lang="c">    <span class="hljs-comment">// file: packet.c (ç®€åŒ–)</span>
    packet -&gt; flags = flags;
    packet -&gt; dataLength = dataLength;
    packet -&gt; referenceCount = <span class="hljs-number">0</span>; <span class="hljs-comment">// å¼•ç”¨è®¡æ•°ç”¨äºå¤šæ’­ç­‰åœºæ™¯</span>
    
    <span class="hljs-keyword">return</span> packet;
}
</code></pre>
<h3 data-id="heading-11">4.2 æ ¡éªŒå’Œ (CRC32)</h3>
<p>è™½ç„¶åœ¨ç®€å•çš„åˆ›å»ºå‡½æ•°ä¸­çœ‹ä¸åˆ°ï¼Œä½†åœ¨å‘é€å‰ï¼ŒENet è¿˜ä¼šè®¡ç®—æ•°æ®çš„ CRC32 æ ¡éªŒå’Œã€‚è¿™ä¿è¯äº†å¦‚æœç½‘ç»œä¼ è¾“ä¸­æ•°æ®ä½å‘ç”Ÿäº†ç¿»è½¬ï¼ˆæ¯”å¦‚æ¯”ç‰¹æµå¹²æ‰°ï¼‰ï¼ŒENet èƒ½å¤Ÿè¯†åˆ«å‡ºæ¥å¹¶ä¸¢å¼ƒååŒ…ï¼Œè€Œä¸ä¼šæŠŠä¹±ç äº¤ç»™ä½ çš„ç¨‹åºã€‚</p>
<hr/>
<h2 data-id="heading-12">5. é«˜çº§æŠ€å·§ï¼šé¿å…å†…å­˜å¤åˆ¶</h2>
<p>å¯¹äºæå…¶è¿½æ±‚æ€§èƒ½çš„åœºæ™¯ï¼Œä½ å¯èƒ½å¸Œæœ›é¿å… <code>memcpy</code> çš„å¼€é”€ã€‚
ä½ å¯ä»¥ä½¿ç”¨ <code>ENET_PACKET_FLAG_NO_ALLOCATE</code> æ ‡å¿—ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// å‡è®¾ my_data æ˜¯ä½ è‡ªå·±ç®¡ç†çš„ä¸€å—æŒä¹…å†…å­˜</span>
ENetPacket * packet = enet_packet_create(my_data, len, 
    ENET_PACKET_FLAG_RELIABLE | ENET_PACKET_FLAG_NO_ALLOCATE);
</code></pre>
<p><strong>è­¦å‘Š</strong>ï¼šä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼ŒENet åªä¼šä¿å­˜æŒ‡é’ˆ <code>my_data</code>ã€‚ä½ å¿…é¡»ç¡®ä¿åœ¨ ENet å‘é€å®Œæ¯•å¹¶é”€æ¯ packet ä¹‹å‰ï¼Œè¿™å—å†…å­˜<strong>ä¸€ç›´æœ‰æ•ˆ</strong>ã€‚è¿™é€šå¸¸ç”¨äºå‘é€é™æ€å¸¸é‡æ•°æ®æˆ–é€šè¿‡è‡ªå®šä¹‰å†…å­˜æ± ç®¡ç†çš„æ•°æ®ã€‚</p>
<hr/>
<h2 data-id="heading-13">6. æ€»ç»“</h2>
<p>åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº† ENet é€šä¿¡çš„åŸºæœ¬å•å…ƒï¼š</p>
<ol>
<li><strong>ENetPacket</strong> æ˜¯æ•°æ®çš„è½½ä½“ï¼ŒåŒ…å«æ•°æ®å†…å®¹å’Œä¼ è¾“æ ‡å¿—ã€‚</li>
<li>é€šè¿‡ <strong>Flags</strong>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ‡æ¢ TCP é£æ ¼çš„å¯é ä¼ è¾“å’Œ UDP é£æ ¼çš„å¿«é€Ÿä¼ è¾“ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>è‡³å…³é‡è¦ï¼š
<ul>
<li>åˆ›å»ºæ—¶ï¼šæ•°æ®è¢«å¤åˆ¶ã€‚</li>
<li>å‘é€æˆåŠŸåï¼šENet è´Ÿè´£é”€æ¯ã€‚</li>
<li>æ¥æ”¶åï¼šç”¨æˆ·è´Ÿè´£é”€æ¯ã€‚</li>
</ul>
</li>
</ol>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»èƒ½å‘åŒ…äº†ï¼Œä½†å¦‚æœæˆ‘ä»¬éœ€è¦åŒæ—¶å¤„ç†èŠå¤©ä¿¡æ¯å’Œé«˜é¢‘çš„ä½ç½®åŒæ­¥ï¼Œå¦‚ä½•é¿å…èŠå¤©ä¿¡æ¯é˜»å¡äº†ä½ç½®æ›´æ–°å‘¢ï¼Ÿè¿™å°±å¼•å…¥äº† ENet çš„å¦ä¸€ä¸ªå¼ºå¤§ç‰¹æ€§â€”â€”<strong>é€šé“</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)]]></title>    <link>https://juejin.cn/post/7575655132747759652</link>    <guid>https://juejin.cn/post/7575655132747759652</guid>    <pubDate>2025-11-23T02:36:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575655132747759652" data-draft-id="7575655132747743268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)"/> <meta itemprop="keywords" content="ç½‘ç»œåè®®,C++"/> <meta itemprop="datePublished" content="2025-11-23T02:36:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å¯çš„ç å†œ"/> <meta itemprop="url" content="https://juejin.cn/user/3590319025687584"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            enetæºç è§£æï¼ˆ4ï¼‰å¤šé€šé“æœºåˆ¶ (Channels)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3590319025687584/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å¯çš„ç å†œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:36:09.000Z" title="Sun Nov 23 2025 02:36:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸Šä¸€ç«  æ•°æ®åŒ…å°è£… (ENetPacket) ä¸­ï¼Œæˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•åˆ›å»ºåŒ…è£¹ï¼ˆæ•°æ®åŒ…ï¼‰å¹¶ç»™å®ƒä»¬è´´ä¸Šâ€œå¿…é¡»é€è¾¾â€æˆ–â€œæ— æ‰€è°“â€çš„æ ‡ç­¾ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‰€æœ‰çš„åŒ…è£¹éƒ½æŒ¤åœ¨ä¸€æ¡çª„çª„çš„å°è·¯ä¸Šæ’é˜Ÿï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™å°±å¼•å‡ºäº†ç½‘ç»œç¼–ç¨‹ä¸­ä¸€ä¸ªç»å…¸çš„é—®é¢˜ï¼Œä»¥åŠ ENet çš„æ€æ‰‹çº§ç‰¹æ€§â€”â€”<strong>å¤šé€šé“ (Channels)</strong>ã€‚</p>
<h2 data-id="heading-0">1. ä¸ºä»€ä¹ˆéœ€è¦é€šé“ï¼Ÿ</h2>
<p>æƒ³è±¡ä½ åœ¨ç©ä¸€æ¬¾ç½‘ç»œæ¸¸æˆï¼Œå‘ç”Ÿäº†ä»¥ä¸‹ä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>ä½ æ‰“å­—å‘äº†ä¸€å¥èŠå¤©ä¿¡æ¯ï¼šâ€œæ•‘å‘½ï¼â€ï¼ˆè¿™æ˜¯ä¸€ä¸ª<strong>å¯é åŒ…</strong>ï¼Œå¿…é¡»é€è¾¾ï¼Œä¸èƒ½ä¹±åºï¼‰ã€‚</li>
<li>ä½ çš„è§’è‰²æ­£åœ¨ç–¯ç‹‚è·‘è·¯ï¼Œæ¯ç§’å‘é€ 20 æ¬¡ä½ç½®æ›´æ–°ï¼ˆè¿™æ˜¯<strong>ä¸å¯é åŒ…</strong>ï¼Œä¸¢äº†å°±ä¸¢äº†ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-1">å¦‚æœæ²¡æœ‰é€šé“ï¼ˆTCP çš„åšæ³•ï¼‰</h3>
<p>æ‰€æœ‰çš„åŒ…è£¹éƒ½åœ¨ä¸€æ¡ç®¡é“é‡Œæ’é˜Ÿã€‚å‡è®¾ä½ å‘çš„â€œæ•‘å‘½ï¼â€è¿™ä¸ªåŒ…åœ¨ç½‘ç»œä¸Šä¸¢äº†ï¼š</p>
<ol>
<li>æ¥æ”¶ç«¯å‘ç°â€œæ•‘å‘½ï¼â€æ²¡æ”¶åˆ°ï¼Œäºæ˜¯å®ƒ<strong>æš‚åœæ¥æ”¶æ‰€æœ‰åç»­æ•°æ®</strong>ã€‚</li>
<li>å®ƒç­‰å¾…ä½ é‡ä¼ â€œæ•‘å‘½ï¼â€ã€‚</li>
<li>åœ¨è¿™æœŸé—´ï¼Œä½ å‘é€çš„é‚£äº›æœ€æ–°çš„è·‘è·¯ä½ç½®æ•°æ®ï¼ˆæœ¬æ¥åº”è¯¥å¾ˆæµç•…ï¼‰å…¨éƒ¨è¢«å µåœ¨äº†åé¢ã€‚</li>
<li>ä½ çš„æ¸¸æˆç”»é¢ç¬é—´å¡ä½ï¼ˆLagï¼‰ï¼Œç›´åˆ°â€œæ•‘å‘½ï¼â€é‡ä¼ æˆåŠŸï¼Œæ‰€æœ‰ç§¯å‹çš„ä½ç½®æ•°æ®æ‰çªç„¶æ¶Œå…¥ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯è‘—åçš„<strong>é˜Ÿå¤´é˜»å¡ (Head-of-Line Blocking)</strong>ã€‚</p>
<h3 data-id="heading-2">ENet çš„åšæ³•ï¼ˆå¤šé€šé“ï¼‰</h3>
<p>ENet å…è®¸ä½ åœ¨åŒä¸€ä¸ªè¿æ¥é‡Œå¼€è¾Ÿå¤šæ¡â€œè½¦é“â€ã€‚</p>
<ul>
<li><strong>é€šé“ 0</strong>ï¼šä¸“é—¨ç”¨æ¥å‘èŠå¤©ã€è£…å¤‡è´­ä¹°ç­‰é‡è¦ä¿¡æ¯ã€‚</li>
<li><strong>é€šé“ 1</strong>ï¼šä¸“é—¨ç”¨æ¥å‘ç©å®¶ä½ç½®ã€æœå‘ç­‰å®æ—¶ä¿¡æ¯ã€‚</li>
</ul>
<p>å³ä½¿é€šé“ 0 ä¸Šçš„â€œæ•‘å‘½ï¼â€ä¸¢åŒ…äº†æ­£åœ¨ç­‰å¾…é‡ä¼ ï¼Œé€šé“ 1 ä¸Šçš„ä½ç½®æ›´æ–°ä¾ç„¶ç•…é€šæ— é˜»ã€‚è¿™å°±æ˜¯å¤šé€šé“æœºåˆ¶çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<hr/>
<h2 data-id="heading-3">2. æ ¸å¿ƒæ¦‚å¿µï¼šé€šé“ ID</h2>
<p>åœ¨ ENet ä¸­ï¼Œé€šé“éå¸¸ç®€å•ï¼Œå®ƒä»¬åªæ˜¯ç”¨æ•°å­—ç¼–å·ï¼ˆ0, 1, 2...ï¼‰ã€‚</p>
<ul>
<li><strong>æ•°é‡é™åˆ¶</strong>ï¼šå½“ä½ åˆ›å»º Host æˆ–å‘èµ·è¿æ¥æ—¶ï¼Œä½ å·²ç»æŒ‡å®šäº†æœ€å¤§é€šé“æ•°ï¼ˆé€šå¸¸ 2 ä¸ªå°±å¤Ÿç”¨äº†ï¼Œä¸€ä¸ªæ˜¯å…³é”®é€»è¾‘ï¼Œä¸€ä¸ªæ˜¯å®æ—¶æ•°æ®ï¼‰ã€‚</li>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šé€šé“ 0 ä¸Šçš„åºåˆ—å·å’Œé€šé“ 1 ä¸Šçš„åºåˆ—å·æ˜¯äº’ä¸å¹²æ‰°çš„ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">3. å®æˆ˜ï¼šä½¿ç”¨å¤šé€šé“</h2>
<p>ä½¿ç”¨é€šé“éå¸¸ç®€å•ï¼Œå®ƒä½“ç°åœ¨å‘é€å’Œæ¥æ”¶çš„ä¸¤ä¸ªç¯èŠ‚ã€‚</p>
<h3 data-id="heading-5">3.1 ç¡®ä¿é€šé“å­˜åœ¨</h3>
<p>å›é¡¾ä¸€ä¸‹æˆ‘ä»¬åœ¨ ä¸»æœºç®¡ç† (ENetHost) æˆ– å¯¹ç­‰èŠ‚ç‚¹ (ENetPeer) ä¸­æåˆ°çš„åˆå§‹åŒ–ä»£ç ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// è¿™é‡Œçš„ '2' è¡¨ç¤ºæˆ‘ä»¬è¦åœ¨è¿™ä¸ªè¿æ¥ä¸Šåˆ†é… 2 ä¸ªé€šé“ (Channel 0 å’Œ Channel 1)</span>
ENetHost * client = enet_host_create(<span class="hljs-literal">NULL</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<h3 data-id="heading-6">3.2 åœ¨ç‰¹å®šé€šé“å‘é€æ•°æ®</h3>
<p>åœ¨è°ƒç”¨å‘é€å‡½æ•°æ—¶ï¼Œç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯ <code>channelID</code>ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// åœºæ™¯ 1ï¼šå‘é€èŠå¤©ä¿¡æ¯ (èµ°é€šé“ 0ï¼Œè¦æ±‚å¯é )</span>
ENetPacket * chatPacket = enet_packet_create(<span class="hljs-string">"Help!"</span>, <span class="hljs-number">6</span>, ENET_PACKET_FLAG_RELIABLE);

<span class="hljs-comment">// å‘é€åˆ°é€šé“ 0</span>
enet_peer_send(peer, <span class="hljs-number">0</span>, chatPacket);
</code></pre>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// åœºæ™¯ 2ï¼šå‘é€ä½ç½®ä¿¡æ¯ (èµ°é€šé“ 1ï¼Œä¸è¦æ±‚å¯é )</span>
<span class="hljs-comment">// å‡è®¾ Position æ˜¯ä¸ªç»“æ„ä½“</span>
ENetPacket * posPacket = enet_packet_create(&amp;myPos, <span class="hljs-keyword">sizeof</span>(myPos), <span class="hljs-number">0</span>);

<span class="hljs-comment">// å‘é€åˆ°é€šé“ 1</span>
enet_peer_send(peer, <span class="hljs-number">1</span>, posPacket);
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼š
è¿™å°±å¥½æ¯”ä½ åœ¨é‚®å±€å¯„ä¿¡æ—¶ï¼Œå‘Šè¯‰å·¥ä½œäººå‘˜ï¼šâ€œè¿™å°æ€¥ä»¶èµ° VIP çª—å£ï¼ˆé€šé“ 0ï¼‰ï¼Œè¿™å°å¹³ä¿¡èµ°æ™®é€šçª—å£ï¼ˆé€šé“ 1ï¼‰â€ã€‚</p>
<h3 data-id="heading-7">3.3 åœ¨æ¥æ”¶ç«¯åŒºåˆ†é€šé“</h3>
<p>å½“ä½ åœ¨äº‹ä»¶å¾ªç¯ä¸­æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯ä»å“ªä¸ªé€šé“æ¥çš„ï¼Œä»¥ä¾¿å†³å®šå¦‚ä½•å¤„ç†å®ƒã€‚</p>
<pre><code class="hljs language-c" lang="c">ENetEvent event;
<span class="hljs-keyword">while</span> (enet_host_service(host, &amp;event, <span class="hljs-number">1000</span>) &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (event.type == ENET_EVENT_TYPE_RECEIVE) {
        
        <span class="hljs-comment">// æ£€æŸ¥ channelID å­—æ®µ</span>
        <span class="hljs-keyword">if</span> (event.channelID == <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°èŠå¤©ä¿¡æ¯: %s\n"</span>, (<span class="hljs-type">char</span>*)event.packet-&gt;data);
        } 
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.channelID == <span class="hljs-number">1</span>) {
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"æ”¶åˆ°ä½ç½®æ›´æ–°æ•°æ® (å¤„ç†é€»è¾‘ç•¥)\n"</span>);
        }

        enet_packet_destroy(event.packet);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-8">4. å†…éƒ¨åŸç†è§£æ</h2>
<p>é€šé“åœ¨å†…å­˜ä¸­é•¿ä»€ä¹ˆæ ·ï¼Ÿå‘é€å‡½æ•°åˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ</p>
<h3 data-id="heading-9">4.1 é€»è¾‘æµç¨‹å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·ä»£ç 
    participant Peer as ENetPeer
    participant Ch0 as é€šé“ 0 (Chat)
    participant Ch1 as é€šé“ 1 (Pos)
    participant Net as ç½‘ç»œå±‚

    Note over User: ç”¨æˆ·å‘é€ä¸¤ä¸ªåŒ…
    User-&gt;&gt;Peer: enet_peer_send(..., 0, ChatPacket)
    User-&gt;&gt;Peer: enet_peer_send(..., 1, PosPacket)
    
    Peer-&gt;&gt;Ch0: åˆ†é…åºåˆ—å· #5
    Peer-&gt;&gt;Ch1: åˆ†é…åºåˆ—å· #99
    Note right of Peer: åºåˆ—å·æ˜¯ç‹¬ç«‹è®¡æ•°çš„

    Ch0-&gt;&gt;Net: å‘é€ ChatPacket (#5)
    Ch1-&gt;&gt;Net: å‘é€ PosPacket (#99)
    
    Note over Net: å‡è®¾ ChatPacket ä¸¢åŒ…äº†
    
    Net--&gt;&gt;User: PosPacket åˆ°è¾¾å¯¹æ–¹
    Note right of User: å¯¹æ–¹ç«‹å³å¤„ç† PosPacket (#99)&lt;br/&gt;ä¸éœ€è¦ç­‰ ChatPacket (#5)
</code></pre>
<h3 data-id="heading-10">4.2 æ·±å…¥ä»£ç  (enet.h &amp; peer.c)</h3>
<p><strong>1. ENetChannel ç»“æ„ä½“</strong>
åœ¨ <code>enet.h</code> ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>ENetChannel</code> çš„å®šä¹‰ã€‚æ¯ä¸ªé€šé“ä¸»è¦ç»´æŠ¤è‡ªå·±çš„åºåˆ—å·ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: enet/enet.h (ç®€åŒ–)</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">ENetChannel</span>
{</span>
   <span class="hljs-comment">// å‘é€å‡ºå»çš„ä¸‹ä¸€ä¸ªå¯é åŒ…åºå·</span>
   enet_uint16  outgoingReliableSequenceNumber;
   <span class="hljs-comment">// å‘é€å‡ºå»çš„ä¸‹ä¸€ä¸ªä¸å¯é åŒ…åºå·</span>
   enet_uint16  outgoingUnreliableSequenceNumber;
   
   <span class="hljs-comment">// æ¥æ”¶åˆ°çš„åºå·è®°å½•</span>
   enet_uint16  incomingReliableSequenceNumber;
   <span class="hljs-comment">// ... è¿˜æœ‰æ¥æ”¶é˜Ÿåˆ— ...</span>
} ENetChannel;
</code></pre>
<p><strong>2. å¯¹ç­‰èŠ‚ç‚¹ä¸­çš„æ•°ç»„</strong>
<code>ENetPeer</code> ç»“æ„ä½“ä¸­æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªåŠ¨æ€åˆ†é…çš„é€šé“æ•°ç»„ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: enet/enet.h (ç®€åŒ–)</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">ENetPeer</span>
{</span> 
   <span class="hljs-comment">// ...</span>
   ENetChannel * channels; <span class="hljs-comment">// é€šé“æ•°ç»„</span>
   <span class="hljs-type">size_t</span>        channelCount; <span class="hljs-comment">// é€šé“æ•°é‡ (ä¾‹å¦‚ 2)</span>
   <span class="hljs-comment">// ...</span>
} ENetPeer;
</code></pre>
<p><strong>3. å‘é€æ—¶çš„é€»è¾‘</strong>
å½“ä½ è°ƒç”¨ <code>enet_peer_send</code> æ—¶ï¼ŒENet ä¼šæ ¹æ®ä½ ä¼ å…¥çš„ <code>channelID</code> æ‰¾åˆ°å¯¹åº”çš„ç»“æ„ä½“ï¼Œå¹¶å¢åŠ <strong>è¯¥é€šé“</strong>çš„è®¡æ•°å™¨ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// file: peer.c (ç®€åŒ–é€»è¾‘ç¤ºæ„)</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">enet_peer_send</span> <span class="hljs-params">(ENetPeer * peer, enet_uint8 channelID, ENetPacket * packet)</span>
{
   <span class="hljs-comment">// 1. è·å–å¯¹åº”çš„é€šé“å¯¹è±¡</span>
   ENetChannel * channel = &amp; peer -&gt; channels [channelID];

   <span class="hljs-comment">// 2. åˆ›å»ºå‘é€å‘½ä»¤</span>
   ENetOutgoingCommand * command = ...;

   <span class="hljs-comment">// 3. æ ¸å¿ƒï¼šåˆ†é…åºåˆ—å·</span>
   <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨çš„æ˜¯ channel-&gt;... è€Œä¸æ˜¯ peer-&gt;...</span>
   <span class="hljs-comment">// è¿™ä¿è¯äº†ä¸åŒé€šé“çš„åºåˆ—å·äº’ä¸å½±å“</span>
   <span class="hljs-keyword">if</span> (packet-&gt;flags &amp; ENET_PACKET_FLAG_RELIABLE) {
       channel -&gt; outgoingReliableSequenceNumber++;
       command -&gt; reliableSequenceNumber = channel -&gt; outgoingReliableSequenceNumber;
   }
   
   <span class="hljs-comment">// ... å°†å‘½ä»¤æ”¾å…¥å‘é€é˜Ÿåˆ— ...</span>
}
</code></pre>
<h3 data-id="heading-11">4.3 ä¸ºä»€ä¹ˆè¿™èƒ½é˜²æ­¢é˜»å¡ï¼Ÿ</h3>
<p>åœ¨æ¥æ”¶ç«¯ï¼ŒENet åœ¨æ”¶åˆ°åŒ…æ—¶ä¼šæ£€æŸ¥åºåˆ—å·ï¼š</p>
<ul>
<li><strong>å¯¹äºé€šé“ 0</strong>ï¼šå¦‚æœæ”¶åˆ°äº†åºå· #6ï¼Œä½†è¿˜æ²¡æ”¶åˆ° #5ï¼ŒENet ä¼šæŠŠ #6 å…ˆå­˜èµ·æ¥ï¼Œç›´åˆ° #5 åˆ°è¾¾ã€‚è¿™å«<strong>æœ‰åº (Sequenced)</strong>ã€‚</li>
<li><strong>å¯¹äºé€šé“ 1</strong>ï¼šå¦‚æœæ”¶åˆ°äº†åºå· #100ï¼Œå®ƒå®Œå…¨ä¸å…³å¿ƒé€šé“ 0 ç¼ºäº†ä»€ä¹ˆã€‚åªè¦é€šé“ 1 è‡ªå·±çš„åºå·æ˜¯å¯¹çš„ï¼ˆæˆ–è€…å¯¹äºä¸å¯é åŒ…ï¼Œç›´æ¥ä¸¢ç»™ç”¨æˆ·ï¼‰ï¼Œå®ƒå°±ä¼šç«‹å³è§¦å‘ <code>ENET_EVENT_TYPE_RECEIVE</code>ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯å¤šé€šé“æœºåˆ¶å®ç°â€œå¹¶è¡Œä¼ è¾“â€çš„ç§˜å¯†ã€‚</p>
<hr/>
<h2 data-id="heading-12">5. æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>ä¸è¦å¼€å¤ªå¤šé€šé“</strong>ï¼šè™½ç„¶ä½ å¯ä»¥å¼€ 255 ä¸ªé€šé“ï¼Œä½†é€šå¸¸ 2 åˆ° 4 ä¸ªå°±è¶³å¤Ÿäº†ã€‚é€šé“è¶Šå¤šï¼Œå†…å­˜å¼€é”€ï¼ˆè™½ç„¶å¾ˆå°ï¼‰å’Œç®¡ç†å¤æ‚åº¦ä¹Ÿä¼šå¢åŠ ã€‚</li>
<li><strong>åˆ†ç±»ç®¡ç†</strong>ï¼š
<ul>
<li><strong>Channel 0</strong>: å…³é”®ç³»ç»Ÿæ¶ˆæ¯ï¼ˆç™»å½•ã€æ–­çº¿ã€èŠå¤©ã€äº¤æ˜“ï¼‰ã€‚å¿…é¡»å¯é ã€‚</li>
<li><strong>Channel 1</strong>: çŠ¶æ€åŒæ­¥ï¼ˆç§»åŠ¨ã€æ—‹è½¬ï¼‰ã€‚ä¸å¯é ï¼Œè¿½æ±‚å®æ—¶ã€‚</li>
<li><strong>Channel 2</strong>: å¤§æ–‡ä»¶ä¼ è¾“ï¼ˆå¦‚åœ°å›¾ä¸‹è½½ï¼‰ã€‚å¯é ï¼Œä½†ä¼˜å…ˆçº§ä½ï¼ˆè¿™æ˜¯è¿›é˜¶ç”¨æ³•ï¼Œç»“åˆå¸¦å®½é™åˆ¶ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>ä¸¤ç«¯ä¸€è‡´</strong>ï¼šç¡®ä¿å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨åˆå§‹åŒ–æ—¶ï¼Œåˆ†é…çš„ <code>channelCount</code> æ˜¯ä¸€è‡´çš„ï¼Œæˆ–è€…è‡³å°‘å‘é€æ–¹çš„ ID ä¸è¦è¶…è¿‡æ¥æ”¶æ–¹çš„æœ€å¤§ IDï¼Œå¦åˆ™å‘é€ä¼šå¤±è´¥ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-13">6. æ€»ç»“</h2>
<p>åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬å­¦ä¹ äº†ï¼š</p>
<ul>
<li><strong>å¤šé€šé“ (Channels)</strong> æ˜¯ä¸ºäº†è§£å†³â€œé˜Ÿå¤´é˜»å¡â€é—®é¢˜ï¼Œè®©ä¸åŒç±»å‹çš„æ•°æ®äº’ä¸å¹²æ‰°ã€‚</li>
<li>é€šé“æœ¬è´¨ä¸Šæ˜¯ç‹¬ç«‹è®¡æ•°çš„<strong>åºåˆ—å·ç®¡ç†å™¨</strong>ã€‚</li>
<li>ä½¿ç”¨ <code>enet_peer_send</code> çš„ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡å®šæ•°æ®èµ°å“ªæ¡â€œè½¦é“â€ã€‚</li>
<li>åœ¨æ¥æ”¶ç«¯çš„ <code>event.channelID</code> ä¸­åŒºåˆ†æ•°æ®æ¥æºã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬çš„æ•°æ®åŒ…å·²ç»å¯ä»¥é«˜æ•ˆã€æœ‰åºï¼ˆæˆ–æ— åºï¼‰åœ°åœ¨ç½‘ç»œä¸­ç©¿æ¢­äº†ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬æ€ä¹ˆå»ä¸æ–­åœ°ä»ç½‘ç»œä¸­â€œæâ€å‡ºè¿™äº›æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬çš„ç¨‹åºæ€ä¹ˆçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥è¯»æ•°æ®ï¼Œä»€ä¹ˆæ—¶å€™è¯¥å‘æ•°æ®ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„]]></title>    <link>https://juejin.cn/post/7575083657994649627</link>    <guid>https://juejin.cn/post/7575083657994649627</guid>    <pubDate>2025-11-23T02:36:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994649627" data-draft-id="7575102209605615642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„"/> <!----> <meta itemprop="datePublished" content="2025-11-23T02:36:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯¹è±¡å­˜å‚¨ä¸RustFS"/> <meta itemprop="url" content="https://juejin.cn/user/652466093570057"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/652466093570057/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯¹è±¡å­˜å‚¨ä¸RustFS
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:36:58.000Z" title="Sun Nov 23 2025 02:36:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å®æˆ˜ï¼šåŸºäºRustFS+K8sï¼Œæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„</h2>
<blockquote>
<p>2025å¹´ï¼Œäº‘åŸç”Ÿå­˜å‚¨é¢†åŸŸè¿æ¥é‡å¤§çªç ´ã€‚åŸºäºRustè¯­è¨€æ„å»ºçš„<strong>RustFS</strong>å‡­å€Ÿå…¶â€‹<strong>4Kéšæœºè¯»1,580K IOPS</strong>â€‹ï¼ˆæ¯”MinIOå¿«â€‹<strong>42%</strong> ï¼‰çš„æ€§èƒ½è¡¨ç°ï¼Œä¸Kubernetesæ·±åº¦é›†æˆï¼Œä¸ºä¼ä¸šæä¾›äº†ä¸€å¥—é«˜æ€§èƒ½ã€é«˜å¯ç”¨çš„äº‘åŸç”Ÿå­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€RustFSæ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä½•æ˜¯äº‘åŸç”Ÿå­˜å‚¨çš„ç†æƒ³é€‰æ‹©ï¼Ÿ</h3>
<p>åœ¨å¼€å§‹å®æˆ˜ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£RustFSåœ¨äº‘åŸç”Ÿç¯å¢ƒä¸­çš„ç‹¬ç‰¹ä»·å€¼ã€‚ä¸ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆç›¸æ¯”ï¼ŒRustFSåœ¨æ€§èƒ½ã€èµ„æºå ç”¨å’Œå…¼å®¹æ€§æ–¹é¢å±•ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-2">1.1 æ€§èƒ½æŒ‡æ ‡å…¨é¢é¢†å…ˆ</h4>
<p>æ ¹æ®åŸºå‡†æµ‹è¯•æ•°æ®ï¼ŒRustFSåœ¨å…³é”®æ€§èƒ½æŒ‡æ ‡ä¸Šå®ç°å…¨é¢çªç ´ï¼š</p>









































<table><thead><tr><th><strong>æ€§èƒ½ç»´åº¦</strong></th><th><strong>RustFS</strong></th><th><strong>ä¼ ç»Ÿå­˜å‚¨æ–¹æ¡ˆ</strong></th><th><strong>ä¼˜åŠ¿å¹…åº¦</strong></th></tr></thead><tbody><tr><td>4Kéšæœºè¯»IOPS(QD128)</td><td>1,580K</td><td>1,112K</td><td><strong>+42%</strong></td></tr><tr><td>å†…å­˜å ç”¨(ç©ºé—²çŠ¶æ€)</td><td>&lt;100MB</td><td>~300MB</td><td><strong>å‡å°‘67%</strong></td></tr><tr><td>å¯åŠ¨æ—¶é—´(å•èŠ‚ç‚¹)</td><td>8ç§’</td><td>45ç§’+</td><td><strong>å¿«5.6å€</strong></td></tr><tr><td>S3åè®®å…¼å®¹æ€§</td><td>100%å…¼å®¹</td><td>éƒ¨åˆ†å…¼å®¹</td><td><strong>æ— ç¼è¿ç§»</strong></td></tr><tr><td>è®¸å¯è¯å‹å¥½åº¦</td><td>Apache 2.0</td><td>AGPLv3ç­‰</td><td><strong>å•†ä¸šå‹å¥½</strong></td></tr></tbody></table>
<p>RustFSçš„å“è¶Šæ€§èƒ½æºäºRustè¯­è¨€çš„<strong>é›¶æˆæœ¬æŠ½è±¡</strong>å’Œ<strong>å†…å­˜å®‰å…¨</strong>ç‰¹æ€§ã€‚å…¶æ‰€æœ‰æƒæ¨¡å‹åœ¨ç¼–è¯‘æœŸæ¶ˆé™¤å†…å­˜å®‰å…¨é—®é¢˜ï¼Œæ— éœ€åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå½»åº•é¿å…äº†æ€§èƒ½æŠ–åŠ¨ã€‚</p>
<h4 data-id="heading-3">1.2 äº‘åŸç”Ÿé€‚é…ä¼˜åŠ¿</h4>
<p>RustFSåœ¨è®¾è®¡ä¹‹åˆå°±å……åˆ†è€ƒè™‘äº‘åŸç”Ÿç¯å¢ƒéœ€æ±‚ï¼š</p>
<ul>
<li>â€‹<strong>è½»é‡çº§è®¾è®¡</strong>â€‹ï¼šäºŒè¿›åˆ¶æ–‡ä»¶&lt;100MBï¼Œé€‚åˆè¾¹ç¼˜è®¡ç®—å’Œèµ„æºå—é™ç¯å¢ƒ</li>
<li>â€‹<strong>ARM/x86åŒæ¶æ„æ”¯æŒ</strong>ï¼šå®Œç¾é€‚é…å¤šæ¶æ„K8sé›†ç¾¤</li>
<li>â€‹<strong>å®¹å™¨åŒ–ä¼˜å…ˆ</strong>ï¼šæä¾›å®˜æ–¹Dockeré•œåƒï¼Œæ”¯æŒå¤šç§ç¼–æ’å·¥å…·</li>
<li>â€‹<strong>å£°æ˜å¼API</strong>ï¼šä¸K8sçš„å£°æ˜å¼ç®¡ç†ç†å¿µé«˜åº¦å¥‘åˆ</li>
</ul>
<p>æŸå¤§å‹ç”µå•†å¹³å°å®æµ‹æ•°æ®æ˜¾ç¤ºï¼Œå°†ç”Ÿäº§ç¯å¢ƒä»ä¼ ç»Ÿå­˜å‚¨è¿ç§»åˆ°RustFSåï¼ŒAIæ¨¡å‹è®­ç»ƒæ—¶é—´ç¼©çŸ­â€‹<strong>30%</strong> â€‹ï¼Œèµ„æºæˆæœ¬é™ä½â€‹<strong>40%</strong> ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç¯å¢ƒå‡†å¤‡ä¸é›†ç¾¤è§„åˆ’</h3>
<h4 data-id="heading-5">2.1 ç¡¬ä»¶ä¸è½¯ä»¶è¦æ±‚</h4>
<p>æ„å»ºé«˜å¯ç”¨RustFSé›†ç¾¤éœ€è¦æ»¡è¶³ä»¥ä¸‹åŸºç¡€è¦æ±‚ï¼š</p>
<p>â€‹<strong>ç¡¬ä»¶é…ç½®æ¨è</strong>ï¼š</p>
<ul>
<li>å¼€å‘ç¯å¢ƒï¼š4æ ¸CPUï¼Œ8GBå†…å­˜ï¼Œ50GB SSDå­˜å‚¨</li>
<li>ç”Ÿäº§ç¯å¢ƒï¼š8+æ ¸CPUï¼Œ16+GBå†…å­˜ï¼Œ100+GB NVMe SSDå­˜å‚¨</li>
<li>ç½‘ç»œï¼šèŠ‚ç‚¹é—´å»¶è¿Ÿ&lt;5msï¼Œä¸‡å…†ç½‘ç»œæ¨è</li>
</ul>
<p>â€‹<strong>è½¯ä»¶ä¾èµ–</strong>ï¼š</p>
<ul>
<li>Kubernetesï¼šv1.20+ï¼ˆæ¨èv1.24+ï¼‰</li>
<li>å®¹å™¨è¿è¡Œæ—¶ï¼šDocker 20.10+æˆ–containerd 1.4+</li>
<li>ç½‘ç»œæ’ä»¶ï¼šCalicoã€Flannelç­‰ï¼ˆéœ€æ”¯æŒNetworkPolicyï¼‰</li>
<li>è´Ÿè½½å‡è¡¡ï¼šMetalLBã€äº‘å‚å•†LBæˆ–HAProxy</li>
</ul>
<h4 data-id="heading-6">2.2 é›†ç¾¤æ¶æ„è®¾è®¡</h4>
<p>é«˜å¯ç”¨RustFSé›†ç¾¤æ¨èé‡‡ç”¨å¤šèŠ‚ç‚¹éƒ¨ç½²æ¶æ„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Master Node   â”‚    â”‚   Master Node   â”‚    â”‚   Master Node   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚    â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚    â”‚ â”‚  API <span class="hljs-built_in">Server</span> â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                                         â”‚
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚  Load       â”‚
                          â”‚ Balancer    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                  â”‚                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ RustFS      â”‚    â”‚ RustFS      â”‚    â”‚ RustFS      â”‚
    â”‚ Node <span class="hljs-number">1</span>     â”‚    â”‚ Node <span class="hljs-number">2</span>     â”‚    â”‚ Node <span class="hljs-number">3</span>     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>è¿™ç§æ¶æ„ç¡®ä¿æ§åˆ¶å¹³é¢å’Œæ•°æ®å¹³é¢å‡å®ç°é«˜å¯ç”¨ï¼Œå•ç‚¹æ•…éšœä¸ä¼šå½±å“é›†ç¾¤æ•´ä½“æœåŠ¡èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-7">ä¸‰ã€Kubernetesé›†ç¾¤éƒ¨ç½²å®æˆ˜</h3>
<h4 data-id="heading-8">3.1 åŸºç¡€ç¯å¢ƒé…ç½®</h4>
<p>é¦–å…ˆç¡®ä¿Kubernetesé›†ç¾¤å°±ç»ªï¼Œå¹¶é…ç½®å¿…è¦çš„å­˜å‚¨ç±»ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># rustfs-storageclass.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">storage.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">StorageClass</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-local-storage</span>
<span class="hljs-attr">provisioner:</span> <span class="hljs-string">kubernetes.io/no-provisioner</span>
<span class="hljs-attr">volumeBindingMode:</span> <span class="hljs-string">WaitForFirstConsumer</span>
<span class="hljs-attr">allowVolumeExpansion:</span> <span class="hljs-literal">true</span>
</code></pre>
<p>åº”ç”¨é…ç½®ï¼š</p>
<pre><code class="hljs">kubectl apply -f rustfs-storageclass.yaml
</code></pre>
<h4 data-id="heading-9">3.2 Helmå›¾è¡¨éƒ¨ç½²RustFSé›†ç¾¤</h4>
<p>Helmæ˜¯éƒ¨ç½²RustFSåˆ°K8sé›†ç¾¤çš„æ¨èæ–¹å¼ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†éƒ¨ç½²æµç¨‹ï¼š</p>
<p>â€‹<strong>æ·»åŠ Helmä»“åº“å¹¶åˆ›å»ºé…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># æ·»åŠ Helmä»“åº“ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
helm repo <span class="hljs-keyword">add</span> rustfs https:<span class="hljs-comment">//charts.rustfs.io</span>
helm repo update
</code></pre>
<p>åˆ›å»ºè‡ªå®šä¹‰values.yamlé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># values.yaml</span>
<span class="hljs-attr">global:</span>
  <span class="hljs-attr">storageClass:</span> <span class="hljs-string">"rustfs-local-storage"</span>
  
<span class="hljs-attr">replicaCount:</span> <span class="hljs-number">3</span>

<span class="hljs-attr">image:</span>
  <span class="hljs-attr">repository:</span> <span class="hljs-string">rustfs/rustfs</span>
  <span class="hljs-attr">tag:</span> <span class="hljs-string">latest</span>
  <span class="hljs-attr">pullPolicy:</span> <span class="hljs-string">IfNotPresent</span>

<span class="hljs-attr">resources:</span>
  <span class="hljs-attr">limits:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"2"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"4Gi"</span>
  <span class="hljs-attr">requests:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-string">"1"</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-string">"2Gi"</span>

<span class="hljs-attr">persistence:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">size:</span> <span class="hljs-string">"100Gi"</span>
  <span class="hljs-attr">accessMode:</span> <span class="hljs-string">ReadWriteOnce</span>

<span class="hljs-attr">configuration:</span>
  <span class="hljs-attr">accessKey:</span> <span class="hljs-string">"admin"</span>
  <span class="hljs-attr">secretKey:</span> <span class="hljs-string">"your_strong_password_here"</span>
  <span class="hljs-attr">consoleEnable:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">regions:</span> [<span class="hljs-string">"us-east-1"</span>]

<span class="hljs-attr">service:</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span>
  <span class="hljs-attr">apiPort:</span> <span class="hljs-number">9000</span>
  <span class="hljs-attr">consolePort:</span> <span class="hljs-number">9001</span>

<span class="hljs-attr">ingress:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">nginx.ingress.kubernetes.io/proxy-body-size:</span> <span class="hljs-string">"1024m"</span>
  <span class="hljs-attr">hosts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">host:</span> <span class="hljs-string">rustfs.example.com</span>
      <span class="hljs-attr">paths:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/</span>
          <span class="hljs-attr">pathType:</span> <span class="hljs-string">Prefix</span>

<span class="hljs-comment"># é«˜å¯ç”¨é…ç½®</span>
<span class="hljs-attr">topologySpreadConstraints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">maxSkew:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
    <span class="hljs-attr">whenUnsatisfiable:</span> <span class="hljs-string">DoNotSchedule</span>

<span class="hljs-attr">affinity:</span>
  <span class="hljs-attr">podAntiAffinity:</span>
    <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">podAffinityTerm:</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchExpressions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span>
            <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
            <span class="hljs-attr">values:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"kubernetes.io/hostname"</span>
</code></pre>
<p>â€‹<strong>å®‰è£…RustFSé›†ç¾¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºå‘½åç©ºé—´</span>
kubectl create namespace rustfs

<span class="hljs-comment"># å®‰è£…RustFSé›†ç¾¤</span>
helm install rustfs-cluster rustfs/rustfs \
  --namespace rustfs \
  --values values.yaml \
  --<span class="hljs-built_in">wait</span> \
  --<span class="hljs-built_in">timeout</span> 10m
</code></pre>
<h4 data-id="heading-10">3.3 éªŒè¯éƒ¨ç½²çŠ¶æ€</h4>
<p>éƒ¨ç½²å®Œæˆåï¼Œéœ€è¦å…¨é¢éªŒè¯é›†ç¾¤çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹PodçŠ¶æ€</span>
kubectl get pods -n rustfs -o wide -w

<span class="hljs-comment"># æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
kubectl get svc -n rustfs

<span class="hljs-comment"># æŸ¥çœ‹æŒä¹…å·å£°æ˜</span>
kubectl get pvc -n rustfs

<span class="hljs-comment"># æ£€æŸ¥é›†ç¾¤æ—¥å¿—</span>
kubectl logs -n rustfs deployment/rustfs-cluster --<span class="hljs-built_in">tail</span>=100

<span class="hljs-comment"># éªŒè¯èŠ‚ç‚¹å¥åº·çŠ¶æ€</span>
kubectl <span class="hljs-built_in">exec</span> -n rustfs deployment/rustfs-cluster -- rustfs-admin cluster info
</code></pre>
<p>é¢„æœŸè¾“å‡ºåº”æ˜¾ç¤ºæ‰€æœ‰Podå¤„äºRunningçŠ¶æ€ï¼ŒæœåŠ¡æ­£å¸¸æš´éœ²ï¼Œå­˜å‚¨å·æ­£ç¡®æŒ‚è½½ã€‚</p>
<h3 data-id="heading-11">å››ã€é«˜å¯ç”¨ä¸æ€§èƒ½ä¼˜åŒ–é…ç½®</h3>
<h4 data-id="heading-12">4.1 æ‹“æ‰‘åˆ†å¸ƒçº¦æŸé…ç½®</h4>
<p>ä¸ºç¡®ä¿RustFS Podåœ¨é›†ç¾¤ä¸­å‡åŒ€åˆ†å¸ƒï¼Œéœ€è¦é…ç½®æ‹“æ‰‘åˆ†å¸ƒçº¦æŸï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># topology-spread.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">topologySpreadConstraints:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">maxSkew:</span> <span class="hljs-number">1</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
        <span class="hljs-attr">whenUnsatisfiable:</span> <span class="hljs-string">DoNotSchedule</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchLabels:</span>
            <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
</code></pre>
<p>è¿™ç§é…ç½®ç¡®ä¿RustFSå®ä¾‹åœ¨ä¸åŒæ•…éšœåŸŸï¼ˆå¦‚å¯ç”¨åŒºï¼‰é—´å‡åŒ€åˆ†å¸ƒï¼Œæé«˜é›†ç¾¤å®¹é”™èƒ½åŠ›ã€‚</p>
<h4 data-id="heading-13">4.2 èµ„æºé…é¢ä¸é™åˆ¶</h4>
<p>ä¸ºé˜²æ­¢èµ„æºç«äº‰ï¼Œéœ€è¦è®¾ç½®åˆç†çš„èµ„æºé…é¢ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># resource-quota.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ResourceQuota</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-resource-quota</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">hard:</span>
    <span class="hljs-attr">requests.cpu:</span> <span class="hljs-string">"8"</span>
    <span class="hljs-attr">requests.memory:</span> <span class="hljs-string">"16Gi"</span>
    <span class="hljs-attr">limits.cpu:</span> <span class="hljs-string">"16"</span>
    <span class="hljs-attr">limits.memory:</span> <span class="hljs-string">"32Gi"</span>
    <span class="hljs-attr">persistentvolumeclaims:</span> <span class="hljs-string">"10"</span>
    <span class="hljs-attr">requests.storage:</span> <span class="hljs-string">"1Ti"</span>
</code></pre>
<h4 data-id="heading-14">4.3 è‡ªåŠ¨ä¼¸ç¼©é…ç½®</h4>
<p>æ ¹æ®è´Ÿè½½åŠ¨æ€è°ƒæ•´RustFSå®ä¾‹æ•°é‡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># hpa.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">autoscaling/v2</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">HorizontalPodAutoscaler</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-hpa</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">scaleTargetRef:</span>
    <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">minReplicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">maxReplicas:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">metrics:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Resource</span>
    <span class="hljs-attr">resource:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">cpu</span>
      <span class="hljs-attr">target:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">Utilization</span>
        <span class="hljs-attr">averageUtilization:</span> <span class="hljs-number">70</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Resource</span>
    <span class="hljs-attr">resource:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">memory</span>
      <span class="hljs-attr">target:</span>
        <span class="hljs-attr">type:</span> <span class="hljs-string">Utilization</span>
        <span class="hljs-attr">averageUtilization:</span> <span class="hljs-number">80</span>
  <span class="hljs-attr">behavior:</span>
    <span class="hljs-attr">scaleDown:</span>
      <span class="hljs-attr">stabilizationWindowSeconds:</span> <span class="hljs-number">300</span>
      <span class="hljs-attr">policies:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">Percent</span>
        <span class="hljs-attr">value:</span> <span class="hljs-number">50</span>
        <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">60</span>
</code></pre>
<h3 data-id="heading-15">äº”ã€ç½‘ç»œä¸å®‰å…¨é…ç½®</h3>
<h4 data-id="heading-16">5.1 ç½‘ç»œç­–ç•¥é…ç½®</h4>
<p>é™åˆ¶ä¸å¿…è¦çš„ç½‘ç»œè®¿é—®ï¼Œå¢å¼ºå®‰å…¨æ€§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># network-policy.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">NetworkPolicy</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-network-policy</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">podSelector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">policyTypes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Ingress</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Egress</span>
  <span class="hljs-attr">ingress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">9001</span>
    <span class="hljs-attr">from:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">namespaceSelector:</span> {}
  <span class="hljs-attr">egress:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">to:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">ipBlock:</span>
        <span class="hljs-attr">cidr:</span> <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-string">/0</span>
</code></pre>
<h4 data-id="heading-17">5.2 TLSè¯ä¹¦é…ç½®</h4>
<p>ä¸ºRustFSæœåŠ¡é…ç½®HTTPSåŠ å¯†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨Let's Encryptæˆ–å†…éƒ¨CAï¼‰</span>
<span class="hljs-string">openssl</span> <span class="hljs-string">req</span> <span class="hljs-string">-x509</span> <span class="hljs-string">-nodes</span> <span class="hljs-string">-days</span> <span class="hljs-number">365</span> <span class="hljs-string">-newkey</span> <span class="hljs-string">rsa:2048</span> <span class="hljs-string">\</span>
  <span class="hljs-string">-keyout</span> <span class="hljs-string">tls.key</span> <span class="hljs-string">-out</span> <span class="hljs-string">tls.crt</span> <span class="hljs-string">-subj</span> <span class="hljs-string">"/CN=rustfs.example.com"</span>

<span class="hljs-comment"># åˆ›å»ºK8s Secret</span>
<span class="hljs-string">kubectl</span> <span class="hljs-string">create</span> <span class="hljs-string">secret</span> <span class="hljs-string">tls</span> <span class="hljs-string">rustfs-tls</span> <span class="hljs-string">\</span>
  <span class="hljs-string">--key</span> <span class="hljs-string">tls.key</span> <span class="hljs-string">\</span>
  <span class="hljs-string">--cert</span> <span class="hljs-string">tls.crt</span> <span class="hljs-string">\</span>
  <span class="hljs-string">-n</span> <span class="hljs-string">rustfs</span>
</code></pre>
<h3 data-id="heading-18">å…­ã€å­˜å‚¨ä¼˜åŒ–ä¸å®è·µ</h3>
<h4 data-id="heading-19">6.1 æŒä¹…åŒ–å­˜å‚¨é…ç½®</h4>
<p>RustFSéœ€è¦å¯é çš„æŒä¹…åŒ–å­˜å‚¨ä¿éšœæ•°æ®å®‰å…¨ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># pv-local-ssd.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">PersistentVolume</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-pv-01</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">type:</span> <span class="hljs-string">local</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">capacity:</span>
    <span class="hljs-attr">storage:</span> <span class="hljs-string">100Gi</span>
  <span class="hljs-attr">accessModes:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">ReadWriteOnce</span>
  <span class="hljs-attr">persistentVolumeReclaimPolicy:</span> <span class="hljs-string">Retain</span>
  <span class="hljs-attr">storageClassName:</span> <span class="hljs-string">rustfs-local-storage</span>
  <span class="hljs-attr">local:</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/mnt/ssd/rustfs01</span>
  <span class="hljs-attr">nodeAffinity:</span>
    <span class="hljs-attr">required:</span>
      <span class="hljs-attr">nodeSelectorTerms:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">matchExpressions:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">kubernetes.io/hostname</span>
          <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
          <span class="hljs-attr">values:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">node-01</span>
</code></pre>
<h4 data-id="heading-20">6.2 æ•°æ®å¤‡ä»½ç­–ç•¥</h4>
<p>å®ç°è‡ªåŠ¨åŒ–çš„æ•°æ®å¤‡ä»½æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># backup-cronjob.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">CronJob</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-backup</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">schedule:</span> <span class="hljs-string">"0 2 * * *"</span>
  <span class="hljs-attr">jobTemplate:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">template:</span>
        <span class="hljs-attr">spec:</span>
          <span class="hljs-attr">containers:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup</span>
            <span class="hljs-attr">image:</span> <span class="hljs-string">alpine/aws-cli</span>
            <span class="hljs-attr">command:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">/bin/sh</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">-c</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">|
              # å¤‡ä»½å…ƒæ•°æ®
              aws s3 sync s3://metadata-bucket /backup-metadata \
                --endpoint-url http://rustfs-cluster:9000
</span>              
              <span class="hljs-comment"># åˆ›å»ºæ—¶é—´æˆ³æ ‡è®°</span>
              <span class="hljs-string">echo</span> <span class="hljs-string">"Backup completed at $(date)"</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">/backup-status/status.txt</span>
            <span class="hljs-attr">volumeMounts:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup-storage</span>
              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/backup-metadata</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">status-storage</span>
              <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/backup-status</span>
          <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">OnFailure</span>
          <span class="hljs-attr">volumes:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">backup-storage</span>
            <span class="hljs-attr">persistentVolumeClaim:</span>
              <span class="hljs-attr">claimName:</span> <span class="hljs-string">rustfs-backup-pvc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">status-storage</span>
            <span class="hljs-attr">persistentVolumeClaim:</span>
              <span class="hljs-attr">claimName:</span> <span class="hljs-string">backup-status-pvc</span>
</code></pre>
<h3 data-id="heading-21">ä¸ƒã€ç›‘æ§ä¸è¿ç»´</h3>
<h4 data-id="heading-22">7.1 ç›‘æ§ä½“ç³»æ­å»º</h4>
<p>é›†æˆPrometheuså’ŒGrafanaå®ç°å…¨æ–¹ä½ç›‘æ§ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># service-monitor.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">monitoring.coreos.com/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ServiceMonitor</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-monitor</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">rustfs</span>
  <span class="hljs-attr">endpoints:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">api</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">scrapeTimeout:</span> <span class="hljs-string">25s</span>
    <span class="hljs-attr">path:</span> <span class="hljs-string">/metrics</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">port:</span> <span class="hljs-string">console</span>
    <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
    <span class="hljs-attr">scrapeTimeout:</span> <span class="hljs-string">25s</span>
</code></pre>
<h4 data-id="heading-23">7.2 æ—¥å¿—æ”¶é›†é…ç½®</h4>
<p>å®ç°é›†ä¸­å¼æ—¥å¿—ç®¡ç†ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># logging-sidecar.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-cluster</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">rustfs</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">rustfs/rustfs:latest</span>
        <span class="hljs-comment"># ... ä¸»å®¹å™¨é…ç½®</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">log-sidecar</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">fluent/fluentd:latest</span>
        <span class="hljs-attr">volumeMounts:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-logs</span>
          <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/log/rustfs</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">FLUENTD_CONF</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">|
            &lt;source&gt;
              @type tail
              path /var/log/rustfs/rustfs.log
              pos_file /var/log/rustfs/rustfs.log.pos
              tag rustfs
              format none
            &lt;/source&gt;
            &lt;match rustfs&gt;
              @type forward
              &lt;server&gt;
                host elasticsearch-logging
                port 9200
              &lt;/server&gt;
            &lt;/match&gt;
</span>      <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">rustfs-logs</span>
        <span class="hljs-attr">emptyDir:</span> {}
</code></pre>
<h3 data-id="heading-24">å…«ã€æ•…éšœæ’æŸ¥ä¸æ€§èƒ½è°ƒä¼˜</h3>
<h4 data-id="heading-25">8.1 å¸¸è§é—®é¢˜è¯Šæ–­</h4>
<p>â€‹<strong>Podå¯åŠ¨å¤±è´¥æ’æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹è¯¦ç»†äº‹ä»¶ä¿¡æ¯</span>
kubectl describe pod -n rustfs &lt;pod-name&gt;

<span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span>
kubectl logs -n rustfs &lt;pod-name&gt; -c rustfs

<span class="hljs-comment"># æ£€æŸ¥èµ„æºä½¿ç”¨æƒ…å†µ</span>
kubectl top pods -n rustfs
</code></pre>
<p>â€‹<strong>æŒä¹…å·é—®é¢˜æ’æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥å­˜å‚¨ç±»</span>
kubectl get storageclass

<span class="hljs-comment"># æ£€æŸ¥æŒä¹…å·å£°æ˜çŠ¶æ€</span>
kubectl get pvc -n rustfs

<span class="hljs-comment"># æŸ¥çœ‹æŒä¹…å·è¯¦æƒ…</span>
kubectl get pv
</code></pre>
<h4 data-id="heading-26">8.2 æ€§èƒ½è°ƒä¼˜å»ºè®®</h4>
<p>æ ¹æ®å®é™…è´Ÿè½½ä¼˜åŒ–RustFSé…ç½®ï¼š</p>
<p>â€‹<strong>é«˜æ€§èƒ½é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">configuration:</span>
  <span class="hljs-attr">cacheSize:</span> <span class="hljs-string">"2Gi"</span>
  <span class="hljs-attr">poolSize:</span> <span class="hljs-number">16</span>
  <span class="hljs-attr">compression:</span> <span class="hljs-string">"lz4"</span>
  <span class="hljs-attr">maxConcurrentUploads:</span> <span class="hljs-number">100</span>
  <span class="hljs-attr">multipartThreshold:</span> <span class="hljs-string">"64MB"</span>
</code></pre>
<p>â€‹<strong>ç½‘ç»œä¼˜åŒ–å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># é’ˆå¯¹é«˜é€Ÿç½‘ç»œç¯å¢ƒä¼˜åŒ–</span>
<span class="hljs-attr">env:</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_NETWORK_THREADS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"16"</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_IO_THREADS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"32"</span>
<span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">RUSTFS_MAX_CONNECTIONS</span>
  <span class="hljs-attr">value:</span> <span class="hljs-string">"1000"</span>
</code></pre>
<h3 data-id="heading-27">ä¹ã€ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-28">9.1 å®‰å…¨åŠ å›ºå»ºè®®</h4>
<ul>
<li>â€‹<strong>å®šæœŸè½®æ¢å¯†é’¥</strong>ï¼šæ¯æœˆæ›´æ–°è®¿é—®å¯†é’¥</li>
<li>â€‹<strong>å¯ç”¨TLSåŠ å¯†</strong>ï¼šä¸ºæ‰€æœ‰æµé‡å¯ç”¨HTTPS</li>
<li>â€‹<strong>ç½‘ç»œéš”ç¦»</strong>ï¼šä½¿ç”¨ç½‘ç»œç­–ç•¥é™åˆ¶è®¿é—®æ¥æº</li>
<li>â€‹<strong>å®¡è®¡æ—¥å¿—</strong>ï¼šå¯ç”¨å¹¶å®šæœŸæ£€æŸ¥å®¡è®¡æ—¥å¿—</li>
<li>â€‹<strong>å®šæœŸå¤‡ä»½</strong>ï¼šå®æ–½3-2-1å¤‡ä»½ç­–ç•¥ï¼ˆ3ä¸ªå‰¯æœ¬ï¼Œ2ç§ä»‹è´¨ï¼Œ1ä¸ªç¦»çº¿ï¼‰</li>
</ul>
<h4 data-id="heading-29">9.2 é«˜å¯ç”¨æ¶æ„å»ºè®®</h4>
<p>å¯¹äºå…³é”®ä¸šåŠ¡åœºæ™¯ï¼Œæ¨èé‡‡ç”¨å¤šå¯ç”¨åŒºéƒ¨ç½²ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¤šå¯ç”¨åŒºäº²å’Œæ€§é…ç½®</span>
<span class="hljs-attr">affinity:</span>
  <span class="hljs-attr">podAntiAffinity:</span>
    <span class="hljs-attr">preferredDuringSchedulingIgnoredDuringExecution:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">weight:</span> <span class="hljs-number">100</span>
      <span class="hljs-attr">podAffinityTerm:</span>
        <span class="hljs-attr">labelSelector:</span>
          <span class="hljs-attr">matchExpressions:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">app</span>
            <span class="hljs-attr">operator:</span> <span class="hljs-string">In</span>
            <span class="hljs-attr">values:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">rustfs</span>
        <span class="hljs-attr">topologyKey:</span> <span class="hljs-string">"topology.kubernetes.io/zone"</span>
</code></pre>
<h4 data-id="heading-30">9.3 å®¹é‡è§„åˆ’ä¸æ‰©å±•</h4>
<p>â€‹<strong>å®¹é‡è§„åˆ’å»ºè®®</strong>ï¼š</p>
<ul>
<li>å…ƒæ•°æ®èŠ‚ç‚¹ï¼šæ¯100ä¸‡å¯¹è±¡éœ€è¦1GBå†…å­˜</li>
<li>æ•°æ®èŠ‚ç‚¹ï¼šæ ¹æ®å®é™…å­˜å‚¨éœ€æ±‚é…ç½®ï¼Œé¢„ç•™20%æ‰©å±•ç©ºé—´</li>
<li>ç½‘ç»œå¸¦å®½ï¼šç¡®ä¿å†…ç½‘å¸¦å®½æ»¡è¶³å³°å€¼ä¼ è¾“éœ€æ±‚</li>
</ul>
<p>â€‹<strong>æ°´å¹³æ‰©å±•æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>æ‰©å±•å…ƒæ•°æ®é›†ç¾¤ï¼šå¢åŠ å…ƒæ•°æ®èŠ‚ç‚¹æå‡å…ƒæ•°æ®å¤„ç†èƒ½åŠ›</li>
<li>å¢åŠ æ•°æ®èŠ‚ç‚¹ï¼šæ‰©å±•å­˜å‚¨å®¹é‡å’ŒIOPSæ€§èƒ½</li>
<li>è°ƒæ•´åˆ†ç‰‡ç­–ç•¥ï¼šæ ¹æ®æ•°æ®è®¿é—®æ¨¡å¼ä¼˜åŒ–æ•°æ®åˆ†å¸ƒ</li>
</ol>
<h3 data-id="heading-31">åã€æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å®æˆ˜æŒ‡å—ï¼Œæˆ‘ä»¬å®Œæ•´å±•ç¤ºäº†åŸºäºRustFSå’ŒKubernetesæ„å»ºé«˜å¯ç”¨äº‘åŸç”Ÿå­˜å‚¨æ¶æ„çš„å…¨è¿‡ç¨‹ã€‚RustFSå‡­å€Ÿå…¶â€‹<strong>å“è¶Šçš„æ€§èƒ½</strong>â€‹ã€<strong>äº‘åŸç”Ÿå‹å¥½æ¶æ„</strong>å’Œâ€‹<strong>å®Œå–„çš„S3å…¼å®¹æ€§</strong>ï¼Œæˆä¸ºç°ä»£äº‘åŸç”Ÿåº”ç”¨çš„ç†æƒ³å­˜å‚¨é€‰æ‹©ã€‚</p>
<p>â€‹<strong>å…³é”®æ”¶è·</strong>ï¼š</p>
<ol>
<li>â€‹<strong>å¿«é€Ÿéƒ¨ç½²</strong>ï¼šä½¿ç”¨Helmå¯åœ¨10åˆ†é’Ÿå†…å®Œæˆç”Ÿäº§çº§é›†ç¾¤éƒ¨ç½²</li>
<li>â€‹<strong>é«˜å¯ç”¨ä¿éšœ</strong>ï¼šé€šè¿‡å¤šèŠ‚ç‚¹éƒ¨ç½²å’Œæ‹“æ‰‘åˆ†å¸ƒçº¦æŸå®ç°æ•…éšœè‡ªåŠ¨æ¢å¤</li>
<li>â€‹<strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šåˆç†çš„èµ„æºé…ç½®å’Œå‚æ•°è°ƒä¼˜å¯å……åˆ†å‘æŒ¥RustFSæ€§èƒ½ä¼˜åŠ¿</li>
<li>â€‹<strong>è¿ç»´ä¾¿æ·</strong>ï¼šä¸°å¯Œçš„ç›‘æ§å’Œç®¡ç†å·¥å…·ç®€åŒ–æ—¥å¸¸è¿ç»´å¤æ‚åº¦</li>
</ol>
<p>éšç€äº‘åŸç”ŸæŠ€æœ¯çš„æ™®åŠï¼ŒRustFSä¸Kubernetesçš„æ·±åº¦é›†æˆå°†ä¸ºä¼ä¸šåœ¨æ•°å­—åŒ–è½¬å‹ä¸­æä¾›å¼ºæœ‰åŠ›çš„å­˜å‚¨åŸºç¡€è®¾æ–½æ”¯æ’‘ã€‚å…¶å¼€æºç‰¹æ€§å’Œæ´»è·ƒçš„ç¤¾åŒºç”Ÿæ€ï¼Œç¡®ä¿äº†æŠ€æœ¯çš„æŒç»­æ¼”è¿›å’Œæ”¯æŒä¿éšœã€‚</p>
<hr/>
<p>ä»¥ä¸‹æ˜¯æ·±å…¥å­¦ä¹  RustFS çš„æ¨èèµ„æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">RustFS</a></p>
<p>å®˜æ–¹æ–‡æ¡£ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">RustFS å®˜æ–¹æ–‡æ¡£</a>- æä¾›æ¶æ„ã€å®‰è£…æŒ‡å—å’Œ API å‚è€ƒã€‚</p>
<p>GitHub ä»“åº“ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdocs.rustfs.com%2F" target="_blank" title="https://link.zhihu.com/?target=https%3A//docs.rustfs.com/" ref="nofollow noopener noreferrer">GitHub ä»“åº“</a> - è·å–æºä»£ç ã€æäº¤é—®é¢˜æˆ–è´¡çŒ®ä»£ç ã€‚</p>
<p>ç¤¾åŒºæ”¯æŒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Forgs%2Frustfs%2Fdiscussions" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/orgs/rustfs/discussions" ref="nofollow noopener noreferrer">GitHub Discussions</a>- ä¸å¼€å‘è€…äº¤æµç»éªŒå’Œè§£å†³æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <!----></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®]]></title>    <link>https://juejin.cn/post/7575313772987957289</link>    <guid>https://juejin.cn/post/7575313772987957289</guid>    <pubDate>2025-11-23T03:29:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575313772987957289" data-draft-id="7575655132747890724" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº,Vite,Vue.js"/> <meta itemprop="datePublished" content="2025-11-23T03:29:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¬¨ç¬¨ç‹—åå™¬è€…"/> <meta itemprop="url" content="https://juejin.cn/user/245921884145240"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€uniappã€‘å°ç¨‹åºå®ç°è‡ªç”±æ§åˆ¶ç»„ä»¶JSONæ–‡ä»¶é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/245921884145240/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¬¨ç¬¨ç‹—åå™¬è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:29:51.000Z" title="Sun Nov 23 2025 03:29:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ€è¿‘åœ¨ <code>uniapp askç¤¾åŒº</code> å›ç­”é—®é¢˜ï¼Œä¸å°‘å¼€å‘è€…éƒ½å’¨è¯¢åˆ°äº†å¦‚ä½•é…ç½® <code>ç»„ä»¶</code> ç”Ÿæˆçš„ <code>jsonæ–‡ä»¶</code> è¿™ä¸ªé—®é¢˜ï¼Œåœ¨ç»è¿‡è·ŸåŒäº‹çš„äº¤æµã€è‡ªå·±çš„å®è·µä»¥åŠå¼€å‘è€…çš„åé¦ˆåï¼Œæˆ‘æ•´ç†äº†ä¸‹é¢çš„è§£å†³æ€è·¯å’Œæ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">å‰ç½®çŸ¥è¯†</h2>
<p><code>uniapp</code> ç¼–è¯‘åˆ° <code>å°ç¨‹åº</code>ï¼Œä¸€ä¸ª vue ç»„ä»¶ç¼–è¯‘ç»“æŸä¹‹åä¼šç”Ÿæˆå››ä¸ªæ–‡ä»¶ï¼Œä»¥å¾®ä¿¡å°ç¨‹åºä¸¾ä¾‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c10a82ad85941b39552f5732b30e494~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56yo56yo54uX5ZCe5Zms6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473510&amp;x-signature=Y5szfus3bxDvYw%2Ba1EWuxaDKZTE%3D" alt="image.png" loading="lazy"/></p>
<p>ç”Ÿæˆçš„ <code>jsonæ–‡ä»¶</code> çš„å†…å®¹å­˜å‚¨ç€å°ç¨‹åºé¡µé¢æˆ–ç»„ä»¶ç›¸å…³çš„é…ç½®ï¼Œå¿…ä¸å¯å°‘</p>
<h2 data-id="heading-2">æ–¹æ¡ˆä¸€ è„šæœ¬</h2>
<p>è¿™ä¸ªæ€è·¯æ˜¯åœ¨æ¡†æ¶æ‰“åŒ…ç»“æŸä¹‹åé€šè¿‡ <code>nodejs</code> æˆ–è€… <code>shell</code> å»ä¿®æ”¹äº§ç‰©</p>
<p>ä»¥å ä½ç»„ä»¶ä¸ºä¾‹ï¼Œåšåˆ†åŒ…å¼‚æ­¥åŒ–é™ä½ä¸»åŒ…ä½“ç§¯ä¸å¯æˆ–ç¼ºçš„ä¸€ä¸ªé…ç½®é¡¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbbdf5ea54145d8a5657264b37f9cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56yo56yo54uX5ZCe5Zms6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473510&amp;x-signature=b2i2DxWEjYcBB0pLG5Wf1l2kPKU%3D" alt="image.png" loading="lazy"/></p>
<p>å¼€å‘è€…åªéœ€è¦äº‹å…ˆç»Ÿè®¡å¥½éœ€è¦é…ç½®çš„ <code>componentPlaceholder</code> å’Œ äº§ç‰©è·¯å¾„ï¼Œåœ¨æ‰“åŒ…ç»“æŸä¹‹åé€šè¿‡è„šæœ¬æŠŠå†…å®¹å†™å…¥åˆ°å¯¹åº”çš„ <code>jsonæ–‡ä»¶</code> å°±å¯ä»¥äº†</p>
<p>è¿™ç§æ€è·¯é€‚åˆ <code>clié¡¹ç›®</code>ï¼Œå¯ä»¥å¾ˆè½»æ¾æŠŠè„šæœ¬æ·»åŠ åˆ° <code>package.json</code> ä¸­çš„ <code>scripts</code> ä¸­ï¼Œå¹¶ä¸”ä¸å— <code>nodejs</code> ç‰ˆæœ¬é™åˆ¶ï¼›ä½†æ˜¯æœ‰äº›å¼€å‘è€…çš„é¡¹ç›®æ˜¯ <code>hxé¡¹ç›®</code>ï¼Œå°±ä¸èƒ½é€šè¿‡è„šæœ¬çš„å½¢å¼æ¥æ“ä½œäº†ã€‚</p>
<h2 data-id="heading-3">æ–¹æ¡ˆäºŒ æ’ä»¶</h2>
<p>è¿™ä¸ªæ€è·¯æ˜¯é€šè¿‡ <code>webpack</code> æˆ–è€… <code>vite</code> æ’ä»¶æ¥è§£å†³ç›¸å…³é—®é¢˜</p>
<p>æˆ‘ä»¬ä»¥æˆ‘å†™çš„ <code>vite æ’ä»¶</code> ä¸ºä¾‹ ï¼ˆ<code>github åœ°å€</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit%2Fblob%2Fmain%2Fpackages%2Fvite-plugin-component-config%2FREADME.md" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit/blob/main/packages/vite-plugin-component-config/README.md" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a>ï¼‰</p>
<p>æ’ä»¶æºç å¾ˆç®€å•ï¼Œäº”åå¤šè¡Œä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { getOutputJsonPath, isMiniProgram } <span class="hljs-keyword">from</span> <span class="hljs-string">'@uni_toolkit/shared'</span>;
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">PluginOption</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> { createFilter, type <span class="hljs-title class_">FilterPattern</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@rollup/pluginutils'</span>;
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>;
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs'</span>;
<span class="hljs-keyword">import</span> { parseJson } <span class="hljs-keyword">from</span> <span class="hljs-string">'@dcloudio/uni-cli-shared'</span>;
<span class="hljs-keyword">import</span> { merge } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash-es'</span>;

<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">ComponentConfigPluginOptions</span> {
  include?: <span class="hljs-title class_">FilterPattern</span>;
  exclude?: <span class="hljs-title class_">FilterPattern</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">vitePluginComponentConfig</span>(<span class="hljs-params">
  options: ComponentConfigPluginOptions = {
    include: [<span class="hljs-string">'**/*.{vue,nvue,uvue}'</span>],
    exclude: [],
  },
</span>): <span class="hljs-title class_">PluginOption</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">map</span>: <span class="hljs-title class_">Map</span>&lt;string, <span class="hljs-title class_">Record</span>&lt;string, any&gt;&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-component-config'</span>,
    <span class="hljs-attr">enforce</span>: <span class="hljs-string">'pre'</span>,
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isMiniProgram</span>()) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">createFilter</span>(options.<span class="hljs-property">include</span>, options.<span class="hljs-property">exclude</span>)(id)) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">const</span> matches = code.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/&lt;component-config&gt;([\s\S]*?)&lt;\/component-config&gt;/g</span>);
      <span class="hljs-keyword">if</span> (!matches) {
        <span class="hljs-keyword">return</span>;
      }

      matches.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">match</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> content = match.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;component-config&gt;|&lt;\/component-config&gt;/g</span>, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">const</span> componentConfig = <span class="hljs-title function_">parseJson</span>(content.<span class="hljs-title function_">toString</span>(), <span class="hljs-literal">true</span>, path.<span class="hljs-title function_">basename</span>(id));
        map.<span class="hljs-title function_">set</span>(<span class="hljs-title function_">getOutputJsonPath</span>(id), componentConfig);
      });

      <span class="hljs-keyword">return</span> code.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&lt;component-config&gt;[\s\S]*?&lt;\/component-config&gt;/g</span>, <span class="hljs-string">''</span>);
    },
    <span class="hljs-title function_">closeBundle</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (map.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span>;
      }
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [outputPath, config] <span class="hljs-keyword">of</span> map) {
        <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(outputPath)) {
          <span class="hljs-keyword">continue</span>;
        }
        <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(outputPath, <span class="hljs-string">'utf-8'</span>);
        <span class="hljs-keyword">const</span> json = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(content);
        fs.<span class="hljs-title function_">writeFileSync</span>(outputPath, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-title function_">merge</span>(json, config), <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>));
      }
    },
  };
}
</code></pre>
<p>æ€è·¯å°±æ˜¯éœ€è¦å¼€å‘è€…åœ¨å…·ä½“çš„ <code>vueæ–‡ä»¶</code> ä¸­æ·»åŠ ä¸€ä¸ª <code>component-config</code> ä»£ç å—ï¼Œç±»å¦‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// #ifdef MP</span>
&lt;component-config&gt;
{
  <span class="hljs-string">"usingComponents"</span>: {
    <span class="hljs-string">"custom-button"</span>: <span class="hljs-string">"/components/custom-button"</span>
  },
  <span class="hljs-string">"styleIsolation"</span>: <span class="hljs-string">"apply-shared"</span>,
  <span class="hljs-string">"componentPlaceholder"</span>: {  
    <span class="hljs-string">"test"</span>: <span class="hljs-string">"view"</span>,  
  }  
}
&lt;/component-config&gt;
<span class="hljs-comment">// #endif</span>
</code></pre>
<p>åœ¨ç¼–è¯‘æœŸé—´ï¼Œä¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æå– <code>component-config</code> ä»£ç å—ä¸­çš„é…ç½®ï¼Œå­˜å‚¨åˆ° <code>hashMap</code> ä¸­ï¼Œåœ¨ <code>bundle</code> ç”Ÿæˆç»“æŸåéå† <code>hashMap</code> ä¸­çš„æ•°æ®ï¼Œç„¶åä¿®æ”¹å¯¹åº”è·¯å¾„çš„ <code>jsonæ–‡ä»¶</code>ã€‚</p>
<p>åŒæ—¶è¿˜è€ƒè™‘åˆ°æœ‰äº›å¼€å‘è€…ä¼šé’ˆå¯¹ä¸åŒçš„å°ç¨‹åºå¹³å°æ·»åŠ ä¸åŒçš„é…ç½®ï¼Œ<code>component-config</code> ä»£ç å—ä¸­çš„å†…å®¹ä¹Ÿæ”¯æŒ <code>æ¡ä»¶ç¼–è¯‘</code></p>
<p>å¦‚æœä½ æ˜¯ <code>vue2 é¡¹ç›®</code>ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªæ’ä»¶ <code>github åœ°å€</code> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit%2Fblob%2Fmain%2Fpackages%2Fwebpack-plugin-component-config%2FREADME.md" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit/blob/main/packages/webpack-plugin-component-config/README.md" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a></p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å¦‚æœè¿™äº›æ’ä»¶å¸®åŠ©åˆ°äº†ä½ ï¼Œå¯ä»¥ç‚¹ä¸ª starâœ¨ æ”¯æŒä¸€ä¸‹å¼€æºå·¥ä½œã€‚</p>
<p>å¦‚æœä½ æœ‰ä»€ä¹ˆå¥½çš„æƒ³æ³•æˆ–è€…å»ºè®®ï¼Œæ¬¢è¿åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funi-toolkit%2Funi-toolkit" target="_blank" title="https://github.com/uni-toolkit/uni-toolkit" ref="nofollow noopener noreferrer">github.com/uni-toolkitâ€¦</a> æ issue æˆ–è€… prï¼›ä¹Ÿå¯ä»¥åŠ æˆ‘çš„ å¾®ä¿¡ 13460036576 æ²Ÿé€šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[èŠèŠåŠ¨æ€æ•°æ®æº]]></title>    <link>https://juejin.cn/post/7575102209605763098</link>    <guid>https://juejin.cn/post/7575102209605763098</guid>    <pubDate>2025-11-23T03:27:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102209605763098" data-draft-id="7575104251866611722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="èŠèŠåŠ¨æ€æ•°æ®æº"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T03:27:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            èŠèŠåŠ¨æ€æ•°æ®æº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T03:27:19.000Z" title="Sun Nov 23 2025 03:27:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å’±ä»¬æ˜Ÿçƒä¸­çš„å•†åŸç³»ç»Ÿä¸­ä½¿ç”¨äº†åŠ¨æ€æ•°æ®æºçš„åŠŸèƒ½ï¼Œå®ç°äº†åˆ†åº“åˆ†è¡¨çš„è®¢å•åº“çš„è¯»åº“å’Œå†™åº“çš„è‡ªåŠ¨åˆ‡æ¢ã€‚</p>
<p>æœ‰çƒå‹åé¦ˆè¯´ï¼Œå¯¹åŠ¨æ€æ•°æ®æºä¸å¤ªç†Ÿæ‚‰ã€‚</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±ä¸“é—¨è·Ÿå¤§å®¶ä¸€èµ·èŠèŠåŠ¨æ€æ•°æ®æºï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<p><a href="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" title="https://link.juejin.cn/?target=http%3A%2F%2Fwww.susan.net.cn%3Frefer%3Djuejin" target="_blank">æœ€è¿‘å‡†å¤‡é¢è¯•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªå®è—ç½‘ç«™ï¼ˆJavaçªå‡»é˜Ÿï¼‰ï¼šwww.susan.net.cnï¼Œé‡Œé¢ï¼šé¢è¯•å…«è‚¡æ–‡ã€åœºæ™¯è®¾è®¡é¢˜ã€é¢è¯•çœŸé¢˜ã€7ä¸ªé¡¹ç›®å®æˆ˜ã€å·¥ä½œå†…æ¨ä»€ä¹ˆéƒ½æœ‰</a>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€æ•°æ®æºï¼Ÿ</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨å¼€å‘ä¸­å¯èƒ½ä¼šé‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šä¸€ä¸ªç³»ç»Ÿéœ€è¦åŒæ—¶è®¿é—®å¤šä¸ªæ•°æ®åº“ï¼Œæˆ–è€…éœ€è¦æ ¹æ®ä¸šåŠ¡å‚æ•°åŠ¨æ€é€‰æ‹©æ•°æ®æºã€‚è¿™</p>
<p>æ—¶å€™ï¼Œä¼ ç»Ÿçš„å•æ•°æ®æºé…ç½®å°±æ˜¾å¾—åŠ›ä¸ä»å¿ƒäº†ã€‚</p>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå¤šæ•°æ®æºçš„é—®é¢˜</h3>
<p>ä¼ ç»Ÿæ–¹å¼çš„å¤šä¸ªæ•°æ®æºé…ç½®ï¼Œç¡¬ç¼–ç ï¼Œä¸çµæ´»ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢è¿™æ ·ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalDataSourceConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">primaryDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/db1"</span>);
        dataSource.setUsername(<span class="hljs-string">"user1"</span>);
        dataSource.setPassword(<span class="hljs-string">"pass1"</span>);
        <span class="hljs-keyword">return</span> dataSource;
    }
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">secondaryDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(<span class="hljs-string">"jdbc:mysql://localhost:3306/db2"</span>);
        dataSource.setUsername(<span class="hljs-string">"user2"</span>);
        dataSource.setPassword(<span class="hljs-string">"pass2"</span>);
        <span class="hljs-keyword">return</span> dataSource;
    }
}
</code></pre>
<p>ä½¿ç”¨æ—¶éœ€è¦æ‰‹åŠ¨ç®¡ç†æ•°æ®æºã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TraditionalUserDao</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier("primaryDataSource")</span>
    <span class="hljs-keyword">private</span> DataSource primaryDataSource;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-meta">@Qualifier("secondaryDataSource")</span>
    <span class="hljs-keyword">private</span> DataSource secondaryDataSource;
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUserFromPrimary</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨è·å–è¿æ¥ã€å¤„ç†å¼‚å¸¸ã€å…³é—­è¿æ¥</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> primaryDataSource.getConnection();
             <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"SELECT * FROM users WHERE id = ?"</span>)) {
            stmt.setLong(<span class="hljs-number">1</span>, id);
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery();
            <span class="hljs-comment">// å¤„ç†ç»“æœé›†...</span>
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æŸ¥è¯¢å¤±è´¥"</span>, e);
        }
    }
  
}
</code></pre>
<p>æ¯ä¸ªæ–¹æ³•éƒ½è¦é‡å¤è¿™æ ·çš„æ¨¡æ¿ä»£ç ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šæ•°æ®æºï¼Œå¾ˆéº»çƒ¦ã€‚</p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•åšä¼˜åŒ–å‘¢ï¼Ÿ</p>
<h3 data-id="heading-3">1.2 åŠ¨æ€æ•°æ®æºçš„ä¼˜åŠ¿</h3>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹ä½¿ç”¨åŠ¨æ€æ•°æ®æºåçš„ä¼˜é›…ä»£ç ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserMapper userMapper;
    
    <span class="hljs-comment">// æ ¹æ®ç§Ÿæˆ·IDè‡ªåŠ¨é€‰æ‹©æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUserByTenant</span><span class="hljs-params">(Long userId, String tenantId)</span> {
        <span class="hljs-comment">// è®¾ç½®æ•°æ®æºä¸Šä¸‹æ–‡</span>
        DataSourceContextHolder.setDataSource(tenantId);
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> userMapper.selectById(userId);
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// æ¸…ç†ä¸Šä¸‹æ–‡</span>
            DataSourceContextHolder.clear();
        }
    }
    
    <span class="hljs-comment">// å¤šç§Ÿæˆ·æ•°æ®èšåˆæŸ¥è¯¢</span>
    <span class="hljs-keyword">public</span> UserAggregateInfo <span class="hljs-title function_">getUserAggregateInfo</span><span class="hljs-params">(Long userId)</span> {
        <span class="hljs-type">UserAggregateInfo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserAggregateInfo</span>();
        
        <span class="hljs-comment">// æŸ¥è¯¢ä¸»åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"master"</span>);
        result.setBaseInfo(userMapper.selectById(userId));
        
        <span class="hljs-comment">// æŸ¥è¯¢å½’æ¡£åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"archive"</span>);
        result.setHistory(userMapper.selectHistory(userId));
        
        <span class="hljs-comment">// æŸ¥è¯¢ç»Ÿè®¡åº“</span>
        DataSourceContextHolder.setDataSource(<span class="hljs-string">"stats"</span>);
        result.setStatistics(userMapper.selectStats(userId));
        
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>ä»£ç ä¸­èƒ½æ ¹æ®ç§Ÿæˆ·IDè‡ªåŠ¨é€‰æ‹©æ•°æ®æºã€‚</p>
<p>ä»£ç ä¸€ä¸‹å­å˜å¾—æ›´ä¼˜é›…äº†ã€‚</p>
<h2 data-id="heading-4">äºŒã€åŠ¨æ€æ•°æ®æºçš„åŸç†</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨ä½¿ç”¨åŠ¨æ€æ•°æ®æºæ—¶ï¼Œå¯èƒ½åªæ˜¯ç®€å•é…ç½®ä½¿ç”¨ï¼Œå¹¶ä¸æ¸…æ¥šå…¶åº•å±‚å·¥ä½œåŸç†ã€‚</p>
<p>ç†è§£æ ¸å¿ƒåŸç†å¯¹äºæ’æŸ¥é—®é¢˜å’Œæ€§èƒ½ä¼˜åŒ–è‡³å…³é‡è¦ã€‚</p>
<p>ä¸‹é¢è·Ÿå¤§å®¶ä¸€èµ·èŠèŠåŠ¨æ€æ•°æ®æºçš„æ ¸å¿ƒåŸç†ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h3 data-id="heading-5">æ•°æ®æºè·¯ç”±çš„æ ¸å¿ƒæœºåˆ¶</h3>
<p>åŠ¨æ€æ•°æ®æºçš„æ ¸å¿ƒåœ¨äº<code>AbstractRoutingDataSource</code>ï¼Œå®ƒæ˜¯Springæ¡†æ¶æä¾›çš„æŠ½è±¡ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Spring AbstractRoutingDataSource æºç åˆ†æ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InitializingBean</span> {
    
    <span class="hljs-comment">// ç›®æ ‡æ•°æ®æºæ˜ å°„è¡¨</span>
    <span class="hljs-keyword">private</span> Map&lt;Object, Object&gt; targetDataSources;
    
    <span class="hljs-comment">// é»˜è®¤æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> Object defaultTargetDataSource;
    
    <span class="hljs-comment">// è§£æåçš„æ•°æ®æºæ˜ å°„</span>
    <span class="hljs-keyword">private</span> Map&lt;Object, DataSource&gt; resolvedDataSources;
    
    <span class="hljs-comment">// è§£æåçš„é»˜è®¤æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> DataSource resolvedDefaultDataSource;
    
    <span class="hljs-comment">// å…³é”®æ–¹æ³•ï¼šç¡®å®šå½“å‰æŸ¥æ‰¾é”®</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> Object <span class="hljs-title function_">determineCurrentLookupKey</span><span class="hljs-params">()</span>;
    
    <span class="hljs-comment">// è·å–è¿æ¥æ—¶é€‰æ‹©æ•°æ®æº</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> determineTargetDataSource().getConnection();
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">(String username, String password)</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> determineTargetDataSource().getConnection(username, password);
    }
    
    <span class="hljs-comment">// ç¡®å®šç›®æ ‡æ•°æ®æº</span>
    <span class="hljs-keyword">protected</span> DataSource <span class="hljs-title function_">determineTargetDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–æŸ¥æ‰¾é”®</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">lookupKey</span> <span class="hljs-operator">=</span> determineCurrentLookupKey();
        
        <span class="hljs-comment">// æ ¹æ®æŸ¥æ‰¾é”®è·å–æ•°æ®æº</span>
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.resolvedDataSources.get(lookupKey);
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span> &amp;&amp; (<span class="hljs-built_in">this</span>.resolvedDefaultDataSource != <span class="hljs-literal">null</span> || lookupKey == <span class="hljs-literal">null</span>)) {
            dataSource = <span class="hljs-built_in">this</span>.resolvedDefaultDataSource;
        }
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Cannot determine target DataSource for lookup key ["</span> + lookupKey + <span class="hljs-string">"]"</span>);
        }
        <span class="hljs-keyword">return</span> dataSource;
    }
}
</code></pre>
<h3 data-id="heading-6">çº¿ç¨‹å®‰å…¨çš„æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºä¸Šä¸‹æ–‡ç®¡ç†å™¨ - æ ¸å¿ƒç»„ä»¶
 * ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹å®‰å…¨
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceContextHolder</span> {
    
    <span class="hljs-comment">// ä½¿ç”¨ThreadLocalä¿è¯çº¿ç¨‹éš”ç¦»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;String&gt; CONTEXT_HOLDER = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();
    
    <span class="hljs-comment">// æ”¯æŒåµŒå¥—æ•°æ®æºåˆ‡æ¢çš„æ ˆ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> ThreadLocal&lt;Deque&lt;String&gt;&gt; DATASOURCE_STACK = ThreadLocal.withInitial(ArrayDeque::<span class="hljs-keyword">new</span>);
    
    <span class="hljs-comment">// è®¾ç½®æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDataSource</span><span class="hljs-params">(String dataSource)</span> {
        <span class="hljs-keyword">if</span> (dataSource == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ•°æ®æºä¸èƒ½ä¸ºnull"</span>);
        }
        CONTEXT_HOLDER.set(dataSource);
        
        <span class="hljs-comment">// åŒæ—¶å‹å…¥æ ˆï¼Œæ”¯æŒåµŒå¥—è°ƒç”¨</span>
        DATASOURCE_STACK.get().push(dataSource);
    }
    
    <span class="hljs-comment">// è·å–å½“å‰æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.get();
    }
    
    <span class="hljs-comment">// æ¸…é™¤æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> {
        CONTEXT_HOLDER.remove();
        Deque&lt;String&gt; stack = DATASOURCE_STACK.get();
        <span class="hljs-keyword">if</span> (!stack.isEmpty()) {
            stack.pop();
            <span class="hljs-comment">// å¦‚æœæ ˆä¸­è¿˜æœ‰å…ƒç´ ï¼Œæ¢å¤åˆ°ä¸Šä¸€ä¸ªæ•°æ®æº</span>
            <span class="hljs-keyword">if</span> (!stack.isEmpty()) {
                CONTEXT_HOLDER.set(stack.peek());
            }
        }
    }
    
    <span class="hljs-comment">// å¼ºåˆ¶æ¸…é™¤æ‰€æœ‰ä¸Šä¸‹æ–‡ï¼ˆç”¨äºçº¿ç¨‹æ± åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">clearCompletely</span><span class="hljs-params">()</span> {
        CONTEXT_HOLDER.remove();
        DATASOURCE_STACK.get().clear();
    }
    
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦å·²è®¾ç½®æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> CONTEXT_HOLDER.get() != <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">/**
 * è‡ªå®šä¹‰è·¯ç”±æ•°æ®æº
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicRoutingDataSource</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractRoutingDataSource</span> {
    
    <span class="hljs-comment">// æ‰€æœ‰å¯ç”¨çš„æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Object, Object&gt; targetDataSources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">determineCurrentLookupKey</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> DataSourceContextHolder.getDataSource();
        
        <span class="hljs-keyword">if</span> (dataSourceKey == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// è¿”å›é»˜è®¤æ•°æ®æº</span>
            <span class="hljs-keyword">return</span> <span class="hljs-string">"default"</span>;
        }
        
        <span class="hljs-comment">// éªŒè¯æ•°æ®æºæ˜¯å¦å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (!targetDataSources.containsKey(dataSourceKey)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"æ•°æ®æº "</span> + dataSourceKey + <span class="hljs-string">" ä¸å­˜åœ¨"</span>);
        }
        
        logger.debug(<span class="hljs-string">"å½“å‰ä½¿ç”¨æ•°æ®æº: {}"</span>, dataSourceKey);
        <span class="hljs-keyword">return</span> dataSourceKey;
    }
    
    <span class="hljs-comment">// æ·»åŠ æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDataSource</span><span class="hljs-params">(String key, DataSource dataSource)</span> {
        <span class="hljs-built_in">this</span>.targetDataSources.put(key, dataSource);
        <span class="hljs-comment">// æ›´æ–°ç›®æ ‡æ•°æ®æºæ˜ å°„</span>
        setTargetDataSources(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-built_in">this</span>.targetDataSources));
        <span class="hljs-comment">// é‡æ–°åˆå§‹åŒ–</span>
        afterPropertiesSet();
    }
    
    <span class="hljs-comment">// ç§»é™¤æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeDataSource</span><span class="hljs-params">(String key)</span> {
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.targetDataSources.containsKey(key)) {
            <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) <span class="hljs-built_in">this</span>.targetDataSources.remove(key);
            <span class="hljs-comment">// å…³é—­æ•°æ®æºè¿æ¥æ± </span>
            closeDataSource(dataSource);
            <span class="hljs-comment">// æ›´æ–°ç›®æ ‡æ•°æ®æºæ˜ å°„</span>
            setTargetDataSources(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-built_in">this</span>.targetDataSources));
            afterPropertiesSet();
        }
    }
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰æ•°æ®æº</span>
    <span class="hljs-keyword">public</span> Map&lt;Object, Object&gt; <span class="hljs-title function_">getTargetDataSources</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> Collections.unmodifiableMap(targetDataSources);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">closeDataSource</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-keyword">if</span> (dataSource <span class="hljs-keyword">instanceof</span> HikariDataSource) {
            ((HikariDataSource) dataSource).close();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dataSource <span class="hljs-keyword">instanceof</span> org.apache.tomcat.jdbc.pool.DataSource) {
            ((org.apache.tomcat.jdbc.pool.DataSource) dataSource).close();
        }
        <span class="hljs-comment">// å…¶ä»–ç±»å‹çš„æ•°æ®æºå…³é—­é€»è¾‘...</span>
    }
}
</code></pre>
<h3 data-id="heading-7">åŠ¨æ€æ•°æ®æºæ‰§è¡Œæµç¨‹</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/081c3361ead644e5ae5f68390279086d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473239&amp;x-signature=V6dVx6G47lh7ytRTcxZ05U3lRLA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">ä¸‰ã€åŸºäºSpring Bootçš„å®Œæ•´å®ç°</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨é…ç½®åŠ¨æ€æ•°æ®æºæ—¶å¯èƒ½ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä¸‹é¢æˆ‘æä¾›ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®Œæ•´å®ç°ã€‚</p>
<h3 data-id="heading-9">å®Œæ•´é…ç½®å®ç°</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * åŠ¨æ€æ•°æ®æºé…ç½®ç±»
 */</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableTransactionManagement</span>
<span class="hljs-meta">@EnableConfigurationProperties(DynamicDataSourceProperties.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSourceConfig</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicDataSourceProperties properties;
    
    <span class="hljs-comment">/**
     * ä¸»æ•°æ®æºï¼ˆé»˜è®¤æ•°æ®æºï¼‰
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.master")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">masterDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº1
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.slave1")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">slave1DataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº2
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource.slave2")</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">slave2DataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> DataSourceBuilder.create().build();
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€æ•°æ®æº
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Primary</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dynamicDataSource</span><span class="hljs-params">(DataSource masterDataSource, 
                                       DataSource slave1DataSource, 
                                       DataSource slave2DataSource)</span> {
        
        Map&lt;Object, Object&gt; targetDataSources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;(<span class="hljs-number">8</span>);
        targetDataSources.put(<span class="hljs-string">"master"</span>, masterDataSource);
        targetDataSources.put(<span class="hljs-string">"slave1"</span>, slave1DataSource);
        targetDataSources.put(<span class="hljs-string">"slave2"</span>, slave2DataSource);
        
        <span class="hljs-type">DynamicRoutingDataSource</span> <span class="hljs-variable">dynamicDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicRoutingDataSource</span>();
        <span class="hljs-comment">// è®¾ç½®é»˜è®¤æ•°æ®æº</span>
        dynamicDataSource.setDefaultTargetDataSource(masterDataSource);
        <span class="hljs-comment">// è®¾ç½®ç›®æ ‡æ•°æ®æº</span>
        dynamicDataSource.setTargetDataSources(targetDataSources);
        
        <span class="hljs-keyword">return</span> dynamicDataSource;
    }
    
    <span class="hljs-comment">/**
     * äº‹åŠ¡ç®¡ç†å™¨
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PlatformTransactionManager <span class="hljs-title function_">transactionManager</span><span class="hljs-params">(DataSource dynamicDataSource)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataSourceTransactionManager</span>(dynamicDataSource);
    }
    
    <span class="hljs-comment">/**
     * MyBatisé…ç½®
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SqlSessionFactory <span class="hljs-title function_">sqlSessionFactory</span><span class="hljs-params">(DataSource dynamicDataSource)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">SqlSessionFactoryBean</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBean</span>();
        sessionFactory.setDataSource(dynamicDataSource);
        
        <span class="hljs-comment">// é…ç½®MyBatis</span>
        org.apache.ibatis.session.<span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">org</span>.apache.ibatis.session.Configuration();
        configuration.setMapUnderscoreToCamelCase(<span class="hljs-literal">true</span>);
        configuration.setCacheEnabled(<span class="hljs-literal">true</span>);
        configuration.setLazyLoadingEnabled(<span class="hljs-literal">false</span>);
        configuration.setAggressiveLazyLoading(<span class="hljs-literal">false</span>);
        sessionFactory.setConfiguration(configuration);
        
        <span class="hljs-keyword">return</span> sessionFactory.getObject();
    }
}

<span class="hljs-comment">/**
 * æ•°æ®æºé…ç½®å±æ€§ç±»
 */</span>
<span class="hljs-meta">@ConfigurationProperties(prefix = "spring.datasource")</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicDataSourceProperties</span> {
    
    <span class="hljs-comment">/**
     * ä¸»æ•°æ®æºé…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">master</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº1é…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">slave1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * ä»æ•°æ®æº2é…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">HikariConfig</span> <span class="hljs-variable">slave2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariConfig</span>();
    
    <span class="hljs-comment">/**
     * åŠ¨æ€æ•°æ®æºé…ç½®
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">DynamicConfig</span> <span class="hljs-variable">dynamic</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DynamicConfig</span>();
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicConfig</span> {
        <span class="hljs-comment">/**
         * é»˜è®¤æ•°æ®æº
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">primary</span> <span class="hljs-operator">=</span> <span class="hljs-string">"master"</span>;
        
        <span class="hljs-comment">/**
         * æ˜¯å¦å¼€å¯ä¸¥æ ¼æ¨¡å¼
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">strict</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
        
        <span class="hljs-comment">/**
         * æ•°æ®æºå¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">healthCheckInterval</span> <span class="hljs-operator">=</span> <span class="hljs-number">30</span>;
    }
}
</code></pre>
<h3 data-id="heading-10">åº”ç”¨é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-comment"># åŠ¨æ€æ•°æ®æºé…ç½®</span>
    <span class="hljs-attr">dynamic:</span>
      <span class="hljs-attr">primary:</span> <span class="hljs-string">master</span>
      <span class="hljs-attr">strict:</span> <span class="hljs-literal">true</span>
      <span class="hljs-attr">health-check-interval:</span> <span class="hljs-number">30</span>
    
    <span class="hljs-comment"># ä¸»æ•°æ®æº</span>
    <span class="hljs-attr">master:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/master_db?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">master_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">20</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">MasterHikariPool</span>
    
    <span class="hljs-comment"># ä»æ•°æ®æº1</span>
    <span class="hljs-attr">slave1:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://slave1:3306/slave_db?useUnicode=true&amp;characterEncoding=utf8</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">slave1_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">Slave1HikariPool</span>
    
    <span class="hljs-comment"># ä»æ•°æ®æº2</span>
    <span class="hljs-attr">slave2:</span>
      <span class="hljs-attr">jdbc-url:</span> <span class="hljs-string">jdbc:mysql://slave2:3306/slave_db?useUnicode=true&amp;characterEncoding=utf8</span>
      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
      <span class="hljs-attr">password:</span> <span class="hljs-string">slave2_password</span>
      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">15</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">600000</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">1800000</span>
      <span class="hljs-attr">pool-name:</span> <span class="hljs-string">Slave2HikariPool</span>

<span class="hljs-comment"># MyBatisé…ç½®</span>
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">cache-enabled:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">lazy-loading-enabled:</span> <span class="hljs-literal">false</span>
    <span class="hljs-attr">aggressive-lazy-loading:</span> <span class="hljs-literal">false</span>
</code></pre>
<h3 data-id="heading-11">æ³¨è§£å¼æ•°æ®æºåˆ‡æ¢</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºæ³¨è§£
 */</span>
<span class="hljs-meta">@Target({ElementType.METHOD, ElementType.TYPE})</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> DataSource {
    
    <span class="hljs-comment">/**
     * æ•°æ®æºåç§°
     */</span>
    String <span class="hljs-title function_">value</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-string">"master"</span>;
    
    <span class="hljs-comment">/**
     * æ˜¯å¦åœ¨æ–¹æ³•æ‰§è¡Œåæ¸…é™¤æ•°æ®æºï¼ˆé»˜è®¤æ¸…é™¤ï¼‰
     */</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">clear</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-comment">/**
 * æ•°æ®æºåˆ‡é¢
 */</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceAspect</span> {
    
    <span class="hljs-comment">/**
     * å®šä¹‰åˆ‡ç‚¹ï¼šæ‰€æœ‰æ ‡æ³¨<span class="hljs-doctag">@DataSource</span>æ³¨è§£çš„æ–¹æ³•
     */</span>
    <span class="hljs-meta">@Pointcut("@annotation(com.example.annotation.DataSource)")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataSourcePointCut</span><span class="hljs-params">()</span> {}
    
    <span class="hljs-comment">/**
     * ç¯ç»•é€šçŸ¥ï¼šåœ¨æ–¹æ³•æ‰§è¡Œå‰ååˆ‡æ¢æ•°æ®æº
     */</span>
    <span class="hljs-meta">@Around("dataSourcePointCut()")</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint point)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) point.getSignature();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
        
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSourceAnnotation</span> <span class="hljs-operator">=</span> method.getAnnotation(DataSource.class);
        <span class="hljs-keyword">if</span> (dataSourceAnnotation == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ç±»çº§åˆ«æ³¨è§£</span>
            dataSourceAnnotation = point.getTarget().getClass().getAnnotation(DataSource.class);
        }
        
        <span class="hljs-keyword">if</span> (dataSourceAnnotation != <span class="hljs-literal">null</span>) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> dataSourceAnnotation.value();
            <span class="hljs-type">boolean</span> <span class="hljs-variable">clearAfter</span> <span class="hljs-operator">=</span> dataSourceAnnotation.clear();
            
            <span class="hljs-keyword">try</span> {
                log.debug(<span class="hljs-string">"åˆ‡æ¢æ•°æ®æºåˆ°: {}"</span>, dataSourceKey);
                DataSourceContextHolder.setDataSource(dataSourceKey);
                
                <span class="hljs-comment">// æ‰§è¡ŒåŸæ–¹æ³•</span>
                <span class="hljs-keyword">return</span> point.proceed();
                
            } <span class="hljs-keyword">finally</span> {
                <span class="hljs-keyword">if</span> (clearAfter) {
                    DataSourceContextHolder.clear();
                    log.debug(<span class="hljs-string">"æ¸…é™¤æ•°æ®æºä¸Šä¸‹æ–‡"</span>);
                }
            }
        }
        
        <span class="hljs-comment">// æ²¡æœ‰æ³¨è§£ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®æº</span>
        <span class="hljs-keyword">return</span> point.proceed();
    }
}
</code></pre>
<p>æœ€è¿‘ä¸ºäº†å¸®åŠ©å¤§å®¶æ‰¾å·¥ä½œï¼Œä¸“é—¨å»ºäº†ä¸€äº›å·¥ä½œå†…æ¨ç¾¤ï¼Œå„å¤§åŸå¸‚éƒ½æœ‰ï¼Œæ¬¢è¿å„ä½HRå’Œæ‰¾å·¥ä½œçš„å°ä¼™ä¼´è¿›ç¾¤äº¤æµï¼Œç¾¤é‡Œç›®å‰å·²ç»æ”¶é›†äº†ä¸å°‘çš„å·¥ä½œå†…æ¨å²—ä½ã€‚åŠ è‹ä¸‰çš„å¾®ä¿¡ï¼šli_su223ï¼Œå¤‡æ³¨ï¼šæ˜é‡‘+æ‰€åœ¨åŸå¸‚ï¼Œå³å¯è¿›ç¾¤ã€‚</p>
<h2 data-id="heading-12">å››ã€é«˜çº§ç‰¹æ€§</h2>
<p>æœ‰äº›å°ä¼™ä¼´åœ¨åŸºç¡€åŠŸèƒ½å®ç°åï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›é«˜çº§åœºæ™¯çš„éœ€æ±‚ã€‚</p>
<p>ä¸‹é¢ä»‹ç»å‡ ä¸ªç”Ÿäº§ç¯å¢ƒä¸­å¸¸ç”¨çš„é«˜çº§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-13">è¯»å†™åˆ†ç¦»è‡ªåŠ¨è·¯ç”±</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * è¯»å†™åˆ†ç¦»æ•°æ®æºè·¯ç”±å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadWriteDataSourceRouter</span> {
    
    <span class="hljs-comment">// è¯»æ•°æ®æºåˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;String&gt; readDataSources = Arrays.asList(<span class="hljs-string">"slave1"</span>, <span class="hljs-string">"slave2"</span>);
    
    <span class="hljs-comment">// è½®è¯¢è®¡æ•°å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">/**
     * æ ¹æ®SQLè‡ªåŠ¨é€‰æ‹©æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">determineDataSource</span><span class="hljs-params">(<span class="hljs-type">boolean</span> isReadOperation)</span> {
        <span class="hljs-keyword">if</span> (isReadOperation &amp;&amp; !readDataSources.isEmpty()) {
            <span class="hljs-comment">// è¯»æ“ä½œï¼šè½®è¯¢é€‰æ‹©ä»åº“</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> counter.getAndIncrement() % readDataSources.size();
            <span class="hljs-keyword">if</span> (counter.get() &gt; <span class="hljs-number">9999</span>) {
                counter.set(<span class="hljs-number">0</span>); <span class="hljs-comment">// é˜²æ­¢æº¢å‡º</span>
            }
            <span class="hljs-type">String</span> <span class="hljs-variable">readDataSource</span> <span class="hljs-operator">=</span> readDataSources.get(index);
            log.debug(<span class="hljs-string">"è¯»æ“ä½œé€‰æ‹©æ•°æ®æº: {}"</span>, readDataSource);
            <span class="hljs-keyword">return</span> readDataSource;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å†™æ“ä½œï¼šé€‰æ‹©ä¸»åº“</span>
            log.debug(<span class="hljs-string">"å†™æ“ä½œé€‰æ‹©æ•°æ®æº: master"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-string">"master"</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * æ ¹æ®SQLè¯­å¥åˆ¤æ–­æ˜¯å¦ä¸ºè¯»æ“ä½œ
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isReadOperation</span><span class="hljs-params">(String sql)</span> {
        <span class="hljs-keyword">if</span> (sql == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// é»˜è®¤ä¸ºè¯»æ“ä½œ</span>
        }
        
        <span class="hljs-type">String</span> <span class="hljs-variable">trimmedSql</span> <span class="hljs-operator">=</span> sql.trim().toLowerCase();
        <span class="hljs-keyword">return</span> trimmedSql.startsWith(<span class="hljs-string">"select"</span>) || 
               trimmedSql.startsWith(<span class="hljs-string">"show"</span>) ||
               trimmedSql.startsWith(<span class="hljs-string">"explain"</span>);
    }
}

<span class="hljs-comment">/**
 * MyBatisæ‹¦æˆªå™¨ - è‡ªåŠ¨è¯»å†™åˆ†ç¦»
 */</span>
<span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class, method = "update", args = {MappedStatement.class, Object.class}),
    @Signature(type = Executor.class, method = "query", args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ReadWriteInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> ReadWriteDataSourceRouter dataSourceRouter;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> invocation.getMethod().getName();
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        
        <span class="hljs-type">boolean</span> <span class="hljs-variable">isReadOperation</span> <span class="hljs-operator">=</span> <span class="hljs-string">"query"</span>.equals(methodName);
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> getSql(ms, invocation.getArgs()[<span class="hljs-number">1</span>]);
        
        <span class="hljs-comment">// å¦‚æœå½“å‰æ²¡æœ‰æ‰‹åŠ¨è®¾ç½®æ•°æ®æºï¼Œåˆ™è‡ªåŠ¨é€‰æ‹©</span>
        <span class="hljs-keyword">if</span> (!DataSourceContextHolder.hasDataSource()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> dataSourceRouter.determineDataSource(isReadOperation);
            DataSourceContextHolder.setDataSource(dataSource);
            
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">return</span> invocation.proceed();
            } <span class="hljs-keyword">finally</span> {
                DataSourceContextHolder.clear();
            }
        }
        
        <span class="hljs-keyword">return</span> invocation.proceed();
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getSql</span><span class="hljs-params">(MappedStatement ms, Object parameter)</span> {
        <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> ms.getBoundSql(parameter);
        <span class="hljs-keyword">return</span> boundSql.getSql();
    }
}
</code></pre>
<h3 data-id="heading-14">å¤šç§Ÿæˆ·æ•°æ®æºç®¡ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤šç§Ÿæˆ·æ•°æ®æºç®¡ç†å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TenantDataSourceManager</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicRoutingDataSource dynamicRoutingDataSource;
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DataSourceProperties dataSourceProperties;
    
    <span class="hljs-comment">// ç§Ÿæˆ·æ•°æ®æºé…ç½®ç¼“å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, TenantDataSourceConfig&gt; tenantConfigCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">/**
     * æ ¹æ®ç§Ÿæˆ·IDè·å–æ•°æ®æº
     */</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">getDataSourceForTenant</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"tenant_"</span> + tenantId;
        
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨æ•°æ®æº</span>
        <span class="hljs-keyword">if</span> (dynamicRoutingDataSource.getTargetDataSources().containsKey(dataSourceKey)) {
            <span class="hljs-keyword">return</span> (DataSource) dynamicRoutingDataSource.getTargetDataSources().get(dataSourceKey);
        }
        
        <span class="hljs-comment">// åŠ¨æ€åˆ›å»ºæ•°æ®æº</span>
        <span class="hljs-keyword">synchronized</span> (<span class="hljs-built_in">this</span>) {
            <span class="hljs-keyword">if</span> (!dynamicRoutingDataSource.getTargetDataSources().containsKey(dataSourceKey)) {
                <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> createTenantDataSource(tenantId);
                dynamicRoutingDataSource.addDataSource(dataSourceKey, dataSource);
                log.info(<span class="hljs-string">"ä¸ºç§Ÿæˆ· {} åˆ›å»ºæ•°æ®æº: {}"</span>, tenantId, dataSourceKey);
            }
        }
        
        <span class="hljs-keyword">return</span> (DataSource) dynamicRoutingDataSource.getTargetDataSources().get(dataSourceKey);
    }
    
    <span class="hljs-comment">/**
     * åŠ¨æ€åˆ›å»ºç§Ÿæˆ·æ•°æ®æº
     */</span>
    <span class="hljs-keyword">private</span> DataSource <span class="hljs-title function_">createTenantDataSource</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-type">TenantDataSourceConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> getTenantConfig(tenantId);
        
        <span class="hljs-type">HikariDataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HikariDataSource</span>();
        dataSource.setJdbcUrl(buildJdbcUrl(config));
        dataSource.setUsername(config.getUsername());
        dataSource.setPassword(config.getPassword());
        dataSource.setDriverClassName(<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>);
        dataSource.setMaximumPoolSize(<span class="hljs-number">10</span>);
        dataSource.setMinimumIdle(<span class="hljs-number">2</span>);
        dataSource.setConnectionTimeout(<span class="hljs-number">30000</span>);
        dataSource.setIdleTimeout(<span class="hljs-number">600000</span>);
        dataSource.setMaxLifetime(<span class="hljs-number">1800000</span>);
        dataSource.setPoolName(<span class="hljs-string">"TenantPool_"</span> + tenantId);
        
        <span class="hljs-keyword">return</span> dataSource;
    }
    
    <span class="hljs-comment">/**
     * è·å–ç§Ÿæˆ·æ•°æ®æºé…ç½®ï¼ˆå¯ä»é…ç½®ä¸­å¿ƒæˆ–æ•°æ®åº“è·å–ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> TenantDataSourceConfig <span class="hljs-title function_">getTenantConfig</span><span class="hljs-params">(String tenantId)</span> {
        <span class="hljs-keyword">return</span> tenantConfigCache.computeIfAbsent(tenantId, key -&gt; {
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥ä»é…ç½®ä¸­å¿ƒã€æ•°æ®åº“æˆ–ç¼“å­˜ä¸­è·å–ç§Ÿæˆ·é…ç½®</span>
            <span class="hljs-comment">// ç®€åŒ–å®ç°ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦å®Œå–„</span>
            <span class="hljs-type">TenantDataSourceConfig</span> <span class="hljs-variable">config</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TenantDataSourceConfig</span>();
            config.setHost(<span class="hljs-string">"tenant-"</span> + tenantId + <span class="hljs-string">".db.example.com"</span>);
            config.setPort(<span class="hljs-number">3306</span>);
            config.setDatabase(<span class="hljs-string">"tenant_"</span> + tenantId);
            config.setUsername(<span class="hljs-string">"tenant_"</span> + tenantId);
            config.setPassword(<span class="hljs-string">"password_"</span> + tenantId);
            <span class="hljs-keyword">return</span> config;
        });
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">buildJdbcUrl</span><span class="hljs-params">(TenantDataSourceConfig config)</span> {
        <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"jdbc:mysql://%s:%d/%s?useUnicode=true&amp;characterEncoding=utf8&amp;rewriteBatchedStatements=true"</span>,
                config.getHost(), config.getPort(), config.getDatabase());
    }
    
    <span class="hljs-meta">@Data</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TenantDataSourceConfig</span> {
        <span class="hljs-keyword">private</span> String host;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> port;
        <span class="hljs-keyword">private</span> String database;
        <span class="hljs-keyword">private</span> String username;
        <span class="hljs-keyword">private</span> String password;
    }
}
</code></pre>
<h3 data-id="heading-15">æ•°æ®æºå¥åº·ç›‘æ§</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ•°æ®æºå¥åº·ç›‘æ§å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSourceHealthMonitor</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> DynamicRoutingDataSource dynamicRoutingDataSource;
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduler</span> <span class="hljs-operator">=</span> Executors.newScheduledThreadPool(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// å¥åº·çŠ¶æ€ç¼“å­˜</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Boolean&gt; healthStatus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯åŠ¨å¥åº·æ£€æŸ¥ä»»åŠ¡</span>
        scheduler.scheduleAtFixedRate(<span class="hljs-built_in">this</span>::checkAllDataSources, <span class="hljs-number">0</span>, <span class="hljs-number">30</span>, TimeUnit.SECONDS);
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥æ‰€æœ‰æ•°æ®æºçš„å¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkAllDataSources</span><span class="hljs-params">()</span> {
        Map&lt;Object, Object&gt; dataSources = dynamicRoutingDataSource.getTargetDataSources();
        
        <span class="hljs-keyword">for</span> (Map.Entry&lt;Object, Object&gt; entry : dataSources.entrySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">dataSourceKey</span> <span class="hljs-operator">=</span> (String) entry.getKey();
            <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> (DataSource) entry.getValue();
            
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isHealthy</span> <span class="hljs-operator">=</span> checkDataSourceHealth(dataSource);
            healthStatus.put(dataSourceKey, isHealthy);
            
            <span class="hljs-keyword">if</span> (!isHealthy) {
                log.warn(<span class="hljs-string">"æ•°æ®æº {} å¥åº·æ£€æŸ¥å¤±è´¥"</span>, dataSourceKey);
                <span class="hljs-comment">// å¯ä»¥å‘é€å‘Šè­¦é€šçŸ¥</span>
            }
        }
    }
    
    <span class="hljs-comment">/**
     * æ£€æŸ¥å•ä¸ªæ•°æ®æºå¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkDataSourceHealth</span><span class="hljs-params">(DataSource dataSource)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> dataSource.getConnection();
             <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> conn.createStatement()) {
            
            <span class="hljs-type">ResultSet</span> <span class="hljs-variable">rs</span> <span class="hljs-operator">=</span> stmt.executeQuery(<span class="hljs-string">"SELECT 1"</span>);
            <span class="hljs-keyword">return</span> rs.next() &amp;&amp; rs.getInt(<span class="hljs-number">1</span>) == <span class="hljs-number">1</span>;
            
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            log.error(<span class="hljs-string">"æ•°æ®æºå¥åº·æ£€æŸ¥å¼‚å¸¸"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * è·å–æ•°æ®æºå¥åº·çŠ¶æ€
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDataSourceHealthy</span><span class="hljs-params">(String dataSourceKey)</span> {
        <span class="hljs-keyword">return</span> healthStatus.getOrDefault(dataSourceKey, <span class="hljs-literal">true</span>);
    }
    
    <span class="hljs-comment">/**
     * è·å–å¥åº·çš„æ•°æ®æºåˆ—è¡¨
     */</span>
    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">getHealthyDataSources</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> healthStatus.entrySet().stream()
                .filter(Map.Entry::getValue)
                .map(Map.Entry::getKey)
                .collect(Collectors.toList());
    }
    
    <span class="hljs-meta">@PreDestroy</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> {
        scheduler.shutdown();
    }
}
</code></pre>
<h2 data-id="heading-16">äº”ã€åŠ¨æ€æ•°æ®æºçš„åº”ç”¨åœºæ™¯</h2>
<p>è®©æˆ‘ä»¬é€šè¿‡æ¶æ„å›¾æ¥ç†è§£åŠ¨æ€æ•°æ®æºçš„å…¸å‹åº”ç”¨åœºæ™¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c5d9765900343a4ae09e1f22964e808~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5LiJ6K-05oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764473239&amp;x-signature=31vVt3z3owBI7CTOge7hTc4LtBQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">å…­ã€ä¼˜ç¼ºç‚¹</h2>
<h3 data-id="heading-18">ä¼˜ç‚¹</h3>
<ol>
<li><strong>çµæ´»æ€§é«˜</strong>ï¼šæ”¯æŒè¿è¡Œæ—¶åŠ¨æ€æ·»åŠ ã€ç§»é™¤æ•°æ®æº</li>
<li><strong>è§£è€¦æ€§å¥½</strong>ï¼šä¸šåŠ¡ä»£ç ä¸å…·ä½“æ•°æ®æºè§£è€¦</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šæ˜“äºå®ç°è¯»å†™åˆ†ç¦»ã€å¤šç§Ÿæˆ·ç­‰å¤æ‚åœºæ™¯</li>
<li><strong>ç»´æŠ¤æ–¹ä¾¿</strong>ï¼šæ•°æ®æºé…ç½®é›†ä¸­ç®¡ç†ï¼Œä¾¿äºç»´æŠ¤</li>
</ol>
<h3 data-id="heading-19">ç¼ºç‚¹</h3>
<ol>
<li><strong>å¤æ‚åº¦å¢åŠ </strong>ï¼šç³»ç»Ÿæ¶æ„å˜å¾—æ›´åŠ å¤æ‚</li>
<li><strong>äº‹åŠ¡ç®¡ç†å¤æ‚</strong>ï¼šè·¨æ•°æ®æºäº‹åŠ¡éœ€è¦ç‰¹æ®Šå¤„ç†</li>
<li><strong>è¿æ¥æ± å¼€é”€</strong>ï¼šæ¯ä¸ªæ•°æ®æºéƒ½éœ€è¦ç‹¬ç«‹çš„è¿æ¥æ± </li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šæ•°æ®æºåˆ‡æ¢å¢åŠ äº†è°ƒè¯•å¤æ‚åº¦</li>
</ol>
<h2 data-id="heading-20">ä¸ƒã€ç”Ÿäº§ç¯å¢ƒæ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-21">äº‹åŠ¡ç®¡ç†ç­–ç•¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * å¤šæ•°æ®æºäº‹åŠ¡ç®¡ç†å™¨
 */</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiDataSourceTransactionManager</span> {
    
    <span class="hljs-comment">/**
     * åœ¨å¤šä¸ªæ•°æ®æºä¸Šæ‰§è¡Œäº‹åŠ¡æ€§æ“ä½œ
     */</span>
    <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeInTransaction</span><span class="hljs-params">(Runnable task, String... dataSources)</span> {
        <span class="hljs-keyword">if</span> (dataSources.length == <span class="hljs-number">1</span>) {
            <span class="hljs-comment">// å•æ•°æ®æºäº‹åŠ¡</span>
            DataSourceContextHolder.setDataSource(dataSources[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">try</span> {
                task.run();
            } <span class="hljs-keyword">finally</span> {
                DataSourceContextHolder.clear();
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¤šæ•°æ®æºä¼ªäº‹åŠ¡ï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰</span>
            executeWithCompensation(task, dataSources);
        }
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨è¡¥å¿æœºåˆ¶å®ç°å¤šæ•°æ®æº"äº‹åŠ¡"
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeWithCompensation</span><span class="hljs-params">(Runnable task, String[] dataSources)</span> {
        List&lt;Runnable&gt; compensationTasks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æŒ‰é¡ºåºæ‰§è¡Œå„ä¸ªæ•°æ®æºçš„æ“ä½œ</span>
            <span class="hljs-keyword">for</span> (String dataSource : dataSources) {
                DataSourceContextHolder.setDataSource(dataSource);
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// æ‰§è¡Œå®é™…ä¸šåŠ¡æ“ä½œ</span>
                    task.run();
                    
                    <span class="hljs-comment">// è®°å½•è¡¥å¿æ“ä½œ</span>
                    compensationTasks.add(<span class="hljs-number">0</span>, createCompensationTask(dataSource));
                    
                } <span class="hljs-keyword">finally</span> {
                    DataSourceContextHolder.clear();
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ‰§è¡Œè¡¥å¿æ“ä½œ</span>
            log.error(<span class="hljs-string">"å¤šæ•°æ®æºæ“ä½œå¤±è´¥ï¼Œæ‰§è¡Œè¡¥å¿æ“ä½œ"</span>, e);
            executeCompensation(compensationTasks);
            <span class="hljs-keyword">throw</span> e;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeCompensation</span><span class="hljs-params">(List&lt;Runnable&gt; compensationTasks)</span> {
        <span class="hljs-keyword">for</span> (Runnable compensation : compensationTasks) {
            <span class="hljs-keyword">try</span> {
                compensation.run();
            } <span class="hljs-keyword">catch</span> (Exception ex) {
                log.error(<span class="hljs-string">"è¡¥å¿æ“ä½œæ‰§è¡Œå¤±è´¥"</span>, ex);
                <span class="hljs-comment">// è®°å½•è¡¥å¿å¤±è´¥ï¼Œéœ€è¦äººå·¥ä»‹å…¥</span>
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-22">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li><strong>è¿æ¥æ± ä¼˜åŒ–</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´å„æ•°æ®æºè¿æ¥æ± å‚æ•°</li>
<li><strong>æ•°æ®æºé¢„çƒ­</strong>ï¼šåº”ç”¨å¯åŠ¨æ—¶é¢„çƒ­å¸¸ç”¨æ•°æ®æº</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šç¼“å­˜æ•°æ®æºé…ç½®å’Œè·¯ç”±ä¿¡æ¯</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šå»ºç«‹å®Œå–„çš„æ•°æ®æºç›‘æ§ä½“ç³»</li>
</ol>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>åŠ¨æ€æ•°æ®æºæ˜¯ä¸€ä¸ªå¼ºå¤§çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°è§£å†³å¤šæ•°æ®æºç®¡ç†çš„å¤æ‚æ€§ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡çš„è¯¦ç»†è§£æï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒåŸç†</strong>ï¼šåŸºäº<code>AbstractRoutingDataSource</code>å’Œ<code>ThreadLocal</code>çš„ä¸Šä¸‹æ–‡ç®¡ç†</li>
<li><strong>å®ç°æ–¹å¼</strong>ï¼šæ³¨è§£+AOPçš„å£°æ˜å¼æ•°æ®æºåˆ‡æ¢</li>
<li><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šè¯»å†™åˆ†ç¦»ã€å¤šç§Ÿæˆ·ã€å¥åº·ç›‘æ§ç­‰ç”Ÿäº§çº§åŠŸèƒ½</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤šç§Ÿæˆ·ã€è¯»å†™åˆ†ç¦»ã€åˆ†åº“åˆ†è¡¨ç­‰å¤æ‚æ•°æ®æ¶æ„</li>
</ol>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®ç°æ–¹æ¡ˆï¼Œä¸è¦è¿‡åº¦è®¾è®¡ã€‚</p>
<p>åŒæ—¶ï¼Œè¦å»ºç«‹å®Œå–„çš„ç›‘æ§å’Œè¿ç»´ä½“ç³»ï¼Œç¡®ä¿åŠ¨æ€æ•°æ®æºçš„ç¨³å®šè¿è¡Œã€‚</p>
<h2 data-id="heading-24">æœ€åè¯´ä¸€å¥(æ±‚å…³æ³¨ï¼Œåˆ«ç™½å«–æˆ‘)</h2>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„è¯ï¼Œå¸®å¿™å…³æ³¨ä¸€ä¸‹æˆ‘çš„åŒåå…¬ä¼—å·ï¼šè‹ä¸‰è¯´æŠ€æœ¯ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚</p>
<p>æ±‚ä¸€é”®ä¸‰è¿ï¼šç‚¹èµã€è½¬å‘ã€åœ¨çœ‹ã€‚</p>
<p>å…³æ³¨å…¬ä¼—å·ï¼šã€è‹ä¸‰è¯´æŠ€æœ¯ã€‘ï¼Œåœ¨å…¬ä¼—å·ä¸­å›å¤ï¼šè¿›å¤§å‚ï¼Œå¯ä»¥å…è´¹è·å–æˆ‘æœ€è¿‘æ•´ç†çš„10ä¸‡å­—çš„é¢è¯•å®å…¸ï¼Œå¥½å¤šå°ä¼™ä¼´é è¿™ä¸ªå®å…¸æ‹¿åˆ°äº†å¤šå®¶å¤§å‚çš„offerã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575083657994633243</link>    <guid>https://juejin.cn/post/7575083657994633243</guid>    <pubDate>2025-11-23T02:21:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994633243" data-draft-id="7575119254313238554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Python,Trae"/> <meta itemprop="datePublished" content="2025-11-23T02:21:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PythonèŒä¸šè·¯çº¿è§„åˆ’ï¼šä»å…¥é—¨åˆ°é«˜çº§å¼€å‘è€…çš„æˆé•¿æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:21:39.000Z" title="Sun Nov 23 2025 02:21:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>Python ä»¥å…¶ç®€æ´ä¼˜é›…çš„è¯­æ³•ã€å¼ºå¤§çš„ç”Ÿæ€ç³»ç»Ÿå’Œå¹¿æ³›çš„åº”ç”¨é¢†åŸŸï¼Œæˆä¸ºå½“ä»Šæœ€å…·èŒä¸šç«äº‰åŠ›çš„ç¼–ç¨‹è¯­è¨€ä¹‹ä¸€ã€‚æ— è®ºä½ å¸Œæœ›æˆä¸ºåç«¯å·¥ç¨‹å¸ˆã€æ•°æ®åˆ†æå¸ˆã€è‡ªåŠ¨åŒ–å·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯ AI é¢†åŸŸçš„ä¸“å®¶ï¼ŒPython éƒ½èƒ½æä¾›æ¸…æ™°çš„è·¯å¾„ã€‚</p>
</blockquote>
<p>æœ¬ç¯‡æ–‡ç« å°†ä»èŒä¸šæ–¹å‘ã€æŠ€èƒ½æˆé•¿è·¯çº¿ã€å¿…å¤‡å·¥å…·é“¾ã€è¿›é˜¶å­¦ä¹ å»ºè®®å’Œå°±ä¸šè§„åˆ’å‡ ä¸ªç»´åº¦ï¼Œæ„å»ºä¸€å¥—å®Œæ•´çš„ Python èŒä¸šå‘å±•è·¯çº¿å›¾ï¼Œå¸®åŠ©è¯»è€…å®ç°ä»å…¥é—¨åˆ°ä¸“ä¸šçº§å¼€å‘è€…çš„æˆé•¿ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Pythonçš„ä¸»æµèŒä¸šæ–¹å‘</h2>
<p>Python çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶é€‚ç”¨çš„å²—ä½éå¸¸å¹¿æ³›ï¼Œç›®å‰æœ€çƒ­é—¨çš„æ–¹å‘åŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-1">1. åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼ˆDjango / Flask / FastAPIï¼‰</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ„å»º Web API</li>
<li>ä¸šåŠ¡é€»è¾‘å¼€å‘</li>
<li>æ•°æ®åº“ä¸ç¼“å­˜è®¾è®¡</li>
<li>é«˜å¹¶å‘ä¸åˆ†å¸ƒå¼ç³»ç»Ÿä¼˜åŒ–</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Djangoã€FastAPIã€Flaskã€MySQLã€Redisã€Celeryã€Nginxã€Docker</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢å·¥ç¨‹æ¶æ„ã€ä¸šåŠ¡å¼€å‘ã€ç³»ç»Ÿè®¾è®¡çš„äººã€‚</p>
<hr/>
<h3 data-id="heading-2">2. æ•°æ®åˆ†æå¸ˆ / æ•°æ®å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ•°æ®æ¸…æ´—å’Œç»Ÿè®¡åˆ†æ</li>
<li>æ„å»ºæŠ¥è¡¨å’Œå¯è§†åŒ–</li>
<li>æ•°æ®ä»“åº“æ„å»º</li>
<li>ETL æµç¨‹æ­å»º</li>
</ul>
<p>å¸¸ç”¨å·¥å…·ï¼š
Pandasã€NumPyã€Matplotlibã€PySparkã€SQLã€Tableau</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æ•°æ®ã€é€»è¾‘åˆ†æã€å•†ä¸šæ´å¯Ÿçš„äººã€‚</p>
<hr/>
<h3 data-id="heading-3">3. äººå·¥æ™ºèƒ½ä¸æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>è®­ç»ƒ ML/DL æ¨¡å‹</li>
<li>ç‰¹å¾å·¥ç¨‹</li>
<li>AI åº”ç”¨éƒ¨ç½²ï¼ˆæ¨¡å‹æœåŠ¡åŒ–ï¼‰</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Scikit-Learnã€TensorFlowã€PyTorchã€FastAPIã€ONNX</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æ•°å­¦ã€ç®—æ³•ã€æ¨¡å‹è®­ç»ƒä¸ç ”ç©¶ã€‚</p>
<hr/>
<h3 data-id="heading-4">4. è‡ªåŠ¨åŒ–è¿ç»´ / DevOps å·¥ç¨‹å¸ˆ</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>æ‰¹é‡è¿ç»´è„šæœ¬å¼€å‘</li>
<li>è‡ªåŠ¨éƒ¨ç½²ä¸ CICD</li>
<li>ç³»ç»Ÿç›‘æ§ä¸ç®¡ç†</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯æ ˆï¼š
Ansibleã€Fabricã€Shellã€Dockerã€Kubernetes</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢è‡ªåŠ¨åŒ–ã€ç³»ç»Ÿç®¡ç†ã€æ•ˆç‡æå‡çš„äººã€‚</p>
<hr/>
<h3 data-id="heading-5">5. æµ‹è¯•å¼€å‘å·¥ç¨‹å¸ˆï¼ˆTest Developmentï¼‰</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</li>
<li>æ¥å£æµ‹è¯•ã€æ€§èƒ½æµ‹è¯•</li>
<li>æŒç»­é›†æˆæµ‹è¯•ä½“ç³»</li>
</ul>
<p>å¸¸ç”¨å·¥å…·ï¼š
pytestã€unittestã€Seleniumã€JMeterã€Allure</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢æµç¨‹ä¸¥è°¨ã€å…³æ³¨ç»†èŠ‚ã€çƒ­çˆ±è´¨é‡å·¥ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-6">6. çˆ¬è™«å·¥ç¨‹å¸ˆ / ä¿¡æ¯é‡‡é›†å¼€å‘</h3>
<p>å…¸å‹å·¥ä½œå†…å®¹ï¼š</p>
<ul>
<li>é«˜æ€§èƒ½çˆ¬è™«ç¼–å†™</li>
<li>æ•°æ®æŠ“å–ä¸å»é‡</li>
<li>åçˆ¬çªç ´ä¸ä»£ç†æ± æ„å»º</li>
</ul>
<p>å¸¸ç”¨æŠ€æœ¯ï¼š
requestsã€BeautifulSoupã€Scrapyã€Selenium</p>
<p>é€‚åˆäººç¾¤ï¼š
å–œæ¬¢åˆ†æç½‘é¡µç»“æ„ã€è§£å†³åçˆ¬æŒ‘æˆ˜ã€‚</p>
<hr/>
<h2 data-id="heading-7">äºŒã€æˆé•¿è·¯çº¿å›¾ï¼šä»æ–°æ‰‹åˆ°é«˜çº§å¼€å‘è€…</h2>
<p>ä¸‹é¢æ˜¯ä¸€æ¡é€šç”¨çš„ Python ç¨‹åºå‘˜æˆé•¿è·¯å¾„ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>é˜¶æ®µä¸€ï¼šåŸºç¡€è¯­æ³•ï¼ˆ0â€“2ä¸ªæœˆï¼‰</strong></h3>
<p>æ ¸å¿ƒæŠ€èƒ½ï¼š</p>
<ul>
<li>Python åŸºç¡€è¯­æ³•ã€æ•°æ®ç±»å‹ã€æ§åˆ¶æµ</li>
<li>å‡½æ•°ã€æ¨¡å—ã€åŒ…</li>
<li>æ–‡ä»¶ä¸ JSON å¤„ç†</li>
<li>é¢å‘å¯¹è±¡åŸºç¡€</li>
</ul>
<p>ç›®æ ‡æˆæœï¼š
èƒ½è¯»æ‡‚å¹¶ç¼–å†™ç®€å•è„šæœ¬ï¼Œå®Œæˆå°å‹ç¨‹åºã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>é˜¶æ®µäºŒï¼šå®æˆ˜èƒ½åŠ›æå‡ï¼ˆ2â€“6ä¸ªæœˆï¼‰</strong></h3>
<p>éœ€è¦æŒæ¡ï¼š</p>
<ul>
<li>requestsã€pandasã€openpyxl ç­‰å·¥å…·åº“</li>
<li>loggingã€pytestã€venv çš„ä½¿ç”¨</li>
<li>Flask/Django å…¥é—¨</li>
<li>Git ç‰ˆæœ¬ç®¡ç†</li>
</ul>
<p>å¯å®Œæˆï¼š</p>
<ul>
<li>å®ç”¨å·¥å…·å¼€å‘ï¼ˆExcel æ‰¹å¤„ç†ã€çˆ¬è™«è„šæœ¬ï¼‰</li>
<li>å°å‹ Web æœåŠ¡ API</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>é˜¶æ®µä¸‰ï¼šèŒä¸šæ–¹å‘ä¸“ç²¾ï¼ˆ6â€“18ä¸ªæœˆï¼‰</strong></h3>
<p>æ ¹æ®ç›®æ ‡æ–¹å‘å­¦ä¹ ä¸åŒæŠ€èƒ½ï¼š</p>
<h4 data-id="heading-11">åç«¯æ–¹å‘</h4>
<ul>
<li>Django æ·±å…¥ï¼šORMã€MiddleWareã€RestFramework</li>
<li>FastAPI å¼‚æ­¥å¼€å‘</li>
<li>æ•°æ®åº“ä¼˜åŒ–</li>
<li>Dockerã€CI/CD</li>
</ul>
<h4 data-id="heading-12">æ•°æ®åˆ†ææ–¹å‘</h4>
<ul>
<li>Pandas ç†Ÿç»ƒæŒæ¡</li>
<li>æ•°æ®å¯è§†åŒ–ï¼ˆMatplotlibã€Seabornï¼‰</li>
<li>æœºå™¨å­¦ä¹ åŸºç¡€ï¼ˆScikit-learnï¼‰</li>
<li>SQL ç²¾é€š</li>
</ul>
<h4 data-id="heading-13">AI æ–¹å‘</h4>
<ul>
<li>æœºå™¨å­¦ä¹ </li>
<li>æ·±åº¦å­¦ä¹ æ¡†æ¶ï¼ˆPyTorchï¼‰</li>
<li>æ¨¡å‹éƒ¨ç½²</li>
</ul>
<h4 data-id="heading-14">è¿ç»´æ–¹å‘</h4>
<ul>
<li>Linuxã€Shell</li>
<li>Ansibleã€Fabric è‡ªåŠ¨åŒ–è„šæœ¬</li>
<li>Kubernetes</li>
</ul>
<hr/>
<h3 data-id="heading-15"><strong>é˜¶æ®µå››ï¼šé«˜çº§æŠ€èƒ½å¼ºåŒ–ï¼ˆ18â€“36ä¸ªæœˆï¼‰</strong></h3>
<p>æå‡å†…å®¹ï¼š</p>
<ul>
<li>ä»£ç è§„èŒƒä¸æ¶æ„èƒ½åŠ›</li>
<li>é«˜æ€§èƒ½ä¼˜åŒ–ä¸å¹¶å‘ç¼–ç¨‹</li>
<li>å¤§å‹é¡¹ç›®çš„æ¨¡å—åŒ–è®¾è®¡</li>
<li>ä¸šåŠ¡æ¶æ„ç†è§£ä¸ç³»ç»Ÿè®¾è®¡</li>
</ul>
<p>ç›®æ ‡ï¼š
å¯ä»¥æ‰¿æ‹…ä¸­å¤§å‹é¡¹ç›®è®¾è®¡ï¼Œæˆä¸ºå›¢é˜Ÿæ ¸å¿ƒå¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¸‰ã€å¿…å¤‡å·¥å…·é“¾</h2>
<p>æ— è®ºèµ°å“ªä¸ªæ–¹å‘ï¼ŒPython å¼€å‘è€…éƒ½éœ€è¦æŒæ¡ä»¥ä¸‹å·¥å…·ç”Ÿæ€ï¼š</p>
<h3 data-id="heading-17">ä»£ç ä¸ç¯å¢ƒå·¥å…·</h3>
<ul>
<li>Git / GitHub</li>
<li>venvã€condaã€poetry</li>
<li>Docker å®¹å™¨</li>
</ul>
<h3 data-id="heading-18">è°ƒè¯•ä¸æµ‹è¯•å·¥å…·</h3>
<ul>
<li>pdbã€logging</li>
<li>pytestã€coverage</li>
</ul>
<h3 data-id="heading-19">æ€§èƒ½åˆ†æå·¥å…·</h3>
<ul>
<li>timeit</li>
<li>cProfile</li>
<li>memory-profiler</li>
</ul>
<h3 data-id="heading-20">éƒ¨ç½²å·¥å…·</h3>
<ul>
<li>Gunicorn + Nginx</li>
<li>Docker Compose</li>
<li>CI/CDï¼ˆGitHub Actionsï¼‰</li>
</ul>
<p>è¿™äº›å·¥å…·å°†ä¼´éšä½ æ•´ä¸ªèŒä¸šç”Ÿæ¶¯ã€‚</p>
<hr/>
<h2 data-id="heading-21">å››ã€å¦‚ä½•é€‰æ‹©é€‚åˆè‡ªå·±çš„æ–¹å‘ï¼Ÿ</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„é€‰æ‹©å‚è€ƒï¼š</p>

































<table><thead><tr><th>å…´è¶£ç±»å‹</th><th>æ¨èæ–¹å‘</th></tr></thead><tbody><tr><td>å–œæ¬¢ä¸šåŠ¡å¼€å‘ã€æ¶æ„è®¾è®¡</td><td>åç«¯å¼€å‘</td></tr><tr><td>å–œæ¬¢æ•°æ®å’Œåˆ†æ</td><td>æ•°æ®åˆ†æå¸ˆ</td></tr><tr><td>å–œæ¬¢æ•°å­¦å’Œç®—æ³•</td><td>AI å·¥ç¨‹å¸ˆ</td></tr><tr><td>å–œæ¬¢ç³»ç»Ÿç®¡ç†</td><td>è‡ªåŠ¨åŒ–è¿ç»´</td></tr><tr><td>å–œæ¬¢æµ‹è¯•ä¸è´¨é‡å·¥ç¨‹</td><td>æµ‹è¯•å¼€å‘</td></tr><tr><td>å–œæ¬¢ç ”ç©¶ç½‘é¡µç»“æ„ä¸çªç ´åçˆ¬</td><td>çˆ¬è™«å·¥ç¨‹å¸ˆ</td></tr></tbody></table>
<p>æ²¡æœ‰æœ€å¥½çš„æ–¹å‘ï¼Œåªæœ‰æœ€é€‚åˆä½ çš„æ–¹å‘ã€‚</p>
<hr/>
<h2 data-id="heading-22">äº”ã€æ±‚èŒå‡†å¤‡ï¼šä»é¡¹ç›®åˆ°é¢è¯•</h2>
<h3 data-id="heading-23">1. é¡¹ç›®å‡†å¤‡</h3>
<p>æ ¹æ®æ–¹å‘å‡†å¤‡è‡³å°‘ 2â€“4 ä¸ªå¯å±•ç¤ºçš„å®æˆ˜é¡¹ç›®ï¼š</p>
<p>åç«¯æ–¹å‘ï¼š</p>
<ul>
<li>Django/Flask ç®¡ç†ç³»ç»Ÿ</li>
<li>FastAPI + Vue å…¨æ ˆé¡¹ç›®</li>
</ul>
<p>æ•°æ®æ–¹å‘ï¼š</p>
<ul>
<li>æ•°æ®åˆ†ææŠ¥å‘Š</li>
<li>æ•°æ®å¯è§†åŒ– dashboard</li>
</ul>
<p>AI æ–¹å‘ï¼š</p>
<ul>
<li>å›å½’/åˆ†ç±»æ¨¡å‹</li>
<li>æ·±åº¦å­¦ä¹ å°é¡¹ç›®</li>
</ul>
<p>è‡ªåŠ¨åŒ–è¿ç»´æ–¹å‘ï¼š</p>
<ul>
<li>è‡ªåŠ¨éƒ¨ç½²ç³»ç»Ÿ</li>
<li>æ‰¹é‡æ—¥å¿—é‡‡é›†è„šæœ¬</li>
</ul>
<hr/>
<h3 data-id="heading-24">2. ç®€å†å»ºè®®</h3>
<ul>
<li>ç”¨é¡¹ç›®ä½“ç°èƒ½åŠ›ï¼Œä¸å †æŠ€èƒ½å…³é”®è¯</li>
<li>é‡åŒ–æˆæœï¼ˆå¦‚â€œæ¥å£å“åº”é€Ÿåº¦é™ä½30ï¼…â€ï¼‰</li>
<li>å±•ç¤º GitHub é“¾æ¥</li>
</ul>
<hr/>
<h3 data-id="heading-25">3. é¢è¯•å‡†å¤‡</h3>
<ul>
<li>Python åŸºç¡€ä¸ç®—æ³•</li>
<li>æ•°æ®ç»“æ„ä¸ 15 ä¸ªå¸¸è§é¢è¯•æ¨¡å—</li>
<li>æ–¹å‘ç›¸å…³æ¡†æ¶åŸç†</li>
</ul>
<hr/>
<h2 data-id="heading-26">å…­ã€æ€»ç»“ï¼šPython æ˜¯ä¸€æ¡å¯é•¿ä¹…æ·±è€•çš„èŒä¸šä¹‹è·¯</h2>
<p>Python çš„ç”Ÿæ€è¦†ç›–è½¯ä»¶å·¥ç¨‹æœ€ä¸»æµçš„æ‰€æœ‰é¢†åŸŸï¼Œå› æ­¤æ— è®ºä½ æƒ³èµ°å“ªæ¡èŒä¸šè·¯çº¿ï¼Œéƒ½èƒ½åœ¨ Python è¯­è¨€ä½“ç³»ä¸­æ‰¾åˆ°æ¸…æ™°çš„æˆé•¿è·¯å¾„ã€‚</p>
<p>ä»åŸºç¡€è¯­æ³•å¼€å§‹ï¼Œé€æ¸æ·±å…¥æ¡†æ¶ä¸å·¥å…·ï¼Œå†è¿›è¡Œæ–¹å‘åŒ–ä¸“ç²¾ï¼Œæœ€ç»ˆä½ å¯ä»¥æˆé•¿ä¸ºå…¨æ ˆå¼€å‘ã€æ•°æ®ä¸“å®¶ï¼Œæˆ– AI é«˜çº§å·¥ç¨‹å¸ˆã€‚</p>
<p>çœŸæ­£çš„æˆé•¿å…³é”®åªæœ‰ä¸¤ä¸ªï¼š
æŒç»­å­¦ä¹ 
æŒç»­å®è·µ</p>
<p>æ— è®ºä½ ç°åœ¨å¤„äºå“ªä¸ªé˜¶æ®µï¼Œéƒ½å¯ä»¥ä»ä»Šå¤©å¼€å§‹æ„å»ºè‡ªå·±çš„ Python èŒä¸šè·¯çº¿å›¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575103881421717558</link>    <guid>https://juejin.cn/post/7575103881421717558</guid>    <pubDate>2025-11-22T11:07:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881421717558" data-draft-id="7575230119103922217" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-22T11:07:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¶…å¥½ç”¨çš„è½®æ’­å›¾ç¥å™¨ï¼šSwiperæ’ä»¶å…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:07:21.000Z" title="Sat Nov 22 2025 11:07:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è½®æ’­å›¾ï¼ˆCarouselï¼‰æ˜¯ç°ä»£ç½‘é¡µè®¾è®¡ä¸­ä¸å¯æˆ–ç¼ºçš„äº¤äº’å…ƒç´ ï¼Œæ— è®ºæ˜¯å•†å“å±•ç¤ºã€ç„¦ç‚¹å›¾è¿˜æ˜¯å†…å®¹æ¨èï¼Œéƒ½èƒ½çœ‹åˆ°å®ƒçš„èº«å½±ã€‚ä»Šå¤©æˆ‘è¦å‘å¤§å®¶æ¨èä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€ç®€å•æ˜“ç”¨çš„è½®æ’­å›¾æ’ä»¶â€”â€”<strong>Swiper</strong>ï¼</p>
<h2 data-id="heading-0">Swiper</h2>
<p>Swiperæ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æºçš„ç°ä»£åŒ–è§¦æ‘¸æ»‘åŠ¨æ’ä»¶ï¼Œä¸“é—¨ä¸ºç§»åŠ¨è®¾å¤‡è®¾è®¡ï¼ŒåŒæ—¶ä¹Ÿå®Œç¾æ”¯æŒæ¡Œé¢ç«¯ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„APIå’Œçµæ´»çš„é…ç½®é€‰é¡¹ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åˆ›å»ºå„ç§ç‚«é…·çš„æ»‘åŠ¨æ•ˆæœã€‚</p>
<h3 data-id="heading-1">æ ¸å¿ƒç‰¹ç‚¹ï¼š</h3>
<ul>
<li>ğŸš€ çº¯JavaScriptå®ç°ï¼Œæ— ä»»ä½•ä¾èµ–</li>
<li>ğŸ“± å®Œç¾æ”¯æŒç§»åŠ¨ç«¯è§¦æ‘¸æ»‘åŠ¨</li>
<li>ğŸ¨ ä¸°å¯Œçš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæœ</li>
<li>âš¡ é«˜æ€§èƒ½ï¼Œæµç•…ä½“éªŒ</li>
<li>ğŸ”§ é«˜åº¦å¯å®šåˆ¶åŒ–</li>
</ul>
<h2 data-id="heading-2">åŸºæœ¬è¯­æ³•å’Œä½¿ç”¨æ–¹æ³•</h2>
<h3 data-id="heading-3">1. å®‰è£…å’Œå¼•å…¥</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥Swiperï¼š</p>
<h4 data-id="heading-4"><strong>CDNæ–¹å¼ï¼š</strong></h4>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¼•å…¥Swiper CSS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- HTMLç»“æ„ --&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥Swiper JS --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5"><strong>npmå®‰è£…ï¼š</strong></h4>
<pre><code class="hljs language-bash" lang="bash">npm install swiper
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨é¡¹ç›®ä¸­å¼•å…¥</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Swiper</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'swiper'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'swiper/css/bundle'</span>;
</code></pre>
<h3 data-id="heading-6">2. åŸºç¡€HTMLç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.css"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
        <span class="hljs-selector-class">.swiper</span> {
            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
            <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span> {
            <span class="hljs-attribute">text-align</span>: center;
            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;
            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
            <span class="hljs-attribute">display</span>: flex;
            <span class="hljs-attribute">justify-content</span>: center;
            <span class="hljs-attribute">align-items</span>: center;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">1</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f44336</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#4CAF50</span>;
        }
        
        <span class="hljs-selector-class">.swiper-slide</span><span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>) {
            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2196F3</span>;
        }
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Swiperå®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper mySwiper"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- è½®æ’­é¡¹åŒ…è£¹å™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-wrapper"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- å•ä¸ªè½®æ’­é¡¹ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-slide"</span>&gt;</span>Slide 3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- åˆ†é¡µå™¨ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-pagination"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- å¯¼èˆªæŒ‰é’® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-button-next"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-button-prev"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ»šåŠ¨æ¡ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"swiper-scrollbar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/swiper@8/swiper-bundle.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
        <span class="hljs-comment">// åˆå§‹åŒ–Swiper</span>
        <span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">".mySwiper"</span>, {
            <span class="hljs-comment">// å¾ªç¯æ’­æ”¾</span>
            <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-comment">// åˆ†é¡µå™¨</span>
            <span class="hljs-attr">pagination</span>: {
                <span class="hljs-attr">el</span>: <span class="hljs-string">".swiper-pagination"</span>,
                <span class="hljs-attr">clickable</span>: <span class="hljs-literal">true</span>,
            },
            <span class="hljs-comment">// å¯¼èˆªæŒ‰é’®</span>
            <span class="hljs-attr">navigation</span>: {
                <span class="hljs-attr">nextEl</span>: <span class="hljs-string">".swiper-button-next"</span>,
                <span class="hljs-attr">prevEl</span>: <span class="hljs-string">".swiper-button-prev"</span>,
            },
            <span class="hljs-comment">// è‡ªåŠ¨æ’­æ”¾</span>
            <span class="hljs-attr">autoplay</span>: {
                <span class="hljs-attr">delay</span>: <span class="hljs-number">3000</span>,
            },
        });
    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">3. å¸¸ç”¨é…ç½®é€‰é¡¹è¯¦è§£</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-comment">// æ–¹å‘ï¼šhorizontal(æ°´å¹³) æˆ– vertical(å‚ç›´)</span>
    <span class="hljs-attr">direction</span>: <span class="hljs-string">'horizontal'</span>,
    
    <span class="hljs-comment">// å¾ªç¯æ¨¡å¼</span>
    <span class="hljs-attr">loop</span>: <span class="hljs-literal">true</span>,
    
    <span class="hljs-comment">// è‡ªåŠ¨æ’­æ”¾</span>
    <span class="hljs-attr">autoplay</span>: {
        <span class="hljs-attr">delay</span>: <span class="hljs-number">3000</span>,        <span class="hljs-comment">// å»¶è¿Ÿ3ç§’</span>
        <span class="hljs-attr">disableOnInteraction</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç”¨æˆ·æ“ä½œåç»§ç»­è‡ªåŠ¨æ’­æ”¾</span>
    },
    
    <span class="hljs-comment">// åˆ†é¡µå™¨é…ç½®</span>
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">'bullets'</span>,    <span class="hljs-comment">// bullets(åœ†ç‚¹) | fraction(åˆ†æ•°) | progressbar(è¿›åº¦æ¡)</span>
        <span class="hljs-attr">clickable</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// å¯ç‚¹å‡»</span>
    },
    
    <span class="hljs-comment">// å¯¼èˆªæŒ‰é’®</span>
    <span class="hljs-attr">navigation</span>: {
        <span class="hljs-attr">nextEl</span>: <span class="hljs-string">'.swiper-button-next'</span>,
        <span class="hljs-attr">prevEl</span>: <span class="hljs-string">'.swiper-button-prev'</span>,
    },
    
    <span class="hljs-comment">// æ»šåŠ¨æ¡</span>
    <span class="hljs-attr">scrollbar</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-scrollbar'</span>,
        <span class="hljs-attr">draggable</span>: <span class="hljs-literal">true</span>,
    },
    
    <span class="hljs-comment">// åˆ‡æ¢æ•ˆæœ</span>
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'slide'</span>, <span class="hljs-comment">// slide(é»˜è®¤) | fade | cube | coverflow | flip</span>
    
    <span class="hljs-comment">//  slidesPerViewï¼šåŒæ—¶æ˜¾ç¤ºçš„slideæ•°é‡</span>
    <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">1</span>,
    
    <span class="hljs-comment">// é—´è·</span>
    <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">30</span>,
    
    <span class="hljs-comment">// æ–­ç‚¹å“åº”å¼é…ç½®</span>
    <span class="hljs-attr">breakpoints</span>: {
        <span class="hljs-comment">// å½“å±å¹•å®½åº¦ &gt;= 640px</span>
        <span class="hljs-number">640</span>: {
            <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">20</span>,
        },
        <span class="hljs-comment">// å½“å±å¹•å®½åº¦ &gt;= 1024px</span>
        <span class="hljs-number">1024</span>: {
            <span class="hljs-attr">slidesPerView</span>: <span class="hljs-number">3</span>,
            <span class="hljs-attr">spaceBetween</span>: <span class="hljs-number">30</span>,
        },
    }
});
</code></pre>
<h3 data-id="heading-8">4. é«˜çº§æ•ˆæœç¤ºä¾‹</h3>
<p><strong>Coverflowæ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'coverflow'</span>,
    <span class="hljs-attr">grabCursor</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">centeredSlides</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">slidesPerView</span>: <span class="hljs-string">'auto'</span>,
    <span class="hljs-attr">coverflowEffect</span>: {
        <span class="hljs-attr">rotate</span>: <span class="hljs-number">50</span>,
        <span class="hljs-attr">stretch</span>: <span class="hljs-number">0</span>,
        <span class="hljs-attr">depth</span>: <span class="hljs-number">100</span>,
        <span class="hljs-attr">modifier</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">slideShadows</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
    },
});
</code></pre>
<p><strong>3Dç«‹æ–¹ä½“æ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> swiper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Swiper</span>(<span class="hljs-string">'.swiper-container'</span>, {
    <span class="hljs-attr">effect</span>: <span class="hljs-string">'cube'</span>,
    <span class="hljs-attr">grabCursor</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cubeEffect</span>: {
        <span class="hljs-attr">shadow</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">slideShadows</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">shadowOffset</span>: <span class="hljs-number">20</span>,
        <span class="hljs-attr">shadowScale</span>: <span class="hljs-number">0.94</span>,
    },
    <span class="hljs-attr">pagination</span>: {
        <span class="hljs-attr">el</span>: <span class="hljs-string">'.swiper-pagination'</span>,
    },
});
</code></pre>
<h2 data-id="heading-9">ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-10">1. å®¹å™¨é«˜åº¦é—®é¢˜</h3>
<p>ç¡®ä¿ä¸ºSwiperå®¹å™¨è®¾ç½®æ˜ç¡®çš„é«˜åº¦ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´æ˜¾ç¤ºå¼‚å¸¸ã€‚</p>
<h3 data-id="heading-11">2. å›¾ç‰‡æ‡’åŠ è½½</h3>
<p>å¯¹äºåŒ…å«å›¾ç‰‡çš„è½®æ’­å›¾ï¼Œå»ºè®®å¯ç”¨æ‡’åŠ è½½åŠŸèƒ½ä»¥æé«˜é¡µé¢åŠ è½½æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">lazy</span>: {
    <span class="hljs-attr">loadPrevNext</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">loadOnTransitionStart</span>: <span class="hljs-literal">true</span>,
}
</code></pre>
<h3 data-id="heading-12">3. åŠ¨æ€å†…å®¹å¤„ç†</h3>
<p>å¦‚æœé€šè¿‡AjaxåŠ¨æ€æ·»åŠ slideï¼Œéœ€è¦è°ƒç”¨Swiperå®ä¾‹çš„<code>update()</code>æ–¹æ³•æ¥æ›´æ–°ï¼š</p>
<pre><code class="hljs language-js" lang="js">swiper.<span class="hljs-title function_">update</span>();
</code></pre>
<h3 data-id="heading-13">4. å“åº”å¼é€‚é…</h3>
<p>ä½¿ç”¨<code>breakpoints</code>é…ç½®æ¥ç¡®ä¿åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹çš„è‰¯å¥½æ˜¾ç¤ºæ•ˆæœã€‚</p>
<h3 data-id="heading-14">5. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>é¿å…åœ¨å•ä¸ªé¡µé¢ä¸­åˆ›å»ºè¿‡å¤šSwiperå®ä¾‹</li>
<li>åŠæ—¶é”€æ¯ä¸éœ€è¦çš„Swiperå®ä¾‹ï¼š<code>swiper.destroy()</code></li>
<li>å¯¹äºéšè—çš„è½®æ’­å›¾ï¼Œä½¿ç”¨<code>observer</code>å’Œ<code>observeParents</code>å‚æ•°</li>
</ul>
<h2 data-id="heading-15">æ€»ç»“</h2>
<ol>
<li><strong>ç»“æ„æ¸…æ™°</strong>ï¼šè®°ä½Swiperçš„åŸºç¡€HTMLç»“æ„ - å®¹å™¨(<code>.swiper</code>) &gt; åŒ…è£¹å™¨(<code>.swiper-wrapper</code>) &gt; è½®æ’­é¡¹(<code>.swiper-slide</code>)</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šé€šè¿‡åˆç†çš„é…ç½®é€‰é¡¹ç»„åˆï¼Œå¯ä»¥åˆ›å»ºä»ç®€å•åˆ°å¤æ‚çš„å„ç§è½®æ’­æ•ˆæœ</li>
<li><strong>æ€§èƒ½ä¼˜å…ˆ</strong>ï¼šåˆç†ä½¿ç”¨æ‡’åŠ è½½ã€åŠæ—¶é”€æ¯å®ä¾‹ã€åšå¥½å“åº”å¼é€‚é…ï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒæµç•…</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥]]></title>    <link>https://juejin.cn/post/7575107094801203206</link>    <guid>https://juejin.cn/post/7575107094801203206</guid>    <pubDate>2025-11-22T11:15:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575107094801203206" data-draft-id="7575230119103938601" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-11-22T11:15:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡"/> <meta itemprop="url" content="https://juejin.cn/user/3097787706900985"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Web Appå¼€å‘å…¥é—¨ï¼šé¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡å…¨æ”»ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097787706900985/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BBBåŠªåŠ›å­¦ä¹ ç¨‹åºè®¾è®¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:15:20.000Z" title="Sat Nov 22 2025 11:15:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><p>åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒWeb Appå·²ç»æˆä¸ºè¿æ¥ç”¨æˆ·ä¸æœåŠ¡çš„é‡è¦æ¡¥æ¢ã€‚æ— è®ºæ˜¯ç”µå•†å¹³å°ã€ç¤¾äº¤åº”ç”¨è¿˜æ˜¯ä¼ä¸šå·¥å…·ï¼ŒWeb Appéƒ½ä»¥å…¶è·¨å¹³å°ã€æ˜“ç»´æŠ¤çš„ç‰¹æ€§å—åˆ°å¹¿æ³›é’çã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨Web Appå¼€å‘çš„ç¬¬ä¸€æ­¥â€”â€”é¡µé¢åˆ†æä¸ç¯å¢ƒå‡†å¤‡ã€‚</p>
<h2 data-id="heading-0">Web App</h2>
<p>Web Appï¼ˆWeb Applicationï¼‰æ˜¯æŒ‡é€šè¿‡æµè§ˆå™¨è®¿é—®çš„åº”ç”¨ç¨‹åºï¼Œå®ƒå…·å¤‡ä¸åŸç”ŸAppç›¸ä¼¼çš„ç”¨æˆ·ä½“éªŒå’ŒåŠŸèƒ½ç‰¹æ€§ã€‚ä¸ä¼ ç»Ÿçš„å“åº”å¼ç½‘ç«™ä¸åŒï¼ŒWeb Appæ›´æ³¨é‡äº¤äº’æ€§å’ŒåŠŸèƒ½æ€§ã€‚</p>
<h3 data-id="heading-1">Web Appçš„æ ¸å¿ƒç‰¹å¾ï¼š</h3>
<ul>
<li>ğŸŒ è·¨å¹³å°å…¼å®¹ï¼ˆä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯è¿è¡Œï¼‰</li>
<li>ğŸ“± ç§»åŠ¨ç«¯ä¼˜å…ˆçš„è®¾è®¡ç†å¿µ</li>
<li>âš¡ ç±»åŸç”Ÿçš„ç”¨æˆ·ä½“éªŒ</li>
<li>ğŸ”„ æ”¯æŒç¦»çº¿åŠŸèƒ½ï¼ˆPWAï¼‰</li>
<li>ğŸ” æ— éœ€å®‰è£…ï¼Œå³æ—¶è®¿é—®</li>
</ul>
<h2 data-id="heading-2">é¡µé¢åˆ†æï¼šä»éœ€æ±‚åˆ°ç»“æ„</h2>
<h3 data-id="heading-3">1. é¡µé¢ç»“æ„åˆ†æ</h3>
<p>åœ¨å¼€å§‹ç¼–ç å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹Web Appçš„é¡µé¢ç»“æ„è¿›è¡Œè¯¦ç»†åˆ†æã€‚é€šå¸¸ä¸€ä¸ªWeb AppåŒ…å«ä»¥ä¸‹å…¸å‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç§»åŠ¨ç«¯å¿…å¤‡metaæ ‡ç­¾ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">"X-UA-Compatible"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"ie=edge"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- PWAç›¸å…³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"theme-color"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"#2196f3"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"apple-mobile-web-app-capable"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"yes"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"apple-mobile-web-app-status-bar-style"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"default"</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æˆ‘çš„Web App<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥æ ·å¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"css/app.css"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- å¼•å…¥Manifest --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"manifest"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"manifest.json"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- iOSå›¾æ ‡ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"apple-touch-icon"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"images/icon-192.png"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åº”ç”¨å¤–å£³ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆªæ  --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-header"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-toggle"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"èœå•"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-title"</span>&gt;</span>åº”ç”¨åç§°<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"action-button"</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"æ“ä½œ"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-more"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹åŒºåŸŸ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-main"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹å°†åœ¨è¿™é‡ŒåŠ¨æ€åŠ è½½ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"page-container"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hero-section"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¬¢è¿ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„Web App<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cta-button"</span>&gt;</span>å¼€å§‹ä½“éªŒ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- åº•éƒ¨å¯¼èˆª --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-tabbar"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#home"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item active"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-home"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#explore"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-explore"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å‘ç°<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"#profile"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"tab-item"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"icon-profile"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æˆ‘çš„<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å¼•å…¥JavaScript --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"js/app.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">2. ç§»åŠ¨ç«¯æ ·å¼åŸºç¡€</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é‡ç½®æ ·å¼å’ŒåŸºç¡€è®¾ç½® */</span>
* {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">html</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
    -webkit-text-size-adjust: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, sans-serif;
    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.6</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">overflow-x</span>: hidden;
}

<span class="hljs-comment">/* åº”ç”¨å®¹å™¨ */</span>
<span class="hljs-selector-id">#app</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100vw</span>;
    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}

<span class="hljs-comment">/* é¡¶éƒ¨å¯¼èˆªæ æ ·å¼ */</span>
<span class="hljs-selector-class">.app-header</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">44px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: space-between;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">16px</span>;
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
}

<span class="hljs-selector-class">.app-title</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">17px</span>;
    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#000</span>;
}

<span class="hljs-comment">/* ä¸»è¦å†…å®¹åŒºåŸŸ */</span>
<span class="hljs-selector-class">.app-main</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">44px</span>; <span class="hljs-comment">/* ä¸ºé¡¶éƒ¨å¯¼èˆªç•™å‡ºç©ºé—´ */</span>
    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">50px</span>; <span class="hljs-comment">/* ä¸ºåº•éƒ¨å¯¼èˆªç•™å‡ºç©ºé—´ */</span>
    <span class="hljs-attribute">overflow-y</span>: auto;
    -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch; <span class="hljs-comment">/* iOSå¹³æ»‘æ»šåŠ¨ */</span>
}

<span class="hljs-comment">/* åº•éƒ¨å¯¼èˆªæ  */</span>
<span class="hljs-selector-class">.app-tabbar</span> {
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: space-around;
    <span class="hljs-attribute">align-items</span>: center;
}

<span class="hljs-selector-class">.tab-item</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">text-decoration</span>: none;
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">0</span>;
}

<span class="hljs-selector-class">.tab-item</span><span class="hljs-selector-class">.active</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#2196f3</span>;
}

<span class="hljs-comment">/* å“åº”å¼è®¾è®¡ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">768px</span>) {
    <span class="hljs-selector-tag">html</span> {
        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
    }
}

<span class="hljs-comment">/* æ·±è‰²æ¨¡å¼æ”¯æŒ */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) {
    <span class="hljs-selector-tag">body</span> {
        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#121212</span>;
        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
    }
    
    <span class="hljs-selector-class">.app-header</span> {
        <span class="hljs-attribute">background</span>: <span class="hljs-number">#1e1e1e</span>;
        <span class="hljs-attribute">border-bottom-color</span>: <span class="hljs-number">#333</span>;
    }
}
</code></pre>
<h3 data-id="heading-5">3. åŸºç¡€JavaScriptç»“æ„</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app.js - Web Appä¸»é€»è¾‘</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">WebApp</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> = <span class="hljs-string">'home'</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
    }

    <span class="hljs-comment">// åˆå§‹åŒ–åº”ç”¨</span>
    <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupViewport</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupNavigation</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupServiceWorker</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadInitialData</span>();
    }

    <span class="hljs-comment">// è®¾ç½®è§†å£</span>
    <span class="hljs-title function_">setupViewport</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ç¡®ä¿è§†å£è®¾ç½®æ­£ç¡®</span>
        <span class="hljs-keyword">const</span> viewport = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'meta[name="viewport"]'</span>);
        <span class="hljs-keyword">if</span> (!viewport) {
            <span class="hljs-keyword">const</span> meta = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'meta'</span>);
            meta.<span class="hljs-property">name</span> = <span class="hljs-string">'viewport'</span>;
            meta.<span class="hljs-property">content</span> = <span class="hljs-string">'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'</span>;
            <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(meta);
        }
    }

    <span class="hljs-comment">// è®¾ç½®å¯¼èˆª</span>
    <span class="hljs-title function_">setupNavigation</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.tab-item'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainContent</span> = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.app-main'</span>);
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tab</span> =&gt;</span> {
            tab.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
                e.<span class="hljs-title function_">preventDefault</span>();
                <span class="hljs-keyword">const</span> target = tab.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'href'</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-string">'#'</span>, <span class="hljs-string">''</span>);
                <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">switchPage</span>(target);
            });
        });
    }

    <span class="hljs-comment">// é¡µé¢åˆ‡æ¢</span>
    <span class="hljs-title function_">switchPage</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-comment">// æ›´æ–°æ´»åŠ¨çŠ¶æ€</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tabItems</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">tab</span> =&gt;</span> tab.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>));
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">`[href="#<span class="hljs-subst">${pageName}</span>"]`</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
        
        <span class="hljs-comment">// æ›´æ–°å½“å‰é¡µé¢</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> = pageName;
        
        <span class="hljs-comment">// åŠ è½½é¡µé¢å†…å®¹</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadPageContent</span>(pageName);
    }

    <span class="hljs-comment">// åŠ è½½é¡µé¢å†…å®¹</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadPageContent</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½çŠ¶æ€</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showLoading</span>();
            
            <span class="hljs-comment">// æ¨¡æ‹ŸAPIè°ƒç”¨</span>
            <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchPageData</span>(pageName);
            
            <span class="hljs-comment">// æ›´æ–°DOM</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updatePageContent</span>(content);
            
            <span class="hljs-comment">// éšè—åŠ è½½çŠ¶æ€</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">hideLoading</span>();
            
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å¤±è´¥:'</span>, error);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">showError</span>(<span class="hljs-string">'é¡µé¢åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
        }
    }

    <span class="hljs-comment">// è·å–é¡µé¢æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchPageData</span>(<span class="hljs-params">pageName</span>) {
        <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œåº”è¯¥æ˜¯APIè°ƒç”¨</span>
        <span class="hljs-keyword">const</span> mockData = {
            <span class="hljs-attr">home</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;é¦–é¡µå†…å®¹&lt;/h2&gt;&lt;p&gt;æ¬¢è¿æ¥åˆ°é¦–é¡µ&lt;/p&gt;&lt;/section&gt;'</span>,
            <span class="hljs-attr">explore</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;å‘ç°é¡µé¢&lt;/h2&gt;&lt;p&gt;æ¢ç´¢ç²¾å½©å†…å®¹&lt;/p&gt;&lt;/section&gt;'</span>,
            <span class="hljs-attr">profile</span>: <span class="hljs-string">'&lt;section class="page-content"&gt;&lt;h2&gt;ä¸ªäººä¸­å¿ƒ&lt;/h2&gt;&lt;p&gt;è¿™é‡Œæ˜¯ä¸ªäººèµ„æ–™&lt;/p&gt;&lt;/section&gt;'</span>
        };
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(mockData[pageName]), <span class="hljs-number">500</span>);
        });
    }

    <span class="hljs-comment">// æ›´æ–°é¡µé¢å†…å®¹</span>
    <span class="hljs-title function_">updatePageContent</span>(<span class="hljs-params">content</span>) {
        <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">this</span>.<span class="hljs-property">mainContent</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.page-container'</span>);
        container.<span class="hljs-property">innerHTML</span> = content;
        
        <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼Œç”¨äºç»„ä»¶åˆå§‹åŒ–</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">triggerPageChange</span>();
    }

    <span class="hljs-comment">// æ˜¾ç¤ºåŠ è½½çŠ¶æ€</span>
    <span class="hljs-title function_">showLoading</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å®ç°åŠ è½½æŒ‡ç¤ºå™¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¾ç¤ºåŠ è½½çŠ¶æ€'</span>);
    }

    <span class="hljs-comment">// éšè—åŠ è½½çŠ¶æ€</span>
    <span class="hljs-title function_">hideLoading</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// éšè—åŠ è½½æŒ‡ç¤ºå™¨</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'éšè—åŠ è½½çŠ¶æ€'</span>);
    }

    <span class="hljs-comment">// æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
    <span class="hljs-title function_">showError</span>(<span class="hljs-params">message</span>) {
        <span class="hljs-comment">// å®ç°é”™è¯¯æç¤º</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'é”™è¯¯:'</span>, message);
    }

    <span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
    <span class="hljs-title function_">bindEvents</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// å¤„ç†åé€€æŒ‰é’®</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlePopState</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
        
        <span class="hljs-comment">// é˜²æ­¢æ©¡çš®ç­‹æ•ˆæœ</span>
        <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'touchmove'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (e.<span class="hljs-property">scale</span> !== <span class="hljs-number">1</span>) {
                e.<span class="hljs-title function_">preventDefault</span>();
            }
        }, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">false</span> });
    }

    <span class="hljs-comment">// å¤„ç†æµè§ˆå™¨å†å²</span>
    <span class="hljs-title function_">handlePopState</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-comment">// å¤„ç†æµè§ˆå™¨åé€€/å‰è¿›</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†å†å²çŠ¶æ€å˜åŒ–'</span>, event.<span class="hljs-property">state</span>);
    }

    <span class="hljs-comment">// æ³¨å†ŒService Worker</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">setupServiceWorker</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">const</span> registration = <span class="hljs-keyword">await</span> navigator.<span class="hljs-property">workbox</span>.<span class="hljs-title function_">register</span>();
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†ŒæˆåŠŸ:'</span>, registration);
            } <span class="hljs-keyword">catch</span> (error) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Service Worker æ³¨å†Œå¤±è´¥:'</span>, error);
            }
        }
    }

    <span class="hljs-comment">// åŠ è½½åˆå§‹æ•°æ®</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadInitialData</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// åº”ç”¨å¯åŠ¨æ—¶çš„æ•°æ®åˆå§‹åŒ–</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŠ è½½åˆå§‹æ•°æ®'</span>);
    }

    <span class="hljs-comment">// è§¦å‘é¡µé¢å˜åŒ–äº‹ä»¶</span>
    <span class="hljs-title function_">triggerPageChange</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'pageChanged'</span>, {
            <span class="hljs-attr">detail</span>: { <span class="hljs-attr">page</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPage</span> }
        }));
    }
}

<span class="hljs-comment">// åº”ç”¨å¯åŠ¨</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'DOMContentLoaded'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">app</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebApp</span>();
});
</code></pre>
<h3 data-id="heading-6">4. PWAé…ç½®ç¤ºä¾‹</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// manifest.json</span>
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆ‘çš„Web App"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"short_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyApp"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä¸€ä¸ªç°ä»£åŒ–çš„Webåº”ç”¨ç¨‹åº"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"start_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"display"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"standalone"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"background_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#ffffff"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"theme_color"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"#2196f3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"orientation"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"portrait"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"scope"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-72x72.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"72x72"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-96x96.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"96x96"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-128x128.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"128x128"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-144x144.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"144x144"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-152x152.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"152x152"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-192x192.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192x192"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-384x384.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"384x384"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"src"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"images/icon-512x512.png"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"sizes"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"512x512"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"image/png"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-7">å¼€å‘ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-8">1. ç°ä»£å‰ç«¯å¼€å‘ç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// package.json ç¤ºä¾‹</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"web-app-project"</span>,
  <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>,
  <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç°ä»£åŒ–Web Appé¡¹ç›®"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"module"</span>,
  <span class="hljs-string">"scripts"</span>: {
    <span class="hljs-string">"dev"</span>: <span class="hljs-string">"vite"</span>,
    <span class="hljs-string">"build"</span>: <span class="hljs-string">"vite build"</span>,
    <span class="hljs-string">"preview"</span>: <span class="hljs-string">"vite preview"</span>,
    <span class="hljs-string">"serve"</span>: <span class="hljs-string">"serve dist -s"</span>
  },
  <span class="hljs-string">"devDependencies"</span>: {
    <span class="hljs-string">"vite"</span>: <span class="hljs-string">"^4.0.0"</span>,
    <span class="hljs-string">"@vitejs/plugin-legacy"</span>: <span class="hljs-string">"^4.0.0"</span>,
    <span class="hljs-string">"serve"</span>: <span class="hljs-string">"^14.0.0"</span>
  },
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"workbox-build"</span>: <span class="hljs-string">"^6.0.0"</span>
  }
}
</code></pre>
<h3 data-id="heading-9">2. Viteæ„å»ºé…ç½®</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> legacy <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-legacy'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">legacy</span>({
            <span class="hljs-attr">targets</span>: [<span class="hljs-string">'defaults'</span>, <span class="hljs-string">'not IE 11'</span>]
        })
    ],
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">outDir</span>: <span class="hljs-string">'dist'</span>,
        <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">'assets'</span>,
        <span class="hljs-attr">rollupOptions</span>: {
            <span class="hljs-attr">input</span>: {
                <span class="hljs-attr">main</span>: <span class="hljs-string">'./index.html'</span>
            }
        }
    },
    <span class="hljs-attr">server</span>: {
        <span class="hljs-attr">host</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>
    }
});
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<ol>
<li><strong>ç§»åŠ¨ä¼˜å…ˆè®¾è®¡</strong>ï¼šä»ç§»åŠ¨ç«¯ä½“éªŒå‡ºå‘ï¼Œç¡®ä¿åœ¨å°å±å¹•ä¸Šçš„å¯ç”¨æ€§å’Œç¾è§‚æ€§</li>
<li><strong>æ¸è¿›å¼å¢å¼º</strong>ï¼šåŸºç¡€åŠŸèƒ½æ‰€æœ‰è®¾å¤‡å¯ç”¨ï¼Œé«˜çº§åŠŸèƒ½é€æ­¥å¢å¼º</li>
<li><strong>æ€§èƒ½å³ä½“éªŒ</strong>ï¼šåŠ è½½é€Ÿåº¦ã€æµç•…åº¦ç›´æ¥å½±å“ç”¨æˆ·ç•™å­˜ï¼Œå¿…é¡»é‡è§†æ€§èƒ½ä¼˜åŒ–</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡]]></title>    <link>https://juejin.cn/post/7575093624902516777</link>    <guid>https://juejin.cn/post/7575093624902516777</guid>    <pubDate>2025-11-22T12:33:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575093624902516777" data-draft-id="7575230119103954985" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T12:33:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaterFly"/> <meta itemprop="url" content="https://juejin.cn/user/1204720474535063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterå…¥é—¨æ¦‚è§ˆ4-UIå…¥é—¨ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1204720474535063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaterFly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T12:33:17.000Z" title="Sat Nov 22 2025 12:33:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å†™åº”ç”¨æœ€é‡è¦çš„æ˜¯UIï¼Œè¿™é‡Œä»‹ç»ä¸‹å¸¸ç”¨çš„UIç»„ä»¶ã€å¸ƒå±€æ¦‚å¿µã€çº¦æŸæ¦‚å¿µç­‰ã€‚
è¿™æ˜¯Flutterå››éƒ¨æ›²çš„æœ€åä¸€ç¯‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€Flutter UWidget</h2>
<h3 data-id="heading-1">1.1 åŸºç¡€ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f72154440ed04032ba46afbb273dff14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Rd%2BB8cZRb8ttCKK%2FxBGzpC5LtDw%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-2">1.1.1 Text</h4>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-comment">// è®¡æ•°å™¨ï¼Œæ˜¾ç¤ºå˜é‡</span>
  <span class="hljs-selector-tag">Text</span>(
    <span class="hljs-string">'$_counter'</span>,
    <span class="hljs-attribute">style</span>: const <span class="hljs-built_in">TextStyle</span>(
      <span class="hljs-attribute">color</span>: Colors.red,
      <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">32</span>,
      <span class="hljs-attribute">fontWeight</span>: FontWeight.bold,
    ),
  ),
  
  <span class="hljs-comment">// å¯Œæ–‡æœ¬ Text.richã€RichText</span>
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">Text</span><span class="hljs-selector-class">.rich</span>(<span class="hljs-built_in">TextSpan</span>(
    <span class="hljs-attribute">text</span>: <span class="hljs-string">'This is a '</span>,
    <span class="hljs-attribute">children</span>: &lt;TextSpan&gt;[
      <span class="hljs-built_in">TextSpan</span>(
        <span class="hljs-attribute">text</span>: <span class="hljs-string">'rich'</span>,
        <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(
            <span class="hljs-attribute">fontWeight</span>: FontWeight.bold, <span class="hljs-attribute">color</span>: Colors.blue),
      ),
      <span class="hljs-built_in">TextSpan</span>(
          <span class="hljs-attribute">text</span>: <span class="hljs-string">' text example.'</span>,
          <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.green)),
    ],
  )),
</code></pre>
<p>Â </p>
<ul>
<li>Text</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff2bd4cdbeb43f981ba8720c352cf8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=AgOpFh%2Fs%2B0vbFaGncdV5r%2FxggyY%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<ul>
<li>TextStyle</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae9cf434882647f39eb080eb5088df6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=e0hBkags3gsmQraahl7yrIjqLCw%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-3">1.1.2 Color</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// `FF` for the alpha</span>
const <span class="hljs-attribute">Color</span>(<span class="hljs-number">0</span>xFFE4E4E4)
Â 
Colors<span class="hljs-selector-class">.red</span>
Colors<span class="hljs-selector-class">.blue</span>
Colors<span class="hljs-selector-class">.green</span>
</code></pre>
<p>Â </p>
<h4 data-id="heading-4">1.1.3 Button</h4>
<ul>
<li>ElevatedButtonï¼Œå‡¸èµ·æŒ‰é’®ï¼Œå³"æ¼‚æµ®"æŒ‰é’®ï¼Œå®ƒé»˜è®¤å¸¦æœ‰é˜´å½±å’Œç°è‰²èƒŒæ™¯ã€‚æŒ‰ä¸‹åï¼Œé˜´å½±ä¼šå˜å¤§</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">ElevatedButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
);
Â 
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7aa643247b634e5a9c4ef487a60a41b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=emYGr%2BUruIRx4ra%2FJbGEJbWRZSg%3D" alt="" loading="lazy"/></p>
<ul>
<li>TextButtonï¼Œæ–‡æœ¬æŒ‰é’®ï¼Œé»˜è®¤èƒŒæ™¯é€æ˜å¹¶ä¸å¸¦é˜´å½±ã€‚æŒ‰ä¸‹åï¼Œä¼šæœ‰èƒŒæ™¯è‰²</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">TextButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb34e58f6a67434483a85abfb56db249~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=jTuJLasyK7Tq4R3daSb7oSYqs%2BU%3D" alt="" loading="lazy"/></p>
<ul>
<li>OutlinedButtonï¼Œè½®å»“æŒ‰é’®ï¼Œé»˜è®¤æœ‰ä¸€ä¸ªè¾¹æ¡†ï¼Œä¸å¸¦é˜´å½±ä¸”èƒŒæ™¯é€æ˜ã€‚æŒ‰ä¸‹åï¼Œè¾¹æ¡†é¢œè‰²ä¼šå˜äº®ã€åŒæ—¶å‡ºç°èƒŒæ™¯å’Œé˜´å½±(è¾ƒå¼±)</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">OutlinedButton</span>(
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"normal"</span>),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7366eb4306c84bd7beffbfc6c51c2ac4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=ycDL2t1Qxkp%2FEgPwYggXgsceJo4%3D" alt="" loading="lazy"/></p>
<ul>
<li>IconButtonï¼Œå›¾æ ‡æŒ‰é’®ï¼Œæ˜¯ä¸€ä¸ªå¯ç‚¹å‡»çš„Iconï¼Œä¸åŒ…æ‹¬æ–‡å­—ï¼Œé»˜è®¤æ²¡æœ‰èƒŒæ™¯ï¼Œç‚¹å‡»åä¼šå‡ºç°èƒŒæ™¯</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">IconButton</span>(
  <span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.thumb_up),
  <span class="hljs-attribute">onPressed</span>: () {},
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/245b832407bf41c8aab460fee8dbd338~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oSO1PxMDrbAjH%2FdnufBQR%2F%2Bqu%2F0%3D" alt="" loading="lazy"/></p>
<ul>
<li>FloatingActionButtonï¼Œæ‚¬æµ®æŒ‰é’®ï¼Œåœ†å½¢æ‚¬æµ®æŒ‰é’®ï¼Œç”¨äºæ ¸å¿ƒå…¨å±€æ“ä½œï¼ˆå¦‚â€œæ–°å»ºâ€ï¼‰</li>
</ul>

<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">FloatingActionButton</span>(
    <span class="hljs-attribute">onPressed</span>: _incrementCounter,
    <span class="hljs-attribute">tooltip</span>: <span class="hljs-string">'Increment'</span>,
    <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Icon</span>(Icons.add),
  ),
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/503b0b03d817481187ecb9fd2a3bb554~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Fvy5QKFjFdOfWCIdw0gPYaVxqJs%3D" alt="" loading="lazy"/></p>
<p>Â </p>



































<table><thead><tr><th>æŒ‰é’®ç±»å‹</th><th>è®¾è®¡ç‰¹ç‚¹</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>ElevatedButton</td><td>å‡¸èµ·é˜´å½±+èƒŒæ™¯è‰²</td><td>ä¸»è¦æ“ä½œï¼ˆæäº¤ã€ç¡®è®¤ï¼‰</td></tr><tr><td>TextButton</td><td>æ‰å¹³æ— è¾¹æ¡†</td><td>æ¬¡è¦æ“ä½œï¼ˆå–æ¶ˆã€è·³è¿‡ï¼‰</td></tr><tr><td>OutlinedButton</td><td>è¾¹æ¡†+æ— å¡«å……</td><td>ä¸­æ€§æ“ä½œï¼ˆç­›é€‰ã€å¯¼å‡ºï¼‰</td></tr><tr><td>IconButton</td><td>çº¯å›¾æ ‡</td><td>å·¥å…·æ åŠ¨ä½œï¼ˆåˆ é™¤ã€æœç´¢ï¼‰</td></tr><tr><td>FloatingActionButton</td><td>åœ†å½¢æ‚¬æµ®</td><td>å…¨å±€æ ¸å¿ƒåŠŸèƒ½ï¼ˆæ–°å¢ã€åˆ·æ–°ï¼‰</td></tr></tbody></table>
<p>Â </p>
<h4 data-id="heading-5">1.1.4 Image</h4>
<p>æ³¨ï¼šé…ç½®æœ¬åœ°å›¾ç‰‡éœ€è¦åœ¨pubspec.yamlä¸­è®¾ç½®</p>
<pre><code class="hljs language-php" lang="php">flutter:
  <span class="hljs-comment"># é…ç½®è·¯å¾„åæ‰èƒ½ä½¿ç”¨</span>
  assets:
    - assets/images/
Â 
  <span class="hljs-comment">// æœ¬åœ°å›¾ç‰‡</span>
  Image.<span class="hljs-title function_ invoke__">asset</span>(
    <span class="hljs-string">'assets/images/icon_arrow_right.png'</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">12</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">14</span>,
  )
  
  <span class="hljs-comment">// ç½‘ç»œå›¾ç‰‡</span>
  Image.<span class="hljs-title function_ invoke__">network</span>(item.bankLogo!)
  
</code></pre>
<p>Â </p>
<h4 data-id="heading-6">1.1.5 Icon</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">const</span> <span class="hljs-title">Icon</span>(<span class="hljs-params">Icons.<span class="hljs-keyword">add</span></span>)
</span></code></pre>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fm3.material.io%2Fstyles%2Ficons%2Foverview" target="_blank" title="https://m3.material.io/styles/icons/overview" ref="nofollow noopener noreferrer">Icons â€“ Material Design 3</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffonts.google.com%2Ficons" target="_blank" title="https://fonts.google.com/icons" ref="nofollow noopener noreferrer">Google fonts</a>ï¼ŒæŸ¥çœ‹æ‰€æœ‰Material icons</li>
</ul>
<p>Â </p>
<h4 data-id="heading-7">1.1.6 TextField</h4>
<ul>
<li>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbook.flutterchina.club%2Fchapter3%2Finput_and_form.html%23_3-5-1-textfield" target="_blank" title="https://book.flutterchina.club/chapter3/input_and_form.html#_3-5-1-textfield" ref="nofollow noopener noreferrer">è¾“å…¥æ¡†åŠè¡¨å•</a></li>
</ul>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a98eed88ad44401816da14ca5f4d916~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oamS26n7vn%2FinrNjRZTg7%2FqeMlw%3D" alt="" loading="lazy"/></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Column</span>(
  <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
    <span class="hljs-built_in">TextField</span>(
      <span class="hljs-attribute">autofocus</span>: true,
      <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">InputDecoration</span>(
        <span class="hljs-attribute">labelText</span>: <span class="hljs-string">"ç”¨æˆ·å"</span>,
        <span class="hljs-attribute">hintText</span>: <span class="hljs-string">"ç”¨æˆ·åæˆ–é‚®ç®±"</span>,
        <span class="hljs-attribute">prefixIcon</span>: <span class="hljs-built_in">Icon</span>(Icons.person)
      ),
    ),
    <span class="hljs-built_in">TextField</span>(
      <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">InputDecoration</span>(
        <span class="hljs-attribute">labelText</span>: <span class="hljs-string">"å¯†ç "</span>,
        <span class="hljs-attribute">hintText</span>: <span class="hljs-string">"æ‚¨çš„ç™»å½•å¯†ç "</span>,
        <span class="hljs-attribute">prefixIcon</span>: <span class="hljs-built_in">Icon</span>(Icons.lock)
      ),
      <span class="hljs-attribute">obscureText</span>: true,
    ),
  ],
);
</code></pre>
<p>Â </p>
<h3 data-id="heading-8">1.2 å®¹å™¨è£…é¥°ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/523a5152d5e643ca97fea0d95767b261~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=nHvuyY2DZ%2BdwTK34Cp%2FQOGXfjxo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-9">1.2.1 Padding</h4>
<p>Paddingå¯ä»¥ç»™å…¶å­èŠ‚ç‚¹æ·»åŠ å¡«å……ï¼ˆç•™ç™½ï¼‰ï¼Œå’Œè¾¹è·æ•ˆæœç±»ä¼¼ã€‚æˆ‘ä»¬åœ¨å‰é¢å¾ˆå¤šç¤ºä¾‹ä¸­éƒ½å·²ç»ä½¿ç”¨è¿‡å®ƒäº†ï¼Œç°åœ¨æ¥çœ‹çœ‹å®ƒçš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">Padding</span>({
  ...
  EdgeInsetsGeometry <span class="hljs-attribute">padding</span>,
  Widget child,
})
</code></pre>
<p>Â </p>
<p>EdgeInsets</p>
<p>EdgeInsetsæ˜¯EdgeInsetsGeometryçš„å­ç±»ï¼Œä¸€èˆ¬ç›´æ¥ä½¿ç”¨EdgeInsetsã€‚</p>
<p>EdgeInsetsæä¾›çš„ä¾¿æ·æ–¹æ³•ï¼š</p>
<ul>
<li>fromLTRB(double left, double top, double right, double bottom)ï¼šåˆ†åˆ«æŒ‡å®šå››ä¸ªæ–¹å‘çš„å¡«å……ã€‚</li>
<li>all(double value) : æ‰€æœ‰æ–¹å‘å‡ä½¿ç”¨ç›¸åŒæ•°å€¼çš„å¡«å……ã€‚</li>
<li>only({left, top, right ,bottom })ï¼šå¯ä»¥è®¾ç½®å…·ä½“æŸä¸ªæ–¹å‘çš„å¡«å……(å¯ä»¥åŒæ—¶æŒ‡å®šå¤šä¸ªæ–¹å‘)ã€‚</li>
<li>symmetric({ vertical, horizontal })ï¼šç”¨äºè®¾ç½®å¯¹ç§°æ–¹å‘çš„å¡«å……ï¼ŒverticalæŒ‡topå’Œbottomï¼ŒhorizontalæŒ‡leftå’Œrightã€‚</li>
</ul>
<p>Â </p>
<p>Paddingç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fff3c77aa3f0448a8da7ee3710a87d8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=y0whGv3yPLvyZaWBm8MRHowGKM0%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">PaddingTestRoute</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatelessWidget</span> {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">PaddingTestRoute</span>({<span class="hljs-selector-tag">Key</span>? <span class="hljs-selector-tag">key</span>}) : <span class="hljs-selector-tag">super</span>(<span class="hljs-attribute">key</span>: key);
Â 
  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Padding</span>(
      <span class="hljs-comment">//ä¸Šä¸‹å·¦å³å„æ·»åŠ 16åƒç´ è¡¥ç™½</span>
      <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">16</span>),
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
        <span class="hljs-comment">//æ˜¾å¼æŒ‡å®šå¯¹é½æ–¹å¼ä¸ºå·¦å¯¹é½ï¼Œæ’é™¤å¯¹é½å¹²æ‰°</span>
        <span class="hljs-attribute">crossAxisAlignment</span>: CrossAxisAlignment.start,
        <span class="hljs-attribute">mainAxisSize</span>: MainAxisSize.min,
        <span class="hljs-attribute">children</span>: const &lt;Widget&gt;[
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">//å·¦è¾¹æ·»åŠ 8åƒç´ è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">left</span>: <span class="hljs-number">8</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Hello world"</span>),
          ),
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">//ä¸Šä¸‹å„æ·»åŠ 8åƒç´ è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">symmetric</span>(<span class="hljs-attribute">vertical</span>: <span class="hljs-number">8</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"I am Jack"</span>),
          ),
          <span class="hljs-built_in">Padding</span>(
            <span class="hljs-comment">// åˆ†åˆ«æŒ‡å®šå››ä¸ªæ–¹å‘çš„è¡¥ç™½</span>
            <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">fromLTRB</span>(<span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">20</span>),
            <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Your friend"</span>),
          )
        ],
      ),
    );
  }
}
</code></pre>
<p>Â </p>
<h4 data-id="heading-10">1.2.2 DecoratedBox</h4>
<p>DecoratedBoxå¯ä»¥åœ¨å…¶å­ç»„ä»¶ç»˜åˆ¶å‰(æˆ–å)ç»˜åˆ¶ä¸€äº›è£…é¥°ï¼ˆDecorationï¼‰ï¼Œå¦‚èƒŒæ™¯ã€è¾¹æ¡†ã€æ¸å˜ç­‰ã€‚DecoratedBoxå®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">DecoratedBox</span>({
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">decoration</span>,
  <span class="hljs-selector-tag">DecorationPosition</span> <span class="hljs-selector-tag">position</span> = <span class="hljs-selector-tag">DecorationPosition</span><span class="hljs-selector-class">.background</span>,
  <span class="hljs-selector-tag">Widget</span>? <span class="hljs-selector-tag">child</span>
})
Â 
<span class="hljs-selector-tag">BoxDecoration</span>({
  <span class="hljs-selector-tag">Color</span> <span class="hljs-selector-tag">color</span>, <span class="hljs-comment">//é¢œè‰²</span>
  <span class="hljs-selector-tag">DecorationImage</span> <span class="hljs-selector-tag">image</span>,<span class="hljs-comment">//å›¾ç‰‡</span>
  <span class="hljs-selector-tag">BoxBorder</span> <span class="hljs-selector-tag">border</span>, <span class="hljs-comment">//è¾¹æ¡†</span>
  <span class="hljs-selector-tag">BorderRadiusGeometry</span> <span class="hljs-selector-tag">borderRadius</span>, <span class="hljs-comment">//åœ†è§’</span>
  <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">BoxShadow</span>&gt; <span class="hljs-selector-tag">boxShadow</span>, <span class="hljs-comment">//é˜´å½±,å¯ä»¥æŒ‡å®šå¤šä¸ª</span>
  <span class="hljs-selector-tag">Gradient</span> <span class="hljs-selector-tag">gradient</span>, <span class="hljs-comment">//æ¸å˜</span>
  <span class="hljs-selector-tag">BlendMode</span> <span class="hljs-selector-tag">backgroundBlendMode</span>, <span class="hljs-comment">//èƒŒæ™¯æ··åˆæ¨¡å¼</span>
  <span class="hljs-selector-tag">BoxShape</span> <span class="hljs-selector-tag">shape</span> = <span class="hljs-selector-tag">BoxShape</span><span class="hljs-selector-class">.rectangle</span>, <span class="hljs-comment">//å½¢çŠ¶</span>
})
Â 
            <span class="hljs-selector-tag">DecoratedBox</span>(
                <span class="hljs-comment">// position: DecorationPosition.foreground,</span>
                <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(
                  <span class="hljs-attribute">color</span>: Colors.blue,
                  <span class="hljs-attribute">border</span>: Border.<span class="hljs-built_in">all</span>(<span class="hljs-attribute">color</span>: Colors.red, <span class="hljs-attribute">width</span>: <span class="hljs-number">2</span>),
                  <span class="hljs-attribute">borderRadius</span>: const BorderRadius.<span class="hljs-built_in">all</span>(Radius.<span class="hljs-built_in">circular</span>(<span class="hljs-number">16</span>)),
                ),
                <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Padding</span>(
                  <span class="hljs-attribute">padding</span>: EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">8.0</span>),
                  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
                    <span class="hljs-string">'This is a decorated box with padding.'</span>,
                    <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.white),
                  ),
                )),
          ],
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fe9a2f916744078a1924744ddf83adb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=v7wP2L7yFMV%2Fr5Xca3favxhkUU4%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-11">1.2.3 Container</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c99498244d840f58cc2d3a63ce4a14c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=z1fN47QOtH0TtvCxVKgoQIPIMYM%3D" alt="" loading="lazy"/></p>
<p>Containeræ˜¯ä¸€ä¸ªç»„åˆç±»å®¹å™¨ï¼Œå®ƒæœ¬èº«ä¸å¯¹åº”å…·ä½“çš„RenderObjectï¼Œå®ƒæ˜¯DecoratedBoxã€ConstrainedBoxã€Transformã€Paddingã€Alignç­‰ç»„ä»¶ç»„åˆçš„ä¸€ä¸ªå¤šåŠŸèƒ½å®¹å™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€é€šè¿‡ä¸€ä¸ªContainerç»„ä»¶å¯ä»¥å®ç°åŒæ—¶éœ€è¦è£…é¥°ã€å˜æ¢ã€é™åˆ¶çš„åœºæ™¯ã€‚ä¸‹é¢æ˜¯Containerçš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Container</span>({
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.alignment</span>,
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.padding</span>, <span class="hljs-comment">//å®¹å™¨å†…è¡¥ç™½ï¼Œå±äºdecorationçš„è£…é¥°èŒƒå›´</span>
  <span class="hljs-selector-tag">Color</span> <span class="hljs-selector-tag">color</span>, <span class="hljs-comment">// èƒŒæ™¯è‰²</span>
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">decoration</span>, <span class="hljs-comment">// èƒŒæ™¯è£…é¥°</span>
  <span class="hljs-selector-tag">Decoration</span> <span class="hljs-selector-tag">foregroundDecoration</span>, <span class="hljs-comment">//å‰æ™¯è£…é¥°</span>
  <span class="hljs-selector-tag">double</span> <span class="hljs-selector-tag">width</span>,<span class="hljs-comment">//å®¹å™¨çš„å®½åº¦</span>
  <span class="hljs-selector-tag">double</span> <span class="hljs-selector-tag">height</span>, <span class="hljs-comment">//å®¹å™¨çš„é«˜åº¦</span>
  <span class="hljs-selector-tag">BoxConstraints</span> <span class="hljs-selector-tag">constraints</span>, <span class="hljs-comment">//å®¹å™¨å¤§å°çš„é™åˆ¶æ¡ä»¶</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.margin</span>,<span class="hljs-comment">//å®¹å™¨å¤–è¡¥ç™½ï¼Œä¸å±äºdecorationçš„è£…é¥°èŒƒå›´</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.transform</span>, <span class="hljs-comment">//å˜æ¢</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.child</span>,
  ...
})
Â 
Â 
Â 
<span class="hljs-selector-tag">Container</span>(
  <span class="hljs-attribute">margin</span>: EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">top</span>: <span class="hljs-number">50.0</span>, <span class="hljs-attribute">left</span>: <span class="hljs-number">120.0</span>),
  <span class="hljs-attribute">constraints</span>: BoxConstraints.<span class="hljs-built_in">tightFor</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">200.0</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">150.0</span>),<span class="hljs-comment">//å¡ç‰‡å¤§å°</span>
  <span class="hljs-attribute">decoration</span>: <span class="hljs-built_in">BoxDecoration</span>(  <span class="hljs-comment">//èƒŒæ™¯è£…é¥°</span>
    <span class="hljs-attribute">gradient</span>: <span class="hljs-built_in">RadialGradient</span>( <span class="hljs-comment">//èƒŒæ™¯å¾„å‘æ¸å˜</span>
      <span class="hljs-attribute">colors</span>: [Colors.red, Colors.orange],
      <span class="hljs-attribute">center</span>: Alignment.topLeft,
      <span class="hljs-attribute">radius</span>: .<span class="hljs-number">98</span>,
    ),
    <span class="hljs-attribute">boxShadow</span>: [
      <span class="hljs-comment">//å¡ç‰‡é˜´å½±</span>
      <span class="hljs-built_in">BoxShadow</span>(
        <span class="hljs-attribute">color</span>: Colors.black54,
        <span class="hljs-attribute">offset</span>: <span class="hljs-built_in">Offset</span>(<span class="hljs-number">2.0</span>, <span class="hljs-number">2.0</span>),
        <span class="hljs-attribute">blurRadius</span>: <span class="hljs-number">4.0</span>,
      )
    ],
  ),
  <span class="hljs-attribute">transform</span>: Matrix4.<span class="hljs-built_in">rotationZ</span>(.<span class="hljs-number">2</span>),<span class="hljs-comment">//å¡ç‰‡å€¾æ–œå˜æ¢</span>
  <span class="hljs-attribute">alignment</span>: Alignment.center, <span class="hljs-comment">//å¡ç‰‡å†…æ–‡å­—å±…ä¸­</span>
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Text</span>(
    <span class="hljs-comment">//å¡ç‰‡æ–‡å­—</span>
    <span class="hljs-string">"5.20"</span>, <span class="hljs-attribute">style</span>: <span class="hljs-built_in">TextStyle</span>(<span class="hljs-attribute">color</span>: Colors.white, <span class="hljs-attribute">fontSize</span>: <span class="hljs-number">40.0</span>),
  ),
 )
</code></pre>
<p>Â </p>
<h4 data-id="heading-12">1.2.4 SizedBox</h4>
<p>è®¾ç½®å®½é«˜</p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">SizedBox</span>(
    <span class="hljs-attribute">width</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attribute">height</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(
      <span class="hljs-attribute">margin</span>: const EdgeInsets.<span class="hljs-built_in">only</span>(<span class="hljs-attribute">top</span>: <span class="hljs-number">8.0</span>),
      <span class="hljs-attribute">color</span>: Colors.green,
    ),
  ),
</code></pre>
<p>Â </p>
<h4 data-id="heading-13">1.2.5 Scaffold</h4>
<p>Scaffold æ˜¯ä¸€ä¸ªè·¯ç”±é¡µçš„éª¨æ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‹¼è£…å‡ºä¸€ä¸ªå®Œæ•´çš„é¡µé¢ã€‚åŒ…å«ï¼šå¯¼èˆªæ ã€åº•éƒ¨å¯¼èˆªã€æ‚¬æµ®æ¡†ã€æŠ½å±‰èœå•ç­‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b5bb9a077a040aa9858d520f7d096bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=yeqps6Z%2Fk7U2PvT9A1OkHLZBRSQ%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57c6aa4b38a14ecd9387ff97c05a259e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=z5hG1WdyUTuqEcYDdb13hTOdmeo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ScaffoldRoute</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatefulWidget</span> {
  <span class="hljs-variable">@override</span>
  _ScaffoldRouteState <span class="hljs-built_in">createState</span>() =&gt; <span class="hljs-built_in">_ScaffoldRouteState</span>();
}
Â 
<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">_ScaffoldRouteState</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">ScaffoldRoute</span>&gt; {
  <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">_selectedIndex</span> = <span class="hljs-number">1</span>;
Â 
  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scaffold</span>(
      <span class="hljs-attribute">appBar</span>: <span class="hljs-built_in">AppBar</span>( <span class="hljs-comment">//å¯¼èˆªæ </span>
        <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"App Name"</span>), 
        <span class="hljs-attribute">actions</span>: &lt;Widget&gt;[ <span class="hljs-comment">//å¯¼èˆªæ å³ä¾§èœå•</span>
          <span class="hljs-built_in">IconButton</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.share), <span class="hljs-attribute">onPressed</span>: () {}),
        ],
      ),
      <span class="hljs-attribute">drawer</span>: <span class="hljs-built_in">MyDrawer</span>(), <span class="hljs-comment">//æŠ½å±‰</span>
      <span class="hljs-attribute">bottomNavigationBar</span>: <span class="hljs-built_in">BottomNavigationBar</span>( <span class="hljs-comment">// åº•éƒ¨å¯¼èˆª</span>
        <span class="hljs-attribute">items</span>: &lt;BottomNavigationBarItem&gt;[
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.home), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Home'</span>)),
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.business), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Business'</span>)),
          <span class="hljs-built_in">BottomNavigationBarItem</span>(<span class="hljs-attribute">icon</span>: <span class="hljs-built_in">Icon</span>(Icons.school), <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">'School'</span>)),
        ],
        <span class="hljs-attribute">currentIndex</span>: _selectedIndex,
        <span class="hljs-attribute">fixedColor</span>: Colors.blue,
        <span class="hljs-attribute">onTap</span>: _onItemTapped,
      ),
      <span class="hljs-attribute">floatingActionButton</span>: <span class="hljs-built_in">FloatingActionButton</span>( <span class="hljs-comment">//æ‚¬æµ®æŒ‰é’®</span>
          <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Icon</span>(Icons.add),
          <span class="hljs-attribute">onPressed</span>:_onAdd
      ),
    );
  }
  <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">_onItemTapped</span>(int index) {
    <span class="hljs-selector-tag">setState</span>(() {
      <span class="hljs-selector-tag">_selectedIndex</span> = <span class="hljs-selector-tag">index</span>;
    });
  }
  <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">_onAdd</span>(){
  }
}
</code></pre>
<p>Â </p>
<h3 data-id="heading-14">1.3 æ»šåŠ¨ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f4195c854fe4b90bc7e85e70ac2fedb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=oYlbFALl9XCOuKJOpECrFMZ9Vwg%3D" alt="" loading="lazy"/></p>
<p>é¡µé¢æ»šåŠ¨éœ€è¦ä½¿ç”¨æ»šåŠ¨ç±»ç»„ä»¶ã€‚</p>
<p>Â </p>
<h4 data-id="heading-15">1.4.1 SingleChildScrollView</h4>
<p>æ»šåŠ¨ç»„ä»¶ï¼Œä¸æ”¯æŒå»¶è¿ŸåŠ è½½æ¨¡å‹ï¼Œå†…å®¹ä¸è¶…å‡ºå±å¹•å¤ªå¤šæ—¶ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">SingleChildScrollView({
  <span class="hljs-keyword">this</span>.scrollDirection = Axis.vertical, <span class="hljs-comment">//æ»šåŠ¨æ–¹å‘ï¼Œé»˜è®¤æ˜¯å‚ç›´æ–¹å‘</span>
  <span class="hljs-keyword">this</span>.reverse = <span class="hljs-literal">false</span>, 
  <span class="hljs-keyword">this</span>.padding, 
  bool primary, 
  <span class="hljs-keyword">this</span>.physics, 
  <span class="hljs-keyword">this</span>.controller,
  <span class="hljs-keyword">this</span>.child,
})
</code></pre>
<p>Â </p>
<h4 data-id="heading-16">1.4.2 ListVew</h4>
<p>ListViewæ˜¯æœ€å¸¸ç”¨çš„å¯æ»šåŠ¨ç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒå¯ä»¥æ²¿ä¸€ä¸ªæ–¹å‘çº¿æ€§æ’å¸ƒæ‰€æœ‰å­ç»„ä»¶ï¼Œå¹¶ä¸”å®ƒä¹Ÿæ”¯æŒåˆ—è¡¨é¡¹æ‡’åŠ è½½ï¼ˆåœ¨éœ€è¦æ—¶æ‰ä¼šåˆ›å»ºï¼‰ã€‚</p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// åŸºæœ¬ä½¿ç”¨</span>
<span class="hljs-selector-tag">ListView</span>(
  <span class="hljs-attribute">shrinkWrap</span>: true, 
  <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">20.0</span>),
  <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'I'</span>m dedicating every day to you'),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'Domestic life was never quite my style'</span>),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'When you smile, you knock me out, I fall apart'</span>),
    const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'And I thought I was so smart'</span>),
  ],
);
Â 
<span class="hljs-comment">// ListView.builderï¼ŒListView.builderé€‚åˆåˆ—è¡¨é¡¹æ¯”è¾ƒå¤šæˆ–è€…åˆ—è¡¨é¡¹ä¸ç¡®å®šçš„æƒ…å†µï¼Œä¸‹é¢çœ‹ä¸€ä¸‹ListView.builderçš„æ ¸å¿ƒå‚æ•°åˆ—è¡¨ã€‚</span>
Â 
<span class="hljs-selector-tag">ListView</span><span class="hljs-selector-class">.builder</span>(
  <span class="hljs-attribute">itemCount</span>: <span class="hljs-number">100</span>,
  <span class="hljs-attribute">itemExtent</span>: <span class="hljs-number">50.0</span>, <span class="hljs-comment">//å¼ºåˆ¶é«˜åº¦ä¸º50.0</span>
  <span class="hljs-attribute">itemBuilder</span>: (BuildContext context, int index) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListTile</span>(<span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"$index"</span>));
  }
);
</code></pre>
<p>Â </p>
<h4 data-id="heading-17">1.4.3 GridView</h4>
<p>ç½‘æ ¼å¸ƒå±€æ˜¯ä¸€ç§å¸¸è§çš„å¸ƒå±€ç±»å‹ï¼ŒGridView ç»„ä»¶æ­£æ˜¯å®ç°äº†ç½‘æ ¼å¸ƒå±€çš„ç»„ä»¶ã€‚GridViewå’ŒListViewçš„å¤§å¤šæ•°å‚æ•°éƒ½æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬çš„å«ä¹‰ä¹Ÿéƒ½ç›¸åŒçš„ã€‚</p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">GridView</span>(
  <span class="hljs-attribute">gridDelegate</span>: <span class="hljs-built_in">SliverGridDelegateWithFixedCrossAxisCount</span>(
      <span class="hljs-attribute">crossAxisCount</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">//æ¨ªè½´ä¸‰ä¸ªå­widget</span>
      <span class="hljs-attribute">childAspectRatio</span>: <span class="hljs-number">1.0</span> <span class="hljs-comment">//å®½é«˜æ¯”ä¸º1æ—¶ï¼Œå­widget</span>
  ),
  <span class="hljs-attribute">children</span>:&lt;Widget&gt;[
    <span class="hljs-built_in">Icon</span>(Icons.ac_unit),
    <span class="hljs-built_in">Icon</span>(Icons.airport_shuttle),
    <span class="hljs-built_in">Icon</span>(Icons.all_inclusive),
    <span class="hljs-built_in">Icon</span>(Icons.beach_access),
    <span class="hljs-built_in">Icon</span>(Icons.cake),
    <span class="hljs-built_in">Icon</span>(Icons.free_breakfast)
  ]
);
</code></pre>
<p>Â </p>
<p>Â </p>
<p>Â </p>
<h3 data-id="heading-18">1.4 å¼¹çª—ç±»ç»„ä»¶</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1517e020727f452cb7a61e7a78a64a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Mz83WnRRPc6eTAUAT8%2FdqfgQSbk%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-19">3.4.1 AlertDialog</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c3ffd2f13ca453783e32b8af0e99f59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=4zw91wfrrqFPayz3eYq6Bl4NJgs%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showDialog</span>(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">AlertDialog</span>(
        <span class="hljs-attribute">title</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"AlertDialog"</span>),
        <span class="hljs-attribute">content</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"This is an AlertDialog"</span>),
        <span class="hljs-attribute">actions</span>: &lt;Widget&gt;[
          <span class="hljs-built_in">TextButton</span>(
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"OK"</span>),
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
          ),
        ],
      );
    },
  );
</code></pre>
<p>Â </p>
<h4 data-id="heading-20">3.4.2 SimpleDialog</h4>
<p>SimpleDialogä¹Ÿæ˜¯Materialç»„ä»¶åº“æä¾›çš„å¯¹è¯æ¡†ï¼Œå®ƒä¼šå±•ç¤ºä¸€ä¸ªåˆ—è¡¨ï¼Œç”¨äºåˆ—è¡¨é€‰æ‹©çš„åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b3e38b8c90544c8adf8074fc121e0bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=4WDASHzJg46j1tgmgG5iDKSVDRY%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showDialog</span>(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">SimpleDialog</span>(
        <span class="hljs-attribute">title</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"SimpleDialog"</span>),
        <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
          <span class="hljs-built_in">SimpleDialogOption</span>(
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Option 1"</span>),
          ),
          <span class="hljs-built_in">SimpleDialogOption</span>(
            <span class="hljs-attribute">onPressed</span>: () {
              Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>();
            },
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"Option 2"</span>),
          ),
        ],
      );
    },
  );
</code></pre>
<p>Â </p>
<h4 data-id="heading-21">3.4.3 showModalBottomSheet</h4>
<p>åº•éƒ¨å¼¹çª—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42be83ed6a7e4e9dadb2dcb6de58d4d7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=vLdXDTSDBWXk8ZG39OHekWDDfH8%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<pre><code class="hljs language-less" lang="less">  <span class="hljs-selector-tag">showModalBottomSheet</span>&lt;<span class="hljs-selector-tag">int</span>&gt;(
    <span class="hljs-attribute">context</span>: context,
    <span class="hljs-attribute">builder</span>: (BuildContext context) {
      <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListView</span><span class="hljs-selector-class">.builder</span>(
        <span class="hljs-attribute">itemCount</span>: <span class="hljs-number">30</span>,
        <span class="hljs-attribute">itemBuilder</span>: (BuildContext context, int index) {
          <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ListTile</span>(
            <span class="hljs-attribute">title</span>: <span class="hljs-built_in">Text</span>(<span class="hljs-string">"$index"</span>),
            <span class="hljs-attribute">onTap</span>: () =&gt; Navigator.<span class="hljs-built_in">of</span>(context).<span class="hljs-built_in">pop</span>(index),
          );
        },
      );
    },
  );
</code></pre>
<p>Â </p>
<h2 data-id="heading-22">äºŒã€å¸ƒå±€å¸¸ç”¨Widget</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e9d41a1b694cddb7f3f31efab856f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Gje1sF%2FD%2BwcyBLA%2FkOMMmPhVayw%3D" alt="" loading="lazy"/></p>
<p>é‡ç‚¹é˜…è¯»ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout" target="_blank" title="https://docs.flutter.cn/ui/layout" ref="nofollow noopener noreferrer">Flutterä¸­çš„å¸ƒå±€</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout%2Fconstraints" target="_blank" title="https://docs.flutter.cn/ui/layout/constraints" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£ Flutter å¸ƒå±€çº¦æŸ</a></li>
</ul>
<p>Â </p>
<h3 data-id="heading-23">2.1 å¸ƒå±€ç»„ä»¶</h3>
<ul>
<li>Centerï¼Œå±…ä¸­</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/55c977881c3a4ea19e970a22f14049e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=MWumN5SrrIQ1TM4zM%2F1hv1Q2IVA%3D" alt="" loading="lazy"/></p>
<ul>
<li>Rowï¼Œæ¨ªå‘æ’åˆ—ï¼Œä¸èƒ½æ¢è¡Œ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7c47e2bd1994f47bfe02bce014e83cc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=24lt925aJ74HWeDwi6B5c6WbWf8%3D" alt="" loading="lazy"/></p>
<ul>
<li>Columnï¼Œç«–å‘æ’åˆ—ï¼Œä¸èƒ½æ¢åˆ—</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6aaf8bfededb408f9459fce57a216511~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=gnDyqcppdg7KbfvO6vPZbY%2FAhfo%3D" alt="" loading="lazy"/></p>
<ul>
<li>Flexã€Expandedï¼Œå®ç° flex: 1çš„æ•ˆæœï¼Œæ³¨æ„Row/Columnéƒ½é›†æˆè‡ªFlex</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/080e12ea9d08455eb1d90c97e43bb1d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=PVR0VWv1JCxZfPT5Ql7ES4GiYQc%3D" alt="" loading="lazy"/></p>
<ul>
<li>Wrapï¼Œè‡ªåŠ¨æ¢è¡Œ</li>
<li>Flowï¼Œæ¯”è¾ƒå¤æ‚ï¼Œä½¿ç”¨åœºæ™¯è¾ƒå°‘</li>
<li>Stackã€Postionedï¼Œå®ç°ç»å¯¹å¸ƒå±€çš„æ•ˆæœ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79f892961abb45f49b3e6c6d1a91e3b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=btYf9dQcwlip0xna6pi%2F1dr7Fic%3D" alt="" loading="lazy"/></p>
<ul>
<li>Alignã€Alignmentï¼Œå®ç°å¯¹é½å’Œç›¸å¯¹å®šä½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8717e97ec1e4f878c1c594c44cfce2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=wSssKQ1IFB0AXkotjnH%2BjSNatOo%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/faca4ac8bab949ed9d9169701c78b35c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=q6nkMj2fGVaDOd3R1wsCsKki6Fg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b5ab527a1504901a1bf43e54b455031~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=6A4hH%2ByqSaV3XsSI4MS7rrdhLe0%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<h4 data-id="heading-24">2.1.1 ç¤ºä¾‹1ï¼š</h4>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9dfe4713cc1466c843b36f7090d5e5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=lvPj8Sgk6LyGMt4hERhQlPXUXhM%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91eccb34b4fc4a1087f6d32864bfb5b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=3oCQCbyTJaqIh5hG95i3e9zLVP8%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-25">2.1.2 ç¤ºä¾‹2ï¼š</h4>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b20ff93b9ea54ceabb3530afc64647c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=Z5sCpgZ2A9rAj8x9nU60x3bvz2o%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abfbf0b4bf91458b8728820cfa37d354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=pRZfbz2606AjOPUFuq86MV30AB4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-26">2.2 å¸ƒå±€çº¦æŸ</h3>
<p>é‡ç‚¹é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.cn%2Fui%2Flayout%2Fconstraints" target="_blank" title="https://docs.flutter.cn/ui/layout/constraints" ref="nofollow noopener noreferrer">æ·±å…¥ç†è§£ Flutter å¸ƒå±€çº¦æŸ</a></p>
<p>Â </p>
<h4 data-id="heading-27">2.2.1 çº¦æŸåŸºæœ¬ä»‹ç»</h4>
<p>çº¦æŸæ˜¯çˆ¶ç»„ä»¶å¯¹å­ç»„ä»¶çš„å°ºå¯¸é™åˆ¶ï¼Œé€šè¿‡ BoxConstraints å¯¹è±¡å®šä¹‰ï¼ŒåŒ…å«å››ä¸ªå…³é”®å±æ€§ï¼š</p>
<ul>
<li>minWidth / maxWidth ï¼šå®½åº¦å…è®¸çš„æœ€å°/æœ€å¤§å€¼ï¼›</li>
<li>minHeight / maxHeight ï¼šé«˜åº¦å…è®¸çš„æœ€å°/æœ€å¤§å€¼ã€‚</li>
</ul>
<p>Â </p>
<p>çº¦æŸç±»å‹ï¼š</p>
<ul>
<li>ä¸¥çº¦æŸï¼ˆTight Constraintsï¼‰ï¼ŒminWidth = maxWidth ä¸” minHeight = maxHeightï¼Œå­ç»„ä»¶å¿…é¡»ä½¿ç”¨çˆ¶ç»„ä»¶æŒ‡å®šçš„ å›ºå®šå°ºå¯¸ã€‚</li>
<li>æ¾çº¦æŸï¼ˆLoose Constraintsï¼‰ï¼ŒminWidth = 0, minHeight = 0ï¼Œå­ç»„ä»¶å¯åœ¨æœ€å¤§èŒƒå›´å†…<strong>è‡ªç”±é€‰æ‹©å°ºå¯¸</strong>ã€‚</li>
</ul>
<p>Â </p>
<p>Â </p>
<p>æœ‰ä¸‰ä¸ªæ ¸å¿ƒWidgetï¼š</p>
<ul>
<li>BoxConstraintsï¼ŒåŸºç¡€çº¦æŸä¿¡æ¯ï¼Œå­˜æ”¾ï¼šæœ€å¤§å®½åº¦ã€æœ€å°å®½åº¦ã€æœ€å¤§é«˜åº¦ã€æœ€å°é«˜åº¦ã€‚</li>
<li>ConstrainedBoxï¼Œç”¨äºç»™å­ç»„ä»¶æ·»åŠ çº¦æŸä¿¡æ¯ã€‚</li>
<li>UnconstrainedBoxï¼Œå­ç»„ä»¶ä¸å—çº¦æŸé™åˆ¶ã€‚</li>
</ul>
<p>Â </p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// BoxConstraints</span>
<span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">BoxConstraints</span>({
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.minWidth</span> = <span class="hljs-number">0.0</span>, <span class="hljs-comment">//æœ€å°å®½åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.maxWidth</span> = <span class="hljs-selector-tag">double</span><span class="hljs-selector-class">.infinity</span>, <span class="hljs-comment">//æœ€å¤§å®½åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.minHeight</span> = <span class="hljs-number">0.0</span>, <span class="hljs-comment">//æœ€å°é«˜åº¦</span>
  <span class="hljs-selector-tag">this</span><span class="hljs-selector-class">.maxHeight</span> = <span class="hljs-selector-tag">double</span><span class="hljs-selector-class">.infinity</span> <span class="hljs-comment">//æœ€å¤§é«˜åº¦</span>
})
Â 
<span class="hljs-comment">// ConstrainedBox</span>
<span class="hljs-selector-tag">ConstrainedBox</span>(
  <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(
    <span class="hljs-attribute">minWidth</span>: double.infinity, <span class="hljs-comment">//å®½åº¦å°½å¯èƒ½å¤§</span>
    <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">50.0</span> <span class="hljs-comment">//æœ€å°é«˜åº¦ä¸º50åƒç´ </span>
  ),
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(
    <span class="hljs-attribute">height</span>: <span class="hljs-number">5.0</span>, 
    <span class="hljs-attribute">child</span>: redBox ,
  ),
)
Â 
<span class="hljs-comment">// ConstrainedBox</span>
<span class="hljs-selector-tag">ConstrainedBox</span>(
  <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(<span class="hljs-attribute">minWidth</span>: <span class="hljs-number">60.0</span>, <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">100.0</span>),  <span class="hljs-comment">//çˆ¶</span>
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">UnconstrainedBox</span>( <span class="hljs-comment">//â€œå»é™¤â€çˆ¶çº§é™åˆ¶</span>
    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">ConstrainedBox</span>(
      <span class="hljs-attribute">constraints</span>: <span class="hljs-built_in">BoxConstraints</span>(<span class="hljs-attribute">minWidth</span>: <span class="hljs-number">90.0</span>, <span class="hljs-attribute">minHeight</span>: <span class="hljs-number">20.0</span>),<span class="hljs-comment">//å­</span>
      <span class="hljs-attribute">child</span>: redBox,
    ),
  )
)
</code></pre>
<p>Â </p>
<p>Â </p>
<h4 data-id="heading-28">2.2.2 çº¦æŸçš„åŸºæœ¬åŸç†</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4ef4c387579498ab01752571dec7fc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=0cfztoXOwNOTbqIHiggKWeWdhnM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c807921edb7d41bdbd5cbad20739ca7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=fsriJoo6sMDhn344ahVuf6VCjDg%3D" alt="" loading="lazy"/></p>
<p>Â </p>
<p>å¸ƒå±€è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<p>1.Â  å‘ä¸‹ä¼ é€’çº¦æŸâ€‹ï¼Œçˆ¶ç»„ä»¶æ ¹æ®è‡ªèº«çº¦æŸå’Œå¸ƒå±€é€»è¾‘ï¼Œç”Ÿæˆå­ç»„ä»¶çš„çº¦æŸå¹¶ä¼ é€’ã€‚</p>
<p>2.Â  å­ç»„ä»¶ç¡®å®šå°ºå¯¸ï¼Œå­ç»„ä»¶åœ¨çº¦æŸèŒƒå›´å†…è®¡ç®—è‡ªèº«å°ºå¯¸ï¼Œå¹¶å‘ä¸Šè¿”å›ç»“æœï¼ˆå¦‚ Text æ ¹æ®æ–‡å­—å†…å®¹è®¡ç®—å¤§å°ï¼‰ã€‚</p>
<p>3.Â  â€‹â€‹çˆ¶ç»„ä»¶å®šä½â€‹ï¼Œçˆ¶ç»„ä»¶æ ¹æ®å­ç»„ä»¶å°ºå¯¸å’Œå¸ƒå±€è§„åˆ™ï¼ˆå¦‚ Row çš„æ°´å¹³æ’åˆ—ã€Stack çš„å †å ï¼‰ç¡®å®šå­ç»„ä»¶çš„åæ ‡ã€‚</p>
<p>Â </p>
<p>Flutterå®¹å™¨ç»„ä»¶çº¦æŸç±»å‹æ±‡æ€»ï¼š</p>



















































































<table><thead><tr><th>å®¹å™¨ç»„ä»¶</th><th>çº¦æŸç±»å‹</th><th>å…·ä½“çº¦æŸè¡Œä¸º</th><th>å…¸å‹ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å±å¹•ï¼ˆScreen/RenderViewï¼‰</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶æœ€å¤–å±‚ç»„ä»¶å¡«æ»¡æ•´ä¸ªå±å¹•ï¼ˆBoxConstraints.tight(å±å¹•å°ºå¯¸)ï¼‰</td><td>åº”ç”¨æ ¹å¸ƒå±€ï¼Œç¡®ä¿å†…å®¹å…¨å±æ˜¾ç¤º</td></tr><tr><td>Scaffold.body</td><td>å®½çº¦æŸ</td><td>æ°´å¹³è½´ï¼š[0, å±å¹•å®½åº¦]<br/>å‚ç›´è½´ï¼š[0, å±å¹•é«˜åº¦-AppBaré«˜åº¦ç­‰]ï¼ˆå…è®¸å­ç»„ä»¶è‡ªç”±é€‰æ‹©å°ºå¯¸ï¼‰</td><td>é¡µé¢ä¸»ä½“å†…å®¹åŒºåŸŸï¼Œæ”¯æŒçµæ´»å°ºå¯¸</td></tr><tr><td>Container</td><td>åŠ¨æ€çº¦æŸ</td><td>è‹¥è®¾ç½®å®½é«˜åˆ™æ–½åŠ ç´§çº¦æŸï¼›<br/>æœªè®¾ç½®å°ºå¯¸æ—¶ä¼ é€’çˆ¶çº§çº¦æŸï¼ˆé€šå¸¸ä¸ºå®½çº¦æŸï¼‰</td><td>è‡ªå®šä¹‰å°ºå¯¸ã€èƒŒæ™¯è‰²ã€è¾¹è·çš„å®¹å™¨</td></tr><tr><td>Align</td><td>å®½çº¦æŸ</td><td>å°†çˆ¶çº§çº¦æŸè½¬æ¢ä¸ºæœ€å°å€¼ä¸º 0 çš„å®½æ¾çº¦æŸ <br/>ï¼ˆå…è®¸å­ç»„ä»¶è‡ªç”±é€‰æ‹©å°ºå¯¸ï¼Œä¸è¶…è¿‡çˆ¶å®¹å™¨èŒƒå›´ï¼‰</td><td>å­ç»„ä»¶åœ¨çˆ¶å®¹å™¨å†…è‡ªå®šä¹‰å¯¹é½ä½ç½®</td></tr><tr><td>Padding</td><td>å®½çº¦æŸ</td><td>ä¿ç•™çˆ¶çº§çº¦æŸï¼Œå­ç»„ä»¶å°ºå¯¸é™åˆ¶åœ¨çˆ¶çº¦æŸ - å†…è¾¹è·èŒƒå›´å†…1</td><td>å¢åŠ å†…è¾¹è·</td></tr><tr><td>Center</td><td>å®½çº¦æŸ</td><td>å°†çˆ¶çº§ç´§çº¦æŸè½¬ä¸ºæœ€å°å€¼ä¸º0çš„å®½çº¦æŸï¼ˆå¦‚ BoxConstraints.loose()ï¼‰</td><td>å­ç»„ä»¶å±…ä¸­ä¸”å¯å°äºçˆ¶å®¹å™¨</td></tr><tr><td>ConstrainedBox</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶æ»¡è¶³é¢å¤–çš„æœ€å°/æœ€å¤§å®½é«˜é™åˆ¶ï¼ˆä¸çˆ¶çº¦æŸå–äº¤é›†ï¼‰</td><td>ç²¾ç¡®æ§åˆ¶å­ç»„ä»¶å°ºå¯¸èŒƒå›´</td></tr><tr><td>SizedBox</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶é‡‡ç”¨æŒ‡å®šå®½é«˜ï¼ˆå¿½ç•¥çˆ¶çº§çº¦æŸï¼‰</td><td>å›ºå®šå°ºå¯¸å ä½æˆ–å¼ºåˆ¶å­ç»„ä»¶å°ºå¯¸</td></tr><tr><td>UnconstrainedBox</td><td>æ— çº¦æŸ</td><td>ç§»é™¤çˆ¶çº§çº¦æŸï¼ˆä½†è‡ªèº«å°ºå¯¸ä»å—çˆ¶çº§é™åˆ¶ï¼Œè¶…å‡ºçš„éƒ¨åˆ†ä¼šè¢«è£å‰ªï¼‰</td><td>éœ€è¦å­ç»„ä»¶å®Œå…¨è‡ªä¸»å†³å®šå°ºå¯¸çš„åœºæ™¯</td></tr><tr><td>AspectRatio</td><td>ç´§çº¦æŸ</td><td>å¼ºåˆ¶å­ç»„ä»¶æ»¡è¶³ç‰¹å®šå®½é«˜æ¯”ï¼ˆåœ¨çˆ¶çº§çº¦æŸèŒƒå›´å†…è®¡ç®—ï¼‰</td><td>ä¿æŒå›ºå®šå®½é«˜æ¯”çš„å…ƒç´ ï¼ˆå¦‚æ–¹å½¢å›¾ç‰‡ï¼‰</td></tr><tr><td>FractionallySizedBox</td><td>å®½çº¦æŸ</td><td>æŒ‰æ¯”ä¾‹å ç”¨çˆ¶ç»„ä»¶ç©ºé—´ï¼ˆwidthFactor/heightFactoræ§åˆ¶å æ¯”ï¼‰</td><td>å“åº”å¼å¸ƒå±€ï¼ˆå¦‚æŒ‰é’®å®½åº¦å çˆ¶å®¹å™¨70%ï¼‰</td></tr><tr><td>ListView/ScrollView</td><td>æ— ç•Œçº¦æŸ</td><td>å‚ç›´è½´ï¼š[0, Infinity]<br/>æ°´å¹³è½´ï¼š[0, å±å¹•å®½åº¦]</td><td>å¯æ»šåŠ¨å†…å®¹åŒºåŸŸ</td></tr></tbody></table>
<h5 data-id="heading-29">ç¤ºä¾‹1ï¼š</h5>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">Container</span>(color: red)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9ad216044ef454ebd2a40ee26b1b003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=%2FEtS6KTlIeXcw9lqMjIjr3JRICs%3D" alt="" loading="lazy"/></p>
<p>Container å……æ»¡äº†æ•´ä¸ªå±å¹•</p>
<p>Â </p>
<h5 data-id="heading-30">ç¤ºä¾‹2ï¼š</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58d37534347a401e8714ec786d607cee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=BNR8%2FitViauuA7F9DQe53JHzj3s%3D" alt="" loading="lazy"/></p>
<p>Container å……æ»¡äº†æ•´ä¸ªå±å¹•</p>
<p>Â </p>
<h5 data-id="heading-31">ç¤ºä¾‹3ï¼šCenter</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Center</span>(<span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red))
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15c7b1c848664159b71a6a4f25102e15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=GWliHiOzrunmqE3i4g5ZT6svHMI%3D" alt="" loading="lazy"/></p>
<p>Center å……æ»¡äº†å±å¹•ï¼ŒContainer å˜æˆ 100 Ã— 100ã€‚</p>
<p>Â </p>
<h5 data-id="heading-32">ç¤ºä¾‹4ï¼šAlign</h5>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Align</span>(
  <span class="hljs-attribute">alignment</span>: Alignment.bottomRight,
  <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Container</span>(<span class="hljs-attribute">width</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">height</span>: <span class="hljs-number">100</span>, <span class="hljs-attribute">color</span>: red),
)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c46085cafc4d809024898218f2f3c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgV2F0ZXJGbHk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764424318&amp;x-signature=N%2F1gPprwyG077HjyDqF14o%2BM9I8%3D" alt="" loading="lazy"/></p>
<p>Containerå¤§å°100*100ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7575102474639196211</link>    <guid>https://juejin.cn/post/7575102474639196211</guid>    <pubDate>2025-11-22T13:31:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102474639196211" data-draft-id="7575102209605140506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,Rust,iOS"/> <meta itemprop="datePublished" content="2025-11-22T13:31:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¸“ä¸šç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1968539883540688"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç²¾è¯» GitHub - servo æµè§ˆå™¨ï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1968539883540688/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¸“ä¸šç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:31:19.000Z" title="Sat Nov 22 2025 13:31:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç®€ä»‹</h2>
<blockquote>
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fservo%2Fservo" target="_blank" title="https://github.com/servo/servo" ref="nofollow noopener noreferrer">github.com/servo/servo</a></p>
</blockquote>
<p>è¿™ä¸€æœŸçš„ç²¾è¯» GitHub ç³»åˆ—æ˜¯ servo æµè§ˆå™¨ï¼Œæˆ‘ä»¬å°†ä»æºç çš„è§’åº¦å»æ‹†è§£ servo æµè§ˆå™¨ï¼Œé€æ­¥å˜æ¸…æ•´ä¸ªæµè§ˆå™¨çš„å·¥ä½œåŸç†ã€‚</p>
<p>servo æ˜¯ä¸€æ¬¾å®éªŒæ€§è´¨çš„ç°ä»£æµè§ˆå™¨å¼•æ“ï¼Œé‡‡ç”¨ Rust è¯­è¨€ç¼–å†™ï¼ˆå…¶å®æ˜¯ä¸ºäº†å†™ servo åˆ›å»ºäº† Rust è¿™é—¨è¯­è¨€ï¼Œä½† servo æ²¡ç«ï¼ŒRust å…ˆç«èµ·æ¥äº†ï¼ï¼‰ï¼Œservo ç›®å‰è¿˜æ²¡æœ‰ç‹¬ç«‹çš„ Appï¼Œéœ€è¦ä½¿ç”¨ servoshell æ¥è¿è¡Œç½‘é¡µï¼›servo ä¸ä»…å±•ç¤ºäº† Rust è¯­è¨€åœ¨ç³»ç»Ÿç¼–ç¨‹ä¸­çš„å¼ºå¤§èƒ½åŠ›ï¼Œè¿˜å¼€åˆ›äº†<strong>å¹¶è¡ŒåŒ–å¸ƒå±€å’Œæ¸²æŸ“</strong>çš„å…¨æ–°ç†å¿µï¼ˆå…¶ä¸­å¾ˆå¤šå·²ç»è¢« Firefox å¸æ”¶ï¼‰ï¼Œæ˜¯ä¸€ä¸ªå­¦ä¹ æµè§ˆå™¨åŸç†ä¸ Rust è¯­è¨€éå¸¸æ£’çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>è‡ª 2012 å¹´ä»¥æ¥ï¼Œç›®å‰å·²æ”¶è· 30K+çš„ starï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ad69e2602424a4fba09f99921e0cbc4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=VeSNzxtdqdf7B074mHNIn7qXSbM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€å®‰è£…ä½¿ç”¨</h2>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ macOS ä¸ºä¾‹ï¼Œä»‹ç»å¦‚ä½•åœ¨ç¼–è¯‘ servoï¼Œä»¥åŠåœ¨ servo ä¸Šè¿è¡Œä¸€ä¸ªç½‘é¡µï¼Œå…¶ä»–æ“ä½œç³»ç»ŸæŒ‰ç…§å®˜æ–¹ README æ­¥éª¤æ“ä½œå³å¯ã€‚</p>
<p>macOS ä¸Šç¼–è¯‘ servo æ­¥éª¤ï¼š</p>
<p>1ï¼‰ä¸‹è½½ servo æºç ï¼š</p>
<pre><code class="hljs language-Shell" lang="Shell">git clone https://github.com/servo/servo
</code></pre>
<p>2ï¼‰å®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Fxcode%2F" target="_blank" title="https://developer.apple.com/xcode/" ref="nofollow noopener noreferrer"> Xcode </a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fbrew.sh%2F" target="_blank" title="https://brew.sh/" ref="nofollow noopener noreferrer"> brew</a></p>
<p>3ï¼‰å®‰è£…<code>uv</code></p>
<pre><code class="hljs language-Shell" lang="Shell">curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p>4ï¼‰å®‰è£… rustup</p>
<pre><code class="hljs language-Shell" lang="Shell">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<p>5ï¼‰é‡å¯å‘½ä»¤è¡Œä¿è¯å®‰è£…çš„å·¥å…·ç”Ÿæ•ˆï¼Œåœ¨ servo æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>./mach bootstrap</code>å®‰è£…ä¾èµ–</p>
<p>6ï¼‰åœ¨ servo æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>./mach build</code>è¿›è¡Œç¼–è¯‘ï¼šmach æ˜¯ servo çš„æ„å»ºå’Œç®¡ç†å·¥å…·</p>
<p>ç¼–è¯‘æˆåŠŸåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿è¡Œä¸€ä¸ªç½‘é¡µï¼š</p>
<pre><code class="hljs language-Shell" lang="Shell"><span class="hljs-meta prompt_"># </span><span class="bash">è¿è¡Œç½‘é¡µ</span>
./mach run https://example.com
<span class="hljs-meta prompt_">
# </span><span class="bash">æ— å¤´æµè§ˆå™¨æ¨¡å¼è¿è¡Œï¼šä¸å¯åŠ¨å›¾å½¢ç•Œé¢</span>
./mach run --headless https://example.com
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8511b504847c4f9694da3dda97e57a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=8ch5QrwNVDzYISr25tBI0rLjFSU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ¶æ„ä»‹ç»</h2>
<h3 data-id="heading-3">3.1 ç›®å½•ç»“æ„</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3540d74c810542e39a7bc9d3ceed6975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=fhiHJ2Tud7Z1NC%2FLCAUi%2Bt%2BEBkw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä»¥<code>./mach run </code>â€‹<code>https://baidu.com</code>å‘½ä»¤è¿è¡Œä¸ºä¾‹ï¼Œæ¥æ·±å…¥ç†è§£è¿™äº›<strong>ç›®å½•ä¹‹é—´æ˜¯å¦‚ä½•ååŒå·¥ä½œ</strong>çš„ï¼š</p>
<p>1ï¼‰<code>ports/servoshell</code> å¯åŠ¨ç¨‹åºï¼Œè°ƒç”¨ <code>components/constellation</code> åˆ›å»ºä¸€ä¸ªæ–°çš„ Tab</p>
<p>2ï¼‰<code>constellation</code> æŒ‡æŒ¥ <code>components/net</code> å»ä¸‹è½½ç½‘é¡µ</p>
<p>3ï¼‰ä¸‹è½½çš„ HTML ä¼ ç»™ <code>components/script</code> è§£ææˆ DOM æ ‘</p>
<p>4ï¼‰<code>components/style</code> å¹¶è¡Œè®¡ç®—æ ·å¼ï¼Œé™„ç€åœ¨ DOM ä¸Š</p>
<p>5ï¼‰<code>components/layout</code> è¯»å– DOM å’Œæ ·å¼ï¼Œè®¡ç®—ä½ç½®ï¼Œç”Ÿæˆå¸ƒå±€æ ‘ï¼ˆLayout Treeï¼‰</p>
<p>6ï¼‰æœ€åï¼Œç»“æœè¢«é€åˆ° <code>components/compositing</code> æ˜¾ç¤ºåˆ°å±å¹•ä¸Š</p>
<h3 data-id="heading-4">3.2 æ¶æ„å›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68f6378a3c424b72927cabc62e4ba2a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=bqDFLGDWEdxrrd71vxnrBxAHB5k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸Šå›¾æ˜¯å•å†…å®¹è¿›ç¨‹æ—¶çš„æ¶æ„å›¾ï¼Œå®é™…ä¸Šæ¯ä¸ª tab éƒ½å¯ä»¥è§†ä¸ºä¸€ä¸ªè¿›ç¨‹ã€‚</p>
<p><strong>å…³é”®ç‚¹ï¼š</strong></p>
<p><strong>1) Constellation</strong></p>
<p>æ ¸å¿ƒåè°ƒè€…ï¼Œå¯ä»¥ç†è§£ä¸º tab ç®¡ç†å™¨ï¼Œç”¨äºç®¡ç†å¤šä¸ªä»»åŠ¡ç®¡çº¿ï¼ˆPipelineï¼‰</p>
<p><strong>2ï¼‰å¤š Pipeline å¹¶è¡Œ</strong></p>
<p>å›¾ä¸­å±•ç¤ºäº† A å’Œ B ä¸¤ä¸ª Script çº¿ç¨‹ï¼Œservo åœ¨è®¾è®¡ä¸Šæ”¯æŒä¸€ä¸ªè¿›ç¨‹å†…è¿è¡Œå¤šä¸ªç‹¬ç«‹çš„æ¸²æŸ“ç®¡çº¿ï¼Œæ¯”å¦‚ iframe å¯ä»¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ç®¡çº¿</p>
<p><strong>3ï¼‰Script ä¸ Layout åˆ†ç¦»</strong></p>
<p>æ¯ä¸ª Script çº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªä¸“å±çš„ Layout çº¿ç¨‹</p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œç½‘é¡µå¤„ç†ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>

























<table><thead><tr><th><strong>é˜¶æ®µ</strong></th><th>æ ¸å¿ƒèŒè´£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Script</strong></td><td>æ‰€æœ‰æƒ DOM æ ‘ï¼Œæ‰§è¡Œ JavaScriptï¼Œå¤„ç†å¯¼èˆªäº‹ä»¶ç­‰</td><td>å½“éœ€è¦çŸ¥é“å…ƒç´ ä½ç½®ï¼ˆå¦‚ offsetWidthï¼‰æ—¶ï¼Œå¿…é¡»å‘æ¶ˆæ¯è¯¢é—® Layout</td></tr><tr><td><strong>Layout</strong></td><td>å¿«ç…§ DOM æ ‘ï¼Œè®¡ç®—æ ·å¼ï¼Œæ„å»º Box Tree å’Œ Fragment Tree</td><td>æœ€ç»ˆç”Ÿæˆ Display List å¹¶å‘é€ç»™ Compositor</td></tr><tr><td><strong>Compositor</strong></td><td>UI çº¿ç¨‹ï¼Œæ¥æ”¶æ˜¾ç¤ºåˆ—è¡¨ï¼Œè½¬å‘ç»™ WebRender è¿›è¡Œ GPU æ¸²æŸ“</td><td>UI äº‹ä»¶ï¼ˆå¦‚ç‚¹å‡»ã€æ»šåŠ¨ï¼‰çš„ç¬¬ä¸€æ¥æ”¶è€…ï¼Œé€šå¸¸ä¼šå°†äº‹ä»¶è½¬å‘ç»™ Script å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-5">3.3 servo çš„åŠ é€Ÿç§˜ç±</h3>
<p>servo åœ¨å“ªäº›åœ°æ–¹å˜å¿«äº†ï¼Œåˆæ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿ</p>
<p>å¯ä»¥æ€»ç»“å¦‚ä¸‹ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f34b451a36c54ff98b799c9788fbfcf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2e5LiT5Lia56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764423079&amp;x-signature=NTy482n9wOJJQdQ0fF86NcYU6xk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-6">å››ã€æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å¯¹ servo æœ‰äº†æ•´ä½“çš„äº†è§£ï¼Œåç»­ï¼Œæˆ‘ä»¬å°†ä»æºç è§’åº¦é€æ­¥æ‹†è§£å„éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>æ›´å¤šç²¾å½©å†…å®¹åœ¨å…¬ä¼—å· <strong>ã€Œéä¸“ä¸šç¨‹åºå‘˜Pingã€</strong>ï¼Œæ¬¢è¿è®¢é˜…äº¤æµï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬]]></title>    <link>https://juejin.cn/post/7575054113924907023</link>    <guid>https://juejin.cn/post/7575054113924907023</guid>    <pubDate>2025-11-22T13:40:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575054113924907023" data-draft-id="7575106644498284578" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,Nuxt.js"/> <meta itemprop="datePublished" content="2025-11-22T13:40:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Account_Ray"/> <meta itemprop="url" content="https://juejin.cn/user/3573837575226061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3 çš„ä¸“å±äºŒç»´ç ç»„ä»¶ vue3-next-qrcode è¿æ¥ 4.0.0 ç‰ˆæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3573837575226061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Account_Ray
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:40:25.000Z" title="Sat Nov 22 2025 13:40:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">vue3-next-qrcodeï¼šä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨å¼€å‘ä¸­ï¼ŒäºŒç»´ç å·²ç»æˆä¸ºä¸å¯æˆ–ç¼ºçš„åŠŸèƒ½ä¹‹ä¸€ã€‚æ— è®ºæ˜¯åˆ†äº«é“¾æ¥ã€æ”¯ä»˜åœºæ™¯è¿˜æ˜¯èº«ä»½éªŒè¯ï¼ŒäºŒç»´ç éƒ½æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚ä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“ â€”â€” <strong>vue3-next-qrcode</strong>ï¼Œå®ƒä¸ä»…æ”¯æŒåŸºç¡€çš„äºŒç»´ç ç”Ÿæˆï¼Œè¿˜æä¾›äº† LOGOã€GIF èƒŒæ™¯ã€SSR ç­‰é«˜çº§ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-2">é¡¹ç›®äº®ç‚¹</h3>
<h4 data-id="heading-3">ğŸ¯ æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>ğŸ„ğŸ¼â€â™‚ï¸ åŸºäº Vue 3 Composition API</strong>ï¼šå®Œå…¨æ‹¥æŠ± Vue 3 ç”Ÿæ€ï¼Œæ˜“äºä½¿ç”¨å’Œé›†æˆ</li>
<li><strong>ğŸ¯ TypeScript æ”¯æŒ</strong>ï¼šä½¿ç”¨ TypeScript æ„å»ºï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰</li>
<li><strong>ğŸš€ SSR æ”¯æŒ</strong>ï¼šå®Œç¾æ”¯æŒ Nuxt 3 å’Œ Nuxt 2 æœåŠ¡ç«¯æ¸²æŸ“</li>
<li><strong>ğŸ¨ Composable API</strong>ï¼šæä¾› <code>useQRCode</code> Hookï¼Œçµæ´»ç”ŸæˆäºŒç»´ç </li>
<li><strong>â™¿ æ— éšœç¢æ”¯æŒ</strong>ï¼šå†…ç½® ARIA æ ‡ç­¾å’Œé”®ç›˜å¯¼èˆª</li>
<li><strong>ğŸ­ GIF èƒŒæ™¯</strong>ï¼šæ”¯æŒåŠ¨æ€ GIF èƒŒæ™¯ï¼Œå¹¶è‡ªåŠ¨ç¼“å­˜ä¼˜åŒ–æ€§èƒ½</li>
<li><strong>ğŸ“¦ Tree-shaking</strong>ï¼šä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼ŒæŒ‰éœ€åŠ è½½</li>
<li><strong>ğŸ”„ è‡ªåŠ¨åˆ·æ–°</strong>ï¼šæ–‡æœ¬å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°ç”ŸæˆäºŒç»´ç </li>
<li><strong>ğŸ’¾ å†…ç½®ä¸‹è½½</strong>ï¼šä¸€é”®ä¸‹è½½ç”Ÿæˆçš„äºŒç»´ç </li>
</ul>
<h3 data-id="heading-4">å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-5">å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># npm</span>
npm install vue3-next-qrcode

<span class="hljs-comment"># yarn</span>
yarn add vue3-next-qrcode

<span class="hljs-comment"># pnpm</span>
pnpm add vue3-next-qrcode
</code></pre>
<h4 data-id="heading-6">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { Vue3NextQrcode } from 'vue3-next-qrcode'
import 'vue3-next-qrcode/es/style.css'
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode text="https://github.com/XiaoDaiGua-Ray/vue3-next-qrcode" /&gt;
&lt;/template&gt;
</code></pre>
<p>å°±è¿™ä¹ˆç®€å•ï¼ä¸€ä¸ªåŸºç¡€çš„äºŒç»´ç å°±ç”Ÿæˆäº†ã€‚</p>
<h3 data-id="heading-7">è¿›é˜¶åŠŸèƒ½</h3>
<h4 data-id="heading-8">1. è‡ªå®šä¹‰æ ·å¼</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="ä½ å¥½ä¸–ç•Œ"
    :size="300"
    :margin="20"
    colorDark="#000000"
    colorLight="#ffffff"
    :correctLevel="3"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-9">2. æ·»åŠ  Logo</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="https://example.com"
    logoImage="https://example.com/logo.png"
    :logoScale="0.3"
    :logoMargin="10"
    :logoCornerRadius="8"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-10">3. ä½¿ç”¨ GIF èƒŒæ™¯ï¼ˆäº®ç‚¹åŠŸèƒ½ï¼ï¼‰</h4>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸é…·çš„åŠŸèƒ½ï¼Œå¯ä»¥è®©ä½ çš„äºŒç»´ç åŠ¨èµ·æ¥ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="åŠ¨æ€äºŒç»´ç "
    :gifBackgroundURL="gifUrl"
    :dotScale="0.5"
    colorDark="#64d9d6"
  /&gt;
&lt;/template&gt;

&lt;script setup&gt;
const gifUrl = 'https://example.com/background.gif'
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-11">4. çŠ¶æ€ç®¡ç†</h4>
<p>æ”¯æŒåŠ è½½ä¸­ã€é”™è¯¯ç­‰çŠ¶æ€ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;!-- åŠ è½½çŠ¶æ€ --&gt;
    &lt;Vue3NextQrcode text="åŠ è½½ä¸­..." status="loading" /&gt;

    &lt;!-- é”™è¯¯çŠ¶æ€ --&gt;
    &lt;Vue3NextQrcode
      text="é”™è¯¯"
      status="error"
      errorDescription="äºŒç»´ç å·²è¿‡æœŸ"
      errorActionDescription="é‡æ–°åŠ è½½"
      :onReload="handleReload"
    /&gt;

    &lt;!-- è‡ªå®šä¹‰åŠ è½½æ’æ§½ --&gt;
    &lt;Vue3NextQrcode text="è‡ªå®šä¹‰åŠ è½½" status="loading"&gt;
      &lt;template #loading&gt;
        &lt;div class="custom-spinner"&gt;åŠ è½½ä¸­...&lt;/div&gt;
      &lt;/template&gt;
    &lt;/Vue3NextQrcode&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-12">5. ä¸‹è½½äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;Vue3NextQrcode ref="qrcodeRef" text="ä¸‹è½½æˆ‘ï¼" /&gt;
    &lt;button @click="handleDownload"&gt;ä¸‹è½½äºŒç»´ç &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref } from 'vue'

const qrcodeRef = ref()

const handleDownload = async () =&gt; {
  try {
    await qrcodeRef.value?.downloadQRCode('my-qrcode.png')
    console.log('ä¸‹è½½æˆåŠŸï¼')
  } catch (error) {
    console.error('ä¸‹è½½å¤±è´¥ï¼š', error)
  }
}
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13">ğŸ¨ Composable APIï¼ˆv4.0.0 æ–°ç‰¹æ€§ï¼‰</h3>
<p>v4.0.0 ç‰ˆæœ¬å¼•å…¥äº† <code>useQRCode</code> Composableï¼Œæä¾›äº†æ›´çµæ´»çš„ç¼–ç¨‹å¼äºŒç»´ç ç”Ÿæˆæ–¹å¼ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import { ref } from 'vue'
import { useQRCode } from 'vue3-next-qrcode'

const { qrcodeURL, isLoading, error, generate, clear } = useQRCode()

const text = ref('ä½ å¥½ä¸–ç•Œ')

const handleGenerate = async () =&gt; {
  await generate({
    text: text.value,
    size: 300,
    margin: 20,
    colorDark: '#000000',
    colorLight: '#ffffff',
  })
}
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;input v-model="text" placeholder="è¾“å…¥æ–‡æœ¬" /&gt;
    &lt;button @click="handleGenerate" :disabled="isLoading"&gt;
      {{ isLoading ? 'ç”Ÿæˆä¸­...' : 'ç”Ÿæˆ' }}
    &lt;/button&gt;
    &lt;button @click="clear"&gt;æ¸…é™¤&lt;/button&gt;

    &lt;div v-if="error" class="error"&gt;{{ error.message }}&lt;/div&gt;
    &lt;img v-if="qrcodeURL" :src="qrcodeURL" alt="äºŒç»´ç " /&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<p>è¿™ç§æ–¹å¼ç‰¹åˆ«é€‚åˆéœ€è¦åŠ¨æ€æ§åˆ¶äºŒç»´ç ç”Ÿæˆæ—¶æœºçš„åœºæ™¯ã€‚</p>
<h3 data-id="heading-14">ğŸŒ SSR æ”¯æŒï¼ˆNuxtï¼‰</h3>
<p>å¯¹äºä½¿ç”¨ Nuxt çš„å¼€å‘è€…ï¼Œvue3-next-qrcode æä¾›äº†å®Œå–„çš„ SSR æ”¯æŒæ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-15">æ–¹æ³• 1ï¼šä½¿ç”¨ ClientOnlyï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;ClientOnly&gt;
    &lt;QRCodeClient text="ä½ å¥½ Nuxt 3" /&gt;
    &lt;template #fallback&gt;
      &lt;div&gt;åŠ è½½äºŒç»´ç ä¸­...&lt;/div&gt;
    &lt;/template&gt;
  &lt;/ClientOnly&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { QRCodeClient } from 'vue3-next-qrcode'
import 'vue3-next-qrcode/es/style.css'
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-16">æ–¹æ³• 2ï¼šåŠ¨æ€å¯¼å…¥</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;LazyQRCode v-if="mounted" text="ä½ å¥½ Nuxt" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const LazyQRCode = defineAsyncComponent(() =&gt;
  import('vue3-next-qrcode').then((m) =&gt; m.Vue3NextQrcode),
)

const mounted = ref(false)

onMounted(() =&gt; {
  mounted.value = true
})
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-17">Nuxt é…ç½®</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">transpile</span>: [<span class="hljs-string">'vue3-next-qrcode'</span>],
  },

  <span class="hljs-attr">vite</span>: {
    <span class="hljs-attr">optimizeDeps</span>: {
      <span class="hljs-attr">include</span>: [<span class="hljs-string">'vue3-next-qrcode'</span>],
    },
  },
})
</code></pre>
<h3 data-id="heading-18">ğŸ¨ CSS å˜é‡è‡ªå®šä¹‰æ ·å¼</h3>
<p>æ”¯æŒé€šè¿‡ CSS å˜é‡è¿›è¡Œæ·±åº¦æ ·å¼å®šåˆ¶ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;Vue3NextQrcode
    text="æ ·å¼åŒ–äºŒç»´ç "
    :defineProvider="{
      '--r-qrcode-primary-color': '#1677ff',
      '--r-qrcode-primary-color-2': '#69b1ff',
      '--r-qrcode-spin-size': '4px',
    }"
  /&gt;
&lt;/template&gt;
</code></pre>
<p>å¯ç”¨çš„ CSS å˜é‡åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>--r-qrcode-width</code>ï¼šäºŒç»´ç å®½åº¦</li>
<li><code>--r-qrcode-height</code>ï¼šäºŒç»´ç é«˜åº¦</li>
<li><code>--r-qrcode-border-radius</code>ï¼šè¾¹æ¡†åœ†è§’</li>
<li><code>--r-qrcode-mask-color</code>ï¼šé®ç½©å±‚é¢œè‰²</li>
<li><code>--r-qrcode-primary-color</code>ï¼šä¸»é¢˜è‰²</li>
<li><code>--r-qrcode-primary-color-2</code>ï¼šæ¬¡è¦ä¸»é¢˜è‰²</li>
<li><code>--r-qrcode-spin-size</code>ï¼šåŠ è½½åŠ¨ç”»å¤§å°</li>
</ul>
<h3 data-id="heading-19">v4.0.0 é‡å¤§æ›´æ–°</h3>
<p>æœ€æ–°çš„ v4.0.0 ç‰ˆæœ¬å¸¦æ¥äº†è®¸å¤šé‡è¦æ”¹è¿›ï¼š</p>
<h4 data-id="heading-20">ç ´åæ€§å˜æ›´</h4>
<ul>
<li>CSS ç±»åå‰ç¼€ä» <code>ray-qrcode</code> ç»Ÿä¸€æ”¹ä¸º <code>r-qrcode</code></li>
<li><code>img_tag</code> å±æ€§æ”¹ä¸º <code>data-component</code></li>
</ul>
<h4 data-id="heading-21">æ–°å¢ç‰¹æ€§</h4>
<ol>
<li><strong>useQRCode Composable</strong>ï¼šæä¾›æ›´çµæ´»çš„äºŒç»´ç ç”Ÿæˆèƒ½åŠ›</li>
<li><strong>QRCodeClient ç»„ä»¶</strong>ï¼šä¸“ä¸º Nuxt SSR ç¯å¢ƒä¼˜åŒ–</li>
<li><strong>GIF èƒŒæ™¯ç¼“å­˜æœºåˆ¶</strong>ï¼šé¿å…é‡å¤åŠ è½½ç›¸åŒçš„ GIFï¼Œæå‡æ€§èƒ½</li>
<li><strong>å®Œæ•´çš„ ARIA æ— éšœç¢æ”¯æŒ</strong>ï¼šåŒ…æ‹¬ roleã€aria-labelã€é”®ç›˜å¯¼èˆª</li>
<li><strong>ä¼˜åŒ–çš„ TypeScript ç±»å‹å®šä¹‰</strong>ï¼šæä¾›æ›´å¥½çš„ç±»å‹æ¨å¯¼</li>
</ol>
<h4 data-id="heading-22">æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>ä½¿ç”¨ Composition API é‡æ„ç»„ä»¶å†…éƒ¨å®ç°</li>
<li>ä½¿ç”¨ <code>shallowRef</code> ä¼˜åŒ–å¤§å¯¹è±¡æ€§èƒ½</li>
<li>ä¼˜åŒ– watcher ç®¡ç†ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li>ä½¿ç”¨ <code>fetch</code> API æ›¿ä»£ <code>XMLHttpRequest</code>ï¼Œæ›´å¥½åœ°æ”¯æŒ SSR</li>
<li>æ·»åŠ é˜²æ­¢å¹¶å‘æ¸²æŸ“çš„é”æœºåˆ¶ï¼Œæå‡ç¨³å®šæ€§</li>
</ul>
<h4 data-id="heading-23">å¼€å‘ä½“éªŒ</h4>
<ul>
<li>æ·»åŠ  ESLint å’Œ Prettier é…ç½®</li>
<li>æ·»åŠ  GitHub Actions CI å·¥ä½œæµ</li>
<li>ä¼˜åŒ– <code>package.json</code> çš„ <code>exports</code> å­—æ®µ</li>
<li>æ·»åŠ  <code>sideEffects</code> é…ç½®ï¼Œä¼˜åŒ– tree-shaking</li>
</ul>
<h3 data-id="heading-24">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-25">1. åŠ¨æ€é“¾æ¥åˆ†äº«</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, computed } from 'vue'

const baseUrl = 'https://example.com/share'
const userId = ref('12345')
const shareUrl = computed(() =&gt; `${baseUrl}?user=${userId.value}`)
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode :text="shareUrl" :watchText="true" :size="200" /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-26">2. æ”¯ä»˜äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
const paymentInfo = ref({
  amount: 100,
  orderId: 'ORDER123',
})

const paymentUrl = computed(
  () =&gt;
    `payment://pay?amount=${paymentInfo.value.amount}&amp;order=${paymentInfo.value.orderId}`,
)

const handlePaymentSuccess = (dataURL) =&gt; {
  console.log('æ”¯ä»˜äºŒç»´ç ç”ŸæˆæˆåŠŸ')
  // å¯ä»¥å°† dataURL å‘é€åˆ°åç«¯ä¿å­˜
}
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode
    :text="paymentUrl"
    :size="300"
    logoImage="/logo.png"
    :logoScale="0.2"
    :onSuccess="handlePaymentSuccess"
  /&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-27">3. å¸¦çŠ¶æ€çš„äºŒç»´ç </h4>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const qrStatus = ref('loading')
const qrText = ref('')

onMounted(async () =&gt; {
  try {
    // æ¨¡æ‹Ÿä»åç«¯è·å–äºŒç»´ç å†…å®¹
    const response = await fetch('/api/qrcode')
    const data = await response.json()
    qrText.value = data.url
    qrStatus.value = undefined
  } catch (error) {
    qrStatus.value = 'error'
  }
})

const handleReload = async () =&gt; {
  qrStatus.value = 'loading'
  // é‡æ–°åŠ è½½é€»è¾‘
}
&lt;/script&gt;

&lt;template&gt;
  &lt;Vue3NextQrcode
    :text="qrText"
    :status="qrStatus"
    errorDescription="äºŒç»´ç åŠ è½½å¤±è´¥"
    :onReload="handleReload"
  /&gt;
&lt;/template&gt;
</code></pre>
<h3 data-id="heading-28">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li>
<p><strong>ä½¿ç”¨ watchText æ§åˆ¶æ›´æ–°</strong>ï¼šå¦‚æœäºŒç»´ç å†…å®¹ä¸éœ€è¦å®æ—¶æ›´æ–°ï¼Œå¯ä»¥è®¾ç½® <code>:watchText="false"</code> æ¥é¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“</p>
</li>
<li>
<p><strong>GIF èƒŒæ™¯ç¼“å­˜</strong>ï¼šv4.0.0 å·²ç»å†…ç½®äº† GIF ç¼“å­˜æœºåˆ¶ï¼Œç›¸åŒçš„ GIF URL åªä¼šåŠ è½½ä¸€æ¬¡</p>
</li>
<li>
<p><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåœ¨ Nuxt æˆ–å¤§å‹åº”ç”¨ä¸­ï¼Œä½¿ç”¨åŠ¨æ€å¯¼å…¥æ¥å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯</p>
</li>
<li>
<p><strong>åˆç†è®¾ç½®å°ºå¯¸</strong>ï¼šæ ¹æ®å®é™…éœ€æ±‚è®¾ç½®åˆé€‚çš„äºŒç»´ç å°ºå¯¸ï¼Œé¿å…ç”Ÿæˆè¿‡å¤§çš„å›¾ç‰‡</p>
</li>
</ol>
<h3 data-id="heading-29">æ€»ç»“</h3>
<p>vue3-next-qrcode æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„ã€æ€§èƒ½ä¼˜ç§€çš„ Vue 3 äºŒç»´ç ç»„ä»¶åº“ã€‚æ— è®ºæ˜¯ç®€å•çš„äºŒç»´ç ç”Ÿæˆï¼Œè¿˜æ˜¯å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¸¦ Logoã€GIF èƒŒæ™¯ã€çŠ¶æ€ç®¡ç†ç­‰ï¼‰ï¼Œå®ƒéƒ½èƒ½è½»æ¾åº”å¯¹ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ v4.0.0 ç‰ˆæœ¬å¸¦æ¥çš„ Composable API å’Œ SSR ä¼˜åŒ–ï¼Œè®©å®ƒåœ¨ç°ä»£ Vue 3 åº”ç”¨ä¸­æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªå¼ºå¤§çš„ Vue 3 äºŒç»´ç è§£å†³æ–¹æ¡ˆï¼Œä¸å¦¨è¯•è¯• vue3-next-qrcodeï¼</p>
<h3 data-id="heading-30">ç›¸å…³é“¾æ¥</h3>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FXiaoDaiGua-Ray%2Fvue3-next-qrcode" target="_blank" title="https://github.com/XiaoDaiGua-Ray/vue3-next-qrcode" ref="nofollow noopener noreferrer">github.com/XiaoDaiGua-â€¦</a></li>
<li>NPMï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fvue3-next-qrcode" target="_blank" title="https://www.npmjs.com/package/vue3-next-qrcode" ref="nofollow noopener noreferrer">www.npmjs.com/package/vueâ€¦</a></li>
<li>åœ¨çº¿ç¤ºä¾‹ï¼šæŸ¥çœ‹é¡¹ç›® README ä¸­çš„ç¤ºä¾‹å›¾ç‰‡</li>
</ul>
<hr/>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è—ï¼å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œä¹Ÿæ¬¢è¿åœ¨ GitHub æ Issue æˆ– PRã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆTree Shaking]]></title>    <link>https://juejin.cn/post/7575103881421930550</link>    <guid>https://juejin.cn/post/7575103881421930550</guid>    <pubDate>2025-11-22T13:50:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881421930550" data-draft-id="7575320672570720298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆTree Shaking"/> <meta itemprop="keywords" content="å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-11-22T13:50:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WaterFly"/> <meta itemprop="url" content="https://juejin.cn/user/1204720474535063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆTree Shaking
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1204720474535063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WaterFly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:50:53.000Z" title="Sat Nov 22 2025 13:50:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Tree Shaking åŸºç¡€çŸ¥è¯†</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Tree Shakingï¼Ÿ</h3>
<p><strong>Tree Shaking</strong>ï¼ˆæ‘‡æ ‘ä¼˜åŒ–ï¼‰æ˜¯ä¸€ç§é€šè¿‡<strong>é™æ€åˆ†æ</strong>æ¶ˆé™¤ JavaScript ä¸­æœªä½¿ç”¨ä»£ç ï¼ˆDead Codeï¼‰çš„ä¼˜åŒ–æŠ€æœ¯ã€‚</p>
<p><strong>å½¢è±¡æ¯”å–»ï¼š</strong></p>
<pre><code class="hljs">æƒ³è±¡ä¸€æ£µæ ‘ï¼ˆä»£ç åº“ï¼‰ï¼š
ğŸŒ³ æ•´æ£µæ ‘ = å®Œæ•´çš„ä»£ç åº“
ğŸ‚ æ¯å¶ = æœªä½¿ç”¨çš„ä»£ç 
ğŸ¤ æ‘‡æ ‘ = æ„å»ºå·¥å…·åˆ†æ
âœ¨ ç»“æœ = åªä¿ç•™éœ€è¦çš„ä»£ç 
</code></pre>
<hr/>
<h3 data-id="heading-2">å·¥ä½œåŸç†</h3>
<h4 data-id="heading-3">1. é™æ€åˆ†æï¼ˆç¼–è¯‘æ—¶ï¼‰</h4>
<p>Tree Shaking ä¾èµ–äº <strong>ES Module (ESM)</strong> çš„é™æ€ç»“æ„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âœ… ESM - æ”¯æŒ Tree Shakingï¼ˆé™æ€å¯¼å…¥ï¼‰</span>
<span class="hljs-keyword">import</span> { funcA } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// ç¼–è¯‘æ—¶ç¡®å®š</span>

<span class="hljs-comment">// âŒ CommonJS - ä¸æ”¯æŒ Tree Shakingï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</span>
<span class="hljs-keyword">const</span> { funcA } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./utils'</span>);  <span class="hljs-comment">// è¿è¡Œæ—¶ç¡®å®š</span>
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>ESM</th><th>CommonJS</th></tr></thead><tbody><tr><td><strong>å¯¼å…¥æ—¶æœº</strong></td><td>ç¼–è¯‘æ—¶ï¼ˆé™æ€ï¼‰</td><td>è¿è¡Œæ—¶ï¼ˆåŠ¨æ€ï¼‰</td></tr><tr><td><strong>ç»“æ„åˆ†æ</strong></td><td>âœ… å¯åˆ†æ</td><td>âŒ ä¸å¯åˆ†æ</td></tr><tr><td><strong>Tree Shaking</strong></td><td>âœ… æ”¯æŒ</td><td>âŒ ä¸æ”¯æŒ</td></tr><tr><td><strong>è¯­æ³•</strong></td><td><code>import/export</code></td><td><code>require/module.exports</code></td></tr></tbody></table>
<hr/>
<h4 data-id="heading-4">2. ä¾èµ–å›¾åˆ†æ</h4>
<p><strong>æ„å»ºå·¥å…·å¦‚ä½•å·¥ä½œï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }      <span class="hljs-comment">// è¢«ä½¿ç”¨ âœ…</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; } <span class="hljs-comment">// æœªä½¿ç”¨ âŒ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a * b; } <span class="hljs-comment">// æœªä½¿ç”¨ âŒ</span>

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// åªå¯¼å…¥ add</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<p><strong>åˆ†æè¿‡ç¨‹ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-number">1.</span> å…¥å£åˆ†æï¼šmain.js å¯¼å…¥äº†ä»€ä¹ˆï¼Ÿ
   â†’ { <span class="hljs-keyword">add</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>

<span class="hljs-number">2.</span> ä¾èµ–è¿½è¸ªï¼š<span class="hljs-keyword">add</span> å‡½æ•°ä¾èµ–ä»€ä¹ˆï¼Ÿ
   â†’ æ— å…¶ä»–ä¾èµ–

<span class="hljs-number">3.</span> æ ‡è®°æ¸…é™¤ï¼š
   âœ… <span class="hljs-keyword">add</span>       â†’ ä¿ç•™ï¼ˆè¢«ä½¿ç”¨ï¼‰
   âŒ subtract  â†’ åˆ é™¤ï¼ˆæœªä½¿ç”¨ï¼‰
   âŒ multiply  â†’ åˆ é™¤ï¼ˆæœªä½¿ç”¨ï¼‰

<span class="hljs-number">4.</span> æœ€ç»ˆäº§ç‰©ï¼š
   åªåŒ…å« <span class="hljs-keyword">add</span> å‡½æ•°
</code></pre>
<hr/>
<h4 data-id="heading-5">3. å‰¯ä½œç”¨ï¼ˆSide Effectsï¼‰å¤„ç†</h4>
<p><strong>ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ</strong></p>
<p>å‰¯ä½œç”¨æ˜¯æŒ‡<strong>é™¤äº†è¿”å›å€¼ä¹‹å¤–ï¼Œè¿˜ä¼šå½±å“å¤–éƒ¨çŠ¶æ€çš„æ“ä½œ</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ æœ‰å‰¯ä½œç”¨çš„ä»£ç </span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;           <span class="hljs-comment">// ä¿®æ”¹å…¨å±€å¯¹è±¡</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;         <span class="hljs-comment">// æ³¨å…¥æ ·å¼</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Module loaded'</span>);  <span class="hljs-comment">// æ§åˆ¶å°è¾“å‡º</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">myGlobal</span> = <span class="hljs-number">123</span>;         <span class="hljs-comment">// ä¿®æ”¹ window</span>

<span class="hljs-comment">// âœ… æ— å‰¯ä½œç”¨çš„ä»£ç ï¼ˆçº¯å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b;  <span class="hljs-comment">// åªè¿”å›å€¼ï¼Œä¸å½±å“å¤–éƒ¨</span>
}
</code></pre>
<p>å¸¸è§çš„å‰¯ä½œç”¨ï¼š</p>
<ul>
<li>ä¿®æ”¹å…¨å±€å˜é‡æˆ–å¯¹è±¡</li>
<li>ä¿®æ”¹å‡½æ•°å‚æ•°</li>
<li>å‘èµ·ç½‘ç»œè¯·æ±‚</li>
<li>DOM æ“ä½œ</li>
<li>åŸå‹é“¾ä¿®æ”¹</li>
<li>å¯¼å…¥ CSS æ–‡ä»¶</li>
<li><strong>æ‰§è¡Œ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</strong></li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿®æ”¹å…¨å±€å˜é‡æˆ–å¯¹è±¡</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">myGlobalVar</span> = <span class="hljs-string">'value'</span>;
<span class="hljs-variable language_">global</span>.<span class="hljs-property">config</span> = { <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span> };

<span class="hljs-comment">// ä¿®æ”¹å‡½æ•°å‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addProperty</span>(<span class="hljs-params">obj</span>) {
  obj.<span class="hljs-property">newProp</span> = <span class="hljs-string">'value'</span>;
}

<span class="hljs-comment">// å‘èµ·ç½‘ç»œè¯·æ±‚</span>
<span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/data'</span>);

<span class="hljs-comment">// DOM æ“ä½œ</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'loaded'</span>);

<span class="hljs-comment">// åŸå‹é“¾ä¿®æ”¹</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myMethod</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {};

<span class="hljs-comment">// å¯¼å…¥ CSS æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;

<span class="hljs-comment">// æ‰§è¡Œ IIFEï¼ˆç«‹å³æ‰§è¡Œå‡½æ•°ï¼‰</span>
(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆå§‹åŒ–'</span>);
})();
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ ‡è®°å‰¯ä½œç”¨ï¼Ÿ</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>  <span class="hljs-comment">// å‘Šè¯‰æ‰“åŒ…å·¥å…·ï¼š"æ‰€æœ‰ä»£ç éƒ½æ— å‰¯ä½œç”¨"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }

<span class="hljs-comment">// polyfill.js</span>
<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">includes</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { ... };  <span class="hljs-comment">// æœ‰å‰¯ä½œç”¨ï¼</span>

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// ä½¿ç”¨ utils</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;            <span class="hljs-comment">// ä¸ä½¿ç”¨ï¼Œä½†æœ‰å‰¯ä½œç”¨</span>

<span class="hljs-comment">// âŒ å¦‚æœ sideEffects: false</span>
<span class="hljs-comment">// â†’ polyfill.js è¢«åˆ é™¤ï¼ˆè®¤ä¸ºæ— å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-comment">// â†’ å¯¼è‡´è¿è¡Œæ—¶é”™è¯¯ï¼</span>

<span class="hljs-comment">// âœ… å¦‚æœ sideEffects: ["**/polyfill.js"]</span>
<span class="hljs-comment">// â†’ polyfill.js è¢«ä¿ç•™ï¼ˆæ ‡è®°ä¸ºæœ‰å‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-comment">// â†’ è¿è¡Œæ­£å¸¸</span>
</code></pre>
<hr/>
<p>å‰¯ä½œç”¨ä»£ç ä¸sideEffectsé…ç½®çš„å…³ç³»</p>
<ul>
<li>
<p>å‰¯ä½œç”¨ä»£ç ï¼Œè¿™æ˜¯å®¢è§‚äº‹å®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€æ®µä»£ç æ˜¯å¦æ˜¯å‰¯ä½œç”¨ä»£ç ï¼Œå·²ç»æ˜¯ç¡®å®šçš„ã€‚</p>
</li>
<li>
<p><code>package.json sideEffectsï¼Œ</code>æ–‡ä»¶çº§åˆ«é…ç½®ï¼Œç”¨æ¥äººä¸ºå£°æ˜æ–‡ä»¶æ˜¯å¦â€œå¯èƒ½æœ‰å‰¯ä½œç”¨â€ï¼Œä»è€Œå†³å®šæœªå¼•ç”¨çš„æ–‡ä»¶èƒ½å¦è¢«æ•´ä½“åˆ é™¤ã€‚</p>
<ul>
<li>é»˜è®¤ä¸º<code>true</code>ï¼Œåˆ™ç¼–è¯‘å™¨ä¸æ•¢å‡è®¾æ–‡ä»¶æ— å‰¯ä½œç”¨ï¼Œæ‰€ä»¥ä¸ä¼šåˆ é™¤æœªå¼•ç”¨çš„æ–‡ä»¶ã€‚å±äºä¿å®ˆç­–ç•¥ã€‚</li>
<li>å¦‚æœé…ç½®ä¸º<code>false</code>ï¼Œåˆ™ç¼–è¯‘å™¨ä¼šæŠŠæ‰€æœ‰æ–‡ä»¶éƒ½è§†ä¸ºæ— å‰¯ä½œç”¨æ–‡ä»¶ï¼Œåªè¦æ–‡ä»¶æ²¡æœ‰è¢«importï¼Œå°±å¯ä»¥è¢«æ•´ä¸ªåˆ é™¤ã€‚å±äºæ¿€è¿›ç­–ç•¥</li>
<li>å¦‚æœé…ç½®ä¸ºæ–‡ä»¶æ•°ç»„ï¼Œåˆ™é…ç½®çš„æ–‡ä»¶ä¼šè®¤ä¸ºæœ‰å‰¯ä½œç”¨ï¼Œå³ä½¿æ–‡ä»¶æ²¡è¢«å¼•ç”¨ä¹Ÿä¼šè¢«ä¿ç•™å’Œæ‰“åŒ…ï¼›å…¶ä»–æ–‡ä»¶è®¤ä¸ºæ²¡æœ‰å‰¯ä½œç”¨ä»£ç ï¼Œå¦‚æœæ–‡ä»¶æ²¡è¢«å¼•ç”¨åˆ™ç¼–è¯‘ä¼šè¢«ç§»é™¤ä¸ä¼šè¢«æ‰“åŒ…ã€‚æ¯”å¦‚åœ¨åº“ä¸­ï¼Œä¸€èˆ¬CSSæ–‡ä»¶å’Œpolyfillæ–‡ä»¶å°±è¦è¢«åŒ…å«åœ¨å†…ï¼Œæ¯”å¦‚ï¼š<code>["*.css", "src/polyfill.js"]</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">Tree Shaking çš„å‰ææ¡ä»¶</h3>
<h4 data-id="heading-7">âœ… å¿…é¡»æ»¡è¶³çš„æ¡ä»¶</h4>
<ol>
<li><strong>ä½¿ç”¨ ESM æ¨¡å—æ ¼å¼</strong></li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist/esm/index.js"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="2">
<li>
<p><strong>æ„å»ºå·¥å…·æ”¯æŒ</strong></p>
<ul>
<li>Webpack 4+</li>
<li>Rollupï¼ˆåŸç”Ÿæ”¯æŒï¼‰</li>
<li>Viteï¼ˆåŸºäº Rollupï¼‰</li>
<li>esbuild</li>
</ul>
</li>
<li>
<p><strong>æ­£ç¡®é…ç½® sideEffects</strong></p>
</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>           <span class="hljs-comment">// æ— å‰¯ä½œç”¨</span>
  <span class="hljs-comment">// æˆ–</span>
  <span class="hljs-attr">"sideEffects"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"**/*.css"</span><span class="hljs-punctuation">]</span>     <span class="hljs-comment">// åªæœ‰ CSS æœ‰å‰¯ä½œç”¨</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ol start="4">
<li><strong>é¿å…åŠ¨æ€å¯¼å…¥ï¼ˆåœ¨éœ€è¦ Tree Shaking çš„åœ°æ–¹ï¼‰</strong></li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ åŠ¨æ€å¯¼å…¥ - æ— æ³• Tree Shaking</span>
<span class="hljs-keyword">const</span> moduleName = <span class="hljs-string">'utils'</span>;
<span class="hljs-keyword">import</span>(<span class="hljs-string">`./<span class="hljs-subst">${moduleName}</span>`</span>);

<span class="hljs-comment">// âœ… é™æ€å¯¼å…¥ - å¯ä»¥ Tree Shaking</span>
<span class="hljs-keyword">import</span> { func } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
</code></pre>
<hr/>
<h3 data-id="heading-8">å¸¸è§é˜»ç¢ Tree Shaking çš„æƒ…å†µ</h3>
<h4 data-id="heading-9">1. ä½¿ç”¨ CommonJS</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸æ”¯æŒ Tree Shaking</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
  <span class="hljs-attr">subtract</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b,
};

<span class="hljs-comment">// âœ… æ”¯æŒ Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">subtract</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b;
</code></pre>
<hr/>
<h4 data-id="heading-10">2. é»˜è®¤å¯¼å‡ºæ•´ä¸ªå¯¹è±¡</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ éš¾ä»¥ Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b,
  <span class="hljs-attr">subtract</span>: <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b,
};

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> utils <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
utils.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ•´ä¸ªå¯¹è±¡éƒ½è¢«å¯¼å…¥</span>

<span class="hljs-comment">// âœ… æ˜“äº Tree Shaking</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params">a, b</span>) =&gt; a + b;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">subtract</span> = (<span class="hljs-params">a, b</span>) =&gt; a - b;

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { add } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;  <span class="hljs-comment">// åªå¯¼å…¥éœ€è¦çš„</span>
</code></pre>
<hr/>
<h4 data-id="heading-11">3. å‰¯ä½œç”¨æœªæ­£ç¡®æ ‡è®°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// styles.css</span>
.<span class="hljs-property">button</span> { <span class="hljs-attr">color</span>: red; }

<span class="hljs-comment">// Component.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>;  <span class="hljs-comment">// å‰¯ä½œç”¨ï¼šæ³¨å…¥æ ·å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Component</span>(<span class="hljs-params"/>) { ... }

<span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"sideEffects"</span>: <span class="hljs-literal">false</span>  <span class="hljs-comment">// âŒ é”™è¯¯ï¼CSS ä¼šè¢«åˆ é™¤</span>
}

<span class="hljs-comment">// âœ… æ­£ç¡®é…ç½®</span>
{
  <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/*.css"</span>]  <span class="hljs-comment">// CSS ä¸ä¼šè¢«åˆ é™¤</span>
}
</code></pre>
<hr/>
<h4 data-id="heading-12">4. ç±»å’Œæ„é€ å‡½æ•°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ç±»çš„æ–¹æ³•å¯èƒ½æ— æ³• Tree Shaking</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Utils</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
  <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
}

<span class="hljs-comment">// ç”¨æˆ·ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Utils</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils'</span>;
<span class="hljs-keyword">const</span> u = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Utils</span>();
u.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);  <span class="hljs-comment">// æ•´ä¸ªç±»éƒ½è¢«å¯¼å…¥</span>

<span class="hljs-comment">// âœ… æ›´å¥½çš„æ–¹å¼ï¼ˆçº¯å‡½æ•°ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
</code></pre>
<hr/>
<h3 data-id="heading-13">Tree Shaking å®æˆ˜ç¤ºä¾‹</h3>
<h4 data-id="heading-14">ç¤ºä¾‹ 1ï¼šåŸºç¡€ Tree Shaking</h4>
<p><strong>åº“ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// math-lib/index.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">subtract</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a - b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a * b; }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a / b; }
</code></pre>
<p><strong>ç”¨æˆ·ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// app.js</span>
import { <span class="hljs-keyword">add</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'math-lib'</span>;

console.log(<span class="hljs-keyword">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
</code></pre>
<p><strong>æ‰“åŒ…ç»“æœï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// bundle.jsï¼ˆç®€åŒ–ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) { <span class="hljs-keyword">return</span> a + b; }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));

<span class="hljs-comment">// âœ… subtractã€multiplyã€divide è¢«åˆ é™¤</span>
</code></pre>
<hr/>
<h4 data-id="heading-15">ç¤ºä¾‹ 2ï¼šç»„ä»¶åº“ Tree Shaking</h4>
<p><strong>åº“ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ui-lib/index.js</span>
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Input'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Select</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Select'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-title class_">Modal</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Modal'</span>;

<span class="hljs-comment">// ui-lib/Button.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./Button.css'</span>;  <span class="hljs-comment">// å‰¯ä½œç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) { ... }

<span class="hljs-comment">// package.json</span>
{
  <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/*.css"</span>]  <span class="hljs-comment">// ä¿æŠ¤ CSS</span>
}
</code></pre>
<p><strong>ç”¨æˆ·ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// app.js</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ui-lib'</span>;

<span class="hljs-title class_">Button</span>();
</code></pre>
<p><strong>æ‰“åŒ…ç»“æœï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// bundle.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./Button.css'</span>;  <span class="hljs-comment">// âœ… CSS è¢«ä¿ç•™ï¼ˆæ ‡è®°ä¸ºå‰¯ä½œç”¨ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) { ... }
<span class="hljs-title class_">Button</span>();

<span class="hljs-comment">// âœ… Inputã€Selectã€Modal åŠå…¶ CSS éƒ½è¢«åˆ é™¤</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">Tree Shaking æ•ˆæœéªŒè¯</h3>
<h4 data-id="heading-17">æ–¹æ³• 1ï¼šåˆ†ææ‰“åŒ…ç»“æœ</h4>
<pre><code class="hljs language-r" lang="r"><span class="hljs-comment"># Webpack</span>
npm run build <span class="hljs-operator">-</span><span class="hljs-operator">-</span> <span class="hljs-operator">-</span><span class="hljs-operator">-</span>analyze

<span class="hljs-comment"># Rollup</span>
rollup <span class="hljs-operator">-</span><span class="hljs-built_in">c</span> <span class="hljs-operator">-</span><span class="hljs-operator">-</span>plugin visualizer

<span class="hljs-comment"># Vite</span>
vite build <span class="hljs-operator">-</span><span class="hljs-operator">-</span>mode production
<span class="hljs-comment"># æŸ¥çœ‹ dist/stats.html</span>
</code></pre>
<hr/>
<h4 data-id="heading-18">æ–¹æ³• 2ï¼šæ‰‹åŠ¨æ£€æŸ¥</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// 1. æ„å»ºç”Ÿäº§ç‰ˆæœ¬</span>
npm run build

<span class="hljs-comment">// 2. æœç´¢æœªä½¿ç”¨çš„ä»£ç </span>
grep -r <span class="hljs-string">"unusedFunction"</span> dist/

<span class="hljs-comment">// 3. å¦‚æœæ‰¾åˆ° â†’ Tree Shaking å¤±è´¥</span>
<span class="hljs-comment">// å¦‚æœæœªæ‰¾åˆ° â†’ Tree Shaking æˆåŠŸ</span>
</code></pre>
<hr/>
<h4 data-id="heading-19">æ–¹æ³• 3ï¼šå¯¹æ¯”ä½“ç§¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æµ‹è¯• 1ï¼šå¼•å…¥æ‰€æœ‰</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">All</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
<span class="hljs-comment">// æ‰“åŒ…ä½“ç§¯ï¼š100 KB</span>

<span class="hljs-comment">// æµ‹è¯• 2ï¼šåªå¼•å…¥ä¸€ä¸ª</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
<span class="hljs-comment">// æ‰“åŒ…ä½“ç§¯ï¼š20 KB</span>

<span class="hljs-comment">// âœ… Tree Shaking æœ‰æ•ˆï¼šå‡å°‘ 80%</span>
</code></pre>
<hr/>
<h3 data-id="heading-20">ä¸ºåº“å¼€å‘è€…çš„ Tree Shaking æ£€æŸ¥æ¸…å•</h3>
<h4 data-id="heading-21">âœ… æ„å»ºé…ç½®</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ ESM è¾“å‡ºæ ¼å¼ï¼ˆ<code>format: 'es'</code>ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é…ç½® <code>preserveModules: true</code>ï¼ˆä¿ç•™æ¨¡å—ç»“æ„ï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è®¾ç½® <code>package.json</code> çš„ <code>module</code> å­—æ®µ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> è®¾ç½® <code>package.json</code> çš„ <code>sideEffects</code> å­—æ®µ</li>
</ul>
<h4 data-id="heading-22">âœ… ä»£ç è§„èŒƒ</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä½¿ç”¨ <code>export</code> è€Œé <code>export default {}</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é¿å…åœ¨æ¨¡å—é¡¶å±‚æ‰§è¡Œå‰¯ä½œç”¨ä»£ç </li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> çº¯å‡½æ•°ä¼˜äºç±»ï¼ˆå‡½æ•°æ›´å®¹æ˜“ Tree Shakingï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å°† CSS å¯¼å…¥æ ‡è®°ä¸ºå‰¯ä½œç”¨</li>
</ul>
<h4 data-id="heading-23">âœ… æ–‡æ¡£è¯´æ˜</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨ README ä¸­è¯´æ˜æ”¯æŒ Tree Shaking</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æä¾›æŒ‰éœ€å¼•å…¥çš„ç¤ºä¾‹</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ ‡æ³¨å“ªäº›æ–‡ä»¶æœ‰å‰¯ä½œç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-24">å¸¸è§è¯¯åŒº</h3>
<h4 data-id="heading-25">âŒ è¯¯åŒº 1ï¼š"å‹ç¼© = Tree Shaking"</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‹ç¼©ï¼ˆMinifyï¼‰ï¼šç¼©çŸ­å˜é‡åã€åˆ é™¤ç©ºæ ¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a,b</span>){<span class="hljs-keyword">return</span> a+b}

<span class="hljs-comment">// Tree Shakingï¼šåˆ é™¤æœªä½¿ç”¨çš„ä»£ç </span>
<span class="hljs-comment">// å¦‚æœ add æ²¡è¢«ç”¨ï¼Œæ•´ä¸ªå‡½æ•°è¢«åˆ é™¤</span>

<span class="hljs-comment">// ä¸¤è€…ä¸åŒï¼</span>
</code></pre>
<hr/>
<h4 data-id="heading-26">âŒ è¯¯åŒº 2ï¼š"webpack è‡ªåŠ¨ Tree Shaking"</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸ä¼šè‡ªåŠ¨ Tree Shakingï¼ˆCommonJSï¼‰</span>
<span class="hljs-keyword">const</span> lib = <span class="hljs-built_in">require</span>(<span class="hljs-string">'my-lib'</span>);

<span class="hljs-comment">// âœ… æ‰èƒ½ Tree Shakingï¼ˆESMï¼‰</span>
<span class="hljs-keyword">import</span> { func } <span class="hljs-keyword">from</span> <span class="hljs-string">'my-lib'</span>;
</code></pre>
<hr/>
<h4 data-id="heading-27">âŒ è¯¯åŒº 3ï¼š"è®¾ç½® sideEffects: false å°±å¤Ÿäº†"</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// package.json</span>
{ <span class="hljs-string">"sideEffects"</span>: <span class="hljs-literal">false</span> }

<span class="hljs-comment">// âŒ ä½†ä»£ç ä¸­æœ‰å‰¯ä½œç”¨</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./polyfill'</span>;  <span class="hljs-comment">// ä¼šè¢«åˆ é™¤ï¼</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./styles.css'</span>; <span class="hljs-comment">// ä¼šè¢«åˆ é™¤ï¼</span>

<span class="hljs-comment">// âœ… æ­£ç¡®é…ç½®</span>
{ <span class="hljs-string">"sideEffects"</span>: [<span class="hljs-string">"**/polyfill.js"</span>, <span class="hljs-string">"**/*.css"</span>] }
</code></pre>
<hr/>
<h3 data-id="heading-28">å°ç»“</h3>
<p><strong>Tree Shaking æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>åŸºäº ESM</strong> çš„é™æ€åˆ†æ</li>
<li><strong>ç¼–è¯‘æ—¶</strong> ç¡®å®šä¾èµ–å…³ç³»</li>
<li><strong>åˆ é™¤</strong> æœªä½¿ç”¨çš„ä»£ç </li>
<li><strong>ä¿ç•™</strong> æœ‰å‰¯ä½œç”¨çš„ä»£ç </li>
<li><strong>éœ€è¦</strong> æ„å»ºå·¥å…·ã€æ¨¡å—æ ¼å¼ã€é…ç½®ä¸‰è€…é…åˆ</li>
</ol>
<p><strong>è®°å¿†å£è¯€ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">ESM æ˜¯å‰æï¼ˆ<span class="hljs-keyword">import</span>/<span class="hljs-keyword">export</span>ï¼‰
é™æ€åˆ†æä¸ºåŸºç¡€ï¼ˆç¼–è¯‘æ—¶ç¡®å®šï¼‰
æ ‡è®°å‰¯ä½œç”¨è¦æ¸…æ¥šï¼ˆsideEffectsï¼‰
ä¿ç•™ç»“æ„æ‰æœ‰æ•ˆï¼ˆpreserveModulesï¼‰
</code></pre>
<hr/>
<h3 data-id="heading-29">é™„å½•</h3>
<ul>
<li>Webpack-Tree Shakingï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.docschina.org%2Fguides%2Ftree-shaking%2F" target="_blank" title="https://webpack.docschina.org/guides/tree-shaking/" ref="nofollow noopener noreferrer">CN</a> / <a href="https://link.juejin.cn?target=https%3A%2F%2Fwebpack.js.org%2Fguides%2Ftree-shaking%2F" target="_blank" title="https://webpack.js.org/guides/tree-shaking/" ref="nofollow noopener noreferrer">EN</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Frollupjs.org%2Ffaqs%2F%23what-is-tree-shaking" target="_blank" title="https://rollupjs.org/faqs/#what-is-tree-shaking" ref="nofollow noopener noreferrer">Rollup tree-shaking</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freeli.github.io%2Fblog%2Fbuild_webpack-tree-shaking.html%23%25E4%25B8%25BA%25E4%25BB%2580%25E4%25B9%2588%25E9%259C%2580%25E8%25A6%2581-tree-shaking" target="_blank" title="https://reeli.github.io/blog/build_webpack-tree-shaking.html#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-tree-shaking" ref="nofollow noopener noreferrer">èŠèŠ Webpack Tree shaking - æ©˜å­çš„å‰ç«¯æ‚è®°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F32554436" target="_blank" title="https://zhuanlan.zhihu.com/p/32554436" ref="nofollow noopener noreferrer">Tree-Shakingæ€§èƒ½ä¼˜åŒ–å®è·µ - åŸç†ç¯‡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fkettanaito.com%2Fblog%2Fbuilding-a-treeshakable-library-with-rollup" target="_blank" title="https://kettanaito.com/blog/building-a-treeshakable-library-with-rollup" ref="nofollow noopener noreferrer">Building a Tree-shakable Library with Rollup - Rollupä½œè€…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fbluepnume.medium.com%2Fjavascript-tree-shaking-like-a-pro-7bf96e139eb7" target="_blank" title="https://bluepnume.medium.com/javascript-tree-shaking-like-a-pro-7bf96e139eb7" ref="nofollow noopener noreferrer">JavaScript tree shaking, like a pro</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FGlossary%2FTree_shaking" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Glossary/Tree_shaking" ref="nofollow noopener noreferrer">MDN-æ‘‡æ ‘ä¼˜åŒ–</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•]]></title>    <link>https://juejin.cn/post/7575102474639245363</link>    <guid>https://juejin.cn/post/7575102474639245363</guid>    <pubDate>2025-11-22T14:09:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575102474639245363" data-draft-id="7575065042158977074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:09:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yanni4Night"/> <meta itemprop="url" content="https://juejin.cn/user/4089838983724520"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŒæ¡ JS ä¸­è¿­ä»£å™¨çš„æœªæ¥ç”¨æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4089838983724520/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yanni4Night
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:09:42.000Z" title="Sat Nov 22 2025 14:09:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸¤ä¸ªææ¡ˆ</h2>
<p>åœ¨ ECMAScript ä¸­æœ‰ä¸¤ä¸ªé‡è¦çš„è¿­ä»£å™¨ç›¸å…³ææ¡ˆï¼Œå®ƒä»¬æä¾›ä¸åŒçš„åŠŸèƒ½ï¼š</p>
<ol>
<li><strong>Iterator Helpers</strong> ææ¡ˆä¸º <strong>Iterator.prototype</strong> æ·»åŠ çš„åŸå‹æ–¹æ³•ï¼ˆå¦‚ <strong>map</strong>ã€<strong>filter</strong> ç­‰ï¼‰ï¼Œå…è®¸ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ“ä½œæ–¹æ³•</li>
<li><strong>Iterator Sequencing</strong>ï¼šæä¾› <strong>Iterator</strong> å¯¹è±¡ä¸Šçš„é™æ€æ–¹æ³•ï¼ˆå¦‚ <strong>Iterator.concat</strong>ï¼‰ï¼Œç”¨äºåˆ›å»ºå’Œæ“ä½œè¿­ä»£åºåˆ—</li>
</ol>
<p>æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»è¿™ä¸¤ä¸ªææ¡ˆçš„æ ¸å¿ƒåŠŸèƒ½å’Œç”¨æ³•ã€‚</p>
<h2 data-id="heading-1">1. Iterator Helpersï¼ˆåŸå‹æ–¹æ³•ï¼‰</h2>
<p>Iterator Helpers ææ¡ˆä¸º Iterator.prototype æ·»åŠ äº†ä¸€ç³»åˆ—ç±»ä¼¼äºæ•°ç»„çš„æ–¹æ³•ï¼Œè®©å¼€å‘è€…å¯ä»¥ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ“ä½œæ–¹æ³•ã€‚</p>
<h3 data-id="heading-2">1.1 ä¸ºä»€ä¹ˆéœ€è¦ Iterator Helpersï¼Ÿ</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„æ¦‚å¿µï¼Œå®ƒè®©æˆ‘ä»¬èƒ½å¤Ÿéå†å„ç§æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ï¼Œåœ¨ <strong>Iterator Helpers</strong> ææ¡ˆä¹‹å‰ï¼Œå¦‚æœä½ æƒ³å¯¹è¿­ä»£å™¨è¿›è¡Œä¸€äº›å¸¸è§æ“ä½œï¼ˆæ¯”å¦‚æ˜ å°„ã€è¿‡æ»¤ç­‰ï¼‰ï¼Œé€šå¸¸éœ€è¦å…ˆå°†å…¶è½¬æ¢ä¸ºæ•°ç»„ï¼Œè¿™åœ¨å¤„ç†å¤§æ•°æ®é›†æ—¶å¯èƒ½ä¼šé€ æˆå†…å­˜æµªè´¹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä»¥å‰ä½ å¯èƒ½éœ€è¦è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">generateValues</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">4</span>;
  <span class="hljs-keyword">yield</span> <span class="hljs-number">5</span>;
}

<span class="hljs-keyword">const</span> iterator = <span class="hljs-title function_">generateValues</span>();

<span class="hljs-comment">// æƒ³è¦è¿‡æ»¤å‡ºå¶æ•°å¹¶ä¹˜ä»¥2ï¼Œéœ€è¦å…ˆè½¬æˆæ•°ç»„</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(iterator)
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// [4, 8]</span>
</code></pre>
<p>è€Œæœ‰äº† <strong>Iterator Helpers</strong> åŸå‹æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿­ä»£å™¨ä¸Šæ“ä½œï¼Œé¿å…ä¸­é—´æ•°ç»„çš„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½¿ç”¨ Iterator Sequencingï¼ˆææ¡ˆå®ç°ï¼‰</span>
<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">generateValues</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>)
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-comment">// è¿­ä»£ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> value <span class="hljs-keyword">of</span> result) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value); <span class="hljs-comment">// è¾“å‡º 4, 8</span>
}
</code></pre>
<h3 data-id="heading-3">1.2 Iterator Helpers æä¾›çš„ä¸»è¦åŸå‹æ–¹æ³•</h3>
<p>Iterator Helpers ææ¡ˆä¸º Iterator.prototype æ·»åŠ äº†ä»¥ä¸‹æ ¸å¿ƒæ–¹æ³•ï¼š</p>
<h4 data-id="heading-4">1.2.1 map()</h4>
<p>ç±»ä¼¼äºæ•°ç»„çš„ <code>map</code> æ–¹æ³•ï¼Œ<code>Iterator.prototype.map()</code> å¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå€¼åº”ç”¨ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«è½¬æ¢åå€¼çš„æ–°è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šå°†æ•°å­—ä¹˜ä»¥2</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> doubled = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> doubled) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 2, 4, 6, 8, 10</span>
}
</code></pre>
<h4 data-id="heading-5">1.2.2 filter()</h4>
<p><code>Iterator.prototype.filter()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼ŒåŒ…å«æ‰€æœ‰é€šè¿‡æŒ‡å®šæµ‹è¯•å‡½æ•°çš„å…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šç­›é€‰å‡ºå¶æ•°</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>];
<span class="hljs-keyword">const</span> evenNumbers = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> evenNumbers) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 2, 4, 6</span>
}
</code></pre>
<h4 data-id="heading-6">1.2.3 take()</h4>
<p><code>Iterator.prototype.take()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼Œæœ€å¤šåŒ…å«åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šåªå–å‰3ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> firstThree = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">take</span>(<span class="hljs-number">3</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> firstThree) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 1, 2, 3</span>
}
</code></pre>
<h4 data-id="heading-7">1.2.4 drop()</h4>
<p><code>Iterator.prototype.drop()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°è¿­ä»£å™¨ï¼Œè·³è¿‡åŸå§‹è¿­ä»£å™¨çš„å‰ n ä¸ªå…ƒç´ ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè·³è¿‡å‰2ä¸ªå…ƒç´ </span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
<span class="hljs-keyword">const</span> afterFirstTwo = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">drop</span>(<span class="hljs-number">2</span>);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> afterFirstTwo) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 3, 4, 5</span>
}
</code></pre>
<h4 data-id="heading-8">1.2.5 flatMap()</h4>
<p><code>Iterator.prototype.flatMap()</code> æ–¹æ³•å…ˆå¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ä¸€ä¸ªæ˜ å°„å‡½æ•°ï¼Œç„¶åå°†ç»“æœæ‰å¹³åŒ–ä¸ºä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šå°†æ¯ä¸ªæ•°å­—æ‰©å±•ä¸ºåŒ…å«è¯¥æ•°å­—çš„æ•°ç»„</span>
<span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> expanded = numbers.<span class="hljs-title function_">values</span>()
  .<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> [num, num * <span class="hljs-number">2</span>]);

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> expanded) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num); <span class="hljs-comment">// 1, 2, 2, 4, 3, 6</span>
}
</code></pre>
<h4 data-id="heading-9">1.2.6 some() å’Œ every()</h4>
<p><strong>Iterator.prototype.some()</strong> å’Œ <strong>Iterator.prototype.every()</strong> æ–¹æ³•æµ‹è¯•è¿­ä»£å™¨çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æŒ‡å®šçš„æ¡ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£€æŸ¥æ˜¯å¦æœ‰å¶æ•°</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>];
  <span class="hljs-keyword">const</span> hasEven = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hasEven); <span class="hljs-comment">// true</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"some() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}

<span class="hljs-comment">// ç¤ºä¾‹ï¼šæ£€æŸ¥æ˜¯å¦æ‰€æœ‰å…ƒç´ éƒ½æ˜¯æ­£æ•°</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
  <span class="hljs-keyword">const</span> allPositive = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num &gt; <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(allPositive); <span class="hljs-comment">// true</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"every() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}
</code></pre>
<h4 data-id="heading-10">1.2.7 reduce()</h4>
<p><code>Iterator.prototype.reduce()</code> æ–¹æ³•å¯¹è¿­ä»£å™¨ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªreducerå‡½æ•°ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè®¡ç®—æ‰€æœ‰å…ƒç´ çš„æ€»å’Œ</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];
  <span class="hljs-keyword">const</span> sum = numbers.<span class="hljs-title function_">values</span>()
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, num</span>) =&gt;</span> acc + num, <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sum); <span class="hljs-comment">// 15</span>
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"reduce() æ–¹æ³•åœ¨å½“å‰ç¯å¢ƒä¸­ä¸å¯ç”¨"</span>);
}
</code></pre>
<h3 data-id="heading-11">1.3 å®é™…åº”ç”¨åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-12">1.3.1 åœºæ™¯ä¸€ï¼šå¤„ç†å¤§å‹æ•°æ®é›†</h4>
<p>å½“å¤„ç†å¤§å‹æ•°æ®é›†æ—¶ï¼ŒIterator Helpers å¯ä»¥å¸®åŠ©æˆ‘ä»¬é¿å…ä¸€æ¬¡æ€§å°†æ‰€æœ‰æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‡è®¾æœ‰ä¸€ä¸ªç”Ÿæˆå¤§é‡æ•°æ®çš„ç”Ÿæˆå™¨å‡½æ•°</span>
<span class="hljs-keyword">function</span>* <span class="hljs-title function_">generateLargeDataset</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¨¡æ‹Ÿç”Ÿæˆå¤§é‡æ•°æ®</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000000</span>; i++) {
    <span class="hljs-keyword">yield</span> { <span class="hljs-attr">id</span>: i, <span class="hljs-attr">value</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ Iterator Helpers å¤„ç†æ•°æ®ï¼Œæ— éœ€ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨åˆ°å†…å­˜</span>
<span class="hljs-keyword">const</span> processedData = <span class="hljs-title function_">generateLargeDataset</span>()
  .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0.5</span>)  <span class="hljs-comment">// åªä¿ç•™å€¼å¤§äº0.5çš„é¡¹</span>
  .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: item.<span class="hljs-property">id</span>, <span class="hljs-attr">value</span>: item.<span class="hljs-property">value</span> * <span class="hljs-number">100</span> }))  <span class="hljs-comment">// å€¼ä¹˜ä»¥100</span>
  .<span class="hljs-title function_">take</span>(<span class="hljs-number">10</span>);  <span class="hljs-comment">// åªå–å‰10ä¸ªç»“æœ</span>

<span class="hljs-comment">// é€ä¸€å¤„ç†ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> processedData) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item);
}
</code></pre>
<h4 data-id="heading-13">1.3.2 åœºæ™¯äºŒï¼šå¼‚æ­¥æ•°æ®æµå¤„ç†</h4>
<p>ç»“åˆå¼‚æ­¥è¿­ä»£å™¨ï¼ŒIterator Helpers å¯ä»¥ä¼˜é›…åœ°å¤„ç†å¼‚æ­¥æ•°æ®æµï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œå±•ç¤ºçš„æ˜¯ç»“åˆå¼‚æ­¥è¿­ä»£å™¨çš„ç”¨æ³•ï¼Œ</span>
<span class="hljs-comment">// å®é™…çš„å¼‚æ­¥Iterator Helperså¯èƒ½åœ¨å…¶ä»–ææ¡ˆä¸­</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">processAsyncData</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ•°æ®æº</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>* <span class="hljs-title function_">fetchDataInChunks</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
      <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100</span>));
      <span class="hljs-keyword">yield</span> [i * <span class="hljs-number">10</span>, i * <span class="hljs-number">10</span> + <span class="hljs-number">1</span>, i * <span class="hljs-number">10</span> + <span class="hljs-number">2</span>];
    }
  }

  <span class="hljs-comment">// å¤„ç†å¼‚æ­¥æ•°æ®</span>
  <span class="hljs-keyword">const</span> asyncIterator = <span class="hljs-title function_">fetchDataInChunks</span>();
  
  <span class="hljs-comment">// åœ¨æ”¯æŒå¼‚æ­¥Iterator Helpersçš„ç¯å¢ƒä¸­</span>
  <span class="hljs-comment">// å¯ä»¥è¿™æ ·é“¾å¼å¤„ç†ï¼š</span>
  <span class="hljs-comment">/*
  for await (const item of asyncIterator
    .flatMap(chunk =&gt; chunk)
    .filter(num =&gt; num % 2 === 0)
    .map(num =&gt; num * 2)) {
    console.log(item);
  }
  */</span>
  
  <span class="hljs-comment">// å½“å‰ç¯å¢ƒçš„æ›¿ä»£å®ç°</span>
  <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> asyncIterator) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> num <span class="hljs-keyword">of</span> chunk) {
      <span class="hljs-keyword">if</span> (num % <span class="hljs-number">2</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(num * <span class="hljs-number">2</span>);
      }
    }
  }
}

<span class="hljs-comment">// processAsyncData();</span>
</code></pre>
<h2 data-id="heading-14">2. Iterator Sequencingï¼ˆé™æ€æ–¹æ³•ï¼‰</h2>
<p><strong>Iterator Sequencing</strong> ææ¡ˆæä¾›äº† <strong>Iterator</strong> å¯¹è±¡ä¸Šçš„é™æ€æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºå’Œæ“ä½œè¿­ä»£åºåˆ—ã€‚</p>
<h3 data-id="heading-15">2.1 <strong>Iterator.concat(...items)</strong></h3>
<p>å°†å¤šä¸ªå¯è¿­ä»£å¯¹è±¡è¿æ¥æˆä¸€ä¸ªæ–°çš„è¿­ä»£å™¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šè¿æ¥å¤šä¸ªæ•°ç»„çš„è¿­ä»£å™¨</span>
<span class="hljs-keyword">const</span> iter1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> iter2 = [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>].<span class="hljs-title function_">values</span>();
<span class="hljs-keyword">const</span> concatenated = <span class="hljs-title class_">Iterator</span>.<span class="hljs-title function_">concat</span>(iter1, iter2);

<span class="hljs-comment">// éå†è¿æ¥åçš„è¿­ä»£å™¨</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> concatenated) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item); <span class="hljs-comment">// è¾“å‡º: 1, 2, 3, 4, 5, 6</span>
}
</code></pre>
<h2 data-id="heading-16">ææ¡ˆçŠ¶æ€å’Œå…¼å®¹æ€§</h2>
<p>ä¸¤ä¸ªææ¡ˆç›®å‰çš„çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>Iterator Helpers</strong> ææ¡ˆå·²ç»è¢«çº³å…¥ <strong>ECMAScript 2025</strong> æ ‡å‡†ï¼Œåœ¨æ”¯æŒ <strong>ES2025</strong> çš„ç¯å¢ƒä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
<li><strong>Iterator Sequencing</strong> ææ¡ˆç›®å‰å¤„äº <strong>Stage 3</strong> é˜¶æ®µï¼ˆæˆªè‡³ 2025 å¹´ 11 æœˆï¼‰ï¼Œæœ‰æœ›åœ¨æœªæ¥ç‰ˆæœ¬ä¸­æ ‡å‡†åŒ–</li>
</ul>
<p>è¦æ£€æŸ¥ä½ çš„ç¯å¢ƒæ˜¯å¦æ”¯æŒè¿™äº›ç‰¹æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥ Iterator Helpers æ”¯æŒ</span>
<span class="hljs-keyword">const</span> supportsIteratorHelpers = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
                                <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">map</span> === <span class="hljs-string">'function'</span>;

<span class="hljs-comment">// æ£€æŸ¥ Iterator Sequencing æ”¯æŒ</span>
<span class="hljs-keyword">const</span> supportsIteratorSequencing = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; 
                                    <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Iterator</span>.<span class="hljs-property">concat</span> === <span class="hljs-string">'function'</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Iterator Helpers æ”¯æŒ:'</span>, supportsIteratorHelpers);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Iterator Sequencing æ”¯æŒ:'</span>, supportsIteratorSequencing);
</code></pre>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œå¯¹äºå°šæœªå®Œå…¨æ”¯æŒçš„ç¯å¢ƒï¼Œä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨ <strong>polyfill</strong> æˆ–è½¬è¯‘å·¥å…·æ¥ç¡®ä¿ä»£ç çš„å…¼å®¹æ€§ã€‚</p>
<p>å¦ä¸€ç§æ›´è¯¦ç»†çš„æ£€æµ‹æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// æµ‹è¯•åŸºæœ¬æ”¯æŒ</span>
  <span class="hljs-keyword">const</span> test = [<span class="hljs-number">1</span>].<span class="hljs-title function_">values</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> x);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Iterator Helpers åŸºæœ¬æ”¯æŒ"</span>);
  
  <span class="hljs-comment">// æµ‹è¯•å…·ä½“æ–¹æ³•</span>
  <span class="hljs-keyword">const</span> methods = [<span class="hljs-string">'map'</span>, <span class="hljs-string">'filter'</span>, <span class="hljs-string">'take'</span>, <span class="hljs-string">'drop'</span>, <span class="hljs-string">'flatMap'</span>, <span class="hljs-string">'some'</span>, <span class="hljs-string">'every'</span>, <span class="hljs-string">'reduce'</span>];
  methods.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">method</span> =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = [<span class="hljs-number">1</span>].<span class="hljs-title function_">values</span>()[method] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${method}</span>: æ”¯æŒ`</span>);
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${method}</span>: ä¸æ”¯æŒ`</span>);
    }
  });
} <span class="hljs-keyword">catch</span> (e) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Iterator Helpers ä¸æ”¯æŒ"</span>);
}
</code></pre>
<p>å¦‚æœä½ éœ€è¦åœ¨ä¸æ”¯æŒçš„ç¯å¢ƒä¸­ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ <strong>polyfill</strong> åº“ï¼Œå¦‚ core-jsã€‚</p>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p>Iterator ç›¸å…³çš„è¿™ä¸¤ä¸ªææ¡ˆä¸º JavaScript å¸¦æ¥äº†å¼ºå¤§çš„è¿­ä»£å™¨æ“ä½œèƒ½åŠ›ï¼š</p>
<ol>
<li><strong>Iterator Helpers</strong>ï¼ˆåŸå‹æ–¹æ³•ï¼‰ï¼šè®©å¼€å‘è€…å¯ä»¥åƒæ“ä½œæ•°ç»„ä¸€æ ·ç›´æ¥åœ¨è¿­ä»£å™¨å®ä¾‹ä¸Šé“¾å¼è°ƒç”¨æ–¹æ³•ï¼Œæé«˜ä»£ç ç®€æ´æ€§å’Œå†…å­˜æ•ˆç‡</li>
<li><strong>Iterator Sequencing</strong>ï¼ˆé™æ€æ–¹æ³•ï¼‰ï¼šæä¾›äº†åˆ›å»ºå’Œç»„åˆè¿­ä»£åºåˆ—çš„å·¥å…·æ–¹æ³•ï¼Œå¢å¼ºäº†è¿­ä»£å™¨çš„åˆ›å»ºå’Œæ“ä½œèƒ½åŠ›</li>
</ol>
<p>è¿™äº›ææ¡ˆå…±åŒä¸°å¯Œäº† JavaScript çš„è¿­ä»£å™¨ç”Ÿæ€ï¼Œä½¿å¾—å¤„ç†å„ç§æ•°æ®ç»“æ„å’Œæ•°æ®æµå˜å¾—æ›´åŠ é«˜æ•ˆå’Œä¾¿æ·ã€‚</p>
<ol>
<li><strong>ä»£ç æ›´ç®€æ´</strong>ï¼šç›´æ¥åœ¨è¿­ä»£å™¨ä¸Šé“¾å¼è°ƒç”¨æ–¹æ³•ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°æ˜“è¯»</li>
<li><strong>å†…å­˜æ•ˆç‡æ›´é«˜</strong>ï¼šé¿å…äº†ä¸å¿…è¦çš„æ•°ç»„è½¬æ¢ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§å‹æ•°æ®é›†</li>
<li><strong>è¿­ä»£å™¨ API æ ‡å‡†åŒ–</strong>ï¼šæä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„ API æ¥æ“ä½œå„ç§è¿­ä»£å™¨</li>
<li><strong>ä¸å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼æ›´å¥‘åˆ</strong>ï¼šé¼“åŠ±ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¤„ç†æ•°æ®</li>
</ol>
<p>éšç€ <strong>Iterator Helpers</strong> ææ¡ˆè¢«çº³å…¥ <strong>ECMAScript 2025</strong> æ ‡å‡†ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…åœ¨æœªæ¥çš„ JavaScript ç‰ˆæœ¬ä¸­æ›´å¹¿æ³›åœ°ä½¿ç”¨è¿™äº›åŠŸèƒ½ï¼Œè¿›ä¸€æ­¥æå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p>
<hr/>
 <p/>
<table>
    <tbody><tr>
        <td>
            <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f67cd30497a34f66ae5547c02192f59b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=1820&amp;s=574996&amp;e=jpg&amp;b=81dd6b" width="150" loading="lazy"/>
        </td>
        <td> 
<p>æ›´å¤š JavaScript åŸºç¡€çŸ¥è¯†çš„å­¦ä¹ ï¼Œå¯ä»¥å­¦ä¹ æˆ‘å†™çš„è¿™æœ¬ <a href="https://juejin.cn/book/7226969813581889575" target="_blank" title="https://juejin.cn/book/7226969813581889575">ã€ŠJavaScript è¯­è¨€ç¼–ç¨‹è¿›é˜¶ã€‹</a>  å°å†Œã€‚ </p></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨]]></title>    <link>https://juejin.cn/post/7575133880435015731</link>    <guid>https://juejin.cn/post/7575133880435015731</guid>    <pubDate>2025-11-22T14:29:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435015731" data-draft-id="7575133880434933811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:29:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ LocalStorage å®ç°æœ¬åœ°å¾…åŠäº‹é¡¹ï¼ˆTo-Doï¼‰åˆ—è¡¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:29:26.000Z" title="Sat Nov 22 2025 14:29:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå‰ç«¯å¼€å‘è€…å¸¸å¸¸éœ€è¦åœ¨æµè§ˆå™¨ä¸­æŒä¹…åŒ–å­˜å‚¨ä¸€äº›ç”¨æˆ·æ•°æ®ã€‚æ¯”å¦‚ç”¨æˆ·çš„åå¥½è®¾ç½®ã€è¡¨å•è‰ç¨¿ã€æˆ–è€…åƒæœ¬æ–‡è¦å®ç°çš„â€”â€”ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹ï¼ˆTo-Do Listï¼‰åº”ç”¨ã€‚HTML5 æä¾›äº†ä¸€ä¸ªéå¸¸å®ç”¨çš„ APIï¼š<strong><code>localStorage</code></strong>ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­ä»¥é”®å€¼å¯¹çš„å½¢å¼æ°¸ä¹…ä¿å­˜æ•°æ®ã€‚</p>
<p>æœ¬æ–‡å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œå¸¦ä½ äº†è§£å¦‚ä½•ä½¿ç”¨ <code>localStorage</code> å®ç°ä¸€ä¸ªå¯æŒä¹…åŒ–å­˜å‚¨çš„ To-Do åˆ—è¡¨ï¼Œå¹¶ç»“åˆ JavaScript çš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³å’Œäº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼Œå†™å‡ºç»“æ„æ¸…æ™°ã€æ˜“äºç»´æŠ¤çš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ localStorageï¼Ÿ</h2>
<p><code>localStorage</code> æ˜¯ Web Storage API çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåœ¨æµè§ˆå™¨ä¸­é•¿æœŸå­˜å‚¨æ•°æ®ã€‚å®ƒçš„ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æŒä¹…æ€§</strong>ï¼šé™¤éç”¨æˆ·æ‰‹åŠ¨æ¸…é™¤ï¼Œå¦åˆ™æ•°æ®ä¸ä¼šè¿‡æœŸã€‚</li>
<li><strong>é”®å€¼å¯¹å­˜å‚¨</strong>ï¼šåªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®ï¼ˆkey å’Œ value éƒ½æ˜¯å­—ç¬¦ä¸²ï¼‰ã€‚</li>
<li><strong>åŒæºç­–ç•¥</strong>ï¼šåªæœ‰åŒåè®®ã€åŒåŸŸåã€åŒç«¯å£çš„é¡µé¢æ‰èƒ½å…±äº«åŒä¸€ä¸ª <code>localStorage</code>ã€‚</li>
</ul>
<p>ç”±äº <code>localStorage</code> åªèƒ½å­˜å­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šé…åˆ <code>JSON.stringify()</code> å’Œ <code>JSON.parse()</code> æ¥å­˜å‚¨å’Œè¯»å–å¯¹è±¡æˆ–æ•°ç»„ã€‚</p>
<hr/>
<h2 data-id="heading-1">é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h2>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªç®€å•çš„â€œTapasâ€ï¼ˆå°é£Ÿï¼‰æ¸…å•ï¼Œç”¨æˆ·å¯ä»¥ï¼š</p>
<ul>
<li>æ·»åŠ æ–°çš„ Tapas é¡¹ï¼›</li>
<li>å‹¾é€‰å·²å®Œæˆçš„é¡¹ï¼›</li>
<li>é¡µé¢åˆ·æ–°åæ•°æ®ä¾ç„¶ä¿ç•™ã€‚</li>
</ul>
<p>HTML ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"wrapper"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>LOCAL TAPAS<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"plates"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Loading Tapas...<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span></span>
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"add-items"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Item Name"</span> <span class="hljs-attr">required</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"item"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"+ Add Item"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</span></code></pre>
<p>æ ¸å¿ƒé€»è¾‘é›†ä¸­åœ¨ <code>&lt;script&gt;</code> æ ‡ç­¾ä¸­ï¼Œä¸‹é¢æˆ‘ä»¬é€æ­¥æ‹†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-2">åˆå§‹åŒ–æ•°æ®ä¸æ¸²æŸ“åˆ—è¡¨</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ä» <code>localStorage</code> ä¸­è¯»å–å·²æœ‰çš„å¾…åŠäº‹é¡¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">items</span> = JSON.parse(localStorage.getItem(<span class="hljs-string">'todos'</span>)) || []<span class="hljs-comment">;</span>
</code></pre>
<p>å¦‚æœ <code>localStorage</code> ä¸­æ²¡æœ‰ <code>'todos'</code> è¿™ä¸ª keyï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ä½œä¸ºé»˜è®¤å€¼ã€‚</p>
<p>æ¥ç€ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ª <code>populateList</code> å‡½æ•°ï¼Œç”¨äºå°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function populateList(<span class="hljs-attr">plates</span> = [], platesList) {
  <span class="hljs-attr">platesList.innerHTML</span> = plates.map((plate, i) =&gt; {
    return `
      &lt;li&gt;
        &lt;input <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> data-index=<span class="hljs-variable">${i}</span> id=<span class="hljs-string">"item${i}"</span> <span class="hljs-variable">${plate.done ? 'checked' : ''}</span> /&gt;
        &lt;label <span class="hljs-attr">for</span>=<span class="hljs-string">"item${i}"</span>&gt;<span class="hljs-variable">${plate.text}</span>&lt;/label&gt;
      &lt;/li&gt;
    `<span class="hljs-comment">;</span>
  }).join('')<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>plates</code>ï¼šå¾…åŠäº‹é¡¹æ•°ç»„ï¼›</li>
<li><code>platesList</code>ï¼šè¦æ¸²æŸ“åˆ°çš„ DOM å…ƒç´ ï¼ˆå³ <code>&lt;ul class="plates"&gt;</code>ï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡ <code>map</code> æ–¹æ³•ç”Ÿæˆæ¯ä¸ªåˆ—è¡¨é¡¹çš„ HTML å­—ç¬¦ä¸²ï¼Œå¹¶ç”¨ <code>join('')</code> æ‹¼æ¥æˆå®Œæ•´å†…å®¹ï¼Œæœ€åèµ‹å€¼ç»™ <code>innerHTML</code>ã€‚è¿™ç§æ–¹å¼é¿å…äº†é¢‘ç¹æ“ä½œ DOMï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</p>
<p>è°ƒç”¨ä¸€æ¬¡å³å¯å®Œæˆåˆå§‹æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">populateList</span>(items, itemsList);
</code></pre>
<hr/>
<h2 data-id="heading-3">æ·»åŠ æ–°äº‹é¡¹</h2>
<p>å½“ç”¨æˆ·åœ¨è¡¨å•ä¸­è¾“å…¥å†…å®¹å¹¶ç‚¹å‡»â€œ+ Add Itemâ€æ—¶ï¼Œä¼šè§¦å‘ <code>submit</code> äº‹ä»¶ã€‚æˆ‘ä»¬é€šè¿‡äº‹ä»¶ç›‘å¬å™¨å¤„ç†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">addItems.<span class="hljs-built_in">addEventListener</span>(<span class="hljs-string">'submit'</span>, addItem);
</code></pre>
<p><code>addItem</code> å‡½æ•°çš„æ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params">e</span>) {
  e.<span class="hljs-title function_">preventDefault</span>(); <span class="hljs-comment">// é˜»æ­¢è¡¨å•é»˜è®¤æäº¤ï¼ˆé¡µé¢è·³è½¬ï¼‰</span>
  <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'[name=item]'</span>).<span class="hljs-property">value</span>.<span class="hljs-title function_">trim</span>();
  <span class="hljs-comment">//é€šè¿‡å±æ€§é€‰æ‹©å™¨ æ‹¿åˆ°è¡¨å•ä¸­nameä¸ºitemçš„inputä¸­çš„å€¼ å¹¶å»é™¤å·¦å³ç©ºæ ¼ è¿™é‡Œå…¶å®ä¹Ÿè¿ç”¨åˆ°åŒ…è£…ç±»çš„æ¦‚å¿µ</span>
  <span class="hljs-comment">//å› ä¸ºæ‹¿åˆ°çš„valueæ˜¯å­—ç¬¦ä¸² ç®€å•æ•°æ®ç±»å‹ ä½†æ˜¯å¯ä»¥è°ƒç”¨æ–¹æ³•.trim()</span>
  <span class="hljs-keyword">const</span> item = {
    text,
    <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span>
    <span class="hljs-comment">//é€šè¿‡doneæ¥æ§åˆ¶å‹¾é€‰æ¡†çš„é€‰ä¸­ ä¸€å¼€å§‹è®¾ç½®ä¸ºfalse</span>
  };
  
  items.<span class="hljs-title function_">push</span>(item);<span class="hljs-comment">//æŠŠè¾“å…¥çš„itemæ·»åŠ åˆ°items</span>
  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'todos'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(items)); <span class="hljs-comment">// æŒä¹…åŒ–å­˜å‚¨</span>
  <span class="hljs-title function_">populateList</span>(items, itemsList); <span class="hljs-comment">// é‡æ–°æ¸²æŸ“</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reset</span>(); <span class="hljs-comment">// æ¸…ç©ºè¡¨å•å†…å®¹ ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ</span>
}
</code></pre>
<p>è¿™é‡Œæœ‰å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>e.preventDefault()</code> é˜²æ­¢é¡µé¢åˆ·æ–°ï¼›</li>
<li>é€šè¿‡ <code>this</code>ï¼ˆæŒ‡å‘è¡¨å•å…ƒç´ ï¼‰è·å–è¾“å…¥æ¡†çš„å€¼ï¼›</li>
<li>æ„é€ æ–°å¯¹è±¡ <code>{ text, done: false }</code> å¹¶åŠ å…¥æ•°ç»„ï¼›</li>
<li>è°ƒç”¨ <code>localStorage.setItem()</code> å°†æ•´ä¸ªæ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²åä¿å­˜ï¼›</li>
<li>é‡æ–°æ¸²æŸ“åˆ—è¡¨å¹¶æ¸…ç©ºè¡¨å•ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">å‹¾é€‰/å–æ¶ˆå‹¾é€‰äº‹é¡¹ï¼ˆäº‹ä»¶å§”æ‰˜ï¼‰</h2>
<p>å¦‚æœä¸ºæ¯ä¸ªå¤é€‰æ¡†å•ç‹¬ç»‘å®šäº‹ä»¶ï¼Œæ•ˆç‡ä½ä¸‹ä¸”éš¾ä»¥ç»´æŠ¤ã€‚å› æ­¤æˆ‘ä»¬é‡‡ç”¨<strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šå°†ç‚¹å‡»äº‹ä»¶ç»‘å®šåœ¨çˆ¶å®¹å™¨ <code>&lt;ul class="plates"&gt;</code> ä¸Šï¼Œé€šè¿‡åˆ¤æ–­ç‚¹å‡»ç›®æ ‡æ˜¯å¦ä¸º <code>input</code> æ¥å†³å®šæ˜¯å¦å¤„ç†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">itemsList.addEventListener('click', toggleDone)<span class="hljs-comment">;</span>

function toggleDone(e) {
  const <span class="hljs-attr">el</span> = e.target<span class="hljs-comment">;</span>
  //æŒ‡å®š  å½“ç‚¹å‡»çš„ä¸ºinputæ—¶ æ‰è¿›è¡Œä¸‹é¢æ“ä½œ
  if (<span class="hljs-attr">el</span> === <span class="hljs-string">'INPUT'</span>) {
    const <span class="hljs-attr">index</span> = el.dataset.index<span class="hljs-comment">;</span>
    items<span class="hljs-section">[index]</span>.<span class="hljs-attr">done</span> = !items[index].done<span class="hljs-comment">;</span>
    //é€šè¿‡doneæ¥æ§åˆ¶å‹¾é€‰ ç‚¹å‡»å–å
    localStorage.setItem('todos', JSON.stringify(items))<span class="hljs-comment">;</span>
    //ç‚¹å‡»åä¿®æ”¹äº†itemä¸­çš„doneå€¼ å†æ¬¡è¿›è¡Œæœ¬åœ°å­˜å‚¨
    populateList(items, itemsList)<span class="hljs-comment">;//å†æ¬¡æ¸²æŸ“</span>
  }
}
</code></pre>
<p>æ¯æ¬¡åˆ‡æ¢çŠ¶æ€åï¼Œæˆ‘ä»¬åŒæ ·æ›´æ–° <code>localStorage</code> å¹¶é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ï¼Œç¡®ä¿è§†å›¾ä¸æ•°æ®ä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸ºä»€ä¹ˆä½¿ç”¨å‡½æ•°å¼å°è£…ï¼Ÿ</h2>
<p>æ–‡ä¸­æåˆ°ï¼šâ€œ<strong>æ‹’ç»æµç¨‹å¼ä»£ç ï¼Œè¶…è¿‡10è¡Œå°±å°è£…å‡½æ•°</strong>â€ã€‚è¿™å…¶å®æ˜¯ä¸€ç§è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼š</p>
<ul>
<li><strong>æé«˜å¯è¯»æ€§</strong>ï¼š<code>populateList</code>ã€<code>addItem</code> ç­‰å‡½æ•°åæ¸…æ™°è¡¨è¾¾äº†æ„å›¾ï¼›</li>
<li><strong>ä¾¿äºå¤ç”¨</strong>ï¼šæ¸²æŸ“é€»è¾‘è¢«æŠ½ç¦»ï¼Œå¯åœ¨å¤šå¤„è°ƒç”¨ï¼›</li>
<li><strong>é™ä½è€¦åˆ</strong>ï¼šæ•°æ®æ“ä½œä¸ DOM æ“ä½œåˆ†ç¦»ï¼Œé€»è¾‘æ›´æ¸…æ™°ï¼›</li>
<li><strong>æ˜“äºæµ‹è¯•ä¸è°ƒè¯•</strong>ï¼šæ¯ä¸ªå‡½æ•°èŒè´£å•ä¸€ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œé»˜è®¤å‚æ•°ï¼ˆå¦‚ <code>plates = []</code>ï¼‰å’Œè§£æ„èµ‹å€¼ï¼ˆå¦‚ <code>{ text, done }</code>ï¼‰ä¹Ÿä½“ç°äº† ES6 çš„ç®€æ´è¯­æ³•ä¼˜åŠ¿ã€‚</p>
<hr/>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ªå°å°çš„â€œLocal Tapasâ€é¡¹ç›®ï¼Œæˆ‘ä»¬ä¸ä»…å®ç°äº†åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰åŠŸèƒ½ï¼Œæ›´é‡è¦çš„æ˜¯æŒæ¡äº†ä»¥ä¸‹æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<ol>
<li><strong><code>localStorage</code> çš„åŸºæœ¬ç”¨æ³•</strong>ï¼šå­˜å‚¨å­—ç¬¦ä¸²ã€é…åˆ <code>JSON</code> å¤„ç†å¤æ‚æ•°æ®ï¼›</li>
<li><strong>äº‹ä»¶å§”æ‰˜</strong>ï¼šé«˜æ•ˆå¤„ç†åŠ¨æ€ç”Ÿæˆå…ƒç´ çš„äº¤äº’ï¼›</li>
<li><strong>å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³</strong>ï¼šå°è£…ç»†èŠ‚ã€å…³æ³¨è¾“å…¥è¾“å‡ºï¼›</li>
<li><strong>DOM æ“ä½œä¼˜åŒ–</strong>ï¼šæ‰¹é‡æ›´æ–°è€Œéé€ä¸ªæ“ä½œã€‚</li>
</ol>
<p>è™½ç„¶è¿™ä¸ªåº”ç”¨å¾ˆç®€å•ï¼Œä½†å®ƒå±•ç¤ºäº†ç°ä»£å‰ç«¯å¼€å‘ä¸­â€œæ•°æ®é©±åŠ¨è§†å›¾â€çš„å…¸å‹æ¨¡å¼ï¼š<strong>æ•°æ®å˜åŒ– â†’ æ›´æ–°å­˜å‚¨ â†’ é‡æ–°æ¸²æŸ“</strong>ã€‚è¿™ç§æ¨¡å¼ä¹Ÿæ˜¯ Reactã€Vue ç­‰æ¡†æ¶çš„æ€æƒ³åŸºç¡€ã€‚</p>
<p>ä½ å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šç»§ç»­æ‰©å±•ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ·»åŠ åˆ é™¤æŒ‰é’®ï¼›</li>
<li>æ”¯æŒç¼–è¾‘äº‹é¡¹ï¼›</li>
<li>æŒ‰å®ŒæˆçŠ¶æ€è¿‡æ»¤ï¼›</li>
<li>åŠ å…¥åŠ¨ç”»æ•ˆæœç­‰ã€‚</li>
</ul>
<p>ä½†æ— è®ºå¦‚ä½•ï¼Œè®°ä½ï¼š<strong>å¥½çš„ä»£ç å§‹äºæ¸…æ™°çš„ç»“æ„å’Œåˆç†çš„æŠ½è±¡</strong>ã€‚è€Œ <code>localStorage</code>ï¼Œæ­£æ˜¯ä½ æ„å»ºç¦»çº¿ä¼˜å…ˆï¼ˆOffline-Firstï¼‰åº”ç”¨çš„ç¬¬ä¸€æ­¥ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ–‡ä»£ç å·²é€šè¿‡å®é™…æµ‹è¯•ï¼Œå¯ç›´æ¥è¿è¡Œã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµä½ çš„æ”¹è¿›æƒ³æ³•ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ]]></title>    <link>https://juejin.cn/post/7575104251865792522</link>    <guid>https://juejin.cn/post/7575104251865792522</guid>    <pubDate>2025-11-22T14:51:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575104251865792522" data-draft-id="7575133880435048499" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T14:51:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jing_Rainbow"/> <meta itemprop="url" content="https://juejin.cn/user/1285809519198256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å‰ç«¯ä¸‰å‰‘å®¢-6/Lesson11(2025-10-28)æ„å»ºç°ä»£å“åº”å¼ç½‘é¡µï¼šä» HTML åˆ° CSS å¼¹æ€§å¸ƒå±€å†åˆ° JavaScript äº¤äº’çš„å®Œæ•´æŒ‡å— ğŸŒˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1285809519198256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jing_Rainbow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:51:28.000Z" title="Sat Nov 22 2025 14:51:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ğŸŒˆåœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ„å»ºä¸€ä¸ªç¾è§‚ã€äº¤äº’æ€§å¼ºä¸”é€‚é…å¤šç«¯è®¾å¤‡çš„ç½‘é¡µï¼Œç¦»ä¸å¼€ <strong>HTML</strong>ã€<strong>CSSï¼ˆæˆ–å…¶é¢„å¤„ç†å™¨ï¼‰</strong> å’Œ <strong>JavaScript</strong> çš„ç´§å¯†åä½œã€‚æœ¬æ–‡å°†å…¨é¢æ·±å…¥åœ°å‰–æå¦‚ä½•ä½¿ç”¨è¿™äº›æŠ€æœ¯æ‰“é€ ä¸€ä¸ªå…·æœ‰åŠ¨æ€é¢æ¿æ•ˆæœçš„å“åº”å¼ç½‘é¡µï¼Œå¹¶è¯¦ç»†è¡¥å……ç›¸å…³çŸ¥è¯†ä½“ç³»ï¼Œæ¶µç›– <strong>è¯­ä¹‰ç»“æ„ã€å¼¹æ€§å¸ƒå±€ï¼ˆFlexboxï¼‰ã€CSS è¿‡æ¸¡åŠ¨ç”»ã€åª’ä½“æŸ¥è¯¢ã€Stylus é¢„å¤„ç†å™¨åŸç†ã€DOM æ“ä½œä¸äº‹ä»¶ç›‘å¬</strong> ç­‰æ ¸å¿ƒå†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ“„ ä¸€ã€HTML ç»“æ„ï¼šè¯­ä¹‰åŒ–é¡µé¢éª¨æ¶</h2>
<p>é¦–å…ˆçœ‹ <code>index.html</code> æ–‡ä»¶çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html">DocumentExplore The WorldWild ForestSunny BeachCity on WinterMountains - Clouds
</code></pre>
<p>è™½ç„¶è¿™ä¸ª HTML ç‰‡æ®µç¼ºå°‘å®Œæ•´çš„ <code>&lt;html&gt;</code>ã€<code>&lt;head&gt;</code> å’Œ <code>&lt;body&gt;</code> æ ‡ç­¾ï¼Œä½†ä»ä¸Šä¸‹æ–‡å¯ä»¥æ¨æ–­å‡ºå…¶çœŸå®ç»“æ„åº”ç±»ä¼¼å¦‚ä¸‹ï¼ˆè¿™æ˜¯ç°ä»£ Web å¼€å‘çš„æ ‡å‡†å†™æ³•ï¼‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Explore The World<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"style.css"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Wild Forest<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Sunny Beach<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>City on Winter<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"panel"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Mountains - Clouds<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"common.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-1">âœ… å…³é”®ç‚¹è§£æï¼š</h3>
<ul>
<li><strong>è¯­ä¹‰æ¸…æ™°</strong>ï¼šæ¯ä¸ª <code>.panel</code> ä»£è¡¨ä¸€ä¸ªå¯ç‚¹å‡»çš„â€œæ¢ç´¢åŒºåŸŸâ€ï¼Œæ ‡é¢˜ç”¨ <code>&lt;h3&gt;</code> è¡¨ç¤ºå±‚çº§ã€‚</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼šæ‰€æœ‰é¢æ¿åŒ…è£¹åœ¨ <code>.container</code> ä¸­ï¼Œä¾¿äºç»Ÿä¸€å¸ƒå±€æ§åˆ¶ã€‚</li>
<li><strong>å¤–éƒ¨èµ„æºå¼•å…¥</strong>ï¼šé€šè¿‡ <code>&lt;link&gt;</code> å¼•å…¥ CSSï¼Œé€šè¿‡ <code>&lt;script&gt;</code> å¼•å…¥ JSï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ï¼ˆSeparation of Concernsï¼‰ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¨ äºŒã€CSS æ ·å¼ï¼šå¼¹æ€§å¸ƒå±€ + åŠ¨ç”» + å“åº”å¼</h2>
<p><code>style.css</code> æ˜¯æ•´ä¸ªè§†è§‰è¡¨ç°çš„æ ¸å¿ƒã€‚æˆ‘ä»¬é€è¡Œè§£è¯»å¹¶æ‰©å±•å…¶èƒŒåçš„åŸç†ã€‚</p>
<h3 data-id="heading-3">ğŸ”§ å…¨å±€é‡ç½®ä¸åŸºç¡€å¸ƒå±€</h3>
<pre><code class="hljs language-css" lang="css">* { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; }
</code></pre>
<ul>
<li><strong>é€šé…ç¬¦é€‰æ‹©å™¨</strong>ï¼šæ¸…é™¤æ‰€æœ‰å…ƒç´ é»˜è®¤å†…å¤–è¾¹è·ï¼Œé¿å…æµè§ˆå™¨æ ·å¼å·®å¼‚ï¼ˆä½†ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ›´ç²¾ç»†çš„ reset æˆ– normalize.cssï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: row;
  <span class="hljs-attribute">justify-content</span>: center;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}
</code></pre>
<ul>
<li><strong><code>display: flex</code></strong>ï¼šå¼€å¯å¼¹æ€§ç›’æ¨¡å‹ï¼ˆFlexboxï¼‰ï¼Œä½¿å­å…ƒç´ æŒ‰å¼¹æ€§è§„åˆ™æ’åˆ—ã€‚</li>
<li><strong><code>justify-content: center</code></strong>ï¼šä¸»è½´ï¼ˆæ°´å¹³æ–¹å‘ï¼‰å±…ä¸­å¯¹é½ã€‚</li>
<li><strong><code>align-items: center</code></strong>ï¼šäº¤å‰è½´ï¼ˆå‚ç›´æ–¹å‘ï¼‰å±…ä¸­å¯¹é½ã€‚</li>
<li><strong><code>height: 100vh</code></strong>ï¼šè§†å£é«˜åº¦ 100%ï¼Œç¡®ä¿ body å æ»¡å±å¹•ã€‚</li>
<li><strong><code>overflow: hidden</code></strong>ï¼šéšè—æ»šåŠ¨æ¡ï¼Œé˜²æ­¢å†…å®¹æº¢å‡ºå¯¼è‡´æ»šåŠ¨ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>Flexbox å°è¯¾å ‚</strong>ï¼š</p>
<ul>
<li><strong>ä¸»è½´ï¼ˆmain axisï¼‰</strong>ï¼šç”± <code>flex-direction</code> å†³å®šï¼Œé»˜è®¤ä¸º <code>row</code>ï¼ˆæ°´å¹³ï¼‰ã€‚</li>
<li><strong>äº¤å‰è½´ï¼ˆcross axisï¼‰</strong>ï¼šå‚ç›´äºä¸»è½´ã€‚</li>
<li>å­å…ƒç´ ç§°ä¸º <strong>flex items</strong>ï¼Œçˆ¶å®¹å™¨ç§°ä¸º <strong>flex container</strong>ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-4">ğŸ–¼ï¸ é¢æ¿å®¹å™¨ä¸é¢æ¿é¡¹</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">90vw</span>;
}
</code></pre>
<ul>
<li>å®¹å™¨æœ¬èº«ä¹Ÿæ˜¯ flex å®¹å™¨ï¼Œå†…éƒ¨ <code>.panel</code> å¹¶æ’æ˜¾ç¤ºã€‚</li>
<li><code>90vw</code>ï¼šå®½åº¦ä¸ºè§†å£å®½åº¦çš„ 90%ï¼Œç•™ç™½ç¾è§‚ã€‚</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80vh</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">0.5</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background-size</span>: cover;
  <span class="hljs-attribute">background-position</span>: center;
  <span class="hljs-attribute">background-repeat</span>: no-repeat;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">700ms</span> ease-in;
}
</code></pre>
<h4 data-id="heading-5">ğŸ” å±æ€§è¯¦è§£ï¼š</h4>
<ul>
<li><strong><code>flex: 0.5</code></strong>ï¼šç­‰ä»·äº <code>flex: 0 1 0.5</code>ï¼Œè¡¨ç¤ºä¸æ”¾å¤§ï¼ˆflex-grow=0ï¼‰ã€å¯æ”¶ç¼©ï¼ˆflex-shrink=1ï¼‰ã€åŸºå‡†å°ºå¯¸ä¸º 0.5 ä»½ã€‚å¤šä¸ª panel ä¼šæŒ‰æ¯”ä¾‹åˆ†é…ç©ºé—´ã€‚</li>
<li><strong><code>background-*</code></strong>ï¼šè®¾ç½®èƒŒæ™¯å›¾å…¨å±è¦†ç›–ã€å±…ä¸­ã€ä¸é‡å¤ï¼Œå¸¸ç”¨äº hero imageã€‚</li>
<li><strong><code>transition: all 700ms ease-in</code></strong>ï¼š
<ul>
<li><code>all</code>ï¼šç›‘å¬æ‰€æœ‰å¯è¿‡æ¸¡å±æ€§çš„å˜åŒ–ï¼ˆå¦‚ widthã€flexã€opacityï¼‰ã€‚</li>
<li><code>700ms</code>ï¼šåŠ¨ç”»æŒç»­æ—¶é—´ã€‚</li>
<li><code>ease-in</code>ï¼šç¼“åŠ¨å‡½æ•°ï¼Œå¼€å§‹æ…¢ï¼Œç»“æŸå¿«ã€‚</li>
<li>âš ï¸ æ³¨æ„ï¼š<code>transition</code> åªå¯¹ <strong>å·²æœ‰å±æ€§å€¼å˜åŒ–</strong> èµ·ä½œç”¨ï¼Œä¸èƒ½ç”¨äº <code>display: none â†” block</code>ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">300ms</span> ease-in <span class="hljs-number">400ms</span>;
}
</code></pre>
<ul>
<li>æ–‡å­—ç»å¯¹å®šä½åœ¨å·¦ä¸‹è§’ã€‚</li>
<li>åˆå§‹ <code>opacity: 0</code>ï¼ˆå®Œå…¨é€æ˜ï¼‰ã€‚</li>
<li><code>transition-delay: 400ms</code>ï¼šç‚¹å‡»åå»¶è¿Ÿ 0.4 ç§’æ‰å¼€å§‹æ·¡å…¥ï¼Œåˆ¶é€ â€œå…ˆå±•å¼€å†æ˜¾å­—â€çš„å±‚æ¬¡æ„Ÿã€‚</li>
</ul>
<h3 data-id="heading-6">ğŸŒŸ æ¿€æ´»çŠ¶æ€ï¼šåŠ¨æ€æ”¾å¤§ä¸æ–‡å­—æ˜¾ç°</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">5</span>;
}
<span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<ul>
<li>å½“æŸä¸ª panel æ·»åŠ  <code>.active</code> ç±»æ—¶ï¼š
<ul>
<li><code>flex: 5</code> â†’ å æ®ç»å¤§éƒ¨åˆ†å®¹å™¨å®½åº¦ï¼ˆå› ä¸ºå…¶ä»–æ˜¯ 0.5ï¼Œæ€»å’Œçº¦ 2ï¼Œ5 è¿œå¤§äºå®ƒä»¬ï¼‰ã€‚</li>
<li><code>opacity: 1</code> â†’ æ ‡é¢˜æ·¡å…¥å¯è§ã€‚</li>
</ul>
</li>
</ul>
<blockquote>
<p>ğŸ¯ <strong>è®¾è®¡æ„å›¾</strong>ï¼šç”¨æˆ·ç‚¹å‡»æŸå¼ é£æ™¯å›¾ï¼Œè¯¥å›¾æ”¾å¤§çªå‡ºï¼ŒåŒæ—¶æ˜¾ç¤ºæ ‡é¢˜ï¼Œå½¢æˆç„¦ç‚¹å¼•å¯¼ã€‚</p>
</blockquote>
<h3 data-id="heading-7">ğŸ“± å“åº”å¼é€‚é…ï¼šç§»åŠ¨ç«¯ä¼˜åŒ–</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">480px</span>) {
  <span class="hljs-selector-class">.container</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>; }
  <span class="hljs-selector-class">.panel</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">4</span>),
  <span class="hljs-selector-class">.panel</span><span class="hljs-selector-pseudo">:nth-of-type</span>(<span class="hljs-number">5</span>) { <span class="hljs-attribute">display</span>: none; }
}
</code></pre>
<ul>
<li><strong>åª’ä½“æŸ¥è¯¢ï¼ˆMedia Queryï¼‰</strong>ï¼šå½“å±å¹•å®½åº¦ â‰¤ 480pxï¼ˆå…¸å‹æ‰‹æœºå°ºå¯¸ï¼‰æ—¶ç”Ÿæ•ˆã€‚</li>
<li>å®¹å™¨å æ»¡å…¨å®½ã€‚</li>
<li>éšè—ç¬¬ 4ã€5 ä¸ªé¢æ¿ï¼ˆä½†ä½ çš„ HTML åªæœ‰ 4 ä¸ªï¼Œå¯èƒ½æ˜¯é¢„ç•™æ‰©å±•ï¼Ÿï¼‰ã€‚æ­¤ä¸¾å‡å°‘ä¿¡æ¯å¯†åº¦ï¼Œæå‡å°å±ä½“éªŒã€‚</li>
</ul>
<blockquote>
<p>ğŸ“ <strong>å¸¸è§æ–­ç‚¹å‚è€ƒ</strong>ï¼š</p>
<ul>
<li>æ‰‹æœºï¼š&lt;576px</li>
<li>å¹³æ¿ï¼šâ‰¥576px</li>
<li>æ¡Œé¢ï¼šâ‰¥992px</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-8">âš™ï¸ ä¸‰ã€JavaScript äº¤äº’ï¼šDOM æ“ä½œä¸äº‹ä»¶é©±åŠ¨</h2>
<p><code>common.js</code> å®ç°äº†ç‚¹å‡»åˆ‡æ¢æ¿€æ´»é¢æ¿çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> panels = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.panel'</span>);

panels.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">panel</span>) {
  panel.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> cur = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.active'</span>);
    <span class="hljs-keyword">if</span> (cur) {
      cur.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
    }
    panel.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'active'</span>);
  });
});
</code></pre>
<h3 data-id="heading-9">ğŸ§  ä»£ç é€»è¾‘æ‹†è§£ï¼š</h3>
<ol>
<li><strong>è·å–æ‰€æœ‰é¢æ¿</strong>ï¼š<code>querySelectorAll</code> è¿”å› NodeListï¼ˆç±»æ•°ç»„å¯¹è±¡ï¼‰ã€‚</li>
<li><strong>éå†ç»‘å®šç‚¹å‡»äº‹ä»¶</strong>ï¼šæ¯ä¸ª panel ç›‘å¬ <code>click</code>ã€‚</li>
<li><strong>ç§»é™¤æ—§æ¿€æ´»é¡¹</strong>ï¼šæŸ¥æ‰¾å½“å‰ <code>.active</code> å…ƒç´ å¹¶ç§»é™¤ç±»ã€‚</li>
<li><strong>æ¿€æ´»å½“å‰é¡¹</strong>ï¼šç»™è¢«ç‚¹å‡»çš„ panel æ·»åŠ  <code>.active</code>ã€‚</li>
</ol>
<h3 data-id="heading-10">ğŸ› ï¸ æŠ€æœ¯è¦ç‚¹ï¼š</h3>
<ul>
<li><strong>äº‹ä»¶å§”æ‰˜ vs ç›´æ¥ç»‘å®š</strong>ï¼šæ­¤å¤„ç›´æ¥ç»‘å®šï¼Œå› é¢æ¿æ•°é‡å›ºå®šä¸”å°‘ã€‚è‹¥åŠ¨æ€å¢åˆ ï¼Œå»ºè®®ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆç›‘å¬ containerï¼‰ã€‚</li>
<li><strong>classList API</strong>ï¼šç°ä»£æ“ä½œ class çš„æ ‡å‡†æ–¹å¼ï¼Œæ¯” <code>className</code> æ›´å®‰å…¨ã€‚</li>
<li><strong>æ’ä»–æ€§è®¾è®¡</strong>ï¼šåŒä¸€æ—¶é—´ä»…ä¸€ä¸ª panel æ¿€æ´»ï¼Œç¬¦åˆ UX åŸåˆ™ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡ <strong>è¿›é˜¶æ€è€ƒ</strong>ï¼š</p>
<ul>
<li>å¯æ·»åŠ é”®ç›˜å¯¼èˆªï¼ˆArrow Keysï¼‰ã€‚</li>
<li>æ”¯æŒè‡ªåŠ¨è½®æ’­ï¼ˆsetInterval + æ¨¡æ‹Ÿç‚¹å‡»ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>requestAnimationFrame</code> ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-11">ğŸ§ª å››ã€Stylus é¢„å¤„ç†å™¨ï¼šæå‡ CSS å¼€å‘æ•ˆç‡ï¼ˆæ¥è‡ª readme.mdï¼‰</h2>
<p><code>readme.md</code> ä»‹ç»äº† <strong>Stylus</strong> â€”â€” ä¸€ç§å¼ºå¤§çš„ CSS é¢„å¤„ç†å™¨ã€‚</p>
<h3 data-id="heading-12">ğŸŒ± ä»€ä¹ˆæ˜¯ CSS é¢„å¤„ç†å™¨ï¼Ÿ</h3>
<p>æµè§ˆå™¨åªèƒ½è§£ææ ‡å‡† CSSã€‚é¢„å¤„ç†å™¨ï¼ˆå¦‚ Stylusã€Sassã€Lessï¼‰å…è®¸ä½ ç”¨æ›´ç®€æ´ã€å¯ç¼–ç¨‹çš„è¯­æ³•ç¼–å†™æ ·å¼ï¼Œå†<strong>ç¼–è¯‘</strong>æˆæµè§ˆå™¨èƒ½è¯†åˆ«çš„ CSSã€‚</p>
<h3 data-id="heading-13">ğŸ“¦ Stylus æ ¸å¿ƒç‰¹æ€§ï¼ˆå¯¹æ¯” CSSï¼‰ï¼š</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>CSS å†™æ³•</th><th>Stylus å†™æ³•</th></tr></thead><tbody><tr><td><strong>åµŒå¥—</strong></td><td>é‡å¤å†™é€‰æ‹©å™¨</td><td>ç›´æ¥åµŒå¥—ï¼Œç»“æ„æ¸…æ™°</td></tr><tr><td><strong>å˜é‡</strong></td><td>ä¸æ”¯æŒï¼ˆéœ€ CSS è‡ªå®šä¹‰å±æ€§ï¼‰</td><td><code>primary-color = #333</code></td></tr><tr><td><strong>æ··åˆï¼ˆMixinsï¼‰</strong></td><td>æ— </td><td>å¯å¤ç”¨ä»£ç å—</td></tr><tr><td><strong>å‡½æ•°</strong></td><td>æœ‰é™</td><td>è‡ªå®šä¹‰é€»è¾‘</td></tr><tr><td><strong>çœç•¥ç¬¦å·</strong></td><td>å¿…é¡»å†™ <code>{}</code> <code>:</code> <code>;</code></td><td>å¯çœç•¥ï¼Œé ç¼©è¿›</td></tr></tbody></table>
<p>ä¾‹å¦‚ï¼Œä½ çš„ CSS ä¸­è¿™æ®µï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.container</span> <span class="hljs-selector-class">.panel</span><span class="hljs-selector-class">.active</span> <span class="hljs-selector-tag">h3</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
</code></pre>
<p>åœ¨ Stylus ä¸­å¯å†™ä½œï¼š</p>
<pre><code class="hljs language-stylus" lang="stylus">.container
  .panel
    &amp;.active
      h3
        opacity: 1
</code></pre>
<h3 data-id="heading-14">ğŸ”§ ç¼–è¯‘æµç¨‹ï¼ˆreadme.md æç¤ºï¼‰ï¼š</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… Stylus</span>
npm i -g stylus

<span class="hljs-comment"># ç¼–è¯‘å•æ¬¡</span>
stylus style.styl -o style.css

<span class="hljs-comment"># ç›‘å¬æ–‡ä»¶å˜åŒ–è‡ªåŠ¨ç¼–è¯‘ï¼ˆå¼€å‘æ¨èï¼‰</span>
stylus style.styl -o style.css -w
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜åŠ¿æ€»ç»“</strong>ï¼š</p>
<ul>
<li>å‡å°‘é‡å¤ä»£ç </li>
<li>æé«˜å¯ç»´æŠ¤æ€§</li>
<li>æ”¯æŒé€»è¾‘è¿ç®—ï¼ˆå¦‚é¢œè‰²å˜æš— <code>darken(color, 10%)</code>ï¼‰</li>
<li>è‡ªåŠ¨ç”Ÿæˆå‚å•†å‰ç¼€ï¼ˆautoprefixer é…åˆï¼‰</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-15">ğŸ§© äº”ã€æ•´åˆä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">ğŸ”„ å¼€å‘å·¥ä½œæµå»ºè®®ï¼š</h3>
<ol>
<li>ç”¨ <strong>Stylus</strong> ç¼–å†™ <code>style.styl</code></li>
<li>å¯åŠ¨ç›‘å¬ï¼š<code>stylus style.styl -o style.css -w</code></li>
<li>ç¼–å†™ HTML ç»“æ„</li>
<li>ç”¨ JS å®ç°äº¤äº’é€»è¾‘</li>
<li>åœ¨ä¸åŒè®¾å¤‡æµ‹è¯•å“åº”å¼æ•ˆæœ</li>
</ol>
<h3 data-id="heading-17">ğŸ§ª æ€§èƒ½ä¸å…¼å®¹æ€§ï¼š</h3>
<ul>
<li><strong>Flexbox å…¼å®¹æ€§</strong>ï¼šIE10+ æ”¯æŒï¼ˆéœ€ <code>-ms-</code> å‰ç¼€ï¼‰ï¼Œç°ä»£æµè§ˆå™¨å®Œç¾æ”¯æŒã€‚</li>
<li><strong>Transition å…¼å®¹æ€§</strong>ï¼šIE10+ï¼Œæ³¨æ„ Safari æ—©æœŸç‰ˆæœ¬éœ€ <code>-webkit-</code>ã€‚</li>
<li><strong>JS é™çº§</strong>ï¼šè‹¥ JS ç¦ç”¨ï¼Œè‡³å°‘ä¿è¯åŸºç¡€æ ·å¼å¯ç”¨ï¼ˆæ¸è¿›å¢å¼ºï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-18">ğŸ¨ è®¾è®¡æ‰©å±•å»ºè®®ï¼š</h3>
<ul>
<li>ä¸ºæ¯ä¸ª panel è®¾ç½®ä¸åŒ <code>background-image</code>ï¼ˆé€šè¿‡å†…è”æ ·å¼æˆ–é¢å¤– classï¼‰</li>
<li>æ·»åŠ  hover æ•ˆæœï¼ˆæ¡Œé¢ç«¯ï¼‰</li>
<li>ä½¿ç”¨ CSS <code>:focus</code> æå‡æ— éšœç¢è®¿é—®ï¼ˆa11yï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-19">ğŸ ç»“è¯­ï¼šç°ä»£å‰ç«¯å¼€å‘çš„ç¼©å½±</h2>
<p>ä½ æä¾›çš„è¿™ç»„æ–‡ä»¶ï¼Œè™½å°å´äº”è„ä¿±å…¨ï¼Œå®Œç¾ä½“ç°äº† <strong>ç°ä»£ Web å¼€å‘çš„æ ¸å¿ƒèŒƒå¼</strong>ï¼š</p>
<ul>
<li><strong>ç»“æ„ï¼ˆHTMLï¼‰</strong>ï¼šæ¸…æ™°ã€è¯­ä¹‰åŒ–</li>
<li><strong>æ ·å¼ï¼ˆCSS/Stylusï¼‰</strong>ï¼šå“åº”å¼ã€åŠ¨ç”»åŒ–ã€æ¨¡å—åŒ–</li>
<li><strong>è¡Œä¸ºï¼ˆJavaScriptï¼‰</strong>ï¼šäº¤äº’é©±åŠ¨ã€DOM æ“ä½œ</li>
<li><strong>å·¥å…·é“¾ï¼ˆStylusï¼‰</strong>ï¼šæå‡æ•ˆç‡ã€å·¥ç¨‹åŒ–æ€ç»´</li>
</ul>
<p>é€šè¿‡æ·±å…¥ç†è§£æ¯ä¸€è¡Œä»£ç èƒŒåçš„åŸç†ï¼Œä½ ä¸ä»…èƒ½å¤ç°è¿™ä¸ªâ€œæ¢ç´¢ä¸–ç•Œâ€é¢æ¿ï¼Œæ›´èƒ½ä¸¾ä¸€åä¸‰ï¼Œæ„å»ºæ›´å¤æ‚çš„äº¤äº’å¼åº”ç”¨ã€‚ğŸš€</p>
<blockquote>
<p>ğŸŒ <strong>Keep exploring. Keep coding.</strong><br/>
â€”â€” ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ï¼Œæˆ–è®¸å°±ä»è¿™é‡Œå¯èˆªï¼âœ¨</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚]]></title>    <link>https://juejin.cn/post/7575159361900265513</link>    <guid>https://juejin.cn/post/7575159361900265513</guid>    <pubDate>2025-11-22T15:13:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575159361900265513" data-draft-id="7575230119104217129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2025-11-22T15:13:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯ä½ çš„å°æ©˜å‘€"/> <meta itemprop="url" content="https://juejin.cn/user/1989458366301708"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript åŸå‹é“¾è§£å¯†ï¼šåŸæ¥ proto å’Œ prototype è¿™ä¹ˆå¥½æ‡‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1989458366301708/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯ä½ çš„å°æ©˜å‘€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:13:15.000Z" title="Sat Nov 22 2025 15:13:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ–‡ææ‡‚ JavaScript åŸå‹ï¼šä»ã€Œè’™åœˆã€åˆ°ã€Œé€šé€ã€</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒJavaScript çš„åŸå‹æœºåˆ¶å¯èƒ½æ˜¯ä½ å…¥é—¨æ—¶çš„ç¬¬ä¸€ä¸ªã€Œå°åã€ã€‚æ˜æ˜çœ‹ç€ç®€å•ï¼Œå¯ä¸€åˆ°å®é™…åº”ç”¨å°±å®¹æ˜“æ™•å¤´è½¬å‘ â€”â€” <code>åŸå‹</code>ã€<code>åŸå‹é“¾</code>ã€<code>prototype</code>ã€<code>__proto__</code> è¿™äº›æ¦‚å¿µæ€»åƒç»•å£ä»¤ä¸€æ ·è®©äººè¿·ç³Šã€‚ä»Šå¤©å’±ä»¬å°±ç”¨æœ€æ¥åœ°æ°”çš„æ–¹å¼ï¼ŒæŠŠåŸå‹è¿™ç‚¹äº‹å„¿å½»åº•è¯´æ¸…æ¥šã€‚</p>
<h3 data-id="heading-1">å…ˆä»ä¸€ä¸ªã€Œåå¸¸è¯†ã€çš„é—®é¢˜è¯´èµ·</h3>
<p>ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼šä¸ºä»€ä¹ˆæ•°ç»„èƒ½ç›´æ¥è°ƒç”¨ <code>push()</code> æ–¹æ³•ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [];

arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// è¿™ç©æ„å„¿ä»å“ªæ¥çš„ï¼Ÿ</span>
</code></pre>
<p>æˆ‘ä»¬æ˜æ˜æ²¡ç»™æ•°ç»„ <code>arr</code> å®šä¹‰ <code>push</code> æ–¹æ³•ï¼Œå®ƒå´èƒ½ç›´æ¥ç”¨ã€‚è¿™å°±åƒä½ å»æœ‹å‹å®¶ä¸²é—¨ï¼Œæ²¡æå‰æ‰“æ‹›å‘¼å´èƒ½ç›´æ¥æ¨é—¨è€Œå…¥ â€”â€” å› ä¸ºæœ‹å‹å®¶çš„ã€Œé’¥åŒ™ã€æ—©å°±æ”¾åœ¨äº†ä¸€ä¸ªå¤§å®¶éƒ½çŸ¥é“çš„åœ°æ–¹ã€‚åœ¨ JavaScript é‡Œï¼Œè¿™ä¸ªã€Œæ”¾é’¥åŒ™çš„åœ°æ–¹ã€å°±æ˜¯ <strong>åŸå‹</strong>ã€‚</p>
<h3 data-id="heading-2">åŸå‹æ˜¯ä»€ä¹ˆï¼Ÿå…ˆè®¤è¯† <code>prototype</code>ï¼ˆæ˜¾ç¤ºåŸå‹ï¼‰</h3>
<h4 data-id="heading-3">å‡½æ•°å¤©ç”Ÿå¸¦ã€Œä»“åº“ã€</h4>
<p>åœ¨ JavaScript é‡Œï¼Œ<strong>æ‰€æœ‰å‡½æ•°å¤©ç”Ÿå°±æœ‰ä¸€ä¸ª <strong><code>prototype</code></strong> å±æ€§</strong>ï¼Œå®ƒå°±åƒä¸€ä¸ª<code>ã€Œå…¬å…±ä»“åº“ã€</code>ã€‚è¿™ä¸ªä»“åº“é‡Œçš„ä¸œè¥¿ï¼ˆå±æ€§æˆ–æ–¹æ³•ï¼‰ï¼Œèƒ½è¢«å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å…±äº«ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª <code>Car</code> æ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ„é€ å‡½æ•°</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params">color</span>) {

 <span class="hljs-variable language_">this</span>.<span class="hljs-property">color</span> = color; <span class="hljs-comment">// æ¯ä¸ªè½¦çš„é¢œè‰²å¯èƒ½ä¸åŒï¼Œæ”¾åœ¨å®ä¾‹é‡Œ</span>

}

<span class="hljs-comment">// ç»™æ„é€ å‡½æ•°çš„ prototype åŠ ä¸œè¥¿ï¼ˆå…¬å…±å±æ€§ï¼‰</span>

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7-Ultra'</span>;

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">length</span> = <span class="hljs-number">4800</span>; <span class="hljs-comment">// å‡è®¾æ‰€æœ‰è½¦é•¿åº¦ç›¸åŒ</span>

<span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è½¦åœ¨è·‘ï½'</span>);

};
</code></pre>
<p>è¿™é‡Œçš„ <code>Car.prototype</code> å°±æ˜¯ã€Œå…¬å…±ä»“åº“ã€ã€‚å½“æˆ‘ä»¬ç”¨ <code>new</code> åˆ›å»ºå®ä¾‹æ—¶ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> car1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'pink'</span>);

<span class="hljs-keyword">const</span> car2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">'blue'</span>);
</code></pre>
<p><code>car1</code> å’Œ <code>car2</code> éƒ½ä¼šã€Œå…±äº«ã€<code>prototype</code> é‡Œçš„ <code>name</code>ã€<code>length</code> å’Œ <code>run</code> æ–¹æ³•ã€‚ä½ å¯ä»¥ç›´æ¥è®¿é—®å®ƒä»¬ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car1.<span class="hljs-property">name</span>); <span class="hljs-comment">// 'su7-Ultra'ï¼ˆæ¥è‡ªåŸå‹ï¼‰</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car2.<span class="hljs-title function_">run</span>()); <span class="hljs-comment">// 'è½¦åœ¨è·‘ï½'ï¼ˆæ¥è‡ªåŸå‹ï¼‰</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99eff965dd7e47d6b289590f53358397~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=u7GAsRNsiwqZm%2FptHnjGxVvY2PI%3D" alt="ScreenShot_2025-11-22_223220_862.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ</h4>
<p>å¦‚æœæŠŠ <code>name</code>ã€<code>run</code> è¿™äº›å…¬å…±å±æ€§ç›´æ¥å†™åœ¨æ„é€ å‡½æ•°é‡Œï¼Œæ¯æ¬¡åˆ›å»ºå®ä¾‹éƒ½ä¼šé‡å¤åˆ›å»ºä¸€éï¼Œå°±åƒæ¯ä¸ªå°åŒºéƒ½è‡ªå·±é€ ä¸€å¥—å…±äº«å¥èº«å™¨æï¼Œçº¯å±æµªè´¹å†…å­˜ã€‚åŸå‹å°±åƒå°åŒºçš„ã€Œå…¬å…±å¥èº«åŒºã€ï¼Œå¤§å®¶å…±ç”¨ä¸€å¥—ï¼Œæ—¢çœç©ºé—´åˆå¥½ç»´æŠ¤ã€‚</p>
<h3 data-id="heading-5">å¯¹è±¡çš„ã€Œéšå½¢è¿æ¥ã€ï¼š<code>__proto__</code>ï¼ˆéšå¼åŸå‹ï¼‰</h3>
<p>æ¯ä¸ªå¯¹è±¡ï¼ˆåŒ…æ‹¬å‡½æ•°åˆ›å»ºçš„å®ä¾‹ï¼‰éƒ½æœ‰ä¸€ä¸ª <code>__proto__</code> å±æ€§ï¼Œå®ƒ<code>æŒ‡å‘</code>åˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„æ„é€ å‡½æ•°çš„ <code>prototype</code>ã€‚ç®€å•è¯´å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">å®ä¾‹å¯¹è±¡.<span class="hljs-property">__proto__</span> === æ„é€ å‡½æ•°.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>
</code></pre>
<p>è¿˜æ˜¯ç”¨ä¸Šé¢çš„ <code>Car</code> ä¸¾ä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car1.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>è¿™å°±åƒæ¯ä¸ªå°åŒºå±…æ°‘éƒ½çŸ¥é“ã€Œå…¬å…±å¥èº«åŒºã€åœ¨å“ª â€”â€”<code>__proto__</code> å°±æ˜¯å®ä¾‹å¯¹è±¡æ‰¾åˆ°ã€Œå…¬å…±ä»“åº“ã€çš„åœ°å›¾ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7'</span>
}
<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>()<span class="hljs-comment">// {name: 'su7'}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(car.<span class="hljs-property">constructor</span>); <span class="hljs-comment">// è¾“å‡º Carå‡½æ•°ï¼Œä»åŸå‹ä¸Šç»§æ‰¿æ¥çš„</span>
<span class="hljs-comment">// è®©æ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡éƒ½èƒ½çŸ¥é“è‡ªå·±æ˜¯ç”±è°åˆ›å»ºå‡ºæ¥çš„</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d5f9ce2f6bd46c5a55fc693621a8ff1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=ENHnepcF13%2Bg5lO9dEpZFNtz81o%3D" alt="ScreenShot_2025-11-22_230441_641.png" loading="lazy"/></p>
<h3 data-id="heading-6"><code>new</code> å…³é”®å­—åˆ°åº•å¹²äº†å•¥ï¼Ÿ</h3>
<p>å½“ä½ ç”¨ <code>new</code> åˆ›å»ºå®ä¾‹æ—¶ï¼ŒJavaScript æ‚„æ‚„åšäº† 5 ä»¶äº‹ï¼ˆå ªç§°ã€Œå¹•åé»‘æ‰‹ã€ï¼‰ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºç©ºå¯¹è±¡</strong>ï¼š<code>const obj = {}</code>ï¼ˆå…ˆæ­ä¸ªç©ºæ¶å­ï¼‰</p>
</li>
<li>
<p><strong>ç»‘å®š this</strong>ï¼šè®©æ„é€ å‡½æ•°é‡Œçš„ <code>this</code> æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡ï¼ˆ<code>Car.call(obj)</code>ï¼‰</p>
</li>
<li>
<p><strong>æ‰§è¡Œæ„é€ å‡½æ•°</strong>ï¼šç»™ç©ºå¯¹è±¡åŠ å±æ€§ï¼ˆæ¯”å¦‚ <code>obj.color = color</code>ï¼‰</p>
</li>
<li>
<p><strong>è¿æ¥åŸå‹</strong>ï¼š<code>obj.__proto__ = Car.prototype</code> å°†è¿™ä¸ªç©ºå¯¹è±¡çš„éšå¼åŸå‹(proto) èµ‹å€¼æˆ æ„é€ å‡½æ•°çš„æ˜¾ç¤ºåŸå‹(prototype)ï¼ˆç»™ç©ºå¯¹è±¡ä¸€å¼ ã€Œåœ°å›¾ã€ï¼‰</p>
</li>
<li>
<p><strong>è¿”å›å¯¹è±¡</strong>ï¼šæŠŠè¿™ä¸ªæ‰“æ‰®å¥½çš„å¯¹è±¡ return å‡ºå»</p>
</li>
</ol>
<p>æ‰€ä»¥ <code>const car1 = new Car('pink')</code> å…¶å®æ˜¯ JavaScript å¸®ä½ å®Œæˆäº†ä¸€ç³»åˆ—æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¸¦å±æ€§ã€è¿åŸå‹çš„å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Car</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">run</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'running'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Car</span>(<span class="hljs-params"/>) {   <span class="hljs-comment">// new Function()</span>
  <span class="hljs-comment">// const obj = {}  //// æ­¥éª¤1ï¼šåˆ›å»ºç©ºå¯¹è±¡</span>
  <span class="hljs-comment">// Car.call(obj)  // æ­¥éª¤2   call æ–¹æ³•å°† Car å‡½æ•°ä¸­çš„ this = obj</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'su7'</span>  <span class="hljs-comment">// æ­¥éª¤3</span>
  <span class="hljs-comment">// obj.__proto__ = Car.prototype  // æ­¥éª¤4ï¼šè¿æ¥åŸå‹</span>
  <span class="hljs-comment">// return obj  //æ­¥éª¤5ï¼šè¿”å›å¯¹è±¡</span>
}
<span class="hljs-keyword">const</span> car = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>() <span class="hljs-comment">// {name: 'su7'}.__proto__  == Car.prototype</span>

car.<span class="hljs-title function_">run</span>()
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d69ea4ba63b84c0db1d35f3d91b9bf70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=bS5nZB6135NYNZEmbcJoFwgt6D4%3D" alt="ScreenShot_2025-11-22_230945_260.png" loading="lazy"/></p>
<h3 data-id="heading-7">å®ä¾‹ä¸åŸå‹çš„çˆ±æ¨æƒ…ä»‡</h3>
<p>å®ä¾‹å¯ä»¥è®¿é—®åŸå‹ä¸Šçš„å±æ€§ï¼Œä½†æƒ³<code>ä¿®æ”¹</code>åŸå‹ä¸Šçš„å±æ€§å¯æ²¡é‚£ä¹ˆå®¹æ˜“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">say</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æƒ³åƒæ¼‚äº®é¥­'</span>);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">'å°æ©˜'</span>
}
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()<span class="hljs-comment">// p é‡Œé¢æ˜¾ç¤ºæ‹¥æœ‰ä¸€ä¸ªå±æ€§ name éšå¼æ‹¥æœ‰ä¸€ä¸ªå±æ€§ say</span>
p.<span class="hljs-property">say</span> = <span class="hljs-string">'hello'</span> <span class="hljs-comment">// è¿™åªæ˜¯ç»™påŠ äº†ä¸ªsayå±æ€§ï¼Œä¸æ˜¯ä¿®æ”¹åŸå‹ä¸Šçš„</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p); <span class="hljs-comment">// {name: 'å°æ©˜', say: 'hello'}</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57a8775d7d404a90b680d070e0d04fd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=DiJ3%2BqoBWf4e2thLPsLXc9w9M7c%3D" alt="ScreenShot_2025-11-22_225901_629.png" loading="lazy"/></p>
<p>è¿™å°±åƒä½ å¯ä»¥ç”¨å…¬å¸çš„æ‰“å°æœºï¼ˆåŸå‹ä¸Šçš„æ–¹æ³•ï¼‰ï¼Œä½†ä½ è‡ªå·±ä¹°äº†å°æ–°æ‰“å°æœºï¼ˆå®ä¾‹ä¸Šçš„å±æ€§ï¼‰ï¼Œå¹¶ä¸ä¼šå½±å“å…¬å¸é‚£å°ã€‚</p>
<h3 data-id="heading-8">åŸå‹é“¾ï¼šå¯¹è±¡çš„ã€Œå‘ä¸ŠæŸ¥æ‰¾ã€ç¥åŠŸ</h3>
<p>v8 åœ¨è®¿é—®å¯¹è±¡ä¸­çš„å±æ€§æ—¶ï¼Œä¼šå…ˆè®¿é—®è¯¥å¯¹è±¡ä¸­çš„æ˜¾ç¤ºå±æ€§ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å»å¯¹è±¡çš„<code>éšå¼åŸå‹__proto__</code> ä¸Šæ‰¾ï¼Œå¦‚æœè¿˜æ‰¾ä¸åˆ°ï¼Œå°±å»<code>__proto__.proto </code>ä¸Šæ‰¾ï¼Œå±‚å±‚å¾€ä¸Šï¼Œç›´åˆ°æ‰¾åˆ°<code>null</code>ä¸ºæ­¢ã€‚è¿™ç§æŸ¥æ‰¾å…³ç³»è¢«ç§°ä¸º <strong>åŸå‹é“¾</strong>.</p>
<h4 data-id="heading-9">ä¸¾ä¸ªç”Ÿæ´»ä¾‹å­ï¼š</h4>
<p>ä½ æƒ³åƒè¥¿ç“œï¼ˆè®¿é—® <code>xigua</code> å±æ€§ï¼‰ï¼š</p>
<ul>
<li>
<p>å…ˆç¿»è‡ªå·±çš„å†°ç®±ï¼ˆå¯¹è±¡æœ¬èº«ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>å»å®¢å…çš„å…¬å…±å†°ç®±ï¼ˆ<code>__proto__</code> æŒ‡å‘çš„åŸå‹ï¼‰ï¼Œè¿˜æ²¡æœ‰ï¼›</p>
</li>
<li>
<p>å»å°åŒºä¾¿åˆ©åº—ï¼ˆ<code>__proto__.__proto__</code>ï¼‰ï¼Œæ‰¾åˆ°äº†ï¼</p>
</li>
</ul>
<h4 data-id="heading-10">ä»£ç æ¼”ç¤ºï¼š</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Grand</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">house</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å››åˆé™¢'</span>);
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Grand</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">card</span> = <span class="hljs-number">10000</span>
}
<span class="hljs-title class_">Parent</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Grand</span>()  <span class="hljs-comment">// {card: 10000}.__proto__ =Grand.prototype= Grand.prototype.__proto__ = Object.prototype.__proto__ = null</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Parent</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = <span class="hljs-string">'å¼ '</span>
}
<span class="hljs-title class_">Child</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Parent</span>()  <span class="hljs-comment">// {lastName: 'å¼ '}.__proto__ = Parent.prototype</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Child</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = <span class="hljs-number">18</span>
}
<span class="hljs-keyword">const</span> c = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Child</span>()  <span class="hljs-comment">// {age: 18}.__proto__ = Child.prototype</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-property">card</span>);
c.<span class="hljs-title function_">house</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(c.<span class="hljs-title function_">toString</span>());
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1e5708c530e4721a94ffe0e87fa07a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=dyovhh31X9J24PPFT4lMEBNZCCY%3D" alt="ScreenShot_2025-11-22_224922_990.png" loading="lazy"/>
ç°åœ¨è®¿é—® <code>child.house()</code>ï¼š</p>
<ul>
<li>
<p><code>child</code> è‡ªèº«æ²¡æœ‰ <code>house</code> æ–¹æ³•ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__</code>ï¼ˆçˆ¸çˆ¸çš„å®ä¾‹ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__.__proto__</code>ï¼ˆçˆ·çˆ·çš„å®ä¾‹ï¼‰ï¼Œæ²¡æœ‰ï¼›</p>
</li>
<li>
<p>æ‰¾ <code>child.__proto__.__proto__.__proto__</code>ï¼ˆçˆ·çˆ·çš„ <code>prototype</code>ï¼‰ï¼Œæ‰¾åˆ°äº†ï¼æ‰§è¡Œ <code>house()</code> æ–¹æ³•ã€‚</p>
</li>
</ul>
<p>è¿™å°±æ˜¯åŸå‹é“¾çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼Œæ˜¯ä¸æ˜¯åƒã€Œåˆ¨æ ¹é—®åº•ã€ä¸€æ ·ï¼Ÿ</p>
<h3 data-id="heading-11">å®æˆ˜æŠ€å·§ï¼šç»™å†…ç½®å¯¹è±¡åŠ æ–¹æ³•</h3>
<p>JavaScript çš„å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚ <code>Array</code>ã€<code>Object</code>ï¼‰ä¹Ÿæœ‰åŸå‹ã€‚æˆ‘ä»¬å¯ä»¥ç»™å®ƒä»¬çš„åŸå‹åŠ æ–¹æ³•ï¼Œè®©æ‰€æœ‰å®ä¾‹éƒ½èƒ½ç”¨ã€‚</p>
<p>æ¯”å¦‚ç»™æ•°ç»„åŠ ä¸€ä¸ª <code>abc</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç»™ Array çš„åŸå‹åŠ æ–¹æ³•</span>

<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">abc</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {

 <span class="hljs-keyword">return</span> <span class="hljs-string">'æˆ‘æ˜¯æ•°ç»„çš„æ–°æ–¹æ³•ï½'</span>;

};

<span class="hljs-comment">// æ‰€æœ‰æ•°ç»„éƒ½èƒ½ç”¨</span>

<span class="hljs-keyword">const</span> arr = [];

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">abc</span>()); <span class="hljs-comment">// è¾“å‡º'æˆ‘æ˜¯æ•°ç»„çš„æ–°æ–¹æ³•ï½'</span>
</code></pre>
<p>ä¸è¿‡è¦æ³¨æ„ï¼š<strong>åˆ«éšä¾¿ä¿®æ”¹å†…ç½®å¯¹è±¡çš„åŸå‹</strong>ï¼Œå¯èƒ½ä¼šå’Œå…¶ä»–ä»£ç å†²çªï¼ˆæ¯”å¦‚åˆ«äººä¹ŸåŠ äº†åŒåæ–¹æ³•ï¼‰ã€‚</p>
<h3 data-id="heading-12">æ€»ç»“ï¼šåŸå‹å®¶æ—å…³ç³»å›¾</h3>
<p>æœ€åç”¨ä¸€å¼ ã€Œå…³ç³»å›¾ã€å¸®ä½ ç†æ¸…ï¼š</p>
<pre><code class="hljs language-js" lang="js">æ„é€ å‡½æ•°ï¼ˆ<span class="hljs-title class_">Car</span>ï¼‰

 â†“ æ‹¥æœ‰

prototypeï¼ˆä»“åº“ï¼‰

 â†“ è¢«æŒ‡å‘

å®ä¾‹å¯¹è±¡ï¼ˆcar1ï¼‰çš„ __proto__

 â†“ å‘ä¸Šæ‰¾

prototype çš„ __proto__ï¼ˆæ¯”å¦‚ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>ï¼‰

 â†“ ç›´åˆ°

<span class="hljs-literal">null</span>ï¼ˆåŸå‹é“¾çš„ç»ˆç‚¹ï¼‰
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417729d35cf843d7808f4d2bcc4867a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv5L2g55qE5bCP5qmY5ZGA:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764429418&amp;x-signature=1i1IBnu9cecZ7Pfrs1AVHd%2BUGd0%3D" alt="28031b9733ee49618e82928f8dc762be~tplv-k3u1fbpfcp-jj-mark_3024_0_0_0_q75.jpg" loading="lazy"/></p>
<p>è®°ä½è¿™å‡ ç‚¹ï¼ŒåŸå‹å°±éš¾ä¸å€’ä½ äº†ï¼š</p>
<ol>
<li>
<p>å‡½æ•°æœ‰ <code>prototype</code>ï¼ˆå…¬å…±ä»“åº“ï¼‰ï¼›</p>
</li>
<li>
<p>å¯¹è±¡æœ‰ <code>__proto__</code>ï¼ˆæŒ‡å‘æ„é€ å‡½æ•°çš„ <code>prototype</code>ï¼‰ï¼›</p>
</li>
<li>
<p><code>new</code> ä¼šå¸®ä½ ç»‘å®šåŸå‹å…³ç³»ï¼›</p>
</li>
<li>
<p>å±æ€§æŸ¥æ‰¾é¡ºç€åŸå‹é“¾å¾€ä¸Šèµ°ã€‚</p>
</li>
</ol>
<p>åŸå‹æœºåˆ¶æ˜¯ JavaScript çš„æ ¸å¿ƒï¼Œç†è§£å®ƒèƒ½è®©ä½ åœ¨å†™ä»£ç æ—¶æ›´å¾—å¿ƒåº”æ‰‹ã€‚ä¸‹æ¬¡å†é‡åˆ°åŸå‹ç›¸å…³çš„é—®é¢˜ï¼Œä¸å¦¨å›å¤´çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œè¯´ä¸å®šä¼šæœ‰æ–°æ”¶è·ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘]]></title>    <link>https://juejin.cn/post/7575065042158764082</link>    <guid>https://juejin.cn/post/7575065042158764082</guid>    <pubDate>2025-11-22T11:22:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065042158764082" data-draft-id="7575065042158747698" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘"/> <meta itemprop="keywords" content="æ¶æ„,Android"/> <meta itemprop="datePublished" content="2025-11-22T11:22:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Propeller"/> <meta itemprop="url" content="https://juejin.cn/user/4311645702612554"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Androidã€‘å¿«é€Ÿä¸Šæ‰‹ Android ç»„ä»¶åŒ–å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4311645702612554/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Propeller
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:22:18.000Z" title="Sat Nov 22 2025 11:22:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸­å‹ç›´æ’­ APP æƒ³è¦è¿›è¡Œä¸šåŠ¡è§£è€¦åˆ†å±‚çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸ºç›´æ’­åŠŸèƒ½ã€ç™»å½•åŠŸèƒ½å’Œæ”¯ä»˜åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½æœ¬èº«åœ¨å°å‹é¡¹ç›®ä¸­å¯ä»¥é€šè¿‡åˆ†åŒ…è§£å†³ï¼Œä½†å½“ä¸šåŠ¡é‡ä¸Šå‡æ—¶ï¼Œå› åä½œå’Œç¼–è¯‘éš¾åº¦å¢åŠ ï¼Œåˆ†åŒ…ä»ç„¶ä¼šä½¿å¾—é¡¹ç›®ç»“æ„æ··ä¹±å¤æ‚ï¼Œè®©å¼€å‘è€…æ‰è¥Ÿè§è‚˜ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦æœ‰æ›´è§£è€¦çš„åˆ†ç¦»æ¨¡å¼æ¥åˆ’åˆ†ä¸šåŠ¡å±‚ï¼Œäºæ˜¯å°±æœ‰æœ¬ç¯‡åšå®¢çš„ä¸»é¢˜â€”â€”<strong>ç»„ä»¶åŒ–å¼€å‘</strong>ï¼Œé€šè¿‡ç»„ä»¶åŒ–å¼€å‘å¯ä»¥å®ç°ä¸šåŠ¡æ¨¡å—é—´äº’ä¸å½±å“ï¼Œå„æ¨¡å—æŒ‰éœ€åŠ è½½ï¼Œç¼–è¯‘é€Ÿåº¦æå‡çš„åŒæ—¶ï¼Œé¡¹ç›®ä¸ä¼šè¶Šå†™è¶Šæ·±ã€‚</p>
<p>å…³äºç»„ä»¶åŒ–å¼€å‘æˆ‘ä»¬åªè¦ææ¸…æ¥šä¸‰ä»¶äº‹ï¼šæ¨¡å—ä¹‹é—´å¦‚ä½•ç›¸äº’çŸ¥æ™“ã€æ¨¡å—ä¹‹é—´å¦‚ä½•ç›¸äº’è·³è½¬å’Œå¦‚ä½•ç‹¬ç«‹ç¼–è¯‘æ¨¡å—ï¼Œå³<strong>ä¾èµ–ç®¡ç†</strong>ã€<strong>è·¯ç”±é€šä¿¡</strong>å’Œ<strong>å£³å·¥ç¨‹</strong>ã€‚</p>
<h2 data-id="heading-0">æ¨¡å—åˆ’åˆ†</h2>
<p>å°†æ¨¡å—æŒ‰ç…§èŒè´£åˆ†å±‚ï¼Œå¯ä»¥åˆ†ä¸ºä¸»å±‚ã€ä¸šåŠ¡æ¨¡å—å±‚å’ŒåŸºç¡€åº“å±‚ï¼Œå»¶ç»­ç›´æ’­ APP çš„æ€è·¯å¯ä»¥åˆ†ä¸º appã€loginã€liveã€pay å’Œ common æ¨¡å—ã€‚</p>
<p>Android Studio æœ‰ä¸¤ç§æ¨¡å— application å’Œ libraryï¼Œå‰è€…å¯ä»¥ç¼–è¯‘æˆ apk ç›´æ¥åœ¨è®¾å¤‡å®‰è£…è¿è¡Œï¼Œåè€…ä¼šç¼–è¯‘æˆ arr æ–‡ä»¶ï¼Œä¸èƒ½å•ç‹¬è¿è¡Œï¼Œå¿…é¡»è¢« application æˆ–å…¶ä»– library æ‰€ä½¿ç”¨ã€‚æ‰€ä»¥ Android å¼€å‘çš„ä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“å¯ä»¥ä½œä¸º library æ¨¡å—ï¼Œapp ä½œä¸ºå®¿ä¸»æŠŠä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“é›†æˆç¼–è¯‘è¿è¡Œã€‚</p>
<p>å› ä¸º library æ¨¡å—ç‹¬ç«‹ç¼–è¯‘å¾—åˆ°çš„ arr æ–‡ä»¶ä¸èƒ½å•ç‹¬è¿è¡Œï¼Œä¸”åœ¨åä½œå¼€å‘é‡Œï¼Œå„å¼€å‘è€…å¾€å¾€è´Ÿè´£å•ä¸šåŠ¡æ¨¡å—çš„å¼€å‘å’Œè°ƒè¯•ï¼Œè¿™è®©è°ƒè¯•æˆä¸ºéš¾é¢˜ï¼Œæ‰€ä»¥æ‰æœ‰<strong>å£³å·¥ç¨‹</strong>çš„æ¦‚å¿µï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•ç‹¬ç«‹ç¼–è¯‘ library æ¨¡å—ã€‚</p>
<p><strong>ä¾èµ–ç®¡ç†</strong>æŒ‡æ¨¡å—æŒæœ‰å¦ä¸€æ¨¡å—çš„ä¾èµ–ï¼Œè¿™ç§æŒæœ‰å…³ç³»å’Œæˆ‘ä»¬å¼€å‘å•æ¨¡å—é¡¹ç›®æ—¶å¼•å…¥ material åº“ç­‰å„ç§å®˜æ–¹æˆ–ç¬¬ä¸‰åº“çš„å½¢å¼ç›¸åŒï¼Œéƒ½æ˜¯ä½¿ç”¨æ¨¡å— build.gradle æ–‡ä»¶çš„ dependencies å—è¿›è¡Œå¼•å…¥ï¼Œè¿™ç§ä¾èµ–æ˜¯é™æ€ä¾èµ–ï¼Œä¸»å±‚ã€ä¸šåŠ¡æ¨¡å—å±‚å’ŒåŸºç¡€åº“å±‚çš„ä¾èµ–å…³ç³»é€šå¸¸ä¸ºï¼š<strong>ä¸»å±‚</strong>ä¾èµ–ä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“ï¼Œå°†å„æ¨¡å—é›†æˆè¿è¡Œï¼›<strong>ä¸šåŠ¡æ¨¡å—å±‚</strong>åªä¾èµ–åŸºç¡€åº“å±‚ï¼Œä¸šåŠ¡æ¨¡å—é—´å°½é‡ä¸äº’ç›¸ä¾èµ–ï¼Œè‹¥ä¸šåŠ¡æ¨¡å—æœ‰é€»è¾‘é‡åˆï¼Œåˆ™å°½é‡å°†é‡åˆé€»è¾‘ç§»äº¤è‡³åŸºç¡€åº“å±‚ã€‚</p>
<p>ä½†è¿™æ ·åˆå¼•å‡ºæ–°çš„é—®é¢˜ï¼šä¸šåŠ¡æ¨¡å—é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿè¿™å°±æ˜¯æˆ‘ä»¬å‰é¢æåˆ°çš„<strong>è·¯ç”±é€šä¿¡</strong>æ¦‚å¿µï¼Œè·¯ç”±é€šä¿¡æˆ‘ä»¬ä¼šä¾‹ç”¨ ARouter å®ç°ã€‚å‰é¢æåˆ°ä¾èµ–æ˜¯é™æ€ä¾èµ–ï¼Œåœ¨ç¼–è¯‘æœŸå°±ä¼šç¡®å®šä¾èµ–å…³ç³»ï¼Œè¢«ä¾èµ–æ¨¡å—çš„å˜åŠ¨ä¼šå¯¼è‡´ä¾èµ–æ¨¡å—é‡æ–°ç¼–è¯‘ï¼Œæ‰€ä»¥è·¯ç”±é€šä¿¡çš„ç›®çš„æ˜¯ä¸ºè§£è€¦æ¨¡å—ï¼Œè§£å†³åœ¨é¿å…å„ä¸šåŠ¡æ¨¡å—ç›¸äº’ä¾èµ–çš„æƒ…å†µæ— æ³•è¿›è¡Œé€šä¿¡çš„é—®é¢˜ï¼Œæ¨¡å—é—´å¯ä»¥åªä¾èµ–è·¯ç”±æ¥å£æˆ–ç»Ÿä¸€åè®®ï¼Œå®ç°åŠ¨æ€ä¾èµ–ã€‚</p>
<p>å›åˆ°æ¨¡å—åˆ’åˆ†ï¼Œæˆ‘ä»¬åœ¨ Android Studio è®¾è®¡é¡¹ç›®çš„æ¨¡å—ç»“æ„å¦‚å›¾ï¼Œå¯ä»¥çœ‹åˆ°é™¤ app æ¨¡å—å¤–ï¼Œä¸šåŠ¡æ¨¡å—å’ŒåŸºç¡€åº“éƒ½æ˜¯ libraryï¼Œè¿™æ ·å°±å®ŒæˆåŸºæœ¬çš„æ¨¡å—åˆ’åˆ†æ“ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f47a6155fd44d0aadd878b0b2faba2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=VcVTkvkkWIjNVfcezj1FvFmPom0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ä¾èµ–ç®¡ç†</h2>
<p>ä¾èµ–ç®¡ç†çš„æ­¥éª¤æˆ‘ä»¬å‰é¢æœ‰æåˆ°ï¼Œå…·ä½“æ–¹æ³•æ˜¯æ‰¾åˆ°å„æ¨¡å— build.gradle çš„ dependencies ä¾èµ–å—ï¼Œæ·»åŠ  <code>implementation project(":common")</code> å½¢å¼çš„è¯­å¥æ¥å¼•ä¾èµ–ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé¡¹ç›®æ¨¡å—é—´çš„ä¾èµ–å…³ç³»è¦é¿å…å¾ªç¯ä¾èµ–ï¼Œç›´è§‚åŸå› æ˜¯ Gradle ç¼–è¯‘æ—¶ä¼šæŠ¥é”™ï¼Œå…¶æ¬¡è‹¥æœ‰å¾ªç¯ä¾èµ–åˆ™æ¯æ¬¡ä¿®æ”¹éƒ½å¯èƒ½è§¦å‘å®Œæ•´ä¾èµ–é“¾çš„é‡æ–°ç¼–è¯‘ï¼Œæœ€åæ˜¯å› ä¸ºå¯èƒ½å¼•å‘è¿è¡Œæ—¶é—®é¢˜ï¼šå¦‚ A æ¨¡å—è°ƒç”¨ B æ¨¡å—çš„é™æ€æ–¹æ³•ï¼Œä½† B æ¨¡å—çš„é™æ€å—åˆå¼•ç”¨ A æ¨¡å—çš„ç±»ï¼Œè¯¥ç±»å¯èƒ½åœ¨åˆå§‹åŒ–è¿˜æ²¡å®Œæˆæ—¶å°±è¢«è®¿é—®ã€‚</p>
<p>åœ¨ç»“æ„å¤æ‚ä¸šåŠ¡ç¹å¤šçš„è¶…å¤§å‹é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨åŠ¨æ€åŒ–ä¾èµ–æ–¹æ¡ˆï¼Œåœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒç”¨å…¶ä»–æ¨¡å—ï¼Œå®ç°æ–¹æ³•æ˜¯ Dynamic Feature Moduleï¼Œè¿™ç§æ–¹å¼ç¼–å†™ä»£ç çš„éš¾åº¦è¾ƒé«˜ï¼Œæˆ‘ä»¬åœ¨ä¸­å‹é¡¹ç›®åªè¦ä½¿ç”¨ ARouter å³å¯ã€‚</p>
<h2 data-id="heading-2">è·¯ç”±é€šä¿¡</h2>
<p>ä¾èµ–å¯ä»¥å°†æ¨¡å— A å¼•ç”¨æ¨¡å— B çš„ç±»ä¿¡æ¯ï¼Œè‹¥ A å’Œ B ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨æ˜¾å¼ Intent è¿›è¡Œè·³è½¬ï¼Œéšå¼ Intent èƒ½å¤Ÿè·³è½¬ä½†ä¸æ¨èè¿™æ ·åšã€‚æ¯”è¾ƒä¸»æµçš„æ–¹æ³•æ˜¯ä½¿ç”¨è·¯ç”±é€šä¿¡æŠ€æœ¯ï¼Œè·¯ç”±é€šä¿¡çš„åŸç†æ˜¯åœ¨ç¼–è¯‘æœŸæ”¶é›†è·¯å¾„åˆ°ç›®æ ‡ç±»çš„æ˜ å°„è¡¨ï¼Œè¿è¡Œæ—¶æŒ‰è·¯å¾„æŸ¥è¡¨ä»¥è¿›è¡Œè·³è½¬æˆ–æœåŠ¡è°ƒç”¨ï¼Œæ˜ å°„è¡¨çš„å®ç°è¦å€ŸåŠ© APT æ³¨è§£ç”Ÿæˆå™¨ã€‚æˆ‘ä»¬ä»¥ ARouter å¼€æºå·¥å…·ä¸ºä¾‹çœ‹å¦‚ä½•ä½¿ç”¨è·¯ç”±é€šä¿¡å®ç°ç‹¬ç«‹æ¨¡å—é—´é€šä¿¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2FARouter%2Fblob%2Fmaster%2FREADME_CN.md" target="_blank" title="https://github.com/alibaba/ARouter/blob/master/README_CN.md" ref="nofollow noopener noreferrer">ARouter API æ–‡æ¡£</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/32362d6fb84648c789e46bd0891a3a41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=lXnF7vLWND7%2FdkKlagDVJ7Hk6xA%3D" alt="" loading="lazy"/></p>
<p>ARouter åˆ†æœ‰ 4 ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«æ˜¯ ARouter çš„æ ¸å¿ƒ APIã€æ³¨è§£ç”Ÿæˆå™¨ã€ASM æ’æ¡©å·¥å…·ï¼ˆä½œç”¨æ˜¯åŠ é€Ÿ ARouter åŠ è½½è·¯ç”±è¡¨ï¼‰å’Œè‡ªåŠ¨ç”Ÿæˆæ¨¡æ¿çš„å¼€å‘æ’ä»¶ã€‚æœ‰é€šä¿¡éœ€æ±‚çš„æ¨¡å—åˆ†æœ‰ä¸¤ç§æƒ…å†µï¼š<strong>è·³è½¬åˆ°å…¶ä»–æ¨¡å—çš„ UI ç•Œé¢</strong>å’Œ<strong>è·¨æ¨¡å—æä¾›æœåŠ¡</strong>ï¼Œå‰è€…æƒ…å†µçš„å‘èµ·è·³è½¬æ–¹è¦æœ‰ api æ¨¡å—ä¾èµ–ï¼Œç›®æ ‡æ–¹å¯ä»¥åªæš´éœ²è·¯å¾„æ¥è®©æ³¨è§£ç”Ÿæˆå™¨ç”Ÿæˆè·¯ç”±è¡¨ï¼Œæ‰€ä»¥åªè¦æœ‰ compiler çš„ä¾èµ–å³å¯ï¼›åè€…æƒ…å†µçš„åŒæ–¹éƒ½è¦ä¾èµ– api æ¨¡å—ï¼Œå› ä¸ºæ­¤æ—¶çš„æœåŠ¡æä¾›æ–¹ä¸ä»…è¦æ³¨å†Œè·¯ç”±è¡¨ï¼Œè¿˜è¦åœ¨è¿è¡Œæ—¶åŠ è½½å®ä¾‹ï¼ŒæœåŠ¡è°ƒç”¨æ–¹è¦é€šè¿‡ ARouter è·å–æä¾›æ–¹å®ä¾‹ã€‚</p>
<p>é¦–å…ˆåœ¨æ¨¡å—å¯¹åº” build.gradle æ–‡ä»¶çš„ android - defaultConfig å—åŠ å…¥ä»£ç ï¼Œå› ä¸ºæ³¨è§£ç”Ÿæˆå™¨ç”Ÿæˆè·¯ç”±è¡¨ä¼šæŒ‰æ¨¡å—åˆ†ç»„ï¼Œæ‰€ä»¥è¦ä¼ å…¥å„æ¨¡å—åé¿å…æ··æ·†å’Œè¦†ç›–ï¼ŒjavaCompileOptions è¡¨ç¤º Java ä»£ç è¿è¡Œä¼ å…¥çš„å‚æ•°ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">javaCompileOptions {
    annotationProcessorOptions {
        arguments = [AROUTER_MODULE_NAME: project.getName()]
    }
}
</code></pre>
<p>æ¥ç€åœ¨ dependencies å—åŠ å…¥ <code>implementation "com.alibaba:arouter-api:1.5.2"</code> æˆ– <code>annotationProcessor "com.alibaba:arouter-compiler:1.5.2"</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±å®Œæˆ ARouter çš„ä¾èµ–é…ç½®æ“ä½œã€‚</p>
<p>åœ¨æ”¯æŒè·¯ç”±çš„ç±»åŠ å…¥æ³¨è§£å’Œè·¯å¾„å‚æ•°ï¼Œè·¯å¾„å‚æ•°è‡³å°‘ä¸ºä¸¤çº§ï¼Œå¦‚æœè·¯ç”±ç±»é Activity æˆ– Fragmentï¼Œä¹Ÿå°±æ˜¯ç±»æƒ³è¦æä¾›æœåŠ¡ï¼Œåˆ™è¦å®ç° IProvider æ¥å£ï¼Œæ­¤æ—¶é€šè¿‡è·¯ç”±è¿”å›çš„æ˜¯æä¾›åŠŸèƒ½çš„æœåŠ¡å®ä¾‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Route(path = "/test/activity")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">YourActivity</span> extend Activity {
    ...
}
</code></pre>
<p>ç„¶åè¦è¿›è¡Œè°ƒè¯•å’Œåˆå§‹åŒ–ï¼Œinit æ–¹æ³•æœ‰ Context å‚æ•°å’Œæ— å‚ä¸¤ç§é‡è½½å½¢å¼ï¼Œæ— å‚åˆå§‹åŒ–åªå®ŒæˆåŸºæœ¬çš„æ¡†æ¶åˆå§‹åŒ–ï¼Œå†…éƒ¨æ²¡æœ‰ Context å®ä¾‹ï¼Œå› ä¸º IProvider è¦é€šè¿‡ Context è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥æ— å‚åˆå§‹åŒ–çš„ ARouter ä¸å…·å¤‡æä¾›æœåŠ¡çš„åŠŸèƒ½ï¼Œä¸”åç»­çš„ navigation åŠŸèƒ½å¦‚æœå¯¹ Activity ä½¿ç”¨ç›¸å½“äºè°ƒç”¨ startActivity æ–¹æ³•ï¼ŒåŒæ ·ä¹Ÿè¦æœ‰ Context çš„å‚ä¸ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (isDebug()) {
    ARouter.openLog();     <span class="hljs-comment">// æ‰“å°æ—¥å¿—</span>
    ARouter.openDebug();   <span class="hljs-comment">// å¼€å¯è°ƒè¯•æ¨¡å¼(å¦‚æœåœ¨InstantRunæ¨¡å¼ä¸‹è¿è¡Œï¼Œå¿…é¡»å¼€å¯è°ƒè¯•æ¨¡å¼ï¼çº¿ä¸Šç‰ˆæœ¬éœ€è¦å…³é—­,å¦åˆ™æœ‰å®‰å…¨é£é™©)</span>
}
ARouter.init(mApplication); <span class="hljs-comment">// å°½å¯èƒ½æ—©ï¼Œæ¨èåœ¨Applicationä¸­åˆå§‹åŒ–</span>
</code></pre>
<p>å‘èµ·è·¯ç”±æ“ä½œçš„ navigation æ–¹æ³•åŒæ ·æœ‰ Context å‚æ•°å’Œæ— å‚å½¢å¼çš„é‡è½½ï¼Œæ— å‚å½¢å¼å¯¹ IProvider ä¼šè¿”å›å•ä¾‹æœåŠ¡å®ä¾‹ï¼Œå¯¹ Fragment ä¼šè¿”å›æ–°å»ºçš„ Fragment å®ä¾‹ï¼Œå¯¹ Activity ä¼šç›´æ¥è°ƒç”¨ startActivity æ–¹æ³•ï¼›Context å‚æ•°è°ƒç”¨åˆ™ä¿è¯ Activity è·³è½¬åœºæ™¯å’Œé¦–æ¬¡è·å¾— IProvider åœºæ™¯ä¸å‘ç”Ÿå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-java" lang="java">ARouter.getInstance().build(<span class="hljs-string">"/test/activity"</span>).navigation();

ARouter.getInstance().build(<span class="hljs-string">"/test/activity"</span>)
            .with(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Bundle</span>()) <span class="hljs-comment">// æºå¸¦å‚æ•°</span>
            .navigation();
</code></pre>
<h2 data-id="heading-3">å£³å·¥ç¨‹</h2>
<p>é…ç½®å£³å·¥ç¨‹å‰æˆ‘ä»¬è¦äº†è§£å¸¸è§ gradle æ–‡ä»¶çš„ä½œç”¨ï¼Œè¿˜æ˜¯ä»¥æˆ‘ä»¬åœ¨å¼€å§‹æåˆ°çš„ LiveDemo åˆ†åŒ…ä¸ºä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f47a6155fd44d0aadd878b0b2faba2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=VcVTkvkkWIjNVfcezj1FvFmPom0%3D" alt="" loading="lazy"/></p>
<ol>
<li>é¡¹ç›® build.gradleï¼šæ§åˆ¶é¡¹ç›®çš„å…¨å±€æ’ä»¶ã€ä»“åº“åœ°å€å’Œè„šæœ¬ï¼›</li>
<li>settings.gradleï¼šé¦–è¦ä½œç”¨æ˜¯å£°æ˜é¡¹ç›®åå’Œæ¨¡å—åï¼Œè§„å®š gradle æŸ¥æ‰¾å’Œä¸‹è½½æ’ä»¶çš„è·¯å¾„ï¼›</li>
<li>æ¨¡å— build.gradleï¼šæœ€å¸¸ç”¨çš„ gradle æ–‡ä»¶ï¼Œå†…éƒ¨çš„ plugin å—è¡¨æ˜è¯¥æ¨¡å—æ˜¯ application è¿˜æ˜¯ libraryï¼Œdependencies å—å£°æ˜è¯¥æ¨¡å—åŠ è½½çš„å„é¡¹ä¾èµ–ï¼›</li>
<li>gradle.propertiesï¼šåŠ è½½é¡¹ç›®æ‰€æœ‰ gradle æ–‡ä»¶éƒ½å¯ä»¥è®¿é—®çš„å…¨å±€å˜é‡ã€‚</li>
</ol>
<p>ä¸ºå®ç° library æ¨¡å—ç‹¬ç«‹ç¼–è¯‘è¿è¡Œè°ƒè¯•ï¼Œæˆ‘ä»¬è¦åš application æ¨¡æ‹Ÿï¼ŒåŒæ—¶è¦ä¿è¯ debug å’Œ release è¦è½»æ¾åˆ‡æ¢ï¼Œå®ç°æ–¹æ³•æ˜¯åœ¨ gradle.properties æ·»åŠ å­—æ®µ <code>isDebug = false</code>ï¼Œtrue è¡¨ç¤ºç‹¬ç«‹æµ‹è¯•ï¼Œfalse è¡¨ç¤ºé›†æˆæµ‹è¯•ï¼Œæ¥ç€å¯¹ä¸šåŠ¡æ¨¡å— build.gradle çš„ plugin å—è¿›è¡Œä¿®æ”¹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ gradle.properties å£°æ˜çš„å…¨å±€å˜é‡æ˜¯ String ç±»å‹ï¼Œåœ¨ build.gradle è¦è½¬æ¢æˆå¸ƒæ°å€¼ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">/* gradle.properties */
isDebug = false

/* build.gradle */
plugins {
alias(libs.plugins.android.library)
}

/* æ”¹ä¸º */
def isDebugApp = isDebug.toBoolean()
if (isDebugApp) {
    apply plugin: 'com.android.application'
} else {
    apply plugin: 'com.android.library'
}
</code></pre>
<p>æ­¤å¤–æ³¨æ„ library å¯èƒ½åœ¨ defaultConfig å—å£°æ˜ä¸“æœ‰æ–‡ä»¶ consumer-rules.proï¼Œè¦åŠ æ¡ä»¶åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">if (!isDebugApp) {
    consumerProguardFiles "consumer-rules.pro"
}
</code></pre>
<p>æ¥ç€æˆ‘ä»¬è¦è®¾ç½®æµ‹è¯•ç”¨çš„å¯åŠ¨é¡µå’Œ ApplicationIdï¼ŒåŒæ ·åœ¨æ¨¡å— build.gradle çš„ defaultConfig å—åŠ å…¥æ¡ä»¶åˆ¤æ–­ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">if (isDebugApp) {
    applicationId "com.example.live.debug"
}
</code></pre>
<p>ç„¶ååœ¨æ¨¡å— src ç›®å½•åˆ›å»º debug Directoryï¼Œåˆ›å»ºååœ¨å†…éƒ¨åˆ›å»º java Directory å’Œ AndroidManifest.xmlã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e93865f4404a4887a023eebc1c294fcd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUHJvcGVsbGVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764415744&amp;x-signature=9yeiYm%2BSu8F1Ipq651LvbG0Faos%3D" alt="" loading="lazy"/></p>
<p>ç¼–è¾‘ src/debug æ–°åˆ›å»ºçš„ AndroidManifest è®¾ç½®ç‹¬ç«‹æµ‹è¯•çš„å¯åŠ¨é¡µï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨çš„æ˜¯ MainActivityï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æˆ‘ä»¬åœ¨ src/debug åˆ›å»ºçš„ java æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ä»…åœ¨ç‹¬ç«‹æµ‹è¯•æ—¶ç¼–è¯‘å’Œè¿è¡Œç”Ÿæ•ˆçš„ java ä»£ç ï¼Œå¯ä»¥åŒ…å«æ—¥å¿—æˆ–æ•°æ®æ‹ŸçœŸç­‰åŠŸèƒ½ï¼Œé›†æˆæµ‹è¯•æ—¶ä¸ä¼šåŒ…å«è¿™äº›ç±»ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">manifest</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">application</span>
        <span class="hljs-attr">android:allowBackup</span>=<span class="hljs-string">"true"</span>
        <span class="hljs-attr">android:label</span>=<span class="hljs-string">"LiveDemo"</span>
        <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.AppCompat"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">activity</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">application</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
</code></pre>
<p>å®Œæˆæ“ä½œåå†å›åˆ°æ¨¡å—çš„ build.gradleï¼Œåœ¨ android å—åŠ å…¥ sourceSets æ¥åŒºåˆ†åŠ è½½ä¸åŒçš„ AndroidManifest æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-groovy" lang="groovy">sourceSets {
    main {
        // ç‹¬ç«‹è°ƒè¯•ä¸é›†æˆè°ƒè¯•æ—¶ä½¿ç”¨ä¸åŒçš„ AndroidManifest.xml æ–‡ä»¶
        if (isDebugApp) {
            manifest.srcFile 'src/debug/AndroidManifest.xml'
        } else {
            manifest.srcFile 'src/main/AndroidManifest.xml'
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬æ³¨æ„åˆ°æœ€å¼€å§‹è®¾ç½®çš„ isDebug å­—æ®µåªæœ‰åˆå§‹å€¼ï¼Œè€Œæ²¡æœ‰å†³å®šä½•æ—¶ä½•å€¼çš„é€»è¾‘ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ¬¡ä»‹ç»å£³å·¥ç¨‹å®ç°æ–¹å¼çš„æ˜æ˜¾ç¼ºç‚¹ï¼Œåªèƒ½é€šè¿‡åœ¨ gradle.properties æ‰‹åŠ¨ä¿®æ”¹ isDebug å€¼æ¥å®ç°ç‹¬ç«‹ç¼–è¯‘å’Œé›†æˆç¼–è¯‘çš„åˆ‡æ¢ï¼Œå› ä¸ºå•ç‹¬ç¼–è¯‘æœ¬èº«æ˜¯ä¸´æ—¶ç¯å¢ƒï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯å¯ä»¥æ¥å—çš„ã€‚</p>
<h2 data-id="heading-4">å°¾å£°</h2>
<p>æ–‡ç« ä»‹ç»äº†å„æ¨¡å—çš„ä¾èµ–åŸåˆ™ã€ARouter çš„ç®€å•ä½¿ç”¨ä»¥åŠå•å·¥ç¨‹é¡¹ç›®å¦‚ä½•è¿›è¡Œå£³å·¥ç¨‹åŒ–ç­‰å†…å®¹ï¼Œè¿™äº›è¶³å¤Ÿåº”å¯¹ä¸šåŠ¡æ¨¡å—å°‘é‡é¡¹ç›®çš„æƒ…å†µï¼Œå¦‚æœè¯»è€…å¸Œæœ›æ›´åŠ ç†è§£ç»„ä»¶åŒ–åŸç†ï¼Œå¯ä»¥å­¦ä¹  Android åŒ…ç»“æ„ã€Gradle æ„å»ºç³»ç»Ÿå’Œ ARouter æºç ç­‰å†…å®¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨]]></title>    <link>https://juejin.cn/post/7575054113924874255</link>    <guid>https://juejin.cn/post/7575054113924874255</guid>    <pubDate>2025-11-22T13:34:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575054113924874255" data-draft-id="7575015480199987252" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T13:34:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœªæ¥çŒ«å’ªèŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/1081575169340526"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«å¡é¡¿å’Œè€—ç”µï¼view_model çš„ Pause æœºåˆ¶å¦‚ä½•æ‹¯æ•‘ä½ çš„ Flutter åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1081575169340526/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœªæ¥çŒ«å’ªèŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:34:42.000Z" title="Sat Nov 22 2025 13:34:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦ Pause æœºåˆ¶ï¼Ÿ</h2>
<p>åœ¨å¼€å‘ Flutter åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸€äº›åœºæ™¯ï¼Œé¡µé¢è™½ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œä½†å¯¹ç”¨æˆ·å¹¶ä¸å¯è§ã€‚ä¾‹å¦‚ï¼š</p>
<ol>
<li><strong>è¢«æ–°é¡µé¢è¦†ç›–</strong>ï¼šç”¨æˆ·ä»é¡µé¢ A è·³è½¬åˆ°é¡µé¢ Bï¼Œæ­¤æ—¶é¡µé¢ A ä»ç„¶åœ¨è·¯ç”±æ ˆä¸­ï¼Œä½†è¢« B è¦†ç›–ã€‚</li>
<li><strong>åœ¨ TabBarView ç­‰åœºæ™¯ä¸­</strong>ï¼šå½“ä½¿ç”¨ <code>TabBarView</code> æˆ– <code>PageView</code> æ—¶ï¼Œåªæœ‰å½“å‰é¡µé¢æ˜¯å¯è§çš„ã€‚è¿™æ˜¯ä¸€ä¸ªéœ€è¦å¼€å‘è€…æ‰‹åŠ¨ç®¡ç†ï¼Œä»¥æš‚åœåå°é¡µé¢æ´»åŠ¨çš„å…¸å‹åœºæ™¯ã€‚</li>
<li><strong>åº”ç”¨åˆ‡æ¢åˆ°åå°</strong>ï¼šç”¨æˆ·æŒ‰ä¸‹ Home é”®æˆ–åˆ‡æ¢åˆ°å…¶ä»– Appï¼Œæ•´ä¸ª Flutter åº”ç”¨è¿›å…¥åå°ã€‚</li>
</ol>
<p>åœ¨è¿™äº›â€œä¸å¯è§â€çš„çŠ¶æ€ä¸‹ï¼Œå¦‚æœé¡µé¢å…³è”çš„ <code>ViewModel</code> ä»åœ¨æ‰§è¡Œè€—æ—¶æ“ä½œï¼ˆå¦‚ç½‘ç»œè½®è¯¢ã€æ•°æ®è®¡ç®—ï¼‰å¹¶é€šè¿‡ <code>notifyListeners()</code> é¢‘ç¹è§¦å‘ <code>setState()</code>ï¼Œå°±ä¼šå¯¼è‡´ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ€§èƒ½æµªè´¹</strong>ï¼šUI é‡å»ºæ˜¯æ˜‚è´µçš„ï¼Œå¯¹ä¸€ä¸ªçœ‹ä¸è§çš„ Widget è¿›è¡Œé‡å»ºï¼Œçº¯å±æµªè´¹ CPU å’Œ GPU èµ„æºã€‚</li>
<li><strong>ç”µé‡æ¶ˆè€—</strong>ï¼šä¸å¿…è¦çš„è®¡ç®—å’Œæ¸²æŸ“ä¼šåŠ é€Ÿç”µé‡æ¶ˆè€—ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>æ½œåœ¨çš„ Bug</strong>ï¼šåœ¨é¡µé¢ä¸å¯è§æ—¶æ›´æ–° UIï¼Œå¯èƒ½ä¼šå¼•å‘æ„æƒ³ä¸åˆ°çš„çŠ¶æ€é”™è¯¯ã€‚</li>
</ul>
<p><strong>æ ¸å¿ƒç—›ç‚¹</strong>ï¼šæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿæ™ºèƒ½åœ°è¯†åˆ«é¡µé¢æ˜¯å¦å¯è§ï¼Œå¹¶åœ¨é¡µé¢ä¸å¯è§æ—¶â€œæš‚åœâ€ <code>ViewModel</code> çš„åˆ·æ–°ï¼Œåœ¨é¡µé¢æ¢å¤å¯è§æ—¶å†â€œæ¢å¤â€å¹¶åŒæ­¥æœ€æ–°çš„çŠ¶æ€ã€‚è¿™å°±æ˜¯ <code>view_model</code> åŒ…ä¸­ <code>Pause</code> æœºåˆ¶çš„è®¾è®¡åˆè¡·ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€å¦‚ä½•ç›‘æ§é¡µé¢çš„â€œä¸å¯è§â€çŠ¶æ€ï¼Ÿ</h2>
<p>ä¸ºäº†å®ç°æ™ºèƒ½æš‚åœï¼Œé¦–å…ˆè¦èƒ½å‡†ç¡®åœ°ç›‘æ§åˆ°é¡µé¢çš„å¯è§æ€§å˜åŒ–ã€‚Flutter æä¾›äº†å¤šç§æœºåˆ¶æ¥æ•æ‰è¿™äº›å˜åŒ–ï¼Œ<code>view_model</code> å°†å®ƒä»¬å°è£…æˆäº†ä¸åŒçš„ <code>PauseProvider</code>ã€‚</p>
<h3 data-id="heading-2">1. è·¯ç”±äº‹ä»¶ (<code>PageRoutePauseProvider</code>)</h3>
<p>é€šè¿‡ <code>RouteObserver</code> å’Œ <code>RouteAware</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬è·¯ç”±çš„æ¨å…¥ï¼ˆpushï¼‰å’Œå¼¹å‡ºï¼ˆpopï¼‰äº‹ä»¶ã€‚</p>
<ul>
<li><strong><code>didPushNext()</code></strong>ï¼šå½“ä¸€ä¸ªæ–°è·¯ç”±è¢«æ¨åˆ°å½“å‰è·¯ç”±ä¹‹ä¸Šæ—¶è§¦å‘ã€‚è¿™æ„å‘³ç€å½“å‰é¡µé¢è¢«è¦†ç›–äº†ï¼Œåº”è¯¥<strong>æš‚åœ</strong>ã€‚</li>
<li><strong><code>didPopNext()</code></strong>ï¼šå½“é¡¶å±‚è·¯ç”±è¢«å¼¹å‡ºï¼Œä½¿å½“å‰è·¯ç”±é‡æ–°å¯è§æ—¶è§¦å‘ã€‚è¿™æ„å‘³ç€å½“å‰é¡µé¢æ¢å¤å¯è§ï¼Œåº”è¯¥<strong>æ¢å¤</strong>ã€‚</li>
</ul>
<p><code>PageRoutePauseProvider</code> å°±æ˜¯åŸºäºè¿™ä¸ªåŸç†ï¼Œåœ¨é¡µé¢è¢«è¦†ç›–æ—¶å‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<h3 data-id="heading-3">2. åº”ç”¨ç”Ÿå‘½å‘¨æœŸ (<code>AppPauseProvider</code>)</h3>
<p>é€šè¿‡ <code>WidgetsBindingObserver</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬æ•´ä¸ªåº”ç”¨çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ã€‚</p>
<ul>
<li><strong><code>AppLifecycleState.hidden</code></strong> (æˆ– <code>paused</code>, <code>inactive</code>)ï¼šå½“åº”ç”¨åˆ‡æ¢åˆ°åå°æˆ–è¢«ç”µè¯ç­‰ç³»ç»Ÿäº‹ä»¶ä¸­æ–­æ—¶è§¦å‘ã€‚æ­¤æ—¶æ•´ä¸ªåº”ç”¨éƒ½ä¸å¯è§ï¼Œåº”è¯¥<strong>æš‚åœ</strong>ã€‚</li>
<li><strong><code>AppLifecycleState.resumed</code></strong>ï¼šå½“åº”ç”¨é‡æ–°å›åˆ°å‰å°æ—¶è§¦å‘ã€‚æ­¤æ—¶åº”ç”¨æ¢å¤å¯è§ï¼Œåº”è¯¥<strong>æ¢å¤</strong>ã€‚</li>
</ul>
<p><code>AppPauseProvider</code> è´Ÿè´£åœ¨åº”ç”¨è¿›å…¥åå°æ—¶å‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<h3 data-id="heading-4">3. TickerMode (<code>TickerModePauseProvider</code>)</h3>
<p>è¿™æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚<code>TickerMode</code> æ˜¯ Flutter åŠ¨ç”»ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒåŒæ ·å¯ä»¥ç”¨æ¥åˆ¤æ–­ Widget çš„å¯è§æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€é‡ç‚¹ï¼šä¸ºä»€ä¹ˆ TickerMode å¯ä»¥åˆ¤æ–­å¯è§æ€§ï¼Ÿ</h2>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯ Tickerï¼Ÿ</h3>
<p><code>Ticker</code> æ˜¯ Flutter åŠ¨ç”»çš„â€œå¿ƒè·³â€ï¼Œå®ƒä»¥å±å¹•çš„åˆ·æ–°ç‡ï¼ˆé€šå¸¸æ˜¯ 60fpsï¼‰ä¸ºèŠ‚å¥ï¼Œå‘¨æœŸæ€§åœ°è§¦å‘å›è°ƒã€‚<code>AnimationController</code> ç­‰åŠ¨ç”»æ§åˆ¶å™¨å°±æ˜¯ä¾èµ– <code>Ticker</code> æ¥é©±åŠ¨åŠ¨ç”»å€¼çš„å˜åŒ–ã€‚</p>
<h3 data-id="heading-7">ä»€ä¹ˆæ˜¯ TickerModeï¼Ÿ</h3>
<p><code>TickerMode</code> æ˜¯ä¸€ä¸ª <code>InheritedWidget</code>ï¼Œå®ƒå…è®¸ä½ æ˜¾å¼åœ°<strong>å¯ç”¨æˆ–ç¦ç”¨</strong>å…¶å­æ ‘ä¸­æ‰€æœ‰ <code>Ticker</code> çš„æ´»åŠ¨ã€‚</p>
<pre><code class="hljs language-dart" lang="dart">TickerMode(
  enabled: <span class="hljs-keyword">true</span>, <span class="hljs-comment">// or false</span>
  child: MyAnimatedWidget(),
);
</code></pre>
<ul>
<li>å½“ <code>enabled</code> ä¸º <code>true</code> æ—¶ï¼Œå­æ ‘ä¸­çš„ <code>Ticker</code> å¯ä»¥æ­£å¸¸â€œå¿ƒè·³â€ï¼ŒåŠ¨ç”»ä¼šæ’­æ”¾ã€‚</li>
<li>å½“ <code>enabled</code> ä¸º <code>false</code> æ—¶ï¼Œå­æ ‘ä¸­çš„ <code>Ticker</code> ä¼šè¢«â€œé™éŸ³â€ï¼ˆmutedï¼‰ï¼Œå¿ƒè·³åœæ­¢ï¼Œæ‰€æœ‰åŠ¨ç”»éƒ½ä¼šæš‚åœã€‚</li>
</ul>
<h3 data-id="heading-8">TickerMode ä¸å¯è§æ€§çš„å…³ç³»</h3>
<p>åœ¨ <code>TabBarView</code> æˆ– <code>PageView</code> è¿™ç±»åœºæ™¯ä¸­ï¼Œä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œå¼€å‘è€…éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ <code>TickerMode</code> æ¥åŒ…è£¹éå½“å‰æ˜¾ç¤ºçš„é¡µé¢ï¼Œä»¥æš‚åœå®ƒä»¬çš„åŠ¨ç”»è¡Œä¸ºã€‚</p>
<p>å½“ä½ æ»‘åŠ¨ <code>TabBarView</code> æ—¶ï¼Œå®ƒå†…éƒ¨ä¼šåšè¿™æ ·çš„äº‹æƒ…ï¼š</p>
<ul>
<li>å¯¹äº<strong>å½“å‰å¯è§çš„ Tab</strong>ï¼Œå®ƒä¼šç”¨ <code>TickerMode(enabled: true, ...)</code> åŒ…è£¹ã€‚</li>
<li>å¯¹äº<strong>å…¶ä»–ä¸å¯è§çš„ Tab</strong>ï¼Œå®ƒä¼šç”¨ <code>TickerMode(enabled: false, ...)</code> åŒ…è£¹ã€‚</li>
</ul>
<p>è¿™æ ·ä¸€æ¥ï¼Œä¸å¯è§ Tab ä¸­çš„æ‰€æœ‰åŠ¨ç”»ï¼ˆå¦‚ <code>AnimationController</code>ã€<code>ListView</code> çš„æ»šåŠ¨åŠ¨ç”»ç­‰ï¼‰éƒ½ä¼šè‡ªåŠ¨æš‚åœï¼Œä»è€ŒèŠ‚çœäº†å¤§é‡çš„æ€§èƒ½å¼€é”€ã€‚</p>
<p><strong>ç»“è®º</strong>ï¼š<code>TickerMode.of(context)</code> çš„ <code>enabled</code> çŠ¶æ€ï¼Œæˆä¸ºäº†ä¸€ä¸ªåˆ¤æ–­å½“å‰ Widget æ˜¯å¦åœ¨ <code>TabBarView</code> è¿™ç±»ç»„ä»¶ä¸­â€œå¯è§â€çš„ç»ä½³æŒ‡æ ‡ã€‚</p>
<p><code>TickerModePauseProvider</code> æ­£æ˜¯åˆ©ç”¨äº†è¿™ä¸€ç‚¹ï¼šå®ƒä¼šç›‘å¬ <code>TickerMode.getNotifier(context)</code>ï¼Œå½“ <code>TickerMode</code> è¢«ç¦ç”¨æ—¶ï¼Œå®ƒå°±ä¼šå‘å‡ºæš‚åœä¿¡å·ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ViewModel çš„æ··åˆåˆ¤æ–­æœºåˆ¶ä¸è‡ªå®šä¹‰ Pause</h2>
<h3 data-id="heading-10">æ··åˆåˆ¤æ–­æœºåˆ¶ (<code>PauseAwareController</code>)</h3>
<p><code>view_model</code> çš„å¼ºå¤§ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å•ä¸€çš„å¯è§æ€§åˆ¤æ–­ï¼Œè€Œæ˜¯å°†ä¸Šè¿°æ‰€æœ‰æœºåˆ¶ç»„åˆåœ¨äº†ä¸€èµ·ã€‚</p>
<p><code>ViewModelStateMixin</code> ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ª <code>PauseAwareController</code>ï¼Œå¹¶ä¸ºå…¶æ³¨å…¥å¤šä¸ª <code>PauseProvider</code>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">late</span> <span class="hljs-keyword">final</span> _pauseAwareController = PauseAwareController(
  providers: [
    _appPauseProvider,         <span class="hljs-comment">// åº”ç”¨åˆ‡åå°æ—¶æš‚åœ</span>
    _routePauseProvider,       <span class="hljs-comment">// è·¯ç”±è¢«è¦†ç›–æ—¶æš‚åœ</span>
    _TickerModePauseProvider,    <span class="hljs-comment">// TickerMode = false æ—¶æš‚åœ</span>
  ],
  <span class="hljs-comment">// ...</span>
);
</code></pre>
<p><code>PauseAwareController</code> çš„æ ¸å¿ƒé€»è¾‘éå¸¸æ¸…æ™°ï¼š</p>
<blockquote>
<p><strong>åªè¦æœ‰ä»»æ„ä¸€ä¸ª <code>provider</code> è¦æ±‚æš‚åœï¼Œ<code>ViewModel</code> å°±ä¼šè¿›å…¥æš‚åœçŠ¶æ€ã€‚</strong></p>
</blockquote>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// PauseAwareController å†…éƒ¨é€»è¾‘</span>
<span class="hljs-keyword">final</span> newPauseState = _providerPauseStates.values.any((isPaused) =&gt; isPaused);
</code></pre>
<p>è¿™æ„å‘³ç€ï¼Œæ— è®ºæ˜¯å› ä¸ºé¡µé¢è¢«è¦†ç›–ã€åº”ç”¨åˆ‡åˆ°åå°ï¼Œè¿˜æ˜¯å› ä¸ºæ‰€åœ¨çš„ Tab å˜æˆäº†éå½“å‰é¡¹ï¼Œ<code>ViewModel</code> éƒ½èƒ½å‡†ç¡®åœ°æš‚åœ <code>setState()</code> çš„æ‰§è¡Œã€‚</p>
<h3 data-id="heading-11">å·¥ä½œæµç¨‹</h3>
<ol>
<li>
<p><strong>è¿›å…¥æš‚åœ</strong>ï¼š</p>
<ul>
<li>æŸä¸ª <code>PauseProvider</code>ï¼ˆå¦‚ <code>PageRoutePauseProvider</code>ï¼‰å‘å‡º <code>true</code>ï¼ˆæš‚åœï¼‰ä¿¡å·ã€‚</li>
<li><code>PauseAwareController</code> æ£€æµ‹åˆ°åï¼Œå°† <code>ViewModel</code> æ ‡è®°ä¸º <code>isPaused = true</code>ã€‚</li>
<li>æ­¤åï¼Œå³ä½¿ <code>ViewModel</code> è°ƒç”¨ <code>notifyListeners()</code>ï¼Œ<code>ViewModelAttacher</code> ä¹Ÿä¼šæ‹¦æˆª <code>setState()</code>ï¼Œå¹¶æ ‡è®° <code>hasMissedUpdates = true</code>ã€‚UI ä¸ä¼šé‡å»ºã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¢å¤è¿è¡Œ</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰ <code>PauseProvider</code> éƒ½å‘å‡ºäº† <code>false</code>ï¼ˆæ¢å¤ï¼‰ä¿¡å·ã€‚</li>
<li><code>PauseAwareController</code> æ£€æµ‹åˆ°åï¼Œå°† <code>ViewModel</code> æ ‡è®°ä¸º <code>isPaused = false</code>ï¼Œå¹¶è§¦å‘ <code>onResume</code> å›è°ƒã€‚</li>
<li><code>ViewModelAttacher</code> åœ¨ <code>onResume</code> å›è°ƒä¸­æ£€æŸ¥åˆ° <code>hasMissedUpdates</code> ä¸º <code>true</code>ï¼Œäºæ˜¯æ‰§è¡Œä¸€æ¬¡ <code>setState()</code>ï¼Œå°†æ‰€æœ‰è¢«â€œæš‚åœâ€æœŸé—´çš„æ›´æ–°ä¸€æ¬¡æ€§åº”ç”¨åˆ° UI ä¸Šã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-12">è‡ªå®šä¹‰ PauseProvider</h3>
<p><code>PauseAwareController</code> çš„è®¾è®¡æ˜¯å®Œå…¨å¼€æ”¾çš„ã€‚ä½ å¯ä»¥å®ç°è‡ªå·±çš„ <code>ViewModelPauseProvider</code> æ¥åº”å¯¹ä»»ä½•ç‰¹æ®Šçš„æš‚åœé€»è¾‘ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>ConnectionPauseProvider</code>ï¼Œåœ¨ç½‘ç»œæ–­å¼€æ—¶æš‚åœæ‰€æœ‰ä¾èµ–ç½‘ç»œçš„ <code>ViewModel</code>ã€‚</p>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>åˆ›å»ºè‡ªå®šä¹‰ Provider</strong>ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionPauseProvider</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ViewModelPauseProvider</span> </span>{
  <span class="hljs-keyword">final</span> _controller = StreamController&lt;<span class="hljs-built_in">bool</span>&gt;.broadcast();
  
  ConnectionPauseProvider() {
    Connectivity().onConnectivityChanged.listen((status) {
      <span class="hljs-keyword">if</span> (status == ConnectivityResult.none) {
        _controller.add(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// ç½‘ç»œæ–­å¼€ï¼Œè¯·æ±‚æš‚åœ</span>
      } <span class="hljs-keyword">else</span> {
        _controller.add(<span class="hljs-keyword">false</span>); <span class="hljs-comment">// ç½‘ç»œæ¢å¤ï¼Œè¯·æ±‚æ¢å¤</span>
      }
    });
  }
  
  <span class="hljs-meta">@override</span>
  Stream&lt;<span class="hljs-built_in">bool</span>&gt; <span class="hljs-keyword">get</span> onPauseStateChanged =&gt; _controller.stream;
  
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> dispose() =&gt; _controller.close();
}
</code></pre>
</li>
<li>
<p><strong>æ·»åŠ åˆ° ViewModel</strong>ï¼š
ä½ å¯ä»¥é€šè¿‡ <code>ViewModelStateMixin</code> çš„ <code>addPauseProvider</code> æ–¹æ³•ï¼Œåœ¨ <code>initState</code> ä¸­åŠ¨æ€æ·»åŠ ä½ çš„è‡ªå®šä¹‰ Providerã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State</span>&lt;<span class="hljs-title">MyPage</span>&gt; <span class="hljs-title">with</span> <span class="hljs-title">ViewModelStateMixin</span>&lt;<span class="hljs-title">MyPage</span>&gt; </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> initState() {
    <span class="hljs-keyword">super</span>.initState();
    <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰çš„æš‚åœé€»è¾‘</span>
    addPauseProvider(ConnectionPauseProvider());
  }
  <span class="hljs-comment">// ...</span>
}
</code></pre>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥å°†ä»»ä½•ä¸šåŠ¡é€»è¾‘è½¬åŒ–ä¸º <code>ViewModel</code> çš„æš‚åœ/æ¢å¤æ¡ä»¶ï¼Œå®ç°é«˜åº¦çµæ´»å’Œç²¾-ç»†åŒ–çš„æ€§èƒ½ç®¡ç†ã€‚</p>
<hr/>
<h2 data-id="heading-13">æ€»ç»“ä¸æ¨è</h2>
<p><code>view_model</code> çš„ <code>Pause</code> æœºåˆ¶æä¾›äº†ä¸€å¥—å¼ºå¤§è€Œçµæ´»çš„è§£å†³æ–¹æ¡ˆ
ï¼Œå¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªèƒ½å¤Ÿæ™ºèƒ½ç®¡ç† Widget ç”Ÿå‘½å‘¨æœŸã€ä¼˜åŒ–æ€§èƒ½å¹¶ä¿æŒä»£ç æ•´æ´çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ï¼š</p>
<p><strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fview_model" target="_blank" title="https://pub.dev/packages/view_model" ref="nofollow noopener noreferrer">pub.dev/packages/viâ€¦</a> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI]]></title>    <link>https://juejin.cn/post/7575083657993830427</link>    <guid>https://juejin.cn/post/7575083657993830427</guid>    <pubDate>2025-11-22T11:39:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657993830427" data-draft-id="7575031395862872110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-22T11:39:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿†æ±Ÿå—"/> <meta itemprop="url" content="https://juejin.cn/user/4230576472602845"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ ä¸€å¥è¯è§£é‡Š SNI
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576472602845/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿†æ±Ÿå—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:39:32.000Z" title="Sat Nov 22 2025 11:39:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>SNI æ˜¯ TLS æ¡æ‰‹æ—¶ï¼Œå®¢æˆ·ç«¯æå‰å‘Šè¯‰æœåŠ¡å™¨ï¼šâ€æˆ‘æƒ³è®¿é—®çš„æ˜¯å“ªä¸€ä¸ªåŸŸåâ€œã€‚</strong></p>
<p>å®ƒçš„ä½œç”¨æ˜¯è®©æœåŠ¡å™¨åœ¨ <strong>TLS æ¡æ‰‹é˜¶æ®µå°±èƒ½çŸ¥é“è¦ç»™å“ªä¸ªåŸŸåçš„è¯ä¹¦</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ¯ ä¸ºä»€ä¹ˆéœ€è¦ SNIï¼Ÿ</h2>
<p>å› ä¸ºç°åœ¨å¾ˆå¤šç½‘ç«™æ˜¯ <strong>å¤šåŸŸåå…±äº«åŒä¸€ä¸ª IP</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">1.2.3.4 ä¸Šæ‰˜ç®¡äº†ï¼š
<span class="hljs-deletion">- api.a.com</span>
<span class="hljs-deletion">- img.a.com</span>
<span class="hljs-deletion">- pay.a.com</span>
</code></pre>
<p>å¦‚æœæ²¡æœ‰ SNIï¼š</p>
<p>å®¢æˆ·ç«¯è¿æ¥ <code>1.2.3.4:443</code> â†’ TLS æ¡æ‰‹å¼€å§‹<br/>
æœåŠ¡å™¨æ­¤æ—¶ <strong>ä¸çŸ¥é“ä½ æƒ³è®¿é—®å“ªä¸ªåŸŸåçš„è¯ä¹¦</strong><br/>
â†’ å°±æ²¡æ³•é€å¯¹è¯ä¹¦<br/>
â†’ å¯¼è‡´æ¡æ‰‹å¤±è´¥</p>
<p>æ‰€ä»¥ TLS æ‰©å±• â€œSNIâ€ å°±è¯ç”Ÿäº†ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§  SNI åœ¨ TLS æ¡æ‰‹é‡Œåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>TLS 1.2 / 1.3 éƒ½ä¸€æ ·ï¼ŒåŸºæœ¬æµç¨‹æ˜¯ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ClientHello:
<span class="hljs-bullet">    -</span> TLS Versions
<span class="hljs-bullet">    -</span> Cipher Suites
<span class="hljs-bullet">    -</span> Extensions:
<span class="hljs-bullet">        -</span> SNI = "api.example.com"   â† å°±æ˜¯è¿™é‡Œï¼
<span class="hljs-bullet">        -</span> ALPN (æ¯”å¦‚ h2/h3)
<span class="hljs-bullet">        -</span> â€¦
</code></pre>
<p>æœåŠ¡å™¨æ”¶åˆ° ClientHello åï¼Œçœ‹åˆ° SNIï¼š</p>
<pre><code class="hljs">å“¦ï¼Œä½ è®¿é—®çš„æ˜¯ api.example.comï¼
é‚£æˆ‘ç»™ä½ å‘ api.example.com çš„è¯ä¹¦
</code></pre>
<p>ç„¶åæ¡æ‰‹ç»§ç»­ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ”¥ SNI ä¸ â€œIP ç›´è¿ï¼ˆDNS Mappingï¼‰â€ æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ</h2>
<p>è¿™æ˜¯ä½ ç°åœ¨æœ€å…³å¿ƒçš„ä¸€ç‚¹ï¼š</p>
<p>ä½ åš DNS ä¼˜åŒ–æ—¶ä¼šæŠŠåŸŸåæ›¿æ¢æˆ IPï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//api.example.com/user</span>
â†’
https:<span class="hljs-comment">//203.107.1.1/user   ï¼ˆIPç›´è¿ï¼‰</span>
</code></pre>
<p>å¦‚æœä½  <em>ä¸åŠ  Host header</em>ï¼š</p>
<p>æœåŠ¡å™¨ä¼šè®¤ä¸ºï¼š</p>
<pre><code class="hljs">ä½ è¦è®¿é—® 203.107.1.1
é‚£æˆ‘å‘ç»™ä½ â€œ203.107.1.1â€å¯¹åº”çš„è¯ä¹¦ï¼ˆåŸºæœ¬ä¸å­˜åœ¨ï¼‰
â†’ TLS æ¡æ‰‹ç«‹å³å¤±è´¥
</code></pre>
<p>æ‰€ä»¥ä½ å¿…é¡»ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">req</span><span class="hljs-selector-class">.setValue</span>(<span class="hljs-string">"api.example.com"</span>, <span class="hljs-attribute">forHTTPHeaderField</span>: <span class="hljs-string">"Host"</span>)
</code></pre>
<p>âš ï¸ æ›´é‡è¦çš„æ˜¯ï¼š<br/>
<strong>â€œHostâ€ header ä¼šè¢« URLSession è‡ªåŠ¨ç”¨ä½œ SNI çš„åŸŸå</strong>ã€‚</p>
<p>æ‰€ä»¥ TLS æ¡æ‰‹ä¼šå˜æˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">SNI</span> = <span class="hljs-string">"api.example.com"</span>
</code></pre>
<p>â†’ å³ä½¿ä½ æ˜¯è¿çš„ IPï¼ŒTLS ä»ç„¶èƒ½æ‹¿åˆ°å¯¹åº”çš„åŸŸåè¯ä¹¦<br/>
â†’ æ¡æ‰‹æˆåŠŸ</p>
<p><strong>è¿™å°±æ˜¯ IP ç›´è¿ + HTTPS èƒ½å·¥ä½œçš„åŸå› ã€‚</strong></p>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ç”¨ä¸€å¥æ›´å·¥ç¨‹åŒ–çš„è¯æ€»ç»“ï¼š</h2>
<blockquote>
<p><strong>SNI å°±æ˜¯ TLS æ¡æ‰‹é˜¶æ®µçš„ Host headerã€‚</strong><br/>
å®¢æˆ·ç«¯ä¼šåœ¨ ClientHello é‡ŒæŠŠè¿™ä¸ªåŸŸåå‘Šè¯‰æœåŠ¡å™¨ï¼Œè®©æœåŠ¡å™¨çŸ¥é“å‘å“ªä¸€å¥—è¯ä¹¦ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é£ä¹¦æ²¡èµ° AI Coding è·¯çº¿ï¼Œå®ƒåšå¥½äº†å¦ä¸€ç§ AI åº”ç”¨æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7575083657993764891</link>    <guid>https://juejin.cn/post/7575083657993764891</guid>    <pubDate>2025-11-22T10:34:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657993764891" data-draft-id="7575047994682064947" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é£ä¹¦æ²¡èµ° AI Coding è·¯çº¿ï¼Œå®ƒåšå¥½äº†å¦ä¸€ç§ AI åº”ç”¨æ¨¡å¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-22T10:34:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ³½Eze"/> <meta itemprop="url" content="https://juejin.cn/user/3806973845045964"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é£ä¹¦æ²¡èµ° AI Coding è·¯çº¿ï¼Œå®ƒåšå¥½äº†å¦ä¸€ç§ AI åº”ç”¨æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3806973845045964/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ³½Eze
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T10:34:17.000Z" title="Sat Nov 22 2025 10:34:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æƒ³æ­ä¸€ä¸ª AI åº”ç”¨ï¼Œå°±ä¸€å®šè¦èµ° Coding è¿™æ¡è·¯å—ï¼Ÿ</p>
<p>æœ€è¿‘æˆ‘å¹²äº†ä»¶äº‹ï¼š</p>
<p>åªç”¨äº†ä¸€ä¸ªé£ä¹¦å¤šç»´è¡¨æ ¼ï¼ŒæŠŠä¸€å † AI æ•ˆç‡äº§å“çš„äº‹ç»™åŠäº†ã€‚</p>
<p>èµ·å› æ˜¯é£ä¹¦å¤šç»´è¡¨æ ¼å…¨é¢ä¸Šçº¿äº†æ–°åŠŸèƒ½ï¼Œ<strong>ã€Œåº”ç”¨æ¨¡å¼ã€å’Œã€ŒAI å·¥ä½œæµã€</strong>ã€‚æˆ‘å°è¯•ç”¨å®ƒé›¶ä»£ç æ­äº†ä¸€å¥—ä¸ªäººæ•ˆç‡å·¥ä½œå°ï¼Œæ•ˆæœæ„å¤–å¾—å¥½ã€‚</p>
<p>å…ˆçœ‹ä¸œè¥¿ï¼Œè¿™å¥—ç³»ç»Ÿé•¿è¿™æ ·ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc0cacaac79e404497c9b557b0569b29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=DsBFnWRabPZ1vy5P%2FadyEsWHx30%3D" alt="img" loading="lazy"/></p>
<p>åœ¨é£ä¹¦é‡Œå‘æ¡æ¶ˆæ¯ï¼ŒAI å°±èƒ½è‡ªåŠ¨è¯†åˆ«æ„å›¾ï¼ŒæŠŠå®ƒåˆ†ç±»æˆå¾…åŠã€ç¬”è®°æˆ–ç¨åè¯»ï¼›</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15aac6c4698c45278d2db7ae9d8f3851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=DatYGEhpgXMYzNaGtjqMvXMr7bA%3D" alt="img" loading="lazy"/></p>
<p>ä¸¢ä¸ªå…¬ä¼—å·é“¾æ¥è¿›å»ï¼Œå®ƒä¸ä»…èƒ½è‡ªåŠ¨æ‘˜è¦ï¼Œè¿˜èƒ½æ ¹æ®æˆ‘çš„å£å‘³æ‰“åˆ†æ’åºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3e022e49d284e8d959a8a0fdb24618a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=pi9AXrkeu7cBXn025lVVKRU7SOg%3D" alt="img" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c8cdaeec2b74c1eb469c5f59ec794f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=AokTplOpzCMOuZbBN0%2F8z49GM2Y%3D" alt="img" loading="lazy"/></p>
<p>ä»¥å‰å¿…é¡»å†™ä»£ç æ‰èƒ½å®ç°çš„ AI ç©æ³•ï¼Œç°åœ¨æ­ç§¯æœ¨ä¸€æ ·å°±èƒ½æå®šã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä¼šæ‹†è§£è¿™å¥— AI ç³»ç»Ÿçš„å®Œæ•´æ­å»ºæ¶æ„ï¼Œå¼€æºæ•´ä¸ªå®ç°æ•™ç¨‹ï¼Œåº”è¯¥å¯¹ä½ ç”¨é£ä¹¦æ­å»º AI åº”ç”¨æœ‰æ‰€å¯å‘ã€‚</p>
<h2 data-id="heading-0">ğŸ‘‰ è¿™å¥— AI åº”ç”¨é•¿ä»€ä¹ˆæ ·</h2>
<p>å…ˆè¯´æ•´ä½“æ¶æ„ï¼Œè¿™è¿™å¥—ç³»ç»Ÿä¹‹æ‰€ä»¥èƒ½é›¶ä»£ç å®ç°ï¼Œæ˜¯å› ä¸ºå®ƒæŠŠå¤æ‚çš„è½¯ä»¶æ¶æ„ï¼Œç®€åŒ–æˆäº†é£ä¹¦é‡Œçš„ 4 ä¸ªæ¨¡å—ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f2cb4fa69a450390aa1df2cf2896ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=P09cp0y%2F7dzuOV9CQCObiPskOzw%3D" alt="img" loading="lazy"/></p>
<p><strong>1ï¼‰å…¥å£å±‚ï¼ˆé£ä¹¦æ¶ˆæ¯ï¼‰ï¼šåƒèŠå¤©ä¸€æ ·ä¸‹è¾¾æŒ‡ä»¤ï¼š</strong></p>
<p>ä¸ç”¨å¼€å‘ä¸“é—¨çš„å¯¹è¯å¼ AIã€‚</p>
<p>é€šè¿‡è‡ªåŠ¨ç”Ÿæˆçš„é£ä¹¦æœºå™¨äººï¼ˆç³»ç»Ÿè‡ªå¸¦ï¼‰ï¼Œæˆ‘å¯ä»¥ç›´æ¥ç»™å®ƒå‘è¯­éŸ³ã€æ–‡å­—ã€é“¾æ¥ã€‚æ˜¯æ•´ä¸ªç³»ç»Ÿçš„â€œè€³æœµâ€ï¼Œè´Ÿè´£æ¥æ”¶ä¸€åˆ‡æ‚ä¹±çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c835d6f5cd394106b8b94ab8d28d4fcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=gcVA8fcv2qs9hwuMr4vDcrKNoUM%3D" alt="img" loading="lazy"/></p>
<p><strong>2ï¼‰å¤§è„‘å±‚ï¼ˆAI å·¥ä½œæµï¼‰ï¼šæ‰¿æ‹…æ•´ä¸ªç³»ç»Ÿçš„å¤„ç†é€»è¾‘ã€‚</strong></p>
<p>è¿™æ˜¯æ ¸å¿ƒã€‚æˆ‘é…ç½®äº†ä¸€ä¸ª AI å·¥ä½œæµã€‚</p>
<p>å®ƒèƒ½åœ¨æ”¶åˆ°æ¶ˆæ¯åï¼Œè¿›è¡Œæ„å›¾è¯†åˆ«ï¼šæ˜¯å¾…åŠï¼Ÿæ˜¯ç¬”è®°ï¼Ÿè¿˜æ˜¯æ–‡ç« ï¼Ÿç„¶åè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ï¼Œåˆ†å‘ç»™ä¸‹æ¸¸ã€‚</p>
<p>ä¹Ÿå¯ä»¥é…ç½® Agent èŠ‚ç‚¹ï¼Œå»è°ƒç”¨ MCP å·¥å…·ï¼ŒæŒ‰ Prompt ç”Ÿæˆæ•°æ®ï¼Œä¹Ÿèƒ½è¯»å†™å¤šç»´è¡¨æ ¼ã€è§¦å‘æ¶ˆæ¯é€šçŸ¥ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c4e3101f2e043efb7191ba0c011a339~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=FVzI%2FyGuZuH%2F4sXljL4fTS%2FH8xE%3D" alt="img" loading="lazy"/></p>
<p><strong>3ï¼‰è®°å¿†å±‚ï¼ˆå¤šç»´è¡¨æ ¼ï¼‰ï¼šæœ€çœå¿ƒçš„â€œæ•°æ®åº“â€</strong></p>
<p>è¿™é‡Œæœ‰æ­å»º AI åº”ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ€å‡ºè‰²çš„è®¾è®¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f8ae2c8a71f4a32933fadd45bcf4cd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=3GgQT5z0iX8ppvWzfWTxrFD%2FWik%3D" alt="img" loading="lazy"/></p>
<p>å¤šç»´è¡¨æ ¼ = AI åº”ç”¨çš„æ•°æ®åº“ã€‚</p>
<p>è¿‡å»å†™ä»£ç ï¼Œä½ å¾—è‡ªå·±æ­å»º MySQLã€è®¾è®¡å­—æ®µã€‚ç°åœ¨ï¼Œä½ åªéœ€è¦å»ºä¸€å¼ è¡¨æ ¼ã€‚</p>
<p>ç”¨æˆ·æ—¢å¯ä»¥æ–°å»ºå¤šç»´è¡¨æ ¼ï¼›ä¹Ÿå¯ä»¥åœ¨å·²æœ‰ä¸šåŠ¡è¡¨çš„åŸºç¡€ä¸Šï¼Œæ”¹é€  AI å·¥ä½œæµä¸åº”ç”¨ç•Œé¢ã€‚</p>
<p>å¹¶ä¸” AI å·¥ä½œæµèƒ½è·¨å¤šå¼ å¤šç»´è¡¨æ ¼è¿›è¡Œæ“ä½œã€‚</p>
<blockquote>
<p>åœ¨æœ¬æ–‡ Case ä¸­ï¼Œå¾…åŠã€ç¬”è®°ã€ç¨åè¯»ï¼Œåˆ†å±äºä¸åŒè¡¨ï¼Œé€šè¿‡ AI åˆ†ç±»èŠ‚ç‚¹ï¼Œè‡ªåŠ¨åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„å…¥åº“ä½ç½®</p>
</blockquote>
<p><strong>4ï¼‰äº¤äº’å±‚ï¼ˆåº”ç”¨æ¨¡å¼ï¼‰ï¼šæŠŠè¡¨æ ¼å˜æˆ App</strong></p>
<p>é¢å¯¹æ™®é€šç”¨æˆ·ã€å…¬å¸ä¸šåŠ¡æ¥è¯´ï¼Œè¿™æ˜¯æœ¬æ¬¡æ›´æ–°çš„é‡å¤´æˆã€‚</p>
<p>å¤šç»´è¡¨æ ¼åº”ç”¨æ¨¡å¼â€”â€”èƒ½å¤Ÿç”¨æ¥é›¶é—¨æ§›æ­å»ºä¸šåŠ¡åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4496337a057049b0b7acd76593479054~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=zToZppgJKoj973KSTR%2F4m1vyqC8%3D" alt="img" loading="lazy"/></p>
<p>æœ‰äº†æ•°æ®åï¼Œæˆ‘ä»¬ä¸ç”¨å†å¯¹ç€æ¯ç‡¥çš„è¡¨æ ¼çœ‹æ•°æ®äº†ã€‚å¼€å¯â€œåº”ç”¨æ¨¡å¼â€ï¼Œè¡¨æ ¼ç¬é—´å˜èº«æˆä¸€ä¸ªå¯è§†åŒ–çš„ <strong>SaaS ç•Œé¢</strong>ï¼ˆå³å¼€å¤´çš„æ•ˆç‡å·¥ä½œå°ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e99dcb1fbf00410a9f440da708c31a1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=MCYJIu3Q%2B93DhUwUrBz8vwT2DCw%3D" alt="img" loading="lazy"/></p>
<p>æ”¯æŒç»„ä»¶æ‹–æ‹‰æ‹½ã€ç¼©æ”¾ï¼Œè‡ªå®šä¹‰ç³»ç»Ÿçš®è‚¤ç­‰é…ç½®ï¼ˆBTWï¼šå¯¹äºä¼ä¸šç”¨æˆ·æ¥è¯´ï¼Œèƒ½èŠ‚çœå¾ˆå¤šè½¯ä»¶å¼€å‘é¡¹ç›®ï¼‰</p>
<p>æ•´ä¸ª AI åº”ç”¨æ¨¡å¼çš„é“¾æ¡ï¼Œéƒ½åœ¨é£ä¹¦å†…éƒ¨é—­ç¯ï¼š</p>
<p>ä¸éœ€è¦ API å¯¹æ¥ã€ä¸éœ€è¦è®¤è¯ï¼Œä¸ç”¨å¼€å‘ã€‚</p>
<p>å¯¹äºä¸ªäººçŸ¥è¯†å·¥ä½œè€…ã€ä¼ä¸šæ¥è¯´ï¼Œ<strong>è¡¨æ ¼å³åº”ç”¨</strong>ã€‚</p>
<p>åœ¨å¯¹å£çš„éœ€æ±‚åœºæ™¯ä¸­ï¼ˆä¸ªäººçŸ¥è¯†ç®¡ç†ã€ä¼ä¸š CRM ç³»ç»Ÿç­‰ï¼‰ï¼Œæ¯”èµ· AI Codingï¼Œæ˜¯æ–¹ä¾¿ç»´æŠ¤å¤ªå¤šäº†ã€‚</p>
<h2 data-id="heading-1">ğŸ“ å¼€å§‹æ­å»º</h2>
<p>åº”ç”¨æ¨¡å¼çš„ä»·å€¼ï¼Œæ˜¯æŠŠé›¶æ•£çš„æ•°æ®è¡¨å˜æˆä¸€ä¸ªå®Œæ•´çš„ä¸šåŠ¡ç³»ç»Ÿã€‚è¿™å¥—ä¸ªäººæ•ˆç‡ç³»ç»Ÿï¼Œæ€»å…±åšäº† 4 é¡¹èƒ½åŠ›ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7e54bc7e9a445b49ea9590b506d6156~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=oiID%2Bk%2F8QXyIkusyMXYukvqjcXw%3D" alt="img" loading="lazy"/></p>
<ol>
<li><strong>å‰ç½®ç¯èŠ‚ï¼š</strong> æ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œå¯¹æ„å›¾è¿›è¡Œåˆ†ç±»</li>
<li><strong>ç¨åè¯»ï¼š</strong> é“¾æ¥å†…å®¹è®¿é—®ä¸ AI ä¿¡æ¯æå–</li>
<li><strong>ä¸ªäººå¾…åŠï¼š</strong> æ‹†åˆ†ä»»åŠ¡ä¿¡æ¯ã€æ—¥æœŸ</li>
<li><strong>ç¬”è®°ï¼š</strong> æ€»ç»“æ ‡é¢˜ï¼Œå…¥åº“ç¬”è®°å†…å®¹</li>
</ol>
<p>è€Œåœ¨æ­å»ºè¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°±è¦è§£å†³æ¶ˆæ¯æ¥æ”¶ä¸ä»»åŠ¡åˆ’åˆ†çš„é—®é¢˜ï¼š</p>
<h3 data-id="heading-2">1ï¸âƒ£ ç»Ÿä¸€å¯¹è¯å…¥å£ï¼Œæ™ºèƒ½åˆ†ç±»ç”¨æˆ·æ„å›¾</h3>
<p>éœ€è¦åœ¨ä¸€ä¸ªé£ä¹¦å¤šç»´è¡¨æ ¼ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªå·¥ä½œæµã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6771d48f1f6347b7a1841d43d19d281e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=Jqs1z0tH5Cu5ics7kqyudTYMsLA%3D" alt="img" loading="lazy"/></p>
<p>æ‰€æœ‰å†…å®¹éƒ½è¦é€šè¿‡ç»Ÿä¸€çš„å¯¹è¯å…¥å£ï¼Œæ‰€ä»¥å¢åŠ ä¸€ä¸ªæœºå™¨äººï¼Œç”¨äºæ¥å‘ä¿¡æ¯ï¼š</p>
<p>1ï¼‰ é€‰æ‹©ã€Œæ¥å—åˆ°é£ä¹¦æ¶ˆæ¯æ—¶ã€èŠ‚ç‚¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb3b23d58aa4367b4efbcfcddcce181~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=Y8udzcEPTlWVdAzFoDQ05w6Rtio%3D" alt="img" loading="lazy"/></p>
<ul>
<li>ä¸ªäººä½¿ç”¨æ—¶ï¼Œé…ç½®æ¶ˆæ¯çš„æ¥æ”¶æ–¹å¼é€‰æ‹©ä¸ºã€Œå•èŠã€ï¼Œé€‰æ‹©èŠå¤©çš„ç”¨æˆ·ä¸ºè‡ªå·±å³å¯ã€‚</li>
<li>å¦‚æœæ˜¯å›¢é˜Ÿä½¿ç”¨ï¼Œåˆ™æ¶ˆæ¯çš„æ¥æ”¶æ–¹å¼é€‰æ‹©ã€Œç¾¤ç»„ã€ï¼Œé€‰æ‹©å¯¹åº”æ¥å‘æ¶ˆæ¯çš„èŠå¤©ç¾¤ï¼ˆç¾¤é‡Œä¸€å®šè¦æŠŠæœºå™¨äººæ‹‰è¿›å»ï¼‰ã€‚</li>
</ul>
<p>æ¥å—æ¶ˆæ¯çš„æœºå™¨äººæ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</p>
<p>é€šè¿‡åœ¨é£ä¹¦èŠå¤©é‡Œï¼Œæœç´¢å½“å‰å¤šç»´æ•°æ®è¡¨çš„åç§°ï¼ˆå› ä¸ºæ˜¯è‡ªåŠ¨åŒåçš„ï¼‰ï¼Œå°±å¯ä»¥æ‰¾åˆ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/da579d11c4764077b7fe2aed0027dbdd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=7MbNHosz90Rl73Au6ON1LWVCEYI%3D" alt="img" loading="lazy"/></p>
<p>ç„¶åå›åˆ°å·¥ä½œæµé…ç½®ï¼Œæ·»åŠ ã€ŒAI åˆ†ç±»ã€èŠ‚ç‚¹ï¼Œåˆ©ç”¨ AI å¯¹å‘é€çš„æ¶ˆæ¯è¿›è¡Œæ„å›¾è¯†åˆ«ï¼Œåˆ¤æ–­æ¶ˆæ¯çš„ç±»å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ef1da1cbf824d06ac894ce40302325b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=e00GDZ1VAWp2gA3PjsVCvDTMDq8%3D" alt="img" loading="lazy"/></p>
<p>è®¾ç½®å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8e51fddb7454290b90061cddf4ccf1e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=2EyH3wr6wsz34T%2BWkJnVao9v6l4%3D" alt="img" loading="lazy"/></p>
<ol>
<li>å¼•ç”¨ã€Œæ¥æ”¶åˆ°é£ä¹¦æ¶ˆæ¯æ—¶-æ¶ˆæ¯å†…å®¹ã€</li>
<li>åœ¨åˆ†ç±»è§„åˆ™ä¸­ï¼Œå…ˆæ·»åŠ  3 ä¸ªåˆ†ç±»ç±»å‹ï¼šç¨åè¯»æ–‡ç« ã€å¾…åŠäº‹é¡¹ã€ç¬”è®°ï¼Œå¹¶å¡«å†™è¯¦ç»†æè¿°ï¼Œå¸®åŠ© AI è¿›è¡Œå‡†ç¡®åˆ†ç±»ã€‚</li>
</ol>
<p>å¯ä»¥é€‚å½“å‚è€ƒæˆ‘çš„æç¤ºè¿›è¡Œä¼˜åŒ–è°ƒæ•´ï¼š</p>
<pre><code class="hljs">ç¨åè¯»æ–‡ç« ï¼šæ¶ˆæ¯å†…å®¹æ„å›¾æ˜¯å°†æ–‡ç« ï¼ˆé€šå¸¸æ˜¯ç½‘é¡µé“¾æ¥ï¼‰æ”¶è—èµ·æ¥ï¼Œä»¥ä¾¿åœ¨ç¨åæœ‰ç©ºé—²æ—¶é—´æ—¶è¿›è¡Œæ·±åº¦é˜…è¯»ã€å­¦ä¹ æˆ–æµè§ˆã€‚
å¾…åŠäº‹é¡¹ï¼šæ¶ˆæ¯å†…å®¹æ„å›¾æ˜¯éœ€è¦å®Œæˆçš„ä»»åŠ¡
ç¬”è®°ï¼šæ¶ˆæ¯å†…å®¹æ„å›¾æ˜¯è®°å½•çš„ç¬”è®°ã€‚
</code></pre>
<h4 data-id="heading-3">é™„ï¼šä¹Ÿå¯ä»¥è®© Agent è‡ªåŠ¨æ­å»ºå·¥ä½œæµ</h4>
<p>é™¤äº†è·Ÿç€æ•™ç¨‹ä¸€æ­¥æ­¥æ­å»ºå¤–ï¼Œä¹Ÿå¯ä»¥ã€Œé€šè¿‡ AI åˆ›å»ºã€å·¥ä½œæµã€‚è‡ªåŠ¨åˆ›å»ºçš„æ•ˆç‡ä¸é”™ï¼Œèƒ½å¤Ÿå‡†ç¡®é…ç½®ç¬¦åˆéœ€æ±‚çš„èŠ‚ç‚¹ï¼Œå¹¶å®Œæˆå‚æ•°ä¸æç¤ºè¯é…ç½®ã€‚</p>
<p>åŸºæœ¬å¯ä»¥ä»£ç†å®Œæˆ 70% çš„é…ç½®é‡ï¼Œéƒ¨åˆ†ç»†èŠ‚å½“ç„¶æœ€å¥½äººå·¥å†é…ç½®ç»†åŒ–ä¸‹ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ã€Œé€šè¿‡ AI åˆ›å»ºã€çš„è¿‡ç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0f4b1b3d6cf4aab9d9333ce1233258e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=Dhzv9LCfaGgou8%2Bie6vOkgCgK0U%3D" alt="Frame 12.png" loading="lazy"/></p>
<p>â€‹â€‹</p>
<h3 data-id="heading-4">2ï¸âƒ£ åˆ†åˆ«é…ç½® AI å­æµç¨‹</h3>
<p>æ•´ä¸ªå·¥ä½œæµä¸­ï¼Œæ¶‰åŠåˆ°ä¸‰ä¸ªä¸åŒçš„ AI æµç¨‹ï¼šç¨åè¯»ã€å¾…åŠã€ç¬”è®°ã€‚</p>
<p>è¿™é‡Œï¼Œä»¥æˆ‘â€œç¨åè¯»æ–‡ç« â€çš„æ”¶é›†ä¸ºä¾‹ï¼Œè¿›è¡Œè¯¦ç»†è¯´æ˜ï¼Œæ–¹ä¾¿ä½ ç†è§£å¦‚ä½•åœ¨å·¥ä½œæµä¸­ï¼Œé…ç½® Agent èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-5">1ï¼‰é…ç½®ç¨åè¯»è¦ä¿å­˜çš„ä¿¡æ¯</h4>
<p>åœ¨è¿™ä»½é£ä¹¦å¤šç»´è¡¨æ ¼ï¼Œæ ¹æ®ç¨åè¯»çš„ç®¡ç†éœ€è¦ï¼Œè¡¨çš„å­—æ®µå¦‚ä¸‹ï¼š</p>

































<table><thead><tr><th><strong>æ ‡é¢˜</strong></th><th>æ–‡æœ¬æ ¼å¼ï¼Œæ˜¾ç¤ºæ–‡ç« çš„åç§°</th></tr></thead><tbody><tr><td><strong>æ‘˜è¦</strong></td><td>æ ¹æ®å…·ä½“å†…å®¹ï¼Œæ€»ç»“æ ¸å¿ƒä¸»æ—¨</td></tr><tr><td><strong>ä½œè€…</strong></td><td>ä½œè€…åç§°</td></tr><tr><td><strong>å¹³å°</strong></td><td>æ‰€åœ¨çš„ç½‘ç«™å¹³å°åç§°</td></tr><tr><td><strong>å‘å¸ƒæ—¥æœŸ</strong></td><td>æ–‡ç« çš„å‘å¸ƒæ—¥æœŸ</td></tr><tr><td><strong>æ˜¯å¦é˜…è¯»</strong></td><td>é˜…è¯»çŠ¶æ€ï¼Œæ”¶è—çš„é»˜è®¤æ€ä¸ºâ€œå¾…è¯»â€</td></tr><tr><td><strong>é“¾æ¥</strong></td><td>è¶…é“¾æ¥æ ¼å¼ï¼Œæ˜¾ç¤ºé“¾æ¥ï¼Œå¯ç‚¹å‡»è·³è½¬å…·ä½“çš„é¡µé¢</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2462cb790fbb4b8e8d45b859d9a6615d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=3EJ1NZ0fzlvSSQRWvqiCYF%2BPzN4%3D" alt="img" loading="lazy"/></p>
<p>å½“ç„¶ï¼Œé™¤äº†è¿™äº›åŸºç¡€å­—æ®µï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œå¢åŠ æ›´å¤šå®šåˆ¶åŒ–çš„å­—æ®µã€‚</p>
<p>æ¯”å¦‚ï¼Œæ¨èè¯„åˆ†ï¼ˆç»“åˆä¸ªäººç”»åƒã€æ–‡ç« ä¿¡æ¯å¯¹é‡è¦æ€§è¿›è¡Œæ‰“åˆ†ï¼‰ã€é˜…è¯»æ—¶é•¿ï¼ˆæ ¹æ®æ–‡ç« å­—æ•°ã€ä¿¡æ¯å¤æ‚åº¦é¢„æµ‹é˜…è¯»æ—¶é•¿ï¼‰ã€‚</p>
<h4 data-id="heading-6">2ï¼‰è·å–æ¶ˆæ¯ä¸­çš„å†…å®¹</h4>
<p>æ¥ä¸‹æ¥ï¼Œå›åˆ°åˆšæ‰çš„å·¥ä½œæµä¸­ï¼Œæ­å»ºé€šè¿‡ AI è·å– URL ä¸­å…³é”®ä¿¡æ¯çš„æµç¨‹ã€‚</p>
<p>å…·ä½“çš„æ“ä½œæ­¥éª¤æ˜¯è¿™æ ·çš„ï¼Œ</p>
<p>åœ¨ã€Œç¨åè¯»æ–‡ç« ã€çš„åˆ†æ”¯ä¸­ï¼Œåˆ›å»º AI Agent èŠ‚ç‚¹ï¼Œå¹¶ä¸”åœ¨å·¥å…·é€‰æ‹©ã€Œè¯»å– URL é“¾æ¥å†…å®¹ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d340f4d3bcb475784f5128811fba9b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=jJFd0tFiMRnw3gj%2BuftW1j3%2BAV8%3D" alt="img" loading="lazy"/></p>
<ol>
<li>Prompt ï¼šè®© AI æ˜ç¡®éœ€è¦ä»é“¾æ¥ä¸­æå–å“ªäº›ä¿¡æ¯ä»¥åŠä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œå¯ç›´æ¥è¾“å…¥ä¸‹é¢çš„æç¤ºè¯ï¼Œå…¶ä¸­<code>{{ }}</code>å†…å®¹éœ€è¦å•ç‹¬å¼•ç”¨</li>
</ol>
<pre><code class="hljs language-js" lang="js">è¯·é˜…è¯»å¹¶è§£æ{{å¼•ç”¨ã€Œæ¥æ”¶åˆ°é£ä¹¦æ¶ˆæ¯æ—¶-æ¶ˆæ¯å†…å®¹ã€}}ä¸­çš„ <span class="hljs-variable constant_">URL</span> ç½‘é¡µå†…å®¹ï¼ŒæŒ‰ä»¥ä¸‹æ ¼å¼æå–å…³é”®ä¿¡æ¯ï¼Œæ¯é¡¹ä¿¡æ¯å•ç‹¬ä¸€è¡Œï¼š 
æ ‡é¢˜ï¼š[ç½‘é¡µæ ‡é¢˜] 
ä½œè€…ï¼š[ä½œè€…åç§°] 
å¹³å°ï¼š[ç½‘ç«™/å¹³å°åç§°] 
å‘å¸ƒæ—¥æœŸï¼š[yyyy-mm-dd] 
æ‘˜è¦ï¼š[æ¦‚æ‹¬æ ¸å¿ƒå†…å®¹] é“¾æ¥ï¼š[æ¶ˆæ¯ä¸­çš„é“¾æ¥] 

è¦æ±‚ï¼š
<span class="hljs-number">1.</span> ä¸¥ç¦æ·»åŠ ä»»ä½•é¢å¤–è¯´æ˜ã€åˆ†ææˆ–æ ¼å¼æ ‡è®° 
<span class="hljs-number">2.</span> ä»…è¾“å‡ºä¸Šè¿°<span class="hljs-number">5</span>è¡Œå†…å®¹ï¼Œä¸è¦çœç•¥æˆ–åˆå¹¶ä»»ä½•ä¸€è¡Œ 
<span class="hljs-number">3.</span> æ¯æ¡ä¿¡æ¯å¿…é¡»çœŸå®å‡†ç¡®ï¼Œæ— æ³•ç¡®å®šæ—¶ä¸€å¾‹æ ‡æ³¨â€œæœªçŸ¥â€
</code></pre>
<ol>
<li>è¾“å‡ºå­—æ®µï¼šå¼€å¯ã€Œè‡ªå®šä¹‰è¾“å‡ºæ ¼å¼ã€ï¼Œæ·»åŠ  æ ‡é¢˜ã€ä½œè€…ã€å¹³å°ã€å‘å¸ƒæ—¥æœŸã€æ‘˜è¦ã€é“¾æ¥ çš„æ•°æ®å­—æ®µï¼Œé€‰æ‹©åˆé€‚çš„ç±»å‹ï¼Œæ–¹ä¾¿åç»­çš„æ•°æ®å†™å…¥ã€‚</li>
</ol>
<h4 data-id="heading-7">3ï¼‰æŠŠæ•°æ®æ·»åŠ åˆ°é£ä¹¦å¤šç»´è¡¨æ ¼</h4>
<p>æ·»åŠ èŠ‚ç‚¹ã€Œæ–°å¢è®°å½•ã€ï¼Œé€‰æ‹©éœ€è¦å†™å…¥çš„æ•°æ®è¡¨ï¼Œè®¾ç½®æ¯ä¸ªå­—æ®µçš„æ•°æ®æ¥æºï¼Œå¦‚ä¸‹è¿›è¡Œé…ç½®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36461a8642b245c3a80e9cd9020dd02b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=NpEw3g6hirFX6irGJH0bSuH0Uls%3D" alt="img" loading="lazy"/></p>
<p>è¿™ä¸€æ­¥çš„ç›®çš„ï¼Œå°±æ˜¯æŠŠä¹‹å‰ Agent è·å–åˆ°çš„ä¿¡æ¯ï¼Œæ·»åŠ åˆ°æˆ‘ä»¬çš„ç¨åè¯»å¤šç»´è¡¨æ ¼ä¸­ã€‚</p>
<h4 data-id="heading-8">4ï¼‰ç”¨æœºå™¨äººæ¶ˆæ¯ï¼Œé€šçŸ¥ AI å·¥ä½œæµç»“æœ</h4>
<p>æœ€åï¼Œä¸ºäº†èƒ½åœ¨å‘æ¶ˆæ¯åï¼Œç›´æ¥çŸ¥é“è¿™äº›æ¶ˆæ¯æ˜¯å¦è¢«æ­£ç¡®çš„è®°å½•ï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸€ä¸ªè‡ªåŠ¨é€šçŸ¥ã€‚</p>
<p>å¯ä»¥é€šè¿‡å¼•ç”¨ AI åˆ†ç±»çš„ä¿¡æ¯ï¼Œå°±èƒ½å®ç°ä¸€ä¸ªé€šçŸ¥èŠ‚ç‚¹ï¼Œè¿”å›ä¸åŒç±»å‹ä»»åŠ¡çš„çŠ¶æ€ç»“æœã€‚</p>
<p>æ‰€ä»¥åœ¨ 3 ä¸ªåˆ†æ”¯ä¹‹åï¼Œæ·»åŠ ç»Ÿä¸€çš„ã€Œå‘é€é£ä¹¦æ¶ˆæ¯ã€èŠ‚ç‚¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba91dae3c2a449eb824fccc0657087a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=8PUZp9qLZkaVhnbu47Av6rEZdq4%3D" alt="img" loading="lazy"/></p>
<ul>
<li>é€‰æ‹©åœºæ™¯ï¼šå›å¤ç¬¬ 1 æ­¥æ¥æ”¶åˆ°çš„æ¶ˆæ¯</li>
<li>æ¶ˆæ¯ç±»å‹ï¼šå¯é€‰æ‹©æ™®é€šæ¶ˆæ¯æˆ–è€…å¡å‘æ¶ˆæ¯</li>
<li>é…ç½®å‘é€çš„æ¶ˆæ¯å†…å®¹ï¼š<code>ã€å¼•ç”¨AIåˆ†ç±»-åŒ¹é…åˆ†ç±»ã€‘å·²è®°å½•</code></li>
</ul>
<p>å¦å¤–ï¼Œã€Œå¾…åŠäº‹é¡¹ã€å’Œã€Œç¬”è®°ã€ä¹Ÿå¯ä»¥åœ¨å„è‡ªçš„å­åˆ†æ”¯é‡Œï¼Œå‚è€ƒä»¥ä¸Šæµç¨‹é…ç½®ã€‚</p>
<p>æ•´ä½“å®Œæˆåï¼Œå°±å¯ä»¥ç‚¹å‡»ã€ä¿å­˜å¹¶å¯ç”¨ã€‘ã€‚</p>
<p>è‡³æ­¤ï¼Œåå°çš„è‡ªåŠ¨åŒ–æµç¨‹å‡å·²å®Œæˆï¼Œæ­¤æ—¶å·²ç»å¯ä»¥å»ç»™æœºå™¨äººå‘æ¶ˆæ¯ï¼Œè‡ªåŠ¨è®°å½•ç¨åè¯»ã€å¾…åŠå’Œç¬”è®°äº†ã€‚</p>
<h2 data-id="heading-9">ğŸ‰ æœ€åï¼Œæ­ä¸€ä¸ªåº”ç”¨ç•Œé¢</h2>
<p>è¿˜è®°å¾—å¼€å¤´çš„ä¸ªäººæ•ˆç‡å·¥ä½œå°ç•Œé¢å—ï¼Ÿ</p>
<p>é‚£æ˜¯é€šè¿‡é£ä¹¦åº”ç”¨æ¨¡å¼ï¼Œæ­å»ºå‡ºæ¥çš„å‰ç«¯ç•Œé¢ï¼Œæ–¹ä¾¿ç”¨æˆ·åœ¨ä¸€ä¸ªç•Œé¢ç»Ÿä¸€æŸ¥çœ‹ã€ç®¡ç†ä¸åŒæ•°æ®è¡¨çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6af8a53a802e4634884f22c2dbe51968~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=LaJIyCo%2BLR%2FN%2B1vuuSpn%2FzpmttQ%3D" alt="img" loading="lazy"/></p>
<p>æ•´ä¸ªæ­å»ºæµç¨‹æ˜¯å¤§è‡´è¿™æ ·ï¼š</p>
<p><strong>1ï¼‰åˆ›å»ºåº”ç”¨</strong>* <em>ï¼š</em>*</p>
<p>åœ¨è¦æ­åº”ç”¨æ¨¡å¼çš„å¤šç»´è¡¨æ ¼å†…ï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„ã€Œåº”ç”¨ã€æŒ‰é’®ï¼Œåˆ›å»ºåº”ç”¨ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3db60a54ce3741df9cdb46a4fe3d3060~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=b0%2FJ0IWLbJsXRLyTPMfDs4InCEY%3D" alt="img" loading="lazy"/></p>
<p><strong>2ï¼‰é…ç½®åº”ç”¨</strong>* <em>ï¼š</em>*</p>
<p>åœ¨è¿™é‡Œå¯ä»¥é…ç½®æ•´ä¸ªåº”ç”¨çš„å¤–è§‚ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ›´å¤šçš„åŠŸèƒ½èœå•ä¸é¡µé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6de2e10a28245528bfd9b63f666f6df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=Ea4BHiwAxwVzllPX0IwAeAwtQN4%3D" alt="img" loading="lazy"/></p>
<p>ç‚¹å‡»ä¸‹æ–¹çš„ã€Œæ·»åŠ ç»„ä»¶ã€æŒ‰é’®ï¼Œåˆ™å¯ä»¥æ·»åŠ å„ç§ç»„ä»¶ã€‚</p>
<p><strong>3ï¼‰</strong>* <em>é…ç½®</em>*<strong>é¡µé¢****ç»„ä»¶ï¼š</strong></p>
<p>åº”ç”¨å†…æä¾›äº†éå¸¸ä¸°å¯Œç»„ä»¶ã€æ’ä»¶ï¼ŒåŒ…æ‹¬åˆ—è¡¨ã€å›¾è¡¨ã€è§†å›¾ç­‰ï¼Œå¯æ ¹æ®éœ€æ±‚é«˜åº¦å®šåˆ¶åŒ–ä¸€å¥— SaaS ç•Œé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b1f617f8cec74792aa9046542ce52555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=s1ikX3CyqIlQb6vjE0YA9Yovkas%3D" alt="img" loading="lazy"/></p>
<p>ç»„ä»¶å¼•ç”¨çš„æ•°æ®ï¼Œå‡æ¥è‡ªäºå¤šç»´è¡¨æ ¼ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œä»¥ã€Œç¬”è®°å›é¡¾ã€çš„å¡ç‰‡åˆ—è¡¨ä¸ºä¾‹ï¼Œç‚¹å‡»ã€Œå³ä¸Šè§’èœå•-é…ç½®ã€æŒ‰é’®ï¼Œè¿˜å¯å¯¹æ•°æ®èŒƒå›´ã€æ“ä½œåŠŸèƒ½ã€å¤–è§‚ç­‰ç²¾ç»†åŒ–é…ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fee5b228aa23456e853ca5570423dffc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=lKt%2BTtt10epRRjIKhp6PAaM3t5I%3D" alt="img" loading="lazy"/></p>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥æ¯ä¸ªç»„ä»¶çš„èƒŒæ™¯é¢œè‰²ã€æè¾¹ç²—ç»†ç²¾ç»†åŒ–é…ç½®ã€‚</p>
<p>åº”ç”¨æ¨¡å¼æ•´ä½“é…ç½®éƒ½æ¯”è¾ƒç›´è§‚ï¼Œè·Ÿç€å„ç§é…ç½®æŒ‰é’®ï¼Œèƒ½å¤Ÿæ¯”è¾ƒç›´è§‚çš„å®Œæˆå„ç§ DIY è®¾ç½®ã€‚</p>
<p>è‡³æ­¤ï¼Œå‡­å€Ÿæœ¬æ–‡ï¼Œä½ åº”è¯¥å¯¹å¦‚ä½•ä½¿ç”¨åº”ç”¨æ¨¡å¼ + AI å·¥ä½œæµæœ‰äº†å…¨ç›˜çš„äº†è§£ã€‚</p>
<h2 data-id="heading-10">ğŸ å†™åœ¨æœ€åï¼šå›åˆ°æœ€åˆçš„é—®é¢˜</h2>
<p>æƒ³æ­ä¸€ä¸ª AI åº”ç”¨ï¼ŒçœŸçš„éè¦ä» <code>hello world</code> å¼€å§‹å—ï¼Ÿ</p>
<p>é£ä¹¦çš„è¿™æ¬¡æ›´æ–°ï¼Œç»™äº†æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªé›¶ä»£ç çš„ AI åº”ç”¨æ­å»ºæ–¹æ¡ˆï¼Œ</p>
<p>æŠŠä¸€ä¸ªå®Œæ•´ AI åº”ç”¨çš„äº¤äº’æ“ä½œã€Agent å¤„ç†ã€æ•°æ®å­˜å‚¨ï¼Œéƒ½æ— ç¼åœ°èšåˆåœ¨äº†ä¸€ä¸ªæˆ‘ä»¬é«˜é¢‘ä½¿ç”¨çš„åä½œæ–‡æ¡£ä½“ç³»é‡Œã€‚</p>
<p><strong>æ™®é€šäººåˆ›é€ è‡ªå·±ä¸“å± AI åº”ç”¨çš„é—¨æ§›ï¼Œè¢«æ— é™æ‹‰ä½ï¼Œä¸ç¼–è¾‘ä¸€ä»½åŠå…¬è¡¨æ ¼ä¸€æ ·ç®€å•ã€‚</strong> ï¼ˆæ˜¯çš„ï¼Œå…¶éš¾åº¦å’Œ Excel å‡½æ•°ç›¸æ¯”ï¼Œå¾ˆéš¾è¯´è°æ›´ç®€å•ï¼‰</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5c4ea9814f741989fdf185751e35b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=VODhwyfh0FPz4czJlMQ%2B6Ct9mEs%3D" alt="img" loading="lazy"/></p>
<p>è¿‡å»ï¼Œå¾ˆå¤šäººåªèƒ½ä½œä¸º AI èƒ½åŠ›çš„æ¶ˆè´¹è€…ï¼›</p>
<p>ç°åœ¨ï¼Œé€šè¿‡è¿™ç§å¯è§†åŒ–çš„æ‹–æ‹½å’Œé…ç½®ï¼Œäººä»¬å¯ä»¥æˆä¸ºè‡ªå·±å·¥ä½œæµçš„æ¶æ„å¸ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7f0118a559d4d789b30426b17b051df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=mpdfYLHIx7WalV7rLgP6LEmd%2BNo%3D" alt="img" loading="lazy"/></p>
<p>åªç”¨åœ¨åŸæœ‰åŠå…¬æ–‡æ¡£ä¸Šå»¶å±•ï¼Œæˆ‘ä»¬èƒ½å°†ç²¾åŠ›è½å›åœ¨è‡ªå·±çš„ä¸šåŠ¡ç®¡ç†éœ€æ±‚ä¸Šï¼Œç›´è§‰åŒ–ã€Agent åŒ–åœ°æ‹¼æ­è‡ªå·±éœ€è¦çš„ä¸šåŠ¡ç³»ç»Ÿã€‚</p>
<p>è¿™ä¹Ÿæ˜¯ AI Native æ›´å…·æ™®é€‚æ€§çš„ä¸€ç§ä½“ç°ï¼šä¸ç‚«æŠ€ï¼Œè®©æŠ€æœ¯èå…¥åŸæœ‰çš„å·¥ä½œã€ç”Ÿæ´»ä¹ æƒ¯ã€‚</p>
<p>å·¥å…·åªæ˜¯èµ·ç‚¹ï¼Œæ›´é‡è¦çš„è¿˜æ˜¯äº²è‡ªä¸‹åœºï¼Œæ„Ÿå—ã€æ­å»ºã€è¿­ä»£ã€‚</p>
<p>å½“è‡ªå·±é‡èº«æ‰“é€ çš„ç¬¬ä¸€ä¸ª AI åº”ç”¨è·‘èµ·æ¥æ—¶ï¼Œé‚£ç§çˆ½å¿«ï¼Œè¿œæ¯”çœ‹å†å¤šæ•™ç¨‹éƒ½æ¥å¾—çœŸåˆ‡ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« ï¼Œèƒ½æˆä¸ºä½ åŠ¨æ‰‹çš„å¼€å§‹ã€‚</p>
<p><strong>å¸Œæœ›æœ¬æ–‡èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ï¼Œè®°å¾—å…³æ³¨ï½</strong></p>
<p><strong>ä¹Ÿæ„Ÿè°¢ä½ çš„ç‚¹èµä¸åˆ†äº«ï¼š)</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f5275be2e944b648b545c6ea2657b47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rO9RXpl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764412457&amp;x-signature=qLkuY%2BMhOxXdxZlUEMKU1Hrj%2B2E%3D" alt="img" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨é¢æŒæ¡ AI Agent 30 ä¸ªé«˜é¢‘é¢è¯•çš„é—®é¢˜ä¸è§£ç­”ç›¸å…³çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼]]></title>    <link>https://juejin.cn/post/7575106644498858018</link>    <guid>https://juejin.cn/post/7575106644498858018</guid>    <pubDate>2025-11-23T02:35:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498858018" data-draft-id="7575093624902074409" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨é¢æŒæ¡ AI Agent 30 ä¸ªé«˜é¢‘é¢è¯•çš„é—®é¢˜ä¸è§£ç­”ç›¸å…³çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼"/> <meta itemprop="keywords" content="Agent,LLM,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-23T02:35:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIå¤§æ¨¡å‹"/> <meta itemprop="url" content="https://juejin.cn/user/3817967696221534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨é¢æŒæ¡ AI Agent 30 ä¸ªé«˜é¢‘é¢è¯•çš„é—®é¢˜ä¸è§£ç­”ç›¸å…³çš„æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817967696221534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIå¤§æ¨¡å‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:35:19.000Z" title="Sun Nov 23 2025 02:35:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>AI æ™ºèƒ½ä½“åœ¨ç°ä»£è‡ªåŠ¨åŒ–ä¸æ™ºèƒ½ç³»ç»Ÿä¸­æ‰®æ¼”çš„è§’è‰²è¶Šæ¥è¶Šé‡è¦ï¼ŒæŒæ¡å…¶è®¾è®¡ã€éƒ¨ç½²ä¸åä½œæœºåˆ¶çš„ä¸“ä¸šäººæ‰ä¹Ÿæ—¥ç›Šèµ°ä¿ã€‚æ— è®ºä½ æ˜¯å‡†å¤‡é¢è¯•ï¼Œè¿˜æ˜¯å¸Œæœ›æ·±å…¥äº†è§£è¿™ä¸ªå‰æ²¿é¢†åŸŸï¼Œæ‰å®æŒæ¡æ™ºèƒ½ä½“çš„æ ¸å¿ƒçŸ¥è¯†éƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p>æœ¬æ–‡æ±‡æ€»äº† 30 ä¸ªå…³äº AI æ™ºèƒ½ä½“ï¼ˆç‰¹åˆ«æ˜¯åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„æ™ºèƒ½ä½“ï¼‰çš„é«˜é¢‘é¢è¯•é—®é¢˜åŠå…¶è¯¦è§£ï¼Œæ¶µç›–åŸºç¡€æ¦‚å¿µåˆ°é«˜çº§å®ç°ç­–ç•¥ï¼ŒåŠ©ä½ åœ¨ä»»ä½•ä¸ Agentic AI ç›¸å…³çš„æŠ€æœ¯äº¤æµä¸­æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<h3 data-id="heading-0">Q1. ä»€ä¹ˆæ˜¯ AI æ™ºèƒ½ä½“ï¼Ÿå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>AI æ™ºèƒ½ä½“æ˜¯èƒ½å¤Ÿè‡ªä¸»å†³ç­–å¹¶æ‰§è¡Œä»»åŠ¡çš„ç³»ç»Ÿï¼Œè¿è¡Œè¿‡ç¨‹ä¸­å‡ ä¹æ— éœ€äººä¸ºå¹²é¢„ã€‚å®ƒä»¬èƒ½å¤Ÿç†è§£ç¯å¢ƒã€åšå‡ºæ¨ç†ï¼Œå¹¶æ ¹æ®å®æ—¶æ•°æ®ä¸ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒæ•´å…¶è¡Œä¸ºã€‚è¿™äº›æ™ºèƒ½ä½“é€šå¸¸ç»“åˆäº†æœºå™¨å­¦ä¹ ï¼ˆMLï¼‰ã€è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ã€å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ç­‰ç›¸å…³çš„æŠ€æœ¯ï¼Œä»¥å®ç°ä¸æ–­ä¼˜åŒ–ä¸æ¼”è¿›ã€‚</p>
<h3 data-id="heading-1">Q2. AI æ™ºèƒ½ä½“æœ‰å“ªäº›æ ¸å¿ƒç‰¹æ€§ï¼Ÿ</h3>
<p>AI æ™ºèƒ½ä½“å…·å¤‡ä»¥ä¸‹å‡ ä¸ªå…³é”®ç‰¹å¾ï¼š</p>
<ul>
<li><strong>è‡ªä¸»æ€§</strong>ï¼šèƒ½ç‹¬ç«‹è¿è¡Œï¼Œæ— éœ€æŒç»­çš„äººå·¥å¹²é¢„ã€‚</li>
<li><strong>é€‚åº”æ€§</strong>ï¼šé€šè¿‡ä¸æ–­å­¦ä¹ å’Œç»éªŒç§¯ç´¯æå‡è¡¨ç°ã€‚</li>
<li><strong>äº¤äº’æ€§</strong>ï¼šå¯å®æ—¶ä¸å¤–éƒ¨ç¯å¢ƒæˆ–å·¥å…·æ²Ÿé€šåä½œã€‚</li>
<li><strong>å†³ç­–èƒ½åŠ›</strong>ï¼šå…·å¤‡å¤æ‚çš„æ¨ç†ä¸é€‰æ‹©èƒ½åŠ›ã€‚</li>
<li><strong>è®°å¿†ä¸ä¸Šä¸‹æ–‡æ„ŸçŸ¥</strong>ï¼šèƒ½è®°ä½è¿‡å»äº¤äº’ï¼Œæå‡å“åº”è´¨é‡ã€‚</li>
</ul>
<h3 data-id="heading-2">Q3. å“ªäº›åœºæ™¯é€‚åˆä½¿ç”¨ AI æ™ºèƒ½ä½“ï¼Ÿ</h3>
<p>AI æ™ºèƒ½ä½“ç‰¹åˆ«é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>ä»»åŠ¡å¤æ‚ã€å¼€æ”¾å¼çš„é—®é¢˜ï¼Œéœ€è¦æŒç»­é€‚åº”å’Œå†³ç­–ã€‚</li>
<li>ç¯å¢ƒåŠ¨æ€å˜åŒ–ï¼Œéœ€å®æ—¶ååº”ä¸è°ƒæ•´ã€‚</li>
<li>éœ€æ•´åˆå¤–éƒ¨æ•°æ®æºæˆ–å·¥å…·æ¥å¢å¼ºèƒŒæ™¯ç†è§£ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šå®¢æˆ·æœåŠ¡ã€å•†å“æ¨èã€ä¸ªæ€§åŒ–æ•™å­¦ç­‰åœºæ™¯ï¼ŒAI æ™ºèƒ½ä½“éƒ½èƒ½å‘æŒ¥æå¤§ä½œç”¨ã€‚</p>
<h3 data-id="heading-3">Q4. AI æ™ºèƒ½ä½“çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†æœ‰å“ªäº›ï¼Ÿ</h3>
<p>æ„å»ºä¸€ä¸ªå®Œæ•´çš„ AI æ™ºèƒ½ä½“é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ¨¡å—ï¼š</p>
<ul>
<li><strong>è‡ªä¸»å†³ç­–å±‚</strong>ï¼šèµ‹äºˆæ™ºèƒ½ä½“ç‹¬ç«‹æ€è€ƒä¸è¡ŒåŠ¨èƒ½åŠ›ã€‚</li>
<li><strong>AI æ¨¡å‹ï¼ˆå¦‚ LLM/VLMï¼‰</strong> ï¼šé©±åŠ¨æ™ºèƒ½ä½“çš„è¯­è¨€ç†è§£ä¸æ¨ç†ã€‚</li>
<li><strong>è®°å¿†ç³»ç»Ÿ</strong>ï¼šå¸®åŠ©æ™ºèƒ½ä½“è®°ä½ç”¨æˆ·åå¥½ä¸å†å²ä¸Šä¸‹æ–‡ã€‚</li>
<li><strong>é›†æˆå·¥å…·</strong>ï¼šé€šè¿‡ API æˆ–å¤–éƒ¨æœåŠ¡å¢å¼ºåŠŸèƒ½ã€‚</li>
<li><strong>ç¼–æ’æ¡†æ¶</strong>ï¼šç»Ÿä¸€åè°ƒæ‰€æœ‰ç»„ä»¶ï¼Œç®¡ç†æµç¨‹æ‰§è¡Œã€‚</li>
</ul>
<h3 data-id="heading-4">Q5. ä¸ºä»€ä¹ˆâ€œè®°å¿†â€å¯¹ AI æ™ºèƒ½ä½“å¦‚æ­¤å…³é”®ï¼Ÿ</h3>
<p>è®°å¿†æ˜¯æ™ºèƒ½ä½“å®ç°ä¸ªæ€§åŒ–ä¸è¿è´¯æ€§ä½“éªŒçš„åŸºç¡€ï¼š</p>
<ul>
<li><strong>çŸ­æœŸè®°å¿†</strong>ï¼šä½¿æ™ºèƒ½ä½“åœ¨å¯¹è¯ä¸­ä¿æŒä¸Šä¸‹æ–‡å…³è”ã€‚</li>
<li><strong>é•¿æœŸè®°å¿†</strong>ï¼šå¸®åŠ©è®°å½•ç”¨æˆ·ä¹ æƒ¯ã€å†å²äº¤äº’ã€‚</li>
<li><strong>ä½“éªŒä¸€è‡´æ€§</strong>ï¼šåœ¨å¤šè½®äº¤äº’ä¸­æä¾›è¿è´¯ã€ä¸ªæ€§åŒ–çš„æœåŠ¡ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šä¸€ä¸ªè´­ç‰©åŠ©ç†è‹¥èƒ½è®°ä½ä½ çš„è´­ä¹°å†å²ï¼Œå®ƒçš„æ¨èå°±ä¼šæ›´å‡†ç¡®ã€è´´å¿ƒã€‚</p>
<h3 data-id="heading-5">Q6. å¦‚ä½•æ„å»ºä¸€ä¸ª AI æ™ºèƒ½ä½“ï¼Ÿ</h3>
<p>æ„å»ºæµç¨‹é€šå¸¸åŒ…æ‹¬ï¼š</p>
<ol start="0">
<li><strong>ä»»åŠ¡è¯„ä¼°</strong>ï¼šç¡®å®šæ˜¯å¦é€‚åˆå¼•å…¥ AI æ™ºèƒ½ä½“ã€‚</li>
<li><strong>æ¨¡å‹é€‰æ‹©</strong>ï¼šæ ¹æ®å¤æ‚æ€§å’Œå»¶è¿Ÿè¦æ±‚é€‰æ‹©åˆé€‚æ¨¡å‹ï¼ˆå¦‚ OpenAI o3ï¼‰ã€‚</li>
<li><strong>å·¥å…·é›†æˆ</strong>ï¼šè¿æ¥å¤–éƒ¨ API å’Œæ•°æ®åº“ä¸°å¯Œæ™ºèƒ½ä½“åŠŸèƒ½ã€‚</li>
<li><strong>å¼€å‘è®°å¿†æœºåˆ¶</strong>ï¼šè®©æ™ºèƒ½ä½“å…·æœ‰ä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›ã€‚</li>
<li><strong>å®ç°ç¼–æ’é€»è¾‘</strong>ï¼šä½¿ç”¨æ¡†æ¶å¦‚ LangChain ç®¡ç†æµç¨‹ã€‚</li>
<li><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šåŸºäºæ€§èƒ½ä¸åé¦ˆä¸æ–­å®Œå–„ã€‚</li>
</ol>
<h3 data-id="heading-6">Q7. ä»€ä¹ˆæ˜¯ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ï¼Ÿå®ƒå¦‚ä½•æå‡ AI æ™ºèƒ½ä½“ï¼Ÿ</h3>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼‰æ˜¯ä¸€ç§ç»“åˆå¤–éƒ¨çŸ¥è¯†æ£€ç´¢ä¸ç”Ÿæˆå¼ AI çš„æ–¹æ³•ï¼Œæ˜¾è‘—æé«˜ç­”æ¡ˆçš„å‡†ç¡®æ€§ä¸ä¸Šä¸‹æ–‡ç›¸å…³æ€§ã€‚å®ƒç‰¹åˆ«é€‚ç”¨äºå¯¹æœ€æ–°èµ„è®¯æˆ–ä¸“ä¸šçŸ¥è¯†è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ã€‚</p>
<p>ç¤ºä¾‹ï¼šåŒ»ç–—ç±»æ™ºèƒ½ä½“å¯å®æ—¶æ£€ç´¢æœ€æ–°ç ”ç©¶æˆæœï¼Œç»™å‡ºæƒå¨å»ºè®®ã€‚</p>
<h3 data-id="heading-7">Q8. å¸¸è§çš„æ™ºèƒ½ä½“æ¡†æ¶ä¸å·¥å…·æœ‰å“ªäº›ï¼Ÿ</h3>
<p>ä¸»æµå·¥å…·åŒ…æ‹¬ï¼š</p>
<h4 data-id="heading-8">æ„å»ºæ¡†æ¶ï¼š</h4>
<ul>
<li><strong>LangChain</strong>ã€<strong>CrewAI</strong>ã€<strong>AutoGenï¼ˆå¾®è½¯ï¼‰</strong> ã€<strong>Haystack Agents</strong>ã€<strong>MetaGPT</strong></li>
</ul>
<h4 data-id="heading-9">æ— ä»£ç /ä½ä»£ç å¹³å°ï¼š</h4>
<ul>
<li><strong>Dust.tt</strong>ã€<strong>FlowiseAI</strong>ã€<strong>Superagent.sh</strong>ã€<strong>Cognosys</strong>ã€<strong>Reka Labs</strong></li>
</ul>
<h4 data-id="heading-10">å¤šæ™ºèƒ½ä½“ç¼–æ’å·¥å…·ï¼š</h4>
<ul>
<li><strong>AutoGenï¼ˆå¤šæ™ºèƒ½ä½“ï¼‰</strong> ã€<strong>CAMEL</strong>ã€<strong>MetaGPT</strong>ã€<strong>ChatDev</strong></li>
</ul>
<h4 data-id="heading-11">æç¤ºè¯ç®¡ç†å¹³å°ï¼š</h4>
<ul>
<li><strong>PromptLayer</strong>ã€<strong>Promptable</strong>ã€<strong>Humanloop</strong>ã€<strong>Guidanceï¼ˆå¾®è½¯ï¼‰</strong> ã€<strong>Vellum</strong></li>
</ul>
<h4 data-id="heading-12">å‘é‡æ•°æ®åº“ä¸è®°å¿†å·¥å…·ï¼š</h4>
<ul>
<li><strong>Pinecone</strong>ã€<strong>Weaviate</strong>ã€<strong>ChromaDB</strong>ã€<strong>FAISS</strong>ã€<strong>Milvus</strong></li>
</ul>
<h4 data-id="heading-13">è¯„ä¼°ä¸ç›‘æ§å¹³å°ï¼š</h4>
<ul>
<li><strong>LangSmith</strong>ã€<strong>TruLens</strong>ã€<strong>Phoenix</strong>ã€<strong>WandB</strong>ã€<strong>Arize</strong></li>
</ul>
<h3 data-id="heading-14">Q9. æ„å»º Agentic AI ç³»ç»Ÿå¸¸ç”¨çš„å¹³å°ä¸ API æœ‰å“ªäº›ï¼Ÿ</h3>
<h4 data-id="heading-15">æ¡†æ¶ï¼š</h4>
<ul>
<li><strong>LangChain</strong>ï¼šç”¨äºå¼€å‘ LLM é©±åŠ¨çš„å®šåˆ¶æ™ºèƒ½ä½“</li>
<li><strong>CrewAI</strong>ï¼šä¼ä¸šçº§å·¥ä½œæµä¸é€šä¿¡ç®¡ç†</li>
<li><strong>AutoGenï¼ˆå¾®è½¯ï¼‰</strong> ï¼šæ”¯æŒå¤šæ™ºèƒ½ä½“åä½œ</li>
<li><strong>LangGraph</strong>ï¼šåœ¨ LangChain åŸºç¡€ä¸Šæ„å»ºå›¾å¼æ™ºèƒ½ä½“</li>
<li><strong>AgentGPT</strong>ï¼šæµè§ˆå™¨ç«¯éƒ¨ç½²å¹³å°</li>
<li><strong>SmolAgents</strong>ï¼šHugging Face çš„è½»é‡çº§æ™ºèƒ½ä½“æ¡†æ¶</li>
<li><strong>MetaGPT</strong>ï¼šæ”¯æŒå¤æ‚ä»»åŠ¡åä½œ</li>
<li><strong>Camel-AIï¼ˆCAMELï¼‰</strong> ï¼šå¤šæ™ºèƒ½ä½“è§’è‰²æ‰®æ¼”æ¡†æ¶</li>
</ul>
<h4 data-id="heading-16">APIï¼š</h4>
<ul>
<li><strong>OpenAI API</strong>ï¼šæä¾› GPT-4 ç­‰è¯­è¨€æ¨¡å‹</li>
<li><strong>Anthropic Claude API</strong>ï¼šå¼ºè°ƒå®‰å…¨ä¸æ˜“ç”¨æ€§</li>
<li><strong>Cohere API</strong>ï¼šæ–‡æœ¬ç”Ÿæˆä¸ç†è§£</li>
<li><strong>Hugging Face API</strong>ï¼šæä¾›ä¸°å¯Œçš„æ¨¡å‹æœåŠ¡</li>
<li><strong>IBM Watson</strong>ï¼šè‡ªç„¶è¯­è¨€ä¸æœºå™¨å­¦ä¹ æœåŠ¡å¹³å°</li>
</ul>
<h4 data-id="heading-17">äº‘å¹³å°ï¼š</h4>
<ul>
<li><strong>Fabric</strong>ï¼šé›¶ä»£ç  AI æ™ºèƒ½ä½“æ­å»ºå·¥å…·</li>
<li><strong>Google Cloud AI Platform</strong></li>
<li><strong>Microsoft Azure AI</strong></li>
<li><strong>H2O.ai</strong>ï¼šæä¾› AutoML åŠŸèƒ½</li>
<li><strong>DataRobot</strong>ï¼šè‡ªåŠ¨å»ºæ¨¡ä¸éƒ¨ç½²å¹³å°</li>
<li><strong>Amazon SageMaker</strong>ï¼šå¯æ‰©å±•çš„è®­ç»ƒä¸éƒ¨ç½²æœåŠ¡</li>
</ul>
<h3 data-id="heading-18">Q10. å¼€å‘ AI æ™ºèƒ½ä½“æœ‰å“ªäº›æœ€ä½³å®è·µï¼Ÿ</h3>
<p>ä»¥ä¸‹æ˜¯å¸¸è§çš„å¼€å‘åŸåˆ™ï¼š</p>
<ul>
<li><strong>é€‰å‡†åº”ç”¨åœºæ™¯</strong>ï¼šç¡®ä¿ AI æ™ºèƒ½ä½“ç›¸æ¯”ä¼ ç»Ÿè‡ªåŠ¨åŒ–æ›´å…·ä¼˜åŠ¿</li>
<li><strong>æ˜ç¡®ä¿¡æ¯æµç¨‹</strong>ï¼šä¸å›¢é˜Ÿå…±äº«æµç¨‹å›¾ä¸ä¿¡æ¯æµ</li>
<li><strong>å¼ºè°ƒå¯è§£é‡Šæ€§</strong>ï¼šè®¾è®¡å¯è¿½æº¯ã€èƒ½è‡ªæˆ‘è§£é‡Šçš„ç³»ç»Ÿ</li>
<li><strong>å»ºç«‹ç”¨æˆ·ä¿¡ä»»</strong>ï¼šæå‡ç³»ç»Ÿé€æ˜åº¦ä¸ä¸€è‡´æ€§</li>
<li><strong>é£é™©ä¸åˆè§„ç®¡ç†</strong>ï¼šéµå®ˆæ³•è§„ï¼Œéµå¾ªä¼¦ç†</li>
<li><strong>æŒç»­è¿­ä»£ä¼˜åŒ–</strong>ï¼šé€šè¿‡åé¦ˆä¸æ•°æ®æŒç»­å®Œå–„èƒ½åŠ›</li>
</ul>
<h3 data-id="heading-19">Q11. ä»€ä¹ˆæ˜¯ AI å¼€å‘ä¸­çš„ â€œAgentic è®¾è®¡æ¨¡å¼â€ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> Agentic è®¾è®¡æ¨¡å¼æ˜¯ç”¨äºæ„å»ºä¸ç¼–æ’ AI æ™ºèƒ½ä½“çš„æ ‡å‡†æ¶æ„è“å›¾ã€‚å®ƒä»¬å¸®åŠ©å¼€å‘è€…åœ¨è®¾è®¡ã€ç»“æ„å®‰æ’å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­éµå¾ªæœ€ä½³å®è·µï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†çŠ¶æ€ä¿æŒï¼ˆstatefulnessï¼‰ã€å·¥å…·æ•´åˆå’Œåä½œäº¤äº’æ–¹é¢çš„ç­–ç•¥ã€‚</p>
<p>å¸¸è§çš„è®¾è®¡æ¨¡å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å·¥å…·ä½¿ç”¨æ¨¡å¼ï¼ˆTool-use Agent Patternï¼‰</strong> ï¼šæ™ºèƒ½ä½“é€šè¿‡è°ƒç”¨å¤–éƒ¨ API æˆ–å·¥å…·æ¥æ‰©å±•å…¶èƒ½åŠ›ã€‚</li>
<li><strong>è®°å¿†å¢å¼ºæ¨¡å¼ï¼ˆMemory-augmented Agent Patternï¼‰</strong> ï¼šæ™ºèƒ½ä½“åœ¨å¤šä¸ªä¼šè¯ä¹‹é—´ä¿æŒä¸Šä¸‹æ–‡ï¼Œè®°ä½å†å²äº¤äº’ä¿¡æ¯ã€‚</li>
<li><strong>ç®¡ç†-å·¥ä½œæ¨¡å¼ï¼ˆManager-worker Agent Patternï¼‰</strong> ï¼šä¸»æ™ºèƒ½ä½“è´Ÿè´£å°†ä»»åŠ¡åˆ†é…ç»™å¤šä¸ªä¸“ä¸šå­æ™ºèƒ½ä½“åä½œå®Œæˆã€‚</li>
<li><strong>æ€ç»´é“¾æ¨¡å¼ï¼ˆChain-of-thought Agent Patternï¼‰</strong> ï¼šæ™ºèƒ½ä½“å°†å¤æ‚ä»»åŠ¡åˆ†æ­¥éª¤æ‰§è¡Œï¼Œé€šè¿‡ç»“æ„åŒ–æ¨ç†å®Œæˆç›®æ ‡ã€‚</li>
</ul>
<h3 data-id="heading-20">Q12. Agentic AI ä¸ä¼ ç»Ÿ AI æœ‰ä½•ä¸åŒï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> Agentic AI ä¸ä¼ ç»Ÿ AI çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºå…¶è‡ªä¸»æ€§ä¸é€‚åº”æ€§ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿ AI</strong>ï¼šä¾èµ–é¢„å®šä¹‰çš„è§„åˆ™å’Œæ¨¡å‹ï¼Œéœ€äººå·¥å¹²é¢„æ‰èƒ½åº”å¯¹å˜åŒ–ç¯å¢ƒï¼Œæ— æ³•è‡ªä¸»å†³ç­–ã€‚</li>
<li><strong>Agentic AI</strong>ï¼šå…·æœ‰è‡ªä¸»è¡Œä¸ºèƒ½åŠ›ï¼Œèƒ½å¤Ÿæ ¹æ®å®æ—¶æ•°æ®åšå‡ºå†³ç­–ï¼Œå¹¶èƒ½åŠ¨æ€è°ƒæ•´ç­–ç•¥ä»¥å®ç°ç›®æ ‡ï¼Œè¡¨ç°å‡ºæ›´é«˜æ°´å¹³çš„ä¸»åŠ¨æ€§å’Œçµæ´»æ€§ã€‚</li>
</ul>
<h3 data-id="heading-21">Q13. å¦‚ä½•è¿›è¡Œ AI æ™ºèƒ½ä½“çš„æˆæœ¬æ•ˆç›Šåˆ†æï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> è¿›è¡Œæˆæœ¬æ•ˆç›Šåˆ†æçš„ä¸€èˆ¬æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li><strong>æ˜ç¡®ç›®æ ‡</strong>ï¼šæ¸…æ™°å®šä¹‰ä¸šåŠ¡æˆ–é¡¹ç›®è¦è§£å†³çš„é—®é¢˜å’Œé¢„æœŸæˆæœã€‚</li>
<li><strong>è¯„ä¼°æˆæœ¬</strong>ï¼šåŒ…æ‹¬ç ”å‘ã€éƒ¨ç½²ã€è¿ç»´ã€æ•°æ®èµ„æºå’ŒåŸºç¡€è®¾æ–½æŠ•å…¥ç­‰ã€‚</li>
<li><strong>è¡¡é‡æ•ˆç›Š</strong>ï¼šå¦‚æ•ˆç‡æå‡ã€å®¢æˆ·æ»¡æ„åº¦æå‡ã€é”™è¯¯å‡å°‘ã€è§„æ¨¡åŒ–èƒ½åŠ›å¢å¼ºã€æ”¶å…¥å¢é•¿ç­‰ã€‚</li>
<li><strong>é£é™©è¯„ä¼°</strong>ï¼šè¯†åˆ«æŠ€æœ¯ã€æ³•å¾‹ã€ä¼¦ç†ç­‰æ–¹é¢çš„æ½œåœ¨é£é™©ã€‚</li>
<li><strong>æ•æ„Ÿæ€§åˆ†æ</strong>ï¼šè€ƒè™‘åœ¨ä¸åŒåœºæ™¯å’Œå‡è®¾ä¸‹çš„ç»“æœå˜åŒ–ã€‚</li>
<li><strong>å†³ç­–æ¡†æ¶</strong>ï¼šå°†é‡åŒ–å’Œå®šæ€§çš„åˆ†æç»“åˆï¼Œè¾…åŠ©æˆ˜ç•¥æ€§å†³ç­–ã€‚</li>
</ol>
<h3 data-id="heading-22">Q14. Agentic AI å¦‚ä½•å¸®åŠ©é™ä½æˆæœ¬ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> Agentic AI èƒ½ä»å¤šä¸ªç»´åº¦å¸®åŠ©ä¼ä¸šé™ä½æˆæœ¬ï¼š</p>
<ul>
<li><strong>è‡ªåŠ¨åŒ–æ—¥å¸¸å·¥ä½œ</strong>ï¼šé€šè¿‡æ™ºèƒ½ä½“æ‰§è¡Œé‡å¤æ€§ä»»åŠ¡ï¼Œå‡å°‘äººå·¥æˆæœ¬ã€‚</li>
<li><strong>å‡å°‘é”™è¯¯ç‡</strong>ï¼šé«˜å‡†ç¡®æ€§é¿å…äº†å› é”™è¯¯å¯¼è‡´çš„è¿”å·¥æˆ–æŸå¤±ã€‚</li>
<li><strong>èµ„æºä¼˜åŒ–</strong>ï¼šæ™ºèƒ½ä½“å¯ä»¥æ™ºèƒ½è°ƒåº¦èµ„æºï¼Œä¾‹å¦‚åº“å­˜ã€èƒ½æºç­‰ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§å¼º</strong>ï¼šåœ¨éœ€æ±‚ä¸Šå‡æ—¶ï¼Œæ— éœ€åŒæ­¥å¢åŠ äººåŠ›æˆ–è®¾æ–½èµ„æºã€‚</li>
</ul>
<h3 data-id="heading-23">Q15. å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç›‘æ§å’Œè¯„ä¼° AI æ™ºèƒ½ä½“çš„è¡¨ç°ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> æœ‰æ•ˆçš„ç›‘æ§ç³»ç»Ÿåº”æ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><strong>æ€§èƒ½ç›‘æµ‹</strong>ï¼šå…³æ³¨å“åº”å‡†ç¡®ç‡ã€å»¶è¿Ÿã€ç³»ç»Ÿå¯ç”¨æ€§ã€èµ„æºä½¿ç”¨ç‡ç­‰æŒ‡æ ‡ã€‚</li>
<li><strong>ç”¨æˆ·äº¤äº’è¿½è¸ª</strong>ï¼šåˆ†æç”¨æˆ·æ»¡æ„åº¦ã€äº¤äº’é¢‘ç‡ã€å…³é”®è¡Œä¸ºè·¯å¾„ç­‰ã€‚</li>
<li><strong>åé¦ˆæœºåˆ¶</strong>ï¼šå»ºç«‹é—­ç¯åé¦ˆä½“ç³»ï¼ŒæŒç»­ä¼˜åŒ–æ™ºèƒ½ä½“è¡¨ç°ã€‚</li>
<li><strong>å¯è§£é‡Šæ€§ä¿éšœ</strong>ï¼šç¡®ä¿ç”¨æˆ·å’Œå¼€å‘è€…èƒ½å¤Ÿç†è§£æ™ºèƒ½ä½“çš„æ¨ç†å’Œå†³ç­–é€»è¾‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œåœ¨éƒ¨ç½²å®¢æœæ™ºèƒ½ä½“å‰ï¼Œåº”å¯†åˆ‡å…³æ³¨å…¶å›ç­”çš„å‡†ç¡®ç‡ã€å¹³å‡å“åº”æ—¶é—´åŠå®¢æˆ·æ»¡æ„åº¦ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼Œä¸€æ—¦åç¦»é¢„æœŸè¡¨ç°ï¼Œåº”åŠæ—¶è¿­ä»£ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-24">Q16. å¦‚ä½•è¡¡é‡ä¸€ä¸ª AI æ™ºèƒ½ä½“çš„æ€§èƒ½ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> è¯„ä¼°æ™ºèƒ½ä½“æ€§èƒ½çš„å…³é”®ç»´åº¦åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä»»åŠ¡å®Œæˆç‡ï¼ˆæ˜¯å¦æˆåŠŸå®Œæˆé¢„å®šç›®æ ‡ï¼‰</li>
<li>è¾¾æˆç›®æ ‡æ‰€éœ€æ—¶é—´æˆ–æ­¥éª¤æ•°</li>
<li>ç´¯ç§¯å¥–åŠ±ï¼ˆå¼ºåŒ–å­¦ä¹ ä¸­çš„å…¸å‹æŒ‡æ ‡ï¼‰</li>
<li>å‡†ç¡®ç‡ã€å¬å›ç‡ã€F1 åˆ†æ•°ç­‰</li>
<li>ç”¨æˆ·æ»¡æ„åº¦å’Œè¡Œä¸ºè½¬åŒ–ç‡ç­‰ç”¨æˆ·åé¦ˆæŒ‡æ ‡</li>
</ul>
<h3 data-id="heading-25">Q17. åœ¨æ™ºèƒ½ä½“ä¸­ç¼–æ’ï¼ˆOrchestrationï¼‰èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> ç¼–æ’æ˜¯è¿æ¥å’Œåè°ƒ AI æ™ºèƒ½ä½“å†…éƒ¨å¤šä¸ªæ¨¡å—çš„â€œä¸­æ¢ç¥ç»ç³»ç»Ÿâ€ã€‚å®ƒçš„ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡è°ƒåº¦</strong>ï¼šåè°ƒå¤§æ¨¡å‹ã€å·¥å…·ã€APIã€è®°å¿†ç³»ç»Ÿç­‰æ¨¡å—ååŒå·¥ä½œã€‚</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šç»´æŠ¤å¤šè½®å¯¹è¯æˆ–æ“ä½œè¿‡ç¨‹ä¸­çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šæ™ºèƒ½è¯†åˆ«å¼‚å¸¸ï¼Œæå‡ç¨³å®šæ€§ä¸é²æ£’æ€§ã€‚</li>
<li><strong>æ‰©å±•æ€§æ”¯æŒ</strong>ï¼šä¾¿äºåæœŸæ–°å¢åŠŸèƒ½æ¨¡å—æˆ–ç»„ä»¶è€Œæ— éœ€é‡æ„æ•´ä½“æ¶æ„ã€‚</li>
</ul>
<p>è‰¯å¥½çš„ç¼–æ’æœºåˆ¶æ˜¯å®ç°é«˜æ€§èƒ½ã€å¤šèƒ½åŠ›æ™ºèƒ½ä½“çš„å…³é”®ã€‚</p>
<h3 data-id="heading-26">Q18. ç”Ÿæˆå¼ä¸åˆ¤åˆ«å¼ AI æ™ºèƒ½ä½“æœ‰ä½•åŒºåˆ«ï¼Ÿèƒ½ä¸¾ä¸ªä¾‹å­å—ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> ä¸¤è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºå…¶ä»»åŠ¡ç›®æ ‡å’Œæ¨¡å‹æ¶æ„ï¼š</p>
<ul>
<li><strong>ç”Ÿæˆå¼æ™ºèƒ½ä½“ï¼ˆGenerative Agentsï¼‰</strong> ï¼šåŸºäºè®­ç»ƒåˆ†å¸ƒç”Ÿæˆæ–°å†…å®¹ï¼Œä¾‹å¦‚å†™ä½œåŠ©æ‰‹ã€å¯¹è¯ç³»ç»Ÿï¼ˆå¦‚ GPT-4ã€Geminiï¼‰ã€‚</li>
<li><strong>åˆ¤åˆ«å¼æ™ºèƒ½ä½“ï¼ˆDiscriminative Agentsï¼‰</strong> ï¼šç”¨äºåˆ†ç±»ä»»åŠ¡ï¼Œå¯¹è¾“å…¥è¿›è¡Œåˆ¤æ–­è€Œä¸ç”Ÿæˆæ–°è¾“å‡ºï¼Œå¦‚æƒ…æ„Ÿåˆ†ææ¨¡å‹ã€åƒåœ¾é‚®ä»¶è¯†åˆ«å™¨ã€‚</li>
</ul>
<p><strong>ä¾‹å­</strong>ï¼š</p>
<ul>
<li><strong>ç”Ÿæˆå¼æ™ºèƒ½ä½“</strong>ï¼šä¸€ä¸ªè¥é”€åŠ©æ‰‹å¯ä¸ºä¸åŒç”¨æˆ·ç”Ÿæˆä¸ªæ€§åŒ–å¹¿å‘Šæ–‡æ¡ˆã€‚</li>
<li><strong>åˆ¤åˆ«å¼æ™ºèƒ½ä½“</strong>ï¼šä¸€ä¸ªé‡‘èé£æ§ç³»ç»Ÿå¯åˆ¤æ–­ä¸€ç¬”äº¤æ˜“æ˜¯å¦å±äºæ¬ºè¯ˆè¡Œä¸ºã€‚</li>
</ul>
<h3 data-id="heading-27">Q19. ä»€ä¹ˆæ˜¯ â€œæ™ºèƒ½ä½“-ç¯å¢ƒå¾ªç¯ï¼ˆAgent-Environment Loopï¼‰â€ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> æ™ºèƒ½ä½“-ç¯å¢ƒå¾ªç¯æ˜¯æ™ºèƒ½ä½“ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„åŸºæœ¬æœºåˆ¶ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol start="0">
<li><strong>è§‚å¯Ÿï¼ˆObserveï¼‰</strong> ï¼šæ™ºèƒ½ä½“è·å–ç¯å¢ƒçŠ¶æ€æˆ–æ•°æ®ã€‚</li>
<li><strong>å†³ç­–ï¼ˆDecideï¼‰</strong> ï¼šåŸºäºç›®æ ‡å’Œå½“å‰çŠ¶æ€è¿›è¡Œæ¨ç†æˆ–è®¡åˆ’ã€‚</li>
<li><strong>è¡ŒåŠ¨ï¼ˆActï¼‰</strong> ï¼šæ‰§è¡Œæ“ä½œä»¥å½±å“ç¯å¢ƒã€‚</li>
<li><strong>åé¦ˆï¼ˆReceiveï¼‰</strong> ï¼šç¯å¢ƒå˜åŒ–ï¼Œå½¢æˆæ–°çš„è§‚å¯Ÿç»“æœã€‚</li>
</ol>
<p>è¿™ä¸€å¾ªç¯ä¸æ–­é‡å¤ï¼Œä½¿æ™ºèƒ½ä½“èƒ½å¤Ÿåœ¨åŠ¨æ€ç¯å¢ƒä¸­æŒç»­è°ƒæ•´è¡Œä¸ºã€‚</p>
<h3 data-id="heading-28">Q20. AI æ™ºèƒ½ä½“å¦‚ä½•æ„ŸçŸ¥å¹¶ä¸ç¯å¢ƒäº’åŠ¨ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> AI æ™ºèƒ½ä½“é€šè¿‡ä»¥ä¸‹æµç¨‹æ„ŸçŸ¥å¹¶å“åº”ç¯å¢ƒï¼š</p>
<ul>
<li><strong>æ„ŸçŸ¥</strong>ï¼šä¾èµ–â€œä¼ æ„Ÿå™¨â€æ”¶é›†æ•°æ®ã€‚åœ¨è½¯ä»¶æ™ºèƒ½ä½“ä¸­ï¼Œè¿™é€šå¸¸æŒ‡çš„æ˜¯ APIã€æ•°æ®åº“ã€ç”¨æˆ·è¾“å…¥ç­‰æ•°æ®æ¥å£ã€‚</li>
<li><strong>ä¿¡æ¯å¤„ç†</strong>ï¼šåˆ†æè¾“å…¥æ•°æ®ï¼Œç»“åˆå½“å‰çŠ¶æ€å’Œç›®æ ‡åˆ¶å®šç­–ç•¥ã€‚</li>
<li><strong>è¡Œä¸ºè¾“å‡º</strong>ï¼šæ‰§è¡Œæ“ä½œï¼ˆè°ƒç”¨å·¥å…·ã€ç”Ÿæˆå›åº”ç­‰ï¼‰ã€‚</li>
<li><strong>åé¦ˆè·å–</strong>ï¼šè§‚å¯Ÿç¯å¢ƒå˜åŒ–ï¼Œæ›´æ–°è‡ªèº«çŠ¶æ€ï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªæ„ŸçŸ¥å‘¨æœŸã€‚</li>
</ul>
<p>è¿™ä¸ªå¾ªç¯ä¸ºæ™ºèƒ½ä½“æä¾›é€‚åº”æ€§å’ŒæŒç»­å­¦ä¹ çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-29">Q21. ä»€ä¹ˆæ˜¯è®¤çŸ¥æ™ºèƒ½ä½“ï¼ˆCognitive Agentsï¼‰ï¼Ÿå®ƒä»¬æ˜¯å¦‚ä½•å»ºæ¨¡çš„ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> è®¤çŸ¥æ™ºèƒ½ä½“æ˜¯ä¸€ç±»æ¨¡æ‹Ÿäººç±»æ€ç»´ã€å­¦ä¹ ä¸å†³ç­–è¿‡ç¨‹çš„ AI æ™ºèƒ½ä½“ã€‚å®ƒä»¬é€šå¸¸åŸºäºå¿ƒç†å­¦ç†è®ºæˆ–è®¤çŸ¥æ¶æ„è¿›è¡Œå»ºæ¨¡ï¼ˆå¦‚ Soarã€ACT-Rï¼‰ï¼Œå…·å¤‡<strong>æ„ŸçŸ¥ã€è®°å¿†ã€å­¦ä¹ ã€ç›®æ ‡ç®¡ç†</strong>ç­‰å…³é”®ç»„ä»¶ï¼Œæ—¨åœ¨å±•ç°å‡ºå¯éšç€æ—¶é—´ä¸æ–­é€‚åº”ä¸ä¼˜åŒ–çš„æ™ºèƒ½è¡Œä¸ºã€‚</p>
<h3 data-id="heading-30">Q22. AI æ™ºèƒ½ä½“å¦‚ä½•ä¿ƒè¿›ä¼ä¸šåˆ›æ–°ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> AI æ™ºèƒ½ä½“åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢åŠ©åŠ›ä¼ä¸šåˆ›æ–°ï¼š</p>
<ul>
<li><strong>é‡Šæ”¾äººç±»åˆ›é€ åŠ›</strong>ï¼šè‡ªåŠ¨åŒ–ç¹çä»»åŠ¡ï¼Œè®©å‘˜å·¥èšç„¦æˆ˜ç•¥ä¸åˆ›æ„æ€§å·¥ä½œã€‚</li>
<li><strong>æä¾›å¯æ“ä½œæ´å¯Ÿ</strong>ï¼šé«˜çº§æ•°æ®åˆ†ææ­ç¤ºè¶‹åŠ¿ä¸ä¸šåŠ¡æœºä¼šã€‚</li>
<li><strong>åŠ é€Ÿç ”å‘è¿›ç¨‹</strong>ï¼šåœ¨åˆ¶è¯ã€å·¥ç¨‹ç­‰é¢†åŸŸï¼Œæ™ºèƒ½ä½“é€šè¿‡æ¨¡æ‹Ÿä¸å»ºæ¨¡å¤§å¹…æé«˜ç ”å‘æ•ˆç‡ã€‚</li>
<li><strong>æ¨åŠ¨å•†ä¸šæ¨¡å¼é©æ–°</strong>ï¼šAgentic AI æ”¯æŒä¸ªæ€§åŒ–æœåŠ¡ã€åŠ¨æ€å®šä»·å’Œé¢„æµ‹åˆ†æï¼ŒåŠ©åŠ›ä¼ä¸šæ¢ç´¢å…¨æ–°ç›ˆåˆ©æ¨¡å¼ã€‚</li>
</ul>
<h3 data-id="heading-31">Q23. éƒ¨ç½² Agentic AI é¢ä¸´å“ªäº›æŒ‘æˆ˜ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> å®æ–½ Agentic AI å¾€å¾€éœ€å…‹æœä»¥ä¸‹éš¾é¢˜ï¼š</p>
<ul>
<li><strong>æŠ€æœ¯å¤æ‚æ€§é«˜</strong>ï¼šæ„å»ºå…·æœ‰é«˜åº¦è‡ªä¸»æ€§çš„ç³»ç»Ÿéœ€è¦å¼ºå¤§çš„ç®—æ³•ä¸ç®—åŠ›æ”¯æŒã€‚</li>
<li><strong>ç³»ç»Ÿé›†æˆå›°éš¾</strong>ï¼šä¸ç°æœ‰é—ç•™ç³»ç»Ÿå¯¹æ¥ï¼Œå¾€å¾€éœ€è¿›è¡Œè¾ƒå¤§æ”¹é€ ã€‚</li>
<li><strong>ä¼¦ç†é£é™©ä¸å¯å¿½è§†</strong>ï¼šåœ¨é«˜é£é™©åœºæ™¯ä¸­ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ï¼‰ï¼Œéœ€è¦é«˜åº¦å…³æ³¨å…¬å¹³æ€§ã€é€æ˜æ€§ä¸é—®è´£æœºåˆ¶ã€‚</li>
<li><strong>é‡‡ç”¨é˜»åŠ›</strong>ï¼šå‘˜å·¥å¯èƒ½å› ä¿¡ä»»æˆ–å°±ä¸šå®‰å…¨æ„Ÿé—®é¢˜è€Œå¯¹è‡ªåŠ¨åŒ–ç³»ç»Ÿäº§ç”ŸæŠµè§¦ã€‚</li>
</ul>
<h3 data-id="heading-32">Q24. åä½œå‹æ™ºèƒ½ä½“ä¸ç•Œé¢å‹æ™ºèƒ½ä½“æœ‰ä½•ä¸åŒï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> ä¸¤è€…çš„å®šä½ä¸äº¤äº’æ–¹å¼å­˜åœ¨æ˜¾è‘—å·®å¼‚ï¼š</p>
<ul>
<li><strong>åä½œå‹æ™ºèƒ½ä½“ï¼ˆCollaborative Agentsï¼‰</strong> ï¼šä¸å…¶ä»–æ™ºèƒ½ä½“æˆ–äººç±»åˆä½œï¼Œå®Œæˆå…±äº«ç›®æ ‡ï¼Œå¼ºè°ƒè§„åˆ’ã€æ²Ÿé€šä¸ååŒã€‚</li>
<li><strong>ç•Œé¢å‹æ™ºèƒ½ä½“ï¼ˆInterface Agentsï¼‰</strong> ï¼šä¸»è¦é¢å‘ä¸ªäººç”¨æˆ·ï¼Œå­¦ä¹ å…¶åå¥½å¹¶è°ƒæ•´è¡Œä¸ºä»¥æå‡ä½¿ç”¨ä½“éªŒï¼Œå¸¸ç”¨äºè™šæ‹ŸåŠ©æ‰‹ä¸æ¨èç³»ç»Ÿã€‚</li>
</ul>
<h3 data-id="heading-33">Q25. ä»€ä¹ˆæ˜¯è‡ªä¸»æ™ºèƒ½ä½“ï¼Ÿå®ƒä»¬å¦‚ä½•ä¿æŒè‡ªä¸»æ€§ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> è‡ªä¸»æ™ºèƒ½ä½“æŒ‡èƒ½å¤Ÿåœ¨<strong>æ— éœ€äººå·¥å¹²é¢„çš„æƒ…å†µä¸‹ç‹¬ç«‹è¿è¡Œ</strong>çš„ AI ç³»ç»Ÿã€‚å®ƒä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼ç»´æŒè‡ªä¸»æ€§ï¼š</p>
<ul>
<li>åŸºäºå†…éƒ¨ç›®æ ‡ç‹¬ç«‹å†³ç­–ï¼Œ</li>
<li>é€‚åº”ç¯å¢ƒå˜åŒ–è¿›è¡Œè°ƒæ•´ï¼Œ</li>
<li>ä»åé¦ˆä¸­æŒç»­å­¦ä¹ ï¼Œ</li>
<li>è‡ªä¸»ç®¡ç†æ¨ç†è¿‡ç¨‹ä¸è¡Œä¸ºé€‰æ‹©ç­–ç•¥ã€‚</li>
</ul>
<h3 data-id="heading-34">Q26. ä»€ä¹ˆæ˜¯ Agentic AI ä¸­çš„ä»»åŠ¡åˆ†è§£ï¼ˆTask Decompositionï¼‰ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> ä»»åŠ¡åˆ†è§£æŒ‡å°†å¤æ‚ç›®æ ‡æ‹†è§£ä¸ºå¤šä¸ªå°å‹ã€å¯ç®¡ç†çš„å­ä»»åŠ¡ã€‚æ™ºèƒ½ä½“é€šå¸¸é‡‡ç”¨<strong>å±‚çº§è§„åˆ’</strong>æˆ–<strong>é€’å½’ç­–ç•¥</strong>ï¼Œé€æ­¥è§£å†³æ¯ä¸ªå­ä»»åŠ¡ï¼Œä»è€Œæå‡æ•´ä½“å†³ç­–è¿‡ç¨‹çš„å¯æ‰©å±•æ€§ä¸æ¨¡å—åŒ–ç¨‹åº¦ã€‚</p>
<h3 data-id="heading-35">Q27. LangChain å¦‚ä½•å®ç° Agentic è¡Œä¸ºï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> LangChain é€šè¿‡æ•´åˆå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸ä»¥ä¸‹ç»„ä»¶æ¥æ”¯æŒ Agentic è¡Œä¸ºï¼š</p>
<ul>
<li><strong>å·¥å…·æ¥å…¥</strong>ï¼šå¤–éƒ¨ APIã€æ•°æ®åº“ç­‰èµ„æºè°ƒç”¨ï¼›</li>
<li><strong>ä¸Šä¸‹æ–‡è®°å¿†æ¨¡å—</strong>ï¼šç»´æŒå¤šè½®äº¤äº’ä¸­çš„ä¿¡æ¯è¿è´¯æ€§ï¼›</li>
<li><strong>é“¾å¼é€»è¾‘ï¼ˆChainingï¼‰æœºåˆ¶</strong>ï¼šç»„ç»‡å¤æ‚æ¨ç†æ­¥éª¤å’Œä»»åŠ¡æµã€‚</li>
</ul>
<p>è¿™äº›ç‰¹æ€§è®©æ™ºèƒ½ä½“å¯ä»¥é€šè¿‡â€œè§‚å¯Ÿ â†’ æ¨ç† â†’ è¡ŒåŠ¨â€çš„å¾ªç¯å®Œæˆå¤æ‚ç›®æ ‡ã€‚</p>
<h3 data-id="heading-36">Q28. åœ¨ AutoGPT æˆ– BabyAGI ç­‰æ¡†æ¶ä¸­ï¼Œè®°å¿†æ¨¡å—çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> è®°å¿†æ¨¡å—ç”¨äºå­˜å‚¨<strong>è¿‡å»çš„æ“ä½œã€ç»“æœã€è§‚å¯Ÿä¸ä¸­é—´å†³ç­–è¿‡ç¨‹</strong>ã€‚å®ƒçš„ä½œç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>é¿å…ä»»åŠ¡é‡å¤ï¼Œ</li>
<li>åœ¨ä»»åŠ¡é“¾ä¸­æŒç»­è¡”æ¥ä¸Šä¸‹æ–‡ï¼Œ</li>
<li>ä»å†å²ç»éªŒä¸­å­¦ä¹ ï¼Œ</li>
<li>ä¿æŒé•¿æœŸç›®æ ‡ä¸è¡Œä¸ºé€»è¾‘çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h3 data-id="heading-37">Q29. å¤šæ™ºèƒ½ä½“ç¼–æ’ç³»ç»Ÿä¸­å¦‚ä½•å®ç°æ™ºèƒ½ä½“è·¯ç”±ï¼ˆAgent Routingï¼‰ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong> æ™ºèƒ½ä½“è·¯ç”±æŒ‡çš„æ˜¯å°†ç‰¹å®šä»»åŠ¡æˆ–å­ä»»åŠ¡åˆ†é…ç»™æœ€åˆé€‚çš„æ™ºèƒ½ä½“ï¼Œå¸¸è§æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åŸºäºé€»è¾‘çš„æ§åˆ¶å™¨</strong>ï¼šé€šè¿‡è§„åˆ™å¼•å¯¼ä»»åŠ¡æµå‘ã€‚</li>
<li><strong>è§’è‰²å®šä¹‰æˆ–æŠ€èƒ½æ ‡ç­¾</strong>ï¼šåŒ¹é…ä»»åŠ¡ä¸å…·æœ‰ç›¸åº”èƒ½åŠ›çš„æ™ºèƒ½ä½“ã€‚</li>
<li><strong>æ¡†æ¶æ”¯æŒ</strong>ï¼šå¦‚ AutoGenã€CrewAI ç­‰é€šè¿‡é¢„è®¾è§’è‰²æˆ–åŠ¨æ€ä»£ç†æœºåˆ¶å®ç°ä»»åŠ¡åˆ†å‘ä¸åä½œæ‰§è¡Œã€‚</li>
</ul>
<h3 data-id="heading-38">Q30. å¤šæ™ºèƒ½ä½“ç³»ç»Ÿåœ¨å“ªäº›åœºæ™¯ä¸‹ä¼˜äºå•æ™ºèƒ½ä½“ï¼Ÿ</h3>
<p><strong>ç­”ï¼š</strong>* <em>å…¸å‹åœºæ™¯ï¼šåŒ»é™¢è¿è¥è°ƒåº¦ç³»ç»Ÿ</em>*</p>
<p>åœ¨åŒ»ç–—åœºæ™¯ä¸­ï¼Œä¸åŒæ™ºèƒ½ä½“å¯å„å¸å…¶èŒï¼š</p>
<ul>
<li>æ‚£è€…ç›‘æŠ¤æ™ºèƒ½ä½“ï¼šå®æ—¶è·Ÿè¸ªç—…æƒ…æŒ‡æ ‡ï¼›</li>
<li>èµ„æºè°ƒåº¦æ™ºèƒ½ä½“ï¼šåˆ†é… ICU åºŠä½ä¸åŒ»ç”Ÿæ’ç­ï¼›</li>
<li>é¢„çº¦ç®¡ç†æ™ºèƒ½ä½“ï¼šåè°ƒé—¨è¯Šå®‰æ’ä¸ä½é™¢æµç¨‹ã€‚</li>
</ul>
<p>è¿™äº›æ™ºèƒ½ä½“å¯é€šè¿‡åä½œ<strong>åŠ¨æ€ä¼˜åŒ–èµ„æºé…ç½®</strong>ï¼Œæå‡æ•´ä½“å“åº”æ•ˆç‡å¹¶é™ä½ç—…æ‚£ç­‰å¾…æ—¶é—´ï¼Œæ•ˆæœè¿œä¼˜äºç”±å•ä¸€æ™ºèƒ½ä½“æ‰¿æ‹…æ‰€æœ‰ä»»åŠ¡çš„é›†ä¸­å¼æ¨¡å‹ã€‚</p>
<h3 data-id="heading-39">æ€»ç»“</h3>
<p>AI æ™ºèƒ½ä½“ä¸å†æ˜¯æŠ€æœ¯å™±å¤´ï¼Œè€Œæ˜¯çœŸæ­£æ”¹å˜å„è¡Œå„ä¸šè¿ä½œæ–¹å¼çš„å…³é”®åŠ›é‡ã€‚å®ƒä»¬é€šè¿‡<strong>è‡ªä¸»æ€§ã€é€‚åº”æ€§ä¸æ™ºèƒ½ç¼–æ’èƒ½åŠ›</strong>ï¼Œæ­£åœ¨å¼•é¢†æ–°ä¸€è½®è‡ªåŠ¨åŒ–å’Œåˆ›æ–°æµªæ½®ã€‚</p>
<p>æŒæ¡æ™ºèƒ½ä½“æ¶æ„ã€è®¾è®¡æ¨¡å¼ä¸åº”ç”¨æ¡†æ¶ï¼Œä¸ä»…èƒ½å¤Ÿæ‹“å±•ä½ çš„èŒä¸šè§†é‡ï¼Œæ›´èƒ½åœ¨ AI ç ”ç©¶ã€äº§å“å¼€å‘ã€ä¼ä¸šè‡ªåŠ¨åŒ–ç­‰æ–¹å‘è·å¾—é¢†å…ˆä¼˜åŠ¿ã€‚</p>
<p>éšç€ AI è¶Šæ¥è¶Šå‘ â€œAgenticâ€ æ–¹å‘å‘å±•ï¼Œä½ å¯¹æ™ºèƒ½ä½“çš„ç†è§£ä¸å®è·µèƒ½åŠ›å°†æˆä¸ºæœªæ¥èŒåœºä¸­ä¸å¯æˆ–ç¼ºçš„æ ¸å¿ƒç«äº‰åŠ›ã€‚æŒç»­å­¦ä¹ ã€å…³æ³¨å‰æ²¿åŠ¨æ€ï¼Œå¹¶ç†Ÿæ‚‰è¿™ç±»å¸¸è§é¢è¯•é—®é¢˜ï¼Œå°†åŠ©ä½ ä»å®¹åº”å¯¹ AI é¢†åŸŸçš„èŒä¸šæŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-40">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“ä½ çš„ MCP æœåŠ¡å™¨ä¸Šäº‘åå´©äº†ï¼šæ·±åº¦è§£æ Transport é™åˆ¶ä¸é«˜çº§ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7575103881421750326</link>    <guid>https://juejin.cn/post/7575103881421750326</guid>    <pubDate>2025-11-22T11:10:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575103881421750326" data-draft-id="7575093624902467625" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“ä½ çš„ MCP æœåŠ¡å™¨ä¸Šäº‘åå´©äº†ï¼šæ·±åº¦è§£æ Transport é™åˆ¶ä¸é«˜çº§ç‰¹æ€§"/> <meta itemprop="keywords" content="AIGC,MCP,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-22T11:10:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/3389172758899188"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“ä½ çš„ MCP æœåŠ¡å™¨ä¸Šäº‘åå´©äº†ï¼šæ·±åº¦è§£æ Transport é™åˆ¶ä¸é«˜çº§ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3389172758899188/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:10:09.000Z" title="Sat Nov 22 2025 11:10:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ºä»€ä¹ˆæœ¬åœ°å®Œç¾è¿è¡Œçš„ä»£ç ï¼Œéƒ¨ç½²å 50% åŠŸèƒ½æ¶ˆå¤±ï¼Ÿä¸€ç¯‡æ–‡ç« è®²é€ MCP çš„ Samplingã€Progressã€Roots å’Œ Stateless HTTP çš„æ®‹é…·çœŸç›¸</p>
</blockquote>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šä¸€ä¸ªçœ‹ä¼¼ç®€å•çš„éƒ¨ç½²ç¾éš¾</h2>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ èŠ±äº†ä¸¤å‘¨æ—¶é—´å¼€å‘äº†ä¸€ä¸ª MCP æœåŠ¡å™¨ï¼ŒåŠŸèƒ½åŒ…æ‹¬ä» Wikipedia æŠ“å–æ•°æ®ã€ç”¨ Claude ç”Ÿæˆæ‘˜è¦ã€æ˜¾ç¤ºå®æ—¶è¿›åº¦æ¡ã€‚æœ¬åœ°æµ‹è¯•æ—¶ä¸€åˆ‡å®Œç¾ï¼Œæ—¥å¿—æ¸…æ™°ï¼Œè¿›åº¦æ¡æµç•…ï¼ŒAI æ‘˜è¦è´¨é‡ä¹Ÿå¾ˆé«˜ã€‚</p>
<p>ç„¶åä½ æŠŠå®ƒéƒ¨ç½²åˆ°äº‘ç«¯ï¼Œå‡†å¤‡ç»™ç”¨æˆ·ä½¿ç”¨ã€‚å¯åŠ¨æœåŠ¡å™¨ï¼Œé…ç½®è´Ÿè½½å‡è¡¡ï¼Œæµ‹è¯•ç¬¬ä¸€ä¸ªè¯·æ±‚â€”â€”<strong>ç„¶åä½ æƒŠæåœ°å‘ç°</strong>ï¼š</p>
<ul>
<li>è¿›åº¦æ¡ä¸è§äº†</li>
<li>æ—¥å¿—æ¶ˆæ¯å…¨éƒ¨æ¶ˆå¤±</li>
<li>æœ€è¦å‘½çš„æ˜¯ï¼ŒAI æ‘˜è¦åŠŸèƒ½ç›´æ¥æŠ¥é”™ï¼Œæ•´ä¸ªæ ¸å¿ƒåŠŸèƒ½ç˜«ç—ª</li>
</ul>
<p>ä½ æ£€æŸ¥ä»£ç ï¼Œé€»è¾‘æ²¡é—®é¢˜ã€‚æ£€æŸ¥ç½‘ç»œï¼Œè¿æ¥æ­£å¸¸ã€‚æ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œå‘ç°äº†ä¸€ä¸ªä¸èµ·çœ¼çš„é…ç½®é¡¹ï¼š</p>
<pre><code class="hljs language-py" lang="py">mcp.run(transport=<span class="hljs-string">"http"</span>, stateless_http=<span class="hljs-literal">True</span>)
</code></pre>
<p>å°±æ˜¯è¿™ä¸€ä¸ª <code>stateless_http=True</code>ï¼Œè®©ä½ çš„æœåŠ¡å™¨åŠŸèƒ½æŸå¤±äº†ä¸€åŠã€‚<strong>ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p>è¿™ä¸æ˜¯ bugï¼Œè¿™æ˜¯è®¾è®¡ã€‚è¿™æ˜¯ MCP åè®®åœ¨é¢å¯¹ç°å®ä¸–ç•Œçš„æ®‹é…·å¦¥åâ€”â€”å½“ä½ éœ€è¦æ¨ªå‘æ‰©å±•ã€è´Ÿè½½å‡è¡¡ã€å¤šå®ä¾‹éƒ¨ç½²æ—¶ï¼Œä½ å¿…é¡»ä»˜å‡ºåŠŸèƒ½ä¸Šçš„ä»£ä»·ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¼šæ·±å…¥å‰–æ MCP çš„äº”å¤§é«˜çº§ç‰¹æ€§ï¼šSamplingã€Logging &amp; Progressã€Rootsã€stdio Transport æœºåˆ¶ã€ä»¥åŠ Streamable HTTP çš„åŒ SSE æ¶æ„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä¼šå‘Šè¯‰ä½ <strong>ä¸ºä»€ä¹ˆæŸäº›é…ç½®ä¼šç ´åè¿™äº›ç‰¹æ€§ï¼Œä»¥åŠè¿™èƒŒåçš„æŠ€æœ¯åŸå› </strong>ã€‚
zzzzzz</p>
<h2 data-id="heading-1">Samplingï¼šå½“æœåŠ¡å™¨éœ€è¦å€Ÿç”¨å®¢æˆ·ç«¯çš„ AI å¤§è„‘</h2>
<h3 data-id="heading-2">é—®é¢˜çš„èµ·æº</h3>
<p>å‡è®¾ä½ æ­£åœ¨æ„å»ºä¸€ä¸ª MCP æœåŠ¡å™¨ï¼Œæä¾›ä¸€ä¸ªç ”ç©¶å·¥å…·ã€‚å·¥ä½œæµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>ç”¨æˆ·é—®ï¼š"æ€»ç»“ä¸€ä¸‹é‡å­è®¡ç®—çš„æœ€æ–°è¿›å±•"</li>
<li>ä½ çš„æœåŠ¡å™¨è°ƒç”¨å·¥å…·ï¼Œä» Wikipediaã€arXiv æŠ“å–ç›¸å…³æ–‡ç« </li>
<li>æœåŠ¡å™¨æ‹¿åˆ°ä¸€å †åŸå§‹æ–‡æœ¬ï¼Œç°åœ¨éœ€è¦<strong>ç”Ÿæˆä¸€ä¸ªè¿è´¯çš„æ‘˜è¦</strong></li>
</ol>
<p>é—®é¢˜æ¥äº†ï¼šè°æ¥åšè¿™ä¸ªæ‘˜è¦ï¼Ÿ</p>
<p><strong>æ–¹æ¡ˆ Aï¼šæœåŠ¡å™¨è‡ªå·±é›†æˆ Claude</strong></p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æœåŠ¡å™¨éœ€è¦è‡ªå·±çš„ API å¯†é’¥</span>
anthropic_client = AsyncAnthropic(api_key=<span class="hljs-string">"sk-ant-..."</span>)

<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">research</span>(<span class="hljs-params">topic: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-comment"># æŠ“å–æ•°æ®</span>
    articles = fetch_wikipedia(topic)
    
    <span class="hljs-comment"># æœåŠ¡å™¨è°ƒç”¨ Claude</span>
    summary = <span class="hljs-keyword">await</span> anthropic_client.messages.create(
        model=<span class="hljs-string">"claude-sonnet-4-0"</span>,
        messages=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">f"æ€»ç»“è¿™äº›æ–‡ç« ï¼š<span class="hljs-subst">{articles}</span>"</span>}]
    )
    
    <span class="hljs-keyword">return</span> summary
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆçœ‹èµ·æ¥å¾ˆç›´æ¥ï¼Œä½†æœ‰å‡ ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<p><strong>æˆæœ¬çˆ†ç‚¸</strong>ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯å…¬å¼€çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥è°ƒç”¨ä½ çš„å·¥å…·ã€‚å‡è®¾ä½ çš„æœåŠ¡å™¨æ¯å¤©æœ‰ 1000 ä¸ªç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ·å¹³å‡è°ƒç”¨ 10 æ¬¡ç ”ç©¶å·¥å…·ï¼Œæ¯æ¬¡æ‘˜è¦æ¶ˆè€— 5000 tokensï¼ˆè¾“å…¥ 4000 + è¾“å‡º 1000ï¼‰ã€‚æŒ‰ç…§ Claude Sonnet çš„å®šä»·ï¼ˆè¾“å…¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>3</mn><mi mathvariant="normal">/</mi><mi>M</mi><mi>T</mi><mi>o</mi><mi>k</mi><mtext>ï¼Œè¾“å‡º</mtext></mrow><annotation encoding="application/x-tex">3/MTokï¼Œè¾“å‡º </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord">3/</span><span class="mord mathnormal" style="margin-right:0.13889em;">MT</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mord cjk_fallback">ï¼Œè¾“å‡º</span></span></span></span></span>15/MTokï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æ¯æ—¥æˆæœ¬ = 1000 ç”¨æˆ· Ã— 10 æ¬¡ Ã— (4000 Ã— <span class="hljs-variable">$3</span> + 1000 Ã— <span class="hljs-variable">$15</span>) / 1,000,000
        = 1000 Ã— 10 Ã— (<span class="hljs-variable">$0</span>.012 + <span class="hljs-variable">$0</span>.015)
        = 1000 Ã— 10 Ã— <span class="hljs-variable">$0</span>.027
        = <span class="hljs-variable">$270</span>/å¤©
        = <span class="hljs-variable">$8</span>,100/æœˆ
</code></pre>
<p>ä¸€ä¸ªæœˆ 8000 å¤šç¾å…ƒï¼Œè¿™å¯¹äºä¸€ä¸ªå¼€æºé¡¹ç›®æˆ–ä¸ªäººé¡¹ç›®æ¥è¯´æ˜¯ç¾éš¾æ€§çš„ã€‚</p>
<p><strong>å®‰å…¨é£é™©</strong>ã€‚ä½ éœ€è¦åœ¨æœåŠ¡å™¨ä»£ç æˆ–ç¯å¢ƒå˜é‡ä¸­å­˜å‚¨ API å¯†é’¥ã€‚ä¸€æ—¦ä»£ç æ³„æ¼ã€æœåŠ¡å™¨è¢«å…¥ä¾µã€é…ç½®æ–‡ä»¶è¢«è¯¯æäº¤åˆ° GitHubï¼Œä½ çš„å¯†é’¥å°±æš´éœ²äº†ã€‚æ”»å‡»è€…å¯ä»¥ç”¨ä½ çš„å¯†é’¥æ— é™åˆ¶åœ°è°ƒç”¨ Claudeï¼Œç›´åˆ°ä½ çš„ä¿¡ç”¨å¡è¢«åˆ·çˆ†ã€‚</p>
<p><strong>å¤æ‚åº¦ä¸Šå‡</strong>ã€‚ä½ éœ€è¦å¤„ç† Claude API çš„é”™è¯¯å¤„ç†ã€é€Ÿç‡é™åˆ¶ã€é‡è¯•é€»è¾‘ã€æµå¼å“åº”ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨è¿˜æ”¯æŒå…¶ä»– AI æ¨¡å‹ï¼ˆGPT-4ã€Geminiï¼‰ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸ªæ¨¡å‹å†™é›†æˆä»£ç ã€‚</p>
<h3 data-id="heading-3">Sampling çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆ</h3>
<p>MCP æä¾›äº†ä¸€ä¸ªåç›´è§‰ä½†æå…¶èªæ˜çš„è®¾è®¡ï¼š<strong>è®©æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¯·æ±‚ AI æœåŠ¡</strong>ã€‚</p>
<p>æµç¨‹å˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·: <span class="hljs-string">"æ€»ç»“é‡å­è®¡ç®—è¿›å±•"</span>
  â†“
<span class="hljs-built_in">Client</span> (Claude Desktop) â†’ <span class="hljs-built_in">Server</span>: è°ƒç”¨ research å·¥å…·
  â†“
<span class="hljs-built_in">Server</span>: æŠ“å– Wikipedia æ–‡ç« 
<span class="hljs-built_in">Server</span>: ç”Ÿæˆ prompt = <span class="hljs-string">"æ€»ç»“è¿™äº›æ–‡ç« ï¼š[æ–‡ç« å†…å®¹]"</span>
  â†“
<span class="hljs-built_in">Server</span> â†’ <span class="hljs-built_in">Client</span>: sampling è¯·æ±‚ï¼ˆ<span class="hljs-string">"å¸®æˆ‘ç”¨ Claude ç”Ÿæˆæ‘˜è¦"</span>ï¼‰
  â†“
<span class="hljs-built_in">Client</span>: è°ƒç”¨ Claude APIï¼ˆç”¨å®¢æˆ·ç«¯è‡ªå·±çš„ API å¯†é’¥ï¼‰
<span class="hljs-built_in">Client</span>: æ‹¿åˆ°æ‘˜è¦ç»“æœ
  â†“
<span class="hljs-built_in">Client</span> â†’ <span class="hljs-built_in">Server</span>: è¿”å›æ‘˜è¦
  â†“
<span class="hljs-built_in">Server</span> â†’ <span class="hljs-built_in">Client</span>: å·¥å…·æœ€ç»ˆç»“æœ
  â†“
<span class="hljs-built_in">Client</span>: æ˜¾ç¤ºç»™ç”¨æˆ·
</code></pre>
<p>è¿™ä¸ªè®¾è®¡çš„ç²¾å¦™ä¹‹å¤„åœ¨äº<strong>è´£ä»»è½¬ç§»</strong>ï¼š</p>
<ul>
<li><strong>æœåŠ¡å™¨ä¸éœ€è¦ API å¯†é’¥</strong>ï¼šå®¢æˆ·ç«¯è´Ÿè´£è°ƒç”¨ Claude</li>
<li><strong>æˆæœ¬ç”±ç”¨æˆ·æ‰¿æ‹…</strong>ï¼šæ¯ä¸ªç”¨æˆ·ç”¨è‡ªå·±çš„ API é…é¢</li>
<li><strong>æœåŠ¡å™¨é€»è¾‘ç®€åŒ–</strong>ï¼šæœåŠ¡å™¨åªéœ€è¦ç”Ÿæˆ promptï¼Œä¸éœ€è¦å¤„ç† AI API çš„å¤æ‚æ€§</li>
</ul>
<h3 data-id="heading-4">å®ç°ç»†èŠ‚ï¼šåŒç«¯ä»£ç </h3>
<p><strong>æœåŠ¡å™¨ç«¯ä»£ç </strong>ï¼ˆä½¿ç”¨ FastMCPï¼‰ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP, Context
<span class="hljs-keyword">from</span> mcp.types <span class="hljs-keyword">import</span> SamplingMessage, TextContent

mcp = FastMCP(name=<span class="hljs-string">"Research Server"</span>)

<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">research</span>(<span class="hljs-params">topic: <span class="hljs-built_in">str</span>, ctx: Context</span>):
    <span class="hljs-comment"># ç¬¬ä¸€æ­¥ï¼šæŠ“å–æ•°æ®</span>
    articles = fetch_wikipedia(topic)
    
    <span class="hljs-comment"># ç¬¬äºŒæ­¥ï¼šæ„é€  prompt</span>
    prompt = <span class="hljs-string">f"""
    ä»¥ä¸‹æ˜¯å…³äº <span class="hljs-subst">{topic}</span> çš„æ–‡ç« æ‘˜å½•ï¼š
    
    <span class="hljs-subst">{articles}</span>
    
    è¯·ç”Ÿæˆä¸€ä¸ª 500 å­—çš„æ‘˜è¦ï¼Œé‡ç‚¹å…³æ³¨æœ€æ–°è¿›å±•ã€‚
    """</span>
    
    <span class="hljs-comment"># ç¬¬ä¸‰æ­¥ï¼šè¯·æ±‚å®¢æˆ·ç«¯è°ƒç”¨ Claude</span>
    result = <span class="hljs-keyword">await</span> ctx.session.create_message(
        messages=[
            SamplingMessage(
                role=<span class="hljs-string">"user"</span>,
                content=TextContent(<span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span>, text=prompt)
            )
        ],
        max_tokens=<span class="hljs-number">4000</span>,
        system_prompt=<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç§‘ç ”åŠ©æ‰‹ï¼Œæ“…é•¿æ€»ç»“å­¦æœ¯æ–‡çŒ®ã€‚"</span>
    )
    
    <span class="hljs-comment"># ç¬¬å››æ­¥ï¼šè¿”å›ç»“æœ</span>
    <span class="hljs-keyword">if</span> result.content.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
        <span class="hljs-keyword">return</span> result.content.text
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"Sampling å¤±è´¥ï¼šå®¢æˆ·ç«¯æœªè¿”å›æ–‡æœ¬"</span>)
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>ctx.session.create_message()</code> æ˜¯å‘èµ· sampling è¯·æ±‚çš„æ–¹æ³•</li>
<li><code>SamplingMessage</code> å®šä¹‰äº†å‘é€ç»™ Claude çš„æ¶ˆæ¯ï¼ˆå¯ä»¥æ˜¯å¤šè½®å¯¹è¯ï¼‰</li>
<li><code>max_tokens</code> é™åˆ¶ç”Ÿæˆé•¿åº¦</li>
<li><code>system_prompt</code> è®¾ç½® Claude çš„è§’è‰²</li>
</ul>
<p><strong>å®¢æˆ·ç«¯ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> anthropic <span class="hljs-keyword">import</span> AsyncAnthropic
<span class="hljs-keyword">from</span> mcp <span class="hljs-keyword">import</span> ClientSession
<span class="hljs-keyword">from</span> mcp.types <span class="hljs-keyword">import</span> CreateMessageRequestParams, CreateMessageResult, TextContent

anthropic_client = AsyncAnthropic()  <span class="hljs-comment"># ä½¿ç”¨å®¢æˆ·ç«¯çš„ API å¯†é’¥</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">sampling_callback</span>(<span class="hljs-params">context, params: CreateMessageRequestParams</span>):
    <span class="hljs-string">"""å¤„ç†æœåŠ¡å™¨çš„ sampling è¯·æ±‚"""</span>
    
    <span class="hljs-comment"># æå–æ¶ˆæ¯</span>
    messages = []
    <span class="hljs-keyword">for</span> msg <span class="hljs-keyword">in</span> params.messages:
        <span class="hljs-keyword">if</span> msg.role == <span class="hljs-string">"user"</span> <span class="hljs-keyword">and</span> msg.content.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            messages.append({
                <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
                <span class="hljs-string">"content"</span>: msg.content.text
            })
    
    <span class="hljs-comment"># è°ƒç”¨ Claude</span>
    response = <span class="hljs-keyword">await</span> anthropic_client.messages.create(
        model=<span class="hljs-string">"claude-sonnet-4-0"</span>,
        messages=messages,
        max_tokens=params.max_tokens,
        system=params.system_prompt <span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(params, <span class="hljs-string">'system_prompt'</span>) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>
    )
    
    <span class="hljs-comment"># æå–æ–‡æœ¬</span>
    text = <span class="hljs-string">""</span>.join([block.text <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> response.content <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>])
    
    <span class="hljs-comment"># è¿”å›ç»“æœç»™æœåŠ¡å™¨</span>
    <span class="hljs-keyword">return</span> CreateMessageResult(
        role=<span class="hljs-string">"assistant"</span>,
        model=<span class="hljs-string">"claude-sonnet-4-0"</span>,
        content=TextContent(<span class="hljs-built_in">type</span>=<span class="hljs-string">"text"</span>, text=text)
    )

<span class="hljs-comment"># åˆ›å»ºå®¢æˆ·ç«¯ä¼šè¯æ—¶æ³¨å†Œ callback</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> ClientSession(read, write, sampling_callback=sampling_callback) <span class="hljs-keyword">as</span> session:
    <span class="hljs-keyword">await</span> session.initialize()
    
    <span class="hljs-comment"># è°ƒç”¨å·¥å…·</span>
    result = <span class="hljs-keyword">await</span> session.call_tool(
        name=<span class="hljs-string">"research"</span>,
        arguments={<span class="hljs-string">"topic"</span>: <span class="hljs-string">"quantum computing"</span>}
    )
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li><code>sampling_callback</code> æ˜¯å®¢æˆ·ç«¯æ³¨å†Œçš„å›è°ƒå‡½æ•°</li>
<li>æœåŠ¡å™¨è°ƒç”¨ <code>create_message()</code> æ—¶ï¼Œå®¢æˆ·ç«¯çš„è¿™ä¸ª callback ä¼šè¢«è§¦å‘</li>
<li>Callback è´Ÿè´£å®é™…è°ƒç”¨ Claude APIï¼Œç„¶åæŠŠç»“æœè¿”å›ç»™æœåŠ¡å™¨</li>
<li>æ•´ä¸ªè¿‡ç¨‹å¯¹æœ€ç»ˆç”¨æˆ·é€æ˜</li>
</ul>
<h3 data-id="heading-5">Sampling çš„ä½¿ç”¨åœºæ™¯</h3>
<p>è¿™ä¸ªç‰¹æ€§ä¸æ˜¯ä¸ºæ‰€æœ‰åœºæ™¯è®¾è®¡çš„ï¼Œå®ƒæœ€é€‚åˆä»¥ä¸‹æƒ…å†µï¼š</p>
<p><strong>å…¬å¼€æœåŠ¡å™¨</strong>ã€‚å¦‚æœä½ æƒ³æŠŠ MCP æœåŠ¡å™¨éƒ¨ç½²æˆå…¬å…±æœåŠ¡ï¼ˆæ¯”å¦‚ mcp.stripe.comï¼‰ï¼Œä½ ç»å¯¹ä¸æƒ³è®©éšæœºç”¨æˆ·æ¶ˆè€—ä½ çš„ AI é…é¢ã€‚Sampling è®©æ¯ä¸ªç”¨æˆ·ç”¨è‡ªå·±çš„é…é¢ï¼Œä½ åªéœ€è¦ç»´æŠ¤æœåŠ¡å™¨çš„è®¡ç®—èµ„æºï¼ˆCPUã€å†…å­˜ã€å¸¦å®½ï¼‰ï¼Œè¿™äº›æˆæœ¬é€šå¸¸è¿œä½äº AI token æˆæœ¬ã€‚</p>
<p><strong>éœ€è¦ AI å¢å¼ºçš„å·¥å…·</strong>ã€‚å¾ˆå¤š MCP å·¥å…·æœ¬èº«æ˜¯æ•°æ®å¤„ç†ï¼ˆæœç´¢ã€æŠ“å–ã€æ ¼å¼è½¬æ¢ï¼‰ï¼Œä½†æœ€ç»ˆè¾“å‡ºéœ€è¦ AI æ¶¦è‰²ã€‚æ¯”å¦‚ä»£ç æœç´¢å·¥å…·æŠ“å–äº† 100 ä¸ªä»£ç ç‰‡æ®µï¼Œéœ€è¦ AI æ€»ç»“æˆä¸€ä¸ªæ¸…æ™°çš„ç­”æ¡ˆã€‚</p>
<p><strong>é™ä½æœåŠ¡å™¨å¤æ‚åº¦</strong>ã€‚å¦‚æœä½ çš„å›¢é˜Ÿæ²¡æœ‰ AI é›†æˆç»éªŒï¼Œä¸æƒ³å¤„ç† prompt å·¥ç¨‹ã€ä¸Šä¸‹æ–‡ç®¡ç†ã€æµå¼å“åº”ç­‰é—®é¢˜ï¼ŒSampling è®©ä½ æŠŠè¿™äº›å¤æ‚åº¦æ¨ç»™å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯ Claude Desktop æˆ–å…¶ä»–æˆç†Ÿçš„ MCP å®¢æˆ·ç«¯ï¼Œå®ƒä»¬å·²ç»å¤„ç†å¥½äº†è¿™äº›é—®é¢˜ï¼‰ã€‚</p>
<h3 data-id="heading-6">Sampling çš„é™åˆ¶</h3>
<p><strong>ä¸æ˜¯æ‰€æœ‰å®¢æˆ·ç«¯éƒ½æ”¯æŒ</strong>ã€‚Sampling æ˜¯å¯é€‰ç‰¹æ€§ï¼Œå®¢æˆ·ç«¯éœ€è¦å®ç° <code>sampling_callback</code> æ‰èƒ½å¤„ç†æœåŠ¡å™¨çš„è¯·æ±‚ã€‚å¦‚æœå®¢æˆ·ç«¯ä¸æ”¯æŒï¼Œ<code>create_message()</code> ä¼šå¤±è´¥ã€‚ä½ éœ€è¦åœ¨æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜"æ­¤æœåŠ¡å™¨éœ€è¦æ”¯æŒ Sampling çš„å®¢æˆ·ç«¯"ã€‚</p>
<p><strong>å¢åŠ å»¶è¿Ÿ</strong>ã€‚æ­£å¸¸çš„å·¥å…·è°ƒç”¨æ˜¯ï¼šClient â†’ Server â†’ Clientï¼ˆä¸€æ¬¡å¾€è¿”ï¼‰ã€‚å¯ç”¨ Sampling åå˜æˆï¼šClient â†’ Server â†’ Client â†’ Claude API â†’ Client â†’ Server â†’ Clientï¼ˆä¸‰æ¬¡å¾€è¿”åŠ ä¸Š AI æ¨ç†æ—¶é—´ï¼‰ã€‚å¯¹äºå»¶è¿Ÿæ•æ„Ÿçš„åº”ç”¨ï¼Œè¿™å¯èƒ½æ˜¯ä¸ªé—®é¢˜ã€‚</p>
<p><strong>è°ƒè¯•å›°éš¾</strong>ã€‚å½“ Sampling å¤±è´¥æ—¶ï¼Œä½ éœ€è¦æ£€æŸ¥ä¸‰ä¸ªåœ°æ–¹ï¼šæœåŠ¡å™¨çš„ prompt æ˜¯å¦æ­£ç¡®ï¼Ÿå®¢æˆ·ç«¯çš„ callback æ˜¯å¦æ­£ç¡®å®ç°ï¼ŸClaude API æ˜¯å¦è¿”å›äº†é¢„æœŸç»“æœï¼Ÿé”™è¯¯å¯èƒ½å‘ç”Ÿåœ¨ä»»ä½•ä¸€ä¸ªç¯èŠ‚ã€‚</p>
<h2 data-id="heading-7">Logging &amp; Progressï¼šè®©é•¿æ—¶é—´è¿è¡Œçš„å·¥å…·ä¸å†åƒé»‘ç›’</h2>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼š</p>
<blockquote>
<p>ç”¨æˆ·: "åˆ†æè¿™ä¸ª 10GB çš„æ—¥å¿—æ–‡ä»¶ï¼Œæ‰¾å‡ºæ‰€æœ‰é”™è¯¯"
Claude: è°ƒç”¨ analyze_logs å·¥å…·
ç”¨æˆ·: ï¼ˆç­‰å¾…ï¼‰
ç”¨æˆ·: ï¼ˆç»§ç»­ç­‰å¾…ï¼‰
ç”¨æˆ·: ï¼ˆ30 ç§’åï¼‰è¿™ä¸œè¥¿æ˜¯å¡ä½äº†è¿˜æ˜¯åœ¨å·¥ä½œï¼Ÿ
ç”¨æˆ·: ï¼ˆ60 ç§’åï¼‰è¦ä¸è¦é‡å¯ä¸€ä¸‹ï¼Ÿ
Claude: ï¼ˆ90 ç§’åçªç„¶å‡ºç°ï¼‰åˆ†æå®Œæˆï¼Œæ‰¾åˆ° 1247 ä¸ªé”™è¯¯</p>
</blockquote>
<p>è¿™æ˜¯å…¸å‹çš„<strong>é»‘ç›’æ“ä½œ</strong>ã€‚ç”¨æˆ·å®Œå…¨ä¸çŸ¥é“å·¥å…·åœ¨åšä»€ä¹ˆï¼Œåªèƒ½ç„¦è™‘åœ°ç­‰å¾…ã€‚å¦‚æœå·¥å…·çœŸçš„å¡ä½äº†ï¼Œç”¨æˆ·ä¹Ÿä¸çŸ¥é“ï¼›å¦‚æœå·¥å…·æ­£å¸¸è¿è¡Œï¼Œç”¨æˆ·ä¹Ÿä¸æ”¾å¿ƒã€‚</p>
<h3 data-id="heading-8">MCP çš„è§£å†³æ–¹æ¡ˆï¼šContext å¯¹è±¡</h3>
<p>MCP çš„æ¯ä¸ªå·¥å…·å‡½æ•°éƒ½ä¼šæ”¶åˆ°ä¸€ä¸ª <code>Context</code> å¯¹è±¡ï¼ˆé€šå¸¸å‘½åä¸º <code>ctx</code>ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡æä¾›äº†ä¸¤ä¸ªå…³é”®æ–¹æ³•ï¼š</p>
<ul>
<li><code>ctx.info(message)</code> - å‘é€æ—¥å¿—æ¶ˆæ¯</li>
<li><code>ctx.report_progress(current, total)</code> - æŠ¥å‘Šè¿›åº¦</li>
</ul>
<p><strong>æœåŠ¡å™¨ç«¯å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP, Context
<span class="hljs-keyword">import</span> asyncio

mcp = FastMCP(name=<span class="hljs-string">"Log Analyzer"</span>)

<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_logs</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, ctx: Context</span>):
    <span class="hljs-comment"># é˜¶æ®µ 1ï¼šæ‰“å¼€æ–‡ä»¶</span>
    <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">f"æ­£åœ¨æ‰“å¼€æ–‡ä»¶ï¼š<span class="hljs-subst">{file_path}</span>"</span>)
    <span class="hljs-keyword">await</span> ctx.report_progress(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>)
    
    file_size = get_file_size(file_path)
    <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">f"æ–‡ä»¶å¤§å°ï¼š<span class="hljs-subst">{file_size / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>:<span class="hljs-number">.2</span>f}</span> MB"</span>)
    
    <span class="hljs-comment"># é˜¶æ®µ 2ï¼šè¯»å–å’Œè§£æ</span>
    <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">"å¼€å§‹è§£ææ—¥å¿—..."</span>)
    <span class="hljs-keyword">await</span> ctx.report_progress(<span class="hljs-number">10</span>, <span class="hljs-number">100</span>)
    
    errors = []
    lines_processed = <span class="hljs-number">0</span>
    total_lines = count_lines(file_path)
    
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> f:
            lines_processed += <span class="hljs-number">1</span>
            
            <span class="hljs-comment"># æ¯å¤„ç† 1000 è¡Œæ›´æ–°ä¸€æ¬¡è¿›åº¦</span>
            <span class="hljs-keyword">if</span> lines_processed % <span class="hljs-number">1000</span> == <span class="hljs-number">0</span>:
                progress = <span class="hljs-number">10</span> + (lines_processed / total_lines * <span class="hljs-number">80</span>)
                <span class="hljs-keyword">await</span> ctx.report_progress(<span class="hljs-built_in">int</span>(progress), <span class="hljs-number">100</span>)
                <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">f"å·²å¤„ç† <span class="hljs-subst">{lines_processed}</span>/<span class="hljs-subst">{total_lines}</span> è¡Œ"</span>)
            
            <span class="hljs-comment"># è§£æé€»è¾‘</span>
            <span class="hljs-keyword">if</span> <span class="hljs-string">"ERROR"</span> <span class="hljs-keyword">in</span> line <span class="hljs-keyword">or</span> <span class="hljs-string">"FATAL"</span> <span class="hljs-keyword">in</span> line:
                errors.append(parse_error(line))
            
            <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>
            <span class="hljs-keyword">if</span> lines_processed % <span class="hljs-number">10000</span> == <span class="hljs-number">0</span>:
                <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">0.1</span>)
    
    <span class="hljs-comment"># é˜¶æ®µ 3ï¼šç”ŸæˆæŠ¥å‘Š</span>
    <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">"ç”Ÿæˆåˆ†ææŠ¥å‘Š..."</span>)
    <span class="hljs-keyword">await</span> ctx.report_progress(<span class="hljs-number">95</span>, <span class="hljs-number">100</span>)
    
    report = generate_report(errors)
    
    <span class="hljs-keyword">await</span> ctx.info(<span class="hljs-string">f"åˆ†æå®Œæˆï¼Œæ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(errors)}</span> ä¸ªé”™è¯¯"</span>)
    <span class="hljs-keyword">await</span> ctx.report_progress(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>)
    
    <span class="hljs-keyword">return</span> report
</code></pre>
<p>å…³é”®è®¾è®¡åŸåˆ™ï¼š</p>
<p><strong>æ—¥å¿—æ¶ˆæ¯è¦æœ‰ä¿¡æ¯é‡</strong>ã€‚ä¸è¦å†™"æ­£åœ¨å¤„ç†"è¿™ç§åºŸè¯ï¼Œè¦å†™"å·²å¤„ç† 50000/100000 è¡Œï¼Œæ‰¾åˆ° 12 ä¸ªé”™è¯¯"ã€‚ç”¨æˆ·éœ€è¦çŸ¥é“å…·ä½“è¿›å±•ï¼Œè€Œä¸æ˜¯æ¨¡ç³Šçš„çŠ¶æ€ã€‚</p>
<p><strong>è¿›åº¦å€¼è¦åˆç†åˆ’åˆ†</strong>ã€‚ä¸è¦çº¿æ€§æ˜ å°„è¿›åº¦ï¼ˆæ¯”å¦‚å¤„ç† 50% çš„è¡Œå°±æŠ¥å‘Š 50% è¿›åº¦ï¼‰ï¼Œå› ä¸ºä¸åŒé˜¶æ®µçš„è€—æ—¶ä¸åŒã€‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæ–‡ä»¶æ‰“å¼€æ˜¯ 0-10%ï¼Œè§£ææ˜¯ 10-90%ï¼Œç”ŸæˆæŠ¥å‘Šæ˜¯ 90-100%ï¼Œè¿™åæ˜ äº†å®é™…çš„æ—¶é—´åˆ†é…ã€‚</p>
<p><strong>å¿…é¡»æ˜¯ async å‡½æ•°</strong>ã€‚<code>ctx.info()</code> å’Œ <code>ctx.report_progress()</code> éƒ½æ˜¯ async æ–¹æ³•ï¼Œå¿…é¡»ç”¨ <code>await</code> è°ƒç”¨ã€‚</p>
<p><strong>é¢‘ç‡æ§åˆ¶</strong>ã€‚ä¸è¦æ¯å¤„ç†ä¸€è¡Œå°±å‘é€ä¸€æ¬¡è¿›åº¦ï¼ˆä¼šäº§ç”Ÿæ•°åƒæ¡æ¶ˆæ¯ï¼‰ã€‚ä¸Šé¢çš„ä¾‹å­æ¯ 1000 è¡Œå‘é€ä¸€æ¬¡ï¼Œæ˜¯ä¸€ä¸ªåˆç†çš„å¹³è¡¡ã€‚</p>
<h3 data-id="heading-9">å®¢æˆ·ç«¯å®ç°ï¼šçµæ´»çš„å±•ç¤ºç­–ç•¥</h3>
<p>å®¢æˆ·ç«¯éœ€è¦æ³¨å†Œå›è°ƒå‡½æ•°æ¥å¤„ç†è¿™äº›é€šçŸ¥ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> mcp <span class="hljs-keyword">import</span> ClientSession
<span class="hljs-keyword">from</span> mcp.types <span class="hljs-keyword">import</span> LoggingMessageNotificationParams

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">logging_callback</span>(<span class="hljs-params">params: LoggingMessageNotificationParams</span>):
    <span class="hljs-string">"""å¤„ç†æ—¥å¿—æ¶ˆæ¯"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[LOG] <span class="hljs-subst">{params.data}</span>"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">progress_callback</span>(<span class="hljs-params">progress: <span class="hljs-built_in">float</span>, total: <span class="hljs-built_in">float</span> | <span class="hljs-literal">None</span>, message: <span class="hljs-built_in">str</span> | <span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""å¤„ç†è¿›åº¦æ›´æ–°"""</span>
    <span class="hljs-keyword">if</span> total <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        percentage = (progress / total) * <span class="hljs-number">100</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[PROGRESS] <span class="hljs-subst">{percentage:<span class="hljs-number">.1</span>f}</span>% (<span class="hljs-subst">{progress}</span>/<span class="hljs-subst">{total}</span>)"</span>)
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[PROGRESS] <span class="hljs-subst">{progress}</span> æ­¥å®Œæˆ"</span>)

<span class="hljs-comment"># åˆ›å»ºä¼šè¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> ClientSession(
    read, write,
    logging_callback=logging_callback
) <span class="hljs-keyword">as</span> session:
    <span class="hljs-keyword">await</span> session.initialize()
    
    <span class="hljs-keyword">await</span> session.call_tool(
        name=<span class="hljs-string">"analyze_logs"</span>,
        arguments={<span class="hljs-string">"file_path"</span>: <span class="hljs-string">"/var/log/app.log"</span>},
        progress_callback=progress_callback
    )
</code></pre>
<p>æ³¨æ„æ¶æ„è®¾è®¡ï¼š</p>
<ul>
<li><strong>Logging callback æ³¨å†Œåœ¨ ClientSession çº§åˆ«</strong>ï¼šæ‰€æœ‰å·¥å…·çš„æ—¥å¿—éƒ½ä¼šå‘åˆ°è¿™ä¸ª callback</li>
<li><strong>Progress callback æ³¨å†Œåœ¨ call_tool çº§åˆ«</strong>ï¼šæ¯ä¸ªå·¥å…·è°ƒç”¨å¯ä»¥æœ‰ä¸åŒçš„è¿›åº¦å¤„ç†é€»è¾‘</li>
</ul>
<h3 data-id="heading-10">å…³é”®é™åˆ¶ï¼šè¿™äº›ç‰¹æ€§ä¾èµ–åŒå‘é€šä¿¡</h3>
<p>Logging å’Œ Progress çš„å·¥ä½œåŸç†æ˜¯ï¼š<strong>æœåŠ¡å™¨ä¸»åŠ¨å‘é€é€šçŸ¥ç»™å®¢æˆ·ç«¯</strong>ã€‚</p>
<p>åœ¨ stdio transport ä¸­ï¼Œè¿™æ²¡é—®é¢˜ï¼Œå› ä¸ºæœåŠ¡å™¨å¯ä»¥éšæ—¶å†™å…¥ stdoutã€‚</p>
<p>åœ¨ Streamable HTTP transport ä¸­ï¼Œè¿™éœ€è¦ SSE è¿æ¥ã€‚</p>
<p><strong>ä½†å¦‚æœä½ å¯ç”¨äº† <code>stateless_http=True</code>ï¼Œè¿™äº›ç‰¹æ€§ä¼šå®Œå…¨å¤±æ•ˆ</strong>ã€‚æœåŠ¡å™¨è°ƒç”¨ <code>ctx.info()</code> å’Œ <code>ctx.report_progress()</code> ä¸ä¼šæŠ¥é”™ï¼Œä½†æ¶ˆæ¯ä¼šè¢«æ‚„æ‚„ä¸¢å¼ƒï¼Œå®¢æˆ·ç«¯æ°¸è¿œæ”¶ä¸åˆ°ã€‚</p>
<p>è¿™æ˜¯éƒ¨ç½²æ—¶çš„æœ€å¤§é™·é˜±ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-11">Rootsï¼šè§£å†³"æ–‡ä»¶åœ¨å“ªé‡Œ"çš„éš¾é¢˜</h2>
<h3 data-id="heading-12">é—®é¢˜åœºæ™¯</h3>
<p>å‡è®¾ä½ å¼€å‘äº†ä¸€ä¸ªè§†é¢‘è½¬æ¢å·¥å…·ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_video</span>(<span class="hljs-params">input_path: <span class="hljs-built_in">str</span>, output_format: <span class="hljs-built_in">str</span></span>):
    <span class="hljs-string">"""å°†è§†é¢‘è½¬æ¢ä¸ºæŒ‡å®šæ ¼å¼"""</span>
    <span class="hljs-comment"># ffmpeg -i input_path -c:v libx264 output_path</span>
    ...
</code></pre>
<p>ç”¨æˆ·çš„å¯¹è¯å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-py" lang="py">ç”¨æˆ·: <span class="hljs-string">"æŠŠ biking.mp4 è½¬æ¢æˆ MOV æ ¼å¼"</span>
Claude: å¥½çš„ï¼Œæˆ‘éœ€è¦æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚è¯·æä¾›å®Œæ•´è·¯å¾„ã€‚
ç”¨æˆ·: å‘ƒ... /Users/alice/Movies/biking.mp4
Claude: è°ƒç”¨ convert_video å·¥å…·
</code></pre>
<p>è¿™ä¸ªä½“éªŒå¾ˆç³Ÿç³•ã€‚ç”¨æˆ·çŸ¥é“æ–‡ä»¶åœ¨ Movies æ–‡ä»¶å¤¹ï¼Œä½†å¿…é¡»æ‰‹åŠ¨è¾“å…¥å®Œæ•´è·¯å¾„ã€‚</p>
<p>æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒClaude æ— æ³•å¸®åŠ©ç”¨æˆ·ã€‚å³ä½¿ç”¨æˆ·è¯´"åœ¨ Movies æ–‡ä»¶å¤¹é‡Œ"ï¼ŒClaude ä¹Ÿæ— æ³•éå†æ–‡ä»¶ç³»ç»Ÿå»æ‰¾æ–‡ä»¶ã€‚</p>
<h3 data-id="heading-13">Roots çš„è§£å†³æ–¹æ¡ˆ</h3>
<p>Roots æ˜¯ä¸€ä¸ªæƒé™å’Œå¯¼èˆªç³»ç»Ÿã€‚å®¢æˆ·ç«¯å‘Šè¯‰æœåŠ¡å™¨ï¼š"ä½ å¯ä»¥è®¿é—®è¿™äº›ç›®å½•"ï¼Œç„¶åæœåŠ¡å™¨ï¼ˆä»¥åŠ Claudeï¼‰å¯ä»¥åœ¨è¿™äº›ç›®å½•ä¸­æœç´¢æ–‡ä»¶ã€‚</p>
<p><strong>å·¥ä½œæµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-number">1.</span> ç”¨æˆ·å¯åŠ¨ MCP å®¢æˆ·ç«¯ï¼ˆå¦‚ Claude Desktopï¼‰
<span class="hljs-number">2.</span> ç”¨æˆ·é…ç½® Rootsï¼š[<span class="hljs-string">"/Users/alice/Movies"</span>, <span class="hljs-string">"/Users/alice/Desktop"</span>]
<span class="hljs-number">3.</span> ç”¨æˆ·ï¼š<span class="hljs-string">"æŠŠ biking.mp4 è½¬æ¢æˆ MOV"</span>
<span class="hljs-number">4.</span> Claude: è°ƒç”¨ list_roots() â†’ [<span class="hljs-string">"/Users/alice/Movies"</span>, <span class="hljs-string">"/Users/alice/Desktop"</span>]
<span class="hljs-number">5.</span> Claude: è°ƒç”¨ read_dir(<span class="hljs-string">"/Users/alice/Movies"</span>) â†’ [<span class="hljs-string">"biking.mp4"</span>, <span class="hljs-string">"vacation.mov"</span>, ...]
<span class="hljs-number">6.</span> Claude: æ‰¾åˆ°äº†ï¼æ–‡ä»¶åœ¨ /Users/alice/Movies/biking.mp4
<span class="hljs-number">7.</span> Claude: è°ƒç”¨ convert_video(<span class="hljs-string">"/Users/alice/Movies/biking.mp4"</span>, <span class="hljs-string">"mov"</span>)
</code></pre>
<p>ç”¨æˆ·åªéœ€è¦è¯´æ–‡ä»¶åï¼ŒClaude ä¼šè‡ªåŠ¨æœç´¢ Roots ç›®å½•æ‰¾åˆ°å®Œæ•´è·¯å¾„ã€‚</p>
<h3 data-id="heading-14">æœåŠ¡å™¨ç«¯å®ç°ï¼šæ‰‹åŠ¨æƒé™æ£€æŸ¥</h3>
<p>MCP SDK <strong>ä¸ä¼šè‡ªåŠ¨æ‰§è¡Œæƒé™æ£€æŸ¥</strong>ã€‚ä½ éœ€è¦è‡ªå·±å®ç°ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> pathlib <span class="hljs-keyword">import</span> Path
<span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP, Context

mcp = FastMCP(name=<span class="hljs-string">"File Tools"</span>)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_path_allowed</span>(<span class="hljs-params">path: <span class="hljs-built_in">str</span>, ctx: Context</span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-string">"""æ£€æŸ¥è·¯å¾„æ˜¯å¦åœ¨å…è®¸çš„ Roots å†…"""</span>
    requested_path = Path(path).resolve()
    
    <span class="hljs-comment"># è·å–å®¢æˆ·ç«¯é…ç½®çš„ Roots</span>
    roots = <span class="hljs-keyword">await</span> ctx.session.list_roots()
    
    <span class="hljs-keyword">for</span> root <span class="hljs-keyword">in</span> roots.roots:
        root_path = Path(root.uri.replace(<span class="hljs-string">"file://"</span>, <span class="hljs-string">""</span>)).resolve()
        
        <span class="hljs-keyword">try</span>:
            requested_path.relative_to(root_path)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
        <span class="hljs-keyword">except</span> ValueError:
            <span class="hljs-keyword">continue</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>

<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_video</span>(<span class="hljs-params">input_path: <span class="hljs-built_in">str</span>, output_format: <span class="hljs-built_in">str</span>, ctx: Context</span>):
    <span class="hljs-comment"># æƒé™æ£€æŸ¥</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">await</span> is_path_allowed(input_path, ctx):
        <span class="hljs-keyword">raise</span> PermissionError(
            <span class="hljs-string">f"æ— æ³•è®¿é—® <span class="hljs-subst">{input_path}</span>ã€‚æ­¤è·¯å¾„ä¸åœ¨å…è®¸çš„ç›®å½•èŒƒå›´å†…ã€‚"</span>
        )
    
    output_path = input_path.replace(Path(input_path).suffix, <span class="hljs-string">f".<span class="hljs-subst">{output_format}</span>"</span>)
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">await</span> is_path_allowed(output_path, ctx):
        <span class="hljs-keyword">raise</span> PermissionError(<span class="hljs-string">f"æ— æ³•å†™å…¥ <span class="hljs-subst">{output_path}</span>"</span>)
    
    <span class="hljs-comment"># å®é™…è½¬æ¢é€»è¾‘</span>
    <span class="hljs-keyword">await</span> run_ffmpeg(input_path, output_path, output_format)
    
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"è½¬æ¢å®Œæˆï¼š<span class="hljs-subst">{output_path}</span>"</span>
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>ä½¿ç”¨ <code>.resolve()</code></strong> è§£æè·¯å¾„ã€‚è¿™ä¼šå¤„ç†ç¬¦å·é“¾æ¥ã€<code>..</code> å’Œ <code>.</code>ï¼Œé˜²æ­¢è·¯å¾„éå†æ”»å‡»ã€‚</p>
<p><strong>æ£€æŸ¥ç›¸å¯¹è·¯å¾„å…³ç³»</strong>ã€‚<code>requested_path.relative_to(root_path)</code> ä¼šæ£€æŸ¥ requested_path æ˜¯å¦åœ¨ root_path çš„å­æ ‘ä¸­ã€‚</p>
<p><strong>è¯»å†™éƒ½è¦æ£€æŸ¥</strong>ã€‚ä¸ä»…è¾“å…¥æ–‡ä»¶è¦åœ¨ Roots å†…ï¼Œè¾“å‡ºæ–‡ä»¶ä¹Ÿè¦åœ¨ Roots å†…ã€‚</p>
<h3 data-id="heading-15">å®‰å…¨è€ƒé‡ï¼šRoots ä¸æ˜¯æ²™ç®±</h3>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼š<strong>Roots æ˜¯ä¸€ä¸ªçº¦å®šï¼Œä¸æ˜¯å¼ºåˆ¶çš„å®‰å…¨è¾¹ç•Œ</strong>ã€‚</p>
<p>MCP SDK ä¸ä¼šé˜»æ­¢ä½ çš„ä»£ç è®¿é—® Roots ä¹‹å¤–çš„æ–‡ä»¶ã€‚</p>
<p>Roots çš„ä½œç”¨æ˜¯ï¼š</p>
<p><strong>ç”¨æˆ·æ„å›¾æ˜ç¡®åŒ–</strong>ã€‚ç”¨æˆ·é€šè¿‡é…ç½® Roots å‘Šè¯‰æœåŠ¡å™¨ï¼š"æˆ‘åªæƒ³è®©ä½ è®¿é—®è¿™äº›ç›®å½•"ã€‚</p>
<p><strong>Claude çš„å¯¼èˆªæŒ‡å¼•</strong>ã€‚Claude çŸ¥é“å¯ä»¥åœ¨å“ªäº›ç›®å½•æœç´¢æ–‡ä»¶ã€‚</p>
<p><strong>é”™è¯¯æç¤ºå‹å¥½åŒ–</strong>ã€‚å½“ç”¨æˆ·å°è¯•è®¿é—® Roots ä¹‹å¤–çš„æ–‡ä»¶æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥ç»™å‡ºæ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-16">stdio Transport æ·±åº¦è§£æï¼šæœ€çº¯ç²¹çš„åŒå‘é€šä¿¡</h2>
<h3 data-id="heading-17">åº•å±‚æœºåˆ¶ï¼šè¿›ç¨‹ã€ç®¡é“ã€æ–‡ä»¶æè¿°ç¬¦</h3>
<p>å½“ä½ åœ¨ MCP å®¢æˆ·ç«¯é…ç½®ä¸€ä¸ª stdio æœåŠ¡å™¨æ—¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"my-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"server.py"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å®¢æˆ·ç«¯ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> subprocess

<span class="hljs-comment"># å¯åŠ¨å­è¿›ç¨‹</span>
process = subprocess.Popen(
    [<span class="hljs-string">"python"</span>, <span class="hljs-string">"server.py"</span>],
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE
)
</code></pre>
<p>æ“ä½œç³»ç»Ÿå±‚é¢ï¼Œè¿™åˆ›å»ºäº†ä¸‰ä¸ªåŒ¿åç®¡é“ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Client</span> <span class="hljs-built_in">Process</span>                <span class="hljs-built_in">Server</span> <span class="hljs-built_in">Process</span>
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-built_in">stdin</span> (FD <span class="hljs-number">10</span>)â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€&gt;â”‚ <span class="hljs-built_in">stdin</span> (FD <span class="hljs-number">0</span>) â”‚
â”‚<span class="hljs-built_in">stdout</span> (FD <span class="hljs-number">11</span>)â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<span class="hljs-built_in">stdout</span> (FD <span class="hljs-number">1</span>) â”‚
â”‚<span class="hljs-built_in">stderr</span> (FD <span class="hljs-number">12</span>)â”‚&lt;â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚<span class="hljs-built_in">stderr</span> (FD <span class="hljs-number">2</span>) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å…³é”®ç‰¹æ€§ï¼š</p>
<p><strong>ç®¡é“æ˜¯åŒå‘çš„</strong>ï¼ˆä»é€»è¾‘ä¸Šè®²ï¼‰ã€‚è™½ç„¶æ¯ä¸ªç®¡é“æœ¬èº«æ˜¯å•å‘çš„ï¼Œä½†é€šè¿‡ä¸¤ä¸ªç®¡é“å®ç°äº†åŒå‘é€šä¿¡ã€‚</p>
<p><strong>é˜»å¡ I/O</strong>ã€‚å½“ç®¡é“ä¸ºç©ºæ—¶ï¼Œè¯»å–æ“ä½œä¼šé˜»å¡ã€‚å½“ç®¡é“æ»¡æ—¶ï¼Œå†™å…¥æ“ä½œä¼šé˜»å¡ã€‚</p>
<p><strong>è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸç»‘å®š</strong>ã€‚å­è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”±çˆ¶è¿›ç¨‹æ§åˆ¶ã€‚</p>
<h3 data-id="heading-18">æ¶ˆæ¯æ ¼å¼ï¼šJSON-RPC over newlines</h3>
<p>MCP ä½¿ç”¨ JSON-RPC 2.0 ä½œä¸ºæ¶ˆæ¯æ ¼å¼ï¼Œä½†éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼š<strong>ç®¡é“æ˜¯å­—èŠ‚æµï¼Œæ²¡æœ‰æ¶ˆæ¯è¾¹ç•Œ</strong>ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆæ˜¯ï¼š<strong>æ¯æ¡æ¶ˆæ¯å ä¸€è¡Œï¼Œç”¨ <code>\n</code> åˆ†éš”</strong>ã€‚</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-comment"># æœåŠ¡å™¨å‘é€æ¶ˆæ¯</span>
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> sys

message = {
    <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
    <span class="hljs-string">"result"</span>: {<span class="hljs-string">"tools"</span>: [...]},
    <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>
}

json_str = json.dumps(message, separators=(<span class="hljs-string">','</span>, <span class="hljs-string">':'</span>))
sys.stdout.write(json_str + <span class="hljs-string">'\n'</span>)
sys.stdout.flush()
</code></pre>
<p><strong>å…³é”®çº¦æŸ</strong>ï¼š</p>
<ul>
<li>JSON å¿…é¡»æ˜¯ç´§å‡‘æ ¼å¼ï¼Œä¸èƒ½åŒ…å«æ¢è¡Œç¬¦</li>
<li>æ¯æ¡æ¶ˆæ¯åå¿…é¡»ç«‹å³ flush ç¼“å†²åŒº</li>
<li>æœåŠ¡å™¨çš„ stdout åªèƒ½ç”¨äº MCP æ¶ˆæ¯</li>
</ul>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæœåŠ¡å™¨ä»£ç ä¸­ä¸èƒ½æœ‰ <code>print()</code> è¯­å¥ï¼ˆé™¤éå†™åˆ° stderrï¼‰ã€‚</p>
<h3 data-id="heading-19">MCP è¿æ¥çš„ä¸‰æ­¥æ¡æ‰‹</h3>
<p>æ¯ä¸ª MCP è¿æ¥å¿…é¡»ä»¥å›ºå®šçš„ä¸‰æ­¥æ¡æ‰‹å¼€å§‹ï¼š</p>
<p><strong>æ­¥éª¤ 1ï¼šInitialize Requestï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"initialize"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"roots"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"sampling"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clientInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Claude Desktop"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šInitialize Resultï¼ˆæœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯ï¼‰</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"logging"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"My MCP Server"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.1.0"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šInitialized Notificationï¼ˆå®¢æˆ·ç«¯ â†’ æœåŠ¡å™¨ï¼‰</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"notifications/initialized"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªé€šçŸ¥ï¼ˆnotificationï¼‰ï¼Œä¸éœ€è¦å“åº”ã€‚</p>
<h3 data-id="heading-20">å››ç§é€šä¿¡åœºæ™¯çš„å®ç°</h3>
<p>stdio transport æ”¯æŒ MCP çš„æ‰€æœ‰å››ç§é€šä¿¡æ¨¡å¼ï¼š</p>
<p><strong>åœºæ™¯ 1ï¼šå®¢æˆ·ç«¯è¯·æ±‚ â†’ æœåŠ¡å™¨å“åº”</strong>ï¼ˆæœ€å¸¸è§ï¼‰</p>
<pre><code class="hljs language-json" lang="json">Client<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>...<span class="hljs-punctuation">,</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">}</span>
Server<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">2</span><span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>åœºæ™¯ 2ï¼šæœåŠ¡å™¨é€šçŸ¥ â†’ å®¢æˆ·ç«¯</strong></p>
<pre><code class="hljs language-json" lang="json">Server<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"notifications/progress"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™å°±æ˜¯ <code>ctx.report_progress()</code> çš„åº•å±‚å®ç°ã€‚</p>
<p><strong>åœºæ™¯ 3ï¼šæœåŠ¡å™¨è¯·æ±‚ â†’ å®¢æˆ·ç«¯å“åº”</strong></p>
<pre><code class="hljs language-json" lang="json">Server<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"sampling/createMessage"</span><span class="hljs-punctuation">,</span>...<span class="hljs-punctuation">,</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">100</span><span class="hljs-punctuation">}</span>
Client<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">100</span><span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™å°±æ˜¯ <code>ctx.session.create_message()</code> çš„åº•å±‚å®ç°ã€‚</p>
<p><strong>åœºæ™¯ 4ï¼šå®¢æˆ·ç«¯é€šçŸ¥ â†’ æœåŠ¡å™¨</strong></p>
<pre><code class="hljs language-json" lang="json">Client<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"notifications/cancelled"</span><span class="hljs-punctuation">,</span>...<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-21">ä¸ºä»€ä¹ˆ stdio æ˜¯"ç†æƒ³çŠ¶æ€"</h3>
<p>stdio transport æ”¯æŒæ‰€æœ‰å››ç§é€šä¿¡æ¨¡å¼ï¼Œæ²¡æœ‰ä»»ä½•é™åˆ¶ã€‚è¿™æ˜¯å› ä¸ºï¼š</p>
<p><strong>çœŸæ­£çš„åŒå‘é€šé“</strong>ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥éšæ—¶å‘èµ·è¯·æ±‚æˆ–é€šçŸ¥ã€‚</p>
<p><strong>ä½å»¶è¿Ÿ</strong>ã€‚ç®¡é“æ˜¯å†…æ ¸ç®¡ç†çš„å†…å­˜ç¼“å†²åŒºï¼Œå»¶è¿Ÿé€šå¸¸åœ¨å¾®ç§’çº§åˆ«ã€‚</p>
<p><strong>ç®€å•çš„å®ç°</strong>ã€‚ä¸éœ€è¦å¤„ç†ç½‘ç»œåè®®ã€è¿æ¥ç®¡ç†ã€è¶…æ—¶ã€é‡è¿ã€‚</p>
<p><strong>å®Œç¾çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ã€‚çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œå­è¿›ç¨‹è‡ªåŠ¨æ”¶åˆ°ä¿¡å·ã€‚</p>
<p>ä½† stdio çš„è‡´å‘½é™åˆ¶æ˜¯ï¼š<strong>åªèƒ½åœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œ</strong>ã€‚å¦‚æœä½ æƒ³æŠŠ MCP æœåŠ¡å™¨éƒ¨ç½²æˆäº‘æœåŠ¡ï¼Œstdio å°±ä¸å¤Ÿäº†ã€‚</p>
<h2 data-id="heading-22">Streamable HTTPï¼šç»•è¿‡ HTTP é™åˆ¶çš„ç²¾å·§è®¾è®¡</h2>
<h3 data-id="heading-23">HTTP çš„æ ¹æœ¬é—®é¢˜</h3>
<p>HTTP æ˜¯ä¸ºå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹è®¾è®¡çš„ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Client</span> â”€â”€â”€â”€ Request â”€â”€â”€â†’ <span class="hljs-built_in">Server</span>
<span class="hljs-built_in">Client</span> â†â”€â”€â”€ Response â”€â”€â”€â”€ <span class="hljs-built_in">Server</span>
</code></pre>
<p>å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¢«åŠ¨å“åº”ã€‚ä½† MCP éœ€è¦ï¼š<strong>æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯</strong>ï¼ˆSampling è¯·æ±‚ã€Progress é€šçŸ¥ã€Logging æ¶ˆæ¯ï¼‰ã€‚</p>
<p>ä½†åœ¨ HTTP ä¸­ï¼ŒæœåŠ¡å™¨æ²¡æœ‰å®¢æˆ·ç«¯çš„ URLã€‚æœåŠ¡å™¨æ— æ³•å‘å®¢æˆ·ç«¯å‘èµ· HTTP è¯·æ±‚ã€‚</p>
<h3 data-id="heading-24">SSEï¼šå•å‘æµå¼æ¨é€çš„æ•‘æ˜Ÿ</h3>
<p>Server-Sent Events (SSE) æ˜¯ HTML5 å¼•å…¥çš„æŠ€æœ¯ï¼Œå…è®¸æœåŠ¡å™¨é€šè¿‡ HTTP è¿æ¥å‘å®¢æˆ·ç«¯æ¨é€äº‹ä»¶æµã€‚</p>
<p><strong>SSE çš„å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">GET</span> <span class="hljs-string">/events</span> <span class="hljs-string">HTTP/1.1</span>
        <span class="hljs-attr">Accept:</span> <span class="hljs-string">text/event-stream</span>

<span class="hljs-attr">Server:</span> <span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">200</span> <span class="hljs-string">OK</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">text/event-stream</span>
        
        <span class="hljs-attr">data:</span> {<span class="hljs-attr">"message":</span> <span class="hljs-string">"hello"</span>}
        
        <span class="hljs-attr">data:</span> {<span class="hljs-attr">"message":</span> <span class="hljs-string">"world"</span>}
        
        <span class="hljs-string">(è¿æ¥ä¿æŒæ‰“å¼€)</span>
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<p><strong>é•¿è¿æ¥</strong>ã€‚HTTP å“åº”ä¸ä¼šç«‹å³ç»“æŸï¼Œè€Œæ˜¯ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚</p>
<p><strong>æµå¼æ•°æ®</strong>ã€‚æœåŠ¡å™¨å¯ä»¥éšæ—¶å†™å…¥æ•°æ®ï¼Œå®¢æˆ·ç«¯å®æ—¶æ¥æ”¶ã€‚</p>
<p><strong>äº‹ä»¶æ ¼å¼</strong>ã€‚æ¯ä¸ªäº‹ä»¶ä»¥ <code>data: </code>å¼€å¤´ï¼Œç”¨ç©ºè¡Œåˆ†éš”ã€‚</p>
<p>SSE è§£å†³äº†"æœåŠ¡å™¨å¦‚ä½•å‘å®¢æˆ·ç«¯æ¨é€æ¶ˆæ¯"çš„é—®é¢˜ã€‚ä½†è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼š<strong>å®¢æˆ·ç«¯å¦‚ä½•å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼Ÿ</strong></p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ç”¨å¦ä¸€ä¸ª HTTP è¯·æ±‚</strong>ã€‚</p>
<h3 data-id="heading-25">Streamable HTTP çš„åŒè¿æ¥æ¶æ„</h3>
<p>MCP çš„ Streamable HTTP transport ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„ HTTP è¿æ¥ï¼š</p>
<p><strong>è¿æ¥ 1ï¼šPrimary SSE è¿æ¥ï¼ˆå¯é€‰çš„ GET è¯·æ±‚ï¼‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">GET</span> <span class="hljs-string">/mcp</span> <span class="hljs-string">HTTP/1.1</span>
        <span class="hljs-attr">Accept:</span> <span class="hljs-string">text/event-stream</span>
        <span class="hljs-attr">Mcp-Session-Id:</span> <span class="hljs-string">abc123</span>

<span class="hljs-attr">Server:</span> <span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">200</span> <span class="hljs-string">OK</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">text/event-stream</span>
        
        <span class="hljs-string">(é•¿æœŸä¿æŒæ‰“å¼€)</span>
</code></pre>
<p>è¿™ä¸ªè¿æ¥ç”¨äºï¼š</p>
<ul>
<li>æœåŠ¡å™¨ä¸»åŠ¨å‘èµ·çš„è¯·æ±‚ï¼ˆSamplingã€List Rootsï¼‰</li>
<li>Progress é€šçŸ¥</li>
<li>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯çš„å…¶ä»–é€šä¿¡</li>
</ul>
<p><strong>è¿æ¥ 2ï¼šTool-Specific SSE è¿æ¥ï¼ˆPOST è¯·æ±‚ï¼‰</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">POST</span> <span class="hljs-string">/mcp</span> <span class="hljs-string">HTTP/1.1</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json</span>
        <span class="hljs-attr">Accept:</span> <span class="hljs-string">application/json,</span> <span class="hljs-string">text/event-stream</span>
        <span class="hljs-attr">Mcp-Session-Id:</span> <span class="hljs-string">abc123</span>
        
        {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"method"</span><span class="hljs-string">:"tools/call"</span>,<span class="hljs-string">...</span>}

<span class="hljs-attr">Server:</span> <span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">200</span> <span class="hljs-string">OK</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">text/event-stream</span>
        
        <span class="hljs-attr">data:</span> {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"method"</span><span class="hljs-string">:"notifications/message"</span>,<span class="hljs-string">...</span>}
        <span class="hljs-attr">data:</span> {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"result"</span><span class="hljs-string">:</span>{<span class="hljs-string">...</span>}}
        
        <span class="hljs-string">(è¿æ¥å…³é—­)</span>
</code></pre>
<p>è¿™ä¸ªè¿æ¥ç”¨äºï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯å‘èµ·çš„è¯·æ±‚ï¼ˆToolsã€Resourcesã€Promptsï¼‰</li>
<li>Logging æ¶ˆæ¯ï¼ˆåœ¨å¤„ç†è¯·æ±‚è¿‡ç¨‹ä¸­ï¼‰</li>
<li>è¯·æ±‚çš„æœ€ç»ˆç»“æœ</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤ä¸ªè¿æ¥ï¼Ÿ</strong></p>
<p><strong>æ¶ˆæ¯è·¯ç”±</strong>ã€‚ä¸åŒç±»å‹çš„æ¶ˆæ¯éœ€è¦é€šè¿‡ä¸åŒçš„è¿æ¥ä¼ è¾“ï¼š</p>
<ul>
<li>Progress é€šçŸ¥ â†’ Primary SSEï¼ˆå¯èƒ½åœ¨å·¥å…·æ‰§è¡ŒæœŸé—´çš„ä»»ä½•æ—¶å€™å‘é€ï¼‰</li>
<li>Logging æ¶ˆæ¯ â†’ Tool-Specific SSEï¼ˆä¸ç‰¹å®šçš„å·¥å…·è°ƒç”¨ç›¸å…³ï¼‰</li>
<li>Sampling è¯·æ±‚ â†’ Primary SSEï¼ˆæœåŠ¡å™¨ä¸»åŠ¨å‘èµ·ï¼‰</li>
<li>å·¥å…·ç»“æœ â†’ Tool-Specific SSEï¼ˆå¯¹ POST è¯·æ±‚çš„å“åº”ï¼‰</li>
</ul>
<p><strong>è¿æ¥ç®¡ç†</strong>ã€‚Primary SSE è¿æ¥æ˜¯é•¿æœŸçš„ï¼ˆå¯èƒ½ä¿æŒæ•°å°æ—¶ï¼‰ï¼Œè€Œ Tool-Specific SSE è¿æ¥æ˜¯çŸ­æš‚çš„ï¼ˆè¯·æ±‚å®Œæˆåç«‹å³å…³é—­ï¼‰ã€‚</p>
<h3 data-id="heading-26">å®Œæ•´çš„é€šä¿¡æµç¨‹ç¤ºä¾‹</h3>
<p>è®©æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸ªå®Œæ•´çš„å·¥å…·è°ƒç”¨ï¼š</p>
<p><strong>åˆå§‹åŒ–é˜¶æ®µ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Step 1: Client â†’ Server (POST)
POST /mcp
{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"initialize"</span>,...,<span class="hljs-string">"id"</span>:1}

Step 2: Server â†’ Client (HTTP Response)
HTTP/1.1 200 OK
Mcp-Session-Id: abc123
{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"result"</span>:{...},<span class="hljs-string">"id"</span>:1}

Step 3: Client â†’ Server (POST)
POST /mcp
Mcp-Session-Id: abc123
{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/initialized"</span>}

Server: HTTP/1.1 202 Accepted
</code></pre>
<p><strong>å»ºç«‹ Primary SSE è¿æ¥</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Step 4: Client â†’ Server (GET)
GET /mcp
Mcp-Session-Id: abc123

Server: HTTP/1.1 200 OK
Content-Type: text/event-stream
(è¿æ¥ä¿æŒæ‰“å¼€)
</code></pre>
<p><strong>è°ƒç”¨å·¥å…·ï¼ˆå¸¦ Progress å’Œ Samplingï¼‰</strong> ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Step 5: Client â†’ Server (POST)
POST /mcp
Mcp-Session-Id: abc123
{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"tools/call"</span>,...,<span class="hljs-string">"id"</span>:2}

Server: HTTP/1.1 200 OK
Content-Type: text/event-stream

Step 6: Server â†’ Client (é€šè¿‡ Primary SSE)
data: {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/progress"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"progress"</span>:10,<span class="hljs-string">"total"</span>:100}}

Step 7: Server â†’ Client (é€šè¿‡ Tool-Specific SSE)
data: {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"notifications/message"</span>,<span class="hljs-string">"params"</span>:{<span class="hljs-string">"level"</span>:<span class="hljs-string">"info"</span>,<span class="hljs-string">"data"</span>:<span class="hljs-string">"æ­£åœ¨æŠ“å–..."</span>}}

Step 8: Server â†’ Client (é€šè¿‡ Primary SSEï¼ŒSampling è¯·æ±‚)
data: {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"method"</span>:<span class="hljs-string">"sampling/createMessage"</span>,...,<span class="hljs-string">"id"</span>:100}

Step 9: Client â†’ Server (POSTï¼Œå“åº” Sampling)
POST /mcp
Mcp-Session-Id: abc123
{<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"result"</span>:{...},<span class="hljs-string">"id"</span>:100}

Step 10: Server â†’ Client (é€šè¿‡ Tool-Specific SSEï¼Œæœ€ç»ˆç»“æœ)
data: {<span class="hljs-string">"jsonrpc"</span>:<span class="hljs-string">"2.0"</span>,<span class="hljs-string">"result"</span>:{...},<span class="hljs-string">"id"</span>:2}

(Tool-Specific SSE è¿æ¥å…³é—­)
</code></pre>
<p>ä»è¿™ä¸ªæµç¨‹å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>Primary SSE å§‹ç»ˆä¿æŒæ‰“å¼€</li>
<li>æ¯ä¸ªå·¥å…·è°ƒç”¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Tool-Specific SSE è¿æ¥</li>
<li>Progress é€šçŸ¥é€šè¿‡ Primary SSEï¼ŒLogging é€šè¿‡ Tool-Specific SSE</li>
<li>Sampling è¯·æ±‚é€šè¿‡ Primary SSEï¼Œå“åº”é€šè¿‡ POST</li>
</ul>
<h3 data-id="heading-27">Session IDï¼šè¿æ¥çŠ¶æ€çš„å…³é”®</h3>
<p>æ‰€æœ‰ HTTP è¯·æ±‚éƒ½æºå¸¦ <code>Mcp-Session-Id</code> å¤´ã€‚è¿™ä¸ª ID ç”¨äºï¼š</p>
<p><strong>å…³è”å¤šä¸ªè¿æ¥</strong>ã€‚æœåŠ¡å™¨å¯èƒ½åŒæ—¶å¤„ç†æ•°åƒä¸ªå®¢æˆ·ç«¯ï¼Œæ¯ä¸ªå®¢æˆ·ç«¯æœ‰ 1-2 ä¸ª SSE è¿æ¥ã€‚Session ID è®©æœåŠ¡å™¨çŸ¥é“å“ªäº›è¿æ¥å±äºåŒä¸€ä¸ªå®¢æˆ·ç«¯ã€‚</p>
<p><strong>çŠ¶æ€ç®¡ç†</strong>ã€‚æœåŠ¡å™¨éœ€è¦è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ç«¯çš„çŠ¶æ€ï¼ˆå·²åˆå§‹åŒ–ï¼Ÿæ”¯æŒå“ªäº›èƒ½åŠ›ï¼Ÿï¼‰ã€‚</p>
<p><strong>å®‰å…¨éš”ç¦»</strong>ã€‚ä¸åŒå®¢æˆ·ç«¯çš„æ¶ˆæ¯ä¸èƒ½æ··æ·†ã€‚</p>
<p>Session ID çš„ç”Ÿæˆé€šå¸¸æ˜¯ï¼š</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> uuid
session_id = <span class="hljs-built_in">str</span>(uuid.uuid4())
</code></pre>
<p>æˆ–è€…ä½¿ç”¨ JWTï¼ˆåŒ…å«åŠ å¯†ç­¾åå’Œè¿‡æœŸæ—¶é—´ï¼‰ã€‚</p>
<h3 data-id="heading-28">åè®®ç‰ˆæœ¬åå•†</h3>
<p>æ¯ä¸ª HTTP è¯·æ±‚è¿˜æºå¸¦ <code>MCP-Protocol-Version</code> å¤´ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">MCP-Protocol-Version:</span> <span class="hljs-number">2024-11-05</span>
</code></pre>
<p>è¿™è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯æ”¯æŒå“ªä¸ªç‰ˆæœ¬çš„åè®®ã€‚å¦‚æœæœåŠ¡å™¨ä¸æ”¯æŒè¿™ä¸ªç‰ˆæœ¬ï¼Œåº”è¯¥è¿”å› 400 Bad Requestã€‚</p>
<h2 data-id="heading-29">stateless_http å’Œ json_responseï¼šåŠŸèƒ½ä¸æ‰©å±•æ€§çš„æƒè¡¡</h2>
<h3 data-id="heading-30">æ¨ªå‘æ‰©å±•çš„éš¾é¢˜</h3>
<p>å‡è®¾ä½ çš„ MCP æœåŠ¡å™¨å¾ˆæˆåŠŸï¼Œç”¨æˆ·é‡æš´æ¶¨ã€‚å•ä¸ªæœåŠ¡å™¨å®ä¾‹æ— æ³•å¤„ç†æ‰€æœ‰è¯·æ±‚ï¼Œä½ éœ€è¦æ¨ªå‘æ‰©å±•ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">                    â”Œâ”€â”€â”€ <span class="hljs-built_in">Server</span> A
<span class="hljs-built_in">Client</span> â”€â”€â”€ LB â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€ <span class="hljs-built_in">Server</span> B
                    â””â”€â”€â”€ <span class="hljs-built_in">Server</span> C
</code></pre>
<p>ä½† MCP çš„åŒè¿æ¥æ¶æ„æœ‰ä¸ªé—®é¢˜ï¼š</p>
<p><strong>åŒä¸€ä¸ªå®¢æˆ·ç«¯çš„ä¸¤ä¸ªè¿æ¥å¯èƒ½è¢«è·¯ç”±åˆ°ä¸åŒçš„æœåŠ¡å™¨</strong>ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Client</span> çš„ Primary SSE â”€â”€â†’ LB â”€â”€â†’ <span class="hljs-built_in">Server</span> A
<span class="hljs-built_in">Client</span> çš„ POST è¯·æ±‚   â”€â”€â†’ LB â”€â”€â†’ <span class="hljs-built_in">Server</span> B
</code></pre>
<p>ç°åœ¨é—®é¢˜æ¥äº†ï¼š</p>
<p><strong>åœºæ™¯ 1ï¼šå·¥å…·éœ€è¦ Sampling</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1.</span> <span class="hljs-built_in">Client</span> POST åˆ° <span class="hljs-built_in">Server</span> Bï¼šè°ƒç”¨ research å·¥å…·
<span class="hljs-number">2.</span> <span class="hljs-built_in">Server</span> B éœ€è¦è°ƒç”¨ Claudeï¼ˆSamplingï¼‰
<span class="hljs-number">3.</span> <span class="hljs-built_in">Server</span> B å°è¯•é€šè¿‡ Primary SSE å‘é€ Sampling è¯·æ±‚
<span class="hljs-number">4.</span> ä½† Primary SSE è¿æ¥åœ¨ <span class="hljs-built_in">Server</span> Aï¼
<span class="hljs-number">5.</span> <span class="hljs-built_in">Server</span> B æ— æ³•å‘ <span class="hljs-built_in">Client</span> å‘é€è¯·æ±‚
</code></pre>
<p><strong>åœºæ™¯ 2ï¼šProgress é€šçŸ¥</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1.</span> <span class="hljs-built_in">Client</span> POST åˆ° <span class="hljs-built_in">Server</span> Cï¼šè°ƒç”¨é•¿æ—¶é—´è¿è¡Œçš„å·¥å…·
<span class="hljs-number">2.</span> <span class="hljs-built_in">Server</span> C è°ƒç”¨ ctx.<span class="hljs-built_in">report_progress</span>()
<span class="hljs-number">3.</span> <span class="hljs-built_in">Server</span> C å°è¯•é€šè¿‡ Primary SSE å‘é€é€šçŸ¥
<span class="hljs-number">4.</span> ä½† Primary SSE è¿æ¥åœ¨ <span class="hljs-built_in">Server</span> Aï¼
<span class="hljs-number">5.</span> <span class="hljs-built_in">Client</span> æ”¶ä¸åˆ°è¿›åº¦æ›´æ–°
</code></pre>
<h3 data-id="heading-31">è§£å†³æ–¹æ¡ˆ 1ï¼šSticky Sessions</h3>
<p>ä¸€ä¸ªå¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯<strong>ç²˜æ€§ä¼šè¯</strong>ï¼šè´Ÿè½½å‡è¡¡å™¨æ ¹æ® Session ID å°†åŒä¸€å®¢æˆ·ç«¯çš„æ‰€æœ‰è¯·æ±‚è·¯ç”±åˆ°åŒä¸€æœåŠ¡å™¨ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Client</span> (Session abc123) çš„æ‰€æœ‰è¯·æ±‚ â”€â”€â†’ LB â”€â”€â†’ <span class="hljs-function"><span class="hljs-built_in">Server</span> A
<span class="hljs-title">Client</span> <span class="hljs-params">(Session def456)</span> çš„æ‰€æœ‰è¯·æ±‚ â”€â”€â†’ LB â”€â”€â†’ <span class="hljs-built_in">Server</span> B
</span></code></pre>
<p>è¿™è§£å†³äº†è¿æ¥åˆ†æ•£çš„é—®é¢˜ï¼Œä½†å¼•å…¥äº†æ–°é—®é¢˜ï¼š</p>
<p><strong>è´Ÿè½½ä¸å‡è¡¡</strong>ã€‚å¦‚æœ Server A çš„å®¢æˆ·ç«¯éƒ½æ˜¯é‡åº¦ç”¨æˆ·ï¼ŒServer A ä¼šè¿‡è½½ã€‚</p>
<p><strong>Session äº²å’Œæ€§çš„å¤æ‚æ€§</strong>ã€‚éœ€è¦é…ç½®è´Ÿè½½å‡è¡¡å™¨æ”¯æŒç²˜æ€§ä¼šè¯ã€‚</p>
<p><strong>æ— æ³•çœŸæ­£æ‰©å±•</strong>ã€‚å¦‚æœ Server A å´©æºƒï¼Œå®ƒçš„æ‰€æœ‰å®¢æˆ·ç«¯ä¼šè¯éƒ½ä¸¢å¤±ã€‚</p>
<h3 data-id="heading-32">è§£å†³æ–¹æ¡ˆ 2ï¼šstateless_http=True</h3>
<p>MCP æä¾›äº†ä¸€ä¸ªæ¿€è¿›çš„è§£å†³æ–¹æ¡ˆï¼š<strong>å®Œå…¨æ”¾å¼ƒçŠ¶æ€ç®¡ç†å’ŒåŒå‘é€šä¿¡</strong>ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">mcp.run(<span class="hljs-attr">transport</span>=<span class="hljs-string">"http"</span>, stateless_http=<span class="hljs-literal">True</span>)
</code></pre>
<p>å¯ç”¨åï¼Œè¡Œä¸ºå˜åŒ–ï¼š</p>
<p><strong>ä¸å†ç”Ÿæˆ Session ID</strong>ã€‚æœåŠ¡å™¨åœ¨ Initialize Result ä¸­ä¸è¿”å› <code>Mcp-Session-Id</code> å¤´ã€‚å®¢æˆ·ç«¯åç»­è¯·æ±‚ä¹Ÿä¸éœ€è¦ï¼ˆä¹Ÿä¸åº”è¯¥ï¼‰æºå¸¦ Session IDã€‚</p>
<p><strong>ä¸æ”¯æŒ Primary SSE è¿æ¥</strong>ã€‚å®¢æˆ·ç«¯å°è¯• <code>GET /mcp</code> ä¼šè¿”å› <code>405 Method Not Allowed</code>ã€‚è¿™æ„å‘³ç€æœåŠ¡å™¨æ— æ³•ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€ä»»ä½•æ¶ˆæ¯ã€‚</p>
<p><strong>æ‰€æœ‰æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯çš„è¯·æ±‚å¤±æ•ˆ</strong>ï¼š</p>
<ul>
<li><code>ctx.session.create_message()</code> ä¼šç«‹å³æŠ›å‡ºå¼‚å¸¸ï¼ˆæ— æ³• Samplingï¼Œå› ä¸ºæ— æ³•å‘å®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼‰</li>
<li><code>ctx.session.list_roots()</code> ä¼šå¤±è´¥ï¼ˆæ— æ³•è¯·æ±‚å®¢æˆ·ç«¯æä¾› Roots åˆ—è¡¨ï¼‰</li>
<li>æœåŠ¡å™¨æ— æ³•å‘é€ä»»ä½•éœ€è¦å®¢æˆ·ç«¯å“åº”çš„è¯·æ±‚</li>
</ul>
<p><strong>æ‰€æœ‰é€šçŸ¥è¢«æ‚„æ‚„ä¸¢å¼ƒ</strong>ï¼š</p>
<ul>
<li><code>ctx.report_progress(50, 100)</code> ä¸ä¼šæŠ¥é”™ï¼Œä½†æ¶ˆæ¯ä¼šè¢«ä¸¢å¼ƒï¼Œå®¢æˆ·ç«¯æ°¸è¿œæ”¶ä¸åˆ°</li>
<li><code>ctx.info("æ—¥å¿—æ¶ˆæ¯")</code> åŒæ ·è¢«ä¸¢å¼ƒï¼ˆé™¤éå¯ç”¨ json_response=Falseï¼Œå¯ä»¥é€šè¿‡ Tool-Specific SSE å‘é€ï¼‰</li>
<li>æœåŠ¡å™¨å‘é€çš„ Resource Updatedã€Tool List Changed ç­‰é€šçŸ¥å…¨éƒ¨å¤±æ•ˆ</li>
</ul>
<p><strong>ä½†è·å¾—äº†å®Œå…¨çš„æ— çŠ¶æ€æ€§</strong>ï¼š</p>
<p>æ¯ä¸ª POST è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ã€åŸå­çš„äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯è¿™æ ·çš„æµç¨‹ï¼š</span>
<span class="hljs-comment"># 1. å®¢æˆ·ç«¯ POST è¯·æ±‚</span>
<span class="hljs-comment"># 2. æœåŠ¡å™¨å¤„ç†ï¼ˆä¸ä¾èµ–ä»»ä½•ä¼šè¯çŠ¶æ€ï¼‰</span>
<span class="hljs-comment"># 3. æœåŠ¡å™¨è¿”å›ç»“æœ</span>
<span class="hljs-comment"># 4. è¿æ¥å…³é—­ï¼ŒæœåŠ¡å™¨é‡Šæ”¾æ‰€æœ‰èµ„æº</span>
</code></pre>
<p>è¯·æ±‚å¯ä»¥è¢«è·¯ç”±åˆ°ä»»ä½•æœåŠ¡å™¨å®ä¾‹ï¼Œä»»ä½•å®ä¾‹éƒ½èƒ½å¤„ç†ä»»ä½•è¯·æ±‚ï¼Œå› ä¸ºæ²¡æœ‰çŠ¶æ€éœ€è¦å…±äº«ã€‚</p>
<p><strong>è¿˜æœ‰ä¸€ä¸ªæ„å¤–çš„å¥½å¤„ï¼šè·³è¿‡åˆå§‹åŒ–æ¡æ‰‹</strong>ã€‚</p>
<p>åœ¨æ— çŠ¶æ€æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥ç›´æ¥å‘é€å·¥å…·è°ƒç”¨è¯·æ±‚ï¼Œä¸éœ€è¦å…ˆè¿›è¡Œä¸‰æ­¥æ¡æ‰‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// å¯ä»¥ç›´æ¥å‘é€ï¼Œæ— éœ€åˆå§‹åŒ–</span>
POST /mcp
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"add"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"a"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"b"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æœåŠ¡å™¨ä¼šå‡è®¾æ‰€æœ‰è¯·æ±‚éƒ½æ¥è‡ªåŒ¿åå®¢æˆ·ç«¯ï¼Œç›´æ¥å¤„ç†å¹¶è¿”å›ç»“æœã€‚</p>
<h3 data-id="heading-33">json_responseï¼šç¦ç”¨æµå¼å“åº”</h3>
<p><code>json_response=True</code> æ˜¯ä¸€ä¸ªæ›´æ¸©å’Œçš„é™åˆ¶ï¼Œåªå½±å“ POST è¯·æ±‚çš„å“åº”æ ¼å¼ã€‚</p>
<p><strong>æ­£å¸¸æ¨¡å¼</strong>ï¼ˆjson_response=Falseï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">POST</span> <span class="hljs-string">/mcp</span>
        {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"method"</span><span class="hljs-string">:"tools/call"</span>,<span class="hljs-string">...</span>}

<span class="hljs-attr">Server:</span> <span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">200</span> <span class="hljs-string">OK</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">text/event-stream</span>
        
        <span class="hljs-attr">data:</span> {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"method"</span><span class="hljs-string">:"notifications/message"</span>,<span class="hljs-string">...</span>}
        <span class="hljs-attr">data:</span> {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"result"</span><span class="hljs-string">:</span>{<span class="hljs-string">...</span>}}
</code></pre>
<p><strong>JSON æ¨¡å¼</strong>ï¼ˆjson_response=Trueï¼‰ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Client:</span> <span class="hljs-string">POST</span> <span class="hljs-string">/mcp</span>
        {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"method"</span><span class="hljs-string">:"tools/call"</span>,<span class="hljs-string">...</span>}

<span class="hljs-attr">Server:</span> <span class="hljs-string">HTTP/1.1</span> <span class="hljs-number">200</span> <span class="hljs-string">OK</span>
        <span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/json</span>
        
        {<span class="hljs-string">"jsonrpc"</span><span class="hljs-string">:"2.0"</span>,<span class="hljs-string">"result"</span><span class="hljs-string">:</span>{<span class="hljs-string">...</span>}}
</code></pre>
<p><strong>å¤±å»çš„åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>å·¥å…·æ‰§è¡ŒæœŸé—´çš„æ—¥å¿—æ¶ˆæ¯ï¼ˆ<code>ctx.info()</code>ï¼‰ä¸ä¼šå‘é€</li>
<li>å®¢æˆ·ç«¯åªèƒ½ç­‰å¾…æœ€ç»ˆç»“æœ</li>
</ul>
<p><strong>ä¿ç•™çš„åŠŸèƒ½</strong>ï¼š</p>
<ul>
<li>Progress é€šçŸ¥ä»ç„¶å¯ä»¥å·¥ä½œï¼ˆå¦‚æœæ²¡æœ‰å¯ç”¨ stateless_httpï¼Œä»é€šè¿‡ Primary SSE å‘é€ï¼‰</li>
<li>Sampling ä»ç„¶å¯ä»¥å·¥ä½œ</li>
<li>æœ€ç»ˆç»“æœæ­£å¸¸è¿”å›</li>
</ul>
<h3 data-id="heading-34">åŠŸèƒ½æŸå¤±å¯¹æ¯”è¡¨</h3>

































































<table><thead><tr><th>åŠŸèƒ½</th><th>é»˜è®¤é…ç½®</th><th>json_response=True</th><th>stateless_http=True</th></tr></thead><tbody><tr><td><strong>åŸºç¡€å·¥å…·è°ƒç”¨</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td><strong>Resources &amp; Prompts</strong></td><td>âœ…</td><td>âœ…</td><td>âœ…</td></tr><tr><td><strong>Session ID</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td><strong>åˆå§‹åŒ–æ¡æ‰‹</strong></td><td>å¿…é¡»</td><td>å¿…é¡»</td><td>å¯é€‰</td></tr><tr><td><strong>Sampling</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td><strong>Progress é€šçŸ¥</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td><strong>Loggingï¼ˆå·¥å…·å†…ï¼‰</strong></td><td>âœ…</td><td>âŒ</td><td>âŒ</td></tr><tr><td><strong>æœåŠ¡å™¨ â†’ å®¢æˆ·ç«¯è¯·æ±‚</strong></td><td>âœ…</td><td>âœ…</td><td>âŒ</td></tr><tr><td><strong>æ¨ªå‘æ‰©å±•</strong></td><td>âŒ éœ€è¦ Sticky</td><td>âŒ éœ€è¦ Sticky</td><td>âœ…</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AIGCæ—¶ä»£çš„æ•°æ®æ“ä½œé©å‘½ï¼šç”¨è‡ªç„¶è¯­è¨€è½»æ¾ç©è½¬SQLiteæ•°æ®åº“]]></title>    <link>https://juejin.cn/post/7575093624902484009</link>    <guid>https://juejin.cn/post/7575093624902484009</guid>    <pubDate>2025-11-22T11:46:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575093624902484009" data-draft-id="7575230119104004137" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AIGCæ—¶ä»£çš„æ•°æ®æ“ä½œé©å‘½ï¼šç”¨è‡ªç„¶è¯­è¨€è½»æ¾ç©è½¬SQLiteæ•°æ®åº“"/> <meta itemprop="keywords" content="SQLite,AIGC"/> <meta itemprop="datePublished" content="2025-11-22T11:46:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¼šjs"/> <meta itemprop="url" content="https://juejin.cn/user/2517262684662348"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AIGCæ—¶ä»£çš„æ•°æ®æ“ä½œé©å‘½ï¼šç”¨è‡ªç„¶è¯­è¨€è½»æ¾ç©è½¬SQLiteæ•°æ®åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2517262684662348/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¼šjs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:46:01.000Z" title="Sat Nov 22 2025 11:46:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AIGCæ—¶ä»£çš„æ•°æ®æ“ä½œé©å‘½ï¼šç”¨è‡ªç„¶è¯­è¨€è½»æ¾ç©è½¬SQLiteæ•°æ®åº“</h2>
<blockquote>
<p>å‘Šåˆ«ç¹ççš„SQLè¯­æ³•ï¼Œè®©AIæˆä¸ºä½ çš„ä¸“å±æ•°æ®åº“åŠ©æ‰‹</p>
</blockquote>
<p>åœ¨ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘ä¸­ï¼Œæ•°æ®åº“æ“ä½œä¸€ç›´æ˜¯å¼€å‘è€…å¿…é¡»æŒæ¡çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æ— è®ºæ˜¯ç®€å•çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰è¿˜æ˜¯å¤æ‚çš„å¤šè¡¨å…³è”æŸ¥è¯¢ï¼Œéƒ½éœ€è¦ç¼–å†™ç²¾ç¡®çš„SQLè¯­å¥ã€‚ä½†éšç€AIGCæŠ€æœ¯çš„çˆ†å‘å¼å‘å±•ï¼Œè¿™ä¸€ç°çŠ¶æ­£åœ¨è¢«å½»åº•æ”¹å˜ã€‚</p>
<h3 data-id="heading-1">ä»SQLåˆ°è‡ªç„¶è¯­è¨€ï¼šæ•°æ®åº“æ“ä½œçš„èŒƒå¼è½¬ç§»</h3>
<p><strong>SQLçš„å­¦ä¹ æˆæœ¬</strong>ä¸€ç›´æ˜¯æ–°æ‰‹å¼€å‘è€…é¢ä¸´çš„æŒ‘æˆ˜ã€‚è®°å¾—æˆ‘åˆšå­¦ä¹ æ•°æ®åº“æ—¶ï¼Œå…‰æ˜¯ç†è§£å„ç§JOINæ“ä½œå°±èŠ±äº†å¤§é‡æ—¶é—´ã€‚è€Œå¦‚ä»Šï¼Œå€ŸåŠ©AIGCæŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œè®©AIè‡ªåŠ¨ç”Ÿæˆå¯¹åº”çš„SQLæŸ¥è¯¢ã€‚ è¿™ç§è½¬å˜ä¸ä»…é™ä½äº†æŠ€æœ¯é—¨æ§›ï¼Œæ›´<strong>å¤§å¹…æå‡äº†å¼€å‘æ•ˆç‡</strong>ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ éœ€è¦æŸ¥è¯¢â€œå¼€å‘éƒ¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„â€æ—¶ï¼Œä¸å†éœ€è¦å›å¿†SQLè¯­æ³•ï¼Œåªéœ€ç”¨ä¸­æ–‡æè¿°éœ€æ±‚ï¼ŒAIå°±èƒ½å¸®ä½ ç”Ÿæˆå‡†ç¡®çš„SQLè¯­å¥ã€‚</p>
<h3 data-id="heading-2">SQLiteï¼šè½»é‡çº§æ•°æ®åº“çš„ç‹è€…</h3>
<p>åœ¨ä¼—å¤šæ•°æ®åº“é€‰é¡¹ä¸­ï¼Œ<strong>SQLite</strong>ä»¥å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿æˆä¸ºAIGCæ—¶ä»£çš„ç†æƒ³é€‰æ‹©ï¼š <strong>æ— éœ€ç‹¬ç«‹æœåŠ¡</strong>ï¼šä¸MySQLã€PostgreSQLç­‰éœ€è¦å®‰è£…å’Œé…ç½®æ•°æ®åº“æœåŠ¡çš„ç³»ç»Ÿä¸åŒï¼ŒSQLiteæ˜¯åµŒå…¥å¼æ•°æ®åº“ï¼Œæ•´ä¸ªæ•°æ®åº“å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œæ— éœ€é¢å¤–æœåŠ¡æ”¯æŒã€‚ <strong>å¾®ä¿¡çš„å®è·µ</strong>ï¼šä½ å¯èƒ½ä¸çŸ¥é“ï¼Œå¾®ä¿¡çš„æœ¬åœ°èŠå¤©è®°å½•å°±ä½¿ç”¨SQLiteè¿›è¡Œå­˜å‚¨ã€‚è¿™ç§<strong>æœ¬åœ°åŒ–å­˜å‚¨</strong>æ–¹æ¡ˆé¿å…äº†é¢‘ç¹çš„ç½‘ç»œè¯·æ±‚ï¼Œæä¾›äº†æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚ <strong>ç®€å•æ˜“ç”¨</strong>ï¼šå‡ è¡Œä»£ç å°±èƒ½å»ºç«‹è¿æ¥å¹¶å¼€å§‹æ“ä½œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import sqlite3
<span class="hljs-attr">conn</span> = sqlite3.connect(<span class="hljs-string">"test.db"</span>)  <span class="hljs-comment"># è¿æ¥æ•°æ®åº“</span>
<span class="hljs-attr">cursor</span> = conn.cursor()  <span class="hljs-comment"># åˆ›å»ºæ¸¸æ ‡</span>
</code></pre>
<p>æ¸¸æ ‡ï¼ˆcursorï¼‰åœ¨è¿™é‡Œå……å½“<strong>å‘½ä»¤æ‰§è¡Œå™¨</strong>çš„è§’è‰²ï¼Œè€Œè¿æ¥å¥æŸ„ï¼ˆconnï¼‰è´Ÿè´£ç»´æŠ¤æ•°æ®åº“è¿æ¥ã€‚è®°å¾—æ“ä½œå®Œæˆåè°ƒç”¨<code>conn.close()</code>å…³é—­è¿æ¥ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼ã€‚</p>
<h3 data-id="heading-3">å®æˆ˜ï¼šæ„å»ºå‘˜å·¥ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•ç»“åˆSQLiteå’ŒAIGCæŠ€æœ¯æ„å»ºä¸€ä¸ªå®ç”¨çš„ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-4">æ•°æ®åº“åˆå§‹åŒ–</h4>
<p>é¦–å…ˆåˆ›å»ºå‘˜å·¥è¡¨ï¼ŒåŒ…å«IDã€å§“åã€éƒ¨é—¨å’Œå·¥èµ„å­—æ®µï¼š</p>
<pre><code class="hljs language-python" lang="python">cursor.execute(<span class="hljs-string">"""CREATE TABLE IF NOT EXISTS employees(
    id INTEGER PRIMARY KEY,  # ä¸»é”®ï¼Œè‡ªåŠ¨é€’å¢
    name TEXT,
    department TEXT,
    salary INTEGER
) """</span>)
</code></pre>
<p><strong>PRIMARY KEY</strong>å…³é”®å­—å°†idåˆ—è®¾ç½®ä¸ºä¸»é”®ï¼Œç¡®ä¿æ¯æ¡è®°å½•çš„å”¯ä¸€æ€§ã€‚</p>
<h4 data-id="heading-5">æ’å…¥ç¤ºä¾‹æ•°æ®</h4>
<pre><code class="hljs language-scss" lang="scss">sample_data = <span class="hljs-selector-attr">[    (1, <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"å¼€å‘éƒ¨"</span>, 32000),    (2, <span class="hljs-string">"æå››"</span>, <span class="hljs-string">"é”€å”®éƒ¨"</span>, 20000),    (3, <span class="hljs-string">"ç‹äº”"</span>, <span class="hljs-string">"å¼€å‘éƒ¨"</span>, 35000),]</span>
<span class="hljs-attribute">cursor</span><span class="hljs-selector-class">.executemany</span>("INSERT INTO employees VALUES(?,?,?,?)", sample_data)
conn<span class="hljs-selector-class">.commit</span>()  # æäº¤äº‹åŠ¡
</code></pre>
<p>ä½¿ç”¨<strong>executemany</strong>æ–¹æ³•å¯ä»¥æ‰¹é‡æ’å…¥æ•°æ®ï¼Œæ¯”å¾ªç¯æ‰§è¡Œå•æ¡INSERTè¯­å¥æ•ˆç‡æ›´é«˜ã€‚</p>
<h4 data-id="heading-6">è·å–è¡¨ç»“æ„ä¿¡æ¯</h4>
<p><strong>PRAGMA table_info()</strong> æ˜¯SQLiteç‰¹æœ‰çš„å‘½ä»¤ï¼Œç”¨äºè·å–è¡¨çš„å…ƒæ•°æ®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">schema</span> = cursor.execute(<span class="hljs-string">"PRAGMA table_info(employees)"</span>).fetchall()
</code></pre>
<p><strong>fetchall()</strong> æ–¹æ³•è·å–æ‰€æœ‰ç»“æœè¡Œï¼Œè¿”å›æ ¼å¼ä¸ºï¼š<code>[(åˆ—1ä¿¡æ¯), (åˆ—2ä¿¡æ¯), ...]</code>ã€‚æ¯ä¸ªåˆ—ä¿¡æ¯åŒ…å«åç§°ã€æ•°æ®ç±»å‹ç­‰å…ƒæ•°æ®ã€‚</p>
<h3 data-id="heading-7">AIGCä¸SQLçš„å®Œç¾ç»“åˆï¼šPrompt Engineeringå®æˆ˜</h3>
<p>ç°åœ¨æ¥åˆ°æœ€ç²¾å½©çš„éƒ¨åˆ†ï¼šå¦‚ä½•è®©AIç†è§£æˆ‘ä»¬çš„è‡ªç„¶è¯­è¨€éœ€æ±‚å¹¶ç”ŸæˆSQLæŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-8">è®¾è®¡é«˜æ•ˆçš„Prompt</h4>
<p>Promptçš„è®¾è®¡è´¨é‡ç›´æ¥å†³å®šAIç”ŸæˆSQLçš„å‡†ç¡®æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»è¿‡ä¼˜åŒ–çš„æ¨¡æ¿ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">def ask_deepseek(query, schema):
    <span class="hljs-attr">prompt</span> = f<span class="hljs-string">"""
    æ•°æ®åº“Schema:
    {schema}
    
    è¯·æ ¹æ®ä»¥ä¸ŠSchemaï¼Œç”ŸæˆæŸ¥è¯¢ä»¥ä¸‹é—®é¢˜çš„SQLè¯­å¥ã€‚
    è¦æ±‚ï¼š
    1. åªè¾“å‡ºSQLæŸ¥è¯¢ï¼Œä¸è¦æœ‰å…¶ä»–å†…å®¹
    2. ä½¿ç”¨æ ‡å‡†SQLè¯­æ³•
    3. è¡¨åå’Œåˆ—åä¸¥æ ¼æŒ‰Schemaä¸­çš„å®šä¹‰
    
    é—®é¢˜ï¼š{query}
    """</span>
    
    <span class="hljs-attr">response</span> = client.chat.completions.create(
        <span class="hljs-attr">model</span>=<span class="hljs-string">"deepseek-reasoner"</span>,
        <span class="hljs-attr">messages</span>=[{<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt}]
    )
    return response.choices<span class="hljs-section">[0]</span>.message.content
</code></pre>
<p>è¿™ä¸ªPromptçš„<strong>è®¾è®¡ç²¾å¦™ä¹‹å¤„</strong>åœ¨äºï¼š</p>
<ul>
<li><strong>æä¾›å®Œæ•´ä¸Šä¸‹æ–‡</strong>ï¼šåŒ…å«è¡¨ç»“æ„ä¿¡æ¯</li>
<li><strong>æ˜ç¡®çº¦æŸæ¡ä»¶</strong>ï¼šæŒ‡å®šè¾“å‡ºæ ¼å¼å’Œè¯­æ³•è¦æ±‚</li>
<li><strong>éš”ç¦»å…³æ³¨ç‚¹</strong>ï¼šè®©AIä¸“æ³¨äºSQLç”Ÿæˆè¿™ä¸€å•ä¸€ä»»åŠ¡</li>
</ul>
<h4 data-id="heading-9">å®é™…åº”ç”¨ç¤ºä¾‹</h4>
<p>å½“ç”¨æˆ·æé—®ï¼šâ€œå¼€å‘éƒ¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„æ˜¯å¤šå°‘ï¼Ÿâ€æ—¶ï¼ŒAIä¼šç”Ÿæˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">SELECT name, salary FROM employees WHERE <span class="hljs-attr">department</span> = <span class="hljs-string">'å¼€å‘éƒ¨'</span><span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒAIå†…éƒ¨è¿›è¡Œäº†å¤æ‚çš„<strong>æ¨ç†åˆ¤æ–­</strong>ï¼š</p>
<ol>
<li>è¯†åˆ«æŸ¥è¯¢ç›®æ ‡ï¼šéœ€è¦å§“åå’Œå·¥èµ„ä¿¡æ¯</li>
<li>ç¡®å®šè¿‡æ»¤æ¡ä»¶ï¼šéƒ¨é—¨ä¸ºâ€œå¼€å‘éƒ¨â€</li>
<li>æ˜ å°„åˆ°å…·ä½“åˆ—ï¼šnameã€salaryã€department</li>
<li>ç”Ÿæˆç¬¦åˆè¯­æ³•çš„SQLè¯­å¥</li>
</ol>
<h3 data-id="heading-10">æ·±å…¥åŸç†ï¼šAIå¦‚ä½•ç†è§£å¹¶ç”ŸæˆSQL</h3>
<h4 data-id="heading-11">è¯­ä¹‰ç†è§£å±‚</h4>
<p>AIé¦–å…ˆå°†è‡ªç„¶è¯­è¨€æŸ¥è¯¢åˆ†è§£ä¸º<strong>è¯­ä¹‰ç»„ä»¶</strong>ï¼š</p>
<ul>
<li><strong>æŸ¥è¯¢ä¸»ä½“</strong>ï¼šå‘˜å·¥ä¿¡æ¯</li>
<li><strong>ç›®æ ‡å­—æ®µ</strong>ï¼šå§“åã€å·¥èµ„</li>
<li><strong>è¿‡æ»¤æ¡ä»¶</strong>ï¼šéƒ¨é—¨=â€œå¼€å‘éƒ¨â€</li>
</ul>
<h4 data-id="heading-12">ç»“æ„æ˜ å°„å±‚</h4>
<p>å°†è¯­ä¹‰ç»„ä»¶æ˜ å°„åˆ°æ•°æ®åº“Schemaï¼š</p>
<ul>
<li>â€œå§“åâ€ â†’ nameåˆ—ï¼ˆTEXTç±»å‹ï¼‰</li>
<li>â€œå·¥èµ„â€ â†’ salaryåˆ—ï¼ˆINTEGERç±»å‹ï¼‰</li>
<li>â€œå¼€å‘éƒ¨â€ â†’ departmentåˆ—çš„å€¼</li>
</ul>
<h4 data-id="heading-13">SQLç”Ÿæˆå±‚</h4>
<p>æ ¹æ®æ˜ å°„ç»“æœç»„åˆæˆç¬¦åˆè¯­æ³•çš„SQLè¯­å¥ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>SELECTå­å¥ï¼šæŒ‡å®šè¦æ£€ç´¢çš„åˆ—</li>
<li>FROMå­å¥ï¼šæŒ‡å®šæ•°æ®æºè¡¨</li>
<li>WHEREå­å¥ï¼šå®šä¹‰è¿‡æ»¤æ¡ä»¶</li>
</ul>
<h3 data-id="heading-14">é«˜çº§æŠ€å·§ä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-15">å¤„ç†å¤æ‚æŸ¥è¯¢</h4>
<p>å¯¹äºå¤šè¡¨å…³è”ã€åˆ†ç»„ç»Ÿè®¡ç­‰å¤æ‚æŸ¥è¯¢ï¼ŒPromptéœ€è¦æä¾›æ›´è¯¦ç»†çš„ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æä¾›å¤šè¡¨Schemaå’Œå¤–é”®å…³ç³»</span>
<span class="hljs-attr">full_schema</span> = <span class="hljs-string">"""
employeesè¡¨ï¼š
- id INTEGER PRIMARY KEY
- name TEXT
- department_id INTEGER

departmentsè¡¨ï¼š
- id INTEGER PRIMARY KEY  
- name TEXT
- manager_id INTEGER

å¤–é”®å…³ç³»ï¼šemployees.department_id â†’ departments.id
"""</span>
</code></pre>
<h4 data-id="heading-16">é”™è¯¯å¤„ç†ä¸éªŒè¯</h4>
<p><strong>æ°¸è¿œä¸è¦å®Œå…¨ä¿¡ä»»AIç”Ÿæˆçš„SQL</strong>ï¼Œå¿…é¡»æ·»åŠ éªŒè¯å±‚ï¼š</p>
<p>å¦‚ï¼Œæ„å¤–æ›´æ–°æˆ–è€…åˆ é™¤äº†æŸäº›ä¿¡æ¯ï¼Œè¿™æ˜¯æˆ‘ä»¬åº”è¯¥å¿…é¡»æ³¨æ„çš„ä¸€ç‚¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">validate_sql</span>(<span class="hljs-params">sql</span>):
    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«å±é™©æ“ä½œ</span>
    dangerous_keywords = [<span class="hljs-string">'DROP'</span>, <span class="hljs-string">'DELETE'</span>, <span class="hljs-string">'UPDATE'</span>]
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">any</span>(keyword <span class="hljs-keyword">in</span> sql.upper() <span class="hljs-keyword">for</span> keyword <span class="hljs-keyword">in</span> dangerous_keywords):
        <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"æŸ¥è¯¢åŒ…å«å±é™©æ“ä½œ"</span>)
    
    <span class="hljs-comment"># æ‰§è¡Œå‰å…ˆè§£é‡Šï¼ˆEXPLAINï¼‰æ£€æŸ¥è¯­æ³•</span>
    <span class="hljs-keyword">try</span>:
        cursor.execute(<span class="hljs-string">f"EXPLAIN <span class="hljs-subst">{sql}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">except</span> sqlite3.Error <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"SQLè¯­æ³•é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<h4 data-id="heading-17">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h4>
<ol>
<li><strong>ç´¢å¼•ä¼˜åŒ–</strong>ï¼šå¯¹ç»å¸¸æŸ¥è¯¢çš„åˆ—åˆ›å»ºç´¢å¼•</li>
</ol>
<pre><code class="hljs language-scss" lang="scss">CREATE INDEX idx_department ON <span class="hljs-built_in">employees</span>(department);
</code></pre>
<ol>
<li><strong>æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šé¿å…SELECT *ï¼ŒåªæŸ¥è¯¢éœ€è¦çš„åˆ—</li>
<li><strong>è¿æ¥ç®¡ç†</strong>ï¼šä½¿ç”¨è¿æ¥æ± é¿å…é¢‘ç¹å»ºç«‹/æ–­å¼€è¿æ¥</li>
</ol>
<h3 data-id="heading-18">æœªæ¥å±•æœ›ï¼šAIGCåœ¨æ•°æ®åº“é¢†åŸŸçš„åº”ç”¨å‰æ™¯</h3>
<p>éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒAIGCåœ¨æ•°æ®åº“é¢†åŸŸçš„åº”ç”¨å°†æ›´åŠ æ·±å…¥ï¼š <strong>æ™ºèƒ½æŸ¥è¯¢ä¼˜åŒ–</strong>ï¼šAIä¸ä»…èƒ½ç”ŸæˆSQLï¼Œè¿˜èƒ½æ ¹æ®æ•°æ®åˆ†å¸ƒå’ŒæŸ¥è¯¢æ¨¡å¼è‡ªåŠ¨ä¼˜åŒ–æ‰§è¡Œè®¡åˆ’ã€‚ <strong>è‡ªåŠ¨æ•°æ®åº“è®¾è®¡</strong>ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚æè¿°ï¼ŒAIè‡ªåŠ¨æ¨èåˆé€‚çš„è¡¨ç»“æ„å’Œç´¢å¼•æ–¹æ¡ˆã€‚ <strong>è‡ªç„¶è¯­è¨€äº¤äº’å¼åˆ†æ</strong>ï¼šç”¨æˆ·å¯ä»¥ç›´æ¥ç”¨è‡ªç„¶è¯­è¨€ä¸æ•°æ®åº“å¯¹è¯ï¼Œè¿›è¡Œæ¢ç´¢å¼æ•°æ®åˆ†æã€‚</p>
<h3 data-id="heading-19">æ€»ç»“</h3>
<p>AIGCæŠ€æœ¯æ­£åœ¨å½»åº•æ”¹å˜æˆ‘ä»¬ä¸æ•°æ®åº“äº¤äº’çš„æ–¹å¼ã€‚é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•ï¼Œå³ä½¿æ²¡æœ‰æ·±åšSQLåŠŸåº•çš„å¼€å‘è€…ä¹Ÿèƒ½è½»æ¾å®Œæˆå¤æ‚çš„æ•°æ®åº“æ“ä½œã€‚SQLiteä½œä¸ºè½»é‡çº§æ•°æ®åº“çš„ä»£è¡¨ï¼Œä¸AIGCæŠ€æœ¯å½¢æˆäº†å®Œç¾ç»„åˆã€‚ <strong>æŠ€æœ¯æ ˆæ€»ç»“</strong>ï¼š</p>
<ul>
<li>SQLiteï¼šè½»é‡çº§ã€åµŒå…¥å¼æ•°æ®åº“</li>
<li>AIGCï¼šè‡ªç„¶è¯­è¨€åˆ°SQLçš„è½¬æ¢å¼•æ“</li>
<li>Prompt Engineeringï¼šè¿æ¥è‡ªç„¶è¯­è¨€ä¸SQLçš„æ¡¥æ¢</li>
</ul>
<p>è¿™ç§æŠ€æœ¯ç»„åˆç‰¹åˆ«é€‚åˆåŸå‹å¼€å‘ã€å°å‹é¡¹ç›®å’Œæ•°æ®åˆ†æåœºæ™¯ï¼Œèƒ½å¤Ÿæ˜¾è‘—é™ä½å¼€å‘é—¨æ§›ï¼Œæå‡å·¥ä½œæ•ˆç‡ã€‚ æœ€é‡è¦çš„æ˜¯ï¼Œè¿™ç§æ¨¡å¼ä»£è¡¨äº†è½¯ä»¶å¼€å‘çš„ä¸€ä¸ªæ–°æ–¹å‘ï¼š<strong>è®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯æŠ€æœ¯ç»†èŠ‚</strong>ã€‚éšç€AIGCæŠ€æœ¯çš„ä¸æ–­æˆç†Ÿï¼Œæˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼Œè‡ªç„¶è¯­è¨€ç¼–ç¨‹å°†æˆä¸ºæœªæ¥çš„ä¸»æµå¼€å‘èŒƒå¼ã€‚ <strong>åŠ¨æ‰‹è¯•è¯•å§ï¼</strong> â€‹ ç”¨æœ¬æ–‡ä»‹ç»çš„æ–¹æ³•æ„å»ºä½ çš„ç¬¬ä¸€ä¸ªAIGCé©±åŠ¨çš„æ•°æ®åº“åº”ç”¨ï¼Œä½“éªŒè‡ªç„¶è¯­è¨€ç¼–ç¨‹çš„é­…åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä» 0 åˆ° 1ï¼šäº²æµ‹ Doubao-Seed-Code æé€Ÿæ„å»º Chrome â€˜ä¸“æ³¨â€™æ’ä»¶å…¨æµç¨‹]]></title>    <link>https://juejin.cn/post/7575065042158796850</link>    <guid>https://juejin.cn/post/7575065042158796850</guid>    <pubDate>2025-11-22T12:11:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065042158796850" data-draft-id="7575102474639114291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä» 0 åˆ° 1ï¼šäº²æµ‹ Doubao-Seed-Code æé€Ÿæ„å»º Chrome â€˜ä¸“æ³¨â€™æ’ä»¶å…¨æµç¨‹"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-22T12:11:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰‘å…‹ä¸­çš„é»‘æ¡ƒA"/> <meta itemprop="url" content="https://juejin.cn/user/1106580348609019"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä» 0 åˆ° 1ï¼šäº²æµ‹ Doubao-Seed-Code æé€Ÿæ„å»º Chrome â€˜ä¸“æ³¨â€™æ’ä»¶å…¨æµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1106580348609019/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰‘å…‹ä¸­çš„é»‘æ¡ƒA
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T12:11:57.000Z" title="Sat Nov 22 2025 12:11:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c0da837a77646b59b27428601f40d68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=rCGn1y%2FEUGHC0G5%2Bb%2Fmy7sqU3JM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•</h2>
<p>æœ€è¿‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.volcengine.com%2Factivity%2Fcodingplan" target="_blank" title="https://www.volcengine.com/activity/codingplan" ref="nofollow noopener noreferrer">Doubao-Seed-Code æ¨¡å‹</a>çš„çƒ­åº¦å¾ˆé«˜ï¼Œä¸ºäº†çœŸå®æ£€éªŒå®ƒåœ¨ç¼–ç å’Œé¡¹ç›®åä½œä¸Šçš„â€œâ€œå®æˆ˜â€â€èƒ½åŠ›ï¼Œæˆ‘å†³å®šè·³å‡ºå¸¸è§„çš„ç®—æ³•é—®ç­”ï¼Œç›´æ¥ç»™å®ƒä¸Šäº†ä¸€ä¸ªâ€œâ€œé¡¹ç›®å¤§è€ƒâ€â€ï¼š<strong>æˆ‘å°†æ‰®æ¼”äº§å“ç»ç†ï¼Œè®©å®ƒæ‰®æ¼”å¼€å‘è€…ï¼Œä»é›¶å¼€å§‹å¸®æˆ‘å®Œæ•´æ„å»ºä¸€ä¸ªâ€œä¸“æ³¨æ¨¡å¼â€çš„ Chrome æ’ä»¶</strong>ï¼Œä»¥æ­¤æ¥è¯„æµ‹å®ƒåœ¨ç†è§£éœ€æ±‚ã€æ„å»ºæ¡†æ¶ä¹ƒè‡³è§£å†³é—®é¢˜çš„å…¨æµç¨‹è¡¨ç°ã€‚</p>
<h2 data-id="heading-1">å®ƒä¸åªæ˜¯â€œåˆä¸€ä¸ªâ€ç¼–ç æ¨¡å‹ï¼Œæ›´åƒæ˜¯ä¸€åœºâ€œè“„è°‹å·²ä¹…â€çš„é—ªç”µæˆ˜</h2>
<p>æˆ‘æœ‰å‡ ç‚¹éå¸¸ä¸»è§‚çš„çœ‹æ³•ï¼š</p>
<h3 data-id="heading-2">1. â€œåŸç”Ÿè§†è§‰â€æ˜¯æŠ€æœ¯ä¸Šçš„â€œç‹ç‰Œâ€ï¼Œç»ˆäºç­‰åˆ°ä¸€ä¸ªâ€œçœŸÂ·VLMâ€</h3>
<p>å®ƒå¼ºè°ƒè‡ªå·±æ˜¯â€œå›½å†…é¦–ä¸ªâ€è‡ªå¸¦è§†è§‰ç†è§£çš„ç¼–ç æ¨¡å‹ã€‚è¿™ä¸€ç‚¹çœŸçš„æˆ³åˆ°æˆ‘äº†ã€‚ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œæˆ‘å¤ªæ¸…æ¥šç°åœ¨çš„ç—›ç‚¹äº†ã€‚æˆ‘ä»¬ç»å¸¸éœ€è¦æ¨¡å‹â€œçœ‹â€æ‡‚æˆ‘ä»¬çš„UIè®¾è®¡å›¾ã€æµç¨‹å›¾ç”šè‡³æ˜¯éšæ‰‹ç”»çš„ç™½æ¿è‰å›¾ã€‚ä½†è€å®è¯´ï¼ŒåƒKimiæˆ–DeepSeeké‚£äº›æ¨¡å‹ï¼Œå®ƒä»¬å¾ˆå¤šæ—¶å€™æ˜¯é â€œå›¾ç‰‡è½¬æ–‡å­—â€ï¼ˆMCPï¼‰è¿™ç§â€œæ›²çº¿æ•‘å›½â€çš„æ–¹å¼åœ¨çŒœã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ä¿¡æ¯æŠ˜æŸå¾—ä¸€å¡Œç³Šæ¶‚ï¼Œæ•ˆæœè‡ªç„¶è¿œä¸å¦‚åŸç”Ÿçš„VLMã€‚Doubao-Seed-Codeå¦‚æœçœŸå¦‚å®ƒæ‰€è¯´ï¼Œæ˜¯â€œéå·¥å…·è°ƒç”¨â€çš„åŸç”Ÿè§†è§‰ï¼Œé‚£æ„å‘³ç€å®ƒèƒ½<strong>çœŸæ­£â€œçœ‹æ‡‚â€æˆ‘çš„éœ€æ±‚</strong>ã€‚</p>
<p>è¿™åœ¨ä½“éªŒä¸Šæ˜¯å¤©å·®åœ°åˆ«çš„ï¼Œæ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„â€œå¤šæ¨¡æ€ç¼–ç â€ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªâ€œèƒ½èŠå¤©çš„ä»£ç ç¼–è¾‘å™¨â€ã€‚æˆ‘ä¸ªäººè®¤ä¸ºï¼Œè¿™æ‰æ˜¯ç¼–ç AIè¯¥æœ‰çš„æ ·å­ã€‚</p>
<ul>
<li>è¿™ä¸ªåŸºæœ¬å°±æ˜¯å®Œå…¨å¤åˆ»å•Šï½
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a65e2b573a34445f85a2347ee9fc7f8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=qNSYBUw8xumdlfKAPqUzm3s%2BmaU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ul>
<h3 data-id="heading-3">2. å…¼å®¹Claude API æ˜¯â€œæœ€èªæ˜â€çš„å¸‚åœºç­–ç•¥</h3>
<p>å¦‚æœè¯´åŸç”Ÿè§†è§‰æ˜¯æŠ€æœ¯ä¸Šçš„â€œè‚Œè‚‰â€ï¼Œé‚£â€œåŸç”Ÿå…¼å®¹Anthropic APIâ€å°±æ˜¯å•†ä¸šä¸Šâ€œæœ€èªæ˜çš„å¤§è„‘â€ã€‚</p>
<p>å®ƒæ²¡æœ‰é€¼ç€å¼€å‘è€…å»å­¦ä¹ ä¸€å¥—å…¨æ–°çš„APIï¼Œè€Œæ˜¯ç›´æ¥ç„å‡†äº†Claude Codeçš„ç°æœ‰ç”¨æˆ·ç¾¤ã€‚å®ƒè¿™ç­‰äºæ˜¯åœ¨å¯¹æ‰€æœ‰Claudeå¼€å‘è€…å–Šè¯ï¼šâ€œ<strong>å˜¿ï¼Œæƒ³ä¸æƒ³ç”¨ä¸Šæ›´å¼ºçš„åŸç”Ÿè§†è§‰èƒ½åŠ›ï¼Ÿæƒ³ä¸æƒ³è®©æˆæœ¬ç¬é—´é™ä½ï¼Ÿä½ ä»€ä¹ˆéƒ½ä¸ç”¨æ”¹ï¼Œä»£ç é‡Œæ¢ä¸ªAPIåœ°å€å°±è¡Œã€‚</strong>â€</p>
<p>â€œä¸æ»‘æ¥å…¥â€ã€â€œé›¶æˆæœ¬åˆ‡æ¢â€â€”â€”è¿™æ‹›çœŸçš„å¤ªç‹ äº†ã€‚è¿™å¤§å¤§é™ä½äº†æˆ‘ä»¬çš„è¿ç§»é—¨æ§›å’Œå¿ƒç†é˜²çº¿ï¼Œç®€ç›´æ˜¯åœ¨â€œæŠ¢äººâ€ï¼Œè€Œä¸”æ˜¯å…‰æ˜æ­£å¤§åœ°æŠ¢ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70f25e5a94dc47e59ea6726b6297ab73~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=YDD%2BoSIttTRkX4CtmrbdAPYPsew%3D" alt="image-20251117012349190" loading="lazy"/></p>
<h3 data-id="heading-4">3. æè‡´çš„ä½ä»·ï¼Œè¿™æ˜¯â€œæ€æ¡Œå­â€çš„æ‰“æ³•</h3>
<p>æœ€åï¼Œå°±æ˜¯è¿™ä¸ªä»·æ ¼ã€‚</p>
<p>â€œç»¼åˆä½¿ç”¨æˆæœ¬ç›¸æ¯”ä¸šç•Œå¹³å‡æ°´å¹³é™ä½62.7%â€ï¼Œâ€œå›½å†…æœ€ä½ä»·â€ï¼Œâ€œæœ€ä½9.9å…ƒâ€â€¦â€¦</p>
<p>è¿™å·²ç»ä¸æ˜¯â€œæ€§ä»·æ¯”é«˜â€äº†ï¼Œè¿™æ ¹æœ¬å°±æ˜¯â€œä»·æ ¼å± æ€â€ã€‚å®ƒåœ¨ç”¨ç»å¯¹çš„ä½ä»·ï¼Œè¯•å›¾æŠŠæ‰€æœ‰æ½œåœ¨ç”¨æˆ·éƒ½â€œæ‹‰â€è¿›å®ƒçš„ç”Ÿæ€é‡Œã€‚å¯¹äºæˆ‘ä»¬è¿™äº›å¼€å‘è€…ï¼Œå°¤å…¶æ˜¯åˆåˆ›å›¢é˜Ÿå’Œä¸ªäººå¼€å‘è€…æ¥è¯´ï¼Œæˆæœ¬æ˜¯æå…¶æ•æ„Ÿçš„ã€‚<strong>å½“æŠ€æœ¯ï¼ˆåŸç”Ÿè§†è§‰ï¼‰å’Œè¿ç§»æˆæœ¬ï¼ˆå…¼å®¹APIï¼‰éƒ½æ›¿ä½ è€ƒè™‘å¥½äº†ä¹‹åï¼Œå†ç»™ä½ ä¸€ä¸ªæ— æ³•æ‹’ç»çš„ä»·æ ¼</strong>ï¼Œè¿™å¥—ç»„åˆæ‹³ä¸‹æ¥ï¼Œä½ å¾ˆéš¾ä¸åŠ¨å¿ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a94d4fcaf26d445c8bee495190ae708d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=gWmnaE6otuJllobaAmQt6%2F7tuoI%3D" alt="image-20251117012418626" loading="lazy"/></p>
<h2 data-id="heading-5">è¯¦ç»†è§£æï¼š<code>claude-code</code> ç¯å¢ƒå®‰è£…ä¸é…ç½®</h2>
<h3 data-id="heading-6">1: æ›´æ–°ç³»ç»Ÿ</h3>
<pre><code class="hljs language-bash" lang="bash">sudo apt update
sudo apt upgrade -y
</code></pre>
<ul>
<li><strong><code>sudo apt update</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šåŒæ­¥æ‚¨ç³»ç»Ÿä¸­çš„â€œå¯ç”¨è½¯ä»¶åŒ…åˆ—è¡¨â€ã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼šè¿™ä¸ªå‘½ä»¤ä¼šè¿æ¥åˆ° Ubuntu/Debian çš„è½¯ä»¶æºï¼ˆæœåŠ¡å™¨ï¼‰ï¼Œè·å–ä¸€ä»½æœ€æ–°çš„è½¯ä»¶åŒ…ä¿¡æ¯ï¼ˆæ¯”å¦‚å“ªäº›è½¯ä»¶æœ‰æ–°ç‰ˆæœ¬ï¼Œä¾èµ–å…³ç³»æ˜¯ä»€ä¹ˆï¼‰ã€‚å®ƒ<strong>å¹¶ä¸ä¼š</strong>å®é™…å®‰è£…æˆ–å‡çº§ä»»ä½•è½¯ä»¶ï¼Œåªæ˜¯è®©ç³»ç»Ÿâ€œçŸ¥é“â€æœ€æ–°æƒ…å†µã€‚</li>
</ul>
</li>
<li><strong><code>sudo apt upgrade -y</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šå°†æ‚¨ç³»ç»Ÿä¸Šæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼šåœ¨ <code>update</code> è·å–äº†æœ€æ–°ä¿¡æ¯åï¼Œ<code>upgrade</code> ä¼šæ ¹æ®è¿™ä»½ä¿¡æ¯ï¼Œä¸‹è½½å¹¶å®‰è£…æ‰€æœ‰å·²å®‰è£…è½¯ä»¶çš„æ–°ç‰ˆæœ¬ã€‚</li>
<li><strong><code>-y</code></strong> æ ‡å¿—ï¼šè¿™æ˜¯ä¸€ä¸ªè‡ªåŠ¨åº”ç­”ã€‚æ²¡æœ‰å®ƒï¼Œå‡çº§è¿‡ç¨‹ä¸­ç³»ç»Ÿä¼šåå¤è¯¢é—®æ‚¨â€œæ˜¯å¦ç¡®å®šè¦å®‰è£… (Y/n)?â€ï¼Œ<code>-y</code> ä¼šè‡ªåŠ¨å›ç­”â€œæ˜¯(Yes)â€ï¼Œä½¿å‡çº§è¿‡ç¨‹æ— éœ€äººå·¥å¹²é¢„ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong> ç¡®ä¿ç³»ç»Ÿå¤„äºæœ€æ–°çŠ¶æ€ï¼Œæœ‰åŠ©äºæé«˜å®‰å…¨æ€§ï¼ˆå®‰è£…äº†æœ€æ–°çš„å®‰å…¨è¡¥ä¸ï¼‰å’Œå…¼å®¹æ€§ï¼ˆé¿å…æ—§çš„åº“æ–‡ä»¶å¯¼è‡´æ–°è½¯ä»¶æ— æ³•è¿è¡Œï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/336a35da631641c0b84d11c7c86f4ddc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=ezQIh5yO0dAi5aO9%2B0ebpjbKLWs%3D" alt="image-20251117010448022" loading="lazy"/></p>
<h3 data-id="heading-7">2: å®‰è£… Git</h3>
<pre><code class="hljs language-bash" lang="bash">sudo apt install git -y
<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
git --version
</code></pre>
<ul>
<li><strong><code>sudo apt install git -y</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šå®‰è£… <code>Git</code> ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼š<code>Git</code> æ˜¯ç›®å‰å…¨çƒæœ€ä¸»æµçš„ä»£ç ç‰ˆæœ¬ç®¡ç†å·¥å…·ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong> è™½ç„¶ <code>claude-code</code> å·¥å…·æœ¬èº«è¿è¡Œå¯èƒ½ä¸<strong>ç›´æ¥</strong>ä¾èµ– Gitï¼Œä½†åœ¨ä¸€ä¸ªâ€œç¼–ç â€ (Coding) ç›¸å…³çš„AIå·¥å…·ä½¿ç”¨åœºæ™¯ä¸­ï¼Œæ‚¨å‡ ä¹è‚¯å®šéœ€è¦ Git æ¥å…‹éš†ï¼ˆcloneï¼‰ä»£ç ä»“åº“ã€ç®¡ç†æ‚¨è‡ªå·±çš„ä»£ç å˜æ›´ç­‰ã€‚å› æ­¤ï¼Œè¿™é€šå¸¸æ˜¯å¼€å‘ç¯å¢ƒè®¾ç½®çš„æ ‡å‡†ç¬¬ä¸€æ­¥ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9f80e2b717a43328b2e8a0a7c83b044~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=tHhfH%2FN1tZ47u5uy3vDPzUxmP9A%3D" alt="image-20251117010428126" loading="lazy"/></li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">3: å®‰è£… Node.js (18+ ç‰ˆæœ¬)</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… curl (è‹¥å°šæœªå®‰è£…)</span>
sudo apt install curl -y

<span class="hljs-comment"># æ·»åŠ  NodeSource 18.x æº</span>
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -

<span class="hljs-comment"># å®‰è£… Node.js</span>
sudo apt-get install -y nodejs

<span class="hljs-comment"># éªŒè¯ç‰ˆæœ¬</span>
node -v &amp;&amp; npm -v
</code></pre>
<ul>
<li><strong><code>curl ... | sudo -E bash -</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šæ·»åŠ  Node.js 18.x ç‰ˆæœ¬çš„å®˜æ–¹ï¼ˆNodeSourceï¼‰è½¯ä»¶æºã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼šUbuntu é»˜è®¤çš„è½¯ä»¶æºä¸­çš„ Node.js ç‰ˆæœ¬å¯èƒ½å¾ˆæ—§ã€‚<code>claude-code</code> è¦æ±‚ 18+ ç‰ˆæœ¬ã€‚è¿™ä¸ªå‘½ä»¤åšäº†ä¸¤ä»¶äº‹ï¼š
<ol>
<li><code>curl -fsSL ...</code>ï¼šä½¿ç”¨ <code>curl</code> å·¥å…·ä»æŒ‡å®š URL ä¸‹è½½ä¸€ä¸ªè„šæœ¬ã€‚</li>
<li><code>| sudo -E bash -</code>ï¼šå°†ä¸‹è½½çš„è„šæœ¬å†…å®¹é€šè¿‡ç®¡é“ï¼ˆ<code>|</code>ï¼‰ç›´æ¥ä¼ é€’ç»™ <code>bash</code> shellï¼Œå¹¶ä½¿ç”¨ <code>sudo</code>ï¼ˆç®¡ç†å‘˜æƒé™ï¼‰æ¥æ‰§è¡Œå®ƒã€‚è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨é…ç½®æ‚¨çš„ç³»ç»Ÿï¼Œä½¿å…¶èƒ½å¤Ÿä» NodeSource çš„æœåŠ¡å™¨ä¸‹è½½ Node.js 18ã€‚</li>
</ol>
</li>
</ul>
</li>
<li><strong><code>sudo apt-get install -y nodejs</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šåœ¨æ·»åŠ äº†æ–°æºä¹‹åï¼Œæ­£å¼å®‰è£… <code>nodejs</code> è½¯ä»¶åŒ…ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</strong> <code>claude-code</code> æ˜¯ä¸€ä¸ªç”¨ JavaScript ç¼–å†™çš„å·¥å…·ï¼Œå®ƒéœ€è¦åœ¨ <code>Node.js</code> è¿™ä¸ª JavaScript è¿è¡Œæ—¶ç¯å¢ƒä¸­æ‰èƒ½æ‰§è¡Œã€‚åŒæ—¶å®‰è£…çš„ <code>npm</code>ï¼ˆNode Package Managerï¼‰æ˜¯ Node.js çš„åŒ…ç®¡ç†å™¨ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°†ç”¨å®ƒæ¥å®‰è£… <code>claude-code</code> æœ¬èº«ã€‚</li>
</ul>
</li>
<li><strong><code>node -v &amp;&amp; npm -v</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šéªŒè¯ Node.js å’Œ npm æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¹¶æ˜¾ç¤ºå®ƒä»¬çš„ç‰ˆæœ¬å·ï¼Œç¡®ä¿ <code>node</code> ç‰ˆæœ¬ç¬¦åˆ 18+ çš„è¦æ±‚ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/883ae666940d4b2a9e3a652e35e6c7dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=0BlyEQpVvDENsr0ZT3KrE4wnlIA%3D" alt="image-20251117010342661" loading="lazy"/></li>
</ul>
</li>
</ul>
<h3 data-id="heading-9">4: å…¨å±€å®‰è£… Claude Code</h3>
<pre><code class="hljs language-Bash" lang="Bash">sudo npm install -g @anthropic-ai/claude-code

<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
claude --version
</code></pre>
<ul>
<li><strong><code>sudo npm install -g @anthropic-ai/claude-code</code></strong>
<ul>
<li><strong>ç›®çš„</strong>ï¼šå®‰è£… <code>claude-code</code> å·¥å…·æœ¬ä½“ã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼š
<ul>
<li><code>npm install</code>ï¼šä½¿ç”¨ Node.js åŒ…ç®¡ç†å™¨æ¥å®‰è£…ä¸€ä¸ªåŒ…ã€‚</li>
<li><code>-g</code> (global)ï¼šè¿™æ˜¯â€œå…¨å±€å®‰è£…â€çš„æ ‡å¿—ã€‚æ„å‘³ç€è¿™ä¸ªå·¥å…·å°†è¢«å®‰è£…åœ¨ç³»ç»Ÿçš„å…¬å…±åŒºåŸŸï¼Œè€Œä¸æ˜¯ä»…é™äºæŸä¸ªç‰¹å®šé¡¹ç›®ç›®å½•ã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆéœ€è¦å…¨å±€ï¼Ÿ</strong> è¿™æ ·æ‚¨å°±å¯ä»¥åœ¨ç³»ç»Ÿçš„ä»»ä½•è·¯å¾„ä¸‹ï¼Œç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ <code>claude</code>ï¼ˆå¦‚ç¬¬ 4 è¡Œæ‰€ç¤ºï¼‰æ¥è¿è¡Œå®ƒï¼Œå°±åƒè¿è¡Œ <code>git</code> æˆ– <code>curl</code> ä¸€æ ·ã€‚</li>
<li><code>@anthropic-ai/claude-code</code>ï¼šè¿™æ˜¯ <code>claude-code</code> åœ¨ npm ä»“åº“ä¸Šçš„å®˜æ–¹åŒ…åã€‚</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aca312c85f9441ca91e9a523031b8db8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=r9zegiUsK8pTzEP%2FypMySSuwi3w%3D" alt="image-20251117010627598" loading="lazy"/></p>
<ul>
<li>claude å”¤é†’ä¸€ä¸‹ï¼Œæ˜¯å¯ä»¥åº”ç”¨çš„</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52e450ce5fc448dd9eb191463bc8ca4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=fGa1KYHcU%2BLKw4%2F%2BcC3SlR9jTiw%3D" alt="image-20251117011332968" loading="lazy"/></p>
<h3 data-id="heading-10">5: é…ç½® API ç¯å¢ƒå˜é‡</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½®ä¸´æ—¶å˜é‡</span>
<span class="hljs-built_in">export</span> ANTHROPIC_BASE_URL=<span class="hljs-string">"https://ark.cr-beijing.volces.com/api/coding"</span>
<span class="hljs-built_in">export</span> ANTHROPIC_AUTH_TOKEN=<span class="hljs-string">"WmpBME5ETTBaVFJoWkRjNU5ERmpPR0ZtWTJNellqZG1ORGcyTVRVeFlUTQ=="</span>
<span class="hljs-built_in">export</span> ANTHROPIC_MODEL=<span class="hljs-string">"doubao-seed-code-preview-latest"</span>

<span class="hljs-comment"># ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆ</span>
<span class="hljs-built_in">source</span> ~/.bashrc

<span class="hljs-comment"># éªŒè¯ï¼ˆå¯é€‰ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ANTHROPIC_BASE_URL</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ANTHROPIC_AUTH_TOKEN</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ANTHROPIC_MODEL</span>
</code></pre>
<p>ç®€å•æ¥è¯´ï¼š</p>
<ol>
<li><code>export ...</code>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> åœ¨<strong>å½“å‰</strong>çš„ç»ˆç«¯çª—å£â€œä¸´æ—¶â€è®¾ç½® API åœ°å€ï¼ˆ<code>BASE_URL</code>ï¼‰ã€å¯†é’¥ï¼ˆ<code>AUTH_TOKEN</code>ï¼‰å’Œæ¨¡å‹ï¼ˆ<code>MODEL</code>ï¼‰ã€‚</li>
<li><strong>ç‰¹ç‚¹ï¼š</strong> è¿™äº›è®¾ç½®åªåœ¨å½“å‰çª—å£æœ‰æ•ˆï¼Œ<strong>å…³æ‰çª—å£å°±æ²¡äº†</strong>ã€‚</li>
</ul>
</li>
<li>**<code>source ~/.bashrc</code> **
<ul>
<li><strong>ä½œç”¨ï¼š</strong> é‡æ–°åŠ è½½ <code>~/.bashrc</code>ï¼ˆç»ˆç«¯çš„â€œæ°¸ä¹…â€é…ç½®æ–‡ä»¶ï¼‰é‡Œçš„è®¾ç½®ã€‚</li>
<li><strong>é—®é¢˜ï¼š</strong> å¦‚æœä½ åªæ‰§è¡Œäº†ç¬¬ 2-4 è¡Œï¼Œé‚£ç¬¬ 7 è¡Œå…¶å®æ˜¯<strong>å¤šä½™çš„</strong>ï¼Œå› ä¸ºä½ å¹¶æ²¡æœ‰æŠŠé…ç½®å†™å…¥é‚£ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå‘½ä»¤é€šå¸¸æ˜¯é…åˆ<strong>æ°¸ä¹…</strong>è®¾ç½®ï¼ˆå³æŠŠ <code>export</code> å†™å…¥æ–‡ä»¶ï¼‰ä½¿ç”¨çš„ã€‚</li>
</ul>
</li>
<li><code>echo $...</code>
<ul>
<li><strong>ä½œç”¨ï¼š</strong> æ£€æŸ¥ä¸€ä¸‹ï¼Œçœ‹çœ‹ç»ˆç«¯æ˜¯å¦æˆåŠŸè®°ä½äº†ä½ åˆšæ‰è®¾ç½®çš„å˜é‡å€¼ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">å¯é€‰: é…ç½®æ–‡ä»¶æ–¹å¼ (<code>~/.claude/settings.json</code>)</h3>
<pre><code class="hljs language-bash" lang="bash">1  <span class="hljs-comment"># åˆ›å»ºæˆ–ç¼–è¾‘æ–‡ä»¶</span>
2  vim ~/.claude/settings.json
3  
4  <span class="hljs-comment"># å†™å…¥ä»¥ä¸‹ JSON å†…å®¹</span>
5  {
6    <span class="hljs-string">"env"</span>: {
7      <span class="hljs-string">"ANTHROPIC_AUTH_TOKEN"</span>: <span class="hljs-string">"ARK_API_KEY"</span>,
8      <span class="hljs-string">"ANTHROPIC_BASE_URL"</span>: <span class="hljs-string">"https://ark.cr-beijing.volces.com/api/coding"</span>,
9      <span class="hljs-string">"EARE_KEEPOUT_FILE_PATH"</span>: <span class="hljs-string">"ea-bdp.json"</span>
10   },
11   <span class="hljs-string">"ANTHROPIC_MODEL"</span>: <span class="hljs-string">"doubao-seed-code-preview-latest"</span>
12 }
</code></pre>
<ul>
<li><strong>ç›®çš„</strong>ï¼šæä¾›ä¸€ç§æ›¿ä»£ç¯å¢ƒå˜é‡çš„é…ç½®æ–¹æ³•ã€‚</li>
<li><strong>è¯¦ç»†è¯´æ˜</strong>ï¼š<code>claude-code</code> å·¥å…·è¢«è®¾è®¡ä¸ºï¼š
<ol>
<li>é¦–å…ˆï¼Œæ£€æŸ¥æ˜¯å¦å­˜åœ¨ <code>~/.claude/settings.json</code> è¿™ä¸ªæ–‡ä»¶ã€‚</li>
<li>å¦‚æœå­˜åœ¨ï¼Œå°±ä»è¿™ä¸ª JSON æ–‡ä»¶ä¸­è¯»å– API å¯†é’¥ï¼ˆ<code>AUTH_TOKEN</code>ï¼‰ã€URL å’Œæ¨¡å‹ï¼ˆ<code>MODEL</code>ï¼‰ç­‰é…ç½®ã€‚</li>
<li>å¦‚æœè¿™ä¸ªæ–‡ä»¶<strong>ä¸</strong>å­˜åœ¨ï¼ˆæˆ–è€…æ–‡ä»¶é‡Œç¼ºå°‘æŸäº›é¡¹ï¼‰ï¼Œå®ƒæ‰ä¼šå»æŸ¥æ‰¾æ­¥éª¤ 5 ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡ï¼ˆå¦‚ <code>process.env.ANTHROPIC_AUTH_TOKEN</code>ï¼‰ã€‚</li>
</ol>
</li>
<li><strong>ä¸ºä»€ä¹ˆç”¨å®ƒï¼Ÿ</strong>
<ul>
<li><strong>çµæ´»æ€§</strong>ï¼šæœ‰äº›äººä¸å–œæ¬¢æŠŠå¯†é’¥â€œæ±¡æŸ“â€åˆ°å…¨å±€çš„ <code>.bashrc</code> æ–‡ä»¶ä¸­ï¼Œæ›´å€¾å‘äºä½¿ç”¨ä¸“é—¨çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><strong>å¤šè´¦æˆ·/å¤šé¡¹ç›®</strong>ï¼šå¦‚æœæ‚¨æœ‰å¤šä¸ª API å¯†é’¥æˆ–éœ€è¦è¿æ¥åˆ°ä¸åŒçš„æœåŠ¡å•†ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶ç®¡ç†å¯èƒ½æ¯”åˆ‡æ¢ç¯å¢ƒå˜é‡æ›´æ–¹ä¾¿ã€‚</li>
</ul>
</li>
<li><strong>æ³¨æ„</strong>ï¼šå›¾ç‰‡ä¸­çš„ <code>EARE_KEEPOUT_FILE_PATH</code> ä¼¼ä¹æ˜¯è¯¥ç‰¹å®šæœåŠ¡å•†ç‰ˆæœ¬æ‰€éœ€çš„é¢å¤–é…ç½®é¡¹ã€‚</li>
</ul>
<h2 data-id="heading-12">é¡¹ç›®å¯åŠ¨ï¼šæˆ‘æŠŠâ€œä¸“æ³¨æ’ä»¶â€çš„éœ€æ±‚æ–‡æ¡£ä¸¢ç»™äº† AI</h2>
<h3 data-id="heading-13">é¡¹ç›®æ¦‚è¿°</h3>
<p>è¿™æ˜¯ä¸€ä¸ªåä¸º"ä¸“æ³¨æ¨¡å¼"çš„ Chrome æµè§ˆå™¨æ‰©å±•ï¼Œä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡ä¸€é”®å¼€å…³æ¥å±è”½å¹²æ‰°æ€§ç½‘ç«™ï¼Œå¸®åŠ©ç”¨æˆ·ä¿æŒä¸“æ³¨çš„å·¥ä½œå’Œå­¦ä¹ ç¯å¢ƒã€‚</p>
<ul>
<li>
<p>å› ä¸ºæˆ‘ï¼ˆå’Œå¾ˆå¤šäººä¸€æ ·ï¼‰æ·±å—â€œæ—¶é—´é»‘æ´â€çš„å›°æ‰°ã€‚Bç«™ã€å¾®åšã€çŸ¥ä¹ï¼Œè¿™äº›å¹³å°åœ¨å¸¦ç»™æˆ‘ä»¬ä¿¡æ¯çš„åŒæ—¶ï¼Œä¹Ÿæ— æƒ…åœ°åå™¬ç€æˆ‘ä»¬çš„ä¸“æ³¨åŠ›ã€‚</p>
</li>
<li>
<p>æ‰€ä»¥ï¼Œæˆ‘å†³å®šç”¨è¿™ä¸ªâ€œæœ€çœŸå®çš„éœ€æ±‚â€æ¥â€œæ‹·æ‰“â€AIã€‚æˆ‘æŠŠä¸€ä¸ªâ€œä¸“æ³¨æ¨¡å¼â€æ’ä»¶çš„å®Œæ•´éœ€æ±‚ï¼ˆå¦‚ä¸‹æ–¹æ–‡æ¡£æ‰€ç¤ºï¼‰ä¸¢ç»™äº† Doubao-Seed-Codeã€‚</p>
</li>
</ul>
<p>æˆ‘å†™äº†ä¸€ä¸ªéœ€æ±‚æ–‡æ¡£ï¼Œæ”¾åœ¨äº†â€œcll.mdâ€é‡Œé¢äº†</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä¸“æ³¨æ¨¡å¼ (Focus Mode) Chrome æ’ä»¶ éœ€æ±‚æ–‡æ¡£</span>

<span class="hljs-section">## 1. é¡¹ç›®æ¦‚è¿°</span>

æœ¬é¡¹ç›®æ—¨åœ¨å¼€å‘ä¸€ä¸ª Chrome æµè§ˆå™¨æ’ä»¶ï¼Œå¸®åŠ©ç”¨æˆ·åœ¨éœ€è¦ä¸“æ³¨å·¥ä½œæˆ–å­¦ä¹ æ—¶ï¼Œä¸€é”®å±è”½é¢„è®¾çš„ã€å®¹æ˜“åˆ†æ•£æ³¨æ„åŠ›çš„ç½‘ç«™ã€‚

<span class="hljs-section">## 2. æ ¸å¿ƒåŠŸèƒ½ </span>

<span class="hljs-section">### 2.1. ç”¨æˆ·æ•…äº‹ (User Stories)</span>

<span class="hljs-bullet">*</span> <span class="hljs-strong">**ä½œä¸ºç”¨æˆ·**</span>ï¼Œæˆ‘å¸Œæœ›èƒ½åœ¨æµè§ˆå™¨å·¥å…·æ ä¸Šç‚¹å‡»æ’ä»¶å›¾æ ‡ï¼Œçœ‹åˆ°ä¸€ä¸ªç®€æ´çš„æ§åˆ¶é¢æ¿ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ä½œä¸ºç”¨æˆ·**</span>ï¼Œæˆ‘å¸Œæœ›è¿™ä¸ªé¢æ¿ä¸Šæœ‰ä¸€ä¸ªæ¸…æ™°çš„æŒ‰é’®ï¼Œå¯ä»¥è®©æˆ‘â€œå¼€å¯ä¸“æ³¨â€æˆ–â€œå…³é—­ä¸“æ³¨â€ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ä½œä¸ºç”¨æˆ·**</span>ï¼Œå½“æˆ‘â€œå¼€å¯ä¸“æ³¨â€æ—¶ï¼Œæˆ‘å¸Œæœ›æ— æ³•è®¿é—®å¾®åšã€Bç«™å’ŒçŸ¥ä¹ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ä½œä¸ºç”¨æˆ·**</span>ï¼Œå½“æˆ‘â€œå…³é—­ä¸“æ³¨â€æ—¶ï¼Œæˆ‘å¸Œæœ›å¯ä»¥æ¢å¤å¯¹è¿™äº›ç½‘ç«™çš„æ­£å¸¸è®¿é—®ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ä½œä¸ºç”¨æˆ·**</span>ï¼Œæˆ‘å¸Œæœ›æ’ä»¶èƒ½è®°ä½æˆ‘ä¸Šæ¬¡çš„é€‰æ‹©ï¼Œå³ä½¿æˆ‘å…³é—­äº†æµè§ˆå™¨ã€‚

<span class="hljs-section">### 2.2. åŠŸèƒ½éœ€æ±‚ (Functional Requirements)</span>

<span class="hljs-bullet">1.</span>  <span class="hljs-strong">**æ’ä»¶ç•Œé¢ (Popup UI)ï¼š**</span>
<span class="hljs-bullet">    *</span> ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„æ’ä»¶å›¾æ ‡ (<span class="hljs-code">`action`</span>) æ—¶ï¼Œå¼¹å‡ºä¸€ä¸ª <span class="hljs-code">`popup.html`</span> çª—å£ã€‚
<span class="hljs-bullet">    *</span> çª—å£å†…åŒ…å«ä¸€ä¸ªä¸»æŒ‰é’®ï¼Œç”¨äºåˆ‡æ¢ä¸“æ³¨æ¨¡å¼çš„å¼€/å…³çŠ¶æ€ã€‚
<span class="hljs-bullet">    *</span> æŒ‰é’®çš„æ–‡æœ¬å’Œæ ·å¼åº”æ ¹æ®å½“å‰çŠ¶æ€ï¼ˆå¼€å¯/å…³é—­ï¼‰å‘ç”Ÿå˜åŒ–ï¼Œä»¥æä¾›æ¸…æ™°çš„è§†è§‰åé¦ˆã€‚
<span class="hljs-bullet">        *</span> <span class="hljs-strong">**å…³é—­çŠ¶æ€ (é»˜è®¤)ï¼š**</span> æŒ‰é’®æ˜¾ç¤º "å¼€å¯ä¸“æ³¨" (ä¾‹å¦‚ï¼Œç»¿è‰²)ã€‚
<span class="hljs-bullet">        *</span> <span class="hljs-strong">**å¼€å¯çŠ¶æ€ï¼š**</span> æŒ‰é’®æ˜¾ç¤º "å…³é—­ä¸“æ³¨" (ä¾‹å¦‚ï¼Œçº¢è‰²)ã€‚

<span class="hljs-bullet">2.</span>  <span class="hljs-strong">**å±è”½åŠŸèƒ½ (Blocking)ï¼š**</span>
<span class="hljs-bullet">    *</span> å½“æ’ä»¶å¤„äºâ€œå¼€å¯ä¸“æ³¨â€çŠ¶æ€æ—¶ï¼Œå¿…é¡»é˜»æ­¢ç”¨æˆ·è®¿é—® V1.0 å±è”½åˆ—è¡¨ä¸­çš„æ‰€æœ‰ç½‘ç«™ã€‚
<span class="hljs-bullet">    *</span> è¢«é˜»æ­¢æ—¶ï¼Œæµè§ˆå™¨åº”æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯é¡µé¢ (ä¾‹å¦‚ <span class="hljs-code">`ERR_BLOCKED_BY_CLIENT`</span>)ã€‚

<span class="hljs-bullet">3.</span>  <span class="hljs-strong">**çŠ¶æ€æŒä¹…åŒ– (Persistence)ï¼š**</span>
<span class="hljs-bullet">    *</span> æ’ä»¶å¿…é¡»ä½¿ç”¨ <span class="hljs-code">`chrome.storage.local`</span> æ¥å­˜å‚¨å½“å‰æ˜¯å¦å¤„äºä¸“æ³¨æ¨¡å¼ (<span class="hljs-code">`isFocusModeEnabled: true/false`</span>)ã€‚
<span class="hljs-bullet">    *</span> å½“æµè§ˆå™¨é‡æ–°å¯åŠ¨æ—¶ï¼Œæ’ä»¶åº”è¯»å–æ­¤çŠ¶æ€ï¼Œå¹¶è‡ªåŠ¨åº”ç”¨ï¼ˆå¦‚æœä¸Šæ¬¡æ˜¯å¼€å¯çš„ï¼Œåˆ™é‡å¯åä¾ç„¶æ˜¯å¼€å¯çŠ¶æ€ï¼‰ã€‚

<span class="hljs-section">## 3. å±è”½åˆ—è¡¨</span>

<span class="hljs-bullet">*</span> æ–°æµªå¾®åš (<span class="hljs-code">`weibo.com`</span> åŠå…¶æ‰€æœ‰å­åŸŸå)
<span class="hljs-bullet">*</span> å“”å“©å“”å“© (<span class="hljs-code">`bilibili.com`</span> åŠå…¶æ‰€æœ‰å­åŸŸå)
<span class="hljs-bullet">*</span> çŸ¥ä¹ (<span class="hljs-code">`zhihu.com`</span> åŠå…¶æ‰€æœ‰å­åŸŸå)

<span class="hljs-section">## 4. æŠ€æœ¯é€‰å‹ </span>

<span class="hljs-bullet">*</span> <span class="hljs-strong">**å¹³å°ï¼š**</span> Chrome æµè§ˆå™¨æ’ä»¶
<span class="hljs-bullet">*</span> <span class="hljs-strong">**è§„èŒƒï¼š**</span> <span class="hljs-strong">**Manifest V3 (MV3)**</span>
<span class="hljs-bullet">*</span> <span class="hljs-strong">**æ ¸å¿ƒ APIï¼š**</span>
<span class="hljs-bullet">    *</span> <span class="hljs-code">`declarativeNetRequest`</span>: (MV3 æ ¸å¿ƒ) ç”¨äºå£°æ˜å¼åœ°å®šä¹‰å±è”½è§„åˆ™ (<span class="hljs-code">`rules.json`</span>)ï¼Œå®ç°é«˜æ•ˆå±è”½ã€‚
<span class="hljs-bullet">    *</span> <span class="hljs-code">`storage`</span>: ç”¨äºæŒä¹…åŒ–å­˜å‚¨å¼€å…³çŠ¶æ€ã€‚
<span class="hljs-bullet">    *</span> <span class="hljs-code">`action`</span>: ç”¨äºå®šä¹‰å·¥å…·æ å›¾æ ‡å’Œ <span class="hljs-code">`popup.html`</span>ã€‚
<span class="hljs-bullet">    *</span> <span class="hljs-code">`runtime`</span>: ç”¨äº <span class="hljs-code">`background.js`</span> (Service Worker) å’Œ <span class="hljs-code">`popup.js`</span> ä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ã€‚

<span class="hljs-section">## 5. (å¯é€‰)è¿­ä»£æ–¹å‘</span>

<span class="hljs-bullet">*</span> <span class="hljs-strong">**è‡ªå®šä¹‰å±è”½åˆ—è¡¨ï¼š**</span> å…è®¸ç”¨æˆ·åœ¨è®¾ç½®é¡µé¢è‡ªè¡Œæ·»åŠ ã€åˆ é™¤éœ€è¦å±è”½çš„ç½‘ç«™ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ç•ªèŒ„é’Ÿæ¨¡å¼ï¼š**</span> å…è®¸ç”¨æˆ·è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼ˆå¦‚ 25 åˆ†é’Ÿï¼‰ï¼Œåœ¨æ­¤æœŸé—´å¼ºåˆ¶å¼€å¯ä¸“æ³¨æ¨¡å¼ï¼Œæ—¶é—´åˆ°äº†è‡ªåŠ¨è§£é™¤ã€‚
<span class="hljs-bullet">*</span> <span class="hljs-strong">**ç™½åå•æ¨¡å¼ï¼š**</span> åˆ‡æ¢åˆ°â€œç™½åå•â€é€»è¾‘ï¼Œå³å±è”½<span class="hljs-emphasis">*æ‰€æœ‰*</span>ç½‘ç«™ï¼Œ<span class="hljs-emphasis">*é™¤äº†*</span>ç”¨æˆ·æŒ‡å®šçš„å‡ ä¸ªå­¦ä¹ /å·¥ä½œç½‘ç«™ã€‚
</code></pre>
<ul>
<li>æç¤ºclaudeæ‰§è¡Œï½ï½ï½ï½</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ce2d3c236b8461193358235638caea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=YnyRSH2FgsV1I0g2jR3mP3YfSbo%3D" alt="image-20251117014619337" loading="lazy"/></p>
<h3 data-id="heading-14">ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">/root/my_project/
â”œâ”€â”€ manifest.json       <span class="hljs-comment"># æ‰©å±•é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ background.js       <span class="hljs-comment"># åå°æœåŠ¡å·¥ä½œçº¿ç¨‹</span>
â”œâ”€â”€ popup.html          <span class="hljs-comment"># æ‰©å±•å¼¹å‡ºç•Œé¢</span>
â”œâ”€â”€ popup.js            <span class="hljs-comment"># å¼¹å‡ºç•Œé¢äº¤äº’é€»è¾‘</span>
â”œâ”€â”€ rules.json          <span class="hljs-comment"># ç½‘ç»œè¯·æ±‚æ‹¦æˆªè§„åˆ™</span>
â”œâ”€â”€ icons/              <span class="hljs-comment"># å›¾æ ‡èµ„æºç›®å½•</span>
â”‚   â”œâ”€â”€ icon16.svg      <span class="hljs-comment"># 16x16 å›¾æ ‡</span>
â”‚   â”œâ”€â”€ icon32.svg      <span class="hljs-comment"># 32x32 å›¾æ ‡</span>
â”‚   â”œâ”€â”€ icon48.svg      <span class="hljs-comment"># 48x48 å›¾æ ‡</span>
â”‚   â””â”€â”€ icon128.svg     <span class="hljs-comment"># 128x128 å›¾æ ‡</span>
â”œâ”€â”€ README.md           <span class="hljs-comment"># é¡¹ç›®è¯´æ˜æ–‡æ¡£</span>
â””â”€â”€ claude.md           <span class="hljs-comment"># Claude ç›¸å…³æ–‡æ¡£</span>
</code></pre>
<h3 data-id="heading-15">æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</h3>
<h4 data-id="heading-16">1. æ‰©å±•é…ç½® (manifest.json)</h4>
<p> å®šä¹‰äº†æ‰©å±•çš„åŸºæœ¬ä¿¡æ¯å’Œæƒé™ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/39fde9889ee6462e91ac7f59dbffd9a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=aLjd5gwr7xzNFqm0mQQBNgi%2BnqE%3D" alt="image-20251117024550909" loading="lazy"/></p>
<ul>
<li><strong>manifest_version: 3</strong> - ä½¿ç”¨æœ€æ–°çš„ Chrome æ‰©å±• API v3</li>
<li><strong>æƒé™è®¾ç½®</strong> - åŒ…å« declarativeNetRequestï¼ˆç½‘ç»œè¯·æ±‚æ‹¦æˆªï¼‰ã€storageï¼ˆæœ¬åœ°å­˜å‚¨ï¼‰å’Œ actionï¼ˆæ‰©å±•æŒ‰é’®ï¼‰</li>
<li><strong>åå°è„šæœ¬</strong> - é€šè¿‡ service_worker è¿è¡Œ background.js</li>
<li><strong>å¼¹å‡ºç•Œé¢</strong> - ç‚¹å‡»æ‰©å±•å›¾æ ‡æ—¶æ˜¾ç¤º popup.html</li>
<li><strong>ç½‘ç»œè¯·æ±‚è§„åˆ™</strong> - é…ç½®äº†åä¸º "ruleset_1" çš„è§„åˆ™é›†ï¼Œé»˜è®¤ç¦ç”¨çŠ¶æ€</li>
</ul>
<h4 data-id="heading-17">2. åå°æœåŠ¡ (background.js)</h4>
<p> æ˜¯æ‰©å±•çš„æ ¸å¿ƒé€»è¾‘å±‚ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30f6908f2ef5466d9796e68a5368ff77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=kb4TfhZqF96Er1uGTJ77xzTLIPQ%3D" alt="image-20251117020538323" loading="lazy"/></p>
<ul>
<li><strong>åˆå§‹åŒ–æœºåˆ¶</strong> - åœ¨æ‰©å±•å®‰è£…/æ›´æ–°å’Œæµè§ˆå™¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong> - ä½¿ç”¨ chrome.storage.local å­˜å‚¨ä¸“æ³¨æ¨¡å¼çš„å¯ç”¨çŠ¶æ€</li>
<li><strong>è§„åˆ™æ§åˆ¶</strong> - é€šè¿‡ declarativeNetRequest API åŠ¨æ€å¯ç”¨/ç¦ç”¨ç½‘ç«™æ‹¦æˆªè§„åˆ™</li>
<li><strong>æ¶ˆæ¯é€šä¿¡</strong> - æä¾›æ¶ˆæ¯ç›‘å¬æœºåˆ¶ï¼Œå¤„ç†æ¥è‡ªå¼¹å‡ºç•Œé¢çš„è¯·æ±‚</li>
<li><strong>æ ¸å¿ƒåŠŸèƒ½å‡½æ•°</strong>:
<ul>
<li><code>initializeExtension()</code> - åˆå§‹åŒ–æ‰©å±•çŠ¶æ€</li>
<li><code>toggleFocusMode()</code> - åˆ‡æ¢ä¸“æ³¨æ¨¡å¼å¼€å…³</li>
<li><code>getCurrentStatus()</code> - è·å–å½“å‰çŠ¶æ€</li>
</ul>
</li>
</ul>
<h4 data-id="heading-18">3. ç”¨æˆ·ç•Œé¢ (popup.html &amp; popup.js)</h4>
<p> å’Œ  ç»„æˆäº†ç”¨æˆ·äº¤äº’ç•Œé¢ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ec31b4c06794dcc92721174dc2b33d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=DfpQSX0oUZbksZUOxcG7RWrg%2B4U%3D" alt="image-20251117020702790" loading="lazy"/></p>
<ul>
<li><strong>ç•Œé¢è®¾è®¡</strong> - ç®€æ´çš„å¼€å…³æŒ‰é’®è®¾è®¡ï¼Œæ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„é¢œè‰²å’Œæ–‡å­—</li>
<li><strong>äº¤äº’é€»è¾‘</strong> - ç‚¹å‡»æŒ‰é’®æ—¶å‘åå°å‘é€æ¶ˆæ¯ä»¥åˆ‡æ¢çŠ¶æ€</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong> - é¡µé¢åŠ è½½æ—¶è·å–å¹¶æ˜¾ç¤ºå½“å‰çŠ¶æ€ï¼ŒåŒæ—¶ç›‘å¬çŠ¶æ€æ›´æ–°</li>
</ul>
<h4 data-id="heading-19">4. ç½‘ç»œæ‹¦æˆªè§„åˆ™ (rules.json)</h4>
<p> å®šä¹‰äº†éœ€è¦æ‹¦æˆªçš„ç½‘ç«™è§„åˆ™ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0003efab6e704e5189af56ca56949996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=EcOAH7Ait1cWfoylsNMLYecbGmc%3D" alt="image-20251117020724660" loading="lazy"/></p>
<ul>
<li><strong>è§„åˆ™æ ¼å¼</strong> - éµå¾ª Chrome declarativeNetRequest API çš„è§„åˆ™æ ¼å¼</li>
<li><strong>æ‹¦æˆªç›®æ ‡</strong> - é»˜è®¤é…ç½®äº†å¾®åšã€å“”å“©å“”å“©å’ŒçŸ¥ä¹ç­‰å¸¸è§ç¤¾äº¤åª’ä½“ç½‘ç«™</li>
<li><strong>æ‹¦æˆªç±»å‹</strong> - é’ˆå¯¹ä¸»æ¡†æ¶ã€å­æ¡†æ¶ã€è„šæœ¬ã€å›¾ç‰‡ç­‰æ‰€æœ‰èµ„æºç±»å‹è¿›è¡Œæ‹¦æˆª</li>
</ul>
<h3 data-id="heading-20">å®‰è£…æ’ä»¶</h3>
<p>æ‰“å¼€æ‰©å±•ç®¡ç†é¡µé¢ ï¼š</p>
<ul>
<li>åœ¨Chromeæµè§ˆå™¨ä¸­è¾“å…¥ï¼š chrome://extensions/</li>
<li>æˆ–è€…ç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹å›¾æ ‡ â†’ æ›´å¤šå·¥å…· â†’ æ‰©å±•ç¨‹åº</li>
</ul>
<p>åŠ è½½æ‰©å±• ï¼š</p>
<ul>
<li>ç‚¹å‡»ã€ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºã€æŒ‰é’®</li>
<li>æµè§ˆå¹¶é€‰æ‹©ä½ çš„æ‰©å±•æ–‡ä»¶å¤¹ï¼ˆå¦‚ /root/my_project/ ï¼‰</li>
<li>ç‚¹å‡»ç¡®å®š</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce3fb05a2acc4889abb2a437097f52c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5YWL5Lit55qE6buR5qGDQQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764418317&amp;x-signature=q3Aaw9%2B8P7qQiWGjscoHLWXk3qk%3D" alt="image-20251117023652128" loading="lazy"/>
UI å®Œç¾å¤ç°ï¼šæˆªå›¾å³ä¸Šæ–¹çš„å°çª—å£ï¼Œæ— è®ºæ˜¯æ ‡é¢˜â€œä¸“æ³¨æ¨¡å¼â€è¿˜æ˜¯é‚£ä¸ªç»¿è‰²çš„â€œå¼€å¯ä¸“æ³¨â€æŒ‰é’®ï¼Œéƒ½<strong>100% è¿˜åŸäº†</strong>æˆ‘ä»¬ä¹‹å‰åœ¨ <code>popup.html</code> å’Œ <code>popup.js</code> ä¸­è®¾è®¡çš„éœ€æ±‚ã€‚</p>
<p><strong>åŠ è½½æµç¨‹æ­£ç¡®ï¼š</strong> æˆªå›¾ä¸ŠåŠéƒ¨åˆ†çš„æ–‡å­—ï¼ˆâ€œåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºâ€ç­‰ï¼‰è¡¨æ˜æ‚¨å·²ç»æŒæ¡äº† MV3 æ’ä»¶çš„æ­£ç¡®æµ‹è¯•æµç¨‹ã€‚</p>
<p><strong>é¡¹ç›®è¿›å±•è¿…é€Ÿï¼š</strong> ä»ä¸€ä¸ª <code>cll.md</code> éœ€æ±‚æ–‡æ¡£åˆ°èƒ½è·‘èµ·æ¥çš„ æ’ä»¶ç•Œé¢ï¼Œè¿™ä¸ªæ‰§è¡ŒåŠ›éå¸¸å¼ºã€‚</p>
<h2 data-id="heading-21">æ€»ç»“ï¼šå®ƒä¸æ˜¯â€œç©å…·â€ï¼Œè€Œæ˜¯å¯é çš„â€œå·¥å…·â€</h2>
<p>å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼šAI ç¼–ç ï¼Œç©¶ç«Ÿæ˜¯â€œç©å…·â€è¿˜æ˜¯â€œå·¥å…·â€ï¼Ÿ</p>
<p>ç»è¿‡è¿™æ¬¡ä» 0 åˆ° 1 æ„å»ºâ€œä¸“æ³¨æ¨¡å¼â€Chrome æ’ä»¶çš„å®æˆ˜è¯„æµ‹ï¼Œæˆ‘çš„ç­”æ¡ˆå·²ç»éå¸¸æ˜ç¡®ã€‚</p>
<p>å½“æˆ‘æŠŠä¸€ä»½ä¸“ä¸šçš„ PRD æ–‡æ¡£ï¼ˆ<code>claude.md</code>ï¼‰äº¤ç»™ Doubao-Seed-Code æ—¶ï¼Œå®ƒä¸ä»…â€œè¯»æ‡‚â€äº†éœ€æ±‚ï¼Œè¿˜è¿…é€Ÿæä¾›äº†åŸºäº Manifest V3 çš„å®Œæ•´æŠ€æœ¯æ¶æ„ã€‚ä» <code>popup.js</code> çš„å‰ç«¯äº¤äº’é€»è¾‘ï¼Œåˆ° <code>background.js</code> çš„æ¶ˆæ¯ä¼ é€’ï¼Œå†åˆ° <code>declarativeNetRequest</code> çš„æ ¸å¿ƒå±è”½è§„åˆ™ï¼Œå®ƒç”Ÿæˆçš„ä»£ç ç²¾å‡†ä¸”é«˜æ•ˆã€‚</p>
<p>å®ƒä¸å†æ˜¯ä¸€ä¸ªåªèƒ½å†™å‡ºé›¶æ•£ä»£ç ç‰‡æ®µçš„â€œç©å…·â€ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å¤Ÿç†è§£é¡¹ç›®ä¸Šä¸‹æ–‡ã€å¤„ç†å¤šæ–‡ä»¶åä½œçš„â€œ<strong>åˆçº§å¼€å‘è€…</strong>â€å’Œâ€œ<strong>é«˜æ•ˆèƒ½å·¥å…·</strong>â€ã€‚è¿™æ¬¡çš„æˆåŠŸå¼€å‘ï¼Œè®©æˆ‘çœ‹åˆ°äº† AI è¾…åŠ©ç¼–ç¨‹çš„çœŸå®æˆ˜åŠ›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gemini CLIä¸Šçº¿æ’ä»¶ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7575090551357259828</link>    <guid>https://juejin.cn/post/7575090551357259828</guid>    <pubDate>2025-11-23T02:41:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575090551357259828" data-draft-id="7575065455075868707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gemini CLIä¸Šçº¿æ’ä»¶ç³»ç»Ÿ"/> <meta itemprop="keywords" content="Gemini,AIGC"/> <meta itemprop="datePublished" content="2025-11-23T02:41:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gemini CLIä¸Šçº¿æ’ä»¶ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T02:41:40.000Z" title="Sun Nov 23 2025 02:41:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å°ä¼™ä¼´ä»¬å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æºªï¼Œè§å­—å¦‚é¢ã€‚åœ¨ä¸ä¹…å‰Gemini CLIç»ˆäºä¸Šçº¿äº†æ’ä»¶ç³»ç»Ÿï¼Œç»ˆäºå¼€å§‹ç¼“æ…¢è¿½èµ¶Claude Code CLIçš„è„šæ­¥äº†ï¼Œè‡³æ­¤æˆ‘ä»¬ä¹Ÿç»ˆäºå¯ä»¥ä½¿ç”¨å¤§ä½¬ä»¬çš„æ’ä»¶ï¼Œå…±äº«æˆ‘ä»¬çš„æ’ä»¶äº†ã€‚</p>
<p>Gemini CLIæ›´æ–°æ—¥å¿—ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle-gemini%2Fgemini-cli%2Fblob%2Fmain%2Fdocs%2Fchangelogs%2Findex.md" target="_blank" title="https://github.com/google-gemini/gemini-cli/blob/main/docs/changelogs/index.md" ref="nofollow noopener noreferrer">github.com/google-gemiâ€¦</a></p>
<p>å¯¹å¾€æœŸå†…å®¹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247492558%26idx%3D1%26sn%3De762047c93c4361f63744ec3c70a434f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247492558&amp;idx=1&amp;sn=e762047c93c4361f63744ec3c70a434f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Googleç™¾ä¸‡Tokenä¸Šä¸‹æ–‡Gemini CLIï¼Œç¦»AIè‡ªç”±æ›´è¿‘ä¸€æ­¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493269%26idx%3D1%26sn%3D4775c90a4fab04126502bf79b0f75d70%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493269&amp;idx=1&amp;sn=4775c90a4fab04126502bf79b0f75d70&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Codeä¸Šçº¿æ’ä»¶ç³»ç»Ÿï¼ŒAIç¼–ç¨‹æ¨¡å¼å†æ¬¡å‡çº§</a></li>
</ul>
<h2 data-id="heading-1">å½“å‰ä½¿ç”¨ç‰ˆæœ¬</h2>
<p>Gemini CLIï¼š0.13.0</p>
<h2 data-id="heading-2">ä¼˜åŠ¿</h2>
<ul>
<li>æ’ä»¶ç³»ç»Ÿç›®å‰æ”¯æŒæ‰“åŒ… MCPã€ä¸Šä¸‹æ–‡æ–‡ä»¶ å’Œ è‡ªå®šä¹‰å‘½ä»¤ 3ç§é…ç½®</li>
</ul>
<h2 data-id="heading-3">Gemini CLI Extensionç®€ä»‹</h2>
<p>Gemini CLIå›´ç»•Extensionæ‰©å±•æ„å»ºäº†æ’ä»¶ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å°† MCPæœåŠ¡ã€ä¸Šä¸‹æ–‡æ–‡ä»¶ ä»¥åŠ è‡ªå®šä¹‰å‘½ä»¤ æ‰“åŒ…æˆä¸€ä¸ªç®€å•è½¯ä»¶åŒ…ï¼Œå½“è½¯ä»¶åŒ…è¢«å®‰è£…åˆ° Gemini CLI ä¸­å°±å¯ä»¥è®© Gemini ä½¿ç”¨å„ç§å·¥å…·ã€‚Gemini CLI Extensionç›®å‰å·²æœ‰100å¤šæ¬¾æ’ä»¶ï¼ŒåŒ…å« Context7ã€Nano Bananaç­‰çˆ†ç«çš„æ’ä»¶ã€‚</p>
<p>Gemini CLI Extensionå®˜æ–¹åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgeminicli.com%2Fextensions%2F" target="_blank" title="https://geminicli.com/extensions/" ref="nofollow noopener noreferrer">geminicli.com/extensions/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d246f5ba07de4ac6ae1cb97fd12302ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=rurl4xfGTOtgfKS8rkUN8kMiTdM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-4">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-5">CLIå‘½ä»¤</h3>
<p>Gemini CLIå‘½ä»¤è¡Œå·¥æä¾›äº†ä¸€ç³»åˆ—extensionçš„ç®¡ç†å‘½ä»¤ï¼Œåœ¨å‘½ä»¤è¡Œç›´æ¥è¾“å…¥ gemini extensions -h å¯ä»¥æŸ¥çœ‹extensionsæ‰€æœ‰å‘½ä»¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c8671fbd4474b21b5f510f1ff54cb16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=wjTFEFwu8IscF30U8Rtx1zAfjM8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>installï¼šä»Gitä»“åº“æˆ–è€…æœ¬åœ°è·¯å¾„å®‰è£…æ’ä»¶</li>
<li>uninstallï¼šå¸è½½æŒ‡å®šåç§°çš„æ’ä»¶</li>
<li>listï¼šæŸ¥çœ‹å½“å‰å®‰è£…çš„æ’ä»¶</li>
<li>updateï¼šæ›´æ–°æ‰€æœ‰æˆ–è€…æŒ‡å®šæ’ä»¶</li>
<li>disableï¼šç¦ç”¨æ’ä»¶</li>
<li>enableï¼šå¯ç”¨æ’ä»¶</li>
<li>linkï¼šä»æœ¬åœ°è·¯å¾„é“¾æ¥ä¸€ä¸ªæ’ä»¶</li>
<li>newï¼šä»æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ’ä»¶</li>
<li>validateï¼šä»æœ¬åœ°è·¯å¾„éªŒè¯ä¸€ä¸ªæ’ä»¶</li>
</ul>
<h3 data-id="heading-6">å®‰è£…æ’ä»¶</h3>
<p>åœ¨Gemini CLI Extensionå¹³å°æŸ¥æ‰¾è‡ªå·±éœ€è¦çš„æ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¥ Nano Banana ä¸ºä¾‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f4ff65187c4d16b746f0d970e2eba4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=lPmT7v9IHEJoko%2FpCRouaJjH5gQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…ï¼Œå¤åˆ¶Extensionå®‰è£…å‘½ä»¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5972dbc44b16490e889588c1a869dabc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=MoDU%2FpbNxC6ZJRybpyM6Sm1FWoI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®Œæ•´å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â gemini</span> extensions install https:<span class="hljs-comment">//github.com/gemini-cli-extensions/nanobanana</span>
</code></pre>
<p>åœ¨å‘½ä»¤è¡Œç»ˆç«¯æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œé‡åˆ°æƒé™é—®é¢˜ï¼Œæ ¹æ®æç¤ºé€‰æ‹©å…è®¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/905cd9c1e8b1459ba0f882b8dda1a16b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=GebYB7JGEyYVTzDRzt1qEi5e3L4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¯¦ç»†ä¿¡æ¯å¯ä»¥åœ¨ ~/.gemini/extensionsä¸­æŸ¥çœ‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87038fd5b39c4105ae172044022fdf64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=o6rluLofC2vPr7Wfo4hzxNm5Pho%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯åŠ¨Gemini CLIï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä»¥å·²å®‰è£…çš„æ’ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">/extensions list
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cf27479daaa46f88018cffd5a9e2cb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=odWIO1OWHRiknlA0x50UUDBtia4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶ååœ¨Gemini CLIä¸­å°±å¯ä»¥æŸ¥çœ‹ Nano Banana æä¾›çš„MCPå’Œè‡ªå®šä¹‰å‘½ä»¤äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e7a14fb2341471fa7cf0b5b0b7c0b2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=LVI2fe2dA3dtTAHuL7tq3QJsMkk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb889d18a5934b1281f07d40670953fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=tabr69hUeKitMWbmXa7%2BUxy63ec%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Nano BananaæŒ‡ä»¤ï¼š</p>
<ul>
<li>/generateï¼šå•å¼ æˆ–å¤šå¼ å¸¦æœ‰é£æ ¼ / å˜ä½“é€‰é¡¹çš„å›¾åƒç”Ÿæˆ</li>
<li>/editï¼šå›¾åƒç¼–è¾‘</li>
<li>/restoreï¼šå›¾åƒä¿®å¤</li>
<li>/iconï¼šç”Ÿæˆå¤šç§å°ºå¯¸çš„åº”ç”¨å›¾æ ‡ã€ç½‘ç«™å›¾æ ‡å’Œ UI å…ƒç´ </li>
<li>/patternï¼šç”Ÿæˆç”¨äºèƒŒæ™¯çš„æ— ç¼å›¾æ¡ˆå’Œçº¹ç†</li>
<li>/storyï¼šç”Ÿæˆè®²è¿°è§†è§‰æ•…äº‹æˆ–æµç¨‹çš„è¿ç»­å›¾åƒ</li>
<li>/diagramï¼šç”ŸæˆæŠ€æœ¯å›¾è¡¨ã€æµç¨‹å›¾å’Œå»ºç­‘æ¨¡å‹å›¾</li>
<li>/nanobananaï¼šä½¿ç”¨è‡ªç„¶è¯­è¨€ç”Ÿæˆæˆ–å¤„ç†å›¾ç‰‡</li>
</ul>
<h3 data-id="heading-7">æ’ä»¶ä½¿ç”¨</h3>
<p>ä»¥ Nano Banana ä¸ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å‹æ¨ç†è‡ªè¡Œè°ƒç”¨</p>
<pre><code class="hljs language-bash" lang="bash">æˆ‘æ­£åœ¨åˆ›åŠä¸€å®¶åä¸º â€œKicksâ€ çš„é‹ä¸šå…¬å¸ï¼Œä½ èƒ½å¸®æˆ‘è®¾è®¡ä¸€ä¸ªè§†è§‰ä¸Šæœ‰å¸å¼•åŠ›çš„icon/logo
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/740117f8bf4b4cfa825b7aa7c122253c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=u36Q0WwdmXixT8KtjuhNHZ6WkSo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨ Nano Banana æä¾›çš„MCPå’Œè‡ªå®šä¹‰å‘½ä»¤è°ƒç”¨ï¼ŒNano Banana è°ƒç”¨ç›®å‰ä¸æŠ¥é”™ï¼Œå¯ä»¥ä¸ç”¨ç†ä¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d759aaf4066474eaea35aeb5d5ee567~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=BLzS%2BZoRniXFwbdt6PPgPi2P5mQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†ä»¥ Chrome Devtools MCPä¸ºä¾‹ï¼Œè¾“å…¥å‘½ä»¤è¿›è¡Œå®‰è£…</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensions install https://github.com/ChromeDevTools/chrome-devtools-mcp</span>
</code></pre>
<p>å®‰è£…å®Œæˆåé‡å¯Gemini CLIï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /mcpï¼Œå¯ä»¥çœ‹åˆ°åˆšåˆšé€šè¿‡æ’ä»¶å®‰è£…çš„ chrome-devtools MCPæœåŠ¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19c7dab6f8534a478ac64b4321ba76f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=RApYmPpN1KZyagMS%2Bng%2BZ2iijVg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¾“å…¥æç¤ºè¯å³å¯ä½¿ç”¨</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6687296803e74c54be20db4dacd23c75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=21O9FZQnT2tUBzIye1onoa4Tssw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-8">ç®¡ç†æ’ä»¶</h3>
<p>Gemini CLIæä¾›äº† äº¤äº’å‘½ä»¤ å’Œ CLIå‘½ä»¤ 2ç§ç®¡ç†æ’ä»¶çš„æ–¹å¼</p>
<h4 data-id="heading-9">1ï¼‰äº¤äº’å‘½ä»¤</h4>
<p>åœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /extensions å¯ä»¥æŸ¥çœ‹æ’ä»¶ç³»ç»Ÿæä¾›çš„ç®¡ç†å‘½ä»¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af79fa5790b4d70bbf4b96f1a08d612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=iibIBKL6wV%2B%2BAt1oqlimly0R2lE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<ul>
<li>listï¼šåˆ—å‡ºæ´»è·ƒçš„æ‰©å±•ç¨‹åº</li>
<li>updateï¼šæ›´æ–°æ‰©å±•ç¨‹åº</li>
<li>exploreï¼šåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ‰©å±•ç¨‹åºé¡µé¢</li>
</ul>
<p>ä½¿ç”¨ /extensions list å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„æ’ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91bbbc1c7b794764a530ffc9aeec6f54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=ljLzjDqT0jb1UZKBPXeLfZtFOTI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ /extensions update å¯ä»¥æ›´æ–°æ‰€æœ‰æ’ä»¶æˆ–è€…æ›´æ–°æŒ‡å®šæ’ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87b6b777b9e24ace8e971644cd41121a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=LfEyanJJyMW2gLLHRiHFAKPQ%2B8c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ /extensions explore ä¼šæ‰“å¼€Gemini CLI Extensionså®˜ç½‘ã€‚</p>
<h3 data-id="heading-10">2ï¼‰CLIå‘½ä»¤</h3>
<p>ä½¿ç”¨ gemini extensions list å¯ä»¥æŸ¥çœ‹è¯¦ç»†çš„æ’ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬ æ’ä»¶è·¯å¾„ã€æ¥æºã€ç‰ˆæœ¬ã€å¯ç”¨ç¦ç”¨çŠ¶æ€ã€æä¾›çš„åŠŸèƒ½ ç­‰ä¿¡æ¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/514266ca58da45a6b947519aec07ead1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=YBxeQ5xV0JT1egSkNPECy6X0eIE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½¿ç”¨ gemini extensions uninstall å¯å¸è½½æ’ä»¶</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â gemini</span> extensions uninstall nanobanana
</code></pre>
<p>ä½¿ç”¨ gemini extensions update å¯æ›´æ–°æ’ä»¶</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">#Â æ›´æ–°æŒ‡å®šæ’ä»¶</span>
<span class="hljs-variable">$Â gemini</span> extensions update nanobanana
<span class="hljs-comment">#Â æ›´æ–°æ‰€æœ‰æ’ä»¶</span>
<span class="hljs-variable">$Â gemini</span> extensions update --all
</code></pre>
<p>ä½¿ç”¨ gemini extensions enable|disable å¯å¯ç”¨ç¦ç”¨æ’ä»¶ï¼Œæœ¬äººå°è¯•çš„ä¸èµ·ä½œç”¨</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">Â ç¦ç”¨æ’ä»¶</span>
<span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensionsÂ <span class="hljs-built_in">disable</span>Â nanobanana</span>
<span class="hljs-meta prompt_">#</span><span class="bash">Â å…¨å±€ç¦ç”¨æ’ä»¶</span>
<span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensionsÂ <span class="hljs-built_in">disable</span>Â --scope user nanobanana</span>
<span class="hljs-meta prompt_">#</span><span class="bash">Â é¡¹ç›®ç¦ç”¨æ’ä»¶</span>
<span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensionsÂ <span class="hljs-built_in">disable</span>Â --scope project nanobanana</span>
</code></pre>
<h2 data-id="heading-11">è‡ªå®šä¹‰æ’ä»¶</h2>
<h3 data-id="heading-12">åˆ›å»ºæ’ä»¶æ¨¡æ¿</h3>
<p>Gemini CLIæä¾›äº†åˆ›å»ºæ’ä»¶å‘½ä»¤ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">$ gemini extensionsÂ <span class="hljs-keyword">new</span>Â [<span class="hljs-keyword">template</span>]
</code></pre>
<ul>
<li>pathï¼šæ’ä»¶çš„è·¯å¾„</li>
<li>templateï¼šæ¨¡ç‰ˆç±»å‹ï¼Œå¯é€‰å€¼ï¼š"context"ã€"custom-commands"ã€"exclude-tools"ã€"mcp-server"</li>
</ul>
<p>æ¥ç€åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰æ’ä»¶é¡¹ç›®ï¼Œæˆ‘è¿™é‡Œåœ¨å·¥ä½œåŒºè·¯å¾„ï¼Œç›´æ¥åœ¨å½“å‰å·¥ä½œåŒºé¡¹ç›®åŒçº§ç›®å½•åˆ›å»ºè‡ªå®šä¹‰æ’ä»¶é¡¹ç›®äº†</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$Â gemini</span> extensions <span class="hljs-keyword">new</span> ../my-first-extension mcp-server
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cefbdf0ba1aa496dbad83f39f88f569d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=dI0W7bzN3LeenPVoR%2BGmvtAm7vQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥çœ‹åˆ°ç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œå…¶å®å°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰Gemini CLIæ’ä»¶é…ç½®æ–‡ä»¶ gemini-extension.json çš„NodeJSé¡¹ç›®</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be4d5645477d42f998715308d68ab548~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=CfUE0cr2MObtcAipQwvJcK4nkR0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84ed6cf7f1b4427093799d44774f6133~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=C8vYqULFohS3s3qImQtsfefjguU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">æ’ä»¶é…ç½®æ–‡ä»¶</h3>
<p>Gemini CLIè‡ªå®šä¹‰æ’ä»¶é…ç½®æ–‡ä»¶ä¸º gemini-extension.jsonï¼Œä¸€ä¸ªå®Œæ•´çš„è‡ªå®šä¹‰æ’ä»¶é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{
Â Â <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"&lt;æ’ä»¶åç§°&gt;"</span>,
Â Â <span class="hljs-string">"version"</span>:Â <span class="hljs-string">"&lt;æ’ä»¶ç‰ˆæœ¬&gt;"</span>,
Â Â <span class="hljs-string">"contextFileName"</span>:Â <span class="hljs-string">"&lt;ä¸Šä¸‹æ–‡æ–‡ä»¶&gt;"</span>,
Â Â <span class="hljs-string">"excludeTools"</span>: [<span class="hljs-string">"run_shell_command"</span>]
Â Â <span class="hljs-string">"mcpServers"</span>: {Â <span class="hljs-comment"># MCPé…ç½®</span>
Â  Â Â <span class="hljs-string">"nodeServer"</span>: {
Â  Â  Â Â <span class="hljs-string">"command"</span>:Â <span class="hljs-string">"node"</span>,
Â  Â  Â Â <span class="hljs-string">"args"</span>: [<span class="hljs-string">"<span class="hljs-variable">${extensionPath}</span><span class="hljs-variable">${/}</span>dist<span class="hljs-variable">${/}</span>example.js"</span>],
Â  Â  Â Â <span class="hljs-string">"cwd"</span>:Â <span class="hljs-string">"<span class="hljs-variable">${extensionPath}</span>"</span>
Â  Â  }
Â  }
}
</code></pre>
<ul>
<li>name ï¼šæ‰©å±•ç¨‹åºçš„åç§°</li>
<li>version ï¼šæ‰©å±•ç¨‹åºçš„ç‰ˆæœ¬</li>
<li>mcpServers ï¼šMCP æœåŠ¡é…ç½®ï¼Œå¦‚æœæ‰©å±•ç¨‹åºå’Œ settings.json æ–‡ä»¶éƒ½é…ç½®äº†åŒåçš„MCPæœåŠ¡å™¨ï¼Œåˆ™ settings.json æ–‡ä»¶ä¸­å®šä¹‰çš„æœåŠ¡å™¨ä¼˜å…ˆ
<ul>
<li>commandï¼šè„šæœ¬è¿è¡Œçš„æ ¸å¿ƒå‘½ä»¤</li>
<li>argsï¼šè„šæœ¬è¿è¡Œçš„å‚æ•°æ•°ç»„</li>
<li>cwdï¼šè„šæœ¬è¿è¡Œæ—¶çš„å·¥ä½œç›®å½•</li>
</ul>
</li>
<li>contextFileName ï¼šåŒ…å«æ‰©å±•ä¸Šä¸‹æ–‡çš„æ–‡ä»¶çš„åç§°</li>
<li>excludeTools ï¼šè¦ä»æ¨¡å‹ä¸­æ’é™¤çš„å·¥å…·åç§°æ•°ç»„ï¼Œä¾‹å¦‚ï¼š "excludeTools": ["run_shell_command(rm -rf)"] å°†é˜»æ­¢ rm -rf å‘½ä»¤</li>
</ul>
<h3 data-id="heading-14">è‡ªå®šä¹‰MCPæœåŠ¡</h3>
<p>ä¸Šé¢ mcp-server å‘½ä»¤åˆ›å»ºçš„æ¨¡æ¿å·²ç»è‡ªå¸¦äº†ä¸€ä¸ªMCPæœåŠ¡ç¤ºä¾‹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">McpServer</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@modelcontextprotocol/sdk/server/mcp.js'</span>;
<span class="hljs-keyword">import</span>Â {Â <span class="hljs-title class_">StdioServerTransport</span>Â }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'@modelcontextprotocol/sdk/server/stdio.js'</span>;
<span class="hljs-keyword">import</span>Â { z }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'zod'</span>;
<span class="hljs-keyword">const</span>Â server =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">McpServer</span>({
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'prompt-server'</span>,
Â Â <span class="hljs-attr">version</span>:Â <span class="hljs-string">'1.0.0'</span>,
});
server.<span class="hljs-title function_">registerTool</span>(
Â Â <span class="hljs-string">'fetch_posts'</span>,
Â  {
Â  Â Â <span class="hljs-attr">description</span>:Â <span class="hljs-string">'Fetches a list of posts from a public API.'</span>,
Â  Â Â <span class="hljs-attr">inputSchema</span>: z.<span class="hljs-title function_">object</span>({}).<span class="hljs-property">shape</span>,
Â  },
Â Â <span class="hljs-keyword">async</span>Â () =&gt; {
Â  Â Â <span class="hljs-keyword">const</span>Â apiResponse =Â <span class="hljs-keyword">await</span>Â <span class="hljs-title function_">fetch</span>(
Â  Â  Â Â <span class="hljs-string">'https://jsonplaceholder.typicode.com/posts'</span>,
Â  Â  );
Â  Â Â <span class="hljs-keyword">const</span>Â posts =Â <span class="hljs-keyword">await</span>Â apiResponse.<span class="hljs-title function_">json</span>();
Â  Â Â <span class="hljs-keyword">const</span>Â response = {Â <span class="hljs-attr">posts</span>: posts.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,Â <span class="hljs-number">5</span>) };
Â  Â Â <span class="hljs-keyword">return</span>Â {
Â  Â  Â Â <span class="hljs-attr">content</span>: [
Â  Â  Â  Â  {
Â  Â  Â  Â  Â Â <span class="hljs-attr">type</span>:Â <span class="hljs-string">'text'</span>,
Â  Â  Â  Â  Â Â <span class="hljs-attr">text</span>:Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(response),
Â  Â  Â  Â  },
Â  Â  Â  ],
Â  Â  };
Â  },
);
server.<span class="hljs-title function_">registerPrompt</span>(
Â Â <span class="hljs-string">'poem-writer'</span>,
Â  {
Â  Â Â <span class="hljs-attr">title</span>:Â <span class="hljs-string">'Poem Writer'</span>,
Â  Â Â <span class="hljs-attr">description</span>:Â <span class="hljs-string">'Write a nice haiku'</span>,
Â  Â Â <span class="hljs-attr">argsSchema</span>: {Â <span class="hljs-attr">title</span>: z.<span class="hljs-title function_">string</span>(),Â <span class="hljs-attr">mood</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">optional</span>() },
Â  },
Â Â <span class="hljs-function">(<span class="hljs-params">{ title, mood }</span>) =&gt;</span>Â ({
Â  Â Â <span class="hljs-attr">messages</span>: [
Â  Â  Â  {
Â  Â  Â  Â Â <span class="hljs-attr">role</span>:Â <span class="hljs-string">'user'</span>,
Â  Â  Â  Â Â <span class="hljs-attr">content</span>: {
Â  Â  Â  Â  Â Â <span class="hljs-attr">type</span>:Â <span class="hljs-string">'text'</span>,
Â  Â  Â  Â  Â Â <span class="hljs-attr">text</span>:Â <span class="hljs-string">`Write a haiku<span class="hljs-subst">${mood ?Â <span class="hljs-string">` with the moodÂ <span class="hljs-subst">${mood}</span>`</span>Â :Â <span class="hljs-string">''</span>}</span>Â calledÂ <span class="hljs-subst">${title}</span>. Note that a haiku is 5 syllables followed by 7 syllables followed by 5 syllables `</span>,
Â  Â  Â  Â  },
Â  Â  Â  },
Â  Â  ],
Â  }),
);
<span class="hljs-keyword">const</span>Â transport =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">StdioServerTransport</span>();
<span class="hljs-keyword">await</span>Â server.<span class="hljs-title function_">connect</span>(transport);
</code></pre>
<p>ä¿®æ”¹ package.json é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ MCPè°ƒè¯•ä»£ç é…ç½®</p>
<pre><code class="hljs language-perl" lang="perl">{
Â Â <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"mcp-server-example"</span>,
Â Â <span class="hljs-string">"version"</span>:Â <span class="hljs-string">"1.0.0"</span>,
Â Â <span class="hljs-string">"description"</span>:Â <span class="hljs-string">"Example MCP Server for Gemini CLI Extension"</span>,
Â Â <span class="hljs-string">"type"</span>:Â <span class="hljs-string">"module"</span>,
Â Â <span class="hljs-string">"main"</span>:Â <span class="hljs-string">"example.js"</span>,
Â Â <span class="hljs-string">"scripts"</span>: {
Â  Â Â <span class="hljs-string">"dev"</span>:Â <span class="hljs-string">"npx -yÂ @modelcontextprotocol/inspector node dist/example.js"</span>,
Â  Â Â <span class="hljs-string">"build"</span>:Â <span class="hljs-string">"tsc"</span>
Â  },
Â Â <span class="hljs-string">"devDependencies"</span>: {
Â  Â Â <span class="hljs-string">"typescript"</span>:Â <span class="hljs-string">"~5.4.5"</span>,
Â  Â Â <span class="hljs-string">"@types/node"</span>:Â <span class="hljs-string">"^20.11.25"</span>
Â  },
Â Â <span class="hljs-string">"dependencies"</span>: {
Â  Â Â <span class="hljs-string">"@modelcontextprotocol/sdk"</span>:Â <span class="hljs-string">"^1.11.0"</span>,
Â  Â Â <span class="hljs-string">"zod"</span>:Â <span class="hljs-string">"^3.22.4"</span>
Â  }
}
</code></pre>
<p>æ‰§è¡Œ npm run build ç¼–è¯‘TSï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤å¯åŠ¨MCPè°ƒè¯•æœåŠ¡</p>
<pre><code class="hljs language-arduino" lang="arduino">$Â npm run dev
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e8bfb779192143e3a53e0ede25e654db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=eLcugDuILB8Y1M1Wf07Eue1WVAo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœåŠ¡å¯åŠ¨å®Œæˆï¼Œç‚¹å‡»è°ƒè¯•æœåŠ¡é“¾æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4fc42ecabc24db8bac3d52386c1f55f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=Wr%2FEl9iuACv%2FnlxZaGkIUUBRrPE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»ã€Connectã€‘è¿æ¥æœ¬åœ°MCPæœåŠ¡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84b8b78995644813b621502714c152bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=26u8KzKqtxi%2BpuAerAJwxJ58564%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€‰æ‹©ã€Toolsã€‘æµ‹è¯•ä¸€ä¸‹MCPæœåŠ¡æ˜¯å¦æ­£å¸¸</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3b5bb12989f44ee8a329b4cee3077c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=HZ87nWfPuf7JIO9C7RMPJxtDbKg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ— è¯¯åï¼Œä½¿ç”¨ gemini extensions validate éªŒè¯ä¸€ä¸‹æ’ä»¶çš„æœ‰æ•ˆæ€§</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensions validate ../my-first-extension</span>Â 
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fcedd53d9c74ea6a67d00ee78cb5ebe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=IqC72CEPBTE%2ByVjrsN3vLUjwFVE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éªŒè¯æˆåŠŸåå³å¯ä½¿ç”¨ gemini extensions install å®‰è£…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ gemini extensions link è¿›è¡Œç¬¦å·é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥çš„å¥½å¤„å°±æ˜¯ä»»ä½•æ›´æ”¹éƒ½ä¼šç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡æ–°å®‰è£…ï¼‰ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨ gemini extensions link æ¼”ç¤º</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â gemini extensionsÂ <span class="hljs-built_in">link</span>Â ../my-first-extension</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05fbe5d6728e4c2c8fc29f0ade71b905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=VdFBTmiR6zYPJzYbYWRvYzjlC3g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®‰è£…æˆ–è€…é“¾æ¥æˆåŠŸåï¼Œå°±å¯ä»¥ä½¿ç”¨ gemini extensions list æŸ¥çœ‹åˆ°æˆ‘ä»¬è‡ªå®šä¹‰çš„æ’ä»¶äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fd5c047a42440b790db067598dbdc6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=yaWk3ZCVC1QwBk0ZaXwBSw4B%2BIY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-15">è‡ªå®šä¹‰ä¸Šä¸‹æ–‡</h3>
<p>åœ¨è‡ªå®šä¹‰æ’ä»¶ç›®å½•æ–°å»ºä¸€ä¸ª GEMINI.md ç›®å½•ç”¨äºå­˜æ”¾è‡ªå®šä¹‰ä¸Šä¸‹æ–‡å†…å®¹</p>
<pre><code class="hljs language-sql" lang="sql"># MyÂ <span class="hljs-keyword">First</span>Â Extension Instructions
YouÂ <span class="hljs-keyword">are</span>Â an expert developer assistant.Â <span class="hljs-keyword">When</span>Â theÂ <span class="hljs-keyword">user</span>Â asks youÂ <span class="hljs-keyword">to</span>Â <span class="hljs-keyword">fetch</span>
posts, use the `fetch_posts` tool. Be conciseÂ <span class="hljs-keyword">in</span>Â your responses.
</code></pre>
<p>é…ç½®å®Œæˆåï¼Œæ›´æ–° gemini-extension.json æ–‡ä»¶ï¼ŒæŒ‡å®š contextFileName å±æ€§</p>
<pre><code class="hljs language-bash" lang="bash">{
Â Â <span class="hljs-string">"name"</span>:Â <span class="hljs-string">"mcp-server-example"</span>,
Â Â <span class="hljs-string">"version"</span>:Â <span class="hljs-string">"1.0.0"</span>,
Â Â <span class="hljs-string">"mcpServers"</span>: {
Â  Â Â <span class="hljs-string">"nodeServer"</span>: {
Â  Â  Â Â <span class="hljs-string">"command"</span>:Â <span class="hljs-string">"node"</span>,
Â  Â  Â Â <span class="hljs-string">"args"</span>: [<span class="hljs-string">"<span class="hljs-variable">${extensionPath}</span><span class="hljs-variable">${/}</span>dist<span class="hljs-variable">${/}</span>example.js"</span>],
Â  Â  Â Â <span class="hljs-string">"cwd"</span>:Â <span class="hljs-string">"<span class="hljs-variable">${extensionPath}</span>"</span>
Â  Â  }
Â  },
Â Â <span class="hljs-string">"contextFileName"</span>:Â <span class="hljs-string">"GEMINI.md"</span>
}
</code></pre>
<p>ä½¿ç”¨ gemini extensions list å¯ä»¥çœ‹åˆ°åˆšåˆšæ·»åŠ çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/989dbf3af30e48658289cb9d6635a1ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=H7OX6EWlJ%2FWuWpn48Euec%2FXaLK4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯åŠ¨Gemini CLIï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ /memory show å¯ä»¥æŸ¥çœ‹å…·ä½“çš„ä¸Šä¸‹æ–‡å†…å®¹ï¼Œæ­¤æ—¶å·²ç»åŒ…å«äº†è‡ªå®šä¹‰æ’ä»¶ä¸­çš„ä¸Šä¸‹æ–‡äº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e232a1afa7c43099a851609e39b3680~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=r7IN4dHTtHySeGKv%2FbVBqAR%2B0ps%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-16">è‡ªå®šä¹‰å‘½ä»¤</h3>
<p>åœ¨è‡ªå®šä¹‰æ’ä»¶ç›®å½•æ–°å»ºä¸€ä¸ª commandsç›®å½•ç”¨äºå­˜æ”¾è‡ªå®šä¹‰å‘½ä»¤ï¼Œè‡ªå®šä¹‰å‘½ä»¤æ–‡æ¡£å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgeminicli.com%2Fdocs%2Fcli%2Fcustom-commands%2F" target="_blank" title="https://geminicli.com/docs/cli/custom-commands/" ref="nofollow noopener noreferrer">geminicli.com/docs/cli/cuâ€¦</a></p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â <span class="hljs-built_in">mkdir</span>Â commands</span>
</code></pre>
<p>åˆ›å»ºä¸€ä¸ª hello.toml æ–‡ä»¶ç”¨äºç¬¬ä¸€ä¸ªè‡ªå®šä¹‰å‘½ä»¤ï¼Œå¹¶é…ç½®å‘½ä»¤</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">prompt</span>Â =Â <span class="hljs-string">"è¾“å‡ºç¤¼è²Œé—®å€™è¯­å¹¶ä»¥`*_*`å¼€å§‹"</span>
</code></pre>
<p>å†åˆ›å»ºä¸€ä¸ª fs å­å‘½ä»¤ç›®å½•ï¼Œåˆ›å»ºä¸€ä¸ª grep-code.toml æ–‡ä»¶</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â <span class="hljs-built_in">mkdir</span>Â fs</span>
<span class="hljs-meta prompt_">$</span><span class="bash">Â <span class="hljs-built_in">touch</span>Â fs/grep-code.toml</span>
</code></pre>
<p>è¾“å…¥æç¤ºè¯ä¿å­˜</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">prompt</span>Â =Â <span class="hljs-string">"""
Please summarize the findings for the pattern `{{args}}`.
Search Results:
!{grep -r {{args}} .}
"""</span>
</code></pre>
<p>ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de56e5d05b094e559fd0860525d72a30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=t%2BYnRwxJ0EGIyfI0TFvIll1qoTQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡å¯Gemini CLIï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥ / åœ¨å‘½ä»¤åˆ—è¡¨çœ‹åˆ°è‡ªå®šä¹‰çš„å‘½ä»¤</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7226eb98111646a984318676230c2a10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=qjwQFJAgbvr%2Bax%2FzAg0G32XyLRU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç›´æ¥è°ƒç”¨è‡ªå®šä¹‰å‘½ä»¤å³å¯æ‰§è¡Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9d17ed400dc4f6b9ddfc50f88e61c76~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=Qu3rcr7yyuRKrBUo%2B6VRvIu%2FnpU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-17">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-18">MCPæˆæƒå¤±è´¥</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15369c7ac7f24f50b0f94e424a5dc76a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=lZrISKLZvZrQcXdUfhqkFQ2QCkw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ ¹æ®æç¤ºå¯çŸ¥ï¼Œè°ƒç”¨ Nano Banana MCP éœ€è¦å¯¼å‡ºAPI Keyï¼ŒGithubä¸Šä¹Ÿæœ‰å¯¹åº”çš„æè¿°</p>
<p>Nano Banana Githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgemini-cli-extensions%2Fnanobanana" target="_blank" title="https://github.com/gemini-cli-extensions/nanobanana" ref="nofollow noopener noreferrer">github.com/gemini-cli-â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d162f09c850e4fb5b948a8c741e0f55e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=C0UwU2kFApwxnZb51WgOBcXVF90%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä½¿ç”¨çš„æ˜¯Gemini API Keyï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯å¯¼å‡º GEMINI_API_KEY</p>
<pre><code class="hljs language-ini" lang="ini">exportÂ <span class="hljs-attr">GEMINI_API_KEY</span>=your api key
</code></pre>
<h3 data-id="heading-19">MCPè°ƒç”¨å¤±è´¥</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/762b851b4f9f4f2ba6047a3b0cc7dd41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764470500&amp;x-signature=uv%2BgkmOqSvfk5F096neBRyj%2B08c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Nano Bananaè°ƒç”¨å°šæœ‰é—®é¢˜ï¼ŒGithub Issueï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgemini-cli-extensions%2Fnanobanana%2Fissues%2F18" target="_blank" title="https://github.com/gemini-cli-extensions/nanobanana/issues/18" ref="nofollow noopener noreferrer">github.com/gemini-cli-â€¦</a></p>
<h2 data-id="heading-20">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%253A%2F%2Fmp.weixin.qq.com%2Fs%2FQZb3T5ogImCFAEX8oi4xLw" target="_blank" title="https%3A//mp.weixin.qq.com/s/QZb3T5ogImCFAEX8oi4xLw" ref="nofollow noopener noreferrer">Gemini CLIä¸Šçº¿æ’ä»¶ç³»ç»Ÿ</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%253A%2F%2Fmp.weixin.qq.com%2Fs%2FQZb3T5ogImCFAEX8oi4xLw" target="_blank" title="https%3A//mp.weixin.qq.com/s/QZb3T5ogImCFAEX8oi4xLw" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-161 Apache Kylin Cube å®æˆ˜ï¼šå»ºæ¨¡ã€æ„å»ºä¸æŸ¥è¯¢åŠ é€Ÿå®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575133880435572787</link>    <guid>https://juejin.cn/post/7575133880435572787</guid>    <pubDate>2025-11-23T01:33:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575133880435572787" data-draft-id="7575119254313107482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-161 Apache Kylin Cube å®æˆ˜ï¼šå»ºæ¨¡ã€æ„å»ºä¸æŸ¥è¯¢åŠ é€Ÿå®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache Kylin"/> <meta itemprop="datePublished" content="2025-11-23T01:33:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-161 Apache Kylin Cube å®æˆ˜ï¼šå»ºæ¨¡ã€æ„å»ºä¸æŸ¥è¯¢åŠ é€Ÿå®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T01:33:23.000Z" title="Sun Nov 23 2025 01:33:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šåŸºäº Kylin 4.0ï¼Œä»é›¶æ­å»ºæ—¥æœŸ/åŒºåŸŸ/äº§å“/æ¸ é“ Cubeï¼Œæ”¯æŒç¦»çº¿æ„å»ºï¼Œå®æ—¶èƒ½åŠ›å¯é€‰ã€‚</li>
<li>ç»“è®ºï¼šå‘½ä¸­åˆé€‚ Cuboid å¯å°†å¤æ‚èšåˆé™åˆ°ç§’çº§ï¼›é€šè¿‡ Aggregation Group/å±‚çº§ç»´åº¦æ˜¾è‘—å‹ç¼©å­˜å‚¨ä¸æ„å»ºæˆæœ¬ã€‚</li>
<li>äº§å‡ºï¼šç«¯åˆ°ç«¯æ­¥éª¤ã€SQL ç¤ºä¾‹ã€ä¼˜åŒ–ç­–ç•¥ä¸ä¸€ä»½å·¥ç¨‹åŒ–é”™è¯¯é€ŸæŸ¥å¡ï¼Œä¾¿äºè½åœ°ä¸åç»­è¿­ä»£ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b85447d291394c6caed635d6094d3b90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=CPrcpy%2FB84bbYR%2FKcSATO8oFMJY%3D" alt="å¤§æ•°æ®-161 Apache Kylin Cube å®æˆ˜ï¼šå»ºæ¨¡ã€æ„å»ºä¸æŸ¥è¯¢åŠ é€Ÿå®Œæ•´æŒ‡å—" loading="lazy"/></p>
<h2 data-id="heading-1">ç‰ˆæœ¬çŸ©é˜µ</h2>



































<table><thead><tr><th>é¡¹</th><th>ç‰ˆæœ¬/å¹´ä»½</th><th>å·²éªŒè¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Apache Kylin</td><td>4.0ï¼ˆ2025ï¼‰</td><td>æ˜¯</td><td>æ–‡ä¸­å®Œæ•´æ¼”ç¤ºç¦»çº¿ Cube çš„å»ºæ¨¡ã€æ„å»ºä¸æŸ¥è¯¢å‘½ä¸­ã€‚</td></tr><tr><td>æ•°æ®æºï¼ˆç¦»çº¿ï¼‰</td><td>Hiveï¼ˆ3.x/åŒç±»ï¼‰</td><td>æ˜¯</td><td>äº‹å®/ç»´åº¦æ¥æºï¼›ä¸ç¤ºä¾‹ SQL ä¸€è‡´ã€‚</td></tr><tr><td>æ„å»ºå¼•æ“</td><td>Sparkï¼ˆ3.x/åŒç±»ï¼‰</td><td>æ˜¯</td><td>ç”¨äºç¦»çº¿æ„å»º Cuboidã€‚</td></tr><tr><td>å­˜å‚¨å¼•æ“</td><td>HBaseï¼ˆ2.x/åŒç±»ï¼‰</td><td>æ˜¯</td><td>å­˜æ”¾é¢„èšåˆ Cuboid ä¸å­—å…¸ã€‚</td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/625cfd38b9cc48eda699a0605b1308cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=QRKPZWEUJ8HVUN7dbFCikra%2FNAs%3D" alt="Apache Kylin" loading="lazy"/></p>
<h2 data-id="heading-2">Cube ä»‹ç»</h2>
<p>Apache Kylin æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åˆ†æå¼•æ“ï¼Œä¸“æ³¨äºæä¾›å¤§æ•°æ®çš„å®æ—¶OLAPï¼ˆåœ¨çº¿åˆ†æå¤„ç†ï¼‰èƒ½åŠ›ã€‚Cubeï¼ˆç«‹æ–¹ä½“ï¼‰æ˜¯ Apache Kylin çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œé€šè¿‡é¢„è®¡ç®—å¤§è§„æ¨¡æ•°æ®çš„å¤šç»´æ•°æ®é›†åˆï¼ŒåŠ é€Ÿå¤æ‚çš„ SQL æŸ¥è¯¢ã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Cube çš„å…³é”®ç‚¹ï¼š</p>
<h3 data-id="heading-3">Cube çš„åŸºæœ¬æ¦‚å¿µ</h3>
<p>Kylin ä¸­çš„ Cube æ˜¯é€šè¿‡å¯¹ä¸€ç»„äº‹å®è¡¨ï¼ˆé€šå¸¸æ˜¯ä¸šåŠ¡æ•°æ®è¡¨ï¼‰è¿›è¡Œå¤šç»´å»ºæ¨¡åï¼Œç”Ÿæˆçš„é¢„è®¡ç®—æ•°æ®ç»“æ„ã€‚Cube æ¶‰åŠå¯¹å¤šç»´æ•°æ®çš„åº¦é‡å’Œç»´åº¦çš„ç»„åˆï¼Œä»è€Œå¯ä»¥åœ¨æŸ¥è¯¢æ—¶é€šè¿‡æ£€ç´¢é¢„å…ˆè®¡ç®—çš„ç»“æœæ¥æ˜¾è‘—å‡å°‘è®¡ç®—å¼€é”€ã€‚</p>
<ul>
<li>ç»´åº¦ï¼ˆDimensionï¼‰ï¼šæ•°æ®ä¸­ç”¨äºåˆ†ç»„ã€ç­›é€‰å’Œåˆ‡ç‰‡çš„æ•°æ®å­—æ®µï¼Œä¾‹å¦‚æ—¶é—´ã€åœ°åŒºã€äº§å“ç­‰ã€‚</li>
<li>åº¦é‡ï¼ˆMeasureï¼‰ï¼šé€šå¸¸æ˜¯éœ€è¦è¿›è¡Œèšåˆè®¡ç®—çš„æ•°æ®å­—æ®µï¼Œä¾‹å¦‚é”€å”®é¢ã€è®¢å•æ•°ç­‰ã€‚</li>
<li>Cuboidï¼šæ¯ä¸ª Cube ç”±å¤šä¸ª Cuboid æ„æˆï¼ŒCuboid æ˜¯ä¸€ä¸ªç‰¹å®šç»´åº¦ç»„åˆçš„å­é›†ã€‚Cube ä¸­æ¯ç§ç»´åº¦ç»„åˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ª Cuboidï¼Œæ¯ä¸ª Cuboid å­˜å‚¨äº†è¯¥ç»„åˆä¸‹çš„é¢„èšåˆç»“æœã€‚</li>
</ul>
<h3 data-id="heading-4">Cube çš„åˆ›å»ºè¿‡ç¨‹</h3>
<ul>
<li>æ•°æ®å»ºæ¨¡ï¼šé¦–å…ˆåœ¨ Kylin ä¸­åˆ›å»ºä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼ˆData Modelï¼‰ï¼Œè¿™ä¸ªæ¨¡å‹å®šä¹‰äº†äº‹å®è¡¨å’Œç»´åº¦è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œç±»ä¼¼äºæ˜Ÿå‹æˆ–é›ªèŠ±å‹æ¨¡å¼ã€‚æ¨¡å‹ä¸­ä¹Ÿå®šä¹‰äº†éœ€è¦èšåˆçš„åº¦é‡å­—æ®µã€‚</li>
<li>Cube è®¾è®¡ï¼šåŸºäºæ•°æ®æ¨¡å‹è®¾è®¡ Cubeï¼ŒæŒ‡å®š Cube çš„ç»´åº¦å’Œåº¦é‡ã€‚Kylin ä¼šæ ¹æ®å®šä¹‰è‡ªåŠ¨è®¡ç®—æ‰€æœ‰å¯èƒ½çš„ç»´åº¦ç»„åˆï¼ˆCuboidï¼‰ã€‚</li>
<li>æ„å»º Cubeï¼šæ„å»ºè¿‡ç¨‹ä¼šè¯»å–åº•å±‚æ•°æ®æºï¼ˆå¦‚ Hiveã€HBaseã€Kafkaï¼‰ï¼Œç„¶åæ ¹æ®æŒ‡å®šçš„ç»´åº¦å’Œåº¦é‡ç”Ÿæˆæ¯ä¸ª Cuboid çš„é¢„è®¡ç®—æ•°æ®ã€‚è¿™äº›é¢„è®¡ç®—ç»“æœå­˜å‚¨åœ¨ HBase æˆ–å…¶ä»–å­˜å‚¨å¼•æ“ä¸­ã€‚</li>
</ul>
<h3 data-id="heading-5">Cube çš„æŸ¥è¯¢ä¸ä¼˜åŒ–</h3>
<h4 data-id="heading-6">æŸ¥è¯¢åŠ é€Ÿæœºåˆ¶</h4>
<p>å½“æœ‰ SQL æŸ¥è¯¢è¯·æ±‚åˆ°è¾¾ Kylin æ—¶ï¼Œç³»ç»Ÿä¼šé€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°æŸ¥è¯¢åŠ é€Ÿï¼š</p>
<ol>
<li>æŸ¥è¯¢è§£æï¼šé¦–å…ˆè§£æ SQL è¯­å¥ï¼Œè¯†åˆ«æŸ¥è¯¢æ¶‰åŠçš„äº‹å®è¡¨ã€ç»´åº¦åˆ—å’Œåº¦é‡æŒ‡æ ‡</li>
<li>Cuboid åŒ¹é…ï¼šæ ¹æ®æŸ¥è¯¢æ¡ä»¶ä¸­çš„ç»´åº¦ç»„åˆï¼Œåœ¨é¢„è®¡ç®—çš„ Cuboid é›†åˆä¸­å¯»æ‰¾å®Œå…¨åŒ¹é…æˆ–æœ€æ¥è¿‘çš„ Cuboid</li>
<li>ç»“æœè¿”å›ï¼šç›´æ¥ä»åŒ¹é…çš„ Cuboid ä¸­è·å–é¢„è®¡ç®—ç»“æœï¼Œé¿å…äº†ä»¥ä¸‹å®æ—¶è®¡ç®—è¿‡ç¨‹ï¼š
<ul>
<li>åŸå§‹æ•°æ®æ‰«æ</li>
<li>å¤šè¡¨è¿æ¥æ“ä½œ</li>
<li>èšåˆè®¡ç®—</li>
</ul>
</li>
</ol>
<p>å…¸å‹åº”ç”¨åœºæ™¯ç¤ºä¾‹ï¼š</p>
<ul>
<li>ç”µå•†å¹³å°éœ€è¦å®æ—¶æŸ¥è¯¢"åä¸œåœ°åŒºæ‰‹æœºå“ç±»åœ¨2023å¹´Q3çš„é”€å”®é¢"</li>
<li>å¹¿å‘Šç³»ç»Ÿè¦åˆ†æ"ä¸åŒå¹´é¾„æ®µç”¨æˆ·åœ¨å„æ—¶é—´æ®µçš„ç‚¹å‡»ç‡"</li>
<li>ç‰©æµç³»ç»ŸæŸ¥è¯¢"å„åŒºåŸŸé…é€ä¸­å¿ƒçš„å‡†æ—¶é€è¾¾ç‡"</li>
</ul>
<h4 data-id="heading-7">Cube ä¼˜åŒ–ç­–ç•¥</h4>
<p>ä¸ºäº†å¹³è¡¡æŸ¥è¯¢æ€§èƒ½ä¸å­˜å‚¨æˆæœ¬ï¼ŒKylin æä¾›å¤šç§ Cube ä¼˜åŒ–æ–¹æ³•ï¼š</p>
<ol>
<li>
<p>Aggregation Groupï¼ˆèšåˆç»„ï¼‰ï¼š</p>
<ul>
<li>å°†ç›¸å…³ç»´åº¦åˆ’åˆ†ä¸ºé€»è¾‘ç»„ï¼Œä»…è®¡ç®—ç»„å†…ç»´åº¦çš„ç»„åˆ</li>
<li>é…ç½®ç¤ºä¾‹ï¼šå°†"æ—¶é—´(å¹´/æœˆ/æ—¥)"ã€"åœ°åŸŸ(å›½å®¶/çœ/å¸‚)"ã€"äº§å“(å“ç±»/å“ç‰Œ)"åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹ç»„</li>
<li>å¯å‡å°‘ Cuboid æ•°é‡ä» 2^n é™åˆ° âˆ‘2^m (mä¸ºå„ç»„ç»´åº¦æ•°)</li>
</ul>
</li>
<li>
<p>å±‚çº§ç»´åº¦ä¼˜åŒ–ï¼š</p>
<ul>
<li>å¯¹å…·æœ‰å±‚çº§å…³ç³»çš„ç»´åº¦(å¦‚å¹´-æœˆ-æ—¥)è®¾ç½®ç‰¹æ®Šå¤„ç†</li>
<li>åªè®¡ç®—å®Œæ•´å±‚çº§è·¯å¾„ï¼Œè·³è¿‡éå¸¸ç”¨ç»„åˆ(å¦‚å¹´-æ—¥)</li>
</ul>
</li>
<li>
<p>å¿…è¦ç»´åº¦è®¾ç½®ï¼š</p>
<ul>
<li>æ ‡è®°å¿…é¡»å‡ºç°åœ¨æ‰€æœ‰ Cuboid ä¸­çš„æ ¸å¿ƒç»´åº¦</li>
<li>ç¡®ä¿å…³é”®æŸ¥è¯¢éƒ½èƒ½è·å¾—åŠ é€Ÿ</li>
</ul>
</li>
<li>
<p>è”åˆç»´åº¦ï¼š</p>
<ul>
<li>å°†æ€»æ˜¯åŒæ—¶æŸ¥è¯¢çš„ç»´åº¦ç»‘å®šä¸ºä¸€ä¸ªç»´åº¦ç»„</li>
<li>ä¾‹å¦‚"ç”¨æˆ·ID+è®¾å¤‡ID"ä½œä¸ºè”åˆç»´åº¦</li>
</ul>
</li>
</ol>
<p>ä¼˜åŒ–æ•ˆæœå¯¹æ¯”ï¼š</p>
<ul>
<li>æœªä¼˜åŒ–ï¼š10ä¸ªç»´åº¦ä¼šäº§ç”Ÿ1024ä¸ªCuboid</li>
<li>ä¼˜åŒ–åï¼šåˆ†ç»„é…ç½®å¯èƒ½ä»…éœ€ç”Ÿæˆ100-200ä¸ªCuboid</li>
<li>å­˜å‚¨ç©ºé—´å¯å‡å°‘60-80%ï¼Œæ„å»ºæ—¶é—´ç¼©çŸ­50%ä»¥ä¸Š</li>
</ul>
<p>å®é™…åº”ç”¨å»ºè®®ï¼š</p>
<ol>
<li>å…ˆåˆ†æé«˜é¢‘æŸ¥è¯¢æ¨¡å¼</li>
<li>æ ¹æ®æŸ¥è¯¢ç‰¹å¾è®¾è®¡Aggregation Group</li>
<li>æŒç»­ç›‘æ§å¹¶è°ƒæ•´Cubeè®¾è®¡</li>
<li>å¯¹é‡è¦ä¸šåŠ¡ä¿ç•™å®Œæ•´Cubeï¼Œæ¬¡è¦ä¸šåŠ¡ä½¿ç”¨ä¼˜åŒ–Cube</li>
</ol>
<h3 data-id="heading-8">å®æ—¶ OLAP</h3>
<p>Kylin 4.0 å¼•å…¥äº†å¯¹å®æ—¶ OLAP çš„æ”¯æŒï¼Œä½¿ç”¨ Kafka ä½œä¸ºå®æ—¶æ•°æ®æµè¾“å…¥ï¼Œæ„å»ºå®æ—¶ Cubeã€‚é€šè¿‡ä½¿ç”¨ Lambda æ¶æ„ï¼ŒKylin å¯ä»¥æ”¯æŒå®æ—¶å’Œæ‰¹å¤„ç†æ•°æ®çš„æ•´åˆåˆ†æã€‚</p>
<h3 data-id="heading-9">Cube çš„å…¸å‹åº”ç”¨åœºæ™¯</h3>
<ul>
<li>å¤§è§„æ¨¡æ•°æ®åˆ†æï¼šCube é€‚ç”¨äºåˆ†æè¶…å¤§è§„æ¨¡çš„æ•°æ®é›†ï¼Œé€šè¿‡é¢„è®¡ç®—æ–¹å¼åŠ é€ŸæŸ¥è¯¢ã€‚</li>
<li>å®æ—¶åˆ†æï¼šå®æ—¶ Cube å…è®¸ç”¨æˆ·åœ¨è¿‘ä¹å®æ—¶çš„åŸºç¡€ä¸Šåˆ†ææµæ•°æ®ã€‚</li>
<li>å•†ä¸šæ™ºèƒ½ï¼ˆBIï¼‰å·¥å…·çš„é›†æˆï¼šKylin æä¾›ä¸ Tableauã€Power BI ç­‰å¸¸è§ BI å·¥å…·çš„é›†æˆï¼Œç”¨æˆ·å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ SQL æŸ¥è¯¢è¯­è¨€è¿›è¡Œå¤æ‚çš„å¤šç»´åˆ†æã€‚</li>
</ul>
<h2 data-id="heading-10">åˆ›å»ºCubeï¼ˆæŒ‰æ—¥æœŸã€åŒºåŸŸã€äº§å“ã€æ¸ é“ï¼‰</h2>
<h3 data-id="heading-11">Cubeè®¾è®¡</h3>
<p>ç»´åº¦ï¼šæ—¥æœŸã€æ¸ é“ã€åŒºåŸŸã€äº§å“
æŒ‡æ ‡ï¼šé”€å”®æ€»é‡‘é¢ã€è®¢å•æ€»æ¯”æ•°</p>
<p>ç»“æ„å›¾å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1aaee76002484ee79d76b44865237f28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=THT57rlBxZjRFZRnh31z349oNmo%3D" alt="Kylin ç»“æ„è¡¨" loading="lazy"/>
å¯¹åº”çš„SQLå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span>
  t1.date1,
  t2.regionid,
  t2.regionname,
  t3.productid,
  t3.productname,
  <span class="hljs-built_in">sum</span>(t1.price) <span class="hljs-keyword">as</span> total_money,
  <span class="hljs-built_in">sum</span>(t1.amount) <span class="hljs-keyword">as</span> total_amount
<span class="hljs-keyword">from</span>
  dw_sales t1
<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dim_region t2
<span class="hljs-keyword">on</span> t1.regionid <span class="hljs-operator">=</span> t2.regionid
<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dim_product t3
<span class="hljs-keyword">on</span> t1.productid <span class="hljs-operator">=</span> t3.productid
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span>
  t1.date1,
  t2.regionid,
  t2.regionname,
  t3.productid,
  t3.productname
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>
  t1.date1,
  t2.regionname,
  t3.productname
</code></pre>
<h3 data-id="heading-12">æ ¸å¿ƒæ­¥éª¤</h3>
<p>å®šä¹‰æ•°æ®æº =&gt; å®šä¹‰Model =&gt; å®šä¹‰Cube =&gt; æ„å»ºCube</p>
<h3 data-id="heading-13">æ“ä½œæ­¥éª¤</h3>
<h4 data-id="heading-14">åˆ›å»ºModel</h4>
<p>åˆ›å»ºçš„æ—¶å€™ï¼ŒLookup Tableï¼Œé…ç½®æˆå¦‚ä¸‹çš„å†…å®¹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97cca42a555843c29f1b26df329233a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=%2Fa%2Bpkp%2BRyX6mHBM0ck0n3zWbIxE%3D" alt="Kylin åˆ›å»º Model" loading="lazy"/>
é…ç½®ç»´åº¦ä¸ºå¦‚ä¸‹çš„ç»“æœï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/057a351202ff48aaa991e6b03a4c1f7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=33cI5tLmnx83eN3e6aujWgc62ao%3D" alt="Kylin é…ç½®ç»´åº¦" loading="lazy"/></p>
<p>é…ç½®åº¦é‡ä¸ºå¦‚ä¸‹çš„ç»“æœï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd08400f34524d0b8e4bc8ffa92edc12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=4VZbANQyWe3wcdq9ZGGbbuPE5l0%3D" alt="Kylin é…ç½®åº¦é‡" loading="lazy"/></p>
<h3 data-id="heading-15">åˆ›å»ºCube</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50a269ba37bd4e12a0a977b3e2adc96d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=aItb664jGT1EAASU%2Brker%2BPzqjU%3D" alt="Kylin åˆ›å»º Cube" loading="lazy"/>
é€‰æ‹©ç»´åº¦ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77ada3150b114461b8ef365101f61961~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=Y0bMTAcpFxeggGuHcRzHQK8%2FchE%3D" alt="Kylin é€‰æ‹©ç»´åº¦" loading="lazy"/>
é…ç½®å®Œçš„ç»“æœå¦‚ä¸‹å›¾ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33e4956f545d4a49a814d8996816be98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=41YsEf4QgCMaM5Mgyw3qN8q0H7g%3D" alt="Kylin é…ç½®å®Œæˆ" loading="lazy"/>
æŒ‡å®šæŒ‡æ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ae8a8527f244130bbbf0f2035a83000~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=v8rUWeOMuXwr4c7e1ib4qeLz58Y%3D" alt="Kylin æŒ‡å®šæŒ‡æ ‡" loading="lazy"/>
æˆ‘ä»¬ç»§ç»­Buildæ“ä½œï¼Œå¯¹Cubeè¿›è¡ŒBuildï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7831731ea98b475abe8442247366e3e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=9nHd2sThQULuOwBI94oK2ay%2BVqM%3D" alt="Kylin ç»§ç»­ Build" loading="lazy"/>
æ¼«é•¿ç­‰å¾…ï¼Œæ„å»ºå®Œæ¯•çš„ç»“æœï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2208f8ec00bc49b09467a9c3b4e1b016~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=t%2FtFHF741gDuwE2x7WP5573qK%2Bs%3D" alt="Kylin æ„å»ºå®Œæ¯•" loading="lazy"/></p>
<h3 data-id="heading-16">æ‰§è¡ŒSQL</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">select</span>
  t1.date1,
  t2.regionid,
  t2.regionname,
  t3.productid,
  t3.productname,
  <span class="hljs-built_in">sum</span>(t1.price) <span class="hljs-keyword">as</span> total_money,
  <span class="hljs-built_in">sum</span>(t1.amount) <span class="hljs-keyword">as</span> total_amount
<span class="hljs-keyword">from</span>
  dw_sales t1
<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dim_region t2
<span class="hljs-keyword">on</span> t1.regionid <span class="hljs-operator">=</span> t2.regionid
<span class="hljs-keyword">inner</span> <span class="hljs-keyword">join</span> dim_product t3
<span class="hljs-keyword">on</span> t1.productid <span class="hljs-operator">=</span> t3.productid
<span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span>
  t1.date1,
  t2.regionid,
  t2.regionname,
  t3.productid,
  t3.productname
<span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span>
  t1.date1,
  t2.regionname,
  t3.productname
</code></pre>
<p>æ‰§è¡Œçš„ç»“æœï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2479b44f1cc47dca841373a0fb695ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764466402&amp;x-signature=G2gXrnZYHIJtXdSKeI9F8VejYaI%3D" alt="Kylin æ‰§è¡Œçš„ç»“æœ" loading="lazy"/></p>
<h2 data-id="heading-17">Cube æŸ¥è¯¢æµç¨‹</h2>
<p>å½“æŸ¥è¯¢è¯·æ±‚åˆ°è¾¾ Kylin æ—¶ï¼ŒKylin é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥ç¡®å®šå¦‚ä½•åˆ©ç”¨ Cube åŠ é€ŸæŸ¥è¯¢ï¼š</p>
<h3 data-id="heading-18">æŸ¥è¯¢è§£æ</h3>
<p>å½“ç”¨æˆ·é€šè¿‡ SQL æäº¤æŸ¥è¯¢æ—¶ï¼ŒKylin ä¼šå…ˆå°† SQL æŸ¥è¯¢è¿›è¡Œè§£æã€‚è§£æçš„å†…å®¹åŒ…æ‹¬ï¼š</p>
<p>é€‰æ‹©çš„ç»´åº¦ï¼ˆå¦‚ GROUP BY å’Œ WHERE ä¸­ä½¿ç”¨çš„å­—æ®µï¼‰
èšåˆæ“ä½œï¼ˆå¦‚ SUMã€COUNT ç­‰ï¼‰
è¿‡æ»¤æ¡ä»¶ï¼ˆWHERE å’Œ HAVING å­å¥ï¼‰
Kylin ä¼šå°†è§£æåçš„ SQL æŸ¥è¯¢æ˜ å°„åˆ°äº‹å…ˆåˆ›å»ºå¥½çš„ Cube ä¸Šï¼Œå¹¶å°è¯•æ ¹æ®æŸ¥è¯¢æ‰€æ¶‰åŠçš„ç»´åº¦å’Œåº¦é‡ï¼Œæ‰¾åˆ°æœ€åŒ¹é…çš„ Cuboidã€‚</p>
<h3 data-id="heading-19">Cuboid åŒ¹é…</h3>
<p>Kylin çš„æ ¸å¿ƒæ˜¯ Cubeï¼Œå®ƒç”±å¤šä¸ª Cuboid ç»„æˆï¼Œæ¯ä¸ª Cuboid å­˜å‚¨äº†ä¸€ä¸ªç‰¹å®šç»´åº¦ç»„åˆçš„èšåˆç»“æœã€‚Cuboid æ˜¯åŸºäºäº‹å®è¡¨ä¸­çš„ç»´åº¦è¿›è¡Œç»„åˆçš„å­é›†ï¼Œæ¯ä¸ªå­é›†å­˜å‚¨äº†é¢„è®¡ç®—çš„åº¦é‡å€¼ã€‚</p>
<p>Kylin é€šè¿‡å¦‚ä¸‹æ­¥éª¤è¿›è¡Œ Cuboid åŒ¹é…ï¼š</p>
<p>ç¡®å®š SQL æŸ¥è¯¢éœ€è¦çš„ç»´åº¦å’Œåº¦é‡ã€‚
æŸ¥æ‰¾ä¸æŸ¥è¯¢æ¡ä»¶æœ€åŒ¹é…çš„ Cuboidã€‚Kylin ä¼šä¼˜å…ˆé€‰æ‹©æœ€å°çš„ Cuboidï¼Œå³åªåŒ…å«æ‰€éœ€ç»´åº¦çš„å­é›†ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æ•°æ®è¯»å–é‡ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚
å¦‚æœæ‰¾åˆ°åŒ¹é…çš„ Cuboidï¼ŒKylin ä¼šç›´æ¥ä»ä¸­æå–é¢„è®¡ç®—çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-20">æŸ¥è¯¢æ‰§è¡Œ</h3>
<p>ä¸€æ—¦æ‰¾åˆ°åŒ¹é…çš„ Cuboidï¼ŒKylin ä¼šä» HBase æˆ–è€…å…¶ä»–å­˜å‚¨å¼•æ“ä¸­è¯»å– Cuboid ä¸­çš„æ•°æ®ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œæœ€åçš„è¿‡æ»¤ã€æ’åºæˆ–èšåˆï¼ˆå¦‚æœæŸ¥è¯¢ä¸­æœ‰å…¶ä»–æœªé¢„å…ˆè®¡ç®—çš„å†…å®¹ï¼‰ã€‚å› ä¸ºå¤§éƒ¨åˆ†è®¡ç®—å·²ç»åœ¨ Cube æ„å»ºé˜¶æ®µå®Œæˆï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„æ‰§è¡Œé€Ÿåº¦éå¸¸å¿«ï¼Œé€šå¸¸å¯ä»¥åœ¨ç§’çº§å†…å®Œæˆå¤§è§„æ¨¡æ•°æ®çš„æŸ¥è¯¢ã€‚</p>
<h2 data-id="heading-21">Cube ä¼˜åŒ–ç­–ç•¥</h2>
<p>è™½ç„¶ Cube æä¾›äº†å¼ºå¤§çš„æŸ¥è¯¢åŠ é€ŸåŠŸèƒ½ï¼Œä½† Cube çš„æ„å»ºã€å­˜å‚¨å’Œç®¡ç†ä¹Ÿå­˜åœ¨ä¸€å®šçš„æŒ‘æˆ˜ã€‚å› æ­¤ï¼ŒKylin æä¾›äº†ä¸€äº›ä¼˜åŒ–ç­–ç•¥ï¼Œå¸®åŠ©ç”¨æˆ·æœ€å¤§åŒ–åˆ©ç”¨ Cube çš„æ€§èƒ½ï¼Œæœ€å°åŒ–èµ„æºæ¶ˆè€—ã€‚</p>
<h3 data-id="heading-22">ç»´åº¦è£å‰ªï¼ˆAggregation Groupï¼‰</h3>
<p>Cube çš„å¤§å°å’Œå¤æ‚åº¦ä¸ç»´åº¦çš„æ•°é‡å¯†åˆ‡ç›¸å…³ï¼Œå› ä¸º Cube ä¸­æ¯ä¸ªç»´åº¦çš„ç»„åˆéƒ½ä¼šç”Ÿæˆä¸€ä¸ª Cuboidï¼Œç»´åº¦è¶Šå¤šï¼ŒCuboid æ•°é‡å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚ä¸ºäº†é¿å…ä¸å¿…è¦çš„ Cuboid ç”Ÿæˆï¼ŒKylin æ”¯æŒ Aggregation Groupï¼Œå®ƒå…è®¸ç”¨æˆ·å®šä¹‰ Cube ä¸­ä»…éœ€è¦ä¿ç•™çš„ç»´åº¦ç»„åˆï¼Œä»è€Œå‡å°‘ä¸å¸¸ç”¨ç»´åº¦ç»„åˆçš„è®¡ç®—å’Œå­˜å‚¨ã€‚</p>
<p>ä¸¾ä¾‹ï¼š
å¦‚æœæŸä¸ª Cube ä¸­æœ‰ æ—¶é—´ã€åœ°åŒº å’Œ äº§å“ ä¸‰ä¸ªç»´åº¦ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®šä¹‰åªè®¡ç®— æ—¶é—´-äº§å“ å’Œ åœ°åŒº-äº§å“ çš„ç»„åˆï¼Œè€Œå¿½ç•¥ä¸å¸¸ç”¨çš„ æ—¶é—´-åœ°åŒº ç»„åˆã€‚</p>
<h3 data-id="heading-23">Cuboid è£å‰ªï¼ˆCuboid Pruningï¼‰</h3>
<p>Cuboid è£å‰ªæ˜¯è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ‰‹æ®µï¼Œç”¨äºåœ¨ Cube æ„å»ºæ—¶å‡å°‘ä¸å¿…è¦çš„ Cuboidã€‚Kylin ä¼šæ ¹æ®æŸ¥è¯¢å†å²å’Œé…ç½®è§„åˆ™ï¼Œè‡ªåŠ¨è£å‰ªä¸ç»å¸¸ä½¿ç”¨çš„ Cuboidï¼Œå‡å°‘ Cube çš„æ„å»ºæ—¶é—´å’Œå­˜å‚¨ç©ºé—´ã€‚è¿™ä¸€è¿‡ç¨‹ç§°ä¸º Cuboid Pruningã€‚</p>
<p>Cuboid è£å‰ªçš„è§„åˆ™ï¼š
é€šè¿‡å†å²æŸ¥è¯¢åˆ†æï¼šKylin å¯ä»¥æ ¹æ®å†å²æŸ¥è¯¢åˆ†æå“ªäº›ç»´åº¦ç»„åˆæ›´å¸¸è¢«æŸ¥è¯¢ï¼Œä»è€Œå†³å®šå“ªäº› Cuboid éœ€è¦ä¿ç•™ã€‚
é€šè¿‡æ‰‹åŠ¨é…ç½®ï¼šç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡åœºæ™¯ï¼Œæ‰‹åŠ¨é…ç½®å“ªäº›ç»´åº¦ç»„åˆé‡è¦ï¼Œå“ªäº›å¯ä»¥è¢«è£å‰ªã€‚</p>
<h3 data-id="heading-24">å¢é‡æ„å»º</h3>
<p>åœ¨å¤§è§„æ¨¡æ•°æ®ç¯å¢ƒä¸­ï¼Œå…¨é‡æ„å»º Cube çš„ä»£ä»·éå¸¸é«˜ã€‚ä¸ºäº†åº”å¯¹è¿™ä¸€é—®é¢˜ï¼ŒKylin æä¾›äº† å¢é‡æ„å»º åŠŸèƒ½ã€‚å¢é‡æ„å»ºå…è®¸ç”¨æˆ·åªå¯¹æ–°å¢æˆ–æ›´æ–°çš„æ•°æ®è¿›è¡Œ Cube æ„å»ºï¼Œè€Œæ— éœ€é‡å»ºæ•´ä¸ª Cubeã€‚</p>
<p>å¢é‡æ„å»ºçš„å¥½å¤„ï¼š
æé«˜æ„å»ºæ•ˆç‡ï¼šåªå¤„ç†å¢é‡æ•°æ®ï¼Œé¿å…å¯¹æ•´ä¸ªæ•°æ®é›†çš„é‡å¤è®¡ç®—ã€‚
å®æ—¶æ›´æ–°ï¼šæ”¯æŒæ›´å¿«çš„å“åº”æ—¶é—´ï¼Œèƒ½å¤Ÿåœ¨è¾ƒçŸ­çš„æ—¶é—´å†…æ›´æ–°æœ€æ–°æ•°æ®çš„ Cubeã€‚</p>
<h3 data-id="heading-25">Cube çš„å±‚æ¬¡æ„å»ºï¼ˆLayered Cuboidï¼‰</h3>
<p>ä¸ºäº†å‡å°‘ Cuboid çš„å­˜å‚¨ç©ºé—´ï¼ŒKylin é‡‡ç”¨äº† å±‚æ¬¡æ„å»ºï¼ˆLayered Cuboidï¼‰ ç­–ç•¥ã€‚è¿™ä¸ªç­–ç•¥é€šè¿‡ä¼˜å…ˆè®¡ç®—æœ€å°çš„ Cuboidï¼ˆå³åŒ…å«è¾ƒå°‘ç»´åº¦çš„ç»„åˆï¼‰ï¼Œå†åŸºäºè¿™äº› Cuboid é€å±‚æ„å»ºæ›´å¤§çš„ Cuboidã€‚è¿™æ ·ä¸ä»…å¯ä»¥å‡å°‘å­˜å‚¨å ç”¨ï¼Œè¿˜èƒ½æé«˜æ„å»ºé€Ÿåº¦ã€‚</p>
<h3 data-id="heading-26">æ•°æ®åˆ†åŒº</h3>
<p>Kylin æ”¯æŒå°† Cube æŒ‰ç…§æ—¶é—´ç»´åº¦è¿›è¡Œåˆ†åŒºï¼ˆå¦‚æŒ‰å¤©ã€æŒ‰æœˆç­‰ï¼‰ï¼Œä»è€Œä½¿å¾—æŸ¥è¯¢å’Œæ•°æ®ç®¡ç†æ›´åŠ é«˜æ•ˆã€‚åˆ†åŒºå¯ä»¥å¸®åŠ© Kylin å‡å°‘æ¯æ¬¡æŸ¥è¯¢æ—¶çš„æ•°æ®é‡ï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½ã€‚</p>
<h3 data-id="heading-27">é™æ€å’ŒåŠ¨æ€ä¼˜åŒ–</h3>
<p>Kylin æä¾›äº† é™æ€ä¼˜åŒ– å’Œ åŠ¨æ€ä¼˜åŒ– ä¸¤ç§æ–¹å¼ï¼š</p>
<p>é™æ€ä¼˜åŒ–ï¼šåœ¨ Cube æ„å»ºæ—¶è¿›è¡Œä¼˜åŒ–ï¼Œä¾‹å¦‚é€šè¿‡è£å‰ª Cuboidã€å®šä¹‰ Aggregation Group ç­‰æ‰‹æ®µå‡å°‘ Cube çš„ä½“ç§¯ã€‚
åŠ¨æ€ä¼˜åŒ–ï¼šåœ¨æŸ¥è¯¢æ—¶åŠ¨æ€é€‰æ‹©æœ€åˆé€‚çš„ Cuboidï¼Œå°½å¯èƒ½é¿å…è¿‡å¤§çš„æ•°æ®è¯»å–ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<h3 data-id="heading-28">Cube çš„ç›‘æ§ä¸è°ƒä¼˜</h3>
<p>ä¸ºäº†è¿›ä¸€æ­¥ä¼˜åŒ– Cubeï¼ŒKylin æä¾›äº†å¤šç§å·¥å…·å’ŒåŠŸèƒ½ç”¨äºç›‘æ§å’Œè°ƒä¼˜ï¼š</p>
<ul>
<li>æŸ¥è¯¢æ—¥å¿—åˆ†æï¼šé€šè¿‡åˆ†ææŸ¥è¯¢æ—¥å¿—ï¼Œç”¨æˆ·å¯ä»¥è¯†åˆ«å‡ºå“ªäº›æŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¿‡é•¿æˆ–æœªå‘½ä¸­ Cubeï¼Œä»è€Œé’ˆå¯¹æ€§åœ°è°ƒæ•´ Cube è®¾è®¡ã€‚</li>
<li>æ„å»ºæ—¥å¿—ç›‘æ§ï¼šç›‘æ§ Cube æ„å»ºè¿‡ç¨‹ä¸­çš„æ€§èƒ½ç“¶é¢ˆï¼ŒåŠæ—¶å‘ç°å¹¶ä¼˜åŒ–æ„å»ºæ•ˆç‡ã€‚</li>
</ul>
<h2 data-id="heading-29">é”™è¯¯é€ŸæŸ¥</h2>


















































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>æŸ¥è¯¢èµ°åº•è¡¨ã€è€—æ—¶é•¿</td><td>SQL ç»´åº¦/åº¦é‡ä¸æ¨¡å‹ä¸ä¸€è‡´ï¼ˆå‡½æ•°ã€åˆ«åã€ç²¾åº¦ï¼‰</td><td>è°ƒæ•´ SQL ä¸æ¨¡å‹å£å¾„ä¸€è‡´ï¼›å¿…è¦æ—¶ä¸ºå¸¸ç”¨è¡¨è¾¾å¼é…ç½®è¡ç”Ÿåº¦é‡ã€‚</td></tr><tr><td>æŸ¥è¯¢ä¸å‘½ä¸­ Cubeï¼ˆä»…å·®ä¸€åˆ—ï¼‰</td><td>æ¨¡å‹ç»´åº¦ä¸ SQL é€‰æ‹©ä¸å®Œå…¨åŒ¹é…</td><td>è¡¥é½å¸¸ç”¨ç»´åº¦åˆ°æ¨¡å‹æˆ–è°ƒæ•´ SQLï¼›è¯„ä¼°å¿…è¦ç»´åº¦/è”åˆç»´åº¦ã€‚</td></tr><tr><td>â€œç»´è¡¨ Join ä¸ç”Ÿæ•ˆ/è¡Œæ•°æ”¾å¤§â€</td><td>Lookup è¡¨æœªæ­£ç¡®é…ç½®ã€Join Key ä¸ºç©ºæˆ–ç±»å‹ä¸ä¸€è‡´</td><td>å¯¹é½ Join Key ç±»å‹ä¸å¤§å°å†™ï¼Œæ¸…æ´— NULLï¼›ç¡®ä¿ç»´è¡¨æ ‡è®°ä¸º Lookupã€‚</td></tr><tr><td>æ„å»ºæ—¶é—´å¼‚å¸¸é•¿ã€Region å‹åŠ›å¤§</td><td>æœªåš Aggregation Group/å±‚çº§ç»´åº¦ï¼ŒCuboid ç»„åˆçˆ†ç‚¸</td><td>åˆ‡åˆ† Aggregation Groupã€è®¾ç½®å±‚çº§ç»´åº¦ä¸è”åˆç»´åº¦ï¼Œè£å‰ªä½é¢‘ç»„åˆã€‚</td></tr><tr><td>æ„å»ºä»»åŠ¡å¤±è´¥/å¡ä½</td><td>Spark èµ„æºä¸è¶³ã€å¹¶å‘ä¸å†…å­˜å‚æ•°ä¸å½“</td><td>æå‡ Executor/å†…å­˜ï¼Œåˆç†å¹¶è¡Œåº¦ä¸åˆ†åŒºï¼›åˆ†æ®µæ„å»ºå¤§æ—¶é—´åŒºé—´ã€‚</td></tr><tr><td>å¢é‡æ„å»ºæœ‰ç¼ºå£</td><td>åˆ†åŒºå­—æ®µ/æ—¶é—´æ°´ä½ä¸ä¸€è‡´</td><td>ç»Ÿä¸€åˆ†åŒºåˆ—ä¸æ—¶é—´æ ¼å¼ï¼›è¡¥å»ºç¼ºæ®µå¹¶æ ¡éªŒå­—å…¸ä¸€è‡´æ€§ã€‚</td></tr><tr><td>å­—å…¸ç¼–ç ä¸ä¸€è‡´å¯¼è‡´ç»´åº¦å¼‚å¸¸</td><td>å†å²ä¸æ–°æ„å»ºå­—å…¸ä¸å¯¹é½</td><td>å›ºå®šå­—å…¸ç­–ç•¥ï¼›å¿…è¦æ—¶åšä¸€æ¬¡å…¨é‡é‡å»ºä»¥å¯¹é½å­—å…¸ã€‚</td></tr><tr><td>å®æ—¶ä¸ç¦»çº¿å£å¾„ä¸ä¸€è‡´</td><td>Lambda åˆå¹¶å£å¾„ä¸åŒï¼ˆèšåˆç²’åº¦/çª—å£/æ—¶åŒºï¼‰</td><td>ç»Ÿä¸€æ—¶é—´çª—å£ä¸èšåˆå£å¾„ï¼›å¢åŠ å›å¡«ä¸å¯¹è´¦æµç¨‹ã€‚</td></tr></tbody></table>
<h2 data-id="heading-30">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-31">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AIç ”ç©¶-127 Qwen2.5-Omni æ·±è§£ï¼šThinker-Talker åŒæ ¸ã€TMRoPE ä¸æµå¼è¯­éŸ³</strong></p>
<h3 data-id="heading-32">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-174 FastFDS ä»å•æœºåˆ°åˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨ï¼šå®æˆ˜ä¸æ¶æ„å–èˆ</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡å·²å®Œç»“ï¼ŒDubboå·²å®Œç»“ï¼ŒMySQLå·²å®Œç»“ï¼ŒMongoDBå·²å®Œç»“ï¼ŒNeo4jå·²å®Œç»“ï¼ŒFastDFS æ­£åœ¨æ›´æ–°ï¼Œæ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-33">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡†å¤‡æ‰‹å†™Simple Raft(ä¸‰ï¼‰ æ—¥å¿—å¤åˆ¶â€”â€”ä¸€è‡´æ€§æ£€æŸ¥]]></title>    <link>https://juejin.cn/post/7575054113924677647</link>    <guid>https://juejin.cn/post/7575054113924677647</guid>    <pubDate>2025-11-22T11:30:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575054113924677647" data-draft-id="7575090551356751924" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡†å¤‡æ‰‹å†™Simple Raft(ä¸‰ï¼‰ æ—¥å¿—å¤åˆ¶â€”â€”ä¸€è‡´æ€§æ£€æŸ¥"/> <meta itemprop="keywords" content="åç«¯,Raft"/> <meta itemprop="datePublished" content="2025-11-22T11:30:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡†å¤‡æ‰‹å†™Simple Raft(ä¸‰ï¼‰ æ—¥å¿—å¤åˆ¶â€”â€”ä¸€è‡´æ€§æ£€æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T11:30:31.000Z" title="Sat Nov 22 2025 11:30:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œè€…ï¼š20å¹´ITè€å…µï¼Œ15å¹´æ¶æ„ç»éªŒï¼Œä¸“æ³¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸ä¸­é—´ä»¶å¼€å‘ã€‚ç°æœåŠ¡äºä¸€å®¶é‡‘èå…¬å¸ï¼Œæ‰‹å†™è¿‡å„ç±»ä¸­é—´ä»¶ï¼Œå¯¹Jacocoã€å¤œèºç­‰å¼€æºé¡¹ç›®æœ‰æ·±åº¦äºŒæ¬¡å¼€å‘ç»éªŒã€‚</p>
</blockquote>
<p><strong>å®Œæ•´ä»£ç å·²å¼€æºï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsh_wangwanbao%2Fsimple-raft" target="_blank" title="https://gitee.com/sh_wangwanbao/simple-raft" ref="nofollow noopener noreferrer">gitee.com/sh_wangwanbâ€¦</a>  æœ¬ç« ä»£ç åˆ†æ”¯ï¼šch3</p>
<hr/>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬è·‘é€šäº†Leaderé€‰ä¸¾ï¼Œ3ä¸ªèŠ‚ç‚¹èƒ½æ­£å¸¸é€‰å‡ºLeaderï¼Œå¿ƒè·³ä¹Ÿèƒ½ç»´æŒã€‚ä½†è¯´å®è¯ï¼Œé‚£åªæ˜¯Raftçš„å¼€èƒƒèœã€‚</p>
<p>é€‰ä¸¾è§£å†³çš„æ˜¯"è°æ¥å½“è€å¤§"ï¼Œä½†è€å¤§é€‰å‡ºæ¥ä¹‹åå¹²ä»€ä¹ˆï¼Ÿæ€ä¹ˆåè°ƒå¤§å®¶å¹²æ´»ï¼Ÿè¿™æ‰æ˜¯Raftçš„æ ¸å¿ƒé—®é¢˜ã€‚</p>
<p>å›é¡¾ç¬¬ä¸€ç¯‡è¯´çš„ï¼šRaftçš„æœ¬è´¨æ˜¯ä¿è¯æ‰€æœ‰èŠ‚ç‚¹æŒ‰ç›¸åŒé¡ºåºæ‰§è¡Œç›¸åŒçš„æ“ä½œã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†Leaderï¼Œä½†è¿˜æ²¡æœ‰"æ“ä½œ"å’Œ"é¡ºåº"ã€‚</p>
<p>è¿™ä¸€ç¯‡æˆ‘ä»¬æ¥å®ç°æ—¥å¿—å¤åˆ¶çš„ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€è‡´æ€§æ£€æŸ¥ã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦æ—¥å¿—</h2>
<p>å…ˆæƒ³ä¸€ä¸ªåœºæ™¯ï¼š3ä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘Leaderå‘è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Client-1 â†’ Leader: SET <span class="hljs-attr">name</span>=alice
Client-2 â†’ Leader: SET <span class="hljs-attr">name</span>=bob  
Client-3 â†’ Leader: DELETE name
</code></pre>
<p>å¦‚æœLeaderç›´æ¥æŠŠè¿™äº›æ“ä½œå¹¿æ’­ç»™Followerï¼Œä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼Ÿ</p>
<p>æ¯ä¸ªFolloweræ”¶åˆ°è¯·æ±‚çš„é¡ºåºå¯èƒ½ä¸ä¸€æ ·ã€‚ç½‘ç»œå»¶è¿Ÿã€ä¸¢åŒ…ã€é‡ä¼ ï¼Œå„ç§æƒ…å†µéƒ½å¯èƒ½å‘ç”Ÿã€‚æœ€åä¸‰ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€å¯èƒ½å®Œå…¨ä¸åŒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Node-1: <span class="hljs-attr">name</span>=alice
Node-2: <span class="hljs-attr">name</span>=bob
Node-3: (ç©º)
</code></pre>
<p>è¿™å°±ä¹±å¥—äº†ã€‚</p>
<p>æ—¥å¿—å°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„ã€‚æ‰€æœ‰æ“ä½œå…ˆå†™å…¥æ—¥å¿—ï¼Œæ—¥å¿—æœ‰ä¸¥æ ¼çš„é¡ºåºï¼ˆindexï¼‰ï¼Œæ‰€æœ‰èŠ‚ç‚¹æŒ‰ç›¸åŒçš„æ—¥å¿—é¡ºåºæ‰§è¡Œæ“ä½œï¼Œæœ€ç»ˆçŠ¶æ€å°±ä¸€å®šä¸€è‡´ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    subgraph å¹¶å‘è¯·æ±‚
        C1[Client-1: SET alice]
        C2[Client-2: SET bob]
        C3[Client-3: DELETE]
    end
    
    subgraph Leaderæ—¥å¿—
        L1["[1] SET alice"]
        L2["[2] SET bob"]
        L3["[3] DELETE"]
    end
    
    C1 --&gt; L1
    C2 --&gt; L2
    C3 --&gt; L3
    
    L1 --&gt; F1["FolloweræŒ‰åºæ‰§è¡Œ"]
    L2 --&gt; F1
    L3 --&gt; F1
</code></pre>
<p>ç®€å•è¯´ï¼Œæ—¥å¿—æŠŠæ—¶é—´ç»´åº¦çš„å¹¶å‘ï¼Œè½¬åŒ–æˆäº†ç©ºé—´ç»´åº¦çš„é¡ºåºã€‚è¿™æ˜¯Raftæœ€æ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ã€‚</p>
<h2 data-id="heading-1">æ—¥å¿—é•¿ä»€ä¹ˆæ ·</h2>
<p>æˆ‘ä»¬å…ˆå®šä¹‰æ—¥å¿—çš„ç»“æ„ï¼Œå…¶å®å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogEntry</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> index;      <span class="hljs-comment">// æ—¥å¿—ç´¢å¼•ï¼Œä»1å¼€å§‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> term;       <span class="hljs-comment">// åˆ›å»ºè¿™æ¡æ—¥å¿—æ—¶çš„Leaderä»»æœŸ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">byte</span>[] command;  <span class="hljs-comment">// å…·ä½“çš„ä¸šåŠ¡æŒ‡ä»¤</span>
}
</code></pre>
<p>ä¸‰ä¸ªå­—æ®µå°±å¤Ÿäº†ã€‚indexæ˜¯æ—¥å¿—çš„ä½ç½®ï¼Œtermæ˜¯åˆ›å»ºæ—¶çš„ä»»æœŸå·ï¼Œcommandæ˜¯å…·ä½“è¦æ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦å­˜termï¼Ÿåé¢è®²ä¸€è‡´æ€§æ£€æŸ¥çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œè¿™æ˜¯åˆ¤æ–­æ—¥å¿—æ˜¯å¦å†²çªçš„å…³é”®ã€‚</p>
<p>å­˜å‚¨æ¥å£ä¹Ÿä¸å¤æ‚ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LogStorage</span> {
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">append</span><span class="hljs-params">(LogEntry entry)</span>;              <span class="hljs-comment">// è¿½åŠ æ—¥å¿—</span>
    LogEntry <span class="hljs-title function_">getEntry</span><span class="hljs-params">(<span class="hljs-type">long</span> index)</span>;            <span class="hljs-comment">// æŒ‰ç´¢å¼•è¯»å–</span>
    <span class="hljs-type">long</span> <span class="hljs-title function_">getLastIndex</span><span class="hljs-params">()</span>;                      <span class="hljs-comment">// æœ€åä¸€æ¡æ—¥å¿—çš„ç´¢å¼•</span>
    <span class="hljs-type">long</span> <span class="hljs-title function_">getLastTerm</span><span class="hljs-params">()</span>;                       <span class="hljs-comment">// æœ€åä¸€æ¡æ—¥å¿—çš„term</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">truncateFrom</span><span class="hljs-params">(<span class="hljs-type">long</span> index)</span>;            <span class="hljs-comment">// æˆªæ–­ï¼šåˆ é™¤indexåŠä¹‹åçš„æ—¥å¿—</span>
    List&lt;LogEntry&gt; <span class="hljs-title function_">getEntries</span><span class="hljs-params">(<span class="hljs-type">long</span> from, <span class="hljs-type">long</span> to)</span>;  <span class="hljs-comment">// èŒƒå›´è¯»å–</span>
}
</code></pre>
<p>è¿™ä¸€ç‰ˆæˆ‘ä»¬å…ˆç”¨å†…å­˜å®ç°ï¼Œåé¢å†è€ƒè™‘æŒä¹…åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryLogStorage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">LogStorage</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Long, LogEntry&gt; logs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastIndex</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-variable">lastTerm</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">append</span><span class="hljs-params">(LogEntry entry)</span> {
        logs.put(entry.getIndex(), entry);
        lastIndex = entry.getIndex();
        lastTerm = entry.getTerm();
    }
    
    <span class="hljs-comment">// å…¶ä»–æ–¹æ³•çœç•¥...</span>
}
</code></pre>
<p>ç”¨Mapå­˜æ—¥å¿—ï¼Œkeyæ˜¯indexã€‚ç®€å•ç²—æš´ï¼Œä½†å¤Ÿç”¨äº†ã€‚</p>
<h2 data-id="heading-2">ä¸€è‡´æ€§æ£€æŸ¥ï¼šè¿™æ‰æ˜¯éš¾ç‚¹</h2>
<p>æ—¥å¿—ç»“æ„å®šä¹‰å¥½äº†ï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼šLeaderæ€ä¹ˆæŠŠæ—¥å¿—å¤åˆ¶ç»™Followerï¼Ÿ</p>
<p>æœ€ç®€å•çš„æƒ³æ³•æ˜¯ï¼šLeaderç›´æ¥æŠŠæ—¥å¿—å‘ç»™Followerï¼ŒFolloweræ”¶åˆ°å°±è¿½åŠ ã€‚ä½†è¿™æ ·æœ‰ä¸ªé—®é¢˜â€”â€”å¦‚æœFollowerçš„æ—¥å¿—å’ŒLeaderä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ</p>
<p>æ¯”å¦‚è¿™ç§æƒ…å†µï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Leader:     <span class="hljs-section">[1,term=1]</span> <span class="hljs-section">[2,term=1]</span> <span class="hljs-section">[3,term=2]</span> <span class="hljs-section">[4,term=2]</span> <span class="hljs-section">[5,term=2]</span>
Follower-A: <span class="hljs-section">[1,term=1]</span> <span class="hljs-section">[2,term=1]</span> <span class="hljs-section">[3,term=2]</span> <span class="hljs-section">[4,term=2]</span> <span class="hljs-section">[5,term=2]</span>  â† å®Œå…¨ä¸€è‡´
Follower-B: <span class="hljs-section">[1,term=1]</span> <span class="hljs-section">[2,term=1]</span> <span class="hljs-section">[3,term=2]</span>                        â† è½åäº†
Follower-C: <span class="hljs-section">[1,term=1]</span> <span class="hljs-section">[2,term=1]</span> <span class="hljs-section">[3,term=1]</span>                        â† å†²çªäº†ï¼
</code></pre>
<p>Follower-Båªæ˜¯è½åï¼Œè¡¥ä¸Šå°±è¡Œã€‚ä½†Follower-Cçš„é—®é¢˜å¤§äº†â€”â€”å®ƒçš„index=3çš„æ—¥å¿—termæ˜¯1ï¼Œè€ŒLeaderçš„æ˜¯2ã€‚è¿™è¯´æ˜è¿™æ¡æ—¥å¿—æ˜¯ä¸åŒLeaderåœ¨ä¸åŒä»»æœŸå†™å…¥çš„ï¼Œå†…å®¹å¯èƒ½å®Œå…¨ä¸ä¸€æ ·ã€‚</p>
<p>è¿™ç§æƒ…å†µä¸‹ï¼ŒFollower-Cå¿…é¡»åˆ æ‰index=3åŠä¹‹åçš„æ—¥å¿—ï¼Œç„¶åä»Leaderé‡æ–°å¤åˆ¶ã€‚</p>
<p>Raftç”¨ä¸€ä¸ªå¾ˆå·§å¦™çš„æ–¹æ³•æ¥æ£€æµ‹è¿™ç§ä¸ä¸€è‡´ï¼š<strong>prevLogIndexå’ŒprevLogTerm</strong>ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant L as Leader
    participant F as Follower
    
    Note over L: è¦å‘é€index=4çš„æ—¥å¿—
    L-&gt;&gt;F: AppendEntries&lt;br/&gt;prevLogIndex=3, prevLogTerm=2&lt;br/&gt;entries=[index=4]
    
    Note over F: æ£€æŸ¥æœ¬åœ°index=3çš„æ—¥å¿—
    alt termåŒ¹é…
        F-&gt;&gt;F: è¿½åŠ index=4
        F--&gt;&gt;L: success=true
    else termä¸åŒ¹é…æˆ–ä¸å­˜åœ¨
        F-&gt;&gt;F: æ‹’ç»ï¼Œç­‰å¾…å›é€€
        F--&gt;&gt;L: success=false
    end
</code></pre>
<p>Leaderå‘é€æ—¥å¿—æ—¶ï¼Œä¼šå¸¦ä¸Š"å‰ä¸€æ¡æ—¥å¿—"çš„indexå’Œtermã€‚Followeræ”¶åˆ°åï¼Œå…ˆæ£€æŸ¥è‡ªå·±æœ¬åœ°index=prevLogIndexçš„æ—¥å¿—ï¼Œtermæ˜¯å¦ç­‰äºprevLogTermã€‚</p>
<p>å¦‚æœåŒ¹é…ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®ä¹‹å‰çš„æ—¥å¿—éƒ½æ˜¯ä¸€è‡´çš„ï¼ˆè¿™æ˜¯ä¸€ä¸ªé€’å½’çš„ä¿è¯ï¼‰ï¼Œå¯ä»¥å®‰å…¨è¿½åŠ æ–°æ—¥å¿—ã€‚</p>
<p>å¦‚æœä¸åŒ¹é…ï¼Œè¯´æ˜æ—¥å¿—æœ‰å†²çªï¼ŒFolloweræ‹’ç»è¿™æ¬¡è¯·æ±‚ã€‚Leaderæ”¶åˆ°æ‹’ç»åï¼Œä¼šæŠŠprevLogIndexå¾€å‰é€€ä¸€æ ¼ï¼Œå†è¯•ä¸€æ¬¡ã€‚ä¸€ç›´é€€åˆ°ä¸¤è¾¹ä¸€è‡´çš„ä½ç½®ï¼Œç„¶åä»é‚£é‡Œå¼€å§‹é‡æ–°å¤åˆ¶ã€‚</p>
<h2 data-id="heading-3">æ‰©å±•AppendEntriesè¯·æ±‚</h2>
<p>ä¸Šä¸€ç¯‡çš„AppendEntriesåªç”¨æ¥å‘å¿ƒè·³ï¼Œç°åœ¨è¦æ‰©å±•ä¸€ä¸‹ï¼Œè®©å®ƒèƒ½æºå¸¦æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppendEntriesRequest</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> term;           <span class="hljs-comment">// Leaderçš„ä»»æœŸï¼ˆä¸Šä¸€ç¯‡å·²æœ‰ï¼‰</span>
    <span class="hljs-keyword">private</span> String leaderId;     <span class="hljs-comment">// Leaderçš„IDï¼ˆä¸Šä¸€ç¯‡å·²æœ‰ï¼‰</span>
    
    <span class="hljs-comment">// æ–°å¢çš„å­—æ®µ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> prevLogIndex;   <span class="hljs-comment">// å‰ä¸€æ¡æ—¥å¿—çš„ç´¢å¼•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> prevLogTerm;    <span class="hljs-comment">// å‰ä¸€æ¡æ—¥å¿—çš„term</span>
    <span class="hljs-keyword">private</span> List&lt;LogEntry&gt; entries;  <span class="hljs-comment">// è¦è¿½åŠ çš„æ—¥å¿—ï¼Œå¿ƒè·³æ—¶ä¸ºnull</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> leaderCommit;   <span class="hljs-comment">// Leaderçš„commitIndex</span>
}
</code></pre>
<p>å“åº”ä¹Ÿè¦æ‰©å±•ï¼ŒåŠ ä¸Šå†²çªä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppendEntriesResponse</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> term;           <span class="hljs-comment">// å½“å‰ä»»æœŸ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> success;     <span class="hljs-comment">// æ˜¯å¦æˆåŠŸ</span>
    
    <span class="hljs-comment">// æ–°å¢ï¼šå†²çªä¿¡æ¯ï¼Œç”¨äºå¿«é€Ÿå›é€€</span>
    <span class="hljs-keyword">private</span> Long conflictIndex;  <span class="hljs-comment">// å†²çªçš„ä½ç½®</span>
    <span class="hljs-keyword">private</span> Long conflictTerm;   <span class="hljs-comment">// å†²çªçš„term</span>
}
</code></pre>
<p>conflictIndexå’ŒconflictTermæ˜¯ä¼˜åŒ–ç”¨çš„ã€‚å¦‚æœFollowerå‘ç°å†²çªï¼Œå¯ä»¥å‘Šè¯‰Leader"æˆ‘è¿™ä¸ªä½ç½®çš„termæ˜¯å¤šå°‘"ï¼ŒLeaderå°±èƒ½æ›´å¿«åœ°æ‰¾åˆ°ä¸€è‡´çš„ä½ç½®ï¼Œä¸ç”¨ä¸€æ¡ä¸€æ¡å¾€å›é€€ã€‚</p>
<h2 data-id="heading-4">Followerå¤„ç†æ—¥å¿—çš„é€»è¾‘</h2>
<p>è¿™æ˜¯æ•´ä¸ªæ—¥å¿—å¤åˆ¶æœ€æ ¸å¿ƒçš„ä»£ç ï¼Œæˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> AppendEntriesResponse <span class="hljs-title function_">handleAppendEntries</span><span class="hljs-params">(AppendEntriesRequest req)</span> {
    lock.lock();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. æ‹’ç»è¿‡æœŸçš„è¯·æ±‚</span>
        <span class="hljs-keyword">if</span> (req.getTerm() &lt; currentTerm) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesResponse</span>(currentTerm, <span class="hljs-literal">false</span>);
        }
        
        <span class="hljs-comment">// 2. å‘ç°æ›´é«˜æˆ–ç›¸ç­‰çš„termï¼Œè½¬ä¸ºFollower</span>
        <span class="hljs-keyword">if</span> (req.getTerm() &gt;= currentTerm) {
            becomeFollower(req.getTerm());
            leaderId = req.getLeaderId();
            resetElectionTimeout();
        }
        
        <span class="hljs-comment">// 3. ä¸€è‡´æ€§æ£€æŸ¥ï¼ˆæ ¸å¿ƒï¼ï¼‰</span>
        <span class="hljs-keyword">if</span> (req.getPrevLogIndex() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">LogEntry</span> <span class="hljs-variable">localPrev</span> <span class="hljs-operator">=</span> logStorage.getEntry(req.getPrevLogIndex());
            
            <span class="hljs-comment">// æœ¬åœ°æ²¡æœ‰è¿™æ¡æ—¥å¿—</span>
            <span class="hljs-keyword">if</span> (localPrev == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesResponse</span>(currentTerm, <span class="hljs-literal">false</span>);
            }
            
            <span class="hljs-comment">// æœ¬åœ°æœ‰ï¼Œä½†termä¸åŒ¹é…â€”â€”Loss</span>
            <span class="hljs-keyword">if</span> (localPrev.getTerm() != req.getPrevLogTerm()) {
                <span class="hljs-comment">// åˆ æ‰å†²çªçš„æ—¥å¿—</span>
                logStorage.truncateFrom(req.getPrevLogIndex());
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesResponse</span>(currentTerm, <span class="hljs-literal">false</span>, 
                    req.getPrevLogIndex(), localPrev.getTerm());
            }
        }
        
        <span class="hljs-comment">// 4. è¿½åŠ æ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (req.getEntries() != <span class="hljs-literal">null</span> &amp;&amp; !req.getEntries().isEmpty()) {
            <span class="hljs-keyword">for</span> (LogEntry entry : req.getEntries()) {
                <span class="hljs-type">LogEntry</span> <span class="hljs-variable">existing</span> <span class="hljs-operator">=</span> logStorage.getEntry(entry.getIndex());
                
                <span class="hljs-keyword">if</span> (existing == <span class="hljs-literal">null</span>) {
                    <span class="hljs-comment">// æ–°æ—¥å¿—ï¼Œç›´æ¥è¿½åŠ </span>
                    logStorage.append(entry);
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (existing.getTerm() != entry.getTerm()) {
                    <span class="hljs-comment">// å†²çªï¼Œåˆ æ‰æ—§çš„ï¼Œè¿½åŠ æ–°çš„</span>
                    logStorage.truncateFrom(entry.getIndex());
                    logStorage.append(entry);
                }
                <span class="hljs-comment">// å¦‚æœtermç›¸åŒï¼Œè¯´æ˜æ˜¯é‡å¤çš„ï¼Œè·³è¿‡</span>
            }
        }
        
        <span class="hljs-comment">// 5. æ›´æ–°commitIndex</span>
        <span class="hljs-keyword">if</span> (req.getLeaderCommit() &gt; commitIndex) {
            commitIndex = Math.min(req.getLeaderCommit(), logStorage.getLastIndex());
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesResponse</span>(currentTerm, <span class="hljs-literal">true</span>);
        
    } <span class="hljs-keyword">finally</span> {
        lock.unlock();
    }
}
</code></pre>
<p>æ•´ä¸ªæµç¨‹å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>













































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>æ¡ä»¶</th><th>å¤„ç†</th></tr></thead><tbody><tr><td>termæ£€æŸ¥</td><td>term &lt; currentTerm</td><td>æ‹’ç»ï¼Œè¿”å›false</td></tr><tr><td>termæ£€æŸ¥</td><td>term &gt;= currentTerm</td><td>è½¬ä¸ºFollowerï¼Œç»§ç»­</td></tr><tr><td>ä¸€è‡´æ€§æ£€æŸ¥</td><td>prevLogIndex = 0</td><td>è·³è¿‡ï¼Œç›´æ¥è¿½åŠ </td></tr><tr><td>ä¸€è‡´æ€§æ£€æŸ¥</td><td>æœ¬åœ°æ— prevLogIndex</td><td>æ‹’ç»ï¼Œæ—¥å¿—è½å</td></tr><tr><td>ä¸€è‡´æ€§æ£€æŸ¥</td><td>termä¸åŒ¹é…</td><td>åˆ é™¤å†²çªæ—¥å¿—ï¼Œæ‹’ç»</td></tr><tr><td>ä¸€è‡´æ€§æ£€æŸ¥</td><td>termåŒ¹é…</td><td>è¿½åŠ æ–°æ—¥å¿—</td></tr><tr><td>æäº¤</td><td>leaderCommit &gt; commitIndex</td><td>æ›´æ–°commitIndex</td></tr></tbody></table>
<p>è¿™é‡Œæœ‰å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹ï¼š</p>
<p><strong>prevLogIndex=0çš„æƒ…å†µ</strong>ï¼šè¿™è¡¨ç¤ºè¦è¿½åŠ çš„æ˜¯ç¬¬ä¸€æ¡æ—¥å¿—ï¼Œæ²¡æœ‰"å‰ä¸€æ¡"ï¼Œç›´æ¥è·³è¿‡ä¸€è‡´æ€§æ£€æŸ¥ã€‚</p>
<p><strong>å†²çªæ—¶è¦truncate</strong>ï¼šå‘ç°termä¸åŒ¹é…ï¼Œå¿…é¡»åˆ æ‰é‚£æ¡æ—¥å¿—åŠä¹‹åçš„æ‰€æœ‰æ—¥å¿—ã€‚å› ä¸ºåé¢çš„æ—¥å¿—å¯èƒ½éƒ½æ˜¯åŸºäºé‚£æ¡é”™è¯¯çš„æ—¥å¿—è¿½åŠ çš„ã€‚</p>
<p><strong>é‡å¤æ—¥å¿—è¦è·³è¿‡</strong>ï¼šå¦‚æœæœ¬åœ°å·²ç»æœ‰ç›¸åŒindexå’Œtermçš„æ—¥å¿—ï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼Œä¸ç”¨å¤„ç†ã€‚</p>
<h2 data-id="heading-5">Leaderç«¯çš„é€»è¾‘</h2>
<p>Leaderéœ€è¦ç»´æŠ¤æ¯ä¸ªFollowerçš„å¤åˆ¶è¿›åº¦ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æˆä¸ºLeaderæ—¶åˆå§‹åŒ–</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">becomeLeader</span><span class="hljs-params">()</span> {
    state = LEADER;
    leaderId = nodeId;
    
    <span class="hljs-type">long</span> <span class="hljs-variable">lastLogIndex</span> <span class="hljs-operator">=</span> logStorage.getLastIndex();
    <span class="hljs-keyword">for</span> (String peer : peers) {
        <span class="hljs-comment">// nextIndexï¼šä¸‹ä¸€æ¡è¦å‘é€çš„æ—¥å¿—ç´¢å¼•</span>
        nextIndex.put(peer, lastLogIndex + <span class="hljs-number">1</span>);
        <span class="hljs-comment">// matchIndexï¼šå·²ç¡®è®¤å¤åˆ¶æˆåŠŸçš„æœ€é«˜ç´¢å¼•</span>
        matchIndex.put(peer, <span class="hljs-number">0</span>);
    }
}
</code></pre>
<p>nextIndexåˆå§‹åŒ–ä¸ºLeaderæœ€åä¸€æ¡æ—¥å¿—çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚è¿™æ˜¯ä¸€ä¸ªä¹è§‚çš„å‡è®¾â€”â€”å‡è®¾Followerçš„æ—¥å¿—å’ŒLeaderä¸€æ ·æ–°ã€‚å¦‚æœä¸æ˜¯ï¼Œåé¢ä¼šé€šè¿‡ä¸€è‡´æ€§æ£€æŸ¥é€æ­¥å›é€€ã€‚</p>
<p>å‘é€æ—¥å¿—çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendAppendEntries</span><span class="hljs-params">(String peer)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">nextIdx</span> <span class="hljs-operator">=</span> nextIndex.get(peer);
    <span class="hljs-type">long</span> <span class="hljs-variable">prevLogIndex</span> <span class="hljs-operator">=</span> nextIdx - <span class="hljs-number">1</span>;
    <span class="hljs-type">long</span> <span class="hljs-variable">prevLogTerm</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">if</span> (prevLogIndex &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-type">LogEntry</span> <span class="hljs-variable">prevLog</span> <span class="hljs-operator">=</span> logStorage.getEntry(prevLogIndex);
        <span class="hljs-keyword">if</span> (prevLog != <span class="hljs-literal">null</span>) {
            prevLogTerm = prevLog.getTerm();
        }
    }
    
    <span class="hljs-comment">// è·å–è¦å‘é€çš„æ—¥å¿—</span>
    List&lt;LogEntry&gt; entries = logStorage.getEntries(nextIdx, logStorage.getLastIndex());
    
    <span class="hljs-type">AppendEntriesRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppendEntriesRequest</span>(
        currentTerm, nodeId,
        prevLogIndex, prevLogTerm,
        entries, commitIndex
    );
    
    <span class="hljs-type">AppendEntriesResponse</span> <span class="hljs-variable">response</span> <span class="hljs-operator">=</span> rpcClient.appendEntries(peer, request);
    
    <span class="hljs-keyword">if</span> (response == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// ç½‘ç»œå¤±è´¥ï¼Œä¸‹æ¬¡é‡è¯•</span>
    
    <span class="hljs-keyword">if</span> (response.getTerm() &gt; currentTerm) {
        becomeFollower(response.getTerm());  <span class="hljs-comment">// å‘ç°æ›´é«˜termï¼Œé™çº§</span>
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (response.isSuccess()) {
        <span class="hljs-comment">// æˆåŠŸï¼Œæ›´æ–°è¿›åº¦</span>
        <span class="hljs-keyword">if</span> (!entries.isEmpty()) {
            <span class="hljs-type">long</span> <span class="hljs-variable">lastNewIndex</span> <span class="hljs-operator">=</span> entries.get(entries.size() - <span class="hljs-number">1</span>).getIndex();
            nextIndex.put(peer, lastNewIndex + <span class="hljs-number">1</span>);
            matchIndex.put(peer, lastNewIndex);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤±è´¥ï¼Œå›é€€é‡è¯•</span>
        nextIndex.put(peer, Math.max(<span class="hljs-number">1</span>, nextIdx - <span class="hljs-number">1</span>));
    }
}
</code></pre>
<p>è¿™é‡Œçš„å›é€€ç­–ç•¥æ¯”è¾ƒç®€å•ï¼Œæ¯æ¬¡å¤±è´¥å°±å¾€å›é€€ä¸€æ ¼ã€‚å®é™…ä¸Šå¯ä»¥åˆ©ç”¨conflictIndexå’ŒconflictTermæ¥å¿«é€Ÿå›é€€ï¼Œä½†è¿™ä¸€ç‰ˆå…ˆç”¨ç®€å•çš„æ–¹å¼ã€‚</p>
<h2 data-id="heading-6">è·‘èµ·æ¥çœ‹çœ‹</h2>
<p>ä»£ç å†™å®Œäº†ï¼Œè·‘ä¸ªæµ‹è¯•éªŒè¯ä¸€ä¸‹ã€‚</p>
<p>å¯åŠ¨3èŠ‚ç‚¹é›†ç¾¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">./start-cluster.sh
</code></pre>
<p>æŸ¥çœ‹çŠ¶æ€ï¼Œæ‰¾åˆ°Leaderï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl http://localhost:8081/raft/status
{<span class="hljs-string">"currentTerm"</span>:9,<span class="hljs-string">"state"</span>:<span class="hljs-string">"LEADER"</span>,<span class="hljs-string">"nodeId"</span>:<span class="hljs-string">"node-1"</span>,<span class="hljs-string">"lastLogIndex"</span>:0}

$ curl http://localhost:8082/raft/status
{<span class="hljs-string">"currentTerm"</span>:9,<span class="hljs-string">"state"</span>:<span class="hljs-string">"FOLLOWER"</span>,<span class="hljs-string">"nodeId"</span>:<span class="hljs-string">"node-2"</span>,<span class="hljs-string">"lastLogIndex"</span>:0}

$ curl http://localhost:8083/raft/status
{<span class="hljs-string">"currentTerm"</span>:9,<span class="hljs-string">"state"</span>:<span class="hljs-string">"FOLLOWER"</span>,<span class="hljs-string">"nodeId"</span>:<span class="hljs-string">"node-3"</span>,<span class="hljs-string">"lastLogIndex"</span>:0}
</code></pre>
<p>node-1æ˜¯Leaderï¼Œterm=9ï¼Œç›®å‰æ²¡æœ‰æ—¥å¿—ï¼ˆlastLogIndex=0ï¼‰ã€‚</p>
<p>å‘Leaderå‘é€ä¸€æ¡æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl -X POST http://localhost:8081/raft/append \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "term": 9,
    "leaderId": "node-1",
    "prevLogIndex": 0,
    "prevLogTerm": 0,
    "entries": [{"index": 1, "term": 9, "command": "aGVsbG8tcmFmdA=="}],
    "leaderCommit": 0
  }'</span>

{<span class="hljs-string">"term"</span>:9,<span class="hljs-string">"success"</span>:<span class="hljs-literal">true</span>,<span class="hljs-string">"conflictIndex"</span>:0,<span class="hljs-string">"conflictTerm"</span>:0}
</code></pre>
<p>æˆåŠŸäº†ï¼å†æŸ¥ä¸€ä¸‹Leaderçš„çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">$ curl http://localhost:8081/raft/status
{<span class="hljs-string">"currentTerm"</span>:9,<span class="hljs-string">"state"</span>:<span class="hljs-string">"LEADER"</span>,<span class="hljs-string">"nodeId"</span>:<span class="hljs-string">"node-1"</span>,<span class="hljs-string">"lastLogIndex"</span>:1}
</code></pre>
<p>lastLogIndexå˜æˆ1äº†ï¼Œè¯´æ˜æ—¥å¿—å·²ç»è¿½åŠ æˆåŠŸã€‚</p>
<p>æ•´ä¸ªæµ‹è¯•æµç¨‹çš„æ—¶åºï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant Client as æµ‹è¯•è„šæœ¬
    participant N1 as node-1&lt;br/&gt;(Leader)
    participant N2 as node-2&lt;br/&gt;(Follower)
    participant N3 as node-3&lt;br/&gt;(Follower)
    
    Note over Client,N3: 1. æŸ¥è¯¢çŠ¶æ€ï¼Œè¯†åˆ«Leader
    Client-&gt;&gt;N1: GET /raft/status
    N1--&gt;&gt;Client: state=LEADER, term=9
    
    Note over Client,N3: 2. å‘Leaderå‘é€æ—¥å¿—
    Client-&gt;&gt;N1: POST /raft/append&lt;br/&gt;entries=[index=1, term=9]
    Note over N1: ä¸€è‡´æ€§æ£€æŸ¥é€šè¿‡&lt;br/&gt;prevLogIndex=0
    Note over N1: è¿½åŠ æ—¥å¿—&lt;br/&gt;lastLogIndex: 0â†’1
    N1--&gt;&gt;Client: success=true
    
    Note over Client,N3: 3. Leaderé€šè¿‡å¿ƒè·³å¤åˆ¶ç»™Follower
    loop æ¯50ms
        N1-&gt;&gt;N2: AppendEntries(å¿ƒè·³)
        N2--&gt;&gt;N1: success=true
        N1-&gt;&gt;N3: AppendEntries(å¿ƒè·³)
        N3--&gt;&gt;N1: success=true
    end
    
    Note over Client,N3: 4. éªŒè¯å„èŠ‚ç‚¹çŠ¶æ€
    Client-&gt;&gt;N1: GET /raft/status
    N1--&gt;&gt;Client: lastLogIndex=1
</code></pre>
<h2 data-id="heading-7">è¿™ä¸€ç‰ˆè¿˜ç¼ºä»€ä¹ˆ</h2>
<p>è¯´å®è¯ï¼Œè¿™åªæ˜¯æ—¥å¿—å¤åˆ¶çš„ä¸€åŠã€‚æˆ‘ä»¬å®ç°äº†ï¼š</p>
<ul>
<li>æ—¥å¿—ç»“æ„å’Œå­˜å‚¨</li>
<li>ä¸€è‡´æ€§æ£€æŸ¥æœºåˆ¶</li>
<li>Followeræ¥æ”¶å’Œè¿½åŠ æ—¥å¿—</li>
<li>Leaderç»´æŠ¤å¤åˆ¶è¿›åº¦</li>
</ul>
<p>ä½†è¿˜ç¼ºå‡ ä¸ªå…³é”®çš„ä¸œè¥¿ï¼š</p>
<p><strong>è¿‡åŠæäº¤</strong>ï¼šLeaderè¿½åŠ æ—¥å¿—åï¼Œè¦ç­‰å¤šæ•°èŠ‚ç‚¹ç¡®è®¤æ‰èƒ½æäº¤ã€‚ç°åœ¨æˆ‘ä»¬åªæ˜¯è¿½åŠ äº†ï¼Œä½†æ²¡æœ‰çœŸæ­£"æäº¤"ã€‚</p>
<p><strong>çŠ¶æ€æœºåº”ç”¨</strong>ï¼šæ—¥å¿—æäº¤åè¦åº”ç”¨åˆ°çŠ¶æ€æœºã€‚ç°åœ¨æ—¥å¿—åªæ˜¯å­˜ç€ï¼Œæ²¡æœ‰æ‰§è¡Œã€‚</p>
<p><strong>è‡ªåŠ¨å¤åˆ¶</strong>ï¼šç°åœ¨æ˜¯æ‰‹åŠ¨é€šè¿‡curlå‘æ—¥å¿—ï¼Œå®é™…åº”è¯¥æ˜¯Leaderæ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åè‡ªåŠ¨å¤åˆ¶ç»™Followerã€‚</p>
<p>è¿™äº›ç•™åˆ°ä¸‹ä¸€ç¯‡ã€‚</p>
<h2 data-id="heading-8">å‡ ä¸ªè¦æ³¨æ„çš„åœ°æ–¹</h2>
<p>å†™è¿™å—ä»£ç çš„æ—¶å€™è¸©äº†å‡ ä¸ªå‘ï¼Œè®°å½•ä¸€ä¸‹ï¼š</p>
<p><strong>1. prevLogIndex=0ä¸èƒ½æŸ¥æ—¥å¿—</strong></p>
<p>ä¸€å¼€å§‹æˆ‘å†™çš„æ˜¯ç›´æ¥æŸ¥logStorage.getEntry(prevLogIndex)ï¼Œç»“æœprevLogIndex=0æ—¶è¿”å›nullï¼Œç„¶åå°±æ‹’ç»äº†ã€‚å…¶å®prevLogIndex=0è¡¨ç¤ºæ²¡æœ‰å‰ç½®æ—¥å¿—ï¼Œåº”è¯¥ç›´æ¥è·³è¿‡æ£€æŸ¥ã€‚</p>
<p><strong>2. truncateè¦ä»å†²çªä½ç½®å¼€å§‹</strong></p>
<p>å‘ç°termä¸åŒ¹é…æ—¶ï¼Œè¦æŠŠå†²çªä½ç½®åŠä¹‹åçš„æ—¥å¿—å…¨åˆ æ‰ã€‚æˆ‘ä¸€å¼€å§‹åªåˆ äº†å†²çªé‚£ä¸€æ¡ï¼Œåé¢çš„æ—¥å¿—è¿˜åœ¨ï¼Œç»“æœè¶Šæè¶Šä¹±ã€‚</p>
<p><strong>3. é‡å¤æ—¥å¿—ä¸è¦é‡å¤è¿½åŠ </strong></p>
<p>å¦‚æœæ”¶åˆ°çš„æ—¥å¿—indexå’Œterméƒ½å’Œæœ¬åœ°ä¸€æ ·ï¼Œè¯´æ˜æ˜¯é‡å¤è¯·æ±‚ï¼ˆç½‘ç»œé‡ä¼ ä¹‹ç±»çš„ï¼‰ï¼Œç›´æ¥è·³è¿‡ã€‚æˆ‘ä¸€å¼€å§‹æ¯æ¬¡éƒ½è¿½åŠ ï¼Œç»“æœæ—¥å¿—è¶Šæ¥è¶Šå¤šã€‚</p>
<p><strong>4. nextIndexåˆå§‹åŒ–å¾ˆé‡è¦</strong></p>
<p>Leaderåˆšå½“é€‰æ—¶ï¼Œä¸çŸ¥é“Followerçš„æ—¥å¿—è¿›åº¦ï¼Œåªèƒ½ä¹è§‚åœ°å‡è®¾å’Œè‡ªå·±ä¸€æ ·ã€‚ç„¶åé€šè¿‡ä¸€è‡´æ€§æ£€æŸ¥é€æ­¥ä¿®æ­£ã€‚è¿™ä¸ªè®¾è®¡æŒºå·§å¦™çš„ã€‚</p>
<hr/>
<p>å¦‚æœä½ ä¹Ÿåœ¨å­¦ä¹ Raftï¼Œæˆ–è€…å¯¹æ—¥å¿—å¤åˆ¶æœ‰ä»€ä¹ˆç–‘é—®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµã€‚æœ‰é—®é¢˜ä¹Ÿå¯ä»¥ç›´æ¥ç•™è¨€ï¼Œçœ‹åˆ°ä¼šå›å¤ã€‚</p>
<p>ä¸‹ä¸€ç¯‡æˆ‘ä»¬å®ç°è¿‡åŠæäº¤å’ŒçŠ¶æ€æœºï¼Œé‚£æ—¶å€™æ‰ç®—çœŸæ­£ç†è§£äº†Raftçš„æ ¸å¿ƒã€‚</p>
<p>ä»£ç å·²å¼€æºï¼Œæ¬¢è¿Starï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fsh_wangwanbao%2Fsimple-raft" target="_blank" title="https://gitee.com/sh_wangwanbao/simple-raft" ref="nofollow noopener noreferrer">gitee.com/sh_wangwanbâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€è¸©å‘ã€‘gorm å›å†™ä¸»é”®ä¸æ­£ç¡®]]></title>    <link>https://juejin.cn/post/7575083657993912347</link>    <guid>https://juejin.cn/post/7575083657993912347</guid>    <pubDate>2025-11-22T12:48:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657993912347" data-draft-id="7575031395862954030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€è¸©å‘ã€‘gorm å›å†™ä¸»é”®ä¸æ­£ç¡®"/> <meta itemprop="keywords" content="MySQL,ORM,Go"/> <meta itemprop="datePublished" content="2025-11-22T12:48:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anthony_4926"/> <meta itemprop="url" content="https://juejin.cn/user/2177488351659991"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€è¸©å‘ã€‘gorm å›å†™ä¸»é”®ä¸æ­£ç¡®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2177488351659991/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anthony_4926
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T12:48:29.000Z" title="Sat Nov 22 2025 12:48:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>è¯­é›€UIæ›´èˆ’æœï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fanthonyzhao%2Fhkw51g%2Fsspl0ms8glcr8rr0%3FsingleDoc%23" target="_blank" title="https://www.yuque.com/anthonyzhao/hkw51g/sspl0ms8glcr8rr0?singleDoc#" ref="nofollow noopener noreferrer">www.yuque.com/anthonyzhaoâ€¦</a></p>
</blockquote>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad6d43d1143a49b0891fbf7c2e8b1555~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=0kkGaPdXm2DsQ9zhu3WrYh6qt7o%3D" alt="yuque_diagram (1).jpg" width="100%" loading="lazy"/>
<h2 data-id="heading-0">å‰ç½®çŸ¥è¯†</h2>
<p>GORM å®˜æ–¹æ–‡æ¡£ä¸­è¯´ï¼Œå½“é€šè¿‡æ•°æ®çš„æŒ‡é’ˆæ¥åˆ›å»ºæ•°æ®æ—¶ï¼Œä¼šå›å†™æ’å…¥æ•°æ®çš„ä¸»é”®ã€‚å³ä¾¿æ˜¯æ‰¹é‡æ’å…¥ï¼ŒGORM ä¹Ÿä¼šè¿”å›æ‰€æœ‰ä¸»é”®å€¼ã€‚
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgorm.io%2Fzh_CN%2Fdocs%2Fcreate.html%23Traditional-API" target="_blank" title="https://gorm.io/zh_CN/docs/create.html#Traditional-API" ref="nofollow noopener noreferrer">GORM åˆ›å»º</a></p>
<h2 data-id="heading-1">ç›¸å…³éªŒè¯</h2>
<p>ä½†æ˜¯æ–‡æ¡£ä¸­å¹¶æ²¡æœ‰è¯´<strong>æ’å…¥å†²çªåˆ™æ‰§è¡Œæ›´æ–°</strong>æ“ä½œä¼šä¸ä¼šå›å†™ä¸»é”®ï¼Œæˆ‘ä»¬å…ˆéªŒè¯ä¸€ä¸‹ã€‚</p>
<p>æ•°æ®åº“ä¸­ç°æœ‰è®°å½•æƒ…å†µå¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8f01b534b3f4f0f918b65e9d41f85e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=FR6HMWDYlPSLfDuoMS6y9mrmHUs%3D" alt="" loading="lazy"/></p>
<p>æ‰§è¡Œæ‰¹é‡æ’å…¥æ›´æ–°æ“ä½œ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorm1 := &amp;TestGorm{
		UK: <span class="hljs-string">"uk1"</span>,
	}
	testGorm2 := &amp;TestGorm{
		UK: <span class="hljs-string">"uk2"</span>,
	}
	err := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{testGorm1, testGorm2}, <span class="hljs-number">1</span>).Error
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(<span class="hljs-string">"failed to create test_gorm"</span>)
	}
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm1)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm2)
}

</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">1763774066</span> UpdatedAt:<span class="hljs-number">1763774066</span>}
&amp;{ID:<span class="hljs-number">2</span> UK:uk1 CreatedAt:<span class="hljs-number">1763774066</span> UpdatedAt:<span class="hljs-number">1763774066</span>}
</code></pre>
<p>é€šè¿‡è¾“å‡ºå‘ç°ï¼Œæ‰¹é‡æ’å…¥æ›´æ–°ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸å›æ˜¾ä¸»é”®çš„ã€‚</p>
<p>è‡³æ­¤ï¼Œéƒ½æ˜¯ç¬¦åˆé¢„æœŸçš„ã€‚</p>
<h2 data-id="heading-2">ä¸»é”®å›æ˜¾å¼‚å¸¸æƒ…å†µ</h2>
<p>å½“æ‰¹é‡ä¼ å…¥çš„æ•°æ®æœ‰ç›¸åŒå”¯ä¸€é”®æ—¶ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªå¯¹è±¡èƒ½å¤Ÿæ­£å¸¸å›å†™ä¸»é”®ï¼Œåç»­ä¸»é”®å‡å›å†™é”™è¯¯ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorm1 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">1</span>}
	testGorm2 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">1</span>}
	testGorm3 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">1</span>}
	err := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{testGorm1, testGorm2, testGorm3}, <span class="hljs-number">1</span>).Error
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(<span class="hljs-string">"failed to create test_gorm"</span>)
	}
	fmt.Println(testGorm1)
	fmt.Println(testGorm2)
	fmt.Println(testGorm3)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">1</span>}
&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">1</span>}
&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">1</span>}
</code></pre>
<h2 data-id="heading-3">æ¢ç´¢</h2>
<p>ã€çŒœæµ‹ã€‘ï¼šåè¾¹çš„IDéƒ½ä¸å¯¹ï¼Œæœ‰æ²¡æœ‰å¯èƒ½æ˜¯æ•°æ®åº“ä¸­ç°åœ¨è¿™æ¡è®°å½•çš„IDå°±æ˜¯0äº†å‘¢ï¼Ÿè¿˜æŠ±ç€ä¸€ä¸å›æ˜¾æ­£ç¡®çš„å¸Œæœ›ï¼ŒæŸ¥ä¸€ä¸‹çœ‹çœ‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf83baff812c4496973f018102f5b8c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=sTdF105VavMVaMeS6T9SbAaxhGM%3D" alt="" loading="lazy"/></p>
<p>å®Œè›‹ğŸ™„ï¼Œå’‹å¯èƒ½ä¸»é”®ä¼šæ›´æ–°å‘¢ã€‚</p>
<p>ã€çŒœæµ‹ã€‘ï¼šé‚£æ”¹ä¸‹æ›´æ–°çš„è®°å½•å€¼å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorm1 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">2</span>}
	testGorm2 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">2</span>}
	testGorm3 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">3</span>}
	err := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{testGorm1, testGorm2, testGorm3}, <span class="hljs-number">1</span>).Error
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(<span class="hljs-string">"failed to create test_gorm"</span>)
	}
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm1)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm2)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm3)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">2</span>}
&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">2</span>}
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">3</span>}
</code></pre>
<p>æ¡ğŸŒ¿ï¼Œç¬¬1ï¼Œ2æ¡å’‹ä¸»é”®åˆä¸å¯¹äº†å‘¢ï¼Ÿ2,3 å¯ä»¥æ¡å’‹åˆå¯ä»¥æ­£å¸¸å›æ˜¾äº†å‘¢ã€‚</p>
<p>ã€çŒœæµ‹ã€‘ï¼šéš¾é“æ˜¯GORMå‘ç°å¾…ä¿å­˜çš„æ•°æ®å­˜åœ¨å®Œå…¨ç›¸åŒçš„ï¼Œæ¡†æ¶ç»™å»é‡äº†ï¼Ÿ</p>
<p>é‚£æˆ‘å°±åªæ›´æ–°ä¸€æ¡</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	<span class="hljs-comment">// testGorm1 := &amp;TestGorm{UK: "uk1", UpdatedAt: 1}</span>
	<span class="hljs-comment">// testGorm2 := &amp;TestGorm{UK: "uk1", UpdatedAt: 2}</span>
	testGorm3 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">3</span>}
	err := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{testGorm3}, <span class="hljs-number">1</span>).Error
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(<span class="hljs-string">"failed to create test_gorm"</span>)
	}
	<span class="hljs-comment">// fmt.Printf("%+v\n", testGorm1)</span>
	<span class="hljs-comment">// fmt.Printf("%+v\n", testGorm2)</span>
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm3)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">3</span>}
</code></pre>
<p>åˆä¸€æ¬¡æˆ‘ğŸŒ¿ï¼Œæ›´æ–°ä¸€æ¡ä¹Ÿä¸èƒ½å›æ˜¾äº†</p>
<p>çŒ›ç„¶å‘ç°ï¼Œè¿™æ¡æ•°æ®ä¸æ•°æ®åº“ä¸­çš„è®°å½•å€¼å®Œå…¨ä¸€æ ·è¯¶ğŸ«¤ã€‚</p>
<p>ã€çŒœæµ‹ã€‘æ˜¯ä¸æ˜¯æ²¡æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œç„¶åå°±æ²¡å›æ˜¾å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorm1 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">1</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm2 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">2</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm3 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">2</span>}
	testGorm4 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">3</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm5 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">3</span>}
	testGorm6 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">4</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm7 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">5</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm8 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">6</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>
	testGorm9 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">7</span>} <span class="hljs-comment">// æœ‰å˜æ›´</span>

	err := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{
			testGorm1, testGorm2, testGorm3, 
			testGorm4, testGorm5, testGorm6, 
			testGorm7, testGorm8, testGorm9,
		}, <span class="hljs-number">1</span>).Error
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		<span class="hljs-built_in">panic</span>(<span class="hljs-string">"failed to create test_gorm"</span>)
	}
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm1)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm2)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm3)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm4)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm5)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm6)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm7)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm8)
	fmt.Printf(<span class="hljs-string">"%+v\n"</span>, testGorm9)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">1</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">2</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">2</span>} <span class="hljs-comment">// ã€æœªå˜æ›´ï¼Œå›æ˜¾é”™è¯¯ã€‘</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">3</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">0</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">3</span>} <span class="hljs-comment">// ã€æœªå˜æ›´ï¼Œå›æ˜¾é”™è¯¯ã€‘</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">4</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">5</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">6</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">7</span>} <span class="hljs-comment">// æœ‰å˜æ›´ï¼Œå›æ˜¾æ­£ç¡®</span>
</code></pre>
<h2 data-id="heading-4">é”™è¯¯ç»“è®º</h2>
<p>ä»ä¸Šè¾¹çš„æ¢ç©¶è¿‡ç¨‹ä¼¼ä¹å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼Œä½†æ˜¯è¿™ä¸ªç»“è®ºæ˜¯é”™è¯¯çš„</p>
<p><strong>åªæœ‰å¾…å†™å…¥æ•°æ®ä¸æ•°æ®åº“ä¸­çš„æ•°æ®æœ‰å·®å¼‚æ—¶ï¼Œä¸»é”®æ‰èƒ½æ­£å¸¸å›æ˜¾</strong></p>
<p>æˆ‘ä»¬ç»§ç»­å‘ä¸‹åˆ†æ</p>
<h2 data-id="heading-5">æ·±ç©¶</h2>
<p>é‚£æˆ‘ç°åœ¨å°±æœ‰å‡ ä¸ªé—®é¢˜äº†ï¼š</p>
<ol>
<li>å¦‚æœå¾…è®°å½•ä¸æ•°æ®åº“å®Œå…¨ç›¸åŒï¼Œé‚£ç©¶ç«Ÿæœ‰æ²¡æœ‰æ‰§è¡Œå†™æ•°æ®åº“æ“ä½œå‘¢ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæœ‰æ—¶å€™å›æ˜¾ï¼Ÿæœ‰æ—¶å€™ä¸å›æ˜¾ï¼Ÿ</li>
<li>æ­£å¸¸å›æ˜¾æ˜¯æ€ä¹ˆå®ç°å›æ˜¾çš„ï¼Ÿ</li>
</ol>
<h3 data-id="heading-6">å¦‚æœå¾…è®°å½•ä¸æ•°æ®åº“å®Œå…¨ç›¸åŒï¼Œé‚£ç©¶ç«Ÿæœ‰æ²¡æœ‰æ‰§è¡Œå†™æ•°æ®åº“æ“ä½œå‘¢ï¼Ÿ</h3>
<p>æˆ‘ä»¬å…ˆå°†æ•°æ®åº“è®°å½•å€¼è®¾ç½®ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f16a4d819b534a318614fb2eb11cf6c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=dpGKFg9nwb0DTZU1wxAABsz0uUs%3D" alt="" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ’å…¥ä¸€æ¡å®Œå…¨ç›¸åŒçš„æ•°æ®ï¼Œçœ‹ä¸‹å½±å“çš„è¡Œæ•°å°±èƒ½å¤ŸçŸ¥é“æ˜¯å¦æœ‰æ›´æ–°äº†</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorm1 := &amp;TestGorm{UK: <span class="hljs-string">"uk1"</span>, UpdatedAt: <span class="hljs-number">1</span>} 
	
	res := db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches([]*TestGorm{testGorm1,}, <span class="hljs-number">1</span>)
	fmt.Printf(<span class="hljs-string">"å½±å“çš„è¡Œæ•°: %+v\n"</span>, res.RowsAffected)
}
</code></pre>
<pre><code class="hljs language-go" lang="go">å½±å“çš„è¡Œæ•°: <span class="hljs-number">0</span>
</code></pre>
<p>æ‰€ä»¥ç»“è®ºæ˜¯: å¦‚æœå¾…è®°å½•ä¸æ•°æ®åº“å®Œå…¨ç›¸åŒï¼Œæ•°æ®åº“ä¸ä¼šæ‰§è¡Œæ›´æ–°æ“ä½œ</p>
<p>é¡ºæ‰‹çœ‹äº†ä¸€ä¸‹ï¼Œæ›´æ–°æ“ä½œä¼šå½±å“çš„è¡Œæ•°ï¼ŒæƒŠå‘†äº†ï¼Œè€é“ğŸ˜¦</p>
<pre><code class="hljs language-go" lang="go">å½±å“çš„è¡Œæ•°: <span class="hljs-number">2</span>
</code></pre>
<p>å„ç§æŸ¥æ‰¾åŸå› ï¼Œåœ¨MYSQLå®˜æ–¹æ–‡æ¡£ä¸­æ‰¾äº†ä¸€äº›çº¿ç´¢</p>
<blockquote>
<p>With <code>ON DUPLICATE KEY UPDATE</code>, the affected-rows value per row is 1 if the row is inserted as a new row, 2 if an existing row is updated, and 0 if an existing row is set to its current values. </p>
</blockquote>
<p>åœ¨ä½¿ç”¨ON DUPLICATE KEY UPDATEï¼ˆé‡å¤é”®æ›´æ–°ï¼‰æ—¶ï¼Œæ¯è¡Œå¯¹åº”çš„ â€œå—å½±å“è¡Œæ•°â€ï¼ˆaffected-rowsï¼‰å€¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>è‹¥è¯¥è¡Œä½œä¸ºæ–°è¡Œè¢«æ’å…¥ï¼Œè¯¥å€¼ä¸º 1ï¼›</li>
<li>è‹¥å·²æœ‰è¡Œè¢«æ›´æ–°ï¼Œè¯¥å€¼ä¸º 2ï¼›</li>
<li>è‹¥å·²æœ‰è¡Œè¢«è®¾ç½®ä¸ºå…¶å½“å‰å€¼ï¼ˆå³æœªå‘ç”Ÿå®é™…æ•°æ®å˜æ›´ï¼‰ï¼Œè¯¥å€¼ä¸º 0ã€‚</li>
</ul>
<h3 data-id="heading-7">ä¸ºä»€ä¹ˆæœ‰æ—¶å€™å›æ˜¾ä¸»é”®ï¼Œæœ‰æ—¶å€™ä¸å›æ˜¾ä¸»é”®ï¼Ÿ</h3>
<p>ç­”æ¡ˆå½“ç„¶æ˜¯åœ¨æºç ä¸­äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgo-gorm%2Fgorm%2Fblob%2Fe98dccce2fbbf5b860007f2b1f868a678c4fccb0%2Fcallbacks%2Fcreate.go%23L123" target="_blank" title="https://github.com/go-gorm/gorm/blob/e98dccce2fbbf5b860007f2b1f868a678c4fccb0/callbacks/create.go#L123" ref="nofollow noopener noreferrer">callbacks/create.go:123</a>ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e619a90ad241422db248c6cef19cb5b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=HJC7vLXcxQG%2Bch%2BYLvsCeVNHKqc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">æ­£å¸¸å›æ˜¾æ˜¯æ€ä¹ˆå®ç°å›æ˜¾çš„ï¼Ÿ</h3>
<p>é‚£å°±è¦çœ‹ä¸‹æºç è®¾ç½®å›æ˜¾ä¸»é”®çš„å…·ä½“é€»è¾‘ï¼Œ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">callbacks/create.go:200</a></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca82d2a70464376a4836d0720af6741~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW50aG9ueV80OTI2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764420508&amp;x-signature=kWzSqmSC2vmnE%2F5w7RoL%2FazImd4%3D" alt="" loading="lazy"/></p>
<p>åˆä¸€æ¬¡æ— è¯­äº†ï¼Œé‚£å²‚ä¸æ˜¯åªæœ‰ç¬¬ä¸€æ¡æ˜¯å¯¹çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯é”™çš„äº†.........</p>
<p>è¿˜è®°å¾—ä¸Šè¾¹çš„<a href="#u57210b9b" title="#u57210b9b">é”™è¯¯ç»“è®º</a>ä¹ˆï¼Ÿä¸Šè¿°å®éªŒçš„batchsizeéƒ½æ˜¯1ï¼ŒæŒ‰ç…§æºç æ¥çœ‹ï¼ŒåŒä¸€æ‰¹æ¬¡å†…ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªè®°å½•çš„ä¸»é”®å›æ˜¾æ˜¯æ­£ç¡®çš„ï¼Œå…¶ä½™è®°å½•å“ªæ€•æ˜¯ä¸æ•°æ®åº“ä¸­çš„è®°å½•æœ‰å·®å¼‚ï¼Œä¹Ÿä¸ä¼šæ­£ç¡®å›æ˜¾ã€‚å› ä¸ºï¼Œå…¶ä½™è®°å½•æ˜¯åœ¨GORMåœ¨å†…å­˜ä¸­è‡ªå·±æ ¹æ®æ•°æ®åº“è‡ªå¢æ­¥é•¿**ç§è‡ª**è®¾ç½®çš„ã€‚éªŒè¯ä¸‹</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	db := NewDB()
	testGorms := <span class="hljs-built_in">make</span>([]*TestGorm, <span class="hljs-number">0</span>)
	<span class="hljs-keyword">for</span> i := <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">10</span>; i++ {
		testGorms = <span class="hljs-built_in">append</span>(testGorms, &amp;TestGorm{
			UK:        <span class="hljs-string">"uk1"</span>,
			UpdatedAt: i,
		})
	}

	_ = db.Clauses(clause.OnConflict{UpdateAll: <span class="hljs-literal">true</span>}).
		CreateInBatches(testGorms, <span class="hljs-number">5</span>)
	<span class="hljs-keyword">for</span> _, t := <span class="hljs-keyword">range</span> testGorms {
		fmt.Printf(<span class="hljs-string">"%+v\n"</span>, t)
	}
}
</code></pre>
<pre><code class="hljs language-go" lang="go">&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">1</span>}
&amp;{ID:<span class="hljs-number">2</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">2</span>}
&amp;{ID:<span class="hljs-number">3</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">3</span>}
&amp;{ID:<span class="hljs-number">4</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">4</span>}
&amp;{ID:<span class="hljs-number">5</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">5</span>}

&amp;{ID:<span class="hljs-number">1</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">6</span>}
&amp;{ID:<span class="hljs-number">2</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">7</span>}
&amp;{ID:<span class="hljs-number">3</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">8</span>}
&amp;{ID:<span class="hljs-number">4</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">9</span>}
&amp;{ID:<span class="hljs-number">5</span> UK:uk1 CreatedAt:<span class="hljs-number">0</span> UpdatedAt:<span class="hljs-number">10</span>}
</code></pre>
<p>10ä¸ªè®°å½•åˆ†ä¸¤æ‰¹ï¼Œæ¯ä¸ªè®°å½•éƒ½ä¸åŒï¼Œçš„ç¡®æ˜¯åªæœ‰æ¯ä¸ªæ‰¹æ¬¡ç¬¬ä¸€ä¸ªè®°å½•ä¸»é”®æ˜¯æ­£ç¡®çš„ï¼Œå…¶ä½™çš„éƒ½æ˜¯è‡ªå¢çš„ã€‚</p>
<h2 data-id="heading-9">æ­£ç¡®ç»“è®º</h2>
<p>æ±‡æ€»ä¸€ä¸‹æ­£ç¡®ç»“è®º</p>
<p>å¦‚æœå¾…è®°å½•ä¸æ•°æ®åº“å®Œå…¨ç›¸åŒï¼Œæ•°æ®åº“ä¸ä¼šæ‰§è¡Œæ›´æ–°æ“ä½œ</p>
<p>åœ¨ä½¿ç”¨<code>ON DUPLICATE KEY UPDATE</code>ï¼ˆé‡å¤é”®æ›´æ–°ï¼‰æ—¶ï¼Œæ¯è¡Œå¯¹åº”çš„ â€œå—å½±å“è¡Œæ•°â€ï¼ˆaffected-rowsï¼‰å€¼éµå¾ªä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>è‹¥è¯¥è¡Œä½œä¸ºæ–°è¡Œè¢«æ’å…¥ï¼Œè¯¥å€¼ä¸º 1ï¼›</li>
<li>è‹¥å·²æœ‰è¡Œè¢«æ›´æ–°ï¼Œè¯¥å€¼ä¸º 2ï¼›</li>
<li>è‹¥å·²æœ‰è¡Œè¢«è®¾ç½®ä¸ºå…¶å½“å‰å€¼ï¼ˆå³æœªå‘ç”Ÿå®é™…æ•°æ®å˜æ›´ï¼‰ï¼Œè¯¥å€¼ä¸º 0ã€‚</li>
</ul>
<p><strong>GORM ä¸»é”®æ­£ç¡®å›æ˜¾æ¡ä»¶å¤ªè‹›åˆ»ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼ˆå‡ ä¹ä¸å¯ç”¨ï¼‰</strong></p>
<h2 data-id="heading-10">å¦‚ä½•æ‰èƒ½å›æ˜¾ä¸»é”®</h2>
<p>éœ€è¦æ‰¹é‡æ’å…¥æ›´æ–°ä¸”éœ€è¦å›æ˜¾ä¸»é”®çš„åœºæ™¯ï¼Œè‚¯å®šæ˜¯æœ‰ä¸€ä¸ªä¸šåŠ¡å”¯ä¸€é”®çš„ã€‚</p>
<p>é‚£ä¹ˆæœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹å¼å°±æ˜¯ï¼Œæ’å…¥åï¼Œç„¶åå†æ ¹æ®ä¸šåŠ¡å”¯ä¸€é”®æ‰¹é‡æŸ¥å‡ºã€‚</p>
<p>GORMè¿˜æ”¯æŒå¦å¤–ä¸€ç§æ–¹å¼ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgorm.io%2Fzh_CN%2Fdocs%2Fhooks.html" target="_blank" title="https://gorm.io/zh_CN/docs/hooks.html" ref="nofollow noopener noreferrer">Hook</a>ã€‚å¯ä»¥ä¿å­˜åæŸ¥å‡ºï¼Œç„¶åæ‰‹åŠ¨è®¾ç½®IDã€‚ä¸ä¸¥è°¨åœ°æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå°æ•°é‡æƒ…å†µä¸‹ï¼ˆ2Wå·¦å³ï¼‰äºŒè€…æ€§èƒ½ç›¸å·®ä¸æ˜¯å¾ˆå¤§ã€‚ä¸»è¦æ˜¯ï¼ŒHook å®ç°æ›´ä¼˜é›…ä¸€äº›ã€‚</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(t *TestGorm)</span></span> AfterSave(tx *gorm.DB) <span class="hljs-type">error</span> {
	<span class="hljs-keyword">var</span> id <span class="hljs-type">int</span>
	tx = tx.Table(t.TableName()).Where(<span class="hljs-string">"uk = ?"</span>, t.UK).
		Select(<span class="hljs-string">"id"</span>).Scan(&amp;id)
	<span class="hljs-keyword">if</span> tx.Error != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> tx.Error
	}
	t.ID = <span class="hljs-type">uint</span>(id)
	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot è‡ªåŠ¨é…ç½®æ ¸å¿ƒï¼šAutoConfigurationImportSelector æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7575065042158960690</link>    <guid>https://juejin.cn/post/7575065042158960690</guid>    <pubDate>2025-11-22T13:13:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575065042158960690" data-draft-id="7575102209605107738" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot è‡ªåŠ¨é…ç½®æ ¸å¿ƒï¼šAutoConfigurationImportSelector æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯,Java,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2025-11-22T13:13:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moe488"/> <meta itemprop="url" content="https://juejin.cn/user/1863002275971387"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot è‡ªåŠ¨é…ç½®æ ¸å¿ƒï¼šAutoConfigurationImportSelector æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1863002275971387/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moe488
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T13:13:43.000Z" title="Sat Nov 22 2025 13:13:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ¦‚è¿°</h2>
<p><code>AutoConfigurationImportSelector</code> æ˜¯ Spring Boot è‡ªåŠ¨é…ç½®æœºåˆ¶çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå®ƒè´Ÿè´£åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨å‘ç°ã€åŠ è½½å’Œç­›é€‰éœ€è¦ç”Ÿæ•ˆçš„è‡ªåŠ¨é…ç½®ç±»ã€‚è¿™ä¸ªç±»å®ç°äº† <code>DeferredImportSelector</code> æ¥å£ï¼Œé‡‡ç”¨å»¶è¿Ÿå¯¼å…¥ç­–ç•¥ï¼Œç¡®ä¿è‡ªåŠ¨é…ç½®ç±»åœ¨å…¶ä»–é…ç½®ç±»å¤„ç†å®Œæˆåå†è¿›è¡Œå¯¼å…¥ã€‚</p>
<h2 data-id="heading-1">äºŒã€ç±»çš„èŒè´£ä¸æ¥å£å®ç°</h2>
<h3 data-id="heading-2">2.1 æ ¸å¿ƒæ¥å£</h3>
<p><code>AutoConfigurationImportSelector</code> å®ç°äº†ä»¥ä¸‹å…³é”®æ¥å£ï¼š</p>
<ul>
<li><strong><code>DeferredImportSelector</code></strong>ï¼šå»¶è¿Ÿå¯¼å…¥é€‰æ‹©å™¨ï¼Œå…è®¸åœ¨é…ç½®ç±»å¤„ç†å®Œæˆåæ‰å¯¼å…¥è‡ªåŠ¨é…ç½®ç±»</li>
<li><strong><code>BeanClassLoaderAware</code></strong>ï¼šè·å– Bean ç±»åŠ è½½å™¨</li>
<li><strong><code>ResourceLoaderAware</code></strong>ï¼šè·å–èµ„æºåŠ è½½å™¨</li>
<li><strong><code>BeanFactoryAware</code></strong>ï¼šè·å– Bean å·¥å‚</li>
<li><strong><code>EnvironmentAware</code></strong>ï¼šè·å–ç¯å¢ƒé…ç½®</li>
<li><strong><code>Ordered</code></strong>ï¼šå®šä¹‰æ‰§è¡Œé¡ºåºï¼ˆå€¼ä¸º <code>2147483646</code>ï¼Œä¼˜å…ˆçº§è¾ƒä½ï¼‰</li>
</ul>
<h3 data-id="heading-3">2.2 ä¸»è¦èŒè´£</h3>
<ol>
<li>ä» <code>META-INF/spring.factories</code> æ–‡ä»¶ä¸­åŠ è½½è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨</li>
<li>å¯¹è‡ªåŠ¨é…ç½®ç±»è¿›è¡Œå»é‡å¤„ç†</li>
<li>æ ¹æ®æ’é™¤è§„åˆ™ç§»é™¤ä¸éœ€è¦çš„é…ç½®ç±»</li>
<li>é€šè¿‡è¿‡æ»¤å™¨è¿›è¡Œæ¡ä»¶ç­›é€‰</li>
<li>è§¦å‘è‡ªåŠ¨é…ç½®å¯¼å…¥äº‹ä»¶</li>
</ol>
<h2 data-id="heading-4">ä¸‰ã€ä» spring.factories è·å–è‡ªåŠ¨é…ç½®ç±»åˆ—è¡¨</h2>
<h3 data-id="heading-5">3.1 æ ¸å¿ƒæ–¹æ³•ï¼šgetCandidateConfigurations</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> List&lt;String&gt; <span class="hljs-title function_">getCandidateConfigurations</span><span class="hljs-params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> {
    List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(
        <span class="hljs-built_in">this</span>.getSpringFactoriesLoaderFactoryClass(), 
        <span class="hljs-built_in">this</span>.getBeanClassLoader()
    );
    Assert.notEmpty(configurations, 
        <span class="hljs-string">"No auto configuration classes found in META-INF/spring.factories. "</span> +
        <span class="hljs-string">"If you are using a custom packaging, make sure that file is correct."</span>);
    <span class="hljs-keyword">return</span> configurations;
}
</code></pre>
<h3 data-id="heading-6">3.2 å·¥ä½œåŸç†</h3>
<ol>
<li>
<p><strong>æŒ‡å®šå·¥å‚ç±»ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>getSpringFactoriesLoaderFactoryClass()</code> è¿”å› <code>EnableAutoConfiguration.class</code></li>
<li>è¿™å‘Šè¯‰ <code>SpringFactoriesLoader</code> è¦æŸ¥æ‰¾å“ªä¸ªé”®å¯¹åº”çš„é…ç½®ç±»åˆ—è¡¨</li>
</ul>
</li>
<li>
<p><strong>åŠ è½½æœºåˆ¶</strong>ï¼š</p>
<ul>
<li><code>SpringFactoriesLoader.loadFactoryNames()</code> ä¼šæ‰«ææ‰€æœ‰ jar åŒ…ä¸­çš„ <code>META-INF/spring.factories</code> æ–‡ä»¶</li>
<li>æŸ¥æ‰¾é”®ä¸º <code>org.springframework.boot.autoconfigure.EnableAutoConfiguration</code> çš„é…ç½®</li>
<li>è¿”å›æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è‡ªåŠ¨é…ç½®ç±»çš„å…¨é™å®šååˆ—è¡¨</li>
</ul>
</li>
<li>
<p><strong>å…¸å‹çš„ spring.factories æ–‡ä»¶æ ¼å¼</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-properties" lang="properties">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
com.example.AutoConfiguration1,\
com.example.AutoConfiguration2,\
...
</code></pre>
<h3 data-id="heading-7">3.3 è·å–æµç¨‹</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@EnableAutoConfiguration</span> æ³¨è§£
    â†“
AutoConfigurationImportSelector.<span class="hljs-built_in">selectImports</span>()
    â†“
<span class="hljs-built_in">getAutoConfigurationEntry</span>()
    â†“
<span class="hljs-built_in">getCandidateConfigurations</span>()
    â†“
SpringFactoriesLoader.<span class="hljs-built_in">loadFactoryNames</span>(EnableAutoConfiguration.class, classLoader)
    â†“
æ‰«ææ‰€æœ‰ META-INF/spring.factories æ–‡ä»¶
    â†“
è¿”å›è‡ªåŠ¨é…ç½®ç±»å…¨é™å®šååˆ—è¡¨
</code></pre>
<h2 data-id="heading-8">å››ã€è‡ªåŠ¨é…ç½®ç±»çš„ç­›é€‰å’Œè¿‡æ»¤æœºåˆ¶</h2>
<p>è‡ªåŠ¨é…ç½®ç±»çš„ç­›é€‰å’Œè¿‡æ»¤æ˜¯ä¸€ä¸ªå¤šæ­¥éª¤çš„è¿‡ç¨‹ï¼Œåœ¨ <code>getAutoConfigurationEntry</code> æ–¹æ³•ä¸­å®Œæˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> AutoConfigurationEntry <span class="hljs-title function_">getAutoConfigurationEntry</span><span class="hljs-params">(
    AutoConfigurationMetadata autoConfigurationMetadata, 
    AnnotationMetadata annotationMetadata)</span> {
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.isEnabled(annotationMetadata)) {
        <span class="hljs-keyword">return</span> EMPTY_ENTRY;
    }
    
    <span class="hljs-comment">// 1. è·å–æ³¨è§£å±æ€§</span>
    <span class="hljs-type">AnnotationAttributes</span> <span class="hljs-variable">attributes</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getAttributes(annotationMetadata);
    
    <span class="hljs-comment">// 2. è·å–å€™é€‰é…ç½®ç±»åˆ—è¡¨</span>
    List&lt;String&gt; configurations = <span class="hljs-built_in">this</span>.getCandidateConfigurations(annotationMetadata, attributes);
    
    <span class="hljs-comment">// 3. å»é‡</span>
    configurations = <span class="hljs-built_in">this</span>.removeDuplicates(configurations);
    
    <span class="hljs-comment">// 4. è·å–æ’é™¤åˆ—è¡¨</span>
    Set&lt;String&gt; exclusions = <span class="hljs-built_in">this</span>.getExclusions(annotationMetadata, attributes);
    
    <span class="hljs-comment">// 5. æ£€æŸ¥æ’é™¤ç±»çš„æœ‰æ•ˆæ€§</span>
    <span class="hljs-built_in">this</span>.checkExcludedClasses(configurations, exclusions);
    
    <span class="hljs-comment">// 6. ç§»é™¤æ’é™¤çš„é…ç½®ç±»</span>
    configurations.removeAll(exclusions);
    
    <span class="hljs-comment">// 7. æ¡ä»¶è¿‡æ»¤</span>
    configurations = <span class="hljs-built_in">this</span>.filter(configurations, autoConfigurationMetadata);
    
    <span class="hljs-comment">// 8. è§¦å‘å¯¼å…¥äº‹ä»¶</span>
    <span class="hljs-built_in">this</span>.fireAutoConfigurationImportEvents(configurations, exclusions);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutoConfigurationEntry</span>(configurations, exclusions);
}
</code></pre>
<h3 data-id="heading-9">4.1 æ­¥éª¤ä¸€ï¼šå»é‡å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> &lt;T&gt; List&lt;T&gt; <span class="hljs-title function_">removeDuplicates</span><span class="hljs-params">(List&lt;T&gt; list)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>(list));
}
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>LinkedHashSet</code> å»é™¤é‡å¤çš„é…ç½®ç±»</li>
<li>ä¿æŒåŸæœ‰çš„é¡ºåºï¼ˆ<code>LinkedHashSet</code> æ˜¯æœ‰åºçš„ï¼‰</li>
</ul>
<h3 data-id="heading-10">4.2 æ­¥éª¤äºŒï¼šæ’é™¤æœºåˆ¶</h3>
<p>æ’é™¤æœºåˆ¶é€šè¿‡ <code>getExclusions</code> æ–¹æ³•æ”¶é›†æ‰€æœ‰éœ€è¦æ’é™¤çš„é…ç½®ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> Set&lt;String&gt; <span class="hljs-title function_">getExclusions</span><span class="hljs-params">(AnnotationMetadata metadata, AnnotationAttributes attributes)</span> {
    Set&lt;String&gt; excluded = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>();
    
    <span class="hljs-comment">// 1. ä»æ³¨è§£çš„ exclude å±æ€§è·å–ï¼ˆç±»å¯¹è±¡ï¼‰</span>
    excluded.addAll(<span class="hljs-built_in">this</span>.asList(attributes, <span class="hljs-string">"exclude"</span>));
    
    <span class="hljs-comment">// 2. ä»æ³¨è§£çš„ excludeName å±æ€§è·å–ï¼ˆç±»åï¼‰</span>
    excluded.addAll(Arrays.asList(attributes.getStringArray(<span class="hljs-string">"excludeName"</span>)));
    
    <span class="hljs-comment">// 3. ä»é…ç½®å±æ€§ spring.autoconfigure.exclude è·å–</span>
    excluded.addAll(<span class="hljs-built_in">this</span>.getExcludeAutoConfigurationsProperty());
    
    <span class="hljs-keyword">return</span> excluded;
}
</code></pre>
<p><strong>æ’é™¤æ¥æº</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ³¨è§£å±æ€§ exclude</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class})</span>
</code></pre>
</li>
<li>
<p><strong>æ³¨è§£å±æ€§ excludeName</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EnableAutoConfiguration(excludeName = {"com.example.SomeAutoConfiguration"})</span>
</code></pre>
</li>
<li>
<p><strong>é…ç½®æ–‡ä»¶å±æ€§</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">spring.autoconfigure.exclude=com.example.AutoConfiguration1,com.example.AutoConfiguration2
</code></pre>
</li>
</ol>
<p><strong>æœ‰æ•ˆæ€§æ£€æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkExcludedClasses</span><span class="hljs-params">(List&lt;String&gt; configurations, Set&lt;String&gt; exclusions)</span> {
    List&lt;String&gt; invalidExcludes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(exclusions.size());
    
    <span class="hljs-keyword">for</span> (String exclusion : exclusions) {
        <span class="hljs-comment">// å¦‚æœç±»å­˜åœ¨ä½†ä¸åœ¨é…ç½®åˆ—è¡¨ä¸­ï¼Œè¯´æ˜æ’é™¤æ— æ•ˆ</span>
        <span class="hljs-keyword">if</span> (ClassUtils.isPresent(exclusion, <span class="hljs-built_in">this</span>.getClass().getClassLoader()) 
            &amp;&amp; !configurations.contains(exclusion)) {
            invalidExcludes.add(exclusion);
        }
    }
    
    <span class="hljs-keyword">if</span> (!invalidExcludes.isEmpty()) {
        <span class="hljs-built_in">this</span>.handleInvalidExcludes(invalidExcludes);
    }
}
</code></pre>
<h3 data-id="heading-11">4.3 æ­¥éª¤ä¸‰ï¼šæ¡ä»¶è¿‡æ»¤ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰</h3>
<p><code>filter</code> æ–¹æ³•æ˜¯è‡ªåŠ¨é…ç½®ç±»ç­›é€‰çš„æ ¸å¿ƒï¼Œå®ƒä½¿ç”¨ <code>AutoConfigurationImportFilter</code> è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">filter</span><span class="hljs-params">(List&lt;String&gt; configurations, AutoConfigurationMetadata autoConfigurationMetadata)</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.nanoTime();
    String[] candidates = StringUtils.toStringArray(configurations);
    <span class="hljs-type">boolean</span>[] skip = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[candidates.length];
    <span class="hljs-type">boolean</span> <span class="hljs-variable">skipped</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// è·å–æ‰€æœ‰è¿‡æ»¤å™¨</span>
    Iterator&lt;AutoConfigurationImportFilter&gt; iterator = 
        <span class="hljs-built_in">this</span>.getAutoConfigurationImportFilters().iterator();
    
    <span class="hljs-keyword">while</span> (iterator.hasNext()) {
        <span class="hljs-type">AutoConfigurationImportFilter</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> iterator.next();
        
        <span class="hljs-comment">// æ³¨å…¥ä¾èµ–ï¼ˆAware æ¥å£ï¼‰</span>
        <span class="hljs-built_in">this</span>.invokeAwareMethods(filter);
        
        <span class="hljs-comment">// æ‰§è¡Œè¿‡æ»¤åŒ¹é…</span>
        <span class="hljs-type">boolean</span>[] match = filter.match(candidates, autoConfigurationMetadata);
        
        <span class="hljs-comment">// æ ‡è®°éœ€è¦è·³è¿‡çš„é…ç½®ç±»</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; match.length; ++i) {
            <span class="hljs-keyword">if</span> (!match[i]) {
                skip[i] = <span class="hljs-literal">true</span>;
                candidates[i] = <span class="hljs-literal">null</span>;
                skipped = <span class="hljs-literal">true</span>;
            }
        }
    }
    
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰è¢«è¿‡æ»¤çš„ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (!skipped) {
        <span class="hljs-keyword">return</span> configurations;
    }
    
    <span class="hljs-comment">// æ”¶é›†æœªè¢«è¿‡æ»¤çš„é…ç½®ç±»</span>
    List&lt;String&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(candidates.length);
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; candidates.length; ++i) {
        <span class="hljs-keyword">if</span> (!skip[i]) {
            result.add(candidates[i]);
        }
    }
    
    <span class="hljs-keyword">if</span> (logger.isTraceEnabled()) {
        <span class="hljs-type">int</span> <span class="hljs-variable">numberFiltered</span> <span class="hljs-operator">=</span> configurations.size() - result.size();
        logger.trace(<span class="hljs-string">"Filtered "</span> + numberFiltered + <span class="hljs-string">" auto configuration class in "</span> + 
            TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startTime) + <span class="hljs-string">" ms"</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>(result);
}
</code></pre>
<p><strong>è¿‡æ»¤å™¨è·å–</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">protected</span> List&lt;AutoConfigurationImportFilter&gt; <span class="hljs-title function_">getAutoConfigurationImportFilters</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> SpringFactoriesLoader.loadFactories(
        AutoConfigurationImportFilter.class, 
        <span class="hljs-built_in">this</span>.beanClassLoader
    );
}
</code></pre>
<p>è¿‡æ»¤å™¨åŒæ ·é€šè¿‡ <code>spring.factories</code> åŠ è½½ï¼Œå…¸å‹çš„è¿‡æ»¤å™¨åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong><code>OnClassCondition</code></strong>ï¼šæ£€æŸ¥ç±»è·¯å¾„ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ç±»</li>
<li><strong><code>OnBeanCondition</code></strong>ï¼šæ£€æŸ¥å®¹å™¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ Bean</li>
<li><strong><code>OnWebApplicationCondition</code></strong>ï¼šæ£€æŸ¥æ˜¯å¦ä¸º Web åº”ç”¨</li>
</ul>
<p><strong>è¿‡æ»¤å™¨å·¥ä½œåŸç†</strong>ï¼š</p>
<ol>
<li>æ¯ä¸ªè¿‡æ»¤å™¨å¯¹å€™é€‰é…ç½®ç±»æ•°ç»„è¿›è¡ŒåŒ¹é…</li>
<li>è¿”å›ä¸€ä¸ª <code>boolean[]</code> æ•°ç»„ï¼Œ<code>true</code> è¡¨ç¤ºåŒ¹é…ï¼ˆä¿ç•™ï¼‰ï¼Œ<code>false</code> è¡¨ç¤ºä¸åŒ¹é…ï¼ˆè¿‡æ»¤ï¼‰</li>
<li>æ‰€æœ‰è¿‡æ»¤å™¨çš„ç»“æœè¿›è¡Œé€»è¾‘ä¸è¿ç®—ï¼ˆæ‰€æœ‰è¿‡æ»¤å™¨éƒ½é€šè¿‡æ‰ä¿ç•™ï¼‰</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šOnClassCondition è¿‡æ»¤å™¨</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span>[] match(String[] autoConfigurationClasses, AutoConfigurationMetadata metadata) {
    <span class="hljs-type">boolean</span>[] match = <span class="hljs-keyword">new</span> <span class="hljs-title class_">boolean</span>[autoConfigurationClasses.length];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; autoConfigurationClasses.length; i++) {
        <span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> autoConfigurationClasses[i];
        
        <span class="hljs-comment">// æ£€æŸ¥ @ConditionalOnClass æ³¨è§£</span>
        <span class="hljs-comment">// å¦‚æœç±»è·¯å¾„ä¸­ä¸å­˜åœ¨å¿…éœ€çš„ç±»ï¼Œåˆ™è¿”å› false</span>
        match[i] = checkRequiredClassesExist(className);
    }
    
    <span class="hljs-keyword">return</span> match;
}
</code></pre>
<h3 data-id="heading-12">4.4 æ­¥éª¤å››ï¼šè§¦å‘å¯¼å…¥äº‹ä»¶</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fireAutoConfigurationImportEvents</span><span class="hljs-params">(List&lt;String&gt; configurations, Set&lt;String&gt; exclusions)</span> {
    List&lt;AutoConfigurationImportListener&gt; listeners = 
        <span class="hljs-built_in">this</span>.getAutoConfigurationImportListeners();
    
    <span class="hljs-keyword">if</span> (!listeners.isEmpty()) {
        <span class="hljs-type">AutoConfigurationImportEvent</span> <span class="hljs-variable">event</span> <span class="hljs-operator">=</span> 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutoConfigurationImportEvent</span>(<span class="hljs-built_in">this</span>, configurations, exclusions);
        
        <span class="hljs-keyword">for</span> (AutoConfigurationImportListener listener : listeners) {
            <span class="hljs-built_in">this</span>.invokeAwareMethods(listener);
            listener.onAutoConfigurationImportEvent(event);
        }
    }
}
</code></pre>
<p>å…è®¸å…¶ä»–ç»„ä»¶ç›‘å¬è‡ªåŠ¨é…ç½®å¯¼å…¥è¿‡ç¨‹ï¼Œè¿›è¡Œé¢å¤–çš„å¤„ç†ã€‚</p>
<h2 data-id="heading-13">äº”ã€å»¶è¿Ÿå¯¼å…¥æœºåˆ¶ï¼ˆDeferredImportSelectorï¼‰</h2>
<h3 data-id="heading-14">5.1 AutoConfigurationGroup å†…éƒ¨ç±»</h3>
<p><code>AutoConfigurationImportSelector</code> å®ç°äº† <code>getImportGroup</code> æ–¹æ³•ï¼Œè¿”å› <code>AutoConfigurationGroup</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DeferredImportSelector</span>.Group&gt; getImportGroup() {
    <span class="hljs-keyword">return</span> AutoConfigurationGroup.class;
}
</code></pre>
<h3 data-id="heading-15">5.2 å»¶è¿Ÿå¯¼å…¥çš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>ä¼˜å…ˆçº§æ§åˆ¶</strong>ï¼šç¡®ä¿è‡ªåŠ¨é…ç½®ç±»åœ¨å…¶ä»–é…ç½®ç±»ä¹‹åå¤„ç†</li>
<li><strong>æ¡ä»¶è¯„ä¼°</strong>ï¼šåœ¨ Bean å®šä¹‰å®Œæˆåï¼Œæ¡ä»¶æ³¨è§£èƒ½æ›´å‡†ç¡®åœ°è¯„ä¼°</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…ä¸å¿…è¦çš„ç±»åŠ è½½å’Œæ¡ä»¶æ£€æŸ¥</li>
</ol>
<h3 data-id="heading-16">5.3 æ’åºæœºåˆ¶</h3>
<p>åœ¨ <code>AutoConfigurationGroup.selectImports()</code> ä¸­ï¼Œä¼šå¯¹é…ç½®ç±»è¿›è¡Œæ’åºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> List&lt;String&gt; <span class="hljs-title function_">sortAutoConfigurations</span><span class="hljs-params">(
    Set&lt;String&gt; configurations, 
    AutoConfigurationMetadata autoConfigurationMetadata)</span> {
    
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">AutoConfigurationSorter</span>(
        <span class="hljs-built_in">this</span>.getMetadataReaderFactory(), 
        autoConfigurationMetadata
    )).getInPriorityOrder(configurations);
}
</code></pre>
<p>æ’åºä¾æ®ï¼š</p>
<ul>
<li><code>@AutoConfigureBefore</code> æ³¨è§£</li>
<li><code>@AutoConfigureAfter</code> æ³¨è§£</li>
<li><code>@AutoConfigureOrder</code> æ³¨è§£</li>
<li>ä¾èµ–å…³ç³»</li>
</ul>
<h2 data-id="heading-17">å…­ã€å®Œæ•´æµç¨‹å›¾</h2>
<pre><code class="hljs language-less" lang="less">åº”ç”¨å¯åŠ¨
    â†“
<span class="hljs-variable">@EnableAutoConfiguration</span> æ³¨è§£è¢«å¤„ç†
    â†“
AutoConfigurationImportSelector.<span class="hljs-built_in">selectImports</span>()
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-built_in">getAutoConfigurationEntry</span>()         â”‚
â”‚                                     â”‚
â”‚ <span class="hljs-number">1</span>. æ£€æŸ¥æ˜¯å¦å¯ç”¨è‡ªåŠ¨é…ç½®              â”‚
â”‚ <span class="hljs-number">2</span>. ä» spring.factories åŠ è½½å€™é€‰ç±»   â”‚
â”‚ <span class="hljs-number">3</span>. å»é‡                             â”‚
â”‚ <span class="hljs-number">4</span>. è·å–æ’é™¤åˆ—è¡¨                     â”‚
â”‚ <span class="hljs-number">5</span>. ç§»é™¤æ’é™¤çš„é…ç½®ç±»                 â”‚
â”‚ <span class="hljs-number">6</span>. æ¡ä»¶è¿‡æ»¤ï¼ˆOnClassConditionç­‰ï¼‰   â”‚
â”‚ <span class="hljs-number">7</span>. è§¦å‘å¯¼å…¥äº‹ä»¶                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
è¿”å›æœ€ç»ˆé…ç½®ç±»åˆ—è¡¨
    â†“
Spring å®¹å™¨åŠ è½½è¿™äº›é…ç½®ç±»
    â†“
è‡ªåŠ¨é…ç½®ç”Ÿæ•ˆ
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çº¿ä¸Šé—®é¢˜ï¼šMySQL NULLå€¼å¼•å‘çš„æŠ•è¯‰]]></title>    <link>https://juejin.cn/post/7575106644498497570</link>    <guid>https://juejin.cn/post/7575106644498497570</guid>    <pubDate>2025-11-22T14:26:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498497570" data-draft-id="7566176050281447458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¿ä¸Šé—®é¢˜ï¼šMySQL NULLå€¼å¼•å‘çš„æŠ•è¯‰"/> <meta itemprop="keywords" content="åç«¯,MySQL"/> <meta itemprop="datePublished" content="2025-11-22T14:26:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ ¼æ ¼æ­¥å…¥"/> <meta itemprop="url" content="https://juejin.cn/user/395479916231565"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¿ä¸Šé—®é¢˜ï¼šMySQL NULLå€¼å¼•å‘çš„æŠ•è¯‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916231565/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ ¼æ ¼æ­¥å…¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T14:26:42.000Z" title="Sat Nov 22 2025 14:26:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>2025.08.07 çº¿ä¸Šæ”¶åˆ°æµ‹è¯•åŒå­¦åé¦ˆï¼Œå‡ ä¸ªå•†æœºå®¢æˆ·åœ¨å•†æœºå…¬æµ·é‡Œæœç´¢ä¸åˆ°ï¼Œéœ€è¦ååŠ©æŸ¥çœ‹ã€‚</p>
<p>ä¸€å¼€å§‹ä»¥ä¸ºæ˜¯å¯¹åº”é”€å”®åŒå­¦æ²¡æœ‰é…ç½®å¥½å¯¹åº”æ± ï¼Œæ‰€ä»¥æ‰æœç´¢ä¸åˆ°ã€‚</p>
<p>é”€ç®¡æ˜ç¡®è¯´å·²æ­£ç¡®é…ç½®æ± ï¼Œå¹¶æä¾›æœç´¢ä¸åˆ°å•†æœºå®¢æˆ·çš„ clientIdã€‚æµ‹è¯•åŒå­¦å’Œäº§å“åŒåŒå­¦ä¹Ÿä¸€èµ·å°è¯•äº†ï¼Œå‘ç°ç¡®å®æœç´¢ä¸åˆ°ã€‚</p>
<p>åé¦ˆåˆ°æˆ‘è¿™ï¼Œè®©å¸®å¿™æ’æŸ¥ä¸‹ã€‚</p>
<p>é€šè¿‡æ¥å£å¼€å§‹æ’æŸ¥ï¼š</p>
<ol>
<li>åŠ å¯†æœç´¢æ˜¯å¦æœ‰é—®é¢˜ï¼šé‚®ç®±æœç´¢æ˜¯å…ˆåŠ å¯†å†æœç´¢</li>
<li>æŸ¥è¯¢ SQL æ˜¯å¦æœ‰é—®é¢˜ï¼šå­—æ®µé—®é¢˜
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/052f3f3e89034b009383c84c641df2eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qC85qC85q2l5YWl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764426402&amp;x-signature=XRFkDk%2B%2FI9MZeuoZGhd5TyRUAEk%3D" alt="image.png" loading="lazy"/></li>
</ol>
<p>å‘ç°æœ‰ userStatus å­—æ®µï¼Œä½¿ç”¨ NOT IN æŸ¥è¯¢ã€‚</p>
<p>åœ¨çº¿ä¸Šä½¿ç”¨ç›¸åŒ SQLï¼ŒåŠ ä¸Š <code>userStatus not in ('Unbind','Blocked')</code>ç¡®å®æœç´¢ä¸åˆ°ã€‚</p>
<p>ä¸”å¯¹åº” clientId ä¸­ userStatus çš„å€¼æ˜¯ NULLã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/070ae3d8fc6641e6b0cbdae255db8c53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qC85qC85q2l5YWl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764426402&amp;x-signature=0ee5MUM%2BXTVaDTWaC8XPiC%2Fvrwc%3D" alt="image.png" loading="lazy"/></p>
<p>é‚£å°±æ˜¯è¿™å—æœ‰é—®é¢˜ï¼Œæ­£å¸¸å®¢æˆ·çš„ userStatus ä¸èƒ½ä¸º NULLã€‚</p>
<p>ä¸”åœ¨ MySQL / ADB ä¸­ï¼Œå½“Â <code>userStatus</code>Â å­—æ®µä¸ºÂ <code>null</code>Â æ—¶ï¼Œä½¿ç”¨Â <code>NOT IN</code>Â æœç´¢ä¸åˆ°ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨ SQL ä¸­ï¼Œä»»ä½•ä¸Â <code>NULL</code>Â çš„æ¯”è¾ƒæ“ä½œï¼ˆåŒ…æ‹¬Â <code>IN</code>Â å’ŒÂ <code>NOT IN</code>ï¼‰éƒ½ä¼šè¿”å›Â <code>NULL</code>ï¼ˆæœªçŸ¥ï¼‰ï¼Œè€Œä¸æ˜¯Â <code>TRUE</code>Â æˆ–Â <code>FALSE</code>ã€‚åœ¨Â <code>WHERE</code>Â å­å¥ä¸­ï¼Œåªæœ‰è¿”å›Â <code>TRUE</code>Â çš„è®°å½•æ‰ä¼šè¢«åŒ…å«åœ¨ç»“æœé›†ä¸­ã€‚</p>
<p>ä¿®æ­£æ–¹æ³•ï¼š</p>
<ol>
<li>çº¿ä¸Šæ•°æ®è®¢æ­£ï¼šå°†å¯¹åº”çš„æ•°æ®çš„ userStatus æ”¹ä¸ºæ­£å¸¸å€¼</li>
<li>ä¿®æ”¹æŸ¥è¯¢ SQLï¼šæ”¯æŒ userStatus ä¸º NULLï¼ŒSQL å¦‚ä¸‹</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customer 
    <span class="hljs-keyword">WHERE</span> clientId <span class="hljs-operator">=</span> <span class="hljs-string">'123'</span><span class="hljs-keyword">AND</span> (ownerId <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">OR</span> ownerId <span class="hljs-operator">=</span> <span class="hljs-string">''</span>)  <span class="hljs-keyword">AND</span> (userStatus <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">OR</span> userStatus <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (<span class="hljs-string">'Unbind'</span>,<span class="hljs-string">'Blocked'</span>))
</code></pre>
<p>Hotfixï¼šæ‰¾åˆ°åŸå› ï¼Œè·Ÿå½“æ—¶å¼€å‘åŒå­¦æ²Ÿé€šå¹¶ç¡®å®šï¼Œè®©å…¶å…ˆè¡¥æ•°æ®ï¼Œå¹¶è®©å…¶äº‹åTODOä¿®å¤ã€‚</p>
<blockquote>
<p>PSï¼šè¿™å—æ˜¯å·¥ä½œäº†8å¹´çš„å‰é˜¿é‡ŒåŒå­¦å†™çš„ã€‚åŸºç¡€ä¸æ‰å®ï¼Œå°é—®é¢˜ä¹Ÿä¼šæ”¾å¤§ã€‚</p>
</blockquote>
<p><br/><br/></p>
<h2 data-id="heading-1">äºŒã€å°ç»“</h2>
<p><strong>ä¸ºä»€ä¹ˆå¾ˆå¤šäººå»ºè®® MySQL å­—æ®µä¸è¦è®¾ç½®ä¸ºÂ <code>NULL</code>ï¼Ÿ</strong></p>
<p>ä¸»è¦åŸå› å¹¶ä¸æ˜¯è¯´Â <code>NULL</code>Â ä¸€å®šä¸å¥½ï¼Œè€Œæ˜¯å®ƒåœ¨å®é™…ä½¿ç”¨ä¸­ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½ã€è¯­ä¹‰å’Œç»´æŠ¤ä¸Šçš„é—®é¢˜ã€‚</p>
<ol>
<li>
<p>NULL çš„è¯­ä¹‰å¤æ‚ï¼šåœ¨ SQL ä¸­ï¼Œ<code>NULL</code>Â è¡¨ç¤ºâ€œæœªçŸ¥â€æˆ–â€œä¸å­˜åœ¨â€ï¼Œå®ƒä¸æ˜¯ 0ã€ç©ºå­—ç¬¦ä¸²ã€falseï¼Œä¹Ÿä¸æ˜¯ä»»ä½•å…·ä½“å€¼ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿™æ„å‘³ç€åœ¨æ¯”è¾ƒæ—¶ï¼ŒNULL æœ‰ç‰¹æ®Šè§„åˆ™ï¼š</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customer <span class="hljs-keyword">WHERE</span> userStatus <span class="hljs-operator">=</span> <span class="hljs-keyword">NULL</span>; <span class="hljs-comment">-- æ°¸è¿œè¿”å›ç©ºç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> customer <span class="hljs-keyword">WHERE</span> userStatus <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>; <span class="hljs-comment">-- æ‰èƒ½åˆ¤æ–­æ˜¯å¦ä¸º NULL</span>

<span class="hljs-comment">-- å¦‚æœå¼€å‘äººå‘˜ä¸ç†Ÿæ‚‰è¿™äº›è§„åˆ™ï¼Œå¾ˆå®¹æ˜“å†™å‡ºé”™è¯¯çš„æŸ¥è¯¢ã€‚</span>
</code></pre>
</li>
<li>
<p>ç´¢å¼•å’Œæ€§èƒ½é—®é¢˜ï¼šåœ¨ MySQLï¼ˆå°¤å…¶æ˜¯ InnoDBï¼‰ä¸­ï¼Œ<code>NULL</code>Â å€¼ä¼šå½±å“ç´¢å¼•å­˜å‚¨æ–¹å¼ã€‚</p>
<ol>
<li>å¯¹å«æœ‰Â <code>NULL</code>Â çš„åˆ—å»ºç«‹ç´¢å¼•æ—¶ï¼ŒMySQL ä¼šé¢å¤–å­˜å‚¨ä¸€ä¸ªæ ‡å¿—ä½æ¥è¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸ºÂ <code>NULL</code>ï¼Œè¿™ä¼šå¢åŠ ç´¢å¼•ç©ºé—´å ç”¨ã€‚</li>
<li>æŸäº›æƒ…å†µä¸‹ï¼Œ<code>NULL</code>Â ä¼šè®©ç´¢å¼•é€‰æ‹©æ€§é™ä½ï¼Œå½±å“æŸ¥è¯¢ä¼˜åŒ–å™¨çš„æ‰§è¡Œè®¡åˆ’ã€‚</li>
</ol>
</li>
<li>
<p>èšåˆå’Œç»Ÿè®¡çš„å¤æ‚æ€§ï¼š<code>COUNT(column)</code>Â ä¸ä¼šç»Ÿè®¡Â <code>NULL</code>Â å€¼ï¼Œè€ŒÂ <code>COUNT(*)</code>Â ä¼šç»Ÿè®¡æ‰€æœ‰è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(status) <span class="hljs-keyword">FROM</span> customer; <span class="hljs-comment">-- ä¸ç»Ÿè®¡ status ä¸º NULL çš„è¡Œ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> customer;      <span class="hljs-comment">-- ç»Ÿè®¡æ‰€æœ‰è¡Œ</span>
</code></pre>
</li>
<li>
<p>å­˜å‚¨ä¸Šçš„å·®å¼‚ï¼š<code>NULL</code>Â åˆ—ä¼šé¢å¤–å ç”¨ 1 bit çš„ç©ºé—´æ¥è®°å½•æ˜¯å¦ä¸ºÂ <code>NULL</code>ã€‚</p>
</li>
</ol>
<blockquote>
<p>Tipsï¼šå¥½çš„ç¼–ç¨‹ä¹ æƒ¯å¯ä»¥é¿å…å¾ˆå¤šä½çº§é”™è¯¯ã€‚</p>
<p>Java å¼€å‘è€…éƒ½éœ€è¦å­¦ä¹ ï¼šã€Šé˜¿é‡Œå·´å·´Javaå¼€å‘è§„èŒƒã€‹</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eab878db5a714884bf5d2a41072b429a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5qC85qC85q2l5YWl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764426402&amp;x-signature=L4TGW0nSPSp7s3Lk7IruFdNPA1A%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[gitlabé…ç½®aiä»£ç å®¡æ ¸]]></title>    <link>https://juejin.cn/post/7575062687627100160</link>    <guid>https://juejin.cn/post/7575062687627100160</guid>    <pubDate>2025-11-22T15:03:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575062687627100160" data-draft-id="7575054113924792335" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="gitlabé…ç½®aiä»£ç å®¡æ ¸"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T15:03:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£çš„å½’å®¿55"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779297303"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            gitlabé…ç½®aiä»£ç å®¡æ ¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779297303/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£çš„å½’å®¿55
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:03:11.000Z" title="Sat Nov 22 2025 15:03:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘é¢†å¯¼å¼€å§‹è¦æ±‚ä½¿ç”¨aiæ¥æé«˜æ•ˆç‡ï¼Œæ­£å¥½æˆ‘ä»¬éƒ¨é—¨å¹³æ—¶ä¸€ç›´æ²¡æœ‰äººåŠ›è¿›è¡Œè¯¦ç»†çš„ä»£ç å®¡æ ¸ï¼Œå› æ­¤è¿™æ¬¡å°±æ‰“ç®—åœ¨CI/CDä¸­é›†æˆaiè¿›è¡Œä»£ç å®¡æ ¸ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ï¼Œèƒ½å¦è§£æ”¾è¿™ä¸€éƒ¨åˆ†çš„äººåŠ›ã€‚</p>
<p>é¦–å…ˆçœ‹ä¸‹å®Œæˆåçš„æ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå½“æœ‰äººæäº¤merge requestï¼ˆmrï¼‰ç”³è¯·åˆå¹¶ä»£ç æ—¶ï¼Œä¼šè§¦å‘gitlabçš„pipelineæµæ°´çº¿ï¼Œæ‰§è¡Œaiä»£ç å®¡æ ¸çš„ç¨‹åºï¼Œç„¶åå°†aiä»£ç å®¡æ ¸é€šè¿‡è¯„è®ºçš„æ–¹å¼è¾“å‡ºåœ¨è¿™ä¸ªmrä¸‹é¢ã€‚ç›®å‰aiå®¡æ ¸çš„ç»“æœåªæ˜¯ç”¨äºä»£ç å®¡æ ¸çš„å‚è€ƒï¼Œä¸ä½œä¸ºç¡¬æ€§æ ‡å‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cce3ceee765b43e9a1ba05c005b23fd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=cOMWZCsSs%2FUjTyENrmIE9MbBopI%3D" alt="1.png" loading="lazy"/></p>
<h4 data-id="heading-0">å‡†å¤‡ï¼š</h4>
<ol>
<li>gitlabï¼Œæˆ‘ä»¬å…¬å¸çš„ç‰ˆæœ¬æ¯”è¾ƒè€ï¼Œæ˜¯gitlab 9ï¼Œæ–°ç‰ˆæœ¬çš„gitlabçš„CI/CDè„šæœ¬è¯­æ³•ä¼šä¸å¤ªä¸€æ ·ã€‚</li>
<li>ä¸€å°æœºå™¨ï¼Œå®‰è£…äº†dockerï¼Œç”¨äºéƒ¨ç½²gitlab è§¦å‘æµæ°´çº¿æ—¶æ‰§è¡Œçš„aiä»£ç å®¡æ ¸ç¨‹åº</li>
<li>é˜¿é‡Œäº‘ç™¾ç‚¼çš„ç§˜é’¥ï¼Œè¿™é‡Œä½¿ç”¨çš„aiå®¡æ ¸å·¥å…·æ˜¯é˜¿é‡Œäº‘çš„qwen codeï¼Œå¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Fqwen-code%23bfe3dff25ecxb" target="_blank" title="https://help.aliyun.com/zh/model-studio/qwen-code#bfe3dff25ecxb" ref="nofollow noopener noreferrer">å®‰è£…é…ç½®ä¸ä½¿ç”¨Qwen Codeå‘½ä»¤è¡Œå·¥å…·-å¤§æ¨¡å‹æœåŠ¡å¹³å°ç™¾ç‚¼-é˜¿é‡Œäº‘</a> å®˜æ–¹æ–‡æ¡£ï¼Œä½¿ç”¨çš„aiæ¨¡å‹æ˜¯qwen3-coder-plusã€‚</li>
<li>openrestyï¼Œè¿™ä¸ªéå¿…é¡»ï¼Œå› ä¸ºè§¦å‘mræ—¶çš„è¯·æ±‚æ˜¯å›ºå®šæ ¼å¼çš„ï¼Œéœ€è¦å†™ä¸ªæ¥å£è¿›è¡Œæ•°æ®è½¬æ¢ï¼Œæ¥è§¦å‘åé¢çš„aiå®¡æ ¸é€»è¾‘ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ç”¨javaå†™ä¸€ä¸ªcontrollerè¿›è¡Œå¤„ç†ã€‚</li>
</ol>
<h4 data-id="heading-1">å¿…å¤‡çŸ¥è¯†ï¼š</h4>
<p>é¦–å…ˆç®€å•ä»‹ç»ä¸‹gitlabçš„CI/CDæµç¨‹å’Œgitlab runnerçš„æœºåˆ¶ã€‚</p>
<h5 data-id="heading-2">CI/CDæµç¨‹ï¼š</h5>
<p>æˆ‘ä»¬å…¬å¸çš„ä»£ç åˆ†æ”¯ç®¡ç†ç­–ç•¥é‡‡ç”¨github flowçš„ç®¡ç†æ–¹å¼ï¼Œåªæœ‰ä¸€ä¸ªä¸»å¹²åˆ†æ”¯ï¼Œå¼€å‘äººå‘˜éƒ½ä»è¿™ä¸ªåˆ†æ”¯åˆ‡ä»£ç åˆ°featureåˆ†æ”¯è¿›è¡Œå¼€å‘ï¼Œ<strong>å¼€å‘å®Œæˆåéœ€è¦æäº¤mr ç”³è¯·åˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯</strong>ï¼Œä¸»å¹²åˆ†æ”¯åªæœ‰æ ¸å¿ƒå¼€å‘æœ‰æƒé™æäº¤ï¼Œmrå®¡æ ¸é€šè¿‡åä¼šåˆå¹¶åˆ°ä¸»å¹²åˆ†æ”¯ï¼ŒåŒæ—¶è§¦å‘gitlabçš„CI/CDæµç¨‹ï¼Œè‡ªåŠ¨æ‰§è¡Œä»£ç çš„ç¼–è¯‘æµ‹è¯•ï¼Œå®Œæˆåè‡ªåŠ¨æ‰“åŒ…å‘å¸ƒåˆ°å¼€å‘ç¯å¢ƒã€‚</p>
<h5 data-id="heading-3">gitlab runneræœºåˆ¶ï¼š</h5>
<p>è¿™ä¸ªæ˜¯gitlabæä¾›çš„ç”¨äºCI/CDçš„ç»„ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä»£ç çš„æ ¹ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª.gitlab-ci.ymlæ–‡ä»¶ï¼Œè¿™é‡Œé¢å¯ä»¥å†™è„šæœ¬ä»£ç ï¼Œåœ¨æŸäº›æ¡ä»¶æ»¡è¶³çš„æƒ…å†µä¸‹ç”±gitlabè§¦å‘æ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»£ç ï¼Œä¸è¿‡åœ¨gitlab 9 è¿™ä¸ªè€ç‰ˆæœ¬ä¸Šåªæœ‰å½“ä»£ç è¢«pushæ—¶æ‰ä¼šè§¦å‘ï¼Œä¸è¿‡å¯ä»¥åœ¨è„šæœ¬ä¸­å†™æ¡ä»¶ï¼Œé™åˆ¶åªæœ‰ä¸»å¹²åˆ†æ”¯pushæ—¶è§¦å‘æµ‹è¯•æ‰“åŒ…ï¼Œå…¶ä»–å¼€å‘äººå‘˜çš„featureåˆ†æ”¯pushæ—¶å¯ä»¥åªæ‰§è¡Œä»£ç æµ‹è¯•ã€‚</p>
<p>è€Œgitlab runnerå°±æ˜¯æ‰§è¡Œè¿™ä¸ªè„šæœ¬çš„ç¨‹åºï¼Œä»–éœ€è¦ä½ æå‰åœ¨ä¸€å°æœºå™¨ä¸Šéƒ¨ç½²è¿™ä¸ªç¨‹åºï¼Œç„¶åé…ç½®å®Œæˆåå°±ä¼šæ³¨å†Œåˆ°gitlabä¸Šå¹¶ä¿æŒé•¿è¿æ¥ï¼Œè¿™æ ·gitlabå‘ç°ä»£ç æäº¤éœ€è¦è§¦å‘è‡ªåŠ¨é›†æˆæ—¶ï¼Œå°±èƒ½æ‰¾åˆ°è¿™ä¸ªç¨‹åºå¹¶è§¦å‘è‡ªåŠ¨é›†æˆä»£ç ã€‚</p>
<h4 data-id="heading-4">aiä»£ç å®¡æ ¸é…ç½®</h4>
<p>æ¥ä¸‹æ¥è¿›å…¥ä¸»é¢˜ï¼Œaiä»£ç å®¡æ ¸çš„é…ç½®ã€‚è¿™ä¸ªä¸»è¦å¯ä»¥åˆ†ä¸ºä¸‰æ­¥</p>
<ol>
<li>å¼€å‘æäº¤mræ—¶è§¦å‘å›è°ƒ</li>
<li>åœ¨å›è°ƒä¸­æ‰§è¡Œaiä»£ç å®¡æ ¸çš„ä»£ç </li>
<li>å°†aiä»£ç å®¡æ ¸çš„ç»“æœé€šè¿‡è¯„è®ºçš„æ–¹å¼å‘é€åˆ°æŒ‡å®šçš„mrä¸‹</li>
</ol>
<h5 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼Œå¼€å‘æäº¤mræ—¶è§¦å‘å›è°ƒ</h5>
<p>è¿™ä¸ªåœ¨é«˜ç‰ˆæœ¬çš„gitlabä¸­å¯ä»¥ç›´æ¥è§¦å‘gitlab runneræ‰§è¡Œ .gitlab-ci.ymlä¸­çš„è„šæœ¬ä»£ç ï¼Œä½†æ˜¯åœ¨gitlab 9è¿™ä¸ªè€ç‰ˆæœ¬ä¸­æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œäºæ˜¯åªèƒ½é‡‡ç”¨éº»çƒ¦ä¸€ç‚¹çš„æ–¹å¼ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œå¯ä»¥åœ¨settings -&gt; Integrationsä¸‹ï¼Œå¢åŠ ä¸€ä¸ªMerge Requests Eventsäº‹ä»¶çš„webhookï¼Œä»–ä¼šåœ¨æœ‰mräº‹ä»¶æ—¶è§¦å‘å›è°ƒè‡ªå®šä¹‰æœåŠ¡å™¨çš„æ¥å£ã€‚è¿™é‡Œæˆ‘ä¹Ÿè´´ä¸€ä¸‹mräº‹ä»¶å›è°ƒçš„æ•°æ®æ ¼å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/907351283624400993615ae9d05446c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=EC7hoCCv7Ylb1RSo29MG6QM1acI%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/419cd6662d83455889ee16562492d763~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=6xRHR9X1yGFGEp8btXuHP34G3Sc%3D" alt="3.png" loading="lazy"/></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"object_kind"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"merge_request"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Administrator"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"root"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"avatar_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=40\u0026d=identicon"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"object_attributes"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">99</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"target_branch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"master"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source_branch"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ms-viewport"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source_project_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"author_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">51</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"assignee_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">6</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MS-Viewport"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"created_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2013-12-03T17:23:34Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"updated_at"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2013-12-03T17:23:34Z"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"st_commits"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"st_diffs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"milestone_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"state"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"opened"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"merge_status"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"unchecked"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"target_project_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">14</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"iid"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"source"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Awesome Project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Aut reprehenderit ut est."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"web_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avatar_url"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"git_ssh_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"git@example.com:awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"git_http_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"namespace"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Awesome Space"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"visibility_level"</span><span class="hljs-punctuation">:</span><span class="hljs-number">20</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"path_with_namespace"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default_branch"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"master"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"ssh_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"git@example.com:awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"http_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Awesome Project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Aut reprehenderit ut est."</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"web_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avatar_url"</span><span class="hljs-punctuation">:</span><span class="hljs-literal"><span class="hljs-keyword">null</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"git_ssh_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"git@example.com:awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"git_http_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"namespace"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"Awesome Space"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"visibility_level"</span><span class="hljs-punctuation">:</span><span class="hljs-number">20</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"path_with_namespace"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"default_branch"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"master"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"ssh_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"git@example.com:awesome_space/awesome_project.git"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"http_url"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"http://example.com/awesome_space/awesome_project.git"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"last_commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fixed readme"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2012-01-03T23:36:29+02:00"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/awesome_space/awesome_project/commits/da1560886d4f094c3e6c9ef40349f7d38b5d27d7"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GitLab dev user"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"email"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"gitlabdev@dv6700.(none)"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"work_in_progress"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://example.com/diaspora/merge_requests/1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"action"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"open"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"assignee"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"User1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"username"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"avatar_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://www.gravatar.com/avatar/e64c7d89f26bd1972efa854d13d7dd61?s=40\u0026d=identicon"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-6">ç¬¬äºŒæ­¥ï¼Œåœ¨å›è°ƒä¸­æ‰§è¡Œaiä»£ç å®¡æ ¸çš„ä»£ç </h5>
<p>è¿™é‡Œæˆ‘ä»¬é€‰æ‹©åœ¨ä¸Šä¸€æ­¥çš„è‡ªå®šä¹‰å›è°ƒä¸­é€šè¿‡è°ƒç”¨httpè¯·æ±‚çš„æ–¹å¼ï¼Œè§¦å‘gitlabçš„triggerï¼Œè®©gitlabæ‰§è¡Œ.gitlab-ci.ymlä¸­çš„è„šæœ¬ä»£ç ã€‚ triggerçš„é…ç½®æ–¹å¼ä¸ºåœ¨Settings -&gt; CI/CD Pipelinesèœå•æ ä¸‹ï¼Œé€šè¿‡Add triggerçš„æ–¹å¼æ·»åŠ ä¸€ä¸ªtriggerï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨mrå›è°ƒçš„å¤„ç†ä»£ç ä¸­é€šè¿‡httpè°ƒç”¨è§¦å‘gitlabçš„pipelineï¼Œæ‰§è¡Œ.gitlab-ci.ymlä¸­çš„ä»£ç ã€‚<strong>ä¸è¿‡è¿™ä¸€æ­¥çš„å…·ä½“æ‰§è¡Œè¿˜è¦åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f9aad0722ea4b4185e5d8b5bec61171~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=qVVAOFOU2YqZk7Ft3ElXFSNCVUQ%3D" alt="4.png" loading="lazy"/></p>
<h6 data-id="heading-7">3.1 ç¼–å†™å›è°ƒæ¥å£ä»£ç </h6>
<p>mrè§¦å‘çš„äº‹ä»¶å’Œä¸»åŠ¨è§¦å‘gitlab triggerçš„httpè¯·æ±‚å‚æ•°å¹¶ä¸ä¸€æ ·ï¼Œè¿™é‡Œéœ€è¦æˆ‘ä»¬åœ¨è‡ªå®šä¹‰ä»£ç ä¸­åšä¸‹è½¬æ¢ï¼Œæˆ‘è¿™é‡Œæ˜¯ä½¿ç”¨openrestyçš„luaä»£ç ç®€å•åšäº†ä¸‹å¤„ç†ï¼Œè¿™é‡Œä¹Ÿè´´ä¸‹ä»£ç ç”¨äºå‚è€ƒã€‚</p>
<p>ä¸»è¦é€»è¾‘æ˜¯ä»mrè¯·æ±‚ä½“ä¸­è¿‡æ»¤å‡ºå‡ ä¸ªå˜é‡ï¼Œç„¶åè½¬æˆtriggerè¯·æ±‚çš„å˜é‡ï¼Œç”¨äºåç»­è„šæœ¬ä½¿ç”¨ã€‚è§£æçš„å˜é‡æœ‰target_branchè¢«åˆå¹¶çš„ç›®æ ‡åˆ†æ”¯ï¼Œsource_branchç”³è¯·åˆå¹¶çš„æºå¤´åˆ†æ”¯ï¼Œsource_project_idåˆå¹¶çš„é¡¹ç›®idï¼Œmr_iidåˆå¹¶è¯·æ±‚idï¼Œè¿‡æ»¤å‡ºè¿™å‡ ä¸ªå˜é‡åï¼Œå°±å¯ä»¥è°ƒç”¨httpè¯·æ±‚è§¦å‘triggerï¼Œè®©gitlabæ‰§è¡Œpipelineã€‚</p>
<p>è¿™é‡Œæœ‰å‡ ä¸ªåœ°æ–¹æ¯”è¾ƒé‡è¦ï¼Œè§¦å‘triggeréœ€è¦æŒ‡å®šé¡¹ç›®idï¼Œtriggerçš„tokenï¼ˆè¿™ä¸ªå¯ä»¥åœ¨gitlabä¸Šåˆ›å»ºtriggerçš„åœ°æ–¹çœ‹åˆ°ï¼‰ï¼Œå˜é‡refçš„å€¼ï¼Œè¿™ä¸ªå€¼ä¼šå†³å®šåœ¨å“ªä¸ªåˆ†æ”¯ä¸Šè§¦å‘gitlabçš„pipelineæµç¨‹ï¼Œè¿™é‡Œéœ€è¦æŒ‡å®šä¸ºmrçš„æºåˆ†æ”¯ï¼Œæ–¹ä¾¿åç»­è„šæœ¬æŸ¥è¯¢mrçš„ä»£ç ä¿®æ”¹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">        location /gitlab/ci/relay {
             access_by_lua '
                ngx.req.read_body()
                local <span class="hljs-attr">param_args_str</span> = ngx.req.get_body_data()
                ngx.log(ngx.INFO, "&lt;param_args_str&gt;" .. tostring(param_args_str))

                local <span class="hljs-attr">cjson</span> = require <span class="hljs-string">"cjson"</span>
                local <span class="hljs-attr">param_args</span> = cjson.decode(param_args_str)
                if param_args and param_args.object_attributes and param_args.object_attributes.last_commit and string.find(param_args.object_attributes.state, "opened") then
                  local <span class="hljs-attr">target_branch</span> = tostring(param_args.object_attributes.target_branch)
                  local <span class="hljs-attr">source_branch</span> = tostring(param_args.object_attributes.source_branch)
                  local <span class="hljs-attr">commit_id</span> = tostring(param_args.object_attributes.last_commit.id)
                  local <span class="hljs-attr">source_project_id</span> = tostring(param_args.object_attributes.source_project_id)
                  local <span class="hljs-attr">mr_iid</span> = tostring(param_args.object_attributes.iid)
                  local <span class="hljs-attr">url</span> = string.format(<span class="hljs-string">"https://xxx.xxx.com.cn/api/v4/projects/%s/trigger/pipeline"</span>,source_project_id)
                  local <span class="hljs-attr">body</span> = string.format(<span class="hljs-string">"ref=%s&amp;token=xxxxxxxxxxxxx&amp;variables[CI_MERGE_REQUEST_SOURCE_BRANCH_NAME]=%s&amp;variables[CI_MERGE_REQUEST_TARGET_BRANCH_NAME]=%s&amp;variables[CI_COMMIT_ID]=%s&amp;variables[CI_PROJECT_ID]=%s&amp;variables[CI_MR_IID]=%s"</span>,source_branch,source_branch,target_branch,commit_id,source_project_id,mr_iid)

                  ngx.log(ngx.INFO,"trigger ai review")
                  ngx.log(ngx.INFO,string.format("url is %s,body is %s",url,body))
                  local <span class="hljs-attr">httpc</span> = require(<span class="hljs-string">"resty.http"</span>).new()
                  local res, <span class="hljs-attr">err</span> = httpc:request_uri(url, {
                    <span class="hljs-attr">method</span> = <span class="hljs-string">"POST"</span>,
                    <span class="hljs-attr">body</span> = body,
                    <span class="hljs-attr">headers</span> = {[<span class="hljs-string">"Content-Type"</span>]=<span class="hljs-string">"application/x-www-form-urlencoded"</span>}
                  })
                  if not res or err then
                    ngx.log(ngx.INFO, "&lt;err&gt;" .. err)
                  end
                  ngx.log(ngx.INFO, "&lt;info&gt;" .. tostring(res.body))
                end

                ngx.say("ok")
                return ngx.exit(ngx.HTTP_OK)
             '<span class="hljs-comment">;</span>
        }
</code></pre>
<h6 data-id="heading-8">3.2 ç¼–å†™.gitlab-ci.ymlæ–‡ä»¶</h6>
<p>è¿™é‡Œåˆ—å‡ºç¤ºä¾‹ä»£ç ï¼Œä¸»è¦æ˜¯é€šè¿‡git diffæ¥æŸ¥è¯¢mrçš„ä»£ç ä¿®æ”¹ï¼Œç„¶åé€šè¿‡æ‰§è¡Œqwenè¿™ä¸ªå‘½ä»¤ï¼Œå°†ä»£ç ä¿®æ”¹å’Œæç¤ºè¯ä¼ å…¥ï¼Œè®©aiè¿›è¡Œä»£ç å®¡æ ¸ï¼Œæœ€åå°†å®¡æ ¸ç»“æœé€šè¿‡è¯„è®ºçš„æ–¹å¼å‘é€åˆ°mrä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">stages:
  - ai-review
  

ai_code_review:
  stage: ai-review
  image: qwen-code:1.1.0
  script:
    - |
      <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">${CI_MERGE_REQUEST_TARGET_BRANCH_NAME:-}</span>"</span> = <span class="hljs-string">""</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"is not merge request ,skip ai review"</span>
        <span class="hljs-built_in">exit</span> 0
      <span class="hljs-keyword">fi</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"Target branch: <span class="hljs-variable">$CI_MERGE_REQUEST_TARGET_BRANCH_NAME</span>"</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"Source branch: <span class="hljs-variable">$CI_MERGE_REQUEST_SOURCE_BRANCH_NAME</span>"</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"CI_PROJECT_ID: <span class="hljs-variable">$CI_PROJECT_ID</span>"</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"CI_MR_IID: <span class="hljs-variable">$CI_MR_IID</span>"</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"start ai review11"</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"OPENAI_MODEL:<span class="hljs-variable">$OPENAI_MODEL</span>"</span>
      git diff origin/<span class="hljs-variable">${CI_MERGE_REQUEST_TARGET_BRANCH_NAME}</span>...HEAD &gt; /tmp/git-diff-output.txt
      <span class="hljs-built_in">cat</span> /tmp/git-diff-output.txt
      result=$(<span class="hljs-built_in">cat</span> /tmp/git-diff-output.txt | qwen -p <span class="hljs-string">"Review these changes for bugs, security issues, and code quality,and use Chinese to output the reply."</span> --output-format json)
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$result</span>"</span>
      response=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$result</span>"</span> | jq -r <span class="hljs-string">'.response'</span>)
      curl --request POST  --header <span class="hljs-string">"PRIVATE-TOKEN: <span class="hljs-variable">${COMMENT_KEY}</span>"</span>  --data-urlencode <span class="hljs-string">"body=<span class="hljs-variable">${response}</span>"</span>  <span class="hljs-string">"https://xxxxxxx.com.cn/api/v4/projects/<span class="hljs-variable">${CI_PROJECT_ID}</span>/merge_requests/<span class="hljs-variable">${CI_MR_IID}</span>/notes"</span>
</code></pre>
<h6 data-id="heading-9">3.3 åˆ¶ä½œè‡ªå®šä¹‰é•œåƒ</h6>
<p>æˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€ä¸ªdockeré•œåƒï¼Œä¸»è¦åŠŸèƒ½æ˜¯å®‰è£…qwenå·¥å…·ï¼Œæ”¯æŒè„šæœ¬ä¸­æ‰§è¡Œqwenè°ƒç”¨aiä»£ç å®¡æ ¸ï¼Œå› ä¸ºgitlab runneræ‰§è¡Œ.gitlab-ci.ymlè„šæœ¬æ—¶æ˜¯é€šè¿‡åˆ¶å®šé•œåƒæ¥æ‰§è¡Œçš„ï¼Œè¿™é‡Œå°±éœ€è¦æŠŠè‡ªå®šä¹‰çš„é•œåƒå¡«åˆ°ymlæ–‡ä»¶çš„imageå­—æ®µä¸­ï¼Œæä¾›dockerç¯å¢ƒã€‚</p>
<p>åˆ¶ä½œé•œåƒä¹Ÿå¾ˆç®€å•ï¼Œè¿™é‡Œæä¾›ä¸‹dockerfileæ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯åœ¨nodeåŸºç¡€é•œåƒçš„åŸºç¡€ä¸Šå®‰è£…ä¸‹qwenå’Œjqç¨‹åºã€‚</p>
<pre><code class="hljs language-bash" lang="bash">FROM docker.1ms.run/library/node:22-bookworm
RUN npm install -g @qwen-code/qwen-code
ADD jq-linux-amd64 /usr/bin/jq
RUN <span class="hljs-built_in">chmod</span> +x /usr/bin/jq
</code></pre>
<h6 data-id="heading-10">3.4 åœ¨gitlabä¸­å¢åŠ å˜é‡</h6>
<p>å› ä¸ºqwenè°ƒç”¨éœ€è¦ä¸‰ä¸ªå‚æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬ç§˜é’¥ä¿¡æ¯ï¼Œè¿™é‡Œå¯ä»¥é€šè¿‡gitlabçš„ settings -&gt; CI/CD Pipelinesä¸‹é¢çš„Secret VariablesåŠŸèƒ½æ¥å®ç°ï¼Œé€šè¿‡Add new variableæ·»åŠ å˜é‡OPENAI_API_KEYï¼ŒOPENAI_BASE_URLï¼ŒOPENAI_MODELï¼Œè¿™æ ·.gitlab-ci.ymlè„šæœ¬ä¸­å¯åŠ¨é•œåƒæ—¶ä¼šè‡ªåŠ¨æ³¨å…¥è¿™äº›å˜é‡ä½œä¸ºç¯å¢ƒå˜é‡ï¼Œå°±å¯ä»¥ç›´æ¥æ‰§è¡Œqwenå‘½ä»¤è°ƒç”¨aiã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1231c8bfca664aa9a5fb1a950fb7108c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=rakdXHWH6erk0DxqvQViQj5lZhk%3D" alt="5.png" loading="lazy"/></p>
<h5 data-id="heading-11">ç¬¬ä¸‰æ­¥ï¼Œå°†aiä»£ç å®¡æ ¸çš„ç»“æœé€šè¿‡è¯„è®ºçš„æ–¹å¼å‘é€åˆ°æŒ‡å®šçš„mrä¸‹</h5>
<p>è¿™ä¸ªå…¶å®å°±æ˜¯åœ¨.gitlab-ci.ymlè„šæœ¬ä¸­ï¼Œå°†aiä»£ç å®¡æ ¸çš„ç»“æœé€šè¿‡gitlabçš„apiæ–°å¢ä¸€ä¸ªè¯„è®ºï¼Œè¯„è®ºçš„å†…å®¹å°±æ˜¯aiå®¡æ ¸çš„ç»“æœã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå‘é€è¯„è®ºçš„apiéœ€è¦ä¸€ä¸ªsecret keyï¼Œè¿™ä¸ªå¯ä»¥é€šè¿‡åœ¨gitlabçš„user settingsç•Œé¢ç”Ÿæˆï¼Œç„¶åä¹Ÿæ˜¯åœ¨gitlabä¸­è®¾ç½®ä¸ºä¸€ä¸ªå˜é‡ï¼Œåœ¨.gitlab-ci.ymlçš„è„šæœ¬ä¸­é€šè¿‡å˜é‡å¼•ç”¨è¿›æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7305a5142d4743d78198d2c1f3b69764~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOO55qE5b2S5a6_NTU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428591&amp;x-signature=KsmklccYlxFYbu6xoPjQWdQeqFc%3D" alt="6.png" loading="lazy"/></p>
<p>è‡³æ­¤ï¼Œaiä»£ç å®¡æ ¸å°±å®Œæˆäº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œèµ¶ç´§è¯•ä¸€ä¸‹å§</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MYSQL-ç‰©ç†å¤‡ä»½ï¼ˆxtrabackupï¼‰ä½¿ç”¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575083657994240027</link>    <guid>https://juejin.cn/post/7575083657994240027</guid>    <pubDate>2025-11-22T15:09:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575083657994240027" data-draft-id="7575133880435097651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MYSQL-ç‰©ç†å¤‡ä»½ï¼ˆxtrabackupï¼‰ä½¿ç”¨æŒ‡å—"/> <meta itemprop="keywords" content="Linux,æ•°æ®åº“,MySQL"/> <meta itemprop="datePublished" content="2025-11-22T15:09:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dessler"/> <meta itemprop="url" content="https://juejin.cn/user/501033031702967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MYSQL-ç‰©ç†å¤‡ä»½ï¼ˆxtrabackupï¼‰ä½¿ç”¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033031702967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dessler
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:09:10.000Z" title="Sat Nov 22 2025 15:09:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ä»‹ç»ï¼šç®€å†ä¸Šæ²¡æœ‰ä¸€ä¸ªç²¾é€šçš„è¿ç»´å·¥ç¨‹å¸ˆã€‚è¯·ç‚¹å‡»ä¸Šæ–¹çš„è“è‰²ã€Šè¿ç»´å°è·¯ã€‹å…³æ³¨æˆ‘ï¼Œä¸‹é¢çš„æ€ç»´å¯¼å›¾ä¹Ÿæ˜¯é¢„è®¡æ›´æ–°çš„å†…å®¹å’Œå½“å‰è¿›åº¦(ä¸å®šæ—¶æ›´æ–°)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/316fa471bf224277848606fcc9b57eb6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGVzc2xlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764428950&amp;x-signature=UghrfFoR38Saga2x0MuJMAuiXqI%3D" alt="" loading="lazy"/></p>
<p>æ•°æ®åº“æ˜¯ä¸€ä¸ªç³»ç»Ÿï¼ˆåº”ç”¨ï¼‰æœ€é‡è¦çš„èµ„äº§ä¹‹ä¸€ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æ•°æ®åº“å°†ä»ä»¥ä¸‹å‡ ä¸ªæ•°æ®åº“æ¥è¿›è¡Œä»‹ç»ã€‚</p>
<p><strong>MySQL</strong>**ï¼ˆæœ¬ç« èŠ‚ï¼‰**</p>
<p><strong>PostgreSQL</strong></p>
<p><strong>MongoDB</strong></p>
<p><strong>Redis</strong></p>
<p><strong>Etcd</strong></p>
<p><strong>ç‰©ç†å¤‡ä»½åˆ†ä¸¤ç§æƒ…å†µï¼šä¸€ç§æ˜¯ç›´æ¥å¤åˆ¶åº“çš„ç‰©ç†æ–‡ä»¶ï¼ˆåˆ©ç”¨çš„æ˜¯Linuxå¤åˆ¶æ–‡ä»¶çš„ç‰¹æ€§ï¼‰ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µä¸€èˆ¬éœ€è¦åœ¨æ•°æ®åº“æœåŠ¡åœæ­¢çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œé€‚åˆé‚£ç§å…è®¸ä¸­æ–­ä¸šåŠ¡çš„æƒ…å†µè¿›è¡Œã€‚å¦å¤–ä¸€ç§å°±æ˜¯åˆ©ç”¨å¼€æºå·¥å…·XtraBackupè¿›è¡Œå¤‡ä»½ï¼Œå› ä¸ºä»–å…·æœ‰å¢é‡å¤‡ä»½çš„èƒ½åŠ›ï¼Œæ‰€æœ‰éƒ¨åˆ†äº‘å‚å•†çš„å¤‡ä»½ä¹Ÿä¼šåŸºäºç±»ä¼¼çš„æ“ä½œã€‚</strong></p>
<h2 data-id="heading-0">å¤‡ä»½</h2>
<h3 data-id="heading-1">å®‰è£…</h3>
<pre><code class="hljs language-arduino" lang="arduino"># å®‰è£… Percona ä»“åº“
sudo yum install https:<span class="hljs-comment">//repo.percona.com/yum/percona-release-latest.noarch.rpm</span>
sudo percona-release enable tools release
sudo yum install percona-xtrabackup<span class="hljs-number">-24</span>
</code></pre>
<h3 data-id="heading-2">å…¨é‡å¤‡ä»½</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åŸºæœ¬å…¨é‡å¤‡ä»½</span>
xtrabackup --backup <span class="hljs-attr">--target-dir</span>=/path/to/backup --user=root --password=your_password

<span class="hljs-comment"># å®Œæ•´ç¤ºä¾‹</span>
xtrabackup \
    --backup \
    <span class="hljs-attr">--target-dir</span>=/backup/mysql/full_$(date +%Y%m%d_%H%M%S) \
    <span class="hljs-attr">--user</span>=root \
    <span class="hljs-attr">--password</span>=your_password \
    <span class="hljs-attr">--socket</span>=/var/lib/mysql/mysql.sock \
    <span class="hljs-attr">--parallel</span>=<span class="hljs-number">4</span> \
    --compress

251013 22:26:57 Executing UNLOCK TABLES
251013 22:26:57 All tables unlocked
251013 22:26:57 <span class="hljs-section">[00]</span> Compressing ib_buffer_pool to /backup/mysql/full_20251013_222642/ib_buffer_pool.qp
251013 22:26:57 <span class="hljs-section">[00]</span>        ...done
251013 22:26:57 Backup created in directory '/backup/mysql/full_20251013_222642/'
MySQL binlog position: filename 'mysql-bin.000014', position '154'
251013 22:26:57 <span class="hljs-section">[00]</span> Compressing /backup/mysql/full_20251013_222642/backup-my.cnf.qp
251013 22:26:57 <span class="hljs-section">[00]</span>        ...done
251013 22:26:57 <span class="hljs-section">[00]</span> Compressing /backup/mysql/full_20251013_222642/xtrabackup_info.qp
251013 22:26:57 <span class="hljs-section">[00]</span>        ...done
xtrabackup: Transaction log of lsn (1079467870) to (1079467879) was copied.
251013 22:26:58 completed OK!
</code></pre>
<h3 data-id="heading-3">å¤‡ä»½å®Œæˆå†…å®¹</h3>
<p>å¯ä»¥å’Œæ•°æ®å­˜å‚¨çš„çš„æ•°æ®è¿›è¡Œæ¯”å¯¹ï¼Œä½ ä¼šå‘ç°å…·ä½“çš„æŸä¸ªåº“ä¸‹é¢çš„å®é™…å†…å®¹å’Œæ•°æ®ç›®å½•ç”šè‡³æ˜¯ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">[root<span class="hljs-variable">@localhost</span> xback]# ll
total <span class="hljs-number">77876</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root      487 Sep 28 00:45 backup-my.cnf</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root      790 Sep 28 00:45 ib_buffer_pool</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root 79691776 Sep 28 00:45 ibdata1</span>
drwxr<span class="hljs-operator">-</span>x<span class="hljs-comment">--- 2 root root     4096 Sep 28 00:45 mysql</span>
drwxr<span class="hljs-operator">-</span>x<span class="hljs-comment">--- 2 root root     8192 Sep 28 00:45 performance_schema</span>
drwxr<span class="hljs-operator">-</span>x<span class="hljs-comment">--- 2 root root     8192 Sep 28 00:45 sys</span>
drwxr<span class="hljs-operator">-</span>x<span class="hljs-comment">--- 2 root root      214 Sep 28 00:45 test_db</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root       21 Sep 28 00:45 xtrabackup_binlog_info</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root      144 Sep 28 00:45 xtrabackup_checkpoints</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root      493 Sep 28 00:45 xtrabackup_info</span>
<span class="hljs-operator">-</span>rw<span class="hljs-operator">-</span>r<span class="hljs-comment">----- 1 root root     2560 Sep 28 00:45 xtrabackup_logfile</span>
</code></pre>
<h2 data-id="heading-4">å¤‡ä»½å•ä¸ªåº“</h2>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¤‡ä»½æŒ‡å®šæ•°æ®åº“çš„æ‰€æœ‰è¡¨</span>
xtrabackup --backup \
    <span class="hljs-attr">--target-dir</span>=/backup/database1_full \
    <span class="hljs-attr">--user</span>=root \
    <span class="hljs-attr">--password</span>=<span class="hljs-string">'@!qaz2WSX'</span> \
    <span class="hljs-attr">--tables</span>=<span class="hljs-string">"^database1[.].*"</span>

<span class="hljs-comment"># ç¤ºä¾‹ï¼šå¤‡ä»½ db1 æ•°æ®åº“</span>
xtrabackup --backup \
    <span class="hljs-attr">--target-dir</span>=/backup/db1_full \
    <span class="hljs-attr">--user</span>=root \
    <span class="hljs-attr">--password</span>=<span class="hljs-string">'@!qaz2WSX'</span> \
    <span class="hljs-attr">--tables</span>=<span class="hljs-string">"^db1[.].*"</span>
</code></pre>
<h3 data-id="heading-5">ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">FULL_BACKUP_DIR</span>=<span class="hljs-string">"/backup/mysql/full_20251013_222642"</span> &amp;&amp; \
<span class="hljs-attr">INC_BACKUP_DIR1</span>=<span class="hljs-string">"/backup/mysql/inc1_$(date +%Y%m%d_%H%M%S)"</span> &amp;&amp; \
xtrabackup --backup <span class="hljs-attr">--target-dir</span>=<span class="hljs-variable">$INC_BACKUP_DIR1</span> --incremental-basedir=<span class="hljs-variable">$FULL_BACKUP_DIR</span> --user=root --password=<span class="hljs-string">'@!qaz2WSX'</span> --socket=/var/lib/mysql/mysql.sock &amp;&amp; \
echo "ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½å®Œæˆ: $INC_BACKUP_DIR1"
</code></pre>
<h3 data-id="heading-6">ç¬¬äºŒæ¬¡å¢åŠ å¤‡ä»½</h3>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">FULL_BACKUP_DIR</span>=<span class="hljs-string">"/backup/mysql/full_20251013_222642"</span> &amp;&amp; \
<span class="hljs-attr">INC_BACKUP_DIR1</span>=<span class="hljs-string">"/backup/mysql/inc1_$(date +%Y%m%d_%H%M%S)"</span> &amp;&amp; \
xtrabackup --backup <span class="hljs-attr">--target-dir</span>=<span class="hljs-variable">$INC_BACKUP_DIR1</span> --incremental-basedir=<span class="hljs-variable">$FULL_BACKUP_DIR</span> --user=root --password=<span class="hljs-string">'@!qaz2WSX'</span> --socket=/var/lib/mysql/mysql.sock &amp;&amp; \
echo "ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½å®Œæˆ: $INC_BACKUP_DIR1"
</code></pre>
<p>æ³¨æ„ï¼šè¿™é‡Œçš„å¤‡ä»½éœ€è¦ä¸Šä¸€æ¬¡å¤‡ä»½å…·ä½“ç›®å½•ã€‚</p>
<h2 data-id="heading-7">è¿˜åŸ</h2>
<h3 data-id="heading-8">åˆå¹¶å¤‡ä»½</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># å¤‡ä»½ç›®å½•</span>
FULL_BACKUP_DIR=<span class="hljs-string">"/backup/mysql/full_20251013_222642"</span>
INC_BACKUP_DIR1=<span class="hljs-string">"/backup/mysql/inc1_20251013_223918"</span>
INC_BACKUP_DIR2=<span class="hljs-string">"/backup/mysql/inc2_20251013_224134"</span>  <span class="hljs-comment"># æ‚¨çš„ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½ç›®å½•</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹åˆå¹¶è¿˜åŸå…¨é‡+å¢é‡å¤‡ä»½..."</span>

<span class="hljs-comment"># æ­¥éª¤1: å‡†å¤‡å…¨é‡å¤‡ä»½ï¼ˆåº”ç”¨redoæ—¥å¿—ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. å‡†å¤‡å…¨é‡å¤‡ä»½..."</span>
xtrabackup --prepare --apply-log-only --target-dir=<span class="hljs-variable">$FULL_BACKUP_DIR</span>

<span class="hljs-comment"># æ­¥éª¤2: åˆå¹¶ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. åˆå¹¶ç¬¬ä¸€æ¬¡å¢é‡å¤‡ä»½..."</span>
xtrabackup --prepare --apply-log-only --target-dir=<span class="hljs-variable">$FULL_BACKUP_DIR</span> \
    --incremental-dir=<span class="hljs-variable">$INC_BACKUP_DIR1</span>

<span class="hljs-comment"># æ­¥éª¤3: åˆå¹¶ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½ï¼ˆæœ€åä¸€æ­¥ä¸ä½¿ç”¨--apply-log-onlyï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. åˆå¹¶ç¬¬äºŒæ¬¡å¢é‡å¤‡ä»½..."</span>
xtrabackup --prepare --target-dir=<span class="hljs-variable">$FULL_BACKUP_DIR</span> \
    --incremental-dir=<span class="hljs-variable">$INC_BACKUP_DIR2</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆå¹¶å®Œæˆï¼ç°åœ¨å¯ä»¥æ‰§è¡Œæ¢å¤æ“ä½œ..."</span>
</code></pre>
<h3 data-id="heading-9">è¿˜åŸ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœæ­¢MySQL</span>
systemctl stop mysql

<span class="hljs-comment"># 2. æ¸…ç©ºæ•°æ®ç›®å½•ï¼ˆç¡®ä¿å·²å¤‡ä»½é‡è¦æ•°æ®ï¼‰</span>
<span class="hljs-built_in">rm</span> -rf /var/lib/mysql/*

<span class="hljs-comment"># 3. æ‰§è¡Œè¿˜åŸ</span>
xtrabackup --copy-back --target-dir=/backup/mysql/full_20251013_222642

<span class="hljs-comment"># 4. è®¾ç½®æƒé™</span>
<span class="hljs-built_in">chown</span> -R mysql:mysql /var/lib/mysql

<span class="hljs-comment"># 5. å¯åŠ¨MySQL</span>
systemctl start mysql
</code></pre>
<p>è¿™æ ·æˆ‘ä»¬å°±å®Œæˆäº†ä½¿ç”¨å¢é‡ç‰©ç†å¤‡ä»½å·¥å…·ï¼ˆxtrabackupï¼‰ï¼Œä»å¤‡ä»½åˆ°è¿˜åŸçš„å…¨éƒ¨æ“ä½œï¼Œå½“ç„¶è¿™é‡Œåªæ¼”ç¤ºæ­¥éª¤ï¼ŒçœŸå®ç¯å¢ƒè¿˜éœ€è¦è€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œä¼šæ›´å¤æ‚ã€‚</p>
<p><strong>è¿ç»´å°è·¯</strong></p>
<p>ä¸€ä¸ªä¸ä¼šå¼€å‘çš„è¿ç»´ï¼ä¸€ä¸ªè¦å­¦å¼€å‘çš„è¿ç»´ï¼ä¸€ä¸ªå­¦ä¸ä¼šå¼€å‘çš„è¿ç»´ï¼æ¬¢è¿å¤§å®¶éªšæ‰°çš„è¿ç»´ï¼</p>
<p><strong>å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ã€Šè¿ç»´å°è·¯ã€‹è·å–æ›´å¤šå†…å®¹ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¡€èµšä¸äºï¼Java 17 9 ä¸ªç‚¸è£‚ç‰¹æ€§ï¼Œç¨‹åºå‘˜çœ‹å®Œç›´å‘¼ï¼šå¤ªé¦™äº†ï¼]]></title>    <link>https://juejin.cn/post/7575320672570933290</link>    <guid>https://juejin.cn/post/7575320672570933290</guid>    <pubDate>2025-11-22T15:27:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575320672570933290" data-draft-id="7575107094801448966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¡€èµšä¸äºï¼Java 17 9 ä¸ªç‚¸è£‚ç‰¹æ€§ï¼Œç¨‹åºå‘˜çœ‹å®Œç›´å‘¼ï¼šå¤ªé¦™äº†ï¼"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-22T15:27:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SteveCode"/> <meta itemprop="url" content="https://juejin.cn/user/2344592928419111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¡€èµšä¸äºï¼Java 17 9 ä¸ªç‚¸è£‚ç‰¹æ€§ï¼Œç¨‹åºå‘˜çœ‹å®Œç›´å‘¼ï¼šå¤ªé¦™äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2344592928419111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SteveCode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T15:27:40.000Z" title="Sat Nov 22 2025 15:27:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Java 17 æ˜¯ 2021 å¹´ 9 æœˆå‘å¸ƒçš„é•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šé‡è¦çš„ç‰¹æ€§å’Œæ”¹è¿›ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p>
<ol start="0">
<li><strong>Sealed Classesï¼ˆå¯†å°ç±»ï¼‰</strong> ç²¾ç¡®æ§åˆ¶ç±»çš„ç»§æ‰¿å…³ç³»</li>
<li><strong>Recordsï¼ˆè®°å½•ç±»ï¼‰</strong> ç®€åŒ–ä¸å¯å˜æ•°æ®è½½ä½“çš„åˆ›å»º</li>
<li><strong>Pattern Matching for <code>instanceof</code>ï¼ˆæ¨¡å¼åŒ¹é…ï¼‰</strong> ç®€åŒ–ç±»å‹åˆ¤æ–­å’Œè½¬æ¢ä»£ç </li>
<li><strong>Switch Expressionsï¼ˆå¼€å…³è¡¨è¾¾å¼ï¼‰</strong> æ”¯æŒè¿”å›å€¼ï¼Œæ›´ç®€æ´</li>
<li><strong>Text Blocksï¼ˆæ–‡æœ¬å—ï¼‰</strong> å¤šè¡Œå­—ç¬¦ä¸²æ›´ä¼˜é›…</li>
<li><strong>ZGC å’Œ Shenandoah GC</strong> ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨æ­£å¼è½¬æ­£</li>
<li><strong>å…¶ä»–æ”¹è¿›</strong> - <code>var</code> å¢å¼ºã€<code>Stream</code> API ä¼˜åŒ–ã€UTF-8 ä½œä¸ºé»˜è®¤ç¼–ç ç­‰</li>
<li><strong>RandomGenerator</strong> å¢å¼ºçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</li>
<li><strong>NullPointerException</strong> å¢å¼ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯</li>
</ol>
<hr/>
<h3 data-id="heading-0"><strong>1. Sealed Classesï¼ˆå¯†å°ç±»ï¼‰</strong></h3>
<h4 data-id="heading-1">ä»€ä¹ˆæ˜¯å¯†å°ç±»ï¼Ÿ</h4>
<p>å¯†å°ç±»å…è®¸ç²¾ç¡®æ§åˆ¶å“ªäº›ç±»å¯ä»¥ç»§æ‰¿å®ƒï¼Œé˜²æ­¢æ„å¤–çš„ç»§æ‰¿å’Œæ‰©å±•ï¼Œæé«˜ä»£ç çš„å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h4 data-id="heading-2">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>è®¾è®¡ä¸€ä¸ªç±»å±‚æ¬¡ç»“æ„ï¼Œå¹¶ä¸”å¸Œæœ›åªå…è®¸ç‰¹å®šçš„å­ç±»ç»§æ‰¿æ—¶ã€‚</li>
</ul>
<h4 data-id="heading-3">ä»£ç ç»“æ„</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28bf5cbb81d346e59c6259235a181409~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=FUsqDzYKDbVCOJEW49dy26HbleE%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-scala" lang="scala">â€‹
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š å¯†å°ç±» å‰æœŸæŒ‡å®šå“ªäº›ç±»å¯ä»¥ç»§æ‰¿
 *
 * @author Songxianyang
 * @date 2025/11/19 16:32
 */</span>
public <span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Parent</span> <span class="hljs-title">permits</span> <span class="hljs-title">Sub1</span>, <span class="hljs-title">Sub2</span> </span>{
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼šå­ç±»å¿…é¡»æ˜¯ final æˆ– sealed
 * sealedï¼šå­ç±»ä¹Ÿå¯ä»¥æ˜¯å¯†å°çš„ï¼Œç»§ç»­é™åˆ¶ç»§æ‰¿
 *
 * @author Songxianyang
 * @date 2025/11/19 16:33
 */</span>
public <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sub1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Parent</span> </span>{
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š å­ç±»ä¹Ÿå¯ä»¥æ˜¯å¯†å°çš„ï¼Œç»§ç»­é™åˆ¶ç»§æ‰¿
 *
 * @author Songxianyang
 * @date 2025/11/19 16:33
 */</span>
public <span class="hljs-keyword">sealed</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sub2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Parent</span> <span class="hljs-title">permits</span> <span class="hljs-title">Sub2_1</span> </span>{
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * @author Songxianyang
 * @date 2025/11/19 16:37
 */</span>
public <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Sub2_1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Sub2</span> </span>{
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š å­ç±»ä¹Ÿå¯ä»¥æ˜¯å¯†å°çš„ï¼Œç»§ç»­é™åˆ¶ç»§æ‰¿
 * æç¤ºï¼š'Sub3' is not allowed in the sealed hierarchy
 * @author Songxianyang
 * @date 2025/11/19 16:33
 */</span>
<span class="hljs-comment">// public final class Sub3 extends Parent {</span>
<span class="hljs-comment">// }</span>
</code></pre>
<hr/>
<h4 data-id="heading-5">è¿è¡Œç»“æœå›¾</h4>
<p><strong>æ— </strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dd231ad6383488d8747d886814ef549~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=GwIMh5pRpg6T6qtTdI1%2BpnY3AS8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6"><strong>2. Recordsï¼ˆè®°å½•ç±»ï¼‰</strong></h3>
<h4 data-id="heading-7">ä»€ä¹ˆæ˜¯è®°å½•ç±»ï¼Ÿ</h4>
<p><code>record</code> æ˜¯ä¸€ç§ä¸å¯å˜çš„æ•°æ®è½½ä½“ï¼Œç”¨äºç®€æ´åœ°åˆ›å»ºâ€œæ•°æ®å®¹å™¨â€ç±»ï¼ˆå¦‚ DTOã€VOï¼‰ï¼Œè‡ªåŠ¨ç”Ÿæˆ <code>equals()</code>ã€<code>hashCode()</code>ã€<code>toString()</code> å’Œè®¿é—®å™¨æ–¹æ³•ã€‚</p>
<h4 data-id="heading-8">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>éœ€è¦ä¸€ä¸ªç®€å•çš„ç±»æ¥å­˜å‚¨æ•°æ®ï¼Œä¸éœ€è¦å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ—¶ã€‚</li>
</ul>
<h4 data-id="heading-9">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title">Cat</span>(<span class="hljs-params">String name, String id</span>)</span> {
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼šæ“ä½œçºªå½•ç±»
 *
 * @author Songxianyang
 * @date 2025/11/19 16:53
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Main</span> {
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span>(<span class="hljs-params">String[] args</span>)</span> {
 Â  Â  Â  Â Cat cat = <span class="hljs-keyword">new</span> Cat(<span class="hljs-string">"å°çŒ«"</span>, <span class="hljs-string">"1111"</span>);
 Â  Â  Â  Â <span class="hljs-comment">// è®°å½•ç±»çš„å­—æ®µæ˜¯ final çš„ï¼Œä¸èƒ½ä¿®æ”¹</span>
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(cat.id());
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(cat.name());
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(cat);
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(cat.hashCode());<span class="hljs-comment">//25070276</span>
 Â  Â  Â  Â Cat cat1 = <span class="hljs-keyword">new</span> Cat(<span class="hljs-string">"å°çŒ«"</span>, <span class="hljs-string">"1111"</span>);
 Â  Â  Â  Â System.<span class="hljs-keyword">out</span>.println(cat1.hashCode());<span class="hljs-comment">//25070276</span>
 Â  Â  Â  Â <span class="hljs-comment">// equals==true</span>
 Â   }
}
</code></pre>
<hr/>
<h4 data-id="heading-10">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e33aeb4bdd4b467fa21ece29a4d98a7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=sCVkGm1kRUuHxUBENpnT6HO1utk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11"><strong>3. Pattern Matching for <code>instanceof</code></strong> æ¨¡å¼åŒ¹é…</h3>
<h4 data-id="heading-12">ä»€ä¹ˆæ˜¯æ¨¡å¼åŒ¹é…ï¼Ÿ</h4>
<p>ç®€åŒ–äº† <code>instanceof</code> çš„åˆ¤æ–­å’Œç±»å‹è½¬æ¢æµç¨‹ï¼Œç›´æ¥åœ¨ <code>instanceof</code> è¡¨è¾¾å¼ä¸­å£°æ˜å˜é‡ï¼Œé¿å…å†—ä½™ä»£ç ã€‚</p>
<h4 data-id="heading-13">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>éœ€è¦åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼Œå¹¶è¿›è¡Œå¼ºåˆ¶è½¬æ¢æ—¶ã€‚</li>
</ul>
<h4 data-id="heading-14">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * <span class="hljs-doctag">@author</span> <span class="hljs-variable">Songxianyang</span>
 * <span class="hljs-doctag">@date</span> 2025/11/19 17:13
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
 Â  Â  Â  Â <span class="hljs-title class_">String</span> name = <span class="hljs-string">"AAA"</span>;
 Â  Â  Â  Â <span class="hljs-title function_">old</span>(name);
 Â  Â  Â  Â <span class="hljs-title function_">new0</span>(name);
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è€å¼å†™æ³•
 Â  Â  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">obj</span>
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">old</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> obj</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span>){
 Â  Â  Â  Â  Â  <span class="hljs-title class_">String</span> s= (<span class="hljs-title class_">String</span>)obj;
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(s.<span class="hljs-title function_">toLowerCase</span>(<span class="hljs-title class_">Locale</span>.<span class="hljs-property">ROOT</span>));
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Integer</span>){
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">Integer</span> i= (<span class="hljs-title class_">Integer</span>)obj;
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(i*<span class="hljs-number">2</span>);
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ–°å†™æ³•
 Â  Â  * èŠ‚çœä»£ç 
 Â  Â  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">obj</span>
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">new0</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> obj</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">String</span> s){
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(s.<span class="hljs-title function_">toLowerCase</span>(<span class="hljs-title class_">Locale</span>.<span class="hljs-property">ROOT</span>));
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Integer</span> i){
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(i*<span class="hljs-number">2</span>);
 Â  Â  Â   }
 Â   }
}
â€‹
</code></pre>
<hr/>
<h4 data-id="heading-15">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6575016a68b54343922b71149e9a8168~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=jD5z2tXqkrFbRr9fyQ3sRZpTqGU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16"><strong>4. Switch Expressions</strong></h3>
<h4 data-id="heading-17">ä»€ä¹ˆæ˜¯ Switch è¡¨è¾¾å¼ï¼Ÿ</h4>
<p><code>switch</code> è¯­å¥å¯ä»¥ä½œä¸ºè¡¨è¾¾å¼ä½¿ç”¨ï¼Œç›´æ¥è¿”å›å€¼ï¼Œå¹¶ä¸”æ”¯æŒ <code>-&gt;</code> è¯­æ³•ï¼Œç®€åŒ–ä»£ç ç»“æ„ã€‚</p>
<h4 data-id="heading-18">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>éœ€è¦æ ¹æ®æ¡ä»¶è¿”å›ä¸åŒçš„å€¼æ—¶ã€‚</li>
<li>æ ¹æ®ç±»å‹è®¡ç®—ç»“æœã€æ˜ å°„æšä¸¾å€¼ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-19">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * <span class="hljs-doctag">@author</span> <span class="hljs-variable">Songxianyang</span>
 * <span class="hljs-doctag">@date</span> 2025/11/19 17:44
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
 Â  Â  Â  Â <span class="hljs-title class_">Integer</span> day = <span class="hljs-number">2</span>;
 Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title function_">getDayOfWeekNew</span>(day));
 Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-title function_">getDayOfWeekOld</span>(day));
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDayOfWeekOld</span>(<span class="hljs-params">Integer i</span>){
 Â  Â  Â  Â <span class="hljs-title class_">String</span> res = <span class="hljs-string">""</span>;
 Â  Â  Â  Â <span class="hljs-keyword">switch</span> (i){
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: res=<span class="hljs-string">"Monday"</span>; <span class="hljs-keyword">break</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: res=<span class="hljs-string">"Tuesday"</span>; <span class="hljs-keyword">break</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">default</span>: res=<span class="hljs-string">"æœªçŸ¥"</span>; <span class="hljs-keyword">break</span>;
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-keyword">return</span> res;
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getDayOfWeekNew</span>(<span class="hljs-params">Integer i</span>){
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span> (i){
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">1</span> -&gt; <span class="hljs-string">"Monday"</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">case</span> <span class="hljs-number">2</span> -&gt; <span class="hljs-string">"Tuesday"</span>;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"æœªçŸ¥"</span>;
 Â  Â  Â   };
 Â   }
}
</code></pre>
<hr/>
<h4 data-id="heading-20">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/620ae6f671204e4a86b8755cbdc6ac5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=VrKrPN98jnBeYBHI40OBBngKZLM%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-21"><strong>5. Text Blocksï¼ˆæ–‡æœ¬å—ï¼‰</strong></h3>
<h4 data-id="heading-22">ä»€ä¹ˆæ˜¯æ–‡æœ¬å—ï¼Ÿ</h4>
<p>ç”¨äºåˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼Œé¿å…æ‰‹åŠ¨æ·»åŠ æ¢è¡Œç¬¦å’Œè½¬ä¹‰å­—ç¬¦ï¼Œè®©ä»£ç æ›´æ¸…æ™°ã€‚</p>
<h4 data-id="heading-23">ä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>éœ€è¦å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²æ—¶ã€‚</li>
<li>SQL æŸ¥è¯¢è¯­å¥ã€JSON æ•°æ®ç­‰ã€‚</li>
</ul>
<h4 data-id="heading-24">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * @author Songxianyang
 * @date 2025/11/21 11:15
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> void main(<span class="hljs-type">String</span>[] args) {
 Â  Â  Â  Â <span class="hljs-type">String</span> old<span class="hljs-operator">=</span><span class="hljs-string">"SELECT<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"<span class="hljs-subst">\t</span>`Host`ï¼Œ`User`,<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"<span class="hljs-subst">\t</span>Select_priv,<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"<span class="hljs-subst">\t</span>Show_db_priv,<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"<span class="hljs-subst">\t</span>Show_view_priv <span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"FROM<span class="hljs-subst">\n</span>"</span> <span class="hljs-operator">+</span>
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">"<span class="hljs-subst">\t</span>`user`;"</span>;
â€‹
 Â  Â  Â  Â <span class="hljs-type">String</span> new1<span class="hljs-operator">=</span> <span class="hljs-string">"""
 Â  Â  Â  Â  Â  Â  Â  Â SELECT
 Â  Â  Â  Â  Â  Â  Â       `Host`ï¼Œ`User`,
 Â  Â  Â  Â  Â  Â  Â       Select_priv,
 Â  Â  Â  Â  Â  Â  Â       Show_db_priv,
 Â  Â  Â  Â  Â  Â  Â       Show_view_priv
 Â  Â  Â  Â  Â  Â  Â  Â FROM
 Â  Â  Â  Â  Â  Â  Â       `user`;
 Â  Â  Â  Â  Â  Â  Â  Â """</span>;
â€‹
 Â  Â  Â  Â <span class="hljs-type">System</span>.out.println(old);
 Â  Â  Â  Â <span class="hljs-type">System</span>.out.println(<span class="hljs-string">"---------------"</span>);
 Â  Â  Â  Â <span class="hljs-type">System</span>.out.println(new1);
 Â   }
}
</code></pre>
<hr/>
<h4 data-id="heading-25">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a15342612b3542628b0531f314c52f4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=mnFlFBd%2BmrRGwm0UuxzFFAyEg6E%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-26"><strong>6. ZGC å’Œ Shenandoah GC</strong></h3>
<h4 data-id="heading-27">ä»€ä¹ˆæ˜¯ ZGC / Shenandoah GCï¼Ÿ</h4>
<ul>
<li><strong>ZGC</strong>ï¼šä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨ï¼Œç›®æ ‡æ˜¯å°† GC åœé¡¿æ—¶é—´æ§åˆ¶åœ¨æ¯«ç§’çº§åˆ«ï¼Œé€‚åˆå¯¹å“åº”æ—¶é—´è¦æ±‚é«˜çš„åº”ç”¨ã€‚</li>
<li><strong>Shenandoah GC</strong>ï¼šåŒæ ·æ˜¯ä½å»¶è¿Ÿ GCï¼Œé€šè¿‡å¹¶å‘å‹ç¼©æŠ€æœ¯å‡å°‘åœé¡¿æ—¶é—´ã€‚</li>
</ul>
<h4 data-id="heading-28">å¯ç”¨æ–¹å¼</h4>
<p>åœ¨ JVM å¯åŠ¨å‚æ•°ä¸­æŒ‡å®šï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># ä½¿ç”¨ ZGC</span>
java -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseZGC</span> -jar your-app.jar
â€‹
<span class="hljs-comment"># ä½¿ç”¨ Shenandoah GC</span>
java -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseShenandoahGC</span> -jar your-app.jar
</code></pre>
<hr/>
<h3 data-id="heading-29"><strong>7. å…¶ä»–é‡è¦æ”¹è¿›</strong></h3>
<h4 data-id="heading-30"><code>var</code> å…³é”®å­—å¢å¼ºã€<code>toList()</code> æ–¹æ³•</h4>
<p><code>var</code> å¯ä»¥ç”¨äº lambda è¡¨è¾¾å¼çš„å‚æ•°ç±»å‹æ¨æ–­ã€æ–°å¢ <code>toList()</code> æ–¹æ³•ï¼Œæ›´æ–¹ä¾¿åœ°å°†æµè½¬æ¢ä¸ºåˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * @author Songxianyang
 * @date 2025/11/21 11:27
 */</span>
public class <span class="hljs-selector-tag">Main</span> {
 Â  Â public static void <span class="hljs-selector-tag">main</span>(String[] args) {
 Â  Â  Â  Â List&lt;Integer&gt; list = Arrays<span class="hljs-selector-class">.asList</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("Java <span class="hljs-number">17</span> ä¹‹å‰");
 Â  Â  Â  Â list<span class="hljs-selector-class">.forEach</span>((Integer s) -&gt; System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(s));
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("Java <span class="hljs-number">17</span> ä¹‹å");
 Â  Â  Â  Â list<span class="hljs-selector-class">.forEach</span>((var s)-&gt; System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(s));
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("æœ¬äººå¸¸ç”¨");
 Â  Â  Â  Â list<span class="hljs-selector-class">.forEach</span>(s-&gt; System.out.println(s));
â€‹
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("---------------------");
 Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–¹ä¾¿åœ°å°†æµè½¬æ¢ä¸ºåˆ—è¡¨</span>
 Â  Â  Â  Â List&lt;Integer&gt; collectOld = list<span class="hljs-selector-class">.stream</span>()<span class="hljs-selector-class">.filter</span>(i -&gt; i &gt; <span class="hljs-number">1</span>)<span class="hljs-selector-class">.collect</span>(Collectors.toList());
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(collectOld);
 Â  Â  Â  Â <span class="hljs-comment">// æ›¿ä»£ collect(Collectors.toList())</span>
 Â  Â  Â  Â List&lt;Integer&gt; collectNew = list<span class="hljs-selector-class">.stream</span>()<span class="hljs-selector-class">.filter</span>(i -&gt; i &gt; <span class="hljs-number">1</span>)<span class="hljs-selector-class">.toList</span>();
 Â  Â  Â  Â System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(collectNew);
â€‹
 Â   }
}
</code></pre>
<hr/>
<h4 data-id="heading-31">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9742f987b4924babaf2fa04d30851b60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=lAMAjM5M7IJ2EmaLyoblqf%2FlUEU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-32"><strong>8.RandomGenerator</strong> å¢å¼ºçš„ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</h3>
<h4 data-id="heading-33">ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ ‡å‡†éšæœºæ•°ç”Ÿæˆç®—æ³•åç§°å¸¸é‡
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RandomGeneratorConstants</span> {
â€‹
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title function_">RandomGeneratorConstants</span><span class="hljs-params">()</span> {} <span class="hljs-comment">// é˜²æ­¢å®ä¾‹åŒ–</span>
â€‹
 Â  Â <span class="hljs-comment">// JDK 17+ æ ‡å‡†ç®—æ³•</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L32X64_MIX_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L32X64MixRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">XOROSHIRO_128_PLUS_PLUS</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Xoroshiro128PlusPlus"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">XOSHIRO_256_PLUS_PLUS</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Xoshiro256PlusPlus"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L64X128_MIX_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L64X128MixRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L64X128_STAR_STAR_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L64X128StarStarRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L64X256_MIX_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L64X256MixRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L128X128_MIX_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L128X128MixRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">L128X256_MIX_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"L128X256MixRandom"</span>;
â€‹
 Â  Â <span class="hljs-comment">// ä¼ ç»Ÿ/å®‰å…¨ç®—æ³•</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SECURE_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SecureRandom"</span>;
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LEGACY_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Random"</span>; <span class="hljs-comment">// java.util.Random</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SPLITTABLE_RANDOM</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SplittableRandom"</span>;
â€‹
 Â  Â <span class="hljs-comment">// è·å–é»˜è®¤ç®—æ³•ï¼ˆJDK 17+ é»˜è®¤æ˜¯ L32X64MixRandomï¼‰</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RandomGenerator <span class="hljs-title function_">getDefault</span><span class="hljs-params">()</span> {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> RandomGenerator.getDefault();
 Â   }
}
<span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š éšæœºæ•°ç”Ÿæˆ
 *
 * <span class="hljs-doctag">@author</span> Songxianyang
 * <span class="hljs-doctag">@date</span> 2025/11/21 15:34
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
 Â  Â  Â  Â <span class="hljs-type">RandomGenerator</span> <span class="hljs-variable">generator</span> <span class="hljs-operator">=</span> RandomGenerator.of(L64X128_MIX_RANDOM);
 Â  Â  Â  Â System.out.println(<span class="hljs-string">"éšæœºç”Ÿæˆæ•´æ•°ï¼š"</span>+generator.nextInt());
 Â  Â  Â  Â System.out.println(<span class="hljs-string">"éšæœºç”Ÿæˆå°æ•°ï¼š"</span>+generator.nextInt());
 Â  Â  Â  Â System.out.println(<span class="hljs-string">"éšæœºç”ŸæˆèŒƒå›´å†…çš„éšæœºæ•° 0-100"</span>);
â€‹
 Â  Â  Â  Â <span class="hljs-type">int</span> <span class="hljs-variable">nextInt</span> <span class="hljs-operator">=</span> generator.nextInt(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>);
 Â  Â  Â  Â System.out.println(nextInt);
â€‹
 Â   }
}
</code></pre>
<h4 data-id="heading-34">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c4b01428a2d84aee9bf9ed5fb3d37038~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=QN%2FXhdcqKOdJwPGNG3fXF1r4Oho%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-35">9.<strong>NullPointerException</strong> å¢å¼ºçš„ç©ºæŒ‡é’ˆå¼‚å¸¸ä¿¡æ¯</h2>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * åŠŸèƒ½æè¿°ï¼š
 *
 * <span class="hljs-doctag">@author</span> <span class="hljs-variable">Songxianyang</span>
 * <span class="hljs-doctag">@date</span> 2025/11/21 16:46
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> {
 Â  Â <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
 Â  Â  Â  Â <span class="hljs-title class_">String</span> name;
 Â  Â  Â  Â <span class="hljs-title class_">Address</span> address;
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// getters and setters</span>
 Â  Â  Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getName</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> name; }
 Â  Â  Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">Address</span> <span class="hljs-title function_">getAddress</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> address; }
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Address</span> {
 Â  Â  Â  Â <span class="hljs-title class_">String</span> id;
 Â  Â  Â  Â <span class="hljs-title class_">String</span> city;
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getStreet</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> id; }
 Â  Â  Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getCity</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> city; }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ä»¥å‰çš„å¼‚å¸¸
 Â  Â  * Exception in thread "main" java.lang.NullPointerException
 Â  Â  * Â  Â  Â  Â  at Main.main(Main.java:48)
 Â  Â  * ç°åœ¨çš„å¼‚å¸¸ï¼šJava17ä¸­å±•ç¤ºæ›´è¯¦ç»†çš„å¼‚å¸¸ã€‚
 Â  Â  * Exception in thread "main" java.lang.NullPointerException: Cannot invoke "nullpointer.Main$Address.getCity()" because the return value of "nullpointer.Main$Person.getAddress()" is null
 Â  Â  *  at nullpointer.Main.main(Main.java:48)
 Â  Â  * <span class="hljs-doctag">@param</span> <span class="hljs-variable">args</span>
 Â  Â  */</span>
â€‹
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
 Â  Â  Â  Â <span class="hljs-title class_">Person</span> person = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();
 Â  Â  Â  Â <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(person.<span class="hljs-title function_">getAddress</span>().<span class="hljs-title function_">getCity</span>());
 Â   }
â€‹
 Â  Â 
}
</code></pre>
<h4 data-id="heading-36">è¿è¡Œç»“æœå›¾</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ba5066614224838b402216db64f2b89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3RldmVDb2Rl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764430060&amp;x-signature=VBTs%2BX4C%2Fj%2FF6L8t2hYMF1SSg%2BI%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot 3.2 æ€§èƒ½ç¿»å€ç§˜è¯€ï¼šè¿™5ä¸ªé…ç½®ä¼˜åŒ–è®©ä½ çš„åº”ç”¨èµ·é£ğŸš€]]></title>    <link>https://juejin.cn/post/7575152891955200000</link>    <guid>https://juejin.cn/post/7575152891955200000</guid>    <pubDate>2025-11-23T00:17:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955200000" data-draft-id="7575062687627247616" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot 3.2 æ€§èƒ½ç¿»å€ç§˜è¯€ï¼šè¿™5ä¸ªé…ç½®ä¼˜åŒ–è®©ä½ çš„åº”ç”¨èµ·é£ğŸš€"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-23T00:17:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot 3.2 æ€§èƒ½ç¿»å€ç§˜è¯€ï¼šè¿™5ä¸ªé…ç½®ä¼˜åŒ–è®©ä½ çš„åº”ç”¨èµ·é£ğŸš€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T00:17:53.000Z" title="Sun Nov 23 2025 00:17:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Spring Boot 3.2 æ€§èƒ½ç¿»å€ç§˜è¯€ï¼šè¿™5ä¸ªé…ç½®ä¼˜åŒ–è®©ä½ çš„åº”ç”¨èµ·é£ğŸš€</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Spring Boot 3.2 ä½œä¸º Spring ç”Ÿæ€ç³»ç»Ÿçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¸ä»…å¸¦æ¥äº†è®¸å¤šæ–°ç‰¹æ€§ï¼Œè¿˜åœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢å®ç°äº†æ˜¾è‘—çªç ´ã€‚ç„¶è€Œï¼Œé»˜è®¤é…ç½®å¾€å¾€æ— æ³•å……åˆ†å‘æŒ¥å…¶æ½œåŠ›ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ <strong>5 ä¸ªå…³é”®é…ç½®ä¼˜åŒ–</strong>ï¼Œå¸®åŠ©å¼€å‘è€…è§£é” Spring Boot 3.2 çš„æè‡´æ€§èƒ½ï¼Œå®ç°åº”ç”¨ååé‡å’Œå“åº”æ—¶é—´çš„åŒé‡æå‡ã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. å¯ç”¨è™šæ‹Ÿçº¿ç¨‹ï¼ˆVirtual Threadsï¼‰</h3>
<p>Spring Boot 3.2 å…¨é¢æ”¯æŒ Java 21 çš„è™šæ‹Ÿçº¿ç¨‹ï¼ˆProject Loomï¼‰ï¼Œè¿™æ˜¯é¢ è¦†ä¼ ç»Ÿçº¿ç¨‹æ¨¡å‹çš„é‡å¤§åˆ›æ–°ã€‚</p>
<h4 data-id="heading-4"><strong>ä¼˜åŒ–åŸç†</strong></h4>
<p>è™šæ‹Ÿçº¿ç¨‹é€šè¿‡è½»é‡çº§çš„ç”¨æˆ·æ€çº¿ç¨‹æ›¿ä»£ä¼ ç»Ÿçš„å¹³å°çº¿ç¨‹ï¼Œé¿å…äº†çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ã€‚åœ¨ I/Oå¯†é›†å‹åœºæ™¯ä¸‹ï¼Œè™šæ‹Ÿçº¿ç¨‹å¯ä»¥è½»æ¾æ”¯æŒæ•°ç™¾ä¸‡çº§å¹¶å‘è¿æ¥ã€‚</p>
<h4 data-id="heading-5"><strong>é…ç½®æ–¹æ³•</strong></h4>
<pre><code class="hljs language-properties" lang="properties"># application.properties
spring.threads.virtual.enabled=true
</code></pre>
<p>æˆ–é€šè¿‡ç¼–ç¨‹æ–¹å¼ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {
    <span class="hljs-keyword">return</span> protocolHandler -&gt; protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());
}
</code></pre>
<h4 data-id="heading-6"><strong>å®æµ‹æ•ˆæœ</strong></h4>
<ul>
<li>WebFlux åœºæ™¯ä¸‹ QPS æå‡ <strong>40%+</strong></li>
<li>JDBC è¿æ¥æ± ç­‰å¾…æ—¶é—´å‡å°‘ <strong>60%</strong></li>
</ul>
<blockquote>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼šéœ€æ­é…æ”¯æŒå¼‚æ­¥é©±åŠ¨çš„æ•°æ®åº“è¿æ¥æ± ï¼ˆå¦‚ HikariCPï¼‰ä½¿ç”¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">2. JVM AOTï¼ˆAhead-of-Timeï¼‰ç¼–è¯‘ä¼˜åŒ–</h3>
<p>Spring Boot 3.2 + GraalVM Native Image = âš¡ï¸æè‡´å¯åŠ¨é€Ÿåº¦</p>
<h4 data-id="heading-8"><strong>ä¼˜åŒ–åŸç†</strong></h4>
<p>AOTç¼–è¯‘å°†å­—èŠ‚ç æå‰è½¬æ¢ä¸ºæœºå™¨ç ï¼Œæ¶ˆé™¤ç±»åŠ è½½ã€JITç¼–è¯‘ç­‰å¼€é”€ã€‚å¯¹äºServerlesså’Œå®¹å™¨åŒ–åœºæ™¯å°¤ä¸ºé‡è¦ã€‚</p>
<h4 data-id="heading-9"><strong>å®æ–½æ­¥éª¤</strong></h4>
<ol>
<li>æ·»åŠ ä¾èµ–ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.experimental<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-aot<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>${spring-aot.version}<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<ol start="2">
<li>Mavenæ„å»ºå‘½ä»¤ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">mvn -Pnative spring-boot:build-image
</code></pre>
<h4 data-id="heading-10"><strong>æ€§èƒ½å¯¹æ¯”</strong></h4>




















<table><thead><tr><th>Metric</th><th>JVMæ¨¡å¼</th><th>Nativeæ¨¡å¼</th></tr></thead><tbody><tr><td>Startup Time</td><td>2.1s</td><td><strong>0.05s</strong></td></tr><tr><td>Memory Usage</td><td>256MB</td><td><strong>85MB</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">3. HTTP/2ä¸TLSç¡¬ä»¶åŠ é€Ÿé…ç½®</h3>
<h4 data-id="heading-12">HTTP/2æœåŠ¡ç«¯æ¨é€æ¿€æ´»</h4>
<pre><code class="hljs language-properties" lang="properties">server.http2.enabled=true
server.compression.enabled=true
server.compression.mime-types=text/html,text/css,application/javascript
</code></pre>
<h4 data-id="heading-13">OpenSSLç¡¬ä»¶åŠ é€Ÿï¼ˆéœ€Linuxç¯å¢ƒï¼‰:</h4>
<pre><code class="hljs language-bash" lang="bash">-Djdk.tls.server.protocols=TLSv1.3 
-Djdk.tls.client.protocols=TLSv1.3
-Dssl.KeyManagerFactory.algorithm=PKIX
-Dssl.SignatureScheme=ecdsa_secp256r1_sha256
</code></pre>
<hr/>
<h3 data-id="heading-14">4. Reactiveç¼–ç¨‹æ·±åº¦è°ƒä¼˜</h3>
<h4 data-id="heading-15">WebFluxèƒŒå‹æ§åˆ¶ç­–ç•¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean</span>
<span class="hljs-keyword">public</span> WebClient <span class="hljs-title function_">webClient</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> WebClient.builder()
        .clientConnector(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ReactorClientHttpConnector</span>(
            HttpClient.create()
                .responseTimeout(Duration.ofMillis(<span class="hljs-number">500</span>))
                .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, <span class="hljs-number">200</span>)
        ))
        .build();
}
</code></pre>
<h4 data-id="heading-16">R2DBCè¿æ¥æ± å‚æ•°é»„é‡‘æ³•åˆ™ï¼š</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">r2dbc:</span>
    <span class="hljs-attr">pool:</span>
      <span class="hljs-attr">max-size:</span> <span class="hljs-string">CPU_CORES</span> <span class="hljs-string">*</span> <span class="hljs-number">4</span> 
      <span class="hljs-attr">initial-size:</span> <span class="hljs-string">CPU_CORES</span> <span class="hljs-string">/</span>  <span class="hljs-string">32ms</span>   
</code></pre>
<hr/>
<h3 data-id="heading-17">5. Micrometerå®æ—¶ç›‘æ§ä¸åŠ¨æ€è°ƒå‚</h3>
<h4 data-id="heading-18">Prometheus+Grafanaç›‘æ§æ¨¡æ¿å…³é”®æŒ‡æ ‡ï¼š</h4>
<ul>
<li><code>http.server.reqeusts.active</code> (è¯·æ±‚å †ç§¯é¢„è­¦)</li>
<li><code>jvm.gc.pause</code> (è¶…è¿‡10msè§¦å‘å‘Šè­¦)</li>
</ul>
<h4 data-id="heading-19">Spring ActuatoråŠ¨æ€æ—¥å¿—çº§åˆ«è°ƒæ•´APIç¤ºä¾‹ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash">POST /actuator/loggers/com.example 
{<span class="hljs-string">"configuredLevel"</span>: <span class="hljs-string">"DEBUG"</span>}
</code></pre>
<h2 data-id="heading-20">ç»“è®º</h2>
<p>é€šè¿‡è™šæ‹Ÿçº¿ç¨‹ã€AOTç¼–è¯‘ã€HTTP/2ä¼˜åŒ–ã€Reactiveè°ƒä¼˜å’Œå®æ—¶ç›‘æ§è¿™äº”æŠŠåˆ©å‰‘ï¼Œå¼€å‘è€…å¯ä»¥å……åˆ†é‡Šæ”¾SpringBoot3çš„æ€§èƒ½æ½œåŠ›ã€‚å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é€æ­¥éªŒè¯è¿™äº›é…ç½®çš„ç»„åˆæ•ˆæœï¼Œæ ¹æ®å®é™…è´Ÿè½½ç‰¹ç‚¹è¿›è¡Œç²¾ç»†è°ƒæ•´ã€‚è®°ä½ï¼šæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æœ€ä¼˜é…ç½®ï¼Œåªæœ‰æŒç»­ä¼˜åŒ–çš„å·¥ç¨‹å®è·µæ‰èƒ½çœŸæ­£è®©åº”ç”¨"èµ·é£"ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦æ™ºèƒ½ä½“æ¡†æ¶DeepAgentå‰–æ]]></title>    <link>https://juejin.cn/post/7575152891955249152</link>    <guid>https://juejin.cn/post/7575152891955249152</guid>    <pubDate>2025-11-23T00:55:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955249152" data-draft-id="7575152891955232768" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦æ™ºèƒ½ä½“æ¡†æ¶DeepAgentå‰–æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-23T00:55:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ·±åº¦å­¦ä¹ æœºå™¨"/> <meta itemprop="url" content="https://juejin.cn/user/486421344552179"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦æ™ºèƒ½ä½“æ¡†æ¶DeepAgentå‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/486421344552179/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ·±åº¦å­¦ä¹ æœºå™¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T00:55:04.000Z" title="Sun Nov 23 2025 00:55:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“æˆ‘ä»¬è°ˆè®º AI Agent æ—¶ï¼Œå¤§å¤šæ•°å¼€å‘è€…æƒ³åˆ°çš„æ˜¯ä¸€ä¸ªç®€å•çš„å·¥å…·è°ƒç”¨å¾ªç¯ï¼šLLM ç”Ÿæˆå·¥å…·è°ƒç”¨ï¼Œæ‰§è¡Œå·¥å…·ï¼Œå°†ç»“æœè¿”å›ç»™ LLMï¼Œç»§ç»­ä¸‹ä¸€è½®ã€‚è¿™ç§æµ…å±‚æ¶æ„åœ¨å¤„ç†ç®€å•ä»»åŠ¡æ—¶è¡¨ç°è‰¯å¥½ï¼Œä½†é¢å¯¹å¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµæ—¶ï¼Œå°±ä¼šæš´éœ²å‡ºè‡´å‘½ç¼ºé™·ï¼šæ— æ³•æœ‰æ•ˆè§„åˆ’ã€ä¸Šä¸‹æ–‡ç®¡ç†æ··ä¹±ã€ç¼ºä¹è´¨é‡å®¡æŸ¥æœºåˆ¶ã€‚å°½ç®¡æœ‰ç±»ä¼¼ä¸<code>Langgraph</code>è¿™æ ·çš„å·¥ä½œæµæ¡†æ¶ï¼Œèƒ½å¤Ÿå…å»å¼€å‘è€…åœ¨ç¼–æ’workflowä¸Šé¢çš„è€—æ—¶ï¼Œä½†æ˜¯Agentçš„æ ¸å¿ƒèƒ½åŠ›ï¼Œæ¯”å¦‚èŠ‚ç‚¹å’Œå·¥å…·ï¼Œä»éœ€è¦è‡ªè¡Œå®ç°ã€‚</p>
<p>LangChain å›¢é˜Ÿç ”ç©¶äº†<code>Claude Code</code>ã€<code>OpenAI Deep Research</code>ã€<code>Manus</code>ç­‰çœŸæ­£åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è§£å†³å¤æ‚é—®é¢˜çš„ç³»ç»Ÿï¼Œæç‚¼å‡ºäº†å››ä¸ªå…³é”®çš„ç‰¹å¾ï¼š</p>
<ol>
<li>
<p><strong>è¯¦ç»†çš„ç³»ç»Ÿæç¤ºè¯</strong>ï¼šåŒ…å«å·¥å…·ä½¿ç”¨æŒ‡å—å’Œå°‘æ ·æœ¬ç¤ºä¾‹çš„é•¿æç¤ºã€‚</p>
</li>
<li>
<p><strong>è§„åˆ’å·¥å…·</strong>ï¼šå¦‚<code>Claude Code</code>çš„Todo Listï¼Œç”¨äºä»»åŠ¡åˆ†è§£å’Œè¿›åº¦è¿½è¸ªã€‚</p>
</li>
<li>
<p><strong>å­æ™ºèƒ½ä½“å§”æ‰˜</strong>ï¼šå°†å¤æ‚ä»»åŠ¡æ‹†åˆ†ç»™ä¸“æ³¨çš„å­æ™ºèƒ½ä½“å¤„ç†ã€‚</p>
</li>
<li>
<p><strong>æ–‡ä»¶ç³»ç»Ÿè®¿é—®</strong>ï¼šä½œä¸ºå…±äº«å·¥ä½œç©ºé—´å’Œé•¿æœŸè®°å¿†çš„è½½ä½“ã€‚</p>
</li>
</ol>
<p><code>DeepAgent</code>æ­£æ˜¯å°†è¿™äº›ç‰¹å¾è¿›è¡ŒæŠ½è±¡åï¼Œç³»ç»ŸåŒ–ã€æ¡†æ¶åŒ–çš„äº§ç‰©ï¼Œå®ƒä¸æ˜¯ç®€å•çš„å·¥å…·è°ƒç”¨å¾ªç¯ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„<code>Agent Harness</code>ï¼Œå³æ™ºèƒ½ä½“å·¥å…·å¥—ä»¶ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3bf01a98ee241d08756ae458928fabb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764464104&amp;x-signature=95mZ5Rb5fAcSdoc0GK5RyHGXL88%3D" alt="DeepAgentæ ¸å¿ƒæ¶æ„" loading="lazy"/></p>
<h2 data-id="heading-0">æ ¸å¿ƒæ¶æ„</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Agent Harness</h3>
<p><code>DeepAgent</code>å°†è‡ªå·±å®šä½ä¸º<code>Agent Harness</code>ï¼Œå®ƒæœ¬è´¨ä¸Šä»æ˜¯å·¥å…·è°ƒç”¨å¾ªç¯ï¼Œä½†é›†æˆäº†è®©æ™ºèƒ½ä½“<strong>æ·±åº¦æ€è€ƒ</strong>çš„æ ¸å¿ƒèƒ½åŠ›ã€‚ä¸ä¼ ç»Ÿæ¡†æ¶ä¸åŒï¼Œ<code>DeepAgent</code>é€šè¿‡å†…ç½®å·¥å…·å’Œèƒ½åŠ›ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€ŒéåŸºç¡€è®¾æ–½æ­å»ºã€‚</p>
<h3 data-id="heading-2">æ¨¡å—åŒ–çš„ä¸­é—´ä»¶</h3>
<p><code>DeepAgent</code>é‡‡ç”¨å¯ç»„åˆçš„ä¸­é—´ä»¶æ¶æ„ï¼Œæ¯ä¸ªä¸­é—´ä»¶è´Ÿè´£ä¸€ä¸ªç‹¬ç«‹çš„èƒ½åŠ›åŸŸã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/beb6dd52c2fe4ed2ae8fe0f26bba9bc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rex5bqm5a2m5Lmg5py65Zmo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764464104&amp;x-signature=aCqRVfxjsHWgcaAB6Cq%2BNtMeu%2F8%3D" alt="å†…ç½®çš„ä¸­é—´ä»¶" loading="lazy"/></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> deepagents <span class="hljs-keyword">import</span> create_deep_agent
<span class="hljs-keyword">from</span> deepagents.middleware <span class="hljs-keyword">import</span> TodoListMiddleware, FilesystemMiddleware, SubAgentMiddleware

<span class="hljs-comment"># é»˜è®¤æƒ…å†µä¸‹ï¼Œcreate_deep_agent ä¼šè‡ªåŠ¨é™„åŠ ä¸‰å¤§æ ¸å¿ƒä¸­é—´ä»¶</span>
agent = create_deep_agent(
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    <span class="hljs-comment"># ä»¥ä¸‹ä¸­é—´ä»¶ä¼šè‡ªåŠ¨å¯ç”¨ï¼š</span>
    <span class="hljs-comment"># - TodoListMiddleware: æä¾› write_todos è§„åˆ’å·¥å…·</span>
    <span class="hljs-comment"># - FilesystemMiddleware: æä¾› 6 ä¸ªæ–‡ä»¶ç³»ç»Ÿå·¥å…·</span>
    <span class="hljs-comment"># - SubAgentMiddleware: æä¾› task å·¥å…·ç”¨äºå­æ™ºèƒ½ä½“å§”æ‰˜</span>
)
</code></pre>
<p>è¿™ç§è®¾è®¡çš„ä¼˜åŠ¿åœ¨äºå¯ç»„åˆæ€§ï¼Œè®©å¼€å‘è€…å¯ä»¥æ ¹æ®éœ€æ±‚é€‰æ‹©å¯ç”¨ç‰¹å®šä¸­é—´ä»¶ï¼Œæˆ–æ·»åŠ è‡ªå®šä¹‰ä¸­é—´ä»¶æ‰©å±•èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">æ–‡ä»¶ç³»ç»Ÿ</h2>
<h3 data-id="heading-4">å…­å¤§æ–‡ä»¶ç³»ç»Ÿå·¥å…·</h3>
<p><code>DeepAgent</code>æä¾›äº†å®Œæ•´çš„æ–‡ä»¶ç³»ç»Ÿæ“ä½œèƒ½åŠ›ï¼Œè¿™æ˜¯å…¶åŒºåˆ«äºæµ…å±‚ Agent çš„å…³é”®ç‰¹æ€§ï¼š</p>








































<table><thead><tr><th>å·¥å…·</th><th>åŠŸèƒ½</th><th>ç”¨é€”</th></tr></thead><tbody><tr><td><code>ls</code></td><td>åˆ—å‡ºæ–‡ä»¶åŠå…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å¤§å°å’Œä¿®æ”¹æ—¶é—´ç­‰</td><td>æ¢ç´¢ç›®å½•ç»“æ„</td></tr><tr><td><code>read_file</code></td><td>è¯»å–æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒè¡Œå·å’Œåˆ†é¡µ</td><td>åˆ†å—è¯»å–å¤§æ–‡ä»¶</td></tr><tr><td><code>write_file</code></td><td>åˆ›å»ºæ–°æ–‡ä»¶</td><td>ä¿å­˜ä¸­é—´ç»“æœ</td></tr><tr><td><code>edit_file</code></td><td>ç²¾ç¡®å­—ç¬¦ä¸²æ›¿æ¢</td><td>æ›´æ–°å·²æœ‰æ–‡ä»¶</td></tr><tr><td><code>glob</code></td><td>æ¨¡å¼åŒ¹é…æŸ¥æ‰¾æ–‡ä»¶</td><td>æ‰¹é‡æŸ¥æ‰¾æ–‡ä»¶</td></tr><tr><td><code>grep</code></td><td>æœç´¢æ–‡ä»¶å†…å®¹</td><td>ä»£ç æœç´¢ï¼Œå†…å®¹å®šä½</td></tr></tbody></table>
<h3 data-id="heading-5">è‡ªåŠ¨å‹ç¼©æœºåˆ¶</h3>
<p>å½“å·¥å…·è¿”å›ç»“æœè¶…å‡ºtokené˜ˆå€¼æ—¶ï¼Œ<code>DeepAgent</code>ä¼šè‡ªåŠ¨å°†å…¶è½¬å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œé˜²æ­¢ä¸Šä¸‹æ–‡çª—å£é¥±å’Œï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ªä»£ç ç¤ºä¾‹ï¼šè‡ªåŠ¨é©±é€é€»è¾‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_tool_result</span>(<span class="hljs-params">result, threshold=<span class="hljs-number">2000</span></span>):
    <span class="hljs-keyword">if</span> count_tokens(result) &gt; threshold:
        file_path = <span class="hljs-string">f"/temp/tool_result_<span class="hljs-subst">{uuid4()}</span>.txt"</span>
        write_file(file_path, result)
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"Large result saved to <span class="hljs-subst">{file_path}</span>. Use read_file to access."</span>
    <span class="hljs-keyword">return</span> result
</code></pre>
<p>è¿™ç¡®ä¿äº†å³ä½¿è°ƒç”¨è¿”å›æµ·é‡æ•°æ®çš„å·¥å…·ï¼ˆå¦‚Web æœç´¢ã€æ•°æ®åº“æŸ¥è¯¢ç­‰ï¼‰ï¼Œæ™ºèƒ½ä½“ä¹Ÿèƒ½é€šè¿‡æ–‡ä»¶ç³»ç»Ÿåˆ†å—è¯»å–ï¼Œè€Œä¸ä¼šå¯¼è‡´ä¸Šä¸‹æ–‡å´©æºƒã€‚</p>
<h2 data-id="heading-6">çµæ´»çš„æŒä¹…åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-7">BackendProtocol åè®®è®¾è®¡</h3>
<p><code>DeepAgent</code>å°†æ–‡ä»¶ç³»ç»Ÿæ“ä½œæŠ½è±¡ä¸º<code>BackendProtocol</code>åè®®ï¼Œæ”¯æŒå¤šç§å­˜å‚¨ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> deepagents.backends <span class="hljs-keyword">import</span> StateBackend, FilesystemBackend, StoreBackend, CompositeBackend

<span class="hljs-comment"># 1. StateBackendï¼šçŸ­æœŸå†…å­˜ï¼ˆé»˜è®¤ï¼‰</span>
agent = create_deep_agent()  <span class="hljs-comment"># æ–‡ä»¶å­˜å‚¨åœ¨ LangGraph State ä¸­</span>

<span class="hljs-comment"># 2. FilesystemBackendï¼šæœ¬åœ°ç£ç›˜æŒä¹…åŒ–</span>
agent = create_deep_agent(
    backend=FilesystemBackend(root_dir=<span class="hljs-string">"/Users/agent/workspace"</span>, virtual_mode=<span class="hljs-literal">True</span>)
)

<span class="hljs-comment"># 3. StoreBackendï¼šè·¨çº¿ç¨‹æŒä¹…åŒ–ï¼ˆLangGraph Storeï¼‰</span>
<span class="hljs-keyword">from</span> langgraph.store.memory <span class="hljs-keyword">import</span> InMemoryStore
agent = create_deep_agent(
    backend=<span class="hljs-keyword">lambda</span> rt: StoreBackend(rt),
    store=InMemoryStore()
)

<span class="hljs-comment"># 4. CompositeBackendï¼šæ··åˆå­˜å‚¨è·¯ç”±</span>
composite = <span class="hljs-keyword">lambda</span> rt: CompositeBackend(
    default=StateBackend(rt),  <span class="hljs-comment"># ä¸´æ—¶æ–‡ä»¶ç”¨ State</span>
    routes={
        <span class="hljs-string">"/memories/"</span>: StoreBackend(rt),  <span class="hljs-comment"># é•¿æœŸè®°å¿†æŒä¹…åŒ–</span>
        <span class="hljs-string">"/workspace/"</span>: FilesystemBackend(root_dir=<span class="hljs-string">"/real/path"</span>)  <span class="hljs-comment"># å·¥ä½œæ–‡ä»¶æ˜ å°„åˆ°ç£ç›˜</span>
    }
)
agent = create_deep_agent(backend=composite, store=InMemoryStore())
</code></pre>
<h3 data-id="heading-8">è·¯ç”±ç­–ç•¥ç¤ºä¾‹</h3>
<p>ä½¿ç”¨<code>CompositeBackend</code>æ—¶ï¼Œä¸åŒè·¯å¾„å‰ç¼€çš„æ–‡ä»¶ä¼šè·¯ç”±åˆ°ä¸åŒçš„åç«¯ï¼š</p>
<ul>
<li>
<p><code>/workspace/plan.md</code> â†’ StateBackendï¼ˆçŸ­æœŸï¼‰</p>
</li>
<li>
<p><code>/memories/agent_context.txt</code> â†’ StoreBackendï¼ˆè·¨ä¼šè¯æŒä¹…åŒ–ï¼‰</p>
</li>
<li>
<p><code>/docs/api_spec.yaml</code> â†’ FilesystemBackendï¼ˆçœŸå®æ–‡ä»¶ç³»ç»Ÿï¼‰</p>
</li>
</ul>
<p>è¿™ç§è®¾è®¡è®©æ™ºèƒ½ä½“èƒ½å¤ŸåŒæ—¶ç®¡ç†ä¸´æ—¶è‰ç¨¿å’Œé•¿æœŸçŸ¥è¯†åº“ã€‚</p>
<h2 data-id="heading-9">å­æ™ºèƒ½ä½“æœºåˆ¶</h2>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆéœ€è¦å­æ™ºèƒ½ä½“</h3>
<p>å­æ™ºèƒ½ä½“è§£å†³äº†ä¸Šä¸‹æ–‡è†¨èƒ€é—®é¢˜ï¼Œå®ç°ä»»åŠ¡å§”æ‰˜ä¸ä¸Šä¸‹æ–‡éš”ç¦»ã€‚å½“æ™ºèƒ½ä½“ä½¿ç”¨å¤§è¾“å‡ºå·¥å…·ï¼ˆå¦‚å¤šæ¬¡ Web æœç´¢ï¼‰æ—¶ï¼Œä¸»æ™ºèƒ½ä½“çš„ä¸Šä¸‹æ–‡ä¼šè¿…é€Ÿå¡«æ»¡ä¸­é—´ç»“æœã€‚å­æ™ºèƒ½ä½“é€šè¿‡éš”ç¦»è¯¦ç»†å·¥ä½œï¼Œè®©ä¸»æ™ºèƒ½ä½“åªæ¥æ”¶æœ€ç»ˆç»“æœï¼Œè€Œéç”Ÿæˆè¯¥ç»“æœçš„å‡ åæ¬¡å·¥å…·è°ƒç”¨ã€‚</p>
<h3 data-id="heading-11">ä¸¤ç§å®šä¹‰æ–¹å¼</h3>
<ol>
<li>å­—å…¸é…ç½®</li>
</ol>
<pre><code class="hljs language-python" lang="python">research_subagent = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"research-agent"</span>,
    <span class="hljs-string">"description"</span>: <span class="hljs-string">"ç”¨äºæ·±åº¦ç ”ç©¶å¤æ‚é—®é¢˜"</span>,
    <span class="hljs-string">"system_prompt"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç ”ç©¶åŠ©æ‰‹ï¼Œæ“…é•¿å¤šæ­¥éª¤ä¿¡æ¯æ”¶é›†å’Œç»¼åˆ"</span>,
    <span class="hljs-string">"tools"</span>: [internet_search, summarize],
    <span class="hljs-string">"model"</span>: <span class="hljs-string">"openai:gpt-4o"</span>,  <span class="hljs-comment"># å¯é€‰ï¼šè¦†ç›–ä¸»æ™ºèƒ½ä½“æ¨¡å‹</span>
    <span class="hljs-string">"interrupt_on"</span>: {<span class="hljs-string">"internet_search"</span>: <span class="hljs-literal">True</span>}  <span class="hljs-comment"># å¯é€‰ï¼šHITL é…ç½®</span>
}

agent = create_deep_agent(
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    subagents=[research_subagent]
)
</code></pre>
<ol start="2">
<li>ç¼–è¯‘å›¾</li>
</ol>
<p>å¯¹äºå¤æ‚å·¥ä½œæµï¼Œå¯ä»¥ä½¿ç”¨é¢„æ„å»ºçš„<code>LangGraph</code>å›¾ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> deepagents <span class="hljs-keyword">import</span> CompiledSubAgent
<span class="hljs-keyword">from</span> langgraph.graph <span class="hljs-keyword">import</span> StateGraph

<span class="hljs-comment"># åˆ›å»ºè‡ªå®šä¹‰å›¾</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_analysis_graph</span>():
    workflow = StateGraph(...)
    <span class="hljs-comment"># ... æ„å»ºå¤æ‚çš„åˆ†ææµç¨‹</span>
    <span class="hljs-keyword">return</span> workflow.<span class="hljs-built_in">compile</span>()

analysis_subagent = CompiledSubAgent(
    name=<span class="hljs-string">"data-analyzer"</span>,
    description=<span class="hljs-string">"æ‰§è¡Œå¤šæ­¥éª¤æ•°æ®åˆ†æä»»åŠ¡"</span>,
    runnable=create_analysis_graph()
)

agent = create_deep_agent(subagents=[analysis_subagent])
</code></pre>
<h3 data-id="heading-12">é»˜è®¤å­æ™ºèƒ½ä½“</h3>
<p>é™¤äº†ç”¨æˆ·å®šä¹‰çš„å­æ™ºèƒ½ä½“ï¼Œ<code>DeepAgent</code>å§‹ç»ˆæä¾›ä¸€ä¸ª<code>general-purpose</code>å­æ™ºèƒ½ä½“ï¼š</p>
<ul>
<li>
<p>ä¸ä¸»æ™ºèƒ½ä½“ç›¸åŒçš„ç³»ç»Ÿæç¤ºè¯å’Œå·¥å…·</p>
</li>
<li>
<p>ä¸»è¦ç”¨é€”ï¼šä¸Šä¸‹æ–‡éš”ç¦»ï¼ˆè€Œéä¸“ä¸šåŒ–ï¼‰</p>
</li>
<li>
<p>ä½¿ç”¨åœºæ™¯ï¼šä¸»æ™ºèƒ½ä½“å¯ä»¥å°†å¤æ‚ä»»åŠ¡å§”æ‰˜ç»™å®ƒï¼Œè·å¾—ç®€æ´ç»“æœè€Œä¸å—ä¸­é—´è¿‡ç¨‹æ±¡æŸ“</p>
</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¸»æ™ºèƒ½ä½“å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</span>
<span class="hljs-comment"># "è¯·ä½¿ç”¨ general-purpose å­æ™ºèƒ½ä½“åˆ†æè¿™ 100 ä¸ªæ–‡ä»¶ï¼Œè¿”å›æ‘˜è¦"</span>
<span class="hljs-comment"># å­æ™ºèƒ½ä½“å®Œæˆå·¥ä½œåï¼Œä¸»æ™ºèƒ½ä½“åªæ”¶åˆ°æ‘˜è¦ï¼Œè€Œé 100 æ¬¡æ–‡ä»¶è¯»å–çš„è¯¦ç»†å†…å®¹</span>
</code></pre>
<h2 data-id="heading-13">ç”Ÿäº§çº§ç‰¹æ€§</h2>
<p>é’ˆå¯¹ç”Ÿäº§ç¯å¢ƒï¼Œ<code>DeepAgent</code>è¿˜æä¾›äº†è®¸å¤šæœ‰ç”¨çš„ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-14">1. å¯¹è¯å†å²è‡ªåŠ¨æ‘˜è¦</h3>
<p>å½“ token ä½¿ç”¨é‡è¿‡é«˜æ—¶ï¼Œ<code>DeepAgent</code>ä¼šè‡ªåŠ¨å‹ç¼©æ—§å¯¹è¯å†å²ï¼š</p>
<pre><code class="hljs language-python" lang="python">agent = create_deep_agent(
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    <span class="hljs-comment"># é…ç½®æ‘˜è¦è§¦å‘é˜ˆå€¼å’Œç›®æ ‡é•¿åº¦</span>
)
</code></pre>
<h3 data-id="heading-15">2. å·¥å…·è°ƒç”¨è‡ªåŠ¨ä¿®å¤</h3>
<p>å½“å·¥å…·è°ƒç”¨è¢«ä¸­æ–­æˆ–å–æ¶ˆæ—¶ï¼Œ<code>DeepAgent</code>ä¼šè‡ªåŠ¨ä¿®å¤æ¶ˆæ¯å†å²ï¼š</p>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼šç”¨æˆ·åœ¨å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­å–æ¶ˆæ“ä½œï¼Œå¯¼è‡´<code>tool_call</code>æ¶ˆæ¯æ²¡æœ‰å¯¹åº”çš„<code>tool_result</code>ï¼Œç ´åäº†æ¶ˆæ¯åºåˆ—çš„å®Œæ•´æ€§ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<code>DeepAgent</code>ä¼šè‡ªåŠ¨æ³¨å…¥å ä½ç¬¦<code>ToolMessage</code>ï¼Œç¡®ä¿æ¶ˆæ¯å†å²çš„è¿è´¯æ€§ï¼Œé¿å… LLM åœ¨åç»­è½®æ¬¡ä¸­å› ä¸å®Œæ•´çš„ä¸Šä¸‹æ–‡è€Œäº§ç”Ÿå›°æƒ‘ã€‚</p>
<h3 data-id="heading-16">3. Promptç¼“å­˜æœºåˆ¶</h3>
<p>å¯¹äºä½¿ç”¨Anthropicæ¨¡å‹çš„æ™ºèƒ½ä½“ï¼Œ<code>DeepAgent</code>å¯ç”¨äº†<code>prompt caching</code>åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>è‡ªåŠ¨æ ‡è®°å¯ç¼“å­˜çš„æç¤ºè¯éƒ¨åˆ†ï¼ˆå¦‚ç³»ç»Ÿæç¤ºè¯ã€å·¥å…·å®šä¹‰ï¼‰</p>
</li>
<li>
<p>å‡å°‘é‡å¤ token å¤„ç†ï¼Œæ˜¾è‘—é™ä½æˆæœ¬å’Œå»¶è¿Ÿ</p>
</li>
<li>
<p>å¯¹äºé•¿ç³»ç»Ÿæç¤ºè¯çš„æ·±åº¦æ™ºèƒ½ä½“å°¤å…¶æœ‰ä»·å€¼</p>
</li>
</ul>
<h3 data-id="heading-17">4. Human-in-the-Loop</h3>
<p><code>DeepAgent</code>æ”¯æŒåœ¨ç‰¹å®šå·¥å…·è°ƒç”¨æ—¶æš‚åœæ‰§è¡Œï¼Œç­‰å¾…äººå·¥å®¡æ‰¹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> MemorySaver

agent = create_deep_agent(
    model=<span class="hljs-string">"claude-sonnet-4-5-20250929"</span>,
    tools=[delete_file, send_email, read_file],
    interrupt_on={
        <span class="hljs-string">"delete_file"</span>: <span class="hljs-literal">True</span>,  <span class="hljs-comment"># éœ€è¦å®¡æ‰¹ï¼ˆapprove/edit/rejectï¼‰</span>
        <span class="hljs-string">"send_email"</span>: {<span class="hljs-string">"allowed_decisions"</span>: [<span class="hljs-string">"approve"</span>, <span class="hljs-string">"reject"</span>]},  <span class="hljs-comment"># åªèƒ½æ‰¹å‡†æˆ–æ‹’ç»</span>
        <span class="hljs-string">"read_file"</span>: <span class="hljs-literal">False</span>  <span class="hljs-comment"># æ— éœ€å®¡æ‰¹</span>
    },
    checkpointer=MemorySaver()  <span class="hljs-comment"># HITL å¿…é¡»ä½¿ç”¨ checkpointer</span>
)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"session-123"</span>}}
result = agent.invoke({<span class="hljs-string">"messages"</span>: [...]}, config=config)

<span class="hljs-keyword">if</span> result.get(<span class="hljs-string">"__interrupt__"</span>):
    <span class="hljs-comment"># å¤„ç†ä¸­æ–­ï¼Œå±•ç¤ºå¾…å®¡æ‰¹æ“ä½œ</span>
    interrupts = result[<span class="hljs-string">"__interrupt__"</span>][<span class="hljs-number">0</span>].value
    action_requests = interrupts[<span class="hljs-string">"action_requests"</span>]
    
    <span class="hljs-comment"># ç”¨æˆ·å†³ç­–</span>
    decisions = [{<span class="hljs-string">"type"</span>: <span class="hljs-string">"approve"</span>}]  <span class="hljs-comment"># æˆ– "edit"ã€"reject"</span>
    
    <span class="hljs-comment"># æ¢å¤æ‰§è¡Œ</span>
    result = agent.invoke(
        Command(resume={<span class="hljs-string">"decisions"</span>: decisions}),
        config=config  <span class="hljs-comment"># å¿…é¡»ä½¿ç”¨ç›¸åŒçš„ config</span>
    )
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p><code>DeepAgent</code>å®ç°äº†ä»æµ…å±‚Agentåˆ°æ·±åº¦Agentçš„èŒƒå¼è½¬å˜ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå°†å¤æ‚ä»»åŠ¡è‡ªåŠ¨åŒ–ç³»ç»Ÿæ‰€éœ€çš„æ ¸å¿ƒèƒ½åŠ›å°è£…ä¸ºå¯ç»„åˆã€ç”Ÿäº§å°±ç»ªçš„<strong>æ¨¡å—åŒ–ä¸­é—´ä»¶</strong>ã€‚</p>
<p>æœ‰äº†è¿™äº›ç”Ÿäº§ç‰¹æ€§ï¼Œæ— è®ºæ˜¯åœ¨æ„å»ºç ”ç©¶åŠ©æ‰‹ã€ä»£ç ç”Ÿæˆå·¥å…·ã€æ•°æ®åˆ†æå¹³å°è¿˜æ˜¯æ™ºèƒ½å®¢æœç³»ç»Ÿï¼Œ<code>DeepAgent</code>çš„è®¾è®¡æ¨¡å¼éƒ½å€¼å¾—æ·±å…¥å­¦ä¹ å’Œåº”ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ å¤šç”¨æˆ·å¹¶å‘è¯·æ±‚ä¸‹çš„ WebAIGC æœåŠ¡ç¨³å®šæ€§æŠ€æœ¯ä¿éšœ]]></title>    <link>https://juejin.cn/post/7575106644498726946</link>    <guid>https://juejin.cn/post/7575106644498726946</guid>    <pubDate>2025-11-22T23:45:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575106644498726946" data-draft-id="7575062687627214848" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ å¤šç”¨æˆ·å¹¶å‘è¯·æ±‚ä¸‹çš„ WebAIGC æœåŠ¡ç¨³å®šæ€§æŠ€æœ¯ä¿éšœ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,è‡ªåŠ¨åŒ–è¿ç»´,JavaScript"/> <meta itemprop="datePublished" content="2025-11-22T23:45:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ å¤šç”¨æˆ·å¹¶å‘è¯·æ±‚ä¸‹çš„ WebAIGC æœåŠ¡ç¨³å®šæ€§æŠ€æœ¯ä¿éšœ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T23:45:12.000Z" title="Sat Nov 22 2025 23:45:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ—ï¸ ä¸€ã€åºç« ï¼šå½“æœåŠ¡å™¨å¼€å§‹â€œç¤¾æâ€</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šæŸä¸ªæ¸…æ™¨ï¼Œä½ çš„ WebAIGC æœåŠ¡ä¸Šçº¿äº†â€”â€”å®ƒèƒ½å†™æ–‡æ¡ˆã€èƒ½ç”Ÿæˆå›¾ç‰‡ã€è¿˜èƒ½é™ªç”¨æˆ·èŠå¤©ã€‚<br/>
ä½ è‡ªä¿¡æ»¡æ»¡æ¨å‘ç”Ÿäº§ç¯å¢ƒï¼Œç»“æœ 10 ç§’åå°±æˆäº†å™©æ¢¦ã€‚</p>
<blockquote>
<p><strong>æ—¥å¿—ä¸­æ»šæ»šè€Œæ¥çš„å­—å¥ï¼š</strong><br/>
â€œRequest timeout...â€<br/>
â€œOut of memory...â€<br/>
â€œConnection refused...â€</p>
</blockquote>
<p>æ²¡é”™ï¼Œä½ çš„æœåŠ¡åœ¨è¢«ä¸Šç™¾ä¸ªç”¨æˆ·<strong>åŒæ—¶é€ è®¿</strong>æ—¶ï¼Œå¼€å§‹â€œç¤¾æâ€äº†ã€‚</p>
<p>è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦èŠçš„ä¸»é¢˜ğŸ‘‡</p>
<blockquote>
<p>å¦‚ä½•è®©ä½ çš„ AIGC æœåŠ¡åœ¨å¤šç”¨æˆ·å¹¶å‘ä¸‹ä¾æ—§ä¼˜é›…åœ°åº”å¯¹æ¯ä¸€æ¬¡é—®å€™ï¼Œè€Œä¸æ˜¯ç²¾ç¥å´©æºƒã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€ç†è§£â€œå¹¶å‘â€çš„åº•å±‚æœ¬è´¨</h2>
<p>åœ¨è®¡ç®—æœºçš„çœ¼ä¸­ï¼Œå¹¶å‘ä¸æ˜¯â€œåŒæ—¶â€ï¼Œè€Œæ˜¯â€œå¿«é€Ÿè½®æµâ€ã€‚</p>
<p>å¯ä»¥æƒ³è±¡æˆä¸€ä¸ªå¨å¸ˆï¼ˆCPU ğŸ³ï¼‰åœ¨åŒæ—¶ä¸ºåæ¡Œå®¢äººåšèœï¼š</p>
<ul>
<li>å¹¶ä¸æ˜¯ååªæ‰‹åœ¨ç‚’èœï¼›</li>
<li>è€Œæ˜¯ä»–åœ¨æ¯ä¸ªé”…é—´æ¥å›ç©¿æ¢­ï¼Œ<strong>çœ‹ä¼¼å¹¶è¡Œï¼Œå®åˆ™åˆ‡æ¢</strong>ã€‚</li>
</ul>
<p>ç°ä»£ WebAIGC ç³»ç»Ÿå¾€å¾€ç”±ä»¥ä¸‹ä¸‰å±‚æ„å»ºï¼š</p>

























<table><thead><tr><th align="left">å±‚çº§</th><th align="left">è§’è‰²</th><th align="left">å¸¸è§é—®é¢˜</th></tr></thead><tbody><tr><td align="left">å‰ç«¯</td><td align="left">ç”¨æˆ·äº¤äº’ä¸è¯·æ±‚å‘é€</td><td align="left">è¯·æ±‚è¿‡äºé¢‘å¯†ï¼Œå¯¼è‡´æ’é˜Ÿ</td></tr><tr><td align="left">æœåŠ¡å±‚</td><td align="left">AIGC æ¨¡å‹ä¸é€»è¾‘è°ƒåº¦</td><td align="left">æ¨¡å‹è°ƒç”¨è€—æ—¶é•¿ï¼Œé˜»å¡ä¸»çº¿ç¨‹</td></tr><tr><td align="left">æ•°æ®å±‚</td><td align="left">ç¼“å­˜ä¸æ•°æ®åº“</td><td align="left">è¿æ¥æ± è€—å°½ï¼Œå“åº”å»¶è¿Ÿæ‰©å¤§</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">âš™ï¸ ä¸‰ã€ç¨³å®šæ€§çš„å››å¤§æ”¯æŸ±</h2>
<p>è®©æˆ‘ä»¬ä»åº•å±‚åˆ°é«˜å±‚ï¼Œä¸€å±‚å±‚å‰–å¼€è¿™å¤´â€œå¹¶å‘é‡å…½â€ğŸ¦ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ§µ 1. å¼‚æ­¥ä¸äº‹ä»¶å¾ªç¯ï¼šè®©CPUä¸åç”µæ¢¯</h3>
<p>åœ¨ Node.js ç¯å¢ƒä¸­ï¼ŒJS æ˜¯<strong>å•çº¿ç¨‹</strong>çš„ï¼Œä½†ä¾é å®ƒçš„<strong>äº‹ä»¶å¾ªç¯ (Event Loop)</strong> ï¼Œæˆ‘ä»¬ä»èƒ½é«˜æ•ˆå¹¶å‘ã€‚</p>
<h4 data-id="heading-4">ğŸŒ JS æ ¸å¿ƒé€»è¾‘ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'http'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-built_in">setTimeout</span> <span class="hljs-keyword">as</span> delay } <span class="hljs-keyword">from</span> <span class="hljs-string">'timers/promises'</span>;

<span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">delay</span>(<span class="hljs-number">200</span>); <span class="hljs-comment">// æ¨¡æ‹ŸAIæ¨¡å‹è°ƒç”¨</span>
  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">"AIGC Response Generated âœ…"</span>);
});

server.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Server ready on port 8080 ğŸš€'</span>));
</code></pre>
<p>è¿™æ®µçœ‹ä¼¼ç®€é™‹çš„ä»£ç ï¼Œå…¶å®åšäº†å‡ ä»¶â€œé­”æœ¯æ“ä½œâ€ï¼š</p>
<ul>
<li><strong>æœªé˜»å¡ä¸»çº¿ç¨‹</strong>ï¼šé‚£ 200ms å¹¶ä¸æ˜¯CPUå‘å‘†ï¼Œè€Œæ˜¯äº‹ä»¶å¾ªç¯è®°å½•äº†â€œå¾…è¿”å›ä»»åŠ¡â€ï¼Œè½¬èº«å»å¹²åˆ«çš„æ´»ã€‚</li>
<li><strong>äº‹ä»¶é©±åŠ¨</strong>ï¼šå½“AIä»»åŠ¡å®Œæˆåï¼Œäº‹ä»¶è§¦å‘å›è°ƒè¿”å›ç»“æœã€‚</li>
</ul>
<blockquote>
<p>ğŸ§  <em>å°è´´å£«ï¼šæƒ³çœŸæ­£å¡æ­»æœåŠ¡ï¼Ÿåœ¨CPUå¯†é›†ä»»åŠ¡ä¸­ç”¨forå¾ªç¯è·‘ä¸Š10äº¿æ¬¡ï¼Œå°±èƒ½ä½“ä¼šåˆ°äº‹ä»¶å¾ªç¯çš„ç—›è‹¦ã€‚</em></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ğŸ§Š 2. è´Ÿè½½å‡è¡¡ï¼šåˆ«è®©ä¸€å°æœºèƒŒé”…</h3>
<p>å½“ç”¨æˆ·æš´æ¶¨ï¼Œå•æœºå†èªæ˜ä¹Ÿæ’‘ä¸ä½ã€‚<br/>
æ­¤æ—¶è¯¥è¯·å‡ºï¼š<strong>è´Ÿè½½å‡è¡¡å™¨ï¼ˆLoad Balancerï¼‰ğŸ§­</strong>ã€‚</p>
<h4 data-id="heading-6">ğŸ’¡ å¸¸è§ç­–ç•¥ï¼š</h4>
<ul>
<li><strong>è½®è¯¢è°ƒåº¦</strong>ï¼šåƒå‘ç³–ä¸€æ ·ï¼Œä¸€äººä¸€é¢—ä¸åä¸å€šã€‚</li>
<li><strong>æœ€å°‘è¿æ¥æ•°ä¼˜å…ˆ</strong>ï¼šç›¯ç€è°æœ€é—²å°±æ´¾è°ä¸Šåœºã€‚</li>
<li><strong>åŸºäºå“åº”æ—¶é—´æƒè¡¡</strong>ï¼šå­¦ä¹ å‹è°ƒåº¦ç­–ç•¥ï¼Œè®©å»¶è¿Ÿæœ€å°åŒ–ã€‚</li>
</ul>
<p>è¿™äº›ç®—æ³•çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>â€œåˆ«è®©æŸå°æœºå™¨ç´¯æ­»ï¼Œè€Œå…¶ä»–æœºå™¨åœ¨å‘å‘†ã€‚â€</p>
</blockquote>
<blockquote>
<p>ğŸ“Œ åº•å±‚å®ç°ï¼šTCPå±‚å¯ç”¨<code>SO_REUSEPORT</code>ï¼Œåº”ç”¨å±‚å¯ä½¿ç”¨Nginxæˆ–Envoyåˆ†æµã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">ğŸ—œï¸ 3. ç¼“å­˜ä¸è¿æ¥æ± ï¼šæ§åˆ¶â€œæµ·é‡â€çš„èŠ‚å¥</h3>
<p>åœ¨AIæœåŠ¡ä¸­ï¼Œéƒ¨åˆ†è¯·æ±‚å…¶å®å¯ä»¥<strong>é‡å¤å¤ç”¨ç»“æœ</strong>æˆ–<strong>çŸ­æš‚ç¼“å­˜ä¸­é—´çŠ¶æ€</strong>ã€‚<br/>
è¿™æ—¶ç¼“å­˜ç³»ç»Ÿï¼ˆå¦‚ Redisï¼‰æˆä¸ºæ•‘å‘½ç¨»è‰ã€‚</p>
<h4 data-id="heading-8">ç¼“å­˜çš„å“²å­¦</h4>
<blockquote>
<p>â€œæœ€å¥½çš„è¯·æ±‚ï¼Œæ˜¯æ²¡å‘ç”Ÿçš„è¯·æ±‚ã€‚â€</p>
</blockquote>
<h4 data-id="heading-9">ğŸ‘· JSå±‚ä¸¾ä¾‹ï¼š</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> Map();

<span class="hljs-function"><span class="hljs-keyword">async</span> function <span class="hljs-title">getAIResponse</span>(<span class="hljs-params">prompt</span>)</span> {
  <span class="hljs-keyword">if</span> (cache.has(prompt)) <span class="hljs-keyword">return</span> cache.<span class="hljs-keyword">get</span>(prompt);

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> slowAIGCInference(prompt); <span class="hljs-comment">// æ¨¡æ‹Ÿè€—æ—¶è°ƒç”¨</span>
  cache.<span class="hljs-keyword">set</span>(prompt, response);
  <span class="hljs-keyword">return</span> response;
}
</code></pre>
<p>æ­¤å¤–ï¼Œæ•°æ®åº“æˆ–æ¨¡å‹è¿æ¥æ± ä¹Ÿéœ€æ³¨æ„ï¼š</p>
<ul>
<li>å»ºç«‹è¿æ¥ä»£ä»·é«˜ï¼›</li>
<li>é¢‘ç¹è¿æ¥/æ–­å¼€ç›¸å½“äºä¸åœåœ°â€œé‡å¯é£æœºå¼•æ“â€ã€‚</li>
</ul>
<p>äºæ˜¯â€œè¿æ¥æ± â€è´Ÿè´£ä¿æŒæœ‰é™ã€å®‰å…¨çš„è¿æ¥æ•°é‡ã€‚</p>
<hr/>
<h3 data-id="heading-10">ğŸš¨ 4. é™æµä¸ç†”æ–­ï¼šç³»ç»Ÿçš„â€œå®‰å…¨æ°”é˜€â€</h3>
<p>æœ‰æ—¶ï¼Œç¾éš¾å¹¶ä¸æ˜¯å¤–æ•Œå…¥ä¾µï¼Œè€Œæ˜¯ç–¯ç‹‚çš„è‡ªå·±ã€‚<br/>
å‡è®¾ä¸€ä½AIç”¨æˆ·é€’å½’è°ƒç”¨äº†è‡ªå·±ç”Ÿæˆçš„APIï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿâ€”â€”å¯¹ï¼ŒDoSè‡ªå·±ã€‚</p>
<p>è¿™æ—¶å°±è¦ä¾é <strong>é™æµä¸ç†”æ–­æœºåˆ¶</strong>ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ï¼šTokenæ¡¶é™æµ (ä¼ªå®ç°)</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> tokens = <span class="hljs-number">10</span>; <span class="hljs-comment">// æ¯ç§’æœ€å¤šå…è®¸10ä¸ªè¯·æ±‚</span>

<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> tokens = <span class="hljs-number">10</span>, <span class="hljs-number">1000</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">tryRequest</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (tokens &gt; <span class="hljs-number">0</span>) {
    tokens--;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<blockquote>
<p>ğŸ§¯ å½“æœåŠ¡è¿‡è½½æ—¶ï¼Œç†”æ–­å™¨èƒ½ä¸»åŠ¨â€œæ‹’ç»æœåŠ¡â€ï¼Œä»¥é˜²æ­¢æ•´ä½“å´©ç›˜ï¼Œç•™ä¸‹ä¸€çº¿ç”Ÿæœºã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12">ğŸ§  å››ã€æ€è€ƒå±‚ï¼šç¨³å®šæ€§æ˜¯æ–‡åŒ–ï¼Œè€Œéå‚æ•°</h2>
<p>çœŸæ­£çš„å·¥ç¨‹å¸ˆä¸ä¼šåªåœ¨â€œå´©åä¿®â€ï¼Œ<br/>
è€Œæ˜¯æå‰åœ¨ç³»ç»Ÿä¸­åŸ‹ä¸‹é¢„é˜²çš„â€œä¼˜é›…ç­–ç•¥â€ï¼š</p>
<ol>
<li><strong>ç›‘æ§</strong>ï¼šPrometheus + Grafana æŒç»­è¿½è¸ª CPUã€å»¶è¿Ÿä¸å¤±è´¥ç‡ã€‚</li>
<li><strong>è‡ªåŠ¨æ¢å¤</strong>ï¼šKubernetes è‡ªåŠ¨æ‹‰èµ·è¢«æ‰“æŒ‚çš„ Podã€‚</li>
<li><strong>ç°åº¦å‘å¸ƒ</strong>ï¼šä¸€éƒ¨åˆ†æµé‡è¯•è¿è¡Œæ–°ç‰ˆæœ¬ï¼Œé¿å…å¤§é¢ç§¯ç¾éš¾ã€‚</li>
<li><strong>å¹‚ç­‰æ“ä½œ</strong>ï¼šè®©â€œé‡è¯•â€ä¸é‡è¹ˆè¦†è¾™ã€‚</li>
</ol>
<blockquote>
<p>âœ¨â€œç¨³å®šæ€§ï¼Œä¸ä»…æ˜¯ä»£ç è´¨é‡ï¼Œæ›´æ˜¯ä¸€ç§ç³»ç»Ÿçš„è‡ªæˆ‘è®¤çŸ¥ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">ğŸ­ äº”ã€å°¾å£°ï¼šæœåŠ¡å™¨çš„â€œå¿ƒæµçŠ¶æ€â€</h2>
<p>å½“å¹¶å‘ç”¨æˆ·æ’é˜Ÿæ‹¥å…¥ï¼Œè€Œä½ çš„æœåŠ¡å™¨ä»åœ¨è½»æ¾å“åº”ï¼Œ<br/>
å½“CPUæ¸©åº¦å¹³ç¨³ã€å†…å­˜æ›²çº¿ä¼˜é›…ï¼Œ<br/>
ä½ ä¼šå¬è§ä¸€å£°æ¥è‡ªæ•°æ®ä¸­å¿ƒæ·±å¤„çš„è½»å¹ï¼š</p>
<blockquote>
<p>â€œæˆ‘ç°åœ¨â€¦â€¦éå¸¸æµç•…ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-14">ğŸ§© ç»“è¯­</h2>
<p>ç¨³å®šæ€§ä¸æ˜¯â€œæ°¸è¿œä¸å‡ºé”™â€ï¼Œ<br/>
è€Œæ˜¯â€œé”™è¯¯å‘ç”Ÿæ—¶ï¼Œç³»ç»Ÿä¾æ—§æœ‰åºã€å¯æ§ã€æœ‰å°Šä¸¥â€ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸‹ä¸€æ¬¡é¢å¯¹åƒå†›ä¸‡é©¬çš„å¹¶å‘è¯·æ±‚ï¼Œ<br/>
åˆ«æ…Œâ€”â€”<br/>
<strong>ä¸€åˆ‡çš†å¯äº‹ä»¶å¾ªç¯ï¼Œä¸€åˆ‡çš†å¯ç†”æ–­å¤æ´»ã€‚</strong> ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ141ï¼‰Redisçš„Clusterçš„æ§½åˆ†é…æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575112613777539106</link>    <guid>https://juejin.cn/post/7575112613777539106</guid>    <pubDate>2025-11-22T23:49:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613777539106" data-draft-id="7575112613777522722" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ141ï¼‰Redisçš„Clusterçš„æ§½åˆ†é…æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T23:49:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ141ï¼‰Redisçš„Clusterçš„æ§½åˆ†é…æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T23:49:41.000Z" title="Sat Nov 22 2025 23:49:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis Cluster ä½¿ç”¨å“ˆå¸Œæ§½ï¼ˆhash slotsï¼‰æ¥è¿›è¡Œæ•°æ®åˆ†ç‰‡å’Œåˆ†é…ã€‚æ•´ä¸ªé”®ç©ºé—´è¢«åˆ†ä¸º 16384 ä¸ªå“ˆå¸Œæ§½ï¼Œæ¯ä¸ªé”®æ ¹æ®å…¶ CRC16 æ ¡éªŒå’Œè¢«æ˜ å°„åˆ°å…¶ä¸­ä¸€ä¸ªå“ˆå¸Œæ§½ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£ä¸€éƒ¨åˆ†å“ˆå¸Œæ§½ï¼Œä»è€Œå®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ã€‚</p>
<h3 data-id="heading-0">1. å“ˆå¸Œæ§½è®¡ç®—</h3>
<p>Redis Cluster ä½¿ç”¨ CRC16 ç®—æ³•è®¡ç®—é”®çš„å“ˆå¸Œå€¼ï¼Œå¹¶å°†å…¶æ˜ å°„åˆ° 16384 ä¸ªå“ˆå¸Œæ§½ä¹‹ä¸€ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-1">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* CRC16 implementation to hash the key */</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">crc16</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *buf, <span class="hljs-type">int</span> len)</span> {
    <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> crc16tab[<span class="hljs-number">256</span>] = {
        <span class="hljs-comment">/* Table of CRC16 values for highâ€“order byte */</span>
        <span class="hljs-comment">/* ... (çœç•¥è¡¨æ ¼æ•°æ®) ... */</span>
    };

    <span class="hljs-type">int</span> counter;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> crc = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (counter = <span class="hljs-number">0</span>; counter &lt; len; counter++)
        crc = (crc &lt;&lt; <span class="hljs-number">8</span>) ^ crc16tab[((crc &gt;&gt; <span class="hljs-number">8</span>) ^ *buf++) &amp; <span class="hljs-number">0x00FF</span>];
    <span class="hljs-keyword">return</span> crc;
}

<span class="hljs-comment">/* Function to get the hash slot for a given key */</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">keyHashSlot</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int</span> keylen)</span> {
    <span class="hljs-keyword">return</span> crc16(key, keylen) % <span class="hljs-number">16384</span>;
}
</code></pre>
<h3 data-id="heading-2">2. å“ˆå¸Œæ§½åˆ†é…</h3>
<p>å“ˆå¸Œæ§½çš„åˆ†é…æ˜¯æŒ‡å°† 16384 ä¸ªå“ˆå¸Œæ§½åˆ†é…ç»™ä¸åŒçš„é›†ç¾¤èŠ‚ç‚¹ã€‚é€šå¸¸ï¼Œåˆå§‹çš„å“ˆå¸Œæ§½åˆ†é…æ˜¯åœ¨é›†ç¾¤é…ç½®å’Œåˆå§‹åŒ–æ—¶å®Œæˆçš„ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•åœ¨é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´åˆ†é…å“ˆå¸Œæ§½ã€‚</p>
<h4 data-id="heading-3">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> HASH_SLOTS 16384</span>

<span class="hljs-comment">/* Cluster node structure */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterNode</span> {</span>
    <span class="hljs-type">char</span> name[<span class="hljs-number">40</span>];      <span class="hljs-comment">/* Node ID */</span>
    <span class="hljs-type">int</span> start_slot;     <span class="hljs-comment">/* Start hash slot */</span>
    <span class="hljs-type">int</span> end_slot;       <span class="hljs-comment">/* End hash slot */</span>
    <span class="hljs-comment">// other fields...</span>
} clusterNode;

<span class="hljs-comment">/* Function to assign hash slots to nodes */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">assignHashSlots</span><span class="hljs-params">(clusterNode *nodes, <span class="hljs-type">int</span> num_nodes)</span> {
    <span class="hljs-type">int</span> slots_per_node = HASH_SLOTS / num_nodes;
    <span class="hljs-type">int</span> remaining_slots = HASH_SLOTS % num_nodes;

    <span class="hljs-type">int</span> current_slot = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num_nodes; i++) {
        nodes[i].start_slot = current_slot;
        current_slot += slots_per_node;
        <span class="hljs-keyword">if</span> (remaining_slots &gt; <span class="hljs-number">0</span>) {
            current_slot++;
            remaining_slots--;
        }
        nodes[i].end_slot = current_slot - <span class="hljs-number">1</span>;
    }
}

<span class="hljs-comment">/* Example usage */</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    clusterNode nodes[<span class="hljs-number">3</span>] = {
        {<span class="hljs-string">"node1"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>},
        {<span class="hljs-string">"node2"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>},
        {<span class="hljs-string">"node3"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>}
    };
    <span class="hljs-type">int</span> num_nodes = <span class="hljs-number">3</span>;

    assignHashSlots(nodes, num_nodes);

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num_nodes; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s: slots %d - %d\n"</span>, nodes[i].name, nodes[i].start_slot, nodes[i].end_slot);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-4">3. é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´çš„æ§½è¿ç§»</h3>
<p>åœ¨å®é™…è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯èƒ½éœ€è¦åœ¨é›†ç¾¤èŠ‚ç‚¹ä¹‹é—´è¿ç§»å“ˆå¸Œæ§½ä»¥å®ç°è´Ÿè½½å‡è¡¡æˆ–è¿›è¡ŒèŠ‚ç‚¹çš„å¢åŠ /åˆ é™¤æ“ä½œã€‚ä¸‹é¢çš„ä»£ç ç¤ºä¾‹å±•ç¤ºäº†ç®€å•çš„å“ˆå¸Œæ§½è¿ç§»ã€‚</p>
<h4 data-id="heading-5">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* Function to move hash slots from one node to another */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">migrateHashSlots</span><span class="hljs-params">(clusterNode *src, clusterNode *dst, <span class="hljs-type">int</span> start_slot, <span class="hljs-type">int</span> end_slot)</span> {
    <span class="hljs-keyword">if</span> (start_slot &lt; src-&gt;start_slot || end_slot &gt; src-&gt;end_slot) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Invalid slot range\n"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Adjust source node's slot range</span>
    <span class="hljs-keyword">if</span> (start_slot == src-&gt;start_slot) {
        src-&gt;start_slot = end_slot + <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (end_slot == src-&gt;end_slot) {
        src-&gt;end_slot = start_slot - <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Source node's slot range cannot be split\n"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Adjust destination node's slot range</span>
    <span class="hljs-keyword">if</span> (dst-&gt;start_slot == <span class="hljs-number">-1</span> &amp;&amp; dst-&gt;end_slot == <span class="hljs-number">-1</span>) {
        dst-&gt;start_slot = start_slot;
        dst-&gt;end_slot = end_slot;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (start_slot &lt; dst-&gt;start_slot) {
            dst-&gt;start_slot = start_slot;
        }
        <span class="hljs-keyword">if</span> (end_slot &gt; dst-&gt;end_slot) {
            dst-&gt;end_slot = end_slot;
        }
    }
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Migrated slots %d-%d from node %s to node %s\n"</span>, start_slot, end_slot, src-&gt;name, dst-&gt;name);
}

<span class="hljs-comment">/* Example usage */</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    clusterNode nodes[<span class="hljs-number">3</span>] = {
        {<span class="hljs-string">"node1"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">5460</span>},
        {<span class="hljs-string">"node2"</span>, <span class="hljs-number">5461</span>, <span class="hljs-number">10921</span>},
        {<span class="hljs-string">"node3"</span>, <span class="hljs-number">10922</span>, <span class="hljs-number">16383</span>}
    };

    migrateHashSlots(&amp;nodes[<span class="hljs-number">0</span>], &amp;nodes[<span class="hljs-number">2</span>], <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s: slots %d - %d\n"</span>, nodes[i].name, nodes[i].start_slot, nodes[i].end_slot);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h3 data-id="heading-6">4. é›†æˆç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»¼åˆç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•åˆå§‹åŒ–é›†ç¾¤èŠ‚ç‚¹ã€åˆ†é…å“ˆå¸Œæ§½ä»¥åŠåœ¨èŠ‚ç‚¹ä¹‹é—´è¿ç§»å“ˆå¸Œæ§½ã€‚</p>
<h4 data-id="heading-7">ç»¼åˆä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> HASH_SLOTS 16384</span>

<span class="hljs-comment">/* CRC16 implementation to hash the key */</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">crc16</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *buf, <span class="hljs-type">int</span> len)</span> {
    <span class="hljs-type">static</span> <span class="hljs-type">const</span> <span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> crc16tab[<span class="hljs-number">256</span>] = {
        <span class="hljs-comment">// Table of CRC16 values for highâ€“order byte</span>
        <span class="hljs-comment">// ... (çœç•¥è¡¨æ ¼æ•°æ®) ...</span>
    };

    <span class="hljs-type">int</span> counter;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">short</span> crc = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (counter = <span class="hljs-number">0</span>; counter &lt; len; counter++)
        crc = (crc &lt;&lt; <span class="hljs-number">8</span>) ^ crc16tab[((crc &gt;&gt; <span class="hljs-number">8</span>) ^ *buf++) &amp; <span class="hljs-number">0x00FF</span>];
    <span class="hljs-keyword">return</span> crc;
}

<span class="hljs-comment">/* Function to get the hash slot for a given key */</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">keyHashSlot</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *key, <span class="hljs-type">int</span> keylen)</span> {
    <span class="hljs-keyword">return</span> crc16(key, keylen) % HASH_SLOTS;
}

<span class="hljs-comment">/* Cluster node structure */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterNode</span> {</span>
    <span class="hljs-type">char</span> name[<span class="hljs-number">40</span>];      <span class="hljs-comment">/* Node ID */</span>
    <span class="hljs-type">int</span> start_slot;     <span class="hljs-comment">/* Start hash slot */</span>
    <span class="hljs-type">int</span> end_slot;       <span class="hljs-comment">/* End hash slot */</span>
    <span class="hljs-comment">// other fields...</span>
} clusterNode;

<span class="hljs-comment">/* Function to assign hash slots to nodes */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">assignHashSlots</span><span class="hljs-params">(clusterNode *nodes, <span class="hljs-type">int</span> num_nodes)</span> {
    <span class="hljs-type">int</span> slots_per_node = HASH_SLOTS / num_nodes;
    <span class="hljs-type">int</span> remaining_slots = HASH_SLOTS % num_nodes;

    <span class="hljs-type">int</span> current_slot = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num_nodes; i++) {
        nodes[i].start_slot = current_slot;
        current_slot += slots_per_node;
        <span class="hljs-keyword">if</span> (remaining_slots &gt; <span class="hljs-number">0</span>) {
            current_slot++;
            remaining_slots--;
        }
        nodes[i].end_slot = current_slot - <span class="hljs-number">1</span>;
    }
}

<span class="hljs-comment">/* Function to move hash slots from one node to another */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">migrateHashSlots</span><span class="hljs-params">(clusterNode *src, clusterNode *dst, <span class="hljs-type">int</span> start_slot, <span class="hljs-type">int</span> end_slot)</span> {
    <span class="hljs-keyword">if</span> (start_slot &lt; src-&gt;start_slot || end_slot &gt; src-&gt;end_slot) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Invalid slot range\n"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Adjust source node's slot range</span>
    <span class="hljs-keyword">if</span> (start_slot == src-&gt;start_slot) {
        src-&gt;start_slot = end_slot + <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (end_slot == src-&gt;end_slot) {
        src-&gt;end_slot = start_slot - <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Source node's slot range cannot be split\n"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// Adjust destination node's slot range</span>
    <span class="hljs-keyword">if</span> (dst-&gt;start_slot == <span class="hljs-number">-1</span> &amp;&amp; dst-&gt;end_slot == <span class="hljs-number">-1</span>) {
        dst-&gt;start_slot = start_slot;
        dst-&gt;end_slot = end_slot;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (start_slot &lt; dst-&gt;start_slot) {
            dst-&gt;start_slot = start_slot;
        }
        <span class="hljs-keyword">if</span> (end_slot &gt; dst-&gt;end_slot) {
            dst-&gt;end_slot = end_slot;
        }
    }
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Migrated slots %d-%d from node %s to node %s\n"</span>, start_slot, end_slot, src-&gt;name, dst-&gt;name);
}

<span class="hljs-comment">/* Example usage */</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    clusterNode nodes[<span class="hljs-number">3</span>] = {
        {<span class="hljs-string">"node1"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>},
        {<span class="hljs-string">"node2"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>},
        {<span class="hljs-string">"node3"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>}
    };
    <span class="hljs-type">int</span> num_nodes = <span class="hljs-number">3</span>;

    assignHashSlots(nodes, num_nodes);

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; num_nodes; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s: slots %d - %d\n"</span>, nodes[i].name, nodes[i].start_slot, nodes[i].end_slot);
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"\nMigrating slots from node1 to node3...\n"</span>);
    migrateHashSlots(&amp;nodes[<span class="hljs-number">0</span>], &amp;nodes[<span class="hljs-number">2</span>], <span class="hljs-number">0</span>, <span class="hljs-number">1000</span>);

    
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ140ï¼‰Redisçš„Clusterçš„æ•…éšœè½¬ç§»æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575112613777506338</link>    <guid>https://juejin.cn/post/7575112613777506338</guid>    <pubDate>2025-11-22T23:49:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575112613777506338" data-draft-id="7575090551357161524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ140ï¼‰Redisçš„Clusterçš„æ•…éšœè½¬ç§»æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-22T23:49:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ140ï¼‰Redisçš„Clusterçš„æ•…éšœè½¬ç§»æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T23:49:03.000Z" title="Sat Nov 22 2025 23:49:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis Cluster çš„æ•…éšœè½¬ç§»æœºåˆ¶ç¡®ä¿åœ¨ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰å‡ºç°æ•…éšœæ—¶ï¼Œé›†ç¾¤ä¸­çš„ä»èŠ‚ç‚¹ï¼ˆSlaveï¼‰èƒ½å¤Ÿè‡ªåŠ¨æ¥ç®¡ä¸»èŠ‚ç‚¹çš„è§’è‰²ï¼Œä»è€Œä¿è¯é«˜å¯ç”¨æ€§ã€‚æ•…éšœè½¬ç§»çš„å®ç°æ¶‰åŠèŠ‚ç‚¹çŠ¶æ€ç›‘æ§ã€æ•…éšœæ£€æµ‹ã€é€‰ä¸¾æ–°ä¸»èŠ‚ç‚¹åŠæ›´æ–°é›†ç¾¤çŠ¶æ€ç­‰æ­¥éª¤ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è§£æè¿™äº›æ­¥éª¤ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹è¿›è¡Œæ·±å…¥æ¢è®¨ã€‚</p>
<h3 data-id="heading-0">1. èŠ‚ç‚¹çŠ¶æ€ç›‘æ§å’Œæ•…éšœæ£€æµ‹</h3>
<p>æ¯ä¸ª Redis é›†ç¾¤èŠ‚ç‚¹éƒ½ä¼šå®šæœŸå‘å…¶ä»–èŠ‚ç‚¹å‘é€ PING æ¶ˆæ¯ï¼Œå¹¶æœŸæœ›æ”¶åˆ° PONG å›å¤ã€‚å¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æœªæ”¶åˆ°å›å¤ï¼Œè¯¥èŠ‚ç‚¹å°†è®¤ä¸ºç›®æ ‡èŠ‚ç‚¹å¯èƒ½å¤±æ•ˆã€‚</p>
<h4 data-id="heading-1">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* Cluster node structure */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterNode</span> {</span>
    <span class="hljs-type">char</span> name[<span class="hljs-number">40</span>];      <span class="hljs-comment">/* Node ID */</span>
    <span class="hljs-type">int</span> flags;          <span class="hljs-comment">/* Node flags: master, slave, fail, etc. */</span>
    <span class="hljs-type">mstime_t</span> ping_sent; <span class="hljs-comment">/* Last time a ping was sent */</span>
    <span class="hljs-type">mstime_t</span> pong_received; <span class="hljs-comment">/* Last time a pong was received */</span>
    <span class="hljs-comment">// other fields...</span>
} clusterNode;

<span class="hljs-comment">/* Function to check for node failures */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterCron</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">mstime_t</span> now = mstime();
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span>((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *node = dictGetVal(de);

        <span class="hljs-keyword">if</span> (node-&gt;flags &amp; CLUSTER_NODE_MYSELF) <span class="hljs-keyword">continue</span>;

        <span class="hljs-keyword">if</span> (now - node-&gt;pong_received &gt; server.cluster_node_timeout) {
            <span class="hljs-comment">// Mark the node as failing</span>
            node-&gt;flags |= CLUSTER_NODE_PFAIL;
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s is in PFAIL state\n"</span>, node-&gt;name);
        }
    }
    dictReleaseIterator(di);
}
</code></pre>
<h3 data-id="heading-2">2. æ•…éšœç¡®è®¤å’ŒæŠ•ç¥¨</h3>
<p>å½“ä¸€ä¸ªèŠ‚ç‚¹è¢«æ ‡è®°ä¸º PFAILï¼ˆç–‘ä¼¼å¤±è´¥ï¼‰çŠ¶æ€åï¼Œå¦‚æœå¤šæ•°ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ä¹Ÿæ ‡è®°è¯¥èŠ‚ç‚¹ä¸º FAILï¼ˆç¡®å®šå¤±è´¥ï¼‰çŠ¶æ€ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹å°†è¢«è®¤ä¸ºçœŸçš„å¤±æ•ˆã€‚</p>
<h4 data-id="heading-3">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* Function to confirm node failure */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterSendFail</span><span class="hljs-params">(clusterNode *node)</span> {
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span> ((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *peer = dictGetVal(de);

        <span class="hljs-keyword">if</span> (peer-&gt;flags &amp; CLUSTER_NODE_MYSELF) <span class="hljs-keyword">continue</span>;

        <span class="hljs-comment">// Send FAIL message to other nodes</span>
        clusterSendMessage(peer, node, CLUSTERMSG_TYPE_FAIL);
    }
    dictReleaseIterator(di);
}

<span class="hljs-comment">/* Function to process FAIL messages */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterProcessFail</span><span class="hljs-params">(clusterMsg *msg)</span> {
    clusterNode *node = clusterLookupNode(msg-&gt;data.fail.nodeid);

    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Mark the node as FAIL</span>
    node-&gt;flags |= CLUSTER_NODE_FAIL;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s marked as FAIL\n"</span>, node-&gt;name);
}
</code></pre>
<h3 data-id="heading-4">3. é€‰ä¸¾æ–°çš„ä¸»èŠ‚ç‚¹</h3>
<p>å½“ä¸»èŠ‚ç‚¹è¢«ç¡®å®šä¸ºå¤±æ•ˆåï¼Œå…¶ä»èŠ‚ç‚¹å°†å‚ä¸é€‰ä¸¾ã€‚å‚ä¸é€‰ä¸¾çš„ä»èŠ‚ç‚¹ä¼šå‘å…¶ä»–ä¸»èŠ‚ç‚¹å‘é€æŠ•ç¥¨è¯·æ±‚ï¼Œå¹¶æ ¹æ®æ”¶åˆ°çš„æŠ•ç¥¨æ•°é‡å†³å®šæ˜¯å¦æˆä¸ºæ–°çš„ä¸»èŠ‚ç‚¹ã€‚</p>
<h4 data-id="heading-5">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* Function to initiate failover */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterHandleSlaveFailover</span><span class="hljs-params">(clusterNode *slave)</span> {
    <span class="hljs-keyword">if</span> (!(slave-&gt;flags &amp; CLUSTER_NODE_SLAVE)) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Promote the slave to master</span>
    slave-&gt;flags &amp;= ~CLUSTER_NODE_SLAVE;
    slave-&gt;flags |= CLUSTER_NODE_MASTER;

    <span class="hljs-comment">// Send update to the cluster</span>
    clusterBroadcastSlaveOf(slave, <span class="hljs-literal">NULL</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Slave %s promoted to master\n"</span>, slave-&gt;name);
}

<span class="hljs-comment">/* Function to broadcast SLAVEOF message */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterBroadcastSlaveOf</span><span class="hljs-params">(clusterNode *node, clusterNode *master)</span> {
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span> ((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *peer = dictGetVal(de);

        <span class="hljs-keyword">if</span> (peer-&gt;flags &amp; CLUSTER_NODE_MYSELF) <span class="hljs-keyword">continue</span>;

        clusterSendMessage(peer, node, CLUSTERMSG_TYPE_SLAVEOF, master);
    }
    dictReleaseIterator(di);
}

<span class="hljs-comment">/* Function to process SLAVEOF messages */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterProcessSlaveOf</span><span class="hljs-params">(clusterMsg *msg)</span> {
    clusterNode *node = clusterLookupNode(msg-&gt;data.slaveof.nodeid);

    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Update the node's master</span>
    node-&gt;slaveof = clusterLookupNode(msg-&gt;data.slaveof.masterid);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s updated to follow master %s\n"</span>, node-&gt;name, node-&gt;slaveof-&gt;name);
}
</code></pre>
<h3 data-id="heading-6">4. æ›´æ–°é›†ç¾¤çŠ¶æ€</h3>
<p>ä¸€æ—¦æ–°çš„ä¸»èŠ‚ç‚¹è¢«é€‰å®šï¼Œé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹éœ€è¦æ›´æ–°è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼Œä»¥ä¾¿æ­£ç¡®åœ°å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚</p>
<h4 data-id="heading-7">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">/* Function to update cluster state */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterUpdateState</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span>((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *node = dictGetVal(de);

        <span class="hljs-keyword">if</span> (node-&gt;flags &amp; CLUSTER_NODE_MASTER) {
            <span class="hljs-comment">// Update master's state</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (node-&gt;flags &amp; CLUSTER_NODE_SLAVE) {
            <span class="hljs-comment">// Update slave's state</span>
        }
    }
    dictReleaseIterator(di);
}
</code></pre>
<h3 data-id="heading-8">ç»¼åˆç¤ºä¾‹</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºäº† Redis Cluster æ•…éšœè½¬ç§»çš„å®Œæ•´æµç¨‹ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"crc16.h"</span>  <span class="hljs-comment">// Assume crc16.h provides crc16 function</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"dict.h"</span>   <span class="hljs-comment">// Assume dict.h provides a dictionary implementation</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"mstime.h"</span> <span class="hljs-comment">// Assume mstime.h provides mstime function</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_TIMEOUT 15000  <span class="hljs-comment">// 15 seconds</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_MYSELF 0x01</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_MASTER 0x02</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_SLAVE 0x04</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_PFAIL 0x08</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLUSTER_NODE_FAIL  0x10</span>

<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterNode</span> {</span>
    <span class="hljs-type">char</span> name[<span class="hljs-number">40</span>];      <span class="hljs-comment">/* Node ID */</span>
    <span class="hljs-type">int</span> flags;          <span class="hljs-comment">/* Node flags: master, slave, fail, etc. */</span>
    <span class="hljs-type">mstime_t</span> ping_sent; <span class="hljs-comment">/* Last time a ping was sent */</span>
    <span class="hljs-type">mstime_t</span> pong_received; <span class="hljs-comment">/* Last time a pong was received */</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterNode</span> *<span class="hljs-title">slaveof</span>;</span> <span class="hljs-comment">/* Master of this node if it's a slave */</span>
    <span class="hljs-comment">// other fields...</span>
} clusterNode;

<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">clusterState</span> {</span>
    dict *nodes;        <span class="hljs-comment">/* All known nodes in the cluster */</span>
} clusterState;

clusterState *server.cluster;

<span class="hljs-comment">/* Function to hash a key to a slot */</span>
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> <span class="hljs-title function_">keyHashSlot</span><span class="hljs-params">(<span class="hljs-type">char</span> *key, <span class="hljs-type">int</span> keylen)</span> {
    <span class="hljs-keyword">return</span> crc16(key, keylen) &amp; <span class="hljs-number">16383</span>;
}

<span class="hljs-comment">/* Function to send a message to a node */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterSendMessage</span><span class="hljs-params">(clusterNode *node, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *msg)</span> {
    <span class="hljs-comment">// In a real implementation, this would send the message over a network</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Sending message to node %s: %s\n"</span>, node-&gt;name, msg);
}

<span class="hljs-comment">/* Function to check for node failures */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterCron</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    <span class="hljs-type">mstime_t</span> now = mstime();
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span>((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *node = dictGetVal(de);

        <span class="hljs-keyword">if</span> (node-&gt;flags &amp; CLUSTER_NODE_MYSELF) <span class="hljs-keyword">continue</span>;

        <span class="hljs-keyword">if</span> (now - node-&gt;pong_received &gt; CLUSTER_NODE_TIMEOUT) {
            <span class="hljs-comment">// Mark the node as failing</span>
            node-&gt;flags |= CLUSTER_NODE_PFAIL;
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s is in PFAIL state\n"</span>, node-&gt;name);
        }
    }
    dictReleaseIterator(di);
}

<span class="hljs-comment">/* Function to confirm node failure */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterSendFail</span><span class="hljs-params">(clusterNode *node)</span> {
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
    <span class="hljs-keyword">while</span> ((de = dictNext(di)) != <span class="hljs-literal">NULL</span>) {
        clusterNode *peer = dictGetVal(de);

        <span class="hljs-keyword">if</span> (peer-&gt;flags &amp; CLUSTER_NODE_MYSELF) <span class="hljs-keyword">continue</span>;

        <span class="hljs-comment">// Send FAIL message to other nodes</span>
        clusterSendMessage(peer, <span class="hljs-string">"FAIL"</span>);
    }
    dictReleaseIterator(di);
}

<span class="hljs-comment">/* Function to process FAIL messages */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterProcessFail</span><span class="hljs-params">(clusterMsg *msg)</span> {
    clusterNode *node = clusterLookupNode(msg-&gt;data.fail.nodeid);

    <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">NULL</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Mark the node as FAIL</span>
    node-&gt;flags |= CLUSTER_NODE_FAIL;
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Node %s marked as FAIL\n"</span>, node-&gt;name);
}

<span class="hljs-comment">/* Function to initiate failover */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterHandleSlaveFailover</span><span class="hljs-params">(clusterNode *slave)</span> {
    <span class="hljs-keyword">if</span> (!(slave-&gt;flags &amp; CLUSTER_NODE_SLAVE)) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// Promote the slave to master</span>
    slave-&gt;flags &amp;= ~CLUSTER_NODE_SLAVE;
    slave-&gt;flags |= CLUSTER_NODE_MASTER;

    <span class="hljs-comment">// Send update to the cluster</span>
    clusterBroadcastSlaveOf(slave, <span class="hljs-literal">NULL</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Slave %s promoted to master\n"</span>, slave-&gt;name);
}

<span class="hljs-comment">/* Function to broadcast SLAVEOF message */</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">clusterBroadcastSlaveOf</span><span class="hljs-params">(clusterNode *node, clusterNode *master)</span> {
    dictIterator *di;
    dictEntry *de;

    di = dictGetSafeIterator(server.cluster-&gt;nodes);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§­ Claude Code ç”¨æˆ·å·¥ä½œåŒºæœ€ä½³å®è·µæŒ‡å—]]></title>    <link>https://juejin.cn/post/7575152891955183616</link>    <guid>https://juejin.cn/post/7575152891955183616</guid>    <pubDate>2025-11-22T23:49:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575152891955183616" data-draft-id="7575090551357177908" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§­ Claude Code ç”¨æˆ·å·¥ä½œåŒºæœ€ä½³å®è·µæŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,äººå·¥æ™ºèƒ½,Claude"/> <meta itemprop="datePublished" content="2025-11-22T23:49:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§­ Claude Code ç”¨æˆ·å·¥ä½œåŒºæœ€ä½³å®è·µæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-22T23:49:53.000Z" title="Sat Nov 22 2025 23:49:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-22
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸªä¸€ã€ä»€ä¹ˆæ˜¯â€œClaude Code å·¥ä½œåŒºâ€ï¼Ÿ</h2>
<p>Claude Code æ˜¯ Anthropic æ¨å‡ºçš„æ™ºèƒ½ä»£ç åŠ©æ‰‹ç¯å¢ƒï¼Œå®ƒä¸ä½ çš„æœ¬åœ°æˆ–äº‘ç«¯é¡¹ç›®æ–‡ä»¶ç³»ç»Ÿ<strong>å®æ—¶åŒæ­¥</strong>ã€‚<br/>
ç®€å•è¯´ï¼š</p>
<blockquote>
<p>å®ƒä¸ä»…æ˜¯ä¸€ä¸ªâ€œèŠå¤©æœºå™¨äººâ€ï¼Œæ›´åƒæ˜¯ä½ çš„â€œåä½œç¨‹åºå‘˜â€ï¼Œèƒ½ç›´æ¥åŠ¨æ‰‹æ”¹ä»£ç ã€‚</p>
</blockquote>
<p>è€Œâ€œå·¥ä½œåŒºï¼ˆWorkspaceï¼‰â€åˆ™æ˜¯ Claude æ“ä½œçš„åœ°ç›˜ã€‚<br/>
è¿™åŒ…å«ï¼š</p>
<ul>
<li>é¡¹ç›®çš„ç›®å½•ç»“æ„</li>
<li>æºä»£ç ä¸é…ç½®æ–‡ä»¶</li>
<li>æ„å»ºã€æµ‹è¯•ã€è¿è¡Œç¯å¢ƒ</li>
<li>ä¸Šä¸‹æ–‡è®°å¿†ï¼ˆClaude è‡ªå·±çš„â€œè„‘å†…ç¼–è¾‘åŒºâ€ğŸ§ ï¼‰</li>
</ul>
<p>æ‰€ä»¥ï¼Œè¦ç©è½¬ Claude Codeï¼Œä½ ä¸æ˜¯åœ¨æ•™å®ƒå†™ä»£ç ï¼›<br/>
è€Œæ˜¯åœ¨æ•™å®ƒ<strong>å¦‚ä½•ä¸ä½ å…±èˆ</strong> ğŸ’ƒğŸ¤–ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§©äºŒã€Claude Code çš„æ ¸å¿ƒåˆä½œç†å¿µ</h2>
<p>Claude ä¸ä»…èƒ½å›ç­”é—®é¢˜ï¼›å®ƒèƒ½<strong>ä¸»åŠ¨åœ¨ä½ çš„é¡¹ç›®ä¸­ä¿®æ”¹æ–‡ä»¶ã€é‡æ„æ¨¡å—ã€å†™æµ‹è¯•ã€æŸ¥é”™è¯¯</strong>ã€‚</p>
<p>ä½†è¿™ä¹Ÿæ˜¯<strong>åŒåˆƒå‰‘</strong>ï¼š</p>
<blockquote>
<p>å¦‚æœä½ ä¸ç»™å®ƒè§„çŸ©ï¼Œå®ƒå°±ä¼šâ€œçƒ­æƒ…åœ°å¸®ä½ åˆ åº“è·‘è·¯â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">âš”ï¸ ä¸‰ã€æœ€ä½³å®è·µæ€»çº²</h2>



































<table><thead><tr><th align="left">ç›®æ ‡</th><th align="left">Claude èƒ½åŠ›</th><th align="left">ä½ è¦åšçš„</th></tr></thead><tbody><tr><td align="left">å¿«é€Ÿåä½œ</td><td align="left">ä»£ç ç¼–å†™å’Œé‡æ„</td><td align="left">ç¡®å®šä»»åŠ¡è¾¹ç•Œï¼ˆåªæ“ä½œå“ªäº›æ–‡ä»¶/å‡½æ•°ï¼‰</td></tr><tr><td align="left">å®‰å…¨ä¿®æ”¹</td><td align="left">æ–‡ä»¶çº§åˆ«æ“ä½œ</td><td align="left">å…ˆè®© Claude å±•ç¤º<code>diff</code>å†ç¡®è®¤æäº¤</td></tr><tr><td align="left">æ¸…æ™°ä¸Šä¸‹æ–‡</td><td align="left">ç†è§£é¡¹ç›®ç»“æ„</td><td align="left">ç»™ Claude READMEçº§åˆ«çš„ä¸Šä¸‹æ–‡æŒ‡å¼•</td></tr><tr><td align="left">æ€§èƒ½ç¨³å®š</td><td align="left">æœ¬åœ°ç¯å¢ƒåŒæ­¥</td><td align="left">å®šæœŸæ¸…ç†ç¼“å­˜ä¸æ—§æ–‡ä»¶</td></tr><tr><td align="left">å¯è¿½æº¯æ€§</td><td align="left">AIæ”¹åŠ¨å¯å›æ»š</td><td align="left">æ¥å…¥Gitç‰ˆæœ¬ç®¡ç†ï¼Œè®°å½•Claudeåä½œå†å²</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">ğŸ—ï¸ å››ã€å·¥ä½œåŒºç»“æ„çš„é»„é‡‘æ³•åˆ™</h2>
<h3 data-id="heading-4">ğŸ§± 1ï¸âƒ£ ä¿æŒé¡¹ç›®ç»“æ„æ¸…æ™°</h3>
<p>Claude çš„æ¨ç†æ˜¯åŸºäºæ–‡ä»¶æ ‘çš„ï¼Œ<br/>
æ–‡ä»¶å‘½åæ··ä¹±ã€æ¨¡å—äº¤å‰ä¼šä¸¥é‡é™ä½å®ƒçš„å‡†ç¡®åº¦ã€‚</p>
<p><strong>æ¨èå¸ƒå±€ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">project-root/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ utils/
â”‚   â””â”€â”€ services/
â”œâ”€â”€ tests/
â”œâ”€â”€ config/
â””â”€â”€ README.md
</code></pre>
<p>ğŸ“Œ <em>å…³é”®ç‚¹</em>ï¼š</p>
<ul>
<li>å°½é‡éµå®ˆ<strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šä¸€ä¸ªæ–‡ä»¶åªå¹²ä¸€ä¸ªäº‹ã€‚</li>
<li>ä¸º Claude æä¾›ç»“æ„ä¸Šä¸‹æ–‡æ—¶ï¼Œå¯è®©å®ƒå…ˆâ€œç†è§£é¡¹ç›®ç›®å½•â€ (<code>list directory structure</code>)ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">âš™ï¸ 2ï¸âƒ£ åœ¨ Claude é‡Œåšâ€œç²¾ç¡®ä»»åŠ¡ææ¡ˆâ€</h3>
<p>Claude Code éå¸¸èªæ˜ï¼Œä½†å®ƒä¸æ˜¯ä½ å¿ƒçµæ„Ÿåº”çš„AIå¿ƒç”µå›¾ä»ªã€‚<br/>
ç»™å‡ºä»»åŠ¡æ—¶è¦åƒå·¥ç¨‹ç®¡ç†è€…ä¸€æ ·æ¸…æ™°ã€‚</p>
<h4 data-id="heading-6">âœ… å¥½ä¾‹å­ï¼š</h4>
<blockquote>
<p>â€œè¯·åœ¨ <code>src/router.js</code> ä¸­ä¸º <code>/api/chat</code> æ·»åŠ è·¯ç”±é€»è¾‘ï¼Œå¤ç”¨ <code>handleAIGCResponse()</code> å‡½æ•°ã€‚â€</p>
</blockquote>
<h4 data-id="heading-7">âŒ åä¾‹å­ï¼š</h4>
<blockquote>
<p>â€œå¸®æˆ‘åŠ ä¸ªAIæ¥å£å§ã€‚â€</p>
</blockquote>
<p>Claude ä¼šæ‡µæ‰ã€‚</p>
<hr/>
<h3 data-id="heading-8">ğŸ§  3ï¸âƒ£ è®© Claude ç†è§£ä½ çš„ç³»ç»Ÿçº¦æŸ</h3>
<p>Claude çš„å¼ºé¡¹ä¹‹ä¸€æ˜¯<strong>å¿«é€Ÿç†è§£ä»£ç é€»è¾‘</strong>ï¼Œ<br/>
ä½†å‰ææ˜¯å®ƒçŸ¥é“â€œè¾¹ç•Œåœ¨å“ªé‡Œâ€ã€‚</p>
<p>åœ¨å¼€å§‹å‰ï¼Œå‘Šè¯‰å®ƒï¼š</p>
<pre><code class="hljs language-diff" lang="diff"><span class="hljs-deletion">- ç¦æ­¢ä¿®æ”¹ config/prod.js</span>
<span class="hljs-deletion">- æ‰€æœ‰çŠ¶æ€ç®¡ç†ç»Ÿä¸€åœ¨ store ç›®å½•å†…</span>
<span class="hljs-deletion">- æµ‹è¯•å¿…é¡»é€šè¿‡ npm test</span>
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹å°±åƒè®©ä¸€ä¸ªå®ä¹ ç”Ÿä¸Šå²—å‰äº†è§£å…¬å¸çš„â€œä»£ç å®ªæ³•â€ğŸ“œã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ§° äº”ã€æ“ä½œæµç¨‹æ¨¡æ¿ï¼ˆClaude åä½œæŒ‡ä»¤æµï¼‰</h2>
<ol>
<li>
<p><strong>ğŸ“‚ åˆå§‹åŒ–é˜¶æ®µ</strong></p>
<blockquote>
<p>â€œClaudeï¼Œè¯·è¯»å–å½“å‰é¡¹ç›®ç›®å½•ã€‚â€<br/>
Claude ä¼šå±•ç¤ºç»“æ„æ ‘ï¼Œè®©ä½ ç¡®è®¤å®ƒè¯»å¯¹äº†ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>ğŸ§© ä¸Šä¸‹æ–‡ç†è§£é˜¶æ®µ</strong></p>
<blockquote>
<p>â€œè¯·è§£é‡Šä¸€ä¸‹é¡¹ç›®ç»“æ„å’Œæ•´ä½“ä¾èµ–å…³ç³»ã€‚â€<br/>
è¿™èƒ½å¸®åŠ© Claude å»ºç«‹ä»£ç è¯­ä¹‰ä¾èµ–å›¾ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>ğŸ”¨ æ‰§è¡Œä»»åŠ¡é˜¶æ®µ</strong></p>
<blockquote>
<p>â€œåœ¨ <code>src/utils/date.js</code> æ–°å¢ä¸€ä¸ª <code>formatTimestamp</code> å‡½æ•°ï¼Œå¹¶åœ¨ <code>app/logger.js</code> è°ƒç”¨å®ƒã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>ğŸª å®¡æ ¸ä¸æäº¤é˜¶æ®µ</strong></p>
<blockquote>
<p>â€œè¯·å±•ç¤ºä¿®æ”¹å‰åçš„å·®å¼‚(diff)ï¼Œæˆ‘ç¡®è®¤åå†åº”ç”¨ã€‚â€</p>
</blockquote>
</li>
<li>
<p><strong>ğŸ§¾ è®°å½•é˜¶æ®µ</strong></p>
<blockquote>
<p>æäº¤å‰åœ¨ commit message å†™æ˜ï¼š<br/>
<code>"feat: add timestamp formatter via Claude Code"</code></p>
</blockquote>
</li>
</ol>
<hr/>
<h2 data-id="heading-10">ğŸš¦ å…­ã€å®‰å…¨ä¸è§„èŒƒ</h2>
<p>Claude åœ¨æ–‡ä»¶ä¿®æ”¹æ—¶å¯èƒ½ä¼šï¼š</p>
<ul>
<li>è‡ªåŠ¨è¦†ç›–æ—§é€»è¾‘ï¼›</li>
<li>è°ƒæ•´ importï¼›</li>
<li>æ”¹åŠ¨ lint è§„åˆ™ã€‚</li>
</ul>
<p>å› æ­¤åŠ¡å¿…ï¼š</p>

























<table><thead><tr><th align="left">é£é™©</th><th align="left">é¢„é˜²æªæ–½</th></tr></thead><tbody><tr><td align="left">æ„å¤–è¦†ç›–æ–‡ä»¶</td><td align="left">å¼€å¯ <code>Git</code> å¹¶åˆ›å»ºç‹¬ç«‹åˆ†æ”¯</td></tr><tr><td align="left">æ— æ³•è¿½è¸ªä¿®æ”¹</td><td align="left">ä½¿ç”¨ Claude çš„ â€œshow changesâ€ æ¨¡å¼</td></tr><tr><td align="left">åæ‰ä¾èµ–</td><td align="left">æ¯æ¬¡æ”¹åŠ¨åæ‰§è¡Œ <code>npm test</code> æˆ– <code>yarn check</code></td></tr><tr><td align="left">ä¸Šä¸‹æ–‡æ··ä¹±</td><td align="left">å®šæœŸæ¸…ç©º Claude çš„å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œé˜²æ­¢è¿‡æ—¶é€»è¾‘</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-11">ğŸ§® ä¸ƒã€Claude ä¼˜åŒ–æŠ€å·§ä¸ç»éªŒè°ˆ</h2>
<h3 data-id="heading-12">ğŸŒ€ 1ï¸âƒ£ åˆ†é˜¶æ®µæ²Ÿé€š</h3>
<p>Claude çš„æ¨ç†â€œä¸Šä¸‹æ–‡çª—å£â€æ˜¯æœ‰é™çš„ã€‚<br/>
å¤ªå¤šæ–‡ä»¶ä¼šè®©å®ƒâ€œè®°å¿†èŠ±â€ã€‚</p>
<blockquote>
<p>è§£å†³æ–¹æ³•ï¼šåˆ†é˜¶æ®µæè¿° + ä¿ç•™å…³é”®æ–‡ä»¶æ‘˜è¦ã€‚</p>
</blockquote>
<h3 data-id="heading-13">ğŸ” 2ï¸âƒ£ æ•™ Claude å­¦ä½ çš„å‘½åè§„åˆ™</h3>
<blockquote>
<p>â€œæ‰€æœ‰ç»„ä»¶å‘½åä»¥ <code>Ai</code> å¼€å¤´ï¼Œæµ‹è¯•æ–‡ä»¶ä»¥ <code>.spec.js</code> ç»“å°¾ã€‚â€</p>
</blockquote>
<p>è¿™ä¼šè®©å®ƒç”Ÿæˆçš„æ–‡ä»¶â€œæµ‘ç„¶ä¸€ä½“â€ï¼Œè€Œä¸æ˜¯â€œAIæ–‡é£å‘³å„¿â€ã€‚</p>
<h3 data-id="heading-14">ğŸ§© 3ï¸âƒ£ åˆ©ç”¨ Claude æ‹†åˆ†ä»»åŠ¡</h3>
<p>å¤§ä»»åŠ¡ -&gt; æ‹†åˆ†ä¸º</p>
<ul>
<li>åˆ†ææ¨¡å—</li>
<li>é‡æ„æ¨¡å—</li>
<li>æµ‹è¯•å¢å¼ºæ¨¡å—<br/>
Claude æ¯å®Œæˆä¸€éƒ¨åˆ†å°±æäº¤ä¸€æ¬¡ã€‚</li>
</ul>
<p>åƒ Scrumï¼Œä½†æ•ˆç‡é«˜åˆ°ç¦»è°± ğŸ•¹ï¸ã€‚</p>
<hr/>
<h2 data-id="heading-15">ğŸ§  å…«ã€Claude Code + Git æœ€ä½³æ­é…å®è·µ</h2>
<pre><code class="hljs language-bash" lang="bash">git checkout -b feat/ai-collab
<span class="hljs-comment"># ğŸš€ ä¸ Claude ä¸€èµ·åä½œå¼€å‘</span>
<span class="hljs-comment"># çœ‹çœ‹ Claude çš„ diff</span>
git diff
<span class="hljs-comment"># å¦‚æœæ»¡æ„</span>
git commit -am <span class="hljs-string">"refactor: improved AIGC workflow (via Claude Code)"</span>
git push origin feat/ai-collab
</code></pre>
<p>ğŸ” <em>è¿™æ ·ä½ å°±æ‹¥æœ‰äº†ä¸€ä»½å®Œæ•´çš„ AI åä½œå†å²ï¼Œå¯æº¯æºã€å¯å›æ»šã€å¯å±•ç¤ºã€‚</em></p>
<hr/>
<h2 data-id="heading-16">ğŸŒˆ ä¹ã€å·¥ä½œåŒºå“²å­¦ï¼šAI ä¸æ›¿ä½ å†™ä»£ç ï¼Œè€Œæ˜¯æ›¿ä½ æ€è€ƒç»“æ„</h2>
<p>Claude Code çš„çœŸæ­£ä»·å€¼ä¸åœ¨äºâ€œç”Ÿæˆå‡ è¡Œå‡½æ•°â€ï¼Œ<br/>
è€Œåœ¨äºå¸®åŠ©ä½ ï¼š</p>
<ul>
<li>çœ‹è§ç³»ç»Ÿçš„ä¾èµ–è„‰ç»œï¼›</li>
<li>è°ƒä¼˜æ¶æ„é€»è¾‘ï¼›</li>
<li>æé†’æ½œåœ¨çš„è€¦åˆé™·é˜±ï¼›</li>
<li>è‡ªåŠ¨å®Œæˆä½ æ‡’å¾—å†™çš„æµ‹è¯•ã€‚</li>
</ul>
<p>ğŸ‘‰ å®ƒæ˜¯ä¸€ç§â€œæ™ºèƒ½ç»“å¯¹ç¼–ç¨‹ï¼ˆAI Pair Programmingï¼‰â€æ¨¡å¼ï¼Œ<br/>
ä¸æ˜¯è‡ªåŠ¨åŒ–ï¼Œè€Œæ˜¯ä¸€ç§äººæœºåä½œçš„æ€ç»´å»¶ä¼¸ã€‚</p>
<hr/>
<h2 data-id="heading-17">ğŸ§© åã€æ€»ç»“æ¸…å•</h2>









































<table><thead><tr><th align="left">é˜¶æ®µ</th><th align="left">ä»»åŠ¡</th><th align="left">å·¥å…·/å‘½ä»¤</th><th align="left">æœ€ä½³å®è·µ</th></tr></thead><tbody><tr><td align="left">åˆå§‹åŒ–</td><td align="left">å»ºç«‹æ¸…æ™°ç›®å½•ç»“æ„</td><td align="left"><code>tree</code> / <code>ls</code></td><td align="left">å°½é‡æ¨¡å—åŒ–</td></tr><tr><td align="left">å»ºç«‹è§„åˆ™</td><td align="left">å®šä¹‰ä¿®æ”¹èŒƒå›´</td><td align="left">è¯´æ˜æ–‡æ¡£</td><td align="left">æ˜ç¡®æ’é™¤åŒº</td></tr><tr><td align="left">åä½œå¼€å‘</td><td align="left">Claude Code</td><td align="left">â€œshow changesâ€æ¨¡å¼</td><td align="left">è®© Claude è§£é‡Šé€»è¾‘</td></tr><tr><td align="left">æµ‹è¯•éªŒè¯</td><td align="left"><code>npm test</code></td><td align="left">Watchæ¨¡å¼</td><td align="left">è‡ªåŠ¨æ£€æµ‹å›å½’é”™è¯¯</td></tr><tr><td align="left">æäº¤è¿½è¸ª</td><td align="left">Git</td><td align="left">ç‹¬ç«‹åˆ†æ”¯</td><td align="left">è®°å½• Claude çš„æ”¹åŠ¨å†å²</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-18">ğŸ§™â€â™‚ï¸ ç»“è¯­</h2>
<p>å½“ Claude Code çœŸæ­£æˆä¸ºä½ çš„â€œAIåŒäº‹â€æ—¶ï¼Œ<br/>
ä½ ä¼šå‘ç°è‡ªå·±ä»ä¸€ä¸ªå†™ä»£ç çš„äººï¼Œ<br/>
å˜æˆä¸€ä¸ª <strong>æŒ‡å¯¼æ™ºèƒ½ä½“å¼€å‘ç³»ç»Ÿçš„å·¥ç¨‹æ¶æ„å¸ˆ</strong>ã€‚</p>
<p>ğŸ’¬</p>
<blockquote>
<p>â€œçœŸæ­£çš„é«˜æ‰‹ï¼Œä¸æ˜¯æ€•AIæŠ¢é¥­ç¢—ï¼Œ<br/>
è€Œæ˜¯è®©AIå¸®ä½ ç…¨é¥­ã€‚â€ ğŸšâœ¨</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>